/*

 Video.js 7.7.6 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>

 slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 Copyright (c) 2014 David Björklund
 Available under the MIT license
 <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 jQuery Validation Plugin v1.16.0

 http://jqueryvalidation.org/

 Copyright (c) 2016 Jörn Zaefferer
 Released under the MIT license
 lazysizes - v5.2.2  jQuery UI - v1.12.1 - 2019-05-02
 http://jqueryui.com
 Includes: widget.js, focusable.js, tabbable.js, position.js, keycode.js, unique-id.js, widgets/autocomplete.js, widgets/datepicker.js, widgets/menu.js, widgets/tabs.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Widget 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Focusable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabbable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Position 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
 jQuery UI Keycode 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Unique ID 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Menu 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Autocomplete 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Datepicker 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabs 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 Programatically add the following
 @name m3u8-parser @version 4.4.0 @license Apache-2.0  @name mpd-parser @version 0.10.0 @license Apache-2.0  2020 Brightcove, Inc
 @license Apache-2.0
 @name videojs-overlay @version 2.1.4 @license Apache-2.0 */
+function(a){var b=function(b){a(b).on("click",'[data-dismiss\x3d"alert"]',this.close)};b.VERSION="3.4.1";b.TRANSITION_DURATION=150;b.prototype.close=function(d){function c(){h.detach().trigger("closed.bs.alert").remove()}var m=a(this),p=m.attr("data-target");p||(p=(p=m.attr("href"))&&p.replace(/.*(?=#[^\s]*$)/,""));p="#"===p?[]:p;var h=a(document).find(p);d&&d.preventDefault();h.length||(h=m.closest(".alert"));h.trigger(d=a.Event("close.bs.alert"));d.isDefaultPrevented()||(h.removeClass("in"),a.support.transition&&
h.hasClass("fade")?h.one("bsTransitionEnd",c).emulateTransitionEnd(b.TRANSITION_DURATION):c())};var c=a.fn.alert;a.fn.alert=function(d){return this.each(function(){var c=a(this),m=c.data("bs.alert");m||c.data("bs.alert",m=new b(this));"string"==typeof d&&m[d].call(c)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){a.fn.alert=c;return this};a(document).on("click.bs.alert.data-api",'[data-dismiss\x3d"alert"]',b.prototype.close)}(jQuery);
+function(a){function b(b){return this.each(function(){var d=a(this),f=d.data("bs.button"),h="object"==typeof b&&b;f||d.data("bs.button",f=new c(this,h));"toggle"==b?f.toggle():b&&f.setState(b)})}var c=function(b,d){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,d);this.isLoading=!1};c.VERSION="3.4.1";c.DEFAULTS={loadingText:"loading..."};c.prototype.setState=function(b){var d=this.$element,c=d.is("input")?"val":"html",f=d.data();b+="Text";null==f.resetText&&d.data("resetText",d[c]());setTimeout(a.proxy(function(){d[c](null==
f[b]?this.options[b]:f[b]);"loadingText"==b?(this.isLoading=!0,d.addClass("disabled").attr("disabled","disabled").prop("disabled",!0)):this.isLoading&&(this.isLoading=!1,d.removeClass("disabled").removeAttr("disabled").prop("disabled",!1))},this),0)};c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle\x3d"buttons"]');if(b.length){var d=this.$element.find("input");"radio"==d.prop("type")?(d.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):
"checkbox"==d.prop("type")&&(d.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active"));d.prop("checked",this.$element.hasClass("active"));a&&d.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b;a.fn.button.Constructor=c;a.fn.button.noConflict=function(){a.fn.button=d;return this};a(document).on("click.bs.button.data-api",'[data-toggle^\x3d"button"]',
function(d){var c=a(d.target).closest(".btn");b.call(c,"toggle");a(d.target).is('input[type\x3d"radio"], input[type\x3d"checkbox"]')||(d.preventDefault(),c.is("input,button")?c.trigger("focus"):c.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^\x3d"button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery);
+function(a){function b(b){var d;b=b.attr("data-target")||(d=b.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"");return a(document).find(b)}function c(b){return this.each(function(){var c=a(this),f=c.data("bs.collapse"),m=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!f&&m.toggle&&/show|hide/.test(b)&&(m.toggle=!1);f||c.data("bs.collapse",f=new d(this,m));if("string"==typeof b)f[b]()})}var d=function(b,c){this.$element=a(b);this.options=a.extend({},d.DEFAULTS,c);this.$trigger=a('[data-toggle\x3d"collapse"][href\x3d"#'+
b.id+'"],[data-toggle\x3d"collapse"][data-target\x3d"#'+b.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};d.VERSION="3.4.1";d.TRANSITION_DURATION=350;d.DEFAULTS={toggle:!0};d.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,f=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");
if(f&&f.length&&(b=f.data("bs.collapse"))&&b.transitioning)return;var h=a.Event("show.bs.collapse");this.$element.trigger(h);if(!h.isDefaultPrevented()){f&&f.length&&(c.call(f,"hide"),b||f.data("bs.collapse",null));var t=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[t](0).attr("aria-expanded",!0);this.$trigger.removeClass("collapsed").attr("aria-expanded",!0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("collapse in")[t]("");this.transitioning=
0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);f=a.camelCase(["scroll",t].join("-"));this.$element.one("bsTransitionEnd",a.proxy(b,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[t](this.$element[0][f])}}};d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");this.$element.trigger(b);if(!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
!1);this.$trigger.addClass("collapsed").attr("aria-expanded",!1);this.transitioning=1;var c=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return c.call(this);this.$element[b](0).one("bsTransitionEnd",a.proxy(c,this)).emulateTransitionEnd(d.TRANSITION_DURATION)}}};d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};d.prototype.getParent=function(){return a(document).find(this.options.parent).find('[data-toggle\x3d"collapse"][data-parent\x3d"'+
this.options.parent+'"]').each(a.proxy(function(d,c){d=a(c);this.addAriaAndCollapsedClass(b(d),d)},this)).end()};d.prototype.addAriaAndCollapsedClass=function(a,b){var d=a.hasClass("in");a.attr("aria-expanded",d);b.toggleClass("collapsed",!d).attr("aria-expanded",d)};var f=a.fn.collapse;a.fn.collapse=c;a.fn.collapse.Constructor=d;a.fn.collapse.noConflict=function(){a.fn.collapse=f;return this};a(document).on("click.bs.collapse.data-api",'[data-toggle\x3d"collapse"]',function(d){var f=a(this);f.attr("data-target")||
d.preventDefault();d=b(f);f=d.data("bs.collapse")?"toggle":f.data();c.call(d,f)})}(jQuery);
+function(a){var b=function(a,b){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",a,b)};b.VERSION="3.3.6";b.TRANSITION_DURATION=150;b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'\x3cdiv class\x3d"tooltip" role\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",
padding:0}};b.prototype.init=function(b,c,m){this.enabled=!0;this.type=b;this.$element=a(c);this.options=this.getOptions(m);this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");
b=this.options.trigger.split(" ");for(c=b.length;c--;)if(m=b[c],"click"==m)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=m){var d="hover"==m?"mouseleave":"focusout";this.$element.on(("hover"==m?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(d+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):
this.fixTitle()};b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.getOptions=function(b){b=a.extend({},this.getDefaults(),this.$element.data(),b);b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b};b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)});return b};b.prototype.enter=function(b){var d=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);
d||(d=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,d));b instanceof a.Event&&(d.inState["focusin"==b.type?"focus":"hover"]=!0);if(d.tip().hasClass("in")||"in"==d.hoverState)d.hoverState="in";else{clearTimeout(d.timeout);d.hoverState="in";if(!d.options.delay||!d.options.delay.show)return d.show();d.timeout=setTimeout(function(){"in"==d.hoverState&&d.show()},d.options.delay.show)}};b.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;
return!1};b.prototype.leave=function(b){var d=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);d||(d=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,d));b instanceof a.Event&&(d.inState["focusout"==b.type?"focus":"hover"]=!1);if(!d.isInStateTrue()){clearTimeout(d.timeout);d.hoverState="out";if(!d.options.delay||!d.options.delay.hide)return d.hide();d.timeout=setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delay.hide)}};
b.prototype.show=function(){var d=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(d);var c=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!d.isDefaultPrevented()&&c){var m=this;d=this.tip();c=this.getUID(this.type);this.setContent();d.attr("id",c);this.$element.attr("aria-describedby",c);this.options.animation&&d.addClass("fade");c="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):
this.options.placement;var p=/\s?auto?\s?/i,h=p.test(c);h&&(c=c.replace(p,"")||"top");d.detach().css({top:0,left:0,display:"block"}).addClass(c).data("bs."+this.type,this);this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);p=this.getPosition();var t=d[0].offsetWidth,g=d[0].offsetHeight;if(h){h=c;var r=this.getPosition(this.$viewport);c="bottom"==c&&p.bottom+g>r.bottom?"top":"top"==c&&p.top-g<r.top?"bottom":"right"==
c&&p.right+t>r.width?"left":"left"==c&&p.left-t<r.left?"right":c;d.removeClass(h).addClass(c)}p=this.getCalculatedOffset(c,p,t,g);this.applyPlacement(p,c);c=function(){var a=m.hoverState;m.$element.trigger("shown.bs."+m.type);m.hoverState=null;"out"==a&&m.leave(m)};a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",c).emulateTransitionEnd(b.TRANSITION_DURATION):c()}}};b.prototype.applyPlacement=function(b,c){var d=this.tip(),f=d[0].offsetWidth,h=d[0].offsetHeight,t=parseInt(d.css("margin-top"),
10),g=parseInt(d.css("margin-left"),10);isNaN(t)&&(t=0);isNaN(g)&&(g=0);b.top+=t;b.left+=g;a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0);d.addClass("in");t=d[0].offsetWidth;g=d[0].offsetHeight;"top"==c&&g!=h&&(b.top=b.top+h-g);var r=this.getViewportAdjustedDelta(c,b,t,g);r.left?b.left+=r.left:b.top+=r.top;f=(c=/top|bottom/.test(c))?2*r.left-f+t:2*r.top-h+g;h=c?"offsetWidth":"offsetHeight";d.offset(b);this.replaceArrow(f,d[0][h],
c)};b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};b.prototype.hide=function(d){function c(){"in"!=m.hoverState&&p.detach();m.$element.removeAttr("aria-describedby").trigger("hidden.bs."+m.type);d&&d()}var m=this,p=a(this.$tip),h=a.Event("hide.bs."+this.type);
this.$element.trigger(h);if(!h.isDefaultPrevented())return p.removeClass("in"),a.support.transition&&p.hasClass("fade")?p.one("bsTransitionEnd",c).emulateTransitionEnd(b.TRANSITION_DURATION):c(),this.hoverState=null,this};b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};b.prototype.hasContent=function(){return this.getTitle()};b.prototype.getPosition=function(b){b=
b||this.$element;var d=b[0],c="BODY"==d.tagName;d=d.getBoundingClientRect();null==d.width&&(d=a.extend({},d,{width:d.right-d.left,height:d.bottom-d.top}));var p=c?{top:0,left:0}:b.offset();b={scroll:c?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()};c=c?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},d,b,c,p)};b.prototype.getCalculatedOffset=function(a,b,c,p){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-
p,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-p/2,left:b.left-c}:{top:b.top+b.height/2-p/2,left:b.left+b.width}};b.prototype.getViewportAdjustedDelta=function(a,b,c,p){var d={top:0,left:0};if(!this.$viewport)return d;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);/right|left/.test(a)?(c=b.top-f-g.scroll,b=b.top+f-g.scroll+p,c<g.top?d.top=g.top-c:b>g.top+g.height&&(d.top=g.top+g.height-b)):(p=b.left-f,b=b.left+f+c,p<g.left?d.left=g.left-
p:b>g.right&&(d.left=g.left+g.width-b));return d};b.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};b.prototype.getUID=function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a};b.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw Error(this.type+" `template` option must consist of exactly 1 top-level element!");
return this.$tip};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};b.prototype.enable=function(){this.enabled=!0};b.prototype.disable=function(){this.enabled=!1};b.prototype.toggleEnabled=function(){this.enabled=!this.enabled};b.prototype.toggle=function(b){var d=this;b&&(d=a(b.currentTarget).data("bs."+this.type),d||(d=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,d)));b?(d.inState.click=!d.inState.click,
d.isInStateTrue()?d.enter(d):d.leave(d)):d.tip().hasClass("in")?d.leave(d):d.enter(d)};b.prototype.destroy=function(){var a=this;clearTimeout(this.timeout);this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type);a.$tip&&a.$tip.detach();a.$tip=null;a.$arrow=null;a.$viewport=null})};var c=a.fn.tooltip;a.fn.tooltip=function(d){return this.each(function(){var c=a(this),m=c.data("bs.tooltip"),p="object"==typeof d&&d;if(m||!/destroy|hide/.test(d))if(m||c.data("bs.tooltip",m=new b(this,
p)),"string"==typeof d)m[d]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.noConflict=function(){a.fn.tooltip=c;return this}}(jQuery);
+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");b.VERSION="3.4.1";b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'\x3cdiv class\x3d"popover" role\x3d"tooltip"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3ch3 class\x3d"popover-title"\x3e\x3c/h3\x3e\x3cdiv class\x3d"popover-content"\x3e\x3c/div\x3e\x3c/div\x3e'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);
b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();if(this.options.html){var p=typeof c;this.options.sanitize&&(b=this.sanitizeHtml(b),"string"===p&&(c=this.sanitizeHtml(c)));a.find(".popover-title").html(b);a.find(".popover-content").children().detach().end()["string"===p?"html":"append"](c)}else a.find(".popover-title").text(b),a.find(".popover-content").children().detach().end().text(c);
a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var c=a.fn.popover;a.fn.popover=function(d){return this.each(function(){var c=
a(this),m=c.data("bs.popover"),p="object"==typeof d&&d;if(m||!/destroy|hide/.test(d))if(m||c.data("bs.popover",m=new b(this,p)),"string"==typeof d)m[d]()})};a.fn.popover.Constructor=b;a.fn.popover.noConflict=function(){a.fn.popover=c;return this}}(jQuery);
+function(a){function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in b)if(void 0!==a.style[f])return{end:b[f]};return!1}a.fn.emulateTransitionEnd=function(b){var d=!1,c=this;a(this).one("bsTransitionEnd",function(){d=!0});setTimeout(function(){d||a(c).trigger(a.support.transition.end)},b);return this};a(function(){a.support.transition=b();a.support.transition&&
(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery);window.lazySizesConfig=window.lazySizesConfig||{};window.lazySizesConfig.lazyClass="lazy";window.lazySizesConfig.nativeLoading={setLoadingAttribute:!0};$(document).on("lazybeforeunveil",function(a){$(a.target).find(".ssvideo").length&&$(function(){$(a.target).find(".ssvideo").ssmp()})});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var d=a.data(this[0],"validator");if(d)return d;this.attr("novalidate","novalidate");d=new a.validator(b,this[0]);a.data(this[0],"validator",d);d.settings.onsubmit&&(this.on("click.validate",":submit",function(b){d.settings.submitHandler&&(d.submitButton=b.target);a(this).hasClass("cancel")&&
(d.cancelSubmit=!0);void 0!==a(this).attr("formnovalidate")&&(d.cancelSubmit=!0)}),this.on("submit.validate",function(b){function c(){var c;if(d.settings.submitHandler){d.submitButton&&(c=a("\x3cinput type\x3d'hidden'/\x3e").attr("name",d.submitButton.name).val(a(d.submitButton).val()).appendTo(d.currentForm));var f=d.settings.submitHandler.call(d,d.currentForm,b);d.submitButton&&c.remove();return void 0!==f?f:!1}return!0}d.settings.debug&&b.preventDefault();if(d.cancelSubmit)return d.cancelSubmit=
!1,c();if(d.form())return d.pendingRequest?(d.formSubmitted=!0,!1):c();d.focusInvalid();return!1}));return d}b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(a(this[0]).is("form"))var b=this.validate().form();else{var c=[];b=!0;var m=a(this[0].form).validate();this.each(function(){(b=m.element(this)&&b)||(c=c.concat(m.errorList))});m.errorList=c}return b},rules:function(b,c){var d=this[0];if(null!=d&&null!=d.form){if(b){var f=a.data(d.form,
"validator").settings;var h=f.rules;var t=a.validator.staticRules(d);switch(b){case "add":a.extend(t,a.validator.normalizeRule(c));delete t.messages;h[d.name]=t;c.messages&&(f.messages[d.name]=a.extend(f.messages[d.name],c.messages));break;case "remove":if(!c)return delete h[d.name],t;var g={};a.each(c.split(/\s/),function(b,c){g[c]=t[c];delete t[c];"required"===c&&a(d).removeAttr("aria-required")});return g}}b=a.validator.normalizeRules(a.extend({},a.validator.classRules(d),a.validator.attributeRules(d),
a.validator.dataRules(d),a.validator.staticRules(d)),d);b.required&&(c=b.required,delete b.required,b=a.extend({required:c},b),a(d).attr("aria-required","true"));b.remote&&(c=b.remote,delete b.remote,b=a.extend(b,{remote:c}));return b}}});a.extend(a.expr.pseudos||a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){b=a(b).val();return null!==b&&!!a.trim(""+b)},unchecked:function(b){return!a(b).prop("checked")}});a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,
b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(1===arguments.length)return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)};if(void 0===c)return b;2<arguments.length&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1));c.constructor!==Array&&(c=[c]);a.each(c,function(a,d){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return d})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",
pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},
onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||-1!==a.inArray(c.keyCode,d)||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,m){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(m):a(b).addClass(c).removeClass(m)},unhighlight:function(b,c,m){"radio"===b.type?
this.findByName(b.name).removeClass(c).addClass(m):a(b).removeClass(c).addClass(m)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),
minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){!this.form&&
this.hasAttribute("contenteditable")&&(this.form=a(this).closest("form")[0]);var c=a.data(this.form,"validator"),d="on"+b.type.replace(/^validate/,""),g=c.settings;g[d]&&!a(this).is(g.ignore)&&g[d].call(c,this,b)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=
0;this.pending={};this.invalid={};this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){"string"===typeof d&&(d=d.split(/\s/));a.each(d,function(a,g){c[g]=b})});var m=this.settings.rules;a.each(m,function(b,c){m[b]=a.validator.normalizeRule(c)});a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type\x3d'password'], [type\x3d'file'], select, textarea, [type\x3d'number'], [type\x3d'search'], [type\x3d'tel'], [type\x3d'url'], [type\x3d'email'], [type\x3d'datetime'], [type\x3d'date'], [type\x3d'month'], [type\x3d'week'], [type\x3d'time'], [type\x3d'datetime-local'], [type\x3d'range'], [type\x3d'color'], [type\x3d'radio'], [type\x3d'checkbox'], [contenteditable], [type\x3d'button']",
b).on("click.validate","select, option, [type\x3d'radio'], [type\x3d'checkbox']",b);if(this.settings.invalidHandler)a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},
checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c=this.clean(b),d=this.validationTargetFor(c),p=this,h=!0,t;if(void 0===d)delete this.invalid[c.name];else{this.prepareElement(d);this.currentElements=a(d);(t=this.groups[d.name])&&a.each(this.groups,function(a,b){b===t&&a!==d.name&&(c=p.validationTargetFor(p.clean(p.findByName(a))))&&c.name in p.invalid&&(p.currentElements.push(c),h=p.check(c)&&
h)});var g=!1!==this.check(d);h=h&&g;this.invalid[d.name]=g?!1:!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();a(b).attr("aria-invalid",!g)}return h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b);this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,
this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},
numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,c;for(c in a)a[c]&&b++;return b},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text("");this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(d){}},
findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name");!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this);this.hasAttribute("contenteditable")&&(this.form=
a(this).closest("form")[0]);return d in c||!b.objectLength(a(this).rules())?!1:c[d]=!0})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([])},reset:function(){this.resetInternals();this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(b){var c=a(b),d=b.type;if("radio"===d||"checkbox"===d)return this.findByName(b.name).filter(":checked").val();if("number"===d&&"undefined"!==typeof b.validity)return b.validity.badInput?"NaN":c.val();b=b.hasAttribute("contenteditable")?c.text():c.val();if("file"===d){if("C:\\fakepath\\"===b.substr(0,12))return b.substr(12);d=b.lastIndexOf("/");if(0<=d)return b.substr(d+1);d=b.lastIndexOf("\\");return 0<=d?
b.substr(d+1):b}return"string"===typeof b?b.replace(/\r/g,""):b},check:function(b){b=this.validationTargetFor(this.clean(b));var c=a(b).rules(),d=a.map(c,function(a,b){return b}).length,p=!1,h=this.elementValue(b),t;if("function"===typeof c.normalizer){h=c.normalizer.call(b,h);if("string"!==typeof h)throw new TypeError("The normalizer should return a string value.");delete c.normalizer}for(t in c){var g={method:t,parameters:c[t]};try{var r=a.validator.methods[t].call(this,h,b,g.parameters);if("dependency-mismatch"===
r&&1===d)p=!0;else{p=!1;if("pending"===r){this.toHide=this.toHide.not(this.errorsFor(b));return}if(!r)return this.formatAndAdd(b,g),!1}}catch(v){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+g.method+"' method.",v),v instanceof TypeError&&(v.message+=".  Exception occurred when checking element "+b.id+", check the '"+g.method+"' method."),v;}}if(!p)return this.objectLength(c)&&this.successList.push(b),!0},customDataMessage:function(b,
c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){return(a=this.settings.messages[a])&&(a.constructor===String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){"string"===typeof c&&(c={method:c});var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,
a.validator.messages[c.method],"\x3cstrong\x3eWarning: No message defined for "+b.name+"\x3c/strong\x3e"),f=/\$?\{(\d+)\}/g;"function"===typeof d?d=d.call(this,c.parameters,b):f.test(d)&&(d=a.validator.format(d.replace(f,"{$1}"),c.parameters));return d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method});this.errorMap[a.name]=c;this.submitted[a.name]=c},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));
return a},defaultShowErrors:function(){var a;for(a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,
b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,f=this.errorsFor(b),h=this.idOrName(b),t=a(b).attr("aria-describedby");if(f.length)f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),
f.html(c);else{var g=f=a("\x3c"+this.settings.errorElement+"\x3e").attr("id",h+"-error").addClass(this.settings.errorClass).html(c||"");this.settings.wrapper&&(g=f.hide().show().wrap("\x3c"+this.settings.wrapper+"/\x3e").parent());this.labelContainer.length?this.labelContainer.append(g):this.settings.errorPlacement?this.settings.errorPlacement.call(this,g,a(b)):g.insertAfter(b);if(f.is("label"))f.attr("for",h);else if(0===f.parents("label[for\x3d'"+this.escapeCssMeta(h)+"']").length&&(g=f.attr("id"),
t?t.match(new RegExp("\\b"+this.escapeCssMeta(g)+"\\b"))||(t+=" "+g):t=g,a(b).attr("aria-describedby",t),d=this.groups[b.name])){var r=this;a.each(r.groups,function(b,g){g===d&&a("[name\x3d'"+r.escapeCssMeta(b)+"']",r.currentForm).attr("aria-describedby",f.attr("id"))})}}!c&&this.settings.success&&(f.text(""),"string"===typeof this.settings.success?f.addClass(this.settings.success):this.settings.success(f,b));this.toShow=this.toShow.add(f)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b));
b=a(b).attr("aria-describedby");c="label[for\x3d'"+c+"'], label[for\x3d'"+c+"'] *";b&&(c=c+", #"+this.escapeCssMeta(b).replace(/\s+/g,", #"));return this.errors().filter(c)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){this.checkable(b)&&(b=this.findByName(b.name));return a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},
findByName:function(b){return a(this.currentForm).find("[name\x3d'"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case "select":return a("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,
b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[b.name];a(b).removeClass(this.settings.pendingClass);c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?
(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){c="string"===typeof c&&c||"remote";return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm();a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},
classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={};(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},normalizeAttributeRule:function(a,
b,c,p){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(p=Number(p),isNaN(p)&&(p=void 0));p||0===p?a[c]=p:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c={},d=a(b),p=b.getAttribute("type"),h;for(h in a.validator.methods){if("required"===h){var t=b.getAttribute(h);""===t&&(t=!0);t=!!t}else t=d.attr(h);this.normalizeAttributeRule(c,p,h,t)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},dataRules:function(b){var c={},d=a(b);b=b.getAttribute("type");
var p;for(p in a.validator.methods){var h=d.data("rule"+p.charAt(0).toUpperCase()+p.substring(1).toLowerCase());this.normalizeAttributeRule(c,b,p,h)}return c},staticRules:function(b){var c={},d=a.data(b.form,"validator");d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{});return c},normalizeRules:function(b,c){a.each(b,function(d,f){if(!1===f)delete b[d];else if(f.param||f.depends){var h=!0;switch(typeof f.depends){case "string":h=!!a(f.depends,c.form).length;break;case "function":h=
f.depends.call(c,c)}h?b[d]=void 0!==f.param?f.param:!0:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}});a.each(b,function(d,f){b[d]=a.isFunction(f)&&"normalizer"!==d?f(c):f});a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))});a.each(["rangelength","range"],function(){if(b[this])if(a.isArray(b[this]))b[this]=[Number(b[this][0]),Number(b[this][1])];else if("string"===typeof b[this]){var c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/);b[this]=[Number(c[0]),
Number(c[1])]}});a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength));return b},normalizeRule:function(b){if("string"===typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0});b=c}return b},addMethod:function(b,c,m){a.validator.methods[b]=c;a.validator.messages[b]=void 0!==m?m:a.validator.messages[b];3>c.length&&a.validator.addClassRules(b,
a.validator.normalizeRule(b))},methods:{required:function(b,c,m){return this.depend(m,c)?"select"===c.nodeName.toLowerCase()?(b=a(c).val())&&0<b.length:this.checkable(c)?0<this.getLength(b,c):0<b.length:"dependency-mismatch"},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,m){b=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||b>=m},maxlength:function(b,c,m){b=
a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||b<=m},rangelength:function(b,c,m){b=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||b>=m[0]&&b<=m[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,m){var d=a(c).attr("type"),f="Step attribute on input type "+d+" is not supported.",t=["text","number","range"],g=new RegExp("\\b"+
d+"\\b"),r=function(a){return(a=(""+a).match(/(?:\.(\d+))?$/))?a[1]?a[1].length:0:0},v=!0;if(d&&!g.test(t.join()))throw Error(f);d=r(m);if(r(b)>d||0!==Math.round(b*Math.pow(10,d))%Math.round(m*Math.pow(10,d)))v=!1;return this.optional(c)||v},equalTo:function(b,c,m){m=a(m);if(this.settings.onfocusout&&m.not(".validate-equalTo-blur").length)m.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()});return b===m.val()},remote:function(b,c,m,p){if(this.optional(c))return"dependency-mismatch";
p="string"===typeof p&&p||"remote";var d=this.previousValue(c,p);this.settings.messages[c.name]||(this.settings.messages[c.name]={});d.originalMessage=d.originalMessage||this.settings.messages[c.name][p];this.settings.messages[c.name][p]=d.message;m="string"===typeof m&&{url:m}||m;var f=a.param(a.extend({data:b},m.data));if(d.old===f)return d.valid;d.old=f;var g=this;this.startRequest(c);f={};f[c.name]=b;a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:f,context:g.currentForm,
success:function(a){var r=!0===a||"true"===a;g.settings.messages[c.name][p]=d.originalMessage;if(r){var f=g.formSubmitted;g.resetInternals();g.toHide=g.errorsFor(c);g.formSubmitted=f;g.successList.push(c);g.invalid[c.name]=!1;g.showErrors()}else f={},a=a||g.defaultMessage(c,{method:p,parameters:b}),f[c.name]=d.message=a,g.invalid[c.name]=!0,g.showErrors(f);d.valid=r;g.stopRequest(c,r)}},m));return"pending"}}});var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,m){c=a.port;"abort"===a.mode&&
(b[c]&&b[c].abort(),b[c]=m)});else{var c=a.ajax;a.ajax=function(d){var f=("port"in d?d:a.ajaxSettings).port;return"abort"===("mode"in d?d:a.ajaxSettings).mode?(b[f]&&b[f].abort(),b[f]=c.apply(this,arguments),b[f]):c.apply(this,arguments)}}return a});
!function(a){var b=function(a,b,f){var c,d;if(function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in
d||(d[b]=c[b])}(),!b||!b.getElementsByClassName)return{init:function(){},cfg:d,noSupport:!0};var h=b.documentElement,t=a.HTMLPictureElement,g=a.addEventListener.bind(a),r=a.setTimeout,v=a.requestAnimationFrame||r,A=a.requestIdleCallback,G=/^picture$/i,X=["load","error","lazyincluded","_lazyloaded"],I={},O=Array.prototype.forEach,H=function(a,b){I[b]||(I[b]=new RegExp("(\\s|^)"+b+"(\\s|$)"));return I[b].test(a.getAttribute("class")||"")&&I[b]},ha=function(a,b){H(a,b)||a.setAttribute("class",(a.getAttribute("class")||
"").trim()+" "+b)},L=function(a,b){var c;(c=H(a,b))&&a.setAttribute("class",(a.getAttribute("class")||"").replace(c," "))},E=function(a,b,c){var g=c?"addEventListener":"removeEventListener";c&&E(a,b);X.forEach(function(c){a[g](c,b)})},Y=function(a,g,d,r,f){var v=b.createEvent("Event");d||(d={});d.instance=c;v.initEvent(g,!r,!f);v.detail=d;a.dispatchEvent(v);return v},oa=function(b,c){var g;!t&&(g=a.picturefill||d.pf)?(c&&c.src&&!b.getAttribute("srcset")&&b.setAttribute("srcset",c.src),g({reevaluate:!0,
elements:[b]})):c&&c.src&&(b.src=c.src)},aa=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},J=function(){var a,c,g=[],d=[],f=g,h=function(){var b=f;f=g.length?d:g;a=!0;for(c=!1;b.length;)b.shift()();a=!1},A=function(g,d){a&&!d?g.apply(this,arguments):(f.push(g),c||(c=!0,(b.hidden?r:v)(h)))};A._lsFlush=h;return A}(),ka=function(a,b){return b?function(){J(a)}:function(){var b=this,c=arguments;J(function(){a.apply(b,c)})}},W=function(a){var b,
c=0,g=d.throttleDelay,v=d.ricTimeout,h=function(){b=!1;c=f.now();a()},m=A&&49<v?function(){A(h,{timeout:v});v!==d.ricTimeout&&(v=d.ricTimeout)}:ka(function(){r(h)},!0);return function(a){if(a=!0===a)v=33;if(!b){b=!0;var d=g-(f.now()-c);0>d&&(d=0);a||9>d?m():r(m,d)}}},P=function(a){var b,c,g=function(){b=null;a()},d=function(){var a=f.now()-c;99>a?r(d,99-a):(A||g)(g)};return function(){c=f.now();b||(b=r(d,99))}},da=function(){var A,m,p,t,X,I,da,Aa,aa,ia,ba,Z,Ua=/^img$/i,hb=/^iframe$/i,ib="onscroll"in
a&&!/(gle|ing)bot/.test(navigator.userAgent),Cb=0,S=0,jb=-1,Nb=function(a){S--;if(!a||0>S||!a.target)S=0},Va=function(a){null==Z&&(Z="hidden"==(getComputedStyle(b.body,null)||{}).visibility);return Z||!("hidden"==(getComputedStyle(a.parentNode,null)||{}).visibility&&"hidden"==(getComputedStyle(a,null)||{}).visibility)},mc=function(){var a,g,r,f,v=c.elements;if((t=d.loadMode)&&8>S&&(a=v.length)){var p=0;for(jb++;p<a;p++)if(v[p]&&!v[p]._lazyRace)if(!ib||c.prematureUnveil&&c.prematureUnveil(v[p]))Db(v[p]);
else{(f=v[p].getAttribute("data-expand"))&&(r=1*f)||(r=Cb);if(!G){var G=!d.expand||1>d.expand?500<h.clientHeight&&500<h.clientWidth?500:370:d.expand;c._defEx=G;var H=G*d.expFactor;var X=d.hFac;Z=null;Cb<H&&1>S&&2<jb&&2<t&&!b.hidden?(Cb=H,jb=0):Cb=1<t&&1<jb&&6>S?G:0}if(ha!==r){I=innerWidth+r*X;da=innerHeight+r;var E=-1*r;var ha=r}H=v[p].getBoundingClientRect();if((H=(ba=H.bottom)>=E&&(Aa=H.top)<=da&&(ia=H.right)>=E*X&&(aa=H.left)<=I&&(ba||ia||aa||Aa)&&(d.loadHidden||Va(v[p])))&&!(H=m&&3>S&&!f&&(3>
t||4>jb))){var L=v[p];var O=r;H=L;L=Va(L);Aa-=O;ba+=O;aa-=O;for(ia+=O;L&&(H=H.offsetParent)&&H!=b.body&&H!=h;)(L=0<((getComputedStyle(H,null)||{}).opacity||1))&&"visible"!=(getComputedStyle(H,null)||{}).overflow&&(O=H.getBoundingClientRect(),L=ia>O.left&&aa<O.right&&ba>O.top-1&&Aa<O.bottom+1);H=L}if(H){Db(v[p]);var Y=!0;if(9<S)break}else!Y&&m&&!g&&4>S&&4>jb&&2<t&&(A[0]||d.preloadAfterLoad)&&(A[0]||!f&&(ba||ia||aa||Aa||"auto"!=v[p].getAttribute(d.sizesAttr)))&&(g=A[0]||v[p])}g&&!Y&&Db(g)}},ja=W(mc),
sb=function(a){var b=a.target;b._lazyCache?delete b._lazyCache:(Nb(a),ha(b,d.loadedClass),L(b,d.loadingClass),E(b,Jc),Y(b,"lazyloaded"))},tb=ka(sb),Jc=function(a){tb({target:a.target})},Kc=function(a,b){var c=a.getAttribute("data-load-mode")||d.iframeLoadMode;0==c?a.contentWindow.location.replace(b):1==c&&(a.src=b)},Oa=function(a){var b,c=a.getAttribute(d.srcsetAttr);(b=d.customMedia[a.getAttribute("data-media")||a.getAttribute("media")])&&a.setAttribute("media",b);c&&a.setAttribute("srcset",c)},
Lc=ka(function(a,b,c,g,f){var v,h;if(!(h=Y(a,"lazybeforeunveil",b)).defaultPrevented){g&&(c?ha(a,d.autosizesClass):a.setAttribute("sizes",g));g=a.getAttribute(d.srcsetAttr);c=a.getAttribute(d.srcAttr);if(f)var A=(v=a.parentNode)&&G.test(v.nodeName||"");var m=b.firesLoad||"src"in a&&(g||c||A);h={target:a};ha(a,d.loadingClass);m&&(clearTimeout(p),p=r(Nb,2500),E(a,Jc,!0));A&&O.call(v.getElementsByTagName("source"),Oa);g?a.setAttribute("srcset",g):c&&!A&&(hb.test(a.nodeName)?Kc(a,c):a.src=c);f&&(g||A)&&
oa(a,{src:c})}a._lazyRace&&delete a._lazyRace;L(a,d.lazyClass);J(function(){var b=a.complete&&1<a.naturalWidth;if(!m||b)b&&ha(a,d.fastLoadedClass),sb(h),a._lazyCache=!0,r(function(){"_lazyCache"in a&&delete a._lazyCache},9);"lazy"==a.loading&&S--},!0)}),Db=function(a){if(!a._lazyRace){var b=Ua.test(a.nodeName),c=b&&(a.getAttribute(d.sizesAttr)||a.getAttribute("sizes")),g="auto"==c;if(!g&&m||!b||!a.getAttribute("src")&&!a.srcset||a.complete||H(a,d.errorClass)||!H(a,d.lazyClass)){var r=Y(a,"lazyunveilread").detail;
g&&T.updateElem(a,!0,a.offsetWidth);a._lazyRace=!0;S++;Lc(a,r,g,c,b)}}},xa=P(function(){d.loadMode=3;ja()}),Pb=function(){3==d.loadMode&&(d.loadMode=2);xa()},bb=function(){m||(999>f.now()-X?r(bb,999):(m=!0,d.loadMode=3,ja(),g("scroll",Pb,!0)))};return{_:function(){X=f.now();c.elements=b.getElementsByClassName(d.lazyClass);A=b.getElementsByClassName(d.lazyClass+" "+d.preloadClass);g("scroll",ja,!0);g("resize",ja,!0);g("pageshow",function(a){if(a.persisted){var c=b.querySelectorAll("."+d.loadingClass);
c.length&&c.forEach&&v(function(){c.forEach(function(a){a.complete&&Db(a)})})}});a.MutationObserver?(new MutationObserver(ja)).observe(h,{childList:!0,subtree:!0,attributes:!0}):(h.addEventListener("DOMNodeInserted",ja,!0),h.addEventListener("DOMAttrModified",ja,!0),setInterval(ja,999));g("hashchange",ja,!0);"focus mouseover click load transitionend animationend".split(" ").forEach(function(a){b.addEventListener(a,ja,!0)});/d$|^c/.test(b.readyState)?bb():(g("load",bb),b.addEventListener("DOMContentLoaded",
ja),r(bb,2E4));c.elements.length?(mc(),J._lsFlush()):ja()},checkElems:ja,unveil:Db,_aLSL:Pb}}(),T=function(){var a,c=ka(function(a,b,c,g){var d;a._lazysizesWidth=g;g+="px";a.setAttribute("sizes",g);if(G.test(b.nodeName||"")){b=b.getElementsByTagName("source");var r=0;for(d=b.length;r<d;r++)b[r].setAttribute("sizes",g)}c.detail.dataAttr||oa(a,c.detail)}),r=function(a,b,g){var d=a.parentNode;d&&(g=aa(a,d,g),b=Y(a,"lazybeforesizes",{width:g,dataAttr:!!b}),b.defaultPrevented||(g=b.detail.width)&&g!==
a._lazysizesWidth&&c(a,d,b,g))},f=P(function(){var b,c=a.length;if(c)for(b=0;b<c;b++)r(a[b])});return{_:function(){a=b.getElementsByClassName(d.autosizesClass);g("resize",f)},checkElems:f,updateElem:r}}(),Aa=function(){!Aa.i&&b.getElementsByClassName&&(Aa.i=!0,T._(),da._())};return r(function(){d.init&&Aa()}),c={cfg:d,autoSizer:T,loader:da,init:Aa,uP:oa,aC:ha,rC:L,hC:H,fire:Y,gW:aa,rAF:J}}(a,a.document,Date);a.lazySizes=b;"object"==typeof module&&module.exports&&(module.exports=b)}("undefined"!=typeof window?
window:{});
!function(a,b){var c=function(){b(a.lazySizes);a.removeEventListener("lazyunveilread",c,!0)};b=b.bind(null,a,a.document);"object"==typeof module&&module.exports?b(require("lazysizes")):"function"==typeof define&&define.amd?define(["lazysizes"],b):a.lazySizes?c():a.addEventListener("lazyunveilread",c,!0)}(window,function(a,b,c){function d(){function d(){setTimeout(function(){a.removeEventListener("scroll",v._aLSL,!0)},1E3)}var v,h,G;p||(p=!0,f&&m&&t.nativeLoading.disableListeners&&(!0===t.nativeLoading.disableListeners&&
(t.nativeLoading.setLoadingAttribute=!0),v=c.loader,h=v.checkElems,(G="object"==typeof t.nativeLoading.disableListeners?t.nativeLoading.disableListeners:g).scroll&&(a.addEventListener("load",d),d(),a.removeEventListener("scroll",h,!0)),G.resize&&a.removeEventListener("resize",h,!0),Object.keys(G).forEach(function(a){G[a]&&b.removeEventListener(a,h,!0)})),t.nativeLoading.setLoadingAttribute&&a.addEventListener("lazybeforeunveil",function(a){a=a.target;"loading"in a&&!a.getAttribute("loading")&&a.setAttribute("loading",
"lazy")},!0))}var f="loading"in HTMLImageElement.prototype,m="loading"in HTMLIFrameElement.prototype,p=!1,h=c.prematureUnveil,t=c.cfg,g={focus:1,mouseover:1,click:1,load:1,transitionend:1,animationend:1,scroll:1,resize:1};t.nativeLoading||(t.nativeLoading={});a.addEventListener&&a.MutationObserver&&(f||m)&&(c.prematureUnveil=function(a){return p||d(),!(!("loading"in a&&(t.nativeLoading.setLoadingAttribute||a.getAttribute("loading")))||"auto"==a.getAttribute("data-sizes")&&!a.offsetWidth)||(h?h(a):
void 0)})});
!function(a,b){var c=function(){b(a.lazySizes);a.removeEventListener("lazyunveilread",c,!0)};b=b.bind(null,a,a.document);"object"==typeof module&&module.exports?b(require("lazysizes")):"function"==typeof define&&define.amd?define(["lazysizes"],b):a.lazySizes?c():a.addEventListener("lazyunveilread",c,!0)}(window,function(a,b,c){function d(a,c,g){var d,f;p[a]||(d=b.createElement(c?"link":"script"),f=b.getElementsByTagName("script")[0],c?(d.rel="stylesheet",d.href=a):(d.onload=function(){d.onerror=null;
d.onload=null;g()},d.onerror=d.onload,d.src=a),p[a]=!0,p[d.src||d.href]=!0,f.parentNode.insertBefore(d,f))}var f,m,p={};b.addEventListener&&(f=function(a,c){var g=b.createElement("img");g.onload=function(){g.onload=null;g=g.onerror=null;c()};g.onerror=g.onload;g.src=a;g&&g.complete&&g.onload&&g.onload()},addEventListener("lazybeforeunveil",function(a){var b,g,r;if(a.detail.instance==c&&!a.defaultPrevented){var v=a.target;if("none"==v.preload&&(v.preload=v.getAttribute("data-preload")||"auto"),null!=
v.getAttribute("data-autoplay"))if(v.getAttribute("data-expand")&&!v.autoplay)try{v.play()}catch(A){}else requestAnimationFrame(function(){v.setAttribute("data-expand","-10");c.aC(v,c.cfg.lazyClass)});(b=v.getAttribute("data-link"))&&d(b,!0);(b=v.getAttribute("data-script"))&&(a.detail.firesLoad=!0,d(b,null,function(){a.detail.firesLoad=!1;c.fire(v,"_lazyloaded",{},!0,!0)}));(b=v.getAttribute("data-require"))&&(c.cfg.requireJs?c.cfg.requireJs([b]):d(b));(g=v.getAttribute("data-bg"))&&(a.detail.firesLoad=
!0,f(g,function(){v.style.backgroundImage="url("+(m.test(g)?JSON.stringify(g):g)+")";a.detail.firesLoad=!1;c.fire(v,"_lazyloaded",{},!0,!0)}));(r=v.getAttribute("data-poster"))&&(a.detail.firesLoad=!0,f(r,function(){v.poster=r;a.detail.firesLoad=!1;c.fire(v,"_lazyloaded",{},!0,!0)}))}},!(m=/\(|\)|\s|'/)))});var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,f=0;f<d;f++){var m=a[f];if(b.call(c,m,f,a))return{i:f,v:m}}return{i:-1,v:void 0}}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
(function(a,b,c){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(b||c)})(function(a){var b=function(b,c,d){var f={invalid:[],getCaret:function(){try{var a=0,c=b.get(0),g=document.selection,d=c.selectionStart;if(g&&-1===navigator.appVersion.indexOf("MSIE 10")){var r=g.createRange();r.moveStart("character",-f.val().length);a=r.text.length}else if(d||"0"===d)a=d;return a}catch(H){}},setCaret:function(a){try{if(b.is(":focus")){var c,
g=b.get(0);g.setSelectionRange?g.setSelectionRange(a,a):(c=g.createTextRange(),c.collapse(!0),c.moveEnd("character",a),c.moveStart("character",a),c.select())}}catch(I){}},events:function(){b.on("keydown.mask",function(a){b.data("mask-keycode",a.keyCode||a.which);b.data("mask-previus-value",b.val());b.data("mask-previus-caret-pos",f.getCaret());f.maskDigitPosMapOld=f.maskDigitPosMap}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",f.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},
100)}).on("change.mask",function(){b.data("changed",!0)}).on("blur.mask",function(){r===f.val()||b.data("changed")||b.trigger("change");b.data("changed",!1)}).on("blur.mask",function(){r=f.val()}).on("focus.mask",function(b){!0===d.selectOnFocus&&a(b.target).select()}).on("focusout.mask",function(){d.clearIfNotMatch&&!v.test(f.val())&&f.val("")})},getRegexMask:function(){for(var a=[],b,d,r,f,v=0;v<c.length;v++)(b=g.translation[c.charAt(v)])?(d=b.pattern.toString().replace(/.{1}$|^.{1}/g,""),r=b.optional,
(b=b.recursive)?(a.push(c.charAt(v)),f={digit:c.charAt(v),pattern:d}):a.push(r||b?d+"?":d)):a.push(c.charAt(v).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"));a=a.join("");f&&(a=a.replace(new RegExp("("+f.digit+"(.*"+f.digit+")?)"),"($1)?").replace(new RegExp(f.digit,"g"),f.pattern));return new RegExp(a)},destroyEvents:function(){b.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(a){var c=b.is("input")?"val":"text";if(0<arguments.length){if(b[c]()!==a)b[c](a);
c=b}else c=b[c]();return c},calculateCaretPosition:function(){var a=b.data("mask-previus-value")||"",c=f.getMasked(),g=f.getCaret();if(a!==c){var d=b.data("mask-previus-caret-pos")||0;c=c.length;var r=a.length,v=a=0,h=0,m=0,p;for(p=g;p<c&&f.maskDigitPosMap[p];p++)v++;for(p=g-1;0<=p&&f.maskDigitPosMap[p];p--)a++;for(p=g-1;0<=p;p--)f.maskDigitPosMap[p]&&h++;for(p=d-1;0<=p;p--)f.maskDigitPosMapOld[p]&&m++;g>r?g=c:d>=g&&d!==r?f.maskDigitPosMapOld[g]||(d=g,g=g-(m-h)-a,f.maskDigitPosMap[g]&&(g=d)):g>d&&
(g=g+(h-m)+v)}return g},behaviour:function(c){c=c||window.event;f.invalid=[];var d=b.data("mask-keycode");if(-1===a.inArray(d,g.byPassKeys)){d=f.getMasked();var r=f.getCaret();setTimeout(function(){f.setCaret(f.calculateCaretPosition())},10);f.val(d);f.setCaret(r);return f.callbacks(c)}},getMasked:function(a,b){var r=[];b=void 0===b?f.val():b+"";var v=0,h=c.length,A=0,m=b.length,p=1,G="push",t=-1,oa=0,aa=[],J,ka;d.reverse?(G="unshift",p=-1,J=0,v=h-1,A=m-1,ka=function(){return-1<v&&-1<A}):(J=h-1,ka=
function(){return v<h&&A<m});for(var W;ka();){var P=c.charAt(v),da=b.charAt(A),T=g.translation[P];if(T)da.match(T.pattern)?(r[G](da),T.recursive&&(-1===t?t=v:v===J&&(v=t-p),J===t&&(v-=p)),v+=p):da===W?(oa--,W=void 0):T.optional?(v+=p,A-=p):T.fallback?(r[G](T.fallback),v+=p,A-=p):f.invalid.push({p:A,v:da,e:T.pattern}),A+=p;else{if(!a)r[G](P);da===P?(aa.push(A),A+=p):(W=P,aa.push(A+oa),oa++);v+=p}}b=c.charAt(J);h!==m+1||g.translation[b]||r.push(b);r=r.join("");f.mapMaskdigitPositions(r,aa,m);return r},
mapMaskdigitPositions:function(a,b,c){a=d.reverse?a.length-c:0;f.maskDigitPosMap={};for(c=0;c<b.length;c++)f.maskDigitPosMap[b[c]+a]=1},callbacks:function(a){var g=f.val(),v=g!==r,h=[g,a,b,d],A=function(a,b,c){"function"===typeof d[a]&&b&&d[a].apply(this,c)};A("onChange",!0===v,h);A("onKeyPress",!0===v,h);A("onComplete",g.length===c.length,h);A("onInvalid",0<f.invalid.length,[g,a,b,f.invalid,d])}};b=a(b);var g=this,r=f.val(),v;c="function"===typeof c?c(f.val(),void 0,b,d):c;g.mask=c;g.options=d;g.remove=
function(){var a=f.getCaret();f.destroyEvents();f.val(g.getCleanVal());f.setCaret(a);return b};g.getCleanVal=function(){return f.getMasked(!0)};g.getMaskedVal=function(a){return f.getMasked(!1,a)};g.init=function(r){r=r||!1;d=d||{};g.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch;g.byPassKeys=a.jMaskGlobals.byPassKeys;g.translation=a.extend({},a.jMaskGlobals.translation,d.translation);g=a.extend(!0,{},g,d);v=f.getRegexMask();if(r)f.events(),f.val(f.getMasked());else{d.placeholder&&b.attr("placeholder",
d.placeholder);b.data("mask")&&b.attr("autocomplete","off");r=0;for(var h=!0;r<c.length;r++){var m=g.translation[c.charAt(r)];if(m&&m.recursive){h=!1;break}}h&&b.attr("maxlength",c.length);f.destroyEvents();f.events();r=f.getCaret();f.val(f.getMasked());f.setCaret(r)}};g.init(!b.is("input"))};a.maskWatchers={};var c=function(){var c=a(this),f={},h=c.attr("data-mask");c.attr("data-mask-reverse")&&(f.reverse=!0);c.attr("data-mask-clearifnotmatch")&&(f.clearIfNotMatch=!0);"true"===c.attr("data-mask-selectonfocus")&&
(f.selectOnFocus=!0);if(d(c,h,f))return c.data("mask",new b(this,h,f))},d=function(b,c,d){d=d||{};var f=a(b).data("mask"),g=JSON.stringify;b=a(b).val()||a(b).text();try{return"function"===typeof c&&(c=c(b)),"object"!==typeof f||g(f.options)!==g(d)||f.mask!==c}catch(r){}},f=function(a){var b=document.createElement("div"),c;a="on"+a;(c=a in b)||(b.setAttribute(a,"return;"),c="function"===typeof b[a]);return c};a.fn.mask=function(c,f){f=f||{};var h=this.selector,m=a.jMaskGlobals,g=m.watchInterval;m=
f.watchInputs||m.watchInputs;var r=function(){if(d(this,c,f))return a(this).data("mask",new b(this,c,f))};a(this).each(r);h&&""!==h&&m&&(clearInterval(a.maskWatchers[h]),a.maskWatchers[h]=setInterval(function(){a(document).find(h).each(r)},g));return this};a.fn.masked=function(a){return this.data("mask").getMaskedVal(a)};a.fn.unmask=function(){clearInterval(a.maskWatchers[this.selector]);delete a.maskWatchers[this.selector];return this.each(function(){var b=a(this).data("mask");b&&b.remove().removeData("mask")})};
a.fn.cleanVal=function(){return this.data("mask").getCleanVal()};a.applyDataMask=function(b){b=b||a.jMaskGlobals.maskElements;(b instanceof a?b:a(b)).filter(a.jMaskGlobals.dataMaskAttr).each(c)};f={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&f("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},
"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};a.jMaskGlobals=a.jMaskGlobals||{};f=a.jMaskGlobals=a.extend(!0,{},f,a.jMaskGlobals);f.dataMask&&a.applyDataMask();setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},f.watchInterval)},window.jQuery,window.Zepto);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(a){for(var b;a.length&&a[0]!==document;){b=a.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b)return b;a=a.parent()}return 0}function c(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass=
"ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,
navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,
this.regional[""]);this.regional.en=a.extend(!0,{},this.regional[""]);this.regional["en-US"]=a.extend(!0,{},this.regional.en);this.dpDiv=d(a("\x3cdiv id\x3d'"+this._mainDivId+"' class\x3d'ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e"))}function d(b){return b.on("mouseout","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",function(){a(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&
a(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).on("mouseover","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",f)}function f(){a.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&
a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function m(b,c){a.extend(b,c);for(var g in c)null==c[g]&&(b[g]=c[g]);return b}a.ui=a.ui||{};a.ui.version="1.12.1";var p=0,h=Array.prototype.slice;a.cleanData=function(b){return function(c){var g,d,r;for(r=0;null!=(d=c[r]);r++)try{(g=a._data(d,"events"))&&g.remove&&a(d).triggerHandler("remove")}catch(X){}b(c)}}(a.cleanData);a.widget=function(b,c,d){var g={},
r=b.split(".")[0];b=b.split(".")[1];var f=r+"-"+b;d||(d=c,c=a.Widget);a.isArray(d)&&(d=a.extend.apply(null,[{}].concat(d)));a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)};a[r]=a[r]||{};var v=a[r][b];var h=a[r][b]=function(a,b){if(!this._createWidget)return new h(a,b);arguments.length&&this._createWidget(a,b)};a.extend(h,v,{version:d.version,_proto:a.extend({},d),_childConstructors:[]});var p=new c;p.options=a.widget.extend({},p.options);a.each(d,function(b,d){a.isFunction(d)?g[b]=function(){function a(){return c.prototype[b].apply(this,
arguments)}function g(a){return c.prototype[b].apply(this,a)}return function(){var b=this._super,c=this._superApply;this._super=a;this._superApply=g;var r=d.apply(this,arguments);this._super=b;this._superApply=c;return r}}():g[b]=d});h.prototype=a.widget.extend(p,{widgetEventPrefix:v?p.widgetEventPrefix||b:b},g,{constructor:h,namespace:r,widgetName:b,widgetFullName:f});v?(a.each(v._childConstructors,function(b,c){b=c.prototype;a.widget(b.namespace+"."+b.widgetName,h,c._proto)}),delete v._childConstructors):
c._childConstructors.push(h);a.widget.bridge(b,h);return h};a.widget.extend=function(b){for(var c=h.call(arguments,1),g=0,d=c.length,f,p;g<d;g++)for(f in c[g])p=c[g][f],c[g].hasOwnProperty(f)&&void 0!==p&&(a.isPlainObject(p)?b[f]=a.isPlainObject(b[f])?a.widget.extend({},b[f],p):a.widget.extend({},p):b[f]=p);return b};a.widget.bridge=function(b,c){var g=c.prototype.widgetFullName||b;a.fn[b]=function(d){var r="string"===typeof d,f=h.call(arguments,1),v=this;r?this.length||"instance"!==d?this.each(function(){var c=
a.data(this,g);if("instance"===d)return v=c,!1;if(!c)return a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+d+"'");if(!a.isFunction(c[d])||"_"===d.charAt(0))return a.error("no such method '"+d+"' for "+b+" widget instance");var r=c[d].apply(c,f);if(r!==c&&void 0!==r)return v=r&&r.jquery?v.pushStack(r.get()):r,!1}):v=void 0:(f.length&&(d=a.widget.extend.apply(null,[d].concat(f))),this.each(function(){var b=a.data(this,g);b?(b.option(d||{}),b._init&&b._init()):
a.data(this,g,new c(d,this))}));return v}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"\x3cdiv\x3e",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=p++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();this.classesElementLookup={};c!==this&&(a.data(c,this.widgetFullName,
this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,
_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy();a.each(this.classesElementLookup,function(a,c){b._removeClass(c,a)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var g=b,d;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b){g={};var r=
b.split(".");b=r.shift();if(r.length){var f=g[b]=a.widget.extend({},this.options[b]);for(d=0;d<r.length-1;d++)f[r[d]]=f[r[d]]||{},f=f[r[d]];b=r.pop();if(1===arguments.length)return void 0===f[b]?null:f[b];f[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}}this._setOptions(g);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){"classes"===a&&this._setOptionClasses(b);this.options[a]=b;"disabled"===
a&&this._setOptionDisabled(b);return this},_setOptionClasses:function(b){var c;for(c in b){var g=this.classesElementLookup[c];if(b[c]!==this.options.classes[c]&&g&&g.length){var d=a(g.get());this._removeClass(g,c);d.addClass(this._classes({element:d,keys:c,classes:b,add:!0}))}}},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a);a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},
enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function c(c,r){var f;for(f=0;f<c.length;f++){var v=d.classesElementLookup[c[f]]||a();v=b.add?a(a.unique(v.get().concat(b.element.get()))):a(v.not(b.element).get());d.classesElementLookup[c[f]]=v;g.push(c[f]);r&&b.classes[c[f]]&&g.push(b.classes[c[f]])}}var g=[],d=this;b=a.extend({element:this.element,classes:this.options.classes||{}},b);this._on(b.element,{remove:"_untrackClassesElement"});
b.keys&&c(b.keys.match(/\S+/g)||[],!0);b.extra&&c(b.extra.match(/\S+/g)||[]);return g.join(" ")},_untrackClassesElement:function(b){var c=this;a.each(c.classesElementLookup,function(g,d){-1!==a.inArray(b.target,d)&&(c.classesElementLookup[g]=a(d.not(b.target).get()))})},_removeClass:function(a,b,c){return this._toggleClass(a,b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,b,c,d){d="boolean"===typeof d?d:c;var g="string"===typeof a||null===a;a={extra:g?
b:c,keys:g?a:b,element:g?this.element:a,add:d};a.element.toggleClass(this._classes(a),d);return this},_on:function(b,c,d){var g,r=this;"boolean"!==typeof b&&(d=c,c=b,b=!1);d?(c=g=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,g=this.widget());a.each(d,function(d,f){function v(){if(b||!0!==r.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof f?r[f]:f).apply(r,arguments)}"string"!==typeof f&&(v.guid=f.guid=f.guid||v.guid||a.guid++);var h=d.match(/^([\w:-]*)\s*(.*)$/);
d=h[1]+r.eventNamespace;if(h=h[2])g.on(d,h,v);else c.on(d,v)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.off(c).off(c);this.bindings=a(this.bindings.not(b).get());this.focusable=a(this.focusable.not(b).get());this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,
{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,c,d){var g,r=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?
b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(g in b)g in c||(c[g]=b[g]);this.element.trigger(c,d);return!(a.isFunction(r)&&!1===r.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(g,d,r){"string"===typeof d&&(d={effect:d});var f=d?!0===d||"number"===typeof d?c:d.effect||c:b;d=d||{};"number"===typeof d&&(d={duration:d});var v=!a.isEmptyObject(d);d.complete=
r;d.delay&&g.delay(d.delay);if(v&&a.effects&&a.effects.effect[f])g[b](d);else if(f!==b&&g[f])g[f](d.duration,d.easing,r);else g.queue(function(c){a(this)[b]();r&&r.call(g[0]);c()})}});a.ui.focusable=function(b,c){var g=b.nodeName.toLowerCase();if("area"===g){c=b.parentNode;g=c.name;if(!b.href||!g||"map"!==c.nodeName.toLowerCase())return!1;b=a("img[usemap\x3d'#"+g+"']");return 0<b.length&&b.is(":visible")}/^(input|select|textarea|button|object)$/.test(g)?(c=!b.disabled)&&(g=a(b).closest("fieldset")[0])&&
(c=!g.disabled):c="a"===g?b.href||c:c;if(c=c&&a(b).is(":visible")){b=a(b);for(c=b.css("visibility");"inherit"===c;)b=b.parent(),c=b.css("visibility");c="hidden"!==c}return c};a.extend(a.expr[":"],{focusable:function(b){return a.ui.focusable(b,null!=a.attr(b,"tabindex"))}});a.extend(a.expr[":"],{tabbable:function(b){var c=a.attr(b,"tabindex"),g=null!=c;return(!g||0<=c)&&a.ui.focusable(b,g)}});(function(){function b(a,b,c){return[parseFloat(a[0])*(ha.test(a[0])?b/100:1),parseFloat(a[1])*(ha.test(a[1])?
c/100:1)]}function c(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}var d,f=Math.max,h=Math.abs,p=/left|center|right/,m=/top|center|bottom/,t=/[\+\-]\d+(\.[\d]+)?%?/,H=/^\w+/,ha=/%$/,L=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==
d)return d;var b=a("\x3cdiv style\x3d'display:block;position:absolute;width:50px;height:50px;overflow:hidden;'\x3e\x3cdiv style\x3d'height:100px;width:auto;'\x3e\x3c/div\x3e\x3c/div\x3e");var c=b.children()[0];a("body").append(b);var g=c.offsetWidth;b.css("overflow","scroll");c=c.offsetWidth;g===c&&(c=b[0].clientWidth);b.remove();return d=g-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),g=b.isWindow||b.isDocument?"":b.element.css("overflow-y");c="scroll"===
c||"auto"===c&&b.width<b.element[0].scrollWidth;return{width:"scroll"===g||"auto"===g&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:c?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),g=a.isWindow(c[0]),d=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:g,isDocument:d,offset:g||d?{left:0,top:0}:a(b).offset(),scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:c.outerWidth(),height:c.outerHeight()}}};a.fn.position=function(g){if(!g||!g.of)return L.apply(this,
arguments);g=a.extend({},g);var d=a(g.of),r=a.position.getWithinInfo(g.within),v=a.position.getScrollInfo(r),A=(g.collision||"flip").split(" "),G={};var X=c(d);d[0].preventDefault&&(g.at="left top");var ha=X.width;var I=X.height;var E=X.offset;var O=a.extend({},E);a.each(["my","at"],function(){var a=(g[this]||"").split(" ");1===a.length&&(a=p.test(a[0])?a.concat(["center"]):m.test(a[0])?["center"].concat(a):["center","center"]);a[0]=p.test(a[0])?a[0]:"center";a[1]=m.test(a[1])?a[1]:"center";var b=
t.exec(a[0]);var c=t.exec(a[1]);G[this]=[b?b[0]:0,c?c[0]:0];g[this]=[H.exec(a[0])[0],H.exec(a[1])[0]]});1===A.length&&(A[1]=A[0]);"right"===g.at[0]?O.left+=ha:"center"===g.at[0]&&(O.left+=ha/2);"bottom"===g.at[1]?O.top+=I:"center"===g.at[1]&&(O.top+=I/2);var Za=b(G.at,ha,I);O.left+=Za[0];O.top+=Za[1];return this.each(function(){var c,p=a(this),m=p.outerWidth(),t=p.outerHeight(),H=parseInt(a.css(this,"marginLeft"),10)||0,X=parseInt(a.css(this,"marginTop"),10)||0,L=m+H+(parseInt(a.css(this,"marginRight"),
10)||0)+v.width,Y=t+X+(parseInt(a.css(this,"marginBottom"),10)||0)+v.height,T=a.extend({},O),ka=b(G.my,p.outerWidth(),p.outerHeight());"right"===g.my[0]?T.left-=m:"center"===g.my[0]&&(T.left-=m/2);"bottom"===g.my[1]?T.top-=t:"center"===g.my[1]&&(T.top-=t/2);T.left+=ka[0];T.top+=ka[1];var da={marginLeft:H,marginTop:X};a.each(["left","top"],function(b,c){if(a.ui.position[A[b]])a.ui.position[A[b]][c](T,{targetWidth:ha,targetHeight:I,elemWidth:m,elemHeight:t,collisionPosition:da,collisionWidth:L,collisionHeight:Y,
offset:[Za[0]+ka[0],Za[1]+ka[1]],my:g.my,at:g.at,within:r,elem:p})});g.using&&(c=function(a){var b=E.left-T.left,c=b+ha-m,r=E.top-T.top,v=r+I-t,A={target:{element:d,left:E.left,top:E.top,width:ha,height:I},element:{element:p,left:T.left,top:T.top,width:m,height:t},horizontal:0>c?"left":0<b?"right":"center",vertical:0>v?"top":0<r?"bottom":"middle"};ha<m&&h(b+c)<ha&&(A.horizontal="center");I<t&&h(r+v)<I&&(A.vertical="middle");f(h(b),h(c))>f(h(r),h(v))?A.important="horizontal":A.important="vertical";
g.using.call(this,a,A)});p.offset(a.extend(T,{using:c}))})};a.ui.position={fit:{left:function(a,b){var c=b.within,g=c.isWindow?c.scrollLeft:c.offset.left,d=c.width,r=a.left-b.collisionPosition.marginLeft;c=g-r;var v=r+b.collisionWidth-d-g;b.collisionWidth>d?0<c&&0>=v?(b=a.left+c+b.collisionWidth-d-g,a.left+=c-b):a.left=0<v&&0>=c?g:c>v?g+d-b.collisionWidth:g:a.left=0<c?a.left+c:0<v?a.left-v:f(a.left-r,a.left)},top:function(a,b){var c=b.within,g=c.isWindow?c.scrollTop:c.offset.top,d=b.within.height,
r=a.top-b.collisionPosition.marginTop;c=g-r;var v=r+b.collisionHeight-d-g;b.collisionHeight>d?0<c&&0>=v?(b=a.top+c+b.collisionHeight-d-g,a.top+=c-b):a.top=0<v&&0>=c?g:c>v?g+d-b.collisionHeight:g:a.top=0<c?a.top+c:0<v?a.top-v:f(a.top-r,a.top)}},flip:{left:function(a,b){var c=b.within,g=c.offset.left+c.scrollLeft,d=c.width,r=c.isWindow?c.scrollLeft:c.offset.left,f=a.left-b.collisionPosition.marginLeft;c=f-r;var v=f+b.collisionWidth-d-r;f="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0;
var p="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];if(0>c){if(b=a.left+f+p+m+b.collisionWidth-d-g,0>b||b<h(c))a.left+=f+p+m}else 0<v&&(b=a.left-b.collisionPosition.marginLeft+f+p+m-r,0<b||h(b)<v)&&(a.left+=f+p+m)},top:function(a,b){var c=b.within,g=c.offset.top+c.scrollTop,d=c.height,r=c.isWindow?c.scrollTop:c.offset.top,f=a.top-b.collisionPosition.marginTop;c=f-r;var v=f+b.collisionHeight-d-r;f="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0;
var p="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,m=-2*b.offset[1];if(0>c){if(b=a.top+f+p+m+b.collisionHeight-d-g,0>b||b<h(c))a.top+=f+p+m}else 0<v&&(b=a.top-b.collisionPosition.marginTop+f+p+m-r,0<b||h(b)<v)&&(a.top+=f+p+m)}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}}})();a.ui.keyCode={BACKSPACE:8,
COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};a.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.ui.safeActiveElement=function(a){try{var b=a.activeElement}catch(v){b=a.body}b||(b=a.body);b.nodeName||(b=a.body);return b};
a.widget("ui.menu",{version:"1.12.1",defaultElement:"\x3cul\x3e",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"\x3e *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=
a(b.target),g=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&g.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.target).closest(".ui-menu-item"),
g=a(b.currentTarget);c[0]===g[0]&&(this._removeClass(g.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,g))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],a.ui.safeActiveElement(this.document[0]))||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&
this.collapseAll(a);this.mouseHandled=!1}})},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();b.children().each(function(){var b=a(this);b.data("ui-menu-submenu-caret")&&b.remove()})},
_keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:c=!1;var g=this.previousFilter||"";var d=!1;var f=96<=b.keyCode&&105>=b.keyCode?(b.keyCode-96).toString():String.fromCharCode(b.keyCode);clearTimeout(this.filterTimer);f===g?d=!0:f=g+f;g=this._filterMenuItems(f);g=d&&-1!==g.index(this.active.next())?this.active.nextAll(".ui-menu-item"):g;g.length||(f=String.fromCharCode(b.keyCode),g=this._filterMenuItems(f));g.length?(this.focus(b,g),this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},
1E3)):delete this.previousFilter}c&&b.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup\x3d'true']").length?this.expand(a):this.select(a))},refresh:function(){var b=this,c=this.options.icons.submenu;var d=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);var f=d.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var g=
a(this),d=g.prev(),f=a("\x3cspan\x3e").data("ui-menu-submenu-caret",!0);b._addClass(f,"ui-menu-icon","ui-icon "+c);d.attr("aria-haspopup","true").prepend(f);g.attr("aria-labelledby",d.attr("id"))});this._addClass(f,"ui-menu","ui-widget ui-widget-content ui-front");f=d.add(this.element).find(this.options.items);f.not(".ui-menu-item").each(function(){var c=a(this);b._isDivider(c)&&b._addClass(c,"ui-menu-divider","ui-widget-content")});d=f.not(".ui-menu-item, .ui-menu-divider");var h=d.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,
role:this._itemRole()});this._addClass(d,"ui-menu-item")._addClass(h,"ui-menu-item-wrapper");f.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){if("icons"===a){var c=this.element.find(".ui-menu-icon");this._removeClass(c,null,this.options.icons.submenu)._addClass(c,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a);
this.element.attr("aria-disabled",String(a));this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();var c=this.active.children(".ui-menu-item-wrapper");this._addClass(c,null,"ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));c=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(c,null,"ui-state-active");a&&"keydown"===a.type?
this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){if(this._hasScroll()){var c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;var g=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;c=b.offset().top-this.activeMenu.offset().top-c-g;g=this.activeMenu.scrollTop();var d=this.activeMenu.height();
b=b.outerHeight();0>c?this.activeMenu.scrollTop(g+c):c+b>d&&this.activeMenu.scrollTop(g+c-d+b)}},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},
this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var g=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));g.length||(g=this.element);this._close(g);this.blur(b);this._removeClass(g.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=
g},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&
this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var g;this.active&&(g="first"===a||"last"===a?this.active["first"===
a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));g&&g.length&&this.active||(g=this.activeMenu.find(this.options.items)[b]());this.focus(c,g)},nextPage:function(b){var c;if(!this.active)this.next(b);else if(!this.isLastItem())if(this._hasScroll()){var g=this.active.offset().top;var d=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-g-d});this.focus(b,c)}else this.focus(b,this.activeMenu.find(this.options.items)[this.active?
"last":"first"]())},previousPage:function(b){var c;if(!this.active)this.next(b);else if(!this.isFirstItem())if(this._hasScroll()){var g=this.active.offset().top;var d=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-g+d});this.focus(b,c)}else this.focus(b,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||
a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)},_filterMenuItems:function(b){b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26");var c=new RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return c.test(a.trim(a(this).children(".ui-menu-item-wrapper").text()))})}});a.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"\x3cinput\x3e",
options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,f=this.element[0].nodeName.toLowerCase(),h="textarea"===f;f="input"===f;this.isMultiLine=h||!f&&this._isContentEditable(this.element);this.valueMethod=this.element[h||f?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");
this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(g){if(this.element.prop("readOnly"))c=d=b=!0;else{c=d=b=!1;var f=a.ui.keyCode;switch(g.keyCode){case f.PAGE_UP:b=!0;this._move("previousPage",g);break;case f.PAGE_DOWN:b=!0;this._move("nextPage",g);break;case f.UP:b=!0;this._keyEvent("previous",g);break;case f.DOWN:b=!0;this._keyEvent("next",g);break;case f.ENTER:this.menu.active&&(b=!0,g.preventDefault(),this.menu.select(g));break;case f.TAB:this.menu.active&&this.menu.select(g);
break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(g),g.preventDefault());break;default:c=!0,this._searchTimeout(g)}}},keypress:function(g){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||g.preventDefault();else if(!c){var d=a.ui.keyCode;switch(g.keyCode){case d.PAGE_UP:this._move("previousPage",g);break;case d.PAGE_DOWN:this._move("nextPage",g);break;case d.UP:this._keyEvent("previous",g);break;case d.DOWN:this._keyEvent("next",
g)}}},input:function(a){d?(d=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("\x3cul\x3e").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();
this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var g=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:g})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&
this._value(g.value);(c=c.item.attr("aria-label")||g.value)&&a.trim(c).length&&(this.liveRegion.children().hide(),a("\x3cdiv\x3e").text(c).appendTo(this.liveRegion))},menuselect:function(b,c){var g=c.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=g}));!1!==this._trigger("select",b,{item:g})&&this._value(g.value);this.term=this._value();
this.close(b);this.selectedItem=g}});this.liveRegion=a("\x3cdiv\x3e",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var c=this.menu.element[0];return b.target===this.element[0]||b.target===c||a.contains(c,b.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||this.close()},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0));b&&b[0]||(b=this.element.closest(".ui-front, dialog"));
b.length||(b=this.document[0].body);return b},_initSource:function(){var b=this;if(a.isArray(this.options.source)){var c=this.options.source;this.source=function(b,g){g(a.ui.autocomplete.filter(c,b.term))}}else if("string"===typeof this.options.source){var d=this.options.source;this.source=function(c,g){b.xhr&&b.xhr.abort();b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a){g(a)},error:function(){g([])}})}}else this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);
this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),g=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;if(!b||b&&!c&&!g)this.selectedItem=null,this.search(null,a)},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=
!1;this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this._off(this.document,
"mousedown");this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,
b);this.isNewMenu=!0;this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var g=this;a.each(c,function(a,c){g._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",
b)},_renderItem:function(b,c){return a("\x3cli\x3e").append(a("\x3cdiv\x3e").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this.isMultiLine||this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()},_isContentEditable:function(a){if(!a.length)return!1;var b=a.prop("contentEditable");return"inherit"===b?this._isContentEditable(a.parent()):"true"===b}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",
a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults;this.liveRegion.children().hide();a("\x3cdiv\x3e").text(c).appendTo(this.liveRegion)}}});a.extend(a.ui,{datepicker:{version:"1.12.1"}});
var t;a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){m(this._defaults,a||{});return this},_attachDatepicker:function(b,c){var d=b.nodeName.toLowerCase();var g="div"===d||"span"===d;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var f=this._newInst(a(b),g);f.settings=a.extend({},c||{});"input"===d?this._connectDatepicker(b,f):g&&this._inlineDatepicker(b,f)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,
"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("\x3cdiv class\x3d'"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),
this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d=this._get(c,"appendText");var g=this._get(c,"isRTL");c.append&&c.append.remove();d&&(c.append=a("\x3cspan class\x3d'"+this._appendClass+"'\x3e"+d+"\x3c/span\x3e"),b[g?"before":"after"](c.append));b.off("focus",this._showDatepicker);c.trigger&&c.trigger.remove();d=this._get(c,"showOn");if("focus"===d||"both"===d)b.on("focus",this._showDatepicker);if("button"===d||"both"===d){d=
this._get(c,"buttonText");var f=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("\x3cimg/\x3e").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):a("\x3cbutton type\x3d'button'\x3e\x3c/button\x3e").addClass(this._triggerClass).html(f?a("\x3cimg/\x3e").attr({src:f,alt:d,title:d}):d));b[g?"before":"after"](c.trigger);c.trigger.on("click",function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():(a.datepicker._datepickerShowing&&
a.datepicker._lastInput!==b[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,g=new Date(2009,11,20),f=this._get(a,"dateFormat");if(f.match(/[DM]/)){var h=function(a){for(d=c=b=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};g.setMonth(h(this._get(a,f.match(/MM/)?"monthNames":"monthNamesShort")));g.setDate(h(this._get(a,f.match(/DD/)?"dayNames":"dayNamesShort"))+20-g.getDay())}a.input.attr("size",
this._formatDate(a,g).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){b=this._dialogInst;b||(this.uuid+=1,b="dp"+this.uuid,this._dialogInput=a("\x3cinput type\x3d'text' id\x3d'"+
b+"' style\x3d'position: absolute; top: -100px; width: 0px;'/\x3e"),this._dialogInput.on("keydown",this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));m(b.settings,f||{});c=c&&c.constructor===Date?this._formatDate(b,c):c;this._dialogInput.val(c);this._pos=h?h.length?h:[h.pageX,h.pageY]:null;if(!this._pos){c=document.documentElement.clientWidth;f=document.documentElement.clientHeight;
h=document.documentElement.scrollLeft||document.body.scrollLeft;var g=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[c/2-100+h,f/2-150+g]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=d;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),d=a.data(b,
"datepicker");if(c.hasClass(this.markerClassName)){var g=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"===g?(d.append.remove(),d.trigger.remove(),c.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==g&&"span"!==g||c.removeClass(this.markerClassName).empty();t===d&&(t=null)}},_enableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var g=
b.nodeName.toLowerCase();if("input"===g)b.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===g||"span"===g)g=c.children("."+this._inlineClass),g.children().removeClass("ui-state-disabled"),g.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a})}},_disableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");
if(c.hasClass(this.markerClassName)){var g=b.nodeName.toLowerCase();if("input"===g)b.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===g||"span"===g)g=c.children("."+this._inlineClass),g.children().addClass("ui-state-disabled"),g.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a});this._disabledInputs[this._disabledInputs.length]=
b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(r){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,d){var g=this._getInst(b);if(2===arguments.length&&"string"===typeof c)return"defaults"===c?a.extend({},a.datepicker._defaults):g?"all"===c?a.extend({},g.settings):this._get(g,c):null;var f=c||{};"string"===
typeof c&&(f={},f[c]=d);if(g){this._curInst===g&&this._hideDatepicker();var r=this._getDateDatepicker(b,!0);var h=this._getMinMaxDate(g,"min");var v=this._getMinMaxDate(g,"max");m(g.settings,f);null!==h&&void 0!==f.dateFormat&&void 0===f.minDate&&(g.settings.minDate=this._formatDate(g,h));null!==v&&void 0!==f.dateFormat&&void 0===f.maxDate&&(g.settings.maxDate=this._formatDate(g,v));"disabled"in f&&(f.disabled?this._disableDatepicker(b):this._enableDatepicker(b));this._attachments(a(b),g);this._autoSize(g);
this._setDate(g,r);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a))this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a)},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(b){var c=a.datepicker._getInst(b.target);
var d=!0;var g=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();d=!1;break;case 13:return d=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv),d[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,d[0]),(b=a.datepicker._get(c,"onSelect"))?(d=a.datepicker._formatDate(c),b.apply(c.input?c.input[0]:null,[d,c])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();
break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,
g?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,g?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,
"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c=a.datepicker._getInst(b.target);if(a.datepicker._get(c,"constrainInput")){c=a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat"));var d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode);return b.ctrlKey||
b.metaKey||" ">d||!c||-1<c.indexOf(d)}},_doKeyUp:function(b){var c;b=a.datepicker._getInst(b.target);if(b.input.val()!==b.lastVal)try{if(c=a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b)))a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b)}catch(v){}return!0},_showDatepicker:function(c){c=c.target||c;"input"!==c.nodeName.toLowerCase()&&(c=a("input",c.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(c)&&
a.datepicker._lastInput!==c){var d=a.datepicker._getInst(c);a.datepicker._curInst&&a.datepicker._curInst!==d&&(a.datepicker._curInst.dpDiv.stop(!0,!0),d&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var g=(g=a.datepicker._get(d,"beforeShow"))?g.apply(c,[c,d]):{};if(!1!==g){m(d.settings,g);d.lastVal=null;a.datepicker._lastInput=c;a.datepicker._setDateFromField(d);a.datepicker._inDialog&&(c.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(c),
a.datepicker._pos[1]+=c.offsetHeight);var f=!1;a(c).parents().each(function(){f|="fixed"===a(this).css("position");return!f});g={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;d.dpDiv.empty();d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(d);g=a.datepicker._checkOffset(d,g,f);d.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":"absolute",display:"none",left:g.left+"px",top:g.top+"px"});if(!d.inline){g=
a.datepicker._get(d,"showAnim");var h=a.datepicker._get(d,"duration");d.dpDiv.css("z-index",b(a(c))+1);a.datepicker._datepickerShowing=!0;if(a.effects&&a.effects.effect[g])d.dpDiv.show(g,a.datepicker._get(d,"showOptions"),h);else d.dpDiv[g||"show"](g?h:null);a.datepicker._shouldFocusInput(d)&&d.input.trigger("focus");a.datepicker._curInst=d}}}},_updateDatepicker:function(b){this.maxRows=4;t=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var c=this._getNumberOfMonths(b),d=
c[1],g=b.dpDiv.find("."+this._dayOverClass+" a");0<g.length&&f.apply(g.get(0));b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!==c[0]||1!==c[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.trigger("focus");
if(b.yearshtml){var h=b.yearshtml;setTimeout(function(){h===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);h=b.yearshtml=null},0)}},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var g=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),r=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,p=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),
m=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?g-r:0;c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0;c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+g>p&&p>g?Math.abs(c.left+g-p):0);c.top-=Math.min(c.top,c.top+f>m&&m>f?Math.abs(f+h):0);return c},_findPos:function(b){var c=this._getInst(b);for(c=this._get(c,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=
b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(c&&(!b||c===a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(c,"showAnim");var d=this._get(c,"duration");var g=function(){a.datepicker._tidyDialog(c)};if(a.effects&&(a.effects.effect[b]||a.effects[b]))c.dpDiv.hide(b,a.datepicker._get(c,"showOptions"),d,g);else c.dpDiv["slideDown"===b?"slideUp":"fadeIn"===b?"fadeOut":"hide"](b?d:null,g);b||g();this._datepickerShowing=
!1;(b=this._get(c,"onClose"))&&b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);var c=a.datepicker._getInst(b[0]);(!(b[0].id===a.datepicker._mainDivId||
0!==b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){b=a(b);var g=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(g,c+("M"===d?this._get(g,"showCurrentAtPos"):0),d),this._updateDatepicker(g))},
_gotoToday:function(b){var c=a(b),d=this._getInst(c[0]);this._get(d,"gotoCurrent")&&d.currentDay?(d.selectedDay=d.currentDay,d.drawMonth=d.selectedMonth=d.currentMonth,d.drawYear=d.selectedYear=d.currentYear):(b=new Date,d.selectedDay=b.getDate(),d.drawMonth=d.selectedMonth=b.getMonth(),d.drawYear=d.selectedYear=b.getFullYear());this._notifyChange(d);this._adjustDate(c)},_selectMonthYear:function(b,c,d){b=a(b);var g=this._getInst(b[0]);g["selected"+("M"===d?"Month":"Year")]=g["draw"+("M"===d?"Month":
"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(g);this._adjustDate(b)},_selectDay:function(b,c,d,f){var g=a(b);a(f).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(g=this._getInst(g[0]),g.selectedDay=g.currentDay=a("a",f).html(),g.selectedMonth=g.currentMonth=c,g.selectedYear=g.currentYear=d,this._selectDate(b,this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear)))},_clearDate:function(b){b=a(b);this._selectDate(b,"")},_selectDate:function(b,
c){b=a(b);var d=this._getInst(b[0]);c=null!=c?c:this._formatDate(d);d.input&&d.input.val(c);this._updateAlternate(d);(b=this._get(d,"onSelect"))?b.apply(d.input?d.input[0]:null,[c,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!==typeof d.input[0]&&d.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(b){var c=this._get(b,"altField");if(c){var d=this._get(b,"altFormat")||this._get(b,"dateFormat");
var g=this._getDate(b);b=this.formatDate(d,g,this._getFormatConfig(b));a(c).val(b)}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";c="object"===typeof c?c.toString():c+"";if(""===c)return null;var g,f=0;var r=(d?d.shortYearCutoff:null)||
this._defaults.shortYearCutoff;r="string"!==typeof r?r:(new Date).getFullYear()%100+parseInt(r,10);var h=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort;var p=(d?d.dayNames:null)||this._defaults.dayNames,m=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,v=(d?d.monthNames:null)||this._defaults.monthNames,t=d=-1,E=-1,Y=-1,oa=!1,aa=function(a){(a=g+1<b.length&&b.charAt(g+1)===a)&&g++;return a},J=function(a){var b=aa(a);b="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2;a=new RegExp("^\\d{"+
("y"===a?b:1)+","+b+"}");a=c.substring(f).match(a);if(!a)throw"Missing number at position "+f;f+=a[0].length;return parseInt(a[0],10)},ka=function(b,d,g){var r=-1;b=a.map(aa(b)?g:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});a.each(b,function(a,b){a=b[1];if(c.substr(f,a.length).toLowerCase()===a.toLowerCase())return r=b[0],f+=a.length,!1});if(-1!==r)return r+1;throw"Unknown name at position "+f;},W=function(){if(c.charAt(f)!==b.charAt(g))throw"Unexpected literal at position "+
f;f++};for(g=0;g<b.length;g++)if(oa)"'"!==b.charAt(g)||aa("'")?W():oa=!1;else switch(b.charAt(g)){case "d":E=J("d");break;case "D":ka("D",h,p);break;case "o":Y=J("o");break;case "m":t=J("m");break;case "M":t=ka("M",m,v);break;case "y":d=J("y");break;case "@":var P=new Date(J("@"));d=P.getFullYear();t=P.getMonth()+1;E=P.getDate();break;case "!":P=new Date((J("!")-this._ticksTo1970)/1E4);d=P.getFullYear();t=P.getMonth()+1;E=P.getDate();break;case "'":aa("'")?W():oa=!0;break;default:W()}if(f<c.length&&
(h=c.substr(f),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;-1===d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=r?0:-100));if(-1<Y){t=1;E=Y;do{r=this._getDaysInMonth(d,t-1);if(E<=r)break;t++;E-=r}while(1)}P=this._daylightSavingAdjust(new Date(d,t-1,E));if(P.getFullYear()!==d||P.getMonth()+1!==t||P.getDate()!==E)throw"Invalid date";return P},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",
RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:62135596800*1E7,formatDate:function(a,b,c){if(!b)return"";var d,g=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,r=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var h=function(b){(b=d+1<a.length&&a.charAt(d+1)===b)&&d++;return b},p=function(a,b,c){b=""+
b;if(h(a))for(;b.length<c;)b="0"+b;return b},m=function(a,b,c,d){return h(a)?d[b]:c[b]},v="",t=!1;if(b)for(d=0;d<a.length;d++)if(t)"'"!==a.charAt(d)||h("'")?v+=a.charAt(d):t=!1;else switch(a.charAt(d)){case "d":v+=p("d",b.getDate(),2);break;case "D":v+=m("D",b.getDay(),g,f);break;case "o":v+=p("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":v+=p("m",b.getMonth()+1,2);break;case "M":v+=m("M",b.getMonth(),
r,c);break;case "y":v+=h("y")?b.getFullYear():(10>b.getFullYear()%100?"0":"")+b.getFullYear()%100;break;case "@":v+=b.getTime();break;case "!":v+=1E4*b.getTime()+this._ticksTo1970;break;case "'":h("'")?v+="'":t=!0;break;default:v+=a.charAt(d)}return v},_possibleChars:function(a){var b,c="",d=!1,g=function(c){(c=b+1<a.length&&a.charAt(b+1)===c)&&b++;return c};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||g("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":c+="0123456789";
break;case "D":case "M":return null;case "'":g("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,g=this._getDefaultDate(a),f=g,h=this._getFormatConfig(a);try{f=this.parseDate(c,d,h)||g}catch(O){d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=
a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var g=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(E){}var d=
(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,g=d.getFullYear(),f=d.getMonth();d=d.getDate();for(var h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=h.exec(c);r;){switch(r[2]||"d"){case "d":case "D":d+=parseInt(r[1],10);break;case "w":case "W":d+=7*parseInt(r[1],10);break;case "m":case "M":f+=parseInt(r[1],10);d=Math.min(d,a.datepicker._getDaysInMonth(g,f));break;case "y":case "Y":g+=parseInt(r[1],10),d=Math.min(d,a.datepicker._getDaysInMonth(g,f))}r=h.exec(c)}return new Date(g,
f,d)};if(c=(c=null==c||""===c?d:"string"===typeof c?f(c):"number"===typeof c?isNaN(c)?d:g(c):new Date(c.getTime()))&&"Invalid Date"===c.toString()?d:c)c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,g=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=
a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();g===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,
"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).on(this.getAttribute("data-event"),{prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){a.datepicker._selectMonthYear(d,this,"M");return!1},selectYear:function(){a.datepicker._selectMonthYear(d,
this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,f,g=new Date;g=this._daylightSavingAdjust(new Date(g.getFullYear(),g.getMonth(),g.getDate()));var h=this._get(a,"isRTL");var p=this._get(a,"showButtonPanel");var m=this._get(a,"hideIfNoPrevNext");var t=this._get(a,"navigationAsDateFormat");var L=this._getNumberOfMonths(a),E=this._get(a,"showCurrentAtPos");var Y=this._get(a,"stepMonths");var oa=1!==L[0]||1!==L[1],aa=this._daylightSavingAdjust(a.currentDay?
new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(a,"min"),ka=this._getMinMaxDate(a,"max");E=a.drawMonth-E;var W=a.drawYear;0>E&&(E+=12,W--);if(ka){var P=this._daylightSavingAdjust(new Date(ka.getFullYear(),ka.getMonth()-L[0]*L[1]+1,ka.getDate()));for(P=J&&P<J?J:P;this._daylightSavingAdjust(new Date(W,E,1))>P;)E--,0>E&&(E=11,W--)}a.drawMonth=E;a.drawYear=W;P=this._get(a,"prevText");P=t?this.formatDate(P,this._daylightSavingAdjust(new Date(W,E-Y,1)),this._getFormatConfig(a)):
P;P=this._canAdjustMonth(a,-1,W,E)?"\x3ca class\x3d'ui-datepicker-prev ui-corner-all' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+P+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(h?"e":"w")+"'\x3e"+P+"\x3c/span\x3e\x3c/a\x3e":m?"":"\x3ca class\x3d'ui-datepicker-prev ui-corner-all ui-state-disabled' title\x3d'"+P+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(h?"e":"w")+"'\x3e"+P+"\x3c/span\x3e\x3c/a\x3e";var da=this._get(a,"nextText");da=t?this.formatDate(da,
this._daylightSavingAdjust(new Date(W,E+Y,1)),this._getFormatConfig(a)):da;m=this._canAdjustMonth(a,1,W,E)?"\x3ca class\x3d'ui-datepicker-next ui-corner-all' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+da+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(h?"w":"e")+"'\x3e"+da+"\x3c/span\x3e\x3c/a\x3e":m?"":"\x3ca class\x3d'ui-datepicker-next ui-corner-all ui-state-disabled' title\x3d'"+da+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(h?"w":"e")+"'\x3e"+da+"\x3c/span\x3e\x3c/a\x3e";
Y=this._get(a,"currentText");da=this._get(a,"gotoCurrent")&&a.currentDay?aa:g;Y=t?this.formatDate(Y,da,this._getFormatConfig(a)):Y;t=a.inline?"":"\x3cbutton type\x3d'button' class\x3d'ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler\x3d'hide' data-event\x3d'click'\x3e"+this._get(a,"closeText")+"\x3c/button\x3e";p=p?"\x3cdiv class\x3d'ui-datepicker-buttonpane ui-widget-content'\x3e"+(h?t:"")+(this._isInRange(a,da)?"\x3cbutton type\x3d'button' class\x3d'ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler\x3d'today' data-event\x3d'click'\x3e"+
Y+"\x3c/button\x3e":"")+(h?"":t)+"\x3c/div\x3e":"";t=parseInt(this._get(a,"firstDay"),10);t=isNaN(t)?0:t;Y=this._get(a,"showWeek");da=this._get(a,"dayNames");var T=this._get(a,"dayNamesMin");var Aa=this._get(a,"monthNames");var Za=this._get(a,"monthNamesShort");var rb=this._get(a,"beforeShowDay");var M=this._get(a,"showOtherMonths");var ab=this._get(a,"selectOtherMonths");var fb=this._getDefaultDate(a);var gb="";for(b=0;b<L[0];b++){var Bb="";this.maxRows=4;for(c=0;c<L[1];c++){var $a=this._daylightSavingAdjust(new Date(W,
E,a.selectedDay));var la=" ui-corner-all";var ia="";if(oa){ia+="\x3cdiv class\x3d'ui-datepicker-group";if(1<L[1])switch(c){case 0:ia+=" ui-datepicker-group-first";la=" ui-corner-"+(h?"right":"left");break;case L[1]-1:ia+=" ui-datepicker-group-last";la=" ui-corner-"+(h?"left":"right");break;default:ia+=" ui-datepicker-group-middle",la=""}ia+="'\x3e"}ia+="\x3cdiv class\x3d'ui-datepicker-header ui-widget-header ui-helper-clearfix"+la+"'\x3e"+(/all|left/.test(la)&&0===b?h?m:P:"")+(/all|right/.test(la)&&
0===b?h?P:m:"")+this._generateMonthYearHeader(a,E,W,J,ka,0<b||0<c,Aa,Za)+"\x3c/div\x3e\x3ctable class\x3d'ui-datepicker-calendar'\x3e\x3cthead\x3e\x3ctr\x3e";var ba=Y?"\x3cth class\x3d'ui-datepicker-week-col'\x3e"+this._get(a,"weekHeader")+"\x3c/th\x3e":"";for(la=0;7>la;la++){var Z=(la+t)%7;ba+="\x3cth scope\x3d'col'"+(5<=(la+t+6)%7?" class\x3d'ui-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+da[Z]+"'\x3e"+T[Z]+"\x3c/span\x3e\x3c/th\x3e"}ia+=ba+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e";ba=this._getDaysInMonth(W,
E);W===a.selectedYear&&E===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,ba));la=(this._getFirstDayOfMonth(W,E)-t+7)%7;ba=Math.ceil((la+ba)/7);this.maxRows=ba=oa?this.maxRows>ba?this.maxRows:ba:ba;Z=this._daylightSavingAdjust(new Date(W,E,1-la));for(d=0;d<ba;d++){ia+="\x3ctr\x3e";var Ua=Y?"\x3ctd class\x3d'ui-datepicker-week-col'\x3e"+this._get(a,"calculateWeek")(Z)+"\x3c/td\x3e":"";for(la=0;7>la;la++){var hb=rb?rb.apply(a.input?a.input[0]:null,[Z]):[!0,""];var ib=(f=Z.getMonth()!==E)&&!ab||
!hb[0]||J&&Z<J||ka&&Z>ka;Ua+="\x3ctd class\x3d'"+(5<=(la+t+6)%7?" ui-datepicker-week-end":"")+(f?" ui-datepicker-other-month":"")+(Z.getTime()===$a.getTime()&&E===a.selectedMonth&&a._keyEvent||fb.getTime()===Z.getTime()&&fb.getTime()===$a.getTime()?" "+this._dayOverClass:"")+(ib?" "+this._unselectableClass+" ui-state-disabled":"")+(f&&!M?"":" "+hb[1]+(Z.getTime()===aa.getTime()?" "+this._currentClass:"")+(Z.getTime()===g.getTime()?" ui-datepicker-today":""))+"'"+(f&&!M||!hb[2]?"":" title\x3d'"+hb[2].replace(/'/g,
"\x26#39;")+"'")+(ib?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+Z.getMonth()+"' data-year\x3d'"+Z.getFullYear()+"'")+"\x3e"+(f&&!M?"\x26#xa0;":ib?"\x3cspan class\x3d'ui-state-default'\x3e"+Z.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'ui-state-default"+(Z.getTime()===g.getTime()?" ui-state-highlight":"")+(Z.getTime()===aa.getTime()?" ui-state-active":"")+(f?" ui-priority-secondary":"")+"' href\x3d'#'\x3e"+Z.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";Z.setDate(Z.getDate()+1);
Z=this._daylightSavingAdjust(Z)}ia+=Ua+"\x3c/tr\x3e"}E++;11<E&&(E=0,W++);ia+="\x3c/tbody\x3e\x3c/table\x3e"+(oa?"\x3c/div\x3e"+(0<L[0]&&c===L[1]-1?"\x3cdiv class\x3d'ui-datepicker-row-break'\x3e\x3c/div\x3e":""):"");Bb+=ia}gb+=Bb}a._keyEvent=!1;return gb+p},_generateMonthYearHeader:function(a,b,c,d,f,h,p,m){var g,r=this._get(a,"changeMonth"),v=this._get(a,"changeYear"),t=this._get(a,"showMonthAfterYear"),A="\x3cdiv class\x3d'ui-datepicker-title'\x3e",G="";if(h||!r)G+="\x3cspan class\x3d'ui-datepicker-month'\x3e"+
p[b]+"\x3c/span\x3e";else{p=d&&d.getFullYear()===c;var X=f&&f.getFullYear()===c;G+="\x3cselect class\x3d'ui-datepicker-month' data-handler\x3d'selectMonth' data-event\x3d'change'\x3e";for(g=0;12>g;g++)(!p||g>=d.getMonth())&&(!X||g<=f.getMonth())&&(G+="\x3coption value\x3d'"+g+"'"+(g===b?" selected\x3d'selected'":"")+"\x3e"+m[g]+"\x3c/option\x3e");G+="\x3c/select\x3e"}t||(A+=G+(!h&&r&&v?"":"\x26#xa0;"));if(!a.yearshtml)if(a.yearshtml="",h||!v)A+="\x3cspan class\x3d'ui-datepicker-year'\x3e"+c+"\x3c/span\x3e";
else{m=this._get(a,"yearRange").split(":");var I=(new Date).getFullYear();p=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?I+parseInt(a,10):parseInt(a,10);return isNaN(a)?I:a};b=p(m[0]);m=Math.max(b,p(m[1]||""));b=d?Math.max(b,d.getFullYear()):b;m=f?Math.min(m,f.getFullYear()):m;for(a.yearshtml+="\x3cselect class\x3d'ui-datepicker-year' data-handler\x3d'selectYear' data-event\x3d'change'\x3e";b<=m;b++)a.yearshtml+="\x3coption value\x3d'"+b+"'"+(b===c?" selected\x3d'selected'":
"")+"\x3e"+b+"\x3c/option\x3e";a.yearshtml+="\x3c/select\x3e";A+=a.yearshtml;a.yearshtml=null}A+=this._get(a,"yearSuffix");t&&(A+=(!h&&r&&v?"":"\x26#xa0;")+G);return A+"\x3c/div\x3e"},_adjustInstDate:function(a,b,c){var d=a.selectedYear+("Y"===c?b:0),f=a.selectedMonth+("M"===c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"===c?b:0);d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=
d.getFullYear();"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"===typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,
b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),f=
null,g=null;if(a=this._get(a,"yearRange")){a=a.split(":");var h=(new Date).getFullYear();f=parseInt(a[0],10);g=parseInt(a[1],10);a[0].match(/[+\-].*/)&&(f+=h);a[1].match(/[+\-].*/)&&(g+=h)}return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())&&(!f||b.getFullYear()>=f)&&(!g||b.getFullYear()<=g)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b="string"!==typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),
dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"===typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;
a.datepicker.initialized||(a(document).on("mousedown",a.datepicker._checkExternalClick),a.datepicker.initialized=!0);0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"===typeof b&&("isDisabled"===b||"getDate"===b||"widget"===b)||"option"===b&&2===arguments.length&&"string"===typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"===typeof b?a.datepicker["_"+
b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new c;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.12.1";a.ui.escapeSelector=function(){var a=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,"\\$1")}}();a.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom",
"ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c=b.href.replace(a,"");var d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(G){}try{d=decodeURIComponent(d)}catch(G){}return 1<b.hash.length&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1;this._addClass("ui-tabs","ui-widget ui-widget-content");
this._toggleClass("ui-tabs-collapsible",null,c.collapsible);this._processTabs();c.active=this._initialActive();a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(c.active):a();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);
null===b&&(d&&this.tabs.each(function(c,f){if(a(f).attr("aria-controls")===d)return b=c,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===b||-1===b)&&(b=this.tabs.length?0:!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0));!c&&!1===b&&this.anchors.length&&(b=0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(a.ui.safeActiveElement(this.document[0])).closest("li"),
d=this.tabs.index(c),f=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}b.preventDefault();
clearTimeout(this.activating);d=this._focusNextTab(d,f);b.ctrlKey||b.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-
1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){function d(){b>f&&(b=0);0>b&&(b=f);return b}for(var f=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,b);this.tabs.eq(a).trigger("focus");return a},_setOption:function(a,b){"active"===a?this._activate(b):(this._super(a,b),"collapsible"===a&&(this._toggleClass("ui-tabs-collapsible",
null,b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$\x26"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],
this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});
this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,f=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+
this.eventNamespace,"\x3e li",function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("\x3e li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return a("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");
this.panels=a();this.anchors.each(function(c,d){var f=a(d).uniqueId().attr("id"),g=a(d).closest("li"),h=g.attr("aria-controls");if(b._isLocal(d)){c=d.hash;d=c.substring(1);var p=b.element.find(b._sanitizeSelector(c))}else d=g.attr("aria-controls")||a({}).uniqueId()[0].id,p=b.element.find("#"+d),p.length||(p=b._createPanel(d),p.insertAfter(b.panels[c-1]||b.tablist)),p.attr("aria-live","polite");p.length&&(b.panels=b.panels.add(p));h&&g.data("ui-tabs-aria-controls",h);g.attr({"aria-controls":d,"aria-labelledby":f});
p.attr("aria-labelledby",f)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(f.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("\x3cdiv\x3e").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var c,d;a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(d=
0;c=this.tabs[d];d++)c=a(c),!0===b||-1!==a.inArray(d,b)?(c.attr("aria-disabled","true"),this._addClass(c,null,"ui-state-disabled")):(c.removeAttr("aria-disabled"),this._removeClass(c,null,"ui-state-disabled"));this.options.disabled=b;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});
this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c=this.element.parent();if("fill"===b){var d=c.height();d-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var b=a(this),c=b.css("position");"absolute"!==c&&"fixed"!==c&&(d-=b.outerHeight(!0))});this.element.children().not(this.panels).each(function(){d-=
a(this).outerHeight(!0)});this.panels.each(function(){a(this).height(Math.max(0,d-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else"auto"===b&&(d=0,this.panels.each(function(){d=Math.max(d,a(this).height("").height())}).height(d))},_eventHandler:function(b){var c=this.options,d=this.active,f=a(b.currentTarget).closest("li"),g=f[0]===d[0],h=g&&c.collapsible,p=h?a():this._getPanelForTab(f),m=d.length?this._getPanelForTab(d):a();d={oldTab:d,oldPanel:m,newTab:h?a():f,newPanel:p};
b.preventDefault();f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),m.length||p.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),p.length&&this.load(this.tabs.index(f),b),this._toggle(b,d))},_toggle:function(b,c){function d(){g.running=!1;g._trigger("activate",b,c)}function f(){g._addClass(c.newTab.closest("li"),
"ui-tabs-active","ui-state-active");h.length&&g.options.show?g._show(h,g.options.show,d):(h.show(),d())}var g=this,h=c.newPanel,p=c.oldPanel;this.running=!0;p.length&&this.options.hide?this._hide(p,this.options.hide,function(){g._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active");f()}):(this._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),p.hide(),f());p.attr("aria-hidden","true");c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});h.length&&
p.length?c.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);h.attr("aria-hidden","false");c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(b){"string"===
typeof b&&(b=this.anchors.index(this.anchors.filter("[href$\x3d'"+a.ui.escapeSelector(b)+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var b=
a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setOptionDisabled(c))},disable:function(b){var c=this.options.disabled;
if(!0!==c){if(void 0===b)c=!0;else{b=this._getIndex(b);if(-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setOptionDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,f=this.tabs.eq(b);b=f.find(".ui-tabs-anchor");var g=this._getPanelForTab(f),h={tab:f,panel:g},p=function(a,b){"abort"===b&&d.panels.stop(!1,!0);d._removeClass(f,"ui-tabs-loading");g.removeAttr("aria-busy");a===d.xhr&&delete d.xhr};this._isLocal(b[0])||(this.xhr=a.ajax(this._ajaxSettings(b,c,h)))&&
"canceled"!==this.xhr.statusText&&(this._addClass(f,"ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.done(function(a,b,f){setTimeout(function(){g.html(a);d._trigger("load",c,h);p(f,b)},1)}).fail(function(a,b){setTimeout(function(){p(a,b)},1)}))},_ajaxSettings:function(b,c,d){var f=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(b,g){return f._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:g},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+
b))}});!1!==a.uiBackCompat&&a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}})});
var oTaggingDefaults={elemId:{downtime:"DOWNTIME",errAccInfo:"ERROR: ACCOUNT INFORMATION",errAccInfoBillAddr:"ERROR: ACCOUNT INFORMATION BILLING ADDRESS",errAccInfoEmail:"ERROR: ACCOUNT INFORMATION EMAIL ADDRESS",errAccInfoNickname:"ERROR: ACCOUNT INFORMATION NICKNAME",errAccInfoPhoneMob:"ERROR: ACCOUNT INFORMATION MOBILE PHONE",errAccInfoPhonePrim:"ERROR: ACCOUNT INFORMATION PRIMARY PHONE",errAccInfoPW:"ERROR: ACCOUNT INFORMATION PASSWORD",errAccInfoSecQuestion:"ERROR: ACCOUNT INFORMATION SECURITY QUESTION",
errAccInfoPin:"ERROR: ACCOUNT INFORMATION PIN",errAccLocked:"ERROR: ACCOUNT SUSPENDED",errAccSuspended:"ERROR: ACCOUNT SUSPENDED - NEGATIVE STATUS",errAccTvSource:"ERROR: ACCOUNT INFORMATION TV SOURCE",errAddressInfo:"ERROR: ADDRESS INFORMATION",errAddressValidation:"ERROR: ADDRESS VALIDATION",errAddGiftCard:"ERROR: ADD GIFT CARD",errAddToCart:"ERROR: ADD TO CART",errBackEnd:"ERROR: BACKEND FAILURE",errDirectDebitLinking:"ERROR: DIRECT DEBIT LINKING",errEditReminder:"ERROR: REMINDER INFORMATION",
errError:"ERROR",errGeneric:"ERROR: GENERIC ERROR",errGiftOptions:"ERROR: GIFT OPTIONS",errInfoReq:"ERROR: INFORMATION REQUEST",errLoginIncorrect:"ERROR: INCORRECT SIGN IN INFORMATION",errOrderIssue:"ERROR: ORDER ISSUE",errOrderModIssue:"ERROR: ORDER MANAGEMENT",errPasswordReset:"ERROR: FORCED PASSWORD RESET",errPayOffers:"ERROR: PAYMENT OFFERS",errPayMismatch:"ERROR: PAYMENT METHOD MISMATCH",errPayMethod:"ERROR: PAYMENT METHOD",errPayPaypal:"ERROR: PAYPAL PAYMENT",errPayNoValidMethod:"ERROR: NO VALID PAYMENT METHOD",
errScaChallengeCancel:"ERROR: PSD2 - CUSTOMER CANCELLED",errSecQuestionInfo:"ERROR: INCORRECT SECURITY QUESTION INFORMATION",errShippingRestrictions:"ERROR: SHIPPING RESTRICTION",errSpeedbuyOrderIssue:"ERROR: SPEED BUY ORDER ISSUE",errUpdateCreditCard:"ERROR: UPDATE CREDIT CARD REQUIRED",errUserPreferences:"ERROR: PREFERENCES INFORMATION",errVoucherApplyCode:"ERROR: ISSUE APPLYING CODE",errPaybackApplyCode:"ERROR: PAYBACK ISSUE",errWriteReview:"ERROR: WRITE A REVIEW ERROR",warningProp65:"WARNING: CALIFORNIA PROP 65",
warningProp65Overlay:"CALIFORNIA PROP 65"},elemCat:{confirmOverlay:"CONFIRMATION OVERLAY",customerMessaging:"CUSTOMER MESSAGING",errAccSettings:"ACCOUNT SETTINGS ERROR MESSAGE",errAddToCart:"ADD TO CART ERRORS",errCheckout:"CHECKOUT ERROR MESSAGE",errCheckoutForm:"CHECKOUT FORM ERROR MESSAGE",errDirectDebitForm:"CHECKOUT FORM ERROR MESSAGE",errForm:"FORM ERROR MESSAGE",errMyAccount:"ACCOUNT ERROR MESSAGE",errPrivacy:"PRIVACY ERROR MESSAGE",errSignInForm:"SIGN IN FORM ERROR MESSAGE",orderConfirmation:"CONFIRMATION ERROR MESSAGE",
overlay:"OVERLAY"},msg:{downtime:"SYSTEM IS CURRENTLY IN DOWNTIME",errAccountLockedCvv:"ACCOUNT LOCKED - BAD CVV",errAccountLockedSignIns:"ACCOUNT LOCKED - TOO MANY SIGN INS",errAccountLockedSecurAlert:"ACCOUNT LOCKED - TOO MANY SECURITY ATTEMPTS",errAccountSuspendedRiskAlert:"ACCOUNT SUSPENDED - RISK ALERT",errAccountSuspendedUnknown:"10009 - ACCOUNT SUSPENDED - UNKNOWN",errGeneric:"GENERIC ERROR",errUnsupported:"UNSUPPORTED ERROR",errIbanInvalid:"IBAN INVALID FOR DIRECT DEBIT PAYMENT METHOD",errNoOfferSelected:"NO OFFER SELECTED",
errPayMismatch:"PAYMENT METHOD DOES NOT MATCH PAYMENT OPTION",errPayMethodDeclined:"ORDER NOT SUBMITTABLE - PAYMENT METHOD WAS DECLINED",errPayPalAddressError:"PAYPAL EXPRESS CHECKOUT ADDRESS ERROR",errPayPaypal:{60051:"EXISTING CUSTOMER CANNOT MATCH - PAYPAL FOUND",60052:"EXISTING CUSTOMER CANNOT MATCH - EMAIL ADDRESS FOUND",60053:"PAYPAL ACCOUNT ASSOCIATED WITH DIFFERENT MEMBER",60054:"MEMBER ALREADY ASSOCIATED TO DIFFERENT PAYPAL ACCOUNT",60055:"NEGATIVE ACCOUNT STATUS",60056:"MATCHED ACCOUNT IS SUSPENDED"},
errScaChallengeCancel:"Error Message - PAYMENT VERIFICATION CANCELLED",errSecurityInfoMismatch:"SECURITY INFORMATION DOES NOT MATCH"}},qTagging=function(){var a=function(a){var b=$(".fancybox-overlay"),c=b.length?b:$("body");$("iframe",c).each(function(){var a=$(this);(new RegExp("^((((https?:)?\\/\\/)?"+window.location.host.replace(/\./g,"\\.")+")|(\\/)[^\\/])")).test(a.attr("src"))&&(c=c.add(a.contents()))});return 0<$(".has-"+a+" .help-block, .has-"+a+" + .help-block",c).length?$(".has-"+a+" .help-block, .has-"+
a+" + .help-block",c).first().text():"account-settings"===qVars.page?(c=$("body"),$(".has-"+a+" .help-block, .has-"+a+" + .help-block",c).first().text()):""},b=function(a,b){return{eid:b.elemId?b.elemId:"",ecat:b.elemCat?b.elemCat:"error"===a?"undefined"!==typeof checkoutHelper?oTaggingDefaults.elemCat.errCheckoutForm:oTaggingDefaults.elemCat.errForm:"",msg:b.msg?b.msg:"",type:b.code?b.code:"",linkClickParams:b.linkParams?b.linkParams:"",attr2:b.attr2?b.attr2:""}};return{err:{trigger:function(c){var d=
{};"object"===typeof c&&(d=b("error",c));""===d.msg&&(d.msg=a("error"));d.msg=$.trim(d.msg.toUpperCase());""!==d.msg&&(c=d,$(document).trigger("qError",c))}},success:{trigger:function(c){var d={};"object"===typeof c&&(d=b("success",c));""===d.msg&&(d.msg=a("success"));d.msg=$.trim(d.msg.toUpperCase());c=d;$(document).trigger("qSuccess",c)}},info:{trigger:function(a){var c={};"object"===typeof a&&(c=b("success",a));c.msg=$.trim(c.msg.toUpperCase());""!==c.msg&&(a=c,$(document).trigger("qInfo",a))}}}}(),
formRegex={zipUS:/^(?!00000)\d{5}(?!-0000)(-\d{4})?$/,zipCA:/^[a-z](\d|\d[a-z]|\d[a-z]( )?|\d[a-z]( )?\d|\d[a-z]( )?\d[a-z]|\d[a-z]( )?\d[a-z]\d)?$/i};$.validator.addMethod("pattern",function(a,b,c){if(this.optional(b))return!0;"string"===typeof c&&(c=new RegExp("^(?:"+c+")$"));return c.test(a)},i18n.get("Invalid format"));$.validator.addMethod("lettersonly",function(a,b){return this.optional(b)||/^[a-z]+$/i.test(a)},"Letters only please");
$.validator.addMethod("lettersdigits",function(a,b){return this.qOptional(b)||/^[a-z0-9]+$/i.test(a)});$.validator.addMethod("lettersdigits-space",function(a,b){return this.qOptional(b)||/^(?![\s])[a-z0-9 ]+$/i.test(a)});$.validator.addMethod("lettersdigits-spaceJP",function(a,b){return this.qOptional(b)||/^(?![\s])[a-z0-9 \u4e00-\u9faf\u3041-\u3093\u30a1-\u30f3\uff10-\uff19\uff21-\uff5a\u3000\u30fc]+$/i.test(a)});
$.validator.addMethod("lettersdigits-spacedash",function(a,b){return this.qOptional(b)||/^[a-z0-9 -]+$/i.test(a)});$.validator.addMethod("letters-space",function(a,b){return this.qOptional(b)||/^[a-z ]+$/i.test(a)});$.validator.addMethod("letters-spaceJP",function(a,b){return this.qOptional(b)||/^[a-z \u4e00-\u9faf\u3041-\u3093\u30a1-\u30f3\uff21-\uff5a\u3000\u30fc]+$/i.test(a)});$.validator.addMethod("email",function(a,b){return this.qOptional(b)||/^[^@,\s]+@[^@,\s]+\.[^@,\s]{2,10}$/.test(a)});
$.validator.addMethod("createEditEmail",function(a,b){return this.qOptional(b)||/(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(a)});
$.validator.addMethod("emailFooter",function(a,b){return this.qOptional(b)||/^[_A-Za-z0-9-+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$/.test(a)});$.validator.addMethod("emailOrEmpty",function(a){return/^[^@,\s]+@[^@,\s]+\.[^@,\s]{2,10}$/.test(a)||""===a});$.validator.addMethod("requiredValueOrPlaceholder",function(a,b){return""!==$(b).prop("placeholder")||""!==a});$.validator.addMethod("zipcodeUS",function(a,b){return this.optional(b)||formRegex.zipUS.test(a)},"The specified US ZIP Code is invalid");
$.validator.addMethod("zipUSorCanadianPC",function(a,b){return this.qOptional(b)||formRegex.zipUS.test(a)||formRegex.zipCA.test(a)},"Invalid Zip/Postal Code");$.validator.addMethod("containsletteraz",function(a,b){return this.qOptional(b)||/[a-z]/i.test(a)});$.validator.addMethod("containsnumber",function(a,b){return this.qOptional(b)||/[0-9]/.test(a)});$.validator.addMethod("containslowerandupperaz",function(a,b){return this.qOptional(b)||/[a-z]/.test(a)&&/[A-Z]/.test(a)});
$.validator.addMethod("containsthreeconsecutive",function(a,b){return this.qOptional(b)||/([a-zA-Z0-9.,])\1\1/.test(a)});$.validator.addMethod("numbercommadot",function(a,b){return this.qOptional(b)||/[0-9.,]/.test(a)});$.validator.addMethod("phoneUS",function(a,b){a=a.replace(/[^0-9]/g,"");return this.optional(b)||9<a.length});$.validator.addMethod("phoneUK",function(a,b){a=a.replace(/[^0-9]/g,"");return this.optional(b)||11<a.length});
$.validator.addMethod("phoneDEBlank",function(a){a=a.replace(/[^0-9+]/g,"");return 0<a.length});$.validator.addMethod("phoneDE",function(a){a=a.replace(/[^0-9]/g,"");return 3<a.length&&18>a.length});
$.validator.addMethod("profanity",function(a,b){var c="",d=$(b.form).find(".profanityFilter");d.each(function(){$(this).val()&&(c=c+" "+$(this).val())});$(b.form).find(".profanity-param").val(c);var f=this,m=f.previousValue(b);m.old=a;var p={url:qVars.ajax.profanities,type:"get",dataType:"text",async:!1,data:{message:$(b.form).find(".profanity-param").val()},success:function(a){var c=!0;if(a){var g=JSON.parse(a);"undefined"!==typeof g.profanities&&0<g.profanities.length&&(c=!1)}if(c)f.formSubmitted=
!1,f.successList.push(b),f.invalid[b.name]=!1,f.showErrors();else{var h={};d.each(function(){var a=!1,b=$(this),c;$.each(g.profanities,function(d,f){if(-1<b.val().toLowerCase().indexOf(f.toLowerCase()))return c=b.attr("name"),a=!0,!1});a&&(h[c]=qMsgStorage.err.general.profanityError,f.invalid[c]=!0,f.showErrors(h))})}m.valid=c;f.stopRequest(b,c)},error:function(){d.each(function(){var a=$(this).attr("name");f.invalid[a]=!1});f.showErrors();m.valid=!0;f.stopRequest(b,!0)}};return $.validator.methods.remote.call(this,
a,b,p)});$.validator.addClassRules("profanity-param",{profanity:!0});$.validator.addMethod("specialCharset",function(a,b){return this.qOptional(b)||/^([a-zA-Z\u00C0-\u00F6\u00F9-\u017E\u0027-]+\s)*[a-zA-Z\u00C0-\u00F6\u00F9-\u017E\u0027-]+$/i.test(a)});
$.validator.addMethod("dateofbirthdmy",function(a,b){b=this.qOptional(b);if("y000-m0-d0"===qVars.format.dob&&/^\d{4}-\d{2}-\d{2}$/.test(a)){var c=parseInt(a.slice(0,4));var d=parseInt(a.slice(5,7).replace(/^0/,""));b=parseInt(a.slice(8,10).replace(/^0/,""));a=(new Date(c,d-1,b)).getTime();return!(0===d||0===b||12<d||b>(new Date(c,d,0)).getDate()||a>=(new Date).getTime())}return/^\d\d[.,/]\d\d[.,/]\d{4}$/.test(a)?(b=parseInt(a.slice(0,2).replace(/^0/,"")),d=parseInt(a.slice(3,5).replace(/^0/,"")),
c=parseInt(a.slice(6,10)),a=(new Date(c,d-1,b)).getTime(),!(0===d||0===b||12<d||b>(new Date(c,d,0)).getDate()||a>=(new Date).getTime())):a.length?!1:b});$.validator.addMethod("dateofbirthmdy",function(a,b){b=this.qOptional(b);if(/^\d\d[.,/]\d\d[.,/]\d{4}$/.test(a)){if(isNaN(Date.parse(a)))return!1;b=a.slice(3,5).replace(/^0/,"");var c=parseInt(a.slice(0,2).replace(/^0/,""));a=a.slice(6,10);a=(new Date(a,c-1,b)).getTime();return a<(new Date).getTime()}return a.length?!1:b});
$.validator.addMethod("age-verification",function(a,b){var c=qVars.format.minAgeCust?parseInt(qVars.format.minAgeCust):18,d=qVars.format.maxAgeCust?parseInt(qVars.format.maxAgeCust):NaN;b=this.qOptional(b);if("y000-m0-d0"===qVars.format.dob&&/^\d{4}-\d{2}-\d{2}$/.test(a)){var f=parseInt(a.slice(0,4));var m=parseInt(a.slice(5,7).replace(/^0/,""));b=a.slice(8,10).replace(/^0/,"");return qDate.isFutureDate(new Date(f+c,m-1,b))||isNaN(d)?"":qDate.isFutureDate(new Date(f+d,m-1,b))}return/^\d\d[.,/]\d\d[.,/]\d{4}$/.test(a)?
(b=a.slice(0,2).replace(/^0/,""),m=parseInt(a.slice(3,5).replace(/^0/,"")),f=parseInt(a.slice(6,10)),!qDate.isFutureDate(new Date(f+c,m-1,b))):a.length?!1:b});$.validator.addMethod("expirydate",function(a){a=qDate.create(a.replace(/\s+/g,""));return qDate.isFutureDate(a)});$.validator.addMethod("noblanksonly",function(a,b){return this.qOptional(b)||/\S/i.test(a)});$.validator.addMethod("withouturlsimple",function(a,b){return this.qOptional(b)||!/https?:\/\/\S+/gi.test(a)});
$.validator.addMethod("onlykatakana",function(a,b){return this.qOptional(b)||/^[\u30a0-\u30ff]*$/.test(a)});$.validator.addMethod("onlydoublebyte",function(a,b){return this.qOptional(b)||/^[^\u0000-\u00ff\uff61-\uff9f]+[\u30a0-\u30ff]*$/.test(a)});$.extend($.validator,{qvc:{bValidatorValidatedOnceOrMore:{}}});$.validator.prototype.qOptional=function(a){return!0!==$(a).data("rule-required")&&!0!==a.required};
$.validator.setDefaults({ignore:":hidden:not(.dont-ignore,select.custom-select),.hidden select.custom-select",highlight:function(a){"string"===typeof a.getAttribute("name")&&($.validator.qvc.bValidatorValidatedOnceOrMore[a.getAttribute("name")]=!0);$(a).closest("label").addClass("has-error");$(a).closest("label").removeClass("has-success has-info")},unhighlight:function(a){"string"===typeof a.getAttribute("name")&&($.validator.qvc.bValidatorValidatedOnceOrMore[a.getAttribute("name")]=!0);$(a).closest("label").removeClass("has-error");
$(a).closest("label").addClass("has-success has-info")},errorElement:"span",errorClass:"help-block",errorPlacement:function(a,b){var c=b.attr("name");"undefined"!==typeof c&&"newPW"===c&&a.addClass("hidden");b.closest(".errorRow").length?a.insertAfter(b.closest(".errorRow")):b.parent(".input-group").length||b.parent(".select").length?a.insertAfter(b.parent()):"undefined"!==typeof c&&"terms"===c?(a.addClass("error"),a.insertBefore(b.parent())):a.insertAfter(b)},invalidHandler:function(a,b){a=b.numberOfInvalids();
var c=$(this).find(".alert"),d=c.find(".message");0<a?(0<d.length&&d.html(d.data("msg-incomplete")),!1===platform.device&&0<b.errorList.length&&b.errorList[0].element&&"select"===b.errorList[0].element.tagName.toLowerCase()&&("undefined"!==typeof b.lastActive?!/text/i.test(b.lastActive.getAttribute("type")):1)&&$(b.errorList[0].element).siblings(".select-styled.custom-select").focus().trigger("focusin"),c.removeClass("hidden"),qScroll.toElement(c.first(),!0),$(".fancybox-inner").length&&qViewport.is("\x3e\x3dxs")&&
$.fancybox.update()):c.addClass("hidden")},success:function(a,b){"string"===typeof b.getAttribute("name")&&($.validator.qvc.bValidatorValidatedOnceOrMore[b.getAttribute("name")]=!0);a.closest("label").addClass("has-success")}});
var floatLabel={sClassFloatLbl:"floating",sClassFloatingLblWr:"floatLblWr",update:function(a,b){var c=this;b="string"===typeof b?b:c.sClassFloatLbl;a.each(function(){var a=$(this),f=a.attr("name"),m=a.attr("id");f=$('.control-label[data-for\x3d"'+f+'"]',a.closest("."+c.sClassFloatingLblWr));1>f.length&&(f=$('.control-label[data-for\x3d"'+m+'"]',a.closest("."+c.sClassFloatingLblWr)));a.val()?f.addClass(b):f.removeClass(b)})},onFocus:function(a,b){var c=a.attr("name"),d=a.attr("id");c=$('.control-label[data-for\x3d"'+
c+'"]',a.closest("."+this.sClassFloatingLblWr));1>c.length&&(c=$('.control-label[data-for\x3d"'+d+'"]',a.closest("."+this.sClassFloatingLblWr)));c.addClass("string"===typeof b?b:this.sClassFloatLbl)},onBlur:function(a,b){this.update(a,b)},addListeners:function(a){var b=this;a.off("focus.float").on("focus.float",function(){b.onFocus($(this))});a.off("blur.float").on("blur.float",function(){b.onBlur($(this))});a.off("change.float").on("change.float",function(){b.update($(this))});$("select.custom-select").off("change.float").on("change.float",
function(){b.selectFloat($(this))});a.off("keydown.float").on("keydown.float",function(){b.onFocus($(this))});$(".signInArea .email input").off("transitionstart").on("transitionstart",function(){$(this).siblings("span.control-label").addClass("floating")})},removeListeners:function(a){a.off("focus.float");a.off("blur.float");$("select.custom-select").off("change.float")},selectFloat:function(a){var b=a.closest("label").find(".control-label");b&&""===a.val()?b.addClass("floating sr-only"):b&&!b.hasClass("no-label")&&
""!==a.val()&&null!==a.val()&&b.addClass("floating").removeClass("sr-only")},init:function(a){a="object"===typeof a?a:{};a.sSelectorWr="string"===typeof a.sSelectorWr?a.sSelectorWr:"";var b=this,c=$(a.sSelectorWr+" ."+b.sClassFloatingLblWr+" input, "+a.sSelectorWr+" ."+b.sClassFloatingLblWr+" textarea");a.sSelectorWr&&b.removeListeners($("."+b.sClassFloatingLblWr+" input, ."+b.sClassFloatingLblWr+" textarea").not(c));b.addListeners(c);b.update(c,b.sClassFloatLbl);$("select.custom-select").each(function(){b.selectFloat($(this))})}},
customSelect={inputDelay:500,closeAll:function(a){a=a?a:$();$("div.select-styled.active").not(a).each(function(){$(this).removeClass("active").attr("aria-expanded","false").next("ul.select-options").hide()})},selectClick:function(a){this.closeAll(a);a.attr("aria-expanded","true"!==a.attr("aria-expanded"));if(0<a.parents("form").length){var b=a.parents("form").outerHeight()-(a.offset().top+a.outerHeight()-a.parents("form").offset().top);a.next("ul.select-options").css("max-height",b)}a.prev("select.custom-select.cartItemQtySelect").data("prevValue",
a.find("span").text());a.hasClass("active")?(a.removeClass("active"),a.next("ul.select-options").hide(),a.focus()):a.hasClass("active")||(a.addClass("active"),a.next("ul.select-options").show().find("li.active").focus())},chooseOption:function(a,b){0<$("div.select-styled",a).length&&($("div.select-styled.custom-select span",a).text($("select option[value\x3d"+b+"]",a).text()),$("ul.select-options li",a).removeClass("active"),$('li[rel\x3d"'+b+'"]',a).addClass("active"));$("select",a).val(b)},findItemToFocus:function(a,
b){a=a.filter(function(){return $(this).attr("rel")});b=String.fromCharCode(b);if(!this.keysSoFar){this.keysSoFar="";for(var c=0;c<a.length;c++)a.eq(c).is(":focus")&&(this.searchIndex=c)}this.keysSoFar+=b;this.clearKeysSoFarAfterDelay();(b="undefined"===typeof this.searchIndex?this.findMatchInRange(a,0,a.length):this.findMatchInRange(a,this.searchIndex+1,a.length))||(b=this.findMatchInRange(a,0,this.searchIndex));return b},clearKeysSoFarAfterDelay:function(){this.keyClear&&(clearTimeout(this.keyClear),
this.keyClear=null);this.keyClear=setTimeout(function(){this.keysSoFar="";this.keyClear=null}.bind(this),this.inputDelay)},findMatchInRange:function(a,b,c){for(;b<c;b++){var d=a[b].innerText;if(d&&0===d.toUpperCase().indexOf(this.keysSoFar))return a[b]}return null},init:function(a){"boolean"===typeof a&&a?$("select.custom-select:not(.select-hidden)").each(function(){var a=$(this);a.is(".cartItemQtySelect")&&a.data("prevValue",a.val())}):($("select.custom-select:not(.select-hidden)").each(function(){var a=
$(this),c=a.find("option,optgroup"),d=c.length,f=c.index(c.filter(":selected")),m=$(),p=$(),h=$(),t=$();t=a.next(".control-label").text();a.addClass("select-hidden").attr("aria-hidden","true");a.wrap('\x3cdiv class\x3d"select" role\x3d"application"\x3e\x3c/div\x3e');a.after('\x3cdiv class\x3d"select-styled custom-select" role\x3d"combobox" tabindex\x3d"0" title\x3d"'+t+'" aria-autocomplete\x3d"none" aria-expanded\x3d"false" aria-label\x3d"'+t+'"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e');m=a.next("div.select-styled");
p=$("\x3cul /\x3e",{"class":"select-options",role:"listbox"}).insertAfter(m);for(var g=0;g<d;g++)t=c.eq(g),"optgroup"===t.prop("tagName").toLowerCase()?$("\x3cli /\x3e",{class:"optgroup",text:t.attr("label"),disabled:!0}).appendTo(p):$("\x3cli /\x3e",{class:g===f?"active":null,text:t.text(),rel:t.val(),"aria-label":t.text(),role:"option",tabindex:"-1"}).appendTo(p);h=p.children("li").not(".optgroup");m.find("span").text(c.eq(f).text());a.is(".cartItemQtySelect")&&a.data("prevValue",m.find("span").text());
a.closest("label").off(".styledSelect").on("click.styledSelect",function(a){a.preventDefault();a.stopPropagation()});m.off(".styledSelect").on("click.styledSelect",function(a){a.preventDefault();a.stopPropagation();a=$(this);customSelect.selectClick(a)});m.on("keydown.styledSelect",function(a){if(!$(this).hasClass("active")&&(13===a.which||32===a.which||40===a.which)){a.preventDefault();a.stopPropagation();var b=$(this);customSelect.selectClick(b);b.next("ul.select-options").find("li.active").focus()}$(this).hasClass("active")&&
13!==a.which&&32!==a.which&&40!==a.which&&27!==a.which&&(a.preventDefault(),a.stopPropagation(),(b=customSelect.findItemToFocus(h,a.which))&&b.focus());$(this).hasClass("active")&&27===a.which&&($(this).removeClass("active").attr("aria-expanded","false").next("ul.select-options").hide(),m.focus())});h.off(".styledSelect").on("click.styledSelect",function(b){b.preventDefault();b.stopPropagation();p.find("li").removeClass("active");$(this).addClass("active");m.find("span").text($(this).text());m.removeClass("active").attr("aria-expanded",
"false");a.val($(this).attr("rel")).trigger("change");a[0].form&&a.valid();p.hide();m.focus()});h.on("keydown.styledSelect",function(a){13===a.which||32===a.which?(a.preventDefault(),$(this).click()):40===a.which||9===a.which&&!a.shiftKey?(a.preventDefault(),$(this).index()===$(this).closest("ul").find("li").length-1?$(this).closest("ul").find("li").first().focus():$(this).next().focus()):38===a.which||9===a.which&&a.shiftKey?(a.preventDefault(),0===$(this).index()?$(this).closest("ul").find("li").last().focus():
$(this).prev().focus()):27===a.which?(m.removeClass("active").attr("aria-expanded","false").next("ul.select-options").hide(),m.focus()):(a=customSelect.findItemToFocus(h,a.which))&&a.focus()})}),$(document).off(".styledSelect").on("click.styledSelect",function(){$("div.select div.select-styled").removeClass("active").attr("aria-expanded","false");$("div.select ul.select-options").hide()}))}},customSwitch={switchClick:function(a,b){a=b.closest(".custom-controls-switch").find(".custom-control-indicator");
b=b.closest(".custom-controls-switch").find(".custom-control-input:checked ~ .custom-control-description").closest("label.custom-switch");a.stop().animate({width:b.outerWidth(),left:b.position().left},300)},init:function(){$(".custom-controls-switch .custom-control-input").off(".styledSwitch").on("change.styledSwitch",function(a){customSwitch.switchClick(a,$(this))});$(".custom-controls-switch .custom-control-indicator").each(function(a){customSwitch.switchClick(a,$(this))})}},qDate={today:function(){var a=
new Date,b=a.getMonth(),c=a.getDate().toString(),d=a.getFullYear(),f=d.toString().substr(-2),m=d.toString().slice(0,2);b=(b+1).toString();1===b.length&&(b="0"+b);1===c.length&&(c="0"+c);return{date:a,month:b,day:c,year:f,fullYear:d,century:m}},create:function(a){var b=a.slice(0,2);a=a.slice(3);2===a.length&&(a=qDate.today().century+a);return new Date(a,b)},isFutureDate:function(a){var b=qDate.today().date;return a.getTime()>b.getTime()},formatMonth:function(a,b){1===b.length&&1<parseInt(b)&&(b="0"+
b,$(a).val(b))},transmuteExpDate:function(a){a=a.replace(/\s+/g,"").split("/");2===a[1].length&&(a[1]="20"+a[1]);return a[1]+"-"+a[0]}},formsHelper={fieldMaskingInit:function(){"string"===typeof qVars.format.expDateField&&($('[name\x3d"expiry"]').keyup(function(){var a=$('[name\x3d"expiry"]').val();qDate.formatMonth('[name\x3d"expiry"]',a)}),$('[name\x3d"expiry"]').attr("data-rule-pattern",qVars.format.expirationDateRegEx),$('[name\x3d"expiry"]').mask(qVars.format.expDateField,{translation:{m:{pattern:/[0-1]/},
y:{pattern:/[1-2]/}}}));$('[name\x3d"cvv"],[name\x3d"ssn"]').mask("0000",{translation:{pattern:/[1-2]/}});$('[name\x3d"invitationCode1"],[name\x3d"invitationCode2"],[name\x3d"voucherCode"]').mask("0000");$('[name\x3d"serialNumber"]').mask("000000000000");"string"===typeof qVars.format.dob&&$('[name\x3d"birthDate"]').mask(qVars.format.dob,{translation:{d:{pattern:/[0-3]/},m:{pattern:/[0-1]/},y:{pattern:/[1-2]/}}});"string"===typeof qVars.format.phone&&$('[name\x3d"phoneNumber"],[name\x3d"refPhoneNumber"]').mask(qVars.format.phone,
{translation:{a:{pattern:/[+0-9]/},b:{pattern:/[ 0-9]/}}});"string"===typeof qVars.format.paybackCustomerNumber&&$('[name\x3d"paybackID"]').mask(qVars.format.paybackCustomerNumber);"string"===typeof qVars.format.zipFormat&&$('[name^\x3d"postCode"]').each(function(){var a=$(this).data("activeMask")?$(this).data("activeMask"):"string"===typeof qVars.format.zipFormatCA&&"CA"===$(this).closest("form").find("#countrySelect-billing").val()?qVars.format.zipFormatCA:qVars.format.zipFormat;$(this).data("activeMask",
a).mask(a,{onInvalid:function(a,c,d,f,m){if("function"===typeof formsHelper.onTheFlyZipMasking&&"object"===typeof qZipHelper)formsHelper.onTheFlyZipMasking(a,c,d,f,m)}})});"string"===typeof qVars.format.custId&&$('[name^\x3d"custId"]').mask(qVars.format.custId)},formValidationBubbleSuppression:function(a){a.off("invalid.validationBubbleSupression").on("invalid.validationBubbleSupression",function(a){a.preventDefault()})},sanitizeVal:function(a,b){if("string"===typeof b&&"string"===typeof a&&""!==
a)switch(b){case "postCode":a=a.replace("-","");break;case "phone":a=a.replace(/[^\d]/g,"")}return a},addListeners:function(){this.formValidationBubbleSuppression($("input, select, textarea"));$(".qForm input[maxlength], .qForm textarea[maxlength]").on("input.helper change.helper",function(){var a=$(this),b=a.prop("maxlength");-1!==b&&a.val().length>b&&a.val(a.val().substr(0,b))})},appendProfanityInput:function(){var a=$(".qForm");$.each(a,function(){0<$(".profanityFilter",this).length&&0===$(".profanity-param",
this).length&&$(this).append('\x3cinput class\x3d"profanity-param hidden dont-ignore" name\x3d"message"\x3e')})},init:function(){this.addListeners();this.appendProfanityInput();this.fieldMaskingInit()}},a11y={comp:{rte:function(){$("p, li",$(".fancybox-overlay .rich-text-editor")).attr("tabindex","0")}},init:function(){this.comp.rte()}},ajaxUtility=function(a){var b=this;"undefined"===typeof a&&(a={});b.id="string"===typeof a.id?a.id:"";b.storeName=b.id+"AjaxParams";b.xHeaders={"x-application-code":"QVC",
"x-application-version":"1.0","x-user-agent-text":navigator.userAgent};"object"===typeof qVars.format&&("string"===typeof qVars.format.xAppCode&&(b.xHeaders["x-application-code"]=qVars.format.xAppCode),"string"===typeof qVars.format.xAppVer&&(b.xHeaders["x-application-version"]=qVars.format.xAppVer));b.bNoCdn="boolean"===typeof $("body").data("no-cdn")?$("body").data("no-cdn"):!1;b.getParams=function(a){var c="{}";if("undefined"===typeof a||null===a){c=qCookie.get(b.storeName);if("string"!==typeof c||
""===c)c=sessionStorage.getItem(b.storeName);if("string"!==typeof c||""===c)c=localStorage.getItem(b.storeName)}else switch(a){case "cookie":case "secure-cookie":c=qCookie.get(b.storeName);break;case "session":c=sessionStorage.getItem(b.storeName);break;case "local":c=localStorage.getItem(b.storeName)}"string"!==typeof c&&(c="{}");return JSON.parse(c)};b.getParam=function(a,d,f){a=b.getParams(a);if("string"===typeof d){if("string"!==typeof f)return a[d];if("object"===typeof a[d])return a[d][f]}};
b.storeParams=function(a){var c=JSON.stringify(a);switch(a.store){case "session":sessionStorage.setItem(b.storeName,c);break;case "local":localStorage.setItem(b.storeName,c);break;case "cookie":qCookie.set(b.storeName,c,{path:"/"});break;case "secure-cookie":qCookie.set(b.storeName,c,{path:"/",secure:!0})}};b.URLHandler=function(b){return"function"===typeof a.URLHandler?a.URLHandler(b):!0};b.callSvc=function(c,d){"undefined"===typeof c&&(c=b.getParams());var f=b.URLHandler(c);"undefined"!==typeof c.store&&
b.storeParams(c);"string"===typeof f&&qOpenUrl(f);if(!0===f&&"string"===typeof c.svc){f="string"===typeof qVars.format.host&&"string"===typeof qVars.format.protocol&&/^\/api/.test(c.svc)?qVars.format.protocol+"://"+qVars.format.host+c.svc:c.svc;var m="undefined"!==typeof c.data?c.data:null;"undefined"!==typeof c.json&&(m=JSON.stringify(c.json));f=$.extend(!0,{url:f,method:c.method?c.method:"GET",data:m,xhrFields:{withCredentials:!b.bNoCdn},beforeSend:function(a){b.bNoCdn&&(a.setRequestHeader("x-ip-address",
"127.0.0.1"),qCookie.get(qCookie.name.authToken)&&a.setRequestHeader("Authorization","Bearer "+qCookie.get(qCookie.name.authToken)));if("object"===typeof c.addHeaders)for(var d in c.addHeaders)a.setRequestHeader(d,c.addHeaders[d]);else if(!1!==c.addHeaders)for(d in b.xHeaders)a.setRequestHeader(d,b.xHeaders[d])}},"object"===typeof c.options?c.options:{});c.suppressSpinner||qSpinner.addFullViewportSpinner();$.ajax(f).done(function(b,f,m){"function"===typeof a.doneHandler?a.doneHandler(c,b,f,m,d):"string"===
typeof c.dest&&qOpenUrl(dest)}).fail(function(b,f,m){"function"===typeof a.failHandler&&a.failHandler(c,b,f,m,d)}).always(function(b,f,m){"function"===typeof a.alwaysHandler&&a.alwaysHandler(c,b,f,m,d);c.manualSpinner||qSpinner.removeSpinner()})}};b.cleanup=function(a){"session"!==a&&"undefined"!==typeof a||sessionStorage.removeItem(b.storeName);"local"!==a&&"undefined"!==typeof a||localStorage.removeItem(b.storeName);"cookie"!==a&&"secure-cookie"!==a&&"undefined"!==typeof a||qCookie.remove(b.storeName)}};
$.extend(!0,ajaxUtility,{parseResponse:function(a){try{var b=JSON.parse(a.responseText)}catch(c){b=a.responseJSON}return b}});
var addToCartHelper=function(){var a={},b=function(a,b){switch(a){case "pdp":case "spd":return(product.hasColors&&"A"===$('.buyBoxColorList li[state\x3d"selected"]').attr("ats")||product.hasSizes&&"A"===$('.buyBoxSizeList li[state\x3d"selected"]').attr("ats")||"A"===product.ats)&&qVars.overlay.openAoOverlay;case "on-air":case "on-air-spd":case "wishlist":case "cartSavedItem":return"A"===b.$item.data("ats")&&qVars.overlay.openAoOverlay}return!1},c=function(a,b){switch(a){case "pdp":case "spd":return product.hasColors&&
"W"===$('.buyBoxColorList li[state\x3d"selected"]').attr("ats")||product.hasSizes&&"W"===$('.buyBoxSizeList li[state\x3d"selected"]').attr("ats")||"W"===product.ats;case "on-air":case "on-air-spd":case "wishlist":case "cartSavedItem":return"W"===b.$item.data("ats")}return!1},d=function(a,b){$();switch(a){case "pdp":case "spd":return $('input[name\x3d"productDelivery"]:checked').val()&&"selected"===$(".adPurchase").attr("state")||product.isSubscriptionOnly;case "on-air":case "on-air-spd":return a=
b.$item.parents(".onAirProdBtn"),"A"===a.data("continuity");case "wishlist":return"A"===b.$item.data("continuity-type");case "cartSavedItem":return"string"===typeof b.$item.data("one-shot-id")||"S"===b.$item.data("subscription")}return!1},f=function(a,b){if("pdp"!==a)return!1;a="undefined"!==typeof product;b=0<$(".pdSquareTrade").length;var c=0<$(".pdSquareTrade .sqMadeSelection:visible").length;return a&&b&&!c?!0:!1};return{oAddToCartToCheck:a,isAdvancedOrderItem:b,isWaitlistItem:c,isAdItem:d,checkForSpecialConditions:function(m,
p,h){var t=h.sSku,g=h.sProdId;if(h.bHasColorSize)"on-air-spd"===m?qOpenUrl(qVars.url.productEditSpeedBuy.replace("{0}",g)):qOpenUrl(qVars.url.productEditAddToCart.replace("{0}",g));else{g=h.sPersTemplate;var r=h.svcType,v=p.$item;t=a[t];if("undefined"===typeof t)addToCartHelper.oAddToCartToCheck[h.sSku]="waitlist",addToCartHelper.checkForSpecialConditions(m,p,h);else switch(t){case "waitlist":c(m,p)?overlayHelper.open(qVars.overlay.waitlist,"overlayWaitlistConfirm",r,v,h):(addToCartHelper.oAddToCartToCheck[h.sSku]=
"advancedOrder",addToCartHelper.checkForSpecialConditions(m,p,h));break;case "advancedOrder":b(m,p)?overlayHelper.openOverlay("href-overlay-advanced-order","overlayAdvancedOrderConfirm",r,v,h):(addToCartHelper.oAddToCartToCheck[h.sSku]="autoDelivery",addToCartHelper.checkForSpecialConditions(m,p,h));break;case "autoDelivery":d(m,p)?(h.beforeShow=function(){$(".overlayAdConfirm form");"common-add-cart-item"===r&&"subscription"===$(".overlayAdConfirm .buttons").data("item-type")&&$(".overlayHeader").html(i18n.get("Subscription Order Confirmation"))},
overlayHelper.openOverlay("href-overlay-auto-delivery","overlayAdConfirm",r,v,h)):(addToCartHelper.oAddToCartToCheck[h.sSku]="persTempl",addToCartHelper.checkForSpecialConditions(m,p,h));break;case "persTempl":"string"===typeof g&&g.length?(m={sContext:h.sContext,iQty:h.iQty,sProdId:h.sProdId,sContinueUrl:window.location.pathname,sItemDescription:h.sItemDescription,sSku:h.sSku},h.groupSet&&(m.groupSet=h.groupSet),sessionStorage.setItem("addToCartCache",JSON.stringify(m)),qOpenUrl(qVars.url.persTemplatePath.replace("{0}",
g.replace(".tmpl","")).replace("{1}",encodeURI(h.sSku)).replace("\x26index\x3d{2}",""))):(f(m,p)&&(h.sContext="protectionPlansAvailable"),commonCartAjax.addToCart(h))}}},createSku:function(a,b,c){return"undefined"!==typeof b&&null!==b||"undefined"!==typeof c&&null!==c?"undefined"===typeof b||null===b?a+" "+qVars.format.colorDefaultAjax+" "+c:"undefined"===typeof c||null===c?a+" "+b+" "+qVars.format.sizeDefaultAjax:a+" "+b+" "+c:a+" "+qVars.format.colorDefaultCommerce+" "+qVars.format.sizeDefaultCommerce}}}(),
qAddressTempl=function(){var a={},b={$addressTempl:{},$btnAddrExtension:{}},c=function(a){b.$btnAddrExtension.off(".addrExt").on("click.addrExt",function(a){a.preventDefault();var b=$(this);$(this).next(".addrExtension").slideToggle({duration:150,start:function(){$(this).css("display","block")},complete:function(){b.attr("aria-expanded",("false"===b.attr("aria-expanded")).toString());$(this).focus()}})})};return{init:function(){a=$(".addressForm");b={$addressTempl:a,$btnAddrExtension:$(".btnAddrExtension",
a)};c();"function"===typeof qAddressTempl.checkCountrySelect&&qAddressTempl.checkCountrySelect()},oOut:b}}(),commonCartAjax={sOrderChannel:"WEB",sProp65:"P65W",bRetryMerge:!1,bCreateCartCalled:!1,submitted:!1,getId:function(){return validateUUID(qCookie.get("cartId"))?qCookie.get("cartId"):null},setId:function(a){qCookie.set("cartId",a,{expiresMS:1296E5})},getCheckoutType:function(){var a=window.location.pathname;return 0===a.indexOf("/checkout")?a.substring(10,13):""},getCartVersionId:function(){return"undefined"!==
typeof cartVars&&"versionId"in cartVars?cartVars.versionId:""},addListeners:function(){var a=this;$(document).on("cartCreatedBeforeRedirect",function(b,c){b=c.data;a.setId(b.cartId);var d="undefined"!==typeof b.shippingList?b.shippingList.filter(function(a){return"InStock"===a.shippingName}):[];if(0<d.length){b=0;d=d[0].shippingItemList;for(var f in d)b+=d[f].quantity;masthead.setCartIndicator(b)}qOpenUrl(c.redirect)})},preAddToCart:function(a){if("object"!==typeof a)return-1;var b={$item:"object"===
typeof a.$e?a.$e instanceof jQuery?a.$e:$(e):$()},c={svcType:"common-add-cart-item",sProdId:a.sProdId,sContext:a.sContext,shoppingCategory:"string"===typeof a.shoppingCategory?a.shoppingCategory:"NA",searchTerm:a.searchTerm,referringItem:a.referringItem,sSku:"string"===typeof a.sSku?a.sSku:addToCartHelper.createSku(a.sProdId,a.sColor,a.sSize),bHasColorSize:a.bHasColorSize,addedItems:a.addedItems};"string"===typeof qCookie.get("IQVCREF")&&(c.refCode=qCookie.get("IQVCREF"));a.groupSet&&(c.groupSet=
a.groupSet);a.thirdPartyData&&(c.thirdPartyData=a.thirdPartyData);$.extend(!0,c,a);delete addToCartHelper.oAddToCartToCheck[c.sSku];addToCartHelper.checkForSpecialConditions(c.sContext,b,c)},addToCart:function(a){if(navigator.cookieEnabled)if("spd"===a.sContext||"on-air-spd"===a.sContext)speedBuyAjax.buy(a.sProdId,a.sColor,a.sSize,a.iQty,a.bEzp,a.personalizationText);else if(!this.submitted){this.submitted=!0;var b=commonCartAjax.getId();var c=qVars.ajax.addToCart.replace("{0}",b).replace("{1}",encodeURI(a.sSku)),
d={};b||this.bCreateCartCalled?(b={sku:a.sSku,taggingMetaData:{},quantity:"undefined"!==typeof a.iQty?parseInt(a.iQty):1,personalizationText:a.personalizationText},"string"===typeof a.creditTerms&&(b=$.extend(b,{creditTerms:{code:a.creditTerms}})),"string"===typeof a.shoppingCategory&&(b.taggingMetaData.shoppingCategory=a.shoppingCategory),"string"===typeof a.searchTerm&&(b.taggingMetaData.searchTerm=a.searchTerm),"string"===typeof a.referringItem&&(b.taggingMetaData.referringItem=a.referringItem),
"object"===typeof a.groupSet&&a.groupSet&&(b.groupSet=a.groupSet),"object"===typeof a.thirdPartyData&&a.thirdPartyData&&(b.thirdPartyData=a.thirdPartyData),d.contentType="application/json","string"!==typeof a.refCode||qVars.ajax.suppressHeaderRefcode||(d.headers={"x-reference-code":a.refCode}),cartCommonUtility.callSvc({name:"cartAddItem",method:"POST",manualSpinner:!0,svc:c,json:b,options:d,oOptionalParams:{$item:"object"===typeof a.$item?a.$item:a.$e,sContext:a.sContext,sSku:a.sSku,iQty:a.iQty,
sProdId:a.sProdId,sItemDescription:a.sItemDescription,sContinueUrl:a.sContinueUrl,personalizationText:a.personalizationText,creditTerms:a.creditTerms,retried:"undefined"!==typeof a.retried&&a.retried,previouslyAddedItems:a.addedItems,thirdPartyData:"undefined"!==typeof thirdPartyCookieManager?thirdPartyCookieManager.getCookieKeyValueList():""}})):(this.bCreateCartCalled=!0,commonCartAjax.createNewCart(a))}},createNewCart:function(a){cartCommonUtility.callSvc({name:"cartCreate",method:"GET",svc:qVars.ajax.createCart,
options:{contentType:"application/json"},oOptionalParams:a})},deleteCartItem:function(a,b){if(!this.submitted){this.submitted=!0;a=b.svcUrl+"?index\x3d"+b.index;var c={contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}};cartCommonUtility.callSvc({name:"cartDeleteItem",method:"DELETE",svc:a,options:c,oOptionalParams:{purpose:b.purpose,prodName:b.prodName}})}},deleteQpayOption:function(a,b){if(!this.submitted){this.submitted=!0;a=b.svcUrl+"?index\x3d"+b.index;var c=
{contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}};cartCommonUtility.callSvc({name:"cartDeleteQpayOptions",method:"DELETE",svc:a,options:c,oOptionalParams:{purpose:b.purpose,prodName:b.prodName}})}},setQpayOption:function(a,b,c){if(!this.submitted){this.submitted=!0;a=b.svcUrl+"?index\x3d"+b.index;var d={contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}};cartCommonUtility.callSvc({name:"cartSetQpayOptions",method:"PUT",svc:a,
json:c,options:d,oOptionalParams:{purpose:b.purpose,prodName:b.prodName}})}},mergeCart:function(a){$(document).on("cartCreatedBeforeMerge",function(a,b){b.cartCreated=!0;commonCartAjax.mergeCart(b)});if(a.bSkipCreateCart||null!==commonCartAjax.getId()||"undefined"!==typeof cartVars.cart||"undefined"!==typeof a.cartCreated&&a.cartCreated){var b=qVars.ajax.mergeCart.replace("{0}",commonCartAjax.getId()).replace("{1}",qCookie.get(qCookie.name.globalUserId));a={sContext:a.sContext,sRedirect:"string"===
typeof a.sRedirect?a.sRedirect:"",sOrderReviewPath:a.sOrderReviewPath,sPrevPagePath:a.sPrevPagePath};var c={contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}};cartCommonUtility.callSvc({name:"cartMerge",method:"POST",manualSpinner:!0,svc:b,options:c,oOptionalParams:a})}else commonCartAjax.createNewCart({onSuccessEvent:"cartCreatedBeforeMerge",successEventOptions:a})},initiateCart:function(a,b){a={sContext:a.sContext,sOrderReviewPath:a.sOrderReviewPath,sPrevPagePath:a.sPrevPagePath,
sRedirect:"string"===typeof a.sRedirect?a.sRedirect:"",cart:b};b={contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}};var c=qVars.ajax.initiateCart.replace("{0}",commonCartAjax.getId());cartCommonUtility.callSvc({name:"cartInitiate",method:"POST",manualSpinner:!0,svc:c,options:b,oOptionalParams:a})},authNeeded:function(){return!(1800<window.localStorage.getItem("qlogin-full-tms")-Math.floor(Date.now()/1E3))},doneHandler:function(a,b,c,d){this.submitted=!1;c=a.oOptionalParams;
var f=d.responseJSON,m="object"===typeof f&&f.message?f.message:oTaggingDefaults.msg.errGeneric,p="object"===typeof f&&f.code?f.code:d.status;"undefined"!==typeof cartVars&&null!==d.getResponseHeader("X-Etag")&&(cartVars.versionId=d.getResponseHeader("X-Etag"));"undefined"!==typeof b&&"undefined"!==typeof b.cartId&&null===commonCartAjax.getId()&&this.setId(b.cartId);if(c.onSuccessEvent)b&&"updateCartIdCount"===c.successEventOptions.purpose&&(c.successEventOptions.data=b),$(document).trigger(c.onSuccessEvent,
c.successEventOptions);else switch(a.name){case "cartAddItem":if("speedBuyNewUser"===c.sContext){sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,$('input[name\x3d"email"]',".signInCont").val());qOpenUrl(qVars.url.yourInformation);break}if("speedbuyFallback"===c.sContext){qSpinner.removeSpinner();overlayHelper.open(qVars.overlay.speedbuyError,"overlayGenericError","speedbuy",$(".btnContinue"),{continuePath:qVars.url.cart,oErr:{elemId:oTaggingDefaults.elemId.errSpeedbuyOrderIssue,
elemCat:oTaggingDefaults.elemCat.overlay,msg:"ORDER NOT SUBMITTABLE - "+m,code:p}});break}if("protectionPlansAvailable"===c.sContext||!qVars.feature.addedToCartNotification&&"squareTrade"===c.sContext)qSpinner.removeSpinner(),"number"===typeof b.allocatedQuantity?masthead.cartIncrement(b.allocatedQuantity):masthead.cartIncrement(1);if(("pdp"===c.sContext||"squareTrade"===c.sContext)&&qVars.feature.addedToCartNotification&&"object"!==typeof persTemplHelper){a=b.requestedQuantity;b.requestedQuantity>
b.allocatedQuantity?(a=b.allocatedQuantity,d={afterClose:function(){showAddedToCartNotification($(f.items).first())}},overlayHelper.open(qVars.overlay.partial.replace("{0}",b.allocatedQuantity),"overlayPartialAllocation","pdpPartialAllocation",$(this),d)):showAddedToCartNotification($(f.items).first());masthead.cartIncrement(a);break}if("pdp"===c.sContext&&qVars.feature.addedToCartNotification&&"object"!==typeof persTemplHelper){a=b.requestedQuantity;b.requestedQuantity>b.allocatedQuantity?(a=b.allocatedQuantity,
d={afterClose:function(){showAddedToCartNotification($(f.items).first())}},overlayHelper.open(qVars.overlay.partial.replace("{0}",b.allocatedQuantity),"overlayPartialAllocation","pdpPartialAllocation",$(this),d)):showAddedToCartNotification($(f.items).first());masthead.cartIncrement(a);break}"number"===typeof b.allocatedQuantity&&"number"===typeof b.requestedQuantity&&(a=[],0<f.items.length&&(a=[{imageUrl:$(f.items)[0].imageUrl,name:$(f.items)[0].name,allocatedProductId:$(f.items)[0].allocatedProductId}]),
"object"===typeof c.previouslyAddedItems&&0<c.previouslyAddedItems.length&&(a=a.concat(c.previouslyAddedItems)),b.requestedQuantity>b.allocatedQuantity?(d={continuePath:qVars.url.cart},overlayHelper.open(qVars.overlay.partial.replace("{0}",b.allocatedQuantity),"overlayPartialAllocation","pdpPartialAllocation",$(this),d)):"string"===typeof c.sContext&&"cartSavedItem"===c.sContext&&"undefined"!==typeof checkoutAjax?qAjaxCommon.savedItems.deleteSavedItem(c.sSku,c.sItemDescription,"move"):"protectionPlansAvailable"===
c.sContext?"object"===typeof product.protectionPlans&&0<Object.keys(product.protectionPlans).length?qVars.feature.addedToCartNotification?showProtectionPlanOverlay(a):showProtectionPlanOverlay():qVars.feature.addedToCartNotification&&"object"!==typeof persTemplHelper?showAddedToCartNotification(a):qOpenUrl(qVars.url.cart):"protectionPlan"===c.sContext&&qVars.feature.addedToCartNotification?showAddedToCartNotification(a):"squareTrade"!==c.sContext&&qOpenUrl(qVars.url.cart),qSpinner.removeSpinner());
"undefined"!==typeof thirdPartyCookieManager&&"function"===typeof thirdPartyCookieManager.getCookieKeyValueList&&thirdPartyCookieManager.deleteCookie("QST");break;case "cartCreate":if("undefined"!==typeof c.purpose&&c.purpose)switch(c.purpose){case "cartUnavailable":"string"===typeof qVars.url.cart&&qOpenUrl(qVars.url.cart);break;case "unauthorizedMerge":"undefined"!==typeof b.cartId&&this.setId(b.cartId),"string"===typeof qVars.url.cart&&qOpenUrl(qVars.url.cart)}else"undefined"!==typeof b.cartId?
(this.setId(b.cartId),c.sPersTemplate?qOpenUrl(qVars.url.persTemplatePath.replace("{0}",c.sPersTemplate.replace(".tmpl","")).replace("{1}",encodeURI(c.sSku)).replace("\x26index\x3d{2}","")):commonCartAjax.addToCart(c)):(qSpinner.removeSpinner(),overlayHelper.openOverlay("href-overlay-generic-error","overlayGenericErrorConfirm","pdp",$(".btnAddToCart")));break;case "cartDeleteItem":qContent.refresh({sections:shoppingCart.getSectionsToRefresh("full")});$(window).scrollTop(0);"undefined"!==typeof c.prodName&&
c.prodName&&(b=i18n.get("saveForLater"===c.purpose?qMsgStorage.info.cart.savedCartItem.replace("{0}",c.prodName):qMsgStorage.info.cart.removeCartItem.replace("{0}",c.prodName)),qMsg.showGlobalDismissable(b,"success",{bIsTimed:!0}),qSpinner.removeSpinner());break;case "cartDeleteQpayOptions":case "cartSetQpayOptions":qContent.refresh({sections:shoppingCart.getSectionsToRefresh("full")});$(window).scrollTop(0);qSpinner.removeSpinner();break;case "cartMerge":if(checkoutHelper.containsNegativeStatus(b))"cart"===
qVars.page&&qContent.refresh({sections:shoppingCart.getSectionsToRefresh("full")}),qMsg.showGlobalStatic(i18nMapMsg.error["System Error Customer Service"],"danger"),qSpinner.removeSpinner();else{cartStorageHelper.set(commonCartAjax.getId(),cartStorageHelper.name.checkoutType,"yourInfoPage"===c.sContext?"new":"reg");cartStorageHelper.set(commonCartAjax.getId(),cartStorageHelper.name.checkoutPath,"yourInfoPage"===c.sContext?"new":"reg");if("undefined"!==typeof checkoutAlertHelper&&(checkoutAlertHelper.sContext=
c.sContext,checkoutAlertHelper.handleCartResponse(b),checkoutAlertHelper.alertHandled()))break;"undefined"!==typeof qVars.feature.callInitiateCart&&qVars.feature.callInitiateCart?commonCartAjax.initiateCart(c,b):this.enterCheckout(c)}break;case "cartInitiate":this.enterCheckout(c)}},failHandler:function(a,b){this.submitted=!1;var c=a.oOptionalParams,d=b.responseJSON,f=b.status,m={elemId:oTaggingDefaults.elemId.errGeneric,elemCat:oTaggingDefaults.elemCat.errCheckout,msg:"object"===typeof d&&d.message?
d.message:oTaggingDefaults.msg.errGeneric,code:"object"===typeof d&&d.code?d.code:f};"undefined"!==typeof cartVars&&null!==b.getResponseHeader("X-Etag")&&(cartVars.versionId=b.getResponseHeader("X-Etag"));switch(a.name){case "cartAddItem":a=!1;m.elemCat=oTaggingDefaults.elemCat.errAddToCart;404!==f&&401!==f||c.retried?"object"===typeof d?"20001"===d.code?(qMsg.showGlobalStatic(qMsgStorage.err.addToCart.itemNoLongerAvailable,"danger"),qSpinner.removeSpinner()):"20006"===d.code?(qMsg.showGlobalStatic(qMsgStorage.err.addToCart.lineItemLimitExceeded,
"danger"),m.elemId=oTaggingDefaults.elemId.errAddToCart,m.elemCat=oTaggingDefaults.elemCat.customerMessaging,qSpinner.removeSpinner()):"20007"===d.code?(qMsg.showGlobalStatic(qMsgStorage.err.addToCart.dollarLimitExceeded,"danger"),m.elemId=oTaggingDefaults.elemId.errGeneric,m.elemCat=oTaggingDefaults.elemCat.errAddToCart,qSpinner.removeSpinner()):"20009"===d.code||"20010"===d.code?(f={sClass:"btnCont btn-block",sHref:c.sContinueUrl?c.sContinueUrl:"#0"},d="\x3cp\x3e"+qMsgStorage.err.addToCart.cartItemLimitExceeded.replace("{0}",
c.sItemDescription).replace("{1}",c.sProdId).replace("{2}",/\[(.*?)\]/.exec(d.message)[1])+"\x3c/p\x3e"+overlayHelper.wrapElement(overlayHelper.createLinkHtml(f),{sWrColCLass:"col-tn-12 col-xs-4 col-sm-3"}),overlayHelper.openGeneratedContentOverlay("errorMsgOverlay","cartItemLimitExceeded",d,i18nMapMsg.error["Sorry, there was a problem"],{continuePath:c.sContinueUrl}),m.elemId=oTaggingDefaults.elemId.errAddToCart,m.elemCat=oTaggingDefaults.elemCat.overlay,qSpinner.removeSpinner()):"2029"===d.code?
(qMsg.showGlobalStatic(qMsgStorage.err.addToCart.sameSkuInCart,"danger"),qSpinner.removeSpinner()):"90000"===d.code?commonCartAjax.createNewCart(c):a=!0:a=!0:(d=cartStorageHelper.get(commonCartAjax.getId(),cartStorageHelper.name.checkoutType),"express"!==d&&"npo"!==d||authHelper.isPartiallyAuthenticated()?(c.retried=!0,commonCartAjax.createNewCart(c)):($(document).on("addToCartAfterLogoff",function(a,b){b.retried=!0;commonCartAjax.createNewCart(b)}),logoffHelper.logoffAjax({onSuccessEvent:"addToCartAfterLogoff",
successEventOptions:c})));a&&(overlayHelper.open(qVars.overlay.error,"overlayGenericErrorConfirm","pdp"),qSpinner.removeSpinner());qTagging.err.trigger(m);break;case "cartInitiate":if(204===f)this.enterCheckout(c);else{c=qMsgStorage.err.general.serviceError;if(400===f&&"object"===typeof d)switch(d.code){case "20001":c=qMsgStorage.err.addToCart.itemNoLongerAvailable;break;case "20006":c=qMsgStorage.err.addToCart.orderLimitProductInCart;break;default:c=qMsgStorage.err.general.serviceError}sessionStorage.setItem("cartMsg",
JSON.stringify({sType:"danger",sMsg:c}));qSpinner.removeSpinner();qOpenUrl(qVars.url.cart)}break;case "cartMerge":"undefined"!==typeof qVars.page&&"login"===qVars.page&&$(document).trigger("reAddLoginListener");403===f?commonCartAjax.createNewCart({purpose:"unauthorizedMerge"}):401===f?this.bRetryMerge||1!==$(".signInArea .btnContinue").length?this.relogin(c):(this.bRetryMerge=!0,$(document).on("retryAuthAndMerge",function(a,b){$(".signInArea .btnContinue").trigger("click")}),logoffHelper.authTokenDelAjax({onSuccessEvent:"retryAuthAndMerge",
successEventOptions:c})):400===f&&"object"===typeof d&&"10002"===d.code?this.relogin(c):400===f&&"object"===typeof d&&"90000"===d.code?(qCookie.remove("cartId"),qCookie.remove("cartQty"),commonCartAjax.createNewCart({purpose:"cartUnavailable"})):(sessionStorage.setItem("cartMsg",JSON.stringify({sOrigin:a.name,sType:"danger",sMsg:qMsgStorage.err.general.serviceError})),qOpenUrl(qVars.url.cart));break;case "cartCreate":this.bCreateCartCalled=!1;"undefined"!==typeof qVars.page&&"login"===qVars.page&&
$(document).trigger("reAddLoginListener");401===f&&($(document).on("createCartAfterLogoff",function(a,b){b.retried=!0;commonCartAjax.createNewCart(b)}),logoffHelper.logoffAjax({onSuccessEvent:"createCartAfterLogoff",successEventOptions:c}));break;default:"object"===typeof d&&"90000"===d.code?(qCookie.remove("cartId"),qCookie.remove("cartQty"),commonCartAjax.createNewCart({purpose:"cartUnavailable"})):($("body").hasClass("checkout")||"login"===qVars.page||0<$(".fancybox-overlay").length?(qMsg.showGlobalStatic(qMsgStorage.err.general.serviceError,
"danger"),qTagging.err.trigger(m)):overlayHelper.open(qVars.overlay.error,"overlayGenericErrorConfirm","pdp"),qSpinner.removeSpinner())}},relogin:function(a){"string"===typeof a.sContext&&-1<a.sContext.indexOf("speedbuy")?qOpenUrl(qVars.url.speedbuy):qOpenUrl("/checkout/login.html?resource\x3d"+qVars.url.orderReview.replace("{0}","reg"))},enterCheckout:function(a){if("string"===typeof a.sContext)switch(a.sContext){case "noLogin":"string"===typeof a.sPrevPagePath?qOpenUrl(a.sPrevPagePath):qOpenUrl(a.sOrderReviewPath);
break;case "yourInfoPage":checkoutHelper.redirectUser();break;case "signInSubmission":"string"===typeof a.sRedirect&&""!==a.sRedirect&&qOpenUrl(a.sRedirect.replace(/\/content\/qvc-commerce-[a-z][a-z]\/[a-z][a-z]\/checkout\//,"/checkout/"));break;case "yourInfoSubmission":qOpenUrl(qVars.url.shippingOptions.replace("{0}","npo"));break;case "speedbuyCart":checkoutHelper.containsProp65Code(a.cart)||checkoutHelper.containsQCardEZPay(a.cart)||checkoutHelper.hasWasteRecyclingFee(a.cart)||checkoutHelper.financedTotalLimit(a.cart)?
qOpenUrl(qVars.url.orderReview.replace("{0}","reg")):checkoutAjax.submitCart(a)}},init:function(){this.addListeners()}};$(function(){commonCartAjax.init()});
var cartCommonUtility=new ajaxUtility(commonCartAjax),speedBuyAjax={id:"speedBuy",submitted:!1,buy:function(a,b,c,d,f){this.submitted||(this.submitted=!0,a=addToCartHelper.createSku(a,b,c),speedBuyAjax.buySKU(a,d,f))},buySKU:function(a,b,c){b="number"===typeof b?b:"1";if("true"!==localStorage.getItem("dqFlag")&&qCookie.get(qCookie.name.globalUserId))speedBuyAjax.speedBuyProcessing(a,b,c);else{var d=qVars.url.speedbuy;d=urlManager.addParam(d,"sku",a);d=urlManager.addParam(d,"qty",b);d=urlManager.addParam(d,
"persText",c);qOpenUrl(d)}},buyCart:function(){if(!this.submitted){this.submitted=!0;var a=qVars.url.speedbuy;"true"!==localStorage.getItem("dqFlag")&&qCookie.get(qCookie.name.globalUserId)?speedBuyAjax.speedBuyProcessing("","",""):qOpenUrl(a)}},postLoginSpeedbuy:function(){var a=urlManager.getParam(window.location.search,"sku"),b=urlManager.getParam(window.location.search,"qty"),c=decodeURIComponent(urlManager.getParam(window.location.search,"persText"));speedBuyAjax.speedBuyProcessing(a,b,c)},speedBuyProcessing:function(a,
b,c){qCookie.set("promoCat","SPEEDBUY_CHECKOUT",{path:"/"});var d=qVars.ajax.speedbuy,f=null!==qCookie.get("aemCountryCode")?qCookie.get("aemCountryCode"):"us",m=qCookie.get(qCookie.name.qvcid1)?qCookie.get(qCookie.name.qvcid1):"";d=d.replace("{0}",f);""===a?commonCartAjax.mergeCart({sContext:"speedbuyCart"}):(d=d.replace("/{1}",""),b={cartItem:{sku:a,quantity:b,personalizationText:c},uniqueVisitorId:m},a={contentType:"application/json",headers:{"Order-Channel":commonCartAjax.sOrderChannel}},"object"===
typeof prefsBeacon&&(a.headers["x-device-transaction-id"]=prefsBeacon.send()),speedBuyAjax.utility.callSvc({name:"speedbuyPdp",method:"POST",manualSpinner:!0,svc:d,dataType:"json",json:b,options:a},{sContext:"speedbuyPdp"}))},doneHandler:function(a,b,c,d,f){this.submitted=!1;"undefined"!==typeof b.cartId&&qCookie.set(qCookie.name.cartId,b.cartId,365);if(null!==d.getResponseHeader("x-downtime-flag")&&"true"===d.getResponseHeader("x-downtime-flag"))qOpenUrl(qVars.url.cart);else if(checkoutAlertHelper.sContext=
f.sContext,checkoutAlertHelper.handleCartResponse(b),!checkoutAlertHelper.alertHandled())switch(a.name){case "speedbuyPdp":qCookie.set(qCookie.name.cartId,b.cartId,365),202===d.status?qOpenUrl(qVars.url.orderReview.replace("{0}","reg")):qOpenUrl(qVars.url.orderConfirm.replace("{0}","reg"))}},failHandler:function(a,b,c,d,f,m){this.submitted=!1;"undefined"!==typeof qVars.page&&"login"===qVars.page&&$(document).trigger("reAddLoginListener");c=b.responseJSON;d={elemId:oTaggingDefaults.elemId.errOrderIssue,
elemCat:oTaggingDefaults.elemCat.errCheckout,msg:"object"===typeof c&&c.message?c.message:oTaggingDefaults.msg.errGeneric,code:"object"===typeof c&&c.code?c.code:b.status};"object"===typeof c&&"90000"===c.code&&commonCartAjax.createNewCart({purpose:"cartUnavailable"});switch(a.name){case "speedbuyPdp":d.msg="ORDER NOT SUBMITTABLE - "+d.msg;if(400===b.status&&"object"===typeof b.responseJSON)switch(b.responseJSON.code){case "20007":if(-1<window.location.pathname.indexOf("login.speedbuy."))return sessionStorage.setItem("onLoadStaticMsgType",
"danger"),sessionStorage.setItem("onLoadStaticMsg",qMsgStorage.err.addToCart.dollarLimitExceeded),qTagging.err.trigger(d),qOpenUrl(document.referrer),!1;qMsg.showGlobalStatic(qMsgStorage.err.addToCart.dollarLimitExceeded,"danger");qSpinner.removeSpinner();break;case "30001":case "30002":case "30003":case "30004":case "30005":return sessionStorage.setItem("onLoadStaticMsgType","danger"),sessionStorage.setItem("onLoadStaticMsg",qMsgStorage.err.paymentMethod.spdPaymentAuthorization),qTagging.err.trigger(d),
qOpenUrl(document.referrer),!1;default:qMsg.showGlobalStatic(qMsgStorage.err.general.serviceError,"danger"),qSpinner.removeSpinner()}else if(401===b.status){b=qVars.url.speedbuy;"undefined"!==typeof a&&"undefined"!==typeof a.json&&"undefined"!==typeof a.json.cartItem&&(b=urlManager.addParam(b,"sku",a.json.cartItem.sku),b=urlManager.addParam(b,"qty",a.json.cartItem.quantity),b=urlManager.addParam(b,"persText",a.json.cartItem.personalizationText));qOpenUrl(b);break}else 500!==b.status&&503!==b.status||
commonCartAjax.addToCart({sContext:"speedbuyFallback",iQty:a.json.cartItem.quantity,sSku:a.json.cartItem.sku});qTagging.err.trigger(d)}}};$(function(){speedBuyAjax.utility=new ajaxUtility(speedBuyAjax)});
(function(a){a.fn.Accordion=function(b){var c=a.extend({initState:"expanded",slideInterval:400,fileLinesPreview:2},b);c.previewSettings={lg:200,md:200,sm:200,xs:200,tn:300};c.previewSettingsCat={lg:200,md:200,sm:200,xs:450,tn:400};c.fontOptions={min:12,max:24,step:2,curSize:16,defaultSize:16,cookieName:"pdfs"};c.previewList=".seoAccordion .accordion";c.expandList=".pdLongDesc .accLongDesc, .pdLongDesc .accDisclaimer";var d=this,f=d.children(),m=function(a){if(1200<=a)return"lg";if(1200>a&&960<=a)return"md";
if(960>a&&800<=a)return"sm";if(800>a&&640<=a)return"xs";if(640>a)return"tn"},p=function(b,c){b.data("busy",c);a(".shopCategory").data("busy",c)},h=function(b,d,f,g){sFileListStatus=a(".accordionFileMenu a",b).hasClass("less")?"expanded":"preview";if(!d.data("busy"))switch(d.data("busy",!0),sFileListStatus){case "preview":d.animate({height:f.outerHeight(!0)*g},c.slideInterval,function(){d.data("busy",!1)});break;case "expanded":d.animate({height:d.children("ul").prop("scrollHeight")},c.slideInterval,
function(){d.data("busy",!1)})}},t=function(a){qCookie.set(c.fontOptions.cookieName,a.toString(),{path:"/"})},g=function(){a(".accordionText",f).css("font-size",c.fontOptions.curSize+"px")},r=function(a){a=c.fontOptions.curSize+a*c.fontOptions.step;a<=c.fontOptions.max&&a>=c.fontOptions.min&&(c.fontOptions.curSize=a,v(),g(),t(a))},v=function(){a(".increaseSize",d).toggleClass("disabled",c.fontOptions.curSize>=c.fontOptions.max);a(".decreaseSize",d).toggleClass("disabled",c.fontOptions.curSize<=c.fontOptions.min)},
A=function(){a("a.qbox, plugin").each(function(b,c){b=a(this);-1<b.attr("href").indexOf("pim/glossary/")?b.replaceWith(b.text()):(b.removeClass("qbox"),b.addClass("fancybox"),-1<b.attr("href").indexOf(".html")&&b.addClass("fancybox.ajax"),b.fancybox(fancyBoxesAndTooltips.getFbDefaults()))})},G=function(){a(".shopCategory").each(function(){var b=a(this);X(b.find(".categoryTabs ul"));I(b);b.find(".categoryTabs li").click(function(c){c.preventDefault();a(this).hasClass("active")||b.data("busy")||b.data("single")||
(b.data("busy",!0),c=b.find(".tabUnderline"),c.length&&c.stop().animate({left:a(this).position().left,width:a(this).outerWidth()},300),c=a(this).text(),b.find(".categoryTabs li.active").removeClass("active"),a(this).addClass("active"),O(b,c))})})},X=function(b){var c=a('\x3cli class\x3d"tabUnderline"\x3e\x3c/li\x3e'),d=b.find(".active");d.length&&c.width(d.outerWidth()).css("left",d.position().left);b.append(c)},I=function(a){qViewport.is("\x3exs")&&a.find(".accordion_collapsed .accordionBox").css("display",
"none")},O=function(b,c){b.find(".accordion.accordion_preview,.accordion.accordion_expanded").each(function(){var b=a(this).find('.accordionTitle:contains("'+c+'")');if(0>=b.length||b.text()!==c)a(this).hasClass("active")&&a(this).removeClass("active"),a(this).find(".accordionTitle").click(),a(this).find(".accordionBox").css("display","none")});b.find('.accordionTitle:contains("'+c+'")').filter(function(){a(this).text()===c&&a(this).parents(".accordion").addClass("active")});b.find('.accordion.accordion_collapsed .accordionTitle:contains("'+
c+'")').filter(function(){a(this).text()===c&&(a(this).click(),a(this).siblings(".accordionBox").css("display","block"))})};this.initAdjustFontSize=function(){c.fontOptions.curSize=parseInt(qCookie.get(c.fontOptions.cookieName))||c.fontOptions.defaultSize;t(c.fontOptions.curSize.toString());d.prepend('\x3cdiv class\x3d"adjustFontSize"\x3e\x3cspan\x3e'+i18n.get("Adjust Text Size")+':\x3c/span\x3e\x3ca href\x3d"#" class\x3d"decreaseSize" title\x3d"-"\x3e\x3c/a\x3e\x3ca href\x3d"#" class\x3d"increaseSize" title\x3d"+"\x3e\x3c/a\x3e\x3c/div\x3e');
g();v()};this.setFileListLayout=function(b){var d=a(".accordionFiles",b),f=d.children(".accordionFileList"),g=f.find("li").eq(0);var p=f.children("ul").outerHeight(!0)/g.outerHeight(!0);"none"!==b.find(".accordionBox").css("display")&&(p<=c.fileLinesPreview?(h(b,f,g,p),f.removeClass("toggleFilelist")):p>c.fileLinesPreview&&(h(b,f,g,c.fileLinesPreview),f.addClass("toggleFilelist")));0===d.children(".accordionFileMenu").length&&d.append('\x3cdiv class\x3d"accordionFileMenu"\x3e\x3ca href\x3d"#"\x3e'+
i18n.get("Show_More")+"\x3c/a\x3e\x3c/div\x3e")};this.setEvents=function(){var b;a(".togglePreview a").click(function(a){a.preventDefault();d.clickTogglePreview(this)});a(".accordionFileMenu a").click(function(a){a.preventDefault();d.clickToggleFileList(this)});a(".increaseSize",d).click(function(a){a.preventDefault();r(1)});a(".decreaseSize",d).click(function(a){a.preventDefault();r(-1)});a(window).resize(function(){clearTimeout(b);b=setTimeout(function(){f.each(function(){var b=a(this);0<a(".accordionFiles ul li",
f).length&&d.setFileListLayout(b)});a(".shopCategory .categoryTabs").each(function(){var b=a(this).find("li.active");if(0<b.length){var c=a(this).find(".tabUnderline");c.length&&c.stop().animate({left:b.position().left,width:b.outerWidth()},100)}})},200)})};this.initAccordions=function(){f.each(function(b,g){b=a(this);g=b.data("initstate")?b.data("initstate"):c.initState;1!==f.length||"collapsed"!==g||b.hasClass("collapsedSingleAcc")||(g="expanded");1<f.length&&"expanded"===g&&!b.hasClass("expandedSingleAcc")&&
"easyPay"===b.attr("id")&&(g="collapsed");1!==f.length||b.hasClass("collapsedSingleAcc")||a(".accordionTitle",b).addClass("singleAccordion");"preview"===g&&(a(".accordionText",b).after('\x3cdiv class\x3d"fader"\x3e\x3c/div\x3e'),0<b.parents(".shopCategory").length?a(".accordionContent",b).after('\x3cdiv class\x3d"togglePreview"\x3e\x3ca href\x3d"#"\x3e'+i18n.get("Show_More")+"\x3c/a\x3e\x3c/div\x3e"):a(".accordionContent",b).after('\x3cdiv class\x3d"togglePreview"\x3e\x3ca href\x3d"#"\x3e'+i18n.get("Read_More")+
"\x3c/a\x3e\x3c/div\x3e"));0<a(".accordionFiles ul li",b).length&&d.setFileListLayout(b);b.data({curstate:g,busy:!0,single:1==f.length&&!b.hasClass("collapsedSingleAcc")});d.setTabState(b,g)});A()};this.setTabState=function(b,d){var f=b.data("curstate")?b.data("curstate"):c.initState,g=a("a.accordionTitle,button.accordionTitle",b);b.addClass("accordion_"+d).data("curstate",d);f!==d&&b.removeClass("accordion_"+f);switch(d){case "expanded":if("collapsed"===f)a(".accordionBox",b).slideDown(c.slideInterval,
function(){p(b,!1);a(".accordionBox",b).attr("aria-hidden","false")});else{var h=a(".accordionText",b).outerHeight(!0);a(".accordionBox",b).show().attr("aria-hidden","false");"preview"!==f?a(".fader, .togglePreview",b).fadeOut():a(".fader",b).hide();a(".accordionTextbox",b).animate({height:h},c.slideInterval,function(){a(this).css("height","auto");p(b,!1)})}break;case "preview":a(".accordionBox",b).slideDown();h=a(".accordionText",b).outerHeight(!0);f=c.previewSettings[m(a(window).width())];0<b.parents(".shopCategory").length&&
(f=c.previewSettingsCat[m(a(window).width())]);h>f?(a(".fader, .togglePreview",b).fadeIn(),a(".accordionTextbox",b).animate({height:f},c.slideInterval,function(){p(b,!1)})):(a(".fader, .togglePreview",b).hide(),p(b,!1));break;case "collapsed":a(".accordionBox",b).slideUp(c.slideInterval,function(){p(b,!1);a(".accordionBox",b).attr("aria-hidden","true")})}g.attr("aria-expanded","expanded"===d)};this.clickToggleFileList=function(b){b=a(b);var d=b.parent(".accordionFileMenu").prevAll(".accordionFileList"),
f=d.find("li").eq(0);d.data("busy")||(d.data("busy",!0),b.hasClass("less")?(d.animate({height:f.outerHeight(!0)*c.fileLinesPreview},c.slideInterval,function(){d.data("busy",!1)}),b.text(i18n.get("Show_More"))):(d.animate({height:d.prop("scrollHeight")},c.slideInterval,function(){d.data("busy",!1)}),b.text(i18n.get("Show_Less"))),b.toggleClass("less"))};this.clickTogglePreview=function(b){b=a(b);var c=b.parents(".accordion");if(!c.data("busy")){c.data("busy",!0);var f="";switch(c.data("curstate")){case "expanded":f=
"preview";b.text().includes(i18n.get("Show_Less"))?b.text(i18n.get("Show_More")):b.text(i18n.get("Read_More"));break;case "preview":f="expanded",b.text().includes(i18n.get("Show_More"))?b.text(i18n.get("Show_Less")):b.text(i18n.get("Read_Less"))}b.toggleClass("less");d.setTabState(c,f)}};this.loadExternalContent=function(b){b=a('\x3ca href\x3d"'+b+'"\x3e\x3c/a\x3e').prop("pathname");var c=a.Deferred();a.ajax({url:b,dataType:"html",success:function(a){c.resolve(a)},error:function(){c.resolve("\x3cp\x3e"+
i18n.get("An error occurred loading this content.")+"\x3c/p\x3e")}});return c.promise()};this.clickTabTitle=function(){G();f.each(function(){var b=a(this);a("a.accordionTitle,button.accordionTitle",b).click(function(c){c.preventDefault();c=a(this);var f=c.closest(".accordion");if(!b.data("busy")&&!b.data("single")){b.data("busy",!0);var g="";switch(b.data("curstate")){case "expanded":g="collapsed";break;case "preview":g="collapsed";break;case "collapsed":var h=a(".togglePreview a",b);g=0<h.length?
h.hasClass("less")?"expanded":"preview":"expanded"}f.hasClass("accDynamic")&&"undefined"!==typeof c.data("content-url")&&""!==c.data("content-url")?a.when(d.loadExternalContent(c.data("content-url"))).done(function(a){f.removeClass("accDynamic").find(".accordionText:first").html(a);d.setTabState(b,g);d.setFileListLayout(b)}):f.hasClass("accDynamic")&&"undefined"!==typeof c.data("content-ajax")&&c.data("content-ajax")?(c.on("accDynamic.done",function(){f.removeClass("accDynamic");d.setTabState(b,g);
d.setFileListLayout(b)}),c.trigger("accDynamic.load")):(d.setTabState(b,g),d.setFileListLayout(b))}a(window).trigger("scroll")})})};0<a(c.previewList).length&&a(c.previewList).attr("data-initstate","preview");0<a(c.expandList).length&&a(c.expandList).attr("data-initstate","expanded");d.initAccordions();a("body").hasClass("productDetail")&&d.initAdjustFontSize();d.setEvents();d.clickTabTitle();return this}})(jQuery);if("undefined"===typeof qAjaxCommon)var qAjaxCommon={};
$.extend(!0,qAjaxCommon,{resetStateSelect:function(a){$(".state select",a).val(null);$(".state li",a).removeClass("active");$(".state div[aria-label\x3dState] span",a).text("");$(".state .control-label",a).removeClass("floating")},address:{id:"checkout",overrideAddressStandardization:!1,prevBillingAddress:{},prevShippingAddress:{},countryHelper:{},submitted:!1,setShippingAddress:function(a){if(!this.submitted){this.submitted=!0;a={addressId:formsHelper.sanitizeVal(a.addressId)};var b=commonCartAjax.getId();
a={name:"setShippingAddress",method:"POST",svc:qVars.ajax.addShipAddr.replace("{0}",b),json:a,store:"session",options:{contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}}};qAjaxCommon.address.utility.callSvc(a)}},addShippingAddress:function(a){if(!this.submitted){this.submitted=!0;var b={title:formsHelper.sanitizeVal(a.title),firstName:formsHelper.sanitizeVal(a.firstName),lastName:formsHelper.sanitizeVal(a.lastName),address1:formsHelper.sanitizeVal(a.address1),address2:formsHelper.sanitizeVal(a.address2),
address3:formsHelper.sanitizeVal(a.address3),postCode:formsHelper.sanitizeVal(a.postCode,"postCode"),phoneNumber:formsHelper.sanitizeVal(a.phoneNumber),emailAddress:formsHelper.sanitizeVal(a.emailAddress),houseNumber:formsHelper.sanitizeVal(a.houseNumber),doorCode:formsHelper.sanitizeVal(a.doorCode),city:formsHelper.sanitizeVal(a.city),stateProvince:formsHelper.sanitizeVal(a.stateProvince),country:formsHelper.sanitizeVal(a.country),relationshipType:formsHelper.sanitizeVal(a.relationshipType),alternateNames:[{type:"kanaName",
name:formsHelper.sanitizeVal(a.kanaName)},{type:"kanaSurname",name:formsHelper.sanitizeVal(a.kanaSurname)}]},c=commonCartAjax.getId();c=$("body").hasClass("accountArea")?qVars.ajax.usersAddShippingAddress.replace("{0}",qCookie.get("globalUserId")):qVars.ajax.addShipAddr.replace("{0}",c);this.overrideAddressStandardization=this.overrideAddressStandardization&&qAddressHandling.addressesEqual(this.prevShippingAddress,b);a={name:"addShippingAddress",method:"POST",svc:this.overrideAddressStandardization?
urlManager.addParam(c,"overrideAddressStandardization","true"):c,json:b,store:"session",options:{contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}},extra:{sContext:a.sContext}};qAjaxCommon.address.utility.callSvc(a)}},editShippingAddress:function(a){if(!this.submitted){this.submitted=!0;var b=a.id,c={title:formsHelper.sanitizeVal(a.title),firstName:formsHelper.sanitizeVal(a.firstName),lastName:formsHelper.sanitizeVal(a.lastName),address1:formsHelper.sanitizeVal(a.address1),
address2:formsHelper.sanitizeVal(a.address2),postCode:formsHelper.sanitizeVal(a.postCode,"postCode"),phoneNumber:formsHelper.sanitizeVal(a.phoneNumber),emailAddress:formsHelper.sanitizeVal(a.emailAddress),houseNumber:formsHelper.sanitizeVal(a.houseNumber),doorCode:formsHelper.sanitizeVal(a.doorCode),city:formsHelper.sanitizeVal(a.city),stateProvince:formsHelper.sanitizeVal(a.stateProvince),country:formsHelper.sanitizeVal(a.country),relationshipType:formsHelper.sanitizeVal(a.relationshipType),workCompanyName:formsHelper.sanitizeVal(a.workCompanyName),
workDepartmentName:formsHelper.sanitizeVal(a.workDepartmentName),alternateNames:[{type:"kanaName",name:formsHelper.sanitizeVal(a.kanaName)},{type:"kanaSurname",name:formsHelper.sanitizeVal(a.kanaSurname)}]};b=qVars.ajax.usersShippingAddress.replace("{0}",qCookie.get("globalUserId")).replace("{1}",b);this.overrideAddressStandardization=this.overrideAddressStandardization&&qAddressHandling.addressesEqual(this.prevShippingAddress,c);a={name:"editShippingAddress",method:"PUT",svc:this.overrideAddressStandardization?
urlManager.addParam(b,"overrideAddressStandardization","true"):b,json:c,options:{contentType:"application/json"},extra:{sContext:a.sContext}};qAjaxCommon.address.utility.callSvc(a)}},editPhoneNumber:function(a){if(!this.submitted){this.submitted=!0;var b=[{type:a.type,phoneNumber:a.phoneNumber}];a={name:"editPhoneNumber",method:"PUT",svc:qVars.ajax.usersShipAddressPhoneNbr.replace("{0}",qCookie.get("cartId")),json:b,options:{contentType:"application/json",headers:{"If-Match":"undefined"!==typeof cartVars&&
"versionId"in cartVars?cartVars.versionId:""}},extra:{sContext:a.sContext}};qAjaxCommon.address.utility.callSvc(a)}},editBillingAddress:function(a){if(!this.submitted){this.submitted=!0;var b={title:formsHelper.sanitizeVal(a.title),firstName:formsHelper.sanitizeVal(a.firstName),lastName:formsHelper.sanitizeVal(a.lastName),address1:formsHelper.sanitizeVal(a.address1),address2:formsHelper.sanitizeVal(a.address2),postCode:formsHelper.sanitizeVal(a.postCode,"postCode"),phoneNumber:formsHelper.sanitizeVal(a.phoneNumber),
emailAddress:formsHelper.sanitizeVal(a.emailAddress),houseNumber:formsHelper.sanitizeVal(a.houseNumber),city:formsHelper.sanitizeVal(a.city),stateProvince:formsHelper.sanitizeVal(a.stateProvince),country:formsHelper.sanitizeVal(a.country)},c=commonCartAjax.getId();c=qVars.ajax.updateBillingAddress.replace("{0}",c);this.overrideAddressStandardization=this.overrideAddressStandardization&&qAddressHandling.addressesEqual(this.prevBillingAddress,b);a={name:"editBillingAddress",method:"POST",svc:this.overrideAddressStandardization?
urlManager.addParam(c,"overrideAddressStandardization","true"):c,json:b,store:"session",options:{contentType:"application/json",headers:{"If-Match":commonCartAjax.getCartVersionId()}},extra:{sContext:a.sContext}};qAjaxCommon.address.utility.callSvc(a)}},triggerAddressValidationTagging:function(a,b){qTagging.err.trigger({elemId:oTaggingDefaults.elemId.errAddressValidation,elemCat:"checkout"===b?oTaggingDefaults.elemCat.errCheckoutForm:oTaggingDefaults.elemCat.errAccSettings,msg:"object"===typeof a&&
a.message?a.message.toUpperCase():oTaggingDefaults.msg.errUnsupported,code:"object"===typeof a&&a.code?a.code+"":"NO CODE AVAILABLE"})},failHandler:function(a,b,c,d,f){this.submitted=!1;c=b.responseJSON;d=b.status;qSpinner.removeSpinner();if(400===d&&"object"===typeof c&&"30076"===c.code)this.overrideAddressStandardization=!0,qAddressHandling.handleDownTime("shipping"),this.prevShippingAddress=$.extend({},a.json),qMsg.showGlobalStatic(qMsgStorage.err.address.validationDowntime,"danger"),qSpinner.removeSpinner();
else if(400===d&&"object"===typeof c&&"30076"!==c.code||401===d||404===d||412===d){a=qMsgStorage.err.address.invalidData;if(400===d&&"object"===typeof c&&-1<c.message.indexOf("Only home address is the valid option for Cash on Delivery"))a=qMsgStorage.err.address.invalidDataForCodAndEmployee;else if(400===d&&"object"===typeof c&&-1<c.message.indexOf("Only home or work address are valid options for Cash on Delivery"))a=qMsgStorage.err.address.invalidDataForCod;else if(400===b.status)switch(c.code){case "10003":a=
qMsgStorage.err.address.invalidPhoneNbr;break;case "10040":a=qMsgStorage.err.address.invalidHouseNumber;this.triggerAddressValidationTagging(c,"checkout");break;case "10041":a=qMsgStorage.err.address.invalidStreet;this.triggerAddressValidationTagging(c,"checkout");break;case "10042":a=qMsgStorage.err.address.invalidAddressExtension;this.triggerAddressValidationTagging(c,"checkout");break;case "10043":a=qMsgStorage.err.address.invalidCity;this.triggerAddressValidationTagging(c,"checkout");break;case "10044":a=
qMsgStorage.err.address.invalidZipCode,this.triggerAddressValidationTagging(c,"checkout")}qMsg.showGlobalStatic(a,"danger")}else qMsg.showGlobalStatic(qMsgStorage.err.general.serviceError,"danger")},doneHandler:function(a,b,c,d){this.submitted=!1;var f=b.addressId;switch(a.name){case "setShippingAddress":"order-review"===qVars.page?(qMsg.showGlobalDismissable(qMsgStorage.success.orderReview.shippingAddressUpdate,"success",{bIsTimed:!0}),qContent.refresh()):(sessionStorage.setItem("orderReviewMsg",
"orderReview|shippingAddressUpdate"),qOpenUrl(qVars.url.orderReview.replace("{0}",commonCartAjax.getCheckoutType())));break;case "addShippingAddress":202===d.status?(this.overrideAddressStandardization=!0,qAddressHandling.handleDownTime("shipping"),this.prevShippingAddress=$.extend({},a.json),qMsg.showGlobalStatic(qMsgStorage.err.address.validationDowntime,"danger"),qSpinner.removeSpinner()):($.fancybox.close(!0),$("body").hasClass("accountArea")?$(document).trigger("user.addShipping",JSON.stringify(b)):
qContent.refresh({doneHandler:function(){qMsg.showGlobalDismissable(qMsgStorage.success.shippingAddress.shippingAddressAdd,"success",{bIsTimed:!0});$("input[value\x3d"+f+"]").trigger("click")}}));break;case "editShippingAddress":202===d.status?(this.overrideAddressStandardization=!0,qAddressHandling.handleDownTime("shipping"),this.prevShippingAddress=$.extend({},a.json),qMsg.showGlobalStatic(qMsgStorage.err.address.validationDowntime,"danger"),qSpinner.removeSpinner()):($.fancybox.close(!0),a={doneHandler:function(){qMsg.showGlobalDismissable(i18n.get("Your Shipping Address has been updated."),
"success",{bIsTimed:!0});$("input[value\x3d"+f+"]").trigger("click")}},"order-review"===qVars.page&&(a.sections=[".contentCartVars",".shipOptions",".billAddress"]),qContent.refresh(a));break;case "editBillingAddress":c="editShipAddrOverlay"===a.extra.sContext?"shipping":"billing";202===d.status?($(".qMsgOuterWr").remove(),qSpinner.removeSpinner(),this.overrideAddressStandardization=!0,qAddressHandling.init(b,c),this.prevBillingAddress=$.extend({},a.json),"object"===typeof formsHelper&&"function"===
typeof formsHelper.detectCountry&&(this.countryHelper=formsHelper.detectCountry(this.prevBillingAddress.postCode,$(".billing .country")),$(".state, .townAndCity, .country").removeClass("hidden"))):"editBillAddrOverlay"===a.extra.sContext?($.fancybox.close(!0),qContent.refresh(),"order-review"===qVars.page?qMsg.showGlobalDismissable(qMsgStorage.success.orderReview.billingAddressUpdate,"success",{bIsTimed:!0}):sessionStorage.setItem("orderReviewMsg","orderReview|billingAddressUpdate")):"editShipAddrOverlay"===
a.extra.sContext&&($.fancybox.close(!0),a={doneHandler:function(){qMsg.showGlobalStatic(i18n.get("Your address has been updated."),"success",{bIsTimed:!0})}},"order-review"===qVars.page&&(a.sections=[".contentCartVars",".shipOptions",".billAddress"]),qContent.refresh(a));break;case "editPhoneNumber":201===d.status&&($.fancybox.close(!0),a={doneHandler:function(){qMsg.showGlobalDismissable(i18n.get("Your Shipping Address has been updated."),"success",{bIsTimed:!0})}},"order-review"===qVars.page?a.sections=
[".contentCartVars",".shipToCont",".billAddress"]:(b=cartStorageHelper.get(commonCartAjax.getId(),cartStorageHelper.name.checkoutPath),sessionStorage.setItem("edit-phone-success","true"),qOpenUrl(qVars.url.orderReview.replace("{0}",b?b:"reg"))),qContent.refresh(a))}}}});qAjaxCommon.address.utility=new ajaxUtility(qAjaxCommon.address);
var cartStorageHelper={name:{cartSubmitted:"cartSubmitted",checkoutPath:"checkoutPath",checkoutType:"checkoutType",eQuickScreenAppApproved:"eQuickScreenAppApproved",eQuickScreenCreditLimit:"eQuickScreenCreditLimit",eQuickScreenCreditLineAmount:"eQuickScreenCreditLineAmount",eQuickScreenDiscountAmount:"eQuickScreenDiscountAmount",eQuickScreenOfferApproved:"eQuickScreenOfferApproved",expressGetPassword:"expressGetPassword",orderNumbers:"orderNumbers",passwordExists:"passwordExists",qCardPaymentMethod:"qCardPaymentMethod",
refundSelection:"refundSelection",specialFinancingEligibilityApproved:"specialFinancingEligibilityApproved",specialFinancingEligibilityDenied:"specialFinancingEligibilityDenied",specialFinancingEligibilityFailure:"specialFinancingEligibilityFailure",specialFinancingEligibilityStandIn:"specialFinancingEligibilityStandIn",restrictedShipping:"restrictedShipping",restrictedItemSkn:"restrictedItemSkn",isFullPayOnly:"isFullPayOnly"},set:function(a,b,c){a=this.getObject(a);a[b]=c;localStorage.setItem("cartStorage",
JSON.stringify(a))},get:function(a,b){return this.getObject(a)[b]},remove:function(a,b){a=this.getObject(a);delete a[b];localStorage.setItem("cartStorage",JSON.stringify(a))},clear:function(){localStorage.removeItem("cartStorage")},getObject:function(a){var b=JSON.parse(localStorage.getItem("cartStorage"));b&&b.cartId===a||(this.clear(),b={cartId:a});return b}},brandListing={init:function(){$("#alphaLinks a").click(function(a){a.preventDefault();$(this).hasClass("inactive")||(a=$(this).attr("href"),
qScroll.toElement(".brandLetter h3"+a),$(".brandLetter h3"+a).focus())});$(".brandLetter a").each(function(a){if(null!==$(this).attr("href")){var b=$(this).attr("href").split("?")[0];b+="/c.html"}$(this).attr("href",b)})}},qvcCarousel={isBusy:!1,lazyTimer:null,reArrow:function(a){var b=this;qvcCarousel.isBusy||$(".carouselWrapper").each(function(c,d){c=$(this);if(0<c.closest(".ftdChannels").length)return!0;d=c.children(".carouselList");var f=c.width();f=d.width()-f;c.closest(".qvcCarousel").hasClass("productCarouselGallery")?
"scroll"!==a&&b.gallery.update(d):(0>=c.scrollLeft()?c.siblings(".carArrow.left").addClass("inactive"):c.siblings(".carArrow.left.inactive").removeClass("inactive"),c.scrollLeft()>=f-2?c.siblings(".carArrow.right").addClass("inactive"):c.siblings(".carArrow.right.inactive").removeClass("inactive"))})},firstProd:function(a,b,c){for(i=0;i<a.length;i++){var d=$(a[i]);d=parseInt(d.css("padding-left"))+Math.floor(d.position().left);var f=d+c;if(d<=b+10&&f>=b)return d}},lastProd:function(a,b){for(i=0;i<
a.length;i++){var c=$(a[i]);c=parseInt(c.css("padding-left"))+Math.ceil(c.position().left);if(c>=b-10)return c}},carScroll:function(a,b){if(!qvcCarousel.isBusy){var c=0,d=$(b).closest(".carArrow").siblings(".carouselWrapper"),f=d.children(".carouselList");c=f.children(".carouselItem");b=d.width();var m=c.outerWidth(),p=f.width()-b;f=d.scrollLeft()+b-m;if("left"===a){if(0>=d.scrollLeft()){d.siblings(".carArrow.left").addClass("inactive");d.siblings(".carArrow.right.inactive").removeClass("inactive");
return}c=qvcCarousel.firstProd(c,d.scrollLeft(),m);c=c+m-b;0>c&&(c=0)}else if("right"===a){if(d.scrollLeft()>=p-2){d.siblings(".carArrow.right").addClass("inactive");d.siblings(".carArrow.left.inactive").removeClass("inactive");return}c=qvcCarousel.lastProd(c,f);c>p&&(c=p)}else return;qvcCarousel.isBusy=!0;d.animate({scrollLeft:c},500,function(){qvcCarousel.isBusy=!1;0>=d.scrollLeft()?(d.siblings(".carArrow.left").addClass("inactive"),d.siblings(".carArrow.right.inactive").removeClass("inactive")):
d.scrollLeft()>=p-2?(d.siblings(".carArrow.right").addClass("inactive"),d.siblings(".carArrow.left.inactive").removeClass("inactive")):d.siblings(".carArrow.inactive").removeClass("inactive")})}},carScrollToItem:function(a){if(!qvcCarousel.isBusy){var b=a.closest(".carouselWrapper"),c=b.width(),d=b.find(".carouselItem"),f=d.eq(0).width(),m=0;d.map(function(a,b){m+=$(b).outerWidth()});d=m-f;var p=b.scrollLeft();a=parseInt(a.css("padding-left"))+Math.ceil(a.position().left);var h=0;if(a<p)h=a;else if(a+
f>p+c)h=a-c+f;else return;0>h&&(h=0);h>d&&(h=d);qvcCarousel.isBusy=!0;b.animate({scrollLeft:h},500,function(){qvcCarousel.isBusy=!1;qvcCarousel.reArrow()})}},initCustomButton:function(){$(".savedItemsCarousel").each(function(){var a=$(this),b=a.data("cart-url"),c=a.data("cart-wcs-url");a.closest("section").find('[data-component-type\x3d"STYLED_BUTTON"] a').each(function(){var a=$(this);if("/checkout/cart.html#saveditems"===a.attr("href"))a.on("click.qCarousel",function(a){a.preventDefault();var d=
qVars.feature.aemCheckout?b+"#saveditems":c;setTimeout(function(){window.location.href=d},50)})})})},gallery:function(){function a(a,c){a.find(".galleryButtonNumber").text(" ("+c.filter(".hide").length+")").end()}return{init:function(){this.update();$(document).on("click",'[data-module-type\x3d"PRODUCT_CAROUSEL"] .galleryButton',function(b){var c=$(this),d=c.closest(".qModule"),f=d.find(".productCarouselGalleryList").find(".productCarouselGalleryItem"),m=c.siblings(".galleryButton");b.preventDefault();
c.hasClass("galleryShowMoreButton")?f.removeClass("hide"):(f.slice(4).addClass("hide"),a(m,f));c.addClass("hide");m.removeClass("hide");d.focus()})},update:function(b){b||(b=$(".productCarouselGalleryList"));b.each(function(){var b=$(this),d=b.find(".productCarouselGalleryItem"),f=b.closest(".qModule"),m=b.closest(".productCarousel").find(".galleryButtons"),p=f.find('[data-component-type\x3d"STYLED_BUTTON"]'),h=p.find('[data-component-type\x3d"BUTTON"]'),t=h.find("a").not(".galleryButton");f.attr("tabindex",
-1);f=h.length?h.find("div").first():p.find(".col-tn-12");p=f.find(".galleryShowMoreButton");h=f.find(".galleryShowLessButton");f.find(".galleryButton").length||(m.clone(!0).prependTo(f).find("a").unwrap(),f.addClass("galleryButtons"),t.addClass("galleryAuthoredButton"));d.addClass("hide");t.removeClass("hide");p.addClass("hide");h.addClass("hide");4>=d.length?d.removeClass("hide"):b.hasClass("productCarouselGalleryListCollapsed")?(d.slice(0,4).removeClass("hide"),a(p,d),p.removeClass("hide")):(d.removeClass("hide"),
h.removeClass("hide"))})}}}(),init:function(){var a=this;$(document).on("click.qCarousel",".qvcCarousel .carArrow a,.qvcCarousel .carArrow button",function(b){b=$(this).closest(".carArrow").hasClass("left")?"left":"right";a.carScroll(b,this)});a.reArrow();a.initCustomButton();a.gallery.init()}},carouselArrow;$(".carouselWrapper").scroll(function(a){clearTimeout(carouselArrow);carouselArrow=setTimeout(function(){qvcCarousel.reArrow("scroll")},200)});
var carouselApiDriven={getImageUrl:function(a){var b=a.baseImageUrl.replace("http://","https://");if(a.assets&&a.assets.length)for(var c=0;c<a.assets.length;c++){var d=a.assets[c];if("image"===d.type)return b+d.url+"?$aemprodcarousellg$"}return b+a.productNumber.toLowerCase()+".001?$aemprodcarousellg$"},getPrice:function(a,b,c){var d="";"undefined"!==typeof a&&(d=currencyFormat.format(a.toFixed(2)),"undefined"!==typeof b&&b>a&&(d+=" - "+currencyFormat.format(b.toFixed(2))),"undefined"!==typeof c&&
(d+="/"+c));return d},getDataInt:function(a,b,c){a=parseInt(a.data(b));return isNaN(a)?c:a},getProductUrl:function(a,b,c,d,f){a=urlManager.addParam("/qvc.product."+a+".html","recommendationTypeId","QDATA");a=urlManager.addParam(a,"recommendationLocation",b);a=urlManager.addParam(a,"recommendationModuleType",c);a=urlManager.addParam(a,"sc",d);return a=urlManager.addParam(a,"referringItem",f)},getReviewsWidthPercent:function(a){var b=parseFloat(a);return(isNaN(b)?0:parseFloat(a)/5*100)+"%"},getLocalStorageItem:function(a){try{return localStorage.getItem(a)}catch(b){}},
setLocalStorageItem:function(a,b){try{localStorage.setItem(a,b)}catch(c){}},clearLocalStorageItem:function(a){try{localStorage.removeItem(a)}catch(b){}},createCarouselItem:function(a,b,c){var d=a.shortDescription+" - "+a.productNumber,f=carouselApiDriven.getImageUrl(a),m=carouselApiDriven.getPrice(a.pricing.currentMinimumSellingPrice,a.pricing.currentMaximumSellingPrice),p="";a.pricing.currentMinimumSellingPrice!==a.pricing.qvcMinimumPrice&&(p=carouselApiDriven.getPrice(a.pricing.qvcMinimumPrice,
a.pricing.qvcMaximumPrice));var h=$("\x3cp /\x3e").addClass("productPrice");h.append($("\x3cspan /\x3e").addClass("priceSell").text(m));!0!==a.pricing.supressQvcPriceIndicator&&""!==p&&h.append($("\x3cspan /\x3e").addClass("priceOld").text(p));m=$("\x3cdiv /\x3e");a.reviews&&"undefined"!==typeof a.reviews.count&&"undefined"!==typeof a.reviews.averageRating&&(m.addClass("productRatings").append($("\x3cdiv /\x3e").addClass("stars").attr("title",a.reviews.averageRating+" of 5 Stars").append($("\x3cspan /\x3e").width(carouselApiDriven.getReviewsWidthPercent(a.reviews.averageRating)))),
0!==a.reviews.count&&m.append($("\x3cspan /\x3e").addClass("productNumberOfReviews").text("("+a.reviews.count+")")));p=$("\x3cdiv /\x3e").addClass("carouselItem").addClass(c.isGalleryLayout?"productCarouselGalleryItem col-tn-6 col-sm-3 hide":"col-sm-2");b=$("\x3ca /\x3e").attr("href",b);b.append($("\x3cdiv /\x3e").addClass("productImg").append($("\x3cdiv /\x3e").addClass("lazyWrap").css("padding-bottom","88.9%").append($("\x3cimg /\x3e").addClass("lazy").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d").attr("data-src",
f).attr("alt",d).attr("title",d))));c.showAdditionalInfo&&(c.showBrands&&b.append($("\x3cp /\x3e").addClass("productTitle").text(a.brandName)),b.append($("\x3cp /\x3e").addClass("productDesc").text(a.shortDescription)).append(h),c.showRatings&&b.append(m));p.append(b);return p},callRouteGetCollectionData:function(a,b){carouselApiDriven.carouselApiUtility.callSvc($.extend({},carouselApiDriven.apiAjax.routeGetCollectionData,{collectionId:a,collectionName:b.collectionName,target:b.target}))},callGetCollectionId:function(a){a.attempted=
!0;carouselApiDriven.carouselApiUtility.callSvc(a)},apiAjax:{id:"carouselWishlist",routeGetCollectionsWishlist:{name:"GetCollections",svc:"/api/sales/presentation/v1/{countryCode}/users/{globalUserId}/collections",suppressSpinner:!0,collectionName:"WISHLIST",target:".wishlistCarousel",storeName:"carouselApiDrivenWishlistId",attempted:!1},routeGetCollectionsSavedItems:{name:"GetCollections",svc:"/api/sales/presentation/v1/{countryCode}/users/{globalUserId}/collections",suppressSpinner:!0,collectionName:"Saved Items",
target:".savedItemsCarousel",storeName:"carouselApiDrivenSavedItemsId",attempted:!1},routeGetCollectionData:{name:"GetCollectionData",svc:"/api/sales/presentation/v1/{countryCode}/users/{globalUserId}/collections/{collectionId}/elements",suppressSpinner:!0,data:{size:25}},failHandler:function(a,b,c,d,f){a&&b&&"GetCollectionData"===a.name&&400<=b.status&&(b=carouselApiDriven.apiAjax.routeGetCollectionsWishlist,c=carouselApiDriven.apiAjax.routeGetCollectionsSavedItems,a.collectionName===b.collectionName?
(carouselApiDriven.clearLocalStorageItem(b.storeName),b.attempted||carouselApiDriven.callGetCollectionId(b)):a.collectionName===c.collectionName&&(carouselApiDriven.clearLocalStorageItem(c.storeName),c.attempted||carouselApiDriven.callGetCollectionId(c)))},doneHandler:function(a,b,c,d){if("GetCollections"===a.name){if(b&&b.collections&&b.collections.length)for(c=0;c<b.collections.length;c++)if(d=b.collections[c],d.name.toLowerCase()===a.collectionName.toLowerCase())var f=d.id;f&&(carouselApiDriven.setLocalStorageItem(a.storeName,
f),carouselApiDriven.callRouteGetCollectionData(f,a))}else if("GetCollectionData"===a.name&&b.elements&&b.elements.length){var m="undefined"!==typeof product&&"undefined"!==typeof product.id,p=m?product.id:"";a=$(a.target);$.each(a,function(a,c){a=$(c);c=a.find(".carouselList");var d=[],f=a.closest("[data-shopping-category]").data("shopping-category");f="string"===typeof f?f:m?"DTLR":"";var h=a.closest("[data-module-type]"),t=h.data("module-type");t="string"===typeof t?t:"";for(var G=carouselApiDriven.getDataInt(a,
"dynamic-min",1),X=carouselApiDriven.getDataInt(a,"dynamic-max",20),I=1,O=0;O<b.elements.length;O++){var H=b.elements[O].data;if("Y"===(H.items&&1===H.items.length?H.items[0].ats:"N")){var ha=carouselApiDriven.getProductUrl(H.productNumber,I++,t,f,p),L={showAdditionalInfo:!0===a.data("show-additional-info"),isGalleryLayout:a.closest(".qvcCarousel").hasClass("productCarouselGallery")};L.showAdditionalInfo&&(L.showBrands=!0===a.data("show-brands"),L.showRatings=!0===a.data("show-ratings"));d.push(carouselApiDriven.createCarouselItem(H,
ha,L));if(d.length>=X)break}}c.length&&d.length>=G&&(c.empty().append(d),a.addClass("isActive"),a.closest("section").removeClass("hideModule").css("display",""),qvcCarousel.reArrow(),c=h.find('[data-component-type\x3d"HEADER_TEXT"] h2, [data-component-type\x3d"HEADER_TEXT"] h1').text(),c=qString.condenseForTag(c),(a.is(carouselApiDriven.apiAjax.routeGetCollectionsWishlist.target)||a.is(carouselApiDriven.apiAjax.routeGetCollectionsSavedItems.target))&&qTagHelper.fireBasicLinkClickTag(null,"USER_HISTORY-_-"+
c+"-_-IS_ACTIVE"))})}},alwaysHandler:function(a,b,c,d){},URLHandler:function(a){var b=qVars.format.countryCode,c=qCookie.get(qCookie.name.globalUserId);if(!b||!c)return!1;a.svc=a.svc.replace("{countryCode}",b);a.svc=a.svc.replace("{globalUserId}",c);"GetCollectionData"===a.name&&(a.svc=a.svc.replace("{collectionId}",a.collectionId));return!0}},init:function(){var a=qCookie.get("wcmmode");if("edit"!==a&&"preview"!=a){var b=$(this.apiAjax.routeGetCollectionsWishlist.target),c=0<b.length;a=$(this.apiAjax.routeGetCollectionsSavedItems.target);
var d=0<a.length;if(c||d)this.carouselApiUtility=new ajaxUtility(this.apiAjax),c&&(b.closest("section").hide(),(b=this.getLocalStorageItem(this.apiAjax.routeGetCollectionsWishlist.storeName))?this.callRouteGetCollectionData(b,this.apiAjax.routeGetCollectionsWishlist):this.callGetCollectionId(this.apiAjax.routeGetCollectionsWishlist)),d&&(a.closest("section").hide(),(a=this.getLocalStorageItem(this.apiAjax.routeGetCollectionsSavedItems.storeName))?this.callRouteGetCollectionData(a,this.apiAjax.routeGetCollectionsSavedItems):
this.callGetCollectionId(this.apiAjax.routeGetCollectionsSavedItems))}}},oQvcChannelFinder=function(){var a=$(".channelFinderSearchForm"),b=a.find("form"),c=$(".channelFinderResults"),d,f="layer",m="QVC",p="",h="",t=function(a){m="undefined"!==typeof a?a:""!==m?m:"QVC"},g=function(){c.find(".selected").removeClass("selected");c.find(".dropDownMenu span").html(c.find('li[data-channelcode\x3d"'+m+'"]').addClass("selected").text());c.find("select").val(m)},r=function(a){var b="";c.find("span.zip").html(h);
"undefined"!==typeof a&&$.each(a.channel,function(a,c){b+="\x3ctr\x3e\x3ctd\x3e{P}\x3c/td\x3e\x3ctd\x3e{S}\x3c/td\x3e\x3ctd\x3e{H}\x3c/td\x3e\x3c/tr\x3e".replace("{P}","undefined"!==typeof c.providerName&&""!==c.providerName?c.providerName:"-").replace("{S}","undefined"!==typeof c.standardDefinitionNumber&&""!==c.standardDefinitionNumber?c.standardDefinitionNumber:"-").replace("{H}","undefined"!==typeof c.highDefinitionNumber&&""!==c.highDefinitionNumber?c.highDefinitionNumber:"-")});c.find(".error").toggleClass("hidden",
""!==b);""!==b?c.find("tbody").html(b).parent().show():c.find("table").hide()},v=function(){if("layer"===f)if($.fancybox.isOpen)$(".fancybox-inner").find(".channelFinderResults").replaceWith(c),$.fancybox.update();else{var a=fancyBoxesAndTooltips.getFbDefaults(fancyBoxesAndTooltips.getDeviceType());$.fancybox($.extend(!0,{},a,{type:"inline",content:c}))}else c.is(":hidden")&&c.slideDown(700)},A=function(){h=b.find("[name\x3dzipCode]").val();g();d.form()&&(a.toggleClass("busy",!0),$.ajax({type:"get",
dataType:"json",async:!0,cache:!0,url:p.replace("[0]",h).replace("[1]",m),success:function(a){"undefined"!==typeof a.channel&&(r(a),v())},error:function(){r();console.error("Channel Finder Error: _sendRequest")},complete:function(){v();a.toggleClass("busy",!1)}}))},G=function(){var a=i18n.get("The Zip Code you entered did not contain right amount of digits.");$.validator.addMethod("validateZipCode",function(a,b){return/^\d{5}$/.test(a)},i18n.get("The Zip Code you entered was not a number."));d=b.validate({rules:{zipCode:{required:!0,
minlength:5,maxlength:5,validateZipCode:!0}},messages:{zipCode:{minlength:a,maxlength:a}},highlight:function(a){$(a).parents(".form-group").addClass("has-error")},unhighlight:function(a){$(a).parents(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block small",errorPlacement:function(a,b){b.parents(".form-group").append(a)}})},X=function(){a.find("button").click(function(){m="QVC";g();A()});a.find("form").on("submit",function(a){a.preventDefault();m="QVC";g();A()});c.find(".close button").click(function(){"layer"===
f?$.fancybox.close():c.slideUp(700)});c.find(".dropDownMenu li a").click(function(a){a.preventDefault();t($(this).parent().data("channelcode"));A()});c.find(".dropDownMenu select").off("change").on("change",function(a){a.preventDefault();t($(this).val());A()})};return{init:function(){f=a.length&&"undefined"!==typeof a.data("mode")?a.data("mode"):f;p=a.length&&"undefined"!==typeof a.data("channel-finder-uri")?a.data("channel-finder-uri"):p;""!==p?(t(),g(),G(),X()):a.remove()}}}(),checkoutAlertHelper=
function(){var a="",b=!1,c=function(){"CUSTOMER_ACCOUNT_DELINQUENT"===a&&(b=!0,qOpenUrl(qVars.url.dqNotification));if("CART_MERGE_OCCURRENCE"===a){b=!0;var c="\x3cp\x3e"+qMsgStorage.err.addToCart.cartMerged+"\x3c/p\x3e"+overlayHelper.wrapElement(overlayHelper.createLinkHtml({sClass:"btnContinue btn-block",sHref:"/checkout/cart.html"}),{sWrColCLass:"col-tn-12"});overlayHelper.openGeneratedContentOverlay("errorMsgOverlay","cartMerge",c,i18nMapMsg.error["Additional items added"],"mobile"!==fancyBoxesAndTooltips.getDeviceType()?
{oCustomOverlayOptions:{width:300,height:180}}:{})}"PAYMENT_METHOD_REQUIRED"===a&&"yourInfoPage"!==checkoutAlertHelper.sContext&&qVars.feature.noPayMethodShowOptions&&(b=!0,qOpenUrl(qVars.url.paymentOptions.replace("{0}","reg")));c="CVV_ENTRY_REQUIRED SHIPPING_RESTRICTION_FOR_CART_ITEMS SHIPPING_ADDRESS_SELECTION_REQUIRED SHIPPING_OPTIONS_SELECTION_REQUIRED BILLING_ADDRESS_COUNTRY_CHECKOUT_RESTRICTION CART_MERGE_CUSTOMER_ITEM_LIMIT_EXCEEDED CREDIT_CARD_EXPIRED REFUND_PAYMENT_METHOD_REQUIRED NEGATIVE_CUSTOMER_STATUS EASY_PAY_NOTIFICATION".split(" ");
"speedbuyPdp"!==checkoutAlertHelper.sContext&&"speedbuyCart"!==checkoutAlertHelper.sContext||-1===$.inArray(a,c)||(b=!0,qOpenUrl(qVars.url.orderReview.replace("{0}","reg")))},d=function(b){a="undefined"!==typeof b&&$.isArray(b.validationAlerts)&&"undefined"!==typeof b.validationAlerts[0].code?b.validationAlerts[0].code:""};return{init:function(a){return d(a)},canSubmitCart:function(){return""===a},handleAlerts:function(){return c()},handleCartResponse:function(a){"undefined"!==typeof a&&(d(a),c())},
alertHandled:function(){return b}}}();$(function(){"undefined"!==typeof cart&&checkoutAlertHelper.init(cart)});
var coreCarousel={isBusy:!1,resizeTimer:null,slide:function(a,b){this.isBusy=!0;var c=this,d=!1,f=b.find(".carousel-list"),m=f.children("[data-component-type]"),p=f.outerWidth(),h=f.scrollLeft(),t,g=0;m.filter(":visible").each(function(){var b=$(this),c=b.outerWidth(),f="left"===a?Math.floor(b.position().left):Math.ceil(b.position().left),g="left"===a?Math.ceil(c+f):Math.floor(c+f);if("left"===a&&1>=f&&g<=Math.ceil(c))return t=b,d=!0;if("right"===a&&f>=Math.ceil(p-c)&&g>=p)return t=b,!1;if(d)return!1});
var r=t.index();0===r?g=0:r===m.length-1?g=c.getScrollMax(b):"left"===a?(m=t.position().left,g=p-t.outerWidth(),g=h+m-g):"right"===a&&(g=h+t.position().left);f.animate({scrollLeft:g},400,function(){c.isBusy=!1;c.reArrow(b)})},getScrollMax:function(a){a=a.find(".carousel-list");return a.get(0).scrollWidth-a.outerWidth()},arrows:function(a){var b=$(a).closest(".carArrow").hasClass("left")?"left":"right";this.slide(b,$(a).closest("[data-carousel-amt].carousel"))},reArrow:function(a){var b=this;b.isBusy||
("undefined"!==typeof a?a:$("[data-carousel-amt].carousel")).each(function(){var a=$(this),d=a.find(".carousel-list"),f=b.getScrollMax(a);0>=d.scrollLeft()?a.find(".carArrow.left").addClass("inactive"):a.find(".carArrow.left.inactive").removeClass("inactive");d.scrollLeft()>=f-2?a.find(".carArrow.right").addClass("inactive"):a.find(".carArrow.right.inactive").removeClass("inactive")})},init:function(){var a=this;$(document).on("click.coreCarousel","[data-carousel-amt].carousel .carArrow button",function(b){a.arrows(this)});
$(window).on("resize.coreCarousel",function(){clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){a.reArrow()},200)});a.reArrow()}},start120Countdown=function(){function a(a){a;$.ajax({type:"GET",url:a,success:function(a){a=$(a);$("#feature-item").replaceWith(a.find("#feature-item"));$("#featured-content").replaceWith(a.find("#featured-content"));$("#featured-gallery").replaceWith(a.find("#featured-gallery"));c=!1}})}var b,c=!1;return function(d,f){clearInterval(b);var m=d,p=(new Date).getTime();
b=setInterval(function(){var h=Math.floor((Date.now()-p)/1E3);if(0===m&&!c)clearInterval(b),m=-1,c=!0,setTimeout(a(f),750);else if(m!==d-h){m=d-h;h=m;if(0>=h)h={hoursLeft:0,minutesLeft:0,secondsLeft:0};else{for(var t=Math.floor(h/3600);3600<=h;)h-=3600;for(var g=Math.floor(h/60);60<=h;)h-=60;h={hoursLeft:t,minutesLeft:g,secondsLeft:h}}g=h;h=g.hoursLeft.toString();1===h.length&&(h="0".concat(h));t=g.minutesLeft.toString();g=g.secondsLeft.toString();1===t.length&&(t="0".concat(t));1===g.length&&(g=
"0".concat(g));h=h+":"+t+":"+g;t=$(".countDyn");for(g=0;g<t.length;g++)t[g].innerHTML=h}},250)}}(),countdownTimer={updateTime:function(a,b,c){var d=this,f=a.find('[data-count-down\x3d"hr"]'),m=a.find('[data-count-down\x3d"min"]'),p=a.find('[data-count-down\x3d"sec"]');if(0>=b)f.text("00"),m.text("00"),p.text("00"),c&&setTimeout(function(){d.updateTime(a,c,c)},1E3);else{var h=Math.floor(b/60/60),t=Math.floor(b/60)%60,g=b%60,r="0",v="0",A="0";10<=h&&(r="");10<=t&&(v="");10<=g&&(A="");f.text(r+h);m.text(v+
t);p.text(A+g);--b;0<=b?setTimeout(function(){d.updateTime(a,b,c)},1E3):(f.text("00"),m.text("00"),p.text("00"),c&&setTimeout(function(){d.updateTime(a,c,c)},1E3))}},init:function(){var a=this;$(".countTimer").each(function(){var b=$(this);if(b.data("start-date")&&b.data("curr-date")&&b.data("interval")){var c=b.data("start-date"),d=b.data("curr-date"),f=b.data("interval");f=f.split(":");f=3600*f[0]+60*f[1];a.updateTime(b,f-Math.floor((d-c)/1E3)%f,f)}else b.data("curr-date")&&b.data("end-date")&&
(c=Math.floor((b.data("end-date")-b.data("curr-date"))/1E3),a.updateTime(b,c,!1))})}},qContent={refreshFlag:!1,refresh:function(a){qContent.refreshFlag=!0;var b=$(".content-main");a="undefined"!==typeof a?a:{};var c="undefined"!==typeof a.selector?a.selector:".content-main",d="undefined"!==typeof a.sections?a.sections:[".content-main:first"],f="undefined"!==typeof a.doneHandler?a.doneHandler:"";qSpinner.addFullViewportSpinner();$.ajax({type:"GET",url:document.location.pathname.replace(".html",c+".html"),
data:a.data}).done(function(a){qContent.refreshFlag=!1;setTimeout(function(){if("undefined"!==typeof a){var c=$(a);if("undefined"!==typeof d&&Array.isArray(d))for(var h=0,m=d.length;h<m;h++){var g=d[h],r=$(c).find(g);r.length?$(g).html(r.html()):$(g).remove()}else b.html($("div",c).filter(".content-main:first").html());c.find("script").each(function(){eval($(this).text())});fancyBoxesAndTooltips.init();"undefined"!==typeof checkoutHelper&&(checkoutHelper.setCheckoutHelperInitIndicator(!1),checkoutHelper.init());
"undefined"!==typeof checkoutPayPal&&checkoutPayPal.init();"undefined"!==typeof cartVars&&"size"in cartVars&&shoppingCart.update();"undefined"!==typeof cartVars&&cartVars.cart.loyaltyRewards&&0<cartVars.cart.loyaltyRewards.points&&$("#pbPointValue").text(cartVars.cart.loyaltyRewards.points);"object"===typeof qpayChooser&&(qDropDown.init(),qpayChooser.init());"object"===typeof f&&"update"===f.name&&"CreditCard"===f.json.paymentMethodType&&(c=f.json.data.creditCardExpFormatDate,$(".payOptions").find(".custom-control-input:checked ~ .custom-control-description .expires span").html(c));
initForms();qSpinner.removeSpinner();"function"===typeof f&&f();$(document).trigger("qRefresh.done")}},300)}).fail(function(){qContent.refreshFlag=!1;customSelect.closeAll();qSpinner.removeSpinner()})}},qDomObserver={getHeight:function(a,b){switch(b){case "inner":height=a.clientHeight;break;default:height=$(a).outerHeight(!0)}return height},elementHeightChange:function(a,b,c){var d=this,f=d.getHeight(a,c),m;(function h(){m=d.getHeight(a,c);f!==m&&b();f=m;a.elementHeightChangeTimer&&clearTimeout(a.elementHeightChangeTimer);
a.elementHeightChangeTimer=setTimeout(h,200)})()},init:function(){this.elementHeightChange($("body")[0],function(){$("body").trigger("qHeightChange")},"inner")}},emailAFriend={FORM:"#emailToAFriendForm",FORM_ELEMENT:"#emailToAFriend",RESULT_ELEMENT:"#emailToAFriendResult",MESSAGE_ELEMENT:"#emailToAFriendResult .message",ERROR_MESSAGE_ELEMENT:"#emailToAFriend .message",CODE_SUCCESS:"200",CODE_INVALID_PARAMETERS:"10001",CODE_DO_NOT_EMAIL_LIST:"10015",init:function(){this.url=$(this.FORM).data("ajax-email-product");
this.validator=$(this.FORM).validate()},getFormDataJson:function(){var a=$(this.FORM).serializeArray(),b={};$.each(a,function(a,d){b[d.name]=d.value});return b},submitForm:function(){var a=this;a.validateForm()&&$.ajax({method:"POST",url:a.url,headers:{"Content-Type":"application/json",Accept:"application/json"},mimeType:"text",data:JSON.stringify(a.getFormDataJson()),success:function(b,c,d){a.showResult()},error:function(b,c,d){"undefined"!==typeof b.responseText&&-1<b.responseText.indexOf("{")&&
(b=JSON.parse(b.responseText),c="undefined"!==typeof b.code?b.code:c);a.showMessage(a.ERROR_MESSAGE_ELEMENT,c,d)}})},validateForm:function(){return this.validator.form()},showResult:function(a){$(this.FORM_ELEMENT).hide();this.showElement(this.RESULT_ELEMENT)},showMessage:function(a,b,c){$(a).data("msg-"+b)?$(a).html($(a).data("msg-"+b)):$(a).html($(a).data("msg-error"));this.showElement(a);qScroll.toElement(a,!0)},showElement:function(a){$(a).parents(".alert").removeClass("hidden");$(a).removeClass("hidden");
$(a).show()}},emailSignUp={onFocusClickFirstMailEntry:function(a){a=$(a.target).closest("form.emailSignUp");a.find('input[name\x3d"emailAddress"]').removeClass("btn-inline");a.find(".emailConfirmLabel").removeClass("emailConfirmHidden")},addListener:function(){var a=this;$('form.emailSignUp input[name\x3d"emailAddress"]').focus(function(b){a.onFocusClickFirstMailEntry(b)});$("form.emailSignUp .btnSend").click(function(b){return $(b.target).closest("form.emailSignUp").find(".emailConfirmLabel").hasClass("emailConfirmHidden")?
(a.onFocusClickFirstMailEntry(b),!1):!0})},getFormDataJson:function(a){var b={};b.emailAddress=a.find('input[name\x3d"emailAddress"]').val();b.signupLocation="OTHER";b.signupSource="OTHER";"undefined"!==typeof utag_data&&(b.signupLocation=utag_data.page_id,b.signupSource=utag_data.page_type);1===a.closest("#pageFooter").length&&(b.signupSource="FOOTER");"undefined"!==typeof coremetrics&&(b.signupLocation=coremetrics.cmLastReferencedPageID);return b},getFormDataJsonNewMarketingPreferences:function(a){var b=
{};b.email=a.find('input[name\x3d"emailAddress"]').val();b.pageSource="FOOTER_PREF";b.preferences=[{name:"proEmOptin"}];return b},submitForm:function(a){var b=this,c=qVars.feature&&qVars.feature.newMarketingPreferences||!1,d=b.getRequestOptions(a,c);$.ajax({method:"POST",url:d.url,headers:{"Content-Type":"application/json",Accept:"application/json"},mimeType:d.mimeType,async:!0,data:JSON.stringify(d.data),success:function(b,d,p){b=c?a.find('input[name\x3d"emailAddress"]').val():b.emailAddress;d=a.siblings(".emailSignUpSuccess");
0<d.length&&(d.find(".emailAddress").text(b),a.css("display","none"),d.css("display","block"),a.closest("div.emailSignUp").find(".emailSUText p").css("display","none"),a.closest("div.footerBtnLink").find(".text p,.links").css("display","none"),qvcFooter.btnLinkAlign(),c&&$(document).trigger("emailSignupSuccessful"))},error:function(d,m,p){d=a.find(".message");b.showMessage(d,m,p,c)}})},showMessage:function(a,b,c,d){d?$(a).html(qMsgStorage.err.general.serviceErrorAlt):$(a).data("msg-"+b)?$(a).html($(a).data("msg-"+
b)):$(a).html(i18n.get(c));this.showElement(a);qScroll.toElement(a,!0)},showElement:function(a){$(a).parents(".alert").removeClass("hidden");$(a).removeClass("hidden");$(a).show()},init:function(){var a=this;a.addListener();$("form.emailSignUp").each(function(){$(this).validate({rules:{emailConfirm:{equalTo:$(this).find('[name\x3d"emailAddress"]')}},submitHandler:function(b){a.submitForm($(b))}})});qVars.feature.newMarketingPreferences&&$("#footerEmailDisclaimer").addClass("footerEmailLongDisclaimer")},
getRequestOptions:function(a,b){return b?{url:qVars.format.protocol+"://"+qVars.format.host+qVars.globalAjax.emailSignup,data:this.getFormDataJsonNewMarketingPreferences(a)}:{url:a.data("ajax-email-service"),mimeType:"json",data:this.getFormDataJson(a)}}},emailMarketing={oOptions:{beforeShow:function(){$form=$(".emailMarketingOverlay form");validator=$form.validate();validator.resetForm()},cancelAction:function(){$.fancybox.close()},confirmAction:function(){$form.valid()&&emailMarketing.submitForm($form)}},
getFormDataJson:function(a){a=a.serializeArray();var b={};$.each(a,function(a,d){b[d.name]=d.value});return b},submitForm:function(a){qMsg.removeBanner();this.emailUtility.callSvc({name:"emailMarketing",method:"POST",json:this.getFormDataJson(a),options:{contentType:"application/json"},svc:a.data("ajax-email-service"),addHeaders:!0})},emailHandler:{id:"emailMarketing",failHandler:function(a,b,c,d){qMsg.showGlobalDismissable(qMsgStorage.err.general.serviceError,"danger",{bIsTimed:!0})},doneHandler:function(a,
b,c,d){$(".emailMarketingOverlay").addClass("thankYou")}},openOverlay:function(a){qContent.refreshFlag=!1;overlayHelper.open(a,"emailMarketingOverlay","email-marketing",null,this.oOptions)},init:function(a,b){this.emailUtility=new ajaxUtility(this.emailHandler);this.oOptions.afterShow=b;this.openOverlay(a)}},testFlex={flexBox:!1,init:function(){!1===qPage.isCSSSupported("flex-wrap")||"ipad"===platform.device&&7>=platform.version||"chrome"===platform.browser&&28>=platform.version||"msie"===platform.browser||
"mozilla"===platform.browser||(testFlex.flexBox=!0,$("body").addClass("flexBox"))}},qvcFooter={resizeTimer:null,scrollTimer:null,bottomDrawer:{close:function(a){$(document).trigger("btmDrawerClose");a.off("keydown.btmDrawer")},open:function(a){$(document).trigger("btmDrawerOpen");a.find(".btmDrawerCont a").first().focus();a.on("keydown.btmDrawer",function(a){27===a.which&&(a.preventDefault(),$(this).find(".btmDrawerBtn").focus().click());if(39===a.which||40===a.which||9===a.which&&!a.shiftKey)a.preventDefault(),
a=$(a.target).closest(".btmDrawerItem"),a.index()===$(this).find(".btmDrawerItem").length-1?a.closest(".btmDrawerCont").find("a").first().focus():a.next().find("a").focus();else if(37===a.which||38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a=$(a.target).closest(".btmDrawerItem"),0===a.index()?a.closest(".btmDrawerCont").find("a").last().focus():a.prev().find("a").focus()})},slide:function(a){var b=this,c=$("body").hasClass("btmDrawerOpen");a.attr("aria-expanded",c?"false":"true");var d=
a.closest(".btmDrawer"),f=d.find(".btmDrawerCont"),m=d.find(".btmDrawerCarousel").outerHeight();f.attr("aria-hidden",c?"true":"false").css("height",m+"px");$("body").toggleClass("btmDrawerOpen");c?(b.close(d),$(document).off(".btmDrawer"),setTimeout(function(){f.css("height","")},50)):(b.open(d),$(document).on("click.btmDrawer",function(c){!$(c.target).hasClass("fancybox-close")&&1>$(c.target).closest(".btmDrawerCont,.fancybox-overlay").length&&(c.preventDefault(),b.slide(a))}));f.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",
function(){$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend");$(this).css("height","")})},init:function(){var a=this;$("button.btmDrawerBtn").on("click",function(b){b.preventDefault();b.stopPropagation();a.slide($(this))})}},fullFooterResize:function(){0<$(".viewFullFooter").filter(":visible").length&&$(".viewFullFooter").hasClass("opened")&&$(".fullFooter").css("height","auto")},viewFullFooter:function(a){a.preventDefault();a=$(".fullFooter");var b=$(".viewFullFooter");
b.hasClass("opened")?(b.removeClass("opened"),a.stop().animate({height:0},300)):(b.addClass("opened"),a.css("height","auto"),b=a.outerHeight(),a.css("height","0"),a.stop().animate({height:b},300),$("html,body").animate({scrollTop:$(window).scrollTop()+b},300))},scrollToTop:function(a){a.preventDefault();$(".footerBackToTop.active").animate({opacity:0},300,function(){$(this).removeClass("active")});$("html,body").animate({scrollTop:0},500)},footerScroll:function(){1E3<=$(window).scrollTop()&&1500<
qPage.height()?$(".footerBackToTop").hasClass("active")||$(".footerBackToTop").addClass("active").animate({opacity:1},300):$(".footerBackToTop.active").animate({opacity:0},300,function(){$(this).removeClass("active")})},btnLinkAlign:function(){var a=0,b=0;$(".footerTop");var c=$(".footerBtnLink");$(".footerBtnLink .buttons \x3e div, .footerBtnLink .buttons \x3e div a, .footerBtnLink .emailBtn").css("height","auto");$('.footerBtnLink .buttons, .footerBtnLink [data-component-type\x3d"EMAIL_SIGN_UP_FORM"]').css("padding-top",
"0");c.each(function(){var c=$(this).find('[data-component-type\x3d"EMAIL_SIGN_UP_FORM"]'),f=$(this).find(".buttons"),m=$(this).find(".buttons \x3e div");0<c.length?(f=c.find("form"),m=c.find(".emailBtn"),0<f.filter(":visible").length?(c=c.offset().top-c.offsetParent().offset().top,c>a&&(a=c)):0<m.length&&(m=m.outerHeight(),c=c.offset().top-c.offsetParent().offset().top,c>a&&(a=c),m>b&&(b=m))):0<f.length&&(m=m.outerHeight(),c=f.offset().top-f.offsetParent().offset().top,c>a&&(a=c),m>b&&(b=m))});c.each(function(){var c=
$(this).find('[data-component-type\x3d"EMAIL_SIGN_UP_FORM"]'),f=$(this).find(".buttons");if(0<c.length){f=c.find("form");if(0<f.length&&1>f.filter(":visible").length)return;var m=c.offset().top-c.offsetParent().offset().top;m=a-m;c.css("padding-top",m+"px")}else 0<f.length&&(m=f.offset().top-f.offsetParent().offset().top,m=a-m,f.css("padding-top",m+"px"));c=$(this).find(".emailBtn");f=$(this).find(".buttons \x3e div");0<c.length?c.css("height",b+"px"):0<f.length&&(f.css("height",b+"px"),f.find("a").css("height",
b+"px"))})},init:function(){var a=this;$(".viewFullFooter \x3e a").click(function(b){a.viewFullFooter(b)});$(".footerBackToTop \x3e a").click(function(b){a.scrollToTop(b)});1<$(".footerBtnLink").length&&setTimeout(function(){a.btnLinkAlign()},1E3);$(window).resize(function(){clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){1<$(".footerBtnLink").length&&a.btnLinkAlign();a.fullFooterResize()},200)});$(window).scroll(function(){clearTimeout(a.scrollTimer);a.scrollTimer=setTimeout(function(){0<
$(".footerBackToTop").length&&a.footerScroll()},200)});0<$(".btmDrawerWrap .btmDrawer").length&&a.bottomDrawer.init()}},cropArray={images:[{component:".tsvFeature",height:267},{component:".largeStaticImage.noOverlay",height:200},{component:".largeStaticImage.hasOverlay",height:250}]},imageCrop={resizeTimer:null,objFit:!1,init:function(){!1!==qPage.isCSSSupported("object-fit")?(imageCrop.objFit=!0,$("body").addClass("objFit")):0<$(".imageCrop").length&&(setTimeout(function(){imageCrop.resize()},200),
$(window).resize(function(){clearTimeout(imageCrop.resizeTimer);imageCrop.resizeTimer=setTimeout(function(){imageCrop.resize()},200)}))},resize:function(){for(i=0;i<cropArray.images.length;i++)$(cropArray.images[i].component+" .imageCrop").each(function(){var a=$(this);if("IMG"!==a.prop("tagName")){a=a.children("img");if(a.attr("data-src"))return;a.removeClass("lazy").closest(".lazyWrap").removeClass("lazyWrap").css("padding-bottom","")}a.css({height:"auto",width:"100%","margin-left":"0"});if(a.height()<
cropArray.images[i].height&&800>qPage.windowWidth()){a.css({height:cropArray.images[i].height+"px",width:"auto"});var b=a.width(),c=a.parent().width();a.css("margin-left","-"+Math.floor((b-c)/2)+"px")}})}},setWcTimeZoneCookie=function(a){var b="EST",c=qCookie.get("wctz");switch(a){case "tvpg":b=$(".tvDataContainer").data("timezone")||b;break;case "iroa":b=$(".timeZone.curTimeZone").data("timezoneshort")||b}c!==b&&qCookie.set("wctz",b,{path:"/",expires:7300})},oQvcIroa=function(){var a="LIVE",b=0,
c={sMode:"",bCheckIoa:!1},d=function(){var a=qCookie.get("wctz");if("undefined"!==typeof oTimeZoneMap&&"undefined"!==typeof a&&"est"===a.toLowerCase()&&0>window.location.href.toLowerCase().indexOf(".eastern.")){var b=-60*(new Date).getTimezoneOffset(),c=!1;$.each(oTimeZoneMap,function(a,d){if(a!==b&&-1<d.toLowerCase().indexOf(".eastern."))return c=!0,!1});c&&"undefined"!==typeof oTimeZoneMap[b]&&window.history.pushState({},"",urlManager.toQvcPath(oTimeZoneMap[b]))}},f=function(){var a=$(".iroaHeader.cloned :header");
0<a.length&&a.toggleClass("truncated",a[0].scrollWidth>a.outerWidth(!0))},m=function(){var a=function(){switch(c.sMode){case "module":var a="",b="";$(["Dates","Shows"]).each(function(c,d){a='\x3clabel\x3e\x3cselect name\x3d"iroa{1}"\x3e{2}\x3c/select\x3e\x3c/label\x3e'.replace("{1}",d);b="";$(".iroaNavMenu .iroa"+d+" ul li").each(function(a,c){c=$(this);var f=c.find("a");0===a&&"Shows"===d&&(b+='\x3coption {0} value\x3d"{1}"\x3e{2}\x3c/option\x3e'.replace("{0}",'selected class\x3d"hidden"').replace("{1}",
"").replace("{2}",$(".iroaMobileMenu .iroa"+d).data().label));b+='\x3coption {0} value\x3d"{1}"\x3e{2}\x3c/option\x3e'.replace("{0}",c.hasClass("selected")?"Dates"===d?"selected":'class\x3d"isSelected"':"").replace("{1}",f.attr("href")).replace("{2}","Dates"==d?f.data().short:f.text())});""!==b&&$(".iroaMobileMenu .iroa"+d).html(a.replace("{2}",b))});$(".iroaList").after($(".iroaMobileMenu").clone().addClass("cloned"));$(".iroaMobileMenu select").on("change",function(){"#"!==this.value&&qOpenUrl(urlManager.toQvcPath(this.value))})}},
d=function(){for(var a=$(".channelSelector .channels"),b=$(".activeChannel"),c=b.index(),d=0,f=a.find("a"),g=0;g<c;g++)d+=$(f[g]).outerWidth(!0);a.animate({scrollLeft:Math.max(0,d-(a.width()-b.outerWidth(!0))/2)},500)};qVars.editDisabled&&"module"===c.sMode&&(a(),d(),$(".iroaListHeader").prepend($(".iroaHeader").clone().addClass("cloned").removeClass("row")),b=$(".iroaHeader.cloned").position().top,$(".iroaHeader.cloned").css({top:b}),f(),$(".iroaListHeader .iroaHeader.row .showTime").append($(".iroaTimeZoneLink").clone()),
$(".iroaMobileMenu.cloned").after($(".iroaAddNavComp").clone().addClass("hidden-sm hidden-md hidden-lg cloned")))},p=function(b){a="undefined"===typeof b?"undefined"!==typeof sCurIroaChannel?sCurIroaChannel.toUpperCase():a:b},h=function(){if(qViewport.is("\x3c\x3dxs")){var a=$(".globalMasthead"),c=a.outerHeight(!0),d=$(window).scrollTop(),f=$(".iroaListItems").position().top;a.hasClass("sticky")?d-c>=f?$(".iroaHeader.cloned").show().stop().animate({top:c},300):$(".iroaHeader.cloned").show().stop().animate({top:b},
200,function(){$(this).hide()}):$(".iroaHeader.cloned").hide()}},t=function(){switch(c.sMode){case "module":if($(".channelSelector a").click(function(){var b=$(this).data().channelcode;b!==a&&(p(b),$(".channelSelector .activeChannel").removeClass("activeChannel"),$('.channelSelector a[data-channelcode\x3d"'+a+'"]').addClass("activeChannel"))}),$(".iroaNavMenu h3").on("keypress click",function(a){if(13===a.which||"click"===a.type)a=$(this),a.toggleClass("expanded"),a.parent().find(".menuItems").slideToggle("fast")}),
$(".iroaTimeZoneLink").click(function(a){a.preventDefault();a=fancyBoxesAndTooltips.getFbDefaults(fancyBoxesAndTooltips.getDeviceType());a.width="280px";a.height="auto";$.fancybox($.extend(!0,{},a,{type:"inline",content:$(".iroa-module").find(".iroaTimeZoneSelect")}))}),$(".moreIroaOptions span").click(function(){var a=$(this),b=a.html();a.html(a.attr("data-togglestring")).attr("data-togglestring",b).toggleClass("up").parent().prev(".hiddenIroaNav").slideToggle("fast")}),$(".iroaTimeZoneSelect a").click(function(){var a=
$(this);a.hasClass("curTimeZone")||($(".iroaTimeZoneSelect .curTimeZone").removeClass("curTimeZone"),a.addClass("curTimeZone"))}),$(window).on("resize",function(){f()}),!1!==platform.device)$(window).on("touchmove scroll",h)}};return{init:function(a){"undefined"!==typeof a&&(c=$.extend({},c,a));p();d();m();t();switch(c.sMode){case "module":"undefined"!==typeof bIsOnAirShow&&!0===bIsOnAirShow&&$(".iroaListItems .galleryItem:first").addClass("ioaBadge").find(".productBadge").removeClass("productBadge")}switch(c.sModesMode){case "module":"undefined"!==
typeof bIsOnAirShow&&!1===bIsOnAirShow&&$(".watchLiveLink").remove()}}}}(),masthead={cartQty:0,mobileLimit:10,menuState:!1,isLoggedIn:!1,isPinned:!1,username:null,usernameShort:null,menuClickTimer:null,resizeTimer:null,scrollTimer:null,scrollThreshold:0,scrollThresholdBase:0,width:0,getCartSize:function(){var a=qCookie.get("cartQty");return a="undefined"!==typeof cartVars&&"size"in cartVars&&"undefined"!==typeof cartVars.cart&&("IN_PROGRESS"===cartVars.cart.status||"DOWNTIME_IN_PROGRESS"===cartVars.cart.status)?
cartVars.size:isNaN(parseInt(a))?0:a},updateCartIndicator:function(){if(!(0>=$(".menuCartNum").length)){var a=$(".menuCart a");if(qVars.feature.aemCheckout){var b=qCookie.get("cartQty");if(!qVars.feature.addedToCartNotification||isNaN(parseInt(b)))b=masthead.getCartSize();if(!isNaN(b)){var c=parseInt(b),d=$("#menuCartLabel .emptyItem"),f=$("#menuCartLabel .oneItem"),m=$("#menuCartLabel .multiItem");0===c?(d.attr("aria-hidden","false"),f.attr("aria-hidden","true"),m.attr("aria-hidden","true")):1===
c?(d.attr("aria-hidden","true"),f.attr("aria-hidden","false"),m.attr("aria-hidden","true")):1<c&&(d.attr("aria-hidden","true"),f.attr("aria-hidden","true"),m.attr("aria-hidden","false"));$(".menuCartNum").text(b);qCookie.set("cartQty",b.toString(),{path:"/",expiresMin:qVars.cookie.cartQtyExp})}"undefined"!==typeof a.data("aem-href")&&a.attr("href",a.data("aem-href"));!$("body").hasClass("cart")||"undefined"!==typeof cartVars&&"undefined"!==typeof cartVars.size||($(".menuCartNum").text(0),qCookie.set("cartQty",
"0",{path:"/",expiresMin:qVars.cookie.cartQtyExp}))}else b=qCookie.get("cart_qty"),isNaN(parseInt(b))||(masthead.cartQty=parseInt(b)),$(".menuCartNum").text(masthead.cartQty),a.data("aem-href",a.attr("href")),a.attr("href",a.data("href"))}},setCartIndicator:function(a){a=isNaN(parseInt(a))?0:parseInt(a);qCookie.set("cartQty",a.toString(),{path:"/",expiresMin:qVars.cookie.cartQtyExp});masthead.updateCartIndicator()},cartIncrement:function(a){var b="cart_qty";qVars.feature.aemCheckout&&(b="cartQty");
var c=qCookie.get(b);c=isNaN(parseInt(c))?0:parseInt(c);"number"===typeof a&&(c+=a);qCookie.set(b,c.toString());masthead.updateCartIndicator()},pinMast:function(){$("#pageMasthead").toggleClass("pinned");if($("#pageMasthead").hasClass("pinned")){var a=$('[data-component-type\x3d"MASTHEAD_MENU"]').outerHeight();$("#pageContent,.MinimumWidthContainer").css("padding-top",a+3+"px")}else $("#pageContent,.MinimumWidthContainer").css("padding-top","0")},isSearchOpen:function(){return $("html").hasClass("mh-desktop-display")?
!0:masthead.isPinned?$("#pageMasthead").hasClass("searchOpenPin")?!0:!1:$("body").hasClass("mobileSearch")&&$("#pageMasthead").hasClass("searchClose")?!1:!$("body").hasClass("mobileSearch")&&$("#pageMasthead").hasClass("searchOpen")?!0:$("body").hasClass("mobileSearch")?!0:!1},searchToggle:function(a){a.preventDefault();$("#pageMasthead").hasClass("pinned")?$("#pageMasthead").hasClass("searchOpenPin")?$("#pageMasthead").removeClass("searchOpenPin"):($("#pageMasthead").addClass("searchOpenPin"),$(".searchInput").focus()):
$("body").hasClass("mobileSearch")&&$("#pageMasthead").hasClass("searchClose")?($("#pageMasthead").removeClass("searchClose"),$(".searchInput").focus()):!$("body").hasClass("mobileSearch")&&$("#pageMasthead").hasClass("searchOpen")?$("#pageMasthead").removeClass("searchOpen"):$("body").hasClass("mobileSearch")?$("#pageMasthead").addClass("searchClose"):($("#pageMasthead").addClass("searchOpen"),$(".searchInput").focus());masthead.recalcScrollThreshold()},recalcScrollThreshold:function(){masthead.scrollThreshold=
masthead.scrollThresholdBase;if($("html").hasClass("mh-desktop-display")?0:masthead.isSearchOpen())masthead.scrollThreshold+=40},mastResize:function(){$(".shopByMobileSub .menuHeader.opened").each(function(){$(this).siblings("ul").css("height","auto")});masthead.menuState&&0<$('[data-component-type\x3d"MASTHEAD_POP"]').filter(":visible").length?(masthead.stopBodyScrolling(!1),masthead.stopBodyScrolling(!0),$("#pageMasthead").not(".pinned").parents("body").scrollTop(0),"iphone"!==platform.device&&
"ipad"!==platform.device||masthead.menuClick()):masthead.menuState&&0>=$('[data-component-type\x3d"MASTHEAD_POP"]').filter(":visible").length&&masthead.stopBodyScrolling(!1);if("iphone"===platform.device||"ipad"===platform.device){var a=qPage.windowWidth();a!==masthead.width&&(masthead.width=a,$("input").blur())}},mastScrollPin:function(){var a=$(window).scrollTop();a>masthead.scrollThreshold&&!$("#pageMasthead").hasClass("pinned")&&!masthead.isPinned?($("#pageMasthead").addClass("slideDown"),$("#pageContent,.MinimumWidthContainer").css("padding-top",
masthead.scrollThreshold+"px"),setTimeout(function(){$("#pageMasthead").addClass("pinned");$("#pageMasthead").removeClass("slideDown");masthead.recalcScrollThreshold()},200),masthead.isPinned=!0,$("#pageMasthead").trigger("masthead.pin")):a<=masthead.scrollThreshold&&$("#pageMasthead").hasClass("pinned")&&masthead.isPinned&&($("#pageMasthead").addClass("slideUp"),$('[data-component-type\x3d"MASTHEAD_MENU"]').on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$("#pageMasthead").removeClass("slideUp").removeClass("pinned").removeClass("searchOpenPin");
$(".mastheadMenuBar").css("transition","none");$("#pageContent,.MinimumWidthContainer").css("padding-top","0");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend");$("#pageContent,.MinimumWidthContainer,.mastheadMenuBar").css("box-shadow","none");$('[data-component-type\x3d"MASTHEAD_TOP_DRAWER"],[data-component-type\x3d"MASTHEAD_MENU"]').css("opacity","0");$('[data-component-type\x3d"MASTHEAD_TOP_DRAWER"],[data-component-type\x3d"MASTHEAD_MENU"]').stop().animate({opacity:1},
300,function(){$("#pageContent,.MinimumWidthContainer,.mastheadMenuBar").css("box-shadow","")});setTimeout(function(){$(".mastheadMenuBar").css("transition","")},200);masthead.recalcScrollThreshold()}),masthead.isPinned=!1,$("#pageMasthead").trigger("masthead.unPin"))},stopBodyScrolling:function(a){if(!0===a)$('[data-component-type\x3d"MASTHEAD_TOP_DRAWER"],[data-component-type\x3d"MASTHEAD_MENU"],#pageContent,.MinimumWidthContainer,#pageFooter').on("touchmove",masthead.freezeVp);else $('[data-component-type\x3d"MASTHEAD_TOP_DRAWER"],[data-component-type\x3d"MASTHEAD_MENU"],#pageContent,.MinimumWidthContainer,#pageFooter').off("touchmove",
masthead.freezeVp)},freezeVp:function(a){a.preventDefault();a.stopPropagation()},menuClick:function(){if(masthead.menuState)masthead.menuState=!1,$('[data-component-type\x3d"MASTHEAD_TOP_DRAWER"],[data-component-type\x3d"MASTHEAD_MENU"],#pageContent,.MinimumWidthContainer,#pageFooter,#pageMasthead~.qMsgOuterWr,#homepageFooter').off("click"),$(".menuNavIcon").removeClass("open"),$("html,body,#pageContent,.MinimumWidthContainer").css("overflow","hidden"),$("body").removeClass("popOpen"),$("html").removeClass("popOpen"),
masthead.stopBodyScrolling(!1),$("#pageContent,.MinimumWidthContainer").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$('[data-component-type\x3d"MASTHEAD_POP"]').css("display","none");$("html,body,#pageContent,.MinimumWidthContainer").css("overflow","");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")});else{masthead.menuState=!0;$('[data-component-type\x3d"MASTHEAD_POP"]').css("display","block");0<$(window).scrollTop()&&
$(window).scrollTop()<$('[data-module-type\x3d"MH"]').outerHeight()/2&&$(window).scrollTop(0);$(".menuNavIcon").addClass("open");$("body").addClass("popOpen");$("html").addClass("popOpen");masthead.stopBodyScrolling(!0);var a=$(".mastheadTopDrawer").outerHeight();10>=a&&(a=3);$('[data-component-type\x3d"MASTHEAD_POP"]').css("padding-top",a);$('[data-component-type\x3d"MASTHEAD_TOP_DRAWER"],[data-component-type\x3d"MASTHEAD_MENU"],#pageContent,.MinimumWidthContainer,#pageFooter,#pageMasthead~.qMsgOuterWr,#homepageFooter').click(function(a){0<
$(".menuHamburger").filter(":visible").length&&(a.preventDefault(),masthead.menuClick())})}},jpAuthenticateUser:function(a){var b=qCookie.get("qvcfn");if(null===b){var c=platform.device&&"undefined"===typeof a,d=null;$.ajax({url:location.protocol+"//"+location.hostname+((c?"/smp/cont/smp":"/cont")+"/qfs/loginStatus"),type:"GET",cache:!1,dataType:"json",success:function(a){null!==a&&null!==a.userName&&""!==a.userName&&(d=a.userName,masthead.isLoggedIn=!0);masthead.setUserAuthState(d)},error:function(){c?
masthead.jpAuthenticateUser(!0):masthead.setUserAuthState(d)}})}else masthead.isLoggedIn=!0,masthead.setUserAuthState(b)},authenticateUser:function(){null!==qCookie.get("qvcauthenticed")&&(masthead.isLoggedIn=!0);if(gdprCheck("c3"))var a=null;else 0<$("body.uk").length?(a=qCookie.get("username"),null===a&&(a=qCookie.get("qvcfn"))):0<$("body.de").length?(a=qCookie.get("username"),null===a&&(a=qCookie.get("qvcuname"),"string"===typeof a&&(a=window.atob(a)))):a=qCookie.get("qvcfn");0<$("body.jp").length?
masthead.jpAuthenticateUser():masthead.setUserAuthState(a)},setUserAuthState:function(a){var b=$(".acctGreeting.acctAuth");if(null!==a&&(1>$("body.de").length||masthead.isLoggedIn)){-1!==a.indexOf("+")&&(a=a.replace(/\+.+$/gi,""));var c=a;c.length>masthead.mobileLimit&&(c=c.substring(0,masthead.mobileLimit)+"...");masthead.username=a;masthead.usernameShort=c;$(".greetingShort",b).text(masthead.usernameShort);$(".greetingLong",b).text(masthead.username)}else masthead.isLoggedIn?$(".signInGreet",b).children().not(".greetingText").remove():
b=$(".acctGreeting.acctUnAuth");$(".myAcctMobile").html(b.css("display","inline-block").first().children().clone());$(".searchInputBox.preload").removeClass("preload")},getQueryVariable:function(a){for(var b=decodeURIComponent(window.location.search.substring(1)).split("\x26"),c=0;c<b.length;c++){var d=b[c].split("\x3d");if(d[0]===a)return d[1]}return null},isMobileApp:function(){mastheadDisplay.isMobileApp&&$("body").addClass("isMobileApp")},prepopulateSearchTextField:function(){var a=qGet.urlParam("redirectTerm");
a=null!==a?a:null!==qGet.urlParam("keyword")?qGet.urlParam("keyword"):qGet.urlParam("productNumber");if(null!==a){-1!==a.indexOf("+")&&(a=a.replace(/[+]/g," "));try{$("#txtMastheadSearch").val(decodeURIComponent(a))}catch(b){}}},addQLab:function(){"string"===typeof qVars.url.qLab&&$('.myAccountDropDown a[href*\x3d"wishlist.html"]').closest("li").before('\x3cli\x3e\x3ca title\x3d"My QLab" href\x3d"'+qVars.url.qLab+'" data-link-tag\x3d"QLAB"\x3eMy QLab\x3c/a\x3e\x3c/li\x3e')},init:function(){var a=
$(window),b=$("body"),c=$(".mastheadMenuBar").find(".shopByCat"),d=$(".mastheadLinksBar"),f=d.find(".shopByCat"),m=$(".shopByCatHamburger"),p=a.scrollTop(),h=$(".searchFormWrapper").offset().top,t=!1;c=f.length?f:c;masthead.width=qPage.windowWidth();masthead.authenticateUser();mastheadDisplay.isMobileApp?$("body").addClass("isMobileApp"):(masthead.scrollThreshold=masthead.scrollThresholdBase=$('[data-component-type\x3d"MASTHEAD_MENU"]').offset().top+$('[data-component-type\x3d"MASTHEAD_MENU"]').outerHeight(),
masthead.isPinned=$("#pageMasthead").hasClass("pinned"),masthead.updateCartIndicator(),masthead.prepopulateSearchTextField(),$(".menuLinksRight").children().clone().appendTo(".shopByMobile"),c.find(".shopByDropDown").children().not(".flyoutHeading").clone().addClass("mobileShopByCat").appendTo(".shopByMobile"),c.find(".shopByDDOpen").children().clone().appendTo(".shopByMobileSub"),$(".shopByDropDown ul li.flyoutMenuLink").hover(function(){$(this).addClass("highlighted");var a=$(this).index(".shopByDropDown .flyoutMenuLink");
$(".shopByDDOpen .flyoutSection").eq(a).addClass("opened")},function(){$(this).removeClass("highlighted");var a=$(this).index(".shopByDropDown .flyoutMenuLink");$(".shopByDDOpen .flyoutSection").eq(a).removeClass("opened")}),$(".shopByDDOpen .flyoutSection").hover(function(){var a=$(this).index();$(".shopByDropDown ul li.flyoutMenuLink").eq(a).addClass("highlighted")},function(){var a=$(this).index();$(".shopByDropDown ul li.flyoutMenuLink").eq(a).removeClass("highlighted")}),$(".menuHamburger").click(function(a){a.preventDefault();
a.stopPropagation();clearTimeout(masthead.menuClickTimer);masthead.menuClickTimer=setTimeout(function(){masthead.menuClick()},200)}),$(".menuSearch").click(function(a){masthead.searchToggle(a)}),$(".mastheadPopOut").on("click",".myAcctMobile \x3e a",function(a){a.preventDefault();$(".myAcctMobile").css("transform","translate(-100%,0)");$(".shopByMobile").css("transform","translate(-100%,0)").addClass("menuBottom");$(".mastheadPopOut .myAccountDropDown").css("display","block").addClass("menuBottom");
$(".shopByMobileSub").css("transform","translate(0,0)");$('[data-component-type\x3d"MASTHEAD_POP"]').scrollTop(0);$(".shopByMobile").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(".mobileShopByCat").css("display","none");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}),$(".shopByMobile .shopQVCTV \x3e a").click(function(a){a.preventDefault();$(".myAcctMobile").css("transform","translate(-100%,0)");
$(".shopByMobile").css("transform","translate(-100%,0)").addClass("menuBottom");$(".shopByMobile .shopTVDropDown").css("display","block").addClass("menuBottom");$(".shopByMobileSub").css("transform","translate(0,0)");$('[data-component-type\x3d"MASTHEAD_POP"]').scrollTop(0);$(".shopByMobile").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(".mobileShopByCat").css("display","none");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}),
$(".shopByMobile .deals \x3e a").click(function(a){a.preventDefault();$(".myAcctMobile").css("transform","translate(-100%,0)");$(".shopByMobile").css("transform","translate(-100%,0)").addClass("menuBottom");$(".shopByMobile .dealsDropDown").css("display","block").addClass("menuBottom");$(".shopByMobileSub").css("transform","translate(0,0)");$('[data-component-type\x3d"MASTHEAD_POP"]').scrollTop(0);$(".shopByMobile").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",
function(){$(".mobileShopByCat").css("display","none");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}),$(".shopByMobile .flyoutMenuLink a").click(function(a){a.preventDefault();$(".myAcctMobile").css("transform","translate(-100%,0)");$(".shopByMobile").css("transform","translate(-100%,0)").addClass("menuBottom");a=$(this).parents(".flyoutMenuLink").index(".shopByMobile .flyoutMenuLink");$(".shopByMobileSub .flyoutSection").eq(a).css("display","block");
$(".shopByMobileSub").css("transform","translate(0,0)").addClass("menuBottom");$('[data-component-type\x3d"MASTHEAD_POP"]').scrollTop(0);$(".shopByMobile").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(".mobileShopByCat").css("display","none");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})}),$(".mainMenuMobile").click(function(a){a.preventDefault();$(".mobileShopByCat").css("display","block");$(".myAcctMobile").css("transform",
"translate(0,0)");$(".shopByMobile").css("transform","translate(0,0)").removeClass("menuBottom");$(".shopByMobileSub").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(".mastheadPopOut .myAccountDropDown").css("display","none").removeClass("menuBottom");$(".shopByMobile .shopTVDropDown").css("display","none").removeClass("menuBottom");$(".shopByMobile .dealsDropDown").css("display","none").removeClass("menuBottom");$(this).children(".flyoutSection").css("display",
"none");$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")});$(".shopByMobileSub").css("transform","translate(100%,0)").removeClass("menuBottom");$('[data-component-type\x3d"MASTHEAD_POP"]').scrollTop(0)}),$(".shopByMobileSub .menuHeader").click(function(){var a=$(this).siblings("ul");if($(this).hasClass("opened"))$(this).removeClass("opened"),a.stop().animate({height:0},300);else{$(this).addClass("opened");a.css("height","auto");var b=a.outerHeight();a.css("height",
"0");a.stop().animate({height:b},300)}}),$(".shopByCatHamburgerButton").click(function(a){a.preventDefault();a.stopPropagation()}),a.resize(function(){clearTimeout(masthead.resizeTimer);masthead.resizeTimer=setTimeout(function(){masthead.mastResize()},200)}),a.scroll(function(){clearTimeout(masthead.scrollTimer);masthead.scrollTimer=setTimeout(function(){p=a.scrollTop();0<$(".menuHamburger").filter(":visible").length&&masthead.mastScrollPin();960>a.width()||b.hasClass("isMobile")||(p>h&&!t&&(t=!0,
$("#pageContent").attr("style","padding-top:"+$("#pageMasthead").outerHeight()+"px !important;"),$("#pageMasthead").addClass("pageMastheadFixed").css("top","-\x3d"+h).animate({top:0},200,function(){d.slideUp(200)}),m.removeClass("hide")),0===p&&t&&(t=!1,$("#pageMasthead").removeClass("pageMastheadFixed").css("top",""),$("#pageContent").removeAttr("style"),d.slideDown(200),m.addClass("hide")))},10)}),$(".searchInput").focus(function(){if("iphone"===platform.device||"ipad"===platform.device)$("body").hasClass("mobileSearch")&&
$("#pageMasthead").hasClass("searchClose")?$("#pageMasthead").removeClass("searchClose"):$("body").hasClass("mobileSearch")||$("#pageMasthead").hasClass("searchOpen")||$("#pageMasthead").addClass("searchOpen")}),$('a[data-link-tag\x3d"SIGN_OUT"],a[data-link-tag\x3d"SIGN_IN"],a[data-link-tag\x3d"CREATE_ACCOUNT"]').click(function(){logoffHelper.clearStorage()}),"iphone"!==platform.device&&"ipad"!==platform.device||stopRubberBand.init($('[data-component-type\x3d"MASTHEAD_POP"]')[0]),mastheadADA.init())}},
stopRubberBand={_scroller:null,_clientY:null,disableRubberBand:function(a){var b=a.targetTouches[0].clientY-stopRubberBand._clientY;0===stopRubberBand._scroller.scrollTop&&0<b&&a.preventDefault();stopRubberBand.isOverlayTotallyScrolled()&&0>b&&a.preventDefault()},isOverlayTotallyScrolled:function(){return stopRubberBand._scroller.scrollHeight-stopRubberBand._scroller.scrollTop<=stopRubberBand._scroller.clientHeight},init:function(a){stopRubberBand._scroller=a;stopRubberBand._scroller.addEventListener("touchstart",
function(a){1===a.targetTouches.length&&(stopRubberBand._clientY=a.targetTouches[0].clientY)},!1);stopRubberBand._scroller.addEventListener("touchmove",function(a){1===a.targetTouches.length&&stopRubberBand.disableRubberBand(a)},!1)}},mastheadADA={initDesktop:function(){$('[data-component-type\x3d"MASTHEAD_SKIP_NAVIGATION"] li a').keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),a=$(this).attr("href"),"undefined"!==typeof a&&0<a.length&&(0===a.indexOf("#")||0===a.indexOf("."))&&
("#pageContent"===a&&0<$(".MinimumWidthContainer").length?$(".MinimumWidthContainer").attr("tabindex","-1").focus():$(a).focus())});$('[data-component-type\x3d"MASTHEAD_MENU"] .acctGreeting').keydown(function(a){$(this).hasClass("hover")||13!==a.which&&32!==a.which&&40!==a.which||(a.preventDefault(),$(this).addClass("hover"),$(this).find("\x3e a").attr("aria-expanded","true"),$('[data-component-type\x3d"MASTHEAD_MENU"] .myAccountDropDown').find("a").filter(":visible").first().focus(),$('[data-component-type\x3d"MASTHEAD_MENU"] .myAccountDropDown').find("a").filter(":visible").on("keydown",
function(a){if(40===a.which||9===a.which&&!a.shiftKey)a.preventDefault(),$(this).parent().index()===$(this).closest("ul").find("li").length-1?$(this).closest("ul").find("li a").first().focus():$(this).parent().next().find("a").focus();else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),0===$(this).parent().index()?$(this).closest("ul").find("li a").last().focus():$(this).parent().prev().find("a").focus()}));$(this).hasClass("hover")&&27===a.which&&$(this).removeClass("hover").find("\x3e a").attr("aria-expanded",
"false").focus()});$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopQVCTV').keydown(function(a){$(this).hasClass("hover")||13!==a.which&&32!==a.which&&40!==a.which||(a.preventDefault(),$(this).addClass("hover"),$(this).find("\x3e a").attr("aria-expanded","true"),$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopTVDropDown').find("a").filter(":visible").first().focus(),$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopTVDropDown').find("a").filter(":visible").on("keydown",function(a){if(40===a.which||
9===a.which&&!a.shiftKey)a.preventDefault(),$(this).parent().index()===$(this).closest("ul").find("li").length-1?$(this).closest("ul").find("li a").first().focus():$(this).parent().next().find("a").focus();else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),0===$(this).parent().index()?$(this).closest("ul").find("li a").last().focus():$(this).parent().prev().find("a").focus()}));$(this).hasClass("hover")&&27===a.which&&$(this).removeClass("hover").find("\x3e a").attr("aria-expanded",
"false").focus()});$('[data-component-type\x3d"MASTHEAD_LINKS"] .deals').keydown(function(a){$(this).hasClass("hover")||13!==a.which&&32!==a.which&&40!==a.which||(a.preventDefault(),$(this).addClass("hover"),$(this).find("\x3e a").attr("aria-expanded","true"),$('[data-component-type\x3d"MASTHEAD_LINKS"] .dealsDropDown').find("a").filter(":visible").first().focus(),$('[data-component-type\x3d"MASTHEAD_LINKS"] .dealsDropDown').find("a").filter(":visible").on("keydown",function(a){if(40===a.which||9===
a.which&&!a.shiftKey)a.preventDefault(),$(this).parent().index()===$(this).closest("ul").find("li").length-1?$(this).closest("ul").find("li a").first().focus():$(this).parent().next().find("a").focus();else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),0===$(this).parent().index()?$(this).closest("ul").find("li a").last().focus():$(this).parent().prev().find("a").focus()}));$(this).hasClass("hover")&&27===a.which&&$(this).removeClass("hover").find("\x3e a").attr("aria-expanded","false").focus()});
$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopByCat, [data-component-type\x3d"MASTHEAD_LINKS"].shopByCat').keydown(function(a){$(this).hasClass("hover")||13!==a.which&&32!==a.which&&40!==a.which||(a.preventDefault(),$(this).addClass("hover"),$(this).find("\x3e a").attr("aria-expanded","true"),$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopByDropDown').find("a").filter(":visible").first().focus());$(this).hasClass("hover")&&27===a.which&&$(this).removeClass("hover").find("\x3e a").attr("aria-expanded",
"false").focus()});$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopByDropDown a').keydown(function(a){if(40===a.which||9===a.which&&!a.shiftKey)a.preventDefault(),$(this).parent().index()===$(this).closest("ul").find("li").length-1?$(this).closest("ul").find("li a").first().focus():$(this).parent().next().find("a").focus();else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),0===$(this).parent().index()?$(this).closest("ul").find("li a").last().focus():$(this).parent().prev().find("a").focus()});
$('[data-component-type\x3d"MASTHEAD_LINKS"] .flyoutMenuLink \x3e a').keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),$(this).attr("aria-expanded","true"),a=$(this).parent(".flyoutMenuLink"),a.addClass("highlighted"),a=a.index('[data-component-type\x3d"MASTHEAD_LINKS"] .shopByDropDown .flyoutMenuLink'),a=$('[data-component-type\x3d"MASTHEAD_LINKS"] .shopByDDOpen .flyoutSection').eq(a),a.addClass("opened"),a.find("a").filter(":visible").first().focus(),a.find("a").filter(":visible").on("keydown",
function(a){if(40===a.which||9===a.which&&!a.shiftKey){a.preventDefault();var b=$(this).closest(".dropdown").find("a");var d=b.index($(this));d===b.length-1?b.first().focus():b.eq(d+1).focus()}else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),b=$(this).closest(".dropdown").find("a"),d=b.index($(this)),0===d?b.last().focus():b.eq(d-1).focus();27===a.which&&($(this).closest(".flyoutSection").removeClass("opened"),$(".shopByDropDown .highlighted").removeClass("highlighted").find("a").attr("aria-expanded",
"false").focus(),$(this).off("keydown"),a.stopPropagation())})})},initMobile:function(){var a=0<$(".mastheadMenuBar.moveIcons").length;$(".shopByMobileSub .menuHeader").attr("tabindex","0");$(".menuHamburger").keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),masthead.menuClick(),setTimeout(function(){$(".myAcctMobile \x3e a").focus()},50),$('[data-component-type\x3d"MASTHEAD_POP"]').on("keydown",function(a){if(27===a.which)$(this).off("keydown"),a.stopPropagation(),$(".menuHamburger \x3e a").click(),
setTimeout(function(){$(".menuHamburger \x3e a").focus()},50);else if(40===a.which||9===a.which&&!a.shiftKey){a.preventDefault();a.stopPropagation();a=$(this).find("a").filter(":visible").not("a.mainMenuMobile");var b=a.index($(document.activeElement));b===a.length-1?a.first().focus():a.eq(b+1).focus()}else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a.stopPropagation(),a=$(this).find("a").filter(":visible").not("a.mainMenuMobile"),b=a.index($(document.activeElement)),0===b?a.last().focus():
a.eq(b-1).focus()})});$(".menuSearch").keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),masthead.searchToggle(a)});$(".menuDeals").keydown(function(b){0<$(".menuHamburger").filter(":visible").length&&9===b.which&&!b.shiftKey&&(b.preventDefault(),$(a?".menuSearch a":".menuCart a").focus())});$(".menuLogo").keydown(function(b){a&&0<$(".menuHamburger").filter(":visible").length&&1>$(".menuDeals").filter(":visible").length&&9===b.which&&!b.shiftKey&&(b.preventDefault(),$(".menuSearch a").focus())});
$(".menuSearch").keydown(function(b){a&&0<$(".menuHamburger").filter(":visible").length&&9===b.which&&b.shiftKey&&(b.preventDefault(),b=1>$(".menuDeals").filter(":visible").length,$(b?".menuLogo a":".menuDeals a").focus())});$(".menuCart").keydown(function(b){0<$(".menuHamburger").filter(":visible").length&&(9===b.which&&b.shiftKey?(b.preventDefault(),$(a?".menuSearch a":".menuDeals a").focus()):9!==b.which||b.shiftKey||"1"!==$(".searchInputBox").css("opacity")||(b.preventDefault(),$("input.searchInput").focus()))});
$("input.searchInput").keydown(function(a){0<$(".menuHamburger").filter(":visible").length&&9===a.which&&a.shiftKey&&(a.preventDefault(),$(".menuCart a").focus())});$("input#btnMastheadSearch").keydown(function(a){if(0<$(".menuHamburger").filter(":visible").length&&9===a.which&&!a.shiftKey){a.preventDefault();a=$(":tabbable");var b=a.index($(".menuCart \x3e a"));a.eq(b+1).focus()}});$(".myAcctMobile \x3e a").keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),$(this).click(),$(this).attr("aria-expanded",
"true"),setTimeout(function(){$(".myAcctMobile .myAccountDropDown a").first().focus()},50),$('[data-component-type\x3d"MASTHEAD_POP"] .myAccountDropDown').on("keydown",function(a){if(27===a.which)$(this).off("keydown"),a.stopPropagation(),$("a.mainMenuMobile").click(),setTimeout(function(){$(".myAcctMobile \x3e a").attr("aria-expanded","false").focus()},50);else if(40===a.which||9===a.which&&!a.shiftKey){a.preventDefault();a.stopPropagation();a=$(this).find("a");var b=a.index($(document.activeElement));
b===a.length-1?a.first().focus():a.eq(b+1).focus()}else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a.stopPropagation(),a=$(this).find("a"),b=a.index($(document.activeElement)),0===b?a.last().focus():a.eq(b-1).focus()})});$(".shopByMobile .shopQVCTV \x3e a").keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),$(this).click(),$(this).attr("aria-expanded","true"),setTimeout(function(){$(".shopByMobile .shopTVDropDown a").first().focus()},50),$(".shopByMobile .shopTVDropDown").on("keydown",
function(a){if(27===a.which)$(this).off("keydown"),a.stopPropagation(),$("a.mainMenuMobile").click(),setTimeout(function(){$(".shopByMobile .shopQVCTV \x3e a").attr("aria-expanded","false").focus()},50);else if(40===a.which||9===a.which&&!a.shiftKey){a.preventDefault();a.stopPropagation();a=$(this).find("a");var b=a.index($(document.activeElement));b===a.length-1?a.first().focus():a.eq(b+1).focus()}else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a.stopPropagation(),a=$(this).find("a"),
b=a.index($(document.activeElement)),0===b?a.last().focus():a.eq(b-1).focus()})});$(".shopByMobile .deals \x3e a").keydown(function(a){if(13===a.which||32===a.which)a.preventDefault(),$(this).click(),$(this).attr("aria-expanded","true"),setTimeout(function(){$(".shopByMobile .dealsDropDown a").first().focus()},50),$(".shopByMobile .dealsDropDown").on("keydown",function(a){if(27===a.which)$(this).off("keydown"),a.stopPropagation(),$("a.mainMenuMobile").click(),setTimeout(function(){$(".shopByMobile .deals \x3e a").attr("aria-expanded",
"false").focus()},50);else if(40===a.which||9===a.which&&!a.shiftKey){a.preventDefault();a.stopPropagation();a=$(this).find("a");var b=a.index($(document.activeElement));b===a.length-1?a.first().focus():a.eq(b+1).focus()}else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a.stopPropagation(),a=$(this).find("a"),b=a.index($(document.activeElement)),0===b?a.last().focus():a.eq(b-1).focus()})});$(".shopByMobile .flyoutMenuLink \x3e a").keydown(function(a){if(13===a.which||32===a.which){a.preventDefault();
var b=$(".shopByMobile .flyoutMenuLink \x3e a").index($(this));$(this).click();$(this).attr("aria-expanded","true");setTimeout(function(){$(".shopByMobileSub .flyoutSection").eq(b).find("a").first().focus()},50);$(".shopByMobileSub .flyoutSection").eq(b).on("keydown",function(a){if(27===a.which){$(this).off("keydown");a.stopPropagation();a=$(".shopByMobileSub .flyoutSection");var b=a.index($(this));$("a.mainMenuMobile").click();setTimeout(function(){$(".shopByMobile .flyoutMenuLink \x3e a").eq(b).attr("aria-expanded",
"false").focus()},50)}else if(40===a.which||9===a.which&&!a.shiftKey)a.preventDefault(),a.stopPropagation(),a=$(this).find(".mobFlyoutHeader \x3e a, .menuHeader"),b=a.index($(document.activeElement)),b===a.length-1?a.first().focus():a.eq(b+1).focus();else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a.stopPropagation(),a=$(this).find(".mobFlyoutHeader \x3e a, .menuHeader"),b=a.index($(document.activeElement)),0===b?a.last().focus():a.eq(b-1).focus()});$(".shopByMobileSub .flyoutSection").eq(b).find(".menuHeader").on("keydown",
function(a){if(13===a.which||32===a.which){var b,c;a.preventDefault();a.stopPropagation();$(this).click();$(this).attr("aria-expanded","true");var d=$(this).siblings("ul");setTimeout(function(){d.find("a").first().focus()},50);d.on("keydown",function(a){if(27===a.which)$(this).off("keydown"),a.stopPropagation(),a=$(this).siblings(".menuHeader"),a.click().focus(),a.attr("aria-expanded","false");else if(40===a.which||9===a.which&&!a.shiftKey)a.preventDefault(),a.stopPropagation(),b=$(this).find("a"),
c=b.index($(document.activeElement)),c===b.length-1?b.first().focus():b.eq(c+1).focus();else if(38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a.stopPropagation(),b=$(this).find("a"),c=b.index($(document.activeElement)),0===c?b.last().focus():b.eq(c-1).focus()})}})}})},init:function(){this.initDesktop();this.initMobile()}},predictiveSearch={typingTimer:null,typingInt:100,characterMin:2,makeRequests:!0,panelShown:!1,srchForm:null,srchField:null,srchTerm:"",selectedId:"pSearchSelected",pSearchId:"#predictiveSearch",
mhWrapper:null,psWrapper:'\x3cdiv id\x3d"predictiveSearch" role\x3d"listbox"\x3e\x3c/div\x3e',removePSearch:function(){$(this.pSearchId).remove();this.panelShown=!1;this.srchField.attr("aria-expanded","false").attr("aria-activedescendant","")},getTitleTranslation:function(a,b){b.featuredProductsTitle="undefined"!==typeof b.featuredProductsTitle?b.featuredProductsTitle:i18n.get("Featured Products");b.categoriesTitle="undefined"!==typeof b.categoriesTitle?b.categoriesTitle:i18n.get("Categories");b.brandsTitle=
"undefined"!==typeof b.brandsTitle?b.brandsTitle:i18n.get("Brands");a=a.toLowerCase();return"brands"===a?b.brandsTitle:"featured"===a?b.featuredProductsTitle:b.categoriesTitle},addInputEvents:function(){var a=this;a.srchField.off("keydown").on("keydown",function(b){27!==b.which&&9!==b.which||a.removePSearch();$(a.pSearchId).length&&(40===b.keyCode&&(b.preventDefault(),$("#"+a.selectedId).attr("id",""),$(a.pSearchId+" a").first().attr("id",a.selectedId).focus(),a.srchField.attr("aria-activedescendant",
a.selectedId)),38===b.keyCode&&(b.preventDefault(),$("#"+a.selectedId).attr("id",""),$(a.pSearchId+" a").last().attr("id",a.selectedId).focus(),a.srchField.attr("aria-activedescendant",a.selectedId)))});a.srchField.off("keyup").on("keyup",function(b){clearTimeout(a.typingTimer);8===b.keyCode&&(a.makeRequests=!0);if(a.srchTerm===a.srchField.val())return!1;a.srchTerm=a.srchField.val();if(a.srchField.val().length>=a.characterMin&&a.makeRequests){var c=a.srchField.val();a.typingTimer=setTimeout(function(){a.callTypeAhead(c)},
a.typingInt)}else a.removePSearch()})},addPSearchEvents:function(){var a=this;a.srchField.attr("aria-expanded","true");a.mhWrapper.off("masthead.pin").on("masthead.pin",function(){$(a.pSearchId).length&&a.mhWrapper.addClass("searchOpenPin")});$(document).off("click.psearch").on("click.psearch",function(b){$(b.target).closest(a.pSearchId).length||$(a.pSearchId).is(":visible")&&a.removePSearch()});$(a.pSearchId+" a").off("keydown").on("keydown",function(b){b.preventDefault();13!==b.which&&32!==b.which||
this.click();27===b.which&&(a.removePSearch(),a.srchField.focus());if(40===b.which||9===b.which&&!b.shiftKey){$("#"+a.selectedId).attr("id","");var c=$(a.pSearchId+" a").filter(":visible"),d=c.index($(this));d===c.length-1?c.first().attr("id",a.selectedId).focus():c.eq(d+1).attr("id",a.selectedId).focus()}if(38===b.which||9===b.which&&b.shiftKey)$("#"+a.selectedId).attr("id",""),c=$(a.pSearchId+" a").filter(":visible"),d=c.index($(this)),0===d?c.last().attr("id",a.selectedId).focus():c.eq(d-1).attr("id",
a.selectedId).focus()})},callTypeAhead:function(a){var b=this;$.ajax({method:"GET",url:b.srchForm.data("predictive-search-service"),headers:{"Content-Type":"application/json",Accept:"application/json"},dataType:"json",mimeType:"json",async:!0,cache:!0,data:{"search-term":a,"media-type":"json"},success:function(a,d,f){b.renderSearch(a)},error:function(a,d,f){b.removePSearch()}})},renderSearch:function(a){var b=this;if("undefined"!==typeof a.displayConfiguration)var c=a.displayConfiguration;var d=null;
"undefined"!==typeof a.navigation&&(d=a.navigation.refinements);var f=null;"undefined"!==typeof a.products&&(f=a.products);var m=b.srchTerm,p=new RegExp("\\b("+m+".*?)\\b","gi"),h={};a=[];if(null!=d||null!=f){var t=0;null!==d&&$.each(d,function(a,d){var f="";f+='\x3ch3 class\x3d"title"\x3e'+b.getTitleTranslation(d.name,c)+"\x3c/h3\x3e";$.each(d.values,function(a,b){t++;var g=b.name;a=g.trim().replace(/ /g,"_");var h=g.match(p);$(h).each(function(){g=g.replace(this,'\x3cspan class\x3d"highlight"\x3e'+
this+"\x3c/span\x3e")});itemCount="";if("Categories"===d.name&&c.categoryShowCountsEnabled||"Brands"===d.name&&c.brandShowCountsEnabled)itemCount+='\x3cspan class\x3d"itemCount" aria-label\x3d"'+b.count+' results"\x3e('+b.count+")\x3c/span\x3e";f+='\x3ca role\x3d"option" manual_cm_sp\x3d"PSEARCH_'+d.name.toUpperCase()+"-_-"+a.toUpperCase()+"-_-"+m.toUpperCase()+'" href\x3d"'+b.navigationState+'/c.html?sc\x3dPSCH" class\x3d"coremetricsLink"\x3e'+g+" "+itemCount+"\x3c/a\x3e"});h[d.name.toLowerCase()]=
'\x3cdiv class\x3d"pSearch-'+d.name.toLowerCase()+' refinement"\x3e'+f+"\x3c/div\x3e"});if(null!==f){var g="",r=0;$.each(f,function(a,b){t++;var c="";a=null!==b.reviews&&null!==b.reviews.averageRating&&null!==b.reviews.count;null!==b.baseImageUrl&&(c=b.baseImageUrl.replace("http://","//"));if(a)var d=b.reviews.averageRating.toString(),f=b.reviews.count;var h=$('\x3ca role\x3d"option" manual_cm_sp\x3d"PSEARCH_PRODUCTS-_-'+b.productNumber+"-_-"+m.toUpperCase()+'" href\x3d"/qvc.product.'+b.productNumber+
'.html?sc\x3dPSCH" class\x3d"thumbnail coremetricsLink"\x3e\x3c/a\x3e');c=$('\x3cimg aria-hidden\x3d"true" src\x3d"'+c+(-1===c.indexOf("?")?"?":"\x26")+'$aemprodcarousel$"\x3e');var v=b.shortDescription.match(p),A=b.shortDescription;$(v).each(function(){A=A.replace(this,'\x3cspan class\x3d"highlight"\x3e'+this+"\x3c/span\x3e")});b=$('\x3cdiv class\x3d"caption text-center"\x3e\x3ch6\x3e'+A+"\x3c/h6\x3e\x3c/div\x3e");if(a){var L=d?d.charAt(0)+"_"+d.charAt(2):"0_0";L=$('\x3cspan class\x3d"pItemRevStar"\x3e\x3cimg src\x3d"'+
"//qvc.ugc.bazaarvoice.com/1689wcs-en_us/#/5/rating.gif".replace(/#/,L)+'" /\x3e\x3cspan class\x3d"pItemRev"\x3e('+(f?f:"0")+")\x3c/span\x3e\x3c/span\x3e")}c.appendTo(h);b.appendTo(h);a&&L.appendTo(h);0!==r%2&&h.addClass("col-border-left");2==r|3==r&&h.addClass("col-border-top");r++;g+=h[0].outerHTML});h.featuredProducts='\x3cdiv class\x3d"pSearch-featuredProducts"\x3e\x3ch3 class\x3d"title"\x3e'+b.getTitleTranslation("featured",c)+'\x3c/h3\x3e\x3cdiv class\x3d"itemContainer"\x3e'+g+"\x3c/div\x3e\x3c/div\x3c/div\x3e"}a=
[{type:"brands",order:c.brandSection},{type:"categories",order:c.categorySection},{type:"featuredProducts",order:c.featureProductsSections}].sort(function(a,b){return a.order-b.order});if(m===b.srchField.val()||m===$.trim(b.srchField.val()))b.removePSearch(),b.mhWrapper.find(".searchFormWrapper").append(b.psWrapper),$.each(a,function(a,c){$(b.pSearchId).append(h[c.type])}),$(".coremetricsLink").click(function(a){a.preventDefault();var b=$(this);cmCreateManualLinkClickTag("cm_sp\x3d"+b.attr("manual_cm_sp"));
setTimeout(function(){qOpenUrl(b.attr("href"))},500)}),!1===b.panelShown&&cmCreateManualLinkClickTag("cm_sp\x3dPSEARCH_DISPLAYED-_-"+m.toUpperCase()+"-_-"+t),b.panelShown=!0,b.addPSearchEvents()}else" "===b.srchField.val().slice(-1)?b.makeRequests=!0:(b.makeRequests=!1,b.removePSearch()),b.panelShown=!0},init:function(){mastheadDisplay.isMobileApp||(this.srchForm=$("form.searchForm"),this.srchField=$("#txtMastheadSearch"),this.srchTerm=this.srchField.val(),this.mhWrapper=$("#pageMasthead"),this.typingInt=
this.srchForm.data("typing-interval")?this.srchForm.data("typing-interval"):this.typingInt,this.characterMin=this.srchForm.data("character-minimum")?this.srchForm.data("character-minimum"):this.characterMin,"0"===$(".searchInputBox").css("opacity")&&this.removePSearch(),this.addInputEvents())}},featuredChannels={collpased:120,expanded:200,isOverlay:!1,isBusy:!1,resizeTimer:null,hoverTimer:null,displayState:null,channels:$("#featuredChannels"),marker:$(".ftdChannelsMarker"),viewChange:function(){var a=
this;$("html").hasClass("mh-mobile-display")&&"mobile"!==a.displayState?(a.displayState="mobile",a.isOverlay?$(document).off("mouseenter.ftdChannels"):(a.clone(),$(document).off("mouseenter.ftdChannels"),a.channels.on("touchstart.ftdSwipe",function(b){a.touch.swipeStart(b)}),a.channels.on("touchmove.ftdSwipe",function(b){a.touch.swipeMove(b)}),a.channels.on("click.ftdSwipe",".ftdChannelsItem:not(.current) a",function(b){b.preventDefault();b.stopPropagation();a.scrollTo($(this))}))):$("html").hasClass("mh-desktop-display")&&
"desktop"!==a.displayState&&(a.displayState="desktop",a.isOverlay||(a.deClone(),a.channels.off(".ftdSwipe")),$(document).on("mouseenter.ftdChannels",".ftdChannelsItem a",function(b){var c=$(this);clearTimeout(a.hoverTimer);a.hoverTimer=setTimeout(function(){a.hover(c)},200)}),a.hover($(".ftdChannels .ftdChannelsItem.current a")))},personalizeChannel:function(){var a=$(".ftdChannelsItem").find(".personalizedChannel");if(0!==a.length){var b=$(".greetingLong").eq(0).text();b=""===b||14<b.length?i18n.get("My Channel"):
b+"'s "+i18n.get("Channel");a.find(".caption .head").text(b)}},moveMarker:function(a){var b=$(".ftdChannels .ftdChannelsItem.current a"),c=b.outerWidth(),d=b.outerHeight();b=b.position().left;this.marker.css({opacity:"undefined"!==typeof a&&a?0:1,width:c-24+"px",height:d-24+"px",left:b+12+"px"});if("undefined"!==typeof a&&a)this.marker.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend");
$(this).css("opacity",1)})},hover:function(a,b){var c=this,d=a.closest(".ftdChannelsItem");if(!a.hasClass("comingSoon")&&!d.hasClass("current")||b)b?c.moveMarker():(c.marker.css("opacity","0"),$(".ftdChannelsItem").removeClass("current"),d.addClass("current").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend");c.moveMarker()}),c.isOverlay&&c.moveMarker())},deClone:function(){$(".ftdChannels .carouselList .cloned").remove()},
clone:function(){var a=$(".ftdChannels .carouselList .ftdChannelsItem"),b=a.not(".comingSoon").clone(),c=a.not(".comingSoon").clone();b.removeClass("current").addClass("cloned").attr("aria-hidden","true").insertBefore(a.first());c.removeClass("current").addClass("cloned").attr("aria-hidden","true").insertAfter(a.last())},getScrollPos:function(a,b){var c=a.closest(".carouselWrapper").outerWidth();c=Math.floor(c/2);var d=this.expanded,f=Math.floor(d/2);a=a.position().left;"right"===b&&(a-=d-this.collpased);
return a-c+f},getScrollMax:function(){var a=$(".ftdChannels .carouselList");return a.get(0).scrollWidth-a.outerWidth()},slide:function(a){if(this.isOverlay)this.slideMore(a);else{this.isBusy=!0;var b=this,c=$(".ftdChannels .carouselList");b.marker.css("opacity","0");"left"===a?c.animate({scrollLeft:0},400,function(){b.isBusy=!1;b.hover($(".ftdChannels .ftdChannelsItem.current a"),!0);b.reArrow()}):(a=b.getScrollMax(),c.animate({scrollLeft:a},400,function(){b.isBusy=!1;b.hover($(".ftdChannels .ftdChannelsItem.current a"),
!0);b.reArrow()}))}},slideOne:function(a){this.isBusy=!0;var b=this,c=!1,d=$(".ftdChannels .carouselList"),f=$(".ftdChannels .ftdChannelsItem"),m=$(".ftdChannels .carArrow").outerWidth(),p=d.outerWidth(),h=f.outerWidth(),t=p-m,g=d.scrollLeft();b.marker.css("opacity","0");var r,v=0;f.filter(":visible").each(function(){var b=$(this),d=b.position().left,f=$(".ftdChannels .carArrow.left").hasClass("inactive")?0:m,g=$(".ftdChannels .carArrow.right").hasClass("inactive")?p-h:t-h;d="left"===a?Math.ceil(d):
Math.floor(d);if("left"===a&&-h<=d&&d<f)return r=b,c=!0;if("right"===a&&Math.ceil(g)<d&&d<=p+h)return r=b,!1;if(c)return!1});var A=r.index();0===A?v=0:A===f.length-1?v=b.getScrollMax():"left"===a?v=g+r.position().left-m:"right"===a&&(f=r.position().left,v=g+(f+h)-t);d.animate({scrollLeft:v},400,function(){b.isBusy=!1;b.hover($(".ftdChannels .ftdChannelsItem.current a"),!0);b.reArrow()})},slideMore:function(a){this.isBusy=!0;var b=this,c=!1,d=$(".ftdChannels .carouselList"),f=$(".ftdChannels .ftdChannelsItem"),
m=d.outerWidth(),p=d.scrollLeft();b.marker.css("opacity","0");var h,t=0;f.filter(":visible").each(function(){var b=$(this),d=b.outerWidth(),f="left"===a?Math.floor(b.position().left):Math.ceil(b.position().left),g="left"===a?Math.ceil(d+f):Math.floor(d+f);if("left"===a&&1>=f&&g<=Math.ceil(d))return h=b,c=!0;if("right"===a&&f>=Math.ceil(m-d)&&g>=m)return h=b,!1;if(c)return!1});var g=h.index();0===g?t=0:g===f.length-1?t=b.getScrollMax():"left"===a?(f=h.position().left,t=m-h.outerWidth(),t=p+f-t):"right"===
a&&(t=p+h.position().left);d.animate({scrollLeft:t},400,function(){b.isBusy=!1;b.moveMarker(!0);b.reArrow()})},scroll:function(a,b,c){var d=this,f=a.closest(".carouselWrapper");$(".ftdChannelsItem").removeClass("current");a.addClass("current");a=d.getScrollPos(a,b);c?f.animate({scrollLeft:a},500,function(){d.isBusy=!1}):f.scrollLeft(a)},scrollTo:function(a){if(!this.isBusy){this.isBusy=!0;var b=$(".ftdChannelsItem.current"),c=a.closest(".carouselWrapper");a=a.closest(".ftdChannelsItem");var d=b.index();
d=a.index()>d?"right":"left";a.hasClass("cloned")?(b=b.data("list-index"),a=a.data("list-index"),b=$('.ftdChannels .ftdChannelsItem.cloned[data-list-index\x3d"'+b+'"]'),a=$('.ftdChannels .ftdChannelsItem[data-list-index\x3d"'+a+'"]').not(".cloned"),b=b.eq("left"===d?1:0),b.addClass("current"),d=this.getScrollPos(b),c.scrollLeft(d),this.scroll(a,"right",!0)):this.scroll(a,d,!0)}},next:function(){if(!this.isBusy){this.isBusy=!0;var a=$(".ftdChannelsItem.current"),b=a.closest(".carouselWrapper");a=a.nextAll().not(".comingSoon").eq(0);
if(a.hasClass("cloned")){a=$(".ftdChannels .ftdChannelsItem").not(".cloned,.comingSoon").first();var c=a.prevAll().not(".comingSoon").eq(0).addClass("current");c=this.getScrollPos(c);b.scrollLeft(c)}this.scroll(a,"right",!0)}},prev:function(){if(!this.isBusy){this.isBusy=!0;var a=$(".ftdChannelsItem.current"),b=a.closest(".carouselWrapper");a=a.prevAll().not(".comingSoon").eq(0);if(a.hasClass("cloned")){a=$(".ftdChannels .ftdChannelsItem").not(".cloned,.comingSoon").last();var c=a.nextAll().not(".comingSoon").eq(0).addClass("current");
c=this.getScrollPos(c);b.scrollLeft(c);this.scroll(a,"right",!0)}else this.scroll(a,"left",!0)}},resize:function(){var a=this,b=a.channels.find(".ftdChannelsItem.current");setTimeout(function(){"desktop"===a.displayState?(a.hover(b.find("a"),!0),a.reArrow()):a.isOverlay?a.landscape():a.scroll($(".ftdChannels .ftdChannelsItem.current"))},400)},landscape:function(){var a=$(window).outerWidth(),b=$(window).outerHeight();640>a&&a>b?this.channels.addClass("ftdChannelsLandscape"):this.channels.removeClass("ftdChannelsLandscape")},
arrows:function(a){a=$(a).closest(".carArrow").hasClass("left")?"left":"right";"desktop"===this.displayState?this.slide(a):this.isOverlay||("left"===a?this.prev():this.next())},reArrow:function(){if(!this.isBusy){var a=$(".ftdChannels .carouselWrapper"),b=$(".ftdChannels .carouselList"),c=this.getScrollMax();0>=b.scrollLeft()?a.siblings(".carArrow.left").addClass("inactive"):a.siblings(".carArrow.left.inactive").removeClass("inactive");b.scrollLeft()>=c-2?a.siblings(".carArrow.right").addClass("inactive"):
a.siblings(".carArrow.right.inactive").removeClass("inactive")}},close:function(a){$(document).trigger("ftdChannelsClose");this.displayState=null;this.deClone();this.channels.off("keydown.ftdChannels");$(document).off(".ftdChannels");$(window).off(".ftdChannels");"searchBtn"===a?$('[data-component-type\x3d"MASTHEAD_MENU"] .menuSearch a').click():"searchField"===a?$('[data-component-type\x3d"MASTHEAD_MENU"] .searchInputBox .searchInput').focus():"menuBtn"===a&&$('[data-component-type\x3d"MASTHEAD_MENU"] .menuHamburger').click()},
open:function(){var a=this;$(document).trigger("ftdChannelsOpen");$(window).trigger("scroll");a.viewChange();"desktop"===a.displayState?(a.hover(a.channels.find(".ftdChannelsItem.current a"),!0),a.reArrow(),setTimeout(function(){a.hover(a.channels.find(".ftdChannelsItem.current a"),!0);a.reArrow()},1600)):(a.isOverlay&&a.landscape(),a.scroll($(".ftdChannels .ftdChannelsItem.current")));a.channels.find(".ftdChannelsItem.current a").focus();a.channels.on("keydown.ftdChannels",function(a){27===a.which&&
(a.preventDefault(),$('section \x3e [data-component-type\x3d"MASTHEAD_MENU"] .ftdChannelsBtn').filter(":visible").focus().click());if(39===a.which||40===a.which||9===a.which&&!a.shiftKey)a.preventDefault(),a=$(a.target).closest(".ftdChannelsItem"),a.index()===$(this).find(".ftdChannelsItem").length-1?a.closest(".ftdChannelsCont").find("a").first().focus():a.next().find("a").focus();else if(37===a.which||38===a.which||9===a.which&&a.shiftKey)a.preventDefault(),a=$(a.target).closest(".ftdChannelsItem"),
0===a.index()?a.closest(".ftdChannelsCont").find("a").last().focus():a.prev().find("a").focus()});$(document).on("click.ftdChannels",function(b){var c="";$(b.target).hasClass("fancybox-close")||!(1>$(b.target).closest(".ftdChannelsCont,.fancybox-overlay").length)||0<$(b.target).closest(".menuLogo, .menuCart, .menuMyAccount, .menuTV, .menuDeals").length||(0<$(b.target).closest(".menuSearch").length?c="searchBtn":0<$(b.target).closest(".searchInputBox").length?c="searchField":0<$(b.target).closest(".menuHamburger").length&&
(c="menuBtn"),b.preventDefault(),a.fade(c))});$(window).on("resize.ftdChannels",function(){clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){$("body").hasClass("ftdChannelsOpen")&&(a.viewChange(),a.resize())},200)})},fade:function(a){var b=this,c=$("body").hasClass("ftdChannelsOpen"),d=$(".ftdChannelsWrap");b.channels.attr("aria-hidden",c?"true":"false");$("button.ftdChannelsBtn").attr("aria-expanded",c?"false":"true");c?(d.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",
function(){$(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend");b.close(a);$(this).css("display","");$(this).find('[data-component-type\x3d"MASTHEAD_MENU"]').remove()}),$("body").removeClass("ftdChannelsOpen")):(d.css("display","block"),$('[data-component-type\x3d"MASTHEAD_MENU"]').clone().addClass(b.isOverlay?"isFtdOverlay":"").appendTo(d),setTimeout(function(){$("body").addClass("ftdChannelsOpen");b.open()},20))},touch:{initialTouchCoords:{x:0,y:0},swipeDeltaDetect:40,
swipeStart:function(a){for(i=0;i<a.touches.length;i++)this.initialTouchCoords.x=a.touches[i].pageX,this.initialTouchCoords.y=a.touches[i].pageY},swipeMove:function(a){Math.abs(a.touches[0].pageX-this.initialTouchCoords.x)>Math.abs(a.touches[0].pageY-this.initialTouchCoords.y)&&(a.preventDefault(),a=this.initialTouchCoords.x-a.touches[0].pageX,Math.abs(a)>this.swipeDeltaDetect&&!featuredChannels.isBusy&&(0<a?featuredChannels.next():0>a&&featuredChannels.prev()))}},tooltip:function(){var a=$("#featuredChannels .ftdChannelsTTBanner");
if(0<$("#ftdChannelsDtTT").length&&!a.hasClass("active")){$("#ftdChannelsDtTT").popover({html:!0});var b=$("#ftdChannelsDtTT").data("content");(this.isOverlay?a.find(".col-tn-12"):a).html(b);a.addClass("active")}},init:function(){var a=this;$("button.ftdChannelsBtn, .ftdChannels button.closeBtn").on("click",function(b){b.preventDefault();b.stopPropagation();a.fade()});$(".ftdChannelsCarousel .carArrow button").on("click",function(b){a.arrows(this)});a.isOverlay=$(".ftdChannelsCont").hasClass("ftdChannelsOverlay");
a.isOverlay?$(".ftdChannelsWrap").addClass("ftdChannelsWrapOverlay"):$(".ftdChannelsWrap").addClass("ftdChannelsWrapStrip");a.tooltip();a.personalizeChannel()}},qMsg={$insertAfterStatic:$(),$insertAfterDismissable:$(),iDefaultTimerDuration:5E3,iDefaultMsgSlidingTime:500,timeoutHandler:null,oTempl:{sClassMsg:"qMsg",sClassMsgOuterWr:"qMsgOuterWr",sClassMsgSlide:"qMsgSlide",dismissableBase:'\x3cdiv class\x3d"alert alert-{type} dismissable qMsg" role\x3d"alert"\x3e\x3cdiv class\x3d"copy"\x3e{content}\x3c/div\x3e\x3c/div\x3e',
staticBase:'\x3cdiv class\x3d"alert alert-{type} static qMsg" role\x3d"alert"\x3e\x3cdiv class\x3d"copy"\x3e{content}\x3c/div\x3e\x3c/div\x3e',getMessageHtml:function(a,b,c,d){var f="";d="object"===typeof d?d:$("."+this.sClassMsgOuterWr);if("static"===c){a=this.staticBase.replace("{type}",b).replace("{content}",a);c=0<d.find(".static.alert-success").length?d.find(".static.alert-success").get(0).outerHTML:"";f=0<d.find(".static.alert-success-secondary").length?d.find(".static.alert-success-secondary").get(0).outerHTML:
"";var m=0<d.find(".static.alert-danger").length?d.find(".static.alert-danger").get(0).outerHTML:"",p=0<d.find(".static.alert-warning").length?d.find(".static.alert-warning").get(0).outerHTML:"",h=0<d.find(".static.alert-danger-secondary").length?d.find(".static.alert-danger-secondary").get(0).outerHTML:"";d=0<d.find(".static.alert-info").length?d.find(".static.alert-info").get(0).outerHTML:"";switch(b){case "success":c=a;break;case "success-secondary":f=a;break;case "danger":m=a;break;case "danger-secondary":h=
a;break;case "info":d=a;break;case "warning":p=a}f="\x3cdiv\x3e{success}{success-secondary}{danger}{danger-secondary}{info}{warning}\x3c/div\x3e".replace("{success}",c).replace("{success-secondary}",f).replace("{danger}",m).replace("{danger-secondary}",h).replace("{info}",d).replace("{warning}",p)}else"dismissable"===c&&(f=this.dismissableBase.replace("{type}",b).replace("{content}",a));return f}},isPageTitleAvailable:function(){return!1},isBreadcrumbAvailable:function(){return $(".pageBreadcrumb").is(":visible")},
isMastheadAvailable:function(){return $("#pageMasthead").is(":visible")||$(".simpleMasthead").is(":visible")},getInsertAfterElPageTitle:function(){return $()},getInsertAfterElBreadcrumb:function(){return $("nav.breadcrumbs").length&&$("nav.breadcrumbs").closest(".qComponent").length?$("nav.breadcrumbs").closest(".qComponent"):$(".breadcrumb").closest(".container")},getInsertAfterElMasthead:function(){return $("#pageMasthead").length?$("#pageMasthead"):$(".simpleMasthead").length?$(".simpleMasthead"):
$()},determineInsertAfterElements:function(a){var b=$(".fancybox-wrap .overlayHeader");a="object"===typeof a&&"boolean"===typeof a.inoverlay?a.inoverlay:!0;0<b.length&&a?this.$insertAfterStatic=b:this.isMastheadAvailable()?(this.$insertAfterDismissable=$("#pageMasthead").length?$("#pageMasthead"):$(".simpleMasthead").length?$(".simpleMasthead").first():$("#divMenuText"),this.isPageTitleAvailable()?this.$insertAfterStatic=this.getInsertAfterElPageTitle():this.isBreadcrumbAvailable()?this.$insertAfterStatic=
this.getInsertAfterElBreadcrumb():this.$insertAfterStatic=this.getInsertAfterElMasthead()):mastheadDisplay.isMobileApp?this.$insertAfterStatic=this.$insertAfterDismissable=$("body"):$("body").hasClass("checkout")&&(this.$insertAfterStatic=this.$insertAfterDismissable=$(".logoWr").closest(".row"))},wrapHtmlMsg:function(a,b){var c=this.oTempl.sClassMsgOuterWr,d=$(a);1<d.length&&(a="\x3cdiv\x3e"+a+"\x3c/div\x3e",d=$("\x3cdiv\x3e\x3c/div\x3e").append(d));"dismissable"===b&&(d=$(a).wrap('\x3cdiv class\x3d"'+
this.oTempl.sClassMsgSlide+'"\x3e\x3c/div\x3e').parent());if("static"===b){if(!this.isPageTitleAvailable()&&this.isBreadcrumbAvailable()||this.isMastheadAvailable())c+=" container"}else this.isMastheadAvailable()&&(c+=" container");c+=" "+b;$("[data-qmsg-col-classes]").length&&(d=d.wrap('\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"'+$("[data-qmsg-col-classes]").data("qmsg-col-classes")+'"\x3e\x3c/div\x3e\x3c/div\x3e').parent().parent());return!this.isMastheadAvailable()&&$("body").hasClass("checkout")?
d.wrap('\x3cdiv class\x3d"'+c+' belowCOMasthead"\x3e\x3c/div\x3e').parent().get(0).outerHTML:d.wrap('\x3cdiv class\x3d"'+c+'"\x3e\x3c/div\x3e').parent().get(0).outerHTML},updateMsgPosition:function(a){this.isPageTitleAvailable()||this.isBreadcrumbAvailable()||!this.isMastheadAvailable()&&$("body").hasClass("checkout")&&a.hasClass("static")&&$("."+this.oTempl.sClassMsgOuterWr+".dismissable").length&&a.before($(".qMsgOuterWr.dismissable"))},removeBanner:function(a){var b=$(),c=$("."+this.oTempl.sClassMsgOuterWr),
d=$("."+this.oTempl.sClassMsgSlide);$(window).off("scroll.qmessage");b="undefined"!==typeof a?$(".qMsg.alert-"+a):d.length?d:c;b.slideUp(this.iDefaultMsgSlidingTime,function(){c.is(".static")?b.remove():c.remove()})},clearTimeout:function(){this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=null)},setRemovalTimer:function(a){var b=this;b.clearTimeout();b.timeoutHandler=setTimeout(function(){b.removeBanner()},a)},callbackScrollAnimationAlways:function(a,b,c,d){var f=this;c=
$("."+f.oTempl.sClassMsgSlide).length?$("."+f.oTempl.sClassMsgSlide):"undefined"!==typeof a?a:$();c.length&&(f.clearTimeout(),c.slideDown(f.iDefaultMsgSlidingTime,function(){qScroll.toElement(a,!0);"dismissable"===b&&d.bIsTimed&&f.setRemovalTimer(d.iDuration)}).focus())},addMsgCloseListener:function(a){var b=this;a.on("closed.bs.alert",function(){$(window).off("scroll.qmessage");$("."+b.oTempl.sClassMsgOuterWr+".dismissable").remove()})},showBanner:function(a,b,c,d){var f=this,m="",p=$(),h=$(".fancybox-wrap .overlayHeader");
0<h.length&&("object"!==typeof d||"object"===typeof d&&!1!==d.inoverlay)?(p=$(".fancybox-inner ."+f.oTempl.sClassMsgOuterWr+"."+b),0===p.length&&(h.append('\x3cdiv class\x3d"'+f.oTempl.sClassMsgOuterWr+" "+b+'"\x3e\x3c/div\x3e'),p=h.find("."+f.oTempl.sClassMsgOuterWr+"."+b))):p=$("."+f.oTempl.sClassMsgOuterWr+"."+b+":not(.fancybox-inner ."+f.oTempl.sClassMsgOuterWr+"."+b+")");var t=$("body.checkout .cartSummary, body.cart .cartSummary");h={scrollTop:0};d="object"===typeof d?d:{};f.determineInsertAfterElements(d);
"boolean"===typeof d.bIsTimed&&d.bIsTimed&&"number"!==typeof d.iDuration&&(d.iDuration=f.iDefaultTimerDuration);if(f.$insertAfterStatic.length){if("object"===typeof a&&1<a.length&&"object"===typeof c&&1<c.length)for(var g=0;g<a.length;g++)m+=f.oTempl.getMessageHtml(a[g],c[g],b,p);else m=f.oTempl.getMessageHtml(a,c,b,p);"boolean"===typeof d.persist&&d.persist&&(m=m.replace("qMsg","qMsg persist"));m=f.wrapHtmlMsg(m,b);p.length?p.replaceWith(m):mastheadDisplay.isMobileApp?f.$insertAfterDismissable.prepend(m):
$(m).insertAfter("static"===b?f.$insertAfterStatic:f.$insertAfterDismissable);p=$(p.selector);f.addMsgCloseListener($(".alert",p));f.updateMsgPosition(p);$.fancybox.isOpen&&$(window).resize();$("html,body").animate(h,{always:function(){f.callbackScrollAnimationAlways(p,b,t,d)},duration:f.iDefaultMsgSlidingTime-100})}},showGlobalStatic:function(a,b,c){this.showBanner(a,"static",b,c)},showGlobalDismissable:function(a,b,c){this.showBanner(a,"dismissable",b,c)},showMultiBanner:function(a,b,c,d){this.showBanner(a,
b,c,d)},init:function(){this.determineInsertAfterElements()}};
(function(a){function b(a,b){this.component=a;this.parent=b;this.init()}function c(a){this.timer=!1;this.timerInterval=6E4;this.urlTpl="{0}.html?noCache\x3dtrue\x26chnl\x3d{1}";this.module=a;this.module.data("onAir",this);this.init()}function d(b){var c=[],d=!1;a.each(b.component,function(f,p){c.push(a.get(b.urlTpl.replace("{0}",p.find("[data-cmp-path]").data("cmp-path")).replace("{1}",b.curChannelCode)).done(function(b){b=a(b).find("[data-hashcode]");0<b.length&&b.data("hashcode")?(b.data("hashcode")!==
p.find("[data-hashcode]").data("hashcode")&&p.html(b),a(document).trigger("onairmodule.update",[p])):d=!0}))});a.when.apply(null,c).then(function(){qvcCarousel.reArrow();b.toggleModule(d)},function(){b.toggleModule()})}b.prototype.init=function(){this.setCurChannel();this.addListeners()};b.prototype.setCurChannel=function(){var b=this;b.component.find("span").html(b.component.find('li[data-channel-code\x3d"'+b.parent.curChannelCode+'"]').html());a("[data-channel-code]").each(function(){var c=a(this);
c.toggleClass("selected",c.data("channel-code")===b.parent.curChannelCode)})};b.prototype.changeChannel=function(a){this.parent.module.trigger("channelChange",a);this.setCurChannel()};b.prototype.addListeners=function(){var b=this;b.component.find("li").on("click",function(){b.changeChannel(a(this).data("channel-code"))});b.component.find("select").on("change",function(){b.changeChannel(a(this).find(":selected").data("channel-code"))})};c.prototype.init=function(){this.component={ioa:this.module.find('[data-component-type\x3d"ON_AIR"]'),
iroa:this.module.find('[data-component-type\x3d"ITEMS_RECENTLY_ON_AIR"]')};this.curChannelCode=this.component.ioa.find("[data-channel]").data("channel");0<this.module.find(".onAirChannel").length&&(this.channelMenu=new b(this.module.find(".onAirChannel"),this));this.addListeners();this.startUpdate()};c.prototype.addListeners=function(){var a=this;a.module.on("channelChange",function(b,c){a.setCurChannelCode(c);a.startUpdate()});a.module.on("click",'[data-type\x3d"on-air"], [data-type\x3d"on-air-spd"]',
function(b){b.preventDefault();a.buyOnAirItem(this)})};c.prototype.toggleModule=function(a){this.module.toggleClass("hideModule","boolean"===typeof a?a:!0)};c.prototype.stopUpdate=function(){clearInterval(this.timer)};c.prototype.startUpdate=function(){var a=this;a.stopUpdate();d(a);a.timer=setInterval(function(){d(a)},a.timerInterval)};c.prototype.setCurChannelCode=function(a){this.curChannelCode="string"===typeof a&&a!==this.curChannelCode?a:this.curChannelCode};c.prototype.buyOnAirItem=function(b){b=
a(b);qVars.feature.aemCheckout?commonCartAjax.preAddToCart({$e:b,sContext:b.data("type"),sProdId:b.data("product-id"),sPersTemplate:b.data("pers-template"),bHasColorSize:b.data("has-color-size")}):qOpenUrl(b.attr("href"))};a.fn.onAir=function(){"object"===typeof prefsBeacon&&prefsBeacon.collect();return this.each(function(){new c(a(this))})}})(jQuery);
var qOpenUrlBusy=!1,qOpenUrl=function(a,b){"string"===typeof a&&a&&!qOpenUrlBusy&&(new RegExp("^((/(?!javascript:|/))|(https://"+window.location.host+"/)(?!javascript:))","i")).test(a)&&(a="function"===typeof URL?new URL(a,"https://"+window.location.host):a,qOpenUrlBusy=!0,qSpinner.addFullViewportSpinner(),!0===b?window.location.replace(a):window.location.assign(a))},qPrivacyBanner={optOut:!1,banner:$("#qPrivacyBanner"),version:parseInt($("#qPrivacyBanner").data("banner-version")),exp:parseInt($("#qPrivacyBanner").data("banner-exp")),
time:parseInt($("#qPrivacyBanner").data("banner-time")),persist:$("#qPrivacyBanner").data("banner-persist"),spacer:function(){$(".footerBtm").css("padding-bottom",this.banner.height())},getOpt:function(){return"undefined"!==typeof gdprCheck&&gdprCheck("q")},getSession:function(){return"true"===sessionStorage.getItem("privacyDismissed")?!0:!1},setSession:function(){sessionStorage.setItem("privacyDismissed","true")},getVersion:function(){var a=qCookie.get("privacyVersion");if(null===a||isNaN(a))a=0;
return parseInt(a)},setVersion:function(){qCookie.set("privacyVersion",this.version.toString(),{path:"/",expires:365})},getPrivacy:function(){return"true"===qCookie.get("pIsSet")?!0:!1},setPrivacy:function(a){qCookie.set("pIsSet","true",{path:"/",expires:"undefined"!==typeof a?a:365})},cookieOptOut:function(){var a=window.location.hostname;a=a.substring(a.indexOf(".qvc"));qCookie.set("OPTOUTMULTI","0:0|c1:0|c2:1|c3:1|c4:1|q:1",{path:"/",domain:a,expires:365})},cookieOptIn:function(){var a=window.location.hostname;
a=a.substring(a.indexOf(".qvc"));qCookie.set("OPTOUTMULTI","0:0|c1:0|c2:0|c3:0|c4:0|q:1",{path:"/",domain:a,expires:365});$(document).trigger("privacyBannerOptIn")},cookieDeny:function(){var a=window.location.hostname;a=a.substring(a.indexOf(".qvc"));qCookie.set("OPTOUTMULTI","0:0|c1:0|c2:1|c3:1|c4:1|q:1",{path:"/",domain:a,expires:this.exp})},showBanner:function(){var a=this;a.banner.show();a.banner.focus();if(a.optOut&&(a.setVersion(),!a.persist)){var b=isNaN(a.time)?1E4:1E3*a.time;a.setSession();
setTimeout(function(){a.removeBanner()},b)}a.banner.find(".cookie-btn").on("click",function(){a.setVersion();a.removeBanner();return!1});a.banner.find(".privacy-btn").on("click",function(){a.cookieOptIn();a.setPrivacy();a.removeBanner();return!1});a.banner.find(".privacy-btn-deny").on("click",function(){a.cookieDeny();a.setPrivacy(a.exp);a.removeBanner();return!1})},removeBanner:function(){this.banner.remove();$(".footerBtm").css("padding-bottom","");$(window).off(".pBanner")},displayState:function(){var a=
!1,b=this.getOpt(),c=this.getVersion(),d=this.getSession(),f=this.getPrivacy();this.version>c&&(a=!0);this.optOut&&(b||this.cookieOptOut(),f||d||(a=!0));return a},init:function(){var a=this;a.banner.hasClass("optOut")&&(a.optOut=!0,qVars.privacy={optOut:!0,exp:isNaN(a.exp)?30:a.exp});isNaN(a.version)&&(a.version=1);a.displayState()?(a.showBanner(),a.spacer(),$(window).on("resize.pBanner",function(){a.spacer()})):a.removeBanner()}},productListing={ANCHOR_REGEX:/#[^&]*/g,PL_ANCHOR:"#plModule",URL:null,
PAGE_PARAM:"currentPage",SORT_PARAM:"sort",MORE_FACETS_END:".morefacets.json",navigationSplit:window.location.pathname.split("_/N-"),description:null,refinement:$("#refinement").val()+"",searchTerm:$("#searchTerm").val()+"",queryName:$("#queryName").val()+"",pageTitle:$("#pageTitle").val()+"",refineOrder:$("#refineOrder").val()+"",currentPage:null,sectionPaths:{},mobileOpenClass:function(a){a?$("body").addClass("mobileFilterMenuOpen"):$("body").removeClass("mobileFilterMenuOpen")},mapSections:function(a){productListing.sectionPaths[a.data("moduleType")]=
a.data("modulePath")},navigate:function(a){qOpenUrl(a)},updateUrlParameter:function(a,b,c){a=a.replace(new RegExp("([?|\x26]"+b+")\x3d[^\x26#]+"),c?"$1\x3d"+c:"");c&&-1===a.indexOf(b)?a+=(-1<a.indexOf("?")?"\x26":"?")+b+"\x3d"+c:c||(a=a.replace(".html\x26",".html?"));return a},navWithParamChange:function(a,b,c){productListing.navigate(productListing.updateUrlParameter(a,b,c)+productListing.PL_ANCHOR)},pagingAction:function(a){a=$(a);var b=a.children("img"),c=b.hasClass("prvsPage");b=b.hasClass("nxtPage");
if(c||b)a=Math.max(productListing.currentPage+(c?-1:1),1),productListing.navWithParamChange(productListing.URL,productListing.PAGE_PARAM,a);else return a=parseInt(a.text()),isNaN(a)?0:productListing.navWithParamChange(productListing.URL,productListing.PAGE_PARAM,a)},add:function(a,b){0>a.indexOf(b)&&a.push(b)},remove:function(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)},serializePassthrough:function(){return $("#plpassthrough :input").filter(function(){return!!this.value}).serialize()},closeModal:function(){$(".refinementDiv ul.extended").remove();
$(".refinementDiv ul.original").show().removeClass("original");$(".facetedMulti").removeClass("expanded");$(".facetedMulti.expanded ul li a").unbind();$(".moreOptions a.btn").remove();$(".moreOptions a.skip_link").remove();$(".modal-backdrop").remove();$("body").removeClass("expandedRefinements");$(".moreOptions a.link").show()},init:function(){var a=this;productListing.URL=window.location.href.replace(productListing.ANCHOR_REGEX,"");productListing.description=1<productListing.navigationSplit.length?
productListing.navigationSplit[0]:"";$("section").each(function(){productListing.mapSections($(this))});productListing.currentPage=parseInt($(".pagination li.active a").text());var b=$(".facetedNav .facetedMulti").slice(0,2),c=$(".facetedNav .facetedSingle"),d=$("#filterLimitErrMsg").val(),f='\x3cdiv class\x3d"error-tooltip mobile"\x3e\x3cdiv class\x3d"closeTooltip"\x3e\x3c/div\x3e'+d+"\x3c/div\x3e";d='\x3cdiv class\x3d"errorDiv"\x3e\x3cp class\x3d"errorMsg" style\x3d"display:none;"\x3e'+d+"\x3c/p\x3e\x3c/div\x3e";
var m=function(){$(".modal-backdrop").length||($("body").append('\x3cdiv class\x3d"modal-backdrop fade"\x3e\x3c/div\x3e'),setTimeout(function(){$(".modal-backdrop").addClass("in")},1))},p=function(){$(".facetedNav .facetedMulti").each(function(a,b){"//qvc.scene7.com/is/image/QVC/attributeSelected?fmt\x3dpng-alpha"===$(b).find("img").attr("src")&&($(b).find("h3").addClass("expanded"),$(b).find(".refinementDiv").show())})},h=function(){$(".facetedNav .facetedMulti").filter(":last").addClass("last");
b.find("h3").removeClass("expanded");b.find(".refinementDiv").hide();c.find(".refinementDiv").hide();c.find("h3").removeClass("expanded");"true"===sessionStorage.getItem("menuFlag")?(m(),a.mobileOpenClass(!0)):$(".modal-backdrop").remove();$(".facetedSingle h3").off("click").click(function(){$(this).toggleClass("expanded").parent().find(".refinementDiv").toggle()});$(".facetedNav .facetedMulti").each(function(){p()});$(".refinementLnk").click(function(){if(10<=$(".plControlPanel .plSelectionPanel .selectedResultFacets li").length&&
"//qvc.scene7.com/is/image/QVC/attributeSelected?fmt\x3dpng-alpha"!==$(this).find("img").attr("src"))return $(".errorOverlay").show(),$(this).parents(".refinementDiv").find(".error-tooltip").addClass("errorBlock"),$(this).parents(".facetedMulti,.facetedSingle").siblings().find(".error-tooltip").hide(),!1})},t=function(){$(".refinementLnk").click(function(){if(10<=$(".plControlPanel .plSelectionPanel .selectedResultFacets li").length&&"//qvc.scene7.com/is/image/QVC/attributeSelected?fmt\x3dpng-alpha"!==
$(this).find("img").attr("src")){var a=$(this).parent(".refinementImg").position().top,b=$(this).width()+55;$(this).parents(".refinementDiv").find(".error-tooltip").addClass("errorBlock").css({top:a,left:b});$(".errorMsg").show();$(this).parents(".facetedMulti,.facetedSingle").siblings().find(".error-tooltip").hide();return!1}});b.find("h3").addClass("expanded");b.find(".refinementDiv").show();c.find(".refinementDiv").show();a.mobileOpenClass(!1);$("body.expandedRefinements").length?m():$(".modal-backdrop").remove();
$(".facetedSingle h3").off("click");$(".facetedNav .facetedMulti").each(function(a,b){1<a&&p()})};$(".refinementDiv").append(f);qViewport.is("\x3csm")&&(h(),$(".facetedNav").append('\x3cdiv class\x3d"errorOverlay"\x3e\x3c/div\x3e'));$(window).resize(function(){qViewport.is("\x3csm")?h():t()});qViewport.is("\x3e\x3dsm")&&(t(),$(".plSelectionPanel").append(d));$(".openMobileFilter").click(function(){sessionStorage.setItem("menuFlag","true");m();a.mobileOpenClass(!0)});"undefined"!==typeof Storage&&
"true"===sessionStorage.getItem("menuFlag")&&qViewport.is("\x3csm")&&(m(),a.mobileOpenClass(!0));$("body.mobileFilterMenuOpen .modal-backdrop,.doneState,.productResultFacets a").click(function(){sessionStorage.setItem("menuFlag","false");$(".modal-backdrop").remove();a.mobileOpenClass(!1)});$(".facetedMulti h3").on("keypress click",function(a){if(13===a.which||"click"===a.type)$(this).toggleClass("expanded"),$(this).parent().find(".refinementDiv").slideToggle("fast")});$(".sortLink").on("keydown",
function(a){if(13===a.which)return a.preventDefault(),$(".sortLink li.hlight a").length?$(".sortLink li.hlight a").click():$(this).toggleClass("opened"),!1;if(40===a.which||38===a.which){var b=$(".sortLink li"),c=1,d=0;38===a.which&&(d=c=-1);$(".sortLink li.hlight").length?(a=$(".sortLink li.hlight").index(),b.eq(a).removeClass("hlight"),b.eq(a+c).length?b.eq(a+c).addClass("hlight"):b.eq(d).addClass("hlight")):b.eq(d).addClass("hlight");return!1}});$(".sortLink").blur(function(){$(this).removeClass("opened");
$(this).find("li.hlight").removeClass("hlight")});$(".sortLink li a").click(function(){var a=productListing.updateUrlParameter(productListing.URL,productListing.PAGE_PARAM,"1");productListing.navWithParamChange(a,productListing.SORT_PARAM,$(this).attr("data-sort-value"))});$(".closeTooltip,.errorOverlay,body").click(function(a){$(".error-tooltip").hide();$(".errorMsg").hide();$(".errorOverlay").hide();$(".refinementDiv").find(".error-tooltip").removeClass("errorBlock")});$(".moreOptions a.link").on("keypress click",
function(b){if(13===b.which||"click"===b.type){b.preventDefault();$(this).closest(".facetedMulti").toggleClass("expanded");$(this).closest(".refinementDiv").find("ul").addClass("original").hide();$(this).closest(".refinementDiv").prepend('\x3cul class\x3d"extended" tabindex\x3d"0"\x3e\x3cli class\x3d"loading"\x3e\x3c/li\x3e\x3c/ul\x3e');var c=productListing.sectionPaths.PRODUCT_LISTING||productListing.sectionPaths.RECIPE_LISTING;b=$(this).data("more-id");var d=$(this).data("more-name"),f="Brand"===
d;c+=productListing.MORE_FACETS_END;b={refinement:productListing.refinement,"search-term":productListing.searchTerm,qn:productListing.queryName,pt:productListing.pageTitle,showMoreIds:b,showMoreName:d};$(".moreOptions").append('\x3ca class\x3d"skip_link" href\x3d"#"\x3e\x3c/a\x3e');var g="";qGet.urlParam("sort")&&(g="\x26sort\x3d"+qGet.urlParam("sort"));$(".moreOptions a.skip_link, .facetedMulti.expanded h3.expanded").on("keydown",function(a){a.preventDefault();9===a.which&&a.shiftKey?$(".moreOptions a.btn-secondary").focus():
9!==a.which||a.shiftKey||$(".refinementDiv ul.extended").focus()});$.ajax({url:c,data:b,dataType:"json",context:this,async:!0,success:function(a){$(".refinementDiv .extended .loading").remove();$.each(a,function(a,b){a="";var c="Unselected";b.selected?c="Selected":a="\x3cspan\x3e("+b.count+")\x3c/span\x3e";$(".refinementDiv ul.extended").append('\x3cli class\x3d"refinementImg"\x3e\x3ca class\x3d"refinementLnk" tabindex\x3d"0" href\x3d"'+b.navigationState.replace(/&showMoreIds=\d+/,"")+g+'" data-refinement-id\x3d"'+
b.refinementId+'" data-selected\x3d"'+b.selected+'" data-name\x3d"'+b.name.toLowerCase().replace(/ /g,"-")+'"\x3e\x3cimg src\x3d"//qvc.scene7.com/is/image/QVC/attribute'+c+'?fmt\x3dpng-alpha" height\x3d"15px" width\x3d"15px" alt\x3d""\x3e\x3cspan class\x3d"refinementTxt"\x3e'+b.name+"\x3c/span\x3e"+a+"\x3c/a\x3e\x3c/div\x3e")});$(".facetedMulti.expanded ul.extended li a").on("keypress click",function(a){if(13===a.which||"click"===a.type)qViewport.is("\x3e\x3dsm")&&a.preventDefault(),"true"===$(this).attr("data-selected")?
($(this).attr("data-selected","false"),$(this).children("img").attr("src","//qvc.scene7.com/is/image/QVC/attributeUnselected?fmt\x3dpng-alpha")):($(this).attr("data-selected","true"),$(this).children("img").attr("src","//qvc.scene7.com/is/image/QVC/attributeSelected?fmt\x3dpng-alpha"))})},error:function(a){$(".extended").prepend('\x3cdiv class\x3d"error-msg"\x3e'+i18n.get("Sorry. At this time there are no additional values being returned. Please select another attribute to refine your search.")+"\x3c/div\x3e");
$(".extended .loading").hide()}});qViewport.is("\x3csm")?$(this).hasClass("downArrow")?($(this).html(i18n.get("Less")),$(this).addClass("upArrow"),$(this).removeClass("downArrow")):($(this).html(i18n.get("More")),$(this).addClass("downArrow"),$(this).removeClass("upArrow"),$(".refinementDiv ul.extended").remove(),$(".refinementDiv ul.original").show().removeClass("original")):($(this).hide(),$(".refinementDiv ul.extended").focus(),$(this).after('\x3ca class\x3d"btn btn-primary col-sm-3 col-sm-offset-2" href\x3d"#" role\x3d"button"\x3e'+
i18n.get("Done")+'\x3c/a\x3e \x3ca class\x3d"btn btn-secondary col-sm-3 col-sm-offset-2" href\x3d"#" role\x3d"button"\x3e'+i18n.get("Cancel")+"\x3c/a\x3e"),m(),$("body").addClass("expandedRefinements"),$(".moreOptions a.btn").click(function(b){b.preventDefault();b=$(this);if(b.hasClass("btn-primary")){var c=productListing.refinement?productListing.refinement.split("Z"):[],d=productListing.description?productListing.description.slice(1,-1).split("/"):[];$(".refinementDiv ul.extended li").find("a").each(function(){var a=
$(this).data("refinement-id"),b=$(this).data("name");"true"===$(this).attr("data-selected")?-1===d.indexOf(encodeURI(b))&&(productListing.add(c,a),f&&productListing.add(d,b)):(productListing.remove(c,a),f&&productListing.remove(d,b))});var h=c.join("Z"),p=d.join("/");$("#refinement").val("");$("#refineOrder").val(h);p=""===p||"/"===p.charAt(0)?p:"/"+p;productListing.refinement===h?a.closeModal():0<h.length?(b=0<b.closest('[data-component-type\x3d"RECIPE_LISTING_NAV"]').length?"/recipe/list."+h+".html?":
"/_/N-"+h+"/c.html?",qOpenUrl(p+b+productListing.serializePassthrough()+g)):0<$("#searchTerm").val().length?qOpenUrl(p+"/catalog/search.html?"+productListing.serializePassthrough()):qOpenUrl(p+"/content/listing.html?"+productListing.serializePassthrough())}else a.closeModal()}))}});$(".pagination li a, .productPages a").on("keypress click",function(a){13!==a.which&&"click"!==a.type||productListing.pagingAction(this)});$(".pagination li.active a, .pagination li a.disabled, .productPages a.disabled").off("click");
$(".pagination li a").each(function(){"..."===$(this).text()&&$(this).css("cursor","default")});var g=[];$('.productGallery a[href*\x3d".product."]').each(function(){var a=$(this).attr("href").match(new RegExp(/.product.(.*).html/));null!==a&&1<a.length&&g.push(a[1])});localStorage.setItem("productListingProducts",JSON.stringify(g))}},currentStateUrlCheck={getCurrentState:function(a,b,c,d,f){this.getCurrentStateUtility=new ajaxUtility({id:"get-current-state",failHandler:function(a,b,c,d){qSpinner.removeSpinner()},
doneHandler:function(a,b,f,t){qSpinner.removeSpinner();"function"===typeof c&&c(b.navigation.currentState+"/c.html?",d)},URLHandler:function(a){a.svc=a.svc.replace("{0}","N-"+b);return!0}});this.getCurrentStateUtility.callSvc({name:"get-current-state",method:"GET",options:{contentType:"application/json",dataType:"json"},svc:a})}},qCardMenu=function(){if($("body").hasClass("isMobile")||$("html").hasClass("mh-mobile-display")){var a=$(".qCardLinks").html();$(".qCardLinks").remove();$(".myAccountLinks ul li:nth-child(3)").append('\x3cdiv class\x3d"qCardLinks"\x3e'+
a+"\x3c/div\x3e");$(".qCardLinks ul").addClass("hidden")}$(".qCardLinks h4").click(function(){$(".qCardLinks ul").toggleClass("hidden");$(".qCardLinks").toggleClass("open")})},recipeStaging={iCurIdx:-1,$oStage:$(".recipeMediaStage"),swapStage:function(a){"video"===this.$oStage.attr("data-show")&&"undefined"!==typeof ssVideoPlayer&&ssVideoPlayer.pauseVideo(ssVideoPlayer.dataKeys.recipe);this.$oStage.attr("data-show",a)},addListener:function(){var a=this;$(".recipeThumbGroup .mediaThumb").click(function(b){b.preventDefault();
b=$(this);var c="image";"selected"!==b.attr("state")&&(b.data("video-id")?(c="video",ssVideoPlayer.selectVideo(b.data("video-id"),ssVideoPlayer.dataKeys.recipe)):a.$oStage.find(".recipeImage img").attr("src",b.data("img")),b.parent().find('[state\x3d"selected"]').attr("state",""),b.attr("state","selected"),a.swapStage(c))})},init:function(){0<this.$oStage.length&&("undefined"!==typeof ssVideoPlayer&&ssVideoPlayer.setPdSettings("auto",!1),this.addListener())}},recipeIngredientMove={adjustIngredients:function(){var a=
$('[data-component-type\x3d"RECIPE_DIRECTIONS"]').eq(0).find(".ingrContainer");$('[data-component-type\x3d"RECIPE_DIRECTIONS"]:gt(0)').find(".ingrContainer").detach().insertAfter(a);$(".ingrContainer").each(function(){$(this).text().trim().length||$(this).css("display","none")})},init:function(){this.adjustIngredients()}},recipeCaptionEllipsis={resizeTimer:null,displayName:function(){var a=function(a,c){return a.substring(0,c)+"..."};$(".recipeCaption .recipeListCap-sr").each(function(){var b=$(this),
c=b.siblings(".recipeListCap"),d=b.text().length;qViewport.is("\x3dlg")&&60<d&&c.html(a(b.text(),60));qViewport.is("\x3dmd")&&80<d&&c.html(a(b.text(),80));qViewport.is("\x3dsm")&&60<d&&c.html(a(b.text(),60));qViewport.is("\x3c\x3dxs")&&100<d&&c.html(a(b.text(),100))})},init:function(){$(window).resize(function(){clearTimeout(recipeCaptionEllipsis.resizeTimer);recipeCaptionEllipsis.resizeTimer=setTimeout(function(){recipeCaptionEllipsis.displayName()},200)});this.displayName()}},refreshDealModule=
function(){return function(a){$.ajax({type:"GET",url:a,success:function(a){a=$(a);$("#feature-item").replaceWith(a.find("#feature-item"));$("#featured-content").replaceWith(a.find("#featured-content"));$("#featured-gallery").replaceWith(a.find("#featured-gallery"))}})}}(),refreshDealModuleBasedOnTTL=function(){return function(a,b,c){setInterval(function(){$.ajax({type:"GET",url:b,success:function(a){if("feature-item"===c){var b=$("#feature-item .countDyn").html();a=a.replace("00:00:00",b)}$("#"+c).html(a)}})},
a)}}(),qScroll={toElement:function(a,b){a=$(a);!(0<a.length)||this.isVisible(a)&&b||(b=a.offset().top,0<a.parents(".fancybox-inner").length?(b=a.offset().top-a.parents(".fancybox-inner").offset().top+a.parents(".fancybox-inner").scrollTop(),a.parents(".fancybox-inner").animate({scrollTop:b},500)):(qViewport.is("\x3csm")&&(0<$(".mastheadPinned").length?b-=$(".mastheadPinned").outerHeight():0<$(".pinned .mastheadMenuBar").length&&(b-=$(".mastheadMenuBar").outerHeight())),$("html, body").animate({scrollTop:b},
500)),$(".menuHamburger").is(":visible")&&(b-=masthead.isPinned?masthead.scrollThresholdBase:masthead.scrollThreshold),0>b&&(b=0),$("html, body").animate({scrollTop:b},500))},modifyScrollAfterReload:function(a){a="number"===typeof a?a:0;$(window).off("beforeunload.preventAutoScroll").on("beforeunload.preventAutoScroll",function(){$(window).scrollTop(a)})},isVisible:function(a){var b=$(window).height(),c=$(window).scrollTop(),d=$(a).offset().top;a=$(a).height();return d>c&&d+a<b+c}},qSpinner={sDefaultSpinnerWrClass:"qSpinnerWr",
sDefaultSpinnerHtml:'\x3cdiv class\x3d"qSpinnerWr"\x3e\x3cdiv class\x3d"qSpinner" tabindex\x3d"0" aria-label\x3d"'+i18n.get("Loading")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',sFullViewportSpinnerHtml:'\x3cdiv class\x3d"qSpinnerWr fullView"\x3e\x3cdiv class\x3d"qSpinner" tabindex\x3d"0" aria-label\x3d"'+i18n.get("Loading")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',addFullViewportSpinner:function(){0===$("body .qSpinnerWr.fullView").length&&$("body").prepend(this.sFullViewportSpinnerHtml)},
addSpinner:function(a,b,c){c="string"===typeof sSpinnerHtmlCustom?c:this.sDefaultSpinnerHtml;switch(b){case "after":a.after(c);break;case "before":a.before(c);break;case "append":a.append(c);break;default:a.prepend(c)}},removeSpinner:function(a){qContent.refreshFlag||$("."+this.sDefaultSpinnerWrClass,a).remove()}},tsvFeature={$countdown:$(".tsvCountDyn"),convertToInteger:function(a){a=parseInt(a,10);return $.isNumeric(a)?a:0},updateCountdown:function(a){if(0>=a)tsvFeature.$countdown.text("00:00:00");
else{var b=Math.floor(a/60/60),c=Math.floor(a/60);c%=60;var d=a%60,f="0",m="0",p="0";10<=b&&(f="");10<=c&&(m="");10<=d&&(p="");tsvFeature.$countdown.text(f+b+":"+m+c+":"+p+d);--a;0<=a?setTimeout(function(){tsvFeature.updateCountdown(a)},1E3):tsvFeature.$countdown.text("00:00:00")}},init:function(){if(0<tsvFeature.$countdown.length){var a=tsvFeature.convertToInteger(tsvFeature.$countdown.data("startDate")),b=tsvFeature.convertToInteger(tsvFeature.$countdown.data("endDate"));tsvFeature.updateCountdown(Math.floor((b-
a)/1E3))}}},qDropDown={sClassOverlayOnMobile:"overlayOnMobile",sClassDropDownWr:"qDropDownMenuWr",sClassDropDown:"qDropDownMenu",sClassDropdownOpen:"expanded",sClassJsHover:"jsHover",sListenerNamespace:"qDropDown",onSelectSelection:function(a,b){var c=b.find(".selection"),d=$.trim($("option:selected",a).text());a=$("option:selected",a).val();c.text(d);b.find("li").removeClass("selected");b.find('li[data-value\x3d"'+a+'"]').addClass("selected")},onDropdownOrOverlaySelection:function(a,b,c,d){var f=
b.find(".selection"),m=$.trim(a.text());f.text(m);b.find("li").removeClass("selected");a.addClass("selected");c.is("select")?c.val(a.data("value")):c.val(m);"object"===typeof d&&"boolean"===typeof d.isOVerlaySelection&&d.isOVerlaySelection?$.fancybox.close(!0):b.removeClass(this.sClassDropdownOpen)},open:function(a){a.addClass(this.sClassDropdownOpen)},close:function(a){a.removeClass(this.sClassDropdownOpen)},onDropDownJsMouseIn:function(a){this.open(a)},onDropDownJsMouseOut:function(a){this.close(a)},
onDropDownBtnTouch:function(a){a=a.closest("."+this.sClassDropDownWr).find("."+this.sClassDropDown);a.hasClass(this.sClassOverlayOnMobile)&&qViewport.is("\x3c\x3dxs")||a.addClass(this.sClassDropdownOpen)},addListeners:function(a){var b=this,c=a.filter("."+b.sClassJsHover);a=a.find(".selection");c.off("mouseenter."+b.sListenerNamespace).on("mouseenter."+b.sListenerNamespace,function(){b.onDropDownJsMouseIn($(this))});c.off("mouseleave."+b.sListenerNamespace).on("mouseleave."+b.sListenerNamespace,function(){b.onDropDownJsMouseOut($(this))});
a.off("touchstart."+b.sListenerNamespace).on("touchstart."+b.sListenerNamespace,function(a){a.preventDefault();b.onDropDownBtnTouch($(this))})},removeListenersHover:function(a){a.off("."+this.sListenerNamespace)},init:function(){var a=$("."+this.sClassDropDown);this.sLastBp=qViewport.getBreakpoint();this.addListeners(a)}},overlayHelper={openOverlay:function(a,b,c,d,f){a=d.data(a);this.open(a,b,c,d,f)},open:function(a,b,c,d,f){f="object"===typeof f?f:{};var m=f.urlParam?f.urlParam:"",p=this,h=f.oCustomOverlayOptions?
f.oCustomOverlayOptions:{},t=fancyBoxesAndTooltips.getFbDefaults(fancyBoxesAndTooltips.getDeviceType()),g={};qSpinner.removeSpinner();f.disableCloseBtn&&(b+=" disableClose",g={closeBtn:!1,closeClick:!1,helpers:{overlay:{closeClick:!1}},keys:{close:null}});$.fancybox($.extend(!0,{},t,g,{type:f.iframe?"iframe":"ajax",href:a+m,wrapCSS:b,height:f.height,width:f.width,tpl:{error:function(){"function"===typeof f.openError&&f.openError()}},beforeShow:function(){"function"===typeof t.beforeShow&&t.beforeShow();
var g="."+b.replace(/\s/g,"."),h=$(g+" .btnCancel"),m=$(g+" .btnCont"),G=$(g+" .btnSave"),X=$(g+" .btnAccept"),I=$(g+" .btnDecline"),O=$(g+" .btnAutoDelivery"),H=$(g+" .btnCreatePassword"),ha=$(g+" .btnSingle"),L=f.oErr?f.oErr:{};$(g).data("callContext",c);"function"===typeof f.beforeShow&&f.beforeShow();switch(b){case "overlayAdvancedOrderConfirm":if("common-add-cart-item"===c){var E=g="",Y="";"object"===typeof product?(E=product.colorCode,Y=product.sizeCode,product.hasColors&&product.hasSizes&&
"undefined"!==typeof product.atsByColor&&null!==product.atsByColor?null!==E&&null!==Y&&(g="undefined"!==typeof product.atsByColor[E].items[Y].advancedOrderShipDate?product.atsByColor[E].items[Y].advancedOrderShipDate:""):g=product.hasColors&&null!==E&&"undefined"!==typeof product.atsByColor&&null!==product.atsByColor?"undefined"!==typeof product.atsByColor[E].advancedOrderShipDate?product.atsByColor[E].advancedOrderShipDate:"":product.hasSizes&&null!==Y&&"undefined"!==typeof product.atsBySize&&null!==
product.atsBySize?"undefined"!==typeof product.atsBySize[Y].advancedOrderShipDate?product.atsBySize[Y].advancedOrderShipDate:"":product.advancedOrderShipDate):g=d.data("aop-ship-date");$(".infoTextAOoverlay").text($(".infoTextAOoverlay").text().replace("{0} ",g))}break;case "overlayGiftCard":giftCardForm.init();var oa=$(".overlayGiftCard form");var aa=oa.validate();break;case "overlayLeaveQvc":(function(){$(".overlayLeaveQvc");var b=null!==a.match(/leaving-qvc-(.*)\.html/)&&2===a.match(/leaving-qvc-(.*)\.html/).length?
a.match(/leaving-qvc-(.*)\.html/)[1]:"";if(b)$('input[name\x3d"directRedirect"]').on("change",function(){var a=$(this),c=localStorage.getItem("qDirectLeave");a=a.prop("checked")?c?-1<c.indexOf("#"+b+"#")?c:c+b+"#":"#"+b+"#":c?c.replace(b+"#",""):"";"#"===a?localStorage.removeItem("qDirectLeave"):localStorage.setItem("qDirectLeave",a)})})()}G.add(O).add(X).click(function(a){a.preventDefault();p.confirmAction(c,d,f)});ha.click(function(){var a=f.sSku.split(" ")[1],b=f.sSku.split(" ")[2],g="undefined"!==
typeof $(this).data("one-shot-id")?$(this).data("one-shot-id"):f.sSkuOneShot;f.sSku=addToCartHelper.createSku(g,a,b);addToCartHelper.oAddToCartToCheck[f.sSku]="autoDelivery";p.confirmAction(c,d,f)});h.add(I).click(function(a){a.preventDefault();p.cancelAction(f)});H.click(function(a){a.preventDefault();sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,d.val());qOpenUrl(qVars.url.forgotPassword)});m.click(function(){f.continuePath?qOpenUrl(f.continuePath):$.fancybox.close(!0)});
if("object"===typeof oa&&"object"===typeof aa)oa.on("submit",function(){return aa.form()});if(L.elemId)f.oErr.msgSelector&&(f.oErr.msg=$(f.oErr.msgSelector).text()),qTagging.err.trigger(f.oErr);else switch(b){case "overlayGenericError":"speedbuy"===c&&$.isEmptyObject(f.oErr)&&(L={elemId:oTaggingDefaults.elemId.errSpeedbuyOrderIssue,elemCat:oTaggingDefaults.elemCat.errCheckout,msg:"ORDER NOT SUBMITTABLE - "+oTaggingDefaults.msg.errGeneric},qTagging.err.trigger(L))}},afterShow:function(){"function"===
typeof t.afterShow&&t.afterShow();"function"===typeof f.afterShow&&f.afterShow();f.promotionAlert&&qVars.feature.omsPromotionsActive&&qMsg.showGlobalStatic(i18n.get("Order modifications might impact promotions applied to your order"),"warning")},beforeClose:function(){"function"===typeof t.afterShow&&t.beforeClose();"cartItemLimitExceeded"===c&&f.continuePath?qOpenUrl(f.continuePath):"pdpPartialAllocation"!==c||qVars.feature.addedToCartNotification||qOpenUrl(qVars.url.cart);"function"===typeof f.beforeClose&&
f.beforeClose()},afterClose:function(){"function"===typeof f.afterClose&&f.afterClose();"function"===typeof t.afterClose&&t.afterClose();qVars.feature.disableUserScalable&&"chrome"===platform.browser&&"android"===platform.device&&qViewport.disableUserScaling(!1)}},h))},openGeneratedContentOverlay:function(a,b,c,d,f){a="string"===typeof a?a:"";b="string"===typeof b?b:"";f="object"===typeof f?f:{};f.oCustomOverlayOptions=f.oCustomOverlayOptions?f.oCustomOverlayOptions:{};$.extend(!0,f.oCustomOverlayOptions,
{content:'\x3cdiv class\x3d"container"\x3e'+("string"===typeof d?'\x3ch2 class\x3d"overlayHeader" tabindex\x3d"0"\x3e'+d+"\x3c/h2\x3e":"")+c+"\x3c/div\x3e",title:d});this.openOverlay("#",a,b,$(),f)},createLinkHtml:function(a){a="object"===typeof a?a:{};a.sHtmlContent="string"===typeof a.sHtmlContent?a.sHtmlContent:i18n.get("Continue");a.sClass="string"===typeof a.sClass?a.sClass:"btn-tall btnContinue";a.sHref="string"===typeof a.sHref?a.sHref:qVars.url.homepageLink;return'\x3ca href\x3d"'+a.sHref+
'" class\x3d"btn btn-primary '+a.sClass+'"\x3e'+a.sHtmlContent+"\x3c/button\x3e"},wrapElement:function(a,b){b="object"===typeof b?b:{};b.sWrRowClass="string"===typeof b.sWrRowClass?b.sWrRowClass:"row";b.sWrColCLass="string"===typeof b.sWrColCLass?b.sWrColCLass:"col-tn-offset-1 col-tn-10 col-xs-offset-0 col-xs-5 col-sm-4 col-md-3";return'\x3cdiv class\x3d"'+b.sWrRowClass+'"\x3e\x3cdiv class\x3d"'+b.sWrColCLass+'"\x3e'+a+"\x3c/div\x3e\x3c/div\x3e"},cancelAction:function(a){"object"===typeof a&&"function"===
typeof a.cancelAction&&a.cancelAction();(!qVars.feature.addedToCartNotification||qVars.feature.addedToCartNotification&&!a.skipCloseOverlayOnCancel)&&$.fancybox.close(!0)},confirmAction:function(a,b,c){c="object"===typeof c?c:{};var d="object"===typeof c&&c.sSku?c.sSku:"";"function"===typeof c.confirmAction&&c.confirmAction();switch(a){case "common-add-cart-item":if("undefined"!==typeof addToCartHelper){$.fancybox.close(!0);switch(addToCartHelper.oAddToCartToCheck[d]){case "waitlist":addToCartHelper.oAddToCartToCheck[d]=
"advancedOrder";break;case "advancedOrder":addToCartHelper.oAddToCartToCheck[d]="autoDelivery";break;case "autoDelivery":addToCartHelper.oAddToCartToCheck[d]="persTempl"}addToCartHelper.checkForSpecialConditions(c.sContext,{$item:b},c)}}}};
(function(){if(null!==sessionStorage.getItem("onLoadStaticMsg")){var a=sessionStorage.getItem("onLoadStaticMsgType");qMsg.showGlobalStatic(sessionStorage.getItem("onLoadStaticMsg"),"string"===typeof a?a:"success");sessionStorage.removeItem("onLoadStaticMsg");sessionStorage.removeItem("onLoadStaticMsgType")}else null!==sessionStorage.getItem("onLoadDismissMsg")&&(qMsg.showGlobalDismissable(sessionStorage.getItem("onLoadDismissMsg"),"success",{bIsTimed:!0}),sessionStorage.removeItem("onLoadDismissMsg"))})();
var qTruncate={sMeasureElementId:"truncMeasureEl",sAddToEndDefault:"\x26hellip;",iMaxNrLinesDefault:2,sLastBp:"",removeMeasureElFromDom:function(){$("#"+this.sMeasureElementId).remove()},addMeasureElToDOM:function(a,b){a.css("id",self.sMeasureElementId);b.append(a)},createMeasureEl:function(a){a=a.css(["font-size","font-family","text-transform","font-weight"]);this.removeMeasureElFromDom();return $('\x3cspan id\x3d"'+this.sMeasureElementId+'"\x3e').css($.extend({},a,{position:"absolute",left:"-99999px",
"white-space":"nowrap"}))},getWidthOfTxt:function(a,b){$.contains(document.body,b)||(this.removeMeasureElFromDom(),this.addMeasureElToDOM(b,$("body")));return 1===a.length&&" "===a?(b.html("x"),a=b.width(),b.html("x x").width()-2*a):b.html(a).width()},getMaxHeightTxtCont:function(a){return Math.ceil(parseFloat(a.css("line-height"))*parseInt(this.getMaxNrOfLines(a)))},getMaxNrOfLines:function(a){a=a.attr("class");a="string"===typeof a?a.match(/number-max-rows-(\d)/):null;return null!==a?a[1]:this.iMaxNrLinesDefault},
isTextOverflowingHorizontally:function(a,b){var c=this.createMeasureEl(a);b=this.getWidthOfTxt("string"===typeof b?b:a.text(),c);a=a.width();return b>a},isTextOverflowingVertically:function(a){return a.height()>Math.ceil(parseFloat(a.css("line-height")))*parseInt(this.getMaxNrOfLines(a))?!0:!1},getWordsWiderThanContainer:function(a){var b=this,c=[];a.text().split(" ").forEach(function(d){b.isTextOverflowingHorizontally(a,d)&&c.push(d)});return c},truncateText:function(a,b,c){var d=!1,f=a.data("original-text-content");
c="boolean"===typeof c?c:!1;"string"!==typeof f?(f=a.text(),a.data("original-text-content",f)):a.css("visibility","hidden").html(f);var m=f;"string"!==typeof b&&(b="");for(c=c?this.isTextOverflowingVertically:this.isTextOverflowingHorizontally;c.call(this,a)&&0<m.length;)m=m.slice(0,-1),0===m.length?a.html(f):(a.html(m+b),d=!0);d&&" "===m.slice(m.length-1,m.length)&&a.html(m.slice(0,-1)+b);a.css("visibility","visible");this.removeMeasureElFromDom();return d},truncateTextLimitedToOneLine:function(a,
b){"nowrap"===a.css("white-space")&&this.truncateText(a,b)},truncateTextLimitedToMoreThanOneLine:function(a,b){this.getMaxNrOfLines(a);"undefined"!==typeof a.data("original-height")?parseFloat(a.data("original-height")):(a.height(),a.data("original-height"));if("nowrap"!==a.css("white-space")){var c=this.getWordsWiderThanContainer(a);c.length&&a.css("word-break","break-all");this.truncateText(a,b,!0)}else this.truncateText(a,b)},addListeners:function(a,b,c){var d=this,f,m=(c="boolean"===typeof c?
c:!1)?"qTruncOne":"qTruncMulti";$(window).off("resize."+m).on("resize."+m,function(){$(this);var p=qViewport.getBreakpoint();c||p===d.sLastBp||a.each(function(){var a=$(this);a.data("original-height",d.getMaxHeightTxtCont(a))});clearTimeout(f);f=setTimeout(function(){a.each(function(){c?d.truncateTextLimitedToOneLine($(this),b):d.truncateTextLimitedToMoreThanOneLine($(this),b)})},200)})},initTruncationOneLiner:function(a,b){var c=this;b="string"===typeof b?b:c.sAddToEndDefault;a.each(function(){c.truncateTextLimitedToOneLine($(this),
b)});c.addListeners(a,b,!0)},initTruncationMultiple:function(a,b){var c=this;b="string"===typeof b?b:c.sAddToEndDefault;a.each(function(){$(this);c.truncateTextLimitedToMoreThanOneLine($(this),b)});c.addListeners(a,b)},init:function(a,b,c){a="object"===typeof a&&a instanceof jQuery?a:$();b="object"===typeof b&&b instanceof jQuery?b:$();this.sLastBp=qViewport.getBreakpoint();this.initTruncationOneLiner(a,c);this.initTruncationMultiple(b,c)}},authHelper={isPartiallyAuthenticated:function(){return authHelper.isAuthenticated(window.localStorage.getItem("qlogin-partial-tms"))},
isFullyAuthenticated:function(){return authHelper.isAuthenticated(window.localStorage.getItem("qlogin-full-tms"))},isAuthenticated:function(a){return"string"===typeof a&&0<a.length&&Number(a)>Math.floor(Date.now()/1E3)}},passwordSignIn=function(){var a={oElementsSignInInitialised:{$btnContinue:$(),$btnContinueNpo:$(),$btnForgotPassword:$(),$chkShowPw:$(),$cssChkBxInputs:$(),$enterInfor:$(),$form:$(),$headings:$(),$linkNewCust:$(),$mailInput:$(),$mainComponent:$(),$newCust:$(),$noPINAndPWinput:$(),
$npoWr:$(),$pwBlock:$(),$pwInput:$(),$selectShipTo:$(),$shopConfidence:$(),$stepIndicator:$(),$useDefaults:$()},cssClassStep1:"step1",cssClassStep2:"step2"},b=!1,c=function(a,b){sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,b.$mailInput.val());localStorage.removeItem("is-your-info-page-back");qOpenUrl(qVars.url.yourInformation+a)},d=function(a,b,c){a.each(function(){var a=$(this);a.hasClass(b)&&(a.removeClass(b),a.addClass(c))});"string"===typeof coPageNameStep2&&$("h1.text-center").html(coPageNameStep2)},
f=function(a,b,f){var g="undefined"!==typeof localStorage.getItem("dqFlag")&&"true"===localStorage.getItem("dqFlag")?!0:!1;b.$mailInput.attr("aria-invalid",!a);a?(b.$pwBlock.removeClass("hidden"),b.$pwLinks?b.$pwLinks.removeClass("hidden"):0,b.$headings.removeClass("hidden"),"login"!==qVars.page||!$("body").hasClass("checkout")||f.identityServiceFailure||g||b.$npoWr.removeClass("hidden"),(f.identityServiceFailure||g)&&$(".password .info").html("Please enter your password."),b.$newCust.removeClass("hidden"),
d(b.$mainComponent,f.cssClassStep1,f.cssClassStep2),b.$npoWr.hasClass("hidden")?b.$enterInfor.removeClass("hidden"):b.$enterInfor.addClass("hidden"),window.setTimeout(function(){b.$pwInput.focus()},0)):$("body").hasClass("checkout")?c("",b):$("body").hasClass("myaccount")&&(sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,b.$mailInput.val()),qOpenUrl(qVars.url.myAccountCreateAccount+""))},m=function(a,c){b=!1;a.$form&&a.$form.off(".pwSignIn").on("submit.pwSignIn",function(d){d.preventDefault();
d=a.$mailInput.val();a.oValidator.form()?0<$(".password.hidden").length?passwordAjax.identityStatus(d,"signInSubmission",a,c):b||(b=!0,d=a.$pwInput.val(),c.sContext="signInSubmission",passwordAjax.login(c,a,a.$mailInput.val(),d),$(document).on("reAddLoginListener",function(){m(a,c)})):(d=qMsgStorage.err.general.formError,qTagging.err.trigger({elemId:"ERROR: MISSING SIGN IN INFORMATION",elemCat:oTaggingDefaults.elemCat.errSignInForm,code:"10001"}),a.$form.find(".email").hasClass("has-error")&&""!==
a.$form.find(".email input").val()&&(d=qMsgStorage.err.login.emailInvalidSyntax),qMsg.showGlobalStatic(d,"danger"),passwordSignIn.triggerEvent("login.error",{code:"invalid",msg:d,context:c.context,caller:c.caller}))})},p=function(a,b){a.$cssChkBxInputs&&a.$cssChkBxInputs.off(".pwSignIn").on("change.pwSignIn",function(a){a=$(this);a.prop("checked")?a.prev(".cssChkBx").addClass("chk"):a.prev(".cssChkBx").removeClass("chk")});a.$btnForgotPassword&&a.$btnForgotPassword.off(".pwSignIn").on("click.pwSignIn",
function(b){b.preventDefault();sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,a.$mailInput.val());b=/.npoPw./.test(self.location.href);var c=a.$form.data("forgot-password-url");$("body").hasClass("myaccount")&&(c=c.replace("html","ma.html"));b?qOpenUrl(a.$form.data("npo-forgot-password-url")):qOpenUrl(c)});a.$selectShipTo&&a.$selectShipTo.off(".pwSignIn").on("focus.pwSignIn",function(a){a=$(this);$("option:selected",a).html(a.data("prev-option").txt)}).on("change.pwSignIn",
function(a){a=$(this);$("option",a).eq(a.data("prev-option").index).html(a.data("prev-option").txt);qTruncate.truncateTextLimitedToOneLine($("option:selected",a),b.sOptionAddToEnd);a.blur()});$(window).off(".pwSignIn").on("resize.pwSignIn",function(c){a.$selectShipTo.length&&($("option:selected",a.$selectShipTo).html(a.$selectShipTo.data("prev-option").txt),qTruncate.truncateTextLimitedToOneLine($("option:selected",a.$selectShipTo),b.sOptionAddToEnd))});a.$chkShowPw&&a.$chkShowPw.off(".pwSignIn").on("change.pwSignIn",
function(){var b=$(this).prop("checked");a.$visiblePw.val(a.$pwInput.val());b?a.$visiblePw.removeClass("makeInvisible").attr("type","text"):a.$visiblePw.addClass("makeInvisible").attr("type","password")});a.$pwInput.off(".pwSignIn").on("keyup.pwSignIn",function(b){b=$(this).val();a.$visiblePw.val(b)}).on("cut.pwSignIn paste.pwSignIn",function(b){var c=$(this);"undefined"!==typeof oQPasteOrCutTimeout&&clearTimeout(oQPasteOrCutTimeout);oQPasteOrCutTimeout=setTimeout(function(){a.$visiblePw.val(c.val())},
0)});a.$linkNewCust&&a.$linkNewCust.off(".pwSignIn").on("click.pwSignIn",function(b){b.preventDefault();qCookie.remove(qCookie.name.globalUserId);qCookie.remove(qCookie.name.authToken);if($("body").hasClass("myaccount"))sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,a.$mailInput.val()),qOpenUrl(qVars.url.myAccountCreateAccount);else{var d=urlManager.getParam(window.location.search,"sku"),f=urlManager.getParam(window.location.search,"qty");b=commonCartAjax.getId();d={sContext:"speedBuyNewUser",
sSku:d,iQty:parseInt(f)};b?"undefined"!==typeof cartVars&&"undefined"!==typeof cartVars.cart&&"undefined"!==typeof cartVars.cart.globalUserId?($(document).on("addToCartAfterLogoff",function(a,b){b.retried=!0;commonCartAjax.preAddToCart(b)}),logoffHelper.logoffAjax({onSuccessEvent:"addToCartAfterLogoff",successEventOptions:d})):c("",a):commonCartAjax.preAddToCart(d)}});m(a,b);a.$btnContinueNpo&&a.$btnContinueNpo.off(".pwSignIn").on("click.pwSignIn",function(){0<$(this).closest(".contentLoginForm").length?
$(document).trigger("contentLogin.without"):c("?NPO\x3dtrue",a)})},h=function(a,b){var c=/.npoPw./.test(self.location.href),d=localStorage.getItem("is-your-info-page-back");c&&qMsg.showGlobalStatic(qMsgStorage.err.login.npoMismatch,"danger");var g=a.$mailInput.val();$("span.infoSymbol").popover();a.oValidator=a.$form.validate();d||a.$mailInput[0]&&passwordHelper.isEmailValid(g,a.$mailInput[0],a.oValidator)&&passwordAjax.identityStatus(g,"signInInit",a,b);"undefined"!==typeof b.sOptionAddToEnd&&qTruncate.truncateTextLimitedToOneLine($("option:selected",
a.$selectShipTo),b.sOptionAddToEnd);p(a,b);g=qVars.ajax.emailAddress;authHelper.isPartiallyAuthenticated()&&!c?(d=qCookie.get(qCookie.name.globalUserId),"string"===typeof d&&"string"===typeof g&&(g=g.replace("{0}",d),$(document).on("showStep2",function(a,b){"undefined"!==typeof b&&"undefined"!==typeof b.data&&"string"===typeof b.data.emailAddress&&"undefined"!==typeof b.elements&&"undefined"!==typeof b.options&&(b.elements.$mailInput.val("string"===typeof b.data.emailAddress?b.data.emailAddress:""),
b.elements.$mailInput.focus(),"undefined"!==typeof b.elements.$mailInput.val()&&passwordHelper.isEmailValid(b.elements.$mailInput.val(),b.elements.$mailInput[0],b.elements.oValidator)&&(f(!0,b.elements,b.options),b.elements.$pwInput.focus()))}),passwordAjax.retrieveEmailAddress(g,"showStep2",{elements:a,options:b}))):(c="string"===typeof sessionStorage.getItem(passwordHelper.oOut.oSessionStorageKeys.custEmail)?sessionStorage.getItem(passwordHelper.oOut.oSessionStorageKeys.custEmail):"",d?(a.$mailInput.val(c),
a.$mailInput.focus()):c&&(a.$mailInput.val(c),$('input[name\x3d"email"]').parent().find(".control-label").addClass("floating"),f(!0,a,b),a.$pwInput.focus()));authHelper.isPartiallyAuthenticated()&&a.$npoWr.hide();authHelper.isPartiallyAuthenticated()&&($(".speedBuy .newCust").hide(),$(".signInCont .newCust").hide())};return{oOut:a,triggerEvent:function(a,b){$(document).trigger(a,b);"undefined"!==typeof b.caller&&$(b.caller).trigger(a,b)},init:function(b,c){b=$.extend(!0,a.oElementsSignInInitialised,
b);h(b,c)},loadYourInformation:c,updatesBasedOnEmailValidity:f}}(),logoffHelper={logoffAjax:function(a){this.clearStorage();passwordLogoffUtility.callSvc({name:"logoff",method:"GET",svc:qVars.ajax.logoff,options:{contentType:"application/json"},oOptionalParams:a})},authTokenDelAjax:function(a){passwordLogoffUtility.callSvc({name:"authTokenDel",method:"GET",svc:qVars.ajax.authTokenDel,options:{contentType:"application/json"},oOptionalParams:a})},logoff:function(a){this.clearStorage();var b=qVars.ajax.logoff;
a&&(b=urlManager.addParam(b,"resource",a));qOpenUrl(b)},clearStorage:function(){if("object"===typeof localStorage&&null!==localStorage){var a="object"===typeof quid?quid.get():!1;localStorage.clear();sessionStorage.clear();a&&localStorage.setItem("quid",a)}},doneHandler:function(a,b,c,d){a="undefined"!==typeof a.oOptionalParams?a.oOptionalParams:{};a.onSuccessEvent&&$(document).trigger(a.onSuccessEvent,a.successEventOptions)}},passwordLogoffUtility=new ajaxUtility(logoffHelper),passwordHelper=function(){return{oOut:{oSessionStorageKeys:{custEmail:"qCustEmailAddress",
custEmailProvided:"custEmailAddressProvided"}},init:function(){var a=$("body"),b={},c={},d={};if("undefined"!==typeof passwordSignIn&&(a.hasClass("pgSignIn")||0<a.find(".contentLoginForm").length)){var f=$(".signInCont");b=$("form.signInArea",f);$.extend(!0,d,passwordSignIn.oOut.oElementsSignInInitialised,{$btnContinue:$(".btnContinue",b),$btnContinueNpo:$(".npoWr .btnContinue",f),$btnForgotPassword:$(".forgotPw",b),$chkShowPw:$('[name\x3d"showPw"]',b),$cssChkBxInputs:$('.cssChkBx + input[type\x3d"checkbox"]',
f),$enterInfor:$(".enterInfor",b),$form:b,$headings:$(".heading",b),$linkNewCust:$(".newCust a",f),$mailInput:$('input[name\x3d"email"]',f),$mainComponent:f,$newCust:$(".newCust",f),$noPINAndPWinput:$('input[name\x3d"noPINAndPW"]',f),$npoWr:$(".npoWr",f),$pwBlock:$(".password",b),$pwLinks:$(".passwordLinks",b),$pwInput:$('input[name\x3d"pw"]',f),$selectShipTo:$('select[name\x3d"signInShipTo"]',f),$shopConfidence:$(".shopConfidence",f),$stepIndicator:f,$useDefaults:$(".useDefaults",b),$visiblePw:$('[name\x3d"visiblePw"]',
b)});$.extend(!0,c,{cssClassStep1:passwordSignIn.oOut.cssClassStep1,cssClassStep2:passwordSignIn.oOut.cssClassStep2,oAuthHandlerResource:"string"===typeof qGet.urlParam("resource")?decodeURIComponent(qGet.urlParam("resource")):"",sOptionAddToEnd:"\x26hellip;"});passwordSignIn.init(d,c)}"undefined"!==typeof forgotPassword&&a.hasClass("forgotPasswordInfo")&&(b=$(".forgotPassword .qForm"),d={$form:b,$mailInput:$('input[name\x3d"email"]',b)},forgotPassword.init(d));if("undefined"!==typeof newPasswordHelper&&
newPasswordComponent.oOut.$newPwWr.length){switch(qVars.page){case "your-information":b=$(".yourInfoCont .qForm");break;case "order-confirmation":b=$("#orderConfirmation .qForm");break;case "reset":b=$(".resetPassword .qForm");break;case "create-account":b=$(".createAccount .qForm");break;case "create-account-ivr":b=$(".createAccountInput .qForm")}d={$form:b,$inputNewPw:$('input[name\x3d"newPW"]',b),$inputCurrentPw:$('input[name\x3d"currentPW"]',b)};newPasswordComponent.init();"reset"!==qVars.page&&
"order-confirmation"!==qVars.page&&"create-account"!==qVars.page||newPasswordHelper.init(d)}"undefined"!==typeof updatePasswordHelper&&"account-settings"===qVars.page&&(b=$("#passwordForm"),d={$form:b,$inputNewPw:$('input[name\x3d"newPW"]',b),$inputCurrentPw:$('input[name\x3d"currentPW"]',b)},updatePasswordHelper.init(d))},isEmailValid:function(a,b,c){return $.validator.methods.email.call(c,a,b)},secureSubmit:function(a,b,c,d){"string"===typeof c&&""!==c&&(b.prop("disabled",!0),a.attr("method",typeof d===
string&&/get|post|put|delete/i.test(d)?d:"GET"),a.off("submit").attr("action",c).submit())},toggleBetweenStrings:function(a,b,c){return a===b?c:a===c?b:""}}}();$(function(){passwordHelper.init()});
var dqFlag="",passwordAjax={id:"password",bRetryLogin:!1,identityStatus:function(a,b,c,d){c="object"===typeof c?c:{};passwordUtility.callSvc({name:"userIdentity",method:"POST",svc:qVars.ajax.customerIdentity,json:{emailAddress:a},options:{contentType:"application/json"},oOptionalParams:{oElements:c,oOptions:d,sContext:b}})},login:function(a,b,c,d){b="object"===typeof b?b:{};var f=qVars.feature.wcsLogin?qVars.format.protocol+"://"+qVars.format.host+qVars.ajax.commerceLogin:qVars.ajax.authHandler,m=
{oElements:b,oOptions:a,$npoWr:"undefined"!==typeof b.$npoWr?b.$npoWr:$(),$useDefaults:"undefined"!==typeof b.$useDefaults?b.$useDefaults:$(),$pwInput:"undefined"!==typeof b.$pwInput?b.$pwInput:$(),sContext:a.sContext},p="pwAuthHandler";0<b.$form.closest(".contentLoginForm").length&&(p="contentPwAuthHandler",m.successEventOptions={emailAddress:c});a=qVars.feature.wcsLogin?"LoginId\x3d"+("string"===typeof c?c:"")+"\x26LoginPin\x3d"+("string"===typeof d?encodeURIComponent(d):""):"j_username\x3d"+("string"===
typeof c?c:"")+"\x26j_password\x3d"+("string"===typeof d?encodeURIComponent(d):"")+"\x26resource\x3d"+("string"===typeof a.oAuthHandlerResource?encodeURIComponent(a.oAuthHandlerResource):"");passwordUtility.callSvc({name:p,method:"POST",svc:f,data:a,options:{contentType:"application/x-www-form-urlencoded"},oOptionalParams:m})},initiateForgotPassword:function(a,b,c){passwordUtility.callSvc({name:"fpInitiateForgotPassword",method:"POST",svc:a,json:{emailAddress:b},options:{contentType:"application/json"},
oOptionalParams:{fpEmail:b,$form:c}})},resetForgotPasswordRequest:function(a,b,c,d){var f={fpEmail:b,$form:c},m={};"boolean"===typeof qVars.feature.forgotPwThreeFactorAuth&&qVars.feature.forgotPwThreeFactorAuth?"object"===typeof d&&(m={emailAddress:b,firstName:"string"===typeof d.firstName?d.firstName:"",lastName:"string"===typeof d.lastName?d.lastName:"",phoneNumber:"undefined"!==typeof d.phoneNumber?d.phoneNumber.toString():""}):(2<$(".securityQstnWithEmail .birth").text().length?(d=$('input[name\x3d"birthDate"]').val(),
d=dateFormat(new Date(d.split(/[/.-]/).reverse().join("-").replace(/-/g,"/").replace(/T.+/,"")),qVars.format.birthDate)):d=$('input[name\x3d"securityQnAnswer"]').val(),m={emailAddress:b,securityQuestions:[{id:c.data("sqId"),question:c.data("sqQuestion"),answer:d,questionTypeCode:c.data("sqQuestionCode"),answerTypeCode:c.data("sqAnswerCode")}]});passwordUtility.callSvc({name:"fpResetForgotPasswordRequest",method:"POST",svc:a,json:m,options:{contentType:"application/json"},oOptionalParams:f})},resetForgotPassword:function(a,
b,c,d,f,m){f={sResetForgotPasswordSuccessUrl:f};b={token:b,emailGuid:c,password:d};"string"===typeof m&&(b.password=void 0,b.pin=m);passwordUtility.callSvc({name:"fpResetForgotPassword",method:"PUT",svc:a,json:b,options:{contentType:"application/json"},oOptionalParams:f})},updatePassword:function(a,b){var c={updatePasswordSuccessUrl:sessionStorage.getItem("updatePasswordSuccessUrl")},d=qCookie.get(qCookie.name.globalUserId);a={newPassword:b,currentPassword:a};passwordUtility.callSvc({name:"updatePassword",
method:"PUT",svc:qVars.ajax.updatePassword.replace("{0}",d),json:a,options:{contentType:"application/json"},oOptionalParams:c})},createPassword:function(a,b,c){c={onSuccessEvent:c};var d=qCookie.get(qCookie.name.globalUserId);a={type:"password",data:{email:a,password:b}};passwordUtility.callSvc({name:"createPassword",method:"POST",svc:qVars.ajax.createPassword.replace("{0}",d),json:a,options:{contentType:"application/json"},oOptionalParams:c})},maUpdatePassword:function(a,b,c){var d={oForm:c.$form};
c={newPassword:c.$inputNewPw.val(),currentPassword:c.$inputCurrentPw.val()};passwordUtility.callSvc({name:"maUpdatePassword",method:"PUT",svc:a.replace("{0}",b),json:c,options:{contentType:"application/json"},oOptionalParams:d})},retrieveEmailAddress:function(a,b,c){passwordUtility.callSvc({name:"fpRetrieveEmailAddress",method:"GET",svc:a,options:{contentType:"application/json"},oOptionalParams:{onSuccessEvent:b,successEventOptions:c}})},doneHandler:function(a,b,c,d){c="undefined"!==typeof a.oOptionalParams?
a.oOptionalParams:{};if("undefined"!==typeof c.onSuccessEvent){var f="undefined"!==typeof c.successEventOptions?c.successEventOptions:{};"undefined"!==typeof b&&(f.data=b);$(document).trigger(c.onSuccessEvent,f)}else{f="undefined"!==typeof c.oElements?c.oElements:{};var m="undefined"!==typeof c.oOptions?c.oOptions:{};switch(a.name){case "contentPwAuthHandler":case "pwAuthHandler":var p="";if(qVars.feature.wcsLogin){if("undefined"===typeof b.response.body.customermessage){$(document).trigger("reAddLoginListener");
qSpinner.removeSpinner();if(this.bRetryLogin)qMsg.showGlobalStatic(qMsgStorage.err.general.serviceError,"danger");else{c=document.cookie.split(";").filter(function(a){return 0===a.trim().indexOf("WC_")}).map(function(a){return a.trim()});if(c.length)for(b=0;b<c.length;b++)qCookie.remove(c[b].split("\x3d")[0]);this.bRetryLogin=!0;$(".signInArea .btnContinue").trigger("click")}break}else if("undefined"===typeof b.response.body.customermessage.jwtAuthToken){$(document).trigger("reAddLoginListener");
passwordAjax.handleAuthError(b,d.status,m,c);break}else{if("contentPwAuthHandler"===a.name){f="undefined"!==typeof c.successEventOptions?c.successEventOptions:{};"undefined"!==typeof b&&(f.data=b);$(document).trigger("contentLogin.complete",f);break}p=JSON.parse(window.atob(b.response.body.customermessage.jwtAuthToken.split(".")[1].replace("-","+").replace("_","/")));d=p.fae;a=p.exp;dqFlag=("true"===b.response.body.customermessage.isDQUser).toString();var h="Employee"===b.response.body.customermessage.customertype;
qCookie.get(qCookie.name.cmCustomerId)&&qCookie.setDefault(qCookie.name.cmCustomerId,qCookie.get(qCookie.name.cmCustomerId));qCookie.get(qCookie.name.qvcmn)&&qCookie.setDefault(qCookie.name.qvcmn,qCookie.get(qCookie.name.qvcmn));qCookie.get(qCookie.name.qvcfn)&&qCookie.setDefault(qCookie.name.qvcfn,qCookie.get(qCookie.name.qvcfn));qCookie.get(qCookie.name.globalUserId)&&qCookie.setDefault(qCookie.name.globalUserId,qCookie.get(qCookie.name.globalUserId));qCookie.get(qCookie.name.qvcid2)&&qCookie.setDefault(qCookie.name.qvcid2,
qCookie.get(qCookie.name.qvcid2))}p="string"===typeof m.oAuthHandlerResource?m.oAuthHandlerResource:""}else{if($("body").hasClass("checkout")&&b.data.preventCheckout){qMsg.showGlobalStatic(i18nMapMsg.error["System Error Customer Service"],"danger");break}if("contentPwAuthHandler"===a.name){f="undefined"!==typeof c.successEventOptions?c.successEventOptions:{};"undefined"!==typeof b&&(f.data=b);$(document).trigger("contentLogin.complete",f);break}p="undefined"!==typeof b?"undefined"!==typeof b.data?
"undefined"!==typeof b.data.redirect?b.data.redirect:"":"":"";d=b.data["full-tms"];a=b.data["partial-tms"];h=b.data.isEmployee;dqFlag="undefined"!==typeof b.data.isDQUser?b.data.isDQUser.toString():"";userAttributes.setUserAttributesCookie(b.data.userAttributes)}d&&window.localStorage.setItem("qlogin-full-tms",d);a&&window.localStorage.setItem("qlogin-partial-tms",a);window.localStorage.setItem("isEmployee",h);window.localStorage.setItem("dqFlag",dqFlag);passwordSignIn.triggerEvent("login.success",
m);"string"===typeof dqFlag&&"true"===dqFlag&&(d=$("body").hasClass("checkout")?qVars.url.dqNotification:qVars.url.dqNotificationGeneric,qTagging.err.trigger({elemId:"ERROR: EASY PAY NOTIFICATION",elemCat:oTaggingDefaults.elemCat.errSignInForm,code:"NO CODE AVAILABLE",msg:"INSTALLMENT PAST DUE"}),qOpenUrl(d));"undefined"!==typeof m.dest&&(p=m.dest);if("undefined"!==typeof b.data&&"RESETPASSWORDONNEXTLOGIN"===b.data.authenticationStatus||qVars.feature.wcsLogin&&"RESETPASSWORDONNEXTLOGIN"===b.response.body.nextAction){sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,
f.$mailInput.val());sessionStorage.setItem("updatePasswordSuccessUrl",p);b=qVars.url.forcedResetPassword;"login"===qVars.page&&$("body").hasClass("checkout")&&null!==commonCartAjax.getId()&&(b=urlManager.addParam(b,"merge",c.sContext));qOpenUrl(b);break}else if(("undefined"!==typeof b.data&&"RESETQAONNEXTLOGIN"===b.data.authenticationStatus||qVars.feature.wcsLogin&&"RESETQAONNEXTLOGIN"===b.response.body.nextAction)&&"login"===qVars.page&&!$("body").hasClass("checkout")){sessionStorage.setItem("securityQuestionsSuccessUrl",
p);qOpenUrl(qVars.url.createSecurityQuestions);break}if("string"===typeof dqFlag&&"true"===dqFlag)if(d=$("body").hasClass("checkout")?qVars.url.dqNotification:qVars.url.dqNotificationGeneric,null===commonCartAjax.getId()){commonCartAjax.createNewCart({onSuccessEvent:"cartCreatedBeforeRedirect",successEventOptions:{purpose:"updateCartIdCount",redirect:d}});break}else if($("body").hasClass("checkout")||"true"!==window.sessionStorage.getItem("dqNoticeViewed")){qTagging.err.trigger({elemId:"ERROR: EASY PAY NOTIFICATION",
elemCat:oTaggingDefaults.elemCat.errSignInForm,code:"NO CODE AVAILABLE",msg:"INSTALLMENT PAST DUE"});qOpenUrl(d);break}0<document.location.pathname.indexOf("login.community")?nickname.getCommunityToken():0<document.location.pathname.indexOf("login.speedbuy")?speedBuyAjax.postLoginSpeedbuy():"ott-login"===qVars.pageType?qOpenUrl(p):"login"===qVars.page&&$("body").hasClass("checkout")&&null!==commonCartAjax.getId()?commonCartAjax.mergeCart({sContext:c.sContext,sRedirect:p}):""!==p?null===commonCartAjax.getId()?
commonCartAjax.createNewCart({onSuccessEvent:"cartCreatedBeforeRedirect",successEventOptions:{purpose:"updateCartIdCount",redirect:p}}):qOpenUrl(p):"login"===qVars.page&&qOpenUrl(qVars.url.myAccountUrl);break;case "fpInitiateForgotPassword":"object"===typeof b&&200===d.status&&($(".secQuestion strong",c.$form).text("string"===typeof b[0].question?b[0].question:""),c.$form.data({sqId:"string"===typeof b[0].id?b[0].id:"",sqQuestion:"string"===typeof b[0].question?b[0].question:"",sqQuestionCode:"string"===
typeof b[0].questionTypeCode?b[0].questionTypeCode:"",sqAnswerCode:"string"===typeof b[0].answerTypeCode?b[0].answerTypeCode:""}),$(".secQuestion").removeClass("invisible"),$(".securityQstnWithoutEmail").addClass("hidden"),$(".securityQstnWithEmail").removeClass("hidden"),sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmailProvided,"true"));break;case "fpResetForgotPasswordRequest":200===d.status&&(b="string"===typeof sessionStorage.getItem(passwordHelper.oOut.oSessionStorageKeys.custEmail)?
sessionStorage.getItem(passwordHelper.oOut.oSessionStorageKeys.custEmail):"",c.$form.hide(),0<b.length?($(".forgotSuccess.withEmail").html($(".forgotSuccess.withEmail").text().replace("{0}","\x3cstrong data-cs-mask\x3e"+c.fpEmail+"\x3c/strong\x3e")),$(".forgotSuccess.withEmail").removeClass("hidden")):$(".forgotSuccess.withoutEmail").removeClass("hidden"),$(".alert-danger,.forgotPin .custServ").hide(),$(".continueShopping").removeClass("hidden"));break;case "maResetForgotPin":-1<c.sResetForgotPasswordSuccessUrl.indexOf("account-settings")&&
sessionStorage.setItem("onLoadDismissMsg",i18nMapMsg.success["You have successfully updated your PIN."]);case "fpResetForgotPassword":qOpenUrl(c.sResetForgotPasswordSuccessUrl);break;case "maUpdatePassword":$.fancybox.isOpen?$.fancybox.close():$.fn.Accordion().setTabState($("#passwordAccordion .accordion"),"collapsed");qMsg.showGlobalDismissable(i18nMapMsg.success["You have successfully updated your password."],"success",{bIsTimed:!0});$(document).trigger("fireRegTag",{reason:"profileUpdate"});break;
case "updatePassword":sessionStorage.setItem("onLoadStaticMsg",i18nMapMsg.success["Password successfully reset"]);if(b=urlManager.getParam(location.href,"merge")){commonCartAjax.mergeCart({sContext:b,sRedirect:c.updatePasswordSuccessUrl,bSkipCreateCart:!0});break}qOpenUrl(c.updatePasswordSuccessUrl);break;case "userIdentity":switch(a=p=!1,"object"===typeof b&&"undefined"!==typeof b.flags&&(p=b.flags.passwordExists,a=b.flags.closed,commonCartAjax.getId()&&cartStorageHelper.set(commonCartAjax.getId(),
cartStorageHelper.name.passwordExists,p)),c.sContext){case "signInInit":"object"===typeof b&&200===d.status&&(dqFlag=b.flags.delinquent.toString(),localStorage.setItem("dqFlag",dqFlag));p&&passwordSignIn.updatesBasedOnEmailValidity(!0,f,m);break;case "signInSubmission":"object"===typeof b&&200===d.status&&(dqFlag=b.flags.delinquent.toString(),localStorage.setItem("dqFlag",dqFlag));a||(!p&&qVars.overlay.createPassword&&0<document.location.pathname.indexOf("myaccount")?overlayHelper.open(qVars.overlay.createPassword,
"overlayCreatePassword","createPassword",f.$mailInput):p||b.flags.pinExists||!qVars.feature.npoFlow?!p&&qVars.feature.npoFlow&&passwordSignIn.loadYourInformation("?NPO\x3dtrue",f):passwordSignIn.loadYourInformation("?NPO\x3dtrue",f));(a||p||!qVars.feature.npoFlow)&&passwordSignIn.updatesBasedOnEmailValidity(!0,f,m);break;case "yourInfoEmailInit":case "yourInfoEmailChange":f.$mailInput.data("emailExists",!0),sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,f.$mailInput.val()),
"yourInfoEmailChange"===c.sContext&&qMsg.showGlobalStatic(qMsgStorage.err.yourInformation.coEmailAlreadyExists,"danger")}}}},failHandler:function(a,b){var c="undefined"!==typeof a.oOptionalParams?a.oOptionalParams:{},d="undefined"!==typeof c.oElements?c.oElements:{},f="undefined"!==typeof c.oOptions?c.oOptions:{},m=b.responseJSON,p=b.status,h=qMsgStorage.err.general.serviceError;b={elemId:oTaggingDefaults.elemId.errGeneric,elemCat:oTaggingDefaults.elemCat.errCheckout,msg:"object"===typeof m&&m.message?
m.message:oTaggingDefaults.msg.errGeneric,code:"object"===typeof m&&b.responseJSON.code?b.responseJSON.code:b.status};var t="boolean"===typeof qVars.feature.forgotPwThreeFactorAuth&&qVars.feature.forgotPwThreeFactorAuth;switch(a.name){case "contentPwAuthHandler":case "pwAuthHandler":passwordAjax.handleAuthError(m,p,f,c);$(document).trigger("reAddLoginListener");break;case "fpInitiateForgotPassword":$(".securityQstnWithoutEmail").removeClass("hidden");$(".securityQstnWithEmail").addClass("hidden");
sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmailProvided,"false");400===p?h=i18nMapMsg.error["Email address was not found"]:404===p?h=i18nMapMsg.error["Email address not found. If you have any questions, please contact our customer service"]:(h=i18nMapMsg.error["There was an issue with the server. Please try later"],b.elemCat=oTaggingDefaults.elemCat.errMyAccount,qTagging.err.trigger(b));qMsg.showGlobalStatic(h,"danger");break;case "createPassword":if("object"===typeof m)switch(m.code){case "10016":case "10017":h=
qMsgStorage.err.resetPassword.restrictedPassword;break;default:h=qMsgStorage.err.general.serviceError}qMsg.showGlobalStatic(h,"danger");break;case "updatePassword":if("object"===typeof m)switch(m.code){case "10019":h=qMsgStorage.err.resetPassword.restrictedPassword;break;case "10017":h=qMsgStorage.err.login.failedAuthentication;break;case "10042":h=qMsgStorage.err.resetPassword.recentlyUsedPassword;break;default:h=qMsgStorage.err.general.serviceError}"reset-password"===cm_data.page_type&&0<=window.location.pathname.search(/forced/i)&&
(b.elemId=oTaggingDefaults.elemId.errPasswordReset,b.elemCat=oTaggingDefaults.elemCat.errMyAccount,qTagging.err.trigger(b));qMsg.showGlobalStatic(h,"danger");break;case "maUpdatePassword":if(401===p){accountSettings.reAuth("#passwordWr");break}else"object"===typeof m&&(f=$.fancybox.isActive?{}:{locationClass:"#"+c.oForm.closest(".accordion").attr("id")+" .accordionBox",bNoScroll:!0},"10019"===m.code?h=i18nMapMsg.error["Sorry, we don't allow common passwords such as this one."]:"10017"===m.code||"10021"===
m.code?h=i18nMapMsg.error["The information is incorrect"]:"10042"===m.code?h=qMsgStorage.err.resetPassword.recentlyUsedPassword:(c.oForm.find(".btnCancel").click(),f={}));qMsg.showGlobalStatic(h,"danger",f);$(".secQuestion").removeClass("invisible");break;case "maResetForgotPin":case "fpResetForgotPassword":"object"===typeof m&&("10018"===m.code||"10022"===m.code||"10043"===m.code?h=i18nMapMsg.error["We're sorry! That PIN cannot be used. Please try again."]:"10019"===m.code?h=i18nMapMsg.error["Sorry, we don't allow common passwords such as this one."]:
"10017"===m.code||"10021"===m.code||"10016"===m.code?h=i18nMapMsg.error["The information you entered is incorrect. Please try again."]:"20001"===m.code?h=qMsgStorage.err.forgotPassword.maxAttemptsReached:"10010"===m.code&&(h=qMsgStorage.err.forgotPassword.invalidToken));"object"===typeof cm_data&&"reset-password"===cm_data.page_type&&-1<window.location.pathname.search(/forced/i)&&(b.elemId=oTaggingDefaults.elemId.errPasswordReset,b.elemCat=oTaggingDefaults.elemCat.errMyAccount,qTagging.err.trigger(b));
qMsg.showGlobalStatic(h,"danger",f);break;case "fpResetForgotPasswordRequest":if("object"===typeof m)if(b.code=m.code,"20001"===m.code)h=qMsgStorage.err.forgotPassword.maxAttemptsReached;else if("20002"===m.code)h=qMsgStorage.err.forgotPassword.incorrectSecurityAnswer;else if("20003"===m.code)h=qMsgStorage.err.forgotPassword.badRequest;else if("10005"===m.code&&t){c.$form.hide();$(".forgotSuccess.withoutEmail").removeClass("hidden");$(".continueShopping").removeClass("hidden");break}else"10025"===
m.code||"99999"===m.code?t?"10025"===m.code&&(h=qMsgStorage.err.forgotPassword.emailSending):h=i18nMapMsg.error["There was an issue with the server. Please try later"]:"10019"===m.code&&(h=qMsgStorage.err.resetPassword.restrictedPassword);if("object"!==typeof m||"object"===typeof m&&"20001"!==m.code)500===p?b.elemCat=oTaggingDefaults.elemCat.errMyAccount:(b.elemId=oTaggingDefaults.elemId.errSecQuestionInfo,b.elemCat=oTaggingDefaults.elemCat.errSignInForm),b.msg="object"===typeof m&&"20002"===m.code?
oTaggingDefaults.msg.errSecurityInfoMismatch:h,qTagging.err.trigger(b);qMsg.showGlobalStatic(h,"danger");break;case "userIdentity":switch(404===p&&cartStorageHelper.set(commonCartAjax.getId(),cartStorageHelper.name.passwordExists,!1),c.sContext){case "signInInit":case "signInSubmission":a=!0;"object"===typeof m&&("10004"===m.code?h=qMsgStorage.err.login.contactCS:"10005"===m.code?(a=!1,passwordSignIn.updatesBasedOnEmailValidity(!1,d,f)):"10024"===m.code&&(h=qMsgStorage.err.login.emailInvalidSyntax));
if(500===p||503===p||504===p)a=!1,f.identityServiceFailure=!0,passwordSignIn.updatesBasedOnEmailValidity(!0,d,f);a&&qMsg.showGlobalStatic(h,"danger");break;case "yourInfoEmailChange":404===p?d.$mailInput.data("emailExists",!1):400===p||401===p?qMsg.showGlobalStatic(qMsgStorage.err.yourInformation.invalidUserData,"danger"):qMsg.showGlobalStatic(h,"danger")}}},getLegacyMsg:function(a,b){return"undefined"!==typeof a&&"undefined"!==typeof a.response&&"undefined"!==typeof a.response.body&&"undefined"!==
typeof a.response.body.customermessage?a.response.body.customermessage[b]:""},handleAuthError:function(a,b,c,d){var f="undefined"!==typeof d.oElements?d.oElements:{},m="",p="",h=oTaggingDefaults.elemCat.errSignInForm,t="",g=qMsgStorage.err.general.serviceError,r=-1<location.href.indexOf("/ott/login")?qVars.url.accountLockedOTT:$("body").hasClass("checkout")?qVars.url.accountLocked:qVars.url.accountLockedGeneric;"object"===typeof a&&(m=qVars.feature.wcsLogin?this.getLegacyMsg(a,"loginErrorCode"):a.data.code,
t=qVars.feature.wcsLogin?this.getLegacyMsg(a,"responsecodedescription"):a.data.message);switch(m){case "10001":g=qMsgStorage.err.login.failedAuthentication;a=oTaggingDefaults.elemId.errLoginIncorrect;t=""!==t?t:"INFORMATION DOES NOT MATCH";break;case "10005":a=oTaggingDefaults.elemId.errAccLocked;sessionStorage.setItem(passwordHelper.oOut.oSessionStorageKeys.custEmail,f.$mailInput.val());p=r.replace("{0}","login");t=oTaggingDefaults.msg.errAccountLockedSignIns;break;case "10006":a=oTaggingDefaults.elemId.errAccLocked;
p=r.replace("{0}","cvv");t=oTaggingDefaults.msg.errAccountLockedCvv;break;case "10007":a=oTaggingDefaults.elemId.errAccLocked;p=r.replace("{0}","qa");t=oTaggingDefaults.msg.errAccountLockedSecurAlert;break;case "10008":a=oTaggingDefaults.elemId.errAccLocked;p=urlManager.addParam(r.replace("{0}","other"),"code",m);t=oTaggingDefaults.msg.errAccountSuspendedRiskAlert;break;case "10003":case "10004":case "10009":a=oTaggingDefaults.elemId.errAccLocked;p=urlManager.addParam(r.replace("{0}","other"),"code",
m);t=oTaggingDefaults.msg.errAccountSuspendedUnknown;break;default:a=oTaggingDefaults.elemId.errGeneric}qTagging.err.trigger({elemId:a,elemCat:h,code:m,msg:t});d.$npoWr.removeClass("hidden").show();d.$pwInput.val("");passwordSignIn.triggerEvent("login.error",{status:b,code:m,msg:g,context:c.context,caller:c.caller});""!==p?qOpenUrl(p):qMsg.showGlobalStatic(g,"danger")}},passwordUtility=new ajaxUtility(passwordAjax),loginOverlay={classname:"loginOverlay",tagPromo:"GENERAL_SIGN_IN",tagPath:"GENERAL SIGN IN",
open:function(a){var b=this,c=fancyBoxesAndTooltips.getFbDefaults(fancyBoxesAndTooltips.getDeviceType());$.fancybox($.extend(!0,{},c,{type:"ajax",href:qVars.overlay.myAccountLogin,wrapCSS:b.classname,maxWidth:530,beforeShow:function(){"function"===typeof c.beforeShow&&c.beforeShow();b.beforeShow(a)},afterShow:function(){"function"===typeof c.afterShow&&c.afterShow();b.afterShow(a)},beforeClose:function(){"function"===typeof c.beforeClose&&c.beforeClose();b.beforeClose(a)}}))},beforeShow:function(a){"string"===
typeof a.tagPromo&&""!==a.tagPromo&&(this.tagPromo=a.tagPromo);"string"===typeof a.tagPath&&""!==a.tagPath&&(this.tagPath=a.tagPath);$mainComponent=$("."+this.classname);$form=$("form",$mainComponent);var b=passwordSignIn.oOut.oElementsSignInInitialised;b=$.extend(!0,b,{$chkShowPw:$('[name\x3d"showPw"]',$form),$form:$form,$mailInput:$('input[name\x3d"email"]',$form),$mainComponent:$mainComponent,$pwBlock:$(".password",$form),$pwInput:$('input[name\x3d"pw"]',$form),$visiblePw:$('[name\x3d"visiblePw"]',
$form)});passwordSignIn.init(b,a)},afterShow:function(a){this.tagging()},beforeClose:function(a){"undefined"!==typeof openOrders&&openOrders.loginClose&&openOrders.complete()},tagging:function(){$(document).trigger("login.overlay.tagging")}};$("a.loginOverlayLink").click(function(){loginOverlay.open({context:"loginOverlay",caller:$(this)})});
(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b(require("global/window"),require("global/document")):"function"===typeof define&&define.amd?define(["global/window","global/document"],b):(a=a||self,a.videojs=b(a.window,a.document))})(this,function(a,b){function c(a){var b="info",u=function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];k("log",b,c)};var k=qi(a,u);u.createLogger=function(b){return c(a+": "+b)};u.levels={all:"debug|log|warn|error",
off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:b};u.level=function(a){if("string"===typeof a){if(!u.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');b=a}return b};u.history=function(){return Ca?[].concat(Ca):[]};u.history.filter=function(a){return(Ca||[]).filter(function(b){return(new RegExp(".*"+a+".*")).test(b[0])})};u.history.clear=function(){Ca&&(Ca.length=0)};u.history.disable=function(){null!==Ca&&(Ca.length=0,Ca=null)};
u.history.enable=function(){null===Ca&&(Ca=[])};u.error=function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return k("error",b,c)};u.warn=function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return k("warn",b,c)};u.debug=function(){for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return k("debug",b,c)};return u}function d(a,b){return b={exports:{}},a(b,b.exports),b.exports}function f(a,b){ff(a).forEach(function(c){return b(a[c],
c)})}function m(a,b,c){void 0===c&&(c=0);return ff(a).reduce(function(c,l){return b(c,a[l],l)},c)}function p(a){for(var b=arguments.length,c=Array(1<b?b-1:0),k=1;k<b;k++)c[k-1]=arguments[k];if(Object.assign)return Mc.apply(void 0,[a].concat(c));c.forEach(function(b){b&&f(b,function(b,l){a[l]=b})});return a}function h(a){return!!a&&"object"===typeof a}function t(a){return h(a)&&"[object Object]"===ri.call(a)&&a.constructor===Object}function g(b,c){return b&&c?"function"===typeof a.getComputedStyle?
(b=a.getComputedStyle(b))?b.getPropertyValue(c)||b[c]:"":"":""}function r(a){if(0<=a.indexOf(" "))throw Error("class has illegal whitespace characters");}function v(){return b===a.document}function A(a){return h(a)&&1===a.nodeType}function G(){try{return a.parent!==a.self}catch(Ya){return!0}}function X(a){return function(c,u){if("string"!==typeof c||!c.trim())return b[a](null);"string"===typeof u&&u.trim()&&(u=b.querySelector(u));u=A(u)?u:b;return u[a]&&u[a](c)}}function I(a,c,u,k){void 0===a&&(a=
"div");void 0===c&&(c={});void 0===u&&(u={});var l=b.createElement(a);Object.getOwnPropertyNames(c).forEach(function(a){var b=c[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(ca.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+a+" to "+b+".")),l.setAttribute(a,b)):"textContent"===a?O(l,b):l[a]!==b&&(l[a]=b)});Object.getOwnPropertyNames(u).forEach(function(a){l.setAttribute(a,
u[a])});k&&rb(l,k);return l}function O(a,b){"undefined"===typeof a.textContent?a.innerText=b:a.textContent=b;return a}function H(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function ha(a,b){r(b);return a.classList?a.classList.contains(b):(new RegExp("(^|\\s)"+b+"($|\\s)")).test(a.className)}function L(a,b){a.classList?a.classList.add(b):ha(a,b)||(a.className=(a.className+" "+b).trim());return a}function E(a,b){a.classList?a.classList.remove(b):(r(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==
b}).join(" "));return a}function Y(a,b,c){var k=ha(a,b);"function"===typeof c&&(c=c(a,b));"boolean"!==typeof c&&(c=!k);if(c!==k)return c?L(a,b):E(a,b),a}function oa(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var k=b[c];null===k||"undefined"===typeof k||!1===k?a.removeAttribute(c):a.setAttribute(c,!0===k?"":k)})}function aa(a){var b={};if(a&&a.attributes&&0<a.attributes.length)for(var c=a.attributes,k=c.length-1;0<=k;k--){var l=c[k].name,z=c[k].value;if("boolean"===typeof a[l]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+
l+","))z=null!==z?!0:!1;b[l]=z}return b}function J(){b.body.focus();b.onselectstart=function(){return!1}}function ka(){b.onselectstart=function(){return!0}}function W(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(a){void 0!==b[a]&&(c[a]=b[a])});c.height||(c.height=parseFloat(g(a,"height")));c.width||(c.width=parseFloat(g(a,"width")));return c}}function P(c){var d;c.getBoundingClientRect&&c.parentNode&&
(d=c.getBoundingClientRect());if(!d)return{left:0,top:0};c=b.documentElement;var u=b.body;return{left:Math.round(d.left+(a.pageXOffset||u.scrollLeft)-(c.clientLeft||u.clientLeft||0)),top:Math.round(d.top+(a.pageYOffset||u.scrollTop)-(c.clientTop||u.clientTop||0))}}function da(a,b){var c={},k=P(a),l=a.offsetWidth;a=a.offsetHeight;var z=k.top;k=k.left;var d=b.pageY,B=b.pageX;b.changedTouches&&(B=b.changedTouches[0].pageX,d=b.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(z-d+a)/a));c.x=Math.max(0,
Math.min(1,(B-k)/l));return c}function T(a){return h(a)&&3===a.nodeType}function Aa(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function Za(a){"function"===typeof a&&(a=a());return(Array.isArray(a)?a:[a]).map(function(a){"function"===typeof a&&(a=a());if(A(a)||T(a))return a;if("string"===typeof a&&/\S/.test(a))return b.createTextNode(a)}).filter(function(a){return a})}function rb(a,b){Za(b).forEach(function(b){return a.appendChild(b)});return a}function M(a,b){return rb(Aa(a),b)}function ab(a){return void 0===
a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||"mouseup"===a.type&&0===a.button&&0===a.buttons?!0:0!==a.button||1!==a.buttons?!1:!0}function fb(b,c){c&&(zd=c);a.setTimeout(si,b)}function gb(){gf=!0;a.removeEventListener("load",gb)}function Bb(a,b){if(Ga.has(a)){var c=Ga.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&
(delete c.handlers,delete c.dispatcher,delete c.disabled);if(0===Object.getOwnPropertyNames(c).length)Ga["delete"](a)}}function $a(a,b,c,k){c.forEach(function(l){a(b,l,k)})}function la(c){function d(){return!0}function u(){return!1}if(c.fixed_)return c;if(!c||!c.isPropagationStopped){var k=c||a.event;c={};for(var l in k)"layerX"!==l&&"layerY"!==l&&"keyLocation"!==l&&"webkitMovementX"!==l&&"webkitMovementY"!==l&&("returnValue"===l&&k.preventDefault||(c[l]=k[l]));c.target||(c.target=c.srcElement||b);
c.relatedTarget||(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);c.preventDefault=function(){k.preventDefault&&k.preventDefault();c.returnValue=!1;k.returnValue=!1;c.defaultPrevented=!0};c.defaultPrevented=!1;c.stopPropagation=function(){k.stopPropagation&&k.stopPropagation();c.cancelBubble=!0;k.cancelBubble=!0;c.isPropagationStopped=d};c.isPropagationStopped=u;c.stopImmediatePropagation=function(){k.stopImmediatePropagation&&k.stopImmediatePropagation();c.isImmediatePropagationStopped=
d;c.stopPropagation()};c.isImmediatePropagationStopped=u;if(null!==c.clientX&&void 0!==c.clientX){l=b.documentElement;var z=b.body;c.pageX=c.clientX+(l&&l.scrollLeft||z&&z.scrollLeft||0)-(l&&l.clientLeft||z&&z.clientLeft||0);c.pageY=c.clientY+(l&&l.scrollTop||z&&z.scrollTop||0)-(l&&l.clientTop||z&&z.clientTop||0)}c.which=c.charCode||c.keyCode;null!==c.button&&void 0!==c.button&&(c.button=c.button&1?0:c.button&4?1:c.button&2?2:0)}c.fixed_=!0;return c}function ia(a,b,c){if(Array.isArray(b))return $a(ia,
a,b,c);Ga.has(a)||Ga.set(a,{});var k=Ga.get(a);k.handlers||(k.handlers={});k.handlers[b]||(k.handlers[b]=[]);c.guid||(c.guid=ub++);k.handlers[b].push(c);k.dispatcher||(k.disabled=!1,k.dispatcher=function(b,c){if(!k.disabled){b=la(b);var l=k.handlers[b.type];if(l){l=l.slice(0);for(var u=0,z=l.length;u<z&&!b.isImmediatePropagationStopped();u++)try{l[u].call(a,b,c)}catch(y){ca.error(y)}}}});1===k.handlers[b].length&&(a.addEventListener?(c=!1,ti()&&-1<ui.indexOf(b)&&(c={passive:!0}),a.addEventListener(b,
k.dispatcher,c)):a.attachEvent&&a.attachEvent("on"+b,k.dispatcher))}function ba(a,b,c){if(Ga.has(a)){var k=Ga.get(a);if(k.handlers){if(Array.isArray(b))return $a(ba,a,b,c);if(void 0===b)for(var l in k.handlers)Object.prototype.hasOwnProperty.call(k.handlers||{},l)&&(b=a,c=l,k.handlers[c]=[],Bb(b,c));else if(l=k.handlers[b]){if(!c)k.handlers[b]=[];else if(c.guid)for(k=0;k<l.length;k++)l[k].guid===c.guid&&l.splice(k--,1);Bb(a,b)}}}}function Z(a,b,c){var k=Ga.has(a)?Ga.get(a):{},l=a.parentNode||a.ownerDocument;
"string"===typeof b?b={type:b,target:a}:b.target||(b.target=a);b=la(b);k.dispatcher&&k.dispatcher.call(a,b,c);if(l&&!b.isPropagationStopped()&&!0===b.bubbles)Z.call(null,l,b,c);else if(!l&&!b.defaultPrevented&&b.target&&b.target[b.type]&&(Ga.has(b.target)||Ga.set(b.target,{}),a=Ga.get(b.target),b.target[b.type])){a.disabled=!0;if("function"===typeof b.target[b.type])b.target[b.type]();a.disabled=!1}return!b.defaultPrevented}function Ua(a,b,c){if(Array.isArray(b))return $a(Ua,a,b,c);var k=function z(){ba(a,
b,z);c.apply(this,arguments)};k.guid=c.guid=c.guid||ub++;ia(a,b,k)}function hb(a,b,c){var k=function z(){ba(a,b,z);c.apply(this,arguments)};k.guid=c.guid=c.guid||ub++;ia(a,b,k)}function ib(b,c){void 0===c&&(c={});if(c=c.eventBusKey){if(!b[c].nodeName)throw Error('The eventBusKey "'+c+'" does not refer to an element.');b.eventBusEl_=b[c]}else b.eventBusEl_=I("span",{className:"vjs-event-bus"});p(b,vi);b.eventedCallbacks&&b.eventedCallbacks.forEach(function(a){a()});b.on("dispose",function(){b.off();
a.setTimeout(function(){b.eventBusEl_=null},0)});return b}function Cb(a,b){p(a,wi);a.state=p({},a.state,b);if("function"===typeof a.handleStateChanged&&Eb(a))a.on("statechanged",a.handleStateChanged);return a}function S(){for(var a={},b=arguments.length,c=Array(b),k=0;k<b;k++)c[k]=arguments[k];c.forEach(function(b){b&&f(b,function(b,c){t(b)?(t(a[c])||(a[c]={}),a[c]=S(a[c],b)):a[c]=b})});return a}function jb(a,b,c,k){var l=c.length-1;if("number"!==typeof k||0>k||k>l)throw Error("Failed to execute '"+
a+"' on 'TimeRanges': The index provided ("+k+") is non-numeric or out of bounds (0-"+l+").");return c[k][b]}function Nb(a){return void 0===a||0===a.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:a.length,start:jb.bind(null,"start",0,a),end:jb.bind(null,"end",1,a)}}function Va(a,b){return Array.isArray(a)?Nb(a):void 0===a||void 0===b?Nb():Nb([[a,b]])}function mc(a,b){var c=0;if(!b)return 0;
a&&a.length||(a=Va(0,0));for(var k=0;k<a.length;k++){var l=a.start(k);var z=a.end(k);z>b&&(z=b);c+=z-l}return c/b}function ja(a){if(a instanceof ja)return a;"number"===typeof a?this.code=a:"string"===typeof a?this.message=a:h(a)&&("number"===typeof a.code&&(this.code=a.code),p(this,a));this.message||(this.message=ja.defaultMessages[this.code]||"")}function sb(a){return void 0!==a&&null!==a&&"function"===typeof a.then}function tb(a){sb(a)&&a.then(null,function(a){})}function Jc(a){for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0}function Kc(a,b,c){var k=a,l=xi.call(b);"[object Function]"===l||"function"===typeof b&&"[object RegExp]"!==l||"undefined"!==typeof window&&(b===window.setTimeout||b===window.alert||b===window.confirm||b===window.prompt)?(c=b,"string"===typeof a&&(k={uri:a})):k=Mc({},b,{uri:a});k.callback=c;return k}function Oa(a,b,c){b=Kc(a,b,c);return Lc(b)}function Lc(a){function b(b){clearTimeout(Ya);b instanceof Error||(b=Error(""+(b||"Unknown XMLHttpRequest Error")));b.statusCode=0;var c=g;k||(k=!0,
a.callback(b,c,void 0))}function c(){if(!d){clearTimeout(Ya);var b=a.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var c=g,u=null;if(0!==b){if(l.response)c=l.response;else if(!(c=l.responseText))a:{try{if("document"===l.responseType){c=l.responseXML;break a}var n=l.responseXML&&"parsererror"===l.responseXML.documentElement.nodeName;if(""===l.responseType&&!n){c=l.responseXML;break a}}catch(zi){}c=null}if(f)try{c=JSON.parse(c)}catch(zi){}c={body:c,statusCode:b,method:q,headers:{},url:qa,
rawRequest:l};l.getAllResponseHeaders&&(c.headers=Ai(l.getAllResponseHeaders()))}else u=Error("Internal XMLHttpRequest Error");b=c.body;k||(k=!0,a.callback(u,c,b))}}if("undefined"===typeof a.callback)throw Error("callback argument missing");var k=!1,l=a.xhr||null;l||(l=a.cors||a.useXDR?new Oa.XDomainRequest:new Oa.XMLHttpRequest);var z,d,qa=l.url=a.uri||a.url,q=l.method=a.method||"GET",y=a.body||a.data,n=l.headers=a.headers||{},x=!!a.sync,f=!1,Ya,g={body:void 0,headers:{},statusCode:0,method:q,url:qa,
rawRequest:l};"json"in a&&!1!==a.json&&(f=!0,n.accept||n.Accept||(n.Accept="application/json"),"GET"!==q&&"HEAD"!==q&&(n["content-type"]||n["Content-Type"]||(n["Content-Type"]="application/json"),y=JSON.stringify(!0===a.json?y:a.json)));l.onreadystatechange=function(){4===l.readyState&&setTimeout(c,0)};l.onload=c;l.onerror=b;l.onprogress=function(){};l.onabort=function(){d=!0};l.ontimeout=b;l.open(q,qa,!x,a.username,a.password);x||(l.withCredentials=!!a.withCredentials);!x&&0<a.timeout&&(Ya=setTimeout(function(){if(!d){d=
!0;l.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT";b(a)}},a.timeout));if(l.setRequestHeader)for(z in n)n.hasOwnProperty(z)&&l.setRequestHeader(z,n[z]);else if(a.headers&&!Jc(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in a&&(l.responseType=a.responseType);"beforeSend"in a&&"function"===typeof a.beforeSend&&a.beforeSend(l);l.send(y||null);return l}function Db(){}function xa(a,b){this.name="ParsingError";this.code=a.code;this.message=
b||a.message}function Pb(a){a=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!a)return null;if(a[3]){var b=a[3].replace(":","");return 3600*(a[1]|0)+60*(a[2]|0)+(b|0)+(a[4]|0)/1E3}return 59<a[1]?3600*(a[1]|0)+60*(a[2]|0)+(a[4]|0)/1E3:60*(a[1]|0)+(a[2]|0)+(a[4]|0)/1E3}function bb(){this.values=Ad(null)}function kc(a,b,c,k){a=k?a.split(k):[a];for(var l in a)"string"===typeof a[l]&&(k=a[l].split(c),2===k.length&&b(k[0],k[1]))}function li(a,b,c){function k(){var b=Pb(a);if(null===b)throw new xa(xa.Errors.BadTimeStamp,
"Malformed timestamp: "+u);a=a.replace(/^[^\sa-zA-Z-]+/,"");return b}function l(){a=a.replace(/^\s+/,"")}var u=a;l();b.startTime=k();l();if("--\x3e"!==a.substr(0,3))throw new xa(xa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);a=a.substr(3);l();b.endTime=k();l();(function(a,b){var l=new bb;kc(a,function(a,b){switch(a){case "region":for(var k=c.length-1;0<=k;k--)if(c[k].id===b){l.set(a,c[k].region);break}break;case "vertical":l.alt(a,b,["rl","lr"]);break;
case "line":b=b.split(",");k=b[0];l.integer(a,k);l.percent(a,k)?l.set("snapToLines",!1):null;l.alt(a,k,["auto"]);2===b.length&&l.alt("lineAlign",b[1],["start","center","end"]);break;case "position":b=b.split(",");l.percent(a,b[0]);2===b.length&&l.alt("positionAlign",b[1],["start","center","end"]);break;case "size":l.percent(a,b);break;case "align":l.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/);b.region=l.get("region",null);b.vertical=l.get("vertical","");try{b.line=l.get("line","auto")}catch(y){}b.lineAlign=
l.get("lineAlign","start");b.snapToLines=l.get("snapToLines",!0);b.size=l.get("size",100);try{b.align=l.get("align","center")}catch(y){b.align=l.get("align","middle")}try{b.position=l.get("position","auto")}catch(y){b.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)})(a,b)}function df(a,b){function c(){if(!b)return null;var a=b.match(/^([^<]*)(<[^>]*>?)?/);
a=a[1]?a[1]:a[2];b=b.substr(a.length);return a}function k(a){Bd.innerHTML=a;a=Bd.textContent;Bd.textContent="";return a}function l(b,c){var l=Bi[b];if(!l)return null;l=a.document.createElement(l);(b=Ci[b])&&c&&(l[b]=c.trim());return l}for(var z=a.document.createElement("div"),d=z,B,q=[];null!==(B=c());)if("\x3c"===B[0])if("/"===B[1])q.length&&q[q.length-1]===B.substr(2).replace("\x3e","")&&(q.pop(),d=d.parentNode);else{var y=Pb(B.substr(1,B.length-2));if(y){var n=a.document.createProcessingInstruction("timestamp",
y);d.appendChild(n)}else if(B=B.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(n=l(B[1],B[3]))||jf[n.localName]&&jf[n.localName]!==d.localName||(B[2]&&(y=B[2].split("."),y.forEach(function(a){var b=/^bg_/.test(a);a=b?a.slice(3):a;kf.hasOwnProperty(a)&&(n.style[b?"background-color":"color"]=kf[a])}),n.className=y.join(" ")),q.push(B[1]),d.appendChild(n),d=n)}else d.appendChild(a.document.createTextNode(k(B)));return z}function mi(a){for(var b=0;b<lf.length;b++){var c=lf[b];if(a>=c[0]&&
a<=c[1])return!0}return!1}function ni(a){function b(a,b){for(var c=b.childNodes.length-1;0<=c;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var l=a.pop(),k=l.textContent||l.innerText;if(k)return(l=k.match(/^.*(\n|\r)/))?(a.length=0,l[0]):k;if("ruby"===l.tagName)return c(a);if(l.childNodes)return b(a,l),c(a)}var k=[],l="";if(!a||!a.childNodes)return"ltr";for(b(k,a);l=c(k);)for(var z=0;z<l.length;z++)if(a=l.charCodeAt(z),mi(a))return"rtl";return"ltr"}function xd(){}function Ic(a,
b,c){this.cue=b;this.cueDiv=df(a,b.text);var k={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(k,this.cueDiv);this.div=a.document.createElement("div");k={direction:ni(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",
textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(k);this.div.appendChild(this.cueDiv);a=0;switch(b.positionAlign){case "start":a=b.position;break;case "center":a=b.position-b.size/2;break;case "end":a=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(b.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,
"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function na(a){if(a.div){var b=a.div.offsetHeight;var c=a.div.offsetWidth;var k=a.div.offsetTop;var l=(l=a.div.childNodes)&&(l=l[0])&&l.getClientRects&&l.getClientRects();a=a.div.getBoundingClientRect();var z=l?Math.max(l[0]&&l[0].height||0,a.height/l.length):0}this.left=a.left;this.right=a.right;this.top=
a.top||k;this.height=a.height||b;this.bottom=a.bottom||k+(a.height||b);this.width=a.width||c;this.lineHeight=void 0!==z?z:a.lineHeight}function Ob(){}function yd(a){return"string"!==typeof a?!1:Di[a.toLowerCase()]?a.toLowerCase():!1}function ef(a,b,c){this.hasBeenReset=!1;var k="",l=!1,u=a,d=b,B=c,q=null,y="",n=!0,x="auto",f="start",va="auto",g="auto",Ya=100,h="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return k},set:function(a){k=""+a}},pauseOnExit:{enumerable:!0,get:function(){return l},
set:function(a){l=!!a}},startTime:{enumerable:!0,get:function(){return u},set:function(a){if("number"!==typeof a)throw new TypeError("Start time must be set to a number.");u=a;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(a){if("number"!==typeof a)throw new TypeError("End time must be set to a number.");d=a;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return B},set:function(a){B=""+a;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return q},
set:function(a){q=a;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return y},set:function(a){a="string"!==typeof a?!1:Ei[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");y=a;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return n},set:function(a){n=!!a;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return x},set:function(a){if("number"!==typeof a&&"auto"!==a)throw new SyntaxError("Line: an invalid number or illegal string was specified.");
x=a;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(a){(a=yd(a))?(f=a,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return va},set:function(a){if(0>a||100<a)throw Error("Position must be between 0 and 100.");va=a;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(a){(a=yd(a))?(g=a,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},
size:{enumerable:!0,get:function(){return Ya},set:function(a){if(0>a||100<a)throw Error("Size must be between 0 and 100.");Ya=a;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return h},set:function(a){a=yd(a);if(!a)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");h=a;this.hasBeenReset=!0}}});this.displayState=void 0}function lc(a){return"number"===typeof a&&0<=a&&100>=a}function oi(a,b,c){a.setTimeout(function(){return Fb(b,Gb[b.type],c,a)},1)}function pi(a,
b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}function mf(a,b,c,k){void 0===k&&(k=null);var l="call"+pa(c);l=a.reduce(Cd(l),k);b=(k=l===Oc)?null:b[c](l);for(l=a.length-1;0<=l;l--){var u=a[l];if(u[c])u[c](k,b)}return b}function Cd(a){return function(b,c){return b===Oc?Oc:c[a]?c[a](b):b}}function Fi(a,b){var c=Dd[a.id()],k=null;if(void 0===c||null===c)return k=b(a),Dd[a.id()]=[[b,k]],k;for(var l=0;l<c.length;l++){var z=c[l];z[0]===b&&(k=z[1])}null===k&&(k=b(a),c.push([b,k]));return k}function Fb(a,
b,c,k,l,z){void 0===a&&(a={});void 0===b&&(b=[]);void 0===l&&(l=[]);void 0===z&&(z=!1);var u=b[0],d=b.slice(1);if("string"===typeof u)Fb(a,Gb[u],c,k,l,z);else if(u){var B=Fi(k,u);if(!B.setSource)return l.push(B),Fb(a,d,c,k,l,z);B.setSource(p({},a),function(b,u){if(b)return Fb(a,d,c,k,l,z);l.push(B);Fb(u,a.type===u.type?d:Gb[u.type],c,k,l,z)})}else d.length?Fb(a,d,c,k,l,z):z?c(a,l):Fb(a,Gb["*"],c,k,l,!0)}function nf(a){if(!a.type){var b=Pc(a.src);b&&(a.type=b)}return a}function Ed(a,b){if(4===a.length)a=
a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(7===a.length)a=a.slice(1);else throw Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+b+")"}function Rb(a,b){void 0===b&&(b=a);return Fd(a,b)}function of(a,b){b&&(a=b(a));if(a&&"none"!==a)return a}function w(a,b,c){var k=w.getPlayer(a);if(k)return b&&ca.warn('Player "'+a+'" is already initialised. Options will not be applied.'),
c&&k.ready(c),k;var l="string"===typeof a?vb("#"+pf(a)):a;if(!A(l))throw new TypeError("The element or ID supplied is not valid. (videojs)");l.ownerDocument.defaultView&&l.ownerDocument.body.contains(l)||ca.warn("The element supplied is not included in the DOM");b=b||{};w.hooks("beforesetup").forEach(function(a){a=a(l,S(b));!h(a)||Array.isArray(a)?ca.error("please return an object in beforesetup hooks"):b=S(b,a)});k=new (C.getComponent("Player"))(l,b,c);w.hooks("setup").forEach(function(a){return a(k)});
return k}function Gd(){Gd=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],k;for(k in c)Object.prototype.hasOwnProperty.call(c,k)&&(a[k]=c[k])}return a};return Gd.apply(this,arguments)}function Hd(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}function Gi(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qf(a){return a&&"object"===typeof a&&"default"in a?a["default"]:
a}function rf(){}function Hi(a,b,c,k,l){function u(a){var b=a.slice(1,-1);if(b in c)return c[b];if("#"===b.charAt(0))return a=parseInt(b.substr(1).replace("x","0x")),65535<a?(a-=65536,a=String.fromCharCode(55296+(a>>10),56320+(a&1023))):a=String.fromCharCode(a),a;l.error("entity not found:"+a);return a}function d(b){if(b>va){var c=a.substring(va,b).replace(/&#?\w+;/g,u);x&&B(va);k.characters(c,0,b-va);va=b}}function B(b,c){for(;b>=y&&(c=n.exec(a));)q=c.index,y=q+c[0].length,x.lineNumber++;x.columnNumber=
b-q+1}var q=0,y=0,n=/.*(?:\r\n?|\n)|.*$/g,x=k.locator;b=[{currentNSMap:b}];for(var f={},va=0;;){try{var g=a.indexOf("\x3c",va);if(0>g){if(!a.substr(va).match(/^\s*$/)){var Ya=k.doc,h=Ya.createTextNode(a.substr(va));Ya.appendChild(h);k.currentElement=h}break}g>va&&d(g);switch(a.charAt(g+1)){case "/":var p=a.indexOf("\x3e",g+3),m=a.substring(g+2,p),r=b.pop();0>p?(m=a.substring(g+2).replace(/[\s<].*/,""),l.error("end tag name: "+m+" is not complete:"+r.tagName),p=g+1+m.length):m.match(/\s</)&&(m=m.replace(/[\s<].*/,
""),l.error("end tag name: "+m+" maybe not complete"),p=g+1+m.length);var t=r.localNSMap,v=r.tagName==m;if(v||r.tagName&&r.tagName.toLowerCase()==m.toLowerCase()){k.endElement(r.uri,r.localName,m);if(t)for(var w in t)k.endPrefixMapping(w);v||l.fatalError("end tag name: "+m+" is not match the current start tagName:"+r.tagName)}else b.push(r);p++;break;case "?":x&&B(g);p=Ki(a,g,k);break;case "!":x&&B(g);p=Li(a,g,k,l);break;default:x&&B(g);var A=new sf,T=b[b.length-1].currentNSMap;p=Mi(a,g,A,T,u,l);
var E=A.length;!A.closed&&Ni(a,p,A.tagName,f)&&(A.closed=!0,c.nbsp||l.warning("unclosed xml attribute"));if(x&&E){for(var M=tf(x,{}),H=0;H<E;H++){var G=A[H];B(G.offset);G.locator=tf(x,{})}k.locator=M;uf(A,k,T)&&b.push(A);k.locator=x}else uf(A,k,T)&&b.push(A);"http://www.w3.org/1999/xhtml"!==A.uri||A.closed?p++:p=Oi(a,p,A.tagName,u,k)}}catch(Ii){l.error("element parse error: "+Ii),p=-1}p>va?va=p:d(Math.max(g,va)+1)}}function tf(a,b){b.lineNumber=a.lineNumber;b.columnNumber=a.columnNumber;return b}
function Mi(a,b,c,k,l,d){for(var u,z,q=++b,B=0;;){var n=a.charAt(q);switch(n){case "\x3d":if(1===B)u=a.slice(b,q),B=3;else if(2===B)B=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===B||1===B)if(1===B&&(d.warning('attribute value must after "\x3d"'),u=a.slice(b,q)),b=q+1,q=a.indexOf(n,b),0<q)z=a.slice(b,q).replace(/&#?\w+;/g,l),c.add(u,z,b-1),B=5;else throw Error("attribute value no end '"+n+"' match");else if(4==B)z=a.slice(b,q).replace(/&#?\w+;/g,l),c.add(u,
z,b),d.warning('attribute "'+u+'" missed start quot('+n+")!!"),b=q+1,B=5;else throw Error('attribute value must after "\x3d"');break;case "/":switch(B){case 0:c.setTagName(a.slice(b,q));case 5:case 6:case 7:B=7,c.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return d.error("unexpected end of input"),0==B&&c.setTagName(a.slice(b,q)),q;case "\x3e":switch(B){case 0:c.setTagName(a.slice(b,q));case 5:case 6:case 7:break;case 4:case 1:z=a.slice(b,
q),"/"===z.slice(-1)&&(c.closed=!0,z=z.slice(0,-1));case 2:2===B&&(z=u);4==B?(d.warning('attribute "'+z+'" missed quot(")!!'),c.add(u,z.replace(/&#?\w+;/g,l),b)):("http://www.w3.org/1999/xhtml"===k[""]&&z.match(/^(?:disabled|checked|selected)$/i)||d.warning('attribute "'+z+'" missed value!! "'+z+'" instead!!'),c.add(z,z,b));break;case 3:throw Error("attribute value missed!!");}return q;case "\u0080":n=" ";default:if(" ">=n)switch(B){case 0:c.setTagName(a.slice(b,q));B=6;break;case 1:u=a.slice(b,q);
B=2;break;case 4:z=a.slice(b,q).replace(/&#?\w+;/g,l),d.warning('attribute "'+z+'" missed quot(")!!'),c.add(u,z,b);case 5:B=6}else switch(B){case 2:"http://www.w3.org/1999/xhtml"===k[""]&&u.match(/^(?:disabled|checked|selected)$/i)||d.warning('attribute "'+u+'" missed value!! "'+u+'" instead2!!');c.add(u,u,b);b=q;B=1;break;case 5:d.warning('attribute space is required"'+u+'"!!');case 6:B=1;b=q;break;case 3:B=4;b=q;break;case 7:throw Error("elements closed character '/' and '\x3e' must be connected to");
}}q++}}function uf(a,b,c){for(var k=a.tagName,l=null,u=a.length;u--;){var d=a[u],B=d.qName,q=d.value,y=B.indexOf(":");if(0<y){var n=d.prefix=B.slice(0,y);y=B.slice(y+1);n="xmlns"===n&&y}else y=B,n="xmlns"===B&&"";d.localName=y;if(!1!==n){if(null==l){l={};y=void 0;B=c;var x=c={};for(y in B)x[y]=B[y]}c[n]=l[n]=q;d.uri="http://www.w3.org/2000/xmlns/";b.startPrefixMapping(n,q)}}for(u=a.length;u--;)if(d=a[u],n=d.prefix)"xml"===n&&(d.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==n&&(d.uri=c[n||
""]);y=k.indexOf(":");0<y?(n=a.prefix=k.slice(0,y),y=a.localName=k.slice(y+1)):(n=null,y=a.localName=k);u=a.uri=c[n||""];b.startElement(u,y,k,a);if(a.closed){if(b.endElement(u,y,k),l)for(n in l)b.endPrefixMapping(n)}else return a.currentNSMap=c,a.localNSMap=l,!0}function Oi(a,b,c,k,l){if(/^(?:script|textarea)$/i.test(c)){var u=a.indexOf("\x3c/"+c+"\x3e",b);a=a.substring(b+1,u);if(/[&<]/.test(a)){if(/^script$/i.test(c))return l.characters(a,0,a.length),u;a=a.replace(/&#?\w+;/g,k);l.characters(a,0,
a.length);return u}}return b+1}function Ni(a,b,c,k){var l=k[c];null==l&&(l=a.lastIndexOf("\x3c/"+c+"\x3e"),l<b&&(l=a.lastIndexOf("\x3c/"+c)),k[c]=l);return l<b}function Li(a,b,c,k){switch(a.charAt(b+2)){case "-":if("-"===a.charAt(b+3)){var l=a.indexOf("--\x3e",b+4);if(l>b)return c.comment(a,b+4,l-b-4),l+3;k.error("Unclosed comment")}break;default:if("CDATA["==a.substr(b+3,6))return l=a.indexOf("]]\x3e",b+9),c.startCDATA(),c.characters(a,b+9,l-b-9),c.endCDATA(),l+3;a:{k=[];l=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
l.lastIndex=b;for(l.exec(a);b=l.exec(a);)if(k.push(b),b[1]){l=k;break a}l=void 0}var u=l.length;if(1<u&&/!doctype/i.test(l[0][0]))return a=l[1][0],b=3<u&&/^public$/i.test(l[2][0])&&l[3][0],k=4<u&&l[4][0],l=l[u-1],c.startDTD(a,b&&b.replace(/^(['"])(.*?)\1$/,"$2"),k&&k.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),l.index+l[0].length}return-1}function Ki(a,b,c){var k=a.indexOf("?\x3e",b);return k&&(a=a.substring(b,k).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(c.processingInstruction(a[1],a[2]),k+2):-1}function sf(a){}
function Qc(a,b){a.__proto__=b;return a}function nc(a,b){for(var c in a)b[c]=a[c]}function Ka(a,b){var c=a.prototype;if(Object.create){var k=Object.create(b.prototype);c.__proto__=k}c instanceof b||(k=function(){},k.prototype=b.prototype,k=new k,nc(c,k),a.prototype=c=k);c.constructor!=a&&("function"!=typeof a&&console.error("unknow Class:"+a),c.constructor=a)}function Sb(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,ra[a]),this.message=ra[a],Error.captureStackTrace&&Error.captureStackTrace(this,
Sb);c.code=a;b&&(this.message=this.message+": "+b);return c}function wb(){}function oc(a,b){this._node=a;this._refresh=b;Id(this)}function Id(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);vf(a,"length",c.length);nc(c,a);a._inc=b}}function Rc(){}function wf(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function xf(a,b,c,k){k?b[wf(b,k)]=c:b[b.length++]=c;a&&(c.ownerElement=a,b=a.ownerDocument)&&(k&&yf(b,a,k),b&&b._inc++,"http://www.w3.org/2000/xmlns/"==
c.namespaceURI&&(a._nsMap[c.prefix?c.localName:""]=c.value))}function zf(a,b,c){var k=wf(b,c);if(0<=k){for(var l=b.length-1;k<l;)b[k]=b[++k];b.length=l;a&&(b=a.ownerDocument)&&(yf(b,a,c),c.ownerElement=null)}else throw Sb(Pi,Error(a.tagName+"@"+c));}function Af(a){this._features={};if(a)for(var b in a)this._features=a[b]}function Da(){}function Bf(a){return"\x3c"==a&&"\x26lt;"||"\x3e"==a&&"\x26gt;"||"\x26"==a&&"\x26amp;"||'"'==a&&"\x26quot;"||"\x26#"+a.charCodeAt()+";"}function Sc(a,b){if(b(a))return!0;
if(a=a.firstChild){do if(Sc(a,b))return!0;while(a=a.nextSibling)}}function pc(){}function yf(a,b,c,k){a&&a._inc++;"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete b._nsMap[c.prefix?c.localName:""]}function Jd(a,b,c){if(a&&a._inc)if(a._inc++,a=b.childNodes,c)a[a.length++]=c;else{b=b.firstChild;for(c=0;b;)a[c++]=b,b=b.nextSibling;a.length=c}}function Cf(a,b){var c=b.previousSibling,k=b.nextSibling;c?c.nextSibling=k:a.firstChild=k;k?k.previousSibling=c:a.lastChild=c;Jd(a.ownerDocument,a);return b}
function Df(a,b,c){var k=b.parentNode;k&&k.removeChild(b);if(b.nodeType===kb){k=b.firstChild;if(null==k)return b;var l=b.lastChild}else k=l=b;var u=c?c.previousSibling:a.lastChild;k.previousSibling=u;l.nextSibling=c;u?u.nextSibling=k:a.firstChild=k;null==c?a.lastChild=l:c.previousSibling=l;do k.parentNode=a;while(k!==l&&(k=k.nextSibling));Jd(a.ownerDocument||a,a);b.nodeType==kb&&(b.firstChild=b.lastChild=null);return b}function Tb(){this._nsMap={}}function Tc(){}function qc(){}function Kd(){}function Ld(){}
function Md(){}function Nd(){}function Ef(){}function Ff(){}function Od(){}function Uc(){}function Pd(){}function Gf(){}function Hf(a,b){var c=[],k=9==this.nodeType?this.documentElement:this,l=k.prefix,d=k.namespaceURI;if(d&&null==l&&(l=k.lookupPrefix(d),null==l))var B=[{namespace:d,prefix:null}];Ub(this,c,a,b,B);return c.join("")}function If(a,b,c){b=a.prefix||"";a=a.namespaceURI;if(!b&&!a||"xml"===b&&"http://www.w3.org/XML/1998/namespace"===a||"http://www.w3.org/2000/xmlns/"==a)return!1;for(var k=
c.length;k--;){var l=c[k];if(l.prefix==b)return l.namespace!=a}return!0}function Ub(a,b,c,k,l){if(k)if(a=k(a)){if("string"==typeof a){b.push(a);return}}else return;switch(a.nodeType){case cb:l||(l=[]);var u=a.attributes,d=u.length,B=a.firstChild,q=a.tagName;c="http://www.w3.org/1999/xhtml"===a.namespaceURI||c;b.push("\x3c",q);for(var y=0;y<d;y++){var n=u.item(y);"xmlns"==n.prefix?l.push({prefix:n.localName,namespace:n.value}):"xmlns"==n.nodeName&&l.push({prefix:"",namespace:n.value})}for(y=0;y<d;y++){n=
u.item(y);if(If(n,c,l)){var x=n.prefix||"",f=n.namespaceURI;b.push(x?" xmlns:"+x:" xmlns",'\x3d"',f,'"');l.push({prefix:x,namespace:f})}Ub(n,b,c,k,l)}If(a,c,l)&&(x=a.prefix||"",f=a.namespaceURI,b.push(x?" xmlns:"+x:" xmlns",'\x3d"',f,'"'),l.push({prefix:x,namespace:f}));if(B||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(q)){b.push("\x3e");if(c&&/^script$/i.test(q))for(;B;)B.data?b.push(B.data):Ub(B,b,c,k,l),B=B.nextSibling;else for(;B;)Ub(B,b,c,k,l),B=B.nextSibling;b.push("\x3c/",q,"\x3e")}else b.push("/\x3e");
break;case Jf:case kb:for(B=a.firstChild;B;)Ub(B,b,c,k,l),B=B.nextSibling;break;case Vb:return b.push(" ",a.name,'\x3d"',a.value.replace(/[<&"]/g,Bf),'"');case Vc:return b.push(a.data.replace(/[<&]/g,Bf));case Kf:return b.push("\x3c![CDATA[",a.data,"]]\x3e");case Lf:return b.push("\x3c!--",a.data,"--\x3e");case Mf:c=a.publicId;k=a.systemId;b.push("\x3c!DOCTYPE ",a.name);c?(b.push(' PUBLIC "',c),k&&"."!=k&&b.push('" "',k),b.push('"\x3e')):k&&"."!=k?b.push(' SYSTEM "',k,'"\x3e'):((a=a.internalSubset)&&
b.push(" [",a,"]"),b.push("\x3e"));break;case Nf:return b.push("\x3c?",a.target," ",a.data,"?\x3e");case Of:return b.push("\x26",a.nodeName,";");default:b.push("??",a.nodeName)}}function Pf(a,b,c){switch(b.nodeType){case cb:var k=b.cloneNode(!1);k.ownerDocument=a;case kb:break;case Vb:c=!0}k||(k=b.cloneNode(!1));k.ownerDocument=a;k.parentNode=null;if(c)for(b=b.firstChild;b;)k.appendChild(Pf(a,b,c)),b=b.nextSibling;return k}function Qd(a,b,c){var k=new b.constructor;for(u in b){var l=b[u];"object"!=
typeof l&&l!=k[u]&&(k[u]=l)}b.childNodes&&(k.childNodes=new wb);k.ownerDocument=a;switch(k.nodeType){case cb:var u=b.attributes;var d=k.attributes=new Rc;l=u.length;d._ownerElement=k;for(d=0;d<l;d++)k.setAttributeNode(Qd(a,u.item(d),!0));break;case Vb:c=!0}if(c)for(b=b.firstChild;b;)k.appendChild(Qd(a,b,c)),b=b.nextSibling;return k}function vf(a,b,c){a[b]=c}function Qf(a,b){return function(c){var k=this;if(b){if(Wb&&!c)return c=b.toString().replace(/^function.+?{/,"").slice(0,-1),c=Rf(c),this[Rd]=
new Wb(c),Qi(this[Rd],c),this[Rd];var l={postMessage:function(a){k.onmessage&&setTimeout(function(){k.onmessage({data:a,target:l})})}};b.call(l);this.postMessage=function(a){setTimeout(function(){l.onmessage({data:a,target:k})})};this.isThisThread=!0}else return new Wb(a)}}function Rf(a){try{return Xb.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(u){var b=new Ri;b.append(a);return Xb.createObjectURL(b.getBlob(type))}}function Qi(a,b){if(a&&b){var c=a.terminate;a.objURL=b;a.terminate=
function(){a.objURL&&Xb.revokeObjectURL(a.objURL);c.call(a)}}}function Yb(){}a=a&&a.hasOwnProperty("default")?a["default"]:a;b=b&&b.hasOwnProperty("default")?b["default"]:b;var Ca=[],qi=function(b,c){return function(u,k,l){k=c.levels[k];var d=new RegExp("^("+k+")$");"log"!==u&&l.unshift(u.toUpperCase()+":");l.unshift(b+":");if(Ca){Ca.push([].concat(l));var B=Ca.length-1E3;Ca.splice(0,0<B?B:0)}if(a.console&&((B=a.console[u])||"debug"!==u||(B=a.console.info||a.console.log),B&&k&&d.test(u)))B[Array.isArray(l)?
"apply":"call"](a.console,l)}},ca=c("VIDEOJS"),Sf=ca.createLogger,Mc=d(function(a){function b(){a.exports=b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],u;for(u in c)Object.prototype.hasOwnProperty.call(c,u)&&(a[u]=c[u])}return a};return b.apply(this,arguments)}a.exports=b}),ri=Object.prototype.toString,ff=function(a){return h(a)?Object.keys(a):[]},vb=X("querySelector"),Tf=X("querySelectorAll"),Uf=Object.freeze({isReal:v,isEl:A,isInFrame:G,createEl:I,textContent:O,
prependTo:H,hasClass:ha,addClass:L,removeClass:E,toggleClass:Y,setAttributes:oa,getAttributes:aa,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},blockTextSelection:J,unblockTextSelection:ka,getBoundingClientRect:W,findPosition:P,getPointerPosition:da,isTextNode:T,emptyEl:Aa,normalizeContent:Za,appendContent:rb,insertContent:M,isSingleLeftClick:ab,$:vb,$$:Tf}),gf=!1,zd,si=function(){if(v()&&!1!==
zd.options.autoSetup){var a=Array.prototype.slice.call(b.getElementsByTagName("video")),c=Array.prototype.slice.call(b.getElementsByTagName("audio")),u=Array.prototype.slice.call(b.getElementsByTagName("video-js"));if((a=a.concat(c,u))&&0<a.length)for(c=0,u=a.length;c<u;c++){var k=a[c];if(k&&k.getAttribute)void 0===k.player&&null!==k.getAttribute("data-setup")&&zd(k);else{fb(1);break}}else gf||fb(1)}};v()&&("complete"===b.readyState?gb():a.addEventListener("load",gb));var Vf=function(a){var c=b.createElement("style");
c.className=a;return c},Wf=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},ub=3,Xf;a.WeakMap||(Xf=function(){function b(){this.vdata="vdata"+Math.floor(a.performance&&a.performance.now()||Date.now());this.data={}}var c=b.prototype;c.set=function(a,b){var c=a[this.vdata]||ub++;a[this.vdata]||(a[this.vdata]=c);this.data[c]=b;return this};c.get=function(a){var b=a[this.vdata];if(b)return this.data[b];ca("We have no data for this element",a)};c.has=function(a){return a[this.vdata]in
this.data};c["delete"]=function(a){var b=a[this.vdata];b&&(delete this.data[b],delete a[this.vdata])};return b}());var Ga=a.WeakMap?new WeakMap:new Xf,Wc,ti=function(){if("boolean"!==typeof Wc){Wc=!1;try{var b=Object.defineProperty({},"passive",{get:function(){Wc=!0}});a.addEventListener("test",null,b);a.removeEventListener("test",null,b)}catch(B){}}return Wc},ui=["touchstart","touchmove"],Si=Object.freeze({fixEvent:la,on:ia,off:ba,trigger:Z,one:Ua,any:hb}),V=function(a,b,c){b.guid||(b.guid=ub++);
a=b.bind(a);a.guid=c?c+"_"+b.guid:b.guid;return a},Hb=function(b,c){var u=a.performance.now();return function(){var k=a.performance.now();k-u>=c&&(b.apply(void 0,arguments),u=k)}},Ti=function(b,c,u,k){void 0===k&&(k=a);var l,d=function(){var a=this,d=arguments,z=function(){z=l=null;u||b.apply(a,d)};!l&&u&&b.apply(a,d);k.clearTimeout(l);l=k.setTimeout(z,c)};d.cancel=function(){k.clearTimeout(l);l=null};return d},wa=function(){};wa.prototype.allowedEvents_={};wa.prototype.on=function(a,b){var c=this.addEventListener;
this.addEventListener=function(){};ia(this,a,b);this.addEventListener=c};wa.prototype.addEventListener=wa.prototype.on;wa.prototype.off=function(a,b){ba(this,a,b)};wa.prototype.removeEventListener=wa.prototype.off;wa.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};Ua(this,a,b);this.addEventListener=c};wa.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};hb(this,a,b);this.addEventListener=c};wa.prototype.trigger=function(a){var b=
a.type||a;"string"===typeof a&&(a={type:b});a=la(a);if(this.allowedEvents_[b]&&this["on"+b])this["on"+b](a);Z(this,a)};wa.prototype.dispatchEvent=wa.prototype.trigger;var rc;wa.prototype.queueTrigger=function(b){var c=this;rc||(rc=new Map);var u=b.type||b,k=rc.get(this);k||(k=new Map,rc.set(this,k));var l=k.get(u);k["delete"](u);a.clearTimeout(l);l=a.setTimeout(function(){0===k.size&&(k=null,rc["delete"](c));c.trigger(b)},0);k.set(u,l)};var Eb=function(a){return a instanceof wa||!!a.eventBusEl_&&
["on","one","off","trigger"].every(function(b){return"function"===typeof a[b]})},Ui=function(a,b){Eb(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},Yf=function(a){return"string"===typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},Sd=function(a){if(!a.nodeName&&!Eb(a))throw Error("Invalid target; must be a DOM node or evented object.");},Zf=function(a){if(!Yf(a))throw Error("Invalid event type; must be a non-empty string or array.");},$f=function(a){if("function"!==
typeof a)throw Error("Invalid listener; must be a function.");},Td=function(a,b){var c=3>b.length||b[0]===a||b[0]===a.eventBusEl_;if(c){var k=a.eventBusEl_;3<=b.length&&b.shift();var l=b[0];b=b[1]}else k=b[0],l=b[1],b=b[2];Sd(k);Zf(l);$f(b);b=V(a,b);return{isTargetingSelf:c,target:k,type:l,listener:b}},Ib=function(a,b,c,k){Sd(a);if(a.nodeName)Si[b](a,c,k);else a[b](c,k)},vi={on:function(){for(var a=this,b=arguments.length,c=Array(b),k=0;k<b;k++)c[k]=arguments[k];b=Td(this,c);c=b.isTargetingSelf;var l=
b.target,d=b.type,N=b.listener;Ib(l,"on",d,N);if(!c){var qa=function(){return a.off(l,d,N)};qa.guid=N.guid;b=function(){return a.off("dispose",qa)};b.guid=N.guid;Ib(this,"on","dispose",qa);Ib(l,"on","dispose",b)}},one:function(){for(var a=this,b=arguments.length,c=Array(b),k=0;k<b;k++)c[k]=arguments[k];b=Td(this,c);var l=b.target,d=b.type,N=b.listener;b.isTargetingSelf?Ib(l,"one",d,N):(b=function q(){a.off(l,d,q);for(var b=arguments.length,c=Array(b),k=0;k<b;k++)c[k]=arguments[k];N.apply(null,c)},
b.guid=N.guid,Ib(l,"one",d,b))},any:function(){for(var a=this,b=arguments.length,c=Array(b),k=0;k<b;k++)c[k]=arguments[k];b=Td(this,c);var l=b.target,d=b.type,N=b.listener;b.isTargetingSelf?Ib(l,"any",d,N):(b=function q(){a.off(l,d,q);for(var b=arguments.length,c=Array(b),k=0;k<b;k++)c[k]=arguments[k];N.apply(null,c)},b.guid=N.guid,Ib(l,"any",d,b))},off:function(a,b,c){!a||Yf(a)?ba(this.eventBusEl_,a,b):(Sd(a),Zf(b),$f(c),c=V(this,c),this.off("dispose",c),a.nodeName?(ba(a,b,c),ba(a,"dispose",c)):
Eb(a)&&(a.off(b,c),a.off("dispose",c)))},trigger:function(a,b){return Z(this.eventBusEl_,a,b)}},wi={state:{},setState:function(a){var b=this;"function"===typeof a&&(a=a());var c;f(a,function(a,l){b.state[l]!==a&&(c=c||{},c[l]={from:b.state[l],to:a});b.state[l]=a});c&&Eb(this)&&this.trigger({changes:c,type:"statechanged"});return c}},Xc=function(a){return"string"!==typeof a?a:a.replace(/./,function(a){return a.toLowerCase()})},pa=function(a){return"string"!==typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},
Vi=function(a,b){return pa(a)===pa(b)},C=function(){function b(b,c,l){this.player_=!b&&this.play?b=this:b;this.isDisposed_=!1;this.parentComponent_=null;this.options_=S({},this.options_);c=this.options_=S(this.options_,c);this.id_=c.id||c.el&&c.el.id;this.id_||(this.id_=(b&&b.id&&b.id()||"no_player")+"_component_"+ub++);this.name_=c.name||null;c.el?this.el_=c.el:!1!==c.createEl&&(this.el_=this.createEl());!1!==c.evented&&ib(this,{eventBusKey:this.el_?"el_":null});Cb(this,this.constructor.defaultState);
this.children_=[];this.childIndex_={};this.childNameIndex_={};var k;a.Set||(k=function(){function a(){this.set_={}}var b=a.prototype;b.has=function(a){return a in this.set_};b["delete"]=function(a){var b=this.has(a);delete this.set_[a];return b};b.add=function(a){this.set_[a]=1;return this};b.forEach=function(a,b){for(var c in this.set_)a.call(b,c,c,this)};return a}());this.setTimeoutIds_=a.Set?new Set:new k;this.setIntervalIds_=a.Set?new Set:new k;this.rafIds_=a.Set?new Set:new k;this.clearingTimersOnDispose_=
!1;!1!==c.initChildren&&this.initChildren();this.ready(l);!1!==c.reportTouchActivity&&this.enableTouchActivity()}var c=b.prototype;c.dispose=function(){if(!this.isDisposed_){this.trigger({type:"dispose",bubbles:!1});this.isDisposed_=!0;if(this.children_)for(var a=this.children_.length-1;0<=a;a--)this.children_[a].dispose&&this.children_[a].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;if(this.el_){this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);
if(Ga.has(this.el_))Ga["delete"](this.el_);this.el_=null}this.player_=null}};c.isDisposed=function(){return!!this.isDisposed_};c.player=function(){return this.player_};c.options=function(a){return a?this.options_=S(this.options_,a):this.options_};c.el=function(){return this.el_};c.createEl=function(a,b,c){return I(a,b,c)};c.localize=function(a,b,c){void 0===c&&(c=a);var l=this.player_.language&&this.player_.language(),k=this.player_.languages&&this.player_.languages(),d=k&&k[l];l=l&&l.split("-")[0];
k=k&&k[l];d&&d[a]?c=d[a]:k&&k[a]&&(c=k[a]);b&&(c=c.replace(/\{(\d+)\}/g,function(a,c){var l=c=b[c-1];"undefined"===typeof c&&(l=a);return l}));return c};c.contentEl=function(){return this.contentEl_||this.el_};c.id=function(){return this.id_};c.name=function(){return this.name_};c.children=function(){return this.children_};c.getChildById=function(a){return this.childIndex_[a]};c.getChild=function(a){if(a)return this.childNameIndex_[a]};c.addChild=function(a,c,l){void 0===c&&(c={});void 0===l&&(l=
this.children_.length);if("string"===typeof a){var k=pa(a);a=c.componentClass||k;c.name=k;var d=b.getComponent(a);if(!d)throw Error("Component "+a+" does not exist");if("function"!==typeof d)return null;c=new d(this.player_||this,c)}else c=a;c.parentComponent_&&c.parentComponent_.removeChild(c);this.children_.splice(l,0,c);c.parentComponent_=this;"function"===typeof c.id&&(this.childIndex_[c.id()]=c);if(k=k||c.name&&pa(c.name()))this.childNameIndex_[k]=c,this.childNameIndex_[Xc(k)]=c;"function"===
typeof c.el&&c.el()&&(k=null,this.children_[l+1]&&this.children_[l+1].el_&&(k=this.children_[l+1].el_),this.contentEl().insertBefore(c.el(),k));return c};c.removeChild=function(a){"string"===typeof a&&(a=this.getChild(a));if(a&&this.children_){for(var b=!1,c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0;this.children_.splice(c,1);break}b&&(a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[pa(a.name())]=null,this.childNameIndex_[Xc(a.name())]=null,(b=a.el())&&
b.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el()))}};c.initChildren=function(){var a=this,c=this.options_.children;if(c){var l=this.options_,d=b.getComponent("Tech");var N=Array.isArray(c)?c:Object.keys(c);N.concat(Object.keys(this.options_).filter(function(a){return!N.some(function(b){return"string"===typeof b?a===b:a===b.name})})).map(function(b){if("string"===typeof b){var l=b;b=c[l]||a.options_[l]||{}}else l=b.name;return{name:l,opts:b}}).filter(function(a){return(a=b.getComponent(a.opts.componentClass||
pa(a.name)))&&!d.isTech(a)}).forEach(function(b){var c=b.name;b=b.opts;void 0!==l[c]&&(b=l[c]);!1!==b&&(!0===b&&(b={}),b.playerOptions=a.options_.playerOptions,(b=a.addChild(c,b))&&(a[c]=b))})}};c.buildCSSClass=function(){return""};c.ready=function(a,b){void 0===b&&(b=!1);a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a)))};c.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=
[];a&&0<a.length&&a.forEach(function(a){a.call(this)},this);this.trigger("ready")},1)};c.$=function(a,b){return vb(a,b||this.contentEl())};c.$$=function(a,b){return Tf(a,b||this.contentEl())};c.hasClass=function(a){return ha(this.el_,a)};c.addClass=function(a){L(this.el_,a)};c.removeClass=function(a){E(this.el_,a)};c.toggleClass=function(a,b){Y(this.el_,a,b)};c.show=function(){this.removeClass("vjs-hidden")};c.hide=function(){this.addClass("vjs-hidden")};c.lockShowing=function(){this.addClass("vjs-lock-showing")};
c.unlockShowing=function(){this.removeClass("vjs-lock-showing")};c.getAttribute=function(a){return this.el_.getAttribute(a)};c.setAttribute=function(a,b){this.el_.setAttribute(a,b)};c.removeAttribute=function(a){this.el_.removeAttribute(a)};c.width=function(a,b){return this.dimension("width",a,b)};c.height=function(a,b){return this.dimension("height",a,b)};c.dimensions=function(a,b){this.width(a,!0);this.height(b)};c.dimension=function(a,b,c){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||
-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px";c||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[a];c=b.indexOf("px");return-1!==c?parseInt(b.slice(0,c),10):parseInt(this.el_["offset"+pa(a)],10)}};c.currentDimension=function(a){if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");var b=g(this.el_,a);b=parseFloat(b);if(0===b||isNaN(b))a="offset"+pa(a),b=this.el_[a];return b};c.currentDimensions=
function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};c.currentWidth=function(){return this.currentDimension("width")};c.currentHeight=function(){return this.currentDimension("height")};c.focus=function(){this.el_.focus()};c.blur=function(){this.el_.blur()};c.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))};c.handleKeyPress=function(a){this.handleKeyDown(a)};c.emitTapEvents=function(){var b=0,c=null,l;this.on("touchstart",
function(k){1===k.touches.length&&(c={pageX:k.touches[0].pageX,pageY:k.touches[0].pageY},b=a.performance.now(),l=!0)});this.on("touchmove",function(a){if(1<a.touches.length)l=!1;else if(c){var b=a.touches[0].pageX-c.pageX;a=a.touches[0].pageY-c.pageY;10<Math.sqrt(b*b+a*a)&&(l=!1)}});var d=function(){l=!1};this.on("touchleave",d);this.on("touchcancel",d);this.on("touchend",function(k){c=null;!0===l&&200>a.performance.now()-b&&(k.preventDefault(),this.trigger("tap"))})};c.enableTouchActivity=function(){if(this.player()&&
this.player().reportUserActivity){var a=V(this.player(),this.player().reportUserActivity),b;this.on("touchstart",function(){a();this.clearInterval(b);b=this.setInterval(a,250)});var c=function(c){a();this.clearInterval(b)};this.on("touchmove",a);this.on("touchend",c);this.on("touchcancel",c)}};c.setTimeout=function(b,c){var l=this;b=V(this,b);this.clearTimersOnDispose_();var k=a.setTimeout(function(){if(l.setTimeoutIds_.has(k))l.setTimeoutIds_["delete"](k);b()},c);this.setTimeoutIds_.add(k);return k};
c.clearTimeout=function(b){this.setTimeoutIds_.has(b)&&(this.setTimeoutIds_["delete"](b),a.clearTimeout(b));return b};c.setInterval=function(b,c){b=V(this,b);this.clearTimersOnDispose_();b=a.setInterval(b,c);this.setIntervalIds_.add(b);return b};c.clearInterval=function(b){this.setIntervalIds_.has(b)&&(this.setIntervalIds_["delete"](b),a.clearInterval(b));return b};c.requestAnimationFrame=function(b){var c=this;if(!this.supportsRaf_)return this.setTimeout(b,1E3/60);this.clearTimersOnDispose_();b=
V(this,b);var l=a.requestAnimationFrame(function(){if(c.rafIds_.has(l))c.rafIds_["delete"](l);b()});this.rafIds_.add(l);return l};c.cancelAnimationFrame=function(b){if(!this.supportsRaf_)return this.clearTimeout(b);this.rafIds_.has(b)&&(this.rafIds_["delete"](b),a.cancelAnimationFrame(b));return b};c.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],
["setIntervalIds_","clearInterval"]].forEach(function(b){a[b[0]].forEach(a[b[1]],a)});a.clearingTimersOnDispose_=!1}))};b.registerComponent=function(a,c){if("string"!==typeof a||!a)throw Error('Illegal component name, "'+a+'"; must be a non-empty string.');var l=b.getComponent("Tech");l=l&&l.isTech(c);var k=b===c||b.prototype.isPrototypeOf(c.prototype);if(l||!k)throw Error('Illegal component, "'+a+'"; '+(l?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");a=
pa(a);b.components_||(b.components_={});l=b.getComponent("Player");if("Player"===a&&l&&l.players){var d=l.players;l=Object.keys(d);if(d&&0<l.length&&l.map(function(a){return d[a]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}b.components_[a]=c;return b.components_[Xc(a)]=c};b.getComponent=function(a){if(a&&b.components_)return b.components_[a]};return b}();C.prototype.supportsRaf_="function"===typeof a.requestAnimationFrame&&"function"===typeof a.cancelAnimationFrame;
C.registerComponent("Component",C);var Q=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a};d(function(a){function b(c){"@babel/helpers - typeof";a.exports="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?b=function(a){return typeof a}:b=function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return b(c)}a.exports=b});d(function(a){function b(c){a.exports=b=
Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return b(c)}a.exports=b});var F=function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b},ta=a.navigator&&a.navigator.userAgent||"",ag=/AppleWebKit\/([\d.]+)/i.exec(ta),Wi=ag?parseFloat(ag.pop()):null,bg=/iPod/i.test(ta),Xi=function(){var a=ta.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),xb=/Android/i.test(ta),Ud=function(){var a=ta.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),cg=xb&&5>Ud&&537>Wi,dg=/Firefox/i.test(ta),sc=/Edg/i.test(ta),lb=!sc&&(/Chrome/i.test(ta)||/CriOS/i.test(ta)),eg=function(){var a=ta.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),tc=function(){var a=/MSIE\s(\d+)\.\d/.exec(ta);a=a&&parseFloat(a[1]);!a&&/Trident\/7.0/i.test(ta)&&/rv:11.0/.test(ta)&&(a=11);return a}(),Vd=/Safari/i.test(ta)&&!lb&&!xb&&!sc,
fg=/Windows/i.test(ta),Zb=v()&&("ontouchstart"in a||a.navigator.maxTouchPoints||a.DocumentTouch&&a.document instanceof a.DocumentTouch),Wd=/iPad/i.test(ta)||Vd&&Zb&&!/iPhone/i.test(ta),Xd=/iPhone/i.test(ta)&&!Wd,Pa=Xd||Wd||bg,Yd=(Vd||Pa)&&!lb,Yi=Object.freeze({IS_IPOD:bg,IOS_VERSION:Xi,IS_ANDROID:xb,ANDROID_VERSION:Ud,IS_NATIVE_ANDROID:cg,IS_FIREFOX:dg,IS_EDGE:sc,IS_CHROME:lb,CHROME_VERSION:eg,IE_VERSION:tc,IS_SAFARI:Vd,IS_WINDOWS:fg,TOUCH_ENABLED:Zb,IS_IPAD:Wd,IS_IPHONE:Xd,IS_IOS:Pa,IS_ANY_SAFARI:Yd}),
Zd={prefixed:!0},Yc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],
gg=Yc[0],Zc=0;for(;Zc<Yc.length;Zc++)if(Yc[Zc][1]in b){var $c=Yc[Zc];break}if($c){for(var ad=0;ad<$c.length;ad++)Zd[gg[ad]]=$c[ad];Zd.prefixed=$c[0]!==gg[0]}ja.prototype.code=0;ja.prototype.message="";ja.prototype.status=null;ja.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");ja.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var $b=0;$b<ja.errorTypes.length;$b++)ja[ja.errorTypes[$b]]=$b,ja.prototype[ja.errorTypes[$b]]=$b;var $d=function(a){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(b,c,k){a[c]&&(b[c]=a[c]);return b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,
endTime:a.endTime,text:a.text,id:a.id}})})},hg={textTracksToJson:function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track});return Array.prototype.map.call(b,function(a){var b=$d(a.track);a.src&&(b.src=a.src);return b}).concat(Array.prototype.filter.call(a.textTracks(),function(a){return-1===c.indexOf(a)}).map($d))},jsonToTextTracks:function(a,b){a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})});
return b.textTracks()},trackToJson_:$d},U=d(function(a,b){function c(a){if(a&&"object"===typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"===typeof a)return d[a];a=String(a);if((b=k[a.toLowerCase()])||(b=l[a.toLowerCase()]))return b;if(1===a.length)return a.charCodeAt(0)}c.isEventKey=function(a,b){if(a&&"object"===typeof a){a=a.which||a.keyCode||a.charCode;if(null===a||void 0===a)return!1;if("string"===typeof b){var c=k[b.toLowerCase()];if(c||(c=l[b.toLowerCase()]))return c===a}else if("number"===
typeof b)return b===a;return!1}};b=a.exports=c;var k=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"\x3d":187,",":188,"-":189,".":190,
"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},l=b.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;123>a;a++)k[String.fromCharCode(a)]=a-32;for(a=48;58>a;a++)k[a-48]=a;for(a=1;13>a;a++)k["f"+a]=a+111;for(a=0;10>a;a++)k["numpad "+a]=a+96;var d=b.names=b.title={};for(a in k)d[k[a]]=a;for(var N in l)k[N]=l[N]}),ac=function(c){function d(a,
b){a=c.call(this,a,b)||this;a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1;a.closeable(!a.options_.uncloseable);a.content(a.options_.content);a.contentEl_=I("div",{className:"vjs-modal-dialog-content"},{role:"document"});a.descEl_=I("p",{className:"vjs-modal-dialog-description vjs-control-text",id:a.el().getAttribute("aria-describedby")});O(a.descEl_,a.description());a.el_.appendChild(a.descEl_);a.el_.appendChild(a.contentEl_);return a}F(d,c);var u=d.prototype;u.createEl=function(){return c.prototype.createEl.call(this,
"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};u.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;c.prototype.dispose.call(this)};u.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+c.prototype.buildCSSClass.call(this)};u.label=function(){return this.localize(this.options_.label||"Modal Window")};u.description=function(){var a=this.options_.description||
this.localize("This is a modal window.");this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return a};u.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!a.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause();this.on("keydown",this.handleKeyDown);this.hadControls_=
a.controls();a.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};u.opened=function(a){if("boolean"===typeof a)this[a?"open":"close"]();return this.opened_};u.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&a.play();this.off("keydown",this.handleKeyDown);this.hadControls_&&a.controls(!0);this.hide();this.el().setAttribute("aria-hidden",
"true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};u.closeable=function(a){if("boolean"===typeof a){a=this.closeable_=!!a;var b=this.getChild("closeButton");if(a&&!b){var c=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=c;this.on(b,"close",this.close)}!a&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_};u.fill=function(){this.fillWith(this.content())};
u.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,k=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;c.removeChild(b);this.empty();M(b,a);this.trigger("modalfill");k?c.insertBefore(b,k):c.appendChild(b);(a=this.getChild("closeButton"))&&c.appendChild(a.el_)};u.empty=function(){this.trigger("beforemodalempty");Aa(this.contentEl());this.trigger("modalempty")};u.content=function(a){"undefined"!==typeof a&&(this.content_=a);return this.content_};u.conditionalFocus_=function(){var a=
b.activeElement,c=this.player_.el_;this.previouslyActiveEl_=null;if(c.contains(a)||c===a)this.previouslyActiveEl_=a,this.focus()};u.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};u.handleKeyDown=function(a){a.stopPropagation();if(U.isEventKey(a,"Escape")&&this.closeable())a.preventDefault(),this.close();else if(U.isEventKey(a,"Tab")){for(var c=this.focusableEls_(),k=this.el_.querySelector(":focus"),d,u=0;u<c.length;u++)if(k===
c[u]){d=u;break}b.activeElement===this.el_&&(d=0);a.shiftKey&&0===d?(c[c.length-1].focus(),a.preventDefault()):a.shiftKey||d!==c.length-1||(c[0].focus(),a.preventDefault())}};u.focusableEls_=function(){var b=this.el_.querySelectorAll("*");return Array.prototype.filter.call(b,function(b){return(b instanceof a.HTMLAnchorElement||b instanceof a.HTMLAreaElement)&&b.hasAttribute("href")||(b instanceof a.HTMLInputElement||b instanceof a.HTMLSelectElement||b instanceof a.HTMLTextAreaElement||b instanceof
a.HTMLButtonElement)&&!b.hasAttribute("disabled")||b instanceof a.HTMLIFrameElement||b instanceof a.HTMLObjectElement||b instanceof a.HTMLEmbedElement||b.hasAttribute("tabindex")&&-1!==b.getAttribute("tabindex")||b.hasAttribute("contenteditable")})};return d}(C);ac.prototype.options_={pauseOnOpen:!0,temporary:!0};C.registerComponent("ModalDialog",ac);var bc=function(a){function b(b){void 0===b&&(b=[]);var c=a.call(this)||this;c.tracks_=[];Object.defineProperty(Q(c),"length",{get:function(){return this.tracks_.length}});
for(var k=0;k<b.length;k++)c.addTrack(b[k]);return c}F(b,a);var c=b.prototype;c.addTrack=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}});-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this}))};c.removeTrack=function(a){for(var b,c=0,k=this.length;c<k;c++)if(this[c]===a){b=this[c];b.off&&b.off();this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})};
c.getTrackById=function(a){for(var b=null,c=0,k=this.length;c<k;c++){var d=this[c];if(d.id===a){b=d;break}}return b};return b}(wa);bc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Zi in bc.prototype.allowedEvents_)bc.prototype["on"+Zi]=null;var ae=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},$i=function(a){function b(b){void 0===b&&(b=[]);for(var c=b.length-1;0<=c;c--)if(b[c].enabled){ae(b,
b[c]);break}b=a.call(this,b)||this;b.changing_=!1;return b}F(b,a);var c=b.prototype;c.addTrack=function(b){var c=this;b.enabled&&ae(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,ae(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))};c.removeTrack=function(b){a.prototype.removeTrack.call(this,b);b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),
b.enabledChange_=null)};return b}(bc),be=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},aj=function(a){function b(b){void 0===b&&(b=[]);for(var c=b.length-1;0<=c;c--)if(b[c].selected){be(b,b[c]);break}b=a.call(this,b)||this;b.changing_=!1;Object.defineProperty(Q(b),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}});return b}F(b,a);var c=b.prototype;c.addTrack=function(b){var c=
this;b.selected&&be(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,be(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))};c.removeTrack=function(b){a.prototype.removeTrack.call(this,b);b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)};return b}(bc),ig=function(a){function b(){return a.apply(this,arguments)||
this}F(b,a);var c=b.prototype;c.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b);this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")});b.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)};c.removeTrack=function(b){a.prototype.removeTrack.call(this,
b);b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return b}(bc),bj=function(){function a(a){void 0===a&&(a=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;b.addTrackElement_=function(a){var b=this.trackElements_.length;
""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)};b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b};b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&
this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();this.trackElements_.splice(b,1);break}};return a}(),jg=function(){function a(b){a.prototype.setCues_.call(this,b);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a;this.length_=a.length;a=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};
if(b<d)for(c=b;c<d;c++)a.call(this,c)};b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var u=this[c];if(u.id===a){b=u;break}}return b};return a}(),cj={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},dj={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ej={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",
chapters:"chapters",metadata:"metadata"},kg={disabled:"disabled",hidden:"hidden",showing:"showing"},ce=function(a){function b(b){void 0===b&&(b={});var c=a.call(this)||this;var l={id:b.id||"vjs_track_"+ub++,kind:b.kind||"",label:b.label||"",language:b.language||""};b=function(a){Object.defineProperty(Q(c),a,{get:function(){return l[a]},set:function(){}})};for(var d in l)b(d);return c}F(b,a);return b}(wa),de=function(c){var d="protocol hostname port pathname search hash host".split(" "),u=b.createElement("a");
u.href=c;var k=""===u.host&&"file:"!==u.protocol;if(k){var l=b.createElement("div");l.innerHTML='\x3ca href\x3d"'+c+'"\x3e\x3c/a\x3e';u=l.firstChild;l.setAttribute("style","display:none; position:absolute;");b.body.appendChild(l)}c={};for(var z=0;z<d.length;z++)c[d[z]]=u[d[z]];"http:"===c.protocol&&(c.host=c.host.replace(/:80$/,""));"https:"===c.protocol&&(c.host=c.host.replace(/:443$/,""));c.protocol||(c.protocol=a.location.protocol);k&&b.body.removeChild(l);return c},lg=function(a){if(!a.match(/^https?:\/\//)){var c=
b.createElement("div");c.innerHTML='\x3ca href\x3d"'+a+'"\x3ex\x3c/a\x3e';a=c.firstChild.href}return a},ee=function(a){return"string"===typeof a&&(a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(a))?a.pop().toLowerCase():""},bd=function(b,c){void 0===c&&(c=a.location);b=de(b);return(":"===b.protocol?c.protocol:b.protocol)+b.host!==c.protocol+c.host},fj=Object.freeze({parseUrl:de,getAbsoluteURL:lg,getFileExtension:ee,isCrossOrigin:bd}),xi=Object.prototype.toString,Ai=
function(a){var b={};if(!a)return b;a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),l=a.slice(0,c).trim().toLowerCase();a=a.slice(c+1).trim();"undefined"===typeof b[l]?b[l]=a:Array.isArray(b[l])?b[l].push(a):b[l]=[b[l],a]});return b};Oa.XMLHttpRequest=a.XMLHttpRequest||Db;Oa.XDomainRequest="withCredentials"in new Oa.XMLHttpRequest?Oa.XMLHttpRequest:a.XDomainRequest;(function(a,b){for(var c=0;c<a.length;c++)b(a[c])})("get put post patch head delete".split(" "),function(a){Oa["delete"===
a?"del":a]=function(b,c,d){c=Kc(b,c,d);c.method=a.toUpperCase();return Lc(c)}});Oa["default"]=Oa;var mg=function(b,c){var d=new a.WebVTT.Parser(a,a.vttjs,a.WebVTT.StringDecoder()),k=[];d.oncue=function(a){c.addCue(a)};d.onparsingerror=function(a){k.push(a)};d.onflush=function(){c.trigger({type:"loadeddata",target:c})};d.parse(b);0<k.length&&(a.console&&a.console.groupCollapsed&&a.console.groupCollapsed("Text Track parsing errors for "+c.src),k.forEach(function(a){return ca.error(a)}),a.console&&a.console.groupEnd&&
a.console.groupEnd());d.flush()},ng=function(b,c){var d={uri:b};if(b=bd(b))d.cors=b;Oa(d,V(this,function(b,l,d){if(b)return ca.error(b,l);c.loaded_=!0;"function"!==typeof a.WebVTT?c.tech_&&c.tech_.any(["vttjsloaded","vttjserror"],function(a){if("vttjserror"===a.type)ca.error("vttjs failed to load, stopping trying to process "+c.src);else return mg(d,c)}):mg(d,c)}))},uc=function(b){function c(a){void 0===a&&(a={});if(!a.tech)throw Error("A tech was not provided.");a=S(a,{kind:ej[a.kind]||"subtitles",
language:a.language||a.srclang||""});var c=kg[a.mode]||"disabled",d=a["default"];if("metadata"===a.kind||"chapters"===a.kind)c="hidden";var k=b.call(this,a)||this;k.tech_=a.tech;k.cues_=[];k.activeCues_=[];k.preload_=!1!==k.tech_.preloadTextTracks;var u=new jg(k.cues_),q=new jg(k.activeCues_),f=!1,n=V(Q(k),function(){this.activeCues=this.activeCues;f&&(this.trigger("cuechange"),f=!1)});"disabled"!==c&&k.tech_.ready(function(){k.tech_.on("timeupdate",n)},!0);Object.defineProperties(Q(k),{"default":{get:function(){return d},
set:function(){}},mode:{get:function(){return c},set:function(a){var b=this;kg[a]&&(c=a,this.preload_||"disabled"===c||0!==this.cues.length||ng(this.src,this),"disabled"!==c?this.tech_.ready(function(){b.tech_.on("timeupdate",n)},!0):this.tech_.off("timeupdate",n),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return q;for(var a=this.tech_.currentTime(),b=[],c=0,l=this.cues.length;c<
l;c++){var d=this.cues[c];d.startTime<=a&&d.endTime>=a?b.push(d):d.startTime===d.endTime&&d.startTime<=a&&d.startTime+.5>=a&&b.push(d)}f=!1;if(b.length!==this.activeCues_.length)f=!0;else for(a=0;a<b.length;a++)-1===this.activeCues_.indexOf(b[a])&&(f=!0);this.activeCues_=b;q.setCues_(this.activeCues_);return q},set:function(){}}});a.src?(k.src=a.src,k.preload_||(k.loaded_=!0),(k.preload_||d||"subtitles"!==a.kind&&"captions"!==a.kind)&&ng(k.src,Q(k))):k.loaded_=!0;return k}F(c,b);var d=c.prototype;
d.addCue=function(b){var c=b;if(a.vttjs&&!(b instanceof a.vttjs.VTTCue)){c=new a.vttjs.VTTCue(b.startTime,b.endTime,b.text);for(var d in b)d in c||(c[d]=b[d]);c.id=b.id;c.originalCue_=b}b=this.tech_.textTracks();for(d=0;d<b.length;d++)b[d]!==this&&b[d].removeCue(c);this.cues_.push(c);this.cues.setCues_(this.cues_)};d.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}};
return c}(ce);uc.prototype.allowedEvents_={cuechange:"cuechange"};var og=function(a){function b(b){void 0===b&&(b={});var c=S(b,{kind:dj[b.kind]||""});b=a.call(this,c)||this;var l=!1;Object.defineProperty(Q(b),"enabled",{get:function(){return l},set:function(a){"boolean"===typeof a&&a!==l&&(l=a,this.trigger("enabledchange"))}});c.enabled&&(b.enabled=c.enabled);b.loaded_=!0;return b}F(b,a);return b}(ce),pg=function(a){function b(b){void 0===b&&(b={});var c=S(b,{kind:cj[b.kind]||""});b=a.call(this,
c)||this;var l=!1;Object.defineProperty(Q(b),"selected",{get:function(){return l},set:function(a){"boolean"===typeof a&&a!==l&&(l=a,this.trigger("selectedchange"))}});c.selected&&(b.selected=c.selected);return b}F(b,a);return b}(ce),cc=function(a){function b(b){void 0===b&&(b={});var c=a.call(this)||this;var l=new uc(b);c.kind=l.kind;c.src=l.src;c.srclang=l.language;c.label=l.label;c["default"]=l["default"];Object.defineProperties(Q(c),{readyState:{get:function(){return d}},track:{get:function(){return l}}});
var d=0;l.addEventListener("loadeddata",function(){d=2;c.trigger({type:"load",target:Q(c)})});return c}F(b,a);return b}(wa);cc.prototype.allowedEvents_={load:"load"};cc.NONE=0;cc.LOADING=1;cc.LOADED=2;cc.ERROR=3;var Qa={audio:{ListClass:$i,TrackClass:og,capitalName:"Audio"},video:{ListClass:aj,TrackClass:pg,capitalName:"Video"},text:{ListClass:ig,TrackClass:uc,capitalName:"Text"}};Object.keys(Qa).forEach(function(a){Qa[a].getterName=a+"Tracks";Qa[a].privateName=a+"Tracks_"});var dc={remoteText:{ListClass:ig,
TrackClass:uc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:bj,TrackClass:cc,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ya=Mc({},Qa,dc);dc.names=Object.keys(dc);Qa.names=Object.keys(Qa);ya.names=[].concat(dc.names).concat(Qa.names);var Ad=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");
a.prototype=b;return new a}}();xa.prototype=Ad(Error.prototype);xa.prototype.constructor=xa;xa.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};bb.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},
integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(b=parseFloat(b),0<=b&&100>=b)?(this.set(a,b),!0):!1}};var Bd=b.createElement("textarea"),Bi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},kf={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},
Ci={v:"title",lang:"lang"},jf={rt:"ruby"},lf=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,
64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],
[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,
1114109]];xd.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])};xd.prototype.formatStyle=function(a,b){return 0===a?0:a+b};Ic.prototype=Ad(xd.prototype);Ic.prototype.constructor=Ic;na.prototype.move=function(a,b){b=void 0!==b?b:this.lineHeight;switch(a){case "+x":this.left+=b;this.right+=b;break;case "-x":this.left-=b;this.right-=b;break;case "+y":this.top+=b;this.bottom+=b;break;case "-y":this.top-=b,this.bottom-=b}};na.prototype.overlaps=function(a){return this.left<
a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};na.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1};na.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right};na.prototype.overlapsOppositeAxis=function(a,b){switch(b){case "+x":return this.left<a.left;case "-x":return this.right>a.right;case "+y":return this.top<a.top;case "-y":return this.bottom>a.bottom}};na.prototype.intersectPercentage=
function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top))/(this.height*this.width)};na.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}};na.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:
0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;return{left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c}};Ob.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!==typeof a)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};Ob.convertCueToDOMTree=function(a,b){return a&&b?df(a,b):null};Ob.processCues=
function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=a.document.createElement("div");d.style.position="absolute";d.style.left="0";d.style.right="0";d.style.top="0";d.style.bottom="0";d.style.margin="1.5%";c.appendChild(d);if(function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){var l=[],z=na.getSimpleBoxPosition(d),u={font:Math.round(5*z.height)/100+"px sans-serif"};(function(){for(var c,k,N=0;N<b.length;N++){k=
b[N];c=new Ic(a,k,u);d.appendChild(c.div);var n=void 0,x=void 0,f=c,B=z,g=l,h=new na(f),p=f.cue;if("number"===typeof p.line&&(p.snapToLines||0<=p.line&&100>=p.line))var m=p.line;else if(p.track&&p.track.textTrackList&&p.track.textTrackList.mediaElement){m=p.track;for(var r=m.textTrackList,t=0,v=0;v<r.length&&r[v]!==m;v++)"showing"===r[v].mode&&t++;m=-1*++t}else m=-1;r=[];if(p.snapToLines){switch(p.vertical){case "":r=["+y","-y"];x="height";break;case "rl":r=["+x","-x"];x="width";break;case "lr":r=
["-x","+x"],x="width"}t=h.lineHeight;v=t*Math.round(m);x=B[x]+t;var w=r[0];Math.abs(v)>x&&(v=(0>v?-1:1)*Math.ceil(x/t)*t);0>m&&(v+=""===p.vertical?B.height:B.width,r=r.reverse());h.move(w,v)}else{h=h.lineHeight/B.height*100;switch(p.lineAlign){case "center":m-=h/2;break;case "end":m-=h}switch(p.vertical){case "":f.applyStyles({top:f.formatStyle(m,"%")});break;case "rl":f.applyStyles({left:f.formatStyle(m,"%")});break;case "lr":f.applyStyles({right:f.formatStyle(m,"%")})}r=["+y","-x","+x","-y"];h=
new na(f)}a:{p=h;h=r;x=new na(p);m=1;for(r=0;r<h.length;r++){for(;p.overlapsOppositeAxis(B,h[r])||p.within(B)&&p.overlapsAny(g);)p.move(h[r]);if(p.within(B)){n=p;break a}t=p.intersectPercentage(B);m>t&&(n=new na(p),m=t);p=new na(x)}n=n||x}f.move(n.toCSSCompatValues(B));k.displayState=c.div;l.push(na.getSimpleBoxPosition(c))}})()}else for(c=0;c<b.length;c++)d.appendChild(b[c].displayState)};Ob.Parser=function(a,b,c){c||(c=b,b={});b||(b={});this.window=a;this.vttjs=b;this.state="INITIAL";this.buffer=
"";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};Ob.Parser.prototype={reportOrThrowError:function(a){if(a instanceof xa)this.onparsingerror&&this.onparsingerror(a);else throw a;},parse:function(a){function b(){for(var a=z.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);"\r"===a[b]&&++b;"\n"===a[b]&&++b;z.buffer=a.substr(b);return c}function c(a){var b=new bb;kc(a,function(a,c){switch(a){case "id":b.set(a,c);break;case "width":b.percent(a,c);break;case "lines":b.integer(a,
c);break;case "regionanchor":case "viewportanchor":c=c.split(",");if(2!==c.length)break;var l=new bb;l.percent("x",c[0]);l.percent("y",c[1]);if(!l.has("x")||!l.has("y"))break;b.set(a+"X",l.get("x"));b.set(a+"Y",l.get("y"));break;case "scroll":b.alt(a,c,["up"])}},/=/,/\s/);b.has("id")&&(a=new (z.vttjs.VTTRegion||z.window.VTTRegion),a.width=b.get("width",100),a.lines=b.get("lines",3),a.regionAnchorX=b.get("regionanchorX",0),a.regionAnchorY=b.get("regionanchorY",100),a.viewportAnchorX=b.get("viewportanchorX",
0),a.viewportAnchorY=b.get("viewportanchorY",100),a.scroll=b.get("scroll",""),z.onregion&&z.onregion(a),z.regionList.push({id:b.get("id"),region:a}))}function d(a){var b=new bb;kc(a,function(a,c){switch(a){case "MPEGT":b.integer(a+"S",c);break;case "LOCA":b.set(a+"L",Pb(c))}},/[^\d]:/,/,/);z.ontimestampmap&&z.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function l(a){a.match(/X-TIMESTAMP-MAP/)?kc(a,function(a,b){switch(a){case "X-TIMESTAMP-MAP":d(b)}},/=/):kc(a,function(a,b){switch(a){case "Region":c(b)}},
/:/)}var z=this;a&&(z.buffer+=z.decoder.decode(a,{stream:!0}));try{if("INITIAL"===z.state){if(!/\r\n|\n/.test(z.buffer))return this;var N=b();var f=N.match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new xa(xa.Errors.BadSignature);z.state="HEADER"}for(a=!1;z.buffer;){if(!/\r\n|\n/.test(z.buffer))return this;a?a=!1:N=b();switch(z.state){case "HEADER":/:/.test(N)?l(N):N||(z.state="ID");continue;case "NOTE":N||(z.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(N)){z.state="NOTE";break}if(!N)continue;
z.cue=new (z.vttjs.VTTCue||z.window.VTTCue)(0,0,"");try{z.cue.align="center"}catch(y){z.cue.align="middle"}z.state="CUE";if(-1===N.indexOf("--\x3e")){z.cue.id=N;continue}case "CUE":try{li(N,z.cue,z.regionList)}catch(y){z.reportOrThrowError(y);z.cue=null;z.state="BADCUE";continue}z.state="CUETEXT";continue;case "CUETEXT":var q=-1!==N.indexOf("--\x3e");if(!N||q&&(a=!0)){z.oncue&&z.oncue(z.cue);z.cue=null;z.state="ID";continue}z.cue.text&&(z.cue.text+="\n");z.cue.text+=N.replace(/\u2028/g,"\n").replace(/u2029/g,
"\n");continue;case "BADCUE":N||(z.state="ID")}}}catch(y){z.reportOrThrowError(y);if("CUETEXT"===z.state&&z.cue&&z.oncue)z.oncue(z.cue);z.cue=null;z.state="INITIAL"===z.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new xa(xa.Errors.BadSignature);}catch(Ya){this.reportOrThrowError(Ya)}this.onflush&&this.onflush();return this}};var Ei={"":1,lr:1,rl:1},
Di={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};ef.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var gj={"":!0,up:!0},hj=function(){var a=100,b=3,c=0,d=100,l=0,z=100,N="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!lc(b))throw Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!==typeof a)throw new TypeError("Lines must be set to a number.");
b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!lc(a))throw Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!lc(a))throw Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return z},set:function(a){if(!lc(a))throw Error("ViewportAnchorY must be between 0 and 100.");z=a}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(a){if(!lc(a))throw Error("ViewportAnchorX must be between 0 and 100.");
l=a}},scroll:{enumerable:!0,get:function(){return N},set:function(a){a="string"!==typeof a?!1:gj[a.toLowerCase()]?a.toLowerCase():!1;!1===a?console.warn("Scroll: an invalid or illegal string was specified."):N=a}}})},qg=d(function(b){b=b.exports={WebVTT:Ob,VTTCue:ef,VTTRegion:hj};a.vttjs=b;a.WebVTT=b.WebVTT;var c=b.VTTCue,d=b.VTTRegion,k=a.VTTCue,l=a.VTTRegion;b.shim=function(){a.VTTCue=c;a.VTTRegion=d};b.restore=function(){a.VTTCue=k;a.VTTRegion=l};a.VTTCue||b.shim()}),R=function(c){function d(a,
b){void 0===a&&(a={});void 0===b&&(b=function(){});a.reportTouchActivity=!1;var l=c.call(this,null,a,b)||this;l.hasStarted_=!1;l.on("playing",function(){this.hasStarted_=!0});l.on("loadstart",function(){this.hasStarted_=!1});ya.names.forEach(function(b){b=ya[b];a&&a[b.getterName]&&(l[b.privateName]=a[b.getterName])});l.featuresProgressEvents||l.manualProgressOn();l.featuresTimeupdateEvents||l.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(b){!1===a["native"+b+"Tracks"]&&(l["featuresNative"+
b+"Tracks"]=!1)});if(!1===a.nativeCaptions||!1===a.nativeTextTracks)l.featuresNativeTextTracks=!1;else if(!0===a.nativeCaptions||!0===a.nativeTextTracks)l.featuresNativeTextTracks=!0;l.featuresNativeTextTracks||l.emulateTextTracks();l.preloadTextTracks=!1!==a.preloadTextTracks;l.autoRemoteTextTracks_=new ya.text.ListClass;l.initTrackListeners();a.nativeControlsForTouch||l.emitTapEvents();l.constructor&&(l.name_=l.constructor.name||"Unknown Tech");return l}F(d,c);var u=d.prototype;u.triggerSourceset=
function(a){var b=this;if(!this.isReady_)this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)});this.trigger({src:a,type:"sourceset"})};u.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};u.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};u.trackProgress=function(a){this.stopTrackingProgress();
this.progressInterval=this.setInterval(V(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};u.onDurationChange=function(a){this.duration_=this.duration()};u.buffered=function(){return Va(0,0)};u.bufferedPercent=function(){return mc(this.buffered(),this.duration_)};u.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};u.manualTimeUpdatesOn=function(){this.manualTimeUpdates=
!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};u.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};u.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)};u.stopTrackingCurrentTime=
function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};u.dispose=function(){this.clearTracks(Qa.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();c.prototype.dispose.call(this)};u.clearTracks=function(a){var b=this;a=[].concat(a);a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],l=c.length;l--;){var d=c[l];"text"===a&&b.removeRemoteTextTrack(d);c.removeTrack(d)}})};u.cleanupAutoTextTracks=
function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;)this.removeRemoteTextTrack(a[b])};u.reset=function(){};u.error=function(a){void 0!==a&&(this.error_=new ja(a),this.trigger("error"));return this.error_};u.played=function(){return this.hasStarted_?Va(0,0):Va()};u.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};u.initTrackListeners=function(){var a=this;Qa.names.forEach(function(b){var c=function(){a.trigger(b+"trackchange")},
l=a[Qa[b].getterName]();l.addEventListener("removetrack",c);l.addEventListener("addtrack",c);a.on("dispose",function(){l.removeEventListener("removetrack",c);l.removeEventListener("addtrack",c)})})};u.addWebVttScript_=function(){var c=this;if(!a.WebVTT)if(b.body.contains(this.el()))if(!this.options_["vtt.js"]&&t(qg)&&0<Object.keys(qg).length)this.trigger("vttjsloaded");else{var l=b.createElement("script");l.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";l.onload=function(){c.trigger("vttjsloaded")};
l.onerror=function(){c.trigger("vttjserror")};this.on("dispose",function(){l.onload=null;l.onerror=null});a.WebVTT=!0;this.el().parentNode.appendChild(l)}else this.ready(this.addWebVttScript_)};u.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},u=function(a){return b.removeTrack(a.track)};c.on("addtrack",d);c.on("removetrack",u);this.addWebVttScript_();var q=function(){return a.trigger("texttrackchange")},f=function(){q();
for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",q);"showing"===c.mode&&c.addEventListener("cuechange",q)}};f();b.addEventListener("change",f);b.addEventListener("addtrack",f);b.addEventListener("removetrack",f);this.on("dispose",function(){c.off("addtrack",d);c.off("removetrack",u);b.removeEventListener("change",f);b.removeEventListener("addtrack",f);b.removeEventListener("removetrack",f);for(var a=0;a<b.length;a++)b[a].removeEventListener("cuechange",q)})};u.addTextTrack=
function(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");var l=void 0;void 0===l&&(l={});var d=this.textTracks();l.kind=a;b&&(l.label=b);c&&(l.language=c);l.tech=this;a=new ya.text.TrackClass(l);d.addTrack(a);return a};u.createRemoteTextTrack=function(a){a=S(a,{tech:this});return new dc.remoteTextEl.TrackClass(a)};u.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var l=this.createRemoteTextTrack(a);!0!==b&&!1!==b&&(ca.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),
b=!0);this.remoteTextTrackEls().addTrackElement_(l);this.remoteTextTracks().addTrack(l.track);!0!==b&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(l.track)});return l};u.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b);this.remoteTextTracks().removeTrack(a);this.autoRemoteTextTracks_.removeTrack(a)};u.getVideoPlaybackQuality=function(){return{}};u.requestPictureInPicture=function(){var b=
this.options_.Promise||a.Promise;if(b)return b.reject()};u.setPoster=function(){};u.playsinline=function(){};u.setPlaysinline=function(){};u.overrideNativeAudioTracks=function(){};u.overrideNativeVideoTracks=function(){};u.canPlayType=function(){return""};d.canPlayType=function(){return""};d.canPlaySource=function(a,b){return d.canPlayType(a.type)};d.isTech=function(a){return a.prototype instanceof d||a instanceof d||a===d};d.registerTech=function(a,b){d.techs_||(d.techs_={});if(!d.isTech(b))throw Error("Tech "+
a+" must be a Tech");if(!d.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!d.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");a=pa(a);d.techs_[a]=b;d.techs_[Xc(a)]=b;"Tech"!==a&&d.defaultTechOrder_.push(a);return b};d.getTech=function(b){if(b){if(d.techs_&&d.techs_[b])return d.techs_[b];b=pa(b);if(a&&a.videojs&&a.videojs[b])return ca.warn("The "+b+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),
a.videojs[b]}};return d}(C);ya.names.forEach(function(a){var b=ya[a];R.prototype[b.getterName]=function(){this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});R.prototype.featuresVolumeControl=!0;R.prototype.featuresMuteControl=!0;R.prototype.featuresFullscreenResize=!1;R.prototype.featuresPlaybackRate=!1;R.prototype.featuresProgressEvents=!1;R.prototype.featuresSourceset=!1;R.prototype.featuresTimeupdateEvents=!1;R.prototype.featuresNativeTextTracks=!1;R.withSourceHandlers=
function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]);void 0===c&&(c=d.length);d.splice(c,0,b)};a.canPlayType=function(b){for(var c=a.sourceHandlers||[],d,l=0;l<c.length;l++)if(d=c[l].canPlayType(b))return d;return""};a.selectSourceHandler=function(b,c){for(var d=a.sourceHandlers||[],l,z=0;z<d.length;z++)if(l=d[z].canHandleSource(b,c))return d[z];return null};a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):
""};["seekable","seeking","duration"].forEach(function(a){var b=this[a];"function"===typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype);a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:ca.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",
this.disposeSourceHandler);c!==a.nativeSourceHandler&&(this.currentSource_=b);this.sourceHandler_=c.handleSource(b,this,this.options_);this.one("dispose",this.disposeSourceHandler)};a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};C.registerComponent("Tech",R);R.registerTech("Tech",R);
R.defaultTechOrder_=[];var Gb={},Dd={},Oc={},ij={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},jj={setCurrentTime:1,setMuted:1,setVolume:1},rg={play:1,pause:1},kj={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},
Pc=function(a){void 0===a&&(a="");a=ee(a);return kj[a.toLowerCase()]||""},lj=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;a=a.$$("source");for(c=0;c<a.length;c++){var d=a[c];if(d.type&&d.src&&d.src===b)return d.type}return Pc(b)},mj=function u(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=u(a);Array.isArray(a)?b=b.concat(a):h(a)&&b.push(a)});
a=b}else a="string"===typeof a&&a.trim()?[nf({src:a})]:h(a)&&"string"===typeof a.src&&a.src&&a.src.trim()?[nf(a)]:[];return a},nj=function(a){function b(b,c,d){var l=S({createEl:!1},c);d=a.call(this,b,l,d)||this;if(c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(l=0,c=c.playerOptions.techOrder;l<c.length;l++){var k=pa(c[l]),z=R.getTech(k);k||(z=C.getComponent(k));if(z&&z.isSupported()){b.loadTech_(k);break}}return d}F(b,a);return b}(C);C.registerComponent("MediaLoader",
nj);var cd=function(a){function b(b,c){b=a.call(this,b,c)||this;b.emitTapEvents();b.enable();return b}F(b,a);var c=b.prototype;c.createEl=function(b,c,d){void 0===b&&(b="div");void 0===c&&(c={});void 0===d&&(d={});c=p({innerHTML:'\x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e',className:this.buildCSSClass(),tabIndex:0},c);"button"===b&&ca.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead.");d=p({role:"button"},
d);this.tabIndex_=c.tabIndex;b=a.prototype.createEl.call(this,b,c,d);this.createControlTextEl(b);return b};c.dispose=function(){this.controlTextEl_=null;a.prototype.dispose.call(this)};c.createControlTextEl=function(a){this.controlTextEl_=I("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_};c.controlText=function(a,b){void 0===b&&(b=this.el());if(void 0===a)return this.controlText_||
"Need Text";var c=this.localize(a);this.controlText_=a;O(this.controlTextEl_,c);this.nonIconControl||b.setAttribute("title",c)};c.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)};c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",
this.handleKeyDown))};c.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)};c.handleKeyDown=function(b){U.isEventKey(b,
"Space")||U.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)};return b}(C);C.registerComponent("ClickableComponent",cd);var oj=function(a){function b(b,c){c=a.call(this,b,c)||this;c.update();b.on("posterchange",V(Q(c),c.update));return c}F(b,a);var c=b.prototype;c.dispose=function(){this.player().off("posterchange",this.update);a.prototype.dispose.call(this)};c.createEl=function(){return I("div",{className:"vjs-poster",tabIndex:-1})};
c.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};c.setSrc=function(a){var b="";a&&(b='url("'+a+'")');this.el_.style.backgroundImage=b};c.handleClick=function(a){this.player_.controls()&&(a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(tc||sc)&&a||this.player_.tech(!0).focus(),this.player_.paused()?tb(this.player_.play()):this.player_.pause())};return b}(cd);C.registerComponent("PosterImage",
oj);var pj={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},qj=function(b){function c(c,d,k){d=b.call(this,c,d,k)||this;var l=V(Q(d),d.updateDisplay);c.on("loadstart",V(Q(d),d.toggleDisplay));
c.on("texttrackchange",l);c.on("loadedmetadata",V(Q(d),d.preselectTrack));c.ready(V(Q(d),function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)this.hide();else{c.on("fullscreenchange",l);c.on("playerresize",l);a.addEventListener("orientationchange",l);c.on("dispose",function(){return a.removeEventListener("orientationchange",l)});for(var b=this.options_.playerOptions.tracks||[],d=0;d<b.length;d++)this.player_.addRemoteTextTrack(b[d],!0);this.preselectTrack()}}));return d}F(c,b);var d=c.prototype;
d.preselectTrack=function(){for(var a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage,d,k,u,n=0;n<b.length;n++){var x=b[n];c&&c.enabled&&c.language&&c.language===x.language&&x.kind in a?x.kind===c.kind?u=x:u||(u=x):c&&!c.enabled?k=d=u=null:x["default"]&&("descriptions"!==x.kind||d?x.kind in a&&!k&&(k=x):d=x)}u?u.mode="showing":k?k.mode="showing":d&&(d.mode="showing")};d.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?
this.hide():this.show()};d.createEl=function(){return b.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};d.clearDisplay=function(){"function"===typeof a.WebVTT&&a.WebVTT.processCues(a,[],this.el_)};d.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(b){b=[];for(var c=0;c<a.length;++c){var d=a[c];"showing"===d.mode&&b.push(d)}this.updateForTrack(b)}else{c=b=null;
for(d=a.length;d--;){var k=a[d];"showing"===k.mode&&("descriptions"===k.kind?b=k:c=k)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))}};d.updateDisplayState=function(b){var c=this.player_.textTrackSettings.getValues();b=b.activeCues;for(var l=b.length;l--;){var d=b[l];if(d){d=d.displayState;c.color&&(d.firstChild.style.color=c.color);
if(c.textOpacity){var k=Ed(c.color||"#fff",c.textOpacity);try{d.firstChild.style.color=k}catch(y){}}c.backgroundColor&&(d.firstChild.style.backgroundColor=c.backgroundColor);if(c.backgroundOpacity){k=Ed(c.backgroundColor||"#000",c.backgroundOpacity);try{d.firstChild.style.backgroundColor=k}catch(y){}}if(c.windowColor)if(c.windowOpacity){k=Ed(c.windowColor,c.windowOpacity);try{d.style.backgroundColor=k}catch(y){}}else d.style.backgroundColor=c.windowColor;c.edgeStyle&&("dropshadow"===c.edgeStyle?d.firstChild.style.textShadow=
"2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===c.edgeStyle?d.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===c.edgeStyle?d.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===c.edgeStyle&&(d.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));c.fontPercent&&1!==c.fontPercent&&(k=a.parseFloat(d.style.fontSize),d.style.fontSize=k*c.fontPercent+"px",d.style.height="auto",
d.style.top="auto",d.style.bottom="2px");c.fontFamily&&"default"!==c.fontFamily&&("small-caps"===c.fontFamily?d.firstChild.style.fontVariant="small-caps":d.firstChild.style.fontFamily=pj[c.fontFamily])}}};d.updateForTrack=function(b){Array.isArray(b)||(b=[b]);if("function"===typeof a.WebVTT&&!b.every(function(a){return!a.activeCues})){for(var c=[],l=0;l<b.length;++l)for(var d=b[l],k=0;k<d.activeCues.length;++k)c.push(d.activeCues[k]);a.WebVTT.processCues(a,c,this.el_);for(c=0;c<b.length;++c){l=b[c];
for(d=0;d<l.activeCues.length;++d)k=l.activeCues[d].displayState,L(k,"vjs-text-track-cue"),L(k,"vjs-text-track-cue-"+(l.language?l.language:c));this.player_.textTrackSettings&&this.updateDisplayState(l)}}};return c}(C);C.registerComponent("TextTrackDisplay",qj);var rj=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);b.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":"Video Player");b=I("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",
[b])});var c=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});c.appendChild(b);return c};return b}(C);C.registerComponent("LoadingSpinner",rj);var Wa=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);var c=b.prototype;c.createEl=function(a,b,c){void 0===b&&(b={});void 0===c&&(c={});a="button";b=p({innerHTML:'\x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e',className:this.buildCSSClass()},b);c=p({type:"button"},c);
a=C.prototype.createEl.call(this,a,b,c);this.createControlTextEl(a);return a};c.addChild=function(a,b){void 0===b&&(b={});ca.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return C.prototype.addChild.call(this,a,b)};c.enable=function(){a.prototype.enable.call(this);this.el_.removeAttribute("disabled")};c.disable=function(){a.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};
c.handleKeyDown=function(b){U.isEventKey(b,"Space")||U.isEventKey(b,"Enter")?b.stopPropagation():a.prototype.handleKeyDown.call(this,b)};return b}(cd);C.registerComponent("Button",Wa);var sg=function(a){function b(b,c){b=a.call(this,b,c)||this;b.mouseused_=!1;b.on("mousedown",b.handleMouseDown);return b}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-big-play-button"};c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)a=this.player_.usingPlugin("eme")&&
this.player_.eme.sessions&&0<this.player_.eme.sessions.length,tb(b),!this.player_.tech(!0)||(tc||sc)&&a||this.player_.tech(!0).focus();else{var c=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");c?(a=function(){return c.focus()},sb(b)?b.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};c.handleKeyDown=function(b){this.mouseused_=!1;a.prototype.handleKeyDown.call(this,b)};c.handleMouseDown=function(a){this.mouseused_=!0};return b}(Wa);sg.prototype.controlText_=
"Play Video";C.registerComponent("BigPlayButton",sg);var sj=function(a){function b(b,c){b=a.call(this,b,c)||this;b.controlText(c&&c.controlText||b.localize("Close"));return b}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)};c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})};c.handleKeyDown=function(b){U.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,
b)};return b}(Wa);C.registerComponent("CloseButton",sj);var tg=function(a){function b(b,c){void 0===c&&(c={});var l=a.call(this,b,c)||this;c.replay=void 0===c.replay||c.replay;l.on(b,"play",l.handlePlay);l.on(b,"pause",l.handlePause);if(c.replay)l.on(b,"ended",l.handleEnded);return l}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)};c.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};c.handleSeeked=
function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};c.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};c.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};c.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",
this.handleSeeked)};return b}(Wa);tg.prototype.controlText_="Play";C.registerComponent("PlayToggle",tg);var ug=function(a,b){a=0>a?0:a;var c=Math.floor(a%60),l=Math.floor(a/60%60),d=Math.floor(a/3600),u=Math.floor(b/60%60);b=Math.floor(b/3600);if(isNaN(a)||Infinity===a)d=l=c="-";d=0<d||0<b?d+":":"";return d+(((d||10<=u)&&10>l?"0"+l:l)+":")+(10>c?"0"+c:c)},Fd=ug,ec=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,["timeupdate","ended"],c.updateContent);c.updateTextNode_();return c}F(c,a);
var d=c.prototype;d.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control",innerHTML:'\x3cspan class\x3d"vjs-control-text" role\x3d"presentation"\x3e'+this.localize(this.labelText_)+"\u00a0\x3c/span\x3e"});this.contentEl_=I("span",{className:b+"-display"},{"aria-live":"off",role:"presentation"});c.appendChild(this.contentEl_);return c};d.dispose=function(){this.textNode_=this.contentEl_=null;a.prototype.dispose.call(this)};
d.updateTextNode_=function(a){var c=this;void 0===a&&(a=0);a=Rb(a);this.formattedTime_!==a&&(this.formattedTime_=a,this.requestAnimationFrame(function(){if(c.contentEl_){var a=c.textNode_;c.textNode_=b.createTextNode(c.formattedTime_);c.textNode_&&(a?c.contentEl_.replaceChild(c.textNode_,a):c.contentEl_.appendChild(c.textNode_))}}))};d.updateContent=function(a){};return c}(C);ec.prototype.labelText_="Time";ec.prototype.controlText_="Time";C.registerComponent("TimeDisplay",ec);var fe=function(a){function b(){return a.apply(this,
arguments)||this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-current-time"};c.updateContent=function(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)};return b}(ec);fe.prototype.labelText_="Current Time";fe.prototype.controlText_="Current Time";C.registerComponent("CurrentTimeDisplay",fe);var ge=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"durationchange",
c.updateContent);c.on(b,"loadstart",c.updateContent);c.on(b,"loadedmetadata",c.updateContent);return c}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-duration"};c.updateContent=function(a){a=this.player_.duration();this.updateTextNode_(a)};return b}(ec);ge.prototype.labelText_="Duration";ge.prototype.controlText_="Duration";C.registerComponent("DurationDisplay",ge);var tj=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"\x3cdiv\x3e\x3cspan\x3e/\x3c/span\x3e\x3c/div\x3e"},{"aria-hidden":!0})};return b}(C);C.registerComponent("TimeDivider",tj);var he=function(a){function b(b,c){c=a.call(this,b,c)||this;c.on(b,"durationchange",c.updateContent);return c}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-remaining-time"};c.createEl=function(){var b=a.prototype.createEl.call(this);b.insertBefore(I("span",{},{"aria-hidden":!0},"-"),this.contentEl_);
return b};c.updateContent=function(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))};return b}(ec);he.prototype.labelText_="Remaining Time";he.prototype.controlText_="Remaining Time";C.registerComponent("RemainingTimeDisplay",he);var uj=function(a){function b(b,c){b=a.call(this,b,c)||this;b.updateShowing();b.on(b.player(),"durationchange",b.updateShowing);
return b}F(b,a);var c=b.prototype;c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=I("div",{className:"vjs-live-display",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e'+this.localize("Stream Type")+"\u00a0\x3c/span\x3e"+this.localize("LIVE")},{"aria-live":"off"});b.appendChild(this.contentEl_);return b};c.dispose=function(){this.contentEl_=null;a.prototype.dispose.call(this)};c.updateShowing=function(a){Infinity===this.player().duration()?
this.show():this.hide()};return b}(C);C.registerComponent("LiveDisplay",uj);var vg=function(a){function b(b,c){b=a.call(this,b,c)||this;b.updateLiveEdgeStatus();if(b.player_.liveTracker)b.on(b.player_.liveTracker,"liveedgechange",b.updateLiveEdgeStatus);return b}F(b,a);var c=b.prototype;c.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=I("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});
b.appendChild(this.textEl_);return b};c.updateLiveEdgeStatus=function(a){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};c.dispose=function(){this.player_.liveTracker&&
this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;a.prototype.dispose.call(this)};return b}(Wa);vg.prototype.controlText_="Seek to live, currently playing live";C.registerComponent("SeekToLive",vg);var vc=function(a,b,c){a=Number(a);return Math.min(c,Math.max(b,isNaN(a)?b:a))},ie=function(a){function b(b,c){b=a.call(this,b,c)||this;b.bar=b.getChild(b.options_.barName);b.vertical(!!b.options_.vertical);b.enable();return b}F(b,a);var c=b.prototype;c.enabled=
function(){return this.enabled_};c.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;
this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,
this.update);this.enabled_=!1}};c.createEl=function(b,c,d){void 0===c&&(c={});void 0===d&&(d={});c.className+=" vjs-slider";c=p({tabIndex:0},c);d=p({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d);return a.prototype.createEl.call(this,b,c,d)};c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||lb||a.preventDefault();J();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,
"mousemove",this.handleMouseMove);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchmove",this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(a)};c.handleMouseMove=function(a){};c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;ka();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);
this.update()};c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();if(b===this.progress_)return b;this.progress_=b;this.requestAnimationFrame(function(){var c=a.vertical()?"height":"width";a.bar.el().style[c]=(100*b).toFixed(2)+"%"});return b}};c.getProgress=function(){return Number(vc(this.getPercent(),0,1).toFixed(4))};c.calculateDistance=function(a){a=da(this.el_,a);return this.vertical()?a.y:a.x};c.handleKeyDown=function(b){U.isEventKey(b,"Left")||U.isEventKey(b,"Down")?
(b.preventDefault(),b.stopPropagation(),this.stepBack()):U.isEventKey(b,"Right")||U.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,b)};c.handleClick=function(a){a.stopPropagation();a.preventDefault()};c.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return b}(C);C.registerComponent("Slider",ie);var vj=function(a){function c(b,
c){c=a.call(this,b,c)||this;c.partEls_=[];c.on(b,"progress",c.update);return c}F(c,a);var d=c.prototype;d.createEl=function(){var c=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),d=I("span",{className:"vjs-control-text"}),k=I("span",{textContent:this.localize("Loaded")}),u=b.createTextNode(": ");this.percentageEl_=I("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});c.appendChild(d);d.appendChild(k);d.appendChild(u);d.appendChild(this.percentageEl_);return c};
d.dispose=function(){this.percentageEl_=this.partEls_=null;a.prototype.dispose.call(this)};d.update=function(a){var b=this;this.requestAnimationFrame(function(){var a=b.player_.liveTracker,c=b.player_.buffered(),l=a&&a.isLive()?a.seekableEnd():b.player_.duration(),d=b.player_.bufferedEnd();a=b.partEls_;l=vc(d/l*100,0,100).toFixed(2)+"%";b.percent_!==l&&(b.el_.style.width=l,O(b.percentageEl_,l),b.percent_=l);for(l=0;l<c.length;l++){var n=c.start(l),k=c.end(l),u=a[l];u||(u=b.el_.appendChild(I()),a[l]=
u);if(u.dataset.start!==n||u.dataset.end!==k)u.dataset.start=n,u.dataset.end=k,u.style.left=vc(n/d*100,0,100).toFixed(2)+"%",u.style.width=vc((k-n)/d*100,0,100).toFixed(2)+"%"}for(d=a.length;d>c.length;d--)b.el_.removeChild(a[d-1]);a.length=c.length})};return c}(C);C.registerComponent("LoadProgressBar",vj);var wj=function(a){function b(b,c){b=a.call(this,b,c)||this;b.update=Hb(V(Q(b),b.update),30);return b}F(b,a);var c=b.prototype;c.createEl=function(){return a.prototype.createEl.call(this,"div",
{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};c.update=function(a,b,c){var l=W(this.el_),d=W(this.player_.el()),k=a.width*b;d&&l&&(b=a.left-d.left+k,a=a.width-k+(d.right-a.right),d=l.width/2,b<d?d+=d-b:a<d&&(d=a),0>d?d=0:d>l.width&&(d=l.width),this.el_.style.right="-"+d+"px",this.write(c))};c.write=function(a){O(this.el_,a)};c.updateTime=function(a,b,c,d){var l=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var k=l.player_.duration();
if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){k=l.player_.liveTracker.liveWindow();var n=k-b*k;k=(1>n?"":"-")+Rb(n,k)}else k=Rb(c,k);l.update(a,b,k);d&&d()})};return b}(C);C.registerComponent("TimeTooltip",wj);var je=function(a){function b(b,c){b=a.call(this,b,c)||this;b.update=Hb(V(Q(b),b.update),30);return b}F(b,a);var c=b.prototype;c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};c.update=function(a,
b){var c=this.getChild("timeTooltip");if(c){var l=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,l)}};return b}(C);je.prototype.options_={children:[]};Pa||xb||je.prototype.options_.children.push("timeTooltip");C.registerComponent("PlayProgressBar",je);var wg=function(a){function b(b,c){b=a.call(this,b,c)||this;b.update=Hb(V(Q(b),b.update),30);return b}F(b,a);var c=b.prototype;c.createEl=function(){return a.prototype.createEl.call(this,"div",
{className:"vjs-mouse-display"})};c.update=function(a,b){var c=this,l=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,l,function(){c.el_.style.left=a.width*b+"px"})};return b}(C);wg.prototype.options_={children:["timeTooltip"]};C.registerComponent("MouseTimeDisplay",wg);var ke=function(a){function c(b,c){b=a.call(this,b,c)||this;b.setEventHandlers_();return b}F(c,a);var d=c.prototype;d.setEventHandlers_=function(){this.update_=V(this,this.update);this.update=Hb(this.update_,
30);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in b&&"visibilityState"in b)this.on(b,"visibilitychange",this.toggleVisibility_)};d.toggleVisibility_=function(a){b.hidden?this.disableInterval_(a):(this.enableInterval_(),
this.update())};d.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))};d.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};d.update=function(b){var c=this,
l=a.prototype.update.call(this);this.requestAnimationFrame(function(){var a=c.player_.ended()?c.player_.duration():c.getCurrentTime_(),b=c.player_.liveTracker,d=c.player_.duration();b&&b.isLive()&&(d=c.player_.liveTracker.liveCurrentTime());c.percent_!==l&&(c.el_.setAttribute("aria-valuenow",(100*l).toFixed(2)),c.percent_=l);if(c.currentTime_!==a||c.duration_!==d)c.el_.setAttribute("aria-valuetext",c.localize("progress bar timing: currentTime\x3d{1} duration\x3d{2}",[Rb(a,d),Rb(d,d)],"{1} of {2}")),
c.currentTime_=a,c.duration_=d;c.bar&&c.bar.update(W(c.el()),c.getProgress())});return l};d.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};d.getPercent=function(){var a=this.getCurrentTime_(),b=this.player_.liveTracker;b&&b.isLive()?(a=(a-b.seekableStart())/b.liveWindow(),b.atLiveEdge()&&(a=1)):a/=this.player_.duration();return a};d.handleMouseDown=function(b){ab(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=
!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))};d.handleMouseMove=function(a){if(ab(a)){var b=this.calculateDistance(a);var c=this.player_.liveTracker;if(c&&c.isLive()){a=c.seekableStart();var l=c.liveCurrentTime();b=a+b*c.liveWindow();b>=l&&(b=l);b<=a&&(b=a+.1);if(Infinity===b)return}else b*=this.player_.duration(),b===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}};d.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");
b&&b.show()};d.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()};d.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b);b&&b.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying?tb(this.player_.play()):this.update_()};d.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};d.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-
5)};d.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};d.handleKeyDown=function(b){U.isEventKey(b,"Space")||U.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.handleAction(b)):U.isEventKey(b,"Home")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(0)):U.isEventKey(b,"End")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(U(b))?(b.preventDefault(),b.stopPropagation(),b=
10*(U.codes[U(b)]-U.codes["0"])/100,this.player_.currentTime(this.player_.duration()*b)):U.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):U.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,b)};return c}(ie);ke.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Pa||xb||ke.prototype.options_.children.splice(1,
0,"mouseTimeDisplay");C.registerComponent("SeekBar",ke);var xg=function(a){function b(b,c){b=a.call(this,b,c)||this;b.handleMouseMove=Hb(V(Q(b),b.handleMouseMove),30);b.throttledHandleMouseSeek=Hb(V(Q(b),b.handleMouseSeek),30);b.enable();return b}F(b,a);var c=b.prototype;c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("playProgressBar"),l=b.getChild("mouseTimeDisplay");
if(c||l){var d=b.el(),k=W(d);a=da(d,a).x;a=vc(0,1,a);l&&l.update(k,a);c&&c.update(k,b.getProgress())}}};c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)};c.enabled=function(){return this.enabled_};c.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=
!1)};c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};c.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);
this.on(b,"touchend",this.handleMouseUp)};c.handleMouseUp=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseUp(a);this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);this.off(b,"touchend",this.handleMouseUp)};return b}(C);xg.prototype.options_={children:["seekBar"]};C.registerComponent("ProgressControl",xg);var yg=function(a){function c(c,d){d=a.call(this,c,d)||this;d.on(c,
["enterpictureinpicture","leavepictureinpicture"],d.handlePictureInPictureChange);b.pictureInPictureEnabled||d.disable();return d}F(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)};d.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")};d.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():
this.player_.requestPictureInPicture()};return c}(Wa);yg.prototype.controlText_="Picture-in-Picture";C.registerComponent("PictureInPictureToggle",yg);var zg=function(a){function c(c,d){d=a.call(this,c,d)||this;d.on(c,"fullscreenchange",d.handleFullscreenChange);!1===b[c.fsApi_.fullscreenEnabled]&&d.disable();return d}F(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)};d.handleFullscreenChange=function(a){this.player_.isFullscreen()?
this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};d.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(Wa);zg.prototype.controlText_="Fullscreen";C.registerComponent("FullscreenToggle",zg);var xj=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},yj=function(a){function b(){return a.apply(this,
arguments)||this}F(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e\x3c/span\x3e'})};return b}(C);C.registerComponent("VolumeLevel",yj);var le=function(a){function b(b,c){var l=a.call(this,b,c)||this;l.on("slideractive",l.updateLastVolume_);l.on(b,"volumechange",l.updateARIAAttributes);b.ready(function(){return l.updateARIAAttributes()});return l}F(b,a);var c=b.prototype;c.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};c.handleMouseDown=function(b){ab(b)&&a.prototype.handleMouseDown.call(this,b)};c.handleMouseMove=function(a){ab(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};c.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+
.1)};c.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};c.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")};c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})};
return b}(ie);le.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};le.prototype.playerEvent="volumechange";C.registerComponent("VolumeBar",le);var Ag=function(a){function b(b,c){void 0===c&&(c={});c.vertical=c.vertical||!1;if("undefined"===typeof c.volumeBar||t(c.volumeBar))c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical;var l=a.call(this,b,c)||this;xj(Q(l),b);l.throttledHandleMouseMove=Hb(V(Q(l),l.handleMouseMove),30);l.on("mousedown",l.handleMouseDown);l.on("touchstart",
l.handleMouseDown);l.on(l.volumeBar,["focus","slideractive"],function(){l.volumeBar.addClass("vjs-slider-active");l.addClass("vjs-slider-active");l.trigger("slideractive")});l.on(l.volumeBar,["blur","sliderinactive"],function(){l.volumeBar.removeClass("vjs-slider-active");l.removeClass("vjs-slider-active");l.trigger("sliderinactive")});return l}F(b,a);var c=b.prototype;c.createEl=function(){var b="vjs-volume-horizontal";this.options_.vertical&&(b="vjs-volume-vertical");return a.prototype.createEl.call(this,
"div",{className:"vjs-volume-control vjs-control "+b})};c.handleMouseDown=function(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};c.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);
this.off(a,"touchend",this.handleMouseUp)};c.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)};return b}(C);Ag.prototype.options_={children:["volumeBar"]};C.registerComponent("VolumeControl",Ag);var zj=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},Bg=function(a){function b(b,c){c=a.call(this,b,c)||this;zj(Q(c),b);c.on(b,["loadstart","volumechange"],
c.update);return c}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)};c.handleClick=function(a){a=this.player_.volume();var b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};c.update=function(a){this.updateIcon_();this.updateControlText_()};c.updateIcon_=function(){var a=this.player_.volume(),b=3;Pa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);
0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2);for(a=0;4>a;a++)E(this.el_,"vjs-vol-"+a);L(this.el_,"vjs-vol-"+b)};c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return b}(Wa);Bg.prototype.controlText_="Mute";C.registerComponent("MuteToggle",Bg);var Cg=function(a){function c(b,c){void 0===c&&(c={});c.inline="undefined"!==typeof c.inline?c.inline:!0;if("undefined"===typeof c.volumeControl||t(c.volumeControl))c.volumeControl=
c.volumeControl||{},c.volumeControl.vertical=!c.inline;c=a.call(this,b,c)||this;c.on(b,["loadstart"],c.volumePanelState_);c.on(c.muteToggle,"keyup",c.handleKeyPress);c.on(c.volumeControl,"keyup",c.handleVolumeControlKeyUp);c.on("keydown",c.handleKeyPress);c.on("mouseover",c.handleMouseOver);c.on("mouseout",c.handleMouseOut);c.on(c.volumeControl,["slideractive"],c.sliderActive_);c.on(c.volumeControl,["sliderinactive"],c.sliderInactive_);return c}F(c,a);var d=c.prototype;d.sliderActive_=function(){this.addClass("vjs-slider-active")};
d.sliderInactive_=function(){this.removeClass("vjs-slider-active")};d.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};d.createEl=function(){var b="vjs-volume-panel-horizontal";this.options_.inline||(b="vjs-volume-panel-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+
b})};d.dispose=function(){this.handleMouseOut();a.prototype.dispose.call(this)};d.handleVolumeControlKeyUp=function(a){U.isEventKey(a,"Esc")&&this.muteToggle.focus()};d.handleMouseOver=function(a){this.addClass("vjs-hover");ia(b,"keyup",V(this,this.handleKeyPress))};d.handleMouseOut=function(a){this.removeClass("vjs-hover");ba(b,"keyup",V(this,this.handleKeyPress))};d.handleKeyPress=function(a){U.isEventKey(a,"Esc")&&this.handleMouseOut()};return c}(C);Cg.prototype.options_={children:["muteToggle",
"volumeControl"]};C.registerComponent("VolumePanel",Cg);var me=function(a){function c(b,c){b=a.call(this,b,c)||this;c&&(b.menuButton_=c.menuButton);b.focusedChild_=-1;b.on("keydown",b.handleKeyDown);b.boundHandleBlur_=V(Q(b),b.handleBlur);b.boundHandleTapClick_=V(Q(b),b.handleTapClick);return b}F(c,a);var d=c.prototype;d.addEventListenerForItem=function(a){a instanceof C&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};d.removeEventListenerForItem=function(a){a instanceof
C&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};d.removeChild=function(b){"string"===typeof b&&(b=this.getChild(b));this.removeEventListenerForItem(b);a.prototype.removeChild.call(this,b)};d.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};d.createEl=function(){this.contentEl_=I(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var b=a.prototype.createEl.call(this,
"div",{append:this.contentEl_,className:"vjs-menu"});b.appendChild(this.contentEl_);ia(b,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});return b};d.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;a.prototype.dispose.call(this)};d.handleBlur=function(a){var c=a.relatedTarget||b.activeElement;this.children().some(function(a){return a.el()===c})||(a=this.menuButton_)&&a.buttonPressed_&&c!==a.el().firstChild&&a.unpressButton()};d.handleTapClick=
function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&(b=b.filter(function(b){return b.el()===a.target})[0])&&"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}};d.handleKeyDown=function(a){if(U.isEventKey(a,"Left")||U.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(U.isEventKey(a,"Right")||U.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};d.stepForward=function(){var a=
0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};d.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);this.focus(a)};d.focus=function(a){void 0===a&&(a=0);var b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())};return c}(C);C.registerComponent("Menu",me);var ne=function(a){function c(c,d){void 0===d&&(d={});var l=
a.call(this,c,d)||this;l.menuButton_=new Wa(c,d);l.menuButton_.controlText(l.controlText_);l.menuButton_.el_.setAttribute("aria-haspopup","true");c=Wa.prototype.buildCSSClass();l.menuButton_.el_.className=l.buildCSSClass()+" "+c;l.menuButton_.removeClass("vjs-control");l.addChild(l.menuButton_);l.update();l.enabled_=!0;l.on(l.menuButton_,"tap",l.handleClick);l.on(l.menuButton_,"click",l.handleClick);l.on(l.menuButton_,"keydown",l.handleKeyDown);l.on(l.menuButton_,"mouseenter",function(){l.addClass("vjs-hover");
l.menu.show();ia(b,"keyup",V(Q(l),l.handleMenuKeyUp))});l.on("mouseleave",l.handleMouseLeave);l.on("keydown",l.handleSubmenuKeyDown);return l}F(c,a);var d=c.prototype;d.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};d.createMenu=function(){var a=new me(this.player_,
{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=I("li",{className:"vjs-menu-title",innerHTML:pa(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;b=new C(this.player_,{el:b});a.addItem(b)}if(this.items=this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a};d.createItems=function(){};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};d.buildWrapperCSSClass=function(){var b="vjs-menu-button";
b=!0===this.options_.inline?b+"-inline":b+"-popup";var c=Wa.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)};d.buildCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";return"vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)};d.controlText=function(a,b){void 0===b&&(b=this.menuButton_.el());return this.menuButton_.controlText(a,b)};d.dispose=function(){this.handleMouseLeave();a.prototype.dispose.call(this)};
d.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};d.handleMouseLeave=function(a){this.removeClass("vjs-hover");ba(b,"keyup",V(this,this.handleMenuKeyUp))};d.focus=function(){this.menuButton_.focus()};d.blur=function(){this.menuButton_.blur()};d.handleKeyDown=function(a){U.isEventKey(a,"Esc")||U.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),U.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!U.isEventKey(a,"Up")&&!U.isEventKey(a,
"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};d.handleMenuKeyUp=function(a){(U.isEventKey(a,"Esc")||U.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")};d.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};d.handleSubmenuKeyDown=function(a){if(U.isEventKey(a,"Esc")||U.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),U.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};d.pressButton=function(){this.enabled_&&(this.buttonPressed_=
!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Pa&&G()||this.menu.focus())};d.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};d.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};d.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};
return c}(C);C.registerComponent("MenuButton",ne);var oe=function(a){function b(b,c){var d=c.tracks;b=a.call(this,b,c)||this;1>=b.items.length&&b.hide();if(!d)return Q(b);var l=V(Q(b),b.update);d.addEventListener("removetrack",l);d.addEventListener("addtrack",l);b.player_.on("ready",l);b.player_.on("dispose",function(){d.removeEventListener("removetrack",l);d.removeEventListener("addtrack",l)});return b}F(b,a);return b}(ne);C.registerComponent("TrackButton",oe);var Aj="Tab Esc Up Down Right Left".split(" "),
wc=function(a){function b(b,c){b=a.call(this,b,c)||this;b.selectable=c.selectable;b.isSelected_=c.selected||!1;b.multiSelectable=c.multiSelectable;b.selected(b.isSelected_);b.selectable?b.multiSelectable?b.el_.setAttribute("role","menuitemcheckbox"):b.el_.setAttribute("role","menuitemradio"):b.el_.setAttribute("role","menuitem");return b}F(b,a);var c=b.prototype;c.createEl=function(b,c,d){this.nonIconControl=!0;return a.prototype.createEl.call(this,"li",p({className:"vjs-menu-item",innerHTML:'\x3cspan class\x3d"vjs-menu-item-text"\x3e'+
this.localize(this.options_.label)+"\x3c/span\x3e",tabIndex:-1},c),d)};c.handleKeyDown=function(b){Aj.some(function(a){return U.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)};c.handleClick=function(a){this.selected(!0)};c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),
this.isSelected_=!1))};return b}(cd);C.registerComponent("MenuItem",wc);var xc=function(c){function d(d,k){var l=k.track,u=d.textTracks();k.label=l.label||l.language||"Unknown";k.selected="showing"===l.mode;var q=c.call(this,d,k)||this;q.track=l;q.kinds=(k.kinds||[k.kind||q.track.kind]).filter(Boolean);var f=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];q.handleTracksChange.apply(Q(q),b)},n=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];
q.handleSelectedLanguageChange.apply(Q(q),b)};d.on(["loadstart","texttrackchange"],f);u.addEventListener("change",f);u.addEventListener("selectedlanguagechange",n);q.on("dispose",function(){d.off(["loadstart","texttrackchange"],f);u.removeEventListener("change",f);u.removeEventListener("selectedlanguagechange",n)});if(void 0===u.onchange){var x;q.on(["tap","click"],function(){if("object"!==typeof a.Event)try{x=new a.Event("change")}catch(K){}x||(x=b.createEvent("Event"),x.initEvent("change",!0,!0));
u.dispatchEvent(x)})}q.handleTracksChange();return q}F(d,c);var k=d.prototype;k.handleClick=function(a){var b=this.track,d=this.player_.textTracks();c.prototype.handleClick.call(this,a);if(d)for(a=0;a<d.length;a++){var l=d[a];-1!==this.kinds.indexOf(l.kind)&&(l===b?"showing"!==l.mode&&(l.mode="showing"):"disabled"!==l.mode&&(l.mode="disabled"))}};k.handleTracksChange=function(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)};k.handleSelectedLanguageChange=function(a){"showing"===
this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};k.dispose=function(){this.track=null;c.prototype.dispose.call(this)};return d}(wc);C.registerComponent("TextTrackMenuItem",xc);var Dg=function(a){function b(b,c){c.track={player:b,kind:c.kind,kinds:c.kinds,"default":!1,mode:"disabled"};c.kinds||(c.kinds=[c.kind]);c.track.label=
c.label?c.label:c.kinds.join(" and ")+" off";c.selectable=!0;c.multiSelectable=!1;return a.call(this,b,c)||this}F(b,a);var c=b.prototype;c.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,d=a.length;c<d;c++){var l=a[c];if(-1<this.options_.kinds.indexOf(l.kind)&&"showing"===l.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)};c.handleSelectedLanguageChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,d=a.length;c<d;c++){var l=a[c];if(-1<["captions","descriptions",
"subtitles"].indexOf(l.kind)&&"showing"===l.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})};return b}(xc);C.registerComponent("OffTextTrackMenuItem",Dg);var fc=function(a){function b(b,c){void 0===c&&(c={});c.tracks=b.textTracks();return a.call(this,b,c)||this}F(b,a);b.prototype.createItems=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=xc);var c;this.label_&&(c=this.label_+" off");a.push(new Dg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c}));this.hideThreshold_+=
1;c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var d=0;d<c.length;d++){var l=c[d];if(-1<this.kinds_.indexOf(l.kind)){var k=new b(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});k.addClass("vjs-"+l.kind+"-menu-item");a.push(k)}}return a};return b}(oe);C.registerComponent("TextTrackButton",fc);var Eg=function(a){function b(b,c){var d=c.track,l=c.cue,k=b.currentTime();c.selectable=!0;c.multiSelectable=!1;c.label=l.text;
c.selected=l.startTime<=k&&k<l.endTime;b=a.call(this,b,c)||this;b.track=d;b.cue=l;d.addEventListener("cuechange",V(Q(b),b.update));return b}F(b,a);var c=b.prototype;c.handleClick=function(b){a.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};c.update=function(a){a=this.cue;var b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)};return b}(wc);C.registerComponent("ChaptersTrackMenuItem",Eg);var pe=function(a){function b(b,
c,d){return a.call(this,b,c,d)||this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)};c.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack());a.prototype.update.call(this)};c.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=
this.update.bind(this));if(this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;0<=b;b--){var c=a[b];if(c.kind===this.kind_)return c}};c.getMenuCaption=
function(){return this.track_&&this.track_.label?this.track_.label:this.localize(pa(this.kind_))};c.createMenu=function(){this.options_.title=this.getMenuCaption();return a.prototype.createMenu.call(this)};c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var k=new Eg(this.player_,{track:this.track_,cue:b[c]});a.push(k)}return a};return b}(fc);pe.prototype.kind_="chapters";pe.prototype.controlText_="Chapters";C.registerComponent("ChaptersButton",
pe);var qe=function(a){function b(b,c,d){c=a.call(this,b,c,d)||this;var l=b.textTracks(),k=V(Q(c),c.handleTracksChange);l.addEventListener("change",k);c.on("dispose",function(){l.removeEventListener("change",k)});return c}F(b,a);var c=b.prototype;c.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!1,c=0,d=a.length;c<d;c++){var l=a[c];if(l.kind!==this.kind_&&"showing"===l.mode){b=!0;break}}b?this.disable():this.enable()};c.buildCSSClass=function(){return"vjs-descriptions-button "+
a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)};return b}(fc);qe.prototype.kind_="descriptions";qe.prototype.controlText_="Descriptions";C.registerComponent("DescriptionsButton",qe);var re=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+
a.prototype.buildWrapperCSSClass.call(this)};return b}(fc);re.prototype.kind_="subtitles";re.prototype.controlText_="Subtitles";C.registerComponent("SubtitlesButton",re);var se=function(a){function b(b,c){c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};c.selectable=!1;c.name="CaptionSettingsMenuItem";b=a.call(this,b,c)||this;b.addClass("vjs-texttrack-settings");b.controlText(", opens "+c.kind+" settings dialog");return b}F(b,a);b.prototype.handleClick=
function(a){this.player().getChild("textTrackSettings").open()};return b}(xc);C.registerComponent("CaptionSettingsMenuItem",se);var te=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)};c.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||
!this.player().getChild("textTrackSettings")||(b.push(new se(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return a.prototype.createItems.call(this,b)};return b}(fc);te.prototype.kind_="captions";te.prototype.controlText_="Captions";C.registerComponent("CaptionsButton",te);var Fg=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);b.prototype.createEl=function(b,c,d){var l='\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&
(l+='\n        \x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"vjs-control-text"\x3e '+this.localize("Captions")+"\x3c/span\x3e\n      ");return a.prototype.createEl.call(this,b,p({innerHTML:l+"\x3c/span\x3e"},c),d)};return b}(xc);C.registerComponent("SubsCapsMenuItem",Fg);var ue=function(a){function b(b,c){void 0===c&&(c={});b=a.call(this,b,c)||this;b.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(b.player_.language_)&&(b.label_=
"captions");b.menuButton_.controlText(pa(b.label_));return b}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)};c.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new se(this.player_,{kind:this.label_})),this.hideThreshold_+=
1);return b=a.prototype.createItems.call(this,b,Fg)};return b}(fc);ue.prototype.kinds_=["captions","subtitles"];ue.prototype.controlText_="Subtitles";C.registerComponent("SubsCapsButton",ue);var Gg=function(a){function b(b,c){var d=c.track,l=b.audioTracks();c.label=d.label||d.language||"Unknown";c.selected=d.enabled;var k=a.call(this,b,c)||this;k.track=d;k.addClass("vjs-"+d.kind+"-menu-item");var u=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];k.handleTracksChange.apply(Q(k),
b)};l.addEventListener("change",u);k.on("dispose",function(){l.removeEventListener("change",u)});return k}F(b,a);var c=b.prototype;c.createEl=function(b,c,d){var l='\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(l+='\n        \x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"vjs-control-text"\x3e '+this.localize("Descriptions")+"\x3c/span\x3e\n      ");return a.prototype.createEl.call(this,
b,p({innerHTML:l+"\x3c/span\x3e"},c),d)};c.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(b=0;b<c.length;b++){var d=c[b];d.enabled=d===this.track}};c.handleTracksChange=function(a){this.selected(this.track.enabled)};return b}(wc);C.registerComponent("AudioTrackMenuItem",Gg);var Hg=function(a){function b(b,c){void 0===c&&(c={});c.tracks=b.audioTracks();return a.call(this,b,c)||this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-audio-button "+
a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)};c.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++)a.push(new Gg(this.player_,{track:b[c],selectable:!0,multiSelectable:!1}));return a};return b}(oe);Hg.prototype.controlText_="Audio Track";C.registerComponent("AudioTrackButton",Hg);var ve=function(a){function b(b,c){var d=c.rate,l=parseFloat(d,
10);c.label=d;c.selected=1===l;c.selectable=!0;c.multiSelectable=!1;c=a.call(this,b,c)||this;c.label=d;c.rate=l;c.on(b,"ratechange",c.update);return c}F(b,a);var c=b.prototype;c.handleClick=function(b){a.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};c.update=function(a){this.selected(this.player().playbackRate()===this.rate)};return b}(wc);ve.prototype.contentElType="button";C.registerComponent("PlaybackRateMenuItem",ve);var Ig=function(a){function b(b,c){c=a.call(this,b,
c)||this;c.updateVisibility();c.updateLabel();c.on(b,"loadstart",c.updateVisibility);c.on(b,"ratechange",c.updateLabel);return c}F(b,a);var c=b.prototype;c.createEl=function(){var b=a.prototype.createEl.call(this);this.labelEl_=I("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});b.appendChild(this.labelEl_);return b};c.dispose=function(){this.labelEl_=null;a.prototype.dispose.call(this)};c.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=
function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)};c.createMenu=function(){var a=new me(this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;0<=c;c--)a.addChild(new ve(this.player(),{rate:b[c]+"x"}));return a};c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};c.handleClick=function(a){a=this.player().playbackRate();for(var b=this.playbackRates(),c=b[0],d=0;d<b.length;d++)if(b[d]>a){c=b[d];break}this.player().playbackRate(c)};
c.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+
"x")};return b}(ne);Ig.prototype.controlText_="Playback Rate";C.registerComponent("PlaybackRateMenuButton",Ig);var Jg=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)};c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return b}(C);C.registerComponent("Spacer",Jg);var Bj=function(a){function b(){return a.apply(this,arguments)||
this}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)};c.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});b.innerHTML="\u00a0";return b};return b}(Jg);C.registerComponent("CustomControlSpacer",Bj);var dd=function(a){function b(){return a.apply(this,arguments)||this}F(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};
return b}(C);dd.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};"exitPictureInPicture"in b&&dd.prototype.options_.children.splice(dd.prototype.options_.children.length-1,0,"pictureInPictureToggle");C.registerComponent("ControlBar",dd);var Kg=function(a){function b(b,
c){c=a.call(this,b,c)||this;c.on(b,"error",c.open);return c}F(b,a);var c=b.prototype;c.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)};c.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return b}(ac);Kg.prototype.options_=Mc({},ac.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});C.registerComponent("ErrorDisplay",Kg);var Lg=["#000","Black"],Mg=["#00F","Blue"],Ng=["#0FF","Cyan"],Og=["#0F0","Green"],
Pg=["#F0F","Magenta"],Qg=["#F00","Red"],Rg=["#FFF","White"],Sg=["#FF0","Yellow"],we=["1","Opaque"],xe=["0.5","Semi-Transparent"],Tg=["0","Transparent"],Jb={backgroundColor:{selector:".vjs-bg-color \x3e select",id:"captions-background-color-%s",label:"Color",options:[Lg,Rg,Qg,Og,Mg,Sg,Pg,Ng]},backgroundOpacity:{selector:".vjs-bg-opacity \x3e select",id:"captions-background-opacity-%s",label:"Transparency",options:[we,xe,Tg]},color:{selector:".vjs-fg-color \x3e select",id:"captions-foreground-color-%s",
label:"Color",options:[Rg,Lg,Qg,Og,Mg,Sg,Pg,Ng]},edgeStyle:{selector:".vjs-edge-style \x3e select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family \x3e select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],
["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent \x3e select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity \x3e select",id:"captions-foreground-opacity-%s",
label:"Transparency",options:[we,xe]},windowColor:{selector:".vjs-window-color \x3e select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity \x3e select",id:"captions-window-opacity-%s",label:"Transparency",options:[Tg,xe,we]}};Jb.windowColor.options=Jb.backgroundColor.options;var Cj=function(b){function c(a,c){c.temporary=!1;var d=b.call(this,a,c)||this;d.updateDisplay=V(Q(d),d.updateDisplay);d.fill();d.hasBeenOpened_=d.hasBeenFilled_=!0;d.endDialog=I("p",
{className:"vjs-control-text",textContent:d.localize("End of dialog window.")});d.el().appendChild(d.endDialog);d.setDefaults();void 0===c.persistTextTrackSettings&&(d.options_.persistTextTrackSettings=d.options_.playerOptions.persistTextTrackSettings);d.on(d.$(".vjs-done-button"),"click",function(){d.saveSettings();d.close()});d.on(d.$(".vjs-default-button"),"click",function(){d.setDefaults();d.updateDisplay()});f(Jb,function(a){d.on(d.$(a.selector),"change",d.updateDisplay)});d.options_.persistTextTrackSettings&&
d.restoreSettings();return d}F(c,b);var d=c.prototype;d.dispose=function(){this.endDialog=null;b.prototype.dispose.call(this)};d.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b="");void 0===c&&(c="label");a=Jb[a];var l=a.id.replace("%s",this.id_),k=[b,l].join(" ").trim();return["\x3c"+c+' id\x3d"'+l+'" class\x3d"'+("label"===c?"vjs-label":"")+'"\x3e',this.localize(a.label),"\x3c/"+c+"\x3e",'\x3cselect aria-labelledby\x3d"'+k+'"\x3e'].concat(a.options.map(function(a){var b=l+"-"+a[1].replace(/\W+/g,
"");return['\x3coption id\x3d"'+b+'" value\x3d"'+a[0]+'" ','aria-labelledby\x3d"'+k+" "+b+'"\x3e',d.localize(a[1]),"\x3c/option\x3e"].join("")})).concat("\x3c/select\x3e").join("")};d.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['\x3cfieldset class\x3d"vjs-fg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+a+'"\x3e',this.localize("Text"),"\x3c/legend\x3e",this.createElSelect_("color",a),'\x3cspan class\x3d"vjs-text-opacity vjs-opacity"\x3e',this.createElSelect_("textOpacity",
a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};d.createElBgColor_=function(){var a="captions-background-"+this.id_;return['\x3cfieldset class\x3d"vjs-bg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+a+'"\x3e',this.localize("Background"),"\x3c/legend\x3e",this.createElSelect_("backgroundColor",a),'\x3cspan class\x3d"vjs-bg-opacity vjs-opacity"\x3e',this.createElSelect_("backgroundOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};d.createElWinColor_=function(){var a="captions-window-"+this.id_;
return['\x3cfieldset class\x3d"vjs-window-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+a+'"\x3e',this.localize("Window"),"\x3c/legend\x3e",this.createElSelect_("windowColor",a),'\x3cspan class\x3d"vjs-window-opacity vjs-opacity"\x3e',this.createElSelect_("windowOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};d.createElColors_=function(){return I("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};
d.createElFont_=function(){return I("div",{className:"vjs-track-settings-font",innerHTML:['\x3cfieldset class\x3d"vjs-font-percent vjs-track-setting"\x3e',this.createElSelect_("fontPercent","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-edge-style vjs-track-setting"\x3e',this.createElSelect_("edgeStyle","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-font-family vjs-track-setting"\x3e',this.createElSelect_("fontFamily","","legend"),"\x3c/fieldset\x3e"].join("")})};d.createElControls_=
function(){var a=this.localize("restore all settings to the default values");return I("div",{className:"vjs-track-settings-controls",innerHTML:['\x3cbutton type\x3d"button" class\x3d"vjs-default-button" title\x3d"'+a+'"\x3e',this.localize("Reset"),'\x3cspan class\x3d"vjs-control-text"\x3e '+a+"\x3c/span\x3e","\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"vjs-done-button"\x3e'+this.localize("Done")+"\x3c/button\x3e"].join("")})};d.content=function(){return[this.createElColors_(),this.createElFont_(),
this.createElControls_()]};d.label=function(){return this.localize("Caption Settings Dialog")};d.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};d.buildCSSClass=function(){return b.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};d.getValues=function(){var a=this;return m(Jb,function(b,c,d){var l=a.$(c.selector);c=of(l.options[l.options.selectedIndex].value,c.parser);void 0!==c&&(b[d]=c);return b},{})};d.setValues=
function(a){var b=this;f(Jb,function(c,d){var l=b.$(c.selector);d=a[d];c=c.parser;if(d)for(var k=0;k<l.options.length;k++)if(of(l.options[k].value,c)===d){l.selectedIndex=k;break}})};d.setDefaults=function(){var a=this;f(Jb,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})};d.restoreSettings=function(){try{var b=JSON.parse(a.localStorage.getItem("vjs-text-track-settings"))}catch(z){ca.warn(z)}b&&this.setValues(b)};d.saveSettings=function(){if(this.options_.persistTextTrackSettings){var b=
this.getValues();try{Object.keys(b).length?a.localStorage.setItem("vjs-text-track-settings",JSON.stringify(b)):a.localStorage.removeItem("vjs-text-track-settings")}catch(z){ca.warn(z)}}};d.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()};d.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton;a=a&&a.captionsButton;b?b.focus():a&&a.focus()};return c}(ac);C.registerComponent("TextTrackSettings",Cj);
var Dj=function(b){function c(c,d){var l=d.ResizeObserver||a.ResizeObserver;null===d.ResizeObserver&&(l=!1);var k=S({createEl:!l,reportTouchActivity:!1},d);var q=b.call(this,c,k)||this;q.ResizeObserver=d.ResizeObserver||a.ResizeObserver;q.loadListener_=null;q.resizeObserver_=null;q.debouncedHandler_=Ti(function(){q.resizeHandler()},100,!1,Q(q));l?(q.resizeObserver_=new q.ResizeObserver(q.debouncedHandler_),q.resizeObserver_.observe(c.el())):(q.loadListener_=function(){if(q.el_&&q.el_.contentWindow){var a=
q.debouncedHandler_,b=q.unloadListener_=function(){ba(this,"resize",a);ba(this,"unload",b);b=null};ia(q.el_.contentWindow,"unload",b);ia(q.el_.contentWindow,"resize",a)}},q.one("load",q.loadListener_));return q}F(c,b);var d=c.prototype;d.createEl=function(){return b.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};d.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};d.dispose=function(){this.debouncedHandler_&&
this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;b.prototype.dispose.call(this)};return c}(C);C.registerComponent("ResizeManager",Dj);var Ej=function(a){var b=
Math.floor(a.length/2),c=[].concat(a).sort(function(a,b){return a-b});return 0!==a.length%2?c[b]:(c[b-1]+c[b])/2},Fj={trackingThreshold:30},Gj=function(a){function c(c,d){d=S(Fj,d,{createEl:!1});c=a.call(this,c,d)||this;c.reset_();c.on(c.player_,"durationchange",c.handleDurationchange);if(tc&&"hidden"in b&&"visibilityState"in b)c.on(b,"visibilitychange",c.handleVisibilityChange);return c}F(c,a);var d=c.prototype;d.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(b.hidden?this.stopTracking():
this.startTracking())};d.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var a=this.liveCurrentTime(),b=this.player_.currentTime(),c=2*this.seekableIncrement_+.07;return Infinity!==a&&a-c>=b};d.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var a=this.player_.seekable();a&&a.length&&(a=this.seekableEnd(),a!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(a-this.lastSeekEnd_)),3<
this.seekableIncrementList_.length&&(this.seekableIncrement_=Ej(this.seekableIncrementList_))),this.pastSeekEnd_=0,this.lastSeekEnd_=a,this.trigger("seekableendchange")),this.pastSeekEnd()>1.5*this.seekableIncrement_?this.pastSeekEnd_=0:this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange")))};d.handleDurationchange=function(){Infinity===this.player_.duration()&&this.liveWindow()>=this.options_.trackingThreshold?
(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())};d.startTracking=function(){var a=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",
this.handlePlay),this.handleTimeupdate=function(){a.timeupdateSeen_=!0;a.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))};d.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};d.reset_=function(){this.pastSeekEnd_=0;this.behindLiveEdge_=this.lastSeekEnd_=null;this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.seekableIncrementList_=[];this.off(this.player_,"play",
this.trackLive_);this.off(this.player_,"pause",this.trackLive_);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.seekToLiveEdge);this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)};d.stopTracking=function(){this.isTracking()&&this.reset_()};d.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:Infinity};d.seekableStart=
function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0};d.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?Infinity:a-this.seekableStart()};d.isLive=function(){return this.isTracking()};d.atLiveEdge=function(){return!this.behindLiveEdge()};d.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()};d.pastSeekEnd=function(){return this.pastSeekEnd_};d.behindLiveEdge=function(){return this.behindLiveEdge_};
d.isTracking=function(){return"number"===typeof this.trackingInterval_};d.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())};d.dispose=function(){this.stopTracking();a.prototype.dispose.call(this)};return c}(C);C.registerComponent("LiveTracker",Gj);var ye=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;b=a.$$("source");var c=[],d="";if(!b.length)return!1;for(var f=0;f<b.length;f++){var g=
b[f].src;g&&-1===c.indexOf(g)&&c.push(g)}if(!c.length)return!1;1===c.length&&(d=c[0]);a.triggerSourceset(d);return!0},Hj=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(c){var d=b.createElement(this.nodeName.toLowerCase());d.innerHTML=c;for(c=b.createDocumentFragment();d.childNodes.length;)c.appendChild(d.childNodes[0]);this.innerText="";a.Element.prototype.appendChild.call(this,c);return this.innerHTML}}),Ug=function(a,b){for(var c={},d=0;d<
a.length&&!((c=Object.getOwnPropertyDescriptor(a[d],b))&&c.set&&c.get);d++);c.enumerable=!0;c.configurable=!0;return c},Vg=function(b){var c=b.el();if(!c.resetSourceWatch_){var d={},l=Ug([b.el(),a.HTMLMediaElement.prototype,a.Element.prototype,Hj],"innerHTML"),f=function(a){return function(){for(var d=arguments.length,l=Array(d),k=0;k<d;k++)l[k]=arguments[k];d=a.apply(c,l);ye(b);return d}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){c[a]&&(d[a]=c[a],c[a]=f(d[a]))});Object.defineProperty(c,
"innerHTML",S(l,{set:f(l.set)}));c.resetSourceWatch_=function(){c.resetSourceWatch_=null;Object.keys(d).forEach(function(a){c[a]=d[a]});Object.defineProperty(c,"innerHTML",l)};b.one("sourceset",c.resetSourceWatch_)}},Ij=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?lg(a.Element.prototype.getAttribute.call(this,"src")):""},set:function(b){a.Element.prototype.setAttribute.call(this,"src",b);return b}}),Jj=function(b){if(b.featuresSourceset){var c=b.el();if(!c.resetSourceset_){var d=
Ug([b.el(),a.HTMLMediaElement.prototype,Ij],"src"),l=c.setAttribute,f=c.load;Object.defineProperty(c,"src",S(d,{set:function(a){a=d.set.call(c,a);b.triggerSourceset(c.src);return a}}));c.setAttribute=function(a,d){d=l.call(c,a,d);/src/i.test(a)&&b.triggerSourceset(c.src);return d};c.load=function(){var a=f.call(c);ye(b)||(b.triggerSourceset(""),Vg(b));return a};c.currentSrc?b.triggerSourceset(c.currentSrc):ye(b)||Vg(b);c.resetSourceset_=function(){c.resetSourceset_=null;c.load=f;c.setAttribute=l;
Object.defineProperty(c,"src",d);c.resetSourceWatch_&&c.resetSourceWatch_()}}}},ze=function(a,b,c,d){void 0===d&&(d=!0);var l=function(c){return Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0})},k={configurable:!0,enumerable:!0,get:function(){var a=c();l(a);return a}};d&&(k.set=l);return Object.defineProperty(a,b,k)},D=function(c){function d(a,b){b=c.call(this,a,b)||this;var d=a.source,l=!1;d&&(b.el_.currentSrc!==d.src||a.tag&&3===a.tag.initNetworkState_)?b.setSource(d):b.handleLateInit_(b.el_);
a.enableSourceset&&b.setupSourcesetHandling_();if(b.el_.hasChildNodes()){var k=b.el_.childNodes,f=k.length;for(d=[];f--;){var n=k[f];"track"===n.nodeName.toLowerCase()&&(b.featuresNativeTextTracks?(b.remoteTextTrackEls().addTrackElement_(n),b.remoteTextTracks().addTrack(n.track),b.textTracks().addTrack(n.track),l||b.el_.hasAttribute("crossorigin")||!bd(n.src)||(l=!0)):d.push(n))}for(k=0;k<d.length;k++)b.el_.removeChild(d[k])}b.proxyNativeTracks_();b.featuresNativeTextTracks&&l&&ca.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");
b.restoreMetadataTracksInIOSNativePlayer_();(Zb||Xd||cg)&&!0===a.nativeControlsForTouch&&b.setControls(!0);b.proxyWebkitFullscreen_();b.triggerReady();return b}F(d,c);var k=d.prototype;k.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();d.disposeMediaElement(this.el_);this.options_=null;c.prototype.dispose.call(this)};k.setupSourcesetHandling_=function(){Jj(this)};k.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),b,c=function(){b=[];for(var c=
0;c<a.length;c++){var d=a[c];"metadata"===d.kind&&b.push({track:d,storedMode:d.mode})}};c();a.addEventListener("change",c);this.on("dispose",function(){return a.removeEventListener("change",c)});var d=function y(){for(var c=0;c<b.length;c++){var d=b[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}a.removeEventListener("change",y)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",c);a.removeEventListener("change",d);a.addEventListener("change",
d)});this.on("webkitendfullscreen",function(){a.removeEventListener("change",c);a.addEventListener("change",c);a.removeEventListener("change",d)})};k.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+"TracksListeners_"]).forEach(function(a){c.el()[d+"Tracks"].removeEventListener(a,c[d+"TracksListeners_"][a])});this["featuresNative"+a+"Tracks"]=!b;this[d+"TracksListeners_"]=null;this.proxyNativeTracksForType_(d)}};
k.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)};k.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};k.proxyNativeTracksForType_=function(a){var b=this,c=Qa[a],d=this.el()[c.getterName],l=this[c.getterName]();if(this["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var k={change:function(c){c={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(c);"text"===a&&b[dc.remoteText.getterName]().trigger(c)},addtrack:function(a){l.addTrack(a.track)},
removetrack:function(a){l.removeTrack(a.track)}},n=function(){for(var a=[],b=0;b<l.length;b++){for(var c=!1,n=0;n<d.length;n++)if(d[n]===l[b]){c=!0;break}c||a.push(l[b])}for(;a.length;)l.removeTrack(a.shift())};this[c.getterName+"Listeners_"]=k;Object.keys(k).forEach(function(a){var c=k[a];d.addEventListener(a,c);b.on("dispose",function(b){return d.removeEventListener(a,c)})});this.on("loadstart",n);this.on("dispose",function(a){return b.off("loadstart",n)})}};k.proxyNativeTracks_=function(){var a=
this;Qa.names.forEach(function(b){a.proxyNativeTracksForType_(b)})};k.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a);d.disposeMediaElement(a);a=c}else a=b.createElement("video"),c=this.options_.tag&&aa(this.options_.tag),c=S({},c),Zb&&!0===this.options_.nativeControlsForTouch||delete c.controls,oa(a,p(c,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=
this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);c=["loop","muted","playsinline","autoplay"];for(var k=0;k<c.length;k++){var f=c[k],q=this.options_[f];"undefined"!==typeof q&&(q?a.setAttribute(f,f):a.removeAttribute(f),a[f]=q)}return a};k.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};this.on("loadedmetadata",
d);this.ready(function(){this.off("loadstart",c);this.off("loadedmetadata",d);b||this.trigger("loadstart")})}else{var l=["loadstart"];l.push("loadedmetadata");2<=a.readyState&&l.push("loadeddata");3<=a.readyState&&l.push("canplay");4<=a.readyState&&l.push("canplaythrough");this.ready(function(){l.forEach(function(a){this.trigger(a)},this)})}};k.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(z){ca(z,"Video is not ready. (Video.js)")}};k.duration=function(){var a=this;return Infinity===
this.el_.duration&&xb&&lb&&0===this.el_.currentTime?(this.on("timeupdate",function N(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",N))}),NaN):this.el_.duration||NaN};k.width=function(){return this.el_.offsetWidth};k.height=function(){return this.el_.offsetHeight};k.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in
this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",c);this.on("dispose",function(){a.off("webkitbeginfullscreen",c);a.off("webkitendfullscreen",b)})}};k.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var b=a.navigator&&a.navigator.userAgent||"";if(/Android/.test(b)||!/Chrome|Mac OS X 10.5/.test(b))return!0}return!1};k.enterFullScreen=
function(){var a=this.el_;a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){a.pause();a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()};k.exitFullScreen=function(){this.el_.webkitExitFullScreen()};k.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};k.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};k.reset=function(){d.resetMediaElement(this.el_)};k.currentSrc=function(){return this.currentSource_?this.currentSource_.src:
this.el_.currentSrc};k.setControls=function(a){this.el_.controls=!!a};k.addTextTrack=function(a,b,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,b,d):c.prototype.addTextTrack.call(this,a,b,d)};k.createRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,a);var d=b.createElement("track");a.kind&&(d.kind=a.kind);a.label&&(d.label=a.label);if(a.language||a.srclang)d.srclang=a.language||a.srclang;a["default"]&&(d["default"]=
a["default"]);a.id&&(d.id=a.id);a.src&&(d.src=a.src);return d};k.addRemoteTextTrack=function(a,b){a=c.prototype.addRemoteTextTrack.call(this,a,b);this.featuresNativeTextTracks&&this.el().appendChild(a);return a};k.removeRemoteTextTrack=function(a){c.prototype.removeRemoteTextTrack.call(this,a);if(this.featuresNativeTextTracks)for(var b=this.$$("track"),d=b.length;d--;)a!==b[d]&&a!==b[d].track||this.el().removeChild(b[d])};k.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();
var b={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(b.droppedVideoFrames=this.el().webkitDroppedFrameCount,b.totalVideoFrames=this.el().webkitDecodedFrameCount);a.performance&&"function"===typeof a.performance.now?b.creationTime=a.performance.now():a.performance&&a.performance.timing&&"number"===typeof a.performance.timing.navigationStart&&(b.creationTime=a.Date.now()-a.performance.timing.navigationStart);return b};return d}(R);
ze(D,"TEST_VID",function(){if(v()){var a=b.createElement("video"),c=b.createElement("track");c.kind="captions";c.srclang="en";c.label="English";a.appendChild(c);return a}});D.isSupported=function(){try{D.TEST_VID.volume=.5}catch(B){return!1}return!(!D.TEST_VID||!D.TEST_VID.canPlayType)};D.canPlayType=function(a){return D.TEST_VID.canPlayType(a)};D.canPlaySource=function(a,b){return D.canPlayType(a.type)};D.canControlVolume=function(){try{var a=D.TEST_VID.volume;D.TEST_VID.volume=a/2+.1;return a!==
D.TEST_VID.volume}catch(u){return!1}};D.canMuteVolume=function(){try{var a=D.TEST_VID.muted;D.TEST_VID.muted=!a;D.TEST_VID.muted?D.TEST_VID.setAttribute("muted","muted"):D.TEST_VID.removeAttribute("muted");return a!==D.TEST_VID.muted}catch(u){return!1}};D.canControlPlaybackRate=function(){if(xb&&lb&&58>eg)return!1;try{var a=D.TEST_VID.playbackRate;D.TEST_VID.playbackRate=a/2+.1;return a!==D.TEST_VID.playbackRate}catch(u){return!1}};D.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(b.createElement("video"),
"src",{get:a,set:a});Object.defineProperty(b.createElement("audio"),"src",{get:a,set:a});Object.defineProperty(b.createElement("video"),"innerHTML",{get:a,set:a});Object.defineProperty(b.createElement("audio"),"innerHTML",{get:a,set:a})}catch(u){return!1}return!0};D.supportsNativeTextTracks=function(){return Yd||Pa&&lb};D.supportsNativeVideoTracks=function(){return!(!D.TEST_VID||!D.TEST_VID.videoTracks)};D.supportsNativeAudioTracks=function(){return!(!D.TEST_VID||!D.TEST_VID.audioTracks)};D.Events=
"loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],
["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var b=a[1];ze(D.prototype,a[0],function(){return D[b]()},!0)});D.prototype.movingMediaElementInDOM=!Pa;D.prototype.featuresFullscreenResize=!0;D.prototype.featuresProgressEvents=!0;D.prototype.featuresTimeupdateEvents=!0;var ed;D.patchCanPlayType=function(){4<=Ud&&!dg&&!lb&&(ed=D.TEST_VID&&D.TEST_VID.constructor.prototype.canPlayType,D.TEST_VID.constructor.prototype.canPlayType=function(a){var b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;
return a&&b.test(a)?"maybe":ed.call(this,a)})};D.unpatchCanPlayType=function(){var a=D.TEST_VID.constructor.prototype.canPlayType;ed&&(D.TEST_VID.constructor.prototype.canPlayType=ed);return a};D.patchCanPlayType();D.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(u){}}};D.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),
c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(l){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(a){D.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){D.prototype["set"+pa(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(a){D.prototype[a]=
function(){return this.el_[a]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(a){D.prototype["set"+pa(a)]=function(b){this.el_[a]=b}});["pause","load","play"].forEach(function(a){D.prototype[a]=function(){return this.el_[a]()}});R.withSourceHandlers(D);D.nativeSourceHandler={};D.nativeSourceHandler.canPlayType=function(a){try{return D.TEST_VID.canPlayType(a)}catch(u){return""}};D.nativeSourceHandler.canHandleSource=function(a,b){return a.type?D.nativeSourceHandler.canPlayType(a.type):
a.src?(a=ee(a.src),D.nativeSourceHandler.canPlayType("video/"+a)):""};D.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)};D.nativeSourceHandler.dispose=function(){};D.registerSourceHandler(D.nativeSourceHandler);R.registerTech("Html5",D);var Wg="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Ae={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Be="tiny xsmall small medium large xlarge huge".split(" "),
fd={};Be.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;fd[a]="vjs-layout-"+b});var Kj={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},ua=function(c){function d(a,k,f){a.id=a.id||k.id||"vjs_video_"+ub++;k=p(d.getTagSettings(a),k);k.initChildren=!1;k.createEl=!1;k.evented=!1;k.reportTouchActivity=!1;if(!k.language)if("function"===typeof a.closest){var l=a.closest("[lang]");l&&l.getAttribute&&(k.language=l.getAttribute("lang"))}else for(l=a;l&&1===
l.nodeType;){if(aa(l).hasOwnProperty("lang")){k.language=l.getAttribute("lang");break}l=l.parentNode}var q=c.call(this,null,k,f)||this;q.boundDocumentFullscreenChange_=V(Q(q),q.documentFullscreenChange_);q.boundFullWindowOnEscKey_=V(Q(q),q.fullWindowOnEscKey);q.isFullscreen_=!1;q.log=Sf(q.id_);q.fsApi_=Zd;q.isPosterFromTech_=!1;q.queuedCallbacks_=[];q.isReady_=!1;q.hasStarted_=!1;q.userActive_=!1;if(!q.options_||!q.options_.techOrder||!q.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
q.tag=a;q.tagAttributes=a&&aa(a);q.language(q.options_.language);if(k.languages){var u={};Object.getOwnPropertyNames(k.languages).forEach(function(a){u[a.toLowerCase()]=k.languages[a]});q.languages_=u}else q.languages_=d.prototype.options_.languages;q.resetCache_();q.poster_=k.poster||"";q.controls_=!!k.controls;a.controls=!1;a.removeAttribute("controls");q.changingSrc_=!1;q.playCallbacks_=[];q.playTerminatedQueue_=[];a.hasAttribute("autoplay")?q.autoplay(!0):q.autoplay(q.options_.autoplay);k.plugins&&
Object.keys(k.plugins).forEach(function(a){if("function"!==typeof q[a])throw Error('plugin "'+a+'" does not exist');});q.scrubbing_=!1;q.el_=q.createEl();ib(Q(q),{eventBusKey:"el_"});q.fsApi_.requestFullscreen&&(ia(b,q.fsApi_.fullscreenchange,q.boundDocumentFullscreenChange_),q.on(q.fsApi_.fullscreenchange,q.boundDocumentFullscreenChange_));if(q.fluid_)q.on("playerreset",q.updateStyleEl_);f=S(q.options_);k.plugins&&Object.keys(k.plugins).forEach(function(a){q[a](k.plugins[a])});q.options_.playerOptions=
f;q.middleware_=[];q.initChildren();q.isAudio("audio"===a.nodeName.toLowerCase());q.controls()?q.addClass("vjs-controls-enabled"):q.addClass("vjs-controls-disabled");q.el_.setAttribute("role","region");q.isAudio()?q.el_.setAttribute("aria-label",q.localize("Audio Player")):q.el_.setAttribute("aria-label",q.localize("Video Player"));q.isAudio()&&q.addClass("vjs-audio");q.flexNotSupported_()&&q.addClass("vjs-no-flex");Zb&&q.addClass("vjs-touch-enabled");Pa||q.addClass("vjs-workinghover");d.players[q.id_]=
Q(q);q.addClass("vjs-v7");q.userActive(!0);q.reportUserActivity();q.one("play",q.listenForUserActivity_);q.on("stageclick",q.handleStageClick_);q.on("keydown",q.handleKeyDown);q.breakpoints(q.options_.breakpoints);q.responsive(q.options_.responsive);return q}F(d,c);var k=d.prototype;k.dispose=function(){var a=this;this.trigger("dispose");this.off("dispose");ba(b,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);ba(b,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&
(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);d.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Dd[this.id()]=null;ya.names.forEach(function(b){(b=a[ya[b].getterName]())&&b.off&&b.off()});c.prototype.dispose.call(this)};k.createEl=function(){var d=
this.tag,k=this.playerElIngest_=d.parentNode&&d.parentNode.hasAttribute&&d.parentNode.hasAttribute("data-vjs-player"),f="video-js"===this.tag.tagName.toLowerCase();if(k)var u=this.el_=d.parentNode;else f||(u=this.el_=c.prototype.createEl.call(this,"div"));var q=aa(d);if(f){u=this.el_=d;for(d=this.tag=b.createElement("video");u.children.length;)d.appendChild(u.firstChild);ha(u,"video-js")||L(u,"video-js");u.appendChild(d);k=this.playerElIngest_=u;Object.keys(u).forEach(function(a){try{d[a]=u[a]}catch(va){}})}d.setAttribute("tabindex",
"-1");q.tabindex="-1";if(tc||lb&&fg)d.setAttribute("role","application"),q.role="application";d.removeAttribute("width");d.removeAttribute("height");"width"in q&&delete q.width;"height"in q&&delete q.height;Object.getOwnPropertyNames(q).forEach(function(a){f&&"class"===a||u.setAttribute(a,q[a]);f&&d.setAttribute(a,q[a])});d.playerId=d.id;d.id+="_html5_api";d.className="vjs-tech";d.player=u.player=this;this.addClass("vjs-paused");if(!0!==a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Vf("vjs-styles-dimensions");
var y=vb(".vjs-styles-defaults"),n=vb("head");n.insertBefore(this.styleEl_,y?y.nextSibling:n.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);y=d.getElementsByTagName("a");for(n=0;n<y.length;n++){var x=y.item(n);L(x,"vjs-hidden");x.setAttribute("hidden","hidden")}d.initNetworkState_=d.networkState;d.parentNode&&!k&&d.parentNode.insertBefore(u,
d);H(d,u);this.children_.unshift(d);this.el_.setAttribute("lang",this.language_);return this.el_=u};k.width=function(a){return this.dimension("width",a)};k.height=function(a){return this.dimension("height",a)};k.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)this[c]=void 0,this.updateStyleEl_();else{var d=parseFloat(b);isNaN(d)?ca.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,this.updateStyleEl_())}};k.fluid=function(a){if(void 0===a)return!!this.fluid_;
this.fluid_=!!a;Eb(this)&&this.off("playerreset",this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),Ui(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};k.fill=function(a){if(void 0===a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};k.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};k.updateStyleEl_=function(){if(!0===a.VIDEOJS_NO_DYNAMIC_STYLE){var b="number"===typeof this.width_?this.width_:this.options_.width,c="number"===typeof this.height_?this.height_:this.options_.height,d=this.tech_&&this.tech_.el();d&&(0<=b&&(d.width=b),0<=c&&(d.height=c))}else{b=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var k=b[1]/
b[0];b=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/k:this.videoWidth()||300;c=void 0!==this.height_?this.height_:b*k;d=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(d);Wf(this.styleEl_,"\n      ."+d+" {\n        width: "+b+"px;\n        height: "+c+"px;\n      }\n\n      ."+d+".vjs-fluid {\n        padding-top: "+100*k+"%;\n      }\n    ")}};k.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=pa(a),l=a.charAt(0).toLowerCase()+
a.slice(1);"Html5"!==d&&this.tag&&(R.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=d;this.isReady_=!1;var k="string"===typeof this.autoplay()?!1:this.autoplay(),n={source:b,autoplay:k,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),
playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ya.names.forEach(function(a){a=ya[a];n[a.getterName]=c[a.privateName]});p(n,this.options_[d]);p(n,this.options_[l]);p(n,this.options_[a.toLowerCase()]);this.tag&&(n.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(n.startTime=this.cache_.currentTime);a=R.getTech(a);if(!a)throw Error("No Tech named '"+
d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new a(n);this.tech_.ready(V(this,this.handleTechReady_),!0);hg.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Wg.forEach(function(a){c.on(c.tech_,a,c["handleTech"+pa(a)+"_"])});Object.keys(Ae).forEach(function(a){c.on(c.tech_,a,function(b){if(0===c.tech_.playbackRate()&&c.tech_.seeking())c.queuedCallbacks_.push({callback:c["handleTech"+Ae[a]+"_"].bind(c),event:b});else c["handleTech"+Ae[a]+"_"](b)})});this.on(this.tech_,
"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",
this.handleTechFullscreenChange_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));
this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||H(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};k.unloadTech_=function(){var a=this;ya.names.forEach(function(b){b=ya[b];a[b.privateName]=a[b.getterName]()});this.textTracksJson_=hg.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=
!1};k.tech=function(a){void 0===a&&ca.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");return this.tech_};k.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);
this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};k.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};k.handleTechReady_=
function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};k.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};k.manualAutoplay_=function(a){var b=this;
if(this.tech_&&"string"===typeof a){var c=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(sb(d))return d["catch"](c)};if("any"===a&&!0!==this.muted()){var d=this.play();sb(d)&&(d=d["catch"](c))}else d="muted"===a&&!0!==this.muted()?c():this.play();if(sb(d))return d.then(function(){b.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(c){b.trigger({type:"autoplay-failure",autoplay:a})})}};k.updateSourceCaches_=function(a){void 0===
a&&(a="");var b=a,c="";"string"!==typeof b&&(b=a.src,c=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!c&&(c=lj(this,b));this.cache_.source=S({},a,{src:b,type:c});a=this.cache_.sources.filter(function(a){return a.src&&a.src===b});c=[];for(var d=this.$$("source"),l=[],k=0;k<d.length;k++){var n=aa(d[k]);c.push(n);n.src&&n.src===b&&l.push(n.src)}l.length&&!a.length?this.cache_.sources=c:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=
b};k.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,l=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==d)&&(c=function(){});c(l);a.src||this.tech_.any(["sourceset","loadstart"],function(a){"sourceset"!==a.type&&(a=b.techGet("currentSrc"),b.lastSource_.tech=a,b.updateSourceCaches_(a))})}this.lastSource_={player:this.currentSource().src,
tech:a.src};this.trigger({src:a.src,type:"sourceset"})};k.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};k.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};k.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&
(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};k.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");var b=this.currentTime();this.on("timeupdate",function qa(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",qa))})};k.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};
k.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};k.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};k.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};k.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};k.handleTechFirstPlay_=function(){this.options_.starttime&&(ca.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),
this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};k.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};k.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};k.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};k.handleTechClick_=function(a){ab(a)&&this.controls_&&
(this.paused()?tb(this.play()):this.pause())};k.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,
a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};k.handleTechTap_=function(){this.userActive(!this.userActive())};k.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};k.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};k.handleTechTouchEnd_=function(a){a.preventDefault()};k.handleStageClick_=function(){this.reportUserActivity()};k.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};
k.documentFullscreenChange_=function(a){a=a.target.player;if(!a||a===this){a=this.el();var c=b[this.fsApi_.fullscreenElement]===a;!c&&a.matches?c=a.matches(":"+this.fsApi_.fullscreen):!c&&a.msMatchesSelector&&(c=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(c)}};k.handleTechFullscreenChange_=function(a,b){b&&this.isFullscreen(b.isFullscreen)};k.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};
k.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)};k.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)};k.handleTechError_=function(){var a=this.tech_.error();this.error(a)};k.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};k.getCache=function(){return this.cache_};k.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,
lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};k.techCall_=function(a,b){this.ready(function(){if(a in jj)return this.tech_[a](this.middleware_.reduce(Cd(a),b));if(a in rg)return mf(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(N){throw ca(N),N;}},!0)};k.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in ij){var b=this.tech_;return this.middleware_.reduceRight(Cd(a),b[a]())}if(a in rg)return mf(this.middleware_,
this.tech_,a);try{return this.tech_[a]()}catch(N){if(void 0===this.tech_[a])throw ca("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",N),N;if("TypeError"===N.name)throw ca("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",N),this.tech_.isReady_=!1,N;ca(N);throw N;}}};k.play=function(){var b=this,c=this.options_.Promise||a.Promise;return c?new c(function(a){b.play_(a)}):this.play_()};k.play_=function(a){var b=this;void 0===a&&(a=tb);this.playCallbacks_.push(a);
a=!(this.changingSrc_||!this.src()&&!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!Yd&&!Pa||this.load())};k.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(a){a()})};
k.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];b.forEach(function(b){b(a)})};k.pause=function(){this.techCall_("pause")};k.paused=function(){return!1===this.techGet_("paused")?!1:!0};k.played=function(){return this.techGet_("played")||Va(0,0)};k.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};k.currentTime=function(a){if("undefined"!==
typeof a)0>a&&(a=0),this.techCall_("setCurrentTime",a);else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};k.duration=function(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))};k.remainingTime=function(){return this.duration()-this.currentTime()};
k.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};k.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=Va(0,0));return a};k.bufferedPercent=function(){return mc(this.buffered(),this.duration())};k.bufferedEnd=function(){var a=this.buffered(),b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a};k.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);
else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};k.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};k.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1};k.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};k.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};k.isFullscreen=function(a){if(void 0!==
a){var b=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_};k.requestFullscreen=function(a){var b=this;if(!this.fsApi_.prefixed){var c=this.options_.fullscreen&&this.options_.fullscreen.options||{};void 0!==a&&(c=a)}if(this.fsApi_.requestFullscreen)return(a=this.el_[this.fsApi_.requestFullscreen](c))&&a.then(function(){return b.isFullscreen(!0)},function(){return b.isFullscreen(!1)}),
a;this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()};k.exitFullscreen=function(){var a=this;if(this.fsApi_.requestFullscreen){var c=b[this.fsApi_.exitFullscreen]();c&&c.then(function(){return a.isFullscreen(!1)});return c}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()};k.enterFullWindow=function(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=b.documentElement.style.overflow;ia(b,"keydown",this.boundFullWindowOnEscKey_);
b.documentElement.style.overflow="hidden";L(b.body,"vjs-full-window");this.trigger("enterFullWindow")};k.fullWindowOnEscKey=function(a){U.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};k.exitFullWindow=function(){this.isFullscreen(!1);this.isFullWindow=!1;ba(b,"keydown",this.boundFullWindowOnEscKey_);b.documentElement.style.overflow=this.docOrigOverflow;E(b.body,"vjs-full-window");this.trigger("exitFullWindow")};k.isInPictureInPicture=function(a){if(void 0!==
a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};k.requestPictureInPicture=function(){if("pictureInPictureEnabled"in b)return this.techGet_("requestPictureInPicture")};k.exitPictureInPicture=function(){if("pictureInPictureEnabled"in b)return b.exitPictureInPicture()};k.handleKeyDown=function(a){var b=this.options_.userActions;if(b&&b.hotkeys){var c=this.el_.ownerDocument.activeElement;var d=c.tagName.toLowerCase();if(c.isContentEditable)c=
!0;else{var l="button checkbox hidden radio reset submit".split(" ");c="input"===d?-1===l.indexOf(c.type):-1!==["textarea"].indexOf(d)}c||("function"===typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}};k.handleHotkeys=function(a){var c=this.options_.userActions?this.options_.userActions.hotkeys:{},d=c.fullscreenKey,l=c.muteKey;l=void 0===l?function(a){return U.isEventKey(a,"m")}:l;c=c.playPauseKey;c=void 0===c?function(a){return U.isEventKey(a,"k")||U.isEventKey(a,"Space")}:c;(void 0===
d?function(a){return U.isEventKey(a,"f")}:d).call(this,a)?(a.preventDefault(),a.stopPropagation(),d=C.getComponent("FullscreenToggle"),!1!==b[this.fsApi_.fullscreenEnabled]&&d.prototype.handleClick.call(this,a)):l.call(this,a)?(a.preventDefault(),a.stopPropagation(),C.getComponent("MuteToggle").prototype.handleClick.call(this,a)):c.call(this,a)&&(a.preventDefault(),a.stopPropagation(),C.getComponent("PlayToggle").prototype.handleClick.call(this,a))};k.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<
d.length;c++){b=d[c];var l=R.getTech(b);l||(l=C.getComponent(b));if(!l)ca.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');else if(l.isSupported()&&(b=l.canPlayType(a)))return b}return""};k.selectSource=function(a){var b=this,c=this.options_.techOrder.map(function(a){return[a,R.getTech(a)]}).filter(function(a){var b=a[0];if(a=a[1])return a.isSupported();ca.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');return!1}),d=function(a,
b,c){var d;a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})});return d},l=function(a){return function(b,c){return a(c,b)}},k=function(a,c){var d=a[0];if(a[1].canPlaySource(c,b.options_[d.toLowerCase()]))return{source:c,tech:d}};return(this.options_.sourceOrder?d(a,c,l(k)):d(c,a,k))||!1};k.src=function(a){var b=this;if("undefined"===typeof a)return this.cache_.src||"";var c=mj(a);c.length?(this.changingSrc_=!0,this.cache_.sources=c,this.updateSourceCaches_(c[0]),oi(this,c[0],function(a,
d){b.middleware_=d;b.cache_.sources=c;b.updateSourceCaches_(a);if(b.src_(a)){if(1<c.length)return b.src(c.slice(1));b.changingSrc_=!1;b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);b.triggerReady()}else pi(d,b.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};k.src_=function(a){var b=this,c=this.selectSource([a]);if(!c)return!0;if(!Vi(c.tech,this.techName_))return this.changingSrc_=
!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1};k.load=function(){this.techCall_("load")};k.reset=function(){var b=this,c=this.options_.Promise||a.Promise;this.paused()||!c?this.doReset_():(c=this.play(),tb(c.then(function(){return b.doReset_()})))};k.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");
this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();Eb(this)&&this.trigger("playerreset")};k.resetControlBarUI_=function(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};k.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay;a=a.remainingTimeDisplay;b&&b.updateContent();a&&a.updateContent()};k.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());
this.handleTechRateChange_()};k.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};k.currentSources=function(){var a=this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||b};k.currentSource=function(){return this.cache_.source||{}};k.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};k.currentType=function(){return this.currentSource()&&this.currentSource().type||""};k.preload=function(a){if(void 0!==a)this.techCall_("setPreload",
a),this.options_.preload=a;else return this.techGet_("preload")};k.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=a;this.manualAutoplay_(a);var b=!1}else this.options_.autoplay=a?!0:!1;b="undefined"===typeof b?this.options_.autoplay:b;this.tech_&&this.techCall_("setAutoplay",b)};k.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};
k.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};k.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};k.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=
!0,this.trigger("posterchange"))}};k.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),
this.usingNativeControls()||this.removeTechControlsListeners_()))};k.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};k.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var b=
function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],b);this.one("loadstart",function(){this.off(["click","touchstart"],b)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new ja(a),this.addClass("vjs-error"),ca.error("(CODE:"+this.error_.code+" "+ja.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};k.reportUserActivity=function(a){this.userActivity_=
!0};k.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(a){a.stopPropagation();a.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};k.listenForUserActivity_=function(){var a,
b,c,d=V(this,this.reportUserActivity),k=function(b){d();this.clearInterval(a)};this.on("mousedown",function(){d();this.clearInterval(a);a=this.setInterval(d,250)});this.on("mousemove",function(a){if(a.screenX!==b||a.screenY!==c)b=a.screenX,c=a.screenY,d()});this.on("mouseup",k);this.on("mouseleave",k);!(k=this.getChild("controlBar"))||Pa||xb||(k.on("mouseenter",function(a){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),
k.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",d);this.on("keyup",d);var f;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(f);var a=this.options_.inactivityTimeout;0>=a||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)};k.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&
this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};k.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};k.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};k.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)};k.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,
b)};k.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a.track;b||(b=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(b)};k.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};k.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};k.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};k.language=function(a){if(void 0===a)return this.language_;this.language_=String(a).toLowerCase()};
k.languages=function(){return S(d.prototype.options_.languages,this.languages_)};k.toJSON=function(){var a=S(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=S(d);d.player=void 0;a.tracks[c]=d}return a};k.createModal=function(a,b){var c=this;b=b||{};b.content=a||"";var d=new ac(this,b);this.addChild(d);d.on("dispose",function(){c.removeChild(d)});d.open();return d};k.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),
c=0;c<Be.length;c++){var d=Be[c];if(b<=this.breakpoints_[d]){if(a===d)break;a&&this.removeClass(fd[a]);this.addClass(fd[d]);this.breakpoint_=d;break}}};k.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};k.breakpoints=function(a){if(void 0===a)return p(this.breakpoints_);this.breakpoint_="";this.breakpoints_=p({},Kj,a);this.updateCurrentBreakpoint_();return p(this.breakpoints_)};k.responsive=function(a){if(void 0===a)return this.responsive_;
a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a};k.currentBreakpoint=function(){return this.breakpoint_};k.currentBreakpointClass=function(){return fd[this.breakpoint_]||""};k.loadMedia=function(a,b){var c=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=S(a);a=this.cache_.media;var d=a.poster,k=a.src,
l=a.textTracks;!a.artwork&&d&&(this.cache_.media.artwork=[{src:d,type:Pc(d)}]);k&&this.src(k);d&&this.poster(d);Array.isArray(l)&&l.forEach(function(a){return c.addRemoteTextTrack(a,!1)});this.ready(b)}};k.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),c=Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}});b={src:b,textTracks:c};a&&(b.poster=a,b.artwork=[{src:b.poster,type:Pc(b.poster)}]);
return b}return S(this.cache_.media)};d.getTagSettings=function(a){var b={sources:[],tracks:[]},c=aa(a),d=c["data-setup"];ha(a,"vjs-fill")&&(c.fill=!0);ha(a,"vjs-fluid")&&(c.fluid=!0);if(null!==d){var k=null;try{var l=JSON.parse(d||"{}",void 0)}catch(n){k=n}l=[k,l];d=l[0];l=l[1];d&&ca.error(d);p(c,l)}p(b,c);if(a.hasChildNodes())for(a=a.childNodes,c=0,d=a.length;c<d;c++)l=a[c],k=l.nodeName.toLowerCase(),"source"===k?b.sources.push(aa(l)):"track"===k&&b.tracks.push(aa(l));return b};k.flexNotSupported_=
function(){var a=b.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};return d}(C);ya.names.forEach(function(a){var b=ya[a];ua.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});ua.players={};var yc=a.navigator;ua.prototype.options_={techOrder:R.defaultTechOrder_,html5:{},flash:{},
inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:yc&&(yc.languages&&yc.languages[0]||yc.userLanguage||yc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(a){ua.prototype[a]=
function(){return this.techGet_(a)}});Wg.forEach(function(a){ua.prototype["handleTech"+pa(a)+"_"]=function(){return this.trigger(a)}});C.registerComponent("Player",ua);var Xg=d(function(a){function b(c,d){a.exports=b=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return b(c,d)}a.exports=b}),Lj=function(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,
[],function(){})),!0}catch(B){return!1}},Mj=d(function(a){function b(c,d,f){Lj()?a.exports=b=Reflect.construct:a.exports=b=function(a,b,c){var d=[null];d.push.apply(d,b);a=new (Function.bind.apply(a,d));c&&Xg(a,c.prototype);return a};return b.apply(null,arguments)}a.exports=b}),mb={},gd=function(a){return mb.hasOwnProperty(a)?mb[a]:void 0},hd=function(a,b,c){c=(c?"before":"")+"pluginsetup";a.trigger(c,b);a.trigger(c+":"+b.name,b)},Nj=function(a,b){var c=function(){hd(this,{name:a,plugin:b,instance:null},
!0);var c=b.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[a]=!0;hd(this,{name:a,plugin:b,instance:c});return c};Object.keys(b).forEach(function(a){c[a]=b[a]});return c},Yg=function(a,b){b.prototype.name=a;return function(){hd(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var u=Mj(b,[this].concat(d));this[a]=function(){return u};hd(this,u.getEventHash());return u}},db=function(){function a(b){if(this.constructor===
a)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;ib(this);delete this.trigger;Cb(this,this.constructor.defaultState);var c=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[c]=!0;this.dispose=V(this,this.dispose);b.on("dispose",this.dispose)}var b=a.prototype;b.version=function(){return this.constructor.VERSION};b.getEventHash=function(a){void 0===a&&(a={});a.name=this.name;a.plugin=this.constructor;a.instance=this;return a};b.trigger=function(a,
b){void 0===b&&(b={});return Z(this.eventBusEl_,a,this.getEventHash(b))};b.handleStateChanged=function(a){};b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose");this.off();b.off("dispose",this.dispose);b.activePlugins_[a]=!1;this.player=this.state=null;b[a]=Yg(a,mb[a])};a.isBasic=function(b){b="string"===typeof b?gd(b):b;return"function"===typeof b&&!a.prototype.isPrototypeOf(b.prototype)};a.registerPlugin=function(b,c){if("string"!==typeof b)throw Error('Illegal plugin name, "'+
b+'", must be a string, was '+typeof b+".");if(mb.hasOwnProperty(b))ca.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(ua.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!==typeof c)throw Error('Illegal plugin for "'+b+'", must be a function, was '+typeof c+".");mb[b]=c;"plugin"!==b&&(a.isBasic(c)?ua.prototype[b]=Nj(b,c):ua.prototype[b]=Yg(b,c));return c};
a.deregisterPlugin=function(a){if("plugin"===a)throw Error("Cannot de-register base plugin.");mb.hasOwnProperty(a)&&(delete mb[a],delete ua.prototype[a])};a.getPlugins=function(a){void 0===a&&(a=Object.keys(mb));var b;a.forEach(function(a){var c=gd(a);c&&(b=b||{},b[a]=c)});return b};a.getPluginVersion=function(a){return(a=gd(a))&&a.VERSION||""};return a}();db.getPlugin=gd;db.BASE_PLUGIN_NAME="plugin";db.registerPlugin("plugin",db);ua.prototype.usingPlugin=function(a){return!!this.activePlugins_&&
!0===this.activePlugins_[a]};ua.prototype.hasPlugin=function(a){return!!mb.hasOwnProperty(a)};var Oj=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&Xg(a,b)},pf=function(a){return 0===a.indexOf("#")?a.slice(1):a};w.hooks_={};w.hooks=function(a,b){w.hooks_[a]=w.hooks_[a]||[];b&&(w.hooks_[a]=w.hooks_[a].concat(b));return w.hooks_[a]};
w.hook=function(a,b){w.hooks(a,b)};w.hookOnce=function(a,b){w.hooks(a,[].concat(b).map(function(b){return function z(){w.removeHook(a,z);return b.apply(void 0,arguments)}}))};w.removeHook=function(a,b){b=w.hooks(a).indexOf(b);if(-1>=b)return!1;w.hooks_[a]=w.hooks_[a].slice();w.hooks_[a].splice(b,1);return!0};if(!0!==a.VIDEOJS_NO_DYNAMIC_STYLE&&v()){var id=vb(".vjs-styles-defaults");if(!id){id=Vf("vjs-styles-defaults");var Ce=vb("head");Ce&&Ce.insertBefore(id,Ce.firstChild);Wf(id,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}fb(1,
w);w.VERSION="7.7.6";w.options=ua.prototype.options_;w.getPlayers=function(){return ua.players};w.getPlayer=function(a){var b=ua.players;if("string"===typeof a){a=pf(a);var c=b[a];if(c)return c;a=vb("#"+a)}if(A(a)&&(c=a,a=c.player,c=c.playerId,a||b[c]))return a||b[c]};w.getAllPlayers=function(){return Object.keys(ua.players).map(function(a){return ua.players[a]}).filter(Boolean)};w.players=ua.players;w.getComponent=C.getComponent;w.registerComponent=function(a,b){R.isTech(b)&&ca.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");
C.registerComponent.call(C,a,b)};w.getTech=R.getTech;w.registerTech=R.registerTech;w.use=function(a,b){Gb[a]=Gb[a]||[];Gb[a].push(b)};Object.defineProperty(w,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(w.middleware,"TERMINATOR",{value:Oc,writeable:!1,enumerable:!0});w.browser=Yi;w.TOUCH_ENABLED=Zb;w.extend=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};"object"===typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),
d=b):"function"===typeof b&&(c=b);Oj(c,a);a&&(c.super_=a);for(var f in d)d.hasOwnProperty(f)&&(c.prototype[f]=d[f]);return c};w.mergeOptions=S;w.bind=V;w.registerPlugin=db.registerPlugin;w.deregisterPlugin=db.deregisterPlugin;w.plugin=function(a,b){ca.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return db.registerPlugin(a,b)};w.getPlugins=db.getPlugins;w.getPlugin=db.getPlugin;w.getPluginVersion=db.getPluginVersion;w.addLanguage=function(a,b){var c;a=(""+a).toLowerCase();
w.options.languages=S(w.options.languages,(c={},c[a]=b,c));return w.options.languages[a]};w.log=ca;w.createLogger=Sf;w.createTimeRange=w.createTimeRanges=Va;w.formatTime=Rb;w.setFormatTime=function(a){Fd=a};w.resetFormatTime=function(){Fd=ug};w.parseUrl=de;w.isCrossOrigin=bd;w.EventTarget=wa;w.on=ia;w.one=Ua;w.off=ba;w.trigger=Z;w.xhr=Oa;w.TextTrack=uc;w.AudioTrack=og;w.VideoTrack=pg;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(a){w[a]=
function(){ca.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead");return Uf[a].apply(null,arguments)}});w.computedStyle=g;w.dom=Uf;w.url=fj;w.defineLazyProperty=ze;var De=d(function(a,b){(function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,k=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,q={buildAbsoluteURL:function(a,b,c){c=c||{};a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=
q.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=q.normalizePath(c.path);return q.buildURLFromParts(c)}var n=q.parseURL(b);if(!n)throw Error("Error trying to parse relative URL.");if(n.scheme){if(!c.alwaysNormalize)return b;n.path=q.normalizePath(n.path);return q.buildURLFromParts(n)}b=q.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,
netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};n.netLoc||(a.netLoc=b.netLoc,"/"!==n.path[0]&&(n.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+n.path,a.path=q.normalizePath(b)):(a.path=b.path,n.params||(a.params=b.params,n.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?q.normalizePath(n.path):n.path);return q.buildURLFromParts(a)},parseURL:function(a){return(a=c.exec(a))?{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||
"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(k,"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=q})()}),Ee=function(){function a(){this.listeners={}}var b=a.prototype;b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};b.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);
this.listeners[a].splice(b,1);return-1<b};b.trigger=function(a){var b=this.listeners[a],c;if(b)if(2===arguments.length){var d=b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var k=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,k)}};b.dispose=function(){this.listeners={}};b.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),Pj=function(a){function b(){var b=a.call(this)||this;b.buffer="";return b}Hd(b,a);b.prototype.push=function(a){this.buffer+=
a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)};return b}(Ee),zc=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},c=a.length,d;c--;)""!==a[c]&&(d=/([^=]*)=(.*)/.exec(a[c]).slice(1),d[0]=d[0].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1"),b[d[0]]=d[1]);return b},Qj=function(a){function b(){var b=a.call(this)||this;
b.customParsers=[];b.tagMappers=[];return b}Hd(b,a);var c=b.prototype;c.push=function(a){var b=this,c,d;a=a.trim();0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(b,c){c=c(a);return c===a?b:b.concat([c])},[a]).forEach(function(a){for(var k=0;k<b.customParsers.length;k++)if(b.customParsers[k].call(b,a))return;0!==a.indexOf("#EXT")?b.trigger("data",{type:"comment",text:a.slice(1)}):(a=a.replace("\r",""),(c=/^#EXTM3U/.exec(a))?b.trigger("data",{type:"tag",
tagType:"m3u"}):(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))?(d={type:"tag",tagType:"inf"},c[1]&&(d.duration=parseFloat(c[1])),c[2]&&(d.title=c[2]),b.trigger("data",d)):(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"targetduration"},c[1]&&(d.duration=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"totalduration"},c[1]&&(d.duration=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))?
(d={type:"tag",tagType:"version"},c[1]&&(d.version=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"media-sequence"},c[1]&&(d.number=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"discontinuity-sequence"},c[1]&&(d.number=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"playlist-type"},c[1]&&(d.playlistType=
c[1]),b.trigger("data",d)):(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"byterange"},c[1]&&(d.length=parseInt(c[1],10)),c[2]&&(d.offset=parseInt(c[2],10)),b.trigger("data",d)):(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))?(d={type:"tag",tagType:"allow-cache"},c[1]&&(d.allowed=!/NO/.test(c[1])),b.trigger("data",d)):(c=/^#EXT-X-MAP:?(.*)$/.exec(a))?(d={type:"tag",tagType:"map"},c[1]&&(a=zc(c[1]),a.URI&&(d.uri=a.URI),a.BYTERANGE&&(k=a.BYTERANGE.split("@"),a=k[0],k=k[1],
d.byterange={},a&&(d.byterange.length=parseInt(a,10)),k&&(d.byterange.offset=parseInt(k,10)))),b.trigger("data",d)):(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a))?(d={type:"tag",tagType:"stream-inf"},c[1]&&(d.attributes=zc(c[1]),d.attributes.RESOLUTION&&(a=d.attributes.RESOLUTION.split("x"),k={},a[0]&&(k.width=parseInt(a[0],10)),a[1]&&(k.height=parseInt(a[1],10)),d.attributes.RESOLUTION=k),d.attributes.BANDWIDTH&&(d.attributes.BANDWIDTH=parseInt(d.attributes.BANDWIDTH,10)),d.attributes["PROGRAM-ID"]&&(d.attributes["PROGRAM-ID"]=
parseInt(d.attributes["PROGRAM-ID"],10))),b.trigger("data",d)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(d={type:"tag",tagType:"media"},c[1]&&(d.attributes=zc(c[1])),b.trigger("data",d)):(c=/^#EXT-X-ENDLIST/.exec(a))?b.trigger("data",{type:"tag",tagType:"endlist"}):(c=/^#EXT-X-DISCONTINUITY/.exec(a))?b.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(d={type:"tag",tagType:"program-date-time"},c[1]&&(d.dateTimeString=c[1],d.dateTimeObject=new Date(c[1])),
b.trigger("data",d)):(c=/^#EXT-X-KEY:?(.*)$/.exec(a))?(d={type:"tag",tagType:"key"},c[1]&&(d.attributes=zc(c[1]),d.attributes.IV&&("0x"===d.attributes.IV.substring(0,2).toLowerCase()&&(d.attributes.IV=d.attributes.IV.substring(2)),d.attributes.IV=d.attributes.IV.match(/.{8}/g),d.attributes.IV[0]=parseInt(d.attributes.IV[0],16),d.attributes.IV[1]=parseInt(d.attributes.IV[1],16),d.attributes.IV[2]=parseInt(d.attributes.IV[2],16),d.attributes.IV[3]=parseInt(d.attributes.IV[3],16),d.attributes.IV=new Uint32Array(d.attributes.IV))),
b.trigger("data",d)):(c=/^#EXT-X-START:?(.*)$/.exec(a))?(d={type:"tag",tagType:"start"},c[1]&&(d.attributes=zc(c[1]),d.attributes["TIME-OFFSET"]=parseFloat(d.attributes["TIME-OFFSET"]),d.attributes.PRECISE=/YES/.test(d.attributes.PRECISE)),b.trigger("data",d)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-out-cont"},d.data=c[1]?c[1]:"",b.trigger("data",d)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-out"},d.data=c[1]?c[1]:"",b.trigger("data",d)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?
(d={type:"tag",tagType:"cue-in"},d.data=c[1]?c[1]:"",b.trigger("data",d)):b.trigger("data",{type:"tag",data:a.slice(4)}))}))};c.addParser=function(a){var b=this,c=a.expression,d=a.customType,k=a.dataParser,l=a.segment;"function"!==typeof k&&(k=function(a){return a});this.customParsers.push(function(a){if(c.exec(a))return b.trigger("data",{type:"custom",data:k(a),customType:d,segment:l}),!0})};c.addTagMapper=function(a){var b=a.expression,c=a.map;this.tagMappers.push(function(a){return b.test(a)?c(a):
a})};return b}(Ee),Zg=function(b){function c(){var c=b.call(this)||this;c.lineStream=new Pj;c.parseStream=new Qj;c.lineStream.pipe(c.parseStream);var d=Gi(c),k=[],f={},q,u,n=function(){},x={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},K=0;c.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};c.parseStream.on("data",function(b){var c,l;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=b.allowed;"allowed"in b||(this.trigger("info",{message:"defaulting allowCache to YES"}),
this.manifest.allowCache=!0)},byterange:function(){var a={};"length"in b&&(f.byterange=a,a.length=b.length,"offset"in b||(this.trigger("info",{message:"defaulting offset to zero"}),b.offset=0));"offset"in b&&(f.byterange=a,a.offset=b.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=
0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<b.duration&&(f.duration=b.duration);0===b.duration&&(f.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=k},key:function(){if(b.attributes)if("NONE"===b.attributes.METHOD)u=null;else if(b.attributes.URI)if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===b.attributes.KEYFORMAT)if(-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(b.attributes.METHOD))this.trigger("warn",
{message:"invalid key method provided for Widevine"});else if("SAMPLE-AES-CENC"===b.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==b.attributes.URI.substring(0,23))this.trigger("warn",{message:"invalid key URI provided for Widevine"});else if(b.attributes.KEYID&&"0x"===b.attributes.KEYID.substring(0,2)){var c=this.manifest,d={schemeIdUri:b.attributes.KEYFORMAT,keyId:b.attributes.KEYID.substring(2)},n=
b.attributes.URI.split(",")[1];n=a.atob(n||"");for(var k=new Uint8Array(n.length),l=0;l<n.length;l++)k[l]=n.charCodeAt(l);c.contentProtection={"com.widevine.alpha":{attributes:d,pssh:k}}}else this.trigger("warn",{message:"invalid key ID provided for Widevine"});else b.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:b.attributes.METHOD||"AES-128",uri:b.attributes.URI},"undefined"!==typeof b.attributes.IV&&(u.iv=b.attributes.IV);else this.trigger("warn",
{message:"ignoring key declaration without URI"});else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(b.number)?this.manifest.mediaSequence=b.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+b.number})},"discontinuity-sequence":function(){isFinite(b.number)?K=this.manifest.discontinuitySequence=b.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+b.number})},"playlist-type":function(){/VOD|EVENT/.test(b.playlistType)?
this.manifest.playlistType=b.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+b.playlist})},map:function(){q={};b.uri&&(q.uri=b.uri);b.byterange&&(q.byterange=b.byterange)},"stream-inf":function(){this.manifest.playlists=k;this.manifest.mediaGroups=this.manifest.mediaGroups||x;b.attributes?(f.attributes||(f.attributes={}),Gd(f.attributes,b.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||
x;if(b.attributes&&b.attributes.TYPE&&b.attributes["GROUP-ID"]&&b.attributes.NAME){var a=this.manifest.mediaGroups[b.attributes.TYPE];a[b.attributes["GROUP-ID"]]=a[b.attributes["GROUP-ID"]]||{};c=a[b.attributes["GROUP-ID"]];l={"default":/yes/i.test(b.attributes.DEFAULT)};l.autoselect=l["default"]?!0:/yes/i.test(b.attributes.AUTOSELECT);b.attributes.LANGUAGE&&(l.language=b.attributes.LANGUAGE);b.attributes.URI&&(l.uri=b.attributes.URI);b.attributes["INSTREAM-ID"]&&(l.instreamId=b.attributes["INSTREAM-ID"]);
b.attributes.CHARACTERISTICS&&(l.characteristics=b.attributes.CHARACTERISTICS);b.attributes.FORCED&&(l.forced=/yes/i.test(b.attributes.FORCED));c[b.attributes.NAME]=l}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){K+=1;f.discontinuity=!0;this.manifest.discontinuityStarts.push(k.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=b.dateTimeString,this.manifest.dateTimeObject=
b.dateTimeObject);f.dateTimeString=b.dateTimeString;f.dateTimeObject=b.dateTimeObject},targetduration:function(){!isFinite(b.duration)||0>b.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+b.duration}):this.manifest.targetDuration=b.duration},totalduration:function(){!isFinite(b.duration)||0>b.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+b.duration}):this.manifest.totalDuration=b.duration},start:function(){!b.attributes||isNaN(b.attributes["TIME-OFFSET"])?
this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:b.attributes["TIME-OFFSET"],precise:b.attributes.PRECISE}},"cue-out":function(){f.cueOut=b.data},"cue-out-cont":function(){f.cueOutCont=b.data},"cue-in":function(){f.cueIn=b.data}}[b.tagType]||n).call(d)},uri:function(){f.uri=b.uri;k.push(f);!this.manifest.targetDuration||"duration"in f||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),
f.duration=this.manifest.targetDuration);u&&(f.key=u);f.timeline=K;q&&(f.map=q);f={}},comment:function(){},custom:function(){b.segment?(f.custom=f.custom||{},f.custom[b.customType]=b.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[b.customType]=b.data)}})[b.type].call(d)});return c}Hd(c,b);var d=c.prototype;d.push=function(a){this.lineStream.push(a)};d.end=function(){this.lineStream.push("\n")};d.addParser=function(a){this.parseStream.addParser(a)};d.addTagMapper=function(a){this.parseStream.addTagMapper(a)};
return c}(Ee),$g=qf(De),ah=qf(a),Fe=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=$g.buildAbsoluteURL(ah.location&&ah.location.href||"",a));return $g.buildAbsoluteURL(a,b)},bh=a&&"object"===typeof a&&"default"in a?a["default"]:a,Ge=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ch=new RegExp("[\\-\\.0-9"+Ge.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),dh=new RegExp("^"+
Ge.source+ch.source+"*(?::"+Ge.source+ch.source+"*)?$");rf.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument();var k=b,f=b={},u;for(u in k)f[u]=k[u];Hi(a,b,c,d,this.errorHandler);d.endDocument()}};sf.prototype={setTagName:function(a){if(!dh.test(a))throw Error("invalid tagName:"+a);this.tagName=a},add:function(a,b,c){if(!dh.test(a))throw Error("invalid attribute:"+a);this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},
getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};Qc({},Qc.prototype)instanceof Qc||(Qc=function(a,b){function c(){}c.prototype=b;c=new c;for(b in a)c[b]=a[b];return c});var Ea={},cb=Ea.ELEMENT_NODE=1,Vb=Ea.ATTRIBUTE_NODE=2,Vc=Ea.TEXT_NODE=3,Kf=Ea.CDATA_SECTION_NODE=4,Of=Ea.ENTITY_REFERENCE_NODE=5,Rj=Ea.ENTITY_NODE=6,Nf=Ea.PROCESSING_INSTRUCTION_NODE=7,Lf=Ea.COMMENT_NODE=8,Jf=Ea.DOCUMENT_NODE=9,Mf=Ea.DOCUMENT_TYPE_NODE=10,
kb=Ea.DOCUMENT_FRAGMENT_NODE=11,Sj=Ea.NOTATION_NODE=12,za={},ra={};za.INDEX_SIZE_ERR=(ra[1]="Index size error",1);za.DOMSTRING_SIZE_ERR=(ra[2]="DOMString size error",2);var Tj=za.HIERARCHY_REQUEST_ERR=(ra[3]="Hierarchy request error",3);za.WRONG_DOCUMENT_ERR=(ra[4]="Wrong document",4);za.INVALID_CHARACTER_ERR=(ra[5]="Invalid character",5);za.NO_DATA_ALLOWED_ERR=(ra[6]="No data allowed",6);za.NO_MODIFICATION_ALLOWED_ERR=(ra[7]="No modification allowed",7);var Pi=za.NOT_FOUND_ERR=(ra[8]="Not found",
8);za.NOT_SUPPORTED_ERR=(ra[9]="Not supported",9);var eh=za.INUSE_ATTRIBUTE_ERR=(ra[10]="Attribute in use",10);za.INVALID_STATE_ERR=(ra[11]="Invalid state",11);za.SYNTAX_ERR=(ra[12]="Syntax error",12);za.INVALID_MODIFICATION_ERR=(ra[13]="Invalid modification",13);za.NAMESPACE_ERR=(ra[14]="Invalid namespace",14);za.INVALID_ACCESS_ERR=(ra[15]="Invalid access",15);Sb.prototype=Error.prototype;nc(za,Sb);wb.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],
d=0;d<this.length;d++)Ub(this[d],c,a,b);return c.join("")}};oc.prototype.item=function(a){Id(this);return this[a]};Ka(oc,wb);Rc.prototype={length:0,item:wb.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Sb(eh);b=this.getNamedItem(a.nodeName);xf(this._ownerElement,this,a,b);return b},setNamedItemNS:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Sb(eh);
b=this.getNamedItemNS(a.namespaceURI,a.localName);xf(this._ownerElement,this,a,b);return b},removeNamedItem:function(a){a=this.getNamedItem(a);zf(this._ownerElement,this,a);return a},removeNamedItemNS:function(a,b){a=this.getNamedItemNS(a,b);zf(this._ownerElement,this,a);return a},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}};Af.prototype={hasFeature:function(a,b){return(a=this._features[a.toLowerCase()])&&(!b||b in
a)?!0:!1},createDocument:function(a,b,c){var d=new pc;d.implementation=this;d.childNodes=new wb;(d.doctype=c)&&d.appendChild(c);b&&(a=d.createElementNS(a,b),d.appendChild(a));return d},createDocumentType:function(a,b,c){var d=new Nd;d.name=a;d.nodeName=a;d.publicId=b;d.systemId=c;return d}};Da.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,
insertBefore:function(a,b){return Df(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b);b&&this.removeChild(b)},removeChild:function(a){return Cf(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return Qd(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==Vc&&a.nodeType==Vc?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),
a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==Vb?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==Vb?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}};
nc(Ea,Da);nc(Ea,Da.prototype);pc.prototype={nodeName:"#document",nodeType:Jf,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==kb){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b);c=d}return a}null==this.documentElement&&a.nodeType==cb&&(this.documentElement=a);return Df(this,a,b),a.ownerDocument=this,a},removeChild:function(a){this.documentElement==a&&(this.documentElement=null);return Cf(this,a)},importNode:function(a,b){return Pf(this,a,b)},
getElementById:function(a){var b=null;Sc(this.documentElement,function(c){if(c.nodeType==cb&&c.getAttribute("id")==a)return b=c,!0});return b},createElement:function(a){var b=new Tb;b.ownerDocument=this;b.nodeName=a;b.tagName=a;b.childNodes=new wb;return(b.attributes=new Rc)._ownerElement=b},createDocumentFragment:function(){var a=new Uc;a.ownerDocument=this;a.childNodes=new wb;return a},createTextNode:function(a){var b=new Kd;b.ownerDocument=this;b.appendData(a);return b},createComment:function(a){var b=
new Ld;b.ownerDocument=this;b.appendData(a);return b},createCDATASection:function(a){var b=new Md;b.ownerDocument=this;b.appendData(a);return b},createProcessingInstruction:function(a,b){var c=new Pd;c.ownerDocument=this;c.tagName=c.target=a;c.nodeValue=c.data=b;return c},createAttribute:function(a){var b=new Tc;b.ownerDocument=this;b.name=a;b.nodeName=a;b.localName=a;b.specified=!0;return b},createEntityReference:function(a){var b=new Od;b.ownerDocument=this;b.nodeName=a;return b},createElementNS:function(a,
b){var c=new Tb,d=b.split(":"),f=c.attributes=new Rc;c.childNodes=new wb;c.ownerDocument=this;c.nodeName=b;c.tagName=b;c.namespaceURI=a;2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b;return f._ownerElement=c},createAttributeNS:function(a,b){var c=new Tc,d=b.split(":");c.ownerDocument=this;c.nodeName=b;c.name=b;c.namespaceURI=a;c.specified=!0;2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b;return c}};Ka(pc,Da);Tb.prototype={nodeType:cb,hasAttribute:function(a){return null!=this.getAttributeNode(a)},
getAttribute:function(a){return(a=this.getAttributeNode(a))&&a.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){a=this.ownerDocument.createAttribute(a);a.value=a.nodeValue=""+b;this.setAttributeNode(a)},removeAttribute:function(a){(a=this.getAttributeNode(a))&&this.removeAttributeNode(a)},appendChild:function(a){if(a.nodeType===kb)return this.insertBefore(a,null);var b=a.parentNode;b&&b.removeChild(a);b=this.lastChild;a.parentNode=this;a.previousSibling=
b;a.nextSibling=null;b?b.nextSibling=a:this.firstChild=a;this.lastChild=a;Jd(this.ownerDocument,this,a);return a},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){(a=this.getAttributeNodeNS(a,b))&&this.removeAttributeNode(a)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,
b)},getAttributeNS:function(a,b){return(a=this.getAttributeNodeNS(a,b))&&a.value||""},setAttributeNS:function(a,b,c){a=this.ownerDocument.createAttributeNS(a,b);a.value=a.nodeValue=""+c;this.setAttributeNode(a)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new oc(this,function(b){var c=[];Sc(b,function(d){d===b||d.nodeType!=cb||"*"!==a&&d.tagName!=a||c.push(d)});return c})},getElementsByTagNameNS:function(a,b){return new oc(this,
function(c){var d=[];Sc(c,function(k){k===c||k.nodeType!==cb||"*"!==a&&k.namespaceURI!==a||"*"!==b&&k.localName!=b||d.push(k)});return d})}};pc.prototype.getElementsByTagName=Tb.prototype.getElementsByTagName;pc.prototype.getElementsByTagNameNS=Tb.prototype.getElementsByTagNameNS;Ka(Tb,Da);Tc.prototype.nodeType=Vb;Ka(Tc,Da);qc.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){this.nodeValue=this.data=a=this.data+a;this.length=a.length},insertData:function(a,
b){this.replaceData(a,0,b)},appendChild:function(a){throw Error(ra[Tj]);},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){var d=this.data.substring(0,a);a=this.data.substring(a+b);this.nodeValue=this.data=c=d+c+a;this.length=c.length}};Ka(qc,Da);Kd.prototype={nodeName:"#text",nodeType:Vc,splitText:function(a){var b=this.data,c=b.substring(a);this.data=this.nodeValue=b=b.substring(0,a);this.length=b.length;a=this.ownerDocument.createTextNode(c);this.parentNode&&this.parentNode.insertBefore(a,
this.nextSibling);return a}};Ka(Kd,qc);Ld.prototype={nodeName:"#comment",nodeType:Lf};Ka(Ld,qc);Md.prototype={nodeName:"#cdata-section",nodeType:Kf};Ka(Md,qc);Nd.prototype.nodeType=Mf;Ka(Nd,Da);Ef.prototype.nodeType=Sj;Ka(Ef,Da);Ff.prototype.nodeType=Rj;Ka(Ff,Da);Od.prototype.nodeType=Of;Ka(Od,Da);Uc.prototype.nodeName="#document-fragment";Uc.prototype.nodeType=kb;Ka(Uc,Da);Pd.prototype.nodeType=Nf;Ka(Pd,Da);Gf.prototype.serializeToString=function(a,b,c){return Hf.call(a,b,c)};Da.prototype.toString=
Hf;try{if(Object.defineProperty){var Uj=function k(a){switch(a.nodeType){case cb:case kb:var b=[];for(a=a.firstChild;a;)7!==a.nodeType&&8!==a.nodeType&&b.push(k(a)),a=a.nextSibling;return b.join("");default:return a.nodeValue}};Object.defineProperty(oc.prototype,"length",{get:function(){Id(this);return this.$$length}});Object.defineProperty(Da.prototype,"textContent",{get:function(){return Uj(this)},set:function(a){switch(this.nodeType){case cb:case kb:for(;this.firstChild;)this.removeChild(this.firstChild);
(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.nodeValue=this.value=this.data=a}}});vf=function(a,b,c){a["$$"+b]=c}}}catch(B){}var Vj=d(function(a,b){function c(a){this.options=a||{locator:{}}}function d(a,b,c){function d(b){var d=a[b];!d&&k&&(d=2==a.length?function(c){a(b,c)}:a);n[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+g(c))}||function(){}}if(!a){if(b instanceof f)return b;a=b}var n={},k=a instanceof Function;c=c||{};d("warning");d("error");d("fatalError");
return n}function f(){this.cdata=!1}function u(a,b){b.lineNumber=a.lineNumber;b.columnNumber=a.columnNumber}function g(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function q(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function y(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}c.prototype.parseFromString=function(a,b){var c=this.options,k=new n,x=c.domBuilder||new f,l=c.errorHandler,
q=c.locator,u=c.xmlns||{},y={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',apos:"'"};q&&x.setDocumentLocator(q);k.errorHandler=d(l,x,q);k.domBuilder=c.domBuilder||x;/\/x?html?$/.test(b)&&(y.nbsp="\u00a0",y.copy="\u00a9",u[""]="http://www.w3.org/1999/xhtml");u.xml=u.xml||"http://www.w3.org/XML/1998/namespace";a?k.parse(a,u,y):k.errorHandler.error("invalid doc source");return x.doc};f.prototype={startDocument:function(){this.doc=(new x).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},
startElement:function(a,b,c,d){var n=this.doc;b=n.createElementNS(a,c||b);var k=d.length;y(this,b);this.currentElement=b;this.locator&&u(this.locator,b);for(var f=0;f<k;f++){a=d.getURI(f);var x=d.getValue(f);c=d.getQName(f);a=n.createAttributeNS(a,c);this.locator&&u(d.getLocator(f),a);a.value=a.nodeValue=x;b.setAttributeNode(a)}},endElement:function(a,b,c){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,
b){a=this.doc.createProcessingInstruction(a,b);this.locator&&u(this.locator,a);y(this,a)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=q.apply(this,arguments)){var d=this.cdata?this.doc.createCDATASection(a):this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d);this.locator&&u(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){if(this.locator=
a)a.lineNumber=0},comment:function(a,b,c){a=q.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&u(this.locator,d);y(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;d&&d.createDocumentType&&(a=d.createDocumentType(a,b,c),this.locator&&u(this.locator,a),y(this,a))},warning:function(a){console.warn("[xmldom warning]\t"+a,g(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,g(this.locator))},
fatalError:function(a){console.error("[xmldom fatalError]\t"+a,g(this.locator));throw a;}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){f.prototype[a]=function(){return null}});var n=rf,x=b.DOMImplementation=Af;b.XMLSerializer=Gf;b.DOMParser=c}).DOMParser,fh=function(a){return!!a&&"object"===typeof a},Ra=function u(){for(var a=arguments.length,b=Array(a),c=0;c<
a;c++)b[c]=arguments[c];return b.reduce(function(a,b){Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):fh(a[c])&&fh(b[c])?a[c]=u(a[c],b[c]):a[c]=b[c]});return a},{})},Wj=function(a){return Object.keys(a).map(function(b){return a[b]})},jd=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},gh=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},Xj=function(a,b){return a.reduce(function(a,c,d){c[b]&&
a.push(d);return a},[])},Ac=function(a){var b=a.baseUrl,c=a.source;c=void 0===c?"":c;var d=a.range;d=void 0===d?"":d;a=a.indexRange;a=void 0===a?"":a;b={uri:c,resolvedUri:Fe((void 0===b?"":b)||"",c)};if(d||a)d=(d?d:a).split("-"),c=parseInt(d[0],10),d=parseInt(d[1],10),b.byterange={length:d-c+1,offset:c};return b},Yj={"static":function(a){var b=a.timescale;return{start:0,end:Math.ceil(a.sourceDuration/(a.duration/(void 0===b?1:b)))}},dynamic:function(a){var b=a.timescale;b=void 0===b?1:b;var c=a.duration,
d=a.start,f=a.minimumUpdatePeriod,u=a.timeShiftBufferDepth,q=(a.NOW+a.clientOffset)/1E3;a=a.availabilityStartTime+(void 0===d?0:d);return{start:Math.max(0,Math.floor((q-a-(void 0===u?Infinity:u))*b/c)),end:Math.min(Math.ceil((q+(void 0===f?0:f)-a)*b/c),Math.floor((q-a)*b/c))}}},Zj=function(a){return function(b,c){var d=a.duration,f=a.timescale,k=a.startNumber;return{number:(void 0===k?1:k)+b,duration:d/(void 0===f?1:f),timeline:a.periodIndex,time:c*d}}},He=function(a){var b=a.type,c=void 0===b?"static":
b;b=a.duration;var d=a.timescale;d=void 0===d?1:d;var f=a.sourceDuration,g=Yj[c](a),q=g.end,y=[];for(g=g.start;g<q;g++)y.push(g);a=y.map(Zj(a));"static"===c&&(c=a.length-1,a[c].duration=f-b/d*c);return a},hh=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c;c=a.sourceDuration;var f=a.timescale;f=void 0===f?1:f;var g=a.indexRange,q=void 0===g?"":g;g=a.duration;if(!b)throw Error("NO_BASE_URL");d=Ac({baseUrl:b,source:d.sourceURL,range:d.range});b=Ac({baseUrl:b,source:b,indexRange:q});
b.map=d;g?(a=He(a),a.length&&(b.duration=a[0].duration,b.timeline=a[0].timeline)):c&&(b.duration=c/f,b.timeline=0);b.number=0;return[b]},ak=function(a,b,c){var d=a.sidx.map?a.sidx.map:null,f=a.sidx.duration,k=a.timeline||0,l=a.sidx.byterange,y=l.offset+l.length;l=b.timescale;var n=b.references.filter(function(a){return 1!==a.referenceType}),x=[];y+=b.firstOffset;for(var g=0;g<n.length;g++){var u=b.references[g],h=u.referencedSize;u=hh({baseUrl:c,timescale:l,timeline:k,periodIndex:k,duration:u.subsegmentDuration,
sourceDuration:f,indexRange:y+"-"+(y+h-1)})[0];d&&(u.map=d);x.push(u);y+=h}a.segments=x;return a},ih=function(a){return Wj(a.reduce(function(a,b){var c=b.attributes.id+(b.attributes.lang||"");if(a[c]){var d;b.segments[0]&&(b.segments[0].discontinuity=!0);(d=a[c].segments).push.apply(d,b.segments);b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)}else a[c]=b;return a},{})).map(function(a){a.discontinuityStarts=Xj(a.segments,"discontinuity");return a})},
Ie=function(a,b){void 0===b&&(b={});if(!Object.keys(b).length)return a;for(var c in a){var d=a[c];if(d.sidx){var f=d.sidx.byterange;f=d.sidx.uri+"-"+(f.offset+"-"+(f.offset+f.length-1));f=b[f]&&b[f].sidx;d.sidx&&f&&ak(d,f,d.sidx.resolvedUri)}}return a},bk=function(a,b){void 0===b&&(b={});var c;a=a.reduce(function(a,d){var f=d.attributes.role&&d.attributes.role.value||"",k=d.attributes.lang||"",n="main";k&&(n=""+d.attributes.lang+(f?" ("+f+")":""));if(a[n]&&a[n].playlists[0].attributes.BANDWIDTH>d.attributes.bandwidth)return a;
var x,l=d.attributes,g=d.segments,u=d.sidx;g={attributes:(x={NAME:l.id,BANDWIDTH:l.bandwidth,CODECS:l.codecs},x["PROGRAM-ID"]=1,x),uri:"",endList:"static"===(l.type||"static"),timeline:l.periodIndex,resolvedUri:"",targetDuration:l.duration,segments:g,mediaSequence:g.length?g[0].number:1};l.contentProtection&&(g.contentProtection=l.contentProtection);u&&(g.sidx=u);a[n]={language:k,autoselect:!0,"default":"main"===f,playlists:Ie([g],b),uri:""};"undefined"===typeof c&&"main"===f&&(c=d,c["default"]=!0);
return a},{});if(!c){var d=Object.keys(a)[0];a[d]["default"]=!0}return a},ck=function(a,b){void 0===b&&(b={});return a.reduce(function(a,c){var d=c.attributes.lang||"text";if(a[d])return a;var f;var k=c.attributes;c=c.segments;"undefined"===typeof c&&(c=[{uri:k.baseUrl,timeline:k.periodIndex,resolvedUri:k.baseUrl||"",duration:k.sourceDuration,number:0}],k.duration=k.sourceDuration);k={attributes:(f={NAME:k.id,BANDWIDTH:k.bandwidth},f["PROGRAM-ID"]=1,f),uri:"",endList:"static"===(k.type||"static"),
timeline:k.periodIndex,resolvedUri:k.baseUrl||"",targetDuration:k.duration,segments:c,mediaSequence:c.length?c[0].number:1};a[d]={language:d,"default":!1,autoselect:!1,playlists:Ie([k],b),uri:""};return a},{})},dk=function(a){var b,c=a.attributes,d=a.segments;a=a.sidx;d={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",
targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};c.contentProtection&&(d.contentProtection=c.contentProtection);a&&(d.sidx=a);return d},ek=function(a,b){var c;void 0===b&&(b={});if(!a.length)return{};var d=a[0].attributes,f=d.sourceDuration,k=d.type;k=void 0===k?"static":k;var q=d.suggestedPresentationDelay;d=d.minimumUpdatePeriod;var y=void 0===d?0:d,n=ih(a.filter(function(a){a=a.attributes;return"video/mp4"===a.mimeType||"video"===a.contentType})).map(dk);d=ih(a.filter(function(a){a=
a.attributes;return"audio/mp4"===a.mimeType||"audio"===a.contentType}));a=a.filter(function(a){a=a.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType});f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(c={AUDIO:{},VIDEO:{}},c["CLOSED-CAPTIONS"]={},c.SUBTITLES={},c),uri:"",duration:f,playlists:Ie(n,b),minimumUpdatePeriod:1E3*y};"dynamic"===k&&(f.suggestedPresentationDelay=q);d.length&&(f.mediaGroups.AUDIO.audio=bk(d,b));a.length&&(f.mediaGroups.SUBTITLES.subs=
ck(a,b));return f},jh=function(a,b){var c=a.type;c=void 0===c?"static":c;var d=a.minimumUpdatePeriod;d=void 0===d?0:d;var f=a.media;f=void 0===f?"":f;var k=a.sourceDuration,q=a.timescale;q=void 0===q?1:q;var y=a.startNumber;y=void 0===y?1:y;for(var n=a.periodIndex,x=[],g=-1,u=0;u<b.length;u++){var h=b[u],p=h.d,m=h.r||0;h=h.t||0;0>g&&(g=h);h&&h>g&&(g=h);if(0>m)if(m=u+1,m===b.length)if("dynamic"===c&&0<d&&0<f.indexOf("$Number$")){m=a.timescale;h=a.start;var r=a.minimumUpdatePeriod;m=Math.ceil((((a.NOW+
a.clientOffset)/1E3+(void 0===r?0:r)-(a.availabilityStartTime+(void 0===h?0:h)))*(void 0===m?1:m)-g)/p)}else m=(k*q-g)/p;else m=(b[m].t-g)/p;else m+=1;m=y+x.length+m;for(h=y+x.length;h<m;)x.push({number:h,duration:p/q,time:g,timeline:n}),g+=p,h++}return x},kh=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,lh=function(a){return function(b,c,d,f){if("$$"===b)return"$";if("undefined"===typeof a[c])return b;b=""+a[c];if("RepresentationID"===c)return b;f=d?parseInt(f,10):1;return b.length>=f?b:""+Array(f-b.length+
1).join("0")+b}},fk=function(a,b){return a.duration||b?a.duration?He(a):jh(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]},gk=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization;d=void 0===d?{sourceURL:"",range:""}:d;var f=Ac({baseUrl:a.baseUrl,source:d.sourceURL.replace(kh,lh(c)),range:d.range});return fk(a,b).map(function(b){c.Number=b.number;c.Time=b.time;var d=(a.media||"").replace(kh,lh(c));return{uri:d,timeline:b.timeline,
duration:b.duration,resolvedUri:Fe(a.baseUrl||"",d),map:f,number:b.number}})},hk=function(a,b){var c=a.duration,d=a.segmentUrls;d=void 0===d?[]:d;if(!c&&!b||c&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var f=d.map(function(b){var c=a.baseUrl,d=a.initialization;d=void 0===d?{}:d;d=Ac({baseUrl:c,source:d.sourceURL,range:d.range});b=Ac({baseUrl:c,source:b.media,range:b.mediaRange});b.map=d;return b}),k;c&&(k=He(a));b&&(k=jh(a,b));return k.map(function(a,b){if(f[b])return b=f[b],b.timeline=a.timeline,
b.duration=a.duration,b.number=a.number,b}).filter(function(a){return a})},ik=function(a){var b=a.attributes;a=a.segmentInfo;if(a.template){var c=gk;var d=Ra(b,a.template)}else a.base?(c=hh,d=Ra(b,a.base)):a.list&&(c=hk,d=Ra(b,a.list));b={attributes:b};if(!c)return b;c=c(d,a.timeline);if(d.duration){var f=d,g=f.timescale;d.duration=f.duration/(void 0===g?1:g)}else d.duration=c.length?c.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):0;b.attributes=d;b.segments=c;a.base&&d.indexRange&&
(b.sidx=c[0],b.segments=[]);return b},sa=function(a,b){return gh(a.childNodes).filter(function(a){return a.tagName===b})},gc=function(a){a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!a)return 0;a=a.slice(1);var b=a[1],c=a[2],d=a[3],f=a[4],g=a[5];return 31536E3*parseFloat(a[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(c||0)+3600*parseFloat(d||0)+60*parseFloat(f||0)+parseFloat(g||0)},mh={mediaPresentationDuration:function(a){return gc(a)},availabilityStartTime:function(a){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&
(a+="Z");return Date.parse(a)/1E3},minimumUpdatePeriod:function(a){return gc(a)},suggestedPresentationDelay:function(a){return gc(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return gc(a)},start:function(a){return gc(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);
return isNaN(b)?gc(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},Ha=function(a){return a&&a.attributes?gh(a.attributes).reduce(function(a,b){a[b.name]=(mh[b.name]||mh.DEFAULT)(b.value);return a},{}):{}},jk={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready",
"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},kd=function(a,b){return b.length?jd(a.map(function(a){return b.map(function(b){return Fe(a,b.textContent.trim())})})):a},Je=function(a){var b=sa(a,"SegmentTemplate")[0],c=sa(a,"SegmentList")[0],d=c&&sa(c,"SegmentURL").map(function(a){return Ra({tag:"SegmentURL"},Ha(a))});a=sa(a,"SegmentBase")[0];var f=c||b;f=f&&sa(f,"SegmentTimeline")[0];var g=c||a||b;g=g&&sa(g,"Initialization")[0];(b=b&&Ha(b))&&g?b.initialization=g&&Ha(g):b&&
b.initialization&&(b.initialization={sourceURL:b.initialization});var q={template:b,timeline:f&&sa(f,"S").map(function(a){return Ha(a)}),list:c&&Ra(Ha(c),{segmentUrls:d,initialization:Ha(g)}),base:a&&Ra(Ha(a),{initialization:Ha(g)})};Object.keys(q).forEach(function(a){q[a]||delete q[a]});return q},kk=function(a,b,c){return function(d){var f=sa(d,"BaseURL");f=kd(b,f);var k=Ra(a,Ha(d)),q=Je(d);return f.map(function(a){return{segmentInfo:Ra(c,q),attributes:Ra(k,{baseUrl:a})}})}},lk=function(a){return a.reduce(function(a,
b){var c=Ha(b),d=jk[c.schemeIdUri];if(d&&(a[d]={attributes:c},b=sa(b,"cenc:pssh")[0])){if(c=b=b.textContent.trim()){b=bh.atob?bh.atob(b):Buffer.from(b,"base64").toString("binary");c=new Uint8Array(b.length);for(var f=0;f<b.length;f++)c[f]=b.charCodeAt(f)}a[d].pssh=c}return a},{})},mk=function(a,b,c){return function(d){var f=Ha(d),k=kd(b,sa(d,"BaseURL")),q=sa(d,"Role")[0];q={role:Ha(q)};f=Ra(a,f,q);q=lk(sa(d,"ContentProtection"));Object.keys(q).length&&(f=Ra(f,{contentProtection:q}));q=Je(d);d=sa(d,
"Representation");q=Ra(c,q);return jd(d.map(kk(f,k,q)))}},nk=function(b,c){return function(d,f){var k=kd(c,sa(d,"BaseURL")),l=Ha(d);l=parseInt(l.id,10);f=a.isNaN(l)?f:l;f=Ra(b,{periodIndex:f});l=sa(d,"AdaptationSet");d=Je(d);return jd(l.map(mk(f,k,d)))}},nh=function(a){if(""===a)throw Error("DASH_EMPTY_MANIFEST");a=(a=(new Vj).parseFromString(a,"application/xml"))&&"MPD"===a.documentElement.tagName?a.documentElement:null;if(!a||a&&0<a.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");
return a},ok=function(a){a=sa(a,"UTCTiming")[0];if(!a)return null;a=Ha(a);switch(a.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":a.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":a.method="DIRECT";a.value=Date.parse(a.value);
break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return a},oh=function(a,b){void 0===b&&(b={});a=nh(a);var c=b;void 0===c&&(c={});var d=c;c=d.manifestUri;c=void 0===c?"":c;var f=d.NOW;f=void 0===f?Date.now():f;d=d.clientOffset;d=void 0===d?0:d;var k=sa(a,"Period");if(!k.length)throw Error("INVALID_NUMBER_OF_PERIOD");var q=Ha(a);a=kd([c],sa(a,"BaseURL"));q.sourceDuration=q.mediaPresentationDuration||0;q.NOW=f;q.clientOffset=d;a=jd(k.map(nk(q,a)));return ek(a.map(ik),b.sidxMapping)},Sa=function(a){return new Date(1E3*
a-20828448E5)},ph=function(a){return{isLeading:(a[0]&12)>>>2,dependsOn:a[0]&3,isDependedOn:(a[1]&192)>>>6,hasRedundancy:(a[1]&48)>>>4,paddingValue:(a[1]&14)>>>1,isNonSyncSample:a[1]&1,degradationPriority:a[2]<<8|a[3]}},hc=function(a){var b=""+String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])},yb={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),
height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:La(a.subarray(78,a.byteLength))}},avcC:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:a[4]&3,sps:[],pps:[]},d=a[5]&31,f;var g=6;for(f=0;f<d;f++){var q=b.getUint16(g);g+=2;c.sps.push(new Uint8Array(a.subarray(g,
g+q)));g+=q}d=a[g];g++;for(f=0;f<d;f++)q=b.getUint16(g),g+=2,c.pps.push(new Uint8Array(a.subarray(g,g+q))),g+=q;return c},btrt:function(a){a=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:a.getUint32(0),maxBitrate:a.getUint32(4),avgBitrate:a.getUint32(8)}},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:a[8]&31,decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<
24|a[17]<<16|a[18]<<8|a[19],avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(a[26]&7)<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);b={majorBrand:hc(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]};for(var c=8;c<a.byteLength;)b.compatibleBrands.push(hc(a.subarray(c,c+4))),c+=4;return b},dinf:function(a){return{boxes:La(a)}},
dref:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),dataReferences:La(a.subarray(8))}},hdlr:function(a){var b={version:(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),flags:new Uint8Array(a.subarray(1,4)),handlerType:hc(a.subarray(8,12)),name:""},c;for(c=24;c<a.byteLength&&0!==a[c];c++)b.name+=String.fromCharCode(a[c]);b.name=decodeURIComponent(escape(b.name));return b},mdat:function(a){var b=a.byteLength,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=[],
f;for(f=0;f+4<a.length;f+=g){var g=c.getUint32(f);f+=4;if(0>=g)d.push("\x3cspan style\x3d'color:red;'\x3eMALFORMED DATA\x3c/span\x3e");else switch(a[f]&31){case 1:d.push("slice_layer_without_partitioning_rbsp");break;case 5:d.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:d.push("sei_rbsp");break;case 7:d.push("seq_parameter_set_rbsp");break;case 8:d.push("pic_parameter_set_rbsp");break;case 9:d.push("access_unit_delimiter_rbsp");break;default:d.push("UNKNOWN NAL - "+a[f]&31)}}return{byteLength:b,
nals:d}},mdhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4;a={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};1===a.version?(c+=4,a.creationTime=Sa(b.getUint32(c)),c+=8,a.modificationTime=Sa(b.getUint32(c)),c+=4,a.timescale=b.getUint32(c),c+=8):(a.creationTime=Sa(b.getUint32(c)),c+=4,a.modificationTime=Sa(b.getUint32(c)),c+=4,a.timescale=b.getUint32(c),c+=4);a.duration=b.getUint32(c);b=b.getUint16(c+4);a.language+=String.fromCharCode((b>>10)+96);
a.language+=String.fromCharCode(((b&992)>>5)+96);a.language+=String.fromCharCode((b&31)+96);return a},mdia:function(a){return{boxes:La(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:La(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);b={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/
65536};28<a.byteLength&&(b.streamDescriptor=La(a.subarray(28))[0]);return b},moof:function(a){return{boxes:La(a)}},moov:function(a){return{boxes:La(a)}},mvex:function(a){return{boxes:La(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};1===d.version?(c+=4,d.creationTime=Sa(b.getUint32(c)),c+=8,d.modificationTime=Sa(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8):(d.creationTime=Sa(b.getUint32(c)),
c+=4,d.modificationTime=Sa(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=4);d.duration=b.getUint32(c);c+=4;d.rate=b.getUint16(c)+b.getUint16(c+2)/16;c+=4;d.volume=b.getUint8(c)+b.getUint8(c+1)/8;c=c+2+2+8;d.matrix=new Uint32Array(a.subarray(c,c+36));d.nextTrackId=b.getUint32(c+36+24);return d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b=
{version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},c;for(c=4;c<a.byteLength;c++)b.samples.push({dependsOn:(a[c]&48)>>4,isDependedOn:(a[c]&12)>>2,hasRedundancy:a[c]&3});return b},sidx:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8),earliestPresentationTime:b.getUint32(12),firstOffset:b.getUint32(16)},d=b.getUint16(22),f;for(f=24;d;f+=12,d--)c.references.push({referenceType:(a[f]&
128)>>>7,referencedSize:b.getUint32(f)&2147483647,subsegmentDuration:b.getUint32(f+4),startsWithSap:!!(a[f+8]&128),sapType:(a[f+8]&112)>>>4,sapDeltaTime:b.getUint32(f+8)&268435455});return c},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:La(a)}},stco:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]};var c=b.getUint32(4),d;for(d=
8;c;d+=4,c--)a.chunkOffsets.push(b.getUint32(d));return a},stsc:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=b.getUint32(4);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};var d;for(d=8;c;d+=12,c--)a.sampleToChunks.push({firstChunk:b.getUint32(d),samplesPerChunk:b.getUint32(d+4),sampleDescriptionIndex:b.getUint32(d+8)});return a},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:La(a.subarray(8))}},stsz:function(a){var b=
new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:b.getUint32(4),entries:[]},d;for(d=12;d<a.byteLength;d+=4)c.entries.push(b.getUint32(d));return c},stts:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]};var c=b.getUint32(4),d;for(d=8;c;d+=8,c--)a.timeToSamples.push({sampleCount:b.getUint32(d),sampleDelta:b.getUint32(d+4)});return a},styp:function(a){return yb.ftyp(a)},
tfdt:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:(a[4]<<24|a[5]<<16|a[6]<<8|a[7])>>>0};1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=(a[8]<<24|a[9]<<16|a[10]<<8|a[11])>>>0);return b},tfhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4)};var c=a.flags[2]&1,d=a.flags[2]&2,f=a.flags[2]&8,g=a.flags[2]&16,q=a.flags[2]&32,y=a.flags[0]&
65536,n=a.flags[0]&131072;var x=8;c&&(x+=4,a.baseDataOffset=b.getUint32(12),x+=4);d&&(a.sampleDescriptionIndex=b.getUint32(x),x+=4);f&&(a.defaultSampleDuration=b.getUint32(x),x+=4);g&&(a.defaultSampleSize=b.getUint32(x),x+=4);q&&(a.defaultSampleFlags=b.getUint32(x));y&&(a.durationIsEmpty=!0);!c&&n&&(a.baseDataOffsetIsMoof=!0);return a},tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};1===d.version?(c+=4,d.creationTime=
Sa(b.getUint32(c)),c+=8,d.modificationTime=Sa(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c=c+4+8):(d.creationTime=Sa(b.getUint32(c)),c+=4,d.modificationTime=Sa(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c=c+4+4);d.duration=b.getUint32(c);c=c+4+8;d.layer=b.getUint16(c);c+=2;d.alternateGroup=b.getUint16(c);c+=2;d.volume=b.getUint8(c)+b.getUint8(c+1)/8;c=c+2+2;d.matrix=new Uint32Array(a.subarray(c,c+36));c+=36;d.width=b.getUint16(c)+b.getUint16(c+2)/16;c+=4;d.height=b.getUint16(c)+b.getUint16(c+
2)/16;return d},traf:function(a){return{boxes:La(a)}},trak:function(a){return{boxes:La(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:a[20]&3,sampleIsDependedOn:(a[21]&192)>>6,sampleHasRedundancy:(a[21]&48)>>4,samplePaddingValue:(a[21]&14)>>1,sampleIsDifferenceSample:!!(a[21]&
1),sampleDegradationPriority:b.getUint16(22)}},trun:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=b.flags[2]&1,f=b.flags[2]&4,g=b.flags[1]&1,q=b.flags[1]&2,y=b.flags[1]&4,n=b.flags[1]&8,x=c.getUint32(4),K=8;d&&(b.dataOffset=c.getInt32(K),K+=4);f&&x&&(d={flags:ph(a.subarray(K,K+4))},K+=4,g&&(d.duration=c.getUint32(K),K+=4),q&&(d.size=c.getUint32(K),K+=4),n&&(d.compositionTimeOffset=c.getUint32(K),K+=4),b.samples.push(d),
x--);for(;x--;)d={},g&&(d.duration=c.getUint32(K),K+=4),q&&(d.size=c.getUint32(K),K+=4),y&&(d.flags=ph(a.subarray(K,K+4)),K+=4),n&&(d.compositionTimeOffset=c.getUint32(K),K+=4),b.samples.push(d);return b},"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};
var La=function(a){var b=0,c=[],d;var f=new ArrayBuffer(a.length);var g=new Uint8Array(f);for(d=0;d<a.length;++d)g[d]=a[d];for(f=new DataView(f);b<a.byteLength;){g=f.getUint32(b);d=hc(a.subarray(b+4,b+8));var q=1<g?b+g:a.byteLength;b=(yb[d]||function(a){return{data:a}})(a.subarray(b+8,q));b.size=g;b.type=d;c.push(b);b=q}return c};var qh=function(a,b){b=b||0;var c=Array(2*b+1).join(" ");return a.map(function(a,d){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=
c+"  "+b+": ";b=a[b];return b instanceof Uint8Array||b instanceof Uint32Array?(b=Array.prototype.slice.call(new Uint8Array(b.buffer,b.byteOffset,b.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===b.length?d+"\x3c"+b.join("").slice(1)+"\x3e":d+"\x3c\n"+b.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  \x3e":d+"\x3c\x3e":d+JSON.stringify(b,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+
qh(a.boxes,b+1):"")}).join("\n")};var ea={inspect:La,textify:qh,parseType:hc,findBox:function z(a,b){var c=[],d;if(!b.length)return null;for(d=0;d<a.byteLength;){var f=(a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3])>>>0;var k=hc(a.subarray(d+4,d+8));f=1<f?d+f:a.byteLength;k===b[0]&&(1===b.length?c.push(a.subarray(d+8,f)):(d=z(a.subarray(d+8,f),b.slice(1)),d.length&&(c=c.concat(d))));d=f}return c},parseTraf:yb.traf,parseTfdt:yb.tfdt,parseHdlr:yb.hdlr,parseTfhd:yb.tfhd,parseTrun:yb.trun,parseSidx:yb.sidx},Bc=
function(a){return("00"+a.toString(16)).slice(-2)},nb={findBox:ea.findBox,parseType:ea.parseType,timescale:function(a){return ea.findBox(a,["moov","trak"]).reduce(function(a,b){var c=ea.findBox(b,["tkhd"])[0];if(!c)return null;var d=c[0];d=0===d?12:20;c=(c[d]<<24|c[d+1]<<16|c[d+2]<<8|c[d+3])>>>0;b=ea.findBox(b,["mdia","mdhd"])[0];if(!b)return null;d=b[0];d=0===d?12:20;a[c]=(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3])>>>0;return a},{})},startTime:function(a,b){b=ea.findBox(b,["moof","traf"]);b=[].concat.apply([],
b.map(function(b){return ea.findBox(b,["tfhd"]).map(function(c){c=a[(c[4]<<24|c[5]<<16|c[6]<<8|c[7])>>>0]||9E4;var d=(d=ea.findBox(b,["tfdt"]).map(function(a){var b=a[0];var c=(a[4]<<24|a[5]<<16|a[6]<<8|a[7])>>>0;1===b&&(c*=Math.pow(2,32),c+=(a[8]<<24|a[9]<<16|a[10]<<8|a[11])>>>0);return c})[0])||Infinity;return d/c})}));b=Math.min.apply(null,b);return isFinite(b)?b:0},compositionStartTime:function(a,b){var c=ea.findBox(b,["moof","traf"]),d=b=0,f;if(c&&c.length){c=ea.parseTraf(c[0]);for(var q=0;q<
c.boxes.length;q++)"tfhd"===c.boxes[q].type?f=c.boxes[q].trackId:"tfdt"===c.boxes[q].type?b=c.boxes[q].baseMediaDecodeTime:"trun"===c.boxes[q].type&&c.boxes[q].samples.length&&(d=c.boxes[q].samples[0].compositionTimeOffset||0)}return(b+d)/(a[f]||9E4)},videoTrackIds:function(a){var b=[];ea.findBox(a,["moov","trak"]).forEach(function(a){var c=ea.findBox(a,["mdia","hdlr"]),d=ea.findBox(a,["tkhd"]);c.forEach(function(a,c){a=ea.parseType(a.subarray(8,12));c=d[c];"vide"===a&&(c=new DataView(c.buffer,c.byteOffset,
c.byteLength),a=c.getUint8(0),c=0===a?c.getUint32(12):c.getUint32(20),b.push(c))})});return b},tracks:function(a){var b=[];ea.findBox(a,["moov","trak"]).forEach(function(a){var c={},d=ea.findBox(a,["tkhd"])[0];if(d){var f=new DataView(d.buffer,d.byteOffset,d.byteLength);var k=f.getUint8(0);c.id=0===k?f.getUint32(12):f.getUint32(20)}if(f=ea.findBox(a,["mdia","hdlr"])[0])f=ea.parseType(f.subarray(8,12)),c.type="vide"===f?"video":"soun"===f?"audio":f;if(f=ea.findBox(a,["mdia","minf","stbl","stsd"])[0])if(f=
f.subarray(8),c.codec=ea.parseType(f.subarray(4,8)),f=ea.findBox(f,[c.codec])[0],f)if(/^[a-z]vc[1-9]$/i.test(c.codec)){f=f.subarray(78);var n=ea.parseType(f.subarray(4,8));"avcC"===n&&11<f.length?(c.codec+=".",c.codec+=Bc(f[9]),c.codec+=Bc(f[10]),c.codec+=Bc(f[11])):c.codec="avc1.4d400d"}else/^mp4[a,v]$/i.test(c.codec)&&(f=f.subarray(28),n=ea.parseType(f.subarray(4,8)),"esds"===n&&20<f.length&&0!==f[19]?(c.codec+="."+Bc(f[19]),c.codec+="."+Bc(f[20]>>>2&63).replace(/^0/,"")):c.codec="mp4a.40.2");(a=
ea.findBox(a,["mdia","mdhd"])[0])&&d&&(d=0===k?12:20,c.timescale=(a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3])>>>0);b.push(c)});return b}},Cc={parseSei:function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,f=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)f+=255,b++;f+=a[b++];if(!c.payload&&4===d){c.payloadType=d;c.payloadSize=f;c.payload=a.subarray(b,b+f);break}b+=f;f=d=0}return c},parseUserData:function(a){return 181!==a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||
"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var c=[],d;if(!(b[0]&64))return c;var f=b[0]&31;for(d=0;d<f;d++){var q=3*d;var k={type:b[q+2]&3,pts:a};b[q+2]&4&&(k.ccData=b[q+3]<<8|b[q+4],c.push(k))}return c},discardEmulationPreventionBytes:function(a){for(var b=a.byteLength,c=[],d=1,f;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;
b-=c.length;f=new Uint8Array(b);var q=0;for(d=0;d<b;q++,d++)q===c[0]&&(q++,c.shift()),f[d]=a[q];return f},USER_DATA_REGISTERED_ITU_T_T35:4},ob=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);a[b]=a[b].slice();a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,d;if(c=a[b])if(2===arguments.length){var f=c.length;for(d=0;d<f;++d)c[d].call(this,arguments[1])}else{var q=[];for(d=1;d<
arguments.length;++d)q.push(arguments[d]);f=c.length;for(d=0;d<f;++d)c[d].apply(this,q)}};this.dispose=function(){a={}}}};ob.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});this.on("partialdone",function(b){a.partialFlush(b)});this.on("endedtimeline",function(b){a.endTimeline(b)});this.on("reset",function(b){a.reset(b)});return a};ob.prototype.push=function(a){this.trigger("data",a)};ob.prototype.flush=function(a){this.trigger("done",a)};ob.prototype.partialFlush=
function(a){this.trigger("partialdone",a)};ob.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)};ob.prototype.reset=function(a){this.trigger("reset",a)};var Ta=function l(){l.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new fa(0,0),new fa(0,1),new fa(1,0),new fa(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("partialdone",this.trigger.bind(this,"partialdone"));a.on("done",this.trigger.bind(this,"done"))},
this)};Ta.prototype=new ob;Ta.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var b=Cc.parseSei(a.escapedRBSP);b.payloadType===Cc.USER_DATA_REGISTERED_ITU_T_T35&&(b=Cc.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=Cc.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,
this.latestDts_=a.dts))}};Ta.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)};Ta.prototype.flushStream=function(a){this.captionPackets_.length&&(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=
0);this.flushCCStreams(a)};Ta.prototype.flush=function(){return this.flushStream("flush")};Ta.prototype.partialFlush=function(){return this.flushStream("partialFlush")};Ta.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};Ta.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=
0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};Ta.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};Ta.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};Ta.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};var pk={42:225,92:233,94:237,95:243,96:250,
123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,
809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ld=function(a){if(null===a)return"";a=pk[a]||a;return String.fromCharCode(a)},qk=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Kb=function(){for(var a=[],b=15;b--;)a.push("");return a},fa=function qa(a,b){qa.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_=
"CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var c=b>>>8;var d=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,
this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=
this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=Kb()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Kb():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Kb()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(c,d)?(b=ld((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=
this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=ld((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=qk.indexOf(b&7968),"rollUp"===this.mode_&&(0>c-this.rollUpRows_+1&&(c=this.rollUpRows_-
1),this.setRollUp(a.pts,c)),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(c)&&(0===d&&(d=null),b=ld(c),b+=ld(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};fa.prototype=new ob;fa.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(q){return console.error("Skipping malformed caption."),
""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};fa.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Kb();this.nonDisplayed_=Kb();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};fa.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&
(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|
46};fa.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};fa.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};fa.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};fa.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};fa.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};fa.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=
a};fa.prototype.isNormalChar=function(a){return 32<=a&&127>=a};fa.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Kb(),this.displayed_=Kb());if(void 0!==b&&b!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};fa.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);
b=b.reduce(function(a,b){return a+"\x3c"+b+"\x3e"},"");this[this.mode_](a,b)};fa.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"\x3c/"+b+"\x3e"},"");this.formatting_=[];this[this.mode_](a,b)}};fa.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};fa.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};fa.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=
this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};fa.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};var rk=Cc.discardEmulationPreventionBytes,sk=function(a,b,c){var d=b,f=c.defaultSampleDuration||0,n=c.defaultSampleSize||0,x=c.trackId,g=[];a.forEach(function(a){a=ea.parseTrun(a).samples;a.forEach(function(a){void 0===a.duration&&(a.duration=f);void 0===a.size&&(a.size=n);a.trackId=x;
a.dts=d;void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0);a.pts=d+a.compositionTimeOffset;d+=a.duration});g=g.concat(a)});return g},tk=function(a,b){var c=nb.findBox(a,["moof","traf"]),d={},f=[];nb.findBox(a,["mdat"]).forEach(function(a,b){f.push({mdat:a,traf:c[b]})});f.forEach(function(a){var c=a.mdat,n=a.traf;a=nb.findBox(n,["tfhd"]);var f=ea.parseTfhd(a[0]);a=f.trackId;var q=nb.findBox(n,["tfdt"]);q=0<q.length?ea.parseTfdt(q[0]).baseMediaDecodeTime:0;n=nb.findBox(n,["trun"]);if(b===
a&&0<n.length){n=sk(n,q,f);f=new DataView(c.buffer,c.byteOffset,c.byteLength);q=[];var g;for(g=0;g+4<c.length;g+=y){var y=f.getUint32(g);g+=4;if(!(0>=y))switch(c[g]&31){case 6:var h=c.subarray(g+1,g+1+y);a:{var p=g;for(var m=0;m<n.length;m++){var qa=n[m];if(p<qa.size){p=qa;break a}p-=qa.size}p=null}h={nalUnitType:"sei_rbsp",size:y,data:h,escapedRBSP:rk(h),trackId:a};if(p){h.pts=p.pts;h.dts=p.dts;var r=p}else h.pts=r.pts,h.dts=r.dts;q.push(h)}}d[a]||(d[a]=[]);d[a]=d[a].concat(q)}});return d},uk=function(){var a=
!1,b,c,d,f,n,x;this.isInitialized=function(){return a};this.init=function(c){b=new Ta;a=!0;x=c?c.isPartial:!1;b.on("data",function(a){a.startTime=a.startPts/f;a.endTime=a.endPts/f;n.captions.push(a);n.captionStreams[a.stream]=!0})};this.isNewInit=function(a,b){return a&&0===a.length||b&&"object"===typeof b&&0===Object.keys(b).length?!1:d!==a[0]||f!==b[d]};this.parse=function(a,b,x){if(this.isInitialized()){if(!b||!x)return null;if(this.isNewInit(b,x))d=b[0],f=x[d];else if(null===d||!f)return c.push(a),
null}else return null;for(;0<c.length;){var q=c.shift();this.parse(q,b,x)}b=d;x=f;a=null===b?null:{seiNals:tk(a,b)[b],timescale:x};if(null===a||!a.seiNals)return null;this.pushNals(a.seiNals);this.flushStream();return n};this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;a.forEach(function(a){b.push(a)})};this.flushStream=function(){if(!this.isInitialized())return null;x?b.partialFlush():b.flush()};this.clearParsedCaptions=function(){n.captions=[];n.captionStreams={}};
this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){c=[];f=d=null;n?this.clearParsedCaptions():n={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},zb=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a};(function qa(a){var b,c;qa.prototype.init.call(this);this.type_=a||"shared";this.push=function(a){if("shared"===
this.type_||a.type===this.type_)void 0===c&&(c=a.dts),a.dts=zb(a.dts,c),a.pts=zb(a.pts,c),b=a.dts,this.trigger("data",a)};this.flush=function(){c=b;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){b=c=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}}).prototype=new ob;var rh=function(a){var b=a[1]&31;return b=b<<8|a[2]},md=function(a){return!!(a[1]&64)},nd=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+
1);return b},Ke=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},vk=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],sh=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]};var ma={parseType:function(a,b){a=rh(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var b=md(a),
c=4+nd(a);b&&(c+=a[c]+1);return(a[c+10]&31)<<8|a[c+11]},parsePmt:function(a){var b={},c=md(a),d=4+nd(a);c&&(d+=a[d]+1);if(a[d+5]&1){c=3+((a[d+1]&15)<<8|a[d+2])-4;for(var n=12+((a[d+10]&15)<<8|a[d+11]);n<c;){var f=d+n;b[(a[f+1]&31)<<8|a[f+2]]=a[f];n+=((a[f+3]&15)<<8|a[f+4])+5}return b}},parsePayloadUnitStartIndicator:md,parsePesType:function(a,b){a=rh(a);switch(b[a]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!md(a))return null;
var b=4+nd(a);if(b>=a.byteLength)return null;var c=null;var d=a[b+7];d&192&&(c={},c.pts=(a[b+9]&14)<<27|(a[b+10]&255)<<20|(a[b+11]&254)<<12|(a[b+12]&255)<<5|(a[b+13]&254)>>>3,c.pts*=4,c.pts+=(a[b+13]&6)>>>1,c.dts=c.pts,d&64&&(c.dts=(a[b+14]&14)<<27|(a[b+15]&255)<<20|(a[b+16]&254)<<12|(a[b+17]&255)<<5|(a[b+18]&254)>>>3,c.dts*=4,c.dts+=(a[b+18]&6)>>>1));return c},videoPacketContainsKeyFrame:function(a){var b=4+nd(a);a=a.subarray(b);for(var c=b=0,d=!1;c<a.byteLength-3;c++)if(1===a[c+2]){b=c+5;break}for(;b<
a.byteLength;)switch(a[b]){case 0:if(0!==a[b-1]){b+=2;break}else if(0!==a[b-2]){b++;break}c+3!==b-2&&(c=Ke(a[c+3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0));do b++;while(1!==a[b]&&b<a.length);c=b-2;b+=3;break;case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}c=Ke(a[c+3]&31);"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0);c=b-2;b+=3;break;default:b+=3}(a=a.subarray(c))&&3<a.byteLength&&(c=Ke(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0));return d}};var ic={isLikelyAacData:function(a){return 73===
a[0]&&68===a[1]&&51===a[2]?!0:!1},parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;else return vk[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=
10;a[5]&64&&(b=b+4+sh(a.subarray(10,14)));do{var c=sh(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var n=0;n<d.byteLength;n++)if(0===d[n]){var f=unescape,g,h=d,p=n,m="";for(g=0;g<p;g++)m+="%"+("00"+h[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(m))return a=d.subarray(n+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);
return null}};var wk=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=zb(a.dts,c);a.pts=zb(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var d=b;"undefined"===typeof d&&(d=a.video[0].dts);a.video.forEach(function(a){a.dts=zb(a.dts,d);a.pts=zb(a.pts,d);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=zb(a.dts,d),a.pts=zb(a.pts,d),a.dtsTime=a.dts/9E4,a.ptsTime=
a.dts/9E4)}},od=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},xk=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),yk=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},Ia=null,zk=function(){function a(b){od(this,a);if(!Ia){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],d=c[0],n=c[1],f=d[4],g=n[4],h,p,m,r=[],t=[],qa;for(h=0;256>h;h++)t[(r[h]=h<<1^283*(h>>7))^h]=h;for(p=m=0;!f[p];p^=qa||1,m=t[m]||1){var v=m^m<<1^m<<2^m<<3^m<<4;v=v>>8^v&255^99;f[p]=v;g[v]=p;var w=r[h=r[qa=r[p]]];var A=16843009*w^65537*h^257*
qa^16843008*p;w=257*r[v]^16843008*v;for(h=0;4>h;h++)d[h][p]=w=w<<24^w>>>8,n[h][v]=A=A<<24^A>>>8}for(h=0;5>h;h++)d[h]=d[h].slice(0),n[h]=n[h].slice(0);Ia=c}this._tables=[[Ia[0][0].slice(),Ia[0][1].slice(),Ia[0][2].slice(),Ia[0][3].slice(),Ia[0][4].slice()],[Ia[1][0].slice(),Ia[1][1].slice(),Ia[1][2].slice(),Ia[1][3].slice(),Ia[1][4].slice()]];c=this._tables[0][4];d=this._tables[1];p=b.length;m=1;if(4!==p&&6!==p&&8!==p)throw Error("Invalid aes key size");f=b.slice(0);g=[];this._key=[f,g];for(b=p;b<
4*p+28;b++){n=f[b-1];if(0===b%p||8===p&&4===b%p)n=c[n>>>24]<<24^c[n>>16&255]<<16^c[n>>8&255]<<8^c[n&255],0===b%p&&(n=n<<8^n>>>24^m<<24,m=m<<1^283*(m>>7));f[b]=f[b-p]^n}for(p=0;b;p++,b--)n=f[p&3?b:b-4],g[p]=4>=b||4>p?n:d[0][c[n>>>24]]^d[1][c[n>>16&255]]^d[2][c[n>>8&255]]^d[3][c[n&255]]}a.prototype.decrypt=function(a,b,c,d,f,g){var n=this._key[1];a^=n[0];d^=n[1];c^=n[2];b^=n[3];var x=n.length/4-2,q,h=4;var K=this._tables[1];var y=K[0],p=K[1],m=K[2],r=K[3],t=K[4];for(q=0;q<x;q++){K=y[a>>>24]^p[d>>16&
255]^m[c>>8&255]^r[b&255]^n[h];var v=y[d>>>24]^p[c>>16&255]^m[b>>8&255]^r[a&255]^n[h+1];var qa=y[c>>>24]^p[b>>16&255]^m[a>>8&255]^r[d&255]^n[h+2];b=y[b>>>24]^p[a>>16&255]^m[d>>8&255]^r[c&255]^n[h+3];h+=4;a=K;d=v;c=qa}for(q=0;4>q;q++)f[(3&-q)+g]=t[a>>>24]<<24^t[d>>16&255]<<16^t[c>>8&255]<<8^t[b&255]^n[h++],K=a,a=d,d=c,c=b,b=K};return a}(),th=function(){function a(){od(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};a.prototype.off=
function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);d=b.length;for(var f=0;f<d;++f)b[f].apply(this,c)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),uh=function(a){function b(){od(this,
b);var c=a.call(this,th);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.jobs=[];c.delay=1;c.timeout_=null;return c}yk(b,a);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};
return b}(th),Ma=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},vh=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new zk(Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var n=new Int32Array(a.buffer),f;var g=c[0];var q=c[1];var h=c[2];c=c[3];for(f=0;f<d.length;f+=4){var p=Ma(d[f]);var m=Ma(d[f+1]);var r=Ma(d[f+2]);var t=Ma(d[f+3]);b.decrypt(p,m,r,t,n,f);n[f]=Ma(n[f]^g);n[f+1]=Ma(n[f+1]^q);n[f+2]=Ma(n[f+2]^h);n[f+3]=Ma(n[f+3]^c);g=p;q=m;h=
r;c=t}return a},Ak=function(){function a(b,c,d,n){od(this,a);var f=a.STEP,g=new Int32Array(b.buffer),q=new Uint8Array(b.byteLength);b=0;this.asyncStream_=new uh;this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,d,q));for(b=f;b<g.length;b+=f)d=new Uint32Array([Ma(g[b-4]),Ma(g[b-3]),Ma(g[b-2]),Ma(g[b-1])]),this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,d,q));this.asyncStream_.push(function(){n(null,q.subarray(0,q.byteLength-q[q.byteLength-1]))})}a.prototype.decryptChunk_=
function(a,b,c,d){return function(){var n=vh(a,b,c);d.set(n,a.byteOffset)}};xk(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),Lb=function(b,c){if(/^[a-z]+:/i.test(c))return c;/\/\//i.test(b)||(b=De.buildAbsoluteURL(a.location.href,b));return De.buildAbsoluteURL(b,c)},pd=function(a,b,c){return a&&c.responseURL&&b!==c.responseURL?c.responseURL:b},Ba=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},Xa=function(){function a(a,b){for(var c=0;c<
b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Bk=function n(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return n(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},pb=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},eb=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b},Ck=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,f=!1,g=void 0;try{for(var q=a[Symbol.iterator](),
h;!(d=(h=q.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(Nc){f=!0,g=Nc}finally{try{if(!d&&q["return"])q["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),Le=w.mergeOptions,Dk=w.log,qd=function(a,b){["AUDIO","SUBTITLES"].forEach(function(c){for(var d in a.mediaGroups[c])for(var f in a.mediaGroups[c][d])b(a.mediaGroups[c][d][f],c,d,f)})},Ek=function(a,b,c){var d=b.slice();c=c||0;b=Math.min(a.length,b.length+
c);for(var f=c;f<b;f++)d[f-c]=Le(a[f],d[f-c]);return d},Me=function(a,b){a=Le(a,{});var c=a.playlists[b.id];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.endList===b.endList&&c.mediaSequence===b.mediaSequence)return null;var d=Le(c,b);c.segments&&(d.segments=Ek(c.segments,b.segments,b.mediaSequence-c.mediaSequence));d.segments.forEach(function(a){var b=d.resolvedUri;a.resolvedUri||(a.resolvedUri=Lb(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Lb(b,a.key.uri));
a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Lb(b,a.map.uri))});for(c=0;c<a.playlists.length;c++)a.playlists[c].id===b.id&&(a.playlists[c]=d);a.playlists[b.id]=d;a.playlists[b.uri]=d;return a},wh=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];c.resolvedUri=Lb(a.uri,c.uri);c.id=b+"-"+c.uri;a.playlists[c.id]=c;a.playlists[c.uri]=c;c.attributes||(c.attributes={},Dk.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},xh=function(a){qd(a,function(b){b.uri&&
(b.resolvedUri=Lb(a.uri,b.uri))})},yh=function(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)},rd=function(b){function c(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Ba(this,c);var n=eb(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),f=d.withCredentials;d=d.handleManifestRedirects;n.srcUrl=a;n.hls_=b;n.withCredentials=void 0===f?!1:f;n.handleManifestRedirects=void 0===d?!1:d;f=b.options_;n.customTagParsers=
f&&f.customTagParsers||[];n.customTagMappers=f&&f.customTagMappers||[];if(!n.srcUrl)throw Error("A non-empty playlist URL is required");n.state="HAVE_NOTHING";n.on("mediaupdatetimeout",function(){"HAVE_METADATA"===n.state&&(n.state="HAVE_CURRENT_METADATA",n.request=n.hls_.xhr({uri:Lb(n.master.uri,n.media().uri),withCredentials:n.withCredentials},function(a,b){if(n.request){if(a)return n.playlistRequestError(n.request,n.media(),"HAVE_METADATA");n.haveMetadata(n.request,n.media().uri,n.media().id)}}))});
return n}pb(c,b);Xa(c,[{key:"playlistRequestError",value:function(a,b,c){var d=b.uri;b=b.id;this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],status:a.status,message:"HLS playlist request error at URL: "+d+".",responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(b,c,d){var n=this;this.request=null;this.state="HAVE_METADATA";var f=new Zg;this.customTagParsers.forEach(function(a){return f.addParser(a)});this.customTagMappers.forEach(function(a){return f.addTagMapper(a)});
f.push(b.responseText);f.end();f.manifest.uri=c;f.manifest.id=d;f.manifest.attributes=f.manifest.attributes||{};b=Me(this.master,f.manifest);this.targetDuration=f.manifest.targetDuration;b?(this.master=b,this.media_=this.master.playlists[d]):this.trigger("playlistunchanged");this.media().endList||(a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=a.setTimeout(function(){n.trigger("mediaupdatetimeout")},yh(this.media(),!!b)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose");
this.stopRequest();a.clearTimeout(this.mediaUpdateTimeout);a.clearTimeout(this.finalRenditionTimeout);this.off()}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(b,c){var d=this;if(!b)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof b){if(!this.master.playlists[b])throw Error("Unknown playlist URI: "+b);b=this.master.playlists[b]}a.clearTimeout(this.finalRenditionTimeout);
if(c)c=b.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=a.setTimeout(this.media.bind(this,b,!1),c);else{var n=this.state;c=!this.media_||b.id!==this.media_.id;if(this.master.playlists[b.id].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=b,c&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(c){this.state="SWITCHING_MEDIA";if(this.request){if(b.resolvedUri===this.request.url)return;this.request.onreadystatechange=
null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:b.resolvedUri,withCredentials:this.withCredentials},function(a,c){if(d.request){b.resolvedUri=pd(d.handleManifestRedirects,b.resolvedUri,c);if(a)return d.playlistRequestError(d.request,b,n);d.haveMetadata(c,b.uri,b.id);"HAVE_MASTER"===n?d.trigger("loadedmetadata"):d.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest();a.clearTimeout(this.mediaUpdateTimeout);
"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(b){var c=this;a.clearTimeout(this.mediaUpdateTimeout);var d=this.media();b?this.mediaUpdateTimeout=a.setTimeout(function(){return c.load()},d?d.targetDuration/2*1E3:5E3):this.started?d&&!d.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},
{key:"start",value:function(){var b=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,d){if(b.request){b.request=null;if(c)return b.error={status:d.status,message:"HLS playlist request error at URL: "+b.srcUrl+".",responseText:d.responseText,code:2},"HAVE_NOTHING"===b.state&&(b.started=!1),b.trigger("error");var n=new Zg;b.customTagParsers.forEach(function(a){return n.addParser(a)});b.customTagMappers.forEach(function(a){return n.addTagMapper(a)});
n.push(d.responseText);n.end();b.state="HAVE_MASTER";b.srcUrl=pd(b.handleManifestRedirects,b.srcUrl,d);n.manifest.uri=b.srcUrl;if(n.manifest.playlists)b.master=n.manifest,wh(b.master),xh(b.master),b.trigger("loadedplaylist"),b.request||b.media(n.manifest.playlists[0]);else return c="0-"+b.srcUrl,b.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:a.location.href,playlists:[{uri:b.srcUrl,id:c,resolvedUri:b.srcUrl,attributes:{}}]},b.master.playlists[c]=b.master.playlists[0],
b.master.playlists[b.srcUrl]=b.master.playlists[0],b.haveMetadata(d,b.srcUrl,c),b.trigger("loadedmetadata")}})}}]);return c}(w.EventTarget),zh=w.createTimeRange,Fk=function(a,b){var c=0;b-=a.mediaSequence;var d=a.segments[b];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-d.duration,precise:!0}}for(;b--;){d=a.segments[b];if("undefined"!==typeof d.end)return{result:c+d.end,precise:!0};c+=d.duration;if("undefined"!==typeof d.start)return{result:c+
d.start,precise:!0}}return{result:c,precise:!1}},Ah=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+a.segments.length);if(b<a.mediaSequence)return 0;var d=Fk(a,b);if(d.precise)return d.result;a:{var f=0;for(var g=b-a.mediaSequence;g<a.segments.length;g++){b=a.segments[g];if("undefined"!==typeof b.start){a=b.start-f;f=!0;break a}f+=b.duration;if("undefined"!==typeof b.end){a=b.end-f;f=!0;break a}}a=-1;f=!1}return f?a:d.result+c},Bh=function(b,c,d){if(!b)return 0;"number"!==typeof d&&(d=
0);if("undefined"===typeof c){if(b.totalDuration)return b.totalDuration;if(!b.endList)return a.Infinity}return Ah(b,c,d)},Dc=function(a,b,c){var d=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)d+=a.targetDuration;b=0}for(;b<c;b++)d+=a.segments[b].duration;return d},Ch=function(a,b){if(!a.segments.length)return 0;var c=a.segments.length,d=a.segments[c-1].duration||a.targetDuration;b="number"===typeof b?b:d+2*a.targetDuration;if(0===b)return c;for(d=0;c--&&!(d+=a.segments[c].duration,
d>=b););return Math.max(0,c)},Dh=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return Bh(a);if(null===b)return null;b=b||0;c=c?Ch(a,d):a.segments.length;return Ah(a,a.mediaSequence+c,b)},Eh=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,d=1;d<=c;d++){var f=Math.pow(10,d),g=b*f;if(0===g-Math.floor(g)||d===c)return(g+a)/f}},Gk=Eh.bind(null,1),Hk=Eh.bind(null,-1),Fh=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},Ne=function(a){return a.excludeUntil&&
Infinity===a.excludeUntil},sd=function(a){var b=Fh(a);return!a.disabled&&!b},Gh=function(a,b){return b.attributes&&b.attributes[a]},Oe=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return sd(a)?(a.attributes.BANDWIDTH||0)<c:!1}).length},Ja={duration:Bh,seekable:function(a,b,c){var d=b||0;a=Dh(a,b,!0,c);return null===a?zh():zh(d,a)},safeLiveIndex:Ch,getMediaInfoForTime:function(a,b,c,d){var n,f=a.segments.length,
g=b-d;if(0>g){if(0<c)for(n=c-1;0<=n;n--){var q=a.segments[n];g+=Hk(q.duration);if(0<g)return{mediaIndex:n,startTime:d-Dc(a,c,n)}}return{mediaIndex:0,startTime:b}}if(0>c){for(n=c;0>n;n++)if(g-=a.targetDuration,0>g)return{mediaIndex:0,startTime:b};c=0}for(n=c;n<f;n++)if(q=a.segments[n],g-=Gk(q.duration),0>g)return{mediaIndex:n,startTime:d+Dc(a,c,n)};return{mediaIndex:f-1,startTime:b}},isEnabled:sd,isDisabled:function(a){return a.disabled},isBlacklisted:Fh,isIncompatible:Ne,playlistEnd:Dh,isAes:function(a){for(var b=
0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},isFmp4:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1},hasAttribute:Gh,estimateSegmentRequestTime:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Gh("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:Oe},Ik=w.xhr,Jk=w.mergeOptions,Hh=function(){return function n(a,b){a=Jk({timeout:45E3},a);var c=n.beforeRequest||w.Hls.xhr.beforeRequest;
c&&"function"===typeof c&&(c=c(a))&&(a=c);var d=Ik(a,function(a,c){var n=d.response;!a&&n&&(d.responseTime=Date.now(),d.roundTripTime=d.responseTime-d.requestTime,d.bytesReceived=n.byteLength||n.length,d.bandwidth||(d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8E3)));c.headers&&(d.responseHeaders=c.headers);a&&"ETIMEDOUT"===a.code&&(d.timedout=!0);a||d.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(a=Error("XHR Failed with a response of: "+(d&&(n||d.responseText))));
b(a,d)}),f=d.abort;d.abort=function(){d.aborted=!0;return f.apply(d,arguments)};d.uri=a.uri;d.requestTime=Date.now();return d}},Pe=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes\x3d"+a.offset+"-"+(a.offset+a.length-1));return b},Kk=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},Lk=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},Ih=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,
byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b},td=function(a){var b=a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()},Jh=function(a){a=Array.prototype.slice.call(a);for(var b="",c,d,f=0;f<a.length/16;f++)c=a.slice(16*f,16*f+16).map(Kk).join(""),d=a.slice(16*f,16*f+16).map(Lk).join(""),b+=c+" "+d+"\n";return b},Mk=Object.freeze({createTransferableMessage:Ih,initSegmentId:td,segmentKeyId:function(a){return a.resolvedUri},hexDump:Jh,tagDump:function(a){return Jh(a.bytes)},
textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var d=a;var f=c;d=d.start(f)+"-"+d.end(f);b+=d+" "}return b}}),Nk=function(a,b){var c=void 0;try{c=new Date(a)}catch(va){return null}if(!b||!b.segments||0===b.segments.length)return null;a=b.segments[0];if(c<a.dateTimeObject)return null;for(var d=0;d<b.segments.length-1&&!(a=b.segments[d],c<b.segments[d+1].dateTimeObject);d++);d=b.segments[b.segments.length-1];var f=d.dateTimeObject;if(d.videoTimingInfo){var g=d.videoTimingInfo;g=g.transmuxedPresentationEnd-
g.transmuxedPresentationStart-g.transmuxerPrependedSeconds}else g=d.duration+.25*d.duration;g=new Date(f.getTime()+1E3*g);if(c>g)return null;c>f&&(a=d);return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:Ja.duration(b,b.mediaSequence+b.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"}},Ok=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c=0,d=void 0,f=0;f<b.segments.length&&!(d=b.segments[f],c=d.videoTimingInfo?
d.videoTimingInfo.transmuxedPresentationEnd:c+d.duration,a<=c);f++);b=b.segments[b.segments.length-1];if(b.videoTimingInfo&&b.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>c){if(a>c+.25*b.duration)return null;d=b}return{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:c-d.duration,type:d.videoTimingInfo?"accurate":"estimate"}},Pk=function(a,b){var c=void 0,d=void 0;try{c=new Date(a),d=new Date(b)}catch(x){}a=c.getTime();return(d.getTime()-a)/
1E3},Qk=function(a){if(!a.segments||0===a.segments.length)return!1;for(var b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0},Rk=function(a){var b=a.playlist,c=a.time;c=void 0===c?void 0:c;a=a.callback;if(!a)throw Error("getProgramTime: callback must be provided");if(!b||void 0===c)return a({message:"getProgramTime: playlist and time must be provided"});var d=Ok(c,b);if(!d)return a({message:"valid programTime was not found"});if("estimate"===d.type)return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",
seekTime:d.estimatedStart});b={mediaSeconds:c};d=d.segment;d.dateTimeObject?(c-=d.videoTimingInfo.transmuxedPresentationStart+d.videoTimingInfo.transmuxerPrependedSeconds,c=new Date(d.dateTimeObject.getTime()+1E3*c)):c=null;c&&(b.programDateTime=c.toISOString());return a(null,b)},Sk=function y(a){var b=a.programTime,c=a.playlist,d=a.retryCount,f=void 0===d?2:d,g=a.seekTo;d=a.pauseAfterSeek;var h=void 0===d?!0:d,q=a.tech,p=a.callback;if(!p)throw Error("seekToProgramTime: callback must be provided");
if("undefined"===typeof b||!c||!g)return p({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!q.hasStarted_)return p({message:"player must be playing a live stream to start buffering"});if(!Qk(c))return p({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});a=Nk(b,c);if(!a)return p({message:b+" was not found in the stream"});d=a.segment;var m=Pk(d.dateTimeObject,b);if("estimate"===a.type){if(0===f)return p({message:b+" is not buffered yet. Try again"});
g(a.estimatedStart+m);q.one("seeked",function(){y({programTime:b,playlist:c,retryCount:f-1,seekTo:g,pauseAfterSeek:h,tech:q,callback:p})})}else a=d.start+m,q.one("seeked",function(){return p(null,q.currentTime())}),h&&q.pause(),g(a)},ud=1/30,qb=3*ud,Kh=function(a,b){var c=[],d;if(a&&a.length)for(d=0;d<a.length;d++)b(a.start(d),a.end(d))&&c.push([a.start(d),a.end(d)]);return w.createTimeRanges(c)},Lh=function(a,b){return Kh(a,function(a,c){return a-qb<=b&&c+qb>=b})},Mh=function(a,b){return Kh(a,function(a){return a-
ud>=b})},Qe=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" \x3d\x3e "+a.end(c));return b.join(", ")},Tk=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((a.length?a.end(a.length-1):0)-b)/c},Nh=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},jc=function(a,b,c){var d;if(c&&c.cues)for(d=c.cues.length;d--;){var f=c.cues[d];f.startTime<=b&&f.endTime>=a&&c.removeCue(f)}},Uk=function(a){Object.defineProperties(a.frame,
{id:{get:function(){w.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get:function(){w.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},privateData:{get:function(){w.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return a.value.data}}})},Oh=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a},Vk=function(b,c,d){var f=a.WebKitDataCue||a.VTTCue;c&&c.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new f(a.startTime+
this.timestampOffset,a.endTime+this.timestampOffset,a.text))},b);if(d){var n=Oh(b.mediaSource_.duration);d.forEach(function(b){var c=b.cueTime+this.timestampOffset;!("number"!==typeof c||a.isNaN(c)||0>c)&&Infinity>c&&b.frames.forEach(function(a){var b=new f(c,c,a.value||a.url||a.data||"");b.frame=a;b.value=a;Uk(b);this.metadataTrack_.addCue(b)},this)},b);if(b.metadataTrack_&&b.metadataTrack_.cues&&b.metadataTrack_.cues.length){b=b.metadataTrack_.cues;c=[];for(d=0;d<b.length;d++)b[d]&&c.push(b[d]);
var g=c.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),h=Object.keys(g).sort(function(a,b){return Number(a)-Number(b)});h.forEach(function(a,b){var c=Number(h[b+1])||n;g[a].forEach(function(a){a.endTime=c})})}}},Mb="undefined"!==typeof window?window:{},Rd="undefined"===typeof Symbol?"__target":Symbol(),Ri=Mb.BlobBuilder||Mb.WebKitBlobBuilder||Mb.MozBlobBuilder||Mb.MSBlobBuilder,Xb=Mb.URL||Mb.webkitURL||Xb&&Xb.msURL,Wb=Mb.Worker;if(Wb){var Ph=Rf("self.onmessage \x3d function () {}"),
Qh=new Uint8Array(1);try{var Re=new Wb(Ph);Re.postMessage(Qh,[Qh.buffer])}catch(q){Wb=null}finally{Xb.revokeObjectURL(Ph),Re&&Re.terminate()}}var Xk=new Qf("./transmuxer-worker.worker.js",function(a,b){var c=this;(function(){var a=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);a[b]=a[b].slice();a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,d;if(c=a[b])if(2===arguments.length){var f=
c.length;for(d=0;d<f;++d)c[d].call(this,arguments[1])}else{var n=[];for(d=1;d<arguments.length;++d)n.push(arguments[d]);f=c.length;for(d=0;d<f;++d)c[d].apply(this,n)}};this.dispose=function(){a={}}}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});this.on("partialdone",function(b){a.partialFlush(b)});this.on("endedtimeline",function(b){a.endTimeline(b)});this.on("reset",function(b){a.reset(b)});return a};a.prototype.push=function(a){this.trigger("data",
a)};a.prototype.flush=function(a){this.trigger("done",a)};a.prototype.partialFlush=function(a){this.trigger("partialdone",a)};a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)};a.prototype.reset=function(a){this.trigger("reset",a)};var b=Math.pow(2,32)-1,d,f,n,g,h,p,q,m,y,r,t,v,w,A,T,E;(function(){var a;n={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],
stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in n)n.hasOwnProperty(a)&&(n[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);g=new Uint8Array([105,115,111,109]);p=new Uint8Array([97,118,99,49]);h=new Uint8Array([0,0,0,1]);q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);m=new Uint8Array([0,0,0,0,0,
0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);y={video:q,audio:m};v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);t=new Uint8Array([0,0,0,0,0,0,0,0]);A=w=new Uint8Array([0,0,0,0,0,0,0,0]);T=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);E=w;r=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var M=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var f=new Uint8Array(c+
8);(new DataView(f.buffer,f.byteOffset,f.byteLength)).setUint32(0,f.byteLength);f.set(a,4);d=0;for(c=8;d<b.length;d++)f.set(b[d],c),c+=b[d].byteLength;return f};var H=function(){return M(n.dinf,M(n.dref,v))};var G=function(a){return M(n.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var Aa=function(){return M(n.ftyp,g,h,g,p)};var L=function(a){return M(n.hdlr,
y[a])};var Za=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return M(n.mdhd,b)};var ka=function(a){return M(n.mdia,Za(a),L(a.type),C(a))};var da=function(a){return M(n.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var C=function(a){return M(n.minf,
"video"===a.type?M(n.vmhd,r):M(n.smhd,t),H(),X(a))};var aa=function(a){for(var b=a.length,c=[];b--;)c[b]=I(a[b]);return M.apply(null,[n.moov,P(4294967295)].concat(c).concat(ab(a)))};var ab=function(a){for(var b=a.length,c=[];b--;)c[b]=fb(a[b]);return M.apply(null,[n.mvex].concat(c))};var P=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return M(n.mvhd,a)};var rb=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var d=a[c].flags;b[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return M(n.sdtp,b)};var X=function(a){return M(n.stbl,d(a),M(n.stts,E),M(n.stsc,A),M(n.stsz,T),M(n.stco,w))};(function(){d=function(c){return M(n.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))};var a=function(a){var b=
a.sps||[],c=a.pps||[],d=[],f=[],g;for(g=0;g<b.length;g++)d.push((b[g].byteLength&65280)>>>8),d.push(b[g].byteLength&255),d=d.concat(Array.prototype.slice.call(b[g]));for(g=0;g<c.length;g++)f.push((c[g].byteLength&65280)>>>8),f.push(c[g].byteLength&255),f=f.concat(Array.prototype.slice.call(c[g]));b=[n.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,
111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),M(n.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length],d,[c.length],f))),M(n.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];a.sarRatio&&(c=a.sarRatio[0],a=a.sarRatio[1],b.push(M(n.pasp,new Uint8Array([(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))));return M.apply(null,b)};var b=function(a){return M(n.mp4a,
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),G(a))}})();var ha=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return M(n.tkhd,a)};var Y=function(a){var c=M(n.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var d=Math.floor(a.baseMediaDecodeTime/(b+1));var g=Math.floor(a.baseMediaDecodeTime%(b+1));d=M(n.tfdt,new Uint8Array([1,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255]));if("audio"===
a.type)return a=f(a,92),M(n.traf,c,d,a);g=rb(a);a=f(a,g.length+92);return M(n.traf,c,d,a,g)};var I=function(a){a.duration=a.duration||4294967295;return M(n.trak,ha(a),ka(a))};var fb=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return M(n.trex,b)};(function(){var a=function(a,b){var c=0,d=0,f=0,n=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==
a[0].flags&&(f=4),void 0!==a[0].compositionTimeOffset&&(n=8));return[0,0,c|d|f|n,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=function(b,c){var d;b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>
8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&4278190080)>>>24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255])}return M(n.trun,new Uint8Array(c))};var c=function(b,c){var d;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];
c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255])}return M(n.trun,new Uint8Array(c))};f=function(a,d){return"audio"===a.type?c(a,d):b(a,d)}})();var W={ftyp:Aa,mdat:function(a){return M(n.mdat,a)},moof:function(a,b){for(var c=[],d=b.length;d--;)c[d]=Y(b[d]);return M.apply(null,[n.moof,da(a)].concat(c))},moov:aa,initSegment:function(a){var b=Aa();a=aa(a);var c=new Uint8Array(b.byteLength+
a.byteLength);c.set(b);c.set(a,b.byteLength);return c}},ba=function(a,b){var c={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};c.dataOffset=b;c.compositionTimeOffset=a.pts-a.dts;c.duration=a.duration;c.size=4*a.length;c.size+=a.byteLength;a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0);return c},F={groupNalsIntoFrames:function(a){var b,c=[],d=[];d.byteLength=0;d.nalCount=0;d.duration=0;for(b=c.byteLength=0;b<a.length;b++){var f=
a[b];"access_unit_delimiter_rbsp"===f.nalUnitType?(c.length&&(c.duration=f.dts-c.dts,d.byteLength+=c.byteLength,d.nalCount+=c.length,d.duration+=c.duration,d.push(c)),c=[f],c.byteLength=f.data.byteLength,c.pts=f.pts,c.dts=f.dts):("slice_layer_without_partitioning_rbsp_idr"===f.nalUnitType&&(c.keyFrame=!0),c.duration=f.dts-c.dts,c.byteLength+=f.data.byteLength,c.push(f))}d.length&&(!c.duration||0>=c.duration)&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.length;d.duration+=
c.duration;d.push(c);return d},groupFramesIntoGops:function(a){var b,c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var f=a[b];f.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[f],c.nalCount=f.length,c.byteLength=f.byteLength,c.pts=f.pts,c.dts=f.dts,c.duration=f.duration):(c.duration+=f.duration,c.nalCount+=f.length,
c.byteLength+=f.byteLength,c.push(f))}d.length&&0>=c.duration&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var c,d=b||0,f=[];for(b=0;b<a.length;b++){var n=a[b];for(c=0;c<n.length;c++){var g=
n[c];g=ba(g,d);d+=g.size;f.push(g)}}return f},concatenateNalData:function(a){var b,c,d,f=0,n=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(n.buffer);for(b=0;b<a.length;b++){var x=a[b];for(c=0;c<x.length;c++){var h=x[c];for(d=0;d<h.length;d++){var p=h[d];g.setUint32(f,p.data.byteLength);f+=4;n.set(p.data,f);f+=p.data.byteLength}}}return n},generateSampleTableForFrame:function(a,b){var c=[];a=ba(a,b||0);c.push(a);return c},concatenateNalDataForFrame:function(a){var b,c=0,d=new Uint8Array(a.byteLength+
4*a.length),f=new DataView(d.buffer);for(b=0;b<a.length;b++){var n=a[b];f.setUint32(c,n.data.byteLength);c+=4;d.set(n.data,c);c+=n.data.byteLength}return d}},D=[33,16,5,32,164,27],O=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],J=function(a){for(var b=[];a--;)b.push(0);return b},oa=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[D,[227,64],J(154),[56]],88200:[D,[231],J(170),[56]],64E3:[D,[248,192],J(240),
[56]],48E3:[D,[255,192],J(268),[55,148,128],J(54),[112]],44100:[D,[255,192],J(268),[55,163,128],J(84),[112]],32E3:[D,[255,192],J(268),[55,234],J(226),[112]],24E3:[D,[255,192],J(268),[55,255,128],J(268),[111,112],J(126),[224]],16E3:[D,[255,192],J(268),[55,255,128],J(268),[111,255],J(269),[223,108],J(195),[1,192]],12E3:[O,J(268),[3,127,248],J(268),[6,255,240],J(268),[13,255,224],J(268),[27,253,128],J(259),[56]],11025:[O,J(268),[3,127,248],J(268),[6,255,240],J(268),[13,255,224],J(268),[27,255,192],J(268),
[55,175,128],J(108),[112]],8E3:[O,J(268),[3,121,16],J(47),[7]]});var gb=function(a){return 9E4*a};var ia=function(a,b){return a*b};var Z=function(a){return a/9E4};var U=function(a,b){return a/b};var Q={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:gb,secondsToAudioTs:ia,videoTsToSeconds:Z,audioTsToSeconds:U,audioTsToVideoTs:function(a,b){return gb(U(a,b))},videoTsToAudioTs:function(a,b){return ia(Z(a),b)},metadataTsToSeconds:function(a,b,c){return Z(c?a:a-b)}},la={prefixWithSilence:function(a,b,c,d){var f,
n=f=0;if(b.length){var g=Q.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var x=Math.ceil(Q.ONE_SECOND_IN_TS/(a.samplerate/1024));c&&d&&(f=g-Math.max(c,d),f=Math.floor(f/x),n=f*x);if(!(1>f||n>Q.ONE_SECOND_IN_TS/2)){c=oa[a.samplerate];c||(c=b[0].data);for(d=0;d<f;d++)g=b[0],b.splice(0,0,{data:c,dts:g.dts-x,pts:g.pts-x});a.baseMediaDecodeTime-=Math.floor(Q.videoTsToAudioTs(n,a.samplerate))}}},trimAdtsFramesByEarliestDts:function(a,b,c){if(b.minSegmentDts>=c)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=
c?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):!1})},generateSampleTable:function(a){var b,c=[];for(b=0;b<a.length;b++){var d=a[b];c.push({size:d.data.byteLength,duration:1024})}return c},concatenateFrameData:function(a){var b,c=0;var d=Uint8Array;var f=0;for(b=0;b<a.length;b++){var n=a[b];f+=n.data.byteLength}n=new d(f);for(d=0;d<a.length;d++)b=a[d],n.set(b.data,c),c+=b.data.byteLength;return n}},Bb=Q.ONE_SECOND_IN_TS,S={clearDtsInfo:function(a){delete a.minSegmentDts;
delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,b){var c=a.minSegmentDts;b||(c-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+c);"audio"===a.type&&(a=a.samplerate/Bb,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=
void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},V={parseSei:function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,f=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)f+=255,b++;f+=a[b++];if(!c.payload&&
4===d){c.payloadType=d;c.payloadSize=f;c.payload=a.subarray(b,b+f);break}b+=f;f=d=0}return c},parseUserData:function(a){return 181!==a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var c=[],d;if(!(b[0]&64))return c;var f=b[0]&31;for(d=0;d<f;d++){var n=3*d;var g={type:b[n+2]&3,pts:a};b[n+2]&4&&(g.ccData=b[n+3]<<8|b[n+
4],c.push(g))}return c},discardEmulationPreventionBytes:function(a){for(var b=a.byteLength,c=[],d=1,f;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;f=new Uint8Array(b);var n=0;for(d=0;d<b;n++,d++)n===c[0]&&(n++,c.shift()),f[d]=a[n];return f},USER_DATA_REGISTERED_ITU_T_T35:4};D=function Wk(){Wk.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new R(0,0),new R(0,1),new R(1,0),new R(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",
this.trigger.bind(this,"data"));a.on("partialdone",this.trigger.bind(this,"partialdone"));a.on("done",this.trigger.bind(this,"done"))},this)};D.prototype=new a;D.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var b=V.parseSei(a.escapedRBSP);b.payloadType===V.USER_DATA_REGISTERED_ITU_T_T35&&(b=V.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=V.parseCaptionPackets(a.pts,
b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};D.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)};D.prototype.flushStream=function(a){this.captionPackets_.length&&(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),
this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0);this.flushCCStreams(a)};D.prototype.flush=function(){return this.flushStream("flush")};D.prototype.partialFlush=function(){return this.flushStream("partialFlush")};D.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};D.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?
this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};D.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};D.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};D.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||
4138===(a.ccData&30974)||6186===(a.ccData&30974)};var ca={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,
574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},$a=function(a){if(null===a)return"";a=ca[a]||a;return String.fromCharCode(a)},ja=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ea=function(){for(var a=[],b=15;b--;)a.push("");return a},R=function Se(a,
b){Se.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var c=b>>>8;var d=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),
this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=
this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=ea()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=ea():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=ea()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(c,d)?(b=$a((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,
d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=$a((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=ja.indexOf(b&7968),"rollUp"===
this.mode_&&(0>c-this.rollUpRows_+1&&(c=this.rollUpRows_-1),this.setRollUp(a.pts,c)),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(c)&&(0===d&&(d=null),b=$a(c),b+=$a(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};R.prototype=new a;R.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(Pl){return console.error("Skipping malformed caption."),
""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};R.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=ea();this.nonDisplayed_=ea();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};R.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&
(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|
46};R.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};R.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};R.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};R.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};R.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};R.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};R.prototype.isNormalChar=
function(a){return 32<=a&&127>=a};R.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=ea(),this.displayed_=ea());if(void 0!==b&&b!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};R.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,
b){return a+"\x3c"+b+"\x3e"},"");this[this.mode_](a,b)};R.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"\x3c/"+b+"\x3e"},"");this.formatting_=[];this[this.mode_](a,b)}};R.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};R.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};R.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]=
"";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};R.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};O=R;var fa={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},pa=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a};J=function Se(a){var b,c;Se.prototype.init.call(this);this.type_=a||"shared";this.push=function(a){if("shared"===this.type_||a.type===this.type_)void 0===c&&
(c=a.dts),a.dts=pa(a.dts,c),a.pts=pa(a.pts,c),b=a.dts,this.trigger("data",a)};this.flush=function(){c=b;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){b=c=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};J.prototype=new a;var ma=function(a,b,c){for(var d="";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},ra=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},wa={TXXX:function(a){var b;
if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(ma(a.data,1,b));a.value=decodeURIComponent(ma(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(ma(a.data,1,b));a.url=decodeURIComponent(ma(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(ma(a.data,
0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var ta=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var c=0,d=[],f=0,n;ta.prototype.init.call(this);this.dispatchType=fa.METADATA_STREAM_TYPE.toString(16);if(a)for(n=0;n<a.length;n++)this.dispatchType+=("00"+a[n].toString(16)).slice(-2);this.push=function(a){var n;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(f=0,d.length=0),0===d.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&
console.log("Skipping unrecognized metadata packet");else if(d.push(a),f+=a.data.byteLength,1===d.length&&(c=ra(a.data.subarray(6,10)),c+=10),!(f<c)){a={data:new Uint8Array(c),frames:[],pts:d[0].pts,dts:d[0].dts};for(n=0;n<c;)a.data.set(d[0].data.subarray(0,c-n),n),n+=d[0].data.byteLength,f-=d[0].data.byteLength,d.shift();n=10;a.data[5]&64&&(n=n+4+ra(a.data.subarray(10,14)),c-=ra(a.data.subarray(16,20)));do{var g=ra(a.data.subarray(n+4,n+8));if(1>g)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
var x=String.fromCharCode(a.data[n],a.data[n+1],a.data[n+2],a.data[n+3]);x={id:x,data:a.data.subarray(n+10,n+g+10)};x.key=x.id;if(wa[x.id]&&(wa[x.id](x),"com.apple.streaming.transportStreamTimestamp"===x.owner)){var h=x.data,p=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;p*=4;p+=h[7]&3;x.timeStamp=p;void 0===a.pts&&void 0===a.dts&&(a.pts=x.timeStamp,a.dts=x.timeStamp);this.trigger("timestamp",x)}a.frames.push(x);n+=10;n+=g}while(n<c);this.trigger("data",a)}}};ta.prototype=new a;var ua=function(){var a=
new Uint8Array(188),b=0;ua.prototype.init.call(this);this.push=function(c){var d=0,f=188;if(b){var n=new Uint8Array(c.byteLength+b);n.set(a.subarray(0,b));n.set(c,b);b=0}else n=c;for(;f<n.byteLength;)71===n[d]&&71===n[f]?(this.trigger("data",n.subarray(d,f)),d+=188,f+=188):(d++,f++);d<n.byteLength&&(a.set(n.subarray(d),0),b=n.byteLength-d)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};
this.reset=function(){b=0;this.trigger("reset")}};ua.prototype=new a;var sa=function(){sa.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var f=0;b.payloadUnitStartIndicator&&(f+=a[f]+1);"pat"===b.type?c(a.subarray(f),b):d(a.subarray(f),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,audio:null,
"timed-metadata":{}};var f=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<f;){var n=b[d],g=(b[d+1]&31)<<8|b[d+2];n===fa.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=g:n===fa.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=g:n===fa.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][g]=n);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&64);
c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?fa.H264_STREAM_TYPE:
c.pid===this.programMapTable.audio?fa.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};sa.prototype=new a;sa.STREAM_TYPES={h264:27,adts:15};var za=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},f,n=function(b,c,d){var f=new Uint8Array(b.size),n={type:c},g,x=0;if(b.data.length&&!(9>b.size)){n.trackId=b.data[0].pid;for(g=0;g<b.data.length;g++){var h=b.data[g];f.set(h.data,x);x+=h.data.byteLength}n.packetLength=
6+(f[4]<<8|f[5]);n.dataAlignmentIndicator=0!==(f[6]&4);g=f[7];g&192&&(n.pts=(f[9]&14)<<27|(f[10]&255)<<20|(f[11]&254)<<12|(f[12]&255)<<5|(f[13]&254)>>>3,n.pts*=4,n.pts+=(f[13]&6)>>>1,n.dts=n.pts,g&64&&(n.dts=(f[14]&14)<<27|(f[15]&255)<<20|(f[16]&254)<<12|(f[17]&255)<<5|(f[18]&254)>>>3,n.dts*=4,n.dts+=(f[18]&6)>>>1));n.data=f.subarray(9+f[8]);c="video"===c||n.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",n)}};za.prototype.init.call(this);this.push=function(g){({pat:function(){},
pes:function(){switch(g.streamType){case fa.H264_STREAM_TYPE:case fa.H264_STREAM_TYPE:var a=b;var f="video";break;case fa.ADTS_STREAM_TYPE:a=c;f="audio";break;case fa.METADATA_STREAM_TYPE:a=d;f="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&n(a,f,!0);a.data.push(g);a.size+=g.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]};f=g.programMapTable;null!==f.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.video,codec:"avc",type:"video"});null!==
f.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[g.type]()};this.reset=function(){b.size=0;b.data.length=0;c.size=0;c.data.length=0;this.trigger("reset")};this.flushStreams_=function(){n(b,"video");n(c,"audio");n(d,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};za.prototype=new a;var na={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ua,TransportParseStream:sa,ElementaryStream:za,
TimestampRolloverStream:J,CaptionStream:D,Cea608Stream:O,MetadataStream:ta},xa;for(xa in fa)fa.hasOwnProperty(xa)&&(na[xa]=fa[xa]);var Ga=Q.ONE_SECOND_IN_TS,Da=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var ya=function(a){var b,c=0;ya.prototype.init.call(this);this.push=function(d){var f=0;a||(c=0);if("audio"===d.type){if(b){var n=b;b=new Uint8Array(n.byteLength+d.data.byteLength);b.set(n);b.set(d.data,n.byteLength)}else b=d.data;for(;f+5<b.length;)if(255!==b[f]||240!==
(b[f+1]&246))f++;else{n=2*(~b[f+1]&1);var g=(b[f+3]&3)<<11|b[f+4]<<3|(b[f+5]&224)>>5;var x=1024*((b[f+6]&3)+1);var h=x*Ga/Da[(b[f+2]&60)>>>2];g=f+g;if(b.byteLength<g)break;this.trigger("data",{pts:d.pts+c*h,dts:d.dts+c*h,sampleCount:x,audioobjecttype:(b[f+2]>>>6&3)+1,channelcount:(b[f+2]&1)<<2|(b[f+3]&192)>>>6,samplerate:Da[(b[f+2]&60)>>>2],samplingfrequencyindex:(b[f+2]&60)>>>2,samplesize:16,data:b.subarray(f+7+n,g)});c++;if(b.byteLength===g){b=void 0;break}b=b.subarray(g)}}};this.flush=function(){c=
0;this.trigger("done")};this.reset=function(){b=void 0;this.trigger("reset")};this.endTimeline=function(){b=void 0;this.trigger("endedtimeline")}};ya.prototype=new a;var Ha=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+d};this.loadWord=function(){var f=a.byteLength-b,n=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");n.set(a.subarray(f,f+g));c=(new DataView(n.buffer)).getUint32(0);d=8*g;b-=g};this.skipBits=
function(a){if(!(d>a)){a-=d;var f=Math.floor(a/8);a-=8*f;b-=f;this.loadWord()}c<<=a;d-=a};this.readBits=function(a){var f=Math.min(d,a),n=c>>>32-f;d-=f;0<d?c<<=f:0<b&&this.loadWord();f=a-f;return 0<f?n<<f|this.readBits(f):n};this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+
this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Ca=function(){var a=0,b,c;Ca.prototype.init.call(this);this.push=function(d){if(c){var f=new Uint8Array(c.byteLength+d.data.byteLength);f.set(c);f.set(d.data,
c.byteLength);c=f}else c=d.data;for(d=c.byteLength;a<d-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<d;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<d);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.reset=function(){c=null;a=0;this.trigger("reset")};this.flush=function(){c&&3<c.byteLength&&
this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};Ca.prototype=new a;var Ka={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Ea=function(){var a=new Ca,b,c,d;Ea.prototype.init.call(this);var f=this;this.push=function(f){"video"===f.type&&(b=f.trackId,c=f.pts,d=f.dts,a.push(f))};a.on("data",function(a){var n={trackId:b,pts:c,dts:d,data:a};switch(a[0]&31){case 5:n.nalUnitType=
"slice_layer_without_partitioning_rbsp_idr";break;case 6:n.nalUnitType="sei_rbsp";n.escapedRBSP=g(a.subarray(1));break;case 7:n.nalUnitType="seq_parameter_set_rbsp";n.escapedRBSP=g(a.subarray(1));n.config=x(n.escapedRBSP);break;case 8:n.nalUnitType="pic_parameter_set_rbsp";break;case 9:n.nalUnitType="access_unit_delimiter_rbsp"}f.trigger("data",n)});a.on("done",function(){f.trigger("done")});a.on("partialdone",function(){f.trigger("partialdone")});a.on("reset",function(){f.trigger("reset")});a.on("endedtimeline",
function(){f.trigger("endedtimeline")});this.flush=function(){a.flush()};this.partialFlush=function(){a.partialFlush()};this.reset=function(){a.reset()};this.endTimeline=function(){a.endTimeline()};var n=function(a,b){var c=8,d=8,f;for(f=0;f<a;f++)0!==d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var g=function(a){for(var b=a.byteLength,c=[],d=1,f;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;f=new Uint8Array(b);var n=0;for(d=0;d<b;n++,
d++)n===c[0]&&(n++,c.shift()),f[d]=a[n];return f};var x=function(a){var b=0,c=0,d=0,f=0,g=1;a=new Ha(a);var x=a.readUnsignedByte();var h=a.readUnsignedByte();var p=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(Ka[x]){var q=a.readUnsignedExpGolomb();3===q&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var K=3!==q?8:12;for(q=0;q<K;q++)a.readBoolean()&&(6>q?n(16,a):n(64,a))}}a.skipUnsignedExpGolomb();q=a.readUnsignedExpGolomb();if(0===q)a.readUnsignedExpGolomb();
else if(1===q)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),K=a.readUnsignedExpGolomb(),q=0;q<K;q++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);q=a.readUnsignedExpGolomb();K=a.readUnsignedExpGolomb();var m=a.readBits(1);0===m&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),c=a.readUnsignedExpGolomb(),d=a.readUnsignedExpGolomb(),f=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var va=a.readUnsignedByte();switch(va){case 1:var y=[1,1];
break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}y&&(g=y[0]/y[1])}return{profileIdc:x,levelIdc:p,
profileCompatibility:h,width:Math.ceil((16*(q+1)-2*b-2*c)*g),height:(2-m)*(K+1)*16-2*d-2*f,sarRatio:y}}};Ea.prototype=new a;var La=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Ja=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Fa={isLikelyAacData:function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1},parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+
5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;else return La[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+Ja(a.subarray(10,14)));do{var c=Ja(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var f=
0;f<d.byteLength;f++)if(0===d[f]){var n=unescape,g,x=d,h=f,q="";for(g=0;g<h;g++)q+="%"+("00"+x[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===n(q))return a=d.subarray(f+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}};var Ua=function(){var a=new Uint8Array,b=0;Ua.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.push=function(c){var d=0;if(a.length){var f=a.length;a=new Uint8Array(c.byteLength+
f);a.set(a.subarray(0,f));a.set(c,f)}else a=c;for(;3<=a.length-d;)if(73===a[d]&&68===a[d+1]&&51===a[d+2]){if(10>a.length-d)break;c=Fa.parseId3TagSize(a,d);if(d+c>a.length)break;f={type:"timed-metadata",data:a.subarray(d,d+c)};this.trigger("data",f);d+=c}else if(255===(a[d]&255)&&240===(a[d+1]&240)){if(7>a.length-d)break;c=Fa.parseAdtsSize(a,d);if(d+c>a.length)break;f={type:"audio",data:a.subarray(d,d+c),pts:b,dts:b};this.trigger("data",f);d+=c}else d++;a=0<a.length-d?a.subarray(d):new Uint8Array};
this.reset=function(){a=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){a=new Uint8Array;this.trigger("endedtimeline")}};Ua.prototype=new a;var Oa=Fa.isLikelyAacData,Ra=Q.ONE_SECOND_IN_TS,Na=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Qa="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),Sa=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Ta=function(a,b,
c,d,f,n){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(f-c)},prependedContentDuration:n,baseMediaDecodeTime:a}};var Ia=function(a,b){var c=[],d=0,f=0,n=0,g=Infinity;b=b||{};Ia.prototype.init.call(this);this.push=function(b){S.collectDtsInfo(a,b);a&&Na.forEach(function(c){a[c]=b[c]});c.push(b)};this.setEarliestDts=function(b){f=b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){g=a};this.setAudioAppendStart=function(a){n=a};this.flush=function(){if(0!==
c.length){var x=la.trimAdtsFramesByEarliestDts(c,a,f);a.baseMediaDecodeTime=S.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);la.prefixWithSilence(a,x,n,g);a.samples=la.generateSampleTable(x);var h=W.mdat(la.concatenateFrameData(x));c=[];var q=W.moof(d,[a]);var p=new Uint8Array(q.byteLength+h.byteLength);d++;p.set(q);p.set(h,q.byteLength);S.clearDtsInfo(a);q=Math.ceil(1024*Ra/a.samplerate);x.length&&this.trigger("timingInfo",{start:x[0].pts,end:x[0].pts+x.length*q});this.trigger("data",
{track:a,boxes:p})}this.trigger("done","AudioSegmentStream")};this.reset=function(){S.clearDtsInfo(a);c=[];this.trigger("reset")}};Ia.prototype=new a;var Ma=function(a,b){var c=0,d=[],f=[],n,g;b=b||{};Ma.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(b){S.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||n||(n=b.config,a.sps=[b.data],Qa.forEach(function(b){a[b]=n[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.data,a.pps=[b.data]);d.push(b)};
this.flush=function(){var n;var g=0;for(var x,h;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0!==d.length){var q=F.groupNalsIntoFrames(d);q=F.groupFramesIntoGops(q);q[0][0].keyFrame||((n=this.getGopForFusion_(d[0],a))?(g=n.duration,q.unshift(n),q.byteLength+=n.byteLength,q.nalCount+=n.nalCount,q.pts=n.pts,q.dts=n.dts,q.duration+=n.duration):q=F.extendFirstKeyFrame(q));if(f.length){n=b.alignGopsAtEnd?this.alignGopsAtEnd_(q):this.alignGopsAtStart_(q);if(!n){this.gopCache_.unshift({gop:q.pop(),
pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}S.clearDtsInfo(a);q=n}S.collectDtsInfo(a,q);a.samples=F.generateSampleTable(q);n=W.mdat(F.concatenateNalData(q));a.baseMediaDecodeTime=S.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",q.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));x=q[0];h=q[q.length-1];this.trigger("segmentTimingInfo",
Ta(a.baseMediaDecodeTime,x.dts,x.pts,h.dts+h.duration,h.pts+h.duration,g));this.trigger("timingInfo",{start:q[0].pts,end:q[q.length-1].pts+q[q.length-1].duration});this.gopCache_.unshift({gop:q.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);g=W.moof(c,[a]);q=new Uint8Array(g.byteLength+n.byteLength);c++;q.set(g);q.set(n,g.byteLength);this.trigger("data",
{track:a,boxes:q})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();d=[];this.gopCache_.length=0;f.length=0;this.trigger("reset")};this.resetStream_=function(){S.clearDtsInfo(a);g=n=void 0};this.getGopForFusion_=function(b){var c=Infinity,d;for(d=0;d<this.gopCache_.length;d++){var f=this.gopCache_[d];var n=f.gop;if(a.pps&&Sa(a.pps[0],f.pps[0])&&a.sps&&Sa(a.sps[0],f.sps[0])&&!(n.dts<a.timelineStartInfo.dts)&&(n=b.dts-n.dts-n.duration,-1E4<=n&&
45E3>=n&&(!g||c>n))){var g=f;c=n}}return g?g.gop:null};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var n=a.nalCount;var g=a.duration;for(b=c=0;b<f.length&&c<a.length;){var x=f[b];var h=a[c];if(x.pts===h.pts)break;h.pts>x.pts?b++:(c++,d-=h.byteLength,n-=h.nalCount,g-=h.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=g;a.nalCount=n;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=f.length-1;var d=a.length-
1;var n=null;for(b=!1;0<=c&&0<=d;){var g=f[c];var x=a[d];if(g.pts===x.pts){b=!0;break}g.pts>x.pts?c--:(c===f.length-1&&(n=d),d--)}if(!b&&null===n)return null;c=b?d:n;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){f=a}};Ma.prototype=
new a;var Ba=function(a,b){this.numberOfTracks=0;this.metadataStream=b;a=a||{};this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.keepOriginalTimestamps="boolean"===typeof a.keepOriginalTimestamps?a.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Ba.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);
this.pendingTracks.push(a.track);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes));"audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))}};Ba.prototype=new a;Ba.prototype.flush=function(a){var b=0,c={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;
this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,Qa.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,Na.forEach(function(a){c.info[a]=this.audioTrack[a]},this));if(this.videoTrack||this.audioTrack){c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=W.initSegment(this.pendingTracks);
c.initSegment=new Uint8Array(a.byteLength);c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=Q.metadataTsToSeconds(b.startPts,d,this.keepOriginalTimestamps),b.endTime=Q.metadataTsToSeconds(b.endPts,d,this.keepOriginalTimestamps),c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=
this.pendingMetadata[a],b.cueTime=Q.metadataTsToSeconds(b.pts,d,this.keepOriginalTimestamps),c.metadata.push(b);c.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",c);for(a=0;a<c.captions.length;a++)b=c.captions[a],this.trigger("caption",b);for(a=0;a<c.metadata.length;a++)b=c.metadata[a],this.trigger("id3Frame",b)}this.emittedTracks>=
this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};Ba.prototype.setRemux=function(a){this.remuxTracks=a};var Pa=function(a){var b=this,c=!0,d,f;Pa.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="aac";c.metadataStream=new na.MetadataStream;c.aacStream=new Ua;c.audioTimestampRolloverStream=new na.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=
new na.TimestampRolloverStream("timed-metadata");c.adtsStream=new ya;c.coalesceStream=new Ba(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(n){"timed-metadata"!==n.type||c.audioSegmentStream||(f=f||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},
codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new Ia(f,a),c.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream));b.trigger("trackinfo",{hasAudio:!!f,hasVideo:!!d})});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new na.MetadataStream;
c.packetStream=new na.TransportPacketStream;c.parseStream=new na.TransportParseStream;c.elementaryStream=new na.ElementaryStream;c.timestampRolloverStream=new na.TimestampRolloverStream;c.adtsStream=new ya;c.h264Stream=new Ea;c.captionStream=new na.CaptionStream;c.coalesceStream=new Ba(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream).pipe(c.timestampRolloverStream);c.timestampRolloverStream.pipe(c.h264Stream);c.timestampRolloverStream.pipe(c.adtsStream);
c.timestampRolloverStream.pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",function(n){var g;if("metadata"===n.type){for(g=n.tracks.length;g--;)d||"video"!==n.tracks[g].type?f||"audio"!==n.tracks[g].type||(f=n.tracks[g],f.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(d=n.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);d&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,
c.videoSegmentStream=new Ma(d,a),c.videoSegmentStream.on("timelineStartInfo",function(a){f&&(f.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){f&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.videoSegmentStream.on("timingInfo",b.trigger.bind(b,"videoTimingInfo")),
c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));f&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new Ia(f,a),c.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream));b.trigger("trackinfo",{hasAudio:!!f,hasVideo:!!d})}});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("id3Frame",function(a){a.dispatchType=c.metadataStream.dispatchType;b.trigger("id3Frame",
a)});c.coalesceStream.on("caption",this.trigger.bind(this,"caption"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(b){var c=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=b);f&&(f.timelineStartInfo.dts=void 0,f.timelineStartInfo.pts=void 0,S.clearDtsInfo(f),a.keepOriginalTimestamps||(f.timelineStartInfo.baseMediaDecodeTime=b),c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());d&&(c.videoSegmentStream&&
(c.videoSegmentStream.gopCache_=[]),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,S.clearDtsInfo(d),c.captionStream.reset(),a.keepOriginalTimestamps||(d.timelineStartInfo.baseMediaDecodeTime=b));c.timestampRolloverStream&&c.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){f&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b;c&&c.coalesceStream&&c.coalesceStream.setRemux(b)};
this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=Oa(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};
this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};Pa.prototype=new a;var Wa=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Xa=function(a,
b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};c=b.data;b.data=c.buffer;a.postMessage({action:"data",segment:b,byteOffset:c.byteOffset,byteLength:c.byteLength},[b.data])});if(b.captionStream)b.captionStream.on("data",function(b){a.postMessage({action:"caption",data:b})});b.on("done",function(b){a.postMessage({action:"done"})});b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})});b.on("videoSegmentTimingInfo",
function(b){a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})})},Va=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=c||{};this.self=b;this.init()}Wa(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new Pa(this.options);Xa(this.self,this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",
value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return a}();
return new function(a){a.onmessage=function(b){if("init"===b.data.action&&b.data.options)this.messageHandlers=new Va(a,b.data.options);else if(this.messageHandlers||(this.messageHandlers=new Va(a)),b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action])this.messageHandlers[b.data.action](b.data)}}(c)})()}),Rh={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Sh=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,
b,c){a=("00"+Number(b).toString(16)).slice(-2);c=("00"+Number(c).toString(16)).slice(-2);return"avc1."+a+"00"+c})})},Ec=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b={codecCount:0},c;b.codecCount=a.split(",").length;b.codecCount=b.codecCount||2;if(c=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(a))b.videoCodec=c[2],b.videoObjectTypeIndicator=c[3];b.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a);b.audioProfile=b.audioProfile&&b.audioProfile[2];return b},Yk=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,
function(a){return Sh([a])[0]})},Te=function(a,b,c){return a+"/"+b+'; codecs\x3d"'+c.filter(function(a){return!!a}).join(", ")+'"'},Zk=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;a=a.mediaGroups.AUDIO[b];if(!a)return null;for(var c in a)if(b=a[c],b["default"]&&b.playlists)return Ec(b.playlists[0].attributes.CODECS).audioProfile;return null},Th=function(a){var b={type:"",parameters:{}};a=a.trim().split(";");b.type=a.shift().trim();a.forEach(function(a){var c=a.trim().split("\x3d");1<c.length&&
(a=c[0].replace(/"/g,"").trim(),c=c[1].replace(/"/g,"").trim(),b.parameters[a]=c)});return b},Ue=function(a){return/mp4a\.\d+.\d+/i.test(a)},Ve=function(a){return/avc1\.[\da-f]+/i.test(a)},$k=function(a,b,c){if("undefined"===typeof b||null===b||!a.length)return[];b=Math.ceil(9E4*(b-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)},al=function(a,b,c){var d=null,f=null,n=0,g=[],h=[];if(!a&&!b)return w.createTimeRange();if(!a)return b.buffered;if(!b||c)return a.buffered;if(0===a.buffered.length&&
0===b.buffered.length)return w.createTimeRange();a=a.buffered;b=b.buffered;for(c=a.length;c--;)g.push({time:a.start(c),type:"start"}),g.push({time:a.end(c),type:"end"});for(c=b.length;c--;)g.push({time:b.start(c),type:"start"}),g.push({time:b.end(c),type:"end"});g.sort(function(a,b){return a.time-b.time});for(c=0;c<g.length;c++)"start"===g[c].type?(n++,2===n&&(d=g[c].time)):"end"===g[c].type&&(n--,1===n&&(f=g[c].time)),null!==d&&null!==f&&(h.push([d,f]),f=d=null);return w.createTimeRanges(h)},bl=
function(a,b){var c=a.addSourceBuffer(b),d=Object.create(null);d.updating=!1;d.realBuffer_=c;a=function(a){"function"===typeof c[a]?d[a]=function(){return c[a].apply(c,arguments)}:"undefined"===typeof d[a]&&Object.defineProperty(d,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var f in c)a(f);return d},cl=function(a){function b(a,c){Ba(this,b);var d=eb(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w.EventTarget));d.timestampOffset_=0;d.pendingBuffers_=[];d.bufferUpdating_=
!1;d.mediaSource_=a;d.codecs_=c;d.audioCodec_=null;d.videoCodec_=null;d.audioDisabled_=!1;d.appendAudioInitSegment_=!0;d.gopBuffer_=[];d.timeMapping_=0;d.safeAppend_=11<=w.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:d.safeAppend_};d.codecs_.forEach(function(a){Ue(a)?d.audioCodec_=a:Ve(a)&&(d.videoCodec_=a)});d.transmuxer_=new Xk;d.transmuxer_.postMessage({action:"init",options:a});d.transmuxer_.onmessage=function(a){if("data"===a.data.action)return d.data_(a);if("done"===a.data.action)return d.done_(a);
if("gopInfo"===a.data.action)return d.appendGopInfo_(a);if("videoSegmentTimingInfo"===a.data.action)return d.videoSegmentTimingInfo_(a.data.videoSegmentTimingInfo)};Object.defineProperty(d,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(d,
"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(d,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(d,"buffered",{get:function(){return al(this.videoBuffer_,
this.audioBuffer_,this.audioDisabled_)}});return d}pb(b,a);Xa(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);a=this.mediaSource_.player_;if(b.captions&&b.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var c in b.captionStreams)if(!this.inbandTextTracks_[c]){a.tech_.trigger({type:"usage",name:"hls-608"});
var d=a.textTracks().getTrackById(c);this.inbandTextTracks_[c]=d?d:a.addRemoteTextTrack({kind:"captions",id:c,label:c},!1).track}}b.metadata&&b.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=b.metadata.dispatchType);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},
{key:"videoSegmentTimingInfo_",value:function(a){var b={start:{decode:a.start.dts/9E4,presentation:a.start.pts/9E4},end:{decode:a.end.dts/9E4,presentation:a.end.pts/9E4},baseMediaDecodeTime:a.baseMediaDecodeTime/9E4};a.prependedContentDuration&&(b.prependedContentDuration=a.prependedContentDuration/9E4);this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+
"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?(d=a.mediaSource_[c+"Buffer_"],d.updating=!1):(d=bl(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs\x3d"'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=d);a[c+"Buffer_"]=d;["update","updatestart","updateend"].forEach(function(f){d.addEventListener(f,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===f&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?
!1:!0}))return a.trigger(f)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:$k(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",
data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var b=this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)b=a.slice();else{var c=a[0].pts,d=0;for(d;d<b.length&&!(b[d].pts>=c);d++);b=b.slice(0,d).concat(a)}this.gopBuffer_=b}},{key:"remove",value:function(a,b){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,b);var c=this.gopBuffer_,d=this.timeMapping_,
f=Math.ceil(9E4*(a-d)),n=Math.ceil(9E4*(b-d));d=c.slice();for(var g=c.length;g--&&!(c[g].pts<=n););if(-1!==g){for(n=g+1;n--&&!(c[n].pts<=f););n=Math.max(n,0);d.splice(n,g-n+1)}this.gopBuffer_=d}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));jc(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var x in this.inbandTextTracks_)jc(a,b,this.inbandTextTracks_[x])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},
audio:{segments:[],bytes:0},captions:[],metadata:[]};if(this.pendingBuffers_.length){a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data,f=b.initSegment;a[c].segments.push(d);a[c].bytes+=d.byteLength;a[c].initSegment=f;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=
null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,
this.concatAndAppendSegments_(a.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);Vk(this,a.captions,a.metadata);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend")}else this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,d=void 0;if(a.bytes){d=new Uint8Array(a.bytes);a.segments.forEach(function(a){d.set(a,
c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(d)}catch(Qb){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:Qb.message,originalError:Qb})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}},{key:"dispose",value:function(){this.trigger("dispose");
this.off()}}]);return b}(w.EventTarget),We=function(c){function d(){Ba(this,d);var c=eb(this,(d.__proto__||Object.getPrototypeOf(d)).call(this)),f=void 0;c.nativeMediaSource_=new a.MediaSource;for(f in c.nativeMediaSource_)f in d.prototype||"function"!==typeof c.nativeMediaSource_[f]||(c[f]=c.nativeMediaSource_[f].bind(c.nativeMediaSource_));c.duration_=NaN;Object.defineProperty(c,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=
a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(c,"seekable",{get:function(){return Infinity===this.duration_?w.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(c,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(c,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});c.sourceBuffers=[];c.activeSourceBuffers_=[];c.updateActiveSourceBuffers_=
function(){c.activeSourceBuffers_.length=0;if(1===c.sourceBuffers.length){var a=c.sourceBuffers[0];a.appendAudioInitSegment_=!0;a.audioDisabled_=!a.audioCodec_;c.activeSourceBuffers_.push(a)}else{var b=!1,d=!0;for(a=0;a<c.player_.audioTracks().length;a++){var f=c.player_.audioTracks()[a];if(f.enabled&&"main"!==f.kind){b=!0;d=!1;break}}c.sourceBuffers.forEach(function(a,f){a.appendAudioInitSegment_=!0;if(a.videoCodec_&&a.audioCodec_)a.audioDisabled_=b;else if(a.videoCodec_&&!a.audioCodec_)a.audioDisabled_=
!0,d=!1;else if(!a.videoCodec_&&a.audioCodec_&&(a.audioDisabled_=f?d:!d,a.audioDisabled_))return;c.activeSourceBuffers_.push(a)})}};c.onPlayerMediachange_=function(){c.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};c.onHlsReset_=function(){c.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};c.onHlsSegmentTimeMapping_=function(a){c.sourceBuffers.forEach(function(b){return b.timeMapping_=a.mapping})};["sourceopen","sourceclose",
"sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},c);c.on("sourceopen",function(a){if(a=b.querySelector('[src\x3d"'+c.url_+'"]'))c.player_=w(a.parentNode),c.player_&&(c.player_.tech_.on("hls-reset",c.onHlsReset_),c.player_.tech_.on("hls-segment-time-mapping",c.onHlsSegmentTimeMapping_),c.player_.audioTracks&&c.player_.audioTracks()&&(c.player_.audioTracks().on("change",c.updateActiveSourceBuffers_),c.player_.audioTracks().on("addtrack",c.updateActiveSourceBuffers_),
c.player_.audioTracks().on("removetrack",c.updateActiveSourceBuffers_)),c.player_.on("mediachange",c.onPlayerMediachange_))});c.on("sourceended",function(a){a=Oh(c.duration);for(var b=0;b<c.sourceBuffers.length;b++){var d=c.sourceBuffers[b];(d=d.metadataTrack_&&d.metadataTrack_.cues)&&d.length&&(d[d.length-1].endTime=a)}});c.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&
this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});
return c}pb(d,c);Xa(d,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=Th(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),
a=Sh(a),a=a.filter(function(a){return Ue(a)||Ve(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new cl(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}},{key:"dispose",value:function(){this.trigger("dispose");this.off();this.sourceBuffers.forEach(function(a){a.dispose&&a.dispose()});this.sourceBuffers.length=
0}}]);return d}(w.EventTarget),Uh=0;w.mediaSources={};var Vh=function(a,b){if(a=w.mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");},Xe=function(){return!!a.MediaSource&&!!a.MediaSource.isTypeSupported&&a.MediaSource.isTypeSupported('video/mp4;codecs\x3d"avc1.4d400d,mp4a.40.2"')},Fc=function(){this.MediaSource={open:Vh,supportsNativeMediaSources:Xe};if(Xe())return new We;throw Error("Cannot use create a virtual MediaSource for this video");
};Fc.open=Vh;Fc.supportsNativeMediaSources=Xe;var Wh={createObjectURL:function(b){if(b instanceof We){var c=a.URL.createObjectURL(b.nativeMediaSource_);return b.url_=c}if(!(b instanceof We))return c=a.URL.createObjectURL(b),b.url_=c;c="blob:vjs-media-source/"+Uh;Uh++;w.mediaSources[c]=b;return c}};w.MediaSource=Fc;w.URL=Wh;var Xh=w.mergeOptions,Yh=function(a,b){var c=void 0,d=Xh(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod});for(a=0;a<b.playlists.length;a++){var f=Me(d,b.playlists[a]);
f?d=f:c=!0}qd(b,function(a,b,f,n){if(a.playlists&&a.playlists.length){var g=a.playlists[0].id;if(a=Me(d,a.playlists[0]))d=a,d.mediaGroups[b][f][n].playlists[0]=d.playlists[g],c=!1}});return c?null:d},Ye=function(a){return a.uri+"-"+a.byterange.offset+"-"+(a.byterange.offset+a.byterange.length-1)},Zh=function(a,b){var c={},d;for(d in a){var f=a[d].sidx;if(f){var g=Ye(f);if(!b[g])break;var h=b[g].sidxInfo;(!h.map&&!f.map||h.map&&f.map&&h.map.byterange.offset===f.map.byterange.offset&&h.map.byterange.length===
f.map.byterange.length)&&h.uri===f.uri&&h.byterange.offset===f.byterange.offset&&h.byterange.length===f.byterange.length&&(c[g]=b[g])}}return c},dl=function(a,b,c,d){a=oh(a,{manifestUri:b,clientOffset:c});var f=Zh(a.playlists,d);qd(a,function(a,b,c,n){a.playlists&&a.playlists.length&&(f=Xh(f,Zh(a.playlists,d)))});return f},$h=function(a,b,c,d,f){a={uri:pd(d.handleManifestRedirects,a.resolvedUri),byterange:a.byterange,playlist:b};a=w.mergeOptions(a,{responseType:"arraybuffer",headers:Pe(a)});return c(a,
f)},Ze=function(b){function c(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},f=arguments[3];Ba(this,c);var n=eb(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),g=d.withCredentials;d=d.handleManifestRedirects;n.hls_=b;n.withCredentials=void 0===g?!1:g;n.handleManifestRedirects=void 0===d?!1:d;if(!a)throw Error("A non-empty playlist URL or playlist is required");n.on("minimumUpdatePeriod",function(){n.refreshXml_()});n.on("mediaupdatetimeout",function(){n.refreshMedia_(n.media().id)});
n.state="HAVE_NOTHING";n.loadedPlaylists_={};if("string"===typeof a)return n.srcUrl=a,n.sidxMapping_={},eb(n);n.setupChildLoader(f,a);return n}pb(c,b);Xa(c,[{key:"setupChildLoader",value:function(a,b){this.masterPlaylistLoader_=a;this.childPlaylist_=b}},{key:"dispose",value:function(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};a.clearTimeout(this.minimumUpdatePeriodTimeout_);a.clearTimeout(this.mediaRequest_);a.clearTimeout(this.mediaUpdateTimeout);this.off()}},{key:"hasPendingRequest",
value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"sidxRequestFinished_",value:function(a,b,c,d){var f=this;return function(n,g){if(f.request){f.request=null;if(n)return f.error={status:g.status,message:"DASH playlist request error at URL: "+a.uri,response:g.response,code:2},c&&(f.state=c),f.trigger("error"),d(b,null);n=new Uint8Array(g.response);n=ea.parseSidx(n.subarray(8));
return d(b,n)}}}},{key:"media",value:function(b){var c=this;if(!b)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var d=this.state;if("string"===typeof b){if(!this.master.playlists[b])throw Error("Unknown playlist URI: "+b);b=this.master.playlists[b]}var f=!this.media_||b.id!==this.media_.id;if(f&&this.loadedPlaylists_[b.id]&&this.loadedPlaylists_[b.id].endList)this.state="HAVE_METADATA",this.media_=b,f&&(this.trigger("mediachanging"),
this.trigger("mediachange"));else if(f)if(this.media_&&this.trigger("mediachanging"),b.sidx){var n=f=void 0;this.masterPlaylistLoader_?(f=this.masterPlaylistLoader_.master,n=this.masterPlaylistLoader_.sidxMapping_):(f=this.master,n=this.sidxMapping_);var g=Ye(b.sidx);n[g]={sidxInfo:b.sidx};this.request=$h(b.sidx,b,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(b,f,d,function(a,f){if(!a||!f)throw Error("failed to request sidx");n[g].sidx=f;c.haveMetadata({startingState:d,
playlist:a.playlists[b.id]})}))}else this.mediaRequest_=a.setTimeout(this.haveMetadata.bind(this,{startingState:d,playlist:b}),0)}},{key:"haveMetadata",value:function(a){var b=a.startingState;a=a.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[a.id]=a;this.mediaRequest_=null;this.refreshMedia_(a.id);"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest();a.clearTimeout(this.mediaUpdateTimeout);a.clearTimeout(this.minimumUpdatePeriodTimeout_);
"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(b){var c=this;a.clearTimeout(this.mediaUpdateTimeout);a.clearTimeout(this.minimumUpdatePeriodTimeout_);var d=this.media();b?this.mediaUpdateTimeout=a.setTimeout(function(){return c.load()},d?d.targetDuration/2*1E3:5E3):this.started?d&&!d.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=oh(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,
sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var b=0;b<a.playlists.length;b++)a.playlists[b].uri="placeholder-uri-"+b;qd(a,function(b,c,d,f){b.playlists&&b.playlists.length&&(c="placeholder-uri-"+c+"-"+d+"-"+f,d="0-"+c,b.playlists[0].uri=c,b.playlists[0].id=d,a.playlists[d]=b.playlists[0],a.playlists[c]=b.playlists[0])});wh(a);xh(a);return a}},{key:"start",value:function(){var b=this;this.started=!0;this.masterPlaylistLoader_?this.mediaRequest_=a.setTimeout(this.haveMaster_.bind(this),0):
this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(a,c){if(b.request){b.request=null;if(a)return b.error={status:c.status,message:"DASH playlist request error at URL: "+b.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===b.state&&(b.started=!1),b.trigger("error");b.masterXml_=c.responseText;b.masterLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now();b.srcUrl=pd(b.handleManifestRedirects,b.srcUrl,c);b.syncClientServerClock_(b.onClientServerClockSync_.bind(b))}})}},
{key:"syncClientServerClock_",value:function(a){var b=this,c=ok(nh(this.masterXml_));if(null===c)return this.clientOffset_=this.masterLoaded_-Date.now(),a();if("DIRECT"===c.method)return this.clientOffset_=c.value-Date.now(),a();this.request=this.hls_.xhr({uri:Lb(this.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,f){if(b.request){if(d)return b.clientOffset_=b.masterLoaded_-Date.now(),a();d="HEAD"===c.method?f.responseHeaders&&f.responseHeaders.date?Date.parse(f.responseHeaders.date):
b.masterLoaded_:Date.parse(f.responseText);b.clientOffset_=d-Date.now();a()}})}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER";this.mediaRequest_=null;this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var b=this;this.haveMaster_();this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]);this.master&&this.master.minimumUpdatePeriod&&
(this.minimumUpdatePeriodTimeout_=a.setTimeout(function(){b.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var b=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(c,d){if(b.request){b.request=null;if(c)return b.error={status:d.status,message:"DASH playlist request error at URL: "+b.srcUrl,responseText:d.responseText,code:2},"HAVE_NOTHING"===b.state&&(b.started=!1),b.trigger("error");b.masterXml_=
d.responseText;b.sidxMapping_=dl(b.masterXml_,b.srcUrl,b.clientOffset_,b.sidxMapping_);c=b.parseMasterXml();d=Yh(b.master,c);var f=b.media().sidx;if(d)if(f){var n=Ye(f);b.sidxMapping_[n]||(d=b.media(),b.request=$h(d.sidx,d,b.hls_.xhr,{handleManifestRedirects:b.handleManifestRedirects},b.sidxRequestFinished_(d,c,b.state,function(c,d){if(!c||!d)throw Error("failed to request sidx on minimumUpdatePeriod");b.sidxMapping_[n].sidx=d;b.minimumUpdatePeriodTimeout_=a.setTimeout(function(){b.trigger("minimumUpdatePeriod")},
b.master.minimumUpdatePeriod);b.refreshMedia_(b.media().id)})))}else b.master=d;b.minimumUpdatePeriodTimeout_=a.setTimeout(function(){b.trigger("minimumUpdatePeriod")},b.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(b){var c=this;if(!b)throw Error("refreshMedia_ must take a media id");var d=void 0,f=void 0;this.masterPlaylistLoader_?(d=this.masterPlaylistLoader_.master,f=this.masterPlaylistLoader_.parseMasterXml()):(d=this.master,f=this.parseMasterXml());(d=Yh(d,f))?(this.masterPlaylistLoader_?
this.masterPlaylistLoader_.master=d:this.master=d,this.media_=d.playlists[b]):(this.media_=f.playlists[b],this.trigger("playlistunchanged"));this.media().endList||(this.mediaUpdateTimeout=a.setTimeout(function(){c.trigger("mediaupdatetimeout")},yh(this.media(),!!d)));this.trigger("loadedplaylist")}}]);return c}(w.EventTarget),Gc=function(a){return w.log.debug?w.log.debug.bind(w,"VHS:",a+" \x3e"):function(){}},el=function(){function a(b,c,d,f){Ba(this,a);this.callbacks_=[];this.pendingCallback_=null;
this.timestampOffset_=0;this.mediaSource=b;this.processedAppend_=!1;this.type_=d;this.mimeType_=c;this.logger_=Gc("SourceUpdater["+d+"]["+c+"]");"closed"===b.readyState?b.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,c,f)):this.createSourceBuffer_(c,f)}Xa(a,[{key:"createSourceBuffer_",value:function(a,b){var c=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(a);this.logger_("created SourceBuffer");if(b&&(b.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)){b.on("sourcebufferadded",
function(){c.start_()});return}this.start_()}},{key:"start_",value:function(){var a=this;this.started_=!0;this.onUpdateendCallback_=function(){var b=a.pendingCallback_;a.pendingCallback_=null;a.sourceBuffer_.removing=!1;a.logger_("buffered ["+Qe(a.buffered())+"]");b&&b();a.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},
a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0;this.queueCallback_(function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.addEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback);c.sourceBuffer_.appendBuffer(a.bytes)},function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback);b()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:
w.createTimeRanges()}},{key:"remove",value:function(a,b){var c=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Yb;this.processedAppend_&&this.queueCallback_(function(){c.logger_("remove ["+a+" \x3d\x3e "+b+"]");c.sourceBuffer_.removing=!0;c.sourceBuffer_.remove(a,b)},d)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Yb}},{key:"timestampOffset",value:function(a){var b=this;"undefined"!==typeof a&&
(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a;b.runCallback_()}),this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",value:function(){var a=this,b=function K(){a.sourceBuffer_&&"open"===a.mediaSource.readyState&&
a.sourceBuffer_.abort();a.sourceBuffer_.removeEventListener("updateend",K)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",b):b()}}]);return a}(),Na={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},ai=function(a){a.forEach(function(a){a.abort()})},
fl=function(a){var b=a.target;b=Date.now()-b.requestTime;b={bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},$e=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b}:null},gl=
function(a,b){return function(c,d){var f=d.response;if(c=$e(c,d))return b(c,a);if(16!==f.byteLength)return b({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:2,xhr:d},a);d=new DataView(f);a.key.bytes=new Uint32Array([d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12)]);return b(null,a)}},hl=function(a,b,c){return function(d,f){var n=f.response;if(d=$e(d,f))return c(d,a);if(0===n.byteLength)return c({status:f.status,message:"Empty HLS segment content at URL: "+f.uri,code:2,
xhr:f},a);a.map.bytes=new Uint8Array(f.response);b&&!b.isInitialized()&&b.init();a.map.timescales=nb.timescale(a.map.bytes);a.map.videoTrackIds=nb.videoTrackIds(a.map.bytes);return c(null,a)}},il=function(a,b,c){return function(d,f){var n=f.response;if(d=$e(d,f))return c(d,a);if(0===n.byteLength)return c({status:f.status,message:"Empty HLS segment content at URL: "+f.uri,code:2,xhr:f},a);a.stats={bandwidth:f.bandwidth,bytesReceived:f.bytesReceived||0,roundTripTime:f.roundTripTime||0};a.key?a.encryptedBytes=
new Uint8Array(f.response):a.bytes=new Uint8Array(f.response);b&&a.map&&a.map.bytes&&(b.isInitialized()||b.init(),(f=b.parse(a.bytes,a.map.videoTrackIds,a.map.timescales))&&f.captions&&(a.captionStreams=f.captionStreams,a.fmp4Captions=f.captions));return c(null,a)}},jl=function(a,b,c){a.addEventListener("message",function Qb(d){if(d.data.source===b.requestId)return a.removeEventListener("message",Qb),d=d.data.decrypted,b.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),c(null,b)});var d=void 0;
d=b.key.bytes.slice?b.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.key.bytes));a.postMessage(Ih({source:b.requestId,encrypted:b.encryptedBytes,key:d,iv:b.key.iv}),[b.encryptedBytes.buffer,d.buffer])},kl=function(a,b,c){var d=0,f=!1;return function(n,g){if(!f){if(n)return f=!0,ai(a),c(n,g);d+=1;if(d===a.length)return g.endOfAllRequests=Date.now(),g.encryptedBytes?jl(b,g,c):c(null,g)}}},ll=function(a,b){return function(c){a.stats=w.mergeOptions(a.stats,fl(c));!a.stats.firstBytesReceivedAt&&
a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());return b(c,a)}},ml=function(a,b,c,d,f,g,h){var n=[];c=kl(n,c,h);if(f.key&&!f.key.bytes){h=w.mergeOptions(b,{uri:f.key.resolvedUri,responseType:"arraybuffer"});var x=gl(f,c);h=a(h,x);n.push(h)}f.map&&!f.map.bytes&&(h=w.mergeOptions(b,{uri:f.map.resolvedUri,responseType:"arraybuffer",headers:Pe(f.map)}),x=hl(f,d,c),h=a(h,x),n.push(h));b=w.mergeOptions(b,{uri:f.resolvedUri,responseType:"arraybuffer",headers:Pe(f)});d=il(f,d,c);a=a(b,d);
a.addEventListener("progress",ll(f,g));n.push(a);return function(){return ai(n)}},bi=function(b,c){return b?(b=a.getComputedStyle(b))?b[c]:"":""},Hc=function(a,b){var c=a.slice();a.sort(function(a,d){var f=b(a,d);return 0===f?c.indexOf(a)-c.indexOf(d):f})},af=function(b,c){var d=void 0,f=void 0;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||a.Number.MAX_VALUE;c.attributes.BANDWIDTH&&(f=c.attributes.BANDWIDTH);f=f||a.Number.MAX_VALUE;return d-f},nl=function(b,c,d,f,g){b=b.playlists.map(function(b){var c=
b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width;var d=b.attributes.RESOLUTION&&b.attributes.RESOLUTION.height;var f=(f=b.attributes.BANDWIDTH)||a.Number.MAX_VALUE;return{bandwidth:f,width:c,height:d,playlist:b}});Hc(b,function(a,b){return a.bandwidth-b.bandwidth});b=b.filter(function(a){return!Ja.isIncompatible(a.playlist)});var n=b.filter(function(a){return Ja.isEnabled(a.playlist)});n.length||(n=b.filter(function(a){return!Ja.isDisabled(a.playlist)}));var x=n.filter(function(a){return a.bandwidth*
Na.BANDWIDTH_VARIANCE<c}),h=x[x.length-1],p=x.filter(function(a){return a.bandwidth===h.bandwidth})[0];if(!1===g)return(b=p||n[0]||b[0])?b.playlist:null;g=x.filter(function(a){return a.width&&a.height});Hc(g,function(a,b){return a.width-b.width});x=g.filter(function(a){return a.width===d&&a.height===f});h=x[x.length-1];x=x.filter(function(a){return a.bandwidth===h.bandwidth})[0];var m=void 0,q=void 0;q=void 0;x||(m=g.filter(function(a){return a.width>d||a.height>f}),q=m.filter(function(a){return a.width===
m[0].width&&a.height===m[0].height}),h=q[q.length-1],q=q.filter(function(a){return a.bandwidth===h.bandwidth})[0]);return(b=q||x||p||n[0]||b[0])?b.playlist:null},ol=function(a){var b=a.currentTime,c=a.bandwidth,d=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,h=a.currentTimeline,p=a.syncController;a=a.master.playlists.filter(function(a){return!Ja.isIncompatible(a)});var m=a.filter(Ja.isEnabled);m.length||(m=a.filter(function(a){return!Ja.isDisabled(a)}));a=m.filter(Ja.hasAttribute.bind(null,
"BANDWIDTH")).map(function(a){var n=p.getSyncPoint(a,d,h,b)?1:2;n=Ja.estimateSegmentRequestTime(f,c,a)*n-g;return{playlist:a,rebufferingImpact:n}});m=a.filter(function(a){return 0>=a.rebufferingImpact});Hc(m,function(a,b){return af(b.playlist,a.playlist)});if(m.length)return m[0];Hc(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null},pl=function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var f=window.WebKitDataCue||window.VTTCue;c.forEach(function(a){var c=
a.stream,n=a.startTime,g=a.endTime;b[c]&&(n+=d,g+=d,b[c].addCue(new f(n,g,a.text)))})}},ql=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null},rl=function(a){var b=a.segment,c=a.playlist,d=c.mediaSequence,f=c.segments;return["appending ["+a.mediaIndex+"] of ["+d+", "+(d+(void 0===f?[]:f).length)+"] from playlist ["+c.id+"]","["+b.start+" \x3d\x3e "+b.end+"] in timeline ["+a.timeline+"]"].join(" ")},bf=function(b){function c(a){Ba(this,c);var b=eb(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==
typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");b.bandwidth=a.bandwidth;b.throughput={rate:0,count:0};b.roundTrip=NaN;b.resetStats_();b.mediaIndex=null;b.hasPlayed_=a.hasPlayed;b.currentTime_=a.currentTime;b.seekable_=a.seekable;b.seeking_=a.seeking;b.duration_=a.duration;b.mediaSource_=a.mediaSource;b.hls_=a.hls;b.loaderType_=a.loaderType;b.startingMedia_=void 0;b.segmentMetadataTrack_=a.segmentMetadataTrack;
b.goalBufferLength_=a.goalBufferLength;b.sourceType_=a.sourceType;b.inbandTextTracks_=a.inbandTextTracks;b.state_="INIT";b.checkBufferTimeout_=null;b.error_=void 0;b.currentTimeline_=-1;b.pendingSegment_=null;b.mimeType_=null;b.sourceUpdater_=null;b.xhrOptions_=null;b.activeInitSegmentId_=null;b.initSegments_={};b.cacheEncryptionKeys_=a.cacheEncryptionKeys;b.keyCache_={};b.captionParser_="main"===b.loaderType_?new uk:null;b.decrypter_=a.decrypter;b.syncController_=a.syncController;b.syncPoint_={segmentIndex:0,
time:0};b.triggerSyncInfoUpdate_=function(){return b.trigger("syncinfoupdate")};b.syncController_.on("syncinfoupdate",b.triggerSyncInfoUpdate_);b.mediaSource_.addEventListener("sourceopen",function(){return b.ended_=!1});b.fetchAtBuffer_=!1;b.logger_=Gc("SegmentLoader["+b.loaderType_+"]");Object.defineProperty(b,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -\x3e "+a),this.state_=a)}});return b}pb(c,b);Xa(c,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=
this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_&&this.captionParser_.reset();this.checkBufferTimeout_&&a.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",
this.triggerSyncInfoUpdate_);this.off()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=
!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():w.createTimeRanges()}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=td(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,timescales:a.timescales,videoTrackIds:a.videoTrackIds});return d||a}},{key:"segmentKey",
value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=a.resolvedUri,d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});b={resolvedUri:(d||a).resolvedUri};d&&(b.bytes=d.bytes);return b}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();
if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new el(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{};if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0});b=null;c&&(c.id?b=c.id:c.uri&&(b=c.uri));this.logger_("playlist update ["+b+" \x3d\x3e "+(a.id||a.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("live window shift ["+b+"]"),null!==
this.mediaIndex&&(this.mediaIndex-=b),d&&(d.mediaIndex-=b,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(c,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=
b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,Infinity,a);this.captionParser_&&this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b,c){Infinity===b&&(b=this.duration_());
this.sourceUpdater_&&this.sourceUpdater_.remove(a,b,c);jc(a,b,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var d in this.inbandTextTracks_)jc(a,b,this.inbandTextTracks_[d])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&a.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=a.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&a.clearTimeout(this.checkBufferTimeout_);
this.checkBufferTimeout_=a.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(this.isEndOfStream_(a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==
this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())a.timeline!==this.currentTimeline_&&(this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(a)}}},{key:"isEndOfStream_",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.playlist_;var c=this.mediaSource_;if(b&&c){var d=a===b.segments.length;b=b.endList&&"open"===c.readyState&&d}else b=!1;
return b&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(a,b,c,d,f,g){var n=0;a.length&&(n=a.end(a.length-1));a=Math.max(0,n-f);if(!b.segments.length||a>=this.goalBufferLength_()||!d&&1<=a)return null;if(null===g)return c=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,c,null,!0);if(null!==c)return this.generateSegmentInfo_(b,c+1,n,!1);this.fetchAtBuffer_?(d=Ja.getMediaInfoForTime(b,n,g.segmentIndex,g.time),c=d.mediaIndex,d=d.startTime):(d=Ja.getMediaInfoForTime(b,
f,g.segmentIndex,g.time),c=d.mediaIndex,d=d.startTime);return this.generateSegmentInfo_(b,c,d,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,c,d){if(0>b||b>=a.segments.length)return null;
var f=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:f.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:f.timeline,duration:f.duration,segment:f}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,
f=Ja.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived);a=Tk(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(f<=a)return!1;if(b=ol({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=f-a-b.rebufferingImpact;d=.5;a<=ud&&(d=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||c<d)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*
Na.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=ml(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),
this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){a=this.seekable_();var b=this.currentTime_(),c=this.playlist_.targetDuration||10,d=b-30;a.length&&(d=Math.max(d,a.start(0)));a=Math.min(b-c,d);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key=this.segmentKey(b.key),
c.key.iv=a);b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):
(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),b.key&&this.segmentKey(b.key,!0),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;if(a.fmp4Captions){b=this.inbandTextTracks_;var c=
this.hls_.tech_,d=a.captionStreams,f;for(f in d)b[f]||(c.trigger({type:"usage",name:"hls-608"}),d=c.textTracks().getTrackById(f),b[f]=d?d:c.addRemoteTextTrack({kind:"captions",id:f,label:f},!1).track);pl({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0});this.captionParser_&&this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,d=this.syncController_.probeSegmentInfo(b);
"undefined"===typeof this.startingMedia_&&d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});var f=ql(this.loaderType_,this.startingMedia_,d);if(f)this.error({message:f,blacklistDuration:Infinity}),this.trigger("error");else if(b.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(d&&d.segmentTimestampInfo&&
(b.timestampOffset-=d.segmentTimestampInfo[0].ptsTime-d.segmentTimestampInfo[0].dtsTime),this.sourceUpdater_.timestampOffset(b.timestampOffset),this.trigger("timestampoffset"));d=this.syncController_.mappingForTimeline(b.timeline);null!==d&&this.trigger({type:"segmenttimemapping",mapping:d});this.state="APPENDING";if(c.map){var g=td(c.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===g||(d=this.initSegment(c.map),this.sourceUpdater_.appendBuffer({bytes:d.bytes},function(){a.activeInitSegmentId_=
g}))}b.byteLength=b.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+(c.end-c.start):this.mediaSecondsLoaded+c.duration;this.logger_(rl(b));this.sourceUpdater_.appendBuffer({bytes:b.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,b.requestId)},this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(a,b){this.pendingSegment_&&a===this.pendingSegment_.requestId&&
(a=this.pendingSegment_.segment,a.videoTimingInfo||(a.videoTimingInfo={}),a.videoTimingInfo.transmuxerPrependedSeconds=b.videoSegmentTimingInfo.prependedContentDuration||0,a.videoTimingInfo.transmuxedPresentationStart=b.videoSegmentTimingInfo.start.presentation,a.videoTimingInfo.transmuxedPresentationEnd=b.videoSegmentTimingInfo.end.presentation,a.videoTimingInfo.baseMediaDecodeTime=b.videoSegmentTimingInfo.baseMediaDecodeTime)}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=
this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(a.mediaIndex+1,a.playlist)&&this.endOfStream(),this.paused()||
this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(b){if(this.segmentMetadataTrack_){var c=b.segment,d=c.start,f=c.end;if("number"===typeof d&&isFinite(d)&&"number"===typeof f&&isFinite(f)){jc(d,f,this.segmentMetadataTrack_);var n=a.WebKitDataCue||
a.VTTCue;b={custom:c.custom,dateTimeObject:c.dateTimeObject,dateTimeString:c.dateTimeString,bandwidth:b.playlist.attributes.BANDWIDTH,resolution:b.playlist.attributes.RESOLUTION,codecs:b.playlist.attributes.CODECS,byteLength:b.byteLength,uri:b.uri,timeline:b.timeline,playlist:b.playlist.id,start:d,end:f};c=JSON.stringify(b);d=new n(d,f,c);d.value=b;this.segmentMetadataTrack_.addCue(d)}}}}]);return c}(w.EventTarget),ci=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)})),sl=function(b){function c(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Ba(this,c);b=eb(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a,b));b.mediaSource_=null;b.subtitlesTrack_=null;b.featuresNativeTextTracks_=a.featuresNativeTextTracks;return b}pb(c,b);Xa(c,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return w.createTimeRanges();var a=this.subtitlesTrack_.cues;return w.createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",
value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=td(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(b=new Uint8Array(ci.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(ci,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();
return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){jc(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),
this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);
return a}},{key:"handleSegment_",value:function(){var b=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var c=this.pendingSegment_,d=c.segment;if("function"!==typeof a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var f=void 0,g=function(){b.subtitlesTrack_.tech_.off("vttjsloaded",f);b.error({message:"Error loading vtt.js"});b.state="READY";b.pause();b.trigger("error")};f=function(){b.subtitlesTrack_.tech_.off("vttjserror",g);b.handleSegment_()};this.state="WAITING_ON_VTTJS";
this.subtitlesTrack_.tech_.one("vttjsloaded",f);this.subtitlesTrack_.tech_.one("vttjserror",g)}else{d.requested=!0;try{this.parseVTTCues_(c)}catch(Nc){return this.error({message:Nc.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(c,this.syncController_.timelines[c.timeline],this.playlist_);c.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(c.byteLength=c.bytes.byteLength,this.mediaSecondsLoaded+=d.duration,c.cues.length&&
this.remove(c.cues[0].endTime,c.cues[c.cues.length-1].endTime),c.cues.forEach(function(c){b.subtitlesTrack_.addCue(b.featuresNativeTextTracks_?new a.VTTCue(c.startTime,c.endTime,c.text):c)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(b){var c=void 0,d=!1;"function"===typeof a.TextDecoder?c=new a.TextDecoder("utf8"):(c=a.WebVTT.StringDecoder(),d=!0);c=new a.WebVTT.Parser(a,a.vttjs,c);b.cues=[];b.timestampmap={MPEGTS:0,LOCAL:0};c.oncue=b.cues.push.bind(b.cues);
c.ontimestampmap=function(a){return b.timestampmap=a};c.onparsingerror=function(a){w.log.warn("Error encountered when parsing cues: "+a.message)};if(b.segment.map){var f=b.segment.map.bytes;d&&(f=decodeURIComponent(escape(String.fromCharCode.apply(null,f))));c.parse(f)}f=b.bytes;d&&(f=decodeURIComponent(escape(String.fromCharCode.apply(null,f))));c.parse(f);c.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var f=a.timestampmap,n=f.MPEGTS/9E4-f.LOCAL+
b.mapping;a.cues.forEach(function(a){a.startTime+=n;a.endTime+=n});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-d.duration)})}else d.empty=!0}}]);return c}(bf),tl=function(b,c){if(b.segments)for(var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=void 0,g=0;g<b.segments.length;g++){var h=b.segments[g];if(!f)a:{var p=d+h.duration/2;f=c.cues;for(var m=0;m<f.length;m++){var q=f[m];if(p>=q.adStartTime&&
p<=q.adEndTime){f=q;break a}}f=null}if(f){if("cueIn"in h){f.endTime=d;f.adEndTime=d;d+=h.duration;f=null;continue}if(d<f.endTime){d+=h.duration;continue}f.endTime+=h.duration}else"cueOut"in h&&(f=new a.VTTCue(d,d+h.duration,h.cueOut),f.adStartTime=d,f.adEndTime=d+parseFloat(h.cueOut),c.addCue(f)),"cueOutCont"in h&&(p=h.cueOutCont.split("/").map(parseFloat),f=Ck(p,2),p=f[0],m=f[1],f=new a.VTTCue(d,d+h.duration,""),f.adStartTime=d-p,f.adEndTime=f.adStartTime+m,c.addCue(f));d+=h.duration}},di=[{name:"VOD",
run:function(a,b,c,d,f){return Infinity!==c?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(a,b,c,d,f){if(!a.datetimeToDisplayTime)return null;b=b.segments||[];d=c=null;f=f||0;for(var n=0;n<b.length;n++){var g=b[n];if(g.dateTimeObject){g=g.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime;var h=Math.abs(f-g);if(null!==d&&(0===h||d<h))break;d=h;c={time:g,segmentIndex:n}}}return c}},{name:"Segment",run:function(a,b,c,d,f){a=b.segments||[];c=b=null;f=f||0;for(var g=0;g<a.length;g++){var n=
a[g];if(n.timeline===d&&"undefined"!==typeof n.start){var h=Math.abs(f-n.start);if(null!==c&&c<h)break;if(!b||null===c||c>=h)c=h,b={time:n.start,segmentIndex:g}}}return b}},{name:"Discontinuity",run:function(a,b,c,d,f){c=null;f=f||0;if(b.discontinuityStarts&&b.discontinuityStarts.length){d=null;for(var g=0;g<b.discontinuityStarts.length;g++){var n=b.discontinuityStarts[g],h=a.discontinuities[b.discontinuitySequence+g+1];if(h){var p=Math.abs(f-h.time);if(null!==d&&d<p)break;if(!c||null===d||d>=p)d=
p,c={time:h.time,segmentIndex:n}}}}return c}},{name:"Playlist",run:function(a,b,c,d,f){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:null}}],ul=function(a){function b(){Ba(this,b);var a=eb(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=Gc("SyncController");return a}pb(b,a);Xa(b,[{key:"getSyncPoint",value:function(a,b,c,d){a=this.runStrategies_(a,
b,c,d);return a.length?this.selectSyncPoint_(a,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+Dc(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var f=[],g=0;g<di.length;g++){var n=di[g],h=n.run(this,a,b,c,d);h&&(h.strategy=n.name,f.push({strategy:n.name,
syncPoint:h}))}return f}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),f=a[0].strategy,g=1;g<a.length;g++){var n=Math.abs(a[g].syncPoint[b.key]-b.value);n<d&&(d=n,c=a[g].syncPoint,f=a[g].strategy)}this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+f+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex+"]"));return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-
1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",
value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=nb.timescale(b.map.bytes);c=nb.compositionStartTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=
c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=a.bytes;a=this.inspectCache_;if(ic.isLikelyAacData(b))b:{for(var c=!1,d=0,f=null,g=null,n,h=0,p;3<=b.length-h;){switch(ic.parseType(b,h)){case "timed-metadata":if(10>b.length-h){c=!0;break}n=ic.parseId3TagSize(b,h);if(n>b.length){c=!0;break}null===g&&(p=b.subarray(h,h+n),g=ic.parseAacTimestamp(p));h+=n;break;case "audio":if(7>b.length-h){c=!0;break}n=ic.parseAdtsSize(b,h);if(n>b.length){c=!0;break}null===f&&(p=b.subarray(h,
h+n),f=ic.parseSampleRate(p));d++;h+=n;break;default:h++}if(c){b=null;break b}}null===f||null===g?b=null:(b=9E4/f,b={audio:[{type:"audio",dts:g,pts:g},{type:"audio",dts:g+1024*d*b,pts:g+1024*d*b}]})}else{g={pid:null,table:null};c={};f=0;for(n=188;n<b.byteLength;)if(71===b[f]&&71===b[n]){h=b.subarray(f,n);p=ma.parseType(h,g.pid);switch(p){case "pat":g.pid||(g.pid=ma.parsePat(h));break;case "pmt":g.table||(g.table=ma.parsePmt(h))}if(g.pid&&g.table)break;f+=188;n+=188}else f++,n++;for(d in g.table)if(g.table.hasOwnProperty(d))switch(g.table[d]){case 27:c.video=
[];var m;n=b;h=g;p=c;var q=0,r=188,t=!1,v=[];for(m=0;r<n.byteLength;)if(71===n[q]&&71===n[r]){f=n.subarray(q,r);var y=ma.parseType(f,h.pid);switch(y){case "pes":var w=ma.parsePesType(f,h.table);y=ma.parsePayloadUnitStartIndicator(f);if("video"===w&&(y&&!t&&(w=ma.parsePesTime(f))&&(w.type="video",p.video.push(w),t=!0),!p.firstKeyFrame)){if(y&&0!==m){w=new Uint8Array(m);for(y=0;v.length;)m=v.shift(),w.set(m,y),y+=m.byteLength;ma.videoPacketContainsKeyFrame(w)&&((m=ma.parsePesTime(w))?(p.firstKeyFrame=
m,p.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));m=0}v.push(f);m+=f.byteLength}}if(t&&p.firstKeyFrame)break;q+=188;r+=188}else q++,r++;r=n.byteLength;q=r-188;for(t=!1;0<=q;)if(71===n[q]&&71===n[r]){f=n.subarray(q,r);y=
ma.parseType(f,h.pid);switch(y){case "pes":if(w=ma.parsePesType(f,h.table),y=ma.parsePayloadUnitStartIndicator(f),"video"===w&&y&&(w=ma.parsePesTime(f)))w.type="video",p.video.push(w),t=!0}if(t)break;q-=188;r-=188}else q--,r--;0===c.video.length&&delete c.video;break;case 15:c.audio=[];f=b;n=g;h=c;p=0;q=188;for(r=!1;q<=f.byteLength;)if(71!==f[p]||71!==f[q]&&q!==f.byteLength)p++,q++;else{t=f.subarray(p,q);v=ma.parseType(t,n.pid);switch(v){case "pes":if(m=ma.parsePesType(t,n.table),v=ma.parsePayloadUnitStartIndicator(t),
"audio"===m&&v&&(t=ma.parsePesTime(t)))t.type="audio",h.audio.push(t),r=!0}if(r)break;p+=188;q+=188}q=f.byteLength;p=q-188;for(r=!1;0<=p;)if(71!==f[p]||71!==f[q]&&q!==f.byteLength)p--,q--;else{t=f.subarray(p,q);v=ma.parseType(t,n.pid);switch(v){case "pes":if(m=ma.parsePesType(t,n.table),v=ma.parsePayloadUnitStartIndicator(t),"audio"===m&&v&&(t=ma.parsePesTime(t)))t.type="audio",h.audio.push(t),r=!0}if(r)break;p-=188;q-=188}0===c.audio.length&&delete c.audio}b=c}b&&(b.audio||b.video)?(wk(b,a),a=b):
a=null;g=d=b=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,d=a.video[1].dtsTime,g=a.video):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,d=a.audio[1].dtsTime,g=a.audio);return{segmentTimestampInfo:g,start:b,end:d,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:
this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)d={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+d.time+"] [mapping: "+d.mapping+"]")),
c.start=a.startOfSegment,c.end=b.end+d.mapping;else if(d)c.start=b.start+d.mapping,c.end=b.end+d.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var f=b.discontinuityStarts[d],g=b.discontinuitySequence+d+1,n=f-a.mediaIndex,h=Math.abs(n);if(!this.discontinuities[g]||
this.discontinuities[g].accuracy>h)f=0>n?c.start-Dc(b,a.mediaIndex,f):c.end+Dc(b,a.mediaIndex+1,f),this.discontinuities[g]={time:f,accuracy:h}}}},{key:"dispose",value:function(){this.trigger("dispose");this.off()}}]);return b}(w.EventTarget),vl=new Qf("./decrypter-worker.worker.js",function(a,b){var c=this;(function(){var a=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=
d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},f=null,g=function(){function b(c){a(this,
b);if(!f){var d=[[[],[],[],[],[]],[[],[],[],[],[]]],g=d[0],n=d[1],h=g[4],p=n[4],m,q,x,r=[],t=[],v;for(m=0;256>m;m++)t[(r[m]=m<<1^283*(m>>7))^m]=m;for(q=x=0;!h[q];q^=v||1,x=t[x]||1){var y=x^x<<1^x<<2^x<<3^x<<4;y=y>>8^y&255^99;h[q]=y;p[y]=q;var K=r[m=r[v=r[q]]];var w=16843009*K^65537*m^257*v^16843008*q;K=257*r[y]^16843008*y;for(m=0;4>m;m++)g[m][q]=K=K<<24^K>>>8,n[m][y]=w=w<<24^w>>>8}for(m=0;5>m;m++)g[m]=g[m].slice(0),n[m]=n[m].slice(0);f=d}this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),
f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];d=this._tables[0][4];g=this._tables[1];q=c.length;x=1;if(4!==q&&6!==q&&8!==q)throw Error("Invalid aes key size");h=c.slice(0);p=[];this._key=[h,p];for(c=q;c<4*q+28;c++){n=h[c-1];if(0===c%q||8===q&&4===c%q)n=d[n>>>24]<<24^d[n>>16&255]<<16^d[n>>8&255]<<8^d[n&255],0===c%q&&(n=n<<8^n>>>24^x<<24,x=x<<1^283*(x>>7));h[c]=h[c-q]^n}for(q=0;c;q++,c--)n=h[q&3?c:c-4],p[q]=4>=c||4>q?n:g[0][d[n>>>
24]]^g[1][d[n>>16&255]]^g[2][d[n>>8&255]]^g[3][d[n&255]]}b.prototype.decrypt=function(a,b,c,d,f,g){var n=this._key[1];a^=n[0];d^=n[1];c^=n[2];b^=n[3];var h=n.length/4-2,p,m=4;var q=this._tables[1];var x=q[0],r=q[1],t=q[2],v=q[3],y=q[4];for(p=0;p<h;p++){q=x[a>>>24]^r[d>>16&255]^t[c>>8&255]^v[b&255]^n[m];var K=x[d>>>24]^r[c>>16&255]^t[b>>8&255]^v[a&255]^n[m+1];var w=x[c>>>24]^r[b>>16&255]^t[a>>8&255]^v[d&255]^n[m+2];b=x[b>>>24]^r[a>>16&255]^t[d>>8&255]^v[c&255]^n[m+3];m+=4;a=q;d=K;c=w}for(p=0;4>p;p++)f[(3&
-p)+g]=y[a>>>24]<<24^y[d>>16&255]<<16^y[c>>8&255]<<8^y[b&255]^n[m++],q=a,a=d,d=c,c=b,b=q};return b}(),n=function(){function b(){a(this,b);this.listeners={}}b.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};b.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};b.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,
arguments[1]);else{c=Array.prototype.slice.call(arguments,1);d=b.length;for(var f=0;f<d;++f)b[f].apply(this,c)}};b.prototype.dispose=function(){this.listeners={}};b.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return b}(),h=function(b){function c(){a(this,c);var d=b.call(this,n);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.jobs=[];d.delay=1;d.timeout_=null;return d}d(c,
b);c.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};c.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return c}(n),p=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},m=function(){function c(b,d,f,g){a(this,c);var n=c.STEP,m=new Int32Array(b.buffer),q=new Uint8Array(b.byteLength);b=0;this.asyncStream_=new h;this.asyncStream_.push(this.decryptChunk_(m.subarray(b,
b+n),d,f,q));for(b=n;b<m.length;b+=n)f=new Uint32Array([p(m[b-4]),p(m[b-3]),p(m[b-2]),p(m[b-1])]),this.asyncStream_.push(this.decryptChunk_(m.subarray(b,b+n),d,f,q));this.asyncStream_.push(function(){g(null,q.subarray(0,q.byteLength-q[q.byteLength-1]))})}c.prototype.decryptChunk_=function(a,b,c,d){return function(){var f=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),n=new g(Array.prototype.slice.call(b)),h=new Uint8Array(a.byteLength),m=new Int32Array(h.buffer),q;var x=c[0];var r=c[1];var t=
c[2];var v=c[3];for(q=0;q<f.length;q+=4){var y=p(f[q]);var K=p(f[q+1]);var w=p(f[q+2]);var A=p(f[q+3]);n.decrypt(y,K,w,A,m,q);m[q]=p(m[q]^x);m[q+1]=p(m[q+1]^r);m[q+2]=p(m[q+2]^t);m[q+3]=p(m[q+3]^v);x=y;r=K;t=w;v=A}d.set(h,a.byteOffset)}};b(c,null,[{key:"STEP",get:function(){return 32E3}}]);return c}(),q=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b};return new function(a){a.onmessage=
function(b){var c=b.data;b=new Uint8Array(c.encrypted.bytes,c.encrypted.byteOffset,c.encrypted.byteLength);var d=new Uint32Array(c.key.bytes,c.key.byteOffset,c.key.byteLength/4),f=new Uint32Array(c.iv.bytes,c.iv.byteOffset,c.iv.byteLength/4);new m(b,d,f,function(b,d){a.postMessage(q({source:c.source,decrypted:d}),[d.buffer])})}}(c)})()}),vd=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},wl=function(a,b){return function(){var c=
b.segmentLoaders,d=c[a],f=c.main;c=b.mediaTypes[a];var g=c.activeTrack();g=c.activeGroup(g);var h=c.activePlaylistLoader;vd(d,c);g&&(g.playlistLoader?(d.resyncLoader(),d=g.playlistLoader,c.activePlaylistLoader=d,d.load()):h&&f.resetEverything())}},xl=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],f=c.main;c=b.mediaTypes[a];var g=c.activeTrack(),h=c.activeGroup(g),p=c.activePlaylistLoader;vd(d,c);h&&(h.playlistLoader?p===h.playlistLoader?(d=h.playlistLoader,c.activePlaylistLoader=d,
d.load()):(d.track&&d.track(g),d.resetEverything(),d=h.playlistLoader,c.activePlaylistLoader=d,d.load()):f.resetEverything())}},wd={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a],d=b.blacklistCurrentPlaylist;vd(b.segmentLoaders[a],c);var f=c.activeTrack(),g=c.activeGroup();g=(g.filter(function(a){return a["default"]})[0]||g[0]).id;g=c.tracks[g];if(f===g)d({message:"Problem encountered loading the default audio track."});else{w.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
for(var h in c.tracks)c.tracks[h].enabled=c.tracks[h]===g;c.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];w.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");vd(c,d);if(c=d.activeTrack())c.mode="disabled";d.onTrackChanged()}}},ei={AUDIO:function(a,b,c){if(b){var d=c.tech,f=c.requestOptions,g=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();g.playlist(a,f);(!d.paused()||a.endList&&"none"!==
d.preload())&&g.load()});b.on("loadedplaylist",function(){g.playlist(b.media(),f);d.paused()||g.load()});b.on("error",wd[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,f=c.requestOptions,g=c.segmentLoaders[a],n=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();g.playlist(a,f);g.track(n.activeTrack());(!d.paused()||a.endList&&"none"!==d.preload())&&g.load()});b.on("loadedplaylist",function(){g.playlist(b.media(),f);d.paused()||g.load()});b.on("error",wd[a](a,c))}},yl={AUDIO:function(a,
b){var c=b.hls,d=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,p=b.mediaTypes[a],m=p.groups;p=p.tracks;var q=b.masterPlaylistLoader;h[a]&&0!==Object.keys(h[a]).length||(h[a]={main:{"default":{"default":!0}}});for(var r in h[a]){m[r]||(m[r]=[]);for(var t in h[a][r]){var v=h[a][r][t];var y=v.resolvedUri?new rd(v.resolvedUri,c,g):v.playlists&&"dash"===d?new Ze(v.playlists[0],c,g,q):null;v=w.mergeOptions({id:t,playlistLoader:y},v);ei[a](a,v.playlistLoader,b);m[r].push(v);
if("undefined"===typeof p[t]){y=w.AudioTrack;var A=t,M=v["default"]?"main":"alternative";v.characteristics&&0<=v.characteristics.indexOf("public.accessibility.describes-video")&&(M="main-desc");v=new y({id:A,kind:M,enabled:!1,language:v.language,"default":v["default"],label:t});p[t]=v}}}f.on("error",wd[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.hls,f=b.sourceType,g=b.segmentLoaders[a],h=b.requestOptions,p=b.master.mediaGroups,m=b.mediaTypes[a],q=m.groups;m=m.tracks;var r=b.masterPlaylistLoader,
t;for(t in p[a]){q[t]||(q[t]=[]);for(var v in p[a][t])if(!p[a][t][v].forced){var y=p[a][t][v],A=void 0;"hls"===f?A=new rd(y.resolvedUri,d,h):"dash"===f&&(A=new Ze(y.playlists[0],d,h,r));y=w.mergeOptions({id:v,playlistLoader:A},y);ei[a](a,y.playlistLoader,b);q[t].push(y);"undefined"===typeof m[v]&&(y=c.addRemoteTextTrack({id:v,kind:"subtitles","default":y["default"]&&y.autoselect,language:y.language,label:v},!1).track,m[v]=y)}}g.on("error",wd[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,
d=b.master.mediaGroups,f=b.mediaTypes[a];b=f.groups;f=f.tracks;for(var g in d[a]){b[g]||(b[g]=[]);for(var h in d[a][g]){var p=d[a][g][h];p.instreamId.match(/CC\d/)&&(b[g].push(w.mergeOptions({id:h},p)),"undefined"===typeof f[h]&&(p=c.addRemoteTextTrack({id:p.instreamId,kind:"captions","default":p["default"]&&p.autoselect,language:p.language,label:h},!1).track,f[h]=p))}}}},zl=function(a,b){return function(c){var d=b.mediaTypes[a].groups,f=b.masterPlaylistLoader.media();if(!f)return null;var g=null;
f.attributes[a]&&(g=d[f.attributes[a]]);g=g||d.main;return"undefined"===typeof c?g:null===c?null:g.filter(function(a){return a.id===c.id})[0]||null}},Al={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}}},Bl=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){yl[b](b,
a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,f=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=zl(c,a);b[c].activeTrack=Al[c](c,a);b[c].onGroupChanged=wl(c,a);b[c].onTrackChanged=xl(c,a)});var g=b.AUDIO.activeGroup();g=(g.filter(function(a){return a["default"]})[0]||g[0]).id;b.AUDIO.tracks[g].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var h=function(){b.AUDIO.onTrackChanged();
d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",h);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);f.on("dispose",function(){d.audioTracks().removeEventListener("change",h);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(var p in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[p])},Cl=function(){var a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Yb,activeTrack:Yb,onGroupChanged:Yb,onTrackChanged:Yb}});return a},Ab=void 0,Dl="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),El=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},Fl=function(b){function c(a){Ba(this,c);var b=eb(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),d=a.url,f=a.handleManifestRedirects,g=a.withCredentials,
n=a.tech,h=a.bandwidth,p=a.externHls,m=a.useCueTags,q=a.blacklistDuration,r=a.enableLowInitialPlaylist,t=a.sourceType,v=a.seekTo,A=a.cacheEncryptionKeys;if(!d)throw Error("A non-empty playlist URL is required");Ab=p;b.withCredentials=g;b.tech_=n;b.hls_=n.hls;b.seekTo_=v;b.sourceType_=t;b.useCueTags_=m;b.blacklistDuration=q;b.enableLowInitialPlaylist=r;b.useCueTags_&&(b.cueTagsTrack_=b.tech_.addTextTrack("metadata","ad-cues"),b.cueTagsTrack_.inBandMetadataTrackDispatchType="");b.requestOptions_={withCredentials:g,
handleManifestRedirects:f,timeout:null};b.mediaTypes_=Cl();b.mediaSource=new w.MediaSource;b.mediaSource.addEventListener("sourceopen",b.handleSourceOpen_.bind(b));b.seekable_=w.createTimeRanges();b.hasPlayed_=!1;b.syncController_=new ul(a);b.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;b.decrypter_=new vl;b.inbandTextTracks_={};f={hls:b.hls_,mediaSource:b.mediaSource,currentTime:b.tech_.currentTime.bind(b.tech_),seekable:function(){return b.seekable()},
seeking:function(){return b.tech_.seeking()},duration:function(){return b.mediaSource.duration},hasPlayed:function(){return b.hasPlayed_},goalBufferLength:function(){return b.goalBufferLength()},bandwidth:h,syncController:b.syncController_,decrypter:b.decrypter_,sourceType:b.sourceType_,inbandTextTracks:b.inbandTextTracks_,cacheEncryptionKeys:A};b.masterPlaylistLoader_="dash"===b.sourceType_?new Ze(d,b.hls_,b.requestOptions_):new rd(d,b.hls_,b.requestOptions_);b.setupMasterPlaylistLoaderListeners_();
b.mainSegmentLoader_=new bf(w.mergeOptions(f,{segmentMetadataTrack:b.segmentMetadataTrack_,loaderType:"main"}),a);b.audioSegmentLoader_=new bf(w.mergeOptions(f,{loaderType:"audio"}),a);b.subtitleSegmentLoader_=new sl(w.mergeOptions(f,{loaderType:"vtt",featuresNativeTextTracks:b.tech_.featuresNativeTextTracks}),a);b.setupSegmentLoaderListeners_();Dl.forEach(function(a){b[a+"_"]=El.bind(b,a)});b.logger_=Gc("MPC");b.masterPlaylistLoader_.load();return b}pb(c,b);Xa(c,[{key:"setupMasterPlaylistLoaderListeners_",
value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1500*b.targetDuration;Oe(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());Bl({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},
tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(va){return w.log.warn("Failed to create SourceBuffers",va),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();if(!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media())a.trigger("selectedinitialmedia");
else a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})});this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(b){if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!b.endList){var c=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),
b.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",function Qb(){if(Infinity===a.duration())c();else a.tech_.one("durationchange",Qb)});else c()}}else a.excludeUnsupportedVariants_(),b=void 0,a.enableLowInitialPlaylist&&(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",
function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1500*b.targetDuration;Oe(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=
a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,d=Object.keys(a.AUDIO),
f;for(f in a.AUDIO)for(var g in a.AUDIO[f])a.AUDIO[f][g].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});Ab.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"});Ab.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",
name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),d=a.tech_.buffered();d=d.length?d.end(d.length-1)-a.tech_.currentTime():0;var f=a.bufferLowWaterLine();(!c.endList||a.duration()<Na.MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||d>=f)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",
function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",
function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+
this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=
this,b=this.selectPlaylist();b!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(b),this.mainSegmentLoader_.resetEverything(function(){w.browser.IE_VERSION||w.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0);this.hasPlayed_&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<
a.start(0))return this.seekTo_(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_)return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(w.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.seekTo_(c.end(0));a.hasPlayed_=!0}),!1;this.trigger("firstplay");this.seekTo_(c.end(0))}this.hasPlayed_=!0;this.load();return!0}},
{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(x){return w.log.warn("Failed to create Source Buffers",x),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?
a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);if(a){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(x){w.log.warn("Failed to call media source endOfStream",x)}}}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=Ab.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-
b<=qb;c=c.end(c.length-1);return c-b<=qb&&a-c<=qb}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1],c=void 0;c=void 0;c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(Nc){return this.trigger("error")}}var d=1===this.masterPlaylistLoader_.master.playlists.filter(sd).length,f=this.masterPlaylistLoader_.master.playlists;
if(1===f.length)return w.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);d&&(w.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),f.forEach(function(a){Infinity!==a.excludeUntil&&delete a.excludeUntil}),this.tech_.trigger("retryplaylist"));c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",
name:"hls-rendition-blacklisted"});c=this.selectPlaylist();w.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(c,d)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=
Lh(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());
this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Ab.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=this.masterPlaylistLoader_.master.suggestedPresentationDelay,
f=Ab.Playlist.seekable(b,c,d);if(0!==f.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===c)return;a=Ab.Playlist.seekable(b,c,d);if(0===a.length)return}c=b=void 0;this.seekable_&&this.seekable_.length&&(b=this.seekable_.end(0),c=this.seekable_.start(0));a?a.start(0)>f.end(0)||f.start(0)>a.end(0)?this.seekable_=f:this.seekable_=w.createTimeRanges([[a.start(0)>f.start(0)?
a.start(0):f.start(0),a.end(0)<f.end(0)?a.end(0):f.end(0)]]):this.seekable_=f;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===b&&this.seekable_.start(0)===c||(this.logger_("seekable updated ["+Qe(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=Ab.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),f=function yi(){a.logger_("Setting duration from "+a.mediaSource.duration+
" \x3d\x3e "+c);try{a.mediaSource.duration=c}catch(hf){w.log.warn("Failed to set media source duration",hf)}a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",yi)};0<d.length&&(c=Math.max(c,d.end(d.length-1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",f):f())}},{key:"dispose",value:function(){var a=this;this.trigger("dispose");this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();
["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.off();this.mediaSource.dispose&&this.mediaSource.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=
this.masterPlaylistLoader_.media(),b;if(a&&"open"===this.mediaSource.readyState){var c=this.masterPlaylistLoader_.master;var d=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var f=a.attributes||{};var g=f.CODECS?Ec(f.CODECS):Rh;var h=a.attributes||{};f=!0;var p=!1;if(a){if(c.mediaGroups.AUDIO&&h.AUDIO){var m=c.mediaGroups.AUDIO[h.AUDIO];if(m){p=!0;f=!1;for(var q in m)if(!m[q].uri&&!m[q].playlists){f=!0;break}}}p&&!g.audioProfile&&(f||(g.audioProfile=Zk(c,h.AUDIO)),g.audioProfile||(w.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),
g.audioProfile=Rh.audioProfile));var r;g.videoCodec&&(b=""+g.videoCodec+g.videoObjectTypeIndicator);g.audioProfile&&(r="mp4a.40."+g.audioProfile);c=Te("audio",d,[r]);q=Te("video",d,[b]);d=Te("video",d,[b,r]);b=p?!f&&b?[q,c]:f||b?[d,c]:[c,c]:b?[d]:[c]}else b=[];if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",
value:function(a){var b=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new w.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],b);a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(b){b.attributes.CODECS&&a.MediaSource&&a.MediaSource.isTypeSupported&&!a.MediaSource.isTypeSupported('video/mp4; codecs\x3d"'+Yk(b.attributes.CODECS)+'"')&&(b.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",
value:function(a){var b=2,c=null,d=void 0;a.attributes.CODECS&&(d=Ec(a.attributes.CODECS),c=d.videoCodec,b=d.codecCount);this.master().playlists.forEach(function(a){var d={codecCount:2,videoCodec:null};a.attributes.CODECS&&(d=Ec(a.attributes.CODECS));d.codecCount!==b&&(a.excludeUntil=Infinity);d.videoCodec!==c&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));tl(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=
this.tech_.currentTime(),b=Na.GOAL_BUFFER_LENGTH;return Math.min(b+a*Na.GOAL_BUFFER_LENGTH_RATE,Math.max(b,Na.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=this.tech_.currentTime(),b=Na.BUFFER_LOW_WATER_LINE;return Math.min(b+a*Na.BUFFER_LOW_WATER_LINE_RATE,Math.max(b,Na.MAX_BUFFER_LOW_WATER_LINE))}}]);return c}(w.EventTarget),Gl=function(a,b,c){return function(d){var f=a.master.playlists[b],g=Ne(f),h=sd(f);if("undefined"===typeof d)return h;d?delete f.disabled:f.disabled=
!0;d===h||g||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled"));return d}},Hl=function K(a,b,c){Ba(this,K);var d=a.masterPlaylistController_;d=d[(a.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(d);if(b.attributes.RESOLUTION){var f=b.attributes.RESOLUTION;this.width=f.width;this.height=f.height}this.bandwidth=b.attributes.BANDWIDTH;this.id=c;this.enabled=Gl(a.playlists,b.id,d)},Il=function(a){var b=a.playlists;a.representations=function(){return b&&b.master&&
b.master.playlists?b.master.playlists.filter(function(a){return!Ne(a)}).map(function(b,c){return new Hl(a,b,b.id)}):[]}},fi=["seeking","seeked","pause","playing","error"],Jl=function(){function b(c){var d=this;Ba(this,b);this.tech_=c.tech;this.seekable=c.seekable;this.seekTo=c.seekTo;this.allowSeeksWithinUnsafeLiveWindow=c.allowSeeksWithinUnsafeLiveWindow;this.media=c.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Gc("PlaybackWatcher");
this.logger_("initialize");var f=function(){return d.monitorCurrentTime_()},g=function(){return d.techWaiting_()},h=function(){return d.cancelTimer_()},n=function(){return d.fixesBadSeeks_()};this.tech_.on("seekablechanged",n);this.tech_.on("waiting",g);this.tech_.on(fi,h);this.tech_.on("canplay",f);this.dispose=function(){d.logger_("dispose");d.tech_.off("seekablechanged",n);d.tech_.off("waiting",g);d.tech_.off(fi,h);d.tech_.off("canplay",f);d.checkCurrentTimeTimeout_&&a.clearTimeout(d.checkCurrentTimeTimeout_);
d.cancelTimer_()}}Xa(b,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&a.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=a.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),
b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+qb>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;
var a=this.seekable(),b=this.tech_.currentTime(),c=void 0;this.afterSeekableWindow_(a,b,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(c=a.end(a.length-1));this.beforeSeekableWindow_(a,b)&&(c=a.start(0)+qb);return"undefined"!==typeof c?(this.logger_("Trying to seek outside of seekable at time "+b+" with "+("seekable range "+Qe(a)+". Seeking to ")+(c+".")),this.seekTo(c),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();
b=Lh(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.seekTo(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -\x3e "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,
b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var c=this.tech_.buffered();a=Mh(c,b);return this.videoUnderflow_(a,c,b)?(this.cancelTimer_(),this.seekTo(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+
a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!a.length)return!1;var f=a.end(a.length-1)+qb;!c.endList&&d&&(f=a.end(a.length-1)+3*c.targetDuration);return b>f?!0:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&b<a.start(0)-qb?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,
c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();b=Mh(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",b.start(0)),this.seekTo(b.start(0)+ud),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){if(2>
a.length)a=w.createTimeRanges();else{for(var c=[],d=1;d<a.length;d++){var f=a.end(d-1),g=a.start(d);c.push([f,g])}a=w.createTimeRanges(c)}for(c=0;c<a.length;c++)if(d=a.start(c),f=a.end(c),4>b-d&&2<b-d)return{start:d,end:f};return null}}]);return b}(),Kl={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},Ll=function K(a,b){var c=0,d=0,f=w.mergeOptions(Kl,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});
var g=function(){d&&a.currentTime(d)},h=function(b){null!==b&&void 0!==b&&(d=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",g),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},n=function(){if(Date.now()-c<1E3*f.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(f.getSource&&"function"===typeof f.getSource)return c=Date.now(),f.getSource.call(a,h);w.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},
p=function(){}