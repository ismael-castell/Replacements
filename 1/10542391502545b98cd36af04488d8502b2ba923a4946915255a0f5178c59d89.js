!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}();var SCM=SCM||{};SCM.JqueryMigrateLogger=function(){var t,n,r=5e3,e=20,i=0;return{init:function(){var e;n=SCM.Logging.getLogger(),(t=$("[data-jquery-migrate-logging-enabled]"))&&t.length&&jQuery.migrateWarnings?(n.debug("jquery-migrate logging is enabled.  Attempting to initialize Application Insights."),(e=function(){if(!t&&!t.length)return"";var e=t.data("jqueryMigrateInstrumentationKey");return e?e.trim():""}())&&(function(e){var t="appInsightsSDK";window[t]="appInsights";t=window[t],e=window[t]||function(t){function e(t){o[t]=function(){var e=arguments;o.queue.push(function(){o[t].apply(o,e)})}}var o={config:t,initialize:!0},n=document,r=window;setTimeout(function(){var e=n.createElement("script");e.src=t.url||"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",n.getElementsByTagName("script")[0].parentNode.appendChild(e)});try{o.cookie=n.cookie}catch(t){}o.queue=[],o.version=2;for(var s=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];s.length;)e("track"+s.pop());e("startTrackPage"),e("stopTrackPage");var l,i="Track"+s[0];return e("start"+i),e("stop"+i),e("setAuthenticatedUserContext"),e("clearAuthenticatedUserContext"),e("flush"),!0===t.disableExceptionTracking||t.extensionConfig&&t.extensionConfig.ApplicationInsightsAnalytics&&!0===t.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking||(e("_"+(s="onerror")),l=r[s],r[s]=function(e,t,n,r,i){var a=l&&l(e,t,n,r,i);return!0!==a&&o["_"+s]({message:e,url:t,lineNumber:n,columnNumber:r,error:i}),a},t.autoExceptionInstrumented=!0),o}({instrumentationKey:e,disableAjaxTracking:!0});window[t]=e}(e),window.appInsights?setTimeout(a,r):n.warn("Application Insights failed to initialize."))):n.debug("jquery-migrate logging is disabled")}};function a(){jQuery.migrateWarnings&&jQuery.migrateWarnings.length&&(n.debug("Logging "+jQuery.migrateWarnings.length+" jquery-migrate warnings."),jQuery.migrateWarnings.forEach(function(e){n.debug(e),appInsights.trackEvent({name:"jquery-migrate-warning",properties:{host:window.location.hostname,url:window.location.href,warning:e}})}),jQuery.migrateReset()),++i<e&&setTimeout(a,r)}}();var SCM=SCM||{};!function(e){var n;e.bbq={},e.bbq.getState=n=function(e){var t=window.location.hash;if(!((n=t.indexOf(e))<0)){var n=n+e.length+1,e=t.indexOf("&",n);return e<0?decodeURI(t.substring(n)):decodeURI(t.substring(n,e))}},e.bbq.removeState=function(e){var t=n(e);t&&location.replace(window.location.hash.replace(e+"="+encodeURI(t),""))},e.deparam={},e.deparam.querystring=function(){for(var e=window.location.search.substring(1).split("&"),t={},n=0;n<e.length;n++){var r=e[n].split("=");2===r.length&&(t[r[0]]=decodeURI(r[1]))}return t}}(jQuery),function(c,l,r,i){"use strict";var t;e=["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"],(t=c("head")).prepend(c.map(e,function(e){if(0===t.has("."+e).length)return'<meta class="'+e+'" />'})),c(function(){"undefined"!=typeof FastClick&&void 0!==r.body&&FastClick.attach(r.body)});function s(e,t){if("string"!=typeof e)return c(e,t);if(t){var n;if(t.jquery){if(!(n=t[0]))return t}else n=t;return c(n.querySelectorAll(e))}return c(r.querySelectorAll(e))}function n(e){var t=[];return e||t.push("data"),0<this.namespace.length&&t.push(this.namespace),t.push(this.name),t.join("-")}function a(e){for(var t=e.split("-"),n=t.length,r=[];n--;)0===n&&0<this.namespace.length?r.push(this.namespace,t[n]):r.push(t[n]);return r.reverse().join("-")}function o(n,r){function e(){var e=s(this),t=!e.data(i.attr_name(!0)+"-init");e.data(i.attr_name(!0)+"-init",c.extend({},i.settings,r||n,i.data_options(e))),t&&i.events(this)}var i=this;if(s(this.scope).is("["+this.attr_name()+"]")?e.call(this.scope):s("["+this.attr_name()+"]",this.scope).each(e),"string"==typeof n)return this[n].call(this,r)}function u(e,t){function n(){t(e[0])}!e.attr("src")||e[0].complete||4===e[0].readyState?n():function(){var e,t;this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(t=(e=this.attr("src")).match(/\?/)?"&":"?",t+="random="+(new Date).getTime(),this.attr("src",e+t))}.call(e)}var d,e,f,p;function h(e){this.selector=e,this.query=""}l.matchMedia||(l.matchMedia=((p=l.styleMedia||l.media)||(d=r.createElement("style"),e=r.getElementsByTagName("script")[0],f=null,d.type="text/css",d.id="matchmediajs-test",e.parentNode.insertBefore(d,e),f="getComputedStyle"in l&&l.getComputedStyle(d,null)||d.currentStyle,p={matchMedium:function(e){e="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return d.styleSheet?d.styleSheet.cssText=e:d.textContent=e,"1px"===f.width}}),function(e){return{matches:p.matchMedium(e||"all"),media:e||"all"}})),function(t){for(var n,i=0,e=["webkit","moz"],r=l.requestAnimationFrame,a=l.cancelAnimationFrame,o=void 0!==t.fx;i<e.length&&!r;i++)r=l[e[i]+"RequestAnimationFrame"],a=a||l[e[i]+"CancelAnimationFrame"]||l[e[i]+"CancelRequestAnimationFrame"];function s(){n&&(r(s),o&&t.fx.tick())}r?(l.requestAnimationFrame=r,l.cancelAnimationFrame=a,o&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,s())},t.fx.stop=function(){n=!1})):(l.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-i)),r=l.setTimeout(function(){e(t+n)},n);return i=t+n,r},l.cancelAnimationFrame=function(e){clearTimeout(e)})}(c),h.prototype.toString=function(){return this.query||(this.query=s(this.selector).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""))},l.Foundation={name:"Foundation",version:"5.5.3",media_queries:{small:new h(".foundation-mq-small"),"small-only":new h(".foundation-mq-small-only"),medium:new h(".foundation-mq-medium"),"medium-only":new h(".foundation-mq-medium-only"),large:new h(".foundation-mq-large"),"large-only":new h(".foundation-mq-large-only"),xlarge:new h(".foundation-mq-xlarge"),"xlarge-only":new h(".foundation-mq-xlarge-only"),xxlarge:new h(".foundation-mq-xxlarge")},stylesheet:c("<style></style>").appendTo("head")[0].sheet,global:{namespace:i},init:function(e,t,n,r,i){var i=[e,n,r,i],a=[];if(this.rtl=/rtl/i.test(s("html").attr("dir")),this.scope=e||this.scope,this.set_namespace(),t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&a.push(this.init_lib(t,i));else for(var o in this.libs)a.push(this.init_lib(o,t));return s(l).load(function(){s(l).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?(void 0!==this.libs[e].settings?c.extend(!0,this.libs[e].settings,t[e]):void 0!==this.libs[e].defaults&&c.extend(!0,this.libs[e].defaults,t[e]),this.libs[e].init.apply(this.libs[e],[this.scope,t[e]])):(t=t instanceof Array?t:new Array(t),this.libs[e].init.apply(this.libs[e],t))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=n,e.add_namespace=a,e.bindings=o,e.S=this.utils.S},inherit:function(e,t){for(var n=t.split(" "),r=n.length;r--;)this.utils.hasOwnProperty(n[r])&&(e[n[r]]=this.utils[n[r]])},set_namespace:function(){var e=this.global.namespace===i?c(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===i||/false/i.test(e)?"":e},libs:{},utils:{S:s,throttle:function(n,r){var i=null;return function(){var e=this,t=arguments;null==i&&(i=setTimeout(function(){n.apply(e,t),i=null},r))}},debounce:function(r,i,a){var o,s;return function(){var e=this,t=arguments,n=a&&!o;return clearTimeout(o),o=setTimeout(function(){o=null,a||(s=r.apply(e,t))},i),s=n?r.apply(e,t):s}},data_options:function(e,t){t=t||"options";var n,r,i,a,o,s={},t=(a=e,0<(e=Foundation.global.namespace).length?a.data(e+"-"+t):a.data(t));if("object"==typeof t)return t;function l(e){return"string"==typeof e?c.trim(e):e}for(n=(i=(t||":").split(";")).length;n--;)r=[(r=i[n].split(":"))[0],r.slice(1).join(":")],/true/i.test(r[1])&&(r[1]=!0),/false/i.test(r[1])&&(r[1]=!1),o=r[1],isNaN(+o)||null===o||""===o||!1===o||!0===o||(-1===r[1].indexOf(".")?r[1]=parseInt(r[1],10):r[1]=parseFloat(r[1])),2===r.length&&0<r[0].length&&(s[l(r[0])]=l(r[1]));return s},register_media:function(e,t){Foundation.media_queries[e]===i&&(c("head").append('<meta class="'+t+'"/>'),Foundation.media_queries[e]=t="string"==typeof(t=c("."+t).css("font-family"))||t instanceof String?t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,""):t)},add_custom_rule:function(e,t){t===i&&Foundation.stylesheet?Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length):Foundation.media_queries[t]!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)},image_loaded:function(e,t){var n=this,r=e.length;0!==r&&!function(e){for(var t=e.length-1;0<=t;t--)if(e.attr("height")===i)return;return 1}(e)||t(e),e.each(function(){u(n.S(this),function(){0===--r&&t(e)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(e){return l.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},c.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,window,window.document),function(l,c,t,u){"use strict";var d=[];function s(e){var t=/fade/i.test(e),e=/pop/i.test(e);return{animate:t||e,pop:e,fade:t}}Foundation.libs.reveal={name:"reveal",version:"5.5.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:l.noop,bg:l(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,t,n){l.extend(!0,this.settings,t,n),this.bindings(t,n)},events:function(e){var r=this,i=r.S;return i(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){var t,n;e.preventDefault(),r.locked||(n=(t=i(this)).data(r.data_attr("reveal-ajax")),e=t.data(r.data_attr("reveal-replace-content")),r.locked=!0,void 0===n?r.open.call(r,t):(n=!0===n?t.attr("href"):n,r.open.call(r,t,{url:n},{replaceContentSel:e})))}),i(t).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!r.locked){var t=i("["+r.attr_name()+"].open").data(r.attr_name(!0)+"-init")||r.settings,n=i(e.target)[0]===i("."+t.bg_class)[0];if(n){if(!t.close_on_background_click)return;e.stopPropagation()}r.locked=!0,r.close.call(r,n?i("["+r.attr_name()+"].open:not(.toback)"):i(this).closest("["+r.attr_name()+"]"))}}),0<i("["+r.attr_name()+"]",this.scope).length?i(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):i(this.scope).on("open.fndtn.reveal","["+r.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+r.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var r=this;return r.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var t=r.S("["+r.attr_name()+"].open"),n=t.data(r.attr_name(!0)+"-init")||r.settings;n&&27===e.which&&n.close_on_esc&&!r.locked&&r.close.call(r,t)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(e,t){var r,i=this;e?void 0!==e.selector?r=i.S("#"+e.data(i.data_attr("reveal-id"))).first():(r=i.S(this.scope),t=e):r=i.S(this.scope);var n,a,o,s=(s=r.data(i.attr_name(!0)+"-init"))||this.settings;if(r.hasClass("open")&&e!==u&&e.attr("data-reveal-id")==r.attr("id"))return i.close(r);r.hasClass("open")||(n=i.S("["+i.attr_name()+"].open"),void 0===r.data("css-top")&&r.data("css-top",parseInt(r.css("top"),10)).data("offset",this.cache_offset(r)),r.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(r),r.on("open.fndtn.reveal",function(e){e.namespace}),r.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),n.length<1&&this.toggle_bg(r,!0),a=function(){0<n.length&&(s.multiple_opened?i.to_back(n):i.hide(n,s.css.close)),s.multiple_opened&&d.push(r),i.show(r,s.css.open)},void 0!==(t="string"==typeof t?{url:t}:t)&&t.url?(o=void 0!==t.success?t.success:null,l.extend(t,{success:function(e,t,n){!l.isFunction(o)||"string"==typeof(n=o(e,t,n))&&(e=n),("undefined"!=typeof options&&void 0!==options.replaceContentSel?r.find(options.replaceContentSel):r).html(e),i.S(r).foundation("section","reflow"),i.S(r).children().foundation(),a()}}),s.on_ajax_error!==l.noop&&l.extend(t,{error:s.on_ajax_error}),l.ajax(t)):a()),i.S(c).trigger("resize")},close:function(t){var e,t=t&&t.length?t:this.S(this.scope),n=this.S("["+this.attr_name()+"].open"),r=t.data(this.attr_name(!0)+"-init")||this.settings,i=this;0<n.length&&(t.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(t),t.trigger("close.fndtn.reveal"),(r.multiple_opened&&1===n.length||!r.multiple_opened||1<t.length)&&(i.toggle_bg(t,!1),i.to_front(t)),r.multiple_opened?(e=t.is(":not(.toback)"),i.hide(t,r.css.close,r),e?d.pop():d=l.grep(d,function(e){e=e[0]===t[0];return e&&i.to_front(t),!e}),0<d.length&&i.to_front(d[d.length-1])):i.hide(n,r.css.close,r))},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(e,t){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=l("<div />",{class:this.settings.bg_class}).appendTo("body").hide());var n=0<this.settings.bg.filter(":visible").length;t!=n&&((t==u?n:!t)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(e,t){if(t){var n,r=(o=e.data(this.attr_name(!0)+"-init")||this.settings).root_element,i=this;0===e.parent(r).length&&(n=e.wrap('<div style="display: none;" />').parent(),e.on("closed.fndtn.reveal.wrapped",function(){e.detach().appendTo(n),e.unwrap().unbind("closed.fndtn.reveal.wrapped")}),e.detach().appendTo(r));r=s(o.animation);if(r.animate||(this.locked=!1),r.pop){t.top=l(c).scrollTop()-e.data("offset")+"px";var a={top:l(c).scrollTop()+e.data("css-top")+"px",opacity:1};return setTimeout(function(){return e.css(t).animate(a,o.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},o.animation_speed/2)}if(t.top=l(c).scrollTop()+e.data("css-top")+"px",r.fade){a={opacity:1};return setTimeout(function(){return e.css(t).animate(a,o.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},o.animation_speed/2)}return e.css(t).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var o;return s((o=this.settings).animation).fade?e.fadeIn(o.animation_speed/2):(this.locked=!1,e.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(e,t){if(t){var n=e.data(this.attr_name(!0)+"-init"),r=this,i=s((n=n||this.settings).animation);if(i.animate||(this.locked=!1),i.pop){var a={top:-l(c).scrollTop()-e.data("offset")+"px",opacity:0};return setTimeout(function(){return e.animate(a,n.animation_speed,"linear",function(){r.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}if(i.fade){a={opacity:0};return setTimeout(function(){return e.animate(a,n.animation_speed,"linear",function(){r.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}return e.hide().css(t).removeClass("open").trigger("closed.fndtn.reveal")}return s((n=this.settings).animation).fade?e.fadeOut(n.animation_speed/2):e.hide()},close_video:function(e){var t=l(".flex-video",e.target),e=l("iframe",t);0<e.length&&(e.attr("data-src",e[0].src),e.attr("src",e.attr("src")),t.hide())},open_video:function(e){var t=l(".flex-video",e.target),n=t.find("iframe");0<n.length&&("string"==typeof n.attr("data-src")?n[0].src=n.attr("data-src"):(e=n[0].src,n[0].src=u,n[0].src=e),t.show())},data_attr:function(e){return 0<this.namespace.length?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){l(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(s){var i="unobtrusiveAjaxClick",a="unobtrusiveAjaxClickTarget";function l(e,t){for(var n=window,r=(e||"").split(".");n&&r.length;)n=n[r.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))}function c(e){return"GET"===e||"POST"===e}function r(o,e){var r,i,a,t=o.getAttribute("data-ajax-confirm");t&&!window.confirm(t)||(r=s(o.getAttribute("data-ajax-loading")),a=parseInt(o.getAttribute("data-ajax-loading-duration"),10)||0,s.extend(e,{type:o.getAttribute("data-ajax-method")||void 0,url:o.getAttribute("data-ajax-url")||void 0,cache:"true"===(o.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(e){var t,n;return t=e,c(n=i)||t.setRequestHeader("X-HTTP-Method-Override",n),!1!==(n=l(o.getAttribute("data-ajax-begin"),["xhr"]).apply(o,arguments))&&r.show(a),n},complete:function(){r.hide(a),l(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(o,arguments)},success:function(e,t,n){var r,i,a;r=o,i=e,-1===(n.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(a=(r.getAttribute("data-ajax-mode")||"").toUpperCase(),s(r.getAttribute("data-ajax-update")).each(function(e,t){switch(a){case"BEFORE":s(t).prepend(i);break;case"AFTER":s(t).append(i);break;case"REPLACE-WITH":s(t).replaceWith(i);break;default:s(t).html(i)}})),l(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(o,arguments)},error:function(){l(o.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(o,arguments)}}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),c(i=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:i})),s.ajax(e))}s(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),r(this,{url:this.href,type:"GET",data:[]})}),s(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,n=s(e.target),r=s(n.parents("form")[0]),n=n.offset();r.data(i,[{name:t+".x",value:Math.round(e.pageX-n.left)},{name:t+".y",value:Math.round(e.pageY-n.top)}]),setTimeout(function(){r.removeData(i)},0)}),s(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.currentTarget.name,n=s(e.target),r=s(n.parents("form")[0]);r.data(i,t?[{name:t,value:e.currentTarget.value}]:[]),r.data(a,n),setTimeout(function(){r.removeData(i),r.removeData(a)},0)}),s(document).on("submit","form[data-ajax=true]",function(e){var t=s(this).data(i)||[],n=s(this).data(a),n=n&&(n.hasClass("cancel")||void 0!==n.attr("formnovalidate"));e.preventDefault(),!n&&((n=s(n=this).data("unobtrusiveValidation"))&&n.validate&&!n.validate())||r(this,{url:this.action,type:this.method||"GET",data:t.concat(s(this).serializeArray())})})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(u){u.extend(u.fn,{validate:function(e){if(this.length){var r=u.data(this[0],"validator");return r?r:(this.attr("novalidate","novalidate"),r=new u.validator(e,this[0]),u.data(this[0],"validator",r),r.settings.onsubmit&&(this.on("click.validate",":submit",function(e){r.submitButton=e.currentTarget,u(this).hasClass("cancel")&&(r.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(r.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return r.submitButton&&(r.settings.submitHandler||r.formSubmitted)&&(e=u("<input type='hidden'/>").attr("name",r.submitButton.name).val(u(r.submitButton).val()).appendTo(r.currentForm)),!r.settings.submitHandler||(t=r.settings.submitHandler.call(r,r.currentForm,n),e&&e.remove(),void 0!==t&&t)}return r.settings.debug&&n.preventDefault(),r.cancelSubmit?(r.cancelSubmit=!1,e()):r.form()?r.pendingRequest?!(r.formSubmitted=!0):e():(r.focusInvalid(),!1)})),r)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return u(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=u(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,r,i,a,o,s=this[0];if(null!=s&&(!s.form&&s.hasAttribute("contenteditable")&&(s.form=this.closest("form")[0],s.name=this.attr("name")),null!=s.form)){if(e)switch(r=(n=u.data(s.form,"validator").settings).rules,i=u.validator.staticRules(s),e){case"add":u.extend(i,u.validator.normalizeRule(t)),delete i.messages,r[s.name]=i,t.messages&&(n.messages[s.name]=u.extend(n.messages[s.name],t.messages));break;case"remove":return t?(o={},u.each(t.split(/\s/),function(e,t){o[t]=i[t],delete i[t]}),o):(delete r[s.name],i)}return(e=u.validator.normalizeRules(u.extend({},u.validator.classRules(s),u.validator.attributeRules(s),u.validator.dataRules(s),u.validator.staticRules(s)),s)).required&&(a=e.required,delete e.required,e=u.extend({required:a},e)),e.remote&&(a=e.remote,delete e.remote,e=u.extend(e,{remote:a})),e}}}),u.extend(u.expr.pseudos||u.expr[":"],{blank:function(e){return!u.trim(""+u(e).val())},filled:function(e){e=u(e).val();return null!==e&&!!u.trim(""+e)},unchecked:function(e){return!u(e).prop("checked")}}),u.validator=function(e,t){this.settings=u.extend(!0,{},u.validator.defaults,e),this.currentForm=t,this.init()},u.validator.format=function(n,e){return 1===arguments.length?function(){var e=u.makeArray(arguments);return e.unshift(n),u.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?u.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),u.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==u.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):u(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):u(e)).removeClass(t).addClass(n)}},setDefaults:function(e){u.extend(u.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}."),step:u.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.groups={};function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=u(this).closest("form")[0],this.name=u(this).attr("name"));var t=u.data(this.form,"validator"),n="on"+e.type.replace(/^validate/,""),r=t.settings;r[n]&&!u(this).is(r.ignore)&&r[n].call(t,this,e)}u.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),u.each(e,function(e,t){r[t]=n})}),n=this.settings.rules,u.each(n,function(e,t){n[e]=u.validator.normalizeRule(t)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,r=this.clean(e),i=this.validationTargetFor(r),a=this,o=!0;return void 0===i?delete this.invalid[r.name]:(this.prepareElement(i),this.currentElements=u(i),(n=this.groups[i.name])&&u.each(this.groups,function(e,t){t===n&&e!==i.name&&(r=a.validationTargetFor(a.clean(a.findByName(e))))&&r.name in a.invalid&&(a.currentElements.push(r),o=a.check(r)&&o)}),t=!1!==this.check(i),o=o&&t,this.invalid[i.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),u(e).attr("aria-invalid",!t)),o},showErrors:function(t){var n;t&&(u.extend((n=this).errorMap,t),this.errorList=u.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=u.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===u.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return u(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||u(this).attr("name");return!e&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=u(this).closest("form")[0],this.name=e),!(e in n||!t.objectLength(u(this).rules()))&&(n[e]=!0)})},clean:function(e){return u(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([])},reset:function(){this.resetInternals(),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=u(e),n=e.type;return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(t=e.hasAttribute("contenteditable")?t.text():t.val(),"file"===n?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(n=t.lastIndexOf("/"))||0<=(n=t.lastIndexOf("\\"))?t.substr(n+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,r,i,a=u(t).rules(),o=u.map(a,function(e,t){return t}).length,s=!1,l=this.elementValue(t);if("function"==typeof a.normalizer?i=a.normalizer:"function"==typeof this.settings.normalizer&&(i=this.settings.normalizer),i){if("string"!=typeof(l=i.call(t,l)))throw new TypeError("The normalizer should return a string value.");delete a.normalizer}for(n in a){r={method:n,parameters:a[n]};try{if("dependency-mismatch"===(e=u.validator.methods[n].call(this,l,t,r.parameters))&&1===o){s=!0;continue}if(s=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,r),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method."),e}}if(!s)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(e,t){return u(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||u(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,u.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):r.test(n)&&(n=u.validator.format(n.replace(r,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,r,i,a=this.errorsFor(e),o=this.idOrName(e),s=u(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(t)):(n=a=u("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,u(e)):n.insertAfter(e),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+this.escapeCssMeta(o)+"']").length&&(o=a.attr("id"),s?s.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(s+=" "+o):s=o,u(e).attr("aria-describedby",s),(r=this.groups[e.name])&&u.each((i=this).groups,function(e,t){t===r&&u("[name='"+i.escapeCssMeta(e)+"']",i.currentForm).attr("aria-describedby",a.attr("id"))}))),!t&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=u(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),u(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return u(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return u("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!u(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!u.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,u(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],u(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.submitButton&&u("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",u.data(e,"previousValue")||u.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:u.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=u(e).attr("class");return e&&u.each(e.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(t,u.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,r){/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=void 0)),r||0===r?e[n]=r:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(e){var t,n,r={},i=u(e),a=e.getAttribute("type");for(t in u.validator.methods)n="required"===t?!!(n=""===(n=e.getAttribute(t))?!0:n):i.attr(t),this.normalizeAttributeRule(r,a,t,n);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var t,n,r={},i=u(e),a=e.getAttribute("type");for(t in u.validator.methods)n=i.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(r,a,t,n);return r},staticRules:function(e){var t={},n=u.data(e.form,"validator");return t=n.settings.rules?u.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(r,i){return u.each(r,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!u(t.depends,i.form).length;break;case"function":n=t.depends.call(i,i)}n?r[e]=void 0===t.param||t.param:(u.data(i.form,"validator").resetElements(u(i)),delete r[e])}}else delete r[e]}),u.each(r,function(e,t){r[e]=u.isFunction(t)&&"normalizer"!==e?t(i):t}),u.each(["minlength","maxlength"],function(){r[this]&&(r[this]=Number(r[this]))}),u.each(["rangelength","range"],function(){var e;r[this]&&(u.isArray(r[this])?r[this]=[Number(r[this][0]),Number(r[this][1])]:"string"==typeof r[this]&&(e=r[this].replace(/[\[\]]/g,"").split(/[\s,]+/),r[this]=[Number(e[0]),Number(e[1])]))}),u.validator.autoCreateRanges&&(null!=r.min&&null!=r.max&&(r.range=[r.min,r.max],delete r.min,delete r.max),null!=r.minlength&&null!=r.maxlength&&(r.rangelength=[r.minlength,r.maxlength],delete r.minlength,delete r.maxlength)),r},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},u.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){u.validator.methods[e]=t,u.validator.messages[e]=void 0!==n?n:u.validator.messages[e],t.length<3&&u.validator.addClassRules(e,u.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):0<e.length;t=u(t).val();return t&&0<t.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function r(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function i(e){return Math.round(e*Math.pow(10,a))}var a,o=u(t).attr("type"),s="Step attribute on input type "+o+" is not supported.",l=new RegExp("\\b"+o+"\\b"),c=!0;if(o&&!l.test(["text","number","range"].join()))throw new Error(s);return a=r(n),(r(e)>a||i(e)%i(n)!=0)&&(c=!1),this.optional(t)||c},equalTo:function(e,t,n){n=u(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){u(t).valid()}),e===n.val()},remote:function(r,i,e,a){if(this.optional(i))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var o,t,s=this.previousValue(i,a);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=s.originalMessage||this.settings.messages[i.name][a],this.settings.messages[i.name][a]=s.message,t=u.param(u.extend({data:r},(e="string"==typeof e?{url:e}:e).data)),s.old===t?s.valid:(s.old=t,(o=this).startRequest(i),(t={})[i.name]=r,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:t,context:o.currentForm,success:function(e){var t,n=!0===e||"true"===e;o.settings.messages[i.name][a]=s.originalMessage,n?(t=o.formSubmitted,o.resetInternals(),o.toHide=o.errorsFor(i),o.formSubmitted=t,o.successList.push(i),o.invalid[i.name]=!1,o.showErrors()):(t={},e=e||o.defaultMessage(i,{method:a,parameters:r}),t[i.name]=s.message=e,o.invalid[i.name]=!0,o.showErrors(t)),s.valid=n,o.stopRequest(i,n)}},e)),"pending")}}});var r,i={};return u.ajaxPrefilter?u.ajaxPrefilter(function(e,t,n){var r=e.port;"abort"===e.mode&&(i[r]&&i[r].abort(),i[r]=n)}):(r=u.ajax,u.ajax=function(e){var t=("mode"in e?e:u.ajaxSettings).mode,n=("port"in e?e:u.ajaxSettings).port;return"abort"===t?(i[n]&&i[n].abort(),i[n]=r.apply(this,arguments),i[n]):r.apply(this,arguments)}),u}),function(e){"function"==typeof define&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery-validation")):jQuery.validator.unobtrusive=e(jQuery)}(function(l){var e,o=l.validator,s="unobtrusiveValidation";function c(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function u(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function n(e){return e.substr(0,e.lastIndexOf(".")+1)}function d(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}function f(e){var t=l(this),n="__jquery_unobtrusive_validation_form_reset";if(!t.data(n)){t.data(n,!0);try{t.data("validator").resetForm()}finally{t.removeData(n)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function p(n){function e(e,t){(e=a[e])&&l.isFunction(e)&&e.apply(n,t)}var t=l(n),r=t.data(s),i=l.proxy(f,n),a=o.unobtrusive.options||{};return r||(r={options:{errorClass:a.errorClass||"input-validation-error",errorElement:a.errorElement||"span",errorPlacement:function(){!function(e,t){var n=l(this).find("[data-valmsg-for='"+u(t[0].name)+"']"),t=(t=n.attr("data-valmsg-replace"))?!1!==l.parseJSON(t):null;n.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",n),t?(n.empty(),e.removeClass("input-validation-error").appendTo(n)):e.hide()}.apply(n,arguments),e("errorPlacement",arguments)},invalidHandler:function(){!function(e,t){var n=l(this).find("[data-valmsg-summary=true]"),r=n.find("ul");r&&r.length&&t.errorList.length&&(r.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(r)}))}.apply(n,arguments),e("invalidHandler",arguments)},messages:{},rules:{},success:function(){!function(e){var t,n=e.data("unobtrusiveContainer");n&&(t=(t=n.attr("data-valmsg-replace"))?l.parseJSON(t):null,n.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),t&&n.empty())}.apply(n,arguments),e("success",arguments)}},attachValidation:function(){t.off("reset."+s,i).on("reset."+s,i).validate(this.options)},validate:function(){return t.validate(),t.valid()}},t.data(s,r)),r}return o.unobtrusive={adapters:[],parseElement:function(r,e){var t,i,a,o=l(r),s=o.parents("form")[0];s&&((t=p(s)).options.rules[r.name]=i={},t.options.messages[r.name]=a={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=o.attr(e),n={};void 0!==t&&(e+="-",l.each(this.params,function(){n[this]=o.attr(e+this)}),this.adapt({element:r,form:s,message:t,params:n,rules:i,messages:a}))}),l.extend(i,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e),e=t.parents().addBack().filter("form").add(t.find("form")).has("[data-val=true]");t.find("[data-val=true]").each(function(){o.unobtrusive.parseElement(this,!0)}),e.each(function(){var e=p(this);e&&e.attachValidation()})}},(e=o.unobtrusive.adapters).add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},e.addBool=function(t,n){return this.add(t,function(e){c(e,n||t,!0)})},e.addMinMax=function(e,r,i,a,t,n){return this.add(e,[t||"min",n||"max"],function(e){var t=e.params.min,n=e.params.max;t&&n?c(e,a,[t,n]):t?c(e,r,t):n&&c(e,i,n)})},e.addSingleVal=function(t,n,r){return this.add(t,[n||"val"],function(e){c(e,r||t,e.params[n])})},o.addMethod("__dummy__",function(e,t,n){return!0}),o.addMethod("regex",function(e,t,n){return!!this.optional(t)||(n=new RegExp(n).exec(e))&&0===n.index&&n[0].length===e.length}),o.addMethod("nonalphamin",function(e,t,n){var r;return r=n?(r=e.match(/\W/g))&&r.length>=n:r}),o.methods.extension?(e.addSingleVal("accept","mimtype"),e.addSingleVal("extension","extension")):e.addSingleVal("extension","extension","accept"),e.addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],function(e){var t=n(e.element.name),t=d(e.params.other,t);c(e,"equalTo",l(e.form).find(":input").filter("[name='"+u(t)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||c(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(r){var i={url:r.params.url,type:r.params.type||"GET",data:{}},a=n(r.element.name);l.each((r.params.additionalfields||r.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var n=d(t,a);i.data[n]=function(){var e=l(r.form).find(":input").filter("[name='"+u(n)+"']");return e.is(":checkbox")?e.filter(":checked").val()||e.filter(":hidden").val()||"":e.is(":radio")?e.filter(":checked").val()||"":e.val()}}),c(r,"remote",i)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&c(e,"minlength",e.params.min),e.params.nonalphamin&&c(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&c(e,"regex",e.params.regex)}),e.add("fileextensions",["extensions"],function(e){c(e,"extension",e.params.extensions)}),l(function(){o.unobtrusive.parse(document)}),o.unobtrusive}),function(d){function i(e,t,n){var r=[];return(e.reduction||e).filter(d.validity.settings.elementSupport).each(function(){t(this)?r.push(this):a(this,o(n,{field:s(this)}))}),e.reduction=d(r),e}function n(){d.validity.isValidating()&&(d.validity.report.errors++,d.validity.report.valid=!1)}function a(e,t){n(),d.validity.out.raise(d(e),t)}function f(e,t){n(),d.validity.out.raiseAggregate(e,t)}function r(e){var t=0;return e.each(function(){var e=parseFloat(this.value);t+=isNaN(e)?0:e}),t}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(RegExp("#\\{"+n+"\\}","g"),t[n]));return l(e)}function s(e){var t=(e=d(e)).prop("id"),n=d.validity.settings.defaultFieldName;if(e.prop("title").length)n=e.prop("title");else if(/^([A-Z0-9][a-z]*)+$/.test(t))n=t.replace(/([A-Z0-9])[a-z]*/g," $&");else if(/^[a-z0-9]+(_[a-z0-9]+)*$/.test(t)){for(e=t.split("_"),t=0;t<e.length;++t)e[t]=l(e[t]);n=e.join(" ")}return d.trim(n)}function l(e){return e.substring?e.substring(0,1).toUpperCase()+e.substring(1,e.length):e}var t;d.validity={settings:d.extend({outputMode:"tooltip",scrollTo:!1,modalErrorsClickable:!0,defaultFieldName:"This field",elementSupport:":text, :password, textarea, select, :radio, :checkbox, input[type='hidden'], input[type='tel'], input[type='email']",argToString:function(e){return e.getDate?[e.getMonth()+1,e.getDate(),e.getFullYear()].join("/"):e+""},debugPrivates:!1},{}),patterns:{integer:/^\d+$/,date:/^((0?\d)|(1[012]))[\/-]([012]?\d|30|31)[\/-]\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?((\d{1,3}(,\d{3})*)|\d+)(\.(\d{2})?)?$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,zip:/^\d{5}(-\d{4})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/,time12:/^((0?\d)|(1[012])):[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/},messages:{require:"#{field} is required.",match:"#{field} is in an invalid format.",integer:"#{field} must be a positive, whole number.",date:"#{field} must be formatted as a date. (mm/dd/yyyy)",email:"#{field} must be formatted as an email.",usd:"#{field} must be formatted as a US Dollar amount.",url:"#{field} must be formatted as a URL.",number:"#{field} must be formatted as a number.",zip:"#{field} must be formatted as a zipcode ##### or #####-####.",phone:"#{field} must be formatted as a phone number ###-###-####.",guid:"#{field} must be formatted as a guid like {3F2504E0-4F89-11D3-9A0C-0305E82C3301}.",time24:"#{field} must be formatted as a 24 hour time: 23:00.",time12:"#{field} must be formatted as a 12 hour time: 12:00 AM/PM",lessThan:"#{field} must be less than #{max}.",lessThanOrEqualTo:"#{field} must be less than or equal to #{max}.",greaterThan:"#{field} must be greater than #{min}.",greaterThanOrEqualTo:"#{field} must be greater than or equal to #{min}.",range:"#{field} must be between #{min} and #{max}.",tooLong:"#{field} cannot be longer than #{max} characters.",tooShort:"#{field} cannot be shorter than #{min} characters.",nonHtml:"#{field} cannot contain HTML characters.",alphabet:"#{field} contains disallowed characters.",minCharClass:"#{field} cannot have more than #{min} #{charClass} characters.",maxCharClass:"#{field} cannot have less than #{min} #{charClass} characters.",equal:"Values don't match.",distinct:"A value was repeated.",sum:"Values don't add to #{sum}.",sumMax:"The sum of the values must be less than #{max}.",sumMin:"The sum of the values must be greater than #{min}.",radioChecked:"The selected value is not valid.",generic:"Invalid."},out:{start:function(){this.defer("start")},end:function(e){this.defer("end",e)},raise:function(e,t){this.defer("raise",e,t)},raiseAggregate:function(e,t){this.defer("raiseAggregate",e,t)},defer:function(e){var t=d.validity;(t=t.outputs[t.settings.outputMode])[e].apply(t,Array.prototype.slice.call(arguments,1))}},charClasses:{alphabetical:/\w/g,numeric:/\d/g,alphanumeric:/[A-Za-z0-9]/g,symbol:/[^A-Za-z0-9]/g},outputs:{},__private:void 0,setup:function(e){this.settings=d.extend(this.settings,e),this.__private=this.settings.debugPrivates?t:void 0},report:null,isValidating:function(){return!!this.report},start:function(){this.out.start(),this.report={errors:0,valid:!0}},end:function(){var e=this.report||{errors:0,valid:!0};return this.report=null,this.out.end(e),e},clear:function(){this.start(),this.end()}},d.fn.extend({validity:function(n){return this.each(function(){var e,t=this;"form"==this.tagName.toLowerCase()&&(e=null,"string"==typeof n?e=function(){d(n).require()}:d.isFunction(n)&&(e=n),n&&d(this).bind("submit",function(){return d.validity.start(),e.apply(t),d.validity.end().valid}))})},require:function(e){return i(this,function(e){return d(e).val()&&(null!=d(e).val()&&d(e).val().length)},e||d.validity.messages.require)},match:function(t,e){return e||(e=d.validity.messages.match,"string"==typeof t&&d.validity.messages[t]&&(e=d.validity.messages[t])),"string"==typeof t&&(t=d.validity.patterns[t]),i(this,d.isFunction(t)?function(e){return!e.value.length||t(e.value)}:function(e){return t.global&&(t.lastIndex=0),!e.value.length||t.test(e.value)},e)},range:function(t,n,e){return i(this,t.getTime&&n.getTime?function(e){return(e=new Date(e.value))>=new Date(t)&&e<=new Date(n)}:t.substring&&n.substring&&Big?function(e){return(e=new Big(e.value)).greaterThanOrEqualTo(new Big(t))&&e.lessThanOrEqualTo(new Big(n))}:function(e){return e=parseFloat(e.value),t<=e&&e<=n},e||o(d.validity.messages.range,{min:d.validity.settings.argToString(t),max:d.validity.settings.argToString(n)}))},greaterThan:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)>t}:t.substring&&Big?function(e){return new Big(e.value).greaterThan(new Big(t))}:function(e){return parseFloat(e.value)>t},e||o(d.validity.messages.greaterThan,{min:d.validity.settings.argToString(t)}))},greaterThanOrEqualTo:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)>=t}:t.substring&&Big?function(e){return new Big(e.value).greaterThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)>=t},e||o(d.validity.messages.greaterThanOrEqualTo,{min:d.validity.settings.argToString(t)}))},lessThan:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)<t}:t.substring&&Big?function(e){return new Big(e.value).lessThan(new Big(t))}:function(e){return parseFloat(e.value)<t},e||o(d.validity.messages.lessThan,{max:d.validity.settings.argToString(t)}))},lessThanOrEqualTo:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)<=t}:t.substring&&Big?function(e){return new Big(e.value).lessThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)<=t},e||o(d.validity.messages.lessThanOrEqualTo,{max:d.validity.settings.argToString(t)}))},maxLength:function(t,e){return i(this,function(e){return e.value.length<=t},e||o(d.validity.messages.tooLong,{max:t}))},minLength:function(t,e){return i(this,function(e){return e.value.length>=t},e||o(d.validity.messages.tooShort,{min:t}))},alphabet:function(n,e){var r=[];return i(this,function(e){for(var t=0;t<e.value.length;++t)if(-1==n.indexOf(e.value.charAt(t)))return r.push(e.value.charAt(t)),0;return 1},e||o(d.validity.messages.alphabet,{chars:r.join(", ")}))},minCharClass:function(t,n,e){return"string"==typeof t&&(t=t.toLowerCase(),d.validity.charClasses[t]&&(t=d.validity.charClasses[t])),i(this,function(e){return(e.value.match(t)||[]).length>=n},e||o(d.validity.messages.minCharClass,{min:n,charClass:t}))},maxCharClass:function(t,n,e){return"string"==typeof t&&(t=t.toLowerCase(),d.validity.charClasses[t]&&(t=d.validity.charClasses[t])),i(this,function(e){return(e.value.match(t)||[]).length<=n},e||o(d.validity.messages.maxCharClass,{max:n,charClass:t}))},nonHtml:function(e){return i(this,function(e){return d.validity.patterns.nonHtml.test(e.value)},e||d.validity.messages.nonHtml)},equal:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport),r=function(e){return e},i=d.validity.messages.equal;if(n.length){d.isFunction(e)?(r=e,"string"==typeof t&&(i=t)):"string"==typeof e&&(i=e);var a,o=d.map(n,function(e){return r(e.value)}),s=o[0],l=!0;for(a in o)o[a]!=s&&(l=!1);l||(f(n,i),this.reduction=d([]))}return this},distinct:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport),r=function(e){return e},i=d.validity.messages.distinct,a=[],o=[],s=!0;if(n.length){d.isFunction(e)?(r=e,"string"==typeof t&&(i=t)):"string"==typeof e&&(i=e);for(var l=d.map(n,function(e){return r(e.value)}),c=0;c<l.length;++c)if(l[c].length){for(var u=0;u<a.length;++u)a[u]==l[c]&&(s=!1,o.push(l[c]));a.push(l[c])}if(!s){for(a=0,s=(o=d.unique(o)).length;a<s;++a)f(n.filter("[value='"+o[a]+"']"),i);this.reduction=d([])}}return this},sum:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);return n.length&&e!=r(n)&&(f(n,t||o(d.validity.messages.sum,{sum:e})),this.reduction=d([])),this},sumMax:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);return n.length&&e<r(n)&&(f(n,t||o(d.validity.messages.sumMax,{max:e})),this.reduction=d([])),this},sumMin:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);return n.length&&e>r(n)&&(f(n,t||o(d.validity.messages.sumMin,{min:e})),this.reduction=d([])),this},radioChecked:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);n.is(":radio")&&n.find(":checked").val()!=e&&f(n,t||d.validity.messages.radioChecked)},radioNotChecked:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);n.is(":radio")&&n.filter(":checked").val()==e&&f(n,t||d.validity.messages.radioChecked)},checkboxChecked:function(e){return i(this,function(e){return!d(e).is(":checkbox")||d(e).is(":checked")},e||d.validity.messages.nonHtml)},assert:function(e,t){var n=this.reduction||this;if(n.length){if(d.isFunction(e))return i(this,e,t||d.validity.messages.generic);e||(f(n,t||d.validity.messages.generic),this.reduction=d([]))}return this},fail:function(e){return this.assert(!1,e)}}),t={validate:i,addToReport:n,raiseError:a,raiseAggregateError:f,numericSum:r,format:o,infer:s,capitalize:l}}(jQuery),function(i){i.validity.outputs.tooltip={tooltipClass:"validity-tooltip",start:function(){i("."+i.validity.outputs.tooltip.tooltipClass).remove()},end:function(e){!e.valid&&i.validity.settings.scrollTo&&i(document).scrollTop(i("."+i.validity.outputs.tooltip.tooltipClass).offset().top)},raise:function(e,t){var n=e.offset();n.left+=e.width()+18,n.top+=8;var r=i('<div class="validity-tooltip">'+t+'<div class="validity-tooltip-outer"><div class="validity-tooltip-inner"></div></div></div>').click(function(){e.focus(),i(this).fadeOut()}).css(n).hide().appendTo("body").fadeIn();i.validity.settings.fadeOutTooltipsOnFocus&&e.on("focus",function(){r.fadeOut()})},raiseAggregate:function(e,t){e.length&&this.raise(e.filter(":last"),t)}}}(jQuery),function(r){function i(e){return e.attr("id").length?e.attr("id"):e.attr("name")}r.validity.outputs.label={cssClass:"error",start:function(){r("."+r.validity.outputs.label.cssClass).remove()},end:function(e){!e.valid&&r.validity.settings.scrollTo&&(location.hash=r("."+r.validity.outputs.label.cssClass+":eq(0)").attr("for"))},raise:function(e,t){var n="."+r.validity.outputs.label.cssClass+"[for='"+i(e)+"']";r(n).length?r(n).text(t):r("<label/>").attr("for",i(e)).addClass(r.validity.outputs.label.cssClass).text(t).click(function(){e.length&&e[0].select()}).insertAfter(e)},raiseAggregate:function(e,t){e.length&&this.raise(r(e.get(e.length-1)),t)}}}(jQuery),function(r){r.validity.outputs.modal={start:function(){r(".validity-modal-msg").remove()},end:function(e){!e.valid&&r.validity.settings.scrollTo&&(location.hash=r(".validity-modal-msg:eq(0)").attr("id"))},raise:function(e,t){var n;e.length&&(n=e.offset(),e.get(0),n={left:parseInt(n.left+e.width()+4,10)+"px",top:parseInt(n.top-10,10)+"px"},r("<div/>").addClass("validity-modal-msg").css(n).text(t).click(r.validity.settings.modalErrorsClickable?function(){r(this).remove()}:null).appendTo("body"))},raiseAggregate:function(e,t){e.length&&this.raise(r(e.get(e.length-1)),t)}}}(jQuery),function(t){var n=[];t.validity.outputs.summary={start:function(){t(".validity-erroneous").removeClass("validity-erroneous"),n=[]},end:function(){if(t(".validity-summary-container").stop().hide().find("ul").html(""),n.length){for(var e=0;e<n.length;++e)t("<li/>").text(n[e]).appendTo(".validity-summary-container ul");t(".validity-summary-container").show(),t.validity.settings.scrollTo&&(location.hash=t(".validity-erroneous:eq(0)").attr("id"))}},raise:function(e,t){n.push(t),e.addClass("validity-erroneous")},raiseAggregate:function(e,t){this.raise(e,t)},container:function(){document.write('<div class="validity-summary-container">The form didn\'t submit for the following reason(s):<ul></ul></div>')}}}(jQuery),function(a,o,n,s){var l=a(o);a.fn.lazyload=function(e){var r=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:o,data_attribute:"original",skip_invisible:!0,appear:null,load:null};function t(){var t=0;r.each(function(){var e=a(this);if((!i.skip_invisible||e.is(":visible"))&&!a.abovethetop(this,i)&&!a.leftofbegin(this,i))if(a.belowthefold(this,i)||a.rightoffold(this,i)){if(++t>i.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(s!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),s!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),a.extend(i,e)),e=i.container===s||i.container===o?l:a(i.container),0===i.event.indexOf("scroll")&&e.bind(i.event,t),this.each(function(){var t=this,n=a(t);t.loaded=!1,n.one("appear",function(){var e;this.loaded||(i.appear&&(e=r.length,i.appear.call(t,e,i)),a("<img />").bind("load",function(){n.hide().attr("src",n.data(i.data_attribute))[i.effect](i.effect_speed),t.loaded=!0;var e=a.grep(r,function(e){return!e.loaded});r=a(e),i.load&&(e=r.length,i.load.call(t,e,i))}).attr("src",n.data(i.data_attribute)))}),0!==i.event.indexOf("scroll")&&n.bind(i.event,function(e){t.loaded||n.trigger("appear")})}),l.bind("resize",function(e){t()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&l.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&r.each(function(){a(this).trigger("appear")})}),a(n).ready(function(){t()}),this},a.belowthefold=function(e,t){var n=t.container===s||t.container===o?l.height()+l.scrollTop():a(t.container).offset().top+a(t.container).height();return n<=a(e).offset().top-t.threshold},a.rightoffold=function(e,t){var n=t.container===s||t.container===o?l.width()+l.scrollLeft():a(t.container).offset().left+a(t.container).width();return n<=a(e).offset().left-t.threshold},a.abovethetop=function(e,t){var n=t.container===s||t.container===o?l.scrollTop():a(t.container).offset().top;return n>=a(e).offset().top+t.threshold+a(e).height()},a.leftofbegin=function(e,t){var n=t.container===s||t.container===o?l.scrollLeft():a(t.container).offset().left;return n>=a(e).offset().left+t.threshold+a(e).width()},a.inviewport=function(e,t){return!(a.rightoffold(e,t)||a.leftofbegin(e,t)||a.belowthefold(e,t)||a.abovethetop(e,t))},a.extend(a.expr[":"],{"below-the-fold":function(e){return a.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!a.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return a.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!a.rightoffold(e,{threshold:0})},"in-viewport":function(e){return a.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!a.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return a.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!a.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(A){A.extend({tablesorter:new function(){function S(){var e=arguments[0],t=1<arguments.length?Array.prototype.slice.call(arguments):e;"undefined"!=typeof console&&void 0!==console.log?console[/error/i.test(e)?"error":/warn/i.test(e)?"warn":"log"](t):alert(t)}function x(e,t){S(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function m(e){for(var t in e)return;return 1}function C(e,t,n){if(!t)return"";var r=e.config,i=r.textExtraction||"",t="basic"===i?A(t).attr(r.textAttribute)||t.textContent||t.innerText||A(t).text()||"":"function"==typeof i?i(t,e,n):"function"==typeof(i=M.getColumnData(e,i,n))?i(t,e,n):t.textContent||t.innerText||A(t).text()||"";return A.trim(t)}function h(e){var t,n,r,i,a,o,s,l=e.config,c=l.$tbodies=l.$table.children("tbody:not(."+l.cssInfoBlock+")"),u=0,d="",f=c.length;if(0===f)return l.debug&&S("Warning: *Empty table!* Not building a parser cache");for(l.debug&&(s=new Date,S("Detecting parsers for each column")),t=[],n=[];u<f;){if((r=c[u].rows)[u])for(i=l.columns,a=0;a<i;a++){if(p=l.$headers.filter('[data-column="'+a+'"]:last'),h=M.getColumnData(e,l.headers,a),o=M.getParserById(M.getData(p,h,"extractor")),m=M.getParserById(M.getData(p,h,"sorter")),g="false"===M.getData(p,h,"parser"),l.empties[a]=(M.getData(p,h,"empty")||l.emptyTo||(l.emptyToBottom?"bottom":"top")).toLowerCase(),l.strings[a]=(M.getData(p,h,"string")||l.stringTo||"max").toLowerCase(),o=o||!1,!(m=g?M.getParserById("no-parser"):m))e:{for(var p=e,h=r,g=-1,m=a,v=void 0,y=M.parsers.length,b=!1,w="",v=!0;""===w&&v;)h[++g]?(w=C(p,b=h[g].cells[m],m),p.config.debug&&S("Checking if value was empty on row "+g+", column: "+m+': "'+w+'"')):v=!1;for(;0<=--y;)if((v=M.parsers[y])&&"text"!==v.id&&v.is&&v.is(w,p,b)){m=v;break e}m=M.getParserById("text")}l.debug&&(d+="column:"+a+"; extractor:"+o.id+"; parser:"+m.id+"; string:"+l.strings[a]+"; empty: "+l.empties[a]+"\n"),n[a]=m,t[a]=o}u+=n.length?f:1}l.debug&&(S(d||"No parsers detected"),x("Completed detecting parsers",s)),l.parsers=n,l.extractors=t}function g(e){var t,n,r,i,a,o,s,l,c,u,d,f=e.config,p=f.$table.children("tbody"),h=f.extractors,g=f.parsers;if(f.cache={},f.totalRows=0,!g)return f.debug&&S("Warning: *Empty table!* Not building a cache");for(f.debug&&(l=new Date),f.showProcessing&&M.isProcessing(e,!0),a=0;a<p.length;a++)if(d=[],t=f.cache[a]={normalized:[]},!p.eq(a).hasClass(f.cssInfoBlock)){for(c=p[a]&&p[a].rows.length||0,r=0;r<c;++r)if(u={child:[]},s=[],(o=A(p[a].rows[r])).hasClass(f.cssChildRow)&&0!==r)n=t.normalized.length-1,t.normalized[n][f.columns].$row=t.normalized[n][f.columns].$row.add(o),o.prev().hasClass(f.cssChildRow)||o.prev().addClass(M.css.cssHasChild),u.child[n]=A.trim(o[0].textContent||o[0].innerText||o.text()||"");else{for(u.$row=o,u.order=r,i=0;i<f.columns;++i)void 0===g[i]?f.debug&&S("No parser found for cell:",o[0].cells[i],"does it have a header?"):(n=C(e,o[0].cells[i],i),n=void 0===h[i].id?n:h[i].format(n,e,o[0].cells[i],i),n="no-parser"===g[i].id?"":g[i].format(n,e,o[0].cells[i],i),s.push(f.ignoreCase&&"string"==typeof n?n.toLowerCase():n),"numeric"===(g[i].type||"").toLowerCase()&&(d[i]=Math.max(Math.abs(n)||0,d[i]||0)));s[f.columns]=u,t.normalized.push(s)}t.colMax=d,f.totalRows+=t.normalized.length}f.showProcessing&&M.isProcessing(e),f.debug&&x("Building cache for "+c+" rows",l)}function v(e,t){var n,r,i,a,o,s,l=e.config,c=l.widgetOptions,u=e.tBodies,d=[],f=l.cache;if(m(f))return l.appender?l.appender(e,d):e.isUpdating&&l.$table.trigger("updateComplete",e);for(l.debug&&(s=new Date),o=0;o<u.length;o++)if((n=A(u[o])).length&&!n.hasClass(l.cssInfoBlock)){for(i=M.processTbody(e,n,!0),r=(n=f[o].normalized).length,a=0;a<r;a++)d.push(n[a][l.columns].$row),l.appender&&(!l.pager||l.pager.removeRows&&c.pager_removeRows||l.pager.ajax)||i.append(n[a][l.columns].$row);M.processTbody(e,i,!1)}l.appender&&l.appender(e,d),l.debug&&x("Rebuilt table",s),t||l.appender||M.applyWidget(e),e.isUpdating&&l.$table.trigger("updateComplete",e)}function l(e){return/^d/i.test(e)||1===e}function c(t){var n,r,i,a,o,e,s=t.config;s.headerList=[],s.headerContent=[],s.debug&&(e=new Date),s.columns=M.computeColumnIndex(s.$table.children("thead, tfoot").children("tr")),i=s.cssIcon?'<i class="'+(s.cssIcon===M.css.icon?M.css.icon:s.cssIcon+" "+M.css.icon)+'"></i>':"",s.$headers=A(t).find(s.selectorHeaders).each(function(e){n=A(this),o=M.getColumnData(t,s.headers,e,!0),s.headerContent[e]=A(this).html(),""!==s.headerTemplate&&(a=s.headerTemplate.replace(/\{content\}/g,A(this).html()).replace(/\{icon\}/g,i),s.onRenderTemplate&&(r=s.onRenderTemplate.apply(n,[e,a]))&&"string"==typeof r&&(a=r),A(this).html('<div class="'+M.css.headerIn+'">'+a+"</div>")),s.onRenderHeader&&s.onRenderHeader.apply(n,[e]),this.column=parseInt(A(this).attr("data-column"),10),this.order=l(M.getData(n,o,"sortInitialOrder")||s.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,void 0!==(o=M.getData(n,o,"lockedOrder")||!1)&&!1!==o&&(this.order=this.lockedOrder=l(o)?[1,1,1]:[0,0,0]),n.addClass(M.css.header+" "+s.cssHeader),s.headerList[e]=this,n.parent().addClass(M.css.headerRow+" "+s.cssHeaderRow).attr("role","row"),s.tabIndex&&n.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"}),b(t),s.debug&&(x("Built headers:",e),S(s.$headers))}function y(e,t,n){var r=e.config;r.$table.find(r.selectorRemove).remove(),h(e),g(e),j(r.$table,t,n)}function b(n){var r,i,a=n.config;a.$headers.each(function(e,t){r=A(t),i=M.getColumnData(n,a.headers,e,!0),i="false"===M.getData(t,i,"sorter")||"false"===M.getData(t,i,"parser"),t.sortDisabled=i,r[i?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+i),n.id&&(i?r.removeAttr("aria-controls"):r.attr("aria-controls",n.id))})}function w(e){var t,n,r=e.config,i=r.sortList,a=i.length,o=M.css.sortNone+" "+r.cssNone,s=[M.css.sortAsc+" "+r.cssAsc,M.css.sortDesc+" "+r.cssDesc],l=["ascending","descending"],c=A(e).find("tfoot tr").children().add(r.$extraHeaders).removeClass(s.join(" "));for(r.$headers.removeClass(s.join(" ")).addClass(o).attr("aria-sort","none"),t=0;t<a;t++)if(2!==i[t][1]&&(e=r.$headers.not(".sorter-false").filter('[data-column="'+i[t][0]+'"]'+(1===a?":last":""))).length){for(n=0;n<e.length;n++)e[n].sortDisabled||e.eq(n).removeClass(o).addClass(s[i[t][1]]).attr("aria-sort",l[i[t][1]]);c.length&&c.filter('[data-column="'+i[t][0]+'"]').removeClass(o).addClass(s[i[t][1]])}r.$headers.not(".sorter-false").each(function(){var e=A(this),t=this.order[(this.count+1)%(r.sortReset?3:2)],t=e.text()+": "+M.language[e.hasClass(M.css.sortAsc)?"sortAsc":e.hasClass(M.css.sortDesc)?"sortDesc":"sortNone"]+M.language[0===t?"nextAsc":1===t?"nextDesc":"nextNone"];e.attr("aria-label",t)})}function k(i){var a,e,o,t,s,l,c,u,d,f=i.config,p=f.textSorter||"",h=f.sortList,g=h.length,n=i.tBodies.length;if(!f.serverSideSorting&&!m(f.cache)){for(f.debug&&(t=new Date),e=0;e<n;e++)s=f.cache[e].colMax,f.cache[e].normalized.sort(function(e,t){for(a=0;a<g&&(o=h[a][0],l=h[a][1],d=0===l,!f.sortStable||e[o]!==t[o]||1!==g);a++)if(u=/n/i.test((n=f.parsers,r=o,n&&n[r]&&n[r].type||""))&&f.strings[o]?(c="boolean"==typeof f.string[f.strings[o]]?(d?1:-1)*(f.string[f.strings[o]]?-1:1):f.strings[o]&&f.string[f.strings[o]]||0,f.numberSorter?f.numberSorter(e[o],t[o],d,s[o],i):M["sortNumeric"+(d?"Asc":"Desc")](e[o],t[o],c,s[o],o,i)):(c=d?e:t,u=d?t:e,"function"==typeof p?p(c[o],u[o],d,o,i):"object"==typeof p&&p.hasOwnProperty(o)?p[o](c[o],u[o],d,o,i):M["sortNatural"+(d?"Asc":"Desc")](e[o],t[o],o,i,f)))return u;var n,r;return e[f.columns].order-t[f.columns].order});f.debug&&x("Sorting on "+h.toString()+" and dir "+l+" time",t)}}function i(e,t){var n=e[0];n.isUpdating&&e.trigger("updateComplete",n),A.isFunction(t)&&t(e[0])}function j(e,t,n){var r=e[0].config.sortList;!1!==t&&!e[0].isProcessing&&r.length?e.trigger("sorton",[r,function(){i(e,n)},!0]):(i(e,n),M.applyWidget(e[0],!1))}function u(d){var f=d.config,p=f.$table;p.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(f.namespace+" ")).bind("sortReset"+f.namespace,function(e,t){e.stopPropagation(),f.sortList=[],w(d),k(d),v(d),A.isFunction(t)&&t(d)}).bind("updateAll"+f.namespace,function(e,t,n){e.stopPropagation(),d.isUpdating=!0,M.refreshWidgets(d,!0,!0),M.restoreHeaders(d),c(d),M.bindEvents(d,f.$headers,!0),u(d),y(d,t,n)}).bind("update"+f.namespace+" updateRows"+f.namespace,function(e,t,n){e.stopPropagation(),d.isUpdating=!0,b(d),y(d,t,n)}).bind("updateCell"+f.namespace,function(e,t,n,r){var i,a,o;e.stopPropagation(),d.isUpdating=!0,p.find(f.selectorRemove).remove(),a=p.find("tbody"),o=A(t),e=a.index(A.fn.closest?o.closest("tbody"):o.parents("tbody").filter(":first")),i=A.fn.closest?o.closest("tr"):o.parents("tr").filter(":first"),t=o[0],a.length&&0<=e&&(a=a.eq(e).find("tr").index(i),o=o.index(),f.cache[e].normalized[a][f.columns].$row=i,i=void 0===f.extractors[o].id?C(d,t,o):f.extractors[o].format(C(d,t,o),d,t,o),t="no-parser"===f.parsers[o].id?"":f.parsers[o].format(i,d,t,o),f.cache[e].normalized[a][o]=f.ignoreCase&&"string"==typeof t?t.toLowerCase():t,"numeric"===(f.parsers[o].type||"").toLowerCase()&&(f.cache[e].colMax[o]=Math.max(Math.abs(t)||0,f.cache[e].colMax[o]||0)),j(p,n,r))}).bind("addRows"+f.namespace,function(e,t,n,r){if(e.stopPropagation(),d.isUpdating=!0,m(f.cache))b(d),y(d,n,r);else{var i,a,o,s,l,c=(t=A(t).attr("role","row")).filter("tr").length,u=p.find("tbody").index(t.parents("tbody").filter(":first"));for(f.parsers&&f.parsers.length||h(d),e=0;e<c;e++){for(a=t[e].cells.length,l=[],s={child:[],$row:t.eq(e),order:f.cache[u].normalized.length},i=0;i<a;i++)o=void 0===f.extractors[i].id?C(d,t[e].cells[i],i):f.extractors[i].format(C(d,t[e].cells[i],i),d,t[e].cells[i],i),o="no-parser"===f.parsers[i].id?"":f.parsers[i].format(o,d,t[e].cells[i],i),l[i]=f.ignoreCase&&"string"==typeof o?o.toLowerCase():o,"numeric"===(f.parsers[i].type||"").toLowerCase()&&(f.cache[u].colMax[i]=Math.max(Math.abs(l[i])||0,f.cache[u].colMax[i]||0));l.push(s),f.cache[u].normalized.push(l)}j(p,n,r)}}).bind("updateComplete"+f.namespace,function(){d.isUpdating=!1}).bind("sorton"+f.namespace,function(e,t,n,r){var i,a,o,s,l,c,u=d.config;e.stopPropagation(),p.trigger("sortStart",this),e=t,c=d.config,e=t||c.sortList,c.sortList=[],A.each(e,function(e,t){if(s=parseInt(t[0],10),o=c.$headers.filter('[data-column="'+s+'"]:last')[0]){switch(a=(a=(""+t[1]).match(/^(1|d|s|o|n)/))?a[0]:""){case"1":case"d":a=1;break;case"s":a=l||0;break;case"o":i=o.order[(l||0)%(c.sortReset?3:2)],a=0===i?1:1===i?0:2;break;case"n":o.count+=1,a=o.order[o.count%(c.sortReset?3:2)];break;default:a=0}l=0===e?a:l,i=[s,parseInt(a,10)||0],c.sortList.push(i),a=A.inArray(i[1],o.order),o.count=0<=a?a:i[1]%(c.sortReset?3:2)}}),w(d),u.delayInit&&m(u.cache)&&g(d),p.trigger("sortBegin",this),k(d),v(d,r),p.trigger("sortEnd",this),M.applyWidget(d),A.isFunction(n)&&n(d)}).bind("appendCache"+f.namespace,function(e,t,n){e.stopPropagation(),v(d,n),A.isFunction(t)&&t(d)}).bind("updateCache"+f.namespace,function(e,t){f.parsers&&f.parsers.length||h(d),g(d),A.isFunction(t)&&t(d)}).bind("applyWidgetId"+f.namespace,function(e,t){e.stopPropagation(),M.getWidgetById(t).format(d,f,f.widgetOptions)}).bind("applyWidgets"+f.namespace,function(e,t){e.stopPropagation(),M.applyWidget(d,t)}).bind("refreshWidgets"+f.namespace,function(e,t,n){e.stopPropagation(),M.refreshWidgets(d,t,n)}).bind("destroy"+f.namespace,function(e,t,n){e.stopPropagation(),M.destroy(d,t,n)}).bind("resetToLoadState"+f.namespace,function(){M.refreshWidgets(d,!0,!0),f=A.extend(!0,M.defaults,f.originalSettings),d.hasInitialized=!1,M.setup(d,f)})}var M=this;M.version="2.17.8",M.parsers=[],M.widgets=[],M.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},M.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},M.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},M.log=S,M.benchmark=x,M.construct=function(t){return this.each(function(){var e=A.extend(!0,{},M.defaults,t);e.originalSettings=t,!this.hasInitialized&&M.buildTable&&"TABLE"!==this.tagName?M.buildTable(this,e):M.setup(this,e)})},M.setup=function(t,n){if(!t||!t.tHead||0===t.tBodies.length||!0===t.hasInitialized)return n.debug?S("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var e,r,i,a="",o=A(t),s=A.metadata;t.hasInitialized=!1,t.isProcessing=!0,t.config=n,A.data(t,"tablesorter",n),n.debug&&A.data(t,"startoveralltimer",new Date),n.supportsDataObject=((e=A.fn.jquery.split("."))[0]=parseInt(e[0],10),1<e[0]||1===e[0]&&4<=parseInt(e[1],10)),n.string={max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,null:0,top:!0,bottom:!1},n.emptyTo=n.emptyTo.toLowerCase(),n.stringTo=n.stringTo.toLowerCase(),/tablesorter\-/.test(o.attr("class"))||(a=""!==n.theme?" tablesorter-"+n.theme:""),n.table=t,n.$table=o.addClass(M.css.table+" "+n.tableClass+a).attr("role","grid"),n.$headers=o.find(n.selectorHeaders),n.namespace=n.namespace?"."+n.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2),n.$table.children().children("tr").attr("role","row"),n.$tbodies=o.children("tbody:not(."+n.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),n.$table.find("caption").length&&n.$table.attr("aria-labelledby","theCaption"),n.widgetInit={},n.textExtraction=n.$table.attr("data-text-extraction")||n.textExtraction||"basic",c(t),(a=(e=t).config).widthFixed&&0===a.$table.find("colgroup").length&&(r=A("<colgroup>"),i=A(e).width(),A(e.tBodies).not("."+a.cssInfoBlock).find("tr:first").children(":visible").each(function(){r.append(A("<col>").css("width",parseInt(A(this).width()/i*1e3,10)/10+"%"))}),a.$table.prepend(r)),h(t),n.totalRows=0,n.delayInit||g(t),M.bindEvents(t,n.$headers,!0),u(t),n.supportsDataObject&&void 0!==o.data().sortlist?n.sortList=o.data().sortlist:s&&o.metadata()&&o.metadata().sortlist&&(n.sortList=o.metadata().sortlist),M.applyWidget(t,!0),0<n.sortList.length?o.trigger("sorton",[n.sortList,{},!n.initWidgets,!0]):(w(t),n.initWidgets&&M.applyWidget(t,!1)),n.showProcessing&&o.unbind("sortBegin"+n.namespace+" sortEnd"+n.namespace).bind("sortBegin"+n.namespace+" sortEnd"+n.namespace,function(e){clearTimeout(n.processTimer),M.isProcessing(t),"sortBegin"===e.type&&(n.processTimer=setTimeout(function(){M.isProcessing(t,!0)},500))}),t.hasInitialized=!0,t.isProcessing=!1,n.debug&&M.benchmark("Overall initialization time",A.data(t,"startoveralltimer")),o.trigger("tablesorter-initialized",t),"function"==typeof n.initialized&&n.initialized(t)},M.getColumnData=function(e,t,n,r){if(null!=t){var i,a=(e=A(e)[0]).config;if(t[n])return r?t[n]:t[a.$headers.index(a.$headers.filter('[data-column="'+n+'"]:last'))];for(i in t)if("string"==typeof i&&(e=(r?a.$headers.eq(n):a.$headers.filter('[data-column="'+n+'"]:last')).filter(i),e.length))return t[i]}},M.computeColumnIndex=function(e){for(var t,n,r,i,a,o,s,l,c,u=[],d=0,f=0;f<e.length;f++)for(i=e[f].cells,t=0;t<i.length;t++){for(n=i[t],r=A(n),a=n.parentNode.rowIndex,r.index(),o=n.rowSpan||1,s=n.colSpan||1,void 0===u[a]&&(u[a]=[]),n=0;n<u[a].length+1;n++)if(void 0===u[a][n]){l=n;break}for(d=Math.max(l,d),r.attr({"data-column":l}),n=a;n<a+o;n++)for(void 0===u[n]&&(u[n]=[]),c=u[n],r=l;r<l+s;r++)c[r]="x"}return d+1},M.isProcessing=function(e,t,n){var r=(e=A(e))[0].config,i=n||e.find("."+M.css.header);t?(void 0!==n&&0<r.sortList.length&&(i=i.filter(function(){return!this.sortDisabled&&0<=M.isValueInArray(parseFloat(A(this).attr("data-column")),r.sortList)})),e.add(i).addClass(M.css.processing+" "+r.cssProcessing)):e.add(i).removeClass(M.css.processing+" "+r.cssProcessing)},M.processTbody=function(e,t,n){if(e=A(e)[0],n)return e.isProcessing=!0,t.before('<span class="tablesorter-savemyplace"/>'),A.fn.detach?t.detach():t.remove();n=A(e).find("span.tablesorter-savemyplace"),t.insertAfter(n),n.remove(),e.isProcessing=!1},M.clearTableBody=function(e){A(e)[0].config.$tbodies.children().detach()},M.bindEvents=function(r,i,e){var a,o=(r=A(r)[0]).config;!0!==e&&(o.$extraHeaders=o.$extraHeaders?o.$extraHeaders.add(i):i),i.find(o.selectorSort).add(i.filter(o.selectorSort)).unbind(["mousedown","mouseup","sort","keyup",""].join(o.namespace+" ")).bind(["mousedown","mouseup","sort","keyup",""].join(o.namespace+" "),function(e,t){var n=e.type;if(!(1!==(e.which||e.button)&&!/sort|keyup/.test(n)||"keyup"===n&&13!==e.which||"mouseup"===n&&!0!==t&&250<(new Date).getTime()-a)){if("mousedown"===n)return a=(new Date).getTime(),/(input|select|button|textarea)/i.test(e.target.tagName)?"":!o.cancelSelection;o.delayInit&&m(o.cache)&&g(r),n=A.fn.closest?A(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:A(this).parents("th, td")[0],(n=o.$headers[i.index(n)]).sortDisabled||function e(t,n,r){if(t.isUpdating)return setTimeout(function(){e(t,n,r)},50);var i,a,o,s,l=t.config,c=!r[l.sortMultiSortKey],u=l.$table;if(u.trigger("sortStart",t),n.count=r[l.sortResetKey]?2:(n.count+1)%(l.sortReset?3:2),l.sortRestart&&(a=n,l.$headers.each(function(){this===a||!c&&A(this).is("."+M.css.sortDesc+",."+M.css.sortAsc)||(this.count=-1)})),a=n.column,c){if(l.sortList=[],null!==l.sortForce)for(i=l.sortForce,o=0;o<i.length;o++)i[o][0]!==a&&l.sortList.push(i[o]);if((i=n.order[n.count])<2&&(l.sortList.push([a,i]),1<n.colSpan))for(o=1;o<n.colSpan;o++)l.sortList.push([a+o,i])}else{if(l.sortAppend&&1<l.sortList.length)for(o=0;o<l.sortAppend.length;o++)0<=(s=M.isValueInArray(l.sortAppend[o][0],l.sortList))&&l.sortList.splice(s,1);if(0<=M.isValueInArray(a,l.sortList))for(o=0;o<l.sortList.length;o++)s=l.sortList[o],i=l.$headers.filter('[data-column="'+s[0]+'"]:last')[0],s[0]===a&&(s[1]=i.order[n.count],2===s[1]&&(l.sortList.splice(o,1),i.count=-1));else if((i=n.order[n.count])<2&&(l.sortList.push([a,i]),1<n.colSpan))for(o=1;o<n.colSpan;o++)l.sortList.push([a+o,i])}if(null!==l.sortAppend)for(i=l.sortAppend,o=0;o<i.length;o++)i[o][0]!==a&&l.sortList.push(i[o]);u.trigger("sortBegin",t),setTimeout(function(){w(t),k(t),v(t),u.trigger("sortEnd",t)},1)}(r,n,e)}}),o.cancelSelection&&i.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},M.restoreHeaders=function(e){var t=A(e)[0].config;t.$table.find(t.selectorHeaders).each(function(e){A(this).find("."+M.css.headerIn).length&&A(this).html(t.headerContent[e])})},M.destroy=function(e,t,n){var r,i,a,o,s;(e=A(e)[0]).hasInitialized&&(M.refreshWidgets(e,!0,!0),r=A(e),i=e.config,o=(a=r.find("thead:first")).find("tr."+M.css.headerRow).removeClass(M.css.headerRow+" "+i.cssHeaderRow),s=r.find("tfoot:first > tr").children("th, td"),!1===t&&0<=A.inArray("uitheme",i.widgets)&&(r.trigger("applyWidgetId",["uitheme"]),r.trigger("applyWidgetId",["zebra"])),a.find("tr").not(o).remove(),r.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(i.namespace+" ")),i.$headers.add(s).removeClass([M.css.header,i.cssHeader,i.cssAsc,i.cssDesc,M.css.sortAsc,M.css.sortDesc,M.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),o.find(i.selectorSort).unbind(["mousedown","mouseup","keypress",""].join(i.namespace+" ")),M.restoreHeaders(e),r.toggleClass(M.css.table+" "+i.tableClass+" tablesorter-"+i.theme,!1===t),e.hasInitialized=!1,delete e.config.cache,"function"==typeof n&&n(e))},M.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i},M.sortNatural=function(e,t){if(e===t)return 0;var n,r,i,a,o,s=M.regex;if(s.hex.test(t)){if((n=parseInt(e.match(s.hex),16))<(r=parseInt(t.match(s.hex),16)))return-1;if(r<n)return 1}for(n=e.replace(s.chunk,"\\0$1\\0").replace(s.chunks,"").split("\\0"),s=t.replace(s.chunk,"\\0$1\\0").replace(s.chunks,"").split("\\0"),o=Math.max(n.length,s.length),a=0;a<o;a++){if(r=isNaN(n[a])?n[a]||0:parseFloat(n[a])||0,i=isNaN(s[a])?s[a]||0:parseFloat(s[a])||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(i<r)return 1}return 0},M.sortNaturalAsc=function(e,t,n,r,i){return e===t?0:(n=i.string[i.empties[n]||i.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:-n||-1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:n||1:M.sortNatural(e,t))},M.sortNaturalDesc=function(e,t,n,r,i){return e===t?0:(n=i.string[i.empties[n]||i.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:n||1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:-n||-1:M.sortNatural(t,e))},M.sortText=function(e,t){return t<e?1:e<t?-1:0},M.getTextValue=function(e,t,n){if(n){var r=e?e.length:0,i=n+t;for(n=0;n<r;n++)i+=e.charCodeAt(n);return t*i}return 0},M.sortNumericAsc=function(e,t,n,r,i,a){return e===t?0:(i=(a=a.config).string[a.empties[i]||a.emptyTo],""===e&&0!==i?"boolean"==typeof i?i?-1:1:-i||-1:""===t&&0!==i?"boolean"==typeof i?i?1:-1:i||1:(e=isNaN(e)?M.getTextValue(e,n,r):e)-(t=isNaN(t)?M.getTextValue(t,n,r):t))},M.sortNumericDesc=function(e,t,n,r,i,a){return e===t?0:(i=(a=a.config).string[a.empties[i]||a.emptyTo],""===e&&0!==i?"boolean"==typeof i?i?-1:1:i||1:""===t&&0!==i?"boolean"==typeof i?i?1:-1:-i||-1:(isNaN(e)&&(e=M.getTextValue(e,n,r)),(t=isNaN(t)?M.getTextValue(t,n,r):t)-e))},M.sortNumeric=function(e,t){return e-t},M.characterEquivalents={a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõö",O:"ÓÒÔÕÖ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"},M.replaceAccents=function(e){var t,n="[",r=M.characterEquivalents;if(!M.characterRegex){for(t in M.characterRegexArray={},r)"string"==typeof t&&(n+=r[t],M.characterRegexArray[t]=new RegExp("["+r[t]+"]","g"));M.characterRegex=new RegExp(n+"]")}if(M.characterRegex.test(e))for(t in r)"string"==typeof t&&(e=e.replace(M.characterRegexArray[t],t));return e},M.isValueInArray=function(e,t){for(var n=t.length,r=0;r<n;r++)if(t[r][0]===e)return r;return-1},M.addParser=function(e){for(var t=M.parsers.length,n=!0,r=0;r<t;r++)M.parsers[r].id.toLowerCase()===e.id.toLowerCase()&&(n=!1);n&&M.parsers.push(e)},M.getParserById=function(e){if("false"==e)return!1;for(var t=M.parsers.length,n=0;n<t;n++)if(M.parsers[n].id.toLowerCase()===e.toString().toLowerCase())return M.parsers[n];return!1},M.addWidget=function(e){M.widgets.push(e)},M.hasWidget=function(e,t){return(e=A(e)).length&&e[0].config&&e[0].config.widgetInit[t]||!1},M.getWidgetById=function(e){for(var t,n=M.widgets.length,r=0;r<n;r++)if((t=M.widgets[r])&&t.hasOwnProperty("id")&&t.id.toLowerCase()===e.toLowerCase())return t},M.applyWidget=function(n,r){var e,t,i,a=(n=A(n)[0]).config,o=a.widgetOptions,s=[];!1!==r&&n.hasInitialized&&(n.isApplyingWidgets||n.isUpdating)||(a.debug&&(e=new Date),a.widgets.length&&(n.isApplyingWidgets=!0,a.widgets=A.grep(a.widgets,function(e,t){return A.inArray(e,a.widgets)===t}),A.each(a.widgets||[],function(e,t){(i=M.getWidgetById(t))&&i.id&&(i.priority||(i.priority=10),s[e]=i)}),s.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),A.each(s,function(e,t){t&&(!r&&a.widgetInit[t.id]||(a.widgetInit[t.id]=!0,t.hasOwnProperty("options")&&(o=n.config.widgetOptions=A.extend(!0,{},t.options,o)),t.hasOwnProperty("init")&&t.init(n,t,a,o)),!r&&t.hasOwnProperty("format")&&t.format(n,a,o,!1))})),setTimeout(function(){n.isApplyingWidgets=!1},0),a.debug&&(t=a.widgets.length,x("Completed "+(!0===r?"initializing ":"applying ")+t+" widget"+(1!==t?"s":""),e)))},M.refreshWidgets=function(e,t,n){for(var r=(e=A(e)[0]).config,i=r.widgets,a=M.widgets,o=a.length,s=0;s<o;s++)a[s]&&a[s].id&&(t||A.inArray(a[s].id,i)<0)&&(r.debug&&S('Refeshing widgets: Removing "'+a[s].id+'"'),a[s].hasOwnProperty("remove")&&r.widgetInit[a[s].id]&&(a[s].remove(e,r,r.widgetOptions),r.widgetInit[a[s].id]=!1));!0!==n&&M.applyWidget(e,t)},M.getData=function(e,t,n){var r,i,a="";return(e=A(e)).length?(r=!!A.metadata&&e.metadata(),i=" "+(e.attr("class")||""),void 0!==e.data(n)||void 0!==e.data(n.toLowerCase())?a+=e.data(n)||e.data(n.toLowerCase()):r&&void 0!==r[n]?a+=r[n]:t&&void 0!==t[n]?a+=t[n]:" "!==i&&i.match(" "+n+"-")&&(a=i.match(new RegExp("\\s"+n+"-([\\w-]+)"))[1]||""),A.trim(a)):""},M.formatFloat=function(e,t){return"string"!=typeof e||""===e?e:(e=(t&&t.config?!1!==t.config.usNumberFormat:void 0===t||t)?e.replace(/,/g,""):e.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(e)&&(e=e.replace(/^\s*\(([.\d]+)\)/,"-$1")),t=parseFloat(e),isNaN(t)?A.trim(e):t)},M.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var c=A.tablesorter;A.fn.extend({tablesorter:c.construct}),c.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),c.addParser({id:"text",is:function(){return!0},format:function(e,t){t=t.config;return e&&(e=A.trim(t.ignoreCase?e.toLocaleLowerCase():e),e=t.sortLocaleCompare?c.replaceAccents(e):e),e},type:"text"}),c.addParser({id:"digit",is:function(e){return c.isDigit(e)},format:function(e,t){var n=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof n?n:e&&A.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e)},type:"numeric"}),c.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[+\-,. ]/g,""))},format:function(e,t){var n=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof n?n:e&&A.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e)},type:"numeric"}),c.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,t){for(var n=e?e.split("."):"",r="",i=n.length,a=0;a<i;a++)r+=("00"+n[a]).slice(-3);return e&&c.formatFloat(r,t)},type:"numeric"}),c.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(e){return e&&A.trim(e.replace(/(https?|ftp|file):\/\//,""))},parsed:!0,type:"text"}),c.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,t){return e&&c.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||e:"",t)},type:"numeric"}),c.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,t){return e&&c.formatFloat(e.replace(/%/g,""),t)},type:"numeric"}),c.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,t){return e&&c.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t)},type:"numeric"}),c.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,t,n,r){var i;return e&&(r=(i=(n=t.config).$headers.filter("[data-column="+r+"]:last")).length&&i[0].dateFormat||c.getData(i,c.getColumnData(t,n.headers,r),"dateFormat")||n.dateFormat,e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===r?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===r?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===r&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))),e&&c.formatFloat(new Date(e).getTime()||e,t)},type:"numeric"}),c.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,t){return e&&c.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t)},type:"numeric"}),c.addParser({id:"metadata",is:function(){return!1},format:function(e,t,n){return e=(e=t.config).parserMetadataName||"sortValue",A(n).metadata()[e]},type:"numeric"}),c.addWidget({id:"zebra",priority:90,format:function(e,t,n){var r,i,a,o,s=new RegExp(t.cssChildRow,"i"),l=t.$tbodies;for(t.debug&&(o=new Date),e=0;e<l.length;e++)i=0,l.eq(e).children("tr:visible").not(t.selectorRemove).each(function(){r=A(this),s.test(this.className)||i++,a=0==i%2,r.removeClass(n.zebra[a?1:0]).addClass(n.zebra[a?0:1])});t.debug&&c.benchmark("Applying Zebra widget",o)},remove:function(e,t,n){var r;t=t.$tbodies;var i=(n.zebra||["even","odd"]).join(" ");for(n=0;n<t.length;n++)(r=A.tablesorter.processTbody(e,t.eq(n),!0)).children().removeClass(i),A.tablesorter.processTbody(e,r,!1)}})}(jQuery),function(e){"use strict";e.Placeholders={Utils:{addEventListener:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},inArray:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},moveCaret:function(e,t){var n;e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))},changeType:function(e,t){try{return e.type=t,!0}catch(e){return!1}}}}}(this),function(e){"use strict";function t(){}function s(){try{return document.activeElement}catch(e){}}function l(e,t){var n=!!t&&e.value!==t,t=e.value===e.getAttribute(C);return(n||t)&&"true"===e.getAttribute(k)&&(e.removeAttribute(k),e.value=e.value.replace(e.getAttribute(C),""),e.className=e.className.replace(x,""),t=e.getAttribute(T),0<=parseInt(t,10)&&(e.setAttribute("maxLength",t),e.removeAttribute(T)),(t=e.getAttribute(j))&&(e.type=t),!0)}function c(e){var t=e.getAttribute(C);return!(""!==e.value||!t)&&(e.setAttribute(k,"true"),e.value=t,e.className+=" "+S,e.getAttribute(T)||(e.setAttribute(T,e.maxLength),e.removeAttribute("maxLength")),e.getAttribute(j)?e.type="text":"password"===e.type&&R.changeType(e,"text")&&e.setAttribute(j,"password"),!0)}function n(e,t){var n,r,i,a,o;if(e&&e.getAttribute(C))t(e);else for(r=e?e.getElementsByTagName("input"):d,i=e?e.getElementsByTagName("textarea"):f,o=0,a=(n=r?r.length:0)+(i?i.length:0);o<a;o++)t(o<n?r[o]:i[o-n])}function u(e){n(e,l)}function r(e){var t,n,r,i,a,o;e.form&&((m="string"==typeof(m=e.form)?document.getElementById(m):m).getAttribute(M)||(R.addEventListener(m,"submit",(o=m,function(){u(o)})),m.setAttribute(M,"true"))),R.addEventListener(e,"focus",(a=e,function(){p&&a.value===a.getAttribute(C)&&"true"===a.getAttribute(k)?R.moveCaret(a,0):l(a)})),R.addEventListener(e,"blur",(i=e,function(){c(i)})),p&&(R.addEventListener(e,"keydown",(r=e,function(e){return h=r.value,"true"===r.getAttribute(k)&&h===r.getAttribute(C)&&R.inArray(w,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0})),R.addEventListener(e,"keyup",(n=e,function(){l(n,h),""===n.value&&(n.blur(),R.moveCaret(n,0))})),R.addEventListener(e,"click",(t=e,function(){t===s()&&t.value===t.getAttribute(C)&&"true"===t.getAttribute(k)&&R.moveCaret(t,0)}))),e.setAttribute(A,"true"),e.setAttribute(C,g),!p&&e===s()||c(e)}var d,f,p,i,h,g,a,m,o,v,y,b=["text","search","url","tel","email","password","number","textarea"],w=[27,33,34,35,36,37,38,39,40,8,46],S="placeholdersjs",x=RegExp("(?:^|\\s)"+S+"(?!\\S)"),C="data-placeholder-value",k="data-placeholder-active",j="data-placeholder-type",M="data-placeholder-submit",A="data-placeholder-bound",T="data-placeholder-maxlength",I=document.createElement("input"),E=document.getElementsByTagName("head")[0],$=document.documentElement,_=e.Placeholders,R=_.Utils;if(_.nativeSupport=void 0!==I.placeholder,!_.nativeSupport){for(d=document.getElementsByTagName("input"),f=document.getElementsByTagName("textarea"),p="false"===$.getAttribute("data-placeholder-focus"),i="false"!==$.getAttribute("data-placeholder-live"),(I=document.createElement("style")).type="text/css",$=document.createTextNode("."+S+" { color:#ccc; }"),I.styleSheet?I.styleSheet.cssText=$.nodeValue:I.appendChild($),E.insertBefore(I,E.firstChild),y=0,v=d.length+f.length;y<v;y++)o=d.length>y?d[y]:f[y-d.length],(g=o.attributes.placeholder)&&((g=g.nodeValue)&&R.inArray(b,o.type)&&r(o));a=setInterval(function(){for(y=0,v=d.length+f.length;y<v;y++)o=d.length>y?d[y]:f[y-d.length],(g=o.attributes.placeholder)?(g=g.nodeValue)&&R.inArray(b,o.type)&&(o.getAttribute(A)||r(o),g===o.getAttribute(C)&&("password"!==o.type||o.getAttribute(j))||("password"===o.type&&!o.getAttribute(j)&&R.changeType(o,"text")&&o.setAttribute(j,"password"),o.value===o.getAttribute(C)&&(o.value=g),o.setAttribute(C,g))):o.getAttribute(k)&&(l(o),o.removeAttribute(C));i||clearInterval(a)},100)}R.addEventListener(e,"beforeunload",function(){_.disable()}),_.disable=_.nativeSupport?t:u,_.enable=_.nativeSupport?t:function(e){n(e,c)}}(this),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(ye){ye.fn.jScrollPane=function(n){function r(b,e){function w(e){var t,n,r,i,a,o,s,l,c,u,d,f,p,h,g,m=!1,v=!1;if(O=e,void 0===U)r=b.scrollTop(),i=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),D=b.innerWidth()+ve,N=b.innerHeight(),b.width(D),U=ye('<div class="jspPane" />').css("padding",pe).append(b.children()),B=ye('<div class="jspContainer" />').css({width:D+"px",height:N+"px"}).append(U).appendTo(b);else{if(b.css("width",""),m=O.stickToBottom&&(20<(o=H-N)&&o-P()<10),v=O.stickToRight&&(20<(a=q-D)&&a-F()<10),(a=b.innerWidth()+ve!=D||b.outerHeight()!=N)&&(D=b.innerWidth()+ve,N=b.innerHeight(),B.css({width:D+"px",height:N+"px"})),!a&&he==q&&U.outerHeight()==H)return b.width(D),0;he=q,U.css("width",""),b.width(D),B.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function y(){var e=Z,t=Y;switch(s){case 40:ge.scrollByY(O.keyboardSpeed,!1);break;case 38:ge.scrollByY(-O.keyboardSpeed,!1);break;case 34:case 32:ge.scrollByY(N*O.scrollPagePercent,!1);break;case 33:ge.scrollByY(-N*O.scrollPagePercent,!1);break;case 39:ge.scrollByX(O.keyboardSpeed,!1);break;case 37:ge.scrollByX(-O.keyboardSpeed,!1)}return l=e!=Z||t!=Y}U.css("overflow","auto"),q=e.contentWidth||U[0].scrollWidth,H=U[0].scrollHeight,U.css("overflow",""),W=1<(V=H/N),(J=1<(z=q/D))||W?(b.addClass("jspScrollable"),(e=O.maintainPosition&&(Y||Z))&&(t=F(),n=P()),W&&(B.append(ye('<div class="jspVerticalBar" />').append(ye('<div class="jspCap jspCapTop" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragTop" />'),ye('<div class="jspDragBottom" />'))),ye('<div class="jspCap jspCapBottom" />'))),ee=B.find(">.jspVerticalBar"),te=ee.find(">.jspTrack"),Q=te.find(">.jspDrag"),O.showArrows&&(ie=ye('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",L),ae=ye('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",L),O.arrowScrollOnHover&&(ie.bind("mouseover.jsp",k(0,-1,ie)),ae.bind("mouseover.jsp",k(0,1,ae))),C(te,O.verticalArrowPositions,ie,ae)),ne=N,B.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ne-=ye(this).outerHeight()}),Q.hover(function(){Q.addClass("jspHover")},function(){Q.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",L),Q.addClass("jspActive");var t=e.pageY-Q.position().top;return ye("html").bind("mousemove.jsp",function(e){A(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",M),!1}),S()),J&&(B.append(ye('<div class="jspHorizontalBar" />').append(ye('<div class="jspCap jspCapLeft" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragLeft" />'),ye('<div class="jspDragRight" />'))),ye('<div class="jspCap jspCapRight" />'))),oe=B.find(">.jspHorizontalBar"),se=oe.find(">.jspTrack"),X=se.find(">.jspDrag"),O.showArrows&&(ue=ye('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",L),de=ye('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",L),O.arrowScrollOnHover&&(ue.bind("mouseover.jsp",k(-1,0,ue)),de.bind("mouseover.jsp",k(1,0,de))),C(se,O.horizontalArrowPositions,ue,de)),X.hover(function(){X.addClass("jspHover")},function(){X.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",L),X.addClass("jspActive");var t=e.pageX-X.position().left;return ye("html").bind("mousemove.jsp",function(e){I(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",M),!1}),le=B.innerWidth(),x()),function(){{var e,t;J&&W&&(e=se.outerHeight(),t=te.outerWidth(),ne-=e,ye(oe).find(">.jspCap:visible,>.jspArrow").each(function(){le+=ye(this).outerWidth()}),le-=t,N-=t,D-=e,se.parent().append(ye('<div class="jspCorner" />').css("width",e+"px")),S(),x())}J&&U.width(B.outerWidth()-ve+"px"),H=U.outerHeight(),V=H/N,J&&((ce=Math.ceil(1/z*le))>O.horizontalDragMaxWidth?ce=O.horizontalDragMaxWidth:ce<O.horizontalDragMinWidth&&(ce=O.horizontalDragMinWidth),X.width(ce+"px"),K=le-ce,E(Z)),W&&((re=Math.ceil(1/V*ne))>O.verticalDragMaxHeight?re=O.verticalDragMaxHeight:re<O.verticalDragMinHeight&&(re=O.verticalDragMinHeight),Q.height(re+"px"),G=ne-re,T(Y))}(),e&&(_(v?q-D:t,!1),$(m?H-N:n,!1)),U.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){R(e.target,!1)}),B.unbind(me).bind(me,function(e,t,n,r){var i=Z=Z||0,a=Y=Y||0,e=e.deltaFactor||O.mouseWheelSpeed;return ge.scrollBy(n*e,-r*e,!1),i==Z&&a==Y}),g=!1,B.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];u=F(),d=P(),f=e.pageX,p=e.pageY,g=!(h=!1)}).bind("touchmove.jsp",function(e){if(g){var t=e.originalEvent.touches[0],n=Z,e=Y;return ge.scrollTo(u+f-t.pageX,d+p-t.pageY),h=h||5<Math.abs(f-t.pageX)||5<Math.abs(p-t.pageY),n==Z&&e==Y}}).bind("touchend.jsp",function(){g=!1}).bind("click.jsp-touchclick",function(){return h?h=!1:void 0}),O.enableKeyboardNavigation&&(c=[],J&&c.push(oe[0]),W&&c.push(ee[0]),U.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||c.length&&ye(e.target).closest(c).length){var t=Z,n=Y;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=e.keyCode,y();break;case 35:$(H-N),s=null;break;case 36:$(0),s=null}return!(l=e.keyCode==s&&t!=Z||n!=Y)}}).bind("keypress.jsp",function(e){return e.keyCode==s&&y(),e.target===this||c.length&&ye(e.target).closest(c).length?!l:void 0}),O.hideFocus?(b.css("outline","none"),"hideFocus"in B[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in B[0]&&b.attr("hideFocus",!1))),O.clickOnTrack&&(j(),W&&te.bind("mousedown.jsp",function(r){if(void 0===r.originalTarget||r.originalTarget==r.currentTarget){var i,a=ye(this),e=a.offset(),o=r.pageY-e.top-Y,s=!0,l=function(){var e=a.offset(),t=r.pageY-e.top-re/2,n=N*O.scrollPagePercent,e=G*n/(H-N);if(o<0)t<Y-e?ge.scrollByY(-n):A(t);else{if(!(0<o))return void c();Y+e<t?ge.scrollByY(n):A(t)}i=setTimeout(l,s?O.initialDelay:O.trackClickRepeatFreq),s=!1},c=function(){i&&clearTimeout(i),i=null,ye(document).unbind("mouseup.jsp",c)};return l(),ye(document).bind("mouseup.jsp",c),!1}}),J&&se.bind("mousedown.jsp",function(r){if(void 0===r.originalTarget||r.originalTarget==r.currentTarget){var i,a=ye(this),e=a.offset(),o=r.pageX-e.left-Z,s=!0,l=function(){var e=a.offset(),t=r.pageX-e.left-ce/2,n=D*O.scrollPagePercent,e=K*n/(q-D);if(o<0)t<Z-e?ge.scrollByX(-n):I(t);else{if(!(0<o))return void c();Z+e<t?ge.scrollByX(n):I(t)}i=setTimeout(l,s?O.initialDelay:O.trackClickRepeatFreq),s=!1},c=function(){i&&clearTimeout(i),i=null,ye(document).unbind("mouseup.jsp",c)};return l(),ye(document).bind("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,n=escape(location.hash.substr(1));try{e=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}e.length&&U.find(n)&&(0===B.scrollTop()?t=setInterval(function(){0<B.scrollTop()&&(R(e,!0),ye(document).scrollTop(B.position().top),clearInterval(t))},50):(R(e,!0),ye(document).scrollTop(B.position().top)))}}(),O.hijackInternalLinks&&(ye(document.body).data("jspHijack")||(ye(document.body).data("jspHijack",!0),ye(document.body).delegate('a[href*="#"]',"click",function(e){var t,n=this.href.substr(0,this.href.indexOf("#")),r=location.href;if(n===(r=-1!==location.href.indexOf("#")?location.href.substr(0,location.href.indexOf("#")):r)){n=escape(this.href.substr(this.href.indexOf("#")+1));try{t=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}t.length&&((r=t.closest(".jspScrollable")).data("jsp").scrollToElement(t,!0),r[0].scrollIntoView&&(n=ye(window).scrollTop(),((t=t.offset().top)<n||t>n+ye(window).height())&&r[0].scrollIntoView()),e.preventDefault())}})))):(b.removeClass("jspScrollable"),U.css({top:0,left:0,width:B.width()-ve}),B.unbind(me),U.find(":input,a").unbind("focus.jsp"),b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),U.unbind(".jsp"),j()),O.autoReinitialise&&!fe?fe=setInterval(function(){w(O)},O.autoReinitialiseDelay):!O.autoReinitialise&&fe&&clearInterval(fe),r&&b.scrollTop(0)&&$(r,!1),i&&b.scrollLeft(0)&&_(i,!1),b.trigger("jsp-initialised",[J||W])}function S(){te.height(ne+"px"),Y=0,t=O.verticalGutter+te.outerWidth(),U.width(D-t-ve);try{0===ee.position().left&&U.css("margin-left",t+"px")}catch(e){}}function x(){B.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){le-=ye(this).outerWidth()}),se.width(le+"px"),Z=0}function C(e,t,n,r){var i="before",a="after";(t="os"==t?/Mac/.test(navigator.platform)?"after":"split":t)==i?a=t:t==a&&(i=t,t=n,n=r,r=t),e[i](n)[a](r)}function k(e,t,n){return function(){return function(e,t,n,r){n=ye(n).addClass("jspActive");function i(){0!==e&&ge.scrollByX(e*O.arrowButtonSpeed),0!==t&&ge.scrollByY(t*O.arrowButtonSpeed),o=setTimeout(i,s?O.initialDelay:O.arrowRepeatFreq),s=!1}var a,o,s=!0;i(),a=r?"mouseout.jsp":"mouseup.jsp",(r=r||ye("html")).bind(a,function(){n.removeClass("jspActive"),o&&clearTimeout(o),o=null,r.unbind(a)})}(e,t,this,n),this.blur(),!1}}function j(){se&&se.unbind("mousedown.jsp"),te&&te.unbind("mousedown.jsp")}function M(){ye("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Q&&Q.removeClass("jspActive"),X&&X.removeClass("jspActive")}function A(e,t){var n,r,i,a;W&&(e<0?e=0:G<e&&(e=G),n=new ye.Event("jsp-will-scroll-y"),b.trigger(n,[e]),n.isDefaultPrevented()||(r=0===(n=e||0),i=n==G,a=-(e/G)*(H-N),(t=void 0===t?O.animateScroll:t)?ge.animate(Q,"top",e,T,function(){b.trigger("jsp-user-scroll-y",[-a,r,i])}):(Q.css("top",e),T(e),b.trigger("jsp-user-scroll-y",[-a,r,i]))))}function T(e){void 0===e&&(e=Q.position().top),B.scrollTop(0);var t,n=0===(Y=e||0),r=Y==G,i=-(e/G)*(H-N);a==n&&s==r||(a=n,s=r,b.trigger("jsp-arrow-change",[a,s,o,l])),t=n,e=r,O.showArrows&&(ie[t?"addClass":"removeClass"]("jspDisabled"),ae[e?"addClass":"removeClass"]("jspDisabled")),U.css("top",i),b.trigger("jsp-scroll-y",[-i,n,r]).trigger("scroll")}function I(e,t){var n,r,i,a;J&&(e<0?e=0:K<e&&(e=K),n=new ye.Event("jsp-will-scroll-x"),b.trigger(n,[e]),n.isDefaultPrevented()||(r=0===(n=e||0),i=n==K,a=-(e/K)*(q-D),(t=void 0===t?O.animateScroll:t)?ge.animate(X,"left",e,E,function(){b.trigger("jsp-user-scroll-x",[-a,r,i])}):(X.css("left",e),E(e),b.trigger("jsp-user-scroll-x",[-a,r,i]))))}function E(e){void 0===e&&(e=X.position().left),B.scrollTop(0);var t,n=0===(Z=e||0),r=Z==K,i=-(e/K)*(q-D);o==n&&l==r||(o=n,l=r,b.trigger("jsp-arrow-change",[a,s,o,l])),t=n,e=r,O.showArrows&&(ue[t?"addClass":"removeClass"]("jspDisabled"),de[e?"addClass":"removeClass"]("jspDisabled")),U.css("left",i),b.trigger("jsp-scroll-x",[-i,n,r]).trigger("scroll")}function $(e,t){A(e/(H-N)*G,t)}function _(e,t){I(e/(q-D)*K,t)}function R(e,t,n){var r,i,a,o,s,l,c=0,u=0;try{r=ye(e)}catch(e){return}for(o=r.outerHeight(),i=r.outerWidth(),B.scrollTop(0),B.scrollLeft(0);!r.is(".jspPane");)if(c+=r.position().top,u+=r.position().left,r=r.offsetParent(),/^body|html$/i.test(r[0].nodeName))return;e=(a=P())+N,c<a||t?s=c-O.horizontalGutter:e<c+o&&(s=c-N+o+O.horizontalGutter),isNaN(s)||$(s,n),s=(o=F())+D,u<o||t?l=u-O.horizontalGutter:s<u+i&&(l=u-D+i+O.horizontalGutter),isNaN(l)||_(l,n)}function F(){return-U.position().left}function P(){return-U.position().top}function L(){return!1}var O,U,D,N,B,q,H,z,V,W,J,Q,G,Y,X,K,Z,ee,te,t,ne,re,ie,ae,oe,se,le,ce,ue,de,fe,pe,he,ge=this,a=!0,o=!0,s=!1,l=!1,n=b.clone(!1,!1).empty(),me=ye.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",ve="border-box"===b.css("box-sizing")?pe=0:(pe=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0));ye.extend(ge,{reinitialise:function(e){w(e=ye.extend({},O,e))},scrollToElement:function(e,t,n){R(e,t,n)},scrollTo:function(e,t,n){_(e,n),$(t,n)},scrollToX:function(e,t){_(e,t)},scrollToY:function(e,t){$(e,t)},scrollToPercentX:function(e,t){_(e*(q-D),t)},scrollToPercentY:function(e,t){$(e*(H-N),t)},scrollBy:function(e,t,n){ge.scrollByX(e,n),ge.scrollByY(t,n)},scrollByX:function(e,t){I((F()+Math[e<0?"floor":"ceil"](e))/(q-D)*K,t)},scrollByY:function(e,t){A((P()+Math[e<0?"floor":"ceil"](e))/(H-N)*G,t)},positionDragX:function(e,t){I(e,t)},positionDragY:function(e,t){A(e,t)},animate:function(e,t,n,r,i){var a={};a[t]=n,e.animate(a,{duration:O.animateDuration,easing:O.animateEase,queue:!1,step:r,complete:i})},getContentPositionX:F,getContentPositionY:P,getContentWidth:function(){return q},getContentHeight:function(){return H},getPercentScrolledX:function(){return F()/(q-D)},getPercentScrolledY:function(){return P()/(H-N)},getIsScrollableH:function(){return J},getIsScrollableV:function(){return W},getContentPane:function(){return U},scrollToBottom:function(e){A(G,e)},hijackInternalLinks:ye.noop,destroy:function(){var e,t;e=P(),t=F(),b.removeClass("jspScrollable").unbind(".jsp"),U.unbind(".jsp"),b.replaceWith(n.append(U.children())),n.scrollTop(e),n.scrollLeft(t),fe&&clearInterval(fe)}}),w(e)}return n=ye.extend({},ye.fn.jScrollPane.defaults,n),ye.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=ye(this),t=e.data("jsp");t?t.reinitialise(n):(ye("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new r(e,n),e.data("jsp",t))})},ye.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(u){var d,f,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],p=Array.prototype.slice;if(u.event.fixHooks)for(var n=e.length;n;)u.event.fixHooks[e[--n]]=u.event.mouseHooks;var h=u.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r;u.data(this,"mousewheel-line-height",h.getLineHeight(this)),u.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null;u.removeData(this,"mousewheel-line-height"),u.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=u(e),e=t["offsetParent"in u.fn?"offsetParent":"parent"]();return e.length||(e=u("body")),parseInt(e.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return u(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function r(e){var t,n,r=e||window.event,i=p.call(arguments,1),a=0,o=0,s=0,l=0,c=0;if((e=u.event.fix(r)).type="mousewheel","detail"in r&&(s=-1*r.detail),"wheelDelta"in r&&(s=r.wheelDelta),"wheelDeltaY"in r&&(s=r.wheelDeltaY),"wheelDeltaX"in r&&(o=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(o=-1*s,s=0),a=0===s?o:s,"deltaY"in r&&(a=s=-1*r.deltaY),"deltaX"in r&&(o=r.deltaX,0===s&&(a=-1*o)),0!==s||0!==o)return 1===r.deltaMode?(a*=t=u.data(this,"mousewheel-line-height"),s*=t,o*=t):2===r.deltaMode&&(a*=n=u.data(this,"mousewheel-page-height"),s*=n,o*=n),n=Math.max(Math.abs(s),Math.abs(o)),(!f||n<f)&&m(r,f=n)&&(f/=40),m(r,n)&&(a/=40,o/=40,s/=40),a=Math[1<=a?"floor":"ceil"](a/f),o=Math[1<=o?"floor":"ceil"](o/f),s=Math[1<=s?"floor":"ceil"](s/f),h.settings.normalizeOffset&&this.getBoundingClientRect&&(n=this.getBoundingClientRect(),l=e.clientX-n.left,c=e.clientY-n.top),e.deltaX=o,e.deltaY=s,e.deltaFactor=f,e.offsetX=l,e.offsetY=c,e.deltaMode=0,i.unshift(e,a,o,s),d&&clearTimeout(d),d=setTimeout(g,200),(u.event.dispatch||u.event.handle).apply(this,i)}function g(){f=null}function m(e,t){return h.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}u.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});try{var _cookiepolicyfancybox=jQuery}catch(e){try{var _cookiepolicyfancybox=$}catch(e){}}$!==jQuery&&(_cookiepolicyfancybox=_cookiepolicyfancybox.noConflict()),function(s){function l(){d.hide(),M.onerror=M.onload=null,j&&j.abort(),u.empty()}function c(){if(!1===w.onError(S,b,w))return d.hide(),_=!1;w.titleShow=!1,w.width="auto",w.height="auto",u.html('<p id="oupcookiepolicy_fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),F()}function i(){var r,e,t,n,i,a,o=S[b];if(l(),w=s.extend({},s.fn.oupcookiepolicy_fancybox.defaults,void 0===s(o).data("oupcookiepolicy_fancybox")?w:s(o).data("oupcookiepolicy_fancybox")),!1!==(a=w.onStart(S,b,w)))if(t=(w="object"==typeof a?s.extend(w,a):w).title||(o.nodeName?s(o).attr("title"):o.title)||"",o.nodeName&&!w.orig&&(w.orig=s(o).children("img:first").length?s(o).children("img:first"):s(o)),""===t&&w.orig&&w.titleFromAlt&&(t=w.orig.attr("alt")),r=w.href||(o.nodeName?s(o).attr("href"):o.href)||null,!/^(?:javascript)/i.test(r)&&"#"!=r||(r=null),w.type?(e=w.type,r=r||w.content):w.content?e="html":r&&(e=r.match(A)?"image":r.match(T)?"swf":s(o).hasClass("iframe")?"iframe":0===r.indexOf("#")?"inline":"ajax"),e)switch("inline"==e&&(o=r.substr(r.indexOf("#")),e=0<s(o).length?"inline":"ajax"),w.type=e,w.href=r,w.title=t,w.autoDimensions&&("html"==w.type||"inline"==w.type||"ajax"==w.type?(w.width="auto",w.height="auto"):w.autoDimensions=!1),w.modal&&(w.overlayShow=!0,w.hideOnOverlayClick=!1,w.hideOnContentClick=!1,w.enableEscapeButton=!1,w.showCloseButton=!1),w.padding=parseInt(w.padding,10),w.margin=parseInt(w.margin,10),u.css("padding",w.padding+w.margin),s(".oupcookiepolicy_fancybox-inline-tmp").unbind("oupcookiepolicy_fancybox-cancel").bind("oupcookiepolicy_fancybox-change",function(){s(this).replaceWith(f.children())}),e){case"html":u.html(w.content),F();break;case"inline":if(!0===s(o).parent().is("#oupcookiepolicy_fancybox-content"))return _=!1,0;s('<div class="oupcookiepolicy_fancybox-inline-tmp" />').hide().insertBefore(s(o)).bind("oupcookiepolicy_fancybox-cleanup",function(){s(this).replaceWith(f.children())}).bind("oupcookiepolicy_fancybox-cancel",function(){s(this).replaceWith(u.children())}),s(o).appendTo(u),F();break;case"image":_=!1,s.oupcookiepolicy_fancybox.showActivity(),(M=new Image).onerror=function(){c()},M.onload=function(){_=!0,M.onerror=M.onload=null,w.width=M.width,w.height=M.height,s("<img />").attr({id:"oupcookiepolicy_fancybox-img",src:M.src,alt:w.title}).appendTo(u),P()},M.src=r;break;case"swf":w.scrolling="no",n='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+w.width+'" height="'+w.height+'"><param name="movie" value="'+r+'"></param>',i="",s.each(w.swf,function(e,t){n+='<param name="'+e+'" value="'+t+'"></param>',i+=" "+e+'="'+t+'"'}),n+='<embed src="'+r+'" type="application/x-shockwave-flash" width="'+w.width+'" height="'+w.height+'"'+i+"></embed></object>",u.html(n),F();break;case"ajax":_=!1,s.oupcookiepolicy_fancybox.showActivity(),w.ajax.win=w.ajax.success,j=s.ajax(s.extend({},w.ajax,{url:r,data:w.ajax.data||{},error:function(e,t,n){0<e.status&&c()},success:function(e,t,n){if(200==("object"==typeof n?n:j).status){if("function"==typeof w.ajax.win){if(!1===(a=w.ajax.win(r,e,t,n)))return void d.hide();"string"!=typeof a&&"object"!=typeof a||(e=a)}u.html(e),F()}}}));break;case"iframe":P()}else c();else _=!1}function a(){return[s(window).width()-2*C.margin,s(window).height()-2*C.margin,s(document).scrollLeft()+C.margin,s(document).scrollTop()+C.margin]}function e(){d.is(":visible")?(s("div",d).css("top",-40*I+"px"),I=(I+1)%12):clearInterval(m)}var u,d,n,r,t,f,o,p,h,g,m,v,y,b=0,w={},S=[],x=0,C={},k=[],j=null,M=new Image,A=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,T=/[^\.]\.(swf)\s*$/i,I=1,E=0,$="",_=!1,R=s.extend(s("<div/>")[0],{prop:0}),F=function(){var e=w.width,t=w.height,e=-1<e.toString().indexOf("%")?parseInt((s(window).width()-2*w.margin)*parseFloat(e)/100,10)+"px":"auto"==e?"auto":e+"px",t=-1<t.toString().indexOf("%")?parseInt((s(window).height()-2*w.margin)*parseFloat(t)/100,10)+"px":"auto"==t?"auto":t+"px";u.wrapInner('<div style="width:'+e+";height:"+t+";overflow: "+("auto"==w.scrolling?"auto":"yes"==w.scrolling?"scroll":"hidden")+';position:relative;"></div>'),w.width=u.width(),w.height=u.height(),P()},P=function(){var e,t;return d.hide(),r.is(":visible")&&!1===C.onCleanup(k,x,C)?(s.event.trigger("oupcookiepolicy_fancybox-cancel"),void(_=!1)):(_=!0,s(f.add(n)).unbind(),s(window).unbind("resize.fb scroll.fb"),s(document).unbind("keydown.fb"),k=S,x=b,C=w,r.is(":visible")&&"outside"!==C.titlePosition&&r.css("height",r.height()),C.overlayShow?(n.css({"background-color":C.overlayColor,opacity:C.overlayOpacity,cursor:C.hideOnOverlayClick?"pointer":"auto",height:s(document).height()}),n.is(":visible")||n.show()):n.hide(),y=D(),L(),r.is(":visible")?(s(o.add(h).add(g)).hide(),e=r.position(),v={top:e.top,left:e.left,width:r.width(),height:r.height()},t=v.width==y.width&&v.height==y.height,void f.fadeTo(C.changeFade,.3,function(){function e(){f.html(u.contents()).fadeTo(C.changeFade,1,O)}s.event.trigger("oupcookiepolicy_fancybox-change"),f.empty().removeAttr("filter").css({"border-width":C.padding,width:y.width-2*C.padding,height:w.autoDimensions?"auto":y.height-E-2*C.padding}),t?e():(R.prop=0,s(R).animate({prop:1},{duration:C.changeSpeed,easing:C.easingChange,step:U,complete:e}))})):(r.removeAttr("style"),f.css("border-width",C.padding),"elastic"==C.transitionIn?(v=N(),f.html(u.contents()),r.show(),C.opacity&&(y.opacity=0),R.prop=0,void s(R).animate({prop:1},{duration:C.speedIn,easing:C.easingIn,step:U,complete:O})):("inside"==C.titlePosition&&0<E&&p.show(),f.css({width:y.width-2*C.padding,height:w.autoDimensions?"auto":y.height-E-2*C.padding}).html(u.contents()),void r.css(y).fadeIn("none"==C.transitionIn?0:C.speedIn,O))))},L=function(){var e;if($=C.title||"",E=0,p.empty().removeAttr("style").removeClass(),!1!==C.titleShow)if(($=s.isFunction(C.titleFormat)?C.titleFormat($,k,x,C):!(!(e=$)||!e.length)&&("float"==C.titlePosition?'<table id="oupcookiepolicy_fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="oupcookiepolicy_fancybox-title-float-left"></td><td id="oupcookiepolicy_fancybox-title-float-main">'+e+'</td><td id="oupcookiepolicy_fancybox-title-float-right"></td></tr></table>':'<div id="oupcookiepolicy_fancybox-title-'+C.titlePosition+'">'+e+"</div>"))&&""!==$){switch(p.addClass("oupcookiepolicy_fancybox-title-"+C.titlePosition).html($).appendTo("body").show(),C.titlePosition){case"inside":p.css({width:y.width-2*C.padding,marginLeft:C.padding,marginRight:C.padding}),E=p.outerHeight(!0),p.appendTo(t),y.height+=E;break;case"over":p.css({marginLeft:C.padding,width:y.width-2*C.padding,bottom:C.padding}).appendTo(t);break;case"float":p.css("left",-1*parseInt((p.width()-y.width-40)/2,10)).appendTo(r);break;default:p.css({width:y.width-2*C.padding,paddingLeft:C.padding,paddingRight:C.padding}).appendTo(r)}p.hide()}else p.hide();else p.hide()},O=function(){s.support.opacity||(f.get(0).style.removeAttribute("filter"),r.get(0).style.removeAttribute("filter")),w.autoDimensions&&f.css("height","auto"),r.css("height","auto"),$&&$.length&&p.show(),C.showCloseButton&&o.show(),function(){if((C.enableEscapeButton||C.enableKeyboardNav)&&s(document).bind("keydown.fb",function(e){27==e.keyCode&&C.enableEscapeButton?(e.preventDefault(),s.oupcookiepolicy_fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!C.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),s.oupcookiepolicy_fancybox[37==e.keyCode?"prev":"next"]())}),!C.showNavArrows)return h.hide(),g.hide();(C.cyclic&&1<k.length||0!==x)&&h.show(),(C.cyclic&&1<k.length||x!=k.length-1)&&g.show()}(),C.hideOnContentClick&&f.bind("click",s.oupcookiepolicy_fancybox.close),C.hideOnOverlayClick&&n.bind("click",s.oupcookiepolicy_fancybox.close),s(window).bind("resize.fb",s.oupcookiepolicy_fancybox.resize),C.centerOnScroll&&s(window).bind("scroll.fb",s.oupcookiepolicy_fancybox.center),"iframe"==C.type&&s('<iframe id="oupcookiepolicy_fancybox-frame" name="oupcookiepolicy_fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" allowtransparency="true" scrolling="'+w.scrolling+'" src="'+C.href+'"></iframe>').appendTo(f),r.show(),_=!1,s.oupcookiepolicy_fancybox.center(),C.onComplete(k,x,C),function(){var e,t;if(k.length-1>x){e=k[x+1].href;if(typeof e!=="undefined"&&e.match(A)){t=new Image;t.src=e}}if(x>0){e=k[x-1].href;if(typeof e!=="undefined"&&e.match(A)){t=new Image;t.src=e}}}()},U=function(e){var t={width:parseInt(v.width+(y.width-v.width)*e,10),height:parseInt(v.height+(y.height-v.height)*e,10),top:parseInt(v.top+(y.top-v.top)*e,10),left:parseInt(v.left+(y.left-v.left)*e,10)};void 0!==y.opacity&&(t.opacity=e<.5?.5:e),r.css(t),f.css({width:t.width-2*C.padding,height:t.height-E*e-2*C.padding})},D=function(){var e=a(),t={},n=C.autoScale,r=2*C.padding;return-1<C.width.toString().indexOf("%")?t.width=parseInt(e[0]*parseFloat(C.width)/100,10):t.width=C.width+r,-1<C.height.toString().indexOf("%")?t.height=parseInt(e[1]*parseFloat(C.height)/100,10):t.height=C.height+r,n&&(t.width>e[0]||t.height>e[1])&&("image"==w.type||"swf"==w.type?(n=C.width/C.height,t.width>e[0]&&(t.width=e[0],t.height=parseInt((t.width-r)/n+r,10)),t.height>e[1]&&(t.height=e[1],t.width=parseInt((t.height-r)*n+r,10))):(t.width=Math.min(t.width,e[0]),t.height=Math.min(t.height,e[1]))),t.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-t.height-40)),10),t.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-t.width-40)),10),t},N=function(){var e,t=!!w.orig&&s(w.orig);return t&&t.length?((e=(t=t).offset()).top+=parseInt(t.css("paddingTop"),10)||0,e.left+=parseInt(t.css("paddingLeft"),10)||0,e.top+=parseInt(t.css("border-top-width"),10)||0,e.left+=parseInt(t.css("border-left-width"),10)||0,e.width=t.width(),e.height=t.height(),{width:e.width+2*C.padding,height:e.height+2*C.padding,top:e.top-C.padding-20,left:e.left-C.padding-20}):(e=a(),{width:2*C.padding,height:2*C.padding,top:parseInt(e[3]+.5*e[1],10),left:parseInt(e[2]+.5*e[0],10)})};s.fn.oupcookiepolicy_fancybox=function(e){return s(this).length&&s(this).data("oupcookiepolicy_fancybox",s.extend({},e,s.metadata?s(this).metadata():{})).unbind("click.fb").bind("click.fb",function(e){e.preventDefault(),_||(_=!0,s(this).blur(),S=[],b=0,(e=s(this).attr("rel")||"")&&""!=e&&"nofollow"!==e?(S=s("a[rel="+e+"], area[rel="+e+"]"),b=S.index(this)):S.push(this),i())}),this},s.oupcookiepolicy_fancybox=function(e){var t;if(!_){if(_=!0,t=void 0!==arguments[1]?arguments[1]:{},S=[],b=parseInt(t.index,10)||0,s.isArray(e)){for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]?s(e[n]).data("oupcookiepolicy_fancybox",s.extend({},t,e[n])):e[n]=s({}).data("oupcookiepolicy_fancybox",s.extend({content:e[n]},t));S=jQuery.merge(S,e)}else"object"==typeof e?s(e).data("oupcookiepolicy_fancybox",s.extend({},t,e)):e=s({}).data("oupcookiepolicy_fancybox",s.extend({content:e},t)),S.push(e);(b>S.length||b<0)&&(b=0),i()}},s.oupcookiepolicy_fancybox.showActivity=function(){clearInterval(m),d.show(),m=setInterval(e,66)},s.oupcookiepolicy_fancybox.hideActivity=function(){d.hide()},s.oupcookiepolicy_fancybox.next=function(){return s.oupcookiepolicy_fancybox.pos(x+1)},s.oupcookiepolicy_fancybox.prev=function(){return s.oupcookiepolicy_fancybox.pos(x-1)},s.oupcookiepolicy_fancybox.pos=function(e){_||(e=parseInt(e),S=k,-1<e&&e<k.length?(b=e,i()):C.cyclic&&1<k.length&&(b=e>=k.length?0:k.length-1,i()))},s.oupcookiepolicy_fancybox.cancel=function(){_||(_=!0,s.event.trigger("oupcookiepolicy_fancybox-cancel"),l(),w.onCancel(S,b,w),_=!1)},s.oupcookiepolicy_fancybox.close=function(){var e;function t(){n.fadeOut("fast"),p.empty().hide(),r.hide(),s.event.trigger("oupcookiepolicy_fancybox-cleanup"),f.empty(),k=w=[],x=b=0,C=w={},_=!1}_||r.is(":hidden")||(_=!0,C&&!1===C.onCleanup(k,x,C)?_=!1:(l(),s(o.add(h).add(g)).hide(),s(f.add(n)).unbind(),s(window).unbind("resize.fb scroll.fb"),s(document).unbind("keydown.fb"),f.find("iframe").attr("src","about:blank"),"inside"!==C.titlePosition&&p.empty(),r.stop(),"elastic"==C.transitionOut?(v=N(),e=r.position(),y={top:e.top,left:e.left,width:r.width(),height:r.height()},C.opacity&&(y.opacity=1),p.empty().hide(),R.prop=1,s(R).animate({prop:0},{duration:C.speedOut,easing:C.easingOut,step:U,complete:t})):r.fadeOut("none"==C.transitionOut?0:C.speedOut,t)))},s.oupcookiepolicy_fancybox.resize=function(){n.is(":visible")&&n.css("height",s(document).height()),s.oupcookiepolicy_fancybox.center(!0)},s.oupcookiepolicy_fancybox.center=function(){var e,t;_||(t=!0===arguments[0]?1:0,e=a(),!t&&(r.width()>e[0]||r.height()>e[1])||r.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-f.height()-40)-C.padding)),left:parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-f.width()-40)-C.padding))},"number"==typeof arguments[0]?arguments[0]:200))},s.oupcookiepolicy_fancybox.init=function(){s("#oupcookiepolicy_fancybox-wrap").length||(s("body").append(u=s('<div id="oupcookiepolicy_fancybox-tmp"></div>'),d=s('<div id="oupcookiepolicy_fancybox-loading"><div></div></div>'),n=s('<div id="oupcookiepolicy_fancybox-overlay"></div>'),r=s('<div id="oupcookiepolicy_fancybox-wrap"></div>')),(t=s('<div id="oupcookiepolicy_fancybox-outer"></div>').append('<div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-n"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-ne"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-e"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-se"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-s"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-sw"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-w"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-nw"></div>').appendTo(r)).append(f=s('<div id="oupcookiepolicy_fancybox-content"></div>'),o=s('<a id=""></a>'),p=s('<div id="oupcookiepolicy_fancybox-title"></div>'),h=s('<a href="javascript:;" id="oupcookiepolicy_fancybox-left"><span class="fancy-ico" id="oupcookiepolicy_fancybox-left-ico"></span></a>'),g=s('<a href="javascript:;" id="oupcookiepolicy_fancybox-right"><span class="fancy-ico" id="oupcookiepolicy_fancybox-right-ico"></span></a>')),o.click(s.oupcookiepolicy_fancybox.close),d.click(s.oupcookiepolicy_fancybox.cancel),h.click(function(e){e.preventDefault(),s.oupcookiepolicy_fancybox.prev()}),g.click(function(e){e.preventDefault(),s.oupcookiepolicy_fancybox.next()}),s.fn.mousewheel&&r.bind("mousewheel.fb",function(e,t){_?e.preventDefault():0!=s(e.target).get(0).clientHeight&&s(e.target).get(0).scrollHeight!==s(e.target).get(0).clientHeight||(e.preventDefault(),s.oupcookiepolicy_fancybox[0<t?"prev":"next"]())}),s.support.opacity||r.addClass("oupcookiepolicy_fancybox-ie"))},s.fn.oupcookiepolicy_fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!1,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},s(document).ready(function(){s.oupcookiepolicy_fancybox.init()})}(jQuery);var domain="//global.oup.com",cookieWsUrl=domain+"/cookiealert",cookiePolicyUrl=domain+"/cookiepolicy/",version="/0",cookieDate="/01-01-2000",preferredLanguage="",cookieName="oup-cookie",databaseVersion="0",cookieOlderThanSpecificDays=!0,ie6Message='<div id="oupcookiepolicy_message" class="cookiepolicyimplied"><div class="cookiepolicytext">We use cookies to enhance your experience on our website. By clicking \'continue\' or by continuing to use our website, you are agreeing to our use of cookies. You can change your cookie settings at any time.</div><ul class="cookiepolicylinks"><li><a href="#" onClick="window.location.reload( true );" class="cookiepolicycontinue" title="Close this message">Continue</a></li><li><a href="http://global.oup.com/cookiepolicy/" target="_blank" class="cookiepolicymore" title="How we use cookies on this site">Find out more</a></li></ul><div class="cookiepolicyend"></div></div>';try{var _cookiepolicy=jQuery}catch(e){try{var _cookiepolicy=$}catch(e){}}function writeTheElements(){var e=document.createElement("div");e.innerHTML='<div id="cookiepolicy_div"><div id="cookiepolicy_parent"style="display:none"><div id="cookiepolicy_data"></div></div></div>',document.body.insertBefore(e,document.body.firstChild)}function getTheCookie(){var e=(e=null==(e=window.navigator.userLanguage)?window.navigator.language:e).substring(0,2),t=metaKeywords();""!=oupcookiepolicy_preferredlanguage&&" "!=oupcookiepolicy_preferredlanguage&&"undefined"!=oupcookiepolicy_preferredlanguage&&0<oupcookiepolicy_preferredlanguage.length?preferredLanguage="/"+oupcookiepolicy_preferredlanguage:""!=t&&"undefined"!=t?(t=t.substring(0,2),preferredLanguage="/"+t):""!=e&&"undefined"!=e&&(e=e.substring(0,2),preferredLanguage="/"+e),""!=preferredLanguage&&"undefined"!=preferredLanguage||(preferredLanguage="/en");e=document.cookie;cookiearray=e.split(";");for(var n=0;n<cookiearray.length;n++){var r,i=cookiearray[n].split("=")[0],a=cookiearray[n].split("=")[1];-1!=i.indexOf(cookieName)&&(version=""==a.split("_")[0]?"/0":"/"+a.split("_")[0],r=constructDateString(a.split("_")[1]),i=new Date(r),r=new Date,cookieOlderThanSpecificDays=7776e6<r-i,cookieDate="/"+a.split("_")[1])}}function metaKeywords(){var e="";for(metaCollection=document.getElementsByTagName("meta"),i=0;i<metaCollection.length;i++)nameAttribute=metaCollection[i].name.search(/language/),-1!=nameAttribute&&(e=metaCollection[i].content);return e}function constructDateString(e){try{var t=e.split("-")[0],n=e.split("-")[1];return e.split("-")[2]+","+n+","+t}catch(e){}}function checkForAlertMessage(){var e=null,e=createCORSRequest("GET",cookieWsUrl+preferredLanguage+version+cookieDate,!0);if("undefined"!=typeof XDomainRequest)e.onprogress=function(){},e.ontimeout=function(){},e.onerror=function(){},e.onload=function(){"true"==e.responseText&&getAlertMessage()},setTimeout(function(){e.send()},0);else if(window.ActiveXObject)e.onreadystatechange=function(){4==e.readyState&&200==e.status&&"true"==e.responseText&&getAlertMessage()},e.send();else try{e.onreadystatechange=function(){4==e.readyState&&"true"==e.responseText&&getAlertMessage()},e.send()}catch(e){}}function getAlertMessage(){var e=null,t=!1,e=createCORSRequest("GET",cookieWsUrl+preferredLanguage+"/"+oupcookiepolicy_messagetype,!0);"undefined"!=typeof XDomainRequest?e.onload=function(){t||(t=!0,generateAlertMessage(e.responseText))}:window.ActiveXObject?e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(t=!0,generateAlertMessage(e.responseText))}:e.onreadystatechange=function(){4!=e.readyState||200!=e.status||t||(t=!0,generateAlertMessage(e.responseText))},e.send()}function createCORSRequest(t,n){navigator.userAgent;var r=new XMLHttpRequest;if("withCredentials"in r)r.open(t,n,!0);else if("undefined"!=typeof XDomainRequest)try{(r=new XDomainRequest).open(t,n)}catch(e){(r=new XMLHttpRequest).open(t,n,!0)}else if(window.ActiveXObject)try{(r=new ActiveXObject("Msxml2.XMLHTTP")).open(t,n)}catch(e){try{(r=new ActiveXObject("Microsoft.XMLHTTP")).open(t,n)}catch(e){r.open(t,n,!0)}}else try{(r=new XDomainRequest).open(t,n)}catch(e){(r=new XMLHttpRequest).open(t,n,!0)}return r}function generateAlertMessage(e){var t="/cookiepolicy/",n="1",r=preferredLanguage.substring(1,preferredLanguage.length).split(","),i=0,a="",o="";if(e.length&&0<e.length){r.length;if(-1!=e.indexOf("____"))for(var s=e.split("____"),l=s.length-1,c=0;c<l;c++){for(var u=s[c].substring(0,e.indexOf("|")),a=s[c].substring(s[c].indexOf("|")+1,s[c].length),d=FindNewLangWithCountryCode(r[i++]),f=a.split(t),p=f.length,h="",g=0;g<p;g++)h=0!=g?"explicit"==oupcookiepolicy_messagetype?h+t+"?siteid="+oupcookiepolicy_siteid+"&lang="+d+f[g]+"<br/>":h+t+"?siteid="+oupcookiepolicy_siteid+"&lang="+d+f[g]:f[g];o+=h=h.replace("dbCookieVersion",u)}else e.length&&0<e.length&&-1!=e.indexOf("|")&&(u=e.substring(0,e.indexOf("|")),o=a=e.substring(e.indexOf("|")+1,e.length));if(""!=n&&" "!=n||(n="1"),alertMessageToDisplay=o,"implied"==oupcookiepolicy_messagetype){alertMessageToDisplay=htmlDecode(alertMessageToDisplay);var m=document.createElement("div");m.innerHTML=alertMessageToDisplay,document.body.insertBefore(m,document.body.firstChild),saveCookie(n)}else{document.getElementById("cookiepolicy_data").innerHTML=alertMessageToDisplay;try{document.getElementById("cookiepolicy_link").click()}catch(e){_cookiepolicy("#cookiepolicy_link").click()}}}}function cookiePolicy(){window.open(cookiePolicyUrl,"_blank")}function saveCookie(e){var t=new Date,n=new Date;n.setDate(n.getDate()+365);var t=t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear(),n=n.toGMTString(),e=cookieName+"="+e+"_"+t+"; expires="+n+"; path="+oupcookiepolicy_documentroot,t=document.domain;null!=oupcookiepolicy_siteid&&""!=oupcookiepolicy_siteid&&"journals"==oupcookiepolicy_siteid&&null!=t&&"undefine"!=t&&""!=t&&(n="",-1!=t.indexOf(".")&&(e=e+"; domain="+(n=2<(t=t.split(".")).length?"."+t[t.length-2]+"."+t[t.length-1]:n))),document.cookie=e,_cookiepolicy.oupcookiepolicy_fancybox&&_cookiepolicy.oupcookiepolicy_fancybox.close()}function closeImplied(){document.location.reload(!0)}function htmlDecode(e){var t,n,r=e;if(this.isEmpty(r))return"";if(r=this.HTML2Numerical(r),arr=r.match(/&#[0-9]{1,5};/g),null!=arr)for(var i=0;i<arr.length;i++)r=-32768<=(t=(n=arr[i]).substring(2,n.length-1))&&t<=65535?r.replace(n,String.fromCharCode(t)):r.replace(n,"");return r}function isEmpty(e){return!e||(null===e||0==e.length||/^\s+$/.test(e))}function HTML2Numerical(e){return swapArrayVals(e,this.arr1,this.arr2)}_cookiepolicy(document).ready(function(){writeTheElements(),getTheCookie(),"explicit"==oupcookiepolicy_messagetype&&"function"==typeof _cookiepolicy.oupcookiepolicy_fancybox&&(_cookiepolicy("a#cookiepolicy_link").oupcookiepolicy_fancybox({hideOnContentClick:!1,hideOnOverlayClick:!1}),_cookiepolicy("a.group").oupcookiepolicy_fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,overlayShow:!1}));try{cookieOlderThanSpecificDays&&checkForAlertMessage()}catch(e){var t,n="/cookiepolicy/";alertMessageToDisplay=htmlDecode(ie6Message),-1!=alertMessageToDisplay.indexOf(n)&&(t=alertMessageToDisplay.substring(0,alertMessageToDisplay.indexOf(n)),r=alertMessageToDisplay.substring(alertMessageToDisplay.indexOf(n)+n.length,alertMessageToDisplay.length),alertMessageToDisplay=t+n+"?siteid="+oupcookiepolicy_siteid+r);var r=document.createElement("div");r.innerHTML=alertMessageToDisplay,document.body.insertBefore(r,document.body.firstChild),saveCookie(1)}}),_cookiepolicy(document).keydown(function(e){if(27==e.keyCode&&27==e.keyCode&&!e.disableEscape)return!1});var arr1=["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&OElig;","&oelig;","&Scaron;","&scaron;","&Yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&Dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&Alpha;","&Beta;","&Gamma;","&Delta;","&Epsilon;","&Zeta;","&Eta;","&Theta;","&Iota;","&Kappa;","&Lambda;","&Mu;","&Nu;","&Xi;","&Omicron;","&Pi;","&Rho;","&Sigma;","&Tau;","&Upsilon;","&Phi;","&Chi;","&Psi;","&Omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&Prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&lArr;","&uArr;","&rArr;","&dArr;","&hArr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"],arr2=["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"];function swapArrayVals(e,t,n){if(this.isEmpty(e))return"";var r;if(t&&n&&t.length==n.length)for(var i=0,a=t.length;i<a;i++)r=new RegExp(t[i],"g"),e=e.replace(r,n[i]);return e}function FindNewLangWithCountryCode(e){var t=!1,n="GB",r=new Array(10);r[0]=new Array(2),r[0][0]="ja",r[0][1]="JP",r[1]=new Array(2),r[1][0]="en",r[1][1]="GB",r[2]=new Array(2),r[2][0]="zh",r[2][1]="TW",r[3]=new Array(2),r[3][0]="de",r[3][1]="DE",r[4]=new Array(2),r[4][0]="fr",r[4][1]="FR",r[5]=new Array(2),r[5][0]="es",r[5][1]="ES",r[6]=new Array(2),r[6][0]="nl",r[6][1]="NL",r[7]=new Array(2),r[7][0]="it",r[7][1]="IT",r[8]=new Array(2),r[8][0]="pt",r[8][1]="PT",r[9]=new Array(2),r[9][0]="sk",r[9][1]="SK";for(var i=0;i<10;i++)for(var a=0;a<2;a++)if(r[i][a],0==a&&r[i][a]==e){e=e+"_"+(n=r[i][a+1]),t=!0;break}return e=!t?"en_"+n:e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.Ajax=function(s){var e={get:function(e,t){return new r(e,"GET",t)},post:function(e,t){return new r(e,"POST",t)},ajax:function(e,t,n){return new r(e,t,n)},_objectToFormData:n,_formatPostData:h};var o={Text:"text",Html:"html",Json:"json",Xml:"xml",ActionResultModel:{Full:"actionResultModelFull",FullEnsureSuccess:"actionResultModelFullEnsureSuccess",Success:"actionResultModelSuccess",Html:"actionResultModelHtml",RedirectUrl:"actionResultModelRedirectUrl",ReturnId:"actionResultModelReturnId",Data:"actionResultModelData"}},i={Default:"Default",Json:"application/json; charset=utf-8",UrlEncoded:"application/x-www-form-urlencoded"};function r(e,t,n,r){this._url=e,this._method=t||"GET",this._data=n,this._dataType=r||o.Text,this._internalPromise=null,this._requestContentType=i.Default,this._abortableRequestHandle=null}function t(e){this._ajaxResult=e,this._expectedComponent=o.ActionResultModel.Full,this._internalPromise=null}function l(e,t,n){e=new Error(e);return e.name="AjaxError",e.userFriendlyMessage=t,e.actionResultModel=n,Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,l),e}function a(e,t,n,r,i){if("function"==typeof window.fetch)return function(e,t,n,r,i){var a=new AbortController;"GET"===t&&n&&(e=function(e,t){"object"===_typeof(t)&&(t=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")}(t));t&&t.length&&["?","&"].includes(t[0])&&(t=t.substring(1));return e.includes("?")?e+"&"+t:e+"?"+t}(e,n),n=void 0);n={method:t,body:h(n,i),signal:a.signal};return n.headers=function(e,t){var n={};!function(e){var t=window.location.origin,e=new URL(e,t).origin;return t===e}(e)||(n["X-Requested-With"]="XMLHttpRequest",n["X-Requested-With-Lies"]="Not actually XMLHttpRequest, but Fetch API via SCM.Ajax; X-Requested-With is set for server-side backwards compatibility");p(t)&&(n["Content-Type"]=t);return n}(e,i),{promise:fetch(e,n).then(function(e){if(!e.ok)throw new l("Bad response from server: "+e.status+": "+e.statusText,"Bad response from server");return r===o.Json?e.json():e.text()}).catch(function(e){throw new l("Request failed: "+e,"Request failed")}),abortableRequestHandle:a}}(e,t,n,r,i);if("function"==typeof s&&s()&&s().jquery)return function(e,t,n,i,r){var a,o={url:e,method:t,type:t,data:n,dataType:i};!function(e){return e instanceof FormData&&Array.from(e).filter(function(e){return 1<e.length&&e[1]instanceof File}).length}(n)||(o.contentType=!1,o.processData=!1);p(r)&&(o.contentType=r);return{promise:new Promise(function(t,r){a=s.ajax(o).done(function(e){t(e)}).fail(function(e,t,n){r(new l("parsererror"===t?"Failed to parse response as "+i:n,"Request failed"))})}),abortableRequestHandle:a}}(e,t,n,r,i);throw new Error("No supported AJAX implementations found.")}function n(e){if(e){if(e instanceof FormData||"object"!==_typeof(e))return e;var t=new FormData;return function n(r,i,a){r=r||new FormData;if(Array.isArray(i))for(var e=0;e<i.length;e++){var t=a+"["+e+"]";n(r,i[e],t)}else u(i)?r.append(a,i.toISOString()):!c(i)||d(i)||f(i)?null!=i&&r.append(a,i):Object.keys(i).forEach(function(e){var t=a?a+"["+e+"]":e;n(r,i[e],t)})}(t,e),t}}function c(e){return e===Object(e)}function u(e){return e instanceof Date}function d(e){return e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.slice}function f(e){return d(e)&&"string"==typeof e.name&&("object"===_typeof(e.lastModifiedDate)||"number"==typeof e.lastModified)}function p(e){return e&&e===i.Json}function h(e,t){switch(t){case i.UrlEncoded:return new URLSearchParams(e);case i.Json:return JSON.stringify(e);default:return n(e)}}function g(e,t){e=e.then(function(e){if(!e||void 0===e.Success)throw new l("Response does not appear to be an ActionResultModel","Unexpected response from server");return e});if(t===o.ActionResultModel.Full)return e;e=e.then(function(e){if(e.Success)return e;var t,n="Unspecified error";throw(t=e)&&t.Messages&&t.Messages.length?n=e.Messages[0]:(t=e)&&t.ValidationErrors&&t.ValidationErrors.length&&t.ValidationErrors[0].Errors&&t.ValidationErrors[0].Errors.length?n=e.ValidationErrors[0].Errors[0]:e.Html&&(n=e.Html),new l(n,"Request was not successful",e)});return t===o.ActionResultModel.FullEnsureSuccess?e:t===o.ActionResultModel.Success?e.then(function(){return!0}):t===o.ActionResultModel.Html?e.then(function(e){if("string"!=typeof e.Html)throw new l("No HTML was provided in the response","Unexpected response from server",e);return e.Html}):t===o.ActionResultModel.RedirectUrl?e.then(function(e){if("string"!=typeof e.RedirectUrl)throw new l("No RedirectUrl was provided in the response","Unexpected response from server",e);return e.RedirectUrl}):t===o.ActionResultModel.ReturnId?e.then(function(e){if("string"!=typeof e.ReturnId)throw new l("No ReturnId was provided in the response","Unexpected response from server",e);return e.ReturnId}):t===o.ActionResultModel.Data?e.then(function(e){if(void 0===e.Data||null===e.Data||"object"!==_typeof(e.Data))throw new l("No Data object was provided in the response","Unexpected response from server",e);return e.Data}):e}return r.prototype.then=function(e,t){var n;return this._internalPromise||(n=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=n.promise,this._abortableRequestHandle=n.abortableRequestHandle),this._internalPromise=this._internalPromise.then(e,t),this},r.prototype.catch=function(e){var t;return this._internalPromise||(t=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.catch(e),this},r.prototype.finally=function(e){var t;return this._internalPromise||(t=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.finally(e),this},r.prototype.sendAsJson=function(){return this._requestContentType=i.Json,this},r.prototype.sendAsUrlEncoded=function(){return this._requestContentType=i.UrlEncoded,this},r.prototype.abort=function(){var e;return(e=this._abortableRequestHandle)&&e.abort&&e.abort(),this},r.prototype.expectJson=function(){return this._dataType=o.Json,this.then(function(e){return e})},r.prototype.expectHtml=function(){return this._dataType=o.Html,this.then(function(e){return e})},r.prototype.expectText=function(){return this._dataType=o.Text,this.then(function(e){return e})},r.prototype.expectXml=function(){return this._dataType=o.Xml,this.then(function(e){return e})},r.prototype.expect=function(t,n){return"function"==typeof t&&(n=t,t=null),this.then(function(e){if(!n(e))throw new l(t||"Unexpected result from server");return e})},r.prototype.expectActionResultModel=function(){return this._dataType=o.Json,new t(this)},t.prototype.then=function(e,t){return this._internalPromise=(this._internalPromise||g(this._ajaxResult,this._expectedComponent)).then(e,t),this},t.prototype.catch=function(e){return this.intrnalPromise=(this._internalPromise||g(this._ajaxResult,this._expectedComponent)).catch(e),this},t.prototype.finally=function(e){return this._internalPromise=(this._internalPromise||g(this._ajaxResult,this._expectedComponent)).finally(e),this},t.prototype.ensureSuccess=function(){return this._expectedComponent=o.ActionResultModel.FullEnsureSuccess,this},t.prototype.expectSuccess=function(){return this._expectedComponent=o.ActionResultModel.Success,this},t.prototype.expectHtml=function(){return this._expectedComponent=o.ActionResultModel.Html,this},t.prototype.expectRedirectUrl=function(){return this._expectedComponent=o.ActionResultModel.RedirectUrl,this},t.prototype.expectReturnId=function(){return this._expectedComponent=o.ActionResultModel.ReturnId,this},t.prototype.expectData=function(){return this._expectedComponent=o.ActionResultModel.Data,this},t.prototype.abort=function(){return this._ajaxResult&&this._ajaxResult.abort(),this},l.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(l,Error):l.__proto__=Error,e}(window.jQuery||{}),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=SCM.Ajax);var SCM=SCM||{};function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);function r(){}var i=0;return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SCM.Retry=function(){var e={policy:function(){return new t},wait:function(e){return(new t).handleResult(function(){return!0}).waitAndRetry(1,e).execute(function(){}).catch(function(){})}};var r=function(e){return 50};function t(){this._exceptionPredicates=[],this._resultPredicates=[],this._retryCount=0,this._onRetry=null,this._waitTimeCalculator=r}function p(e){e=new Error(e);return e.name="RetryError",Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,p),e}return t.prototype.handleException=function(e){if(void 0===e)this._exceptionPredicates.push(function(){return!0});else{if("function"!=typeof e)throw new p("exceptionPredicate must be a function");this._exceptionPredicates.push(e)}return this},t.prototype.handleResult=function(e){if("function"!=typeof e)throw new p("resultPredicate must be a function");return this._resultPredicates.push(e),this},t.prototype.untilResultIs=function(t){return this._resultPredicates.push(function(e){return e!=t}),this},t.prototype.retry=function(e,t){return"function"==typeof(e=void 0===e?1:e)&&(t=e,e=1),this._retryCount=e,"function"==typeof t&&(this._onRetry=t),this},t.prototype.waitAndRetry=function(e,t,n){if("number"!=typeof e)throw new p("retryCount must be specified as an integer");return this._retryCount=e,void 0!==t&&(this._waitTimeCalculator=function(t,e){if("number"==typeof t)return function(e){return t};if(Array.isArray(t)&&t.length===e){if(t.length!==e)throw new p("Wait time array length must match retryCount");return function(e){return t[e-1]}}return"function"!=typeof t?r:t}(t,e)),"function"==typeof n&&(this._onRetry=n),this},t.prototype.execute=function(s){var l=this._resultPredicates,c=this._exceptionPredicates,u=this._onRetry,d=this._waitTimeCalculator,f=this._retryCount;return new Promise(function(e,n){var r=0;function i(){try{var e=s();(t=e)&&"function"==typeof t.then&&"function"==typeof t.catch?e.then(function(e){a(e)}).catch(function(e){o(e)}):a(e)}catch(e){o(e)}var t}function a(t){l.some(function(e){return e(t)})?r<f?(r++,"function"==typeof u&&u(t,r),setTimeout(i,d(r))):n(new p("retryCount exceeded")):e(t)}function o(t){r<f&&c.some(function(e){return e(t)})?(r++,"function"==typeof u&&u(t,r),setTimeout(i,d(r))):n(t)}i()})},p.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(p,Error):p.__proto__=Error,e}(),SCM.wait=SCM.wait||SCM.Retry.wait,"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=SCM.Retry);var SCM=SCM||{};!function(e,r){e.DisableTriggerOnExternalLinks=function(){var e,t,n=r(".hfInterstitial");n.length&&(e=n.data("interstitiallinks").split(","),t=n.data("subdomain"),r("a").filter(function(){return function(e,t,n){if(e.hostname&&e.hostname!==location.hostname)return!0;if(n&&e.href.endsWith(n))return!1;var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(-1<e.href.indexOf(a))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}(this,e,t)}).attr("data-google-interstitial","false"))},e.init=function(){e.DisableTriggerOnExternalLinks()}}(SCM.Interstitial=SCM.Interstitial||{},jQuery),function(){var e,t=(e=window.navigator.userAgent,0<(t=e.indexOf("MSIE"))?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/trident/gi)?11:navigator.userAgent.match(/edge/gi)?13:0);0<t&&t<13?$("html").addClass("IE IE-"+t):12<t&&$("html").addClass("IE IE-Edge")}();var debounce=function(r,i,a){var o;return function(){var e=this,t=arguments,n=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||r.apply(e,t)},i),n&&r.apply(e,t)}};function updateViewportDimensions(){var e=window,t=document,n=t.documentElement,t=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||t.clientWidth,height:e.innerHeight||n.clientHeight||t.clientHeight}}var viewport=updateViewportDimensions(),SCM=SCM||{};SCM.JSUtility=function(u){return{equalHeights:function(n,r){function e(){var t,e;u(n).length&&u(window).width()>r?(t=0,(e=u(n)).attr("style",""),e.each(function(){var e=u(this).outerHeight();t<e&&(t=e)}),u(n).css("height",t)):u(n).attr("style","")}e(),u(window).resize(function(){e()})},addStateToggle:function(e,t,n){var r=u(e),i=u(t),a="active-state",o="target-active",s=u("body"),l=t.replace(/.|#/,"")+"-active",t=i.find(".close");function c(){i.removeClass(a),r.removeClass(o),n&&s.removeClass(l)}n=n||!1,r.click(function(e){e.preventDefault(),i.toggleClass(a),r.toggleClass(o),n&&s.toggleClass(l)}),s.click(function(e){u(e.target).closest(r.add(i)).length||c()}),t.click(function(){c()})},toggleVisibility:function(e,t,n){var r=u(e),i="target-active";t=t||!1,n=n||640;function a(){var e=u(this),t=u("."+e.attr("data-toggle-target"));e.toggleClass(i),t.slideToggle().toggleClass("active")}var o=debounce(function(){t?(viewport=updateViewportDimensions()).width>n?(r.off("click.toggle-visibility"),r.removeClass(i),r.each(function(){u("."+u(this).attr("data-toggle-target")).removeAttr("style").removeClass("active")})):(r.off("click.toggle-visibility"),r.on("click.toggle-visibility",a)):r.on("click.toggle-visibility",a)},150,!0);o(),t&&u(window).resize(function(){o()})},getParameterByName:function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}}}(jQuery);var SCM=SCM||{};SCM.Logging=function(){var e={debug:function(e){n()&&console.log(e)},warn:function(e){console.warn(e)},error:function(e){console.error(e)}},t=null;return{init:function(){},getLogger:function(){return e},isJsDebugEnabled:n};function n(){var e;return null!==t?t:t=(e=SCM.JSUtility.getParameterByName("JsDebug",window.location.href))&&"true"===e}}();var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},function(e,t){e.init=function(){0!==t(".brightcove-wrapper video.video-js, .brightcove-player").length&&t.getScript("https://players.brightcove.net/1611106596001/BkMnETZOZ_default/index.min.js",function(){}),0!==t(".brightcove-wrapper-audio video.video-js").length&&t.getScript("https://players.brightcove.net/1611106596001/ryQZHF29_default/index.min.js",function(){})}}(SCM.Utilities.Brightcove=SCM.Utilities.Brightcove||{},jQuery);var SCM=SCM||{};!function(t,n){function r(e){var t=location.hostname,e=e.hostname;return 0<e.length&&e!=t}t.trackOnPageEvent=function(e){e="ev="+encodeURIComponent(e);"undefined"!=typeof ntptEventTag&&ntptEventTag(e)},t.trackRelatedLinkEvent=function(e){"undefined"!=typeof ntptEventTag&&ntptEventTag("event_type=RELATEDLINKS")},t.trackSelfServePageEvents=function(){n(document).on("click",".widget-SelfServeContent a",function(){r(n(this).get(0))&&t.trackOnPageEvent("self-serve-external-link-"+n(this).attr("href"))})},t.trackArticlePageEvents=function(){var e=n(document);e.on("click","a.article-pdfLink",function(){t.trackOnPageEvent("article-pdf")}),e.on("click",".st-split-view",function(){t.trackOnPageEvent("article-view-split-view")}),e.on("click","a.standard-view",function(){t.trackOnPageEvent("article-view-standard-view")}),e.on("click","li.article-content-filter",function(){t.trackOnPageEvent("article-view-"+n(this).attr("data-content-filter"))}),e.on("click","#Toolbar .toolboxGetAlertsWidget",function(){t.trackOnPageEvent("article-alerts")}),e.on("click","#Sidebar .widget-alerts .getAlertsLink",function(){t.trackOnPageEvent("article-email-alerts-"+n(this).text())}),e.on("click","ul.addthis_toolbox > li > a",function(){t.trackOnPageEvent("article-share-"+n(this).attr("title"))}),e.on("click","ul#ToolsDrop > li > div.widget",function(){var e=null;n(this).hasClass("widget-ToolboxGetCitation")?e="article-tools-GetCitation":n(this).hasClass("widget-ToolboxPermissions")&&(e="article-tools-GetPermission"),t.trackOnPageEvent(e)}),e.on("click","#getCitation.reveal-modal ul > li > a",function(){t.trackOnPageEvent("article-tools-GetCitation-"+n(this).text())}),e.on("click",".info-card-author .info-card-search a",function(){t.trackOnPageEvent("article-author-search-"+n(this).text())}),e.on("click",".widget-ArticleJumpLinks .section-jump-link .scrollTo",function(){t.trackOnPageEvent("article-section-link-"+n(this).text())}),e.on("click",".fig-section .fig-link, .fig-section .fig-view-orig",function(){t.trackOnPageEvent("article-figure-view-"+n(this).closest(".fig-section").attr("data-id"))}),e.on("click",".fig-section .download-slide",function(){t.trackOnPageEvent("article-figure-download-"+n(this).closest(".fig-section").attr("data-id"))}),e.on("click",".st-download-images-ppt",function(){t.trackOnPageEvent("article-figure-download-all")}),e.on("click",".widget-ArticleDataSupplements .dataSuppLink",function(){t.trackOnPageEvent("article-data-supplement-"+n(this).href)}),e.on("click",".widget-ArticleTopInfo .citation-doi a, .widget-ArticleFulltext a, .widget-RelatedPubMed a",function(){r(n(this).get(0))&&(n(this).parents(".citation-links").length?t.trackOnPageEvent("article-external-link-"+n(this).text()):t.trackOnPageEvent("article-external-link-"+n(this).attr("href")))}),e.on("click",".st-article-history",function(){t.trackOnPageEvent("article-history")}),e.on("click","#Sidebar .widget-ArticleLevelMetrics .artmet-modal-trigger",function(){t.trackOnPageEvent("article-metrics")}),e.on("click","#Sidebar .widget-ArticleCitedBy .article-cited-link-wrap a",function(){t.trackOnPageEvent("article-citation-"+n(this).text())})},t.trackBookPageEvents=function(){var e=n(document);e.on("click",".widget-BookChapterMainView a.article-pdfLink",function(){NTPT_PGEXTRA=NTPT_PGEXTRA.replace("event_type=full-text","event_type=full-text.pdf"),t.trackOnPageEvent("full-text.pdf")}),e.on("click",".js-seeAlso-link",function(){t.trackRelatedLinkEvent()})},n(function(){n(".pg_article").length&&t.trackArticlePageEvents(),n(".pg_ChapterStandard").length&&t.trackBookPageEvents()})}(SCM.ScholarlyiQ=SCM.ScholarlyiQ||{},jQuery),SCM.ArticleListNewAndPopular={registerArticleListNewAndPopularCombinedMode:function(){$(".articleListNewAndPopular-mode").each(function(){var i=$(this);i.on("click",function(e){e.preventDefault(),$(".articleListNewAndPopular-mode").removeClass("active");var t=i.data("mode");$('.articleListNewAndPopular-mode[data-mode="'+t+'"]').addClass("active");var n,r=$(".articleListNewAndPopular-ContentView-"+t);r.hasClass("hasContent")||(e=function(e){var t,e=$(e).attr("class");0<=e.indexOf("widget-instance-")&&(t=e.substr(e.indexOf("widget-instance-")).split("-")[2]);return t}(".widget-ArticleListNewAndPopular"),n=r,e=e,$.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/PlatformArticle/ArticleListNewAndPopularContent/"+(e.length?"/"+e:""),cache:!1,data:{mode:t},dataType:"html",success:function(e){n.html(e)}}),r.addClass("hasContent")),$('section[class*="articleListNewAndPopular-ContentView-"]').hide(),r.removeClass("hide"),r.show()})})}},SCM.CitationModal={registerCitationModalEvents:function(e){var t="#"+e;$(document.body).on("click",'[data-reveal-id="'+e+'"]',function(e){$(t).foundation("reveal","open")}),$(document.body).on("opened.fndtn.reveal",t,function(){$("select[class='citation-download-format']").prop("selectedIndex",0),$(".citation-download-link").addClass("disabled"),$(".citation-download-format").focus()}),$(document.body).on("closed.fndtn.reveal",t,function(){$(".js-cite-button").focus()})},enableCitationDownloadOnFormatSelect:function(){$(document.body).on("change",".citation-download-format",function(e){$(".citation-download-link").removeClass("disabled")})}};var SCM=SCM||{};SCM.NavDropdown=function(){var o=930;return{registerNavDropdownEvents:function(){var r=!1,i=null,a=null;$(".js-nav-dropdown, .mobile-nav-arrow").on("click",function(e){e.preventDefault(),e.stopPropagation(),SCM.Toolbar.closeHypothesis();var t=$(this);i=t.siblings(".site-menu"),a=t,$(window).width()>o?($(".site-menu-item .site-menu").not(i).css("display","none"),$(".js-nav-dropdown").not(a).attr("aria-expanded","false")):((t=(t=e=t).hasClass("mobile-nav-arrow")?e:e.siblings(".mobile-nav-arrow")).toggleClass("icon-general_arrow-down"),t.toggleClass("icon-general_arrow-up")),i.slideToggle("fast",function(){r=$(this).is(":visible")?($(this).css("display","block"),a.attr("aria-expanded","true"),!0):(a.attr("aria-expanded","false"),!1)})}),$(document.body).on("click",function(e){r=r&&s(e,a,i)}),$(document.body).on("keyup",function(e){var t,n;r&&(n=a,"Escape"!=(t=e).key&&"Esc"!=t.key||($(".site-menu-item .site-menu").css("display","none"),$(".js-nav-dropdown").attr("aria-expanded","false"),n.focus()),r=s(e,a,i))})}};function s(e,t,n){return!(0===n.has(e.target).length&&$(window).width()>o)||($(n).css("display","none"),t.attr("aria-expanded","false"),!1)}}();var SCM=SCM||{};SCM.StickyToolbarHelper=(SCM.StickyToolbarHelper=SCM.StickyToolbarHelper||{},{getStickyToolbarHeight:function(){return 0<$(".js-mobile-nav:visible").length?$(".js-mobile-nav-sticky").outerHeight():0<$(".js-sticky-toolbar").length&&0==$(".js-left-nav-col.mobile").length?55:0}});var SCM=SCM||{};SCM.ElementManager=function(){return{elementContainsClass:n,elementComparator:function(e,t){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;t=e.compareDocumentPosition(t);return t&Node.DOCUMENT_POSITION_FOLLOWING||t&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:t&Node.DOCUMENT_POSITION_PRECEDING||t&Node.DOCUMENT_POSITION_CONTAINS?1:0},createElement:function(e,t,n){var r=document.createElement(e);if(Array.isArray(t))n=t;else if(t)for(var i in t)i.startsWith("on")?r.addEventListener(i.substring(2),t[i]):r.setAttribute(i,t[i]);if(n)for(var a=0;a<n.length;a++){var o=n[a];o&&(o.nodeType?r.appendChild(o):r.appendChild(document.createTextNode(o.toString())))}return r},elementRemoveClass:function(e,t){n(e,t)&&(e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim())},elementAddClass:function(e,t){n(e,t)||(e.className=e.className+" "+t)},getFirstElementByClassName:function(e,t){t=e.getElementsByClassName(t);if(0<t.length)return t[0]},getElementsByClass:i,getElementsByClassList:r,getElementAtTop:function(e){var t=$(window);if(e&&e.length){var n,r=t.scrollTop()+60,i=0,a=e.length-1,o=$(e[0]),s=o.offset().top-parseInt(o.css("marginTop").replace("px",""));if(!(r<s)){for(;i<=a;){var l=Math.floor((i+a)/2);if(o=$(e[l]),s=o.offset().top-parseInt(o.css("marginTop").replace("px","")),n=o.offset().top+o.height(),i===a||s<=r&&r<=n){for(var c=l;l!=a&&s<=r;)l=c,c+=1,o=$(e[c]),s=o.offset().top,n=s+o.height();return{elem:e[l],idx:l}}if(r<s)a=l-1;else{if(!(n<r))return{elem:o[0],idx:l};i=l+1}}return{elem:e[Math.min(a,e.length-1)],idx:Math.min(a,e.length-1)}}}},removeElements:a,removeElementsByClass:function(e,t){a(i(e,t))},removeElementsByClassList:function(e,t){a(r(e,t))}};function n(e,t){return!!e&&-1<(" "+e.className+" ").indexOf(" "+t+" ")}function i(e,t){t=e.getElementsByClassName(t);return 0<t.length?Array.prototype.slice.call(t,0):[]}function r(e,t){if(!t)return[];for(var n=[],r=0;r<t.length;r++)n=n.concat(i(e,t[r]));return n}function a(e){for(var t=0;t<e.length;t++)null!=e[t].parentNode&&e[t].parentNode.removeChild(e[t])}}();var SCM=SCM||{};SCM.SplitScreenHelper=function(o,r){return{isArticlePage:i,positionSplitScreenBasedOnStandardView:function(e,t){var n=$("#split-view-scroll-pane");e?i()?function(e,t,n){o.elementContainsClass(e,"js-splitscreen-backreferences-title")||o.elementContainsClass(e,"js-splitview-ref-list")?(n.scrollTop(0),$(".js-References-tab-trigger").click()):o.elementContainsClass(e,"js-splitscreen-backnotes-title")||o.elementContainsClass(e,"js-splitscreen-footnotegroup-title")||o.elementContainsClass(e,"js-splitscreen-backfootnotegroup-title")||o.elementContainsClass(e,"footnote")?(n.scrollTop(0),$(".js-Notes-tab-trigger").click()):s(e)||l(e)||c(e)||u(e)?(n.scrollTop(0),$(".js-FiguresTables-tab-trigger").click()):(t=document.getElementById(t+"-sv").offsetTop,n.scrollTop(t))}(e,t,n):function(e,t){if(o.elementContainsClass(e,"section-type--references")||o.elementContainsClass(e,"js-splitview-ref-list")||d(e,"js-splitview-ref-list"))t.scrollTop(0),$(".js-References-tab-trigger").click();else if(o.elementContainsClass(e,"js-footnotes-target")||o.elementContainsClass(e,"js-end-notes-target")||o.elementContainsClass(e,"js-splitscreen-backnotes-title")||o.elementContainsClass(e,"js-splitscreen-footnotegroup-title"))t.scrollTop(0),$(".js-Notes-tab-trigger").click();else if(s(e)||d(e,"fig-section")||l(e)||d(e,"audio")||c(e)||d(e,"video")||u(e))t.scrollTop(0),$(".js-FiguresTables-tab-trigger").click();else if(o.elementContainsClass(e,"widget-ChapterAbstract")){var n=o.getElementsByClass(t[0],"widget-ChapterAbstract");t.scrollTop(n[0].offsetTop)}else if(o.elementContainsClass(e,"content-section-header")){for(var r=o.getElementsByClass(t[0],"content-section-header"),i=0;i<r.length;i++)if(r[i].dataset.magellanDestination===e.dataset.magellanDestination)return t.scrollTop(r[i].offsetTop)}else for(var a=o.getElementsByClassList(t[0],["js-content-section","js-splitscreen-section-title"]),i=0;i<a.length;i++)if(a[i].dataset.statsid===e.dataset.statsid)return t.scrollTop(a[i].offsetTop)}(e,n):n.scrollTop(0)},positionStandardViewBasedOnSplitScreen:function(e,t){e?i()?function(e){var t=r.getStickyToolbarHeight();e?$(window).scrollTop($("#"+e.slice(0,-3)).offset().top-t):$(window).scrollTop(0)}(t):function(e){var t=$(".js-content-body"),n=r.getStickyToolbarHeight();o.elementContainsClass(e,"widget-ChapterAbstract")?(t=o.getElementsByClass(t[0],"widget-ChapterAbstract"),$(window).scrollTop(t[0].offsetTop)):o.elementContainsClass(e,"content-section-header")?$(window).scrollTop($("#"+e.dataset.magellanDestination).offset().top-n):o.elementContainsClass(e,"content-section-header")||e?$(window).scrollTop($("#"+e.dataset.statsid).offset().top-n):$(window).scrollTop(0)}(e):$(window).scrollTop(0)},removeDuplicateItemsBasedOnId:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].firstChild.id;t.indexOf(r)<0?t.push(r):(e.splice(n,1),n--)}},getRightRailWithoutSpecifiedWidgets:function(e){var t=$(".page-column--right").clone();return o.removeElementsByClassList(t[0],e),t.removeAttr("id"),t.removeClass("page-column page-column--right"),t[0]},scrollToNoteInSplitView:function(e,t){if(null!=e){var n=null;e=$(e).hasClass("js-xref-fn")?$(e).attr("reveal-id"):$(e).attr("legacysectionid");e=$('.split-view-notes [content-id = "'+e+'"]');if(e.length){n=e.find(".fn");for(var r=o.getElementsByClassList(t,["js-footnotes-target","js-end-notes-target","footnote"]),i=0;i<r.length;i++){var a=$(r[i]).find(n);if(a.length)return t.switchTo(),t.scrollTop=0,void(t.scrollTop=a.offset().top-50)}}}},scrollToRefInSplitView:function(e,t){for(var n=o.getElementsByClass(t,"js-splitview-ref-item"),r=0;r<n.length;r++)if(n[r].attributes["content-id"].textContent===e)return t.switchTo(),void(t.scrollTop=n[r].offsetTop)},registerXrefClicks:function(){$(".location-right-pane").on("click",".js-xref-sec",function(e){e.stopPropagation();e=$(".location-left-panel");e.length&&a(this,e[0])})},findXref:a,updatePageNumberCss:function(){var e=$(".dynamic-widget-inner-wrap:visible").find(".js-page-icon");e.length&&($(".js-sv-references").children().addClass("page-relative"),$(".js-sv-notes").children().addClass("page-relative"),e.each(function(e){$(icon).parent().addClass("page-icon-adjust")}))},adjustToolbarMargins:function(){$(".js-sv-header .toolbar-item").css("margin-right","1.25em")},registerMetricsClicks:function(){$(".location-right-pane").off("click",".js-contentmet-modal-trigger, .js-contentmet-views, .js-contentmet-citations"),$(".location-right-pane").on("click",".js-contentmet-modal-trigger, .js-contentmet-views, .js-contentmet-citations",function(e){$("#sv_main:visible").length&&(e.stopPropagation(),n(".js-contentmet-modal-trigger",!1))}),$(".location-right-pane").off("click",".js-artmet-modal-trigger, .artmet-condensed-stats .artmet-views"),$(".location-right-pane").on("click",".js-artmet-modal-trigger, .artmet-condensed-stats .artmet-views",function(e){$("#sv_main:visible").length&&(e.stopPropagation(),n(".js-artmet-modal-trigger",!0))}),$(".location-right-pane").off("click",".js-contentmet-close-modal, .js-artmet-close-modal"),$(".location-right-pane").on("click",".js-contentmet-close-modal, .js-artmet-close-modal",function(e){t($(e.target)===$(".js-artmet-close-modal"))}),$(".location-right-pane .js-contentmet-modal").off("click"),$(".location-right-pane .js-contentmet-modal").on("click",function(e){$(e.target).closest(".location-right-pane .artmet-modal-contents").length||t(!1)}),SCM.ContentMetric.reloadDimensionsBadge()}};function i(){return 0<$(".widget-ArticleFulltext").length}function s(e){return o.elementContainsClass(e,"table-wrap")}function l(e){return o.elementContainsClass(e,"js-splitscreen-figure-title")||o.elementContainsClass(e,"fig-section")}function c(e){return o.elementContainsClass(e,"js-splitscreen-audio-title")||o.elementContainsClass(e,"audio")}function u(e){return o.elementContainsClass(e,"js-splitscreen-video-title")||o.elementContainsClass(e,"video")}function d(e,t){return o.elementContainsClass(e.firstElementChild,t)}function t(e){e?ArtMetric.closeModal():SCM.ContentMetric.closeModal($(".location-right-pane .artmet-modal-contents"))}function n(e,t){var n,r=$(".location-right-pane "+e),e=$(".location-right-pane .artmet-modal-contents");t?(n=null!==(n=r.attr("data-article-id"))&&void 0!==n?n:r.attr("data-resource-id"),ArtMetric.triggerModal(e,n)):(n=r.attr("data-resource-id"),r=r.attr("data-resource-type"),SCM.ContentMetric.triggerModal(e,n,r))}function a(e,t){var n=$(".content-panel");if(n.length){for(var r=e.attributes.href.textContent.substring(1),i=t.querySelectorAll(".disp-formula, .statement"),a=0;a<i.length;a++)if(i[a].attributes["content-id"].textContent===r){var o=i[a].attributes.class.textContent;if("disp-formula"===o)return void(n[0].scrollTop=i[a].parentNode.offsetTop);if("statement"===o)return void(n[0].scrollTop=i[a].offsetTop)}for(var s=t.querySelectorAll(".section-title[data-legacy-id]"),a=0;a<s.length;a++)if(s[a].attributes["data-legacy-id"].textContent===r)return void(n[0].scrollTop=s[a].offsetTop);t=t.querySelectorAll("[data-id="+r+"]");t.length&&(n[0].scrollTop=t[0].offsetTop)}}}((SCM.SplitScreenHelper=SCM.SplitScreenHelper||{},SCM.ElementManager),SCM.StickyToolbarHelper);var SCM=SCM||{};SCM.SplitScreenContentsToc=function(c,u){return{handleJumpLinks:function(e,t){var n=e.attributes.href.textContent.substring(1);if("sectionType"in e.dataset){if(-1!==e.dataset.sectionType.indexOf("js-splitscreen-backreferences-title")||-1!==e.dataset.sectionType.indexOf("js-splitscreen-reference-target"))return void t.ReferencesTab.switchTo();if(-1!==e.dataset.sectionType.indexOf("backnotes-title")||-1!==e.dataset.sectionType.indexOf("js-splitscreen-backfootnotegroup-title")||-1!==e.dataset.sectionType.indexOf("js-footnotes-target")||-1!==e.dataset.sectionType.indexOf("js-end-notes-target")){e=e.dataset.sectionType.split(" "),e=c.getElementsByClassList(t.NotesTab,e);return t.NotesTab.switchTo(),t.NotesTab.scrollTop=0,void(t.NotesTab.scrollTop=$(e).offset().top-50)}}n=document.getElementById(n+"-sv");n&&(t.Content.scrollTop=n.offsetTop)},setDataSectionTypeForJumpLinks:function(e,t){var n=document.createDocumentFragment();n.appendChild(e);for(var r=t.getElementsByClassName("js-jumplink"),i=0;i<r.length;i++){var a,o=r[i],s=o.attributes.href.textContent.substring(1);"endNotesTargetLocation"==s&&(a=c.getFirstElementByClassName(document,"js-end-notes-target"),o.dataset.sectionType=a.className);s=n.querySelector("[id='"+s+"-sv']");s&&(o.dataset.sectionType=s.className)}},highlightSectionTitle:function(o){var s,l;return function(e){var t,n,r=o.Content.scrollTop;for(t in l=l||function(e){for(var t={},n=c.getElementsByClass(e,"js-jumplink"),r=0;r<n.length;r++){var i=n[r].href;i.indexOf("#")<0||(i=i.split("#").slice(-1)+"-sv",t[i]=n[r])}return t}(o.ContentsTab),s=s||function(e,t){var n;n=u.isArticlePage()?Array.prototype.concat(Array.prototype.slice.call(e.getElementsByTagName("h2"),0),Array.prototype.slice.call(e.getElementsByTagName("h3"),0)).sort(c.elementComparator):c.getElementsByClass(e,"jumpLoc-sectionId");for(var r=0;r<n.length;r++)t[n[r].id]||(n.splice(r,1),r--);return n}(o.Content,l),l)c.elementRemoveClass(l[t],"active"),c.elementRemoveClass(l[t],"at-highlighted-heading");n=o.ContentsTab,$(n).find(".js-notes-link-end-notes, .js-notes-link-chapter-footnotes").removeClass("active");for(var i=s.length-1;0<=i;i--)if(s[i].offsetTop<=r){var a=l[s[i].id];return c.elementAddClass(a||l[s[0]],"active"),void c.elementAddClass(a||l[s[0]],"at-highlighted-heading")}}}}}((SCM.SplitScreenContentsToc=SCM.SplitScreenContentsToc||{},SCM.ElementManager),SCM.SplitScreenHelper);var SCM=SCM||{};SCM.SplitScreenFiguresAndTables=function(a,t){return{runVideoJsFixups:function(e){for(var t=e.getElementsByClassName("video-js"),n=0;n<t.length;n++){var r=t[n],i=a.createElement("video",{"data-account":r.dataset.account,"data-player":r.dataset.player,"data-embed":r.dataset.embed,class:"brightcove-player video-js",controls:"","data-video-id":r.dataset.videoId});r.parentNode.replaceChild(i,r)}SCM.Utilities.Brightcove.init()},getFigures:function(e){var t=a.getFirstElementByClassName(e,"graphicalAbstract"),e=a.getElementsByClassList(e,["figure-title","fig-section","js-splitscreen-figure-title","js-sec-fig-section","js-p-fig-section"]);return function(e,t){if(e){var n=a.getFirstElementByClassName(e,"fig-section");if(n)for(var r=n.dataset.id,i=0;i<t.length;i++)if(t[i].dataset.id===r){t[i]=e;break}}}(t,e),e},getTables:function(e){e=a.getElementsByClassList(e,["js-splitscreen-tablegroup-title","table-wrap","jumpLoc-legacySectionId"]);t.isArticlePage()&&t.removeDuplicateItemsBasedOnId(e);return e},scrollInFiguresAndTablesSplitView:function(e,t){for(var n=a.getElementsByClassList(t,["figure-title","fig-section","table-wrap-title","jumpLoc-legacySectionId","video-section","audio-section"]),r=0;r<n.length;r++)if(n[r].dataset.id===e)return t.switchTo(),void(t.scrollTop=n[r].offsetTop)}}}((SCM.SplitScreenFiguresAndTables=SCM.SplitScreenFiguresAndTables||{},SCM.ElementManager),SCM.SplitScreenHelper);var SCM=SCM||{};SCM.SplitScreenLeftPane=function(s,l,c,u){return{registerLeftPaneClickAndResizeEvents:function(i,a,e,t,n){var r=$(a),o=$(e),n=$(n);r.on("click",".xref-page",function(e){e.stopPropagation();e=this.dataset.open;l.scrollToRefInSplitView(e,i.ReferencesTab)}),r.on("click",".xref-bibr",function(e){e.stopPropagation(),this.dataset.open&&(e=this.dataset.open.split(" ")[0],l.scrollToRefInSplitView(e,i.ReferencesTab))}),r.on("click",".xref-fig",function(e){e.stopPropagation(),c.scrollInFiguresAndTablesSplitView(this.dataset.open,i.FiguresAndTablesTab)}),r.on("click",".xref-default",function(e){e.stopPropagation();e=this.dataset.open;l.scrollToRefInSplitView(e,i.ReferencesTab),c.scrollInFiguresAndTablesSplitView(e,i.FiguresAndTablesTab)}),o.on("click",'.js-related-object[object-type="end-note"], .js-xref-fn',function(e){e.stopPropagation(),l.scrollToNoteInSplitView($(this),i.NotesTab)}),r.on("click",'.js-related-object[object-type="end-note"], .js-xref-fn',function(e){e.stopPropagation(),l.scrollToNoteInSplitView($(this),i.NotesTab)}),r.on("click",".js-citation-links",function(e){e.stopPropagation(),open($(this),i.NotesTab)}),r.on("click",".js-xref-sec",function(e){e.stopPropagation(),l.findXref(this,a)}),r.on("click",".js-jumplink",function(e){e.stopPropagation();for(var t=this.attributes.href.textContent.substring(1),n=a.querySelectorAll(".appendix-title[data-legacy-id]"),r=0;r<n.length;r++)if(n[r].attributes["data-legacy-id"].textContent===t)return void(i.Content.scrollTop=n[r].offsetTop)}),r.on("click",".kwd-part",function(e){var t;e.stopPropagation(),(t=e.target.dataset.keyword)&&((t=!t.startsWith('"')?'"'+t:t).endsWith('"')||(t+='"'),e='search-results?page=1&qb={"Keywords1":'+encodeURIComponent(t)+"}&SearchSourceType=1",(t=document.getElementById("hfSiteURL"))&&(e="//"+t.value+"/"+e,window.location.href=e))}),$(window).resize(function(){$(".al-author-info-wrap.open:visible").length&&$(".content-panel:visible").length&&f($(".al-author-info-wrap.open"))}),u.registerCitationModalEvents("sv-getCitation"),function(e){for(var t=e.getElementsByClassName("js-article-history"),n=0;n<t.length;n++)t[n].addEventListener("click",function(e){$(".js-history-entries-wrap").last().toggleClass("expanded")})}(e),function(e){for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.stopPropagation||(window.event.cancelBubble=!0),e.stopPropagation(),d();e=$(e.target).parent(".js-flyout-wrap").find(".al-author-info-wrap");$(".al-author-info-wrap").not(e).removeClass("open"),e.toggleClass("open").attr("tabindex","-1").focus(),$(".al-author-info-wrap").not(e).removeClass("open"),$(document.body).on("click",function(e){$(e.target).parents(".al-author-info-wrap").length||d()}),f(e)})}(function(e,t,n){e=s.getElementsByClassList(e,["linked-name","js-linked-footnotes"]);return l.isArticlePage()?e.concat(s.getElementsByClass(t,"linked-name")):e.concat(s.getElementsByClass(n,"linked-name"))}(e,a,t)),function(t){var e=s.getFirstElementByClassName(t,"meta-authors--etal");e&&e.addEventListener("click",function(e){e.target.attributes["aria-hidden"]="true",e.target.style.display="none";e=s.getFirstElementByClassName(t,"meta-authors--remaining");e&&(e.attributes["aria-hidden"]="false",e.style.display="inline")})}(e),function(e){e.on("click",".js-version-info-more-link",function(e){$(this).closest(".version-info-text").find(".js-version-info").toggleClass("hide")})}(n)}};function d(){$(".al-author-info-wrap").removeClass("open")}function f(e){var t=$(".content-panel"),t=t.position().left+t.width();SCM.SiteJS.shiftOpenAuthorCards(e,t)}}((SCM.SplitScreenLeftPane=SCM.SplitScreenLeftPane||{},SCM.ElementManager),SCM.SplitScreenHelper,SCM.SplitScreenFiguresAndTables,SCM.CitationModal);var SCM=SCM||{};!function(e,p,h,g,a,u,d,m){var v=new function(){this.StandardView=0,this.SplitView=1};function y(n,r){this.getCurrentElement=function(e){var t=e===v.StandardView?n:r,e=h.getElementAtTop(t);if(e){t=e.elem;e.idx;if(t)return t}}}function t(){var n={};this.getWidget=function(e){if(n[e])return n[e];var t=document.getElementsByClassName(e)[0];return t?n[e]=t:void 0}}var n,r,b=new function(){var l=new t,c={};function u(e,t){var n=c[e],r=n.dependencies,i=[];if(r)for(var a=0;a<r.length;a++){var o,s=r[a];c[s]?(o=u(s,t),i.push(o)):(o=l.getWidget("widget-instance-"+s)||l.getWidget("widget-"+s))?(function(e){for(var t=e.getElementsByTagName("*"),n=0;n<t.length;n++){var r=t[n];r.id&&(r.id=r.id+"-sv")}}(s=o.cloneNode(!0)),i.push(s)):i.push(document.createDocumentFragment())}n=n.render.apply(t,i);return t[e]=n}this.create=function(e){var t=document.createDocumentFragment();return t.appendChild(u(e,{})),t},this.register=function(e){c[e.name]=e}};e.WidgetStore=b,e=g.isArticlePage()?(n="ArticleFulltext",r="ArticleTopInfo","ArticleJumpLinks"):(n="BookSectionsText",r="ChapterTopInfo","BookTocSlim"),SCM.SplitScreen.init=function(){var o,s,l,c,u,d,t=function(){for(var e,t=h.getElementsByClass(document,"article-content-filter"),n=0;n<t.length;n++)"article-content"===t[n].dataset.contentFilter&&(e=t[n]);return function(){e&&e.click()}}();function f(){SCM.SplitScreen.toggleSplitView()}c=!1,u=g.isArticlePage()?(l=".widget-ArticleFulltext","pg_articlesplitview"):(l=".widget-BookSectionsText","pg_chaptersplitview"),d=h.createElement("div",{class:"math-jax-modal"},[h.createElement("p",{class:"bold"},["Mathematical content on this page is still rendering"]),h.createElement("div",{class:"spinner"}),h.createElement("p",{},["Once the process is complete you will be taken to Split View"]),h.createElement("button",{onclick:function(e){p("#math-jax-modal").foundation("reveal","close")},class:"btn"},["Cancel"])]),(e=h.createElement("div",{"data-reveal":"math-jax-load",id:"math-jax-modal",class:"reveal-modal"})).style.display="none",document.body.appendChild(e),SCM.SplitScreen.toggleSplitView=function(e){if(!1===e){if(!o)return;c=!0}else!0===e&&(c=!1);if(p(".close-reveal-modal").click(),(0<p(".MathJax_Preview").length||0<p(".display-math").length)&&!SCM.SplitScreen.IsMathJaxLoaded){e=p("#math-jax-modal");return p(document).on("closed.fndtn.reveal","[data-reveal]",function(){window.removeEventListener("MathJax.complete",f)}),e.empty().prepend(d),e.foundation("reveal","open"),void window.addEventListener("MathJax.complete",f)}var t,n,r,i,a;p("#math-jax-modal").foundation("reveal","close"),SCM.SiteJS.isFinishedAdjustRelatedTagsDisplay()?(o||(a="p,section.abstract,blockquote,div.block-child-p,div.lay-summary",t="h2,h3,h4,.js-footnotes-target,.footnote,.js-content-section",(r=p(i=l+" .widget-items")).children(a).each(function(e,t){t.id=t.id||"scroll-to-"+e}),n=p(".js-content-body"),r=r.children(a+","+t).add(r.find(".table-wrap,.fig-section,.js-splitscreen-figure-title,.audio-section,.js-splitscreen-audio-title,.video-section,.js-splitscreen-video-title,.js-splitview-ref-list")).add(n.find(p(".js-end-notes-target"))).add(n.find(p(".widget-ChapterAbstract"))),document.body.appendChild(b.create("SplitView")),m.registerArticleListNewAndPopularCombinedMode(),n=p(".location-left-panel"),i=p("#sv_main "+i).children(a+","+t).add(n.find(p(".widget-ChapterAbstract"))),s=new y(r,i),o=document.body.lastChild,window.addthis&&window.addthis.toolbox(".addthis_toolbox"),SCM.Utilities.Brightcove.init(),SCM.SiteJS.articleUserComments(!0),(a=p("#hfEnableOupOnlineProductsFeatures"))&&"true"===a.val().toLowerCase()&&SCM.RefLinks.showParagraphCitations()),t=h.getFirstElementByClassName(document,"master-container"),n=h.getFirstElementByClassName(document,"widget-SitePageFooter"),r=h.getFirstElementByClassName(document,"oup-footer"),i=c?v.SplitView:v.StandardView,a=null,""===(a=void 0!==(i=s.getCurrentElement(i))?i.id:a)&&(a=p(i).next("span").attr("id")),c?(document.body.className=document.body.className.replace(" "+u,""),t.style.display="",n.style.display="",r.style.display="",o.style.display="none",g.positionStandardViewBasedOnSplitScreen(i,a)):(t.style.display="none",n.style.display="none",r.style.display="none",document.body.className.indexOf(u)<0&&(document.body.className+=" "+u),o.style.display="",g.positionSplitScreenBasedOnStandardView(i,a),SCM.JumpLinks.registerFootNotesLink(),g.registerXrefClicks(),g.registerMetricsClicks(),SCM.Toolbar.registerAnnotateLink(),g.adjustToolbarMargins()),c=!c):window.addEventListener("adjustRelatedTagsDisplay.complete",f)},SCM.SplitScreen.isSplitView=function(){return c};var e,n=h.getFirstElementByClassName(document,"js-split-view");n&&((e=p(n)).is(":visible")||e.parent().remove(),n=function(e){e.matches?SCM.SplitScreen.toggleSplitView(!1):h.getFirstElementByClassName(document,"item-views")&&t()},(e=window.matchMedia("(max-width: 930px)")).addListener(n),n(e),p(document).on("click",".js-split-view",SCM.SplitScreen.toggleSplitView)),MathJax.Hub.Register.StartupHook("End",function(){SCM.SplitScreen.IsMathJaxLoaded=!0,window.dispatchEvent(new CustomEvent("MathJax.complete"))})},SCM.SplitScreen.WidgetStore.register({name:"ContentsTab",dependencies:[e,n],render:function(e,t){var n=this;return h.removeElementsByClass(e,"contents-title"),p(e).on("click",".js-jumplink",function(e){u.handleJumpLinks(e.currentTarget,n)}),u.setDataSectionTypeForJumpLinks(t,e),h.createElement("div",{class:"dynamic-widget-inner-wrap split-view-contents at-split-view-contents",style:"display: block;"},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"FiguresAndTablesTab",dependencies:[n],render:function(e){var t,n=a.getFigures(e),r=a.getTables(e),i=h.getElementsByClassList(e,["js-splitscreen-video-title","video-section"]),e=h.getElementsByClassList(e,["js-splitscreen-audio-title","audio-section"]),r=n.concat(r).sort(h.elementComparator);return r=(r=r.concat(i).sort(h.elementComparator)).concat(e).sort(h.elementComparator),0<n.length&&((n=document.getElementsByClassName("js-download-all-images-link")).length&&((t=n[0].cloneNode(!0)).className="js-download-all-images-link-sv",t.textContent="Download all slides",h.elementAddClass(t,"btn")),r=[h.createElement("div",{class:"download-all-ppt"},[t])].concat(r)),0<r.length?h.createElement("div",{class:"dynamic-widget-inner-wrap at-split-view-FiguresTables js-sv-figuresTables"},r):h.createElement("div",{class:"dynamic-widget-inner-wrap"})}}),SCM.SplitScreen.WidgetStore.register({name:"ReferencesTab",dependencies:[n],render:function(e){var e=h.getElementsByClassList(e,["js-splitscreen-reference-target","js-splitscreen-backreferences-title","js-splitscreen-references-title","section-type--references","js-splitview-paragraph-ref","js-splitview-ref-list"]);return(e=e.filter(function(e){return null===e.closest(".fn")})).sort(h.elementComparator),h.createElement("div",{class:"dynamic-widget-inner-wrap split-view-references at-split-view-references js-sv-references"},e)}}),SCM.SplitScreen.WidgetStore.register({name:"NotesTab",dependencies:[n,r],render:function(e){var t=h.getElementsByClassList(e,["js-splitscreen-backnotes-title","js-splitscreen-backfootnotegroup-title","js-splitscreen-footnotegroup-title","footnote","js-footnotes-target"]),e=h.getFirstElementByClassName(document,"js-end-notes-target");return 0<(t=(t=e?t.concat(e.cloneNode(!0)):t).filter(function(e){var t=!0;return t=e.classList.contains("footnote")&&(null!==e.parentElement.closest(".js-footnotes-target")||null!==e.parentElement.closest(".js-end-notes-target"))||null!=e.closest(".table-wrap-foot")?!1:t})).length?h.createElement("div",{class:"dynamic-widget-inner-wrap at-split-view-notes split-view-notes js-sv-notes"},t):h.createElement("div",{class:"dynamic-widget-inner-wrap"})}}),SCM.SplitScreen.WidgetStore.register({name:"CommentsTab",dependencies:["UserCommentBody"],render:function(e){return h.createElement("div",{class:"dynamic-widget-inner-wrap at-split-view-comments"},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"RelatedTab",dependencies:[],render:function(){return h.createElement("div",{class:"dynamic-widget-inner-wrap split-view-related at-Related-tab-content"},[g.getRightRailWithoutSpecifiedWidgets(["widget-AdBlock"])])}}),SCM.SplitScreen.WidgetStore.register({name:"Tabs",dependencies:["ContentsTab","FiguresAndTablesTab","ReferencesTab","NotesTab","CommentsTab","RelatedTab"],render:function(e,t,n,r,i,a){function o(e,t){for(var n=0;n<u.length;n++)h.elementRemoveClass(u[n],"active");h.elementAddClass(e,"active");for(var r=0;r<d.length;r++)d[r].style.display="none";t.style.display="block",g.updatePageNumberCss()}function s(e){e=e.target.parentNode;o(e,d[e.dataset.tab])}var l=0;function c(e,t,n){return h.createElement("a",{class:"tab-nav-trigger tab-nav-"+t+"Css"+(n?" active":""),"data-tab":l++},[h.createElement("i",{class:"icon-"+t+"Css"},[h.createElement("span",{class:"sr-t"})]),h.createElement("div",{class:"tab-nav-tab-name js-"+t+"-tab-trigger at-"+t+"-tab-trigger",onclick:s},[e])])}for(var u=[c("Contents","Content",!0),c("Figures & Tables","FiguresTables"),c("References","References"),c("Notes","Notes"),c("Comments","Comments"),c("Related","Related")],d=[e,t,n,r,i,a],f=0;f<d.length;f++)""===d[f].textContent.trim()?(u[f].style.display="none",d[f].switchTo=function(){}):d[f].switchTo=function(){o(this.tab,this.panel)}.bind({panel:d[f],tab:u[f]});return h.createElement("div",{class:"resources-panel"},[h.createElement("div",{class:"location-right-pane"},[h.createElement("div",{class:"dynamic-widget-module"},[h.createElement("div",{class:"tab-nav",style:"visibility: visible;"},u),h.createElement("div",{class:"resource-tabs at-splitView-resourceTabs"},d)])])])}}),SCM.SplitScreen.WidgetStore.register({name:"Content",dependencies:[n,r,"ArticleLinks","ArticleDataSupplements","ChapterAbstract","SolrResourceMetadata","ChapterVersionInformation","DrugDisclaimer","CopyrightStatement"],render:function(e,t,n,r,i,a,o,s,l){var c=h.getFirstElementByClassName(e,"graphicalAbstract");null!=c&&h.removeElements([c]),h.removeElementsByClassList(e,["fig-section","js-sec-fig-section","js-p-fig-section","figure-title","js-splitscreen-figure-title","js-splitscreen-tablegroup-title","table-wrap","js-splitscreen-backnotes-title","js-splitscreen-backfootnotegroup-title","js-splitscreen-footnotegroup-title","footnote","js-footnotes-target","js-splitscreen-video-title","video-section","js-splitscreen-audio-title","audio-section","js-splitscreen-reference-target","js-splitscreen-backreferences-title","js-splitscreen-references-title","section-type--references","js-splitview-ref-list","js-splitview-paragraph-ref"]),d.registerLeftPaneClickAndResizeEvents(this,e,t,a,o);l=[t,n,i,a,o,s,e,l];return r&&l.push(r),h.createElement("div",{class:"content-panel",onscroll:debounce(u.highlightSectionTitle(this),16),id:"split-view-scroll-pane"},[h.createElement("div",{class:"location-left-panel"},[h.createElement("div",{class:"content-inner-wrap"},[h.createElement("div",{class:"article-body"},[h.createElement("div",{class:"content active"},l)])])])])}}),SCM.SplitScreen.WidgetStore.register({name:"SwitchView",render:function(){return h.createElement("li",{class:"toolbar-item item-link"},[h.createElement("a",{class:"standard-view at-standard-view",href:"javascript:;",onclick:SCM.SplitScreen.toggleSplitView},[h.createElement("i",{class:"icon-menu_standard"}),"Standard view"])])}}),SCM.SplitScreen.WidgetStore.register({name:"PdfLink",render:function(){var e=h.getFirstElementByClassName(document,"js-item-pdf");if(e)return e.cloneNode(!0)}}),SCM.SplitScreen.WidgetStore.register({name:"Annotate",render:function(){var e=h.getFirstElementByClassName(document,"js-item-annotate");if(e)return e.cloneNode(!0)}}),SCM.SplitScreen.WidgetStore.register({name:"ShareThis",render:function(){if(e=h.getFirstElementByClassName(document,"item-share")){var e=e.cloneNode(!0),t=h.getFirstElementByClassName(e,"drop-trigger");return t&&t.addEventListener("click",function(e){e.preventDefault(),p(this).siblings("ul").slideToggle()}),e}}}),SCM.SplitScreen.WidgetStore.register({name:"ToolbarCitation",render:function(){var e=h.getFirstElementByClassName(document,"js-item-cite"),t=h.getFirstElementByClassName(e,"js-cite-button");if(e&&t){e=e.cloneNode(!0);return h.getFirstElementByClassName(e,"js-cite-button").setAttribute("data-reveal-id","sv-"+t.getAttribute("data-reveal-id")),h.removeElementsByClass(e,"js-citation-modal"),e}}}),SCM.SplitScreen.WidgetStore.register({name:"CitationModal",render:function(){var e=h.getFirstElementByClassName(document,"js-citation-modal");if(e){var t=e.cloneNode(!0);return t.id="sv-"+e.id,t}}}),SCM.SplitScreen.WidgetStore.register({name:"ToolbarPermissions",dependencies:["ToolboxPermissions"],render:function(e){return h.createElement("li",{class:"toolbar-item"},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"Toolbar",dependencies:["ToolbarCitation","CitationModal","ToolbarPermissions","PdfLink","ShareThis","SwitchView","Annotate"],render:function(e,t,n,r,i,a,o){return h.createElement("div",{class:"toolbar-wrap"},[h.createElement("div",{class:"toolbar-inner-wrap"},[h.createElement("ul",{id:"Toolbar",role:"navigation"},[r,a,o,e,t,n,i])])])}}),SCM.SplitScreen.WidgetStore.register({name:"SplitView",dependencies:["Content","Tabs","Toolbar"],render:function(e,t,n){return a.runVideoJsFixups(e),a.runVideoJsFixups(t),h.createElement("div",{class:"master-container"},[h.createElement("main",{id:"sv_main"},[h.createElement("section",{class:"master-main row"},[h.createElement("div",{class:"center-inner-row no-overflow"},[h.createElement("div",{class:"widget widget-SplitView widget-instance-SplitView_Article"},[h.createElement("div",{class:"pseudo-splitview-header js-sv-header"},[h.createElement("div",{class:"pseudo-inner-wrap"},[n])]),h.createElement("div",{class:"index-inner-wrap"},[t,e])])])])])])}})}(SCM.SplitScreen=SCM.SplitScreen||{},jQuery,SCM.ElementManager,SCM.SplitScreenHelper,SCM.SplitScreenFiguresAndTables,SCM.SplitScreenContentsToc,SCM.SplitScreenLeftPane,SCM.ArticleListNewAndPopular);var SCM=SCM||{};!function(e,a){e.ChapterEndNotes=function(){a('.js-related-object[object-type="end-note"]').on("click",function(){var e=a(this).attr("legacysectionid"),t=a('div[content-id = "'+e+'"]:visible');null!=t&&function(e,t){var n=a('#ContentTab .js-footnote-modal[legacysectionid= "'+e+'"]');n.off("opened.fndtn.reveal"),n.on("opened.fndtn.reveal",function(){a(".js-footnote-modal.open").focus()});var r=a(":focus");{var i;n.on("closed.fndtn.reveal",function(){r.focus(),a(this).find("[id^='revealContent']").html("")}),null!=t&&(i=n.find("#revealContent-"+e)).length&&""===i.html()&&i.append(t.clone())}n.foundation("reveal","open"),null!=n&&n.length&&a(window).scrollTop(n.offset().top-50)}(e,t.find(".fn"))})},e.init=function(){e.ChapterEndNotes()}}(SCM.ChapterEndNotes=SCM.ChapterEndNotes||{},jQuery);var SCM=SCM||{};SCM.Common={getQueryStringValue:function(e,t){var n=t+"=",t=e.indexOf(n);{if(-1===t)return null;t+=n.length}t=0<=e.indexOf("&",t)?(n=e.indexOf("&",t),e.substring(t,n)):e.substring(t);return t},isDefined:function(e){return void 0!==e&&null!=e}},SCM=SCM||{},SCM.QueryBuilder={},SCM.QueryBuilder.defaults={runSearch:function(e){window.location.hash="#"+e},beforeSearch:function(){}},SCM.QueryBuilder.configure=function(){function r(e){var t=e,e=t.closest(".querybuilder-instance");t.hasClass("filter-citation")?(e.find(o).addClass("hide"),e.find(s).removeClass("hide")):(e.find(s).addClass("hide"),e.find(o).removeClass("hide"))}function n(e){!function(e){var t=e;if(t.hasClass("citation-input")){var n=t.val().replace(/\'/g,"").trim().length,r=t.val().replace(/\'/g,"").trim().length,e=t.val().replace(/\'/g,"").trim().length,t=t.val().replace(/\'/g,"").trim().length;return 0<n||0<r||0<e||0<t?!0:(0!==n||0!==r||0!==e||0!==t)&&void 0}var i=!0;return l.each(function(){if(!$(this).hasClass("hide")&&0===$(this).find(".querybuilder-input").val().replace(/\'/g,"").trim().length)return i=!1}),i}(e)?c.removeClass("valid").attr("disabled"):c.addClass("valid").removeAttr("disabled")}var t,e=$(".querybuilder-filter"),i=$(".querybuilder-filter-current-wrap"),a=$(".querybuilder-filter-dropdown"),o=$(".querybuilder-input-standard"),s=$(".querybuilder-input-citation"),l=$(".querybuilder-instance"),c=$(".querybuilder-add");function u(e,t){$(".sort-order-list").addClass("hide"),t.stopPropagation();e=e.find(a);a.not(e).addClass("hide"),e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")}function d(e){var t=e.closest(".querybuilder-filter-dropdown");$thisLabel=e.closest(i).find(".querybuilder-filter-label"),t.children(e).removeClass("selected"),e.addClass("selected"),$thisLabel.text(e.text()),r(e);var n=e.parents(".querybuilder-instance").attr("id");$("#search-errors li").each(function(){var e=$(this);e.attr("from")===n&&e.remove()}),e.hasClass("filter-citation")?f(e.closest(".querybuilder-instance").attr("id"),!1):f(e=function(){var e=null;return l.each(function(){if(!$(this).hasClass("hide")&&!$(this).find(s).hasClass("hide"))return e=$(this).attr("id"),!1}),e}(),null===e)}function f(n,r){l.each(function(){var e=l.attr("id"),t=$(this).find("li[data-fieldname='Citation']");e===n&&null!==n||(r?t.show():t.hide())})}function p(){var e="";if(0<$(".js-custom-queryBuilder").length)e=SCM.CustomQueryBuilder.queryBuilderHandler();else{var f=$("#hfCurrentSearchTerm").val(),t=(p=$(".querybuilder-submit").attr("data-current-url")).split("&"),p=(t=$.grep(t,function(e,t){return e.split("=")[0].indexOf("fd_IsLatestEdition")<0})).join("&"),h=new Object,g=1,m=!1,n=$("#search-errors");function v(e,t){var n,r="";return 0<=t.indexOf("q=")?((n=SCM.Common.getQueryStringValue(t,"q")).startsWith("(")||(r="("),r=n.endsWith(")")?r+n.slice(0,-1)+" AND "+e+")":r+n+" AND "+e+")",t.replace(n,r)):"q="+e+"&"+t}function r(e){var r=$("<ul>");n.append(r),$.each(e,function(e,t){var n;r.append((n=t,(t=$("<li>")).text(n.message),t.attr("from",n.origin),t))})}var y=[];if(n.empty(),$(".querybuilder-wrap .querybuilder-instance").each(function(e){var a=$(this);if(!a.hasClass("hide")){var t=a.find("#instance_QueryBuilderSearchTerm");t=(t=(0===t.length?a.find(".querybuilder-input"):t).val().trim()).replace(/\"/g,"");var n=a.find(".querybuilder-filter-dropdown li.selected").text(),r=a.find(".querybuilder-filter-dropdown li.selected").attr("data-fieldname"),i=!1;if(1===g){var o,s=encodeURIComponent(t);if(null==r||""===$.trim(r)||""===s)return encodeURIComponent(f)!==s&&(p=0<=(o=p.indexOf("q="))&&0<=p.indexOf("&",o)?null!==(o=SCM.Common.getQueryStringValue(p,"q"))&&""!==o?p.replace(o="q="+o+"&","q="+s+"&"):"q="+s+"&"+p:"q="+s+"&"+p),h.q=s,m=!0,""===s?p=p.replace("q=&",""):g++,!0;s=SCM.Common.getQueryStringValue(p,"q");null!==s&&""!==s?p=p.replace(s="q="+s+"&",""):h=new Object,i=!0}switch(n){case"":var l,c="q"+g;""!==t&&(p=v(l=t,p),h[c]=encodeURIComponent(l),m=!0);break;case"All":""!==t&&(l=encodeURIComponent(t),p=v(l,p),(1===g&&i||1!==g)&&(h["All"+g]=l,m=!0));break;case"Citation":var u={},d="Citation"+g;$.each([{id:"#instance_CitationYear",field:"Year",pattern:/^(?!0(0?){3})\d(\d?){3}$/,message:"The 'Year' field only accepts numbers."},{id:"#instance_CitationVolume",field:"Volume"},{id:"#instance_CitationIssueNo",field:"IssueNo"},{id:"#instance_CitationPage",field:"StartPage"}],function(e,t){var n,r=a.find(t.id),i=r.val().trim();null!==(n=i)&&""!==n&&void 0!==n&&(h[d]||(h[d]=u,m=!0),t.pattern&&!t.pattern.test(i)?(r.val(""),-1===$.inArray(t.message,y)&&y.push({message:t.message,origin:"qbInstance"+g})):u[t.field]=i)});break;default:""!==t&&(l=t,h[r+g]=encodeURIComponent(l),m=!0)}}g++}),0<y.length)return r(y),void $("#queryBuilderSubmit").addClass("btn-green").removeAttr("style");var i=SCM.Common.getQueryStringValue(p,"page");"page=1"===p&&(p="&page=1"),e=p=null!==i&&""!==i?p.replace("page="+i+"&","page=1&"):p,m&&(t=JSON.stringify(h),e=(i=SCM.Common.getQueryStringValue(p,"qb"))?e.replace(i,t):e+"&qb="+t)}SCM.QueryBuilder.defaults.beforeSearch(),SCM.QueryBuilder.defaults.runSearch(e)}(t=jQuery)(".querybuilder-instance").each(function(){var e;t(this).hasClass("hide")||void 0!==(e=t(this).find("[id^=operator-]"))&&0<e.length&&t(this).find("[id^="+e.val().toLowerCase()+"Op-]").prop("checked",!0)}),e.each(function(){var e=t(this);e.hasClass("selected")&&(e.closest(i).find(".querybuilder-filter-label").text(e.text()),r(e))}),i.off("click").on("click",function(e){u($(this),e)}),i.off("keydown").keydown(function(e){13==e.which&&u($(this),e)}),$(document).on("click",function(){a.addClass("hide")}),e.on("click",function(){d($(this))}),e.keydown(function(e){13==e.which&&d($(this))}),$(".citation-input").on("keyup",function(){$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style"),n($(this))}),c.on("click",function(){var e,t,n;$(this).attr("disabled")?alert("A value must be entered before adding another filter."):(e=1,l.each(function(){$(this).hasClass("hide")||e++}),t=$("#qbInstance"+e),void 0!==(n=$("#operators-qbInstance"+e))&&0<n.length&&(n.removeClass("hide"),$("#andOp-qbInstance"+e).prop("checked",!0)),t.removeClass("hide"),c.removeClass("valid").attr("disabled",""))}),$(".querybuilder-submit").on("click",function(){$(this).removeClass("btn-green").attr("style","opacity: 0.3;")}),$(".querybuilder-wrap").on("keyup","input.citation-input.citation-year",function(e){e=$(e.target);4<e.val().length&&e.val(e.val().substr(0,4))}),$(".js-main, .js-querybuilder-wrap").off("click").on("click",".querybuilder-submit",function(){p()}),$(".querybuilder-input").off("keyup").keyup(function(e){var t=e.key;if("Enter"!==t)$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style"),n($(this));else if(e.preventDefault(),""!==$.trim($(this).val()))return p(),!1})},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.indexOf(e,t=t||0)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;e=n.lastIndexOf(e,t);return-1!==e&&e===t});var SCM=SCM||{};function getQueryStringValue(e,t){var n=t+"=",t=e.indexOf(n);return-1===t?null:0<=e.indexOf("&",t+=n.length)?(n=e.indexOf("&",t),e.substring(t,n)):e.substring(t)}function isDefined(e){return void 0!==e&&null!=e&&""!==e}function jsonToQueryString(t){return Object.keys(t).filter(function(e){return isDefined(e)}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}SCM.JournalCitationFilter=function(u){var d="f_JournalDisplayName",f="rg_IssuePublicationDate",p="f_Volume",h="f_IssueNo",g="f_StartPage",e=null,t=null,n=null,r=null,i=null,m=null,v=null,y=null,b=null,w=null,S=null,x=null,C=null,k=null,a=null,o=null,j=null,M=null,A=null,T=null,I=null,E=null,$=null,_=null,R=null,F=null;function s(){var e=document.getElementById("hfJournalCitationFilterLoaded");return!(!e||!e.value)}function l(e,t){return t=t||"",(document.getElementById(e)||{}).value||t}function c(){o.classList.remove("collapsed"),-1!==a.className.indexOf("icon-general-arrow-filled-right")&&(a.classList.remove("icon-general-arrow-filled-right"),a.classList.add("icon-general-arrow-filled-down"))}return{init:function(){s()&&(e=getQueryStringValue(location.search,d),t=getQueryStringValue(location.search,f),n=getQueryStringValue(location.search,p),r=getQueryStringValue(location.search,h),i=getQueryStringValue(location.search,g),m=document.getElementById("SelectedJournal"),v=document.getElementById("Citation_IssuePublicationDate"),y=document.getElementById("Citation_Volume"),b=document.getElementById("Citation_IssueNo"),w=document.getElementById("Citation_StartPage"),S=isDefined(v)?v.getAttribute("pattern"):null,x=isDefined(y)?y.getAttribute("pattern"):null,C=isDefined(b)?b.getAttribute("pattern"):null,k=isDefined(w)?w.getAttribute("pattern"):null,a=document.getElementsByClassName("js-journal-citation-filter-toggle")[0],o=document.getElementsByClassName("journal-citation-filter-input-wrap")[0],j=l("Config_PlaceholderTextJournal"),M=l("Config_PlaceholderTextYear"),A=l("Config_PlaceholderTextVolume"),T=l("Config_PlaceholderTextIssueNo"),I=l("Config_PlaceholderTextStartPage"),E=l("Config_ValidationMessageJournal"),$=l("Config_ValidationMessageYear"),_=l("Config_ValidationMessageVolume"),R=l("Config_ValidationMessageIssueNo"),F=l("Config_ValidationMessageStartPage"),!0===function(){if(isDefined(e)&&isDefined(m)||isDefined(t)&&isDefined(v)||isDefined(n)&&isDefined(y)||isDefined(r)&&isDefined(b)||isDefined(i)&&isDefined(w))return v.value=function(e){if(!isDefined(e))return"";var t=decodeURIComponent(e).split("TO").map(function(e){return e.replace("+","")});return e=0<t.length?t[0]:e,new Date(e).getUTCFullYear()}(t),y.value=n,b.value=r,w.value=i,!0;return!1}()&&c())},applyFilter:function(e,t){var n,r,i,a,o;if(!(c=(n=isDefined(m)&&0<m.options.length&&isDefined(m.options[m.selectedIndex])?m.options[m.selectedIndex].textContent:"",r=isDefined(v)?v.value:"",i=isDefined(y)?y.value:"",a=isDefined(b)?b.value:"",o=isDefined(w)?w.value:"",l={},c="",n===j&&""!==n?c=E+"\n":""!==n&&(l[d]=u.trim(n)),r!==M&&""!==r&&(n=new RegExp(S),isNaN(r)||!n.test(r)?c+=$+"\n":l[f]="01/01/"+r+" TO 12/31/"+r),i!==A&&""!==i&&(new RegExp(x).test(i)?l[p]=i:c+=_+"\n"),a!==T&&""!==a&&(new RegExp(C).test(a)?l[h]=a:c+=R+"\n"),o!==I&&""!==o&&(new RegExp(k).test(o)?l[g]=o:c+=F+"\n"),0<c.length?(alert(c),!1):l)))return!1;var s,l=jsonToQueryString(c),e=(c=(c=e).split("&"),s=[d,f,p,h,g,"page"],(c=c.filter(function(e){e=e.split("=")[0];return s.indexOf(e)<0})).push("page=1"),c.join("&").trim()),c="",l=l;return e&&(l+="&"+e),(c=t?t.split("&").filter(function(e){e=e.split("=")[0];return"dateFilterType"===e||"noDateTypes"===e}).join("&").trim():c)&&(l+="&"+c),c={queryString:l},void 0!==(l=u("#hfSiteURL"))&&""!==l.val()&&(SCM.SearchResults.defaults.baseSiteUrl=l.val()),SCM.SearchResults.doSolrSearch(c),!1},toggleWidget:function(){-1!==o.className.indexOf("collapsed")?c():(o.classList.add("collapsed"),-1!==a.className.indexOf("icon-general-arrow-filled-down")&&(a.classList.remove("icon-general-arrow-filled-down"),a.classList.add("icon-general-arrow-filled-right")))},journalCitationFilterLoaded:s}}(jQuery),$(document).ready(function(){function t(){var e=$(".js-journal-citation-filter-update").data("searchUri"),t=window.location.search;t.length&&(t=t.substring(1)),SCM.JournalCitationFilter.applyFilter(e,t)}function n(){$(document).ajaxStart(function(){$(".info-inner-cover").removeClass("uncovered"),$(".info-inner-cover").addClass("covered")}),$(document).ajaxComplete(function(){$(".info-inner-cover").removeClass("covered"),$(".info-inner-cover").addClass("uncovered")})}SCM.JournalCitationFilter.journalCitationFilterLoaded()&&(SCM.JournalCitationFilter.init(),$(document).on("click",".js-journal-citation-filter-update",function(){$(this).addClass("fade"),n(),t()}),$(document).on("keyup",".js-advanced-citation-filter-field",function(e){13===e.keyCode&&(e.preventDefault(),$(".js-journal-citation-filter-update").addClass("fade"),n(),t())}),$(document).on("click",".js-journal-citation-filter-toggle",function(){SCM.JournalCitationFilter.toggleWidget()}),$(document).on("keyup change",".js-advanced-citation-filter-field",function(){$(".js-journal-citation-filter-update").removeClass("fade")}))});var SCM=SCM||{};SCM.ArticleImageDetails=function(a){var t,r=null;function o(){a("body").toggleClass("modalOpen")}function i(){a("."+r+", .figureModal .close").on("click",e),a(".js-item-image").first().on("click",c),a(".js-item-image").last().on("click",c),a(".js-previous-image-details, .js-next-image-details").on("click",u),a(".figureModalContainer").on("click",p)}function n(){a("."+r+", .figureModal .close").off("click",e),a(".js-item-image").first().off("click",c),a(".js-item-image").last().off("click",c),a(".js-previous-image-details, .js-next-image-details").off("click",u),a(".figureModalContainer").off("click",p)}function e(e){e.preventDefault(),e.stopPropagation();e=a(this).data("item");a("#"+e).fadeToggle(200),a("#"+e).toggleClass("active-modal"),o(),l(e),a(".active-modal").length?s():t.focus()}function s(){var e=document.querySelector(".active-modal .figureModal"),t=e.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),n=t[0],r=t[t.length-1];n.focus(),e.addEventListener("keydown",function(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===n&&(r.focus(),e.preventDefault()):document.activeElement===r&&(n.focus(),e.preventDefault()))})}function l(t){var e=a("#"+t).data("articleid");e&&a.ajax({type:"POST",url:"/Article/GetCitation",data:{articleID:e}}).done(function(e){e&&(document.getElementById(t).getElementsByClassName("citation")[0].innerHTML=e)}).fail(function(e){console.error(e.message)})}function c(e){e.preventDefault(),e.stopPropagation();e=a(this).data("item");d(a("#"+e))}function u(e){e.preventDefault(),e.stopPropagation();var t=a(this),n=t.data("item"),r=a("#"+n);r.removeClass("active-modal");var i=t.data("new-item"),e=a("#"+i);e.addClass("active-modal"),"newPage"===i?(n=t.data("url"),t=t.data("modal-open"),o(),SCM.SearchResults.doSolrSearch({queryString:n,openModal:t})):l(i),e.toggle(function(){r.toggle()}),d(e),s()}function d(e){var t=e.find(".js-previous-image-details"),n=e.find(".js-next-image-details"),r=null,i=null;"newPage"===t.data("new-item")&&(r=t.data("url"),i=t.data("modal-open")),"newPage"===n.data("new-item")&&(r=n.data("url"),i=n.data("modal-open")),r&&SCM.SearchResults.doSolrSearch({queryString:r,openModal:i,cacheSearchWithoutUpdatingDom:!0,currentItem:e,functionToDoWhileAjaxLoading:f})}function f(e){var t=e.find(".js-previous-image-details, .js-next-image-details");e.length&&(t.hasClass("disabled")?(t.removeClass("disabled"),i()):t.hasClass("disabled")||(t.addClass("disabled"),n()))}function p(e){$target=a(e.target),$target.parents(".figureModalContainer:visible").length||(a(".figureModalContainer").hide(),a("body").removeClass("modalOpen"),t.focus())}return a(".js-item-image").on("click",function(){t=document.activeElement}),{init:function(e,t,n){a(".figureModalContainer").hide(),!0===t&&(a("#"+n).fadeToggle(200),o(),l(n)),r=e,(e=a(".figureModalContainer")).remove(),a("#multimediaGalleryModalWrapper").append(e),i()}}}(jQuery);var SCM=SCM||{};SCM.UploadImage_Complete=function(e){var t,n=$.extend({targetSelector:"#UploadTarget",jsonResultSelector:"#jsonResult",replacementContainerSelector:"#id"},e),e=$(n.targetSelector).contents().find(n.jsonResultSelector);1===e.length&&(e=$.parseJSON(e.html()),$("[data-valmsg-for]").attr("class","field-validation-valid").html(""),e.Success?n.success&&n.success():0<e.Messages.length?(t="Error \n",e.Messages.forEach(function(e){t+=e+"\n"}),alert(t)):e.Html?$(n.replacementContainerSelector).replaceWith(e.Html.replace(/{{/g,"&quot;")):e.ValidationErrors.forEach(function(e){var t=$("[data-valmsg-for="+e.Key+"]");t.addClass("field-validation-error").removeClass("field-validation-valid"),e.Errors.forEach(function(e){t.html(t.html()+e+"<br />")})}))},SCM.AjaxHelperSuccessCallback=function(e,t,n){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?n():t.replaceWith(e)},SCM.AjaxHelperErrorCallback=function(e,t,n){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?n():t.replaceWith(e)},SCM.showModal=function(){var t=[];"undefined"!=typeof tinyMCE&&tinyMCE.editors.forEach(function(e){$("#divDefaultUpdateTarget").find("#"+e.editorContainer).each(function(){t.push(e.id)})}),$.fancybox({autosize:!0,autoScale:!1,title:"",href:"#divDefaultUpdateTarget"}),"undefined"!=typeof tinyMCE&&t.forEach(function(e){$("#"+e).scmTinyMCE()})},SCM.hideModal=function(){$.fancybox.close()},SCM.refreshModal=function(){$.fancybox.update()},function(){var a=$("body");function o(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}$(document).ajaxError(function(e,t,n){if(a.removeClass("wait"),t.responseText)try{var r,i=$.parseJSON(t.responseText);null==i.Success||i.Success||(r="There was an error processing the request \n",i.Messages.forEach(function(e){r+=e+"\n"}),alert(r))}catch(e){console.error("Ajax error occured, responseText is not json: "+e.message)}}),$.validator.addMethod("isDateGreaterThan",function(e,t,n){return 1!=function(e,t){t=new Date(t),e=new Date(e);{if(t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate())return!1;if(e<t)return!0}return!1}($(t).val(),n)},""),$(document).ajaxStart(function(){a.addClass("wait")}).ajaxStop(function(){a.removeClass("wait")}),a.on("keypress","[data-default-button]",function(e){if(13==e.which)return $("#"+$(this).data("defaultButton")).click(),!1}),$.validator.unobtrusive.adapters.add("dynamicrange",["minvalueproperty","maxvalueproperty"],function(e){e.rules.dynamicrange=e.params,null!=e.message&&($.validator.messages.dynamicrange=e.message)}),$.validator.addMethod("dynamicrange",function(e,t,n){var r=(i=t.name).substr(0,i.lastIndexOf(".")+1),i=parseInt($('input[name="'+o(n.minvalueproperty,r)+'"]').val(),10),r=parseInt($('input[name="'+o(n.maxvalueproperty,r)+'"]').val(),10),e=parseInt(e,10);return!(isNaN(i)||isNaN(r)||isNaN(e)||e<i||r<e)||($.validator.messages.dynamicrange=$.format($(t).attr("data-val-dynamicrange"),i,r),!1)},"")}(),function(o){o.fn.radiobuttonEnable=function(){return this.each(function(){var r=o(this);r.find("*[data-rb-enable-name]").each(function(){var e,t=o(this),n=r.find('input:radio[name="'+t.data("rbEnableName")+'"]:checked');0<n.length&&(null!=(e=t.data("rbEnableValue"))&&n.val().toString().toLowerCase()!=e.toString().toLowerCase()&&t.attr("disabled","disabled"),null!=(e=t.data("rbMakeVisibleValue"))&&n.val().toString().toLowerCase()!=e.toString().toLowerCase()&&t.hide())}),r.find("input:radio").on("change",function(){var r=o(this),e='[data-rb-enable-name="'+r.attr("name")+'"]';o(e).each(function(){var e=o(this),t=tinymce.editors[e[0].id],n=e.data("rbEnableValue");null!=n&&(n.toString().toLowerCase()==r.val().toLowerCase()?(e.removeAttr("disabled"),t&&t.getBody().setAttribute("contenteditable",!0)):(e.attr("disabled","disabled"),t&&t.getBody().setAttribute("contenteditable",!1))),null!=(n=e.data("rbMakeVisibleValue"))&&(n.toString().toLowerCase()==r.val().toLowerCase()&&!e.is(":visible")||n.toString().toLowerCase()!=r.val().toLowerCase()&&e.is(":visible"))&&e.fadeToggle()})})})},o.fn.configureSCMForm=function(e){var n=o.extend({cancelButtonSelector:".cancel",submitButtonSelector:".submit",nextQuestionButtonSelector:".nextQuestion",skipButtonSelector:".skip",validatorIgnores:":disabled, input[type='hidden']",nextQuestion:null,cancel:null,skip:null,validateOnSubmit:null,validateOnKeyUp:!1},e);return this.each(function(){var t=o(this);jQuery.validator.unobtrusive.parse("#"+this.id),t.validate();var e=o.data(t[0],"validator").settings;e.ignore=n.validatorIgnores,!0===n.validateOnKeyUp&&(n.validateOnKeyUp=null),e.onkeyup=n.validateOnKeyUp,e.onsubmit=n.validateOnSubmit,t.find(n.submitButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),t.valid()&&t.trigger("submit")}),t.find(n.nextQuestionButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.nextQuestion()}),t.find(n.skipButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.skip()}),t.find(n.cancelButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.cancel?n.cancel():(t.hide(),SCM.hideModal())})})},o.fn.viewMore=function(e){var n=o.extend({hiddenSelector:".read-more",readMoreButtonSelector:"#readMore",readMoreText:"Read More",readLessText:"Read Less"},e);return this.each(function(){var t=o(n.hiddenSelector);t.hide(),o(n.readMoreButtonSelector).on("click",function(e){e.preventDefault(),t.fadeToggle()})})},o.fn.scmTinyMCE=function(){return o(".mceOpen.mce_forecolor").show(),o(".mce_forecolor .mceLast .mceIconOnly").show(),o(".mceOpen.mce_backcolor").show(),o(".mceOpen.mce_backcolor .mceIconOnly").show(),this.each(function(){o(this).tinymce({gecko_spellcheck:!0,theme:"advanced",theme_advanced_buttons1:"bold,italic,underline,|,bullist,numlist,|,sub,sup,|,charmap,|,forecolor,backcolor,|,link",theme_advanced_buttons2:"",theme_advanced_buttons3:"",plugins:"inlinepopups",theme_advanced_statusbar_location:null,oninit:function(e){var t=o("#"+e.editorId+"[data-rb-enable-name]"),e=o('input:radio[name="'+t.data("rbEnableName")+'"]');0<e.length&&e.val().toString().toLowerCase()!=t.data("rbEnableValue").toString().toLowerCase()&&(t.attr("disabled","disabled"),(t=tinymce.editors[t[0].id])&&t.getBody().setAttribute("contenteditable",!1))}})})},o.fn.scmTimer=function(t){return this.each(function(){var e,n,r,i=o(this),a=o.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);a.stop?clearInterval(i.data("scmTimerToken")):(e=function(e){return e=e<10?"0"+e:e},n=(new Date).getTime(),(r=function(){i.text(e(a.h)+":"+e(a.m)+":"+e(a.s)+":"+e(a.hs))})(),i.data("scmTimerToken",setInterval(function(){var e,t;i.is(":visible")?(t=(e=(new Date).getTime())-n,a.hs+=Math.floor(t/10),n=e,100<=a.hs&&(a.s+=Math.floor(a.hs/100),a.hs=a.hs%100,60<=a.s&&(a.m+=Math.floor(a.s/60),a.s=a.s%60),60<=a.m&&(a.h+=Math.floor(a.m/60),a.m=a.m%60)),r(),a.intervalCheck&&(a.intervalCheck(a)||clearInterval(i.data("scmTimerToken")))):clearInterval(i.data("scmTimerToken"))},a.milliseconds)))})},o.fn.wkTimer=function(t){return this.each(function(){var e,n,r,i=o(this),a=o.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);a.stop?clearInterval(i.data("wkTimerToken")):(e=function(e){return e=e<10?"0"+e:e},n=(new Date).getTime(),(r=function(){i.text(e(a.m)+":"+e(a.s))})(),i.data("wkTimerToken",setInterval(function(){var e,t;i.is(":visible")?(t=(e=(new Date).getTime())-n,a.hs+=Math.floor(t/10),n=e,100<=a.hs&&(a.s+=Math.floor(a.hs/100),a.hs=a.hs%100,60<=a.s&&(a.m+=Math.floor(a.s/60),a.s=a.s%60),60<=a.m&&(a.h+=Math.floor(a.m/60),a.m=a.m%60)),r(),a.intervalCheck&&(a.intervalCheck(a)||clearInterval(i.data("wkTimerToken")))):clearInterval(i.data("wkTimerToken"))},a.milliseconds)))})}}(jQuery);var SCM=SCM||{};SCM.__namespace=!0,SCM.eventManager=function(a){function n(e,t){a.pubsub("publish",e,t)}function o(n,r){return e(i,function(e,t){n===t.actionEnum&&r(t)})}function r(n,r){return e(s,function(e,t){n===t.actionEnum&&r(t.data)})}var e=function(e,t){return a.pubsub("subscribe",e,t)},i="actionCompleted",s="actionCompleteactionRequest";return{subscribeWidgetRefresh:function(e,t){var r=a.extend({refreshWhenInvisible:!1,messageContainerSelector:"#divMessage"},t),i="",i=o(e,function(t){var n;r.refreshIf&&!r.refreshIf(t)||(n=a(r.containerSelector),(r.refreshWhenInvisible||n.is(":visible"))&&a.ajax({type:"POST",url:r.url,data:r.data,dataType:"html",success:function(e){a.pubsub("unsubscribe",i),n.replaceWith(e).show(),r.refreshSuccess&&r.refreshSuccess(t)}}))})},subscribe:e,publish:n,publishActionCompleted:function(e,t){t=a.extend({actionEnum:e},t);n(i,t)},subscribeActionCompleted:o,publishActionRequest:function(e,t){return n(s,{actionEnum:e,data:t})},subscribeActionRequest:r,subscribeActionRequestDisplayResult:function(e,t){return r(e,function(e){e=a.extend({type:"POST"},e);a.ajax({type:e.type,url:e.url,data:e.data,dataType:"html",success:function(e){a(t).html(e).show()},error:function(e){alert(e)}}),SCM.hideModal()})}}}(jQuery),SCM.eventManager.subscriptionMessages={playVideo:"SCM.PlayVideo"};var SCM=SCM||{};!function(e,t){var r={},i=r.hasOwnProperty;e.subscribe=function(e,t){i.call(r,e)||(r[e]=[]);var n=r[e].push(t)-1;return{remove:function(){delete r[e][n]}}},e.publish=function(e,n){i.call(r,e)&&t.each(r[e],function(e,t){t(void 0!==n?n:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var SCM=SCM||{};!function(pdf,$){function formatIssuePurchaseLink(e,t){var n=e;return 0<=e.toLowerCase().indexOf("resourceid=")&&(n=e.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+t)),n}function logErrors(jqXHR,textStatus,errorThrown){var err;window.console&&(err=eval("("+jqXHR.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}function openPDF(e){window.location.href=e}function openNoAccessModalArticle(e,t){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url");t="/article.aspx?articleid="+t+"#purchaseSubscriptionBox";pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",t),pdf.$noAccessModal.foundation("reveal","open")}function openNoAccessModalArticleSeo(e,t,n){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url"),"DO_NOT_USE"===n?pdf.$noAccessModal.find("#articleLinkToPurchase").remove():(n=n,pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",n)),pdf.$noAccessModal.foundation("reveal","open")}function openNoAccessModalIssue(e,t){t=formatIssuePurchaseLink(e,t);pdf.$noAccessModal.find(".aIssuePurchaseLink").attr("href",t),pdf.$noAccessModal.foundation("reveal","open")}pdf.$noAccessModal=$("#noAccessReveal"),pdf.checkArticlePDFAccess=function(t){var n=t.attr("data-article-id"),r=t.attr("data-article-url"),e=t.attr("data-ajax-url"),i=$("#hfSiteURL"),a="";null!==t.attr("data-article-seo-url")&&(a=t.attr("data-article-seo-url")),void 0!==i&&void 0!==i.val()&&""!==i&&(e="//"+i.val()+e);i={};i.aId=n,$.ajax({type:"POST",url:e,data:i,traditional:!0,success:function(e){e.Success?openPDF(r):0<a.length?openNoAccessModalArticleSeo(t,n,a):openNoAccessModalArticle(t,n)},error:function(e,t,n){logErrors(e,t,n)}})},pdf.checkIssuePDFAccess=function(e){var t=e.attr("data-issue-id"),n=e.attr("data-issue-url"),e=e.attr("data-ajax-issue-url"),r=pdf.$noAccessModal.find(".aIssuePurchaseLink").attr("href");-1<n.toLowerCase().indexOf("/toc.pdf")?window.location.href=n:$.ajax({type:"POST",url:e,data:{issueId:t},traditional:!0,success:function(e){e.Success?openPDF(n):openNoAccessModalIssue(r,t)},error:function(e,t,n){logErrors(e,t,n)}})},pdf.bindUiEvents=function(){$(document).on("click",".al-link.pdfaccess",function(){$(document).foundation(),pdf.$noAccessModal.foundation("reveal","close"),pdf.$noAccessModal.find("#articleLinkToPurchase").show(),pdf.$noAccessModal.find(".issue-purchase-modal").hide(),$(this).attr("data-reveal-id")||pdf.checkArticlePDFAccess($(this))}),$(document).on("click",".close-reveal-modal",function(){try{$(this).parents(".reveal-modal").foundation("reveal","close")}catch(e){console.error("Foundation error - pdfaccess : "+e)}}),$(document).on("click",".al-link.issue-pdfLink",function(){pdf.$noAccessModal.foundation("reveal","close"),pdf.$noAccessModal.find("#articleLinkToPurchase").hide(),pdf.$noAccessModal.find(".issue-purchase-modal").show(),pdf.checkIssuePDFAccess($(this))})},pdf.init=function(){pdf.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);var SCM=SCM||{};SCM.Supplements=SCM.Supplements||{},SCM.Supplements.updateIssueSupplementsOnChange=function(){$(".js-supplements-select").on("change",function(){window.location.href=$(this).val()})},SCM.Supplements.updateIssueSupplementsOnChange();var SCM=SCM||{};!function(e,d,n,f){var t=d("#Toolbar"),r=d("#ViewsDrop"),i=d("#ShareDrop"),a=d("#ToolsDrop");function o(){var e;!function(){{var t;d(".tab-item").parent("li").show(),d(".tabs-content").length&&(t="",d(".tabs-content > .content").each(function(){var e=d(this);e.hasClass("active")&&(t=e.attr("id"))}),d("#ViewsDrop li").show(),d("#ViewsDrop").find('[data-tab="#'+t+'"]').closest("li").hide())}}(),(e=d(".item-with-dropdown:visible")).show(),e.each(function(){var e=!1,t=d(this);t.find("ul li, .js-article-content-filter").each(function(){(t.is(":visible")||"none"!==t.css("display"))&&(e=!0)}),e||t.hide()})}function s(e,t){var i,a,o,s,l,c,u;d(e,"#ContentTab").length&&(i=d('.widget-items[data-widgetname="'+t+'"]').children(),t=r.children(".js-article-content-filter"),d("#ContentTabFilteredView"),t.filter('[data-content-filter="article-content"]').hide(),0===(a=i.filter(".table-wrap, .fig-section, .figure-title").add(i.has(".table-wrap, .fig-section"))).length&&t.remove('[data-content-filter="figures-tables"]'),0===(o=i.filter(".video-section")).length&&t.remove('[data-content-filter="video"]'),0===(s=i.filter(".audio-section")).length&&t.remove('[data-content-filter="audio"]'),0===(l=i.has(".widget-ArticleDataSupplements, .supplementary-material")).length&&t.remove('[data-content-filter="supplementary-data"]'),c=d("#ContentTab").find(".js-download-images-ppt"),u=d("#ContentTab").find("div.comments"),t.on("click",function(){var e=d(this).attr("data-content-filter"),t=d("#endNotesTargetLocation"),n=d('.js-article-content-filter[data-content-filter="'+e+'"]');n.hide(),n.siblings().show();var r,n=d(".article-metadata-standalone-panel");"figures-tables"===e?r=a:"video"===e?r=o:"audio"===e?r=s:"supplementary-data"===e&&(r=l),r!==f&&null!==r&&r.length?(i.hide(),l.hide(),r.show(),u.hide(),(r=r).filter(".fig-section:not(:has(a[restricted]))").length||r.find(".fig-section:not(:has(a[restricted]))").length?c.show():c.hide(),t.length&&t.hide()):(i.show(),0<n.children().length?n.show():n.hide(),l.show(),u.show(),c.hide(),t.length&&t.show()),SCM.SiteJS.restrictedImages()}))}function l(){d("hypothesis-sidebar:visible").length?d("hypothesis-sidebar").css("display","none"):(d(".site-menu-lvl-0").find(".site-menu:visible").slideToggle("fast"),d(".f-dropdown:visible").slideToggle("fast"),d(".js-login-box-placeholder").addClass("hide"),d("hypothesis-sidebar").css("display","block"),d("[data-hypothesis-trigger]").click())}function c(e){var t,n;return(t="Toolbar__sidebar-toggle",n=f,!(e=e).originalEvent||(e=e.originalEvent.composedPath?e.originalEvent.composedPath():f)!==f&&(n=e.find(function(e){return e.className===t})),n)!==f}function u(e){var t;"hypothesis-sidebar"===e.target.localName&&c(e)?d("hypothesis-sidebar").css("display","none"):(t=d(e.target),e.target.localName.startsWith("hypothesis")?(d("hypothesis-sidebar").css("display","block"),d("[data-hypothesis-trigger]").click()):t.attr("data-hypothesis-trigger")!==f||t.hasClass("js-annotate")||d("hypothesis-sidebar").css("display","none"))}e.closeDropDownIfChildItemClicked=function(){d("#Toolbar .f-dropdown > li").on("click",function(){d(this).closest(".toolbar-item").trigger("click")})},e.removeTabLinkIfTabIsEmpty=function(e){d(e).find(".tab-trigger").each(function(){var e=d(this),t=e.attr("data-tab");"#ContentTab"!==t&&d(t).find("*").length<20&&(0===((t=d(t).html())!==f?d.trim(t.replace(/(<([^>]+)>)/gi,"")):1).length&&e.parent("li").remove())})},e.hideTabIfDropdownIsEmpty=function(){for(var e=[i,a],t=0;t<e.length;t++){var n=e[t];n.children("li").length<1&&n.parent().hide()}r.children(".js-article-content-filter").length<2&&r.parent().hide()},e.toggleTabContent=function(){d(".tab-trigger").on("click",function(e){e.preventDefault();var t=d(this).attr("data-tab"),e=d(t);e.siblings().removeClass("active"),e.addClass("active"),"#FigureTab"===t&&n.trigger("scroll"),o()})},e.adjustToolbarMargins=function(){6<d(".toolbar-item:visible").length&&(d(".toolbar-item").css("marginRight",".65em"),d(".toolbar-item:last-child").css("margin-right","0"))},e.styleToolbarStates=function(){t.on("click",".toolbar-item",function(){var e=d(this);e.addClass("clicked"),e.siblings().removeClass("clicked")});var e=d(".toolbar-item");n.on("click",function(){e.each(function(){var e=d(this);e.find("ul").hasClass("open")||e.removeClass("clicked")})}),d.map(e,function(e){e.children.length||e.classList.add("no-children")})},e.initArticleContentFilter=function(){d(document.body).hasClass("pg_ChapterStandard")?s(".widget-BookSectionsText","BookSectionsText"):s(".widget-ArticleFulltext","ArticleFulltext")},e.closeHypothesis=function(){d("hypothesis-sidebar").css("display","none")},e.registerAnnotateLink=function(){d(".js-annotate").off("click").on("click",function(){l()})},e.hypothesisConfig=function(){d(".js-annotate").length&&(e.registerAnnotateLink(),SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(5,500).execute(function(){return d("hypothesis-sidebar:visible").length}).then(function(e){d("hypothesis-sidebar").css("display","none")}).catch(function(e){console.error("Timed out waiting for Hypothes.is to be ready.")}),d(document).on("click",u),window.hypothesisConfig=function(){return{openSidebar:!0,onLayoutChange:function(e){e.width<50&&0!==e.width&&d("hypothesis-sidebar:visible").length&&d("[data-hypothesis-trigger]").click()}}})},e.init=function(){t.length&&(o(),e.removeTabLinkIfTabIsEmpty(r),e.styleToolbarStates(),e.toggleTabContent(),e.initArticleContentFilter(),e.hideTabIfDropdownIsEmpty(),e.hypothesisConfig(),e.adjustToolbarMargins()),SCM.CitationModal.enableCitationDownloadOnFormatSelect()}}(SCM.Toolbar=SCM.Toolbar||{},jQuery,$(document));var SCM=SCM||{};Date.prototype.MMddyyyy=function(){var e=this.getMonth()+1,t=this.getDate();return(e<10?"0"+e:e)+"/"+(t<10?"0"+t:t)+"/"+this.getFullYear()},function(i,e){var a=e("#hfValidationErrorInvalidYear").val(),o=e("#hfValidationErrorInvalidRange").val();function t(){i.$fromYear=e("#fromYear"),i.$toYear=e("#toYear"),i.$fromMonth=e("#fromMonth"),i.$toMonth=e("#toMonth")}i.getSolrDateString=function(e,t,n,r){i.isSingleDateSelected?(t=e,n?(r=n,--n):(n=0,r=12)):(!e&&t?(e=1666,n=0):e&&!t&&(t=2999,r=12),!r&&e&&t&&(r=12),n&&--n);n=new Date(e,n,1),r=new Date(t,r,0);return n.MMddyyyy()+" TO "+r.MMddyyyy()},i.getValidationResponseTextForDateRange=function(e,t,n,r){return!e&&!t||e&&!/^[\d]{4}$/.test(e)||t&&!/^[\d]{4}$/.test(t)?a:e&&t&&t<e||n&&r&&r<n&&e&&t&&e===t?o:void 0},i.getValidationResponseTextForSingleDate=function(e){if(!e||!/^[\d]{4}$/.test(e))return a},i.fillInMonthDropdown=function(e,t){var n;!e.length||(n=e.data("selected"))&&t.val()&&e.val(n)},i.isSingleDateSelected=!1,i.initDateRangeToggle=function(){e(document).on("click",".js-date-range-input-radio",function(){i.isSingleDateSelected="single"===e(this).attr("value"),t(),i.isSingleDateSelected?(e(".js-date-input-to").addClass("hide"),e(".js-date-range-label").addClass("hide")):(e(".js-date-input-to").removeClass("hide"),e(".js-date-range-label").removeClass("hide"))})},i.initDateFilterTypeToggle=function(){0<=window.location.search.indexOf("dateFilterType=single")&&e('.js-date-range-input-radio[value="single"]').click()},i.$fromYear=null,i.$toYear=null,i.$fromMonth=null,i.$toMonth=null,i.init=function(){t(),i.initDateRangeToggle(),i.initDateFilterTypeToggle(),i.fillInMonthDropdown(i.$fromMonth,i.$fromYear),i.fillInMonthDropdown(i.$toMonth,i.$toYear)}}(SCM.PublicationDateFilter=SCM.PublicationDateFilter||{},jQuery);var SCM=SCM||{};SCM.PubHistory=function(t){return{registerToggle:function(){t(document.body).on("click",".js-history-dropdown-trigger",function(e){e.stopPropagation(),SCM.Toolbar.closeHypothesis(),t(".js-history-entries-wrap").toggleClass("expanded")})}}}(jQuery);var SCM=SCM||{};SCM.ClientStatsMaster=function(o){function s(e,t,n,r,i,a){this.SourceType=e,this.ActionType=t,this.ActionDescription=n,this.ActionUrl=r,this.SearchData=i,this.IsTurnaway=a}function r(e,t,n,r,i,a){a=new s(e,t,n,r,i,a).toJson();o.ajax({type:"POST",url:"/Services/UserActionService.svc/TrackUserAction",data:a,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.log("jqXhr.responseText: "+e.responseText),console.log("status: "+t))})}return s.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=o("#Toolbar"),t={"#FigureTab":"FiguresClicked","#TableTab":"TablesClicked","#ContentTab":"ArticleClicked","#SupplementTab":"SupplementClicked","#MultimediaTab":"MultimediaClicked"};e.on("click",".tab-trigger",function(){var e=o(this).attr("data-tab");e in t&&r(22,"View",t[e],window.location.href,"",!1)})},trackShares:function(){var e=o("#ShareDrop"),t={addthis_button_email:"EmailClicked",addthis_button_share:"TwitterClicked",addthis_button_facebook:"FacebookClicked",addthis_button_compact:"CompactClicked"};e.on("click","a",function(){var e=o(this).attr("class");e in t&&r(22,"Share",t[e],window.location.href,"",!1)})},trackSingleAction:function(e,t,n){e.on("click",function(){r(22,t,n,window.location.href,"",!1)})}}}(jQuery),$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackShares(),SCM.ClientStatsMaster.trackSingleAction($('a[data-reveal-id="getCitation"]'),"Tools","GetCitationClicked"),SCM.ClientStatsMaster.trackSingleAction($("div.toolboxGetAlertsWidget"),"Tools","AlertsClicked"),SCM.ClientStatsMaster.trackSingleAction($("div#getAlertsConfirmation"),"Tools","AlertAdded"),SCM.ClientStatsMaster.trackSingleAction($("#PermissionsLink"),"Tools","GetPermissionsClicked"),SCM.ClientStatsMaster.trackSingleAction($("a.tablelink").filter(":parent"),"ViewLargeImage","ViewLargeImageClicked")});var SCM=SCM||{};SCM.StatsR2Tracking=function(t){function a(e,t,n,r,i,a,o,s,l){SCM.Ajax.post("/UserActionStats/LogJournalArticleView",{ArticleId:t,JournalId:e,RequestType:n,IsFullText:r,IsNoLicense:i,IsLimitExceeded:a,Url:u(o),Event:s||"",EventDataType:l||""}).expectJson()}function o(e,t,n,r,i,a,o,s,l){SCM.Ajax.post("/UserActionStats/LogProceedingArticleView",{ArticleId:t,ConferenceId:e,RequestType:n,IsFullText:r,IsNoLicense:i,IsLimitExceeded:a,Url:u(o),Event:s||"",EventDataType:l||""}).expectJson()}function s(e,t,n,r,i,a,o,s){SCM.Ajax.post("/UserActionStats/LogBookView",{BookId:e,RequestType:t,IsFullText:n,IsNoLicense:r,IsLimitExceeded:i,Url:u(a),Event:o||"",EventDataType:s||""}).expectJson()}function l(e,t,n,r,i,a,o,s,l){SCM.Ajax.post("/UserActionStats/LogBookChapterView",{BookId:e,ChapterSectionId:t,RequestType:n,IsFullText:r,IsNoLicense:i,IsLimitExceeded:a,Url:u(o),Event:s||"",EventDataType:l||""}).expectJson()}function c(e,t,n,r,i,a,o){SCM.Ajax.post("/UserActionStats/LogStandaloneMultimediaView",{MultimediaId:e,RequestType:t,IsFullText:n,IsNoLicense:r,IsLimitExceeded:i,Url:u(a),Event:"Multimedia",EventDataType:o||""}).expectJson()}function i(e,t,n,r,i){(n=n||d()).ArticleId?n.ConferenceId?o(n.ConferenceId,n.ArticleId,e,!1,!1,!1,t,r,i):a(n.JournalId,n.ArticleId,e,!1,!1,!1,t,r,i):n.BookId?n.BookChapterId?l(n.BookId,n.BookChapterId,e,!1,!1,!1,t,r,i):s(n.BookId,e,!1,!1,!1,t,r,i):n.MultimediaId&&c(n.MultimediaId,e,!1,!1,!1,t,r)}function u(e){var t=location.href;return e&&(t+="/"+encodeURIComponent(e.trim())),t}function d(){return{ArticleId:t("meta[name='article-id']").attr("content"),JournalId:t("meta[name='journal-id']").attr("content"),ConferenceId:t("meta[name='conference-id']").attr("content"),BookId:t("meta[name='book-id']").attr("content"),BookChapterId:t("meta[name='book-chapter-id']").attr("content"),MultimediaId:t("meta[name='multimedia-id']").attr("content")}}return{logJournalArticleView:a,logProceedingArticleView:o,logBookView:s,logBookChapterView:l,logStandaloneMultimediaView:c,logContentView:i,logAuthorView:function(e){var t="Author/"+e.text(),n=d(),r=null,e=e.closest('[data-widgetname="BookToc"]');r=e.length?(t="chapter"+(e=e.data("resource-id-access"))+"/"+t,{BookChapterId:e,BookId:n.BookId}):n,i("Html",t,r)},logPeerReviewView:function(e){i("Html",e,d())},logItemPdfDownload:function(){t(document).on("click",".stats-item-pdf-download",function(e){i("Multimedia","ItemPdf_"+t(this).data("resourceid"),null,"Multimedia")})},logDownloadSlide:function(){t(document).on("click",".stats-download-slide",function(e){i("Multimedia","DownloadSlide_"+t(this).attr("section"),null,"Multimedia")})}}}(jQuery);var SCM=SCM||{};SCM.JumpLinks=SCM.JumpLinks||{},SCM.JumpLinks=function(u,r){var d,i,a=[],l=[],e=!1;return{init:function(){{var e,t,n;d=u("html, body"),i=u(".js-jumplink, .sectionLink, .js-no-access-jumplink").not(".disable").not(".hide"),(d.hasClass("pg_article")||d.hasClass("pg_issue"))&&(i.each(function(){var e=u(this),t=s(e.attr("href"));a.push({jumplink:e,target:t})}),window.location.hash&&(e=window.location.hash.split("#").pop().trim(),t=e.indexOf("="),o(n=s("#"+(e=0<t?e.substring(0,t):e)))),u(window).on("scroll",f),p())}d.hasClass("pg_chapterstandard")&&(i.each(function(){var e=u(this),t=u(e.attr("href").split("#").pop().trim());n=s("#"+t.selector),$jumplinkTarget=s(n),a.push({jumplink:e,target:$jumplinkTarget})}),window.location.hash&&(e=window.location.hash.split("#").pop().trim()).startsWith("jumplink-")&&(e=e.substr("jumplink-".length),o(n=function(e,t){return u("["+e+"]").filter(function(){return u(this).attr(e)===t})}("data-supplement-target",e))),u(window).on("scroll",f),p());d.hasClass("pg_siconversioncalculatorpage")&&u(window).on("scroll",f);(function(t,e){e.on("click",function(e){t.hasClass("pg_issue")?function(e,t){var n=1;t.page&&(n=Number.parseInt(t.page));0!==e.data("page")&&e.data("page")!==n&&(window.location="?page="+e.data("page")+e.attr("href"))}(u(e.target),u.deparam.querystring()):t.hasClass("pg_article")||t.hasClass("pg_chapterstandard")||t.hasClass("pg_siconversioncalculatorpage")?(c(t,u(this).attr("href")),e=t,u(".page-column--left").removeClass("js-filters-open"),u(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style"),e.removeClass("noscroll"),u(document).off("touchmove"),SCM.SiteJS.initFoundation()):t.hasClass("pg_book")&&c(t,u(this).attr("href"))})})(d,i),d.hasClass("pg_articlesplitview")&&u(".js-jumplink:contains('References')").parents(".section-jump-link").hide()},registerNotesTocLink:function(t,e){u("."+e).on("click",function(){var e=u(t).offset().top-50;d.animate({scrollTop:e},400,function(){u(window).off("scroll",f),u(window).on("scroll",f)}),d.removeClass("noscroll")})},registerFootNotesLink:p};function o(e){e.length&&(e=n(e),d.animate({scrollTop:e},400,function(){u(window).off("scroll",f),u(window).on("scroll",f)}))}function n(e){var t=r.getStickyToolbarHeight(),n=e[0].id;return"no-access-message"==n||"login-purchase"==n?e.offset().top-t-18:e.offset().top-t}function s(e){if(e&&e.length){var t=u(e);return 0===t.length&&e.startsWith("#")&&(e=e.substring(1),t=u("[data-legacy-id='"+e+"']")),t}return null}function f(){window.scrollY,e||(rAF=requestAnimationFrame(t),e=!0)}function c(e,t){$target=s(t);t=n($target);e.animate({scrollTop:t},400,function(){u(window).off("scroll",f),u(window).on("scroll",f)})}function p(){u(".js-end-note-link").off("click"),u(".js-end-note-link").on("click",function(e){var t,n,r,i,a=u(this).attr("data-fn-id"),o=u("#bookId").val(),s=0<u(".widget-ArticleFulltext").length,l=(i=u(this),u("#sv_main:visible").length?(i.closest(".table-wrap-foot").length||i.closest(".js-fig-section").length)&&u(".js-sv-figuresTables").length?u(".js-sv-figuresTables"):u("#split-view-scroll-pane"):u("#ContentColumn")),c=u("#sv_main:visible").length;a&&a.length&&(s?1<(t=u('.content-inner-wrap:visible .js-xref-fn[reveal-id="'+a+'"]:visible')).length&&(t=(t=t.filter(function(e){return 0===u(t[e]).closest(".table-modal.table-full-width-wrap").length})).first()):t=l.find('.js-xref-fn[reveal-id="'+a+'"]:first'),(t=0===t.length&&o.length?l.find('.js-related-object[legacysectionid="'+a+'"]:first'):t).length?(n=0,r=d,i=t.offset().top-60,c&&(n=l.offset().top,r=l,i=t.offset().top-n+l.scrollTop()-5),r.animate({scrollTop:i},200,function(){u(window).off("scroll",f),u(window).on("scroll",f)}),d.removeClass("noscroll")):!s&&o.length&&(s=App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"",u.ajax({url:s+"/Content/GoToChapterFootNote",cache:!1,data:{bookId:o,footnoteId:a},dataType:"json",success:function(e){e.Success&&(window.location=e.RedirectURL)}})))})}function t(){u(".js-tocLink");var o=u(".js-jumplink"),s=u.deparam.querystring();u(window).on("scroll",function(){var e,t,n,r,i,a=u(this).scrollTop();u(".articleClientType").each(function(){var e=u(this).offset().top,t=u(this).attr("id"),t=u('.section-jump-link__link-wrap a[href="#'+t+'"]');e-90<a&&(u(t).length&&u(".list-issue-jumplinks li").removeClass("active"),o.removeClass("active"),u(t).closest(".js-jumplink").addClass("active"))}),d.hasClass("pg_issue")&&!o.hasClass("active")&&(e=u("#ArticleListPageSize").val(),t=0,n=(t=s.page?Number.parseInt(s.page)-1:t)*e,(i=u(".section-jump-link__link-wrap a")).each(function(e,t){return t.dataset.ordinal>n?(u(r).closest(".js-jumplink").addClass("active"),!1):(i.length-1===e&&u(t).closest(".js-jumplink").addClass("active"),void(r=t))})),u(".article-body").length&&u("#ContentColumn h2").each(function(){var e=u(this).offset().top,t=u(this).attr("id"),t=u('#InfoColumn .section-jump-link__link-wrap a[href="#'+t+'"]');e-90<a&&(u(t).length&&u(".jumplink-list li").removeClass("active"),o.removeClass("active"),u(t).closest(".js-jumplink").addClass("active"))}),u(".book-chapter-body").length&&(l.length||(u("#ContentColumn h2, #ContentColumn h3, #ContentColumn h4").each(function(){l.push(u(this))}),0<u(".js-toc-footnotes-link").find(".js-notes-link-chapter-footnotes:visible").length&&l.push(u("#chapter-footnotes")),0<u(".js-toc-notes-link").find(".js-notes-link-end-notes:visible").length&&l.push(u("#endNotesTargetLocation"))),u(l).each(function(){var e=u(this).offset().top,t=u(this).data("magellan-destination")?parseInt(u(this).data("magellan-destination")):parseInt(u(this).prevAll(".jumpLoc-sectionId").eq(0).attr("id")),t=u(this).hasClass("js-end-notes-target")?u("#InfoColumn .js-section-title-wrap .js-notes-link-end-notes:visible"):u(this).hasClass("js-footnotes-target")?u("#InfoColumn .js-section-title-wrap .js-notes-link-chapter-footnotes:visible"):u('#InfoColumn .js-section-title-wrap a[data-sectionid="'+t+'"]');e-120<a&&u(t).length&&(u(".js-jumplink-list li").removeClass("active"),o.removeClass("active"),o.removeClass("at-highlighted-heading"),u(t).closest(".js-jumplink").addClass("active"),u(t).closest(".js-jumplink").addClass("at-highlighted-heading"),u(t).parents(".js-headings-placeholder").siblings(".js-section-title-wrap").find(".js-tocLink").addClass("active"),u(t).parents(".js-headings-placeholder").siblings(".js-section-title-wrap").find(".js-jumplink").addClass("active"))})),u(".pg_siconversioncalculatorpage").length&&u("#table1, #length, #area, #mass, #volume, #table2, #analytes__A-D, #analytes__E-K, #analytes__L-Q, #analytes__R-Z").each(function(){var e=u(this).offset().top,t=u(this).attr("id"),t=u('#InfoColumn .section-jump-link__link-wrap a[href="#'+t+'"]');e-90<a&&(u(t).length&&u(".jumplink-list li").removeClass("active at-selected-LR-element"),o.removeClass("active at-selected-LR-element"),u(t).closest(".js-jumplink").addClass("active at-selected-LR-element"))})})}}(jQuery,SCM.StickyToolbarHelper);var SCM=SCM||{};SCM.trapFocus=(jQuery,{publicTrapFocus:function(r,e,i){r.keydown(function(e){var t,n;"Escape"===e.key&&i.focus(),"Tab"!==e.key&&9!==e.keyCode||(t=(n=r.find('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled]), input, div[tabindex=0]').filter(":visible"))[0],n=n[n.length-1],e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault()))}),e.on("click",function(){i.focus()})}});var SCM=SCM||{};!function(e,r){var i,a,o,s,l,c,u,d,f,p,h,g,m,v,t,y,b,w,S,x,C=window.scrollY||window.pageYOffset,k=!1,j=0;function n(){C=window.scrollY||window.pageYOffset,k||(requestAnimationFrame(R),k=!0)}function M(){return i.hasClass("pg_article")}function A(){return i.hasClass("pg_articlesbygroup")}function T(){return i.hasClass("pg_issue")}function I(){return i.hasClass("pg_searchresults")}function E(){return i.hasClass("pg_book")}function $(){return i.hasClass("pg_chapterstandard")}function _(){return i.hasClass("pg_siconversioncalculatorpage")}function R(){var e,t,n;k=!1,1023<SCM.SiteJS.getViewportWidth()?(M()||$()||E())&&(C>=r(".js-content-body").offset().top+u?(function(){{var e;!function(){null===U&&(U=p.children().length);return U}()&&((e=c.clone(!0)).find(".js-navbar-search-filter").attr("id","sticky-navbar-search-filter"),e.find(".js-navbar-search-filter-label").attr("for","sticky-navbar-search-filter"),e.find(".js-microsite-search-term").attr("id","sticky-microsite-search-term"),e.find(".js-microsite-search-term-label").attr("for","sticky-microsite-search-term"),e.find(".js-citation-format").attr("id","sticky-select-format"),e.find(".js-citation-format-label").attr("for","sticky-selectFormat"),e.find(".mobile-microsite-search").remove(),p.append(e),"undefined"!=typeof addthis&&addthis.toolbox(".js-sticky-toolbar"),U=!0)}}(),p.addClass("stuck")):p.removeClass("stuck")):(M()||$()||_())&&(C>=r(".js-mobile-nav").offset().top+d?a.addClass("stuck"):a.removeClass("stuck")),"sticky"===v&&O()&&(O()&&1200<SCM.SiteJS.getViewportWidth()?(M()&&(50+w.height()+h.height()-S.height()-80<=C?(w.css("height",w.height()),$rightRailAdContainer.addClass("fixed")):(w.css("height","auto"),$rightRailAdContainer.removeClass("fixed"))),(T()||I()||E()||$())&&(50+w.height()+h.height()-S.height()-24<=C?(w.css("height",w.height()),$rightRailAdContainer.addClass("fixed")):(w.css("height","auto"),$rightRailAdContainer.removeClass("fixed")))):$rightRailAdContainer.removeClass("fixed"),O()&&1023<SCM.SiteJS.getViewportWidth()?(A()&&r(".pg_articlesbygroup #Sidebar .widget:last-of-type").css("margin-bottom","0"),(A()||i.hasClass("pg_selfserve/sspage")||i.hasClass("pg_selfservepage"))&&(50+w.height()+h.height()-$rightRailAdContainer.height()-24<=C?(w.css("height",w.height()),$rightRailAdContainer.addClass("fixed")):(w.css("height","auto"),$rightRailAdContainer.removeClass("fixed")))):$rightRailAdContainer.removeClass("fixed")),SCM.SiteJS.isPageViewLarge()||(e=0,"guardian"===m&&P()&&(e=g.height()),t=h?h.height()+h.offset().top:0,n=x?x.height():0,C&&(h||x)&&t+n+e-j<=C?((M()||$()||E()||_())&&(l.addClass("stuck"),$leftNav.css("top","55px")),I()&&SCM.SiteJS.getViewportWidth()<=1023&&o.addClass("stuck")):(M()||I()||$()||E()||_())&&($leftNav.css("top","0px"),f.removeClass("stuck"))),I()&&SCM.SiteJS.getViewportWidth()<=1023&&(C>=h.height()+148+70?(o.addClass("stuck"),o.next().css("margin-top","70px")):(f.removeClass("stuck"),o.next().css("margin-top","0px"))),T()&&function(){var e=r(".js-issue-dropdown-wrap");{var t,n;e.length&&(t=parseInt(e.css("margin-bottom").replace("px","")),n=x?x.height():0,1023<SCM.SiteJS.getViewportWidth()&&(C>=h.height()+e.height()+2*t+n+h.offset().top?l.addClass("stuck"):T()&&l.removeClass("stuck")),C>=h.height()+e.height()+2*t+n+h.offset().top+l.height()+30?(s.addClass("stuck"),SCM.SiteJS.getViewportWidth()<=1023&&s.parent().css("padding-top",s.height()+32+"px")):T()&&(s.removeClass("stuck"),SCM.SiteJS.getViewportWidth()<=1023&&s.parent().css("padding-top","0px")))}}(),"scrolldelay"===m&&!0===y&&P()&&(C>=h.height()-290?(g.addClass("fixed"),b.addClass("master-container-sticky")):(g.removeClass("fixed"),b.removeClass("master-container-sticky"))),"guardian"===m&&P()&&(C>=h.height()-290&&C<220&&0!==C?(g.addClass("fixed"),g.removeClass("guardian-scrolled"),b.addClass("master-container-sticky"),r(".journal-header").show()):220<=C?(g.removeClass("fixed"),g.addClass("guardian-scrolled"),b.addClass("master-container-sticky"),r(".journal-header").hide()):(g.removeClass("fixed"),g.removeClass("guardian-scrolled"),b.removeClass("master-container-sticky"),r(".journal-header").show()))}e.init=function(){i=r("body"),b=r(".js-master-container"),l=r(".js-left-nav-col"),$leftNav=r(".js-left-nav"),c=r(".js-toolbar-wrap"),u=c.height(),d=r(".js-mobile-nav").height(),f=r(".js-left-nav-col, .js-toolbar-wrap, .sr-filters, .js-mobile-nav"),p=r(".js-sticky-toolbar"),h=r(".js-master-header"),x=r(".widget-SitewideBanner"),g=r(".js-ad-banner-header"),t=r("#hdnAdDelaySeconds").val(),m=r("#hdnAdConfigurationTop").val(),v=r("#hdnAdConfigurationRightRail").val(),w=r("#Sidebar.page-column--right"),$rightRailAdContainer=r("#Sidebar>div:last-of-type"),S=r("#Sidebar>div:last-of-type>div"),s=r(".js-issue-browse-mobile-nav"),a=r(".js-mobile-nav-sticky"),o=r(".sr-filters");var e=r("#hfLeftNavStickyOffset");e.length&&(j=parseInt(e.val())),0<t&&"scrolldelay"===m&&(y=!0,setTimeout(function(){y=!1,g.removeClass("fixed"),b.removeClass("master-container-sticky")},t)),r(window).on("scroll",n),R()};var F=null;function P(){return F=F||r("#adBlockHeader iframe").length}var L=null;function O(){return L=L||r("#Sidebar>div:last-of-type iframe").length}var U=null}(SCM.StickyElements=SCM.StickyElements||{},jQuery);var SCM=SCM||{};function GetReturnUrl(){var e,t=window.location.href;return 0<t.indexOf("?")&&(e=window.location.search.split("&"),t=t.substring(0,t.indexOf("?")),!e.length||(e=e.filter(function(e){return"login"!==e.split("=")[0].replace("?","")})).length&&(t+=e.join("&")),t+=window.location.hash),t}SCM.Utilities=SCM.Utilities||{},SCM.AddReturnUrlToSocietyLinks=function(){var t=GetReturnUrl(),t=encodeURIComponent(t),e=$("#hfPlaceholderReturnUrlValue"),n=e.length?e.val():null;$(".society-links-logo, .society-links-url").each(function(){var e;n&&n.length&&(e=$(this)).attr("href",e.attr("href").replace(n,t))})};var SCM=SCM||{};!function(e,a){var o=a(".sigma").length,s="<span class='get-access js-get-access-label at-get-access'>Get access<img class='get-access-icon' src='/UI/app/svg/chevron-right-white.svg' alt='Arrow' aria-hidden='true'></span>";e.setAccessIcons=function(i){i=i||SCM.AccessIcons;var e=a("[data-resource-id-access]");e.length&&i&&(e.each(function(e,t){var n=a(this),r=n.data("resourceIdAccess"),r=SCM.SiteJS.getAccessIcon(r,i);r&&function(e,t){var n=e.find(".js-access-icon-placeholder");o&&!n.length&&(n=e.find(".js-sigma-access-placeholder"));n.length&&(function(e){e.removeClass(function(e,t){return(t.match(/icon-availability_.+/g)||[]).join(" ")})}(n),function(e,t){var n=t.prev();o&&-1!==a.inArray(e,l)?(t.remove(),n.wrapInner('<span class="access-title"></span>'),n.append(s)):t.removeClass(e).addClass(e)}(t.icon,n),n.attr("title",t.title))}(n,r)}),0<a(".pg_book").length&&(0<a(".js-get-access-label").length?a(".js-get-access-wrapper").removeClass("hidden"):a(".js-login-purchase-wrap").addClass("hidden")))};var l=["icon-availability_restricted","icon-availability_cart"];e.getAccessIcon=function(n,e){var r;return(e=e||SCM.AccessIcons).map(function(e,t){if(e.id===n)return r=e,!1}),r}}(SCM.SiteJS=SCM.SiteJS||{},jQuery);var SCM=SCM||{};!function(e,t){e.registerAnswerLinkClick=function(){t(".js-answer-link").on("click",function(){var e=t(this);e.next(".js-answer-wrap").toggleClass("hide"),e.find(".js-answer-show").toggleClass("hide"),e.find(".js-answer-hide").toggleClass("hide")})}}(SCM.ChapterAnswerSet=SCM.ChapterAnswerSet||{},jQuery);var SCM=SCM||{};!function(e,s){var l=s("#hfMaxRelativeDepth").length?parseInt(s("#hfMaxRelativeDepth").val()):0,u=s("#hfBrowseContentInLinkText").val(),d=100;function f(){var e=s(this);return parseInt(e.attr("data-level"))>l}function t(){var n,r,i,e=s(this).closest(".js-tree-node-item"),t=e.closest(".js-tree-browse-wrap"),a=e.attr("data-level"),c=e.attr("data-id"),o=null;a===l&&(o=e.next(".js-children").find(".js-tree-node-item").filter(f)),p(t,c,o),setTimeout(function(){var o,s,l;o=t,s=e,l=c,new Promise(function(e,t){var n=s.find(".js-tree-node-link").text(),r=o.find(".js-tree-browse-breadcrumb-link"),i=r.closest(".js-tree-browse-breadcrumb-wrap"),a=r.closest(".js-breadcrumbs");a.is(".active")||i.height(0),a.addClass("active"),a.addClass("fade"),setTimeout(function(){i.height(r.closest(".js-breadcrumbs").outerHeight())},d),r.removeClass("active");a=r.siblings(".hide").first();a.text(n),a.attr("data-id",l),a.removeClass("hide"),a.addClass("active"),e()})},d),n=t,r=(o=e).find(".js-tree-node-link").text(),i=o.attr("data-id"),new Promise(function(t,e){setTimeout(function(){n.find(".js-tree-browse-link-all").addClass("hide");var e=n.find(".js-tree-browse-link-narrowed");e.text(u+r),e.attr("href",e.data("href-template").concat(i)),e.removeClass("hide"),t()},d)})}function p(t,e,n){var i=t.find('.js-tree-node-item[data-parent-id="'+e+'"]');n&&n.length&&(i=i.add(n));e=t.find(".js-tree-node-item");e.removeClass("fade");var r,n=t.find(".js-tree-browse-nodes-wrap").height();t.find(".js-tree-browse-nodes-wrap").height(n),r=e,new Promise(function(e,t){setTimeout(function(){r.removeClass("active"),e()},d)}).then(function(e){return n=t,r=i,new Promise(function(t,e){setTimeout(function(){r.addClass("active");var e=n.find(".js-tree-browse-nodes").outerHeight();n.find(".js-tree-browse-nodes-wrap").height(e),t()},d)});var n,r}).then(function(){return n=i,new Promise(function(e,t){setTimeout(function(){n.addClass("fade"),e()},d)});var n})}function n(){var e=s(this),t=e.closest(".js-tree-browse-wrap");e.nextAll().addClass("hide"),e.addClass("active");var n=e.attr("data-id");p(t,n),e.is(".js-root-breadcrumb")?($breadcrumbsWrap=e.parents(".js-breadcrumbs"),$breadcrumbsWrap.removeClass("fade"),$breadcrumbsWrap.closest(".js-tree-browse-breadcrumb-wrap").height(0),setTimeout(function(){$breadcrumbsWrap.removeClass("active")},d),t.find(".js-tree-browse-link-all").removeClass("hide"),t.find(".js-tree-browse-link-narrowed").addClass("hide")):(e=t.find('.js-tree-node-item[data-id="'+n+'"]').find(".js-tree-node-link").text(),(t=t.find(".js-tree-browse-link-narrowed")).text(u+e),t.attr("href",t.data("href-template").concat(n)),t.removeClass("hide"))}e.checkPageHeightForSeriesDropdown=function(){var e,n,t=s(".js-main");0<(t=0!==s("#searchResultsPage").length?s("#ContentColumn"):t).length&&(e=t.height(),n=e,s(".js-tree-browse-wrap").each(function(e){var t=s(this).height();n<t&&(n=t)}),e<n&&t.height(n))},e.init=function(){s(document.body).on("click",".js-tree-node-link",t),s(document.body).on("click",".js-tree-browse-breadcrumb-link",n),e.checkPageHeightForSeriesDropdown()}}(SCM.TreeBrowse=SCM.TreeBrowse||{},jQuery);var SCM=SCM||{};!function(l,u){var e=u("body"),n=u(".search-wrap-filters"),t=!1,r=!1,a=!1,o=(u(".navbar-search"),u(".js-navbar-search-container")),s=u(".js_close-navsearch"),c=u(".js_expand-navsearch"),d=u(".navbar-menu, .navbar-search-collapsed"),f=u(".navbar-search-advanced, .navbar-search-close, .navbar-search"),p=u(".navbar-search .navbar-search-input");function h(e,t){var n,r,i,a=u("#NeedSubscription");!e.length||t.length||2<=(i=e.split(" ")).length&&(n=u("<div/>"),r=i[0],e=i[i.length-1],(i=(i=u('[content-id="'+r+'"]').first()).length?i:u('[content-id="'+r.toLowerCase()+'"]').first()).length&&(n.append(i.children().clone()),n=l.getAllReferencesInRange(i,n,e)),t=0<n.html().length?n:""),u(t).hasClass("video-modal")||u(t).hasClass("audio-modal")?t.foundation("reveal","open"):t.length?SCM.SiteJS.openRevealModal(t):a.foundation("reveal","open")}$mobileSearchInput=u(".mobile-search-input"),$toolbarWrap=u(".toolbar-wrap"),$toolbarInnerWrap=u(".toolbar-inner-wrap"),activeElement=void 0,$viewOption="Basic",u("#hfViewOption").val(),l.initSkipNavToMainContent=function(){var e="#skipNav_sitewidebanner",t=u(e);t.length&&u(".skipnav").attr("href",e),u(".skipnav").on("click",function(){(t.length?t:u("#skipNav")).focus()})},l.isPageViewLarge=function(){if(e.hasClass("pg_ViewLarge"))return!0},l.setBlockLink=function(){u(document).on("click",".js-widget-dynamic-entry",function(e){e=u(e.currentTarget).data("resource-url");e&&(window.location=e)})},l.setAllLinksTarget=function(){u("a[target]").not(".openInAnotherWindow").each(function(){u(this).attr("target","")})},l.getNewSelectedFilter=function(){var t=n.children("li");t.on("click",function(){var e=u(this);t.removeClass("selected"),e.addClass("selected"),SCM.SiteJS.setSelectedSearchFilter()})},l.initSelfServeNavigation=function(){var e=u('.js-selfserve-navigation-menu a[href="'+window.location.pathname+'"]');e.addClass("ss-currentPage"),e.parents("ul.selfserve-nav-menu-child-list").addClass("open"),e.parents("ul.selfserve-nav-menu-child-list").siblings("button.selfserve-subnav-toggle").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")},l.toggleSelfServeNavigation=function(){u(".selfserve-subnav-toggle, .selfserve-parent-toggle").on("click",function(e){var t=u(this),n=u(this).siblings(".selfserve-sublist");e.preventDefault(),t.hasClass("icon-general-arrow-filled-right")?t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):t.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"),n.hasClass("open")?n.removeClass("open"):n.addClass("open")})},l.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},l.initLazyLoad=function(){u("img.contentFigures, img.inlineGraphics, img.lazy").lazyload({skip_invisible:!1})},l.detectIfFirefox=function(){null==window.mozInnerScreenX||u("html").addClass("firefox")},l.initFoundation=function(){u(document).foundation()},l.loadAllImagesIfUserIsAboutToUseJumpLinks=function(){u("#LeftNavSticker").hover(function(){u(".lazy").each(function(){var e=u(this);e.attr("src",e.attr("data-original"))})})},l.showAuthorInfo=function(){u(".js-linked-name-trigger, .linked-name, .al-author-name .linked-name, .al-author-name-more .linked-name, .linked-name-byline, .al-author-footnotes .js-linked-footnotes").on("click",function(e){var t=u(this).siblings(".al-author-info-wrap");e.stopPropagation(),SCM.Toolbar.closeHypothesis(),u(".al-author-info-wrap").not(t).removeClass("open"),u(t).toggleClass("open"),u(t).attr("tabindex","-1").focus(),function(){{var e,t;u(window).width()<1200&&u(".al-author-info-wrap.open:visible").length&&u("#ContentColumn:visible").length&&(t=u("#ContentColumn"),e=t.position().left+t.width(),t=u(".al-author-info-wrap.open"),SCM.SiteJS.shiftOpenAuthorCards(t,e))}}(),SCM.ScholarlyiQ.trackOnPageEvent("article-author-"+u(this).text())}),u(document.body).on("click",function(e){u(e.target).parents(".al-author-info-wrap").length||u(".al-author-info-wrap").removeClass("open")})},l.addAuthorFootnote=function(){u(".al-author-name, .al-author-name-more").each(function(){var e=u(this).find(".info-card-note .xref-fn");e.length&&"*"===e.text()&&(u("<sup/>").append(e.html()).insertAfter(u(this).find(".linked-name")),e.remove()),u(this).find(".info-author-correspondence").length&&((e=u(this).find('span[class^="delimiter"]')).length?e.prepend('<i class="icon-general-mail"></i>'):u(this).find(".linked-name").append('<i class="icon-general-mail"></i>'))})},l.showHideDropDown=function(){u(".selectDropdown").on("click",function(e){u(".dropdown").hide().removeClass("open"),e.stopPropagation(),u(this).siblings(".dropdown").slideToggle("300","linear").toggleClass("open")}),u(document).click(function(){u(".dropdown").hide().removeClass("open")})},l.showMoreRelatedContent=function(e,t){u(e).click(function(){var e=u(this);e.closest(".related-section-box, .widget-RelatedBookContent").find(t).toggleClass("show-item"),e.toggleClass("show-less").find("i").toggleClass("icon-show").toggleClass("icon-hide"),e.hasClass("show-less")?e.find("span").text("See Less"):e.find("span").text("See More")})},l.showRelatedBookWidgetIfHasContent=function(){u(".widget-RelatedBookContent").each(function(){var e=u(this);5<e.find("*").length&&e.addClass("show")})},l.handleUnresolvedRelatedObjectLinks=function(){u(document).on("click",'a[isbn][object-type!="end-note"], .js-link-page',function(){var t="/CustomError?statusCode=404",e=u(this),n=e.attr("isbn"),r=u("#bookId").val(),i=e.attr("legacySectionId"),a=u("div[name='"+i+"']");!function(e,t){if(e.hasClass("js-link-other")){e=u("div[content-id='"+t+"']");if(e.length&&e.parents(".mixed-citation").length){e=u('[content-id="'+t+'"]').parents(".paragraph-ref").first();return h(t,e),!0}}return!1}(e,i)&&(a.length?window.location.hash=i:(n=null==n?"":n.trim(),i=null==i?"":i.trim(),""!==n||""!==i?(a=App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"",u.ajax({url:a+"/Book/GoToRelatedObjectLink",cache:!0,dataType:"json",data:{isbn:n,legacySectionId:i,currentBookId:r}}).done(function(e){e&&e.Success?window.top.location.assign(e.RedirectURL):(console.log("/Book/GoToRelatedObjectLinkfailed!"),window.top.location.assign(t))}).fail(function(){console.log("Book/GoToRelatedObjectLink failed"),window.top.location.assign(t)})):window.top.location.assign(t)))})},l.showSpinner=function(){function e(){u(".preloader-wrap").removeClass("hide").addClass("active")}SCM.QueryBuilder.defaults.beforeSearch=e,u(".pagination").on("click",e)},l.setSelectedSearchFilter=function(){var e=n.children(".selected").text();u(".selected-text").text(e)},l.initFilterClickEvent=function(){u(".filter-wrap").on("click",function(e){n.hide(),e.stopPropagation(),n.toggle()}),u(document).click(function(){n.hide()})},l.launchSupersededContentModal=function(){u("#supersededContent").on("opened.fndtn.reveal",function(){u(".js-latest-link").focus()}),u("#supersededContent").on("closed.fndtn.reveal",function(){u(document.body).focus()}),u("#supersededContent").foundation("reveal","open")},l.launchAddAlertModal=function(){u('[data-reveal-id="addArticleUpdateAlert"]').click(function(){u("#AddAlert").foundation("reveal-modal","open")})},l.launchEmailUserModal=function(){u('[data-reveal-id="emailUsernameModal"]').click(function(){u("#emailUserName").foundation("reveal-modal","open")})},l.showFullDisclaimer=function(){u(document).on("click",".disclaimer-text",function(){u(this).closest(".disclaimer-text").find(".js-disclaimer").toggleClass("hide")})},l.showFullVersionInfo=function(){u(".js-version-info-more-link").on("click",function(){u(this).closest(".version-info-text").find(".js-version-info").toggleClass("hide")})},l.closeNavbarSearch=function(){s.on("click",function(){o.removeClass("tablet-viewport-active"),f.hide(),d.fadeIn()})},l.expandNavbarSearch=function(){c.on("click",function(){o.addClass("tablet-viewport-active"),d.hide(),f.fadeIn(),p.focus()})},l.calculateResetState=function(e){t=!!e,SCM.SiteJS.resetMobileSiteNav(t)},l.toggleMobileLanguageSubmenu=function(){u(".mobile-header-language").on("click",function(){u(".mobile-language-submenu").slideToggle()})},l.toggleMobileSignInForm=function(){var e=u(".mobile-login"),t=u(".mobile-signin-nav-arrow");u(".mobile-menu-link-wrap").on("click",function(){e.hasClass("open")||(e.addClass("open").slideToggle(),t.hide())}),u(".site-menu .mobile-login-form").on("click",".mobile-login-icon",function(){e.removeClass("open").slideToggle(),t.show()})},l.resetMobileSearchFilters=function(){u(".sf-facets, .sf-facet-list").removeAttr("style"),u(".sf-group-header-icon").removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")},l.resetMobileSiteNav=function(e){u(".header-bottom, .navigation, .microsite-search, .arrow-nav, .arrow-search, .mobile-language-submenu").removeAttr("style"),u(".mobile-search-toggle, .mobile-menu-toggle, .arrow-nav, .arrow-search").removeClass("active"),u(".microsite-search").removeClass("active-tablet"),e&&(a=r=!1)},l.toggleMobileSearch=function(){u(".mobile-search-toggle").on("click",function(){SCM.SiteJS.calculateResetState(r,a),a=!1===a,SCM.SiteJS.toggleResponsiveMenus(u(".mobile-search-toggle, .arrow-search"),a,u(".microsite-search"))})},l.toggleResponsiveLeftColumn=function(){var t,n=u(".page-column--left"),r=u(".toggle-left-col__close"),e=u(".page-column--left .js-taxonomy-label");e.attr("tabindex","0"),e.keypress(function(e){13===e.which&&this.click()}),u(document.body).removeClass("noscroll"),u(".js-main").on("click",".toggle-left-col__search, .toggle-left-col__article",function(e){e.preventDefault(),t=document.activeElement,u(document.body).addClass("noscroll"),n.show().addClass("js-filters-open");e=u(".page-column--left .info-inner-wrap");e.attr("tabindex","-1").focus(),SCM.trapFocus.publicTrapFocus(e,r,t),navigator.userAgent.toLowerCase().includes("mozilla")||u(document).on("touchmove",function(e){e.preventDefault()}),u(document).ajaxComplete(function(){u(document.body).removeClass("noscroll"),n.removeClass("js-filters-open"),u(document).off("touchmove"),l.initFoundation()})}),u(".toggle-left-col__issue").on("click",function(e){e.preventDefault(),u(document.body).addClass("noscroll"),u(".issue-dropdown-wrap").hide(),u(".responsive-issue-nav").show(),navigator.userAgent.toLowerCase().includes("mozilla")||u(document).on("touchmove",function(e){e.preventDefault()})}),r.on("click",function(e){e.preventDefault(),u(document.body).removeClass("noscroll"),n.removeClass("js-filters-open"),u(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style"),u(document).off("touchmove"),l.initFoundation()})},l.toggleMobileMenu=function(){u(".mobile-menu-toggle").on("click",function(){SCM.SiteJS.calculateResetState(a,r),r=!1===r,SCM.SiteJS.toggleResponsiveMenus(u(".mobile-menu-toggle, .arrow-nav"),r,u(".navigation"))})},l.toggleResponsiveMenus=function(e,t,n){var r=u(".header-bottom");t?(e.addClass("active"),n.show(),r.slideToggle()):(e.removeClass("active"),r.toggle(),n.delay(50).hide())},l.showFullAuthorList=function(){var t=u(".meta-authors--etal"),n=u(".meta-authors--remaining"),r=u(".meta-authors--limited").find(".delimiter-hidden");t.on("click",function(e){e.preventDefault(),t.removeClass("is-active"),t.attr("aria-hidden",!0),n.addClass("is-active"),n.attr("aria-hidden",!1),r&&(r.removeClass("delimiter-hidden"),r.addClass("delimiter"))})},l.showImages=function(e){e.find(".contentFigures").each(function(){var e=u(this);0<=e.attr("src").toLowerCase().indexOf("grey.gif")&&e.attr("src",e.attr("data-original"))})},l.openRevealModal=function(e){var t=u("#revealModal");t.find("#revealContent").empty().prepend(e.contents().clone()),t.foundation("reveal","open"),SCM.SiteJS.showImages(t),SCM.SiteJS.restrictedImages();var n=document.activeElement;u(document).on("opened.fndtn.reveal","[data-reveal]",function(){u(".open").focus(),u(".open").addClass("at-openModal"),SCM.trapFocus.publicTrapFocus(t,t.find(".close-reveal-modal"),n)}),u(document).on("close.fndtn.reveal","[data-reveal]",function(){t.removeClass("at-openModal")})},l.revealFigsTablesInModal=function(){e.on("click",".xref-bibr, .xref-fn, .link-reveal, .table-graphic, .caption-title",function(){var e=u(this),t=e.attr("reveal-id")?e.attr("reveal-id"):e.attr("data-reveal-id")?e.attr("data-reveal-id"):e.attr("data-id"),e=(e=function(e){var t=u('[content-id="'+e+'"]').first();{var n,r;t.length||((n=u('[id="'+e+'"]').first()).length?(r=n.next().attr("id"),t=u('[data-statsid="'+r+'"]')):(n=u('[data-table-id="'+e+'"]').first()).length&&(t=n.find(".table-wrap")))}return t}(t)).length?e:u('[content-id="'+t.toLowerCase()+'"]').first();h(t,e)})},l.revealFeaturedFigureInModal=function(){u(".issue-featured-image a").on("click",function(){var e,t=u(this).closest(".image-synopsis-wrap").html(),n=u("#revealModal"),r=n.find(".js-close-reveal-modal"),i=u(this).data("featuredfigureurl");i&&(n.find("#revealContent").empty().prepend(t),u("#revealContent img").attr("src",i),n.foundation("reveal","open"),e=u(":focus"),n.off("opened.fndtn.reveal"),n.on("opened.fndtn.reveal",function(){u(".close-reveal-modal").focus(),SCM.trapFocus.publicTrapFocus(n,r,e)}),n.on("closed.fndtn.reveal",function(){e.focus(),n.off("keydown.SCM.trapFocus"),u(this).find("#revealContent").empty()}))})},l.getAllReferencesInRange=function(e,t,n){var r=e.next(),e=r.attr("content-id");return e.length&&(t.append(r.children().clone()),e===n||e===n.toLowerCase()||l.getAllReferencesInRange(r,t,n)),t},l.showUnAuthenticatedSpans=function(){u(document).ready(function(){var e=u('div[data-widgetname="ArticleFulltext"] span#UserHasAccess').attr("data-userHasAccess");e&&e.length&&"false"===e.toLowerCase()&&u('div[data-widgetname="ArticleFulltext"] a[data-reveal-id]').each(function(){u(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})})},l.oupHeaderDropdowns=function(){u(".mobile-search-toggle").on("click",function(e){e.preventDefault();e=u(this);SCM.SiteJS.manageMobileDropdowns(e,".mobile-search-dropdown")}),u(".mobile-account-toggle").on("click",function(e){e.preventDefault();e=u(this);SCM.SiteJS.manageMobileDropdowns(e,".mobile-account-dropdown")}),u(".mobile-nav-toggle").on("click",function(e){e.preventDefault();e=u(this);SCM.SiteJS.manageMobileDropdowns(e,".mobile-nav-dropdown")})},l.manageMobileDropdowns=function(e,t){u(".dropdown-panel").hasClass("is-active")?e.hasClass("is-active")?(u(t).slideToggle().removeClass("is-active"),e.removeClass("is-active"),u(".mobile-search-toggle").focus()):(u(".mobile-dropdown-toggle").removeClass("is-active"),u(".dropdown-panel-wrap").children(".is-active").slideToggle().removeClass("is-active"),e.addClass("is-active"),u(t).delay(400).slideToggle().addClass("is-active")):(e.addClass("is-active"),u(t).slideToggle().addClass("is-active"),$mobileSearchInput.focus())},l.toggleToolbarDropdown=function(){u(".drop-trigger").on("click",function(e){e.preventDefault(),u(this).siblings("ul").slideToggle()})};var g="signin",m="mobile",v="desktop",y=!1;l.initSigninForm=function(){$mobileSignInLink=u(".mobile-account-dropdown ul li .mobile-account-signin"),$mobileSignInArrow=u(".mobile-account-dropdown ul li i.mobile-nav-arrow"),$mobileSignInForm=u(".mobile-account-dropdown ul li ul.individual-menu"),$desktopSignInForm=u(".dropdown-panel-signin"),$desktopInstitution=u(".dropdown-panel-institution");function t(t){var e,n;$desktopSignInForm.toggleClass("active").toggle(),y||(e=SCM.SiteJS.GetLoginUrl(t),n=SCM.SiteJS.GetCaptchaInstanceNumber(t),u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+e,cache:!1,data:{captchaInstanceNumber:n},success:function(e){SCM.SiteJS.UpdateLoginForm(t,e),SCM.AddReturnUrlToSocietyLinks(),y=!0}}))}u(".oup-header-menu-item.desktop .dropdown-toggle.signin").on("click",function(e){e.preventDefault(),t(v)}),u(".dropdown-toggle.institution").on("click",function(e){e.preventDefault(),$desktopInstitution.toggleClass("active").toggle()});var n=!1;u(document).mousedown(function(e){var t=u(".dropdown-panel-signin, .dropdown-panel-institution");n=!u(t).is(e.target)&&0===u(t).has(e.target).length}),u(document).mouseup(function(e){var t=u(".dropdown-panel-signin, .dropdown-panel-institution");n&&!u(t).is(e.target)&&0===u(t).has(e.target).length&&(u(t).hide(),t.removeClass("active")),n=!1}),$mobileSignInLink.on("click",function(e){e.preventDefault(),t(m),$mobileSignInArrow.hasClass("icon-general_arrow-down")?$mobileSignInArrow.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-up"):$mobileSignInArrow.removeClass("icon-general_arrow-up").addClass("icon-general_arrow-down"),$mobileSignInLink.toggleClass("active")}),u(document).on("click",".signin-form .signin-button",function(e){var t=u(this).closest(".signin-form"),n=t.find(".preloader-wrap");e.preventDefault(),e.stopPropagation(),SCM.SiteJS.Login(t,n),"/sign-in"!==location.pathname&&SCM.ScholarlyiQ.trackOnPageEvent("site-signin")}),u(document).on("keypress",".signin-form input.username, .signin-form input.password",function(e){var t=u(this).closest(".signin-form"),n=t.find(".preloader-wrap");13===(e.keyCode||e.which)&&(e.preventDefault(),SCM.SiteJS.Login(t,n))}),u(".signout-button").off("click"),u(document).on("click",".signout-button",function(){var e=0===location.pathname.toLowerCase().indexOf("/my-account")?"/":location.pathname+location.search;u.get("/LOGOUT",{dest:"/HTTPHandlers/SAMs/LogoutHandler.ashx"}).done(function(){window.top.location.assign(e)}).fail(function(){window.top.location.assign(e)}),SCM.ScholarlyiQ.trackOnPageEvent("site-signout")}),u(document).on("click","a.shibboleth-signin",function(e){var t=window.top.location,t=t.origin+"/SHIBBOLETH?dest="+encodeURIComponent(t.pathname+t.search),t=u(this).data("target").replace("{0}",encodeURIComponent(t));window.top.location=t})},l.initLoginFormDropdown=function(){u(".signin-form").on("click",'a[data-target="register"]',function(e){e.preventDefault();e=u.deparam.querystring().returnUrl;null==e&&(e=location.pathname+location.search),window.top.location.assign("/my-account/register?returnUrl="+encodeURIComponent(e))})},l.Login=function(e,n){var r=e.find("input.username").val(),i=e.find("input.password").val();if(0<e.find("#hpcName").val().length&&console.warn)console.warn("Honeypot captcha triggered. Are you a bot?");else if(0!==r.length&&0!==i.length){var t=0<u(".js-captcha-simple").length,a=0<e.find(".js-captcha-normal").length,o=e.find("input.loginInstanceName").val();n.removeClass("hide");var s=0,l="txtCaptchaInputId";if(a)switch(o){case g:s=captcha0;break;case m:s=captcha1;break;case v:s=captcha2;break;default:s=0}else t&&(l+="-"+SCM.SiteJS.GetCaptchaInstanceNumber(o).toString());u.post((App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/OUP/ValidateCaptcha",{captchaResponse:a?grecaptcha.getResponse(s):"",simpleCaptchaResponse:t?document.getElementById(l).value:"",captchaInstanceNumber:SCM.SiteJS.GetCaptchaInstanceNumber(o)}).done(function(e){var t;"1"===e?u.post("/LOGIN",{user:r,pass:i,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(e){"1"===e?"/sign-in"===location.pathname.toLowerCase()&&null!==u.deparam.querystring().handoff_url?window.location.reload():SCM.SiteJS.loginReturnBack():u.post("/OUP/LoginFormIncrementFailedAttempts").done(function(){var e=SCM.SiteJS.GetLoginUrl(o),t=SCM.SiteJS.GetCaptchaInstanceNumber(o);u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+e,cache:!1,data:{captchaInstanceNumber:t},success:function(e){SCM.SiteJS.UpdateLoginForm(o,e),SCM.AddReturnUrlToSocietyLinks(),u(".error").show(),n.addClass("hide")}})})}):(t=SCM.SiteJS.GetLoginUrl(o),e=SCM.SiteJS.GetCaptchaInstanceNumber(o),u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+t,cache:!1,data:{captchaInstanceNumber:e},success:function(e){SCM.SiteJS.UpdateLoginForm(o,e),SCM.AddReturnUrlToSocietyLinks(),u(".error").show(),n.addClass("hide")}}))})}else e.find(".error").show()},l.UpdateLoginForm=function(e,t){var n;e===v?((n=u(".dropdown-panel-signin")).html(t),n.find("input.loginInstanceName").val(v),0<n.find("div.register-captcha-text-normal-lf").length&&resetCaptchaElement2()):e===m?((n=u(".mobile-account-dropdown ul li ul.individual-menu")).html(t),n.find("input.loginInstanceName").val(m),0<n.find("div.register-captcha-text-normal-lf").length&&resetCaptchaElement1()):e===g&&((e=u(".unauth-column.account")).html(t),e.find("input.loginInstanceName").val(g),0<e.find("div.register-captcha-text-normal-lf").length&&resetCaptchaElement())},l.GetLoginUrl=function(e){return e==g?"/OUP/LoginForm/OUP_SignInPage_LoginForm":"/OUP/LoginForm/LoginFormPopup"},l.GetCaptchaInstanceNumber=function(e){var t=0;switch(e){case g:t=0;break;case m:t=1;break;case v:t=2;break;default:t=0}return t},l.loginReturnBack=function(){null!=(t=null==(t=u.deparam.querystring().returnUrl)?u.deparam.querystring().redirectUrl:t)&&""!==t||(t=window.top.location.pathname+window.top.location.search);var e,t=decodeURIComponent(t);/^\/((\w+\/)?sign-in|my-account\/forgot-password|my-account\/reset-password|my-account\/register)/i.test(t)?t="/":/^\/[^\/]+/.test(t)||t.indexOf("secureacademic.oup.com")<0&&(null!==(e=t.match(/\/\/([^/]+(?:\.[^./]+)*)/i))&&e[1].toLowerCase()===window.top.location.hostname.toLowerCase()||(t="/")),"/"!==t&&t.indexOf("secureacademic.oup.com")<0&&null!==(e=t.match(/\/\/([^/]+\.)?([^./]+\.[^./]+)/i))&&e[2].toLowerCase()!==window.top.location.hostname.match(/(.*\.)?([^.]+\.[^.]+)/i)[2].toLowerCase()&&(t="/"),window.top.location.assign(t)},l.alertKeyPress=function(){u(document).on(".js-user-alert","keydown",function(e){"Enter"===e.key&&u(this).triggerHandler("click")})},l.alertLinks=function(){u(document).on("click",".js-user-alert",function(){var e=u(this),t=(activeElement=e).data("additionalurl"),n=e.data("userloggedin"),r=e.data("alerttype"),i=e.data("siteid");void 0!==n&&"false"===n.toLowerCase()?(n=u.deparam.querystring().returnUrl,void 0===i&&(i=u("#hdnSiteID").val()),null==(n=e.parent().hasClass("alertType-MarketingLink")?t:n)&&(n=location.pathname+location.search,location.search.length&&-1!==location.search.indexOf("fl_SiteID")||(n+=location.search.length?"&fl_SiteID="+i:"?fl_SiteID="+i)),void 0!==r&&(n=n+"#trigger-alerttype="+r),window.location="/sign-in?returnUrl="+encodeURIComponent(n)):void 0!==t&&t.length?window.location=t:191!==i&&192!==i||3!==r?SCM.SiteJS.showSignUpAlertInfo(e):window.location="/my-account/email-alerts"}),u(document).on("click",".close-reveal-modal",function(){try{u(this).parents(".reveal-modal").foundation("reveal","close")}catch(e){console.log("Foundation error - pdfaccess : "+e)}void 0!==activeElement&&activeElement.focus()})},l.showSignUpAlertInfo=function(a){u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:a.data("alerttype"),resourceId:a.data("alertresourceid"),resourceType:a.data("alertresourcetype"),email:a.data("alertuseremail"),resourceName:a.data("alertresourcename"),taxonomyName:a.data("alerttaxonomyname")},dataType:"html",success:function(e){u(".userAlertSignUp").html(e);var t=u(".userAlertSignUpModal"),n=t.find(".close-reveal-modal");t.off("opened.fndtn.reveal"),t.on("opened.fndtn.reveal",function(){SCM.trapFocus.publicTrapFocus(t,n,a),t.focus()}),t.foundation("reveal","open");var i=u(".userAlertSignUp").find("#selectAlertFreqeuncy");u(".userAlertSignUp").find("input.js-taxonomy-checkbox:checked");SCM.SiteJS.initTaxonomyArrows(u(".userAlertSignUp")),u(".addUserAlert").on("click",function(){lastActiveElement=document.activeElement;var e=u(this).parent(),t=u(this).parent().find(".js-alert-name").val(),n=u(this).parent().find(".js-taxonomy-checkbox:checked"),r=!1;33==a.data("alerttype")&&(t?n.length<1&&(r=!0,SCM.SiteJS.showErrorMessage(e,u("#errorSelectionRequired"))):(r=!0,SCM.SiteJS.showErrorMessage(e,u("#errorAlertNameRequired"))));n=n.filter(SCM.SiteJS.taxonomyFilterFunction),n=SCM.SiteJS.processTaxonomies(n);r||SCM.SiteJS.addSignUpAlert(a,i,t,n,e)})}})},l.showEditAlertInfo=function(e){var o=e.parents(".email-alerts-content-row");u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:o.data("alerttype"),resourceId:o.data("alertresourceid"),resourceType:o.data("alertresourcetype"),email:o.data("alertuseremail"),resourceName:o.data("alertresourcename"),taxonomyName:o.data("alerttaxonomyname"),existingAlert:o.data("alert")},dataType:"html",success:function(e){u(".userAlertSignUp").html(e),u(".userAlertSignUpModal").foundation("reveal","open");var a=u(".userAlertSignUp").find("#selectAlertFreqeuncy");u(".userAlertSignUp").find("input.js-taxonomy-checkbox:checked");SCM.SiteJS.initTaxonomyArrows(u(".userAlertSignUp")),u(".js-edit-user-alert").on("click",function(){var e=u(this).parent(),t=u(this).parent().find(".js-alert-name").val(),n=u(this).parent().find(".js-taxonomy-checkbox:checked"),r=u("#AlertSignUp_AlertId").val(),i=!1;33==o.data("alerttype")&&(t?n.length<1&&(i=!0,SCM.SiteJS.showErrorMessage(e,u("#errorSelectionRequired"))):(i=!0,SCM.SiteJS.showErrorMessage(e,u("#errorAlertNameRequired"))));n=n.filter(SCM.SiteJS.taxonomyFilterFunction),n=SCM.SiteJS.processTaxonomies(n);i||SCM.SiteJS.editTaxonomyAlert(r,o,a,t,n,e)})}})},l.taxonomyFilterFunction=function(){return u(this).parents(".js-taxonomy-child-list-item").parents(".js-taxonomy-child-list-item").children(".js-taxonomy-parent-label").find(".js-taxonomy-checkbox:checked").length<1},l.initTaxonomyArrows=function(e){e.find(".js-taxonomy-parent-arrow").on("click",function(){var e=u(this);e.parents(".js-taxonomy-label-wrap").siblings(".js-taxonomy-child-list").toggleClass("hide");e=e.children(".js-taxonomy-icon");e.hasClass("icon-general-arrow-filled-right")?e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")}),e.find(".js-taxonomy-checkbox").on("click",function(){u(this).is(":checked")?u(this).parent().parent().find(".js-taxonomy-checkbox").prop("checked",!0):(u(this).parent().parent().find(".js-taxonomy-checkbox").prop("checked",!1),u(this).closest(".js-taxonomy-node").children(".js-taxonomy-parent-label").find(".js-taxonomy-checkbox").prop("checked",!1),u(this).parents(".js-taxonomy-child-list-item").children(".js-taxonomy-parent-label").find(".js-taxonomy-checkbox").prop("checked",!1))})},l.showErrorMessage=function(e,t){e.find(".js-message").hide(),t.removeClass("hide"),t.show()},l.processTaxonomies=function(e){var t=new Array;for(i=0;i<e.length;i++){var n=e[i].attributes["data-id"].value;t.push(n)}return t},l.addSignUpAlert=function(e,t,n,r,i){var a;null!=t&&(a=t.val()),u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AddAlertsSignUpForTaxonomySearch/AddAlertsSignUpPopup",cache:!1,data:{alertType:e.data("alerttype"),resourceId:e.data("alertresourceid"),resourceType:e.data("alertresourcetype"),email:e.data("alertuseremail"),resourceName:e.data("alertresourcename"),scheduleId:a,alertName:n,taxonomyName:e.data("alerttaxonomyname"),taxonomies:JSON.stringify(r)},dataType:"html",success:function(e){var t,n;null!=e&&("name-exists"===e.trim()?SCM.SiteJS.showErrorMessage(i,u("#errorAlertNameExists")):"search-exists"===e.trim()?SCM.SiteJS.showErrorMessage(i,u("#errorAlertSearchExists")):(u(".userAlertSignUp").html(e),u(".userAlertSignUpModal").foundation("reveal","open").addClass("confirmation-wrap"),n=u(".confirmation-wrap"),t=u(".toggle-left-col__close"),e=n.css("top"),(n=n).attr("tabindex","-1").focus(),u("html, body").animate({scrollTop:e}),SCM.trapFocus.publicTrapFocus(n,t,lastActiveElement)))}})},l.editTaxonomyAlert=function(e,t,n,r,i,a){var o;null!=n&&(o=n.val()),u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/EditAlertForTaxonomySearch/AddAlertsSignUpPopup",cache:!1,type:"POST",data:{alertId:e,scheduleId:o,alertName:r,taxonomyName:t.data("alerttaxonomyname"),taxonomies:JSON.stringify(i)},dataType:"html",success:function(e){var t=JSON.parse(e);null!=t&&((e=t.Success?u("#messageCustom"):u("#errorCustom")).html(t.Message),SCM.SiteJS.showErrorMessage(a,e))}})},l.initSearchResultsSort=function(){var e=u(".sort-order-select-option"),t=u(".sort-order-select"),n=u(".preloader-wrap");t.off("change").on("change",function(){var e=u(this).val();SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"})}),e.off("click").on("click",function(){u(this).find("option[value]").length&&n.removeClass("hide"),sessionStorage.detailsState=$viewOption}),u(".al-pageNumber,.sr-nav-previous,.sr-nav-next").off("click").on("click",function(){var e;u(this).hasClass("currentPage")||(n.removeClass("hide"),e=u(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:e}))})},l.restrictedImages=function(){u("div.graphic-wrap[restricted]").each(function(){var e=u(this).children(".copy-right-statement");u(e).toggle(!1),u(this).off("contextmenu").on("contextmenu",function(){return u(e).toggle(),!1}),u(this).off("click").click(function(){return u(e).toggle(),!1}),u(e).off("click").click(function(){return u(e).toggle(),!1})})},SCM.ArticleListNewAndPopular.registerArticleListNewAndPopularCombinedMode(),l.moveSubmitCommentLink=function(){var e=u(".submitCommentPlaceHolder"),t=u(".widget-UserComment");e.append(t)},l.addUserCommentJumpLink=function(){var e,t=u(".content-nav");t.length&&(e=u(".comments-jumplink"),t.append(e))};function b(e){e.length&&(u(".contents-title").show(),u(".jumplink-list").append(e))}l.addDataSupplementsJumpLink=function(){var e=u(".dataSupplements-jumplink");b(e)},l.addDataRepositoriesJumpLink=function(){var e=u(".dataRepositories-jumplink");b(e)},l.addAuthorNotesJumpLink=function(){var e=u(".authorNotes-section-title");e.length&&(e=u('<li class="section-jump-link head-1"><div class="section-jump-link__link-wrap"><a class="jumplink js-jumplink scrollTo" href="#authorNotesSectionTitle">'+e.text()+"</a></div></li>"),b(e))},l.shiftOpenAuthorCards=function(e,t){var n=e.closest(".al-author-name"),r=(n=!n.length?e.closest(".al-author-name-more"):n).offset(),n=e.width();t<r.left+n?e.addClass("shift-card"):e.hasClass("shift-card")&&r.left+n<t&&e.removeClass("shift-card")};var w=!(l.toggleSearchResultsDetails=function(){var t=u("#switch-container"),n=u("#switch-post"),r=u(".sri-expandedView");$viewOption=sessionStorage.detailsState||("undefined"!=typeof clientViewOption&&""!==clientViewOption?clientViewOption:u("#hfViewOption").val()),"Expanded"===$viewOption?(t.removeClass("off").addClass("on"),n.removeClass("off").addClass("on"),r.removeClass("hide")):"Basic"===$viewOption&&r.addClass("hide"),u(".pagination").on("click",function(){sessionStorage.detailsState=$viewOption}),t.off("click").on("click",function(e){e.stopPropagation(),$viewOption="Expanded"===$viewOption?"Basic":"Expanded",t.toggleClass("on off"),n.toggleClass("on off"),r.hasClass("hide")?r.removeClass("hide"):r.addClass("hide")})});l.adjustRelatedTagsDisplay=function(){u(".article-metadata-panel:not(.solr-resource-metadata):not(:last)").remove();var e=u(".article-metadata-panel:not(.solr-resource-metadata)").last(),t=u(".kwd-group"),n=u(".related-topic-tags"),r=u(".article-metadata-taxonomies"),a=u(".article-metadata-tocSections"),o=u(".wi-editors");$openScienceBadge=u(".wi-open-science-badge");var s=[t,n,r,a,o,$openScienceBadge];for(e.length||(e=u(".article-metadata-standalone-panel"),u(".widget-items").prepend(e)),i=0;i<s.length;i++)s[i].length&&e.append(s[i]);e.html()&&e.show(),l.removeEmpty(".article-metadata-panel"),l.removeEmpty(".article-metadata-standalone-panel"),l.removeEmpty(".access-state-logos"),l.removeEmpty(".article-pubstate"),w=!0,window.dispatchEvent(new CustomEvent("adjustRelatedTagsDisplay.complete"))},l.isFinishedAdjustRelatedTagsDisplay=function(){return w},l.removeEmpty=function(e){for(var t=u(e),n=0;n<t.length;n++){var r,i=t.eq(n);0===i.children().length&&((r=i.text())&&r.trim()||i.remove())}},l.showPdfOnlyLink=function(){u(".PdfOnlyLink").length&&u(".toolbar-item.item-pdf").length&&u(".toolbar-item.item-pdf").children().clone().appendTo(".PdfOnlyLink")},l.triggerAlertModalOnRedirect=function(){var e=u.bbq.getState("trigger-alerttype");void 0!==e&&(u('.userAlert a[data-userloggedin="True"][data-alerttype='+e+"]").click(),u.bbq.removeState("trigger-alerttype"))},l.triggerSaveSearchModelOnRedirect=function(){"1"===u.bbq.getState("triggerSaveSearch")&&(u(".lnkSaveSolrSearch").click(),u.bbq.removeState("triggerSaveSearch"))},l.configureMathjax=function(){MathJax.Hub.Config({CommonHTML:{linebreaks:{automatic:!0}},"HTML-CSS":{linebreaks:{automatic:!0}},SVG:{linebreaks:{automatic:!0}},tex2jax:{inlineMath:[["|$","$|"],["\\(","\\)"]]}}),"sticky"!==u("#hdnAdConfigurationRightRail").val()&&MathJax.Hub.Register.StartupHook("End",function(){var c,e,t;screen.width<1024||(c=u(".page-column-wrap").width(),u("#ContentTab").on("click",".js-mathjax-view-large",function(e){var t,n,r,i,a,o,s,l=u(e.currentTarget);l.hasClass("js-mathjax-view-large-expanded")||l.prev().hasClass("js-mathjax-view-large-expanded")||((t=l.clone(!1)).css("position","absolute"),t.addClass("js-mathjax-view-large-clone"),t.addClass("mathjax-view-large-expanded"),t.addClass("js-mathjax-view-large-expanded"),l.before(t),n=e.currentTarget.dataset.targetWidth,r=l.height(),i=(s=u(".page-column-wrap").offset().left)+c,a=e.currentTarget.dataset.widthDifference,o=Math.ceil(a/2),s=(e=l.offset().left)-s,e=i-(e+l.width()),o<s&&o<e?(t.css("marginLeft",-o+"px"),t.css("marginRight",-o+"px")):o<s&&t.css("marginLeft",-(a-e)+"px"),t.css("minHeight",Math.ceil(r)+"px"),t.css("width",n+"px")),l.hasClass("js-mathjax-view-large-expanded")?(l.css("visibility","hidden"),l.next().css("visibility","")):(l.css("visibility","hidden"),l.prev().css("visibility",""))}),u("#ContentTab .math span.MathJax").each(function(e,t){var n=t.offsetWidth+2,r=u(t).parents(".formula-wrap"),t=r.width();t<n&&(r.addClass("js-mathjax-view-large").addClass("mathjax-view-large"),n=Math.min(n,1200,c),r[0].dataset.widthDifference=n-t,r[0].dataset.targetWidth=n)}),u("#ContentTab .tex-math").each(function(e,t){var n=t.offsetWidth+5,r=u(t).parents(".formula-wrap"),t=r.width();t<n&&(r.addClass("js-mathjax-view-large").addClass("mathjax-view-large"),n=Math.min(n,1200,c),r[0].dataset.widthDifference=n-t,r[0].dataset.targetWidth=n)}),e=function(e){e.matches?u(".mathjax-view-large").removeClass("js-mathjax-view-large"):u(".mathjax-view-large").addClass("js-mathjax-view-large")},(t=window.matchMedia("(max-width: 1023px)")).addListener(e),e(t))})},l.citationAriaExpand=function(){var e=u(".js-journal-citation-filter-toggle"),t=u(".journal-citation-filter-input-wrap");e.attr("aria-expanded","true"),e.click(function(){t.is(".collapsed")?e.attr("aria-expanded","true"):e.attr("aria-expanded","false")})},l.ariaToggleTable=function(t){var n=u(t+"-button"),r=n.children(".collapse-icon");n.on("click",function(e){e.preventDefault(),"true"===n.attr("aria-expanded")?n.attr("aria-expanded","false"):n.attr("aria-expanded","true"),r.hasClass("icon-general-arrow-filled-down")?r.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):r.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"),u(t).toggleClass("hide"),"false"===u(t).attr("aria-hidden")?u(t).attr("aria-hidden","true"):u(t).attr("aria-hidden","false")})},l.initAriaControls=function(){u("[id^=collapsible-table-]").each(function(e){SCM.SiteJS.ariaToggleTable("#collapsible-table-"+e)})},l.abstractMathJax=function(){u(".js-abstract-response-placeholder").length&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,".js-abstract-response-placeholder"])},l.articleUserComments=function(e){e=!0===e;var a=u(".comment-form__modal .preloader-wrap"),o=u(".content-form__response--error");u("#comment-modal-opener"+(e?"-sv":"")).click(function(e){e.preventDefault();var n=u("#comment-modal-opener");"True"!==SCM.UserCommentView.isUserLoggedIn?(null==(e=u.deparam.querystring().returnUrl)&&(e=location.pathname+location.search),window.location="/sign-in?returnUrl="+encodeURIComponent(e)):(resetCommentForm(),u.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Content/SelfServeContent",type:"GET",data:{selfServeContentId:"CommentsTermsAndConditions",selfServeVersionId:0}}).success(function(e){showTermsAndConditions(e);var t=u("#divCommentModal");setTimeout(function(){t.attr("tabindex","-1").focus()},1e3);e=u(".icon-general-close");SCM.trapFocus.publicTrapFocus(t,e,n)}))}),u("#btnUserAgreeTerms").click(function(e){var t,n;e.preventDefault(),validateTermsCheckbox()&&(u("#TermsAndConditionsContainer, #termsAgreeRow, #termsButtonRow").hide(),u("#divUserCommentForm").show(),t=u("#divCommentModal"),n=u(".icon-general-close"),e=u(".comment-body__button"),t.attr("tabindex","-1").focus(),SCM.trapFocus.publicTrapFocus(t,n,e))}),u("#divCommentModal .btnUserCommentSubmit").click(function(e){e.preventDefault(),validateCommentForm()&&(a.removeClass("hide"),submitCommentValues(),u("#divCommentModal").attr("tabindex","-1").focus())}),u("#divCommentModal .btnModalCancel, #divCommentModal .btnCommentModalExit, .comment-form__close").click(function(e){e.preventDefault(),u("#divCommentModal").foundation("reveal","close"),u("#comment-modal-opener").focus()}),u('input[name="NoConflicts"]').change(function(){u(this).is(":checked")?u(".disclosureBox").show():u(".disclosureBox").hide()}),showTermsAndConditions=function(e){u("#termsAgreeRow .lblTermsAndConditions.errors").hide(),u("#TermsAndConditionsContainer").html(e),u("#TermsAndConditionsContainer, #termsAgreeRow, #termsButtonRow").show(),u("#divCommentModal").foundation("reveal","open")},validateTermsCheckbox=function(){var e=u("#termsAgreeRow #termsAndConditionsCheckbox");return e.length&&!e.is(":checked")?(u("#termsAgreeRow .lblTermsAndConditions.errors").show(),!1):(u("#termsAgreeRow .lblTermsAndConditions.errors").hide(),!0)},validateCommentForm=function(){resetCommentFormValidation(),u.validity.setup({outputMode:"label"}),u.validity.start(),u("#divCommentModal .required").require();var e=u.validity.end(),t=u("#divUserCommentForm").find("textarea#Comment"),n=t.val(),t=parseInt(t.attr("maxlength"));return 0<t&&n.length>t&&(n=n.substring(0,t)),"true"===SCM.UserCommentView.bShowDisclosure&&u('input[name="NoConflicts"]').is(":checked")&&""===u('textarea[name="Disclosure"]').val()?(u("#divCommentModal .lbldisclosure.errors").show(),!1):e.valid},resetCommentForm=function(){u("#divUserCommentForm").hide();var e=u("#divCommentModal");e.find("input, textarea").val(""),e.find("#displayAlert, div.captchaAlert").hide(),u('input[name="NoConflicts"]').removeAttr("checked"),u("#termsAndConditionsCheckbox").attr("checked",!1),u(".disclosureBox").hide(),u("#divCommentModal .btnCommentModalExit").hide(),u("#recaptcha_reload").trigger("click");e=e.find("#Author");e.attr("value",e.attr("dataauthorvalue")),resetCommentFormValidation()},resetCommentFormValidation=function(){var e=u("#divCommentModal");e.find(".error").not(".lbldisclosure.errors").remove(),o.hide(),e.find(".lbldisclosure.errors").hide(),u("#termsAgreeRow .lblTermsAndConditions.errors").hide(),o.text("")},submitCommentValues=function(){var t=u("#divUserCommentForm"),e=SCM.UserCommentView.resourceType,n=SCM.UserCommentView.resourceId,r="",i="";"true"===SCM.UserCommentView.showAffiliations&&(r=t.find("input#AffInstitution").val()),"true"===SCM.UserCommentView.bShowDisclosure&&(i=t.find("textarea#Disclosure").val()),u.ajax({type:"POST",url:"/Content/SubmitUserComment",data:{author:t.find("input#Author").val(),affInstitutions:r,disclosure:i,title:t.find("input#Title").val(),comment:t.find("textarea#Comment").val(),resourceType:e,resourceId:n,recaptchaChallege:u("#recaptcha_challenge_field").val(),recaptchaResponse:u("#recaptcha_response_field").val(),instanceName:SCM.UserCommentView.InstanceName},success:function(e){a.addClass("hide"),!0===e.Success?(t.hide(),u("#divCommentModal #displayAlert").show(),u("#divCommentModal .btnCommentModalExit").show(),"true"===SCM.UserCommentView.isNotModerated.toLowerCase()&&location.reload()):(a.addClass("hide"),u("div.captchaAlert").show())},error:function(e){"401"===e.status?(o.html("You must be logged in to submit a comment."),window.location="/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search)):o.html("Comments not saved. Please Try Again."),a.addClass("hide"),o.show()}})}},l.init=function(){l.detectIfFirefox(),l.initSkipNavToMainContent(),l.articleUserComments(),l.closeNavbarSearch(),l.expandNavbarSearch(),l.initAriaControls(),l.initFilterClickEvent(),l.initSearchResultsSort(),l.initFoundation(),l.initLazyLoad(),l.showAuthorInfo(),SCM.ChapterAnswerSet.registerAnswerLinkClick(),l.showFullAuthorList(),l.addAuthorFootnote(),l.showHideDropDown(),l.showRelatedBookWidgetIfHasContent(),l.showMoreRelatedContent(".grw-viewmorelink",".grw-hide-me"),l.showMoreRelatedContent(".mrw-viewmorelink",".mrw-hide-me"),l.showSpinner(),l.toggleMobileLanguageSubmenu(),l.toggleMobileMenu(),SCM.SiteJS.toggleMobileSignInForm(),l.toggleToolbarDropdown(),SCM.NavDropdown.registerNavDropdownEvents(),l.toggleMobileSearch(),l.toggleResponsiveLeftColumn(),SCM.PubHistory.registerToggle(),l.restrictedImages(),l.moveSubmitCommentLink(),l.addAuthorNotesJumpLink(),l.addDataSupplementsJumpLink(),l.addDataRepositoriesJumpLink(),l.addUserCommentJumpLink(),l.alertLinks(),l.alertKeyPress(),l.oupHeaderDropdowns(),l.initSigninForm(),l.initSelfServeNavigation(),l.toggleSelfServeNavigation(),l.setAllLinksTarget(),l.showPdfOnlyLink(),l.setBlockLink(),l.showFullDisclaimer(),l.showFullVersionInfo(),l.handleUnresolvedRelatedObjectLinks(),SCM.ChapterEndNotes.init(),SCM.ContentMetric.init()},l.windowLoadInit=function(){l.revealFigsTablesInModal(),l.revealFeaturedFigureInModal(),SCM.CitationModal.registerCitationModalEvents("getCitation"),l.launchSupersededContentModal(),l.setSelectedSearchFilter(),l.getNewSelectedFilter(),l.loadAllImagesIfUserIsAboutToUseJumpLinks(),l.showUnAuthenticatedSpans(),l.toggleSearchResultsDetails()},l.initArticleTopInfoAccessOptions=function(){var e=window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))+"/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search);u(".article-top-info-user-restricted-options").find(".article-top-info-sign-in").attr("href",e)}}(SCM.SiteJS=SCM.SiteJS||{},jQuery),function(r){function n(){SCM.SiteJS.getViewportWidth()<=1023?i.addClass("mobile"):i.removeClass("mobile")}var t,i=r(".page-column--left"),a=(r(".datepicker__input"),r(".microsite-search")),o=r(".mobile-search-dropdown"),s=r(".navbar-menu, .navbar-search-collapsed"),l=r(".navbar-search-advanced, .navbar-search-close, .navbar-search"),c=(r(".js-master-header").height(),SCM.SiteJS.getViewportWidth());r(window).on("resize",function(e){clearTimeout(t),t=setTimeout(function(){n();var e,t=SCM.SiteJS.getViewportWidth();c!==t&&(1023<=c&&r(".dropdown-panel, .site-menu").removeAttr("style"),i.hasClass("js-filters-open")?c<t&&1023<t&&r(document.body).removeClass("noscroll"):(r(document.body).removeClass("noscroll"),i.hide(),r(".responsive-issue-nav").hide(),r(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style"),c=SCM.SiteJS.getViewportWidth()),(c<=930||1101<=c)&&(s.removeAttr("style"),l.removeAttr("style"),r(".js-navbar-search-container").removeClass("tablet-viewport-active").addClass("tablet-viewport-layout")),931<=c&&(o.removeAttr("style"),a.removeAttr("style"),r(".dropdown-panel-wrap").children(".is-active").hide().removeClass("is-active"),r(".mobile-dropdown-toggle").removeClass("is-active"))),r(".al-author-info-wrap.open:visible").length&&r("#ContentColumn:visible").length&&(e=r(".al-author-info-wrap.open"),r(window).width()<1200?(t=(t=r("#ContentColumn")).position().left+t.width(),SCM.SiteJS.shiftOpenAuthorCards(e,t)):e.removeClass("shift-card"))},10),SCM.TreeBrowse.checkPageHeightForSeriesDropdown()}),window.addEventListener("orientationchange",function(){var e=r(window).scrollTop();r("body").animate({scrollTop:e},0)},!1),r(window).on("load",function(){SCM.SiteJS.windowLoadInit(),SCM.SiteJS.adjustRelatedTagsDisplay()}),r(function(){SCM.Logging.init(),SCM.JqueryMigrateLogger.init(),n(),SCM.SiteJS.init(),SCM.Toolbar.init(),SCM.PDFAccess.init(),SCM.SiteJS.setAccessIcons(),SCM.StickyElements.init(),SCM.AddReturnUrlToSocietyLinks(),SCM.JumpLinks.init(),SCM.RefLinks.init(),SCM.SiteJS.citationAriaExpand(),window.matchMedia("print")&&r(".video-js").length&&SCM.Utilities.Brightcove.init(),r(".custom-scroll").jScrollPane(),0<r(".widget-ArticleFulltext").length&&SCM.ArticleFulltext.init(),SCM.SiteJS.configureMathjax(),0<r(".widget-BookChapterMainView").length&&SCM.BookChapterMainView.init(),SCM.BookMetadata.init(),SCM.SiteJS.triggerAlertModalOnRedirect(),SCM.SiteJS.triggerSaveSearchModelOnRedirect(),SCM.SplitScreen.init(),SCM.TreeBrowse.init(),SCM.LoginBox.init(),SCM.Interstitial.init(),Theme.ArticleAbstract.init(),Theme.BookAbstract.init(),Theme.ChapterAbstract.init()}),r(document).ajaxStart(function(){r("body").css("cursor","wait")}).ajaxComplete(function(e,t,n){SCM.SiteJS.initFoundation(),SCM.SiteJS.initSearchResultsSort(),SCM.SolrSearch.ajaxComplete(),SCM.SiteJS.setAccessIcons(),SCM.SiteJS.setAllLinksTarget(),SCM.SiteJS.toggleResponsiveLeftColumn(),SCM.SiteJS.citationAriaExpand(),r("body").css("cursor","default"),SCM.SiteJS.abstractMathJax(),n.url.indexOf("brightcove")<0&&!window.matchMedia("print")&&SCM.Utilities.Brightcove.init(),SCM.TreeBrowse.checkPageHeightForSeriesDropdown(),SCM.Interstitial.DisableTriggerOnExternalLinks()})}(jQuery);var SCM=SCM||{};!function(e,d){var f=!1,p=d(".js-login-box-placeholder"),h="";function g(){var e;""===h&&d("#RedirectSiteUrl").length&&(e=d("#RedirectSiteUrl").val(),h=SCM.ZEncoderV1.Decode(e))}function m(e,n){var r=e.attr("href").split("&");d.each(r,function(e,t){t.startsWith("redirect_uri")&&(t=t.split("?"),r[e]="redirect_uri="+h+"/HTTPHandlers/"+n,1<t.length&&(r[e]+="?"+t[1]))}),e.attr("href",r.join("&"))}function v(e,t){var n=d(e).attr("href");for(-1!==t.indexOf("?%23")&&(t=t.replace("?%23","%23"));-1<n.indexOf('"');)n=n.replace('"',"%22");for(;-1<n.indexOf("RedirectUrlPlaceholder");)n=n.replace("RedirectUrlPlaceholder",t);d(e).attr("href",n)}function r(e,t){return e.replace("&"+t,"").replace("?"+t,"?").replace("?&","?")}function y(e){var t=!(0<arguments.length&&void 0!==e)||e,n=r(n=window.location.href,"login=true");return(n=(n=r(n,"error=login_retry")).includes("token=")?n.substring(0,n.indexOf("token=")-1):n).endsWith("?")&&(n=n.slice(0,-1)),t?SCM.ZEncoderV1.Encode(n):n}function b(){d(".js-login-box-placeholder").css("z-index","auto"),d("#InfoColumn").css("z-index",6e3),p.addClass("hide")}function t(e){"Escape"===e.key&&b()}function n(e){var t,n,r,i,a,o,s,l,c,u;S(e,d(".js-account-button"))?(p.toggleClass("hide"),d(".site-menu-lvl-0").find(".site-menu:visible").slideToggle("fast"),d(".f-dropdown:visible").slideToggle("fast"),f||(l=p,c=d(".js-account-button"),u=App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"",c=(c=c.attr("data-turnawayparams")).length?"?turnAwayParams="+c:"",d.get(u+"/Accounts/LoginBox/LoginBox"+c).done(function(e){l.html(e),f=!0,w(),g()})),d(".js-login-box-placeholder").css("z-index",6e3),d("#InfoColumn").css("z-index","auto")):S(e,d(".js-sign-out-link"))?(s=y(),d(".js-sign-out-link").each(function(e){v(d(this),s),m(d(this),"SAMS/LogoutHandler.ashx")}),window.location.href=d(".js-sign-out-link").attr("href")):S(e,d(".js-sign-in-link"))?((o=y()).includes("signzyin")&&o.includes("returnUrl")&&(c=d.deparam.querystring().returnUrl,o=c.includes("httpszazjzj")?c:SCM.ZEncoderV1.Encode(c)),d(".js-sign-in-link").not(".js-shibboleth-login").each(function(e){v(d(this),o),m(d(this),"Sigma/LoginHandler.ashx")}),d(".js-sign-in-link.js-shibboleth-login").each(function(e){var t=encodeURIComponent(h+"/HTTPHandlers/Sigma/LoginHandler.ashx?state=xredirecturl%3D"+o);v(d(this),t)}),window.location.href=d(".js-sign-in-link").attr("href")):S(e,d(".js-register-link"))?((a=y()).includes("signzyin")&&a.includes("returnUrl")||d(".js-register-link").each(function(e){var t=(t=d(this).attr("href")).substring(0,t.indexOf("returnUrl="));t+="returnUrl="+a,d(this).attr("href",t)}),window.location.href=d(".js-register-link").attr("href")):S(e,d(".js-society-sign-in"))?window.location.href=d(".js-society-sign-in").attr("href"):S(e,d(".js-login-help"))?(t=d(".js-login-help"),n=t,r=d("#divAccessHelp"),i=r.find(".js-access-help-close"),r.off("opened.fndtn.reveal"),r.on("opened.fndtn.reveal",function(){SCM.trapFocus.publicTrapFocus(r,i,n),i.off("click"),i.on("click",function(e){e.stopPropagation(),r.foundation("reveal","close"),n.focus()}),r.focus()}),r.foundation("reveal","open")):(t=e,(e=p).is(t.target)||e.has(t.target).length||b())}function w(){var e,t,n=(r=y(!1),e=window.location.host,t=encodeURIComponent(e),e=new URL(r).search.length?"&":"?",r+=e+"sigmaHost="+t,r+=window.location.hash),n=encodeURIComponent(n),r=d("#hfPlaceholderReturnUrlValue"),i=r.length?r.val():null;d(".society-links-logo, .society-links-url").each(function(){var e;i&&i.length&&(e=d(this)).attr("href",e.attr("href").replace(i,n))})}function S(e,t){return t.is(e.target)||t.has(e.target).length}e.init=function(){g(),w(),d(document).on("click",n),d(document).on("keyup",t)}}(SCM.LoginBox=SCM.LoginBox||{},jQuery);var SCM=SCM||{};!function(e,S){e.initTestPassword=function(e,t,n){var r=/[A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸ-ŹŻŽƁ-ƂƄƆ-ƇƉ-ƋƎ-ƑƓ-ƔƖ-ƘƜ-ƝƟ-ƠƢƤƦ-ƧƩƬƮ-ƯƱ-ƳƵƷ-ƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺ-ȻȽ-ȾɁɃ-ɆɈɊɌɎͰͲͶΆΈ-ΊΌΎ-ΏΑ-ΡΣ-ΫϏϒ-ϔϘϚϜϞϠϢϤϦϨϪϬϮϴϷϹ-ϺϽ-ЯѠѢѤѦѨѪѬѮѰѲѴѶѸѺѼѾҀҊҌҎҐҒҔҖҘҚҜҞҠҢҤҦҨҪҬҮҰҲҴҶҸҺҼҾӀ-ӁӃӅӇӉӋӍӐӒӔӖӘӚӜӞӠӢӤӦӨӪӬӮӰӲӴӶӸӺӼӾԀԂԄԆԈԊԌԎԐԒԔԖԘԚԜԞԠԢԱ-ՖႠ-ჅḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾἈ-ἏἘ-ἝἨ-ἯἸ-ἿὈ-ὍὙὛὝὟὨ-ὯᾸ-ΆῈ-ΉῘ-ΊῨ-ῬῸ-Ώℂℇℋ-ℍℐ-ℒℕℙ-ℝℤΩℨK-ℭℰ-ℳℾ-ℿⅅↃⰀ-ⰮⱠⱢ-ⱤⱧⱩⱫⱭ-ⱯⱲⱵⲀⲂⲄⲆⲈⲊⲌⲎⲐⲒⲔⲖⲘⲚⲜⲞⲠⲢⲤⲦⲨⲪⲬⲮⲰⲲⲴⲶⲸⲺⲼⲾⳀⳂⳄⳆⳈⳊⳌⳎⳐⳒⳔⳖⳘⳚⳜⳞⳠⳢꙀꙂꙄꙆꙈꙊꙌꙎꙐꙒꙔꙖꙘꙚꙜꙞꙢꙤꙦꙨꙪꙬꚀꚂꚄꚆꚈꚊꚌꚎꚐꚒꚔꚖꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽ-ꝾꞀꞂꞄꞆꞋＡ-Ｚ]|\ud801[\udc00-\udc27]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]/,i=/[a-zªµºß-öø-ÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķ-ĸĺļľŀłńņň-ŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżž-ƀƃƅƈƌ-ƍƒƕƙ-ƛƞơƣƥƨƪ-ƫƭưƴƶƹ-ƺƽ-ƿǆǉǌǎǐǒǔǖǘǚǜ-ǝǟǡǣǥǧǩǫǭǯ-ǰǳǵǹǻǽǿȁȃȅȇȉȋȍȏȑȓȕȗșțȝȟȡȣȥȧȩȫȭȯȱȳ-ȹȼȿ-ɀɂɇɉɋɍɏ-ʓʕ-ʯͱͳͷͻ-ͽΐά-ώϐ-ϑϕ-ϗϙϛϝϟϡϣϥϧϩϫϭϯ-ϳϵϸϻ-ϼа-џѡѣѥѧѩѫѭѯѱѳѵѷѹѻѽѿҁҋҍҏґғҕҗҙқҝҟҡңҥҧҩҫҭүұҳҵҷҹһҽҿӂӄӆӈӊӌӎ-ӏӑӓӕӗәӛӝӟӡӣӥӧөӫӭӯӱӳӵӷӹӻӽӿԁԃԅԇԉԋԍԏԑԓԕԗԙԛԝԟԡԣա-ևᴀ-ᴫᵢ-ᵷᵹ-ᶚḁḃḅḇḉḋḍḏḑḓḕḗḙḛḝḟḡḣḥḧḩḫḭḯḱḳḵḷḹḻḽḿṁṃṅṇṉṋṍṏṑṓṕṗṙṛṝṟṡṣṥṧṩṫṭṯṱṳṵṷṹṻṽṿẁẃẅẇẉẋẍẏẑẓẕ-ẝẟạảấầẩẫậắằẳẵặẹẻẽếềểễệỉịọỏốồổỗộớờởỡợụủứừửữựỳỵỷỹỻỽỿ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾰ-ᾴᾶ-ᾷιῂ-ῄῆ-ῇῐ-ΐῖ-ῗῠ-ῧῲ-ῴῶ-ῷⁱⁿℊℎ-ℏℓℯℴℹℼ-ℽⅆ-ⅉⅎↄⰰ-ⱞⱡⱥ-ⱦⱨⱪⱬⱱⱳ-ⱴⱶ-ⱼⲁⲃⲅⲇⲉⲋⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⲳⲵⲷⲹⲻⲽⲿⳁⳃⳅⳇⳉⳋⳍⳏⳑⳓⳕⳗⳙⳛⳝⳟⳡⳣ-ⳤⴀ-ⴥꙁꙃꙅꙇꙉꙋꙍꙏꙑꙓꙕꙗꙙꙛꙝꙟꙣꙥꙧꙩꙫꙭꚁꚃꚅꚇꚉꚋꚍꚏꚑꚓꚕꚗꜣꜥꜧꜩꜫꜭꜯ-ꜱꜳꜵꜷꜹꜻꜽꜿꝁꝃꝅꝇꝉꝋꝍꝏꝑꝓꝕꝗꝙꝛꝝꝟꝡꝣꝥꝧꝩꝫꝭꝯꝱ-ꝸꝺꝼꝿꞁꞃꞅꞇꞌﬀ-ﬆﬓ-ﬗａ-ｚ]|\ud801[\udc28-\udc4f]|\ud835[\udc1a-\udc33\udc4e-\udc54\udc56-\udc67\udc82-\udc9b\udcb6-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udccf\udcea-\udd03\udd1e-\udd37\udd52-\udd6b\udd86-\udd9f\uddba-\uddd3\uddee-\ude07\ude22-\ude3b\ude56-\ude6f\ude8a-\udea5\udec2-\udeda\udedc-\udee1\udefc-\udf14\udf16-\udf1b\udf36-\udf4e\udf50-\udf55\udf70-\udf88\udf8a-\udf8f\udfaa-\udfc2\udfc4-\udfc9\udfcb]/,a=/[!"#$%&'()*+,-./:;<=>?@[\]\\^_`{|}~]/,o=/[0-9]/,s="",l=S(".password-input-check-wrap"),c=l.find(".icon-case"),u=(l.find(".password-confirm-icon"),l.find(".password-input-icon")),d=l.find(".icon-length"),f=l.find(".icon-number"),p=l.find(".icon-lower-case"),h=l.find(".icon-special-char"),g=l.find(".password-check-wrap"),m=S(".password-confirm-wrap"),v=m.find(".password-confirm-icon"),y=S(".js-sigma-enabled"),b=!1;function w(e){s===e?(v.hide(),b&&(m.find(n).addClass("btn-green"),m.find(".register-button-overlay").hide())):(""===e||null===e?v.hide():v.show(),SCM.MyAccount.lockRegistrationButton())}l.on("keyup",e,function(){var e=S(this).val();s=e,b?g.hide():g.show(),10<=e.length?SCM.MyAccount.showValidPasswordCriteria(d):SCM.MyAccount.showInvalidPasswordCriteria(d),r.test(e)?SCM.MyAccount.showValidPasswordCriteria(c):SCM.MyAccount.showInvalidPasswordCriteria(c),o.test(e)?SCM.MyAccount.showValidPasswordCriteria(f):SCM.MyAccount.showInvalidPasswordCriteria(f),i.test(e)?SCM.MyAccount.showValidPasswordCriteria(p):SCM.MyAccount.showInvalidPasswordCriteria(p),a.test(e)?SCM.MyAccount.showValidPasswordCriteria(h):SCM.MyAccount.showInvalidPasswordCriteria(h),d.hasClass("green")&&c.hasClass("green")&&f.hasClass("green")&&(0===y.length||p.hasClass("green")&&h.hasClass("green"))?(b=!0,g.fadeOut(1500),u.hide(),e===l.find(t).val()&&($iconConfirm.hide(),l.find(n).addClass("btn-green"),l.find(".register-button-overlay").hide())):(b=!1,g.show(),SCM.MyAccount.lockRegistrationButton(),u.show()),""!==e&&null!==e||(g.hide(),u.hide());e=S(t).val();e&&w(e)}),m.on("keyup",t,function(){w(S(this).val())}),S(document).on("click",function(){g.hide()})}}(SCM.TestPassword=SCM.TestPassword||{},jQuery);var SCM=SCM||{};!function(e,o){e.setActiveJumplink=function(){o(".section-jump-link").on("click",function(){o(".section-jump-link").removeClass("active"),o(this).closest(".section-jump-link").addClass("active")})},e.toggleNestedJumplinks=function(){o(".section-jump-link .list-toggle, .section-jump-link .mobile-list-toggle").on("click",function(e){e.preventDefault();var t=o(this),n=t.parents(".section-jump-link__link-wrap").siblings("ul.section-jump-link__sublist"),r="icon-general-arrow-filled-right",i="icon-general-arrow-filled-down",a="icon-general_arrow-right",e="icon-general_arrow-down";t.hasClass("list-toggle")&&(t.hasClass(r)?t.removeClass(r).addClass(i):t.removeClass(i).addClass(r)),t.hasClass("mobile-list-toggle")&&(t.hasClass(a)?t.removeClass(a).addClass(e):t.removeClass(e).addClass(a)),"false"===t.attr("aria-expanded")?t.attr("aria-expanded","true"):t.attr("aria-expanded","false"),n.slideToggle(),"false"===n.attr("aria-hidden")?n.attr("aria-hidden","true"):n.attr("aria-hidden","false")})},e.filterTopicTerms=function(){o(".issue-topic__input").keyup(function(){o(".issue-topic__term").hide();var e=o(this).val(),t=e.toLowerCase();o.extend(o.expr[":"],{containsIN:function(e,t,n,r){return 0<=(e.textContent||e.innerText||"").toLowerCase().indexOf((n[3]||"").toLowerCase())}}),o(".issue-topic__term:containsIN('"+t+"')").show(),null!==e&&""!==e||o(".issue-topic__term").show()})},e.updateIssueBrowseOnChange=function(){o(".issue-browse-select").on("change",function(){window.location.href=o(this).val()})}}(SCM.Issues=SCM.Issues||{},jQuery),jQuery(document).ready(function(n){SCM.Issues.filterTopicTerms(),SCM.Issues.toggleNestedJumplinks(),SCM.Issues.updateIssueBrowseOnChange(),window.location.hash&&n('.js-jumplink[href="'+window.location.hash+'"]').addClass("active").parents(".section-jump-link").slice(1).children(".section-jump-link__link-wrap").children(".list-toggle").click(),SCM.SiteJS.getViewportWidth()<=900&&n("#IssuesList > option").each(function(){var e,t=n(this).text();47<t.length&&(0<(e=t.substr(0,47).lastIndexOf(" "))&&(e=t.substr(0,e)+"...",n(this).text(e)))})});var SCM=SCM||{};!function(ns,$){var baseSiteUrl=$("#hfSiteURL");function registerKbartEvents(){$(document).on("click",".js-kbart-submit-btn",function(){submitKbartReportRequest()}),$(document).on("click",".reveal-modal-bg",function(e){closeKbartSubmitModal(e)}),$(".js-kbart-submit-close").on("click",function(e){closeKbartSubmitModal(e)})}function closeKbartSubmitModal(e){var t=$("#kbartSubmitModal");e.stopPropagation(),t.foundation("reveal","close"),$(".js-kbart-submit-btn").removeClass("disabled"),$("body").removeClass("kbart-disable-scroll")}function showKbartSubmitModal(){var e=$("#kbartSubmitModal"),t=document.activeElement;e.off("opened.fndtn.reveal"),e.on("opened.fndtn.reveal",function(){e.focus(),SCM.trapFocus.publicTrapFocus(e,e.find(".js-kbart-submit-close"),t),$("body").addClass("kbart-disable-scroll")}),e.foundation("reveal","open")}function submitKbartReportRequest(){$(".js-kbart-error").addClass("hidden");var t=$(".js-kbart-submit-btn");t.addClass("disabled");var e,n,r,i=$("input[name='kbart-selection']:checked");i.length?(e=i.val(),n=$(".kbart-institution[data-institutionid='"+e+"']").text(),r="/OUPKbart/GetKbartJournalFile",i.hasClass("js-kbart-book-download")&&(r="/OUPKbart/GetKbartBookFile"),void 0!==(i=$(".js-kbart-email").val())&&$.post(r,{institutionAcctId:e,institutionName:n,emailAddress:i},function(e){"Success"===e.Data?showKbartSubmitModal():"Invalid Email"===e.Data?(t.removeClass("disabled"),$(".js-invalid-kbart-email").parent().removeClass("hidden")):(t.removeClass("disabled"),$(".js-kbart-default-error").parent().removeClass("hidden"))}).fail(function(){t.removeClass("disabled"),$(".js-kbart-default-error").parent().removeClass("hidden")})):(t.removeClass("disabled"),$(".js-no-kbart-options").parent().removeClass("hidden"))}function hasInputErrors(e,t){var n=$("#myaccount-tabs-content");n.find(".success-message").html("").hide(),n.find(".error-message").html("").hide();var r=/[<>]/;if(r.test(e)||r.test(t)){t=n.find("#err-message-angle-brackets").html();return n.find(".error-message").html(t).show(),$("html, body").animate({scrollTop:n.offset().top},10),1}}function showPersonalInfoErrors(e){var t=$("#myaccount-tabs-content");t.find(".error-message").html(e.Html).show(),$("html, body").animate({scrollTop:t.offset().top},10)}function updatePersonalInfo(e,t){var n=$("#myaccount-tabs-content");$(".js-header-account-info-user-fullname").html(t),n.find(".success-message").html(e.Html).show();n=$(".at-authenticated-user");n.length&&n.text().length&&(0<(e=n.text().split(":")).length&&n.text(e[0]+": "+t))}function updateRedirectUri(){var e=$("#sigmaSigninUrl").val(),t=$("#RedirectSiteUrl").val(),n=SCM.ZEncoderV1.Decode(t),r=e.split("&");return $.each(r,function(e,t){t.startsWith("redirect_uri")&&(t=t.split("?"),r[e]="redirect_uri="+n+"/HTTPHandlers/Sigma/LoginHandler.ashx",1<t.length&&(r[e]+="?"+t[1]))}),r.join("&")}ns.initMyAccount=function(){var t,n=$(".myaccount-tabs-inner-wrap"),r=$(".mobile-nav-icon");$(document).on("click",".myaccount-mobile-nav",function(e){e.stopPropagation(),n.toggle(),r.hasClass("icon-general-arrow-filled-down")?r.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-up"):r.removeClass("icon-general-arrow-filled-up").addClass("icon-general-arrow-filled-down")}),$(document).click(function(){n.hide().removeAttr("style")}),$(window).on("scroll",function(e){clearTimeout(t),t=setTimeout(function(){n.removeAttr("style")},50)}),$(window).on("resize",function(e){clearTimeout(t),t=setTimeout(function(){n.removeAttr("style")},50)});var e=$(".myaccount-tabs-inner-wrap").find("li.is-active");$("#myaccount-tabs").find(".myaccount-current-label").html(e.text()),registerKbartEvents(),$(document).on("click","#myaccount-tabs-content .js-update-acct-sigma",function(){$("#updatePersonalDetailsBtn").addClass("disabled");var e=$("#myaccount-tabs-content"),t=e.find("#FullName").val(),n=e.find("#Phone").val(),r=e.find("#CountryList").val(),e=$("#myaccount-tabs-content").find("#MyAccountToken").val();hasInputErrors(t,n)||$.post("/OUPMyAccount/UpdateAccountSigma",{fullname:t,phone:n,country:r,token:e},function(e){$("#updatePersonalDetailsBtn").removeClass("disabled"),null!=e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),e.Success?updatePersonalInfo(e,t):showPersonalInfoErrors(e))})}),$(document).on("click","#myaccount-tabs-content .js-update-acct",function(){var t=$("#myaccount-tabs-content");t.find(".success-message").html("").hide(),t.find(".error-message").html("").hide();var e=t.find("#Title").val(),n=t.find("#FirstName").val(),r=t.find("#LastName").val(),i=t.find("#Phone").val(),a=t.find("#CountryList").val(),o=$("#myaccount-tabs-content").find("#MyAccountToken").val(),s=/[<>]/;if(s.test(e)||s.test(n)||s.test(r)||s.test(i)){s=t.find("#err-message-angle-brackets").html();return t.find(".error-message").html(s).show(),void $("html, body").animate({scrollTop:t.offset().top},10)}$.post("/OUPMyAccount/UpdateAccount",{title:e,firstName:n,lastName:r,phone:i,country:a,token:o},function(e){null!=e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),e.Success?($(".js-header-account-info-user-fullname").html(n+" "+r),t.find(".success-message").html(e.Html).show()):(t.find(".error-message").html(e.Html).show(),$("html, body").animate({scrollTop:t.offset().top},10)))})});var u=$("#change-password").find(".error-message").html();SCM.TestPassword.initTestPassword("#newPassword","#confirmNewPassword","#changePasswordBtn"),$(document).on("click","#changePasswordBtn",function(){var t=$("#change-password"),n=t.find(".success-message");n.hide();var r=t.find(".error-message");r.html(u).hide();var e={},i=t.find("#currentPassword").val(),a=!1;""===i&&(e.currentPassword=$("label[for=currentPassword]").text().replace("*",""),a=!0);var o=t.find("#newPassword").val();""===o&&(e.newPassword=$("label[for=newPassword]").text().replace("*",""),a=!0);var s=t.find("#confirmNewPassword").val();if(""===s&&(e.confirmNewPassword=$("label[for=confirmNewPassword]").text().replace("*",""),a=!0),a){for(var l in e)r.append("<p> * "+e[l]+"</p>").show();$("html, body").animate({scrollTop:t.offset().top},10)}else{r.html("");var a=$("#myaccount-tabs-content").find("#MyAccountToken").val(),c=$(".js-sigma-enabled").length;$.post("/OUPMyAccount/ChangePassword",{currentPassword:i,newPassword:o,confirmNewPassword:s,token:a},function(e){e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),e.Messages&&e.Messages.length&&"1"===e.Messages[0]?(n.show(),0===c&&$.post("/LOGIN",{user:e.Messages[1],pass:o,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(e){"1"!==e?location.href="/sign-in":$.post("/OUPMyAccount/RefreshToken",{},function(e){null!==e&&e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId)})})):(e.Messages&&e.Messages.length&&e.Messages[1]&&r.html(e.Messages[1]).show(),$("html, body").animate({scrollTop:t.offset().top},10)))})}});var l=$("#change-email-address").find(".error-message").html();$(document).on("click","#changeEmailBtn",function(){var t=$("#change-email-address");t.find(".success-message").html("");var n=t.find(".error-message");n.html(l).hide();var e={},r=!1,i=t.find("#newEmailAddress").val();""===i&&(e.newEmailAddress=$("label[for=newEmailAddress]").text().replace("*",""),r=!0);var a=t.find("#confirmNewEmailAddress").val();""===a&&(e.confirmNewEmailAddress=$("label[for=confirmNewEmailAddress]").text().replace("*",""),r=!0);var o=t.find("#currentPassword").val();if(void 0!==o&&""===o&&(e.password=$("label[for=currentPassword]").text().replace("*",""),r=!0),r){for(var s in e)n.append("<p>"+e[s]+"</p>").show();$("html, body").animate({scrollTop:t.offset().top},10)}else{n.html("");r=$("#myaccount-tabs-content").find("#MyAccountToken").val();$.post("/OUPMyAccount/RequestEmailAddressChange",{newEmailAddress:i,confirmNewEmailAddress:a,password:o,token:r},function(e){null!=e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),null==e.Messages||null==e.Messages[0]||""==e.Messages[0]?(t.children(".change-email-address-form").hide(),t.children(".change-email-address-verification").show()):n.html(e.Messages[0]).show())})}}),$(document).on("click","#changeEmailVerificationBtn",function(){var n=$("#change-email-address"),r=n.find(".success-message");r.html("").hide();var i=n.find(".error-message");i.html("").hide();var e=n.find("#changeEmailVerificationCode").val();0<e.length&&$.post("/OUPMyAccount/VerifyEmailAddressChange",{verificationCode:e},function(e){var t;"1"==e[0]?"True"===n.find("#hfUseSigma").val()?(t=n.find("#hfSigmaLogoutUrl").val(),window.location.href=t):(r.html(e[1]).show(),$.get("/LOGOUT",{dest:"/HTTPHandlers/SAMs/LogoutHandler.ashx"}).done(function(){}).fail(function(){})):(i.html(e[1]).show(),$("html, body").animate({scrollTop:n.offset().top},10))})}),$(".js-newPassowrd").on("paste",function(e){return e.preventDefault(),!1})},ns.initSavedSearches=function(){$(".solrSearchSaveWidget table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,headers:{4:{sorter:!1}},sortList:[[0,0]]}),$(".solrSearchSaveWidget .save-search-delete").click(function(){SCM.MyAccount.deleteSaveSearch($(this))}),$(".solrSearchSaveWidget .ddlSearchAlertFrequencyMyAccount").change(function(){SCM.MyAccount.changeUserAlert($(this))}),$(".solrSearchSaveWidget .save-search-rename-rename").click(function(){var e=$(this).closest("td"),t=e.find(".save-search-name-link");t.hide(),e.find(".save-search-input").val(t.text()).css("display","inline-block").focus(),e.find(".save-search-rename-cancel").show(),e.find(".save-search-rename-save").show(),$(this).hide()}),$(".solrSearchSaveWidget .save-search-rename-cancel").click(function(){var e=$(this).closest("td");e.find(".save-search-name-link").show(),e.find(".save-search-input").hide(),e.find(".save-search-rename-rename").show(),e.find(".save-search-rename-save").hide(),$(this).hide()}),$(".solrSearchSaveWidget .save-search-rename-save").click(function(){var e=$(this),t=e.closest("td"),n=t.find(".save-search-input"),r=e.closest("tr").data("usersearchid"),i=n.val(),e=t.find(".save-search-name-link");i.length&&(SCM.MyAccount.renameSaveSearch(i,r,e),n.hide(),e.show(),t.find(".save-search-rename-rename").show(),t.find(".save-search-rename-cancel").hide(),$(this).hide())}),$(".solrSearchSaveWidget .save-search-input").on("keypress",function(e){var t=$(this).closest("td"),n=$(this).val(),r=t.find(".save-search-name-link");13===(e.keyCode||e.which)&&(e.preventDefault(),n.length&&(e=t.closest("tr").data("usersearchid"),SCM.MyAccount.renameSaveSearch(n,e,r),$(this).hide(),r.show(),t.find(".save-search-rename-rename").show(),t.find(".save-search-rename-save").hide(),t.find(".save-search-rename-cancel").hide()))})},ns.bindTableSorter=function(e){$(e).trigger("update");var t=$(e).get(0).config.sortList;$(e).trigger("sorton",[t])},ns.deleteSaveSearch=function(delElem){$(".alerts-wrap-cover").removeClass("uncovered"),$(".alerts-wrap-cover").addClass("covered");var ajaxUrl="//"+baseSiteUrl.val()+"/Solr/DeleteSolrSearchInfoWithToken",parentElem=delElem.closest("tr"),id=parentElem.data("usersearchid"),userAlertId=parentElem.data("useralertid"),token=$("#SolrSearchAuthToken").val();$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{userSearchId:id,userAlertId:userAlertId,token:token},success:function(e){null!=e&&(e.ReturnId&&$("#SolrSearchAuthToken").val(e.ReturnId),$(".solrSearchSaveWidget .solrSearchSaveModel .message").html(e.Html).parent().foundation("reveal","open"),e.Success&&parentElem.remove())},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.log("error: "+err),console.log("status: "+textStatus))}}).done(function(){SCM.MyAccount.bindTableSorter($(".saved-searches-table.tablesorter")),$(".alerts-wrap-cover").removeClass("covered"),$(".alerts-wrap-cover").addClass("uncovered")})},ns.changeUserAlert=function(upElem){var ajaxUrl="//"+baseSiteUrl.val()+"/Solr/UpdateUserAlertWithToken",parentElem=upElem.closest("tr"),id=parentElem.data("usersearchid"),userAlertId=parentElem.data("useralertid"),scheduleId=upElem.val(),token=$("#SolrSearchAuthToken").val();$(".alerts-wrap-cover").removeClass("uncovered"),$(".alerts-wrap-cover").addClass("covered"),$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{userSearchId:id,userAlertId:userAlertId,scheduleId:scheduleId,token:token},success:function(e){var t;null!=e&&(null!=(t=JSON.parse(e.ReturnId))&&null!=t.Token&&$("#SolrSearchAuthToken").val(t.Token),$(".solrSearchSaveWidget .solrSearchSaveModel .message").html(e.Html).parent().foundation("reveal","open"),e.Success&&null!=t&&null!=t.ReturnId&&parentElem.data("useralertid",t.ReturnId))},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.log("error: "+err),console.log("status: "+textStatus))}}).done(function(){$(".alerts-wrap-cover").removeClass("covered"),$(".alerts-wrap-cover").addClass("uncovered")})},ns.renameSaveSearch=function(searchName,userSearchId,$linkElement){var ajaxUrl="//"+baseSiteUrl.val()+"/Solr/RenameSolrSearchInfoWithToken",token=$("#SolrSearchAuthToken").val();$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{searchName:searchName,userSearchId:userSearchId,token:token},success:function(e){null!=e&&(e.ReturnId&&$("#SolrSearchAuthToken").val(e.ReturnId),"Updated Successfully"==e.Html&&$linkElement.text(searchName),$(".solrSearchSaveWidget .solrSearchSaveModel .message").html(e.Html).parent().foundation("reveal","open"))},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.log("error: "+err),console.log("status: "+textStatus))}}).done(function(){SCM.MyAccount.bindTableSorter($(".saved-searches-table.tablesorter"))})},ns.initRegister=function(e){var f=$(".widget-Register");null!=e&&0<e.length&&(f.find(".error-message").html(e).show(),SCM.MyAccount.clearLastErrorMessage()),f.on("click","#showPassword",function(){f.find("#Password, #ConfirmPassword").each(function(){var e=$(this).clone();e.attr("type","text"),e.attr("autocomplete","off"),e.attr("value",$(this).val()),$(this).after(e),$(this).remove()}),$(this).hide(),$(this).siblings("#hidePassword").show()}),f.on("click","#hidePassword",function(){f.find("#Password, #ConfirmPassword").each(function(){var e=$(this).clone();e.attr("type","password"),e.removeAttr("autocomplete"),e.attr("value",$(this).val()),$(this).after(e),$(this).remove()}),$(this).hide(),$(this).siblings("#showPassword").show()}),f.on("click","#registerBtn",function(){f.find(".error-message").html().hide,$("#registerBtn").addClass("disabled");var t=f.find("#EmailAddress").val(),n=f.find("#Password").val(),e=f.find("#ConfirmPassword").val(),r=f.find("#hpcName").val(),i=(f.find(".txtCaptchaInput").val(),$("#recaptcha_challenge_field").val(),$("#recaptcha_response_field").val(),f.find("#registerIssueAlert")),a=$(".js-captcha-simple").length,o=$(".js-captcha-normal").length,s=$(".js-captcha-input").val(),l=!1;null!=i&&(l=!!i.is(":checked"));var c=f.find("#hfAlertJournalId"),i=null!=c&&0<c.length?c.val():0,c=f.find("#hfAlertSiteId"),c=null!=c&&0<c.length?c.val():0,u=l?"?siteId="+c+"&journalId="+i:"",d=$(".js-sigma-enabled").length;0<r.length?(console.log("Honeypot captcha triggered. Are you a bot?"),$("#registerBtn").removeClass("disabled")):$.post("/OUPMyAccount/Register",{email:t,password:n,confirmPassword:e,alertSiteId:l?c:0,alertJournalId:l?i:0,captchaResponse:o?grecaptcha.getResponse():"",simpleCaptchaResponse:a?s:""},function(e){$("#registerBtn").removeClass("disabled"),"OK"===e.trim()?d?(e=updateRedirectUri(),window.location=e):$.post("/LOGIN",{user:t,pass:n,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"+u}).done(function(e){"1"===e?SCM.SiteJS.loginReturnBack():f.find(".error-message").html("The account has been created, but the login failed. Please try login again.").show()}):window.location.reload()})}),SCM.TestPassword.initTestPassword("#Password","#ConfirmPassword","#registerBtn")},ns.clearLastErrorMessage=function(){$.post("/OUPMyAccount/ClearLastErrorMessage")},ns.lockRegistrationButton=function(){$(".register-form-wrap").find("#registerBtn").removeClass("btn-green"),$(".register-form-wrap").find(".register-button-overlay").show()},ns.showValidPasswordCriteria=function(e){e.removeClass("icon-general-close red").addClass("icon-general-check green"),e.siblings(".password-check-label").addClass("fade")},ns.showInvalidPasswordCriteria=function(e){e.removeClass("icon-general-check green").addClass("icon-general-close red"),e.siblings(".password-check-label").removeClass("fade")},ns.initForgotPassword=function(){var e=$("#forgot-password").find(".error-message").html();$("#forgotPasswordBtn").on("click",function(){var n=$("#forgot-password"),r=n.find(".success-message"),i=n.find(".error-message");r.html("").hide(),i.html(e).hide();var a=n.find("#contactEmail").val();0<a.length?$.post("/OUPMyAccount/ForgotPassword",{email:a},function(e){var t;null==e||""==e?(t=n.find(".success-message-template").html().replace("{0}",a),r.html(t).show()):(i.html(e).show(),$("html, body").animate({scrollTop:n.offset().top},10))},"html"):(i.append("<p> * "+$("label[for=contactEmail]").text().replace("*","")+"</p>").show(),$("html, body").animate({scrollTop:n.offset().top},10))})},ns.initResetPassword=function(){$("#changePasswordBtn").on("click",function(){var t=$("#change-password"),n=t.find(".success-message"),r=t.find(".error-message"),e=$.deparam.querystring().t,i=t.find("#newPassword").val(),a=t.find("#confirmNewPassword").val();$.post("/OUPMyAccount/ResetPassword",{token:e,newPassword:i,confirmNewPassword:a},function(e){null==e||""==e?(n.show(),r.hide()):(n.hide(),r.html(e).show(),$("html, body").animate({scrollTop:t.offset().top},10))},"html")}),SCM.TestPassword.initTestPassword("#newPassword","#confirmNewPassword","#changePasswordBtn")},ns.countSubjectChoices=function(){$("#communication-preferences-subject-choices").find(".topics-selected-wrap").each(function(){var e=$(this).closest("li").find("input[type=checkbox]"),t=e.filter(":checked");$(this).find(".totalCount").html(e.length),$(this).find(".checkedTotal").html(t.length),$(this).show()})},ns.changeUserTypeSubjects=function(t){var e=$("#communication-preferences");$("#userTypeSubjectHeader").hide();var n=e.find("#userTypes").val();"3"===n&&$("#userTypeSubjectHeader").show(),e.find("ul#userTypeSubjects > li").each(function(){var e=$(this).find("input[type=checkbox]");$(this).attr("data-classification-id")===n?($(this).show(),t&&e.prop("checked",e.data("checked"))):($(this).hide(),t&&e.prop("checked",!1))})},ns.initActivateSubscription=function(e){var t=$(".activate-subscription-wrap");null!=e&&0<e.length&&(t.find(".error-message").html(e).show(),SCM.MyAccount.cleanLastErrorMessage());var i=0<$("div.register-captcha-text-simple-sub").length,a=0<$("div.register-captcha-text-normal-sub").length,o="txtCaptchaInputId";a?resetCaptchaElement():i&&(o+="-0"),$("#activateSubscriptionBtn").on("click",function(){$("#activateSubscriptionBtn").addClass("disabled");var e,t,n=$(".activate-subscription-wrap"),r=n.find(".error-message");r.html("").hide(),n.find("#successMessage").hide(),!1===$("#activateSubscriptionTermsConditions").is(":checked")?(r.html($("#activateSubErrTermsConditions").html()).show(),$("#activateSubscriptionBtn").removeClass("disabled"),$("html, body").animate({scrollTop:n.offset().top},10)):(e=$("#activateSubscriptionToken").val(),t=$("#hdnSelectedInstitutionId").val(),n=$('input[name="account-type"]:checked').val(),0<e.length?$.post("/OUPMyAccount/ActivateSubscriptionSubmitToken",{token:e,accountId:t,accountType:n,captchaResponse:a?grecaptcha.getResponse(0):"",simpleCaptchaResponse:i?document.getElementById(o).value:"",captchaInstanceNumber:0},function(e){"subscriptions"===e?location.href="/my-account/subscriptions":"institutional-settings"===e?setTimeout(function(){location.href="/my-account/institutional-settings"},1e3):window.location.reload()},"html").fail(function(e,t,n){$("#activateSubscriptionBtn").removeClass("disabled"),r.html('We encountered a problem when trying to activate your subscription. Please try again. If the problem continues, please contact <a href="/journals/pages/contact_us/customer_services">customer services</a>.').show()}):$("#activateSubscriptionBtn").removeClass("disabled"))}),$("#activateSubscriptionToken").on("keypress",function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),$("#activateSubscriptionBtn").click())})},ns.cleanLastErrorMessage=function(){$.post("/OUPMyAccount/CleanLastErrorMessage")}}(SCM.MyAccount=SCM.MyAccount||{},jQuery),$(document).ready(function(){var t,n=$("#journalAddEditDiv"),r=$("#journalAddEditDiv .add-new-alert .new-alert-row-wrap");$(document).on("click",".myaccount-tabs-inner-wrap div",function(){$(".tabbed-content-overlay").show()}),$("#myaccount-tabs-content").on("DOMSubtreeModified",function(){$(".tabbed-content-overlay").hide()}),$("#institutionalLogoURL").keyup(function(){$(".logoPreview").attr("src",$(this).val()),$(".logoPreview").error(function(){$(this).attr("src","/Images/grey.gif")})});function i(e){n.hasClass("open")&&!e.hasClass("js-save-alerts")&&$(document).on("closed.fndtn.reveal","[data-reveal]",function(){r.html(t)})}$(document).on("opened.fndtn.reveal","[data-reveal]",function(){t=r.html(),$(document).on("mouseup.myAccount",function(e){e=$(e.target);i(e)}),$(document).on("keyup.myAccount",function(e){e=$(e.target);i(e)})}),$(document).on("closed.fndtn.reveal","[data-reveal]",function(){$(document).off("mouseup.myAccount"),$(document).off("keyup.myAccount")}),SCM.MyAccount.initRegister($("#lastErrorMessage").val()),SCM.MyAccount.initInstitutionalSettings(),SCM.MyAccount.initSubscriptions()});var SCM=SCM||{};!function(e,n){function r(e){n("#hdnSelectedInstitutionId").val(e)}e.institutionalAccountClick=function(e){var t=n(this).attr("data-account-id");n(".js-institution-dropdown-wrap").length&&(n(".js-institution-dropdown-wrap").removeClass("hide"),t=n(".js-institution-dropdown-wrap").find(":selected").val()),r(t)},e.individualAccountClick=function(){n(".js-institution-dropdown-wrap").removeClass("hide").addClass("hide"),r(n(this).attr("data-account-id"))},e.institutionDropdownChange=function(){r(n(this).val())}}(SCM.MyAccount=SCM.MyAccount||{},jQuery),$(function(){$(".js-account-type-individual").is(":checked")||$(".js-account-type-individual").attr("checked","checked"),$(".js-account-type-institutional").on("click",SCM.MyAccount.institutionalAccountClick),$(".js-account-type-individual").attr("checked","checked").on("click",SCM.MyAccount.individualAccountClick),$(".js-institution-dropdown").on("change",SCM.MyAccount.institutionDropdownChange)});var SCM=SCM||{};!function(e,a){e.initCommunicationPreferences=function(e){a("#communication-preferences").length&&(SCM.MyAccount.countSubjectChoices(),a("#communication-preferences-subject-choices").on("click",".mainSubjects > a",function(){a(this).siblings("ul").slideToggle(),a(this).children("i").hasClass("icon-general-arrow-filled-down")?a(this).children("i").removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):a(this).children("i").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")}),a("#communication-preferences-subject-choices").on("click","input[type=checkbox]",function(){a(this).next("ul").find("input[type=checkbox]").prop("checked",!a(this).is(":checked")),SCM.MyAccount.countSubjectChoices()}),null!=e&&0<e&&a("#communication-preferences #userTypes").val(e),SCM.MyAccount.changeUserTypeSubjects(!1),a("#communication-preferences #userTypes").on("change",function(){SCM.MyAccount.changeUserTypeSubjects(!0)}),a("#communication-preferences #btnConfirmOptIn").on("click",function(){var t=a(this);a.ajax({url:"/OUPMyAccount/SendEmailForOptInCommPref",type:"GET",dataType:"json"}).done(function(e){(e.Success?a("#communication-preferences").find(".success-message"):a("#communication-preferences").find(".error-message")).html(e.Html).show(),t.hide(),a("#communication-preferences .send-verify-email").hide()})}),a("#communication-preferences #updatePreferencesBtn").on("click",function(e){var t=a("#communication-preferences"),n=!t.find("#confirmOptOut").is(":checked"),r=[];t.find("input[type=checkbox][data-type=subjectId]").filter(":checked").each(function(){r.push(a(this).val())});var i=t.find("#userTypes").val();a.ajax({url:"/OUPMyAccount/UpdateCommunicationPreferences",type:"POST",traditional:!0,data:{optInMarketEmail:n,subjectIds:r,classificationId:i},dataType:"html"}).done(function(e){(e.includes("apologize")?t.find(".error-message"):t.find(".success-message")).html(e).show(),n?(t.find(".optedIn-message").show(),t.find(".optedOut-message").hide()):(t.find(".optedIn-message").hide(),t.find(".optedOut-message").show()),t.find("#userTypeSubjects input[type=checkbox][data-type=subjectId]").each(function(){a(this).data("checked",a(this).is(":checked"))})}),e.preventDefault()}),a("#communication-preferences #communication-preferences-subject-choices input[type=checkbox][data-type=subjectId]").on("click",function(e){a("#communication-preferences").find(".success-message").hide()}))}}(SCM.MyAccount=SCM.MyAccount||{},jQuery);var SCM=SCM||{};!function(e,n){e.initSubscriptions=function(){n(".subscriptions-wrap table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,sortList:[[0,0]]}),n(".js-subscription-resource-link").on("click",function(){var e=n(this),t=e.data("resource-id"),e=e.data("resource-type");0<parseInt(t)&&0<parseInt(e)&&n.get("/OUPMyAccount/GetResourceUrl",{resourceId:t,resourceType:e},function(e){top.location=e},"text")})}}(SCM.MyAccount=SCM.MyAccount||{},jQuery);var SCM=SCM||{};!function(e,h){e.initInstitutionalSettings=function(){var p=h(".error-summary").html();h("#institutionalAccountInfo").on("click","#saveInstitutionalSettingsBtn",function(){var t=h(this).closest("#institutionalAccountInfo"),n=t.find(".error-summary");n.html(p);var r=t.find(".instUpdate-success");r.hide(),n.hide(),t.find(".instUpdate-error").html("").removeClass("is-active");var i=t.find("#hdnSelectedInstitutionId"),a=t.find("#instSet-InstitutionName"),o=t.find("#instSet-IpAddresses"),s=t.find("#instSet-OrgId"),l=t.find("#instSet-EntityId"),c=t.find("#instSet-OpenUrl"),u=t.find("#instSet-OpenUrlButton"),d=t.find("#instSet-InstUrl"),f=t.find("#instSet-InstLogo"),e=h("#myaccount-tabs-content").find("#MyAccountToken").val();h.post("/OUPMyAccount/UpdateInstitutionalAccountInfo",{institutionId:i.val(),institutionName:a.val(),ipAddresses:o.val(),orgId:s.val(),entityId:l.val(),openUrl:c.val(),openUrlButton:u.val(),instUrl:d.val(),instLogoUrl:f.val(),token:e,ipAddresessChanged:o.val()!==o.data("default")},function(e){null!=e&&(e.ReturnId&&h("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),h.isEmptyObject(e.Errors)?(function(e,t,n){e.show(),h.trim(t).length?h("#instSet-OpenUrlButtonImg").attr("src",t).show():h("#instSet-OpenUrlButtonImg").hide();h.trim(n).length?h("#instSet-InstLogoImg").attr("src",n).show():h("#instSet-InstLogoImg").hide()}(r,u.val(),f.val()),i.data("default",i.val()),a.data("default",a.val()),o.data("default",o.val()),s.data("default",s.val()),l.data("default",l.val()),c.data("default",c.val()),u.data("default",u.val()),d.data("default",d.val()),f.data("default",f.val()),h("#InstitutionList option:selected").text(a.val())):function(e,t,n,r){for(var i in e){var a=null;switch(i){case"general":a="general";break;case"institutionName":a="instSet-InstitutionName";break;case"ipAddressList":a="instSet-IpAddresses";break;case"orgId":a="instSet-OrgId";break;case"entityId":a="instSet-EntityId";break;case"openUrl":a="instSet-OpenUrl";break;case"openUrlButton":a="instSet-OpenUrlButton";break;case"instUrl":a="instSet-InstUrl";break;case"instLogoUrl":a="instSet-InstLogo"}null!==a&&("general"===a?t.find(".instUpdate-error.general-error").html(r.Errors[i]).addClass("is-active"):(t.find("#"+a).next(".instUpdate-error").html(r.Errors[i]).addClass("is-active"),n.append("<p> * "+h("label[for="+a+"]").text().replace("*","")+"</p>"),n.show()))}h("html, body").animate({scrollTop:t.offset().top},10)}(e.Errors,t,n,e))})}),h(document).on("click","#institutionalAccountInfo .question-icon",function(e){e.preventDefault();e=h(this).next('[data-type="help-text"]').html();h("#institutionalSettingsModalBody").html(e),h("#institutionalSettingsModal").foundation("reveal","open")});var l=h(".js-institution-list option:selected");h(".js-institution-list").on("change",function(){var e,t,n,r,i,a,o,s;e=h("#instSet-InstitutionName"),t=h("#instSet-IpAddresses"),n=h("#instSet-OrgId"),r=h("#instSet-EntityId"),i=h("#instSet-OpenUrl"),a=h("#instSet-OpenUrlButton"),o=h("#instSet-InstUrl"),s=h("#instSet-InstLogo"),e.val()!==e.data("default")||(t.val()!==t.data("default")||(n.val()!==n.data("default")||(r.val()!==r.data("default")||(i.val()!==i.data("default")||(a.val()!==a.data("default")||(o.val()!==o.data("default")||s.val()!==s.data("default")))))))?(alert("You have unsaved changes."),l.attr("selected",!0)):window.location="/my-account/institutional-settings/"+h(this).val()})}}(SCM.MyAccount=SCM.MyAccount||{},jQuery);var SCM=SCM||{};SCM.SearchResults={},SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"Search",baseSiteUrl:"",updateTargetSelector:"#divSearch"},$(function(){function n(){$(".collapsible-facet .sf-facet-list").each(function(){12<$(this).find(".sf-facet").length&&($(this).children(".facetShowMoreLi").remove(),$(this).find(".sf-facet:gt(11)").hide(),0===$(this).find(".facetShowMoreLi").length&&$(this).append('<li class="facetShowMoreLi"><a href="javascript:;" class="facetShowMore">Show more</a></li>'))}),$(".sf-tax-facet-list.taxonomy-lvl-0").each(function(){12<$(this).children(".sf-tax-facet").length&&($(this).children(".facetShowMoreLi").remove(),$(this).children(".sf-tax-facet:gt(11)").hide(),0===$(this).find(".sf-tax-facetShowMoreLi").length&&$(this).append('<li class="sf-tax-facetShowMoreLi"><a href="javascript:;" class="facetShowMore">Show more</a></li>'))})}function r(){$(".js-taxonomy-parent-arrow").on("click",function(){var e=$(this);e.parents(".js-taxonomy-label-wrap").siblings(".js-taxonomy-child-list").toggleClass("hide");e=e.children(".js-taxonomy-icon");e.hasClass("icon-general-arrow-filled-right")?e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")}),0<$(".js-taxonomy-child-list .js-queryitem").length&&($(".js-taxonomy-child-list .js-queryitem").parents(".js-taxonomy-child-list .js-taxonomy-child-list-item").each(function(){var e,t;0<$(this).find(".js-queryitem").length&&(t=(e=$(this).find(".js-taxonomy-parent-arrow").first()).children(".js-taxonomy-icon"),e&&e.length&&t.hasClass("icon-general-arrow-filled-right")&&(e.parents(".js-taxonomy-label-wrap").siblings(".js-taxonomy-child-list").toggleClass("hide"),t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")))}),$(".js-taxonomy-child-list").each(function(){0<$(this).find(".js-taxonomy-checkbox:checked").not(":visible").length&&$(this).find(".facetShowMore").click()}))}$(document).on("click",".facetShowMore",function(e){var t=$(this).parent().hasClass("sf-tax-facetShowMoreLi"),n=t?$(".sf-tax-facet-list.taxonomy-lvl-0").children(".sf-tax-facet:gt(11):visible"):$(this).closest(".sf-facet-list").find(".sf-facet:gt(11):visible");n.length?(n.animate({height:"toggle"},400),$(this).text("Show more")):((t?$(".sf-tax-facet-list.taxonomy-lvl-0").children(".sf-tax-facet"):$(this).closest(".sf-facet-list").find(".sf-facet:gt(11)")).not(":visible").animate({height:"toggle"},400),$(this).text("Show less")),e.preventDefault()}),$("#searchResultsPage").on("click",".journal-description-container a",function(e){e.preventDefault(),$(this).closest(".journal-description-container").find(".journal-description").toggleClass("hide")}),n(),r();var s,i,l={},t=window.location.search.substring(1);function c(e,t){SCM.ArticleImageDetails.init("sr-item-image",e,t)}function u(e,t,n){window.console&&console.error(n)}function d(e,t){i(t[0]),"undefined"!=typeof clientViewOption&&""!==clientViewOption&&(t=s(".sri-expandedView"),"Expanded"===clientViewOption?t.show():t.hide()),n(),r(),window.history.state&&window.history.state.queryString==e.queryString||window.history.pushState(e,null,window.location.pathname+"?"+e.queryString),SCM.JournalCitationFilter&&SCM.JournalCitationFilter.init()}window.onpopstate=function(e){e.state&&SCM.SearchResults.doSolrSearch(e.state)},SCM.PublicationDateFilter.init(),SCM.Utilities.Brightcove.init(),function(){var e=$(SCM.SearchResults.defaults.updateTargetSelector);l[t]={results:e.html()},window.history.replaceState({queryString:t},null,null);var n=!0;e.on("click",".js-edition-select",function(e){var t=$(this).siblings("input");!t.length||void 0!==(t=t.data("redirectUrl"))&&SCM.SearchResults.doSolrSearch({queryString:t})}),e.on("click",".chkSelect",function(e){SCM.SearchResults.doSolrSearch({queryString:$(this).data("redirectUrl")})}),e.on("click",".js-sf-facet__link",function(e){var t=$(this).attr("data-url");t&&"#"!==t&&"javascript:;"!==t&&(e.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t}))}),e.on("click",".js-close-button",function(e){var t=$(this).attr("data-url");t&&"#"!==t&&"javascript:;"!==t&&(e.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t}))}),e.on("click",".rbShowFacet",function(e){e.preventDefault(),"False"==$(this).attr("previous-status")&&(e=$(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:e}))}),e.on("click","#solrSearchBtn",function(e){var t=$("#txtSearch").val();t&&""!==t?(t=encodeURIComponent(t),SCM.SearchResults.doSolrSearch({queryString:"q="+t})):alert("Please enter a term to perform search")}),e.on("click","#btnRangeSearch",function(e){var t=parseInt(SCM.PublicationDateFilter.$fromYear.val()),n=parseInt(SCM.PublicationDateFilter.$toYear.val()),r=parseInt(SCM.PublicationDateFilter.$fromMonth.val()),i=parseInt(SCM.PublicationDateFilter.$toMonth.val()),a="",o=$(".js-date-type-chk").map(function(){return $(this).val()}),s=$(".js-date-type-chk:checked, .js-date-type-chk:hidden:checked");if((a=SCM.PublicationDateFilter.isSingleDateSelected?SCM.PublicationDateFilter.getValidationResponseTextForSingleDate(t):SCM.PublicationDateFilter.getValidationResponseTextForDateRange(t,n,r,i))&&a.length)return $(".js-publication-date-filter-validation").text(a),void $("#js-publication-date-filter-modal").foundation("reveal","open");var l,c=SCM.PublicationDateFilter.getSolrDateString(t,n,r,i),i="&dateFilterType="+(SCM.PublicationDateFilter.isSingleDateSelected?"single":"range");1===s.length&&"rg_VersionDate"===s.val()?(o.push("rg_ArticleDate"),l=i+"&"+s.val()+"="+c):(l=c+i,0===(u=s).length&&(u=$(".js-date-type-chk"),l+="&noDateTypes=true"),u.each(function(){l+="&"+$(this).val()+"="+c}));var u=$(this).attr("data-url").split("&"),u=(u=$.grep(u,function(e,t){e=e.split("=")[0];return e.indexOf("dateFilterType")<0&&e.indexOf("noDateTypes")<0&&$.inArray(e,o)<0})).join("&");0<=u.indexOf("queryText")?u=u.replace("queryText",l):u+=l,SCM.SearchResults.doSolrSearch({queryString:u})});function r(e){return"string"==typeof e?"true"===e.toLowerCase():!!e}function i(){var e,t={UserEmail:$("#UserEmail").val(),ResourceTitle:$("#ResourceTitle").val(),AlertType:$("#AlertType").val(),CurrentUserEmail:$("#CurrentUserEmail").val(),IsUserAlreadySubscribed:r($("#IsUserAlreadySubscribed").val()),SuccessfulUpdate:$("#SuccessfulUpdate").val(),ResourceId:$("#ResourceId").val(),ResourceType:$("#ResourceType").val(),SearchTerm:$("#SearchTerm").val(),SearchUrl:$("#SearchUrl").val(),CurrentAlertContextSiteId:$("#CurrentAlertContextSiteId").val(),ShowSaveSearchToUnauthenticatedUser:r($("#ShowSaveSearchToUnauthenticatedUser").val()),UserIsLoggedIn:r($("#UserIsLoggedIn").val())};null!=t.IsUserAlreadySubscribed&&t.IsUserAlreadySubscribed?(e=$("#Config_SearchAlertMyAccoutUrl").val(),window.location.href=e):t.ShowSaveSearchToUnauthenticatedUser&&!t.UserIsLoggedIn?(ShowSignInForSearchAlertSignUp(),n=!0):$.post("/Toolbox/ToolboxGetAlertsUpdateMessage",t,function(e){n=!0,alert("Alert Saved Sucessfully. Visit My Account page to manage your email alerts"),$("#divSearchAlerts").html(e),$("#divSearchAlerts a").on("click",function(e){e.preventDefault(),i()})})}e.on("click","#divSearchAlerts a",function(e){e.preventDefault(),n&&(n=!1,i())})}(),c(!1,"0"),SCM.SearchResults=$.extend(SCM.SearchResults,(s=jQuery,i=function(e){e.getBoundingClientRect().top<0&&s("html, body").animate({scrollTop:e.offsetTop},1e3)},{doSolrSearch:function(n){var r,i=!1;n.openModal&&(i=!0,r=n.openModal);if(/\/(search-results|advanced-search)\/?$/i.test(location.pathname)){var a=s.extend(SCM.SearchResults.defaults,n);if(/\/advanced-search\/?$/i.test(location.pathname)){var e="/search-results";return a.baseSiteUrl&&(e="//"+a.baseSiteUrl+e),e+="?"+n.queryString,void(window.location=e)}var o=s(a.updateTargetSelector);if(l[n.queryString])return n.cacheSearchWithoutUpdatingDom||(o.html(l[n.queryString].results).show(),SCM.SolrSearch.ajaxComplete(),d(n,o),c(i,r)),void(s(".video-js").length&&SCM.Utilities.Brightcove.init());var t=!1,e=s.deparam.querystring().mg;(t=void 0!==e?"true"===e.toLowerCase():t)&&(a.instanceName="OUP_SearchResults_MG",null!==n.queryString&&(0<n.queryString.toLowerCase().indexOf("mg=true")||(n.queryString=n.queryString+"&mg=true")));e=s.deparam.querystring().page;e&&1!==parseInt(e)&&(n.queryString=n.queryString.replace("page="+e,"page=1"));t="/"+a.controller+"/"+a.action+"/"+a.instanceName;void 0!==a.baseSiteUrl&&""!==a.baseSiteUrl&&(t="//"+a.baseSiteUrl+t),t+="?"+n.queryString,n.functionToDoWhileAjaxLoading&&n.functionToDoWhileAjaxLoading(n.currentItem),(e=s(".info-inner-cover")).removeClass("uncovered"),e.addClass("covered"),s.get(t).done(function(e){var t;n.cacheSearchWithoutUpdatingDom||o.html(e),(t=s(".info-inner-cover")).removeClass("covered"),t.addClass("uncovered"),l[n.queryString]={results:e,updateTargetSelector:a.updateTargetSelector},n.cacheSearchWithoutUpdatingDom||(d(n,o),c(i,r))}).fail(u).always(function(){n.functionToDoWhileAjaxLoading&&n.functionToDoWhileAjaxLoading(n.currentItem)})}}}))});var SCM=SCM||{};!function(SolrSearch,$,undefined){SolrSearch.ExpandedCollectionSites=[];var bodyVar=$("body"),hfSolrJournalID=$("#hfSolrJournalID"),hfParentSiteName=$("#hfParentSiteName").val(),hfGlobalSearchSiteURL=$("#hfGlobalSearchSiteURL").val(),hfjournalSiteScope=$("#hfJournalSiteScope").val(),hfparentSiteScope=$("#hfParentSiteScope").val(),searchSiteID=$("#hfSiteID").val(),hfParentSiteURL=$("#hfParentSiteUrl").val(),hfparentSiteID=$("#hfParentSiteID").val(),siteUrl=$("#hfSiteURL").val(),hfdefaultSearchURL=$("#hfDefaultSearchURL").val(),defaultAdvancedSearchUrl=$("#hfDefaultAdvancedSearchUrl").val(),hfIssueSearch=$("#hfIssueSearch").val(),hfIssueSiteScope=$("#hfIssueSiteScope").val(),hfCurrentBookSearch=$("#hfCurrentBookSearch").val(),hfCurrentBookScope=$("#hfCurrentBookScope").val(),hfBookSiteScope=$("#hfBookSiteScope").val(),hfSeriesScope=$("#hfSeriesScope").val(),hfUmbrellaScope=$("#hfUmbrellaScope").val(),hfUmbrellaSiteUrl=$("#hfUmbrellaSiteUrl").val(),hfUmbrellaSiteId=$("#hfUmbrellaSiteId").val(),searchAcrossOA="",queryText="",currentSearchScope,selectedSearchFilter=$(".navbar-search-filter :selected");function setAdvancedSearchLinkToCurrentSearchScope(){currentSearchScope===hfparentSiteScope?$(".js-advanced-search").attr("href",getBaseUrl(hfParentSiteURL)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl})):currentSearchScope===hfBookSiteScope?$(".js-advanced-search").attr("href",getBaseUrl()+"/books/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl})):currentSearchScope===hfjournalSiteScope?$(".js-advanced-search").attr("href",getBaseUrl()+"/journals/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,passAllJournals:!0})):currentSearchScope===hfCurrentBookScope?$(".js-advanced-search").attr("href",getBaseUrl(siteUrl)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,searchSiteId:hfparentSiteID,currentBookSearch:!0})):currentSearchScope===hfUmbrellaScope?$(".js-advanced-search").attr("href",getBaseUrl(hfUmbrellaSiteUrl)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,searchSiteId:hfUmbrellaSiteId})):currentSearchScope.startsWith(hfSeriesScope)?$(".js-advanced-search").attr("href",getBaseUrl(siteUrl)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,searchSiteId:searchSiteID,series:currentSearchScope})):searchAcrossOA?$(".js-advanced-search").attr("href",getBaseUrl(hfUmbrellaSiteUrl)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,searchSiteId:searchSiteID,series:currentSearchScope})):""!==currentSearchScope?$(".js-advanced-search").attr("href",getBaseUrl(siteUrl)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,searchSiteId:searchSiteID,taxonomy:currentSearchScope})):$(".js-advanced-search").attr("href",getBaseUrl(siteUrl)+"/"+getSearchUrl({baseUrl:defaultAdvancedSearchUrl,searchSiteId:searchSiteID}))}function getBaseUrl(e){return isNullOrEmpty(e)?getUrlProtocol()+window.location.hostname:getUrlProtocol()+e}function getUrlProtocol(){return window.location.protocol+"//"}currentSearchScope=selectedSearchFilter.length?selectedSearchFilter.val():hfUmbrellaScope,$(".navbar-search-filter, .mobile-navbar-search-filter").on("change",function(){currentSearchScope=$(this).val();var e=$(":selected",this);searchAcrossOA=e.closest("optgroup").attr("class"),setAdvancedSearchLinkToCurrentSearchScope()});var testSearchInput=function(e,t){if(""===hfParentSiteName)return""===$.trim(e)||null===e||"Search OUP"===e?(alert("Please enter a term to search: "),!1):e?(doSolrSearch(e,t),!0):(console.error("Search failed"),!1);doSolrSearch(e,t)},doKeywordsSearch=function(e){'"'!==e[0]&&'"'!==e[e.length-1]&&(e='"'+e+'"');var t="page=1&qb={Keywords1:"+encodeURIComponent(e)+"}&SearchSourceType=1",n="cqb=[{%22terms%22:[{%22filter%22:%22Keywords%22,%22input%22:"+encodeURIComponent(e)+"}]}]&qb={%22Keywords1%22:"+encodeURIComponent(e)+"}&page=1&searchType=advanced&adv=true",e="true"===($("#hfAreOpFeaturesEnabled").val()||"false").toLowerCase(),n="search-results?"+(0<$(".js-custom-queryBuilder").length||e?n:t);hfGlobalSearchSiteURL===undefined||hfGlobalSearchSiteURL!==undefined&&""===hfGlobalSearchSiteURL?(t=$("#hfSiteURL")).length&&(n="//"+t.val()+"/"+n):n="//"+hfGlobalSearchSiteURL.val()+n,window.location.href=n},testKeypress=function(e,t,n){13===e.keyCode&&(e.preventDefault(),testSearchInput(n,t))};function doSolrSearch(e,t){queryText=encodeURIComponent(e);var n="",e="",e=hfGlobalSearchSiteURL===undefined||hfGlobalSearchSiteURL!==undefined&&""===hfGlobalSearchSiteURL?$("#hfSiteURL"):hfGlobalSearchSiteURL;t===hfjournalSiteScope?n="/../journals/"+hfdefaultSearchURL+queryText+"&SearchSourceType=1":isNullOrEmpty(t)?(n=getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:searchSiteID,passAllJournals:!0}),e.length&&(n="//"+e.val()+"/"+n)):t===hfparentSiteScope?n="//"+hfParentSiteURL+"/"+getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:hfparentSiteID}):t===hfIssueSiteScope?(n=getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:searchSiteID,issueSearch:!0}),e.length&&(n="//"+e.val()+"/"+n)):t===hfCurrentBookScope?(n=getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:searchSiteID,currentBookSearch:!0}),e.length&&(n="//"+e.val()+"/"+n)):t===hfBookSiteScope?n="/../books/"+hfdefaultSearchURL+queryText+"&SearchSourceType=1":t===hfUmbrellaScope?n="//"+hfUmbrellaSiteUrl+"/"+getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:hfUmbrellaSiteId}):t.startsWith(hfSeriesScope)?(n=getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:searchSiteID,series:currentSearchScope}),e.length&&(n="//"+e.val()+"/"+n)):searchAcrossOA?(n=getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:hfUmbrellaSiteId,taxonomy:t}),e.length&&(n="//"+hfUmbrellaSiteUrl+"/"+n)):(n=getSearchUrl({baseUrl:hfdefaultSearchURL,queryText:queryText,searchSiteId:searchSiteID,taxonomy:t}),e.length&&(n="//"+e.val()+"/"+n)),window.location.href=n}function getSearchUrl(e){var t=(t=e.baseUrl)||"";return e.queryText?t+=e.queryText:t=t.replace("&q=",""),e.searchSiteId&&(t+="&fl_SiteID="+e.searchSiteId),t+="&SearchSourceType=1",e.passAllJournals&&(t+="&allJournals=1"),e.issueSearch&&hfIssueSearch&&(t+=hfIssueSearch),e.currentBookSearch&&hfCurrentBookSearch&&(t+=hfCurrentBookSearch),e.series&&(t+="&"+e.series),e.taxonomy&&(t+="&"+getTaxonomyParameter(e.taxonomy)),t}function isNullOrEmpty(e){return void 0===e||e===undefined||null===e||""===e}function getTaxonomyParameter(e){return"tax="+e}var openSaveSolrSearch=function(e){e.foundation("reveal","open")},saveSolrSearchInfo=function saveSolrSearchInfo(solrSearchSaveModel){var txtSolrSearchName=$(solrSearchSaveModel.find(".txtSolrSearchName")),ddlSearchAlertFrequency=$(solrSearchSaveModel.find("#ddlSearchAlertFrequency"));if(""===$.trim(txtSolrSearchName.val())||null===txtSolrSearchName.val())return alert("Please enter a name"),!1;var redirectUrl=$("#hdnSearchSaveRedirectUrl"),currentUrl=window.location.href,token=$("#SolrSearchAuthToken").val(),data=JSON.stringify({searchName:txtSolrSearchName.val(),url:currentUrl,scheduleId:ddlSearchAlertFrequency.val(),redirectUrl:redirectUrl.val(),token:token}),ajaxUrl="//"+SCM.SearchResults.defaults.baseSiteUrl+"/Solr/SaveSolrSearchInfoWithToken";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){null!==e&&(e.ReturnId&&$("#SolrSearchAuthToken").val(e.ReturnId),e.RedirectUrl&&e.RedirectUrl.length?window.location=e.RedirectUrl:(alert(e.Html),solrSearchSaveModel.foundation("reveal","close")))},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.log("error: "+err),console.log("status: "+textStatus))}})};function buildSaveSearchUiEvent(){var e=$(".lnkSaveSolrSearch"),n=$(".solrSearchSaveModel"),t=$(".btnSolrSearchSave"),r=$(".txtSolrSearchName");e.off("click").on("click",function(){var e,t=$(this).attr("data-userloggedin");t!==undefined&&"false"===t.toLowerCase()?(e=$("#hdnSearchSaveRedirectUrl"),t=window.location.href,window.location=e.val()+"?returnUrl="+encodeURIComponent(t+"#triggerSaveSearch=1")):openSaveSolrSearch(n)}),t.off("click").on("click",function(){saveSolrSearchInfo($(this).parents(".solrSearchSaveModel"))}),r.off("keypress").on("keypress",function(e){13===(e.keyCode||e.which)&&saveSolrSearchInfo($(this).parents(".solrSearchSaveModel"))})}function initCollectionArrows(){if(SCM.SolrSearch.ExpandedCollectionSites&&0<SCM.SolrSearch.ExpandedCollectionSites.length)for(i=0;i<SCM.SolrSearch.ExpandedCollectionSites.length;i++){var e=SCM.SolrSearch.ExpandedCollectionSites[i],t=$(".js-collection-facet").find(".js-collection-arrow-icon[data-siteid="+e+"]");t&&t.hasClass("icon-general-arrow-filled-right")&&(t.removeClass("icon-general-arrow-filled-right"),t.addClass("icon-general-arrow-filled-down"),$(".js-collection-headings-placeholder[data-siteid="+e+"]").toggleClass("hide"))}}function restrictedImagesSearch(){$("div.sri-figure[restricted]").each(function(){$(this).off("contextmenu").on("contextmenu",function(){return!1})})}function updateCollectionFacetDescendantCheckboxes(e){e.first().is(":checked")?e.prop("checked",!0):e.prop("checked",!1)}function doCollectionFacetQuery(){var e=$("#CollectionCurrentDataUrl").val();e=decodeURIComponent(e);var t=$(".js-collection-facet").find(".js-collection-checkbox:checked"),n=[];for(i=0;i<t.length;i++){var r=t[i].dataset.siteid;n.push(r)}var a,o,s=-1!==e.indexOf("collection=");!s&&0<n.length?e+="&collection="+n.join(","):!s||(o=$.deparam.querystring().collection)&&""!==o&&(e=0<n.length?(a="collection="+n.join(","),e.replace("collection="+o,a)):(o=(a=e.indexOf(s="collection="+o))+s.length,"&"===e.charAt(a-1)?s="&"+s:"&"===e.charAt(o+1)&&(s+="&"),e.replace(s,""))),SCM.SearchResults.doSolrSearch({queryString:e})}function bindUiEvents(){var e=$(".js-master-header").find(".microsite-search-icon"),t=$(".js-master-header").find(".microsite-search-term"),n=$(".js-master-header").find(".mobile-microsite-search-icon"),r=$(".js-master-header").find(".mobile-microsite-search-term"),i=$("#UmbrellaSearchIcon"),a=$("#UmbrellaHomeSearchIcon"),o=$("#UmbrellaSearchTerm"),s=$("#UmbrellaHomeSearchTerm"),l=$(".kwd-part");i.on("click",function(){testSearchInput(o.val(),"J*")}),a.on("click",function(){testSearchInput(s.val(),"J*")}),e.on("click",function(){testSearchInput(t.val(),currentSearchScope)}),n.on("click",function(){testSearchInput(r.val(),currentSearchScope)}),$(document.body).on("click",".toolbar-search .microsite-search-icon",function(){testSearchInput($(this).siblings(".microsite-search-term").val(),currentSearchScope)}),$(".searchLi .icon-search").on("click",function(){testSearchInput(t.val(),currentSearchScope)}),l.on("click",function(){doKeywordsSearch($(this).attr("data-keyword"))}),o.on("keypress",function(e){testKeypress(e,"J*",o.val())}),s.on("keypress",function(e){testKeypress(e,"J*",s.val())}),t.on("keypress",function(e){testKeypress(e,currentSearchScope,t.val())}),r.on("keypress",function(e){testKeypress(e,currentSearchScope,r.val())}),$(document.body).on("keypress",".toolbar-search .microsite-search-term",function(e){testKeypress(e,currentSearchScope,$(this).val())})}$("body").on("click",".js-taxonomy-label",function(){var n,e=$(this),t="";e.hasClass("js-taxonomy-checkbox")?(n="taxWithOr=",r="taxWithOr",i=$(this).closest(".js-taxonomy-child-list-item"),$(this).is(":checked")?i.find(".js-taxonomy-checkbox").prop("checked",!0):i.find(".js-taxonomy-checkbox").prop("checked",!1),$(this).closest(".js-taxonomy-tree-wrap").find(".js-taxonomy-checkbox:checked").each(function(e){t+=$(this).attr("data-id")+","}),t.endsWith(",")&&(t=t.slice(0,-1))):(n="tax=",r="tax",t=$(this).parent(".taxonomy-label-wrap").attr("data-id"));var r,i,a=$("#TaxonomyCurrentDataUrl").val(),e=(a=decodeURIComponent(a)).split("&"),e=$.grep(e,function(e,t){return!e.startsWith(n)});""!==$(this).attr("data-parentid")&&(i=$(this).closest(".taxonomy-node").attr("data-id"),-1!==a.indexOf(n)&&"taxWithOr"!==r?(r=decodeURIComponent($.deparam.querystring()[r]))&&""!==r&&(-1<r.indexOf("="+i)?a=a.replace(n+r,n+t):-1===$.inArray(t,decodeURIComponent(r.slice(4)).split(","))&&(i=r+","+t,a=a.replace(r,i))):a=e.join("&").concat("&"+n+t),SCM.SearchResults.doSolrSearch({queryString:a}))}),bodyVar.on("click",".js-collection-arrow",function(e){var t,n,r=$(this).find(".js-collection-arrow-icon");(r=!r.length?$(this).parent().find(".js-collection-arrow-icon"):r).length?(t=r.data("siteid"))?(n=$(".js-collection-headings-placeholder[data-siteid="+t+"]")).length?(r.hasClass("icon-general-arrow-filled-right")?(SolrSearch.ExpandedCollectionSites.indexOf(t)<0&&SolrSearch.ExpandedCollectionSites.push(t),r.removeClass("icon-general-arrow-filled-right"),r.addClass("icon-general-arrow-filled-down")):r.hasClass("icon-general-arrow-filled-down")&&(SolrSearch.ExpandedCollectionSites.splice(SolrSearch.ExpandedCollectionSites.indexOf(t),1),r.removeClass("icon-general-arrow-filled-down"),r.addClass("icon-general-arrow-filled-right")),n.toggleClass("hide")):console.error(".js-collection-headings-placeholder not found"):console.error("siteid not found"):console.error(".js-collection-arrow-icon not found")}),bodyVar.on("click",".js-collection-label",function(e){var t;$(e.target).is(".js-collection-checkbox")||((e=(t=$(this).closest(".js-collection-item").find(".js-collection-checkbox")).first()).is(":checked")?e.prop("checked",!1):e.prop("checked",!0),updateCollectionFacetDescendantCheckboxes(t),doCollectionFacetQuery())}),bodyVar.on("click",".js-collection-checkbox",function(){updateCollectionFacetDescendantCheckboxes($(this).closest(".js-collection-item").find(".js-collection-checkbox")),doCollectionFacetQuery()}),SolrSearch.init=function(){var n;SCM.SiteJS.isPageViewLarge()||(n="",bindUiEvents(),buildSaveSearchUiEvent(),restrictedImagesSearch(),setAdvancedSearchLinkToCurrentSearchScope(),bodyVar.on("click",".sf-group-header",function(){var e,t;$(window).outerWidth()<1024&&(t=(e=$(this)).children(".sf-group-header-icon"),e.siblings("fieldset").children(".sf-facets, .sf-facet-list").slideToggle(),e.siblings(".taxonomy-child-list").slideToggle(),t.hasClass("icon-general_arrow-right")?t.removeClass("icon-general_arrow-right").addClass("icon-general_arrow-down"):t.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right"))}),SCM.QueryBuilder.configure(),0<$(SCM.SearchResults.defaults.updateTargetSelector).length?SCM.QueryBuilder.defaults.runSearch=function(e){SCM.SearchResults.doSolrSearch({queryString:e})}:($(".querybuilder-submit").attr("value","Search"),$(".querybuilder-title").text("Build a query"),SCM.QueryBuilder.defaults.runSearch=function(e){var t=$("#hfSiteURL").val();-1===e.indexOf("q=")&&(e="q="+e),window.location=window.location.protocol+"//"+t+"/search-results?"+e}),$(".sort-dropdown-option:selected").addClass("selected"),bodyVar.on("click",".sriTopiclink",function(e){var t=(queryText=$(this).text()).replace(",","");doSolrSearch(t,""===(n=currentSearchScope)||null===n?null:n),e.preventDefault()}),$("a.categoryLink").each(function(){var e=$(this).attr("href"),t=hfSolrJournalID.val();isNullOrEmpty(t)?$(this).attr("href",hfGlobalSearchSiteURL+e):(t=t.substr(1,t.length),$(this).attr("href","/"+e+"&fd_JournalID="+t))}),bodyVar.on("click","#topicResultsWire",function(e){var t=(t=location.search).substring(0,t.indexOf("&fd_JournalID"));window.location.href=hfGlobalSearchSiteURL.val()+"solr/topicresults.aspx"+t}),bodyVar.on("click",".mg-tab",function(e){var t=$(this).data("tab"),n=$.deparam.querystring().q,r="";n&&(r="&q="+n);var i=$.deparam.querystring().qb,a="";i&&(a="&qb="+i);var o=$.deparam.querystring().cqb,s="";o&&(s="&cqb="+o);var l="",c=$.deparam.querystring().fl_SiteID;c&&(l="&fl_SiteID="+c);var u="",d=$.deparam.querystring().SearchSourceType;d&&(u="&SearchSourceType="+d);n="",i=$.deparam.querystring().allJournals;i&&(n="&allJournals="+i);o=$.deparam.querystring().mg,c=!1;o&&(c="true"===o.toLowerCase());d="",i=$.deparam.querystring().rg_ArticleDate;i&&(d="&rg_ArticleDate="+i);o="",i=$.deparam.querystring().dateFilterType;i&&(o="&dateFilterType="+i);a=window.location.href.split("?")[0]+"?page=1"+r+l+u+n+d+o+s+a;"Images"!==t||c?"AllResults"===t&&c&&(window.location.href=a):window.location.href=a+"&mg=true"}))},SolrSearch.RefreshBrightcove=function(){var e;$("#searchResultsPage .brightcove-player").length&&("undefined"!=typeof videojs?(e=$("#searchResultsPage .brightcove-player")[0],videojs.getPlayer(e)||SCM.Utilities.Brightcove.init()):SCM.Utilities.Brightcove.init())},SolrSearch.ajaxComplete=function(){buildSaveSearchUiEvent(),restrictedImagesSearch(),SCM.QueryBuilder.configure(),SCM.SiteJS.initSearchResultsSort(),SCM.PublicationDateFilter.init(),initCollectionArrows(),SolrSearch.RefreshBrightcove(),$(".page-column--left").not("[data-client-solrsearch-event-registered]").length&&(SCM.SiteJS.toggleResponsiveLeftColumn(),$(".page-column--left").attr("data-client-solrsearch-event-registered","true")),$(".widget-AdBlock  > .hide").length&&googletag.cmd.push(function(){googletag.pubads().refresh()})},SCM.SearchResults.defaults.instanceName="OUP_SearchResults",SCM.SearchResults.defaults.updateTargetSelector="#searchResultsPage";var baseSiteURL=$("#hfSiteURL");void 0!==baseSiteURL&&""!==baseSiteURL.val()&&(SCM.SearchResults.defaults.baseSiteUrl=baseSiteURL.val()),SCM.SolrSearch.init()}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery);var SCM=SCM||{},App=App||{};!function(s,l,c){var u="instOpenUrlKey_",d="instOpenUrlNoDOIKey_",f="instOpenUrlBaseUrlKey_";s.replaceOpenUrlPlaceHolders=function(e,n){n&&e.length&&e.each(function(){var e=l(this),t=e.attr("data-targetId"),t=n.replace("{openUrlTargetId}",t);e.html(t),e.parent().show().removeClass("empty-target")})},s.replaceOpenUrlNonDOIPlaceHolders=function(e,r,i){i&&e.length&&e.each(function(){var e,t=l(this),n=t.find(".js-open-url-link");!n.length||(e=n.attr("data-href-template"))&&e.length&&(e=e.replace("{targetURL}",r),n.attr("href",e),n.removeAttr("data-href-template"),n.html(i),t.parent().show().removeClass("empty-target"))})},s.replaceFindInMyLibraryOpenUrlPlaceHolders=function(t){t&&t.length&&l(".js-openurl-library-link").each(function(){l(this).removeClass("hide");var e=l(this).attr("href");l(this).attr("href",t+e)})},s.getAndReplaceOpenUrlPlaceHolders=function(r,i){var e,a,o;l("#openUrlUpdated").length||(l("#ContentColumn").append("<input id='openUrlUpdated' type='hidden' value='true'/>"),e="/ThirdParty/InstitutionOpenUrlTemplate",a="target='_blank'",o="OpenURL Link",l(".oup-header.sigma").length&&(e="/Accounts/SigmaOpenUrl",a="",o="Find in my library"),l.ajax({type:"POST",url:e,dataType:"json",success:function(e){var t,n;e&&(n=t="",e.DisplayOpenUrlLink&&(n=e.LinkImageSource?(t=" <a class='openInAnotherWindow' "+a+" href='"+e.TargetUrl+"'><img alt='"+o+"' src='"+e.LinkImageSource+"'/></a> ","<img alt='"+o+"' src='"+e.LinkImageSource+"'/>"):(t=" <a class='openInAnotherWindow' "+a+" href='"+e.TargetUrl+"'> "+e.LinkImageText+" </a> ",e.LinkImageText)),s.replaceOpenUrlPlaceHolders(r,t),s.replaceOpenUrlNonDOIPlaceHolders(i,e.BaseUrl,n),s.replaceFindInMyLibraryOpenUrlPlaceHolders(e.BaseUrl),c&&window.sessionStorage&&window.App.LoginUserInfo&&window.App.LoginUserInfo.currentSessionId&&(c.setItem(u+window.App.LoginUserInfo.currentSessionId,t,window.sessionStorage),c.setItem(d+window.App.LoginUserInfo.currentSessionId,n,window.sessionStorage),c.setItem(f+window.App.LoginUserInfo.currentSessionId,e.BaseUrl,window.sessionStorage)))},error:function(e){l("#openUrlUpdated").remove()}}))},s.checkAndReplaceOpenUrlPlaceHolders=function(){var e,t,n,r,i;window.App.LoginUserInfo&&0<window.App.LoginUserInfo.isInstLoggedIn&&(e=l(".inst-open-url-holders"),t=l(".js-inst-open-url-holders-nodoi"),n=l(".js-openurl-library-link"),(e.length||t.length||n.length)&&(n=null,c&&window.sessionStorage&&window.App.LoginUserInfo.currentSessionId&&(n=c.getItem(u+window.App.LoginUserInfo.currentSessionId,window.sessionStorage),r=c.getItem(d+window.App.LoginUserInfo.currentSessionId,window.sessionStorage),i=c.getItem(f+window.App.LoginUserInfo.currentSessionId,window.sessionStorage)),n&&r&&i?(s.replaceOpenUrlPlaceHolders(e,n),s.replaceOpenUrlNonDOIPlaceHolders(t,i,r)):s.getAndReplaceOpenUrlPlaceHolders(e,t)))},s.init=function(){s.checkAndReplaceOpenUrlPlaceHolders()}}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage);var SCM=SCM||{};!function(e,t,n,r){var i=t("#ArticleFullTextWrap"),a=!1;i&&i.attr("data-userHasAccess")&&(a="true"===i.attr("data-userHasAccess").toLowerCase()),e.replaceContentLinks=function(){a||i.find("a[data-reveal-id]").each(function(){t(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})},e.init=function(){e.replaceContentLinks(),r.init(),n.init()}}(SCM.ArticleFulltext=SCM.ArticleFulltext||{},jQuery,SCM.InstitutionOpenUrl,SCM.Utilities.Brightcove);var SCM=SCM||{};!function(e,t){e.init=function(){t.init()}}(SCM.BookChapterMainView=SCM.BookChapterMainView||{},(jQuery,SCM.InstitutionOpenUrl));var SCM=SCM||{};SCM.BookToc=SCM.BookToc||{},function(e,s){function t(e){var t,n,r,i,a,o=s(this).find(".js-show-headings-icon");(o=!o.length?s(this).parent().find(".js-show-headings-icon"):o).length?(t=o.data("sectionid"))?(n=o.data("targeturl"))?(r=s(".js-headings-placeholder[data-sectionid="+t+"]")).length?(i=s(".js-show-headings-icon[data-sectionid="+t+"]"),o.hasClass("icon-general-arrow-filled-right")?(r.children().length||(a=window.location.origin+"/Book/ChapterHeadings",s.ajax({url:a,data:{chapterId:t,targetUrl:n,BypassOutputCache:-1<window.location.search.toLowerCase().indexOf("bypassoutputcache=true")}}).done(function(e){e&&e.length&&r.append(e)}).fail(function(e,t){window.console&&window.console.error&&(console.error("error: "+e.responseText),console.error("status: "+t),i.removeClass("icon-general-arrow-filled-down"),i.addClass("icon-general-arrow-filled-right"),i.addClass("disabled"))})),i.removeClass("icon-general-arrow-filled-right"),i.addClass("icon-general-arrow-filled-down")):o.hasClass("icon-general-arrow-filled-down")&&(i.removeClass("icon-general-arrow-filled-down"),i.addClass("icon-general-arrow-filled-right")),r.toggleClass("hide")):console.error(".js-headings-placeholder not found"):console.error("targeturl not found"):console.error("sectionid not found"):console.error(".js-show-headings-icon not found")}e.init=function(){e.registerHeadingsClick(),e.checkAccess(),s("#hfIsBookTocSlim").val()&&e.addNotesTocLink()},e.registerHeadingsClick=function(){s(document).on("click",".js-show-headings-button",t),s("#hfIsBookTocSlim").val()&&s(document).on("click",".js-tocLink",t)},e.checkAccess=function(){var e;!s(".chapter-user-restricted").length||(e=s(".js-tocLink.active")).length&&((e=e.closest(".js-toc-chapter-link")).find(".js-jumplink").addClass("hide").removeAttr("href"),e.find(".js-jumplink-span").removeClass("hide"))},e.addNotesTocLink=function(){var e,t,n=s("#endNotesTargetLocation").find(".widget-items"),r=s("#chapter-footnotes"),i=s(".js-tocLink.active:last");i.length&&((e=i.closest(".js-toc-chapter-link")).length?(t=e.find(".js-toc-notes-link"),i=e.find(".js-toc-footnotes-link"),n.length&&""!=n.html().trim()&&t.length&&(t.removeClass("hide"),SCM.JumpLinks.registerNotesTocLink("#endNotesTargetLocation","js-notes-link-end-notes")),r.length&&i.length&&(i.removeClass("hide"),SCM.JumpLinks.registerNotesTocLink("#chapter-footnotes","js-notes-link-chapter-footnotes")),i=e,r=r,n.length||r.length||i.find(".js-toc-chapter-link:not(.hide)").length||e.find(".js-show-headings-button").addClass("hide")):s(".js-show-headings-button").addClass("hide"))}}(SCM.BookToc.Headings=SCM.BookToc.Headings||{},jQuery);var SCM=SCM||{};!function(e,t,n,r){e.init=function(){t.init(),n.init()},e.goToPageHandler=function(){r("#goToPageNumberBook, #goToPageNumber").on("click",function(e){r(".pageError").hide();var t,n=r("#pageNumberEntry").val();n.length?(t=r("a[name='page-"+n+"']"),!r("a[name='page-"+n+"']").closest("#endNotesTargetLocation").length&&t&&t.length?(window.location.hash="page-"+n,r("#pageNumberEntry").val("")):(t=App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"",r.ajax({url:t+"/Content/GoToBookPage",cache:!1,data:{bookId:r("#pageNumberEntry").attr("data-bookid"),pageNum:n},dataType:"json",success:function(e){e.Success?window.location=e.RedirectURL:r(".pageError").text(e.ErrorMessage).show()}}))):r(".pageError").text("Please enter a page number").show()})},r(function(){e.init(),e.goToPageHandler()})}(SCM.BookToc=SCM.BookToc||{},SCM.BookToc.Headings=SCM.BookToc.Headings||{},SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery);var Theme=Theme||{};SCM.Utilities=SCM.Utilities||{},Theme.ArticleAbstract=function(s){return{init:function(){s(".master-main").on("click",".js-show-abstract",e)}};function e(e){var t=s(e.currentTarget),n=t.data("articleid"),r="True"===t.data("is-lay-abstract"),i=s((r?".js-layabstract#abstract-":"#abstract-").concat(n)),a=s("#abstract-".concat(n,"-links")),o="True"===t.data("tried-to-fetch-abstract"),e=function(e,t){var n="",r=function(){var e=s("#hfSiteURL");return e.length?e.val():null}();r&&(n+="//"+r);t?n+="/PlatformArticle/ArticleLayAbstractAjax":"extract"===e.data("abstract-type")?n+="/PlatformArticle/ArticleAbstractOrExtractAjax":n+="/PlatformArticle/ArticleAbstractAjax";return n}(t,r),r={articleId:n,layAbstract:r};i.closest(".js-abstract-parent").toggleClass("abstractExpanded"),o||SCM.Ajax.get(e,r).expectActionResultModel().then(function(e){i.html(e.Html),i.append(a.html()),s(".js-tabs").parents(".js-abstract-response-placeholder").addClass("removePad"),s(document).on("click",".js-abstract-tab-link",function(e){var t=s(e.target),n=t.closest(".js-abstract-response-placeholder"),r=t.closest(".js-abstract-tab-link-wrap"),e=n.find(".js-tabs-content .js-abstract-tab-content-wrap"),t=r.index();r=r,n.find(".js-abstract-tab-link-wrap").removeClass("is-active"),r.addClass("is-active"),t=t,(e=e).removeClass("is-active"),e.eq(t).addClass("is-active")}),SCM.Utilities.Brightcove&&SCM.Utilities.Brightcove.init&&SCM.Utilities.Brightcove.init()}).catch(console.error).finally(function(){t.data("tried-to-fetch-abstract","True")}),i.toggleClass("hide"),o=t.find(".js-abstract-toggle-icon"),e=o.data("icon-class"),r="".concat(e,"-down"),e="".concat(e,"-up"),o.toggleClass(r),o.toggleClass(e),i.hasClass("hide")||window.digitalData&&SCM.AdobeAnalytics.sendAdobeAnalyticsProductData(n)}}(jQuery);var Theme=Theme||{};Theme.BookAbstract=function(c){return{init:function(){c(".master-main").on("click",".js-showBookAbstractLink",e)}};function e(e){var t=c(e.currentTarget),n=t.closest("[data-book-abstract-to-be-fetched-wrapper]"),r=n.attr("data-bookid-abstract"),i=n.children("[data-tried-to-fetch-abstract]").first(),a="true"===i.attr("data-tried-to-fetch-abstract"),o=c("#abstract-".concat(r)),e=c("#hfSiteURL"),s=c("#abstract-".concat(r,"-links")),t="extract"==t.parent().attr("data-link-book-abstract-type")?"/Book/BookAbstractOrExtractAjax":"/PlatformBook/BookAbstractAjax",r={bookId:r};function l(e){o.html(e.Html),o.append(s.html())}e&&e.val()&&(t="//"+e.val()+t),o.closest("li").toggleClass("abstractExpanded"),o.toggleClass("hide"),a||(SCM.Ajax.get(t,r).expectActionResultModel().then(l).catch(console.error),i.attr("data-tried-to-fetch-abstract","true"));r=n.find(".abstract-toggle-icon"),i="icon-general-arrow-filled-down",n="icon-general-arrow-filled-up";r.hasClass(i)?r.removeClass(i).addClass(n):r.removeClass(n).addClass(i)}}(jQuery);var Theme=Theme||{};Theme.ChapterAbstract=function(f){return{init:function(){f(".master-main").on("click",".js-showChapterAbstractLink",function(e){var t=f(e.target).closest("div[data-chapter-abstract-to-be-fetched-wrapper]"),n=t.attr("data-chapterid-for-abstract"),r=t.attr("data-bookid-for-abstract"),i=t.children("div[data-tried-to-fetch-abstract]").first(),a="true"===i.attr("data-tried-to-fetch-abstract"),o=f("#abstract-".concat(n)),s=f("#hfSiteURL"),l=f("#abstract-".concat(n,"-links")),c={chapterId:n,bookId:r},n="extract"==f(e.target).parent().attr("data-link-chapter-abstract-type")?"/PlatformBook/ChapterAbstractOrExtractAjax":"/PlatformBook/ChapterAbstractAjax",r=t.find(".abstract-toggle-icon"),e=r.attr("data-icon-class"),t="".concat(e,"-down"),e="".concat(e,"-up");function u(e){o.html(e.Html),o.append(l.html())}function d(){i.attr("data-tried-to-fetch-abstract","true")}s&&s.val()&&(n="//"+s.val()+n),o.closest("li").toggleClass("abstractExpanded"),a||SCM.Ajax.get(n,c).expectActionResultModel().ensureSuccess().then(u).then(d).catch(console.error),o.toggleClass("hide"),r.toggleClass(t),r.toggleClass(e)})}}}(jQuery);var SCM=SCM||{};!function(t,r){t.init=function(){var e=r("#hfEnableOupOnlineProductsFeatures");e&&"True"===e.val()&&(r(".js-google-preview-ref-link").show(),r(".js-worldcat-preview-ref-link").show(),r(".js-copac-preview-ref-link").show(),t.showParagraphCitations())},t.showParagraphCitations=function(){var t=void 0,n=void 0;r(".js-citation-links").off("click"),r(".js-citation-links").on("click",function(e){e.stopPropagation(),t=document.activeElement,(n=r(this).siblings(".citation-wrap")).is(":visible")?n.removeClass("show-inline").addClass("hidden"):(r(".citation-wrap").removeClass("show-inline").addClass("hidden"),n.removeClass("hidden").addClass("show-inline"),(e=n.find(".citation-links a:visible")).length&&e[0].focus())}),r(document).on("click",function(){void 0!==n&&(n.removeClass("show-inline").addClass("hidden"),void 0!==t&&t.focus(),n=void 0)})}}(SCM.RefLinks=SCM.RefLinks||{},jQuery);var SCM=SCM||{};!function(e,g){e.queryBuilderHandler=function(){var e=g(".querybuilder-submit").attr("data-current-url").split("&"),t=["fd_IsLatestEdition","cqb","qb","page","q"],e=e.filter(function(e){e=e.split("=")[0];return t.indexOf(e)<0});return(e=function(e){var l,c=[],u={},d=[],f={},p=1,h=!1;g(".querybuilder-wrap .querybuilder-instance").each(function(e){var t,n,r,i,a,o,s=g(this);s.hasClass("hide")||(t="qOp"+p,void 0!==l&&0<l.length&&(f[t]=l.val()),((o=(0===(i=s.find("#instance_QueryBuilderSearchTerm")).length?s.find(".querybuilder-input"):i).val().trim()).match(/\"/g)||[]).length%2!=0&&(o=o.replace(/\"/g,"")),n=!1,(/[^']*'$/.test(o)||/[^"]*"$/.test(o))&&(n=!0),a=o.replace(/^"(.*)"$/,"$1"),r=encodeURIComponent(a),void 0!==(i=s.find(".querybuilder-filter-dropdown .querybuilder-filter.selected").attr("data-fieldname"))&&0!==i.length||(i=""),a={},void 0!==(l=s.find("[name^=operator-]:checked"))&&0<l.length&&("OR"===l.val()?(d.length&&(d[0].condition&&delete d[0].condition,u.terms=d,c.push(u),d=[],u={}),u.condition=l.val()):a.condition=l.val(),f[t]=l.val()),a.filter="all"===i?"":i,a.input=r,n&&(a.exactMatch=!0),a.input&&a.input.length&&d.push(a),""!==o.trim()&&(o=i+p,""===i&&(o="q",1!==p&&(o+=p)),n&&(o+="-exact"),f[o]=r,h=!0)),p++}),d.length&&(d[0].condition&&delete d[0].condition,u.terms=d,c.push(u));c.length&&c[0].condition&&delete c[0].condition;var t=JSON.stringify(c);e.push("cqb="+t),h&&(t=JSON.stringify(f),e.push("qb="+t));return e}(e)).push("page=1"),e.filter(function(e){return e.startsWith("searchType")})||e.push("searchType=advanced"),e.filter(function(e){return e.startsWith("adv")})||e.push("adv=true"),e.join("&")}}(SCM.CustomQueryBuilder=SCM.CustomQueryBuilder||{},jQuery);var SCM=SCM||{};SCM.Pagination=function(r){return{init:function(){r(".js-pagination-click").length&&r("body").on("click",".js-pagination-click",function(){var e=r(this),t=e.data("click-handler").split(".");window[t[0]][t[1]][t[2]](e)})},performAjaxPagination:function(e,t){{var n;t.data("elem-to-replace")?(n=r(t.data("elem-to-replace")))?r.ajax(e).done(function(e){n.html(e)}).fail(function(e,t,n){window.console&&(console.error("error: "+e.responseText),console.error("status: "+t))}):alert("Unable to find an element to respond to ajax response."):alert("The elem-to-replace data attribute was not populated.  You must populate this in the Widget's view to pass back the call to performAjaxPagination")}},updateBrowseHistory:function(e,t){var n={pagination:t};history.pushState&&(null!==history.state&&history.state.pagination||history.replaceState({pagination:document.URL},null,document.URL),history.pushState(n,null,t))},enableBrowserHistoryNavigation:function(){window.addEventListener("popstate",function(e){e.state&&history.state.pagination&&(window.location=e.state.pagination)})},trimEndUntilRegexMatches:function(e,t){for(;!e.match(t);)if(0===(e=e.substr(0,e.length-1)).length)return alert("SCM.Pagination.trimEndUntilRegexMatches: The entire string was trimmed, this likely indicates a problem with your regex pattern.  Note:  This method expects a regular expression literal (see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)"),"";return e},scrollToTop:function(){r(window).scrollTop(0)}}}(jQuery),jQuery(function(){SCM.Pagination.init()});var SCM=SCM||{};SCM.CitedByPagination=function(e){var n,r;return{init:function(){e(".widget-CrossRefCitedBy").length&&(n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),/[a-zA-Z]\/\d+$/),r=n.match(/[a-zA-Z]\/(\d+)$/)[1],SCM.Pagination.enableBrowserHistoryNavigation())},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n+"/"+e.data("clicked-page"));var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/ThirdParty/CrossRefCitedBy/"+e.data("parent-instance"),cache:!1,data:{selectedPage:e.data("clicked-page"),articleId:r}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.CitedByPagination.init()});var SCM=SCM||{};!function(e){var o=$(".js-invalid").length?$(".js-invalid"):void 0;e.PerformCalculation=function(e,t,n){if(e&&e.length){var r=e.closest("tr"),i=e.hasClass("js-si-right")?"js-si-right":"js-si-left",a=r.find(".js-invalid."+i);if(isNaN(e.val()))return e.addClass("invalid"),void(void 0!==o&&(a.length||(a=o.clone()).addClass(i).appendTo(r),function(e,t,n){var r=e.position();t.removeClass("hide"),t.addClass("at-invalidInputFlyout");var i=r.top-t.outerHeight()-4,a=r.left-4,o="a-left";"js-si-right"===n&&(n=e.outerWidth(),e=t.outerWidth(),a=r.left-(e-n)+4,o="a-right");t.find(".arrow-down").addClass(o),t.css({top:i,left:a})}(e,a,i)));r.find(".invalid").each(function(e){$(this).removeClass("invalid")}),r.find(".js-invalid").each(function(e){$(this).addClass("hide"),$(this).removeClass("at-invalidInputFlyout")});t=r.find(t);t.length&&t.val(function(e,t,n){t=t.find(".js-si-calc");if(t.length){t=t.attr("data-calc");return""===e.val()?"":n(e.val(),t).toFixed(2)}}(e,r,n))}}}(SCM.SiConversionCalculator=SCM.SiConversionCalculator||{}),$(function(){$(document.body).on("input",".js-si-left",function(){SCM.SiConversionCalculator.PerformCalculation($(this),".js-si-right",function(e,t){return e*t})}),$(document.body).on("input",".js-si-right",function(){SCM.SiConversionCalculator.PerformCalculation($(this),".js-si-left",function(e,t){return e/t})})});var ArtMetric={},$body=$("body"),$printableModal=$(".js-printable-metrics-modal");function getWidgetInstanceName(e){var t="",n=$(e).attr("class"),e=n.indexOf("widget-instance-");return t=0<=e?n.substr(e).split("-")[2]:t}ArtMetric.fullVersion=function($dest,routeUrl){var ctHtmlLabels,baseSiteUrl;$dest.find(".widget-ArticleLevelMetrics").length<1&&(ctHtmlLabels=function(e){return function(e){e.on("draw",function(e){"label"===e.type&&((e=e.element._node.childNodes[0]).innerHTML=e.innerText)})}},baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.prepend(e),setTimeout(function(){var e,t,n;void 0!==window.ChartistData&&(e={lineSmooth:!1,showArea:!0,low:0,plugins:[ctHtmlLabels()]},t=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}},plugins:[ctHtmlLabels()]}]],n=".ct-chart",$("#sv_main:visible").length&&(n=".sv-ct-chart",$dest.find(".ct-chart").addClass("sv-ct-chart")),ArtMetric.createChart(n,window.ChartistData.data,e,t))},200),ArtMetric.reloadDimensionsBadge()},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}))},ArtMetric.reloadDimensionsBadge=function(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges())},ArtMetric.limitLabels=function(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),r=1;e.not(":eq(0)").each(function(){r%n!=0&&$(this).hide(),r++})},ArtMetric.createChart=function(e,t,n,r){var r=new Chartist.Line(e,t,n,r),i=0;r.on("created",function(){i=0,ArtMetric.limitLabels()}),r.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})},ArtMetric.triggerModal=function(e,t){var n=$(".artmet-dimensions").length?"true":"false",r="/ThirdParty/ArticleLevelMetricsDetails",i=getWidgetInstanceName(".widget-ArticleLevelMetrics");0<i.length&&(r+="/"+i),ArtMetric.fullVersion(e,r+="?articleId="+t+"&showDimensionsBadge="+n),e.parent().css({display:"block",opacity:1}),$body.addClass("metrics-modal-open"),0<$printableModal.length&&$printableModal.addClass("metrics-modal-open")},ArtMetric.closeModal=function(){$(".artmet-modal:visible").attr("style",""),$body.removeClass("metrics-modal-open"),$printableModal.removeClass("metrics-modal-open")},ArtMetric.eventsToClose=function(){$(".js-artmet-close-modal").click(function(){ArtMetric.closeModal()}),$(".js-artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},ArtMetric.cloneMetricsModalForPrint=function(e){var t;0==$printableModal.length&&e.length&&(t=$("<div/>",{class:"printable-metrics-modal js-printable-metrics-modal"}),e.clone().appendTo(t),0<$("body.metrics-modal-open").length&&t.addClass("metrics-modal-open"),$body.append(t),$printableModal=$(".js-printable-metrics-modal"))},$(document).ready(function(){$(".widget-ArticleLevelMetrics:visible").on("click",".js-artmet-modal-trigger, .artmet-condensed-stats .artmet-views",function(e){var t=null!==(t=$(".widget-ArticleLevelMetrics:visible .artmet-modal-trigger").attr("data-article-id"))&&void 0!==t?t:$(".widget-ArticleLevelMetrics:visible .artmet-modal-trigger").attr("data-resource-id");ArtMetric.triggerModal($(".artmet-modal-contents").first(),t)}),$(window).on("beforeprint",function(){var e=$(".js-metric-modal-contents:has(.js-metric-full-wrap):first");!$printableModal.length&&e.length&&ArtMetric.cloneMetricsModalForPrint(e)}),ArtMetric.eventsToClose(),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})});var SCM=SCM||{},$body=$("body"),$printableModal=$(".js-printable-metrics-modal");SCM.ContentMetric=function(ns){function fullVersion($dest,routeUrl){var ctHtmlLabels,baseSiteUrl;$dest.find(".widget-ContentLevelMetrics").length<1&&(ctHtmlLabels=function(e){return function(e){e.on("draw",function(e){"label"===e.type&&((e=e.element._node.childNodes[0]).innerHTML=e.innerText)})}},baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){e=updateAltmetricPropsForBooksAndArticles(e),$dest.prepend(e),$(window).on("beforeprint",function(){var e=$(".js-metric-modal-contents:has(.js-metric-full-wrap):first");e.length&&cloneMetricsModalForPrint(e)}),setTimeout(function(){var e,t;void 0!==window.ChartistData&&(e={lineSmooth:!1,showArea:!0,low:0,plugins:[ctHtmlLabels()]},t=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}},plugins:[ctHtmlLabels()]}]],createChart(".ct-chart",window.ChartistData.data,e,t))},200),reloadDimensionsBadge()},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}))}function reloadDimensionsBadge(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges())}function limitLabels(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),r=1;e.not(":eq(0)").each(function(){r%n!=0&&$(this).hide(),r++})}function createChart(e,t,n,r){var r=new Chartist.Line(e,t,n,r),i=0;r.on("created",function(){i=0,limitLabels()}),r.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})}function getWidgetInstanceName(e){var t="",n=$(e).attr("class"),e=n.indexOf("widget-instance-");return t=0<=e?n.substr(e).split("-")[2]:t}function triggerModal(e,t,n){var r=$(".content-main .contentmet-dimensions").length?"true":"false",i="/ThirdParty/ContentLevelMetricsDetails",a=getWidgetInstanceName(".widget-ContentLevelMetrics");0<a.length&&(i+="/"+a),fullVersion(e,i+="?resourceId="+t+"&resourceType="+n+"&showDimensionsBadge="+r),e.closest(".artmet-modal").css({display:"block",opacity:1}),$body.addClass("metrics-modal-open"),$printableModal.addClass("metrics-modal-open")}function closeModal(e){e.closest(".artmet-modal").attr("style",""),$body.removeClass("metrics-modal-open"),$printableModal.removeClass("metrics-modal-open")}function eventsToClose(t){$(".content-main .js-contentmet-close-modal").on("click",function(){closeModal(t)}),$(".content-main .js-contentmet-modal").on("click",function(e){$(e.target).closest(".artmet-modal-contents").length||closeModal(t)})}function registerModalClicks(){$("#Sidebar").on("click",".js-contentmet-modal-trigger, .js-contentmet-views, .js-contentmet-citations",function(){var e=$(".content-main .contentmet-modal-trigger"),t=e.attr("data-resource-id"),e=e.attr("data-resource-type");triggerModal($(".content-main .artmet-modal-contents"),t,e)})}function updateAltmetricPropsForBooksAndArticles(e){return $(".widget-BookChapterMainView").length?e:e.replaceAll('data-hide-no-mentions="true"','data-hide-no-mentions="false"')}function cloneMetricsModalForPrint(e){var t;0==$printableModal.length&&e.length&&(t=$("<div/>",{class:"printable-metrics-modal js-printable-metrics-modal"}),e.clone().appendTo(t),0<$("body.metrics-modal-open").length&&t.addClass("metrics-modal-open"),$body.append(t),$printableModal=$(".js-printable-metrics-modal"))}function init(){$(document).ready(function(){registerModalClicks(),eventsToClose($(".content-main .artmet-modal-contents")),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})})}return{init:init,triggerModal:triggerModal,closeModal:closeModal,reloadDimensionsBadge:reloadDimensionsBadge}}(SCM.ContentMetric=SCM.ContentMetric||{});var SCM=SCM||{};SCM.ZEncoderV1=function(){var n=[":",'"',"'",",","[","]","{","}"," ","/","!","#","$","&","(",")","+","=","?","@","*","%",".","_","-"],a=function(){for(var e={},t=0;t<n.length;t++)e[n[t]]=String.fromCharCode("a".charCodeAt(0)+t);return e}(),o=(res={},$.each(a,function(e,t){res[t]=e}),res);return{Encode:function(e){if(!e)return"";for(var t,n="",r=0;r<e.length;r++){var i=e[r];"z"===i?n+="zz":"a"<=(t=i)&&t<="z"||"A"<=t&&t<="Z"||"0"<=t&&t<="9"?n+=i:(n+="z",a.hasOwnProperty(i)?n+=a[i]:n+=function(e){for(var t="",n=0;n<e.length;n++)t+=("000"+e.charCodeAt(n).toString(16)).slice(-4);return t}(i))}return n},Decode:function(e){if(!e)return"";for(var t="",n=0;n<e.length;n++){var r=e[n];if("z"===r){if(n===e.Length-1)return"";if("z"!==e[n+1])if(e[n+1]in o)t+=o[e[n+1]],n++;else{if(n>=e.length-4)return"";var i=e.substring(n+1,4);if("number"!=typeof i)return"";t+=i,n+=4}else t+="z",n++}else t+=r}return t}}}();var SCM=SCM||{};!function(e,t){e.AddMetadataBorder=function(){(t(".js-chapter-abstract-wrap").length||t(".js-book-abstract-wrap").length)&&t(".js-metadata-panel").addClass("add-border")},e.init=function(){e.AddMetadataBorder()}}(SCM.BookMetadata=SCM.BookMetadata||{},jQuery),function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";e("core-js/stable"),e("regenerator-runtime/runtime");e=(e=e("./scm.ecmascript-testbed"))&&e.__esModule?e:{default:e};try{e.default.runTestsOnJsDebug()}catch(e){console.error("One or more ES feature tests failed:",e)}},{"./scm.ecmascript-testbed":2,"core-js/stable":429,"regenerator-runtime/runtime":430}],2:[function(e,t,n){"use strict";function l(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function r(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){l(r,t,n,i,a,"next",e)}function a(e){l(r,t,n,i,a,"throw",e)}i(void 0)})}}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(c=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new c(e)}function a(){console.log(" *****  Performing EcmaScript Feature Tests  *****");var e=performance.now();(function(){var e=[];e.push("val"),console.log("Let and Const work","changed",e)})(),(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"testMethod",value:function(){console.log("Classes work")}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())).testMethod(),console.log("Arrow functions work."),function(){var e="This is some ".concat("stuff");console.log("Interpolated Strings work",e)}(),function(){for(var e=0,t=0,n=[1,2,3,4,5];t<n.length;t++)e+=n[t];console.log("for...of loop works",e)}(),Promise.resolve("works").then(function(e){console.log("Promises work",e)}),function(){var e=new Map;e.set("a",1),console.log("Map works",e.get("a"))}(),function(){var e=regeneratorRuntime.mark(t);function t(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t<n)return e.next=3,t;e.next=6;break;case 3:t+=r,e.next=0;break;case 6:case"end":return e.stop()}},e)}var n,r=0,i=o(t(0,10,2));try{for(i.s();!(n=i.n()).done;){var a=n.value;r+=a}}catch(e){i.e(e)}finally{i.f()}console.log("Generators work",r)}(),function(){if(!Symbol||!Symbol.iterator)throw new Error("Symbol.iterator is not defined");var e={from:1,to:5};if(e[Symbol.iterator]=function(){return{current:this.from,last:this.to,next:function(){return this.current<=this.last?{done:!1,value:this.current++}:{done:!0}}}},!Array.from(e).length)throw new Error("Test Object is not iterable");e=new Map;e.set("a",1);e=Array.from(e);if(!e.length)throw new Error("Map is not iterable");console.log("Test Object and Map are iterable",e)}(),function(){var e=Math.pow(3,3);console.log("Exponent operator works",e)}(),function(){function e(){return(e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve("foo");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){return e.apply(this,arguments)}().then(function(e){console.log("async/await works",e)})}(),console.log("Destructuring Assignment works",1,2,[3,4,5]),function(){(function(){var e={a:1,b:2,c:3},t=Object.values(e),n=Object.entries(e),e=Object.getOwnPropertyDescriptors(e);console.log("New Object methods work",t,n,e)})(),function(){var e="123".padStart(5,"0"),t="123".padEnd(5,"0");console.log("String padding works",e,t)}();var e=[u.name];console.log("There are known failures for ES 2017",e)}(),function(){var e=[1,2,3,4].concat([5,6]);console.log("Spread operator works",e)}(),function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log("Rest parameters work",e,t,r)}(1,2,3,4,5,6),Promise.reject("test").catch(function(){}).finally(function(){console.log("Promise.finally works")}),function(){var s=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},Symbol.asyncIterator,function(){return{i:0,next:function(){return this.i<3?Promise.resolve({value:this.i++,done:!1}):Promise.resolve({done:!0})}}});r(regeneratorRuntime.mark(function e(){var t,n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n=!(t=[]),e.prev=3,a=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new c(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(s);case 5:return e.next=7,a.next();case 7:if(!(n=!(o=e.sent).done)){e.next=13;break}o=o.value,t.push(o);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),r=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,n&&null!=a.return)return e.next=24,a.return();e.next=24;break;case 24:if(e.prev=24,r)throw i;e.next=27;break;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}},e,null,[[3,15,19,29],[20,,24,28]])}))().then(function(e){console.log("for await...of works",e)})}(),function(){var e=[0,1,2,[3,4]].flat();console.log("Array.prototype.flat works",e)}(),function(){var e=[0,1,2,3,4].flatMap(function(e){return[2*e]});console.log("Array.prototype.flatMap works",e)}(),function(){var e=Object.fromEntries([["foo","bar"],["baz",42]]);console.log("Object.fromEntries works",e)}(),function(){(function(){var e=null!==null?null:"baz";console.log("Nullish Coelescing Operator works","foo",e)})(),function(){var e={prop1:"foo",arr1:[1,2,3]},t=null===e?void 0:e.prop1,n=null===(i=e.arr1)||void 0===i?void 0:i.pop(),r=null===e?void 0:e.noSuchProp,i=null===(e=(i=e.arr1).noSuchMethod)||void 0===e?void 0:e.call(i);console.log("Optional Chaining Operator works",t,n,r,i)}(),function(){var e=globalThis.prototype;console.log("globalThis works",e)}();var e=[d.name];console.log("There are known failures for ES 2020",e)}(),function(){var e="aabcdaaefgaa".replaceAll("aa","zz");console.log("String.prototype.replaceAll works",e)}(),function(){var e=null;null!==(n=e)&&void 0!==n||(e="foo");var t=null;t=t||"bar";var n="baz";n=n&&"jenga",console.log("Logical Assignment Operators work",e,t,n)}(),console.log("Numeric Literal Separators work",1234),Promise.any([Promise.resolve("test1"),Promise.resolve("test2")]).then(function(e){console.log("Promise.any works",e)}),function(){var e=new AggregateError([new Error("err1"),new Error("err2")],"test aggregate error");console.log("AggregateError works",e)}(),function(){var e=new URLSearchParams("param1=val1&param2=val2"),t=e.get("param1"),e=e.get("param2");console.log("URLSearchParams works",t,e)}();e=performance.now()-e;console.log(" ***** EcmaScript Feature Tests completed in: "+e+"ms")}function u(){var e=Int32Array.from([123,456,789,234,567]),e=Atomics.xor(e,2,123);console.log("Atomics work",e)}function d(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={runTests:a,runTestsOnJsDebug:function(){window&&window.location&&window.location.search&&-1<window.location.search.toLowerCase().indexOf("jsdebug=true")&&a()}}},{}],3:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-callable"),a=e("../internals/try-to-string"),o=r.TypeError;t.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a function")}},{"../internals/global":82,"../internals/is-callable":97,"../internals/try-to-string":188}],4:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-constructor"),a=e("../internals/try-to-string"),o=r.TypeError;t.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a constructor")}},{"../internals/global":82,"../internals/is-constructor":98,"../internals/try-to-string":188}],5:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-callable"),a=r.String,o=r.TypeError;t.exports=function(e){if("object"==typeof e||i(e))return e;throw o("Can't set "+a(e)+" as a prototype")}},{"../internals/global":82,"../internals/is-callable":97}],6:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/object-create"),e=e("../internals/object-define-property"),a=r("unscopables"),o=Array.prototype;null==o[a]&&e.f(o,a,{configurable:!0,value:i(null)}),t.exports=function(e){o[a][e]=!0}},{"../internals/object-create":127,"../internals/object-define-property":129,"../internals/well-known-symbol":197}],7:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":167}],8:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/object-is-prototype-of"),a=r.TypeError;t.exports=function(e,t){if(i(t,e))return e;throw a("Incorrect invocation")}},{"../internals/global":82,"../internals/object-is-prototype-of":136}],9:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-object"),a=r.String,o=r.TypeError;t.exports=function(e){if(i(e))return e;throw o(a(e)+" is not an object")}},{"../internals/global":82,"../internals/is-object":102}],10:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],11:[function(e,t,n){e=e("../internals/fails");t.exports=e(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))})},{"../internals/fails":67}],12:[function(e,t,n){"use strict";function r(e){return!!d(e)&&(e=p(e),f($,e)||f(_,e))}var i,a,o,s=e("../internals/array-buffer-native"),l=e("../internals/descriptors"),c=e("../internals/global"),u=e("../internals/is-callable"),d=e("../internals/is-object"),f=e("../internals/has-own-property"),p=e("../internals/classof"),h=e("../internals/try-to-string"),g=e("../internals/create-non-enumerable-property"),m=e("../internals/redefine"),v=e("../internals/object-define-property").f,y=e("../internals/object-is-prototype-of"),b=e("../internals/object-get-prototype-of"),w=e("../internals/object-set-prototype-of"),S=e("../internals/well-known-symbol"),x=e("../internals/uid"),C=c.Int8Array,k=C&&C.prototype,e=c.Uint8ClampedArray,e=e&&e.prototype,j=C&&b(C),M=k&&b(k),C=Object.prototype,A=c.TypeError,S=S("toStringTag"),T=x("TYPED_ARRAY_TAG"),I=x("TYPED_ARRAY_CONSTRUCTOR"),E=s&&!!w&&"Opera"!==p(c.opera),s=!1,$={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},_={BigInt64Array:8,BigUint64Array:8};for(i in $)(o=(a=c[i])&&a.prototype)?g(o,I,a):E=!1;for(i in _)(o=(a=c[i])&&a.prototype)&&g(o,I,a);if((!E||!u(j)||j===Function.prototype)&&(j=function(){throw A("Incorrect invocation")},E))for(i in $)c[i]&&w(c[i],j);if((!E||!M||M===C)&&(M=j.prototype,E))for(i in $)c[i]&&w(c[i].prototype,M);if(E&&b(e)!==M&&w(e,M),l&&!f(M,S))for(i in s=!0,v(M,S,{get:function(){return d(this)?this[T]:void 0}}),$)c[i]&&g(c[i],T,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:E,TYPED_ARRAY_CONSTRUCTOR:I,TYPED_ARRAY_TAG:s&&T,aTypedArray:function(e){if(r(e))return e;throw A("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!w||y(j,e)))return e;throw A(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(l){if(n)for(var r in $){r=c[r];if(r&&f(r.prototype,e))try{delete r.prototype[e]}catch(e){}}M[e]&&!n||m(M,e,!n&&E&&k[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(l){if(w){if(n)for(r in $)if((i=c[r])&&f(i,e))try{delete i[e]}catch(e){}if(j[e]&&!n)return;try{return m(j,e,!n&&E&&j[e]||t)}catch(e){}}for(r in $)!(i=c[r])||i[e]&&!n||m(i,e,t)}},isView:function(e){if(!d(e))return!1;e=p(e);return"DataView"===e||f($,e)||f(_,e)},isTypedArray:r,TypedArray:j,TypedArrayPrototype:M}},{"../internals/array-buffer-native":10,"../internals/classof":33,"../internals/create-non-enumerable-property":43,"../internals/descriptors":50,"../internals/global":82,"../internals/has-own-property":83,"../internals/is-callable":97,"../internals/is-object":102,"../internals/object-define-property":129,"../internals/object-get-prototype-of":134,"../internals/object-is-prototype-of":136,"../internals/object-set-prototype-of":141,"../internals/redefine":150,"../internals/try-to-string":188,"../internals/uid":194,"../internals/well-known-symbol":197}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function i(e){return[255&e,e>>8&255]}function a(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return J(e,23,4)}function l(e){return J(e,52,8)}function c(e,t){T(e[O],t,{get:function(){return P(this)[t]}})}function u(e,t,n,r){var i=C(n),n=P(e);if(i+t>n.byteLength)throw z(U);return e=P(n.buffer).bytes,n=i+n.byteOffset,t=E(e,n,n+t),r?t:W(t)}function d(e,t,n,r,i,a){if(n=C(n),e=P(e),n+t>e.byteLength)throw z(U);for(var o=P(e.buffer).bytes,s=n+e.byteOffset,l=r(+i),c=0;c<t;c++)o[s+c]=l[a?c:t-c-1]}var f=e("../internals/global"),p=e("../internals/function-uncurry-this"),h=e("../internals/descriptors"),g=e("../internals/array-buffer-native"),m=e("../internals/function-name"),v=e("../internals/create-non-enumerable-property"),y=e("../internals/redefine-all"),b=e("../internals/fails"),w=e("../internals/an-instance"),S=e("../internals/to-integer-or-infinity"),x=e("../internals/to-length"),C=e("../internals/to-index"),k=e("../internals/ieee754"),j=e("../internals/object-get-prototype-of"),M=e("../internals/object-set-prototype-of"),A=e("../internals/object-get-own-property-names").f,T=e("../internals/object-define-property").f,I=e("../internals/array-fill"),E=e("../internals/array-slice-simple"),$=e("../internals/set-to-string-tag"),_=e("../internals/internal-state"),R=m.PROPER,F=m.CONFIGURABLE,P=_.get,L=_.set,e="ArrayBuffer",O="prototype",U="Wrong index",D=f[e],N=D,B=N&&N[O],m=f.DataView,q=m&&m[O],_=Object.prototype,H=f.Array,z=f.RangeError,V=p(I),W=p([].reverse),J=k.pack,Q=k.unpack;if(g){var G=R&&D.name!==e;if(b(function(){D(1)})&&b(function(){new D(-1)})&&!b(function(){return new D,new D(1.5),new D(NaN),G&&!F}))G&&F&&v(D,"name",e);else{(N=function(e){return w(this,B),new D(C(e))})[O]=B;for(var Y,X=A(D),K=0;X.length>K;)(Y=X[K++])in N||v(N,Y,D[Y]);B.constructor=N}M&&j(q)!==_&&M(q,_);var _=new m(new N(2)),Z=p(q.setInt8);_.setInt8(0,2147483648),_.setInt8(1,2147483649),!_.getInt8(0)&&_.getInt8(1)||y(q,{setInt8:function(e,t){Z(this,e,t<<24>>24)},setUint8:function(e,t){Z(this,e,t<<24>>24)}},{unsafe:!0})}else B=(N=function(e){w(this,B);e=C(e);L(this,{bytes:V(H(e),0),byteLength:e}),h||(this.byteLength=e)})[O],q=(m=function(e,t,n){w(this,q),w(e,B);var r=P(e).byteLength,t=S(t);if(t<0||r<t)throw z("Wrong offset");if(r<t+(n=void 0===n?r-t:x(n)))throw z("Wrong length");L(this,{buffer:e,byteLength:n,byteOffset:t}),h||(this.buffer=e,this.byteLength=n,this.byteOffset=t)})[O],h&&(c(N,"byteLength"),c(m,"buffer"),c(m,"byteLength"),c(m,"byteOffset")),y(q,{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){e=u(this,2,e,1<arguments.length?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=u(this,2,e,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(e){return o(u(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return o(u(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return Q(u(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return Q(u(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){d(this,1,e,r,t)},setUint8:function(e,t){d(this,1,e,r,t)},setInt16:function(e,t){d(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){d(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){d(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){d(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){d(this,4,e,s,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){d(this,8,e,l,t,2<arguments.length?arguments[2]:void 0)}});$(N,e),$(m,"DataView"),t.exports={ArrayBuffer:N,DataView:m}},{"../internals/an-instance":8,"../internals/array-buffer-native":10,"../internals/array-fill":15,"../internals/array-slice-simple":25,"../internals/create-non-enumerable-property":43,"../internals/descriptors":50,"../internals/fails":67,"../internals/function-name":75,"../internals/function-uncurry-this":76,"../internals/global":82,"../internals/ieee754":88,"../internals/internal-state":94,"../internals/object-define-property":129,"../internals/object-get-own-property-names":132,"../internals/object-get-prototype-of":134,"../internals/object-set-prototype-of":141,"../internals/redefine-all":149,"../internals/set-to-string-tag":161,"../internals/to-index":177,"../internals/to-integer-or-infinity":179,"../internals/to-length":180}],14:[function(e,t,n){"use strict";var l=e("../internals/to-object"),c=e("../internals/to-absolute-index"),u=e("../internals/length-of-array-like"),d=Math.min;t.exports=[].copyWithin||function(e,t){var n=l(this),r=u(n),i=c(e,r),a=c(t,r),t=2<arguments.length?arguments[2]:void 0,o=d((void 0===t?r:c(t,r))-a,r-i),s=1;for(a<i&&i<a+o&&(s=-1,a+=o-1,i+=o-1);0<o--;)a in n?n[i]=n[a]:delete n[i],i+=s,a+=s;return n}},{"../internals/length-of-array-like":110,"../internals/to-absolute-index":176,"../internals/to-object":181}],15:[function(e,t,n){"use strict";var o=e("../internals/to-object"),s=e("../internals/to-absolute-index"),l=e("../internals/length-of-array-like");t.exports=function(e){for(var t=o(this),n=l(t),r=arguments.length,i=s(1<r?arguments[1]:void 0,n),r=2<r?arguments[2]:void 0,a=void 0===r?n:s(r,n);i<a;)t[i++]=e;return t}},{"../internals/length-of-array-like":110,"../internals/to-absolute-index":176,"../internals/to-object":181}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,e=e("../internals/array-method-is-strict")("forEach");t.exports=e?[].forEach:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":20,"../internals/array-method-is-strict":23}],17:[function(e,t,n){t.exports=function(e,t){for(var n=0,r=t.length,i=new e(r);n<r;)i[n]=t[n++];return i}},{}],18:[function(e,t,n){"use strict";var r=e("../internals/global"),f=e("../internals/function-bind-context"),p=e("../internals/function-call"),h=e("../internals/to-object"),g=e("../internals/call-with-safe-iteration-closing"),m=e("../internals/is-array-iterator-method"),v=e("../internals/is-constructor"),y=e("../internals/length-of-array-like"),b=e("../internals/create-property"),w=e("../internals/get-iterator"),S=e("../internals/get-iterator-method"),x=r.Array;t.exports=function(e){var t=h(e),n=v(this),e=arguments.length,r=1<e?arguments[1]:void 0,i=void 0!==r;i&&(r=f(r,2<e?arguments[2]:void 0));var a,o,s,l,c,u,e=S(t),d=0;if(!e||this==x&&m(e))for(a=y(t),o=n?new this(a):x(a);d<a;d++)u=i?r(t[d],d):t[d],b(o,d,u);else for(c=(l=w(t,e)).next,o=n?new this:[];!(s=p(c,l)).done;d++)u=i?g(l,r,[s.value,d],!0):s.value,b(o,d,u);return o.length=d,o}},{"../internals/call-with-safe-iteration-closing":30,"../internals/create-property":45,"../internals/function-bind-context":72,"../internals/function-call":74,"../internals/get-iterator":79,"../internals/get-iterator-method":78,"../internals/global":82,"../internals/is-array-iterator-method":95,"../internals/is-constructor":98,"../internals/length-of-array-like":110,"../internals/to-object":181}],19:[function(e,t,n){function r(s){return function(e,t,n){var r,i=l(e),a=u(i),o=c(n,a);if(s&&t!=t){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===t)return s||o||0;return!s&&-1}}var l=e("../internals/to-indexed-object"),c=e("../internals/to-absolute-index"),u=e("../internals/length-of-array-like");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/length-of-array-like":110,"../internals/to-absolute-index":176,"../internals/to-indexed-object":178}],20:[function(e,t,n){function r(f){var p=1==f,h=2==f,g=3==f,m=4==f,v=6==f,y=7==f,b=5==f||v;return function(e,t,n,r){for(var i,a,o=x(e),s=S(o),l=w(t,n),c=C(s),u=0,r=r||k,d=p?r(e,c):h||y?r(e,0):void 0;u<c;u++)if((b||u in s)&&(a=l(i=s[u],u,o),f))if(p)d[u]=a;else if(a)switch(f){case 3:return!0;case 5:return i;case 6:return u;case 2:j(d,i)}else switch(f){case 4:return!1;case 7:j(d,i)}return v?-1:g||m?m:d}}var w=e("../internals/function-bind-context"),i=e("../internals/function-uncurry-this"),S=e("../internals/indexed-object"),x=e("../internals/to-object"),C=e("../internals/length-of-array-like"),k=e("../internals/array-species-create"),j=i([].push);t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterReject:r(7)}},{"../internals/array-species-create":29,"../internals/function-bind-context":72,"../internals/function-uncurry-this":76,"../internals/indexed-object":89,"../internals/length-of-array-like":110,"../internals/to-object":181}],21:[function(e,t,n){"use strict";var i=e("../internals/function-apply"),a=e("../internals/to-indexed-object"),o=e("../internals/to-integer-or-infinity"),s=e("../internals/length-of-array-like"),e=e("../internals/array-method-is-strict"),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,e=e("lastIndexOf");t.exports=u||!e?function(e){if(u)return i(c,this,arguments)||0;var t=a(this),n=s(t),r=n-1;for((r=1<arguments.length?l(r,o(arguments[1])):r)<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:c},{"../internals/array-method-is-strict":23,"../internals/function-apply":71,"../internals/length-of-array-like":110,"../internals/to-indexed-object":178,"../internals/to-integer-or-infinity":179}],22:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/well-known-symbol"),a=e("../internals/engine-v8-version"),o=i("species");t.exports=function(t){return 51<=a||!r(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},{"../internals/engine-v8-version":62,"../internals/fails":67,"../internals/well-known-symbol":197}],23:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})}},{"../internals/fails":67}],24:[function(e,t,n){function r(c){return function(e,t,n,r){u(t);var i=d(e),a=f(i),o=p(i),s=c?o-1:0,l=c?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=l;break}if(s+=l,c?s<0:o<=s)throw h("Reduce of empty array with no initial value")}for(;c?0<=s:s<o;s+=l)s in a&&(r=t(r,a[s],s,i));return r}}var i=e("../internals/global"),u=e("../internals/a-callable"),d=e("../internals/to-object"),f=e("../internals/indexed-object"),p=e("../internals/length-of-array-like"),h=i.TypeError;t.exports={left:r(!1),right:r(!0)}},{"../internals/a-callable":3,"../internals/global":82,"../internals/indexed-object":89,"../internals/length-of-array-like":110,"../internals/to-object":181}],25:[function(e,t,n){var r=e("../internals/global"),l=e("../internals/to-absolute-index"),c=e("../internals/length-of-array-like"),u=e("../internals/create-property"),d=r.Array,f=Math.max;t.exports=function(e,t,n){for(var r=c(e),i=l(t,r),a=l(void 0===n?r:n,r),o=d(f(a-i,0)),s=0;i<a;i++,s++)u(o,s,e[i]);return o.length=s,o}},{"../internals/create-property":45,"../internals/global":82,"../internals/length-of-array-like":110,"../internals/to-absolute-index":176}],26:[function(e,t,n){e=e("../internals/function-uncurry-this");t.exports=e([].slice)},{"../internals/function-uncurry-this":76}],27:[function(e,t,n){function i(e,t){var n=e.length,r=o(n/2);return n<8?function(e,t){var n=e.length,r=1,i,a;while(r<n){a=r;i=e[r];while(a&&t(e[a-1],i)>0)e[a]=e[--a];if(a!==r++)e[a]=i}return e}(e,t):function(e,t,n,r){var i=t.length,a=n.length,o=0,s=0;while(o<i||s<a)e[o+s]=o<i&&s<a?r(t[o],n[s])<=0?t[o++]:n[s++]:o<i?t[o++]:n[s++];return e}(e,i(a(e,0,r),t),i(a(e,r),t),t)}var a=e("../internals/array-slice-simple"),o=Math.floor;t.exports=i},{"../internals/array-slice-simple":25}],28:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-array"),a=e("../internals/is-constructor"),o=e("../internals/is-object"),s=e("../internals/well-known-symbol")("species"),l=r.Array;t.exports=function(e){var t;return i(e)&&(t=e.constructor,(a(t)&&(t===l||i(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?l:t}},{"../internals/global":82,"../internals/is-array":96,"../internals/is-constructor":98,"../internals/is-object":102,"../internals/well-known-symbol":197}],29:[function(e,t,n){var r=e("../internals/array-species-constructor");t.exports=function(e,t){return new(r(e))(0===t?0:t)}},{"../internals/array-species-constructor":28}],30:[function(e,t,n){var i=e("../internals/an-object"),a=e("../internals/iterator-close");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){a(t,"throw",e)}}},{"../internals/an-object":9,"../internals/iterator-close":107}],31:[function(e,t,n){var i=e("../internals/well-known-symbol")("iterator"),a=!1;try{var r=0,o={next:function(){return{done:!!r++}},return:function(){a=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},{"../internals/well-known-symbol":197}],32:[function(e,t,n){var e=e("../internals/function-uncurry-this"),r=e({}.toString),i=e("".slice);t.exports=function(e){return i(r(e),8,-1)}},{"../internals/function-uncurry-this":76}],33:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/to-string-tag-support"),a=e("../internals/is-callable"),o=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("toStringTag"),l=r.Object,c="Arguments"==o(function(){return arguments}());t.exports=i?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?e:c?o(t):"Object"==(e=o(t))&&a(t.callee)?"Arguments":e}},{"../internals/classof-raw":32,"../internals/global":82,"../internals/is-callable":97,"../internals/to-string-tag-support":186,"../internals/well-known-symbol":197}],34:[function(e,t,n){var r=e("../internals/function-uncurry-this"),i=e("../internals/array-slice-simple"),a=r("".replace),o=r("".split),s=r([].join),r=String(Error("zxcasd").stack),l=/\n\s*at [^:]*:[^\n]*/,c=l.test(r),u=/@[^\n]*\n/.test(r)&&!/zxcasd/.test(r);t.exports=function(e,t){if("string"!=typeof e)return e;if(c)for(;t--;)e=a(e,l,"");else if(u)return s(i(o(e,"\n"),t),"\n");return e}},{"../internals/array-slice-simple":25,"../internals/function-uncurry-this":76}],35:[function(e,t,n){"use strict";var c=e("../internals/object-define-property").f,u=e("../internals/object-create"),d=e("../internals/redefine-all"),f=e("../internals/function-bind-context"),p=e("../internals/an-instance"),h=e("../internals/iterate"),o=e("../internals/define-iterator"),s=e("../internals/set-species"),g=e("../internals/descriptors"),m=e("../internals/internal-metadata").fastKey,e=e("../internals/internal-state"),v=e.set,y=e.getterFor;t.exports={getConstructor:function(e,n,r,i){function a(e,t,n){var r,i=l(e),a=o(e,t);return a?a.value=n:(i.last=a={index:r=m(t,!0),key:t,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),g?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e}function o(e,t){var n,r=l(e);if("F"!==(e=m(t)))return r.index[e];for(n=r.first;n;n=n.next)if(n.key==t)return n}var e=e(function(e,t){p(e,s),v(e,{type:n,index:u(null),first:void 0,last:void 0,size:0}),g||(e.size=0),null!=t&&h(t,e[i],{that:e,AS_ENTRIES:r})}),s=e.prototype,l=y(n);return d(s,{clear:function(){for(var e=l(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,g?e.size=0:this.size=0},delete:function(e){var t,n=l(this),r=o(this,e);return r&&(t=r.next,e=r.previous,delete n.index[r.index],r.removed=!0,e&&(e.next=t),t&&(t.previous=e),n.first==r&&(n.first=t),n.last==r&&(n.last=e),g?n.size--:this.size--),!!r},forEach:function(e){for(var t,n=l(this),r=f(e,1<arguments.length?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!o(this,e)}}),d(s,r?{get:function(e){e=o(this,e);return e&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),g&&c(s,"size",{get:function(){return l(this).size}}),e},setStrong:function(e,t,n){var r=t+" Iterator",i=y(t),a=y(r);o(e,t,function(e,t){v(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}},n?"entries":"values",!n,!0),s(t)}}},{"../internals/an-instance":8,"../internals/define-iterator":48,"../internals/descriptors":50,"../internals/function-bind-context":72,"../internals/internal-metadata":93,"../internals/internal-state":94,"../internals/iterate":106,"../internals/object-create":127,"../internals/object-define-property":129,"../internals/redefine-all":149,"../internals/set-species":160}],36:[function(e,t,n){"use strict";function l(e){return e.frozen||(e.frozen=new r)}function r(){this.entries=[]}function i(e,t){return s(e.entries,function(e){return e[0]===t})}var a=e("../internals/function-uncurry-this"),c=e("../internals/redefine-all"),u=e("../internals/internal-metadata").getWeakData,d=e("../internals/an-object"),f=e("../internals/is-object"),p=e("../internals/an-instance"),h=e("../internals/iterate"),o=e("../internals/array-iteration"),g=e("../internals/has-own-property"),e=e("../internals/internal-state"),m=e.set,v=e.getterFor,s=o.find,y=o.findIndex,b=a([].splice),w=0;r.prototype={get:function(e){e=i(this,e);if(e)return e[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(t){var e=y(this.entries,function(e){return e[0]===t});return~e&&b(this.entries,e,1),!!~e}},t.exports={getConstructor:function(e,n,r,i){function a(e,t,n){var r=s(e),i=u(d(t),!0);return!0===i?l(r).set(t,n):i[r.id]=n,e}var e=e(function(e,t){p(e,o),m(e,{type:n,id:w++,frozen:void 0}),null!=t&&h(t,e[i],{that:e,AS_ENTRIES:r})}),o=e.prototype,s=v(n);return c(o,{delete:function(e){var t=s(this);if(!f(e))return!1;var n=u(e);return!0===n?l(t).delete(e):n&&g(n,t.id)&&delete n[t.id]},has:function(e){var t=s(this);if(!f(e))return!1;var n=u(e);return!0===n?l(t).has(e):n&&g(n,t.id)}}),c(o,r?{get:function(e){var t=s(this);if(f(e)){var n=u(e);return!0===n?l(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),e}}},{"../internals/an-instance":8,"../internals/an-object":9,"../internals/array-iteration":20,"../internals/function-uncurry-this":76,"../internals/has-own-property":83,"../internals/internal-metadata":93,"../internals/internal-state":94,"../internals/is-object":102,"../internals/iterate":106,"../internals/redefine-all":149}],37:[function(e,t,n){"use strict";var m=e("../internals/export"),v=e("../internals/global"),y=e("../internals/function-uncurry-this"),b=e("../internals/is-forced"),w=e("../internals/redefine"),S=e("../internals/internal-metadata"),x=e("../internals/iterate"),C=e("../internals/an-instance"),k=e("../internals/is-callable"),j=e("../internals/is-object"),M=e("../internals/fails"),A=e("../internals/check-correctness-of-iteration"),T=e("../internals/set-to-string-tag"),I=e("../internals/inherit-if-required");t.exports=function(e,t,n){function r(e){var n=y(p[e]);w(p,e,"add"==e?function(e){return n(this,0===e?0:e),this}:"delete"==e?function(e){return!(u&&!j(e))&&n(this,0===e?0:e)}:"get"==e?function(e){return u&&!j(e)?void 0:n(this,0===e?0:e)}:"has"==e?function(e){return!(u&&!j(e))&&n(this,0===e?0:e)}:function(e,t){return n(this,0===e?0:e,t),this})}var i,a,o,s,l,c=-1!==e.indexOf("Map"),u=-1!==e.indexOf("Weak"),d=c?"set":"add",f=v[e],p=f&&f.prototype,h=f,g={};return b(e,!k(f)||!(u||p.forEach&&!M(function(){(new f).entries().next()})))?(h=n.getConstructor(t,e,c,d),S.enable()):b(e,!0)&&(a=(i=new h)[d](u?{}:-0,1)!=i,o=M(function(){i.has(1)}),s=A(function(e){new f(e)}),l=!u&&M(function(){for(var e=new f,t=5;t--;)e[d](t,t);return!e.has(-0)}),s||(((h=t(function(e,t){C(e,p);e=I(new f,e,h);return null!=t&&x(t,e[d],{that:e,AS_ENTRIES:c}),e})).prototype=p).constructor=h),(o||l)&&(r("delete"),r("has"),c&&r("get")),(l||a)&&r(d),u&&p.clear&&delete p.clear),g[e]=h,m({global:!0,forced:h!=f},g),T(h,e),u||n.setStrong(h,e,c),h}},{"../internals/an-instance":8,"../internals/check-correctness-of-iteration":31,"../internals/export":66,"../internals/fails":67,"../internals/function-uncurry-this":76,"../internals/global":82,"../internals/inherit-if-required":90,"../internals/internal-metadata":93,"../internals/is-callable":97,"../internals/is-forced":100,"../internals/is-object":102,"../internals/iterate":106,"../internals/redefine":150,"../internals/set-to-string-tag":161}],38:[function(e,t,n){var s=e("../internals/has-own-property"),l=e("../internals/own-keys"),c=e("../internals/object-get-own-property-descriptor"),u=e("../internals/object-define-property");t.exports=function(e,t){for(var n=l(t),r=u.f,i=c.f,a=0;a<n.length;a++){var o=n[a];s(e,o)||r(e,o,i(t,o))}}},{"../internals/has-own-property":83,"../internals/object-define-property":129,"../internals/object-get-own-property-descriptor":130,"../internals/own-keys":145}],39:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,"/./"[t](n)}catch(e){}}return!1}},{"../internals/well-known-symbol":197}],40:[function(e,t,n){e=e("../internals/fails");t.exports=!e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},{"../internals/fails":67}],41:[function(e,t,n){var r=e("../internals/function-uncurry-this"),a=e("../internals/require-object-coercible"),o=e("../internals/to-string"),s=/"/g,l=r("".replace);t.exports=function(e,t,n,r){var i=o(a(e)),e="<"+t;return""!==n&&(e+=" "+n+'="'+l(o(r),s,"&quot;")+'"'),e+">"+i+"</"+t+">"}},{"../internals/function-uncurry-this":76,"../internals/require-object-coercible":157,"../internals/to-string":187}],42:[function(e,t,n){"use strict";function i(){return this}var a=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),s=e("../internals/create-property-descriptor"),l=e("../internals/set-to-string-tag"),c=e("../internals/iterators");t.exports=function(e,t,n,r){t+=" Iterator";return e.prototype=o(a,{next:s(+!r,n)}),l(e,t,!1,!0),c[t]=i,e}},{"../internals/create-property-descriptor":44,"../internals/iterators":109,"../internals/iterators-core":108,"../internals/object-create":127,"../internals/set-to-string-tag":161}],43:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),a=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":44,"../internals/descriptors":50,"../internals/object-define-property":129}],44:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],45:[function(){}