(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=e&&i.element(this)}),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s=this[0];if(e){var r=t.data(s.form,"validator").settings,n=r.rules,a=t.validator.staticRules(s);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,n[s.name]=a,i.messages&&(r.messages[s.name]=t.extend(r.messages[s.name],i.messages));break;case"remove":if(!i)return delete n[s.name],a;var u={};return t.each(i.split(/\s/),function(t,e){u[e]=a[e],delete a[e]}),u}}var o=t.validator.normalizeRules(t.extend({},t.validator.classRules(s),t.validator.attributeRules(s),t.validator.dataRules(s),t.validator.staticRules(s)),s);if(o.required){var l=o.required;delete o.required,o=t.extend({required:l},o)}return o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,"");i.settings[s]&&i.settings[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,s){"string"==typeof s&&(s=s.split(/\s/)),t.each(s,function(t,s){i[s]=e})});var s=this.settings.rules;t.each(s,function(e,i){s[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),s=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof s?s.replace(/\r/g,""):s},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s=t(e).rules(),r=!1,n=this.elementValue(e);for(var a in s){var u={method:a,parameters:s[a]};try{if(i=t.validator.methods[a].call(this,n,e,u.parameters),"dependency-mismatch"===i){r=!0;continue}if(r=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(e)),void 0;if(!i)return this.formatAndAdd(e,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+u.method+"' method.",o),o}}return r?void 0:(this.objectLength(s)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s=this.errorsFor(e);s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(s=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return /radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},s=t(e),r=s[0].getAttribute("type");for(var n in t.validator.methods){var a;"required"===n?(a=s.get(0).getAttribute(n),""===a&&(a=!0),a=!!a):a=s.attr(n),/min|max/.test(n)&&(null===r||/number|range|text/.test(r))&&(a=Number(a)),a?i[n]=a:r===n&&"range"!==r&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule-"+i.toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return delete e[s],void 0;if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],3>i.length&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,s=0,r=!1;t=t.replace(/\D/g,"");for(var n=t.length-1;n>=0;n--){var a=t.charAt(n);s=parseInt(a,10),r&&(s*=2)>9&&(s-=9),i+=s,r=!r}return 0===i%10},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s[0]&&s[1]>=r},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&i[1]>=t},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,s="string"==typeof s&&{url:s}||s,r.old===e)return r.valid;r.old=e;var n=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(s){n.settings.messages[i.name].remote=r.originalMessage;var a=s===!0||"true"===s;if(a){var u=n.formSubmitted;n.prepareElement(i),n.formSubmitted=u,n.successList.push(i),delete n.invalid[i.name],n.showErrors()}else{var o={},l=s||n.defaultMessage(i,"remote");o[i.name]=r.message=t.isFunction(l)?l(e):l,n.invalid[i.name]=!0,n.showErrors(o)}r.valid=a,n.stopRequest(i,a)}},s)),"pending"}}}),t.format=t.validator.format})(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,s){var r=t.port;"abort"===t.mode&&(e[r]&&e[r].abort(),e[r]=s)});else{var i=t.ajax;t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(e[n]&&e[n].abort(),e[n]=i.apply(this,arguments),e[n]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})}(jQuery);;;;var route=(function(){'use strict';var observable=function(el){el=el||{};var callbacks={},slice=Array.prototype.slice;Object.defineProperties(el,{on:{value:function(event,fn){if(typeof fn=='function')
{(callbacks[event]=callbacks[event]||[]).push(fn);}
return el},enumerable:false,writable:false,configurable:false},off:{value:function(event,fn){if(event=='*'&&!fn){callbacks={};}
else{if(fn){var arr=callbacks[event];for(var i=0,cb;cb=arr&&arr[i];++i){if(cb==fn){arr.splice(i--,1);}}}else{delete callbacks[event];}}
return el},enumerable:false,writable:false,configurable:false},one:{value:function(event,fn){function on(){el.off(event,on);fn.apply(el,arguments);}
return el.on(event,on)},enumerable:false,writable:false,configurable:false},trigger:{value:function(event){var arguments$1=arguments;var arglen=arguments.length-1,args=new Array(arglen),fns,fn,i;for(i=0;i<arglen;i++){args[i]=arguments$1[i+1];}
fns=slice.call(callbacks[event]||[],0);for(i=0;fn=fns[i];++i){fn.apply(el,args);}
if(callbacks['*']&&event!='*')
{el.trigger.apply(el,['*',event].concat(args));}
return el},enumerable:false,writable:false,configurable:false}});return el};var RE_ORIGIN=/^.+?\/\/+[^\/]+/;var EVENT_LISTENER='EventListener';var REMOVE_EVENT_LISTENER='remove'+EVENT_LISTENER;var ADD_EVENT_LISTENER='add'+EVENT_LISTENER;var HAS_ATTRIBUTE='hasAttribute';var POPSTATE='popstate';var HASHCHANGE='hashchange';var TRIGGER='trigger';var MAX_EMIT_STACK_LEVEL=3;var win=typeof window!='undefined'&&window;var doc=typeof document!='undefined'&&document;var hist=win&&history;var loc=win&&(hist.location||win.location);var prot=Router.prototype;var clickEvent=doc&&doc.ontouchstart?'touchstart':'click';var central=observable();var started=false;var routeFound=false;var debouncedEmit;var base;var current;var parser;var secondParser;var emitStack=[];var emitStackLevel=0;function DEFAULT_PARSER(path){return path.split(/[/?#]/)}
function DEFAULT_SECOND_PARSER(path,filter){var f=filter.replace(/\?/g,'\\?').replace(/\*/g,'([^/?#]+?)').replace(/\.\./,'.*');var re=new RegExp(("^"+f+"$"));var args=path.match(re);if(args){return args.slice(1)}}
function debounce(fn,delay){var t;return function(){clearTimeout(t);t=setTimeout(fn,delay);}}
function start(autoExec){debouncedEmit=debounce(emit,1);win[ADD_EVENT_LISTENER](POPSTATE,debouncedEmit);win[ADD_EVENT_LISTENER](HASHCHANGE,debouncedEmit);doc[ADD_EVENT_LISTENER](clickEvent,click);if(autoExec){emit(true);}}
function Router(){this.$=[];observable(this);central.on('stop',this.s.bind(this));central.on('emit',this.e.bind(this));}
function normalize(path){return path.replace(/^\/|\/$/,'')}
function isString(str){return typeof str=='string'}
function getPathFromRoot(href){return(href||loc.href).replace(RE_ORIGIN,'')}
function getPathFromBase(href){return base[0]==='#'?(href||loc.href||'').split(base)[1]||'':(loc?getPathFromRoot(href):href||'').replace(base,'')}
function emit(force){var isRoot=emitStackLevel===0;if(MAX_EMIT_STACK_LEVEL<=emitStackLevel){return}
emitStackLevel++;emitStack.push(function(){var path=getPathFromBase();if(force||path!==current){central[TRIGGER]('emit',path);current=path;}});if(isRoot){var first;while(first=emitStack.shift()){first();}
emitStackLevel=0;}}
function click(e){if(e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented){return}
var el=e.target;while(el&&el.nodeName!=='A'){el=el.parentNode;}
if(!el||el.nodeName!=='A'||el[HAS_ATTRIBUTE]('download')||!el[HAS_ATTRIBUTE]('href')||el.target&&el.target!=='_self'||el.href.indexOf(loc.href.match(RE_ORIGIN)[0])===-1){return}
if(el.href!==loc.href&&(el.href.split('#')[0]===loc.href.split('#')[0]||base[0]!=='#'&&getPathFromRoot(el.href).indexOf(base)!==0||base[0]==='#'&&el.href.split(base)[0]!==loc.href.split(base)[0]||!go(getPathFromBase(el.href),el.title||doc.title))){return}
e.preventDefault();}
function go(path,title,shouldReplace){if(!hist){return central[TRIGGER]('emit',getPathFromBase(path))}
path=base+normalize(path);title=title||doc.title;shouldReplace?hist.replaceState(null,title,path):hist.pushState(null,title,path);doc.title=title;routeFound=false;emit();return routeFound}
prot.m=function(first,second,third){if(isString(first)&&(!second||isString(second))){go(first,second,third||false);}
else if(second){this.r(first,second);}
else{this.r('@',first);}};prot.s=function(){this.off('*');this.$=[];};prot.e=function(path){this.$.concat('@').some(function(filter){var args=(filter==='@'?parser:secondParser)(normalize(path),normalize(filter));if(typeof args!='undefined'){this[TRIGGER].apply(null,[filter].concat(args));return routeFound=true}},this);};prot.r=function(filter,action){if(filter!=='@'){filter='/'+normalize(filter);this.$.push(filter);}
this.on(filter,action);};var mainRouter=new Router();var route=mainRouter.m.bind(mainRouter);route.create=function(){var newSubRouter=new Router();var router=newSubRouter.m.bind(newSubRouter);router.stop=newSubRouter.s.bind(newSubRouter);return router};route.base=function(arg){base=arg||'#';current=getPathFromBase();};route.exec=function(){emit(true);};route.parser=function(fn,fn2){if(!fn&&!fn2){parser=DEFAULT_PARSER;secondParser=DEFAULT_SECOND_PARSER;}
if(fn){parser=fn;}
if(fn2){secondParser=fn2;}};route.query=function(){var q={};var href=loc.href||current;href.replace(/[?&](.+?)=([^&]*)/g,function(_,k,v){q[k]=v;});return q};route.stop=function(){if(started){if(win){win[REMOVE_EVENT_LISTENER](POPSTATE,debouncedEmit);win[REMOVE_EVENT_LISTENER](HASHCHANGE,debouncedEmit);doc[REMOVE_EVENT_LISTENER](clickEvent,click);}
central[TRIGGER]('stop');started=false;}};route.start=function(autoExec){if(!started){if(win){if(document.readyState==='interactive'||document.readyState==='complete'){start(autoExec);}
else{document.onreadystatechange=function(){if(document.readyState==='interactive'){setTimeout(function(){start(autoExec);},1);}};}}
started=true;}};route.base();route.parser();return route;}());;;;var StyleMixin={init:function(){this.on('mount',function(){this.styleblock=document.getElementById('riot-dynamic-styles');if(!this.styleblock){this.styleblock=document.creates/en-dth/channelsuElement('style');this.styleblock.setAttribute('id','riot-dynamic-styles');this.styleblock.type='text/css';document.body.appendChild(this.styleblock);}
this.sheet=this.styleblock.sheet;});},addCSSRule:function(selector,rules,idndex){if(this.sheet&&"insertRule"in this.sheet){this.sheet.insertRule(selector+"{"+rules+"}",this.sheet.cssRules.length);}
else if(this.sheet&&"addRule"in this.sheet){this.sheet.addRule(selector,package-inputrules,this.sheet.cssRules.length);}},editCSSRule:function(index,selector,rules){this.sheet.deleteRule(index);this.addCSSRule(selector,rules,this.sheet.cssRules.length);},updateCSSRule:function(selector,rules){var ruleIndex=-1;if(!this.sheet)
return;var theRules=this.sheet.cssRules?this.sheet.cssRules:this.sheet.rules;for(var i=0;i<theRules.length;i++){if(theRules[i].selectorText===selector){ruleIndex=i;break;}}
if(ruleIndex===-1){this.addCSSRule(selector,rules,this.sheet.cssRules.length);}
else{this.editCSSRule(ruleIndex,selector,rules);}}}
riot.mixin('promise',{promise:new function(){riot.observable(this);var self=this;this.get=function(url){var request=new XMLHttpRequest();request.promise=riot.observable();request.open('GET',url,true);request.onload=function(){var json;try{json=JSON.parse(request.responseText);}catch(e){json={};}
if(request.status>=200&&request.status<400)
request.promise.trigger('complete',{success:true,text:request.responseText,json:json});else
request.promise.trigger('complete',{success:false,text:request.responseText,json:json});};request.onerror=function(){request.promise.trigger('complete',{success:false,text:"connection error"});};request.send();return request.promise;};this.setdata=function(url,type,data,store,trigger,retries,promise){var request=new XMLHttpRequest();if(promise==undefined){app["loading"+store]="loading";site.trigger(trigger+'-loading');window.consolelog(trigger+"-loading : Started ");request.promise=riot.observable();}else{request.promise=promise;}
request.open(type,url,true);var timeout=500;request.onload=function(){var json;try{json=JSON.parse(request.responseText);}catch(e){json={};}
if(request.readyState===4&&request.status===200){if(store!=undefined&&store!==""){app[store]=json;window.SessionSave("app",app);}
window.consolelog("Data Success for "+store+" - "+trigger+'-loading-success');request.promise.trigger('complete',{success:true,text:request.responseText,json:json});site.trigger(trigger+'-loading-success',json,true);app["loading"+store]=undefined;site.trigger(trigger,json,true);}
else{if(retries===0){request.promise.trigger('complete',{success:false,text:request.responseText,json:json});site.trigger(trigger+"-loading-fail",json,false);app["loading"+store]=undefined;site.trigger(trigger,json,false);var trackData={};trackData.Result=json;trackData.URL=url;trackData.Type=type;trackData.Store=store+" - "+trigger+"-loading-fail";site.trigger("track-api-retry-fail",trackData);}else{setTimeout(function(){self.setdata(url,type,data,store,trigger,retries-1,request.promise);},timeout);}}};request.send(data);return request.promise;}
this.all=function(){var completed=[],isArr=Array.isArray(arguments[0]);var args=isArr?arguments[0]:arguments;var narg=args.length,entries=0;for(var i=0;i<narg;i++){args[i].index=i;args[i].one('complete',function(a){completed[this.index]=a;if(++entries===narg)
self.trigger.apply(null,['complete'].concat(isArr?[completed]:completed));});}
return self;}
return this;}});riot.mixin('loader',{loadscript:function(scriptSrc,callback){var head=document.querySelector('head');var selector="script[src='"+scriptSrc+"']";var script=document.querySelector(selector);if(script==undefined){script=document.createElement('script');script.type='text/javascript';script.src=scriptSrc;head.appendChild(script);}
if(script.callbacks==undefined)
script.callbacks=[];script.callbacks.push(callback);script.doCallbacks=function(){script.callbacks.forEach(function(c,i){c();});}
script.onload=function(){script.doCallbacks();}
script.onreadystatechange=function(){if(this.readyState==='complete'){script.doCallbacks();}}}});riot.mixin('tracker',{track:function(action,data,result){}})
riot.tag2('navigate','<a href="{document.querySelector(\'router\').getBasePath()+opts.to}" onclick="{navigateToRoute}"><yield></yield></a>','','',function(opts){var self=this;this.navigateToRoute=function(e){e.preventDefault();riot.route(self.opts.to,self.opts.title||null,self.opts.replace?true:false);}});riot.tag2('route','<yield></yield>','','',function(opts){this.on('mount',function(e){if(Object.keys(this.tags).length===0){this.parent&&this.parent.setRoute&&this.parent.setRoute(this.opts.path,this.opts.component);}});this.setRoute=function(path,component){this.parent&&this.parent.setRoute&&this.parent.setRoute(this.opts.path+path,component);}});riot.tag2('router','<div ref="riotcontainer" class="route-container"><yield></yield></div><div ref="riotroot" class="riot-root"></div>','','',function(opts){var self=this;var $appRoot=null;var currTag=null;var _isRouteRendedered=false;var routeParams={};function unmountCurrRoute(){if(currTag&&currTag.unmount){currTag.unmount();}}
function createRouteWithTagName(tagName){var tag='<'+tagName+' class="route-'+tagName+'"></'+tagName+'>';unmountCurrRoute();$appRoot.innerHTML=tag;var mountedTag=false;try{if(typeof window==='undefined'){$appRoot.innerHTML=riot.render(tagName,routeParams);}else{mountedTag=riot.mount(tagName+'.route-'+tagName,routeParams);}}
catch(e){console.log(e);}
if(!mountedTag||mountedTag.length===0){site.trigger('tagNotFound',tagName);if(self.opts['onTagnotfound']&&self.opts['onTagnotfound']instanceof Function){self.opts['onTagnotfound'](tagName);}}
else{site.trigger('routeChanged',tagName);app.currentroute=tagName;if(self.opts['onRoutechange']&&self.opts['onRoutechange']instanceof Function){self.opts['onRoutechange'](tagName);}
currTag=mountedTag[0];}}
function changeRoute(newRoute){if(typeof(newRoute)==='string'){createRouteWithTagName(newRoute);}else if(newRoute instanceof Function){var result=newRoute();if(typeof(result)==='string'){createRouteWithTagName(newRoute);}else if(result instanceof Promise){result.then(function(tagName){createRouteWithTagName(tagName);});}}}
this.setRoute=function(path,component){(function(path,component){var tokenRegExp=/:([a-z]*)/ig;var params=path.match(tokenRegExp);var param1=function(param){return param.length>0?param.substring(1):''}
params=params&&params.map(param1(param))||params;path=path.replace(tokenRegExp,'*');if(typeof window==='undefined'&&!_isRouteRendedered){var serverSidePath=new RegExp(path.replace(/\*/g,'([^/?#]+?)').replace(/\.\./g,'.*')+'$');var loc=self.opts.location||self.parent&&self.parent.opts.location;if(serverSidePath.test(loc)){var matches=loc.match(serverSidePath)
matches.length&&matches.shift();routeParams={};params&&params.forEach(function(param,index){routeParams[param]=matches[index];});_isRouteRendedered=true;changeRoute(component);}}else if(typeof window!=='undefined'){route(path,function(){routeParams={};params&&params.forEach(function(param,index){routeParams[param]=arguments[index];});changeRoute(component);});route.start(true);}})(path,component)}
this.on('mount',function(e){if(!this.opts.showRoutes){var routeContainer=this.refs.riotcontainer;routeContainer.remove&&routeContainer.remove();}
$appRoot=this.refs.riotroot;this.opts.baseRoute&&route.base(this.opts.baseRoute);this.root.getBasePath=function(){return self.opts.baseRoute||'#';}});});riot.tag2('tag-background-image','<div class="bg-image-holder banner-img" ref="imgHolder"><img alt="image" class="background-image" riot-src="{compiledsrc}{sfx}" style="opacity: 0"></div>','tag-background-image { visibility: visible; }','',function(opts){var self=this;self.bgSrc=opts.bgsrc;self.sfx="";if(!opts.noresize){function getLargest(layouts){var mean=0;Object.keys(layouts).forEach(function(k,i){if(layouts[k].max>=max&&layouts[k].min<=max){mean=layouts[k].mean;}});return mean;}
self.parallax=opts.parallax?opts.parallax:false;var layouts={lg:{max:9999,min:1200,mean:1600},md:{max:1199,min:992,mean:1000},sm:{max:991,min:768,mean:800},xs:{max:767,min:1,mean:600}};var w=$(document).width();var h=$(window).height();var max=w>h?w:h;var min=max*(9/16);var o="l";var proportion=(9/16);if(opts.orientation){if(opts.orientation==="landscape"){o="l";}
else if(opts.orientation==="portrait"){o="p";}
else{o=w>h?"l":"p";}}
else{o=w>h?"l":"p";}
max=getLargest(layouts);if(opts.keepratio==="true"){if(o==="l")
self.sfx="?width="+max;else
self.sfx="?height="+max;}
else{if(o==="l")
self.sfx="?anchor=center&mode=crop&width="+max+"&height="+min;else
self.sfx="?anchor=center&mode=crop&width="+min+"&height="+max;}}
var bgpos="";self.compiledsrc=self.opts.bgsrc.replace("&amp;","&");if(opts.imagepos==="right"){}
self.on("mount",function(){if(opts.parallax){$(self.refs.imgHolder).parallax({imageSrc:opts.bgsrc.replace("&amp;","&")}).addClass("par-container");}
else{$(self.refs.imgHolder).attr('style','background-color: transparent; background-image: url("'+self.bgSrc.replace("&amp;","&")+self.sfx+'")'+bgpos);}
setTimeout(function(){$(self.refs.imgHolder).addClass('fadeIn');},200);});});riot.tag2('tag-compare-packages','<section class="pt-7 pb-0 compare-header"> <div class="container"> <yield></yield> <div if="{dstvApp.DualCurrency == \'on\' && dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation) && !notDualCurrency}" class="currencyToggle"><span class="currencyWord">Currency</span><label class="switch"><input onclick={onCurrencyToggle} class="switch-input" type="checkbox" checked /><span class="switch-label" data-on="USD" data-off="ETB"></span><span class="switch-handle"></span> </label></div> </div></section><section class="pb-4 pt-0"> <div class="container"> <div class="row pb-2 pt-5 change-package compare-packages"> <div class="col-xs-12"> <ul if="{packagesList}" class="packages"> <li each="{package, index in packagesList}"> <div class="compare"> <div> <div class="package-block" onclick="{() => selectpackage(package);}"> <div class="package-image img-bg" if="{package.properties.ProductImage != \'\'}" riot-style="background-image: url({package.properties.ProductImage})"></div> <div class="package-image img-bg" if="{package == undefined || package.properties.ProductImage == \'\'}"></div> <div class="package-name "> {package.properties.PackageName.replace(\'DStv \',\'\')} </div> <div class="pricebar" style="margin-top:-7px"> <div class="channels" if="{package}">{package.properties.ChannelCount} {langTranslateApp.pkgSliderChannels}</div> <div class="pack-price" if="{package.properties.Price && !app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ package.properties.Price + package.properties.PriceLetter}</div> <div class="pack-price" if="{package.properties.Price && app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ package.properties.localPrice.price + package.properties.PriceLetter}</div> <div class="pack-price" if="{package.properties.Price && notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ package.properties.Price + package.properties.PriceLetter}</div> </div> <span class="icon-Tick_large check-select {\'selected\' : selected1 == package || selected2 == package} "></span> </div> </div> </div> </li> </ul> <h2 class="page-header" if="{addOnList && addOnList.length}" >{langTranslateApp.addonpackages}</h2> <ul class="packages"> <li each="{package, index in addOnList}"> <div class="compare"> <div> <div class="package-block" onclick="{() => selectpackage(package);}"> <div class="package-image img-bg" if="{package.properties.ProductImage != \'\'}" riot-style="background-image: url({package.properties.ProductImage})"></div> <div class="package-image img-bg" if="{package == undefined || package.properties.ProductImage == \'\'}"></div> <div class="package-name "> {package.properties.PackageName.replace(\'DStv \',\'\')} </div> <div class="pricebar" style="margin-top:-7px"> <div class="channels" if="{package}">{package.properties.ChannelCount} {langTranslateApp.pkgSliderChannels}</div> <div class="pack-price" if="{package.properties.Price && !app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ package.properties.Price + package.properties.PriceLetter}</div> <div class="pack-price" if="{package.properties.Price && app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ package.properties.localPrice.price + package.properties.PriceLetter}</div> <div class="pack-price" if="{package.properties.Price && notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ package.properties.Price + package.properties.PriceLetter}</div> </div> <span class="icon-Tick_large check-select {\'selected\' : selected1 == package || selected2 == package} "></span> </div> </div> </div> </li> </ul> </div> </div> </div></section><section class="bg-dark compare-packs" id="comaparesection" if="{selected1 || selected2}"> <div class="container"> <div class="row"> <div class="col-sm-6" if=""> <div if="{selected1 != undefined}"> <div class="package-block"> <div class="package-image img-bg" if="{selected1.properties.ProductImage != \'\'}" riot-style="background-image: url({selected1.properties.ProductImage})"> <div class="package-logo"><i class="icon-pack icon-{selected1.properties.Code}"></i> <!--<img riot-src="{selected1.properties.PackageLogo}">--> </div> </div> <div class="pricebar" style="margin-top:-7px"> <div class="channels" if="{selected1}">{selected1.properties.ChannelCount} {langTranslateApp.pkgSliderChannels}</div> <div class="pack-price" if="{selected1.properties.Price && !app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() + " " + selected1.properties.Price + selected1.properties.PriceLetter}</div> <div class="pack-price" if="{selected1.properties.Price && app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() + " " + selected1.properties.localPrice.price + selected1.properties.PriceLetter}</div> <div class="pack-price" if="{selected1.properties.Price && notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() + " " + selected1.properties.Price + selected1.properties.PriceLetter}</div> </div> <div class="package-details"> <div> <tag-raw class="tag-row" content="{selected1.properties.Description}"></tag-raw> </div> <div if="{selected1.properties.ProductMoreLink && selected1.properties.ProductMoreLink != \'\'}"><a href="{selected1.properties.ProductMoreLink}" class="btn btn-default btn-rounded anim-btn" riot-style="background-color: {selected1.properties.PackageColor}"><span class="anim-span"></span>{langTranslateApp.comparePkgFindOutMore}</a></div> </div> </div> </div> </div> <div class="col-sm-6"> <div if="{selected2 != undefined}"> <div class="package-block"> <div class="package-image img-bg" if="{selected2.properties.ProductImage != \'\'}" riot-style="background-image: url({selected2.properties.ProductImage})"> <div class="package-logo"><i class="icon-pack icon-{selected2.properties.Code}"></i> <!--<img riot-src="{selected2.properties.PackageLogo}">--> </div> </div> <div class="pricebar"> <div class="channels" if="{selected2}">{selected2.properties.ChannelCount} {langTranslateApp.pkgSliderChannels}</div> <div class="pack-price" if="{selected2.properties.Price && !app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() + " " + selected2.properties.Price + selected2.properties.PriceLetter}</div> <div class="pack-price" if="{selected2.properties.Price && app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() + " " + selected2.properties.localPrice.price + selected2.properties.PriceLetter}</div> <div class="pack-price" if="{selected2.properties.Price && notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() + " " + selected2.properties.Price + selected2.properties.PriceLetter}</div> </div> <div class="package-details "> <div class="content-comp"> <tag-raw content="{selected2.properties.Description}"> </div> </tag-raw> <div if="{selected2.properties.ProductMoreLink && selected2.properties.ProductMoreLink != \'\'}"><a href="{selected2.properties.ProductMoreLink}" class="btn btn-default btn-rounded anim-btn" riot-style="background-color: {selected2.properties.PackageColor}"><span class="anim-span"></span>{langTranslateApp.comparePkgFindOutMore}</a></div> </div> </div> </div> </div> </div> <div class="text-center compare-channels-heding"> {langTranslateApp.compareCh} </div> <div class="text-center"><a href="#main-scroll" class="next nextbounce animatedbounce" onclick="() => slideToElement(#compare-channels);" ><span class="fa fa-angle-down"></span></a></div> </div></section><section class="compare-channels mb-10" id="main-scroll" if="{(selected1 || selected2) }"> <div class="container"> <div class="row"> <div class="col-sm-12"> <div class="tableheadings"> <table class="table" if="{selected1 || selected2}"> <tr> <th colspan="2">{langTranslateApp.pkgSliderChannels}</th> <th class="has-channel" if="{selected1}"><span>{selected1.properties.PackageName.replace(\'DStv \',\'\')}</span></th> <th class="has-channel" if="{selected2}"><span>{selected2.properties.PackageName.replace(\'DStv \',\'\')}</span></th> </tr> <tr class="hide-all"> <td class="channel-logo"></td> <td class="channel-name"></td> <td class="has-channel" if="{selected1}"><span></span></td> <td class="has-channel" if="{selected2}"><span></span></td> </tr> </table> </div> <div class=""> <div class="accordion-area"> <div class="panel-group" id="channels-group"> <div class="panel panel-default" each="{genre, i in allchannelgenres.entities}"><a data-toggle="collapse" data-parent="#channels-group" href="#{genre.properties.UrlName}" class="panel-heading uppercase" aria-expanded="true" if={i==0}>{genre.properties.GenreName}</a> <a data-toggle="collapse" data-parent="#channels-group" href="#{genre.properties.UrlName}" class="panel-heading uppercase collapsed" aria-expanded="true" if={i!=0}>{genre.properties.GenreName}</a> <div id="{genre.properties.UrlName}" class="panel-collapse collapse {\'in\' : i == 0}" aria-expanded="true" style=""> <div class="panel-body"> <div class="content p-xs-0"> <table class="table channels-table" if="{channels && channels.entities }"> <tr each="{channel in channels.entities}" if="{_.indexOf(channel.properties.ChannelGenre, parseInt(genre.properties.Id)) > -1 && (_.indexOf(channel.properties.ChannelPackages, parseInt(selected1.properties.Id)) > -1 || _.indexOf(channel.properties.ChannelPackages, parseInt(selected2.properties.Id)) > -1)}"> <td class="channel-logo"><img riot-src="{channel.properties.ChannelLogo}"></td> <td class="channel-name">{channel.properties.ChannelName} ({channel.properties.ChannelNumber})</td> <td class="has-channel" if="{selected1}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(selected1.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td> <td class="has-channel" if="{selected2}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(selected2.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td> </tr> </table><table class="dth table channels-table" if="{app.allchannels.entities && dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)}"><tr each="{channel in app.allchannels.entities}" if="{_.indexOf(channel.properties.ChannelGenre, parseInt(genre.properties.Id)) > -1 && (_.indexOf(channel.properties.ChannelPackages, parseInt(dthselected1[0].properties.Id)) > -1 || _.indexOf(channel.properties.ChannelPackages, parseInt(dthselected2[0].properties.Id)) > -1)}"><td class="channel-logo"><img riot-src="{channel.properties.ChannelLogo}"></td><td class="channel-name">{channel.properties.ChannelName} ({channel.properties.ChannelNumber})</td><td class="has-channel" if="{dthselected1}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(dthselected1[0].properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td><td class="has-channel" if="{dthselected2}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(dthselected2[0].properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td></tr></table> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div></section><br>','tag-compare-packages,[riot-tag="tag-compare-packages"],[data-is="tag-compare-packages"]{ visibility: visible; }','',function(opts){var self=this;self.model={};self.storedData="comparepackages";self.dthPackages="dthcomparepackages";self.dualCurrencyPackages="dualCurrencyPackages";var arrayDualCurrencyContries=[];var arrayDualCurrencies=[];self.notDualCurrency=false;if(dstvApp.countryabbreviation=='mu')
self.notDualCurrency=true;self.on('before-mount',function(){console.log('Compare package started')
if(self.storedData&&app[self.storedData]!=undefined){console.log('Compare package - packages loaded alredy')
var data=app[self.storedData];self.model=data;self.filterAddOns();}
else{console.log('Compare package - package loading started')
site.trigger("setdata",window.culture+"/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo&cdv="+window.cdv,"GET","",self.storedData,self.storedData,1);}
if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(self.dthPackages&&app[self.dthPackages]!=undefined){console.log('DTH Compare package - packages loaded alredy')
var data=app[self.dthPackages];self.model=data;self.filterAddOns();}else{console.log('DTH Compare package - package loading started')
site.trigger("setdata","/en-dth/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo&cdv="+window.cdv,"GET","",self.dthPackages,self.dthPackages,1);}}else{}
if(app["allchannels"]!=undefined&&!window.reloadData){app.allchannels.entities.sort(function(a,b){return a.properties.ChannelNumber-b.properties.ChannelNumber});var availchannels=app.allchannels.entities.filter(item=>item.properties.ChannelPackages.length>-1);var unavailchannels=app.allchannels.entities.filter(item=>!item.properties.ChannelPackages.length);var allavailunavailchannels=availchannels.concat(unavailchannels);app.allchannels.entities=[];app.allchannels.entities=allavailunavailchannels;self.channels=app["allchannels"];}
else{if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(!dstvApp.EnableDthCountrySpeChannel)
site.trigger("setdata","/en-dth/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);else site.trigger("setdata",window.culture+"/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);}else{site.trigger("setdata",window.culture+"/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);}}
if(app["allchannelgenres"]!=undefined&&!window.reloadData){self.allchannelgenres=app["allchannelgenres"];}});self.on('mount',function(){setTimeout(function(){self.setSameHeight('.package-image')},200);if(dstvApp.DualCurrency=='on'&&dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)&&app.dualCurrencyApplicable!==undefined&&app.dualCurrencyApplicable==true&&dstvApp.countryabbreviation!=='mu'){var setToggleSwitch=function(){$('#toggleSwitch').addClass('jcf-label-active');$('.jcf-checkbox').removeClass('jcf-checked').addClass('jcf-unchecked');$('.switch-input').prop('checked',false);let currencyToggleStatus=$('.switch-input').prop('checked');site.factory.SetCurrency(currencyToggleStatus,dstvApp.countryabbreviation);self.update();};setTimeout(setToggleSwitch,50);}
else if(dstvApp.DualCurrency=='on'&&dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)&&app.dualCurrencyApplicable!==undefined&&app.dualCurrencyApplicable==false){var setToggleSwitch=function(){$('#toggleSwitch').removeClass('jcf-label-active');$('.jcf-checkbox').removeClass('jcf-unchecked').addClass('jcf-checked');$('.switch-input').prop('checked',true);let currencyToggleStatus=$('.switch-input').prop('checked');site.factory.SetCurrency(currencyToggleStatus,dstvApp.countryabbreviation);self.update();};setTimeout(setToggleSwitch,50);}else{console.log('Not Dual Currency');}
if(dstvApp.countryabbreviation!=='mu'){self.addDualPackagesToObject();}})
self.selectpackage=function(packageValue){if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(self.selected1==packageValue||self.selected2==packageValue){if(self.selected1==packageValue){self.dthselected1=self.dthselected2;self.selected1=self.selected2;app.dthselected1=app.dthselected2;self.dthselected2=undefined;self.selected2=undefined;app.dthselected2=undefined;}
else{self.dthselected2=undefined;self.selected2=undefined;app.dthselected2=undefined;}}
else{if(self.dthselected1==undefined){self.selected1=packageValue;self.dthselected1=app.comparepackages.entities.filter(item=>item.properties.Code==packageValue.properties.Code);app.dthselected1=self.dthselected1;}
else if(self.dthselected1!=undefined&&self.dthselected2==undefined){self.selected2=packageValue;self.dthselected2=app.comparepackages.entities.filter(item=>item.properties.Code==packageValue.properties.Code);app.dthselected2=self.dthselected2;}}}else{if(self.selected1==packageValue||self.selected2==packageValue){if(self.selected1==packageValue){self.selected1=self.selected2;self.selected2=undefined;}
else{self.selected2=undefined;}}
else{if(self.selected1==undefined){self.selected1=packageValue;}
else if(self.selected1!=undefined&&self.selected2==undefined){self.selected2=packageValue;}}}
self.message="";self.state="processing";self.update();if(self.selected1!=undefined&&self.selected2!=undefined){slideToElement('#comaparesection');$('.panel-group').on('shown.bs.collapse',function(){var panel=$(this).find('.in');var prevObjPos=panel.prevObject?panel.prevObject.offset().top:panel.offset().top
$('html, body').animate({scrollTop:panel.offset().top-150},500);});$('#channels-group').find('div[class="panel-collapse collapse in"]').prev('a').attr('class','panel-heading uppercase')}
$(".compare .package-block").click(function(){var src=$('.package-logo img').attr('src')!=undefined?$('.package-logo img').attr('src').split("/"):"";var imgname=src[3];var srcimg=$.trim(imgname);var img="logo_greatwallmdpi.svg";var img1=$.trim(img);var frech_tounch="layer-2.png";var frech_tounchimg=$.trim(frech_tounch);if(srcimg!=img1){$(".package-logo img").addClass("greatwall-icon");}else{$(".package-logo img").addClass("icon");}
if(srcimg==frech_tounchimg){$(".package-logo img").addClass("frechimg");}else{$(".package-logo img").addClass("icon");}});setTimeout(function(){self.setSameHeight('.package-details')},200);setTimeout(function(){self.setSameHeight('.package-logo')},200);self.ShowHideChannelCategories();}
self.ShowHideChannelCategories=function(){if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(self.dthselected1!=undefined&&self.dthselected2!=undefined){}}else{if(self.selected1!=undefined&&self.selected2!=undefined){$('.panel.panel-default').map((index,tbody)=>{if($(tbody).hasClass('hidden'))
$(tbody).removeClass('hidden')})
$('.panel.panel-default table tbody').map((index,tbody)=>{var tbody=$(tbody)
if(tbody.children().length==0){$(tbody.parents()[4]).addClass('hidden')}})}}}
if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){site.on(self.storedData+"-loading-success",function(data,result){if(result){self.model=data;self.update();setTimeout(function(){self.setSameHeight('.package-image')},200);}
else{window.consolelog("umbraco comparepackages data failed");}});site.on(self.dthPackages+"-loading-success",function(data,result){if(result){self.model=data;self.filterAddOns();self.update();setTimeout(function(){self.setSameHeight('.package-image')},200);}
else{window.consolelog("dth umbraco comparepackages data failed");}});}else{site.on(self.storedData+"-loading-success",function(data,result){if(result){self.model=data;self.filterAddOns();self.update();setTimeout(function(){self.setSameHeight('.package-image')},200);}
else{window.consolelog("umbraco comparepackages data failed");}});}
site.on(self.dualCurrencyPackages+"-loading-success",function(data,result){if(result){self.addDualPackagesToObject();self.update();setTimeout(function(){self.setSameHeight('.package-image')},200);}
else{window.consolelog("umbraco comparepackages data failed");}});site.on("allchannels-loading-success",function(data,result){if(result){self.channels=data;self.update();}else{console.log("failed to get channel data",data);}});site.on("allchannelgenres"+"-loading-success",function(data,result){if(result){self.allchannelgenres=data;self.update();}else{console.log("failed to get channel genres data",data);}});self.setSameHeight=function(item){var theseItems=$(item);var maxHeight=0;$(theseItems).css("height","auto");if($(window).width()>=768){theseItems.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight());});theseItems.css({height:maxHeight+'px'});}};self.getDsoPackagesData=function(){site.factory.GetJWT().then(function(token){self.token=token;let url=dstvApp.DSOAPIUrl+`/apipackageguide/api/v1/PackageGuide/GetPackagePriceDetails?BusinessUnit=${dstvApp.businessunit}&Channel=${dstvApp.channel}&Country=${dstvApp.country}`;site.factory.Get(url,self.token,self.onGetDsoPackagesSuccess,self.onGetDsoPackagesError);});}
self.onGetDsoPackagesSuccess=function(data){console.log('Account: Fetching packages data from DSO successful');if(data){self.model.entities.forEach(package=>{if(dstvApp.DthPackagesToHide.includes(package.prodUserKey)&&dstvApp.DthPackagesToHideCountries.includes(dstvApp.countryabbreviation)){return;}else{console.log('CODE '+package.properties.Code+' Price Before - package.properties.Code :'+package.properties.Price);if(dstvApp.DualCurrencyCountryList.filter(x=>window.culture.split('-')[1].includes(x)).length>0&&window.culture.split('-')[1]=="mu"){if(data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.amount;}else if(dstvApp.DualCurrencyCountryList.filter(x=>window.culture.split('-')[1].includes(x)).length>0&&window.culture.split('-')[1]=="et"){let currencyToggleStatus=$('.switch-input').prop('checked');if(currencyToggleStatus){package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;}else{let localEtbPrice=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.amount;let localEtbCurrency=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.currency;package.localPrice={'currency':localEtbCurrency,'price':localEtbPrice};}}else{if(data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;}
console.log('CODE '+package.properties.Code+' Price After - package.properties.Code : '+package.properties.Price);}});self.allPackagesData=self.model.entities;self.addOnList=self.allPackagesData.filter((entity)=>{return dstvApp.AddonPackages.includes(entity.properties.Code)});self.packagesList=self.model.entities.filter((entity)=>{return!dstvApp.AddonPackages.includes(entity.properties.Code)});if(dstvApp.countryabbreviation!=='mu'){self.addDualPackagesToObject();}
self.update();}
else{console.log('DsoPackages:No data in response while loading GetDsoPackages Api.');}}
self.onGetDsoPackagesError=function(err){console.log('DsoPackages: Error in Fetching packages data from DSO'+err);self.allPackagesData=self.model.entities;self.addOnList=self.allPackagesData.filter((entity)=>{return dstvApp.AddonPackages.includes(entity.properties.Code)});self.packagesList=self.model.entities.filter((entity)=>{return!dstvApp.AddonPackages.includes(entity.properties.Code)});if(dstvApp.countryabbreviation!=='mu'){self.addDualPackagesToObject();}
self.update();}
self.filterAddOns=function(){if(dstvApp.DsoPackagePricing){self.getDsoPackagesData();}else{self.allPackagesData=self.model.entities;self.addOnList=self.allPackagesData.filter((entity)=>{return dstvApp.AddonPackages.includes(entity.properties.Code)});self.packagesList=self.model.entities.filter((entity)=>{return!dstvApp.AddonPackages.includes(entity.properties.Code)});if(dstvApp.countryabbreviation!=='mu'){self.addDualPackagesToObject();}
self.update();}}
self.findDualCountryAndCurrencies=function(){for(var i=0;i<dstvApp.DualCurrenciesList.length;i++){var split=dstvApp.DualCurrenciesList[i].split("-");arrayDualCurrencyContries.push(split[0]);arrayDualCurrencies.push(split[1]);}}
self.onCurrencyToggle=function(e){self.findDualCountryAndCurrencies();let currencyToggleStatus=e.currentTarget.checked;if(currencyToggleStatus!==undefined){site.factory.SetCurrency(currencyToggleStatus,dstvApp.countryabbreviation);}
self.setDualCurrencyFlag();};self.setDualCurrencyFlag=function(){console.log('On setDualCurrencyFlag');self.findDualCountryAndCurrencies();if(arrayDualCurrencies.includes(dstvApp.countrycurrency.toLowerCase())){app.dualCurrencyApplicable=true;window.SessionSave("app",app);}
else{app.dualCurrencyApplicable=false;window.SessionSave("app",app);}}
self.addDualPackagesToObject=function(){if(dstvApp.DualCurrency=='on'&&dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)&&app["dualCurrencyPackages"]!=undefined){self.dualCurrencyPackages=app["dualCurrencyPackages"];if((self.packagesList&&self.packagesList!=='undefined')&&(self.dualCurrencyPackages&&self.dualCurrencyPackages!=='undefined')){for(var i=0;i<self.packagesList.length;i++)
{try{let packageCode=self.packagesList[i].properties.Code;let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));let dualCurrency=dualCurrencyArray[0].split('-')[1];let dualCurrencyPackagePrice=self.dualCurrencyPackages.entities.filter(a=>a.properties.PackageCode.toLowerCase()===packageCode.toLowerCase())[0].properties.Price;self.packagesList[i].properties.localPrice={'currency':dualCurrency,'price':dualCurrencyPackagePrice};}
catch(e){}}}
if((self.addOnList&&self.addOnList!=='undefined')&&(self.dualCurrencyPackages&&self.dualCurrencyPackages!=='undefined')){for(var i=0;i<self.addOnList.length;i++)
{try{let packageCode=self.addOnList[i].properties.Code;let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));let dualCurrency=dualCurrencyArray[0].split('-')[1];let dualCurrencyPackagePrice=self.dualCurrencyPackages.entities.filter(a=>a.properties.PackageCode.toLowerCase()===packageCode.toLowerCase())[0].properties.Price;self.addOnList[i].properties.localPrice={'currency':dualCurrency,'price':dualCurrencyPackagePrice};}
catch(e){}}}}}});riot.tag2('tag-addon-packages','<section class="pt-7 pb-4 compare-header"> <div class="container "> <yield></yield> <div if="{dstvApp.DualCurrency == \'on\' && dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation) && !notDualCurrency}" class="currencyToggle"><span class="currencyWord">Currency</span><label class="switch"><input onclick={onCurrencyToggle} class="switch-input" type="checkbox" checked /><span class="switch-label" data-on="USD" data-off="ETB"></span><span class="switch-handle"></span> </label></div> </div></section><section class="bg-dark compare-packs" style="padding-top:90px !important;" id="comaparesection" if="{selected1 || selected2}"> <div class="container"> <div class="row"> <div class="col-sm-6" if=""> <div if="{selected1 != undefined}"> <div class="package-block decoder-package-block"> <div class="package-image img-bg" if="{selected1.properties.ProductImage != \'\'}" riot-style="background-image: url({selected1.properties.ProductImage})"> <div class="package-logo"><img riot-src="{selected1.properties.PackageLogo}"></div> </div> <div class="pricebar" style="margin-top:-7px"> <div class="channels" if="{selected1}"> {selected1.properties.ChannelCount} {langTranslateApp.pkgSliderChannels} </div> <div class="pack-price" if="{selected1.properties.Price && !app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ selected1.properties.Price + selected1.properties.PriceLetter}</div> <div class="pack-price" if="{selected1.properties.Price && app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ selected1.properties.localPrice.price + selected1.properties.PriceLetter}</div> <!--Below node is for Mauritius - not to be treated as Dual currency--> <div class="pack-price" if="{selected1.properties.Price && app.dualCurrencyApplicable && notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ selected1.properties.Price + selected1.properties.PriceLetter}</div> </div> <div class="package-details"> <div> <tag-raw class="tag-row" content="{selected1.properties.Description}"></tag-raw> </div> <div if="{selected1.properties.ProductMoreLink && selected1.properties.ProductMoreLink != \'\'}"><a href="{selected1.properties.ProductMoreLink}" class="btn btn-default btn-rounded anim-btn" riot-style="background-color: {selected1.properties.PackageColor}"><span class="anim-span"></span>{langTranslateApp.comparePkgFindOutMore}</a></div> </div> </div> </div> </div> <div class="col-sm-6"> <div if="{selected2 != undefined}"> <div class="package-block decoder-package-block"> <div class="package-image img-bg" if="{selected2.properties.ProductImage != \'\'}" riot-style="background-image: url({selected2.properties.ProductImage})"> <div class="package-logo"><img riot-src="{selected2.properties.PackageLogo}"></div> </div> <div class="pricebar" style="margin-top:-7px"> <div class="channels" if="{selected2}"> {selected2.properties.ChannelCount} {langTranslateApp.pkgSliderChannels} </div> <div class="pack-price" if="{selected2.properties.Price && !app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ selected2.properties.Price + selected2.properties.PriceLetter}</div> <div class="pack-price" if="{selected2.properties.Price && app.dualCurrencyApplicable && !notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ selected2.properties.localPrice.price + selected2.properties.PriceLetter}</div> <!--Below node is for Mauritius - not to be treated as Dual currency--> <div class="pack-price" if="{selected2.properties.Price && app.dualCurrencyApplicable && notDualCurrency}">{dstvApp.countrycurrency.toUpperCase() +" "+ selected2.properties.Price + selected2.properties.PriceLetter}</div> </div> <div class="package-details "> <div class="content-comp"> <tag-raw content="{selected2.properties.Description}"> </div> </tag-raw> <div if="{selected2.properties.ProductMoreLink && selected2.properties.ProductMoreLink != \'\'}"><a href="{selected2.properties.ProductMoreLink}" class="btn btn-default btn-rounded anim-btn" riot-style="background-color: {selected2.properties.PackageColor}"><span class="anim-span"></span>{langTranslateApp.comparePkgFindOutMore}</a></div> </div> </div> </div> </div> </div> <div class="text-center compare-channels-heding">{langTranslateApp.compareCh}</div> </div></section><section class="compare-channels mb-10" if="{selected1 || selected2}"> <div class="container"> <div class="row"> <div class="col-sm-12"> <div class="tableheadings"> <table class="table" if="{selected1 || selected2}"> <tr> <th colspan="2">{langTranslateApp.pkgSliderChannels}</th> <th class="has-channel" if="{selected1}"><span>{selected1.properties.PackageName.replace(\'DStv \',\'\')}</span></th> <th class="has-channel" if="{selected2}"><span>{selected2.properties.PackageName.replace(\'DStv \',\'\')}</span></th> </tr> <tr class="hide-all"> <td class="channel-logo"></td> <td class="channel-name"></td> <td class="has-channel" if="{selected1}"><span></span></td> <td class="has-channel" if="{selected2}"><span></span></td> </tr> </table> </div> <div class=""> <div class="accordion-area"> <div class="panel-group" id="channels-group"> <div class="panel panel-default" each="{genre, i in allchannelgenres.entities}"> <a data-toggle="collapse" data-parent="#channels-group" href="#{genre.properties.UrlName}" class="panel-heading uppercase" aria-expanded="true">{genre.properties.GenreName}</a> <div id="{genre.properties.UrlName}" class="panel-collapse collapse {\'in\' : i == 0}" aria-expanded="false" style=""> <div class="panel-body"> <div class="content p-xs-0"> <table class="table channels-table" if="{channels && channels.entities}"> <tr each="{channel in channels.entities}" if="{_.indexOf(channel.properties.ChannelGenre, parseInt(genre.properties.Id)) > -1}"> <td class="channel-logo"><img riot-src="{channel.properties.ChannelLogo}"></td> <td class="channel-name">{channel.properties.ChannelNumber} - {channel.properties.ChannelName}</td> <td class="has-channel" if="{selected1}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(selected1.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td> <td class="has-channel" if="{selected2}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(selected2.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td> </tr> </table> <table class="dth table channels-table" if="{app.allchannels.entities && dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)}"><tr each="{channel in app.allchannels.entities}" if="{_.indexOf(channel.properties.ChannelGenre, parseInt(genre.properties.Id)) > -1 && (_.indexOf(channel.properties.ChannelPackages, parseInt(dthselected1.properties.Id)) > -1 || _.indexOf(channel.properties.ChannelPackages, parseInt(dthselected2.properties.Id)) > -1)}"><td class="channel-logo"><img riot-src="{channel.properties.ChannelLogo}"></td><td class="channel-name">{channel.properties.ChannelName} ({channel.properties.ChannelNumber})</td><td class="has-channel" if="{dthselected1}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(dthselected1.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td><td class="has-channel" if="{dthselected2}"><span class="{_.indexOf(channel.properties.ChannelPackages, parseInt(dthselected2.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td></tr></table></div> </div> </div> </div> </div> </div> </div> </div> </div> </div></section><br>','tag-compare-packages,[riot-tag="tag-compare-packages"],[data-is="tag-compare-packages"]{ visibility: visible; }','',function(opts){var self=this;self.model={};self.storedData="addonpackages";self.dthAddOnPackges="dthaddonpackages";self.AddonPackageCodes=["ASIA3KU","GWALLE36","FRN15E36","ASIAE36","FTAPLE","FRN7E36","FRN15E36","ASIANE36","NNJ2E36","PORTKU"];self.notDualCurrency=false;self.isDTH=false;if(dstvApp.countryabbreviation=='mu')
self.notDualCurrency=true;self.on('before-mount',function(){if(self.storedData&&app[self.storedData]!=undefined){site.trigger("showLoader")
var data=app[self.storedData];self.model=data;self.filterAddOns(self.isDTH);}
else{site.trigger("setdata","/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo"+window.cdv,"GET","",self.storedData,self.storedData,10);}
if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(self.dthAddOnPackges&&app[self.dthAddOnPackges]!=undefined){console.log('DTH Compare package - packages loaded alredy')
var data=app[self.dthAddOnPackges];self.model=data;self.isDTH=true;self.filterAddOns(self.isDTH);}else{console.log('DTH Compare package - package loading started')
site.trigger("setdata","/en-dth/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo&cdv="+window.cdv,"GET","",self.dthAddOnPackges,self.dthAddOnPackges,1);}}else{}
if(app["allchannels"]!=undefined){self.channels=app["allchannels"];}
else{if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(!dstvApp.EnableDthCountrySpeChannel)
site.trigger("setdata","/en-dth/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);else site.trigger("setdata",window.culture+"/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);}else{site.trigger("setdata",window.culture+"/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);}}
if(app["allchannelgenres"]!=undefined){self.allchannelgenres=app["allchannelgenres"];}
else{let originUrl=window.location.origin+"/channel-genres/ujson?descendants=ChannelGenre&select=Id,GenreName,UrlName&cdv="+window.cdv;site.trigger("setdata",originUrl,"GET","","allchannelgenres","allchannelgenres",3);}});self.on('mount',function(){let arrayDualCurrencyContries=[];let arrayDualCurrencies=[];for(var i=0;i<dstvApp.DualCurrenciesList.length;i++){var split=dstvApp.DualCurrenciesList[i].split("-");arrayDualCurrencyContries.push(split[0]);arrayDualCurrencies.push(split[1]);}
self.onCurrencyToggle=function(e){let currencyToggleStatus=e.currentTarget.checked;if(currencyToggleStatus!==undefined){site.factory.SetCurrency(currencyToggleStatus,dstvApp.countryabbreviation);}
self.setDualCurrencyFlag();};self.setDualCurrencyFlag=function(){console.log('On setDualCurrencyFlag : After Currency Toggle');if(arrayDualCurrencies.includes(dstvApp.countrycurrency.toLowerCase())){app.dualCurrencyApplicable=true;window.SessionSave("app",app);}
else{app.dualCurrencyApplicable=false;window.SessionSave("app",app);}}
self.setDualCurrencyFlag();if(dstvApp.DualCurrency=='on'&&dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)&&app["dualCurrencyPackages"]!=undefined&&!window.reloadData){self.dualCurrencyPackages=app["dualCurrencyPackages"];if((self.model&&self.model!=='undefined')&&(self.dualCurrencyPackages&&self.dualCurrencyPackages!=='undefined')){for(var i=0;i<self.model.entities.length;i++)
{try{let packageCode=self.model.entities[i].properties.Code;let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));let dualCurrency=dualCurrencyArray[0].split('-')[1];let dualCurrencyPackagePrice=self.dualCurrencyPackages.entities.filter(a=>a.properties.PackageCode.toLowerCase()===packageCode.toLowerCase())[0].properties.Price;self.model.entities[i].properties.localPrice={'currency':dualCurrency,'price':dualCurrencyPackagePrice};}
catch(e){}}}
if((self.addOnList&&self.addOnList!=='undefined')&&(self.dualCurrencyPackages&&self.dualCurrencyPackages!=='undefined')){for(var i=0;i<self.addOnList.length;i++)
{try{let packageCode=self.addOnList[i].properties.Code;let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));let dualCurrency=dualCurrencyArray[0].split('-')[1];let dualCurrencyPackagePrice=self.dualCurrencyPackages.entities.filter(a=>a.properties.PackageCode.toLowerCase()===packageCode.toLowerCase())[0].properties.Price;self.addOnList[i].properties.localPrice={'currency':dualCurrency,'price':dualCurrencyPackagePrice};}
catch(e){}}}}
self.update();})
self.getDsoPackagesData=function(){site.factory.GetJWT().then(function(token){self.token=token;let url=dstvApp.DSOAPIUrl+`/apipackageguide/api/v1/PackageGuide/GetPackagePriceDetails?BusinessUnit=${dstvApp.businessunit}&Channel=${dstvApp.channel}&Country=${dstvApp.country}`;site.factory.Get(url,self.token,self.onGetDsoPackagesSuccess,self.onGetDsoPackagesError);});}
self.onGetDsoPackagesSuccess=function(data){console.log('Account: Fetching packages data from DSO successful');if(data){self.model.entities.forEach(package=>{console.log('Price Before - package.properties.Code :'+package.properties.Price);if(data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;console.log('Price After - package.properties.Code : '+package.properties.Price);});self.model.entities=self.model.entities.filter((entity)=>{return dstvApp.AddonPackages.includes(entity.properties.Code)});console.log('entities:',self.model.entities);if(self.model.entities.length>0||self.model.entities.length==undefined)
{console.log('entities:',self.model.entities);if(isDth){self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];}else{self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];if(dstvApp.countryabbreviation=='ao'){self.selected1=self.model.entities[1];self.selected2=self.model.entities[2];}
self.dthselected1=self.model.entities[0];self.dthselected2=self.model.entities[1];app.dthselected1=self.model.entities[0];app.dthselected2=self.model.entities[1];}
self.message="";self.state="processing";self.update();site.trigger("hideLoader")
setTimeout(function(){$('.panel-group').on('shown.bs.collapse',function(){var panel=$(this).find('.in');$('html, body').animate({scrollTop:panel.offset().top-150},500);});},1000)}
else
{location.href=window.culture+langTranslateApp.subMenuGetComparePackagesLink;}}
else{console.log('DsoPackages:No data in response while loading GetDsoPackages Api.');}}
self.onGetDsoPackagesError=function(err){console.log('DsoPackages: Error in Fetching packages data from DSO'+err);self.model.entities=self.model.entities.filter((entity)=>{return dstvApp.AddonPackages.includes(entity.properties.Code)});console.log('entities:',self.model.entities);if(self.model.entities.length>0||self.model.entities.length==undefined)
{console.log('entities:',self.model.entities);if(isDth){self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];}else{self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];if(dstvApp.countryabbreviation=='ao'){self.selected1=self.model.entities[1];self.selected2=self.model.entities[2];}
self.dthselected1=self.model.entities[0];self.dthselected2=self.model.entities[1];app.dthselected1=self.model.entities[0];app.dthselected2=self.model.entities[1];}
self.message="";self.state="processing";self.update();site.trigger("hideLoader")
setTimeout(function(){$('.panel-group').on('shown.bs.collapse',function(){var panel=$(this).find('.in');$('html, body').animate({scrollTop:panel.offset().top-150},500);});},1000)}
else
{location.href=window.culture+langTranslateApp.subMenuGetComparePackagesLink;}}
self.filterAddOns=function(isDth){if(dstvApp.DsoPackagePricing){self.getDsoPackagesData();}else{self.model.entities=self.model.entities.filter((entity)=>{return dstvApp.AddonPackages.includes(entity.properties.Code)});console.log('entities:',self.model.entities);if(self.model.entities.length>0||self.model.entities.length==undefined)
{console.log('entities:',self.model.entities);if(isDth){self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];}else{self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];if(dstvApp.countryabbreviation=='ao'){self.selected1=self.model.entities[1];self.selected2=self.model.entities[2];}
self.dthselected1=self.model.entities[0];self.dthselected2=self.model.entities[1];app.dthselected1=self.model.entities[0];app.dthselected2=self.model.entities[1];}
self.message="";self.state="processing";self.update();site.trigger("hideLoader")
setTimeout(function(){$('.panel-group').on('shown.bs.collapse',function(){var panel=$(this).find('.in');$('html, body').animate({scrollTop:panel.offset().top-150},500);});},1000)}
else
{location.href=window.culture+langTranslateApp.subMenuGetComparePackagesLink;}}}
self.selectpackage=function(packageValue){if(self.selected1==packageValue||self.selected2==packageValue){if(self.selected1==packageValue){self.selected1=undefined;}
else{self.selected2=undefined;}}
else{if(self.selected1==undefined){self.selected1=packageValue;}
else if(self.selected1!=undefined&&self.selected2==undefined){self.selected2=packageValue;}}
self.message="";self.state="processing";self.update();if(self.selected1!=undefined&&self.selected2!=undefined){slideToElement('#comaparesection');$('#channels-group').find('div[class="panel-collapse collapse in"]').prev('a').attr('class','panel-heading uppercase');}
$(".compare .package-block").click(function(){var src=$('.package-logo img').attr('src').split("/");var imgname=src[3];var srcimg=$.trim(imgname);var img="logo_greatwallmdpi.svg";var img1=$.trim(img);if(srcimg!=img1){$(".package-logo img").addClass("greatwall-icon");}else{$(".package-logo img").addClass("icon");}});setTimeout(function(){self.setSameHeight('.package-details')},200);setTimeout(function(){self.setSameHeight('.package-logo')},200);}
site.on("addonpackages-loading-success",function(data,result){if(result){self.model=data;self.filterAddOns();}
else{window.consolelog("umbraco comparepackages data failed");}});site.on("addonpackages",function(data,result){if(result){self.model=data;self.filterAddOns();}else{console.log("failed to get data",data);}});site.on("allchannels"+"-loading-success",function(data,result){if(result){self.channels=data;self.update();}else{console.log("failed to get channel data",data);}});site.on("allchannelgenres"+"-loading-success",function(data,result){if(result){self.allchannelgenres=data;self.update();}else{console.log("failed to get channel genres data",data);}});self.setSameHeight=function(item){var theseItems=$(item);var maxHeight=0;$(theseItems).css("height","auto");if($(window).width()>=768){theseItems.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight());});theseItems.css({height:maxHeight+'px'});}};});riot.tag2('tag-decoders-list','<section class="pt-7 decoddr-compare compare-header"><div class="container "><yield></yield></div><p if="{!hideSelectionSection}" class="selectDecoderText container">{langTranslateApp.selectDecoderText1}<strong>{langTranslateApp.selectDecoderText2}</strong>{langTranslateApp.selectDecoderText3}</p></section><section class="pb-4 pt-0" if="{!hideSelectionSection}"><div class="container"><div class="row pb-2 change-package compare-packages"><div class="col-xs-12"><ul if="{model}" class="decoder-list packages"><li each="{package, index in model.entities}"><div class="compare"><div><div class="package-block" onclick="{() => selectdecoder(package);}"><div class="package-image img-bg" if="{package.properties.ProductImage != \'\'}" riot-style="background-image: url({package.properties.ProductImage})"></div><div class="package-image img-bg" if="{package == undefined || package.properties.ProductImage == \'\'}"></div><div class="package-name ">{package.properties.PackageName.replace(\'DStv \',\'\')}</div><div class="pricebar" style="margin-top:-7px"><div class="pack-price" if="{package.properties.Price}">{currency.toUpperCase() +" "+ package.properties.Price + package.properties.PriceLetter}</div></div> <span class="icon-Tick_large check-select {\'selected\' : selected1 == package || selected2 == package} "></span> </div></div></div></li></ul></div></div></div></section><section class="bg-dark compare-packs" style="padding-top:90px !important;" id="comaparesection" if="{selected1 || selected2}"><div class="container"><div class="row"><div class="col-sm-6" if=""><div if="{selected1 != undefined}"><div class="package-block decoder-package-block"><div class="package-image img-bg" if="{selected1.properties.ProductImage != \'\'}" riot-style="background-image: url({selected1.properties.ProductImage}); min-height: 300px!important;"><div class="package-logo" style="font-size: 24px;font-weight: 100;">{selected1.properties.Name}</div></div><div class="pricebar" style="margin-top:-32px" if="{selected1.properties.Price}"><div class="pack-price" if="{selected1.properties.Price}">{currency.toUpperCase() +" "+ selected1.properties.Price + selected1.properties.PriceLetter} ({langTranslateApp.onceOff})</div></div><div class="package-details"><div><tag-raw class="tag-row" content="{selected1.properties.Description}"></tag-raw></div><div if="{selected1.properties.ProductMoreLink && selected1.properties.ProductMoreLink != \'\'}"><a href="{selected1.properties.ProductMoreLink}" class="btn btn-default btn-rounded anim-btn" riot-style="background-color: {selected1.properties.PackageColor}"><span class="anim-span"></span>{langTranslateApp.comparePkgFindOutMore}</a></div></div></div></div></div><div class="col-sm-6"><div if="{selected2 != undefined}"><div class="package-block decoder-package-block"><div class="package-image img-bg" if="{selected2.properties.ProductImage != \'\'}" riot-style="background-image: url({selected2.properties.ProductImage}); min-height: 300px!important;"><div class="package-logo" style="font-size: 24px;font-weight: 100;">{selected2.properties.Name}</div></div><div class="pricebar" style="margin-top:-32px" if="{selected2.properties.Price}"><div class="pack-price" if="{selected2.properties.Price}">{currency.toUpperCase() +" "+ selected2.properties.Price + selected2.properties.PriceLetter} ({langTranslateApp.onceOff})</div></div><div class="package-details "><div class="content-comp"><tag-raw content="{selected2.properties.Description}"></div></tag-raw><div if="{selected2.properties.ProductMoreLink && selected2.properties.ProductMoreLink != \'\'}"><a href="{selected2.properties.ProductMoreLink}" class="btn btn-default btn-rounded anim-btn" riot-style="background-color: {selected2.properties.PackageColor}"><span class="anim-span"></span>{langTranslateApp.comparePkgFindOutMore}</a></div></div></div></div></div></div><div class="text-center compare-channels-heding">{langTranslateApp.pkgSliderFeature}</div></div></section><main id="main" roll="main" class="single-package-page"><div class="grid-section"><div><div class="row clearfix"><div class="col-md-12 column"><div style="background-position:50%;"><section class="mh-100 bg-white text-w-icons-section mh-60"><div class="container not-mobile" style="top: 0px;"><div><div class="row"><div class="col-sm-8 col-sm-push-2 col-xs-12 col-xs-push-0 text-center"><div class="row"><div><div class="bg-icon-holder"><div class="inline-block desc"> <strong> <h2>{langTranslateApp.decoderFeatureHardw}</h2> </strong> </div></div></div></div></div><div class="col-md-8 col-md-push-2 col-sm-10 col-sm-push-1 col-xs-12 col-xs-push-0 text-center"><div class="text-holder p-3 p-sm-2"><h4></h4> <p>{langTranslateApp.decoderFeatureDescr}</p><p>{langTranslateApp.hdSingleViewThe} <strong>{langTranslateApp.decoderExplora}</strong> {langTranslateApp.decoderExploraDescr}</p><p>{langTranslateApp.hdSingleViewThe} <strong>{langTranslateApp.hdSingleView}</strong> {langTranslateApp.hdSingleViewDesc}</p></div></div></div></div></div></section><section class="compare-channels mb-10" id="main-scroll" if="{selected1 || selected2}"><div class="container"><div class="row"><div class="col-sm-12"><div class="tableheadings"><table class="table" if="{selected1 || selected2}"><tr><th colspan="2">{langTranslateApp.decoderListHeaderFeatures}</th><th class="has-channel" if="{selected1}"><span>{selected1.properties.PackageName.replace(\'DStv \',\'\')}</span></th><th class="has-channel" if="{selected2}"><span>{selected2.properties.PackageName.replace(\'DStv \',\'\')}</span></th></tr><tr class="hide-all"><td class="channel-logo"></td><td class="channel-name"></td><td class="has-channel" if="{selected1}"><span></span></td><td class="has-channel" if="{selected2}"><span></span></td></tr></table></div><div class=""><div class="accordion-area"><div class="panel-group" id="channels-group"><div class="panel-body"><div class="content p-xs-0"><table class="table channels-table" if="{decoderfeatures && decoderfeatures.entities}"><tr each="{decoderfeature in decoderfeatures.entities}" if="_.indexOf(decoderfeature.properties.AssociatedDecoders, parseInt(selected1.properties.Id)) > -1}"><td class="channel-name">{decoderfeature.properties.FeatureName}</td><td class="has-channel" if="{selected1}"><span class="{_.indexOf(decoderfeature.properties.AssociatedDecoders, parseInt(selected1.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td><td class="has-channel" if="{selected2}"><span class="{_.indexOf(decoderfeature.properties.AssociatedDecoders, parseInt(selected2.properties.Id)) > -1 ? \'icon-Tick_large\' : \'icon-Close_large not\'} "></span></td></tr></table></div></div></div></div></div></div></div></div></section></div></div></div></div></div></main>','tag-compare-packages,[riot-tag="tag-compare-packages"],[data-is="tag-compare-packages"]{ visibility: visible; }','',function(opts){var self=this;self.model={};self.storedData="comparedecoders";self.storedFeaturesData="alldecoderfeatures";self.hideSelectionSection=false;self.on('before-mount',function(){if(app.comparedecoders!=undefined&&!window.reloadData){site.trigger("showLoader")
var data=app.comparedecoders;self.model=data;self.filterDecoders();}
else{site.trigger("setdata",window.culture+"/decoders/ujson?descendants=Decoder&select=code,decoderModelNumber,decoderName,productImage&resolvemedia=ProductImage&cdv="+window.cdv,"GET","",self.storedData,self.storedData,10);}
if(app.alldecoderfeatures!=undefined&&!window.reloadData){var availfeatures=app.alldecoderfeatures.entities.filter(item=>item.properties.AssociatedDecoders.length>-1);var unavailfeatures=app.alldecoderfeatures.entities.filter(item=>!item.properties.AssociatedDecoders.length);var allavailunavailfeatures=availfeatures.concat(unavailfeatures);app.alldecoderfeatures.entities=[];app.alldecoderfeatures.entities=allavailunavailfeatures;self.decoderfeatures=app["alldecoderfeatures"];}
else{site.trigger("setdata",window.culture+"/decoder-features-list/ujson?descendants=decoderFeatures&select=featureName,canCompare,featureCode,associatedDecoders&resolveToIds=associatedDecoders&cdv="+window.cdv,"GET","",self.storedFeaturesData,self.storedFeaturesData,3);}
self.currency=dstvApp.countrycurrency;if(dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)){let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));self.currency=dualCurrencyArray[0].split('-')[1];}});self.on('mount',function(){});self.filterDecoders=function(){self.model.entities=self.model.entities.filter(entity=>entity.properties.CanCompare);if(self.model.entities.length>0)
{self.message="";self.state="processing";self.update();site.trigger("hideLoader")
if(self.model.entities.length==2){self.selected1=self.model.entities[0];self.selected2=self.model.entities[1];self.hideSelectionSection=true;}
else if(self.model.entities.length==1){self.selected1=self.model.entities[0];self.hideSelectionSection=true;}}
else
{location.href="/decoders-list/";}}
self.selectdecoder=function(decoderValue){if(self.selected1==decoderValue||self.selected2==decoderValue){if(self.selected1==decoderValue){self.selected1=undefined;}
else{self.selected2=undefined;}}
else{if(self.selected1==undefined){self.selected1=decoderValue;}
else if(self.selected1!=undefined&&self.selected2==undefined){self.selected2=decoderValue;}}
self.message="";self.state="processing";self.update();if(self.selected1!=undefined&&self.selected2!=undefined){slideToElement('#comaparesection');}
setTimeout(function(){self.setSameHeight('.package-details')},200);setTimeout(function(){self.setSameHeight('.package-logo')},200);}
site.on("comparedecoders-loading-success",function(data,result){if(result){self.model=data;self.filterDecoders();self.update();}
else{window.consolelog("umbraco comparedecoders data failed");}});site.on("alldecoderfeatures-loading-success",function(data,result){if(result){var availfeatures=data.entities.filter(item=>item.properties.AssociatedDecoders.length>-1);var unavailfeatures=data.entities.filter(item=>!item.properties.AssociatedDecoders.length);var allavailunavailfeatures=availfeatures.concat(unavailfeatures);app.alldecoderfeatures.entities=[];app.alldecoderfeatures.entities=allavailunavailfeatures;self.decoderfeatures=app["alldecoderfeatures"];self.update();}
else{window.consolelog("umbraco alldecoderfeatures data failed");}});site.on("decoders",function(data,result){if(result){self.model=data;self.filterDecoders();}else{console.log("failed to get data",data);}});self.setSameHeight=function(item){var theseItems=$(item);var maxHeight=0;$(theseItems).css("height","auto");if($(window).width()>=768){theseItems.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight());});theseItems.css({height:maxHeight+'px'});}};});riot.tag2('tag-compare-slider','<section class="package-section {opts.sectionclass}"> <yield from="header"></yield> <div class="package-slider homepage-package-slider {dstvApp.countryabbreviation}-homepage-package-slider" if="{model}"> <div class="slide" each="{package, index in model.entities}"> <div class="scene"> <div class="card {\'is-selected\' : selected1 == package || selected2 == package}" packagename="{package.properties.Name}"> <div class="card-face front" riot-style="background-color:{package.properties.PackageColor}"> <div class="bg-holder" if="{package.properties.ProductImage != \'\'}" riot-style="background-image:url({apidomain + package.properties.ProductImage})"></div> <div class="bg-holder" if="{package == undefined || package.properties.ProductImage == \'\'}"></div> <div class="desc"> <div class="heading heading-white"><i class="icon-pack {package.properties.Code == \'GWALLE36\'?\'icon-GreatWall\' : \'icon-\' + package.properties.Code}"></i></div> <strong riot-style="color:{\'#ffffff\'}"><span class="channelNoStyle">{package.properties.ChannelCount} </span></strong><span class="channelWordStyle" riot-style="color:{\'#ffffff\'}">{langTranslateApp.pkgSliderChannels}</span> <div class="text"> <p style="color:#ffffff"> <tag-raw content="{package.properties.Description}" style="display:block"></tag-raw> </p> </div> </div> <div if="{!app.dualCurrencyApplicable}" class="packageCard-Footer" riot-style="background-image:url({apidomain + package.properties.ProductImage})"> <div class="lowholdFooter"><span class="currencyPkgFooter" >{dstvApp.countrycurrency.toUpperCase()}</span><span class="pricePkgFooter {package.properties.Code}" >{package.properties.Price}</span><span class="priceLetterPkgFooter"> { package.properties.PriceLetter}</span><span class="btn-view btn-view-white viewMoreBtnPkgFooter" >{langTranslateApp.pkgSliderViewMore}</span><button class="mobViewMoreBtnPkgFooter bg-gradient-45 arrow-font-color" tabindex="0"><span class="icon-ico-arrow-next"></span></button></div> </div> <div if="{app.dualCurrencyApplicable}" class="packageCard-Footer" riot-style="background-image:url({apidomain + package.properties.ProductImage})"> <div class="lowholdFooter"><span if="{!notDualCurrency}" class="currencyPkgFooter" >{package.properties.localPrice.currency.toUpperCase()}</span><span if="{!notDualCurrency}" class="pricePkgFooter" >{package.properties.localPrice.price}</span><span if="{notDualCurrency}" class="currencyPkgFooter" >{dstvApp.countrycurrency.toUpperCase()}</span><span if="{notDualCurrency}" class="pricePkgFooter" >{package.properties.Price}</span><span class="priceLetterPkgFooter"> { package.properties.PriceLetter}</span><span class="btn-view btn-view-white viewMoreBtnPkgFooter" >{langTranslateApp.pkgSliderViewMore}</span><button class="mobViewMoreBtnPkgFooter bg-gradient-45 arrow-font-color" tabindex="0"><span class="icon-ico-arrow-next"></span></button></div> </div> </div> <div class="card-face back" riot-style="background-color:{package.properties.PackageColor}"> <div class="bg-holder" riot-style="background-image:url({apidomain + package.properties.ProductImage}); opacity: 0.6"></div> <div class="bg-holder" if="{package == undefined || package.properties.ProductImage == \'\'}"></div> <div class="desc"> <div class="body-wrap" riot-style="color:{\'#ffffff\'}"> <span riot-style="color:{\'#ffffff\'}" class="back-title">{langTranslateApp.pkgSliderFeature}</span> <tag-raw-cardback content="{package.properties.PackageFeatures}"></tag-raw-cardback> </div> <div class="low-hold"><a href="{package.properties.ProductMoreLink}" class="btn-view track_compareslider btn-getitnow-white" riot-style="color:{\'#000000\'}">{langTranslateApp.pkgSliderGetItNow}</a></div> </div> </div> </div> </div> </div> </div> <yield from="footer"></yield></section>','tag-compare-slider,[riot-tag="tag-compare-slider"],[data-is="tag-compare-slider"]{ visibility: visible; }','',function(opts){var self=this;self.model={};self.dualcurrencymodel={};self.storedData="comparepackages";self.dthstoredData="dthcomparepackages";self.storedDualCurrencyData="dualCurrencyPackages";self.apidomain="";self.slidersrun=false;self.mixin("tracker");self.currency=opts.currency;self.sliderHeaderHtml='';self.notDualCurrency=false;self.currencyToggleStatus=$('.switch-input').prop('checked');if(dstvApp.countryabbreviation=='mu')
self.notDualCurrency=true;self.on('before-mount',function(){if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(!app[self.dthstoredData])
site.trigger("setdata",window.culture+opts.dthcomparepackages,"GET","",self.dthstoredData,self.dthstoredData,10);else{self.model=app[self.dthstoredData];self.doOperation();}}else{if(!app[self.storedData])
site.trigger("setdata",window.culture+opts.comparepackages,"GET","",self.storedData,self.storedData,10);else{self.model=app[self.storedData];self.doOperation();}}
if(!self.notDualCurrency){if(!app[self.storedDualCurrencyData]&&dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation))
site.trigger("setdata",window.culture+"/dual-currency-packages/ujson?descendants=dualCurrencyPackage&select=packageName,packageCode,Currency,price&cdv="+window.cdv,"GET","","dualCurrencyPackages","dualCurrencyPackages",3);else{self.dualcurrencymodel=app[self.storedDualCurrencyData];if(self.dualcurrencymodel)
self.modifyPackageSliderData();}}else{if(dstvApp.DsoPackagePricing){self.getDsoPackagesData();}}});self.on('mount',function(){setTimeout(function(){if(self.model.properties){self.runsliderJQ();}
self.setSameHeight('.package-image');},200);if(dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)&&!self.notDualCurrency){self.modifyPackageSliderData();}})
self.modifyPackageSliderData=function(){if(self.model.entities&&self.model.entities.length>0){for(var i=0;i<self.model.entities.length;i++)
{try{let packageCode=self.model.entities[i].properties.Code;let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));let dualCurrency=dualCurrencyArray[0].split('-')[1];let dualCurrencyPackagePrice=self.dualcurrencymodel.entities.filter(a=>a.properties.PackageCode.toLowerCase()===packageCode.toLowerCase())[0].properties.Price;self.model.entities[i].properties.localPrice={'currency':dualCurrency,'price':dualCurrencyPackagePrice};}
catch(e){console.log('Error on modifying Package model');}}
if(dstvApp.DsoPackagePricing){self.getDsoPackagesData();}}}
self.selectpackage=function(packageValue){if(self.selected1==packageValue||self.selected2==packageValue){if(self.selected1==packageValue){self.selected1=undefined;}
else{self.selected2=undefined;}}
else{if(self.selected1==undefined){self.selected1=packageValue;}
else if(self.selected1!=undefined&&self.selected2==undefined){self.selected2=packageValue;}}
self.message="";self.state="processing";self.update();setTimeout(function(){self.setSameHeight('.package-details')},200);setTimeout(function(){self.setSameHeight('.package-logo')},200);}
if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){site.on(self.dthstoredData+"-loading-success",function(data,result){if(result){self.model=data;self.doOperation();}
else{window.consolelog("umbraco home comparepackages data failed");}});}else{site.on(self.storedData+"-loading-success",function(data,result){if(result){self.model=data;self.doOperation();}
else{window.consolelog("umbraco home comparepackages data failed");}});}
self.getDsoPackagesData=function(){if(!app.dsoPackagesData){site.factory.GetJWT().then(function(token){self.token=token;let url=dstvApp.DSOAPIUrl+`/apipackageguide/api/v1/PackageGuide/GetPackagePriceDetails?BusinessUnit=${dstvApp.businessunit}&Channel=${dstvApp.channel}&Country=${dstvApp.country}`;site.factory.Get(url,self.token,self.onGetDsoPackagesSuccess,self.onGetDsoPackagesError);});}else{self.model.entities.forEach(package=>{console.log('CODE '+package.properties.Code+' Price Before - package.properties.Code :'+package.properties.Price);if(dstvApp.DualCurrencyCountryList.filter(x=>window.culture.split('-')[1].includes(x)).length>0&&window.culture.split('-')[1]=="mu"){if(app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.amount;}else if(dstvApp.DualCurrencyCountryList.filter(x=>window.culture.split('-')[1].includes(x)).length>0&&window.culture.split('-')[1]=="et"){let currencyToggleStatus=$('.switch-input').prop('checked');if(currencyToggleStatus){package.properties.Price=app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;}else{let localEtbPrice=app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.amount;let localEtbCurrency=app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.currency;package.localPrice={'currency':localEtbCurrency,'price':localEtbPrice};}}
else{if(app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=app.dsoPackagesData.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;}
console.log('CODE '+package.properties.Code+' Price After - package.properties.Code : '+package.properties.Price);});self.update();setTimeout(function(){if(self.model.properties){self.runsliderJQ();}
self.setSameHeight('.package-image');},200);}}
self.onGetDsoPackagesSuccess=function(data){console.log('Account: Fetching packages data from DSO successful');if(data){self.model.entities.forEach(package=>{console.log('CODE '+package.properties.Code+' Price Before - package.properties.Code :'+package.properties.Price);if(dstvApp.DualCurrencyCountryList.filter(x=>window.culture.split('-')[1].includes(x)).length>0&&window.culture.split('-')[1]=="mu"){if(data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.amount;}else if(dstvApp.DualCurrencyCountryList.filter(x=>window.culture.split('-')[1].includes(x)).length>0&&window.culture.split('-')[1]=="et"){let currencyToggleStatus=$('.switch-input').prop('checked');if(currencyToggleStatus){package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;}else{let localEtbPrice=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.amount;let localEtbCurrency=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].localPrice.currency;package.localPrice={'currency':localEtbCurrency,'price':localEtbPrice};}}
else{if(data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim()).length>0)
package.properties.Price=data.filter(x=>x.prodUserKey.toLowerCase()==package.properties.Code.toLowerCase().trim())[0].price.value;}
console.log('CODE '+package.properties.Code+' Price After - package.properties.Code : '+package.properties.Price);});self.update();self.runsliderJQ();}
else{console.log('DsoPackages:No data in response while loading GetDsoPackages Api.');}}
self.onGetDsoPackagesError=function(err){console.log('DsoPackages: Error in Fetching packages data from DSO'+err);}
self.doOperation=function(){self.update();setTimeout(function(){if(self.model.properties){if(dstvApp.DsoPackagePricing){self.getDsoPackagesData();}}},200);}
site.on("allchannels"+"-loading-success",function(data,result){if(result){self.channels=data;self.update();}else{console.log("failed to get channel data",data);}});self.setSameHeight=function(item){var theseItems=$(item);var maxHeight=0;$(theseItems).css("height","auto");if($(window).width()>=768){theseItems.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight());});theseItems.css({height:maxHeight+'px'});}};self.runsliderJQ=function(){var $slickSlider=jQuery(".homepage-package-slider");if(!self.slidersrun&&!($slickSlider.hasClass('slick-initialized'))){self.slidersrun=true;$slickSlider.slick({rows:1,slidesToScroll:1,slidesToShow:2,prevArrow:'<button class="slick-prev"><span class="icon-ico-arrow-next"></span></button>',nextArrow:'<button class="slick-next"><span class="icon-ico-arrow-next"></span></button>',infinite:false,variableWidth:true,responsive:[{breakpoint:1367,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:true,}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:false,}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:false,centerMode:true,}}]});}
$slickSlider.on('beforeChange',function(event,slick,currentSlide,nextSlide){var flippedSlides=slick.$slides.filter('.is-flipped');if(flippedSlides.length){flippedSlides.find('.is-flipped').removeClass('is-flipped')
flippedSlides.removeClass('is-flipped');}});initFlipClass();}});riot.tag2('tag-decoder-slider','<section class="package-section {opts.sectionclass}"> <yield from="header"></yield> <div class="package-slider homepage-decoder-slider {dstvApp.countryabbreviation}-homepage-decoder-slider " if="{model}"> <div class="slide" each="{package, index in model.entities}"> <div class="scene"> <div class="card {\'is-selected\' : selected1 == package || selected2 == package}" packagename="{package.properties.Name}"> <div class="card-face front" riot-style="background-color:{package.properties.PackageColor}"> <div class="bg-holder" if="{package.properties.ProductImage != \'\'}" riot-style="background-image:url(/cdn-cgi/image/width=434,quality=70{apidomain + package.properties.AdditionalProductImage})"></div> <div class="bg-holder" if="{package == undefined || package.properties.ProductImage == \'\'}"></div> <div class="desc"> <div class="heading heading-white">{package.properties.Name}</div> <strong riot-style="color:{\'#ffffff\'}"></strong> <div class="text"> <p style="color:#ffffff"> <tag-raw content="{package.properties.Description}" style="display:block"></tag-raw> </p> </div> </div> <div class="packageCard-Footer" riot-style="background-image:url({apidomain + package.properties.AdditionalProductImage})"> <div class="lowholdFooter"><span class="currencyPkgFooter" if="{package.properties.Price}" >{currency.toUpperCase()}</span><span class="pricePkgFooter" if="{package.properties.Price}">{package.properties.Price}</span><span class="priceLetterPkgFooter"> { package.properties.PriceLetter}</span><span class="btn-view btn-view-white viewMoreBtnPkgFooter">{langTranslateApp.pkgSliderViewMore}</span><button class="mobViewMoreBtnPkgFooter bg-gradient-45 arrow-font-color" tabindex="0"><span class="icon-ico-arrow-next"></span></button></div> </div> </div> <div class="card-face back" riot-style="background-color:{package.properties.PackageColor}"> <div class="bg-holder" riot-style="background-image:url({apidomain + package.properties.AdditionalProductImage}); opacity: 0.6"></div> <div class="bg-holder" if="{package == undefined || package.properties.ProductImage == \'\'}"></div> <div class="desc"> <div class="body-wrap" riot-style="color:{\'#ffffff\'}"> <span riot-style="color:{\'#ffffff\'}" class="back-title">{langTranslateApp.pkgSliderFeature}</span> <tag-raw-cardback content="{package.properties.PackageFeatures}"></tag-raw-cardback> </div> <div class="low-hold"><a href="{package.properties.ProductMoreLink}" class="btn-view track_compareslider btn-getitnow-white" riot-style="color:{\'#000000\'}">{langTranslateApp.pkgSliderGetItNow}</a></div> </div> </div> </div> </div> </div> </div> <yield from="footer"></yield></section>','tag-decoder-slider,[riot-tag="tag-decoder-slider"],[data-is="tag-decoder-slider"]{ visibility: visible; }','',function(opts){var self=this;self.model={};self.storedData="homecomparedecoders";self.apidomain="";self.slidersrun=false;self.mixin("tracker");self.currency=opts.currency;self.hideCurrency=!(window.culture==='/en-zw');self.on('before-mount',function(){site.trigger("setdata",window.culture+opts.comparedecoders,"GET","",self.storedData,self.storedData,10);});self.on('mount',function(){})
self.selectpackage=function(packageValue){if(self.selected1==packageValue||self.selected2==packageValue){if(self.selected1==packageValue){self.selected1=undefined;}
else{self.selected2=undefined;}}
else{if(self.selected1==undefined){self.selected1=packageValue;}
else if(self.selected1!=undefined&&self.selected2==undefined){self.selected2=packageValue;}}
self.message="";self.state="processing";self.update();setTimeout(function(){self.setSameHeight('.package-details')},200);setTimeout(function(){self.setSameHeight('.package-logo')},200);}
site.on(self.storedData+"-loading-success",function(data,result){if(result){self.model=data;self.update();setTimeout(function(){if(self.model.properties){self.runslider();}
initFlipClass();self.setSameHeight('.package-image');},200);}
else{window.consolelog("umbraco home comparepackages data failed");}});site.on("allchannels"+"-loading-success",function(data,result){if(result){self.channels=data;self.update();}else{console.log("failed to get channel data",data);}});self.setSameHeight=function(item){var theseItems=$(item);var maxHeight=0;$(theseItems).css("height","auto");if($(window).width()>=768){theseItems.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight());});theseItems.css({height:maxHeight+'px'});}};self.runslider=function(){var $slickSlider=jQuery('.homepage-decoder-slider');self.slidersrun=true;$slickSlider.not('.slick-initialized').slick({rows:1,slidesToScroll:1,slidesToShow:2,prevArrow:'<button class="slick-prev"><span class="icon-ico-arrow-next"></span></button>',nextArrow:'<button class="slick-next"><span class="icon-ico-arrow-next"></span></button>',infinite:false,variableWidth:true,responsive:[{breakpoint:1367,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:true,}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:1,variableWidth:false,}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:false,centerMode:true,}}]});$slickSlider.on('beforeChange',function(event,slick,currentSlide,nextSlide){var flippedSlides=slick.$slides.filter('.is-flipped');if(flippedSlides.length){flippedSlides.find('.is-flipped').removeClass('is-flipped')
flippedSlides.removeClass('is-flipped');}});initFlipClass();}
self.currency=dstvApp.countrycurrency;if(dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)){let dualCurrencyArray=dstvApp.DualCurrenciesList.filter(item=>item.includes(dstvApp.countryabbreviation));self.currency=dualCurrencyArray[0].split('-')[1];}});riot.tag2('tag-getdata','<yield></yield>','','',function(opts){var self=this;this.mixin('promise');self.mixin('tracker');self.on("mount",function(){$('input[name="serialNumber"]').attr("maxlength","10");var errormessage='';var message='';var validationflag=false;if(dstvApp.MultiLanguageCountryList.includes(dstvApp.countryabbreviation)&&!app.loggedin){$('#langDropdown').show();}
if(dstvApp.MultiLanguageCountryList.includes(dstvApp.countryabbreviation)&&!app.loggedin){$('#langDropdownMobile').show();}
if(app.loggedin&&window.reloadData){site.trigger("logout");window.location.reload();return 0;}
if(app.loggedin){if(window.location.pathname==window.culture||window.location.pathname==window.culture+"/")
$('#dashBoardHomeNav').css('display','none')}
if(app.loggedin){$('.fix-error-menu').css({'display':'block'});}
var newWindowWidth=$(window).width();if(newWindowWidth<678){let waitingInterval=setInterval(function(){console.log('waiting for appflayer...'+new Date().getTime())
if($('#af-smart-banner')[0]){clearInterval(waitingInterval)
$('#header').css('top','70px');$('#af-smart-banner').css('position','fixed');$('.afb-close-accessibility-overlay').click(function(){$('#header').css('top','0px');})}},200);setTimeout(function(){clearInterval(waitingInterval);},5000)}
$('#loginLinkLabel').click(function(e){e.preventDefault();e.stopImmediatePropagation()
site.factory.ShowSignIn();return;});$('#payment-trans-his').click(function(e){e.preventDefault();riot.mount('tag-transactionhistory-modal-popup',{showmodal:true})});self.date=new Date();self.todaysdate=self.date.getFullYear()+"-"+(self.date.getMonth()+1)+"-"+self.date.getDate()+"-"+self.date.getHours()+"-"+self.date.getMinutes()+"-"+self.date.getSeconds();if(app.dictionary==undefined){}
if(app.umbracopackages==undefined){site.trigger("setdata",window.culture+"/packages/ujson?descendants=Package&select=code,description,Name,newPrice,packageColor,packageLogo,packageName,price,Id,productImage,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage&cdv="+window.cdv,"GET","","umbracopackages","umbracopackages",3);}
if(app.comparepackages==undefined||window.reloadData){if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){site.trigger("setdata","/en-dth/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,packageFeatures,canCompare&resolvemedia=productImage,packageLogo&cdv="+self.todaysdate,"GET","","comparepackages","comparepackages",3);site.trigger("setdata",window.culture+"/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,packageFeatures,canCompare&resolvemedia=productImage,packageLogo&cdv="+self.todaysdate,"GET","","dthcomparepackages","dthcomparepackages",3);}else{site.trigger("setdata",window.culture+"/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,packageFeatures,canCompare&resolvemedia=productImage,packageLogo&cdv="+self.todaysdate,"GET","","comparepackages","comparepackages",3);}}
if(app.comparedecoders==undefined||window.reloadData){site.trigger("setdata",window.culture+"/decoders/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,canCompare,priceLetter&resolvemedia=productImage,packageLogo&cdv="+self.todaysdate,"GET","","comparedecoders","comparedecoders",3);}
if(app.alldecoderfeatures==undefined||window.reloadData){site.trigger("setdata",window.culture+"/decoder-features-list/ujson?descendants=decoderFeatures&select=featureName,canCompare,featureCode,associatedDecoders&resolveToIds=associatedDecoders&cdv="+self.todaysdate,"GET","","alldecoderfeatures","alldecoderfeatures",3);}
if(app.addonpackages==undefined||window.reloadData){if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){site.trigger("setdata","/en-dth/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo&cdv="+self.todaysdate,"GET","","addonpackages","addonpackages",3);site.trigger("setdata",window.culture+"/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo&cdv="+self.todaysdate,"GET","","dthaddonpackages","dthaddonpackages",3);}else{site.trigger("setdata",window.culture+"/packages/ujson?descendants=Package&where=canCompare%20eq%20true&select=code,description,Name,newPrice,packageColor,Id,packageLogo,productMoreLink,packageName,price,productImage,productDetail,description,currency,channelCount,PriceLetter,canCompare&resolvemedia=productImage,packageLogo&cdv="+window.cdv,"GET","","addonpackages","addonpackages",3);}}
if(app.allchannels==undefined||window.reloadData){if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){if(!dstvApp.EnableDthCountrySpeChannel)
site.trigger("setdata","/en-dth/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);else site.trigger("setdata",window.culture+"/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);}else{site.trigger("setdata",window.culture+"/channels/ujson?descendants=Channel&select=channelName,ChannelGenre,ChannelPackages,ChannelLogo,AudioChannel,ChannelNumber,IsDraft&resolveToIds=ChannelGenre,ChannelPackages&resolveMedia=ChannelLogo&cdv="+window.cdv,"GET","","allchannels","allchannels",3);}}
if(app.allchannelgenres==undefined||window.reloadData||app.allchannelgenres.entities==undefined){let channelNode='channel-genres';switch(dstvApp.countryabbreviation){case'ng':channelNode='channel-genre-ng';break;case'bw':channelNode='channel-genre-bw';break;case'gh':channelNode='channel-genre-gh';break;case'mw':channelNode='channel-genre-mw';break;case'ke':channelNode='channel-genre-ke';break;case'sz':channelNode='channel-genre-sz';break;case'mu':channelNode='channel-genre-mu';break;case'cd':channelNode='channel-genre-cd';break;case'tz':channelNode='channel-genre-tz';break;case'na':channelNode='channel-genre-na';break;case'et':channelNode='channel-genre-et';break;case'ug':channelNode='channel-genre-ug';break;case'zw':channelNode='channel-genre-zw';break;case'zm':channelNode='channel-genre-zm';break;case'dth':channelNode='channel-genre-dth';break;case'mz':channelNode=dstvApp.languageAbbreviation=='pt'?'channel-genre-mz-pt':'channel-genre-mz-en';break;case'ao':channelNode=dstvApp.languageAbbreviation=='pt'?'channel-genre-ao-pt':'channel-genre-ao-en';break;default:channelNode=dstvApp.languageAbbreviation=='pt'?'channel-genre-pt':'channel-genres';}
let originUrl=window.location.origin+"/"+channelNode+"/ujson?descendants=ChannelGenre&select=Id,GenreName,UrlName&cdv="+window.cdv;if(dstvApp.liveDTHCountries.includes(dstvApp.countryabbreviation)){let dthUrl=window.location.origin+"/channel-genre-dth/ujson?descendants=ChannelGenre&select=Id,GenreName,UrlName&cdv="+window.cdv;site.trigger("setdata",dthUrl,"GET","","allchannelgenres","allchannelgenres",3);}else{site.trigger("setdata",originUrl,"GET","","allchannelgenres","allchannelgenres",3);}}
if(app.loggedin&&(app.smartcards==undefined||app.smartcards.length==0)){site.trigger('loadcustomerdata');}
if((app.dualCurrencyPackages==undefined||window.reloadData)&dstvApp.DualCurrency.toLowerCase()==='on'&dstvApp.DualCurrencyCountryList.includes(dstvApp.countryabbreviation)){site.trigger("setdata",window.culture+"/dual-currency-packages/ujson?descendants=dualCurrencyPackage&select=packageName,packageCode,Currency,price&cdv="+self.todaysdate,"GET","","dualCurrencyPackages","dualCurrencyPackages",3);}
if(app.premiumContent==undefined||window.reloadData){site.trigger("setdata","/api-services/hundred-percent-content-en/ujson?select=Text,Image,button1Text,button1Link,button1Class,button2Text,button2Link,button2Class&resolvemedia=image&cdv="+self.todaysdate,"GET","","premiumContent","premiumContent",3);}
if(app.premiumContentPT==undefined||window.reloadData){site.trigger("setdata","/api-services/hundred-percent-content-en/ujson?select=Text,Image,button1Text,button1Link,button1Class,button2Text,button2Link,button2Class&resolvemedia=image&resolvemedia=image&cdv="+self.todaysdate,"GET","","premiumContentPT","premiumContentPT",3);}});self.on("mount",function(){var country=dstvApp.country;$("input.contactus-submit").unbind("click").bind('click',function(){$(this).unbind('click');var contactUsDto={FirstName:$("input.contactus-name").val(),Surname:$("input.contactus-surname").val(),CellPhoneNumber:$("input.contactus-contactno").val(),Email:$("input.contactus-email").val(),Smartcardnumber:$("input.contactus-smartcardno").val(),Natureofenquiry:$("#NatureOfEnquiry.contactus-dropdown").val(),Comment:$("#Message.contactus-mesage").val(),QueryType:'Contact Us',AppRoute:window.location.href,Country:country}
site.trigger('showLoader',{messageHeader:"Loading",messageBody:""});var loc=window.location;var baseUrl=loc.protocol+"//"+loc.hostname+(loc.port?":"+loc.port:"");var url=baseUrl+"/umbraco/Api/LeadsForm/SaveContactUsFormData";site.trigger("sendFeedback",url,"POST",contactUsDto,self.SaveContactUsSuccess,self.SaveContactUsError);});self.SaveContactUsSuccess=function(data){site.trigger('hideLoader');}
self.SaveContactUsError=function(data){site.trigger('hideLoader');}
$("input.businessform-submit").click(function(){var businessLeadsDto={FirstName:$("#Name.businessform-name").val(),Surname:$("#Surname.businessform-surname").val(),CellPhoneNumber:$("#ContactNumber.businessform-contactno").val(),Email:$("#Email.businessform-email").val(),SmartcardNumber:$("#SmartCardNumber.businessform-smartcard").val(),NatureOfEnquiry:$("#NatureofEnquiry.businessform-dropdown").val(),Comment:$("#Message.businessform-message").val(),RequestType:$("#RequestType.businessform-customerdropdown").val(),BusinessName:$("input.businessform-businessname").val(),QueryType:'DStv Business',AppRoute:window.location.href,Country:country}
site.trigger('showLoader',{messageHeader:"Loading",messageBody:""});var loc=window.location;var baseUrl=loc.protocol+"//"+loc.hostname+(loc.port?":"+loc.port:"");var url=baseUrl+"/umbraco/Api/LeadsForm/SaveBusinessLeadsFormData";site.trigger("sendFeedback",url,"POST",businessLeadsDto,self.SaveBusinessLeadsSuccess,self.SaveBusinessLeadsError);});self.SaveBusinessLeadsSuccess=function(data){site.trigger('hideLoader');}
self.SaveBusinessLeadsError=function(data){site.trigger('hideLoader');}
$("input.decoder-submit").click(function(e){var url=$(location).attr('href');var parts=url.split("/");var querytype="";if(parts[3]===window.culture.split('/')[1]){querytype=parts[4]}else{querytype=parts[3]}
var decoderLeadsDto={FirstName:$(".package-popup-overlay input#Name.decoder-name").val(),Email:$(".package-popup-overlay input#Email.decoder-email").val()||'noemail@available.com',CellphoneNumber:$(".package-popup-overlay  input#ContactNumber.decoder-contactno").val(),Surname:'NA',RequestType:$(".package-popup-overlay #RequestType.decoder-request").val(),SmartcardNumber:$(".package-popup-overlay input#SmartCardNumber.decoder-smartcard").val(),Comment:$(".package-popup-overlay #Message.decoder-message").val()||'NA',NatureOfEnquiry:$(".package-popup-overlay #NatureofEnquiry.decoder-enquiry").val(),QueryType:querytype,AppRoute:window.location.href,Country:country}
site.trigger('showLoader',{messageHeader:"Loading",messageBody:""});var loc=window.location;var baseUrl=loc.protocol+"//"+loc.hostname+(loc.port?":"+loc.port:"");var url=baseUrl+"/umbraco/Api/LeadsForm/SavePackageDecoderLeadsFormData";site.trigger("sendFeedback",url,"POST",decoderLeadsDto,self.SavePackageDecoderSuccess,self.SavePackageDecoderError);});self.SavePackageDecoderSuccess=function(data){console.log('SavePackageDecoderSuccess'+data);site.trigger('hideLoader');}
self.SavePackageDecoderError=function(data){console.log('SavePackageDecoderError'+data);site.trigger('hideLoader');}
$('#langSelector').change(function(){let selectedLang=$(this).val();window.location.href=`/${selectedLang}-${dstvApp.countryabbreviation}`;})
$('#langSelectorMobile').change(function(){let selectedLang=$(this).val();window.location.href=`/${selectedLang}-${dstvApp.countryabbreviation}`;})});site.on("setdata",function(url,type,data,store,trigger,retries){self.promise.all(self.promise.setdata(url,type,data,store,trigger,retries)).one('complete',function(a){});});});riot.tag2('tag-premium-content','<section class="premium-full-section"><div class="container"><div class="row"><div class="col-md-6 prmText"></div><div class="col-md-6 text-center"> <img id="premImg" src="" alt="100% Premium Banner"></div></div></div> </section>','tag-premium-content,[riot-tag="tag-premium-content"],[data-is="tag-premium-content"]{ visibility: visible; }','',function(opts){var self=this;self.model={};self.storedData="premiumContent";self.storedDataPT="premiumContentPT";self.on('before-mount',function(){if(window.culture.includes("pt-"))
self.model=app.premiumContentPT;else
self.model=app.premiumContent;});self.on('mount',function(){setTimeout(function(){if(app.premiumContent!=undefined||app.premiumContentPT!=undefined){if(window.culture.includes("pt-")){$('.prmText').append(app.premiumContentPT.properties.Text);}else{$('.prmText').append(app.premiumContent.properties.Text);}
$('.prmText').append('<div class="inline-block p-1"><a target="_blank" href="'+dstvApp.ProdSelfServiceUrl+window.culture+app.premiumContent.properties.Button1Link+'" class="'+app.premiumContent.properties.Button1Class+' hundred-percent-content-btn1"> '+app.premiumContent.properties.Button1Text+'  </a></div>');$('.prmText').append('<div class="inline-block p-1"><a target="_blank" href="'+app.premiumContent.properties.Button2Link+dstvApp.country+'" class="'+app.premiumContent.properties.Button2Class+' hundred-percent-content-btn2"> '+app.premiumContent.properties.Button2Text+' </a></div>');$("#premImg").attr('src',app.premiumContent.properties.Image);}},1500);});$(".hundred-percent-content-btn1").click(function(){}