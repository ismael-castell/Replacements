webpackJsonp([19],{Ujlm:function(t,s){},gboq:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("mvHQ"),a=e.n(i),n=e("Dd8w"),o=e.n(n),l=e("lRwf"),c=e.n(l),r=e("v3j6"),d=e.n(r),m=e("pQyi"),u=e("REHN"),p=e.n(u),g=e("YaGw"),v=e.n(g),h=e("eNAO"),f=e.n(h),_={name:"Header",data:function(){return{msgDetail:[],tid:-1,mtid:"",curName:"",isJm:!1,msgStep:1,msgTotal:0,msgContentList:[],jmMsgDetail:[],tag1:!1,tag2:!1,tag3:!1,tag4:!1,isshow:!1}},props:{type:Number},created:function(){this.getuser(),null!==this.$utils.getCookie(this.$glb.fmCookieName)&&this.getMsgData2()},methods:{getuser:function(){var t=this;null!==this.$utils.getCookie(this.$glb.fmCookieName)&&this.$api.post("/center/getuser",{},function(s){s.status&&(t.tag1=s.data.isvip&&("1011"===s.data.vip_id||"1004"===s.data.vip_id),t.tag2=s.data.isprovip,t.tag3=s.data.isvip,t.tag4=s.data.isyouthvip,t.$store.commit("setAttr",{name:"isLogin",val:!0}),t.$store.commit("setAttr",{name:"logo",val:s.data.logo}),t.$store.commit("setAttr",{name:"uid",val:s.data.userid}),t.$store.commit("setAttr",{name:"token",val:s.data.token}),""!==s.data.nickname?sessionStorage.setItem("nickname",s.data.nickname):sessionStorage.setItem("nickname","订阅号"),t.$store.commit("setAttr",{name:"downvol",val:parseInt(s.data.downvol)}),t.$store.commit("setAttr",{name:"point",val:parseInt(s.data.point)}),t.$store.commit("setAttr",{name:"ifcertify",val:1===parseInt(s.data.ifcertify)}),t.$store.commit("setAttr",{name:"vipTitle",val:s.data.vip_title}),t.$store.commit("setAttr",{name:"proTitle",val:s.data.private_vip_title}),t.$store.commit("setAttr",{name:"vipid",val:s.data.vip_id}),t.$store.commit("setAttr",{name:"vipEndTime",val:s.data.vip_end_time}),t.$store.commit("setAttr",{name:"proEndTime",val:s.data.private_vip_end_time}),t.$store.commit("setAttr",{name:"youthEndTime",val:s.data.activity_vip_end_time}),t.$store.commit("setAttr",{name:"isyouthvip",val:s.data.isyouthvip}),t.$store.commit("setAttr",{name:"isprovip",val:s.data.isprovip}),t.$store.commit("setAttr",{name:"isvip",val:s.data.isvip}),t.$store.commit("setAttr",{name:"downNum",val:parseInt(s.data.today_surplus_down_count)}),t.$store.commit("setAttr",{name:"first_svip",val:1===parseInt(s.data.first_svip)}),t.$store.commit("setAttr",{name:"onlineNum",val:parseInt(s.data.online_number)}),t.$store.commit("setAttr",{name:"ifrateflow",val:1===parseInt(s.data.ifrateflow)}),t.$store.commit("setAttr",{name:"user_open_subscribe",val:1===parseInt(s.data.user_open_subscribe)}),t.$store.commit("setAttr",{name:"user_isup",val:1===parseInt(s.data.user_isup)}),t.$store.commit("setAttr",{name:"phone",val:s.data.phone}),t.$store.commit("setAttr",{name:"username",val:s.data.username}))})},goScPage:function(t){this.$emit("goScPage",t)},goBack:function(){this.msgStep=3===this.msgStep?2:1,this.curName="订阅号"},followChange:function(t){var s=this;this.$api.post("/jx/modirlt",{uid:t.suid,act:0===parseInt(t.fstatus)?1:2},function(e){if(e.status){s.$notify.success({title:"提示",message:e.msg});for(var i=s.msgContentList,a=0,n=i.length;a<n;a++)i[a].id===t.id&&(i[a].fstatus=parseInt(e.data.fstatus)),c.a.set(s.msgContentList,a,i[a])}else s.$notify.warning({title:"提示",message:e.msg})})},getMsgData:function(){var t=this;this.$api.post("/center/newmsgbase",{},function(s){s.status?(t.msgTotal=parseInt(s.data.total),t.msgDetail=[{icon:t.$utils.getPng("msg_type1"),obj:s.data.fm,name:"飞猫盘",id:0},{icon:t.$utils.getPng("msg_type2"),obj:s.data.jm,name:"橘猫星球",id:4},{icon:t.$utils.getPng("msg_type3"),obj:s.data.tgy,name:"橘猫众包",id:1},{icon:t.$utils.getPng("msg_type3"),obj:s.data.tgy,name:"橘猫众包a",id:2}]):t.$notify.warning({title:"提示",message:s.msg})})},getMsgData2:function(){var t=this;this.$api.post("/center/msgBaseV2",{},function(s){if(s.status){t.msgTotal=parseInt(s.data.total);var e=s.data.list.map(function(t){return{icon:t.icon,obj:{msg:t.msg,time:t.time,num:t.num},num:t.num,name:t.title,id:"飞猫盘"==t.title?0:"橘猫众包"==t.title?1:"订阅号"==t.title?4:2}});t.msgDetail=JSON.parse(a()(e))}})},getMsgs:function(){var t=this;this.$api.post("/center/newmsgs",{tid:this.tid,mtid:this.mtid},function(s){if(s.status){var e=s.data.msgs;t.msgContentList=JSON.parse(a()(e)),t.getJm2(),t.getMsgData2()}else t.$notify.warning({title:"提示",message:s.msg})})},signOut:function(){var t=this;this.$api.post("/user/loginout",{},function(s){t.$notify.success({title:"提示",message:s.msg}),t.$utils.clearCookie(t.$glb.fmCookieName),window.location.reload(),sessionStorage.removeItem("isscan")})},openLogin:function(){this.$emit("openLogin")},openRegister:function(){this.$emit("openRegister")},goMsgList:function(t){this.curName=t.name,this.msgStep=2,this.tid=t.id,this.isshow=!0,4===t.id?(this.isJm=!0,this.getJm2()):(this.isJm=!1,this.getMsgs())},goJmList:function(t){this.curName=t.name,this.msgStep=3,this.tid=t.id,this.mtid=t.mtid,this.isshow=!1,this.getMsgs()},getJm:function(){var t=this;this.$api.post("/center/jumaobase",{},function(s){s.status?t.jmMsgDetail=[{icon:t.$utils.getPng("icon_mess_comment"),obj:s.data.comm,name:"评论",id:4,mtid:"20"},{icon:t.$utils.getPng("icon_mess_like"),obj:s.data.like,name:"点赞",id:4,mtid:"19"},{icon:t.$utils.getPng("icon_mess_fans"),obj:s.data.fans,name:"粉丝",id:3,mtid:""},{icon:t.$utils.getPng("icon_mess_system"),obj:s.data.jm,name:"系统通知",id:2,mtid:""}]:t.$notify.warning({title:"提示",message:s.msg})})},getJm2:function(){var t=this;this.$api.post("/center/jumaoBaseV2",{},function(s){if(s.status){var e=s.data.list.map(function(t){return{icon:t.icon,obj:{msg:t.msg,time:t.time,num:t.num,is_official:t.is_official},num:t.num,name:t.title,id:"系统通知"==t.title?2:"粉丝"==t.title?3:4,mtid:"视频评论"==t.title?"20":"点赞"==t.title?"19":"文章评论"==t.title?"31":""}});t.jmMsgDetail=JSON.parse(a()(e))}else t.$notify.warning({title:"提示",message:s.msg})})},clearMsg:function(){var t=this;this.$api.post("/center/readmsg",{},function(s){t.$notify.success({title:"提示",message:s.msg}),window.location.reload()})}}},w={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.$store.state.isLogin?e("div",{staticClass:"loginBox"},[e("div",{staticClass:"loginMenu userInstructBox"},[e("img",{staticClass:"icon",attrs:{src:t.$utils.getPng2022("comm_icon_warn")}}),t._v(" "),e("span",{staticClass:"nameTips"},[t._v("用户须知")]),t._v(" "),e("div",{staticClass:"hoverInstruct"},[e("div",{staticClass:"instructCon"},[e("img",{staticClass:"icon",attrs:{src:t.$utils.getPng2022("comm_icon_warn")}}),t._v(" "),t._m(0)])])]),t._v(" "),e("div",{staticClass:"loginMenu messageBox"},[e("img",{staticClass:"icon",attrs:{src:t.$utils.getPng2022("comm_icon_mess")}}),t._v(" "),t.msgTotal>0?e("el-badge",{staticClass:"msgdot",attrs:{"is-dot":""}}):t._e(),t._v(" "),1===t.msgStep?e("div",{staticClass:"hoverMsgMenu"},[e("div",{staticClass:"msgHeader"},[e("span",{staticClass:"title"},[t._v("通知")]),t._v(" "),e("span",{staticClass:"clear",on:{click:t.clearMsg}},[t._v("清空")])]),t._v(" "),e("hr"),t._v(" "),e("ul",{staticClass:"hoverMsgList"},t._l(t.msgDetail,function(s,i){return e("li",{key:s.id,staticClass:"msgItem msgItembox",on:{click:function(e){return t.goMsgList(s,i)}}},[e("img",{staticClass:"icon iconhh",attrs:{src:s.icon}}),t._v(" "),e("div",{staticClass:"msgCon"},[e("div",{staticClass:"left"},[e("span",{staticClass:"name"},[t._v("\n                "+t._s(s.name)+"\n                "),e("font",{staticClass:"tag"},[t._v("官方")])],1),t._v(" "),e("span",{staticClass:"msgDesc"},[t._v(t._s(s.obj.msg))])]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"time"},[t._v(t._s(s.obj.time))]),t._v(" "),parseInt(s.num)>0?e("el-badge",{staticClass:"dot",attrs:{value:s.num,max:99}}):t._e()],1)])])}),0)]):e("div",{staticClass:"hoverMsgMenu height2"},[e("div",{staticClass:"msgConHeader"},[e("i",{staticClass:"el-icon-arrow-left back",on:{click:function(s){return t.goBack()}}}),t._v(" "),e("span",{staticClass:"title"},[t._v("\n          "+t._s(t.curName)+"\n        ")])]),t._v(" "),e("hr"),t._v(" "),2===t.msgStep&t.isJm?e("ul",{staticClass:"hoverMsgList"},t._l(t.jmMsgDetail,function(s,i){return e("li",{key:i,staticClass:"msgItem",on:{click:function(e){return t.goJmList(s)}}},[e("img",{staticClass:"jmicon",attrs:{src:s.icon}}),t._v(" "),e("div",{staticClass:"msgCon"},[e("div",{staticClass:"left"},[e("span",{staticClass:"name"},[t._v("\n                "+t._s(s.name)+"\n                "),"1"==s.obj.is_official?e("font",{staticClass:"tag"},[t._v("官方")]):t._e()],1),t._v(" "),e("span",{staticClass:"msgDesc"},[t._v(t._s(s.obj.msg))])]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"time"},[t._v(t._s(s.obj.time))]),t._v(" "),parseInt(s.obj.num)>0?e("el-badge",{staticClass:"dot",attrs:{value:s.obj.num,max:99}}):t._e()],1)])])}),0):e("div",{staticClass:"listBox"},[4===t.tid&"20"===t.mtid||4===t.tid&"31"===t.mtid?e("ul",{staticClass:"commentList"},[t._l(t.msgContentList,function(s){return e("li",{key:s.id,staticClass:"itemBox"},[e("img",{staticClass:"icon",attrs:{src:s.logo}}),t._v(" "),e("div",{staticClass:"crightBox"},[e("div",{staticClass:"nameAct"},[e("span",{staticClass:"name"},[t._v(t._s(s.sname))]),e("span",{staticClass:"act"},[t._v("评论了你")])]),t._v(" "),e("span",{staticClass:"comment"},[t._v(t._s(s.comment))]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(s.in_time))])])])}),t._v(" "),0===t.msgContentList.length?e("div",{staticClass:"noDataImgBox"},[e("img",{staticClass:"noDataImg",attrs:{src:t.$utils.getPng2022("app_ydq")}}),t._v(" "),e("span",{staticClass:"desc"},[t._v("您的消息列表为空")])]):t._e()],2):4===t.tid&"19"===t.mtid?e("ul",{staticClass:"commentList"},[t._l(t.msgContentList,function(s){return e("li",{key:s.id,staticClass:"itemBox"},[e("img",{staticClass:"icon",attrs:{src:s.logo}}),t._v(" "),e("div",{staticClass:"lrightBox"},[e("span",{staticClass:"name"},[t._v(t._s(s.sname))]),t._v(" "),e("span",{staticClass:"comment"},[t._v(t._s(s.title))]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(s.in_time))])])])}),t._v(" "),0===t.msgContentList.length?e("div",{staticClass:"noDataImgBox"},[e("img",{staticClass:"noDataImg",attrs:{src:t.$utils.getPng2022("app_ydq")}}),t._v(" "),e("span",{staticClass:"desc"},[t._v("您的消息列表为空")])]):t._e()],2):3===t.tid?e("ul",{staticClass:"fansList"},[t._l(t.msgContentList,function(s){return e("li",{key:s.id,staticClass:"itemBox"},[e("div",{staticClass:"content"},[e("div",{staticClass:"leftBox"},[e("img",{staticClass:"icon",attrs:{src:s.logo}}),t._v(" "),e("div",{staticClass:"infoBox"},[e("span",{staticClass:"name"},[t._v(t._s(s.sname))]),t._v(" "),e("span",{staticClass:"comment"},[t._v(t._s(s.title))])])]),t._v(" "),e("div",{staticClass:"followAct",class:{actedBtn:0===parseInt(s.fstatus),actBtn:0!==parseInt(s.fstatus)},on:{click:function(e){return t.followChange(s)}}},[t._v("\n                "+t._s(1===parseInt(s.fstatus)?"已订阅":2===parseInt(s.fstatus)?"已订阅":"+订阅")+"\n              ")])]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(s.in_time))])])}),t._v(" "),0===t.msgContentList.length?e("div",{staticClass:"noDataImgBox"},[e("img",{staticClass:"noDataImg",attrs:{src:t.$utils.getPng2022("app_ydq")}}),t._v(" "),e("span",{staticClass:"desc"},[t._v("您的消息列表为空")])]):t._e()],2):e("ul",{staticClass:"contentList"},[t._l(t.msgContentList,function(s){return e("li",{key:s.id,staticClass:"conItem"},[t.isshow?t._e():e("div",{staticClass:"headImg"},[e("img",{staticClass:"imgAvater",attrs:{src:s.logo,alt:""}}),t._v(" "),e("div",{staticClass:"headtit"},[t._v(t._s(s.sname))])]),t._v(" "),e("div",{staticClass:"header"},["0"!==s.status?e("img",{staticClass:"typeIcon",attrs:{src:"1"===s.status?t.$utils.getPng("msg_ok"):t.$utils.getPng("msg_no")}}):t._e(),t._v("\n              "+t._s(s.title)+"\n            ")]),t._v(" "),t._l(s.child,function(s,i){return e("div",{key:i,staticClass:"keyVal"},[e("span",{staticClass:"key"},[t._v(t._s(s.name))]),t._v(" "),e("span",{staticClass:"val",style:{color:"#"+s.color}},[t._v(t._s(s.value))])])})],2)}),t._v(" "),0===t.msgContentList.length?e("div",{staticClass:"noDataImgBox"},[e("img",{staticClass:"noDataImg",attrs:{src:t.$utils.getPng2022("app_ydq")}}),t._v(" "),e("span",{staticClass:"desc"},[t._v("您的消息列表为空")])]):t._e()],2)])])],1),t._v(" "),e("div",{staticClass:"loginMenu userBox"},[e("img",{staticClass:"userAvatar",attrs:{src:t.$store.state.logo?t.$store.state.logo:t.$utils.getPng("basehead")},on:{click:function(s){return t.$utils.link("/ph/"+t.$store.state.uid)}}}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.$store.state.username))]),t._v(" "),t.tag1?e("img",{staticClass:"vipIcon",attrs:{src:t.$utils.getPng2022("vip_logo_tag1")}}):t._e(),t._v(" "),t.tag2?e("img",{staticClass:"vipIcon",attrs:{src:t.$utils.getPng2022("avatar_logo_tag3")}}):t._e(),t._v(" "),(t.tag1||t.tag2)&&t.tag1||!t.tag3?t._e():e("img",{staticClass:"vipIcon",attrs:{src:t.$utils.getPng2022("avatar_logo_tag2")}}),t._v(" "),(t.tag1||t.tag2||t.tag3)&&(t.tag1||t.tag3)&&(t.tag2||t.tag3)&&t.tag2||!t.tag4?t._e():e("img",{staticClass:"vipIcon",attrs:{src:t.$utils.getPng2022("avatar_logo_tag4")}}),t._v(" "),e("img",{staticClass:"downIcon",attrs:{src:t.$utils.getPng("login_down")}}),t._v(" "),e("div",{staticClass:"hoverMenu"},[e("div",{staticClass:"content"},[e("span",{staticClass:"item",on:{click:function(s){return t.goScPage(1)}}},[e("img",{staticClass:"icon1",attrs:{src:t.$utils.getPng2022("comm_icon_list1")}}),t._v("我的订阅\n        ")]),t._v(" "),e("span",{staticClass:"item",on:{click:function(s){return t.goScPage(0)}}},[e("img",{staticClass:"icon2",attrs:{src:t.$utils.getPng2022("comm_icon_list2")}}),t._v("收藏\n        ")]),t._v(" "),e("span",{staticClass:"item",on:{click:function(s){return t.$utils.link("/account")}}},[e("img",{staticClass:"icon3",attrs:{src:t.$utils.getPng2022("comm_icon_list3")}}),t._v("设置\n        ")]),t._v(" "),e("span",{staticClass:"item",on:{click:function(s){return t.$utils.link("/help")}}},[e("img",{staticClass:"icon4",attrs:{src:t.$utils.getPng2022("comm_icon_list4")}}),t._v("帮助中心\n        ")]),t._v(" "),e("span",{staticClass:"item",on:{click:function(s){return t.signOut()}}},[e("img",{staticClass:"icon5",attrs:{src:t.$utils.getPng2022("comm_icon_list5")}}),t._v("退出\n        ")])])])])]):e("div",{staticClass:"unLoginBox",class:{fm:0===t.type,jm:1===t.type}},[e("span",{staticClass:"login btn",on:{click:function(s){return t.openLogin()}}},[t._v("登录")]),t._v(" "),e("span",{staticClass:"register btn",on:{click:function(s){return t.openRegister()}}},[t._v("注册")])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tipsCon"},[this._v("\n          飞猫盘仅提供网络空间租赁服务，不参与内容贩卖、二次加工及推荐服务，依据国家相关法律\n          及地方法规：我们将进行身份信息采集并在不侵犯用户隐私权的同时进行必要的机器审核。如您登记信息并上传文件即视为您已认可此要求。严禁上传、分享非法内容以及所有形式的音频\n          和视频内容。\n          "),s("a",{attrs:{target:"__blank",href:"https://help.feimaoyun.com/archives/733"}},[this._v("《对于违规账号的处置方式》")]),this._v(" "),s("a",{staticClass:"wb-row3",attrs:{target:"_blank",href:"https://help.feimaoyun.com/archives/1159"}},[this._v("《飞猫盘文件审核机制公示》")])])}]};var C=e("VU/8")(_,w,!1,function(t){e("Ujlm")},"data-v-0908c418",null).exports,y=e("P3cA"),$=e("0qYF"),k={name:"WxModel",data:function(){return{}},props:{showWXbox:Boolean},methods:{closeModel:function(){this.$emit("closeModel")}}},b={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showWXbox,expression:"showWXbox"}],staticClass:"actionModel"},[e("div",{staticClass:"wxCode"},[e("span",{staticClass:"el-icon-close clsBtn",on:{click:function(s){return t.closeModel()}}}),t._v(" "),e("div",{attrs:{id:"wxCode"}})])])},staticRenderFns:[]},F=e("VU/8")(k,b,!1,null,null,null).exports,T={name:"LoginModel",data:function(){return{pcode:"+86",phone:"",vcode:"",username:"",pwd:"",ifauto:!0,selectType:"username"}},props:{isLoginFlag:Boolean,loginType:Number,cty:Array,waitTime:String,getCodeFlag:Boolean},methods:{setVcode:function(){this.$emit("setVcode",this.vcode)},setPhone:function(){this.$emit("setPhone",this.phone)},setPcode:function(){this.$emit("setPcode",this.pcode)},setNameVal:function(){this.$emit("setNameVal",this.username)},setPwdVal:function(){this.$emit("setPwdVal",this.pwd)},setIfauto:function(){this.ifauto=!this.ifauto,this.$emit("setIfauto",this.ifauto)},setSelectType:function(){this.$emit("setSelectType",this.selectType)},fastLogin:function(t){this.$emit("fastLogin",t)},verifyfun:function(t){this.$emit("verifyfun",t)},closeModel:function(){this.$emit("closeModel")},loginTab:function(t){this.username="",this.pwd="",this.ifauto=!0,this.$emit("loginTab",t)},goFindPwd:function(){this.isLoginFlag=!1,this.$emit("goFindPwd")},goRegister:function(){this.isLoginFlag=!1,this.$emit("goRegister")}}},P={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoginFlag,expression:"isLoginFlag"}],staticClass:"globalLoginBox"},[e("div",{staticClass:"globalLogin"},[e("img",{staticClass:"close",attrs:{src:t.$utils.getPng("login_close")},on:{click:function(s){return t.closeModel()}}}),t._v(" "),e("div",{staticClass:"loginContent"},[e("div",{staticClass:"logoNav"},[e("img",{staticClass:"logo",attrs:{src:t.$utils.getPng2022("2022_fm_logo1")}}),t._v(" "),e("span",{staticClass:"title"},[t._v("登录")])]),t._v(" "),e("div",{staticClass:"loginType"},[e("span",{staticClass:"type type1",class:{on:1===t.loginType},on:{click:function(s){return t.loginTab(1)}}},[t._v("密码登录")]),t._v(" "),e("span",{staticClass:"type type2",class:{on:2===t.loginType},on:{click:function(s){return t.loginTab(2)}}},[t._v("APP扫码登录")]),t._v(" "),e("span",{staticClass:"type type3",class:{on:3===t.loginType},on:{click:function(s){return t.loginTab(3)}}},[t._v("短信登录")])]),t._v(" "),2!==t.loginType?e("div",{staticClass:"userForm"},[1===t.loginType?e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-input",{staticClass:"loginInput la",attrs:{placeholder:"username"===t.selectType?"请输入飞猫盘账号":"email"===t.selectType?"请输入邮箱":"请输入手机号",autocomplete:"off"},on:{input:t.setNameVal},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}},[e("el-select",{staticStyle:{width:"95px"},attrs:{slot:"prepend","popper-class":"loginsel"},on:{change:t.setSelectType},slot:"prepend",model:{value:t.selectType,callback:function(s){t.selectType=s},expression:"selectType"}},[e("el-option",{staticClass:"loginselval",attrs:{label:"账号",value:"username"}}),t._v(" "),e("el-option",{staticClass:"loginselval",attrs:{label:"手机号",value:"phone"}}),t._v(" "),e("el-option",{staticClass:"loginselval",attrs:{label:"邮箱",value:"email"}})],1)],1),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{type:"text",focus:"this.type='password'",clearable:"",placeholder:"请输入密码","show-password":"",autocomplete:"off"},on:{input:t.setPwdVal},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.verifyfun("login")}},model:{value:t.pwd,callback:function(s){t.pwd=s},expression:"pwd"}})],1):e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-input",{staticClass:"loginInput la",attrs:{placeholder:"请输入手机号",autocomplete:"off"},on:{input:t.setPhone},model:{value:t.phone,callback:function(s){t.phone=s},expression:"phone"}},[e("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend","popper-class":"loginsel"},on:{change:t.setPcode},slot:"prepend",model:{value:t.pcode,callback:function(s){t.pcode=s},expression:"pcode"}},t._l(t.cty,function(s){return e("el-option",{key:s.id,staticClass:"loginselval",attrs:{label:s.id,value:s.id}},[t._v(t._s(s.name))])}),1)],1),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{autocomplete:"off",placeholder:"请输入验证码"},on:{input:t.setVcode},model:{value:t.vcode,callback:function(s){t.vcode=s},expression:"vcode"}},[e("template",{slot:"suffix"},[e("div",{staticClass:"pcodeSlot"},[e("span",{staticClass:"line"}),t._v(" "),t.getCodeFlag?e("span",{staticClass:"getCode",on:{click:function(s){return t.verifyfun("sendLoginCode")}}},[t._v("获取验证码")]):e("span",{staticClass:"waitBtn"},[t._v("已发送("+t._s(t.waitTime)+")")])])])],2)],1),t._v(" "),e("div",{staticClass:"loginBtn",on:{click:function(s){return t.verifyfun("login")}}},[t._v("立即登录")]),t._v(" "),e("div",{staticClass:"loginTool"},[e("div",{staticClass:"toolLeft",on:{click:t.setIfauto}},[e("img",{staticClass:"icon",attrs:{src:t.$utils.getPng2022(t.ifauto?"fm_select_1":"fm_select_2")}}),t._v("\n            记住密码\n          ")]),t._v(" "),e("div",{staticClass:"toolRight"},[e("span",{on:{click:function(s){return t.goFindPwd()}}},[t._v("找回密码")]),t._v(" "),e("span",{staticClass:"line"}),t._v(" "),e("span",{on:{click:function(s){return t.goRegister()}}},[t._v("立即注册")])])])],1):e("div",{staticClass:"codeBox"},[e("div",{attrs:{id:"fmstscan"}}),t._v(" "),e("div",{staticClass:"descBox"},[e("img",{staticClass:"applogo",attrs:{src:t.$utils.getPng2022("login_scan_logo")}}),t._v("\n          请打开飞猫盘APP-扫一扫\n        ")])]),t._v(" "),e("div",{staticClass:"quickLogon"},[t._m(0),t._v(" "),e("div",{staticClass:"quickLogonType"},[e("img",{staticClass:"quickLogonIcon",attrs:{src:t.$utils.getPng("login_qqIcon")},on:{click:function(s){return t.fastLogin("qq")}}}),t._v(" "),e("img",{staticClass:"quickLogonIcon",attrs:{src:t.$utils.getPng("login_wxIcon")},on:{click:function(s){return t.fastLogin("wx")}}})])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"separateBox"},[s("span",{staticClass:"line"}),this._v(" "),s("span",{staticClass:"title"},[this._v("第三方账号登录")]),this._v(" "),s("span",{staticClass:"line"})])}]},I=e("VU/8")(T,P,!1,null,null,null).exports,x={name:"FindPwdModel",data:function(){return{confirmPwd:"",pwd:"",vcode:"",email:"",pcode:"+86",phone:""}},props:{cty:Array,findType:Number,isFindPwdFlag:Boolean,waitTime:String,getCodeFlag:Boolean},methods:{setConfirmPwd:function(){this.$emit("setConfirmPwd",this.confirmPwd)},setPwdVal:function(){this.$emit("setPwdVal",this.pwd)},setVcode:function(){this.$emit("setVcode",this.vcode)},setEmail:function(){this.$emit("setEmail",this.email)},setPhone:function(){this.$emit("setPhone",this.phone)},setPcode:function(){this.$emit("setPcode",this.pcode)},verifyfun:function(t){this.$emit("verifyfun",t)},closeModel:function(){this.$emit("closeModel")},modelTabChange:function(t){this.pwd="",this.confirmPwd="",this.vcode="",this.pcode="+86",this.email="",this.$emit("modelTabChange","findPwd",t)},findPwd:function(){this.$emit("findPwd")}}},D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isFindPwdFlag,expression:"isFindPwdFlag"}],staticClass:"globalLoginBox"},[e("div",{staticClass:"globalLogin"},[e("img",{staticClass:"close",attrs:{src:t.$utils.getPng("login_close")},on:{click:function(s){return t.closeModel()}}}),t._v(" "),e("div",{staticClass:"loginContent"},[e("div",{staticClass:"logoNav"},[e("img",{staticClass:"logo",attrs:{src:t.$utils.getPng2022("2022_fm_logo1")}}),t._v(" "),e("span",{staticClass:"title"},[t._v("找回密码")])]),t._v(" "),e("div",{staticClass:"loginType"},[e("span",{staticClass:"type type1",class:{on:1===t.findType},on:{click:function(s){return t.modelTabChange(1)}}},[t._v("手机找回")]),t._v(" "),e("span",{staticClass:"line"}),t._v(" "),e("span",{staticClass:"type type3",class:{on:2===t.findType},on:{click:function(s){return t.modelTabChange(2)}}},[t._v("邮箱找回")])]),t._v(" "),e("div",{staticClass:"userForm"},[e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[1===t.findType?e("el-input",{staticClass:"loginInput la",attrs:{autocomplete:"off",placeholder:"请输入手机号"},on:{input:t.setPhone},model:{value:t.phone,callback:function(s){t.phone=s},expression:"phone"}},[e("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},on:{change:t.setPcode},slot:"prepend",model:{value:t.pcode,callback:function(s){t.pcode=s},expression:"pcode"}},t._l(t.cty,function(s){return e("el-option",{key:s.id,attrs:{"popper-class":"loginsel",label:s.id,value:s.id}},[t._v(t._s(s.name))])}),1)],1):e("el-input",{staticClass:"loginInput",attrs:{autocomplete:"off",placeholder:"请输入邮箱"},on:{input:t.setEmail},model:{value:t.email,callback:function(s){t.email=s},expression:"email"}}),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{autocomplete:"off",placeholder:"请输入验证码"},on:{input:t.setVcode},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.verifyfun("sendCode")}},model:{value:t.vcode,callback:function(s){t.vcode=s},expression:"vcode"}},[e("template",{slot:"suffix"},[e("div",{staticClass:"pcodeSlot"},[e("span",{staticClass:"line"}),t._v(" "),t.getCodeFlag?e("span",{staticClass:"getCode",on:{click:function(s){return t.verifyfun("sendCode")}}},[t._v("获取验证码")]):e("span",{staticClass:"waitBtn"},[t._v("已发送("+t._s(t.waitTime)+")")])])])],2),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{type:"text",id:"password1",focus:"this.type='password'",autocomplete:"off",placeholder:"请输入密码","show-password":""},on:{input:t.setPwdVal},model:{value:t.pwd,callback:function(s){t.pwd=s},expression:"pwd"}}),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{type:"text",id:"password2",focus:"this.type='password'",autocomplete:"off",placeholder:"请再次输入密码","show-password":""},on:{input:t.setConfirmPwd},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.findPwd()}},model:{value:t.confirmPwd,callback:function(s){t.confirmPwd=s},expression:"confirmPwd"}})],1),t._v(" "),e("div",{staticClass:"loginBtn",on:{click:function(s){return t.findPwd()}}},[t._v("确认修改")])],1)])])])},staticRenderFns:[]},S=e("VU/8")(x,D,!1,null,null,null).exports,A={name:"RegisterModel",data:function(){return{checked:!0,confirmPwd:"",username:"",pwd:"",vcode:"",email:"",pcode:"+86",phone:"",invitecode:"",stepNum:1}},props:{msgid:Number,loginLoad:Boolean,cty:Array,registerType:Number,isRegisterFlag:Boolean,waitTime:String,getCodeFlag:Boolean},methods:{setiCode:function(){this.$emit("setiCode",this.invitecode)},setNameVal:function(){this.$emit("setNameVal",this.username)},setChecked:function(){this.checked=!this.checked,this.$emit("setChecked",this.checked)},setConfirmPwd:function(){this.$emit("setConfirmPwd",this.confirmPwd)},setPwdVal:function(){this.$emit("setPwdVal",this.pwd)},setVcode:function(){this.$emit("setVcode",this.vcode)},setEmail:function(){this.$emit("setEmail",this.email)},setPhone:function(){this.$emit("setPhone",this.phone)},setPcode:function(){this.$emit("setPcode",this.pcode)},verifyfun:function(t){this.$emit("verifyfun",t)},closeModel:function(){this.$emit("closeModel")},goNext:function(){var t=this;if((""===this.email||""===this.vcode)&1===this.registerType)this.$notify.warning({title:"提示",message:"邮箱和验证码不能为空"});else if((""===this.phone||""===this.vcode)&2===this.registerType)this.$notify.warning({title:"提示",message:"手机号和验证码不能为空"});else{var s=1===this.registerType?"/user/checkregemail":"/user/checkregphone",e=1===this.registerType?{email:this.email}:{pcode:this.pcode,phone:this.phone};this.$api.post(s,o()({},e,{ucode:this.vcode,msgid:this.msgid}),function(s){s.status?t.stepNum=2:t.$notify.warning({title:"提示",message:s.msg})})}},modelTabChange:function(t){this.checked=!0,this.username="",this.pwd="",this.confirmPwd="",this.vcode="",this.pcode="+86",this.email="",this.stepNum=1,this.phone="",this.$emit("modelTabChange","register",t)},findPwd:function(){this.$emit("findPwd")}}},L={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isRegisterFlag,expression:"isRegisterFlag"}],staticClass:"globalLoginBox"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loginLoad,expression:"loginLoad"}],staticClass:"globalRegister",class:{globalStep1Reg:1===t.stepNum,globalStep2Reg:2===t.stepNum}},[e("img",{staticClass:"close",attrs:{src:t.$utils.getPng("login_close")},on:{click:function(s){return t.closeModel()}}}),t._v(" "),e("div",{staticClass:"loginContent"},[e("div",{staticClass:"logoNav"},[e("img",{staticClass:"logo",attrs:{src:t.$utils.getPng2022("2022_fm_logo1")}}),t._v(" "),e("span",{staticClass:"title"},[t._v("注册")])]),t._v(" "),e("div",{staticClass:"loginType"},[e("span",{staticClass:"type type1",class:{on:2===t.registerType},on:{click:function(s){return t.modelTabChange(2)}}},[t._v("手机注册")]),t._v(" "),e("span",{staticClass:"type type3",class:{on:1===t.registerType},on:{click:function(s){return t.modelTabChange(1)}}},[t._v("邮箱注册")])]),t._v(" "),e("div",{staticClass:"userForm"},[e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[1===t.stepNum&1===t.registerType?e("el-input",{staticClass:"loginInput la",attrs:{autocomplete:"off",placeholder:"请输入邮箱"},on:{input:t.setEmail},model:{value:t.email,callback:function(s){t.email=s},expression:"email"}}):t._e(),t._v(" "),1===t.stepNum&2===t.registerType?e("div",[e("el-input",{staticClass:"loginInput la",attrs:{placeholder:"请输入手机号",autocomplete:"off"},on:{input:t.setPhone},model:{value:t.phone,callback:function(s){t.phone=s},expression:"phone"}},[e("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend","popper-class":"loginsel"},on:{change:t.setPcode},slot:"prepend",model:{value:t.pcode,callback:function(s){t.pcode=s},expression:"pcode"}},t._l(t.cty,function(s){return e("el-option",{key:s.id,staticClass:"loginselval",attrs:{label:s.id,value:s.id}},[t._v(t._s(s.name))])}),1)],1)],1):t._e(),t._v(" "),1===t.stepNum?e("el-input",{staticClass:"loginInput mt",attrs:{autocomplete:"off",placeholder:"请输入验证码"},on:{input:t.setVcode},model:{value:t.vcode,callback:function(s){t.vcode=s},expression:"vcode"}},[e("template",{slot:"suffix"},[e("div",{staticClass:"pcodeSlot"},[e("span",{staticClass:"line"}),t._v(" "),t.getCodeFlag?e("span",{staticClass:"getCode",on:{click:function(s){return t.verifyfun("sendRegCode")}}},[t._v("获取验证码")]):e("span",{staticClass:"waitBtn"},[t._v("已发送("+t._s(t.waitTime)+")")])])])],2):t._e()],1),t._v(" "),2===t.stepNum?e("div",[e("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-input",{staticClass:"loginInput",attrs:{autocomplete:"off",placeholder:"请输入用户名"},on:{input:t.setNameVal},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}}),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{type:"text",focus:"this.type='password'",autocomplete:"off",placeholder:"请输入密码","show-password":""},on:{input:t.setPwdVal},model:{value:t.pwd,callback:function(s){t.pwd=s},expression:"pwd"}}),t._v(" "),e("el-input",{staticClass:"loginInput mt",attrs:{type:"text",focus:"this.type='password'",autocomplete:"off",placeholder:"请再次输入密码","show-password":""},on:{input:t.setConfirmPwd},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.verifyfun("dealRegister")}},model:{value:t.confirmPwd,callback:function(s){t.confirmPwd=s},expression:"confirmPwd"}}),t._v(" "),2===t.registerType?e("el-input",{staticClass:"loginInput mt",attrs:{autocomplete:"off",placeholder:"邀请码 (非必填)"},on:{input:t.setiCode},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.verifyfun("dealRegister")}},model:{value:t.invitecode,callback:function(s){t.invitecode=s},expression:"invitecode"}}):t._e()],1),t._v(" "),e("div",{staticClass:"loginTool"},[e("div",{staticClass:"toolLeft",on:{click:t.setChecked}},[e("img",{staticClass:"icon",attrs:{src:t.$utils.getPng2022(t.checked?"fm_select_1":"fm_select_2")}}),t._v(" "),e("span",[t._v("我同意")]),t._v(" "),e("a",{attrs:{target:"_blank",href:"https://help.feimaoyun.com/archives/125"}},[t._v("《飞猫盘用户服务协议》")])])])],1):t._e(),t._v(" "),1===t.stepNum?e("div",{staticClass:"loginBtn",on:{click:function(s){return t.goNext()}}},[t._v("\n          下一步\n        ")]):e("div",{staticClass:"loginBtn",on:{click:function(s){return t.verifyfun("dealRegister")}}},[t._v("\n          立即注册\n        ")])],1)])])])},staticRenderFns:[]},N=e("VU/8")(A,L,!1,null,null,null).exports,B=e("LDUB"),M=e("N6ST"),j={name:"Index",data:function(){return{loginLoad:!1,invitecode:"",checked:!0,cty:m.a,username:"",phone:"",pwd:"",confirmPwd:"",ifauto:!0,vcode:"",vid:"",pcode:"+86",email:"",waitTime:"",selectType:"username",loginType:1,findType:1,registerType:2,getCodeFlag:!0,isFindPwdFlag:!1,isRegisterFlag:!1,gtswitch:1,loginTimer:null,editPwdTimer:null,wxInfo:{},showWXbox:!1,basepath:this.$route.path.substr(1),winWidth:document.documentElement.clientWidth,uploadFiles:[],uploadFiles1:[],uploader:null,uploader1:null,uploadID:0,fileload:!1,shareagree:!0,folderName:"根目录",folderName1:"根目录",folderid:0,pfolderid:0,pfolderid1:0,uploadFolderList:[],folderList:[],navData:[{title:"开通会员",path:"vip",id:1},{title:"飞猫盘",path:"home",id:2},{title:"橘猫云",path:"jvmaoyun",id:3},{title:"福利大厅",path:"jvmaozhongbao",id:4},{title:"APP下载",path:"app",id:6}],jmAllIconZ:!1,jmAllIconK:!1,fmAllStart:!1,isNeedLogin:!1,md5Flag:0,pageType:1,fmData:["feimaopan","home","opensub","opensubapply","contentmanagement","dataanalysis","fansmanagement","help","account","drafts","tgyvideodetail","login"],fmPathData:["vd","ph","ps","c","s","jx","je","ve"],reload:!1,showUpdatVerify:!1,nctype:"",ncdata:[],funName:"",ncInfo:{},messageOpen:!1,downloadData:[],dfLoading:!1,showSmall:!1,surplusNum:0,isShowVipTip:!1,downloadFmData:[],showFmSmall:!1,surplusFmNum:0,fd_title:""}},created:function(){var t=this.basepath.substr(0,1),s=this.basepath.substr(0,6),e=this.basepath.substr(0,5),i=this.basepath.substr(0,2),a=this.fmPathData,n=this.fmData;(this.isInArray(a,t)||this.isInArray(a,i)||"fmDown"===s||"tdown"===e||"c"===t)&&(this.basepath="home",this.pageType=0),"flowmainhall"===this.basepath&&(this.basepath="jvmaozhongbao",this.pageType=1),this.isInArray(n,this.basepath)&&(this.pageType=0,this.basepath="home"),this.getuser(),this.fileDown()},mounted:function(){var t=this;this.ifauto&&(this.username=this.$utils.getCookie("username")||this.username,this.selectType=this.$utils.getCookie("logintp")||this.selectType,this.pwd=this.$utils.getCookie("password")?window.atob(this.$utils.getCookie("password")):this.pwd),this.uploadID=(new Date).getTime()+1,this.getuser(),this.fileverify(),this.initUpload(),this.initUpload1(),this.$store.commit("setAttr",{name:"selectfilecallback",val:this.selectfile}),this.$store.commit("setAttr",{name:"uploadsetcallback",val:this.uploadset}),this.$store.commit("setAttr",{name:"getfolderscallback",val:this.getfolders}),this.$store.commit("setAttr",{name:"selectfilecallback1",val:this.selectfile1}),this.$store.commit("setAttr",{name:"uploadsetcallback1",val:this.uploadset1}),this.$store.commit("setAttr",{name:"getfolderscallback1",val:this.getfolders1}),this.$store.commit("setAttr",{name:"getDownloadFile",val:this.fileDown}),this.$store.commit("setAttr",{name:"getFmDownloadFile",val:this.fileDownFm}),window.onresize=function(){t.winWidth=document.documentElement.clientWidth},setTimeout(function(){t.asylg()},1e3),window.addEventListener("beforeunload",function(s){return t.beforeunloadHandler(s)}),window.addEventListener("unload",function(s){return t.unloadHandler(s)})},destroyed:function(){var t=this;window.removeEventListener("beforeunload",function(s){return t.beforeunloadHandler(s)}),window.removeEventListener("unload",function(s){return t.unloadHandler(s)})},methods:{handler:function(){this.jmAllIconK=this.uploadFiles1.some(function(t){return 0==t.isupload}),this.jmAllIconZ=this.uploadFiles1.some(function(t){return 1==t.isupload})},finishSlide:function(t){!1===t.cls&&(this.showUpdatVerify=!1),t.sessionId&&(this.ncdata=t,this.showUpdatVerify=!1,this[this.funName]())},isInArray:function(t,s){for(var e=0;e<t.length;e++)if(s===t[e])return!0;return!1},goHomePage:function(t){window.open("/ph/"+t)},goScPage:function(t){window.open("/c/"+t)},navIcon:function(t){return"navIcon"+t},asylg:function(){var t=this.$utils.getCookie("tcode");if(null!==t){var s=t.split("-");if(2===s.length){var e=document.createElement("script");e.src="https://www.jvmaozhongbao.com/index.php/api/tcode/cd/"+s[0],document.body.appendChild(e);var i=document.createElement("script");i.src="https://fsl.to/ajax_tcode_cd_"+s[1],document.body.appendChild(i),this.$utils.clearCookie("tcode")}}},resetFm:function(){this.folderName="根目录"},closeUpload:function(t){1===t?(this.resetFm(),this.$store.commit("setAttr",{name:"showuploadlayer",val:!1})):this.$store.commit("setAttr",{name:"showPriuploadlayer",val:!1})},getuser:function(){var t=this;null!==this.$utils.getCookie(this.$glb.fmCookieName)&&this.$api.post("/center/getuser",{},function(s){s.status&&(t.$store.commit("setAttr",{name:"isLogin",val:!0}),t.$store.commit("setAttr",{name:"logo",val:s.data.logo}),t.$store.commit("setAttr",{name:"uid",val:s.data.userid}),t.$store.commit("setAttr",{name:"token",val:s.data.token}),""!==s.data.nickname?sessionStorage.setItem("nickname",s.data.nickname):sessionStorage.setItem("nickname","订阅号"),t.$store.commit("setAttr",{name:"cloud_mode",val:s.data.cloud_mode}),t.$store.commit("setAttr",{name:"downvol",val:parseInt(s.data.downvol)}),t.$store.commit("setAttr",{name:"point",val:parseInt(s.data.point)}),t.$store.commit("setAttr",{name:"ifcertify",val:1===parseInt(s.data.ifcertify)}),t.$store.commit("setAttr",{name:"vipTitle",val:s.data.vip_title}),t.$store.commit("setAttr",{name:"proTitle",val:s.data.private_vip_title}),t.$store.commit("setAttr",{name:"vipid",val:s.data.vip_id}),t.$store.commit("setAttr",{name:"vipEndTime",val:s.data.vip_end_time}),t.$store.commit("setAttr",{name:"proEndTime",val:s.data.private_vip_end_time}),t.$store.commit("setAttr",{name:"youthEndTime",val:s.data.activity_vip_end_time}),t.$store.commit("setAttr",{name:"isyouthvip",val:s.data.isyouthvip}),t.$store.commit("setAttr",{name:"isprovip",val:s.data.isprovip}),t.$store.commit("setAttr",{name:"isvip",val:s.data.isvip}),t.$store.commit("setAttr",{name:"downNum",val:parseInt(s.data.today_surplus_down_count)}),t.$store.commit("setAttr",{name:"first_svip",val:1===parseInt(s.data.first_svip)}),t.$store.commit("setAttr",{name:"onlineNum",val:parseInt(s.data.online_number)}),t.$store.commit("setAttr",{name:"ifrateflow",val:1===parseInt(s.data.ifrateflow)}),t.$store.commit("setAttr",{name:"user_open_subscribe",val:1===parseInt(s.data.user_open_subscribe)}),t.$store.commit("setAttr",{name:"user_isup",val:1===parseInt(s.data.user_isup)}),t.$store.commit("setAttr",{name:"phone",val:s.data.phone}),t.$store.commit("setAttr",{name:"username",val:s.data.username}))})},fileverify:function(){var t=this;null!==this.$utils.getCookie(this.$glb.fmCookieName)&&this.$api.post("/file/uploadverify",{},function(s){s.status?(t.$store.commit("setAttr",{name:"token",val:s.data.token}),t.$store.commit("setAttr",{name:"uid",val:s.data.uid})):t.$notify.warning({title:"提示",message:s.msg})})},getsets:function(){var t=this;this.$api.post("/file/fileset",{},function(s){t.$store.commit("uploadset",{name:"target",value:s.data.remote})})},initUpload:function(){var t=this;this.getsets(),this.uploader=new d.a({target:"",chunkSize:2097152,simultaneousUploads:5,allowDuplicateUploads:!0,testChunks:!1,query:{},generateUniqueIdentifier:function(t){var s=9999*Math.random(),e=Math.floor(s)+1;return t.size+"-"+t.name+Date.now()+e}});var s=this.uploader;s.assignBrowse(document.getElementById("fmUploadBtn")),s.assignDrop(document.getElementById("fmUpload")),s.on("fileAdded",function(s,e){return s.size>2147483648?(t.$notify.warning({title:"提示",message:"单个文件大小不能超过2G"}),void setTimeout(function(){s.cancel()},2e3)):t.$utils.allowexp(s.getExtension())?(s.ispause=!1,t.uploadFiles.push(s),void(t.uploadFiles.length>0&&(t.fmAllStart=!1))):(t.$notify.warning({title:"提示",message:"不支持该类型文件上传，请尝试其他格式"}),void setTimeout(function(){s.cancel()},2e3))}),s.on("fileProgress",function(s,e,i){for(var a=t.uploadFiles,n=0,o=a.length;n<o;n++)if(a[n].id===e.id)return void(t.uploadFiles[n]=e)}),s.on("fileSuccess",function(s,e,i){t.$api.post("/api/fnsignal",{id:i,name:e.name},function(t){console.log(t,"success")});for(var a=t.uploadFiles,n=0,o=a.length;n<o;n++)if(a[n].id===e.id)return t.uploadFiles=a.slice(0,n).concat(a.slice(n+1)),void t.$store.commit("getfiles")}),s.on("fileError",function(t,s,e){console.log("fileError")})},initUpload1:function(){var t=this;this.uploader1=new d.a({target:this.$glb.privateUrl+"/home/index/chunkUpload",chunkSize:2097152,simultaneousUploads:1,allowDuplicateUploads:!0,testChunks:!0,checkChunkUploadedByResponse:function(t,s){var e=JSON.parse(s);if(parseInt(e.data.file_id)>0)return!0},successStatuses:[200],permanentErrors:[203,205,405,406],headers:{AuthToken:this.$utils.getCookie(this.$glb.fmCookieName)},processParams:function(t){var s=sessionStorage.getItem("i"+t.identifier),e=sessionStorage.getItem(t.identifier+"i"+s);return o()({},t,{uniqueId:e,hash:t.identifier})}});var s=this.uploader1;s.assignBrowse(document.getElementById("jmUploadBtn")),s.assignDrop(document.getElementById("jmUpload")),s.on("fileAdded",function(s,e){if(s.isWait=!0,s.size>4294967296)return t.$notify.warning({title:"提示",message:"单个文件大小不能超过4G"}),void setTimeout(function(){s.cancel()},2e3);t.$utils.privateuploadexp(s.getExtension())?(s.ispause=!1,s.md5Flag=1,s.isFileComplete=!1,t.uploadFiles1.push(s),t.md5Flag=1,t.computeMD5(s)):(t.$notify.warning({title:"提示",message:"不支持该类型文件上传，请尝试其他格式"}),setTimeout(function(){s.cancel()},2e3))}),s.on("fileProgress",function(s,e,i){if(e.isWait=!1,0!==i.total){if(i.processedState){var a="string"==typeof i.processedState.res&""!==i.processedState.res?JSON.parse(i.processedState.res):i.processedState.res;200===a.code&&parseInt(a.data.file_id)>0&&(t.removeUid(e),t.setFileId(a.data.file_id,e.name),e.cancel(),e.isFileComplete=!0,setTimeout(function(){t.jmcolseFile(e.id)},5e3),t.$store.commit("getfiles1"));for(var n=t.uploadFiles1,o=0,l=n.length;o<l;o++)if(n[o].id===e.id)return void(t.uploadFiles1[o]=e);return 203===a.code||205===a.code||405===a.code||406===a.code?(t.$notify.warning({title:"提示",message:a.msg}),t.removeUid(e),void setTimeout(function(){e.cancel()},100)):void 0}}else{var c="string"==typeof i.xhr.response&""!==i.xhr.response?JSON.parse(i.xhr.response):i.xhr.response;200===c.code&&parseInt(c.data.file_id)>0&&(t.removeUid(e),t.setFileId(c.data.file_id,e.name),e.cancel(),e.isFileComplete=!0,setTimeout(function(){t.jmcolseFile(e.id)},5e3),t.$store.commit("getfiles1"))}}),s.on("fileSuccess",function(t,s,e){}),s.on("fileError",function(t,s,e){console.log(t,s,e,"fileError")})},setFileId:function(t,s){this.$api.post("/api/fnsignal",{id:t,name:s},function(t){})},removeUid:function(t){var s=sessionStorage.getItem("i"+t.uniqueIdentifier);sessionStorage.removeItem(t.uniqueIdentifier+"i"+s),sessionStorage.removeItem("i"+t.uniqueIdentifier)},computeMD5:function(t){var s=this,e=new FileReader,i=((new Date).getTime(),File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice),a=0,n=2097152,o=Math.ceil(t.size/n),l=new f.a.ArrayBuffer;function c(){var s=parseInt(a*n),o=s+parseInt(n)>=t.size?t.size:s+n;e.readAsArrayBuffer(i.call(t.file,s,o))}t.pause(),c(),e.onload=function(e){if(l.append(e.target.result),a<o)a++,c();else{var i=l.end();s.computeMD5Success(i,t)}},e.onerror=function(e){s.$notify.error({title:"提示",message:"上传失败，请稍后再试"}),s.md5Flag=0,t.cancel()}},computeMD5Success:function(t,s){this.md5Flag=2,s.md5Flag=2,s.uniqueIdentifier=t,sessionStorage.setItem("i"+t,s.id),sessionStorage.setItem(t+"i"+s.id,t+s._lastProgressCallback+s.id),s.resume(),this.jmplayFile(s)},uploadset:function(t){this.uploader.opts[t.name]=t.value,this.uploader.opts.query.shareagree=this.shareagree?"1":"0"},uploadset1:function(){}