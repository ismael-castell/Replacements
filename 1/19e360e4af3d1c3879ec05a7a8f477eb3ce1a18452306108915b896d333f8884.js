!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self);a.hull=f()}}(function(){return function d(a,h,e){function b(g,r){if(!h[g]){if(!a[g]){var k="function"==typeof require&&require;if(!r&&k)return k(g,!0);if(c)return c(g,!0);r=Error("Cannot find module '"+g+"'");throw r.code="MODULE_NOT_FOUND",
r;}r=h[g]={exports:{}};a[g][0].call(r.exports,function(c){var d=a[g][1][c];return b(d?d:c)},r,r.exports,d,a,h,e)}return h[g].exports}for(var c="function"==typeof require&&require,g=0;g<e.length;g++)b(e[g]);return b}({1:[function(a,h,e){function d(a,c,d){return(c[0]-a[0])*(d[1]-a[1])-(c[1]-a[1])*(d[0]-a[0])}h.exports=function(a){var b=[];for(var g=0;g<a.length;g++){for(;2<=b.length&&0>=d(b[b.length-2],b[b.length-1],a[g]);)b.pop();b.push(a[g])}b.pop();g=a.reverse();for(var e=[],h=0;h<g.length;h++){for(;2<=
e.length&&0>=d(e[e.length-2],e[e.length-1],g[h]);)e.pop();e.push(g[h])}e.pop();b=e.concat(b);b.push(a[0]);return b}},{}],2:[function(a,h,e){h.exports={toXy:function(a,b){return void 0===b?a.slice():a.map(function(a){return(new Function("pt","return [pt"+b[0]+",pt"+b[1]+"];"))(a)})},fromXy:function(a,b){return void 0===b?a.slice():a.map(function(a){return(new Function("pt","var o \x3d {}; o"+b[0]+"\x3d pt[0]; o"+b[1]+"\x3d pt[1]; return o;"))(a)})}}},{}],3:[function(a,h,e){function d(a,c){this._cells=
[];this._cellSize=c;a.forEach(function(a){var b=this.point2CellXY(a),c=b[0];b=b[1];void 0===this._cells[c]&&(this._cells[c]=[]);void 0===this._cells[c][b]&&(this._cells[c][b]=[]);this._cells[c][b].push(a)},this)}d.prototype={cellPoints:function(a,c){return void 0!==this._cells[a]&&void 0!==this._cells[a][c]?this._cells[a][c]:[]},rangePoints:function(a){var b=this.point2CellXY([a[0],a[1]]);a=this.point2CellXY([a[2],a[3]]);for(var d=[],e=b[0];e<=a[0];e++)for(var h=b[1];h<=a[1];h++)d=d.concat(this.cellPoints(e,
h));return d},removePoint:function(a){var b=this.point2CellXY(a);b=this._cells[b[0]][b[1]];for(var d,e=0;e<b.length;e++)if(b[e][0]===a[0]&&b[e][1]===a[1]){d=e;break}b.splice(d,1);return b},point2CellXY:function(a){var b=parseInt(a[0]/this._cellSize);a=parseInt(a[1]/this._cellSize);return[b,a]},extendBbox:function(a,c){return[a[0]-c*this._cellSize,a[1]-c*this._cellSize,a[2]+c*this._cellSize,a[3]+c*this._cellSize]}};h.exports=function(a,c){return new d(a,c)}},{}],4:[function(a,h,e){function d(a){return a.filter(function(a,
b,c){c=c[b-1];return 0===b||!(c[0]===a[0]&&c[1]===a[1])})}function b(a){return a.sort(function(a,b){return a[0]==b[0]?a[1]-b[1]:a[0]-b[0]})}function c(a,b){return Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2)}function g(a,b,d){var g=[b[0]-a[0],b[1]-a[1]],e=[d[0]-a[0],d[1]-a[1]];b=c(a,b);a=c(a,d);return(g[0]*e[0]+g[1]*e[1])/Math.sqrt(b*a)}function k(a,b){for(var c=0;c<b.length-1;c++){var d=[b[c],b[c+1]];if(!(a[0][0]===d[0][0]&&a[0][1]===d[0][1]||a[0][0]===d[1][0]&&a[0][1]===d[1][1])&&n(a,d))return!0}return!1}
function r(a){for(var b=Infinity,c=Infinity,d=-Infinity,g=-Infinity,e=a.length-1;0<=e;e--)a[e][0]<b&&(b=a[e][0]),a[e][1]<c&&(c=a[e][1]),a[e][0]>d&&(d=a[e][0]),a[e][1]>g&&(g=a[e][1]);return[d-b,g-c]}function l(a,b,d,e,h){for(var p,r,m,n,v,y,z,D=!1,t=0;t<a.length-1;t++)if(p=[a[t],a[t+1]],r=p[0].join()+","+p[1].join(),!(c(p[0],p[1])<b||!0===h[r])){m=0;v=[Math.min(p[0][0],p[1][0]),Math.min(p[0][1],p[1][1]),Math.max(p[0][0],p[1][0]),Math.max(p[0][1],p[1][1])];do{v=e.extendBbox(v,m);y=v[2]-v[0];z=v[3]-
v[1];for(var C,M=p,J=e.rangePoints(v),Q=a,R=null,S=B,T=B,K=0;K<J.length;K++)C=g(M[0],M[1],J[K]),n=g(M[1],M[0],J[K]),C>S&&n>T&&!k([M[0],J[K]],Q)&&!k([M[1],J[K]],Q)&&(S=C,T=n,R=J[K]);n=R;m++}while(null===n&&(d[0]>y||d[1]>z));y>=d[0]&&z>=d[1]&&(h[r]=!0);null!==n&&(a.splice(t+1,0,n),e.removePoint(n),D=!0)}return D?l(a,b,d,e,h):a}var n=a("./intersect.js"),m=a("./grid.js"),p=a("./format.js"),v=a("./convex.js"),B=Math.cos(90/(180/Math.PI));h.exports=function(a,c,g){c=c||20;if(4>a.length)return a.slice();
var e=d(b(p.toXy(a,g)));var k=r(e);var h=[.6*k[0],.6*k[1]];var n=v(e);a=e.filter(function(a){return 0>n.indexOf(a)});c=l(n,Math.pow(c,2),h,m(a,Math.ceil(1/(e.length/(k[0]*k[1])))),{});return p.fromXy(c,g)}},{"./convex.js":1,"./format.js":2,"./grid.js":3,"./intersect.js":5}],5:[function(a,h,e){function d(a,c,d,e,h,l){a=(l-c)*(d-a)-(e-c)*(h-a);return 0<a?!0:0>a?!1:!0}h.exports=function(a,c){var b=a[0][0],e=a[0][1],h=a[1][0];a=a[1][1];var l=c[0][0],n=c[0][1],m=c[1][0];c=c[1][1];return d(b,e,l,n,m,c)!==
d(h,a,l,n,m,c)&&d(b,e,h,a,l,n)!==d(b,e,h,a,m,c)}},{}]},{},[4])(4)});
var Channel_autocomplete={},getAsyncPromise=function(f){var a=$.Deferred();$.getJSON(f).done(function(f){a.resolve(f)}).fail(function(f){return a.reject(f)});return a.promise()},getChannelListPromise=function(f){return getAsyncPromise("/content/dam/virginmedia/dotcom/static/channel-list/channel-data-vmp.js").then(function(a){return a.channels.map(function(a){f[a.channelName]=a.logoName;return a.channelName})})},markInvalid=function(f){f.markInvalid("Please select a valid channel");f.validator=function(){return!1}},
markValid=function(f){f.clearInvalid();f.validator=function(){return!0}},setChannelLogo=function(f,a,h){a=a.find("name","./channelLogo")[0];$("#"+a.getId()).val("/content/dam/virginmedia/dotcom/static/channel-list/tv-logos/"+f[h])};
Channel_autocomplete.prepareDialog=function(f){var a=f.items.get(0).items.get(0),h=a.find("name","./showChannel")[0],e=$("#"+h.getId()),d={};markValid(h);$(".ui-helper-hidden-accessible").addClass("hide");getChannelListPromise(d).then(function(b){e.autocomplete({source:b,select:function(){$(".ui-helper-hidden-accessible").addClass("hide")},close:function(){d[h.getValue()]?($(".ui-helper-hidden-accessible").addClass("hide"),markValid(h),setChannelLogo(d,a,h.getValue())):($(".ui-helper-hidden-accessible").removeClass("hide"),
markInvalid(h))},open:function(){setTimeout(function(){$(".ui-autocomplete").addClass("autocomplete-section");$(".ui-helper-hidden-accessible").addClass("autocomplete-hint")},0)}});e.on("autocompleteselect",function(b,g){setChannelLogo(d,a,g.item.value)});e.on("autocompleteresponse",function(a,b){b&&b.content&&0!==b.content.length||markInvalid(h)})})};
var VM=function(f,a){f.homeTemplate=function(){return{init:function(){var f=a(".partner-wrap");0===a.trim(f.text()).length&&(f.remove(),a(".content-section").addClass("content-padded"))}}}();return f}(VM||{},jQuery);jQuery(window).load(function(){VM.homeTemplate.init()});
VM=function(f,a){f.header=function(){function f(a){var b=document.createElement("a");b.href=a.attr("href");a=e(b.pathname);return a.lastIndexOf("/",0)?"/"+a:a}function e(a){var b=/\.html$/;return void 0!==a&&a.match(b)?a.replace(".html",""):a}var d,b,c=function(b,c,d,g){function e(){function a(){k=+new Date;d.apply(h,p)}function e(){f=void 0}var h=this,l=+new Date-k,p=arguments;g&&!f&&a();f&&clearTimeout(f);void 0===g&&l>b?a():!0!==c&&(f=setTimeout(g?e:a,void 0===g?b-l:b))}var f,k=0;"boolean"!==typeof c&&
(g=d,d=c,c=void 0);a.guid&&(e.guid=d.guid=d.guid||a.guid++);return e},g=function(){function g(){var b=a(".unified-header-menu-mobile ul").height(),c=a(window).innerHeight(),d=58>a(".unified-header-level-one").outerHeight(!0)?58:a(".unified-header-level-one").outerHeight(!0);b=a(window).height()-b-57;991>=a(window).width()&&(768<=a(window).width()?a(".sub-label").css("max-height",b+"px"):(a(".unified-header-main-menu").css("height",c-d),a(".modal-open.header-modal header").css("height",c)),a("section").css("margin-top",
"58px"))}var e=d.find(".unified-header-menu"),f=d.find(".unified-header-menu-toggle"),k=d.find(".sub-label"),h=d.find(".unified-header-menu-2-level-toggle"),l=d.find(".sublinks-subsection"),r=a("\x3cdiv class\x3d'overlay hidden'\x3e\x3c/div\x3e").insertAfter("#unified-header");f.on("click",function(b){b.preventDefault();d.hasClass("unified-header-menu--open")?(k.find(".level-two-sublinks-dropdown").removeClass("active"),k.find(".sublinks-subsection").removeClass("active"),k.find(".chevron-down").removeClass("rotate"),
a("section").css("margin-top","inherit")):a("section").css("margin-top","58px");a("body").toggleClass("modal-open header-modal");f.find(".menu-icon").toggleClass("hamburger-menu close-menu");r.toggleClass("hidden");e.toggleClass("active");d.toggleClass("unified-header-menu--open");d.hasClass("unified-header-menu--open")?(g(),a(window).resize(c(200,function(){g()}))):a("header").css("height","auto")});r.on("click",function(){d.toggleClass("unified-header-menu--open");f.find(".menu-icon").toggleClass("hamburger-menu close-menu");
r.addClass("hidden");k.find(".level-two-sublinks-dropdown").removeClass("active");k.find(".sublinks-subsection").removeClass("active");k.find(".chevron-down").removeClass("rotate");a("section").css("margin-top","inherit")});h.on("click",function(c){var g=a(this),e=g.parent(),f=d.find(".unified-header-main-menu"),k=f.find(".level-two-sublinks-dropdown"),h=f.find("\x3e ul");c.preventDefault();b?(g.toggleClass("active"),f.toggleClass("active"),h.css("height","auto"),f.hasClass("active")||k.removeClass("active")):
(e.find(".level-two-sublinks-dropdown").hasClass("active")?(e.parent().find(".level-two-sublinks-dropdown").removeClass("active"),e.parent().find(".sublinks-subsection").removeClass("active")):(e.parent().find(".level-two-sublinks-dropdown").removeClass("active"),e.parent().find(".sublinks-subsection").removeClass("active"),e.find(".level-two-sublinks-dropdown").addClass("active")),e.find(".level-two-sublinks-dropdown").hasClass("active")?(e.parent().find(".chevron-down").removeClass("rotate"),e.find(".unified-header-menu-2-level-toggle .chevron-down").addClass("rotate")):
e.parent().find(".chevron-down").removeClass("rotate"))});l.on("click",function(b){b=a(this);var c=b.parent();b.hasClass("active")?c.find(".sublinks-subsection").removeClass("active"):(c.find(".sublinks-subsection").removeClass("active"),b.addClass("active"));b.hasClass("active")?(c.find(".chevron-down").removeClass("rotate"),b.find(".chevron-down").addClass("rotate")):c.find(".chevron-down").removeClass("rotate")})},k=function(){var b=d.find(".unified-header-main-menu"),c=b.find(".fa-arrow-right"),
g=b.find("\x3e ul");c.on("click",function(c){var d=a(this).parent().siblings(".level-two-sublinks-dropdown"),e=d.find(".level-two-sublinks-dropdown-subsection"),f=e.height(),k=b.height();c.preventDefault();d.addClass("active");k>f?e.height(k):g.height(f)});b.find(".back-button").on("click",function(){var b=a(this).parents(".level-two-sublinks-dropdown");b.removeClass("active");b.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a(this).hasClass("active")||
g.css("height","auto")})});a(window).on("resize",function(){var c=g.find(".level-two-sublinks-dropdown"),e=g.find(".unified-header-main-menu-item");991>=a(window).width()&&(d.hasClass("unified-header-menu--open")?a("section").css("margin-top","58px"):a("section").css("margin-top","inherit"));991<a(window).width()?(g.css("height","auto"),a("section").css("margin-top","inherit"),c.each(function(){var b=a(this);b.hasClass("active")&&b.removeClass("active")})):b.hasClass("active")&&e.hide().show(0)})},
r=function(){var b=d.find(".unified-header-sign-in");d.find(".signin-link \x3e a").on("click",function(){992>a(window).width()&&b.toggleClass("active")})},l=function(b,c,d){c.each(function(){var c=a(a(this).children("a")[0]);void 0!==c&&(c=f(c),"/"===c||b.lastIndexOf(c,0)||a(this).addClass("current"),d&&n(a(this),b))})},n=function(b,c){b.find(".sublinks-subsection a").each(function(b){f(a(this))===c&&a(this).addClass("current")})},m=function(){var b=a(".unified-header-main-menu");b.find(".menu-link-item").on("touchstart",
function(b){var c=a(this);991<a(window).width()&&!c.siblings(".level-two-sublinks-dropdown").hasClass("active-item")&&(b.preventDefault(),c.parents(".unified-header-main-menu").find(".level-two-sublinks-dropdown").removeClass("active-item"),c.siblings(".level-two-sublinks-dropdown").addClass("active-item"))});if(991<a(window).width())a("body").on("touchstart",function(a){b.find(".level-two-sublinks-dropdown").removeClass("active-item")});b.on("touchstart",function(a){a.stopPropagation()})};return{init:function(){d=
a(".unified-header-content");b=a(".unified-header-old").length;g();k();r();var c=e(window.location.pathname);if(c.match(/^(?:\/content\/virginmedia(?:-qa)?\/dotcom\/en)?\/shop/)){var f=d.find(".unified-header-level-one .unified-header-menu-item"),h=d.find(".unified-header-level-two .unified-header-main-menu-item");l(c,f);l(c,h,!0)}m()}}}();return f}(VM||{},jQuery);jQuery(document).ready(function(){VM.header.init()});
(function(f,a){function h(e,d){var b=a(d),c=document.getElementById("skip-to-content-target");b.on("click",function(){c.scrollIntoView(!0);c.focus()}).on("keyup",function(a){13===a.which&&b.trigger("click")})}f.register({name:"skip-to-content",api:{load:function(a){a.each(h)}},selector:".skip-to-content"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a,b,c){var d=a.filter(".active").index(),g=a.first(),e=b.first();a.removeClass("active");b.removeClass("active");d===c?(g.addClass("active"),e.addClass("active")):(a.eq(d+1).addClass("active"),b.eq(d+1).addClass("active"))}function e(a){var b=a.elem.find(".carousel-main").children(),c=a.elem.find("ol li"),d=b.length-1,g=1E3*a.elem.find(".carousel-indicators").attr("data-autoslide-seconds");clearInterval(n[a.timerId]);n[a.timerId]=setInterval(function(){h(b,c,d)},g)}function d(b){var c=
b.indicators.find("ol li");c.on("click",function(d){d.preventDefault();d=a(this);var g=d.index(),e=d.closest("div").prev().children();clearInterval(n[b.timerId]);e.removeClass("active");c.removeClass("active");d.addClass("active");e.eq(g).addClass("active")});c.find("a p:last").addClass("last-par")}function b(b){var c=b.slides.length-1;b.elem.find(".carousel-main").swipe({swipeLeft:function(){var d=a(this),g=d.children();d=d.parent().find("ol li");clearInterval(n[b.timerId]);h(g,d,c)},swipeRight:function(){var d=
a(this),g=d.children();d=d.parent().find("ol li");clearInterval(n[b.timerId]);var e=g.filter(".active").index();g.removeClass("active");d.removeClass("active");0===e?(g.eq(c).addClass("active"),d.eq(c).addClass("active")):(g.eq(e-1).addClass("active"),d.eq(e-1).addClass("active"))},excludedElements:"",threshold:50,allowPageScroll:"vertical"})}function c(a,b){992<=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)?100===a?b.hide():b.css("width",a+"%"):b.css("width",
"11px")}function g(b){var d=b.indicators.find("ol").attr("data-slide-count"),g=b.indicators.find("ol li");d=100/d;c(d,g);a(window).resize(function(){c(d,g)})}function k(b){a(this).addClass("js-carousel-"+b)}function r(){var c=a(this),f=c.find(".carousel-content").hasClass("edit-mode"),k=c.attr("class").replace(/ /g,"");c={elem:c,slides:c.find(".carousel-slide"),indicators:c.find(".carousel-indicators"),activeClass:"active",timerId:k};f||(e(c),d(c),g(c),b(c))}var l={},n=[];l.init=function(b){a(".carousel").each(k);
b.each(r);a(document).ready(function(){a(".carousel").addClass("carousel-show")})};f.register({name:"carousel",api:l,selector:".carousel"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){var b=a(".image-gallery-content .owl-carousel"),g=a(".image-gallery-slider-content"),f=a(".image-gallery-slider-4-content"),h=a(".image-gallery-slider-npet-content"),l=a(".image-gallery-content-pagination"),n=h.find(".slide-item").length;h.owlCarousel({loop:!0,margin:20,dots:!1,nav:2<h.find(".slide-item").length,navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:1<n?1.15:1,nav:!1,mouseDrag:1<
n,touchDrag:1<n},768:{items:2,nav:2<n,loop:2<n,mouseDrag:2<n,touchDrag:2<n},900:{items:3,nav:3<n,loop:3<n,mouseDrag:3<n,touchDrag:3<n}},onResized:function(){d(this,!0)},onInitialized:function(){d(this,!0);1===n&&a(".image-gallery-npet:not(.image-gallery)").addClass("single-item")}});f.owlCarousel({loop:!0,margin:10,nav:4<f.find(".slide-item").length,navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:1,nav:!0},768:{items:2,
nav:!0},900:{items:3,nav:!0},1200:{items:4}},onResized:function(){d(this,!0)},onInitialized:function(){d(this,!0)}});g.owlCarousel({margin:40,loop:!0,center:!0,nav:2<g.find(".slide-item").length,responsive:{0:{items:1,nav:!0},768:{items:1.5}},navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],onInitialized:function(){var a=this;e(this);var b=setInterval(function(){a&&(d(a,!0,function(b){a.$element.find(".owl-dots").css({top:b+"%"})},!0),
a.onThrottledResize(),clearInterval(b))},50)},onResized:function(){d(this,!0,function(a){this.$element.find(".owl-dots").css({top:a+"%"})},!0)}});b.owlCarousel({items:1,margin:10,nav:!1,mouseDrag:!1,onInitialized:function(){b.next(".gallery-info").children(".current-value").html("1/"+b.find(".owl-item").length)}}).on("changed.owl.carousel",function(a){b.next(".gallery-info").children(".current-value").html(a.item.index+1+"/"+a.item.count)});l.owlCarousel({margin:10,nav:4<l.find(".slide-item").length,
navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:1,nav:!0},480:{items:2,nav:!0},768:{items:3,nav:!0},1200:{items:4}}}).on("click",".owl-item",function(){b.trigger("to.owl.carousel",[a(this).index(),500,!0])})}function e(b){var c=b.items().length,d=b.$element.next(".custom-dots").children();d.length===c&&(b.$element.addClass("custom").find(".owl-dots").html(d.parent().html()).addClass("custom").children(".owl-dot").first().addClass("active"),
b.$element.on("click",".owl-dot",function(c){b.$element.trigger("to.owl.carousel",[a(this).index(),500,!0])}))}function d(b,d,e,f){var c=b.$element.find(".owl-nav"),g=b.$element.find(".owl-item.active:first picture").height();b=b.$element.height();var k=c.find(".owl-prev").height();d=100-(d?(b-g)/b*100:0);c.children().css({top:768>a(window).width()&&f?d+"%":d/2-k/b*d/2+"%"});e&&e(d)}function b(b){a(this).addClass(".image-gallery-content")}f.register({name:"image-gallery",api:{init:function(c){a(".js-image-gallery").each(b);
c.each(h)}},selector:".js-image-gallery"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){a(d).find("span.img-span-hide").show();a(d).find(".img-wrapper").carouFredSel({circular:!0,responsive:!1,infinite:!0,padding:null,items:{height:"100%",visible:"1"},auto:{items:1,easing:"linear",duration:8E4,timeoutDuration:0}});a(d).height(a(d).find(".img-span img").height());a(window).resize(function(){a(d).height(a(d).find(".img-span img").height())})}f.register({name:"panning-image",api:{load:function(a){a.each(h)}},selector:".panning-image .panning-wrapper"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(){""===g.val()?(k.prop("disabled",!0),k.val("")):k.prop("disabled",!1);k.selectpicker("refresh")}function e(a,b){return"media-library"!==a?(v.off("click"),a):"undefined"===typeof b||"media-gallery-event"!==b.type&&"submit_filter_event"!==b.type?"image":v.find("li.active").data("filtertype")}function d(b){t=a("input[name\x3d'type']").val();if("undefined"!==typeof t&&""!==t){if("undefined"===typeof b||"viewmore_event"!==b.type)z=1,m.empty();t=e(t,b);b={type:t,category:r.val(),year:g.val(),
month:k.val(),page:z};a.ajax({url:D,data:a.param(b)}).done(function(a){var b=Handlebars.compile(p);m.append(b(a.items));z=a.page+1;a.items&&a.page>=a.total?n.hide():n.show();a.items&&0<a.items.length?B.hide():B.show()}).error(function(a){throw a;})}}function b(){g=a(".selectpicker[name\x3d'year']");k=a(".selectpicker[name\x3d'month']");r=a(".selectpicker[name\x3d'category']");l=a(".btn-filter-submit");n=a(".view-more-link");p=a("#filterResultItemTemplate").html();m=a(".filter-results .filter-result-wrapper");
v=a(".filter-tabs ul");B=a(".no-result-msg");D="/services/api/page/filter";g.on("change",function(){h()});a(document).on("submit_filter_event viewmore_event media-gallery-event",d);l.on("click",function(){a(document).trigger("submit_filter_event")});n.on("click",function(b){b.preventDefault();a(document).trigger("viewmore_event")});if(v)v.find("li").on("shown.bs.tab",function(){var b=a(".selectpicker");b.val("");b.selectpicker("refresh");h();a(document).trigger("media-gallery-event")});h();d()}var c=
{},g,k,r,l,n,m,p,v,B,t,D,z=1;c.init=function(a){b()};f.register({name:"filter-form",api:c,selector:"div.filter-form"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:"tabs",api:{init:function(f){var e=document.location.hash;e&&a(".nav-tabs a[href\x3d"+e+"]").tab("show");f.each(function(d,b){d=document.location.hash;var c=a(".nav-tabs",b).height();a(b).find(".nav-tabs").height(c);if(d&&0<a(b).find(".nav-tabs a[href\x3d"+d+"]").length)return!0;a(b).find(".nav-tabs a:first").tab("show")})}},selector:".vm-tabs"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d).find(".dynamic-tabs-wrapper"),c=b.find(".dyn-tab-content"),g=b.find(".dyn-nav-tabs"),f=g.find(".dyn-tab");e=f.not(".dyn-tab-type-url");d=b.find(".dyn-tab-close button");var h=window.matchMedia("(max-width: 767px)").matches,l=b.data("tab-title-default-colour"),n=b.data("tab-subtitle-default-colour"),m=b.data("tab-default-bg-colour"),p=b.data("tab-hover-bg-colour"),v=b.data("tab-title-hover-colour"),B=b.data("tab-subtitle-hover-colour"),t=b.data("tab-outline-hover-colour"),
D=e.filter('[data-open-by-default\x3d"true"]').first(),z=b.data("scroll-opened-desktop"),C=b.data("scroll-opened-mobile"),y=window.location.hash?window.location.hash.substring(1):null,q=function(b){var d=c.find(".dyn-tab-snippet-content");a.ajax({url:b.attr("href")+".esi.html",headers:{"X-Snippet-Importer":!0},success:function(g){u(b,"hoverColours");d.html(g);b.addClass("active");h&&c.insertAfter(b);(h&&C||!h&&z)&&a("html, body").animate({scrollTop:Math.ceil(b.offset().top)},600);c.slideDown(600)}})},
x=function(){var a=g.find(".active");a.removeClass("active");c.hide();u(a,"defaultColours")},u=function(a,b){var c=a.find(".dyn-tab-title"),d=a.find(".dyn-tab-copy");"hoverColours"===b?(a.css("background-color",p),c.css("color",v),d.css("color",B),t&&a.css("box-shadow","inset 0 0 0 3px "+t)):"defaultColours"===b&&(a.css("background-color",m),c.css("color",l),d.css("color",n),t&&a.css("box-shadow","0px 2px 15px 0px rgba(0, 0, 0, 0.13)"))},E=function(){D.length&&!b.is(":hidden")&&q(D)};if(h){var F=
0;f.each(function(){var b=a(this).outerHeight();F=b>F?b:F});f.each(function(){a(this).css("min-height",F)})}f.on({mouseenter:function(){a(this).hasClass("active")||u(a(this),"hoverColours")},mouseleave:function(){a(this).hasClass("active")||u(a(this),"defaultColours")}});null!==y?(f=e.filter('[data-anchor\x3d"'+y+'"]'),f.length?q(f.first()):E()):E();e.on("click",function(b){b.preventDefault();b=a(this);if(b.hasClass("active"))return!1;x();q(b)});d.on("click",function(){x()})}f.register({name:"dynamic-tabs",
api:{load:function(a){a.each(h)}},selector:".dynamic-tabs"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){var b={},c=a(window),g=768<c.width(),f={player:0,mix:0,fun:0,"full-house":0,vip:0},h=function(b,c,d){var g=a(".tvlistings").attr("channel-data-url");return a.getJSON(g,function(g){a("#premium-channels-list").empty();d.empty();a.each(g.channels,function(g,e){g={packageName:e.tvTier,bundleName:e.bundle,channelName:e.channelName,channelGenre:e.genre,tvChannel:e.channel,tvPackage:e.tvPackage,isHD:e.hd,onDemand:e.onDemand,tvAnywhere:e.tvAnywhere,tvaLive:e.tvaLive,tvaOd:e.tvaOd,
movApp:e.skyMoviesApp,spoApp:e.skySportsApp,skyApps:e.skyApps,mostPopular:e.mostPopular,multiRoomStreaming:e.multiRoomStreaming,imageUrl:"/content/dam/virginmedia/dotcom/static/channel-list/tv-logos/"+e.logoName,hyphenatedName:e.tvTier.toLowerCase().replace(/ /g,"-"),hyphenatedChannel:e.channelName.toLowerCase().replace(/ /g,"-"),hyphenatedPackageName:e.tvTier.toLowerCase().replace(/ /g,"-").replace("m+","mplus")};e=e.howToBuy;var f="player mix fun full-house vip premium".split(" ").indexOf(g.hyphenatedPackageName);
f="\x3cli data-channelname\x3d'"+g.channelName+"' data-channelpackage\x3d'"+g.hyphenatedPackageName+"-package' data-genrevalue\x3d'"+f+"' data-addon\x3d'"+e+"' class\x3d'tvlistings-channels-list-channel "+g.hyphenatedPackageName+" "+g.isHD+"'\x3e\x3cdiv class\x3d'tvlistings-channels-list-channel--img'\x3e\x3cimg class\x3d'tvlistings-channels-list-channel--img-img' src\x3d'"+g.imageUrl+"' /\x3e\x3c/div\x3e\x3cspan class\x3d'tvlistings-channels-list-channel--title'\x3e"+g.channelName+"\x3c/span\x3e\x3c/li\x3e";
if("allChannels"===b||g[b]===c)"Premium"===g.packageName||"Subscription"===g.packageName||"Add on"===e?a(f).appendTo("#premium-channels-list"):a(f).appendTo(d)});e.updateTvChannelsDescription()})},l=function(){b.packages.on("click",function(){a(this).not(".is-current")&&(e.updatePackage(a(this)),e.positionReset())})},n=function(){b.filter.on("change",function(){e.updateChannel();e.positionReset()})},m=function(b){b.scroll(function(){e.reposition(a(this))});b.bind("touchmove",function(){e.reposition(a(this))}).bind("scroll",
function(){e.reposition(a(this))});b.resize(function(){e.reposition(a(this))})},p=function(){var b=a("#premium-channels-list"),c=a(".premiumchannels-title");0===b.children(":visible").length?(a(this).hide(),c.hide()):(a(this).show(),c.show())},v=function(){a("#premium-channels-list \x3e li").each(function(){var b=a(this).attr("data-genrevalue"),c=a(this).attr("data-channelname"),d=a("#standard-channels");c=d.find('li[data-channelname\x3d"'+c+'"]');if(!0===tvSettings.hideControls||!0===tvSettings.hidePackage||
!0===tvSettings.hideDropdown){var g="player-package mix-package fun-package full-house-package vip-package premium-package".split(" ").indexOf(tvSettings.dataPackage);g=-1==g?0:g}else g=a(".tvlistings-controls--packages \x3e .is-current").attr("data-packagevalue");"-1"===b?a(this).show():g>=b?(0<c.length?c.show():a(this).clone().appendTo(d),a(this).hide()):(c.hide(),a(this).show())})},B=function(b,c,d,g,e){b=parseInt(b);var f=a("#standard-channels"),h=a(".tv-nochannel-title");b<=c&&d===g?(f.find(e).hide(),
h.removeClass("hidden")):b>c&&d===g&&(f.find(e).show(),h.addClass("hidden"))},t=function(b){var c=b.attr("data-packagename"),d=b.attr("data-packagevalue"),g=a(".tvlistings-controls--filter--list \x3e option:selected").attr("data-genrename"),e=a("#standard-channels"),f=a(".tvlistings-controls--packages \x3e li");e.attr("data-package",c);f.removeClass("is-current");b.addClass("is-current");v();p();B(d,0,g,"tvaOd",'[data-channelname\x3d"Sky News"]')},D=function(){for(var a in f)f[a]=0},z=function(b){var c=
"";a(b).each(function(){c=a(this).attr("data-channelpackage").replace("-package","");"premium"!==c&&f[c]++})},C=function(){var b=a("#premium-channels-list"),c=a("#premium-channels-list").find("li");a(document).ajaxComplete(function(){0<b.children().length&&c.show();v();p()})},y=function(){var b=tvSettings.hidePackage,c=tvSettings.hideDropdown,d=tvSettings.hideLinks;tvSettings.hideControls&&(a(".tvlistings-controls").remove(),a(".tvlistings-channels").addClass("controls-hidden"));b&&(a(".tvlistings-controls--packages").remove(),
a(".tvlistings-controls--links").remove(),a(".tvlistings-controls").addClass("package-hidden"));c&&(a(".tvlistings-controls--filter").remove(),a(".tvlistings-controls").addClass("dropdown-hidden"));d&&a(".tvlistings-controls--links").remove()},q=function(){b.preselectLink.on("click",function(){if(!1===tvSettings.hidePackage){var b=a(".tvlistings-controls--packages"),c=a("#js-accordion").hasClass("opened");t(b);c||a("#js-accordion .tab-link").click()}})},x=function(){a(b.anchorsToPackages).on("click",
function(b){var c=a(this).attr("href").substring(1);c=a(".tvlistings-controls--packages \x3e li .tvlistings-controls--package-subtitle2:contains('"+c+"')");if(0<c.length){b.preventDefault();b=a("#js-accordion .footer-expand");if(b.hasClass("closed")){var g=a("#js-accordion-panel-1").outerHeight();d.expandContent(b,g)}t(c.parents("li"));e.positionReset()}})},u=function(){var b=a("#standard-channels"),c=a(".tvlistings-channels-list"),d=a(".tvlistings-controls--filter"),g=tvSettings.dataPackage,e=tvSettings.dataGenreName,
f=tvSettings.dataGenreValue,k=d.find("option[data-genrename\x3d"+e+"][data-genrevalue\x3d"+f+"]");d=a(".tvlistings-channels");c.attr("data-package",g);a(k).attr("selected","selected");h(e,f,b);C();b=a(".tvlistings-controls--packages");if(!1===tvSettings.hideControls||!1===tvSettings.hidePackage)b.find("li.is-current").removeClass("is-current"),b.find('[data-packagename\x3d"'+g+'"]').addClass("is-current");a('\x3ch3 class\x3d"tv-nochannel-title hidden"\x3eSorry, there are no channels available for these options\x3c/h3\x3e').prependTo(d)},
E=function(){var b=a(".tvlistings-controls--packages");tvSettings.dataPackage=b.find(".is-current").attr("data-packagename")};return{init:function(){var d=a(".tvlistings-controls--packages \x3e li"),e=a(".tvlistings-controls--filter--list"),f=a(".js-tvlistings-preselect-link"),h=a('.richText a[href^\x3d"#"]');"undefined"!==typeof tvSettings&&null!==tvSettings&&(E(),u(),y());b.packages=d;b.filter=e;b.scroll=c;b.preselectLink=f;b.anchorsToPackages=h;l();n();q();x();c.load(function(){m(c)});g&&a(".tvlistings-mobcontrols").remove()},
triggersPackagesEvent:l,triggersFilterEvent:n,triggersLinkPreselect:q,reposition:function(b){var c=a(".tvlistings").offset().top,d=a(".tvlistings-controls"),g=d.outerHeight(),e=a("#js-accordion"),f=a(".tvlistings"),h=f.outerHeight(),k=a(".tvlistings-channels").outerWidth();b=b.scrollTop();var l=2*a(".tvlistings-channels-list-channel").height();h=c+h-l;d.css("width",k);e.hasClass("closed")||(b<c||b>h?b>h?d.removeClass("is-sticky").addClass("is-stuck"):(f.css("padding-top","0"),d.removeClass("is-sticky")):
(d.removeClass("is-stuck").addClass("is-sticky"),f.css("padding-top",g+20)))},updateChannel:function(){var b=1>a(".tvlistings-controls--packages").length?a(".tvlistings").attr("data-packagevalue"):a(".tvlistings-controls--packages \x3e .is-current").attr("data-packagevalue"),c=a(".tvlistings-controls--filter--list \x3e option:selected").attr("data-genrename"),d=a(".tvlistings-controls--filter--list \x3e option:selected").attr("data-genrevalue"),g=a("#standard-channels"),e=g.find("li"),f=a("#premium-channels-list").find("li"),
k=a(".tv-nochannel-title");e.remove();f.remove();k.addClass("hidden");h(c,d,g).then(function(){v();p();B(b,0,c,"tvaOd",'[data-channelname\x3d"Sky News"]')})},updatePackage:t,updateTvChannelsDescription:function(){D();z(a("#standard-channels li"));z(a("#premium-channels-list li"));var b=a("span.filter-option").text(),c=0,d,g;a(a(".tvlistings-controls--packages li")).each(function(){d=a(this).attr("data-packagename").replace("-package","");c+=f[d];g=Handlebars.compile(a("#tv-packages-description-template").html());
g=g({selectedGenre:b,channelsNo:c});a(this).find(".tvlistings-controls--packages-title").html(g)})},positionReset:function(){a("html, body").animate({scrollTop:a("#tvlistings-top").offset().top},300)}}}(),d=function(){var b=function(b,c){var d=b.parents(".tab");b=d.children(".tab-panel");var g=a(".tvlistings-controls"),e=a(".tvlistings"),f=a(".premiumchannels-title");d.hasClass("opened")?(d.removeClass("opened").addClass("closed"),d.hasClass("promo")?(g.removeClass("is-sticky"),f.hide(),b.animate({height:c},
300),e.css("padding-top",0)):b.slideUp(300)):(g.css("width","100%"),d.hasClass("promo")&&(b.css("height","auto"),g.animate({"margin-top":"0"},300)),d.removeClass("closed").addClass("opened"),b.slideDown(300,function(){0<a("#premium-channels-list li:visible").length&&d.hasClass("promo")&&f.show()}))},c=function(c,d){var g=a(".tab-panel");a("#js-accordion").hasClass("closed")&&g.css("display","none");b(c,d);c=a(".footer-expand");d=c.find("h4 span");g=c.find("i");var e=a("#tvlistings-top").offset().top;
c.hasClass("closed")?(c.removeClass("closed").addClass("opened"),d.html("Collapse"),g.removeClass("fa-plus").addClass("fa-minus")):(c.removeClass("opened").addClass("closed"),d.html("Expand"),g.removeClass("fa-minus").addClass("fa-plus"),a("html, body").animate({scrollTop:e},300))};return{init:function(b){var d=a("#js-accordion .tab-link"),g=a("#js-accordion .footer-expand");d.click(function(d){d.preventDefault();c(a(this),b)});g.click(function(d){d.preventDefault();c(a(this),b)})},expandContent:c}}();
h.load=function(b){b&&0!==b.length&&(e.init(),b=a("#js-accordion-panel-1").outerHeight(),d.init(b))};f.register({name:"channel-list",api:h,selector:".tv-channel-list-old"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){function d(a,b,c){var d;return function(){var g=this,e=arguments,f=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(g,e)},b);f&&a.apply(g,e)}}var b=a(".tvlistings").data();if(b){var c=b.defaultChannelName,g=b.defaultChannelValue,e=a(".tv-channel-list .selectpicker"),f=e.find("option[data-value\x3d'"+g+"'][data-name\x3d'"+c+"']").text(),h=0,n=768>h,m=a(".table-row-wrapper"),p=[],v=0,B,t=b.bundlesArray.replace(/,*$/g,"").split(","),D=t.length;b=a(".tvlistings").attr("channel-data-url");
var z=a(window).width(),C=!1;e.val(f);e.selectpicker("refresh");a.getJSON(b).done(function(a){B=a;y(c,g)});var y=function(a,b,c){var d=c?c.toLowerCase():"",g=d.slice(0,3),e=[],f=0;q(p);q(e);for(var h=function(a,b){for(var c=0;c<D;c++)a[c].bundleLabel===b.bundle&&(a[c].channels.push({logoPath:b.logoName,sortid:b.sortid,channelName:b.channelName}),a[c].channelsNo=a[c].channels.length)},k=0;k<B.channels.length;k++){c=B.channels[k];var l=c.channelName.toLowerCase();if(c[a]===b||"seeAllChannels"===a)l.includes(d)?
h(p,c):l.includes(g)&&h(e,c)}p.forEach(function(a){f+=a.channelsNo});0===f&&(p=e);x();u(p);E()},q=function(a){for(var b=0;b<D;b++)a.push({bundleLabel:t[b],channelsNo:0,channels:[]})},x=function(){for(var b=1;b<D;b++)p[b].channelsNo+=p[b-1].channelsNo;v=p[D-1].channelsNo;h=a(window).width();n=768>h?!0:!1;for(b=0;b<D;b++)p[b].channelsNo=n?"("+p[b].channelsNo+")":p[b].channelsNo+(1===p[b].channelsNo?" channel":" channels")},u=function(a){for(var b=function(a){a.sort(function(a,b){return a.sortid-b.sortid})},
c=0;c<a.length;c++)b(a[c].channels)},E=function(){var b=a("#table-channels-compare-template").html();b=Handlebars.compile(b);C="Show less TV Channels"!==a(".button-show-more-less").text()||m.hasClass("less-content")?!1:!0;b=b({bundles:p});a(".table-channels-content").html(b);C?(m.removeClass("less-content"),a(".table-row-content").removeClass("small"),a(".gradient-opacity").remove(),a(".table-row:nth-child(5)").removeClass("gradient-wrapper"),a(".button-show-more-less").html("Show less TV Channels")):
(a(".table-row:nth-child(5)").addClass("gradient-wrapper"),a("\x3cdiv class\x3d'gradient-opacity'\x3e\x3c/div\x3e").appendTo(".gradient-wrapper"));b=0!==a("#channelSearch").val().length;var c=a(".search-error-message"),d=a(".button-show-more-less-wrapper"),g=a(".tv-channels-table");1>v&&(g.addClass("hidden-content"),b&&c.removeClass("hidden-content"));5>v&&(d.addClass("hidden-content"),a(".gradient-opacity").remove());b=100/(D+1);a(".sticky-left").css("width",b+"%");a(".sticky-left + div").css("margin-left",
b+"%");b=a(".table-header .column-width")[0].getBoundingClientRect().width;a(".table-header").css("width",(D+1)*b);a(".table-body").css("width",(D+1)*b);F();G()},F=function(){var b=80*(D+1),c=a(".table-row-wrapper .horizontal-scroll");h<b?(c.addClass("horizontal-opacity-right"),a(".horizontal-opacity-right").css("left",h-20)):c.removeClass("horizontal-opacity-right");a(".table-row-wrapper").scroll(function(){var d=a(".table-row-wrapper").scrollLeft();a(".table-row-wrapper").css("left",-d);a(".table-row-wrapper .table-header").css("left",
-d);h<b&&0<d?(c.removeClass("horizontal-opacity-right"),c.addClass("horizontal-opacity-left"),a(".horizontal-opacity-left").css("left",a(".table-row .column-width").width()+2)):(c.addClass("horizontal-opacity-right"),c.removeClass("horizontal-opacity-left"),a(".horizontal-opacity-right").css("left",h-20))})},G=function(){a(window).on("scroll swipe tap",function(){var b=a(".table-channels-compare .tv-channels-table")?a(".table-channels-compare .tv-channels-table").offset().top:0,c=a(".table-header"),
d=a(".extra-layer"),g=n?0:a(".serviceability-content").hasClass("fix-top")?a(".serviceability-container").height():0,e=a(".table-row-content").height(),f=a(window).scrollTop()+g;f>=b&&f<=b+e-g?(c.addClass("fixed"),d.addClass("extra-fixed"),a(".extra-fixed").css("top",0),a(".fixed").css("top",g),a(".table-row-content").css("padding-top","72px")):f>b+e-g?(b=g-(f-(b+e-g)),a(".fixed").css("top",b),a(".extra-fixed").css("top",b)):f<b&&(c.removeClass("fixed"),d.removeClass("extra-fixed"),a(".table-row-content").css("padding-top",
"0px"))})};a(".table-channels-compare .searchButton").on("click",function(b){b.preventDefault();n&&(a(".search-input-wrapper").css("left","0"),a(".search-backdrop").addClass("activate"))});a(".table-channels-compare .search-backdrop, .table-channels-compare a.tvlistings-controls--filter--list-item-new").on("click",function(b){b.preventDefault();a(".search-input-wrapper").css("left","calc(-85% + 55px)");a(".search-backdrop").removeClass("activate")});a(document).on("click",".dropdown-backdrop",function(){a(".tvlistings-controls").removeClass("dropDownPadding")});
a(document).on("click",".table-channels-compare ul.dropdown-menu.inner",function(){a(".tvlistings-controls").removeClass("dropDownPadding")});a(document).on("click",".table-channels-compare button.btn.dropdown-toggle.btn-default",function(){a(".tvlistings-controls").addClass("dropDownPadding")});a("#channelSearch").on("input",d(function(){var b=a(".tvlistings-controls--filter--list \x3e option:selected").data();p.length=0;y(b.name,b.value,a("#channelSearch").val())},500));a(".table-channels-compare").on("click",
".table-channels-compare .tvlistings-controls--filter--list-item-new ",function(){p.length=0;var b=a(".tvlistings-controls--filter--list \x3e option:selected").data();y(b.name,b.value);a("#channelSearch").val("")});a(document).on("click",".button-show-more-less ",function(b){var c=n?0:a(".serviceability-content").hasClass("fix-top")?a(".serviceability-container").height():0;c=a(".table-channels-compare .tv-channels-table").offset().top-c;"Show more TV Channels"===b.target.innerHTML?(m.removeClass("less-content"),
a(".table-row-content").removeClass("small"),a(".gradient-opacity").remove(),a(".button-show-more-less").html("Show less TV Channels"),a(".table-row:nth-child(5)").removeClass("gradient-wrapper")):(m.addClass("less-content"),a(".table-row-content").addClass("small"),a(".table-row:nth-child(5)").addClass("gradient-wrapper"),a("\x3cdiv class\x3d'gradient-opacity'\x3e\x3c/div\x3e").appendTo(".gradient-wrapper"),a(".button-show-more-less").html("Show more TV Channels"),a(window).scrollTop(c))});e=d(function(){if(a(window).width()!=
z){h=a(window).width();p.length=0;var b=a(".tvlistings-controls--filter--list \x3e option:selected").data(),c=a("#channelSearch").val();y(b.name,b.value,c);z=a(window).width()}},100);window.addEventListener("resize",e)}};h.load=function(a){a.length&&e()};f.register({name:"table-channels-compare",api:h,selector:".table-channels-compare"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:"accordion-group",api:{load:function(f){if(f.length)a:if(f=a.cookie("cms.vm.user.reg.data")||a.cookie("cms.vm.user"),f){try{var e=JSON.parse(f)}catch(d){break a}e.currentAddress&&"40VC"===e.currentAddress.campaign&&a(".is40VillageChallenge").removeClass("hidden")}}},selector:".accordion-group"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){a(".manualAddressForm").find('input[name!\x3d"postcode"]').on("input propertychange",function(){var b=a(this),c=b.val().replace(/[!$%^&*\\+={}\[\];"<>?\/~|]/g,"");b.val(c)})}function e(){var b=a(".manualAddressForm");if(b.length)b.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),b={currentAddress:{}},b.currentAddress.manualEntry=!0,b.currentAddress.postcode=a(".manual-address-postcode").val().replace(/\s+/g,
""),b.currentAddress.displayAddress=a(".manual-address-building-number-name").val()+","+a(".manual-address-street-name").val()+","+b.currentAddress.postcode,b.currentAddress.premiseId=null,jQuery.cookie("cms.vm.user",JSON.stringify(b),{path:"/"}),window.location.href=a(this).data("redirect")+"?postcode\x3d"+b.currentAddress.postcode)})}function d(){for(var a=decodeURIComponent(window.location.search.substring(1)).split("\x26"),b=0;b<a.length;b++){var d=a[b].split("\x3d");if("postcode"==d[0])return void 0===
d[1]?!0:c.getFormattedPostcode(d[1])}}var b={},c=common.cmsUtils;b.load=function(){a(".manual-address-postcode").val(d());e();h()};f.register({name:"cms-manual-address-form",api:b,selector:".manualAddressForm"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a){var d=!1;a&&a.registered&&a.currentAddress&&a.currentAddress.c40VC&&(d=!0);return d}f.register({name:"timeline",api:{init:function(e){e=a.cookie("cms.vm.user.reg.data");e=JSON.parse(e);if(h(e)&&(e=e.currentAddress.communityId)){var d=window.location.pathname;e=d.substring(0,d.indexOf("postcode-checker"))+"postcode-checker/timelines/"+e+".esi.html";a.ajax({async:!0,url:e,success:function(b){a(".cms-timeline").html(b)}})}}},selector:".vm-timeline"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e={component:"contact-us-navigation",container:"contact-us-nav",panelContent:"contact-us-nav--panel-content",activePanel:"contact-us-nav--selection-panel-active",topicsPanel:"contact-us-nav--topics-panel",topicsPanelInit:"contact-us-nav--topic-panel-init",categoryPanel:"contact-us-nav--categories-panel",item:"contact-us-nav--item",suggestionsPanel:"contact-us-nav--suggestions-panel",panelTitle:"contact-us-nav--panel-title",panelTitleActive:"contact-us-nav--panel-title-active",
suggestionLinksWrapper:"contact-us-nav--suggestion-links-wrapper",askCommunity:"contact-us-nav--ask-community",askCommunityLink:"contact-us-nav--ask-community-link",askCommunityText:"contact-us-nav--ask-community-text",selected:"contact-us-nav--selected",introPanel:"contact-us-nav--introduction-panel",rstButton:"contact-us-nav--restart",contactOptions:"contact-us-nav--contact-options",contactOption:"contact-us-nav--contact-option",contactChatOnline:"contact-us-nav--web-chat-option",contactOptionActive:"contact-us-nav--contact-option-active",
contactRecommended:"contact-us-nav--recommended",contactIcon:"contact-us-nav--contact-icon",contactText:"contact-us-nav--contact-text",webChatOption:"contact-us-nav--web-chat-option",callUsOption:"contact-us-nav--call-us-option",emailUsOption:"contact-us-nav--email-us-option",writeToUsOption:"contact-us-nav--write-to-us-option",infoPanelWrapper:"contact-us-nav--info-panel-wrapper",infoPanelLinesOpen:"contact-us-nav--info-panel-lines-open",infoPanelInfoContainer:"contact-us-nav--info-container",infoPanelOpen:"contact-us-nav--info-panel-open",
infoTitle:"contact-us-nav--info-panel-title",infoPaneItemHeader:"contact-us-nav--info-panel-item-header",infoText:"contact-us-nav--info-panel-text",infoTextLowercase:"contact-us-nav--info-panel-text-lowercase",infoFootNote:"contact-us-nav--info-panel-footnote",infoPanel:"contact-us-nav--info-panel",infoIcon:"contact-us-nav--info-panel-icon",callUsInfo:"contact-us-nav--call-us-info",writeToInfo:"contact-us-nav--write-to-us-info",header:"contact-us-nav--header",slideIn:"slide-in",closeWrapperMobile:"close-wrapper-button",
modifiableTile:"modifiable-tile",slideOut:"slide-out",categorySlider:"contact-us-nav--categories-slider",suggestionsSlider:"contact-us-nav--suggestions-slider",chatOnline:"calendar",chatOnlineMessage:"availability-message-placeholder",chatOnlineStart:"chat-online--start-chat"},d={animation:"animationend","-o-animation":"oAnimationEnd","-moz-animation":"anomationend","-webkit-animation":"webkitAnimationEnd"},b={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},
c,g,k=function(){var a=document.createElement("div"),b;for(b in d)if("undefined"!==typeof a.style[b])return a=d[b];return"animationend"},r=function(){var a=document.createElement("div"),c;for(c in b)if("undefined"!==typeof a.style[c])return a=b[c];return"transitionend"},l=function(){var b,d,f,h,l,t,D,z,C,y,q,x,u,E,F={"chat-online-message":{},"chat-online":{},category:{},suggestion:{},getInTouch:{},"call-us":{}},G,A,H={L1:null,L2:null},N=!1,I=!1,M=function(b,c){if(E.hasOwnProperty(b))return b=Handlebars.compile(E[b]),
c.OCSS=c.OCSS||{},a.extend(c.OCSS,e),b(c)},J=function(a){var b=a.parents(".contact-us-nav--contact-options").attr("id"),c=a.attr("data-type"),d=G.articles[b.split("_")[1]].content.communicationMethods,g=function(a){return d.filter(function(b){return b.type===a})[0]},f={"call-us":function(){var a=g("call-us");F["call-us"][b]||(F["call-us"][b]=M("call-us",a));C.html(F["call-us"][b])},"web-chat":function(){var b=g("chat-online");a.attr("data-queue");b={today:{hour:moment().tz("Europe/London").hour(),
day:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[moment().tz("Europe/London").day()]},openHours:{Monday:b.day1,Tuesday:b.day2,Wednesday:b.day3,Thursday:b.day4,Friday:b.day5,Saturday:b.day6,Sunday:b.day7},open:!1,available:!1};var c=b.today.hour;b.open=c>=b.openHours[b.today.day].from&&c<=b.openHours[b.today.day].to;F["chat-online"]=M("chat-online",b);C.html(F["chat-online"]);window.lpTag.newPage(window.location.href,{section:["contactus",Y()]})},"email-us":function(){var a=
g("email-us");a.openedInNewWindow?window.open(a.url):window.location=a.url},"write-to-us":function(){var a=g("write-to-us");F["write-to-us"]||(F["write-to-us"]=M("write-to-us",a));C.html(F["write-to-us"])}};A=a;A.addClass(e.contactOptionActive);f.hasOwnProperty(c)&&f[c].call(null);C.hasClass(e.infoPanelOpen)||C.addClass(e.infoPanelOpen)},Q=function(){A&&(A.removeClass(e.contactOptionActive),C.removeClass(e.infoPanelOpen),A=null)},R=function(b){var c=a(b.currentTarget);b.preventDefault();A&&A.removeClass(e.contactOptionActive);
J(c)},S=function(){N=!1;y.one(k()+" "+r(),function(){N||(l.addClass("hide").removeClass(e.activePanel).find("."+e.panelTitle).removeClass(e.panelTitleActive),y.removeClass(e.slideIn),f.addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive),D.show(),z.addClass("hide"),y.off(k()+" "+r()))});y.addClass(e.slideOut);u=!1;H.L1=null;f.find(".first-level").addClass(e.topicsPanelInit)},T=function(b){var c=a(b.target),g=c.parents("."+e.topicsPanel).find("."+e.modifiableTile);b.preventDefault();
x?x.is(c)&&(x.removeClass(e.selected),x=!1):x=c;u&&O();x?(x.removeClass(e.selected),x=c,x.addClass(e.selected),g.attr("title",b.currentTarget.innerText),g.next("."+e.closeWrapperMobile).removeClass("hide").show(),c.parents("."+e.panelContent).addClass("hidden-xs hidden-sm"),a("."+e.categoryPanel).find("."+e.closeWrapperMobile).addClass("hide").end().find("."+e.panelContent).removeClass("hidden-xs hidden-sm"),b=c.attr("data-item"),g={topicIndex:b},N=!0,D.hide(),z.removeClass("hide"),G=d[b],H.L1=c.attr("data-journey")||
null,F.category[b]||(a.extend(g,G),F.category[b]=M("category",g)),l.find("."+e.panelContent).html(F.category[b]),f.removeClass(e.activePanel).find("."+e.panelTitle).removeClass(e.panelTitleActive),l.removeClass("hide"),1024>=a(window).width()&&h.get(0).scrollIntoView(),y.removeClass(e.slideOut).addClass(e.slideIn),l.addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive),ca("custom-scrollbar-level-two"),f.find(".first-level").removeClass(e.topicsPanelInit)):(g.attr("title",g.data("title")),
c.parents("."+e.topicsPanel).find("."+e.closeWrapperMobile).addClass("hide"),c.parents("."+e.panelContent).removeClass("hidden-xs hidden-sm"),S())},K=function(b){a(window).on("orientationchange",function(){K(b)});var d=b.attr("data-item"),f=b.attr("data-topic"),h=d+"-"+f,k=(G&&G.articles&&G.articles[d]&&G.articles[d]).content||{};d=f+"_"+d;H.L2=b.attr("data-journey")||null;k.id=d;I=!0;F.suggestion[h]||(F.suggestion[h]=M("suggestion",k));h=F.suggestion[h];k.communicationMethods&&k.communicationMethods.length&&
(k.columnSize=12/k.communicationMethods.length,!F.getInTouch[d]&&k&&(F.getInTouch[d]=M("getInTouch",k)),F.getInTouch[d]&&(h+=F.getInTouch[d]));k=t.find("."+e.panelContent);k.html(h);l.removeClass(e.activePanel).find("."+e.panelTitle).removeClass(e.panelTitleActive);t.removeClass("hide").addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive);q.removeClass(e.slideOut).addClass(e.slideIn);f=k.find(".ask-community").height();h=k.find(".contact-us-nav--ask-community-link").height();
d=k.find(".contact-us-nav--ask-community-text").height();var r=k.find(".contact-us-nav--contact-options").height();f=c-f-r-15;r="landscape-primary"===screen.orientation.type||"landscape-secondary"===screen.orientation.type;if(g&&615>c&&d<h||g&&615<c&&r)f-=20;k.find(".suggested-links").height(f);ca("suggested-links");"object"==typeof lpTag&&"object"==typeof window.lpTag||a("#lpPresent").removeClass("hidden")},O=function(){I=!1;q.one(k()+" "+r(),function(){I||(t.addClass("hide").removeClass(e.activePanel+
" "+e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),A=null,q.off(k()+" "+r()))});q.addClass(e.slideOut);H.L2=null;Q();a("window").off("orientationchange")},U=function(b){var c=a(b.target),d=c.parents("."+e.categoryPanel).find("."+e.modifiableTile);b.preventDefault();u?u.is(c)&&(u.removeClass(e.selected),l.addClass(e.activePanel).find("."+e.panelTitle).addClass(e.panelTitleActive),u=!1):u=c;u?(u.removeClass(e.selected),u=c,u.addClass(e.selected),d.attr("title",b.currentTarget.innerText),
d.next("."+e.closeWrapperMobile).removeClass("hide"),c.parents("."+e.panelContent).addClass("hidden-xs hidden-sm"),K(c)):(d.attr("title",d.data("title")),c.parents("."+e.categoryPanel).find("."+e.closeWrapperMobile).addClass("hide"),c.parents("."+e.panelContent).removeClass("hidden-xs hidden-sm"),O());Q()},Z=function(){a.ajax({url:eGainCheckAuthURL,dataType:"xml"}).done(function(b){var c=!1;b=a(b).find("saml\\:AttributeStatement saml\\:Attribute, Attribute");for(var d in b)if("vmContactEmailAddress"==
a(b[d]).attr("Name")&&a(b[d]).find("saml\\:AttributeValue, AttributeValue").text()){c=!0;break}c?(c=$j('[data-namespace\x3d"contact-us-nav--chat-online-modal"]').find(".start-chat-modal--continue").attr("href"),c=0>c.indexOf("?")?c+"?isLoggedIn\x3d1":c+"\x26isLoggedIn\x3d1",window.location=c):P()}).fail(P)},P=function(){var a=$j('[data-namespace\x3d"contact-us-nav--chat-online-modal"]'),b={},c={};var d=t.find("."+e.contactOptions+' [data-type\x3d"web-chat"]').attr("data-queue");c.entrypointId=d;b.data=
c;a.length&&a.data&&a.data().open&&a.data().open(b)},Y=function(){if("object"!=typeof H||null===H.L1||null===H.L2)throw Error("Invalid LivePerson service journey path");return H.L1+"__"+H.L2},W=function(){x.trigger("click")},aa=function(b){var c=a(b.target),d=c.parents("."+e.topicsPanel).length?c.parents("."+e.topicsPanel):c.parents("."+e.categoryPanel);b.preventDefault();c.parents("."+e.topicsPanel).length&&a("."+e.categoryPanel).find("."+e.panelContent).removeClass("hidden-xs hidden-sm");c.parent().addClass("hide");
d.find("."+e.panelContent).removeClass("hidden-xs hidden-sm").children().find("."+e.selected).trigger("click")},ca=function(b){a("."+b).customScrollbar({skin:"default-skin",hScroll:!1,updateOnWindowResize:!0})};return{init:function(){b=a("."+e.container);b.length&&(E={"chat-online-message":a("#chat-online-message-template").html(),"chat-online":a("#chat-online-template").html(),category:a("#category-template").html(),suggestion:a("#suggestion-template").html(),getInTouch:a("#getInTouch-template").html(),
"call-us":a("#call-us-template").html(),"write-to-us":a("#write-to-us-template").html()},d=aContactUsNavigationData||[],f=a("."+e.topicsPanel),l=a("."+e.categoryPanel),t=a("."+e.suggestionsPanel),y=a("."+e.categorySlider),q=a("."+e.suggestionsSlider),D=a("."+e.introPanel),z=a("."+e.rstButton+" a"),C=a("."+e.infoPanelWrapper),h=a("."+e.header),b.find("."+e.topicsPanel).on("click","."+e.item,T),b.find("."+e.categoryPanel).on("click","."+e.item,U),b.find("."+e.rstButton).on("click",W),b.find("."+e.closeWrapperMobile).on("click",
aa),b.find("."+e.suggestionsPanel).on("click","."+e.contactOption,R),b.find("."+e.infoPanelWrapper).on("click","."+e.chatOnlineStart,Z),c=a(".first-level").height()+50,g=a(".first-level ul").find("li").hasClass("fixed")?!0:!1,a(".custom-height").height(c-15),g?(a(".custom-height-scroll").height(c-15-50),615>c&&a(".custom-height-first").height(c-15-50)):(a(".first-level .contact-us-nav--panel-content").removeClass("fixed-padding"),a(".custom-height-scroll").height(c-15)),ca("custom-scrollbar"))}}}();
h.load=function(a){a.length&&l.init()};f.register({name:"contact-us-navigation",api:h,selector:"."+e.component})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){var c={},d=b.serializeArray();c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value)});return c}function e(){var c=a(".cms-wayleave-form");b();a(".get-in-touch").on("click",function(){c.removeClass("hidden");a(this).hide()});a(".close-form").on("click",function(){c.addClass("hidden");a(".get-in-touch").show()});a(".close-feedback-message").on("click",
function(){a(".form-request-feedback").addClass("hidden");a(".get-in-touch").show()});c.find(".selectpicker").selectpicker("refresh");if(c.length)c.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){var g=a(this);b.isDefaultPrevented()||(b.preventDefault(),a.ajax({type:"POST",url:g.prop("action"),cache:!1,dataType:"json",data:JSON.stringify(h(g)),contentType:"application/json",success:function(b){d("success");c.addClass("hidden");b=a(".cms-wayleave-form");
b[0].reset();b.find(".submit-cta button").addClass("disabled");"undefined"!==typeof grecaptcha&&grecaptcha.reset()},error:function(a){d("error");c.addClass("hidden")}}))})}function d(b){var c=a(".cms-wayleave"),d=c.find(".form-request-feedback");d.removeClass("success error").addClass(b);d.find("p").hide().end().find("."+b).show();d.removeClass("hidden");a("html, body").animate({scrollTop:c.offset().top},500)}function b(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=
!!b&&c.trigger("click")}}f.register({name:"cms-wayleave",api:{load:function(a){a.each(e)}},selector:".cms-wayleave"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){var c={},d=b.serializeArray();c.uprn=p;c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value);"consent"==this.name&&"on"==this.value&&(c[this.name]=!0)});return c}function e(){v.find(".selectpicker").selectpicker("refresh");b();B&&c();if(v.length)v.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){var c=
a(this);if(!b.isDefaultPrevented()){b.preventDefault();var g=v.find(".cms-horizontal-submit");g.attr("disabled",!0);a.ajax({type:"POST",url:c.prop("action"),cache:!1,dataType:"json",data:JSON.stringify(h(c)),contentType:"application/json",success:function(a){"Wayleave Consent is already given"==a.reason?d("already-registered"):(d("success"),v.find(".form-content").addClass("hidden"),t.addClass("hidden"),v.find(".form-inline").removeClass("separator"))},error:function(){d("backend-error");g.attr("disabled",
!1)}})}})}function d(b){var c=v.find(".form-inline .form-request-feedback"),d=v.find(".form-inline .form-request-thank-you");"success"==b?(c.addClass("hidden"),d.removeClass("hidden")):(c.find("span.error").addClass("hidden"),c.find("."+b).removeClass("hidden"),c.removeClass("hidden"));a("html, body").animate({scrollTop:v.offset().top},500)}function b(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}function c(){var a=t.find(".select-group-association"),
b=t.find(".select-group-premises"),c=t.find(".select-group-freehold"),d=t.find(".select-group-tenancy"),e=a.find("select"),f=b.find("select"),h=c.find("select"),p=d.find("select");e.on("change",function(){k(t);switch(e.val()){case "freehold":r(b);break;case "leasehold":r(b);break;case "tenant":r(d);break;default:k(t)}});f.on("change",function(){if("freehold"==e.val())switch(f.val()){case "1":l("show");g(c);break;case "2":l("hide");g(c);r(c);break;case "more than 2":l("hide");g(c);r(c);break;default:l("hide"),
g(c)}"leasehold"==e.val()&&(""!==f.val()?l("show"):l("hide"))});h.on("change",function(){switch(h.val()){case "only my premises":l("show");break;case "the entire building":l("show");break;default:l("hide")}});p.on("change",function(){switch(p.val()){case "less than 12 months":l("hide");n("show");break;case "more than 12 months":l("show");n("hide");break;default:l("hide"),n("hide")}})}function g(a){a.find("select").val("");a.find(".selectpicker").selectpicker("refresh");a.addClass("hidden")}function k(a){a.find(".select-group:not(:first)").find("select").val("");
a.find(".selectpicker").selectpicker("refresh");a.find(".select-group:not(:first)").addClass("hidden");l("hide")}function r(a){a.removeClass("hidden")}function l(a){switch(a){case "hide":v.find(".form-inline").addClass("hidden");n("hide");break;case "show":v.find(".form-inline").removeClass("hidden")}}function n(a){switch(a){case "hide":v.find(".consent-customer-type-fields .form-request-feedback").addClass("hidden");break;case "show":v.find(".consent-customer-type-fields .form-request-feedback").removeClass("hidden")}}
var m={},p=common.cmsUtils.getParametersFromUrl().uprn,v=a(".cms-wayleave-consent-form"),B=v.parents(".wayleave-upfront-consent-form").hasClass("wayleave-consent-customer-type"),t=a(".cms-wayleave-consent-form .consent-customer-type-fields");m.load=function(a){a.each(e)};f.register({name:"cms-wayleave-consent",api:m,selector:".cms-wayleave-consent"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){this.settings={autoplay:1,autohide:1,modestbranding:0,rel:0,showinfo:0,controls:0,disablekb:1,enablejsapi:0,iv_load_policy:3,startSeconds:0,suggestedQuality:"hd720"};this.tvs={};this.imageContentElement=null;this.videoTagId=0;this.tv=a(".tv");this.mask=this.tv.find(".mask");this.videoBanner=a(".video-banner");this.isDevice=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};e.prototype={checkIfDevice:function(){this.isDevice&&
this.mask.removeClass("loading").addClass("no-pointer").next(".tv-placeholder").addClass("active")},changeVideoState:function(){if(this.tvs.length&&!this.isDevice){this.imageContentElement.is(":visible");for(var a in this.tvs)this.tvs[a].$change()}},onResize:function(){var d=this;a(window).on("load resize",function(){d.vidRescale();d.changeVideoState()})},createIframe:function(){var a=document.createElement("script");a.src="https://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];
b.parentNode.insertBefore(a,b)},onPlayerStateChange:function(d,b){var c=a("#"+b);1===d.data?(c.addClass("active"),this.mask.removeClass("loading")):0===d.data&&this.tvs[b].seekTo(0)},init:function(){var d=this;window.onYouTubeIframeAPIReady=function(){var b=a(".video-tile-wrapper");b.length&&(b.each(function(){var b=a(this),g=b.find(".tv-placeholder"),e="video-tile-"+d.videoTagId,f=g.attr("video-id");g.attr("id",e);d.imageContentElement=b.find(".image-content");d.tvs[e]=new YT.Player(e,{videoId:f,
events:{onReady:function(a){a.target.mute();d.vidRescale();d.changeVideoState()},onStateChange:function(a){d.onPlayerStateChange(a,e)}},playerVars:d.settings});d.videoTagId++}),d.checkIfDevice())}},vidRescale:function(){if(this.videoBanner.length){var d=this,b=a(window).width();this.videoBanner.each(function(){var c=a(this),g=c.height()+200,e=c.find(".screen");c=d.tvs[c.find("iframe").attr("id")];b/g>16/9?(c&&c.setSize(b,b/16*9),e.css({left:"0px"})):(c&&c.setSize(g/9*16,g),e.css({left:-(e.outerWidth()-
b)/2}))})}}};h.init=function(a){a.length&&(a=new e,a.createIframe(),a.init(),a.onResize())};f.register({name:"youtube",api:h,selector:".video-tile-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(){this.regCookie=JSON.parse(a.cookie("cms.vm.user.reg.data"));this.aboutYouForm=a(".cms-tell-us-about-you-form");this.aboutYouButton=a(".tell-us-about-you-button");this.requestFeedback=a(".form-request-feedback");this.aboutYouFormWrapper=a(".cms-tell-us-about-you-form-wrapper");this.submitBtn=a(".submit");this.notNow=a(".not-now");this.closeFeedback=a(".close-feedback-message")};e.prototype={toggle:{show:function(a){a.removeClass("hidden")},hide:function(a){a.addClass("hidden")}},
showRequestFeedback:function(d){var b=this.aboutYouFormWrapper.find(".form-request-feedback");b.removeClass("success error").addClass(d);b.find("p").hide().end().find("."+d).show();b.removeClass("hidden");a("html, body").animate({scrollTop:b.parents(".tell-us-about-you-form").offset().top},500)},setSubmitFormInCookie:function(){this.regCookie.AdditionalInfoSubmitted=!0;var d=new Date;d=new Date(d.getFullYear()+1,d.getMonth(),d.getDate());a.cookie("cms.vm.user.reg.data",JSON.stringify(this.regCookie),
{path:"/",expires:d})},toggleSubmitBtn:function(){var d=!!this.aboutYouForm.find(":input").filter(function(){var b=a(this);return"bbProvider"===b.attr("name")&&""!==b.val()||b.prop("checked")}).length;this.submitBtn[d?"removeClass":"addClass"]("disabled cms-disabled");this.aboutYouForm.validator("update");return d},bindSubmit:function(){var d=this;if(this.aboutYouForm.length)this.aboutYouForm.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(b){if(!b.isDefaultPrevented()){b.preventDefault();
if(!d.toggleSubmitBtn())return!1;a.ajax({type:"POST",url:d.aboutYouForm.prop("action"),cache:!1,dataType:"json",data:JSON.stringify(d.serializeForm(d.aboutYouForm)),contentType:"application/json",success:function(a){a&&"Exception"===a.result?(d.showRequestFeedback("error"),d.toggle.hide(d.aboutYouForm)):(d.showRequestFeedback("success"),d.toggle.hide(d.aboutYouForm),d.setSubmitFormInCookie());d.resetForm()},error:function(){d.showRequestFeedback("error");d.toggle.hide(d.aboutYouForm);d.resetForm()}})}})},
resetForm:function(){this.aboutYouForm.get(0).reset();this.aboutYouForm.find(".other-parent, .other, .date-fields").addClass("hidden");this.limitMonthsByYear();this.aboutYouForm.find(".selectpicker").selectpicker("refresh");this.toggleSubmitBtn()},bindInputChange:function(){var a=this;this.aboutYouForm.find(":input").on("input change",function(){a.toggleSubmitBtn();a.aboutYouForm.find(".selectpicker").selectpicker("refresh")})},bindNotNow:function(){var a=this;this.notNow.on("click",function(){a.toggle.hide(a.aboutYouForm);
a.toggle.show(a.aboutYouButton);a.resetForm()})},bindTellUsAboutYou:function(){var a=this;this.aboutYouButton.on("click",function(){a.toggle.show(a.aboutYouForm);a.toggle.hide(a.aboutYouButton)})},bindCloseFeedback:function(){var a=this;this.closeFeedback.on("click",function(){a.toggle.hide(a.requestFeedback);a.toggle.show(a.aboutYouButton);a.requestFeedback.hasClass("success")&&a.aboutYouFormWrapper.hide()})},limitMonthsByYear:function(){var d=new Date,b=d.getMonth(),c=d.getFullYear(),g=function(d){d=
d||a(".date-fields");var g=d.find("select.datepicker-month"),e=d.find("select.datepicker-year");d.length&&(c!=e.val()?g.find("option").removeClass("hidden").end().val(b).selectpicker("refresh"):g.find("option").each(function(c,d){c=a(this);b>d.value&&c.addClass("hidden")}).end().val(b).selectpicker("refresh"))};g();a(".datepicker-year").on("change",function(){g(a(this).parents(".date-fields"))})},toggleFormFields:function(){a(".toggle-hidden").not("div").on("change",function(){var d=a(this),b=d.parents(".form-group").first(),
c=b.find(".date-fields"),g=b.find(".other");d.is("input")&&(b=b.find(".other-parent"),b.length?b.toggleClass("hidden"):(b=d.prop("checked")||!1,g.find("input").val("").end()[b?"removeClass":"addClass"]("hidden"),g.hasClass("has-feedback")&&g.find("input").focusin().focusout()));d.is("select")&&(g=d.val(),d=d.find("option:selected"),c[g&&!d.data("type")?"removeClass":"addClass"]("hidden"))});this.toggleSubmitBtn()},serializeForm:function(d){var b="endDateMonthBB endDateMonthTV endDateMonthPhone endDateMonthMobile endDateYearBB endDateYearTV endDateYearMobile endDateYearPhone interestedInTV interestedInPhone interestedInMobile customerType otherBBProvider otherTvProvider otherPhoneProvider otherMobileProvider bbProvider tvProvider phoneProvider mobileProvider".split(" "),
c={},g=this,e=d.find("[name\x3dbbProvider]").val();c.interestedInBB=""!==e;c.customerType=d.find("#customerType").prop("checked")?"Business":"Residential";c.addressId=this.regCookie.addressId;d=d.serializeArray();a.each(d,function(){if(-1===a.inArray(this.name,b))void 0!==c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):c[this.name]=("consent"===this.name?!0:this.value)||"";else{!this.name.startsWith("other")&&this.name.endsWith("Provider")&&(c[this.name]=
g.getSelectedService(this.name,this.value));if(-1!==this.name.indexOf("endDateMonth")){var d=this.name.slice(12),e=d?d.toLowerCase()+"ContractEndDate":"bbContractEndDate";c[d.toLowerCase()+"Provider"]?c[e]=g.getContractEndDate(this.value,d):c[e]=""}-1!==this.name.indexOf("interestedIn")&&(c[this.name]=this.value?!0:!1)}});"0"===c.tvProvider&&(c.tvProvider=c.bbProvider);"0"===c.phoneProvider&&(c.phoneProvider=c.bbProvider);return c},getSelectedService:function(a,b){return b||""},getContractEndDate:function(d,
b){d=parseInt(d)+1;return a("[name\x3dendDateYear"+b+"]").val()+"-"+(10>d?"0"+d:d)}};h.load=function(a){if(!a.length)return!1;a=new e;if(!a.regCookie)return!1;a.regCookie.AdditionalInfoSubmitted?a.aboutYouFormWrapper.hide():(a.aboutYouFormWrapper.removeClass("hidden"),a.bindInputChange(),a.bindSubmit(),a.toggleSubmitBtn(),a.bindNotNow(),a.bindTellUsAboutYou(),a.bindCloseFeedback(),a.toggleFormFields(),a.limitMonthsByYear(),a.aboutYouForm.find(".selectpicker").selectpicker("refresh"))};f.register({name:"cms-tell-us-about-you-form",
api:h,selector:".cms-tell-us-about-you-form"})})(VMJS,VMJSjQuery);
(function(f,a,h){var e={},d=localStorage,b=function(a){d.setItem("affiliate-logo-"+a,JSON.stringify(e[a]))},c=function(){return-1!==location.search.indexOf("buspart\x3d")},g=function(c,d){e.affiliates&&9E5>(new Date).getTime()-e.affiliates.date?c():a.get("/services/api/affiliate-logo?currentSite\x3d"+d).success(function(a){a&&(a.date=(new Date).getTime(),e.affiliates=a,b("affiliates"),c())})},k=function(a){e.remaining=a?a:e.remaining-1;b("remaining")},r=function(){return(location.search.split("buspart\x3d")[1]||
"").split("\x26")[0]},l=function(a,b){return h.compile(a)(b)},n=function(b,c){var d=a.Deferred(),g=new Image;g.onload=function(){d.resolve()};g.onerror=function(){d.reject()};g.src=b;d.always(c)},m=function(){if(!(1>e.remaining)){var a=setTimeout(function(){e.content.addClass("affiliate-logo--loading")},300);var b=l(e.templates.content,e.affiliate);n(e.affiliate.imgPathField,function(){e.content.html(b);clearTimeout(a);e.content.removeClass("affiliate-logo--loading")});k()}},p=function(){var b;a:{if(b=
e.affiliates.pages)for(var c=0,d=b.length;c<d;c++)if(b[c].replace(".html","").endsWith(window.location.pathname)||0>b[c].indexOf("/")&&"/"===window.location.pathname){b=!0;break a}b=!1}b||k(0);m();a(e.content).trigger("affiliate-logo-initialized")};e.init=function(f){e.content=a(f[0]).find(".affiliate-logo--content");e.templates={content:a("#affiliateLogo-content-tpl").html()};e.content.length&&e.templates.content&&(f=a(f[0]).find(".affiliate-logo--content").data("node-path").split("/")[2],e.affiliates=
JSON.parse(d.getItem("affiliate-logo-affiliates")),e.affiliate=JSON.parse(d.getItem("affiliate-logo-affiliate")),e.remaining=JSON.parse(d.getItem("affiliate-logo-remaining")),c||e.remaining)&&(!e.affiliate||r()&&e.affiliate.paramValue!==r()?g(function(){a:{var a=r(),c=e.affiliates.partners;if(c)for(var d=0,g=c.length;d<g;d++){var f=c[d];if(f.paramValue===a){e.affiliate=f;b("affiliate");e.remaining=3;break a}}}p()},f):p())};f.register({name:"affiliate-logo",api:e,selector:".affiliate-logo"})})(VMJS,
VMJSjQuery,Handlebars);
(function(f,a){var h={},e=function(){this.loadingInMotion=!1;this.start=null;this.strokeDashOffset=0;this.maxStrokeDashOffset=5181.1875;this.animTimeSecs=2;this.pixPerFrame=this.maxStrokeDashOffset/(60*this.animTimeSecs);this.requestId=this.path=null;this.vendors=["ms","moz","webkit","o"];this.lastTime=0;this.SVGSupport=null;window.$this=this;window.requestAnimFrame=null;window.cancelAnimFrame=null};e.prototype={bindAnimationFrames:function(){this.path=document.getElementById("svgInfinity");window.requestAnimFrame=
window.requestAnimationFrame;window.cancelAnimFrame=window.cancelAnimationFrame;for(var a=0;a<this.vendors.length&&!this.requestAnimFrame;++a)window.requestAnimFrame=window[this.vendors[a]+"RequestAnimationFrame"],window.cancelAnimFrame=window[this.vendors[a]+"CancelRequestAnimationFrame"];window.requestAnimFrame||(window.requestAnimFrame=function(a){var b=(new Date).getTime(),d=Math.max(0,16-(b-window.$this.lastTime)),e=window.setTimeout(function(){a(b+d)},d);window.$this.lastTime=b+d;return e});
window.cancelAnimFrame||(window.cancelAnimFrame=function(a){clearTimeout(a)})},moveStrokeDashOffset:function(a){window.$this.start||(window.$this.start=a);var b=a-window.$this.start,c=window.$this.strokeDashOffset+window.$this.pixPerFrame;window.$this.path.setAttribute("stroke-dashoffset",c);window.$this.strokeDashOffset=c;b<2E3*window.$this.animTimeSecs&&window.$this.loadingInMotion?window.$this.requestId=window.requestAnimFrame(window.$this.moveStrokeDashOffset):(window.$this.strokeDashOffset=0,
window.$this.loadingInMotion?(window.$this.start=a,window.$this.requestId=window.requestAnimFrame(window.$this.moveStrokeDashOffset)):window.$this.resetLoadingAnimation())},startLoadingAnimation:function(){this.resetLoadingAnimation();this.loadingInMotion=!0;this.SVGSupport&&!this.requestId&&(window.request=window.requestAnimFrame(this.moveStrokeDashOffset))},resetLoadingAnimation:function(){this.stopLoadingAnimation();window.cancelAnimFrame(this.requestId);this.requestId=void 0;this.start=null;this.path.setAttribute("stroke-dashoffset",
0)},stopLoadingAnimation:function(){this.loadingInMotion=!1},checkSVGSupport:function(){this.SVGSupport=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},init:function(){return"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' height\x3d'111' width\x3d'182' viewBox\x3d'60 55 900 610'\x3e\x3cpath xmlns\x3d'http://www.w3.org/2000/svg' id\x3d'svgInfinity' fill\x3d'none'stroke\x3d'#ED0000' stroke-width\x3d'40'd\x3d'M654.321,377.922c29.828,40.977,62.912,74.562,96.109,97.498  c33.249,22.988,66.114,35.139,95.036,35.139c27.883,0,51.258-11.501,67.604-33.264c19.812-26.312,30.732-63.699,30.75-105.271  c0-41.571-10.923-78.956-30.753-105.272c-16.338-21.757-39.714-33.257-67.601-33.257l0,0c-28.944,0-61.805,12.149-95.037,35.137  c-33.229,22.947-66.37,56.611-96.267,97.713l-8.808,12.311c-59.42,82.599-125.618,150.242-192.048,196.134  c-65.203,45.084-129.652,68.91-186.372,68.91c-54.679,0-100.52-22.553-132.574-65.23c-38.854-51.602-60.269-124.92-60.301-206.446  c0-81.523,21.415-154.837,60.306-206.446c32.041-42.667,77.881-65.219,132.568-65.219l0,0c56.759,0,121.206,23.826,186.374,68.905  c66.363,45.83,132.546,113.456,192.012,196.087L654.321,377.922z' stroke-dasharray\x3d'2590.59375 2590.59375' stroke-dashoffset\x3d'0'\x3e\x3c/path\x3e\x3c/svg\x3e\x3cspan\x3eLoading...\x3c/span\x3e"},
checkAjax:function(d){var b=setInterval(function(){0===a.active&&(d.addClass("hidden"),clearInterval(b))},1E3)}};h.load=function(a){if(a.length){var b=new e;a.hasClass("cms-spinner-rendered")||a.append(b.init()).addClass("cms-spinner-rendered");b.checkAjax(a);b.checkSVGSupport();b.bindAnimationFrames();b.startLoadingAnimation()}};f.register({name:"cms-spinner",api:h,selector:".cms-spinner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(){l.currentTheta>p?(h.text(f+"%"),100===f&&h.attr("transform","matrix(1 0 0 1 58 148)"),cancelAnimationFrame(B)):(9<v&&h.attr("transform","matrix(1 0 0 1 61 148)"),h.text(v+"%"),v++,l.attr("transform","rotate("+l.currentTheta/2+" "+m.x+" "+m.y+" )"),n.attr("transform","translate("+(97*Math.cos((l.currentTheta+-180)*Math.PI/180)+97)+","+97*Math.sin((l.currentTheta+-180)*Math.PI/180)+")"),l.currentTheta+=1.8,B=requestAnimationFrame(b))}e=a(d).find(".gauge-testing-data");
d=a(d).find(".gauge-svg");document.documentMode&&d.addClass("gauge-ie");if(e.length){var c=parseFloat(e.data("target"))||0;var g=e.data("addresses-number")||0;e=e.data("registration-number")||0;var f=e/(c/100*g)*100,h=d.find("text"),l=d.find(".svg-plectrum"),n=d.find(".percentage");e=d.find(".plectrum-center")[0].getBBox();var m={x:e.x+e.width/2,y:e.y+e.height/2};switch(!0){case 50>f&&0!==f%1:f=parseInt(f)+1;break;case 50<f&&100>f&&0!==f%1:f=parseInt(f);break;case 100<=f:f=100}var p=f/100*180,v=0;
l.currentTheta=0;var B=requestAnimationFrame(b)}}f.register({name:"gauge-component",api:{load:function(a){a.each(h)}},selector:".gauge-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){function e(b,c,d,g){return a({deg:-60}).animate({deg:c},{duration:d,step:function(a){b.css({transform:"rotate("+a+"deg)"})},complete:g||a.noop})}function d(a){var b=a.css("backgroundPosition").split(" ")[1];b=parseFloat(b)+205;0>=b&&a.css("backgroundPosition","0 "+b+"px")}function b(a,b,c,d){var g=0,e=window.setInterval(function(){a();++g===c&&(("function"===typeof d?d:function(){})(),window.clearInterval(e))},b)}var c=a(".selected-media-type"),g=a(".cms-speed-checker-time-virgin"),
f=a(".cms-speed-checker-accelerometer-overlay-user"),h=a(".cms-speed-checker-accelerometer-overlay-vm"),l=a(".virgin-pointer"),n=a(".competitor-pointer"),m=a(".cms-speed-checker-accelerometer-winner"),p=function(){d(f)},v=function(){d(h)};l.stop().css({transform:"rotate(-60deg)"});n.stop().css({transform:"rotate(-60deg)"});var B=function(){m.show().animate({fontSize:"35px"},100).animate({fontSize:"25px"},200)};a(".compare-now").on("click",function(){l.stop().css({transform:"rotate(-60deg)"});n.stop().css({transform:"rotate(-60deg)"});
f.css("background-position","0 -3075px");h.css("background-position","0 -3075px");var d=a(".current-competitor option:selected").text(),k=a(".cms-speed-checker-broadband-speed-select option:selected").val(),r=a("[class$\x3d-selected]").attr("value"),m=a(".cms-speed-checker-accelerometer-time");a(".cms-speed-checker__animation").show();a(".cms-speed-checker-content-types").hide();a(".cms-speed-checker-controls").hide();a(".current-competitor-text").text(d);switch(r){case "movie":c.text("HD movie (4.7GB)");
g.text("3 mins, 2 secs");e(l,180,2052);b(v,137,15,B);switch(k){case "1":m.text("1 hr, 0 mins, 59 secs");e(n,180,41254);b(p,2750,15);break;case "2":m.text("18 mins, 30 secs");e(n,180,12515);b(p,834,15);break;case "3":m.text("9 mins, 22 secs"),e(n,180,6336),b(p,423,15)}break;case "music":c.text("Album (80MB)");g.text("0 mins, 3 secs");e(l,180,912);b(v,61,15,B);switch(k){case "1":m.text("0 mins, 54 secs");e(n,180,16416);b(p,1094,15);break;case "2":m.text("0 mins, 16 secs");e(n,180,4864);b(p,324,15);
break;case "3":m.text("0 mins, 8 secs"),e(n,180,2432),b(p,162,15)}break;case "game":c.text("Game (20GB)");g.text("15 mins, 10 secs");e(l,180,3420);b(v,228,15,B);switch(k){case "1":m.text("5 hrs, 4 mins, 56 secs");e(n,180,68761);b(p,4584,15);break;case "2":m.text("1 hrs, 32 mins, 30 secs");e(n,180,20858);b(p,1391,15);break;case "3":m.text("46 mins, 49 secs"),e(n,180,10557),b(p,704,15)}break;case "tvshow":switch(c.text("TV show (1.3GB)"),g.text("59 secs"),e(l,180,1368),b(v,91,15,B),k){case "1":m.text("19 mins, 39 secs");
e(n,180,27337);b(p,1822,15);break;case "2":m.text("5 mins, 58 secs");e(n,180,8301);b(p,553,15);break;case "3":m.text("3 mins, 1 secs"),e(n,180,4197),b(p,280,15)}}});a(".compare-again").on("click",function(){a(".cms-speed-checker__animation").hide();a(".cms-speed-checker-content-types").show();a(".cms-speed-checker-controls").show();m.hide()});var t=function(){var b=a("[class$\x3d-selected]").not(this);if(b.length){var c=b.attr("class").replace("-selected","-unselected");b.attr("class",c);b.siblings("span").removeClass("core-white")}};
a(".cms-speed-checker__movie div").on("click",function(){t();a(this).toggleClass("movie-selected movie-unselected");a(this).siblings("span").toggleClass("core-white")});a(".cms-speed-checker__album div").on("click",function(){t();a(this).toggleClass("music-selected music-unselected");a(this).siblings("span").toggleClass("core-white")});a(".cms-speed-checker__game div").on("click",function(){t();a(this).toggleClass("game-selected game-unselected");a(this).siblings("span").toggleClass("core-white")});
a(".cms-speed-checker__tv div").on("click",function(){t();a(this).toggleClass("tvShow-selected tvShow-unselected");a(this).siblings("span").toggleClass("core-white")})}f.register({name:"speed-checker",api:{load:function(a){a.each(h)}},selector:".speed-checker"})})(VMJS,VMJSjQuery);
(function(f,a,h){var e={},d=function(a,b){a=a.find(".validation");b?a.removeClass("hidden"):a.addClass("hidden")},b=function(b){if(b.data("variant-id")&&b.data("content-type")){var c="?contentType\x3d"+b.data("content-type")+"\x26variantId\x3d"+b.data("variant-id");c+="\x26currentSite\x3d"+b.data("node-path").split("/")[2]+"\x26timestamp\x3d"+Date.now();a.ajax({url:"/services/api/latestArticles"+c,dataType:"json",success:function(c){var g="blogs"!=b.data("content-type")&&"stories"!=b.data("content-type"),
e=b.find("."+b.data("content-type"));c={articles:c,releaseDateDisplayed:g};g=a("#"+b.data("variant-id")+"_template").html();c=h.compile(g)(c);d(b,!1);e.html(c)},error:function(){d(b,!0)}})}else d(b,!0)};e.init=function(c){c.each(function(){b(a(this))})};f.register({name:"latest-articles-component",api:e,selector:".latest-articles-component"})})(VMJS,VMJSjQuery,Handlebars);
(function(f,a){function h(){var b=function(a,b,c){this.latlng=a;this.args=c;this.setMap(b)};b.prototype=new google.maps.OverlayView;b.prototype.draw=function(){var b=this.div;b||(b=this.div=document.createElement("div"),b.className="plectrum-marker",b.style.position="absolute",b.style.cursor="pointer",b.style.width="66px",b.style.height="75px","undefined"!==typeof this.args.marker_id&&(b.dataset.marker_id=this.args.marker_id),this.getPanes().overlayImage.appendChild(b));var c=this.getProjection().fromLatLngToDivPixel(this.latlng);
c&&(a(".status-map-plectrum").length?(b.style.top=c.y-parseInt(b.style.height)+5+"px",b.style.left=c.x-Math.round(parseInt(b.style.width)/2)+"px"):(b.style.top=c.y-parseInt(b.style.height)+10+"px",b.style.left=c.x-Math.round(parseInt(b.style.width)/2)+6+"px"))};b.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)};b.prototype.getPosition=function(){return this.latlng};window.CustomMarker=b}function e(b,c){b=a.cookie("cms.vm.user.reg.data");var g=window.matchMedia("(max-width: 767px)").matches,
e=a(".updates-arrow"),f=function(b,d){a(c).find(".dynamic-content-wrapper").css("display",b);a(c).find(".map-wrapper").css("position",d)};g&&(a(".updates-dropdown").removeClass("hidden"),f("none"),a(".dropdown-text").text("Updates"),e.click(function(){e.toggleClass("updates-animate-open","updates-animate-closed");e.hasClass("updates-animate-open")?(a(".dropdown-text").text("Close"),f("block","absolute"),a(".updates-dropdown").insertAfter(".dynamic-content-wrapper")):(a(".dropdown-text").text("Updates"),
f("none","relative"))}));try{var k=JSON.parse(b);if(k&&k.currentAddress){var l=k.currentAddress,p=l.campaign||"100VC";var r=l.postcode;var n=l.premiseId,m;window.cmsUpdatesMapModel&&(m=B.mapCommsStatus(l.commsStatus));var v=setInterval(function(){if("undefined"!=typeof google){clearInterval(v);h();d(n,l.communityId,r,c,p,m);var b=m,g=window.cmsUpdatesMapModel,e=b.charAt(0).toLowerCase()+b.substr(1);b=a(c);if(g){var f=g[e+"UpdateOne"],k=g[e+"UpdateTwo"];g=g[e+"UpdateThree"];f&&(b.find(".update-message-one").addClass("message-body"),
b.find("#updates-map-template .update-message-one").html(f));k&&(b.find(".update-message-two").addClass("message-body"),b.find("#updates-map-template .update-message-two").html(k));g&&(b.find(".update-message-three").addClass("message-body"),b.find("#updates-map-template .update-message-three").html(g))}b.find(".dynamic-content-wrapper").removeClass("hidden")}},100)}}catch(N){}}function d(d,e,f,h,m,v){n(e,m,function(d){var n=e&&d;(new google.maps.Geocoder).geocode({address:f},function(d,e){if(e==
google.maps.GeocoderStatus.OK){var f=d[0].geometry.location,m=new google.maps.Map(document.getElementById("mapContainer"),{center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,disableDefaultUI:!0,draggable:!1,disableDoubleClickZoom:!0});new CustomMarker(m.getCenter(),m,{marker_id:"markerId"});m.addListener("idle",function(){a(h).find(".plectrum-marker").addClass("red")});if(n&&0!==n.communityBoundaries.length){d=c(n.communityBoundaries);var y=r(d);google.maps.event.addListenerOnce(m,"projection_changed",
function(){b(m,y,!0)});google.maps.event.addDomListener(window,"resize",function(){google.maps.event.trigger(m,"resize");b(m,y,!0)});e=window.cmsUpdatesMapModel["plectrumColor"+v];g(m,l(d));k(p(e),m)}else google.maps.event.addDomListener(window,"resize",function(){google.maps.event.trigger(m,"resize");m.setCenter(f);b(m,f,!1)}),b(m,f,!1)}})})}function b(b,c,d){var g=0,e=0,f=0,h=a(".dynamic-content-wrapper").width();if(d&&b.getProjection()){window.matchMedia("(max-width: 767px)").matches?(g=35,e=75,
f=35):window.matchMedia("(max-width: 1199px)").matches?(g=h?h+120+35:320,e=75,f=35):window.matchMedia("(min-width: 1200px)").matches&&(g=h?h+120+35:520,e=75,f=35);var k=b.getProjection().fromLatLngToPoint(c.getNorthEast()),l=b.getProjection().fromLatLngToPoint(c.getSouthWest());b.fitBounds(c);g=new google.maps.Point(("number"==typeof g?g:0)/Math.pow(2,b.getZoom())||0,("number"==typeof e?e:0)/Math.pow(2,b.getZoom())||0);e=new google.maps.Point(("number"==typeof f?f:0)/Math.pow(2,b.getZoom())||0,("number"==
typeof e?e:0)/Math.pow(2,b.getZoom())||0);f=b.getProjection().fromPointToLatLng(new google.maps.Point(k.x+g.x,k.y-g.y));k=b.getProjection().fromPointToLatLng(new google.maps.Point(l.x-e.x,k.y-e.y));c.extend(f);c.extend(k);b.fitBounds(c)}d||(b.setZoom(15),b.setCenter(c),window.matchMedia("(max-width: 767px)").matches||b.panBy(h?(h+120)/2:0,0))}function c(b){var c=[];a.each(b,function(a,b){a=parseFloat(b.latitude);b=parseFloat(b.longitude);c.push({lat:a,lng:b})});return c}function g(a,b){t=new google.maps.visualization.HeatmapLayer({data:b});
t.setMap(a)}function k(a,b){var c=[];if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(a)){a=a.substring(1).split("");3===a.length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]);a="0x"+a.join("");c.push("rgba("+[a>>16&111,a>>8&255,a&255].join()+",0)");for(var d=0;22>=d;d++)c.push("rgba("+[a>>16&255,a>>8&255,a&255].join()+",1)")}t.set("gradient",t.get("gradient")?null:c);t.set("opacity",t.get("opacity")?null:.5);google.maps.event.addListener(b,"zoom_changed",function(){var a=b.getZoom();switch(!0){case 15==a:a=15;break;case 14==
a:a=10;break;case 13==a:a=7;break;case 12==a:a=3;break;case 12>a:a=1;break;case 15<=a:a=20;break;default:a=20}t.set("radius",a)})}function r(b){var c=new google.maps.LatLngBounds;a.each(b,function(a,b){c.extend(new google.maps.LatLng(b.lat,b.lng))});return c}function l(b){var c=[];a.each(b,function(a,b){c.push(new google.maps.LatLng(b.lat,b.lng))});return c}function n(b,c,d){var g={};b?a(CMS_community_details_obj).length?m(g,CMS_community_details_obj,d):B.makeAjaxCall(B.getCommunityApi(),"application/json",
"json","GET","communityId\x3d"+b+"\x26campaign\x3d"+c,function(a){m(g,a.communityDetails,d)},function(){B.redirectToErrorPage(B.getErrorPage())}):(g.registrationsCount=0,g.communityBoundaries=[],d&&d(g))}function m(a,b,c){b&&null!=b.registeredNo&&(a.registrationsCount=b.registeredNo);b&&b.communityBoundaries&&(a.communityBoundaries=b.communityBoundaries);c&&c(a)}function p(a){for(var b=[{name:"orange",value:"#ff9900"},{name:"grey",value:"#333333"},{name:"purple",value:"#645096"},{name:"blue",value:"#3e55a0"}],
c=0;c<b.length;c++)if(a===b[c].name)return b[c].value}var v={},B=common.cmsUtils,t;v.load=function(a){a.each(e)};f.register({name:"updates-map-container",api:v,selector:".updates-map-container"})})(VMJS,VMJSjQuery);(function(f,a){function h(){var e=a("body").data("commsStatus");e&&(a("body").addClass(e),a(".cms-column-splitter-container:not(."+e+")").remove())}f.register({name:"cms-column-splitter-container",api:{load:function(a){a.each(h)}},selector:".cms-column-splitter-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){b=a(c);var g=b.hasClass("edit");if(!d()||g)a(".unsupported-msg",b).show(50,function(){e(c,g)}),g||a(window).resize(function(){e(c,g)})}function e(b,c){b=a(b).height();c||a("#mainPageContent.page").css("top",b)}function d(){var b=window.location,c=null,d="undefined"!==typeof sessionStorage;d&&(c=sessionStorage.getItem("isPCICompliant"));if(null===c||""===c){var e;a.when(a.ajax({type:"HEAD",async:!1,url:b}).done(function(a,b,g){e=g.getResponseHeader("X-Browser-PCI-Compliance");
c=0===parseInt(e)?"no":"yes";d&&sessionStorage.setItem("isPCICompliant",c)}))}return"no"!==c}f.register({name:"global-messages",api:{load:function(a){a.each(h)}},selector:".global-messages"})})(VMJS,jQuery);
(function(f,a){function h(b,c){b=window.matchMedia("(max-width: 767px)").matches;var g=window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches,f=a(c).find(".row[data-mobile-enabled]"),h=a(c).find(".row").hasClass("column-enhancement"),l=a(c).find(".row[data-two-column-enabled]"),n=0<a(c).find(".row[data-infinite-loop-enabled]").length,m=0<a(c).find(".row[data-automatic-scroll-enabled]").length,p=1E3*a(c).find(".row").data("automatic-scroll-speed");l=0<f.length&&0<l.length;n={loop:n,
autoplay:m,autoplayTimeout:p,responsive:{0:{items:l?2:1},768:{items:l?2:3}}};f&&!h&&(b||g)&&(a.extend(n,{dots:!m}),f.addClass("mobile-enabled owl-carousel owl-theme"),a(c).find(".mobile-enabled").owlCarousel(n));f&&h&&b&&(a.extend(n,{dots:!1,stagePadding:20,navContainer:a(c).find(".carousel-nav"),nav:!0,navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"]}),f.addClass("mobile-enabled owl-carousel owl-theme"),a(c).find(".mobile-enabled").owlCarousel(n));
e(c);a(window).resize(d(function(){e(c)},50))}function e(b){a(b).each(function(){var b=a(this),d=a(this).data("desktop-border"),e=a(this).data("tablet-border"),f=a(this).data("mobile-border"),h=a(this).data("desktop-border-padding"),n=a(this).data("tablet-border-padding"),m=a(this).data("mobile-border-padding"),p=window.matchMedia("(min-width: 992px)").matches,v=window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches,B=window.matchMedia("(max-width: 767px)").matches;p&&b.css({border:d,
padding:h});v&&b.css({border:e,padding:n});B&&b.css({border:f,padding:m})})}function d(a,c,d){var b;return function(){var g=this,e=arguments,f=d&&!b;clearTimeout(b);b=setTimeout(function(){b=null;d||a.apply(g,e)},c);f&&a.apply(g,e)}}f.register({name:"column-splitter-container",api:{load:function(a){a.each(h)}},selector:".column-splitter-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){b.each(function(b,c){e(a(c))})}function e(c){var d=c.find(".thank-you-status-background"),e=d.data("desktop-background"),f=d.data("mobile-background"),h=window.matchMedia("(max-width: 768px)"),n=function(a){var b=c.find(".plectrum-container"),g=c.find(".delimitation-container");a.matches?(b.insertBefore(g),d.css("background-image","url("+f+")")):(b.insertAfter(g),d.css("background-image","url("+e+")"))};a(window).resize(function(){n(h)});n(h);b.backgroundZoom(c)}var d=
{},b=common.cmsUtils;d.load=function(a){a.length&&h(a)};f.register({name:"thank-you-page-status-container",api:d,selector:".thank-you-page-status-container"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d);e=common.cmsUtils;var c;d=b.find(".text-uppercase");b=b.find(".left-side");var g=window.cmsStatusServiceability,f=a("body").data("commsStatus")||"standard";-1<window.location.href.indexOf("results")?c=jQuery.cookie("cms.vm.user"):-1<window.location.href.indexOf("thank-you")&&(c=jQuery.cookie("cms.vm.user.reg.data"));try{var h=JSON.parse(c)}catch(l){return}h&&h.currentAddress&&(c=h.currentAddress.postcode,c=e.getFormattedPostcode(c),f=f.substr(0,1).toUpperCase()+
f.substr(1),d.text(c),b.addClass(g["plectrumColor"+f]))}f.register({name:".cable-my-street-status",api:{load:function(a){a.each(h)}},selector:".cable-my-street-status"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e={component:"contact-us-navigation-mobile",container:"contact-us-nav-mobile",panelContent:"contact-us-nav-mobile--panel-content",activePanel:"contact-us-nav-mobile--selection-panel-active",topicsPanel:"contact-us-nav-mobile--first-panel",secondPanel:"contact-us-nav-mobile--second-panel",fourthPanel:"contact-us-nav-mobile--fourth-panel",item:"contact-us-nav-mobile--item",thirdPanel:"contact-us-nav-mobile--third-panel",panelTitle:"contact-us-nav-mobile--panel-title",panelTitleActive:"contact-us-nav-mobile--panel-title-active",
suggestionLinksWrapper:"contact-us-nav-mobile--suggestion-links-wrapper",askCommunity:"contact-us-nav-mobile--ask-community",askCommunityLink:"contact-us-nav-mobile--ask-community-link",askCommunityText:"contact-us-nav-mobile--ask-community-text",selected:"contact-us-nav-mobile--selected",introPanel:"contact-us-nav-mobile--introduction-panel",backButton:"contact-us-nav-mobile--back-button",contactOptions:"contact-us-nav-mobile--contact-options",contactOption:"contact-us-nav-mobile--contact-option",
contactChatOnline:"contact-us-nav-mobile--web-chat-option",contactOptionActive:"contact-us-nav-mobile--contact-option-active",contactRecommended:"contact-us-nav-mobile--recommended",contactIcon:"contact-us-nav-mobile--contact-icon",contactText:"contact-us-nav-mobile--contact-text",webChatOption:"contact-us-nav-mobile--web-chat-option",callUsOption:"contact-us-nav-mobile--call-us-option",emailUsOption:"contact-us-nav-mobile--email-us-option",writeToUsOption:"contact-us-nav-mobile--write-to-us-option",
infoPanelWrapper:"contact-us-nav-mobile--info-panel-wrapper",infoPanelLinesOpen:"contact-us-nav-mobile--info-panel-lines-open",infoPanelInfoContainer:"contact-us-nav-mobile--info-container",infoPanelOpen:"contact-us-nav-mobile--info-panel-open",infoTitle:"contact-us-nav-mobile--info-panel-title",infoPaneItemHeader:"contact-us-nav-mobile--info-panel-item-header",infoText:"contact-us-nav-mobile--info-panel-text",infoTextLowercase:"contact-us-nav-mobile--info-panel-text-lowercase",infoFootNote:"contact-us-nav-mobile--info-panel-footnote",
infoPanel:"contact-us-nav-mobile--info-panel",infoIcon:"contact-us-nav-mobile--info-panel-icon",callUsInfo:"contact-us-nav-mobile--call-us-info",callUsInfoButton:"contact-us-nav--call-us-info-button",callUsCallCharges:"contact-us-nav--call-us-call-charges",writeToInfo:"contact-us-nav-mobile--write-to-us-info",header:"contact-us-nav-mobile--header",slideIn:"slide-in",closeWrapperMobile:"close-wrapper-button",modifiableTile:"modifiable-tile",slideOut:"slide-out",categorySlider:"contact-us-nav-mobile--categories-slider",
suggestionsSlider:"contact-us-nav-mobile--suggestions-slider",chatOnline:"calendar",chatOnlineMessage:"availability-message-placeholder",chatOnlineStart:"chat-online--start-chat",label:"contact-us-nav-mobile--label"},d={animation:"animationend","-o-animation":"oAnimationEnd","-moz-animation":"anomationend","-webkit-animation":"webkitAnimationEnd"},b={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},c=function(){var a=document.createElement("div"),
b;for(b in d)if("undefined"!==typeof a.style[b])return a=d[b];return"animationend"},g=function(){var a=document.createElement("div"),c;for(c in b)if("undefined"!==typeof a.style[c])return a=b[c];return"transitionend"},k=function(){var b,d,f,h,k,v,B,t={},D={},z={},C={},y,q,x=!1,u=!1,E=function(b,c){if(B.hasOwnProperty(b))return b=Handlebars.compile(B[b]),c.OCSS=c.OCSS||{},a.extend(c.OCSS,e),b(c)},F=function(b){var c=a(b.currentTarget);b=c.attr("data-item")||c.parents("a").attr("data-item");c=c.find("."+
e.label).text()||c.parents("a").find("."+e.label).text();c={topicIndex:b,title:c};x=!0;v.removeClass("hide");y=d[b];t[b]||(a.extend(c,y),t[b]=E("secondPanel",c));f.html(t[b]);f.removeClass("hide");f.removeClass(e.slideOut).addClass(e.slideIn);q=e.secondPanel;a(".contact-us-nav-mobile--first-panel").addClass("overflow-hidden")},G=function(){x=!1;f.one(c()+" "+g(),function(){x||(f.addClass("hide").removeClass(e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),v.addClass("hide"),f.off(c()+
" "+g()))});f.addClass(e.slideOut);q="";a(".contact-us-nav-mobile--first-panel").removeClass("overflow-hidden")},A=function(b){var c=a(b.currentTarget),d=c.attr("data-item"),g=c.attr("data-topic");b=d+"-"+g;var f=y&&y.articles&&y.articles[d]&&y.articles[d];c={title:c.find("."+e.label).text()||c.parents("a").find("."+e.label).text()};f=a.extend(f.content,c)||c;d=g+"_"+d;f.id=d;u=!0;D[b]||(D[b]=E("thirdPanel",f));b=D[b];f.communicationMethods&&f.communicationMethods.length&&f.communicationMethods.filter(function(a){return"call-us"===
a.type})&&(!C[d]&&f&&(C[d]=E("getInTouch",f)),C[d]&&(b+=C[d]));h.html(b);h.removeClass("hide").removeClass(e.slideOut).addClass(e.slideIn);q=e.thirdPanel;a("."+e.secondPanel).addClass("overflow-hidden")},H=function(){u=!1;h.one(c()+" "+g(),function(){u||(h.addClass("hide").removeClass(e.activePanel+" "+e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),h.off(c()+" "+g()))});h.addClass(e.slideOut);q=e.secondPanel;a("."+e.secondPanel).removeClass("overflow-hidden")},N=function(b){b=a(b.currentTarget).parents("."+
e.contactOptions).attr("id");var c=y.articles[b.split("_")[1]].content.communicationMethods.filter(function(a){return"call-us"===a.type})[0]||{},d;z[b]||(d=z[b]=E("call-us",c));k.html(d);k.removeClass("hide").removeClass(e.slideOut).addClass(e.slideIn);q=e.fourthPanel;a("."+e.thirdPanel).addClass("overflow-hidden");a("."+e.header).addClass("user-header")},I=function(){u=!1;k.one(c()+" "+g(),function(){u||(k.addClass("hide").removeClass(e.activePanel+" "+e.slideIn).find("."+e.panelTitle).removeClass(e.panelTitleActive),
k.off(c()+" "+g()))});k.addClass(e.slideOut);q=e.thirdPanel;a("."+e.thirdPanel).removeClass("overflow-hidden");a("."+e.header).removeClass("user-header")},M=function(a){a.preventDefault();switch(q){case e.secondPanel:G();break;case e.thirdPanel:H();break;case e.fourthPanel:I()}},J=function(){a(document).on("click",".pink-cta",function(){a(".contact-us-nav--call-us-call-charges").toggleClass("hide");a(".call-us-long").toggleClass("full-width")})};return{init:function(){b=a("."+e.container);b.length&&
(B={secondPanel:a("#second-panel-template").html(),thirdPanel:a("#third-panel-template").html(),getInTouch:a("#getInTouch-template").html(),"call-us":a("#call-us-template").html()},d=aContactUsNavigationData||[],a("."+e.topicsPanel),f=a("."+e.secondPanel),h=a("."+e.thirdPanel),k=a("."+e.fourthPanel),v=a("."+e.backButton),b.find("."+e.topicsPanel).on("click","."+e.item,F),b.find("."+e.secondPanel).on("click","."+e.item,A),b.find("."+e.thirdPanel).on("click","."+e.callUsOption+" a",N),b.find("."+e.backButton).on("click",
M),J())}}}();h.load=function(){k.init()};f.register({name:"contact-us-navigation-mobile",api:h,selector:"."+e.component})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,e){if(!a(e).hasClass("author")){d=common.cmsUtils;b=d.getErrorPage();g=a("body").data("40VCRank")||a("body").data("commsStatus")||"unmatched";var f=a.cookie("cms.vm.user");g=g.substr(0,1).toUpperCase()+g.substr(1);try{c=JSON.parse(f)}catch(m){d.redirectToErrorPage(b)}f=g;g={};if(c&&c.currentAddress){var h=c.currentAddress;g.postcode=d.getFormattedPostcode(h.postcode);g.communityName=h.communityName;g.source=a(e).find(".cms-results-template");if(h.manualEntry||!a("#cablemystreet-display-p2s").data("cmsDisplayP2s"))f=
"Standard";if(g.source.length){e=a(e);var k=window.cmsResultsModel;h=k["hero"+f+"Message"]||k.heroUnmatchedMessage;f=k["status"+f+"Message"]||k.statusUnmatchedMessage;e.find(".hero-message").html(h);e.find(".status-message").html(f);g=Handlebars.compile(g.source.html())(g);e.find(".cms-results-content").html(g).removeClass("hidden")}else d.redirectToErrorPage(b)}else d.redirectToErrorPage(b)}}var e={},d,b,c;e.load=function(a){a.each(h)};f.register({name:"cms-results-component",api:e,selector:".cms-results-component"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(b,c){p=common.cmsUtils;B=p.getErrorPage();b=a(c).find(".cms-results-enhanced-form");var d=a.cookie("cms.vm.user");b.find(".selectpicker").selectpicker("refresh");var e=a(".short-registration-form"),f=e.find("#slide-panel");e.hasClass("short-registration-vertical")&&p.isDesktop()&&0===a(".media-body").has("#slide-panel").length&&(f.find(".privacy-box").remove(),f.insertAfter(".media-body").fadeIn(),f.toggleClass("visible"));if(a(c).hasClass("author"))g(b,!0);else{try{t=JSON.parse(d)}catch(u){p.redirectToErrorPage(B)}t||
p.redirectToErrorPage(B);a("body").data("manualaddress")&&(b.find(".extra-fields-noUprnFromApi").removeClass("hidden"),b.find(".extra-fields-noUprnFromApi input").attr("required",""),D=!0);n();g(b);l(b)}}function e(b,c){return a.ajax({type:"POST",url:b,cache:!1,dataType:"json",data:c,contentType:"application/json"})}function d(b){var c=b.find(".results-enhanced-submit"),d=a("\x3cspan /\x3e").addClass("dots"),g=setInterval(function(){3>v?(b.find(".dots").append("."),v++):(b.find(".dots").html(""),
v=0)},300);c.text(c.data("textSwap")).append(d);c.attr("disabled",!0);return g}function b(a,b){a=a.find(".results-enhanced-submit");a.text(a.data("textOriginal"));clearInterval(b)}function c(a){a.find(".already-registered").addClass("hidden");a.find(".backend-error").removeClass("hidden");a.find(".form-request-feedback").removeClass("hidden")}function g(b,c){var d=b.find("#opener"),g=b.find("#slide-panel"),e=a(".short-registration-form"),f=!1,h=b.find(".slide-over"),l=b.find(".bootstrap-select"),
n=b.parent(".status-message-wrapper");e.hasClass("short-registration-vertical")&&(f=!0);var m=function(a){a&&a.preventDefault();a=g.hasClass("visible");var b=p.isMobile(!0);if(f)g.find(".privacy-box").remove(),a?(d.text("Read More"),g.fadeOut()):(d.text("Read Less"),g.insertAfter(".media-body").fadeIn());else{if(a){b?g.fadeOut():(h.animate({"margin-left":"0px"},200,"linear"),g.animate({"margin-right":"-437px"}).hide());d.text("Read More");g.toggleClass("visible");d.toggleClass("closed-privacy open-privacy");
return}b?g.insertAfter(".media-body").fadeIn():(h.animate({"margin-left":"-437px"},200),g.show().animate({"margin-right":"0px"},300));d.text("Read Less")}g.toggleClass("visible");d.toggleClass("closed-privacy open-privacy")};b.find("#opener, .close-results-form").on("click",m);l.on("click",function(){p.isDesktop(!0)&&n.toggleClass("showOverflow")});b.find(".form-group input").on("click",function(){var b=a(".short-registration-form");g.hasClass("visible")&&!b.hasClass("short-registration-vertical")&&
m()});b.length&&k(b,c)}function k(g,f){g.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",function(h){var k=a(this),l=r(k);if(f)h.preventDefault();else if(!h.isDefaultPrevented()){h.preventDefault();var p=d(g),n=g.find(".results-enhanced-submit");h=k.prop("action");var m=k.data("redirect");k=e(h,JSON.stringify(l));k.fail(function(){c(g);b(g,p)});k.done(function(a){if("Failure"===a.result||"Exception"===a.result)"Premise or Email is already Registered"===a.reason?
(g.find(".already-registered").removeClass("hidden"),g.find(".backend-error").addClass("hidden"),g.find(".form-request-feedback").removeClass("hidden")):c(g),b(g,p),n.attr("disabled",!1),"undefined"!==typeof grecaptcha&&grecaptcha.reset();else{var d={};d.agentId=t.agentId;d.currentAddress=t.currentAddress;d.registered=!0;d.addressId=a.addressId;a=new Date;a=new Date(a.getFullYear()+1,a.getMonth(),a.getDate());jQuery.cookie("cms.vm.user.reg.data",JSON.stringify(d),{path:"/",expires:a});clearInterval(p);
window.location.href=m}})}})}function r(b){var c={},d=b.serializeArray(),g=p.getParametersFromUrl().nex;c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"==this.name||"g-recaptcha-response"==this.name||"premiseId"===this.name&&!this.value||(c[this.name]=this.value)});c.nex=isNaN(parseInt(g))?null:parseInt(g);c.confirmEmail=c.email;return c}function l(a){var b=t.currentAddress,c=b&&b.displayAddress,d={};if(c){var g=c.split(",");d.buildingNumber=
g[0];d.street=g[1]}d.displayAddress=c;d.manualEntry=b.manualEntry||D;d.premiseId=b.premiseId;d.postcode=p.getFormattedPostcode(b.postcode);Object.keys(d).forEach(function(b){a.find('input[name\x3d"'+b+'"]').val(d[b])})}function n(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}var m={},p,v=0,B,t,D=!1;m.load=function(a){a.each(h)};f.register({name:"cms-short-registration",api:m,selector:".cms-short-registration"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a,b){e(b)}function e(c){var d=a(c),e=d.find(".results-background"),f=e.data("desktopBackground"),h=e.data("mobileBackground"),n=window.matchMedia("(max-width: 768px)"),m=function(a){var b=d.find(".plectrum-container"),c=d.find(".delimitation-container");a.matches?(b.insertBefore(c),e.css("background-image","url("+h+")")):(b.insertAfter(c),e.css("background-image","url("+f+")"))};a(window).resize(function(){m(n)});m(n);b.backgroundZoom(d)}var d={},b=common.cmsUtils;d.load=
function(a){a.each(h)};f.register({name:"cms-animated-results-content",api:d,selector:".cms-animated-results-content"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b,c){var g=a(c);b=jQuery.cookie("cms.vm.user.reg.data")||jQuery.cookie("cms.vm.user");var e=g.find(".results-background");g=g.find(".results-circular-image");var f=e.data("desktopBackground"),h=e.data("mobileBackground"),n=g.data("circularImageBackground"),m=window.matchMedia("(max-width: 768px)"),p=window.cmsContributionAmountModel;try{d=JSON.parse(b)}catch(B){d={}}var v=function(b){b.matches?e.css("background-image","url("+h+")"):e.css("background-image","url("+f+")");
if(d&&d.currentAddress){b=d.currentAddress.communityName;b=(b=b.substr(0,1).toLowerCase()+b.substr(1))?p[b]:0;var g=a(c).find(".amount-in-pounds");g.text(b?"\u00a3"+b:"");g.removeClass("hidden")}};a(window).resize(function(){v(m)});g.css("background-image","url("+n+")");v(m)}var e={},d;e.load=function(a){a.each(h)};f.register({name:"cms-contribution-amount-content",api:e,selector:".cms-contribution-amount-content"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,f){b=common.cmsUtils;c=b.getParametersFromUrl();g=a(".cms-display-address").data("cmserrorpage")||"/postcode-checker/error.html";k=a(".cms-display-address").data("getaddressfromcmsurl")||"https://cablemystreet.virginmedia.com/cms/api/getAddressListFromCmS";d=e();d.fail(function(){b.redirectToErrorPage(g)});d.success(function(d){d.faultList&&b.redirectToErrorPage(g);var e=!1;a(d.addressList).each(function(d,g){if(g.uprn===c.uprn){e=!0;d=g.displayAddress.toLowerCase().split(",");
if(3==d.length)a(".cms-display-address .address").html(d[0]);else{g=d[0];for(var f=1;f<d.length-2;f++)g=g+", "+d[f];a(".cms-display-address .address").html(g)}a(".cms-display-address .city").html(d[d.length-2]+", ");d=b.getFormattedPostcode(d[d.length-1]).trim();a(".cms-display-address .postcode").html(d)}});e||b.redirectToErrorPage(g)})}function e(){return a.ajax({dataType:"json",url:k,data:{postcode:c.postcode},xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("X-Requested-With",
"XMLHttpRequest")}})}var d={},b,c,g,k;d.load=function(a){a.each(h)};f.register({name:"cms-display-address",api:d,selector:".cms-display-address"})})(VMJS,VMJSjQuery);var Navigator=function(f,a){return{platform:{isMacintosh:function(){return-1<navigator.platform.indexOf("Mac")}}}}(VMJS,VMJSjQuery);
(function(f,a){function h(){a(".hero-cta").find("a").click(function(a){a.stopPropagation()});a(".video-banner").click(function(e){e=a(this).attr("data-url");var d=a(this).attr("data-new-window");"undefined"!==typeof e&&"undefined"!==typeof d&&window.open(e,"true"===d?"_blank":"_self").focus()})}f.register({name:"hero-banner",api:{init:function(){h()}},selector:".hero-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){var b=a(d);b.find(".select-option").change(function(){b.find(".method-details").addClass("hidden");var a=b.find("#method-select").prop("selectedIndex")-1;-1!==a&&b.find("#method-number-"+a).removeClass("hidden")}).change()}f.register({name:"construction-method-dropdown",api:{load:function(a){a.each(h)}},selector:".construction-method-dropdown"})})(VMJS,VMJSjQuery);
(function(f,a){function h(a,b){a?q.$addrListWrapper.slideDown("250",function(){b&&b()}):q.$addrListWrapper.slideUp("250",function(){b&&b()})}function e(a){a?q.$nextBtn.removeAttr("disabled"):q.$nextBtn.attr("disabled",!0)}function d(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b];a?c.removeClass("hidden"):c.addClass("hidden")}}function b(a){q.selectedAddr={};q.selectedAddr.siteId=a.data("site-id")||null;q.selectedAddr.premiseId=a.data("premise-id")||null;q.selectedAddr.uprn=
a.data("uprn")||null}function c(a){a.click(function(){h(!1,function(){q.$postcodeInput.val("");e(!1)})})}function g(b){b.click(function(){b.addClass("disabled-call").attr("disabled",!0);var c={},g="phone-number-accepted"===q.$phoneNumberField.next().attr("id");q.selectedAddr.premiseId&&(c.identifier="premiseId",c.premiseId=q.selectedAddr.premiseId);q.selectedAddr.uprn&&(c.identifier="uprn",c.uprn=q.selectedAddr.uprn);c.marketingConsent=a("#marketingConsent").is(":checked");g&&(c.phoneNumber=q.$phoneNumberField.val());
x.callAPI(E+F.endpointUrl,F.httpMethod,c,!0,F.xhr,F.isAkanaEndpoint).then(function(a){var b="serv-check-availability"===q.variant;localStorage.setItem("cableServiceability",JSON.stringify(a));x.servRedirectFunction(b,!1,E,H,N,I)}).fail(function(){h(!1);d(!1,q.$postcodeFoundWrapper,q.$postcodeApiErrWrapper,q.$nextBtn);b.removeClass("disabled-call");d(!0,q.$postcodeApiErrWrapper);h(!0)})})}function k(){return x.callAPI(E+A.endpointUrl,A.httpMethod,M,!0,A.xhr,A.isAkanaEndpoint).then(function(){sessionStorage.removeItem("journeyData");
sessionStorage.removeItem("journeyMap")})}function r(a,b){a={postcode:a};b&&(a.addressIdentificationType=b);return x.callAPI(E+G.endpointUrl,G.httpMethod,a,!1,G.xhr,G.isAkanaEndpoint)}function l(b,c,g){c=c.addresses[0].addressIdentificationType;var e=b.data("spotters-form"),f=b.data("cms-manual-form");if(1===c)b.on("click",function(){h(!1,function(){d(!0,q.$postcodeSecondSearchErrWrapper)});v(!0);n(g,2);a(this).off("click");b.attr("data-did-second-search",!0)});else 2===c&&("true"===b.attr("data-did-second-search")?
(b.attr("href",e),window.sessionStorage.setItem("postcode",g)):b.attr("href",f+"?postcode\x3d"+g))}function n(a,b){r(a,b).then(function(b){d(!1,q.$postcodeNotFoundWrapper,q.$postcodeApiErrWrapper);d(!0,q.$nextBtn,q.$postcodeFoundWrapper);var c=q.$postcodeFoundWrapper.find(".serv-addr-list-desktop ul"),g=q.$postcodeFoundWrapper.find(".serv-addr-list-mobile select"),e=c.siblings("script").html(),f=g.siblings("script").html();e=Handlebars.compile(e);f=Handlebars.compile(f);c.html(e(b));g.html(f(b));
v(!1);m(c,g);p();h(!0);l(q.$cantFindAddrCta,b,a)}).fail(function(c){var g=JSON.parse(c.responseText)[0];d(!1,q.$postcodeFoundWrapper,q.$postcodeApiErrWrapper,q.$postcodeSecondSearchErrWrapper,q.$nextBtn);if(404===c.status&&"NO_ADDRESSES"===g.faultCode){if(2===b){c=q.$cantFindAddrCta.data("spotters-form");window.sessionStorage.setItem("postcode",a);window.location.href=c;return}c=q.$postcodeNotFoundWrapper;g=c.data("manual-address-cta");var e=c.data("cms-manual-form");g=Handlebars.compile(c.find("script").html())({manualAddress:'\x3ca href\x3d"'+
e+"?postcode\x3d"+q.$postcodeInput.val().replace(/\s+/g,"")+'"\x3e'+g+"\x3c/a\x3e"});c.find(".serv-postcode-not-found-msg").html(g);d(!0,q.$postcodeNotFoundWrapper)}else d(!0,q.$postcodeApiErrWrapper);h(!0);v(!1)})}function m(c,d){c.find("li").on("click",function(){c.find("li.selected").removeClass("selected");d.find("select option").removeAttr("selected");a(this).addClass("selected");b(a(this));e(!0)});d.on("change",function(){var d=a(this).find("option:selected");c.find("li.selected").removeClass("selected");
d.data("skip")?e(!1):(b(d),e(!0))})}function p(){var b=q.$phoneNumberField.parent().find(".form-control-feedback"),c=/^[0-9]{10,12}$/;q.$phoneNumberField.on("change keyup",function(){""!==a(this).val()?c.test(q.$phoneNumberField.val())?(b.removeClass("fa-exclamation-triangle").addClass("fa-check"),b.attr("id","phone-number-accepted")):(b.removeClass("fa-check").addClass("fa-exclamation-triangle"),b.attr("id","phone-number-invalid")):(b.removeClass("fa-check fa-exclamation-triangle"),b.removeAttr("id"))})}
function v(a){a?(q.$postcodeSearchBtn.removeClass("ready").addClass("loading"),q.$postcodeSearchBtn.attr("disabled","disabled")):(q.$postcodeSearchBtn.removeClass("loading").addClass("ready"),q.$postcodeSearchBtn.removeAttr("disabled"))}function B(a){a.find("form").submit(function(b){b.preventDefault();t(a)})}function t(a){var b=q.$postcodeInput.val().replace(/\s+/g,"");a.removeClass("serv-menu-open");q.$cantFindAddrCta.attr("data-did-second-search",!1);q.$cantFindAddrCta.removeAttr("href");h(!1);
d(!1,q.$nextBtn,q.$postcodeNotFoundWrapper,q.$postcodeApiErrWrapper,q.$postcodeInvalidWrapper,q.$postcodeSecondSearchErrWrapper);b.match(/^[a-zA-Z]{1,2}[0-9R][0-9a-zA-Z]?[0-9](?!.?[CIKMOV])[a-zA-Z]{2}$/i)&&""!==b?(v(!0),k().then(function(){n(b)}).fail(function(){d(!1,q.$postcodeFoundWrapper,q.$postcodeApiErrWrapper,q.$postcodeSecondSearchErrWrapper,q.$nextBtn);d(!0,q.$postcodeApiErrWrapper);h(!0);v(!1)})):(d(!1,q.$postcodeFoundWrapper),d(!0,q.$postcodeInvalidWrapper),h(!0))}function D(b){function c(){var a=
e.find(".serv-m-item-open");a.removeClass("serv-m-item-open");a.find(".serv-m-item-inner").addClass("hidden")}function d(a){var c=a.address&&a.address.postcode,d=a.speed||"";a=(a=p.attr("data-bb-speed-items").match(/\{[^}]+\}|[^,.\s\[\]]+/g).find(function(a){return d===JSON.parse(a).bbSpeedValue}))?JSON.parse(a).bbSpeedText:p.data("bb-speed-not-matched");b.addClass("has-localstorage");p.removeClass("hidden");var g=Handlebars.compile(p.find("script").html());p.find("p").html(g({postcode:c,bbSpeedMsg:a}))}
function g(a){(a.statusDetails&&a.statusDetails.serviceDetails).forEach(function(a){a.saleable&&m.find(".serv-s-icn-"+a.serviceType).addClass("serv-s-icn-tick")})}var e=b.find(".serv-menu"),f=e.find(".serv-m-item-expandable"),h=e.find(".serv-m-item-close"),k=b.find(".serv-home-icn"),l=b.find(".serv-form-no-localstorage"),p=b.find(".serv-form-has-localstorage"),n=b.find(".serv-form-refresh-btn"),m=b.find(".serv-service-icons");h.on("click",function(a){a.stopPropagation();b.removeClass("serv-menu-open");
c()});k.on("click",function(){b.hasClass("serv-menu-open")&&(b.removeClass("serv-menu-open"),c())});f.on("click",function(){var d=a(this),g=d.find(".serv-m-item-inner");d.hasClass("serv-m-item-open")||(c(),b.addClass("serv-menu-open"),d.addClass("serv-m-item-open"),g.removeClass("hidden"))});p.on("click",function(){b.hasClass("serv-menu-open")&&(c(),b.removeClass("serv-menu-open"))});n.on("click",function(){localStorage.removeItem("cableServiceability");sessionStorage.removeItem("journeyServiceability");
a.removeCookie("SJSESSIONID",{path:"/"});p.addClass("hidden");l.removeClass("hidden");b.removeClass("has-localstorage")});a("#inqImgWidgetContainer").bind("DOMSubtreeModified propertychange",function(){var b=a("#inqImgWidgetContainer img").attr("src");"undefined"!=typeof b&&-1<b.indexOf("blank_available")&&a("#serv-widget-chat-now").removeClass("disabled")});null!==localStorage.getItem("cableServiceability")?(f=JSON.parse(localStorage.getItem("cableServiceability")),d(f),g(f)):l.removeClass("hidden");
e.removeClass("hidden")}function z(b){var c=b.offset().top;a(window).on("resize scroll",function(){var d=a(window).scrollTop();c<d?b.addClass("serv-sticky"):b.removeClass("serv-sticky")})}function C(b,d){var e=a(d),f=x.getParametersFromUrl();e.hasClass("serv-default")&&(q.variant="serv-default");e.hasClass("serv-check-availability")&&(q.variant="serv-check-availability");e.hasClass("serv-searchbox-only")&&(q.variant="serv-searchbox-only");q.isSticky=e.find(".serv-wrapper").data("is-sticky");q.$postcodeSearchBtn=
e.find(".serv-btn-search");q.$nextBtn=e.find(".serv-btn-next");q.$cancelBtn=e.find(".serv-btn-cancel");q.$postcodeInput=e.find("input[name\x3dpostcode]");q.$phoneNumberField=e.find(".serv-phone-num-field input");q.$addrListWrapper=e.find(".serv-results-wrapper");q.$cantFindAddrCta=e.find(".serv-cant-find-addr-cta");q.$postcodeFoundWrapper=e.find(".serv-postcode-found");q.$postcodeNotFoundWrapper=e.find(".serv-postcode-err.serv-postcode-not-found");q.$postcodeInvalidWrapper=e.find(".serv-postcode-err.serv-invalid-postcode");
q.$postcodeApiErrWrapper=e.find(".serv-postcode-err.serv-postcode-api-err");q.$postcodeSecondSearchErrWrapper=e.find(".serv-postcode-err.serv-addr-second-search-err");x.getJourneyConfig("apis-section").then(function(a){u=a;F=x.getApiByID(u,"serviceability_post");G=x.getApiByID(u,"addresses_get");A=x.getApiByID(u,"store_put");H=x.getApiByID(u,"prospect_post");N=x.getApiByID(u,"basket_get");I=x.getApiByID(u,"basket_post");x.setStoreDomain(f).always(function(a){"string"===typeof a&&(E=a);B(e);c(q.$cancelBtn);
g(q.$nextBtn);q.isSticky&&z(e);"serv-default"===q.variant&&D(e);"serv-check-availability"===q.variant&&f.postcode&&(q.$postcodeInput.val(f.postcode),t(e))})});if("onpagehide"in window)a(window).on("pagehide",function(){a("body").css("opacity","0")});else a(window).on("beforeunload",function(){a("body").css("opacity","0")});a(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()})}var y={},q={},x=common.Utils,u,E,F,G,A,H,N,I,M=x.getStoreCode();y.load=function(a){a.each(C)};
f.register({name:"serviceability",api:y,selector:".serviceability"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){for(var c in b)if(b.hasOwnProperty(c)){var d=c,g=b[c];!0===g||"yes"===g?a("#serv-widget-"+d).addClass("serv-widget-tick"):"maybe"===g&&a("#serv-widget-"+d).addClass("serv-widget-question")}w.cookieState=!0}function e(a){"error"===a||"reset"===a?"error"===a&&(w.$servOutput.html("error"),w.$servOutputSearchbox.html("error"),w.$servOutputSearchboxBtn.html("error")):pa.hasOwnProperty(a)&&pa[a].tiers&&h(pa[a].tiers)}function d(){a("#serv-widget").addClass("postcode-error");
a(".serviceability-default #serv-output").show().html(ka);w.$servOutputSearchbox.show().html(sa);w.$servOutputSearchboxBtn.show().html(sa);w.$moversServOutputSearchboxBtn.show();w.$postcodeField.blur();767<g().width&&(w.formWidth=416);a(".serviceability-default span#serv-widget-form-title").hide();l(!0);w.$postcodeField.click(function(){b()})}function b(){a("#serv-widget").removeClass("postcode-error");979<a(window).width()&&a(".serviceability-default span#serv-widget-form-title").show();w.$servOutput.hide();
w.$servOutputSearchbox.hide();w.$servOutputSearchboxBtn.hide();w.$moversServOutputSearchboxBtn.hide();w.$servWidget.hasClass("cookie-present")?w.formWidth=590:980>g().width?w.formWidth=244:w.formWidth=416;l(!0)}function c(){w.$postcodeField.click(function(){a(this).val("")})}function g(){var a=window,b="inner";"innerWidth"in window||(b="client",a=document.documentElement||document.body);return{width:a[b+"Width"],height:a[b+"Height"]}}function k(){a("#serv-widget-get-in-touch .serv-widget-icon-open").click(function(){r("open-newcustomers",
"#serv-widget-get-in-touch","tablet-newcustomers")});a("#serv-widget-existing-customer .serv-widget-icon-open").click(function(){r("open-customers","#serv-widget-existing-customer","tablet-customers")});w.$widgetFormOpen.click(function(){l()});w.$servWidgetIconUnitsClose.click(function(){l()});w.$widgetFormRefresh.click(function(){a.removeCookie("cable_serviceability",{path:"/",domain:".virginmedia.com"});a("#serv-widget").removeClass("cookie-present");n();return!1});a(".cookie-present #serv-widget-form-cookie").click(function(){l()});
a("#get-in-touch-sublink4").click(function(){CP_launchCallbackPopup();return!1})}function r(c,d,e){w.$servWidget.removeClass("open-newcustomers").removeClass("open-customers").removeClass("open").removeClass("tablet-newcustomers").removeClass("tablet-customers");b();979<g().width?(w.$servOutput.hide(),w.$servOutputSearchbox.hide(),w.$servOutputSearchboxBtn.hide(),w.$servWidgetIconUnitsHolder.width(w.$servWidget.width()-88),w.$servWidgetIconUnits.attr("style",""),w.$servWidget.addClass(c),a(d).width(w.$servWidget.width()-
88*w.numberOfButtons-w.numberOfButtons),w.$widgetFormRefresh.attr("style","")):w.$servWidget.addClass("open").addClass(e)}function l(a){w.$servWidget.removeClass("open-newcustomers").removeClass("open-customers").removeClass("open").removeClass("tablet-newcustomers").removeClass("tablet-customers");if(768>g().width)w.$servWidgetIconUnitsHolder.attr("style","");else if(979<g().width||!0===a)w.$servWidgetIconUnitsHolder.attr("style",""),w.$servWidgetIconUnits.attr("style",""),a=w.$servWidget.width()-
w.formWidth,w.$servWidgetIconUnitsHolder.width(a)}function n(){w.$widgetHiddenForm.attr("style","");w.$postcodeField.attr("style","");w.$servWidgetIconUnits.attr("style","");if(768>window.innerWidth){w.mode="mobile";var a=w.$servWidget.width()-60,c=a-34-18-20;w.$widgetHiddenFormDefault.width(a);w.$postcodeFieldDefault.width(c)}else 980>window.innerWidth&&(w.mode="tablet",w.$servWidget.hasClass("cookie-present")?w.formWidth=590:w.formWidth=244);b();l()}function m(){var b=a("#inqImgWidgetContainer img").attr("src");
"undefined"!=typeof b&&-1<b.indexOf("blank_available")&&(a("#serv-widget-chat-now").attr("class","serv-widget-icon-unit"),w.$servWidgetIconUnitsHolder.attr("class","icons4"))}function p(){w.$postcodeField.on("focus",function(){l(!0);a("#serv-output").is(":visible")&&(a("#serv-output").hide(),244<a("#serv-widget-form-nocookie").width()&&a(".serviceability-default #serv-widget-form-title").hide(),a("#serv-widget").removeClass("postcode-error"),a("#postcode-field").val(""));979<window.innerWidth&&a(".serviceability-default #serv-widget-form-title").show();
z(L[0]);w.$servOutputSearchbox.hide();w.$servOutputSearchboxBtn.hide()})}function v(){w.$moversForm.on("submit",function(b){b.preventDefault();b=w.$moversForm.find("#next");b.attr("disabled",!0).addClass("disable-element");b.val(b.data("text-swap"));b=w.$moversForm.attr("action");var c=a("#premiseId").val(),d=a("#siteId").val(),g=a("#addrSrc").val(),e=a("#uprn").val(),f=a("#premiseId").val(),h=w.$postcodeField.val().replace(/\s+/g,""),k,l;a.ajax({type:"POST",url:b,cache:!1,crossDomain:!0,data:{siteId:d,
addressIdentifier:c},xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(b){b=a.cookie("cable_serviceability");b=P.getCookieObject(b);var c=a("#partialServiceableRedirect").val();"serviceable"===b.status||"active"===b.status?window.location.href=a("#fullyServiceableRedirect").val():(d&&f&&(k=d+f.padStart(7,"0")),l={postcode:h,uid:k,uprn:e,addrSrc:g},c=B(c,!0,l),window.location.href=c)}})})}function B(b,c,d){a.each(d,function(a,
d){d&&(b+=c?"?"+a+"\x3d"+d:"\x26"+a+"\x3d"+d,c=!1)});return b}function t(){w.$widgetForm.submit(function(b){b.preventDefault();K=!0;b=a(".btn-serve");var c=a(".btn-serve \x3e span");U=setInterval(q,300);b.val(b.data("text-swap"));c.html(b.data("text-swap"));y(!0);w.$postcodeField.val().replace(/\s+/g,"").match(Y)&&""!==w.$postcodeField.val()?(l(!0),a("input.btn-serve").attr("disabled","disabled"),ha?z(L[1]):Z||(D(),C())):(d(),y(!1),C())})}function D(){w.$addressResults.slideUp();979>window.innerWidth&&
a("#serv-widget").addClass("postcode-error")}function z(b,c){switch(b){case L[0]:if(Z)break;a("input.btn-serve").removeAttr("disabled");Z=!0;ha=!1;a.ajax({type:"GET",url:b,cache:!1,xhrFields:{withCredentials:!0},timeout:2E4,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.setRequestHeader("Accept","application/json")},success:function(){ha=!0;Z=!1;K?z(L[1]):a("input.btn-serve").removeAttr("disabled")},error:function(){Z=ha=!1;D();C()},complete:function(){ha||D()}});
break;case L[1]:a("input.btn-serve").attr("disabled","disabled"),c&&(b+="?addrSrc\x3d2"),a.ajax({type:"POST",url:b,cache:!1,dataType:"json",data:{postcode:w.$postcodeField.val().replace(/\s+/g,"")},xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(b){O=!0;X=b;for(var d in X)if("faultList"===d){D();break}a("#addrSrc").val(X.addrSrc);X.addrSrc=X.addrSrc||"2";"1"==X.addrSrc&&(E(fa,da,ja),u(ma,na),ma.find("a").on("click",function(){z(L[1],
!0)}),na.find("a").on("click",function(){z(L[1],!0)}));if("2"==X.addrSrc)if(c)if((b=X.addressList)&&b.length)u(fa,da,ja),E(ma,na),fa.find("a").on("click",function(){window.location=fa.find("a").data("storeManualEntry")}),da.find("a").on("click",function(){window.location=da.find("a").data("storeManualEntry")});else{window.location=fa.find("a").data("storeManualEntry");window.location=da.find("a").data("storeManualEntry");return}else u(fa,da),E(ma,na,ja),fa.find("a").on("click",function(){window.location=
fa.find("a").data("cmsManualEntry")+"?postcode\x3d"+w.$postcodeField.val().replace(/\s+/g,"")}),da.find("a").on("click",function(){window.location=da.find("a").data("cmsManualEntry")+"?postcode\x3d"+w.$postcodeField.val().replace(/\s+/g,"")});x(X);F()},error:function(){D()},complete:function(){O&&(C(),a(".button-container").removeClass("disabled"))}})}}function C(){var b=a(".btn-serve"),c=a(".btn-serve \x3e span");b.val(b.data("text-original"));c.html(b.data("text-original"));clearInterval(U);y(!1);
K=O=!1;a("input.btn-serve").removeAttr("disabled")}function y(b){b?(a(".btn-serve").removeClass("ready").addClass("loading"),w.$moversLoadingOutputSearchboxBtn.show()):(a(".btn-serve").removeClass("loading").addClass("ready"),w.$moversLoadingOutputSearchboxBtn.hide())}function q(){var b=a(".btn-serve"),c=a(".btn-serve \x3e span");3>T?(b.val(b.val()+"."),c.html(b.val()+"."),T++):(b.val("Please wait"),c.html("Please wait"),T=0)}function x(b){var c={};c.source=la;c.manualAddress='\x3ca href\x3d"'+fa.find("a").data("cmsManualEntry")+
"?postcode\x3d"+w.$postcodeField.val().replace(/\s+/g,"")+'"\x3eenter your address manually\x3c/a\x3e';c=Handlebars.compile(la.html())(c);la.html(c);c=Handlebars.compile(ia);ea.html(c(b));c=Handlebars.compile(oa);ba.html(c(b));b=null!==X.addressList&&void 0!==X.addressList?X.addressList.length:0;u(qa,ra);E(la);0===b?(D(),w.$addressResults.slideDown(),u(la),E(qa,ra,fa,da,ma,na,ja),a(".cancel-address").click(function(){N();w.$widgetHiddenFormSearchbox.removeClass("address-results-open");w.$widgetHiddenFormSearchboxBtn.removeClass("address-results-open");
w.$moversWidgetHiddenFormSearchboxBtn.removeClass("address-results-open")})):(w.$addressResults.slideDown(),w.$servOutputSearchbox.hide(),w.$servOutputSearchboxBtn.hide(),w.$widgetHiddenFormSearchbox.addClass("address-results-open"),w.$widgetHiddenFormSearchboxBtn.addClass("address-results-open"),w.$moversWidgetHiddenFormSearchboxBtn.addClass("address-results-open"),a(".cancel-address").click(function(){N();w.$widgetHiddenFormSearchbox.removeClass("address-results-open");w.$widgetHiddenFormSearchboxBtn.removeClass("address-results-open");
w.$moversWidgetHiddenFormSearchboxBtn.removeClass("address-results-open")}),G(),a("html, body").animate({scrollTop:a("#serviceability-auto-scroll-focus").offset().top},600),I(),M())}function u(){for(var a=0;a<arguments.length;a++)arguments[a].removeClass("hidden")}function E(){for(var a=0;a<arguments.length;a++)arguments[a].addClass("hidden")}function F(){a("ul.address-list li").on("click",function(){var b=a(this);a(b).attr("data-skip")||(a("ul.address-list li").removeClass("selected"),A(),a(b).addClass("selected"),
b=a(b).data(),H(b,!1))});a("select#addressIdentifier").on("change",function(){var b=a("#addressIdentifier option:selected");b.data("skip")?G():(b=b.data(),H(b,!0),A())})}function G(){a("#next").addClass("disable-element").attr("disabled","disabled")}function A(){a("#next").removeClass("disable-element").removeAttr("disabled")}function H(b,c){var d=b.uprn,g=b.siteId;b=b.premiseId;var e=a("#uprn"),f=a("#siteId"),h=a("#premiseId");c||a("select#addressIdentifier option").removeAttr("selected");b&&g?(f.val(g),
h.val(b)):(f.remove(),h.remove());d?e.val(d):(e.remove(),a("#postcode").remove())}function N(){w.$addressResults.height();w.$addressResults.slideUp(function(){w.$postcodeField.val("");a("#next").addClass("disable-element").attr("disabled","disabled")});w.$widgetHiddenFormSearchbox.removeClass("address-results-open");w.$widgetHiddenFormSearchboxBtn.removeClass("address-results-open");w.$moversWidgetHiddenFormSearchboxBtn.removeClass("address-results-open");w.$stickinessPlaceHolder.is(":visible")&&
w.$stickinessPlaceHolder.slideUp()}function I(){var b=a(".phone-number-field"),c=b.find("input"),d=b.find(".form-control-feedback"),g=/^[0-9]{10,12}$/;c.on("change keyup",function(){""!==a(this).val()?g.test(c.val())?(d.removeClass("fa-exclamation-triangle").addClass("fa-check"),d.attr("id","phone-number-accepted")):(d.removeClass("fa-check").addClass("fa-exclamation-triangle"),d.attr("id","phone-number-invalid")):(d.removeClass("fa-check fa-exclamation-triangle"),d.removeAttr("id"))})}function M(){a("#optInCb").on("change",
function(){var b=a(this).prop("checked")?"true":"false";a("#marketingConsent").val(b)})}function J(){if(!a.cookie("cable_serviceability")&&!0===V){var b=w.$contentWrapper;a(window).scroll(function(){var c=window.pageYOffset;0>ta&&(ta=b.offset().top);c=ta-c;767<a(window).width()&&(0>c&&!b.hasClass("fix-top")?(c=a(".serviceability-icoms-dna").width(),b.addClass("fix-top").css({width:c}),w.$stickinessPlaceHolder&&(c=w.$contentWrapper?w.$contentWrapper.height():0,w.$stickinessPlaceHolder.height(c)),w.$stickinessPlaceHolder.show()):
0<=c&&b.hasClass("fix-top")&&(b.removeClass("fix-top"),w.$stickinessPlaceHolder.hide()))})}}function Q(){W=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);aa=a("#widget-form").data("apiGetToken");ca=a("#widget-form").data("apiCheckAddress");V=a("#widget-form").data("isSticky");L=[aa,ca];ka='\x3cspan class\x3d"serv-output-icon"\x3e\x3c/span\x3e Invalid postcode.';sa='\x3cspan class\x3d"serviceability-searchbox-error fa fa-exclamation-triangle"\x3e\x3c/span\x3eInvalid postcode.';
ma=a(".click-here-col");na=a(".mobile-click-here");fa=a(".manual-address-col");da=a(".mobile-manual-addr");ja=a(".form-request-feedback");qa=a(".results-col");ra=a(".confirmAddressButton");la=a(".no-postcode-feedback");a("input.btn-serve").attr("disabled","disabled");w.$servWidget=a("#serv-widget");w.$servOutput=a("#serv-output");w.$servOutputSearchbox=a(".serviceability-searchbox #serv-output-searchbox");w.$servOutputSearchboxBtn=a(".serviceability-searchbox-btn #serv-output-searchbox");w.$moversServOutputSearchboxBtn=
a(".movers-serviceability-searchbox-btn #movers-serv-output-searchbox");w.$moversLoadingOutputSearchboxBtn=a(".movers-serviceability-searchbox-btn #movers-loading-output-searchbox");w.$fullyServiceableRedirect=a("#fullyServiceableRedirect");w.$partialServiceableRedirect=a("#partialServiceableRedirect");w.$servCookieOutput=a("#serv-cookie-output");w.$servWidgetIconExpandables=a(".serv-widget-icon-expandable");w.$servWidgetIconUnitsOpen=a(".serv-widget-icon-open");w.$servWidgetIconUnitsClose=a(".serv-widget-icon-close");
w.$servWidgetIconUnitsInner=a(".serv-widget-icon-inner");w.$servWidgetIconUnits=a(".serv-widget-icon-unit");w.$servWidgetIconUnitsHolder=a("#serv-widget-icon-units");w.$widgetForm=a("#widget-form");w.$moversForm=a(".movers-serviceability-searchbox-btn #serviceabilityForm");w.$widgetFormOpen=a("#serv-widget-form-open");w.$widgetFormRefresh=a("#serv-widget-form-refresh");w.$widgetHiddenForm=a("#serv-widget-hidden-form");w.$widgetHiddenFormDefault=a(".serviceability-default #serv-widget-hidden-form");
w.$postcodeField=a("#postcode-field");w.$postcodeFieldDefault=a(".serviceability-default #postcode-field");w.$addressResults=a(".address-results");w.$contentWrapper=a(".serviceability-content");w.$stickinessPlaceHolder=a("#serviceability-stickiness-placeholder");w.$widgetHiddenFormSearchbox=a(".serviceability-searchbox #serv-widget-hidden-form");w.$widgetHiddenFormSearchboxBtn=a(".serviceability-searchbox-btn #serv-widget-hidden-form");w.$moversWidgetHiddenFormSearchboxBtn=a(".movers-serviceability-searchbox-btn #serv-widget-hidden-form");
w.$chatNow=a("#serv-widget-chat-now");w.numberOfButtons=w.$servWidgetIconUnits.length;w.animationSpeed=150;w.mode="desktop";w.cookieState=!1;a("input.btn-serve").attr("disabled","disabled");p();n();ba=a(".serviceability-icoms-dna #addressIdentifier");oa=a("#addressOptionTemplate").html();ea=a(".serviceability-icoms-dna .address-container-clip .address-list");ia=a("#addressItemsTemplate").html();var b=a("#get-in-touch-sublink3");if(b.length){var d=b.attr("data-href").split("_")[2];b.attr("href","tel:"+
d)}R();c();b=a.cookie("cable_serviceability");b=P.getCookieObject(b);if(a.cookie("cable_serviceability")){d=a.cookie("cable_serviceability").indexOf(":")+1;var g=a.cookie("cable_serviceability").indexOf("|");d=a.cookie("cable_serviceability").substr(d,g-d);w.$postcodeField.val(d);w.$servCookieOutput.html(w.$servCookieOutput.html()+"\x3cstrong\x3e"+d+' \x3cspan class\x3d"output-dash"\x3e-\x3c/span\x3e \x3c/strong\x3e ');b.bbspeed&&"null"!=b.bbspeed?(d=w.$servCookieOutput.data("bbspeed-before"),g=w.$servCookieOutput.data("bbspeed-after"),
w.$servCookieOutput.html(w.$servCookieOutput.html()+'\x3cspan class\x3d"output-message"\x3e'+d+b.bbspeed+g+"\x3c/span\x3e")):w.$servCookieOutput.html(w.$servCookieOutput.html()+'\x3cspan class\x3d"output-message"\x3eServices available\x3c/span\x3e');a("#serv-widget").addClass("cookie-present")}"National"===b.status||"unserviceable"===b.status?e("national"):"part_serviceable"===b.status?e("maybe"):"serviceable"===b.status?e("serviceable"):h({tv:b.dtv&&"sale"===b.dtv,ph:b.phone&&"sale"===b.phone,bb:b.bb&&
"sale"===b.bb});n();t();v();a("#inqImgWidgetContainer").bind("DOMSubtreeModified propertychange",m);k();b=a(window).width();W&&768>b&&w.$chatNow.addClass("hidden");J()}function R(){a(window).resize(function(){if(!a("html").hasClass("ie8")){var b=w.$contentWrapper;if(767<a(window).width()&&b.hasClass("fix-top")){var c=a(".serviceability-icoms-dna").width();b.css({width:c})}n()}979<a(window).width()?a(".serviceability-default #serv-widget-form-title").show():a(".serviceability-default #serv-widget-form-title").hide()})}
var S={},T=0,K=!1,O=!1,U,Z=!1,P=common.cmsUtils,Y=/^[a-zA-Z]{1,2}[0-9R][0-9a-zA-Z]?[0-9](?!.?[CIKMOV])[a-zA-Z]{2}$/i,W,aa,ca,V,w={},L,X={},ea,ba,ia,oa,ha=!1,ka,sa,ta=-1,ma,na,fa,da,ja,qa,ra,la,pa={serviceable:{tiers:{tv:"yes",ph:"yes",bb:"yes"}},fibre:{tiers:{tv:"no",ph:"yes",bb:"yes"}},"fibre-referral":{tiers:{tv:"no",ph:"no",bb:"no"}},national:{tiers:{tv:"no",ph:"no",bb:"no"}},"national-referral":{tiers:{tv:"no",ph:"yes",bb:"yes"}},"national-referral-oct":{tiers:{tv:"no",ph:"no",bb:"no"}},maybe:{tiers:{tv:"maybe",
ph:"maybe",bb:"maybe"}}};S.init=function(a){a.each(Q)};f.register({name:"serviceability-icoms-dna",api:S,selector:".serviceability-icoms-dna"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=[".registration-circle",".planning-circle",".coming-soon-circle",".serviceable-circle"];for(var b=["#342234","#442a56","#ed0000","#ed0000"],c=0;c<e.length;c++){var g=a(d).find(e[c]),f="url("+g.data("image")+") no-repeat 50% "+b[c];g.css("background",f)}e=window.matchMedia("(max-width: 768px)").matches;b=a(d).find(".area-item");c={items:1,startPosition:0};b&&e&&(b.addClass("mobile-enabled owl-carousel owl-theme"),a(d).find(".mobile-enabled").owlCarousel(c))}f.register({name:"progress-bar-indicator",
api:{load:function(a){a.each(h)}},selector:".progress-bar-indicator"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){d=a(b).find(".lightning-splitter-content");if(!d.hasClass("author")){b=common.cmsUtils;var c=a.cookie("cable_serviceability");if((b=b.getCookieObject(c))&&"true"===b.LPremise){c=!0;if(d.hasClass("contentBasedUserCookieLRDate")){var g=b.LRDate.split("/");g=new Date(g[2],g[1]-1,g[0]);var f=new Date;g.setMonth(g.getMonth()+d.data("monthsavailable"));f.setHours(0,0,0,0);f<g&&(c=!1)}else d.hasClass("contentBasedOnDates")&&(g=moment(d.data("startdate"),"DD-MM-YYYY"),f=moment(d.data("enddate"),
"DD-MM-YYYY"),moment(b.LRDate,"DD-MM-YYYY").isBetween(g,f)||(c=!1));if(d.hasClass("lightning-users")&&c)switch(b.status){case "serviceable":e(d,"fully-serviceable");break;case "part_serviceable":e(d,"part-serviceable");break;case "active":e(d,"active");break;default:d.remove()}}else e(d,"non-lightning-users")}}function e(a,b){a.hasClass(b)?a.removeClass("hidden"):a.remove()}f.register({name:"lightning-on-off-splitter",api:{load:function(a){a.each(h)}},selector:".lightning-on-off-splitter"})})(VMJS,
VMJSjQuery);
(function(f,a,h){var e=Object.freeze({cache:!1,dataType:"json",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",method:"GET",headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}],withCredentials:!0}),d=function(c){a(".basket-wrapper").off("click").on("click",".clear-basket-cta",function(){b("#clear-basket-overlay-template",{productName:c});a("#serv-widget").addClass("hide");a(".basket").addClass("hide-line")});a(".basket-wrapper").on("click",".confirm-clear-basket-cta",
function(){common.AsyncService.ajaxPromise(a.extend(!0,{},e,{url:storeURL+basketClearEndpoint})).then(function(){a.removeCookie("saveBasketCookie",{path:"/"});a.removeCookie("savedBasketDetails",{path:"/"});a.removeCookie("vmBasketItems",{path:"/"});a(".empty-basket-cta, #serv-widget").removeClass("hide");a(".basket").removeClass("hide-line");a(".full-basket-cta").addClass("hide");b("#empty-basket-template",{status:g()})})});a(".basket-wrapper").on("click",".deny-clear-basket-cta",function(){a("#serv-widget").removeClass("hide");
a(".basket").removeClass("hide-line");k()})},b=function(b,c){b=h.compile(a(b).html())(c);a(".basket-wrapper").html(b)},c=function(b,c){if(b=a.cookie(b)){b=b.split("|");var d={},g;for(g in b)if(b.hasOwnProperty(g)){var e=b[g].split(c);d[e[0].replace(/"/g,"")]=e[1].replace(/"/g,"")}return d}},g=function(){var a=c("cable_serviceability",":"),b=a?a.status:void 0;b&&"part_serviceable"===b&&"sale"!==a.bb&&(b="unserviceable");return b},k=function(){common.AsyncService.ajaxPromise(a.extend(!0,{},e,{url:storeURL+
basketDetailsEndpoint})).then(function(e){if(e.basket){var f={bundleName:e.totals.bundle.name,monthlyCost:e.totals.bundle.monthly.discounts[0].priceAfterDiscount,contractDuration:e.totals.bundle.monthly.discounts[0].term,oneOffCost:e.totals.installationActivationCost.priceAfterDiscount};a(".empty-basket-cta").addClass("hide");a(".full-basket-cta").removeClass("hide");b("#full-basket-template",f)}else f=e.serviceability.status||g(),a(".empty-basket-cta").removeClass("hide"),a(".full-basket-cta").addClass("hide"),
b("#empty-basket-template",{status:f});e=e.totals?e.totals.bundle.name:(e=c("savedBasketDetails","\x3d"))?e.bundleName:void 0;d(e)}).fail(function(b){a(".component-error").html("Failed to retrieve basket from api.");a(".component-error").removeClass("hide")})},r=function(){var b=a(".basket-component").data("current-page");return b?aem.QueryBuilder.getSelectiveData({path:b+"/jcr:content",properties:["sling:resourceType","componentVariantId"]}).then(function(a){return 0!==a.filter(function(a){return"onecms/core/components/serviceability"===
a["sling:resourceType"]&&"serviceability-prosecco"===a.componentVariantId}).length}):!1},l=function(){if(a.cookie("agentid"))a(".component-error").html("Found agent id cookie, can't display component."),a(".component-error").removeClass("hide");else{var c=a.cookie("vmBasketItems"),d=a.cookie("saveBasketCookie");c&&1<c||d?r().then(function(b){b?(a(".services-wrapper").removeClass("hide-on-mobile"),a(".services-wrapper").removeClass("small-width-mobile"),k()):(a(".component-error").html("Serviceability component not found on the page, can't display component."),
a(".component-error").removeClass("hide"))}):(a(".empty-basket-cta").removeClass("hide"),a(".full-basket-cta").addClass("hide"),b("#empty-basket-template",{status:g()}))}};f.register({name:"basket-component",api:{init:function(b){b.length&&a.cookie("cable_serviceability")?b.each(l):a(".basket-component-collapsed").addClass("hide")}},selector:".basket-component"})})(VMJS,VMJSjQuery,Handlebars);
(function(f,a){function h(){z=a(".service-wrap-header-container");C=z.attr("data-api-serviceability");y=z.attr("data-api-gettoken");q=common.cmsUtils;x=a(".cms-service-wrap-form");u=x.find("#datepicker");E=x.find("#movingDate");F=x.find(".datepicker-wrap");G=x.attr("data-cmstestemail");A=a.cookie("cable_serviceability");H=q.getCookieObject(A);common.AsyncService.ajaxPromise({method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",cache:!1,xhrFields:{withCredentials:!0},
url:y,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(){common.AsyncService.ajaxPromise({dataType:"json",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",method:"POST",cache:!1,xhrFields:{withCredentials:!0},url:C,data:{postcode:H.postcode,uprn:H.uprn,addrSrc:H.addrSrc,premiseId:H.saId},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(a){a=a.serviceability||
{};0<x.length&&d(a);0<z.length&&e(a)})})}function e(d){N=z.find(".header-background");z.find(".service-wrap-plectrum");I=N.data("desktopBackground");M=N.data("mobileBackground");J=window.matchMedia("(max-width: 768px)");a("#plectrum-img");c();a(window).resize(function(){c()});b(d.outcomeId);a("\x3cp\x3e"+d.address+"\x3c/p\x3e").appendTo(".address")}function d(b){x.find(".selectpicker").selectpicker("refresh");l();p();v();k();if(x.length)x.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",
function(c){if(!c.isDefaultPrevented()){c.preventDefault();c=a(this);var d=x.find(".submit-cta button");d.attr("disabled",!0);var e=r(c);e=g(e,b);return common.AsyncService.ajaxPromise({dataType:"json",contentType:"application/json",method:"POST",cache:!1,url:c.prop("action"),data:e}).then(function(){t("success")}).fail(function(a){t("error");d.attr("disabled",!1)})}})}function b(b){a(".title-and-description-"+b).css("display","block");a(".details-"+b).css("display","block")}function c(){J.matches?
N.css("background-image","url("+M+")"):N.css("background-image","url("+I+")")}function g(a,b){function c(a){var b="",c;for(c in a)b=b+c+": "+a[c]+"\x3cbr/\x3e";return b}var d=b.address.split(","),g=2<d.length?d.slice(1,-1).join(","):d[0],e={"Under Construction":"","Agent Name":"N/A","Agent Email":"N/A",Channel:"Online","Rep Number":"N/A","ICOMS Premise Id":b.premise,"ICOMS Site ID":b.siteId,"Customer's Name":a.title+" "+a.firstName+" "+a.lastName,"Customer's Telephone Contact Details":a.telephone,
"Customer's Email Contact Details":a.email,"Address where service is being requested ":"","Plot Number/House Number":d[0],Street:g,Town:b.addressDetails.town,Postcode:b.postcode,"Name of Development":"N/A","Name of Developer":"N/A","Projected Move In Date":a.movingDate,"Services Customer Requested":"",TELCO:"N/A",BB:"N/A",TV:"N/A","Customers Current Address":"","Customers HouseNumber":a.buildingNumber||"N/A","Customers Street":a.street||"N/A","Customers Town":a.town||"N/A","Customers Postcode":a.postcode||
"N/A",Comments:""};d={"[ General Information ]----------------------------------------------":"",generalAgentName:"N/A",generalAgentEmail:"N/A",generalChannel:"Online",generalRepNumber:"N/A",generalIcomsPremiseId:b.premise,generalIcomsSiteId:b.siteId,generalCustomersName:a.title+" "+a.firstName+" "+a.lastName,generalCustomersTelephone:a.telephone,generalCustomersEmail:a.email,generalTelcoRequested:"N/A",generalBBRequested:"N/A",generalTVRequested:"N/A","[ Address where service is being requested ]----------------------------------------------":"",
custHouseNumberName:d[0],custStreet:g,custTown:b.addressDetails.town,custCounty:b.addressDetails.county||"unavailable",custPostcode:b.postcode,custNameOfDevelopment:"N/A",custDeveloper:"N/A",custMoveInDate:a.movingDate||"Already Moved In",serviceabilityOutcomeID:b.outcomeId,"[ Customers Current Address ]----------------------------------------------":"",currentHouseNumber:a.buildingNumber||"N/A",currentStreet:a.street||"N/A",currentTown:a.town||"N/A",currentPostcode:a.postcode||"N/A","[ Comments ]----------------------------------------------":"",
commentsComments:"","Wayleave Form ID":"0"};g={};if(2===b.outcomeId)g={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:G||b.salesLeadEmail,emailSubject:"Under Construction - \x26 "+b.postcode+" \x26 - outcome ID: "+b.outcomeId},emailBody:c(e),recaptcha_response_field:a.recaptcha_response_field};else if(3===b.outcomeId||4===b.outcomeId)g={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:G||b.salesLeadEmail,emailSubject:"New Home Builders 0 - outcome ID: "+
b.outcomeId},emailBody:c(d),recaptcha_response_field:a.recaptcha_response_field};return JSON.stringify(g)}function k(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}function r(b){var c={},d=b.serializeArray();c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value)});return c}function l(){E.parent().on("click",
function(){a(this).find("input").trigger("focusout");u.hasClass("initialized-standard")||u.hasClass("initialized-month")?(F.slideDown("slow"),u.hasClass("initialized-month")&&B()):n("standard")});x.find(".moving-date-bar span").on("click",function(){x.find(".moving-date-bar span").removeClass("active");a(this).addClass("active");n(a(this).data("option"))});u.on("changeDate",function(){E.val(u.datepicker("getFormattedDate"));E.trigger("focusout");F.slideUp("slow")})}function n(a){x.find(".moving-date-bar span").removeClass("active");
u.removeClass();switch(a){case "standard":x.find('.moving-date-bar span[data-option\x3d"standard"]').addClass("active");u.hasClass("initialized-standard")||(E.val(""),u.datepicker("destroy"),u.addClass("initialized-standard"),u.datepicker({minViewMode:0,maxViewMode:0,format:"dd/mm/yyyy",inline:!0,todayHighlight:!0,startDate:new Date,weekStart:1,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}));break;
case "month":x.find('.moving-date-bar span[data-option\x3d"month"]').addClass("active"),u.hasClass("initialized-month")||(E.val(""),u.datepicker("destroy"),u.addClass("initialized-month"),u.datepicker({minViewMode:1,maxViewMode:2,format:"dd/mm/yyyy",inline:!0,startDate:new Date,todayHighlight:!0,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}).on("changeYear",function(){setTimeout(B,100)}),B())}F.slideDown("slow")}
function m(a,b){switch(b){case "hide":x.find(a).addClass("hidden");x.find(a).find("input").removeAttr("required","");x.find(a).find("input[type\x3dtext]").val("");x.find(a).find("input[type\x3dradio]").prop("checked",!1);x.validator("reset");break;case "show":x.find(a).removeClass("hidden"),x.find(a).find("\x3e .form-group input").attr("required","")}x.validator("update")}function p(){x.find(".already-moved input").change(function(){switch(a(this).val()){case "yes":m(".moving-date-wrap","hide");m(".existing-customer-wrap",
"hide");m(".existing-customer-address","hide");F.slideUp("slow");break;case "no":m(".moving-date-wrap","show"),m(".existing-customer-wrap","show")}});x.find(".existing-customer input").change(function(){switch(a(this).val()){case "yes":m(".existing-customer-address","show");break;case "no":m(".existing-customer-address","hide")}})}function v(){var a=x.find(".privacy-slide-panel");x.find("#privacy-show").click(function(b){b.preventDefault();a.slideToggle("fast")});x.find("#privacy-close").click(function(b){b.preventDefault();
a.slideUp()})}function B(){var a=(new Date).getFullYear(),b=parseInt(u.find(".datepicker-months .datepicker-switch").html());a===b&&u.find(".datepicker-months .month:not(.disabled)").first().addClass("current-month")}function t(b){var c=x.find(".form-request-feedback"),d=x.parent().find(".form-request-success");"success"==b?(x.addClass("hidden"),c.addClass("hidden"),d.removeClass("hidden")):c.removeClass("hidden");a("html, body").animate({scrollTop:x.offset().top},500)}var D={},z,C,y,q,x,u,E,F,G,
A,H,N,I,M,J;D.load=function(a){a.length&&h()};f.register({name:"cms-service-wrap",api:D,selector:".service-wrap-cookie"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c){var g=c.address&&c.address.display;u=D.find(".header-background");D.find(".service-wrap-plectrum");E=u.data("desktopBackground");F=u.data("mobileBackground");G=window.matchMedia("(max-width: 768px)");a("#plectrum-img");b();a(window).resize(function(){b()});d(c.outcomeId);a("\x3cp\x3e"+g+"\x3c/p\x3e").appendTo(".address")}function e(b){z.find(".selectpicker").selectpicker("refresh");r();m();p();g();if(z.length)z.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}}).on("submit",
function(d){if(!d.isDefaultPrevented()){d.preventDefault();d=a(this);var g=z.find(".submit-cta button");g.attr("disabled",!0);var e=k(d);e=c(e,b);return common.AsyncService.ajaxPromise({dataType:"json",contentType:"application/json",method:"POST",cache:!1,url:d.prop("action"),data:e}).then(function(){B("success")}).fail(function(a){B("error");g.attr("disabled",!1)})}})}function d(b){a(".title-and-description-"+b).css("display","block");a(".details-"+b).css("display","block")}function b(){G.matches?
u.css("background-image","url("+F+")"):u.css("background-image","url("+E+")")}function c(a,b){function c(a){var b="",c;for(c in a)b=b+c+": "+a[c]+"\x3cbr/\x3e";return b}var d=b.address||{},g={"Under Construction":"","Agent Name":"N/A","Agent Email":"N/A",Channel:"Online","Rep Number":"N/A","ICOMS Premise Id":d.premiseId,"ICOMS Site ID":d.siteId,"Customer's Name":a.title+" "+a.firstName+" "+a.lastName,"Customer's Telephone Contact Details":a.telephone,"Customer's Email Contact Details":a.email,"Address where service is being requested ":"",
"Plot Number/House Number":d.houseNumberOrName,Street:d.street,Town:d.town,Postcode:d.postcode,"Name of Development":"N/A","Name of Developer":"N/A","Projected Move In Date":a.movingDate,"Services Customer Requested":"",TELCO:"N/A",BB:"N/A",TV:"N/A","Customers Current Address":"","Customers HouseNumber":a.buildingNumber||"N/A","Customers Street":a.street||"N/A","Customers Town":a.town||"N/A","Customers Postcode":a.postcode||"N/A",Comments:""},e={"[ General Information ]----------------------------------------------":"",
generalAgentName:"N/A",generalAgentEmail:"N/A",generalChannel:"Online",generalRepNumber:"N/A",generalIcomsPremiseId:d.premiseId,generalIcomsSiteId:d.siteId,generalCustomersName:a.title+" "+a.firstName+" "+a.lastName,generalCustomersTelephone:a.telephone,generalCustomersEmail:a.email,generalTelcoRequested:"N/A",generalBBRequested:"N/A",generalTVRequested:"N/A","[ Address where service is being requested ]----------------------------------------------":"",custHouseNumberName:d.houseNumberOrName,custStreet:d.street,
custTown:d.town,custCounty:d.county||"unavailable",custPostcode:d.postcode,custNameOfDevelopment:"N/A",custDeveloper:"N/A",custMoveInDate:a.movingDate||"Already Moved In",serviceabilityOutcomeID:b.outcomeId,"[ Customers Current Address ]----------------------------------------------":"",currentHouseNumber:a.buildingNumber||"N/A",currentStreet:a.street||"N/A",currentTown:a.town||"N/A",currentPostcode:a.postcode||"N/A","[ Comments ]----------------------------------------------":"",commentsComments:"",
"Wayleave Form ID":"0"},f={};if(2===b.outcomeId)f={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:x||b.salesLeadEmail,emailSubject:"Under Construction - \x26 "+d.postcode+" \x26 - outcome ID: "+b.outcomeId},emailBody:c(g),recaptcha_response_field:a.recaptcha_response_field};else if(3===b.outcomeId||4===b.outcomeId)f={emailHeader:{senderEmailAaddr:"noreply@virginmedia.co.uk",recipientEmailAddr:x||b.salesLeadEmail,emailSubject:"New Home Builders 0 - outcome ID: "+b.outcomeId},
emailBody:c(e),recaptcha_response_field:a.recaptcha_response_field};return JSON.stringify(f)}function g(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}function k(b){var c={},d=b.serializeArray();c.recaptcha_response_field=b.find("#g-recaptcha-response").val();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&(c[this.name]=this.value)});return c}function r(){y.parent().on("click",function(){a(this).find("input").trigger("focusout");
C.hasClass("initialized-standard")||C.hasClass("initialized-month")?(q.slideDown("slow"),C.hasClass("initialized-month")&&v()):l("standard")});z.find(".moving-date-bar span").on("click",function(){z.find(".moving-date-bar span").removeClass("active");a(this).addClass("active");l(a(this).data("option"))});C.on("changeDate",function(){y.val(C.datepicker("getFormattedDate"));y.trigger("focusout");q.slideUp("slow")})}function l(a){z.find(".moving-date-bar span").removeClass("active");C.removeClass();
switch(a){case "standard":z.find('.moving-date-bar span[data-option\x3d"standard"]').addClass("active");C.hasClass("initialized-standard")||(y.val(""),C.datepicker("destroy"),C.addClass("initialized-standard"),C.datepicker({minViewMode:0,maxViewMode:0,format:"dd/mm/yyyy",inline:!0,todayHighlight:!0,startDate:new Date,weekStart:1,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}));break;case "month":z.find('.moving-date-bar span[data-option\x3d"month"]').addClass("active"),
C.hasClass("initialized-month")||(y.val(""),C.datepicker("destroy"),C.addClass("initialized-month"),C.datepicker({minViewMode:1,maxViewMode:2,format:"dd/mm/yyyy",inline:!0,startDate:new Date,todayHighlight:!0,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}).on("changeYear",function(){setTimeout(v,100)}),v())}q.slideDown("slow")}function n(a,b){switch(b){case "hide":z.find(a).addClass("hidden");z.find(a).find("input").removeAttr("required",
"");z.find(a).find("input[type\x3dtext]").val("");z.find(a).find("input[type\x3dradio]").prop("checked",!1);z.validator("reset");break;case "show":z.find(a).removeClass("hidden"),z.find(a).find("\x3e .form-group input").attr("required","")}z.validator("update")}function m(){z.find(".already-moved input").change(function(){switch(a(this).val()){case "yes":n(".moving-date-wrap","hide");n(".existing-customer-wrap","hide");n(".existing-customer-address","hide");q.slideUp("slow");break;case "no":n(".moving-date-wrap",
"show"),n(".existing-customer-wrap","show")}});z.find(".existing-customer input").change(function(){switch(a(this).val()){case "yes":n(".existing-customer-address","show");break;case "no":n(".existing-customer-address","hide")}})}function p(){var a=z.find(".privacy-slide-panel");z.find("#privacy-show").click(function(b){b.preventDefault();a.slideToggle("fast")});z.find("#privacy-close").click(function(b){b.preventDefault();a.slideUp()})}function v(){var a=(new Date).getFullYear(),b=parseInt(C.find(".datepicker-months .datepicker-switch").html());
a===b&&C.find(".datepicker-months .month:not(.disabled)").first().addClass("current-month")}function B(b){var c=z.find(".form-request-feedback"),d=z.parent().find(".form-request-success");"success"==b?(z.addClass("hidden"),c.addClass("hidden"),d.removeClass("hidden")):c.removeClass("hidden");a("html, body").animate({scrollTop:z.offset().top},500)}var t={},D,z,C,y,q,x,u,E,F,G,A=JSON.parse(localStorage.getItem("cableServiceability"));t.load=function(b){b.length&&(D=a(".service-wrap-header-container"),
z=a(".cms-service-wrap-form"),C=z.find("#datepicker"),y=z.find("#movingDate"),q=z.find(".datepicker-wrap"),x=z.attr("data-cmstestemail"),A&&(0<z.length&&e(A),0<D.length&&h(A)))};f.register({name:"service-wrap-no-cookie",api:t,selector:".service-wrap-no-cookie"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(d){d.find(".mobile-content-dots").on("touchstart",function(){a(".mobile-content-tooltip").toggleClass("show-menu")});a(document).on("touchstart",function(b){var c=a(".mobile-content-tooltip");c.is(b.target)||0!==c.has(b.target).length||a(".mobile-content-tooltip").removeClass("show-menu")})};h.load=function(d){d.each(function(){e(a(this))})};f.register({name:"content-sharing-widget",api:h,selector:".content-sharing-widget"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){G=a(".preference-centre-reg-wrapper");A=a(".preference-centre-email-wrapper");H=common.cmsUtils;K=H.getParametersFromUrl().id;N=G.data("getpcregistrationsurl")||"https://cablemystreet.virginmedia.com/cms/api/registrations";I=A.data("getpcvalidateurl")||"https://cablemystreet.virginmedia.com/cms/api/validateLink";M=G.data("getpcupdatecustomerurl")||"https://cablemystreet.virginmedia.com/cms/api/customer";J=G.data("getpcadditionalinforurl")||"https://cablemystreet.virginmedia.com/cms/api/additionalRegistrationInfo";
Q=A.data("getpcsendemailurllink")||"https://cablemystreet.virginmedia.com/cms/api/PCURLLink";O=A.data("getpcerrorpage")||"/postcode-checker/pc-error.html";K?common.AsyncService.ajaxPromise({method:"GET",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",cache:!1,xhrFields:{token:K},url:I,data:{urlId:K},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(a){"LinkValid"===a.result?(A.find(".message").removeClass("hidden"),
A.find("#change-email-form").show(),A.find("#send-email-form").remove(),A.find(".email-details").removeClass("hidden"),A.show(),A.find("#change-email-form .form-fields").attr("data-customerid",a.customerId),R=a.email,d(a.email)):(A.find("#send-email-form #email").val(a.email),A.find(".message").removeClass("hidden"),A.find("#send-email-form").show(),A.find("#change-email-form").remove(),A.find(".pc-email-form").show(),A.find("#link-expired-alert").show());n()},function(){H.redirectToErrorPage(O)}):
(A.find("#send-email-form").show(),A.find("#change-email-form").remove(),A.find(".pc-email-form").show(),A.show(),n())}function e(a,b){return common.AsyncService.ajaxPromise({method:"PUT",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:a,data:b,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]})}function d(d){common.AsyncService.ajaxPromise({method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",
cache:!1,xhrFields:{withCredentials:!0},url:N,data:{email:d,urlid:K},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(e){var f=a("#pc-registrations-item").html();f=Handlebars.compile(f);var h=JSON.parse(e);A.find(".your-email-value").html(d);a("#pref-centre-content").append(f(h));0===h.registrations.length&&c();g();r();G.find(".selectpicker").selectpicker("refresh");G.removeClass("hidden");l();b();1===JSON.parse(e).registrations.length&&
G.find(".reg-toggle").trigger("click")},function(){H.redirectToErrorPage(O)})}function b(){G.on("click","a.reg-remove",function(){T=a(this).data("customerid");S=G.find("#pref-centre-content .pref-centre-reg-item").length;if(1===S){var b=G.find("#delete_confirmation div.modal-body p.last.hidden"),c=G.find("#delete_confirmation div.modal-body p.default");b.removeClass("hidden");c.addClass("hidden")}});G.on("click","button.confirm-deletion",function(){common.AsyncService.ajaxPromise({method:"DELETE",
cache:!1,xhrFields:{withCredentials:!0},url:M+"/"+T+"?urlId\x3d"+K}).then(function(b){"Success"===b.result?(a("#delete_confirmation").modal("hide"),G.find("#pref-centre-content").empty(),1!==S?d(R):c()):H.redirectToErrorPage(O)},function(){H.redirectToErrorPage(O)})})}function c(){window.location=a("#cablemystreet-home-page").data("cmsHomePage")||"http://www.virginmedia.com/postcode-checker"}function g(){G.find(".pref-centre-reg-item").each(function(){var b=a(this);k(b);B(b);z(b);C(b);E(b)})}function k(a){var b=
a.find("select[name^\x3dtitle]"),c=a.attr("data-title"),d=a.find(".cms-postcode"),g=H.getFormattedPostcode(d.attr("data-postcode")),e={interestedInBroadBand:a.attr("data-interestedinbroadband"),interestedInTV:a.attr("data-interestedintv"),interestedInPhone:a.attr("data-interestedinphone"),interestedInMobile:a.attr("data-interestedinmobile")},f={bbProvider:a.attr("data-bbcurrentprovider"),tvProvider:a.attr("data-tvcurrentprovider"),phoneProvider:a.attr("data-phonecurrentprovider"),mobileProvider:a.attr("data-mobilecurrentprovider")},
h={bbContractEndDate:a.attr("data-bbcontractenddate"),tvContractEndDate:a.attr("data-tvcontractenddate"),phoneContractEndDate:a.attr("data-phonecontractenddate"),mobileContractEndDate:a.attr("data-mobilecontractenddate")},k=a.attr("data-businessname"),l=a.attr("data-customertype"),p=a.attr("data-firstname"),m=a.attr("data-lastname"),r=a.attr("data-mobile"),n=a.attr("data-contactpermitted");a.find("input[name\x3dfirstName]").val(p);a.find("input[name\x3dlastName]").val(m);a.find("input[name\x3dmobile]").val(r);
b.selectpicker();b.selectpicker("val",c);"Y"===n?a.find("input[name^\x3dcontactPermitted]").prop("checked",!0):a.find("input[name^\x3dcontactPermitted]").prop("checked",!1);d.find("span").html(g);a.find(".your-details-postcode").html(g);for(var v in e)b=a.find('input[id^\x3d"'+v+'"]'),!0===JSON.parse(e[v])?(b.prop("checked",!0),b.parents(".form-group").find(".other-parent").removeClass("hidden")):(b.prop("checked",!1),b.parents(".form-group").find(".other-parent").addClass("hidden"));for(var y in f)""!==
f[y]&&(e=a.find('select[name^\x3d"'+y+'"]'),v=e.find('option[value\x3d"'+f[y]+'"]'),v.length?(e.selectpicker(),e.selectpicker("val",f[y])):(e.selectpicker(),e.selectpicker("val","Other"),e.find('option[value\x3d"Other"]').attr("selected","selected"),e.parents(".form-group").find(".other").removeClass("hidden"),e.parents(".form-group").find("input[name^\x3dother]").val(f[y])),e.selectpicker(),"no-date"!==v.data("type")&&""!==v.val()&&e.parents(".form-group").find(".date-fields").removeClass("hidden"));
for(var t in h)""!==h[t]&&(y=a.find("."+t),f=y.find(".datepicker-month"),y=y.find(".datepicker-year"),e=h[t].split("-"),f.selectpicker(),y.selectpicker(),f.selectpicker("val",parseInt(e[1],10)-1),y.selectpicker("val",e[0]));""!==k||"Business"===l?(a.find("input[name^\x3dbusinessName]").val(k),a.find("input[name^\x3dbusinessName]").parents(".other").removeClass("hidden"),a.find("input[id^\x3dcustomerType]").prop("checked",!0)):(a.find("input[name^\x3dcustomerType]").prop("checked",!1),a.find("input[name^\x3dbusinessName]").parents(".other").addClass("hidden"))}
function r(){G.find(".reg-toggle").click(function(){if(!a(this).hasClass("disabled")){var b=a(this).data("close"),c=a(this).data("open"),d=a(this).parents(".pref-centre-reg-item").find(".toggle-wrapper"),g=a(this);g.addClass("disabled");d.slideToggle("slow",function(){g.removeClass("disabled")});d.toggleClass("opened");d.hasClass("opened")?g.html(b):g.html(c)}})}function l(){A.find("a.email-change").click(function(){if(!a(this).hasClass("disabled")){var b=a(".preference-centre-email-wrapper .pc-email-form"),
c=a(this);c.addClass("disabled");b.slideToggle("slow",function(){c.removeClass("disabled")});b.toggleClass("opened");b.hasClass("opened")?c.html("Close"):c.html("Change")}})}function n(){var a=A.find("form"),b=a.attr("id");a.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}});"change-email-form"===b?m(a):(p(a),v())}function m(b){b.find(".form-fields").data("customerid");b.on("submit",function(c){c.isDefaultPrevented()||(c.preventDefault(),a("#change_confirmation").modal("show"),
a("#change_confirmation").on("click","button.confirm-update-email",function(){var c={oldEmail:R,newEmail:b.find("#email").val(),urlId:K};c=JSON.stringify(c);e(M,c).then(function(b){"Success"===b.result?(a("#change_confirmation").modal("hide"),A.find(".row").hide(),A.find(".update-email-thank-you").removeClass("hidden")):H.redirectToErrorPage(O)},function(){H.redirectToErrorPage(O)})}))})}function p(a){a.on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),b=x(a),b=JSON.stringify(b),
common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:Q,data:b,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(){A.find(".row").hide();A.find(".send-email-thank-you").removeClass("hidden")},function(){H.redirectToErrorPage(O)}))})}function v(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");c.prop("checked")!=!!b&&c.trigger("click")}}
function B(b){var c=b.find(".cms-pc-details-form"),d=b.find(".cms-pc-your-services"),g=y(c),e=q(b,d);c.data("initial-details-form-state",g);d.data("initial-services-form-state",e);c.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}});c.find("input[type\x3dtext]").on("input",function(){U(function(){t(c,b)},1E3)});c.find("select, input[type\x3dcheckbox]").on("change",function(){t(c,b)});d.find("input[type\x3dtext]").on("input",function(){U(function(){t(d,b)},1E3)});d.find("select, input[type\x3dcheckbox]").on("change",
function(){t(d,b)});var f=function(a,b,c){b=!c&&"other"==b||c&&b.prop("checked")||!1;a.find("input").val("").end()[b?"removeClass":"addClass"]("hidden");a.hasClass("has-feedback")&&a.find("input").focusin().focusout()};d.find(".toggle-hidden").not("div").on("change",function(){var b=a(this),c=b.parents(".form-group").first(),d=c.find(".date-fields");c=c.find(".other");if(b.is("input")){var g=c.parents(".other-parent");g.length?g.toggleClass("hidden"):f(c,b,!0)}b.is("select")&&(g=b.val(),b=b.find("option:selected"),
d[g&&!b.data("type")?"removeClass":"addClass"]("hidden"),f(c,b.text().toLowerCase()))})}function t(a,b){var c=b.find(".cms-pc-your-services"),d=b.find(".cms-pc-details-form");switch(a.selector){case ".cms-pc-details-form":c=y(d);a=d.data("initial-details-form-state");JSON.stringify(c)!==JSON.stringify(a)&&0===d.find(".has-error").length?d.addClass("form-changed"):d.removeClass("form-changed");break;case ".cms-pc-your-services":d=q(b,c),a=c.data("initial-services-form-state"),JSON.stringify(d)!==JSON.stringify(a)&&
0===c.find(".has-error").length?c.addClass("form-changed"):c.removeClass("form-changed")}D(b)}function D(a){var b=a.find(".cms-pc-details-form"),c=a.find(".cms-pc-your-services");b.hasClass("form-changed")||c.hasClass("form-changed")?a.find(".cta-contain-save button[disabled]").removeAttr("disabled"):a.find(".cta-contain-save button").attr("disabled","")}function z(a){function b(){a.find(".form-request-feedback").addClass("success").removeClass("hidden");setTimeout(function(){a.find(".form-request-feedback").removeClass("success").addClass("hidden")},
3E3)}var c=a.data("customerid"),d=M+"/"+c,g=a.find(".cms-pc-details-form"),f=a.find(".cms-pc-your-services");a.find(".submit").click(function(){if(g.hasClass("form-changed")){var c=y(g);c.urlId=K;var h=JSON.stringify(c);e(d,h).then(function(d){"Success"===d.result?(b(),a.attr("data-title",c.title),a.attr("data-firstname",c.firstName),a.attr("data-lastname",c.lastName),a.attr("data-mobile",c.mobile),a.attr("data-contactpermitted",c.contactPermitted),g.data("initial-details-form-state",y(g)),t(g,a)):
H.redirectToErrorPage(O)},function(){H.redirectToErrorPage(O)})}if(f.hasClass("form-changed")){var k=q(a,f);h=JSON.stringify(k);common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:J,data:h,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]}).then(function(){b();a.attr("data-interestedinbroadband",k.interestedInBB);a.attr("data-interestedintv",k.interestedInTV?k.interestedInTV:
!1);a.attr("data-interestedinphone",k.interestedInPhone?k.interestedInPhone:!1);a.attr("data-interestedinmobile",k.interestedInMobile?k.interestedInMobile:!1);a.attr("data-bbcurrentprovider",k.bbProvider);a.attr("data-tvcurrentprovider",k.tvProvider);a.attr("data-phonecurrentprovider",k.phoneProvider);a.attr("data-mobilecurrentprovider",k.mobileProvider);a.attr("data-bbcontractenddate",k.bbContractEndDate);a.attr("data-tvcontractenddate",k.tvContractEndDate);a.attr("data-phonecontractenddate",k.phoneContractEndDate);
a.attr("data-mobilecontractenddate",k.mobileContractEndDate);a.attr("data-businessname",k.businessName);a.attr("data-customertype",k.customerType);f.data("initial-services-form-state",q(a,f));t(f,a)},function(){H.redirectToErrorPage(O)})}})}function C(a){var b=a.find(".cms-pc-details-form"),c=a.find(".cms-pc-your-services");a.find(".reset").click(function(){k(a);b.removeClass("form-changed");c.removeClass("form-changed");D(a)})}function y(b){var c={},d=b.serializeArray();a.each(d,function(){this.name.startsWith("contactPermitted")||
(c[this.name]=this.value)});c.contactPermitted=b.find("input[name^\x3dcontactPermitted]").prop("checked")?"Y":"N";return c}function q(b,c){var d="endDateMonthBB endDateMonthTV endDateMonthPhone endDateMonthMobile endDateYearBB endDateYearTV endDateYearMobile endDateYearPhone interestedInTV interestedInPhone interestedInMobile customerType otherBBProvider otherTvProvider otherPhoneProvider otherMobileProvider bbProvider tvProvider phoneProvider mobileProvider".split(" "),g={},e=c.find("[name^\x3dbbProvider]").val();
g.interestedInBB=""!==e;g.customerType=c.find("[id^\x3dcustomerType]").prop("checked")?"Business":"Residential";g.addressId=b.data("addressid");b=c.serializeArray();a.each(b,function(){this.name=this.name.split("_")[0];if(-1===a.inArray(this.name,d))void 0!==g[this.name]?(g[this.name].push||(g[this.name]=[g[this.name]]),g[this.name].push(this.value||"")):g[this.name]=("consent"===this.name?!0:this.value)||"";else{if(!this.name.startsWith("other")&&this.name.endsWith("Provider")){var b=this.name;var e=
this.value;"Other"===e?(e=this.name.split("Provider")[0],e=a("[name*\x3dother"+e+"Provider i]").val().trim()):e=e||"";g[b]=e}-1!==this.name.indexOf("endDateMonth")&&(e=(b=this.name.slice(12))?b.toLowerCase()+"ContractEndDate":"bbContractEndDate",g[e]=u(c,this.value,b),g[b.toLowerCase()+"Provider"]?g[e]=u(c,this.value,b):g[e]="");-1!==this.name.indexOf("interestedIn")&&(g[this.name]=this.value?!0:!1)}});"0"===g.tvProvider&&(g.tvProvider=g.bbProvider);"0"===g.phoneProvider&&(g.phoneProvider=g.bbProvider);
return g}function x(a){return{email:a.find("#email").val(),recaptcha_response_field:a.find("#g-recaptcha-response").val(),sendEmail:"Yes"}}function u(a,b,c){b=parseInt(b)+1;return a.find("[name^\x3dendDateYear"+c+"]").val()+"-"+(10>b?"0"+b:b)}function E(a){var b=a.find(".privacy-slide-panel");a.find(".privacy-show").click(function(a){a.preventDefault();b.slideToggle("fast")});a.find(".privacy-close").click(function(a){a.preventDefault();b.slideUp()})}var F={},G,A,H,N,I,M,J,Q,R,S,T,K,O,U=function(){var a=
0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();F.load=function(a){a.length&&h()};f.register({name:"preference-centre-registrations",api:F,selector:".preference-centre-registrations"})})(VMJS,VMJSjQuery);
(function(f,a){function h(){a(".header-steps-wrapper").addClass("part-or-full-serv")}function e(){a(".header-steps-wrapper").addClass("no-serv")}function d(){a(".header-steps-wrapper.part-or-full-serv .calendar .header-step-number").html("1");a(".header-steps-wrapper.part-or-full-serv .mail .header-step-number").html("2")}function b(){a(".contract-lead-user-status .serviceable").removeClass("hidden")}function c(){a(".contract-lead-user-status .part-serviceable").css("display","block")}function g(){a(".contract-lead-user-status .non-serviceable").css("display",
"block")}function k(){var a=common.AsyncService.ajaxPromise({method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",url:T,cache:!1,xhrFields:{withCredentials:!0},timeout:2E4,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]});a.done(function(){r()});a.fail(function(){l()})}function r(){var b=common.AsyncService.ajaxPromise({method:"POST",url:K,cache:!1,dataType:"json",data:{postcode:w.postcode.replace(/\s+/g,"")},
contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",xhrFields:{withCredentials:!0},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]});b.done(function(b){b.faultList||(a.each(b.addressList,function(a,b){if(w.saId===b.premiseId)return ha=b.displayAddress,p(b.displayAddress),!1}),ha||l(),n(!0))});b.fail(function(){l()})}function l(){a(".contract-lead-header .cro-cookie").removeClass("with-cookie");U.addClass("without-cookie");a(".contract-lead-user-status .serviceable").addClass("hidden");
a(".contract-lead-user-status .part-serviceable").addClass("hidden");a(".contract-lead-user-status .non-serviceable").addClass("hidden");B(!1)}function n(b){b?(a(".contract-lead-header .cro-cookie .serviceability-icoms-dna-wrapper").removeClass("hidden"),a(".contract-lead-header .cro-cookie .header-steps-wrapper").removeClass("hidden")):(a(".contract-lead-header .cro-cookie .serviceability-icoms-dna-wrapper").addClass("hidden"),a(".contract-lead-header .cro-cookie .header-steps-wrapper").addClass("hidden"))}
function m(){w?a(".contract-lead-user-status .non-serviceable .middle-text .address-text").text(w.postcode):a(".contract-lead-user-status .non-serviceable .middle-text .address-text").text(oa)}function p(b){a(".contract-lead-user-status .serviceable .middle-text .address-text").text(b);a(".contract-lead-user-status .part-serviceable .middle-text .address-text").text(b)}function v(b){a(".contract-lead-user-status .non-serviceable .middle-text .address-text").text(b)}function B(b){b?a(".cms-contract-lead-main-form").removeClass("hidden"):
a(".cms-contract-lead-main-form").addClass("hidden")}function t(){C();a("#serviceabilityForm").submit(function(d){var f=V[0].action,h=z(V);d.preventDefault();d=common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",url:f,data:h,xhrFields:{withCredentials:!0},headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]});D();d.fail(function(){l()});d.done(function(d){ea=w?w.status:d.serviceability.redirectURL&&
!d.serviceability.status?"National":d.serviceability.status;ba=d.serviceability.address||ia;y();U.removeClass("without-cookie");U.addClass("with-local-cookie");oa=a("#postcode-field").val();switch(ea){case "active":case "serviceable":b();p(ba);B(!0);break;case "part_serviceable":case "ph_part_serviceable":c();p(ba);B(!0);break;case "National":case "unserviceable":e();g();B(!1);v(ba);break;default:"sale"==w.bb&&"sale"==w.dtv&&"sale"==w.phone?(b(),p(ba),B(!0)):"sale"==w.bb&&"sale"==w.dtv&&"sale"!=w.phone?
(c(),p(ba),B(!0)):(e(),g(),B(!1),v(ba))}})})}function D(){for(var b=a(".cro-cookie .address-list")[0].children,c=0;c<b.length;c++)"selected"==b[c].className&&(ia=b[c].innerText)}function z(b){var c={};b=b.serializeArray();a.each(b,function(){c[this.name]=this.value});c.postcode=a("#postcode-field").val();return c}function C(){var b=a("#serviceabilityForm");if(0<b.length){var c=b[0].action.replace("serviceability","api/serviceability");b.attr("action",c)}}function y(){a(".refreshBtn").on("click",function(b){b.preventDefault();
a.removeCookie("cable_serviceability",{path:"/",domain:".virginmedia.com"});location.reload()})}function q(){var b=a(".contract-expiry-panel");ca.click(function(c){c.preventDefault();a(this).hasClass("rotate")?(b.slideUp(),a(this).removeClass("rotate")):(b.slideToggle("fast"),a(this).addClass("rotate"))})}function x(){W.parent().on("click",function(){var b=a(this).closest("form");aa=b.find(".datepicker-wrap");Y=aa.find(".datepicker").first();W=b.find(".movingDate");b.hasClass("cms-contract-lead-main-form")&&
ca.hasClass("rotate")&&ca.trigger("click");a(this).find("input").trigger("focusout");Y.hasClass("initialized")?(aa.slideDown("slow"),Y.hasClass("initialized")&&E()):u()});Y.on("changeDate",function(){W.val(Y.datepicker("getFormattedDate"));W.trigger("focusout");aa.slideUp("slow")})}function u(){Y.addClass("initialized");Y.datepicker({minViewMode:1,maxViewMode:2,format:"mm/yyyy",inline:!0,startDate:new Date,todayHighlight:!0,templates:{leftArrow:'\x3ci class\x3d"fa fa-angle-left vm-red"\x3e\x3c/i\x3e',
rightArrow:'\x3ci class\x3d"fa fa-angle-right vm-red"\x3e\x3c/i\x3e'}}).on("changeYear",function(){setTimeout(E,100)});E();aa.slideDown("slow")}function E(){var a=(new Date).getFullYear(),b=parseInt(Y.find(".datepicker-months .datepicker-switch").html());a===b&&Y.find(".datepicker-months .month:not(.disabled)").first().addClass("current-month")}function F(a){a.validator({feedback:{success:"fa-check",error:"fa-exclamation-triangle"}})}function G(){window.recaptchaCallback=function(b){var c=a("#recaptcha_response_field");
c.prop("checked")!=!!b&&c.trigger("click")}}function A(){Z.on("submit",function(b){b.isDefaultPrevented()||(b.preventDefault(),b=H(Z),b=JSON.stringify(b),I(b).then(function(b){a(".contract-lead-user-status").hide();Z.hide();a(".contract-lead-main-form .cro-form-request-feedback").show();P.removeClass("hidden");X=b.reason;a(".calendar .icon-2").addClass("opacity-40");a(".calendar .header-step-number").addClass("opacity-40");a(".calendar .header-step-text").addClass("opacity-40")},function(){}))})}
function H(a){var b={};w&&(b.premiseId=w.saId,b.siteId=w.siteId);b.typeName=L;b.displayAddress=ha||ia;b.responseObject=JSON.stringify(N(a)).replace('"/g','\\"');b.recaptcha_response_field=a.find("#g-recaptcha-response").val();return b}function N(b){var c={},d=b.serializeArray();a.each(d,function(){"recaptcha_response_field"!=this.name&&"g-recaptcha-response"!=this.name&&"movingDate"!=this.name&&"MarketingOptIn"!=this.name&&(c[this.name]=this.value)});d=W.val().split("/");c.CableContractEndMonth=10>
d[0]?d[0].slice(-1):d[0];c.CableContractEndYear=d[1];c.MarketingOptIn="on"==b.find("#privacyPolicy").val()?"true":"false";return c}function I(a){return common.AsyncService.ajaxPromise({method:"POST",dataType:"json",contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},url:ka,data:a,headers:[{key:"X-Requested-With",value:"XMLHttpRequest"},{key:"Accept",value:"application/json"}]})}function M(){a(".backBrowsing").on("click",function(a){a.preventDefault();window.history.back()})}function J(){P.on("submit",
function(b){b.isDefaultPrevented()||(b.preventDefault(),b=Q(),b=JSON.stringify(b),I(b).then(function(){a(".contract-lead-main-form .continue-browsing").hide();P.hide();a(".contract-lead-mobile-form .cro-form-request-feedback").show()},function(){}))})}function Q(){var a={};a.formInstanceGuid=X;a.typeName=L;var b={},c=W.val().split("/");b.MobileContractEndMonth=10>c[0]?c[0].slice(-1):c[0];b.MobileContractEndYear=c[1];a.responseObject=JSON.stringify(b).replace('"/g','\\"');return a}var R={},S,T,K,O,
U,Z,P,Y,W,aa,ca,V,w,L,X,ea,ba,ia,oa,ha,ka;R.load=function(f){if(f.length){S=common.cmsUtils;T=a("#widget-form").data("apiGetToken");K=a("#widget-form").data("apiCheckAddress");O=a.cookie("cable_serviceability");Z=a(".cms-contract-lead-main-form");P=a(".cms-contract-lead-mobile-form");Y=a(".datepicker");W=a(".movingDate");ca=a("#contract-expiry-display i");V=a("#serviceabilityForm");L=Z.data("getclformname")||"LeadCapture";ka=Z.data("getclpostformurl")||"https://cablemystreet.virginmedia.com/cms/api/postForm";
U=a(".cro-cookie");if(O)if(U.hasClass("author-edit"))U.addClass("without-cookie");else switch(w=S.getCookieObject(O),n(!1),U.addClass("with-cookie check-serviceability"),y(),B(!0),w.status){case "active":case "serviceable":b();h();d();k();break;case "part_serviceable":c();h();d();k();break;case "National":case "unserviceable":e();g();B(!1);m();n(!0);break;default:"sale"==w.bb&&"sale"==w.dtv&&"sale"==w.phone?(b(),h(),d(),k()):"sale"==w.bb&&"sale"==w.dtv&&"sale"!=w.phone?(c(),h(),d(),k()):(e(),g(),
B(!1),m()),n(!0)}else U.addClass("without-cookie"),a(".serviceability-searchbox-serv-widget-form-title").prepend('\x3cdiv class\x3d"nrPrepend"\x3e1\x3c/div\x3e'),t();q();F(Z);G();A();F(P);J();x();M()}};f.register({name:"contract-lead-header-wrapper",api:R,selector:".contract-lead-header-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find("button");var b=a(d).find(".expandBtn"),c=a(d).find(".collapseBtn"),g=a(d).find(".expandable-content");e.click(function(){g.slideToggle("fast",function(){a(this).toggleClass("expanded");a(this).hasClass("expanded")?(b.addClass("hidden"),c.removeClass("hidden")):(b.removeClass("hidden"),c.addClass("hidden"))})})}f.register({name:"expandable-content-area",api:{load:function(a){a.each(h)}},selector:".expandable-content-area"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".postcode-check-banner-wrapper");var b=window.location.href.split("?")[0].replace(/\/$/,""),c=a("#cablemystreet-hub-page").data("cms-hub-page");d="";var g=e.data("desktop-background"),f=e.data("mobile-background");window.matchMedia("(max-width: 767px)").matches?e.css("background-image","url("+f+")"):e.css("background-image","url("+g+")");if(b===c)try{var h=a.cookie("cms.vm.user"),l=JSON.parse(h);d=l.currentAddress.displayAddress;!1===l.currentAddress.manualEntry?
e.find(".status-text").removeClass("hidden"):e.find(".alt-status-text").removeClass("hidden")}catch(n){e.find(".alt-status-text").removeClass("hidden")}else e.find(".status-text").removeClass("hidden");if(h=a("#status-text-hbs").html())h=Handlebars.compile(h),e.find(".status-text").append(h({address:d}))}f.register({name:"postcode-check-banner",api:{load:function(a){a.each(h)}},selector:".postcode-check-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(b){var c=0;f.find(".bundle-wrapper").each(function(){var d=a(this).find(".eq-height").eq(b).outerHeight();c=d>c?d:c});return c}function c(a){var b=a.find(".flash-sales-above-title:visible");a=a.find(".flash-sales-above-title:hidden");0<b.length&&0<a.length&&(a=a.parent().has(".no-emphasized"),0<a.length&&(h=b=b.first().outerHeight(),a.css("margin-top",b)))}function g(b){var c=b.find(".bundle-title.emphasized");b=b.find(".bundle-title.no-emphasized");if(0<
c.length&&0<b.length){var d=c.first().outerHeight();c.css("min-height",d+h);b.parent().has(".flash-sales-above-title:hidden").each(function(){a(this).css("margin-top",h)})}}var f=a(d).find(".compare-bundles-vertical-wrap");e=f.find(".bundle-wrapper");d=e.first();var h=30;window.matchMedia("(min-width: 767px)").matches&&(d.find(".eq-height").each(function(){var c=a(this).index()-1,d=b(c);f.find(".bundle-wrapper").find(".eq-height:eq("+c+")").css("min-height",d)}),c(e),g(e))}f.register({name:"compare-bundles-vertical",
api:{load:function(a){a.each(h)}},selector:".compare-bundles-vertical"})})(VMJS,VMJSjQuery);
(function(f,a){function h(b){return 0<a(b).outerHeight()?Promise.resolve(function(){return!0}):e().then(function(){return h(b)})}function e(){return new Promise(function(a){requestAnimationFrame(a)})}function d(b){var c=a(b.attr("href")).find(".compare-products.component");c.find(".compare-product-item").removeClass("hide-item");0<c.outerHeight()?c.each(r):h(c).then(function(){c.each(r)})}function b(){a(".vm-tabs .nav-tabs a").each(function(b,c){var g=a(c);g.unbind("click");g.on("click",function(){d(g)})})}
function c(b,c){b.addListener(function(){a(c).closest(".compare-products.component").each(r)})}function g(a,b){for(b=b.parentNode;null!=b;){if(b==a)return!0;b=b.parentNode}return!1}function k(b,c){if(0<a(".vm-tabs").length){var d=g(a(".vm-tabs")[0],c),e=g(a(a(".nav-tabs a:first").attr("href"))[0],c);d&&e?r(b,c):d||r(b,c)}else r(b,c)}function r(d,g){function e(){var b=a(g).find(".owl-carousel"),c=a(g).find(".nav-cont").data("nav-color"),d=a(g).find(".nav-cont"),e=a(g).find(".nav-cont .owl-dots");a(g).closest(".tab-content").addClass("custom-owl-tab");
b.owlCarousel({navText:["\x3ci class\x3d'fa fa-chevron-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-chevron-right'\x3e\x3c/i\x3e"],nav:!0,margin:0,stagePadding:0,responsive:{0:{items:1,stagePadding:30,margin:0}},loop:!0,rewind:!1,autoWidth:!1,items:1,slideBy:1,dotsContainer:e,navContainer:d,onInitialized:function(){f(x,c)},onChanged:function(){f(x,c)}});b.find(".owl-item .compare-product-item").removeClass("hide-item")}function f(b,c){b=b.find(".owl-dot");var d=b.filter(function(){return a(this).hasClass("active")});
b.css({"border-color":c,"background-color":"transparent"});d.css("background-color",c)}function h(a){a=a.find(".pricing-details");var b=r(a);m(b,a)}function k(){a(".bundle-body.collapse").on("show.bs.collapse",function(b){this===b.target&&(a(".mobile-header").removeClass("openned"),a(".bundle-body.collapse").removeClass("in"),a(this).siblings(".mobile-header").addClass("openned"))});a(".bundle-body.collapse").on("hide.bs.collapse",function(b){this===b.target&&a(this).siblings(".mobile-header").removeClass("openned")})}
function l(b){4===b.length?b.each(function(){a(this).addClass("col-xs-12 col-md-3")}):3===b.length?b.each(function(){a(this).addClass("col-xs-12 col-md-4")}):b.each(function(){a(this).addClass("col-xs-12 col-md-6")});b.removeClass("hide-item")}function p(b){b.each(function(){a(this).addClass("col-md-3")})}function r(b){var c=0;a(b).each(function(){var b=a(this).outerHeight();b>c&&(c=b)});return c}function m(b,c){a(c).each(function(){a(this).css("height",b)})}var x=a(g).find(".compare-products-inner"),
u=x.find(".compare-product-item");d=x.find(".bundle-wrapper");var E=a(d[0]).find(".bundle-body"),F=x.find(".clearfix"),G=a(g).find(".row"),A=x.data("carousel-view"),H=u.find(".author");n&&(A&&G.addClass("owl-carousel"),a(g).find(".nav-cont").removeClass("hidden"),e());if(0!==d.length)if(H.length?(p(F),u.removeClass("hide-item")):l(u),F=window.matchMedia("screen and (min-width: 991px)"),function(){a(".tile").on("click",function(b){b.stopPropagation();b.stopImmediatePropagation();var c=a(b.target).closest(".flip-box-top");
b=a(b.target).closest(".flip-box");var d=a(c).outerHeight();a(c).css("top","-"+d+"px");a(b).css("height",d+"px");b=a(this).attr("data-tile-id")+"-content";a(c).find(" ."+b).removeClass("hidden")})}(),function(){a(".close-tile").on("click",function(b){b.stopPropagation();b.stopImmediatePropagation();b=a(b.target).closest(".flip-box-top");var c=a(this).attr("data-tile-id")+"-content";a(b).css("top","0");a(b).find(" ."+c).addClass("hidden")})}(),function(){a(".close-highlights").on("click",function(b){b.stopPropagation();
b.stopImmediatePropagation();var c=a(b.target).closest(".highlight-body");b=a(b.target).closest(".bundle-body").find(".highlight-anchor");a(c).removeClass("in");a(b).addClass("collapsed")})}(),b(),c(F,g),u.each(function(a,b){var c=Date.now()+""+a;b.getElementsByClassName("mobile-header")[0].setAttribute("data-target",".bundle-"+c);b.getElementsByClassName("bundle-body")[0].classList.add("bundle-"+c);a=Date.now()+""+a;b.getElementsByClassName("highlight-anchor").length&&b.getElementsByClassName("highlight-anchor")[0].setAttribute("href",
"#highlights"+a);b.getElementsByClassName("highlight-body")[0].setAttribute("id","highlights"+a)}),F.matches){u=d.find(".header.hidden-sm");E=d.find(".top-icons .tile");F=d.find(".bottom-icons .tile");G=d.find(".aboveHeader");A=d.find(".abovePrices");H=d.find(".aboveTiles");var N=r(u),I=r(G),M=r(A),J=r(H),Q=r(E),R=r(F);m(I,G);m(M,A);m(J,H);m(N,u);m(Q,E);m(R,F);h(d)}else k(),a(g).find(".bundle-body").removeClass("in"),a(g).find(".big-bundle").removeClass("openned"),a(E).closest(".box").find(".mobile-header").addClass("openned"),
a(E).addClass("collapse in").removeAttr("style")}var l={},n=window.matchMedia("(max-width: 767px)").matches;l.load=function(a){a.each(k)};f.register({name:"compare-products",api:l,selector:".compare-products"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,f){c=window.matchMedia("(max-width: 767px)").matches;f=a(".cv-props-wrapper");f.hasClass("cvp-full-overlay")&&e();f.hasClass("cvp-desktop-accordion")&&(c?d():b())}function e(){a("#cv-props-overlay").on("shown.bs.modal",function(b){b=a(b.relatedTarget).attr("href");"undefined"!==typeof b&&(b=a(b).position(),a("#cv-props-overlay").scrollTop(b.top))})}function d(){var b=a("#cv-props-overlay");a(".cv-props-item a").attr("data-toggle","modal");b.on("show.bs.modal",function(b){var c=
a(b.relatedTarget).attr("href");c=a(c).html();a(b.relatedTarget).addClass("cvp-opened");a(".modal-body .container-fluid").html(c)});b.on("hide.bs.modal",function(){a(".cvp-desktop-accordion").find(".cvp-opened").removeClass()});a(".cvp-footer-close span").click(function(){b.modal("hide")})}function b(){a(".cv-props-item a").click(function(b){b.preventDefault();b=a(".cvp-desktop-accordion").find(a(this).attr("href"));b.hasClass("hidden")&&(c(),b.removeClass("hidden"),a(this).addClass("cvp-opened"),
a(".cvp-accordion-body").slideDown("fast",function(){a(this).addClass("cvp-accordion-opened")}))});a(".cvp-footer-close span, .cvp-footer-close-icon").click(function(){c()})}function c(){var b=a(".cvp-accordion-body.cvp-accordion-opened");b.hide();b.find(".cv-props-content").addClass("hidden");b.removeClass("cvp-accordion-opened");a(".cvp-desktop-accordion").find(".cvp-opened").removeClass()}f.register({name:"cable-value-props-overlay",api:{load:function(a){a.each(h)}},selector:".cable-value-props-overlay"})})(VMJS,
VMJSjQuery);(function(f,a){var h={},e=common.cmsUtils;h.init=function(d){(d=/[?&]postcode=([^&#]*)/.exec(window.location.href))?a(".dyn-postcode").append(e.getFormattedPostcode(d[1])):(d=jQuery.cookie("cms.vm.user")?JSON.parse(jQuery.cookie("cms.vm.user")):null)&&d.currentAddress&&a(".dyn-postcode").append(e.getFormattedPostcode(d.currentAddress.postcode))};f.register({name:"dynamic-postcode",api:h,selector:".dynamic-postcode"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){d=a(b).find(".timer");var c=d.data("expiryDate"),g,f=new Date;void 0!==c&&((g=c.match(/^(\d{2})\/(\d{2})\/(\d{4})$/))?(g=new Date(g[3]+"-"+g[2]+"-"+g[1]),g.setDate(g.getDate()+1),g.setMinutes(g.getMinutes()+g.getTimezoneOffset())):g=void 0);f<g?e(a(b),d,g):0<a(b).find(".author-edit").length&&a(b).css("display","block")}function e(a,b,c){a.css("display","block");a.find(".countdownHolder").countDownAnimate({timestamp:c.getTime(),callback:function(b,c,d,e){var g=a.find(".last-day-text"),
f=a.find(".general-text");1>b?g.is(":visible")||g.show():f.is(":visible")||f.show();0===b&&0===c&&0===d&&0===e&&a.remove()}})}f.register({name:"flash-countdown-clock",api:{load:function(a){a.each(h)}},selector:".flash-countdown-clock"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:".page-takeover-gap",api:{load:function(f){!a('meta[property\x3d"og:image"]').attr("content")&&f&&(f=a(a(f[0]).find("img")[0]).attr("src"),a("meta[property\x3d'og:site_name']").after("\x3cmeta property\x3d'og:image' content\x3d'"+f+"'/\x3e"),a("meta[name\x3d'twitter:card']").after("\x3cmeta name\x3d'twitter:image' content\x3d'"+f+"'/\x3e"))}},selector:".page-takeover-gap"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d);var b=e.find(".generic-sticky-wrapper");if(!b.hasClass(".author-mode")){a.fn.isInViewport=function(){var b=a(this).offset().top+a(this).outerHeight(),c=a(window).scrollTop();return b>c};var c=e.prev(),g=b.outerHeight();0===c.length&&0<e.parents(".mobile-desktop-only-wrapper").length&&(c=e.parents(".mobile-desktop-only-wrapper").prev());a(window).on("resize scroll",function(){c.isInViewport()?(b.hide(),a("body").css("padding-bottom","")):(b.show(),a("body").css("padding-bottom",
g))})}}f.register({name:"generic-sticky-component",api:{load:function(a){a.each(h)}},selector:".generic-sticky-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,f){function h(a){a=c(a);localStorage.setItem("storedSearchTerm",a);window.location=window.location.origin+C}function k(){""!==p.val()&&(p.val(""),v.hide(),n(p),t.hide())}function n(a){a=c(a.val());3<=a.length&&v.length?e(D,a).then(function(a){0<a.hits.length?(a=Handlebars.compile(B)(a),z.hasClass("hidden")||v.html(a).show()):v.hide()},function(){}):v.hide()}var m=a(f);g=localStorage.getItem("storedSearchTerm");var p=m.find(".helpSearchField"),v=m.find(".search-suggestions"),
B=a("#search-suggestions-hbs").html(),t=m.find(".clear-search"),D=p.data("suggestions-api"),z=m.find(".bg-search-modal");f=m.find(".search-form");var C=f.data("results-page"),y=m.find(".btn-search"),q;p.on("focus",function(){d(!0,m,p)});p.on("keyup change",function(){0<a(this).val().length?t.show():t.hide()});p.on("keyup change",b(function(){var b=c(a(this).val());b!==q&&(q=b,n(p))},350));a(document).keydown(function(a){27===a.which&&(d(!1,m,p),k());9===a.which&&(a=p.val().length,3>a&&0<a&&p.is(":focus")&&
(d(!1,m,p),v.hide(),p.next("label").addClass("hidden")),0===a&&p.is(":focus")&&(d(!1,m,p),k()))});t.on("click",function(){d(!1,m,p);k()});a("body").on("click",".bg-search-modal",function(){d(!1,m,p);k()});p.on("keyup",function(a){13===a.which&&""!==p.val()&&h(p.val())});y.on("click",function(){""!==p.val()&&h(p.val())});f.on("click",".suggested-term",function(){h(a(this).text())});a("body").on("click",".didyoumean-term",function(){h(a(this).text())});g&&-1<window.location.href.indexOf(C)&&(p.val(decodeURIComponent(g).replace(/\+/g,
" ")),p.next("label").addClass("hidden"))}function e(a,b){b=encodeURIComponent(b);return common.AsyncService.ajaxPromise({method:"GET",url:a+"?q\x3d"+b+"\x26track\x3dfalse"})}function d(b,c,d){var g=c.parents(".page-takeover-gap");c=c.find('label[for\x3d"helpSearchField"]');!0===b?(g.addClass("search-modal-visible"),0===a(".bg-search-modal").length&&g.prepend(a('\x3cdiv class\x3d"bg-search-modal"\x3e\x3c/div\x3e')),c.addClass("hidden")):(g.find(".bg-search-modal").remove(),g.removeClass("search-modal-visible"),
d.blur(),c.removeClass("hidden"))}function b(a,b,c){var d;return function(){var g=this,e=arguments,f=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(g,e)},b);f&&a.apply(g,e)}}function c(a){var b={"\x3c":"\x26lt;","\x3e":"\x26gt;","%3C":"\x26lt;","%3E":"\x26gt;"};return a.replace(/(<|>|%3C|%3E)/g,function(a){return b[a]})}f.register({name:"search-banner",api:{load:function(a){a.each(h)}},selector:".search-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,f){var h=a(f),k=common.cmsUtils,n=h.find(".search-results-list"),m=h.find("#search-results-hbs").html();g=a(f).data("results-api");var p=a(f).data("results-per-page"),v=a(f).data("help-error-page"),B=a(f).data("search-results-page"),t=localStorage.getItem("storedSearchTerm");f=k.getParametersFromUrl().page||"1";var D=h.find(".search-results-found"),z=h.find(".search-results-didyoumean"),C=h.find(".search-results-not-found");k=/((\d{6}))/;var y=/@/;if(!t||h.hasClass(".author-mode"))return!1;
if(k.test(t)||y.test(t)){var q=t.split(" ");for(var x=0;x<q.length;x++)if(k.test(q[x])||y.test(q[x])){var u=Array(q[x].length).join("*");q[x]=u}q=q.join(" ")}c(g,t,q,p,f).then(function(a){if(0<a.total){b(t,D);e(D,p,a);D.removeClass("hidden");var c=Handlebars.compile(m)(a);n.html(c);1<a.pagination.numPages&&d(h,a,B,t,p)}if(0===a.total&&a.suggestions&&!0===a.suggestions.didyoumean.assumed){c=Handlebars.compile(m)(a.suggestions.didyoumean.result);t=a.suggestions.didyoumean.text;var g=h.find("#search-didyoumean-term").html(),
f={text:a.suggestions.didyoumean.text,url:B+"?q\x3d"+t};g=Handlebars.compile(g)(f);f=a.suggestions.didyoumean.result;b(t,z);e(z,p,f);n.html(c);z.find(".sr-grey-box").append(g);z.removeClass("hidden");1<f.pagination.numPages&&d(h,f,B,t,p)}0!==a.total||a.suggestions||(b(t,C),C.removeClass("hidden"),h.parents("body").find(".help-no-results-parsys").removeClass("hidden"))},function(){window.location=window.location.origin+v})}function e(a,b,c){var d=c.total;c=c.pagination.current;b={total:d,from:(c-1)*
b+1,to:c*b>d?d:c*b};d=a.find(".showing-results-no script").html();b=Handlebars.compile(d)(b);a.find(".showing-results-no").html(b).removeClass("hidden")}function d(a,b,c,d,e){var g=5;d=b.pagination.current;b=b.pagination.numPages;var f=[];e={next:{url:c+"?page\x3d"+(d+1),disabled:"",results:e},prev:{url:c+"?page\x3d"+(d-1),disabled:""}};var h=Math.floor(g/2),k=d-h+1-g%2;h=d+h;g>b&&(g=b);0>=k&&(k=1,h=g);h>b&&(k=b-g+1,h=b);for(g=k;g<=h;)g===d?f.push({text:g,url:""}):f.push({text:g,url:c+"?page\x3d"+
g}),g++;d===b?(e.next.disabled="disabled",e.next.url=""):1===d&&(e.prev.disabled="disabled",e.prev.url="");c={buttons:e,items:f};d=a.find("#results-pagination-hbs").html();c=Handlebars.compile(d)(c);a.find(".results-pagination").html(c).removeClass("hidden")}function b(a,b){var c=b.find(".sr-title script").html();a=Handlebars.compile(c)(decodeURIComponent(a).replace(/\+/g," "));b.find(".sr-title").html(a).removeClass("hidden")}function c(a,b,c,d,e){"undefined"!==typeof c&&(b=c);return common.AsyncService.ajaxPromise({method:"GET",
url:a+"?q\x3d"+b+"\x26track\x3dfalse\x26size\x3d"+d+"\x26page\x3d"+e})}f.register({name:"search-results",api:{load:function(a){a.each(h)}},selector:".search-results-wrapper"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b){function c(a){a.each(function(){var b=h.val();p.addClass("hidden");if(1<b.length){var c=a.filter(':containsLower("'+b+'")');c.addClass("selected-country");g(c,b)}else l.html(a.removeClass("selected-country"));a.filter(':containsLower("'+b+'")').length?p.addClass("hidden"):p.removeClass("hidden")})}function g(b,c){b=b.sort(function(a,b){return a.textContent.toUpperCase()<b.textContent.toUpperCase()?-1:1}).slice(0,5);b.each(function(){var b=a(this).text(),d=b.toLowerCase().indexOf(c.toLowerCase());
d=b.substring(d,c.length+d);b=b.replace(new RegExp(d,"i"),"\x3cb\x3e"+d+"\x3c/b\x3e");d=a(this).children("img");a(this).html("\x3cspan\x3e"+b+"\x3c/span\x3e").append(d)});l.html(b)}function f(){""!==h.val()&&(h.val(""),c(n),m.hide())}d=a(b).find(".roaming-help-search-wrapper");b=d.find(".search-group");var h=d.find(".roaming-search-input"),l=d.find(".roaming-countries"),n=l.find(".country"),m=d.find(".clear-search"),p=d.find(".country-error-message"),v,B;a.expr[":"].containsLower=function(a,b,c){if(""===
c[3])return!1;b=new RegExp("(^"+c[3].toUpperCase()+")");return null!=a.textContent.toUpperCase().trim().match(b)};h.on("focus",function(){e(!0,h)});m.on("click",function(){e(!1,h);f();p.addClass("hidden")});a("body").on("click",".bg-search-modal",function(){e(!1,h);f();p.addClass("hidden")});h.on("keyup",function(b){b=b.which||b.keyCode;37!==b&&38!==b&&39!==b&&40!==b&&(c(n),0<a(this).val().length?m.show():m.hide())});b.on("keyup",function(a){a=a.which||a.keyCode;var b=l.find(".selected-country");
27===a&&(e(!1,h),f(),p.addClass("hidden"));40===a?v?(v.blur(),B=v.next(),v=0<B.length?B.focus():b.eq(0).focus()):v=b.eq(0).focus():38===a&&(v?(v.blur(),B=v.prev(),v=0<B.length?B.focus():b.last().focus()):v=b.last().focus());39===a&&m.focus();37===a&&h.focus()});a(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()})}function e(d,b){var c=b.closest(".page-takeover-gap"),g=b.siblings(".search-placeholder");!0===d?(a("body").addClass("search-no-scroll"),c.addClass("search-modal-visible"),
0===a(".bg-search-modal").length&&c.prepend(a('\x3cdiv class\x3d"bg-search-modal"\x3e\x3c/div\x3e')),g.addClass("hidden")):(a("body").removeClass("search-no-scroll"),c.find(".bg-search-modal").remove(),c.removeClass("search-modal-visible"),b.blur(),g.removeClass("hidden"))}f.register({name:"roaming-search-banner",api:{load:function(a){a.each(h)}},selector:".roaming-search-banner"})})(VMJS,VMJSjQuery);
(function(f,a){f.register({name:"usp-banner",api:{init:function(f){f.each(function(){var e=a(this).find(".usp-list-carousel"),d=e.data("show-arrows"),b=e.data("auto-transition"),c=e.data("items-length");e.owlCarousel({navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],nav:d,responsive:{0:{items:1,loop:b,autoplay:b,autoplayTimeout:3E3},992:{items:c}},lazyLoad:!0,slideBy:1})})}},selector:".usp-banner-inner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(d,b,c,g,e){d.on("change",function(){c.hide();g.show();d.is(":checked")?g.removeClass("disabled"):g.addClass("disabled");a(this).parent().hasClass("not-a-customer-label")?b.prop("checked",!1):e.prop("checked",!1)})}function e(d,b,c,g,e,f,h,n){d.on("click",function(k){if(b.is(":checked")||c.is(":checked"))g.is(":checked")||(k.preventDefault(),e.show(),n.hide(),a("html, body").animate({scrollTop:"0px"},100));else if(g.is(":checked")||h.is(":checked"))k.preventDefault(),f.show(),
d.hide()})}f.register({name:"customer-eligibility",api:{init:function(d){d.each(function(){var b=a(this),c=b.find(".customer-eligibility-wrapper"),d=b.find(".customer-eligibility-label"),f=d.find("input");d=d.not(".not-a-customer-label").find("input");var r=b.find(".tv-label input"),l=b.find(".broadband-label input"),n=b.find(".mobile-label input"),m=b.find(".not-a-customer-label input"),p=b.closest(".lgi-main-wrapper").find(".tariff-table"),v=b.find(".expandable-box"),B=b.find(".expandable-cta-primary a");
c.hasClass("publish-mode")&&p.hide();f.prop("checked",!1);h(f,d,v,B,m);e(B,r,l,n,p,v,m,b)})}},selector:".customer-eligibility"})})(VMJS,VMJSjQuery);
(function(f,a){var h={},e=function(d){var b=d.find(".items-list-carousel"),c={navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],autoplayTimeout:3E3,responsive:{0:{items:1,stagePadding:55},768:{items:2,stagePadding:65}},lazyLoad:!0,slideBy:1};992>a(window).width()?b.owlCarousel(c):b.addClass("off");a(window).resize(function(){992>a(window).width()?b.hasClass("off")&&(b.owlCarousel(c),b.removeClass("off")):b.hasClass("off")||(b.addClass("off").trigger("destroy.owl.carousel"),
b.find(".owl-stage-outer").children(":eq(0)").unwrap())})};h.init=function(d){d.each(function(){e(a(this))})};f.register({name:"icons-banner",api:h,selector:".icons-banner-inner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e){var d=a(e).find(".rte-content");d.find("table").each(function(b,c){a(c).wrap("\x3cdiv class\x3d'table-wrapper'\x3e\x3cdiv class\x3d'table-wrapper-inner'\x3e\x3c/div\x3e\x3c/div\x3e");b=a(c).parent();a(c).clone(!0).appendTo(b).addClass("clone");d.find(".clone th:first-child, .clone td:first-child").addClass("fixed-side")})}f.register({name:"rte-table-scroll",api:{load:function(a){h(a)}},selector:".rte-table-scroll"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d);d=window.location.pathname;var b=e.find(".breadcrumb li.active"),c;e.find(".breadcrumb li a").each(function(){"Category"===a(this).text().trim()&&(c=a(this))});"Category"===b.text().trim()?sessionStorage.setItem("categoriesBrVal",d):c?(e=c.attr("href"),c.attr("href",sessionStorage.getItem("categoriesBrVal")||e)):sessionStorage.removeItem("categoriesBrVal")}f.register({name:"cl-breadcrumbs",api:{load:function(a){a.each(h)}},selector:".cl-breadcrumbs"})})(VMJS,
VMJSjQuery);
(function(f,a){function h(){var e=a(".smart-banner-section"),d=a(".banner-cross"),b=a(".androidCta"),c=a(".iosCta"),g=navigator.userAgent||navigator.vendor,f=/android/i.test(g);g=/iPad|iPhone|iPod/.test(g)&&!window.MSStream;e.hasClass("author-mode")||!f&&!g||(e.removeClass("hidden"),a("body").prepend(a(".smart-banner")),a(d).on("click",function(){e.addClass("hidden")}),g&&(c.removeClass("hidden"),b.addClass("hidden")),f&&(c.addClass("hidden"),b.removeClass("hidden")))}f.register({name:"smart-banner",api:{load:function(a){a.each(h)}},
selector:".smart-banner"})})(VMJS,VMJSjQuery);
(function(f,a){function h(c,d){var g=a(d).find(".ace-calendar-wrapper"),f=g.closest("form");c=g.data("offset-days");d=g.data("total-days");var h=g.data("include-saturdays"),k=g.data("include-sundays"),r=g.data("non-working-days-list");l=g.data("display-days");n=b(c,d,h,k,r);m=g.find("input.ace-calendar-appointment-date");p=g.find("input.ace-calendar-appointment-slot");if(f.hasClass("dyn-form-ready"))e(g,f);else f.on("dynFormReady",function(){e(g,f)})}function e(a,b){b.hasClass("dyn-form-ready-repopulated")&&
null!==m.val()&&null!==p.val()&&(b=n.map(function(a){return a.value}).indexOf(m.val()),-1!==b&&(k=Math.floor(b/l)*l,r=!0));d(a)}function d(b){var d=b.find(".owl-carousel"),g=d.find("script").html(),e=b.data("has-time-slot2"),f=b.data("has-time-slot3");g=Handlebars.compile(g)({hasTimeSlot2:e,hasTimeSlot3:f,futureDatesArr:n});switch(parseInt(l)){case 7:e=37;break;case 8:e=25;break;case 9:e=10;break;default:e=20}d.html(g).owlCarousel({mouseDrag:!1,loop:!1,responsiveClass:!0,nav:!0,smartSpeed:100,startPosition:k,
slideBy:l,navContainer:d.parent().find(".calendar-carousel-nav"),navText:["\x3ci class\x3d'fa fa-angle-left'\x3e\x3c/i\x3e","\x3ci class\x3d'fa fa-angle-right'\x3e\x3c/i\x3e"],responsive:{0:{items:3,margin:10},768:{items:5,margin:20},1024:{items:6,margin:20},1200:{items:l,margin:e}},onInitialized:function(a){if(r){var d=m.val()+"_"+p.val();d=b.find('input[value\x3d"'+d+'"]');d.closest(".date-item").find(".date-header").addClass("selected");d.prop("checked",!0)}c(a)},onTranslated:function(a){c(a)},
onResized:function(a){c(a)}});d.find("input").on("change",function(){d.find(".date-header.selected").removeClass("selected");a(this).closest(".date-item").find(".date-header").addClass("selected");var b=a(this).val().split("_");m.val(b[0]).trigger("blur");p.val(b[1]).trigger("blur")})}function b(a,b,c,d,g){for(var e=[],f=0;f<b;f++){var h=(new moment).add(a+f,"day"),k=h.format("DD/MM/YYYY"),l=h.day();(0===l&&d||6===l&&c||0!==l&&6!==l)&&e.push({date:h.date(),day:h.format("ddd"),value:k,correspondingMonth:h.format("MMMM"),
disabled:-1!==g.indexOf(k)||0===l||6===l})}return e}function c(b){var c=a(b.target),d=[];b=c.parents("fieldset").find(".visible-month");c.find(".owl-item.active").each(function(){var b=a(this).find(".date-item").data("corresponding-month");d.push(b)});c=d.filter(function(a,b,c){return c.indexOf(a)==b});b.html(c.join(" / "))}var g={},k=0,r=!1,l,n,m,p;g.load=function(a){a.each(h)};f.register({name:"ace-calendar",api:g,selector:".ace-calendar"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){e=a(d).find(".mobile-price-rise-calculator");a(e).submit(function(b){b.preventDefault();var c=a(this).find(".monthly-tariff-value"),d=a(this).find(".monthly-increase-value");b=a(this).find(".monthly-total-value");var e=a(this).find(".currency-icon");c=parseFloat(c.val()).toFixed(2);d=parseFloat(d.text());d=parseFloat(c*d/100);c=Math.floor(100*parseFloat(Number(c)+Number(d)))/100;isNaN(c)||(b.html(parseFloat(c).toFixed(2)),e.addClass("active-value"))})}f.register({name:"price-calculator",
api:{load:function(a){a.each(h)}},selector:".price-calculator"})})(VMJS,VMJSjQuery);
(function(f,a){function h(e,d){function b(a){a.matches&&l.css("padding",p)}function c(a){a.matches&&l.css("padding",m)}function g(a){a.matches&&l.css("padding",n)}e=window.matchMedia("(max-width: 767px)");var f=window.matchMedia("(min-width: 768px) and (max-width: 991px)"),h=window.matchMedia("(min-width: 992px)"),l=a(d).find(".spacer-container-wrapper"),n=l.data("desktoppadding"),m=l.data("tabletpadding"),p=l.data("mobilepadding");b(e);c(f);g(h);e.addListener(b);f.addListener(c);h.addListener(g)}
f.register({name:"spacer-component",api:{load:function(a){a.each(h)}},selector:".spacer-component"})})(VMJS,VMJSjQuery);
(function(f,a){function h(g,e){var f=a(e).find(".address-picker-wrapper"),h=f.find(".dyn-form-field-search"),k=f.find("input[name\x3dPostcode]"),m=f.find(".address-picker-list"),p=m.find("script"),v=f.data("endpoint"),B=f.find(".address-fields"),t=f.find(".enter-manually");c=sessionStorage.getItem("storeDomainServiceability");var D=function(b){m.find("select").on("change",function(){a(this).toggleClass("has-value",""!==a(this).val());var c=a(this).find(":selected").val(),d=B.find("input.ace-form-field");
a(d[0]).val(b[c].streetNumber);a(d[1]).val(b[c].street);a(d[2]).val(b[c].town);a(d).each(function(){a(this).trigger("change").attr("readonly",!0)});B.removeClass("hidden");m.addClass("hidden")})};(function(){k.off("keypress").on("keypress",function(a){13==a.which&&h.trigger("click")});h.off("click").on("click",function(){k.trigger("change");var a={GetAddressRequest:{postcodeSearch:[{postcode:k.val()}],returnFormattedDisplayAddress:"true"}};if(k.parents(".form-group").hasClass("has-error")||""===k.val())return!1;
d.callAPI(c+v.endpointUrl,v.httpMethod,a,!0,v.xhr,v.isAkanaEndpoint).then(function(a){a=a.GetAddressResponse.success.searchResult[0].addresses||[];var c=p.html();c=Handlebars.compile(c)(a);m.html(c);c=m.find(".ace-dropdown");c.select2({placeholder:c.data("placeholder"),theme:"ace form-control",minimumResultsForSearch:Infinity,dropdownParent:c.closest(".form-group"),width:"style"});B.addClass("hidden");m.removeClass("hidden");b.hideBannerMessages();D(a)}).fail(function(a){b.handleApiErrors({apiLabel:v.apiLabel,
xhr:a},f,"error",!1,!0,!1)})})})();(function(){t.on("click",function(){var b=a(this),c=b.data("enter-text"),d=b.data("cancel-text");b.hasClass("enter-manually-cancel")?(b.text(c),B.addClass("hidden"),B.find("input.ace-form-field").each(function(){a(this).val("").attr("readonly",!0)}),h.removeClass("hidden")):(b.text(d),B.removeClass("hidden"),B.find("input.ace-form-field").each(function(){a(this).val("").removeAttr("readonly").removeClass("has-value")}),h.addClass("hidden"),k.val("").removeClass("has-value"));
a(this).toggleClass("enter-manually-cancel");m.addClass("hidden")})})()}var e={},d=common.Utils,b=common.dynFormUtils,c;e.load=function(a){a.each(h)};f.register({name:"address-picker",api:e,selector:".address-picker"})})(VMJS,VMJSjQuery);var VMCSJT={};
(function(f,a){function h(a){var b="";a&&(b+=""+a.page,b+="|"+a.tabID,b+="|"+a.formID,b+="|"+a.section);return b}function e(b,d){var g=a(d),e="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();m=g;k=sessionStorage.getItem("storeDomainServiceability");r=sessionStorage.getItem("keyStoreDomain");"true"===sessionStorage.getItem("storeDomainParamExists")&&(a("#store-domain-info").html("env\x3d"+r),a("#store-domain-info").removeClass("hidden"));c.getJourneyConfig("apis-section").then(function(a){l=c.getApiByID(a,
"serviceability_get");n=c.getApiByID(a,"basket_get");VMCSJT.initJourney(g,e)})}function d(b,c){var d=a("body");d.hasClass("csj-tracking-fired")?d.toggleClass("csj-tracking-fired"):e(b,c)}var b={},c=common.Utils,g=common.dynFormUtils,k,r,l,n,m;VMCSJT.journey={map:{tabs:[]},position:{page:null,tabID:null,formID:null},cache:{},flags:{showEditOpen:!1},utils:{}};VMCSJT.journeyMisc={};a.extend(!0,VMCSJT.journey,JSON.parse(window.sessionStorage.getItem("journeyMap"))||{});a.extend(!0,VMCSJT.journeyMisc,
JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{});VMCSJT.journey.utils.trimMap=function(b,c){var d=VMCSJT.journey.map.tabs.indexOf(b);d=-1===d?VMCSJT.journey.map.tabs.length:d+1;VMCSJT.journey.map.tabs.splice(d,VMCSJT.journey.map.tabs.length);a.each(VMCSJT.journey.map,function(a,d){"tabs"!==a&&(-1!==VMCSJT.journey.map.tabs.indexOf(a)?a===b&&(a=d.forms.indexOf(c),a=-1===a?d.forms.length:a+1,d.forms.splice(a,d.forms.length),d.titles.splice(a,d.titles.length)):delete VMCSJT.journey.map[a])});
VMCSJT.journey.utils.updateStoredJourney("map")};VMCSJT.journey.utils.cacheTab=function(a){var b=a.prop("id").substr(10);VMCSJT.journey.cache[b]=a.detach()};VMCSJT.journey.utils.updateMap=function(a){var b=a.closest(".tab-container").prop("id").substr(10),c=a.prop("id");null===VMCSJT.journey.position.tabID&&(VMCSJT.journey.position.tabID=b,VMCSJT.journey.utils.updateStoredJourney("position"));null===VMCSJT.journey.position.formID&&(VMCSJT.journey.position.formID=c,VMCSJT.journey.utils.updateStoredJourney("position"));
-1===VMCSJT.journey.map.tabs.indexOf(b)&&(VMCSJT.journey.map.tabs.push(b),VMCSJT.journey.map[b]={forms:[],titles:[]});-1===VMCSJT.journey.map[b].forms.indexOf(c)&&(VMCSJT.journey.map[b].forms.push(c),VMCSJT.journey.map[b].titles.push(a.data("page-title")));VMCSJT.journey.utils.updateStoredJourney("map")};VMCSJT.journey.utils.repopulateTabForms=function(b,c){var d=window.sessionStorage.getItem("journeyData");g.encryptDecryptStoredData("decryption",d).then(function(d){var e=JSON.parse(d)||[];e.length&&
a.each(b,function(b,c){b=a(c);c=b.prop("id");c=g.getFormDataIndexById(c,e);-1!==c?g.setFormValues(b,e[c].formData):b.addClass("dyn-form-ready").trigger("dynFormReady")});delete VMCSJT.journey.flags.requiresRepopulating;VMCSJT.journey.utils.updateStoredJourney("flags");c()})};VMCSJT.journey.utils.checkFormSkip=function(b,c,d,e,f,h,k){var l=e.data("skip-form-if");l?g.checkSkipElementCriteria(l).then(function(l){l?(l=a.extend({},{aftersubmit:e.data("aftersubmit"),nextformid:e.data("nextformid"),nexttabid:e.data("nexttabid"),
redirecturl:e.data("redirecturl")}),e.closest(".snippet-importer").remove(),g.afterSubmitAction(null,l,!0,d,k)):VMCSJT.journey.utils.finalizeJump(b,c,e,f,h,k)}):VMCSJT.journey.utils.finalizeJump(b,c,e,f,h,k)};VMCSJT.journey.utils.finalizeJump=function(a,b,c,d,g,e){VMCSJT.journey.position.tabID=a;VMCSJT.journey.position.formID=b;VMCSJT.journey.utils.updateStoredJourney("position");VMCSJT.journey.utils.setShowEditState(c);g&&c.addClass("dyn-form-ready").trigger("dynFormReady");c.removeClass("hidden").trigger("dynFormVisible");
VMCSJT.journey.utils.scrollToTop(d);"undefined"!==typeof e&&e()};VMCSJT.journey.utils.jumpToTarget=function(b,c,d,g){var e=d.prop("id").substr(10),h=d.closest(".snippet-tabs-wrapper");if(e===b||null===b){var k=d.find(".dyn-form"),l=c?a("#"+c):k.first();k.not(".hidden").addClass("hidden").trigger("dynFormHidden");b=b?b:e;c=c?c:l.prop("id");Stickyfill.add(a(".sticky-ie"));VMCSJT.journey.flags.requiresRepopulating?VMCSJT.journey.utils.repopulateTabForms(k,function(){VMCSJT.journey.utils.checkFormSkip(b,
c,d,l,h,!1,g)}):VMCSJT.journey.utils.checkFormSkip(b,c,d,l,h,!0,g)}else VMCSJT.journey.utils.getTargetTabData(b).then(function(e){var k=a(e);e=k.find(".dyn-form");e.not(".hidden").addClass("hidden").trigger("dynFormHidden");if(c)var l=e.filter("#"+c);else l=e.first(),c=l.prop("id");VMCSJT.journey.flags.requiresRepopulating?h.empty():VMCSJT.journey.utils.cacheTab(d);h.append(k);f.init();Stickyfill.add(a(".sticky-ie"));VMCSJT.journey.flags.requiresRepopulating?VMCSJT.journey.utils.repopulateTabForms(e,
function(){VMCSJT.journey.utils.checkFormSkip(b,c,k,l,h,!1,g)}):VMCSJT.journey.utils.checkFormSkip(b,c,k,l,h,!0,g)})};VMCSJT.journey.utils.getTargetTabData=function(b){if(VMCSJT.journey.cache[b])return a.Deferred().resolve(VMCSJT.journey.cache[b]);VMCSJT.journey.flags.requiresRepopulating=!0;return a.ajax({url:a("#"+b).data("resource-path")})};VMCSJT.journey.utils.updateStoredJourney=function(b){var c=JSON.parse(window.sessionStorage.getItem("journeyMap"));c||(c={},b="all");if("all"===b||"flags"===
b)c.flags=a.extend(!0,{},VMCSJT.journey.flags);if("all"===b||"position"===b){var d=h(c.position)!==h(VMCSJT.journey.position);c.position&&c.position.section&&d&&c.position.section===VMCSJT.journey.position.section&&(VMCSJT.journey.position.section=null);c.position=a.extend(!0,{},VMCSJT.journey.position);d&&m&&m.trigger("dynPositionChanged")}if("all"===b||"map"===b)c.map=a.extend(!0,{},VMCSJT.journey.map);window.sessionStorage.setItem("journeyMap",JSON.stringify(c))};VMCSJT.journey.utils.setShowEditState=
function(a){a.find(".dyn-form-show-edit-control").toggleClass("open",VMCSJT.journey.flags.showEditOpen)};VMCSJT.journey.utils.scrollToTop=function(b,c){var d=b.offset().top;!c&&window.matchMedia("(max-width: 1199px)").matches&&(d-=b.parent().find(".mini-bs-totals").outerHeight());a("html, body").animate({scrollTop:Math.ceil(d)},"slow")};VMCSJT.getShortUrl=function(a){return a.replace(/content\/virginmedia\/dotcom\/en\//g,"")};VMCSJT.setGlobalData=function(a,b){this[a]=b};VMCSJT.renderBasketSummary=
function(b,c,d,g){function e(b){b.off("click").on("click",".bs-more-less-cta span",function(c){var d=a(this).parent().prev(),g=b.find(".forms-modal");d.slideToggle("fast",function(){g.is(":visible")&&d.is(":visible")&&g.modal("handleUpdate")});d.parent().toggleClass("expanded")})}function f(a){a=a.find('[data-toggle\x3d"popover"]');a.length&&a.popover({html:!0,trigger:"focus",placement:"auto top",container:a.closest(".basket-summary-wrapper")})}var h="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();
b&&(VMCSJT.basketSummaryTpl=b);c&&(VMCSJT.basketSummaryDiv=c);b=b?b:VMCSJT.basketSummaryTpl;c=c?c:VMCSJT.basketSummaryDiv;VMCSJT.apiData.isViewOnly=d;d=VMCSJT.apiData;var k=VMCSJT.serviceability,l={isAuthorMode:h};h||(h=d.basket.coreProducts.bb,l.apiData=d,l.serviceability=k,h&&(l.ds_min_speed=h.attributes.ds_min_speed,l.ds_range_lower=h.attributes.ds_range_lower,l.ds_range_upper=h.attributes.ds_range_upper,l.us_range_lower=h.attributes.us_range_lower,l.us_range_upper=h.attributes.us_range_upper));
b&&(h=Handlebars.compile(b)(l),a(c).html(h),e(a(c)),f(a(c)));g&&"function"===typeof g&&g()};VMCSJT.renderMiniBasketBasicInfo=function(a,b){a&&(VMCSJT.miniBasketSummaryTpl=a);a=a?a:VMCSJT.miniBasketSummaryTpl;a=Handlebars.compile(a)(VMCSJT.apiData);b.closest(".csjt-checkout-template").find(".mini-bs-basic-info").html(a)};VMCSJT.journey.utils.updateBasket=function(a){c.callAPI(k+n.endpointUrl,n.httpMethod,null,!1,n.xhr,n.isAkanaEndpoint).done(function(b){VMCSJT.setGlobalData("apiData",VMCSJT.parseBasketApiData(b));
VMCSJT.renderBasketSummary(null,null,!0,null);VMCSJT.renderMiniBasketBasicInfo(null,a)})};VMCSJT.parseBasketApiData=function(b,c){function d(a){var b=n.pricingLabels.genericLabel.genericZeroPriceLabel;n.pricingLabels.alternativeLabels.forEach(function(c){"undefined"!==typeof a&&c.productCode===a.code&&(b=c.alternativeLabel)});return b}function g(a){a.forEach(function(a){var b=0,c=a.priceJsonIndex?a.priceJsonIndex:0;a.price&&a.price.oneOff&&a.price.oneOff.length&&(b=Object.keys(a.price.oneOff[c])[0],
"payLater"===b?a.isPayLater=!0:"payNow"===b&&(a.isPayNow=!0),b=a.price.oneOff[c][b].price);a.displayPrice=0===parseFloat(b)?d(a):b;a.isFree=0===parseFloat(b)});return a}function e(a){var b=function(a){return a.map(function(a,b){delete a.quantity;a.price&&a.price.oneOff&&a.price.oneOff.length&&(a.priceJsonIndex=b);return a})};a.forEach(function(c){if(1<c.quantity){var d=a.indexOf(c),g=c.quantity,e=[];a.splice(d,1);for(d=1;d<=g;d++){var f=JSON.parse(JSON.stringify(c));e.push(f)}e=b(e);a=a.concat(e)}});
return a}function f(a,b){return a.filter(function(a){return a.attributes.service_category_code===b})}function h(b){var c={},d=[],g=1;b.discounts=b.discounts||[];for(var e=b.discounts.length,f=0;f<e;f++)if(d[f]={price:b.discounts[f].priceAfterDiscount},0===f)d[f].termInterval=b.discounts[f].term;else{g+=parseInt(b.discounts[f-1].term);var h=g===parseInt(b.discounts[f].term)+g-1?g:g+" - "+(parseInt(b.discounts[f].term)+g-1);d[f].termInterval=h}0===e?c.priceWithoutDiscounts=b.price:(d.forEach(function(a,
b){c["priceForPeriod"+(b+1)]=a.price;c["termForPeriod"+(b+1)]=a.termInterval}),c.priceAfterAllDiscounts=b.price);a.extend(b,c);return b}function k(a,b){var c=VMCSJT.basketAuthorData.rewardsConfig.groups.find(function(a){return a.rewardGroupIndex===b});return c&&c.rewards?c.rewards.find(function(b){return a.code===b.rewardCode}):null}function l(){var b=[];J.forEach(function(c){b.push(a.extend(!0,c,k(c,"rewards")))});Q.forEach(function(c){b.push(a.extend(!0,c,k(c,"rewards")))});R.forEach(function(c){b.push(a.extend(!0,
c,k(c,"rewards")))});return b}var m=[],n=c||VMCSJT.basketAuthorData;c=function(a){a.forEach(function(a){n.infoIcons.forEach(function(b){b.productCode===a.code&&(a.infoIconText=b.infoIconText)})});return a}(b.basket.items);var r=c.filter(function(a){return a.attributes.product_tier&&""!==a.attributes.product_tier}),p=c.filter(function(a){var b="wireless_option outlets bbu adaptor netflix ebul".split(" ");return!a.attributes.product_tier&&""!==a.name&&"discount"!==a.attributes.product_classification&&
!a.attributes.promo_classification&&!a.attributes.discount_action&&!b.includes(a.attributes.product_category)}),v=p.filter(function(a){return"sim_tariff"===a.attributes.product_category&&"Mobile"===a.attributes.product_platform})[0],A=e(c.filter(function(a){return!a.attributes.product_tier&&""!==a.name&&("wireless_option"===a.attributes.product_category||"bbu"===a.attributes.product_category||"adaptor"===a.attributes.product_category||"ebul"===a.attributes.product_category||"subscription"===a.attributes.product_classification)})),
H=e(c.filter(function(a){return"cableInstall"===a.attributes.product_classification||"setupCost"===a.attributes.product_classification})),N=c.filter(function(a){return"billing_item"===a.attributes.product_category})[0],I=c.filter(function(a){return"rewards"===a.attributes.product_group&&"APPLY_AS_CREDIT"!==a.attributes.discount_action&&"flash_sale"!==a.attributes.promo_classification})[0],M=c.filter(function(a){return"netflix"===a.attributes.product_category}),J=c.filter(function(a){return"flash_sale"===
a.attributes.promo_classification}),Q=c.filter(function(a){return"APPLY_AS_CREDIT"===a.attributes.discount_action&&"flash_sale"!==a.attributes.promo_classification}),R=c.filter(function(a){return"reward_extra"===a.attributes.promo_classification&&"flash_sale"!==a.attributes.promo_classification&&"APPLY_AS_CREDIT"!==a.attributes.discount_action});v&&(m=f(p,"D").filter(function(a){return a.code!==v.code}));I&&a.extend(!0,I,k(I,b.prices.bundle.rewardsGroup));return a.extend(!0,b,{basket:{billingItem:function(a){var b=
0;n.billingLabels.forEach(function(b){b.productCode===a.code?(a.name=b.productLabel,a.productType=b.productType):a.canSwitchTo=b.productCode});a.price&&a.price.monthly&&(b=a.price.monthly.discounts[0]&&a.price.monthly.discounts[0].priceAfterDiscount?a.price.monthly.discounts[0].priceAfterDiscount:a.price.monthly.price);a.displayPrice=0===parseFloat(b)?d(a):b;return a}(N),netflixProds:M,coreProducts:{tv:f(r,"C")[0],bb:f(r,"D")[0],ph:f(r,"T")[0],mobile:v},equipments:g(A),extras:{tv:f(p,"C"),bb:v?m:
f(p,"D"),ph:f(p,"T")},installAndSetup:function(a){function c(a,b){b=b.priceAfterDiscount?b.priceAfterDiscount:b.price;"undefined"!=typeof a&&(a.displayPrice=0===parseFloat(b)?d(a):b,a.isFree=0===parseFloat(b))}var e=a.filter(function(a){return"setupCost"===a.attributes.product_classification});e.length&&g(e);e=a.filter(function(a){return"cableInstall"===a.attributes.product_classification});var f=e.filter(function(a){return a.attributes.appntmnt_classification&&!a.attributes.install_priority})[0];
f&&c(f,b.prices.installationActivationCost);f=e.filter(function(a){return"Standard"===a.attributes.appntmnt_classification&&a.attributes.install_priority})[0];e=e.filter(function(a){return"Priority"===a.attributes.appntmnt_classification&&a.attributes.install_priority})[0];f&&e?(a.splice(a.indexOf(f),1),c(e,b.prices.installationCost)):c(f,b.prices.installationCost);return a}(H),selectedRewardInRewardsChooser:I?I:null,otherRewards:l(),shouldDisplayRewardsSection:I||0<b.basket.appliedCoupons.length||
0<l().length},prices:{bundle:{monthly:h(b.prices.bundle.monthly)},monthlyTotal:h(b.prices.monthlyTotal),oneOffTotal:function(a){a.isPayLater=!1;a.isPayNow=!1;a.isPayNowAndPayLater=!1;var b=a.payLater.priceAfterDiscount?a.payLater.priceAfterDiscount:a.payLater.price,c=a.payNow.priceAfterDiscount?a.payNow.priceAfterDiscount:a.payNow.price;0!==parseFloat(b)&&0!==parseFloat(c)?(a.isPayNowAndPayLater=!0,a.isPayLater=!0,a.isPayNow=!0):0!==parseFloat(b)?a.isPayLater=!0:a.isPayNow=!0;return a}(b.prices.oneOffTotal)}})};
VMCSJT.checkBasketContents=function(b){if("undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode())return!1;var c=VMCSJT.apiData.basket.coreProducts.mobile,d=VMCSJT.apiData.basket.coreProducts.ph,g=VMCSJT.serviceability.phoneOverBB;switch(b){case "PhoneInBasket":return"undefined"!==typeof d;case "PhoneNotPresent":return"undefined"===typeof d;case "PhoneSolus":return"undefined"!==typeof d&&1===Object.keys(VMCSJT.apiData.basket.coreProducts).length;case "21CVpremise":return"undefined"!==typeof g&&!0===
g&&"undefined"!==typeof d&&0!==Object.keys(d).length;case "SIMPresent":return"undefined"!==typeof c&&0!==Object.keys(c).length;case "SIMNotPresent":return"undefined"===typeof c||0===Object.keys(c).length;case "NonIRIRIR":return 0<a.grep(VMCSJT.serviceability.statusDetails.serviceDetails,function(a){return"IR"===a.code}).length;case "irsFaceplatePremise":return!VMCSJT.serviceability.irsNoFaceplatePremise;case "QuickstartUnavailable":var e=a.Deferred();VMCSJT.getAppointments=VMCSJT.getAppointments.always(function(){var a=
VMCSJT.apiData.basket.installAndSetup.some(function(a){return"QuickStartInstallation"===a.attributes.install_type});e.resolve(VMCSJT.journeyMisc.hasAppointments&&!VMCSJT.journeyMisc.qsEligible||!a)});return e.promise();case "RealAppointments":var f=a.Deferred();VMCSJT.getAppointments=VMCSJT.getAppointments.always(function(){f.resolve(VMCSJT.journeyMisc.realAppointments)});return f.promise();case "GeneratedAppointments":var h=a.Deferred();VMCSJT.getAppointments=VMCSJT.getAppointments.always(function(){h.resolve(!VMCSJT.journeyMisc.realAppointments)});
return h.promise()}};VMCSJT.journey.utils.resumePreviousSession=function(b,c,d){var g=a("#cta-snippet-target"),e=VMCSJT.getShortUrl(b.data("page-path"))+"/"+VMCSJT.journey.position.page+"/jcr:content/mainParsys";a.ajax({url:e}).then(function(e){e=a(e);g.empty().append(e);f.init();c&&d?(e=e.find(".tab-container"),VMCSJT.journey.flags.requiresRepopulating=!0,VMCSJT.journey.utils.jumpToTarget(c,d,e,function(){b.height("").removeClass("csjt-checkout-template-empty")})):b.height("").removeClass("csjt-checkout-template-empty")})};
VMCSJT.initJourney=function(b,d){var e=function(a){var b=a.telephonyTechnologyTypes.filter(function(a){return"DOCSIS"===a});a.phoneOverBB=b.length?!0:!1;return a},f=function(){return a.when(common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-icons-config"}),common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-pricing-labels-config"}),common.AsyncService.ajaxPromise({method:"GET",url:"/services/api/csjt-billings-config"}),common.AsyncService.ajaxPromise({method:"GET",
url:"/services/api/rewards-config"})).then(function(a,b,c,d){return{infoIcons:a.icons,pricingLabels:b,billingLabels:c.productLabels,rewardsConfig:d}})};d?(VMCSJT.setGlobalData("serviceability",{}),VMCSJT.setGlobalData("apiData",{})):(b.height(window.innerHeight-a("#unified-header").height()-a("#unified-footer").height()),a(window).on("beforeunload",function(a){if("undefined"===typeof VMCSJT.journeyMisc.forceRedirect)return a.preventDefault(),a.returnValue="The information you have entered may be lost if you leave this page."}),
c.callAPI(k+l.endpointUrl,l.httpMethod,null,!1,l.xhr,l.isAkanaEndpoint).then(function(d){VMCSJT.setGlobalData("serviceability",e(d));a.when(c.callAPI(k+n.endpointUrl,n.httpMethod,null,!1,n.xhr,n.isAkanaEndpoint),f()).then(function(a,c){VMCSJT.setGlobalData("basketAuthorData",c);a=VMCSJT.parseBasketApiData(a,c);VMCSJT.setGlobalData("apiData",a);null!==VMCSJT.journey.position.page?VMCSJT.journey.utils.resumePreviousSession(b,VMCSJT.journey.position.tabID,VMCSJT.journey.position.formID):b.height("").removeClass("csjt-checkout-template-empty")})}).fail(function(){g.setJourneyMiscFlag("forceRedirect",
!0,VMCSJT);window.location.href=VMCSJT.getShortUrl(window.location.origin+b.data("redirect-serviceability-fail"))}))};b.load=function(a){a.each(d)};f.register({name:"csjt-checkout-template",api:b,selector:".csjt-checkout-template"})})(VMJS,VMJSjQuery);
(function(f,a,h){function e(a){window.vmStoreJson=a;window.sessionStorage.setItem("vmStoreJson",JSON.stringify(a));a=new CustomEvent("CSJ_PAGE_TRACKING");document.dispatchEvent(a)}function d(c){C.waitForGlobal("VMCSJT","journey",function(){C.waitForGlobal("VMCSJT","analyticsMapping",function(){var d=c.pageName,f="basket"===a.journey.position.section,h="order-complete"===a.journey.position.section||"order-error"===a.journey.position.section;b(c);c.pageName!==d&&0!==c.pageName.length&&(g(c),C.waitForGlobal("VMCSJT",
"apiData",function(){r(c);p(c);if(f)C.waitForGlobal("VMCSJT","serviceability",function(){v(c);B(c);e(c)});else{if(h){var a=JSON.parse(window.sessionStorage.getItem("journeyMisc"))||{};a&&a.order&&(c.customer||B(c),c.customer.orderId=a.order)}e(c)}}))})})}function b(b){var d="";var g=a.journey.position;if(g.section)g=c(a.analyticsMapping["hardcoded-sections"][g.section]);else{var e=a.analyticsMapping[g.page];g.tabID&&e&&(e=e[g.tabID]);g.formID&&e&&(e=e[g.formID]);g=c(e)}g=g.split("{subdomain/}");e=
window.location.hostname.split("www.");e=e[e.length-1];"virginmedia.com"!==e&&2===g.length&&(d="www."+e.split(".virginmedia.com")[0]+"/");g=g[g.length-1];b.pageName=d+g}function c(a){return a&&"string"===typeof a?a:""}function g(a){for(var b=a.pageName.split("/"),c=b.length,d="",g=1,e=0;5>g;g++)e<c&&(0<e&&(d+="/"),d+=b[e]),e++,a["subSection"+g]=d}function k(a){switch(a){case void 0:return"not_mapped";case "D":return"BB";case "C":return"TV";case "T":return"PH";default:return a}}function r(b){b.basket=
{items:[]};if(a.apiData.basket&&(m(b.basket,"numberOfCores",a.apiData.basket.numberOfCores),m(b.basket,"productCodes",l(a.apiData.basket.productCodes)),m(b.basket,"appliedCoupons",a.apiData.basket.appliedCoupons),m(b.basket,"maxCouponsAllowed",a.apiData.basket.maxCouponsAllowed),a.apiData.basket.items))for(var c=a.apiData.basket.items.length-1;-1<c;c--){var d=a.apiData.basket.items[c],g={};m(g,"code",d.code);m(g,"qty",d.quantity);m(g,"name",d.name);m(g,"tier",d.tier);m(g,"rule",d.rule);if(d.attributes){m(g,
"serviceCategory",k(d.attributes.service_category_code));m(g,"productPlatform",d.attributes.product_platform);m(g,"tmi",d.attributes.product_tmi);m(g,"bbSpeed",d.attributes.product_bb_speed);m(g,"outletType",d.attributes.outlet_type);var e=g,f=d.attributes.product_classification,h=[];f&&h.push(f);m(e,"classifications",h);d.attributes.install_type&&(m(g,"installationType",d.attributes.install_type),e=g,d=d.attributes.product_category?void 0:"",m(e,"installationCategory",d))}b.basket.items.push(g)}}
function l(a){a=a.split("|");var b=[],c=[],d=[];h.each(a,function(a,g){switch(n(g)){case "D":b.push(g);break;case "C":c.push(g);break;case "T":d.push(g)}});return b.concat(c,d).join("|")}function n(b){var c=null;h.each(a.apiData.basket.items,function(a,d){d.code===b&&(c=d.attributes.service_category_code)});return c}function m(a,b,c){"undefined"!==typeof c&&(a[b]=c)}function p(b){b.totals={};a.apiData.prices&&(m(b.totals,"bundle",a.apiData.prices.bundle),m(b.totals,"monthly",a.apiData.prices.monthlyTotal),
m(b.totals,"oneoff",a.apiData.prices.oneOffTotal),m(b.totals,"installationCost",a.apiData.prices.installationCost),m(b.totals,"installationActivationCost",a.apiData.prices.installationActivationCost))}function v(b){b.serviceability||(b.serviceability={});m(b.serviceability,"outcomeId",a.serviceability.outcomeId);a.serviceability.address&&(m(b.serviceability,"address",a.serviceability.address.display),m(b.serviceability,"postcode",a.serviceability.address.postcode),m(b.serviceability,"premise",a.serviceability.address.premiseId),
m(b.serviceability,"siteId",a.serviceability.address.siteId),m(b.serviceability,"addressDetails",{}),m(b.serviceability.addressDetails,"town",a.serviceability.address.town));m(b.serviceability,"maxBBspeed",a.serviceability.speed);m(b.serviceability,"spotters",a.serviceability.spotters);m(b.serviceability,"quickStartAOAllowed",a.serviceability.quickStartAOAllowed);m(b.serviceability,"active",a.serviceability.active);m(b.serviceability,"prewired",a.serviceability.prewired);m(b.serviceability,"qsCableEligible",
a.serviceability.qsCableEligible);m(b.serviceability,"qsTelephonyEligible",a.serviceability.qsTelephonyEligible);m(b.serviceability,"qsOutletEligible",a.serviceability.qsOutletEligible);m(b.serviceability,"telephonyTechnologyTypes",a.serviceability.telephonyTechnologyTypes);m(b.serviceability,"networkServiceabilityDetails",a.serviceability.networkServiceabilityDetails);m(b.serviceability,"status",a.serviceability.status);a.serviceability.statusDetails&&(m(b.serviceability,"statusDetails",{}),m(b.serviceability.statusDetails,
"details",a.serviceability.statusDetails.details),a.serviceability.statusDetails.serviceDetails&&a.serviceability.statusDetails.serviceDetails.forEach(function(a){m(b.serviceability,a.serviceType,a.code);m(b.serviceability.statusDetails,a.serviceType,a)}))}function B(a){a.customer||(a.customer={});m(a.customer,"store","ALLYOURS");m(a.customer,"productChannel","cable");m(a.customer,"customerTypeCable","new_customer_cable");m(a.customer,"orderTypeCable","new_cable_order")}function t(){a.analyticsMapping||
h.get("/content/dam/virginmedia/dotcom/static/analyticsMapping.txt").then(function(b){b=b.replace(/\s/g,"");a.setGlobalData("analyticsMapping",JSON.parse(b))})}function D(a,b){t();h(b).on("dynPositionChanged",function(){var a=JSON.parse(window.sessionStorage.getItem("vmStoreJson"))||{};d(a)})}var z={},C=common.Utils;z.load=function(a){a.each(D)};f.register({name:"csjt-vm-store-analytics",api:z,selector:".csjt-vm-store-analytics.publish-mode"})})(VMJS,window.VMCSJT,VMJSjQuery);
(function(f,a,h){function e(b){function c(c){var d=a.basketAuthorData.rewardsConfig.groups.find(function(a){return a.rewardGroupIndex===c}),f=a.apiData.basket.selectedRewardInRewardsChooser&&a.apiData.basket.selectedRewardInRewardsChooser.code;d&&d.rewards&&d.rewards.length&&(d=Handlebars.compile(n)({configArrayRewards:d.rewards,selectedRewardProd:f?f:null}),e.html(d),y.prop("disabled",!0),b.find(".bs-rewards-list").removeClass("hidden"),b.find(".bs-rewards-section").removeClass("hidden"));e.on("click",
".bs-rewards-item",function(b){b.preventDefault();var c=h(this);c.hasClass("selected")||(l.toggleSpinner(),b=c.data("reward-code"),k.callAPI(r+g.endpointUrl,g.httpMethod,{productCode:b},!0,g.xhr,g.isAkanaEndpoint).then(function(b){e.find(".selected").removeClass("selected");c.addClass("selected");c.find("input").prop("checked",!0);y.prop("disabled",!1);a.setGlobalData("apiData",a.parseBasketApiData(b));a.renderBasketSummary(null,null,!1,null);l.hideBannerMessages();l.toggleSpinner()}).fail(function(a){var b=
e.closest(".bs-rewards-section");l.handleApiErrors({apiLabel:g.apiLabel,xhr:a},b,"error",!1,!0,!0)}))})}function d(){var c=Handlebars.compile(z)({otherRewardsArr:a.apiData.basket.otherRewards});f.html(c);b.find(".bs-rewards-section").removeClass("hidden")}var g=b.closest(".csjt-checkout-template").data("rewardsDetailsApi"),e=b.find(".bs-rewards-list"),f=b.find(".bs-other-rewards-list"),n=e.find("script").html(),z=f.find("script").html(),C="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode(),y=b.closest(".csjt-checkout-template").find(".snippet-toggle button");
C||(a.apiData.prices.bundle.rewardsGroup&&"N/A"!==a.apiData.prices.bundle.rewardsGroup&&c(a.apiData.prices.bundle.rewardsGroup),a.apiData.basket.otherRewards.length&&d("rewards"))}function d(b){function c(a,b,c){a?(z.addClass("hidden"),n.show()):(y.removeClass("has-value"),C[0].reset(),C.validator("destroy").validator(),n.hide(),b<c&&z.removeClass("hidden"))}function d(b){var d=a.apiData.basket.appliedCoupons,g=a.apiData.basket.maxCouponsAllowed;b?a.setGlobalData("promoCodeTpl",b):b=a.promoCodeTpl;
d.length?(b=Handlebars.compile(b)({appliedCoupons:d}),e.html(b),c(!1,d.length,g)):(e.empty(),c(!0,null,null))}function g(){u.html('\x3cul class\x3d"list-unstyled"\x3e\x3cli\x3e'+x+"\x3c/li\x3e\x3c/ul\x3e");q.addClass("has-error has-danger");y.one("input.fail",function(){q.removeClass("has-error has-danger");u.html("");E.removeClass("disabled")})}var e=b.find(".bs-promotions-codes"),f=h("#bs-promotion-codes-template").html(),n=b.find(".bs-promotions-form-wrap"),z=b.find(".bs-promotions-form-control"),
C=b.find(".bs-promotions-form"),y=C.find("input"),q=y.parent(".form-group"),x=y.data("fail-message"),u=C.find(".help-block"),E=b.find(".bs-promotions-form-submit"),F=b.closest(".csjt-checkout-template").data("promosDetailsAddApi"),G=b.closest(".csjt-checkout-template").data("promosDetailsDeleteApi"),A=b.find(".basket-summary-wrapper"),H=A.data("promosAddSuccess");b="undefined"!==typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode();F&&G&&!b&&(z.on("click",function(){}