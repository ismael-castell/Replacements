(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{836:function(e,t,n){"use strict";n(183),n(53),n(8),n(41);var r={props:{addClass:"",placeHolder:0,type:"",inputData:null,errorMsg:null,loungeId:{default:null},isUpdatable:{default:!0},savedSearchId:{default:0},validationField:{default:!1}},computed:{},watch:{inputData:function(e,t){!e&&t&&(this.updatedData=null)},searchKeyword:function(e,t){e===t||this.hitted||this.getSearchResult(),this.hitted=!1},updatedData:function(e,t){""!==e||t||this.reset(),"company"===this.type&&this.$emit("update",{name:this.updatedData})}},data:function(){return{updatedData:this.inputData,searchKeyword:"",searchList:[],focused:!1,current:-1,scrollY:0,searchId:this.savedSearchId,searchName:"",logoImgUrl:"",urlAlias:null,hitted:!1,inputTimer:{}}},mounted:function(){},filters:{highlight:function(e,t){if(t){var n=new RegExp(t,"ig");return e.replace(n,(function(e,a,b){return"<strong>"+e+"</strong>"}))}return e}},methods:{onFocusIn:function(){this.focused=!0,"company"===this.type&&this.getSearchResult()},onFocusOut:function(){this.focused=!1,this.searchId||"company"===this.type||this.reset()},setActive:function(e){this.current=e},activeClass:function(e){return{active:this.current===e}},down:function(e){this.searchList.length<1||(this.current===e.target.parentElement.querySelectorAll(".auto li").length-1||(this.current<e.target.parentElement.querySelectorAll(".auto li").length-1?this.current++:this.current=0),this.setFocus(e))},up:function(e){this.searchList.length<1||(this.current>0?this.current--:-1===this.current?this.current=e.target.parentElement.querySelectorAll(".auto li").length-1:this.current=0,this.setFocus(e))},hit:function(e){var t=this;if(this.current>-1){var n=e.target.parentElement.parentElement,r=n.querySelectorAll("li")[this.current];void 0===r&&(r=n),this.searchId=r.getAttribute("id"),this.searchName=r.getAttribute("name"),this.logoImgUrl=r.getAttribute("img"),this.urlAlias=r.getAttribute("url_alias"),this.hitted=!0,this.searchList=[],this.$emit("update",{name:this.searchName,id:this.searchId,img:this.logoImgUrl,url_alias:this.urlAlias}),setTimeout((function(){t.updatedData=t.searchName}))}},reset:function(){this.searchKeyword="",this.searchName="",this.searchId=0,this.updatedData=null,this.searchList=[],this.$emit("update",null)},listView:function(e,t){var n=t.target.parentElement.querySelector(".auto"),r=t.target.parentElement.querySelector(".auto:hover");"block"===e?(n.style.display=e,this.$ga.event("Type-company",this.name)):"none"===e&&null===r?n.style.display=e:navigator.userAgent.indexOf("Trident")>-1&&n.parentElement.querySelector(".inp").focus()},setFocus:function(e){var t=e.target.parentElement.querySelectorAll(".auto li")[this.current],n=t.offsetTop,r=t.offsetHeight+14,o=e.target.parentElement.querySelector(".auto");n+30>o.offsetHeight&&this.scrollY<n?o.scrollTop+=r:this.scrollY>n&&(o.scrollTop-=r),this.scrollY=n},updateAutoKeyword:function(e){this.isUpdatable&&(this.searchKeyword=e.target.value,this.searchKeyword.length<1&&(this.searchList=[],this.$emit("update",null)))},getSearchResult:function(){var e=this;if(this.searchKeyword.length>0){var t={search:this.searchKeyword},n="channel"===this.type?"review/autoCompleteCompany":"review/autoCompleteCompanyPage";this.inputTimer&&clearTimeout(this.inputTimer),this.inputTimer=setTimeout((function(){e.$axios.post("/api/company_page/".concat(n),t).then((function(t){if(t.success){var n=t.data.companies||[];e.searchList=n.map((function(e){return{search_name:"".concat(e.company_page_name||e.company_channel_name).concat("Y"===e.your_company?" (Your Company)":""),search_id:e.company_channel_id||e.id,logo_img_url:e.logo_img_url,url_alias:e.url_alias||null,overall:e.overall||0}}))}else console.error(t.error.message)}))}),500)}else this.$axios.post("/api/company_page/topSearchedCompanies").then((function(t){if(t.success){var n=t.data.top10||[];e.searchList=n.map((function(e){return{search_name:"".concat(e.company_name),search_id:e.id,logo_img_url:e.logo_img_url,url_alias:e.url_alias||null,overall:e.star_overall||0}}))}else console.error(t.error.message)}))}}},o=n(5),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form_wrap"},[n("div",{staticClass:"fieldset",class:{active:e.focused&&e.isUpdatable||"fieldset_loc"===e.addClass&&e.updatedData,error:e.validationField}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedData,expression:"updatedData"}],class:{inp:"company"===e.type},attrs:{type:"text",placeholder:e.placeHolder,"data-sign":"",disabled:!e.isUpdatable},domProps:{value:e.updatedData},on:{focus:e.onFocusIn,focusout:e.onFocusOut,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.down.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.up.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hit.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.reset.apply(null,arguments)}],keyup:e.updateAutoKeyword,input:function(t){t.target.composing||(e.updatedData=t.target.value)}}}),e._v(" "),"company"===e.type?n("button",{staticClass:"btn_clse",attrs:{type:"button"}},[n("span",{staticClass:"blind"},[e._v("Delete")])]):e._e(),e._v(" "),e.focused&&e.isUpdatable&&e.searchList.length>0?n("div",{staticClass:"auto_wp"},[n("div",{staticClass:"auto"},[n("ul",{staticClass:"companies"},e._l(e.searchList,(function(t,r){return n("li",{class:{active:e.current===r},attrs:{id:t.search_id,name:t.search_name,img:t.logo_img_url,url_alias:t.url_alias},on:{mousedown:e.hit,mousemove:function(t){return e.setActive(r)}}},["company"===e.type?n("span",{staticClass:"img"},[t.logo_img_url?n("img",{attrs:{src:t.logo_img_url}}):e._e()]):e._e(),e._v(" "),n("label",{domProps:{innerHTML:e._s(e.$options.filters.highlight(t.search_name,e.updatedData))}}),e._v(" "),"company"===e.type?n("span",{staticClass:"star",class:{zero:0===parseInt(t.overall)}},[n("i",{staticClass:"blind"},[e._v("Rating Score")]),e._v(e._s(t.overall))]):e._e()])})),0)])]):e._e()]),e._v(" "),e.validationField&&e.errorMsg?n("p",{staticClass:"notice alert"},[e._v(e._s(e.errorMsg))]):e._e()])}),[],!1,null,null,null);t.a=component.exports},976:function(e,t,n){"use strict";n.r(t);var r=n(4),o=(n(16),n(8),n(836)),l=n(186),c=n(185),m={data:function(){return{myCompanyPage:null,isReviewWriteRestricted:!1,updateSignal:0,searchText:null,reviewHistories:null,topSearchedCompanies:null,statusMap:{A:"Approved",R:"Returned",P:"Pending",H:"Removed",D:"Deleted"},AD:{COMPANY_REVIEW_MAIN:c.b.COMPANY_REVIEW_MAIN}}},beforeMount:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$store.state.authUser){t.next=8;break}return t.next=3,e.getUserCompanyPage();case 3:if(e.myCompanyPage){t.next=6;break}return t.next=6,e.getIsReviewWriteRestricted();case 6:return t.next=8,e.getUserReviewHistory();case 8:return t.next=10,e.getTopSearchedCompanies();case 10:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$store.state.authUser){t.next=6;break}if(!localStorage.getItem("hasTalentByBlindAdPopup")){t.next=6;break}return t.next=4,e.$axios.post("/api/talent/talent_by_blind/ad/popup");case 4:(data=t.sent).success&&data.data.popup?(localStorage.removeItem("hasTalentByBlindAdPopup"),e.$modal.show("talentByBlindAdPopup",{popup:data.data.popup,gaLabel:"after_input_review"})):(data.error=data.error||data.data.error,15001==data.error.code?localStorage.removeItem("hasTalentByBlindAdPopup"):e.$common.showErrorPopup(data.error));case 6:e.$common.showEzoicAds(e.AD.COMPANY_REVIEW_MAIN);case 7:case"end":return t.stop()}}),t)})))()},methods:{getUserCompanyPage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/company_page/myCompanyPage");case 3:(n=t.sent).success&&n.data.company_page&&(e.myCompanyPage=n.data.company_page[0]),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getIsReviewWriteRestricted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/company_page/isReviewWriteRestricted");case 3:(n=t.sent).success&&n.data.is_review_write_restricted&&(e.isReviewWriteRestricted=n.data.is_review_write_restricted),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getUserReviewHistory:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/company_page/review/myHistory");case 3:(n=t.sent).success&&(e.reviewHistories=n.data.history),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getTopSearchedCompanies:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/company_page/topSearchedCompanies");case 3:(n=t.sent).success&&(e.topSearchedCompanies=n.data.top10),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},writeReview:function(){if(this.$store.state.authUser){if(this.$store.state.authUser&&this.$store.state.authUser.member_info.lv)return void this.$modal.show("authAccess");this.$ga.event("Review-main","Create-review","Write-review-btn");var e=this.myCompanyPage?this.myCompanyPage.company_id:this.$store.state.authUser.member_info.company_id,t=this.myCompanyPage?this.myCompanyPage.logo_img_url:null,n=this.myCompanyPage?this.myCompanyPage.company_name:this.$store.state.authUser.member_info.company_real_name,r=this.myCompanyPage?this.myCompanyPage.is_review_write_restricted:this.isReviewWriteRestricted;sessionStorage.setItem("reviewCompany",JSON.stringify({companyChannelId:e,logoImgUrl:t,companyName:n,isReviewWriteRestricted:r})),this.$router.push({name:"company-review-write"})}else this.$store.state.userAgent.isMobile?(this.$ga.event("Review-main","Open-join-now-layer","Review-your-company-btn-click"),this.$modal.show("mobileAppDown",{from:"company_review",label:"Review-main-review-your-company-btn-click"})):this.$modal.show("signup",{triggerAction:"review_company",ga:{action:"Create-review",label:"Review-main-btn"},gaEventLabel:"Create-review-review-main-btn"})},requestCompanyPage:function(){this.$modal.show("request_company_page"),this.$ga.event("Review-main","Request-company","Request-to-add-your-company-click")},updateCompanyPage:function(e){e&&e.url_alias&&(this.$ga.event("Enter-company-page","Review-main","Search-".concat(e.name)),this.$router.push({name:"company-alias",params:{alias:e.url_alias}}))},deleteReview:function(e){var t=this;this.$ga.event("Review-main","Delete","undefined"),this.$modal.show("popup",{message:"Are you sure to delete this review?",buttons:[{title:"CANCEL"},{title:"DELETE",class:"btn_primary",handler:function(){t.$ga.event("Review-main","Delete-complete","undefined"),t.$axios.post("/api/company_page/review/delete",{reviewId:e.id}).then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!data.success){e.next=6;break}return e.next=3,t.getUserReviewHistory();case 3:t.$modal.hide("popup"),e.next=9;break;case 6:t.$modal.hide("popup"),data.error=data.error||data.data.error,t.$common.showErrorPopup(data.error);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]})},editReview:function(e){this.$ga.event("Review-main","Edit","undefined"),this.$router.push({name:"company-review-edit-review_alias",params:{review_alias:e.review_alias}})},viewReview:function(e){this.$ga.event("Review-main","View-on-company-page","undefined"),this.$router.push({name:"company-alias-review-review_alias",params:{alias:e.url_alias,review_alias:e.review_alias}})},showInfo:function(){}},components:{FormSelectReview:o.a,Popper:function(){return Promise.all([n.e(2),n.e(43)]).then(n.bind(null,712))},StarRating:function(){return n.e(123).then(n.t.bind(null,970,7))},Ad:l.a}},v=m,d=n(5),component=Object(d.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"company_main"},[n("div",{staticClass:"top"},[n("div",{staticClass:"wrap"},[e._m(0),e._v(" "),e._m(1),e._v(" "),n("div",{staticClass:"srch_box"},[n("form-select-review",{key:e.updateSignal,attrs:{type:"company","input-data":e.searchText,"place-holder":"Search for the Company Name"},on:{update:e.updateCompanyPage}})],1),e._v(" "),n("div",{staticClass:"up_box"},[n("span",[e._v("Is your company missing?")]),e._v(" "),n("button",{staticClass:"btn_up",attrs:{type:"button"},on:{click:e.requestCompanyPage}},[n("span",[e._v("Request to add your company!")])])])])]),e._v(" "),n("div",{staticClass:"rsp"},[n("div",{staticClass:"wrap"},[e.myCompanyPage?n("div",{staticClass:"current"},[n("span",{staticClass:"name"},[e._v(e._s(e.myCompanyPage.company_name))])]):e._e(),e._v(" "),n("h3",{staticClass:"tit"},[e._v("Review your company!")]),e._v(" "),e._m(2),e._v(" "),n("a",{staticClass:"btn_rv",on:{click:e.writeReview}},[e._v("REVIEW YOUR COMPANY")])])]),e._v(" "),n("div",{staticClass:"lists"},[n("div",{staticClass:"wrap"},[e.reviewHistories?n("div",{staticClass:"history",attrs:{id:"history"}},[n("h3",{staticClass:"ltit"},[e._v("Review History")]),e._v(" "),n("p",{staticClass:"desc"},[e._v("Approved reviews appear on the employer's Company Page.")]),e._v(" "),n("div",{staticClass:"tblwp"},[n("table",{staticClass:"tbl"},[e._m(3),e._v(" "),n("tbody",e._l(e.reviewHistories,(function(t){return n("tr",[n("td",{staticClass:"cmp"},[n("div",{staticClass:"inr"},[t.url_alias?n("span",[n("nuxt-link",{attrs:{to:{name:"company-alias",params:{alias:t.url_alias}}},nativeOn:{click:function(n){return e.$ga.event("Enter-company-page","Review-main-history",t.company_name+"-name")}}},[e._v(e._s(t.company_name))])],1):n("span",[e._v(e._s(t.company_name))]),e._v(" "),n("span",{staticClass:"sub"},[n("i",{staticClass:"blind"},[e._v("Submitted on")]),e._v(e._s(e.$common.momentTz(t.created_at)))])])]),e._v(" "),n("td",{staticClass:"stt"},["A"===t.status&&!t.url_alias||["R","H"].includes(t.status)?n("popper",{attrs:{trigger:"click",options:{placement:"bottom-end"}}},[n("span",{staticStyle:{display:"inline-block"},attrs:{slot:"reference"},slot:"reference"},[n("button",{staticClass:"stts",class:{ap:"A"===t.status,rt:"R"===t.status,rm:"H"===t.status},attrs:{type:"button"},on:{click:function(n){return e.$ga.event("Review-main","Status-info",""+e.statusMap[t.status])}}},[e._v(e._s(e.statusMap[t.status]))])]),e._v(" "),n("span",{staticClass:"popper"},[n("div",{staticClass:"ly_info"},[n("button",{staticClass:"btn_clse close",attrs:{type:"button"}},[n("i",{staticClass:"blind"},[e._v("Close")])]),e._v(" "),n("div",{staticClass:"tit"},[e._v("Review "+e._s(e.statusMap[t.status]))]),e._v(" "),"A"===t.status?n("div",{staticClass:"msg"},[e._v("\n                                                Your review has been approved. Unfortunately, the employer's company page has not been opened yet. Please wait until the page opens.\n                                            ")]):n("div",{staticClass:"msg"},[e._v("\n                                                Your review is not able to be shown on the company page due to a violation of our "),n("a",{staticClass:"hl",on:{click:function(t){e.$modal.show("reviewGuide"),e.$ga.event("Review-main","Review-guidelines","undefined")}}},[e._v("Review Guidelines")]),e._v(".\n                                                "),t.return_reason?n("p",{staticClass:"rs"},[e._v("Reason : "+e._s(t.return_reason))]):e._e()])])])]):n("p",{staticClass:"stts",class:{ap:"A"===t.status,rt:"R"===t.status}},[e._v(e._s(e.statusMap[t.status]))])],1),e._v(" "),n("td",{staticClass:"ext"},[n("div",{staticClass:"acts"},[n("popper",{attrs:{trigger:"click",options:{placement:"bottom-end"}}},[n("span",{staticStyle:{display:"inline-block"},attrs:{slot:"reference"},slot:"reference"},[n("button",{staticClass:"btn_more",attrs:{type:"button"},on:{click:function(){}