define("core/utils/getEmbeddedData",[],function(){"use strict";return function(a){var b=window.document.getElementById("disqus-"+a);try{return b&&JSON.parse(b.textContent||b.innerHTML)}catch(c){return null}}}),define("core/utils/urls",[],function(){"use strict";var a={},b=window.document.createElement("a");return a.getOrigin=function(a){b.href=a;var c=b.href.split("/");return c[0]+"//"+c[2]},a.getHostName=function(a){return b.href=a,b.hostname},a.getDomainPart=function(b,c){"undefined"==typeof c&&(c=0);var d=a.getHostName(b),e=d.split(".").reverse();return e[c]},a.getQuery=function(a){return b.href=a,b.search},a.getPathname=function(a){return b.href=a,b.pathname},a}),define("core/frameBus",["jquery","underscore","backbone","core/utils/urls"],function(a,b,c,d){"use strict";var e=window.opener||window.parent,f=window.name,g=window.document.referrer,h={};h.client=d.getOrigin(window.document.location.href),h.secureClient=h.client.replace(/^\w+:\/\//,"https://"),h.host=g?d.getOrigin(g):h.client;var i={origins:h,messageHandler:function(a){a=a.originalEvent;var b;try{b=JSON.parse(a.data)}catch(c){return}b.name&&"!"===b.name[0]&&a.origin!==h.client&&a.origin!==h.secureClient||"client"===b.scope&&i.trigger(b.name,b.data)},postMessage:function(a){a=JSON.stringify(a),e.postMessage(a,"*")},sendHostMessage:function(a,b){b=b||[],i.postMessage({scope:"host",sender:f,name:a,data:b})}};return b.extend(i,c.Events),a(window).on("message",i.messageHandler),a(window).on("unload",function(){i.sendHostMessage("die")}),window.DISQUS=window.DISQUS||{},window.DISQUS.Bus=i,i}),define("core/bus",["backbone","underscore","core/frameBus"],function(a,b,c){"use strict";var d=b.extend({},a.Events);return d.frame=c,d}),define("core/utils/cookies",[],function(){"use strict";var a={_doc:window.document,create:function(b,c,d){d||(d={});var e=b+"="+c+"; path="+(d.path||"/"),f=d.domain,g=d.expiresIn;if(f&&(e+="; domain=."+f),"[object Number]"===Object.prototype.toString.call(g)){var h=new Date((new Date).getTime()+g);e+="; expires="+h.toGMTString()}"https:"===a._doc.location.protocol&&(e+="; secure"),e+="; SameSite=None",a._doc.cookie=e},read:function(b){for(var c,d=b+"=",e=a._doc.cookie.split(";"),f=0;f<e.length;f++)if(c=e[f].replace(/^\s+/,""),0===c.indexOf(d))return c.substring(d.length);return null},erase:function(b,c){var d={};for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d.expiresIn=-1,a.create(b,"",d)},supported:function(){return a.create("cookie_support","1"),"1"===a.read("cookie_support")&&(a.erase("cookie_support"),!0)}};return a}),define("core/utils/fingerprint",[],function(){"use strict";function a(a){a=a||{};var b=a.Math||window.Math,c=a.Date||window.Date;try{var d=(new c).getTimezoneOffset(),e=1,f=window.screen;f&&f.availWidth?e=f.availWidth*f.availHeight+f.colorDepth:f&&f.width&&(e=f.width*f.height);var g=window.document.documentElement,h=g.clientWidth*g.clientHeight;return b.abs(17*d+25*e-h)}catch(i){return 1}}return{get:a}}),define("core/utils/guid",["core/utils/fingerprint"],function(a){"use strict";function b(a){a=a||{};var b=a.Uint32Array||window.Uint32Array,c=a.crypto||window.crypto,d=a.Math||window.Math;try{var e=new b(1);return c.getRandomValues(e),e[0]}catch(f){return d.floor(1e9*d.random())}}function c(){var a=window.performance,b=a&&a.timing;if(!b)return 1e5;var c=b.domainLookupEnd-b.domainLookupStart,d=b.connectEnd-b.connectStart,e=b.responseStart-b.navigationStart;return 11*c+13*d+17*e}function d(d){d=d||{};var e=d.Math||window.Math,f=Number((new Date).getTime().toString().substring(3)),g=e.abs(f+c()-a.get()).toString(32);return g+=b(d).toString(32)}return{generate:d}}),define("core/utils/hash",[],function(){"use strict";var a=function(a){var b,c,d,e=0;if(0===a.length)return e;for(b=0,c=a.length;b<c;b++)d=a.charCodeAt(b),e=(e<<5)-e+d,e|=0;return e};return{calculate:a}}),define("core/analytics/identity",["exports","core/utils/cookies","core/utils/guid","core/utils/hash","core/utils/fingerprint"],function(a,b,c,d,e){"use strict";var f=!1,g=a.ImpressionManager=function(){this.isPrivate=!0,this.impId=c.generate()};g.prototype.COOKIE_NAME="__jid",g.prototype.TTL=18e5,g.prototype.init=function(a){this.isPrivate=a&&a.isPrivate,this.isPrivate||(this.prevImp=b.read(this.COOKIE_NAME)),this.persist()},g.prototype.setImpressionId=function(a){this.impId=a,this.persist()},g.prototype.persist=function(){return this.isPrivate?void b.erase(this.COOKIE_NAME):void b.create(this.COOKIE_NAME,this.impId,{expiresIn:this.TTL})};var h=a.UniqueManager=function(){this.isPrivate=!0};h.prototype.COOKIE_NAME="disqus_unique",h.prototype.TTL=31536e6,h.prototype.init=function(a){return this.isPrivate=a&&a.isPrivate,this.isPrivate?void b.erase(this.COOKIE_NAME,{domain:window.location.host.split(":")[0]}):(this.value=b.read(this.COOKIE_NAME)||c.generate(),void b.create(this.COOKIE_NAME,this.value,{domain:window.location.host.split(":")[0],expiresIn:this.TTL}))},h.prototype.isPersistent=function(){return!this.isPrivate&&b.read(this.COOKIE_NAME)===this.value},a.init=function(b,c){f&&!c||(a.impression.init(b),a.unique.init(b),f=!0)},a.reset=function(){f=!1,a.impression=new g,a.unique=new h},a.reset(),a.clientId=function(){var b,c=a.unique;return c.isPersistent()&&(b=c.value),b||e.get().toString()},a.getPercentBucketForString=function(a,b){var c=100,e=Math.abs(d.calculate(a));if(b){var f=Math.pow(10,b);return e%(c*f)/f}return e%c},a.clientPercent=function(){return a.getPercentBucketForString(a.clientId())}}),define("core/config/urls",["common/urls"],function(a){"use strict";return a}),define("core/analytics/jester",["jquery","underscore","backbone","core/analytics/identity","core/config/urls"],function(a,b,c,d,e){"use strict";var f=c.Model.extend({url:e.jester+"/event.js",defaults:{experiment:"default",variant:"control"},setHostReferrer:function(a){a?a.indexOf("http")===-1||this.set("page_referrer",a):this.set("page_referrer","direct")},decoratePayload:function(c){c.event||(c.event="activity"),c=b.extend(this.toJSON(),c),b.extend(c,{imp:d.impression.impId,prev_imp:d.impression.prevImp}),c.section||(c.section="default"),c.area||(c.area="n/a");var e=a.param(c).length;if(e>2048&&this.has("page_referrer")){var f=window.document.createElement("a");f.href=this.get("page_referrer");var g=f.hostname;g&&(c.page_referrer_domain=g),delete c.page_referrer}return c},emit:function(c){return a.ajax({url:b.result(this,"url"),data:this.decoratePayload(c),dataType:"script",cache:!0})}}),g=function(b){var c=new window.Image;return c.src=e.jester+"/stat.gif?"+a.param({event:b}),c},h=function(c,d){if(!b.any(d,function(a){return a<0})){b.each(d,function(a,b){d[b]=Math.round(a)});var f=new window.Image;return f.src=e.jester+"/telemetry/"+c+".gif?"+a.param(d),f}},i=new f;return i.setHostReferrer(window.document.referrer),{ActivityClient:f,client:i,logStat:g,telemetry:h}}),define("recommendations/common",[],function(){"use strict";var a,b=function(b){a=b},c=function(){return a};return{setRecommendations:b,getRecommendations:c}}),define("recommendations/tracking",["jquery","core/bus","core/analytics/jester","common/main","recommendations/common"],function(a,b,c,d,e){"use strict";function f(a){var e=a.forum,f=e.get("id"),g=e.get("pk");a.session.user.id&&c.client.set("user_id",a.session.user.id),a.session.on("change:id",function(a){c.client.set("user_id",a.id)}),c.client.set({product:"embed",forum:f,forum_id:g,zone:"thread",version:d.version}),a.once("bootstrap:complete",function(){c.client.set({page_url:a.config.referrer});var b=a.config.experiment;b&&c.client.set({experiment:b.experiment,variant:b.variant,service:b.service}),c.client.setHostReferrer(a.config.hostReferrer)});var h={"uiAction:recommendationsClick":function(a){c.client.emit({verb:"click",object_type:"link",object_id:a,adjective:"recommendations",zone:"thread"})}};a.on(h),b.on(h)}var g={};return g.init=function(a){f(a)},g.getEventTrackingArea=function(b){return a(b.currentTarget).closest("[data-tracking-area]").attr("data-tracking-area")},g.isPrivate=function(){return e.getRecommendations().config.isPrivate},g.reset=function(){},g}),define("core/mixins/appliesPublisherClasses",["jquery","underscore","remote/config"],function(a,b,c){"use strict";function d(){this._getStyleProperty=function(a){var b=this.forum.get(a);return this.config.forceAutoStyles||"auto"===b?this.config[a]:b},this.getTypeface=function(){return this._getStyleProperty("typeface")},this.getColorScheme=function(){return this._getStyleProperty("colorScheme")},this.getFont=function(){return this.forum.get("customFont")},this.convertFontToClass=function(a){return a?a.toLowerCase().replace(/\+/g,"-"):""},this.convertFontToStyle=function(a){return a?a.replace(/\+/g," "):""},this.isFontAllowed=function(a){return!(!a||!c.lounge.font_options)&&c.lounge.font_options.some(function(b){return a===b.name})},this.downloadFont=function(a){var b=window.document,c=b.createElement("style");c.type="text/css";var d=this.convertFontToClass(a.name),e=this.convertFontToStyle(a.name),f=a.category,g='@import url("https://fonts.googleapis.com/css2?family='+a.name+':ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&display=swap"); ',h=["","input","select","textarea"].map(function(a){return"."+d+" "+a}).join(", ");g+=h+" { font-family: "+e+", "+f+"; }",c.styleSheet?c.styleSheet.cssText=g:c.appendChild(b.createTextNode(g));var i=b.head||b.getElementsByTagName("head")[0]||b.body;i.appendChild(c)},this.applyPublisherClasses=function(){var d=a("body"),e=this.getFont(),f=e&&b.find(c.lounge.font_options,function(a){return a.name===e});f?(this.downloadFont(f),d.addClass(this.convertFontToClass(f.name))):"serif"===this.getTypeface()?d.addClass("serif"):d.addClass("sans-serif"),"dark"===this.getColorScheme()&&d.addClass("dark")}}return d}),define("core/utils/storage",[],function(){"use strict";var a=function(a){var b="_dsqstorage_";try{return a.localStorage.setItem(b,b),a.localStorage.getItem(b),a.localStorage.removeItem(b),!0}catch(c){return!1}}(window),b=function(){var a={};return{getItem:function(b){return a.hasOwnProperty(b)?a[b]:null},setItem:function(b,c){a[b]=String(c)},removeItem:function(b){delete a[b]},clear:function(){a={}}}}();return{get:function(a){var b=null;try{return b=this.backend.getItem(a),JSON.parse(b)}catch(c){return b}},set:function(a,b){try{this.backend.setItem(a,JSON.stringify(b))}catch(c){}},remove:function(a){try{this.backend.removeItem(a)}catch(b){}},clear:function(){try{this.backend.clear()}catch(a){}},backend:a?window.localStorage:b,isPersistent:a}}),define("core/utils/auth",["core/utils/cookies"],function(a){"use strict";var b={},c="disqusauth";return b.getFromCookie=function(){var b=(a.read(c)||"").replace(/"/g,"").split("|");!b||b[1]&&b[6]||(b=[],a.erase(c,{}));var d=parseInt(b[6]||"0",10);return{avatarUrl:b[7]?decodeURIComponent(b[7]):void 0,datetimeFormatting:parseInt(b[4],10)?"absolute":"relative",id:d,isModerator:parseInt(b[8],10)>0,staff:Boolean(parseInt(b[2],10)),tzOffset:b[5],username:b[1],isAuthenticated:Boolean(d&&"0"!==d)}},b}),define("core/switches",["underscore","remote/config","core/analytics/identity","core/utils/storage","core/utils/auth"],function(a,b,c,d,e){"use strict";var f="switch:",g={},h={};return h._getKey=function(a){return f+a},h.disableFeature=function(a){g[a]=!1},h.resetFeature=function(a){g[a]=null},h.forceFeature=function(a){g[a]=!0},h.getSwitchContext=function(a){var c=d.get(this._getKey(a));if(null!==c)return c;var e=g[a];return null!=e?e:(b.lounge&&b.lounge.switches||{})[a]},h.isFeatureActive=function(b,d){var f=h.getSwitchContext(b);if(a.isBoolean(f))return f;if(!f)return!1;var g=e.getFromCookie(),i={percent:c.clientPercent(),user_id:g.id,username:g.username,is_staff:g.staff,is_moderator:g.isModerator},j=a.defaults(d||{},i);return a.any(f,function(b,d){var e=j[d];if(/percent$/.test(d)&&a.isNumber(b)){if(a.isNumber(e))return b>e;if(a.isString(e)){var f=0;return b!==Math.round(b)&&(f=b.toString().split(".").pop().length),b>c.getPercentBucketForString(e,f)}return!1}return a.isArray(b)?a.contains(b,e):b===e})},h}),define("core/utils/isIframed",[],function(){"use strict";return function(){}