!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return r(t[o][1][e]||e)}),u,u.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){let i=e("@ima/core/dist/ima.client.cjs.js").vendorLinker;i.set("@ima/helpers",e("@ima/helpers")),i.set("classnames",e("classnames")),i.set("react",e("react")),i.set("react-dom",e("react-dom")),i.set("memoize-one",e("memoize-one")),i.set("@ima/core",e("@ima/core/dist/ima.client.cjs.js")),i.set("@ima/plugin-analytic",e("@ima/plugin-analytic")),i.set("@usa/plugin-analytics",e("@usa/plugin-analytics")),i.set("@usa/plugin-breadcrumb-navigation",e("@usa/plugin-breadcrumb-navigation")),i.set("@ima/plugin-jobs-offer",e("@ima/plugin-jobs-offer")),i.set("@ima/plugin-less-constants/media",e("@ima/plugin-less-constants/media")),i.set("@ima/plugin-less-constants/units",e("@ima/plugin-less-constants/units")),i.set("@ima/plugin-less-constants/util",e("@ima/plugin-less-constants/util")),i.set("@ima/plugin-script-loader",e("@ima/plugin-script-loader")),i.set("@ima/plugin-select",e("@ima/plugin-select")),i.set("@ima/plugin-self-xss",e("@ima/plugin-self-xss")),i.set("@ima/plugin-style-loader",e("@ima/plugin-style-loader")),i.set("@ima/plugin-useragent",e("@ima/plugin-useragent")),i.set("@ima/plugin-atoms",e("@ima/plugin-atoms")),i.set("@cns/plugin-ribbon",e("@cns/plugin-ribbon")),i.set("@ima/plugin-analytic-dot",e("@ima/plugin-analytic-dot")),i.set("@ima/plugin-analytic-gemius",e("@ima/plugin-analytic-gemius")),i.set("@ima/plugin-loading-manager",e("@ima/plugin-loading-manager")),i.set("@ima/plugin-login",e("@ima/plugin-login")),i.set("@ima/plugin-notification",e("@ima/plugin-notification")),i.set("@ima/plugin-mishmash-dom",e("@ima/plugin-mishmash-dom")),i.set("@ima/plugin-sid",e("@ima/plugin-sid")),i.set("@ima/plugin-traffic",e("@ima/plugin-traffic")),i.set("@cns/pixel-generator",e("@cns/pixel-generator")),i.set("@cns/plugin-squircle-mask",e("@cns/plugin-squircle-mask")),i.set("@usa/plugin-social",e("@usa/plugin-social")),i.set("@usa/component-utils",e("@usa/component-utils")),i.set("@usa/css-class-scrambler",e("@usa/css-class-scrambler")),i.set("@usa/model-entities",e("@usa/model-entities")),i.set("@usa/number-to-css-class",e("@usa/number-to-css-class")),i.set("@usa/pixel-generator",e("@usa/pixel-generator")),i.set("@usa/plugin-ab-testing",e("@usa/plugin-ab-testing")),i.set("@usa/plugin-advert",e("@usa/plugin-advert")),i.set("@usa/plugin-atoms",e("@usa/plugin-atoms")),i.set("@usa/plugin-component-view",e("@usa/plugin-component-view")),i.set("@usa/plugin-crossdomain-recommendation",e("@usa/plugin-crossdomain-recommendation")),i.set("@usa/plugin-dot-article",e("@usa/plugin-dot-article")),i.set("@usa/plugin-election",e("@usa/plugin-election")),i.set("@usa/plugin-hit-page-time",e("@usa/plugin-hit-page-time")),i.set("@usa/plugin-layout-entity-decorator",e("@usa/plugin-layout-entity-decorator")),i.set("@ima/plugin-logger",e("@ima/plugin-logger")),i.set("@usa/plugin-override",e("@usa/plugin-override")),i.set("@usa/plugin-server-date",e("@usa/plugin-server-date")),i.set("@usa/plugin-player",e("@usa/plugin-player")),i.set("@usa/plugin-report",e("@usa/plugin-report")),i.set("@usa/plugin-szn-discussion",e("@usa/plugin-szn-discussion")),i.set("@usa/plugin-szn-premium",e("@usa/plugin-szn-premium")),i.set("@usa/plugin-tracker",e("@usa/plugin-tracker")),i.set("@usa/plugin-user",e("@usa/plugin-user")),i.set("@usa/rest-api-client",e("@usa/rest-api-client")),i.set("@usa/utils",e("@usa/utils")),i.set("shallowequal",e("shallowequal")),i.set("intersect-objects",e("intersect-objects")),i.set("prop-types",e("prop-types")),t.exports=i},{"@cns/pixel-generator":2,"@cns/plugin-ribbon":4,"@cns/plugin-squircle-mask":8,"@ima/core/dist/ima.client.cjs.js":10,"@ima/helpers":11,"@ima/plugin-analytic":17,"@ima/plugin-analytic-dot":13,"@ima/plugin-analytic-gemius":15,"@ima/plugin-atoms":19,"@ima/plugin-jobs-offer":21,"@ima/plugin-less-constants/media":22,"@ima/plugin-less-constants/units":23,"@ima/plugin-less-constants/util":24,"@ima/plugin-loading-manager":26,"@ima/plugin-logger":28,"@ima/plugin-login":30,"@ima/plugin-mishmash-dom":34,"@ima/plugin-notification":36,"@ima/plugin-script-loader":54,"@ima/plugin-select":57,"@ima/plugin-self-xss":59,"@ima/plugin-sid":66,"@ima/plugin-style-loader":68,"@ima/plugin-traffic":70,"@ima/plugin-useragent":72,"@usa/component-utils":89,"@usa/css-class-scrambler":143,"@usa/model-entities":153,"@usa/number-to-css-class":155,"@usa/pixel-generator":156,"@usa/plugin-ab-testing":165,"@usa/plugin-advert":198,"@usa/plugin-analytics":201,"@usa/plugin-atoms":226,"@usa/plugin-breadcrumb-navigation":231,"@usa/plugin-component-view":240,"@usa/plugin-crossdomain-recommendation":243,"@usa/plugin-dot-article":248,"@usa/plugin-election":256,"@usa/plugin-hit-page-time":289,"@usa/plugin-layout-entity-decorator":292,"@usa/plugin-override":297,"@usa/plugin-player":303,"@usa/plugin-report":307,"@usa/plugin-server-date":311,"@usa/plugin-social":322,"@usa/plugin-szn-discussion":326,"@usa/plugin-szn-premium":330,"@usa/plugin-tracker":335,"@usa/plugin-user":344,"@usa/rest-api-client":357,"@usa/utils":380,classnames:385,"intersect-objects":392,"memoize-one":393,"prop-types":401,react:412,"react-dom":406,shallowequal:420}],2:[function(e,t,n){(function(e){(function(){"use strict";const n=[66,77,30,0,0,0,0,0,0,0,26,0,0,0,12,0,0,0,1,0,1,0,1,0,24,0,0,0,0,0];Object.freeze(n);const i=n[10];function r(e,t,r){if(!Number.isInteger(e)||e<0||e>255)throw new TypeError(`The red color channel value must be an integer within the [0, 255] range, ${e} has been provided`);if(!Number.isInteger(t)||t<0||t>255)throw new TypeError(`The green color channel value must be an integer within the [0, 255] range, ${t} has been provided`);if(!Number.isInteger(r)||r<0||r>255)throw new TypeError(`The blue color channel value must be an integer within the [0, 255] range, ${r} has been provided`);const s=n.slice();return s[i+0]=r,s[i+1]=t,s[i+2]=e,Object.freeze(s),s}function s(t,n,i){return void 0!==e?o(t,n,i).toString("base64"):btoa(String.fromCharCode.apply(null,r(t,n,i)))}function o(t,n,i){if(void 0===e)throw new Error("An image buffer cannot be created at the client-side");return e.from(r(t,n,i))}t.exports.generateImage=r,t.exports.generateImageBase64String=s,t.exports.generateImageDataUrl=function(e,t,n){return"data:image/bmp;base64,"+s(e,t,n)},t.exports.generateImageBuffer=o}).call(this)}).call(this,e("buffer").Buffer)},{buffer:384}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-less-constants/media"),r=e("@ima/plugin-less-constants/units"),s=e("react"),o=e("prop-types"),a=e("@ima/core");e("infinite-circle"),e("@ima/plugin-useragent");var l=e("body-scroll-lock"),c=e("@cns/plugin-squircle-mask");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(s),p=u(o);const m={ribbon:{color:{black:{4:r.rgba(0,0,0,.04),6:r.rgba(0,0,0,.06),10:r.rgba(0,0,0,.1),12:r.rgba(0,0,0,.12),20:r.rgba(0,0,0,.2),100:r.rgba(0,0,0,1)},gray:{6:r.hex("666666"),76:r.hex("767676"),82:r.hex("828282"),90:r.hex("909090"),a0:r.hex("a0a0a0"),c0:r.hex("c0c0c0"),cc:r.hex("cccccc"),eb:r.hex("ebebeb"),f0:r.hex("f0f0f0"),f5:r.hex("f5f5f5"),fa:r.hex("fafafa")},red:{base:r.hex("cc0000"),dark:r.hex("a00000"),search:r.hex("b00205")},white:r.hex("ffffff")},badgeMobileWidth:r.px(40),height:r.px(56),greaterThanTablet:i.minWidthMedia(r.px(976)),transitionDuration:"300ms",zIndex:9e3}};class h extends a.AbstractComponent{static get contextType(){return a.PageContext}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.atom.icon.SearchIcon")}shouldComponentUpdate(){return!1}render(){return d.default.createElement("svg",{className:this.cssClasses("atm-ribbon-icon"),version:"1.1",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},d.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.662 15.273a6.615 6.615 0 01-6.608-6.61 6.615 6.615 0 016.608-6.61 6.616 6.616 0 016.61 6.61 6.616 6.616 0 01-6.61 6.61m10.91 2.122c-.714-.744-1.526-1.392-2.367-2.01-.419-.31-.859-.598-1.313-.876a31 31 0 00-.57-.315 8.623 8.623 0 002.003-5.53C17.325 3.887 13.438 0 8.662 0S0 3.886 0 8.664c0 4.776 3.886 8.662 8.662 8.662a8.62 8.62 0 005.551-2.02c.101.19.205.38.31.568.273.454.56.896.868 1.316.614.845 1.256 1.66 1.997 2.377a1.54 1.54 0 002.183-2.173"}))}}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f.apply(this,arguments)}class g extends a.AbstractPureComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{focused:!1,onClick:null,text:null,url:null}}constructor(e,t){super(e,t),this._linkRef=d.default.createRef()}render(){const{focused:e,onClick:t,url:n}=this.props;let{text:i}=this.props;if(!i||!n)return null;Array.isArray(i)||(i=[{text:i}]);let r=!1;return r=!this.utils.DeviceHelper.isPortable(),d.default.createElement("a",f({className:this.cssClasses({"atm-ribbon-search-link":!0,"atm-ribbon-search-link--focused":e}),href:n,onClick:()=>t&&t(i.reduce(((e,t)=>e+t.text),"")),ref:this._linkRef,rel:"noopener",target:r?"_blank":"_self"},this.utils.$UIComponentHelper.getDataProps(this.props)),d.default.createElement("div",{className:this.cssClasses({"atm-ribbon-search-link__icon":!0})},this.props.children),d.default.createElement("div",{className:this.cssClasses({"atm-ribbon-search-link__text":!0})},i.map(((e,t)=>this._renderText(e.text,t,e.emphasized)))))}_renderText(e,t,n=!1){return n?d.default.createElement("b",{key:t},e):d.default.createElement(d.default.Fragment,{key:t},e)}}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_.apply(this,arguments)}p.default.shape({icon:p.default.string,logo:p.default.string,name:p.default.string,slug:p.default.string,url:p.default.string}),d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent;class v extends d.default.PureComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{text:null,mode:"",style:null,rel:null,className:"","data-e2e":null}}render(){let e=this.context.$Utils.$UIComponentHelper,{href:t,title:n,target:i,mode:r,className:s,children:o,text:a,style:l,rel:c}=this.props;return d.default.createElement("a",_({href:t,title:n,target:i,style:l,rel:c,className:e.cssClasses({"atm-link":!0,["atm-link-"+r]:r},s)},e.getEventProps(this.props),e.getDataProps(this.props),e.getAriaProps(this.props)),o||a)}}d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent,d.default.PureComponent;class y extends a.AbstractComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{action:""}}get url(){const{LinkHelper:e}=this.utils;let t=e.concatQuery(e.getUrl(),{[this.props.action]:!0});return t=e.removeQueryParameter("amp",t),t}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.atom.button.Button")}render(){const e=this.utils.$UIComponentHelper,{children:t}=this.props;return d.default.createElement("div",{className:this.cssClasses("atm-ribbon-button",!0)},d.default.createElement(v,f({className:this.cssClasses({"atm-ribbon-button__button":!0}),href:this.url},e.getDataProps(this.props),e.getAriaProps(this.props)),t))}}class b extends a.AbstractComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{isActive:!1,onClick:null,showArrow:!1,submit:!1}}render(){const e=this.utils.$UIComponentHelper,{isActive:t,children:n,onClick:i,showArrow:r,submit:s}=this.props;return d.default.createElement("div",{className:this.cssClasses({"atm-ribbon-button":!0,"atm-ribbon-button--active":t,"atm-ribbon-button--arrow":r},!0)},d.default.createElement("button",f({className:this.cssClasses({"atm-ribbon-button__button":!0}),onClick:e=>i&&i(e),type:s?"submit":"button"},e.getDataProps(this.props),e.getAriaProps(this.props)),n))}}class E extends a.AbstractComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{action:"",isActive:!1,onClick:null,showArrow:!1,submit:!1}}render(){return this.utils.$UIComponentHelper.isAmp()&&!this.props.submit?d.default.createElement(y,this.props):d.default.createElement(b,this.props)}}class S extends a.AbstractComponent{static get contextType(){return a.PageContext}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.atom.icon.CrossIcon")}shouldComponentUpdate(){return!1}render(){return d.default.createElement("svg",{className:this.cssClasses("atm-ribbon-icon"),version:"1.1",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},d.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.414 5l3.293-3.293A.999.999 0 108.293.293L5 3.586 1.707.293A.999.999 0 10.293 1.707L3.586 5 .293 8.293a.999.999 0 101.414 1.414L5 6.414l3.293 3.293a.997.997 0 001.414 0 .999.999 0 000-1.414L6.414 5z"}))}}const C=Object.freeze({DOWN:40,ENTER:13,ESC:27,UP:38}),w="ribbon--search",P="mol-ribbon-search__input",T=["loadResults","onArrowDown","onArrowUp","onHide","onSubmit"];var A=e=>{if(!e)throw new Error("Expected ResultsComponent to be an assignment or function call.");return T.forEach((t=>{if(!e.prototype[t])throw new Error(`Expected ResultsComponent to implement '${t}' method.`)})),class extends a.AbstractPureComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{placeholder:"",service:null}}get placeholder(){const{placeholder:e}=this.props;return e||this.localize("search.placeholder")}get selectionStart(){const{current:e}=this._inputRef;return e?e.selectionStart:0}get text(){const{current:e}=this._inputRef;return e?e.value.trim():""}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.molecule.search.Search"),this._debouncedOnChange=this.utils.ComponentHelper.debounce(this.onChange,400,this),this._inputRef=d.default.createRef(),this._resultsRef=d.default.createRef(),this._rootRef=d.default.createRef(),this._visibilityId=null,this.state={loading:!1,showCross:!1,showResults:!1}}componentDidMount(){const{DeviceHelper:e,$Window:t}=this.utils,n=t.getWindow();t.bindEventListener(n,"keydown",this),t.bindEventListener(n,"mousedown",this);const i=this.context.urlParams[w];if(t.isClient()){if(i){const{current:e}=this._inputRef;if(!e)return;e.value=i,this.setState({showCross:!0}),this.onChange()}e.isDesktop()&&(this._visibilityId=this.utils.$UIComponentHelper.visibility.register((()=>{const e=this.utils.$Window.getDocument().querySelector("[data-ribbon-content]");return e?Math.max(0,e.getBoundingClientRect().left):0}),(e=>this.onResize(e.payload))))}}componentWillUnmount(){const{$Window:e}=this.utils,t=e.getWindow();e.unbindEventListener(t,"keydown",this),e.unbindEventListener(t,"mousedown",this)}render(){return d.default.createElement("div",{className:this.cssClasses({"mol-ribbon-search":!0,"mol-ribbon-search--results-hidden":!this.state.showResults}),ref:this._rootRef},this._renderBar(),this._renderResults())}_renderBar(){const{LinkHelper:e,$Router:t}=this.utils;return d.default.createElement("form",{className:this.cssClasses({"mol-ribbon-search__bar":!0}),"aria-label":"Vyhledat",target:"_top",action:e.removeQueryParameter("amp",t.getUrl()),onSubmit:e=>this.onSubmit(e)},d.default.createElement("div",{className:this.cssClasses({"mol-ribbon-search__input-container":!0})},d.default.createElement("input",{className:this.cssClasses({[P]:!0}),autoComplete:"off",name:w,type:"text",placeholder:this.placeholder,ref:this._inputRef,"data-dot":"lista_hledani_kurzor",onChange:()=>this._debouncedOnChange()}),this.state.showCross&&d.default.createElement(E,{className:this.cssClasses({"mol-ribbon-search__cross-button":!0,"mol-ribbon-search__cross-button--active":!0}),"data-dot":"lista_hledani_krizek",onClick:()=>this.onCrossClick()},d.default.createElement(S,null))),d.default.createElement(E,{className:this.cssClasses({"mol-ribbon-search__button":!0}),submit:!0,"data-dot":"lista_hledani_button"},d.default.createElement(h,{className:this.cssClasses({"mol-ribbon-search__icon":!0})})))}_renderResults(){const{loading:t,showResults:n}=this.state;return d.default.createElement("div",{className:this.cssClasses({"mol-ribbon-search__results":!0,"mol-ribbon-search__results--hidden":!n&&!t,"mol-ribbon-search__results--loading":t})},t&&d.default.createElement("span",{className:this.cssClasses("mol-ribbon-search__spinner")}),d.default.createElement("div",{className:this.cssClasses({"mol-ribbon-search__results-component--loading":t})},d.default.createElement(e,f({},this.props,{ref:this._resultsRef}))))}handleEvent(e){if(!e)return;const{showResults:t}=this.state;if("keydown"===e.type){if(e.keyCode===C.ESC)return void this._hideResults();if(!t)return;const{current:n}=this._resultsRef;if(!n)return;if(e.keyCode===C.DOWN){e.preventDefault();const t=n.onArrowDown(e),{current:i}=this._inputRef;t&&i&&(i.value=t)}if(e.keyCode===C.UP){e.preventDefault();const t=n.onArrowUp(e);if(t){const{current:e}=this._inputRef;e&&("boolean"==typeof t?e.focus():e.value=t)}}}if("mousedown"===e.type){if(!t)return;if(0===e.button){const{current:t}=this._rootRef,{target:n}=e;t&&(0!==e.button||this.utils.ComponentHelper.nodeContains(t,n))||this._hideResults()}}}onChange(){const e=!!this.text;this.state.showCross!==e&&this.setState({showCross:e}),this.loadResults()}onCrossClick(){this._resetInputText(),this._hideResults(),this.setState({showCross:!1})}onResize(e){const{current:t}=this._rootRef;if(t){const n=t.parentElement.getBoundingClientRect().left;t.style.marginLeft=`${Math.max(0,e-n)}px`}}onSubmit(e){const{current:t}=this._resultsRef;t&&t.onSubmit(this.text,e)}loadResults(){const{text:e}=this,{current:t}=this._resultsRef;if(!e||!t)return this.setState({loading:!1,showResults:!1});this.setState({loading:!0,showResults:!0}),t.loadResults(e,this.selectionStart,((e=!1)=>{this.setState({loading:!1,showResults:!e})}))}_hideResults(){if(!this.state.showResults)return;this.setState({showResults:!1});const{current:e}=this._resultsRef;e&&e.onHide()}_resetInputText(){const{current:e}=this._inputRef;if(!e)return"";e.value=""}}};class I extends a.AbstractPureComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{searchUrl:"",service:null}}get searchUrl(){const{_lastSearchedText:e}=this,{searchUrl:t}=this.props;return e&&t?`${this.props.searchUrl}${encodeURIComponent(e)}`:""}get suggestions(){const{response:e}=this.state;return e&&Array.isArray(e.result)?e.result.filter((e=>"ItemType.TEXT"===e.itemType)):[]}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.molecule.fulltextSearch.FulltextSearch"),this._lastSearchedText=null,this.state={focusedSuggestion:null,response:null}}render(){const{suggestions:e}=this;return e.length?d.default.createElement("div",{className:this.cssClasses("mol-ribbon-fulltext-search-results")},e.map((({text:e},t)=>d.default.createElement(g,{focused:this.state.focusedSuggestion===t,onClick:e=>this._hitFulltext(e),text:e,url:this._getSuggestionUrl(e),"data-dot":"lista_hledani_fulltext",key:t},d.default.createElement(h,null))))):null}onArrowDown(){const{suggestions:e}=this,{focusedSuggestion:t}=this.state;let n=0;return null!==t&&e&&e.length&&(n=Math.min(t+1,e.length-1)),this.setState({focusedSuggestion:n}),this._getSuggestionText(e[n])}onArrowUp(){const{suggestions:e}=this,{focusedSuggestion:t}=this.state;let n=null;null!==t&&e&&e.length&&(n=Math.max(t-1,0));const i=t===n;return i&&(n=null),this.setState({focusedSuggestion:n}),null!==n?this._getSuggestionText(e[n]):i}onHide(){this._lastSearchedText=null,this.setState({focusedSuggestion:null,response:null})}onSubmit(e,t){if(t.preventDefault(),!e)return;const{focusedSuggestion:n}=this.state;return this._lastSearchedText!==e||null===n?(this._hitFulltext(e),this._openSuggestionUrl(e)):void 0}async loadResults(e,t,n){this._lastSearchedText=e;const i={focusedSuggestion:null,response:null};try{const n=await fetch(this._getFetchUrl(e,t),{cache:"no-store"});if(n.ok)try{i.response=await n.json()}catch(e){console.error(e)}}catch(e){console.error(e)}this.setState(i,(()=>n(!this.suggestions.length)))}_getFetchUrl(e,t=0){return`https://suggest.seznam.cz/fulltext/simple?phrase=${encodeURIComponent(e)}&format=json-2&highlight=1&count=6&cursorPosition=${t}`}_getSuggestionText(e){return e.text.reduce(((e,t)=>e+t.text),"")}_getSuggestionUrl(e){Array.isArray(e)||(e=[{text:e}]);const{slug:t}=this.props.service;return`https://search.seznam.cz/?q=${encodeURIComponent(e.reduce(((e,t)=>e+t.text),""))}&sourceid=${t}&thru=ribbon&ribbon=${t}`}_hit(e,t){this.utils.DotAnalytic.hit({action:`lista_vyraz_${t}`,text:e})}_hitFulltext(e){this._hit(e,"fulltext")}_hitService(e){this._hit(e,this.props.service.slug)}_openSuggestionUrl(e){const{DeviceHelper:t,$Window:n}=this.utils,i=this._getSuggestionUrl(e),r=n.getWindow();let s=!1;s=!t.isPortable(),s?r.open(i):r.location=i}}var x=A(I);class k extends a.AbstractComponent{static get contextType(){return a.PageContext}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.atom.icon.MenuIcon")}shouldComponentUpdate(){return!1}render(){return d.default.createElement("svg",{className:this.cssClasses("atm-ribbon-icon"),version:"1.1",viewBox:"0 0 14 12",xmlns:"http://www.w3.org/2000/svg"},d.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1 12h12a1 1 0 100-2H1a1 1 0 100 2m0-5h12a1 1 0 100-2H1a1 1 0 100 2m0-7h12a1 1 0 110 2H1a1 1 0 110-2"}))}}const R=Object.freeze({CLOSE_MENU_WO_TRANSITION:"cns.plugin.ribbon.closeMenuWoTransition"});class O extends a.AbstractComponent{static get contextType(){return a.PageContext}constructor(e,t){super(e,t),this._isEnabled=!this.utils.$UIComponentHelper.isAmp()&&!this.utils.RegressionHelper.isRegression()&&this.utils.LoginHelper,this._badgeRef=d.default.createRef()}componentDidMount(){if(!this._isEnabled)return;const{DeviceHelper:e,LoginHelper:t,NotificationHelper:n,$Window:i}=this.utils;i.isClient()&&n.scriptLoaderPromise.then((()=>t.renderBadge(this._badgeRef,n.sznNotifications,e.isPortable())))}shouldComponentUpdate(){return!1}render(){return d.default.createElement("div",f({className:this.cssClasses("mol-ribbon-badge"),ref:this._badgeRef},this.utils.$UIComponentHelper.getAriaProps(this.props)))}}class M extends a.AbstractPureComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{service:null}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.molecule.service.Service")}render(){const{service:e}=this.props;if(!e)return null;const{DeviceHelper:t,$UIComponentHelper:n}=this.utils,{url:i}=e;return d.default.createElement("a",f({className:this.cssClasses({"mol-ribbon-service":!0,"mol-ribbon-service--desktop":!t.isPortable(),"mol-ribbon-service--amp":n.isAmp()}),href:i},this.utils.$UIComponentHelper.getDataProps(this.props)),this._renderIcon(),this._renderAmpLogo(),this._renderLogo(),this._renderText())}_renderAmpLogo(){const{DeviceHelper:e,RibbonHelper:t,$UIComponentHelper:n}=this.utils;if(!e.isPortable()||!n.isAmp())return null;const{logo:i,logoHeight:r,logoWidth:s}=this.props.service;return d.default.createElement("amp-img",{layout:"intrinsic",height:r,width:s,src:t.getIconUrl(i)})}_renderIcon(){const{DeviceHelper:e,RibbonHelper:t}=this.utils;return e.isPortable()?null:d.default.createElement(c.SquircleMask,{className:this.cssClasses("mol-ribbon-service__icon"),iconUri:t.getIconUrl(this.props.service.icon)})}_renderLogo(){const{DeviceHelper:e,RibbonHelper:t,$UIComponentHelper:n}=this.utils;if(!e.isPortable()||n.isAmp())return null;const{logo:i,logoHeight:r,logoWidth:s}=this.props.service;return d.default.createElement("svg",{className:this.cssClasses("mol-ribbon-service__logo"),version:"1.1",viewBox:`0 0 ${s} ${r}`,xmlns:"http://www.w3.org/2000/svg"},d.default.createElement("image",{xlinkHref:t.getIconUrl(i),height:"100%",width:"100%"}))}_renderText(){return this.utils.DeviceHelper.isPortable()?null:d.default.createElement("div",{className:this.cssClasses("mol-ribbon-service__text")},this.props.service.name)}}const N="ogm-ribbon__menu";class L extends a.AbstractComponent{static get contextType(){return a.PageContext}static get defaultProps(){return{SearchComponent:null}}get isSearchInputActive(){const e=this.utils.$Window.getDocument();return e&&e.activeElement.classList.contains(this.cssClasses(P))}get service(){return this.utils.RibbonHelper.getService(this.context.urlParams.service)}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.organism.ribbon.Ribbon"),this.state={scrollingDown:!1,showMenu:!1},this._menuRef=d.default.createRef(),this._rootRef=d.default.createRef(),this._lastScrollTop=0,this._noTransition=!1,this._startWithSearchVisible=!!this.context.urlParams[w],this._visibilityId=null,this._boundOnTransitionEnd=this.onTransitionEnd.bind(this)}componentDidMount(){const{DeviceHelper:e,$Dispatcher:t,$Window:n}=this.utils;if(n.isClient()){if(this.context.urlParams["ribbon--menu"]&&!this._startWithSearchVisible&&this.onMenuToggle(),e.isDesktop()){const e=n.getWindow();n.bindEventListener(e,"keydown",this),n.bindEventListener(e,"mousedown",this)}e.isPortable()&&(this.onScroll(0),this._visibilityId=this.utils.$UIComponentHelper.visibility.register((()=>n.getScrollY()),(e=>{const t=e.payload;Math.abs(t-this._lastScrollTop)>=28&&this.onScroll(t)}))),t.listen(R.CLOSE_MENU_WO_TRANSITION,this.onCloseMenuWoTransition,this)}}componentDidUpdate(e,t){const{current:n}=this._menuRef;n&&this.state.showMenu&&this.utils.DeviceHelper.isPortable()&&t.showMenu!=this.state.showMenu&&l.disableBodyScroll(n)}componentWillUnmount(){const{DeviceHelper:e,$Dispatcher:t,$UIComponentHelper:n,$Window:i}=this.utils;if(i.isClient()){if(e.isPortable()&&(l.clearAllBodyScrollLocks(),n.visibility.unregister(this._visibilityId)),e.isDesktop()){const{$Window:e}=this.utils,t=e.getWindow();e.unbindEventListener(t,"keydown",this),e.unbindEventListener(t,"mousedown",this)}t.unlisten(R.CLOSE_MENU_WO_TRANSITION,this.onCloseMenuWoTransition,this)}}render(){const{service:e}=this,{children:t}=this.props,{scrollingDown:n,showMenu:i}=this.state,{DeviceHelper:r,$UIComponentHelper:s}=this.utils,o=r.isPortable();return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:this.cssClasses({"ogm-ribbon":!0,[`ogm-ribbon--${e&&e.slug}`]:!0,"ogm-ribbon--menu-shown":i,"ogm-ribbon--scrolling-down":n}),"aria-label":"Hlavička","data-ribbon":m.ribbon.height,ref:this._rootRef},t&&d.default.createElement(E,{className:this.cssClasses({"ogm-ribbon__menu-button":!0}),"aria-label":"Menu",action:"ribbon--menu",isActive:i,showArrow:!0,onClick:()=>this.onMenuToggle(),"data-dot":i?"lista_hamburger_zavrit":"lista_hamburger"},i?d.default.createElement(S,null):d.default.createElement(k,null)),d.default.createElement(M,{"data-dot":`lista_${e&&e.slug}`,service:e}),d.default.createElement("div",{className:this.cssClasses({"ogm-ribbon__middle":!0,"ogm-ribbon__middle--desktop":!o})},this._renderSearch()),o&&this._renderSeznam(),!s.isAmp()&&d.default.createElement(O,{"aria-label":"Osobní navigace, přihlášení a další služby"}),!o&&this._renderSeznam(),d.default.createElement("div",{className:this.cssClasses({[N]:!0,[`${N}--hidden`]:!i,[`${N}--no-transition`]:this._noTransition,[`${N}--mobile`]:o}),ref:this._menuRef},t)))}_renderSearch(){const{SearchComponent:e}=this.props;return e?d.default.createElement(e,f({},this.props,{service:this.service})):null}_renderSeznam(){return d.default.createElement("div",{className:this.cssClasses({"ogm-ribbon__seznam":!0,"ogm-ribbon__seznam--desktop":!this.utils.DeviceHelper.isPortable()})},d.default.createElement("a",{className:this.cssClasses("ogm-ribbon__seznam--link"),href:"https://www.seznam.cz",rel:"noopener noreferrer",target:"_blank","data-dot":"lista_odkaz_seznam"},"Seznam.cz"))}handleEvent(e){if(this.state.showMenu&&e){if(e.keyCode===C.ESC)return this.onMenuToggle();if(0===e.button){const{current:t}=this._rootRef;if(!t)return;const{target:n}=e;this.utils.ComponentHelper.nodeContains(t,n)||this.onMenuToggle()}}}onCloseMenuWoTransition(){this.onMenuToggle(!0)}onMenuToggle(e=!1){const{current:t}=this._menuRef;if(!t)return;this._noTransition=e;const{showMenu:n}=this.state;this._noTransition||t.addEventListener("transitionend",this._boundOnTransitionEnd),this.setState({showMenu:!n},(()=>this.onTransitionEnd()))}onScroll(e){const t=!this.state.showMenu&&(e>this._lastScrollTop||this.isSearchInputActive||this._startWithSearchVisible);this._lastScrollTop=Math.max(e,0),t!==this.state.scrollingDown&&(this._startWithSearchVisible=!1,this.setState({scrollingDown:t}))}onTransitionEnd(){const{current:e}=this._menuRef;e&&(this._noTransition=!1,e.removeEventListener("transitionend",this._boundOnTransitionEnd),!this.state.showMenu&&this.utils.DeviceHelper.isPortable()&&l.enableBodyScroll(e))}}const D="fixed",H={childList:!0,subtree:!0};class $ extends a.AbstractComponent{static get contextType(){return a.PageContext}get brandingElm(){return this.utils.$Window.getDocument().querySelector(`.${this.cssClasses("ogm-branding")}`)}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbon.component.organism.wrapper.Wrapper"),this._throttledOnObserve=this.utils.$UIComponentHelper.visibility.throttle(this.onObserve,120,this),this.utils.$Window.isClient()&&(this._mutationObserver=new MutationObserver((()=>this._throttledOnObserve())))}componentDidMount(){this._observe(),this.utils.$Dispatcher.listen(a.RouterEvents.BEFORE_HANDLE_ROUTE,this._disconnect,this),this.utils.$Dispatcher.listen(a.RouterEvents.AFTER_HANDLE_ROUTE,this._observe,this)}componentWillUnmount(){this._disconnect(),this.utils.$Dispatcher.unlisten(a.RouterEvents.BEFORE_HANDLE_ROUTE,this._disconnect,this),this.utils.$Dispatcher.unlisten(a.RouterEvents.AFTER_HANDLE_ROUTE,this._observe,this)}render(){return d.default.createElement("div",{className:this.cssClasses("ogm-ribbon-wrapper")},this.props.children)}onObserve(){const{brandingElm:e}=this;if(!e||!e.classList.contains(this.cssClasses("ogm-branding-is-branding-shown")))return;const t=[];if(Array.from(e.children).forEach((e=>{e.classList.contains(this.cssClasses("ogm-branding-page-content"))||t.push(...Array.from(e.querySelectorAll("*")))})),t.length){this.utils.$Window.getDocument().body.style.backgroundPositionY="48px";for(const e of t){const t=getComputedStyle(e);t.getPropertyValue("position")===D&&(e.style.top="48px"),t.getPropertyValue("background-attachment")===D&&(e.style.backgroundPositionY="48px")}}}_disconnect(){this.utils.$Window.isClient()&&this._mutationObserver.disconnect()}_observe(){const{brandingElm:e}=this,{$Settings:t,$Window:n}=this.utils;t.plugin.ribbon.fixedAdvertIndentation&&n.isClient()&&e&&(this._disconnect(),this._mutationObserver.observe(e,H))}}const j=[{slug:"seznam",icon:"seznam-icon.svg",name:"Seznam.cz",url:"https://www.seznam.cz/"},{slug:"novinky",icon:"novinky-icon.svg",logo:"novinky-logo.svg",logoHeight:20,logoWidth:105,name:"Novinky.cz",url:"https://www.novinky.cz/"},{slug:"zpravy",icon:"seznam-zpravy-icon.svg",logo:"seznam-zpravy-logo.svg",logoHeight:145.88,logoWidth:988.42,name:"Seznam Zprávy",url:"https://www.seznamzpravy.cz/"},{slug:"super",icon:"super-icon.svg",name:"Super",url:"https://www.super.cz/"},{slug:"sport",icon:"sport-icon.svg",name:"Sport",url:"https://www.sport.cz/"},{slug:"televize_seznam",icon:"televize-seznam-icon.svg",name:"Televize Seznam",url:"https://www.televizeseznam.cz/"},{slug:"prozeny",icon:"prozeny-icon.svg",logo:"prozeny-logo.svg",logoHeight:25,logoWidth:117,name:"Proženy.cz",url:"https://www.prozeny.cz/"},{slug:"garaz",icon:"garaz-icon.svg",logo:"garaz-logo.svg",logoHeight:110,logoWidth:547,name:"Garáž.cz",url:"https://www.garaz.cz/"},{slug:"tv_program",icon:"tv-program-icon.svg",name:"TV program",url:"https://tv.seznam.cz/"},{slug:"mapy",icon:"mapy-icon.svg",name:"Mapy",url:"https://mapy.cz/"},{slug:"email",icon:"email-icon.svg",name:"Email",url:"https://email.seznam.cz/"},{slug:"pocasi",icon:"pocasi-icon.svg",name:"Počasí.cz",url:"https://pocasi.seznam.cz/"},{slug:"slovnik",icon:"slovnik-icon.svg",name:"Slovník",url:"https://slovnik.seznam.cz/"},{slug:"jizdni_rady",icon:"jizdni-rady-icon.svg",name:"Jízdní řády",url:"https://www.seznam.cz/jizdnirady/"},{slug:"sbazar",icon:"sbazar-icon.svg",name:"Bazar",url:"https://www.sbazar.cz/"},{slug:"zbozi",icon:"zbozi-icon.svg",name:"Zboží",url:"https://www.zbozi.cz/"},{slug:"sreality",icon:"sreality-icon.svg",name:"Reality",url:"https://www.sreality.cz/"},{slug:"sauto",icon:"sauto-icon.svg",name:"Auto",url:"https://www.sauto.cz/"},{slug:"kupi",icon:"kupi-icon.svg",name:"Letáky",url:"https://www.kupi.cz/"},{slug:"firmy",icon:"firmy-icon.svg",name:"Firmy",url:"https://www.firmy.cz/"},{slug:"volna_mista",icon:"volna-mista-icon.svg",name:"Volná místa",url:"https://www.volnamista.cz/"},{slug:"pohadky",icon:"pohadky-icon.svg",name:"Pohádky",url:"https://www.televizeseznam.cz/kanal/pohadky"},{slug:"horoskopy",icon:"horoskopy-icon.svg",name:"Horoskopy",url:"https://www.horoskopy.cz/"},{slug:"hry",icon:"hry-icon.svg",name:"Hry",url:"https://www.hry.cz/"},{slug:"windy",icon:"windy-icon.svg",name:"Windy",url:"https://www.windy.com/"},{slug:"lide",icon:"lide-icon.svg",name:"Lidé",url:"https://www.lide.cz/"},{slug:"sdovolena",icon:"sdovolena-icon.svg",name:"Dovolená",url:"https://www.sdovolena.cz/"},{slug:"prohlizec",icon:"seznam-icon.svg",name:"Prohlížeč",url:"https://www.seznam.cz/prohlizec/?sourceId=12"}];n.$registerImaPlugin=e=>{e.namespace("plugin.ribbon.component.organism"),e.namespace("plugin.ribbon.component.organism.ribbon"),e.namespace("plugin.ribbon.component.organism.wrapper");const t=e.plugin.ribbon.component.organism;t.ribbon.Ribbon=L,t.ribbon.Wrapper=$},n.Events=R,n.FulltextSearch=x,n.Ribbon=L,n.RibbonHelper=class{static get $dependencies(){return["$Dispatcher","$Settings.$Static"]}get height(){return m.ribbon.height}constructor(e,t){this._dispatcher=e,this._settings=t}closeMenuWoTransition(){this._dispatcher.fire(R.CLOSE_MENU_WO_TRANSITION,{})}getIconUrl(e){return e?String(e).match(/^((https?:)?\/\/|data:)/)?e:`${this._settings.img}/ribbon/${e}`:""}getService(e){return e?j.find((t=>t.slug===e)):null}},n.Wrapper=$,n.createSearch=A,n.initSettings=()=>({prod:{plugin:{ribbon:{fixedAdvertIndentation:!1,showMobileSearchInMenu:!1}}}}),n.layout=m},{"@cns/plugin-squircle-mask":6,"@ima/core":9,"@ima/plugin-less-constants/media":22,"@ima/plugin-less-constants/units":23,"@ima/plugin-useragent":72,"body-scroll-lock":382,"infinite-circle":391,"prop-types":401,react:412}],4:[function(e,t,n){t.exports=e("./dist/main")},{"./dist/main":3}],5:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e("react"))&&"object"==typeof i&&"default"in i?i.default:i,s=e("@ima/core");function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var l=a((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,m=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case s:case a:case o:case m:return e;default:switch(e=e&&e.$$typeof){case c:case p:case g:case f:case l:return e;default:return t}}case r:return t}}}function E(e){return b(e)===d}t.typeOf=b,t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=p,t.Fragment=s,t.Lazy=g,t.Memo=f,t.Portal=r,t.Profiler=a,t.StrictMode=o,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===o||e===m||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===_||e.$$typeof===v||e.$$typeof===y)},t.isAsyncMode=function(e){return E(e)||b(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return b(e)===p},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===f},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===m}}));o(l),l.typeOf,l.AsyncMode,l.ConcurrentMode,l.ContextConsumer,l.ContextProvider,l.Element,l.ForwardRef,l.Fragment,l.Lazy,l.Memo,l.Portal,l.Profiler,l.StrictMode,l.Suspense,l.isValidElementType,l.isAsyncMode,l.isConcurrentMode,l.isContextConsumer,l.isContextProvider,l.isElement,l.isForwardRef,l.isFragment,l.isLazy,l.isMemo,l.isPortal,l.isProfiler,l.isStrictMode,l.isSuspense;var c=a((function(e,n){"production"!==t.env.NODE_ENV&&function(){Object.defineProperty(n,"__esModule",{value:!0});var e,t="function"==typeof Symbol&&Symbol.for,i=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,m=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,f=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,_=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,y=t?Symbol.for("react.scope"):60119,b=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=0,s="Warning: "+e.replace(/%s/g,(function(){return n[r++]}));"undefined"!=typeof console&&console.warn(s);try{throw new Error(s)}catch(e){}};e=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];b.apply(void 0,[t].concat(i))}};var E=e;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:var n=e.type;switch(n){case u:case d:case s:case a:case o:case m:return n;default:var h=n&&n.$$typeof;switch(h){case c:case p:case g:case f:case l:return h;default:return t}}case r:return t}}}var C=u,w=d,P=c,T=l,A=i,I=p,x=s,k=g,R=f,O=r,M=a,N=o,L=m,D=!1;function H(e){return S(e)===d}n.typeOf=S,n.AsyncMode=C,n.ConcurrentMode=w,n.ContextConsumer=P,n.ContextProvider=T,n.Element=A,n.ForwardRef=I,n.Fragment=x,n.Lazy=k,n.Memo=R,n.Portal=O,n.Profiler=M,n.StrictMode=N,n.Suspense=L,n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===o||e===m||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===_||e.$$typeof===v||e.$$typeof===y)},n.isAsyncMode=function(e){return D||(D=!0,E(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),H(e)||S(e)===u},n.isConcurrentMode=H,n.isContextConsumer=function(e){return S(e)===c},n.isContextProvider=function(e){return S(e)===l},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},n.isForwardRef=function(e){return S(e)===p},n.isFragment=function(e){return S(e)===s},n.isLazy=function(e){return S(e)===g},n.isMemo=function(e){return S(e)===f},n.isPortal=function(e){return S(e)===r},n.isProfiler=function(e){return S(e)===a},n.isStrictMode=function(e){return S(e)===o},n.isSuspense=function(e){return S(e)===m}}()}));o(c),c.typeOf,c.AsyncMode,c.ConcurrentMode,c.ContextConsumer,c.ContextProvider,c.Element,c.ForwardRef,c.Fragment,c.Lazy,c.Memo,c.Portal,c.Profiler,c.StrictMode,c.Suspense,c.isValidElementType,c.isAsyncMode,c.isConcurrentMode,c.isContextConsumer,c.isContextProvider,c.isElement,c.isForwardRef,c.isFragment,c.isLazy,c.isMemo,c.isPortal,c.isProfiler,c.isStrictMode,c.isSuspense;var u=a((function(e){"production"===t.env.NODE_ENV?e.exports=l:e.exports=c})),d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function h(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var f=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,i,r=h(e),s=1;s<arguments.length;s++){for(var o in n=Object(arguments[s]))p.call(n,o)&&(r[o]=n[o]);if(d){i=d(n);for(var a=0;a<i.length;a++)m.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r},g="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_=function(){};if("production"!==t.env.NODE_ENV){var v=g,y={},b=Function.call.bind(Object.prototype.hasOwnProperty);_=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function E(e,n,i,r,s){if("production"!==t.env.NODE_ENV)for(var o in e)if(b(e,o)){var a;try{if("function"!=typeof e[o]){var l=Error((r||"React class")+": "+i+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.");throw l.name="Invariant Violation",l}a=e[o](n,o,r,i,null,v)}catch(e){a=e}if(!a||a instanceof Error||_((r||"React class")+": type specification of "+i+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in y)){y[a.message]=!0;var c=s?s():"";_("Failed "+i+" type: "+a.message+(null!=c?c:""))}}}E.resetWarningCache=function(){"production"!==t.env.NODE_ENV&&(y={})};var S=E,C=Function.call.bind(Object.prototype.hasOwnProperty),w=function(){};function P(){return null}"production"!==t.env.NODE_ENV&&(w=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});function T(){}function A(){}A.resetWarningCache=T,a((function(e){if("production"!==t.env.NODE_ENV){var n=u;e.exports=function(e,n){var i="function"==typeof Symbol&&Symbol.iterator,r="<<anonymous>>",s={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:l(P),arrayOf:function(e){return l((function(t,n,i,r,s){if("function"!=typeof e)return new a("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new a("Invalid "+r+" `"+s+"` of type `"+p(o)+"` supplied to `"+i+"`, expected an array.");for(var l=0;l<o.length;l++){var c=e(o,l,i,r,s+"["+l+"]",g);if(c instanceof Error)return c}return null}))},element:l((function(t,n,i,r,s){var o=t[n];return e(o)?null:new a("Invalid "+r+" `"+s+"` of type `"+p(o)+"` supplied to `"+i+"`, expected a single ReactElement.")})),elementType:l((function(e,t,n,i,r){var s=e[t];return u.isValidElementType(s)?null:new a("Invalid "+i+" `"+r+"` of type `"+p(s)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return l((function(t,n,i,s,o){if(!(t[n]instanceof e)){var l=e.name||r;return new a("Invalid "+s+" `"+o+"` of type `"+((c=t[n]).constructor&&c.constructor.name?c.constructor.name:r)+"` supplied to `"+i+"`, expected instance of `"+l+"`.")}var c;return null}))},node:l((function(e,t,n,i,r){return d(e[t])?null:new a("Invalid "+i+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return l((function(t,n,i,r,s){if("function"!=typeof e)return new a("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var o=t[n],l=p(o);if("object"!==l)return new a("Invalid "+r+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected an object.");for(var c in o)if(C(o,c)){var u=e(o,c,i,r,s+"."+c,g);if(u instanceof Error)return u}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&w(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),P;function n(t,n,i,r,s){for(var l=t[n],c=0;c<e.length;c++)if(o(l,e[c]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===m(t)?String(t):t}));return new a("Invalid "+r+" `"+s+"` of value `"+String(l)+"` supplied to `"+i+"`, expected one of "+u+".")}return l(n)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&w("Invalid argument supplied to oneOfType, expected an instance of array."),P;for(var n=0;n<e.length;n++){var i=e[n];if("function"!=typeof i)return w("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+h(i)+" at index "+n+"."),P}return l((function(t,n,i,r,s){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,i,r,s,g))return null;return new a("Invalid "+r+" `"+s+"` supplied to `"+i+"`.")}))},shape:function(e){return l((function(t,n,i,r,s){var o=t[n],l=p(o);if("object"!==l)return new a("Invalid "+r+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var d=u(o,c,i,r,s+"."+c,g);if(d)return d}}return null}))},exact:function(e){return l((function(t,n,i,r,s){var o=t[n],l=p(o);if("object"!==l)return new a("Invalid "+r+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");var c=f({},t[n],e);for(var u in c){var d=e[u];if(!d)return new a("Invalid "+r+" `"+s+"` key `"+u+"` supplied to `"+i+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=d(o,u,i,r,s+"."+u,g);if(m)return m}return null}))}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function a(e){this.message=e,this.stack=""}function l(e){if("production"!==t.env.NODE_ENV)var i={},s=0;function o(o,l,c,u,d,p,m){if(u=u||r,p=p||c,m!==g){if(n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var f=u+":"+c;!i[f]&&s<3&&(w("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),i[f]=!0,s++)}}return null==l[c]?o?null===l[c]?new a("The "+d+" `"+p+"` is marked as required in `"+u+"`, but its value is `null`."):new a("The "+d+" `"+p+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(l,c,u,d,p)}var l=o.bind(null,!1);return l.isRequired=o.bind(null,!0),l}function c(e){return l((function(t,n,i,r,s,o){var l=t[n];return p(l)!==e?new a("Invalid "+r+" `"+s+"` of type `"+m(l)+"` supplied to `"+i+"`, expected `"+e+"`."):null}))}function d(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||e(t))return!0;var n=function(e){var t=e&&(i&&e[i]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var r,s=n.call(t);if(n!==t.entries){for(;!(r=s.next()).done;)if(!d(r.value))return!1}else for(;!(r=s.next()).done;){var o=r.value;if(o&&!d(o[1]))return!1}return!0;default:return!1}}function p(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function m(e){if(null==e)return""+e;var t=p(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function h(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return a.prototype=Error.prototype,s.checkPropTypes=S,s.resetWarningCache=S.resetWarningCache,s.PropTypes=s,s}(n.isElement,!0)}else e.exports=function(){function e(e,t,n,i,r,s){if(s!==g){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:A,resetWarningCache:T};return n.PropTypes=n,n}()}));class I extends s.AbstractPureComponent{static get contextType(){return s.PageContext}static get defaultProps(){return{iconUri:null}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.squircleMask.component.atom.squircleMask.SquircleMask"),this._sequentialUId=0,this.utils.ComponentHelper&&(this._sequentialUId=this.utils.ComponentHelper.sequentialUId())}get maskId(){return`atm-icon-mask-${this._sequentialUId}`}render(){const{children:e,iconUri:t}=this.props;return t||e?r.createElement("svg",{className:this.cssClasses({"atm-icon-mask":!0},!0),version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("mask",{id:this.maskId},r.createElement("rect",{x:"0",y:"0",width:"40",height:"40",fill:"#000000"}),r.createElement("path",{fill:"#ffffff",fillRule:"nonzero",d:"M30.49 38.885a10.948 10.948 0 0 0 8.394-8.393A49.607 49.607 0 0 0 40 20c0-3.6-.385-7.11-1.116-10.491a10.948 10.948 0 0 0-8.392-8.393A49.611 49.611 0 0 0 20 0C16.4 0 12.89.385 9.51 1.116A10.949 10.949 0 0 0 1.116 9.51 49.6 49.6 0 0 0 0 19.999c0 3.6.385 7.11 1.116 10.492a10.949 10.949 0 0 0 8.393 8.393A49.584 49.584 0 0 0 20 40c3.6 0 7.11-.385 10.49-1.115"}))),e||r.createElement("image",{xlinkHref:t,mask:`url(#${this.maskId})`,height:"40",width:"40"})):null}}n.$registerImaPlugin=e=>{e.namespace("plugin.squircleMask.component.atom"),e.namespace("plugin.squircleMask.component.atom.squircleMask"),e.plugin.squircleMask.component.atom.squircleMask.SquircleMask=I},n.SquircleMask=I}).call(this)}).call(this,e("_process"))},{"@ima/core":9,_process:397,react:412}],6:[function(e,t,n){"use strict";t.exports=e("./dist/client.cjs.js")},{"./dist/client.cjs.js":5}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@cns/pixel-generator");var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class a extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{iconUri:null,lazyLoading:!0,extendedPadding:0,useIntersectionObserver:!0,showBackground:!1,showBorder:!1}}get maskId(){return`atm-icon-mask-${this._sequentialUId}`}get squircleId(){return`atm-icon-squircle-${this._sequentialUId}`}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.squircleMask.component.atom.squircleMask.SquircleMask"),this._registeredVisibilityId=null,this._onVisibilityWriter=this.onVisibilityWriter.bind(this),this._sequentialUId=0,this.utils.ComponentHelper&&(this._sequentialUId=this.utils.ComponentHelper.sequentialUId()),this._rootElement=o.default.createRef(),this.state={shouldRenderPlaceholder:e.lazyLoading}}componentDidMount(){this._shouldLazyLoadImage()&&this._registerToCheckingVisibility()}componentWillUnmount(){this._shouldLazyLoadImage()&&this._unregisterToCheckingVisibility()}render(){const{children:e,iconUri:t}=this.props;return t||e?o.default.createElement("svg",{className:this.cssClasses({"atm-icon-mask":!0},!0),ref:this._rootElement,version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("defs",null,o.default.createElement("path",{id:this.squircleId,fill:"#ffffff",fillRule:"nonzero",d:"M30.49 38.885a10.948 10.948 0 0 0 8.394-8.393A49.607 49.607 0 0 0 40 20c0-3.6-.385-7.11-1.116-10.491a10.948 10.948 0 0 0-8.392-8.393A49.611 49.611 0 0 0 20 0C16.4 0 12.89.385 9.51 1.116A10.949 10.949 0 0 0 1.116 9.51 49.6 49.6 0 0 0 0 19.999c0 3.6.385 7.11 1.116 10.492a10.949 10.949 0 0 0 8.393 8.393A49.584 49.584 0 0 0 20 40c3.6 0 7.11-.385 10.49-1.115"}),o.default.createElement("mask",{id:this.maskId},o.default.createElement("use",{xlinkHref:`#${this.squircleId}`}))),this.props.showBackground&&o.default.createElement("rect",{className:this.cssClasses("atm-icon-mask__background"),width:"40",height:"40",mask:`url(#${this.maskId})`}),this.props.showBorder&&o.default.createElement("use",{className:this.cssClasses("atm-icon-mask__border"),xlinkHref:`#${this.squircleId}`}),this._renderImage(e,t)):null}_renderImage(e,t){return e||this._renderImageThroughUri(t)}_renderImageThroughUri(e){return this._shouldRenderPlaceholdedImage()&&(e=this._generatePlaceholderImageUri()),o.default.createElement("image",{xlinkHref:e,mask:`url(#${this.maskId})`,width:"40",height:"40"})}onVisibilityWriter(e,t){e>0&&(t&&t.disconnect(),this._unregisterToCheckingVisibility(),this.setState({shouldRenderPlaceholder:!1}))}_generatePlaceholderImageUri(){const{ColorHelper:e}=this.utils,{placeholderColor:t}=this.utils.$Settings.plugin.cns.plugin.squircleMask;if(e.isValidColor(t)){const n=e.parseColor(t);return s.generateImageDataUrl(n.red,n.green,n.blue)}return null}_registerToCheckingVisibility(){const{useIntersectionObserver:e}=this.props,{$UIComponentHelper:t}=this.utils,n=this.props.extendedPadding||Math.max(Math.round(t.componentPositions.getWindowViewportRect().height),300);this._registeredVisibilityId=t.visibility.register(t.getVisibilityReader(this._rootElement.current,{extendedPadding:n,useIntersectionObserver:e,width:40,height:40}),t.wrapVisibilityWriter(this._onVisibilityWriter))}_shouldLazyLoadImage(){const{LegacyBrowserDetector:e,RegressionHelper:t,$UIComponentHelper:n}=this.utils;return this.props.lazyLoading&&!n.isAmp()&&!e.isLegacyClient()&&!t.isRegression()&&!e.isCrawlerBot()}_shouldRenderPlaceholdedImage(){return this._shouldLazyLoadImage()&&this.state.shouldRenderPlaceholder}_unregisterToCheckingVisibility(){const{$UIComponentHelper:e}=this.utils;this._registeredVisibilityId&&(e.visibility.unregister(this._registeredVisibilityId),this._registeredVisibilityId=null)}}n.$registerImaPlugin=e=>{e.namespace("plugin.squircleMask.component.atom"),e.namespace("plugin.squircleMask.component.atom.squircleMask"),e.plugin.squircleMask.component.atom.squircleMask.SquircleMask=a},n.SquircleMask=a,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{squircleMask:{placeholderColor:"#f2f2f2"}}}}}})},{"@cns/pixel-generator":2,"@ima/core":9,"prop-types":401,react:412}],8:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{"./dist/client.cjs.js":7,dup:6}],9:[function(e,t,n){t.exports=e("./dist/ima.client.cjs.js")},{"./dist/ima.client.cjs.js":10}],10:[function(e,t,n){(function(t){(function(){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("@ima/helpers")),s=i(e("classnames")),o=i(e("react")),a=i(e("react-dom")),l=i(e("memoize-one")),c=new class{constructor(){this._modules=new Map,this._plugins=[]}set(e,t){this._modules.set(e,t),"function"==typeof t.$registerImaPlugin&&this._plugins.push({name:e,module:t}),$IMA.Loader.register(e,[],(e=>({setters:[],execute:()=>{e("default",t);for(let n of Object.keys(t))e(n,t[n])}})))}get(e,t){if(!this._modules.has(e)&&!t)throw new Error(`The module '${e}' is not registered.Add the module to vendors in build.js`);return this._modules.get(e)}clear(){return this._modules.clear(),this._plugins=[],this}bindToNamespace(e){let t=e.namespace("vendor");for(let n of this._modules.keys()){let i=this._modules.get(n);"function"==typeof i.$registerImaPlugin&&i.$registerImaPlugin(e),t[n]=i}}getImaPlugins(){return this._plugins}},u=new class{constructor(){}namespace(e){const t=this._resolvePathLevels(e);let n=this;for(const e of t)Object.prototype.hasOwnProperty.call(n,e)||(n[e]={}),n=n[e];return n}has(e){let t;try{t=void 0!==this.get(e)}catch(e){t=!1}return t}get(e){const t=this._resolvePathLevels(e);let n=this;for(let e of t){if(!n[e])return;n=n[e]}return n}set(e,t){const n=this._resolvePathLevels(e),i=n.pop();this.namespace(n.join("."))[i]=t}_resolvePathLevels(e){if(!e||"string"!=typeof e)throw Error("namespace.get: path is not type of string");return e.split(".")}};u.namespace("ima.core");class d{static get PLUGIN_BINDING_STATE(){return"plugin"}static get IMA_BINDING_STATE(){return"ima.core"}static get APP_BINDING_STATE(){return"app"}constructor(e){this._namespace=e,this._entries=new Map,this._bindingState=null,this._bindingPlugin=null}bind(e,t,n){let i=this._entries.get(t),r=this._entries.get(e),s=i||r;if(i&&!r&&n){let i=this._createEntry(t,n);return this._entries.set(e,i),this}if(s)this._entries.set(e,s),n&&this._updateEntryValues(s,t,n);else{let i=this._createEntry(t,n);this._entries.set(t,i),this._entries.set(e,i)}return this}constant(e,t){let n=this._createEntry((()=>t),[],{writeable:!1});return n.sharedInstance=t,this._entries.set(e,n),this}inject(e,t){let n=this._entries.get(e);return n?t&&this._updateEntryValues(n,e,t):(n=this._createEntry(e,t),this._entries.set(e,n)),this}provide(e,t,n){let i=this._entries.get(t);return i?(this._entries.set(e,i),n&&this._updateEntryValues(i,t,n)):(i=this._createEntry(t,n),this._entries.set(t,i),this._entries.set(e,i)),this}get(e){let t=this._getEntry(e);return null===t.sharedInstance&&(t.sharedInstance=this._createInstanceFromEntry(t)),t.sharedInstance}getConstructorOf(e){return this._getEntry(e).classConstructor}has(e){return this._entries.has(e)||!!this._getEntryFromConstant(e)||!!this._getEntryFromNamespace(e)||!!this._getEntryFromClassConstructor(e)}create(e,t){let n=this._getEntry(e);return this._createInstanceFromEntry(n,t)}clear(){return this._entries.clear(),this._bindingState=null,this._bindingPlugin=null,this}setBindingState(e,t=null){if(this._bindingState===d.APP_BINDING_STATE)throw new Error("ima.core.ObjectContainer:setBindingState The setBindingState() method  has to be called only by the bootstrap script. Other calls are not allowed.");this._bindingState=e,this._bindingPlugin=e===d.PLUGIN_BINDING_STATE?t:null}_getEntry(e){return this._entries.get(e)||this._getEntryFromConstant(e)||this._getEntryFromNamespace(e)||this._getEntryFromClassConstructor(e)}_updateEntryValues(e,t,n){e.classConstructor=t,e.dependencies=n}_createEntry(e,t,n){t&&0!==t.length||!Array.isArray(e.$dependencies)||(t=e.$dependencies);let i=this._bindingState;return this._bindingState===d.PLUGIN_BINDING_STATE&&(i=this._bindingPlugin),new p(e,t,i,n)}_createInstanceFromEntry(e,t=[]){if(0===t.length){t=[];for(let n of e.dependencies)["function","string"].indexOf(typeof n)>-1?t.push(this.get(n)):t.push(n)}return new(0,e.classConstructor)(...t)}_getEntryFromConstant(e){if("string"!=typeof e)return null;let t=e.split("."),n=this._entries.has(t[0])?this._entries.get(t[0]).sharedInstance:null,i=t.length;for(let e=1;e<i&&n;e++)n=n[t[e]];if(null!=n){let e=this._createEntry((()=>n),[],{writeable:!1});return e.sharedInstance=n,e}return null}_getEntryFromNamespace(e){if("string"!=typeof e||!this._namespace.has(e))return null;let t=this._namespace.get(e);if("function"==typeof t)return this._entries.has(t)?this._entries.get(t):this._createEntry(t);let n=this._createEntry((()=>t));return n.sharedInstance=t,n}_getEntryFromClassConstructor(e){if("function"==typeof e&&Array.isArray(e.$dependencies)){let t=this._createEntry(e,e.$dependencies);return this._entries.set(e,t),t}return null}}u.ima.core.ObjectContainer=d;class p{constructor(e,t,n,i){this.classConstructor=e,this.sharedInstance=null,this._options=i||{writeable:!0},this._referrer=n,this._dependencies=t||[],this._overrideCounter=0}set dependencies(e){this._dependencies=e,this._overrideCounter++}get dependencies(){return this._dependencies}get referrer(){return this._referrer}get writeable(){return this._options.writeable}}class m{init(){}add(){}use(){}remove(){}getPath(){}getUrl(){}getBaseUrl(){}getDomain(){}getHost(){}getProtocol(){}getCurrentRouteInfo(){}listen(){}unlisten(){}redirect(){}link(){}route(){}handleError(){}handleNotFound(){}isClientError(){}isRedirection(){}}u.namespace("ima.core");class h{constructor(e){this._oc=e,this._config={}}run(e){this._config=e,this._initSettings(),this._bindDependencies(),this._initServices(),this._initRoutes()}_initSettings(){let e={};this._config.plugins.concat([{name:d.APP_BINDING_STATE,module:this._config}]).filter((e=>"function"==typeof e.module.initSettings)).forEach((t=>{let n=t.module.initSettings(u,this._oc,this._config.settings),i=r.resolveEnvironmentSetting(n,this._config.settings.$Env);r.assignRecursivelyWithTracking(t.name)(e,i)})),this._config.bind=Object.assign(this._config.bind||{},e,this._config.settings)}_getEnvironmentSetting(e){let t=this._config.settings.$Env,n=e[t]||{};if("prod"!==t){let t=e.prod;r.assignRecursively(t,n),n=t}return n}_bindDependencies(){this._oc.setBindingState(d.IMA_BINDING_STATE),this._config.initBindIma(u,this._oc,this._config.bind,d.IMA_BINDING_STATE),this._config.plugins.filter((e=>"function"==typeof e.module.initBind)).forEach((e=>{this._oc.setBindingState(d.PLUGIN_BINDING_STATE,e.name),e.module.initBind(u,this._oc,this._config.bind,e.name)})),this._oc.setBindingState(d.APP_BINDING_STATE),this._config.initBindApp(u,this._oc,this._config.bind,d.APP_BINDING_STATE)}_initRoutes(){let e=this._oc.get(m);this._config.initRoutes(u,this._oc,this._config.routes,e)}_initServices(){this._config.initServicesIma(u,this._oc,this._config.services),this._config.plugins.filter((e=>"function"==typeof e.module.initServices)).forEach((e=>{e.module.initServices(u,this._oc,this._config.services)})),this._config.initServicesApp(u,this._oc,this._config.services)}}u.ima.core.Bootstrap=h;class f{clear(){}has(){}get(){}set(){}delete(){}disable(){}enable(){}serialize(){}deserialize(){}}class g{constructor(e,t){this._value=e,this._ttl=t,this._created=Date.now()}isExpired(){return Date.now()>this._created+this._ttl}serialize(){return{value:this._value,ttl:this._ttl}}getValue(){return this._value}}class _{static get $dependencies(){return[]}createCacheEntry(e,t){return new g(e,t)}}class v extends f{constructor(e,t,n,i={ttl:3e4,enabled:!1}){super(),this._cache=e,this._factory=t,this._Helper=n,this._ttl=i.ttl,this._enabled=i.enabled}clear(){this._cache.clear()}has(e){if(!this._enabled||!this._cache.has(e))return!1;let t=this._cache.get(e);return!(!t||t.isExpired())||(this.delete(e),!1)}get(e){if(this.has(e)){let t=this._cache.get(e).getValue();return this._clone(t)}return null}set(e,t,n=null){if(!this._enabled)return;let i=this._factory.createCacheEntry(this._clone(t),n||this._ttl);this._cache.set(e,i)}delete(e){this._cache.delete(e)}disable(){this._enabled=!1,this.clear()}enable(){this._enabled=!0}serialize(){let e={};for(let t of this._cache.keys()){const n=this._cache.get(t);if(n instanceof g){const i=n.serialize();i.ttl===1/0&&(i.ttl="Infinity"),e[t]=i}}return JSON.stringify(e).replace(/<\/script/gi,"<\\/script")}deserialize(e){for(let t of Object.keys(e)){let n=e[t];"Infinity"===n.ttl&&(n.ttl=1/0),this.set(t,n.value,n.ttl)}}_canSerializeValue(e){if(e instanceof Date||e instanceof RegExp||e instanceof Promise||"function"==typeof e)return console.warn("The provided value is not serializable: ",e),!1;if(!e)return!0;if(e.constructor===Array)for(let t of e)if(!this._canSerializeValue(t))return console.warn("The provided array is not serializable: ",e),!1;if("object"==typeof e)for(let t of Object.keys(e))if(!this._canSerializeValue(e[t]))return console.warn("The provided object is not serializable due to the following property: ",t,e),!1;return!0}_clone(e){return null===e||"object"!=typeof e||e instanceof Promise?e:this._Helper.clone(e)}}class y{init(){}destroy(){}activate(){}deactivate(){}load(){}update(){}setState(){}getState(){}beginStateTransaction(){}commitStateTransaction(){}cancelStateTransaction(){}addExtension(){}getExtensions(){}setMetaParams(){}setRouteParams(){}getRouteParams(){}setPageStateManager(){}getHttpStatus(){}}class b extends y{constructor(e,t,n,i,r){super(),this._controller=e,this._metaManager=t,this._router=n,this._dictionary=i,this._settings=r}init(){this._controller.init()}destroy(){this._controller.destroy()}activate(){this._controller.activate()}deactivate(){this._controller.deactivate()}load(){return this._controller.load()}update(e={}){return this._controller.update(e)}setReactiveView(e){this._controller.setReactiveView(e)}setState(e){this._controller.setState(e)}getState(){return this._controller.getState()}beginStateTransaction(){this._controller.beginStateTransaction()}commitStateTransaction(){this._controller.commitStateTransaction()}cancelStateTransaction(){this._controller.cancelStateTransaction()}addExtension(e){return this._controller.addExtension(e),this}getExtensions(){return this._controller.getExtensions()}setMetaParams(e){this._controller.setMetaParams(e,this._metaManager,this._router,this._dictionary,this._settings)}setRouteParams(e={}){this._controller.setRouteParams(e)}getRouteParams(){return this._controller.getRouteParams()}setPageStateManager(e){this._controller.setPageStateManager(e)}getHttpStatus(){return this._controller.getHttpStatus()}getMetaManager(){return this._metaManager}}class E{init(){}getLanguage(){}get(){}has(){}}function S(e,t=!0){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(this.constructor===S)throw new TypeError("The ExtensibleError is an abstract class and must be extended before it can be instantiated.");Error.call(this,e),this.name=this.constructor.name,this.message=e,this._nativeError=new Error(e),this._nativeError.name=this.name,this._nativeError.columnNumber&&(this.lineNumber=this._nativeError.lineNumber,this.columnNumber=this._nativeError.columnNumber,this.fileName=this._nativeError.fileName),this._stack=null,this._dropInternalStackFrames=t}S.prototype=Object.create(Error.prototype),S.prototype.constructor=S,Object.defineProperty(S.prototype,"stack",{configurable:!0,enumerable:!1,get:function(){if(this._stack)return this._stack;let e=this._nativeError.stack;if("string"==typeof e){if(this._dropInternalStackFrames){let t=e.split("\n"),n=1,i=Object.getPrototypeOf(this);for(;i!==S.prototype;)i=Object.getPrototypeOf(i),n++;t.splice(1,n),this._stack=t.join("\n")}else this._stack=e;return this._stack}}});class C extends S{getHttpStatus(){}getParams(){}}class w extends C{constructor(e,t={},n=!0){super(e,n),this._params=t}getHttpStatus(){return this._params.status||500}getParams(){return this._params}}class P extends E{static get $dependencies(){return[]}constructor(){super(),this._language=null,this._dictionary=null}init(e){this._language=e.$Language,this._dictionary=e.dictionary}getLanguage(){return this._language}get(e,t={}){const n=this._getScope(e);if(!n)throw new w(`ima.core.dictionary.MessageFormatDictionary.get: The localization phrase '${e}' does not exists`,{key:e,parameters:t});return n(t)}has(e){if(!/^[^.]+\.[^.]+$/.test(e))throw new Error(`The provided key (${e}) is not a valid localization phrase key, expecting a "file_name.identifier" notation`);return!!this._getScope(e)}_getScope(e){let t=e.split("."),n=this._dictionary;for(let e of t){if(!n[e])return null;n=n[e]}return n}}class T{fire(){}listenAll(){}listen(){}unlistenAll(){}unlisten(){}}class A{isClient(){}isCookieEnabled(){}hasSessionStorage(){}setTitle(){}getWebSocket(){}getWindow(){}getDocument(){}getScrollX(){}getScrollY(){}scrollTo(){}getDomain(){}getHost(){}getPath(){}getUrl(){}getBody(){}getElementById(){}getHistoryState(){}querySelector(){}querySelectorAll(){}redirect(){}pushState(){}replaceState(){}createCustomEvent(){}bindEventListener(){}unbindEventListener(){}}const I="$IMA.CustomEvent";class x extends T{static get $dependencies(){return[A]}constructor(e){super(),this._window=e,this._listeners=new WeakMap,this._allListenersTargets=new WeakMap}fire(e,t,n,i={}){var r={},s={detail:{eventName:t,data:n}};Object.assign(r,{bubbles:!0,cancelable:!0},i,s);var o=this._window.createCustomEvent(I,r);if(!e||void 0===e.dispatchEvent)throw new w(`ima.core.event.EventBusImpl.fire: The EventSource ${e} is not defined or can not dispatch event '${t}' (data: ${n}).`,{eventTarget:e,eventName:t,data:n,eventInitialization:r});return e.dispatchEvent(o),this}listenAll(e,t){this._allListenersTargets.has(e)||this._allListenersTargets.set(e,new WeakMap);var n=e=>{e.type===I&&e.detail&&e.detail.eventName&&t(e)};return this._allListenersTargets.get(e).set(t,n),this._window.bindEventListener(e,I,n),this}listen(e,t,n){if(!e)return this;this._listeners.has(n)||this._listeners.set(n,new WeakMap);var i=this._listeners.get(n);i.has(e)||i.set(e,new Map);var r=e=>{e.type===I&&e.detail&&e.detail.eventName===t&&n(e)};return i.get(e).set(t,r),this._window.bindEventListener(e,I,r),this}unlistenAll(e,t){if(!this._allListenersTargets.has(e))return this;var n=this._allListenersTargets.get(e);if(!n.has(t))return this;var i=n.get(t);return this._window.unbindEventListener(e,I,i),n.delete(t),n.size||this._allListenersTargets.delete(e),this}unlisten(e,t,n){if(!this._listeners.has(n))return this;var i=this._listeners.get(n);if(!i.has(e))return this;var r=i.get(e);if(!r.has(t))return this;var s=r.get(t);return this._window.unbindEventListener(e,I,s),r.delete(t),r.size||i.delete(e),this}}class k{clear(){}listen(){}unlisten(){}fire(){}}const R=Object.freeze(new Map),O=Object.freeze(new Set);class M extends k{static get $dependencies(){return[]}constructor(){super(),this._eventListeners=new Map}clear(){return this._eventListeners.clear(),this}listen(e,t,n=null){return this._eventListeners.has(e)||this._createNewEvent(e),this._getListenersOf(e).has(t)||this._createNewListener(e,t),this._getScopesOf(e,t).add(n),this}unlisten(e,t,n=null){let i=this._getScopesOf(e,t);if(i.delete(n),!i.size){let n=this._getListenersOf(e);n.delete(t),n.size||this._eventListeners.delete(e)}return this}fire(e,t,n=!1){let i=this._getListenersOf(e);i.size||n||console.warn(`There are no event listeners registered for the ${e} event`,{event:e,data:t});for(let[e,n]of i)for(let i of n)e.bind(i)(t);return this}_createNewEvent(e){let t=new Map;this._eventListeners.set(e,t)}_createNewListener(e,t){let n=new Set;this._eventListeners.get(e).set(t,n)}_getScopesOf(e,t){let n=this._getListenersOf(e);return n.has(t)?n.get(t):O}_getListenersOf(e){return this._eventListeners.has(e)?this._eventListeners.get(e):R}}class N{get(){}post(){}put(){}patch(){}delete(){}getCacheKey(){}setDefaultHeader(){}clearDefaultHeaders(){}}class L extends N{constructor(e,t,n,i){super(),this._proxy=e,this._cache=t,this._cookie=n,this._cacheOptions=i.cacheOptions,this._defaultRequestOptions=i.defaultRequestOptions,this._internalCacheOfPromises=new Map}get(e,t,n={}){return this._requestWithCheckCache("get",e,t,n)}post(e,t,n={}){return this._requestWithCheckCache("post",e,t,Object.assign({cache:!1},n))}put(e,t,n={}){return this._requestWithCheckCache("put",e,t,Object.assign({cache:!1},n))}patch(e,t,n={}){return this._requestWithCheckCache("patch",e,t,Object.assign({cache:!1},n))}delete(e,t,n={}){return this._requestWithCheckCache("delete",e,t,Object.assign({cache:!1},n))}getCacheKey(e,t,n){return this._cacheOptions.prefix+this._getCacheKeySuffix(e,t,n)}setDefaultHeader(e,t){return this._proxy.setDefaultHeader(e,t),this}clearDefaultHeaders(){return this._proxy.clearDefaultHeaders(),this}_requestWithCheckCache(e,t,n,i){if((i=this._prepareOptions(i)).cache){let i=this._getCachedData(e,t,n);if(i)return i}return this._request(e,t,n,i)}_getCachedData(e,t,n){let i=this.getCacheKey(e,t,n);if(this._internalCacheOfPromises.has(i))return this._internalCacheOfPromises.get(i);if(this._cache.has(i)){let e=this._cache.get(i);return Promise.resolve(e)}return null}_request(e,t,n,i){let r=this.getCacheKey(e,t,n),s=this._proxy.request(e,t,n,i).then((e=>this._proxyResolved(e)),(e=>this._proxyRejected(e)));return this._internalCacheOfPromises.set(r,s),s}_proxyResolved(e){let t={status:e.status,body:e.body,params:e.params,headers:e.headers,headersRaw:e.headersRaw,cached:!1},n=this.getCacheKey(t.params.method,t.params.url,t.params.data);this._internalCacheOfPromises.delete(n),this._proxy.haveToSetCookiesManually()&&this._setCookiesFromResponse(t);let{postProcessor:i,cache:r}=t.params.options;return"function"==typeof i&&(t=i(t)),r&&this._saveAgentResponseToCache(t),t}_proxyRejected(e){let t=e.getParams(),n=t.method,i=t.url,r=t.data;if(t.options.repeatRequest>0)return t.options.repeatRequest--,this._request(n,i,r,t.options);{let s=this.getCacheKey(n,i,r);this._internalCacheOfPromises.delete(s);let o=`${t.errorName}: ima.core.http.Agent:_proxyRejected: ${e.message}`,a=new w(o,t);return Promise.reject(a)}}_prepareOptions(e){let t=Object.assign({},this._defaultRequestOptions,e),n={};return t.withCredentials&&(n={Cookie:this._cookie.getCookiesStringForCookieHeader()}),t.headers=Object.assign(n,this._defaultRequestOptions.headers,e.headers||{}),t}_getCacheKeySuffix(e,t,n){let i="";if(n)try{i=JSON.stringify(n).replace(/<\/script/gi,"<\\/script")}catch(e){console.warn("The provided data does not have valid JSON format",n)}return`${e}:${t}?${i}`}_setCookiesFromResponse(e){if(e.headersRaw){let t=e.headersRaw.raw()["set-cookie"];t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{this._cookie.parseFromSetCookieHeader(e)})))}}_saveAgentResponseToCache(e){let t=this.getCacheKey(e.params.method,e.params.url,e.params.data);e.cached=!0;let n=e.params.options.ttl;this._cache.set(t,e,n),e.cached=!1}}const D=Object.freeze({OK:200,NO_CONTENT:204,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,TIMEOUT:408,SERVER_ERROR:500});class H{constructor(e,t){this._transformer=e,this._window=t,this._defaultHeaders=new Map}request(e,t,n,i){const r=this._composeRequestParams(e,t,n,i);return new Promise(((s,o)=>{let a;i.timeout&&(a=setTimeout((()=>{o(new w("The HTTP request timed out",{status:D.TIMEOUT}))}),i.timeout)),this._getFetchApi()(this._composeRequestUrl(t,this._shouldRequestHaveBody(e,n)?{}:n),this._composeRequestInit(e,n,i)).then((e=>{a&&clearTimeout(a);const t=e.headers.get("content-type");return e.status===D.NO_CONTENT?Promise.resolve([e,null]):t&&t.includes("application/json")?e.json().then((t=>[e,t])):e.text().then((t=>[e,t]))})).then((([e,t])=>this._processResponse(r,e,t))).then(s,o)})).catch((e=>{throw this._processError(e,r)}))}setDefaultHeader(e,t){this._defaultHeaders.set(e,t)}clearDefaultHeaders(){this._defaultHeaders.clear()}getErrorParams(e,t,n,i,r,s,o){let a=this._composeRequestParams(e,t,n,i);void 0===s&&(s={});let l={status:r,body:s,cause:o};switch(r){case D.TIMEOUT:l.errorName="Timeout";break;case D.BAD_REQUEST:l.errorName="Bad Request";break;case D.UNAUTHORIZED:l.errorName="Unauthorized";break;case D.FORBIDDEN:l.errorName="Forbidden";break;case D.NOT_FOUND:l.errorName="Not Found";break;case D.SERVER_ERROR:l.errorName="Internal Server Error";break;default:l.errorName="Unknown"}return Object.assign(l,a)}haveToSetCookiesManually(){return!this._window.isClient()}_processResponse(e,t,n){if(t.ok)return{status:t.status,body:n,params:e,headers:this._headersToPlainObject(t.headers),headersRaw:t.headers,cached:!1};throw new w("The request failed",{status:t.status,body:n})}_headersToPlainObject(e){let t={};if(e.entries)for(let[n,i]of e.entries())t[n]=i;else e.forEach&&(e.getAll?e.forEach(((n,i)=>{t[i]=e.getAll(i).join(", ")})):e.get?e.forEach(((n,i)=>{t[i]=e.get(i)})):e.forEach(((e,n)=>{t[n]=e})));return t}_processError(e,t){const n=e instanceof w?e.getParams():{};return this._createError(e,t,n.status||D.SERVER_ERROR,n.body||null)}_createError(e,t,n,i=null){return new w(e.message,this.getErrorParams(t.method,t.url,t.data,t.options,n,i,e))}_getFetchApi(){return this._window.isClient()?this._window.getWindow().fetch:e("node-fetch")}_composeRequestParams(e,t,n,i){return{method:e,url:t,transformedUrl:this._transformer.transform(t),data:n,options:i}}_composeRequestInit(e,t,n){const i=this._getContentType(e,t,n);i&&(n.headers["Content-Type"]=i);for(let[e,t]of this._defaultHeaders)n.headers[e]=t;let r={method:e.toUpperCase(),headers:n.headers,credentials:n.withCredentials?"include":"same-origin",redirect:"follow"};return this._shouldRequestHaveBody(e,t)&&(r.body=this._transformRequestBody(t,n.headers)),Object.assign(r,n.fetchOptions||{}),r}_getContentType(e,t,n){return n.headers["Content-Type"]&&"string"==typeof n.headers["Content-Type"]?n.headers["Content-Type"]:this._shouldRequestHaveBody(e,t)?"application/json":null}_composeRequestUrl(e,t){const n=this._transformer.transform(e),i=this._convertObjectToQueryString(t||{}),r=i?n.includes("?")?"&":"?":"";return`${n}${r}${i}`}_shouldRequestHaveBody(e,t){return!(!e||!t||["get","head"].includes(e.toLowerCase()))}_transformRequestBody(e,t){switch(t["Content-Type"]){case"application/json":return JSON.stringify(e);case"application/x-www-form-urlencoded":return this._convertObjectToQueryString(e);case"multipart/form-data":return this._convertObjectToFormData(e);default:return e}}_convertObjectToQueryString(e){return Object.keys(e).map((t=>[t,e[t]].map(encodeURIComponent).join("="))).join("&")}_convertObjectToFormData(e){const t=this._window.getWindow();if(!t||!t.FormData)return e;const n=new FormData;return Object.keys(e).forEach((t=>n.append(t,e[t]))),n}}class ${static get $dependencies(){return[]}constructor(){this._rules={}}addRule(e,t){return this._rules[e]=t,this}clear(){return this._rules={},this}transform(e){let t=Object.keys(this._rules);if(0===t.length)return e;let n=new RegExp(t.join("|"),"g");return e.replace(n,(e=>this._rules[e]))}}class j{setTitle(){}getTitle(){}setMetaName(){}getMetaName(){}getMetaNames(){}setMetaProperty(){}getMetaProperty(){}getMetaProperties(){}setLink(){}getLink(){}getLinks(){}}class U extends j{static get $dependencies(){return[]}constructor(){super(),this._title="",this._metaName=new Map,this._metaProperty=new Map,this._link=new Map}setTitle(e){this._title=e}getTitle(){return this._title}setMetaName(e,t){this._metaName.set(e,t)}getMetaName(e){return this._metaName.get(e)||""}getMetaNames(){return Array.from(this._metaName.keys())}setMetaProperty(e,t){this._metaProperty.set(e,t)}getMetaProperty(e){return this._metaProperty.get(e)||""}getMetaProperties(){return Array.from(this._metaProperty.keys())}setLink(e,t){this._link.set(e,t)}getLink(e){return this._link.get(e)||""}getLinks(){return Array.from(this._link.keys())}}function F(e,t){return t&&t.$Utils||e.$Utils}function z(e,t,n){return e.utils.$Dictionary.get(t,n)}function B(e,t,n){return e.utils.$Router.link(t,n)}function V(e,t,n){return e.utils.$CssClasses(t,n&&e)}function W(e,t){let n="string"==typeof t?t:null;return!n&&(t instanceof o.Component||t instanceof o.PureComponent)&&(n=t.props.className),s(e,n)}function q(e,t,n=null){return e.utils.$EventBus.fire(a.findDOMNode(e),t,n)}function G(e,t,n,i){return t&&!t.addEventListener&&(t=a.findDOMNode(t)),e.utils.$EventBus.listen(t,n,i)}function Y(e,t,n,i){return t&&!t.addEventListener&&(t=a.findDOMNode(t)),e.utils.$EventBus.unlisten(t,n,i)}class K{constructor(e){this._oc=e}createController(e){return this._oc.create(e)}createView(e){if("function"==typeof e)return e;let t=this._oc.getConstructorOf(e);if(t)return t;throw new w(`ima.core.page.Factory:createView hasn't name of view "${e}".`)}decorateController(e){let t=this._oc.get("$MetaManager"),n=this._oc.get("$Router"),i=this._oc.get("$Dictionary"),r=this._oc.get("$Settings");return this._oc.create("$ControllerDecorator",[e,t,n,i,r])}decoratePageStateManager(e,t){return this._oc.create("$PageStateManagerDecorator",[e,t])}}