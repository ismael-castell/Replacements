"use strict";(self.webpackChunkmta=self.webpackChunkmta||[]).push([[592],{16621:function(e,t,n){var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],r={formatDate:function(e){e instanceof Date||(e=new Date(e));var t=e.getDate(),n=e.getFullYear();return i[e.getDay()]+" "+a[e.getMonth()]+" "+t+" "+n+","},formatTime:function(e){var t=e.getHours()>11?"PM":"AM",n=e.getHours()>12?e.getHours()-12:e.getHours();return(0===n?"12":n)+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+" "+t}};t.Z=341==n.j?r:null},80092:function(e,t,n){n(74916),n(15306),n(92222),n(56977);var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r={formatDate:function(e){e instanceof Date||(e=new Date(e));var t=e.getDate(),n=e.getFullYear();return i[e.getDay()]+" "+t+" "+a[e.getMonth()]+" "+n},formatTime:function(e){var t=e.getHours()>11?"PM":"AM",n=e.getHours()>12?e.getHours()-12:e.getHours();return(0===n?"12":n)+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+" "+t},branchClass:function(e){return e?e.toLowerCase().replace(/\s+/g,"-"):e},fileSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=1024,i=["bytes","KB","MB","GB","TB","PB"];if(isNaN(parseFloat(e))||isNaN(e)||!isFinite(e))return"?";for(var a=0;e>=n;)e/=n,a++;return 0===t?"".concat(Math.round(e)," ").concat(i[a]):"".concat(e.toFixed(+t)," ").concat(i[a])}};t.Z=/^(367|423|538|673)$/.test(n.j)?null:r},92197:function(e,t,n){n(57327),n(41539),n(74916),n(23123),n(39714),n(69600),n(21249),n(47042);var i={install:function(e){e.filter("capitalize",(function(e){return e?e.toString().toLowerCase().split(" ").map((function(e){if(-1!==e.indexOf("/")){var t=e.split("/");e=t.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("/")}return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "):""}))}};t.Z=/^(367|423|782|874)$/.test(n.j)?null:i},4540:function(e,t,n){var i={inserted:function(e,t){e.clickOutsideEvent=function(n){e==n.target||e.contains(n.target)||t.value()},document.addEventListener("click",e.clickOutsideEvent)}};t.Z=/^(576|968)$/.test(n.j)?i:null},97657:function(e,t,n){n(57327),n(41539),n(9653);var i={install:function(e){e.filter("getHoursFromSeconds",(function(e){return e?Math.floor(Number(e)/60):""}))}};t.Z=/^5(26|38)$/.test(n.j)?i:null},40381:function(e,t,n){n(57327),n(41539),n(9653);var i={install:function(e){e.filter("getMinutesFromSeconds",(function(e){return e?Number(e)%60:""}))}};t.Z=/^5(26|38)$/.test(n.j)?i:null},48916:function(e,t,n){n(57327),n(41539);var i={install:function(e){e.filter("uppercase",(function(e){return e?e.toUpperCase():""}))}};t.Z=341==n.j?i:null},12511:function(e,t,n){var i,a=n(25746),r=n(99746),s=n(29502),o={handleError:function(e,t){i||(i=r.Z.openModal("error-modal",'<error :code="code" :message="message" :reason="reason"></error>',null,"Close",{code:t.code,reason:t.reason,message:e||s.aK},{error:a.Z},"error",null,(function(){i.$destroy(),i=null})))}};t.Z=o},29502:function(e,t,n){n.d(t,{$:function(){return l},DD:function(){return m},E$:function(){return u},Gf:function(){return y},Lu:function(){return a},Yw:function(){return S},Zf:function(){return i},aK:function(){return s},bp:function(){return r},f5:function(){return h},jk:function(){return v},k4:function(){return d},n$:function(){return g},n6:function(){return c},nZ:function(){return b},w7:function(){return p},wH:function(){return f},wW:function(){return o}});var i='Your search did not return any results, please use the <a href="/">trip planner</a>.',a="Please turn on location services to search nearby stations and stops.",r="This trip may be subject to re-route.",s="An unexpected error has occurred, please try again later.",o="Sorry! There are no schedules available for your search",l="<b>"+o+', please use the <a href="/" target="_self">trip planner</a></b>',u="Ouch! Couldnâ€™t find anything relevant to",c='To find schedules, complete the "From" and "To" fields.',d="Please enter address again and select from the list provided.",f="Please correct the bus number and try again.",p="<strong>Your departure and arrival points are the same.</strong><br/><p>Please plan your journey again.</p>",h="<strong>Please select a travel mode to proceed. </strong>",m='<strong>No data available at this time. Please use the <a href="/" target="_self">trip planner</a> </strong>',v='Currently this service is not operating at this station. Please use the <a href="/">Trip Planner</a> to find an alternate route.',g="Next",y="Click Next to continue with your request.",b="We have information to help you.",S="If you have further comments"},99746:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(70538);n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={name:"modal",props:["id","template","title","closeButtonText","data","components","classes","closeFn","headerComponent","functions"],render:function(e){var t=this,n='<div data-backdrop="static" data-keyboard="true" tabindex="-1" class="modal fade" :id="id" role="dialog" :class="classes" ';return n+='><div class="modal-dialog"><div class="modal-content"><div class="modal-header">',t.headerComponent&&(n+='<div class="header-component">'+t.headerComponent+"</div>"),t.title&&(n+='<h4 class="modal-title">'+t.title+"</h4>"),n+='<button type="button" class="close" @click="close" aria-label="Click to close modal" @enter="close">Close</button></div>',n+='<div class="modal-body">',n+=t.template,n+='</div><div class="modal-footer">',n+='<button type="button" class="btn btn-default" @click="close" @enter="close">'+t.closeButtonText+"</button>",e({template:n+="</div></div></div></div>",components:t.components,data:function(){return t.data},created:function(){this.id=t.id,this.classes=t.classes},mounted:function(){jQuery(this.$el).modal({show:!0})},methods:r(r({},this.functions),{},{close:function(){var e=jQuery("#button-favorites");e.hasClass("trigmodal")&&(e.removeClass("trigmodal"),e.click()),jQuery(this.$el).modal("hide"),t.closeFn&&t.closeFn()}})})}},l=(0,n(51900).Z)(o,undefined,undefined,!1,null,null,null).exports,u={openModal:function(e,t,n,a,r,s,o,u,c,d,f){var p={props:{id:e,template:t,title:n,headerComponent:d,closeButtonText:a,data:r,functions:f,components:s,classes:o,closeFn:c}};return u?new i.Z({el:"#"+e,store:u,render:function(e){return e(l,p)}}):new i.Z({el:"#"+e,render:function(e){return e(l,p)}})}},c=u},5613:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(70538);n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={name:"modal",props:["id","template","title","closeButtonText","data","components","classes","closeFn","headerComponent","functions"],render:function(e){var t=this,n='<div data-backdrop="static" data-keyboard="true" tabindex="-1" class="modal fade modal-container" :id="id" role="dialog" :class="classes" ';return n+='><div class="modal-dialog"><div class="modal-content"><div class="modal-header">',t.headerComponent&&(n+='<div class="header-component">'+t.headerComponent+"</div>"),t.title&&(n+='<h1 class="mta-modal-title mta-font-bold mta-flex mta-flex-wrap mta-text-5xl smx:mta-text-4xl">'+t.title+"</h1>"),n+='<button type="button" class="close" @click="close" aria-label="Click to close modal" @enter="close">Close</button></div>',n+='<div class="modal-body">',n+=t.template,n+='</div><div class="modal-footer">',n+='<button type="button" class="btn btn-default" @click="close" @enter="close">'+t.closeButtonText+"</button>",e({template:n+="</div></div></div></div>",components:t.components,data:function(){return t.data},created:function(){this.id=t.id,this.classes=t.classes},mounted:function(){jQuery(this.$el).modal({show:!0})},methods:r(r({},this.functions),{},{close:function(){var e=jQuery("#button-favorites");e.hasClass("trigmodal")&&(e.removeClass("trigmodal"),e.click()),jQuery(this.$el).modal("hide"),t.closeFn&&t.closeFn()}})})}},l=(0,n(51900).Z)(o,undefined,undefined,!1,null,null,null).exports,u={openModal:function(e,t,n,a,r,s,o,u,c,d,f){var p={props:{id:e,template:t,title:n,headerComponent:d,closeButtonText:a,data:r,functions:f,components:s,classes:o,closeFn:c}};return u?new i.Z({el:"#"+e,store:u,render:function(e){return e(l,p)}}):new i.Z({el:"#"+e,render:function(e){return e(l,p)}})}},c=u},81812:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(70538);n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={name:"modal",props:["id","template","title","closeButtonText","data","components","classes","closeFn","headerComponent","functions"],render:function(e){var t=this,n='<div data-backdrop="static" data-keyboard="true" tabindex="-1" class="modal fade" :id="id" role="dialog" :class="classes" ';return n+='><div class="modal-dialog"><div class="modal-content"><div class="modal-header">',t.headerComponent&&(n+='<div class="header-component">'+t.headerComponent+"</div>"),t.title&&("No Active Alerts"==t.title||"On or Close"==t.title?t.data.busColor?n+='<div class="mta-modal-bus mta-pt-400"><h1 class="mta-modal-title mta-mt-200 mta-mx-200 mta-mb-100">'+t.title+"</h1></div>":t.data.lineId?(n+='<h1 class="mta-modal-title">'+t.title,n+='<span class="mta-ml-050"><span aria-label="Line '+t.data.lineId+'" class=" mta-line mta-line-'+t.data.lineId+'">',n+=t.data.lineId+"</span></span>",n+="</h1>"):n+='<h1 class="mta-modal-title mta-mt-200">'+t.title+"</h1>":"No Scheduled Service"===t.title?(n+='<h1 class="mta-modal-title mta-mt-200">No Scheduled Service',n+="</h1>"):t.data.lineId?(n+='<h1 class="mta-modal-title">Active Alerts for',n+='<span class="mta-ml-050"><span aria-label="Line '+t.data.lineId+'" class=" mta-line mta-line-'+t.data.lineId+'">',n+=t.data.lineId+"</span></span>",n+="</h1>"):t.data.busColor?(n+='<div class="mta-modal-bus"><h1 class="mta-modal-title mta-mt-200 mta-mx-200 mta-mb-100">Active Alerts for ',n+='<span aria-label="Bus '+t.data.route+'" class="Favorite Bus mta-bus-station"',n+=' style="border-left: 3px solid #'+t.data.busColor+'" ',n+=">"+t.data.route+"</span>",t.data.isExpressBus&&(n+='<span aria-label="Express bus" class="mta-express-tag mta-mx-100">EXPRESS</span>'),n+="</h1></div>"):t.data.routeName&&(n+='<h1 class="mta-modal-title mta-font-bold mta-flex mta-flex-wrap mta-text-5xl smx:mta-text-4xl">',n+='<span data-origin="realtime" class="mta-leading-mobile">Active Alerts for </span>',n+='<span aria-label="'+t.data.routeName+'" class="Favorite Rail mta-rail-color"',n+=' style="background-color: #'+t.data.routeColor+'" ',n+="></span>",n+='<span class="mta-leading-mobile"> ',n+=t.data.routeName,n+="</span></h1>")),n+='<button type="button" class="close" @click="close" aria-label="Click to close modal" @enter="close">Close</button></div>',n+='<div class="modal-body">',n+=t.template,n+='</div><div class="modal-footer">',n+='<button type="button" class="btn btn-default" @click="close" @enter="close">'+t.closeButtonText+"</button>",e({template:n+="</div></div></div></div>",components:t.components,data:function(){return t.data},created:function(){this.id=t.id,this.classes=t.classes},mounted:function(){jQuery(this.$el).modal({show:!0})},methods:r(r({},this.functions),{},{close:function(){var e=jQuery("#button-favorites");e.hasClass("trigmodal")&&(e.removeClass("trigmodal"),e.click()),jQuery(this.$el).modal("hide"),t.closeFn&&t.closeFn()}})})}},l=(0,n(51900).Z)(o,undefined,undefined,!1,null,null,null).exports,u={openModal:function(e,t,n,a,r,s,o,u,c,d,f){var p={props:{id:e,template:t,title:n,headerComponent:d,closeButtonText:a,data:r,functions:f,components:s,classes:o,closeFn:c}};return u?new i.Z({el:"#"+e,store:u,render:function(e){return e(l,p)}}):new i.Z({el:"#"+e,render:function(e){return e(l,p)}})}},c=u},4980:function(e,t,n){n.d(t,{Z:function(){return Rn}});var i={};n.r(i),n.d(i,{randomAction:function(){return o}});var a,r=n(70538),s=n(20629),o=function(e){e.commit},l=(n(74916),n(15306),n(56977),n(26833),n(21249),n(69826),n(41539),n(39714),n(38862),n(19601),n(57327),n(2707),n(54747),n(64765),n(73210),n(47042),n(4723),n(88674),n(35666),"CLEAR_STATION_DETAILS"),u="IS_TRIP_SAVED",c="SAVED_FEEDBACK_RESPONSE",d="SAVED_TRIP_LENGTH_CHECK",f="SAVED_TRIPS_DATA",p="SET_BUS_LIST_ERROR",h="SET_BUS_APPROACHING_ERROR",m="SET_BUS_STOP_ERROR",v="SET_BUS_ROUTES",g="SET_CURRENT_LOCATION",y="SET_USER_LOCATION",b="SET_DIRECTION_SELECTED",S="SET_DIRECTIONS_LIST",T="SET_SCHEDULE_BUS",w="SET_BUS_ROUTE_ID",E="SET_BUS_STOP_INFO",C="SET_BUS_DIRECTIONS",k="SET_BUS_STOP_MONITORING",L="SET_BUS_STATUS",I="SET_BUS_PROGRESS",O="SET_ERROR",D="SET_PLANNED_TRIP",x="SET_PLANNED_TRIP_ITINERARY_INDEX",A="SET_RAIL_LINES",V="SET_RAIL_STATION_DETAILS",P="SET_ROUTE_MODE_OPTION_ROUTES",M="SET_ROUTE_MODE_OPTIONS",R="SET_ROUTE_MODES",N="SET_SAVED_TRIP_COUNTDOWN_CLOCKS",F="SET_SAVED_TRIPS",j="SET_SCHEDULES_RESULT",Z="SET_STATION_EMPTY",B="SET_STATION_ID",U="SET_STATIONS_BY_BOROUGH",K="SET_STATIONS_LIST",Q="SET_SCHEDULES_LOADING",$="UPDATE_LIVE_ITINARARIES",G="SET_COMPONENT_ROUTES",W="SET_SUBWAY_LINES",H="SET_SUBWAY_STATION_DETAILS",Y="UPDATE_ROUTE_MODES",z="CLEAN_ALL_BUS_INFO",J="CLEAN_BUS_STOP_INFO",q="SET_TAB_OPEN",X="UPDATE_TP_SETTINGS",ee="NO_SCHEDULES_ERROR",te="EE_SET_SUBWAY_OUTAGES",ne="SET_SUBWAY_SERVICE_LINES",ie="EE_SET_LIRR_OUTAGES",ae="EE_SET_MNR_OUTAGES",re="EE_SET_ALL_STATIONS",se="EE_SET_STATIONS_STATUS",oe="EE_FILTER_PARAMS",le="EE_TYPE_FILTER_PARAMS",ue="SET_RAIL_TRIP_ID",ce="SET_RAIL_TRIP_DETAILS",de="SET_INITIAL_MAP_GEOMETRY",fe="SET_RAIL_TRIP_LOADING",pe="SET_SCHEDULE_STATIONS",he="SET_LOCATIONS",me="SET_NAME",ve="SET_EMAIL",ge="SET_SUBJECT",ye="SET_SERVICE",be="SET_CATEGORIES",Se="SET_ATTRIBUTES",_e="SET_FILE_ATTACHMENTS",Te="SET_COMPLETED_QUESTIONS",we="SET_CATEGORIES_QUESTIONNAIRE",Ee="SET_ATTRIBUTES_QUESTIONNAIRE",Ce="SET_CURRENT_QUESTION",ke="SET_SELECTED_SERVICE",Le="SET_SELECTED_FEEDBACK_TYPE",Ie="SET_PROGRESS_PERCENTAGE",Oe="SET_CURRENT_FORM_STEP",De="SET_SERVICE_LIST",xe="SET_FEEDBACK_LIST",Ae="SET_STEPS_COMPLETED",Ve="SET_INCIDENT_NUMBER",Pe="SET_COMMENT",Me="RESET_FORM",Re="SET_ATTRIBUTE_OPTIONS",Ne="SET_DEPENDENT_ATTR_OPTIONS",Fe="REMOVE_SUBJECT",je="HIDE_ON_ERROR",Ze="EE_IS_FUTURE",Be="SET_FUTURE_LOADING",Ue="EE_SET_FUTURE_OUTAGES",Ke="EE_HIDE_FILTERS",Qe="EE_SHOW_ALL",$e="EE_INIT_SUB",Ge="EE_ADA",We="SET_ORIGINAL",He=n(15625),Ye=n(87199),ze=n(9594),Je=n(94280);function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e,t,n,i,a,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,a)}var et,tt={getDirectionsAndStops:function(e,t){return(n=regeneratorRuntime.mark((function n(){var i,a,r,s,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,a=t.route,r=t.routeId,s=t.setDirections,i(w,r),n.prev=3,n.next=6,He.Z.getDirectionsAndStops(a.toUpperCase(),encodeURIComponent(r));case 6:return o=n.sent,i(S,o),s&&i(C,o.directions),n.next=11,He.Z.getTripsForRoute(r);case 11:l=n.sent,i(T,l),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),840!==n.t0.code&&i(p,n.t0);case 18:case"end":return n.stop()}}),n,null,[[3,15]])})),function(){var e=this,t=arguments;return new Promise((function(i,a){var r=n.apply(e,t);function s(e){Xe(r,i,a,s,o,"next",e)}function o(e){Xe(r,i,a,s,o,"throw",e)}s(void 0)}))})();var n},cleanBusInfo:function(e){(0,e.commit)(z)},setDirectionId:function(e,t){(0,e.commit)(b,t)},setCurrentLocation:function(e,t){(0,e.commit)(y,t)},getBusApproaching:function(e,t){var n=e.commit,i=e.state;if(i.routeId){var a=i.routeId.indexOf("-")>-1?i.routeId.replace("-","%2"):i.routeId;He.Z.getBusApproaching(encodeURIComponent(a),encodeURIComponent(t)).then((function(e){i.busApproachingError.message&&n(h,{message:null}),i.currentLocation?ze.Z.getNearbyStops({lat:i.currentLocation.lat,lon:i.currentLocation.lon,timeRange:84600,radius:402.32.toFixed(2),mode:i.currentLocation.mode}).then((function(i){n(y,null),n(L,{busStatus:e,nearbyStops:i,agency:t})})):n(L,{busStatus:e,nearbyStops:null,agency:t})})).catch((function(e){return n(h,e)}))}},setBusStop:function(e,t){(0,e.commit)(E,t)},getBusStopMonitoring:function(e,t){var n=e.commit,i=e.state;He.Z.getBusStopMonitoring(i.routeId,t,encodeURIComponent(i.agency)).then((function(e){n(k,e),n(I,e.MonitoredStopVisit)})).catch((function(e){return n(m,e)}))},cleanBusStopInfo:function(e){(0,e.commit)(J)},setTabOpen:function(e,t){(0,e.commit)(q,t)},mapStops:function(e){return Object.values(e)}},nt=(qe(a={},S,(function(e,t){e.busStopsPolyline=t.polylines;var n={};t.directions.map((function(e){n[e.id]=[],e.stopIds.map((function(i){var a=t.stops.find((function(e){return e.id===i}));a&&(a.lastUpdated=(new Date).toString(),n[e.id].push(a))}))})),e.busStops=n})),qe(a,C,(function(e,t){e.busDirections=t})),qe(a,z,(function(e){e.agency=null,e.routeId=null,e.busDirections=null,e.busListError={message:null},e.busApproachingError={message:null},e.busStopsError={message:null},e.noScheduleMessage={0:!1,1:!1},e.busStops=[],e.busStopInfo={},e.directionSelected=null,e.busStopMonitoring=null,e.openTab={},e.busIconsMap=[]})),qe(a,J,(function(e){e.busStopMonitoring=null,e.busStopInfo={}})),qe(a,I,(function(e,t){e.busProgress=t})),qe(a,b,(function(e,t){e.directionSelected=t})),qe(a,y,(function(e,t){e.currentLocation=t})),qe(a,p,(function(e,t){e.busListError=t})),qe(a,h,(function(e,t){e.busApproachingError=t})),qe(a,m,(function(e,t){e.busStopsError=t})),qe(a,L,(function(e,t){var n=t.busStatus,i=t.nearbyStops,a=t.agency,r=Je.Z.getNearbyStops(i,e.busStops),s=JSON.parse(JSON.stringify(e.busStops));e.agency=a,e.busStops=Je.Z.mapLiveBuses(s,n,e.directionSelected,r),e.busIconsMap=Je.Z.getPositionLiveBuses(n,e.busStops),e.noScheduleMessage=Je.Z.setScheduledMsg(Object.assign({},e.noScheduleMessage),e.busIconsMap)})),qe(a,E,(function(e,t){e.busStopInfo=t})),qe(a,k,(function(e,t){var n=t.MonitoredStopVisit;e.currentTime=t.currentTime,e.busStopMonitoring=[];var i=n.filter((function(t){return Ye.Z.monitoredList(t).direction===e.directionSelected})).sort((function(e,t){return(e=Ye.Z.monitoredList(e).lineName.toUpperCase())>(t=Ye.Z.monitoredList(t).lineName.toUpperCase())?1:-1})).reduce((function(e,t){var n=Ye.Z.monitoredList(t).lineName;return e[n]=e[n]||[],e[n].push(t),e}),{});Object.values(i).forEach((function(t){var n=t.map((function(t){var n=Ye.Z.monitoredList(t),i=new Date(e.currentTime).getTime(),a=new Date(n.originDepTime).getTime();switch(n.originDepTime=new Date(n.originDepTime).toLocaleTimeString("en-us",{hour:"2-digit",minute:"2-digit"}),"invalid date"===n.originDepTime.toLowerCase()&&(n.originDepTime="--"),n.progress){case"layover":i>a?(n.scheduled="at terminal",n.arrivalTime=null):n.scheduled="at terminal, scheduled to depart at ".concat(n.originDepTime);break;case"layover,prevTrip":n.scheduled="scheduled to depart at ".concat(n.originDepTime),n.arrivalTime=null;break;case"prevTrip":i>a?n.scheduled="+ scheduled layover at terminal":(n.scheduled="+layover, scheduled to depart at ".concat(n.originDepTime),n.arrivalTime=null)}var r=n.destinationName.toLowerCase();return n.isLimited=r.search(/limited|ltd/)>-1,n.destinationName=(n.isLimited?r.replace(/limited|ltd/,""):r).trim(),n})).sort((function(e,t){var n=parseFloat(e.status.match(/[\d\.]+/)),i=parseFloat(t.status.match(/[\d\.]+/));return(n=e.status.match(/miles/)?10*n:n)-(i=t.status.match(/miles/)?10*i:i)})).slice(0,3),i=[],a=[];n.forEach((function(e){e.isLimited?a.push(e):i.push(e)}));var r=n[0].lineName,s=Ye.Z.mapRegularLimitedStops(r,i,!1),o=Ye.Z.mapRegularLimitedStops(r,a,!0);s.stops.length&&e.busStopMonitoring.push(s),o.stops.length&&e.busStopMonitoring.push(o)}))})),qe(a,q,(function(e,t){e.openTab={id:t}})),qe(a,T,(function(e,t){for(var n in t)e.noScheduleMessage[n]=t[n]&&!t[n].length})),qe(a,w,(function(e,t){e.routeId=t})),a),it={state:{agency:null,routeId:null,busDirections:null,busListError:{message:null},busApproachingError:{message:null},busStopsError:{message:null},busStops:[],busStopsPolyline:[],currentLocation:null,busStopInfo:{},directionSelected:null,busStopMonitoring:null,openTab:{},noScheduleMessage:{0:!1,1:!1},busIconsMap:[],currentTime:null,busProgress:null},getters:{busDirections:function(e){return e.busDirections},busStops:function(e){return e.busStops},directionSelected:function(e){return e.directionSelected},busStopsPolyline:function(e){return e.busStopsPolyline},currentLocation:function(e){return e.currentLocation},busStopInfo:function(e){return e.busStopInfo},busStopMonitoring:function(e){return e.busStopMonitoring},openTab:function(e){return e.openTab},busListError:function(e){return e.busListError},busApproachingError:function(e){return e.busApproachingError},busStopsError:function(e){return e.busStopsError},noScheduleMessage:function(e){return e.noScheduleMessage},busIconsMap:function(e){return e.busIconsMap},busProgress:function(e){return e.busProgress}},actions:tt,mutations:nt};function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt,st={getStopDetails:function(e,t){var n=e.commit,i=e.state,a=t.stationId,r=t.onCreation;i.countdownClocksLoading=!0,r&&n(Z),ze.Z.getCountdownClocks({stops:a},"service-status").then((function(e){n(H,e),i.countdownClocksLoading=!1}),(function(e){i.savedTripCountdownClocksError=e,i.countdownClocksLoading=!1}))},setError:function(e){(0,e.commit)(O)},getStationDetails:function(e,t){var n=e.commit,i=e.state,a=t.stationId;t.initialLoading&&(i.countdownClocksLoading=!0,n(l)),ze.Z.getNearbyStops({stops:a,timeRange:84600}).then((function(e){e&&e.length&&e[0].lines?n(V,e):i.countdownClockAPIError={reason:"isDataEmpty"},i.countdownClocksLoading=!1})).catch((function(e){i.countdownClockAPIError=e,i.countdownClocksLoading=!1}))}},ot=(at(et={},H,(function(e,t){if(t){if(void 0!==t.message&&t.message.message&&"ERROR"===t.message.messageType)return void(e.error=t.message.message);e.countdownClocks=t}})),at(et,V,(function(e,t){t&&t.length&&(e.stop=t[0],e.lines=t[0].lines)})),at(et,Z,(function(e){e.error=null,e.countdownClocks=null})),at(et,O,(function(e){e.error=!0})),at(et,l,(function(e){e.stop={},e.lines={}})),et),lt={state:{stop:{},lines:{},error:null,countdownClocks:null,countdownClockAPIError:null,countdownClocksLoading:!1},getters:{error:function(e){return e.error},lines:function(e){return e.lines},stop:function(e){return e.stop},countdownClocks:function(e){return e.countdownClocks},countdownClockAPIError:function(e){return e.countdownClockAPIError},countdownClocksLoading:function(e){return e.countdownClocksLoading}},actions:st,mutations:ot},ut=(n(68309),n(23123),n(26699),n(32023),n(92222),n(34553),n(40561),n(47941),n(82526),n(38880),n(49337),n(41817),n(32165),n(66992),n(78783),n(33948),n(91038),n(77601),n(59892)),ct=n(58773),dt=n(77892),ft=n(41339),pt=n(61328);function ht(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt,St=function(e,t){var n=[],i=t.filter((function(e){var t=!1;try{if(e.alert.active_period&&e.alert["transit_realtime.mercury_alert"]&&e.alert["transit_realtime.mercury_alert"].alert_type){var n=e.alert["transit_realtime.mercury_alert"].hasOwnProperty("display_before_active"),i=Math.round(Date.now()/1e3);e.id.includes("planned_work")&&!n?t=!1:e.alert.active_period.forEach((function(a){if(a.start&&!t){var r=a.start;n&&(r-=e.alert["transit_realtime.mercury_alert"].display_before_active),i>r&&(t=!0),a.end&&i>a.end&&(t=!1)}}))}}catch(e){console.log(e)}return t}));return e.forEach((function(e){var t="SUBWAY"===e.mode?e.name:e.shortName,a=[],r=[],s=!0,o=[];"RAIL"===e.mode&&(t=e.routeId.includes("NJT")?e.routeId.replace("_",":"):e.routeId.split("_")[1]),"BUS"===e.mode&&(t=e.id.split(":")[1]),t=t.toLowerCase(),a.push(t),"BUS"===e.mode&&(a.push("".concat(t,"-ltd")),s=!1),i.forEach((function(t){t.alert&&t.alert.informed_entity&&t.alert.informed_entity.forEach((function(n){var i=null,l=null,u=1,c=!0;if(n.route_id&&(i=n.route_id),n.agency_id&&(l=n.agency_id),n.trip&&n.trip.route_id&&(i=n.trip.route_id,u=n.trip.direction_id),s&&(c=l==e.agency),i=i?i.toLowerCase():"",a.includes(i)&&c&&!o.includes(t.id))try{var d=function(e){var t="No Status Summary";return e.alert["transit_realtime.mercury_alert"]&&(t=e.alert["transit_realtime.mercury_alert"].alert_type),t}(t),f=function(e){var t=!1;if(e.alert.description_text){if(e.alert.description_text.translation.forEach((function(e){"en-html"===e.language&&(t=e.text)})),t)return t;if(t||e.alert.description_text.translation.forEach((function(e){"en"===e.language&&(t=e.text)})),t)return t;if(t||e.alert.description_text.translation.forEach((function(e){""===e.language&&(t=e.text)})),t)return t}return t}(t),p=function(e){var t=!1;if(e.alert.header_text){if(e.alert.header_text.translation.forEach((function(e){"en-html"===e.language&&(t=e.text)})),t)return t;if(e.alert.header_text.translation.forEach((function(e){"en"===e.language&&(t=e.text)})),t)return t;if(e.alert.header_text.translation.forEach((function(e){""===e.language&&(t=e.text)})),t)return t}return t}(t),h=function(e){var t=-10;return e["transit_realtime.mercury_entity_selector"]&&e["transit_realtime.mercury_entity_selector"].sort_order&&(t=(t=e["transit_realtime.mercury_entity_selector"].sort_order.split(":"))[2]?1*t[2]:100),t}(n),m=function(e){var t=null,n=null,i=null;if(e.alert.active_period){var a=Math.round(Date.now()/1e3),r=!1;e.alert.active_period.forEach((function(e){!e.start||(a>e.start&&(r=e),e.end&&a>e.end&&(r=!1))})),t=r.start?new Date(1e3*r.start).toISOString():null,n=r.end?new Date(1e3*r.end).toISOString():null}return e.alert["transit_realtime.mercury_alert"]&&(i=new Date(1e3*e.alert["transit_realtime.mercury_alert"].created_at).toISOString()),{startDate:t,endDate:n,creationDate:i}}(t),v=gt({id:t.id,statusSummary:d,statusDescription:f,statusTitle:p,priority:h,direction:u,originalStatus:t},m);r.push(v),o.push(t.id)}catch(e){console.log(t.id,e)}}))})),r.length>0&&(e.statusDetails=r),n.push(e)})),n},_t={getAllServiceStatus:function(e,t){var n=e.commit,i=e.state;i.serviceStatusLoading=!t,(0,ft.Q)(t).then((function(e){var a=e;(0,dt._)(t).then((function(e){var t={busRoutes:St(a.busRoutes,e),railLines:St(a.railLines,e),subwayLines:St(a.subwayLines,e)};n(v,t),n(A,t),n(W,t),i.serviceStatusLoading=!1})).catch((function(e){i.lineListError=e,i.serviceStatusLoading=!1}))}))},getRouteServiceStatus:function(e,t){var n=e.commit,i={},a=function(e){return e.reduce((function(e,t){return e.find((function(e){return e.id===t.id}))?e:e.concat([t])}),[])};(0,ft.Q)(new Date).then((function(e){return[].concat(ht(e.railLines),ht(e.busRoutes),ht(e.subwayLines),ht(pt.DH),ht(pt.gA)).filter((function(e){var n=e.id;return"MTASBWY"===e.agencyId&&(n="MTASBWY:".concat(n)),"MTABT"===e.agency&&(n="".concat(e.shortName)),t.routes.includes(n)}))})).then((function(e){var r=e.filter((function(e){return"BT"===e.mode}));e.length>0&&(0,dt._)(new Date).then((function(s){var o=St(e,s);(o=a(o)).forEach((function(e){e.statusDetails&&e.statusDetails.length>1&&e.statusDetails.sort((function(e,t){return t.priority-e.priority}))})),i[t.key]=o,n(G,i),r&&(0,ct.E)().then((function(e){var r=function(e,t){var n=[];return e.forEach((function(e){"BT"===e.mode&&t.forEach((function(t){t.name[0]===e.shortName&&"No Active Alerts"!==t.status[0]&&(e.statusDetails=[{id:"BT:".concat(Math.random()),statusSummary:t.status[0],statusDescription:t.text[0],statusTitle:t.status[0],priority:100}])})),n.push(e)})),n}(o,e);r=a(r),i[t.key]=r,n(G,i)}))})).reject((function(e){console.log(e)}))}))},getSubwayLineGroups:function(){}