!function(){"use strict";require.config({urlArgs:"1651136323",paths:{uuid:"lib/uuid/uuid",jquery:"lib/jquery/jquery-2.1.1.min","jquery-pjax":"lib/jquery-pjax/jquery-pjax-1.9.6a","jquery-ui":"lib/jquery-ui/jquery-ui-1.12.1.custom.2",vue:"https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min","vue-dev":"https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue",machina:"lib/machina/machina-0.3.8.min",lodash:"lib/lodash/lodash-2.4.1.min",bootstrap:"lib/bootstrap/bootstrap-3.3.5.min","skiplink-polyfill":"lib/skiplink-polyfill/skiplink-polyfill",highcharts:"lib/highcharts/highcharts-5.0.8","highcharts-more":"lib/highcharts/highcharts-more-5.0.8","highcharts-solid-gauge":"lib/highcharts/solid-gauge-5.0.8",lottie:"https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.3/lottie.min","jquery-cookie":"lib/jquery-cookie/jquery.cookie",redactor:"lib/redactor/redactor.min","spotify-remote-control-bridge":"player/providers/spotify/spotify-bridge","youtube-iframe-api":"https://www.youtube.com/iframe_api#",yad:"https://s.yimg.com/uq/syndication/yad","ba-debug":"lib/ba-debug/ba-debug-0.4.min",masonry:"lib/masonry/masonry-3.2.2.pkgd.min","cbsi-player":"lib/cbsi-player/cbsi-player-2.4.0.min","cbsi-player-html5":"https://vidtech.cbsinteractive.com/uvpjs/2.9.1/CBSI-PLAYER","searchlinks-library":"https://contextual.media.net/dmedianet.js?cid=8CU1M38OA","jquery-popup-overlay":"lib/jquery-popup-overlay/jquery.popupoverlay.2.1.1-lastfm.2","es6-promise":"lib/es6-promise/es6-promise.3.0.2",modernizr:"lib/modernizr/modernizr-custom","set-immediate":"lib/set-immediate/set-immediate-1.0.4","jquery-onscreen":"lib/jquery-onscreen/jquery.onscreen.min","ua-parser":"lib/ua-parser/ua-parser-0.7.10.min","index-exchange":"https://js-sec.indexww.com/ht/ls-lastfm",ima:"https://imasdk.googleapis.com/js/sdkloader/ima3","jquery-serialize-object":"lib/jquery-serialize-object/jquery-serialize-object-2.5.0.min","restart-animation":"lib/restart-animation/restart-animation",whatInput:"lib/what-input/what-input-3.0.0",store:"lib/store/store.min",canvgModule:"lib/canvg/canvg",stackblur:"lib/canvg/StackBlur",rgbcolor:"lib/canvg/rgbcolor","svg-todataurl":"lib/svg-todataurl/svg_todataurl","svg-js":"lib/svg-js/svg.2.3.6",base64:"lib/svg-todataurl/base64","facebook-sdk":"//connect.facebook.net/en_US/sdk","rasterize-html":"lib/rasterize-html/rasterizeHTML-1.2.4",html2canvas:"https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.7/dist/html2canvas.min","twitter-text":"lib/twitter-text/twitter-text-3.1.0.min",mustache:"lib/mustache/mustache-2.3.0.min","url-search-params":"lib/url-search-params/url-search-params.0.8.0",sticky:"lib/sticky-js/sticky.7abb16d8f06dad048fd4d397b160f8a150e522f4",rgbquant:"lib/rgbquant/rgbquant.1.1.2","moat-header":"https://z.moatads.com/cbsprebidheader506831276743/yield",jss:"lib/jss/jss.0.6",autosize:"lib/autosize/autosize.4.0.2","focus-visible":"lib/focus-visible/focus-visible-4.1.5",dragula:"lib/dragula/dragula.min","dragon-drop":"lib/dragon-drop/dragon-drop.min","dom-autoscroller":"lib/dom-autoscroller/dom-autoscroller.min","intersection-observer":"lib/intersection-observer/intersection-observer.0.7.0","apple-music-kit":"https://js-cdn.music.apple.com/musickit/v1/musickit",optanon:"https://production-cmp.isgprivacy.cbsi.com/dist/optanon-v1.1.0",shepherd:"https://cdn.jsdelivr.net/npm/shepherd.js@8.2.3/dist/js/shepherd",slick:"https://cdn.jsdelivr.net/jquery.slick/1.5.5/slick.min","vue-loader":"vue-loader"},map:{"*":{jquery:"lib-shim/jquery"},"lib-shim/jquery":{jquery:"jquery"},"components/dropdown-position":{"lib/jss/jss.0.6":"jss"}},shim:{"jquery-pjax":["jquery"],bootstrap:["jquery"],"jquery-ui":["jquery"],highcharts:{deps:["jquery"],exports:"Highcharts"},html2canvas:{exports:"html2canvas"},"highcharts-more":{deps:["highcharts"]},"highcharts-solid-gauge":{deps:["highcharts-more"]},"jquery-cookie":["jquery"],"jquery-popup-overlay":["jquery"],redactor:["jquery"],"spotify-remote-control-bridge":{exports:"Spotify"},"ba-debug":{exports:"debug"},modernizr:{exports:"Modernizr"},rgbquant:{exports:"RgbQuant"},jss:{exports:"jss"}}})}(),define("require-config",function(){}),!function(){function Zt(t,e,i){i=(i||0)-1;for(var n=t?t.length:0;++i<n;)if(t[i]===e)return i;return-1}function te(t,e){var i=typeof e;return t=t.l,"boolean"==i||null==e?t[e]?0:-1:(t=(t=t[i="number"!=i&&"string"!=i?"object":i])&&t["number"==i?e:ce+e],"object"==i?t&&-1<Zt(t,e)?0:-1:t?0:-1)}function s(t){var e,i=this.l,n=typeof t;"boolean"==n||null==t?i[t]=!0:(e="number"==(n="number"!=n&&"string"!=n?"object":n)?t:ce+t,i=i[n]||(i[n]={}),"object"==n?(i[e]||(i[e]=[])).push(t):i[e]=!0)}function ee(t){return t.charCodeAt(0)}function Pe(t,e){for(var i=t.m,n=e.m,o=-1,r=i.length;++o<r;){var s=i[o],a=n[o];if(s!==a){if(a<s||void 0===s)return 1;if(s<a||void 0===a)return-1}}return t.n-e.n}function ie(t){var e=-1,i=t.length,n=t[0],o=t[i/2|0],r=t[i-1];if(n&&"object"==typeof n&&o&&"object"==typeof o&&r&&"object"==typeof r)return!1;for((n=oe()).false=n.null=n.true=n.undefined=!1,(o=oe()).k=t,o.l=n,o.push=s;++e<i;)o.push(t[e]);return o}function je(t){return"\\"+a[t]}function ne(){return e.pop()||[]}function oe(){return i.pop()||{k:null,l:null,m:null,false:!1,n:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,o:null}}function re(t){t.length=0,e.length<n&&e.push(t)}function se(t){var e=t.l;e&&se(e),t.k=t.l=t.m=t.object=t.number=t.string=t.o=null,i.length<n&&i.push(t)}function ae(t,e,i){var n=-1;i=(i=void 0===i?t?t.length:0:i)-(e=e||0)||0;for(var o=Array(i<0?0:i);++n<i;)o[n]=t[e+n];return o}var le,e=[],i=[],Le=0,ce=+new Date+"",ue=75,n=40,he=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",_e=/\b__p\+='';/g,Ie=/\b(__p\+=)''\+/g,Oe=/(__e\(.*?\)|\b__t\))\+'';/g,De=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Re=/\w*$/,Ne=/^\s*function[ \n\r\t]+\w/,de=/<%=([\s\S]+?)%>/g,qe=RegExp("^["+he+"]*0+(?=.$)"),pe=/($^)/,fe=/\bthis\b/,ze=/['\n\r\t\u2028\u2029\\]/g,He="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),ge="[object Arguments]",me="[object Array]",ye="[object Boolean]",ve="[object Date]",be="[object Function]",xe="[object Number]",we="[object Object]",ke="[object RegExp]",Te="[object String]",Ae={},Ce=(Ae[be]=!1,{leading:!(Ae[ge]=Ae[me]=Ae[ye]=Ae[ve]=Ae[xe]=Ae[we]=Ae[ke]=Ae[Te]=!0),maxWait:0,trailing:!1}),$e={configurable:!1,enumerable:!1,value:null,writable:!1},Se={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},a={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Me=Se[typeof window]&&window||this,t=Se[typeof exports]&&exports&&!exports.nodeType&&exports,o=Se[typeof module]&&module&&!module.nodeType&&module,l=o&&o.exports===t&&t,r=Se[typeof global]&&global,Ee=(!r||r.global!==r&&r.window!==r||(Me=r),function R(i){function d(t,e,i){if(!t||!Se[typeof t])return t;e=e&&void 0===i?e:g(e,i,3);for(var n=-1,o=Se[typeof t]&&O(t),r=o?o.length:0;++n<r&&!1!==e(t[i=o[n]],i,t););return t}function p(t,e,i){if(!t||!Se[typeof t])return t;for(var n in e=e&&void 0===i?e:g(e,i,3),t)if(!1===e(t[n],n,t))break;return t}function N(t,e,i){var n,o,r=t;if(!t)return r;for(var s=arguments,a=0,l="number"==typeof i?2:s.length;++a<l;)if((o=s[a])&&Se[typeof o])for(var c=-1,u=Se[typeof o]&&O(o),h=u?u.length:0;++c<h;)void 0===r[n=u[c]]&&(r[n]=o[n]);return r}function q(t,e,i){var n,o,r=t;if(!t)return r;var s,a=arguments,l=0,c="number"==typeof i?2:a.length;for(3<c&&"function"==typeof a[c-2]?s=g(a[--c-1],a[c--],2):2<c&&"function"==typeof a[c-1]&&(s=a[--c]);++l<c;)if((o=a[l])&&Se[typeof o])for(var u=-1,h=Se[typeof o]&&O(o),d=h?h.length:0;++u<d;)r[n=h[u]]=s?s(r[n],o[n]):o[n];return r}function u(t){return t&&"object"==typeof t&&!I(t)&&E.call(t,"__wrapped__")?t:new l(t)}function l(t,e){this.__chain__=!!e,this.__wrapped__=t}function z(t,i,n,o,r){if(n){var s=n(t);if(void 0!==s)return s}if(!x(t))return t;var e=M.call(t);if(!Ae[e])return t;var a=_[e];switch(e){case ye:case ve:return new a(+t);case xe:case Te:return new a(t);case ke:return(s=a(t.source,Re.exec(t))).lastIndex=t.lastIndex,s}if(e=I(t),i){var l=!o;o=o||ne(),r=r||ne();for(var c=o.length;c--;)if(o[c]==t)return r[c];s=e?a(t.length):{}}else s=e?ae(t):q({},t);return e&&(E.call(t,"index")&&(s.index=t.index),E.call(t,"input")&&(s.input=t.input)),i&&(o.push(t),r.push(s),(e?w:d)(t,function(t,e){s[e]=z(t,i,n,o,r)}),l&&(re(o),re(r))),s}function f(t){return x(t)?Rt(t):{}}function g(o,r,t){if("function"!=typeof o)return vt;if(void 0===r||!("prototype"in o))return o;var e,i=o.__bindData__;if(void 0!==i||(i=(i=Ft.funcNames?!o.name:i)||!Ft.funcDecomp)||(e=_t.call(o),(i=Ft.funcNames?i:!Ne.test(e))||(i=fe.test(e),Ut(o,i))),!1===i||!0!==i&&1&i[1])return o;switch(t){case 1:return function(t){return o.call(r,t)};case 2:return function(t,e){return o.call(r,t,e)};case 3:return function(t,e,i){return o.call(r,t,e,i)};case 4:return function(t,e,i,n){return o.call(r,t,e,i,n)}}return mt(o,r)}function H(t){function i(){var t,e=c?a:this;return r&&(t=ae(r),P.apply(t,arguments)),(s||h)&&(t=t||ae(arguments),s&&P.apply(t,s),h&&t.length<l)?(o|=16,H([n,d?o:-4&o,t,null,a,l])):(t=t||arguments,u&&(n=e[p]),this instanceof i?(e=f(n.prototype),x(t=n.apply(e,t))?t:e):n.apply(e,t))}var n=t[0],o=t[1],r=t[2],s=t[3],a=t[4],l=t[5],c=1&o,u=2&o,h=4&o,d=8&o,p=n;return Ut(i,t),i}function c(t,e){var i,n=-1,o=G(),r=t?t.length:0,s=ue<=r&&o===Zt,a=[];for(s&&((i=ie(e))?(o=te,e=i):s=!1);++n<r;)o(e,i=t[n])<0&&a.push(i);return s&&se(e),a}function h(t,e,i,n){n=(n||0)-1;for(var o=t?t.length:0,r=[];++n<o;){var s=t[n];if(s&&"object"==typeof s&&"number"==typeof s.length&&(I(s)||X(s))){var a=-1,l=(s=e?s:h(s,e,i)).length,c=r.length;for(r.length+=l;++a<l;)r[c++]=s[a]}else i||r.push(s)}return r}function m(n,t,o,r,s,a){if(o&&void 0!==(h=o(n,t)))return!!h;if(n===t)return 0!==n||1/n==1/t;if(n==n&&!(n&&Se[typeof n]||t&&Se[typeof t]))return!1;if(null==n||null==t)return n===t;var e=M.call(n),i=M.call(t);if((e=e==ge?we:e)!=(i=i==ge?we:i))return!1;switch(e){case ye:case ve:return+n==+t;case xe:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case ke:case Te:return n==C(t)}if(!(i=e==me)){var l=E.call(n,"__wrapped__"),c=E.call(t,"__wrapped__");if(l||c)return m(l?n.__wrapped__:n,c?t.__wrapped__:t,o,r,s,a);if(e!=we)return!1;if((e=n.constructor)!=(l=t.constructor)&&!(b(e)&&e instanceof e&&b(l)&&l instanceof l)&&"constructor"in n&&"constructor"in t)return!1}for(e=!s,s=s||ne(),a=a||ne(),l=s.length;l--;)if(s[l]==n)return a[l]==t;var u=0,h=!0;if(s.push(n),a.push(t),i){if(l=n.length,u=t.length,(h=u==l)||r)for(;u--;)if(i=l,c=t[u],r)for(;i--&&!(h=m(n[i],c,o,r,s,a)););else if(!(h=m(n[u],c,o,r,s,a)))break}else p(t,function(t,e,i){return E.call(i,e)?(u++,h=E.call(n,e)&&m(n[e],t,o,r,s,a)):void 0}),h&&!r&&p(n,function(t,e,i){return E.call(i,e)?h=-1<--u:void 0});return s.pop(),a.pop(),e&&(re(s),re(a)),h}function $(t,e){return t+Lt(Bt()*(e-t+1))}function B(t,e,i){var n=-1,o=G(),r=t?t.length:0,s=[],a=!e&&ue<=r&&o===Zt,l=i||a?ne():s;for(a&&(l=ie(l),o=te);++n<r;){var c=t[n],u=i?i(c,n,t):c;(e?!n||l[l.length-1]!==u:o(l,u)<0)&&((i||a)&&l.push(u),s.push(c))}return a?(re(l.k),se(l)):i&&re(l),s}function F(s){return function(t,n,e){var o={},i=(n=u.createCallback(n,e,3),e=-1,t?t.length:0);if("number"==typeof i)for(;++e<i;){var r=t[e];s(o,r,n(r,e,t),t)}else d(t,function(t,e,i){s(o,t,n(t,e,i),i)});return o}}function y(t,e,i,n,o,r){var s=1&e,a=4&e,l=16&e,c=32&e;if(!(2&e||b(t)))throw new S;l&&!i.length&&(e&=-17,l=i=!1),c&&!n.length&&(e&=-33,c=n=!1);var u=t&&t.__bindData__;return u&&!0!==u?((u=ae(u))[2]&&(u[2]=ae(u[2])),u[3]&&(u[3]=ae(u[3])),!s||1&u[1]||(u[4]=o),!s&&1&u[1]&&(e|=8),!a||4&u[1]||(u[5]=r),l&&P.apply(u[2]||(u[2]=[]),i),c&&Ot.apply(u[3]||(u[3]=[]),n),u[1]|=e,y.apply(null,u)):(1==e||17===e?function(t){function i(){var t,e;return o&&(e=ae(o),P.apply(e,arguments)),this instanceof i?(t=f(n.prototype),x(e=n.apply(t,e||arguments))?e:t):n.apply(r,e||arguments)}var n=t[0],o=t[2],r=t[4];return Ut(i,t),i}:H)([t,e,i,n,o,r])}function W(t){return Vt[t]}function G(){var t=(t=u.indexOf)===ut?Zt:t;return t}function n(t){return"function"==typeof t&&Et.test(t)}function U(t){var e,i;return!(!t||M.call(t)!=we||b(e=t.constructor)&&!(e instanceof e))&&(p(t,function(t,e){i=e}),void 0===i||E.call(t,i))}function V(t){return Xt[t]}function X(t){return t&&"object"==typeof t&&"number"==typeof t.length&&M.call(t)==ge||!1}function Y(t,e,i){var n=O(t),o=n.length;for(e=g(e,i,3);o--&&!1!==e(t[i=n[o]],i,t););return t}function v(t){var i=[];return p(t,function(t,e){b(t)&&i.push(e)}),i.sort()}function Q(t){for(var e=-1,i=O(t),n=i.length,o={};++e<n;){var r=i[e];o[t[r]]=r}return o}function b(t){return"function"==typeof t}function x(t){return!(!t||!Se[typeof t])}function K(t){return"number"==typeof t||t&&"object"==typeof t&&M.call(t)==xe||!1}function a(t){return"string"==typeof t||t&&"object"==typeof t&&M.call(t)==Te||!1}function J(t){for(var e=-1,i=O(t),n=i.length,o=T(n);++e<n;)o[e]=t[i[e]];return o}function Z(t,e,i){var n=-1,o=G(),r=t?t.length:0,s=!1;return i=(i<0?L(0,r+i):i)||0,I(t)?s=-1<o(t,e,i):"number"==typeof r?s=-1<(a(t)?t.indexOf(e,i):o(t,e,i)):d(t,function(t){return++n<i?void 0:!(s=t===e)}),s}function tt(t,n,e){var o=!0,i=(n=u.createCallback(n,e,3),e=-1,t?t.length:0);if("number"==typeof i)for(;++e<i&&(o=!!n(t[e],e,t)););else d(t,function(t,e,i){return o=!!n(t,e,i)});return o}function et(t,n,e){var o=[],i=(n=u.createCallback(n,e,3),e=-1,t?t.length:0);if("number"==typeof i)for(;++e<i;){var r=t[e];n(r,e,t)&&o.push(r)}else d(t,function(t,e,i){n(t,e,i)&&o.push(t)});return o}function it(t,n,e){n=u.createCallback(n,e,3),e=-1;var o,i=t?t.length:0;if("number"!=typeof i)return d(t,function(t,e,i){return n(t,e,i)?(o=t,!1):void 0}),o;for(;++e<i;){var r=t[e];if(n(r,e,t))return r}}function w(t,e,i){var n=-1,o=t?t.length:0;if(e=e&&void 0===i?e:g(e,i,3),"number"==typeof o)for(;++n<o&&!1!==e(t[n],n,t););else d(t,e);return t}function nt(t,n,e){var o=t?t.length:0;if(n=n&&void 0===e?n:g(n,e,3),"number"==typeof o)for(;o--&&!1!==n(t[o],o,t););else{var r=O(t),o=r.length;d(t,function(t,e,i){return e=r?r[--o]:--o,n(i[e],e,i)})}return t}function k(t,n,e){var o=-1,i=t?t.length:0;if(n=u.createCallback(n,e,3),"number"==typeof i)for(var r=T(i);++o<i;)r[o]=n(t[o],o,t);else r=[],d(t,function(t,e,i){r[++o]=n(t,e,i)});return r}function ot(t,n,e){var o=-1/0,r=o;if(null==(n="function"!=typeof n&&e&&e[n]===t?null:n)&&I(t)){e=-1;for(var i=t.length;++e<i;){var s=t[e];r<s&&(r=s)}}else n=null==n&&a(t)?ee:u.createCallback(n,e,3),w(t,function(t,e,i){e=n(t,e,i),o<e&&(o=e,r=t)});return r}function rt(t,n,o,e){if(!t)return o;var r=arguments.length<3,i=(n=u.createCallback(n,e,4),-1),s=t.length;if("number"==typeof s)for(r&&(o=t[++i]);++i<s;)o=n(o,t[i],i,t);else d(t,function(t,e,i){o=r?(r=!1,t):n(o,t,e,i)});return o}function st(t,n,o,e){var r=arguments.length<3;return n=u.createCallback(n,e,4),nt(t,function(t,e,i){o=r?(r=!1,t):n(o,t,e,i)}),o}function at(t){var i=-1,e=t?t.length:0,n=T("number"==typeof e?e:0);return w(t,function(t){var e=$(0,++i);n[i]=n[e],n[e]=t}),n}function lt(t,n,e){n=u.createCallback(n,e,3),e=-1;var o,i=t?t.length:0;if("number"==typeof i)for(;++e<i&&!(o=n(t[e],e,t)););else d(t,function(t,e,i){return!(o=n(t,e,i))});return!!o}function ct(t,e,i){var n=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=-1;for(e=u.createCallback(e,i,3);++r<o&&e(t[r],r,t);)n++}else if(null==(n=e)||i)return t?t[0]:le;return ae(t,0,Ht(L(0,n),o))}function ut(t,e,i){if("number"==typeof i){var n=t?t.length:0;i=i<0?L(0,n+i):i||0}else if(i)return t[i=dt(t,e)]===e?i:-1;return Zt(t,e,i)}function ht(t,e,i){if("number"!=typeof e&&null!=e){var n=0,o=-1,r=t?t.length:0;for(e=u.createCallback(e,i,3);++o<r&&e(t[o],o,t);)n++}else n=null==e||i?1:L(0,e);return ae(t,n)}function dt(t,e,i,n){var o=0,r=t?t.length:o;for(e=(i=i?u.createCallback(i,n,1):vt)(e);o<r;)i(t[n=o+r>>>1])<e?o=n+1:r=n;return o}function pt(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),B(t,e,i=null!=i?u.createCallback(i,n,3):i)}function ft(){for(var t=1<arguments.length?arguments:arguments[0],e=-1,i=t?ot(Jt(t,"length")):0,n=T(i<0?0:i);++e<i;)n[e]=Jt(t,e);return n}function gt(t,e){var i=-1,n=t?t.length:0,o={};for(e||!n||I(t[0])||(e=[]);++i<n;){var r=t[i];e?o[r]=e[i]:r&&(o[r[0]]=r[1])}return o}function mt(t,e){return 2<arguments.length?y(t,17,ae(arguments,2),null,e):y(t,1,null,null,e)}function yt(n,o,t){function r(){d&&jt(d),l=d=p=le,!y&&m===o||(g=D(),c=n.apply(h,a),d||l||(a=h=null))}function s(){var t=o-(D()-u);0<t?d=j(s,t):(l&&jt(l),t=p,l=d=p=le,t&&(g=D(),c=n.apply(h,a),d||l||(a=h=null)))}var a,l,c,u,h,d,p,f,g=0,m=!1,y=!0;if(b(n))return o=L(0,o)||0,!0===t?y=!(f=!0):x(t)&&(f=t.leading,m="maxWait"in t&&(L(o,t.maxWait)||0),y="trailing"in t?t.trailing:y),function(){var t,e,i;return a=arguments,u=D(),h=this,p=y&&(d||!f),!1===m?t=f&&!d:(i=(e=m-(u-(g=l||f?g:u)))<=0)?(l=l&&jt(l),g=u,c=n.apply(h,a)):l=l||j(r,e),i&&d?d=jt(d):d||o===m||(d=j(s,o)),t&&(i=!0,c=n.apply(h,a)),!i||d||l||(a=h=null),c};throw new S}function vt(t){return t}function bt(o,e,t){var r=!0,i=e&&v(e),s=(e&&(t||i.length)||(null==t&&(t=e),s=l,e=o,o=u,i=v(e)),!1===t?r=!1:x(t)&&"chain"in t&&(r=t.chain),o),a=b(s);w(i,function(t){var n=o[t]=e[t];a&&(s.prototype[t]=function(){var t=this.__chain__,e=this.__wrapped__,i=[e];if(P.apply(i,arguments),i=n.apply(o,i),r||t){if(e===i&&x(i))return this;(i=new s(i)).__chain__=t}return i})})}function xt(){}function wt(e){return function(t){return t[e]}}function kt(){return this.__wrapped__}var T=(i=i?Ee.defaults(Me.Object(),i,Ee.pick(Me,He)):Me).Array,Tt=i.Boolean,At=i.Date,Ct=i.Function,t=i.Math,St=i.Number,o=i.Object,A=i.RegExp,C=i.String,S=i.TypeError,r=[],e=o.prototype,Mt=i._,M=e.toString,Et=A("^"+C(M).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Pt=t.ceil,jt=i.clearTimeout,Lt=t.floor,_t=Ct.prototype.toString,s=n(s=o.getPrototypeOf)&&s,E=e.hasOwnProperty,P=r.push,j=i.setTimeout,It=r.splice,Ot=r.unshift,Dt=function(){try{var t={},e=n(e=o.defineProperty)&&e,i=e(t,t,t)&&e}catch(t){}return i}(),Rt=n(Rt=o.create)&&Rt,e=n(e=T.isArray)&&e,Nt=i.isFinite,qt=i.isNaN,zt=n(zt=o.keys)&&zt,L=t.max,Ht=t.min,$t=i.parseInt,Bt=t.random,_={},Ft=(_[me]=T,_[ye]=Tt,_[ve]=At,_[be]=Ct,_[we]=o,_[xe]=St,_[ke]=A,_[Te]=C,l.prototype=u.prototype,u.support={});function Wt(){}Ft.funcDecomp=!n(i.a)&&fe.test(R),Ft.funcNames="string"==typeof Ct.name,u.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:de,variable:"",imports:{_:u}},Rt||(f=function(t){var e;return x(t)&&(Wt.prototype=t,e=new Wt,Wt.prototype=null),e||i.Object()});var Gt,Ut=Dt?function(t,e){$e.value=e,Dt(t,"__bindData__",$e)}:xt,I=e||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&M.call(t)==me||!1},O=zt?function(t){return x(t)?zt(t):[]}:function(t){var e,i=[];if(!t||!Se[typeof t])return i;for(e in t)E.call(t,e)&&i.push(e);return i},Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xt=Q(Vt),Yt=A("("+O(Xt).join("|")+")","g"),Qt=A("["+O(Vt).join("")+"]","g"),Kt=s?function(t){if(!t||M.call(t)!=we)return!1;var e=t.valueOf,i=n(e)&&(i=s(e))&&s(i);return i?t==i||s(t)==i:U(t)}:U,t=F(function(t,e,i){E.call(t,i)?t[i]++:t[i]=1}),Tt=F(function(t,e,i){(E.call(t,i)?t[i]:t[i]=[]).push(e)}),St=F(function(t,e,i){t[i]=e}),Jt=k,D=n(D=At.now)&&D||function(){return(new At).getTime()},e=8==$t(he+"08")?$t:function(t,e){return $t(a(t)?t.replace(qe,""):t,e||0)};return u.after=function(t,e){if(b(e))return function(){return--t<1?e.apply(this,arguments):void 0};throw new S},u.assign=q,u.at=function(t){for(var e=-1,i=h(n=arguments,!0,!1,1),n=n[2]&&n[2][n[1]]===t?1:i.length,o=T(n);++e<n;)o[e]=t[i[e]];return o},u.bind=mt,u.bindAll=function(t){for(var e=1<arguments.length?h(arguments,!0,!1,1):v(t),i=-1,n=e.length;++i<n;){var o=e[i];t[o]=y(t[o],1,null,null,t)}return t},u.bindKey=function(t,e){return 2<arguments.length?y(e,19,ae(arguments,2),null,t):y(e,3,null,null,t)},u.chain=function(t){return(t=new l(t)).__chain__=!0,t},u.compact=function(t){for(var e=-1,i=t?t.length:0,n=[];++e<i;){var o=t[e];o&&n.push(o)}return n},u.compose=function(){for(var i=arguments,t=i.length;t--;)if(!b(i[t]))throw new S;return function(){for(var t=arguments,e=i.length;e--;)t=[i[e].apply(this,t)];return t[0]}},u.constant=function(t){return function(){return t}},u.countBy=t,u.create=function(t,e){return t=f(t),e?q(t,e):t},u.createCallback=function(n,t,e){var i=typeof n;if(null==n||"function"==i)return g(n,t,e);if("object"!=i)return wt(n);var o=O(n),r=o[0],s=n[r];return 1!=o.length||s!=s||x(s)?function(t){for(var e=o.length,i=!1;e--&&(i=m(t[o[e]],n[o[e]],null,!0)););return i}:function(t){return t=t[r],s===t&&(0!==s||1/s==1/t)}},u.curry=function(t,e){return y(t,4,null,null,null,e="number"==typeof e?e:+e||t.length)},u.debounce=yt,u.defaults=N,u.defer=function(t){if(!b(t))throw new S;var e=ae(arguments,1);return j(function(){t.apply(le,e)},1)},u.delay=function(t,e){if(!b(t))throw new S;var i=ae(arguments,2);return j(function(){t.apply(le,i)},e)},u.difference=function(t){return c(t,h(arguments,!0,!0,1))},u.filter=et,u.flatten=function(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),h(t=null!=i?k(t,i,n):t,e)},u.forEach=w,u.forEachRight=nt,u.forIn=p,u.forInRight=function(t,e,i){var n=[],o=(p(t,function(t,e){n.push(e,t)}),n.length);for(e=g(e,i,3);o--&&!1!==e(n[o--],n[o],t););return t},u.forOwn=d,u.forOwnRight=Y,u.functions=v,u.groupBy=Tt,u.indexBy=St,u.initial=function(t,e,i){var n=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=u.createCallback(e,i,3);r--&&e(t[r],r,t);)n++}else n=null==e||i?1:e||n;return ae(t,0,Ht(L(0,o-n),o))},u.intersection=function(){for(var t=[],e=-1,i=arguments.length,n=ne(),o=G(),r=o===Zt,s=ne();++e<i;)(I(h=arguments[e])||X(h))&&(t.push(h),n.push(r&&h.length>=ue&&ie(e?t[e]:s)));var a=-1,l=(r=t[0])?r.length:0,c=[];t:for(;++a<l;){var u=n[0],h=r[a];if((u?te(u,h):o(s,h))<0){for(e=i,(u||s).push(h);--e;)if(((u=n[e])?te(u,h):o(t[e],h))<0)continue t;c.push(h)}}for(;i--;)(u=n[i])&&se(u);return re(n),re(s),c},u.invert=Q,u.invoke=function(t,e){var i=ae(arguments,2),n=-1,o="function"==typeof e,r=t?t.length:0,s=T("number"==typeof r?r:0);return w(t,function(t){s[++n]=(o?e:t[e]).apply(t,i)}),s},u.keys=O,u.map=k,u.mapValues=function(t,n,e){var o={};return n=u.createCallback(n,e,3),d(t,function(t,e,i){o[e]=n(t,e,i)}),o},u.max=ot,u.memoize=function(i,n){function o(){var t=o.cache,e=n?n.apply(this,arguments):ce+arguments[0];return E.call(t,e)?t[e]:t[e]=i.apply(this,arguments)}if(b(i))return o.cache={},o;throw new S},u.merge=function(t){var e,i=arguments,n=2;if(!x(t))return t;3<(n="number"!=typeof i[2]?i.length:n)&&"function"==typeof i[n-2]?e=g(i[--n-1],i[n--],2):2<n&&"function"==typeof i[n-1]&&(e=i[--n]);for(var i=ae(arguments,1,n),o=-1,r=ne(),s=ne();++o<n;)!function a(l,t,c,u,h){(I(t)?w:d)(t,function(t,e){var i,n,o,r=t,s=l[e];if(t&&((n=I(t))||Kt(t))){for(r=u.length;r--;)if(i=u[r]==t){s=h[r];break}i||(c&&(o=void 0!==(r=c(s,t)))&&(s=r),o||(s=n?I(s)?s:[]:Kt(s)?s:{}),u.push(t),h.push(s),o||a(s,t,c,u,h))}else void 0!==(r=c&&void 0===(r=c(s,t))?t:r)&&(s=r);l[e]=s})}(t,i[o],e,r,s);return re(r),re(s),t},u.min=function(t,n,e){var o=1/0,r=o;if(null==(n="function"!=typeof n&&e&&e[n]===t?null:n)&&I(t)){e=-1;for(var i=t.length;++e<i;){var s=t[e];s<r&&(r=s)}}else n=null==n&&a(t)?ee:u.createCallback(n,e,3),w(t,function(t,e,i){(e=n(t,e,i))<o&&(o=e,r=t)});return r},u.omit=function(t,n,e){var o={};if("function"!=typeof n){var i=[];p(t,function(t,e){i.push(e)});for(var r=-1,s=(i=c(i,h(arguments,!0,!1,1))).length;++r<s;){var a=i[r];o[a]=t[a]}}else n=u.createCallback(n,e,3),p(t,function(t,e,i){n(t,e,i)||(o[e]=t)});return o},u.once=function(t){var e,i;if(b(t))return function(){return e||(e=!0,i=t.apply(this,arguments),t=null),i};throw new S},u.pairs=function(t){for(var e=-1,i=O(t),n=i.length,o=T(n);++e<n;){var r=i[e];o[e]=[r,t[r]]}return o},u.partial=function(t){return y(t,16,ae(arguments,1))},u.partialRight=function(t){return y(t,32,null,ae(arguments,1))},u.pick=function(t,n,e){var o={};if("function"!=typeof n)for(var i=-1,r=h(arguments,!0,!1,1),s=x(t)?r.length:0;++i<s;){var a=r[i];a in t&&(o[a]=t[a])}else n=u.createCallback(n,e,3),p(t,function(t,e,i){n(t,e,i)&&(o[e]=t)});return o},u.pluck=Jt,u.property=wt,u.pull=function(t){for(var e=arguments,i=0,n=e.length,o=t?t.length:0;++i<n;)for(var r=-1,s=e[i];++r<o;)t[r]===s&&(It.call(t,r--,1),o--);return t},u.range=function(t,e,i){t=+t||0,null==e&&(e=t,t=0);var n=-1;e=L(0,Pt((e-t)/((i="number"==typeof i?i:+i||1)||1)));for(var o=T(e);++n<e;)o[n]=t,t+=i;return o},u.reject=function(t,n,e){return n=u.createCallback(n,e,3),et(t,function(t,e,i){return!n(t,e,i)})},u.remove=function(t,e,i){var n=-1,o=t?t.length:0,r=[];for(e=u.createCallback(e,i,3);++n<o;)e(i=t[n],n,t)&&(r.push(i),It.call(t,n--,1),o--);return r},u.rest=ht,u.shuffle=at,u.sortBy=function(t,o,e){var r=-1,s=I(o),i=t?t.length:0,a=T("number"==typeof i?i:0);for(s||(o=u.createCallback(o,e,3)),w(t,function(e,t,i){var n=a[++r]=oe();s?n.m=k(o,function(t){return e[t]}):(n.m=ne())[0]=o(e,t,i),n.n=r,n.o=e}),i=a.length,a.sort(Pe);i--;)t=a[i],a[i]=t.o,s||re(t.m),se(t);return a},u.tap=function(t,e){return e(t),t},u.throttle=function(t,e,i){var n=!0,o=!0;if(b(t))return!1===i?n=!1:x(i)&&(n="leading"in i?i.leading:n,o="trailing"in i?i.trailing:o),Ce.leading=n,Ce.maxWait=e,Ce.trailing=o,yt(t,e,Ce);throw new S},u.times=function(t,e,i){t=-1<(t=+t)?t:0;var n=-1,o=T(t);for(e=g(e,i,1);++n<t;)o[n]=e(n);return o},u.toArray=function(t){return(t&&"number"==typeof t.length?ae:J)(t)},u.transform=function(t,n,o,e){var i,r=I(t);return null==o&&(o=r?[]:f((i=t&&t.constructor)&&i.prototype)),n&&(n=u.createCallback(n,e,4),(r?w:d)(t,function(t,e,i){return n(o,t,e,i)})),o},u.union=function(){return B(h(arguments,!0,!0))},u.uniq=pt,u.values=J,u.where=et,u.without=function(t){return c(t,ae(arguments,1))},u.wrap=function(t,e){return y(e,16,[t])},u.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var i,n=arguments[t];(I(n)||X(n))&&(i=i?B(c(i,n).concat(c(n,i))):n)}return i||[]},u.zip=ft,u.zipObject=gt,u.collect=k,u.drop=ht,u.each=w,u.eachRight=nt,u.extend=q,u.methods=v,u.object=gt,u.select=et,u.tail=ht,u.unique=pt,u.unzip=ft,bt(u),u.clone=function(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i=e,e=!1),z(t,e,"function"==typeof i&&g(i,n,1))},u.cloneDeep=function(t,e,i){return z(t,!0,"function"==typeof e&&g(e,i,1))},u.contains=Z,u.escape=function(t){return null==t?"":C(t).replace(Qt,W)},u.every=tt,u.find=it,u.findIndex=function(t,e,i){var n=-1,o=t?t.length:0;for(e=u.createCallback(e,i,3);++n<o;)if(e(t[n],n,t))return n;return-1},u.findKey=function(t,n,e){var o;return n=u.createCallback(n,e,3),d(t,function(t,e,i){return n(t,e,i)?(o=e,!1):void 0}),o},u.findLast=function(t,n,e){var o;return n=u.createCallback(n,e,3),nt(t,function(t,e,i){return n(t,e,i)?(o=t,!1):void 0}),o},u.findLastIndex=function(t,e,i){var n=t?t.length:0;for(e=u.createCallback(e,i,3);n--;)if(e(t[n],n,t))return n;return-1},u.findLastKey=function(t,n,e){var o;return n=u.createCallback(n,e,3),Y(t,function(t,e,i){return n(t,e,i)?(o=e,!1):void 0}),o},u.has=function(t,e){return!!t&&E.call(t,e)},u.identity=vt,u.indexOf=ut,u.isArguments=X,u.isArray=I,u.isBoolean=function(t){return!0===t||!1===t||t&&"object"==typeof t&&M.call(t)==ye||!1},u.isDate=function(t){return t&&"object"==typeof t&&M.call(t)==ve||!1},u.isElement=function(t){return t&&1===t.nodeType||!1},u.isEmpty=function(t){var e=!0;if(!t)return e;var i=M.call(t),n=t.length;return i==me||i==Te||i==ge||i==we&&"number"==typeof n&&b(t.splice)?!n:(d(t,function(){return e=!1}),e)},u.isEqual=function(t,e,i,n){return m(t,e,"function"==typeof i&&g(i,n,2))},u.isFinite=function(t){return Nt(t)&&!qt(parseFloat(t))},u.isFunction=b,u.isNaN=function(t){return K(t)&&t!=+t},u.isNull=function(t){return null===t},u.isNumber=K,u.isObject=x,u.isPlainObject=Kt,u.isRegExp=function(t){return t&&"object"==typeof t&&M.call(t)==ke||!1},u.isString=a,u.isUndefined=function(t){return void 0===t},u.lastIndexOf=function(t,e,i){var n=t?t.length:0;for("number"==typeof i&&(n=(i<0?L(0,n+i):Ht(i,n-1))+1);n--;)if(t[n]===e)return n;return-1},u.mixin=bt,u.noConflict=function(){return i._=Mt,this},u.noop=xt,u.now=D,u.parseInt=e,u.random=function(t,e,i){var n=null==t,o=null==e;return null==i&&("boolean"==typeof t&&o?(i=t,t=1):o||"boolean"!=typeof e||(i=e,o=!0)),n&&o&&(e=1),t=+t||0,o?(e=t,t=0):e=+e||0,i||t%1||e%1?(i=Bt(),Ht(t+i*(e-t+parseFloat("1e-"+((i+"").length-1))),e)):$(t,e)},u.reduce=rt,u.reduceRight=st,u.result=function(t,e){var i;if(t)return b(i=t[e])?t[e]():i},u.runInContext=R,u.size=function(t){var e=t?t.length:0;return"number"==typeof e?e:O(t).length},u.some=lt,u.sortedIndex=dt,u.template=function(s,t,e){var i=u.templateSettings;s=C(s||""),e=N({},e,i);var a,n=N({},e.imports,i.imports),i=O(n),n=J(n),l=0,o=e.interpolate||pe,c="__p+='",o=A((e.escape||pe).source+"|"+o.source+"|"+(o===de?De:pe).source+"|"+(e.evaluate||pe).source+"|$","g");s.replace(o,function(t,e,i,n,o,r){return i=i||n,c+=s.slice(l,r).replace(ze,je),e&&(c+="'+__e("+e+")+'"),o&&(a=!0,c+="';"+o+";\n__p+='"),i&&(c+="'+((__t=("+i+"))==null?'':__t)+'"),l=r+t.length,t}),c+="';",(o=e=e.variable)||(c="with("+(e="obj")+"){"+c+"}"),c=(a?c.replace(_e,""):c).replace(Ie,"$1").replace(Oe,"$1;"),c="function("+e+"){"+(o?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}";try{var r=Ct(i,"return "+c).apply(le,n)}catch(t){throw t.source=c,t}return t?r(t):(r.source=c,r)},u.unescape=function(t){return null==t?"":C(t).replace(Yt,V)},u.uniqueId=function(t){var e=++Le;return C(null==t?"":t)+e},u.all=tt,u.any=lt,u.detect=it,u.findWhere=it,u.foldl=rt,u.foldr=st,u.include=Z,u.inject=rt,bt((Gt={},d(u,function(t,e){u.prototype[e]||(Gt[e]=t)}),Gt),!1),u.first=ct,u.last=function(t,e,i){var n=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=u.createCallback(e,i,3);r--&&e(t[r],r,t);)n++}else if(null==(n=e)||i)return t?t[o-1]:le;return ae(t,L(0,o-n))},u.sample=function(t,e,i){return t&&"number"!=typeof t.length&&(t=J(t)),null==e||i?t?t[$(0,t.length-1)]:le:((t=at(t)).length=Ht(L(0,e),t.length),t)},u.take=ct,u.head=ct,d(u,function(o,t){var r="sample"!==t;u.prototype[t]||(u.prototype[t]=function(t,e){var i=this.__chain__,n=o(this.__wrapped__,t,e);return i||null!=t&&(!e||r&&"function"==typeof t)?new l(n,i):n})}),u.VERSION="2.4.1",u.prototype.chain=function(){return this.__chain__=!0,this},u.prototype.toString=function(){return C(this.__wrapped__)},u.prototype.value=kt,u.prototype.valueOf=kt,w(["join","pop","shift"],function(t){var i=r[t];u.prototype[t]=function(){var t=this.__chain__,e=i.apply(this.__wrapped__,arguments);return t?new l(e,t):e}}),w(["push","reverse","sort","unshift"],function(t){var e=r[t];u.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),w(["concat","slice","splice"],function(t){var e=r[t];u.prototype[t]=function(){return new l(e.apply(this.__wrapped__,arguments),this.__chain__)}}),u}());"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Me._=Ee,define("lodash",[],function(){return Ee})):t&&o?l?(o.exports=Ee)._=Ee:t._=Ee:Me._=Ee}.call(this),!function(){"use strict";function c(t){return"function"==typeof t}var e,i,t=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=t,n=0,a=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(g):v())};var t="undefined"!=typeof window?window:void 0,o=t||{},o=o.MutationObserver||o.WebKitMutationObserver,r="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){return function(){setTimeout(g,1)}}var h,d,p,f=new Array(1e3);function g(){for(var t=0;t<n;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;n=0}function m(){try{var t=require("vertx");return e=t.runOnLoop||t.runOnContext,function(){e(g)}}catch(t){return u()}}function y(){}var v=r?function(){process.nextTick(g)}:o?(d=0,r=new o(g),p=document.createTextNode(""),r.observe(p,{characterData:!0}),function(){p.data=d=++d%2}):l?((h=new MessageChannel).port1.onmessage=g,function(){h.port2.postMessage(0)}):(void 0===t&&"function"==typeof require?m:u)(),b=void 0,x=1,w=2,k=new P;function T(t,n,o){a(function(e){var i=!1,t=function(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}(o,n,function(t){i||(i=!0,(n!==t?A:C)(e,t))},function(t){i||(i=!0,S(e,t))},e._label);!i&&t&&(i=!0,S(e,t))},t)}function R(t,e){var i,n;e.constructor===t.constructor?(i=t,(n=e)._state===x?C(i,n._result):n._state===w?S(i,n._result):M(n,void 0,function(t){A(i,t)},function(t){S(i,t)})):(n=function(t){try{return t.then}catch(t){return k.error=t,k}}(e))===k?S(t,k.error):void 0!==n&&c(n)?T(t,e,n):C(t,e)}function A(t,e){var i;t===e?S(t,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(i=e)||"object"==typeof i&&null!==i?R:C)(t,e)}function N(t){t._onerror&&t._onerror(t._result),E(t)}function C(t,e){t._state===b&&(t._result=e,t._state=x,0!==t._subscribers.length&&a(E,t))}function S(t,e){t._state===b&&(t._state=w,t._result=e,a(N,t))}function M(t,e,i,n){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+x]=i,o[r+w]=n,0===r&&t._state&&a(E,t)}function E(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n,o,r=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+i],n?L(i,n,o,r):o(r);t._subscribers.length=0}}function P(){this.error=null}var j=new P;function L(t,e,i,n){var o,r,s,a,l=c(i);if(l){if((o=function(t,e){try{return t(e)}catch(t){return j.error=t,j}}(i,n))===j?(a=!0,r=o.error,o=null):s=!0,e===o)return void S(e,new TypeError("A promises callback cannot return that same promise."))}else o=n,s=!0;e._state===b&&(l&&s?A(e,o):a?S(e,r):t===x?C(e,o):t===w&&S(e,o))}function _(t,e){var i=this;i._instanceConstructor=t,i.promise=new t(y),i._validateInput(e)?(i._input=e,i.length=e.length,i._remaining=e.length,i._init(),0===i.length?C(i.promise,i._result):(i.length=i.length||0,i._enumerate(),0===i._remaining&&C(i.promise,i._result))):S(i.promise,i._validationError())}_.prototype._validateInput=function(t){return s(t)},_.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},_.prototype._init=function(){this._result=new Array(this.length)};var q=_;_.prototype._enumerate=function(){for(var t=this.length,e=this.promise,i=this._input,n=0;e._state===b&&n<t;n++)this._eachEntry(i[n],n)},_.prototype._eachEntry=function(t,e){var i,n=this,o=n._instanceConstructor;"object"==typeof(i=t)&&null!==i?t.constructor===o&&t._state!==b?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(o.resolve(t),e):(n._remaining--,n._result[e]=t)},_.prototype._settledAt=function(t,e,i){var n=this,o=n.promise;o._state===b&&(n._remaining--,t===w?S(o,i):n._result[e]=i),0===n._remaining&&C(o,n._result)},_.prototype._willSettleAt=function(t,e){var i=this;M(t,void 0,function(t){i._settledAt(x,e,t)},function(t){i._settledAt(w,e,t)})};function z(t){var e=new this(y);if(!s(t))return S(e,new TypeError("You must pass an array to race.")),e;var i=t.length;function n(t){A(e,t)}function o(t){S(e,t)}for(var r=0;e._state===b&&r<i;r++)M(this.resolve(t[r]),void 0,n,o);return e}function H(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(y);return A(e,t),e}function $(t){var e=new this(y);return S(e,t),e}var B=0;var I=O;function O(t){if(this._id=B++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==t){if(!c(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof O))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var e=this;try{t(function(t){A(e,t)},function(t){S(e,t)})}catch(t){S(e,t)}}}O.all=function(t){return new q(this,t).promise},O.race=z,O.resolve=H,O.reject=$,O._setScheduler=function(t){i=t},O._setAsap=function(t){a=t},O._asap=a,O.prototype={constructor:O,then:function(t,e){var i=this._state;if(i===x&&!t||i===w&&!e)return this;var n,o=new this.constructor(y),r=this._result;return i?(n=arguments[i-1],a(function(){L(i,o,n,r)})):M(this,o,t,e),o},catch:function(t){return this.then(null,t)}};var o=function(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=I)},D={Promise:I,polyfill:o};"function"==typeof define&&define.amd?define("es6-promise",[],function(){return D}):"undefined"!=typeof module&&module.exports?module.exports=D:void 0!==this&&(this.ES6Promise=D),o()}.call(this),define("core/module-requiring-consent",[],function(){function t(t,e){this.consentManager=t,this.consentCategory=e,this.startHandle=null,this._realStart=this.start,this.start=this._start,this.stop&&(this._realStop=this.stop,this.stop=this._stop)}return t.prototype._start=function(){this.startHandle=this.consentManager.deferUntilConsentGiven(this._realStart.bind(this),this.consentCategory)},t.prototype._stop=function(){this.consentManager.cancelDeferral(this.startHandle),this.consentManager.ifConsentGiven(this._realStop.bind(this),this.consentCategory)},t}),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(t.document)return e(t);throw new Error("jQuery requires a window with a document")}:e(t)}("undefined"!=typeof window?window:this,function(f,R){function N(t,e){return e.toUpperCase()}var t=[],u=t.slice,q=t.concat,z=t.push,o=t.indexOf,i={},H=i.toString,$=i.hasOwnProperty,g={},m=f.document,w=function(t,e){return new w.fn.init(t,e)},B=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,F=/^-ms-/,W=/-([\da-z])/gi;function G(t){var e=t.length,i=w.type(t);return"function"!==i&&!w.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t))}w.fn=w.prototype={jquery:"2.1.1",constructor:w,selector:"",length:0,toArray:function(){return u.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:u.call(this)},pushStack:function(t){t=w.merge(this.constructor(),t);return t.prevObject=this,t.context=this.context,t},each:function(t,e){return w.each(this,t,e)},map:function(i){return this.pushStack(w.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:z,sort:t.sort,splice:t.splice},w.extend=w.fn.extend=function(){var t,e,i,n,o,r=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[s]||{},s++),"object"==typeof r||w.isFunction(r)||(r={}),s===a&&(r=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)o=r[e],i=t[e],r!==i&&(l&&i&&(w.isPlainObject(i)||(n=w.isArray(i)))?(o=n?(n=!1,o&&w.isArray(o)?o:[]):o&&w.isPlainObject(o)?o:{},r[e]=w.extend(l,o,i)):void 0!==i&&(r[e]=i));return r},w.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===w.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!w.isArray(t)&&0<=t-parseFloat(t)},isPlainObject:function(t){return"object"===w.type(t)&&!t.nodeType&&!w.isWindow(t)&&!(t.constructor&&!$.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){for(var e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[H.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=w.trim(t))&&(1===t.indexOf("use strict")?((e=m.createElement("script")).text=t,m.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(F,"ms-").replace(W,N)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n,o=0,r=t.length,s=G(t);if(i){if(s)for(;o<r&&!1!==(n=e.apply(t[o],i));o++);else for(o in t)if(n=e.apply(t[o],i),!1===n)break}else if(s)for(;o<r&&!1!==(n=e.call(t[o],o,t[o]));o++);else for(o in t)if(n=e.call(t[o],o,t[o]),!1===n)break;return t},trim:function(t){return null==t?"":(t+"").replace(B,"")},makeArray:function(t,e){e=e||[];return null!=t&&(G(Object(t))?w.merge(e,"string"==typeof t?[t]:t):z.call(e,t)),e},inArray:function(t,e,i){return null==e?-1:o.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,s=!i;o<r;o++)!e(t[o],o)!=s&&n.push(t[o]);return n},map:function(t,e,i){var n,o=0,r=t.length,s=[];if(G(t))for(;o<r;o++)null!=(n=e(t[o],o,i))&&s.push(n);else for(o in t)n=e(t[o],o,i),null!=n&&s.push(n);return q.apply([],s)},guid:1,proxy:function(t,e){var i,n;return"string"==typeof e&&(n=t[e],e=t,t=n),w.isFunction(t)?(i=u.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(u.call(arguments)))}).guid=t.guid=t.guid||w.guid++,n):void 0},now:Date.now,support:g}),w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var t=function(R){function h(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320)}var t,d,x,r,N,p,q,z,w,c,u,f,k,e,g,m,n,o,y,b="sizzle"+-new Date,v=R.document,T=0,H=0,$=ct(),B=ct(),F=ct(),W=function(t,e){return t===e&&(u=!0),0},i="undefined",G={}.hasOwnProperty,s=[],U=s.pop,V=s.push,A=s.push,X=s.slice,C=s.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},Y="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",a="[\\x20\\t\\r\\n\\f]",l="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Q=l.replace("w","w#"),K="\\["+a+"*("+l+")(?:"+a+"*([*^$|!~]?=)"+a+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Q+"))|)"+a+"*\\]",J=":("+l+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+K+")*)|.*)\\)|)",S=new RegExp("^"+a+"+|((?:^|[^\\\\])(?:\\\\.)*)"+a+"+$","g"),Z=new RegExp("^"+a+"*,"+a+"*"),tt=new RegExp("^"+a+"*([>+~]|"+a+")"+a+"*"),et=new RegExp("="+a+"*([^\\]'\"]*?)"+a+"*\\]","g"),it=new RegExp(J),nt=new RegExp("^"+Q+"$"),M={ID:new RegExp("^#("+l+")"),CLASS:new RegExp("^\\.("+l+")"),TAG:new RegExp("^("+l.replace("w","w*")+")"),ATTR:new RegExp("^"+K),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+a+"*(even|odd|(([+-]|)(\\d*)n|)"+a+"*(?:([+-]|)"+a+"*(\\d+)|))"+a+"*\\)|)","i"),bool:new RegExp("^(?:"+Y+")$","i"),needsContext:new RegExp("^"+a+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+a+"*((?:-\\d)?\\d*)"+a+"*\\)|)(?=[^-]|$)","i")},ot=/^(?:input|select|textarea|button)$/i,rt=/^h\d$/i,E=/^[^{]+\{\s*\[native \w/,st=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,at=/[+~]/,lt=/'|\\/g,P=new RegExp("\\\\([\\da-f]{1,6}"+a+"?|("+a+")|.)","ig");try{A.apply(s=X.call(v.childNodes),v.childNodes),s[v.childNodes.length].nodeType}catch(t){A={apply:s.length?function(t,e){V.apply(t,X.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function j(t,e,i,n){var o,r,s,a,l,c,u;if((e?e.ownerDocument||e:v)!==k&&f(e),i=i||[],!t||"string"!=typeof t)return i;if(1!==(o=(e=e||k).nodeType)&&9!==o)return[];if(g&&!n){if(c=st.exec(t))if(u=c[1]){if(9===o){if(!(a=e.getElementById(u))||!a.parentNode)return i;if(a.id===u)return i.push(a),i}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(u))&&y(e,a)&&a.id===u)return i.push(a),i}else{if(c[2])return A.apply(i,e.getElementsByTagName(t)),i;if((u=c[3])&&d.getElementsByClassName&&e.getElementsByClassName)return A.apply(i,e.getElementsByClassName(u)),i}if(d.qsa&&(!m||!m.test(t))){if(l=a=b,c=e,u=9===o&&t,1===o&&"object"!==e.nodeName.toLowerCase()){for(s=p(t),(a=e.getAttribute("id"))?l=a.replace(lt,"\\$&"):e.setAttribute("id",l),l="[id='"+l+"'] ",r=s.length;r--;)s[r]=l+O(s[r]);c=at.test(t)&&dt(e.parentNode)||e,u=s.join(",")}if(u)try{return A.apply(i,c.querySelectorAll(u)),i}catch(t){}finally{a||e.removeAttribute("id")}}}return z(t.replace(S,"$1"),e,i,n)}function ct(){var i=[];function n(t,e){return i.push(t+" ")>x.cacheLength&&delete n[i.shift()],n[t+" "]=e}return n}function L(t){return t[b]=!0,t}function _(t){var e=k.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function ut(t,e){for(var i=t.split("|"),n=t.length;n--;)x.attrHandle[i[n]]=e}function ht(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function I(s){return L(function(r){return r=+r,L(function(t,e){for(var i,n=s([],t.length,r),o=n.length;o--;)t[i=n[o]]&&(t[i]=!(e[i]=t[i]))})})}function dt(t){return t&&typeof t.getElementsByTagName!==i&&t}for(t in d=j.support={},N=j.isXML=function(t){t=t&&(t.ownerDocument||t).documentElement;return!!t&&"HTML"!==t.nodeName},f=j.setDocument=function(t){var l=t?t.ownerDocument||t:v,t=l.defaultView;return l!==k&&9===l.nodeType&&l.documentElement?(e=(k=l).documentElement,g=!N(l),t&&t!==t.top&&(t.addEventListener?t.addEventListener("unload",function(){f()},!1):t.attachEvent&&t.attachEvent("onunload",function(){f()})),d.attributes=_(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=_(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=E.test(l.getElementsByClassName)&&_(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),d.getById=_(function(t){return e.appendChild(t).id=b,!l.getElementsByName||!l.getElementsByName(b).length}),d.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==i&&g)return(e=e.getElementById(t))&&e.parentNode?[e]:[]},x.filter.ID=function(t){var e=t.replace(P,h);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(P,h);return function(t){t=typeof t.getAttributeNode!==i&&t.getAttributeNode("id");return t&&t.value===e}}),x.find.TAG=d.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==i?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;i=r[o++];)1===i.nodeType&&n.push(i);return n},x.find.CLASS=d.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==i&&g?e.getElementsByClassName(t):void 0},n=[],m=[],(d.qsa=E.test(l.querySelectorAll))&&(_(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+a+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+a+"*(?:value|"+Y+")"),t.querySelectorAll(":checked").length||m.push(":checked")}),_(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+a+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(d.matchesSelector=E.test(o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector))&&_(function(t){d.disconnectedMatch=o.call(t,"div"),o.call(t,"[s!='']:x"),n.push("!=",J)}),m=m.length&&new RegExp(m.join("|")),n=n.length&&new RegExp(n.join("|")),t=E.test(e.compareDocumentPosition),y=t||E.test(e.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(i.contains?i.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=t?function(t,e){if(t===e)return u=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===i?t===l||t.ownerDocument===v&&y(v,t)?-1:e===l||e.ownerDocument===v&&y(v,e)?1:c?C.call(c,t)-C.call(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===l?-1:e===l?1:o?-1:r?1:c?C.call(c,t)-C.call(c,e):0;if(o===r)return ht(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?ht(s[n],a[n]):s[n]===v?-1:a[n]===v?1:0},l):k},j.matches=function(t,e){return j(t,null,null,e)},j.matchesSelector=function(t,e){if((t.ownerDocument||t)!==k&&f(t),e=e.replace(et,"='$1']"),!(!d.matchesSelector||!g||n&&n.test(e)||m&&m.test(e)))try{var i=o.call(t,e);if(i||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<j(e,k,null,[t]).length},j.contains=function(t,e){return(t.ownerDocument||t)!==k&&f(t),y(t,e)},j.attr=function(t,e){(t.ownerDocument||t)!==k&&f(t);var i=x.attrHandle[e.toLowerCase()],i=i&&G.call(x.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==i?i:d.attributes||!g?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},j.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},j.uniqueSort=function(t){var e,i=[],n=0,o=0;if(u=!d.detectDuplicates,c=!d.sortStable&&t.slice(0),t.sort(W),u){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return c=null,t},r=j.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},(x=j.selectors={cacheLength:50,createPseudo:L,match:M,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(P,h),t[3]=(t[3]||t[4]||t[5]||"").replace(P,h),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||j.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&j.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return M.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&it.test(i)&&(e=p(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(P,h).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+a+")"+t+"("+a+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==i&&t.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(t){t=j.attr(t,e);return null==t?"!="===i:!i||(t+="","="===i?t===n:"!="===i?t!==n:"^="===i?n&&0===t.indexOf(n):"*="===i?n&&-1<t.indexOf(n):"$="===i?n&&t.slice(-n.length)===n:"~="===i?-1<(" "+t+" ").indexOf(n):"|="===i&&(t===n||t.slice(0,n.length+1)===n+"-"))}},CHILD:function(p,t,e,f,g){var m="nth"!==p.slice(0,3),y="last"!==p.slice(-4),v="of-type"===t;return 1===f&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,o,r,s,a,l,c=m!=y?"nextSibling":"previousSibling",u=t.parentNode,h=v&&t.nodeName.toLowerCase(),d=!i&&!v;if(u){if(m){for(;c;){for(r=t;r=r[c];)if(v?r.nodeName.toLowerCase()===h:1===r.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&d){for(a=(n=(o=u[b]||(u[b]={}))[p]||[])[0]===T&&n[1],s=n[0]===T&&n[2],r=a&&u.childNodes[a];r=++a&&r&&r[c]||(s=a=0)||l.pop();)if(1===r.nodeType&&++s&&r===t){o[p]=[T,a,s];break}}else if(d&&(n=(t[b]||(t[b]={}))[p])&&n[0]===T)s=n[1];else for(;(r=++a&&r&&r[c]||(s=a=0)||l.pop())&&((v?r.nodeName.toLowerCase()!==h:1!==r.nodeType)||!++s||(d&&((r[b]||(r[b]={}))[p]=[T,s]),r!==t)););return(s-=g)===f||s%f==0&&0<=s/f}}},PSEUDO:function(t,r){var e,s=x.pseudos[t]||x.setFilters[t.toLowerCase()]||j.error("unsupported pseudo: "+t);return s[b]?s(r):1<s.length?(e=[t,t,"",r],x.setFilters.hasOwnProperty(t.toLowerCase())?L(function(t,e){for(var i,n=s(t,r),o=n.length;o--;)t[i=C.call(t,n[o])]=!(e[i]=n[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:L(function(t){var n=[],o=[],a=q(t.replace(S,"$1"));return a[b]?L(function(t,e,i,n){for(var o,r=a(t,null,n,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,i){return n[0]=t,a(n,null,i,o),!o.pop()}}),has:L(function(e){return function(t){return 0<j(e,t).length}}),contains:L(function(e){return function(t){return-1<(t.textContent||t.innerText||r(t)).indexOf(e)}}),lang:L(function(i){return nt.test(i||"")||j.error("unsupported lang: "+i),i=i.replace(P,h).toLowerCase(),function(t){var e;do{if(e=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=R.location&&R.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===e},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return rt.test(t.nodeName)},input:function(t){return ot.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:I(function(){return[0]}),last:I(function(t,e){return[e-1]}),eq:I(function(t,e,i){return[i<0?i+e:i]}),even:I(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:I(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:I(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:I(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})x.pseudos[t]=function(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}(t);function pt(){}function O(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function ft(s,t,e){var a=t.dir,l=e&&"parentNode"===a,c=H++;return t.first?function(t,e,i){for(;t=t[a];)if(1===t.nodeType||l)return s(t,e,i)}:function(t,e,i){var n,o,r=[T,c];if(i){for(;t=t[a];)if((1===t.nodeType||l)&&s(t,e,i))return!0}else for(;t=t[a];)if(1===t.nodeType||l){if((n=(o=t[b]||(t[b]={}))[a])&&n[0]===T&&n[1]===c)return r[2]=n[2];if((o[a]=r)[2]=s(t,e,i))return!0}}}function gt(o){return 1<o.length?function(t,e,i){for(var n=o.length;n--;)if(!o[n](t,e,i))return!1;return!0}:o[0]}function D(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)!(r=t[a])||i&&!i(r,n,o)||(s.push(r),c&&e.push(a));return s}function mt(p,f,g,m,y,t){return m&&!m[b]&&(m=mt(m)),y&&!y[b]&&(y=mt(y,t)),L(function(t,e,i,n){var o,r,s,a=[],l=[],c=e.length,u=t||function(t,e,i){for(var n=0,o=e.length;n<o;n++)j(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),h=!p||!t&&f?u:D(u,a,p,i,n),d=g?y||(t?p:c||m)?[]:e:h;if(g&&g(h,d,i,n),m)for(o=D(d,l),m(o,[],i,n),r=o.length;r--;)(s=o[r])&&(d[l[r]]=!(h[l[r]]=s));if(t){if(y||p){if(y){for(o=[],r=d.length;r--;)(s=d[r])&&o.push(h[r]=s);y(null,d=[],o,n)}for(r=d.length;r--;)(s=d[r])&&-1<(o=y?C.call(t,s):a[r])&&(t[o]=!(e[o]=s))}}else d=D(d===e?d.splice(c,d.length):d),y?y(null,e,d,n):A.apply(e,d)})}function yt(m,y){function t(t,e,i,n,o){var r,s,a,l=0,c="0",u=t&&[],h=[],d=w,p=t||b&&x.find.TAG("*",o),f=T+=null==d?1:Math.random()||.1,g=p.length;for(o&&(w=e!==k&&e);c!==g&&null!=(r=p[c]);c++){if(b&&r){for(s=0;a=m[s++];)if(a(r,e,i)){n.push(r);break}o&&(T=f)}v&&((r=!a&&r)&&l--,t&&u.push(r))}if(l+=c,v&&c!==l){for(s=0;a=y[s++];)a(u,h,e,i);if(t){if(0<l)for(;c--;)u[c]||h[c]||(h[c]=U.call(n));h=D(h)}A.apply(n,h),o&&!t&&0<h.length&&1<l+y.length&&j.uniqueSort(n)}return o&&(T=f,w=d),u}var v=0<y.length,b=0<m.length;return v?L(t):t}return pt.prototype=x.filters=x.pseudos,x.setFilters=new pt,p=j.tokenize=function(t,e){var i,n,o,r,s,a,l,c=B[t+" "];if(c)return e?0:c.slice(0);for(s=t,a=[],l=x.preFilter;s;){for(r in i&&!(n=Z.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(o=[])),i=!1,(n=tt.exec(s))&&(i=n.shift(),o.push({value:i,type:n[0].replace(S," ")}),s=s.slice(i.length)),x.filter)!(n=M[r].exec(s))||l[r]&&!(n=l[r](n))||(i=n.shift(),o.push({value:i,type:r,matches:n}),s=s.slice(i.length));if(!i)break}return e?s.length:s?j.error(t):B(t,a).slice(0)},q=j.compile=function(t,e){var i,n=[],o=[],r=F[t+" "];if(!r){for(i=(e=e||p(t)).length;i--;)((r=function t(e){for(var n,i,o,r=e.length,s=x.relative[e[0].type],a=s||x.relative[" "],l=s?1:0,c=ft(function(t){return t===n},a,!0),u=ft(function(t){return-1<C.call(n,t)},a,!0),h=[function(t,e,i){return!s&&(i||e!==w)||((n=e).nodeType?c:u)(t,e,i)}];l<r;l++)if(i=x.relative[e[l].type])h=[ft(gt(h),i)];else{if((i=x.filter[e[l].type].apply(null,e[l].matches))[b]){for(o=++l;o<r&&!x.relative[e[o].type];o++);return mt(1<l&&gt(h),1<l&&O(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(S,"$1"),i,l<o&&t(e.slice(l,o)),o<r&&t(e=e.slice(o)),o<r&&O(e))}h.push(i)}return gt(h)}(e[i]))[b]?n:o).push(r);(r=F(t,yt(o,n))).selector=t}return r},z=j.select=function(t,e,i,n){var o,r,s,a,l,c="function"==typeof t&&t,u=!n&&p(t=c.selector||t);if(i=i||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(s=r[0]).type&&d.getById&&9===e.nodeType&&g&&x.relative[r[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(P,h),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=M.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(n=l(s.matches[0].replace(P,h),at.test(r[0].type)&&dt(e.parentNode)||e))){if(r.splice(o,1),t=n.length&&O(r))break;return A.apply(i,n),i}}return(c||q(t,u))(n,e,!g,i,at.test(t)&&dt(e.parentNode)||e),i},d.sortStable=b.split("").sort(W).join("")===b,d.detectDuplicates=!!u,f(),d.sortDetached=_(function(t){return 1&t.compareDocumentPosition(k.createElement("div"))}),_(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&_(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),_(function(t){return null==t.getAttribute("disabled")})||ut(Y,function(t,e,i){return i?void 0:!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),j}(f),U=(w.find=t,w.expr=t.selectors,w.expr[":"]=w.expr.pseudos,w.unique=t.uniqueSort,w.text=t.getText,w.isXMLDoc=t.isXML,w.contains=t.contains,w.expr.match.needsContext),V=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,X=/^.[^:#\[\.,]*$/;function Y(t,i,n){if(w.isFunction(i))return w.grep(t,function(t,e){return!!i.call(t,e,t)!==n});if(i.nodeType)return w.grep(t,function(t){return t===i!==n});if("string"==typeof i){if(X.test(i))return w.filter(i,t,n);i=w.filter(i,t)}return w.grep(t,function(t){return 0<=o.call(i,t)!==n})}w.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,i=this.length,n=[],o=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<i;e++)if(w.contains(o[e],this))return!0}));for(e=0;e<i;e++)w.find(t,o[e],n);return(n=this.pushStack(1<i?w.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(Y(this,t||[],!1))},not:function(t){return this.pushStack(Y(this,t||[],!0))},is:function(t){return!!Y(this,"string"==typeof t&&U.test(t)?w(t):t||[],!1).length}});var r,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,K=((w.fn.init=function(t,e){var i,n;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):w.isFunction(t)?void 0!==r.ready?r.ready(t):t(w):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),w.makeArray(t,this));if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:Q.exec(t))||!i[1]&&e)return(!e||e.jquery?e||r:this.constructor(e)).find(t);if(i[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),V.test(i[1])&&w.isPlainObject(e))for(i in e)w.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(n=m.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=m,this.selector=t,this}).prototype=w.fn,r=w(m),/^(?:parents|prev(?:Until|All))/),J={children:!0,contents:!0,next:!0,prev:!0};function Z(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.extend({dir:function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&w(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,r=[],s=U.test(t)||"string"!=typeof t?w(t,e||this.context):0;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&w.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(1<r.length?w.unique(r):r)},index:function(t){return t?"string"==typeof t?o.call(w(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.unique(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return w.dir(t,"parentNode")},parentsUntil:function(t,e,i){return w.dir(t,"parentNode",i)},next:function(t){return Z(t,"nextSibling")},prev:function(t){return Z(t,"previousSibling")},nextAll:function(t){return w.dir(t,"nextSibling")},prevAll:function(t){return w.dir(t,"previousSibling")},nextUntil:function(t,e,i){return w.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return w.dir(t,"previousSibling",i)},siblings:function(t){return w.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return w.sibling(t.firstChild)},contents:function(t){return t.contentDocument||w.merge([],t.childNodes)}},function(n,o){w.fn[n]=function(t,e){var i=w.map(this,o,t);return(e="Until"!==n.slice(-5)?t:e)&&"string"==typeof e&&(i=w.filter(e,i)),1<this.length&&(J[n]||w.unique(i),K.test(n)&&i.reverse()),this.pushStack(i)}});var e,k=/\S+/g,tt={};function n(){m.removeEventListener("DOMContentLoaded",n,!1),f.removeEventListener("load",n,!1),w.ready()}w.Callbacks=function(o){var t,i;o="string"==typeof o?tt[o]||(i=tt[t=o]={},w.each(t.match(k)||[],function(t,e){i[e]=!0}),i):w.extend({},o);function n(t){for(e=o.memory&&t,r=!0,c=a||0,a=0,l=u.length,s=!0;u&&c<l;c++)if(!1===u[c].apply(t[0],t[1])&&o.stopOnFalse){e=!1;break}s=!1,u&&(h?h.length&&n(h.shift()):e?u=[]:d.disable())}var e,r,s,a,l,c,u=[],h=!o.once&&[],d={add:function(){var t;return u&&(t=u.length,function n(t){w.each(t,function(t,e){var i=w.type(e);"function"===i?o.unique&&d.has(e)||u.push(e):e&&e.length&&"string"!==i&&n(e)})}(arguments),s?l=u.length:e&&(a=t,n(e))),this},remove:function(){return u&&w.each(arguments,function(t,e){for(var i;-1<(i=w.inArray(e,u,i));)u.splice(i,1),s&&(i<=l&&l--,i<=c&&c--)}),this},has:function(t){return t?-1<w.inArray(t,u):!(!u||!u.length)},empty:function(){return u=[],l=0,this},disable:function(){return u=h=e=void 0,this},disabled:function(){return!u},lock:function(){return h=void 0,e||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!u||r&&!h||(e=[t,(e=e||[]).slice?e.slice():e],s?h.push(e):n(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},w.extend({Deferred:function(t){var r=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var o=arguments;return w.Deferred(function(n){w.each(r,function(t,e){var i=w.isFunction(o[t])&&o[t];a[e[1]](function(){var t=i&&i.apply(this,arguments);t&&w.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[e[0]+"With"](this===s?n.promise():this,i?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?w.extend(t,s):s}},a={};return s.pipe=s.then,w.each(r,function(t,e){var i=e[2],n=e[3];s[e[1]]=i.add,n&&i.add(function(){o=n},r[1^t][2].disable,r[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?s:this,arguments),this},a[e[0]+"With"]=i.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e,i,n){return function(t){i[e]=this,n[e]=1<arguments.length?u.call(arguments):t,n===o?c.notifyWith(i,n):--l||c.resolveWith(i,n)}}var o,i,n,r=0,s=u.call(arguments),a=s.length,l=1!==a||t&&w.isFunction(t.promise)?a:0,c=1===l?t:w.Deferred();if(1<a)for(o=new Array(a),i=new Array(a),n=new Array(a);r<a;r++)s[r]&&w.isFunction(s[r].promise)?s[r].promise().done(e(r,n,s)).fail(c.reject).progress(e(r,i,o)):--l;return l||c.resolveWith(n,s),c.promise()}}),w.fn.ready=function(t){return w.ready.promise().done(t),this},w.extend({isReady:!1,readyWait:1,holdReady:function(t){t?w.readyWait++:w.ready(!0)},ready:function(t){(!0===t?--w.readyWait:w.isReady)||((w.isReady=!0)!==t&&0<--w.readyWait||(e.resolveWith(m,[w]),w.fn.triggerHandler&&(w(m).triggerHandler("ready"),w(m).off("ready"))))}}),w.ready.promise=function(t){return e||(e=w.Deferred(),"complete"===m.readyState?setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",n,!1),f.addEventListener("load",n,!1))),e.promise(t)},w.ready.promise();var a=w.access=function(t,e,i,n,o,r,s){var a=0,l=t.length,c=null==i;if("object"===w.type(i))for(a in o=!0,i)w.access(t,e,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,w.isFunction(n)||(s=!0),e=c?s?(e.call(t,n),null):(c=e,function(t,e,i){return c.call(w(t),i)}):e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):r};function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=w.expando+Math.random()}w.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=w.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var i={},n=e[this.expando];if(!n){n=s.uid++;try{i[this.expando]={value:n},Object.defineProperties(e,i)}catch(t){i[this.expando]=n,w.extend(e,i)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,i){var n,t=this.key(t),o=this.cache[t];if("string"==typeof e)o[e]=i;else if(w.isEmptyObject(o))w.extend(this.cache[t],e);else for(n in e)o[n]=e[n];return o},get:function(t,e){t=this.cache[this.key(t)];return void 0===e?t:t[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?void 0!==(n=this.get(t,e))?n:this.get(t,w.camelCase(e)):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,t=this.key(t),o=this.cache[t];if(void 0===e)this.cache[t]={};else{i=(n=w.isArray(e)?e.concat(e.map(w.camelCase)):(t=w.camelCase(e),e in o?[e,t]:(n=t)in o?[n]:n.match(k)||[])).length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!w.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var y=new s,l=new s,et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,it=/([A-Z])/g;function nt(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(it,"-$1").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:et.test(i)?w.parseJSON(i):i)}catch(t){}l.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return l.hasData(t)||y.hasData(t)},data:function(t,e,i){return l.access(t,e,i)},removeData:function(t,e){l.remove(t,e)},_data:function(t,e,i){return y.access(t,e,i)},_removeData:function(t,e){y.remove(t,e)}}),w.fn.extend({data:function(n,t){var e,i,o,r=this[0],s=r&&r.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){l.set(this,n)}):a(this,function(e){var t,i=w.camelCase(n);if(r&&void 0===e)return void 0!==(t=l.get(r,n))||void 0!==(t=l.get(r,i))?t:void 0!==(t=nt(r,i,void 0))?t:void 0;this.each(function(){var t=l.get(this,i);l.set(this,i,e),-1!==n.indexOf("-")&&void 0!==t&&l.set(this,n,e)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=l.get(r),1===r.nodeType&&!y.get(r,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&(0===(i=s[e].name).indexOf("data-")&&(i=w.camelCase(i.slice(5)),nt(r,i,o[i])));y.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){l.remove(this,t)})}}),w.extend({queue:function(t,e,i){var n;return t?(n=y.get(t,e=(e||"fx")+"queue"),i&&(!n||w.isArray(i)?n=y.access(t,e,w.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=w.queue(t,e),n=i.length,o=i.shift(),r=w._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,function(){w.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return y.get(t,i)||y.access(t,i,{empty:w.Callbacks("once memory").add(function(){y.remove(t,[e+"queue",i])})})}}),w.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?w.queue(this[0],e):void 0===i?this:this.each(function(){var t=w.queue(this,e,i);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function i(){--o||r.resolveWith(s,[s])}var n,o=1,r=w.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=y.get(s[a],t+"queueHooks"))&&n.empty&&(o++,n.empty.add(i));return i(),r.promise(e)}});function v(t,e){return"none"===w.css(t=e||t,"display")||!w.contains(t.ownerDocument,t)}var t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,c=["Top","Right","Bottom","Left"],ot=/^(?:checkbox|radio)$/i,b=(j=m.createDocumentFragment().appendChild(m.createElement("div")),(P=m.createElement("input")).setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),j.appendChild(P),g.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,j.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!j.cloneNode(!0).lastChild.defaultValue,"undefined"),rt=(g.focusinBubbles="onfocusin"in f,/^key/),st=/^(?:mouse|pointer|contextmenu)|click/,at=/^(?:focusinfocus|focusoutblur)$/,lt=/^([^.]*)(?:\.(.+)|)$/;function h(){return!0}function d(){return!1}function ct(){try{return m.activeElement}catch(t){}}w.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,c,u,h,d,p,f=y.get(e);if(f)for(i.handler&&(i=(r=i).handler,o=r.selector),i.guid||(i.guid=w.guid++),(a=f.events)||(a=f.events={}),(s=f.handle)||(s=f.handle=function(t){return typeof w!=b&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(k)||[""]).length;l--;)h=p=(d=lt.exec(t[l])||[])[1],d=(d[2]||"").split(".").sort(),h&&(c=w.event.special[h]||{},h=(o?c.delegateType:c.bindType)||h,c=w.event.special[h]||{},p=w.extend({type:h,origType:p,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:d.join(".")},r),(u=a[h])||((u=a[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,d,s)||e.addEventListener&&e.addEventListener(h,s,!1)),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,p):u.push(p),w.event.global[h]=!0)},remove:function(t,e,i,n,o){var r,s,a,l,c,u,h,d,p,f,g,m=y.hasData(t)&&y.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(k)||[""]).length;c--;)if(p=g=(a=lt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=w.event.special[p]||{},d=l[p=(n?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,m.handle)||w.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[c],i,n,!0);w.isEmptyObject(l)&&(delete m.handle,y.remove(t,"events"))}},trigger:function(t,e,i,n){var o,r,s,a,l,c,u=[i||m],h=$.call(t,"type")?t.type:t,d=$.call(t,"namespace")?t.namespace.split("."):[],p=r=i=i||m;if(3!==i.nodeType&&8!==i.nodeType&&!at.test(h+w.event.triggered)&&(0<=h.indexOf(".")&&(h=(d=h.split(".")).shift(),d.sort()),a=h.indexOf(":")<0&&"on"+h,(t=t[w.expando]?t:new w.Event(h,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:w.makeArray(e,[t]),c=w.event.special[h]||{},n||!c.trigger||!1!==c.trigger.apply(i,e))){if(!n&&!c.noBubble&&!w.isWindow(i)){for(s=c.delegateType||h,at.test(s+h)||(p=p.parentNode);p;p=p.parentNode)u.push(p),r=p;r===(i.ownerDocument||m)&&u.push(r.defaultView||r.parentWindow||f)}for(o=0;(p=u[o++])&&!t.isPropagationStopped();)t.type=1<o?s:c.bindType||h,(l=(y.get(p,"events")||{})[t.type]&&y.get(p,"handle"))&&l.apply(p,e),(l=a&&p[a])&&l.apply&&w.acceptData(p)&&(t.result=l.apply(p,e),!1===t.result&&t.preventDefault());return t.type=h,n||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),e)||!w.acceptData(i)||a&&w.isFunction(i[h])&&!w.isWindow(i)&&((r=i[a])&&(i[a]=null),i[w.event.triggered=h](),w.event.triggered=void 0,r&&(i[a]=r)),t.result}},dispatch:function(t){t=w.event.fix(t);var e,i,n,o,r,s=u.call(arguments),a=(y.get(this,"events")||{})[t.type]||[],l=w.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,t)){for(r=w.event.handlers.call(this,t,a),e=0;(n=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(o=((w.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,s))&&!1===(t.result=o)&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(n=[],i=0;i<a;i++)void 0===n[o=(r=e[i]).selector+" "]&&(n[o]=r.needsContext?0<=w(o,this).index(l):w.find(o,this,null,[l]).length),n[o]&&n.push(r);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||m).documentElement,n=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[w.expando])return t;var e,i,n,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=st.test(o)?this.mouseHooks:rt.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new w.Event(r),e=n.length;e--;)t[i=n[e]]=r[i];return t.target||(t.target=m),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ct()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ct()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&w.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return w.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){t=w.extend(new w.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?w.event.trigger(t,null,e):w.event.dispatch.call(e,t),t.isDefaultPrevented()&&i.preventDefault()}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},w.Event=function(t,e){return this instanceof w.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?h:d):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||w.now(),void(this[w.expando]=!0)):new w.Event(t,e)},w.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){w.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||w.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=o),e}}}),g.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(i,n){function o(t){w.event.simulate(n,t.target,w.event.fix(t),!0)}w.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=y.access(t,n);e||t.addEventListener(i,o,!0),y.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=y.access(t,n)-1;e?y.access(t,n,e):(t.removeEventListener(i,o,!0),y.remove(t,n))}}}),w.fn.extend({on:function(t,e,i,n,o){var r,s;if("object"==typeof t){for(s in"string"!=typeof e&&(i=i||e,e=void 0),t)this.on(s,e,i,t[s],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=d;else if(!n)return this;return 1===o&&(r=n,(n=function(t){return w().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=w.guid++)),this.each(function(){w.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=d),this.each(function(){w.event.remove(this,t,i,e)});for(o in t)this.off(o,e,t[o]);return this},trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?w.event.trigger(t,e,i,!0):void 0}});var ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ht=/<([\w:]+)/,dt=/<|&#?\w+;/,pt=/<(?:script|style|link)/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,gt=/^$|\/(?:java|ecma)script/i,mt=/^true\/(.*)/,yt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,p={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){return w.nodeName(t,"table")&&w.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function bt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function xt(t){var e=mt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function wt(t,e){for(var i=0,n=t.length;i<n;i++)y.set(t[i],"globalEval",!e||y.get(e[i],"globalEval"))}function kt(t,e){var i,n,o,r,s,a;if(1===e.nodeType){if(y.hasData(t)&&(r=y.access(t),s=y.set(e,r),a=r.events))for(o in delete s.handle,s.events={},a)for(i=0,n=a[o].length;i<n;i++)w.event.add(e,o,a[o][i]);l.hasData(t)&&(r=l.access(t),s=w.extend({},r),l.set(e,s))}}function x(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&w.nodeName(t,e)?w.merge([t],i):i}p.optgroup=p.option,p.tbody=p.tfoot=p.colgroup=p.caption=p.thead,p.th=p.td,w.extend({clone:function(t,e,i){var n,o,r,s,a,l,c,u=t.cloneNode(!0),h=w.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(s=x(u),n=0,o=(r=x(t)).length;n<o;n++)a=r[n],l=s[n],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ot.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(e)if(i)for(r=r||x(t),s=s||x(u),n=0,o=r.length;n<o;n++)kt(r[n],s[n]);else kt(t,u);return 0<(s=x(u,"script")).length&&wt(s,!h&&x(t,"script")),u},buildFragment:function(t,e,i,n){for(var o,r,s,a,l,c=e.createDocumentFragment(),u=[],h=0,d=t.length;h<d;h++)if((o=t[h])||0===o)if("object"===w.type(o))w.merge(u,o.nodeType?[o]:o);else if(dt.test(o)){for(r=r||c.appendChild(e.createElement("div")),s=(ht.exec(o)||["",""])[1].toLowerCase(),s=p[s]||p._default,r.innerHTML=s[1]+o.replace(ut,"<$1></$2>")+s[2],l=s[0];l--;)r=r.lastChild;w.merge(u,r.childNodes),(r=c.firstChild).textContent=""}else u.push(e.createTextNode(o));for(c.textContent="",h=0;o=u[h++];)if((!n||-1===w.inArray(o,n))&&(a=w.contains(o.ownerDocument,o),r=x(c.appendChild(o),"script"),a&&wt(r),i))for(l=0;o=r[l++];)gt.test(o.type||"")&&i.push(o);return c},cleanData:function(t){for(var e,i,n,o,r=w.event.special,s=0;void 0!==(i=t[s]);s++){if(w.acceptData(i)&&((o=i[y.expando])&&(e=y.cache[o]))){if(e.events)for(n in e.events)r[n]?w.event.remove(i,n):w.removeEvent(i,n,e.handle);y.cache[o]&&delete y.cache[o]}delete l.cache[i[l.expando]]}}}),w.fn.extend({text:function(t){return a(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||vt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=vt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?w.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||w.cleanData(x(i)),i.parentNode&&(e&&w.contains(i.ownerDocument,i)&&wt(x(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(x(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return a(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!pt.test(t)&&!p[(ht.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(ut,"<$1></$2>");try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(x(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,w.cleanData(x(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(i,n){i=q.apply([],i);var t,e,o,r,s,a,l=0,c=this.length,u=this,h=c-1,d=i[0],p=w.isFunction(d);if(p||1<c&&"string"==typeof d&&!g.checkClone&&ft.test(d))return this.each(function(t){var e=u.eq(t);p&&(i[0]=d.call(this,t,e.html())),e.domManip(i,n)});if(c&&(e=(t=w.buildFragment(i,this[0].ownerDocument,!1,this)).firstChild,1===t.childNodes.length&&(t=e),e)){for(r=(o=w.map(x(t,"script"),bt)).length;l<c;l++)s=t,l!==h&&(s=w.clone(s,!0,!0),r&&w.merge(o,x(s,"script"))),n.call(this[l],s,l);if(r)for(a=o[o.length-1].ownerDocument,w.map(o,xt),l=0;l<r;l++)s=o[l],gt.test(s.type||"")&&!y.access(s,"globalEval")&&w.contains(a,s)&&(s.src?w._evalUrl&&w._evalUrl(s.src):w.globalEval(s.textContent.replace(yt,"")))}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){w.fn[t]=function(t){for(var e,i=[],n=w(t),o=n.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),w(n[r])[s](e),z.apply(i,e.get());return this.pushStack(i)}});var Tt,At={};function Ct(t,e){t=w(e.createElement(t)).appendTo(e.body),e=f.getDefaultComputedStyle&&(e=f.getDefaultComputedStyle(t[0]))?e.display:w.css(t[0],"display");return t.detach(),e}function St(t){var e=m,i=At[t];return i||("none"!==(i=Ct(t,e))&&i||((e=(Tt=(Tt||w("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),i=Ct(t,e),Tt.detach()),At[t]=i),i}function Mt(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)}var Et,Pt,T,A,C,jt=/^margin/,Lt=new RegExp("^("+t+")(?!px)[a-z%]+$","i");function S(t,e,i){var n,o,r=t.style;return(i=i||Mt(t))&&(o=i.getPropertyValue(e)||i[e]),i&&(""!==o||w.contains(t.ownerDocument,t)||(o=w.style(t,e)),Lt.test(o)&&jt.test(e)&&(t=r.width,e=r.minWidth,n=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=t,r.minWidth=e,r.maxWidth=n)),void 0!==o?o+"":o}function _t(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function It(){C.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",C.innerHTML="",T.appendChild(A);var t=f.getComputedStyle(C,null);Et="1%"!==t.top,Pt="4px"===t.width,T.removeChild(A)}T=m.documentElement,A=m.createElement("div"),(C=m.createElement("div")).style&&(C.style.backgroundClip="content-box",C.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===C.style.backgroundClip,A.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",A.appendChild(C),f.getComputedStyle&&w.extend(g,{pixelPosition:function(){return It(),Et},boxSizingReliable:function(){return null==Pt&&It(),Pt},reliableMarginRight:function(){var t=C.appendChild(m.createElement("div"));return t.style.cssText=C.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",C.style.width="1px",T.appendChild(A),t=!parseFloat(f.getComputedStyle(t,null).marginRight),T.removeChild(A),t}})),w.swap=function(t,e,i,n){var o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in i=i.apply(t,n||[]),e)t.style[o]=r[o];return i};var Ot=/^(none|table(?!-c[ea]).+)/,Dt=new RegExp("^("+t+")(.*)$","i"),Rt=new RegExp("^([+-])=("+t+")","i"),Nt={position:"absolute",visibility:"hidden",display:"block"},qt={letterSpacing:"0",fontWeight:"400"},zt=["Webkit","O","Moz","ms"];function Ht(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,o=zt.length;o--;)if((e=zt[o]+i)in t)return e;return n}function $t(t,e,i){var n=Dt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function Bt(t,e,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,s=0;r<4;r+=2)"margin"===i&&(s+=w.css(t,i+c[r],!0,o)),n?("content"===i&&(s-=w.css(t,"padding"+c[r],!0,o)),"margin"!==i&&(s-=w.css(t,"border"+c[r]+"Width",!0,o))):(s+=w.css(t,"padding"+c[r],!0,o),"padding"!==i&&(s+=w.css(t,"border"+c[r]+"Width",!0,o)));return s}function Ft(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=Mt(t),s="border-box"===w.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(((o=S(t,e,r))<0||null==o)&&(o=t.style[e]),Lt.test(o))return o;n=s&&(g.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+Bt(t,e,i||(s?"border":"content"),n,r)+"px"}function Wt(t,e){for(var i,n,o,r=[],s=0,a=t.length;s<a;s++)(n=t[s]).style&&(r[s]=y.get(n,"olddisplay"),i=n.style.display,e?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&v(n)&&(r[s]=y.access(n,"olddisplay",St(n.nodeName)))):(o=v(n),"none"===i&&o||y.set(n,"olddisplay",o?i:w.css(n,"display"))));for(s=0;s<a;s++)!(n=t[s]).style||e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[s]||"":"none");return t}function M(t,e,i,n,o){return new M.prototype.init(t,e,i,n,o)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e)return""===(e=S(t,"opacity"))?"1":e}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){var o,r,s,a,l;if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style)return a=w.camelCase(e),l=t.style,e=w.cssProps[a]||(w.cssProps[a]=Ht(l,a)),s=w.cssHooks[e]||w.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:l[e]:("string"===(r=typeof i)&&(o=Rt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(w.css(t,e)),r="number"),void(null!=i&&i==i&&("number"!==r||w.cssNumber[a]||(i+="px"),g.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l[e]=i))))},css:function(t,e,i,n){var o,r=w.camelCase(e);return e=w.cssProps[r]||(w.cssProps[r]=Ht(t.style,r)),"normal"===(o=void 0===(o=(r=w.cssHooks[e]||w.cssHooks[r])&&"get"in r?r.get(t,!0,i):o)?S(t,e,n):o)&&e in qt&&(o=qt[e]),""===i||i?(r=parseFloat(o),!0===i||w.isNumeric(r)?r||0:o):o}}),w.each(["height","width"],function(t,o){w.cssHooks[o]={get:function(t,e,i){return e?Ot.test(w.css(t,"display"))&&0===t.offsetWidth?w.swap(t,Nt,function(){return Ft(t,o,i)}):Ft(t,o,i):void 0},set:function(t,e,i){var n=i&&Mt(t);return $t(0,e,i?Bt(t,o,i,"border-box"===w.css(t,"boxSizing",!1,n),n):0)}}}),w.cssHooks.marginRight=_t(g.reliableMarginRight,function(t,e){return e?w.swap(t,{display:"inline-block"},S,[t,"marginRight"]):void 0}),w.each({margin:"",padding:"",border:"Width"},function(o,r){w.cssHooks[o+r]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[o+c[e]+r]=n[e]||n[e-2]||n[0];return i}},jt.test(o)||(w.cssHooks[o+r].set=$t)}),w.fn.extend({css:function(t,e){return a(this,function(t,e,i){var n,o,r={},s=0;if(w.isArray(e)){for(n=Mt(t),o=e.length;s<o;s++)r[e[s]]=w.css(t,e[s],!1,n);return r}return void 0!==i?w.style(t,e,i):w.css(t,e)},t,e,1<arguments.length)},show:function(){return Wt(this,!0)},hide:function(){return Wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){v(this)?w(this).show():w(this).hide()})}}),((w.Tween=M).prototype={constructor:M,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(w.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return(t&&t.get?t:M.propHooks._default).get(this)},run:function(t){var e=M.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(e&&e.set?e:M.propHooks._default).set(this),this}}).init.prototype=M.prototype,(M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[w.cssProps[t.prop]]||w.cssHooks[t.prop])?w.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},w.fx=M.prototype.init,w.fx.step={};var E,Gt,P,j,Ut=/^(?:toggle|show|hide)$/,Vt=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),Xt=/queueHooks$/,Yt=[function(e,t,i){var n,o,r,s,a,l,c,u=this,h={},d=e.style,p=e.nodeType&&v(e),f=y.get(e,"fxshow");for(n in i.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],c=w.css(e,"display"),"inline"===("none"===c?y.get(e,"olddisplay")||St(e.nodeName):c)&&"none"===w.css(e,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]})),t)if(o=t[n],Ut.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||void 0===f[n])continue;p=!0}h[n]=f&&f[n]||w.style(e,n)}else c=void 0;if(w.isEmptyObject(h))"inline"===("none"===c?St(e.nodeName):c)&&(d.display=c);else for(n in f?"hidden"in f&&(p=f.hidden):f=y.access(e,"fxshow",{}),r&&(f.hidden=!p),p?w(e).show():u.done(function(){w(e).hide()}),u.done(function(){for(var t in y.remove(e,"fxshow"),h)w.style(e,t,h[t])}),h)s=Jt(p?f[n]:0,n,u),n in f||(f[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}],L={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),e=Vt.exec(e),o=e&&e[3]||(w.cssNumber[t]?"":"px"),r=(w.cssNumber[t]||"px"!==o&&+n)&&Vt.exec(w.css(i.elem,t)),s=1,a=20;if(r&&r[3]!==o)for(o=o||r[3],e=e||[],r=+n||1;w.style(i.elem,t,(r/=s=s||".5")+o),s!==(s=i.cur()/n)&&1!==s&&--a;);return e&&(r=i.start=+r||+n||0,i.unit=o,i.end=e[1]?r+(e[1]+1)*e[2]:+e[2]),i}]};function Qt(){return setTimeout(function(){E=void 0}),E=w.now()}function Kt(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=c[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function Jt(t,e,i){for(var n,o=(L[e]||[]).concat(L["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,e,t))return n}function Zt(o,t,e){var i,r,n,s,a,l,c,u=0,h=Yt.length,d=w.Deferred().always(function(){delete p.elem}),p=function(){if(r)return!1;for(var t=E||Qt(),t=Math.max(0,f.startTime+f.duration-t),e=1-(t/f.duration||0),i=0,n=f.tweens.length;i<n;i++)f.tweens[i].run(e);return d.notifyWith(o,[f,e,t]),e<1&&n?t:(d.resolveWith(o,[f]),!1)},f=d.promise({elem:o,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:E||Qt(),duration:e.duration,tweens:[],createTween:function(t,e){e=w.Tween(o,f.opts,t,e,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(e),e},stop:function(t){var e=0,i=t?f.tweens.length:0;if(r)return this;for(r=!0;e<i;e++)f.tweens[e].run(1);return t?d.resolveWith(o,[f,t]):d.rejectWith(o,[f,t]),this}}),g=f.props,m=g,y=f.opts.specialEasing;for(n in m)if(s=w.camelCase(n),a=y[s],l=m[n],w.isArray(l)&&(a=l[1],l=m[n]=l[0]),n!==s&&(m[s]=l,delete m[n]),c=w.cssHooks[s],c&&"expand"in c)for(n in l=c.expand(l),delete m[s],l)n in m||(m[n]=l[n],y[n]=a);else y[s]=a;for(;u<h;u++)if(i=Yt[u].call(f,o,g,f.opts))return i;return w.map(g,Jt,f),w.isFunction(f.opts.start)&&f.opts.start.call(o,f),w.fx.timer(w.extend(p,{elem:o,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}w.Animation=w.extend(Zt,{tweener:function(t,e){for(var i,n=0,o=(t=w.isFunction(t)?(e=t,["*"]):t.split(" ")).length;n<o;n++)i=t[n],L[i]=L[i]||[],L[i].unshift(e)},prefilter:function(t,e){e?Yt.unshift(t):Yt.push(t)}}),w.speed=function(t,e,i){var n=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||w.isFunction(t)&&t,duration:t,easing:i&&e||e&&!w.isFunction(e)&&e};return n.duration=w.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in w.fx.speeds?w.fx.speeds[n.duration]:w.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){w.isFunction(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,i,n){return this.filter(v).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){function o(){var t=Zt(this,w.extend({},e),s);(r||y.get(this,"finish"))&&t.stop(!0)}var r=w.isEmptyObject(e),s=w.speed(t,i,n);return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(o,t,r){function s(t){var e=t.stop;delete t.stop,e(r)}return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",i=w.timers,n=y.get(this);if(e)n[e]&&n[e].stop&&s(n[e]);else for(e in n)n[e]&&n[e].stop&&Xt.test(e)&&s(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=o&&i[e].queue!==o||(i[e].anim.stop(r),t=!1,i.splice(e,1));!t&&r||w.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=y.get(this),i=e[s+"queue"],n=e[s+"queueHooks"],o=w.timers,r=i?i.length:0;for(e.finish=!0,w.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),w.each(["toggle","show","hide"],function(t,n){var o=w.fn[n];w.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(Kt(n,!0),t,e,i)}}),w.each({slideDown:Kt("show"),slideUp:Kt("hide"),slideToggle:Kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){w.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(E=w.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),E=void 0},w.fx.timer=function(t){w.timers.push(t),t()?w.fx.start():w.timers.pop()},w.fx.interval=13,w.fx.start=function(){Gt=Gt||setInterval(w.fx.tick,w.fx.interval)},w.fx.stop=function(){clearInterval(Gt),Gt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(n,t){return n=w.fx&&w.fx.speeds[n]||n,this.queue(t=t||"fx",function(t,e){var i=setTimeout(t,n);e.stop=function(){clearTimeout(i)}})},P=m.createElement("input"),j=m.createElement("select"),t=j.appendChild(m.createElement("option")),P.type="checkbox",g.checkOn=""!==P.value,g.optSelected=t.selected,j.disabled=!0,g.optDisabled=!t.disabled,(P=m.createElement("input")).value="t",P.type="radio",g.radioValue="t"===P.value;var te,_=w.expr.attrHandle,ee=(w.fn.extend({attr:function(t,e){return a(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute==b?w.prop(t,e,i):(1===r&&w.isXMLDoc(t)||(e=e.toLowerCase(),n=w.attrHooks[e]||(w.expr.match.bool.test(e)?te:void 0)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:null==(o=w.find.attr(t,e))?void 0:o:null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void w.removeAttr(t,e))},removeAttr:function(t,e){var i,n,o=0,r=e&&e.match(k);if(r&&1===t.nodeType)for(;i=r[o++];)n=w.propFix[i]||i,w.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){var i;if(!g.radioValue&&"radio"===e&&w.nodeName(t,"input"))return i=t.value,t.setAttribute("type",e),i&&(t.value=i),e}}}}),te={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var r=_[e]||w.find.attr;_[e]=function(t,e,i){var n,o;return i||(o=_[e],_[e]=n,n=null!=r(t,e,i)?e.toLowerCase():null,_[e]=o),n}}),/^(?:input|select|textarea|button)$/i),ie=(w.fn.extend({prop:function(t,e){return a(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!w.isXMLDoc(t))&&(e=w.propFix[e]||e,o=w.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ee.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),g.optSelected||(w.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),/[\t\r\n\f]/g),ne=(w.fn.extend({addClass:function(e){var t,i,n,o,r,s,a="string"==typeof e&&e,l=0,c=this.length;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(k)||[];l<c;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(ie," "):" ")){for(r=0;o=t[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=w.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,o,r,s,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(k)||[];l<c;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(ie," "):"")){for(r=0;o=t[r++];)for(;0<=n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");s=e?w.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(o,e){var r=typeof o;return"boolean"==typeof e&&"string"==r?e?this.addClass(o):this.removeClass(o):this.each(w.isFunction(o)?function(t){w(this).toggleClass(o.call(this,t,this.className,e),e)}:function(){if("string"==r)for(var t,e=0,i=w(this),n=o.match(k)||[];t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else r!=b&&"boolean"!=r||(this.className&&y.set(this,"__className__",this.className),this.className=!this.className&&!1!==o&&y.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(ie," ").indexOf(e))return!0;return!1}}),/\r/g),oe=(w.fn.extend({val:function(e){var i,t,n,o=this[0];return arguments.length?(n=w.isFunction(e),this.each(function(t){1===this.nodeType&&(null==(t=n?e.call(this,t,w(this).val()):e)?t="":"number"==typeof t?t+="":w.isArray(t)&&(t=w.map(t,function(t){return null==t?"":t+""})),(i=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):o?(i=w.valHooks[o.type]||w.valHooks[o.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(o,"value"))?t:"string"==typeof(t=o.value)?t.replace(ne,""):null==t?"":t:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:w.trim(w.text(t))}},select:{get:function(t){for(var e,i=t.options,n=t.selectedIndex,o="select-one"===t.type||n<0,r=o?null:[],s=o?n+1:i.length,a=n<0?s:o?n:0;a<s;a++)if(!(!(e=i[a]).selected&&a!==n||(g.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&w.nodeName(e.parentNode,"optgroup"))){if(e=w(e).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,r=w.makeArray(e),s=o.length;s--;)((n=o[s]).selected=0<=w.inArray(n.value,r))&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){return w.isArray(e)?t.checked=0<=w.inArray(w(t).val(),e):void 0}},g.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,i){w.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),w.now()),re=/\?/;w.parseJSON=function(t){return JSON.parse(t+"")},w.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),e};var I,O,se=/#.*$/,ae=/([?&])_=[^&]*/,le=/^(.*?):[ \t]*([^\r\n]*)$/gm,ce=/^(?:GET|HEAD)$/,ue=/^\/\//,he=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,de={},pe={},fe="*/".concat("*");try{O=location.href}catch(t){(O=m.createElement("a")).href="",O=O.href}function ge(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,o=t.toLowerCase().match(k)||[];if(w.isFunction(e))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(r[i]=r[i]||[]).unshift(e)):(r[i]=r[i]||[]).push(e)}}function me(e,n,o,r){var s={},a=e===pe;function l(t){var i;return s[t]=!0,w.each(e[t]||[],function(t,e){e=e(n,o,r);return"string"!=typeof e||a||s[e]?a?!(i=e):void 0:(n.dataTypes.unshift(e),l(e),!1)}),i}return l(n.dataTypes[0])||!s["*"]&&l("*")}function ye(t,e){var i,n,o=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n=n||{})[i]=e[i]);return n&&w.extend(!0,t,n),t}I=he.exec(O.toLowerCase())||[],w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:O,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(I[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ye(ye(t,w.ajaxSettings),e):ye(w.ajaxSettings,t)},ajaxPrefilter:ge(de),ajaxTransport:ge(pe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var l,c,u,i,h,d,n,p=w.ajaxSetup({},e=e||{}),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?w(f):w.event,m=w.Deferred(),y=w.Callbacks("once memory"),v=p.statusCode||{},o={},r={},b=0,s="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!i)for(i={};e=le.exec(u);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?u:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=r[i]=r[i]||t,o[t]=e),this},overrideMimeType:function(t){return b||(p.mimeType=t),this},statusCode:function(t){if(t)if(b<2)for(var e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){t=t||s;return l&&l.abort(t),a(0,t),this}};if(m.promise(x).complete=y.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||O)+"").replace(se,"").replace(ue,I[1]+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=w.trim(p.dataType||"*").toLowerCase().match(k)||[""],null==p.crossDomain&&(t=he.exec(p.url.toLowerCase()),p.crossDomain=!(!t||t[1]===I[1]&&t[2]===I[2]&&(t[3]||("http:"===t[1]?"80":"443"))===(I[3]||("http:"===I[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),me(de,p,e,x),2===b)return x;for(n in(d=p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!ce.test(p.type),c=p.url,p.hasContent||(p.data&&(c=p.url+=(re.test(c)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=ae.test(c)?c.replace(ae,"$1_="+oe++):c+(re.test(c)?"&":"?")+"_="+oe++)),p.ifModified&&(w.lastModified[c]&&x.setRequestHeader("If-Modified-Since",w.lastModified[c]),w.etag[c]&&x.setRequestHeader("If-None-Match",w.etag[c])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+fe+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(n,p.headers[n]);if(p.beforeSend&&(!1===p.beforeSend.call(f,x,p)||2===b))return x.abort();for(n in s="abort",{success:1,error:1,complete:1})x[n](p[n]);if(l=me(pe,p,e,x)){x.readyState=1,d&&g.trigger("ajaxSend",[x,p]),p.async&&0<p.timeout&&(h=setTimeout(function(){x.abort("timeout")},p.timeout));try{b=1,l.send(o,a)}catch(t){if(!(b<2))throw t;a(-1,t)}}else a(-1,"No Transport");function a(t,e,i,n){var o,r,s,a=e;2!==b&&(b=2,h&&clearTimeout(h),l=void 0,u=n||"",x.readyState=0<t?4:0,n=200<=t&&t<300||304===t,i&&(s=function(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s=s||o}r=r||s}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}(p,x,i)),s=function(t,e,i,n){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,s,x,n),n?(p.ifModified&&((i=x.getResponseHeader("Last-Modified"))&&(w.lastModified[c]=i),(i=x.getResponseHeader("etag"))&&(w.etag[c]=i)),204===t||"HEAD"===p.type?a="nocontent":304===t?a="notmodified":(a=s.state,o=s.data,n=!(r=s.error))):(r=a,!t&&a||(a="error",t<0&&(t=0))),x.status=t,x.statusText=(e||a)+"",n?m.resolveWith(f,[o,a,x]):m.rejectWith(f,[x,a,r]),x.statusCode(v),v=void 0,d&&g.trigger(n?"ajaxSuccess":"ajaxError",[x,p,n?o:r]),y.fireWith(f,[x,a]),d&&(g.trigger("ajaxComplete",[x,p]),--w.active||w.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,o){w[o]=function(t,e,i,n){return w.isFunction(e)&&(n=n||i,i=e,e=void 0),w.ajax({url:t,type:o,dataType:n,data:e,success:i})}}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w._evalUrl=function(t){return w.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(e){var t;return w.isFunction(e)?this.each(function(t){w(this).wrapAll(e.call(this,t))}):(this[0]&&(t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(i){return this.each(w.isFunction(i)?function(t){w(this).wrapInner(i.call(this,t))}:function(){var t=w(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=w.isFunction(e);return this.each(function(t){w(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}}),w.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},w.expr.filters.visible=function(t){return!w.expr.filters.hidden(t)};var ve=/%20/g,be=/\[\]$/,xe=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;w.param=function(t,e){function i(t,e){e=w.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)}var n,o=[];if(void 0===e&&(e=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){i(this.name,this.value)});else for(n in t)!function i(n,t,o,r){if(w.isArray(t))w.each(t,function(t,e){o||be.test(n)?r(n,e):i(n+"["+("object"==typeof e?t:"")+"]",e,o,r)});else if(o||"object"!==w.type(t))r(n,t);else for(var e in t)i(n+"["+e+"]",t[e],o,r)}(n,t[n],e,i);return o.join("&").replace(ve,"+")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&ke.test(this.nodeName)&&!we.test(t)&&(this.checked||!ot.test(t))}).map(function(t,e){var i=w(this).val();return null==i?null:w.isArray(i)?w.map(i,function(t){return{name:e.name,value:t.replace(xe,"\r\n")}}):{name:e.name,value:i.replace(xe,"\r\n")}}).get()}}),w.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Te=0,Ae={},Ce={0:200,1223:204},D=w.ajaxSettings.xhr(),Se=(f.ActiveXObject&&w(f).on("unload",function(){for(var t in Ae)Ae[t]()}),g.cors=!!D&&"withCredentials"in D,g.ajax=D=!!D,w.ajaxTransport(function(r){var s;return g.cors||D&&!r.crossDomain?{send:function(t,e){var i,n=r.xhr(),o=++Te;if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);s=function(t){return function(){s&&(delete Ae[o],s=n.onload=n.onerror=null,"abort"===t?n.abort():"error"===t?e(n.status,n.statusText):e(Ce[n.status]||n.status,n.statusText,"string"==typeof n.responseText?{text:n.responseText}:void 0,n.getAllResponseHeaders()))}},n.onload=s(),n.onerror=s("error"),s=Ae[o]=s("abort");try{n.send(r.hasContent&&r.data||null)}catch(t){if(s)throw t}},abort:function(){s&&s()}}:void 0}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(i){var n,o;if(i.crossDomain)return{send:function(t,e){n=w("<script>").prop({async:!0,charset:i.scriptCharset,src:i.url}).on("load error",o=function(t){n.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),m.head.appendChild(n[0])},abort:function(){o&&o()}}}),[]),Me=/(=)\?(?=&|$)|\?\?/,Ee=(w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Se.pop()||w.expando+"_"+oe++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(t,e,i){var n,o,r,s=!1!==t.jsonp&&(Me.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Me.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=w.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Me,"$1"+n):!1!==t.jsonp&&(t.url+=(re.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return r||w.error(n+" was not called"),r[0]},t.dataTypes[0]="json",o=f[n],f[n]=function(){r=arguments},i.always(function(){f[n]=o,t[n]&&(t.jsonpCallback=e.jsonpCallback,Se.push(n)),r&&w.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),w.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||m;var n=V.exec(t),i=!i&&[];return n?[e.createElement(n[1])]:(n=w.buildFragment([t],e,i),i&&i.length&&w(i).remove(),w.merge([],n.childNodes))},w.fn.load),Pe=(w.fn.load=function(t,e,i){if("string"!=typeof t&&Ee)return Ee.apply(this,arguments);var n,o,r,s=this,a=t.indexOf(" ");return 0<=a&&(n=w.trim(t.slice(a)),t=t.slice(0,a)),w.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<s.length&&w.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,r||[t.responseText,e,t])}),this},w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},f.document.documentElement);function je(t){return w.isWindow(t)?t:9===t.nodeType&&t.defaultView}w.offset={setOffset:function(t,e,i){var n,o,r,s,a=w.css(t,"position"),l=w(t),c={};"static"===a&&(t.style.position="relative"),r=l.offset(),n=w.css(t,"top"),s=w.css(t,"left"),a=("absolute"===a||"fixed"===a)&&-1<(n+s).indexOf("auto")?(o=(a=l.position()).top,a.left):(o=parseFloat(n)||0,parseFloat(s)||0),null!=(e=w.isFunction(e)?e.call(t,i,r):e).top&&(c.top=e.top-r.top+o),null!=e.left&&(c.left=e.left-r.left+a),"using"in e?e.using.call(t,c):l.css(c)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,i=this[0],n={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,w.contains(t,i)?(typeof i.getBoundingClientRect!=b&&(n=i.getBoundingClientRect()),i=je(o),{top:n.top+i.pageYOffset-t.clientTop,left:n.left+i.pageXOffset-t.clientLeft}):n):void 0},position:function(){var t,e,i,n;if(this[0])return i=this[0],n={top:0,left:0},"fixed"===w.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),(n=w.nodeName(t[0],"html")?n:t.offset()).top+=w.css(t[0],"borderTopWidth",!0),n.left+=w.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-w.css(i,"marginTop",!0),left:e.left-n.left-w.css(i,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!w.nodeName(t,"html")&&"static"===w.css(t,"position");)t=t.offsetParent;return t||Pe})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;w.fn[e]=function(t){return a(this,function(t,e,i){var n=je(t);return void 0===i?n?n[o]:t[e]:void(n?n.scrollTo(r?f.pageXOffset:i,r?i:f.pageYOffset):t[e]=i)},e,t,arguments.length,null)}}),w.each(["top","left"],function(t,i){w.cssHooks[i]=_t(g.pixelPosition,function(t,e){return e?(e=S(t,i),Lt.test(e)?w(t).position()[i]+"px":e):void 0})}),w.each({Height:"height",Width:"width"},function(r,s){w.each({padding:"inner"+r,content:s,"":"outer"+r},function(n,t){w.fn[t]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),o=n||(!0===t||!0===e?"margin":"border");return a(this,function(t,e,i){var n;return w.isWindow(t)?t.document.documentElement["client"+r]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+r],n["scroll"+r],t.body["offset"+r],n["offset"+r],n["client"+r])):void 0===i?w.css(t,e,o):w.style(t,e,i,o)},s,i?t:void 0,i,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Le=f.jQuery,_e=f.$;return w.noConflict=function(t){return f.$===w&&(f.$=_e),t&&f.jQuery===w&&(f.jQuery=Le),w},typeof R==b&&(f.jQuery=f.$=w),w}),define("lib-shim/jquery",["jquery"],function(t){"use strict";return t.noConflict()}),define("tracking/tealium-utag-data",["require","jquery"],function(t){"use strict";var n=t("jquery"),o="tealium-data";return{read:function(t){var e=n(document),i=e.find("#initial-tealium-data"),e=e.find("#tlmdata").data(o)||i.data(o)||void 0,t=(e&&(e.pageViewGuid=t.viewGuid),i.data("tealium-environment")||void 0);return{data:e||{},environment:t}}}}),!function(t){define("ba-debug",[],function(){return function(){return window.debug=function(){for(var n,o,r=this,s=Array.prototype.slice,a=r.console,e={},l=9,c=["error","warn","info","debug","log"],t="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),i=t.length,u=[];0<=--i;)!function(t){e[t]=function(){0!==l&&a&&a[t]&&a[t].apply(a,arguments)}}(t[i]);for(i=c.length;0<=--i;)!function(i,n){e[n]=function(){var t=s.call(arguments),e=[n].concat(t);u.push(e),h(e),a&&(e=i,0<l?e<l:c.length+l<=e)&&(a.firebug?a[n].apply(r,t):a[n]?a[n](t):a.log(t))}}(i,c[i]);function h(t){!n||!o&&a&&a.log||n.apply(r,t)}return e.setLevel=function(t){l="number"==typeof t?t:9},e.setCallback=function(){var t=s.call(arguments),e=u.length,i=e;for(n=t.shift()||null,o="boolean"==typeof t[0]&&t.shift(),i-="number"==typeof t[0]?t.shift():e;i<e;)h(u[i++])},e}(),t.debug=debug}.apply(t,arguments)})}(this),define("debug",["require","ba-debug"],function(t){"use strict";var i=t("ba-debug");return["error","warn","info","debug","log"].forEach(function(t){var e=i[t];i[t]=function(){var t=[].slice.call(arguments);t.unshift(new Date),e.apply(i,t)}}),i}),!function(t){"function"==typeof define&&define.amd?define("jquery-cookie",["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(h){var i=/\+/g;function d(t){return f.raw?t:encodeURIComponent(t)}function p(t,e){t=f.raw?t:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(i," ")),f.json?JSON.parse(t):t}catch(t){}}(t);return h.isFunction(e)?e(t):t}var f=h.cookie=function(t,e,i){var n,o;if(void 0!==e&&!h.isFunction(e))return"number"==typeof(i=h.extend({},f.defaults,i)).expires&&(n=i.expires,(o=i.expires=new Date).setTime(+o+864e5*n)),document.cookie=[d(t),"=",(o=e,d(f.json?JSON.stringify(o):String(o))),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("");for(var r=t?void 0:{},s=document.cookie?document.cookie.split("; "):[],a=0,l=s.length;a<l;a++){var c=s[a].split("="),u=(u=c.shift(),f.raw?u:decodeURIComponent(u)),c=c.join("=");if(t&&t===u){r=p(c,e);break}t||void 0===(c=p(c))||(r[u]=c)}return r};f.defaults={},h.removeCookie=function(t,e){return void 0!==h.cookie(t)&&(h.cookie(t,"",h.extend({},e,{expires:-1})),!h.cookie(t))}}),define("core/jqueryajax",["require","jquery","jquery-cookie"],function(t){function e(){}var a=t("jquery");t("jquery-cookie");function l(t,e,i){if(t.push){for(var n=0;n<t.length;n++)if(t[n].name===e)return t;t.push({name:e,value:i})}else"string"==typeof t?t+="&"+encodeURIComponent(e)+"="+encodeURIComponent(i):t[e]=t[e]||i;return t}return e.prototype.get=function(t,e,i,n){return this.request("GET",t,e,i,n)},e.prototype.post=function(t,e,i,n){return this.request("POST",t,e,i,n)},e.prototype.request=function(t,e,i,n,o){i=i||{},n=n||{};var r,s="http"===e.substr(0,4),s=(s||(n=l(n,"ajax",1)),s||"POST"!==t||(n=function(t){var e=a.cookie("csrftoken");e&&(t=l(t,"csrfmiddlewaretoken",e));return t}(n)),{type:t,cache:i.cache,headers:i.headers,dataType:i.dataType,traditional:i.traditional,data:n}),n=(t=e,void 0===(i=s).async&&(i.async=!0),r=a.ajax(t,{cache:i.cache,headers:i.headers,type:i.type,dataType:i.dataType,traditional:i.traditional,data:i.data,xhr:"json"==i.dataType&&window.IEXMLHttpRequest?window.IEXMLHttpRequest:a.ajaxSettings.xhr,async:i.async}),(t=new Promise(function(t,n){r.done(t),r.fail(function(t,e,i){n(t.responseJSON)})})).abort=r.abort,t);return n.then(function(t){var e=null;t&&t.error&&(e=new Error(t.error.message)),o&&o(e,t)}),n.catch(function(t){o&&o(new Error(t))}),n},e}),define("core/ajax",["core/jqueryajax"],function(t){return new t}),define("core/media-size-v2",["require","jquery"],function(t){"use strict";var t=t("jquery"),e=t("<span>",{id:"media-test"}),i=t("<span>",{class:"visible-xs-inline"}),n=t("<span>",{class:"visible-sm-inline"}),o=t("<span>",{class:"visible-md-inline"}),r=t("<span>",{class:"visible-lg-inline"});return i.appendTo(e),n.appendTo(e),o.appendTo(e),r.appendTo(e),e.appendTo("body"),{getMediaSize:function(){return"none"!==i.css("display")?"xs":"none"!==n.css("display")?"sm":"none"!==o.css("display")?"md":"none"!==r.css("display")?"lg":null},isMobile:function(){return"xs"===this.getMediaSize()},breakpoints:["xs","sm","md","lg"]}}),define("player/playlink-handler",["require","jquery","lodash","core/ajax","core/media-size-v2"],function(t){"use strict";function o(t,e){this.$el=t,this.app=e}var r=t("jquery"),n=t("lodash"),e=t("core/ajax"),s=t("core/media-size-v2");function i(t,e){var i=t.length?t[t.length-1]:null;return i&&e.trackUrl===i.trackUrl||t.push(e),t}return o.prototype.STARTED_BY_PLAYLINK="playlink",o.prototype.STARTED_BY_SINGLE_PLAYLINK="single-playlink",o.prototype.STARTED_BY_STATION_BUTTON="station-playlink",o.prototype.STARTED_BY_VIDEO_PREVIEW_PLAYLINK="video-preview-playlink",o.prototype.start=function(){var n;this.app.player&&(n=this.play.bind(this),this.$el.on("click",".js-playlink",function(t){t.preventDefault();var e,t=r(t.currentTarget),i=o.prototype.STARTED_BY_PLAYLINK,t=(t.parents(".js-video-preview-playlink").length&&(i=o.prototype.STARTED_BY_VIDEO_PREVIEW_PLAYLINK),t.is("[data-single-track]")||s.isMobile()?(e=[t],i=o.prototype.STARTED_BY_SINGLE_PLAYLINK):e=this.findAllFollowingPlaylinks(t),this.tracksFromPlaylinks(e,i));n(t)}.bind(this)),this.$el.on("click",".js-playlink-station",function(t){t=r(t.currentTarget);this.stationUrl=t.data("stationUrl"),this.stationPage=1,this.retrieveStationTracks(function(t){n(t)})}.bind(this)),this.$el.on("click","[data-play-all]",function(t){t.preventDefault();var t=r(t.currentTarget),e=t.attr("data-playlink-affiliate"),t=t.attr("data-play-all"),t=this.$el.find("#"+t),t=this.findAllPlaylinksIn(t,e),e=this.tracksFromPlaylinks(t,o.prototype.STARTED_BY_PLAYLINK);n(e)}.bind(this)),this.app.eventMediator.subscribe("player.track.tuning",this.trackStarted.bind(this)),this.app.eventMediator.subscribe("player.track.stopped",this.trackStopped.bind(this)),this.app.eventMediator.subscribe("player.track.finished",this.trackStopped.bind(this)))},o.prototype.retrieveStationTracks=function(i){this.stationUrl&&e.get(this.stationUrl,null,{page:this.stationPage},function(t,e){e=e&&e.playlist,e=this.tracksFromPlaylist(e);i&&i(e)}.bind(this))},o.prototype.trackStarted=function(t){var e=this;t.playlink&&(e.$el.find("[data-player-now-playing]").removeAttr("data-player-now-playing"),t.playlink.attr("data-player-now-playing","")),e.app.player.isLast()&&(e.stationPage++,e.retrieveStationTracks(function(t){e.app.player.queue(t)}))},o.prototype.trackStopped=function(){this.$el.find("[data-player-now-playing]").removeAttr("data-player-now-playing")},o.prototype.stop=function(){this.$el.off("click",".js-playlink")},o.prototype.play=function(t){0===t.length?this.app.eventMediator.publish("player.playlist.request.error"):(this.app.player.queue(t,!0),this.app.player.play())},o.prototype.findAllFollowingPlaylinks=function(e){var t=e.attr("data-playlink-affiliate"),i=this.$el.find(".js-playlink").toArray(),i=this.filterPlaylinksByAffiliate(i,t);return n.tail(i,function(t){return!r(t).is(e)})},o.prototype.findAllPlaylinksIn=function(t,e){t=t.find(".js-playlink").toArray();return this.filterPlaylinksByAffiliate(t,e)},o.prototype.filterPlaylinksByAffiliate=function(t,e){return t.filter(function(t){return r(t).attr("data-playlink-affiliate")===e})},o.prototype.tracksFromPlaylist=function(t){if(!t)return[];return t.filter(function(t){return t.playlinks&&t.playlinks.length}).map(function(t){var e={trackName:t.name,artistName:t.artists[0].name,artistUrl:t.artists[0].url,trackUrl:t.url,startedBy:o.prototype.STARTED_BY_STATION_BUTTON};return t.playlinks.forEach(function(t){e[t.affiliate+"Id"]=t.id,e[t.affiliate+"Url"]=t.url}),e})},o.prototype.tracksFromPlaylinks=function(t,e){return t.map(function(t,e){e=r(e),t={playlink:e,startedBy:t};return r.extend(t,e.data())}.bind(this,e)).reduce(i,[])},o}),define("tracking/event-tracking",["require","debug","jquery","player/playlink-handler"],function(t){"use strict";function e(t){t.subscribe("player.track.playing",this.playerEventHandler.bind(this,"PlayTrack")),t.subscribe("player.track.paused",this.playerEventHandler.bind(this,"PauseTrack")),t.subscribe("player.track.finished",this.playerEventHandler.bind(this,"PlayTrackFinished")),t.subscribe("player.track.playing",this.trackPlayHandler.bind(this)),t.subscribe("player.track.positionChanged",this.positionChangedHandler.bind(this)),t.subscribe("autoplay-video.ad-start",this.trackEvent.bind(this,"VideoAdStart")),t.subscribe("autoplay-video.ad-end",this.trackEvent.bind(this,"VideoAdComplete")),t.subscribe("autoplay-video.video-start",this.trackEvent.bind(this,"VideoStart")),t.subscribe("autoplay-video.video-end",this.trackEvent.bind(this,"VideoComplete")),t.subscribe("stubhub.search",this.trackEvent.bind(this,"StubHubCheck")),t.subscribe("stubhub.match",this.trackEvent.bind(this,"StubHubMatch")),t.subscribe("stubhub.nomatch",this.trackEvent.bind(this,"StubHubNoMatch")),t.subscribe("playlisting.import.spotify",this.trackEvent.bind(this,"Import","Spotify")),t.subscribe("playlisting.import.youtube",this.trackEvent.bind(this,"Import","Youtube")),t.subscribe("playlisting.import.apple-music",this.trackEvent.bind(this,"Import","AppleMusic")),t.subscribe("onboarding.tourguide.dismiss",this.trackEvent.bind(this,"Tourguide","Dismiss")),t.subscribe("onboarding.tourguide.complete",this.trackEvent.bind(this,"Tourguide","Complete")),t.subscribe("lazy-recs-bar.shown",this.trackEvent.bind(this,"LazyRecsBarShown")),i("body").on("click.event-tracking","[data-analytics-social]",this.socialHandler),i("body").on("click.event-tracking","[data-analytics-action]",this.analyticsHandler.bind(this)),t.subscribe("gallery.visit",this.trackEvent.bind(this,"galleryVisited"))}var n=t("debug"),i=t("jquery"),o=t("player/playlink-handler"),r="TrackDurationExceeded",s="TrackDurationExceededBy5Seconds";return e.prototype={trackEvent:function(t,e,i){window.om&&void 0!==t&&(t={gaEventAction:t},void 0!==e&&(t.gaEventLabel=e),void 0!==i&&(t.gaEventValue=i),window.om.trackEvent(t),n.info("Event tracked",t))},playerEventHandler:function(t,e){e&&e.startedBy===o.prototype.STARTED_BY_VIDEO_PREVIEW_PLAYLINK&&(t+="Video"),this.trackEvent(t,e&&e.affiliate)},socialHandler:function(t){window.om&&(t={id:i(t.currentTarget).data("analyticsSocial")},window.om.trackSocialClick(t),n.info("Social event tracked",t))},analyticsHandler:function(t){this.trackEvent(i(t.currentTarget).data("analyticsAction")||"",i(t.currentTarget).data("analyticsLabel")||"",i(t.currentTarget).data("analyticsValue")||"")},trackPlayHandler:function(t){this.durationTracking&&t===this.durationTracking.track||(this.durationTracking={track:t})},positionChangedHandler:function(t){this.durationTracking&&(t>this.durationTracking.track.duration&&!this.durationTracking[r]&&(this.trackEvent(r,this.durationTracking.track.affiliate),this.durationTracking[r]=!0),5<=t-this.durationTracking.track.duration&&!this.durationTracking[s]&&(this.trackEvent(s,this.durationTracking.track.affiliate),this.durationTracking[s]=!0))}},e}),define("tracking/tealium",["require","core/module-requiring-consent","tracking/tealium-utag-data","tracking/event-tracking"],function(e){"use strict";function t(t){i.call(this,t.consentManager,t.consentManager.SCRIPTS_READY),this.app=t}var i=e("core/module-requiring-consent"),n=e("tracking/tealium-utag-data"),o=e("tracking/event-tracking");return((t.prototype=Object.create(i.prototype)).constructor=t).prototype.start=function(){var t=n.read(this.app).environment;this.loadUtagJS(t),this.eventTracking=new o(this.app.eventMediator),this.app.eventMediator.subscribe("page.transitionComplete",this.recordAsyncPageView.bind(this))},t.prototype.loadUtagJS=function(t){e(["https://tags.tiqcdn.com/utag/cbsi/lastfmsite/"+t+"/utag.js"])},t.prototype.recordAsyncPageView=function(){var t=n.read(this.app).data;window.utag&&window.utag.view(t)},t}),define("core/consent-manager",["require","jquery","lodash"],function(i){"use strict";function t(){this.consentGiven={},this.deferred={},this.nextHandleIndex=0;var t=e("body").is("[data-onetrust-prod]");this.loadLibrary(t).then(this.waitForScriptsReady.bind(this)).then(this.checkConsent.bind(this)).then(this.waitForConsent.bind(this))}var e=i("jquery"),n=i("lodash");return t.prototype.SCRIPTS_READY="scriptsReady",t.prototype.PERFORMANCE="2",t.prototype.FUNCTIONAL="3",t.prototype.TARGETING="4",t.prototype.loadLibrary=function(t){return new Promise(function(t,e){i(["optanon"],t)})},t.prototype.waitForScriptsReady=function(){window.cbsoptanon.onScriptsReady(this.scriptsReady.bind(this))},t.prototype.waitForConsent=function(){window.cbsoptanon.ot.addOnConsentChangedHandler(this.checkConsent.bind(this))},t.prototype.scriptsReady=function(){this.handleConsentGiven(this.SCRIPTS_READY)},t.prototype.checkConsent=function(){window.cbsoptanon.ot.performanceAllowed(function(t){t&&this.handleConsentGiven(this.PERFORMANCE)}.bind(this)),window.cbsoptanon.ot.functionalAllowed(function(t){t&&this.handleConsentGiven(this.FUNCTIONAL)}.bind(this)),window.cbsoptanon.ot.targetingAllowed(function(t){t&&this.handleConsentGiven(this.TARGETING)}.bind(this))},t.prototype.handleConsentGiven=function(t){this.consentGiven[t]||(this.consentGiven[t]=!0,this.unblockDeferrals(t))},t.prototype.unblockDeferrals=function(i){n(this.deferred).forEach(function(t,e){this.handleIsForCategory(i,e)&&(delete this.deferred[e],t&&t())}.bind(this))},t.prototype.deferUntilConsentGiven=function(t,e){if(!this.consentGiven[e])return e=this.nextHandleId(e),this.deferred[e]=t,e;t()},t.prototype.ifConsentGiven=function(t,e){this.consentGiven[e]&&t()},t.prototype.cancelDeferral=function(t){this.deferred[t]=void 0},t.prototype.nextHandleId=function(t){return t+","+this.nextHandleIndex++},t.prototype.handleIsForCategory=function(t,e){return e.split(",")[0]==t},t}),define("shim/youtube",["require"],function(e){"use strict";var t;return function(){return t=t||new Promise(function(t){window.onYouTubeIframeAPIReady=function(){t(window.YT)},e(["youtube-iframe-api"])})}}),!function(O){define("modernizr",[],function(){return function(){var s=window,u=document,C=void 0;function S(t,e){return typeof t===e}function M(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function E(t){return"function"!=typeof u.createElement?u.createElement(t):w?u.createElementNS.call(u,"http://www.w3.org/2000/svg",t):u.createElement.apply(u,arguments)}function o(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function r(t,e,i,n){var o,r,s,a,l="modernizr",c=E("div");(a=u.body)||((a=E(w?"svg":"body")).fake=!0);if(parseInt(i,10))for(;i--;)(r=E("div")).id=n?n[i]:l+(i+1),c.appendChild(r);return(o=E("style")).type="text/css",o.id="s"+l,(a.fake?a:c).appendChild(o),a.appendChild(c),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(u.createTextNode(t)),c.id=l,a.fake&&(a.style.background="",a.style.overflow="hidden",s=x.style.overflow,x.style.overflow="hidden",x.appendChild(a)),o=e(c,t),a.fake?(a.parentNode.removeChild(a),x.style.overflow=s,x.offsetHeight):c.parentNode.removeChild(c),!!o}function P(t,e){var i=t.length;if("CSS"in s&&"supports"in s.CSS){for(;i--;)if(s.CSS.supports(o(t[i]),e))return!0;return!1}if("CSSSupportsRule"in s){for(var n=[];i--;)n.push("("+o(t[i])+":"+e+")");return r("@supports ("+(n=n.join(" or "))+") { #modernizr { position: absolute; } }",function(t){return"absolute"==(t=t,e=null,i="position","getComputedStyle"in s?(n=getComputedStyle.call(s,t,e),o=s.console,null!==n?i&&(n=n.getPropertyValue(i)):o&&o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")):n=!e&&t.currentStyle&&t.currentStyle[i],n);var e,i,n,o})}return C}function n(t,e,i,n,o){var r,s,a=t.charAt(0).toUpperCase()+t.slice(1),l=(t+" "+j.join(a+" ")+a).split(" ");if(S(e,"string")||void 0===e){var c=l,u=e,h=n,d=o;function p(){f&&(delete _.style,delete _.modElem)}if(d=void 0!==d&&d,void 0!==h){n=P(c,h);if(void 0!==n)return n}for(var f,g,m,y,v,b=["modernizr","tspan","samp"];!_.style&&b.length;)f=!0,_.modElem=E(b.shift()),_.style=_.modElem.style;for(m=c.length,g=0;g<m;g++)if(y=c[g],v=_.style[y],~(""+y).indexOf("-")&&(y=M(y)),_.style[y]!==C){if(d||void 0===h)return p(),"pfx"!=u||y;try{_.style[y]=h}catch(t){}if(_.style[y]!=v)return p(),"pfx"!=u||y}return p(),!1}var x=l=(t+" "+L.join(a+" ")+a).split(" "),w=e,k=i;for(s in x)if(x[s]in w)if(!1===k)return x[s];else{r=w[x[s]];if(S(r,"function")){var T=r;var A=k||w;return function(){return T.apply(A,arguments)};return}else return r}return!1}function a(t){var e,i=prefixes.length,n=s.CSSRule;if(void 0===n)return C;if(!t)return!1;if((e=(t=t.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in n)return"@"+t;for(var o=0;o<i;o++){var r=prefixes[o];if(r.toUpperCase()+"_"+e in n)return"@-"+r.toLowerCase()+"-"+t}return!1}var t,e,i,l,c,h,d,p,f,g,m=[],y=[],v={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){y.push({name:t,fn:e,options:i})},addAsyncTest:function(t){y.push({name:null,fn:t})}},b=function(){},x=(b.prototype=v,b=new b,u.documentElement),w="svg"===x.nodeName.toLowerCase(),k=(b.addTest("video",function(){var t=E("video"),e=!1;try{(e=!!t.canPlayType)&&((e=new Boolean(e)).ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),e.vp9=t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),e.hls=t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(t){}return e}),{}.toString),T=(b.addTest("svgforeignobject",function(){return!!u.createElementNS&&/SVGForeignObject/.test(k.call(u.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}),b.addTest("csspointerevents",function(){var t=E("a").style;return t.cssText="pointer-events:auto","auto"===t.pointerEvents}),"Moz O ms Webkit"),j=v._config.usePrefixes?T.split(" "):[],L=(v._cssomPrefixes=j,v.atRule=a,v._config.usePrefixes?T.toLowerCase().split(" "):[]),A=(v._domPrefixes=L,{elem:E("modernizr")}),_=(b._q.push(function(){delete A.elem}),{style:A.elem.style});for(d in b._q.unshift(function(){delete _.style}),v.testAllProps=n,v.prefixed=function(t,e,i){return 0===t.indexOf("@")?a(t):(-1!=t.indexOf("-")&&(t=M(t)),e?n(t,e,i):n(t,"pfx"))},y)if(y.hasOwnProperty(d)){if(t=[],(e=y[d]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(l=S(e.fn,"function")?e.fn():e.fn,c=0;c<t.length;c++)1===(h=t[c].split(".")).length?b[h[0]]=l:(!b[h[0]]||b[h[0]]instanceof Boolean||(b[h[0]]=new Boolean(b[h[0]])),b[h[0]][h[1]]=l),m.push((l?"":"no-")+h.join("-"))}T=m,f=x.className,g=b._config.classPrefix||"",w&&(f=f.baseVal),b._config.enableJSClass&&(p=new RegExp("(^|\\s)"+g+"no-js(\\s|$)"),f=f.replace(p,"$1"+g+"js$2")),b._config.enableClasses&&(f+=" "+g+T.join(" "+g),w?x.className.baseVal=f:x.className=f),delete v.addTest,delete v.addAsyncTest;for(var I=0;I<b._q.length;I++)b._q[I]();return s.Modernizr=b,O.Modernizr=Modernizr}.apply(O,arguments)})}(this),define("ads/audience-network",[],function(){"use strict";return{loadPrebidApi:function(){return window.AudienceNetworkPrebid?new Promise.resolve(window.AudienceNetworkPrebid):new Promise(function(t){var e,i,n;e=document,i="an-prebid",n=e.getElementsByTagName("script")[0],e.getElementById(i)||((e=e.createElement("script")).id=i,e.src="//connect.facebook.com/en_US/AudienceNetworkPrebid.js",n.parentNode.insertBefore(e,n)),window.anPrebidAsyncInit=function(){t(window.AudienceNetworkPrebid)}})}}}),define("ads/video-ad-url",["require","jquery","ads/audience-network"],function(t){"use strict";var i=t("jquery"),o=t("ads/audience-network");return function(t,e){return((n=t)?o.loadPrebidApi().then(function(t){return new Promise(function(e,i){new t(n).getProfile(function(t){t&&t.token&&"nobid"!==t.token&&e(t.token),i()})})}):new Promise.reject).then(r.bind(null,e,"fan"),r.bind(null,e,""));var n};function r(t,e){(t=(t=t)||{}).bidid=e;e={iu:"/8264/vaw-lastfm/desktop",sz:"640x480",impl:"s",gdfp_req:"1",env:"vp",output:"xml_vmap1",pp:"vpaid_js",unviewed_position_start:"1",url:"[referrer_url]",correlator:"[timestamp]",cust_params:i.param(t||{})};return Promise.resolve("https://pubads.g.doubleclick.net/gampad/ads?"+i.param(e))}}),define("components/cbsi-player",["require","jquery","lodash","shim/youtube","modernizr","ads/video-ad-url"],function(e){"use strict";function t(t,e){this.app=t,this.sessionOptions={partner:"lastfm",nativeControls:!0,autoHide:!1,usesIMA:!0,usesTealium:!1,uvpc:e}}var i,a=e("jquery"),l=e("lodash"),n=e("shim/youtube"),o=e("modernizr"),c=e("ads/video-ad-url"),u=0,r=0;return t.prototype.playVideo=function(t,o,r){var s=t.attr("id")||"cbsiplayer-"+u++;t.attr("id",s),this.createVideoPlayer(s,r.previewImage,r.autoplay).then(function(i){r.mute&&i.mute(),om.getHbParams&&i.setPageContextMetadata(om.getHbParams()),r.events&&l.forOwn(r.events,function(t,e){this.addEventListener(i,e,t)}.bind(this));var t,e,n={type:uvpjs.mediaCapabilities.RP_PLATFORM,vidContId:s,pid:o};r.disableAds?i.loadAndPlayResource(n):(t=this.app.adTargeting(),e=a("body").data("facebook-placement-id"),c(e,t).then(function(t){n.type=uvpjs.mediaCapabilities.RP_IMA,n.adCall=t,i.loadAndPlayResource(n)}))}.bind(this))},t.prototype.destroyPlayer=function(e){this.videoManager().then(function(t){t.destroyVideoPlayer(e.attr("id"))})},t.prototype.isSupported=function(){return!(void 0!==document.documentMode)&&o.video},t.prototype.addEventListener=function(t,e,i){e+="."+r++,t.addEventListener(e,i)},t.prototype.createVideoPlayer=function(n,t,o){return this.videoManager().then(function(e){var i={skin:!0,previewImage:t,enableMutedAutoplay:o,enableUnmutedAutoplay:o};return new Promise(function(t){e.createVideoPlayer(n,t,i)})}.bind(this))},t.prototype.videoManager=function(){return this.loadingVideoManager||(this.loadingVideoManager=this.api().then(this.loadVideoManager.bind(this))),this.loadingVideoManager},t.prototype.loadVideoManager=function(){return new Promise(function(t,e){var i=new uvpjs.VideoManager;i.initialize(this.sessionOptions,t.bind(this,i),e)}.bind(this))},t.prototype.api=function(){return i=i||n().then(function(){return new Promise(function(t){e(["ima","cbsi-player-html5"],t)}.bind(this))}.bind(this))},t}),define("core/dom-require/module-finder",["jquery"],function(r){"use strict";return new function(){var o=this;o.find=function(t){var e=[],i="[data-require]",t=t||r("html"),n=r(i,t);return t.is(i)&&(e=e.concat(o.generateModuleObjects(t))),n.each(function(){e=e.concat(o.generateModuleObjects(r(this)))}),e},o.generateModuleObjects=function(e){return e.data("require").split(",").map(function(t){return{location:t.trim(),element:e}})}}}),define("core/dom-require/module-loader",["require","jquery","core/dom-require/module-finder","lodash"],function(t){"use strict";var i=t("jquery"),e=t("core/dom-require/module-finder"),a=t("lodash");return function(o){var r=this,s=(r.domReady=!1,r.elementCount=0,r.require=t,r._activeModules=[],r.start=function(){r.domReady||(r.preDomReadySearchTimer=setTimeout(r.startPreDomModules,150))},r.startPreDomModules=function(){var t;!r.domReady&&document.body&&(t=r.getElementCount(),r.elementCount<t&&(r.elementCount=t,r.startAllModules())),r.domReady||(r.preDomReadySearchTimer=setTimeout(r.startPreDomModules,150))},r.getElementCount=function(){return i("*").length},r.handleDomReady=function(){r.domReady=!0,clearTimeout(r.preDomReadySearchTimer),delete r.preDomReadySearchTimer,delete r.elementCount,r.startAllModules()},r.startAllModules=function(t){e.find(t).forEach(function(t){r.startModule(t.location,t.element)})},r.stopAllModules=function(e){r._activeModules.forEach(function(t){t.stopped||e&&i.contains(document,t.element[0])&&!i.contains(e[0],t.element[0])||(t.stopped=!0,a.isFunction(t.module.stop)&&t.module.stop())}),r._activeModules=r._activeModules.filter(function(t){return!t.stopped})},r.startModule=function(e,i){var t=i.data("starting")||{},n=i.data("started")||{};a(n).has(e)||a(t).has(e)||!r.isElementContentLoaded(i)||(t[e]=!0,i.data("starting",t),r.require([e],function(t){s(t,i,e)}))},function(t,e,i){var n=e.data("started")||{};t&&(t=new t(e,o),a.isFunction(t.start)&&(t.start(),n[i]=!0,e.data("started",n),r._activeModules.push({module:t,element:e})))});r.isElementContentLoaded=function(t){if(r.domReady)return!0;for(;0===t.next().length&&!t.is("html");)if(0===(t=t.parent()).length)return!0;return!t.is("html")},o.eventMediator.subscribe("domReady",r.handleDomReady)}}),!function(t){define("jquery-pjax",["jquery"],function(){return function(){function t(t,i,n){var o=this;return this.on("click.pjax",t,function(t){var e=T.extend({},l(i,n));e.container||(e.container=T(this).attr("data-pjax")||o),r(t,e)})}function r(t,e,i){i=l(e,i);var n,e=t.currentTarget;if("A"!==e.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||((n=e).href instanceof SVGAnimatedString&&(n=v(n.getAttribute("href"))),location.protocol!==n.protocol||location.hostname!==n.hostname||-1<n.href.indexOf("#")&&s(n)==s(location)||t.isDefaultPrevented()||(n={url:n.href,container:T(e).attr("data-pjax"),target:e},n=T.extend({},n,i),i=T.Event("pjax:click"),T(e).trigger(i,[n]),i.isDefaultPrevented()||(p(n),t.preventDefault(),T(e).trigger("pjax:clicked",[n]))))}function e(t,e,i){i=l(e,i);var e=t.currentTarget,n=T(e);if("FORM"!==e.tagName.toUpperCase())throw"$.pjax.submit requires a form element";n={type:(n.attr("method")||"GET").toUpperCase(),url:n.attr("action"),container:n.attr("data-pjax"),target:e};if("GET"!==n.type&&void 0!==window.FormData)n.data=new FormData(e),n.processData=!1,n.contentType=!1;else{if(T(e).find(":file").length)return;n.data=T(e).serializeArray()}p(T.extend({},n,i)),t.preventDefault()}function p(c){c=T.extend(!0,{},T.ajaxSettings,p.defaults,c),T.isFunction(c.url)&&(c.url=c.url());var i,n=c.target,u=v(c.url).hash,h=c.context=b(c.container);function d(t,e,i){(i=i||{}).relatedTarget=n;t=T.Event(t,i);return h.trigger(t,e),!t.isDefaultPrevented()}c.data||(c.data={}),T.isArray(c.data)?c.data.push({name:"_pjax",value:h.selector}):c.data._pjax=h.selector,c.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",h.selector),!d("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(i=setTimeout(function(){d("pjax:timeout",[t,c])&&t.abort("timeout")},e.timeout),e.timeout=0);e=v(e.url);u&&(e.hash=u),c.requestUrl=a(e)},c.complete=function(t,e){i&&clearTimeout(i),d("pjax:complete",[t,e,c]),d("pjax:end",[t,c])},c.error=function(t,e,i){var n=x("",t,c),t=d("pjax:error",[t,e,i,c]);"GET"==c.type&&"abort"!==e&&t&&f(n.url)},c.success=function(t,e,i){var n=p.state,o="function"==typeof T.pjax.defaults.version?T.pjax.defaults.version():T.pjax.defaults.version,r=i.getResponseHeader("X-PJAX-Version"),s=x(t,i,c),a=v(s.url);if(u&&(a.hash=u,s.url=a.href),o&&r&&o!==r)f(s.url);else if(s.contents){if(p.state={id:c.id||m(),url:s.url,title:s.title,container:h.selector,fragment:c.fragment,timeout:c.timeout},(c.push||c.replace)&&window.history.replaceState(p.state,s.title,s.url),T.contains(c.container,document.activeElement))try{document.activeElement.blur()}catch(t){}s.title&&(document.title=s.title),d("pjax:beforeReplace",[s.contents,c],{state:p.state,previousState:n}),h.html(s.contents);var l,a=h.find("input[autofocus], textarea[autofocus]").last()[0],r=(a&&document.activeElement!==a&&a.focus(),(o=s.scripts)&&(l=T("script[src]"),o.each(function(){var t,e,i=this.src;l.filter(function(){return this.src===i}).length||(t=document.createElement("script"),(e=T(this).attr("type"))&&(t.type=e),t.src=T(this).attr("src"),document.head.appendChild(t))})),c.scrollTo);u&&(n=decodeURIComponent(u.slice(1)),(a=document.getElementById(n)||document.getElementsByName(n)[0])&&(r=T(a).offset().top)),"number"==typeof r&&T(window).scrollTop(r),d("pjax:success",[t,e,i,c])}else f(s.url)},p.state||(p.state={id:m(),url:window.location.href,title:document.title,container:h.selector,fragment:c.fragment,timeout:c.timeout},window.history.replaceState(p.state,document.title)),g(p.xhr),p.options=c;var t,e,o=p.xhr=T.ajax(c);return 0<o.readyState&&(c.push&&!c.replace&&(t=p.state.id,e=y(h),M[t]=e,P.push(t),w(E,0),w(P,p.defaults.maxCacheLength),window.history.pushState(null,"",c.requestUrl)),d("pjax:start",[o,c]),d("pjax:send",[o,c])),p.xhr}function i(t,e){var i={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return p(T.extend(i,l(t,e)))}function f(t){window.history.replaceState(null,"",p.state.url),window.location.replace(t)}function n(t){A||g(p.xhr);var e,i=p.state,t=t.state;if(t&&t.container){if(A&&C==t.url)return;if(i){if(i.id===t.id)return;e=i.id<t.id?"forward":"back"}var n,o,r,s,a=M[t.id]||[],l=T(a[0]||t.container),a=a[1];l.length?(i&&(o=e,s=i.id,r=y(l),M[s]=r,r="forward"===o?(n=P,E):(n=E,P),n.push(s),(s=r.pop())&&delete M[s],w(n,p.defaults.maxCacheLength)),o=T.Event("pjax:popstate",{state:t,direction:e}),l.trigger(o),r={id:t.id,url:t.url,container:l,push:!1,fragment:t.fragment,timeout:t.timeout,scrollTo:!1},a?(l.trigger("pjax:start",[null,r]),(p.state=t).title&&(document.title=t.title),s=T.Event("pjax:beforeReplace",{state:t,previousState:i}),l.trigger(s,[a,r]),l.html(a),l.trigger("pjax:end",[null,r])):p(r),l[0].offsetHeight):f(location.href)}A=!1}function o(t){var e,i=T.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",o=T("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"}),r=("GET"!==n&&"POST"!==n&&o.append(T("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()})),t.data);if("string"==typeof r)T.each(r.split("&"),function(t,e){e=e.split("=");o.append(T("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if(T.isArray(r))T.each(r,function(t,e){o.append(T("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof r)for(e in r)o.append(T("<input>",{type:"hidden",name:e,value:r[e]}));T(document.body).append(o),o.submit()}function g(t){t&&t.readyState<4&&(t.onreadystatechange=T.noop,t.abort())}function m(){return(new Date).getTime()}function y(t){var e=t.clone();return e.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[t.selector,e.contents()]}function a(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function v(t){var e=document.createElement("a");return e.href=t,e}function s(t){return t.href.replace(/#.*/,"")}function l(t,e){return t&&e?e.container=t:e=T.isPlainObject(t)?t:{container:t},e.container&&(e.container=b(e.container)),e}function b(t){if((t=T(t)).length){if(""!==t.selector&&t.context===document)return t;if(t.attr("id"))return T("#"+t.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+t.selector}function c(t,e){return t.filter(e).add(t.find(e))}function u(t){return T.parseHTML(t,document,!0)}function x(t,e,i){var n,o,r={},s=/<html/i.test(t),e=e.getResponseHeader("X-PJAX-URL");return r.url=e?a(v(e)):i.requestUrl,s?(o=T(u(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),n=T(u(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))):o=n=T(u(t)),0===n.length||(r.title=c(o,"title").last().text(),i.fragment?(e="body"===i.fragment?n:c(n,i.fragment).first()).length&&(r.contents="body"===i.fragment?e:e.contents(),r.title||(r.title=e.attr("title")||e.data("title"))):s||(r.contents=n),r.contents&&(r.contents=r.contents.not(function(){return T(this).is("title")}),r.contents.find("title").remove(),r.scripts=c(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=T.trim(r.title))),r}function w(t,e){for(;t.length>e;)delete M[t.shift()]}function h(){return T("meta").filter(function(){var t=T(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function d(){T.fn.pjax=t,T.pjax=p,T.pjax.enable=T.noop,T.pjax.disable=k,T.pjax.click=r,T.pjax.submit=e,T.pjax.reload=i,T.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:h},T(window).on("popstate.pjax",n)}function k(){T.fn.pjax=function(){return this},T.pjax=o,T.pjax.enable=d,T.pjax.disable=T.noop,T.pjax.click=T.noop,T.pjax.submit=T.noop,T.pjax.reload=function(){window.location.reload()},T(window).off("popstate.pjax",n)}var T,A,C,S,M,E,P;T=jQuery,A=!0,C=window.location.href,(S=window.history.state)&&S.container&&(p.state=S),"state"in window.history&&(A=!1),M={},E=[],P=[],T.inArray("state",T.event.props)<0&&T.event.props.push("state"),T.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(T.support.pjax?d:k)()}.apply(t,arguments)})}(this),define("core/browser-api",["require","jquery","jquery-cookie"],function(t){"use strict";var e=t("jquery");return t("jquery-cookie"),{navigator:navigator,WebSocket:WebSocket,window:window,document:document,cookies:{setCookie:e.cookie},download:function(t,e){var i=document.createElement("a");i.download=e,i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)},requestFullScreen:function(t){var e=t.requestFullScreen||t.mozRequestFullScreen||t.webkitRequestFullScreen;e&&e.call(t)},exitFullScreen:function(){var t=document.exitFullscreen||document.mozExitFullscreen||document.webkitExitFullscreen;t&&t.call(document)},fullScreenElement:function(){return document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement},isPreloadSupported:function(){try{return document.createElement("link").relList.supports("preload")}catch(t){return!1}}}}),define("core/sensitive-paths",["require","jquery"],function(t){"use strict";var n=t("jquery");return{isSensitivePath:function(t){var e=n("body").data("sensitive-path-regex"),e=new RegExp(e),i=document.createElement("a"),t=(i.href=t,i.pathname);return e.test(t)}}}),define("core/partial-refresh",["require","jquery","lodash","jquery-pjax","core/browser-api","core/sensitive-paths"],function(t){"use strict";var a=t("jquery"),l=t("lodash"),n=(t("jquery-pjax"),t("core/browser-api")),o=t("core/sensitive-paths");return function(t,e,r){var s=this,i="#content";a.pjax.defaults.timeout=1e4,a.pjax.defaults.maxCacheLength=0,s.start=function(){e.subscribe("player.track.playing",s.setPlayerActive),e.subscribe("player.track.paused",s.setPlayerInactive),e.subscribe("player.track.stopped",s.setPlayerInactive),e.subscribe("ads.requested",s.setUntrusted),s.$container=a(i),t.on("click.partial-refresh",i+" a",function(t){var e,i,n,o;t.isDefaultPrevented()||(e=a(t.currentTarget).attr("href"),n=s.isSensitiveUrl(e),o=-1!==l.indexOf(r,e),i=n&&s.untrusted&&s.playerActive,n=n&&s.untrusted||o,i?(o=-1!==e.indexOf("?")?"&":"?",s.openInNewWindow(e+o+"playerActive=1"),t.preventDefault()):n&&(s.loadUrl(e),t.preventDefault()))}),t.pjax('a:not(a[target="_blank"])',i),t.on("pjax:beforeSend.partial-refresh",function(t,e){s.untrusted&&e.setRequestHeader("PJAX-CONTEXT-HAS-ADS","true"),s.beforeSend()}),t.on("click.partial-refresh","form:not([data-no-partial-refresh]) [type=submit][name][value]",function(t){var t=a(t.target),e=(t=t.is("[type=submit][name][value]")?t:t.parents("[type=submit][name][value]")).parents("form"),i=a('<input type="hidden" data-partial-refresh-submit-value />');i.attr({name:t.attr("name"),value:t.attr("value")}),e.append(i)}),t.on("submit.partial-refresh",function(t){t.currentTarget=t.target,a(t.target).is("[data-no-partial-refresh]")||t.isDefaultPrevented()||(a.pjax.submit(t,i),a("[data-partial-refresh-submit-value]").remove())}),t.on("pjax:beforeReplace.partial-refresh",function(t,e){s.beforeReplace(e)}),t.on("pjax:end.partial-refresh",function(t,e,i){e||s.afterReplace()}),t.on("pjax:success.partial-refresh",function(){s.afterReplace()}),t.on("pjax:error.partial-refresh",function(t,e,i,n,o){t.preventDefault(),o.success(e.responseText,e.status,e)})},s.isSensitiveUrl=function(t){return o.isSensitivePath(t)},s.setPlayerActive=function(){s.playerActive=!0},s.setPlayerInactive=function(){s.playerActive=!1},s.setUntrusted=function(){s.untrusted=!0},s.openInNewWindow=function(t){n.window.open(t)},s.loadUrl=function(t){n.window.location.assign(t)},s.beforeSend=function(){e.publish("partialRefresh.beforeSend",s.$container)},s.beforeReplace=function(t){s.removePageSpecificStyles(),s.replaceStylesheets(t),s.updateHeadTags(t),e.publish("partialRefresh.beforeReplace",s.$container)},s.afterReplace=function(){e.publish("partialRefresh.afterReplace",s.$container),s.updateBodyClass(),s.updateHtmlLang()},s.updateHeadTags=function(t){a("head [data-replaceable-head-tag]").remove(),t&&(t=t.filter(".js-replacement-header-tags"),t=a(t.text()),a("head").append(t))},s.updateBodyClass=function(){var t=(t=a("[data-body-class]",s.$container).data("body-class"))||"";/js-focus-visible/.test(document.body.className)&&(t+=" js-focus-visible"),a(document.body).attr("class",t)},s.updateHtmlLang=function(){var t=a("[data-html-lang]",s.$container).data("html-lang");t&&a("html").attr("lang",t)},s.stop=function(){a(document).off(".partial-refresh"),a(document).off(".pjax")},s.replaceContent=function(t){a.pjax({url:t,container:i})},s.replaceStylesheets=function(t){var n;t&&(n=t).each(function(t,e){var i;e&&"LINK"===e.tagName&&a(e).is("[data-stylesheet-name]")&&(e=n.splice(t,1)[0],e=a(t=e),t=a(t).data("stylesheetName"),(i=a("[data-stylesheet-name="+t+"]")).length&&i.attr("href")!==e.attr("href")&&e.on("load",function(){i.remove()}),a("head").append(e))})},s.removePageSpecificStyles=function(){a("[data-stylesheet-name=page-specific]").remove()}}}),!function(i,n){"use strict";var e,o,r,s,a,l,c,t;function u(t){return o[e]=h.apply(n,t),e++}function h(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function d(t){if(r)setTimeout(h(d,t),0);else{var e=o[t];if(e){r=!0;try{e()}finally{p(t),r=!1}}}}function p(t){delete o[t]}function f(){function t(t){t.source===i&&"string"==typeof t.data&&0===t.data.indexOf(e)&&d(+t.data.slice(e.length))}var e="setImmediate$"+Math.random()+"$";i.addEventListener?i.addEventListener("message",t,!1):i.attachEvent("onmessage",t),a=function(){var t=u(arguments);return i.postMessage(e+t,"*"),t}}i.setImmediate||(e=1,r=!(o={}),s=i.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(i))&&t.setTimeout?t:i,"[object process]"==={}.toString.call(i.process)?a=function(){var t=u(arguments);return process.nextTick(h(d,t)),t}:!function(){var t,e;if(i.postMessage&&!i.importScripts)return t=!0,e=i.onmessage,i.onmessage=function(){t=!1},i.postMessage("","*"),i.onmessage=e,t}()?a=i.MessageChannel?((c=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(){var t=u(arguments);return c.port2.postMessage(t),t}):s&&"onreadystatechange"in s.createElement("script")?(l=s.documentElement,function(){var t=u(arguments),e=s.createElement("script");return e.onreadystatechange=function(){d(t),e.onreadystatechange=null,l.removeChild(e),e=null},l.appendChild(e),t}):function(){var t=u(arguments);return setTimeout(h(d,t),0),t}:f(),t.setImmediate=a,t.clearImmediate=p)}("undefined"==typeof self?"undefined"==typeof global?this:global:self),define("set-immediate",function(){}),define("core/event-mediator",["jquery","set-immediate"],function(t){"use strict";function e(){this.subscribers={},this.mostRecentMessage={},this.DOM_READY_EVENT="domReady",this.domReady=!1,this.nextSubscriptionId=0,this.PROCESS_NONE="none",this.PROCESS_HEAD="head",window.lfmDomReadyCallback=function(){this.domReady=!0,this.publish(this.DOM_READY_EVENT,!0)}.bind(this),window.lfmDomReady&&window.lfmDomReadyCallback(),t(document).on("keyup",function(t){this.publish("keyup",t)}.bind(this))}return e.prototype.subscribe=function(t,e,i){if(void 0===i&&(i=this.PROCESS_HEAD),"function"!=typeof e)throw new Error("Invalid Argument - callback must be a function");var n=this.nextSubscriptionId++;return this.subscribers[t]||(this.subscribers[t]={}),this.subscribers[t][n]=e,i===this.PROCESS_HEAD&&void 0!==this.mostRecentMessage[t]&&(i=this.mostRecentMessage[t],this.triggerSubscription(e,i)),{id:n,event:t}},e.prototype.triggerSubscription=function(t,e,...i){setImmediate(function(t,e,...i){t(e,...i)}.bind(this,t,e,...i))},e.prototype.publish=function(t,e,...i){if(this.mostRecentMessage[t]=void 0===e?null:e,this.subscribers[t])for(var n in this.subscribers[t])this.subscribers[t].hasOwnProperty(n)&&(n=this.subscribers[t][n],this.triggerSubscription(n,e,...i))},e.prototype.unsubscribe=function(t){t&&"object"==typeof t&&"object"==typeof this.subscribers[t.event]&&delete this.subscribers[t.event][t.id]},e.prototype.reset=function(){this.mostRecentMessage={}},e}),!function(e,i){"object"==typeof module&&module.exports?module.exports=function(t){return t=t||require("lodash"),i(t)}:"function"==typeof define&&define.amd?define("machina",["lodash"],function(t){return i(t,e)}):e.machina=i(e._,e)}(this,function(a,t,l){function e(t){a.extend(this,t),a.defaults(this,h.getDefaultOptions()),this.initialize.apply(this,arguments),p.emit("newfsm",this),this.initialState&&this.transition(this.initialState)}var i,o,r,n,c=[].slice,s="transition",u="handler",h={makeFsmNamespace:(i=0,function(){return"fsm."+i++}),getDefaultOptions:function(){return{initialState:"uninitialized",eventListeners:{"*":[]},states:{},eventQueue:[],namespace:h.makeFsmNamespace(),targetReplayState:"",state:l,priorState:l,_priorAction:"",_currentAction:""}}},d=(a.deepExtend||(o={"*":function(t,e,i){t[e]=i},object:function(t,e,i){t[e]=n({},t[e]||{},i)},array:function(i,n,t){i[n]=[],a.each(t,function(t,e){o[r(t)](i[n],e,t)},this)}},r=function(t){t=t;t=a.isArray(t)?"array":a.isDate(t)?"date":a.isRegExp(t)?"regex":typeof t;return o[t]?t:"*"},n=function(i){return a.each(c.call(arguments,1),function(t){a.each(t,function(t,e){o[r(t)](i,e,t)})}),i},a.mixin({deepExtend:n})),a.extend(e.prototype,{initialize:function(){},emit:function(t){var e=arguments;this.eventListeners["*"]&&a.each(this.eventListeners["*"],function(t){try{t.apply(this,c.call(e,0))}catch(t){console&&void 0!==console.log&&console.log(t.toString())}},this),this.eventListeners[t]&&a.each(this.eventListeners[t],function(t){try{t.apply(this,c.call(e,1))}catch(t){console&&void 0!==console.log&&console.log(t.toString())}},this)},handle:function(t){var e,i,n,o,r,s;this.inExitHandler||(o=this.states,r=this.state,s=c.call(arguments,0),this.currentActionArgs=s,o[r][t]||o[r]["*"]||this["*"]?(n="*"===(e=o[r][t]?t:"*"),o=o[r][e]?(i=o[r][e],r+"."+e):(i=this["*"],"*"),this._currentAction||(this._currentAction=o),this.emit.call(this,"handling",{inputType:t,args:s.slice(1)}),a.isFunction(i)&&(i=i.apply(this,n?s:s.slice(1))),a.isString(i)&&this.transition(i),this.emit.call(this,"handled",{inputType:t,args:s.slice(1)}),this._priorAction=this._currentAction,this._currentAction="",this.processQueue(u)):this.emit.call(this,"nohandler",{inputType:t,args:s.slice(1)}),this.currentActionArgs=l)},transition:function(t){if(!this.inExitHandler&&t!==this.state){var e=this.state;if(this.states[t])return e&&this.states[e]&&this.states[e]._onExit&&(this.inExitHandler=!0,this.states[e]._onExit.call(this),this.inExitHandler=!1),this.targetReplayState=t,this.priorState=e,this.state=t,this.emit.call(this,"transition",{fromState:this.priorState,action:this._currentAction,toState:t}),this.states[t]._onEnter&&this.states[t]._onEnter.call(this),void(this.targetReplayState===t&&this.processQueue(s));this.emit.call(this,"invalidstate",{state:this.state,attemptedState:t})}},processQueue:function(t){t=a.filter(this.eventQueue,t===s?function(t){return t.type===s&&(!t.untilState||t.untilState===this.state)}:function(t){return t.type===u},this);this.eventQueue=a.difference(this.eventQueue,t),a.each(t,function(t){this.handle.apply(this,t.args)},this)},clearQueue:function(t,e){var i;t?(t===s?i=function(t){return t.type===s&&(!e||t.untilState===e)}:t===u&&(i=function(t){return t.type===u}),this.eventQueue=a.filter(this.eventQueue,i)):this.eventQueue=[]},deferUntilTransition:function(t){this.currentActionArgs&&(t={type:s,untilState:t,args:this.currentActionArgs},this.eventQueue.push(t),this.emit.call(this,"deferred",{state:this.state,queuedArgs:t}))},deferUntilNextHandler:function(){var t;this.currentActionArgs&&(t={type:u,args:this.currentActionArgs},this.eventQueue.push(t),this.emit.call(this,"deferred",{state:this.state,queuedArgs:t}))},on:function(t,e){var i=this;return i.eventListeners[t]||(i.eventListeners[t]=[]),i.eventListeners[t].push(e),{eventName:t,callback:e,off:function(){i.off(t,e)}}},off:function(t,e){t?this.eventListeners[t]&&(this.eventListeners[t]=e?a.without(this.eventListeners[t],e):[]):this.eventListeners={}}}),e.prototype.trigger=e.prototype.emit,["states","initialState"]),p=(e.extend=function(t,e){i=this,e=e,n={},o=(t=t)&&t.hasOwnProperty("constructor")?t.constructor:function(){var t=c.call(arguments,0);t[0]=t[0]||{};var e=t[0].states||{},e=a.deepExtend(a.cloneDeep(n),{states:e});e.initialState=t[0].initialState||this.initialState,a.extend(t[0],e),i.apply(this,t)},a.deepExtend(o,i),r.prototype=i.prototype,o.prototype=new r,t&&(a.extend(o.prototype,t),a.deepExtend(n,a.transform(t,function(t,e,i){-1!==d.indexOf(i)&&(t[i]=e)}))),e&&a.deepExtend(o,e),(o.prototype.constructor=o).__super__=i.prototype;var i,n,o,t=o;function r(){}return t.extend=this.extend,t},{Fsm:e,utils:h,on:function(t,e){return this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),e},off:function(t,e){this.eventListeners[t]&&(this.eventListeners[t]=a.without(this.eventListeners[t],e))},trigger:function(t){var e=arguments,i=this.eventListeners[t]||[];i&&i.length&&a.each(i,function(t){t.apply(null,c.call(e,1))})},eventListeners:{newFsm:[]}});return p.emit=p.trigger,p}),define("player/provider-player",["require","machina","lodash","debug"],function(t){"use strict";function e(i,t){function e(e){return function(t){t.provider===i&&e.call(n,t.message)}}var n=this;this.providerName=i,this.eventMediator=t,this.stateManager=new(r.extend({providerName:i,publish:this.publish.bind(this)})),t.subscribe("player.provider.proxy.ready",e(this.onPlayerReady)),t.subscribe("player.provider.proxy.stopped",e(this.onPlayerStopped)),t.subscribe("player.provider.proxy.finished",e(this.onPlayerFinished)),t.subscribe("player.provider.proxy.playing",e(this.onPlayerPlaying)),t.subscribe("player.provider.proxy.paused",e(this.onPlayerPaused)),t.subscribe("player.provider.proxy.error",e(this.onPlayerError)),t.subscribe("player.provider.proxy.unavailable",e(this.onPlayerUnavailable)),t.subscribe("player.provider.proxy.positionChanged",e(this.onPlayerPositionChanged))}var i=t("machina"),n=t("lodash"),o=t("debug"),r=i.Fsm.extend({eventListeners:{transition:[function(t){o.info(this.providerName+" player provider transition:",t.fromState,"->",t.toState)}]},initialState:"PlayerUninitialised",states:{PlayerUninitialised:{playerReady:function(t){this.player=t,this.transition("PlayerInitialised")},trackRequested:function(){this.clearQueue(),this.deferUntilTransition("PlayerInitialised")},stopTrack:function(){this.clearQueue(),this.publish("player.provider.stopped")},error:"PlayerError"},PlayerInitialised:{trackRequested:"PlayerTuning",error:"PlayerError"},PlayerStopped:{_onEnter:function(){"PlayerUnavailable"!=this.priorState&&this.publish("player.provider.stopped")},trackRequested:"PlayerTuning",error:"PlayerError"},PlayerFinished:{_onEnter:function(){this.publish("player.provider.finished",this.currentTrack)},trackRequested:"PlayerTuning",error:"PlayerError"},PlayerTuning:{_onEnter:function(){this.currentTrack=this.currentActionArgs[1],this.player.play(this.currentTrack),this.publish("player.provider.tuning")},trackPlaying:"PlayerPlaying",stopTrack:function(){this.player.stop(),this.transition("PlayerStopped")},trackUnavailable:"PlayerUnavailable",error:"PlayerError"},PlayerUnavailable:{_onEnter:function(){this.transition("PlayerStopped"),this.publish("player.provider.unavailable")}},PlayerPlaying:{_onEnter:function(){this.player.resume(),this.publish("player.provider.playing",n.extend(this.currentTrack,{duration:this.player.getDuration()}))},trackRequested:function(){this.deferUntilTransition(),this.transition("PlayerPaused")},stopTrack:function(){this.player.stop()},trackPaused:"PlayerPaused",trackStopped:"PlayerStopped",trackFinished:"PlayerFinished",error:"PlayerError"},PlayerPaused:{_onEnter:function(){this.player.pause(),this.publish("player.provider.paused")},trackRequested:function(){this.deferUntilTransition(),this.transition("PlayerStopped")},stopTrack:function(){this.player.stop()},trackPlaying:"PlayerPlaying",trackStopped:"PlayerStopped",trackFinished:"PlayerFinished",error:"PlayerError"},PlayerError:{_onEnter:function(){var t=this.currentActionArgs[1];o.error("Player error:",t.toString()),alert(t),this.transition("PlayerStopped")}}}});return e.prototype={constructor:e,publish:function(t,e){var i={provider:this.providerName};void 0!==e&&(i.message=e),this.eventMediator.publish(t,i)},playTrack:function(t){this.stateManager.handle("trackRequested",t)},resumeTrack:function(){this.stateManager.handle("trackPlaying")},pauseTrack:function(){this.stateManager.handle("trackPaused")},stopTrack:function(){this.stateManager.handle("stopTrack")},switchDevice:function(){this.stateManager.player.switchDevice()},onPlayerReady:function(t){this.stateManager.handle("playerReady",t)},onPlayerStopped:function(){this.stateManager.handle("trackStopped")},onPlayerFinished:function(){this.stateManager.handle("trackFinished")},onPlayerPlaying:function(){this.stateManager.handle("trackPlaying")},onPlayerPaused:function(){this.stateManager.handle("trackPaused")},onPlayerError:function(t){this.stateManager.handle("error",t)},onPlayerUnavailable:function(){this.stateManager.handle("trackUnavailable")},onPlayerPositionChanged:function(t){this.publish("player.provider.positionChanged",t)}},e}),define("player/media-player",["require","lodash","machina","debug"],function(t){"use strict";function e(t,e){function i(e){return function(t){n.stateManager.currentPlayer&&t.provider===n.stateManager.currentPlayer.providerName&&e.call(n,t.message)}}var n=this;this.players=t,this.eventMediator=e,this.stateManager=new(r.extend({eventMediator:e,players:this.players})),e.subscribe("player.provider.playing",i(this.onPlaying)),e.subscribe("player.provider.paused",i(this.onPaused)),e.subscribe("player.provider.stopped",i(this.onStopped)),e.subscribe("player.provider.finished",i(this.onFinished)),e.subscribe("player.provider.unavailable",i(this.onUnavailable)),e.subscribe("player.provider.positionChanged",i(this.onPositionChanged))}var i=t("lodash"),n=t("machina"),o=t("debug"),r=n.Fsm.extend({eventListeners:{transition:[function(t){o.info("Player transition:",t.fromState,"->",t.toState)}]},initialState:"Ready",states:{Ready:{_onEnter:function(){this.queued&&this.transition("Tuning")},playQueued:"Tuning"},Tuning:{_onEnter:function(){var t=this.queued;delete this.queued,this.currentPlayer=this.findBestAvailablePlayer(t,this.preferredProvider),t=this.augmentWithAffiliate(t),this.eventMediator.publish("player.track.tuning",t),this.currentPlayer.playTrack(t)},playQueued:"Stopping",playing:"Playing",stopped:"Stopped",unavailable:"Unavailable"},Stopping:{_onEnter:function(){this.currentPlayer.stopTrack()},stopped:"Stopped"},Playing:{_onEnter:function(){this.eventMediator.publish("player.track.playing",this.currentActionArgs[1])},pause:function(){this.currentPlayer.pauseTrack()},playQueued:"Stopping",paused:"Paused",stopped:"Stopped",finished:"Finished"},Paused:{_onEnter:function(){this.eventMediator.publish("player.track.paused")},resume:function(){this.currentPlayer.resumeTrack()},playQueued:"Stopping",playing:"Playing",stopped:"Stopped",finished:"Finished"},Stopped:{_onEnter:function(){this.eventMediator.publish("player.track.stopped"),this.transition("Ready")}},Unavailable:{_onEnter:function(){this.eventMediator.publish("player.track.unavailable"),this.transition("Ready")}},Finished:{_onEnter:function(){this.eventMediator.publish("player.track.finished",this.currentActionArgs[1]),this.transition("Ready")}}},findAvailablePlayers:function(e){return i.filter(this.players,function(t){return e[t.providerName+"Id"]})},findBestAvailablePlayer:function(t,e){t=this.findAvailablePlayers(t);return e&&i.find(t,function(t){return t.providerName==e})||t[0]},augmentWithAffiliate:function(t){(t=i.clone(t)).affiliate=this.currentPlayer.providerName;var e=this.findAvailablePlayers(t);return t.availableAffiliates=i.map(e,"providerName"),t}});return e.prototype={playTrack:function(t,e){this.stateManager.queued=t,e&&(this.stateManager.preferredProvider=e),this.stateManager.handle("playQueued")},pauseTrack:function(){this.stateManager.handle("pause")},resumeTrack:function(){this.stateManager.handle("resume")},switchDevice:function(){this.stateManager.currentPlayer.switchDevice()},onPlaying:function(t){this.stateManager.handle("playing",t)},onPaused:function(){this.stateManager.handle("paused")},onStopped:function(){this.stateManager.handle("stopped")},onFinished:function(t){this.stateManager.handle("finished",t)},onUnavailable:function(){this.stateManager.handle("unavailable")},onPositionChanged:function(t){this.eventMediator.publish("player.track.positionChanged",t)}},e}),define("player/queue",[],function(){"use strict";function t(){this.items=[],this.pointer=0}return t.prototype={add:function(t){this.items.push(t)},clear:function(){this.items=[],this.pointer=0},replaceRemaining:function(t){this.clearRemaining(),this.items=this.items.concat(t)},current:function(){return this.items[this.pointer]},next:function(){if(!this.isLast())return this.items.length&&(this.pointer=Math.min(this.items.length-1,this.pointer+1)),this.current()},previous:function(){return this.pointer=Math.max(0,this.pointer-1),this.current()},removeCurrent:function(){this.items.splice(this.pointer,1)},isLast:function(){return!this.items.length||this.pointer===this.items.length-1},isEmpty:function(){return 0===this.items.length},clearRemaining:function(){var t=this.pointer+1;this.items.splice(t,this.items.length-t)}},t}),define("player/player",["require","player/queue"],function(t){"use strict";function e(t,e){this.mediaPlayer=t,this.playQueue=new i,this.eventMediator=e,this.eventMediator.subscribe("player.track.finished",this.onFinished.bind(this)),this.eventMediator.subscribe("player.track.unavailable",this.onUnavailable.bind(this)),this.eventMediator.subscribe("player.track.positionChanged",this.onPositionChanged.bind(this))}var i=t("player/queue");return e.prototype={RESTART_TIME_LIMIT:5,queue:function(t,e=!1){e&&this.playQueue.clear(),this.playQueue.replaceRemaining(t),this.eventMediator.publish("player.track.added")},play:function(t){this.mediaPlayer.playTrack(this.playQueue.current(),t)},pause:function(){this.mediaPlayer.pauseTrack()},resume:function(){this.mediaPlayer.resumeTrack()},next:function(){var t=this.playQueue.next();t&&this.mediaPlayer.playTrack(t)},previous:function(){var t=this.position<this.RESTART_TIME_LIMIT?this.playQueue.previous():this.playQueue.current();t&&this.mediaPlayer.playTrack(t)},isLast:function(){return this.playQueue.isLast()},switchDevice:function(){this.mediaPlayer.switchDevice()},onPositionChanged:function(t){this.position=t},onUnavailable:function(){this.playQueue.removeCurrent();var t=this.playQueue.current();t&&this.mediaPlayer.playTrack(t)},onFinished:function(){this.next()}},e}),define("core/form",[],function(){"use strict";return{readFormData:function(t){return t.serializeArray().reduce(e,{})}};function e(t,e){return t[e.name]=e.value,t}}),!function(t){define("jquery-popup-overlay",["jquery"],function(){return function(){var d,p,f,o,g,r,m,y,v,b,x,a,w,k,s;d=jQuery,g=d(window),r={},m=[],y=[],b=[],x=v=null,a=/(iPad|iPhone|iPod)/.test(navigator.userAgent),w={_init:function(t){var e=d(t),i=e.data("popupoptions");y[t.id]=!1,m[t.id]=0,e.data("popup-initialized")||(e.attr("data-popup-initialized","true"),w._initonce(t)),i.autoopen&&setTimeout(function(){w.show(t,0)},0)},_initonce:function(i){var t,e,n=d(i),o=d("body"),r=n.data("popupoptions"),s=(v=parseInt(o.css("margin-right"),10),x=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,r.scrolllock&&void 0===p&&(t=(s=d('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),p=t.innerWidth()-t.height(99).innerWidth(),s.remove()),n.attr("id")||n.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),n.addClass("popup_content"),r.background&&!d("#"+i.id+"_background").length&&(o.append('<div id="'+i.id+'_background" class="popup_background"></div>'),(e=d("#"+i.id+"_background")).css({opacity:0,visibility:"hidden",backgroundColor:r.color,position:"fixed",top:0,right:0,bottom:0,left:0}),r.setzindex&&!r.autozindex&&e.css("z-index","100000"),r.transition&&e.css("transition",r.transition)),o.append(i),n.wrap('<div id="'+i.id+'_wrapper" class="popup_wrapper" />'),(t=d("#"+i.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),a&&((e=d("#"+i.id+"_background")).css("cursor","pointer"),d(r.pagecontainer).css("cursor","pointer")),"overlay"==r.type&&!r.absolute&&r.background&&(t.css("overflow","auto"),t[0].style.WebkitOverflowScrolling="touch"),n.css({opacity:0,visibility:"hidden","pointer-events":"auto",display:"inline-block"}),r.setzindex&&!r.autozindex&&t.css("z-index","100001"),r.outline||n.css("outline","none"),r.transition&&(n.css("transition",r.transition),t.css("transition",r.transition)),n.attr("aria-hidden",!0),"overlay"==r.type&&(n.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),t.css({position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"}),t.append('<div class="popup_align" />'),d(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),n.attr("role","dialog"),r.openelement||"."+i.id+"_open");d(s).each(function(t,e){d(e).attr("data-popup-ordinal",t),e.id||d(e).attr("id","open_"+parseInt(1e8*Math.random(),10))}),n.attr("aria-labelledby")||n.attr("aria-label")||n.attr("aria-labelledby",d(s).attr("id")),"hover"==r.action?(r.keepfocus=!1,d(s).on("mouseenter",function(){w.show(i,d(this).data("popup-ordinal"))}),d(s).on("mouseleave",function(t){w.hide(i,t)})):d(document).on("click.jqp",s,function(t){t.preventDefault();var e=d(this).data("popup-ordinal");setTimeout(function(){w.show(i,e)},0)}),r.closebutton&&w.addclosebutton(i),r.detach?n.detach():n.hide()},show:function(t,e){var i=d(t);if(!i.data("popup-visible")){i.data("popup-initialized")||w._init(t),i.attr("data-popup-initialized","true");var n=d("body"),o=i.data("popupoptions"),r=d("#"+t.id+"_wrapper"),s=d("#"+t.id+"_background");if(k(t,e,o.beforeopen),y[t.id]=e,setTimeout(function(){b.push(t.id)},0),o.autozindex){for(var a=document.getElementsByTagName("*"),l=a.length,c=0,u=0;u<l;u++){var h=d(a[u]).css("z-index");"auto"!==h&&c<(h=parseInt(h,10))&&(c=h)}m[t.id]=c,o.background&&0<=m[t.id]&&d("#"+t.id+"_background").css({zIndex:m[t.id]+1}),0<=m[t.id]&&r.css({zIndex:m[t.id]+2})}o.detach&&r.prepend(t),i.show(),f=setTimeout(function(){r.css({visibility:"visible",opacity:1}),d("html").addClass("popup_visible").addClass("popup_visible_"+t.id),r.addClass("popup_wrapper_visible")},20),o.scrolllock&&(n.css("overflow","hidden"),n.height()>g.height()&&n.css("margin-right",v+p)),i.css({visibility:"visible",opacity:1}),o.background&&(s.css({visibility:"visible",opacity:o.opacity}),setTimeout(function(){s.css({opacity:o.opacity})},0)),i.data("popup-visible",!0),w.reposition(t,e),i.data("focusedelementbeforepopup",document.activeElement),i.attr("tabindex",-1),setTimeout(function(){"closebutton"===o.focuselement?d("#"+t.id+" ."+t.id+"_close:first").focus():o.focuselement?d(o.focuselement).focus():!0!==o.focuselement&&!o.keepfocus||i.focus()},o.focusdelay),o.keepfocus&&d(o.pagecontainer).attr("aria-hidden",!0),i.attr("aria-hidden",!1),k(t,e,o.onopen),x?r.one("transitionend",function(){k(t,e,o.opentransitionend)}):k(t,e,o.opentransitionend),"tooltip"==o.type&&d(window).on("resize."+t.id,function(){w.reposition(t,e)})}},hide:function(t,e,i){var n,o,r,s,a,l=d.inArray(t.id,b);-1!==l&&(f&&clearTimeout(f),n=d("body"),o=d(t),r=o.data("popupoptions"),s=d("#"+t.id+"_wrapper"),a=d("#"+t.id+"_background"),o.data("popup-visible",!1),1===b.length?d("html").removeClass("popup_visible").removeClass("popup_visible_"+t.id):d("html").hasClass("popup_visible_"+t.id)&&d("html").removeClass("popup_visible_"+t.id),b.splice(l,1),s.hasClass("popup_wrapper_visible")&&s.removeClass("popup_wrapper_visible"),r.keepfocus&&!i&&setTimeout(function(){d(o.data("focusedelementbeforepopup")).is(":visible")&&o.data("focusedelementbeforepopup").focus()},0),s.css({visibility:"hidden",opacity:0}),o.css({visibility:"hidden",opacity:0}),r.background&&a.css({visibility:"hidden",opacity:0}),d(r.pagecontainer).attr("aria-hidden",!1),o.attr("aria-hidden",!0),k(t,y[t.id],r.onclose,e),x&&"0s"!==o.css("transition-duration")?o.one("transitionend",function(){o.data("popup-visible")||(r.detach?o.detach():o.hide()),r.scrolllock&&setTimeout(function(){d.grep(b,function(t){return d("#"+t).data("popupoptions").scrolllock}).length||n.css({overflow:"visible","margin-right":v})},10),k(t,y[t.id],r.closetransitionend)}):(r.detach?o.detach():o.hide(),r.scrolllock&&setTimeout(function(){d.grep(b,function(t){return d("#"+t).data("popupoptions").scrolllock}).length||n.css({overflow:"visible","margin-right":v})},10),k(t,y[t.id],r.closetransitionend)),"tooltip"==r.type&&d(window).off("resize."+t.id))},toggle:function(t,e){d(t).data("popup-visible")?w.hide(t):setTimeout(function(){w.show(t,e)},0)},reposition:function(t,e){var i,n=d(t),o=n.data("popupoptions"),r=d("#"+t.id+"_wrapper");e=e||0,"tooltip"==o.type?(r.css({position:"absolute"}),i=(e=o.tooltipanchor?d(o.tooltipanchor):o.openelement?d(o.openelement).filter('[data-popup-ordinal="'+e+'"]'):d("."+t.id+'_open[data-popup-ordinal="'+e+'"]')).offset()||{left:0,top:0},"right"==o.horizontal?r.css("left",i.left+e.outerWidth()+o.offsetleft):"leftedge"==o.horizontal?r.css("left",i.left+o.offsetleft):"left"==o.horizontal?r.css("right",g.width()-i.left-o.offsetleft):"rightedge"==o.horizontal?r.css("right",g.width()-i.left-e.outerWidth()-o.offsetleft):r.css("left",i.left+e.outerWidth()/2-n.outerWidth()/2-parseFloat(n.css("marginLeft"))+o.offsetleft),"bottom"==o.vertical?r.css("top",i.top+e.outerHeight()+o.offsettop):"bottomedge"==o.vertical?r.css("top",i.top+e.outerHeight()-n.outerHeight()+o.offsettop):"top"==o.vertical?r.css("bottom",g.height()-i.top-o.offsettop):"topedge"==o.vertical?r.css("bottom",g.height()-i.top-n.outerHeight()-o.offsettop):r.css("top",i.top+e.outerHeight()/2-n.outerHeight()/2-parseFloat(n.css("marginTop"))+o.offsettop)):"overlay"==o.type&&(o.horizontal?r.css("text-align",o.horizontal):r.css("text-align","center"),o.vertical?n.css("vertical-align",o.vertical):n.css("vertical-align","middle"),o.absolute&&r.css({position:"absolute",top:window.scrollY}),o.background||(r.css({"pointer-events":"none"}),o.absolute||s(t)||(n.css("overflow","auto"),n[0].style.WebkitOverflowScrolling="touch",n.css("max-height","calc(100% - "+n.css("margin-top")+" - "+n.css("margin-bottom")+")"))))},addclosebutton:function(t){var e=d(t).data("popupoptions").closebuttonmarkup?d(r.closebuttonmarkup).addClass(t.id+"_close"):'<button class="popup_close '+t.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">×</span></button>';d(t).data("popup-initialized")&&d(t).append(e)}},k=function(t,e,i){var n,o=d(t).data("popupoptions");void 0!==o&&(o=o.openelement||"."+t.id+"_open",o=d(o+'[data-popup-ordinal="'+e+'"]'),"function"==typeof i&&(n=[].slice.call(arguments,3),o=[t,o].concat(n),i.apply(d(t),o)))},s=function(t){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},d(document).on("keydown",function(t){var e;b.length&&(e=b[b.length-1],e=document.getElementById(e),d(e).data("popupoptions").escape&&27==t.keyCode&&w.hide(e,t))}),d(document).on("mousedown",function(t){o=t.target}),d(document).on("click",function(t){var e,i,n;b.length&&(e=b[b.length-1],i=document.getElementById(e),n=d(i).data("popupoptions").closeelement?d(i).data("popupoptions").closeelement:"."+i.id+"_close",d(t.target).closest(n).length&&(t.preventDefault(),w.hide(i,t)),d(i).data("popupoptions")&&d(i).data("popupoptions").blur&&!d(t.target).closest(d(i).data("popupoptions").blurignore).length&&!d(t.target).closest("#"+e).length&&!d(o).closest("#"+e).length&&2!==t.which&&d(t.target).is(":visible")&&(d(i).data("popupoptions").background?(w.hide(i,t),t.preventDefault()):w.hide(i,t,!0)))}),d(document).on("keydown",function(t){var e,i,n,o;b.length&&9==t.which&&(e=b[b.length-1],e=document.getElementById(e),d(e).data("popupoptions").keepfocus&&(i=d(e).find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),o=d(":focus"),n=i.length,o=i.index(o),0===n?(d(e).focus(),t.preventDefault()):t.shiftKey?0===o&&(i.get(n-1).focus(),t.preventDefault()):o==n-1&&(i.get(0).focus(),t.preventDefault())))}),d.fn.popup=function(n){return this.each(function(){var t,e=d(this),i=d.extend(!0,{},d.fn.popup.defaults);n&&"tooltip"===n.type&&(i.background=!1),"object"==typeof n?(t=d.extend({},i,e.data("popupoptions"),n),e.data("popupoptions",t),r=e.data("popupoptions"),w._init(this)):"string"==typeof n?(e.data("popupoptions")||(e.data("popupoptions",i),r=e.data("popupoptions")),w[n].call(this,this)):(e.data("popupoptions")||(e.data("popupoptions",i),r=e.data("popupoptions")),w._init(this))})},d.fn.popup.destroyall=function(){for(var t=0;t<b.length;t++)d("#"+b[t]).popup("hide");d(".popup_wrapper").remove(),d(".popup_background").remove(),d(document).off("click.jqp")},d.fn.popup.defaults={type:"overlay",absolute:!1,autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,blurignore:null,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}.apply(t,arguments)})}(this),define("components/modal",["require","jquery","core/ajax","core/form","jquery-popup-overlay","jquery-cookie"],function(t){"use strict";function e(t){this.app=t,this.closeTimeout}var a=t("jquery"),l=t("core/ajax"),r=t("core/form");t("jquery-popup-overlay"),t("jquery-cookie");return e.prototype.open=function(t,e){this.close(),this.request&&this.request.abort();var i=e&&e.actions,n=e&&e.onclose,o=e&&e.onopen,r=e&&e.post,s=e&&e.get,e=e&&e.onmessage,i=this.onLoadContent.bind(this,i,n,o,e);this.request=r?l.post(t,null,r,i):l.get(t,null,s,i),this.app.eventMediator.publish("modal.loading")},e.prototype.onLoadContent=function(t,e,i,n,o,r){this.close(),this.app.eventMediator.publish("modal.loadingComplete");var r=a(r),s=r.find("[data-modal-message]");if(s.length&&n&&n(s.text()),r.find("[data-modal-dont-show]").length)return this.followModalRedirect(r);this.show(r,t,e,i,n)},e.prototype.close=function(){a(".popup_content").popup("hide")},e.prototype.show=function(t,i,e,n,o){this.app.eventMediator.publish("modal.show");var r=a(".js-modal-template").html(),s=a(r),r=(s.appendTo("body"),s.find("[js-modal-body]").replaceWith(t),s.find("[data-modal-type]").data("modal-type")),t=(r&&(r=r.split(",")).forEach(function(t){s.addClass("modal-dialog--"+t)}),i&&s.on("click submit",function(t){var e=a(t.target).data("modal-action"),e=i[e];e&&(t.preventDefault(),e(t))}),s.on("submit","form[data-modal-form]",this.onModalFormSubmit.bind(this,i,e,o)),s.on("submit","form[data-modal-form-pure]",this.onSimpleModalSubmit.bind(this,i,e,o)),{autoopen:!0,detach:!0,closeelement:".js-close",setzindex:!1,opacity:.8,pagecontainer:"#content",onclose:this.onClose.bind(this,e),onopen:function(){this.app.moduleLoader.startAllModules(s),n&&n()}.bind(this)}),r=s.find('input[type="text"], input[type="url"]');r.length&&(t.focuselement=r[0]),s.popup(t),s.find("[data-modal-autoclose]").length&&this.autoClose(4e3),s.find("[data-modal-close-immediately]").length&&this.autoClose(0)},e.prototype.onSimpleModalSubmit=function(t,e,i,n){this.close()},e.prototype.onModalFormSubmit=function(t,e,i,n){n.preventDefault();var n=a(n.target),o=n.attr("action"),n=r.readFormData(n);this.app.eventMediator.publish("modal.loading"),l.post(o,null,n,this.onLoadContent.bind(this,t,e,null,i))},e.prototype.autoClose=function(t){this.closeTimeout=setTimeout(function(){this.app.eventMediator.publish("modal.close"),this.close()}.bind(this),t)},e.prototype.onClose=function(t,e,i,n){t&&t(e,i,n),this.app.eventMediator.publish("modal.close"),clearTimeout(this.closeTimeout);t=a(e),t.length&&this.app.moduleLoader.stopAllModules(t),i=n&&a(n.target).closest("a"),e=i&&i.attr("href");if(!e)return this.followModalRedirect(t)},e.prototype.followModalRedirect=function(t){t=t.find("[data-modal-redirect-on-close]").data("modalRedirectOnClose");t&&this.app.loadUrl(t)},e}),!function(){var t,i,e=this;if("function"==typeof require)try{var n=require("crypto").randomBytes,s=n&&function(){return n(16)}}catch(t){}!s&&e.crypto&&crypto.getRandomValues&&(t=new Uint8Array(16),s=function(){return crypto.getRandomValues(t),t}),s||(i=new Array(16),s=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i});for(var a="function"==typeof Buffer?Buffer:Array,o=[],r={},l=0;l<256;l++)o[l]=(l+256).toString(16).substr(1),r[o[l]]=l;function u(t,e){e=e||0;return o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+"-"+o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[e++]]+o[t[+e]]}var c=s(),h=[1|c[0],c[1],c[2],c[3],c[4],c[5]],d=16383&(c[6]<<8|c[7]),p=0,f=0;function g(t,e,i){var n=e&&i||0,o=("string"==typeof t&&(e="binary"==t?new a(16):null,t=null),(t=t||{}).random||(t.rng||s)());if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var r=0;r<16;r++)e[n+r]=o[r];return e||u(o)}var m,y=g;y.v1=function(t,e,i){var n=e&&i||0,o=e||[],i=null!=(t=t||{}).clockseq?t.clockseq:d,r=null!=t.msecs?t.msecs:(new Date).getTime(),s=null!=t.nsecs?t.nsecs:f+1;if((a=r-p+(s-f)/1e4)<0&&null==t.clockseq&&(i=i+1&16383),1e4<=(s=(a<0||p<r)&&null==t.nsecs?0:s))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=r,d=i;for(var a=(1e4*(268435455&(r+=122192928e5))+(f=s))%4294967296,s=(o[n++]=a>>>24&255,o[n++]=a>>>16&255,o[n++]=a>>>8&255,o[n++]=255&a,r/4294967296*1e4&268435455),l=(o[n++]=s>>>8&255,o[n++]=255&s,o[n++]=s>>>24&15|16,o[n++]=s>>>16&255,o[n++]=i>>>8|128,o[n++]=255&i,t.node||h),c=0;c<6;c++)o[n+c]=l[c];return e||u(o)},y.v4=g,y.parse=function(t,e,i){var n=e&&i||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[n+o++]=r[t])});o<16;)e[n+o++]=0;return e},y.unparse=u,y.BufferClass=a,"function"==typeof define&&define.amd?define("uuid",[],function(){return y}):"undefined"!=typeof module&&module.exports?module.exports=y:(m=e.uuid,y.noConflict=function(){return e.uuid=m,y},e.uuid=y)}.call(this),define("app-config",[],function(){"use strict";return{"partial-refresh":{"non-pjax-urls":[]}}}),define("core/experiment",["require"],function(t){"use strict";function e(t){this.app=t,this.eventMediator=t.eventMediator}return e.prototype.start=function(){this.eventMediator.subscribe("partialRefresh.beforeReplace",this.activate.bind(this)),this.activate()},e.prototype.activate=function(){dataLayer.push({event:"optimize.activate"})},e}),window.addEventListener("hashchange",function(t){var e=document.getElementById(location.hash.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1,e.className+=" skiplink-polyfill-target"),e.focus())},!1),define("skiplink-polyfill",function(){}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("whatInput",[],e):"object"==typeof exports?exports.whatInput=e():t.whatInput=e()}(this,function(){return n=[function(t,e){t.exports=function(){"use strict";var n,e,o=[],i=!1,r=null,s=["button","input","select","textarea"],t=b(),a=[16,17,18,91,93],l={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},c=(l[b()]="mouse",[]),u={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},h={2:"touch",3:"touch",4:"mouse"};function d(t){window.clearTimeout(e),f(t),i=!0,e=window.setTimeout(function(){i=!1},650)}function p(t){i||f(t)}function f(t){var e=m(t),i=l[t.type];"pointer"===i&&(i="number"==typeof(t=t).pointerType?h[t.pointerType]:"pen"===t.pointerType?"touch":t.pointerType),r!==i&&(t=document.activeElement.nodeName.toLowerCase(),!n.hasAttribute("data-whatinput-formswitching")&&!n.hasAttribute("data-whatinput-formtyping")&&r&&-1<s.indexOf(t)||-1<a.indexOf(e)||g(i)),"keyboard"===i&&(t=e,-1===o.indexOf(u[t])&&u[t]&&o.push(u[t]))}function g(t){r=t,n.setAttribute("data-whatinput",r),-1===c.indexOf(r)&&c.push(r)}function m(t){return t.keyCode||t.which}function y(t){t=m(t),t=o.indexOf(u[t]);-1!==t&&o.splice(t,1)}function v(){n=document.body,window.PointerEvent?(n.addEventListener("pointerdown",p),n.addEventListener("pointermove",p)):window.MSPointerEvent?(n.addEventListener("MSPointerDown",p),n.addEventListener("MSPointerMove",p)):(n.addEventListener("mousedown",p),n.addEventListener("mousemove",p),"ontouchstart"in window&&n.addEventListener("touchstart",d)),n.addEventListener(t,p),n.addEventListener("keydown",d),n.addEventListener("keyup",d),document.addEventListener("keyup",y)}function b(){return t="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?v():document.addEventListener("DOMContentLoaded",v)),{ask:function(){return r},keys:function(){return o},types:function(){return c},set:g}}()}],o={},i.m=n,i.c=o,i.p="",i(0);function i(t){if(o[t])return o[t].exports;var e=o[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var n,o}),!function(t){("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define("focus-visible",t):t()}(function(){"use strict";function t(){var o=!0,e=!1,i=null,r={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function a(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function t(t){o=!1}function n(){document.addEventListener("mousemove",l),document.addEventListener("mousedown",l),document.addEventListener("mouseup",l),document.addEventListener("pointermove",l),document.addEventListener("pointerdown",l),document.addEventListener("pointerup",l),document.addEventListener("touchmove",l),document.addEventListener("touchstart",l),document.addEventListener("touchend",l)}function l(t){"html"!==t.target.nodeName.toLowerCase()&&(o=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",l),document.removeEventListener("pointermove",l),document.removeEventListener("pointerdown",l),document.removeEventListener("pointerup",l),document.removeEventListener("touchmove",l),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",l))}document.addEventListener("keydown",function(t){s(document.activeElement)&&a(document.activeElement),o=!0},!0),document.addEventListener("mousedown",t,!0),document.addEventListener("pointerdown",t,!0),document.addEventListener("touchstart",t,!0),document.addEventListener("focus",function(t){var e,i,n;s(t.target)&&(o||(e=t.target,i=e.type,"INPUT"==(n=e.tagName)&&r[i]&&!e.readOnly||("TEXTAREA"==n&&!e.readOnly||!!e.isContentEditable)))&&a(t.target)},!0),document.addEventListener("blur",function(t){s(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(e=!0,window.clearTimeout(i),i=window.setTimeout(function(){e=!1,window.clearTimeout(i)},100),(t=t.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))},!0),document.addEventListener("visibilitychange",function(t){"hidden"==document.visibilityState&&(e&&(o=!0),n())},!0),n(),document.body.classList.add("js-focus-visible")}function e(){n||(n=!0,i())}var i,n;"undefined"!=typeof document&&(i=t,0<=["interactive","complete"].indexOf(document.readyState)?i():(n=!1,document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)))}),define("core/app",["require","tracking/tealium","core/consent-manager","components/cbsi-player","core/dom-require/module-loader","core/partial-refresh","core/event-mediator","player/provider-player","player/media-player","player/player","components/modal","uuid","app-config","core/browser-api","jquery","core/media-size-v2","core/experiment","skiplink-polyfill","whatInput","focus-visible"],function(t){"use strict";var e=t("tracking/tealium"),i=t("core/consent-manager"),n=t("components/cbsi-player"),o=t("core/dom-require/module-loader"),r=t("core/partial-refresh"),s=t("core/event-mediator"),a=t("player/provider-player"),l=t("player/media-player"),c=t("player/player"),u=t("components/modal"),h=t("uuid"),d=t("app-config"),p=t("core/browser-api"),f=t("jquery"),g=t("core/media-size-v2"),m=t("core/experiment");t("skiplink-polyfill"),t("whatInput"),t("focus-visible");const y={US:"aw",CA:"aw",GB:"uk",AU:"au",NZ:"au",SG:"asia",MY:"asia",TH:"asia",ID:"asia",PH:"asia",HK:"asia",IN:"asia",VN:"asia",NU:"row"};var v={start:function(){var t=f("body");v.viewGuid=h(),v.eventMediator=new s,v.consentManager=new i,new e(v).start(),v.isPlayerSupported()&&(v.cbsiplayer=new n(v,t.data("cbsi-player-config")),t=[new a("spotify",v.eventMediator),new a("youtube",v.eventMediator)],t=new l(t,v.eventMediator),v.player=new c(t,v.eventMediator)),v.fontFamily=f("body").css("fontFamily"),v.modal=new u(this),v.moduleLoader=new o(v),v.moduleLoader.start(),v.experiment=new m(v),v.experiment.start(),document.addEventListener("visibilitychange",function(){v.eventMediator.publish("app.visibilityChanged")}),p.cookies.setCookie("lfmjs","1",{expires:100}),v.isPersistentPlayerSupported()&&(v.partialRefresh=new r(f(document),v.eventMediator,d["partial-refresh"]["non-pjax-urls"]),v.eventMediator.subscribe("partialRefresh.beforeReplace",function(t){v.moduleLoader.stopAllModules(t)}),v.eventMediator.subscribe("partialRefresh.afterReplace",function(t){v.eventMediator.reset(),v.moduleLoader.startAllModules(t),v.pageTransitionComplete(!0)}),v.partialRefresh.start()),v.eventMediator.subscribe("page.updated",function(){v.pageTransitionComplete(!1)})},pageTransitionComplete:function(t){v.viewGuid=h(),v.eventMediator.publish("page.transitionComplete",{fullPage:t})},isVisible:function(){return!0!==document.hidden},isPlayerSupported:function(){return f("body").data("player-supported")},isPersistentPlayerSupported:function(){return!g.isMobile()},isMobile:function(){return!!g.isMobile()},lang:function(){return f("html").attr("lang")},lang:function(){var t=this.langPath();return t||"en"},supportedLanguages:function(){let t=[];return f("head").find("[hreflang]").each(function(){t.push(f(this).attr("hreflang"))}),t},geo:function(){var t="adRegionPerm";const e=this.getFromQuery("adRegion");if(e)return this.setCookie(t,e),e.toUpperCase();const i=this.getCookie(t);if(i)return i.toUpperCase();const n=this.getCookie("GeoIP");return n?n.toUpperCase():"NU"},adNetwork:function(){var t="adNetworkPerm",e=this.getFromQuery("adNetwork");if(e)return this.setCookie(t,e),e;e=this.getCookie(t);return e||f("[data-ads-network]").eq(0).data("ads-network")},adTargeting:function(){const n=f("[data-ads-targeting]").eq(0).data("ads-targeting");var t=p.document.location.search.substr(1);const e=new URLSearchParams(t);return e.forEach((t,e)=>{var i="adTargeting_";e.startsWith(i)&&(e=e.replace(i,""),n[e]=t)}),n},setCookie:function(t,e){p.cookies.setCookie(t,e,{expires:100})},getCookie:function(t){const e=t+"=",i=document.cookie.split("; ").filter(t=>t.startsWith(e))[0];return i&&i.replace(e,"")},getFromQuery:function(t){var e=p.document.location.search.substr(1);const i=new URLSearchParams(e);return i.get(t)},countryCode:function(){var t=this.geo();return y[t]},googleMapsApiKey:function(){return f("body").data("google-maps-api-key")},loadUrl:function(t){v.partialRefresh?v.partialRefresh.replaceContent(t):window.location.href=t},adsEnabled:function(){return 0<f("body").find("[data-ads-beacon]").length},langPath:function(){var t=window.location.pathname.match("^/(..)/");if(t)return t[1]},facebookAppId:function(){return f("body").data("facebook-app-id")}};return v}),require(["require-config"],function(){"use strict";require(["lodash"],function(e){Function.prototype.bind=Function.prototype.bind||function(){var t=Array.prototype.slice.call(arguments,0);return e.bind.apply(null,[this].concat(t))}}),require(["es6-promise"],function(t){t.polyfill(),require(["core/app"],function(t){t.start()})})}),define("init",function(){}),define("shim/rel-preload",["require","core/browser-api"],function(t){"use strict";function e(t){this.$el=t}var i=t("core/browser-api");return e.prototype.start=function(){i.isPreloadSupported()||(this.$el.attr("media","none"),this.$el.attr("rel","stylesheet"))},e}),define("dev/grid-overlay",["jquery"],function(i){"use strict";return function(e,t){this.start=function(){window.lfmGridOverlay=function(){var t=i(".dev-grid-overlay",e);t.length&&t.is(".dev-grid-overlay--baseline")?t.remove():t.length?t.addClass("dev-grid-overlay--baseline"):e.append('<div class="dev-grid-overlay"></div>')}}}}),define("dev/toggle-version",["jquery"],function(n){"use strict";function t(){}return t.prototype.start=function(){window.lfmToggleVersion=function(){n("body").is(".anhv1")?this.switchDefaultStylesheet("anhv1-defaults","anhv2-defaults"):this.switchDefaultStylesheet("anhv2-defaults","anhv1-defaults"),n("body").toggleClass("anhv1 anhv2")}.bind(this)},t.prototype.switchDefaultStylesheet=function(t,e){var i=n('link[href*="'+t+'.less"]');i.attr("href",i.attr("href").replace(t,e))},t}),define("dev/debug-log",["jquery"],function(i){"use strict";return function(t,e){this.start=function(){window.lfmDebugLog=function(){i(".debug-log",t).toggleClass("debug-log--show")}}}}),define("dev/debug-image-analysis",["jquery"],function(e){"use strict";return function(t){this.start=function(){window.lfmImageAnalysis=function(){e(".debug-image-analysis",t).toggleClass("debug-image-analysis--show")}}}}),define("dev/js-log",[],function(){"use strict";return function(){this.start=function(){window.lfmJsLog=function(){var t=[];window.debug.setCallback(function(){t.push([].slice.call(arguments))},!0),console.log(JSON.stringify(t,null,2))}}}}),define("dev/ads-toggle",[],function(){"use strict";function t(){}return t.prototype.start=function(){window.lfmAdsToggle=function(){const t=new URL(window.location.href),e=t.searchParams;null===e.get("no-ads")?e.set("no-ads","true"):e.delete("no-ads"),window.location.href=t.toString()}},t}),!function(i){define("highcharts",["jquery"],function(){return function(){var t,e;return t="undefined"!=typeof window?window:this,e=function(R){h=window,o=h.document,a="http://www.w3.org/2000/svg",r=h.navigator&&h.navigator.userAgent||"",t=o&&o.createElementNS&&!!o.createElementNS(a,"svg").createSVGRect,l=/(edge|msie|trident)/i.test(r)&&!window.opera,u=!t,s=/Firefox/.test(r),d=s&&parseInt(r.split("Firefox/")[1],10)<4;var v,N,q,z,H,$,B,F,W,G,U,V,X,_,Y,Q,j,K,J,Z,tt,I,et,it,nt,ot,rt,st,at,lt,ct,ut,ht,dt,pt,ft,gt,mt,p,yt,vt,bt,xt,wt,kt,Tt,O,At,Ct,St,Mt,Et,Pt,jt,Lt,_t,It,Ot,Dt,L,Rt,Nt,qt,zt,Ht,$t,Bt,Ft,Wt,Gt,Ut,Vt,Xt,Yt,Qt,Kt,Jt,n,Zt,te,ee,ie,ne,oe,re,se,ae,le,ce,ue,he,de,pe,fe,ge,me,ye,ve,be,x,xe,we,ke,Te,Ae,Ce,Se,T,Me,Ee,A,Pe,je,Le,_e,Ie,Oe,De,Re,Ne,qe,ze,C,He,$e,Be,Fe,We,b,Ge,Ue,Ve,Xe,Ye,Qe,Ke,Je,Ze,w,ti,ei,ii,ni,e,oi,ri,si,ai,li,ci,ui,hi,di,pi,fi,c,gi,mi,yi,vi,bi,xi,wi,f,ki,Ti,Ai,Ci,Si,Mi,Ei,Pi,ji,Li,_i,Ii,Oi,Di,Ri,Ni,qi,zi,Hi,$i,Bi,Fi,Wi,Gi,Ui,i,Vi,Xi,Yi,Qi,Ki,Ji,Zi,tn,en,nn,m,on,rn,sn,an,ln,cn,un,hn,dn,pn,fn,gn,y,mn,yn,k,vn,bn,xn,wn,kn,Tn,An,Cn,Sn,Mn,En,Pn,jn,Ln,_n,In,On,Dn,Rn,Nn,qn,zn,Hn,$n,Bn,Fn,Wn,Gn,Un,S,Vn,Xn,Yn,Qn,Kn,Jn,Zn,to,eo,M,io,no,oo,ro,so,ao,lo,co,E,uo,ho,po,fo,go,mo,yo,vo,bo,xo,wo,ko,To,Ao,Co,So,Mo,Eo,Po,jo,Lo,_o,Io,Oo,Do,Ro,No,qo,zo,Ho,$o,Bo,Fo,Wo,Go,Uo,Vo,Xo,Yo,Qo,Ko,Jo,Zo,tr,er,ir,nr,or,rr,sr,ar,lr,cr,ur,hr,dr,P,pr,fr,gr,mr,yr,vr,br,xr,D,wr,kr,Tr,t,Ar,Cr,Sr,o,Mr,r,Er,Pr,jr,Lr,g,_r,Ir,Or,Dr,Rr,s,Nr,qr,a,l,u,zr,Hr,h,$r,Br,Fr,Wr,Gr,Ur,d=h.Highcharts?h.Highcharts.error(16,!0):{product:"Highcharts",version:"5.0.8",deg2rad:2*Math.PI/360,doc:o,hasBidiBug:d,hasTouch:o&&void 0!==o.documentElement.ontouchstart,isMS:l,isWebKit:/AppleWebKit/.test(r),isFirefox:s,isTouchDevice:/(Mobile|Android|Windows Phone)/.test(r),SVG_NS:a,chartCount:0,seriesTypes:{},symbolSizes:{},svg:t,vml:u,win:h,charts:[],marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){}};function Vr(){var a,t=n.defaultOptions.global,l=t.useUTC,e=l?"getUTC":"get",i=l?"setUTC":"set";n.Date=a=t.Date||ne.Date,a.hcTimezoneOffset=l&&t.timezoneOffset,a.hcGetTimezoneOffset=function(){var e=n.defaultOptions.global,i=ne.moment;if(e.timezone){if(i)return function(t){return-i.tz(t,e.timezone).utcOffset()};n.error(25)}return e.useUTC&&e.getTimezoneOffset}(),a.hcMakeTime=function(t,e,i,n,o,r){var s;return l?(s=a.UTC.apply(0,arguments),s+=te(s)):s=new a(t,e,ie(i,1),ie(n,0),ie(o,0),ie(r,0)).getTime(),s},Zt(["Minutes","Hours","Day","Date","Month","FullYear"],function(t){a["hcGet"+t]=e+t}),Zt(["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],function(t){a["hcSet"+t]=i+t})}function Xr(t,e,i,n,o){var r=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=o,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:e.align||(r?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":i?"bottom":"top"),y:wo(e.y,r?4:i?14:-6),x:wo(e.x,r?i?-6:6:0)},this.textAlign=e.textAlign||(r?i?"right":"left":"center")}return z=[],H=(v=d).charts,$=v.doc,B=v.win,v.error=function(t,e){t=v.isNumber(t)?"Highcharts error #"+t+": www.highcharts.com/errors/"+t:t;if(e)throw new Error(t);B.console&&console.log(t)},v.Fx=function(t,e,i){this.options=e,this.elem=t,this.prop=i},v.Fx.prototype={dSetter:function(){var t,e=this.paths[0],i=this.paths[1],n=[],o=this.now,r=e.length;if(1===o)n=this.toD;else if(r===i.length&&o<1)for(;r--;)t=parseFloat(e[r]),n[r]=isNaN(t)?e[r]:o*parseFloat(i[r]-t)+t;else n=i;this.elem.attr("d",n,null,!0)},update:function(){var t=this.elem,e=this.prop,i=this.now,n=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,i,null,!0):t.style[e]=i+this.unit,n&&n.call(t,i,this)},run:function(t,e,i){var n,o=this,r=function(t){return!r.stopped&&o.step(t)};this.startTime=+new Date,this.start=t,this.end=e,this.unit=i,this.now=this.start,this.pos=0,r.elem=this.elem,r.prop=this.prop,r()&&1===z.push(r)&&(r.timerId=setInterval(function(){for(n=0;n<z.length;n++)z[n]()||z.splice(n--,1);z.length||clearInterval(r.timerId)},13))},step:function(t){var e,i,n,o=+new Date,r=this.options,s=this.elem,a=r.complete,l=r.duration,c=r.curAnim;if(s.attr&&!s.element)e=!1;else if(t||o>=l+this.startTime){for(n in this.now=this.end,this.pos=1,this.update(),i=c[this.prop]=!0,c)!0!==c[n]&&(i=!1);i&&a&&a.call(s),e=!1}else this.pos=r.easing((o-this.startTime)/l),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0;return e},initPath:function(t,e,i){var n,o,r,s,a,l=t.startX,c=t.endX,u=-1<(e=e||"").indexOf("C"),h=u?7:3,e=e.split(" "),i=i.slice(),d=t.isArea,p=d?2:1;function f(t){var e,i;for(s=t.length;s--;)e="M"===t[s]||"L"===t[s],i=/[a-zA-Z]/.test(t[s+3]),e&&i&&t.splice(s+1,0,t[s+1],t[s+2],t[s+1],t[s+2])}function g(t,e,i){[].splice.apply(t,[i,0].concat(e))}function m(t,e){for(;t.length<o;)t[0]=e[o-t.length],g(t,t.slice(0,h),0),d&&(g(t,t.slice(t.length-h),t.length),s--);t[0]="M"}function y(t,e){for(var i=(o-t.length)/h;0<i&&i--;)(r=t.slice().splice(t.length/p-h,h*p))[0]=e[o-h-i*h],u&&(r[h-6]=r[h-2],r[h-5]=r[h-1]),g(t,r,t.length/p),d&&i--}if(u&&(f(e),f(i)),l&&c){for(s=0;s<l.length;s++){if(l[s]===c[0]){n=s;break}if(l[0]===c[c.length-l.length+s]){n=s,a=!0;break}}void 0===n&&(e=[])}return e.length&&v.isNumber(n)&&(o=i.length+n*p*h,a?(m(e,i),y(i,e)):(m(i,e),y(e,i))),[e,i]}},v.extend=function(t,e){for(var i in t=t||{},e)t[i]=e[i];return t},v.merge=function(){function o(t,e){var i,n;for(n in"object"!=typeof t&&(t={}),e)e.hasOwnProperty(n)&&(i=e[n],v.isObject(i,!0)&&"renderTo"!==n&&"number"!=typeof i.nodeType?t[n]=o(t[n]||{},i):t[n]=e[n]);return t}var t,e,i=arguments,n={};for(!0===i[0]&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;t<e;t++)n=o(n,i[t]);return n},v.pInt=function(t,e){return parseInt(t,e||10)},v.isString=function(t){return"string"==typeof t},v.isArray=function(t){t=Object.prototype.toString.call(t);return"[object Array]"===t||"[object Array Iterator]"===t},v.isObject=function(t,e){return t&&"object"==typeof t&&(!e||!v.isArray(t))},v.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},v.erase=function(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}},v.defined=function(t){return null!=t},v.attr=function(t,e,i){var n,o;if(v.isString(e))v.defined(i)?t.setAttribute(e,i):t&&t.getAttribute&&(o=t.getAttribute(e));else if(v.defined(e)&&v.isObject(e))for(n in e)t.setAttribute(n,e[n]);return o},v.splat=function(t){return v.isArray(t)?t:[t]},v.syncTimeout=function(t,e,i){if(e)return setTimeout(t,e,i);t.call(0,i)},v.pick=function(){for(var t,e=arguments,i=e.length,n=0;n<i;n++)if(null!=(t=e[n]))return t},v.css=function(t,e){v.isMS&&!v.svg&&e&&void 0!==e.opacity&&(e.filter="alpha(opacity="+100*e.opacity+")"),v.extend(t.style,e)},v.createElement=function(t,e,i,n,o){var t=$.createElement(t),r=v.css;return e&&v.extend(t,e),o&&r(t,{padding:0,border:"none",margin:0}),i&&r(t,i),n&&n.appendChild(t),t},v.extendClass=function(t,e){function i(){}return i.prototype=new t,v.extend(i.prototype,e),i},v.pad=function(t,e,i){return new Array((e||2)+1-String(t).length).join(i||0)+t},v.relativeLength=function(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)},v.wrap=function(t,e,n){var o=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments),e=arguments,i=this;return i.proceed=function(){o.apply(i,arguments.length?arguments:e)},t.unshift(o),t=n.apply(this,t),i.proceed=null,t}},v.getTZOffset=function(t){var e=v.Date;return 6e4*(e.hcGetTimezoneOffset&&e.hcGetTimezoneOffset(t)||e.hcTimezoneOffset||0)},v.dateFormat=function(t,e,i){if(!v.defined(e)||isNaN(e))return v.defaultOptions.lang.invalidDate||"";t=v.pick(t,"%Y-%m-%d %H:%M:%S");var n,o=v.Date,r=new o(e-v.getTZOffset(e)),s=r[o.hcGetHours](),a=r[o.hcGetDay](),l=r[o.hcGetDate](),c=r[o.hcGetMonth](),u=r[o.hcGetFullYear](),h=v.defaultOptions.lang,d=h.weekdays,p=h.shortWeekdays,f=v.pad,g=v.extend({a:p?p[a]:d[a].substr(0,3),A:d[a],d:f(l),e:f(l,2," "),w:a,b:h.shortMonths[c],B:h.months[c],m:f(c+1),y:u.toString().substr(2,2),Y:u,H:f(s),k:s,I:f(s%12||12),l:s%12||12,M:f(r[o.hcGetMinutes]()),p:s<12?"AM":"PM",P:s<12?"am":"pm",S:f(r.getSeconds()),L:f(Math.round(e%1e3),3)},v.dateFormats);for(n in g)for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof g[n]?g[n](e):g[n]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t},v.formatSingle=function(t,e){var i,n=v.defaultOptions.lang;return/f$/.test(t)?(i=(i=t.match(/\.([0-9])/))?i[1]:-1,null!==e&&(e=v.numberFormat(e,i,n.decimalPoint,-1<t.indexOf(",")?n.thousandsSep:""))):e=v.dateFormat(t,e),e},v.format=function(t,e){for(var i,n,o,r,s,a,l,c="{",u=!1,h=[];t&&-1!==(l=t.indexOf(c));){if(i=t.slice(0,l),u){for(s=(o=(n=i.split(":")).shift().split(".")).length,a=e,r=0;r<s;r++)a=a[o[r]];n.length&&(a=v.formatSingle(n.join(":"),a)),h.push(a)}else h.push(i);t=t.slice(l+1),c=(u=!u)?"}":"{"}return h.push(t),h.join("")},v.getMagnitude=function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},v.normalizeTickInterval=function(t,e,i,n,o){var r,s=t,a=t/(i=v.pick(i,1));for(e||(e=o?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===n&&(1===i?e=v.grep(e,function(t){return t%1==0}):i<=.1&&(e=[1/i]))),r=0;r<e.length&&(s=e[r],!(o&&t<=s*i||!o&&a<=(e[r]+(e[r+1]||e[r]))/2));r++);return s=v.correctFloat(s*i,-Math.round(Math.log(.001)/Math.LN10))},v.stableSort=function(t,i){for(var n,e=t.length,o=0;o<e;o++)t[o].safeI=o;for(t.sort(function(t,e){return 0===(n=i(t,e))?t.safeI-e.safeI:n}),o=0;o<e;o++)delete t[o].safeI},v.arrayMin=function(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i},v.arrayMax=function(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i},v.destroyObjectProperties=function(t,e){for(var i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]},v.discardElement=function(t){var e=(e=v.garbageBin)||v.createElement("div");t&&e.appendChild(t),e.innerHTML=""},v.correctFloat=function(t,e){return parseFloat(t.toPrecision(e||14))},v.setAnimation=function(t,e){e.renderer.globalAnimation=v.pick(t,e.options.chart.animation,!0)},v.animObject=function(t){return v.isObject(t)?v.merge(t):{duration:t?500:0}},v.timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},v.numberFormat=function(t,e,i,n){e=+e;var o,r,s=v.defaultOptions.lang,a=((t=+t||0).toString().split(".")[1]||"").length;return-1===e?e=Math.min(a,20):v.isNumber(e)||(e=2),a=(Math.abs(t)+Math.pow(10,-Math.max(e,a)-1)).toFixed(e),r=3<(o=String(v.pInt(a))).length?o.length%3:0,i=v.pick(i,s.decimalPoint),n=v.pick(n,s.thousandsSep),s=t<0?"-":"",s=(s+=r?o.substr(0,r)+n:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n),e&&(s+=i+a.slice(-e)),s},Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},v.getStyle=function(t,e){return"width"===e?Math.min(t.offsetWidth,t.scrollWidth)-v.getStyle(t,"padding-left")-v.getStyle(t,"padding-right"):"height"===e?Math.min(t.offsetHeight,t.scrollHeight)-v.getStyle(t,"padding-top")-v.getStyle(t,"padding-bottom"):(t=B.getComputedStyle(t,void 0))&&v.pInt(t.getPropertyValue(e))},v.inArray=function(t,e){return e.indexOf?e.indexOf(t):[].indexOf.call(e,t)},v.grep=function(t,e){return[].filter.call(t,e)},v.find=function(t,e){return[].find.call(t,e)},v.map=function(t,e){for(var i=[],n=0,o=t.length;n<o;n++)i[n]=e.call(t[n],t[n],n,t);return i},v.offset=function(t){var e=$.documentElement,t=t.getBoundingClientRect();return{top:t.top+(B.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(B.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},v.stop=function(t,e){for(var i=z.length;i--;)z[i].elem!==t||e&&e!==z[i].prop||(z[i].stopped=!0)},v.each=function(t,e,i){return Array.prototype.forEach.call(t,e,i)},v.addEvent=function(e,t,i){var n=e.hcEvents=e.hcEvents||{};function o(t){t.target=t.srcElement||B,i.call(e,t)}return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&(e.hcEventsIE||(e.hcEventsIE={}),e.hcEventsIE[i.toString()]=o,e.attachEvent("on"+t,o)),n[t]||(n[t]=[]),n[t].push(i),function(){v.removeEvent(e,t,i)}},v.removeEvent=function(n,o,t){var e,i,r=n.hcEvents;function s(t,e){n.removeEventListener?n.removeEventListener(t,e,!1):n.attachEvent&&(e=n.hcEventsIE[e.toString()],n.detachEvent("on"+t,e))}function a(){var t,e,i;if(n.nodeName)for(i in o?(t={})[o]=!0:t=r,t)if(r[i])for(e=r[i].length;e--;)s(i,r[i][e])}r&&(o?(e=r[o]||[],t?(-1<(i=v.inArray(t,e))&&(e.splice(i,1),r[o]=e),s(o,t)):(a(),r[o]=[])):(a(),n.hcEvents={}))},v.fireEvent=function(t,e,i,n){var o,r,s,a,l,c=t.hcEvents;if(i=i||{},$.createEvent&&(t.dispatchEvent||t.fireEvent))(o=$.createEvent("Events")).initEvent(e,!0,!0),v.extend(o,i),t.dispatchEvent?t.dispatchEvent(o):t.fireEvent(e,o);else if(c)for(s=(r=c[e]||[]).length,i.target||v.extend(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:e}),a=0;a<s;a++)(l=r[a])&&!1===l.call(t,i)&&i.preventDefault();n&&!i.defaultPrevented&&n(i)},v.animate=function(t,e,i){var n,o,r,s,a,l="";for(a in v.isObject(i)||(i={duration:(s=arguments)[2],easing:s[3],complete:s[4]}),v.isNumber(i.duration)||(i.duration=400),i.easing="function"==typeof i.easing?i.easing:Math[i.easing]||Math.easeInOutSine,i.curAnim=v.merge(e),e)v.stop(t,a),r=new v.Fx(t,i,a),o=null,"d"===a?(r.paths=r.initPath(t,t.d,e.d),r.toD=e.d,n=0,o=1):t.attr?n=t.attr(a):(n=parseFloat(v.getStyle(t,a))||0,"opacity"!==a&&(l="px")),(o=o||e[a])&&o.match&&o.match("px")&&(o=o.replace(/px/g,"")),r.run(n,o,l)},v.seriesType=function(t,e,i,n,o){var r=v.getOptions(),s=v.seriesTypes;return r.plotOptions[t]=v.merge(r.plotOptions[e],i),s[t]=v.extendClass(s[e]||function(){},n),s[t].prototype.type=t,o&&(s[t].prototype.pointClass=v.extendClass(v.Point,o)),s[t]},v.uniqueKey=(N=Math.random().toString(36).substring(2,9),q=0,function(){return"highcharts-"+N+"-"+q++}),B.jQuery&&(B.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new v[v.isString(t[0])?t.shift():"Chart"](this[0],t[0],t[1]),this):H[v.attr(this[0],"data-highcharts-chart")]}),$&&!$.defaultView&&(v.getStyle=function(t,e){var i={width:"clientWidth",height:"clientHeight"}[e];return t.style[e]?v.pInt(t.style[e]):("opacity"===e&&(e="filter"),i?(t.style.zoom=1,Math.max(t[i]-2*v.getStyle(t,"padding"),0)):(i=t.currentStyle[e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})],""===(i="filter"===e?i.replace(/alpha\(opacity=([0-9]+)\)/,function(t,e){return e/100}):i)?1:v.pInt(i)))}),Array.prototype.forEach||(v.each=function(t,e,i){for(var n=0,o=t.length;n<o;n++)if(!1===e.call(i,t[n],n,t))return n}),Array.prototype.indexOf||(v.inArray=function(t,e){var i,n=0;if(e)for(i=e.length;n<i;n++)if(e[n]===t)return n;return-1}),Array.prototype.filter||(v.grep=function(t,e){for(var i=[],n=0,o=t.length;n<o;n++)e(t[n],n)&&i.push(t[n]);return i}),Array.prototype.find||(v.find=function(t,e){for(var i=t.length,n=0;n<i;n++)if(e(t[n],n))return t[n]}),W=(F=d).each,G=F.isNumber,U=F.map,V=F.merge,X=F.pInt,F.Color=function(t){if(!(this instanceof F.Color))return new F.Color(t);this.init(t)},F.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[X(t[1]),X(t[2]),X(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[X(t[1]),X(t[2]),X(t[3]),1]}}],names:{white:"#ffffff",black:"#000000"},init:function(t){var e,i,n,o,r;if(this.input=t=this.names[t]||t,t&&t.stops)this.stops=U(t.stops,function(t){return new F.Color(t[1])});else if(t&&"#"===t[0]&&(r=t.length,t=parseInt(t.substr(1),16),7===r?i=[(16711680&t)>>16,(65280&t)>>8,255&t,1]:4===r&&(i=[(3840&t)>>4|(3840&t)>>8,(240&t)>>4|240&t,(15&t)<<4|15&t,1])),!i)for(n=this.parsers.length;n--&&!i;)(e=(o=this.parsers[n]).regex.exec(t))&&(i=o.parse(e));this.rgba=i||[]},get:function(i){var n,t=this.input,e=this.rgba;return this.stops?((n=V(t)).stops=[].concat(n.stops),W(this.stops,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=e&&G(e[0])?"rgb"===i||!i&&1===e[3]?"rgb("+e[0]+","+e[1]+","+e[2]+")":"a"===i?e[3]:"rgba("+e.join(",")+")":t,n},brighten:function(e){var t,i=this.rgba;if(this.stops)W(this.stops,function(t){t.brighten(e)});else if(G(e)&&0!==e)for(t=0;t<3;t++)i[t]+=X(255*e),i[t]<0&&(i[t]=0),255<i[t]&&(i[t]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this}},F.color=function(t){return new F.Color(t)},Y=(_=d).addEvent,Q=_.animate,j=_.attr,K=_.charts,J=_.color,Z=_.css,tt=_.createElement,I=_.defined,et=_.deg2rad,it=_.destroyObjectProperties,nt=_.doc,ot=_.each,rt=_.extend,st=_.erase,at=_.grep,lt=_.hasTouch,ct=_.inArray,ut=_.isArray,ht=_.isFirefox,dt=_.isMS,pt=_.isObject,ft=_.isString,gt=_.isWebKit,mt=_.merge,o=_.noop,p=_.pick,yt=_.pInt,vt=_.removeEvent,_.splat,bt=_.stop,xt=_.svg,wt=_.SVG_NS,kt=_.symbolSizes,Tt=_.win,((O=_.SVGElement=function(){return this}).prototype={opacity:1,SVG_NS:wt,textProps:["direction","fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textAlign","textDecoration","textOverflow","textOutline"],init:function(t,e){this.element="span"===e?tt(e):nt.createElementNS(this.SVG_NS,e),this.renderer=t},animate:function(t,e,i){e=_.animObject(p(e,this.renderer.globalAnimation,!0));return 0!==e.duration?(i&&(e.complete=i),Q(this,t,e)):(this.attr(t,null,i),e.step&&e.step.call(this)),this},colorGradient:function(t,e,i){var n,o,r,s,a,l,c,u,h,d,p,f,g=this.renderer,m=[];if(t.linearGradient?n="linearGradient":t.radialGradient&&(n="radialGradient"),n){for(d in o=t[n],s=g.gradients,l=t.stops,h=i.radialReference,ut(o)&&(t[n]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),o="radialGradient"===n&&h&&!I(o.gradientUnits)?mt(r=o,g.getRadialAttr(h,r),{gradientUnits:"userSpaceOnUse"}):o)"id"!==d&&m.push(d,o[d]);for(d in l)m.push(l[d]);s[m=m.join(",")]?p=s[m].attr("id"):(o.id=p=_.uniqueKey(),s[m]=a=g.createElement(n).attr(o).add(g.defs),a.radAttr=r,a.stops=[],ot(l,function(t){u=0===t[1].indexOf("rgba")?(u=_.color(t[1]),c=u.get("rgb"),u.get("a")):(c=t[1],1),t=g.createElement("stop").attr({offset:t[0],"stop-color":c,"stop-opacity":u}).add(a),a.stops.push(t)})),f="url("+g.url+"#"+p+")",i.setAttribute(e,f),i.gradient=m,t.toString=function(){return f}}},applyTextOutline:function(t){var e,i,n,o,r=this.element;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(r.style.fill))),this.fakeTS=!0,this.ySetter=this.xSetter,e=[].slice.call(r.getElementsByTagName("tspan")),t=t.split(" "),i=t[t.length-1],(n=t[0])&&"none"!==n&&(n=n.replace(/(^[\d\.]+)(.*?)$/g,function(t,e,i){return 2*e+i}),ot(e,function(t){"highcharts-text-outline"===t.getAttribute("class")&&st(e,r.removeChild(t))}),o=r.firstChild,ot(e,function(t,e){0===e&&(t.setAttribute("x",r.getAttribute("x")),e=r.getAttribute("y"),t.setAttribute("y",e||0),null===e&&r.setAttribute("y",0)),e=t.cloneNode(1),j(e,{class:"highcharts-text-outline",fill:i,stroke:i,"stroke-width":n,"stroke-linejoin":"round"}),r.insertBefore(e,o)}))},attr:function(t,e,i,n){var o,r,s,a,l=this.element,c=this;if("string"==typeof t&&void 0!==e&&(o=t,(t={})[o]=e),"string"==typeof t)c=(this[t+"Getter"]||this._defaultGetter).call(this,t,l);else{for(o in t)r=t[o],a=!1,n||bt(this,o),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(o)&&(s||(this.symbolAttr(t),s=!0),a=!0),!this.rotation||"x"!==o&&"y"!==o||(this.doTransform=!0),a||((a=this[o+"Setter"]||this._defaultSetter).call(this,r,o,l),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(o)&&this.updateShadows(o,r,a));this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return i&&i(),c},updateShadows:function(t,e,i){for(var n=this.shadows,o=n.length;o--;)i.call(n[o],"height"===t?Math.max(e-(n[o].cutHeight||0),0):"d"===t?this.d:e,t,n[o])},addClass:function(t,e){var i=this.attr("class")||"";return-1===i.indexOf(t)&&(e||(t=(i+(i?" ":"")+t).replace("  "," ")),this.attr("class",t)),this},hasClass:function(t){return-1!==j(this.element,"class").indexOf(t)},removeClass:function(t){return j(this.element,"class",(j(this.element,"class")||"").replace(t,"")),this},symbolAttr:function(e){var i=this;ot(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(t){i[t]=p(e[t],i[t])}),i.attr({d:i.renderer.symbols[i.symbolName](i.x,i.y,i.width,i.height,i)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":"none")},crisp:function(t,e){var i,n,o={};for(i in e=e||t.strokeWidth||0,n=Math.round(e)%2/2,t.x=Math.floor(t.x||this.x||0)+n,t.y=Math.floor(t.y||this.y||0)+n,t.width=Math.floor((t.width||this.width||0)-2*n),t.height=Math.floor((t.height||this.height||0)-2*n),I(t.strokeWidth)&&(t.strokeWidth=e),t)this[i]!==t[i]&&(this[i]=o[i]=t[i]);return o},css:function(t){var e,i,n,o=this.styles,r={},s=this.element,a="",l=!o,c=["textOverflow","width"];if(t&&t.color&&(t.fill=t.color),o)for(i in t)t[i]!==o[i]&&(r[i]=t[i],l=!0);if(l){if(o&&(t=rt(o,r)),e=this.textWidth=t&&t.width&&"auto"!==t.width&&"text"===s.nodeName.toLowerCase()&&yt(t.width),this.styles=t,e&&!xt&&this.renderer.forExport&&delete t.width,dt&&!xt)Z(this.element,t);else{for(i in n=function(t,e){return"-"+e.toLowerCase()},t)-1===ct(i,c)&&(a+=i.replace(/([A-Z])/g,n)+":"+t[i]+";");a&&j(s,"style",a)}this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t&&t.textOutline&&this.applyTextOutline(t.textOutline))}return this},strokeWidth:function(){return this["stroke-width"]||0},on:function(t,e){var i=this,n=i.element;return lt&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=Date.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===Tt.navigator.userAgent.indexOf("Android")||1100<Date.now()-(i.touchEventFired||0))&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(t){return this.inverted=t,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,i=this.scaleX,n=this.scaleY,o=this.inverted,r=this.rotation,s=this.element;o&&(t+=this.width,e+=this.height),t=["translate("+t+","+e+")"],o?t.push("rotate(90) scale(-1,1)"):r&&t.push("rotate("+r+" "+(s.getAttribute("x")||0)+" "+(s.getAttribute("y")||0)+")"),(I(i)||I(n))&&t.push("scale("+p(i,1)+" "+p(n,1)+")"),t.length&&s.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,o,r,s,a={},l=this.renderer,c=l.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,i&&!ft(i)||(this.alignTo=o=i||"renderer",st(c,this),c.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,o=this.alignTo),i=p(i,l[o],l),c=t.align,o=t.verticalAlign,l=(i.x||0)+(t.x||0),n=(i.y||0)+(t.y||0),"right"===c?r=1:"center"===c&&(r=2),r&&(l+=(i.width-(t.width||0))/r),a[e?"translateX":"x"]=Math.round(l),"bottom"===o?s=1:"middle"===o&&(s=2),s&&(n+=(i.height-(t.height||0))/s),a[e?"translateY":"y"]=Math.round(n),this[this.placed?"animate":"attr"](a),this.placed=!0,this.alignAttr=a,this},getBBox:function(t,e){var i,n,o,r=this.renderer,s=this.element,a=this.styles,l=this.textStr,c=r.cache,u=r.cacheKeys,e=p(e,this.rotation),h=e*et,d=a&&a.fontSize;if(void 0!==l&&(-1===(o=l.toString()).indexOf("<")&&(o=o.replace(/[0-9]/g,"0")),o+=["",e||0,d,a&&a.width,a&&a.textOverflow].join(",")),!(i=o&&!t?c[o]:i)){if(s.namespaceURI===this.SVG_NS||r.forExport){try{(n=this.fakeTS&&function(e){ot(s.querySelectorAll(".highcharts-text-outline"),function(t){t.style.display=e})})&&n("none"),i=s.getBBox?rt({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight},n&&n("")}catch(t){}(!i||i.width<0)&&(i={width:0,height:0})}else i=this.htmlGetBBox();if(r.isSVG&&(l=i.width,d=i.height,a&&"11px"===a.fontSize&&17===Math.round(d)&&(i.height=d=14),e&&(i.width=Math.abs(d*Math.sin(h))+Math.abs(l*Math.cos(h)),i.height=Math.abs(d*Math.cos(h))+Math.abs(l*Math.sin(h)))),o&&0<i.height){for(;250<u.length;)delete c[u.shift()];c[o]||u.push(o),c[o]=i}}return i},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i=this.renderer,n=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(e=t&&!t.handleZ&&!this.zIndex?e:this.zIndexSetter())||(t?t.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,o=n.element||{},r=n.renderer.isSVG&&"SPAN"===o.nodeName&&n.parentGroup;if(o.onclick=o.onmouseout=o.onmouseover=o.onmousemove=o.point=null,bt(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(o),n.destroyShadows();r&&r.div&&0===r.div.childNodes.length;)t=r.parentGroup,n.safeRemoveChild(r.div),delete r.div,r=t;for(e in n.alignTo&&st(n.renderer.alignedObjects,n),n)delete n[e];return null},shadow:function(t,e,i){var n,o,r,s,a,l,c=[],u=this.element;if(t){if(!this.shadows){for(s=p(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+p(t.offsetX,1)+", "+p(t.offsetY,1)+")",n=1;n<=s;n++)o=u.cloneNode(0),j(o,{isShadow:"true",stroke:t.color||"#000000","stroke-opacity":a*n,"stroke-width":r=2*s+1-2*n,transform:"translate"+l,fill:"none"}),i&&(j(o,"height",Math.max(j(o,"height")-r,0)),o.cutHeight=r),e?e.element.appendChild(o):u.parentNode.insertBefore(o,u),c.push(o);this.shadows=c}}else this.destroyShadows();return this},destroyShadows:function(){ot(this.shadows||[],function(t){this.safeRemoveChild(t)},this),this.shadows=void 0},xGetter:function(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)},_defaultGetter:function(t){t=p(this[t],this.element?this.element.getAttribute(t):null,0);return t=/^[\-0-9\.]+$/.test(t)?parseFloat(t):t},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e,i=this["stroke-width"];if("inherit"===i&&(i=1),t=t&&t.toLowerCase()){for(e=(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;e--;)t[e]=yt(t[e])*i;t=t.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=nt.createElementNS(this.SVG_NS,"title"),this.element.appendChild(e)),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(nt.createTextNode(String(p(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},visibilitySetter:function(t,e,i){"inherit"===t?i.removeAttribute(e):i.setAttribute(e,t)},zIndexSetter:function(t,e){var i,n,o,r,s,a=this.renderer,l=this.parentGroup,c=(l||a).element||a.box,u=this.element,h=this.added;if(I(t)&&(u.zIndex=t,this[e]===(t=+t)&&(h=!1),this[e]=t),h){for((t=this.zIndex)&&l&&(l.handleZ=!0),i=c.childNodes,s=0;s<i.length&&!r;s++)o=(n=i[s]).zIndex,n!==u&&(yt(o)>t||!I(t)&&I(o)||t<0&&!I(o)&&c!==a.box)&&(c.insertBefore(u,n),r=!0);r||c.appendChild(u)}return r},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}}).yGetter=O.prototype.xGetter,O.prototype.translateXSetter=O.prototype.translateYSetter=O.prototype.rotationSetter=O.prototype.verticalAlignSetter=O.prototype.scaleXSetter=O.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},O.prototype["stroke-widthSetter"]=O.prototype.strokeSetter=function(t,e,i){this[e]=t,this.stroke&&this["stroke-width"]?(O.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)},(l=_.SVGRenderer=function(){this.init.apply(this,arguments)}).prototype={Element:O,SVG_NS:wt,init:function(t,e,i,n,o,r){var s,a=this,n=a.createElement("svg").attr({version:"1.1",class:"highcharts-root"}).css(this.getStyle(n)),l=n.element;t.appendChild(l),-1===t.innerHTML.indexOf("xmlns")&&j(l,"xmlns",this.SVG_NS),a.isSVG=!0,this.box=l,this.boxWrapper=n,a.alignedObjects=[],this.url=(ht||gt)&&nt.getElementsByTagName("base").length?Tt.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(nt.createTextNode("Created with Highcharts 5.0.8")),a.defs=this.createElement("defs").add(),a.allowHTML=r,a.forExport=o,a.gradients={},a.cache={},a.cacheKeys=[],a.imgCount=0,a.setSize(e,i,!1),ht&&t.getBoundingClientRect&&((l=function(){Z(t,{left:0,top:0}),s=t.getBoundingClientRect(),Z(t,{left:Math.ceil(s.left)-s.left+"px",top:Math.ceil(s.top)-s.top+"px"})})(),a.unSubPixelFix=Y(Tt,"resize",l))},getStyle:function(t){return this.style=rt({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t),this.style},setStyle:function(t){this.boxWrapper.css(this.getStyle(t))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this,e=t.defs;return t.box=null,t.boxWrapper=t.boxWrapper.destroy(),it(t.gradients||{}),t.gradients=null,e&&(t.defs=e.destroy()),t.unSubPixelFix&&t.unSubPixelFix(),t.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:o,getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},buildText:function(m){function y(t){var e=/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:s||A.style.fontSize||12;return o?yt(o):A.fontMetrics(e,t.getAttribute("style")?t:T).h}function v(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}var b,x,w,k,T=m.element,A=this,C=A.forExport,t=p(m.textStr,"").toString(),e=-1!==t.indexOf("<"),i=T.childNodes,S=j(T,"x"),n=m.styles,M=m.textWidth,o=n&&n.lineHeight,r=n&&n.textOutline,E=n&&"ellipsis"===n.textOverflow,P=n&&"nowrap"===n.whiteSpace,s=n&&n.fontSize,a=i.length,n=M&&!m.added&&this.box,l=[t,E,P,o,r,s,M].join(",");if(l!==m.textCache){for(m.textCache=l;a--;)T.removeChild(i[a]);e||r||E||M||-1!==t.indexOf(" ")?(b=/<.*class="([^"]+)".*>/,x=/<.*style="([^"]+)".*>/,w=/<.*href="(http[^"]+)".*>/,n&&n.appendChild(T),l=e?t.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[t],l=at(l,function(t){return""!==t}),ot(l,function(t,p){var f,g=0;t=t.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),f=t.split("|||"),ot(f,function(t){if(""!==t||1===f.length){var e,i={},n=nt.createElementNS(A.SVG_NS,"tspan");if(b.test(t)&&(u=t.match(b)[1],j(n,"class",u)),x.test(t)&&(e=t.match(x)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),j(n,"style",e)),w.test(t)&&!C&&(j(n,"onclick",'location.href="'+t.match(w)[1]+'"'),Z(n,{cursor:"pointer"}))," "!==(t=v(t.replace(/<(.|\n)*?>/g,"")||" "))){if(n.appendChild(nt.createTextNode(t)),g?i.dx=0:p&&null!==S&&(i.x=S),j(n,i),T.appendChild(n),!g&&p&&(!xt&&C&&Z(n,{display:"block"}),j(n,"dy",y(n))),M){for(var o,r,s=t.replace(/([^\^])-/g,"$1- ").split(" "),a=1<f.length||p||1<s.length&&!P,l=[],c=y(n),u=m.rotation,h=t,d=h.length;(a||E)&&(s.length||l.length);)m.rotation=0,r=m.getBBox(!0).width,!xt&&A.forExport&&(r=A.measureSpanWidth(n.firstChild.data,m.styles)),o=M<r,void 0===k&&(k=o),E&&k?(d/=2,""===h||!o&&d<.5?s=[]:(s=[(h=t.substring(0,h.length+(o?-1:1)*Math.ceil(d)))+(3<M?"…":"")],n.removeChild(n.firstChild))):o&&1!==s.length?(n.removeChild(n.firstChild),l.unshift(s.pop())):(s=l,l=[],s.length&&!P&&(n=nt.createElementNS(wt,"tspan"),j(n,{dy:c,x:S}),e&&j(n,"style",e),T.appendChild(n)),M<r&&(M=r)),s.length&&n.appendChild(nt.createTextNode(s.join(" ").replace(/- /g,"-")));m.rotation=u}g++}}})}),k&&m.attr("title",m.textStr),n&&n.removeChild(T),r&&m.applyTextOutline&&m.applyTextOutline(r)):T.appendChild(nt.createTextNode(v(t)))}},getContrast:function(t){return 510<(t=J(t).rgba)[0]+t[1]+t[2]?"#000000":"#FFFFFF"},button:function(t,e,i,n,o,r,s,a,l){var c,u,h,d,p=this.label(t,e,i,l,null,null,null,null,"button"),f=0;return p.attr(mt({padding:8,r:2},o)),o=mt({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},o),c=o.style,delete o.style,r=mt(o,{fill:"#e6e6e6"},r),u=r.style,delete r.style,s=mt(o,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},s),h=s.style,delete s.style,a=mt(o,{style:{color:"#cccccc"}},a),d=a.style,delete a.style,Y(p.element,dt?"mouseover":"mouseenter",function(){3!==f&&p.setState(1)}),Y(p.element,dt?"mouseout":"mouseleave",function(){3!==f&&p.setState(f)}),p.setState=function(t){1!==t&&(p.state=f=t),p.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t||0]),p.attr([o,r,s,a][t||0]).css([c,u,h,d][t||0])},p.attr(o).css(rt({cursor:"default"},c)),p.on("click",function(t){3!==f&&n.call(p,t)})},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=Math.round(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=Math.round(t[2])+e%2/2),t},path:function(t){var e={fill:"none"};return ut(t)?e.d=t:pt(t)&&rt(e,t),this.createElement("path").attr(e)},circle:function(t,e,i){t=pt(t)?t:{x:t,y:e,r:i},e=this.createElement("circle");return e.xSetter=e.ySetter=function(t,e,i){i.setAttribute("c"+e,t)},e.attr(t)},arc:function(t,e,i,n,o,r){var s;return pt(t)?(e=(s=t).y,i=s.r,n=s.innerR,o=s.start,r=s.end,t=s.x):s={innerR:n,start:o,end:r},(n=this.symbol("arc",t,e,i,i,s)).r=i,n},rect:function(t,e,i,n,o,r){o=pt(t)?t.r:o;var s=this.createElement("rect"),t=pt(t)?t:void 0===t?{}:{x:t,y:e,width:Math.max(i,0),height:Math.max(n,0)};return void 0!==r&&(t.strokeWidth=r,t=s.crisp(t)),t.fill="none",o&&(t.r=o),s.rSetter=function(t,e,i){j(i,{rx:t,ry:t})},s.attr(t)},setSize:function(t,e,i){var n=this.alignedObjects,o=n.length;for(this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:p(i,!0)?void 0:0});o--;)n[o].align()},g:function(t){var e=this.createElement("g");return t?e.attr({class:"highcharts-"+t}):e},image:function(t,e,i,n,o){var r={preserveAspectRatio:"none"};return 1<arguments.length&&rt(r,{x:e,y:i,width:n,height:o}),(r=this.createElement("image").attr(r)).element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):r.element.setAttribute("hc-svg-href",t),r},symbol:function(t,e,i,n,o,r){var s,a,l,c=this,u=this.symbols[t],h=I(e)&&u&&this.symbols[t](Math.round(e),Math.round(i),n,o,r),d=/^url\((.*?)\)$/;return u?((s=this.path(h)).attr("fill","none"),rt(s,{symbolName:t,x:e,y:i,width:n,height:o}),r&&rt(s,r)):d.test(t)&&(a=t.match(d)[1],(s=this.image(a)).imgwidth=p(kt[a]&&kt[a].width,r&&r.width),s.imgheight=p(kt[a]&&kt[a].height,r&&r.height),l=function(){s.attr({width:s.width,height:s.height})},ot(["width","height"],function(t){s[t+"Setter"]=function(t,e){var i={},n=this["img"+e],o="width"===e?"translateX":"translateY";this[e]=t,I(n)&&(this.element&&this.element.setAttribute(e,n),this.alignByTranslate||(i[o]=((this[e]||0)-n)/2,this.attr(i)))}}),I(e)&&s.attr({x:e,y:i}),s.isImg=!0,I(s.imgwidth)&&I(s.imgheight)?l():(s.attr({width:0,height:0}),tt("img",{onload:function(){var t=K[c.chartIndex];0===this.width&&(Z(this,{position:"absolute",top:"-999em"}),nt.body.appendChild(this)),kt[a]={width:this.width,height:this.height},s.imgwidth=this.width,s.imgheight=this.height,s.element&&l(),this.parentNode&&this.parentNode.removeChild(this),c.imgCount--,!c.imgCount&&t&&t.onload&&t.onload()},src:a}),this.imgCount++)),s},symbols:{circle:function(t,e,i,n){return this.arc(t+i/2,e+n/2,i/2,n/2,{start:0,end:2*Math.PI,open:!1})},square:function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,o){var r=o.start,s=o.r||i,n=o.r||n||i,i=o.end-.001,a=o.innerR,l=o.open,c=Math.cos(r),u=Math.sin(r),h=Math.cos(i),i=Math.sin(i),o=o.end-r<Math.PI?0:1,r=["M",t+s*c,e+n*u,"A",s,n,0,o,1,t+s*h,e+n*i];return I(a)&&r.push(l?"M":"L",t+a*h,e+a*i,"A",a,a,0,o,0,t+a*c,e+a*u),r.push(l?"":"Z"),r},callout:function(t,e,i,n,o){var r=Math.min(o&&o.r||0,i,n),s=r+6,a=o&&o.anchorX,o=o&&o.anchorY,l=["M",t+r,e,"L",t+i-r,e,"C",t+i,e,t+i,e,t+i,e+r,"L",t+i,e+n-r,"C",t+i,e+n,t+i,e+n,t+i-r,e+n,"L",t+r,e+n,"C",t,e+n,t,e+n,t,e+n-r,"L",t,e+r,"C",t,e,t,e,t+r,e];return a&&i<a?e+s<o&&o<e+n-s?l.splice(13,3,"L",t+i,o-6,t+i+6,o,t+i,o+6,t+i,e+n-r):l.splice(13,3,"L",t+i,n/2,a,o,t+i,n/2,t+i,e+n-r):a&&a<0?e+s<o&&o<e+n-s?l.splice(33,3,"L",t,o+6,t-6,o,t,o-6,t,e+r):l.splice(33,3,"L",t,n/2,a,o,t,n/2,t,e+r):o&&n<o&&t+s<a&&a<t+i-s?l.splice(23,3,"L",a+6,e+n,a,e+n+6,a-6,e+n,t+r,e+n):o&&o<0&&t+s<a&&a<t+i-s&&l.splice(3,3,"L",a-6,e,a,e-6,a+6,e,i-r,e),l}},clipRect:function(t,e,i,n){var o=_.uniqueKey(),r=this.createElement("clipPath").attr({id:o}).add(this.defs),t=this.rect(t,e,i,n,0).add(r);return t.id=o,t.clipPath=r,t.count=0,t},text:function(t,e,i,n){var o=!xt&&this.forExport,r={};return!n||!this.allowHTML&&this.forExport?(r.x=Math.round(e||0),i&&(r.y=Math.round(i)),!t&&0!==t||(r.text=t),r=this.createElement("text").attr(r),o&&r.css({position:"absolute"}),n||(r.xSetter=function(t,e,i){for(var n,o=i.getElementsByTagName("tspan"),r=i.getAttribute(e),s=0;s<o.length;s++)(n=o[s]).getAttribute(e)===r&&n.setAttribute(e,t);i.setAttribute(e,t)}),r):this.html(t,e,i)},fontMetrics:function(t,e){return t=t||e&&e.style&&e.style.fontSize||this.style&&this.style.fontSize,{h:e=(t=/px/.test(t)?yt(t):/em/.test(t)?parseFloat(t)*(e?this.fontMetrics(null,e.parentNode).f:16):12)<24?t+3:Math.round(1.2*t),b:Math.round(.8*e),f:t}},rotCorr:function(t,e,i){var n=t;return e&&i&&(n=Math.max(n*Math.cos(e*et),4)),{x:-t/3*Math.sin(e*et),y:n}},label:function(t,e,i,n,o,r,s,a,l){var c,u,h,d,p,f,g,m,y,v,b,x,w,k=this,T=k.g("button"!==l&&"label"),A=T.text=k.text("",0,0,s).attr({zIndex:1}),C=0,S=3,M=0,E={},P=/^url\((.*?)\)$/.test(n),j=P,L=(l&&T.addClass("highcharts-"+l),j=P,v=function(){return(m||0)%2/2},b=function(){var t=A.element.style,e={};u=(void 0===h||void 0===d||g)&&I(A.textStr)&&A.getBBox(),T.width=(h||u.width||0)+2*S+M,T.height=(d||u.height||0)+2*S,y=S+k.fontMetrics(t&&t.fontSize,A).b,j&&(c||(T.box=c=k.symbols[n]||P?k.symbol(n):k.rect(),c.addClass(("button"===l?"":"highcharts-label-box")+(l?" highcharts-"+l+"-box":"")),c.add(T),t=v(),e.x=t,e.y=(a?-y:0)+t),e.width=Math.round(T.width),e.height=Math.round(T.height),c.attr(rt(e,E)),E={})},x=function(){var t=M+S,e=a?0:y;I(h)&&u&&("center"===g||"right"===g)&&(t+={center:.5,right:1}[g]*(h-u.width)),t===A.x&&e===A.y||(A.attr("x",t),void 0!==e&&A.attr("y",e)),A.x=t,A.y=e},w=function(t,e){c?c.attr(t,e):E[t]=e},T.onAdd=function(){A.add(T),T.attr({text:t||0===t?t:"",x:e,y:i}),c&&I(o)&&T.attr({anchorX:o,anchorY:r})},T.widthSetter=function(t){h=_.isNumber(t)?t:null},T.heightSetter=function(t){d=t},T["text-alignSetter"]=function(t){g=t},T.paddingSetter=function(t){I(t)&&t!==S&&(S=T.padding=t,x())},T.paddingLeftSetter=function(t){I(t)&&t!==M&&(M=t,x())},T.alignSetter=function(t){(t={left:0,center:.5,right:1}[t])!==C&&(C=t,u&&T.attr({x:p}))},T.textSetter=function(t){void 0!==t&&A.textSetter(t),b(),x()},T["stroke-widthSetter"]=function(t,e){t&&(j=!0),m=this["stroke-width"]=t,w(e,t)},T.strokeSetter=T.fillSetter=T.rSetter=function(t,e){"fill"===e&&t&&(j=!0),w(e,t)},T.anchorXSetter=function(t,e){o=t,w(e,Math.round(t)-v()-p)},T.anchorYSetter=function(t,e){w(e,(r=t)-f)},T.xSetter=function(t){T.x=t,C&&(t-=C*((h||u.width)+2*S)),p=Math.round(t),T.attr("translateX",p)},T.ySetter=function(t){f=T.y=Math.round(t),T.attr("translateY",f)},T.css);return rt(T,{css:function(e){var i;return e&&(i={},e=mt(e),ot(T.textProps,function(t){void 0!==e[t]&&(i[t]=e[t],delete e[t])}),A.css(i)),L.call(T,e)},getBBox:function(){return{width:u.width+2*S,height:u.height+2*S,x:u.x-S,y:u.y-S}},shadow:function(t){return t&&(b(),c&&c.shadow(t)),T},destroy:function(){vt(T.element,"mouseenter"),vt(T.element,"mouseleave"),A=A&&A.destroy(),c=c&&c.destroy(),O.prototype.destroy.call(T),T=k=b=x=w=null}})}},_.Renderer=l,At=d.attr,Ct=d.createElement,St=d.css,Mt=d.defined,Et=d.each,Pt=d.extend,jt=d.isFirefox,Lt=d.isMS,_t=d.isWebKit,It=d.pInt,s=d.SVGElement,r=d.SVGRenderer,Ot=d.win,Dt=d.wrap,Pt(s.prototype,{htmlCss:function(t){var e=this.element,e=t&&"SPAN"===e.tagName&&t.width;return e&&(delete t.width,this.textWidth=e,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=Pt(this.styles,t),St(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){var t,e,i,n,o,r,s,a,l,c,u,h,d,p;this.added?(e=(t=this).renderer,i=t.element,n=t.translateX||0,o=t.translateY||0,r=t.x||0,s=t.y||0,l={left:0,center:.5,right:1}[a=t.textAlign||"left"],d=t.styles,St(i,{marginLeft:n,marginTop:o}),t.shadows&&Et(t.shadows,function(t){St(t,{marginLeft:n+1,marginTop:o+1})}),t.inverted&&Et(i.childNodes,function(t){e.invertChild(t,i)}),"SPAN"===i.tagName&&(c=t.rotation,h=It(t.textWidth),d=d&&d.whiteSpace,(p=[c,a,i.innerHTML,t.textWidth,t.textAlign].join(","))!==t.cTT&&(u=e.fontMetrics(i.style.fontSize).b,Mt(c)&&t.setSpanRotation(c,l,u),St(i,{width:"",whiteSpace:d||"nowrap"}),i.offsetWidth>h&&/[ \-]/.test(i.textContent||i.innerText)&&St(i,{width:h+"px",display:"block",whiteSpace:d||"normal"}),t.getSpanCorrection(i.offsetWidth,u,l,c,a)),St(i,{left:r+(t.xCorr||0)+"px",top:s+(t.yCorr||0)+"px"}),_t&&(u=i.offsetHeight),t.cTT=p)):this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var n={},o=Lt?"-ms-transform":_t?"-webkit-transform":jt?"MozTransform":Ot.opera?"-o-transform":"";n[o]=n.transform="rotate("+t+"deg)",n[o+(jt?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",St(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),Pt(r.prototype,{html:function(t,e,i){function s(e,o){Et(["opacity","visibility"],function(t){Dt(e,t+"Setter",function(t,e,i,n){t.call(this,e,i,n),o[i]=e})})}var a=this.createElement("span"),n=a.element,l=a.renderer,o=l.isSVG;return a.textSetter=function(t){t!==n.innerHTML&&delete this.bBox,n.innerHTML=this.textStr=t,a.htmlUpdateTransform()},o&&s(a,a.element.style),a.xSetter=a.ySetter=a.alignSetter=a.rotationSetter=function(t,e){a[e="align"===e?"textAlign":e]=t,a.htmlUpdateTransform()},a.attr({text:t,x:Math.round(e),y:Math.round(i)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"}),n.style.whiteSpace="nowrap",a.css=a.htmlCss,o&&(a.add=function(t){var e,i,o=l.box.parentNode,r=[];if(this.parentGroup=t){if(!(e=t.div)){for(i=t;i;)r.push(i),i=i.parentGroup;Et(r.reverse(),function(i){var n,t=(t=At(i.element,"class"))&&{className:t};e=i.div=i.div||Ct("div",t,{position:"absolute",left:(i.translateX||0)+"px",top:(i.translateY||0)+"px",display:i.display,opacity:i.opacity,pointerEvents:i.styles&&i.styles.pointerEvents},e||o),n=e.style,Pt(i,{on:function(){return a.on.apply({element:r[0].div},arguments),i},translateXSetter:function(t,e){n.left=t+"px",i[e]=t,i.doTransform=!0},translateYSetter:function(t,e){n.top=t+"px",i[e]=t,i.doTransform=!0}}),s(i,n)})}}else e=o;return e.appendChild(n),a.added=!0,a.alignOnAdd&&a.htmlUpdateTransform(),a}),a}}),Rt=(L=d).createElement,Nt=L.css,qt=L.defined,zt=L.deg2rad,Ht=L.discardElement,$t=L.doc,Bt=L.each,Ft=L.erase,Wt=L.extend,a=L.extendClass,Gt=L.isArray,Ut=L.isNumber,Vt=L.isObject,t=L.merge,u=L.noop,Xt=L.pick,Yt=L.pInt,h=L.svg,Qt=L.SVGElement,Kt=L.SVGRenderer,Jt=L.win,h||((h={docMode8:$t&&8===$t.documentMode,init:function(t,e){var i=["<",e,' filled="f" stroked="f"'],n=["position: ","absolute",";"],o="div"===e;"shape"!==e&&!o||n.push("left:0;top:0;width:1px;height:1px;"),n.push("visibility: ",o?"hidden":"visible"),i.push(' style="',n.join(""),'"/>'),e&&(i=o||"span"===e||"img"===e?i.join(""):t.prepVML(i),this.element=Rt(i)),this.renderer=t},add:function(t){var e=this.renderer,i=this.element,n=e.box,o=t&&t.inverted,n=t?t.element||t:n;return t&&(this.parentGroup=t),o&&e.invertChild(i,n),n.appendChild(i),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this.className&&this.attr("class",this.className),this},updateTransform:Qt.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=Math.cos(t*zt),i=Math.sin(t*zt);Nt(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):"none"})},getSpanCorrection:function(t,e,i,n,o){var r,s=n?Math.cos(n*zt):1,a=n?Math.sin(n*zt):0,l=Xt(this.elemHeight,this.element.offsetHeight),c=o&&"left"!==o;this.xCorr=s<0&&-t,this.yCorr=a<0&&-l,this.xCorr+=a*e*((r=s*a<0)?1-i:i),this.yCorr-=s*e*(n?r?i:1-i:1),c&&(this.xCorr-=t*i*(s<0?-1:1),n&&(this.yCorr-=l*i*(a<0?-1:1)),Nt(this.element,{textAlign:o}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)Ut(t[e])?i[e]=Math.round(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i=this,t=t?(e=t.members,Ft(e,i),e.push(i),i.destroyClip=function(){Ft(e,i)},t.getCSS(i)):(i.destroyClip&&i.destroyClip(),{clip:i.docMode8?"inherit":"rect(auto)"});return i.css(t)},css:Qt.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&Ht(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),Qt.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=Jt.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i;return 9!==(i=(t=t.split(/[ ,]/)).length)&&11!==i||(t[i-4]=t[i-2]=Yt(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var n,o,r,s,a,l,c=[],u=this.element,h=this.renderer,d=u.style,p=u.path,f=p=p&&"string"!=typeof p.value?"x":p;if(t){for(a=Xt(t.width,3),l=(t.opacity||.15)/a,n=1;n<=3;n++)r=['<shape isShadow="true" strokeweight="',s=2*a+1-2*n,'" filled="false" path="',f=i?this.cutOffPath(p.value,.5+s):f,'" coordsize="10 10" style="',u.style.cssText,'" />'],o=Rt(h.prepVML(r),null,{left:Yt(d.left)+Xt(t.offsetX,1),top:Yt(d.top)+Xt(t.offsetY,1)}),i&&(o.cutOff=1+s),r=['<stroke color="',t.color||"#000000",'" opacity="',l*n,'"/>'],Rt(h.prepVML(r),null,null,o),e?e.element.appendChild(o):u.parentNode.insertBefore(o,u),c.push(o);this.shadows=c}return this},updateShadows:u,setAttr:function(t,e){this.docMode8?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){(this.added?this.element:this).className=t},dashstyleSetter:function(t,e,i){(i.getElementsByTagName("stroke")[0]||Rt(this.renderer.prepVML(["<stroke/>"]),null,null,i))[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n,o=this.shadows;if(this.d=(t=t||[]).join&&t.join(" "),i.path=t=this.pathToVML(t),o)for(n=o.length;n--;)o[n].path=o[n].cutOff?this.cutOffPath(t,o[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled="none"!==t,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},"fill-opacitySetter":function(t,e,i){Rt(this.renderer.prepVML(["<",e.split("-")[0],' opacity="',t,'"/>']),null,null,i)},opacitySetter:u,rotationSetter:function(t,e,i){i=i.style;this[e]=i[e]=t,i.left=-Math.round(Math.sin(t*zt)+1)+"px",i.top=Math.round(Math.cos(t*zt))+"px"},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e,this))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,Ut(t)&&(t+="px"),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(e,i,t){"inherit"===e&&(e="visible"),this.shadows&&Bt(this.shadows,function(t){t.style[i]=e}),"DIV"===t.nodeName&&(e="hidden"===e?"-999em":0,this.docMode8||(t.style[i]=e?"visible":"hidden"),i="top"),t.style[i]=e},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}})["stroke-opacitySetter"]=h["fill-opacitySetter"],L.VMLElement=h=a(Qt,h),h.prototype.ySetter=h.prototype.widthSetter=h.prototype.heightSetter=h.prototype.xSetter,u={Element:h,isIE8:-1<Jt.navigator.userAgent.indexOf("MSIE 8.0"),init:function(e,t,i){var n,o,r=this;if(r.alignedObjects=[],o=(n=r.createElement("div").css({position:"relative"})).element,e.appendChild(n.element),r.isVML=!0,r.box=o,r.boxWrapper=n,r.gradients={},r.cache={},r.cacheKeys=[],r.imgCount=0,r.setSize(t,i,!1),!$t.namespaces.hcv){$t.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),e="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{$t.createStyleSheet().cssText=e}catch(t){$t.styleSheets[0].cssText+=e}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,i,n){var o=this.createElement(),r=Vt(t);return Wt(o,{members:[],count:0,left:(r?t.x:t)+1,top:(r?t.y:e)+1,width:(r?t.width:i)-1,height:(r?t.height:n)-1,getCSS:function(t){var e=t.element,i=e.nodeName,n=t.inverted,e=this.top-("shape"===i?e.offsetTop:0),o=this.left,r=o+this.width,s=e+this.height,e={clip:"rect("+Math.round(n?o:e)+"px,"+Math.round(n?s:r)+"px,"+Math.round(n?r:s)+"px,"+Math.round(n?e:o)+"px)"};return!n&&t.docMode8&&"DIV"===i&&Wt(e,{width:r+"px",height:s+"px"}),e},updateClipping:function(){Bt(o.members,function(t){t.element&&t.css(o.getCSS(t))})}})},color:function(t,e,i,n){var o,r,s,a,l,c,u,h,d,p,f,g,m,y,v,b,x,w,k,T,A,C,S,M=this,E=/^rgba/,P="none";return t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s?(c=t.linearGradient||t.radialGradient,f="",S=t.stops,g=[],m=function(){r=['<fill colors="'+g.join(",")+'" opacity="',h,'" o:opacity2="',u,'" type="',s,'" ',f,'focus="100%" method="any" />'],Rt(M.prepVML(r),null,null,e)},A=S[0],C=S[S.length-1],0<A[0]&&S.unshift([0,A[1]]),C[0]<1&&S.push([1,C[1]]),Bt(S,function(t,e){l=E.test(t[1])?(o=L.color(t[1]),a=o.get("rgb"),o.get("a")):(a=t[1],1),g.push(100*t[0]+"% "+a),e?(h=l,d=a):(u=l,p=a)}),"fill"===i?"gradient"===s?(A=c.x1||c[0]||0,C=c.y1||c[1]||0,S=c.x2||c[2]||0,y=c.y2||c[3]||0,f='angle="'+(90-180*Math.atan((y-C)/(S-A))/Math.PI)+'"',m()):(y=c.r,b=v=2*y,x=c.cx,w=c.cy,k=e.radialReference,C=function(){k&&(T=n.getBBox(),x+=(k[0]-T.x)/T.width-.5,w+=(k[1]-T.y)/T.height-.5,v*=k[2]/T.width,b*=k[2]/T.height),f='src="'+L.getOptions().global.VMLRadialGradientURL+'" size="'+v+","+b+'" origin="0.5,0.5" position="'+x+","+w+'" color2="'+p+'" ',m()},n.added?C():n.onAdd=C,P=d):P=a):P=E.test(t)&&"IMG"!==e.tagName?(o=L.color(t),n[i+"-opacitySetter"](o.get("a"),i,e),o.get("rgb")):((S=e.getElementsByTagName(i)).length&&(S[0].opacity=1,S[0].type="solid"),t),P},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),t=i?-1===(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e):t.replace("<","<hcv:")},text:Kt.prototype.html,path:function(t){var e={coordsize:"10 10"};return Gt(t)?e.d=t:Vt(t)&&Wt(e,t),this.createElement("shape").attr(e)},circle:function(t,e,i){var n=this.symbol("circle");return Vt(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,class:"highcharts-"+t}),this.createElement("div").attr(e)},image:function(t,e,i,n,o){var r=this.createElement("img").attr({src:t});return 1<arguments.length&&r.attr({x:e,y:i,width:n,height:o}),r},createElement:function(t){return"rect"===t?this.symbol(t):Kt.prototype.createElement.call(this,t)},invertChild:function(e,t){var i=this,t=t.style,n="IMG"===e.tagName&&e.style;Nt(e,{flip:"x",left:Yt(t.width)-(n?Yt(n.top):1),top:Yt(t.height)-(n?Yt(n.left):1),rotation:-90}),Bt(e.childNodes,function(t){i.invertChild(t,e)})},symbols:{arc:function(t,e,i,n,o){var r=o.start,s=o.end,i=o.r||i||n,n=o.innerR,a=Math.cos(r),l=Math.sin(r),c=Math.cos(s),u=Math.sin(s);return s-r==0?["x"]:(s=["wa",t-i,e-i,t+i,e+i,t+i*a,e+i*l,t+i*c,e+i*u],o.open&&!n&&s.push("e","M",t,e),s.push("at",t-n,e-n,t+n,e+n,t+n*c,e+n*u,t+n*a,e+n*l,"x","e"),s.isArc=!0,s)},circle:function(t,e,i,n,o){return o&&qt(o.r)&&(i=n=2*o.r),o&&o.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,o){return Kt.prototype.symbols[qt(o)&&o.r?"callout":"square"].call(0,t,e,i,n,o)}}},L.VMLRenderer=a=function(){this.init.apply(this,arguments)},a.prototype=t(Kt.prototype,u),L.Renderer=a),Kt.prototype.measureSpanWidth=function(t,e){var i=$t.createElement("span"),t=$t.createTextNode(t);return i.appendChild(t),Nt(i,e),this.box.appendChild(i),t=i.offsetWidth,Ht(i),t},o=(n=d).color,Zt=n.each,te=n.getTZOffset,l=n.isTouchDevice,ee=n.merge,ie=n.pick,s=n.svg,ne=n.win,n.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,VMLRadialGradientURL:"http://code.highcharts.com/5.0.8/gfx/vml-radial-gradient.png"},chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:s,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:l?25:10,backgroundColor:o("#f7f7f7").setOpacity(.85).get(),borderWidth:1,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}},n.setOptions=function(t){return n.defaultOptions=ee(!0,n.defaultOptions,t),Vr(),n.defaultOptions},n.getOptions=function(){return n.defaultOptions},n.defaultPlotOptions=n.defaultOptions.plotOptions,Vr(),re=(oe=d).arrayMax,se=oe.arrayMin,ae=oe.defined,le=oe.destroyObjectProperties,ce=oe.each,ue=oe.erase,he=oe.merge,de=oe.pick,oe.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},oe.PlotLineOrBand.prototype={render:function(){var t,e,i=this,n=i.axis,o=n.horiz,r=i.options,s=r.label,a=i.label,l=r.to,c=r.from,u=r.value,h=ae(c)&&ae(l),d=ae(u),p=i.svgElem,f=!p,g=[],m=r.color,y=de(r.zIndex,0),v=r.events,b={class:"highcharts-plot-"+(h?"band ":"line ")+(r.className||"")},x={},w=n.chart.renderer,k=h?"bands":"lines",T=n.log2lin;if(n.isLog&&(c=T(c),l=T(l),u=T(u)),d?(b={stroke:m,"stroke-width":r.width},r.dashStyle&&(b.dashstyle=r.dashStyle)):h&&(m&&(b.fill=m),r.borderWidth&&(b.stroke=r.borderColor,b["stroke-width"]=r.borderWidth)),(T=n[k+="-"+(x.zIndex=y)])||(n[k]=T=w.g("plot-"+k).attr(x).add()),f&&(i.svgElem=p=w.path().attr(b).add(T)),d)g=n.getPlotLinePath(u,p.strokeWidth());else{if(!h)return;g=n.getPlotBandPath(c,l,r)}if(f&&g&&g.length){if(p.attr({d:g}),v)for(e in t=function(e){p.on(e,function(t){v[e].apply(i,[t])})},v)t(e)}else p&&(g?(p.show(),p.animate({d:g})):(p.hide(),a&&(i.label=a=a.destroy())));return s&&ae(s.text)&&g&&g.length&&0<n.width&&0<n.height&&!g.flat?(s=he({align:o&&h&&"center",x:o?!h&&4:10,verticalAlign:!o&&h&&"middle",y:o?h?16:10:h?6:-4,rotation:o&&!h&&90},s),this.renderLabel(s,g,h,y)):a&&a.hide(),i},renderLabel:function(t,e,i,n){var o,r=this.label,s=this.axis.chart.renderer;r||((o={align:t.textAlign||t.align,rotation:t.rotation,class:"highcharts-plot-"+(i?"band":"line")+"-label "+(t.className||"")}).zIndex=n,this.label=r=s.text(t.text,0,0,t.useHTML).attr(o).add(),r.css(t.style)),n=[e[1],e[4],i?e[6]:e[1]],s=[e[2],e[5],i?e[7]:e[2]],o=se(n),i=se(s),r.align(t,!1,{x:o,y:i,width:re(n)-o,height:re(s)-i}),r.show()},destroy:function(){ue(this.axis.plotLinesAndBands,this),delete this.axis,le(this)}},oe.AxisPlotLineOrBandExtension={getPlotBandPath:function(t,e){e=this.getPlotLinePath(e,null,null,!0),t=this.getPlotLinePath(t,null,null,!0);return t&&e?(t.flat=t.toString()===e.toString(),t.push(e[4],e[5],e[1],e[2],"z")):t=null,t},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new oe.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,i=this.options,n=this.userOptions,o=t.length;o--;)t[o].id===e&&t[o].destroy();ce([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(t){for(o=t.length;o--;)t[o].id===e&&ue(t,t[o])})}},pe=(r=d).correctFloat,fe=r.defined,ge=r.destroyObjectProperties,me=r.isNumber,ye=r.merge,ve=r.pick,be=r.deg2rad,r.Tick=function(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()},r.Tick.prototype={addLabel:function(){var t,e=this.axis,i=e.options,n=e.chart,o=e.categories,r=e.names,s=this.pos,a=i.labels,l=e.tickPositions,c=s===l[0],u=s===l[l.length-1],o=o?ve(o[s],r[s],s):s,r=this.label,l=l.info;e.isDatetimeAxis&&l&&(t=i.dateTimeLabelFormats[l.higherRanks[s]||l.unitName]),this.isFirst=c,this.isLast=u,i=e.labelFormatter.call({axis:e,chart:n,isFirst:c,isLast:u,dateTimeLabelFormat:t,value:e.isLog?pe(e.lin2log(o)):o}),fe(r)?r&&r.attr({text:i}):(this.label=r=fe(i)&&a.enabled?n.renderer.text(i,0,0,a.useHTML).css(ye(a.style)).add(e.labelGroup):null,this.labelLength=r&&r.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,i=this.axis,n=t.x,o=i.chart.chartWidth,r=i.chart.spacing,s=ve(i.labelLeft,Math.min(i.pos,r[3])),r=ve(i.labelRight,Math.max(i.pos+i.len,o-r[1])),a=this.label,l=this.rotation,c={left:0,center:.5,right:1}[i.labelAlign],u=a.getBBox().width,h=i.getSlotWidth(),d=h,p=c,f=1,g={};l?l<0&&n-c*u<s?e=Math.round(n/Math.cos(l*be)-s):0<l&&r<n+c*u&&(e=Math.round((o-n)/Math.cos(l*be))):(n-c*u<s?d=t.x+d*(1-c)-s:r<n+(1-c)*u&&(d=r-t.x+d*c,f=-1),(d=Math.min(h,d))<h&&"center"===i.labelAlign&&(t.x+=f*(h-d-p*(h-Math.min(u,d)))),(d<u||i.autoRotation&&(a.styles||{}).width)&&(e=d)),e&&(g.width=e,(i.options.labels.style||{}).textOverflow||(g.textOverflow="ellipsis"),a.css(g))},getPosition:function(t,e,i,n){var o=this.axis,r=o.chart,s=n&&r.oldChartHeight||r.chartHeight;return{x:t?o.translate(e+i,null,null,n)+o.transB:o.left+o.offset+(o.opposite?(n&&r.oldChartWidth||r.chartWidth)-o.right-o.left:0),y:t?s-o.bottom+o.offset-(o.opposite?o.height:0):s-o.translate(e+i,null,null,n)-o.transB}},getLabelPosition:function(t,e,i,n,o,r,s,a){var l=this.axis,c=l.transA,u=l.reversed,h=l.staggerLines,d=l.tickRotCorr||{x:0,y:0},p=o.y;return fe(p)||(p=0===l.side?i.rotation?-8:-i.getBBox().height:2===l.side?d.y+8:Math.cos(i.rotation*be)*(d.y-i.getBBox(!1,0).height/2)),t=t+o.x+d.x-(r&&n?r*c*(u?-1:1):0),e=e+p-(r&&!n?r*c*(u?1:-1):0),h&&(i=s/(a||1)%h,e+=(i=l.opposite?h-i-1:i)*(l.labelOffset/h)),{x:t,y:Math.round(e)}},getMarkPath:function(t,e,i,n,o,r){return r.crispLine(["M",t,e,"L",t+(o?0:-i),e+(o?i:0)],n)},renderGridLine:function(t,e,i){var n=this.axis,o=n.options,r=this.gridLine,s={},a=this.pos,l=this.type,c=n.tickmarkOffset,u=n.chart.renderer,h=l?l+"Grid":"grid",d=o[h+"LineWidth"],p=o[h+"LineColor"],o=o[h+"LineDashStyle"];r||(s.stroke=p,s["stroke-width"]=d,o&&(s.dashstyle=o),l||(s.zIndex=1),t&&(s.opacity=0),this.gridLine=r=u.path().attr(s).addClass("highcharts-"+(l?l+"-":"")+"grid-line").add(n.gridGroup)),!t&&r&&(h=n.getPlotLinePath(a+c,r.strokeWidth()*i,t,!0))&&r[this.isNew?"attr":"animate"]({d:h,opacity:e})},renderMark:function(t,e,i){var n=this.axis,o=n.options,r=n.chart.renderer,s=this.type,a=s?s+"Tick":"tick",l=n.tickSize(a),c=this.mark,u=!c,h=t.x,t=t.y,d=ve(o[a+"Width"],!s&&n.isXAxis?1:0),o=o[a+"Color"];l&&(n.opposite&&(l[0]=-l[0]),u&&(this.mark=c=r.path().addClass("highcharts-"+(s?s+"-":"")+"tick").add(n.axisGroup),c.attr({stroke:o,"stroke-width":d})),c[u?"attr":"animate"]({d:this.getMarkPath(h,t,l[0],c.strokeWidth()*i,n.horiz,r),opacity:e}))},renderLabel:function(t,e,i,n){var o=this,r=o.axis,s=r.horiz,a=r.options,l=o.label,c=a.labels,u=c.step,h=r.tickmarkOffset,d=!0,p=t.x,f=t.y;l&&me(p)&&(l.xy=t=o.getLabelPosition(p,f,l,s,c,h,n,u),o.isFirst&&!o.isLast&&!ve(a.showFirstLabel,1)||o.isLast&&!o.isFirst&&!ve(a.showLastLabel,1)?d=!1:!s||r.isRadial||c.step||c.rotation||e||0===i||o.handleOverflow(t),(d=u&&n%u?!1:d)&&me(t.y)?(t.opacity=i,l[o.isNew?"attr":"animate"](t)):l.attr("y",-9999),o.isNew=!1)},render:function(t,e,i){var n=this.axis,o=n.horiz,r=this.pos,s=n.tickmarkOffset,r=this.getPosition(o,r,s,e),s=r.x,a=r.y,s=o&&s===n.pos+n.len||!o&&a===n.pos?-1:1;i=ve(i,1),this.isActive=!0,this.renderGridLine(e,i,s),this.renderMark(r,i,s),this.renderLabel(r,e,i,t)},destroy:function(){ge(this,this.axis)}},xe=(x=d).addEvent,we=x.animObject,ke=x.arrayMax,Te=x.arrayMin,h=x.AxisPlotLineOrBandExtension,Ae=x.color,Ce=x.correctFloat,Se=x.defaultOptions,T=x.defined,Me=x.deg2rad,Ee=x.destroyObjectProperties,A=x.each,Pe=x.extend,je=x.fireEvent,Le=x.format,_e=x.getMagnitude,Ie=x.grep,Oe=x.inArray,De=x.isArray,Re=x.isNumber,Ne=x.isString,qe=x.merge,ze=x.normalizeTickInterval,C=x.pick,He=x.PlotLineOrBand,$e=x.removeEvent,Be=x.splat,Fe=x.syncTimeout,We=x.Tick,x.Axis=function(){this.init.apply(this,arguments)},x.Axis.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},minPadding:.01,maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return x.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this,o=(n.chart=t,n.horiz=t.inverted?!i:i,n.isXAxis=i,n.coll=n.coll||(i?"xAxis":"yAxis"),n.opposite=e.opposite,n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(e),this.options),r=o.type,s="datetime"===r;n.labelFormatter=o.labels.formatter||n.defaultLabelFormatter,n.userOptions=e,n.minPixelPadding=0,n.reversed=o.reversed,n.visible=!1!==o.visible,n.zoomEnabled=!1!==o.zoomEnabled,n.hasNames="category"===r||!0===o.categories,n.categories=o.categories||n.hasNames,n.names=n.names||[],n.isLog="logarithmic"===r,n.isDatetimeAxis=s,n.positiveValuesOnly=n.isLog&&!n.allowNegativeLog,n.isLinked=T(o.linkedTo),n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=o.minRange||o.maxZoom,n.range=o.range,n.offset=o.offset||0,n.stacks={},n.oldStacks={},n.stacksTouched=0,n.max=null,n.min=null,n.crosshair=C(o.crosshair,Be(t.options.tooltip.crosshairs)[i?0:1],!1);var a,l=n.options.events;for(a in-1===Oe(n,t.axes)&&(i?t.axes.splice(t.xAxis.length,0,n):t.axes.push(n),t[n.coll].push(n)),n.series=n.series||[],t.inverted&&i&&void 0===n.reversed&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine,l)xe(n,a,l[a]);n.lin2log=o.linearToLogConverter||n.lin2log,n.isLog&&(n.val2lin=n.log2lin,n.lin2val=n.lin2log)},setOptions:function(t){this.options=qe(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],qe(Se[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,o=i.categories,r=this.dateTimeLabelFormat,s=Se.lang,a=s.numericSymbols,l=s.numericSymbolMagnitude||1e3,c=a&&a.length,s=i.options.labels.format,u=i.isLog?Math.abs(n):i.tickInterval;if(s)e=Le(s,this);else if(o)e=n;else if(r)e=x.dateFormat(r,n);else if(c&&1e3<=u)for(;c--&&void 0===e;)(t=Math.pow(l,c+1))<=u&&10*n%t==0&&null!==a[c]&&0!==n&&(e=x.numberFormat(n/t,-1)+a[c]);return e=void 0===e?1e4<=Math.abs(n)?x.numberFormat(n,-1):x.numberFormat(n,-1,void 0,""):e},getSeriesExtremes:function(){var r=this,s=r.chart;r.hasVisibleSeries=!1,r.dataMin=r.dataMax=r.threshold=null,r.softThreshold=!r.isXAxis,r.buildStacks&&r.buildStacks(),A(r.series,function(t){var e,i,n,o;!t.visible&&s.options.chart.ignoreHiddenSeries||(i=(e=t.options).threshold,r.hasVisibleSeries=!0,r.positiveValuesOnly&&i<=0&&(i=null),r.isXAxis?(o=t.xData).length&&(n=Te(o),Re(n)||n instanceof Date||(o=Ie(o,function(t){return Re(t)}),n=Te(o)),r.dataMin=Math.min(C(r.dataMin,o[0]),n),r.dataMax=Math.max(C(r.dataMax,o[0]),ke(o))):(t.getExtremes(),o=t.dataMax,n=t.dataMin,T(n)&&T(o)&&(r.dataMin=Math.min(C(r.dataMin,n),n),r.dataMax=Math.max(C(r.dataMax,o),o)),T(i)&&(r.threshold=i),e.softThreshold&&!r.positiveValuesOnly||(r.softThreshold=!1)))})},translate:function(t,e,i,n,o,r){var s,a=this.linkedParent||this,l=1,c=0,u=n?a.oldTransA:a.transA,n=n?a.oldMin:a.min,h=a.minPixelPadding,o=(a.isOrdinal||a.isBroken||a.isLog&&o)&&a.lin2val,u=u||a.transA;return i&&(l*=-1,c=a.len),a.reversed&&(c-=(l*=-1)*(a.sector||a.len)),e?(t=t*l+c,s=(t-=h)/u+n,o&&(s=a.lin2val(s))):s=l*((t=o?a.val2lin(t):t)-n)*u+c+l*h+(Re(r)?u*r:0),s},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,o){function r(t,e,i){return(t<e||i<t)&&(n?t=Math.min(Math.max(e,t),i):a=!0),t}var s,a,l=this,c=l.chart,u=l.left,h=l.top,d=i&&c.oldChartHeight||c.chartHeight,p=i&&c.oldChartWidth||c.chartWidth,f=l.transB;return o=C(o,l.translate(t,null,null,i)),i=t=Math.round(o+f),s=f=Math.round(d-o-f),Re(o)?l.horiz?(s=h,f=d-l.bottom,i=t=r(i,u,u+l.width)):(i=u,t=p-l.right,s=f=r(s,h,h+l.height)):a=!0,a&&!n?null:c.renderer.crispLine(["M",i,s,"L",t,f],e||1)},getLinearTickPositions:function(t,e,i){var n,o,r=Ce(Math.floor(e/t)*t),s=Ce(Math.ceil(i/t)*t),a=[];if(this.single)return[e];for(n=r;n<=s&&(a.push(n),(n=Ce(n+t))!==o);)o=n;return a},getMinorTickPositions:function(){var t,n=this,e=n.options,i=n.tickPositions,o=n.minorTickInterval,r=[],s=n.pointRangePadding||0,a=n.min-s,l=n.max+s,s=l-a;if(s&&s/o<n.len/3)if(n.isLog)A(this.paddedTicks,function(t,e,i){e&&r.push.apply(r,n.getLogTickPositions(o,i[e-1],i[e],!0))});else if(n.isDatetimeAxis&&"auto"===e.minorTickInterval)r=r.concat(n.getTimeTicks(n.normalizeTimeTickInterval(o),a,l,e.startOfWeek));else for(t=a+(i[0]-a)%o;t<=l&&t!==r[0];t+=o)r.push(t);return 0!==r.length&&n.trimTicks(r),r},adjustForMinRange:function(){var e,i,n,o,r,t,s,a,l=this,c=l.options,u=l.min,h=l.max,d=l.dataMax-l.dataMin>=l.minRange;l.isXAxis&&void 0===l.minRange&&!l.isLog&&(T(c.min)||T(c.max)?l.minRange=null:(A(l.series,function(t){for(o=t.xData,r=t.xIncrement?1:o.length-1,i=r;0<i;i--)n=o[i]-o[i-1],(void 0===e||n<e)&&(e=n)}),l.minRange=Math.min(5*e,l.dataMax-l.dataMin))),h-u<l.minRange&&(t=[u-(t=((a=l.minRange)-h+u)/2),C(c.min,u-t)],d&&(t[2]=l.isLog?l.log2lin(l.dataMin):l.dataMin),s=[(u=ke(t))+a,C(c.max,u+a)],d&&(s[2]=l.isLog?l.log2lin(l.dataMax):l.dataMax),(h=Te(s))-u<a&&(t[0]=h-a,t[1]=C(c.min,h-a),u=ke(t))),l.min=u,l.max=h},getClosest:function(){var n;return this.categories?n=1:A(this.series,function(t){var e=t.closestPointRange,i=t.visible||!t.chart.options.chart.ignoreHiddenSeries;!t.noSharedTooltip&&T(e)&&i&&(n=T(n)?Math.min(n,e):e)}),n},nameToX:function(t){var e,i=De(this.categories),n=i?this.categories:this.names,o=t.options.x;return t.series.requireSorting=!1,-1===(o=T(o)?o:!1===this.options.uniqueNames?t.series.autoIncrement():Oe(t.name,n))?i||(e=n.length):e=o,this.names[e]=t.name,e},updateNames:function(){var o=this;0<this.names.length&&(this.names.length=0,this.minRange=void 0,A(this.series||[],function(n){n.xIncrement=null,n.points&&!n.isDirtyData||(n.processData(),n.generatePoints()),A(n.points,function(t,e){var i;t.options&&(i=o.nameToX(t))!==t.x&&(t.x=i,n.xData[e]=i)})}))},setAxisTranslation:function(t){var i,n=this,e=n.max-n.min,o=n.axisPointRange||0,r=0,s=0,a=n.linkedParent,l=!!n.categories,c=n.transA,u=n.isXAxis;(u||l||o)&&(i=n.getClosest(),a?(r=a.minPointOffset,s=a.pointRangePadding):A(n.series,function(t){var e=l?1:u?C(t.options.pointRange,i,0):n.axisPointRange||0,t=t.options.pointPlacement;o=Math.max(o,e),n.single||(r=Math.max(r,Ne(t)?0:e/2),s=Math.max(s,"on"===t?0:e))}),a=n.ordinalSlope&&i?n.ordinalSlope/i:1,n.minPointOffset=r*=a,n.pointRangePadding=s*=a,n.pointRange=Math.min(o,e),u&&(n.closestPointRange=i)),t&&(n.oldTransA=c),n.translationSlope=n.transA=c=n.options.staticScale||n.len/(e+s||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=c*r},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var e,i,n,o,r=this,s=r.chart,a=r.options,l=r.isLog,c=r.log2lin,u=r.isDatetimeAxis,h=r.isXAxis,d=r.isLinked,p=a.maxPadding,f=a.minPadding,g=a.tickInterval,m=a.tickPixelInterval,y=r.categories,v=r.threshold,b=r.softThreshold;u||y||d||this.getTickAmount(),n=C(r.userMin,a.min),o=C(r.userMax,a.max),d?(r.linkedParent=s[r.coll][a.linkedTo],s=r.linkedParent.getExtremes(),r.min=C(s.min,s.dataMin),r.max=C(s.max,s.dataMax),a.type!==r.linkedParent.options.type&&x.error(11,1)):(!b&&T(v)&&(r.dataMin>=v?(e=v,f=0):r.dataMax<=v&&(i=v,p=0)),r.min=C(n,e,r.dataMin),r.max=C(o,i,r.dataMax)),l&&(r.positiveValuesOnly&&!t&&Math.min(r.min,C(r.dataMin,r.min))<=0&&x.error(10,1),r.min=Ce(c(r.min),15),r.max=Ce(c(r.max),15)),r.range&&T(r.max)&&(r.userMin=r.min=n=Math.max(r.min,r.minFromRange()),r.userMax=o=r.max,r.range=null),je(r,"foundExtremes"),r.beforePadding&&r.beforePadding(),r.adjustForMinRange(),y||r.axisPointRange||r.usePercentage||d||!T(r.min)||!T(r.max)||(s=r.max-r.min)&&(!T(n)&&f&&(r.min-=s*f),!T(o)&&p&&(r.max+=s*p)),Re(a.floor)?r.min=Math.max(r.min,a.floor):Re(a.softMin)&&(r.min=Math.min(r.min,a.softMin)),Re(a.ceiling)?r.max=Math.min(r.max,a.ceiling):Re(a.softMax)&&(r.max=Math.max(r.max,a.softMax)),b&&T(r.dataMin)&&(v=v||0,!T(n)&&r.min<v&&r.dataMin>=v?r.min=v:!T(o)&&r.max>v&&r.dataMax<=v&&(r.max=v)),r.min===r.max||void 0===r.min||void 0===r.max?r.tickInterval=1:d&&!g&&m===r.linkedParent.options.tickPixelInterval?r.tickInterval=g=r.linkedParent.tickInterval:r.tickInterval=C(g,this.tickAmount?(r.max-r.min)/Math.max(this.tickAmount-1,1):void 0,y?1:(r.max-r.min)*m/Math.max(r.len,m)),h&&!t&&A(r.series,function(t){t.processData(r.min!==r.oldMin||r.max!==r.oldMax)}),r.setAxisTranslation(!0),r.beforeSetTickPositions&&r.beforeSetTickPositions(),r.postProcessTickInterval&&(r.tickInterval=r.postProcessTickInterval(r.tickInterval)),r.pointRange&&!g&&(r.tickInterval=Math.max(r.pointRange,r.tickInterval)),e=C(a.minTickInterval,r.isDatetimeAxis&&r.closestPointRange),!g&&r.tickInterval<e&&(r.tickInterval=e),u||l||g||(r.tickInterval=ze(r.tickInterval,null,_e(r.tickInterval),C(a.allowDecimals,!(.5<r.tickInterval&&r.tickInterval<5&&1e3<r.max&&r.max<9999)),!!this.tickAmount)),this.tickAmount||(r.tickInterval=r.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e=this.options,i=e.tickPositions,n=e.tickPositioner,o=e.startOnTick,r=e.endOnTick;this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===e.minorTickInterval&&this.tickInterval?this.tickInterval/5:e.minorTickInterval,this.single=this.min===this.max&&T(this.min)&&!this.tickAmount&&!1!==e.allowDecimals,this.tickPositions=t=i&&i.slice(),t||((t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max)).length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,(n=n&&n.apply(this,[this.min,this.max]))&&(this.tickPositions=t=n)),this.paddedTicks=t.slice(0),this.trimTicks(t,o,r),this.isLinked||(this.single&&(this.min-=.5,this.max+=.5),i||n||this.adjustTickAmount())},trimTicks:function(t,e,i){var n=t[0],o=t[t.length-1],r=this.minPointOffset||0;if(!this.isLinked){if(e)this.min=n;else for(;this.min-r>t[0];)t.shift();if(i)this.max=o;else for(;this.max+r<t[t.length-1];)t.pop();0===t.length&&T(n)&&t.push((o+n)/2)}},alignToOthers:function(){var i,n={},t=this.options;return!1===this.chart.options.chart.alignTicks||!1===t.alignTicks||this.isLog||A(this.chart[this.coll],function(t){var e=t.options,e=[t.horiz?e.left:e.top,e.width,e.height,e.pane].join(",");t.series.length&&(n[e]?i=!0:n[e]=1)}),i},getTickAmount:function(){var t=this.options,e=t.tickAmount,i=t.tickPixelInterval;(e=!(e=!T(t.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick?2:e)&&this.alignToOthers()?Math.ceil(this.len/i)+1:e)<4&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t,e,i=this.tickInterval,n=this.tickPositions,o=this.tickAmount,r=this.finalTickAmt,s=n&&n.length;if(s<o){for(;n.length<o;)n.push(Ce(n[n.length-1]+i));this.transA*=(s-1)/(o-1),this.max=n[n.length-1]}else o<s&&(this.tickInterval*=2,this.setTickPositions());if(T(r)){for(t=e=n.length;t--;)(3===r&&t%2==1||r<=2&&0<t&&t<e-1)&&n.splice(t,1);this.finalTickAmt=void 0}},setScale:function(){var e,t,i=this;i.oldMin=i.min,i.oldMax=i.max,i.oldAxisLength=i.len,i.setAxisSize(),t=i.len!==i.oldAxisLength,A(i.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(e=!0)}),t||e||i.isLinked||i.forceRedraw||i.userMin!==i.oldUserMin||i.userMax!==i.oldUserMax||i.alignToOthers()?(i.resetStacks&&i.resetStacks(),i.forceRedraw=!1,i.getSeriesExtremes(),i.setTickInterval(),i.oldUserMin=i.userMin,i.oldUserMax=i.userMax,i.isDirty||(i.isDirty=t||i.min!==i.oldMin||i.max!==i.oldMax)):i.cleanStacks&&i.cleanStacks()},setExtremes:function(t,e,i,n,o){var r=this,s=r.chart;i=C(i,!0),A(r.series,function(t){delete t.kdTree}),o=Pe(o,{min:t,max:e}),je(r,"setExtremes",o,function(){r.userMin=t,r.userMax=e,r.eventArgs=o,i&&s.redraw(n)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,o=this.options,r=Math.min(i,C(o.min,i)),o=Math.max(n,C(o.max,n));return t===this.min&&e===this.max||(this.allowZoomOutside||(T(i)&&o<(t=t<r?r:t)&&(t=o),T(n)&&o<(e=e<r?r:e)&&(e=o)),this.displayBtn=void 0!==t||void 0!==e,this.setExtremes(t,e,!1,void 0,{trigger:"zoom"})),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsets||[0,0,0,0],n=this.horiz,o=C(e.width,t.plotWidth-i[3]+i[1]),r=C(e.height,t.plotHeight-i[0]+i[2]),s=C(e.top,t.plotTop+i[0]),e=C(e.left,t.plotLeft+i[3]),i=/%$/;i.test(r)&&(r=Math.round(parseFloat(r)/100*t.plotHeight)),i.test(s)&&(s=Math.round(parseFloat(s)/100*t.plotHeight+t.plotTop)),this.left=e,this.top=s,this.width=o,this.height=r,this.bottom=t.chartHeight-r-s,this.right=t.chartWidth-o-e,this.len=Math.max(n?o:r,0),this.pos=n?e:s},getExtremes:function(){var t=this,e=t.isLog,i=t.lin2log;return{min:e?Ce(i(t.min)):t.min,max:e?Ce(i(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this.isLog,i=this.lin2log,n=e?i(this.min):this.min,e=e?i(this.max):this.max;return null===t||t<n?t=n:e<t&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){t=(C(t,0)-90*this.side+720)%360,t=15<t&&t<165?"right":195<t&&t<345?"left":"center";return t},tickSize:function(t){var e=this.options,i=e[t+"Length"],n=C(e[t+"Width"],"tick"===t&&this.isXAxis?1:0);if(n&&i)return[i="inside"===e[t+"Position"]?-i:i,n]},labelMetrics:function(){return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[0]&&this.ticks[0].label)},unsquish:function(){function i(t){return(t=1<(t/=l||1)?Math.ceil(t):1)*s}var n,o,t,e=this.options.labels,r=this.horiz,s=this.tickInterval,a=s,l=this.len/(((this.categories?1:0)+this.max-this.min)/s),c=e.rotation,u=this.labelMetrics(),h=Number.MAX_VALUE;return r?(t=!e.staggerLines&&!e.step&&(T(c)?[c]:l<C(e.autoRotationLimit,80)&&e.autoRotation))&&A(t,function(t){var e;(t===c||t&&-90<=t&&t<=90)&&(e=(o=i(Math.abs(u.h/Math.sin(Me*t))))+Math.abs(t/360))<h&&(h=e,n=t,a=o)}):e.step||(a=i(u.h)),this.autoRotation=t,this.labelRotation=C(n,c),a},getSlotWidth:function(){var t=this.chart,e=this.horiz,i=this.options.labels,n=Math.max(this.tickPositions.length-(this.categories?0:1),1),o=t.margin[3];return e&&(i.step||0)<2&&!i.rotation&&(this.staggerLines||1)*this.len/n||!e&&(o&&o-t.spacing[3]||.33*t.chartWidth)},renderUnsquish:function(){var i,t,e,n,o=this.chart,r=o.renderer,s=this.tickPositions,a=this.ticks,l=this.options.labels,c=this.horiz,u=this.getSlotWidth(),h=Math.max(1,Math.round(u-2*(l.padding||5))),d={},p=this.labelMetrics(),f=l.style&&l.style.textOverflow,g=0;if(Ne(l.rotation)||(d.rotation=l.rotation||0),A(s,function(t){(t=a[t])&&t.labelLength>g&&(g=t.labelLength)}),this.maxLabelLength=g,this.autoRotation)h<g&&g>p.h?d.rotation=this.labelRotation:this.labelRotation=0;else if(u&&(i={width:h+"px"},!f))for(i.textOverflow="clip",e=s.length;!c&&e--;)n=s[e],(t=a[n].label)&&(t.styles&&"ellipsis"===t.styles.textOverflow?t.css({textOverflow:"clip"}):a[n].labelLength>u&&t.css({width:u+"px"}),t.getBBox().height>this.len/s.length-(p.h-p.f)&&(t.specCss={textOverflow:"ellipsis"}));d.rotation&&(i={width:(g>.5*o.chartHeight?.33*o.chartHeight:o.chartHeight)+"px"},f||(i.textOverflow="ellipsis")),this.labelAlign=l.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(d.align=this.labelAlign),A(s,function(t){var t=a[t],e=t&&t.label;e&&(e.attr(d),i&&e.css(qe(i,e.specCss)),delete e.specCss,t.rotation=d.rotation)}),this.tickRotCorr=r.rotCorr(p.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||T(this.min)&&T(this.max)&&!!this.tickPositions},addTitle:function(t){var e,i=this.chart.renderer,n=this.horiz,o=this.opposite,r=this.options.title;this.axisTitle||(e=(e=r.textAlign)||(n?{low:"left",middle:"center",high:"right"}:{low:o?"right":"left",middle:"center",high:o?"left":"right"})[r.align],this.axisTitle=i.text(r.text,0,0,r.useHTML).attr({zIndex:7,rotation:r.rotation||0,align:e}).addClass("highcharts-axis-title").css(r.style).add(this.axisGroup),this.axisTitle.isNew=!0),this.axisTitle[t?"show":"hide"](!0)},generateTick:function(t){var e=this.ticks;e[t]?e[t].addLabel():e[t]=new We(this,t)},getOffset:function(){var t,e,i,n=this,o=n.chart,r=o.renderer,s=n.options,a=n.tickPositions,l=n.ticks,c=n.horiz,u=n.side,h=o.inverted?[1,0,3,2][u]:u,d=0,p=0,f=s.title,g=s.labels,m=0,y=o.axisOffset,o=o.clipOffset,v=[-1,1,1,-1][u],b=s.className,x=n.axisParent,w=this.tickSize("tick"),k=n.hasData();if(n.showAxis=t=k||C(s.showEmpty,!0),n.staggerLines=n.horiz&&g.staggerLines,n.axisGroup||(n.gridGroup=r.g("grid").attr({zIndex:s.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(b||"")).add(x),n.axisGroup=r.g("axis").attr({zIndex:s.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(b||"")).add(x),n.labelGroup=r.g("axis-labels").attr({zIndex:g.zIndex||7}).addClass("highcharts-"+n.coll.toLowerCase()+"-labels "+(b||"")).add(x)),k||n.isLinked)A(a,function(t,e){n.generateTick(t,e)}),n.renderUnsquish(),!1===g.reserveSpace||0!==u&&2!==u&&{1:"left",3:"right"}[u]!==n.labelAlign&&"center"!==n.labelAlign||A(a,function(t){m=Math.max(l[t].getLabelSize(),m)}),n.staggerLines&&(m*=n.staggerLines,n.labelOffset=m*(n.opposite?-1:1));else for(i in l)l[i].destroy(),delete l[i];f&&f.text&&!1!==f.enabled&&(n.addTitle(t),t&&(d=n.axisTitle.getBBox()[c?"height":"width"],e=f.offset,p=T(e)?0:C(f.margin,c?5:10))),n.renderLine(),n.offset=v*C(s.offset,y[u]),n.tickRotCorr=n.tickRotCorr||{x:0,y:0},r=0===u?-n.labelMetrics().h:2===u?n.tickRotCorr.y:0,b=Math.abs(m)+p,m&&(b=(b-=r)+v*(c?C(g.y,n.tickRotCorr.y+8*v):g.x)),n.axisTitleMargin=C(e,b),y[u]=Math.max(y[u],n.axisTitleMargin+d+v*n.offset,b,k&&a.length&&w?w[0]+v*n.offset:0),x=s.offset?0:2*Math.floor(n.axisLine.strokeWidth()/2),o[h]=Math.max(o[h],x)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,o=this.horiz,r=this.left+(i?this.width:0)+n,n=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine(["M",o?this.left:r,o?n:this.top,"L",o?e.chartWidth-this.right:r,o?n:e.chartHeight-this.bottom],t)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,n=this.len,o=this.options.title,r=t?e:i,s=this.opposite,a=this.offset,l=o.x||0,c=o.y||0,u=this.chart.renderer.fontMetrics(o.style&&o.style.fontSize,this.axisTitle).f,r={low:r+(t?0:n),middle:r+n/2,high:r+(t?n:0)}[o.align],n=(t?i+this.height:e)+(t?1:-1)*(s?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:t?r+l:n+(s?this.width:0)+a+l,y:t?n+c-(s?this.height:0)+a:r+c}},renderMinorTick:function(t){var e=this.chart.hasRendered&&Re(this.oldMin),i=this.minorTicks;i[t]||(i[t]=new We(this,t,"minor")),e&&i[t].isNew&&i[t].render(null,!0),i[t].render(null,!1,1)},renderTick:function(t,e){var i=this.isLinked,n=this.ticks,o=this.chart.hasRendered&&Re(this.oldMin);(!i||t>=this.min&&t<=this.max)&&(n[t]||(n[t]=new We(this,t)),o&&n[t].isNew&&n[t].render(e,!0,.1),n[t].render(e))},render:function(){var i,n,o=this,r=o.chart,t=r.renderer,e=o.options,s=o.isLog,a=o.lin2log,l=o.isLinked,c=o.tickPositions,u=o.axisTitle,h=o.ticks,d=o.minorTicks,p=o.alternateBands,f=e.stackLabels,g=e.alternateGridColor,m=o.tickmarkOffset,y=o.axisLine,v=o.showAxis,b=we(t.globalAnimation);o.labelEdge.length=0,o.overlap=!1,A([h,d,p],function(t){for(var e in t)t[e].isActive=!1}),(o.hasData()||l)&&(o.minorTickInterval&&!o.categories&&A(o.getMinorTickPositions(),function(t){o.renderMinorTick(t)}),c.length&&(A(c,function(t,e){o.renderTick(t,e)}),m&&(0===o.min||o.single)&&(h[-1]||(h[-1]=new We(o,-1,null,!0)),h[-1].render(-1))),g&&A(c,function(t,e){n=void 0!==c[e+1]?c[e+1]+m:o.max-m,e%2==0&&t<o.max&&n<=o.max+(r.polar?-m:m)&&(p[t]||(p[t]=new He(o)),i=t+m,p[t].options={from:s?a(i):i,to:s?a(n):n,color:g},p[t].render(),p[t].isActive=!0)}),o._addedPlotLB||(A((e.plotLines||[]).concat(e.plotBands||[]),function(t){o.addPlotBandOrLine(t)}),o._addedPlotLB=!0)),A([h,d,p],function(t){var e,i,n=[],o=b.duration;for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));Fe(function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])},t!==p&&r.hasRendered&&o?o:0)}),y&&(y[y.isPlaced?"animate":"attr"]({d:this.getLinePath(y.strokeWidth())}),y.isPlaced=!0,y[v?"show":"hide"](!0)),u&&v&&(u[u.isNew?"attr":"animate"](o.getTitlePosition()),u.isNew=!1),f&&f.enabled&&o.renderStackTotals(),o.isDirty=!1},redraw:function(){this.visible&&(this.render(),A(this.plotLinesAndBands,function(t){t.render()})),A(this.series,function(t){t.isDirty=!0})},keepProps:["extKey","hcEvents","names","series","userMax","userMin"],destroy:function(t){var e,i,n,o=this,r=o.stacks,s=o.plotLinesAndBands;for(e in t||$e(o),r)Ee(r[e]),r[e]=null;if(A([o.ticks,o.minorTicks,o.alternateBands],function(t){Ee(t)}),s)for(i=s.length;i--;)s[i].destroy();for(n in A(["stackTotalGroup","axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross"],function(t){o[t]&&(o[t]=o[t].destroy())}),o)o.hasOwnProperty(n)&&-1===Oe(n,o.keepProps)&&delete o[n]},drawCrosshair:function(t,e){var i,n,o=this.crosshair,r=C(o.snap,!0),s=this.cross;t=t||this.cross&&this.cross.e,this.crosshair&&!1!==(T(e)||!r)?(r?T(e)&&(n=this.isXAxis?e.plotX:this.len-e.plotY):n=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),T(n)&&(i=this.getPlotLinePath(e&&(this.isXAxis?e.x:C(e.stackY,e.y)),null,null,null,n)||null),T(i)?(r=this.categories&&!this.isRadial,s||(this.cross=s=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(r?"category ":"thin ")+o.className).attr({zIndex:C(o.zIndex,2)}).add(),s.attr({stroke:o.color||(r?Ae("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":C(o.width,1)}),o.dashStyle&&s.attr({dashstyle:o.dashStyle})),s.show().attr({d:i}),r&&!o.width&&s.attr({"stroke-width":this.transA}),this.cross.e=t):this.hideCrosshair()):this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}},Pe(x.Axis.prototype,h),t=d.Axis,b=d.Date,Ge=d.dateFormat,Ue=d.defaultOptions,Ve=d.defined,Xe=d.each,Ye=d.extend,Qe=d.getMagnitude,Ke=d.getTZOffset,Je=d.normalizeTickInterval,Ze=d.pick,w=d.timeUnits,t.prototype.getTimeTicks=function(t,e,i,n){var o,r=[],s={},a=Ue.global.useUTC,l=new b(e-Math.abs(Ke(e))),c=b.hcMakeTime,u=t.unitRange,h=t.count;if(Ve(e)){l[b.hcSetMilliseconds](u>=w.second?0:h*Math.floor(l.getMilliseconds()/h)),u>=w.second&&l[b.hcSetSeconds](u>=w.minute?0:h*Math.floor(l.getSeconds()/h)),u>=w.minute&&l[b.hcSetMinutes](u>=w.hour?0:h*Math.floor(l[b.hcGetMinutes]()/h)),u>=w.hour&&l[b.hcSetHours](u>=w.day?0:h*Math.floor(l[b.hcGetHours]()/h)),u>=w.day&&l[b.hcSetDate](u>=w.month?1:h*Math.floor(l[b.hcGetDate]()/h)),u>=w.month&&(l[b.hcSetMonth](u>=w.year?0:h*Math.floor(l[b.hcGetMonth]()/h)),d=l[b.hcGetFullYear]()),u>=w.year&&l[b.hcSetFullYear](d-=d%h),u===w.week&&l[b.hcSetDate](l[b.hcGetDate]()-l[b.hcGetDay]()+Ze(n,1));for(var d=l[b.hcGetFullYear](),p=l[b.hcGetMonth](),f=l[b.hcGetDate](),g=l[b.hcGetHours](),m=((b.hcTimezoneOffset||b.hcGetTimezoneOffset)&&(o=(!a||!!b.hcGetTimezoneOffset)&&(i-e>4*w.month||Ke(e)!==Ke(i)),l=l.getTime(),l=new b(l+Ke(l))),l.getTime()),y=1;m<i;)r.push(m),u===w.year?m=c(d+y*h,0):u===w.month?m=c(d,p+y*h):!o||u!==w.day&&u!==w.week?o&&u===w.hour?m=c(d,p,f,g+y*h):m+=u*h:m=c(d,p,f+y*h*(u===w.day?1:7)),y++;r.push(m),u<=w.hour&&r.length<1e4&&Xe(r,function(t){t%18e5==0&&"000000000"===Ge("%H%M%S%L",t)&&(s[t]="day")})}return r.info=Ye(t,{higherRanks:s,totalRange:u*h}),r},t.prototype.normalizeTimeTickInterval=function(t,e){for(var i=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],n=i[i.length-1],o=w[n[0]],r=n[1],s=0;s<i.length;s++){n=i[s],o=w[n[0]],r=n[1];if(i[s+1])if(t<=(o*r[r.length-1]+w[i[s+1][0]])/2)break}return o===w.year&&t<5*o&&(r=[1,2,5]),{unitRange:o,count:Je(t/o,r,"year"===n[0]?Math.max(Qe(t/o),1):1),unitName:n[0]}},u=d.Axis,ti=d.getMagnitude,ei=d.map,ii=d.normalizeTickInterval,ni=d.pick,u.prototype.getLogTickPositions=function(t,e,i,n){var o=this,r=o.options,s=o.len,a=o.lin2log,l=o.log2lin,c=[];if(n||(o._minorAutoInterval=null),.5<=t)t=Math.round(t),c=o.getLinearTickPositions(t,e,i);else if(.08<=t)for(var u,h,d,p,f,g=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],m=Math.floor(e);m<i+1&&!f;m++)for(h=g.length,u=0;u<h&&!f;u++)e<(d=l(a(m)*g[u]))&&(!n||p<=i)&&void 0!==p&&c.push(p),i<p&&(f=!0),p=d;else{var y=a(e),v=a(i),b=r[n?"minorTickInterval":"tickInterval"],r=r.tickPixelInterval/(n?5:1),s=n?s/o.tickPositions.length:s;t=ni("auto"===b?null:b,o._minorAutoInterval,(v-y)*r/(s||1)),t=ii(t,null,ti(t)),c=ei(o.getLinearTickPositions(t,y,v),l),n||(o._minorAutoInterval=t/5)}return n||(o.tickInterval=t),c},u.prototype.log2lin=function(t){return Math.log(t)/Math.LN10},u.prototype.lin2log=function(t){return Math.pow(10,t)},oi=(e=d).dateFormat,ri=e.each,si=e.extend,ai=e.format,li=e.isNumber,ci=e.map,ui=e.merge,hi=e.pick,di=e.splat,pi=e.syncTimeout,fi=e.timeUnits,e.Tooltip=function(){this.init.apply(this,arguments)},e.Tooltip.prototype={init:function(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=e.split&&!t.inverted,this.shared=e.shared||this.split},cleanSplit:function(i){ri(this.chart.series,function(t){var e=t&&t.tt;e&&(!e.isActive||i?t.tt=e.destroy():e.isActive=!1)})},getLabel:function(){var t=this.chart.renderer,e=this.options;return this.label||(this.split?this.label=t.g("tooltip"):(this.label=t.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:e.padding,r:e.borderRadius}),this.label.attr({fill:e.backgroundColor,"stroke-width":e.borderWidth}).css(e.style).shadow(e.shadow)),this.label.attr({zIndex:8}).add()),this.label},update:function(t){this.destroy(),this.init(this.chart,ui(!0,this.options,t))},destroy:function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,e,i,n){var o=this,r=o.now,s=!1!==o.options.animation&&!o.isHidden&&(1<Math.abs(t-r.x)||1<Math.abs(e-r.y)),a=o.followPointer||1<o.len;si(r,{x:s?(2*r.x+t)/3:t,y:s?(r.y+e)/2:e,anchorX:a?void 0:s?(2*r.anchorX+i)/3:i,anchorY:a?void 0:s?(r.anchorY+n)/2:n}),o.getLabel().attr(r),s&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(t,e,i,n)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),t=hi(t,this.options.hideDelay,500),this.isHidden||(this.hideTimer=pi(function(){e.getLabel()[t?"fadeOut":"hide"](),e.isHidden=!0},t))},getAnchor:function(t,e){var i,n,o=this.chart,r=o.inverted,s=o.plotTop,a=o.plotLeft,l=0,c=0,u=(t=di(t))[0].tooltipPos;return(u=this.followPointer&&e?[(e=void 0===e.chartX?o.pointer.normalize(e):e).chartX-o.plotLeft,e.chartY-s]:u)||(ri(t,function(t){i=t.series.yAxis,n=t.series.xAxis,l+=t.plotX+(!r&&n?n.left-a:0),c+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!r&&i?i.top-s:0)}),l/=t.length,c/=t.length,u=[r?o.plotWidth-c:l,this.shared&&!r&&1<t.length&&e?e.chartY-s:r?o.plotHeight-l:c]),ci(u,Math.round)},getPosition:function(t,e,i){var n,o=this.chart,c=this.distance,u={},h=i.h||0,r=["y",o.chartHeight,e,i.plotY+o.plotTop,o.plotTop,o.plotTop+o.plotHeight],s=["x",o.chartWidth,t,i.plotX+o.plotLeft,o.plotLeft,o.plotLeft+o.plotWidth],d=!this.followPointer&&hi(i.ttBelow,!o.inverted==!!i.negative),a=function(t,e,i,n,o,r){var s=i<n-c,a=n+c+i<e,l=n-c-i,n=n+c;if(d&&a)u[t]=n;else if(!d&&s)u[t]=l;else if(s)u[t]=Math.min(r-i,l-h<0?l:l-h);else{if(!a)return!1;u[t]=Math.max(o,e<n+h+i?n:n+h)}},l=function(t,e,i,n){var o;return n<c||e-c<n?o=!1:u[t]=n<i/2?1:e-i/2<n?e-i-2:n-i/2,o},p=function(t){var e=r;r=s,s=e,n=t},f=function(){!1!==a.apply(0,r)?!1!==l.apply(0,s)||n||(p(!0),f()):n?u.x=u.y=0:(p(!0),f())};return(o.inverted||1<this.len)&&p(),f(),u},defaultFormatter:function(t){var e=this.points||di(this),i=[t.tooltipFooterHeaderFormatter(e[0])];return(i=i.concat(t.bodyFormatter(e))).push(t.tooltipFooterHeaderFormatter(e[0],!0)),i},refresh:function(t,e){var i,n,o=this,r=o.options,s=t,a={},l=[],c=r.formatter||o.defaultFormatter,u=o.shared;clearTimeout(this.hideTimer),o.followPointer=di(s)[0].series.tooltipOptions.followPointer,i=(e=o.getAnchor(s,e))[0],n=e[1],!u||s.series&&s.series.noSharedTooltip?a=s.getLabelConfig():(ri(s,function(t){t.setState("hover"),l.push(t.getLabelConfig())}),(a={x:s[0].category,y:s[0].y}).points=l,s=s[0]),this.len=l.length,u=c.call(a,o),c=s.series,this.distance=hi(c.tooltipOptions.distance,16),!1===u?this.hide():(a=o.getLabel(),o.isHidden&&a.attr({opacity:1}).show(),o.split?this.renderSplit(u,t):(a.attr({text:u&&u.join?u.join(""):u}),a.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+hi(s.colorIndex,c.colorIndex)),a.attr({stroke:r.borderColor||s.color||c.color||"#666666"}),o.updatePosition({plotX:i,plotY:n,negative:s.negative,ttBelow:s.ttBelow,h:e[2]||0})),this.isHidden=!1)},renderSplit:function(t,s){var a,l=this,c=[],u=this.chart,h=u.renderer,d=!0,p=this.options,f=this.getLabel();ri(t.slice(0,s.length+1),function(t,e){var e=s[e-1]||{isHeader:!0,plotX:s[0].plotX},i=e.series||l,n=i.tt,o=e.series||{},r="highcharts-color-"+hi(e.colorIndex,o.colorIndex,"none");n||(i.tt=n=h.label(null,null,null,"callout").addClass("highcharts-tooltip-box "+r).attr({padding:p.padding,r:p.borderRadius,fill:p.backgroundColor,stroke:e.color||o.color||"#333333","stroke-width":p.borderWidth}).add(f)),n.isActive=!0,n.attr({text:t}),n.css(p.style),o=(r=n.getBBox()).width+n.strokeWidth(),(t=e.isHeader?(a=r.height,Math.max(0,Math.min(e.plotX+u.plotLeft-o/2,u.chartWidth-o))):e.plotX+u.plotLeft-hi(p.distance,16)-o)<0&&(d=!1),r=(e.series&&e.series.yAxis&&e.series.yAxis.pos)+(e.plotY||0),r-=u.plotTop,c.push({target:e.isHeader?u.plotHeight+a:r,rank:e.isHeader?1:0,size:i.tt.getBBox().height+1,point:e,x:t,tt:n})}),this.cleanSplit(),e.distribute(c,u.plotHeight+a),ri(c,function(t){var e=t.point,i=e.series;t.tt.attr({visibility:void 0===t.pos?"hidden":"inherit",x:d||e.isHeader?t.x:e.plotX+u.plotLeft+hi(p.distance,16),y:t.pos+u.plotTop,anchorX:e.isHeader?e.plotX+u.plotLeft:e.plotX+i.xAxis.pos,anchorY:e.isHeader?t.pos+u.plotTop-15:e.plotY+i.yAxis.pos})})},updatePosition:function(t){var e=this.chart,i=this.getLabel(),i=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(Math.round(i.x),Math.round(i.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getDateFormat:function(t,e,i,n){var o,r,s=oi("%m-%d %H:%M:%S.%L",e),a="01-01 00:00:00.000",l={millisecond:15,second:12,minute:9,hour:6,day:3},c="millisecond";for(r in fi){if(t===fi.week&&+oi("%w",e)===i&&s.substr(6)===a.substr(6)){r="week";break}if(fi[r]>t){r=c;break}if(l[r]&&s.substr(l[r])!==a.substr(l[r]))break;"week"!==r&&(c=r)}return o=r?n[r]:o},getXDateFormat:function(t,e,i){var e=e.dateTimeLabelFormats,n=i&&i.closestPointRange,n=n?this.getDateFormat(n,t.x,i.options.startOfWeek,e):e.day;return n||e.year},tooltipFooterHeaderFormatter:function(t,e){var e=e?"footer":"header",i=t.series,n=i.tooltipOptions,o=n.xDateFormat,r=i.xAxis,s=r&&"datetime"===r.options.type&&li(t.key),e=n[e+"Format"];return s&&!o&&(o=this.getXDateFormat(t,n,r)),s&&o&&(e=e.replace("{point.key}","{point.key:"+o+"}")),ai(e,{point:t,series:i})},bodyFormatter:function(t){return ci(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}},gi=(c=d).addEvent,mi=c.attr,yi=c.charts,vi=c.color,bi=c.css,xi=c.defined,wi=c.doc,f=c.each,ki=c.extend,Ti=c.fireEvent,Ai=c.offset,Ci=c.pick,Si=c.removeEvent,Mi=c.splat,Ei=c.Tooltip,Pi=c.win,c.Pointer=function(t,e){this.init(t,e)},c.Pointer.prototype={init:function(t,e){this.options=e,this.chart=t,this.runChartClick=e.chart.events&&!!e.chart.events.click,this.pinchDown=[],this.lastValidTouch={},Ei&&e.tooltip.enabled&&(t.tooltip=new Ei(t,e.tooltip),this.followTouchMove=Ci(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},zoomOption:function(t){var e=this.chart,i=e.options.chart,n=i.zoomType||"",e=e.inverted;/touch/.test(t.type)&&(n=Ci(i.pinchType,n)),this.zoomX=t=/x/.test(n),this.zoomY=i=/y/.test(n),this.zoomHor=t&&!e||i&&e,this.zoomVert=i&&!e||t&&e,this.hasZoom=t||i},normalize:function(t,e){var i,n;return(t=t||Pi.event).target||(t.target=t.srcElement),n=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,e||(this.chartPosition=e=Ai(this.chart.container)),n=void 0===n.pageX?(i=Math.max(t.x,t.clientX-e.left),t.y):(i=n.pageX-e.left,n.pageY-e.top),ki(t,{chartX:Math.round(i),chartY:Math.round(n)})},getCoordinates:function(e){var i={xAxis:[],yAxis:[]};return f(this.chart.axes,function(t){i[t.isXAxis?"xAxis":"yAxis"].push({axis:t,value:t.toValue(e[t.horiz?"chartX":"chartY"])})}),i},getKDPoints:function(t,r,e){var i,n,o,s=[];if(f(t,function(t){i=t.noSharedTooltip&&r,n=!r&&t.directTouch,t.visible&&!i&&!n&&Ci(t.options.enableMouseTracking,!0)&&(n=t.searchPoint(e,!i&&1===t.kdDimensions))&&n.series&&s.push(n)}),s.sort(function(t,e){var i=t.distX-e.distX,n=t.dist-e.dist,o=(e.series.group&&e.series.group.zIndex)-(t.series.group&&t.series.group.zIndex),i=0!=i&&r?i:0!=n?n:0!=o?o:t.series.index>e.series.index?-1:1;return i}),r)for(o=s.length;o--;)s[o].x===s[0].x&&!s[o].series.noSharedTooltip||s.splice(o,1);return s},getPointFromEvent:function(t){for(var e,i=t.target;i&&!e;)e=i.point,i=i.parentNode;return e},getHoverData:function(t,e,i,n,o,r){var s,a,l=t,t=e;if(n)o?(a=[],f(i,function(t){var e=t.noSharedTooltip&&o,i=!o&&t.directTouch;t.visible&&!e&&!i&&Ci(t.options.enableMouseTracking,!0)&&(i=t.searchKDTree({clientX:l.clientX,plotY:l.plotY},!e&&1===t.kdDimensions))&&i.series&&a.push(i)}),0===a.length&&(a=[l])):a=[l];else if(t&&!t.options.stickyTracking)a=this.getKDPoints([t],o,r),t=(l=a[0])&&l.series;else{if(!o)if(t)t.options.stickyTracking||(i=[t]);else for(s=0;s<i.length;s++)!i[s].directTouch&&i[s].options.stickyTracking||(i=[]);a=this.getKDPoints(i,o,r),t=(l=a[0])&&l.series}return a.sort(function(t,e){return t.series.index-e.series.index}),{hoverPoint:l,hoverSeries:t,hoverPoints:a}},runPointActions:function(i,t){var n=this.chart,e=n.series,o=n.tooltip,r=!!o&&o.shared,s=(a=t||n.hoverPoint)&&a.series||n.hoverSeries,t=!!t||s&&s.directTouch,e=this.getHoverData(a,s,e,t,r,i),a=e.hoverPoint,t=(s=e.hoverSeries)&&s.tooltipOptions.followPointer,r=r&&a&&!a.series.noSharedTooltip,l=r?e.hoverPoints:[a];a&&(a!==n.hoverPoint||o&&o.isHidden)?(f(n.hoverPoints||[],function(t){-1===c.inArray(t,l)&&t.setState()}),f(l||[],function(t){t.setState("hover")}),n.hoverSeries!==s&&s.onMouseOver(),s&&!s.directTouch&&(n.hoverPoint&&n.hoverPoint.firePointEvent("mouseOut"),a.firePointEvent("mouseOver")),n.hoverPoints=l,n.hoverPoint=a,o&&o.refresh(r?l:a,i)):t&&o&&!o.isHidden&&(e=o.getAnchor([{}],i),o.updatePosition({plotX:e[0],plotY:e[1]})),this.unDocMouseMove||(this.unDocMouseMove=gi(wi,"mousemove",function(t){var e=yi[c.hoverChartIndex];e&&e.pointer.onDocumentMouseMove(t)})),f(l,function(e){f(n.axes,function(t){(!e||e.series&&e.series[t.coll]===t)&&t.drawCrosshair(i,e)})})},reset:function(e,t){var i=this.chart,n=i.hoverSeries,o=i.hoverPoint,r=i.hoverPoints,s=i.tooltip,a=s&&s.shared?r:o;e&&a&&f(Mi(a),function(t){t.series.isCartesian&&void 0===t.plotX&&(e=!1)}),e?s&&a&&(s.refresh(a),o&&(o.setState(o.state,!0),f(i.axes,function(t){t.crosshair&&t.drawCrosshair(null,o)}))):(o&&o.onMouseOut(),r&&f(r,function(t){t.setState()}),n&&n.onMouseOut(),s&&s.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),f(i.axes,function(t){t.hideCrosshair()}),this.hoverX=i.hoverPoints=i.hoverPoint=null)},scaleGroups:function(e,i){var n,o=this.chart;f(o.series,function(t){n=e||t.getPlotBox(),t.xAxis&&t.xAxis.zoomEnabled&&t.group&&(t.group.attr(n),t.markerGroup&&(t.markerGroup.attr(n),t.markerGroup.clip(i?o.clipRect:null)),t.dataLabelsGroup&&t.dataLabelsGroup.attr(n))}),o.clipRect.attr(i||o.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,o=n.options.chart,r=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,c=n.plotLeft,u=n.plotTop,h=n.plotWidth,d=n.plotHeight,p=this.selectionMarker,f=this.mouseDownX,g=this.mouseDownY,m=o.panKey&&t[o.panKey+"Key"];p&&p.touch||(r<c?r=c:c+h<r&&(r=c+h),s<u?s=u:u+d<s&&(s=u+d),this.hasDragged=Math.sqrt(Math.pow(f-r,2)+Math.pow(g-s,2)),10<this.hasDragged&&(e=n.isInsidePlot(f-c,g-u),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!m&&!p&&(this.selectionMarker=p=n.renderer.rect(c,u,a?1:h,l?1:d,0).attr({fill:o.selectionMarkerFill||vi("#335cad").setOpacity(.25).get(),class:"highcharts-selection-marker",zIndex:7}).add()),p&&a&&(i=r-f,p.attr({width:Math.abs(i),x:(0<i?0:i)+f})),p&&l&&(i=s-g,p.attr({height:Math.abs(i),y:(0<i?0:i)+g})),e&&!p&&o.panning&&n.pan(t,o.panning)))},drop:function(o){var r,t,s,a,l,c,u,h=this,e=this.chart,d=this.hasPinched;this.selectionMarker&&(r={originalEvent:o,xAxis:[],yAxis:[]},t=this.selectionMarker,s=t.attr?t.attr("x"):t.x,a=t.attr?t.attr("y"):t.y,l=t.attr?t.attr("width"):t.width,c=t.attr?t.attr("height"):t.height,(this.hasDragged||d)&&(f(e.axes,function(t){var e,i,n;t.zoomEnabled&&xi(t.min)&&(d||h[{xAxis:"zoomX",yAxis:"zoomY"}[t.coll]])&&(n=t.horiz,e="touchend"===o.type?t.minPixelPadding:0,i=t.toValue((n?s:a)+e),n=t.toValue((n?s+l:a+c)-e),r[t.coll].push({axis:t,min:Math.min(i,n),max:Math.max(i,n)}),u=!0)}),u&&Ti(e,"selection",r,function(t){e.zoom(ki(t,d?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),d&&this.scaleGroups()),e&&(bi(e.container,{cursor:e._cursor}),e.cancelClick=10<this.hasDragged,e.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),this.zoomOption(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){yi[c.hoverChartIndex]&&yi[c.hoverChartIndex].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition;t=this.normalize(t,i),!i||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(t){var e=yi[c.hoverChartIndex];e&&(t.relatedTarget||t.toElement)&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;xi(c.hoverChartIndex)&&yi[c.hoverChartIndex]&&yi[c.hoverChartIndex].mouseIsDown||(c.hoverChartIndex=e.index),(t=this.normalize(t)).returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=mi(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,t=t.relatedTarget||t.toElement;!e||!t||e.options.stickyTracking||this.inClass(t,"highcharts-tooltip")||this.inClass(t,"highcharts-series-"+e.index)&&this.inClass(t,"highcharts-tracker")||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,i=e.hoverPoint,n=e.plotLeft,o=e.plotTop;t=this.normalize(t),e.cancelClick||(i&&this.inClass(t.target,"highcharts-tracker")?(Ti(i.series,"click",ki(t,{point:i})),e.hoverPoint&&i.firePointEvent("click",t)):(ki(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-n,t.chartY-o)&&Ti(e,"click",t)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},gi(t,"mouseleave",e.onContainerMouseLeave),1===c.chartCount&&gi(wi,"mouseup",e.onDocumentMouseUp),c.hasTouch&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},1===c.chartCount&&gi(wi,"touchend",e.onDocumentTouchEnd))},destroy:function(){for(var t in Si(this.chart.container,"mouseleave",this.onContainerMouseLeave),c.chartCount||(Si(wi,"mouseup",this.onDocumentMouseUp),Si(wi,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout),this)this[t]=null}},Li=(ji=d).charts,_i=ji.each,Ii=ji.extend,Oi=ji.map,Di=ji.noop,Ri=ji.pick,a=ji.Pointer,Ii(a.prototype,{pinchTranslate:function(t,e,i,n,o,r){this.zoomHor&&this.pinchTranslateDirection(!0,t,e,i,n,o,r),this.zoomVert&&this.pinchTranslateDirection(!1,t,e,i,n,o,r)},pinchTranslateDirection:function(t,e,i,n,o,r,s,a){function l(){!w&&20<Math.abs(k-A)&&(v=a||Math.abs(T-C)/Math.abs(k-A)),u=(y-T)/v+k,c=d["plot"+(t?"Width":"Height")]/v}var c,u,h,d=this.chart,p=t?"x":"y",f=t?"X":"Y",g="chart"+f,m=t?"width":"height",y=d["plot"+(t?"Left":"Top")],v=a||1,b=d.inverted,x=d.bounds[t?"h":"v"],w=1===e.length,k=e[0][g],T=i[0][g],A=!w&&e[1][g],C=!w&&i[1][g];l(),(e=u)<x.min?(e=x.min,h=!0):e+c>x.max&&(e=x.max-c,h=!0),h?(T-=.8*(T-s[p][0]),w||(C-=.8*(C-s[p][1])),l()):s[p]=[T,C],b||(r[p]=u-y,r[m]=c),i=b?t?"scaleY":"scaleX":"scale"+f,g=b?1/v:v,o[m]=c,o[p]=e,n[i]=v,n["translate"+f]=g*y+(T-g*k)},pinch:function(t){var e=this,s=e.chart,i=e.pinchDown,n=t.touches,o=n.length,r=e.lastValidTouch,a=e.hasZoom,l=e.selectionMarker,c={},u=1===o&&(e.inClass(t.target,"highcharts-tracker")&&s.runTrackerClick||e.runChartClick),h={};1<o&&(e.initiated=!0),a&&e.initiated&&!u&&t.preventDefault(),Oi(n,function(t){return e.normalize(t)}),"touchstart"===t.type?(_i(n,function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}}),r.x=[i[0].chartX,i[1]&&i[1].chartX],r.y=[i[0].chartY,i[1]&&i[1].chartY],_i(s.axes,function(t){var e,i,n,o,r;t.zoomEnabled&&(e=s.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,r=t.toPixels(Ri(t.options.min,t.dataMin)),n=t.toPixels(Ri(t.options.max,t.dataMax)),o=Math.min(r,n),r=Math.max(r,n),e.min=Math.min(t.pos,o-i),e.max=Math.max(t.pos+t.len,r+i))}),e.res=!0):e.followTouchMove&&1===o?this.runPointActions(e.normalize(t)):i.length&&(l||(e.selectionMarker=l=Ii({destroy:Di,touch:!0},s.plotBox)),e.pinchTranslate(i,n,c,l,h,r),e.hasPinched=a,e.scaleGroups(c,h),e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var i,n=this.chart;n.index!==ji.hoverChartIndex&&this.onContainerMouseLeave({relatedTarget:!0}),ji.hoverChartIndex=n.index,1===t.touches.length?(t=this.normalize(t),n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop)&&!n.openMenu?(e&&this.runPointActions(t),"touchmove"===t.type&&(i=!!(n=this.pinchDown)[0]&&4<=Math.sqrt(Math.pow(n[0].chartX-t.chartX,2)+Math.pow(n[0].chartY-t.chartY,2))),Ri(i,!0)&&this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.zoomOption(t),this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){Li[ji.hoverChartIndex]&&Li[ji.hoverChartIndex].pointer.drop(t)}}),$i=(Ni=d).addEvent,Bi=Ni.charts,Fi=Ni.css,Wi=Ni.doc,s=Ni.extend,Gi=Ni.noop,l=Ni.Pointer,Ui=Ni.removeEvent,o=Ni.win,r=Ni.wrap,(o.PointerEvent||o.MSPointerEvent)&&(qi={},zi=!!o.PointerEvent,Hi=function(t,e,i,n){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Bi[Ni.hoverChartIndex]||(n(t),Bi[Ni.hoverChartIndex].pointer[e]({type:i,target:t.currentTarget,preventDefault:Gi,touches:function(){var t,e=[];for(t in e.item=function(t){return this[t]},qi)qi.hasOwnProperty(t)&&e.push({pageX:qi[t].pageX,pageY:qi[t].pageY,target:qi[t].target});return e}()}))},s(l.prototype,{onContainerPointerDown:function(t){Hi(t,"onContainerTouchStart","touchstart",function(t){qi[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){Hi(t,"onContainerTouchMove","touchmove",function(t){qi[t.pointerId]={pageX:t.pageX,pageY:t.pageY},qi[t.pointerId].target||(qi[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){Hi(t,"onDocumentTouchEnd","touchend",function(t){delete qi[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,zi?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,zi?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(Wi,zi?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),r(l.prototype,"init",function(t,e,i){t.call(this,e,i),this.hasZoom&&Fi(e.container,{"-ms-touch-action":"none","touch-action":"none"})}),r(l.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents($i)}),r(l.prototype,"destroy",function(t){this.batchMSEvents(Ui),t.call(this)})),Vi=(i=d).addEvent,Xi=i.css,Yi=i.discardElement,Qi=i.defined,Ki=i.each,h=i.isFirefox,Ji=i.marginNames,Zi=i.merge,tn=i.pick,en=i.setAnimation,nn=i.stableSort,t=i.win,u=i.wrap,(a=i.Legend=function(t,e){this.init(t,e)}).prototype={init:function(t,e){this.chart=t,this.setOptions(e),e.enabled&&(this.render(),Vi(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(t){var e=tn(t.padding,8);this.options=t,this.itemStyle=t.itemStyle,this.itemHiddenStyle=Zi(this.itemStyle,t.itemHiddenStyle),this.itemMarginTop=t.itemMarginTop||0,this.padding=e,this.initialItemX=e,this.initialItemY=e-5,this.maxItemWidth=0,this.itemHeight=0,this.symbolWidth=tn(t.symbolWidth,16),this.pages=[]},update:function(t,e){var i=this.chart;this.setOptions(Zi(!0,this.options,t)),this.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,tn(e,!0)&&i.redraw()},colorizeItem:function(t,e){t.legendGroup[e?"removeClass":"addClass"]("highcharts-legend-item-hidden");var i,n=this.options,o=t.legendItem,r=t.legendLine,s=t.legendSymbol,a=this.itemHiddenStyle.color,n=e?n.itemStyle.color:a,l=e&&t.color||a,c=t.options&&t.options.marker,u={fill:l};if(o&&o.css({fill:n,color:n}),r&&r.attr({stroke:l}),s){if(c&&s.isMarker&&(u=t.pointAttribs(),!e))for(i in u)u[i]=a;s.attr(u)}},positionItem:function(t){var e=this.options,i=e.symbolPadding,e=!e.rtl,n=t._legendItemPos,o=n[0],n=n[1],r=t.checkbox,t=t.legendGroup;t&&t.element&&t.translate(e?o:this.legendWidth-o-2*i-4,n),r&&(r.x=o,r.y=n)},destroyItem:function(e){var t=e.checkbox;Ki(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&Yi(e.checkbox)},destroy:function(){function e(t){this[t]&&(this[t]=this[t].destroy())}Ki(this.getAllItems(),function(t){Ki(["legendItem","legendGroup"],e,t)}),Ki(["clipRect","up","down","pager","nav","box","title","group"],e,this),this.display=null},positionCheckboxes:function(n){var o,r=this.group&&this.group.alignAttr,s=this.clipHeight||this.legendHeight,a=this.titleHeight;r&&(o=r.translateY,Ki(this.allItems,function(t){var e,i=t.checkbox;i&&(e=o+a+i.y+(n||0)+3,Xi(i,{left:r.translateX+t.checkboxOffset+i.x-20+"px",top:e+"px",display:o-6<e&&e<o+s-6?"":"none"}))}))},renderTitle:function(){var t=this.options,e=this.padding,t=t.title,i=0;t.text&&(this.title||(this.title=this.chart.renderer.label(t.text,e-3,e-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(t.style).add(this.group)),i=(e=this.title.getBBox()).height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?i.format(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e=this,i=e.chart,n=i.renderer,o=e.options,r="horizontal"===o.layout,s=e.symbolWidth,a=o.symbolPadding,l=e.itemStyle,c=e.itemHiddenStyle,u=e.padding,h=r?tn(o.itemDistance,20):0,d=!o.rtl,p=o.width,f=o.itemMarginBottom||0,g=e.itemMarginTop,m=e.initialItemX,y=t.legendItem,v=!t.series,b=!v&&t.series.drawLegendSymbol?t.series:t,x=b.options,x=e.createCheckboxForItem&&x&&x.showCheckbox,w=o.useHTML;y||(t.legendGroup=n.g("legend-item").addClass("highcharts-"+b.type+"-series highcharts-color-"+t.colorIndex+(t.options.className?" "+t.options.className:"")+(v?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(e.scrollGroup),t.legendItem=y=n.text("",d?s+a:-a,e.baseline||0,w).css(Zi(t.visible?l:c)).attr({align:d?"left":"right",zIndex:2}).add(t.legendGroup),e.baseline||(v=l.fontSize,e.fontMetrics=n.fontMetrics(v,y),e.baseline=e.fontMetrics.f+3+g,y.attr("y",e.baseline)),e.symbolHeight=o.symbolHeight||e.fontMetrics.f,b.drawLegendSymbol(e,t),e.setItemEvents&&e.setItemEvents(t,y,w),x&&e.createCheckboxForItem(t)),e.colorizeItem(t,t.visible),e.setText(t),c=y.getBBox(),d=t.checkboxOffset=o.itemWidth||t.legendItemWidth||s+a+c.width+h+(x?20:0),e.itemHeight=l=Math.round(t.legendItemHeight||c.height),r&&e.itemX-m+d>(p||i.chartWidth-2*u-m-o.x)&&(e.itemX=m,e.itemY+=g+e.lastLineHeight+f,e.lastLineHeight=0),e.maxItemWidth=Math.max(e.maxItemWidth,d),e.lastItemY=g+e.itemY+f,e.lastLineHeight=Math.max(l,e.lastLineHeight),t._legendItemPos=[e.itemX,e.itemY],r?e.itemX+=d:(e.itemY+=g+l+f,e.lastLineHeight=l),e.offsetWidth=p||Math.max((r?e.itemX-m-h:d)+u,e.offsetWidth)},getAllItems:function(){var i=[];return Ki(this.chart.series,function(t){var e=t&&t.options;t&&tn(e.showInLegend,!Qi(e.linkedTo)&&void 0,!0)&&(i=i.concat(t.legendItems||("point"===e.legendType?t.data:t)))}),i},adjustMargins:function(i,n){var o=this.chart,r=this.options,s=r.align.charAt(0)+r.verticalAlign.charAt(0)+r.layout.charAt(0);r.floating||Ki([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(t,e){t.test(s)&&!Qi(i[e])&&(o[Ji[e]]=Math.max(o[Ji[e]],o.legend[(e+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][e]*r[e%2?"x":"y"]+tn(r.margin,12)+n[e]))})},render:function(){var t,e,i,n,o=this,r=o.chart,s=r.renderer,a=o.group,l=o.box,c=o.options,u=o.padding;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,a||(o.group=a=s.g("legend").attr({zIndex:7}).add(),o.contentGroup=s.g().attr({zIndex:1}).add(a),o.scrollGroup=s.g().add(o.contentGroup)),o.renderTitle(),t=o.getAllItems(),nn(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&t.reverse(),o.allItems=t,o.display=e=!!t.length,o.lastLineHeight=0,Ki(t,function(t){o.renderItem(t)}),i=(c.width||o.offsetWidth)+u,n=o.lastItemY+o.lastLineHeight+o.titleHeight,n=o.handleOverflow(n),n+=u,l||(o.box=l=s.rect().addClass("highcharts-legend-box").attr({r:c.borderRadius}).add(a),l.isNew=!0),l.attr({stroke:c.borderColor,"stroke-width":c.borderWidth||0,fill:c.backgroundColor||"none"}).shadow(c.shadow),0<i&&0<n&&(l[l.isNew?"attr":"animate"](l.crisp({x:0,y:0,width:i,height:n},l.strokeWidth())),l.isNew=!1),l[e?"show":"hide"](),o.legendWidth=i,o.legendHeight=n,Ki(t,function(t){o.positionItem(t)}),e&&a.align(Zi(c,{width:i,height:n}),!0,"spacingBox"),r.isResizing||this.positionCheckboxes()},handleOverflow:function(t){function e(t){t?u.attr({height:t}):u&&(i.clipRect=u.destroy(),i.contentGroup.clip()),i.contentGroup.div&&(i.contentGroup.div.style.clip=t?"rect("+g+"px,9999px,"+(g+t)+"px,0)":"auto")}var o,r,i=this,n=this.chart,s=n.renderer,a=this.options,l=a.y,c="top"===a.verticalAlign,n=n.spacingBox.height+(c?-l:l)-this.padding,c=a.maxHeight,u=this.clipRect,l=a.navigation,h=tn(l.animation,!0),d=l.arrowSize||12,p=this.nav,f=this.pages,g=this.padding,m=this.allItems;return"horizontal"!==a.layout||"middle"===a.verticalAlign||a.floating||(n/=2),c&&(n=Math.min(n,c)),f.length=0,n<t&&!1!==l.enabled?(this.clipHeight=o=Math.max(n-20-this.titleHeight-g,0),this.currentPage=tn(this.currentPage,1),this.fullHeight=t,Ki(m,function(t,e){var i=t._legendItemPos[1],t=Math.round(t.legendItem.getBBox().height),n=f.length;(!n||i-f[n-1]>o&&(r||i)!==f[n-1])&&(f.push(r||i),n++),e===m.length-1&&i+t-f[n-1]>o&&f.push(i),i!==r&&(r=i)}),u||(u=i.clipRect=s.clipRect(0,g,9999,0),i.contentGroup.clip(u)),e(o),p||(this.nav=p=s.g().attr({zIndex:1}).add(this.group),this.up=s.symbol("triangle",0,0,d,d).on("click",function(){i.scroll(-1,h)}).add(p),this.pager=s.text("",15,10).addClass("highcharts-legend-navigation").css(l.style).add(p),this.down=s.symbol("triangle-down",0,0,d,d).on("click",function(){i.scroll(1,h)}).add(p)),i.scroll(0),t=n):p&&(e(),this.nav=p.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i=this.pages,n=i.length,t=this.currentPage+t,o=this.clipHeight,r=this.options.navigation,s=this.pager,a=this.padding;0<(t=n<t?n:t)&&(void 0!==e&&en(e,this.chart),this.nav.attr({translateX:a,translateY:o+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({class:1===t?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),s.attr({text:t+"/"+n}),this.down.attr({x:18+this.pager.getBBox().width,class:t===n?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===t?r.inactiveColor:r.activeColor}).css({cursor:1===t?"default":"pointer"}),this.down.attr({fill:t===n?r.inactiveColor:r.activeColor}).css({cursor:t===n?"default":"pointer"}),e=-i[t-1]+this.initialItemY,this.scrollGroup.animate({translateY:e}),this.currentPage=t,this.positionCheckboxes(e))}},i.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options,n=t.symbolHeight,i=i.squareSymbol,o=i?n:t.symbolWidth;e.legendSymbol=this.chart.renderer.rect(i?(t.symbolWidth-n)/2:0,t.baseline-n+1,o,n,tn(t.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e=this.options,i=e.marker,n=t.symbolWidth,o=t.symbolHeight,r=o/2,s=this.chart.renderer,a=this.legendGroup,t=t.baseline-Math.round(.3*t.fontMetrics.b),l={},l={"stroke-width":e.lineWidth||0};e.dashStyle&&(l.dashstyle=e.dashStyle),this.legendLine=s.path(["M",0,t,"L",n,t]).addClass("highcharts-graph").attr(l).add(a),i&&!1!==i.enabled&&(e=Math.min(tn(i.radius,r),r),0===this.symbol.indexOf("url")&&(i=Zi(i,{width:o,height:o}),e=0),this.legendSymbol=l=s.symbol(this.symbol,n/2-e,t-e,2*e,2*e,i).addClass("highcharts-point").add(a),l.isMarker=!0)}},(/Trident\/7\.0/.test(t.navigator.userAgent)||h)&&u(a.prototype,"positionItem",function(t,e){function i(){e._legendItemPos&&t.call(n,e)}var n=this;i(),setTimeout(i)}),on=(m=d).addEvent,rn=m.animate,sn=m.animObject,an=m.attr,ln=m.doc,cn=m.Axis,un=m.createElement,hn=m.defaultOptions,dn=m.discardElement,pn=m.charts,fn=m.css,gn=m.defined,y=m.each,mn=m.extend,yn=m.find,k=m.fireEvent,vn=m.getStyle,bn=m.grep,xn=m.isNumber,wn=m.isObject,kn=m.isString,Tn=m.Legend,An=m.marginNames,Cn=m.merge,Sn=m.Pointer,Mn=m.pick,En=m.pInt,Pn=m.removeEvent,jn=m.seriesTypes,Ln=m.splat,_n=m.svg,In=m.syncTimeout,On=m.win,Dn=m.Renderer,Rn=m.Chart=function(){this.getArgs.apply(this,arguments)},m.chart=function(t,e,i){return new Rn(t,e,i)},Rn.prototype={callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(kn(t[0])||t[0].nodeName)&&(this.renderTo=t.shift()),this.init(t[0],t[1])},init:function(t,e){var i,n,o=t.series,o=(t.series=null,(i=Cn(hn,t)).series=t.series=o,this.userOptions=t,i.chart),r=o.events;this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.callback=e,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=o.showAxes;if(this.index=pn.length,pn.push(this),m.chartCount++,r)for(n in r)on(this,n,r[n]);this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.firstRender()},initSeries:function(t){var e=this.options.chart,e=t.type||e.type||e.defaultSeriesType,e=jn[e];return e||m.error(17,!0),(e=new e).init(this,t),e},orderSeries:function(t){for(var e=this.series,i=t||0;i<e.length;i++)e[i]&&(e[i].index=i,e[i].name=e[i].name||"Series "+(e[i].index+1))},isInsidePlot:function(t,e,i){var n=i?e:t,i=i?t:e;return 0<=n&&n<=this.plotWidth&&0<=i&&i<=this.plotHeight},redraw:function(t){var i,e,n,o,r=this,s=r.axes,a=r.series,l=r.pointer,c=r.legend,u=r.isDirtyLegend,h=r.hasCartesianSeries,d=r.isDirtyBox,p=r.renderer,f=p.isHidden(),g=[];for(r.setResponsive&&r.setResponsive(!1),m.setAnimation(t,r),f&&r.cloneRenderTo(),r.layOutTitles(),n=a.length;n--;)if((o=a[n]).options.stacking&&(i=!0,o.isDirty)){e=!0;break}if(e)for(n=a.length;n--;)(o=a[n]).options.stacking&&(o.isDirty=!0);y(a,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),u=!0),t.isDirtyData&&k(t,"updatedData")}),u&&c.options.enabled&&(c.render(),r.isDirtyLegend=!1),i&&r.getStacks(),h&&y(s,function(t){t.updateNames(),t.setScale()}),r.getMargins(),h&&(y(s,function(t){t.isDirty&&(d=!0)}),y(s,function(t){var e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,g.push(function(){k(t,"afterSetExtremes",mn(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(d||i)&&t.redraw()})),d&&r.drawChartBox(),k(r,"predraw"),y(a,function(t){(d||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1}),l&&l.reset(!0),p.draw(),k(r,"redraw"),k(r,"render"),f&&r.cloneRenderTo(!0),y(g,function(t){t.call()})},get:function(e){var t,i,n=this.series;function o(t){return t.id===e||t.options&&t.options.id===e}for(t=yn(this.axes,o)||yn(this.series,o),i=0;!t&&i<n.length;i++)t=yn(n[i].points||[],o);return t},getAxes:function(){var e=this,t=this.options,i=t.xAxis=Ln(t.xAxis||{}),t=t.yAxis=Ln(t.yAxis||{});y(i,function(t,e){t.index=e,t.isX=!0}),y(t,function(t,e){t.index=e}),i=i.concat(t),y(i,function(t){new cn(e,t)})},getSelectedPoints:function(){var e=[];return y(this.series,function(t){e=e.concat(bn(t.points||[],function(t){return t.selected}))}),e},getSelectedSeries:function(){return bn(this.series,function(t){return t.selected})},setTitle:function(t,e,i){var r=this,n=r.options,o=n.title=Cn({style:{color:"#333333",fontSize:n.isStock?"16px":"18px"}},n.title,t),n=n.subtitle=Cn({style:{color:"#666666"}},n.subtitle,e);y([["title",t,o],["subtitle",e,n]],function(t,e){var i=t[0],n=r[i],o=t[1],t=t[2];n&&o&&(r[i]=n=n.destroy()),t&&t.text&&!n&&(r[i]=r.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,class:"highcharts-"+i,zIndex:t.zIndex||4}).add(),r[i].update=function(t){r.setTitle(!e&&t,e&&t)},r[i].css(t.style))}),r.layOutTitles(i)},layOutTitles:function(t){var e,o=0,r=this.renderer,s=this.spacingBox;y(["title","subtitle"],function(t){var e,i=this[t],n=this.options[t];i&&(e=n.style.fontSize,e=r.fontMetrics(e,i).b,i.css({width:(n.width||s.width+n.widthAdjust)+"px"}).align(mn({y:o+e+("title"===t?-3:2)},n),!1,"spacingBox"),n.floating||n.verticalAlign||(o=Math.ceil(o+i.getBBox().height)))},this),e=this.titleOffset!==o,this.titleOffset=o,!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&Mn(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this,e=t.options.chart,i=e.width,e=e.height,n=t.renderToClone||t.renderTo;gn(i)||(t.containerWidth=vn(n,"width")),gn(e)||(t.containerHeight=vn(n,"height")),t.chartWidth=Math.max(0,i||t.containerWidth||600),t.chartHeight=Math.max(0,m.relativeLength(e,t.chartWidth)||t.containerHeight||400)},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;if(t){if(e){for(;e.childNodes.length;)this.renderTo.appendChild(e.firstChild);dn(e),delete this.renderToClone}}else i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),fn(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),ln.body.appendChild(e),i&&e.appendChild(i)},setClassName:function(t){this.container.className="highcharts-container "+(t||"")},getContainer:function(){var t,e,i=this,n=i.options,o=n.chart,r=i.renderTo,s="data-highcharts-chart",a=m.uniqueKey();r||(i.renderTo=r=o.renderTo),kn(r)&&(i.renderTo=r=ln.getElementById(r)),r||m.error(13,!0),t=En(an(r,s)),xn(t)&&pn[t]&&pn[t].hasRendered&&pn[t].destroy(),an(r,s,i.index),r.innerHTML="",o.skipClone||r.offsetWidth||i.cloneRenderTo(),i.getChartSize(),t=i.chartWidth,s=i.chartHeight,e=mn({position:"relative",overflow:"hidden",width:t+"px",height:s+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},o.style),i.container=a=un("div",{id:a},e,i.renderToClone||r),i._cursor=a.style.cursor,e=m[o.renderer]||Dn,i.renderer=new e(a,t,s,null,o.forExport,n.exporting&&n.exporting.allowHTML),i.setClassName(o.className),i.renderer.setStyle(o.style),i.renderer.chartIndex=i.index},getMargins:function(t){var e=this,i=e.spacing,n=e.margin,o=e.titleOffset;e.resetMargins(),o&&!gn(n[0])&&(e.plotTop=Math.max(e.plotTop,o+e.options.title.margin+i[0])),e.legend.display&&e.legend.adjustMargins(n,i),e.extraMargin&&(e[e.extraMargin.type]=(e[e.extraMargin.type]||0)+e.extraMargin.value),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var i=this,n=i.axisOffset=[0,0,0,0],o=i.margin;i.hasCartesianSeries&&y(i.axes,function(t){t.visible&&t.getOffset()}),y(An,function(t,e){gn(o[e])||(i[t]+=n[e])}),i.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,o=gn(i.width),r=i.width||vn(n,"width"),i=i.height||vn(n,"height"),n=t?t.target:On;o||e.isPrinting||!r||!i||n!==On&&n!==ln||(r===e.containerWidth&&i===e.containerHeight||(clearTimeout(e.reflowTimeout),e.reflowTimeout=In(function(){e.container&&e.setSize(void 0,void 0,!1)},t?100:0)),e.containerWidth=r,e.containerHeight=i)},initReflow:function(){var e=this,t=on(On,"resize",function(t){e.reflow(t)});on(e,"destroy",t)},setSize:function(t,e,i){var n=this,o=n.renderer;n.isResizing+=1,m.setAnimation(i,n),n.oldChartHeight=n.chartHeight,n.oldChartWidth=n.chartWidth,void 0!==t&&(n.options.chart.width=t),void 0!==e&&(n.options.chart.height=e),n.getChartSize(),((t=o.globalAnimation)?rn:fn)(n.container,{width:n.chartWidth+"px",height:n.chartHeight+"px"},t),n.setChartSize(!0),o.setSize(n.chartWidth,n.chartHeight,i),y(n.axes,function(t){t.isDirty=!0,t.setScale()}),n.isDirtyLegend=!0,n.isDirtyBox=!0,n.layOutTitles(),n.getMargins(),n.redraw(i),n.oldChartHeight=null,k(n,"resize"),In(function(){n&&k(n,"endResize",null,function(){--n.isResizing})},sn(t).duration)},setChartSize:function(t){var e,i,n,o,r=this,s=r.inverted,a=r.renderer,l=r.chartWidth,c=r.chartHeight,u=r.options.chart,h=r.spacing,d=r.clipOffset;r.plotLeft=e=Math.round(r.plotLeft),r.plotTop=i=Math.round(r.plotTop),r.plotWidth=n=Math.max(0,Math.round(l-e-r.marginRight)),r.plotHeight=o=Math.max(0,Math.round(c-i-r.marginBottom)),r.plotSizeX=s?o:n,r.plotSizeY=s?n:o,r.plotBorderWidth=u.plotBorderWidth||0,r.spacingBox=a.spacingBox={x:h[3],y:h[0],width:l-h[3]-h[1],height:c-h[0]-h[2]},r.plotBox=a.plotBox={x:e,y:i,width:n,height:o},s=2*Math.floor(r.plotBorderWidth/2),u=Math.ceil(Math.max(s,d[3])/2),l=Math.ceil(Math.max(s,d[0])/2),r.clipBox={x:u,y:l,width:Math.floor(r.plotSizeX-Math.max(s,d[1])/2-u),height:Math.max(0,Math.floor(r.plotSizeY-Math.max(s,d[2])/2-l))},t||y(r.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var o=this,r=o.options.chart;y(["margin","spacing"],function(i){var t=r[i],n=wn(t)?t:[t,t,t,t];y(["Top","Right","Bottom","Left"],function(t,e){o[i][e]=Mn(r[i+t],n[e])})}),y(An,function(t,e){o[t]=Mn(o.margin[e],o.spacing[e])}),o.axisOffset=[0,0,0,0],o.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,o=i.renderer,r=i.chartWidth,s=i.chartHeight,a=i.chartBackground,l=i.plotBackground,c=i.plotBorder,u=i.plotBGImage,h=n.backgroundColor,d=n.plotBackgroundColor,p=n.plotBackgroundImage,f=i.plotLeft,g=i.plotTop,m=i.plotWidth,y=i.plotHeight,v=i.plotBox,b=i.clipRect,x=i.clipBox,w="animate";a||(i.chartBackground=a=o.rect().addClass("highcharts-background").add(),w="attr"),e=(t=n.borderWidth||0)+(n.shadow?8:0),h={fill:h||"none"},(t||a["stroke-width"])&&(h.stroke=n.borderColor,h["stroke-width"]=t),a.attr(h).shadow(n.shadow),a[w]({x:e/2,y:e/2,width:r-e-t%2,height:s-e-t%2,r:n.borderRadius}),w="animate",l||(w="attr",i.plotBackground=l=o.rect().addClass("highcharts-plot-background").add()),l[w](v),l.attr({fill:d||"none"}).shadow(n.plotShadow),p&&(u?u.animate(v):i.plotBGImage=o.image(p,f,g,m,y).add()),b?b.animate({width:x.width,height:x.height}):i.clipRect=o.clipRect(x),w="animate",c||(w="attr",i.plotBorder=c=o.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),c.attr({stroke:n.plotBorderColor,"stroke-width":n.plotBorderWidth||0,fill:"none"}),c[w](c.crisp({x:f,y:g,width:m,height:y},-c.strokeWidth())),i.isDirtyBox=!1},propFromSeries:function(){var e,i,n,o=this,r=o.options.chart,s=o.options.series;y(["inverted","angular","polar"],function(t){for(e=jn[r.type||r.defaultSeriesType],n=r[t]||e&&e.prototype[t],i=s&&s.length;!n&&i--;)(e=jn[s[i].type])&&e.prototype[t]&&(n=!0);o[t]=n})},linkSeries:function(){var i=this,t=i.series;y(t,function(t){t.linkedSeries.length=0}),y(t,function(t){var e=t.options.linkedTo;kn(e)&&(e=":previous"===e?i.series[t.index-1]:i.get(e))&&e.linkedParent!==t&&(e.linkedSeries.push(t),t.linkedParent=e,t.visible=Mn(t.options.visible,e.options.visible,t.visible))})},renderSeries:function(){y(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var o=this,r=o.options.labels;r.items&&y(r.items,function(t){var e=mn(r.style,t.style),i=En(e.left)+o.plotLeft,n=En(e.top)+o.plotTop+12;delete e.left,delete e.top,o.renderer.text(t.html,i,n).attr({zIndex:2}).css(e).add()})},render:function(){var t,e,i,n=this,o=n.axes,r=n.renderer,s=n.options;n.setTitle(),n.legend=new Tn(n,s.legend),n.getStacks&&n.getStacks(),n.getMargins(!0),n.setChartSize(),s=n.plotWidth,t=n.plotHeight=n.plotHeight-21,y(o,function(t){t.setScale()}),n.getAxisMargins(),e=1.1<s/n.plotWidth,i=1.05<t/n.plotHeight,(e||i)&&(y(o,function(t){(t.horiz&&e||!t.horiz&&i)&&t.setTickInterval(!0)}),n.getMargins()),n.drawChartBox(),n.hasCartesianSeries&&y(o,function(t){t.visible&&t.render()}),n.seriesGroup||(n.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),n.renderSeries(),n.renderLabels(),n.addCredits(),n.setResponsive&&n.setResponsive(),n.hasRendered=!0},addCredits:function(t){var e=this;(t=Cn(!0,this.options.credits,t)).enabled&&!this.credits&&(this.credits=this.renderer.text(t.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){t.href&&(On.location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})},destroy:function(){var t,i=this,e=i.axes,n=i.series,o=i.container,r=o&&o.parentNode;for(k(i,"destroy"),pn[i.index]=void 0,m.chartCount--,i.renderTo.removeAttribute("data-highcharts-chart"),Pn(i),t=e.length;t--;)e[t]=e[t].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),t=n.length;t--;)n[t]=n[t].destroy();for(t in y(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var e=i[t];e&&e.destroy&&(i[t]=e.destroy())}),o&&(o.innerHTML="",Pn(o),r&&dn(o)),i)delete i[t]},isReadyToRender:function(){var t=this;return!(!_n&&On==On.top&&"complete"!==ln.readyState)||(ln.attachEvent("onreadystatechange",function(){ln.detachEvent("onreadystatechange",t.firstRender),"complete"===ln.readyState&&t.firstRender()}),!1)},firstRender:function(){var e=this,t=e.options;e.isReadyToRender()&&(e.getContainer(),k(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),y(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),k(e,"beforeRender"),Sn&&(e.pointer=new Sn(e,t)),e.render(),!e.renderer.imgCount&&e.onload&&e.onload(),e.cloneRenderTo(!0))},onload:function(){y([this.callback].concat(this.callbacks),function(t){t&&void 0!==this.index&&t.apply(this,[this])},this),k(this,"load"),k(this,"render"),gn(this.index)&&!1!==this.options.chart.reflow&&this.initReflow(),this.onload=null}},Nn=d.each,qn=d.extend,zn=d.erase,Hn=d.fireEvent,$n=d.format,Bn=d.isArray,Fn=d.isNumber,Wn=d.pick,Gn=d.removeEvent,(Un=d.Point=function(){}).prototype={init:function(t,e,i){var n;t.chart.options.chart.colorCount;return this.series=t,this.color=t.color,this.applyOptions(e,i),t.options.colorByPoint?(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter],i=e.length,n=t.colorCounter,t.colorCounter++,t.colorCounter===i&&(t.colorCounter=0)):n=t.colorIndex,this.colorIndex=Wn(this.colorIndex,n),t.chart.pointCount++,this},applyOptions:function(t,e){var i=this,n=i.series,o=n.options.pointValKey||n.pointValKey;return t=Un.prototype.optionsToObject.call(this,t),qn(i,t),i.options=i.options?qn(i.options,t):t,t.group&&delete i.group,o&&(i.y=i[o]),i.isNull=Wn(i.isValid&&!i.isValid(),null===i.x||!Fn(i.y,!0)),i.selected&&(i.state="select"),"name"in i&&void 0===e&&n.xAxis&&n.xAxis.hasNames&&(i.x=n.xAxis.nameToX(i)),void 0===i.x&&n&&(i.x=void 0===e?n.autoIncrement(i):e),i},optionsToObject:function(t){var e,i={},n=this.series,o=n.options.keys,r=o||n.pointArrayMap||["y"],s=r.length,a=0,l=0;if(Fn(t)||null===t)i[r[0]]=t;else if(Bn(t))for(!o&&t.length>s&&("string"==(e=typeof t[0])?i.name=t[0]:"number"==e&&(i.x=t[0]),a++);l<s;)o&&void 0===t[a]||(i[r[l]]=t[a]),a++,l++;else"object"==typeof t&&((i=t).dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){for(var t=this.series,e=t.zones,i=t.zoneAxis||"y",n=0,o=e[n];this[i]>=o.value;)o=e[++n];return o&&o.color&&!this.options.color&&(this.color=o.color),o},destroy:function(){var t,e=this,i=e.series.chart,n=i.hoverPoints;for(t in i.pointCount--,n&&(e.setState(),zn(n,e),n.length||(i.hoverPoints=null)),e===i.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(Gn(e),e.destroyElements()),e.legendItem&&i.legend.destroyItem(e),e)e[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],i=6;i--;)this[t=e[i]]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,i=t.tooltipOptions,n=Wn(i.valueDecimals,""),o=i.valuePrefix||"",r=i.valueSuffix||"";return Nn(t.pointArrayMap||["y"],function(t){t="{point."+t,e=(e=o||r?e.replace(t+"}",o+t+"}"+r):e).replace(t+"}",t+":,."+n+"f}")}),$n(e,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,o=this.series.options;(o.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&o.allowPointSelect&&(i=function(t){n.select&&n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Hn(this,t,e,i)},visible:!0},Vn=(S=d).addEvent,Xn=S.animObject,Yn=S.arrayMax,Qn=S.arrayMin,Kn=S.correctFloat,Jn=S.Date,Zn=S.defaultOptions,to=S.defaultPlotOptions,eo=S.defined,M=S.each,io=S.erase,no=S.extend,oo=S.fireEvent,ro=S.grep,so=S.isArray,ao=S.isNumber,lo=S.isString,o=S.LegendSymbolMixin,co=S.merge,E=S.pick,s=S.Point,uo=S.removeEvent,ho=S.splat,po=S.SVGElement,fo=S.syncTimeout,go=S.win,S.Series=S.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{lineWidth:0,lineColor:"#ffffff",radius:4,states:{hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":S.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3},{isCartesian:!0,pointClass:s,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(t,e){var i,n,o,r=this,s=t.series;for(i in r.chart=t,r.options=e=r.setOptions(e),r.linkedSeries=[],r.bindAxes(),no(r,{name:e.name,state:"",visible:!1!==e.visible,selected:!0===e.selected}),n=e.events)Vn(r,i,n[i]);(n&&n.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),r.getColor(),r.getSymbol(),M(r.parallelArrays,function(t){r[t+"Data"]=[]}),r.setData(e.data,!1),r.isCartesian&&(t.hasCartesianSeries=!0),s.length&&(o=s[s.length-1]),r._i=E(o&&o._i,-1)+1,t.orderSeries(this.insert(s))},insert:function(t){var e,i=this.options.index;if(ao(i)){for(e=t.length;e--;)if(i>=E(t[e].options.index,t[e]._i)){t.splice(e+1,0,this);break}-1===e&&t.unshift(this),e+=1}else t.push(this);return E(e,t.length-1)},bindAxes:function(){var i,n=this,o=n.options,t=n.chart;M(n.axisTypes||[],function(e){M(t[e],function(t){i=t.options,(o[e]===i.index||void 0!==o[e]&&o[e]===i.id||void 0===o[e]&&0===i.index)&&(n.insert(t.series),(n[e]=t).isDirty=!0)}),n[e]||n.optionalAxis===e||S.error(18,!0)})},updateParallelArrays:function(i,n){var o=i.series,e=arguments,t=ao(n)?function(t){var e="y"===t&&o.toYData?o.toYData(i):i[t];o[t+"Data"][n]=e}:function(t){Array.prototype[n].apply(o[t+"Data"],Array.prototype.slice.call(e,2))};M(o.parallelArrays,t)},autoIncrement:function(){var t,e=this.options,i=this.xIncrement,n=e.pointIntervalUnit,i=E(i,e.pointStart,0);return this.pointInterval=e=E(this.pointInterval,e.pointInterval,1),n&&(t=new Jn(i),"day"===n?t=+t[Jn.hcSetDate](t[Jn.hcGetDate]()+e):"month"===n?t=+t[Jn.hcSetMonth](t[Jn.hcGetMonth]()+e):"year"===n&&(t=+t[Jn.hcSetFullYear](t[Jn.hcGetFullYear]()+e)),e=t-i),this.xIncrement=i+e,i},setOptions:function(t){var e=this.chart,i=e.options.plotOptions,e=e.userOptions||{},n=e.plotOptions||{},o=i[this.type];return this.userOptions=t,i=co(o,i.series,t),this.tooltipOptions=co(Zn.tooltip,Zn.plotOptions[this.type].tooltip,e.tooltip,n.series&&n.series.tooltip,n[this.type]&&n[this.type].tooltip,t.tooltip),null===o.marker&&delete i.marker,this.zoneAxis=i.zoneAxis,e=this.zones=(i.zones||[]).slice(),!i.negativeColor&&!i.negativeFillColor||i.zones||e.push({value:i[this.zoneAxis+"Threshold"]||i.threshold||0,className:"highcharts-negative",color:i.negativeColor,fillColor:i.negativeFillColor}),e.length&&eo(e[e.length-1].value)&&e.push({color:this.color,fillColor:this.fillColor}),i},getCyclic:function(t,e,i){var n,o,r=this.chart,s=this.userOptions,a=t+"Index",l=t+"Counter",c=i?i.length:E(r.options.chart[t+"Count"],r[t+"Count"]);e||(o=E(s[a],s["_"+a]),eo(o)?n=o:(r.series.length||(r[l]=0),s["_"+a]=n=r[l]%c,r[l]+=1),i&&(e=i[n])),void 0!==n&&(this[a]=n),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||to[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols)},drawLegendSymbol:o.drawLineMarker,setData:function(t,e,i,n){var o,r,s=this,a=s.points,l=a&&a.length||0,c=s.options,u=s.chart,h=null,d=s.xAxis,p=c.turboThreshold,f=this.xData,g=this.yData,m=s.pointArrayMap,y=m&&m.length,v=(t=t||[]).length;if(e=E(e,!0),!1!==n&&v&&l===v&&!s.cropped&&!s.hasGroupedData&&s.visible)M(t,function(t,e){a[e].update&&t!==c.data[e]&&a[e].update(t,!1,null,!1)});else{if(s.xIncrement=null,s.colorCounter=0,M(this.parallelArrays,function(t){s[t+"Data"].length=0}),p&&p<v){for(o=0;null===h&&o<v;)h=t[o],o++;if(ao(h))for(o=0;o<v;o++)f[o]=this.autoIncrement(),g[o]=t[o];else if(so(h))if(y)for(o=0;o<v;o++)r=t[o],f[o]=r[0],g[o]=r.slice(1,y+1);else for(o=0;o<v;o++)r=t[o],f[o]=r[0],g[o]=r[1];else S.error(12)}else for(o=0;o<v;o++)void 0!==t[o]&&(s.pointClass.prototype.applyOptions.apply(r={series:s},[t[o]]),s.updateParallelArrays(r,o));for(lo(g[0])&&S.error(14,!0),s.data=[],s.options.data=s.userOptions.data=t,o=l;o--;)a[o]&&a[o].destroy&&a[o].destroy();d&&(d.minRange=d.userMinRange),s.isDirty=u.isDirtyBox=!0,s.isDirtyData=!!a,i=!1}"point"===c.legendType&&(this.processData(),this.generatePoints()),e&&u.redraw(i)},processData:function(t){var e,i,n,o,r,s,a=this,l=a.xData,c=a.yData,u=l.length,h=0,d=a.xAxis,p=a.options,f=p.cropThreshold,p=a.getExtremesFromAll||p.getExtremesFromAll,g=a.isCartesian,m=d&&d.val2lin,y=d&&d.isLog;if(g&&!a.isDirty&&!d.isDirty&&!a.yAxis.isDirty&&!t)return!1;for(d&&(r=(t=d.getExtremes()).min,s=t.max),g&&a.sorted&&!p&&(!f||f<u||a.forceCrop)&&(l[u-1]<r||l[0]>s?(l=[],c=[]):(l[0]<r||l[u-1]>s)&&(l=(d=this.cropData(a.xData,a.yData,r,s)).xData,c=d.yData,h=d.start,e=!0)),o=l.length||1;--o;)0<(i=y?m(l[o])-m(l[o-1]):l[o]-l[o-1])&&(void 0===n||i<n)?n=i:i<0&&a.requireSorting&&S.error(15);a.cropped=e,a.cropStart=h,a.processedXData=l,a.processedYData=c,a.closestPointRange=n},cropData:function(t,e,i,n){for(var o,r=t.length,s=0,a=r,l=E(this.cropShoulder,1),c=0;c<r;c++)if(t[c]>=i){s=Math.max(0,c-l);break}for(o=c;o<r;o++)if(t[o]>n){a=o+l;break}return{xData:t.slice(s,a),yData:e.slice(s,a),start:s,end:a}},generatePoints:function(){var t,e,i,n,o,r=this,s=r.options.data,a=r.data,l=r.processedXData,c=r.processedYData,u=r.pointClass,h=l.length,d=r.cropStart||0,p=r.hasGroupedData,f=[];for(a||p||((o=[]).length=s.length,a=r.data=o),n=0;n<h;n++)e=d+n,p?(i=(new u).init(r,[l[n]].concat(ho(c[n])))).dataGroup=r.groupMap[n]:(i=a[e])||void 0===s[e]||(a[e]=i=(new u).init(r,s[e],l[n])),i.index=e,f[n]=i;if(a&&(h!==(t=a.length)||p))for(n=0;n<t;n++)n!==d||p||(n+=h),a[n]&&(a[n].destroyElements(),a[n].plotX=void 0);r.data=a,r.points=f},getExtremes:function(t){for(var e,i,n,o,r=this.xAxis,s=this.yAxis,a=this.processedXData,l=[],c=0,r=r.getExtremes(),u=r.min,h=r.max,d=(t=t||this.stackedYData||this.processedYData||[]).length,p=0;p<d;p++)if(i=a[p],n=t[p],e=(ao(n,!0)||so(n))&&(!s.positiveValuesOnly||n.length||0<n),i=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(a[p+1]||i)>=u&&(a[p-1]||i)<=h,e&&i)if(o=n.length)for(;o--;)null!==n[o]&&(l[c++]=n[o]);else l[c++]=n;this.dataMin=Qn(l),this.dataMax=Yn(l)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e,i,n,o=this,r=o.options,s=r.stacking,a=o.xAxis,l=a.categories,c=o.yAxis,u=o.points,h=u.length,d=!!o.modifyValue,p=r.pointPlacement,f="between"===p||ao(p),g=r.threshold,m=r.startFromThreshold?g:0,y=Number.MAX_VALUE;for(ao(p="between"===p?.5:p)&&(p*=E(r.pointRange||a.pointRange)),t=0;t<h;t++){var v,b,x=u[t],w=x.x,k=x.y,T=x.low,A=s&&c.stacks[(o.negStacks&&k<(m?0:g)?"-":"")+o.stackKey];c.positiveValuesOnly&&null!==k&&k<=0&&(x.isNull=!0),x.plotX=e=Kn(Math.min(Math.max(-1e5,a.translate(w,0,0,0,1,p,"flags"===this.type)),1e5)),s&&o.visible&&!x.isNull&&A&&A[w]&&(n=o.getStackIndicator(n,w,o.index),T=(b=(v=A[w]).points[n.key])[0],k=b[1],T===m&&n.key===A[w].base&&(T=E(g,c.min)),c.positiveValuesOnly&&T<=0&&(T=null),x.total=x.stackTotal=v.total,x.percentage=v.total&&x.y/v.total*100,x.stackY=k,v.setOffset(o.pointXOffset||0,o.barW||0)),x.yBottom=eo(T)?c.translate(T,0,1,0,1):null,d&&(k=o.modifyValue(k,x)),x.plotY=b="number"==typeof k&&k!==1/0?Math.min(Math.max(-1e5,c.translate(k,0,1,0,1)),1e5):void 0,x.isInside=void 0!==b&&0<=b&&b<=c.len&&0<=e&&e<=a.len,x.clientX=f?Kn(a.translate(w,0,0,0,1,p)):e,x.negative=x.y<(g||0),x.category=l&&void 0!==l[x.x]?l[x.x]:x.x,x.isNull||(void 0!==i&&(y=Math.min(y,Math.abs(e-i))),i=e),x.zone=this.zones.length&&x.getZone()}o.closestPointRangePx=y},getValidPoints:function(t,e){var i=this.chart;return ro(t||this.points||[],function(t){return!(e&&!i.isInsidePlot(t.plotX,t.plotY,i.inverted))&&!t.isNull})},setClip:function(t){var e=this.chart,i=this.options,n=e.renderer,o=e.inverted,r=this.clipBox,s=r||e.clipBox,a=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,s.height,i.xAxis,i.yAxis].join(","),l=e[a],c=e[a+"m"];l||(t&&(s.width=0,e[a+"m"]=c=n.clipRect(-99,o?-e.plotLeft:-e.plotTop,99,o?e.chartWidth:e.chartHeight)),e[a]=l=n.clipRect(s),l.count={length:0}),t&&!l.count[this.index]&&(l.count[this.index]=!0,l.count.length+=1),!1!==i.clip&&(this.group.clip(t||r?l:e.clipRect),this.markerGroup.clip(c),this.sharedClipKey=a),t||(l.count[this.index]&&(delete l.count[this.index],--l.count.length),0===l.count.length&&a&&e[a]&&(r||(e[a]=e[a].destroy()),e[a+"m"]&&(this.markerGroup.clip(),e[a+"m"]=e[a+"m"].destroy())))},animate:function(t){var e,i=this.chart,n=Xn(this.options.animation);t?this.setClip(n):((e=i[t=this.sharedClipKey])&&e.animate({width:i.plotSizeX},n),i[t+"m"]&&i[t+"m"].animate({width:i.plotSizeX+99},n),this.animate=null)},afterAnimate:function(){this.setClip(),oo(this,"afterAnimate")},drawPoints:function(){var t,e,i,n,o,r,s,a,l=this,c=l.points,u=l.chart,h=l.options.marker,d=l.markerGroup,p=l.xAxis,f=E(h.enabled,!!p.isRadial||null,l.closestPointRangePx>=2*h.radius);if(!1!==h.enabled||l._hasPointMarkers)for(t=0;t<c.length;t++)a=(e=c[t]).plotY,i=e.graphic,n=e.marker||{},o=!!e.marker,r=f&&void 0===n.enabled||n.enabled,s=e.isInside,r&&ao(a)&&null!==e.y?(r=E(n.symbol,l.symbol),e.hasImage=0===r.indexOf("url"),a=l.markerAttribs(e,e.selected&&"select"),i?i[s?"show":"hide"](!0).animate(a):s&&(0<a.width||e.hasImage)&&(e.graphic=i=u.renderer.symbol(r,a.x,a.y,a.width,a.height,o?n:h).add(d)),i&&i.attr(l.pointAttribs(e,e.selected&&"select")),i&&i.addClass(e.getClassName(),!0)):i&&(e.graphic=i.destroy())},markerAttribs:function(t,e){var i=this.options.marker,n=t.marker||{},o=E(n.radius,i.radius);return e&&(i=i.states[e],n=n.states&&n.states[e],o=E(n&&n.radius,i&&i.radius,o+(i&&i.radiusPlus||0))),t.hasImage&&(o=0),e={x:Math.floor(t.plotX)-o,y:t.plotY-o},o&&(e.width=e.height=2*o),e},pointAttribs:function(t,e){var i=this.options.marker,n=t&&t.options,o=n&&n.marker||{},r=this.color,n=n&&n.color,s=t&&t.color,a=E(o.lineWidth,i.lineWidth),t=t&&t.zone&&t.zone.color,r=n||t||s||r,n=o.fillColor||i.fillColor||r,t=o.lineColor||i.lineColor||r;return e&&(s=i.states[e],r=o.states&&o.states[e]||{},a=E(r.lineWidth,s.lineWidth,a+E(r.lineWidthPlus,s.lineWidthPlus,0)),n=r.fillColor||s.fillColor||n,t=r.lineColor||s.lineColor||t),{stroke:t,"stroke-width":a,fill:n}},destroy:function(){var t,e,i,n,o=this,r=o.chart,s=/AppleWebKit\/533/.test(go.navigator.userAgent),a=o.data||[];for(oo(o,"destroy"),uo(o),M(o.axisTypes||[],function(t){(n=o[t])&&n.series&&(io(n.series,o),n.isDirty=n.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),t=a.length;t--;)(e=a[t])&&e.destroy&&e.destroy();for(i in o.points=null,clearTimeout(o.animationTimeout),o)o[i]instanceof po&&!o[i].survive&&o[i][s&&"group"===i?"hide":"destroy"]();for(i in r.hoverSeries===o&&(r.hoverSeries=null),io(r.series,o),r.orderSeries(),o)delete o[i]},getGraphPath:function(s,a,l){var t,c,u=this,h=u.options,d=h.step,p=[],f=[];return(t=(s=s||u.points).reversed)&&s.reverse(),(d={right:1,center:2}[d]||d&&3)&&t&&(d=4-d),!h.connectNulls||a||l||(s=this.getValidPoints(s)),M(s,function(t,e){var i,n=t.plotX,o=t.plotY,r=s[e-1];(t.leftCliff||r&&r.rightCliff)&&!l&&(c=!0),c=t.isNull&&!eo(a)&&0<e?!h.connectNulls:!(!t.isNull||a)||(0===e||c?i=["M",t.plotX,t.plotY]:u.getPointSpline?i=u.getPointSpline(s,t,e):d?(i=1===d?["L",r.plotX,o]:2===d?["L",(r.plotX+n)/2,r.plotY,"L",(r.plotX+n)/2,o]:["L",n,r.plotY]).push("L",n,o):i=["L",n,o],f.push(t.x),d&&f.push(t.x),p.push.apply(p,i),!1)}),p.xMap=f,u.graphPath=p},drawGraph:function(){var r=this,s=this.options,a=(this.gappedPath||this.getGraphPath).call(this),i=[["graph","highcharts-graph",s.lineColor||this.color,s.dashStyle]];M(this.zones,function(t,e){i.push(["zone-graph-"+e,"highcharts-graph highcharts-zone-graph-"+e+" "+(t.className||""),t.color||r.color,t.dashStyle||s.dashStyle])}),M(i,function(t,e){var i,n=t[0],o=r[n];o?(o.endX=a.xMap,o.animate({d:a})):a.length&&(r[n]=r.chart.renderer.path(a).addClass(t[1]).attr({zIndex:1}).add(r.group),i={stroke:t[2],"stroke-width":s.lineWidth,fill:r.fillGraph&&r.color||"none"},t[3]?i.dashstyle=t[3]:"square"!==s.linecap&&(i["stroke-linecap"]=i["stroke-linejoin"]="round"),o=r[n].attr(i).shadow(e<2&&s.shadow)),o&&(o.startX=a.xMap,o.isArea=a.isArea)})},applyZones:function(){var i,n,o,r,s,a,l,c,u=this,h=this.chart,d=h.renderer,t=this.zones,p=this.clips||[],f=this.graph,g=this.area,m=Math.max(h.chartWidth,h.chartHeight),y=this[(this.zoneAxis||"y")+"Axis"],v=h.inverted,b=!1;t.length&&(f||g)&&y&&void 0!==y.min&&(r=y.reversed,s=y.horiz,f&&f.hide(),g&&g.hide(),o=y.getExtremes(),M(t,function(t,e){c=r?s?h.plotWidth:0:s?0:y.toPixels(o.min),c=Math.min(Math.max(E(i,c),0),m),i=Math.min(Math.max(Math.round(y.toPixels(E(t.value,o.max),!0)),0),m),b&&(c=i=y.toPixels(o.max)),a=Math.abs(c-i),l=Math.min(c,i),c=Math.max(c,i),y.isXAxis?(n={x:v?c:l,y:0,width:a,height:m},s||(n.x=h.plotHeight-n.x)):(n={x:0,y:v?c:l,width:m,height:a},s&&(n.y=h.plotWidth-n.y)),v&&d.isVML&&(n=y.isXAxis?{x:0,y:r?l:c,height:n.width,width:h.chartWidth}:{x:n.y-h.plotLeft-h.spacingBox.x,y:0,width:n.height,height:h.chartHeight}),p[e]?p[e].animate(n):(p[e]=d.clipRect(n),f&&u["zone-graph-"+e].clip(p[e]),g&&u["zone-area-"+e].clip(p[e])),b=t.value>o.max}),this.clips=p)},invertGroups:function(e){var t,i=this,n=i.chart;function o(){M(["group","markerGroup"],function(t){i[t]&&(n.renderer.isVML&&i[t].attr({width:i.yAxis.len,height:i.xAxis.len}),i[t].width=i.yAxis.len,i[t].height=i.xAxis.len,i[t].invert(e))})}i.xAxis&&(t=Vn(n,"resize",o),Vn(i,"destroy",t),o(),i.invertGroups=o)},plotGroup:function(t,e,i,n,o){var r=this[t],s=!r;return s&&(this[t]=r=this.chart.renderer.g(e).attr({zIndex:n||.1}).add(o),r.addClass("highcharts-series-"+this.index+" highcharts-"+this.type+"-series highcharts-color-"+this.colorIndex+" "+(this.options.className||""))),r.attr({visibility:i})[s?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t=this,e=t.chart,i=t.options,n=!!t.animate&&e.renderer.isSVG&&Xn(i.animation).duration,o=t.visible?"inherit":"hidden",r=i.zIndex,s=t.hasRendered,a=e.seriesGroup,l=e.inverted,c=t.plotGroup("group","series",o,r,a);t.markerGroup=t.plotGroup("markerGroup","markers",o,r,a),n&&t.animate(!0),c.inverted=!!t.isCartesian&&l,t.drawGraph&&(t.drawGraph(),t.applyZones()),t.drawDataLabels&&t.drawDataLabels(),t.visible&&t.drawPoints(),t.drawTracker&&!1!==t.options.enableMouseTracking&&t.drawTracker(),t.invertGroups(l),!1===i.clip||t.sharedClipKey||s||c.clip(e.clipRect),n&&t.animate(),s||(t.animationTimeout=fo(function(){t.afterAnimate()},n)),t.isDirty=!1,t.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirty||this.isDirtyData,i=this.group,n=this.xAxis,o=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:E(n&&n.left,t.plotLeft),translateY:E(o&&o.top,t.plotTop)})),this.translate(),this.render(),e&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var i=this.xAxis,n=this.yAxis,o=this.chart.inverted;return this.searchKDTree({clientX:o?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:o?n.len-t.chartX+n.pos:t.chartY-n.pos},e)},buildKDTree:function(){this.buildingKdTree=!0;var s=this,t=s.kdDimensions;delete s.kdTree,fo(function(){s.kdTree=function t(e,i,n){var o,r=e&&e.length;if(r)return o=s.kdAxisArray[i%n],e.sort(function(t,e){return t[o]-e[o]}),{point:e[r=Math.floor(r/2)],left:t(e.slice(0,r),i+1,n),right:t(e.slice(r+1),i+1,n)}}(s.getValidPoints(null,!s.directTouch),t,t),s.buildingKdTree=!1},s.options.kdNow?0:1)},searchKDTree:function(t,e){var u=this,h=this.kdAxisArray[0],d=this.kdAxisArray[1],p=e?"distX":"dist";function f(t,e,i,n){var o,r,s,a=e.point,l=u.kdAxisArray[i%n],c=a;return r=a,o=((s=eo((o=t)[h])&&eo(r[h])?Math.pow(o[h]-r[h],2):null)||0)+((eo(o[d])&&eo(r[d])?Math.pow(o[d]-r[d],2):null)||0),r.dist=eo(o)?Math.sqrt(o):Number.MAX_VALUE,r.distX=eo(s)?Math.sqrt(s):Number.MAX_VALUE,r=(o=t[l]-a[l])<0?"right":"left",e[s=o<0?"left":"right"]&&(c=(l=f(t,e[s],i+1,n))[p]<c[p]?l:a),c=e[r]&&Math.sqrt(o*o)<c[p]?(s=f(t,e[r],i+1,n))[p]<c[p]?s:c:c}if(this.kdTree||this.buildingKdTree||this.buildKDTree(),this.kdTree)return f(t,this.kdTree,this.kdDimensions,this.kdDimensions)}}),r=d.Axis,l=d.Chart,mo=d.correctFloat,yo=d.defined,vo=d.destroyObjectProperties,bo=d.each,xo=d.format,wo=d.pick,t=d.Series,Xr.prototype={destroy:function(){vo(this,this.axis)},render:function(t){var e=this.options,i=e.format,i=i?xo(i,this):e.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var i=this.axis,n=i.chart,o=n.inverted,r=i.reversed,r=this.isNegative&&!r||!this.isNegative&&r,s=i.translate(i.usePercentage?100:this.total,0,0,0,1),i=i.translate(0),i=Math.abs(s-i),t=n.xAxis[0].translate(this.x)+t,a=n.plotHeight,l=this.label;l&&(l.align(this.alignOptions,null,{x:o?r?s:s-i:t,y:o?a-t-e:r?a-s-i:a-s,width:o?i:e,height:o?e:i}),t=l.alignAttr,l[!1===this.options.crop||n.isInsidePlot(t.x,t.y)?"show":"hide"](!0))}},l.prototype.getStacks=function(){var e=this;bo(e.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),bo(e.series,function(t){!t.options.stacking||!0!==t.visible&&!1!==e.options.chart.ignoreHiddenSeries||(t.stackKey=t.type+wo(t.options.stack,""))})},r.prototype.buildStacks=function(){var t,e,i=this.series,n=wo(this.options.reversedStacks,!0),o=i.length;if(!this.isXAxis){for(this.usePercentage=!1,e=o;e--;)i[n?e:o-e-1].setStackedPoints();for(e=o;e--;)(t=i[n?e:o-e-1]).setStackCliffs&&t.setStackCliffs();if(this.usePercentage)for(e=0;e<o;e++)i[e].setPercentStacks()}},r.prototype.renderStackTotals=function(){var t,e,i,n=this.chart,o=n.renderer,r=this.stacks,s=this.stackTotalGroup;for(t in s||(this.stackTotalGroup=s=o.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),s.translate(n.plotLeft,n.plotTop),r)for(i in e=r[t])e[i].render(s)},r.prototype.resetStacks=function(){var t,e,i=this.stacks;if(!this.isXAxis)for(t in i)for(e in i[t])i[t][e].touched<this.stacksTouched?(i[t][e].destroy(),delete i[t][e]):(i[t][e].total=null,i[t][e].cum=null)},r.prototype.cleanStacks=function(){var t,e,i;if(!this.isXAxis)for(e in t=this.oldStacks?this.stacks=this.oldStacks:t)for(i in t[e])t[e][i].cum=t[e][i].total},t.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,i,n,o,r,s,a=this,l=a.processedXData,c=a.processedYData,u=[],h=c.length,d=a.options,p=d.threshold,f=d.startFromThreshold?p:0,g=d.stack,m=d.stacking,y=a.stackKey,v="-"+y,b=a.negStacks,x=a.yAxis,w=x.stacks,k=x.oldStacks;for(x.stacksTouched+=1,o=0;o<h;o++)r=l[o],s=c[o],n=(t=a.getStackIndicator(t,r,a.index)).key,w[i=(e=b&&s<(f?0:p))?v:y]||(w[i]={}),w[i][r]||(k[i]&&k[i][r]?(w[i][r]=k[i][r],w[i][r].total=null):w[i][r]=new Xr(x,x.options.stackLabels,e,r,g)),i=w[i][r],null!==s&&(i.points[n]=i.points[a.index]=[wo(i.cum,f)],yo(i.cum)||(i.base=n),i.touched=x.stacksTouched,0<t.index&&!1===a.singleStacks&&(i.points[n][0]=i.points[a.index+","+r+",0"][0])),"percent"===m?(e=e?y:v,b&&w[e]&&w[e][r]?(e=w[e][r],i.total=e.total=Math.max(e.total,i.total)+Math.abs(s)||0):i.total=mo(i.total+(Math.abs(s)||0))):i.total=mo(i.total+(s||0)),i.cum=wo(i.cum,f)+(s||0),null!==s&&(i.points[n].push(i.cum),u[o]=i.cum);"percent"===m&&(x.usePercentage=!0),this.stackedYData=u,x.oldStacks={}}},t.prototype.setPercentStacks=function(){var o,r=this,t=r.stackKey,s=r.yAxis.stacks,a=r.processedXData;bo([t,"-"+t],function(t){for(var e,i,n=a.length;n--;)i=a[n],o=r.getStackIndicator(o,i,r.index,t),(e=(i=s[t]&&s[t][i])&&i.points[o.key])&&(i=i.total?100/i.total:0,e[0]=mo(e[0]*i),e[1]=mo(e[1]*i),r.stackedYData[n]=e[1])})},t.prototype.getStackIndicator=function(t,e,i,n){return!yo(t)||t.x!==e||n&&t.key!==n?t={x:e,index:0,key:n}:t.index++,t.key=[i,e,t.index].join(","),t},ko=d.addEvent,To=d.animate,Ao=d.Axis,h=d.Chart,Co=d.createElement,So=d.css,Mo=d.defined,Eo=d.each,Po=d.erase,jo=d.extend,Lo=d.fireEvent,_o=d.inArray,Io=d.isNumber,Oo=d.isObject,Do=d.merge,Ro=d.pick,u=d.Point,a=d.Series,No=d.seriesTypes,qo=d.setAnimation,zo=d.splat,jo(h.prototype,{addSeries:function(t,e,i){var n,o=this;return t&&(e=Ro(e,!0),Lo(o,"addSeries",{options:t},function(){n=o.initSeries(t),o.isDirtyLegend=!0,o.linkSeries(),e&&o.redraw(i)})),n},addAxis:function(t,e,i,n){var o=e?"xAxis":"yAxis",r=this.options,t=Do(t,{index:this[o].length,isX:e});new Ao(this,t),r[o]=zo(r[o]||{}),r[o].push(t),Ro(i,!0)&&this.redraw(n)},showLoading:function(t){function e(){o&&So(o,{left:i.plotLeft+"px",top:i.plotTop+"px",width:i.plotWidth+"px",height:i.plotHeight+"px"})}var i=this,n=i.options,o=i.loadingDiv,r=n.loading;o||(i.loadingDiv=o=Co("div",{className:"highcharts-loading highcharts-loading-hidden"},null,i.container),i.loadingSpan=Co("span",{className:"highcharts-loading-inner"},null,o),ko(i,"redraw",e)),o.className="highcharts-loading",i.loadingSpan.innerHTML=t||n.lang.loading,So(o,jo(r.style,{zIndex:10})),So(i.loadingSpan,r.labelStyle),i.loadingShown||(So(o,{opacity:0,display:""}),To(o,{opacity:r.style.opacity||.5},{duration:r.showDuration||0})),i.loadingShown=!0,e()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",To(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){So(e,{display:"none"})}})),this.loadingShown=!1},propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions"],update:function(t,e){var i,n,o,r,s={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},a=t.chart;if(a){for(i in Do(!0,this.options.chart,a),"className"in a&&this.setClassName(a.className),("inverted"in a||"polar"in a)&&(this.propFromSeries(),o=!0),a)a.hasOwnProperty(i)&&(-1!==_o("chart."+i,this.propsRequireUpdateSeries)&&(n=!0),-1!==_o(i,this.propsRequireDirtyBox)&&(this.isDirtyBox=!0));"style"in a&&this.renderer.setStyle(a.style)}for(i in t)this[i]&&"function"==typeof this[i].update?this[i].update(t[i],!1):"function"==typeof this[s[i]]&&this[s[i]](t[i]),"chart"!==i&&-1!==_o(i,this.propsRequireUpdateSeries)&&(n=!0);t.colors&&(this.options.colors=t.colors),t.plotOptions&&Do(!0,this.options.plotOptions,t.plotOptions),Eo(["xAxis","yAxis","series"],function(i){t[i]&&Eo(zo(t[i]),function(t,e){e=Mo(t.id)&&this.get(t.id)||this[i][e];e&&e.coll===i&&e.update(t,!1)},this)},this),o&&Eo(this.axes,function(t){t.update({},!1)}),n&&Eo(this.series,function(t){t.update({},!1)}),t.loading&&Do(!0,this.options.loading,t.loading),o=a&&a.width,r=a&&a.height,Io(o)&&o!==this.chartWidth||Io(r)&&r!==this.chartHeight?this.setSize(o,r):Ro(e,!0)&&this.redraw()},setSubtitle:function(t){this.setTitle(void 0,t)}}),jo(u.prototype,{update:function(t,e,i,n){var o,r=this,s=r.series,a=r.graphic,l=s.chart,c=s.options;function u(){r.applyOptions(t),null===r.y&&a&&(r.graphic=a.destroy()),Oo(t,!0)&&(a&&a.element&&t&&t.marker&&t.marker.symbol&&(r.graphic=a.destroy()),t&&t.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy())),o=r.index,s.updateParallelArrays(r,o),c.data[o]=Oo(c.data[o],!0)||Oo(t,!0)?r.options:t,s.isDirty=s.isDirtyData=!0,!s.fixedBox&&s.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(i)}e=Ro(e,!0),!1===n?u():r.firePointEvent("update",{options:t},u)},remove:function(t,e){this.series.removePoint(_o(this,this.series.data),t,e)}}),jo(a.prototype,{addPoint:function(t,e,i,n){var o,r,s,a,l=this,c=l.options,u=l.data,h=l.chart,d=l.xAxis,d=d&&d.hasNames&&d.names,p=c.data,f=l.xData;if(e=Ro(e,!0),l.pointClass.prototype.applyOptions.apply(o={series:l},[t]),a=o.x,s=f.length,l.requireSorting&&a<f[s-1])for(r=!0;s&&f[s-1]>a;)s--;l.updateParallelArrays(o,"splice",s,0,0),l.updateParallelArrays(o,s),d&&o.name&&(d[a]=o.name),p.splice(s,0,t),r&&(l.data.splice(s,0,null),l.processData()),"point"===c.legendType&&l.generatePoints(),i&&(u[0]&&u[0].remove?u[0].remove(!1):(u.shift(),l.updateParallelArrays(o,"shift"),p.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&h.redraw(n)},removePoint:function(t,e,i){function n(){a&&a.length===r.length&&a.splice(t,1),r.splice(t,1),o.options.data.splice(t,1),o.updateParallelArrays(s||{series:o},"splice",t,1),s&&s.destroy(),o.isDirty=!0,o.isDirtyData=!0,e&&l.redraw()}var o=this,r=o.data,s=r[t],a=o.points,l=o.chart;qo(i,l),e=Ro(e,!0),s?s.firePointEvent("remove",null,n):n()},remove:function(t,e,i){var n=this,o=n.chart;function r(){n.destroy(),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(),Ro(t,!0)&&o.redraw(e)}!1!==i?Lo(n,"remove",null,r):r()},update:function(t,e){var i,n=this,o=this.chart,r=this.userOptions,s=this.oldType||this.type,a=t.type||r.type||o.options.chart.type,l=No[s].prototype,c=["group","markerGroup","dataLabelsGroup"];for(i in(a&&a!==s||void 0!==t.zIndex)&&(c.length=0),Eo(c,function(t){c[t]=n[t],delete n[t]}),t=Do(r,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1,null,!1),l)this[i]=void 0;jo(this,No[a||s].prototype),Eo(c,function(t){n[t]=c[t]}),this.init(o,t),this.oldType=s,o.linkSeries(),Ro(e,!0)&&o.redraw(!1)}}),jo(Ao.prototype,{update:function(t,e){var i=this.chart;t=i.options[this.coll][this.options.index]=Do(this.userOptions,t),this.destroy(!0),this.init(i,jo(t,{events:void 0})),i.isDirtyBox=!0,Ro(e,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,o=n.length;o--;)n[o]&&n[o].remove(!1);Po(e.axes,this),Po(e[i],this),e.options[i].splice(this.options.index,1),Eo(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,Ro(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}}),Ho=d.color,$o=d.each,s=d.LegendSymbolMixin,Bo=d.map,Fo=d.pick,Wo=d.Series,(0,d.seriesType)("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(){var c,u,t,e=[],h=[],i=this.xAxis,n=this.yAxis,d=n.stacks[this.stackKey],p={},o=this.points,f=this.index,r=n.series,g=r.length,m=Fo(n.options.reversedStacks,!0)?1:-1;if(this.options.stacking){for(u=0;u<o.length;u++)p[o[u].x]=o[u];for(t in d)null!==d[t].total&&h.push(t);h.sort(function(t,e){return t-e}),c=Bo(r,function(){return this.visible}),$o(h,function(r,s){var a,l,t=0;if(p[r]&&!p[r].isNull)e.push(p[r]),$o([-1,1],function(t){var e=1===t?"rightNull":"leftNull",i=1===t?"rightCliff":"leftCliff",n=0,o=d[h[s+t]];if(o)for(u=f;0<=u&&u<g;)(a=o.points[u])||(u===f?p[r][e]=!0:c[u]&&(l=d[r].points[u])&&(n-=l[1]-l[0])),u+=m;p[r][i]=n});else{for(u=f;0<=u&&u<g;){if(a=d[r].points[u]){t=a[1];break}u+=m}t=n.translate(t,0,1,0,1),e.push({isNull:!0,plotX:i.translate(r,0,0,0,1),x:r,plotY:t,yBottom:t})}})}return e},getGraphPath:function(a){function t(t,e,i){var n,o,t=a[t],r=c&&f[t.x].points[p],s=t[i+"Null"]||0,t=t[i+"Cliff"]||0,i=!0;t||s?(n=(s?r[0]:r[1])+t,o=r[0]+t,i=!!s):!c&&a[e]&&a[e].isNull&&(n=o=g),void 0!==n&&(d.push({plotX:l,plotY:null===n?m:u.getThreshold(n),isNull:i,isCliff:!0}),h.push({plotX:l,plotY:null===o?m:u.getThreshold(o),doCurve:!1}))}var e,i,l,n,o,r=Wo.prototype.getGraphPath,s=this.options,c=s.stacking,u=this.yAxis,h=[],d=[],p=this.index,f=u.stacks[this.stackKey],g=s.threshold,m=u.getThreshold(s.threshold),y=s.connectNulls||"percent"===c;for(a=a||this.points,c&&(a=this.getStackPoints()),e=0;e<a.length;e++)n=a[e].isNull,l=Fo(a[e].rectPlotX,a[e].plotX),o=Fo(a[e].yBottom,m),n&&!y||(y||t(e,e-1,"left"),n&&!c&&y||(d.push(a[e]),h.push({x:e,plotX:l,plotY:o})),y||t(e,e+1,"right"));return s=r.call(this,d,!0,!0),h.reversed=!0,(i=r.call(this,h,!0,!0)).length&&(i[0]="L"),i=s.concat(i),r=r.call(this,d,!1,y),i.xMap=s.xMap,this.areaPath=i,r},drawGraph:function(){this.areaPath=[],Wo.prototype.drawGraph.apply(this);var n=this,o=this.areaPath,r=this.options,t=this.zones,i=[["area","highcharts-area",this.color,r.fillColor]];$o(t,function(t,e){i.push(["zone-area-"+e,"highcharts-area highcharts-zone-area-"+e+" "+t.className,t.color||n.color,t.fillColor||r.fillColor])}),$o(i,function(t){var e=t[0],i=n[e];i?(i.endX=o.xMap,i.animate({d:o})):(i=n[e]=n.chart.renderer.path(o).addClass(t[1]).attr({fill:Fo(t[3],Ho(t[2]).setOpacity(Fo(r.fillOpacity,.75)).get()),zIndex:0}).add(n.group)).isArea=!0,i.startX=o.xMap,i.shiftUnit=r.step?2:1})},drawLegendSymbol:s.drawRectangle}),Go=d.pick,(0,d.seriesType)("spline","line",{},{getPointSpline:function(t,e,i){var n,o,r,s,a,l,c=e.plotX,u=e.plotY,h=t[i-1],t=t[i+1];function d(t){return t&&!t.isNull&&!1!==t.doCurve&&!e.isCliff}return d(h)&&d(t)&&(i=h.plotX,n=h.plotY,a=t.plotX,o=0,s=(1.5*u+n)/2.5,l=(1.5*u+(t=t.plotY))/2.5,l+=o=(a=(1.5*c+a)/2.5)!==(r=(1.5*c+i)/2.5)?(l-s)*(a-c)/(a-r)+u-l:o,n<(s+=o)&&u<s?l=2*u-(s=Math.max(n,u)):s<n&&s<u&&(l=2*u-(s=Math.min(n,u))),t<l&&u<l?s=2*u-(l=Math.max(t,u)):l<t&&l<u&&(s=2*u-(l=Math.min(t,u))),e.rightContX=a,e.rightContY=l),i=["C",Go(h.rightContX,h.plotX),Go(h.rightContY,h.plotY),Go(r,c),Go(s,u),c,u],h.rightContX=h.rightContY=null,i}}),o=d.seriesTypes.area.prototype,l=d.defaultPlotOptions,r=d.LegendSymbolMixin,(0,d.seriesType)("areaspline","spline",l.area,{getStackPoints:o.getStackPoints,getGraphPath:o.getGraphPath,setStackCliffs:o.setStackCliffs,drawGraph:o.drawGraph,drawLegendSymbol:r.drawRectangle}),Uo=d.animObject,Vo=d.color,Xo=d.each,Yo=d.extend,Qo=d.isNumber,t=d.LegendSymbolMixin,Ko=d.merge,h=d.noop,Jo=d.pick,Zo=d.Series,u=d.seriesType,tr=d.svg,u("column","line",{borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1,shadow:!1},select:{color:"#cccccc",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Zo.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&Xo(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var o,r=this,t=r.options,e=r.xAxis,s=r.yAxis,i=e.reversed,a={},l=0,n=(!1===t.grouping?l=1:Xo(r.chart.series,function(t){var e,i=t.options,n=t.yAxis;t.type===r.type&&t.visible&&s.len===n.len&&s.pos===n.pos&&(i.stacking?(o=t.stackKey,void 0===a[o]&&(a[o]=l++),e=a[o]):!1!==i.grouping&&(e=l++),t.columnIndex=e)}),Math.min(Math.abs(e.transA)*(e.ordinalSlope||t.pointRange||e.closestPointRange||e.tickInterval||1),e.len)),c=n*t.groupPadding,u=(n-2*c)/(l||1),e=Math.min(t.maxPointWidth||e.len,Jo(t.pointWidth,u*(1-2*t.pointPadding))),t=(r.columnIndex||0)+(i?1:0);return r.columnMetrics={width:e,offset:(u-e)/2+(c+t*u-n/2)*(i?-1:1)},r.columnMetrics},crispCol:function(t,e,i,n){var o=this.chart,r=this.borderWidth,s=-(r%2?.5:0),r=r%2?.5:1;return o.inverted&&o.renderer.isVML&&(r+=1),i=Math.round(t+i)+s-(t=Math.round(t)+s),o=Math.round(e+n)+r,s=Math.abs(e)<=.5&&.5<o,n=o-(e=Math.round(e)+r),s&&n&&(--e,n+=1),{x:t,y:e,width:i,height:n}},translate:function(){var l=this,c=l.chart,t=l.options,e=l.dense=l.closestPointRange*l.xAxis.transA<2,e=l.borderWidth=Jo(t.borderWidth,e?0:1),u=l.yAxis,i=t.threshold,h=l.translatedThreshold=u.getThreshold(i),d=Jo(t.minPointLength,5),i=l.getColumnMetrics(),p=i.width,f=l.barW=Math.max(p,1+2*e),g=l.pointXOffset=i.offset;c.inverted&&(h-=.5),t.pointPadding&&(f=Math.ceil(f)),Zo.prototype.translate.apply(l),Xo(l.points,function(t){var e,i=Jo(t.yBottom,h),n=999+Math.abs(i),n=Math.min(Math.max(-n,t.plotY),u.len+n),o=t.plotX+g,r=f,s=Math.min(n,i),a=Math.max(n,i)-s;Math.abs(a)<d&&d&&(a=d,e=!u.reversed&&!t.negative||u.reversed&&t.negative,s=Math.abs(s-h)>d?i-d:h-(e?d:0)),t.barX=o,t.pointWidth=p,t.tooltipPos=c.inverted?[u.len+u.pos-c.plotLeft-n,l.xAxis.len-o-r/2,a]:[o+r/2,n+u.pos-c.plotTop,a],t.shapeType="rect",t.shapeArgs=l.crispCol.apply(l,t.isNull?[t.plotX,u.len/2,0,0]:[o,s,r,a])})},getSymbol:h,drawLegendSymbol:t.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(t,e){var i,n=this.options,o=this.pointAttrToOptions||{},r=o.stroke||"borderColor",o=o["stroke-width"]||"borderWidth",s=t&&t.color||this.color,a=t[r]||n[r]||this.color||s,l=t[o]||n[o]||this[o]||0,c=n.dashStyle;return t&&this.zones.length&&(s=(i=t.getZone())&&i.color||t.options.color||this.color),e&&(t=(i=Ko(n.states[e],t.options.states&&t.options.states[e]||{})).brightness,s=i.color||void 0!==t&&Vo(s).brighten(i.brightness).get()||s,a=i[r]||a,l=i[o]||l,c=i.dashStyle||c),e={fill:s,stroke:a,"stroke-width":l},n.borderRadius&&(e.r=n.borderRadius),c&&(e.dashstyle=c),e},drawPoints:function(){var n,o=this,r=this.chart,s=o.options,a=r.renderer,l=s.animationLimit||250;Xo(o.points,function(t){var e=t.plotY,i=t.graphic;Qo(e)&&null!==t.y?(n=t.shapeArgs,i?i[r.pointCount<l?"animate":"attr"](Ko(n)):t.graphic=i=a[t.shapeType](n).add(t.group||o.group),i.attr(o.pointAttribs(t,t.selected&&"select")).shadow(s.shadow,null,s.stacking&&!s.borderRadius),i.addClass(t.getClassName(),!0)):i&&(t.graphic=i.destroy())})},animate:function(t){var i=this,e=this.yAxis,n=i.options,o=this.chart.inverted,r={};tr&&(t?(r.scaleY=.001,t=Math.min(e.pos+e.len,Math.max(e.pos,e.toPixels(n.threshold))),o?r.translateX=t-e.len:r.translateY=t,i.group.attr(r)):(r[o?"translateX":"translateY"]=e.pos,i.group.animate(r,Yo(Uo(i.options.animation),{step:function(t,e){i.group.attr({scaleY:Math.max(.001,e.pos)})}})),i.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&Xo(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Zo.prototype.remove.apply(e,arguments)}}),(0,d.seriesType)("bar","column",null,{inverted:!0}),er=d.Series,(0,d.seriesType)("scatter","line",{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.85em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&er.prototype.drawGraph.call(this)}}),ir=d.pick,nr=d.relativeLength,d.CenteredSeriesMixin={getCenter:function(){for(var t,e,i=this.options,n=this.chart,o=2*(i.slicedOffset||0),r=n.plotWidth-2*o,s=n.plotHeight-2*o,n=i.center,a=[ir(n[0],"50%"),ir(n[1],"50%"),i.size||"100%",i.innerSize||0],l=Math.min(r,s),c=0;c<4;++c)e=a[c],t=c<2||2===c&&/%$/.test(e),a[c]=nr(e,[r,s,l,a[2]][c])+(t?o:0);return a[3]>a[2]&&(a[3]=a[2]),a}},or=d.addEvent,a=d.CenteredSeriesMixin,rr=d.defined,sr=d.each,ar=d.extend,lr=d.inArray,s=d.LegendSymbolMixin,l=d.noop,cr=d.pick,ur=d.Point,hr=d.Series,o=d.seriesType,r=d.seriesTypes,dr=d.setAnimation,o("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:.1,shadow:!1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:r.column.prototype.pointAttribs,animate:function(t){var n=this,e=n.points,o=n.startAngleRad;t||(sr(e,function(t){var e=t.graphic,i=t.shapeArgs;e&&(e.attr({r:t.startR||n.center[3]/2,start:o,end:o}),e.animate({r:i.r,start:i.start,end:i.end},n.options.animation))}),n.animate=null)},updateTotals:function(){for(var t,e=0,i=this.points,n=i.length,o=this.options.ignoreHiddenPoint,r=0;r<n;r++)(t=i[r]).y<0&&(t.y=null),e+=o&&!t.visible?0:t.y;for(this.total=e,r=0;r<n;r++)(t=i[r]).percentage=0<e&&(t.visible||!o)?t.y/e*100:0,t.total=e},generatePoints:function(){hr.prototype.generatePoints.call(this),this.updateTotals()},translate:function(i){this.generatePoints();var n,t,e,o,r,s=0,a=this.options,l=a.slicedOffset,c=l+(a.borderWidth||0),u=a.startAngle||0,h=this.startAngleRad=Math.PI/180*(u-90),d=(this.endAngleRad=Math.PI/180*(cr(a.endAngle,u+360)-90))-h,p=this.points,f=a.dataLabels.distance,g=a.ignoreHiddenPoint,m=p.length;for(i||(this.center=i=this.getCenter()),this.getX=function(t,e){return n=Math.asin(Math.min((t-i[1])/(i[2]/2+f),1)),i[0]+(e?-1:1)*(Math.cos(n)*(i[2]/2+f))},o=0;o<m;o++)r=p[o],e=h+s*d,g&&!r.visible||(s+=r.percentage/100),t=h+s*d,r.shapeType="arc",r.shapeArgs={x:i[0],y:i[1],r:i[2]/2,innerR:i[3]/2,start:Math.round(1e3*e)/1e3,end:Math.round(1e3*t)/1e3},(n=(t+e)/2)>1.5*Math.PI?n-=2*Math.PI:n<-Math.PI/2&&(n+=2*Math.PI),r.slicedTranslation={translateX:Math.round(Math.cos(n)*l),translateY:Math.round(Math.sin(n)*l)},t=Math.cos(n)*i[2]/2,e=Math.sin(n)*i[2]/2,r.tooltipPos=[i[0]+.7*t,i[1]+.7*e],r.half=n<-Math.PI/2||n>Math.PI/2?1:0,r.angle=n,c=Math.min(c,f/5),r.labelPos=[i[0]+t+Math.cos(n)*f,i[1]+e+Math.sin(n)*f,i[0]+t+Math.cos(n)*c,i[1]+e+Math.sin(n)*c,i[0]+t,i[1]+e,f<0?"center":r.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var i,n,o,r,s=this,a=s.chart.renderer,l=s.options.shadow;l&&!s.shadowGroup&&(s.shadowGroup=a.g("shadow").add(s.group)),sr(s.points,function(t){var e;null!==t.y&&(n=t.graphic,r=t.shapeArgs,i=t.getTranslate(),e=t.shadowGroup,(e=l&&!e?t.shadowGroup=a.g("shadow").add(s.shadowGroup):e)&&e.attr(i),o=s.pointAttribs(t,t.selected&&"select"),n?n.setRadialReference(s.center).attr(o).animate(ar(r,i)):(t.graphic=n=a[t.shapeType](r).setRadialReference(s.center).attr(i).add(s.group),t.visible||n.attr({visibility:"hidden"}),n.attr(o).attr({"stroke-linejoin":"round"}).shadow(l,e)),n.addClass(t.getClassName()))})},searchPoint:l,sortByAngle:function(t,i){t.sort(function(t,e){return void 0!==t.angle&&(e.angle-t.angle)*i})},drawLegendSymbol:s.drawRectangle,getCenter:a.getCenter,getSymbol:l},{init:function(){ur.prototype.init.apply(this,arguments);var t,e=this;return e.name=cr(e.name,"Slice"),or(e,"select",t=function(t){e.slice("select"===t.type)}),or(e,"unselect",t),e},setVisible:function(e,t){var i=this,n=i.series,o=n.chart,r=n.options.ignoreHiddenPoint;t=cr(t,r),e!==i.visible&&(i.visible=i.options.visible=e=void 0===e?!i.visible:e,n.options.data[lr(i,n.data)]=i.options,sr(["graphic","dataLabel","connector","shadowGroup"],function(t){i[t]&&i[t][e?"show":"hide"](!0)}),i.legendItem&&o.legend.colorizeItem(i,e),e||"hover"!==i.state||i.setState(""),r&&(n.isDirty=!0),t&&o.redraw())},slice:function(t,e,i){var n=this.series,o=n.chart;dr(i,o),e=cr(e,!0),this.sliced=this.options.sliced=t=rr(t)?t:!this.sliced,n.options.data[lr(this,n.data)]=this.options,this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),pr=(P=d).addEvent,fr=P.arrayMax,gr=P.defined,mr=P.each,yr=P.extend,vr=P.format,br=P.map,xr=P.merge,u=P.noop,D=P.pick,wr=P.relativeLength,kr=P.Series,h=P.seriesTypes,Tr=P.stableSort,P.distribute=function(t,e){var i,n,o,r=!0,s=t,a=[],l=0;function c(t,e){return t.target-e.target}for(i=t.length;i--;)l+=t[i].size;if(e<l){for(Tr(t,function(t,e){return(e.rank||0)-(t.rank||0)}),l=i=0;l<=e;)l+=t[i].size,i++;a=t.splice(i-1,t.length)}for(Tr(t,c),t=br(t,function(t){return{size:t.size,targets:[t.target]}});r;){for(i=t.length;i--;)n=t[i],o=(Math.min.apply(0,n.targets)+Math.max.apply(0,n.targets))/2,n.pos=Math.min(Math.max(0,o-n.size/2),e-n.size);for(i=t.length,r=!1;i--;)0<i&&t[i-1].pos+t[i-1].size>t[i].pos&&(t[i-1].size+=t[i].size,t[i-1].targets=t[i-1].targets.concat(t[i].targets),t[i-1].pos+t[i-1].size>e&&(t[i-1].pos=e-t[i-1].size),t.splice(i,1),r=!0)}i=0,mr(t,function(t){var e=0;mr(t.targets,function(){s[i].pos=t.pos+e,e+=s[i].size,i++})}),s.push.apply(s,a),Tr(s,c)},kr.prototype.drawDataLabels=function(){var c,u,h,d,p=this,f=p.options,g=f.dataLabels,t=p.points,e=p.hasRendered||0,i=D(g.defer,!0),m=p.chart.renderer;(g.enabled||p._hasPointLabels)&&(p.dlProcessOptions&&p.dlProcessOptions(g),d=p.plotGroup("dataLabelsGroup","data-labels",i&&!e?"hidden":"visible",g.zIndex||6),i&&(d.attr({opacity:+e}),e||pr(p,"afterAnimate",function(){p.visible&&d.show(!0),d[f.animation?"animate":"attr"]({opacity:1},{duration:200})})),u=g,mr(t,function(t){var e,i,n,o,r,s=t.dataLabel,a=t.connector,l=!s;if(c=t.dlOptions||t.options&&t.options.dataLabels,e=D(c&&c.enabled,u.enabled)&&null!==t.y)for(n in g=xr(u,c),r=t.getLabelConfig(),h=g.format?vr(g.format,r):g.formatter.call(r,g),r=g.style,o=g.rotation,r.color=D(g.color,r.color,p.color,"#000000"),"contrast"===r.color&&(r.color=g.inside||g.distance<0||f.stacking?m.getContrast(t.color||p.color):"#000000"),f.cursor&&(r.cursor=f.cursor),i={fill:g.backgroundColor,stroke:g.borderColor,"stroke-width":g.borderWidth,r:g.borderRadius||0,rotation:o,padding:g.padding,zIndex:1})void 0===i[n]&&delete i[n];!s||e&&gr(h)?e&&gr(h)&&(s?i.text=h:(s=t.dataLabel=m[o?"text":"label"](h,0,-9999,g.shape,null,null,g.useHTML,null,"data-label")).addClass("highcharts-data-label-color-"+t.colorIndex+" "+(g.className||"")+(g.useHTML?"highcharts-tracker":"")),s.attr(i),s.css(r).shadow(g.shadow),s.added||s.add(d),p.alignDataLabel(t,s,g,null,l)):(t.dataLabel=s=s.destroy(),a&&(t.connector=a.destroy()))}))},kr.prototype.alignDataLabel=function(t,e,i,n,o){var r,s,a=this.chart,l=a.inverted,c=D(t.plotX,-9999),u=D(t.plotY,-9999),h=e.getBBox(),d=i.rotation,p=i.align,f=this.visible&&(t.series.forceDL||a.isInsidePlot(c,Math.round(u),l)||n&&a.isInsidePlot(c,l?n.x+1:n.y+n.height-1,l)),g="justify"===D(i.overflow,"justify");f&&(r=i.style.fontSize,r=a.renderer.fontMetrics(r,e).b,n=yr({x:l?a.plotWidth-u:c,y:Math.round(l?a.plotHeight-c:u),width:0,height:0},n),yr(i,{width:h.width,height:h.height}),d?(g=!1,l=a.renderer.rotCorr(r,d),s={x:n.x+i.x+n.width/2+l.x,y:n.y+i.y+{top:0,middle:.5,bottom:1}[i.verticalAlign]*n.height},e[o?"attr":"animate"](s).attr({align:p}),u=180<(c=(d+720)%360)&&c<360,"left"===p?s.y-=u?h.height:0:"center"===p?(s.x-=h.width/2,s.y-=h.height/2):"right"===p&&(s.x-=h.width,s.y-=u?0:h.height)):(e.align(i,null,n),s=e.alignAttr),g?this.justifyDataLabel(e,i,s,h,n,o):D(i.crop,!0)&&(f=a.isInsidePlot(s.x,s.y)&&a.isInsidePlot(s.x+h.width,s.y+h.height)),i.shape&&!d&&e.attr({anchorX:t.plotX,anchorY:t.plotY})),f||(e.attr({y:-9999}),e.placed=!1)},kr.prototype.justifyDataLabel=function(t,e,i,n,o,r){var s,a=this.chart,l=e.align,c=e.verticalAlign,u=!t.box&&t.padding||0,h=i.x+u;h<0&&("right"===l?e.align="left":e.x=-h,s=!0),(h=i.x+n.width-u)>a.plotWidth&&("left"===l?e.align="right":e.x=a.plotWidth-h,s=!0),(h=i.y+u)<0&&("bottom"===c?e.verticalAlign="top":e.y=-h,s=!0),(h=i.y+n.height-u)>a.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=a.plotHeight-h,s=!0),s&&(t.placed=!r,t.align(e,null,o))},h.pie&&(h.pie.prototype.drawDataLabels=function(){var i,l,c,u,h,d,p,f,g=this,t=g.data,m=g.chart,y=g.options.dataLabels,v=D(y.connectorPadding,10),n=D(y.connectorWidth,1),b=m.plotWidth,x=m.plotHeight,w=y.distance,k=g.center,T=k[2]/2,A=k[1],e=0<w,o=[[],[]],C=[0,0,0,0];g.visible&&(y.enabled||g._hasPointLabels)&&(mr(t,function(t){t.dataLabel&&t.visible&&t.dataLabel.shortened&&(t.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.dataLabel.shortened=!1)}),kr.prototype.drawDataLabels.apply(g),mr(t,function(t){t.dataLabel&&t.visible&&(o[t.half].push(t),t.dataLabel._pos=null)}),mr(o,function(t,e){var i,n,o,r,s,a=t.length;if(a)for(g.sortByAngle(t,e-.5),0<w&&(i=Math.max(0,A-T-w),n=Math.min(A+T+w,m.plotHeight),o=br(t,function(t){if(t.dataLabel)return s=t.dataLabel.getBBox().height||21,{target:t.labelPos[1]-i+s/2,size:s,rank:t.y}}),P.distribute(o,n+s-i)),f=0;f<a;f++)h=t[f],c=h.labelPos,l=h.dataLabel,p=!1===h.visible?"hidden":"inherit",r=c[1],o?void 0===o[f].pos?p="hidden":(u=o[f].size,d=i+o[f].pos):d=r,h=y.justify?k[0]+(e?-1:1)*(T+w):g.getX(d<i+2||n-2<d?r:d,e),l._attr={visibility:p,align:c[6]},l._pos={x:h+y.x+({left:v,right:-v}[c[6]]||0),y:d+y.y-10},c.x=h,c.y=d,null===g.options.size&&(c=l.getBBox().width,r=null,h-c<v?(r=Math.round(c-h+v),C[3]=Math.max(r,C[3])):b-v<h+c&&(r=Math.round(h+c-b+v),C[1]=Math.max(r,C[1])),d-u/2<0?C[0]=Math.max(Math.round(u/2-d),C[0]):x<d+u/2&&(C[2]=Math.max(Math.round(d+u/2-x),C[2])),l.sideOverflow=r)}),0!==fr(C)&&!this.verifyDataLabelOverflow(C)||(this.placeDataLabels(),e&&n&&mr(this.points,function(t){var e;i=t.connector,(l=t.dataLabel)&&l._pos&&t.visible?(p=l._attr.visibility,(e=!i)&&(t.connector=i=m.renderer.path().addClass("highcharts-data-label-connector highcharts-color-"+t.colorIndex).add(g.dataLabelsGroup),i.attr({"stroke-width":n,stroke:y.connectorColor||t.color||"#666666"})),i[e?"attr":"animate"]({d:g.connectorPath(t.labelPos)}),i.attr("visibility",p)):i&&(t.connector=i.destroy())})))},h.pie.prototype.connectorPath=function(t){var e=t.x,i=t.y;return D(this.options.dataLabels.softConnector,!0)?["M",e+("left"===t[6]?5:-5),i,"C",e,i,2*t[2]-t[4],2*t[3]-t[5],t[2],t[3],"L",t[4],t[5]]:["M",e+("left"===t[6]?5:-5),i,"L",t[2],t[3],"L",t[4],t[5]]},h.pie.prototype.placeDataLabels=function(){mr(this.points,function(t){var e=t.dataLabel;e&&t.visible&&((t=e._pos)?(e.sideOverflow&&(e._attr.width=e.getBBox().width-e.sideOverflow,e.css({width:e._attr.width+"px",textOverflow:"ellipsis"}),e.shortened=!0),e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-9999}))},this)},h.pie.prototype.alignDataLabel=u,h.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,o=n.center,r=n.minSize||80,s=r;return null!==o[0]?s=Math.max(i[2]-Math.max(t[1],t[3]),r):(s=Math.max(i[2]-t[1]-t[3],r),i[0]+=(t[3]-t[1])/2),null!==o[1]?s=Math.max(Math.min(s,i[2]-Math.max(t[0],t[2])),r):(s=Math.max(Math.min(s,i[2]-t[0]-t[2]),r),i[1]+=(t[0]-t[2])/2),s<i[2]?(i[2]=s,i[3]=Math.min(wr(n.innerSize||0,s),s),this.translate(i),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),h.column&&(h.column.prototype.alignDataLabel=function(t,e,i,n,o){var r=this.chart.inverted,s=t.series,a=t.dlBox||t.shapeArgs,l=D(t.below,t.plotY>D(this.translatedThreshold,s.yAxis.len)),c=D(i.inside,!!this.options.stacking);a&&((n=xr(a)).y<0&&(n.height+=n.y,n.y=0),0<(a=n.y+n.height-s.yAxis.len)&&(n.height-=a),r&&(n={x:s.yAxis.len-n.y-n.height,y:s.xAxis.len-n.x-n.width,width:n.height,height:n.width}),c||(r?(n.x+=l?0:n.width,n.width=0):(n.y+=l?n.height:0,n.height=0))),i.align=D(i.align,!r||c?"center":l?"right":"left"),i.verticalAlign=D(i.verticalAlign,r||c?"middle":l?"top":"bottom"),kr.prototype.alignDataLabel.call(this,t,e,i,n,o)}),t=d.Chart,Ar=d.each,Cr=d.pick,Sr=d.addEvent,t.prototype.callbacks.push(function(t){function e(){var n=[];Ar(t.series||[],function(t){var e=t.options.dataLabels,i=t.dataLabelCollections||["dataLabel"];(e.enabled||t._hasPointLabels)&&!e.allowOverlap&&t.visible&&Ar(i,function(e){Ar(t.points,function(t){t[e]&&(t[e].labelrank=Cr(t.labelrank,t.shapeArgs&&t.shapeArgs.height),n.push(t[e]))})})}),t.hideOverlappingLabels(n)}e(),Sr(t,"redraw",e)}),t.prototype.hideOverlappingLabels=function(t){for(var e,i,n,o,r,s,a,l,c,u,h,d,p=t.length,f=0;f<p;f++)(e=t[f])&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),f=0;f<p;f++)for(n=t[f],i=f+1;i<p;++i)o=t[i],n&&o&&n.placed&&o.placed&&0!==n.newOpacity&&0!==o.newOpacity&&(s=n.alignAttr,u=o.alignAttr,a=n.parentGroup,h=o.parentGroup,d=2*(n.box?0:n.padding),r=s.x+a.translateX,s=s.y+a.translateY,a=n.width-d,l=n.height-d,c=u.x+h.translateX,u=u.y+h.translateY,h=o.width-d,d=o.height-d,!(r+a<c||c+h<r||s+l<u||u+d<s)&&((n.labelrank<o.labelrank?n:o).newOpacity=0));Ar(t,function(t){var e,i;t&&(i=t.newOpacity,t.oldOpacity!==i&&t.placed&&(i?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=i,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})},Mr=(o=d).addEvent,r=o.Chart,Er=o.createElement,Pr=o.css,jr=o.defaultOptions,Lr=o.defaultPlotOptions,g=o.each,_r=o.extend,Ir=o.fireEvent,Or=o.hasTouch,Dr=o.inArray,Rr=o.isObject,s=o.Legend,Nr=o.merge,qr=o.pick,a=o.Point,l=o.Series,u=o.seriesTypes,zr=o.svg,o=o.TrackerMixin={drawTrackerPoint:function(){function e(t){var e=n.getPointFromEvent(t);void 0!==e&&e.onMouseOver(t)}var i=this,n=i.chart.pointer;g(i.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.div?t.dataLabel.div.point=t:t.dataLabel.element.point=t)}),i._hasTracking||(g(i.trackerGroups,function(t){i[t]&&(i[t].addClass("highcharts-tracker").on("mouseover",e).on("mouseout",function(t){n.onTrackerMouseOut(t)}),Or&&i[t].on("touchstart",e),i.options.cursor&&i[t].css(Pr).css({cursor:i.options.cursor}))}),i._hasTracking=!0)},drawTrackerGraph:function(){function e(){a.hoverSeries!==i&&i.onMouseOver()}var t,i=this,n=i.options,o=n.trackByArea,r=[].concat(o?i.areaPath:i.graphPath),s=r.length,a=i.chart,l=a.pointer,c=a.renderer,u=a.options.tooltip.snap,h=i.tracker,d="rgba(192,192,192,"+(zr?1e-4:.002)+")";if(s&&!o)for(t=s+1;t--;)"M"===r[t]&&r.splice(t+1,0,r[t+1]-u,r[t+2],"L"),(t&&"M"===r[t]||t===s)&&r.splice(t,0,"L",r[t-2]+u,r[t-1]);h?h.attr({d:r}):i.graph&&(i.tracker=c.path(r).attr({"stroke-linejoin":"round",visibility:i.visible?"visible":"hidden",stroke:d,fill:o?d:"none","stroke-width":i.graph.strokeWidth()+(o?0:2*u),zIndex:2}).add(i.group),g([i.tracker,i.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",e).on("mouseout",function(t){l.onTrackerMouseOut(t)}),n.cursor&&t.css({cursor:n.cursor}),Or&&t.on("touchstart",e)}))}},u.column&&(u.column.prototype.drawTracker=o.drawTrackerPoint),u.pie&&(u.pie.prototype.drawTracker=o.drawTrackerPoint),u.scatter&&(u.scatter.prototype.drawTracker=o.drawTrackerPoint),_r(s.prototype,{setItemEvents:function(n,t,e){var i=this,o=i.chart.renderer.boxWrapper,r="highcharts-legend-"+(n.series?"point":"series")+"-active";(e?t:n.legendGroup).on("mouseover",function(){n.setState("hover"),o.addClass(r),t.css(i.options.itemHoverStyle)}).on("mouseout",function(){t.css(n.visible?i.itemStyle:i.itemHiddenStyle),o.removeClass(r),n.setState()}).on("click",function(t){function e(){n.setVisible&&n.setVisible()}var i="legendItemClick";t={browserEvent:t},n.firePointEvent?n.firePointEvent(i,t,e):Ir(n,i,t,e)})},createCheckboxForItem:function(e){e.checkbox=Er("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),Mr(e.checkbox,"click",function(t){t=t.target;Ir(e.series||e,"checkboxClick",{checked:t.checked,item:e},function(){e.select()})})}}),jr.legend.itemStyle.cursor="pointer",_r(r.prototype,{showResetZoom:function(){var t=this,e=jr.lang,i=t.options.chart.resetZoomButton,n=i.theme,o=n.states,r="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,o&&o.hover).attr({align:i.position.align,title:e.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,r)},zoomOut:function(){var t=this;Ir(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var n,e,o=this.pointer,r=!1;!t||t.resetSelection?g(this.axes,function(t){n=t.zoom()}):g(t.xAxis.concat(t.yAxis),function(t){var e=t.axis,i=e.isXAxis;o[i?"zoomX":"zoomY"]&&(n=e.zoom(t.min,t.max),e.displayBtn&&(r=!0))}),e=this.resetZoomButton,r&&!e?this.showResetZoom():!r&&Rr(e)&&(this.resetZoomButton=e.destroy()),n&&this.redraw(qr(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(l,t){var c,u=this,e=u.hoverPoints;e&&g(e,function(t){t.setState()}),g("xy"===t?[1,0]:[1],function(t){var t=u[t?"xAxis":"yAxis"][0],e=t.horiz,i=l[e?"chartX":"chartY"],e=e?"mouseDownX":"mouseDownY",n=u[e],o=(t.pointRange||0)/2,r=t.getExtremes(),s=t.toValue(n-i,!0)+o,n=t.toValue(n+t.len-i,!0)-o,o=n<s,a=o?n:s,o=o?s:n,s=t.toValue(t.toPixels(r.min)-t.minPixelPadding),n=t.toValue(t.toPixels(r.max)+t.minPixelPadding),s=Math.min(r.dataMin,s)-a,r=o-Math.max(r.dataMax,n);t.series.length&&s<0&&r<0&&(t.setExtremes(a,o,!1,!1,{trigger:"pan"}),c=!0),u[e]=i}),c&&u.redraw(!1),Pr(u.container,{cursor:"move"})}}),_r(a.prototype,{select:function(t,e){var i=this,n=i.series,o=n.chart;t=qr(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[Dr(i,n.data)]=i.options,i.setState(t&&"select"),e||g(o.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[Dr(t,n.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series.chart.pointer;this.firePointEvent("mouseOver"),e.runPointActions(t,this)},onMouseOut:function(){var t=this.series.chart;this.firePointEvent("mouseOut"),g(t.hoverPoints||[],function(t){t.setState()}),t.hoverPoints=t.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var t,e=Nr(this.series.options.point,this.options).events;for(t in this.events=e)Mr(this,t,e[t]);this.hasImportedEvents=!0}},setState:function(t,e){var i,n=this,o=Math.floor(n.plotX),r=n.plotY,s=n.series,a=s.options.states[t]||{},l=Lr[s.type].marker&&s.options.marker,c=l&&!1===l.enabled,u=l&&l.states&&l.states[t]||{},h=!1===u.enabled,d=s.stateMarkerGraphic,p=n.marker||{},f=s.chart,g=s.halo,m=l&&s.markerAttribs;(t=t||"")===n.state&&!e||n.selected&&"select"!==t||!1===a.enabled||t&&(h||c&&!1===u.enabled)||t&&p.states&&p.states[t]&&!1===p.states[t].enabled||(m&&(i=s.markerAttribs(n,t)),n.graphic?(n.state&&n.graphic.removeClass("highcharts-point-"+n.state),t&&n.graphic.addClass("highcharts-point-"+t),n.graphic.attr(s.pointAttribs(n,t)),i&&n.graphic.animate(i,qr(f.options.chart.animation,u.animation,l.animation)),d&&d.hide()):(t&&u&&(h=p.symbol||s.symbol,(d=d&&d.currentSymbol!==h?d.destroy():d)?d[e?"animate":"attr"]({x:i.x,y:i.y}):h&&(s.stateMarkerGraphic=d=f.renderer.symbol(h,i.x,i.y,i.width,i.height).add(s.markerGroup),d.currentSymbol=h),d&&d.attr(s.pointAttribs(n,t))),d&&(d[t&&f.isInsidePlot(o,r,f.inverted)?"show":"hide"](),d.element.point=n)),(c=a.halo)&&c.size?(g||(s.halo=g=f.renderer.path().add(m?s.markerGroup:s.group)),g[e?"animate":"attr"]({d:n.haloPath(c.size)}),g.attr({class:"highcharts-halo highcharts-color-"+qr(n.colorIndex,s.colorIndex)}),g.point=n,g.attr(_r({fill:n.color||s.color,"fill-opacity":c.opacity,zIndex:-1},c.attributes))):g&&g.point&&g.point.haloPath&&g.animate({d:g.point.haloPath(0)}),n.state=t)},haloPath:function(t){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-t,this.plotY-t,2*t,2*t)}}),_r(l.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&Ir(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,i=e.tooltip,n=e.hoverPoint;e.hoverSeries=null,n&&n.onMouseOut(),this&&t.events.mouseOut&&Ir(this,"mouseOut"),!i||t.stickyTracking||i.shared&&!this.noSharedTooltip||i.hide(),this.setState()},setState:function(e){var t,i=this,n=i.options,o=i.graph,r=n.states,n=n.lineWidth,s=0;if(e=e||"",i.state!==e&&(g([i.group,i.markerGroup,i.dataLabelsGroup],function(t){t&&(i.state&&t.removeClass("highcharts-series-"+i.state),e&&t.addClass("highcharts-series-"+e))}),(!r[i.state=e]||!1!==r[e].enabled)&&(e&&(n=r[e].lineWidth||n+(r[e].lineWidthPlus||0)),o&&!o.dashstyle)))for(o.animate(t={"stroke-width":n},qr(i.chart.options.chart.animation,r[e]&&r[e].animation));i["zone-graph-"+s];)i["zone-graph-"+s].attr(t),s+=1},setVisible:function(e,t){var i,n=this,o=n.chart,r=n.legendItem,s=o.options.chart.ignoreHiddenSeries,a=n.visible;n.visible=e=n.options.visible=n.userOptions.visible=void 0===e?!a:e,i=e?"show":"hide",g(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(t){n[t]&&n[t][i]()}),o.hoverSeries!==n&&(o.hoverPoint&&o.hoverPoint.series)!==n||n.onMouseOut(),r&&o.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&g(o.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),g(n.linkedSeries,function(t){t.setVisible(e,!1)}),s&&(o.isDirtyBox=!0),!1!==t&&o.redraw(),Ir(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),Ir(this,t?"select":"unselect")},drawTracker:o.drawTrackerGraph}),h=(Hr=d).Chart,$r=Hr.each,Br=Hr.inArray,Fr=Hr.isArray,Wr=Hr.isObject,Gr=Hr.pick,Ur=Hr.splat,h.prototype.setResponsive=function(e){var t=this.options.responsive,i=[],n=this.currentResponsive,o=(t&&t.rules&&$r(t.rules,function(t){void 0===t._id&&(t._id=Hr.uniqueKey()),this.matchResponsiveRule(t,i,e)},this),Hr.merge.apply(0,Hr.map(i,function(e){return Hr.find(t.rules,function(t){return t._id===e}).chartOptions}))),i=i.toString()||void 0,r=n&&n.ruleIds;i!==r&&(n&&this.update(n.undoOptions,e),i?(this.currentResponsive={ruleIds:i,mergedOptions:o,undoOptions:this.currentOptions(o)},this.update(o,e)):this.currentResponsive=void 0)},h.prototype.matchResponsiveRule=function(t,e){var i=t.condition;(i.callback||function(){return this.chartWidth<=Gr(i.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=Gr(i.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=Gr(i.minWidth,0)&&this.chartHeight>=Gr(i.minHeight,0)}).call(this)&&e.push(t._id)},h.prototype.currentOptions=function(t){var e={};return function t(e,i,n,o){var r,s;for(r in e)if(!o&&-1<Br(r,["series","xAxis","yAxis"]))for(e[r]=Ur(e[r]),n[r]=[],s=0;s<e[r].length;s++)i[r][s]&&(n[r][s]={},t(e[r][s],i[r][s],n[r][s],o+1));else Wr(e[r])?(n[r]=Fr(e[r])?[]:{},t(e[r],i[r]||{},n[r],o+1)):n[r]=i[r]||null}(t,this.options,e,0),e},d},"object"==typeof module&&module.exports?module.exports=t.document?e():e:t.Highcharts=e(),i.Highcharts=Highcharts}.apply(i,arguments)})}(this),define("stats/tooltip",["require","jquery"],function(t){"use strict";function e(){}var i=t("jquery");return e.prototype.start=function(){this.$el=i("<div />").addClass("user-dashboard-tooltip").appendTo(document.body),this.hide()},e.prototype.stop=function(){this.$el.remove()},e.prototype.show=function(t,e,i){this.$el.html(i),this.$el.show(),this.move(t,e)},e.prototype.move=function(t,e){t={of:i.Event("mousemove",{pageX:t,pageY:e}),my:"left+10 top+10",collision:"flipfit",within:document.body};this.$el.position(t)},e.prototype.hide=function(){this.$el.hide()},e}),define("core/colours",["require"],function(t){"use strict";return{scarlet:"#B90000",postbox:"#D92323",persianRed:"#CF2B2B",tangerine:"#E63900",mandy:"#E95656",fire:"#FF6600",carrot:"#FF9900",merigold:"#FFBB00",sunflower:"#FFC900",pistachio:"#8FBF00",fern:"#009966",noCloudsSky:"#99D8FF",breazy:"#BFE7FF",turquoise:"#00AFBF",azure:"#0066FF",indigo:"#3636D9",mammmis:"#004b7A",racingBlue:"#0065A3",violet:"#9900FF",magenta:"#CC0099",mineshaft:"#222222",summerRose:"#F4AAAA",bubblyBuzz:"#E89696",dust:"#EEEEEE",cumulus:"#F3F3F3",platinum:"#F9F9F9"}}),!function(){"use strict";var h,e;function l(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||o(),this.isIntersecting=!!t.intersectionRect;var t=this.boundingClientRect,t=t.width*t.height,e=this.intersectionRect,e=e.width*e.height;this.intersectionRatio=t?Number((e/t).toFixed(4)):this.isIntersecting?1:0}function t(t,e){var i,n,o,e=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(e.root&&1!=e.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,o=null,function(){o=o||setTimeout(function(){i(),o=null},n)}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(e.rootMargin),this.thresholds=this._initThresholds(e.threshold),this.root=e.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(t,e,i,n){"function"==typeof t.addEventListener?t.addEventListener(e,i,n||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,i)}function n(t,e,i,n){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,n||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,i)}function d(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?e.width&&e.height?e:{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}:o()}function o(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(t,e){for(var i=e;i;){if(i==t)return!0;i=p(i)}return!1}function p(t){t=t.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}"object"==typeof window&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(h=window.document,e=[],t.prototype.THROTTLE_TIMEOUT=100,t.prototype.POLL_INTERVAL=null,t.prototype.USE_MUTATION_OBSERVER=!0,t.prototype.observe=function(e){var t=this._observationTargets.some(function(t){return t.element==e});if(!t){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},t.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},t.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},t.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},t.prototype._initThresholds=function(t){t=t||[0];return(t=Array.isArray(t)?t:[t]).sort().filter(function(t,e,i){if("number"!=typeof t||isNaN(t)||t<0||1<t)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==i[e-1]})},t.prototype._parseRootMargin=function(t){t=(t||"0px").split(/\s+/).map(function(t){t=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(t)return{value:parseFloat(t[1]),unit:t[2]};throw new Error("rootMargin must be specified in pixels or percent")});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},t.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(window,"resize",this._checkForIntersections,!0),i(h,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(h,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},t.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,n(window,"resize",this._checkForIntersections,!0),n(h,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},t.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),a=s?this._getRootRect():o();this._observationTargets.forEach(function(t){var e=t.element,i=d(e),n=this._rootContainsTarget(e),o=t.entry,r=s&&n&&this._computeTargetAndRootIntersection(e,a),t=t.entry=new l({time:window.performance&&performance.now&&performance.now(),target:e,boundingClientRect:i,rootBounds:a,intersectionRect:r});o?s&&n?this._hasCrossedThreshold(o,t)&&this._queuedEntries.push(t):o&&o.isIntersecting&&this._queuedEntries.push(t):this._queuedEntries.push(t)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},t.prototype._computeTargetAndRootIntersection=function(t,e){if("none"!=window.getComputedStyle(t).display){for(var i,n,o,r,s=d(t),a=p(t),l=!1;!l;){var c=null,u=1==a.nodeType?window.getComputedStyle(a):{};if("none"==u.display)return;if(a==this.root||a==h?(l=!0,c=e):a!=h.body&&a!=h.documentElement&&"visible"!=u.overflow&&(c=d(a)),c&&(u=c,c=s,r=o=n=i=void 0,i=Math.max(u.top,c.top),n=Math.min(u.bottom,c.bottom),o=Math.max(u.left,c.left),u=Math.min(u.right,c.right),r=n-i,!(s=0<=(c=u-o)&&0<=r&&{top:i,bottom:n,left:o,right:u,width:c,height:r})))break;a=p(a)}return s}},t.prototype._getRootRect=function(){var t,e;return e=this.root?d(this.root):(e=h.documentElement,t=h.body,{top:0,left:0,right:e.clientWidth||t.clientWidth,width:e.clientWidth||t.clientWidth,bottom:e.clientHeight||t.clientHeight,height:e.clientHeight||t.clientHeight}),this._expandRectByRootMargin(e)},t.prototype._expandRectByRootMargin=function(i){var t=this._rootMarginValues.map(function(t,e){return"px"==t.unit?t.value:t.value*(e%2?i.width:i.height)/100}),t={top:i.top-t[0],right:i.right+t[1],bottom:i.bottom+t[2],left:i.left-t[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},t.prototype._hasCrossedThreshold=function(t,e){var i=t&&t.isIntersecting?t.intersectionRatio||0:-1,n=e.isIntersecting?e.intersectionRatio||0:-1;if(i!==n)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==i||r==n||r<i!=r<n)return!0}},t.prototype._rootIsInDom=function(){return!this.root||r(h,this.root)},t.prototype._rootContainsTarget=function(t){return r(this.root||h,t)},t.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},t.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=t,window.IntersectionObserverEntry=l))}(),define("intersection-observer",function(){}),define("shim/on-screen",["require"],function(e){"use strict";const n=new Promise(t=>{"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?t():e(["intersection-observer"],()=>{t()})});return class{constructor(t,e,i){n.then(()=>{this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&(e(),this.destroy())},i),this.observer.observe(t)})}destroy(){n.then(()=>{this.observer.disconnect()})}}}),define("charts/listener-trend",["require","jquery","lodash","highcharts","stats/tooltip","core/colours","shim/on-screen"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var s=t("jquery"),a=t("lodash"),r=t("highcharts"),i=t("stats/tooltip"),l=t("core/colours"),n=t("shim/on-screen");return e.prototype.start=function(){this.tooltip=new i,this.tooltip.start(),this.isVisible=!1,this.onScreen=new n(this.$el.get(0),this.moduleVisible.bind(this),{threshold:1/3})},e.prototype.stop=function(){this.onScreen.destroy()},e.prototype.moduleVisible=function(){this.isVisible||(this.onScreen.destroy(),this.onVisible(),this.isVisible=!0)},e.prototype.onVisible=function(){var t=this.getTableData(),e=s("<div/>").attr("class","highcharts-container");this.$el.append(e),this.drawGraph(e,t)},e.prototype.drawGraph=function(t,e){var i=e.map(function(t){return{labelText:['<span class="text-light">',t.date.trim(),":</span> ",t.valueComma].join(""),x:t.timestamp,y:t.value}}),n={},o=(e.forEach(function(t){n[t.timestamp]=t.month}),Math.listenerTrendEasing=s.easing.easeInOutCubic,this);new r.Chart({series:[{data:i}],chart:{type:"area",renderTo:t.get(0),events:{load:this.centerLabels.bind(this),redraw:this.centerLabels.bind(this)},marginTop:0,marginBottom:30,marginRight:0,marginleft:0,spacingBottom:0,spacingTop:0,spacingLeft:0,spacingRight:0},plotOptions:{series:{color:l.postbox,fillOpacity:.1,lineWidth:2,animation:{duration:1e3,easing:"listenerTrendEasing"},point:{events:{mouseOver:function(){var t=o.pointPosition(this);o.tooltip.show(t.x,t.y,this.labelText)},mouseOut:function(){o.tooltip.hide()}}},marker:{fillColor:"#ffffff",lineColor:l.postbox,lineWidth:1,radius:3},states:{hover:{lineWidth:2,halo:{size:0}}}}},xAxis:{type:"datetime",units:[["month",[1]]],labels:{formatter:function(){return n[this.value]},style:{fontSize:"12px",fontFamily:s("body").css("fontFamily"),color:"#999"}},alternateGridColor:l.platinum,lineWidth:0,tickWidth:0,minPadding:0,maxPadding:0},yAxis:{visible:!1},tooltip:{enabled:!1},title:{text:""},legend:{enabled:!1},credits:{enabled:!1}})},e.prototype.getTableData=function(){function t(t,i){return t.find("["+i+"]").map(function(t,e){return s(e).attr(i)}).toArray()}var e=a.pluck(this.$el.find(".js-date"),"textContent"),i=t(this.$el,"datetime").map(function(t){return+new Date(t)}),n=t(this.$el,"data-month-string"),o=t(this.$el,"data-value").map(function(t){return parseInt(t,10)}),r=a.pluck(this.$el.find(".js-value"),"textContent");return a.zip(e,i,n,o,r).map(function(t){return{date:t[0],timestamp:t[1],month:t[2],value:t[3],valueComma:t[4]}})},e.prototype.centerLabels=function(){this.$el.find(".highcharts-xaxis-labels text").toArray().forEach(function(t,e,i){var n=s(t);e===i.length-1?n.hide():(i=s(i[e+1]),e=parseFloat(n.attr("x")),n=parseFloat(i.attr("x")),s(t).attr("x",e+(n-e)/2))})},e.prototype.pointPosition=function(t){var e=t.series.chart.chartBackground.element,e=s(e).offset();return{x:e.left+t.plotX,y:e.top+t.plotY}},e}),define("components/ajax-form",["require","jquery","core/ajax","core/form"],function(t){"use strict";function e(t,e){this.$el=t,this.eventMediator=e.eventMediator}var n=t("jquery"),s=t("core/ajax"),o=t("core/form");return e.prototype={start:function(){this.$el.on("mouseout.ajax-form focus.ajax-form","[data-ajax-form-sets-state]:visible",this.resetHover.bind(this)),this.$el.on("click.ajax-form",'[data-ajax-form] button[type="submit"]',this.buttonClick.bind(this))},stop:function(){this.$el.off(".ajax-form")},buttonClick:function(t){t.preventDefault();var e=n(t.currentTarget),i=e.closest("form"),t=this.getStateTarget(t);this.abortRequest(t),this.sendRequest(i,e,t),t.removeAttr("data-ajax-form-success")},sendRequest:function(t,e,i){var n,o,r=t.attr("method").toLowerCase();s[r]&&(n=e.data("ajaxFormSetsState"),o=t.attr("action"),t=this.serializeForm(t,e),this.setState(i,n),i.addClass("ajax-form-disable-hover"),e=s[r](o,{},t,function(t,e){t||e&&!e.result?this.fail(i):(i.data("response",e),this.success(i))}.bind(this)),i.data("request",e))},abortRequest:function(t){var e=t.data("request");e&&(this.resetState(t),e.abort())},success:function(t){t.data("request",!1),t.attr("data-ajax-form-success",""),this.eventMediator.publish("ajaxform.success",t.data("response")),t.data("ajax-form-reload")&&window.location.reload()},fail:function(t){t.data("request",!1),this.resetState(t),t.removeClass("ajax-form-disable-hover")},resetState:function(t){t.attr("data-ajax-form-state",t.data("ajaxFormOldState"))},setState:function(t,e){t.data("ajaxFormOldState",t.attr("data-ajax-form-state")),t.attr("data-ajax-form-state",e)},resetHover:function(t){if(t.relatedTarget===t.currentTarget||t.currentTarget.contains(t.relatedTarget))return!1;this.getStateTarget(t).removeClass("ajax-form-disable-hover")},getStateTarget:function(t){return n(t.currentTarget).closest("[data-ajax-form-state]")},serializeForm:function(t,e){var t=o.readFormData(t),i=e.attr("name");return i&&(t[i]=e.val()),t}},e}),define("components/toggle-form",["require","core/ajax","core/form"],function(t){"use strict";function e(t){this.$el=t}var o=t("core/ajax"),i=t("core/form");return e.prototype.hasAction=function(){return!(!this.$el||!this.$el.attr("action"))},e.prototype.submit=function(){var n=i.readFormData(this.$el);return this.hasAction()?new Promise(function(e,i){var t=o.post(this.$el.attr("action"),null,n);t.then(function(t){(t&&!1===t.result?i:e)(t)}),t.catch(i)}.bind(this)):Promise.resolve()},e}),define("components/toggle-button",["require","jquery","components/toggle-form"],t=>{const e=t("jquery"),d=t("components/toggle-form"),p="data-button-disabled";function f(t){return e("[data-toggle-button-group-id="+t+"]")}function g(t){const e=f(t);return e.find("button[type=submit]")}function m(t){const e=f(t);return e.find("form")}function y(t,e){const i=g(t);e?i.attr(p,!0):i.removeAttr(p)}return function(t,n){var e=!!t.attr(p);if(!e){const r=function(t){let e=t.closest("[data-toggle-button]");return e.attr("data-toggle-button-group-id")}(t),{currentState:s,nextState:a}=function(t){const e=f(t),i=e.eq(0),n=i.attr("data-toggle-button-current-state"),o=JSON.parse(i.attr("data-toggle-button-states")),r=o.findIndex(t=>t.name===n),s=(r+1)%o.length;return{currentState:o[r],nextState:o[s]}}(r),l=t=>{{var e=r;const i=f(e),n=g(e);return i.attr("data-toggle-button-current-state",t.name),n.text(t.button_text),void n.attr("data-analytics-action",t.analytics_action)}};y(r,!0),l(a);{e=r;t=t=>{n.publish(s.event,t);{t=r;var e=a;const i=m(t);return i.attr("action",e.url),void i.find("input[name=action]").val(e.action)}};var i=t=>{n.publish(s.event,t),l(s)};var o=()=>y(r,!1);const c=m(e),u=new d(c.eq(0)),h=u.submit();h.then(t),h.catch(i),h.finally(o)}}}}),define("components/toggle-buttons",["require","jquery","components/toggle-button"],function(t){"use strict";function e(t,e){this.app=e,this.$body=i(document.body)}var i=t("jquery"),n=t("components/toggle-button");return e.prototype.start=function(){this.$body.on("click.toggle-buttons","[data-toggle-button] button[type=submit]",this.handleClick.bind(this))},e.prototype.stop=function(){this.$body.off(".toggle-buttons")},e.prototype.handleClick=function(t){t.preventDefault(),n(i(t.target),this.app.eventMediator)},e}),define("components/show-alert",["require","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var i=t("jquery");return e.prototype={start:function(){this.okCopy=this.$el.attr("data-show-alert-ok-copy"),i("body").on("click.show-alert","[data-show-alert]",this.clickHandler.bind(this))},stop:function(){i("body").off(".show-alert")},clickHandler:function(t){t=i(t.currentTarget).attr("data-show-alert");this.app.modal.show(this.modalBody(t,this.okCopy))},modalBody:function(t,e){return'<div class="modal-body" data-modal-type="narrow,left-aligned"><p>'+t+'</p><ul class="modal-buttons"><li class="modal-button"><button class="btn-primary js-close" data-modal-action="ok">'+e+"</button></li></ul></div>"}},e}),define("components/alert-dismissable",["require","jquery","jquery-cookie","core/ajax"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var i=t("jquery"),n=(t("jquery-cookie"),t("core/ajax"));return e.prototype={start:function(){this.$el.on("click",".js-alert-dismissable-close",i.proxy(this.close,this))},close:function(t,e){t.preventDefault();t=i(t.currentTarget);this.makeAjaxCall(t),this.$el.slideUp(e)},makeAjaxCall:function(t){n.get(t.attr("href"))},stop:function(){this.$el.off("click",".js-alert-dismissable-close")}},e}),define("components/bookmark-notification",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e,this.eventMediator=e.eventMediator,this.$el=i("body")}var i=t("jquery");return e.prototype.start=function(){this.subscription=this.eventMediator.subscribe("bookmark.added",this.bookmarked.bind(this),!0)},e.prototype.stop=function(){this.eventMediator.unsubscribe(this.subscription)},e.prototype.bookmarked=function(t){t.showNotification&&this.app.modal.open(t.notificationUrl)},e}),define("components/confirm-dialog",[],function(){"use strict";return function(e,i,n,o,r){return new Promise(function(t){e.modal.show('<div class="modal-body" data-modal-type="narrow,left-aligned"><h2 id="modal-label" class="modal-title">'+i+"</h2><p>"+n+'</p><ul class="modal-buttons"><li class="modal-button"><button class="btn-cancel js-close">'+r+'</button></li><li class="modal-button"><button class="btn-primary js-close" data-modal-action="ok">'+o+"</button></li></ul></div>",{ok:t})}.bind(this))}}),define("components/confirm",["require","components/confirm-dialog","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var i=t("components/confirm-dialog"),n=t("jquery");return e.prototype={start:function(){this.$el.on("submit.confirm",this.submitHandler.bind(this))},stop:function(){this.$el.off(".confirm")},submitHandler:function(t){this.$target=n(t.target),this.$target.is("[data-confirm-message]")&&!this.$target.data("confirmed")&&(t.preventDefault(),e.openConfirmDialog(this.$target,this.app).then(this.resumeSubmit.bind(this)))},resumeSubmit:function(){this.$target.data("confirmed",!0),this.$target.appendTo("body"),this.$target.trigger("submit")}},e.openConfirmDialog=function(t,e){return i(e,t.attr("data-confirm-title"),t.attr("data-confirm-message"),t.attr("data-confirm-ok"),t.attr("data-confirm-cancel"))},e}),define("components/disclose-base",["require","jquery","lodash"],function(t){"use strict";function e(){this.$body=n(document.body)}var n=t("jquery"),o=t("lodash");return e.prototype={selector:"[data-disclose]",eventNamespace:".disclose",start:function(){this.$body.on("click"+this.eventNamespace,this.selector,this.toggleHandler.bind(this)),this.$body.on("click"+this.eventNamespace,".js-disclose-close",this.closeButtonHandler.bind(this))},stop:function(){this.$body.off(this.eventNamespace)},eventName:function(t){return t+this.eventNamespace},open:function(t){this.toggle(t,!0)},close:function(t){this.toggle(t,!1)},toggle:function(t,e){var i=this.discloseBody(t),n=this.isOpen(i);i.toggleClass("disclose-hide",!e),t.attr("aria-expanded",e?"true":"false"),t.toggleClass("disclose-active",e),e&&!n?this.opened(t,i):!e&&n&&this.closed(t,i)},toggleHandler:function(t){t.preventDefault();var t=n(t.target).closest(this.selector),e=this.discloseBody(t);this.isOpen(e)?this.close(t):this.open(t)},closeButtonHandler:function(t){var e=this.toggleForDiscloseBodyChild(t.target);e&&(t.preventDefault(),this.close(e))},opened:function(t,e){e.trigger("disclose-shown"),this.discloseBody(t).on("disclose-close",this.close.bind(this,t))},closed:function(t,e){e.trigger("disclose-hidden"),this.discloseBody(t).off("disclose-close")},isOpen:function(t){return!t.is(".disclose-hide")},discloseBody:function(t){return n("#"+t.attr("aria-controls"))},toggleForDiscloseBodyChild:function(t){var e,i,t=n(t).parents("[id]").get();if(o(t).find(function(t){return i=n(t).attr("id"),(e=n(this.selector+'[aria-controls="'+i+'"]')).length},this))return e}},e}),!function(t){"function"==typeof define&&define.amd?define("jquery-ui",["jquery"],t):t(jQuery)}(function(k){k.ui=k.ui||{};var n,T,A,o,r,s,a,l,i;k.ui.version="1.12.1";function C(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function S(t,e){return parseInt(k.css(t,e),10)||0}T=Math.max,A=Math.abs,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,i=k.fn.position,k.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,e=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=e.children()[0];return k("body").append(e),t=i.offsetWidth,e.css("overflow","scroll"),t===(i=i.offsetWidth)&&(i=e[0].clientWidth),e.remove(),n=t-i},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),e="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:e?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),i=k.isWindow(e[0]),n=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:n,offset:!i&&!n?k(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},k.fn.position=function(h){if(!h||!h.of)return i.apply(this,arguments);h=k.extend({},h);var d,p,f,g,m,t,y=k(h.of),v=k.position.getWithinInfo(h.within),b=k.position.getScrollInfo(v),x=(h.collision||"flip").split(" "),w={},e=9===(e=(t=y)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()};return y[0].preventDefault&&(h.at="left top"),p=e.width,f=e.height,m=k.extend({},g=e.offset),k.each(["my","at"],function(){var t,e,i=(h[this]||"").split(" ");(i=1===i.length?o.test(i[0])?i.concat(["center"]):r.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=o.test(i[0])?i[0]:"center",i[1]=r.test(i[1])?i[1]:"center",t=s.exec(i[0]),e=s.exec(i[1]),w[this]=[t?t[0]:0,e?e[0]:0],h[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===h.at[0]?m.left+=p:"center"===h.at[0]&&(m.left+=p/2),"bottom"===h.at[1]?m.top+=f:"center"===h.at[1]&&(m.top+=f/2),d=C(w.at,p,f),m.left+=d[0],m.top+=d[1],this.each(function(){var i,t,s=k(this),a=s.outerWidth(),l=s.outerHeight(),e=S(this,"marginLeft"),n=S(this,"marginTop"),o=a+e+S(this,"marginRight")+b.width,r=l+n+S(this,"marginBottom")+b.height,c=k.extend({},m),u=C(w.my,s.outerWidth(),s.outerHeight());"right"===h.my[0]?c.left-=a:"center"===h.my[0]&&(c.left-=a/2),"bottom"===h.my[1]?c.top-=l:"center"===h.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],i={marginLeft:e,marginTop:n},k.each(["left","top"],function(t,e){k.ui.position[x[t]]&&k.ui.position[x[t]][e](c,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:o,collisionHeight:r,offset:[d[0]+u[0],d[1]+u[1]],my:h.my,at:h.at,within:v,elem:s})}),h.using&&(t=function(t){var e=g.left-c.left,i=e+p-a,n=g.top-c.top,o=n+f-l,r={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:s,left:c.left,top:c.top,width:a,height:l},horizontal:i<0?"left":0<e?"right":"center",vertical:o<0?"top":0<n?"bottom":"middle"};p<a&&A(e+i)<p&&(r.horizontal="center"),f<l&&A(n+o)<f&&(r.vertical="middle"),T(A(e),A(i))>T(A(n),A(o))?r.important="horizontal":r.important="vertical",h.using.call(this,t,r)}),s.offset(k.extend(c,{using:t}))})},k.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,n=n.width,r=t.left-e.collisionPosition.marginLeft,s=o-r,a=r+e.collisionWidth-n-o;e.collisionWidth>n?0<s&&a<=0?(i=t.left+s+e.collisionWidth-n-o,t.left+=s-i):t.left=!(0<a&&s<=0)&&a<s?o+n-e.collisionWidth:o:0<s?t.left+=s:0<a?t.left-=a:t.left=T(t.left-r,t.left)},top:function(t,e){var i,n=e.within,n=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,s=n-r,a=r+e.collisionHeight-o-n;e.collisionHeight>o?0<s&&a<=0?(i=t.top+s+e.collisionHeight-o-n,t.top+=s-i):t.top=!(0<a&&s<=0)&&a<s?n+o-e.collisionHeight:n:0<s?t.top+=s:0<a?t.top-=a:t.top=T(t.top-r,t.top)}},flip:{left:function(t,e){var i=e.within,n=i.offset.left+i.scrollLeft,o=i.width,i=i.isWindow?i.scrollLeft:i.offset.left,r=t.left-e.collisionPosition.marginLeft,s=r-i,r=r+e.collisionWidth-o-i,a="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,l="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,c=-2*e.offset[0];s<0?((o=t.left+a+l+c+e.collisionWidth-o-n)<0||o<A(s))&&(t.left+=a+l+c):0<r&&(0<(n=t.left-e.collisionPosition.marginLeft+a+l+c-i)||A(n)<r)&&(t.left+=a+l+c)},top:function(t,e){var i=e.within,n=i.offset.top+i.scrollTop,o=i.height,i=i.isWindow?i.scrollTop:i.offset.top,r=t.top-e.collisionPosition.marginTop,s=r-i,r=r+e.collisionHeight-o-i,a="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,l="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,c=-2*e.offset[1];s<0?((o=t.top+a+l+c+e.collisionHeight-o-n)<0||o<A(s))&&(t.top+=a+l+c):0<r&&(0<(n=t.top-e.collisionPosition.marginTop+a+l+c-i)||A(n)<r)&&(t.top+=a+l+c)}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}};k.ui.position;k.ui.focusable=function(t,e){var i,n,o,r=t.nodeName.toLowerCase();return"area"===r?(o=(i=t.parentNode).name,!(!t.href||!o||"map"!==i.nodeName.toLowerCase())&&(0<(i=k("img[usemap='#"+o+"']")).length&&i.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(r)?(n=!t.disabled)&&(o=k(t).closest("fieldset")[0])&&(n=!o.disabled):n="a"===r&&t.href||e,n&&k(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(k(t)))},k.extend(k.expr[":"],{focusable:function(t){return k.ui.focusable(t,null!=k.attr(t,"tabindex"))}});k.ui.focusable,k.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},k.extend(k.expr[":"],{tabbable:function(t){var e=k.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&k.ui.focusable(t,i)}});var u,h,c,d,t,p,f,g,m,e,y,v,b,x,w,M,R,N,q,z,E,P="ui-effects-",j="ui-effects-style",L="ui-effects-animated",H=k;function _(t,e,i){var n=g[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:t<0?0:n.max<t?n.max:t)}function $(n){var o=p(),r=o._rgba=[];return n=n.toLowerCase(),y(t,function(t,e){var i=e.re.exec(n),i=i&&e.parse(i),e=e.space||"rgba";if(i)return i=o[e](i),o[f[e].cache]=i[f[e].cache],r=o._rgba=i._rgba,!1}),r.length?("0,0,0,0"===r.join()&&u.extend(r,c.transparent),o):c[n]}function I(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function B(t){var e,i,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)"string"==typeof n[e=n[i]]&&(o[k.camelCase(e)]=n[e]);else for(e in n)"string"==typeof n[e]&&(o[e]=n[e]);return o}function O(t,e,i,n){return t={effect:t=k.isPlainObject(t)?(e=t).effect:t},k.isFunction(e=null==e?{}:e)&&(n=e,i=null,e={}),"number"!=typeof e&&!k.fx.speeds[e]||(n=i,i=e,e={}),k.isFunction(i)&&(n=i,i=null),e&&k.extend(t,e),i=i||e.duration,t.duration=k.fx.off?0:"number"==typeof i?i:i in k.fx.speeds?k.fx.speeds[i]:k.fx.speeds._default,t.complete=n||e.complete,t}function D(t){return!t||"number"==typeof t||k.fx.speeds[t]||("string"==typeof t&&!k.effects.effect[t]||(k.isFunction(t)||"object"==typeof t&&!t.effect))}function F(t,e){var i=e.outerWidth(),e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}k.effects={effect:{}},d=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],p=(u=H).Color=function(t,e,i,n){return new u.Color.fn.parse(t,e,i,n)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=p.support={},e=u("<p>")[0],y=u.each,e.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=-1<e.style.backgroundColor.indexOf("rgba"),y(f,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),(p.fn=u.extend(p.prototype,{parse:function(o,t,e,i){if(o===h)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=u(o).css(t),t=h);var r=this,n=u.type(o),s=this._rgba=[];return t!==h&&(o=[o,t,e,i],n="array"),"string"===n?this.parse($(o)||c._default):"array"===n?(y(f.rgba.props,function(t,e){s[e.idx]=_(o[e.idx],e)}),this):"object"===n?(y(f,o instanceof p?function(t,e){o[e.cache]&&(r[e.cache]=o[e.cache].slice())}:function(t,i){var n=i.cache;y(i.props,function(t,e){if(!r[n]&&i.to){if("alpha"===t||null==o[t])return;r[n]=i.to(r._rgba)}r[n][e.idx]=_(o[t],e,!0)}),r[n]&&u.inArray(null,r[n].slice(0,3))<0&&(r[n][3]=1,i.from&&(r._rgba=i.from(r[n])))}),this):void 0},is:function(t){var o=p(t),r=!0,s=this;return y(f,function(t,e){var i,n=o[e.cache];return n&&(i=s[e.cache]||e.to&&e.to(s._rgba)||[],y(e.props,function(t,e){if(null!=n[e.idx])return r=n[e.idx]===i[e.idx]})),r}),r},_space:function(){var i=[],n=this;return y(f,function(t,e){n[e.cache]&&i.push(t)}),i.pop()},transition:function(t,s){var t=(c=p(t))._space(),e=f[t],i=0===this.alpha()?p("transparent"):this,a=i[e.cache]||e.to(i._rgba),l=a.slice(),c=c[e.cache];return y(e.props,function(t,e){var i=e.idx,n=a[i],o=c[i],r=g[e.type]||{};null!==o&&(null===n?l[i]=o:(r.mod&&(o-n>r.mod/2?n+=r.mod:n-o>r.mod/2&&(n-=r.mod)),l[i]=_((o-n)*s+n,e)))}),this[t](l)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),n=p(t)._rgba;return p(u.map(e,function(t,e){return(1-i)*n[e]+i*t}))},toRgbaString:function(){var t="rgba(",e=u.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=u.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),t=e&&e<3?Math.round(100*t)+"%":t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+u.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=p.fn,f.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,i=t[1]/255,n=t[2]/255,t=t[3],o=Math.max(e,i,n),r=Math.min(e,i,n),s=o-r,a=o+r,l=.5*a,r=r===o?0:e===o?60*(i-n)/s+360:i===o?60*(n-e)/s+120:60*(e-i)/s+240,o=0==s?0:l<=.5?s/a:s/(2-a);return[Math.round(r)%360,o,l,null==t?1:t]},f.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],t=t[3],i=n<=.5?n*(1+i):n+i-n*i,n=2*n-i;return[Math.round(255*I(n,i,e+1/3)),Math.round(255*I(n,i,e)),Math.round(255*I(n,i,e-1/3)),t]},y(f,function(a,t){var r=t.props,s=t.cache,l=t.to,c=t.from;p.fn[a]=function(t){if(l&&!this[s]&&(this[s]=l(this._rgba)),t===h)return this[s].slice();var e,i=u.type(t),n="array"===i||"object"===i?t:arguments,o=this[s].slice();return y(r,function(t,e){t=n["object"===i?t:e.idx];null==t&&(t=o[e.idx]),o[e.idx]=_(t,e)}),c?((e=p(c(o)))[s]=o,e):p(o)},y(r,function(r,s){p.fn[r]||(p.fn[r]=function(t){var e=u.type(t),i="alpha"===r?this._hsla?"hsla":"rgba":a,n=this[i](),o=n[s.idx];return"undefined"===e?o:("function"===e&&(t=t.call(this,o),e=u.type(t)),null==t&&s.empty?this:("string"===e&&(e=d.exec(t))&&(t=o+parseFloat(e[2])*("+"===e[1]?1:-1)),n[s.idx]=t,this[i](n)))})})}),(p.hook=function(t){t=t.split(" ");y(t,function(t,r){u.cssHooks[r]={set:function(t,e){var i,n,o="";if("transparent"!==e&&("string"!==u.type(e)||(i=$(e)))){if(e=p(i||e),!m.rgba&&1!==e._rgba[3]){for(n="backgroundColor"===r?t.parentNode:t;(""===o||"transparent"===o)&&n&&n.style;)try{o=u.css(n,"backgroundColor"),n=n.parentNode}catch(t){}e=e.blend(o&&"transparent"!==o?o:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},u.fx.step[r]=function(t){t.colorInit||(t.start=p(t.elem,r),t.end=p(t.end),t.colorInit=!0),u.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),u.cssHooks.borderColor={expand:function(i){var n={};return y(["Top","Right","Bottom","Left"],function(t,e){n["border"+e+"Color"]=i}),n}},c=u.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},w=["add","remove","toggle"],M={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},k.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){k.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(H.style(t.elem,e,t.end),t.setAttr=!0)}}),k.fn.addBack||(k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.effects.animateClass=function(o,t,e,i){var r=k.speed(t,e,i);return this.queue(function(){var i=k(this),t=i.attr("class")||"",e=(e=r.children?i.find("*").addBack():i).map(function(){return{el:k(this),start:B(this)}}),n=function(){k.each(w,function(t,e){o[e]&&i[e+"Class"](o[e])})};n(),e=e.map(function(){return this.end=B(this.el[0]),this.diff=function(t,e){var i,n,o={};for(i in e)n=e[i],t[i]===n||M[i]||!k.fx.step[i]&&isNaN(parseFloat(n))||(o[i]=n);return o}(this.start,this.end),this}),i.attr("class",t),e=e.map(function(){var t=this,e=k.Deferred(),i=k.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),k.when.apply(k,e.get()).done(function(){n(),k.each(arguments,function(){var e=this.el;k.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(i[0])})})},k.fn.extend({addClass:(x=k.fn.addClass,function(t,e,i,n){return e?k.effects.animateClass.call(this,{add:t},e,i,n):x.apply(this,arguments)}),removeClass:(b=k.fn.removeClass,function(t,e,i,n){return 1<arguments.length?k.effects.animateClass.call(this,{remove:t},e,i,n):b.apply(this,arguments)}),toggleClass:(v=k.fn.toggleClass,function(t,e,i,n,o){return"boolean"==typeof e||void 0===e?i?k.effects.animateClass.call(this,e?{add:t}:{remove:t},i,n,o):v.apply(this,arguments):k.effects.animateClass.call(this,{toggle:t},e,i,n)}),switchClass:function(t,e,i,n,o){return k.effects.animateClass.call(this,{add:e,remove:t},i,n,o)}}),k.expr&&k.expr.filters&&k.expr.filters.animated&&(k.expr.filters.animated=(R=k.expr.filters.animated,function(t){return!!k(t).data(L)||R(t)})),!1!==k.uiBackCompat&&k.extend(k.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data(P+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,o=e.length;n<o;n++)null!==e[n]&&(i=t.data(P+e[n]),t.css(e[n],i))},setMode:function(t,e){return e="toggle"===e?t.is(":hidden")?"show":"hide":e},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var n={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=k("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return i.wrap(t),i[0]!==o&&!k.contains(i[0],o)||k(o).trigger("focus"),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(k.extend(n,{position:i.css("position"),zIndex:i.css("z-index")}),k.each(["top","left","bottom","right"],function(t,e){n[e]=i.css(e),isNaN(parseInt(n[e],10))&&(n[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(n).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!k.contains(t[0],e)||k(e).trigger("focus")),t}}),k.extend(k.effects,{version:"1.12.1",define:function(t,e,i){return i||(i=e,e="effect"),k.effects.effect[t]=i,k.effects.effect[t].mode=e,i},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,i="vertical"!==i?(e||100)/100:1;return{height:t.height()*i,width:t.width()*n,outerHeight:t.outerHeight()*i,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();1<e&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(j,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(j)||"",t.removeData(j)},mode:function(t,e){t=t.is(":hidden");return"toggle"===e&&(e=t?"show":"hide"),e=(t?"hide"===e:"show"===e)?"none":e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(t){var e,i=t.css("position"),n=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",e=k("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(P+"placeholder",e)),t.css({position:i,left:n.left,top:n.top}),e},removePlaceholder:function(t){var e=P+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(t){k.effects.restoreStyle(t),k.effects.removePlaceholder(t)},setTransition:function(n,t,o,r){return r=r||{},k.each(t,function(t,e){var i=n.cssUnit(e);0<i[0]&&(r[e]=i[0]*o+i[1])}),r}}),k.fn.extend({effect:function(){function t(t){var e=k(this),i=k.effects.mode(e,a)||r;e.data(L,!0),l.push(i),r&&("show"===i||i===r&&"hide"===i)&&e.show(),r&&"none"===i||k.effects.saveStyle(e),k.isFunction(t)&&t()}var n=O.apply(this,arguments),o=k.effects.effect[n.effect],r=o.mode,e=n.queue,i=e||"fx",s=n.complete,a=n.mode,l=[];return k.fx.off||!o?a?this[a](n.duration,s):this.each(function(){s&&s.call(this)}):!1===e?this.each(t).each(c):this.queue(i,t).queue(i,c);function c(t){var e=k(this);function i(){k.isFunction(s)&&s.call(e[0]),k.isFunction(t)&&t()}n.mode=l.shift(),!1===k.uiBackCompat||r?"none"===n.mode?(e[a](),i()):o.call(e[0],n,function(){e.removeData(L),k.effects.cleanUp(e),"hide"===n.mode&&e.hide(),i()}):(e.is(":hidden")?"hide"===a:"show"===a)?(e[a](),i()):o.call(e[0],n,i)}},show:(z=k.fn.show,function(t){var e;return D(t)?z.apply(this,arguments):((e=O.apply(this,arguments)).mode="show",this.effect.call(this,e))}),hide:(q=k.fn.hide,function(t){var e;return D(t)?q.apply(this,arguments):((e=O.apply(this,arguments)).mode="hide",this.effect.call(this,e))}),toggle:(N=k.fn.toggle,function(t){var e;return D(t)||"boolean"==typeof t?N.apply(this,arguments):((e=O.apply(this,arguments)).mode="toggle",this.effect.call(this,e))}),cssUnit:function(t){var i=this.css(t),n=[];return k.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(n=[parseFloat(i),e])}),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):F(this.css("clip"),this)},transfer:function(t,e){var i=k(this),n=k(t.to),o="fixed"===n.css("position"),r=k("body"),s=o?r.scrollTop():0,r=o?r.scrollLeft():0,a=n.offset(),a={top:a.top-s,left:a.left-r,height:n.innerHeight(),width:n.innerWidth()},n=i.offset(),l=k("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:n.top-s,left:n.left-r,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(a,t.duration,t.easing,function(){l.remove(),k.isFunction(e)&&e()})}}),k.fx.step.clip=function(t){t.clipInit||(t.start=k(t.elem).cssClip(),"string"==typeof t.end&&(t.end=F(t.end,t.elem)),t.clipInit=!0),k(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},E={},k.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){E[t]=function(t){return Math.pow(t,e+2)}}),k.extend(E,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),k.each(E,function(t,e){k.easing["easeIn"+t]=e,k.easing["easeOut"+t]=function(t){return 1-e(1-t)},k.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});k.effects}),define("components/disclose-autoclose-v2",["require","jquery-ui","jquery","components/disclose-base","whatInput"],function(t){"use strict";t("jquery-ui");function e(){n.apply(this,arguments)}var i=t("jquery"),n=t("components/disclose-base"),o=t("whatInput"),r=i.ui.keyCode.ESCAPE,s=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-autoclose]",e.prototype.eventNamespace=".disclose-autoclose",n.prototype);return e.prototype.opened=function(t,e){s.opened.call(this,t,e),this.$body.on(this.toggleEventName("click",t),this.outsideClickHandler.bind(this,t,e)),this.$body.on(this.toggleEventName("focusin",t),this.outsideFocusHandler.bind(this,t,e)),this.$body.on(this.toggleEventName("keydown",t),this.outsideKeydownHandler.bind(this,t))},e.prototype.toggleEventName=function(t,e){e=this.uniqueEventNamespace(e);return this.eventName(t)+e},e.prototype.closed=function(t,e){s.closed.call(this,t,e);e=this.uniqueEventNamespace(t);this.$body.off(e)},e.prototype.uniqueEventNamespace=function(t){t=t.attr("aria-controls");return this.eventNamespace+"-for-"+t},e.prototype.outsideKeydownHandler=function(t,e){this.keyboardDisabled(e.target)||e.which===r&&(this.close(t),t.focus())},e.prototype.outsideFocusHandler=function(t,e,i){"mouse"===o.ask()||!i.relatedTarget||this.elementContains(t,i.target)||this.elementContains(e,i.target)||this.close(t)},e.prototype.outsideClickHandler=function(t,e,i){this.elementContains(t,i.target)||this.elementContains(e,i.target)||this.close(t)},e.prototype.elementContains=function(t,e){return t[0]===e||t.has(e).length},e.prototype.keyboardDisabled=function(t){return!!i(t).is(".js-disclose-disable-keyboard")||0<i(t).parents(".js-disclose-disable-keyboard").length},e}),define("components/media-size-aware-elements",["require","core/media-size-v2"],function(t){"use strict";function e(t,e){this.eventMediator=t,this.elements=[],this.onChange=e}var i=t("core/media-size-v2");return e.prototype.start=function(){this.subscription=this.eventMediator.subscribe("mediaSize.change",this.resize.bind(this))},e.prototype.stop=function(){this.eventMediator.unsubscribe(this.subscription)},e.prototype.add=function(t,e){-1===this.indexOf(t)&&(this.elements.push({el:t,metadata:e}),this.onChange(t,i.getMediaSize(),e))},e.prototype.remove=function(t){t=this.indexOf(t);return-1!==t&&(this.elements.splice(t,1),!0)},e.prototype.update=function(t){var e=this.indexOf(t);-1!==e&&(e=this.elements[e].metadata,this.onChange(t,i.getMediaSize(),e))},e.prototype.resize=function(e){this.elements.forEach(function(t){this.onChange(t.el,e.size,t.metadata)}.bind(this))},e.prototype.indexOf=function(t){for(var e=0;e<this.elements.length;e++)if(this.elements[e].el===t)return e;return-1},e}),define("components/full-bleed-absolute",[],function(){"use strict";return{adjust:function(t){var e=t.offset().left,i=-1*e,e=e+t.outerWidth()-document.body.offsetWidth,n=parseFloat(t.css("left")),o=parseFloat(t.css("right"));t.css({left:n+i,right:o+e})},reset:function(t){t.css({left:"",right:""})}}}),!function(i){define("jss",[],function(){return function(){a=/((?:\.|#)[^\.\s#]+)((?:\.|#)[^\.\s#]+)/g,l=/(::)(before|after|first-line|first-letter|selection)/,c=/([^:])(:)(before|after|first-line|first-letter|selection)/,e.prototype={get:function(t){if(!this.defaultSheet)return{};if(t)return o(u(this.defaultSheet,t));var e=function(t){for(var e=t.cssRules||t.rules||[],i={},n=0;n<e.length;n++){var o=p(e[n].selectorText);i[o]||(i[o]=[]),i[o].push({sheet:t,index:n,style:e[n].style})}return i}(this.defaultSheet);for(t in e)e[t]=o(e[t]);return e},getAll:function(t){for(var e={},i=0;i<this.sheets.length;i++)n(e,o(u(this.sheets[i],t)));return e},set:function(t,e){this.defaultSheet||(this.defaultSheet=this._createSheet()),e=function(t){var e,i={};for(e in t)i[e.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})]=t[e];return i}(e);var i=u(this.defaultSheet,t);i.length||(i=[h(this.defaultSheet,t)]);for(var n=0;n<i.length;n++){l=a=o=s=r=void 0;var o,r=i[n],s=e;for(o in s){var a=s[o],l=a.indexOf(" !important");r.style.removeProperty(o),0<l?r.style.setProperty(o,a.substr(0,l),"important"):r.style.setProperty(o,a)}}},remove:function(t){if(this.defaultSheet){if(!t)return this._removeSheet(this.defaultSheet),void delete this.defaultSheet;for(var e,i,n=u(this.defaultSheet,t),o=0;o<n.length;o++)e=n[o],i=void 0,(i=e.sheet).deleteRule?i.deleteRule(e.index):i.removeRule&&i.removeRule(e.index);return n.length}},_createSheet:function(){var t=this.doc.createElement("style");return t.type="text/css",t.rel="stylesheet",this.head.appendChild(t),this._getSheetForNode(t)},_getSheetForNode:function(t){for(var e=0;e<this.sheets.length;e++)if(t===this._getNodeForSheet(this.sheets[e]))return this.sheets[e];return null},_getNodeForSheet:function(t){return t.ownerNode||t.owningElement},_removeSheet:function(){}},(t=new e(document)).forDocument=function(t){return new e(t)};var s,a,l,c,t;function u(t,e){var i=t.cssRules||t.rules||[],n=[];e=e.toLowerCase();for(var o=0;o<i.length;o++){var r=i[o].selectorText;!r||r!=e&&r!=function(t){var e="",i=0;for(;null!=(match=a.exec(t))&&""!==match[0];)e=(e=(e+=t.substring(i,match.index))+t.substr(match.index+match[1].length,match[2].length))+t.substr(match.index,match[1].length),i=match.index+match[0].length;return e+=t.substr(i)}(e)&&r!=function(t){if(l.exec(t))return f(t);return t}(e)||n.push({sheet:t,index:o,style:i[o].style})}return n}function h(t,e){var i=t.cssRules||t.rules||[],n=i.length;return function(t,e,i,n){var o,r;if(l.exec(e))r=f(o=e);else{if(!c.exec(e))return!1;o=p(e),r=e}s||(d(t,o,n),i.length<=n&&(s=!0));s&&d(t,r,n);return!0}(t,e,i,n)||d(t,e,n),{sheet:t,index:n,style:i[n].style}}function d(t,e,i){t.insertRule?t.insertRule(e+" { }",i):t.addRule(e,null,i)}function p(t){return t.replace(c,function(t,e,i,n){return e+"::"+n})}function f(t){return t.replace(l,function(t,e,i){return":"+i})}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function o(t){for(var e={},i=0;i<t.length;i++)n(e,function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=t[function(t){return t.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})}(t[i])];return e}(t[i].style));return e}function e(t){this.doc=t,this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.sheets=this.doc.styleSheets||[]}return"undefined"!=typeof module&&module.exports&&(module.exports=t),i.jss=t}.apply(i,arguments)})}(this),define("components/dropdown-position",["require","lib/jss/jss.0.6","jquery-ui"],function(t){"use strict";t("lib/jss/jss.0.6"),t("jquery-ui");var s={ARROW_WIDTH:36,position:function(t,e,i,n){var o="center",r=t.data("dropdown-layout-align"),r=("right"===r?o="right+"+i:"left"===r&&(o="left-"+i),"top+"+n),i=e.data("dropdown-layout-at")||"center bottom",n={of:e,my:o+" "+r,at:i,collision:"flipfit none",within:document.body,using:this.applyPosition};t.position(n),s.positionArrow(t,e,i)},applyPosition:function(t,e){t.top=Math.round(t.top),e.element.element.css(t)},positionArrow:function(t,e,i){var i=i.split(" ")[0],i="right"===i.substr(0,5)?(n=parseInt(i.substr(5),10),e.offset().left+e.outerWidth()+n):"left"===i.substr(0,4)?(n=parseInt(i.substr(4),10),e.offset().left+n):e.offset().left+e.outerWidth()/2,n=i-t.offset().left-s.ARROW_WIDTH/2,e=t.attr("id"),i={left:n+"px"};jss.remove("#"+e+"::before"),jss.remove("#"+e+" > *::before"),jss.set("#"+e+":before",i),jss.set("#"+e+" > *:before",i)}};return s}),define("components/dropdown-layout",["require","jquery","components/media-size-aware-elements","components/full-bleed-absolute","components/dropdown-position"],function(t){"use strict";function e(t){this.elements=new i(t,this.onChange.bind(this))}var n=t("jquery"),i=t("components/media-size-aware-elements"),o=t("components/full-bleed-absolute"),r=t("components/dropdown-position");return e.prototype.HORIZONTAL_OFFSET=20,e.prototype.VERTICAL_OFFSET=10,e.prototype.start=function(){this.elements.start()},e.prototype.stop=function(){this.elements.stop()},e.prototype.opened=function(t,e){this.elements.add(t.get(0),e)},e.prototype.closed=function(t){this.elements.remove(t.get(0))&&o.reset(t)},e.prototype.updated=function(t){this.elements.update(t.get(0))},e.prototype.onChange=function(t,e,i){t=n(t);"xs"===e?t.is("[data-disable-full-bleed]")||o.adjust(t):t.css({left:"auto",right:"auto"}),r.position(t,i,this.HORIZONTAL_OFFSET,this.VERTICAL_OFFSET)},e}),define("components/disclose-dropdown-v2",["require","jquery-ui","jquery","components/disclose-autoclose-v2","components/dropdown-layout"],function(t){"use strict";t("jquery-ui");function e(t,e){i.apply(this,arguments),this.dropdownLayout=new n(e.eventMediator)}var s=t("jquery"),i=t("components/disclose-autoclose-v2"),n=t("components/dropdown-layout"),o=s.ui.keyCode.DOWN,r=s.ui.keyCode.UP,a=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-dropdown]",e.prototype.eventNamespace=".disclose-dropdown",i.prototype);return e.prototype.start=function(){a.start.call(this),this.dropdownLayout.start(),this.$body.on(this.eventName("keydown"),this.selector,this.toggleKeydownHandler.bind(this))},e.prototype.stop=function(){a.stop.call(this),this.dropdownLayout.stop()},e.prototype.linkClicked=function(t,e,i){const n=s(i.target);var i=n.is("button, a"),o=n.is(".js-disclose-dont-close"),r=0<n.closest(".js-disclose-dont-close").length;!i||o||r||this.close(t)},e.prototype.opened=function(t,e){a.opened.call(this,t,e),this.dropdownLayout.opened(e,t),e.on(this.eventName("keydown"),this.targetKeydownHandler.bind(this,e)),e.on(this.eventName("click"),this.linkClicked.bind(this,t,e))},e.prototype.closed=function(t,e){a.closed.call(this,t,e),this.dropdownLayout.closed(e),e.off(this.eventNamespace)},e.prototype.toggleKeydownHandler=function(t){-1!==[r,o].indexOf(t.which)&&(t.preventDefault(),t=s(t.target),this.isOpen(this.discloseBody(t))||this.keyboardOpen(t))},e.prototype.keyboardOpen=function(t){this.open(t);t=this.discloseBody(t);this.focusFirstItem(t)},e.prototype.focusFirstItem=function(t){t.find(":tabbable").eq(0).focus()},e.prototype.targetKeydownHandler=function(t,e){var i,n;this.keyboardDisabled(e.target)||-1!==[r,o].indexOf(e.which)&&(e.preventDefault(),i=t.find(":tabbable").not(function(t,e){return this.keyboardDisabled(e)}.bind(this)).get(),n=e.which===o?-1:1,i.some(function(t,e){if(i[e+n]===document.activeElement)return s(t).focus(),!0}))},e}),define("components/disclose-dropdown-location-picker-v2",["require","components/disclose-dropdown-v2"],function(t){"use strict";function e(){i.apply(this,arguments)}var i=t("components/disclose-dropdown-v2"),n=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-dropdown-location-picker]",e.prototype.eventNamespace=".disclose-dropdown-location-picker",i.prototype);return e.prototype.opened=function(t,e){n.opened.call(this,t,e),this.$body.on(this.eventName("mousedown"),".pac-container",this.autocompleteMousedownHandler.bind(this,e))},e.prototype.autocompleteMousedownHandler=function(){this.autocompleteClicked=!0},e.prototype.outsideClickHandler=function(t,e,i){this.autocompleteClicked?this.autocompleteClicked=!1:n.outsideClickHandler.call(this,t,e,i)},e}),define("components/disclose-hover-v3",["require","components/disclose-dropdown-v2","jquery","whatInput"],function(t){"use strict";function e(){i.apply(this,arguments)}var i=t("components/disclose-dropdown-v2"),r=t("jquery"),s=t("whatInput"),a=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-hover]",e.prototype.eventNamespace=".disclose-hover",e.prototype.CLOSE_DELAY=500,i.prototype);return e.prototype.start=function(){a.start.call(this),this.$body.on("mouseover"+this.eventNamespace,this.selector,this.toggleOverHandler.bind(this)),this.$body.on("mouseleave"+this.eventNamespace,this.selector,this.toggleLeaveHandler.bind(this))},e.prototype.toggleHandler=function(t){var e=r(t.target).closest(this.selector),i=e.is("a"),n=s.ask(),o=e.is("[data-disclose-hover--allow-enter-open]"),e=e.is("[data-disclose-hover--prevent-enter-open]");"touch"!==n||i||a.toggleHandler.call(this,t),"keyboard"!==n||e||i&&!o||a.toggleHandler.call(this,t)},e.prototype.opened=function(t,e){a.opened.call(this,t,e),e.on("mouseleave"+this.eventNamespace,this.discloseBodyLeaveHandler.bind(this,t)),e.on("mouseover"+this.eventNamespace,this.discloseBodyOverHandler.bind(this,t))},e.prototype.closed=function(t,e){a.closed.call(this,t,e),e.off(this.eventNamespace)},e.prototype.open=function(t){this.$body.find(this.selector).each(function(t,e){this.close(r(e))}.bind(this)),a.open.call(this,t)},e.prototype.toggleOverHandler=function(t){"mouse"===s.ask()&&(t=r(t.target).closest(this.selector),clearTimeout(t.data("closeTimeout")),this.open(t))},e.prototype.toggleLeaveHandler=function(t){var e=r(t.target).closest(this.selector),i=this.discloseBody(e);this.elementContains(i,t.relatedTarget)||e.data("closeTimeout",setTimeout(this.close.bind(this,e),this.CLOSE_DELAY))},e.prototype.discloseBodyOverHandler=function(t){clearTimeout(t.data("closeTimeout"))},e.prototype.discloseBodyLeaveHandler=function(t,e){this.elementContains(t,e.relatedTarget)||t.data("closeTimeout",setTimeout(this.close.bind(this,t),this.CLOSE_DELAY))},e}),define("components/disclose-lazy-buylinks",["require","core/ajax","components/disclose-dropdown-v2"],function(t){"use strict";function e(t){i.apply(this,arguments),this.$el=t,this.requests={}}var r=t("core/ajax"),i=t("components/disclose-dropdown-v2"),s=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-lazy-buylinks]",e.prototype.eventNamespace=".lazy-buylink",i.prototype);return e.prototype.open=function(t){var e,i,n=t.data("openedWithKeyboard"),o=(t.data("openedWithKeyboard",void 0),this.discloseBody(t));o.data("hasBuylinks")||(e=t.data("lazyBuylinkUrl"),i=o.attr("id"),this.requests[i]=r.get(e,null,null,this.responseHandler.bind(this,n,t,o))),s.open.call(this,t)},e.prototype.keyboardOpen=function(t){t.data("openedWithKeyboard",!0),s.keyboardOpen.call(this,t)},e.prototype.close=function(t){var e=t.attr("aria-controls");this.requests[e].abort(),s.close.call(this,t)},e.prototype.responseHandler=function(t,e,i,n,o){n||(i.find("[data-lazy-buylinks-loading]").replaceWith(o),i.data("hasBuylinks",!0),this.dropdownLayout.updated(i),t&&e[0]===document.activeElement&&this.focusFirstItem(i))},e}),define("components/disclose-collapsing-nav-v2",["require","components/disclose-dropdown-v2"],function(t){"use strict";function e(t,e){this.app=e,i.apply(this,arguments)}var i=t("components/disclose-dropdown-v2"),n=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-collapsing-nav]",e.prototype.eventNamespace=".disclose-collapsing-nav",i.prototype);return e.prototype.start=function(){n.start.call(this),this.updateSubscription=this.app.eventMediator.subscribe("collapsingNav.beforeUpdate",this.close.bind(this))},e.prototype.stop=function(){n.stop.call(this),this.app.eventMediator.unsubscribe(this.updateSubscription)},e}),define("components/disclose-artwork",["require","jquery","components/disclose-autoclose-v2"],function(t){"use strict";function e(t,e){this.app=e,n.apply(this,arguments)}var i=t("jquery"),n=t("components/disclose-autoclose-v2"),o=(((e.prototype=Object.create(n.prototype)).constructor=e).prototype.selector="[data-disclose-artwork]",e.prototype.eventNamespace=".disclose-artwork",n.prototype);return e.prototype.opened=function(t,e){o.opened.call(this,t,e),e.on(this.eventName("click"),this.discloseClickHandler.bind(this))},e.prototype.closed=function(t,e){o.closed.call(this,t,e),e.off(this.eventNamespace)},e.prototype.discloseClickHandler=function(t){t=i(t.delegateTarget).attr("id"),t=i(this.selector+'[aria-controls="'+t+'"]');this.close(t)},e}),define("components/disclose-remove",["require","components/disclose-base"],function(t){"use strict";function e(){i.apply(this,arguments)}var i=t("components/disclose-base"),n=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-remove]",e.prototype.eventNamespace=".disclose-remove",i.prototype);return e.prototype.opened=function(t,e){n.opened.call(this,t,e),t.remove()},e}),define("components/disclose-search",["require","jquery-ui","components/disclose-autoclose-v2"],function(t){"use strict";t("jquery-ui");function e(){i.apply(this,arguments)}var i=t("components/disclose-autoclose-v2"),n=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-search]",e.prototype.eventNamespace=".disclose-search",i.prototype);return e.prototype.opened=function(t,e){n.opened.call(this,t,e),this.focusFirstItem(e)},e.prototype.focusFirstItem=function(t){t.find(":tabbable").eq(0).focus()},e}),define("components/disclose-select",["require","jquery","components/disclose-dropdown-v2"],function(t){"use strict";function e(){i.apply(this,arguments)}var n=t("jquery"),i=t("components/disclose-dropdown-v2"),o=(((e.prototype=Object.create(i.prototype)).constructor=e).prototype.selector="[data-disclose-select]",e.prototype.eventNamespace=".disclose-select",i.prototype);return e.prototype.linkClicked=function(t,e,i){o.linkClicked.apply(this,arguments);i=n(i.target),t.text(i.text()),t=this.findSelectedClass(e);e.find("."+t).removeClass(t),i.addClass(t)},e.prototype.findSelectedClass=function(t){var e;return t.find("a, button").each(function(){var t=n(this).attr("class"),t=/[^\s]*--selected/.exec(t);if(t)return e=t[0],!1}),e},e}),define("components/edit-scrobble",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e,this.$el=i("body")}var i=t("jquery");return e.prototype.start=function(){this.$el.on("submit.edit-scrobble","[data-edit-scrobble]",function(t){t.preventDefault();var t=i(t.currentTarget),e=t.attr("action"),t={post:t.serialize(),onmessage:this.onmessage.bind(this,t)};this.app.modal.open(e,t)}.bind(this))},e.prototype.stop=function(){this.$el.off(".edit-scrobble")},e.prototype.onmessage=function(t,e){var i=-1!==e.indexOf("data-edit-scrobble-bulk"),t=t.parents("[data-scrobble-row]");i?(i=t.attr("data-edit-scrobble-id"),this.$el.find("[data-edit-scrobble-id="+i+"]").toArray().forEach(this.replaceRow.bind(this,e))):this.replaceRow(e,t[0])},e.prototype.replaceRow=function(t,e){e=i(e),t=i(t).find("[data-scrobble-row]");t.addClass("chartlist-row--flash"),t.addClass(e.attr("class")),t.find(".chartlist-timestamp").replaceWith(e.find(".chartlist-timestamp")),t.find("input[name=timestamp]").replaceWith(e.find("input[name=timestamp]")),e.replaceWith(t)},e}),define("core/math-v2",[],function(){"use strict";return{lerp:function(t,e,i){return t+i*(e-t)},mod:function(t,e){return(t%e+e)%e},sign:function(t){return t<0?-1:1},polarToCartesian:function(t,e){return[e*Math.cos(t),e*Math.sin(t)]}}}),define("components/features-footer",["require","jquery","core/math-v2"],function(t){"use strict";function e(t){this.$el=t}var i=t("jquery"),n=t("core/math-v2");return e.prototype.SLIDE_GESTURE_LENGTH_PERCENT=10,e.prototype.start=function(){this.$el.on("click.features-footer",".js-features-footer-next",this.nextClicked.bind(this)),this.$el.on("click.features-footer",".js-features-footer-previous",this.previousClicked.bind(this)),this.$el.on("touchstart.features-footer",this.touchStarted.bind(this)),this.$el.on("touchmove.features-footer",this.touchMoved.bind(this)),this.$el.on("touchend.features-footer",this.touchEnded.bind(this)),this.$itemsContainer=i(".js-features-footer-items",this.$el),this.$currentTarget=this.$itemsContainer.children().eq(0),this.$dots=i(".js-features-footer-dot",this.$el),this.currentDotIndex=0},e.prototype.stop=function(){this.$el.off(".features-footer")},e.prototype.nextClicked=function(){this.transitionNext()},e.prototype.previousClicked=function(){this.transitionPrevious()},e.prototype.touchStarted=function(t){this.touchStartX=this.touchX(t),this.swiping=!1,this.disableAnimation()},e.prototype.touchMoved=function(t){this.swiping||("swipe"===(t=this.decodeGesture(t)).type?(this.swiped(t),this.swiping=!0):this.dragged(t))},e.prototype.touchEnded=function(){this.enableAnimation(),this.$itemsContainer.css("left",0)},e.prototype.swiped=function(t){"left"===t.direction?this.transitionNext():this.transitionPrevious()},e.prototype.dragged=function(t){this.$itemsContainer.css("left",t.delta)},e.prototype.transitionNext=function(){var t=this.nextItem();this.transitionTo(t),this.shiftDot(1)},e.prototype.transitionPrevious=function(){var t=this.previousItem();this.transitionTo(t),this.shiftDot(-1)},e.prototype.transitionTo=function(t){var e=t.position().left,i=parseInt(this.$itemsContainer.css("left"),10);this.disableAnimation(),this.$itemsContainer.css("left",i+e),this.moveItemToFirstInDom(t),t.position(),this.enableAnimation(),this.$itemsContainer.css("left",0),this.$currentTarget=t},e.prototype.moveItemToFirstInDom=function(t){var e=this.$itemsContainer.children(),t=e.index(t);this.$itemsContainer.append(e.slice(0,t)),this.$itemsContainer.children().each(function(t,e){t=t<3;i(e).attr("aria-hidden",t?"false":"true"),i(e).find("a:not(.js-link-block-cover-link)").attr("tabindex",t?"0":"-1")})},e.prototype.shiftDot=function(t){this.currentDotIndex=n.mod(this.currentDotIndex+t,this.$dots.length),this.$dots.each(function(t,e){i(e).toggleClass("features-footer-dot--active",t===this.currentDotIndex)}.bind(this))},e.prototype.nextItem=function(){var t=this.$currentTarget.next();return t=t.length?t:this.$itemsContainer.children().eq(0)},e.prototype.previousItem=function(){var t=this.$currentTarget.prev();return t=t.length?t:this.$itemsContainer.children().eq(-1)},e.prototype.enableAnimation=function(){this.$el.removeClass("features-footer-disable-transition")},e.prototype.disableAnimation=function(){this.$el.addClass("features-footer-disable-transition")},e.prototype.touchX=function(t){return t.originalEvent.touches[0].clientX-this.$el[0].getBoundingClientRect().left},e.prototype.decodeGesture=function(t){t=this.touchX(t)-this.touchStartX;return 100/this.$el.width()*Math.abs(t)>=this.SLIDE_GESTURE_LENGTH_PERCENT?{type:"swipe",direction:0<n.sign(t)?"right":"left"}:{type:"drag",delta:t}},e}),define("components/form-field",[],function(){"use strict";function t(t,e,i){this.$input=t,this.messages=e,this.validator=i}return t.prototype.stop=function(){this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=void 0},t.prototype.focusHandler=function(){this.messages.show(this.messages.HELP)},t.prototype.blurHandler=function(){this.messages.hide(this.messages.HELP)},t.prototype.validate=function(){return new Promise(function(t,e){this.messages.showValidating(),this.validator.validate(this.$input.val(),this.validationHandler.bind(this,t,e))}.bind(this))},t.prototype.validationHandler=function(t,e,i,n){this.messages.hideValidating(),i||!n?e():n.valid?(this.messages.show(this.messages.SUCCESS,n),t()):(this.messages.show(this.messages.ERROR,n),e())},t}),define("components/live-validate-form-field",["require","components/form-field"],function(t){"use strict";function e(t,e,i,n){o.call(this,t,e,i),this.validationDelay=n,this.lastValue=t.val()}var o=t("components/form-field");return((e.prototype=Object.create(o.prototype)).constructor=e).prototype.inputHandler=function(){this.hasChanged()&&(this.validator.cancel(),this.messages.hideValidating(),this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(this.updated.bind(this),this.validationDelay))},e.prototype.changeHandler=function(){(this.updateTimeout||this.hasChanged())&&this.updated()},e.prototype.updated=function(){this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=void 0,this.validate()},e.prototype.hasChanged=function(){var t=this.$input.val(),e=t!==this.lastValue;return this.lastValue=t,e},e}),!function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(M){var e=Object.prototype.toString,E=Array.isArray||function(t){return"[object Array]"===e.call(t)};function c(t){return"function"==typeof t}function P(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t,e){return null!=t&&"object"==typeof t&&e in t}var i=RegExp.prototype.test;var n=/\S/;function j(t){return!i.call(n,t)}var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var L=/\s*/,_=/\s+/,I=/\s*=/,O=/\s*\}/,D=/#|\^|\/|>|\{|&|=|!/;function r(t,e){if(!t)return[];var i,n,o,r=[],s=[],a=[],l=!1,c=!1;function u(t){if("string"==typeof t&&(t=t.split(_,2)),!E(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(P(t[0])+"\\s*"),n=new RegExp("\\s*"+P(t[1])),o=new RegExp("\\s*"+P("}"+t[1]))}u(e||M.tags);for(var h,d,p,f,g,m,y=new R(t);!y.eos();){if(h=y.pos,p=y.scanUntil(i))for(var v=0,b=p.length;v<b;++v)if(j(f=p.charAt(v))?a.push(s.length):c=!0,s.push(["text",f,h,h+1]),h+=1,"\n"===f){if(l&&!c)for(;a.length;)delete s[a.pop()];else a=[];c=l=!1}if(!y.scan(i))break;if(l=!0,d=y.scan(D)||"name",y.scan(L),"="===d?(p=y.scanUntil(I),y.scan(I),y.scanUntil(n)):"{"===d?(p=y.scanUntil(o),y.scan(O),y.scanUntil(n),d="&"):p=y.scanUntil(n),!y.scan(n))throw new Error("Unclosed tag at "+y.pos);if(g=[d,p,h,y.pos],s.push(g),"#"===d||"^"===d)r.push(g);else if("/"===d){if(!(m=r.pop()))throw new Error('Unopened section "'+p+'" at '+h);if(m[1]!==p)throw new Error('Unclosed section "'+m[1]+'" at '+h)}else"name"===d||"{"===d||"&"===d?c=!0:"="===d&&u(p)}if(m=r.pop())throw new Error('Unclosed section "'+m[1]+'" at '+y.pos);for(var x,w=function(t){for(var e,i,n=[],o=0,r=t.length;o<r;++o)(e=t[o])&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}(s),k=[],T=k,A=[],C=0,S=w.length;C<S;++C)switch((x=w[C])[0]){case"#":case"^":T.push(x),A.push(x),T=x[4]=[];break;case"/":A.pop()[5]=x[2],T=0<A.length?A[A.length-1][4]:k;break;default:T.push(x)}return k}function R(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function t(){this.cache={}}R.prototype.eos=function(){return""===this.tail},R.prototype.scan=function(t){t=this.tail.match(t);if(!t||0!==t.index)return"";t=t[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t},R.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e,i=this.cache;if(i.hasOwnProperty(t))e=i[t];else{for(var n,o,r=this,s=!1;r;){if(0<t.indexOf("."))for(e=r.view,n=t.split("."),o=0;null!=e&&o<n.length;)o===n.length-1&&(s=a(e,n[o])),e=e[n[o++]];else e=r.view[t],s=a(r.view,t);if(s)break;r=r.parent}i[t]=e}return e=c(e)?e.call(this.view):e},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,e){var i=this.cache,n=i[t];return n=null==n?i[t]=r(t,e):n},t.prototype.render=function(t,e,i){var n=this.parse(t),e=e instanceof s?e:new s(e);return this.renderTokens(n,e,i,t)},t.prototype.renderTokens=function(t,e,i,n){for(var o,r,s,a="",l=0,c=t.length;l<c;++l)s=void 0,"#"===(r=(o=t[l])[0])?s=this.renderSection(o,e,i,n):"^"===r?s=this.renderInverted(o,e,i,n):">"===r?s=this.renderPartial(o,e,i,n):"&"===r?s=this.unescapedValue(o,e):"name"===r?s=this.escapedValue(o,e):"text"===r&&(s=this.rawValue(o)),void 0!==s&&(a+=s);return a},t.prototype.renderSection=function(t,e,i,n){var o=this,r="",s=e.lookup(t[1]);if(s){if(E(s))for(var a=0,l=s.length;a<l;++a)r+=this.renderTokens(t[4],e.push(s[a]),i,n);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)r+=this.renderTokens(t[4],e.push(s),i,n);else if(c(s)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(e.view,n.slice(t[3],t[5]),function(t){return o.render(t,e,i)}))&&(r+=s)}else r+=this.renderTokens(t[4],e,i,n);return r}},t.prototype.renderInverted=function(t,e,i,n){var o=e.lookup(t[1]);if(!o||E(o)&&0===o.length)return this.renderTokens(t[4],e,i,n)},t.prototype.renderPartial=function(t,e,i){if(i)return t=c(i)?i(t[1]):i[t[1]],null!=t?this.renderTokens(this.parse(t),e,i,t):void 0},t.prototype.unescapedValue=function(t,e){e=e.lookup(t[1]);if(null!=e)return e},t.prototype.escapedValue=function(t,e){e=e.lookup(t[1]);if(null!=e)return M.escape(e)},t.prototype.rawValue=function(t){return t[1]},M.name="mustache.js",M.version="2.3.0",M.tags=["{{","}}"];var l=new t;return M.clearCache=function(){return l.clearCache()},M.parse=function(t,e){return l.parse(t,e)},M.render=function(t,e,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(E(n=t)?"array":typeof n)+'" was given as the first argument for mustache#render(template, view, partials)');var n;return l.render(t,e,i)},M.to_html=function(t,e,i,n){t=M.render(t,e,i);if(!c(n))return t;n(t)},M.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return o[t]})},M.Scanner=R,M.Context=s,M.Writer=t,M}),define("components/field-messages",["require","jquery","mustache"],function(t){"use strict";function e(t,e,i){this.$group=t.parents(".js-form-group"),this.$controls=t.parents(".js-form-group-controls"),this.templates=e,this.options=i||{}}var i=t("jquery"),n=t("mustache");return e.prototype.SHOW_HELP_CLASS="form-validation--show-help-text",e.prototype.ERROR_STATE_CLASS="has-error",e.prototype.SUCCESS_STATE_CLASS="has-success",e.prototype.HELP="help",e.prototype.SUCCESS="success",e.prototype.ERROR="error",e.prototype.show=function(t,e){if(t===this.HELP){if(!!this.messages().length)return;this.showHelp()}t===this.SUCCESS&&(this.clear(),this.showSuccess(e)),t===this.ERROR&&(this.clear(),this.showError(e)),this.lastState=[].slice.call(arguments)},e.prototype.hide=function(t){t===this.HELP&&this.hideHelp()},e.prototype.clear=function(){this.$group.removeClass(this.ERROR_STATE_CLASS),this.$group.removeClass(this.SUCCESS_STATE_CLASS),this.$controls.removeClass(this.SHOW_HELP_CLASS),this.messages().remove()},e.prototype.showValidating=function(){var t;this.clear(),!1!==this.options.showValidation&&(t=i(n.render(this.templates.validating)),this.$controls.append(t))},e.prototype.hideValidating=function(){this.clear(),this.lastState&&this.show.apply(this,this.lastState)},e.prototype.showSuccess=function(t){!1!==this.options.showSuccess&&(this.$group.addClass(this.SUCCESS_STATE_CLASS),t=i(n.render(this.templates.success,t)),this.$controls.append(t))},e.prototype.showError=function(t){this.$group.addClass(this.ERROR_STATE_CLASS);t=i(n.render(this.templates.error,t));this.$controls.append(t)},e.prototype.showHelp=function(){this.$controls.addClass(this.SHOW_HELP_CLASS)},e.prototype.hideHelp=function(){this.$controls.removeClass(this.SHOW_HELP_CLASS)},e.prototype.messages=function(){return this.$controls.find(".js-form-group-success, .js-form-group-error, .js-form-group-validating")},e}),define("components/form-validation.js",["require","jquery","core/ajax","components/live-validate-form-field","components/field-messages"],function(t){"use strict";function i(t,e,i){this.name=t,this.$fields=e,this.endpoint=i}function e(t){this.$el=t,this.endpoint=t.data("validation-endpoint"),this.templates={success:this.$el.find(".js-field-success-template").text(),error:this.$el.find(".js-field-errors-template").text(),validating:this.$el.find(".js-field-validating-template").text()}}var n=t("jquery"),o=t("core/ajax"),r=t("components/live-validate-form-field"),s=t("components/field-messages");i.prototype.validate=function(t,e){var i=this.$fields.serialize();this.request&&this.request.abort(),this.request=o.post(this.endpoint,null,i,this.responseHandler.bind(this,e))},i.prototype.responseHandler=function(t,e,i){t(e,i&&i[this.name])},i.prototype.cancel=function(){this.request&&this.request.abort()};return e.prototype.VALIDATION_DELAY=2e3,e.prototype.start=function(){this.createFields(),this.bindEvents()},e.prototype.stop=function(){this.$el.off(".form-validation"),n.each(this.fields,function(){this.stop()})},e.prototype.createFields=function(){this.fields={},this.$el.find("input[name]").each(function(t,e){var e=n(e),i=e.attr("name");this.fields[i]=this.createField(e)}.bind(this))},e.prototype.createField=function(t){var e=new s(t,this.templates);return new r(t,e,new i(t.attr("name"),this.$el,this.endpoint),this.VALIDATION_DELAY)},e.prototype.bindEvents=function(){this.$el.on("focusin.form-validation",this.fieldHandler.bind(this,"focusHandler")),this.$el.on("focusout.form-validation",this.fieldHandler.bind(this,"blurHandler")),this.$el.on("change.form-validation",this.fieldHandler.bind(this,"changeHandler")),this.$el.on(["keyup.form-validation","contextmenu.form-validation","input.form-validation"].join(" "),this.fieldHandler.bind(this,"inputHandler"))},e.prototype.fieldHandler=function(t,e){e=n(e.target).attr("name"),e=this.fields[e];e&&e[t]()},e}),define("components/focus-controls",["require","jquery"],function(t){"use strict";function e(){this.$body=i(document.body)}var i=t("jquery");return e.prototype={namespace:".focus-controls",container:".js-focus-controls-container",start:function(){this.$body.on("focusin"+this.namespace,this.container,this.focusin.bind(this)),this.$body.on("focusout"+this.namespace,this.container,this.focusout.bind(this)),this.$body.on("mouseenter"+this.namespace,this.container,this.focusin.bind(this)),this.$body.on("mouseleave"+this.namespace,this.container,this.mouseleave.bind(this)),this.$body.addClass("enable-focus-controls")},stop:function(){this.$body.off(this.namespace),this.$body.removeClass("enable-focus-controls")},focusin:function(t){this.parentOrSelf(t.target,this.container).addClass("show-focus-controls")},focusout:function(t){this.parentOrSelf(t.target,this.container).removeClass("show-focus-controls")},mouseleave:function(t){t=this.parentOrSelf(t.target,this.container);t.find(".focus-control .disclose-active").length||t.removeClass("show-focus-controls")},parentOrSelf:function(t,e){t=i(t);return t.is(e)?t:t.parents(e)}},e}),define("components/async-content",["require","jquery","core/ajax"],function(t){"use strict";function e(t,e){this.$el=t,this.moduleLoader=e}var i=t("jquery"),n=t("core/ajax");return e.prototype.load=function(t){this.abort(),this.$el.addClass("async-content-loading"),this.request=n.get(t.url,null,t.data,this.responded.bind(this,t.errorMessage,t.callback))},e.prototype.stop=function(){this.abort(),this.moduleLoader.stopAllModules(this.$el)},e.prototype.abort=function(){this.request&&this.request.abort()},e.prototype.responded=function(t,e,i,n){this.$el.removeClass("async-content-loading"),i?this.failed(t):(this.succeeded(n),e&&e())},e.prototype.failed=function(t){t&&(t=i("<p></p>").text(t).addClass("async-content-error-message"),this.$el.append(t),this.$el.addClass("async-content-failed"))},e.prototype.succeeded=function(t){this.$el.html(t),this.$el.addClass("async-content-loaded"),this.moduleLoader.startAllModules(this.$el)},e}),define("components/lazy-load-v3",["require","components/async-content","shim/on-screen"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e,this.asyncContent=new i(t,e.moduleLoader)}var i=t("components/async-content"),n=t("shim/on-screen");return e.prototype.scrollContainer=null,e.prototype.start=function(){this.$el.is("[data-lazy-load-inverted-bg]")&&this.$el.addClass("inverted-bg"),this.$el.is("[data-lazy-load-when-on-screen]")?this.onScreen=new n(this.$el.get(0),this.entered.bind(this),{root:this.scrollContainer}):this.load(),this.$el.addClass("async-content-loading")},e.prototype.stop=function(){this.asyncContent.stop(),this.onScreen&&this.onScreen.destroy()},e.prototype.load=function(){var t=this.$el.data("lazy-load-content"),e=this.$el.data("lazy-load-error-message");this.asyncContent.load({url:t,errorMessage:e})},e.prototype.entered=function(){this.onScreen.destroy(),this.load()},e}),define("components/lazy-filter",["require","jquery","core/ajax"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var o=t("jquery"),n=t("core/ajax");return e.prototype.start=function(){this.id=this.$el.attr("data-lazy-filter-options"),this.$options=o("#"+this.id),this.$options.on("click.lazy-filter","a",this.clickHandler.bind(this))},e.prototype.stop=function(){this.request&&this.request.abort(),this.app.moduleLoader.stopAllModules(this.$el)},e.prototype.clickHandler=function(t){t.preventDefault();var t=o(t.target).attr("data-partial-href"),i=this.update.bind(this);this.request=n.get(t,null,null,function(t,e){i(e)})},e.prototype.update=function(t){var e=o(t),i=o("[data-lazy-filter-more-link="+this.id+"]"),n=e.find("[data-lazy-filter-more-link]").attr("href"),i=(i.attr("href",n),this.dataAttributeValues(e,"data-lazy-filter-show-element")),n=(i&&o("#"+i).removeClass("hidden"),this.dataAttributeValues(e,"data-lazy-filter-hide-element"));n&&o("#"+n).addClass("hidden"),this.$el.html(t),this.app.moduleLoader.startAllModules(this.$el)},e.prototype.dataAttributeValues=function(t,e){return t.find(`[${e}]`).addBack(`[${e}]`).attr(e)},e}),define("components/link-block",["require","jquery"],function(t){"use strict";function e(t){this.$el=t}var n=t("jquery");return e.prototype.start=function(){this.$el.on("mouseover.link-block, touchstart.link-block",".js-link-block-cover-link",this.mouseOverHandler.bind(this)),this.$el.on("mouseout.link-block, touchend.link-block",".js-link-block-cover-link",this.mouseOutHandler.bind(this,".link-block-target")),n(window).on("blur.link-block, pagehide.link-block",function(){this.removeHover(this.$el.find(".js-link-block"))}.bind(this)),this.$el.on("mouseover.link-block, touchstart.link-block, focusin.link-block",".link-block-target",this.mouseOverHandler.bind(this)),this.$el.on("mouseout.link-block, touchend.link-block, focusout.link-block",".link-block-target",this.mouseOutHandler.bind(this,".js-link-block-cover-link"))},e.prototype.stop=function(){n(window).off(".link-block"),this.$el.off(".link-block")},e.prototype.mouseOverHandler=function(t){this.addHover(n(t.target))},e.prototype.mouseOutHandler=function(t,e){var i=n(e.target),e=n(e.relatedTarget);i.closest(".js-link-block").get(0)==e.closest(".js-link-block").get(0)&&e.closest(t).length||this.removeHover(i)},e.prototype.addHover=function(t){t.closest(".js-link-block").addClass("link-block--hover")},e.prototype.removeHover=function(t){t.closest(".js-link-block").removeClass("link-block--hover")},e}),define("components/logout-form",["require","jquery"],function(t){"use strict";function e(t,e){this.$el=t}t("jquery");return e.prototype.start=function(){this.$el.on("click.logout-form",".js-logout-button",this.logout.bind(this))},e.prototype.stop=function(){this.$el.off(".logout-form")},e.prototype.logout=function(t){t.preventDefault(),this.$el.submit()},e}),!function(t){define("bootstrap",["jquery"],function(){return function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(o){"use strict";function i(t){t=t.attr("data-target")||(t=t.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return o(t)}function r(n){return this.each(function(){var t=o(this),e=t.data("bs.collapse"),i=o.extend({},s.DEFAULTS,t.data(),"object"==typeof n&&n);!e&&i.toggle&&/show|hide/.test(n)&&(i.toggle=!1),e||t.data("bs.collapse",e=new s(this,i)),"string"==typeof n&&e[n]()})}function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,e),this.$trigger=o('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()}s.VERSION="3.3.5",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&((n=t.data("bs.collapse"))&&n.transitioning))){var e=o.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){t&&t.length&&(r.call(t,"hide"),n||t.data("bs.collapse",null));var i=this.dimension(),e=(this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")});if(!o.support.transition)return e.call(this);var n=o.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",o.proxy(e,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[i](this.$element[0][n])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t,e=o.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented())return e=this.dimension(),this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,t=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},o.support.transition?void this.$element[e](0).one("bsTransitionEnd",o.proxy(t,this)).emulateTransitionEnd(s.TRANSITION_DURATION):t.call(this)}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return o(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(t,e){e=o(e);this.addAriaAndCollapsedClass(i(e),e)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var t=o.fn.collapse;o.fn.collapse=r,o.fn.collapse.Constructor=s,o.fn.collapse.noConflict=function(){return o.fn.collapse=t,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=o(this),t=(e.attr("data-target")||t.preventDefault(),i(e)),e=t.data("bs.collapse")?"toggle":e.data();r.call(t,e)})}(jQuery)}.apply(t,arguments)})}(this),define("components/masthead",["require","jquery","lodash","bootstrap"],function(t){"use strict";t("jquery"),t("lodash"),t("bootstrap");return function(t){}}),define("components/open-modal",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e}var i=t("jquery");return e.prototype.start=function(){i("body").on("click.open-modal","[data-open-modal]",this.open.bind(this)),i("body").on("click.open-modal","[data-close-modal]",this.close.bind(this))},e.prototype.stop=function(){i("body").off("click.open-modal")},e.prototype.open=function(t){var e;t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(e=i(t.currentTarget),t.preventDefault(),this.app.modal.open(e.data("open-modal")||e.attr("href")))},e.prototype.close=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.preventDefault(),this.app.modal.close())},e}),define("components/form-loading",[],function(){"use strict";return{loading:function(t){t=t.find("[type=submit]");t.attr("disabled",!0),t.addClass("btn--loading")},done:function(t){t=t.find("[type=submit]");t.attr("disabled",!1),t.removeClass("btn--loading")}}}),define("components/prevent-resubmit-v2",["require","jquery","components/form-loading"],function(t){"use strict";function e(){this.$el=i("body"),this.submitted=!1}var i=t("jquery"),n=t("components/form-loading");return e.prototype={selector:"[data-prevent-resubmit]",start:function(){this.$el.on("submit.preventResubmit",this.selector,this.submitHandler.bind(this)),this.$el.on("prevent-resubmit-done.preventResubmit",this.selector,this.doneHandler.bind(this))},stop:function(){this.$el.off(".preventResubmit")},submitHandler:function(t){var e=i(t.target);e.data("prevent-resubmit-submitted")?t.preventDefault():(n.loading(e),e.data("prevent-resubmit-submitted",!0))},doneHandler:function(t){t=i(t.target);t.data("prevent-resubmit-submitted",!1),n.done(t)}},e}),define("components/collapsing-nav-v2",["require","jquery","uuid"],function(t){"use strict";function e(t,e){this.$el=t,this.eventMediator=e.eventMediator}var s=t("jquery"),n=t("uuid");return e.prototype={start:function(){var t="nav-"+n(),e=(this.$list=this.$el.find(".js-navlist-items"),this.$tabs=this.$list.find("li"),this.$list.parent()),i=s("<div></div>").addClass("disclose-hide").addClass("navlist-hidden-list-wrap").attr("id",t),t=(this.$el.is("[collapsing-nav-no-more-wrap]")||(e=s("<div></div>").addClass("navlist-more-wrap"),this.$list.after(e)),this.$button=s("<button></button>").text(this.$el.data("moreString")).attr("aria-expanded",!1).attr("aria-controls",t).attr("data-disclose-collapsing-nav",!0).addClass("navlist-more"),e.append(this.$button),this.$list.clone());t.find("[data-tour-name]").remove(),t.add(t.find("*")).removeAttr("class"),t.addClass("navlist-hidden-list"),i.append(t),e.append(i),this.$hiddenTabs=t.find("li"),s(window).on("resize.collapsing-nav",this.resizeHandler.bind(this)),this.recommendedNextSubscription=this.eventMediator.subscribe("recommendednext.started",this.resizeHandler.bind(this)),this.$list.css("position","relative"),this.updateMoreMenu()},stop:function(){s(window).off(".collapsing-nav"),this.eventMediator.unsubscribe(this.recommendedNextSubscription)},updateMoreMenu:function(){var n=this,o=(this.eventMediator.publish("collapsingNav.beforeUpdate",this.$button),this.hideButton(),this.$tabs.removeClass("navlist-item--hidden"),this.$tabs.map(function(){var t=s(this);return Math.floor(t.position().left+t.outerWidth(!0))}).get()),r=this.$el.width();o[o.length-1]>r?(this.showButton(),r-=this.$button.outerWidth(!0)):this.hideButton(),this.$tabs.each(function(t){var e=s(this),i=n.$hiddenTabs.eq(t);o[t]>r?(e.addClass("navlist-item--hidden"),i.removeClass("navlist-more-item--hidden")):(e.removeClass("navlist-item--hidden"),i.addClass("navlist-more-item--hidden"))})},showButton:function(){this.$button.removeClass("navlist-more--hidden"),this.$el.addClass("navlist--more-visible")},hideButton:function(){this.$button.addClass("navlist-more--hidden"),this.$el.removeClass("navlist--more-visible")},resizeHandler:function(){this.updateMoreMenu()}},e}),define("components/primary-nav",["require","jquery","lodash","components/collapsing-nav-v2"],function(t){"use strict";function e(){o.apply(this,arguments)}var i=t("jquery"),n=t("lodash"),o=t("components/collapsing-nav-v2"),r=(e.prototype=Object.create(o.prototype),o.prototype);return(e.prototype.constructor=e).prototype.start=function(){r.start.call(this);var t=n.debounce(this.updateMoreMenu.bind(this),100);i(window).resize(t)},e}),define("components/submit-to-modal",["require","jquery"],function(t){"use strict";function e(t,e){this.app=e}var i=t("jquery");return e.prototype.start=function(){i("body").on("submit.submit-to-modal","[data-submit-to-modal]",function(t){t.preventDefault();var t=i(t.currentTarget),e=!1,e=t.attr("action")?t.attr("action"):t.data("modal-action"),t={post:t.serialize()};this.app.modal.open(e,t)}.bind(this))},e.prototype.stop=function(){i("body").off(".submit-to-modal")},e}),define("components/spotify-scrobbling-prompt",[],function(){"use strict";function t(t,e){this.$el=t,this.app=e}return t.prototype.start=function(){this.subscription=this.app.eventMediator.subscribe("player.spotify.connected",this.connected.bind(this))},t.prototype.stop=function(){this.app.eventMediator.unsubscribe(this.subscription)},t.prototype.connected=function(t){t.show_scrobbling_prompt&&this.$el.removeClass("masthead-popup--hidden")},t}),define("social/auth-window",["require","core/ajax","core/browser-api","jquery"],function(t){"use strict";var e=t("core/ajax"),s=t("core/browser-api"),a=t("jquery");function l(t,n,o){return new Promise(function(e,i){n.location=t,s.window.addEventListener("message",function(t){t.origin===window.location.protocol+"//"+window.location.host&&((t=t.data&&t.data[o])&&!0===t.authenticated&&(n.close(),e(t)),t&&!1===t.authenticated&&(n.close(),i(t)))})})}function i(t,e){var i=a(s.window),n=s.window.screenLeft||s.window.screenX,o=s.window.screenTop||s.window.screenY,r=i.width(),i=i.height();return a.map({left:n+r/2-t/2,top:o+i/2-e/2,width:t,height:e},function(t,e){return[e,t].join("=")}).join(",")}function c(t,e){t.closed?e():setTimeout(c.bind({},t,e),500)}return{status:function(t,o){var r=s.window.open("","_blank",i(720,720));return new Promise(function(i,n){c(r,n),e.get(t,{},{},function(t,e){e.authenticated?(r.close(),i(e)):l(e.authenticationUrl,r,o).then(i).catch(n)})})},reauthenticate:function(t,o){var r=s.window.open("","_blank",i(720,720));return new Promise(function(i,n){c(r,n),e.get(t,{},{},function(t,e){l(e.authenticationUrl,r,o).then(i).catch(n)})})}}}),define("social/spotify-scrobbling",["require","social/auth-window"],function(t){"use strict";var e=t("social/auth-window");return{reauthenticate:function(){return e.reauthenticate("/social/spotify-scrobbling-reauthenticate","spotify_scrobbling_authentication")}}}),define("components/spotify-scrobbling-starter",["require","social/spotify-scrobbling"],function(t){"use strict";function e(t,e){this.$el=t,this.successPath=this.$el.data("spotify-scobbling-success-modal"),this.failPath=this.$el.data("spotify-scobbling-fail-modal"),this.modal=e.modal}var i=t("social/spotify-scrobbling");return e.prototype.start=function(){this.$el.on("click.spotify-scrobbling-starter",this.click.bind(this))},e.prototype.stop=function(){this.$el.off(".spotify-scrobbling-starter")},e.prototype.click=function(t){t.preventDefault(),i.reauthenticate().then(this.success.bind(this)).catch(this.fail.bind(this))},e.prototype.success=function(){this.modal.open(this.successPath)},e.prototype.fail=function(){this.modal.open(this.failPath)},e}),define("components/spotify-scrobbling-banner",["require","components/spotify-scrobbling-starter"],function(t){"use strict";function e(t,e){i.call(this,t,e)}var i=t("components/spotify-scrobbling-starter"),n=(e.prototype=Object.create(i.prototype),i.prototype);return(e.prototype.constructor=e).prototype.start=function(){this.$el.on("click.spotify-scrobbling-banner",".js-setup-spotify-scrobbling",this.click.bind(this))},e.prototype.stop=function(){this.$el.off(".spotify-scrobbling-banner")},e.prototype.success=function(){n.success.call(this),this.$el.remove()},e}),define("components/click-proxy",["require","jquery"],function(t){"use strict";function e(t,e){this.$body=i(document.body)}var i=t("jquery");return e.prototype.start=function(){this.$body.on("click.click-proxy","[data-click-proxy]",function(t){t.preventDefault();t=i(t.target).attr("data-click-proxy");i("#"+t).click()})},e.prototype.stop=function(){this.$body.off("click.click-proxy")},e}),define("core/media-size-events-v2",["require","core/media-size-v2","jquery"],function(t){"use strict";function e(t,e){this.eventMediator=e.eventMediator}var i=t("core/media-size-v2"),n=t("jquery");return e.prototype={resizeHandler:function(){var t=i.getMediaSize();this.lastSize!==t&&this.eventMediator.publish("mediaSize.change",{isMobile:i.isMobile(),size:i.getMediaSize()}),this.lastSize=t},start:function(){this.lastSize=i.getMediaSize(),n(window).on("resize.mediaSizeEvents",this.resizeHandler.bind(this))},stop:function(){n(window).off(".mediaSizeEvents")}},e}),!function(t,e){var i;"function"==typeof define&&define.amd?define("jquery-serialize-object",["exports","jquery"],e):"undefined"!=typeof exports?(i=require("jquery"),e(exports,i)):e(t,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,a){function e(n,e){function r(t,e,i){return t[e]=i,t}function i(t,e){for(var i,n,o=t.match(l.key);void 0!==(i=o.pop());)l.push.test(i)?(n=t.replace(/\[\]$/,""),void 0===s[n]&&(s[n]=0),e=r([],s[n]++,e)):l.fixed.test(i)?e=r([],i,e):l.named.test(i)&&(e=r({},i,e));return e}function t(){return o}var o={},s={};this.addPair=function(t){return l.validate.test(t.name)&&(t=i(t.name,"checkbox"===a('[name="'+(t=t).name+'"]',e).attr("type")&&"on"===t.value||t.value),o=n.extend(!0,o,t)),this},this.addPairs=function(t){if(!n.isArray(t))throw new Error("formSerializer.addPairs expects an Array");for(var e=0,i=t.length;e<i;e++)this.addPair(t[e]);return this},this.serialize=t,this.serializeJSON=function(){return JSON.stringify(o)}}var l={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return e.patterns=l,e.serializeObject=function(){return new e(a,this).addPairs(this.serializeArray()).serialize()},e.serializeJSON=function(){return new e(a,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==a.fn&&(a.fn.serializeObject=e.serializeObject,a.fn.serializeJSON=e.serializeJSON),t.FormSerializer=e}),!function(t,e){"function"==typeof define&&define.amd?define("autosize",["module","exports"],e):"undefined"!=typeof exports?e(module,exports):(e(e={exports:{}},e.exports),t.autosize=e.exports)}(this,function(t,e){"use strict";var i,n,u="function"==typeof Map?new Map:(i=[],n=[],{has:function(t){return-1<i.indexOf(t)},get:function(t){return n[i.indexOf(t)]},set:function(t,e){-1===i.indexOf(t)&&(i.push(t),n.push(e))},delete:function(t){t=i.indexOf(t);-1<t&&(i.splice(t,1),n.splice(t,1))}}),h=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){h=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function o(n){var i,o,r,t,s,e;function a(t){var e=n.style.width;n.style.width="0px",n.offsetWidth,n.style.width=e,n.style.overflowY=t}function l(){var t,e;0!==n.scrollHeight&&(t=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(n),e=document.documentElement&&document.documentElement.scrollTop,n.style.height="",n.style.height=n.scrollHeight+i+"px",o=n.clientWidth,t.forEach(function(t){t.node.scrollTop=t.scrollTop}),e&&(document.documentElement.scrollTop=e))}function c(){l();var t=Math.round(parseFloat(n.style.height)),e=window.getComputedStyle(n,null),i="content-box"===e.boxSizing?Math.round(parseFloat(e.height)):n.offsetHeight;if(i<t?"hidden"===e.overflowY&&(a("scroll"),l(),i="content-box"===e.boxSizing?Math.round(parseFloat(window.getComputedStyle(n,null).height)):n.offsetHeight):"hidden"!==e.overflowY&&(a("hidden"),l(),i="content-box"===e.boxSizing?Math.round(parseFloat(window.getComputedStyle(n,null).height)):n.offsetHeight),r!==i){r=i;t=h("autosize:resized");try{n.dispatchEvent(t)}catch(t){}}}n&&n.nodeName&&"TEXTAREA"===n.nodeName&&!u.has(n)&&(r=o=i=null,t=function(){n.clientWidth!==o&&c()},s=function(e){window.removeEventListener("resize",t,!1),n.removeEventListener("input",c,!1),n.removeEventListener("keyup",c,!1),n.removeEventListener("autosize:destroy",s,!1),n.removeEventListener("autosize:update",c,!1),Object.keys(e).forEach(function(t){n.style[t]=e[t]}),u.delete(n)}.bind(n,{height:n.style.height,resize:n.style.resize,overflowY:n.style.overflowY,overflowX:n.style.overflowX,wordWrap:n.style.wordWrap}),n.addEventListener("autosize:destroy",s,!1),"onpropertychange"in n&&"oninput"in n&&n.addEventListener("keyup",c,!1),window.addEventListener("resize",t,!1),n.addEventListener("input",c,!1),n.addEventListener("autosize:update",c,!1),n.style.overflowX="hidden",n.style.wordWrap="break-word",u.set(n,{destroy:s,update:c}),"vertical"===(e=window.getComputedStyle(n,null)).resize?n.style.resize="none":"both"===e.resize&&(n.style.resize="horizontal"),i="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(i)&&(i=0),c())}function r(t){t=u.get(t);t&&t.destroy()}function s(t){t=u.get(t);t&&t.update()}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((a=function(t){return t}).destroy=function(t){return t},a.update=function(t){return t}):((a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.default=a,t.exports=e.default}),define("community/shout-alerts",["require","jquery"],function(t){"use strict";var s=t("jquery"),o={POSTING_MESSAGES:"POSTING",ACTION_MESSAGES:"ACTION",clearActionMessages:function(t,e){o.clearMessages(o.ACTION_MESSAGES,t,e)},displayActionErrorMessages:function(t,e,i,n){o.displayErrorMessages(o.ACTION_MESSAGES,t,e,i,n)},clearPostingMessages:function(t,e){o.clearMessages(o.POSTING_MESSAGES,t,e)},displayPostingErrorMessages:function(t,e,i,n){o.displayErrorMessages(o.POSTING_MESSAGES,t,e,i,n)},clearMessages:function(t,e,i){i=a(i,t);e.find(i).empty()},displayErrorMessages:function(t,e,i,n,o){var i=a(i,t),t=n&&n.errors?n.errors:[{message:o}],r=e.find(i);t.forEach(function(t){r.append(s('<p class="alert alert-danger" role="alert">'+t.message+"</p>"))})}},a=function(t,e){return e==o.POSTING_MESSAGES?'[data-shout-form-messages-for="'+t+'"]':'[data-shout-action-messages-for="'+t+'"]'};return o}),define("community/shoutbox",["require","jquery","jquery-cookie","jquery-serialize-object","components/confirm","core/ajax","uuid","autosize","community/shout-alerts"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var r=t("jquery"),n=(t("jquery-cookie"),t("jquery-serialize-object"),t("components/confirm")),o=t("core/ajax"),s=t("uuid"),a=t("autosize"),l=t("community/shout-alerts"),c="shout-more-replies-loading";return e.prototype.start=function(){this.replyTemplate=this.$el.find(".js-reply-template").html(),this.shoutFailedMessage=this.$el.data("shout-failed"),this.deleteFailedMessage=this.$el.data("delete-failed"),this.maxReplyDepth=parseInt(this.$el.data("max-reply-depth"),10),this.$el.on("change.comments keyup.comments paste.comments",".js-shout-input",this.updateCharCount.bind(this)),a(this.$el.find(".js-shout-input")),this.$el.on("submit.comments",".js-post-shout",this.postForm.bind(this)),this.$el.on("submit.comments",".js-delete-shout",this.deleteShout.bind(this)),this.$el.on("click.comments",".js-shout-reply",this.replyClicked.bind(this)),this.$el.on("click.comments",".js-shout-reply-cancel",this.replyCancelClicked.bind(this)),this.$el.on("click.comments",".js-more-replies",this.moreRepliesClicked.bind(this)),this.$el.find(".js-more-replies").data("in-progress",!1)},e.prototype.stop=function(){this.$el.off(".comments"),a.destroy(this.$el.find(".js-shout-input"))},e.prototype.updateCharCount=function(t){var t=r(t.target),e=t.val().length,t=t.parents("form"),i=t.find(".js-field-help-text"),t=(t.find(".js-char-count").html(e),t.find(".js-shout-input").attr("maxlength"));t&&(t=parseInt(t,10),i.toggleClass("shout-form-char-count--limit",t<=e))},e.prototype.postForm=function(t){t.preventDefault();var t=r(t.target),e=t.attr("action"),i=(l.clearPostingMessages(this.$el,e),t.serializeObject());o.post(e,null,i,this.postResponded.bind(this,t))},e.prototype.postResponded=function(t,e,i){if(t.trigger("prevent-resubmit-done"),e||"string"!=typeof i)return e=t.attr("action"),void l.displayPostingErrorMessages(this.$el,e,i,this.shoutFailedMessage);e=this.container(t),this.updateList(e,i),e=t.find(".js-shout-input");e.val("").change(),a.update(e)},e.prototype.updateList=function(t,e){var i,n=t.is(".js-shout-list-item"),o=t.find(".js-shout-list").eq(0);o.length?(i=r(e).find(".js-shout-list-item"),n?o.append(i):o.prepend(i)):t.find(".js-shouts-insertion-hook").eq(0).replaceWith(e)},e.prototype.deleteShout=function(t){t.preventDefault();var i=r(t.target);n.openConfirmDialog(i,this.app).then(function(){var t=i.attr("action"),e=(l.clearActionMessages(this.$el,t),i.serializeObject());o.post(t,null,e,this.deleteResponded.bind(this,i))}.bind(this))},e.prototype.deleteResponded=function(t,e,i){if(!(!e&&i&&i.result))return e=t.attr("action"),void l.displayActionErrorMessages(this.$el,e,i,this.deleteFailedMessage);t.parents(".js-shout-list-item").first().remove()},e.prototype.replyClicked=function(t){t.preventDefault();var t=r(t.target),e=this.addGetReplyUi(t);t.is(".shout-reply--open")?(this.hideReplyForm(e),this.replyButtonClose(t)):(this.showReplyForm(e,t),this.replyButtonCloseAll(e),this.replyButtonOpen(t,e))},e.prototype.replyCancelClicked=function(t){t=r(t.target).parents(".js-shout-reply-ui");this.hideReplyForm(t),this.replyButtonCloseAll(t)},e.prototype.addGetReplyUi=function(t){var e,i=this.container(t),n=(i=i.parents(".js-shouts-container").length>=this.maxReplyDepth?this.container(i):i).children(".js-shout-reply-ui");return n.length||(e=t.attr("href"),e=encodeURIComponent(e),e=this.replyTemplate.replace(/SHOUTS_URL/g,e),(n=r(e)).addClass("shout-reply-ui--hidden"),n.find("form").attr("action",t.attr("href")),n.find("[data-shout-form-messages-for]").attr("data-shout-form-messages-for",t.attr("href")),n.attr("id","reply-ui-"+s()),a(n.find(".js-shout-input")),i.append(n)),n},e.prototype.showReplyForm=function(t,e){t.removeClass("shout-reply-ui--hidden");var i=t.find("textarea");i.length?i.focus():(t.get(0).tabIndex=-1,t.focus()),a.update(t.find(".js-shout-input")),this.replyButtonOpen(e,t)},e.prototype.hideReplyForm=function(t){t.addClass("shout-reply-ui--hidden")},e.prototype.replyButtonOpen=function(t,e){t.attr("aria-controls",e.attr("id")),t.attr("aria-expanded",!0),t.addClass("shout-reply--open")},e.prototype.replyButtonClose=function(t){t.attr("aria-expanded",!1),t.removeClass("shout-reply--open")},e.prototype.replyButtonCloseAll=function(t){t=t.attr("id"),t=this.$el.find("[aria-controls="+t+"]");this.replyButtonClose(t)},e.prototype.container=function(t){return t.parents(".js-shouts-container").eq(0)},e.prototype.moreRepliesClicked=function(t){t.preventDefault();var e,i,n,t=r(t.target);t.data("in-progress")||(t.data("in-progress",!0),t.addClass(c),e=t.attr("href"),i={},(n=t.is("[data-more-replies-after]"))&&(i.more="after"),o.get(e,null,i,this.moreRepliesLoaded.bind(this,t,n)))},e.prototype.moreRepliesLoaded=function(t,e,i,n){var o;t.data("in-progress",!1),t.removeClass(c),i||(n=(i=r("<div>"+n+"</div>")).find("ul:first > li"),o=t.siblings(".shout-list"),e?o.append(n):o.prepend(n),(o=i.find(e?"> [data-more-replies-after]":"> [data-more-replies-before]")).length?t.attr("href",o.attr("href")):t.remove())},e}),define("community/report",["require","jquery","core/ajax","community/shout-alerts","jquery-serialize-object"],function(t){"use strict";function e(t){this.$el=t}var n=t("jquery"),o=t("core/ajax"),r=t("community/shout-alerts");t("jquery-serialize-object");return e.prototype.start=function(){this.errorMessage=this.$el.data("report-failed"),this.$el.on("submit.report",".js-report",this.submitted.bind(this))},e.prototype.stop=function(){this.$el.off(".report")},e.prototype.submitted=function(t){t.preventDefault();var t=n(t.target),e=t.attr("action"),i=(r.clearActionMessages(this.$el,e),t.serializeObject());o.post(e,null,i,this.responded.bind(this,t))},e.prototype.responded=function(t,e,i){if(e||i&&!1===i.result)return e=t.attr("action"),void r.displayActionErrorMessages(this.$el,e,i,this.errorMessage);e=t.parents(".js-shout"),t=n(i).find(".js-shout").eq(0);e.replaceWith(t)},e}),define("player/controls",["require","core/ajax","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var n=t("core/ajax"),o=t("jquery");function i(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),t=Math.floor(t%60);return i<10&&(i="0"+i),t<10&&(t="0"+t),(0<(e=e<10?"0"+e:e)?[e,i,t]:[i,t]).join(":")}return e.prototype={ERROR_MESSAGE_DURATION:5e3,constructor:e,start:function(){var i=this;this.$artworkLink=this.$el.find(".js-artwork"),this.$artwork=this.$artworkLink.find("img"),this.$source=this.$el.find(".js-source"),this.$switchDevice=this.$el.find(".js-switch-device"),this.$listeningOn=this.$el.find(".js-player-bar-listening-on"),this.$elapsedLabel=this.$el.find(".js-progress-elapsed"),this.$remainingLabel=this.$el.find(".js-progress-remaining"),this.$progressSlug=this.$el.find(".js-progress-slug"),this.$playPauseButton=this.$el.find(".js-play-pause"),this.$previousButton=this.$el.find(".js-previous"),this.$nextButton=this.$el.find(".js-next"),this.$loveButton=this.$el.find(".js-love"),this.$sourceButtons=this.$el.find(".js-switch-source"),this.pauseString=this.$playPauseButton.data("string-pause"),this.pauseAnalyticsAction=this.$playPauseButton.data("analytics-action-pause"),this.playString=this.$playPauseButton.text().trim(),this.playAnalyticsAction=this.$playPauseButton.data("analytics-action"),this.defaultArtwork=this.$artwork.attr("src"),this.$nextButton.on("click.player.controls",function(t){t.preventDefault(),i.app.player.next()}),this.$previousButton.on("click.player.controls",function(t){t.preventDefault(),i.app.player.previous()}),this.$loveButton.on("click.player.controls",function(t){var e;o(t.target).hasClass("js-click-enabled")&&(e=i.track.userLoves,i.track.userLoves=!e,i.updateLoveButton(),i.track.userLoves&&(i.$loveButton.addClass("disable-hover"),i.$loveButton.on("mouseout.player.controls",function(){i.$loveButton.removeClass("disable-hover"),i.$loveButton.off("mouseout.player.controls")})),t={track:i.track.trackName,artist:i.track.artistName},e&&(t.unlove=!0),n.post(i.track.loveUrl,null,t,function(t){t&&(i.track.userLoves=e,i.updateLoveButton())}))}),this.$sourceButtons.on("click",function(t){t.preventDefault();t=o(this).data("source");i.app.player.play(t)}),this.$switchDevice.on("click",this.switchDevice.bind(this)),this.app.eventMediator.subscribe("player.track.positionChanged",this.updateTrackPosition.bind(this)),this.app.eventMediator.subscribe("player.track.added",this.updateNextButton.bind(this)),this.app.eventMediator.subscribe("player.track.playing",this.showPlayingStatus.bind(this)),this.app.eventMediator.subscribe("player.track.paused",this.showPlayButton.bind(this)),this.app.eventMediator.subscribe("player.track.stopped",this.disable.bind(this)),this.app.eventMediator.subscribe("player.track.finished",this.disable.bind(this)),this.app.eventMediator.subscribe("player.ad.playing",this.adPlaying.bind(this)),this.app.eventMediator.subscribe("player.deviceChanged",this.deviceChanged.bind(this))},switchDevice:function(){this.app.player.switchDevice.call(this.app.player)},showPlayingStatus:function(t){this.updateProviderClass(t.affiliate),this.updateAnalyticsLabels(t.affiliate),this.enable(),this.track=t,this.fetchAdditionalTrackDetails(),this.$remainingLabel.text("-"+i(t.duration)),this.$source.attr("href",t[t.affiliate+"Url"]),this.showPauseButton(),this.enableSourceButtons(t.availableAffiliates)},updateTrackPosition:function(t){this.$elapsedLabel.text(i(t)),t>this.track.duration&&(t=this.track.duration),this.$remainingLabel.text("-"+i(this.track.duration-t)),this.$progressSlug.width(t/this.track.duration*100+"%")},updateProviderClass:function(t){this.providerClass&&this.$el.removeClass(this.providerClass),this.providerClass="player-bar--provider-"+t,this.$el.addClass(this.providerClass)},updateAnalyticsLabels:function(t){this.$el.find("[data-analytics-action]").attr("data-analytics-label",t)},enable:function(){this.$el.removeClass("inactive").removeClass("is-playing-ad"),this.$playPauseButton.attr("disabled",!1),this.$previousButton.attr("disabled",!1),this.updateNextButton()},updateNextButton:function(){this.app.player.isLast()?(this.$nextButton.addClass("inactive"),this.$nextButton.attr("disabled",!0)):(this.$nextButton.removeClass("inactive"),this.$nextButton.attr("disabled",!1))},disable:function(){this.$el.addClass("inactive"),this.$playPauseButton.attr("disabled",!0),this.$previousButton.attr("disabled",!0),this.$nextButton.attr("disabled",!0),this.$loveButton.attr("disabled",!0),this.$loveButton.removeClass("player-bar-btn--loved"),this.abortAdditionalTrackDetails(),this.updateArtwork()},adPlaying:function(){this.$el.addClass("is-playing-ad"),this.$playPauseButton.attr("disabled",!0),this.$previousButton.attr("disabled",!0),this.$nextButton.attr("disabled",!0),this.$loveButton.removeClass("player-bar-btn--loved"),this.updateArtwork()},deviceChanged:function(t){this.$listeningOn.text(t.message)},showPauseButton:function(){var e=this;this.$playPauseButton.off(".player.controls").on("click.player.controls",function(t){t.preventDefault(),e.app.player.pause()}).removeClass("player-bar-btn--play").addClass("player-bar-btn--pause").data("analytics-action",this.pauseAnalyticsAction).text(this.pauseString)},showPlayButton:function(){var e=this;this.$playPauseButton.off(".player.controls").on("click.player.controls",function(t){t.preventDefault(),e.app.player.resume()}).removeClass("player-bar-btn--pause").addClass("player-bar-btn--play").data("analytics-action",this.playAnalyticsAction).text(this.playString)},enableSourceButtons:function(n){this.$sourceButtons.each(function(t){var e=o(this),i=e.data("source");e.toggle(_(n).contains(i))})},fetchAdditionalTrackDetails:function(){this.detailsRequest=n.get(this.track.trackUrl+"/+playerdetails",null,null,function(t,e){t||(this.track.userLoves=e.loves,this.track.loveUrl=e.love_url,this.updateLoveButton(),this.updateArtwork(e))}.bind(this))},abortAdditionalTrackDetails:function(){this.detailsRequest&&this.detailsRequest.abort()},updateArtwork:function(t){this.$artwork.attr("src",(t=t||{}).image||this.defaultArtwork),t.album_url?this.$artworkLink.attr("href",t.album_url):this.$artworkLink.removeAttr("href")},updateLoveButton:function(){var t=this.$loveButton;this.track.userLoves?(t.addClass("player-bar-btn--loved"),t.text(t.data("unloveCopy"))):(t.removeClass("player-bar-btn--loved"),t.text(t.data("loveCopy"))),t.hasClass("js-click-enabled")&&t.attr("disabled",!1)}},e}),define("player/inline-youtube-playlink",["require","shim/youtube","jquery"],function(t){"use strict";function e(t){this.$el=t}var i=t("shim/youtube"),n=t("jquery");return e.prototype.start=function(){this.videoId=this.$el.data("youtube-id"),this.$target=n("#"+this.$el.data("inline-video-target")),this.$el.on("click.inline-youtube-playlink",this.play.bind(this))},e.prototype.stop=function(){this.$el.off(".inline-youtube-playlink")},e.prototype.play=function(t){t.preventDefault();var e=this.$target.find(".embedded-video");e.length||(e=n('<div class="embedded-video" />'),this.$target.append(e)),this.$target.addClass("inline-playback-container--active"),i().then(function(){this.player=new YT.Player(e.get(0),{host:"https://www.youtube-nocookie.com",playerVars:{iv_load_policy:3},videoId:this.videoId,events:{onReady:function(t){t.target.playVideo()}}})}.bind(this))},e}),define("player/scrobble-client",["require","core/ajax","lodash"],function(t){"use strict";var h=t("core/ajax"),d=t("lodash"),p=["spotify"];return function(t,e){var i,n,o,r=0,s=!1;function a(){var e=Date.now();o=setTimeout(function(){var t;t=Date.now()-e,r+=t,!s&&30<=n.duration&&(u(r)>=n.duration/2||240<=u(r))?(s=!0,h.post("/player/scrobble",null,{timestamp:i,artist:n.artistName,track:n.trackName,duration:Math.round(n.duration)})):a()},1e3)}function l(){clearTimeout(o)}function c(){l(),r=0,s=!1,i=n=null}function u(t){return Math.round(t/1e3)}e.eventMediator.subscribe("player.track.paused",l),e.eventMediator.subscribe("player.track.stopped",c),e.eventMediator.subscribe("player.track.finished",c),e.eventMediator.subscribe("player.track.playing",function(t){t&&d(p).contains(t.affiliate)||(i=i||u((new Date).getTime()),t&&(n=t),a(),h.post("/player/now-playing",null,{artist:n.artistName,track:n.trackName,duration:Math.round(n.duration)}))})}}),define("player/status",["require","core/media-size-v2","jquery"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var i=t("core/media-size-v2"),n=t("jquery");return e.prototype={ERROR_MESSAGE_DURATION:5e3,constructor:e,start:function(){this.statusBar=this.$el.find(".js-player-status"),this.errorStatusBar=this.$el.find(".js-player-error"),this.errorStatusMessage=this.$el.find(".js-player-error-message"),this.setStatusMessage("inactive"),this.app.eventMediator.subscribe("player.track.playing",this.showPlayingStatus.bind(this)),this.app.eventMediator.subscribe("player.track.stopped",this.disable.bind(this)),this.app.eventMediator.subscribe("player.track.finished",this.disable.bind(this)),this.app.eventMediator.subscribe("player.ad.playing",this.adPlaying.bind(this)),this.app.eventMediator.subscribe("player.spotify.initialising",this.setStatusMessage.bind(this,"loading-spotify")),this.app.eventMediator.subscribe("player.spotify.abort",this.setStatusMessage.bind(this,"inactive")),this.app.eventMediator.subscribe("player.spotify.signup.start",this.setStatusMessage.bind(this,"spotify-signup")),this.app.eventMediator.subscribe("player.spotify.signup.end",this.setStatusMessage.bind(this,"inactive")),this.app.eventMediator.subscribe("player.spotify.error.auth-error",this.setStatusMessage.bind(this,"spotify-auth-error")),this.app.eventMediator.subscribe("player.playlist.request.error",this.setErrorMessage.bind(this,"cannot-play-item")),this.app.eventMediator.subscribe("player.track.unavailable",this.setErrorMessage.bind(this,"track-unavailable"))},showPlayingStatus:function(t){var e=n("<a />").addClass("player-bar-artist-name").attr("href",t.artistUrl).text(t.artistName),i=n("<a></a>").addClass("player-bar-track-name").attr("href",t.trackUrl).text(t.trackName);this.statusBar.html(i.prop("outerHTML")+e.prop("outerHTML")),this.statusBar.attr("title",t.trackName+" — "+t.artistName)},disable:function(){this.setStatusMessage("inactive")},adPlaying:function(){this.setStatusMessage("ad-playing")},setStatusMessage:function(t){t=this.$el.data("player-status-"+t);this.setStatus(t)},setStatus:function(t){this.statusBar.html(t),this.statusBar.attr("title",this.statusBar.text())},setErrorMessage:function(t){var e,t=this.$el.data("player-error-"+t);i.isMobile()?(e=this.$el.data("player-modal-title"),this.app.modal.show(e,'<p data-modal-type="compact-narrow">'+t+"</p>")):(clearTimeout(this.errorMessageTimeout),this.errorStatusBar.removeClass("player-bar-status--hide"),this.errorStatusMessage.text(t),this.errorStatusMessage.attr("title",t),this.statusBar.addClass("player-bar-status--hide"),this.errorMessageTimeout=setTimeout(function(){this.errorStatusBar.addClass("player-bar-status--hide"),this.statusBar.removeClass("player-bar-status--hide")}.bind(this),this.ERROR_MESSAGE_DURATION))}},e}),define("player/tracking",["require","core/ajax"],function(t){"use strict";function e(t,e){e.eventMediator.subscribe("player.track.tuning",this.tuningHandler.bind(this)),e.eventMediator.subscribe("player.track.unavailable",this.unavailableHandler.bind(this))}var i=t("core/ajax");return e.prototype.tuningHandler=function(t){this.track=t},e.prototype.unavailableHandler=function(){var t;this.track&&(t={artist:this.track.artistName,track:this.track.trackName,affiliate:this.track.affiliate,id:this.track[this.track.affiliate+"Id"]},i.get("/player/unavailable",null,t))},e}),define("player/providers/youtube/youtube-proxy",["require","core/media-size-v2","core/browser-api"],function(t){"use strict";function e(t,e){this.youtubePlayer=t,e.on("click",this.stop.bind(this))}var i=t("core/media-size-v2"),n=t("core/browser-api");return e.prototype={play:function(t){this.youtubePlayer.loadVideoById(t.youtubeId),this.youtubePlayer.playVideo(),i.isMobile()&&(t=this.youtubePlayer.getIframe(),n.requestFullScreen(t))},resume:function(){this.youtubePlayer.playVideo()},pause:function(){this.youtubePlayer.pauseVideo()},stop:function(){this.youtubePlayer.stopVideo()},getDuration:function(){return this.youtubePlayer.getDuration()},getPosition:function(){return this.youtubePlayer.getCurrentTime()}},e}),define("player/providers/youtube/youtube-exception",[],function(){"use strict";function t(t){this.name="YoutubeException",this.message=e[t]||"No description",this.errorCode=t}var e={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."};return t.prototype=new Error,t}),define("core/timeout-loop",[],function(){"use strict";function t(t,e,i){this.callback=t,this.delay=e,i?this.tick():this.delayTick()}return t.prototype.tick=function(){this.delayTick(),this.callback()},t.prototype.stop=function(){clearTimeout(this.timeout)},t.prototype.delayTick=function(){this.timeout=setTimeout(this.tick.bind(this),this.delay)},t}),!function(x){x.fn.onScreen=function(v){var b={container:window,direction:"vertical",toggleClass:null,doIn:null,doOut:null,tolerance:0,throttle:null,lazyAttr:null,lazyPlaceholder:"data:image/gif;base64,R0lGODlhEAAFAIAAAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAAACwAAAAAEAAFAAACCIyPqcvtD00BACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIQTGCiywKPmjxUNhjtMlWrAgAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFEiyUf6wCEBHvLPemIHdTzCMDegkACH5BAkJAAYALAAAAAAQAAUAgoSChLS2tIyKjLy+vIyOjMTCxP///wAAAAMUWCQ09jAaAiqQmFosdeXRUAkBCCUAIfkECQkACAAsAAAAABAABQCDvLq83N7c3Nrc9Pb0xMLE/P78vL68/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCEwkCnKGbegvQn4RjGMx8F1HxBi5Il4oEiap2DcVYlpZwQAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCDwnCGHEcIMxPn4VAGMQNBx0zQEZHkiYNiap5RaBKG9EQAh+QQJCQAJACwAAAAAEAAFAIOEgoTMysyMjozs6uyUlpSMiozMzsyUkpTs7uz///8AAAAAAAAAAAAAAAAAAAAAAAAEGTBJiYgoBM09DfhAwHEeKI4dGKLTIHzCwEUAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCAQSTmMEGaco8+UBSACwWBqHxKOJYd+q1iaXFoRRMbtEQAh+QQJCQAIACwAAAAAEAAFAIO8urzc3tzc2tz09vTEwsT8/vy8vrz8+vz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAEIhBJWc6wJZAtJh3gcRBAaXiIZV2kiRbgNZbA6VXiUAhGL0QAIfkECQkABgAsAAAAABAABQCChIKEtLa0jIqMvL68jI6MxMLE////AAAAAxRoumxFgoxGCbiANos145e3DJcQJAAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFFi6XCQwtCmAHbPVm9kGWKcEQxkkACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIRlI8SAZsPYnuJMUCRnNksWwAAOw==",debug:!1};return"remove"!==v&&x.extend(b,v),this.each(function(){function e(){return!g&&("horizontal"===b.direction?y?p<c-b.tolerance&&o<p+h-b.tolerance:p<a-b.tolerance&&p>-h+b.tolerance:y?d<l-b.tolerance&&n<d+u-b.tolerance:d<s-b.tolerance&&d>-u+b.tolerance)}function i(){return g&&("horizontal"===b.direction?y?p+(h-b.tolerance)<o||p>c-b.tolerance:p>a-b.tolerance||-h+b.tolerance>p:y?d+(u-b.tolerance)<n||d>l-b.tolerance:d>s-b.tolerance||-u+b.tolerance>d)}function t(t,e,i){var n,o,r;return function(){o=arguments,r=!0,i=i||this,n||function(){n=r?(t.apply(i,o),r=!1,setTimeout(arguments.callee,e)):null}()}}var n,o,r,s,a,l,c,u,h,d,p,f=this,g=!1,m=x(this),y=x.isWindow(b.container);if("remove"===v)return x(f).off("scroll.onScreen resize.onScreen"),void x(window).off("resize.onScreen");f=function(){var t;y||"static"!==x(b.container).css("position")||x(b.container).css("position","relative"),r=x(b.container),s=r.height(),a=r.width(),l=r.scrollTop()+s,c=r.scrollLeft()+a,u=m.outerHeight(!0),h=m.outerWidth(!0),p=y?(t=m.offset(),d=t.top,t.left):(t=m.position(),d=t.top,t.left),n=r.scrollTop(),o=r.scrollLeft(),b.debug,e()?(b.toggleClass&&m.addClass(b.toggleClass),x.isFunction(b.doIn)&&b.doIn.call(m[0]),b.lazyAttr&&"IMG"===m.prop("tagName")&&(t=m.attr(b.lazyAttr))!==m.prop("src")&&(m.css({background:"url("+b.lazyPlaceholder+") 50% 50% no-repeat",minHeight:"5px",minWidth:"16px"}),m.prop("src",t).load(function(){x(this).css({background:"none"})})),g=!0):i()&&(b.toggleClass&&m.removeClass(b.toggleClass),x.isFunction(b.doOut)&&b.doOut.call(m[0]),g=!1)};window.location.hash?t(f,50):f(),b.throttle&&(f=t(f,b.throttle)),x(b.container).on("scroll.onScreen resize.onScreen",f),y||x(window).on("resize.onScreen",f),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jQuery:"function"==typeof define&&define.amd&&define("jquery-onscreen",[],function(){return jQuery})})}}(jQuery),define("player/providers/youtube/youtube-provider",["require","jquery","player/providers/youtube/youtube-proxy","player/providers/youtube/youtube-exception","shim/youtube","debug","core/timeout-loop","core/browser-api","jquery-onscreen"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e,this.resizeSubscription=null}var n=t("jquery"),i=t("player/providers/youtube/youtube-proxy"),o=t("player/providers/youtube/youtube-exception"),r=t("shim/youtube"),s=t("debug"),a=t("core/timeout-loop"),l=t("core/browser-api");t("jquery-onscreen");return e.prototype={scrollContainer:window,start:function(){this.hide(),r().then(this._initialiseYoutubePlayer.bind(this)),this.app.eventMediator.subscribe("partialRefresh.beforeReplace",function(){this.isActive()&&(n(this.scrollContainer).onScreen("remove"),this.showVideoInPersistentPlayer(),this.stopListeningToPageResizeEvents())}.bind(this),!1),this.$close=this.$el.find(".js-close-player")},stop:function(){this._destroyYoutubeIframe()},isActive:function(){return this.$el.hasClass("video-player--in-place")||this.$el.hasClass("video-player--floating")},publish:function(t,e){var i={provider:"youtube"};void 0!==e&&(i.message=e),this.app.eventMediator.publish(t,i)},show:function(){var t;this.isActive()||(this.$el.attr("aria-hidden",!1),(t=n("body").find("[data-player-now-playing]").parents(".js-video-preview-playlink")).length?(this.showVideoOverPreview(t),t.onScreen({tolerance:2*t.outerHeight()/3,container:this.scrollContainer,doIn:function(t){this.showVideoOverPreview(t),this.listenToPageResizeEvents(t)}.bind(this,t),doOut:function(){this.showVideoInPersistentPlayer(),this.stopListeningToPageResizeEvents()}.bind(this)})):(this.showVideoInPersistentPlayer(),this.stopListeningToPageResizeEvents()))},showVideoOverPreview:function(t){t.addClass("video-preview-playlink--show-skip-link");n(".page-content").offset().left,parseInt(n(".page-content").css("padding-left"),10);t.offset().left,this.$el.addClass("video-player--in-place"),this.$el.removeClass("video-player--floating");var e=n(".page-content").offset().left,i=parseInt(n(".page-content").css("padding-left"),10),e=t.offset().left-e-i;this.$el.css("top",t.offset().top),this.$el.find(".js-player").css("width",t.css("width")),this.$el.find(".js-player").css("height",t.css("height")),this.$el.find(".js-player").css("margin-left",e+"px")},showVideoInPersistentPlayer:function(){this.$el.addClass("video-player--floating"),this.$el.removeClass("video-player--in-place"),this.$el.css("top","auto"),this.$el.find(".js-player").css("width",""),this.$el.find(".js-player").css("height",""),this.$el.find(".js-player").css("margin-left","")},listenToPageResizeEvents:function(t){this.resizeSubscription||(this.resizeSubscription=this.app.eventMediator.subscribe("mediaSize.change",function(t,e){e&&e.isMobile?this.showVideoInPersistentPlayer():this.showVideoOverPreview(t)}.bind(this,t)))},stopListeningToPageResizeEvents:function(){this.app.eventMediator.unsubscribe(this.resizeSubscription),this.resizeSubscription=null},hide:function(){n(this.scrollContainer).onScreen("remove"),this.stopListeningToPageResizeEvents(),this.$el.removeClass("video-player--floating"),this.$el.removeClass("video-player--in-place"),this.$el.find(".js-player").css("width",""),this.$el.find(".js-player").css("height",""),this.$el.attr("aria-hidden",!0)},_destroyYoutubeIframe:function(){this.player.destroy()},_initialiseYoutubePlayer:function(){try{this.player=new YT.Player(this.$el.find(".js-player").get(0),{host:"https://www.youtube-nocookie.com",playerVars:{iv_load_policy:3},events:{onReady:this._onYoutubeReady.bind(this),onStateChange:this._onYoutubeStateChange.bind(this),onError:this._onYoutubeError.bind(this)}})}catch(t){this.publish("player.provider.proxy.error",t)}},_onYoutubeReady:function(){this.youtubeProxy=new i(this.player,this.$close),this.publish("player.provider.proxy.ready",this.youtubeProxy),n("html").removeClass("youtube-provider-not-ready")},_onYoutubeStateChange:function(t){switch(s.info("YouTube StateChange:",t),t.data){case YT.PlayerState.UNSTARTED:this.hide(),this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.stopped");break;case YT.PlayerState.ENDED:this.stopDetectingAd(),this.hide(),this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.finished");break;case YT.PlayerState.PLAYING:this.stopDetectingAd(),this.show(),this.publish("player.provider.proxy.playing"),this.startPublishingPlayerPosition();break;case YT.PlayerState.PAUSED:this.stopDetectingAd(),this.show(),this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.paused");break;case YT.PlayerState.BUFFERING:this.stopDetectingAd(),this.startDetectingAd()}},_onYoutubeError:function(t){this.publish("player.provider.proxy.unavailable",new o(t.data)),l.fullScreenElement()===this.player.getIframe()&&l.exitFullScreen()},startDetectingAd:function(){var e=!1;this.adPositionLoop=new a(function(){var t=this.player.getCurrentTime();!1!==e&&e<t&&(this.show(),this.publish("player.ad.playing"),this.stopDetectingAd()),e=t}.bind(this),1e3,!0)},stopDetectingAd:function(){this.adPositionLoop&&this.adPositionLoop.stop()},startPublishingPlayerPosition:function(){this.positionLoop=new a(function(){var t=this.player.getCurrentTime();this.publish("player.provider.proxy.positionChanged",t)}.bind(this),1e3,!0)},stopPublishingPlayerPosition:function(){this.positionLoop&&this.positionLoop.stop()}},e}),define("social/spotify",["require","core/ajax","social/auth-window"],function(t){"use strict";var e=t("core/ajax"),i=t("social/auth-window"),n={accessToken:function(){return new Promise(function(i,n){e.get("/social/spotify-status",void 0,void 0,function(t,e){(!t&&e.authenticated?i:n)(e)})})},authenticate:function(){return i.status("/social/spotify-status","spotify_authentication").then(n.accessToken)},switchAccount:function(){return i.reauthenticate("/social/spotify-switch-account","spotify_authentication").then(n.accessToken)}};return n}),define("player/providers/spotify/spotify-auth",["require","social/spotify"],function(t){"use strict";function e(t,e,i){this.modal=t,this.modalPaths=e,this.errorCallback=i}var i=t("social/spotify");return e.prototype.REFRESH_TOKEN_ADVANCE=59e3,e.prototype.connect=function(){return this.fetchAccessToken()},e.prototype.getPremium=function(){var t=this.actionModal(this.modalPaths.premium,i.switchAccount);return t.then(this.storeAndAutoRefreshAccessToken.bind(this)),t},e.prototype.authenticate=function(){var t=this.actionModal(this.modalPaths.auth,i.authenticate);return t.catch(this.errorCallback),t},e.prototype.fetchAccessToken=function(){var t=i.accessToken().catch(this.authenticate.bind(this));return t.then(this.storeAndAutoRefreshAccessToken.bind(this)),t},e.prototype.storeAndAutoRefreshAccessToken=function(t){this.accessToken=t.accessToken,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.fetchAccessToken.bind(this),1e3*t.expires-this.REFRESH_TOKEN_ADVANCE)},e.prototype.actionModal=function(n,o){return new Promise(function(e,t){var i=this.modal;i.open(n,{actions:{connect:function(){o().then(function(t){e(t),i.close()}).catch(function(){t(),i.close()})}},onclose:t})}.bind(this))},e}),define("player/providers/spotify/spotify-api",["require","jquery","core/ajax","debug"],function(t){"use strict";function e(t,e){this.auth=t,this.notPremiumCallback=e,this.requestId=0}var l=t("jquery"),c=t("core/ajax"),u=t("debug");return e.prototype.SendFormat={JSON_BODY:"json",QUERY_STRING:"query"},e.prototype.play=function(t,e){var i="/me/player/play";return e&&(i+="?device_id="+e),this.send("PUT",i,{uris:["spotify:track:"+t]},this.SendFormat.JSON_BODY)},e.prototype.pause=function(){return this.send("PUT","/me/player/pause")},e.prototype.resume=function(t){var e;return this.send("PUT","/me/player/play",e=t?{device_id:t}:e,this.SendFormat.QUERY_STRING)},e.prototype.seek=function(t,e){return this.send("PUT","/me/player/seek",{position_ms:Math.round(t),device_id:e},this.SendFormat.QUERY_STRING)},e.prototype.resolveId=function(t,e){return this.send("GET","/tracks/"+t,{market:e}).then(function(t){return t.id})},e.prototype.user=function(){return this.send("GET","/me")},e.prototype.subscribeToState=function(t){return this.send("PUT","/me/notifications/player",{connection_id:t},this.SendFormat.QUERY_STRING)},e.prototype.state=function(t){return this.send("GET","/me/player",{market:t})},e.prototype.fetchDevices=function(){return this.send("GET","/me/player/devices").then(function(t){return t.devices})},e.prototype.selectDevice=function(t,e){return this.send("PUT","/me/player",{device_ids:[t],play:e},this.SendFormat.JSON_BODY)},e.prototype.send=function(o,r,s,a){return this.handleAuthErrors(function(){var t=this.requestId++,e=(u.info("Spotify request #"+t+":",o,r,s,a),"https://api.spotify.com/v1"+r),i=s,n=(s&&"GET"!==o&&(a===this.SendFormat.JSON_BODY?i=JSON.stringify(s):a===this.SendFormat.QUERY_STRING&&(e+="?"+l.param(s),i=void 0)),{headers:{Authorization:"Bearer "+this.auth.accessToken}}),e=c.request(o,e,n,i),n=u.info.bind(u,"Spotify response #"+t+":");return e.then(n),e.catch(n),e}.bind(this))},e.prototype.handleAuthErrors=function(n){var t=n(),e=t.catch(function(t){var e=t&&t.error&&t.error.status,i=t&&t.error&&t.error.message;return 403===e&&"Not available for the current user"===i&&this.notPremiumCallback(n),401===e?this.auth.connect().then(n):Promise.reject(t)}.bind(this));return e.abort=function(){e.aborted=!0,t.abort()},e},e}),define("player/providers/spotify/spotify-state",["require","core/browser-api","debug"],function(t){"use strict";function e(t,e,i,n){this.api=t,this.auth=e,this.market=i,this.stateCallback=n.stateCallback,this.inactiveCallback=n.inactiveCallback,this.deviceStateCallback=n.deviceStateCallback}var i=t("core/browser-api"),o=t("debug");return e.prototype.subscribe=function(){return new Promise(function(t,e){this.socket=new i.WebSocket("wss://dealer.spotify.com?access_token="+this.auth.accessToken),this.delayPing(),this.socket.addEventListener("message",this.messageHandler.bind(this,t,e))}.bind(this))},e.prototype.unsubscribe=function(){clearInterval(this.timeout),this.socket.close()},e.prototype.ping=function(){this.socket.readyState===this.socket.OPEN?(this.socket.send(JSON.stringify({type:"ping"})),this.delayPing()):this.socket.readyState===this.socket.CLOSED&&this.subscribe()},e.prototype.delayPing=function(){this.timeout=setTimeout(this.ping.bind(this),3e4)},e.prototype.messageHandler=function(t,e,i){var i=JSON.parse(i.data),n=(o.info("Spotify message:",i),"PUT"===i.method&&(n=decodeURIComponent(i.uri.split("/").slice(-1).pop()),this.api.subscribeToState(n).then(t,e)),i.payloads&&i.payloads[0]&&i.payloads[0].events||[]);n.some(this.isPlayerStateChangeEvent)&&this.updatePlayerState(),n.some(this.isDeviceStateChangeEvent)&&this.updateDeviceState()},e.prototype.isPlayerStateChangeEvent=function(t){return"PLAYER_STATE_CHANGED"===t.type},e.prototype.isDeviceStateChangeEvent=function(t){return"DEVICE_STATE_CHANGED"===t.type},e.prototype.updatePlayerState=function(){var t=this.fetchState();t.then(this.transformState).then(this.stateCallback),t.then(function(t){this.deviceStateCallback(t.device)}.bind(this))},e.prototype.updateDeviceState=function(){this.fetchState().then(function(t){this.deviceStateCallback(t.device),t.device.is_active||this.inactiveCallback()}.bind(this))},e.prototype.fetchState=function(){return this.stateRequest&&this.stateRequest.abort(),this.stateRequest=this.api.state(this.market),this.stateRequest},e.prototype.transformState=function(t){var e={};return e.status=t.is_playing,t.item?(e.track={track_resource:{uri:t.item.uri},length:t.item.duration_ms/1e3},t.item.is_playable?e.playing_position=t.progress_ms/1e3:e.status=!1):t.is_playing?e.track={track_type:"ad"}:e.track={track_type:"unavailable"},e},e}),define("player/providers/spotify/spotify-events",[],function(){"use strict";return{CONNECTED:"connected",STATE:"state",DEVICE_CHANGED:"device",ERROR:"error"}}),define("player/providers/spotify/spotify-errors",[],function(){"use strict";return{UNAUTHORIZED:"unauthorized",NOT_PREMIUM:"not_premium",INACTIVE_DEVICE:"inactive_device",NO_DEVICE_SELECTED:"no_client_selected"}}),define("player/providers/spotify/spotify-device-modal",["require","jquery","mustache"],function(t){function e(t,e){this.modal=t,this.spotifyApi=e}var r=t("jquery"),s=t("mustache");return e.prototype.selectDevice=function(i){return new Promise(function(t,e){this.modal.open(i,{onopen:this.updateDevices.bind(this),onclose:e,actions:{"select-device":this.deviceSelected.bind(this,t),"refresh-devices":this.updateDevices.bind(this)}})}.bind(this))},e.prototype.deviceSelected=function(t,e){e=r(e.target).find(".js-device-selector");t({id:e.val(),name:e.find("option:selected").text()}),this.modal.close()},e.prototype.updateDevices=function(){var t=r("[js-modal-body]"),e=this.renderDevices.bind(this,t);this.spotifyApi.fetchDevices().then(e).catch(function(){e()})},e.prototype.renderDevices=function(t,e){var i=!(!e||!e.length),n=(t.find(".device-selector-loading").addClass("hidden"),t.find(".device-selector-none-found").toggleClass("hidden",i),t.find(".js-device-selector")),o=n.data("incompatibleTemplate");n.find("option").remove(),e&&e.forEach(function(t){var e=t.is_restricted?s.render(o,t):t.name,e=r("<option>",{value:t.id,text:e});t.is_active&&e.attr("selected","selected"),t.is_restricted&&e.attr("disabled","disabled"),n.append(e)}),t.find(".device-selector-options").toggleClass("hidden",!i)},e}),define("player/providers/spotify/spotify-client",["require","player/providers/spotify/spotify-auth","player/providers/spotify/spotify-api","player/providers/spotify/spotify-state","player/providers/spotify/spotify-events","player/providers/spotify/spotify-errors","player/providers/spotify/spotify-device-modal"],function(t){"use strict";var n=t("player/providers/spotify/spotify-auth"),o=t("player/providers/spotify/spotify-api"),e=t("player/providers/spotify/spotify-state"),r=t("player/providers/spotify/spotify-events"),s=t("player/providers/spotify/spotify-errors"),a=t("player/providers/spotify/spotify-device-modal");function i(t,e,i){this.auth=new n(t,e,this.unauthorizedError.bind(this)),this.api=new o(this.auth,this.notPremiumError.bind(this)),this.modal=t,this.modalPaths=e,this.deviceModal=new a(this.modal,this.api),this.events=i,this.requestId=0,this.deviceId=null}return i.prototype.connect=function(){this.auth.connect().then(function(t){t=this.publish.bind(this,r.CONNECTED,t);this.selectInitialDevice().then(this.updateMarket.bind(this)).then(this.subscribe.bind(this)).then(t)}.bind(this))},i.prototype.play=function(t,e){this.playpauseRequest&&this.playpauseRequest.abort(),this.playpauseRequest=this.api.play(t,this.deviceId),e&&(t=this.seek.bind(this,e),this.playpauseRequest.then(t)),this.successCheck&&clearTimeout(this.successCheck),this.successCheck=setTimeout(this.updateState.bind(this),2e3)},i.prototype.pause=function(){this.playpauseRequest&&this.playpauseRequest.abort(),this.playpauseRequest=this.api.pause()},i.prototype.resume=function(){this.playpauseRequest&&this.playpauseRequest.abort(),this.playpauseRequest=this.api.resume(this.deviceId)},i.prototype.seek=function(t){this.api.seek(1e3*t,this.deviceId)},i.prototype.resolveId=function(t){return this.api.resolveId(t,this.market)},i.prototype.updateState=function(){this.state.updatePlayerState()},i.prototype.selectDevice=function(){return this.deviceModal.selectDevice(this.modalPaths.initialDeviceDetection).then(this.handleDeviceUpdate.bind(this))},i.prototype.updateMarket=function(){return this.api.user().then(function(t){return t.hasOwnProperty("country")?(this.market=t.country,Promise.resolve()):Promise.reject()}.bind(this))},i.prototype.subscribe=function(){var t={stateCallback:this.onStateChange.bind(this),inactiveCallback:this.inactiveError.bind(this),deviceStateCallback:this.handleDeviceUpdate.bind(this)};return this.state=new e(this.api,this.auth,this.market,t),this.state.subscribe()},i.prototype.notPremiumError=function(e){var t=this.publish.bind(this,r.ERROR,s.NOT_PREMIUM),i=this.auth.getPremium();i.catch(t),i.then(function(t){t=this.publish.bind(this,r.CONNECTED,t);this.state.unsubscribe(this.state),this.updateMarket().then(this.subscribe.bind(this)).then(t).then(e)}.bind(this))},i.prototype.selectInitialDevice=function(){var t=this.selectDevice();return t.catch(this.noDeviceSelected.bind(this)),t},i.prototype.unauthorizedError=function(){this.publish(r.ERROR,s.UNAUTHORIZED)},i.prototype.inactiveError=function(){this.publish(r.ERROR,s.INACTIVE_DEVICE),this.state.unsubscribe();var t=this.deviceModal.selectDevice(this.modalPaths.inactive).then(this.handleDeviceUpdate.bind(this));t.then(this.state.subscribe.bind(this.state)).then(this.publish.bind(this,r.CONNECTED)),t.catch(this.noDeviceSelected.bind(this))},i.prototype.handleDeviceUpdate=function(t){this.deviceId!==t.id&&(this.deviceId=t.id,this.publish(r.DEVICE_CHANGED,t.name))},i.prototype.onStateChange=function(t){this.publish(r.STATE,t)},i.prototype.noDeviceSelected=function(){this.publish(r.ERROR,s.NO_DEVICE_SELECTED)},i.prototype.publish=function(t,e){this.events.hasOwnProperty(t)&&this.events[t](e)},i.prototype.showInactiveModal=function(){this.modal.open(this.modalPaths.inactive)},i}),define("player/providers/spotify/spotify-proxy",["require","machina","player/providers/spotify/spotify-client","player/providers/spotify/spotify-events","player/providers/spotify/spotify-errors","debug"],function(t){"use strict";function n(t){this._state=t}function e(t,e){this.app=t;var i={};i[r.CONNECTED]=function(t){this.app.eventMediator.publish("player.spotify.connected",t),this.stateManager.handle("initialized")}.bind(this),i[r.STATE]=function(t){this.playerStateHandler(new n(t))}.bind(this),i[r.DEVICE_CHANGED]=this.publish.bind(this,"player.deviceChanged"),i[r.ERROR]=this.errorHandler.bind(this),this.client=new o(t.modal,e,i),this.stateManager=new(l.extend({publish:this.publish.bind(this),stopPublishingPlayerPosition:this.stopPublishingPlayerPosition.bind(this),startPublishingPlayerPosition:this.startPublishingPlayerPosition.bind(this),client:this.client,resumePausedAd:this.resumePausedAd.bind(this)})),this.publish("player.provider.proxy.ready",this)}var i=t("machina"),o=t("player/providers/spotify/spotify-client"),r=t("player/providers/spotify/spotify-events"),s=t("player/providers/spotify/spotify-errors"),a=t("debug"),t={_onEnter:function(){this.stopPublishingPlayerPosition(),this.publish("player.provider.proxy.paused")},play:"Tuning",resume:"Resume",stop:"Stopped",playing:"Playing",unexpectedTrack:"PausedUnexpected",inactiveDevice:"PausedInactiveDevice",deviceManuallySwitched:"PausedWithNewDevice",stopped:"Stopped"},l=i.Fsm.extend({eventListeners:{transition:[function(t){a.info("Spotify proxy transition:",t.fromState,"->",t.toState)}]},initialState:"Uninitialized",states:{Uninitialized:{play:"Initialize",initialized:"Ready"},Initialize:{_onEnter:function(){this.track=this.currentActionArgs[1],this.publish("player.spotify.initialising"),this.client.connect()},play:function(){this.deferUntilTransition("Uninitialized"),this.transition("Uninitialized")},initialized:"Tuning",stopped:"Aborted"},Ready:{play:"Tuning"},Tuning:{_onEnter:function(){this.duration=!1,this.track=this.currentActionArgs[1]||this.track,this.requestedTrackId=this.track.spotifyId,this.resumePausedAd(),this.secondPlayAttempt=!1,this.client.play(this.track.spotifyId)},stop:function(){this.client.pause(),this.transition("Stopped")},pause:function(){this.client.pause()},playing:"Playing",stopped:"Stopped",unexpectedTrack:function(){var e=this.currentActionArgs[1];this.client.resolveId(this.requestedTrackId).then(function(t){e.trackId()===t&&(this.requestedTrackId=t,this.handle("playing",e.duration()),this.handle("positionChanged",e.position()))}.bind(this))},unavailable:function(){this.transition("Ready"),this.publish("player.provider.proxy.unavailable")}},Aborted:{_onEnter:function(){this.publish("player.spotify.abort"),this.transition("Uninitialized")}},Stopping:{_onEnter:function(){this.client.pause()},paused:"Stopped",playing:function(){this.client.updateState()}},Playing:{_onEnter:function(){this.duration=this.currentActionArgs[1],this.publish("player.provider.proxy.playing")},play:"Tuning",pause:"Pause",stop:"Stopping",paused:"Paused",unexpectedTrack:"PausedUnexpected",inactiveDevice:"PausedInactiveDevice",deviceManuallySwitched:"ResumeLastPosition",stopped:"Stopped",adPlaying:"AdPlaying",finished:"Finished",positionChanged:function(){this.startPublishingPlayerPosition()}},Resume:{_onEnter:function(){this.client.resume()},play:"Tuning",pause:"Pause",stop:"Stopped",paused:"Paused",playing:"Playing",stopped:"Stopped",positionChanged:function(){this.startPublishingPlayerPosition()}},ResumeLastPosition:{_onEnter:function(){this.client.play(this.requestedTrackId,this.lastPosition)},play:"Tuning",pause:"Pause",stop:"Stopped",playing:"Playing",stopped:"Stopped"},Pause:{_onEnter:function(){this.client.pause()},play:"Tuning",resume:"Resume",stop:"Stopped",paused:"Paused",stopped:"Stopped",playing:"Playing",positionChanged:function(){this.startPublishingPlayerPosition()}},Paused:t,PausedInactiveDevice:Object.assign({},t,{resume:"ResumeLastPosition",initialized:"ResumeLastPosition"}),PausedUnexpected:Object.assign({},t,{resume:"ResumeLastPosition"}),PausedWithNewDevice:Object.assign({},t,{resume:"ResumeLastPosition"}),AdPlaying:{_onEnter:function(){this.stopPublishingPlayerPosition(),this.publish("player.ad.playing")},finished:"Finished",playing:"Playing"},Stopped:{_onEnter:function(){this.stopPublishingPlayerPosition(),this.transition("Ready"),this.publish("player.provider.proxy.stopped")}},Finished:{_onEnter:function(){this.stopPublishingPlayerPosition(),this.transition("Ready"),this.publish("player.provider.proxy.finished")}}}});n.prototype={isUnavailable:function(){return"unavailable"===this._state.track.track_type||void 0===this.position()&&!1===this._state.status},isAd:function(){return"ad"===this._state.track.track_type},isPlaying:function(){return!this.isPaused()&&!this.isFinished()},isPaused:function(){return!1===this._state.status},isFinished:function(){var t=this.position()>this.duration()-1;return!1===this._state.status&&0===this.position()||t},trackId:function(){return this._state.track.track_resource.uri.split("spotify:track:")[1]},position:function(){return this._state.playing_position},duration:function(){return this._state.track.length}};return e.prototype={play:function(t){this.stateManager.handle("play",t)},pause:function(){this.stateManager.handle("pause")},resume:function(){this.stateManager.handle("resume")},stop:function(){this.stateManager.handle("stop")},switchDevice:function(){this.client.selectDevice().then(function(){this.stateManager.handle("deviceManuallySwitched")}.bind(this))},getDuration:function(){return this.stateManager.duration},playerStateHandler:function(t){if((this.lastState=t).isUnavailable())this.stateManager.handle("unavailable");else if(t.isAd())this.stateManager.handle("adPlaying");else if(this.isRequestedTrack(t)&&t.isUnavailable())this.stateManager.handle("unavailable");else{if(this.isRequestedTrack(t)||t.isUnavailable())return t.isPlaying()?(this.stateManager.handle("playing",t.duration()),void this.stateManager.handle("positionChanged")):void(t.isFinished()?this.stateManager.handle("finished"):(this.stateManager.handle("positionChanged"),this.stateManager.handle("paused")));this.stateManager.handle("unexpectedTrack",t)}},errorHandler:function(t){t===s.UNAUTHORIZED&&this.publish("player.spotify.error.auth-error"),t===s.NOT_PREMIUM&&this.stateManager.handle("stopped"),t===s.INACTIVE_DEVICE&&this.stateManager.handle("inactiveDevice"),t===s.NO_DEVICE_SELECTED&&this.stateManager.handle("stopped")},resumePausedAd:function(){this.lastState&&this.lastState.isAd()&&this.lastState.isPaused()&&this.client.resume()},isRequestedTrack:function(t){return void 0!==this.stateManager.requestedTrackId&&t.trackId()===this.stateManager.requestedTrackId},publish:function(t,e){var i={provider:"spotify"};void 0!==e&&(i.message=e),this.app.eventMediator.publish(t,i)},startPublishingPlayerPosition:function(){this.stopPublishingPlayerPosition(),this.publishPlayerPosition(this.lastState.position())},publishPlayerPosition:function(e){this.stateManager.lastPosition=e,this.publish("player.provider.proxy.positionChanged",e),this.lastPublishedPositionTimestamp=Date.now(),this._playerPositionTimeout=setTimeout(function(){var t=(Date.now()-this.lastPublishedPositionTimestamp)/1e3;this.publishPlayerPosition(e+t)}.bind(this),1e3)},stopPublishingPlayerPosition:function(){clearTimeout(this._playerPositionTimeout)}},e}),define("player/providers/spotify/spotify-provider",["require","player/providers/spotify/spotify-proxy"],function(t){"use strict";function e(t,e){this.app=e,this.$el=t}var i=t("player/providers/spotify/spotify-proxy");return e.prototype={start:function(){var t={auth:this.$el.data("spotify-auth-modal"),premium:this.$el.data("spotify-premium-modal"),inactive:this.$el.data("spotify-inactive-modal"),initialDeviceDetection:this.$el.data("spotify-initial-device-modal")};new i(this.app,t)}},e}),define("ads/ad-container",["require","jquery"],function(t){"use strict";var e=t("jquery");return{open:function(t){e(t.element).parents("[data-ad-container]").addClass(this.openClass(t))},close:function(t){e(t.element).parents("[data-ad-container]").removeClass(this.openClass(t))},openClass:function(t){return"open-ad-container-"+(t.is_mobile?"mobile":"desktop")}}}),define("ads/bidbarrel-helper",["require","ads/ad-container"],function(t){"use strict";function s(t,e,i,n){return o.dfpPath={pagePath:t.zone.substring(1),isMobile:i},o.pageTargeting={env:t.env,vguid:t.vguid,ptype:t.pageTargeting.ptype,geo:n},o}function e(t){this.app=t,this.targetingKeys=[],this.idCount=0}var i=t("ads/ad-container"),o={dfpPath:{},targeting:{auto:!0,cookie:{surround:!0,consolidate:!0}},geo:{},pageTargeting:{},optanon:{renderScript:!1}};return e.prototype.init=function(o){const r=this;return new Promise(function(t,e){r.app.countryCode();var i=r.app.geo(),n=r.app.isMobile();BidBarrel.setLazyLoad(),BidBarrel.initialize(s(o,0,n,i)),t(),BidBarrel.on("rendered",function(t){r.app.eventMediator.publish("AdRenderSucceeded")})})},e.prototype.createEvents=function(i){BidBarrel.on(i+".visibilityChanged",function(t,e){e=0<e.inViewPercentage?"visible":"hidden";this.app.eventMediator.publish("ad."+i+"."+e)}.bind(this))},e.prototype.setTargeting=function(t){BidBarrel.setTargeting(t)},e.prototype.incrementPageView=function(){},e.prototype.clearSlots=function(){BidBarrel.destroySlots(Object.keys(BidBarrel.slots).filter(t=>!!BidBarrel.slots[t]))},e.prototype.clearTargeting=function(){BidBarrel.setTargeting({})},e.prototype.createSlot=function(t){},e.prototype.createSlots=function(t,e){BidBarrel.setConfig(s(e,this.app.countryCode(),this.app.isMobile(),this.app.geo())),t.forEach(function(t){this.createEvents(t.id),i.open(t)}.bind(this)),BidBarrel.auction(t.map(function(t){return t.id}))},e.prototype.refresh=function(){},e}),define("ads/adblock-messaging",["require","jquery","lodash","ads/ad-container"],function(t){"use strict";function e(){this.messages=i(".js-adblock-message-template").toArray().map(function(t){return i(t).html()}),this.indexMobile=this.randomIndex(this.messages),this.indexDesktop=this.randomIndex(this.messages)}var i=t("jquery"),n=t("lodash"),o=t("ads/ad-container");return e.prototype.showInPlacements=function(t){var t=n.filter(t,"adblock_message"),e=n.filter(t,"is_mobile"),t=n.reject(t,"is_mobile"),e=this.randomItem(e),t=this.randomItem(t);e&&this.showInPlacement(e),t&&this.showInPlacement(t)},e.prototype.showInPlacement=function(t){var e=this.nextMessage(t.is_mobile);i(t.element).html(e),o.open(t)},e.prototype.nextMessage=function(t){var e;return t?(e=this.indexMobile,this.indexMobile=(e+1)%this.messages.length):(e=this.indexDesktop,this.indexDesktop=(e+1)%this.messages.length),this.messages[e]},e.prototype.randomItem=function(t){return t[this.randomIndex(t)]},e.prototype.randomIndex=function(t){return Math.floor(Math.random()*t.length)},e}),define("ads/page-ads",["require","jquery","lodash","ads/bidbarrel-helper","ads/adblock-messaging"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e}var a=t("jquery"),i=t("lodash"),n=t("ads/bidbarrel-helper"),o=t("ads/adblock-messaging");return e.prototype.start=function(){this.app.adsEnabled()?this.init():this.initSubscription=this.app.eventMediator.subscribe("page.transitionComplete",this.pageUpdated.bind(this))},e.prototype.pageUpdated=function(){this.app.adsEnabled()&&(this.app.eventMediator.unsubscribe(this.initSubscription),this.init())},e.prototype.init=function(){this.app.eventMediator.publish("ads.requested"),this.adsHelper=new n(this.app);var t=this.getAdContext(),t=this.adsHelper.init(t);t.then(this.showAds.bind(this)),t.catch(this.showAdblockMessages.bind(this))},e.prototype.showAds=function(){this.app.eventMediator.subscribe("partialRefresh.beforeReplace",this.beforeReplace.bind(this),"none"),this.app.eventMediator.subscribe("page.transitionComplete",this.transitionCompleteHandler.bind(this),"none"),this.setTargeting(),this.createPlacements(),this.debouncedAfterReplace=i.debounce(this.afterUpdate.bind(this),2500,{leading:!1,trailing:!0})},e.prototype.showAdblockMessages=function(){var e=new o,i=function(){var t=this.getPlacementsConfig();e.showInPlacements(t)}.bind(this);this.app.eventMediator.subscribe("page.transitionComplete",function(t){t.fullPage&&i()}.bind(this),"none"),i()},e.prototype.getTargetingParams=function(){return this.app.adTargeting()},e.prototype.getAdContext=function(){var t=a("#data-ads").data(),e=t.adsZone,i=t.adsEnv,n=this.app.adNetwork(),o=this.app.lang(),r="undefined"!=typeof utag_data?utag_data.pageViewGuid:void 0;let s=t.adsTargeting;return s.lang=o,{zone:e,env:i,vguid:r,pageTargeting:s,adsNetwork:n}},e.prototype.getPlacementsConfig=function(){return a("[data-ads-placement]",this.$el).toArray().map(function(t){var e=a(t).data("ads-placement");return e.element=t,e})},e.prototype.setTargeting=function(){var t=this.getTargetingParams();this.adsHelper.setTargeting(t),this.adsHelper.incrementPageView()},e.prototype.createPlacements=function(){var t=this.getPlacementsConfig(),e=this.getAdContext();const i=this.app.isMobile();t=t.filter(function(t){return!!t.is_mobile==i});this.adsHelper.createSlots(t,e)},e.prototype.beforeReplace=function(){this.adsHelper.clearTargeting(),this.adsHelper.clearSlots()},e.prototype.afterReplace=function(){this.setTargeting(),this.createPlacements()},e.prototype.afterUpdate=function(){this.adsHelper.incrementPageView(),this.adsHelper.refresh()},e.prototype.transitionCompleteHandler=function(t){t.fullPage?this.afterReplace():this.debouncedAfterReplace()},e}),define("ads/searchlinks",["require","core/module-requiring-consent","jquery","core/media-size-v2"],function(t){"use strict";function e(t,e){i.call(this,e.consentManager,e.consentManager.TARGETING),this.app=e}var i=t("core/module-requiring-consent"),n=t("jquery"),o=t("core/media-size-v2"),r="428642350";return((e.prototype=Object.create(i.prototype)).constructor=e).prototype.start=function(){window._mNHandle=window._mNHandle||{},window._mNHandle.queue=window._mNHandle.queue||[],window.medianet_versionId="3121199",t(["searchlinks-library"]),this.app.eventMediator.subscribe("domReady",this.addSearchLinks.bind(this)),this.refreshSubsription=this.app.eventMediator.subscribe("partialRefresh.afterReplace",this.addSearchLinks.bind(this))},e.prototype.stop=function(){this.app.eventMediator.unsubscribe(this.refreshSubsription)},e.prototype.addSearchLinks=function(){this.addId(),this.loadSearchLinks()},e.prototype.addId=function(){(o.isMobile()?n("[data-searchlinks-mobile]"):n("[data-searchlinks-desktop]")).attr("id",r)},e.prototype.loadSearchLinks=function(){window._mNHandle.queue.push(function(){window._mNDetails.loadTag(r,"370x250",r)})},e}),define("ads/tonefuze",["require","core/media-size-v2","core/module-requiring-consent","ads/ad-container","uuid"],function(t){"use strict";function e(t,e){n.call(this,e.consentManager,e.consentManager.TARGETING);var i=t.attr("id")+"-"+r.v4();t.attr("id",i),t.find("button").attr("aria-controls",i),this.options={artist:t.data("tonefuze-artist"),song:t.data("tonefuze-track"),adunit_id:t.data("tonefuze-id"),flex:t.data("tonefuze-flex"),div_id:i},this.$el=t,this.eventMediator=e.eventMediator}var i=t("core/media-size-v2"),n=t("core/module-requiring-consent"),o=t("ads/ad-container"),r=t("uuid");return((e.prototype=Object.create(n.prototype)).constructor=e).prototype.start=function(){this.isUnitActive()&&(o.open({element:this.$el,is_mobile:this.$el.hasClass("tonefuze--mobile")}),t(["https://srv.clickfuse.com/showads/showad.js"],this.ready.bind(this)))},e.prototype.isUnitActive=function(){return!(!i.isMobile()||!this.$el.hasClass("tonefuze--mobile"))||!(i.isMobile()||!this.$el.hasClass("tonefuze--desktop"))},e.prototype.ready=function(){cf.showAsyncAd(this.options),this.$el.data("require").includes("ads/ad-placement-helper")&&this.eventMediator.publish("ad.tonefuze.show")},e}),define("components/cbsi-video",["require","core/media-size-v2","core/event-mediator","core/module-requiring-consent"],function(t){"use strict";function e(t,e){n.call(this,e.consentManager,e.consentManager.TARGETING),this.$el=t,this.$playerEl=t.find(".js-player"),this.app=e,this.localEventMediator=new i}var a=t("core/media-size-v2"),i=t("core/event-mediator"),n=t("core/module-requiring-consent");return((e.prototype=Object.create(n.prototype)).constructor=e).prototype.EVENTS={AD_START:"ad-start",AD_END:"ad-end",CONTENT_START:"video-start",CONTENT_END:"video-end",END:"stop"},e.prototype.start=function(){var t=this.$el.data("cbsi-video-pid"),e=this.$el.data("cbsi-video-thumbnail"),i=this.$el.is("[data-cbsi-video-autoplay]"),n=this.$el.is("[data-cbsi-video-start-muted]"),o=this.$el.is("[data-cbsi-video-disable-mobile]"),r=this.$el.is("[data-cbsi-video-disable-ads]"),s=this.$el.data("cbsi-video-event-prefix");this.eventPrefix=void 0!==s?s:"cbsi-video",o&&a.isMobile()||this.app.cbsiplayer&&this.app.cbsiplayer.isSupported()&&(this.app.cbsiplayer.playVideo(this.$playerEl,t,{autoplay:i,mute:n,previewImage:e,disableAds:r,events:{onAdStart:this.handleEvent.bind(this,this.EVENTS.AD_START),onAdEnd:this.handleEvent.bind(this,this.EVENTS.AD_END),onContentStart:this.handleEvent.bind(this,this.EVENTS.CONTENT_START),onContentEnd:this.handleEvent.bind(this,this.EVENTS.CONTENT_END),onResourceEnd:this.handleEvent.bind(this,this.EVENTS.END)}}),this.tuningSubscription=this.app.eventMediator.subscribe("player.track.tuning",this.stop.bind(this)))},e.prototype.stop=function(){this.app.eventMediator.unsubscribe(this.tuningSubscription),this.app.cbsiplayer.destroyPlayer(this.$playerEl),this.$el.remove()},e.prototype.eventConfig=function(){return{onAdStart:this.handleEvent.bind(this,this.EVENTS.AD_START),onAdEnd:this.handleEvent.bind(this,this.EVENTS.AD_END),onContentStart:this.handleEvent.bind(this,this.EVENTS.CONTENT_START),onContentEnd:this.handleEvent.bind(this,this.EVENTS.CONTENT_END),onResourceEnd:this.handleEvent.bind(this,this.EVENTS.END)}},e.prototype.handleEvent=function(t){this.publishLocal(t),this.publishGlobal(t)},e.prototype.publishLocal=function(t){this.localEventMediator.publish(t)},e.prototype.publishGlobal=function(t){t=[this.eventPrefix,t].join("."),this.app.eventMediator.publish(t)},e}),define("components/cbsi-autoplay-video",["require","components/cbsi-video"],function(t){"use strict";function e(t,e){i.call(this,t,e)}var i=t("components/cbsi-video"),n=(e.prototype=Object.create(i.prototype),i.prototype);return(e.prototype.constructor=e).prototype.start=function(){this.$close=this.$el.find(".js-close-player"),this.$close.on("click.cbsi-autoplay-video",this.stop.bind(this)),this.localEventMediator.subscribe(this.EVENTS.AD_START,this.adStart.bind(this)),this.localEventMediator.subscribe(this.EVENTS.CONTENT_START,this.contentStart.bind(this)),n.start.apply(this,arguments)},e.prototype.stop=function(){this.$close.off(".cbsi-autoplay-video"),n.stop.apply(this,arguments)},e.prototype.adStart=function(){this.show(),this.showCloseButton(5e3)},e.prototype.contentStart=function(){this.show(),this.showCloseButton()},e.prototype.show=function(){this.$el.removeClass("video-player--hidden")},e.prototype.showCloseButton=function(t){t?setTimeout(this.showCloseButton.bind(this),t):this.$el.find(".js-close-player").removeClass("video-player-close--hidden")},e}),!function(t,e){"function"==typeof define&&define.amd?define("store",[],e):"object"==typeof exports?module.exports=e():t.store=e()}(this,function(){var n,i,t,r={},e="undefined"!=typeof window?window:global,o=e.document,s="localStorage";if(r.disabled=!1,r.version="1.3.20",r.set=function(t,e){},r.get=function(t,e){},r.has=function(t){return void 0!==r.get(t)},r.remove=function(t){},r.clear=function(){},r.transact=function(t,e,i){null==i&&(i=e,e=null);e=r.get(t,e=null==e?{}:e);i(e),r.set(t,e)},r.getAll=function(){},r.forEach=function(){},r.serialize=function(t){return JSON.stringify(t)},r.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return s in e&&e[s]}catch(t){return}}())n=e[s],r.set=function(t,e){return void 0===e?r.remove(t):(n.setItem(t,r.serialize(e)),e)},r.get=function(t,e){t=r.deserialize(n.getItem(t));return void 0===t?e:t},r.remove=function(t){n.removeItem(t)},r.clear=function(){n.clear()},r.getAll=function(){var i={};return r.forEach(function(t,e){i[t]=e}),i},r.forEach=function(t){for(var e=0;e<n.length;e++){var i=n.key(e);t(i,r.get(i))}};else if(o&&o.documentElement.addBehavior){try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),i=t.w.frames[0].document,n=i.createElement("div")}catch(t){n=o.createElement("div"),i=o.body}function a(e){return function(){var t=Array.prototype.slice.call(arguments,0),t=(t.unshift(n),i.appendChild(n),n.addBehavior("#default#userData"),n.load(s),e.apply(r,t));return i.removeChild(n),t}}function l(t){return t.replace(/^d/,"___$&").replace(c,"___")}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");r.set=a(function(t,e,i){return e=l(e),void 0===i?r.remove(e):(t.setAttribute(e,r.serialize(i)),t.save(s),i)}),r.get=a(function(t,e,i){e=l(e);t=r.deserialize(t.getAttribute(e));return void 0===t?i:t}),r.remove=a(function(t,e){e=l(e),t.removeAttribute(e),t.save(s)}),r.clear=a(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(s);for(var i=e.length-1;0<=i;i--)t.removeAttribute(e[i].name);t.save(s)}),r.getAll=function(t){var i={};return r.forEach(function(t,e){i[t]=e}),i},r.forEach=a(function(t,e){for(var i,n=t.XMLDocument.documentElement.attributes,o=0;i=n[o];++o)e(i.name,r.deserialize(t.getAttribute(i.name)))})}try{var u="__storejs__";r.set(u,u),r.get(u)!=u&&(r.disabled=!0),r.remove(u)}catch(t){r.disabled=!0}return r.enabled=!r.disabled,r}),define("url",[],function(){return function(t,e){return t=t.replace(/^\/\w{2}\//,"/"),t=e&&"en"!=e?"/"+e+t:t}}),define("components/visited-artists",["require","lodash","store"],function(t){"use strict";function e(t){this.store=n,this.artists=[],this.maxArtists=t||3}var i=t("lodash"),n=t("store"),o="lazyrecsbar:artists:1";return e.prototype.recordVisit=function(e){var t=this.toArray(),t=i(t).filter(function(t){return t!=e}).unshift(e).take(this.maxArtists).value();this.save(t)},e.prototype.save=function(t){this.store.enabled?this.store.set(o,t):this.artists=t},e.prototype.toArray=function(){return this.store.enabled?this.store.get(o,[]):this.artists},e}),define("components/lazy-recs-bar",["require","jquery","lodash","store","url","core/ajax","components/alert-dismissable","components/visited-artists"],function(t){"use strict";function e(t,e){this.$el=t,this.app=e,this.lastArtist=null,this.lastLang=e.lang(),this.pageTransitionSubscription=null,this.alertDismissable=new r(this.$el,this.app)}var n=t("jquery"),i=(t("lodash"),t("store"),t("url")),o=t("core/ajax"),r=t("components/alert-dismissable"),s=t("components/visited-artists");return e.prototype.start=function(){this.url=this.$el.data("url"),this.visitedArtists=new s,this.$el.on("click.lazyrecs",".js-lazy-recs-bar-show-more",this.expandRecommendationsPanel.bind(this)),this.$el.on("click.lazyrecs",".js-lazy-recs-bar-close",this.closeRecsBar.bind(this)),this.pageTransitionSubscription=this.app.eventMediator.subscribe("page.transitionComplete",this.updateRecommendationsForPage.bind(this)),this.updateRecommendationsForPage()},e.prototype.stop=function(){this.$el.off(".lazyrecs"),this.app.eventMediator.unsubscribe(this.pageTransitionSubscription)},e.prototype.expandRecommendationsPanel=function(t){t.preventDefault(),this.$el.addClass("lazy-recs-bar--extended"),n("body").addClass("has-lazy-recs-bar--extended")},e.prototype.updateRecommendationsForPage=function(){var t=function(){var t=n(document).find("[data-page-resource-type]"),e=t.attr("data-page-resource-type"),i=t.attr("data-page-resource-blacklist-level");if(function(){}