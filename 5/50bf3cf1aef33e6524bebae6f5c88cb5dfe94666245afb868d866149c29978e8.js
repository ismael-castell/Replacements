var $,doc,win;!function(e){function r(e,t){var n;t=t||{},this._id=r._generateUUID(),this._promise=t.promise||Promise,this._frameId=t.frameId||"CrossStorageClient-"+this._id,this._origin=r._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=t.timeout||15e3,this._listener=null,this._installListener(),(n=t.frameId?document.getElementById(t.frameId):n)&&this._poll(),n=n||this._createFrame(e),this._hub=n.contentWindow}r.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},r._getOrigin=function(e){var t=document.createElement("a");return t.href=e,(((t=!t.host?window.location:t).protocol&&":"!==t.protocol?t:window.location).protocol+"//"+t.host).replace(/:80$|:443$/,"")},r._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},r.prototype.onConnect=function(){var r=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(t,n){r._requests.connect.push(function(e){return clearTimeout(setTimeout(function(){n(new Error("CrossStorageClient could not connect"))},r._timeout)),e?n(e):void t()})}))},r.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},r.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return this._request("get",{keys:t})},r.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},r.prototype.clear=function(){return this._request("clear")},r.prototype.getKeys=function(){return this._request("getKeys")},r.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},r.prototype._installListener=function(){var i=this;this._listener=function(e){var t,n,r;if(!i._closed&&e.data&&"string"==typeof e.data&&("null"===e.origin?"file://":e.origin)===i._origin)if("cross-storage:unavailable"!==e.data){if(-1!==e.data.indexOf("cross-storage:")&&!i._connected){if(i._connected=!0,!i._requests.connect)return;for(t=0;t<i._requests.connect.length;t++)i._requests.connect[t](n);delete i._requests.connect}if("cross-storage:ready"!==e.data){try{r=JSON.parse(e.data)}catch(e){return}r.id&&i._requests[r.id]&&i._requests[r.id](r.error,r.result)}}else if(i._closed||i.close(),i._requests.connect)for(n=new Error("Closing client. Could not access localStorage in hub."),t=0;t<i._requests.connect.length;t++)i._requests.connect[t](n)},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},r.prototype._poll=function(){var e=this,t="file://"===e._origin?"*":e._origin,n=setInterval(function(){return e._connected?clearInterval(n):void(e._hub&&e._hub.postMessage("cross-storage:poll",t))},1e3)},r.prototype._createFrame=function(e){var t,n=window.document.createElement("iframe");for(t in n.id=this._frameId,r.frameStyle)r.frameStyle.hasOwnProperty(t)&&(n.style[t]=r.frameStyle[t]);return window.document.body.appendChild(n),n.src=e,n},r.prototype._request=function(e,t){var i,a;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((a=this)._count++,i={id:this._id+":"+a._count,method:"cross-storage:"+e,params:t},new this._promise(function(n,r){var e,t;a._requests[i.id]=function(e,t){if(clearTimeout(setTimeout(function(){a._requests[i.id]&&(delete a._requests[i.id],r(new Error("Timeout: could not perform "+i.method)))},a._timeout)),delete a._requests[i.id],e)return r(new Error(e));n(t)},Array.prototype.toJSON&&(e=Array.prototype.toJSON,Array.prototype.toJSON=null),t="file://"===a._origin?"*":a._origin,a._hub.postMessage(JSON.stringify(i),t),e&&(Array.prototype.toJSON=e)}))},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof exports?exports.CrossStorageClient=r:"function"==typeof define&&define.amd?define([],function(){return r}):e.CrossStorageClient=r}(this),function(e){"use strict";function n(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}var r,i;function t(e,t){(r(e,t)?a:i)(e,t)}var a="classList"in document.documentElement?(r=function(e,t){return e.classList.contains(t)},i=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(r=function(e,t){return n(t).test(e.className)},i=function(e,t){r(e,t)||(e.className=e.className+" "+t)},function(e,t){e.className=e.className.replace(n(t)," ")}),o={hasClass:r,addClass:i,removeClass:a,toggleClass:t,has:r,add:i,remove:a,toggle:t};"function"==typeof define&&define.amd?define(o):e.classie=o}(window),function(o){"use strict";function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function e(e,t){this.el=e,this.options=n({},this.options),n(this.options,t),this._init()}e.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(e){return!1}},e.prototype._init=function(){var e=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=e&&e.disabled,this.selectedOpt=e||this.el.querySelector("option"),this._createSelectEl(),this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]")),this.selOptsCount=this.selOpts.length,this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1,this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder"),this._initEvents()},e.prototype._createSelectEl=function(){function n(e){var t="",n="",r="";return!e.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(n+="cs-selected ",this.foundSelected=!0),e.getAttribute("data-class")&&(n+=e.getAttribute("data-class")),'<li role="options" '+(t=""!==n?'class="'+n+'" ':t)+(r=e.getAttribute("data-link")?"data-link="+e.getAttribute("data-link"):r)+' data-option data-value="'+e.value+'" aria-label="'+e.textContent+'" name="'+e.textContent+'" value="'+e.value+'"><span>'+e.textContent+"</span></li>"}var r="";[].slice.call(this.el.children).forEach(function(e){var t;e.disabled||("option"===(t=e.tagName.toLowerCase())?r+=n(e):"optgroup"===t&&(r+='<li class="cs-optgroup"><span>'+e.label+"</span><ul>",[].slice.call(e.children).forEach(function(e){r+=n(e)}),r+="</ul></li>"))});var e=SCM.SiteJS.getCookie("persistentSearchFilters"),t=(e=0===e.length?o.location.search:e).match(/f_SiteID=([^&]*)/),i=this.selectedOpt.textContent,e="";t?(a=t[1],i=SCM.SiteJS.getGlobalSearchDropdownDisplayValue(a)):App.isLucy&&(i="JAMA Network Open",e=' data-value="214"'),(App.isLearningContent||App.isLearningSelfServe)&&(i="JN Learning",e=' data-value="L*"',$(".site-search-bar").find(".search-term").attr("placeholder","Search for CME by topic"));var a='<div class="cs-options"><ul>'+r+"</ul></div>";this.selEl=document.createElement("div"),this.selEl.className=this.el.className,this.selEl.tabIndex=this.el.tabIndex,this.selEl.innerHTML='<span class="cs-placeholder is-a"'+e+">"+i+"</span>"+a,this.el.parentNode.insertBefore(this.selEl,this.el.parentNode.firstChild),this.selEl.appendChild(this.el)},e.prototype._initEvents=function(){var n=this;this.selPlaceholder.addEventListener("click",function(){n._toggleSelect()}),this.selOpts.forEach(function(e,t){e.addEventListener("click",function(){n.current=t,n._changeOption(),n._toggleSelect()})}),document.addEventListener("click",function(e){e=e.target;n._isOpen()&&e!==n.selEl&&!function(e,t){if(e){for(var n=e.target||e.srcElement||e||!1;n&&n!=t;)n=n.parentNode||!1;return!1!==n}}(e,n.selEl)&&n._toggleSelect()}),this.selEl.addEventListener("keydown",function(e){switch(e.keyCode||e.which){case 38:e.preventDefault(),n._navigateOpts("prev");break;case 40:e.preventDefault(),n._navigateOpts("next");break;case 32:e.preventDefault(),n._isOpen()&&void 0!==n.preSelCurrent&&-1!==n.preSelCurrent&&n._changeOption(),n._toggleSelect();break;case 13:e.preventDefault(),n._isOpen()&&void 0!==n.preSelCurrent&&-1!==n.preSelCurrent&&(n._changeOption(),n._toggleSelect());break;case 27:e.preventDefault(),n._isOpen()&&n._toggleSelect()}})},e.prototype._navigateOpts=function(e){this._isOpen()||this._toggleSelect();var t=void 0!==this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;("prev"===e&&0<t||"next"===e&&t<this.selOptsCount-1)&&(this.preSelCurrent="next"===e?t+1:t-1,this._removeFocus(),classie.add(this.selOpts[this.preSelCurrent],"cs-focus"))},e.prototype._toggleSelect=function(){this._removeFocus(),this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),classie.remove(this.selEl,"cs-active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),classie.add(this.selEl,"cs-active"))},e.prototype._changeOption=function(){void 0!==this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,this.preSelCurrent=-1);var e=this.selOpts[this.current];this.selPlaceholder.textContent=e.textContent;var t=$(".site-search-bar").find(".search-term");"JN Learning"===this.selPlaceholder.textContent?t.attr("placeholder","Search for CME by topic"):t.attr("placeholder","Enter Search Term"),this.el.value=e.getAttribute("data-value");t=this.selEl.querySelector("li.cs-selected");t&&classie.remove(t,"cs-selected"),classie.add(e,"cs-selected"),e.getAttribute("data-link")&&(this.options.newTab?o.open(e.getAttribute("data-link"),"_blank"):o.location=e.getAttribute("data-link")),this.options.onChange(this.el.value)},e.prototype._isOpen=function(e){return classie.has(this.selEl,"cs-active")},e.prototype._removeFocus=function(e){var t=this.selEl.querySelector("li.cs-focus");t&&classie.remove(t,"cs-focus")},o.SelectFx=e}(window),jQuery.fn.fastLiveFilter=function(e,a){a=a||{},e=jQuery(e);var t,o=this,n="",r=a.timeout||0,s=a.callback||function(){},l=a.type||"filter",c=e.children(),u=c.length,d=0<u?c[0].style.display:"block";if(s(u),"search"===l)for(var i=0;i<u;i++)c[i].style.display="none";return o.change(function(){for(var e,t,n=o.val().toLowerCase(),r=0,i=0;i<u;i++)e=c[i],t=a.selector?$(e).find(a.selector).text():e.textContent||e.innerText||"","search"!==l||0<n.trim().length?0<=t.toLowerCase().indexOf(n)?("none"==e.style.display&&(e.style.display=d),r++):"none"!=e.style.display&&(e.style.display="none"):e.style.display="none";return s(r),!1}).keydown(function(){clearTimeout(t),t=setTimeout(function(){o.val()!==n&&(n=o.val(),o.change())},r)}),this},$("#filter_input").fastLiveFilter("#filter_list"),$("#search_input").fastLiveFilter("#search_list",{type:"search"}),function(c,l,r,i){"use strict";!function(e){for(var t=e.length,n=c("head");t--;)0===n.has("."+e[t]).length&&n.append('<meta class="'+e[t]+'" />')}(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),c(function(){"undefined"!=typeof FastClick&&void 0!==r.body&&FastClick.attach(r.body)});function s(e,t){if("string"!=typeof e)return c(e,t);if(t){var n;if(t.jquery){if(!(n=t[0]))return t}else n=t;return c(n.querySelectorAll(e))}return c(r.querySelectorAll(e))}function t(e){var t=[];return e||t.push("data"),0<this.namespace.length&&t.push(this.namespace),t.push(this.name),t.join("-")}function n(e){for(var t=e.split("-"),n=t.length,r=[];n--;)0===n&&0<this.namespace.length?r.push(this.namespace,t[n]):r.push(t[n]);return r.reverse().join("-")}function a(n,r){function e(){var e=s(this),t=!e.data(i.attr_name(!0)+"-init");e.data(i.attr_name(!0)+"-init",c.extend({},i.settings,r||n,i.data_options(e))),t&&i.events(this)}var i=this;if(s(this.scope).is("["+this.attr_name()+"]")?e.call(this.scope):s("["+this.attr_name()+"]",this.scope).each(e),"string"==typeof n)return this[n].call(this,r)}function o(e,t){function n(){t(e[0])}!e.attr("src")||e[0].complete||4===e[0].readyState?n():function(){var e,t;this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(t=(e=this.attr("src")).match(/\?/)?"&":"?",t+="random="+(new Date).getTime(),this.attr("src",e+t))}.call(e)}var u,e,d,f;l.matchMedia||(l.matchMedia=((f=l.styleMedia||l.media)||(u=r.createElement("style"),e=r.getElementsByTagName("script")[0],d=null,u.type="text/css",u.id="matchmediajs-test",e.parentNode.insertBefore(u,e),d="getComputedStyle"in l&&l.getComputedStyle(u,null)||u.currentStyle,f={matchMedium:function(e){e="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return u.styleSheet?u.styleSheet.cssText=e:u.textContent=e,"1px"===d.width}}),function(e){return{matches:f.matchMedium(e||"all"),media:e||"all"}})),function(t){for(var n,i=0,e=["webkit","moz"],r=l.requestAnimationFrame,a=l.cancelAnimationFrame,o=void 0!==t.fx;i<e.length&&!r;i++)r=l[e[i]+"RequestAnimationFrame"],a=a||l[e[i]+"CancelAnimationFrame"]||l[e[i]+"CancelRequestAnimationFrame"];function s(){n&&(r(s),o&&t.fx.tick())}r?(l.requestAnimationFrame=r,l.cancelAnimationFrame=a,o&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,s())},t.fx.stop=function(){n=!1})):(l.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-i)),r=l.setTimeout(function(){e(t+n)},n);return i=t+n,r},l.cancelAnimationFrame=function(e){clearTimeout(e)})}(c),l.Foundation={name:"Foundation",version:"5.5.2",media_queries:{small:s(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":s(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:s(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":s(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:s(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":s(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:s(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":s(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:s(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:c("<style></style>").appendTo("head")[0].sheet,global:{namespace:i},init:function(e,t,n,r,i){var i=[e,n,r,i],a=[];if(this.rtl=/rtl/i.test(s("html").attr("dir")),this.scope=e||this.scope,this.set_namespace(),t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&a.push(this.init_lib(t,i));else for(var o in this.libs)a.push(this.init_lib(o,t));return s(l).load(function(){s(l).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?(void 0!==this.libs[e].settings?c.extend(!0,this.libs[e].settings,t[e]):void 0!==this.libs[e].defaults&&c.extend(!0,this.libs[e].defaults,t[e]),this.libs[e].init.apply(this.libs[e],[this.scope,t[e]])):(t=t instanceof Array?t:new Array(t),this.libs[e].init.apply(this.libs[e],t))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=t,e.add_namespace=n,e.bindings=a,e.S=this.utils.S},inherit:function(e,t){for(var n=t.split(" "),r=n.length;r--;)this.utils.hasOwnProperty(n[r])&&(e[n[r]]=this.utils[n[r]])},set_namespace:function(){var e=this.global.namespace===i?c(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===i||/false/i.test(e)?"":e},libs:{},utils:{S:s,throttle:function(n,r){var i=null;return function(){var e=this,t=arguments;null==i&&(i=setTimeout(function(){n.apply(e,t),i=null},r))}},debounce:function(r,i,a){var o,s;return function(){var e=this,t=arguments,n=a&&!o;return clearTimeout(o),o=setTimeout(function(){o=null,a||(s=r.apply(e,t))},i),s=n?r.apply(e,t):s}},data_options:function(e,t){t=t||"options";var n,r,i,a,o,s={},t=(a=e,0<(e=Foundation.global.namespace).length?a.data(e+"-"+t):a.data(t));if("object"==typeof t)return t;function l(e){return"string"==typeof e?c.trim(e):e}for(n=(i=(t||":").split(";")).length;n--;)r=[(r=i[n].split(":"))[0],r.slice(1).join(":")],/true/i.test(r[1])&&(r[1]=!0),/false/i.test(r[1])&&(r[1]=!1),o=r[1],isNaN(+o)||null===o||""===o||!1===o||!0===o||(-1===r[1].indexOf(".")?r[1]=parseInt(r[1],10):r[1]=parseFloat(r[1])),2===r.length&&0<r[0].length&&(s[l(r[0])]=l(r[1]));return s},register_media:function(e,t){Foundation.media_queries[e]===i&&(c("head").append('<meta class="'+t+'"/>'),Foundation.media_queries[e]=t="string"==typeof(t=c("."+t).css("font-family"))||t instanceof String?t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,""):t)},add_custom_rule:function(e,t){t===i&&Foundation.stylesheet?Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length):Foundation.media_queries[t]!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)},image_loaded:function(e,t){var n=this,r=e.length;0!==r&&!function(e){for(var t=e.length-1;0<=t;t--)if(e.attr("height")===i)return;return 1}(e)||t(e),e.each(function(){o(n.S(this),function(){0===--r&&t(e)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(e){return l.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},c.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,window,window.document),function(l,c,t){"use strict";function s(e){var t=/fade/i.test(e),e=/pop/i.test(e);return{animate:t||e,pop:e,fade:t}}Foundation.libs.reveal={name:"reveal",version:"5.5.2",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:l.noop,bg:l(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,t,n){l.extend(!0,this.settings,t,n),this.bindings(t,n)},events:function(e){var r=this,i=r.S;return i(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){var t,n;e.preventDefault(),r.locked||(n=(t=i(this)).data(r.data_attr("reveal-ajax")),e=t.data(r.data_attr("reveal-replace-content")),r.locked=!0,void 0===n?r.open.call(r,t):(n=!0===n?t.attr("href"):n,r.open.call(r,t,{url:n},{replaceContentSel:e})))}),i(t).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!r.locked){var t=i("["+r.attr_name()+"].open").data(r.attr_name(!0)+"-init")||r.settings,n=i(e.target)[0]===i("."+t.bg_class)[0];if(n){if(!t.close_on_background_click)return;e.stopPropagation()}r.locked=!0,r.close.call(r,n?i("["+r.attr_name()+"].open:not(.toback)"):i(this).closest("["+r.attr_name()+"]"))}}),0<i("["+r.attr_name()+"]",this.scope).length?i(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):i(this.scope).on("open.fndtn.reveal","["+r.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+r.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var r=this;return r.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var t=r.S("["+r.attr_name()+"].open"),n=t.data(r.attr_name(!0)+"-init")||r.settings;n&&27===e.which&&n.close_on_esc&&!r.locked&&r.close.call(r,t)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(e,t){var r,i=this;e?void 0!==e.selector?r=i.S("#"+e.data(i.data_attr("reveal-id"))).first():(r=i.S(this.scope),t=e):r=i.S(this.scope);var a,o,s=(s=r.data(i.attr_name(!0)+"-init"))||this.settings;if(r.hasClass("open")&&e.attr("data-reveal-id")==r.attr("id"))return i.close(r);r.hasClass("open")||(a=i.S("["+i.attr_name()+"].open"),void 0===r.data("css-top")&&r.data("css-top",parseInt(r.css("top"),10)).data("offset",this.cache_offset(r)),r.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(r),r.on("open.fndtn.reveal",function(e){e.namespace}),r.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),a.length<1&&this.toggle_bg(r,!0),void 0!==(t="string"==typeof t?{url:t}:t)&&t.url?(o=void 0!==t.success?t.success:null,l.extend(t,{success:function(e,t,n){!l.isFunction(o)||"string"==typeof(n=o(e,t,n))&&(e=n),("undefined"!=typeof options&&void 0!==options.replaceContentSel?r.find(options.replaceContentSel):r).html(e),i.S(r).foundation("section","reflow"),i.S(r).children().foundation(),0<a.length&&(s.multiple_opened?i.to_back(a):i.hide(a,s.css.close)),i.show(r,s.css.open)}}),s.on_ajax_error!==l.noop&&l.extend(t,{error:s.on_ajax_error}),l.ajax(t)):(0<a.length&&(s.multiple_opened?i.to_back(a):i.hide(a,s.css.close)),this.show(r,s.css.open))),i.S(c).trigger("resize")},close:function(e){var e=e&&e.length?e:this.S(this.scope),t=this.S("["+this.attr_name()+"].open"),n=e.data(this.attr_name(!0)+"-init")||this.settings,r=this;0<t.length&&(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(n.multiple_opened&&1===t.length||!n.multiple_opened||1<e.length)&&(r.toggle_bg(e,!1),r.to_front(e)),n.multiple_opened?(r.hide(e,n.css.close,n),r.to_front(l(l.makeArray(t).reverse()[1]))):r.hide(t,n.css.close,n))},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(e,t){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=l("<div />",{class:this.settings.bg_class}).appendTo("body").hide());var n=0<this.settings.bg.filter(":visible").length;t!=n&&((null==t?n:!t)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(e,t){if(t){var n,r=(o=e.data(this.attr_name(!0)+"-init")||this.settings).root_element,i=this;0===e.parent(r).length&&(n=e.wrap('<div style="display: none;" />').parent(),e.on("closed.fndtn.reveal.wrapped",function(){e.detach().appendTo(n),e.unwrap().unbind("closed.fndtn.reveal.wrapped")}),e.detach().appendTo(r));r=s(o.animation);if(r.animate||(this.locked=!1),r.pop){t.top=l(c).scrollTop()-e.data("offset")+"px";var a={top:l(c).scrollTop()+e.data("css-top")+"px",opacity:1};return setTimeout(function(){return e.css(t).animate(a,o.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},o.animation_speed/2)}if(r.fade){t.top=l(c).scrollTop()+e.data("css-top")+"px";a={opacity:1};return setTimeout(function(){return e.css(t).animate(a,o.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},o.animation_speed/2)}return e.css(t).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var o;return s((o=this.settings).animation).fade?e.fadeIn(o.animation_speed/2):(this.locked=!1,e.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(e,t){if(t){var n=e.data(this.attr_name(!0)+"-init"),r=this,i=s((n=n||this.settings).animation);if(i.animate||(this.locked=!1),i.pop){var a={top:-l(c).scrollTop()-e.data("offset")+"px",opacity:0};return setTimeout(function(){return e.animate(a,n.animation_speed,"linear",function(){r.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}if(i.fade){a={opacity:0};return setTimeout(function(){return e.animate(a,n.animation_speed,"linear",function(){r.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}return e.hide().css(t).removeClass("open").trigger("closed.fndtn.reveal")}return s((n=this.settings).animation).fade?e.fadeOut(n.animation_speed/2):e.hide()},close_video:function(e){var t=l(".flex-video",e.target),e=l("iframe",t);0<e.length&&(e.attr("data-src",e[0].src),e.attr("src",e.attr("src")),t.hide())},open_video:function(e){var t=l(".flex-video",e.target),n=t.find("iframe");0<n.length&&("string"==typeof n.attr("data-src")?n[0].src=n.attr("data-src"):(e=n[0].src,n[0].src=void 0,n[0].src=e),t.show())},data_attr:function(e){return 0<this.namespace.length?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){l(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(s){var i="unobtrusiveAjaxClick";function l(e,t){for(var n=window,r=(e||"").split(".");n&&r.length;)n=n[r.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))}function c(e){return"GET"===e||"POST"===e}function n(o,e){var r,i,a,t=o.getAttribute("data-ajax-confirm");t&&!window.confirm(t)||(r=s(o.getAttribute("data-ajax-loading")),a=o.getAttribute("data-ajax-loading-duration")||0,s.extend(e,{type:o.getAttribute("data-ajax-method")||void 0,url:o.getAttribute("data-ajax-url")||void 0,beforeSend:function(e){var t,n;return t=e,c(n=i)||t.setRequestHeader("X-HTTP-Method-Override",n),!1!==(n=l(o.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments))&&r.show(a),n},complete:function(){r.hide(a),l(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(e,t,n){var r,i,a;r=o,i=e,-1===(n.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(a=(r.getAttribute("data-ajax-mode")||"").toUpperCase(),s(r.getAttribute("data-ajax-update")).each(function(e,t){var n;switch(a){case"BEFORE":n=t.firstChild,s("<div />").html(i).contents().each(function(){t.insertBefore(this,n)});break;case"AFTER":s("<div />").html(i).contents().each(function(){t.appendChild(this)});break;default:s(t).html(i)}})),l(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:l(o.getAttribute("data-ajax-failure"),["xhr","status","error"])}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),c(i=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:i})),s.ajax(e))}s(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),n(this,{url:this.href,type:"GET",data:[]})}),s(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,n=s(e.target),r=n.parents("form")[0],n=n.offset();s(r).data(i,[{name:t+".x",value:Math.round(e.pageX-n.left)},{name:t+".y",value:Math.round(e.pageY-n.top)}]),setTimeout(function(){s(r).removeData(i)},0)}),s(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.target.name,n=s(e.target).parents("form")[0];s(n).data(i,t?[{name:t,value:e.target.value}]:[]),setTimeout(function(){s(n).removeData(i)},0)}),s(document).on("submit","form[data-ajax=true]",function(e){var t=s(this).data(i)||[];e.preventDefault(),(e=s(e=this).data("unobtrusiveValidation"))&&e.validate&&!e.validate()||n(this,{url:this.action,type:this.method||"GET",data:t.concat(s(this).serializeArray())})})}(jQuery),function(l){l.extend(l.fn,{validate:function(e){if(this.length){var n=l.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new l.validator(e,this[0]),l.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),l(e.target).hasClass("cancel")&&(n.cancelSubmit=!0)}),this.submit(function(t){function e(){var e;return!n.settings.submitHandler||(n.submitButton&&(e=l("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&e.remove(),!1)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,e()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):e():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(l(this[0]).is("form"))return this.validate().form();var e=!0,t=l(this[0].form).validate();return this.each(function(){e&=t.element(this)}),e},removeAttrs:function(e){var n={},r=this;return l.each(e.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(e,t){var n=this[0];if(e){var r=l.data(n.form,"validator").settings,i=r.rules,a=l.validator.staticRules(n);switch(e){case"add":l.extend(a,l.validator.normalizeRule(t)),i[n.name]=a,t.messages&&(r.messages[n.name]=l.extend(r.messages[n.name],t.messages));break;case"remove":if(!t)return delete i[n.name],a;var o={};return l.each(t.split(/\s/),function(e,t){o[t]=a[t],delete a[t]}),o}}var s=l.validator.normalizeRules(l.extend({},l.validator.metadataRules(n),l.validator.classRules(n),l.validator.attributeRules(n),l.validator.staticRules(n)),n);return s.required&&(e=s.required,delete s.required,s=l.extend({required:e},s)),s}}),l.extend(l.expr[":"],{blank:function(e){return!l.trim(""+e.value)},filled:function(e){return!!l.trim(""+e.value)},unchecked:function(e){return!e.checked}}),l.validator=function(e,t){this.settings=l.extend(!0,{},l.validator.defaults,e),this.currentForm=t,this.init()},l.validator.format=function(n,e){return 1===arguments.length?function(){var e=l.makeArray(arguments);return e.unshift(n),l.validator.format.apply(this,e)}:((e=2<arguments.length&&e.constructor!==Array?l.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),l.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),t)}),n)},l.extend(l.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:l([]),errorLabelContainer:l([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):l(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):l(e)).removeClass(t).addClass(n)}},setDefaults:function(e){l.extend(l.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:l.validator.format("Please enter no more than {0} characters."),minlength:l.validator.format("Please enter at least {0} characters."),rangelength:l.validator.format("Please enter a value between {0} and {1} characters long."),range:l.validator.format("Please enter a value between {0} and {1}."),max:l.validator.format("Please enter a value less than or equal to {0}."),min:l.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=l(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||l(this.currentForm),this.containers=l(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var r=this.groups={};l.each(this.settings.groups,function(n,e){l.each(e.split(/\s/),function(e,t){r[t]=n})});var n=this.settings.rules;function e(e){var t=l.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");t.settings[n]&&t.settings[n].call(t,this[0],e)}l.each(n,function(e,t){n[e]=l.validator.normalizeRule(t)}),l(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&l(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),l.extend(this.submitted,this.errorMap),this.invalid=l.extend({},this.errorMap),this.valid()||l(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=l(e);var t=!1!==this.check(e);return t?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t},showErrors:function(t){if(t){for(var e in l.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=l.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){l.fn.resetForm&&l(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)n++;return n},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{l(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===l.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return l(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(l(this).rules()))&&(t[this.name]=!0)})},clean:function(e){return l(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return l(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=l([]),this.toHide=l([]),this.currentElements=l([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=l(e).attr("type"),n=l(e).val();return"radio"===t||"checkbox"===t?l('input[name="'+l(e).attr("name")+'"]:checked').val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,r=l(t).rules(),i=!1,a=this.elementValue(t);for(n in r){var o={method:n,parameters:r[n]};try{if("dependency-mismatch"===(e=l.validator.methods[n].call(this,a,t,o.parameters))){i=!0;continue}if(i=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,o),!1}catch(e){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+o.method+"' method",e),e}}if(!i)return this.objectLength(r)&&this.successList.push(t),!0},customMetaMessage:function(e,t){if(l.metadata){e=this.settings.meta?l(e).metadata()[this.settings.meta]:l(e).metadata();return e&&e.messages&&e.messages[t]}},customDataMessage:function(e,t){return l(e).data("msg-"+t.toLowerCase())||e.attributes&&l(e).attr("data-msg-"+t.toLowerCase())},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),this.customMetaMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,l.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),r=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,t.parameters,e):r.test(n)&&(n=l.validator.format(n.replace(r,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t=0;this.errorList[t];t++){var n=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return l(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.attr("generated")&&n.html(t)):(n=l("<"+this.settings.errorElement+"/>").attr({for:this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,l(e)):n.insertAfter(e))),!t&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var t=this.idOrName(e);return this.errors().filter(function(){return l(this).attr("for")===t})},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return e=this.checkable(e)?this.findByName(e.name).not(this.settings.ignore)[0]:e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return l(this.currentForm).find('[name="'+e+'"]')},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return l("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e,t){return e},string:function(e,t){return!!l(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!l.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(l(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(l(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return l.data(e,"previousValue")||l.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:l.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=l(e).attr("class");return e&&l.each(e.split(" "),function(){this in l.validator.classRuleSettings&&l.extend(t,l.validator.classRuleSettings[this])}),t},attributeRules:function(e){var t,n={},r=l(e);for(t in l.validator.methods){var i="required"===t?!!(i=""===(i=r.get(0).getAttribute(t))?!0:i):r.attr(t);i?n[t]=i:r[0].getAttribute("type")===t&&(n[t]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(e){if(!l.metadata)return{};var t=l.data(e.form,"validator").settings.meta;return t?l(e).metadata()[t]:l(e).metadata()},staticRules:function(e){var t={},n=l.data(e.form,"validator");return t=n.settings.rules?l.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(r,i){return l.each(r,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!l(t.depends,i.form).length;break;case"function":n=t.depends.call(i,i)}n?r[e]=void 0===t.param||t.param:delete r[e]}}else delete r[e]}),l.each(r,function(e,t){r[e]=l.isFunction(t)?t(i):t}),l.each(["minlength","maxlength","min","max"],function(){r[this]&&(r[this]=Number(r[this]))}),l.each(["rangelength","range"],function(){r[this]&&(r[this]=[Number(r[this][0]),Number(r[this][1])])}),l.validator.autoCreateRanges&&(r.min&&r.max&&(r.range=[r.min,r.max],delete r.min,delete r.max),r.minlength&&r.maxlength&&(r.rangelength=[r.minlength,r.maxlength],delete r.minlength,delete r.maxlength)),r.messages&&delete r.messages,r},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},l.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){l.validator.methods[e]=t,l.validator.messages[e]=void 0!==n?n:l.validator.messages[e],t.length<3&&l.validator.addClassRules(e,l.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):0<l.trim(e).length;t=l(t).val();return t&&0<t.length},remote:function(r,i,e){if(this.optional(i))return"dependency-mismatch";var a=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,e="string"==typeof e?{url:e}:e,this.pending[i.name])return"pending";if(a.old===r)return a.valid;a.old=r;var o=this;this.startRequest(i);var t={};return t[i.name]=r,l.ajax(l.extend(!0,{url:e,mode:"abort",port:"validate"+i.name,dataType:"json",data:t,success:function(e){o.settings.messages[i.name].remote=a.originalMessage;var t,n=!0===e||"true"===e;n?(t=o.formSubmitted,o.prepareElement(i),o.formSubmitted=t,o.successList.push(i),delete o.invalid[i.name],o.showErrors()):(t={},e=e||o.defaultMessage(i,"remote"),t[i.name]=a.message=l.isFunction(e)?e(r):e,o.invalid[i.name]=!0,o.showErrors(t)),a.valid=n,o.stopRequest(i,n)}},e)),"pending"},minlength:function(e,t,n){e=l.isArray(e)?e.length:this.getLength(l.trim(e),t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=l.isArray(e)?e.length:this.getLength(l.trim(e),t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=l.isArray(e)?e.length:this.getLength(l.trim(e),t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;for(var n=0,r=0,i=!1,a=(e=e.replace(/\D/g,"")).length-1;0<=a;a--){var o=e.charAt(a),r=parseInt(o,10);i&&9<(r*=2)&&(r-=9),n+=r,i=!i}return n%10==0},equalTo:function(e,t,n){n=l(n);return this.settings.onfocusout&&n.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){l(t).valid()}),e===n.val()}}}),l.format=l.validator.format}(jQuery),function(r){var i,a={};r.ajaxPrefilter?r.ajaxPrefilter(function(e,t,n){var r=e.port;"abort"===e.mode&&(a[r]&&a[r].abort(),a[r]=n)}):(i=r.ajax,r.ajax=function(e){var t=("mode"in e?e:r.ajaxSettings).mode,n=("port"in e?e:r.ajaxSettings).port;return"abort"===t?(a[n]&&a[n].abort(),a[n]=i.apply(this,arguments)):i.apply(this,arguments)})}(jQuery),function(i){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||i.each({focus:"focusin",blur:"focusout"},function(e,n){function t(e){return(e=i.event.fix(e)).type=n,i.event.handle.call(this,e)}i.event.special[n]={setup:function(){this.addEventListener(e,t,!0)},teardown:function(){this.removeEventListener(e,t,!0)},handler:function(e){var t=arguments;return t[0]=i.event.fix(e),t[0].type=n,i.event.handle.apply(this,t)}}}),i.extend(i.fn,{validateDelegate:function(n,e,r){return this.bind(e,function(e){var t=i(e.target);if(t.is(n))return r.apply(t,arguments)})}})}(jQuery),function(l){var e,n=l.validator,i="unobtrusiveValidation";function o(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function s(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function c(e){return e.substr(0,e.lastIndexOf(".")+1)}function u(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}function a(e,t){var n=l(this).find("[data-valmsg-for='"+s(t[0].name)+"']"),t=n.attr("data-valmsg-replace"),t=t?!1!==l.parseJSON(t):null;n.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",n),t?(n.empty(),e.removeClass("input-validation-error").appendTo(n)):e.hide()}function d(e,t){var n=l(this).find("[data-valmsg-summary=true]"),r=n.find("ul");r&&r.length&&t.errorList.length&&(r.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(r)}))}function f(e){var t=e.data("unobtrusiveContainer"),n=t.attr("data-valmsg-replace"),n=n?l.parseJSON(n):null;t&&(t.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),n&&t.empty())}function p(e){var t=l(this);t.data("validator").resetForm(),t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function h(e){var t=l(e),n=t.data(i),r=l.proxy(p,e);return n||(n={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:l.proxy(a,e),invalidHandler:l.proxy(d,e),messages:{},rules:{},success:l.proxy(f,e)},attachValidation:function(){t.unbind("reset."+i,r).bind("reset."+i,r).validate(this.options)},validate:function(){return t.validate(),t.valid()}},t.data(i,n)),n}n.unobtrusive={adapters:[],parseElement:function(r,e){var t,i,a,o=l(r),s=o.parents("form")[0];s&&((t=h(s)).options.rules[r.name]=i={},t.options.messages[r.name]=a={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=o.attr(e),n={};void 0!==t&&(e+="-",l.each(this.params,function(){n[this]=o.attr(e+this)}),this.adapt({element:r,form:s,message:t,params:n,rules:i,messages:a}))}),l.extend(i,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e).parents("form").andSelf().add(l(e).find("form")).filter("form");l(e).find(":input[data-val=true]").each(function(){n.unobtrusive.parseElement(this,!0)}),t.each(function(){var e=h(this);e&&e.attachValidation()})}},(e=n.unobtrusive.adapters).add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},e.addBool=function(t,n){return this.add(t,function(e){o(e,n||t,!0)})},e.addMinMax=function(e,r,i,a,t,n){return this.add(e,[t||"min",n||"max"],function(e){var t=e.params.min,n=e.params.max;t&&n?o(e,a,[t,n]):t?o(e,r,t):n&&o(e,i,n)})},e.addSingleVal=function(t,n,r){return this.add(t,[n||"val"],function(e){o(e,r||t,e.params[n])})},n.addMethod("__dummy__",function(e,t,n){return!0}),n.addMethod("regex",function(e,t,n){return!!this.optional(t)||(n=new RegExp(n).exec(e))&&0===n.index&&n[0].length===e.length}),n.addMethod("nonalphamin",function(e,t,n){var r;return r=n?(r=e.match(/\W/g))&&r.length>=n:r}),e.addSingleVal("accept","exts").addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.add("equalto",["other"],function(e){var t=c(e.element.name),t=u(e.params.other,t);o(e,"equalTo",l(e.form).find(":input[name='"+s(t)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||o(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(r){var i={url:r.params.url,type:r.params.type||"GET",data:{}},a=c(r.element.name);l.each((r.params.additionalfields||r.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var n=u(t,a);i.data[n]=function(){return l(r.form).find(":input[name='"+s(n)+"']").val()}}),o(r,"remote",i)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&o(e,"minlength",e.params.min),e.params.nonalphamin&&o(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&o(e,"regex",e.params.regex)}),l(function(){n.unobtrusive.parse(document)})}(jQuery),function(a,o,n,s){var l=a(o);a.fn.lazyload=function(e){var r=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:o,data_attribute:"original",skip_invisible:!0,appear:null,load:null};function t(){var t=0;r.each(function(){var e=a(this);if((!i.skip_invisible||e.is(":visible"))&&!a.abovethetop(this,i)&&!a.leftofbegin(this,i))if(a.belowthefold(this,i)||a.rightoffold(this,i)){if(++t>i.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(s!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),s!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),a.extend(i,e)),e=i.container===s||i.container===o?l:a(i.container),0===i.event.indexOf("scroll")&&e.bind(i.event,t),this.each(function(){var t=this,n=a(t);t.loaded=!1,n.one("appear",function(){var e;this.loaded||(i.appear&&(e=r.length,i.appear.call(t,e,i)),a("<img />").bind("load",function(){n.hide().attr("src",n.data(i.data_attribute))[i.effect](i.effect_speed),t.loaded=!0;var e=a.grep(r,function(e){return!e.loaded});r=a(e),i.load&&(e=r.length,i.load.call(t,e,i))}).attr("src",n.data(i.data_attribute)))}),0!==i.event.indexOf("scroll")&&n.bind(i.event,function(e){t.loaded||n.trigger("appear")})}),l.bind("resize",function(e){t()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&l.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&r.each(function(){a(this).trigger("appear")})}),SCM.EventEmitter.subscribe("AppearTriggerBound",function(){t()}),SCM.EventEmitter.subscribe("LearningSearchImageBound",function(){t()}),a(n).ready(function(){t()}),this},a.belowthefold=function(e,t){var n=t.container===s||t.container===o?l.height()+l.scrollTop():a(t.container).offset().top+a(t.container).height();return n<=a(e).offset().top-t.threshold},a.rightoffold=function(e,t){var n=t.container===s||t.container===o?l.width()+l.scrollLeft():a(t.container).offset().left+a(t.container).width();return n<=a(e).offset().left-t.threshold},a.abovethetop=function(e,t){var n=t.container===s||t.container===o?l.scrollTop():a(t.container).offset().top;return n>=a(e).offset().top+t.threshold+a(e).height()},a.leftofbegin=function(e,t){var n=t.container===s||t.container===o?l.scrollLeft():a(t.container).offset().left;return n>=a(e).offset().left+t.threshold+a(e).width()},a.inviewport=function(e,t){return!(a.rightoffold(e,t)||a.leftofbegin(e,t)||a.belowthefold(e,t)||a.abovethetop(e,t))},a.extend(a.expr[":"],{"below-the-fold":function(e){return a.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!a.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return a.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!a.rightoffold(e,{threshold:0})},"in-viewport":function(e){return a.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!a.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return a.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!a.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(e){"use strict";e.Placeholders={Utils:{addEventListener:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},inArray:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},moveCaret:function(e,t){var n;e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))},changeType:function(e,t){try{return e.type=t,!0}catch(e){return!1}}}}}(this),function(e){"use strict";function t(){}function s(){try{return document.activeElement}catch(e){}}function l(e,t){var n=!!t&&e.value!==t,t=e.value===e.getAttribute(A);return(n||t)&&"true"===e.getAttribute(k)&&(e.removeAttribute(k),e.value=e.value.replace(e.getAttribute(A),""),e.className=e.className.replace(S,""),t=e.getAttribute(E),0<=parseInt(t,10)&&(e.setAttribute("maxLength",t),e.removeAttribute(E)),(t=e.getAttribute(C))&&(e.type=t),!0)}function c(e){var t=e.getAttribute(A);return!(""!==e.value||!t)&&(e.setAttribute(k,"true"),e.value=t,e.className+=" "+x,e.getAttribute(E)||(e.setAttribute(E,e.maxLength),e.removeAttribute("maxLength")),e.getAttribute(C)?e.type="text":"password"===e.type&&O.changeType(e,"text")&&e.setAttribute(C,"password"),!0)}function n(e,t){var n,r,i,a,o;if(e&&e.getAttribute(A))t(e);else for(r=e?e.getElementsByTagName("input"):d,i=e?e.getElementsByTagName("textarea"):f,o=0,a=(n=r?r.length:0)+(i?i.length:0);o<a;o++)t(o<n?r[o]:i[o-n])}function u(e){n(e,l)}function r(e){var t,n,r,i,a,o;e.form&&((g="string"==typeof(g=e.form)?document.getElementById(g):g).getAttribute(j)||(O.addEventListener(g,"submit",(o=g,function(){u(o)})),g.setAttribute(j,"true"))),O.addEventListener(e,"focus",(a=e,function(){p&&a.value===a.getAttribute(A)&&"true"===a.getAttribute(k)?O.moveCaret(a,0):l(a)})),O.addEventListener(e,"blur",(i=e,function(){c(i)})),p&&(O.addEventListener(e,"keydown",(r=e,function(e){return h=r.value,"true"===r.getAttribute(k)&&h===r.getAttribute(A)&&O.inArray(w,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0})),O.addEventListener(e,"keyup",(n=e,function(){l(n,h),""===n.value&&(n.blur(),O.moveCaret(n,0))})),O.addEventListener(e,"click",(t=e,function(){t===s()&&t.value===t.getAttribute(A)&&"true"===t.getAttribute(k)&&O.moveCaret(t,0)}))),e.setAttribute(_,"true"),e.setAttribute(A,m),!p&&e===s()||c(e)}var d,f,p,i,h,m,a,g,o,y,v,b=["text","search","url","tel","email","password","number","textarea"],w=[27,33,34,35,36,37,38,39,40,8,46],x="placeholdersjs",S=RegExp("(?:^|\\s)"+x+"(?!\\S)"),A="data-placeholder-value",k="data-placeholder-active",C="data-placeholder-type",j="data-placeholder-submit",_="data-placeholder-bound",E="data-placeholder-maxlength",I=document.createElement("input"),M=document.getElementsByTagName("head")[0],T=document.documentElement,D=e.Placeholders,O=D.Utils;if(D.nativeSupport=void 0!==I.placeholder,!D.nativeSupport){for(d=document.getElementsByTagName("input"),f=document.getElementsByTagName("textarea"),p="false"===T.getAttribute("data-placeholder-focus"),i="false"!==T.getAttribute("data-placeholder-live"),(I=document.createElement("style")).type="text/css",T=document.createTextNode("."+x+" { color:#ccc; }"),I.styleSheet?I.styleSheet.cssText=T.nodeValue:I.appendChild(T),M.insertBefore(I,M.firstChild),v=0,y=d.length+f.length;v<y;v++)o=d.length>v?d[v]:f[v-d.length],(m=o.attributes.placeholder)&&((m=m.nodeValue)&&O.inArray(b,o.type)&&r(o));a=setInterval(function(){for(v=0,y=d.length+f.length;v<y;v++)o=d.length>v?d[v]:f[v-d.length],(m=o.attributes.placeholder)?(m=m.nodeValue)&&O.inArray(b,o.type)&&(o.getAttribute(_)||r(o),m===o.getAttribute(A)&&("password"!==o.type||o.getAttribute(C))||("password"===o.type&&!o.getAttribute(C)&&O.changeType(o,"text")&&o.setAttribute(C,"password"),o.value===o.getAttribute(A)&&(o.value=m),o.setAttribute(A,m))):o.getAttribute(k)&&(l(o),o.removeAttribute(A));i||clearInterval(a)},100)}O.addEventListener(e,"beforeunload",function(){D.disable()}),D.disable=D.nativeSupport?t:u,D.enable=D.nativeSupport?t:function(e){n(e,c)}}(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){"use strict";function c(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<k;e+=2)(0,D[e])(D[e+1]),D[e]=void 0,D[e+1]=void 0;k=0}function o(e,t){var n=arguments,r=this,i=new this.constructor(l);void 0===i[P]&&v(i);var a,o=r._state;return o?(a=n[o-1],_(function(){return y(o,i,a,r._result)})):m(r,i,e,t),i}function s(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(l);return f(t,e),t}function l(){}function u(e){try{return e.then}catch(e){return $.error=e,$}}function a(e,r,i){_(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(i,r,function(e){n||(n=!0,(r!==e?f:p)(t,e))},function(e){n||(n=!0,h(t,e))},t._label);!n&&e&&(n=!0,h(t,e))},e)}function d(e,t,n){var r,i;t.constructor===e.constructor&&n===o&&t.constructor.resolve===s?(r=e,(i=t)._state===F?p(r,i._result):i._state===L?h(r,i._result):m(i,void 0,function(e){return f(r,e)},function(e){return h(r,e)})):n===$?(h(e,$.error),$.error=null):void 0!==n&&c(n)?a(e,t,n):p(e,t)}function f(e,t){var n;e===t?h(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?d(e,t,u(t)):p(e,t)}function r(e){e._onerror&&e._onerror(e._result),g(e)}function p(e,t){e._state===R&&(e._result=t,e._state=F,0!==e._subscribers.length&&_(g,e))}function h(e,t){e._state===R&&(e._state=L,e._result=t,_(r,e))}function m(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+F]=n,i[a+L]=r,0===a&&e._state&&_(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?y(n,r,i,a):i(a);e._subscribers.length=0}}function e(){this.error=null}function y(e,t,n,r){var i=c(n),a=void 0,o=void 0,s=void 0,l=void 0;if(i){if((a=function(e,t){try{return e(t)}catch(e){return U.error=e,U}}(n,r))===U?(l=!0,o=a.error,a.error=null):s=!0,t===a)return void h(t,new TypeError("A promises callback cannot return that same promise."))}else a=r,s=!0;t._state!==R||(i&&s?f(t,a):l?h(t,o):e===F?p(t,a):e===L&&h(t,a))}function v(e){e[P]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}function i(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[P]||v(this.promise),A(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&p(this.promise,this._result))):h(this.promise,new Error("Array Methods must be provided an Array"))}function b(e){this[P]=N++,this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof b?function(t,e){try{e(function(e){f(t,e)},function(e){h(t,e)})}catch(e){h(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var w,x,S,A=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},k=0,C=void 0,j=void 0,_=function(e,t){D[k]=e,D[k+1]=t,2===(k+=2)&&(j?j(n):O())},E="undefined"!=typeof window?window:void 0,I=E||{},M=I.MutationObserver||I.WebKitMutationObserver,T="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),I="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,D=new Array(1e3),O=void 0,O=T?function(){return process.nextTick(n)}:M?(x=0,M=new M(n),S=document.createTextNode(""),M.observe(S,{characterData:!0}),function(){S.data=x=++x%2}):I?((w=new MessageChannel).port1.onmessage=n,function(){return w.port2.postMessage(0)}):(void 0===E&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(C=e.runOnLoop||e.runOnContext)?function(){C(n)}:t()}catch(e){return t()}}:t)(),P=Math.random().toString(36).substring(16),R=void 0,F=1,L=2,$=new e,U=new e,N=0;return i.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===R&&n<e;n++)this._eachEntry(t[n],n)},i.prototype._eachEntry=function(t,e){var n,r,i=this._instanceConstructor,a=i.resolve;a===s?(n=u(t))===o&&t._state!==R?this._settledAt(t._state,e,t._result):"function"!=typeof n?(this._remaining--,this._result[e]=t):i===b?(d(r=new i(l),t,n),this._willSettleAt(r,e)):this._willSettleAt(new i(function(e){return e(t)}),e):this._willSettleAt(a(t),e)},i.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===R&&(this._remaining--,e===L?h(r,n):this._result[t]=n),0===this._remaining&&p(r,this._result)},i.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,function(e){return n._settledAt(F,t,e)},function(e){return n._settledAt(L,t,e)})},b.all=function(e){return new i(this,e).promise},b.race=function(i){var a=this;return new a(A(i)?function(e,t){for(var n=i.length,r=0;r<n;r++)a.resolve(i[r]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},b.resolve=s,b.reject=function(e){var t=new this(l);return h(t,e),t},b._setScheduler=function(e){j=e},b._setAsap=function(e){_=e},b._asap=_,b.prototype={constructor:b,then:o,catch:function(e){return this.then(null,e)}},b.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=b},(b.Promise=b).polyfill(),b}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(s,l,c){var n={init:function(e,t){this.$elem=s(t),this.options=s.extend({},s.fn.owlCarousel.options,this.$elem.data(),e),this.userOptions=e,this.loadContent()},loadContent:function(){var e,r=this;"function"==typeof r.options.beforeInit&&r.options.beforeInit.apply(this,[r.$elem]),"string"==typeof r.options.jsonPath?(e=r.options.jsonPath,s.getJSON(e,function(e){var t,n="";if("function"==typeof r.options.jsonSuccess)r.options.jsonSuccess.apply(this,[e]);else{for(t in e.owl)e.owl.hasOwnProperty(t)&&(n+=e.owl[t].item);r.$elem.html(n)}r.logIn()})):r.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style")),this.$elem.data("owl-originalClasses",this.$elem.attr("class")),this.$elem.css({opacity:0}),this.orignalItems=this.options.items,this.checkBrowser(),this.wrapperWidth=0,this.checkVisible=null,this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass(),this.eventTypes(),this.$userItems=this.$elem.children(),this.itemsAmount=this.$userItems.length,this.wrapItems(),this.$owlItems=this.$elem.find(".owl-item"),this.$owlWrapper=this.$elem.find(".owl-wrapper"),this.playDirection="next",this.prevItem=0,this.prevArr=[0],this.currentItem=0,this.customEvents(),this.onStartup()},onStartup:function(){this.updateItems(),this.calculateAll(),this.buildControls(),this.updateControls(),this.response(),this.moveEvents(),this.stopOnHover(),this.owlStatus(),!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle),!0===this.options.autoPlay&&(this.options.autoPlay=5e3),this.play(),this.$elem.find(".owl-wrapper").css("display","block"),this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility(),this.onstartup=!1,this.eachMoveUpdate(),"function"==typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"==typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]),this.watchVisibility(),this.updateItems(),this.calculateAll(),this.updatePosition(),this.updateControls(),this.eachMoveUpdate(),"function"==typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var e=this;l.setTimeout(function(){e.updateVars()},0)},watchVisibility:function(){var e=this;if(!1!==e.$elem.is(":visible"))return!1;e.$elem.css({opacity:0}),l.clearInterval(e.autoPlayInterval),l.clearInterval(e.checkVisible),e.checkVisible=l.setInterval(function(){e.$elem.is(":visible")&&(e.reload(),e.$elem.animate({opacity:1},200),l.clearInterval(e.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var e=this.$elem.hasClass(this.options.baseClass),t=this.$elem.hasClass(this.options.theme);e||this.$elem.addClass(this.options.baseClass),t||this.$elem.addClass(this.options.theme)},updateItems:function(){var e,t;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;if((e=s(this.options.responsiveBaseWidth).width())>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems),!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(e,t){return e[0]-t[0]}),t=0;t<this.options.itemsCustom.length;t+=1)this.options.itemsCustom[t][0]<=e&&(this.options.items=this.options.itemsCustom[t][1]);else e<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),e<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),e<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),e<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),e<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var e,t,n=this;if(!0!==n.options.responsive)return!1;t=s(l).width(),n.resizer=function(){s(l).width()!==t&&(!1!==n.options.autoPlay&&l.clearInterval(n.autoPlayInterval),l.clearTimeout(e),e=l.setTimeout(function(){t=s(l).width(),n.updateVars()},n.options.responsiveRefreshRate))},s(l).resize(n.resizer)},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var n=this,r=0,i=n.itemsAmount-n.options.items;n.$owlItems.each(function(e){var t=s(this);t.css({width:n.itemWidth}).data("owl-item",Number(e)),0!=e%n.options.items&&e!==i||i<e||(r+=1),t.data("owl-roundPages",r)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var e=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);return this.options.items>this.itemsAmount?this.maximumPixels=e=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=e),e},min:function(){return 0},loops:function(){var e,t,n=0,r=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)r+=this.itemWidth,this.positionsInArray.push(-r),!0===this.options.scrollPerPage&&((t=(t=s(this.$owlItems[e])).data("owl-roundPages"))!==n&&(this.pagesInArray[n]=this.positionsInArray[e],n=t))},buildControls:function(){!0!==this.options.navigation&&!0!==this.options.pagination||(this.owlControls=s('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var t=this,e=s('<div class="owl-buttons"/>');t.owlControls.append(e),t.buttonPrev=s("<div/>",{class:"owl-prev",html:t.options.navigationText[0]||""}),t.buttonNext=s("<div/>",{class:"owl-next",html:t.options.navigationText[1]||""}),e.append(t.buttonPrev).append(t.buttonNext),e.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(e){e.preventDefault()}),e.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(e){e.preventDefault(),s(this).hasClass("owl-next")?t.next():t.prev()})},buildPagination:function(){var t=this;t.paginationWrapper=s('<div class="owl-pagination"/>'),t.owlControls.append(t.paginationWrapper),t.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(e){e.preventDefault(),Number(s(this).data("owl-page"))!==t.currentItem&&t.goTo(Number(s(this).data("owl-page")),!0)})},updatePagination:function(){var e,t,n,r,i,a;if(!1===this.options.pagination)return!1;for(this.paginationWrapper.html(""),t=this.itemsAmount-this.itemsAmount%this.options.items,r=e=0;r<this.itemsAmount;r+=1)0==r%this.options.items&&(e+=1,t===r&&(n=this.itemsAmount-this.options.items),i=s("<div/>",{class:"owl-page"}),a=s("<span></span>",{text:!0===this.options.paginationNumbers?e:"",class:!0===this.options.paginationNumbers?"owl-numbers":""}),i.append(a),i.data("owl-page",t===r?n:r),i.data("owl-roundPages",e),this.paginationWrapper.append(i));this.checkPagination()},checkPagination:function(){var e=this;if(!1===e.options.pagination)return!1;e.paginationWrapper.find(".owl-page").each(function(){s(this).data("owl-roundPages")===s(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),s(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(e){if(this.isTransition)return!1;if(this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1,this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0)){if(!0!==this.options.rewindNav)return this.currentItem=this.maximumItem,!1;this.currentItem=0,e="rewind"}this.goTo(this.currentItem,e)},prev:function(e){if(this.isTransition)return!1;if(this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1),this.currentItem<0){if(!0!==this.options.rewindNav)return this.currentItem=0,!1;this.currentItem=this.maximumItem,e="rewind"}this.goTo(this.currentItem,e)},goTo:function(e,t,n){var r=this;return!r.isTransition&&("function"==typeof r.options.beforeMove&&r.options.beforeMove.apply(this,[r.$elem]),e>=r.maximumItem?e=r.maximumItem:e<=0&&(e=0),r.currentItem=r.owl.currentItem=e,!1!==r.options.transitionStyle&&"drag"!==n&&1===r.options.items&&!0===r.browser.support3d?(r.swapSpeed(0),!0===r.browser.support3d?r.transition3d(r.positionsInArray[e]):r.css2slide(r.positionsInArray[e],1),r.afterGo(),r.singleItemTransition(),!1):(e=r.positionsInArray[e],!0===r.browser.support3d?(!(r.isCss3Finish=!1)===t?(r.swapSpeed("paginationSpeed"),l.setTimeout(function(){r.isCss3Finish=!0},r.options.paginationSpeed)):"rewind"===t?(r.swapSpeed(r.options.rewindSpeed),l.setTimeout(function(){r.isCss3Finish=!0},r.options.rewindSpeed)):(r.swapSpeed("slideSpeed"),l.setTimeout(function(){r.isCss3Finish=!0},r.options.slideSpeed)),r.transition3d(e)):!0===t?r.css2slide(e,r.options.paginationSpeed):"rewind"===t?r.css2slide(e,r.options.rewindSpeed):r.css2slide(e,r.options.slideSpeed),void r.afterGo()))},jumpTo:function(e){"function"==typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]),e>=this.maximumItem||-1===e?e=this.maximumItem:e<=0&&(e=0),this.swapSpeed(0),!0===this.browser.support3d?this.transition3d(this.positionsInArray[e]):this.css2slide(this.positionsInArray[e],1),this.currentItem=this.owl.currentItem=e,this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem),this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2],this.prevArr.shift(0),this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp()),"function"==typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop",l.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var e=this;if(!(e.apStatus="play")===e.options.autoPlay)return!1;l.clearInterval(e.autoPlayInterval),e.autoPlayInterval=l.setInterval(function(){e.next(!0)},e.options.autoPlay)},swapSpeed:function(e){"slideSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof e&&this.$owlWrapper.css(this.addCssSpeed(e))},addCssSpeed:function(e){return{"-webkit-transition":"all "+e+"ms ease","-moz-transition":"all "+e+"ms ease","-o-transition":"all "+e+"ms ease",transition:"all "+e+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(e){return{"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)","-ms-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px,0px)"}},transition3d:function(e){this.$owlWrapper.css(this.doTranslate(e))},css2move:function(e){this.$owlWrapper.css({left:e})},css2slide:function(e,t){var n=this;n.isCssFinish=!1,n.$owlWrapper.stop(!0,!0).animate({left:e},{duration:t||n.options.slideSpeed,complete:function(){n.isCssFinish=!0}})},checkBrowser:function(){var e=c.createElement("div");e.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)",e=e.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g),this.browser={support3d:null!==e&&1===e.length,isTouch:"ontouchstart"in l||l.navigator.msMaxTouchPoints}},moveEvents:function(){!1===this.options.mouseDrag&&!1===this.options.touchDrag||(this.gestures(),this.disabledEvents())},eventTypes:function(){var e=["s","e","x"];this.ev_types={},!0===this.options.mouseDrag&&!0===this.options.touchDrag?e=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?e=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(e=["mousedown.owl","mousemove.owl","mouseup.owl"]),this.ev_types.start=e[0],this.ev_types.move=e[1],this.ev_types.end=e[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(e){e.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return s(e.target).is("input, textarea, select, option")})},gestures:function(){function n(e){return void 0!==e.touches?{x:e.touches[0].pageX,y:e.touches[0].pageY}:void 0===e.touches?void 0!==e.pageX?{x:e.pageX,y:e.pageY}:void 0===e.pageX?{x:e.clientX,y:e.clientY}:void 0:void 0}function r(e){"on"===e?(s(c).on(a.ev_types.move,t),s(c).on(a.ev_types.end,i)):"off"===e&&(s(c).off(a.ev_types.move),s(c).off(a.ev_types.end))}function t(e){e=e.originalEvent||e||l.event,a.newPosX=n(e).x-o.offsetX,a.newPosY=n(e).y-o.offsetY,a.newRelativeX=a.newPosX-o.relativePos,"function"==typeof a.options.startDragging&&!0!==o.dragging&&0!==a.newRelativeX&&(o.dragging=!0,a.options.startDragging.apply(a,[a.$elem])),(8<a.newRelativeX||a.newRelativeX<-8)&&!0===a.browser.isTouch&&(void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,o.sliding=!0),(10<a.newPosY||a.newPosY<-10)&&!1===o.sliding&&s(c).off("touchmove.owl"),a.newPosX=Math.max(Math.min(a.newPosX,a.newRelativeX/5),a.maximumPixels+a.newRelativeX/5),!0===a.browser.support3d?a.transition3d(a.newPosX):a.css2move(a.newPosX)}function i(e){var t;(e=e.originalEvent||e||l.event).target=e.target||e.srcElement,!(o.dragging=!1)!==a.browser.isTouch&&a.$owlWrapper.removeClass("grabbing"),a.dragDirection=a.newRelativeX<0?a.owl.dragDirection="left":a.owl.dragDirection="right",0!==a.newRelativeX&&(t=a.getNewPosition(),a.goTo(t,!1,"drag"),o.targetElement===e.target&&!0!==a.browser.isTouch&&(s(e.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),s(e.target).off("click.disable")}),t=(e=s._data(e.target,"events").click).pop(),e.splice(0,0,t))),r("off")}var a=this,o={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};a.isCssFinish=!0,a.$elem.on(a.ev_types.start,".owl-wrapper",function(e){var t;if(3===(e=e.originalEvent||e||l.event).which)return!1;if(!(a.itemsAmount<=a.options.items)){if(!1===a.isCssFinish&&!a.options.dragBeforeAnimFinish||!1===a.isCss3Finish&&!a.options.dragBeforeAnimFinish)return!1;!1!==a.options.autoPlay&&l.clearInterval(a.autoPlayInterval),!0===a.browser.isTouch||a.$owlWrapper.hasClass("grabbing")||a.$owlWrapper.addClass("grabbing"),a.newPosX=0,a.newRelativeX=0,s(this).css(a.removeTransition()),t=s(this).position(),o.relativePos=t.left,o.offsetX=n(e).x-t.left,o.offsetY=n(e).y-t.top,r("on"),o.sliding=!1,o.targetElement=e.target||e.srcElement}})},getNewPosition:function(){var e=this.closestItem();return e>this.maximumItem?e=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=e=0),e},closestItem:function(){var n=this,r=!0===n.options.scrollPerPage?n.pagesInArray:n.positionsInArray,i=n.newPosX,a=null;return s.each(r,function(e,t){i-n.itemWidth/20>r[e+1]&&i-n.itemWidth/20<t&&"left"===n.moveDirection()?(a=t,n.currentItem=!0===n.options.scrollPerPage?s.inArray(a,n.positionsInArray):e):i+n.itemWidth/20<t&&i+n.itemWidth/20>(r[e+1]||r[e]-n.itemWidth)&&"right"===n.moveDirection()&&(!0===n.options.scrollPerPage?(a=r[e+1]||r[r.length-1],n.currentItem=s.inArray(a,n.positionsInArray)):(a=r[e+1],n.currentItem=e+1))}),n.currentItem},moveDirection:function(){var e;return this.newRelativeX<0?(e="right",this.playDirection="next"):(e="left",this.playDirection="prev"),e},customEvents:function(){var n=this;n.$elem.on("owl.next",function(){n.next()}),n.$elem.on("owl.prev",function(){n.prev()}),n.$elem.on("owl.play",function(e,t){n.options.autoPlay=t,n.play(),n.hoverStatus="play"}),n.$elem.on("owl.stop",function(){n.stop(),n.hoverStatus="stop"}),n.$elem.on("owl.goTo",function(e,t){n.goTo(t)}),n.$elem.on("owl.jumpTo",function(e,t){n.jumpTo(t)})},stopOnHover:function(){var e=this;!0===e.options.stopOnHover&&!0!==e.browser.isTouch&&!1!==e.options.autoPlay&&(e.$elem.on("mouseover",function(){e.stop()}),e.$elem.on("mouseout",function(){"stop"!==e.hoverStatus&&e.play()}))},lazyLoad:function(){var e,t,n,r;if(!1===this.options.lazyLoad)return!1;for(e=0;e<this.itemsAmount;e+=1)"loaded"!==(t=s(this.$owlItems[e])).data("owl-loaded")&&(n=t.data("owl-item"),"string"!=typeof(r=t.find(".lazyOwl")).data("src")?t.data("owl-loaded","loaded"):(void 0===t.data("owl-loaded")&&(r.hide(),t.addClass("loading").data("owl-loaded","checked")),(!0!==this.options.lazyFollow||n>=this.currentItem)&&n<this.currentItem+this.options.items&&r.length&&this.lazyPreload(t,r)))},lazyPreload:function(e,t){function n(){e.data("owl-loaded","loaded").removeClass("loading"),t.removeAttr("data-src"),"fade"===i.options.lazyEffect?t.fadeIn(400):t.show(),"function"==typeof i.options.afterLazyLoad&&i.options.afterLazyLoad.apply(this,[i.$elem])}var r,i=this,a=0;"DIV"===t.prop("tagName")?(t.css("background-image","url("+t.data("src")+")"),r=!0):t[0].src=t.data("src"),function e(){a+=1,!i.completeImg(t.get(0))&&!0!==r&&a<=100?l.setTimeout(e,100):n()}()},autoHeight:function(){function t(){var e=s(r.$owlItems[r.currentItem]).height();r.wrapperOuter.css("height",e+"px"),r.wrapperOuter.hasClass("autoHeight")||l.setTimeout(function(){r.wrapperOuter.addClass("autoHeight")},0)}var n,r=this,i=s(r.$owlItems[r.currentItem]).find("img");void 0!==i.get(0)?(n=0,function e(){n+=1,r.completeImg(i.get(0))?t():n<=100?l.setTimeout(e,100):r.wrapperOuter.css("height","")}()):t()},completeImg:function(e){return!(!e.complete||void 0!==e.naturalWidth&&0===e.naturalWidth)},onVisibleItems:function(){var e;for(!0===this.options.addClassActive&&this.$owlItems.removeClass("active"),this.visibleItems=[],e=this.currentItem;e<this.currentItem+this.options.items;e+=1)this.visibleItems.push(e),!0===this.options.addClassActive&&s(this.$owlItems[e]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(e){this.outClass="owl-"+e+"-out",this.inClass="owl-"+e+"-in"},singleItemTransition:function(){var e=this,t=e.outClass,n=e.inClass,r=e.$owlItems.eq(e.currentItem),i=e.$owlItems.eq(e.prevItem),a=Math.abs(e.positionsInArray[e.currentItem])+e.positionsInArray[e.prevItem],o=Math.abs(e.positionsInArray[e.currentItem])+e.itemWidth/2;e.isTransition=!0,e.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":o+"px","-moz-perspective-origin":o+"px","perspective-origin":o+"px"}),i.css({position:"relative",left:a+"px"}).addClass(t).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){e.endPrev=!0,i.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),e.clearTransStyle(i,t)}),r.addClass(n).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){e.endCurrent=!0,r.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),e.clearTransStyle(r,n)})},clearTransStyle:function(e,t){e.css({position:"",left:""}).removeClass(t),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),s(c).off(".owl owl"),s(l).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop(),l.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(e){e=s.extend({},this.userOptions,e),this.unWrap(),this.init(e,this.$elem)},addItem:function(e,t){return!!e&&(0===this.$elem.children().length?(this.$elem.append(e),this.setVars(),!1):(this.unWrap(),(t=void 0===t||-1===t?-1:t)>=this.$userItems.length||-1===t?this.$userItems.eq(-1).after(e):this.$userItems.eq(t).before(e),void this.setVars()))},removeItem:function(e){if(0===this.$elem.children().length)return!1;e=void 0===e||-1===e?-1:e,this.unWrap(),this.$userItems.eq(e).remove(),this.setVars()}};s.fn.owlCarousel=function(t){return this.each(function(){if(!0===s(this).data("owl-init"))return!1;s(this).data("owl-init",!0);var e=Object.create(n);e.init(t,this),s.data(this,"owlCarousel",e)})},s.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:l,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),$=window.jQuery,win=$(window),doc=$(document),$.fn.stick_in_parent=function(){var e,t,n,x,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=r.sticky_class,A=r.inner_scrolling,k=r.recalc_every,C=r.parent,j=r.offset_top,_=r.spacer,E=r.bottoming,I=r.parent_height_minus,M=win.height(),T=doc.height();for(null==j&&(j=0),null==C&&(C=void 0),null==A&&(A=!0),null==S&&(S="is_stuck"),null==E&&(E=!0),null==I&&(I=0),x=function(e){var t,n;return window.getComputedStyle?(e[0],t=window.getComputedStyle(e[0]),n=parseFloat(t.getPropertyValue("width"))+parseFloat(t.getPropertyValue("margin-left"))+parseFloat(t.getPropertyValue("margin-right")),"border-box"!==t.getPropertyValue("box-sizing")&&(n+=parseFloat(t.getPropertyValue("border-left-width"))+parseFloat(t.getPropertyValue("border-right-width"))+parseFloat(t.getPropertyValue("padding-left"))+parseFloat(t.getPropertyValue("padding-right"))),n):e.outerWidth(!0)},t=0,n=this.length;t<n;t++)e=this[t],function(i,a,o,s,l,c,u,d){var f,e,p,h,m,g,y,v,t,b,w,r;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),m=T,y=i.parent(),!(y=null!=C?y.closest(C):y).length)throw"failed to find stick parent";f=p=!1,(w=null!=_?_&&i.closest(_):$("<div />"))&&w.css("position",i.css("position")),(v=function(){var e,t,n;if(!d)return M=win.height(),T=doc.height(),m=T,e=parseInt(y.css("border-top-width"),10),t=parseInt(y.css("padding-top"),10),a=0<I?I:parseInt(y.css("padding-bottom"),10),o=y.offset().top+e+t,s=y.height()-I,p&&(f=p=!1,null==_&&(i.insertAfter(w),w.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(S),n=!0),l=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-j,c=i.outerHeight(!0),u=i.css("float"),w&&w.css({width:x(i),height:c,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:u}),n?r():void 0})(),c!==s&&(h=void 0,g=j,b=k,r=function(){var e,t,n,r;if(!d)return n=!1,null!=b&&--b<=0&&(b=k,v(),n=!0),n||T===m||(v(),n=!0),n=win.scrollTop(),null!=h&&(t=n-h),h=n,p?(E&&(r=s+o<n+c+g,f&&!r&&(f=!1,i.css({position:"fixed",bottom:"",top:g}).trigger("sticky_kit:unbottom"))),n<l&&(p=!1,g=j,null==_&&("left"!==u&&"right"!==u||i.insertAfter(w),w.detach()),i.css(e={position:"",width:"",top:""}).removeClass(S).trigger("sticky_kit:unstick")),A&&M<c+j&&(f||(g-=t,g=Math.max(M-c,g),g=Math.min(j,g),p&&i.css({top:g+"px"})))):l<n&&(p=!0,(e={position:"fixed",top:g}).width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(e).addClass(S),null==_&&(i.after(w),"left"!==u&&"right"!==u||w.append(i)),i.trigger("sticky_kit:stick")),p&&E&&(null==r&&(r=s+o<n+c+g),!f&&r)?(f=!0,"static"===y.css("position")&&y.css({position:"relative"}),i.css({position:"absolute",bottom:a,top:"auto"}).trigger("sticky_kit:bottom")):void 0},t=function(){return v(),r()},e=function(){if(d=!0,win.off("touchmove",r),win.off("scroll",r),win.off("resize",t),$(document.body).off("sticky_kit:recalc",t),i.off("sticky_kit:detach",e),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),y.position("position",""),p)return null==_&&("left"!==u&&"right"!==u||i.insertAfter(w),w.remove()),i.removeClass(S)},win.on("touchmove",r),win.on("scroll",r),win.on("resize",t),$(document.body).on("sticky_kit:recalc",t),i.on("sticky_kit:detach",e),setTimeout(r,0))}}($(e));return this},function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.thiss=t():e.thiss=t()}(this,function(){return r={},i.m=n=[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return a});var i=n(2),a=(r(o.prototype,[{key:"create_iframe",value:function(e){var t=window.document.createElement("iframe");return t.style.display="none",t.style.position="absolute",t.style.top="-999px",t.style.left="-999px",t.id="ps_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10),window.document.body.appendChild(t),t.src=e,t}},{key:"update",value:function(e,t){return i.send(this.dst,"update",{context:e,entity:t,apikey:this.apikey})}},{key:"entities",value:function(e){return i.send(this.dst,"entities",{context:e,apikey:this.apikey})}},{key:"remove",value:function(e,t){return i.send(this.dst,"remove",{context:e,entity_id:t,apikey:this.apikey})}},{key:"entity",value:function(e,t){return i.send(this.dst,"entity",{context:e,entity_id:t,apikey:this.apikey})}}]),o);function o(e,t){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this._url=e,t|={},this._frame=this.create_iframe(e),this.dst=this._frame.contentWindow||this._frame,this.apikey=t.apikey||void 0}},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var r=n(0);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(4).default;function o(t){return fetch(t,{method:"GET",headers:{Accept:"application/json"}}).then(function(e){if(404==e.status)throw new URIError("".concat(t,": not found"));return e}).then(function(e){var t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json();throw new SyntaxError("MDQ didn't provide a JSON response")})}function s(e,t){return console.log(t+e+".json"),o(t+e+".json").then(function(e){return e="[object Array]"===Object.prototype.toString.call(e)?e[0]:e}).catch(function(e){console.log(e)})}function l(e,t){return o(t+"?q="+e)}function c(e){var t={};return e.forEach(function(e){e=e.split("=",2);2==e.length&&(t[e[0]]=decodeURIComponent(e[1].replace(/\+/g," ")))}),t}function u(e,t){var n=t.return,r=-1===n.indexOf("?")?"?":"&",t=t.returnIDParam,e=e.entity_id,t=t||"entityID";return e&&(n+=r+t+"="+e),n}var d=(i(f.prototype,[{key:"with_items",value:function(t){var n=this;this.ps.entities(this.context).then(function(e){return t(e.data)}).then(function(e){e&&e.data&&e.data.forEach(function(e){this.ps.update(n.context,e)})})}},{key:"saml_discovery_response",value:function(e){return this.do_saml_discovery_response(e,!(1<arguments.length&&void 0!==arguments[1])||arguments[1]).then(function(e){var t=c(window.location.search.substr(1).split("&"));return u(e.entity,t)}).then(function(e){window.top.location.href=e}).catch(function(e){console.log(e)})}},{key:"pin",value:function(e){return this.do_saml_discovery_response(e,!0)}},{key:"do_saml_discovery_response",value:function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=this;return console.log(t),console.log(r.context),r.ps.entity(r.context,t).then(function(e){return e.data}).then(function(e){return void 0===e?r.mdq(t).then(function(e){if(n)return r.ps.update(r.context,e).then(function(e){return e.data});var t=Date.now();return Promise.resolve({entity:e,last_refresh:t,last_use:t})}):Promise.resolve(e)}).catch(function(e){return console.log(e)})}},{key:"remove",value:function(e){return this.ps.remove(this.context,e)}}]),f);function f(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"thiss.io";(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,f),console.log("making ds from "+t+" and "+e+" and "+n),this.mdq="function"==typeof t?t:function(e){return s("{sha1}"+a(e),t)},e instanceof r.a?this.ps=e:this.ps=new r.a(e),this.context=n}},function(e,t,n){e.exports=n(3),e.exports.default=e.exports},function(e,t,n){function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r,a;e.exports=(a={},i.m=r=[function(e,t,n){"use strict";n.r(t);var r={};function a(e){return"[object RegExp]"==={}.toString.call(e)}n.r(r),n.d(r,"WeakMap",function(){return U});var i="mock:",l="file:",o="about:",s="Call was rejected by callee.\r\n";function c(e){return(e=void 0===e?window:e).location.protocol===o}function u(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function d(e){if(e&&!u(e))try{return e.opener}catch(e){}}function f(){try{return 1}catch(e){}}function p(e){var t=(e=e||window).location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if(n===l)return l+"//";if(n===o){e=u(e);return e&&f()?p(e):o+"//"}t=t.host;if(!t)throw new Error("Can not read window host");return n+"//"+t}function w(e){var t=p(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(i)?e.mockDomain:t}function h(e){if(function(e){try{if(e===window)return 1}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return}catch(e){}try{if(c(e)&&f())return 1}catch(e){}try{if(p(e)===p(window))return 1}catch(e){}}(e))try{if(e===window)return 1;if(c(e)&&f())return 1;if(w(window)===w(e))return 1}catch(e){}}function x(e,t){if(e&&t){var n=u(t);return n?n===e:-1!==function(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}(t).indexOf(e)}}function S(e){var t,n,r=[];try{t=e.frames}catch(n){t=e}try{n=t.length}catch(e){}if(0===n)return r;if(n){for(var i=0;i<n;i++){var a=void 0;try{a=t[i]}catch(e){continue}r.push(a)}return r}for(var o=0;o<100;o++){var s=void 0;try{s=t[o]}catch(e){return r}if(!s)return r;r.push(s)}return r}var m=[],g=[];function A(e,t){void 0===t&&(t=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==s}if(t&&h(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}t=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(m,e);if(-1!==t){var n=g[t];if(n&&function(){if(!n.contentWindow)return 1;if(!n.parentNode)return 1;var e=n.ownerDocument;return e&&e.documentElement&&!e.documentElement.contains(n)}())return!0}return!1}function k(e){return d(e=e||window)||u(e)||void 0}function C(e,t){if("string"==typeof e){if("string"==typeof t)return"*"===e||t===e;if(a(t))return!1;if(Array.isArray(t))return!1}return a(e)?a(t)?e.toString()===t.toString():!Array.isArray(t)&&Boolean(t.match(e)):!!Array.isArray(e)&&(Array.isArray(t)?JSON.stringify(e)===JSON.stringify(t):!a(t)&&e.some(function(e){return C(e,t)}))}function y(e){try{if(e===window)return 1}catch(e){if(e&&e.message===s)return 1}try{if("[object Window]"==={}.toString.call(e))return 1}catch(e){if(e&&e.message===s)return 1}try{if(window.Window&&e instanceof window.Window)return 1}catch(e){if(e&&e.message===s)return 1}try{if(e&&e.self===e)return 1}catch(e){if(e&&e.message===s)return 1}try{if(e&&e.parent===e)return 1}catch(e){if(e&&e.message===s)return 1}try{if(e&&e.top===e)return 1}catch(e){if(e&&e.message===s)return 1}}function v(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}var b,j=[],_=[],E=0;function I(){var e;!E&&b&&(e=b,b=null,e.resolve())}function M(){E+=1}function T(){--E,I()}var D=((r=O.prototype).resolve=function(e){if(this.resolved||this.rejected)return this;if(v(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},r.reject=function(e){var t,n=this;if(this.resolved||this.rejected)return this;if(v(e))throw new Error("Can not reject promise with another promise");return e||(t=e&&"function"==typeof e.toString?e.toString():{}.toString.call(e),e=new Error("Expected reject to be called with Error, got "+t)),this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){n.errorHandled||function(e,t){if(-1===j.indexOf(e)){j.push(e),setTimeout(function(){throw e},1);for(var n=0;n<_.length;n++)_[n](e,t)}}(e,n)},1),this.dispatch(),this},r.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},r.dispatch=function(){var i=this,a=this.resolved,o=this.rejected,s=this.handlers;if(!this.dispatching&&(a||o)){this.dispatching=!0,M();for(var e=0;e<s.length;e++)!function(e){var t=s[e],n=t.onSuccess,e=t.onError,r=t.promise,t=void 0;if(a)try{t=n?n(i.value):i.value}catch(e){return r.reject(e)}else if(o){if(!e)return r.reject(i.error);try{t=e(i.error)}catch(e){return r.reject(e)}}t instanceof O&&(t.resolved||t.rejected)?(t.resolved?r.resolve(t.value):r.reject(t.error),t.errorHandled=!0):v(t)?t instanceof O&&(t.resolved||t.rejected)?t.resolved?r.resolve(t.value):r.reject(t.error):t.then(function(e){r.resolve(e)},function(e){r.reject(e)}):r.resolve(t)}(e);s.length=0,this.dispatching=!1,T()}},r.then=function(e,t){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for error handler");var n=new O;return this.handlers.push({promise:n,onSuccess:e,onError:t}),this.errorHandled=!0,this.dispatch(),n},r.catch=function(e){return this.then(void 0,e)},r.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then(function(e){return O.try(t).then(function(){return e})},function(e){return O.try(t).then(function(){throw e})})},r.timeout=function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(r),e})},r.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},O.resolve=function(n){return n instanceof O?n:v(n)?new O(function(e,t){return n.then(e,t)}):(new O).resolve(n)},O.reject=function(e){return(new O).reject(e)},O.asyncReject=function(e){return(new O).asyncReject(e)},O.all=function(n){var r=new O,i=n.length,a=[];if(!i)return r.resolve(a),r;for(var e=0;e<n.length;e++)!function(t){var e=n[t];if(e instanceof O){if(e.resolved)return a[t]=e.value,--i}else if(!v(e))return a[t]=e,--i;O.resolve(e).then(function(e){a[t]=e,0==--i&&r.resolve(a)},function(e){r.reject(e)})}(e);return 0===i&&r.resolve(a),r},O.hash=function(e){var n={};return O.all(Object.keys(e).map(function(t){return O.resolve(e[t]).then(function(e){n[t]=e})})).then(function(){return n})},O.map=function(e,t){return O.all(e.map(t))},O.onPossiblyUnhandledException=function(e){return t=e,_.push(t),{cancel:function(){_.splice(_.indexOf(t),1)}};var t},O.try=function(e,t,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var r;M();try{r=e.apply(t,n||[])}catch(e){return T(),O.reject(e)}return T(),O.resolve(r)},O.delay=function(t){return new O(function(e){setTimeout(e,t)})},O.isPromise=function(e){return!!(e&&e instanceof O)||v(e)},O.flush=function(){return e=b=b||new O,I(),e;var e},O);function O(e){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var n,r,i=!1,a=!1,o=!1;M();try{e(function(e){o?t.resolve(e):(i=!0,n=e)},function(e){o?t.reject(e):(a=!0,r=e)})}catch(e){return T(),void this.reject(e)}T(),o=!0,i?this.resolve(n):a&&this.reject(r)}}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)!{}.hasOwnProperty.call(r,n)||(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}var F,L=Object.defineProperty,$=Date.now()%1e9,U=((r=N.prototype)._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var r=t[n];if(y(r)&&A(r)){if(e)try{e.delete(r)}catch(e){}t.splice(n,1),this.values.splice(n,1),--n}}},r.isSafeToReadWrite=function(e){return!y(e)},r.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var n,r,i=this.weakmap;if(i)try{i.set(e,t)}catch(e){delete this.weakmap}this.isSafeToReadWrite(e)?(n=e[r=this.name])&&n[0]===e?n[1]=t:L(e,r,{value:[e,t],writable:!0}):(this._cleanupClosedWindows(),i=this.keys,n=this.values,-1===(r=R(i,e))?(i.push(e),n.push(t)):n[r]=t)},r.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=R(this.keys,e);return-1===n?void 0:this.values[n]}n=e[this.name];if(n&&n[0]===e)return n[1]},r.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t,n=this.weakmap;if(n)try{n.delete(e)}catch(e){delete this.weakmap}this.isSafeToReadWrite(e)?(t=e[this.name])&&t[0]===e&&(t[0]=t[1]=void 0):(this._cleanupClosedWindows(),-1!==(t=R(n=this.keys,e))&&(n.splice(t,1),this.values.splice(t,1)))},r.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){t=e[this.name];return!(!t||t[0]!==e)}return this._cleanupClosedWindows(),-1!==R(this.keys,e)},r.getOrSet=function(e,t){if(this.has(e))return this.get(e);t=t();return this.set(e,t),t},N);function N(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,$+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+$,function(){if("undefined"!=typeof WeakMap&&void 0!==Object.freeze)try{var e=new WeakMap,t={};return Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}function q(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+function(e){if("function"==typeof btoa)return btoa(e);if("undefined"!=typeof Buffer)return Buffer.from(e,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function z(){}function W(e,t){if(3<=(t=void 0===t?1:t))return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var n=e&&e.stack,r=e&&e.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return"function"==typeof e.toString?e.toString():{}.toString.call(e)}catch(e){return"Error while stringifying error: "+W(e,t+1)}}function J(e){return"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():{}.toString.call(e)}function B(e){return"[object RegExp]"==={}.toString.call(e)}function H(e,t,n){if(e.hasOwnProperty(t))return e[t];n=n();return e[t]=n}Object.create(Error.prototype);var V="postrobot_method",G="postrobot_hello",Y="cross_domain_zalgo_promise",Q="cross_domain_function",X="cross_domain_window";function K(e){return(e=void 0===e?window:e)!==window?e.__post_robot_10_0_14__:e.__post_robot_10_0_14__=e.__post_robot_10_0_14__||{}}var Z=function(){return{}};function ee(e,t){return void 0===e&&(e="store"),void 0===t&&(t=Z),H(K(),e,function(){var n=t();return{has:function(e){return n.hasOwnProperty(e)},get:function(e,t){return n.hasOwnProperty(e)?n[e]:t},set:function(e,t){return n[e]=t},del:function(e){delete n[e]},getOrSet:function(e,t){return H(n,e,t)},reset:function(){n=t()},keys:function(){return Object.keys(n)}}})}var te=function(){};function ne(){var e=K();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new te,e.WINDOW_WILDCARD}function re(r,i){return void 0===r&&(r="store"),void 0===i&&(i=Z),ee("windowStore").getOrSet(r,function(){function n(e){return t.getOrSet(e,i)}var t=new U;return{has:function(e){return n(e).hasOwnProperty(r)},get:function(e,t){e=n(e);return e.hasOwnProperty(r)?e[r]:t},set:function(e,t){return n(e)[r]=t},del:function(e){delete n(e)[r]},getOrSet:function(e,t){return H(n(e),r,t)}}})}function ie(){return ee("instance").getOrSet("instanceID",q)}function ae(e){return re("helloPromises").getOrSet(e,function(){return new D})}function oe(n,e){return(0,e.send)(n,G,{instanceID:ie()},{domain:"*",timeout:-1}).then(function(e){var t=e.origin,e=e.data.instanceID;return ae(n).resolve({win:n,domain:t}),{win:n,domain:t,instanceID:e}})}function se(e,t){var n=t.send;return re("windowInstanceIDPromises").getOrSet(e,function(){return oe(e,{send:n}).then(function(e){return e.instanceID})})}function le(e){re("knownWindows").set(e,!0)}var ce="function",ue="error",de="promise",fe="regex",pe="date",he="array",me="object",ge="string",ye="number",ve="boolean",be="null",we="undefined";function xe(e){return"object"==typeof e&&null!==e&&"string"==typeof e.__type__}function Se(e){return void 0===e?we:null===e?be:Array.isArray(e)?he:"function"==typeof e?ce:"object"==typeof e?e instanceof Error?ue:"function"==typeof e.then?de:"[object RegExp]"==={}.toString.call(e)?fe:"[object Date]"==={}.toString.call(e)?pe:me:"string"==typeof e?ge:"number"==typeof e?ye:"boolean"==typeof e?ve:void 0}function Ae(e,t){return{__type__:e,__val__:t}}var ke=((r={})[ce]=function(){},r[ue]=function(e){return Ae(ue,{message:e.message,stack:e.stack,code:e.code})},r[de]=function(){},r[fe]=function(e){return Ae(fe,e.source)},r[pe]=function(e){return Ae(pe,e.toJSON())},r[he]=function(e){return e},r[me]=function(e){return e},r[ge]=function(e){return e},r[ye]=function(e){return e},r[ve]=function(e){return e},r[be]=function(e){return e},r),Ce={},je=((r={})[ce]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},r[ue]=function(e){var t=e.stack,n=e.code,e=new Error(e.message);return e.code=n,e.stack=t+"\n\n"+e.stack,e},r[de]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},r[fe]=function(e){return new RegExp(e)},r[pe]=function(e){return new Date(e)},r[he]=function(e){return e},r[me]=function(e){return e},r[ge]=function(e){return e},r[ye]=function(e){return e},r[ve]=function(e){return e},r[be]=function(e){return e},r),_e={};function Ee(){for(var e=ee("idToProxyWindow"),t=0,n=e.keys();t<n.length;t++){var r=n[t];e.get(r).shouldClean()&&e.del(r)}}function Ie(e,t,n){var r,i,a,o=n.send;return{id:e,type:d(t)?"popup":"iframe",getInstanceID:(i=function(){return se(t,{send:o})},a={},s.reset=function(){a={}},s),close:function(){return D.try(function(){t.close()})},getName:function(){return D.try(function(){if(!A(t))return r})},focus:function(){return D.try(function(){t.focus()})},isClosed:function(){return D.try(function(){return A(t)})},setLocation:function(e){return D.try(function(){if(h(t))try{if(t.location&&"function"==typeof t.location.replace)return void t.location.replace(e)}catch(e){}t.location=e})},setName:function(e){return D.try(function(){(t=function(e){if(!h(e))throw new Error("Expected window to be same domain");return e}(t)).name=e,t.frameElement&&t.frameElement.setAttribute("name",e),r=e})}};function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){try{return JSON.stringify([].slice.call(e),function(e,t){return"function"==typeof t?"memoize["+function(e){if(F=F||new U,null==e||"object"!=typeof e&&"function"!=typeof e)throw new Error("Invalid object");var t=F.get(e);return t||(t=typeof e+":"+q(),F.set(e,t)),t}(t)+"]":t})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}(t);return a.hasOwnProperty(r)||(a[r]=i.apply(this,arguments).finally(function(){delete a[r]})),a[r]}}new D(function(e){if(window.document&&window.document.body)return e(window.document.body);var t=setInterval(function(){if(window.document&&window.document.body)return clearInterval(t),e(window.document.body)},10)});var Me=((r=Te.prototype).getType=function(){return this.serializedWindow.type},r.isPopup=function(){return"popup"===this.getType()},r.isIframe=function(){return"iframe"===this.getType()},r.setLocation=function(e){var t=this;return this.serializedWindow.setLocation(e).then(function(){return t})},r.setName=function(e){var t=this;return this.serializedWindow.setName(e).then(function(){return t})},r.close=function(){var e=this;return this.serializedWindow.close().then(function(){return e})},r.focus=function(){var e=this;return D.try(function(){return D.all([e.isPopup()&&e.serializedWindow.getName().then(function(e){e&&window.open("",e)}),e.serializedWindow.focus()])}).then(function(){return e})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(e){this.actualWindow=e,this.serializedWindow=Ie(this.serializedWindow.id,e,{send:this.send}),this.actualWindowPromise.resolve(e)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(t){var n=this;return D.try(function(){return n.actualWindow?t===n.actualWindow:D.all([n.getInstanceID(),se(t,{send:n.send})]).then(function(e){e=e[0]===e[1];return e&&n.setWindow(t),e})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.serialize=function(){return this.serializedWindow},r.shouldClean=function(){return this.actualWindow&&A(this.actualWindow)},Te.unwrap=function(e){return Te.isProxyWindow(e)?e.unwrap():e},Te.serialize=function(e,t){t=t.send;return Ee(),Te.toProxyWindow(e,{send:t}).serialize()},Te.deserialize=function(e,t){var n=t.on,r=t.send;return Ee(),ee("idToProxyWindow").getOrSet(e.id,function(){return new Te(e,null,{on:n,send:r})})},Te.isProxyWindow=function(e){return Boolean(e&&!y(e)&&e.isProxyWindow)},Te.toProxyWindow=function(e,t){var n=t.send;if(Ee(),Te.isProxyWindow(e))return e;var r=e;return re("winToProxyWindow").getOrSet(e,function(){var e=q(),t=new Te(Ie(e,r,{send:n}),r,{send:n});return ee("idToProxyWindow").set(e,t)})},Te);function Te(e,t,n){n=n.send;this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.serializedWindow=e,this.actualWindowPromise=new D,this.send=n,t&&this.setWindow(t)}function De(e,t,n,r,i){var a=re("methodStore"),o=ee("proxyWindowMethods");Me.isProxyWindow(r)?o.set(e,{val:t,name:n,domain:i,source:r}):(o.del(e),a.getOrSet(r,function(){return{}})[e]={domain:i,name:n,val:t,source:r})}function Oe(e,t){var n=re("methodStore"),r=ee("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[t]||r.get(t)}function Pe(e,t,n,r,i){var a=i.on;ee("builtinListeners").getOrSet("functionCalls",function(){return a(V,{domain:"*"},function(e){var t=e.source,n=e.origin,r=e.data,i=r.id,a=r.name,o=Oe(t,i);if(!o)throw new Error("Could not find method '"+r.name+"' with id: "+r.id+" in "+w(window));var s=o.source,l=o.domain,c=o.val;return D.try(function(){if(!C(l,n))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(B(o.domain)?o.domain.source:o.domain)+" does not match origin "+n+" in "+w(window));if(Me.isProxyWindow(s))return s.matchWindow(t).then(function(e){if(!e)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+w(window))})}).then(function(){return c.apply({source:t,origin:n},r.args)},function(e){return D.try(function(){if(c.onError)return c.onError(e)}).then(function(){throw e.stack&&(e.stack="Remote call to "+a+"()\n\n"+e.stack),e})}).then(function(e){return{result:e,id:i,name:a}})})});var o=n.__id__||q();e=Me.unwrap(e);var s=n.__name__||n.name||r;return Me.isProxyWindow(e)?(De(o,n,s,e,t),e.awaitWindow().then(function(e){De(o,n,s,e,t)})):De(o,n,s,e,t),Ae(Q,{id:o,name:s})}function Re(r,i,e,t){var a=t.on,o=t.send;return function(e,r){void 0===r&&(r=Ce);e=JSON.stringify(e,function(e){var t=this[e];if(xe(this))return t;var n=Se(t);if(!n)return t;n=r[n]||ke[n];return n?n(t,e):t});return void 0===e?we:e}(e,((e={})[de]=function(e,t){return n=e,Ae(Y,{then:Pe(r,i,function(e,t){return n.then(e,t)},t,{on:(t={on:a,send:o}).on,send:t.send})});var n},e[ce]=function(e,t){return Pe(r,i,e,t,{on:a,send:o})},e[me]=function(e){return y(e)||Me.isProxyWindow(e)?Ae(X,Me.serialize(e,{send:o})):e},e))}function Fe(r,i,e,t){var a=t.on,u=t.send;return function(e,r){if(void 0===r&&(r=_e),e!==we)return JSON.parse(e,function(e,t){if(xe(this))return t;t=xe(t)?(n=t.__type__,t.__val__):(n=Se(t),t);if(!n)return t;var n=r[n]||je[n];return n?n(t,e):t})}(e,((e={})[Y]=function(e){return new D(e.then)},e[Q]=function(e){return n=r,o=i,s=e.id,l=e.name,c={on:a,send:u}.send,(e=t()).fireAndForget=t({fireAndForget:!0}),e;function t(i){function a(){var r=arguments;return Me.toProxyWindow(n,{send:c}).awaitWindow().then(function(e){var t=Oe(e,s);if(t&&t.val!==a)return t.val.apply({source:window,origin:w()},r);var n={domain:o,fireAndForget:i.fireAndForget},t=[].slice.call(r);return c(e,V,{id:s,name:l,args:t},n).then(function(e){if(!i.fireAndForget)return e.data.result})}).catch(function(e){throw e})}return void 0===i&&(i={}),a.__name__=l,a.__origin__=o,a.__source__=n,a.__id__=s,a.origin=o,a}var n,o,s,l,c},e[X]=function(e){return Me.deserialize(e,{on:(e={on:a,send:u}).on,send:e.send})},e))}var Le={};function $e(e,t,n,r){var i=r.on,a=r.send;if(A(e))throw new Error("Window is closed");for(var o=Re(e,t,((r={}).__post_robot_10_0_14__=P({id:q(),origin:w(window)},n),r),{on:i,send:a}),s=Object.keys(Le),l=[],c=0;c<s.length;c++){var u=s[c];try{Le[u](e,o,t)}catch(e){l.push(e)}}if(l.length===s.length)throw new Error("All post-robot messaging strategies failed:\n\n"+l.map(W).join("\n\n"))}function Ue(e){return ee("responseListeners").get(e)}function Ne(e){ee("responseListeners").del(e)}function qe(e){return ee("erroredResponseListeners").has(e)}function ze(e){var t=e.name,n=e.win,r=e.domain,i=re("requestListeners");if("*"===n&&(n=null),"*"===r&&(r=null),!t)throw new Error("Name required to get request listener");for(var a=0,o=[n,ne()];a<o.length;a++){var s=o[a];if(s){s=i.get(s);if(s){s=s[t];if(s){if(r&&"string"==typeof r){if(s[r])return s[r];if(s.__domain_regex__)for(var l=0,c=s.__domain_regex__;l<c.length;l++){var u=c[l],d=u.listener;if(C(u.regex,r))return d}}if(s["*"])return s["*"]}}}}}Le.postrobot_post_message=function(t,n,e){(Array.isArray(e)?e:"string"==typeof e?[e]:["*"]).map(function(e){return 0===e.indexOf(l)?"*":e}).forEach(function(e){t.postMessage(n,e)})};var We=((r={}).postrobot_message_request=function(r,i,a,e){var o=e.on,s=e.send,t=ze({name:a.name,win:r,domain:i});function n(e,t,n){void 0===n&&(n={}),a.fireAndForget||A(r)||$e(r,i,P({type:e,ack:t,hash:a.hash,name:a.name},n),{on:o,send:s})}return D.all([n("postrobot_message_ack"),D.try(function(){if(!t)throw new Error("No handler found for post message: "+a.name+" from "+i+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!C(t.domain,i))throw new Error("Request origin "+i+" does not match domain "+t.domain.toString());return t.handler({source:r,origin:i,data:a.data})}).then(function(e){return n("postrobot_message_response","success",{data:e})},function(e){return n("postrobot_message_response","error",{error:e})})]).then(z).catch(function(e){if(t&&t.handleError)return t.handleError(e);throw e})},r.postrobot_message_ack=function(e,t,n){if(!qe(n.hash)){var r=Ue(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!C(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());if(e!==r.win)throw new Error("Ack source does not match registered window");r.ack=!0}},r.postrobot_message_response=function(e,t,n){if(!qe(n.hash)){var r,i=Ue(n.hash);if(!i)throw new Error("No handler found for post message response for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!C(i.domain,t))throw new Error("Response origin "+t+" does not match domain "+(r=i.domain,Array.isArray(r)?"("+r.join(" | ")+")":a(r)?"RegExp("+r.toString():r.toString()));if(e!==i.win)throw new Error("Response source does not match registered window");Ne(n.hash),"error"===n.ack?i.promise.reject(n.error):"success"===n.ack&&i.promise.resolve({source:e,origin:t,data:n.data})}},r);function Je(e,t){var n=t.on,r=t.send,i=ee("receivedMessages");if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var a=e.source,o=e.origin,t=function(e,t,n,r){var i,a=r.on,r=r.send;try{i=Fe(t,n,e,{on:a,send:r})}catch(e){return}if(i&&"object"==typeof i&&null!==i&&(i=i.__post_robot_10_0_14__)&&"object"==typeof i&&null!==i&&i.type&&"string"==typeof i.type&&We[i.type])return i}(e.data,a,o,{on:n,send:r});t&&(le(a),i.has(t.id)||(i.set(t.id,!0),A(a)&&!t.fireAndForget||(0===t.origin.indexOf(l)&&(o=l+"//"),We[t.type](a,o,t,{on:n,send:r}))))}function Be(e,t,n){if(!e)throw new Error("Expected name");if("function"==typeof t&&(n=t,t={}),!n)throw new Error("Expected handler");(t=t||{}).name=e,t.handler=n||t.handler;var r=t.window,n=t.domain,i=function e(t,n){var r=t.name,i=t.win,a=t.domain,o=re("requestListeners");if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(i)){for(var s=[],l=0,c=i;l<c.length;l++)s.push(e({name:r,domain:a,win:c[l]},n));return{cancel:function(){for(var e=0;e<s.length;e++)s[e].cancel()}}}if(Array.isArray(a)){for(var u=[],d=0,f=a;d<f.length;d++)u.push(e({name:r,win:i,domain:f[d]},n));return{cancel:function(){for(var e=0;e<u.length;e++)u[e].cancel()}}}t=ze({name:r,win:i,domain:a});if(i&&"*"!==i||(i=ne()),a=a||"*",t)throw i&&a?new Error("Request listener already exists for "+r+" on domain "+a.toString()+" for "+(i===ne()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" for "+(i===ne()?"wildcard":"specified")+" window"):a?new Error("Request listener already exists for "+r+" on domain "+a.toString()):new Error("Request listener already exists for "+r);var p,h,m=o.getOrSet(i,function(){return{}}),g=H(m,r,function(){return{}}),y=a.toString();return B(a)?(p=H(g,"__domain_regex__",function(){return[]})).push(h={regex:a,listener:n}):g[y]=n,{cancel:function(){delete g[y],h&&(p.splice(p.indexOf(h,1)),p.length||delete g.__domain_regex__),Object.keys(g).length||delete m[r],i&&!Object.keys(m).length&&o.del(i)}}}({name:e,win:r,domain:n},{handler:t.handler,handleError:t.errorHandler||function(e){throw e},window:r,domain:n||"*",name:e});return{cancel:function(){i.cancel()}}}function He(e,t,n){"function"==typeof(t=t||{})&&(n=t,t={});var r,i=new D;return t.errorHandler=function(e){r.cancel(),i.reject(e)},r=Be(e,t,function(e){if(r.cancel(),i.resolve(e),n)return n(e)}),i.cancel=r.cancel,i}function Ve(h,m,g,e){var y=(e=e||{}).domain||"*",v=e.timeout||-1,i=e.timeout||5e3,b=e.fireAndForget||!1;return D.try(function(){return function(e,t){if(!m)throw new Error("Expected name");if(t&&"string"!=typeof t&&!Array.isArray(t)&&!B(t))throw new TypeError("Expected domain to be a string, array, or regex");if(A(e))throw new Error("Target window is closed")}(h,y),r=h,e=y,t=i,n={send:Ve}.send,D.try(function(){return function(e,t){var n=k(t);if(n)return n===e;if(t!==e&&function(e){if(e){try{if(e.top)return e.top}catch(e){}if(u(e)===e)return e;try{if(x(window,e)&&window.top)return window.top}catch(e){}try{if(x(e,window)&&window.top)return window.top}catch(e){}for(var t=0,n=function e(t){for(var n=[],r=0,i=S(t);r<i.length;r++){var a=i[r];n.push(a);for(var o=0,s=e(a);o<s.length;o++)n.push(s[o])}return n}(e);t<n.length;t++){var r=n[t];try{if(r.top)return r.top}catch(e){}if(u(r)===r)return r}}}(t)!==t)for(var r=0,i=S(e);r<i.length;r++)if(i[r]===t)return 1}(window,r)?function(e,t){void 0===e&&(e=5e3),void 0===t&&(t="Window");var n=ae(r);return n=-1!==e?n.timeout(e,new Error(t+" did not load after "+e+"ms")):n}(t):B(e)?oe(r,{send:n}):{domain:e}}).then(function(e){return e.domain});var r,e,t,n}).then(function(e){if(!C(y,e))throw new Error("Domain "+J(y)+" does not match "+J(e));y=e;var t,n,r,i,a,o,s,l,c,u,d=m===V&&g&&"string"==typeof g.name?g.name+"()":m,f=new D,p=m+"_"+q();return b||(u=p,e=r={name:m,win:h,domain:y,promise:f},ee("responseListeners").set(u,e),(i=re("requestPromises").getOrSet(h,function(){return[]})).push(f),f.catch(function(){var e;e=p,ee("erroredResponseListeners").set(e,!0),Ne(p)}),e=h,a=re("knownWindows").get(e,!1)?1e4:2e3,s=a,l=o=v,t=function(){return A(h)?f.reject(new Error("Window closed for "+m+" before "+(r.ack?"response":"ack"))):r.cancelled?f.reject(new Error("Response listener was cancelled for "+m)):(s=Math.max(s-500,0),-1!==l&&(l=Math.max(l-500,0)),r.ack||0!==s?0===l?f.reject(new Error("No response for postMessage "+d+" in "+w()+" in "+o+"ms")):void 0:f.reject(new Error("No ack for postMessage "+d+" in "+w()+" in "+a+"ms")))},function e(){n=setTimeout(function(){t(),e()},500)}(),c={cancel:function(){clearTimeout(n)}},f.finally(function(){c.cancel(),i.splice(i.indexOf(f,1))}).catch(z)),$e(h,y,{type:"postrobot_message_request",hash:p,name:m,data:g,fireAndForget:b},{on:Be,send:Ve}),b?f.resolve():f})}function Ge(e,t,n){return Re(e,t,n,{on:Be,send:Ve})}function Ye(e,t,n){return Fe(e,t,n,{on:Be,send:Ve})}function Qe(e){return Me.toProxyWindow(e,{send:Ve})}function Xe(){var t,n,r,i,e,o,s;K().initialized||(K().initialized=!0,t=(e={on:Be,send:Ve}).on,n=e.send,(e=K()).receiveMessage=e.receiveMessage||function(e){return Je(e,{on:t,send:n})},o=(e={on:Be,send:Ve}).on,s=e.send,ee().getOrSet("postMessageListener",function(){return(e=window).addEventListener("message",t=function(a){!function(e){var t=e.on,n=e.send,r=a.source||a.sourceElement,i=a.origin||a.originalEvent&&a.originalEvent.origin,e=a.data;if("null"===i&&(i=l+"//"),r){if(!i)throw new Error("Post message did not have origin domain");Je({source:r,origin:i,data:e},{on:t,send:n})}}({on:o,send:s})}),{cancel:function(){e.removeEventListener("message",t)}};var e,t}),r=(e={on:Be,send:Ve}).on,i=e.send,ee("builtinListeners").getOrSet("helloListener",function(){var e=r(G,{domain:"*"},function(e){var t=e.source,e=e.origin;return ae(t).resolve({win:t,domain:e}),{instanceID:ie()}}),t=k();return t&&oe(t,{send:i}).catch(z),e}))}function Ke(){var e;!function(){for(var e=ee("responseListeners"),t=0,n=e.keys();t<n.length;t++){var r=n[t],i=e.get(r);i&&(i.cancelled=!0),e.del(r)}}(),(e=ee().get("postMessageListener"))&&e.cancel(),delete window.__post_robot_10_0_14__}function Ze(e){for(var t=0,n=re("requestPromises").get(e,[]);t<n.length;t++)n[t].reject(new Error("Window cleaned up before response")).catch(z)}n.d(t,"bridge",function(){}),n.d(t,"Promise",function(){return D}),n.d(t,"TYPES",function(){return!0}),n.d(t,"ProxyWindow",function(){return Me}),n.d(t,"setup",function(){return Xe}),n.d(t,"destroy",function(){return Ke}),n.d(t,"serializeMessage",function(){return Ge}),n.d(t,"deserializeMessage",function(){return Ye}),n.d(t,"toProxyWindow",function(){return Qe}),n.d(t,"on",function(){return Be}),n.d(t,"once",function(){return He}),n.d(t,"send",function(){return Ve}),n.d(t,"markWindowKnown",function(){return le}),n.d(t,"cleanUpWindow",function(){return Ze}),Xe()}],i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return{}.hasOwnProperty.call(e,t)},i.p="",i(i.s=0))},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var a=0;function r(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(64+t>>9<<4)]=t;for(var n,r,i,a=Array(80),o=1732584193,s=-271733879,l=-1732584194,c=271733878,u=-1009589776,d=0;d<e.length;d+=16){for(var f=o,p=s,h=l,m=c,g=u,y=0;y<80;y++){a[y]=y<16?e[d+y]:w(a[y-3]^a[y-8]^a[y-14]^a[y-16],1);var v=b(b(w(o,5),(r=s,i=l,v=c,(n=y)<20?r&i|~r&v:!(n<40)&&n<60?r&i|r&v|i&v:r^i^v)),b(b(u,a[y]),(v=y)<20?1518500249:v<40?1859775393:v<60?-1894007588:-899497514)),u=c,c=l,l=w(s,30),s=o,o=v}o=b(o,f),s=b(s,p),l=b(l,h),c=b(c,m),u=b(u,g)}return Array(o,s,l,c,u)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t){return e<<t|e>>>32-t}function i(e){return function(e){for(var t,n=a?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<e.length;i++)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}(r(function(e){for(var t,n,r="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),i++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}(e)))}},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0);n.d(t,"json_mdq",function(){return r.c}),n.d(t,"json_mdq_get",function(){return r.d}),n.d(t,"json_mdq_search",function(){return r.e}),n.d(t,"parse_qs",function(){return r.f}),n.d(t,"ds_response_url",function(){return r.b}),n.d(t,"DiscoveryService",function(){return r.a}),n.d(t,"PersistenceService",function(){return i.a})}],i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=5);function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r});var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.JSUtility=function($,$win,$body,undefined){var publicApi={equalHeights:equalHeights,debounce:debounce,smoothScrollLinks:smoothScrollLinks,addStateToggle:addStateToggle,toggleVisibility:toggleVisibility,toggleVisibilityMobile:toggleVisibilityMobile,toggleTabs:toggleTabs,removeEmptyTabs:removeEmptyTabs,toggleHoverState:toggleHoverState,logErrors:logErrors,accordion:accordion,printPortionOfPage:printPortionOfPage,triggerClickOnAnotherElement:triggerClickOnAnotherElement,scrollToLocation:scrollToLocation,openDeepLinkedTab:openDeepLinkedTab};return publicApi;function equalHeights(e,n){var r=$(e);function t(){var t;viewport=updateViewportDimensions(),r.attr("style",""),r.length&&viewport.width>n&&(t=0,r.attr("style",""),r.each(function(){var e=$(this).outerHeight();t<e&&(t=e)}),r.css("height",t))}var i=debounce(function(){t()},100,!1);t(),$win.resize(function(){i()})}function triggerClickOnAnotherElement(){$("[data-trigger-click]").click(function(e){e.preventDefault();e=$($(this).attr("data-trigger-click"))[0];e&&e.click()})}function smoothScrollLinks(){$(".smooth-scroll").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash),t=e.offset().top-100;if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:t},500),!1}})}function scrollToLocation(e,t){var e=$(e);t=t||500,e.length&&(e=e.offset().top-92,$("html,body").animate({scrollTop:e},t))}function addStateToggle(e,t,n,r,i){var a=$(e),o="active-state",s="target-active",l=$("html, body"),c=t.replace(/.|#/,"")+"-active",e="click."+c,n=n||".close",n=$(t).find(n);function u(){$(t).removeClass(o),a.removeClass(s),r&&l.removeClass(c)}r=r||!1,i=i||!1,a.click(function(e){e.preventDefault(),$(t).toggleClass(o),a.toggleClass(s),r&&l.toggleClass(c)}),l.off(e),l.on(e,function(e){$(e.target).closest(a.add($(t))).length||u()}),$(document).ajaxComplete(function(){i&&u()}),n.click(function(){u()})}function toggleVisibility(){var e=$("[data-tog-target]");e.click(function(){var e=$(this),t=$(e.attr("data-tog-target"));e.toggleClass("target-active"),t.slideToggle({duration:300,done:function(){t.css("overflow","inherit")}}).toggleClass("active")})}function openDeepLinkedTab(){var e,t;!(e=location.hash?window.location.hash.substr(1):e)||(t=$('[data-toggle="#'+e+'"]')).length&&(t.hasClass("target-active")||t.click(),setTimeout(function(){var e=t.offset().top-92;$("html, body").animate({scrollTop:e},"200")},210))}function accordion(){var a,o,s,e=$(".accordion");e.length&&(a="target-active",o="active",s={duration:200,done:function(){$(this).css("overflow","inherit")}},e.each(function(){var e=$(this),r=e.find("[data-toggle]"),i=e.find("[data-tab]");r.click(function(){var e=$(this),t=e.attr("data-toggle"),n=$(t);e.hasClass(a)?(e.removeClass(a),n.removeClass(o),n.slideUp(s)):(window.location.hash=t,window.scroll(0,n[0]),r.removeClass(a),i.removeClass(o),i.slideUp(s),e.addClass(a),n.addClass(o),n.slideDown(s))})}),openDeepLinkedTab())}function toggleVisibilityMobile(n,e){function t(){var e=$(this),t=$(e.attr("data-mobile-tog-target"));".toolbar-search-trigger"===n&&$(".header-wrap").addClass("z2010"),e.toggleClass(i),t.slideToggle({duration:300,done:function(){t.css("overflow","inherit"),$(".toolbar-search-trigger").hasClass("target-active")||$(".header-wrap").removeClass("z2010")}}).toggleClass("active")}var r=$(n),i="target-active";var a=debounce(function(){viewport=updateViewportDimensions(),viewport.width>e?(r.off("click.tog-vis"),r.removeClass(i),r.each(function(){$($(this).attr("data-mobile-tog-target")).removeAttr("style").removeClass("active")})):(r.off("click.tog-vis"),r.on("click.tog-vis",t))},150,!1);a(),$win.resize(function(){a()})}function toggleTabs(e,t,n,r,i){var a,o,s,l,e=$(e);e.length&&(a=e.find(t),o=$(n),s="target-tab-active",l="tab-active",i=i||!1,n=r?$(r):a.first(),r=n.attr("href")||n.attr("data-href"),a.removeClass(s).filter(n).addClass(s),o.removeClass(l).filter(r).addClass(l),a.click(function(e){var t=$(this),n=$(t.attr("href")||t.attr("data-href"));t.is("a")&&e.preventDefault();function r(){o.removeClass(l),n.addClass(l),a.removeClass(s),t.addClass(s)}i&&t.hasClass(s)?(a.removeClass(s),o.removeClass(l)):r()}))}function removeEmptyTabs(e,r,i){r=r||[],$(e).each(function(){var e=$(this),t=e.attr("href"),n=$(t);if(-1<r.indexOf(t))return!0;var t=i?n.find("*").not(i):n.find("*");t.length<10&&(0===((t=t.text())!==undefined?$.trim(t):1).length&&(e.attr("style","display: none!important").addClass("tab-no-content"),n.attr("style","display: none!important")))})}function toggleHoverState(e,t,n){var r,e=$(e);t=t||150,n=n||"target-active",e.hover(function(){var e=$(this);r=setTimeout(function(){e.addClass(n)},t)},function(){clearTimeout(r);var e=$(this);setTimeout(function(){e.removeClass(n)},t)})}function logErrors(jqXHR,textStatus,errorThrown){var err;window.console&&(err=eval("("+jqXHR.responseText+")"),console.error("error: "+err.Messages),console.error("status: "+textStatus))}function printPortionOfPage(e,t){var n="print--hide-all",r="print--section",t=$(t),i=$(e);t.click(function(){$body.addClass(n),i.addClass(r),setTimeout(function(){window.print()},100)})}function debounce(r,i,a){var o;return function(){var e=this,t=arguments,n=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||r.apply(e,t)},i),n&&r.apply(e,t)}}}(jQuery,jQuery(window),jQuery("body"));var SCM=SCM||{};SCM.Ajax=function(s){var e={get:function(e,t){return new r(e,"GET",t)},post:function(e,t){return new r(e,"POST",t)},ajax:function(e,t,n){return new r(e,t,n)},_objectToFormData:n,_formatPostData:h};var o={Text:"text",Html:"html",Json:"json",Xml:"xml",ActionResultModel:{Full:"actionResultModelFull",FullEnsureSuccess:"actionResultModelFullEnsureSuccess",Success:"actionResultModelSuccess",Html:"actionResultModelHtml",RedirectUrl:"actionResultModelRedirectUrl",ReturnId:"actionResultModelReturnId",Data:"actionResultModelData"}},i={Default:"Default",Json:"application/json; charset=utf-8",UrlEncoded:"application/x-www-form-urlencoded"};function r(e,t,n,r){this._url=e,this._method=t||"GET",this._data=n,this._dataType=r||o.Text,this._internalPromise=null,this._requestContentType=i.Default,this._abortableRequestHandle=null}function t(e){this._ajaxResult=e,this._expectedComponent=o.ActionResultModel.Full,this._internalPromise=null}function l(e,t,n){e=new Error(e);return e.name="AjaxError",e.userFriendlyMessage=t,e.actionResultModel=n,Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,l),e}function a(e,t,n,r,i){if("function"==typeof window.fetch)return function(e,t,n,r,i){var a=new AbortController;"GET"===t&&n&&(e=function(e,t){"object"===_typeof(t)&&(t=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")}(t));t&&t.length&&["?","&"].includes(t[0])&&(t=t.substring(1));return e.includes("?")?e+"&"+t:e+"?"+t}(e,n),n=void 0);n={method:t,body:h(n,i),signal:a.signal};return n.headers=function(e,t){var n={};!function(e){var t=window.location.origin,e=new URL(e,t).origin;return t===e}(e)||(n["X-Requested-With"]="XMLHttpRequest",n["X-Requested-With-Lies"]="Not actually XMLHttpRequest, but Fetch API via SCM.Ajax; X-Requested-With is set for server-side backwards compatibility");p(t)&&(n["Content-Type"]=t);return n}(e,i),{promise:fetch(e,n).then(function(e){if(!e.ok)throw new l("Bad response from server: "+e.status+": "+e.statusText,"Bad response from server");return r===o.Json?e.json():e.text()}).catch(function(e){throw new l("Request failed: "+e,"Request failed")}),abortableRequestHandle:a}}(e,t,n,r,i);if("function"==typeof s&&s()&&s().jquery)return function(e,t,n,i,r){var a,o={url:e,method:t,type:t,data:n,dataType:i};!function(e){return e instanceof FormData&&Array.from(e).filter(function(e){return 1<e.length&&e[1]instanceof File}).length}(n)||(o.contentType=!1,o.processData=!1);p(r)&&(o.contentType=r);return{promise:new Promise(function(t,r){a=s.ajax(o).done(function(e){t(e)}).fail(function(e,t,n){r(new l("parsererror"===t?"Failed to parse response as "+i:n,"Request failed"))})}),abortableRequestHandle:a}}(e,t,n,r,i);throw new Error("No supported AJAX implementations found.")}function n(e){if(e){if(e instanceof FormData||"object"!==_typeof(e))return e;var t=new FormData;return function n(r,i,a){r=r||new FormData;if(Array.isArray(i))for(var e=0;e<i.length;e++){var t=a+"["+e+"]";n(r,i[e],t)}else u(i)?r.append(a,i.toISOString()):!c(i)||d(i)||f(i)?null!=i&&r.append(a,i):Object.keys(i).forEach(function(e){var t=a?a+"["+e+"]":e;n(r,i[e],t)})}(t,e),t}}function c(e){return e===Object(e)}function u(e){return e instanceof Date}function d(e){return e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.slice}function f(e){return d(e)&&"string"==typeof e.name&&("object"===_typeof(e.lastModifiedDate)||"number"==typeof e.lastModified)}function p(e){return e&&e===i.Json}function h(e,t){switch(t){case i.UrlEncoded:return new URLSearchParams(e);case i.Json:return JSON.stringify(e);default:return n(e)}}function m(e,t){e=e.then(function(e){if(!e||void 0===e.Success)throw new l("Response does not appear to be an ActionResultModel","Unexpected response from server");return e});if(t===o.ActionResultModel.Full)return e;e=e.then(function(e){if(e.Success)return e;var t,n="Unspecified error";throw(t=e)&&t.Messages&&t.Messages.length?n=e.Messages[0]:(t=e)&&t.ValidationErrors&&t.ValidationErrors.length&&t.ValidationErrors[0].Errors&&t.ValidationErrors[0].Errors.length?n=e.ValidationErrors[0].Errors[0]:e.Html&&(n=e.Html),new l(n,"Request was not successful",e)});return t===o.ActionResultModel.FullEnsureSuccess?e:t===o.ActionResultModel.Success?e.then(function(){return!0}):t===o.ActionResultModel.Html?e.then(function(e){if("string"!=typeof e.Html)throw new l("No HTML was provided in the response","Unexpected response from server",e);return e.Html}):t===o.ActionResultModel.RedirectUrl?e.then(function(e){if("string"!=typeof e.RedirectUrl)throw new l("No RedirectUrl was provided in the response","Unexpected response from server",e);return e.RedirectUrl}):t===o.ActionResultModel.ReturnId?e.then(function(e){if("string"!=typeof e.ReturnId)throw new l("No ReturnId was provided in the response","Unexpected response from server",e);return e.ReturnId}):t===o.ActionResultModel.Data?e.then(function(e){if(void 0===e.Data||null===e.Data||"object"!==_typeof(e.Data))throw new l("No Data object was provided in the response","Unexpected response from server",e);return e.Data}):e}return r.prototype.then=function(e,t){var n;return this._internalPromise||(n=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=n.promise,this._abortableRequestHandle=n.abortableRequestHandle),this._internalPromise=this._internalPromise.then(e,t),this},r.prototype.catch=function(e){var t;return this._internalPromise||(t=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.catch(e),this},r.prototype.finally=function(e){var t;return this._internalPromise||(t=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.finally(e),this},r.prototype.sendAsJson=function(){return this._requestContentType=i.Json,this},r.prototype.sendAsUrlEncoded=function(){return this._requestContentType=i.UrlEncoded,this},r.prototype.abort=function(){var e;return(e=this._abortableRequestHandle)&&e.abort&&e.abort(),this},r.prototype.expectJson=function(){return this._dataType=o.Json,this.then(function(e){return e})},r.prototype.expectHtml=function(){return this._dataType=o.Html,this.then(function(e){return e})},r.prototype.expectText=function(){return this._dataType=o.Text,this.then(function(e){return e})},r.prototype.expectXml=function(){return this._dataType=o.Xml,this.then(function(e){return e})},r.prototype.expect=function(t,n){return"function"==typeof t&&(n=t,t=null),this.then(function(e){if(!n(e))throw new l(t||"Unexpected result from server");return e})},r.prototype.expectActionResultModel=function(){return this._dataType=o.Json,new t(this)},t.prototype.then=function(e,t){return this._internalPromise=(this._internalPromise||m(this._ajaxResult,this._expectedComponent)).then(e,t),this},t.prototype.catch=function(e){return this.intrnalPromise=(this._internalPromise||m(this._ajaxResult,this._expectedComponent)).catch(e),this},t.prototype.finally=function(e){return this._internalPromise=(this._internalPromise||m(this._ajaxResult,this._expectedComponent)).finally(e),this},t.prototype.ensureSuccess=function(){return this._expectedComponent=o.ActionResultModel.FullEnsureSuccess,this},t.prototype.expectSuccess=function(){return this._expectedComponent=o.ActionResultModel.Success,this},t.prototype.expectHtml=function(){return this._expectedComponent=o.ActionResultModel.Html,this},t.prototype.expectRedirectUrl=function(){return this._expectedComponent=o.ActionResultModel.RedirectUrl,this},t.prototype.expectReturnId=function(){return this._expectedComponent=o.ActionResultModel.ReturnId,this},t.prototype.expectData=function(){return this._expectedComponent=o.ActionResultModel.Data,this},t.prototype.abort=function(){return this._ajaxResult&&this._ajaxResult.abort(),this},l.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(l,Error):l.__proto__=Error,e}(window.jQuery||{}),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=SCM.Ajax);var SCM=SCM||{};!function(e,t){var r={},i=r.hasOwnProperty;e.subscribe=function(e,t){i.call(r,e)||(r[e]=[]);var n=r[e].push(t)-1;return{remove:function(){delete r[e][n]}}},e.publish=function(e,n){i.call(r,e)&&t.each(r[e],function(e,t){t(void 0!==n?n:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var SCM=SCM||{};!function(a,r){var i="";a.getGdprCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},a.createGdprCookie=function(e,t,n){var r=a.getCookieName(),n=n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),"; expires="+i.toGMTString()):"",i=r+"="+encodeURIComponent(t)+n+"; samesite=lax; secure; path=/",t=a.getCookieDomain(),n=null;t&&(document.cookie=i+";domain="+t,n=a.getGdprCookie(r)),t&&n||(document.cookie=i)},a.getCookieName=function(){if(i)return i;var e=r("#hdnClientIdGdpr").val(),t=a.getCookieDomain(),n="GDPR_";return e&&(n=n+e+"_"),t&&(n+=t),n},a.getCookieDomain=function(){return r("#hdnDomainGdpr").val()},a.hideGdprBanner=function(){var e,t=r(".gdpr-cookie-wrapper");navigator.cookieEnabled?(e=a.getCookieName(),a.getGdprCookie(e)&&t.hide()):t.hide()},a.gdprAcceptLinkClick=function(){r(".js-gdpr-cookie-acceptLink, .js-gdpr-cookie-close").on("click",function(){a.createGdprCookie("GDPR_",!0,365),a.hideGdprBanner(),SCM.ClientStatsMaster&&SCM.ClientStatsMaster.trackGdprCookieAcceptance&&SCM.ClientStatsMaster.trackGdprCookieAcceptance("1050","0","Cookie Acceptance")})},a.init=function(e){e&&(i=e),r(".gdpr-cookie-wrapper").show(),a.gdprAcceptLinkClick(),a.hideGdprBanner()}}(SCM.gdprCookieBanner=SCM.gdprCookieBanner||{},jQuery);var ArtMetric={},$body=$("body"),$printableModal=$(".js-printable-metrics-modal");function getWidgetInstanceName(e){var t="",n=$(e).attr("class"),e=n.indexOf("widget-instance-");return t=0<=e?n.substr(e).split("-")[2]:t}ArtMetric.fullVersion=function($dest,routeUrl){var ctHtmlLabels,baseSiteUrl;$dest.find(".widget-ArticleLevelMetrics").length<1&&(ctHtmlLabels=function(e){return function(e){e.on("draw",function(e){"label"===e.type&&((e=e.element._node.childNodes[0]).innerHTML=e.innerText)})}},baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.prepend(e),setTimeout(function(){var e,t,n;void 0!==window.ChartistData&&(e={lineSmooth:!1,showArea:!0,low:0,plugins:[ctHtmlLabels()]},t=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}},plugins:[ctHtmlLabels()]}]],n=".ct-chart",$("#sv_main:visible").length&&(n=".sv-ct-chart",$dest.find(".ct-chart").addClass("sv-ct-chart")),ArtMetric.createChart(n,window.ChartistData.data,e,t))},200),ArtMetric.reloadDimensionsBadge()},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}))},ArtMetric.reloadDimensionsBadge=function(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges())},ArtMetric.limitLabels=function(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),r=1;e.not(":eq(0)").each(function(){r%n!=0&&$(this).hide(),r++})},ArtMetric.createChart=function(e,t,n,r){var r=new Chartist.Line(e,t,n,r),i=0;r.on("created",function(){i=0,ArtMetric.limitLabels()}),r.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})},ArtMetric.triggerModal=function(e,t){var n=$(".artmet-dimensions").length?"true":"false",r="/ThirdParty/ArticleLevelMetricsDetails",i=getWidgetInstanceName(".widget-ArticleLevelMetrics");0<i.length&&(r+="/"+i),ArtMetric.fullVersion(e,r+="?articleId="+t+"&showDimensionsBadge="+n),e.parent().css({display:"block",opacity:1}),$body.addClass("metrics-modal-open"),0<$printableModal.length&&$printableModal.addClass("metrics-modal-open")},ArtMetric.closeModal=function(){$(".artmet-modal:visible").attr("style",""),$body.removeClass("metrics-modal-open"),$printableModal.removeClass("metrics-modal-open")},ArtMetric.eventsToClose=function(){$(".js-artmet-close-modal").click(function(){ArtMetric.closeModal()}),$(".js-artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},ArtMetric.cloneMetricsModalForPrint=function(e){var t;0==$printableModal.length&&e.length&&(t=$("<div/>",{class:"printable-metrics-modal js-printable-metrics-modal"}),e.clone().appendTo(t),0<$("body.metrics-modal-open").length&&t.addClass("metrics-modal-open"),$body.append(t),$printableModal=$(".js-printable-metrics-modal"))},$(document).ready(function(){$(".widget-ArticleLevelMetrics:visible").on("click",".js-artmet-modal-trigger, .artmet-condensed-stats .artmet-views",function(e){var t=null!==(t=$(".widget-ArticleLevelMetrics:visible .artmet-modal-trigger").attr("data-article-id"))&&void 0!==t?t:$(".widget-ArticleLevelMetrics:visible .artmet-modal-trigger").attr("data-resource-id");ArtMetric.triggerModal($(".artmet-modal-contents").first(),t)}),$(window).on("beforeprint",function(){var e=$(".js-metric-modal-contents:has(.js-metric-full-wrap):first");!$printableModal.length&&e.length&&ArtMetric.cloneMetricsModalForPrint(e)}),ArtMetric.eventsToClose(),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})});var App=App||{};App.notifyViewportChange=debounce(function(){App.cachedViewport!==App.activeViewport&&(App.cachedViewport=App.activeViewport,SCM.EventEmitter.publish("viewport-changed"))},50,!1),function(t,a){function n(){a(".title-image").width()+a("#BodyContent_Header_divAccessProvidedBy").width()+a(".auth--provided-by").width()+30>a(window).width()?a("#BodyContent_Header_divAccessProvidedBy").hide():a("#BodyContent_Header_divAccessProvidedBy").show()}t.addJnLogoParamToRefererUrl=function(){var e;window.history&&(e=window.location.href+(window.location.href.indexOf("?")<0?"?":"&")+"appId=scweb",window.history.replaceState(null,null,e))},t.queryParameters=function(){var e={};if(window.location.search)for(var t=window.location.search.slice(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");e[r[0]]=decodeURI(r[1])}return e},t.init=function(){var e;SCM.JSUtility.addStateToggle(".nav-toggler",".nav",".close",!0),SCM.JSUtility.addStateToggle(".auth--trigger",".auth--dropdown",".close",!0),SCM.JSUtility.toggleVisibilityMobile(".toolbar-search-trigger",App.mobileUpperBreakpoint),n(),a(window).resize(function(){n()}),[].slice.call(document.querySelectorAll("select.cs-select")).forEach(function(e){new SelectFx(e)}),App.isMobile&&a(".nav").on("touchmove",function(e){e.stopPropagation()}),App.isMyAccount&&a(".footer-service-link").click(function(e){-1<this.href.indexOf("myaccount")&&(e.preventDefault(),window.location.hash=this.hash,SCM.JSUtility.openDeepLinkedTab())}),a(".auth--ind-sign-in, .auth--ind-create, .sign-in--personal-link, .sign-in--create-link, .btn--free-cme, .cme-info.no-access a, .quiz-no-access .sign-in, .js-modal-follow-collection-reveal .js-btn-create-personal-account, .js-modal-follow-collection-reveal .js-btn-signin-personal").click(function(){t.addJnLogoParamToRefererUrl()}),a("body").on("keypress",".js-gdpr-cookie-acceptLink",function(e){a(".gdpr-cookie-wrapper").hide()}),(e=a(".nav-toggler")).on("click",function(){e.hasClass("target-active")?e.next(".nav").removeClass("hide"):e.next(".nav").addClass("hide")}),a("body").on("keydown","#search-term",function(e){"Tab"===e.key&&a(".search-button").focus()}),a("body").on("click",".auth--trigger",function(){a(".auth--trigger").next(".js-signIn-dropdown").toggleClass("hide")}),a("body").on("keydown",function(e){var t=a(".nav-toggler"),n=a(".auth--trigger");"Escape"==e.key&t.hasClass("target-active")&&(t.removeClass("target-active"),t.next(".nav").addClass("hide"),t.next(".nav").removeClass("active-state")),"Escape"==e.key&n.hasClass("target-active")&&(e=a(".js-signIn-dropdown"),n.removeClass("target-active"),e.addClass("hide"),e.removeClass("active-state"))}),a(".js-skip-to-navigation").on("click",function(){var e=a("#skip-to-navigation");e.focus(),a("body, html").animate({scrollTop:e.next().offset().top-100},500)})},t.windowLoadInit=function(){SCM.JSUtility.toggleVisibilityMobile(".footer-heading",App.mobileUpperBreakpoint),a(".email-signup--submit").click(function(e){e.preventDefault();var t=a(this),n=t.closest(".email-signup"),r=n.find(".email-signup--input").val(),i=n.find(".email-signup--user-message"),e=a(".footer-social-links > a").first().data("emailid");/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(r)?a.ajax({url:"https://silverchair.emailcampaigns.net/CSB/Public/ProcessHostedForm.aspx",type:"POST",dataType:"html",data:{4711343:r,FormInfo:e},success:function(e){0<=e.search(/Thank/)?(n.find(".email-signup--input-wrap").hide(),t.hide(),i.html("<p style='color: #449141'>Thank you! You will receive an email shortly to verify your email address.</p>")):(i.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>"),console.error("unexpected error"))},error:function(e){console.error(e),i.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>")}}):(console.error("ERROR: invalid email address was entered"),i.html("<p style='color: #d71635'>Invalid email address, please try again.</p>"))})},t.bindInterestsButton=function(){a(".js-btn-interests").on("click",function(e){e.preventDefault(),App.isIndividual?(App.Collection.setInitialCategories(),a(".manage-interests-modal").foundation("reveal","open"),a(".followed").parent().css("list-style-type","disc").css("color","#000")):a(".js-modal-follow-collection-reveal").foundation("reveal","open")})}}(App.Global=App.Global||{},jQuery);var SCM=SCM||{};SCM.AdvancedSearch={};var definedLimit=$("#hfSolrMaxAllowSearchChar").val(),charactorLimit=definedLimit||255,activeSavedSearchCookieName=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedJournalSearch";function AppendSubscriptionParameterToUrl(e){return"true"===$("#hfEnableSubscriptionFilter").val().toLowerCase()?e+"&subonly=true":e}function isValidDate(e){var t=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(e);if(null===t)return!1;var n=parseInt(t[2]),r=parseInt(t[1]),i=parseInt(t[3]);if(NaN===n||NaN===r||NaN===i)return!1;var a=new Date(i,r-1,n),e=a.getDate().toString(),t=(a.getMonth()+1).toString(),a=a.getFullYear().toString();return e===n.toString()&&t===r.toString()&&a===i.toString()}function isYearOnly(e){e=/^(\d{4})$/.exec(e);return e&&-1<e[1]}function updateYearOnlyToFullDate(e,t){var n=e.val();return e.val((t?"01":"12")+"/"+(t?"01":"31")+"/"+n),e.val()}Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};var micrositeJournalDisplayName="",micrositeJournalId="",solrsearchScope=$("#hfSolrJournalID").val();void 0===solrsearchScope?solrsearchScope="":null!==solrsearchScope&&(solrsearchScope=solrsearchScope.replace("J","")),$(document).ready(function(){function t(e){var t;null===e||""===e?alert("Please enter a term to search"):e.length>parseInt(charactorLimit)?alert("Please enter a term between 1 to "+charactorLimit+" characters"):(t='"'+e+'"',e="",solrsearchScope&&(e="&fl_JournalID="+micrositeJournalId+"&fl_JournalDisplayName="+encodeURIComponent($.trim(micrositeJournalDisplayName))),t="/searchresults?fd_ArticleTitle="+encodeURIComponent(t),t+=""!==e?e:"&allJournals=1",SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(t))}function n(){var e=$("#citationYear").val(),t=$("#citationVolume").val(),n=$("#citationPage").val(),r=$(".citationJournal").val(),i=$(".citationJournal option:selected").text(),a=!1,o={},s=null!==r&&""!==r&&"- Select a Journal"!==r?"":"Please select a journal.\n";null!==e&&""!==e&&"Yr"!==e&&(isNaN(e)?s+="Year must be numeric.\n":o.rg_ArticleDate="01/01/"+e+" TO 12/31/"+e),null!==t&&""!==t&&"Vol"!==t&&(isNaN(t)?s+="Volume must be numeric.":o.fd_Volume=t),""!==n&&"1st Pg"!==n&&(o.fd_StartPage=n),0<s.length?alert(s):("C"===(r=r.split(","))[0]?(o.fl_JournalID=r[1],a=!0):o.fl_JournalHistID=r[2],o=m("/searchresults",o),o+=a?"&fl_JournalDisplayName="+encodeURIComponent($.trim(i)):"&fd_LegacyJournalDisplayName="+encodeURIComponent($.trim(i)),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(o))}function r(){var e,t="1",n=null,r=null,i=null,a=[],o=[],s=[],l=[],c={},u=null,d=!1,f=!1;if(null!==(i=$("#advancedSearch .search-field").val())&&""!==i)if(i.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters.");else{switch(c.q=i,$("#advancedSearch input.anyAllExact[type=radio]").each(function(){this.checked&&(t=$(this).attr("id"))}),e='"'+i+'"',t){case"1":c.hd="advancedAny",u=i;break;case"2":c.hd="advancedAll",u=i;break;case"3":u=e}c.q=encodeURIComponent($.trim(u));var p=$("#advancedSearch .authorSearch").val();if(null!==p&&""!==p&&(c.author=p),null!==(n=$("#startDateSemanticSearch").val())&&""!==n&&"mm/dd/yyyy"!==n){if(isYearOnly(n))n=updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0);else if(!isValidDate(n))return void alert("please enter valid start date");p=$("#endDateSemanticSearch");if(""===p.val())r=(new Date).today();else if(isYearOnly(r=p.val()))r=updateYearOnlyToFullDate(p,!1);else if(!isValidDate(r)||new Date(r)<new Date(n))return void alert("please enter valid end date");c.rg_ArticleDate=n+" TO "+r}$("#advancedSearch input.rbPublication[type=radio]").each(function(){this.checked&&(d="J*"===$(this).attr("value"))}),$("#advancedSearch .chk-journal:checked").each(function(){d=!0;var e=$(this);e.attr("data-display-name"),o.push(e.attr("data-display-name")),s.push(e.attr("value")),a.push(e.attr("jid"))}),$("#advancedSearch .chk-articletype:checked").each(function(){f=!0;var e=$(this);e.attr("text"),l.push(e.attr("value"))});var h,r=m("/searchresults",c);d?(s.join(" OR "),a.join(" OR "),h=o.join("OR"),r+="&restypeid=3",0===o.length?r+="&allJournals=1":r+="&fl_JournalDisplayName="+encodeURIComponent($.trim(h))):r+="&allJournals=1",f&&(h=l.join("AND"),r+="&f_ArticleTypeDisplayName="+encodeURIComponent($.trim(h))),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(r)}else alert("Please enter a term to search")}function m(e,t){var n,r="";for(n in t)t.hasOwnProperty(n)&&(r+="&"+n+"="+encodeURIComponent(t[n]));return e.indexOf("?")<0&&(r="?"+r.substring(1)),e+r}function i(){var e=null,t=null,n=null,r=[],i=[],a={},o=null,s=null,l=!1;if(null!==(n=$(".advancedAuthorSearch .search-field").val())&&""!==n)if(n.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters.");else{if(a.author=encodeURIComponent($.trim(n)),a.q=encodeURIComponent($.trim(n)),null!==(e=$("#startDateAuthor").val())&&""!==e&&"mm/dd/yyyy"!==e){if(!isValidDate(e=isYearOnly(e)?updateYearOnlyToFullDate($("#startDateAuthor"),!0):e))return void alert("please enter valid start date");var c=$("#endDateAuthor");if(""===c.val()?t=(new Date).today():isYearOnly(t=c.val())&&(t=updateYearOnlyToFullDate(c,!1)),!isValidDate(t)||new Date(t)<new Date(e))return void alert("please enter valid end date");a.rg_ArticleDate=e+" TO "+t}$(".advancedAuthorSearch input.rbPublication[type=radio]").each(function(){this.checked&&(l="J*"===$(this).attr("value"))}),$(".advancedAuthorSearch .chk-journal:checked").each(function(){var e=$(this);l=!0,s=e.attr("data-display-name"),o=e.attr("text"),i.push(e.attr("value")),r.push(e.attr("jid"))});c=m("/searchresults",a);l?(e=i.join(" OR "),t=r.join(" OR "),c+="&restypeid=3",1===i.length?(a=encodeURIComponent($.trim(o)),journalQuery=o===s?"&fl_JournalID="+t+"&fl_JournalDisplayName="+a:"&fl_JournalID="+t+"&fl_JournalDisplayName="+encodeURIComponent($.trim(s))+"&fd_LegacyJournalDisplayName="+a,c+=journalQuery):1<i.length?c+="&fl_JournalHistID="+e:0===i.length&&(c+="&allJournals=1")):c+="&allJournals=1",SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(c)}else alert("Please enter a term to search")}App.isAdvancedSearch&&(null!==solrsearchScope&&""!==solrsearchScope&&($(".advancedAuthorSearch input:checkbox").each(function(){var e=$(this),t=e.attr("currentjournaldisplayname"),n=e.attr("text"),e=e.attr("jid");if(null!==t&null!==n&&t===n&&e===solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=n,micrositeJournalId=e,!1}),$("#advancedSearch input:checkbox").each(function(){var e=$(this),t=e.attr("currentjournaldisplayname"),n=e.attr("text"),e=e.attr("jid");if(null!==t&null!==n&&t===n&&e===solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=n,micrositeJournalId=e,!1}),$(".citationJournal").each(function(){$("option",this).each(function(){var e=$(this).val().split(",");null!==e&&"C"===e[0]&&e[1]===solrsearchScope&&$(this).attr("selected","selected")})})),$("#btnAdvancedTitleSearch").click(function(){t($("#articleTitle").val())}),$("#articleTitle").keydown(function(e){13===e.keyCode&&t($("#articleTitle").val())}),$("#btnAdvancedCitationSearch").click(function(){n()}),$("#btnAdvancedCitationSearch").keydown(function(e){13===e.keyCode&&n()}),$("#advancedSearchQueryTerm").keydown(function(e){13===e.keyCode&&r()}),$("#btnAdvancedSearch, #btnAdvancedSearchTop").on("click",function(){r()}),$("#btnAdvancedAuthorSearch, #btnAdvancedAuthorSearchTop").on("click",function(){i()}),$("#advancedAuthorSearchQueryTerm").keydown(function(e){13===e.keyCode&&i()}),$("#Doi").keydown(function(e){13===e.keyCode&&(GetDoiUrl(),$("#aDoiSearch").click())}))}),$(function(){try{$("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").bind("keydown",function(e){if(13===e.which){var t=$(this);if(isYearOnly(t.val()))return updateYearOnlyToFullDate(t,!0),e.preventDefault(),e.stopImmediatePropagation(),!1}})}catch(e){}});var SCM=SCM||{};!function(o,s){var a=s(document);function l(e){window.location.href=e}o.$noAccessModal=s(".js-modal-no-access-reveal"),o.$paidPdfModal=s(".js-modal-paid-pdf-reveal"),o.$registerFreePdfModal=s(".js-modal-free-pdf-reveal"),o.openNoAccessModalArticle=function(e,t,n){var r=".free-access, .open-access, .icon-free",i=t.find(".free-access").length;App.isAnyArticle?i=App.isFreeArticle||App.isTollFreeAccess:App.isSearch?i=t.closest(".search-result").find(r).length:(App.isIssue||App.isCollection)&&(i=t.closest(".article").find(r).length),i?o.$registerFreePdfModal.foundation("reveal","open"):(a.on("click",".js-btn-purchase-article",function(){var e=s(".js-modal-page-data");e&&0<e.length&&(e=e.data("storePurchaseUrl"),window.location.href=e+"/CustomerType.aspx?articleId="+n)}),e.foundation("reveal","open"))},o.checkArticlePDFAccess=function(t,n){var r=n.data("articleId"),i=n.data("articleUrl"),e=n.data("ajaxUrl"),a=!1;App.isAnyArticle?a=App.isFreeArticle:App.isIssue&&(a=n.closest(".article").find(".free-access, .open-access, .icon-free").length),a&&App.isReferredFromGoogle?l(i):s.ajax({type:"POST",url:e,data:{aId:r},traditional:!0,success:function(e){e.Success?l(i):(o.openNoAccessModalArticle(t,n,r),SCM.ClientStatsMaster.trackPdfTurnAwayAction(r,i))},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})},o.checkIssuePDFAccess=function(e){var r=e.data("issueId"),i=e.data("issueUrl"),e=e.data("ajaxIssueUrl"),a=o.$noAccessModal.find(".aIssuePurchaseLink").attr("href");-1<i.toLowerCase().indexOf("/toc.pdf")?window.location.href=i:s.ajax({type:"POST",url:e,data:{issueId:r},traditional:!0,success:function(e){var t,n;e.Success?l(i):(n=t=r,e=e=0<=(e=t=e=a).toLowerCase().indexOf("resourceid=")?t.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+n):e,o.$noAccessModal.find(".aIssuePurchaseLink").attr("href",e),o.$noAccessModal.foundation("reveal","open"))},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})},o.bindUiEvents=function(){a.on("click",".pdfaccess, .pdfaccess-text",function(){var e=s(this);a.foundation(),o.$paidPdfModal.foundation("reveal","close"),o.checkArticlePDFAccess(o.$paidPdfModal,e)}),a.on("click",".close-reveal-modal",function(){s(this).parents(".reveal-modal").foundation("reveal","close")}),a.on("click",".al-link.issue-pdfLink",function(){o.$paidPdfModal.foundation("reveal","close"),o.checkIssuePDFAccess(s(this))}),a.on("click",".article-pdf-only",function(){s("#pdf-link").click()}),a.on("click",".meta-journal-club",function(){s("h1.has-jc-ppt")||s("#pdf-link").click()}),a.on("click",".js-btn-subscribe-journal",function(){var e=s(".js-modal-page-data").data("storeSubscribeUrl");window.location.href=e})},o.init=function(){o.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);var SCM=SCM||{},App=App||{};SCM.SolrSearch={},App.SavedSearchUserAlert={},App.SavedSearchUserAlert.defaults={savedSearchAlertScheduleId:11},SCM.SolrSearch.defaults={controller:App.isLearningSearchResults?"AMA":"Solr",action:App.isLearningSearchResults?"LearningSolrSearch":"SolrSearch",instanceName:App.isLearningSearchResults?"AMAv2_LearningSearchResults":"AMAv2_SearchResults",updateTargetSelector:"#divSearch",cookieValue:App.isLearningSearchResults?"persistentLearningSearchFilters":"persistentSearchFilters",defaultSearchUrl:App.isLearningSearchResults?"/learning/searchresults?q=*&hd=learning&allSites=1&f_HasCME=true":'/searchresults?q=*&allSites=1&SearchSourceType=1&exPrm_qqq={DEFAULT_BOOST_FUNCTION}" * "&exPrm_hl.q=*'};var SolrDateErrorEnum={VALID:0,INVALID:1,INVALID_YEAR:2};Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()},Date.prototype.format=function(){var e=this.getDate(),t=this.getMonth()+1;return(t=t<10?"0"+t:t)+"/"+(e=e<10?"0"+e:e)+"/"+this.getFullYear()},function(SolrSearch,$,undefined){var $body=$("body"),hfSolrJournalID=$("#hfSolrJournalID"),hfGlobalSearchSiteURL=$("#hfGlobalSearchSiteURL"),journalScope=hfSolrJournalID.val(),$ajaxWrap=$(".ajax-container"),$selectedSaveSearch=$(".selected-save-search, .selected-save-search-learning"),$selectedSaveSearchTxt=$(".selected-save-search-txt"),$saveSearchLink=$(".save-search-link, .save-search-link-learning"),$savedSearchNameTxtBox=$(".saved-search-name-textbox"),queryText="",activeSavedSearchCookieName=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedSiteSearch",cookieKey="persistentSearchFilters",defaultBoastFunction="DEFAULT_BOOST_FUNCTION",testSearchInput=function(e,t){return""===$.trim(e)||null===e?(alert("Please enter a term to search: "),!1):e?(doSolrSearch(e,t),!0):(alert("SCM.SolrSearch.testSearchInput() fail"),!1)},testKeypress=function(e,t){13===e.keyCode&&(e.preventDefault(),e=determineScope(),testSearchInput(t,e))};function doSolrSearch(e,t){window.location.href=buildSolrSearchQuery(e,t)}function doSolrFacetSearch(t){var n=$.extend(SCM.SolrSearch.defaults,t),r=$(n.updateTargetSelector),e="/"+n.controller+"/"+n.action+"/"+n.instanceName;e+="?"+t.queryString,$.ajax({url:e,success:function(e){r.html(e),refreshResults(r,t,n),SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",undefined,!0),App.isSearch&&(bindKeyToDate($("#fromDate"),!0),bindKeyToDate($("#ToDate"),!1))},error:function(e){console.error(e)}})}function getDefaultBoastFunction(){return defaultBoastFunction}function buildSolrSearchQuery(e,t){resetActiveSavedSearch();var n='"'+(queryText=encodeURIComponent(e.trim()))+'"',r="&exPrm_qqq={"+getDefaultBoastFunction()+"}"+n,i="&exPrm_hl.q="+queryText,a="searchresults?",o="",s="",l="",c="",u="",d=null===t||t===undefined||""===t||"J*"===t,e="L*"===t,n="&allSites=1";return(c=SCM.SiteJS.getCookie(cookieKey))&&(o=(o="&"+c).replace(/(([?|&]{1})?allSites[^&]*)/,"")),e?(a="/learning/"+a,o||(u="hd=learning&f_HasCME=true&"),-1===o.indexOf("allSites")&&(s=n)):d?(-1===o.indexOf("allSites")&&-1===o.indexOf("SiteID")&&(s=n),a=hfGlobalSearchSiteURL.val()!==undefined?hfGlobalSearchSiteURL.val()+a:"/"+a,l="&SearchSourceType=1"):(o&&(o=o.replace(/(([?|&]{1})?f_SiteID[^&]*)/,"")),s+="Search All"===t?n:"&f_SiteID="+t,l="&SearchSourceType=3",a="/"+a),saveSolrSearchParams(cookieKey,u+(t="q="+queryText)),a+=u+t+s+o+l+r+i}function saveSolrSearchParams(e,t){t=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(t);SCM.SiteJS.saveDomainCookie(e,t,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)}function determineScope(){var e=$(".cs-options").find(".cs-selected");$(".site-search-bar .cs-select .cs-placeholder");return"J*"===(e=0===e.length?$(".cs-placeholder"):e).attr("data-value")&&(resetPersistentSearch(),resetActiveSavedSearch()),e.length?e.attr("data-value"):"J*"}function resetActiveSavedSearch(){SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain)}function resetPersistentSearch(){SCM.SiteJS.saveDomainCookie(cookieKey,"",document.domain)}function isValidSolrDate(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e);if(null==t)return SolrDateErrorEnum.INVALID;var n=t[2],r=t[1],i=t[3];if(2===i.length)return SolrDateErrorEnum.INVALID_YEAR;1===n.length&&(n="0"+n),1===r.length&&(r="0"+r);var a=new Date(i,r-1,n),e=a.getFullYear().toString(),t=(a.getMonth()+1).toString();return a.getDate()!==n.toString()&&t!==r.toString()&&e!==i.toString()?SolrDateErrorEnum.INVALID:SolrDateErrorEnum.VALID}function isYearOnly(e){e=/^(\d{4})$/.exec(e);return e&&-1<e[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),r=null,i=null,i=t?r="01":(r="12","31");return e.val(r+"/"+i+"/"+n),e.val()}function formatDate(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e),n=t[1],r=t[2],i=t[3],e=r,t=n;return 1===r.length&&(e="0"+r),(t=1===n.length?"0"+n:t)+"/"+e+"/"+i}function isTrue(e){return"string"==typeof e?"true"===e.toLowerCase():e}function bindUiEvents(){var e=$(".search-button"),t=$("#search-term"),n=$(".chkSelect");e.off("click"),t.off("keydown"),n.off("click"),e.on("click",function(){var e=determineScope();testSearchInput(t.val(),e)}),t.keydown(function(e){testKeypress(e,t.val())}),(App.isSearch||App.isLearningSearchResults)&&(n.on("click",function(e){doSolrFacetSearch({queryString:$(this).data("redirectUrl")})}),$(".sort-link, .close, .al-pageNumber, .al-nav-next, .al-nav-previous").on("click",function(e){var t=$(this).attr("data-url");null==t||"#"===t||""===t||$(this).hasClass("view-more")||(e.preventDefault(),resetActiveSavedSearch(),"True"===$("#bRetainQueryStringParams").val()?window.location.hash="#"+t:window.location=window.location.pathname+"?"+t)}),$("#btnRangeSearch").on("click",function(e){var t=$("#fromDate"),n=t.val(),r=$("#ToDate"),i=r.val(),a=(new Date).today(),o=new Date("July 14, 1883").format();""===n?(t.val(o),n=o):isYearOnly(n)&&(n=updateYearOnlyToFullDate($("#fromDate"),!0)),""===i?(r.val(a),i=a):isYearOnly(i)&&(i=updateYearOnlyToFullDate($("#ToDate"),!1));r=isValidSolrDate(n),a=isValidSolrDate(i);r!==SolrDateErrorEnum.INVALID&&a!==SolrDateErrorEnum.INVALID?r!==SolrDateErrorEnum.INVALID_YEAR&&a!==SolrDateErrorEnum.INVALID_YEAR?(n=formatDate(n),i=formatDate(i),new Date(i)<new Date(n)?alert("End Date must be greater than Start Date."):(i=$(this).attr("data-url").replace("queryText",n+" TO "+i),resetActiveSavedSearch(),window.location=window.location.pathname+"?"+i)):alert("Please enter a four digit year."):alert("Please enter valid dates.")})),$("#umbrellaSiteAutoCompleteResults").on("click","a",function(e){e.preventDefault();e=$(this).attr("href");null!==e&&"#"!==e&&""!==e&&(resetActiveSavedSearch(),window.location=e)}),$("#solrSearchBtn").on("click",function(e){var t=$("#txtSearch").val();null==t||""===t?alert("Please enter a term to search."):(t=encodeURIComponent(t),window.location="?q="+t)})}function bindPaginationEvents(){var e;App.isLearningSearchResults&&((e=$(".learning-search")).off("click"),e.on("click",".view-more",function(e){e.preventDefault();var t=$(this).attr("data-url"),n=$(".learning--pagination .loading-cube .sk-folding-cube");$(".pagination-buttons").hide(),n.removeClass("hide"),appendResults(e,t)}))}function moveStartLearningButton(e){0===e.find(".pagination").length&&$(".learning--start-learning").css("width","100%").css("text-align","center")}function appendResults(e,t){e.preventDefault();e=$(".learning--pagination");getResultsFromSolr($(".learning-search-results-contents").find(".search-results-list"),e,t)}function startLearningButtonEvents(){App.isLearningSearchResults&&$(".learning-results-buttons").on("click",".start-learning",function(e){e.preventDefault();e=$(".learning-result-title").first().find(".content--title").attr("href");window.location.href=e})}function getResultsFromSolr(r,i,e){var t,n=window.location.search;n=0===n.length?"?":(t=window.location.toString()).substring(0,t.indexOf("?")+1);n=n+=e;$.ajax({url:n,success:function(e){var t,n;e&&(n=(t=$(e)).find(".learning--search-results"),e=t.find(".learning--pagination"),$ajaxWrap.empty(),$ajaxWrap.html(n),t=$ajaxWrap.find(".search-results-list"),$ajaxWrap.empty(),$ajaxWrap.html(e),moveStartLearningButton(n=$ajaxWrap.find(".learning--pagination")),i.html(n),r.append(t.children()),e.html(n.html()),startLearningButtonEvents())},error:function(e,t,n){console.error("xhr: "+e),console.error("status: "+t),console.error("status code: "+e.statusCode),console.error("error thrown: "+n)}})}function displaySelectedSavedSearch(e){$saveSearchLink.hide(),$selectedSaveSearchTxt.text(e),$selectedSaveSearch.show()}function refreshResults(e,t,n){bindUiEvents(),bindPaginationEvents(),window.history.pushState(t,null,window.location.pathname+"?"+t.queryString),e[0].getBoundingClientRect().top<0&&$("html, body").animate({scrollTop:e[0].offsetTop},1e3);e=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(t.queryString);SCM.SiteJS.saveDomainCookie(n.cookieValue,e,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain),resetActiveSavedSearch(),SCM.SiteJS.setGlobalSearchDropdownSelectedValue(t.queryString)}var bindKeyToDate=function(t,n){t.bind("keydown",function(e){if(13==e.which&&isYearOnly(t.val()))return updateYearOnlyToFullDate(t,n),e.preventDefault(),e.stopImmediatePropagation(),!1}).datepicker()};function resetSavedSearchListItemsViewAndEdit(){$("[id^=searchListItemEdit_]").hide(),$("[id^=searchListItem_]").show()}function stripExcludedSolrSearchParameters(e){return e.replace(/(([?|&]{1})rg_ArticleDate[^&]*)/,"")}function saveSolrSearchInfo(savedSearchName){var $savedSearchNameErrorLbl=$(".saved-search-name-error");if(""===savedSearchName)return $savedSearchNameErrorLbl.text("Please name your search"),void $savedSearchNameErrorLbl.show();var searchAlertFrequency=0,redirectUrl="",currentUrl=stripExcludedSolrSearchParameters(window.location.href),data=JSON.stringify({searchName:savedSearchName,url:currentUrl,scheduleId:searchAlertFrequency,redirectUrl:redirectUrl,controlId:"AMA_Journal_SaveSearches"}),ajaxUrl="/Solr/SaveSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){var t;null!=e&&(e.Success||(t=e.Html.replace("[searchname]",savedSearchName),$savedSearchNameErrorLbl.text(t),$savedSearchNameErrorLbl.show()),e.Success&&($(".close-reveal-modal").click(),$savedSearchNameErrorLbl.hide(),$savedSearchNameTxtBox.text(""),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,savedSearchName,document.domain),location.reload(!0)))},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})}function deleteSolrSearchInfo(userSearchId,userAlertId){var _success=!1;if(0===userSearchId)return _success;var data=JSON.stringify({userSearchId:userSearchId,userAlertId:userAlertId,controlId:"AMA_Journals_DeleteSearches"}),ajaxUrl="/Solr/DeleteSolrSearchInfo";return $.ajax({async:!1,url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){e.Success?_success=!0:alert(e.Html)},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}),_success}function toggleSavedSearchRename(e,t){$("#"+e).show(),t.hide()}function updateSolrSearchInfo(updatedSearchName,userSearchId,$searchListItem){var $errorLbl=$searchListItem.find(".search-list-item-rename-error");if(""===updatedSearchName||0===userSearchId)return $errorLbl.text("Please name your search"),void $errorLbl.show();var data=JSON.stringify({searchName:updatedSearchName,userSearchId:userSearchId,controlId:"AMA_Journals_RenameSearches"}),ajaxUrl="/Solr/RenameSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){var t,n;e.Success?(t=$searchListItem.find(".search-list-item-link"),n=$searchListItem.find(".search-list-item-link"),!0==(SCM.SiteJS.getCookie(activeSavedSearchCookieName)===t.text())&&($selectedSaveSearchTxt.text(updatedSearchName),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,updatedSearchName,document.domain)),t.text(updatedSearchName),n.text(updatedSearchName),resetSavedSearchListItemsViewAndEdit(),$errorLbl.hide(),$errorLbl.text("")):(e=e.Html.replace("[searchname]",updatedSearchName),$errorLbl.text(e),$errorLbl.show())},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})}function bindSaveSearchEvents(){$(".save-search-btn").off("click"),$savedSearchNameTxtBox.off("keypress"),$(".clear-selected-save-search, .clear-selected-save-search-learning").off("click"),$(".search-list-item-rename-link").off("click"),$(".search-list-item-rename-cancel-btn").off("click"),$(".search-list-item-delete-link").off("click"),$(".search-list-item-rename-btn").off("click"),$(".search-list-item-link").off("click"),$(".search-alert #subscribe").off("click"),$savedSearchNameTxtBox=$(".saved-search-name-textbox");var t="";(App.isSearch||App.isLearningSearchResults)&&($(".save-search-btn").on("click",function(e){e.preventDefault(),saveSolrSearchInfo($savedSearchNameTxtBox.val().trim())}),$savedSearchNameTxtBox.on("keypress",function(e){13===(e.keyCode||e.which)&&saveSolrSearchInfo($savedSearchNameTxtBox.val().trim())}),$(".clear-selected-save-search, .clear-selected-save-search-learning").on("click",function(e){$selectedSaveSearch.hide(),$selectedSaveSearchTxt.text(""),$saveSearchLink.show(),resetActiveSavedSearch(),window.location.href=SCM.SolrSearch.defaults.defaultSearchUrl})),(App.isSearch||App.isLearningContent||App.isMyAccount)&&($(".search-list-item-rename-link").on("click",function(e){e.preventDefault();e=$(this).parents().eq(1).find(".search-list-item-edit-textbox").val();t=e,resetSavedSearchListItemsViewAndEdit(),toggleSavedSearchRename($(this).attr("data-id"),$(this).parent())}),$(".search-list-item-rename-cancel-btn").on("click",function(e){e.preventDefault(),toggleSavedSearchRename($(this).attr("data-id"),$(this).parents().eq(2));e=$(this).parents().eq(3).find(".search-list-item-edit-textbox");e.val()!==t&&e.val(t)}),$(".search-list-item-delete-link").on("click",function(e){e.preventDefault();var t,n=$(this).parents().eq(1),e=$(".saved-searches-list");deleteSolrSearchInfo($(this).attr("data-usersearchid"),$(this).attr("data-useralertid"))&&(resetActiveSavedSearch(),n.remove(),0<e.children().length?(t=1,$(".search-list-item-view .search-list-item-view-index").each(function(){$(this).text(t+". "),t++}),t=1,$(".search-list-item-edit .search-list-item-edit-index").each(function(){$(this).text(t+". "),t++})):($(".saved-searches").hide(),$(".saved-searches-no-result").show()),n.find(".search-list-item-link").text()===$selectedSaveSearchTxt.text()&&($selectedSaveSearch.hide(),$selectedSaveSearchTxt.text(""),$saveSearchLink.show()))}),$(".search-list-item-rename-btn").on("click",function(e){e.preventDefault();e=$(this).parents().eq(3);updateSolrSearchInfo(e.find(".search-list-item-edit-textbox").val(),$(this).attr("data-usersearchid"),e)}),$(".search-list-item-link").on("click",function(e){SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,$(this).text(),document.domain);SCM.SiteJS.saveDomainCookie("persistentSearchFilters","",document.domain)}),$(".search-alert #subscribe").click(function(){updateUserSearchAlert($(this).parent())}))}function updateUserSearchAlert($parentElement){var ajaxUrl="/Solr/UpdateUserAlert",dataObj={userSearchId:$parentElement.attr("data-usersearchid"),userAlertId:$parentElement.attr("data-useralertid"),scheduleId:$parentElement.attr("data-scheduleid")};$.ajax({url:ajaxUrl,type:"POST",dataType:"JSON",cache:!1,data:dataObj,success:function(e){var t,n;null!=e&&e.Success&&(t=$parentElement.find(".search-alert-subscribe-txt"),n=$parentElement.parent().find(".search-list-item-delete-link"),"0"!==e.ReturnId?(t.text("Subscribed"),$parentElement.attr("data-useralertid",e.ReturnId),$parentElement.attr("data-scheduleid",0),n.attr("data-useralertid",e.ReturnId)):(t.text("Get Alerts"),$parentElement.attr("data-useralertid",0),$parentElement.attr("data-scheduleid",App.SavedSearchUserAlert.defaults.savedSearchAlertScheduleId),n.attr("data-useralertid",0)))},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})}SolrSearch.init=function(){(App=App||{}).LearningSearchResults=App.LearningSearchResults||{};var n;bindUiEvents(),bindPaginationEvents(),bindSaveSearchEvents(),moveStartLearningButton($(".learning--pagination")),$body.on("click",".sriTopiclink",function(e){var t=(queryText=$(this).text()).replace(",","");doSolrSearch(t,""===(n=hfSolrJournalID.val())||null===n?null:n),e.preventDefault()}),startLearningButtonEvents();var e=SCM.SiteJS.getCookie(activeSavedSearchCookieName);""!==e&&displaySelectedSavedSearch(e),$(document).ajaxComplete(function(){bindSaveSearchEvents()})}}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){"use strict";var r=window.localStorage,n=[],i=[],a=[];return{getItem:function(e,t){e=(t=t||r).getItem("SCM."+e);return JSON.parse(e)},setItem:function(e,t,n){(n=n||r).setItem("SCM."+e,JSON.stringify(t))},removeItem:function(e,t){(t=t||r).removeItem("SCM."+e)},getItemCrossDomainNoCache:e,getItemCrossDomain:function(t,n){var r=o(n)+"."+t;void 0===CrossStorageClient?console.error("CrossStorageClient library is not available.  Falling back to localStorage"):c(n,t)||function(e,t){t=e+"::"+t;return-1!==i.indexOf(t)}(n,t)||(function(e,t){t=e+"::"+t;-1===i.indexOf(t)&&i.push(t)}(n,t),e(t,n).then(function(e){e&&(c(n,t)||(l(n,t),SCM.Utilities.LocalStorage.setItem(r,e)))}).catch(function(e){console.error("Failed to retrieve from cross-domain localStorage :: "+e.message)}));return SCM.Utilities.LocalStorage.getItem(r)},setItemCrossDomain:function(e,t,n){var r=o(n)+"."+e;{var i;SCM.Utilities.LocalStorage.setItem(r,t),l(n,e),n=void 0===CrossStorageClient?(console.error("CrossStorageClient library is not available.  Falling back to localStorage"),Promise.reject("CrossStorageClient library is not available")):(i=s(n),i.onConnect().then(function(){return i.set("SCM."+e,JSON.stringify(t))}).catch(function(e){console.error("Failed to retrieve / set cross-domain localStorage :: "+e.message)}))}return n},removeItemCrossDomain:function(e,t){{var n;void 0===CrossStorageClient?console.error("CrossStorageClient library is not available.  Falling back to localStorage"):(n=s(t)).onConnect().then(function(){return n.del("SCM."+e)}).catch(function(e){console.error("Failed to save to cross-domain localStorage :: "+e.message)})}SCM.Utilities.LocalStorage.removeItem(o(t)+"."+e)}};function e(t,e){var n;o(e);return void 0===CrossStorageClient?(console.error("CrossStorageClient library is not available."),Promise.reject("CrossStorageClient library is not available")):(n=s(e)).onConnect().then(function(e){return n.get("SCM."+t)}).then(function(e){return JSON.parse(e)}).catch(function(e){throw console.error("Failed to retrieve from cross-domain localStorage (nocache) :: "+e.message),e.message.includes("Could not access localStorage in hub")&&console.warn("It seems that the browser is set to block third-party cookies and data.  Cross-domain localStorage cannot function in this state."),e})}function o(e){return $("<a>",{href:e}).prop("hostname")}function s(e){for(var t=0;t<a.length;t++)if(a[t].hubUrl===e)return a[t].storage;var n=new CrossStorageClient(e,{timeout:15e3});return a.push({hubUrl:e,storage:n}),n}function l(e,t){t=e+"::"+t;-1===n.indexOf(t)&&n.push(t)}function c(e,t){return-1!==n.indexOf(e+"::"+t)}}();var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=SCM.Utilities.LocalStorage||{},SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=function(){var s="SharedWidgets.UserPersonalization",l=[];return{AddToLocalStorage:function(e,t){var n=$(e),e=c(),r=(e=e||{Items:[]}).Items;n.each(function(){var e=$(this).attr(t),e=JSON.parse(e);"0"!==e.id&&r.push(e)}),e.Items=u(r,200),SCM.Utilities.LocalStorage.setItem(s,e)},GetFromLocalStorage:c,AddToCrossDomainLocalStorage:function(e,a,o){$(e).each(function(){var e=$(this),r=e.attr(a),t=$("<a>",{href:r}).prop("hostname"),n=t+"."+s,i=e.attr(o);!function(e,t){"string"==typeof t&&(t=JSON.parse(t));var n=c(e),r=(n=n||{Items:[]}).Items;"0"!==t.id&&(r.push(t),n.Items=u(r,200),SCM.Utilities.LocalStorage.setItem(e,n))}(n,i),l.includes(t)||SCM.Utilities.LocalStorage.getItemCrossDomainNoCache(s,r).then(function(e){var t=e||{Items:[]},n=t.Items,e=JSON.parse(i);"0"!==e.id&&n.push(e),t.Items=u(n,200),SCM.Utilities.LocalStorage.setItemCrossDomain(s,t,r)}).catch(function(e){console.error("Failed to get value from cross-domain storage.  Falling back to regular localStorage."),l.push(t)})})},GetFromCrossDomainLocalStorage:function(e){return SCM.Utilities.LocalStorage.getItemCrossDomain(s,e)}};function c(e){return SCM.Utilities.LocalStorage.getItem(e=e||s)}function u(e,t){t=e.length-t;return 0<t&&e.splice(0,t),e}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.UserPersonalization.AddToLocalStorage(".SCM-SharedWidgets-LocalStorage-UserContentAccessWrite","data-values")});var SCM=SCM||{};SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=SCM.SharedWidgets.UserPersonalization||{},SCM.SharedWidgets.AsyncWidgetLoader=function(){return{LoadWidget:loadWidget};function loadWidget(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e);e=document.createEvent("Event");e.initEvent(elementClass.replace(".","")+"_LOADED",!0,!0),window.dispatchEvent(e),SCM&&SCM.EventEmitter&&"object"===_typeof(SCM.EventEmitter)&&SCM.EventEmitter.publish(elementClass+"_LOADED")},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function buildParameters(e){var t,n=JSON.parse(e),e=n.parameters,n=n.dynamicParameters;return void 0!==n&&void 0!==n.localParams&&"[REPLACE_WITH_LOCAL]"===n.localParams&&(t=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage(),n.localParams=t,e.Items=JSON.stringify(t||{Items:[]})),void 0!==n&&void 0!==n.localParams&&"[REPLACE_WITH_CROSSDOMAIN_LOCAL]"===n.localParams&&void 0!==n.crossDomainUrl&&(t=SCM.SharedWidgets.UserPersonalization.GetFromCrossDomainLocalStorage(n.crossDomainUrl),n.localParams=t,e.Items=JSON.stringify(t||{Items:[]})),e}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".SCM-SharedWidgets-AsyncWidgetLoader","data-url","data-params","POST")});var SCM=SCM||{},App=App||{};!function(r,i,a){var o="instOpenUrlKey_";r.replaceOpenUrlPlaceHolders=function(e,t){null!==t&&""!==t&&e.each(function(){var e=i(this).attr("data-targetId"),e=t.replace("{openUrlTargetId}",e);i(this).after(e),i(this).parent().show(),i(this).remove()})},r.getAndReplaceOpenUrlPlaceHolders=function(n){i.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(e){var t;null!==e&&"undefined"!==e&&(t="",1==e.DisplayOpenUrlLink&&(t=null!==e.LinkImageSource&&""!==e.LinkImageSource?" <a target='_blank' href='"+e.TargetUrl+"'><img src='"+e.LinkImageSource+"'/></a> ":" <a target='_blank' href='"+e.TargetUrl+"'> "+e.LinkImageText+" </a> "),r.replaceOpenUrlPlaceHolders(n,t),null!==a&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo&&void 0!==window.App.LoginUserInfo.currentSessionId&&a.setItem(o+window.App.LoginUserInfo.currentSessionId,t,window.sessionStorage))},error:function(e){}})},r.checkAndReplaceOpenUrlPlaceHolders=function(){var e,t;void 0!==window.App.LoginUserInfo&&0<window.App.LoginUserInfo.isInstLoggedIn?null!=(e=i('span[class="inst-open-url-holders"]'))&&0<e.length&&(null!==a&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo.currentSessionId&&null!==(t=a.getItem(o+window.App.LoginUserInfo.currentSessionId,window.sessionStorage))?r.replaceOpenUrlPlaceHolders(e,t):r.getAndReplaceOpenUrlPlaceHolders(e)):i('span[class="inst-open-url-holders"]').remove()},r.init=function(){r.checkAndReplaceOpenUrlPlaceHolders()}}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage);var SCM=SCM||{};SCM.ClientStatsMaster=function(i){function a(e,t){this.ActionFilterKey=e,this.ActionFilterValue=t}function o(e,t,n){this.SessionID=e,this.ClientID=t,this.SiteID=n}function s(e,t,n,r){this.UserSessionItem=new o("",0,i("#hdnSiteID").val()),this.ActionFilterType=new a(e,t),this.ActionDescription=n,this.ActionURL=r}function r(e,t,n,r){r=new s(e,t,n,r).toJson();i.ajax({type:"POST",url:"/ClientTrackingHandler.ashx",data:r,contentType:"application/json; charset=utf-8",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.error("jqXhr.responseText: "+e.responseText),console.error("status: "+t))})}return s.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=i(".tab-nav");e.on("click",".tab-nav-trigger",function(){var e=i(this).children(":first")[0],t=(t=e.innerText.trim())||e.textContent.trim();r(3,"Tabs",t+=" was clicked",window.location.href)}),(e=i(".tabs--link-container")).on("click","a.tabs--link",function(){var e=i(this).children("span:first")[0],t=(t=e.innerText.trim())||e.textContent.trim();r(3,"Tabs",t+=" was clicked",window.location.href)})},trackJumpLinkEvents:function(){i(".section-jump-links, .meta-author").on("click",".section-jump-link",function(){var e=i(this)[0].innerText.trim();r(3,e=e||i(this)[0].textContent.trim(),e+" was clicked",window.location.href)})},trackCrossReferenceLinkEvents:function(){i(".reference-content").on("click",".pubmed-link, .crossref-doi",function(){var e=(e=i(this)[0].innerText.trim())||i(this)[0].textContent.trim();r(3,"CrossReferenceLink",e+=" was clicked",window.location.href)})},trackToolBoxEvents:function(){var e=i(".toolbar, .abstract-toolbar, .magazine-toolbar, .article-content");e.on("click","a.toolbar-tool",function(){var e=i(this).text().trim();r(3,"ToolBox",e+=" was clicked",window.location.href)}),e.on("click","a.toolbar-share",function(){r(3,"Share",i(this).text().trim(),window.location.href)})},trackAudioPlayAction:function(){i("audio.mp--audio-player").on("play",function(){r(3,"mediaPlayer","audio play/pause was clicked",window.location.href)})},trackPdfTurnAwayAction:function(e,t){e&&(r(8,"DirectPdfAccess","PDF is clicked for ArticleID = "+e,t="http://"+function(e){var e=e.match(/\/data\/journals\/(\w+)\//i),t="";if(e){var n=e[1].toLowerCase();switch(n){case"jama":case"cardiology":case"oncology":t=n;break;case"derm":case"faci":case"neur":case"otol":case"surg":t="arch"+n;break;case"intemed":t="archinte";break;case"neurpsych":t="archneurpsyc";break;case"ophth":t="archopht";break;case"peds":t="archpedi";break;case"psych":t="archpsyc";break;default:t=n}}return e=window.location.hostname,e=t?t+"."+e:e}(t)+"/pdfaccess.ashx?resouceid="+e+"&PDFSource=24"),r(8,"PdfTurnaway",e,t))},trackSingleAction:function(e,t,n){e.on("click",function(){r(3,t,n,window.location.href)})},trackGdprCookieAcceptance:function(e,t,n){r(e,t,n,window.location.href)}}}(jQuery),$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackCrossReferenceLinkEvents(),SCM.ClientStatsMaster.trackJumpLinkEvents(),SCM.ClientStatsMaster.trackToolBoxEvents(),SCM.ClientStatsMaster.trackAudioPlayAction(),SCM.ClientStatsMaster.trackSingleAction($("a.view-large.figure-table-link"),"View Large","View Large was clicked"),SCM.ClientStatsMaster.trackSingleAction($("a.full-text-link"),"Fulltext Button","Fulltext button was clicked from abstract page")});var App=App||{};!function(e,n){e.init=function(){var e,t;App.isAnyArticle&&((t=n(".meta-authors--etal")).click(function(){var e=n(".meta-authors--remaining");t.hide(),e.addClass("accessible-show")}),e=n(".meta-articleinfo-jumplink"),n(e.attr("href")).length&&e.addClass("target-exists"),n(".article-full-text .para i+a").each(function(){this.previousSibling.nodeValue||n(this.previousSibling).append(" ")}))}}(App.ArticleTopInfo=App.ArticleTopInfo||{},jQuery);var SCM=SCM||{};!function(e,t){e.autoReveal=function(){e.referredFromGoogle&&e.fromRedirectSite&&t("#divFirstPagePreview").foundation("reveal","open")},e.init=function(){e.autoReveal()}}(SCM.FirstPagePreview=SCM.FirstPagePreview||{},jQuery);var SCM=SCM||{};!function(e,i){var t,n,o=i(".js-audio-player-wrapper"),r=o.find(".js-audio-player")[0],a=i(".js-play-pause"),s=i(".js-btn-forward"),l=i(".js-btn-backward"),c=o.find(".js-audio-player")[0],u=i(".js-audio-player-wrapper");function d(){a.each(function(){var t=i(this);t.on("click",function(){var e=(o=t.closest(".js-audio-player-wrapper")).find(".js-audio-player")[0];e.paused?(i(".js-audio-player-wrapper").each(function(){i(this).find(".js-audio-player")[0].pause(),i(this).find(".js-play-pause-text").html("Play"),i(this).find(".js-play-pause").removeClass("show-pause-btn")}),f(),w(e)):x(e)})})}function f(){var e=o.find(".js-duration"),t=o.find(".js-audio-player")[0],n=o.find(".js-initialTime");t.readyState&&(e.text(y(t.duration)),n.hide(),i(e).show())}function p(){var e=u.find(".js-time")[0];e.innerText!==c.currentTime&&(e.innerText=y(c.currentTime));var t=o.find(".js-time")[0],e=o.find(".js-audio-player")[0];t.innerText!==e.currentTime&&(t.innerText=y(e.currentTime))}function h(e,t){t=t||0;var n=o.find(".js-progressBar")[0],r=o.find(".js-timeBar"),i=o.find(".js-audio-player")[0],a=n.getBoundingClientRect(),n=a.width-2,a=e-a.left,n=0<t?t:a/n*100;r.css("width",(n=(n=100<n?100:n)<0?0:n)+"%"),i.readyState?(r=i.duration,i.currentTime=r*(n/100),g(n)):m(i,e)}function m(e,t){t=t||0;var n=o.find(".js-loading-animation");e.readyState||(e.load(),i(e).on("loadedmetadata",function(){f(),t&&h(t),n.removeClass("show-animation")}))}function g(e){100<=e?(clearTimeout(t),o.find(".js-timeBar").addClass("end-of-file"),o.find(".js-play-pause").removeClass("show-pause-btn")):(o.find(".js-timeBar").removeClass("end-of-file"),b())}function y(e){var t=Math.floor(e/60/60),n=Math.floor(e/60)-60*t,e=Math.round(e%60);return 60===e&&(e=0,n+=1),0<t?t.toString()+":"+n.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0"):n.toString()+":"+e.toString().padStart(2,"0")}function v(){p()}function b(){v(),t=setTimeout(b,500)}function w(e){var r;e&&(r=o.find(".js-loading-animation"),S(o),n=e.play(),c=o.find(".js-audio-player")[0],u=i(c).closest(".js-audio-player-wrapper"),o.find(".js-play-pause-text").html("Pause"),o.find(".js-play-pause").addClass("show-pause-btn"),n.then(function(){var t,n;r.removeClass("show-animation"),t=e,n=o.find(".js-timeBar"),t.addEventListener("timeupdate",function(){var e=100*t.currentTime/t.duration;n.css("width",e+"%"),g(e)}),f(),v()}).catch(function(e){r.removeClass("show-animation")}))}function x(e){e&&(null!=n&&(o.find(".js-play-pause-text").html("Play"),o.find(".js-play-pause").removeClass("show-pause-btn"),e.pause()),v())}function S(e){i(".js-audio-player-wrapper").each(function(){i(this).find(".js-loading-animation").removeClass("show-animation")}),e.find(".js-loading-animation").addClass("show-animation")}function A(e){"ArrowRight"===e.code?(r.currentTime+=5,h(0,k())):"ArrowLeft"===e.code&&(r.currentTime-=5,h(0,k()))}function k(){return r.currentTime/r.duration*100}function C(e){return e=e.originalEvent,(["touchstart","touchend","touchmove"].includes(e.type)?e.targetTouches[0]:e).pageX}e.init=function(){var n;i(".js-audio-player-wrapper").length&&(i(".js-btn-speed").each(function(){var e=i(this);e.on("click",function(){switch(o=e.closest(".js-audio-player-wrapper"),m(r=o.find(".js-audio-player")[0]),e.text()){case"1x":e.html("1.25x"),r.playbackRate=1.25;break;case"1.25x":e.html("1.5x"),r.playbackRate=1.5;break;case"1.5x":e.html("1.75x"),r.playbackRate=1.75;break;case"1.75x":e.html("2x"),r.playbackRate=2;break;default:e.html("1x"),r.playbackRate=1}})}),d(),s.each(function(){var t=i(this);t.on("click",function(e){o=t.closest(".js-audio-player-wrapper"),(r=o.find(".js-audio-player")[0]).currentTime+=15,h(0,k()),r.readyState||S(o)})}),l.each(function(){var t=i(this);t.on("click",function(e){o=t.closest(".js-audio-player-wrapper"),0<(r=o.find(".js-audio-player")[0]).currentTime&&(r.currentTime-=15),h(0,k()),r.readyState||S(o)})}),i(".js-audio-player-wrapper").on("click",function(e){i(this).closest(".js-timeBar").focus(),r=o.find(".js-audio-player")[0],window.addEventListener("keydown",A),A(e)}),i(".js-timeBar").focus(function(e){o=i(this).closest(".js-audio-player-wrapper"),r=o.find(".js-audio-player")[0],window.addEventListener("keydown",A),A(e)}),i(".js-timeBar").blur(),window.removeEventListener("keydown",A),p(),v(),w(),x(),n=!1,i(".js-progressBar-clickable").each(function(e){var t=i(this);t.on("mousedown touchstart",function(e){o=t.closest(".js-audio-player-wrapper"),e.preventDefault(),n=!0,f(),h(C(e))}),t.on("mouseup touchend",function(e){n&&(n=!1,f())}),t.on("mousemove touchmove",function(e){n&&(o=t.closest(".js-audio-player-wrapper"),f(),h(C(e)))})}),window.addEventListener("mouseup",function(){n=!1}),b())}}(SCM.AudioPlayer=SCM.AudioPlayer||{},jQuery);var App=App||{};App.MostViewedCited={},function(t,e){t.mvcViewMoreLink=e(".js-view-more"),t.mostViewedArticles=e(".js-most-viewed-item"),t.mostCitedArticles=e(".js-most-cited-item"),t.mostViewedCount=t.mostViewedArticles.length,t.mostCitedCount=t.mostCitedArticles.length,t.init=function(){t.mostViewedArticles.slice(t.mostViewedCount/2).addClass("hide"),t.mostCitedArticles.slice(t.mostCitedCount/2).addClass("hide"),t.MostViewedEvents()},t.MostViewedEvents=function(){t.mvcViewMoreLink.click(function(e){e.preventDefault(),t.mostViewedArticles.slice(t.mostViewedCount/2).removeClass("hide"),t.mostCitedArticles.slice(t.mostCitedCount/2).removeClass("hide"),t.mvcViewMoreLink.addClass("hide")})}}(App.MostViewedCited=App.MostViewedCited||{},jQuery);var App=App||{};!function(e,a){e.init=function(){var r,i,e,t;e=a(".js-audio-jump-link"),t=a(".js-inlineAudioAnchorId"),e.each(function(e,n){r=a(n).prop("hash").substr(1),t.each(function(e,t){i=a(t).attr("id"),r&&i&&r===i&&(t=a(t).siblings(".inlineAudio").attr("id").split("inlineAudio:::")[1],a(n).attr("href","#"+t.replace(/[^a-zA-Z0-9]/g,"")))})})}}(App.AudioPlayerAMA=App.AudioPlayerAMA||{},jQuery);var SCM=SCM||{};!function(d,f){function p(e,t,n){for(var r=0;r<e.length;r++){var i=document.createElement("option");i.value=e[r][0],i.text=e[r][1],e[r][0]===n&&i.setAttribute("selected","selected"),t.appendChild(i)}return t}function h(e){for(var t=[],n=queryAll(e),r=0;r<n.length;r++){var i=[];i.push(n[r].getAttribute("data-option")),i.push(n[r].textContent),t.push(i)}return t}function m(){var e,t,n,r,i,a,o,s,l,c,u;App.isNewOnline&&(f(".issue-view-trigger"),e=!1,t=f(".new-online--days"),r={items:8,itemsDesktop:[1199,7],itemsDesktopSmall:[980,5],itemsTablet:[768,5],itemsTabletSmall:[600,3],itemsMobile:[479,3],pagination:!1,navigation:!0,navigationText:["",""],rewindNav:!1},i=function(){e?n.reinit(r):(t.owlCarousel(r),e=!0,n=t.data("owlCarousel"))},d.updateCarousel=debounce(function(){i()},50,!1),App.isMobile||i(),App.isNewOnline&&(a=scmquery(".year-select-wrap"),o=scmquery(".day-select-wrap"),s=f(".new-online--year.selected").attr("data-option"),l=f(".new-online--day.selected").attr("data-option"),c=document.createElement("select"),u=document.createElement("select"),classie.add(c,"year-select"),classie.add(u,"day-select"),a.appendChild(p(h(".new-online--year"),c,s)),o.appendChild(p(h(".new-online--day"),u,l))))}d.init=function(){var t,e,n,r,i,a,o,s,l,c,u;f(".past-issues-trigger, .year-entry, .decade-entry, .nav-journals a:contains(Archives of), .site-link--sub-nav a:contains(Archives of)").on("click",function(){"undefined"!=typeof Storage&&(sessionStorage.dontScrollPastIssue="true")}),App.isPastIssues&&(e=scmquery(".decade-select-wrap"),n=scmquery(".year-select-wrap"),r=scmquery(".issue-select-wrap"),i=f(".decade-entry.selected").attr("data-option"),a=f(".year-entry.selected").attr("data-option"),o=f(".issue-entry.selected").attr("data-option"),s=document.createElement("select"),l=document.createElement("select"),c=document.createElement("select"),classie.add(s,"decade-select"),classie.add(l,"year-select"),classie.add(c,"issue-select"),e.appendChild(p(h(".decade-entry"),s,i)),n.appendChild(p(h(".year-entry"),l,a)),r.appendChild(p(h(".issue-entry"),c,o)),t=f(".issue-browse"),f(".decade-select, .year-select, .issue-select").change(function(){var e=f(this).find("option:selected").attr("value");t.find("[data-option="+e+"]")[0].click()})),App.isNewOnline&&(m(),u=f(".new-online--controls"),f(".year-select, .day-select").change(function(){var e=f(this).find("option:selected").attr("value");u.find("[data-option="+e+"]")[0].click()}))},d.windowLoadInit=function(){var e;App.isPastIssues&&"undefined"!=typeof Storage&&("true"!==sessionStorage.dontScrollPastIssue&&(e=f(".issue-pagination").offset().top-106,f("html, body").animate({scrollTop:e},"slow")),sessionStorage.dontScrollPastIssue="false")}}(SCM.IssuePage=SCM.IssuePage||{},jQuery);var ArtMetric=ArtMetric||{};ArtMetric.fullVersion=function($dest,routeUrl){$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.html(e),setTimeout(function(){void 0!==window.ChartistData&&ArtMetric.createChart(".ct-chart",window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0},[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e.replace(" ","\n")}}}]])},200),window._altmetric_embed_init(),setTimeout(ArtMetric.handleQuestionMark,1500)},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})},ArtMetric.eventsToClose=function(){$(".artmet-modal").on("click",".artmet-close-modal",function(){ArtMetric.closeModal()}),$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},ArtMetric.handleQuestionMark=function(){var e=$(".altmetric-embed").find("a");-1<window.location.href.indexOf("/channels")&&e.attr("rel","nofollow"),e.each(function(e,t){t=$(t);0<t.length&&"?"===t.html().trim()&&t.html('<span class="_altmetric_score">0</span>')}),$("._altmetric_score").addClass("sb-sc visible")},$(document).ready(function(){ArtMetric.altmetricEmbedElements=$(".altmetric-embed");var e,t=ArtMetric.altmetricEmbedElements.length;0<ArtMetric.altmetricEmbedElements.length&&(e=0,ArtMetric.altmetricEmbedElements.on("DOMSubtreeModified",function(){++e===4*t&&ArtMetric.handleQuestionMark()}),setTimeout(ArtMetric.handleQuestionMark,5e3))});var App=App||{};!function(i,o,a){var s=o(".tab-nav"),l=o(".content-panel"),c=o(".resources-panel"),u=(o("body"),o(".hidden-jobs-ad")),d=o(".need-jobs-ad");function f(){App.isSplitScreen&&s.on("click",".tab-nav-trigger",function(){this.className;var e=this.getAttribute("href");"#related-tab"===e&&SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640);function t(e){setTimeout(function(){n.animate({scrollTop:e},150)},1)}var n=App.isTabletDown?o("html, body"):c;App.sectionJumpLinkClicked||(App.lastPositions!==a&&App.lastPositions[e]!==a?t(App.lastPositions[e]):t(0)),App.sectionJumpLinkClicked=!1})}function p(e,t){!e.length||App.isDesktop&&".tab-nav-full-text"===t||e.click()}App.sectionJumpLinkClicked=!1,i.scrollOverflowElement=function(e,t){var n=App.isMag||App.isChannelMag||App.isQuiz||App.isTabletDown?o("html, body"):".tab-nav-full-text"===e?l:c,r=App.isSplitScreen?15:92,i=App.isSplitScreen?function(e,t){switch(e){case".tab-nav-figure-table":return o(t).closest(".figure-table-wrapper");case".tab-nav-references":return App.isSplitScreen?o(".references-wrap").find(t):o(t);case".tab-nav-multimedia":return o(t).closest(".multimedia-item");default:return o(t)}}(e,t):o(t);-1<[".tab-nav-full-text",".tab-nav-figure-table",".tab-nav-multimedia",".tab-nav-references",".tab-nav-affiliations",".tab-nav-supplemental"].indexOf(e)&&(i.length?(r=i.position().top-r,n.animate({scrollTop:r},500),App.scrollQueue=a):App.scrollQueue={tab:e,hash:t})},i.manageAnchorLinks=function(){o(".master-main").on("click",".section-jump-link",function(e){var t,n;location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&(o(".lazy").each(function(){var e=o(this);e.attr("src",e.attr("data-original")),this.loaded=!0}),e.preventDefault(),e=o(this),t=this.hash,n=e.attr("data-tab-toggle"),e=o(n),App.isSplitScreen&&(App.sectionJumpLinkClicked=!0,p(e,n)),!App.isMag&&!App.isQuiz||".tab-nav-supplemental"!=n?App.isSplitScreen&&App.isTabletDown?setTimeout(function(){i.scrollOverflowElement(n,t)},10):(i.scrollOverflowElement(n,t),setTimeout(function(){i.scrollOverflowElement(n,t)},250)):o("#data-supplements-magazine-reveal").foundation("reveal","open"))}),o(".master-main").on("click",".artmet-comments-link",function(e){var t,n,r;App.isSplitScreen&&(t=o(this),n=this.hash,r=t.attr("data-tab-toggle"),p(o(r),r),App.isTabletDown&&setTimeout(function(){i.scrollOverflowElement(r,n)},10))})},i.initTabNavigation=function(){if(App.isSplitScreen){var e=".tab-nav-full-text",n=o(".tab-nav-trigger");if(App.lastPositions=App.lastPositions||{},App.isDesktop)for(var t=[".tab-nav-contents",".tab-nav-figure-table",".tab-nav-supplemental",".tab-nav-related"],r=0;r<t.length;r++){var i=scmquery(t[r]);if(i&&!classie.has(i,"tab-no-content")){e=t[r];break}}o(".tab-nav-trigger").click(function(){o(this);var e=n.filter(".target-tab-active").attr("href"),t=App.isTabletDown?o("body"):c;App.lastPositions[e]=t.scrollTop()}),SCM.JSUtility.toggleTabs(".tab-nav",".tab-nav-trigger",".resource-tab",e),s.on("click",".tab-nav-trigger",function(){var e=u.html();0<e.length&&(d.each(function(){o(this).append(e)}),u.html(""))}),App.isSplitScreen&&(a(),SCM.EventEmitter.subscribe("viewport-changed",function(e){s.trigger("sticky_kit:detach"),a()})),f(),s.on("click",".tab-nav-trigger",function(){(App.isDesktop?c:o(window)).trigger("scroll")}),o(".artmet-comments-link").attr("data-tab-toggle",".tab-nav-comments")}function a(){var e=App.isMobile?94:100;s.length&&s.stick_in_parent({parent:".master-main",offset_top:e})}},i.init=function(){var r,t,e;App.isSplitScreen&&i.initTabNavigation(),(App.isAnyArticle||App.isQuiz)&&(i.manageAnchorLinks(),r=/10[_.]1001[^\s"<]+/g,t=o(".references .reference-content").map(function(e,t){var n=o(t).html().match(r);return n&&n.length?{elem:t,doi:n[0]}:null}).filter(function(e,t){return!!t&&!!t.elem&&!!t.doi}),(e=t.map(function(e,t){return t.doi}).get().filter(function(e,t,n){return n.indexOf(e)===t}))&&e.length&&o.post("/AMA/ArticleUrlsByDoi",{dois:e.toString()}).promise().then(function(r){if(!r||!r.Success){var e=o.Deferred();return e.reject(r.Messages&&r.Messages.length?r.Messages[0]:"Unknown error"),e}t.each(function(e,t){var n;t.elem&&t.doi&&r.Result[t.doi]&&(n=o(t.elem).find(".pubmed-link, .google-scholar-ref-link, .crossref-doi").first(),t=o("<a>").attr("href",r.Result[t.doi]).addClass("jn-article-link").html("Article"),n.before(t))}),o(".jn-article-link").before("<br>")}).then(null,function(e){console.error("Unable to look up resource URLs for DOIs"),console.error(e)}))}}(App.SplitScreen=App.SplitScreen||{},jQuery);var App=App||{};!function(e,i){function r(e,t){return e+function(e,t){var n="?";(-1!==t.indexOf("?",e)||-1!==t.indexOf("%3f",e))&&(n="&");return n}(function(e){e=e.lastIndexOf("return_url=");-1===e&&(e=0);return e}(e),e)+t}function a(e,t){var n=e,t="alert="+t;return n=e.indexOf(t)<0?r(e,t):n}function n(){var e,t,n,r;(App.isSearch||App.isLearningSearchResults||App.isLearning||App.isPlayer||App.isQuiz||App.isMyAccount)&&(e=i(".save-search .save-search-link"),t=i(".js-modal-save-search-reveal"),n=i("#save-a-search-modal"),r=i("#view-edit-search-modal"),e.click(function(e){e.preventDefault(),(App.isIndividual?n:t).foundation("reveal","open")}),i(".view-edit-searches .view-edit-btn").click(function(e){e.preventDefault(),(App.isIndividual?r:t).foundation("reveal","open")}),i(".view-edit-saved-searches").click(function(e){e.preventDefault(),r.foundation("reveal","open")}))}e.init=function(){var t;App.isAbstract&&(t=i(".full-text-link, .toolbar-full-text")).click(function(){var e=t.data("url");e&&0<e.length?window.location.href=e:SCM.PDFAccess.openNoAccessModalArticle(SCM.PDFAccess.$noAccessModal,t,t.data("articleId"))}),n(),i(document).ajaxComplete(function(){n(),i(".js-btn-signin-personal").on("click",function(){var e,t=i(this),n=t.data("oauthSigninUrl");!n||n.length<=0||((e=t.parent(".no-access.modal").find(".no-access--alerts-input"))&&0<e.length&&e.is(":checked")&&(e="article",n=a(n,e=t.parent(".no-access.modal").hasClass("js-modal-follow-collection-reveal")?"collection":e)),window.location.href=n)}),i(".js-btn-create-personal-account").on("click",function(){var e=i(this),t="/oauthsignin?return_url="+encodeURIComponent(window.location.href),n=e.parent(".no-access.modal").find(".no-access--alerts-input");n&&0<n.length&&n.is(":checked")&&(n="article",t=a(t,n=e.parent(".no-access.modal").hasClass("js-modal-follow-collection-reveal")?"collection":n)),window.location.href=t}),i(".js-btn-subscribe-now").on("click",function(){var e=i(".js-modal-page-data").data("storeUrl");window.location.href=e})})}}(App.Access=App.Access||{},jQuery);var App=App||{};!function(e,o){o("#toolbar");e.init=function(){var e,t,n;App.isSplitScreen&&SCM.JSUtility.removeEmptyTabs(".tab-nav-trigger",["#full-text-tab","#related-tab"],".advertisement, script, .widget-JobsAd, .widget-JobsAd *"),(App.isAbstract||App.isMag)&&(n=(n=o(".toolbar-trigger")).find(".toolbar-tool").not(".toolbar-share").add(n.find(".toolbar-share-more .toolbar-share")),App.isAbstract&&(e=o(".abstract-toolbar .toolbar-pdf"),t=o(".pg_abstract .toolbar-trigger .toolbar-pdf-wrap"),0===e.length&&t.hide()),App.isMag&&(e=o(".magazine-toolbar .toolbar-pdf"),t=o(".widget-MagazineView .toolbar-trigger .toolbar-pdf-wrap"),0===e.length&&t.hide()),n.click(function(){var e=o(o(this).attr("data-trigger"))[0];e&&e.click()})),"undefined"!=typeof addthis&&(addthis.update("share","url_transforms",{shorten:{twitter:"bitly"}}),addthis.update("share","shorteners",{bitly:{}}),(n=o(".social-share, .toolbar-tool").attr("data-share-title"))&&0<n.length&&addthis.update("share","title",n),(n=o(".social-share").attr("data-share-journal"))&&0<n.length&&addthis.update("share","passthrough",{twitter:{via:n+" part of @JAMANetwork"}})),o(".toolbar-share").click(function(){var e,t,n,r=o(this).attr("data-utm-source"),i=o("meta[property='og:url']").attr("content"),a=o("meta[property='og:type']").attr("content");"quiz"===a.toLowerCase()?addthis.update("share","url",i):(e=("0"+((n=new Date).getMonth()+1)).slice(-2),t=("0"+n.getDate()).slice(-2),n=n.getYear()%100,n=e.concat(t,n),a=a.toLowerCase()+"_engagement",addthis.update("share","url",i+"?utm_source="+r+"&utm_campaign=content-shareicons&utm_content="+a+"&utm_medium=social&utm_term="+n))})}}(App.Toolbar=App.Toolbar||{},jQuery);var App=App||{};!function(n,r){n.saveChangesLinkEnabled=!0,n.alertUpdateEvents=function(){r("body").on("click","#publicationSaveChanges",function(){n.saveChangesLinkEnabled&&(r(this).addClass("linkDisabled"),n.saveChangesLinkEnabled=!1,n.postJournalData(),n.saveChangesLinkEnabled=!0)})},n.postJournalData=function(){var e=new Array;r("#journalAddEditDiv input:checked").each(function(){e.push(r(this).val())});var t={JournalAlertsJson:r("#JournalAlertsJson").val(),JournalUpdates:JSON.stringify(e).toString(),SeparateJournalsAlerts:!!r("input#Config_SeparateJournalsAlerts").length&&r("input#Config_SeparateJournalsAlerts").val(),PublishAheadofPrint_FriendlyName:r("input#Config_PublishAheadofPrint_FriendlyName").length?r("input#Config_PublishAheadofPrint_FriendlyName").val():"Advance access",LatestIssue_FriendlyName:r("input#Config_LatestIssue_FriendlyName").length?r("input#Config_LatestIssue_FriendlyName").val():"Latest issue",UpdateFor:0};r("#journalAddEditDiv").foundation("reveal","close"),r.post("/Content/MyEmailAlerts",t,function(e){setTimeout(function(){n.update(e),""!==r.trim(r(".detect-error-message").html())&&r("#journalAddEditDiv").foundation("reveal","open")},200)})},n.update=function(e){var t=r(e).find("#journalsDetails").html();t&&t.length&&(r("div#journalsDetails").html(t),n=r("#Config_PublicationAlertsLeadText").val(),r("p#publicationAlertsLeadText").length&&r("#publicationAlertsLeadText").html(n),n=r("#Config_NoPublicationAlertsText").val(),r("span#noPublicationAlertsText").length&&r("#noPublicationAlertsText").html(n));var n=r(e).find("#JournalAlertsJson").val();n&&n.length&&r("#JournalAlertsJson").val(n);n=r(e).find("#journalUpdateDetails").html();n&&n.length&&r("#journalUpdateDetails").html(n);e=r(e).find(".detect-error-message").html();e&&e.length&&r(".detect-error-message").html(e)},n.postDelete=function(e,t){t={AlertIdToDelete:e,UpdateFor:t,SeparateJournalsAlerts:!!r("#Config_SeparateJournalsAlerts").length&&r("#Config_SeparateJournalsAlerts").val(),PublishAheadofPrint_FriendlyName:r("#Config_PublishAheadofPrint_FriendlyName").length?r("#Config_PublishAheadofPrint_FriendlyName").val():"Advance access",LatestIssue_FriendlyName:r("#Config_LatestIssue_FriendlyName").length?r("#Config_LatestIssue_FriendlyName").val():"Latest issue",ConfigSiteName:r("#Config_ConfigurableSiteName").length?r("#Config_ConfigurableSiteName").val():""};r.post("/Content/MyEmailAlerts",t,function(e){n.update(e)})},n.init=function(){App.isMyAccount&&n.alertUpdateEvents()}}(App.MyEmailAlerts=App.MyEmailAlerts||{},jQuery);var App=App||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){e.init=function(){App.isMyAccount&&t("#renewSubs").on("click",function(){var e=t(".chk-renewal:checked").map(function(){return this.value}).get().join("|");0<e.length?(e=App.storeUrl+"/index.aspx?AddToCart="+e,window.location.href=e):window.location.href=App.storeUrl})}}(App.MySubscriptions=App.MySubscriptions||{},jQuery);var SCM=SCM||{};!function(d,f){var o=f(window),p=f("body"),e=f(document),h={offset_top:106,recalc_every:10},m={offset_top:106,recalc_every:10,parent_height_minus:130};function g(){App.isMyAccount&&SCM.JSUtility.printPortionOfPage(".my-acct--cme",".cme--create-pdf-year")}var t=f(".btnTop"),n=f(".footer-wrap");function y(e){var t;e=e||!1,App.isMobile&&App.isFreeArticle&&!e||(t=function(e,t){e.lazyload({skip_invisible:!1,container:t,failure_limit:10,load:function(){f(this).addClass("loaded")}}),e.on("appear",function(){var e;this.loaded||(this.loaded=!0,(e=f(this)).removeClass("lazy-ad"),googletag.cmd.push(function(){googletag.pubads().refresh([App.Ads.slots[e.attr("data-slot")]],{changeCorrelator:!1})}))}),SCM.EventEmitter.publish("AppearTriggerBound")},App.isSplitScreen&&App.isDesktop?t((e=f(".resources-panel")).find(".lazy-ad"),e):t(f(".lazy-ad"),window),App.isSplitScreen&&!App.isFreeArticle&&f("#ad-dual-box-mobile").remove())}function v(t){jQuery(document).ready(function(e){t?y(t):(SCM.AsyncAds.LoadHeaderAd(".SCM-SharedWidgets-AsyncHeaderAdLoader","data-url","data-params","POST"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){SCM.AsyncAds.LoadAds(".SCM-SharedWidgets-AsyncAdLoader","data-url","data-params","POST")}),SCM.EventEmitter.subscribe("AdFired",function(){y()}))})}function b(){var t,e;!App.isSplitScreen||App.isSplitScreen&&App.isMobile||""===(t=f("#split-screen-contab")).html()&&(e={siteName:App.ArticleSplitScreen.siteName,siteId:App.ArticleSplitScreen.siteId,journalId:App.ArticleSplitScreen.journalId,adDisplay:App.ArticleSplitScreen.adDisplay,adSection:App.ArticleSplitScreen.adSection,adPosition:App.ArticleSplitScreen.adPosition,fromGoogle:App.ArticleSplitScreen.fromGoogle,controlId:App.ArticleSplitScreen.controlId,slotLocationOverride:App.ArticleSplitScreen.slotLocationOverride},f.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),v(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}}))}function w(){var t,e;App.isCollection&&(t=f("#collection-collex"),e={siteName:App.CollectionResults.siteName,siteId:App.CollectionResults.siteId,journalId:App.CollectionResults.journalId,adDisplay:App.CollectionResults.adDisplay,adSection:App.CollectionResults.adSection,adPosition:App.CollectionResults.adPosition,fromGoogle:App.CollectionResults.fromGoogle,controlId:App.CollectionResults.controlId},f.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),v(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}}))}if(o.on("scroll",debounce(function(){35<document.body.scrollTop||35<document.documentElement.scrollTop?t.addClass("visible"):t.removeClass("visible"),n.length&&(!function(e){if(e&&e.length){var t=o.scrollTop(),n=o.height(),r=t+n,i=e.offset().top,a=e.height(),e=i+a;return t<=i&&i<r||t<e&&e<=r||n<a&&i<=t&&r<=e}}(n)?t.addClass("fixed").removeClass("absolute"):t.removeClass("fixed").addClass("absolute"))},10,!1)),d.resizeIframe=function(e){var t,n;document.getElementById&&(t=document.getElementById(e).contentWindow.document.body.scrollHeight,n=document.getElementById(e).contentWindow.document.body.scrollWidth),document.getElementById(e).height=t+"px",document.getElementById(e).width=n+"px"},d.stickSearchFacets=function(){App.isSearch&&f(".facets-inner").stick_in_parent({offset_top:106,recalc_every:10,parent:".search-wrap"})},d.searchFacetsMoreLess=function(){var e=f(".sf-facet-list"),i='<span class="symbol">[+]</span> More';!scmquery(".facet-more-less")&&e.each(function(){var t,n,e=f(this),r=e.find(".sf-facet");6<r.length&&((t=r.slice(6)).addClass("hide"),e.append('<a href="" class="facet-more-less">'+i+"</a>"),(n=e.find(".facet-more-less")).click(function(e){e.preventDefault(),n.toggleClass("active"),n.hasClass("active")?(n.html('<span class="symbol">[-]</span> Less'),t.removeClass("hide")):(n.html(i),t.addClass("hide"))}))})},d.equalizeJustPublished=function(){var a,o,t,s,l;App.isJournal&&(a=f(".widget-JustPublished"),o=a.find(".article"),t=0,s=function(){o.removeAttr("style")},l=function(e){t=0,e.each(function(){var e=f(this).outerHeight();t<e&&(t=e)}),e.each(function(){f(this).innerHeight(t)})},function(){if(App.isMobileAlt)s();else{s();for(var e=f(".widget-instance-AMA_ArticleListNewAndPopular_Journal_Research .featured-list--contents li").length,t=1;t<=e;t++){var n=a.find(".article-"+t);l(n)}for(var r=f(".widget-instance-AMA_ArticleListNewAndPopular_Journal_OrigInv .featured-list--contents li").length,i=1;i<=r;i++)l(o)}}())},d.updateEqualizeJustPublished=debounce(function(){d.equalizeJustPublished()},50,!1),d.updateMyCmeByYear=function(e){f(".my-acct--cme").load("/AMA/MyCme?selectedYear="+e,function(){g()})},d.formatSearchQueryToSaveToLocalStorage=function(e){return e.replace(/(([?|&]{1})?q=[^&]*)/,"").replace(/(([?|&]{1})?page=[^&]*)/,"").replace(/(([?|&]{1})?exPrm_qqq[^&]*)/,"").replace(/(([?|&]{1})?exPrm_hl.q[^&]*)/,"").replace(/(([?|&]{1})?SearchSourceType[^&]*)/,"").replace(/(([?|&]{1})?author[^&]*)/,"").replace(/(([?|&]{1})fl_[^&]*)/g,"").replace(/(([?|&]{1})restypeid=[^&]*)/,"").replace(/(^[?|&])/,"").replace(/(([?|&]{1})appId=[^&]*)/,"")},d.saveDomainCookie=function(e,t,n){document.cookie=e+"="+t+";samesite=lax;secure;path=/;domain="+n},d.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},d.getGlobalSearchDropdownDisplayValue=function(e){var t="",n=e.split("AND");if(1===n.length)for(var r=f("#BodyContent_Header_ddlForSearch")[0],i=0;i<r.length;i++)r.options[i].value===e&&(t=r.options[i].text);else t=App.currentSiteCount===n.length?"Journals":n.length+" Journals";return t},d.setGlobalSearchDropdownSelectedValue=function(e){var t=f(".site-search-bar .cs-select .cs-placeholder"),n=e.match(/f_SiteID=([^&]*)/),e="Search All";n&&(n=decodeURI(n[1]).replace(/\+/g," ").replace(/\%26/g,"&"),e=d.getGlobalSearchDropdownDisplayValue(n)),t.text(e),0<"".length&&t.attr("data-value","")},d.initLazyLoad=function(e){e=e||".lazy";function t(e,t){e.lazyload({skip_invisible:!1,container:t,failure_limit:10,load:function(){f(this).addClass("loaded")}})}var n,r,i,a;App.isSplitScreen&&App.isDesktop?(n=f(".content-panel"),r=f(".resources-panel"),i=n.find(e),a=r.find(e),t(i,n),t(a,r)):t(f(e),void 0)},d.initFoundation=function(){e.foundation()},d.launchGetCitationModal=function(){f('[data-reveal-id="getCitation"]').click(function(){f("#getCitation").foundation("reveal","open")})},d.initDatePicker=function(){App.isAdvancedSearch&&f("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").datepicker()},d.shareFiguresAndTables=function(){App.isSplitScreen&&(f.ajaxSetup({cache:!0}),f.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"{your-app-id}",version:"v2.5"}),f("#loginbutton,#feedbutton").removeAttr("disabled")}))},d.getParameterByName=function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t&&t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):""},d.InitializeLiveFilter=function(){f(".pg_featuredtopic").length&&f("#filter_input").fastLiveFilter("#filter_list",{timeout:40})},d.GridListToggle=function(){f(".js-list-view-toggle").click(function(){f(".featured-topics-content_wrap").removeClass("grid-view").addClass("list-view")}),f(".js-grid-view-toggle").click(function(){f(".featured-topics-content_wrap").removeClass("list-view").addClass("grid-view")})},d.commentCharactersRemaining=function(){f(".content-form--comment").length&&(f("textarea").keyup(function(){var e=3600-(e=f(this).val().length);f(".charactersRemaining").text(e)}),f(".comment-form--affiliation input").keyup(function(){var e=200-(e=f(this).val().length);f(this).prev(".char-limit-text").text(e+" characters remaining")}),f(".comment-form--degrees input").keyup(function(){var e=25-(e=f(this).val().length);f(this).prev(".char-limit-text").text(e+" characters remaining")}),f(".comment-form--comment-title input").keyup(function(){var e=140-(e=f(this).val().length);f(this).prev(".char-limit-text").text(e+" characters remaining")}))},d.setArticleToolboxWidths=function(){var e;(App.isAbstract||App.isMag)&&((e=f(".abstract-toolbar, .magazine-toolbar").children("div:has(a), a")).length%2==0?e.each(function(){var e=f(this);(e.is("a")?e:e.find("a.toolbar-tool")).css("width","50%")}):e.last().css("width","100%"))},d.linkedContentToolbarDisplay=function(){f("div.linked-content-controls").length&&setTimeout(function(){f(this).closest(".linked-content-controls .tab-no-content").length<2&&f(".trigger-text").addClass("visuallyhidden")},3e3)},d.trendMDtitle=function(){f("#trendmd-suggestions").length&&(f("#trendmd-suggestions").prev(".thm-col-sec").addClass("js-TMDtitle-display"),f("#trendmd-suggestions").bind("DOMSubtreeModified",function(){f("#trendmd-suggestions").prev(".thm-col-sec").removeClass("js-TMDtitle-display")}))},d.passiveEventListener=function(){var t=!1;try{var e={get passive(){t=!0}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t=!1}window.addEventListener("scroll",this,!!t&&{passive:!0})},"object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(e){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},alert('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}function x(e){var t,n,r,i;App.isSearch||App.isCollection||d.saveDomainCookie(e,"",document.domain),App.isSearch&&(SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",void 0,!0,!0),n=App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedSiteSearch",App.isIndividual||d.saveDomainCookie(n,"",document.domain),""===(r=d.getCookie(n))&&(t=f(".selected-save-search"),n=f(".selected-save-search-txt"),i=f(".save-search-link"),n.text(""),t.hide(),i.show()),i=d.getCookie(e),document.referrer.indexOf("/advanced-search")<0&&""===r&&(r=d.formatSearchQueryToSaveToLocalStorage(window.location.search),d.saveDomainCookie(e,r,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)),0<document.referrer.indexOf("/advanced-search")&&""===i&&(i=d.formatSearchQueryToSaveToLocalStorage(window.location.search),d.saveDomainCookie(e,i,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)))}d.init=function(){var e,t,n,r,i,a,o,s,l,c,u="persistentSearchFilters";f(".js-showAll").click(function(e){e.preventDefault(),f(".open-close-all").find(".collapsible-list-header").each(function(){f(this).next().hasClass("collapsible-list-target-is-active")||f(this).trigger("click")})}),f(".js-hideAll").click(function(e){e.preventDefault(),f(".open-close-all").find(".collapsible-list-header").each(function(){f(this).next().hasClass("collapsible-list-target-is-active")&&f(this).trigger("click")})}),d.initFoundation(),!App.isJournal&&!App.isNetworkHome||(e=f(".editors-choice").find(".widget-SelfServeContent")).find("*").length<10&&(0===(void 0!==(e=e.text())?f.trim(e):1).length&&f(".movable-ad-target").prepend(f(".movable-ad"))),(App.isIssue||App.isMag||App.isSplitScreen&&App.isFreeArticle||App.isCollection)&&f(".movable-ad-target").last().prepend(f(".movable-ad")),d.initLazyLoad(),v(),jQuery(document).ready(function(){SCM.AsyncAds.LoadJobsAd(".SCM-SharedWidgets-AsyncJobsAdLoader","data-url","data-params","POST")}),App.isAnyArticle&&0===f(".widget-ToolboxPermissions").length&&(f(".toolbar-citation").addClass("permissions-hidden"),f(".toolbar-permissions-wrap").hide()),App.isMag&&!scmquery(".article-pdf-only")&&f(".article-full-text > p").first().html(function(e,t){return t.replace(/^[^a-zA-Z0-9'"<]*([a-zA-Z0-9])/g,'<span class="drop-cap">$1</span>')}),App.isAbstract&&f(".article-content > .full-text-link").stick_in_parent(h),(App.isMag||App.isChannel)&&(t=f(".social-share"),App.isMag&&t.stick_in_parent(h),App.isChannel&&t.stick_in_parent(m)),d.stickSearchFacets(),App.isNetworkHome&&SCM.JSUtility.toggleHoverState(".site-link-channel.has-sub-nav"),d.searchFacetsMoreLess(),SCM.EventEmitter.subscribe("viewport-changed",function(){googletag.pubads().refresh(App.Ads.slots,{changeCorrelator:!1})}),App.isAnyArticle&&f(".errata-links.retracted").length&&f(".content-panel, .article-content").addClass("is-retracted-article"),App.isSplitScreen&&(e=f(".footer"),t=f(".content-panel"),e.appendTo(t)),App.isSplitScreen&&(i=f(".ad-riser--dismiss"),n=i.closest(".ad-riser-wrap"),i.click(function(){n.addClass("closed")})),g(),r=["?",".",":",";",","],f(".issue-view-tab .article--title a .subtitle").each(function(e,t){var n=t.previousSibling.textContent.slice(-1);-1<r.indexOf(n)&&f(t).addClass("subtitle-no-colon")}),SCM.JSUtility.toggleVisibility(),SCM.JSUtility.accordion(),d.GridListToggle(),d.commentCharactersRemaining(),d.setArticleToolboxWidths(),d.linkedContentToolbarDisplay(),d.trendMDtitle(),d.passiveEventListener(),d.equalizeJustPublished(),App.isAnyArticle&&(a=f(".js-search-open-multimedia-by-default").attr("showContentByDefault"),SCM.JSUtility.toggleTabs(".linked-content-controls",".linked-content-trigger",".linked-content-tab",".doesnt-exist-tab",!0),SCM.JSUtility.removeEmptyTabs(".linked-content-trigger"),i=f(".linked-content-controls"),o=f(".linked-content-toolbar"),i.children().not(".tab-no-content").length&&o.addClass("activated"),"True"==a&&(o=f('a[href="#author-interviews-tab"]'),a=f('a[href="#more-multimedia-tab"]'),o.hasClass("tab-no-content")?a.hasClass("tab-no-content")||a.trigger("click"):o.trigger("click"))),App.isAnyArticle&&scmquery(".article-pdf-only")&&p.addClass("is-backfile"),a=".collapsible-list-header",o=".collapsible-list-target",$container=f(".collapsible-list"),$trigger=f(a),$target=f(o),$trigger.next($target).attr("aria-hidden",!0),$trigger.click(function(e){e.preventDefault();var t=f(this),e="true"!==t.attr("aria-selected");t.next($target).toggleClass("collapsible-list-target-is-active"),t.attr("aria-selected",e),$target.next().attr("aria-hidden",!e)}),f(".collapsible .collapsible-header").each(function(){var e=f(this),t="collapsible-"+e.index();e.nextUntil(".collapsible-header").wrapAll('<div id="'+t+'" class="collapsible-content" aria-hidden="true">');var n=e.next();e.wrapInner('<button aria-expanded="false" aria-controls="'+t+'">'),e.children("button").on("click",function(e){e.preventDefault();var t=f(this),e="false"===t.attr("aria-expanded");t.attr("aria-expanded",e),n.attr("aria-hidden",!e)})}),f(".clone-target").append(f(".clone-source").clone()),App.isSplitScreen&&(SCM.JSUtility.addStateToggle(".toolbar-share-more-link",".toolbar-share-more"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){b()}),SCM.EventEmitter.subscribe("viewport-changed",function(){b()}),s=f(".toolbar .toolbar-pdf"),l=f(".toolbar .toolbar-pdf-wrap"),0===s.length&&l.hide()),s=u,App.isCollection&&(SCM.EventEmitter.subscribe("HeaderAdFired",function(){w()}),SCM.EventEmitter.subscribe("viewport-changed",function(){w()}),l=d.formatSearchQueryToSaveToLocalStorage(window.location.search),d.saveDomainCookie(s,l,document.domain),SCM.SiteJS.saveDomainCookie("currentSiteCount",App.currentSiteCount,document.domain)),x(u),(App.isAbstract||App.isMag)&&SCM.JSUtility.addStateToggle(".toolbar-trigger .toolbar-share-more-link",".toolbar-trigger .toolbar-share-more"),App.isAbstract&&SCM.FirstPagePreview.init(),(App.isJournal||App.isIssue)&&SCM.JSUtility.toggleTabs(".most--links",".most--trigger",".most--tab",".most-viewed-trigger"),f(document).ajaxComplete(function(){(App.isAbstract||App.isSplitScreen)&&App.isFreeArticle&&y(!0)}),(c=f(".js-publication-dd-selfserve").find(".js-selfserve-publication")).on("click",function(){c.next("nav").toggleClass("hide"),f("div.site-link.has-sub-nav").toggleClass("target-active")}),f("body").on("keydown",function(e){"Escape"==e.key&&(c.next("nav").addClass("hide"),f("div.site-link.has-sub-nav").removeClass("target-active"))})},d.windowLoadInit=function(){var t,e;d.initDatePicker(),d.launchGetCitationModal(),d.shareFiguresAndTables(),d.InitializeLiveFilter(),App.isMag&&(t=f("#magazine-bta"),!App.isMobile||App.isFreeArticle?(e={siteName:App.MagazineView.siteName,siteId:App.MagazineView.siteId,journalId:App.MagazineView.journalId,adDisplay:App.MagazineView.adDisplay,adSection:App.MagazineView.adSection,adPosition:App.MagazineView.adPosition,fromGoogle:App.MagazineView.fromGoogle,controlId:App.MagazineView.controlId},f.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),v(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})):t.remove())}}(SCM.SiteJS=SCM.SiteJS||{},jQuery),function(r,e,t){t.ready(function(){App.Toolbar.init(),App.SplitScreen.init(),SCM.SiteJS.init(),App.Global.init(),SCM.PDFAccess.init(),App.ArticleTopInfo.init(),App.Access.init(),SCM.SolrSearch.init(),SCM.IssuePage.init(),App.MySubscriptions.init(),App.Collection.init(),App.SearchAutoComplete.init(),SCM.InstitutionOpenUrl.init(),App.UserComment.init(),App.MyEmailAlerts.init(),App.UberContent.init(),SCM.gdprCookieBanner.init("CookieBanner_Closed"),SCM.AudioPlayer.init(),App.AudioPlayerAMA.init(),App.MostViewedCited.init(),SCM.LibLynx.init(),SCM.SeamlessAccess.init(),App.SeamlessAccess.init()}),e.on("load",function(){SCM.SiteJS.windowLoadInit(),App.Global.windowLoadInit(),SCM.IssuePage.windowLoadInit()}),e.on("resize",function(){App.updateAppVariables(),App.notifyViewportChange(),SCM.SiteJS.updateEqualizeJustPublished()}),t.ajaxComplete(function(e,t,n){SCM.SiteJS.initFoundation(),App.isSearch&&(SCM.SiteJS.searchFacetsMoreLess(),SCM.SiteJS.stickSearchFacets(),-1<n.url.indexOf("SearchResults")&&SCM.SiteJS.initLazyLoad(".search-results .lazy")),-1<n.url.indexOf("PersonalizedContent")&&(setTimeout(function(){(App.isAbstract||App.isCollection||App.isMag)&&r(".widget-PersonalizedContent").each(function(){0<r(this).find(".ymal--content").length&&r(this).addClass("loaded")})},500),!App.supportsFlexbox&&App.isJournal&&0===r(".no-equal-heights").length&&"jamanetworkopen"!==r("body").data().sitename&&SCM.JSUtility.equalHeights(".journal-contents .ymal--item",640),App.supportsFlexbox||!App.isAnyArticle&&!App.isIssue||SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640))})}(jQuery,jQuery(window),jQuery(document)),window.dataLayer=window.dataLayer||[],SCM=SCM||{},SCM.AMA=SCM.AMA||{};var getValue=function(e,t){if("array"!==t)return e=e.toString().replace(/%/g,"%25"),removeExtraTags(decodeURIComponent(e));var e=e.split(","),n=[];return e.forEach(function(e){e=removeExtraTags(decodeURIComponent(e.trim()));""!==e&&n.push(e)}),0===n.length?"":n},removeExtraTags=function(e){var e=e.replace(/<(.*)>.*<\/(.*)>/gi,"");return e=(e=e.replace(/&#?(([0-9a-z]){1,4});/gi,"")).replace(/  /g," ")};SCM.AMA.DataLayer=function(a){return{ExecuteDataLayer:function(){var r={};a(".tagmanagervalue").each(function(){var e=a(this),t=e.data("value"),n=e.data("type"),n=getValue(t,n);""!==n&&(r[e.data("attribute")]=n)});var e=t(".figure-table-wrapper",".figure-label",".figure-title");e&&e.length&&0<a.trim(e).length&&(r.arrArticleFigures=e.map(function(e){return removeExtraTags(e.trim())}));e=t(".figure-table-wrapper",".table-label",".table-title");e&&e.length&&0<a.trim(e).length&&(r.arrArticleTables=e.map(function(e){return removeExtraTags(e.trim())}));return r.event="page view",r}};function t(e,n,r){var i=[];return jQuery(e).each(function(){var e=a(this).find(n).html(),t=a(this).find(r).html();void 0===e&&void 0===t||(void 0===e?i.push(t):void 0===t?i.push(e):i.push(e+" "+t))}),i}}(jQuery),function(e){e.push=function(e,t,n){var r={},n=getValue(t,n);n&&(r[e]=n,dataLayer.push(r))}}(SCM.AMA.DataLayerAsync=SCM.AMA.DataLayerAsync||{},jQuery),$("document").ready(function(){var e=SCM.AMA.DataLayer.ExecuteDataLayer();dataLayer.push(e)});var App=App||{},SCM=SCM||{};SCM.CollectionFacets={},SCM.CollectionFacets.defaults={controller:"Solr",action:"ArticleBrowseSearchResults",instanceName:"AMA_ArticleBrowseSearchResults",updateTargetSelector:"#collection--topic-search"},function(e,f){var p=f("#dropdown-publication .dropdown-chk-item").length,h=f("#dropdown-article-type .dropdown-chk-item").length,r=f(".save-preferences-confirm");function s(){f(".drop-selected-publication").on("click",function(e){e.stopPropagation(),f("#dropdown-article-type").hide(),f("#dropdown-publication").toggle("show")}),f(".drop-selected-article-type").on("click",function(e){e.stopPropagation(),f("#dropdown-publication").hide(),f("#dropdown-article-type").toggle("show")}),f(document).on("click",function(e){var t=f(".dropdown-content");t.is(e.target)||0!==t.has(e.target).length||t.hide()}),f(".btn-apply-publication-facets, .btn-apply-article-type-facets").on("click",function(e){e.preventDefault();e=function(){for(var e=f("#dropdown-publication .dropdown-chk-item:checked"),t=f("#dropdown-article-type .dropdown-chk-item:checked"),n=/(page=[^&]*)/,r=/(f_SiteID=[^&]*[&]?)/,i=/(f_ArticleTypeDisplayName=[^&]*[&]?)/,a=m(e),o=m(t),s=a.join("AND"),a=o.join("AND"),l="",o=f("#dropdown-publication .dropdown-chk-item")[0],c=f(o).data("url").split("&"),u=0;u<c.length;u++){var d=c[u].replace(n,"").replace(r,"").replace(i,"");""!==d&&(l+="&"+d)}l="?"+l.substring(1),e.length!==p&&0<s.length&&(l+="&f_SiteID="+s);t.length!==h&&0<a.length&&(l+="&f_ArticleTypeDisplayName="+a);return l}();window.location.href=e}),f("#dropdown-publication .dropdown-item, #dropdown-article-type .dropdown-item").on("click",function(e){var t,n,r,i=f(this).parent().attr("id");0<=i.indexOf("dropdown-publication")?(t=f("#dropdown-publication .dropdown-chk-item:checked"),n=f("#dropdown-publication-checkall"),r=f("#dropdown-publication-uncheckall"),a(t,p,n,r)):0<=i.indexOf("dropdown-article-type")&&(n=f("#dropdown-article-type .dropdown-chk-item:checked"),r=f("#dropdown-article-type-checkall"),i=f("#dropdown-article-type-uncheckall"),a(n,h,r,i))}),f("#dropdown-publication-checkall, #dropdown-article-type-checkall").on("click",function(){var e=f(this).attr("id");f(this).is(":checked")?0<e.indexOf("publication")?(f("#dropdown-publication-uncheckall").prop("checked",!1),f("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!0)):0<e.indexOf("article-type")&&(f("#dropdown-article-type-uncheckall").prop("checked",!1),f("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!0)):0<e.indexOf("publication")?f("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!1):0<e.indexOf("article-type")&&f("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!1)}),f("#dropdown-publication-uncheckall, #dropdown-article-type-uncheckall").on("click",function(){var e=f(this).attr("id");f(this).is(":checked")&&(0<e.indexOf("publication")?(f("#dropdown-publication-checkall").prop("checked",!1),f("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!1)):0<e.indexOf("article-type")&&(f("#dropdown-article-type-checkall").prop("checked",!1),f("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!1)))}),f("#searchedTerm .close").on("click",function(){var e=window.location.search.replace(/(([?|&]{1})q=[^&]*)/,"");window.location.href="?"+e.substring(1)})}function a(e,t,n,r){e.length===t?(n.prop("checked",!0),r.prop("checked",!1)):0<e.length&&e.length<t?(n.prop("checked",!1),r.prop("checked",!1)):0===e.length&&(r.prop("checked",!0),n.prop("checked",!1))}function m(e){var t=[];if(0<e.length)for(var n=0;n<=e.length-1;n++){var r=f(e[n]).data("value").toString();0<r.length&&(r=r.replace(/( \([0-9]*\))/,"").replace(/\s/g,"+"),-1===t.indexOf(r)&&t.push(encodeURI(r).replace("&",encodeURIComponent("&"))))}return t}function l(e,t,n,r){e&&(n=n,1===t.length?n=f(t[0]).data("title"):1<t.length&&t.length<r&&(n="Multiple Selected"),e.text()!==n&&e.text(n.replace(/( \([0-9]*\))/,"")))}function c(){f("#tbAbsrSolrSearch").keydown(function(e){var t;13===e.keyCode&&(null===(t=f("#tbAbsrSolrSearch").val().trim())||""===t?alert("Please enter a term to perform search"):function(e,t){e.preventDefault();var n=window.location.search,e=n.indexOf("q=");-1<e&&(n=(n=-1===(r=n.indexOf("&",e))?n.substring(0,e):n.substring(0,e)+n.substring(r+1)).replace(/[\?&]$/,""));{var r;0===n.length&&(r=f("h1:first").find(".header--name").text(),n="?fl_ContentType=Article&fl_Categories="+encodeURIComponent(r))}0<t.length&&(n+="&q="+t);window.location=n}(e,t=encodeURIComponent(t)))})}function t(){var e=[];f(".category-list-item.followed").each(function(){e.push(f(this).data("categoryid"))});var t=f(".follow-link").data("categoryid"),n=!1;t||(t=f(".unfollow-link").data("categoryid"),n=!0),f.ajax({url:"/AMA/UpdateMultipleCollectionFollowStatus",type:"POST",data:{currentPageCategoryId:t||0,isFollowed:n,categoryIdsToUpdate:e.toString()},success:function(e){var t;e&&(f(".collection-follow-links").parent().html(e),t=f("#weeklyAlert"),e=f("#monthlyAlert"),0<t.length&&0<e.length&&(t=t.is(":checked"),e=e.is(":checked"),f.ajax({url:"/AMA/UpdateManageInterestUserAlerts",type:"POST",data:{signupForWeeklyAlert:t,signupForMonthlyAlert:e},success:function(e){!e.Success||0<(e=f(".save-preferences-confirm")).length&&e.show()},error:function(e){alert("Cannot update alert(s) at this time.")}})),f(".manage-interests-modal").foundation("reveal","close")),d(),y()},error:function(e){alert("Cannot update collection follow status, please try again")}})}var n=!1;e.bindEvents=function(){n||y()};var i,o,u=[];function d(){u=[],f(".manage-interests--categories").find(".followed").each(function(){u.push(f(this).data("categoryid"))}),i=f("input#weeklyAlert").prop("checked"),o=f("input#monthlyAlert").prop("checked")}function g(){var e=f(".manage-interests--categories").find(".followed");e.removeClass("followed"),e.parent("li").prop("style",""),null!=i&&f("input#weeklyAlert").prop("checked",i),null!=o&&f("input#monthlyAlert").prop("checked",o);for(var t=0;t<u.length;t++){var n=u[t];f(".manage-interests--categories").find(".category-list-item[data-categoryid="+n+"]").addClass("followed")}}function y(){n=!0,d(),f(".follow-link, .unfollow-link").off("click"),f(".no-access--alerts-input").off("change"),f(".manage-interests-link").off("click"),f(".manage-interests-link-no-access").off("click"),f(".category-list-item").off("click"),f(".manage-interests--save-preferences .save-preferences-btn").off("click"),f(".alert-input input").off("click"),f(".follow-link, .unfollow-link").on("click",function(e){e.preventDefault(),App.isIndividual?v(f(this)):f(".js-modal-follow-collection-reveal").foundation("reveal","open")}),f(".manage-interests-link").on("click",function(e){e.preventDefault(),g(),f(".manage-interests-modal").foundation("reveal","open"),f(".followed").parent().css("list-style-type","disc").css("color","#000")}),f(".manage-interests-link-no-access, .affinity-alert-signup").on("click",function(e){e.preventDefault(),App.isIndividual?(g(),f(".manage-interests-modal").foundation("reveal","open"),f(".followed").parent().css("list-style-type","disc").css("color","#000")):f(".js-modal-follow-collection-reveal").foundation("reveal","open")}),f(".category-list-item").on("click",function(e){var t=f(this),n=t.parent();t.toggleClass("followed"),t.hasClass("followed")?n.css("list-style-type","disc").css("color","#000"):n.css("list-style-type","circle").css("color","#ccc");n=f(".manage-interests--save-preferences .save-preferences-btn");n.hasClass("enabled")||n.addClass("enabled"),0<r.length&&r.hide()}),f(".manage-interests--save-preferences .save-preferences-btn").on("click",function(e){f(this).hasClass("enabled")&&t()}),f(".alert-input input").on("click",function(e){var t=f(".manage-interests--save-preferences .save-preferences-btn");t.hasClass("enabled")||t.addClass("enabled"),0<r.length&&r.hide()})}function v(e){var t=e.data("categoryid");f.ajax({url:"/AMA/UpdateCollectionFollowStatus",type:"POST",data:{categoryId:t,isFollowed:e.hasClass("follow-link")},success:function(e){!1!==e&&(f(".collection-follow-links").parent().html(e),f(".manage-interests-modal").find("[data-categoryid='"+t+"']").toggleClass("followed"),(e=f(".manage-interests--save-preferences")).hasClass("enabled")||e.addClass("enabled"),y())},error:function(e){alert("Cannot update collection follow status, please try again")}})}e.setInitialCategories=function(){g()},e.init=function(e){var t,n,r,i,a,o;y(),(App.isCollection||App.isSplitScreen||App.isMyAccount)&&(t="",r=window.location.search.match(/[?|&]{1}q=([^&]*)/),t=r?decodeURIComponent(r[1]):t,a=t,n=f("#tbAbsrSolrSearch"),r=f("#searchedTerm"),0<a.length?(n.hide(),r.show(),r.html('<span class="btn">'+a+'<a href="#" class="close">X</a></span>')):(n.show(),r.hide()),s(),c(),SCM.JSUtility.addStateToggle("#narrow-filter",".collection-facets--wrap",void 0,!0,!0),0<=document.referrer.indexOf("/jamanetworkopen")?0<(i=f("#facet-jama-network-open")).length&&(i.prop("checked",!0),l(f(".drop-selected-publication"),[i],"All",p)):(t=f("#dropdown-publication .dropdown-chk-item:checked"),o=f("#dropdown-article-type .dropdown-chk-item:checked"),n=-1===(a=window.location.search).indexOf("SiteID"),r=-1===a.indexOf("ArticleTypeDisplayName"),i=n||t.length===p,a=r||o.length===h,n&&f("#dropdown-publication .dropdown-item input:checkbox").prop("checked",!0),i&&f("#dropdown-publication-checkall").prop("checked",!0),r&&f("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!0),a&&f("#dropdown-article-type-checkall").prop("checked",!0),l(f(".drop-selected-publication"),t,"All",p),l(f(".drop-selected-article-type"),o,"All Article Types",h)),o=f(".follow-link"),App.isIndividual&&0<o.length&&(0<document.referrer.indexOf("/login/account/")||0<document.referrer.indexOf("/oauthsignin"))&&v(o),App.isMyAccount&&f(".followed").parent().css("list-style-type","disc").css("color","#000"))}}(App.Collection=App.Collection||{},jQuery);var SCM=SCM||{};SCM.AsyncAds=SCM.AsyncAds||{},SCM.AsyncAds=function(){return{LoadHeaderAd:loadHeaderAd,LoadAds:loadAds,LoadCollectionAds:loadCollectionAds,LoadJobsAd:loadJobsAd};function loadAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),++firedAds===totalAds&&SCM.EventEmitter.publish("AdFired")},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function loadHeaderAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),SCM.EventEmitter.publish("HeaderAdFired")},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function loadCollectionAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),++firedAds===totalAds&&SCM.EventEmitter.publish("CollectionAdsFired")},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function loadJobsAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e)},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function buildParameters(e){var t=JSON.parse(e),n=t.parameters,e=t.dynamicParameters;return void 0!==e&&void 0!==e.localParams&&"[REPLACE_WITH_LOCAL]"===e.localParams&&(t=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage(),e.localParams=t,n.Items=JSON.stringify(t)),n}}();var App=App||{};!function(e,s){App.UserCommentConstants={},App.UserCommentConstants={limitedTextClassSelector:".comment-item--text-limited",readMoreLinkClassSelector:".comment-item--read-more-link",remainingCommentClassSelector:".comment-item--text-remaining",disclosureClassSelector:".comment-item--disclosure-collapse",expandAllCollapseLinkClassSelector:".comment-expand-all",separatorClassSelector:".comment-item--separator-collapse",commentBtnClassSelector:".comment-btn",disclosureInputClassSelector:".disclosure-input",noAccessModalClassSelector:".js-modal-user-comment-reveal",accessibleShowClass:"accessible-show",ellipsisClass:"ellipsis",expandAllText:"EXPAND ALL",collapseText:"COLLAPSE",readLessText:"READ LESS",readMoreText:"READ MORE",isChecked:"is-checked",checked:"checked",potentialConflicts:"potentialConflicts"};var l=s(".comment-form-modal"),c=s(App.UserCommentConstants.disclosureInputClassSelector),i=l.find("#Title"),a=l.find("#Comment"),o=l.find(".submit-errors"),u=s(".submit-error-list"),r=s(".please-wait"),d=s("#divCommentSubmissionModal");function t(e){var t=e.text(),n=e.hasClass("comment-expand-all"),r=e.hasClass("comment-item--read-more-link"),i=r?e.parent():"",r={limitedText:n?s(App.UserCommentConstants.limitedTextClassSelector):i.find(App.UserCommentConstants.limitedTextClassSelector),readMoreLink:n?s(App.UserCommentConstants.readMoreLinkClassSelector):e,remainingComment:n?s(App.UserCommentConstants.remainingCommentClassSelector):i.find(App.UserCommentConstants.remainingCommentClassSelector),disclosure:n?s(App.UserCommentConstants.disclosureClassSelector):i.find(App.UserCommentConstants.disclosureClassSelector),separator:n?s(App.UserCommentConstants.separatorClassSelector):i.find(s(App.UserCommentConstants.separatorClassSelector)),expandAllCollapseLink:n?e:s(App.UserCommentConstants.expandAllCollapseLinkClassSelector),isExpandAllCollapseLink:n,isReadMoreLink:r};t===App.UserCommentConstants.expandAllText||t===App.UserCommentConstants.readMoreText?function(e){e.isExpandAllCollapseLink&&e.expandAllCollapseLink.text(App.UserCommentConstants.collapseText);e.limitedText.removeClass(App.UserCommentConstants.ellipsisClass),e.remainingComment.addClass(App.UserCommentConstants.accessibleShowClass),e.separator.addClass(App.UserCommentConstants.accessibleShowClass),e.disclosure.addClass(App.UserCommentConstants.accessibleShowClass),e.readMoreLink.text(App.UserCommentConstants.readLessText),e.isReadMoreLink&&s(App.UserCommentConstants.readMoreLinkClassSelector).text().indexOf(App.UserCommentConstants.readMoreText)<0&&e.expandAllCollapseLink.text(App.UserCommentConstants.collapseText)}(r):t!==App.UserCommentConstants.collapseText&&!App.UserCommentConstants.readLessText||function(e){e.isExpandAllCollapseLink&&e.expandAllCollapseLink.text(App.UserCommentConstants.expandAllText);e.limitedText.addClass(App.UserCommentConstants.ellipsisClass),e.remainingComment.removeClass(App.UserCommentConstants.accessibleShowClass),e.separator.removeClass(App.UserCommentConstants.accessibleShowClass),e.disclosure.removeClass(App.UserCommentConstants.accessibleShowClass),e.readMoreLink.text(App.UserCommentConstants.readMoreText),e.isReadMoreLink&&e.expandAllCollapseLink.text()===App.UserCommentConstants.collapseText&&e.expandAllCollapseLink.text(App.UserCommentConstants.expandAllText)}(r)}function n(){var e=s(".comment-form-submit-btn"),t=l.find(s(".author-name")).text(),n=l.find(s("input#Degrees")).val();s.ajax({type:"POST",url:"/Content/SubmitUserComment",data:{author:t+=""!==n?", "+n:"",affInstitutions:l.find(s("input#AffInstitution")).val(),disclosure:l.find(s("input#Disclosure")).val(),title:l.find("input#Title").val(),comment:l.find("textarea#Comment").val(),resourceType:l.find(e).data("type"),resourceId:l.find(e).data("id"),recaptchaChallenge:"",recaptchaResponse:"",instanceName:l.find(e).data("instance")},success:function(e){e.Success?(s(".comment-form-modal").hide(),s(App.UserCommentConstants.commentBtnClassSelector).show(),function(){l.find("input, textarea").val(""),s("input[type='radio']").data(App.UserCommentConstants.isChecked,!1).prop(App.UserCommentConstants.checked,!1),c.hide(),u.empty();var e=l.find("textarea"),t=l.find(".comment-form--affiliation input"),n=l.find(".comment-form--degrees input"),r=l.find(".comment-form--comment-title input"),i=e.attr("maxlength"),a=t.attr("maxlength"),o=n.attr("maxlength"),e=r.attr("maxlength");l.find(".charactersRemaining").text(i),t.prev(".char-limit-text").text("Limit "+a+" characters"),n.prev(".char-limit-text").text("Limit "+o+" characters"),r.prev(".char-limit-text").text("Limit "+e+" characters")}()):alert("Comments not saved.  Please Try Again."),r.hide(),d.foundation("reveal","open")},error:function(e){r.hide(),alert("Comments not saved.  Please Try Again.")}})}function f(){s(".comment-expand-all, .comment-item--read-more-link").on("click",function(e){e.preventDefault(),t(s(this))}),s("#modal-opener").on("click",function(){App.isIndividual?(s(App.UserCommentConstants.commentBtnClassSelector).hide(),l.show(),s(".toolbar-comments-jumplink").attr("href","#user-comments-modal")):s(App.UserCommentConstants.noAccessModalClassSelector).foundation("reveal","open")}),s(".disclosure-radio label").on("click",function(e){e.preventDefault();var t=s("#"+s(this).attr("for")),e=t.attr("name");t.data(App.UserCommentConstants.isChecked)||(t.data(App.UserCommentConstants.isChecked,!0),t.prop(App.UserCommentConstants.checked,!0).change()),e===App.UserCommentConstants.potentialConflicts&&t.data(App.UserCommentConstants.isChecked)?c.show():c.hide(),s("input[type='radio']").not("#"+s(this).attr("for")).data(App.UserCommentConstants.isChecked,!1).prop(App.UserCommentConstants.checked,!1)}),s(".comment-form-submit-btn").on("click",function(e){e.preventDefault(),function(){var e=!0,t="";u.empty();var n=s("#potentialConflicts"),r=s("#noConflicts");return n.is(":checked")||r.is(":checked")?n.is(":checked")&&""===s("input#Disclosure").val().trim()&&(t+="<li>Describe your Conflict of Interest</li>",e=!1):(t+="<li>Conflicts of Interest Disclosure</li>",e=!1),""===i.val().trim()&&(t+="<li>Comment Title</li>",e=!1),""===a.val().trim()&&(t+="<li>Comment</li>",e=!1),e||""===t?o.hide():(u.append(t),o.show()),e}()&&(r.show(),n())}),s(".toolbar-comments, .artmet-comments-link").on("click",function(e){var t=this.href.split("#")[1];e.preventDefault(),(App.isAbstract||App.isMag||App.isChannelMag)&&(e=s("#"+(e=t)).offset().top-106,s("html, body").animate({scrollTop:e},500)),App.isIndividual&&s("#"+t).click()}),s(".content-comment-link").on("click",function(e){e.preventDefault(),s(".tab-nav-comments").click(),App.isIndividual&&s("#modal-opener").click()})}e.init=function(){App.isAnyArticle&&f()}}(App.UserComment=App.UserComment||{},jQuery);var App=App||{};!function(e,a,s){var t=window.location.protocol+"//"+window.location.host,n=s("#hfSolrAutoSuggestMinimumCharactersLength").val(),l="JN Learning";function o(e,t){return function(){t.apply(e,arguments)}}function r(e,t,n,r,i){this.searchInputControlId=document.getElementById(e),this.searchInputHintControlId=document.getElementById(t),this.autoCompleteResultsControlId=document.getElementById(n),this.isMicrosite=r,null!==i?(this.siteFilterDropDownSelectID=document.getElementById(i),this.siteFilterDropDownSelectID&&this.siteFilterDropDownSelectID.addEventListener("change",o(this,this.filterSuggestions),!1)):this.siteFilterDropDownSelectID=!1,null!==this.searchInputControlId&&(this.searchInputControlId.addEventListener("keydown",o(this,this.interceptKeys),!1),this.searchInputControlId.addEventListener("input",a.debounce(o(this,this.evaluateTerms),250),!1),s(this.searchInputControlId).on("blur",o(this,this.hideResultsList)),s(this.searchInputControlId).on("focus",o(this,this.showResultsList)))}(r.prototype={solrUrl:"/solr/SolrAutoSuggest",baseURL:t,inputTerms:!1,termsArray:!1,baseTerms:!1,terms:!1,results:[],selectedResult:-1,contentID:!1,isSearching:!1,noResultsFound:!1}).filterSuggestions=function(){this.selectedResult=-1,this.inputTerms.length>=n&&this.getSuggestions()},r.prototype.evaluateTerms=function(){if(this.resetSelection(),this.inputTerms=this.searchInputControlId.value.toLowerCase(),0===this.inputTerms.length)return this.noResultsFound=!1,this.isSearching=!1,void this.resetAutoComplete();this.inputTerms.length>=n&&(0===this.results.length||-1===this.results[0].value.indexOf(this.inputTerms))&&!this.isSearching&&this.getSuggestions(),(this.terms.length<=1||this.searchInputControlId.value!==this.inputTerms)&&this.clearHint()},r.prototype.getSiteURL=function(e,t){return e+(t?"&"+t:"")},r.prototype.getLearningURL=function(e,t){return t?t+e:"hd=learning&allSites=1"+e+"&f_HasCME=true"},r.prototype.getSearchParams=function(){var e="&SearchSourceType=24";if(this.siteFilterDropDownSelectID){var t=s(".cs-selected").data("value"),n=SCM.SiteJS.getCookie("persistentSearchFilters");return void 0!==t?"J*"===t?this.getSiteURL(e,"allSites=1"):this.getSiteURL(e,"f_SiteID="+t):n?this.getSiteURL(e,n):this.getSiteURL(e,"allSites=1")}return"allSites=1"+e},r.prototype.getSiteID=function(){var e=this.contentID;return e=e&&"j"===e.toLowerCase().substring(0,1)?e.substring(1):e},r.prototype.getsiteSID=function(){var e,t=!1;return!this.siteFilterDropDownSelectID||-1===(e=s(this.siteFilterDropDownSelectID,"option:selected").val()).indexOf("*")&&(t=e),t},r.prototype.getSuggestions=function(){var t=this;t.contentID=t.getsiteSID(),t.isSearching=!0,s.ajax({url:t.solrUrl,data:t.contentID?{searchTerm:t.inputTerms,SiteID:t.getSiteID()}:{searchTerm:t.inputTerms},success:function(e){e=e.SemanticFilterTopics;t.isSearching=!1,0<e.length?t.formatSuggestions(e):(t.noResultsFound=!0,t.resetAutoComplete())},cache:!0})},r.prototype.formatSuggestions=function(e){var t=e;this.results=[];var n=s("#"+this.siteFilterDropDownSelectID.id+" option:selected").text(),r=s(".cs-placeholder").text(),i="";if(0<t.length)if(this.inputTerms&&-1!==t[0].Key.indexOf(this.inputTerms)){for(var a=0;a<t.length;a+=1){var o=this.baseURL,i=n===l||n!==r&&r===l?"/learning/searchresults?q=":"/searchresults?q=",o={value:t[a].Key,url:o+i+encodeURIComponent(t[a].Key)+"&"+this.getSearchParams(),position:"sr"+this.autoCompleteResultsControlId.id+(a+1)};this.results.push(o)}this.setHint(t[0].Key),this.appendResults()}else this.noResultsFound||this.inputTerms||this.getSuggestions();else this.resetAutoComplete()},r.prototype.setHint=function(e){this.searchInputControlId.value===this.inputTerms&&(this.searchInputHintControlId.value=e)},r.prototype.clearHint=function(){this.searchInputHintControlId.value=""},r.prototype.appendResults=function(){var e="";"term-list at-term-list"!==this.autoCompleteResultsControlId.className&&(this.autoCompleteResultsControlId.className="term-list at-term-list");for(var t=0;t<this.results.length;t++){var n=this.results[t];e+='<li><a href="'+n.url+'" id="'+n.position+'">'+this.results[t].value+"</a></li>"}this.autoCompleteResultsControlId.innerHTML=e},r.prototype.hideResultsList=function(e){var t=this;setTimeout(function(){t.autoCompleteResultsControlId.className="term-list term-list--hidden"},200)},r.prototype.showResultsList=function(){this.autoCompleteResultsControlId.className="term-list at-term-list"},r.prototype.resetResultsList=function(e){this.autoCompleteResultsControlId.innerHTML="",this.hideResultsList()},r.prototype.resetSelection=function(){var e=-1!==this.selectedResult&&this.results[this.selectedResult].position;e&&s("#"+e).removeClass("active"),this.selectedResult=-1},r.prototype.resetAutoComplete=function(){this.results=[],this.resetResultsList(),this.clearHint()},r.prototype.completeTerms=function(){var e=this.searchInputControlId.selectionStart,t=this.searchInputControlId.selectionEnd;e===t&&t===this.inputTerms.length&&this.results&&0<this.results.length&&(this.searchInputControlId.value=this.results[0].value,this.evaluateTerms())},r.prototype.navigateResults=function(e){var t,n=this.selectedResult+e;oldResultId=-1!==this.selectedResult&&this.results[this.selectedResult].position,n<this.results.length&&-1<n?(t=this.results[n].position,oldResultId&&s("#"+oldResultId).removeClass("active"),s("#"+t).addClass("active"),this.selectedResult+=e):!oldResultId&&0<this.results.length?(t=this.results[this.results.length-1].position,s("#"+t).addClass("active"),this.selectedResult=this.results.length-1):this.resetSelection()},r.prototype.keyFunctions=function(e,t){9===t&&(e.preventDefault(),this.completeTerms()),38===t&&(e.preventDefault(),this.navigateResults(-1)),40===t&&(e.preventDefault(),this.navigateResults(1)),13===t&&-1<this.selectedResult&&(e.preventDefault(),e=s("#"+this.autoCompleteResultsControlId.id+" .active").attr("href"),this.searchInputControlId.value=s("#"+this.autoCompleteResultsControlId.id+" .active").text(),this.searchInputHintControlId.value=s("#"+this.autoCompleteResultsControlId.id+" .active").text(),window.location=e)},r.prototype.interceptKeys=function(e){this.searchInputControlId.value.toLowerCase().length<=255&&this.keyFunctions(e,e.keyCode)},e.init=function(){new r("search-term","umbrellaSiteSearchInputHint","umbrellaSiteAutoCompleteResults",!1,"BodyContent_Header_ddlForSearch")}}(App.SearchAutoComplete=App.SearchAutoComplete||{},SCM.JSUtility,jQuery),launchTermsModal=function(){$(".js-tdm-content__action-button").click(function(){$("html").css("overflow","hidden"),$("#termsAndConditionsModal").foundation("reveal","open"),setTimeout(function(){$(".js-accept-trigger").appendTo(".js-terms-text__scrollable"),$("a.js-accept-input").addClass("disabled").removeClass("checked"),$(".download-link-wrap").addClass("hidden"),$(".js-terms-text__scrollable").scroll(function(){$.each($(".js-accept-trigger"),function(e,t){var n,r,i,a;n=$(t),r=!0,i=$(".js-terms-text__scrollable"),a=i.height(),i.scrollTop(),t=$(n).offset().top-i.offset().top,n=t+$(n).height(),a=0<=t&&n<=a,r=(t<0&&0<n||0<t&&t<=i.height())&&r,(a||r)&&$("a.js-accept-input").removeClass("disabled")})}),$("a.js-accept-input").click(function(){$(this).addClass("checked"),$(this).closest(".term-accept__row").next(".download-link-wrap").removeClass("hidden")})},100)})},jQuery.fn.fastLiveFilter=function(e,a){a=a||{},e=jQuery(e);var t,o=this,n="",r=a.timeout||0,s=a.callback||function(){},l=a.type||"filter",c=e.children(),u=c.length,d=0<u?c[0].style.display:"block";if(s(u),"search"===l)for(var i=0;i<u;i++)c[i].style.display="none";return o.change(function(){for(var e,t,n=o.val().toLowerCase(),r=0,i=0;i<u;i++)e=c[i],t=a.selector?$(e).find(a.selector).text():e.textContent||e.innerText||"","search"!==l||0<n.trim().length?0<=t.toLowerCase().indexOf(n)?("none"==e.style.display&&(e.style.display=d),r++):"none"!=e.style.display&&(e.style.display="none"):e.style.display="none";return s(r),!1}).keydown(function(){clearTimeout(t),t=setTimeout(function(){o.val()!==n&&(n=o.val(),o.change())},r)}),this},$("#filter_input").fastLiveFilter("#filter_list"),$(document).ready(function(){launchTermsModal(),$(".js-filter-toggle").click(function(e){e.stopPropagation(),$(".fast-search").toggleClass("open"),$(".fast-search").hasClass("open")&&$("#filter_input").focus()}),$(document.body).on("click",function(e){e=$(e.target);$(".fast-search.open").hasClass("open")&&0==e.parents(".fast-search-input__wrap").length&&$(".fast-search").removeClass("open")}),$(document.body).on("click",function(e){e=$(e.target);$("#termsAndConditionsModal.open").hasClass("open")&&0==e.parents(".reveal-modal").length&&$("html").css("overflow","auto")}),$(".tdm_filter_name").each(function(){$(this).on("click",function(e){var t=$(this).parent().data("search"),n="*"==t?!0:!1;$(".tdm-content__content-row").each(function(){$(this).hasClass(t)||n?$(this).show():$(this).hide()})})}),$(".js-tdm-content__action-button").each(function(){$(this).click(function(){$("#tcDownloadLink").attr("href",$(this).attr("data-downloadurl"))})})}),$(".close-reveal-modal").on("click",function(){$("html").css("overflow","auto")});var App=App||{};!function(e,i){e.init=function(e){i(".see-more-link").on("click",function(e){e.preventDefault();var t=this.parentNode.parentNode,n=i(t).children().find(".widget-dynamic-entry").length,e=i(t).children().find(".widget-dynamic-entry:last-child"),r=i(t).children().find(".remove-border");i(r).each(function(e,t){i(r[e]).removeClass("remove-border")}),i(t).children().find(".widget-dynamic-image-wrap").hide(),i(t).children().find(".fw-item").removeClass("fw-item"),i(t).children().find(".item-Hidden").removeClass("item-Hidden"),i(this).hide(),n%2==1&&(i(e).addClass("fw-item"),i(e).find(".widget-dynamic-image-wrap").show())}),$multipleWidgets=i(".multi-widget"),$multipleWidgets.length&&$multipleWidgets.each(function(e){var n=this.getAttribute("data-count"),t=i(this).children();t.length&&t.each(function(e){var t=this.getAttribute("data-display-order");parseInt(n)%2==1&&parseInt(t,10)===parseInt(n-1,10)||(i(this).find(".fw-item").removeClass("fw-item"),i(this).find(".widget-dynamic-image-wrap").hide())})})}}(App.UberContent=App.UberContent||{},jQuery),$(document).ready(function(){$(".js-deepdyve-link").each(function(){$(this).addClass("hiddenRentalLink");var e=$(".js-deepdyve-link"),t=e.data("doi"),n=e.data("issneissn"),r=e.data("fieldname"),e=e.data("affiliate");null!=t&&null!=n&&null!=r&&null!=e&&$.getJSON("https://www.deepdyve.com/rental-link?docId="+t+"&journal="+n+"&fieldName="+r+"&affiliateId="+e+"&format=jsonp&callback=?",function(e){"ok"===e.status&&($(".js-deepdyve-link").is("a")?$(".js-deepdyve-link").attr("href",e.url):$(".js-deepdyve-link").data("deepdyveurl",e.url),$(".js-deepdyve-link").removeClass("hiddenRentalLink").addClass("show"),0<$(".js-deepdyve-desc").length&&$(".js-deepdyve-desc").removeClass("hiddenRentalLink").addClass("show"))}),$("button.js-deepdyve-link").on("click",function(){window.location.href=$(this).data("deepdyveurl")})})});var _ll=_ll||[],SCM=SCM||{};SCM.LibLynx=function(r){return{init:function(){var e=r(".SCM-SharedControls-LibLynx");{var t,n;e&&(t=e.attr("data-url"),n=e.attr("data-json"),e=e.attr("data-sandbox"),n&&0<n.length&&("true"===e.toLowerCase()&&_ll.push(["setEndpoint","//sandbox.liblynx.com/log/counter"]),_ll.push(["trackRequest",JSON.parse(n)]),e=document,n=e.createElement("script"),e=e.getElementsByTagName("script")[0],n.type="text/javascript",n.async=!0,n.defer=!0,n.src=t,e.parentNode.insertBefore(n,e)))}}}}(jQuery);var App=App||{};App.SeamlessAccess={},function(e,a){var t;function n(e){var t={filter:a(".js-sa-institution-search")[0].value};e.preventDefault(),a.ajax({url:"AMA/InstitutionsList",type:"get",data:t,success:function(e){a(".js-ama-institution-list").html(e);var t=a(".js-search-state").attr("search-state"),n=a(".js-search-state").attr("search-count"),e=a(".js-sa-helptext");"None"===t?e.html('<span class="sa-nomatchinginstitutions">No matching institutions</span>'):"TooMany"===t?e.html('<p><span class="sa-refineyoursearchcount">'.concat(n).concat('</span><span class="sa-refineyoursearch"> matches found, keep typing to refine your search</span></p>')):"Empty"===t?e.html('<p><span class="sa-emptyFilter">* Enter an institution name</span></p>'):e.html("")}})}function r(e){a(".js-sa-selfservecontentid").hide(),a(".js-recent-wrap").hide(),console.error(e)}function i(e){var t=a(".js-most-recent");if(t.length){t.html("");for(var n=0;n<e.length;n++){var r=e[n],i=r.entity.entityID,r='<div class="sa-buttonwrapper"><button class="sa-recentinstitutionslist text-truncate" onclick="App.SeamlessAccess.saveInstitution(this,\''.concat(i).concat("')\">").concat(r.entity.title);t.html(t.html().concat(r).concat("</button>").concat('<div class="sa-divholder"><a class="test" onclick="App.SeamlessAccess.delShibbolethID(\'').concat(i).concat('\')"><span class="icon-close"></span></a></div></div>'))}}0<e.length?a(".js-recent-wrap").show():a(".js-recent-wrap").hide()}function o(){var e,t=a(".sa-button-text-institution");0<t.length?(e=t.data("entityId"),a("body").on("click",".sa-button",function(){s(e)}),a("body").on("click",".sa-access-text",function(){s()}),a(".sa-access-text").removeClass("hide")):a("body").on("click",".sa-button",function(){s()})}function s(e){var t="/PageRedirectHandler.ashx?returnurl="+window.location.href+"&redirectpage=seamlessaccess";e&&(t+="&entityid="+e),window.location.href=t}e.init=function(){(t=a(".js-sa-institution-search")).length&&t.on("keydown",debounce(n,500));var e=a(".widget-instance-AMA_Seamless_Access_Cookie_SelfServe");void 0!==e.html()&&""===e.html().trim()&&a(".js-sa-selfservecontentid").hide(),SCM.SeamlessAccess.latestShibboleth().then(function(e){i(e),function(e){{var t;0<a(".sa-button").length&&e.length&&(t=e[0].entity.entityID,e=e[0].entity.title,a(".sa-button-text-institution")&&a(".sa-button-text-primary").html('<div class="sa-button-text-secondary">Access through</div><div class="sa-button-text-institution text-truncate" data-entity-id="'+t+'">'+e+"</div>"))}}(e)}).catch(r).finally(o)},e.saveInstitution=function(e,t){e=e.textContent;a(".advancedSACheckbox").is(":checked")&&SCM.SeamlessAccess.saveShibbolethID(t,e).then(i).catch(r),function(e){var t=a("#referrer"),n="";t.length&&(n=t.data("referrer"));n={ssoId:e,referrer:n};SCM.Ajax.post("/AMA/RedirectToSso",n).expectJson().then(function(e){e?window.location.href=e:r("Unable to create sso url reference")}).catch(function(e){r(e)})}(t)},e.delShibbolethID=function(e){SCM.SeamlessAccess.removeShibbolethID(e).then(SCM.SeamlessAccess.latestShibboleth()).then(i).catch(r)}}(App.SeamlessAccess=App.SeamlessAccess||{},jQuery);var SCM=SCM||{};SCM.SeamlessAccess=function(){var r,e,i;return{init:function(){i="thiss.io",r=new thiss.PersistenceService("https://service.seamlessaccess.org/ps/"),e=new thiss.DiscoveryService("https://md.thiss.io/entities/","https://use.thiss.io/ps/","test")},saveShibbolethID:function(t,n){return e.mdq(t).then(function(e){return e=e||a(t,n),(e=e).title=n,r.update(i,e).then(o)})},latestShibboleth:o,removeShibbolethID:function(t){return e.mdq(t).then(function(e){return e=e||a(t,""),e=e,r.remove(i,e.entity_id).then(o)})}};function t(e,t){return t.last_use-e.last_use}function a(e,t){return{entity_icon:"",descr:t,title:t,name_tag:t,type:"idp",auth:"other",entity_id:e,entityID:e,hidden:"",scope:"",id:e}}function o(){return r.entities(i).then(function(e){return e.data.sort(t)})}}(jQuery),function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";e("core-js/stable"),e("regenerator-runtime/runtime");e=(e=e("./scm.ecmascript-testbed"))&&e.__esModule?e:{default:e};try{e.default.runTestsOnJsDebug()}catch(e){console.error("One or more ES feature tests failed:",e)}},{"./scm.ecmascript-testbed":2,"core-js/stable":442,"regenerator-runtime/runtime":443}],2:[function(e,t,n){"use strict";function l(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function r(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){l(r,t,n,i,a,"next",e)}function a(e){l(r,t,n,i,a,"throw",e)}i(void 0)})}}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(c=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new c(e)}function a(){console.log(" *****  Performing EcmaScript Feature Tests  *****");var e=performance.now();(function(){var e=[];e.push("val"),console.log("Let and Const work","changed",e)})(),(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"testMethod",value:function(){console.log("Classes work")}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())).testMethod(),console.log("Arrow functions work."),function(){var e="This is some ".concat("stuff");console.log("Interpolated Strings work",e)}(),function(){for(var e=0,t=0,n=[1,2,3,4,5];t<n.length;t++)e+=n[t];console.log("for...of loop works",e)}(),Promise.resolve("works").then(function(e){console.log("Promises work",e)}),function(){var e=new Map;e.set("a",1),console.log("Map works",e.get("a"))}(),function(){var e=regeneratorRuntime.mark(t);function t(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t<n)return e.next=3,t;e.next=6;break;case 3:t+=r,e.next=0;break;case 6:case"end":return e.stop()}},e)}var n,r=0,i=o(t(0,10,2));try{for(i.s();!(n=i.n()).done;){var a=n.value;r+=a}}catch(e){i.e(e)}finally{i.f()}console.log("Generators work",r)}(),function(){if(!Symbol||!Symbol.iterator)throw new Error("Symbol.iterator is not defined");var e={from:1,to:5};if(e[Symbol.iterator]=function(){return{current:this.from,last:this.to,next:function(){return this.current<=this.last?{done:!1,value:this.current++}:{done:!0}}}},!Array.from(e).length)throw new Error("Test Object is not iterable");e=new Map;e.set("a",1);e=Array.from(e);if(!e.length)throw new Error("Map is not iterable");console.log("Test Object and Map are iterable",e)}(),function(){var e=Math.pow(3,3);console.log("Exponent operator works",e)}(),function(){function e(){return(e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve("foo");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){return e.apply(this,arguments)}().then(function(e){console.log("async/await works",e)})}(),console.log("Destructuring Assignment works",1,2,[3,4,5]),function(){(function(){var e={a:1,b:2,c:3},t=Object.values(e),n=Object.entries(e),e=Object.getOwnPropertyDescriptors(e);console.log("New Object methods work",t,n,e)})(),function(){var e="123".padStart(5,"0"),t="123".padEnd(5,"0");console.log("String padding works",e,t)}();var e=[u.name];console.log("There are known failures for ES 2017",e)}(),function(){var e=[1,2,3,4].concat([5,6]);console.log("Spread operator works",e)}(),function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log("Rest parameters work",e,t,r)}(1,2,3,4,5,6),Promise.reject("test").catch(function(){}).finally(function(){console.log("Promise.finally works")}),function(){var s=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},Symbol.asyncIterator,function(){return{i:0,next:function(){return this.i<3?Promise.resolve({value:this.i++,done:!1}):Promise.resolve({done:!0})}}});r(regeneratorRuntime.mark(function e(){var t,n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n=!(t=[]),e.prev=3,a=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new c(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(s);case 5:return e.next=7,a.next();case 7:if(!(n=!(o=e.sent).done)){e.next=13;break}o=o.value,t.push(o);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),r=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,n&&null!=a.return)return e.next=24,a.return();e.next=24;break;case 24:if(e.prev=24,r)throw i;e.next=27;break;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}},e,null,[[3,15,19,29],[20,,24,28]])}))().then(function(e){console.log("for await...of works",e)})}(),function(){var e=[0,1,2,[3,4]].flat();console.log("Array.prototype.flat works",e)}(),function(){var e=[0,1,2,3,4].flatMap(function(e){return[2*e]});console.log("Array.prototype.flatMap works",e)}(),function(){var e=Object.fromEntries([["foo","bar"],["baz",42]]);console.log("Object.fromEntries works",e)}(),function(){(function(){var e=null!==null?null:"baz";console.log("Nullish Coelescing Operator works","foo",e)})(),function(){var e={prop1:"foo",arr1:[1,2,3]},t=null===e?void 0:e.prop1,n=null===(i=e.arr1)||void 0===i?void 0:i.pop(),r=null===e?void 0:e.noSuchProp,i=null===(e=(i=e.arr1).noSuchMethod)||void 0===e?void 0:e.call(i);console.log("Optional Chaining Operator works",t,n,r,i)}(),function(){var e=globalThis.prototype;console.log("globalThis works",e)}();var e=[d.name];console.log("There are known failures for ES 2020",e)}(),function(){var e="aabcdaaefgaa".replaceAll("aa","zz");console.log("String.prototype.replaceAll works",e)}(),function(){var e=null;null!==(n=e)&&void 0!==n||(e="foo");var t=null;t=t||"bar";var n="baz";n=n&&"jenga",console.log("Logical Assignment Operators work",e,t,n)}(),console.log("Numeric Literal Separators work",1234),Promise.any([Promise.resolve("test1"),Promise.resolve("test2")]).then(function(e){console.log("Promise.any works",e)}),function(){var e=new AggregateError([new Error("err1"),new Error("err2")],"test aggregate error");console.log("AggregateError works",e)}(),function(){var e=new URLSearchParams("param1=val1&param2=val2"),t=e.get("param1"),e=e.get("param2");console.log("URLSearchParams works",t,e)}();e=performance.now()-e;console.log(" ***** EcmaScript Feature Tests completed in: "+e+"ms")}function u(){var e=Int32Array.from([123,456,789,234,567]),e=Atomics.xor(e,2,123);console.log("Atomics work",e)}function d(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={runTests:a,runTestsOnJsDebug:function(){window&&window.location&&window.location.search&&-1<window.location.search.toLowerCase().indexOf("jsdebug=true")&&a()}}},{}],3:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-callable"),a=e("../internals/try-to-string"),o=r.TypeError;t.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a function")}},{"../internals/global":84,"../internals/is-callable":99,"../internals/try-to-string":192}],4:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-constructor"),a=e("../internals/try-to-string"),o=r.TypeError;t.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a constructor")}},{"../internals/global":84,"../internals/is-constructor":100,"../internals/try-to-string":192}],5:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-callable"),a=r.String,o=r.TypeError;t.exports=function(e){if("object"==typeof e||i(e))return e;throw o("Can't set "+a(e)+" as a prototype")}},{"../internals/global":84,"../internals/is-callable":99}],6:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/object-create"),e=e("../internals/object-define-property"),a=r("unscopables"),o=Array.prototype;null==o[a]&&e.f(o,a,{configurable:!0,value:i(null)}),t.exports=function(e){o[a][e]=!0}},{"../internals/object-create":130,"../internals/object-define-property":132,"../internals/well-known-symbol":201}],7:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":170}],8:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/object-is-prototype-of"),a=r.TypeError;t.exports=function(e,t){if(i(t,e))return e;throw a("Incorrect invocation")}},{"../internals/global":84,"../internals/object-is-prototype-of":139}],9:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-object"),a=r.String,o=r.TypeError;t.exports=function(e){if(i(e))return e;throw o(a(e)+" is not an object")}},{"../internals/global":84,"../internals/is-object":104}],10:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],11:[function(e,t,n){e=e("../internals/fails");t.exports=e(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))})},{"../internals/fails":69}],12:[function(e,t,n){"use strict";function r(e){return!!d(e)&&(e=p(e),f(T,e)||f(D,e))}var i,a,o,s=e("../internals/array-buffer-native"),l=e("../internals/descriptors"),c=e("../internals/global"),u=e("../internals/is-callable"),d=e("../internals/is-object"),f=e("../internals/has-own-property"),p=e("../internals/classof"),h=e("../internals/try-to-string"),m=e("../internals/create-non-enumerable-property"),g=e("../internals/redefine"),y=e("../internals/object-define-property").f,v=e("../internals/object-is-prototype-of"),b=e("../internals/object-get-prototype-of"),w=e("../internals/object-set-prototype-of"),x=e("../internals/well-known-symbol"),S=e("../internals/uid"),A=c.Int8Array,k=A&&A.prototype,e=c.Uint8ClampedArray,e=e&&e.prototype,C=A&&b(A),j=k&&b(k),A=Object.prototype,_=c.TypeError,x=x("toStringTag"),E=S("TYPED_ARRAY_TAG"),I=S("TYPED_ARRAY_CONSTRUCTOR"),M=s&&!!w&&"Opera"!==p(c.opera),s=!1,T={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8};for(i in T)(o=(a=c[i])&&a.prototype)?m(o,I,a):M=!1;for(i in D)(o=(a=c[i])&&a.prototype)&&m(o,I,a);if((!M||!u(C)||C===Function.prototype)&&(C=function(){throw _("Incorrect invocation")},M))for(i in T)c[i]&&w(c[i],C);if((!M||!j||j===A)&&(j=C.prototype,M))for(i in T)c[i]&&w(c[i].prototype,j);if(M&&b(e)!==j&&w(e,j),l&&!f(j,x))for(i in s=!0,y(j,x,{get:function(){return d(this)?this[E]:void 0}}),T)c[i]&&m(c[i],E,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_CONSTRUCTOR:I,TYPED_ARRAY_TAG:s&&E,aTypedArray:function(e){if(r(e))return e;throw _("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!w||v(C,e)))return e;throw _(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(l){if(n)for(var i in T){i=c[i];if(i&&f(i.prototype,e))try{delete i.prototype[e]}catch(e){}}j[e]&&!n||g(j,e,!n&&M&&k[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(l){if(w){if(n)for(r in T)if((i=c[r])&&f(i,e))try{delete i[e]}catch(e){}if(C[e]&&!n)return;try{return g(C,e,!n&&M&&C[e]||t)}catch(e){}}for(r in T)!(i=c[r])||i[e]&&!n||g(i,e,t)}},isView:function(e){if(!d(e))return!1;e=p(e);return"DataView"===e||f(T,e)||f(D,e)},isTypedArray:r,TypedArray:C,TypedArrayPrototype:j}},{"../internals/array-buffer-native":10,"../internals/classof":33,"../internals/create-non-enumerable-property":43,"../internals/descriptors":50,"../internals/global":84,"../internals/has-own-property":85,"../internals/is-callable":99,"../internals/is-object":104,"../internals/object-define-property":132,"../internals/object-get-prototype-of":137,"../internals/object-is-prototype-of":139,"../internals/object-set-prototype-of":144,"../internals/redefine":153,"../internals/try-to-string":192,"../internals/uid":198,"../internals/well-known-symbol":201}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function i(e){return[255&e,e>>8&255]}function a(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return V(e,23,4)}function l(e){return V(e,52,8)}function c(e,t){E(e[L],t,{get:function(){return R(this)[t]}})}function u(e,t,n,r){var i=A(n),n=R(e);if(i+t>n.byteLength)throw J($);return e=R(n.buffer).bytes,n=i+n.byteOffset,t=M(e,n,n+t),r?t:H(t)}function d(e,t,n,r,i,a){if(n=A(n),e=R(e),n+t>e.byteLength)throw J($);for(var o=R(e.buffer).bytes,s=n+e.byteOffset,l=r(+i),c=0;c<t;c++)o[s+c]=l[a?c:t-c-1]}var f=e("../internals/global"),p=e("../internals/function-uncurry-this"),h=e("../internals/descriptors"),m=e("../internals/array-buffer-native"),g=e("../internals/function-name"),y=e("../internals/create-non-enumerable-property"),v=e("../internals/redefine-all"),b=e("../internals/fails"),w=e("../internals/an-instance"),x=e("../internals/to-integer-or-infinity"),S=e("../internals/to-length"),A=e("../internals/to-index"),k=e("../internals/ieee754"),C=e("../internals/object-get-prototype-of"),j=e("../internals/object-set-prototype-of"),_=e("../internals/object-get-own-property-names").f,E=e("../internals/object-define-property").f,I=e("../internals/array-fill"),M=e("../internals/array-slice-simple"),T=e("../internals/set-to-string-tag"),D=e("../internals/internal-state"),O=g.PROPER,P=g.CONFIGURABLE,R=D.get,F=D.set,e="ArrayBuffer",L="prototype",$="Wrong index",U=f[e],N=U,q=N&&N[L],g=f.DataView,z=g&&g[L],D=Object.prototype,W=f.Array,J=f.RangeError,B=p(I),H=p([].reverse),V=k.pack,G=k.unpack;if(m){var Y=O&&U.name!==e;if(b(function(){U(1)})&&b(function(){new U(-1)})&&!b(function(){return new U,new U(1.5),new U(NaN),Y&&!P}))Y&&P&&y(U,"name",e);else{(N=function(e){return w(this,q),new U(A(e))})[L]=q;for(var Q,X=_(U),K=0;X.length>K;)(Q=X[K++])in N||y(N,Q,U[Q]);q.constructor=N}j&&C(z)!==D&&j(z,D);var D=new g(new N(2)),Z=p(z.setInt8);D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||v(z,{setInt8:function(e,t){Z(this,e,t<<24>>24)},setUint8:function(e,t){Z(this,e,t<<24>>24)}},{unsafe:!0})}else q=(N=function(e){w(this,q);e=A(e);F(this,{bytes:B(W(e),0),byteLength:e}),h||(this.byteLength=e)})[L],z=(g=function(e,t,n){w(this,z),w(e,q);var r=R(e).byteLength,t=x(t);if(t<0||r<t)throw J("Wrong offset");if(r<t+(n=void 0===n?r-t:S(n)))throw J("Wrong length");F(this,{buffer:e,byteLength:n,byteOffset:t}),h||(this.buffer=e,this.byteLength=n,this.byteOffset=t)})[L],h&&(c(N,"byteLength"),c(g,"buffer"),c(g,"byteLength"),c(g,"byteOffset")),v(z,{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){e=u(this,2,e,1<arguments.length?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=u(this,2,e,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(e){return o(u(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return o(u(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return G(u(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return G(u(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){d(this,1,e,r,t)},setUint8:function(e,t){d(this,1,e,r,t)},setInt16:function(e,t){d(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){d(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){d(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){d(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){d(this,4,e,s,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){d(this,8,e,l,t,2<arguments.length?arguments[2]:void 0)}});T(N,e),T(g,"DataView"),t.exports={ArrayBuffer:N,DataView:g}},{"../internals/an-instance":8,"../internals/array-buffer-native":10,"../internals/array-fill":15,"../internals/array-slice-simple":25,"../internals/create-non-enumerable-property":43,"../internals/descriptors":50,"../internals/fails":69,"../internals/function-name":77,"../internals/function-uncurry-this":78,"../internals/global":84,"../internals/ieee754":90,"../internals/internal-state":96,"../internals/object-define-property":132,"../internals/object-get-own-property-names":135,"../internals/object-get-prototype-of":137,"../internals/object-set-prototype-of":144,"../internals/redefine-all":152,"../internals/set-to-string-tag":164,"../internals/to-index":180,"../internals/to-integer-or-infinity":182,"../internals/to-length":183}],14:[function(e,t,n){"use strict";var l=e("../internals/to-object"),c=e("../internals/to-absolute-index"),u=e("../internals/length-of-array-like"),d=Math.min;t.exports=[].copyWithin||function(e,t){var n=l(this),r=u(n),i=c(e,r),a=c(t,r),t=2<arguments.length?arguments[2]:void 0,o=d((void 0===t?r:c(t,r))-a,r-i),s=1;for(a<i&&i<a+o&&(s=-1,a+=o-1,i+=o-1);0<o--;)a in n?n[i]=n[a]:delete n[i],i+=s,a+=s;return n}},{"../internals/length-of-array-like":112,"../internals/to-absolute-index":179,"../internals/to-object":184}],15:[function(e,t,n){"use strict";var o=e("../internals/to-object"),s=e("../internals/to-absolute-index"),l=e("../internals/length-of-array-like");t.exports=function(e){for(var t=o(this),n=l(t),r=arguments.length,i=s(1<r?arguments[1]:void 0,n),r=2<r?arguments[2]:void 0,a=void 0===r?n:s(r,n);i<a;)t[i++]=e;return t}},{"../internals/length-of-array-like":112,"../internals/to-absolute-index":179,"../internals/to-object":184}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,e=e("../internals/array-method-is-strict")("forEach");t.exports=e?[].forEach:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":20,"../internals/array-method-is-strict":23}],17:[function(e,t,n){var a=e("../internals/length-of-array-like");t.exports=function(e,t){for(var n=0,r=a(t),i=new e(r);n<r;)i[n]=t[n++];return i}},{"../internals/length-of-array-like":112}],18:[function(e,t,n){"use strict";var r=e("../internals/global"),f=e("../internals/function-bind-context"),p=e("../internals/function-call"),h=e("../internals/to-object"),m=e("../internals/call-with-safe-iteration-closing"),g=e("../internals/is-array-iterator-method"),y=e("../internals/is-constructor"),v=e("../internals/length-of-array-like"),b=e("../internals/create-property"),w=e("../internals/get-iterator"),x=e("../internals/get-iterator-method"),S=r.Array;t.exports=function(e){var t=h(e),n=y(this),e=arguments.length,r=1<e?arguments[1]:void 0,i=void 0!==r;i&&(r=f(r,2<e?arguments[2]:void 0));var a,o,s,l,c,u,e=x(t),d=0;if(!e||this==S&&g(e))for(a=v(t),o=n?new this(a):S(a);d<a;d++)u=i?r(t[d],d):t[d],b(o,d,u);else for(c=(l=w(t,e)).next,o=n?new this:[];!(s=p(c,l)).done;d++)u=i?m(l,r,[s.value,d],!0):s.value,b(o,d,u);return o.length=d,o}},{"../internals/call-with-safe-iteration-closing":30,"../internals/create-property":45,"../internals/function-bind-context":74,"../internals/function-call":76,"../internals/get-iterator":81,"../internals/get-iterator-method":80,"../internals/global":84,"../internals/is-array-iterator-method":97,"../internals/is-constructor":100,"../internals/length-of-array-like":112,"../internals/to-object":184}],19:[function(e,t,n){function r(s){return function(e,t,n){var r,i=l(e),a=u(i),o=c(n,a);if(s&&t!=t){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===t)return s||o||0;return!s&&-1}}var l=e("../internals/to-indexed-object"),c=e("../internals/to-absolute-index"),u=e("../internals/length-of-array-like");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/length-of-array-like":112,"../internals/to-absolute-index":179,"../internals/to-indexed-object":181}],20:[function(e,t,n){function r(f){var p=1==f,h=2==f,m=3==f,g=4==f,y=6==f,v=7==f,b=5==f||y;return function(e,t,n,r){for(var i,a,o=S(e),s=x(o),l=w(t,n),c=A(s),u=0,r=r||k,d=p?r(e,c):h||v?r(e,0):void 0;u<c;u++)if((b||u in s)&&(a=l(i=s[u],u,o),f))if(p)d[u]=a;else if(a)switch(f){case 3:return!0;case 5:return i;case 6:return u;case 2:C(d,i)}else switch(f){case 4:return!1;case 7:C(d,i)}return y?-1:m||g?g:d}}var w=e("../internals/function-bind-context"),i=e("../internals/function-uncurry-this"),x=e("../internals/indexed-object"),S=e("../internals/to-object"),A=e("../internals/length-of-array-like"),k=e("../internals/array-species-create"),C=i([].push);t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterReject:r(7)}},{"../internals/array-species-create":29,"../internals/function-bind-context":74,"../internals/function-uncurry-this":78,"../internals/indexed-object":91,"../internals/length-of-array-like":112,"../internals/to-object":184}],21:[function(e,t,n){"use strict";var i=e("../internals/function-apply"),a=e("../internals/to-indexed-object"),o=e("../internals/to-integer-or-infinity"),s=e("../internals/length-of-array-like"),e=e("../internals/array-method-is-strict"),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,e=e("lastIndexOf");t.exports=u||!e?function(e){if(u)return i(c,this,arguments)||0;var t=a(this),n=s(t),r=n-1;for((r=1<arguments.length?l(r,o(arguments[1])):r)<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:c},{"../internals/array-method-is-strict":23,"../internals/function-apply":73,"../internals/length-of-array-like":112,"../internals/to-indexed-object":181,"../internals/to-integer-or-infinity":182}],22:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/well-known-symbol"),a=e("../internals/engine-v8-version"),o=i("species");t.exports=function(t){return 51<=a||!r(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},{"../internals/engine-v8-version":63,"../internals/fails":69,"../internals/well-known-symbol":201}],23:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})}},{"../internals/fails":69}],24:[function(e,t,n){function r(c){return function(e,t,n,r){u(t);var i=d(e),a=f(i),o=p(i),s=c?o-1:0,l=c?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=l;break}if(s+=l,c?s<0:o<=s)throw h("Reduce of empty array with no initial value")}for(;c?0<=s:s<o;s+=l)s in a&&(r=t(r,a[s],s,i));return r}}var i=e("../internals/global"),u=e("../internals/a-callable"),d=e("../internals/to-object"),f=e("../internals/indexed-object"),p=e("../internals/length-of-array-like"),h=i.TypeError;t.exports={left:r(!1),right:r(!0)}},{"../internals/a-callable":3,"../internals/global":84,"../internals/indexed-object":91,"../internals/length-of-array-like":112,"../internals/to-object":184}],25:[function(e,t,n){var r=e("../internals/global"),l=e("../internals/to-absolute-index"),c=e("../internals/length-of-array-like"),u=e("../internals/create-property"),d=r.Array,f=Math.max;t.exports=function(e,t,n){for(var r=c(e),i=l(t,r),a=l(void 0===n?r:n,r),o=d(f(a-i,0)),s=0;i<a;i++,s++)u(o,s,e[i]);return o.length=s,o}},{"../internals/create-property":45,"../internals/global":84,"../internals/length-of-array-like":112,"../internals/to-absolute-index":179}],26:[function(e,t,n){e=e("../internals/function-uncurry-this");t.exports=e([].slice)},{"../internals/function-uncurry-this":78}],27:[function(e,t,n){function i(e,t){var n=e.length,r=o(n/2);return n<8?function(e,t){var n=e.length,r=1,i,a;while(r<n){a=r;i=e[r];while(a&&t(e[a-1],i)>0)e[a]=e[--a];if(a!==r++)e[a]=i}return e}(e,t):function(e,t,n,r){var i=t.length,a=n.length,o=0,s=0;while(o<i||s<a)e[o+s]=o<i&&s<a?r(t[o],n[s])<=0?t[o++]:n[s++]:o<i?t[o++]:n[s++];return e}(e,i(a(e,0,r),t),i(a(e,r),t),t)}var a=e("../internals/array-slice-simple"),o=Math.floor;t.exports=i},{"../internals/array-slice-simple":25}],28:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-array"),a=e("../internals/is-constructor"),o=e("../internals/is-object"),s=e("../internals/well-known-symbol")("species"),l=r.Array;t.exports=function(e){var t;return i(e)&&(t=e.constructor,(a(t)&&(t===l||i(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?l:t}},{"../internals/global":84,"../internals/is-array":98,"../internals/is-constructor":100,"../internals/is-object":104,"../internals/well-known-symbol":201}],29:[function(e,t,n){var r=e("../internals/array-species-constructor");t.exports=function(e,t){return new(r(e))(0===t?0:t)}},{"../internals/array-species-constructor":28}],30:[function(e,t,n){var i=e("../internals/an-object"),a=e("../internals/iterator-close");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){a(t,"throw",e)}}},{"../internals/an-object":9,"../internals/iterator-close":109}],31:[function(e,t,n){var i=e("../internals/well-known-symbol")("iterator"),a=!1;try{var r=0,o={next:function(){return{done:!!r++}},return:function(){a=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},{"../internals/well-known-symbol":201}],32:[function(e,t,n){var e=e("../internals/function-uncurry-this"),r=e({}.toString),i=e("".slice);t.exports=function(e){return i(r(e),8,-1)}},{"../internals/function-uncurry-this":78}],33:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/to-string-tag-support"),a=e("../internals/is-callable"),o=e("../internals/classof-raw"),s=e("../internals/well-known-symbol")("toStringTag"),l=r.Object,c="Arguments"==o(function(){return arguments}());t.exports=i?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?e:c?o(t):"Object"==(e=o(t))&&a(t.callee)?"Arguments":e}},{"../internals/classof-raw":32,"../internals/global":84,"../internals/is-callable":99,"../internals/to-string-tag-support":189,"../internals/well-known-symbol":201}],34:[function(e,t,n){var r=e("../internals/function-uncurry-this")("".replace),e=String(Error("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,a=i.test(e);t.exports=function(e,t){if(a&&"string"==typeof e)for(;t--;)e=r(e,i,"");return e}},{"../internals/function-uncurry-this":78}],35:[function(e,t,n){"use strict";var c=e("../internals/object-define-property").f,u=e("../internals/object-create"),d=e("../internals/redefine-all"),f=e("../internals/function-bind-context"),p=e("../internals/an-instance"),h=e("../internals/iterate"),o=e("../internals/define-iterator"),s=e("../internals/set-species"),m=e("../internals/descriptors"),g=e("../internals/internal-metadata").fastKey,e=e("../internals/internal-state"),y=e.set,v=e.getterFor;t.exports={getConstructor:function(e,n,r,i){function a(e,t,n){var r,i=l(e),a=o(e,t);return a?a.value=n:(i.last=a={index:r=g(t,!0),key:t,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),m?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e}function o(e,t){var n,r=l(e);if("F"!==(e=g(t)))return r.index[e];for(n=r.first;n;n=n.next)if(n.key==t)return n}var e=e(function(e,t){p(e,s),y(e,{type:n,index:u(null),first:void 0,last:void 0,size:0}),m||(e.size=0),null!=t&&h(t,e[i],{that:e,AS_ENTRIES:r})}),s=e.prototype,l=v(n);return d(s,{clear:function(){for(var e=l(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,m?e.size=0:this.size=0},delete:function(e){var t,n=l(this),r=o(this,e);return r&&(t=r.next,e=r.previous,delete n.index[r.index],r.removed=!0,e&&(e.next=t),t&&(t.previous=e),n.first==r&&(n.first=t),n.last==r&&(n.last=e),m?n.size--:this.size--),!!r},forEach:function(e){for(var t,n=l(this),r=f(e,1<arguments.length?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!o(this,e)}}),d(s,r?{get:function(e){e=o(this,e);return e&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),m&&c(s,"size",{get:function(){return l(this).size}}),e},setStrong:function(e,t,n){var r=t+" Iterator",i=v(t),a=v(r);o(e,t,function(e,t){y(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}},n?"entries":"values",!n,!0),s(t)}}},{"../internals/an-instance":8,"../internals/define-iterator":48,"../internals/descriptors":50,"../internals/function-bind-context":74,"../internals/internal-metadata":95,"../internals/internal-state":96,"../internals/iterate":108,"../internals/object-create":130,"../internals/object-define-property":132,"../internals/redefine-all":152,"../internals/set-species":163}],36:[function(e,t,n){"use strict";function l(e){return e.frozen||(e.frozen=new r)}function r(){this.entries=[]}function i(e,t){return s(e.entries,function(e){return e[0]===t})}var a=e("../internals/function-uncurry-this"),c=e("../internals/redefine-all"),u=e("../internals/internal-metadata").getWeakData,d=e("../internals/an-object"),f=e("../internals/is-object"),p=e("../internals/an-instance"),h=e("../internals/iterate"),o=e("../internals/array-iteration"),m=e("../internals/has-own-property"),e=e("../internals/internal-state"),g=e.set,y=e.getterFor,s=o.find,v=o.findIndex,b=a([].splice),w=0;r.prototype={get:function(e){e=i(this,e);if(e)return e[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(t){var e=v(this.entries,function(e){return e[0]===t});return~e&&b(this.entries,e,1),!!~e}},t.exports={getConstructor:function(e,n,r,i){function a(e,t,n){var r=s(e),i=u(d(t),!0);return!0===i?l(r).set(t,n):i[r.id]=n,e}var e=e(function(e,t){p(e,o),g(e,{type:n,id:w++,frozen:void 0}),null!=t&&h(t,e[i],{that:e,AS_ENTRIES:r})}),o=e.prototype,s=y(n);return c(o,{delete:function(e){var t=s(this);if(!f(e))return!1;var n=u(e);return!0===n?l(t).delete(e):n&&m(n,t.id)&&delete n[t.id]},has:function(e){var t=s(this);if(!f(e))return!1;var n=u(e);return!0===n?l(t).has(e):n&&m(n,t.id)}}),c(o,r?{get:function(e){var t=s(this);if(f(e)){var n=u(e);return!0===n?l(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),e}}},{"../internals/an-instance":8,"../internals/an-object":9,"../internals/array-iteration":20,"../internals/function-uncurry-this":78,"../internals/has-own-property":85,"../internals/internal-metadata":95,"../internals/internal-state":96,"../internals/is-object":104,"../internals/iterate":108,"../internals/redefine-all":152}],37:[function(e,t,n){"use strict";var g=e("../internals/export"),y=e("../internals/global"),v=e("../internals/function-uncurry-this"),b=e("../internals/is-forced"),w=e("../internals/redefine"),x=e("../internals/internal-metadata"),S=e("../internals/iterate"),A=e("../internals/an-instance"),k=e("../internals/is-callable"),C=e("../internals/is-object"),j=e("../internals/fails"),_=e("../internals/check-correctness-of-iteration"),E=e("../internals/set-to-string-tag"),I=e("../internals/inherit-if-required");t.exports=function(e,t,n){function r(e){var n=v(p[e]);w(p,e,"add"==e?function(e){return n(this,0===e?0:e),this}:"delete"==e?function(e){return!(u&&!C(e))&&n(this,0===e?0:e)}:"get"==e?function(e){return u&&!C(e)?void 0:n(this,0===e?0:e)}:"has"==e?function(e){return!(u&&!C(e))&&n(this,0===e?0:e)}:function(e,t){return n(this,0===e?0:e,t),this})}var i,a,o,s,l,c=-1!==e.indexOf("Map"),u=-1!==e.indexOf("Weak"),d=c?"set":"add",f=y[e],p=f&&f.prototype,h=f,m={};return b(e,!k(f)||!(u||p.forEach&&!j(function(){(new f).entries().next()})))?(h=n.getConstructor(t,e,c,d),x.enable()):b(e,!0)&&(a=(i=new h)[d](u?{}:-0,1)!=i,o=j(function(){i.has(1)}),s=_(function(e){new f(e)}),l=!u&&j(function(){for(var e=new f,t=5;t--;)e[d](t,t);return!e.has(-0)}),s||(((h=t(function(e,t){A(e,p);e=I(new f,e,h);return null!=t&&S(t,e[d],{that:e,AS_ENTRIES:c}),e})).prototype=p).constructor=h),(o||l)&&(r("delete"),r("has"),c&&r("get")),(l||a)&&r(d),u&&p.clear&&delete p.clear),m[e]=h,g({global:!0,forced:h!=f},m),E(h,e),u||n.setStrong(h,e,c),h}},{"../internals/an-instance":8,"../internals/check-correctness-of-iteration":31,"../internals/export":68,"../internals/fails":69,"../internals/function-uncurry-this":78,"../internals/global":84,"../internals/inherit-if-required":92,"../internals/internal-metadata":95,"../internals/is-callable":99,"../internals/is-forced":102,"../internals/is-object":104,"../internals/iterate":108,"../internals/redefine":153,"../internals/set-to-string-tag":164}],38:[function(e,t,n){var l=e("../internals/has-own-property"),c=e("../internals/own-keys"),u=e("../internals/object-get-own-property-descriptor"),d=e("../internals/object-define-property");t.exports=function(e,t,n){for(var r=c(t),i=d.f,a=u.f,o=0;o<r.length;o++){var s=r[o];l(e,s)||n&&l(n,s)||i(e,s,a(t,s))}}},{"../internals/has-own-property":85,"../internals/object-define-property":132,"../internals/object-get-own-property-descriptor":133,"../internals/own-keys":148}],39:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,"/./"[t](n)}catch(e){}}return!1}},{"../internals/well-known-symbol":201}],40:[function(e,t,n){e=e("../internals/fails");t.exports=!e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},{"../internals/fails":69}],41:[function(e,t,n){var r=e("../internals/function-uncurry-this"),a=e("../internals/require-object-coercible"),o=e("../internals/to-string"),s=/"/g,l=r("".replace);t.exports=function(e,t,n,r){var i=o(a(e)),e="<"+t;return""!==n&&(e+=" "+n+'="'+l(o(r),s,"&quot;")+'"'),e+">"+i+"</"+t+">"}},{"../internals/function-uncurry-this":78,"../internals/require-object-coercible":160,"../internals/to-string":190}],42:[function(e,t,n){"use strict";function i(){return this}var a=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),s=e("../internals/create-property-descriptor"),l=e("../internals/set-to-string-tag"),c=e("../internals/iterators");t.exports=function(e,t,n,r){t+=" Iterator";return e.prototype=o(a,{next:s(+!r,n)}),l(e,t,!1,!0),c[t]=i,e}},{"../internals/create-property-descriptor":44,"../internals/iterators":111,"../internals/iterators-core":110,"../internals/object-create":130,"../internals/set-to-string-tag":164}],43:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),a=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":44,"../internals/descriptors":50,"../internals/object-define-property":132}],44:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],45:[function(){}