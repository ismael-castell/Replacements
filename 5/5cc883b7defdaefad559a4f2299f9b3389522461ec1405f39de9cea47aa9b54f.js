(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1033:function(e,t,n){"use strict";n.r(t);var c,o,l=n(4),r=(n(16),n(97),n(182),n(24),{data:function(){return{showAppDown:this.$store.state.userAgent.isMobile,step:"signup",dlfapdl:"",code:"",companyList:[],company:0,companyName:"",ghqjsalfql:"",pw_confirm:"",nickname:"",from:"",selectCompanyName:"",gaEventLabel:"",loading:!1,isResend:!1,isRequireCompanyname:!1,showBlockPublicDomain:!1,checkValid:{email:{valid:!1,message:""},code:{valid:!1,message:""},company:{valid:!1,message:""},nickname:{valid:!0,message:""},password:{valid:!1,message:""},confirmPassword:{valid:!1,message:""}},defaultTip:{nickname:"Username is available.",password:"Enter password (8~32 characters, include at least one letter, number, symbol).",confirmPassword:"Re-enter password"},registerMessage:"",custom:null,gaCategory:"Sign-up",isInducement:!1,nicknameTimer:{},readRestrict:null,triggerAction:"",isPublicDomain:!1}},watch:{code:function(e){this.checkCode()},company:function(){this.checkValid.company.message="",this.companyName=""},companyName:function(){this.checkValid.company.message=""},ghqjsalfql:function(e){var t=8<=e.length&&e.length<32,n=/[0-9]/.test(e),c=/[a-zA-Z]/.test(e),o=/[^0-9a-zA-Z]/.test(e),l=t&&n&&c&&o;this.checkValid.password.valid=l,this.checkValid.password.valid?this.checkValid.password.message="Password accepted":this.checkValid.password.message="8~32 characters (include at least one letter, number, symbol)",this.checkPw()},pw_confirm:function(e){this.checkPw()},step:function(e){var t=this;this.loading=!1,"signup-final"===e?(this.$axios.post("/api/member/temp_nickname").then((function(e){e.success&&(t.nickname=e.data.temp_nickname)})),this.$axios.post("/api/auth/getCompany",{company:this.company}).then((function(e){e.success&&(t.isRequireCompanyname=e.data.require_company_name,t.isRequireCompanyname&&(t.companyName=e.data.company_name))}))):"signup-company"===e&&this.$axios.post("/api/auth/companyList").then((function(e){e.success&&(t.companyList=e.data.company_list)}))}},computed:{isValidEmail:function(){if(this.checkValid.email.message="",this.showBlockPublicDomain=!1,0===this.dlfapdl.length)return!1;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.dlfapdl.trim())}},mounted:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,c,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checkValid.nickname.message=e.defaultTip.nickname,e.checkValid.password.message=e.defaultTip.password,e.checkValid.confirmPassword.message=e.defaultTip.confirmPassword,!e.$route.hash.startsWith("#signup")){t.next=14;break}if(e.$store.state.authUser){t.next=14;break}if(n={},2!==(c=e.$route.hash.split("-")).length){t.next=13;break}return o=c[c.length-1],t.next=11,e.$axios.post("/api/customSignup",{alias:o,custom_type:"signup"});case 11:(l=t.sent).success&&(e.$store.commit("isCustomSignup",!0),e.custom=l.data,e.gaCategory+="-custom",n={ga:{action:"Custom-email-link",label:""},gaEventLabel:"Custom-email-link"});case 13:e.$modal.show("signup",n);case 14:case"end":return t.stop()}}),t)})))()},methods:{beforeOpen:function(e){if(this.loading=!1,e.params){if(this.from=e.params.from,this.selectCompanyName=e.params.companyName,this.gaEventLabel=e.params.gaEventLabel,this.triggerAction=e.params.triggerAction||"default",e.params.ga){var t="Ly-sign-up";this.$store.state.isCustomSignup&&(t+="-custom"),this.$ga.event(t,e.params.ga.action,e.params.ga.label)}this.isInducement=e.params.isInducement||!1,e.params.contentRestrict&&e.params.contentRestrict.isRestrict&&(this.readRestrict={count:e.params.contentRestrict.count,limit:e.params.contentRestrict.limit})}},beforeClose:function(){this.resetForm()},login:function(){this.dlfapdl="",this.$modal.hide("signup"),this.$modal.show("login",{ga:{action:"Log-in",label:"Ly-sign-up"},gaEventLabel:"Log-in-ly-sign-up",from:this.from||null})},signup:function(e){var t=this;if(!this.loading&&this.isValidEmail){this.loading=!0,this.dlfapdl=this.dlfapdl.trim(),this.code="";var data={dlfapdl:this.dlfapdl};this.$axios.post("/api/auth/signup",data).then((function(n){t.loading=n.success,n.success?(200===n.data.auth_step?t.step="signup-company":t.step="signup-verify",t.loading=!1,"resend"===e&&(t.isResend=!1,setTimeout((function(){t.isResend=!0}),100)),localStorage.removeItem("mzpcmehz")):1061===n.error.code?t.showBlockPublicDomain=!0:t.checkValid.email.message=n.error.message})),this.gaEvent(this.gaCategory,"resend"===e?"Resend-code":this.isPublicDomain?"Input-email-public":"Input-email")}},changeEmail:function(){this.resetForm(),this.gaEvent(this.gaCategory,"Change-email")},checkCode:function(){var e=this;if(this.code.length>6&&(this.code=this.code.slice(0,6)),6===this.code.length){var t=localStorage.getItem("mzpcmehz")||0;if(t>=5)this.checkValid.code.message="Verification failed [1069]";else{var data={dlfapdl:this.dlfapdl,code:this.code};this.$axios.post("/api/auth/code",data).then((function(n){e.loading=n.success,n.success?(e.checkValid.code.message="",200===n.data.auth_step?e.step="signup-company":(n.data.company_id>0&&(e.company=n.data.company_id),e.step="signup-final"),localStorage.removeItem("mzpcmehz")):(e.checkValid.code.message="Invalid verification code. Please try again.",localStorage.setItem("mzpcmehz",++t))}))}}else this.checkValid.code.message=""},confirm:function(){var e=this;if(!this.loading&&(this.company||this.companyName)){var data={company_id:this.company,company_name:this.companyName};this.$axios.post("/api/auth/company",data).then((function(t){e.loading=t.success,e.checkValid.company.valid=t.success,t.success?e.step="signup-final":e.checkValid.company.message=t.error.message})),this.gaEvent(this.gaCategory,"Select-company")}},checkNickname:(o=Object(l.a)(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}if(!(t.target.value.length>10)){e.next=3;break}return e.abrupt("return");case 3:this.nickname=t.target.value;case 4:this.nickname.length>0?(this.nicknameTimer&&clearTimeout(this.nicknameTimer),this.nicknameTimer=setTimeout((function(){var data={nickname:n.nickname};n.$axios.post("/api/member/is_valid_nickname",data).then((function(e){n.checkValid.nickname.valid=e.success,e.success?n.checkValid.nickname.message=n.defaultTip.nickname:n.checkValid.nickname.message=e.error.message}))}),500)):(this.checkValid.nickname.valid=!1,this.checkValid.nickname.message="Create a username.");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),getStarted:(c=Object(l.a)(regeneratorRuntime.mark((function e(){var t,data,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading||this.ghqjsalfql!==this.pw_confirm){e.next=11;break}return e.next=3,this.$axios.post("/api/member/is_valid_nickname",{nickname:this.nickname}).then((function(e){n.checkValid.nickname.valid=e.success,e.success?n.checkValid.nickname.message=n.defaultTip.nickname:n.checkValid.nickname.message=e.error.message}));case 3:if(this.loading||!this.checkValid.nickname.valid){e.next=11;break}return this.gaEvent(this.gaCategory,"Get-started"),this.loading=this.checkValid.password.valid,this.loading=!0,t=sessionStorage.getItem("inviteCode")||"",data={company_name:this.companyName,ghqjsalfql:this.ghqjsalfql,dlfapdl:this.dlfapdl,nickname:this.nickname,company_id:this.company,pwd_invalid_pass:!this.checkValid.password.valid,invite_key:t},e.next=11,this.$axios.post("/api/auth/register",data).then((function(e){n.loading=e.success&&n.checkValid.password.valid,e.success?(n.$store.commit("authUser",e.data),n.$ga.event(n.gaCategory,"Sign-up",(n.isPublicDomain?"Sign-up-completed-public-":"Sign-up-completed-")+n.gaEventLabel),n.loading=!1,n.$modal.hide("signup"),n.$axios.post("/api/init").then((function(e){e.success&&(n.$store.commit("initData",{isPollPageOn:e.data.show_poll_page,contentRestrictCount:e.data.content_restrict_count,customSignup:e.data.custom_signup,onboarding:e.data.onboarding}),e.data.onboarding&&setTimeout((function(){n.$modal.show("onboarding",{from:"signup",custom:n.custom})}),10))}))):n.checkValid.password.valid&&(1042===e.error.code?n.registerMessage="There is a problem with your account.<br>Please verify your current company email to access Blind.<br>(Code: 1042)<br><br>If the problem continues, please try to re-verify or contact our team at <a href='mailto:blindapp@teamblind.com'>blindapp@teamblind.com</a>.":1061===e.error.code?n.registerMessage="At this time, you cannot log in with a public or educational email domain (i.e. gmail.com, .edu). Please browse our website in read-only mode, or sign up with your work email to get more access on Blind.":n.registerMessage=e.error.message)}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),resetForm:function(){var e=this;this.step="signup",this.loading=!1,this.isResend=!1,this.dlfapdl="",this.code="",this.showBlockPublicDomain=!1,this.companyList=[],this.company=0,this.companyName="",this.ghqjsalfql="",this.pw_confirm="",this.nickname="",this.registerMessage="",this.isInducement=null,this.readRestrict=null,this.isPublicDomain=!1,setTimeout((function(){e.checkValid={email:{valid:!1,message:""},code:{valid:!1,message:""},company:{valid:!1,message:""},nickname:{valid:!0,message:e.defaultTip.nickname},password:{valid:!1,message:e.defaultTip.password},confirmPassword:{valid:!1,message:e.defaultTip.confirmPassword}}}),0)},gaEvent:function(e,t){this.$ga.event(e,t,this.gaEventLabel)},checkPw:function(){this.checkValid.confirmPassword.valid=this.ghqjsalfql===this.pw_confirm,0===this.pw_confirm.length?this.checkValid.confirmPassword.message=this.defaultTip.confirmPassword:this.checkValid.confirmPassword.valid?this.checkValid.confirmPassword.message="Passwords match":this.checkValid.confirmPassword.message="Passwords don't match. Try again"},closePopup:function(){"companyReviewWrite"===this.from&&(this.$store.state.fromRouterPath?this.$router.go(-1):this.$router.push("/")),this.$modal.hide("signup")},checkPublicDomain:function(){var e=this;if(this.isValidEmail){var data={dlfapdl:this.dlfapdl};this.$axios.post("/api/auth/public_domain/check",data).then((function(t){t.success&&t.data.ck?(e.isPublicDomain=!0,e.$ga.event("Sign-up"," Attempt-public-domain",e.gaEventLabel)):e.isPublicDomain=!1}))}}},components:{Spinner:function(){return n.e(63).then(n.bind(null,1026))}}}),m=r,d=n(5),component=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("modal",{attrs:{name:"signup",height:"auto",scrollable:!0,classes:["v--modal","v--size-s"],clickToClose:!1},on:{"before-open":e.beforeOpen,"before-close":e.beforeClose}},[n("div",{staticClass:"flex"},[n("div",{staticClass:"ly_signup add_openlimit"},["signup"===e.step?[n("h1",{staticClass:"blind"},[e._v("Join Blind!")]),e._v(" "),n("div",{staticClass:"top_area"},[e.custom?e._e():["companySearch"===e.from&&e.selectCompanyName?n("h2",{staticClass:"tit"},[n("div",{staticClass:"colleagues"},[n("em",{staticClass:"point"},[e._v(e._s(e.selectCompanyName))]),e._v(" is active on Blind.\n                                    "),n("span",[e._v("Join your coworkers now!")])])]):e._e()],e._v(" "),n("a",{staticClass:"btn_clse",on:{click:e.closePopup}},[n("i",{staticClass:"blind"},[e._v("close")])])],2),e._v(" "),n("div",{staticClass:"contents"},[e.readRestrict?n("div",{staticClass:"openlimit_notice"},[e.readRestrict.count>0?[e._v("You have "),n("em",[e._v(e._s(e.readRestrict.count))]),e._v(" more posts for today.")]:[e._v("This is the last post for today.")],n("br"),e._v("\n                            Non-members can only see "),n("em",[e._v(e._s(e.readRestrict.limit))]),e._v(" posts a day.\n                        ")],2):e._e(),e._v(" "),n("div",{staticClass:"banner_wrap custom_read"},[e.custom?n("div",{staticClass:"custom_ad"},[n("img",{attrs:{src:e.custom.img}})]):"companySearch"===e.from&&e.selectCompanyName||e.$store.state.initData.signupBanners?n("div",{staticClass:"desc"},["companySearch"===e.from&&e.selectCompanyName?n("p",[e._v("\n                                    Enjoy your own private company channel,\n                                    and get raw and unfiltered career advice\n                                    from verified employees, anonymously.\n                                ")]):e.$store.state.initData.signupBanners?n("div",{staticClass:"banner_wrap"},[n("a",{attrs:{href:"#",target:"_blank"}},[n("img",{attrs:{src:"https://dummyimage.com/800x256/efefef/000.png",alt:"sample banner Area for web"}})])]):e._e()]):n("div",{class:e.$store.state.isMobileWidth?"is_mobile":"is_web"},[e.$store.state.isMobileWidth?n("img",{attrs:{src:e.$store.state.initData.customSignup&&e.$store.state.initData.customSignup[e.triggerAction]&&e.$store.state.initData.customSignup[e.triggerAction].img_mw?e.$store.state.initData.customSignup[e.triggerAction].img_mw:"https://d2u3dcdbebyaiu.cloudfront.net/img/www/limit/img-signup-join-m.jpg"}}):n("img",{attrs:{src:e.$store.state.initData.customSignup&&e.$store.state.initData.customSignup[e.triggerAction]&&e.$store.state.initData.customSignup[e.triggerAction].img?e.$store.state.initData.customSignup[e.triggerAction].img:"https://d2u3dcdbebyaiu.cloudfront.net/img/www/limit/img-signup-join.jpg"}})])]),e._v(" "),n("div",{staticClass:"usrform_wrap siginin"},[n("div",{staticClass:"signup_form"},[n("div",{staticClass:"fieldset",class:{error:e.checkValid.email.message||e.showBlockPublicDomain}},[n("label",{staticClass:"blind",attrs:{for:"signup-email"}},[e._v("Enter your work email")]),e._v(" "),n("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"email",attrs:{type:"text",id:"signup-email",placeholder:"Enter work email"},on:{input:function(t){e.dlfapdl=t.target.value},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signup.apply(null,arguments)},e.checkPublicDomain]}})]),e._v(" "),e.isPublicDomain?n("p",{staticClass:"msg limit"},[e._v("This domain will give you limited access to content and features.")]):e._e(),e._v(" "),n("div",{staticClass:"fieldsubmit"},[n("button",{staticClass:"submit",class:{disabled:e.loading||!e.isValidEmail},attrs:{type:"button",name:"button"},on:{click:e.signup}},[n("strong",{staticClass:"next"},[e._v("Next")])])])])]),e._v(" "),e.checkValid.email.message?n("span",{staticClass:"msg alert"},[e._v("\n                            "+e._s(e.checkValid.email.message)+"\n                        ")]):e._e(),e._v(" "),e.showBlockPublicDomain?n("div",{staticClass:"premember"},[n("div",{staticClass:"appdown_wrap"},[n("div",{staticClass:"wrap_content"},[n("span",[e._v("\n                                        Creating an account with a personal email (e.g. gmail.com) is currently only available on the app.\n                                    ")]),e._v(" "),n("div",{staticClass:"appdown"},[!e.$store.state.userAgent.isMobile||e.$store.state.userAgent.iphone||e.$store.state.userAgent.ipad?n("span",{staticClass:"apple",on:{click:function(t){return e.$common.goApp("","ios","Signup")}}},[n("i",{staticClass:"blind"},[e._v("App store")])]):e._e(),e._v(" "),!e.$store.state.userAgent.isMobile||e.$store.state.userAgent.android?n("span",{staticClass:"google",on:{click:function(){}