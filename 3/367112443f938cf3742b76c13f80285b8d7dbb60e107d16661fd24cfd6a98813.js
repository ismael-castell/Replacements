/**
 * crisp-client
 * @version v2.8.5 75d9fae
 * @author Crisp IM SAS
 * @date 6/15/2022
 */
(function(){try{var m={};m.Library=new function(){var t,i,n,e,s;try{this.ns="CrispLibrary";var c={},o=m;c.Console=((s={}).i="production",s.c="development"==s.i,s.a=void 0!==window.console,s.o=s.c&&s.a,s.h=function(t,i,n){},s.warn=function(t,i){s.o&&console.warn(t,i),s.h("warn",t,i)},s.error=function(t,i){s.o&&console.error(t,i),s.h("error",t,i)},s.info=function(t,i){s.o&&console.info(t,i),s.h("info",t,i)},s.log=function(t,i){s.o&&console.log(t,i),s.h("log",t,i)},s.debug=function(t,i){s.o&&(void 0!==console.debug?console.debug(t,i):console.log(t,i)),s.h("debug",t,i)},s.set_log_sink=function(t){if("function"!=typeof t)throw new Error("Invalid function");s.h=t},s),n=function(){return function e(s,c,a){function r(i,t){if(!c[i]){if(!s[i]){var n="function"==typeof require&&require;if(!t&&n)return n(i,!0);if(o)return o(i,!0);throw(n=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",n}n=c[i]={exports:{}},s[i][0].call(n.exports,function(t){return r(s[i][1][t]||t)},n,n.exports,e,s,c,a)}return c[i].exports}for(var o="function"==typeof require&&require,t=0;t<a.length;t++)r(a[t]);return r}({1:[function(r,t,o){"use strict";function h(t){return null!=t&&""!==t}function u(i){return(Array.isArray(i)?i.map(u):i&&"object"==typeof i?Object.keys(i).filter(function(t){return i[t]}):[i]).filter(h).join(" ")}o.merge=function t(i,n){if(1===arguments.length){for(var e=i[0],s=1;s<i.length;s++)e=t(e,i[s]);return e}var c,a=i.class,r=n.class;for(c in(a||r)&&(a=a||[],r=r||[],Array.isArray(a)||(a=[a]),Array.isArray(r)||(r=[r]),i.class=a.concat(r).filter(h)),n)"class"!=c&&(i[c]=n[c]);return i},o.joinClasses=u,o.cls=function(t,i){for(var n=[],e=0;e<t.length;e++)i&&i[e]?n.push(o.escape(u([t[e]]))):n.push(u(t[e]));var s=u(n);return s.length?' class="'+s+'"':""},o.style=function(i){return i&&"object"==typeof i?Object.keys(i).map(function(t){return t+":"+i[t]}).join(";"):i},o.attr=function(t,i,n,e){return"boolean"==typeof(i="style"===t?o.style(i):i)||null==i?i?" "+(e?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof i?" "+t+"='"+JSON.stringify(i).replace(/'/g,"&apos;")+"'":n?" "+t+'="'+o.escape(i)+'"':" "+t+'="'+i+'"'},o.attrs=function(t,i){var n=[],e=Object.keys(t);if(e.length)for(var s=0;s<e.length;++s){var c=e[s],a=t[c];"class"==c?(a=u(a))&&n.push(" "+c+'="'+a+'"'):n.push(o.attr(c,a,!1,i))}return n.join("")},o.escape=function(t){var i=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return i===""+t?t:i},o.rethrow=function i(n,t,e,s){if(!(n instanceof Error))throw n;if(!("undefined"==typeof window&&t||s))throw n.message+=" on line "+e,n;try{s=s||r("fs").readFileSync(t,"utf8")}catch(t){i(n,null,e)}var c=s.split("\n"),a=Math.max(e-3,0),s=Math.min(c.length,e+3),s=c.slice(a,s).map(function(t,i){return((i=i+a+1)==e?"  > ":"    ")+i+"| "+t}).join("\n");throw n.path=t,n.message=(t||"Jade")+":"+e+"\n"+s+"\n\n"+n.message,n}},{fs:2}],2:[function(t,i,n){},{}]},{},[1])(1)},"object"==typeof __crisp_void_exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof __crisp_void_define&&define.amd?define([],n):(void 0!==c?e=c:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.jade=n());var oi=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],e=!0,s=!1,c=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done)&&(n.push(a.value),!i||n.length!==i);e=!0);}catch(t){s=!0,c=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw c}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function ui(t,i,n){return d(t,"symbol"!=(void 0===i?"undefined":hi(i))?i+"":i,n),n}var a=Object.defineProperty,r=Object.defineProperties,h=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,d=function(t,i,n){return i in t?a(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n},li=function(t,i){for(var n in i=i||{})l.call(i,n)&&d(t,n,i[n]);if(u){var e=!0,s=!1,c=void 0;try{for(var a,r=u(i)[Symbol.iterator]();!(e=(a=r.next()).done);e=!0)n=a.value,f.call(i,n)&&d(t,n,i[n])}catch(t){s=!0,c=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw c}}}return t},fi=function(t,i){return r(t,h(i))};c.PetiteVue=function(t){function r(t){if(k(t)){for(var i={},n=0;n<t.length;n++){var e=t[n],s=(f(e)?function(t){var i={};return t.split(a).forEach(function(t){!t||1<(t=t.split(o)).length&&(i[t[0].trim()]=t[1].trim())}),i}:r)(e);if(s)for(var c in s)i[c]=s[c]}return i}return f(t)||x(t)?t:void 0}var a=/;(?![^(]*\))/g,o=/:(.+)/;function d(t,i){if(t===i)return!0;var n=l(t),e=l(i);if(n||e)return!(!n||!e)&&t.getTime()===i.getTime();if(n=k(t),e=k(i),n||e)return!(!n||!e)&&function(t,i){if(t.length!==i.length)return!1;for(var n=!0,e=0;n&&e<t.length;e++)n=d(t[e],i[e]);return n}(t,i);if(n=x(t),e=x(i),n||e){if(!n||!e)return!1;if(Object.keys(t).length!==Object.keys(i).length)return!1;for(var s in t){var c=t.hasOwnProperty(s),a=i.hasOwnProperty(s);if(c&&!a||!c&&a||!d(t[s],i[s]))return!1}}return String(t)===String(i)}function v(t,i){return t.findIndex(function(t){return d(t,i)})}function h(t,i){return n.call(t,i)}function p(t){return"[object Map]"===g(t)}function u(t){return"symbol"==(void 0===t?"undefined":hi(t))}function y(t){return f(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t}function m(t){var i=parseFloat(t);return isNaN(i)?t:i}var s=Object.assign,n=Object.prototype.hasOwnProperty,k=Array.isArray,l=function(t){return t instanceof Date},f=function(t){return"string"==typeof t},x=function(t){return null!==t&&"object"==(void 0===t?"undefined":hi(t))},i=Object.prototype.toString,g=function(t){return i.call(t)},e=/-(\w)/g,_=(W=function(i){var n=Object.create(null);return function(t){return n[t]||(n[t]=i(t))}})(function(t){return t.replace(e,function(t,i){return i?i.toUpperCase():""})}),c=/\B([A-Z])/g,w=W(function(t){return t.replace(c,"-$1").toLowerCase()});function b(t,i){i&&i.active&&i.effects.push(t)}var $=function(t){return(t=new Set(t)).w=0,t.n=0,t},F=function(t){return 0<(t.w&C)},j=function(t){return 0<(t.n&C)},E=new WeakMap,z=0,C=1,S=void 0,A=Symbol(""),I=Symbol(""),q=(D.prototype.run=function(){if(!this.active)return this.fn();for(var t=S,i=B;t;){if(t===this)return;t=t.parent}try{return this.parent=S,B=!0,C=1<<++z,(z<=30?function(t){var i=t.deps;if(i.length)for(var n=0;n<i.length;n++)i[n].w|=C}:O)(S=this),this.fn()}finally{z<=30&&function(t){var i=t.deps;if(i.length){for(var n=0,e=0;e<i.length;e++){var s=i[e];F(s)&&!j(s)?s.delete(t):i[n++]=s,s.w&=~C,s.n&=~C}i.length=n}}(this),C=1<<--z,S=this.parent,B=i,this.parent=void 0}},D.prototype.stop=function(){this.active&&(O(this),this.onStop&&this.onStop(),this.active=!1)},D);function D(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2];this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,b(this,n)}function O(t){var i=t.deps;if(i.length){for(var n=0;n<i.length;n++)i[n].delete(t);i.length=0}}function R(t){t.effect.stop()}var B=!0,M=[];function N(t,i,n){var e;B&&S&&((e=E.get(t))||E.set(t,e=new Map),(t=e.get(n))||e.set(n,t=$()),n=t,t=!1,z<=30?j(n)||(n.n|=C,t=!F(n)):t=!n.has(S),t&&(n.add(S),S.deps.push(n)))}function T(t,i,n,e,s,c){var a=E.get(t);if(a){var r=[];if("clear"===i)r=[...a.values()];else if("length"===n&&k(t))a.forEach(function(t,i){("length"===i||e<=i)&&r.push(t)});else switch(void 0!==n&&r.push(a.get(n)),i){case"add":k(t)?y(n)&&r.push(a.get("length")):(r.push(a.get(A)),p(t)&&r.push(a.get(I)));break;case"delete":k(t)||(r.push(a.get(A)),p(t)&&r.push(a.get(I)));break;case"set":p(t)&&r.push(a.get(A))}if(1===r.length)r[0]&&U(r[0]);else{var o=[],h=!0,u=!1,i=void 0;try{for(var l,f=r[Symbol.iterator]();!(h=(l=f.next()).done);h=!0){var d=l.value;d&&o.push(...d)}}catch(t){u=!0,i=t}finally{try{!h&&f.return&&f.return()}finally{if(u)throw i}}U($(o))}}}function U(t,i){var n=!0,e=!1,s=void 0;try{for(var c,a=(k(t)?t:[...t])[Symbol.iterator]();!(n=(c=a.next()).done);n=!0){var r=c.value;r===S&&!r.allowRecurse||(r.scheduler?r.scheduler():r.run())}}catch(t){e=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(e)throw s}}}var P,L=function(t,i){for(var n=Object.create(null),e="__proto__,__v_isRef,__isVue".split(","),s=0;s<e.length;s++)n[e[s]]=!0;return function(t){return!!n[t]}}(),J=new Set(Object.getOwnPropertyNames(Symbol).map(function(t){return Symbol[t]}).filter(u)),V=G(),W=G(!0),H=(P={},["includes","indexOf","lastIndexOf"].forEach(function(r){P[r]=function(){for(var t=st(this),i=0,n=this.length;i<n;i++)N(t,0,i+"");for(var e=arguments.length,s=Array(e),c=0;c<e;c++)s[c]=arguments[c];var a=t[r](...s);return-1===a||!1===a?t[r](...s.map(st)):a}}),["push","pop","shift","unshift","splice"].forEach(function(c){P[c]=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];M.push(B),B=!1;var e=st(this)[c].apply(this,i),s=M.pop();return B=void 0===s||s,e}}),P);function G(){var s=0<arguments.length&&void 0!==arguments[0]&&arguments[0],c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(t,i,n){if("__v_isReactive"===i)return!s;if("__v_isReadonly"===i)return s;if("__v_isShallow"===i)return c;if("__v_raw"===i&&n===(s?c?tt:Q:c?X:Y).get(t))return t;var e=k(t);return!s&&e&&h(H,i)?Reflect.get(H,i,n):(n=Reflect.get(t,i,n),(u(i)?J.has(i):L(i))||(s||N(t,0,i),c)?n:ct(n)?e&&y(i)?n:n.value:x(n)?s?nt(n,!0,Z,null,Q):it(n):n)}}var K={get:V,set:function(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return function(t,i,n,e){var s=t[i];if(et(s)&&ct(s)&&!ct(n))return!1;if(!r&&!et(n)&&(n&&n.__v_isShallow||(n=st(n),s=st(s)),!k(t)&&ct(s)&&!ct(n)))return s.value=n,!0;var c=k(t)&&y(i)?Number(i)<t.length:h(t,i),a=Reflect.set(t,i,n,e);return t===st(e)&&(c?(c=n,Object.is(c,s)||T(t,"set",i,n)):T(t,"add",i,n)),a}}(),deleteProperty:function(t,i){var n=h(t,i);t[i];var e=Reflect.deleteProperty(t,i);return e&&n&&T(t,"delete",i,void 0),e},has:function(t,i){var n=Reflect.has(t,i);return u(i)&&J.has(i)||N(t,0,i),n},ownKeys:function(t){return N(t,0,k(t)?"length":A),Reflect.ownKeys(t)}},Z={get:W,set:function(t,i){return!0},deleteProperty:function(t,i){return!0}},Y=new WeakMap,X=new WeakMap,Q=new WeakMap,tt=new WeakMap;function it(t){return et(t)?t:nt(t,!1,K,null,Y)}function nt(t,i,n,e,s){return x(t)&&(!t.__v_raw||i&&t.__v_isReactive)?(i=s.get(t))?i:0===(i=(c=t).u||!Object.isExtensible(c)?0:function(t){switch(g(c).slice(8,-1)){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}())?t:(n=new Proxy(t,2===i?e:n),s.set(t,n),n):t;var c}function et(t){return t&&t.__v_isReadonly}function st(t){var i=t&&t.__v_raw;return i?st(i):t}function ct(t){return t&&!0===t.__v_isRef}function at(t){return wt.then(t)}function rt(){var t=!0,i=!1,n=void 0;try{for(var e,s=_t[Symbol.iterator]();!(t=(e=s.next()).done);t=!0)(0,e.value)()}catch(t){i=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}_t.length=0,gt=!1}function ot(t){var e=t.el,s=t.get,i=t.effect,c=t.arg,a=t.modifiers,r=void 0;"class"===c&&(e.l=e.className),i(function(){var t=s();if(c)null!=a&&a.camel&&(c=_(c)),ht(e,c,t,r);else{for(var i in t)ht(e,i,t[i],r&&r[i]);for(var n in r)t&&n in t||ht(e,n,null)}r=t})}function ht(t,i,n,e){if("class"===i)t.setAttribute("class",function t(i){var n="";if(f(i))n=i;else if(k(i))for(var e=0;e<i.length;e++){var s=t(i[e]);s&&(n+=s+" ")}else if(x(i))for(var c in i)i[c]&&(n+=c+" ");return n.trim()}(t.l?[t.l,n]:n)||"");else if("style"===i){n=r(n);var s=t.style;if(n)if(f(n))n!==e&&(s.cssText=n);else{for(var c in n)$t(s,c,n[c]);if(e&&!f(e))for(var a in e)null==n[a]&&$t(s,a,"")}else t.removeAttribute("style")}else t instanceof SVGElement||!(i in t)||kt.test(i)?"true-value"===i?t._trueValue=n:"false-value"===i?t._falseValue=n:null!=n?t.setAttribute(i,n):t.removeAttribute(i):(t[i]=n,"value"===i&&(t._value=n))}function ut(t,i,n,e){t.addEventListener(i,n,e)}function lt(t){var i=t.el,n=t.get,e=t.exp,s=t.arg,c=t.ctx,a=t.modifiers;if(s){var r,o=function(t){jt.test(e)?n(""+e)(t):(c.scope.$event=t,n(""+e),delete c.scope.$event)};if("vue:mounted"!==s){if("vue:unmounted"===s)return function(){return o()};a&&("click"===s&&(a.right&&(s="contextmenu"),a.middle&&(s="mouseup")),r=o,o=function(t){if(!("key"in t)||w(t.key)in a){for(var i in a)if((i=zt[i])&&i(t,a))return;return r(t)}}),ut(i,s,o,a)}else at(o)}}function ft(t){return null==t?"":x(t)?JSON.stringify(t,null,2):String(t)}function dt(t){return"_value"in t?t._value:t.value}function vt(t,i){var n=i?"_trueValue":"_falseValue";return n in t?t[n]:i}function pt(t){t.target.composing=!0}function yt(t){var i;(t=t.target).composing&&(t.composing=!1,i=t,(t=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),i.dispatchEvent(t))}function mt(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];throw console.error(i),"ERROR"}Promise.resolve();var gt=!1,_t=[],wt=Promise.resolve(),bt=function(t){_t.includes(t)||_t.push(t),gt||(gt=!0,at(rt))},kt=/^(spellcheck|draggable|form|list|type)$/,xt=/\s*!important$/,$t=function i(n,e,t){k(t)?t.forEach(function(t){return i(n,e,t)}):e.startsWith("--")?n.setProperty(e,t):xt.test(t)?n.setProperty(w(e),t.replace(xt,""),"important"):n[e]=t},Ft=function(t,i){var n=t.getAttribute(i);return null!=n&&t.removeAttribute(i),n},jt=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Et=["ctrl","shift","alt","meta"],zt={stop:function(t){return t.stopPropagation()},prevent:function(t){return t.preventDefault()},self:function(t){return t.target!==t.currentTarget},ctrl:function(t){return!t.ctrlKey},shift:function(t){return!t.shiftKey},alt:function(t){return!t.altKey},meta:function(t){return!t.metaKey},left:function(t){return"button"in t&&0!==t.button},middle:function(t){return"button"in t&&1!==t.button},right:function(t){return"button"in t&&2!==t.button},exact:function(i,n){return Et.some(function(t){return i[t+"Key"]&&!n[t]})}},Ct=function(t){var i=t.el,n=t.get;(0,t.effect)(function(){i.textContent=ft(n())})};({}).constructor.prototype.valueOf;var St={true:!0,false:!1,null:null,undefined:void 0},At={};function It(){}"+ - * / % === !== == != < > <= >= && || ! =".split(" ").forEach(function(t){At[t]=!0});var qt={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};function Dt(t,i){this.lexer=t,this.options=i}function Ot(t){return t.type===Dt.Identifier||t.type===Dt.MemberExpression}function Rt(){}function Bt(t,i){this.ast=new Dt(t,i),this.astCompiler=new Rt}function Mt(t,i,n){try{return Ut(i)(t)}catch(t){console.error(t)}}function Nt(t,i){var n=t.nodeType;if(1===n){var e=t;if(!e.hasAttribute("v-pre")){var s=void 0;if(Ft(e,"v-cloak"),s=Ft(e,"v-if"))return function(t,i,e){var s=t.parentElement,c=new Comment("v-if");s.insertBefore(c,t);for(var n,a=[{exp:i,el:t}],r=void 0;(n=t.nextElementSibling)&&(r=null,""===Ft(n,"v-else")||(r=Ft(n,"v-else-if")));)s.removeChild(n),a.push({exp:r,el:n});function o(){h&&(s.insertBefore(c,h.el),h.remove(),h=void 0)}i=t.nextSibling,s.removeChild(t);var h=void 0,u=-1;return e.effect(function(){for(var t=0;t<a.length;t++){var i=(n=a[t]).exp,n=n.el;if(!i||Pt(e.scope,i))return void(t!==u&&(o(),(h=new ci(n,e)).insert(s,c),s.removeChild(c),u=t))}u=-1,o()}),i}(e,s,i);if(s=Ft(e,"v-for"))return Gt(e,s,i);!(s=Ft(e,"v-scope"))&&""!==s||(f=s?Pt(i.scope,s):{},i=ei(i,f),f.$template&&ni(e,f.$template));var c=null!=Ft(e,"v-once");c&&(Xt=!0),(s=Ft(e,"ref"))&&ii(e,Kt,'"'+s+'"',i),Qt(e,i);for(var a=[],r=[...e.attributes],o=0;o<r.length;o++){var h=(u=r[o]).name,u=u.value;Zt.test(h)&&"v-cloak"!==h&&("v-model"===h?a.unshift([h,u]):"@"===h[0]||/^v-on\b/.test(h)?a.push([h,u]):ti(e,h,u,i))}var l=!0,f=!1,s=void 0;try{for(var d,v=a[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var p=d.value,y=oi(p,2),m=y[0],g=y[1];ti(e,m,g,i)}}catch(t){f=!0,s=t}finally{try{!l&&v.return&&v.return()}finally{if(f)throw s}}c&&(Xt=!1)}}else if(3===n){var _=t.data;if(_.includes(i.delimiters[0])){for(var w,b=[],k=0;w=i.delimitersRE.exec(_);){var x=_.slice(k,w.index);x&&b.push(JSON.stringify(x)),b.push("$s("+w[1]+")"),k=w.index+w[0].length}k<_.length&&b.push(JSON.stringify(_.slice(k))),ii(t,Ct,b.join("+"),i)}}else 11===n&&Qt(t,i)}function Tt(t){var e=fi(li({delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g},t),{scope:t?t.scope:it({}),dirs:t?t.dirs:{},effects:[],blocks:[],cleanups:[],effect:function(t){if(Xt)return bt(t),t;var i,n=(i={scheduler:function(){return bt(n)}},t.effect&&(t=t.effect.fn),t=new q(t),s(t,i),i.scope&&b(t,i.scope),i.lazy||t.run(),(i=t.run.bind(t)).effect=t,i);return e.effects.push(n),n}});return e}It.prototype={constructor:It,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var i,n,e,s,c,a=this.text.charAt(this.index);'"'===a||"'"===a?this.readString(a):this.isNumber(a)||"."===a&&this.isNumber(this.peek())?this.readNumber():this.isIdentifierStart(this.peekMultichar())?this.readIdent():this.is(a,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:a}),this.index++):this.isWhitespace(a)?this.index++:(n=(i=a+this.peek())+this.peek(2),e=At[a],s=At[i],c=At[n],e||s||c?(this.tokens.push({index:this.index,text:a=c?n:s?i:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(t,i){return-1!==i.indexOf(t)},peek:function(t){return this.index+(t=t||1)<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,i){return this.isValidIdentifierStart(t,i)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),i=this.peek();if(!i)return t;var n=t.charCodeAt(0),e=i.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=e&&e<=57343?t+i:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,i,n){throw n=n||this.index,mt("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n=void 0!==i?"s "+i+"-"+this.index+" ["+this.text.substring(i,n)+"]":" "+n,this.text)},readNumber:function(){for(var t="",i=this.index;this.index<this.text.length;){var n=this.text.charAt(this.index).toLowerCase();if("."===n||this.isNumber(n))t+=n;else{var e=this.peek();if("e"===n&&this.isExpOperator(e))t+=n;else if(this.isExpOperator(n)&&e&&this.isNumber(e)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||e&&this.isNumber(e)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:i,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var i=this.peekMultichar();if(!this.isIdentifierContinue(i))break;this.index+=i.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var i=this.index;this.index++;for(var n="",e=t,s=!1;this.index<this.text.length;){var c,a=this.text.charAt(this.index);if(e+=a,s)"u"===a?((c=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+c+"]"),this.index+=4,n+=String.fromCharCode(parseInt(c,16))):n+=qt[a]||a,s=!1;else if("\\"===a)s=!0;else{if(a===t)return this.index++,void this.tokens.push({index:i,text:e,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",i)}},Dt.Program="Program",Dt.ExpressionStatement="ExpressionStatement",Dt.AssignmentExpression="AssignmentExpression",Dt.ConditionalExpression="ConditionalExpression",Dt.LogicalExpression="LogicalExpression",Dt.BinaryExpression="BinaryExpression",Dt.UnaryExpression="UnaryExpression",Dt.CallExpression="CallExpression",Dt.MemberExpression="MemberExpression",Dt.Identifier="Identifier",Dt.Literal="Literal",Dt.ArrayExpression="ArrayExpression",Dt.Property="Property",Dt.ObjectExpression="ObjectExpression",Dt.ThisExpression="ThisExpression",Dt.LocalsExpression="LocalsExpression",Dt.NGValueParameter="NGValueParameter",Dt.prototype={ast:function(t){return this.text=t,this.tokens=this.lexer.lex(t),t=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Dt.Program,body:t}},expressionStatement:function(){return{type:Dt.ExpressionStatement,expression:this.expression()}},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Ot(t))throw mt("lval","Trying to assign a value to a non l-value");t={type:Dt.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,i,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(i=this.expression(),{type:Dt.ConditionalExpression,test:n,alternate:t,consequent:i}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Dt.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Dt.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,i=this.relational();t=this.expect("==","!=","===","!==");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.relational()};return i},relational:function(){for(var t,i=this.additive();t=this.expect("<",">","<=",">=");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.additive()};return i},additive:function(){for(var t,i=this.multiplicative();t=this.expect("+","-");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.multiplicative()};return i},multiplicative:function(){for(var t,i=this.unary();t=this.expect("*","/","%");)i={type:Dt.BinaryExpression,operator:t.text,left:i,right:this.unary()};return i},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Dt.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,i;for(this.expect("(")?(t=this.expression(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=Object.assign({},this.selfReferential[this.consume().text]):St.hasOwnProperty(this.peek().text)?t={type:Dt.Literal,value:St[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());i=this.expect("(","[",".");)"("===i.text?(t={type:Dt.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===i.text?(t={type:Dt.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===i.text?t={type:Dt.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)for(;t.push(this.expression()),this.expect(","););return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Dt.Identifier,name:t.text}},constant:function(){return{type:Dt.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)for(;!this.peek("]")&&(t.push(this.expression()),this.expect(",")););return this.consume("]"),{type:Dt.ArrayExpression,elements:t}},object:function(){var t,i=[];if("}"!==this.peekToken().text)for(;!this.peek("}")&&(t={type:Dt.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),i.push(t),this.expect(",")););return this.consume("}"),{type:Dt.ObjectExpression,properties:i}},throwError:function(t,i){throw mt("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",i.text,t,i.index+1,this.text,this.text.substring(i.index))},consume:function(t){if(0===this.tokens.length)throw mt("ueoe","Unexpected end of expression: {0}",this.text);var i=this.expect(t);return i||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),i},peekToken:function(){if(0===this.tokens.length)throw mt("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,i,n,e){return this.peekAhead(0,t,i,n,e)},peekAhead:function(t,i,n,e,s){if(this.tokens.length>t){var c=this.tokens[t];if((t=c.text)===i||t===n||t===e||t===s||!i&&!n&&!e&&!s)return c}return!1},expect:function(t,i,n,e){return!!(e=this.peek(t,i,n,e))&&(this.tokens.shift(),e)},selfReferential:{this:{type:Dt.ThisExpression},$locals:{type:Dt.LocalsExpression}}},Rt.prototype={compile:function(i){var e,s=this;(function i(t,n){var e,s,c=t.isPure=function(t,i){switch(t.type){case Dt.MemberExpression:if(t.computed)return!1;break;case Dt.UnaryExpression:return 1;case Dt.BinaryExpression:return"+"!==t.operator&&1;case Dt.CallExpression:return!1}return void 0===i?2:i}(t,n);switch(t.type){case Dt.Program:e=!0,t.body.forEach(function(t){i(t.expression,c),e=e&&t.expression.constant}),t.constant=e;break;case Dt.Literal:t.constant=!0,t.toWatch=[];break;case Dt.UnaryExpression:i(t.argument,c),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Dt.BinaryExpression:i(t.left,c),i(t.right,c),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Dt.LogicalExpression:i(t.left,c),i(t.right,c),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Dt.ConditionalExpression:i(t.test,c),i(t.alternate,c),i(t.consequent,c),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Dt.Identifier:t.constant=!1,t.toWatch=[t];break;case Dt.MemberExpression:i(t.object,c),t.computed&&i(t.property,c),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Dt.CallExpression:e=!1,s=[],t.arguments.forEach(function(t){i(t,c),e=e&&t.constant,s.push.apply(s,t.toWatch)}),t.constant=e,t.toWatch=[t];break;case Dt.AssignmentExpression:i(t.left,c),i(t.right,c),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Dt.ArrayExpression:e=!0,s=[],t.elements.forEach(function(t){i(t,c),e=e&&t.constant,s.push.apply(s,t.toWatch)}),t.constant=e,t.toWatch=s;break;case Dt.ObjectExpression:e=!0,s=[],t.properties.forEach(function(t){i(t.value,c),e=e&&t.value.constant,s.push.apply(s,t.value.toWatch),t.computed&&(i(t.key,!1),e=e&&t.key.constant,s.push.apply(s,t.key.toWatch))}),t.constant=e,t.toWatch=s;break;case Dt.ThisExpression:case Dt.LocalsExpression:t.constant=!1,t.toWatch=[]}})(i),(t=function(t){if(1===i.body.length&&Ot(i.body[0].expression))return{type:Dt.AssignmentExpression,left:i.body[0].expression,right:{type:Dt.NGValueParameter},operator:"="}}())&&(e=this.recurse(t));var c,t=function(t){if(1===t.length){var i=t[0].expression;return 1!==(t=i.toWatch).length||t[0]!==i?t:void 0}}(i.body);t&&(c=[],t.forEach(function(t,i){var n=s.recurse(t);n.isPure=t.isPure,t.input=n,c.push(n),t.watchId=i}));var a=[];return i.body.forEach(function(t){a.push(s.recurse(t.expression))}),t=0===i.body.length?noop:1===i.body.length?a[0]:function(i,n){var e;return a.forEach(function(t){e=t(i,n)}),e},e&&(t.assign=function(t,i,n){return e(t,n,i)}),c&&(t.inputs=c),t},recurse:function(t,o,i){var c,h,u,n=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Dt.Literal:return this.value(t.value,o);case Dt.UnaryExpression:return h=this.recurse(t.argument),this["unary"+t.operator](h,o);case Dt.BinaryExpression:case Dt.LogicalExpression:return c=this.recurse(t.left),h=this.recurse(t.right),this["binary"+t.operator](c,h,o);case Dt.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),o);case Dt.Identifier:return n.identifier(t.name,o,i);case Dt.MemberExpression:return c=this.recurse(t.object,!1,!!i),t.computed||(h=t.property.name),t.computed&&(h=this.recurse(t.property)),t.computed?this.computedMember(c,h,o,i):this.nonComputedMember(c,h,o,i);case Dt.CallExpression:return u=[],t.arguments.forEach(function(t){u.push(n.recurse(t))}),h=this.recurse(t.callee,!0),function(t,i,n,e){var s,c=h(t,i,n,e);if(null!=c.value){for(var a=[],r=0;r<u.length;++r)a.push(u[r](t,i,n,e));s=c.value.apply(c.context,a)}return o?{value:s}:s};case Dt.AssignmentExpression:return c=this.recurse(t.left,!0,1),h=this.recurse(t.right),function(t,i,n,e){var s=c(t,i,n,e),e=h(t,i,n,e);return s.context[s.name]=e,o?{value:e}:e};case Dt.ArrayExpression:return u=[],t.elements.forEach(function(t){u.push(n.recurse(t))}),function(t,i,n,e){for(var s=[],c=0;c<u.length;++c)s.push(u[c](t,i,n,e));return o?{value:s}:s};case Dt.ObjectExpression:return u=[],t.properties.forEach(function(t){t.computed?u.push({key:n.recurse(t.key),computed:!0,value:n.recurse(t.value)}):u.push({key:t.key.type===Dt.Identifier?t.key.name:""+t.key.value,computed:!1,value:n.recurse(t.value)})}),function(t,i,n,e){for(var s={},c=0;c<u.length;++c)u[c].computed?s[u[c].key(t,i,n,e)]=u[c].value(t,i,n,e):s[u[c].key]=u[c].value(t,i,n,e);return o?{value:s}:s};case Dt.ThisExpression:return function(t){return o?{value:t}:t};case Dt.LocalsExpression:return function(t,i){return o?{value:i}:i};case Dt.NGValueParameter:return function(t,i,n){return o?{value:n}:n}}},"unary+":function(s,c){return function(t,i,n,e){return e=void 0!==(e=s(t,i,n,e))?+e:0,c?{value:e}:e}},"unary-":function(s,c){return function(t,i,n,e){return e=void 0!==(e=s(t,i,n,e))?-e:-0,c?{value:e}:e}},"unary!":function(s,c){return function(t,i,n,e){return e=!s(t,i,n,e),c?{value:e}:e}},"binary+":function(c,a,r){return function(t,i,n,e){var s,e=(s=c(t,i,n,e),e=a(t,i,n,e),void 0===s?e:void 0===e?s:s+e);return r?{value:e}:e}},"binary-":function(c,a,r){return function(t,i,n,e){var s=c(t,i,n,e),e=(void 0!==s?s:0)-(void 0!==(e=a(t,i,n,e))?e:0);return r?{value:e}:e}},"binary*":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)*c(t,i,n,e),a?{value:e}:e}},"binary/":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)/c(t,i,n,e),a?{value:e}:e}},"binary%":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)%c(t,i,n,e),a?{value:e}:e}},"binary===":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)===c(t,i,n,e),a?{value:e}:e}},"binary!==":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)!==c(t,i,n,e),a?{value:e}:e}},"binary==":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)==c(t,i,n,e),a?{value:e}:e}},"binary!=":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)!=c(t,i,n,e),a?{value:e}:e}},"binary<":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)<c(t,i,n,e),a?{value:e}:e}},"binary>":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)>c(t,i,n,e),a?{value:e}:e}},"binary<=":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)<=c(t,i,n,e),a?{value:e}:e}},"binary>=":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)>=c(t,i,n,e),a?{value:e}:e}},"binary&&":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)&&c(t,i,n,e),a?{value:e}:e}},"binary||":function(s,c,a){return function(t,i,n,e){return e=s(t,i,n,e)||c(t,i,n,e),a?{value:e}:e}},"ternary?:":function(s,c,a,r){return function(t,i,n,e){return e=(s(t,i,n,e)?c:a)(t,i,n,e),r?{value:e}:e}},value:function(t,i){return function(){return i?{context:void 0,name:void 0,value:t}:t}},identifier:function(s,c,a){return function(t,i,n,e){return i=i&&s in i?i:t,a&&1!==a&&i&&null==i[s]&&(i[s]={}),t=i?i[s]:void 0,c?{context:i,name:s,value:t}:t}},computedMember:function(r,o,h,u){return function(t,i,n,e){var s,c,a=r(t,i,n,e);return null!=a&&(s=o(t,i,n,e),s+="",u&&1!==u&&a&&!a[s]&&(a[s]={}),c=a[s]),h?{context:a,name:s,value:c}:c}},nonComputedMember:function(s,c,a,r){return function(t,i,n,e){return n=s(t,i,n,e),r&&1!==r&&n&&null==n[c]&&(n[c]={}),e=null!=n?n[c]:void 0,a?{context:n,name:c,value:e}:e}},inputs:function(s,c){return function(t,i,n,e){return e?e[c]:s(t,i,n)}}};var Ut=new function(){var e={};return function(t,i){var n;return t=t.trim(),(n=e[t])?n:new Bt(new It).parse(t)}},Pt=function(t,i,n){return Mt(t,i)},Lt={bind:ot,on:lt,show:function(t){var i=t.el,n=t.get,t=t.effect,e=i.style.display;t(function(){i.style.display=n()?e:"none"})},text:Ct,html:function(t){var i=t.el,n=t.get;(0,t.effect)(function(){i.innerHTML=n()})},model:function(t){function c(t){o(e+" = '"+t+"'")}var a,i,n,r=t.el,e=t.exp,o=t.get,s=t.effect,h=t.modifiers,u=r.type,l=(t=h||{}).trim,f=void 0===(t=t.number)?"number"===u:t;"SELECT"===r.tagName?(ut(a=r,"change",function(){var t=Array.prototype.filter.call(a.options,function(t){return t.selected}).map(function(t){return f?m(dt(t)):dt(t)});c(a.multiple?t:t[0])}),s(function(){for(var t=o(),i=a.multiple,n=0,e=a.options.length;n<e;n++){var s=a.options[n],c=dt(s);if(i)k(t)?s.selected=-1<v(t,c):s.selected=t.has(c);else if(d(dt(s),t))return void(a.selectedIndex!==n&&(a.selectedIndex=n))}i||-1===a.selectedIndex||(a.selectedIndex=-1)})):"checkbox"===u?(i=void 0,ut(r,"change",function(){var t,i,n,e=o(),s=r.checked;k(e)?(n=-1!==(i=v(e,t=dt(r))),s&&!n?c(e.concat(t)):!s&&n&&((e=[...e]).splice(i,1),c(e))):c(vt(r,s))}),s(function(){var t=o();k(t)?r.checked=-1<v(t,dt(r)):t!==i&&(r.checked=d(t,vt(r,!0))),i=t})):"radio"===u?(ut(r,"change",function(){c(dt(r))}),s(function(){var t=o();void 0!==t&&(r.checked=d(t,dt(r)))})):(n=function(t){return l?t.trim():f?m(t):t},ut(r,"compositionstart",pt),ut(r,"compositionend",yt),ut(r,null!=h&&h.lazy?"change":"input",function(){r.composing||c(n(r.value))}),l&&ut(r,"change",function(){r.value=r.value.trim()}),s(function(){var t,i;r.composing||(t=r.value,i=o(),document.activeElement===r&&n(t)===i||t!==i&&(r.value=i))}))},effect:function(t){t.el;var i=t.ctx,n=t.exp,e=t.effect;at(function(){return e(function(){return Mt(i.scope,n)})})}},Jt=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Vt=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Wt=/^\(|\)$/g,Ht=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,Gt=function(e,t,u){if(n=t.match(Jt)){var i=e.nextSibling,l=e.parentElement,f=new Text("");l.insertBefore(f,e),l.removeChild(e);var d=n[2].trim(),a=void 0,r=void 0,o=void 0,t=void 0,h=n[1].trim().replace(Wt,"").trim(),v=!1,n="key",p=e.getAttribute(n)||e.getAttribute(n=":key")||e.getAttribute(n="v-bind:key");function y(t,n,i,e){var s={};a?a.forEach(function(t,i){return s[t]=n[v?i:t]}):s[h]=n,e?(r&&(s[r]=e),o&&(s[o]=i)):r&&(s[r]=i);var c=ei(u,s),e=p?Pt(c.scope,p):i;return t.set(e,i),c.key=e,c}function m(t,i){var n=new ci(e,t);return n.key=t.key,n.insert(l,i),n}p&&(e.removeAttribute(n),"key"===n&&(p=JSON.stringify(p))),(t=h.match(Vt))&&(h=h.replace(Vt,"").trim(),r=t[1].trim(),t[2]&&(o=t[2].trim())),(t=h.match(Ht))&&(a=t[1].split(",").map(function(t){return t.trim()}),v="["===h[0]);var g=void 0,_=void 0,w=void 0,b=!1;return u.effect(function(){var t=Pt(u.scope,d),i=w,t=function(t){var i=new Map,n=[];if(k(t))for(var e=0;e<t.length;e++)n.push(y(i,t[e],e));else if("number"==typeof t)for(var s=0;s<t;s++)n.push(y(i,s+1,s));else if(x(t)){var c,a=0;for(c in t)n.push(y(i,t[c],a++,c))}return[n,i]}(t),t=oi(t,2);if(_=t[0],w=t[1],b){for(var n=0;n<g.length;n++)w.has(g[n].key)||g[n].remove();for(var e=[],s=void 0,c=void 0,a=_.length;a--;){var r=_[a],o=i.get(r.key),h=void 0;null==o?h=m(r,s?s.el:f):(h=g[o],Object.assign(h.ctx.scope,r.scope),o===a||g[o+1]===s&&c!==s||(c=h).insert(l,s?s.el:f)),e.unshift(s=h)}g=e}else g=_.map(function(t){return m(t,f)}),b=!0}),i}},Kt=function(t){var i=t.el,n=t.ctx.scope.$refs,e=t.get,t=t.effect,s=void 0;return t(function(){var t=e();n[t]=i,s&&t!==s&&delete n[s],s=t}),function(){s&&delete n[s]}},Zt=/^(?:v-|:|@)/,Yt=/\.([\w-]+)/g,Xt=!(Bt.prototype={constructor:Bt,parse:function(t){var i=this.getAst(t),n=this.astCompiler.compile(i.ast);return n.literal=0===(t=i.ast).body.length||1===t.body.length&&(t.body[0].expression.type===Dt.Literal||t.body[0].expression.type===Dt.ArrayExpression||t.body[0].expression.type===Dt.ObjectExpression),n.constant=i.ast.constant,n.oneTime=i.oneTime,n},getAst:function(t){var i=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(i=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:i}}}),Qt=function(t,i){for(var n=t.firstChild;n;)n=Nt(n,i)||n.nextSibling},ti=function(t,i,n,e){var s,c=void 0,a=void 0,r=i.replace(Yt,function(t,i){return(a=a||{})[i]=!0,""}),o=":"===r[0]?(c=ot,r.slice(1)):"@"===r[0]?(c=lt,r.slice(1)):(s=0<(o=r.indexOf(":"))?r.slice(2,o):r.slice(2),c=Lt[s]||e.dirs[s],0<o?r.slice(o+1):void 0);c&&(ii(t,c=c===ot&&"ref"===o?Kt:c,n,e,o,a),t.removeAttribute(i))},ii=function(t,i,n,e,s,c){(c=i({el:t,get:function(){return Pt(e.scope,0<arguments.length&&void 0!==arguments[0]?arguments[0]:n)},effect:e.effect,ctx:e,exp:n,arg:s,modifiers:c}))&&e.cleanups.push(c)},ni=function(t,i){"#"!==i[0]?t.innerHTML=i:(i=document.querySelector(i),t.appendChild(i.content.cloneNode(!0)))},ei=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=t.scope,n=Object.create(s);Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)),n.$refs=Object.create(s.$refs);var c=it(new Proxy(n,{set:function(t,i,n,e){return e!==c||t.hasOwnProperty(i)?Reflect.set(t,i,n,e):Reflect.set(s,i,n)}}));return si(c),fi(li({},t),{scope:c})},si=function(t){var i=!0,n=!1,e=void 0;try{for(var s,c=Object.keys(t)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var a=s.value;"function"==typeof t[a]&&(t[a]=t[a].bind(t))}}catch(t){n=!0,e=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw e}}},ci=(ai.prototype.insert=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.isFragment)if(this.start)for(var n=void 0,e=this.start;e&&(n=e.nextSibling,t.insertBefore(e,i),e!==this.end);)e=n;else this.start=new Text(""),this.end=new Text(""),t.insertBefore(this.end,i),t.insertBefore(this.start,this.end),t.insertBefore(this.template,this.end);else t.insertBefore(this.template,i)},ai.prototype.remove=function(){if(this.parentCtx&&(-1<(s=(e=this.parentCtx.blocks).indexOf(this))&&e.splice(s,1)),this.start)for(var t=this.start.parentNode,i=void 0,n=this.start;n&&(i=n.nextSibling,t.removeChild(n),n!==this.end);)n=i;else this.template.parentNode.removeChild(this.template);var e,s;this.teardown()},ai.prototype.teardown=function(){this.ctx.blocks.forEach(function(t){t.teardown()}),this.ctx.effects.forEach(R),this.ctx.cleanups.forEach(function(t){return t()})},di(ai.prototype,[{key:"el",get:function(){return this.start||this.template}}]),ai);function ai(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];ui(this,"template"),ui(this,"ctx"),ui(this,"key"),ui(this,"parentCtx"),ui(this,"isFragment"),ui(this,"start"),ui(this,"end"),this.isFragment=t instanceof HTMLTemplateElement,n?this.template=t:this.isFragment?this.template=t.content.cloneNode(!0):this.template=t.cloneNode(!0),n?this.ctx=i:((this.parentCtx=i).blocks.push(this),this.ctx=Tt(i)),Nt(this.template,this.ctx)}function ri(t){return t.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&")}return V=function(t){var i,n=Tt();t&&(n.scope=it(t),si(n.scope),t.$delimiters)&&(i=n.delimiters=t.$delimiters,i=(t=oi(i,2))[0],t=t[1],n.delimitersRE=new RegExp(ri(i)+"([^]+?)"+ri(t),"g"));var e=void 0;return n.scope.$s=ft,n.scope.$nextTick=at,n.scope.$refs=Object.create(null),{directive:function(t,i){return i?(n.dirs[t]=i,this):n.dirs[t]},mount:function(t){if("string"!=typeof t||(t=document.querySelector(t))){var i=void 0;return(i=(t=t||document.documentElement).hasAttribute("v-scope")?[t]:[...t.querySelectorAll("[v-scope]")].filter(function(t){return!t.matches("[v-scope] [v-scope]")})).length||(i=[t]),e=i.map(function(t){return new ci(t,n,!0)}),this}},unmount:function(){e.forEach(function(t){return t.teardown()})}}},(W=document.currentScript)&&W.hasAttribute("init")&&V().mount(),t.createApp=V,t.nextTick=at,t.reactive=it,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module",t}({}),i=c,y.prototype.init=function(t){var i=(n.prototype.code=function(t){return this.parent.template.render("smiley",{name:t,size:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"small"})},n.prototype.parse=function(t){var i,n,e=void 0,s=void 0,c=t;for(e in this.d)if(this.d.hasOwnProperty(e))for(i=this.d[e];null!==(n=c.match(i));)s="small",c===n[2]&&(s="large"),n=this.code(e,s),c=c.replace(i,"$1"+n+"$3");return c},n.prototype.count=function(t){var i=0,n=void 0,e=void 0,s=t;for(n in this.d)if(this.d.hasOwnProperty(n))for(e=this.d[n];!0===e.test(s);)i++,s=s.replace(e,"$1[]$3");return i},n.prototype.name=function(t){var i,n=void 0,e=null;for(n in this.d)if(this.d.hasOwnProperty(n)&&(i=this.d[n],t.match(i))){e=n;break}return e},n.prototype.p=function(){var t=void 0;for(t in this.d={},this.m)this.d[t]=new RegExp("(^|\\s|\\()"+this.m[t]+"($|\\s|\\))","i")},n);function n(t){this.parent=t,this.smiley_map={angry:":@",blushing:":$",confused:"x)",cool:"8)",crying:":'(",embarrased:":/",heart:"<3",laughing:":'D",sad:":(",sick:":S","small-smile":":)","big-smile":":D","thumbs-up":"+1",surprised:":o",tongue:":P",winking:";)"},this.m={angry:"((?:=|:)(?:-)?@)",blushing:"((?:=|:)(?:-)?\\$)",cool:"(8(?:-)?\\))",confused:"(x(?:-)?\\))",crying:"((?:=|:)'(?:-)?\\()",embarrased:"((?:=|:)(?:-)?\\/)",heart:"(&lt;3)",laughing:"((?:=|:)(?:-)?'D)",sad:"((?:=|:)(?:-)?(?:\\(|\\|))",sick:"((?:=|:)(?:-)?S)","small-smile":"((?:=|:)(?:-)?\\))","big-smile":"((?:=|:)(?:-)?D)","thumbs-up":"(\\+1)",surprised:"((?:=|:)(?:-)?o)",tongue:"((?:=|:)(?:-)?P)",winking:"(;(?:-)?\\))"},this.p()}var e=(s.prototype.format=function(t){for(var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],s=void 0,c=t,s=0;s<this.g.length;s++)i=this.g[s],-1===e.indexOf(i)&&(c=this._[i].bind(this)(c,n));return c},s.prototype.replace=function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=void 0,e=t,n=0;n<i.length;n++)e=e.replace("%"+(n+1)+"s",i[n]);return e},s.prototype.attribute=function(t){return this.b(t,{},this.k)},s.prototype.html=function(t){return this.b(t,{},!0===(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?this.$:this.F)},s.prototype.escape_regex=function(t){return t.replace(this.j,"\\$&")},s.prototype.b=function(t){var i,n=void 0,e=t,s=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||this.F;for(n in s)s.hasOwnProperty(n)&&(i=s[n],e=e.replace(i,n));return e},s.prototype.z=function(t){return t.replace(/\n(\s+)?\n(\s+)?\n/g,"\n\n")},s.prototype.C=function(t){var i=this.parent.template.render("new_line",{},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return t.trim().replace(/\n/g,i)},s.prototype.S=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.A.email,function(t,i,n,e){return""+i+s.parent.template.render("link_email",{email:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.I=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.A.phone,function(t,i,n,e){return""+i+s.parent.template.render("link_phone",{phone:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.q=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t="\n"+t+"\n";for(var n=0;n<this.D.length;n++)t=t.replace(this.D[n][1],this.O(this.D[n],i));return t=t.trim()},s.prototype.R=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.A.domain,function(t,i,n,e){return""+i+s.parent.template.render("link_domain",{domain_value:n,domain_name:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.B=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.A.uri,function(t,i,n,e){return""+i+s.parent.template.render("link_uri",{uri_value:n,uri_name:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.M=function(t){return this.parent.Smileys.parse(t)},s.prototype.N=function(t){var i=(t.value||"").match(this.T);i&&i[1]?(t.type=i[1],t.value=i[2]):t.type="none",t.value=(t.value||"").trim()},s.prototype.U=function(t){var s=(i=t.type.split("|")).slice(1,i.length-1).map(function(t){return(t||"").trim()}),i=t.value.split("\n").map(function(t){var i=(t=t.split("|")).slice(1,t.length-1).map(function(t){return(t||"").trim()}),n=s.length-i.length;if(0!=n)if(n<0)i=i.slice(0,s.length);else for(var e=0;e<n;e++)i.push("");return i});t.type=s,t.value=i},s.prototype.O=function(r){var o=this,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,i,n,e,s){var c="markdown_"+r[0],a={type:null,value:null,url_crisp_image:o.parent.config.url.crisp_image,no_external_link:o.parent.config.runtime.no_external_link||!1},i=("string"==typeof i?i:null)||"",s=("string"==typeof s?s:null)||"";return a.type=n,a.value=e,-1!==o.P.indexOf(r[0])&&"string"==typeof a.value&&(a.value=a.value.trim()),-1!==o.L.indexOf(r[0])&&"string"==typeof a.value&&(a.value=o.J(a.value)),null!==(e=o.V[c]||null)&&e.bind(o)(a),""+i+o.parent.template.render(c,a,h)+s}},s.prototype.J=function(t){return(t=this.b(t,{},this.W)).replace(this.H,function(t){return"&#"+t.charCodeAt(0)+";"})},s.prototype.G=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"gi",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new RegExp(""+(n.prefix||"")+t+(n.suffix||""),i)},s.prototype.K=function(){this.A={email:this.G("([\\w\\._-]+@[\\w\\.\\/_-]+)","gi",this.Z.links),phone:this.G("(\\+[0-9]{1,3}[ \\(\\)\\-0-9]{7,20})","gi",this.Z.links),domain:this.G(["((?:[^<>\\(\\)\\s,@]+)(?:\\.(?:",this.Y.map(this.escape_regex.bind(this)).join("|"),")))"].join(""),"gim",this.Z.links),uri:this.G("((?:https?|ftps?|file):(?:[^<>\\(\\)\\s,]+))","gim",this.Z.links)}},s.prototype.X=function(){this.D=[["code_block",this.G("(`{2,3})((?:\\n+)?(?:(?!\\2).(?:\\n+)?)*)(?:\\2)","gi",{prefix:"(\\s|<[^<>]+\\/>|^)",suffix:"(\\s|\\.|,|:|$)"})],["code_inline",this.G("(`{1})([^`]*)(?:\\2)","gim",{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:"(\\s|\\.|,|:|\\)|<\\/[^<>]+>|$)"})],["title",this.G("(#{1})(?:[\\s]+)([^#].*)","gim",this.Z.markdown_simple)],["title",this.G("(#{2})(?:[\\s]+)([^#].*)","gim",this.Z.markdown_simple)],["title",this.G("(#{3})(?:[\\s]+)([^#].*)","gim",this.Z.markdown_simple)],["title",this.G("(#{4})(?:[\\s]+)([^#].*)","gim",this.Z.markdown_simple)],["title",this.G("(#{5})(?:[\\s]+)([^#].*)","gim",this.Z.markdown_simple)],["title",this.G("(#{6})(?:[\\s]+)([^#].*)","gim",this.Z.markdown_simple)],["link_image",this.G("\\[!\\[(?:[^\\[]*)\\]\\(([^\\)]+)\\)\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)],["image",this.G("!\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)],["link_text",this.G("\\[([^\\[]+)\\]\\(([^\\)]+)\\)","gim",{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"})],["youtube",this.G("\\$\\{youtube\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)],["vimeo",this.G("\\$\\{vimeo\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)],["dailymotion",this.G("\\$\\{dailymotion\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)],["frame",this.G("\\$\\{frame\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)],["bold",this.G("(\\*\\*)(.*?)(?:\\2)","gim",this.Z.markdown_formatting)],["underline",this.G("(__)(.*?)(?:\\2)","gim",this.Z.markdown_formatting)],["italic",this.G("(\\*|_)(.*?)(?:\\2)","gim",this.Z.markdown_formatting)],["delete",this.G("(\\~\\~)(.*?)(?:\\2)","gim",this.Z.markdown_formatting)],["highlight",this.G("(\\+\\+)(.*?)(?:\\2)","gim",this.Z.markdown_formatting)],["list",this.G("(\\*)(?:[\\s]+)","gim",this.Z.markdown_list)],["list",this.G("(?:([\\d]{1,2})\\.)(?:[\\s]+)","gim",this.Z.markdown_list)],["blockquote",this.G("(&gt;|\\>)(?:[\\s]+)(.*)","gim",this.Z.markdown_simple)],["table",this.G("(?:(\\|(?:[^\\|\\r\\n]{0,999}\\|){1,19})(?: *\\n)(?:\\|(?: *\\-{1,99} *\\|){1,19}))((?: *\\n\\|(?:[^\\|\\r\\n]{0,999}\\|){1,19}){1,49})","gi",{prefix:"(\\s|^)",suffix:"(\\s|$)"})],["emphasis",this.G("(\\|{1})(?:[\\s]+)([^\\|].*)","gim",this.Z.markdown_simple)],["emphasis",this.G("(\\|{2})(?:[\\s]+)([^\\|].*)","gim",this.Z.markdown_simple)],["emphasis",this.G("(\\|{3})(?:[\\s]+)([^\\|].*)","gim",this.Z.markdown_simple)],["interpolate",this.G('(?:\\{\\{\\s*)([^\\{\\}\\|\\s]+)(?:\\s*\\|\\s*(?:(?:&quot;)|")([^&"]*)(?:(?:&quot;)|"))?(?:\\s*\\}\\})',"gim",{prefix:"(\\s|\\(|^)",suffix:""})],["line",this.G("(-{3,})","gim",{prefix:"(^)(\\s+)?",suffix:"(\\s|$)"})],["color",this.G("\\$\\{color\\}\\[(#[0-9A-Fa-f]{6})\\]\\(([^\\)]+)\\)","gim",this.Z.markdown_includes)]]},s);function s(t){this.parent=t,this.Y=["com","net","org","info","biz","mobi","chat","email","help","watch","name","pro","aero","asia","cat","coop","edu","gov","int","jobs","mil","museum","post","tel","travel","xxx","xyz","top","site","online","club","shop","work","app","live","store","space","website","tech","life","dev","blog","cloud","page","link","design","group","company","agency","network","media","immo","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"],this.$={"&":/&amp;/g,"<":/&lt;/g,">":/&gt;/g,'"':/&quot;/g},this.F={"&amp;":/&/g,"&lt;":/</g,"&gt;":/>/g,"&quot;":/"/g},this.k={"\\\\":/\\/g,"\\t":/\t/g,"\\n":/\n/g,"\\u00A0":/\u00A0/g,"&quot;":/"/g,"&apos;":/'/g,"&lowbar;":/_/g,"&ast;":/\*/g,"&plus;":/\+/g,"&#126;":/~/g},this.W={"<":/&lt;/g,">":/&gt;/g},this.j=/[-\/\\^$*+?.()|[\]{}]/g,this.H=/([\#$\*\_\-+![\]\(\)`~><\.|{}])/g,this.T=/^([a-z]{1,20})\n((?:\n?.*)*)$/,this.Z={links:{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(,|\\s|<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"},markdown_simple:{prefix:"(^)",suffix:"($)"},markdown_includes:{prefix:"(\\s|<[^<>]+\\/>|<[^<>]+>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|\\)|$)"},markdown_formatting:{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:""},markdown_list:{prefix:"(^\\s*)",suffix:"(.*?)($)"}},this.P=["title","list","code_inline","blockquote","table","emphasis"],this.L=["code_block","code_inline"],this.g=["escape","consecutive_lines","markdown","links_uri","links_domain","emails","phones","smileys","new_lines"],this._={escape:this.b,consecutive_lines:this.z,new_lines:this.C,emails:this.S,phones:this.I,markdown:this.q,links_domain:this.R,links_uri:this.B,smileys:this.M},this.V={markdown_code_block:this.N,markdown_table:this.U},this.K(),this.X()}var c=(a.prototype.parse_first_name=function(t){return this.Q(t,1)},a.prototype.parse_last_name=function(t){return this.Q(t,3)},a.prototype.Q=function(t,i){var n=(t||"").trim();return!n||(t=n.match(this.tt))&&t[i]&&(n=t[i].trim()),n},a);function a(t){this.parent=t,this.tt=/^(\S+)((?:\s+)(.+))?$/}this.it(t),this.Smileys=new i(this),this.Parse=new e(this),this.Name=new c(this)},y.prototype.it=function(t){t&&t.template&&(this.template=t.template),t&&t.config&&(this.config=t.config)},i.CrispLibraryWeb=new y,hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t=c,p.prototype.init=function(t){var r={},i=(n.prototype.set_ignore_privacy=function(){this.nt=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},n.prototype.set_visitor_compose=function(){this.et=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},n.prototype.reset=function(){this.st()},n.prototype.st=function(){this.nt=!1,this.et=!0},n);function n(t){this.parent=t,this.st()}var e=(s.prototype.set_timeout=function(t){var i=this,n=setTimeout(function(){delete i.ct[n],t()},1<arguments.length&&void 0!==arguments[1]?arguments[1]:0);return this.ct[n]=n},s.prototype.clear_timeout=function(t){t in this.ct&&(clearTimeout(this.ct[t]),delete this.ct[t])},s.prototype.set_interval=function(t){var i=setInterval(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0);return this.at[i]=i},s.prototype.clear_interval=function(t){t in this.at&&(clearInterval(this.at[t]),delete this.at[t])},s.prototype.reset=function(){for(var t in this.ct)this.clear_timeout(t);for(var i in this.at)this.clear_interval(i);this.st()},s.prototype.st=function(){this.ct={},this.at={}},s);function s(t){this.parent=t,this.st()}var c=(a.prototype.add_event=function(t,i,n,e){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},c=this.rt(t,i,n);if(c in this.ot)throw new Error("Event listener is already registered for '"+n+"' event on '"+i+"' instance, cannot re-register");window[i].addEventListener(n,e,s),this.ot[c]=[e,s]},a.prototype.remove_event=function(t,i,n){var e=this.rt(t,i,n);e in this.ot&&(t=this.ot[e],window[i].removeEventListener(n,t[0],t[1]),delete this.ot[e])},a.prototype.apply_patch=function(t,i,n,e,s){if((t=this.rt(t,i,n))in this.ht)throw new Error("Patch is already registered for '"+n+"' method on '"+i+"' instance, cannot re-register");var c=e[n];"function"==typeof c&&(e[n]=function(){var t=c.apply(e,arguments);return s(arguments),t},this.ht[t]=[e,c])},a.prototype.revoke_patch=function(t,i,n){(t=this.rt(t,i,n))in this.ht&&((i=this.ht[t])[0][n]=i[1],delete this.ht[t])},a.prototype.reset=function(){for(var t in this.ot)null!==(t=this.ut(t))&&this.remove_event(t[0],t[1],t[2]);for(var i in this.ht)null!==(i=this.ut(i))&&this.revoke_patch(i[0],i[1],i[2]);this.st()},a.prototype.rt=function(t,i,n){return t+":"+i+":"+n},a.prototype.ut=function(t){return 3===(t=t.split(":")).length?t:null},a.prototype.st=function(){this.ot={},this.ht={}},a);function a(t){this.parent=t,this.st()}var o=(h.prototype.get_state=function(){this.lt(this.parent.socket.connected||!1)},h.prototype.ft=function(){var t=this;this.parent.socket.on("connect",function(){t.lt(!0)}),this.parent.socket.on("disconnect",function(){t.lt(!1)}),this.parent.socket.io.on("reconnect_failed",function(){t.lt(!1,!0)})},h.prototype.lt=function(){this.parent.event.publish("socket:state",{connected:!(0<arguments.length&&void 0!==arguments[0])||arguments[0],failed_reconnect:1<arguments.length&&void 0!==arguments[1]&&arguments[1]})},h);function h(t){this.parent=t,this.ft()}var u=(l.prototype.st=function(){this.dt=!1,this.vt=null,this.ot=[],this.pt={},this.yt=null,this.mt=null,this.gt=null,this._t=null},l.prototype.bind_to=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;this.vt=t,this.ot=i,this.pt=n,this.yt=e,this.mt=s,!0!==this.dt?this.parent.stream.connect():this.wt()},l.prototype.unbind_from=function(){this.bt(),this.parent.stream.disconnect()},l.prototype.reset=function(){this.st()},l.prototype.ft=function(){var t=this;this.parent.stream.on("connect",function(){t.dt=!0,t.wt()}),this.parent.stream.on("disconnect",function(){t.dt=!1,t.kt()}),this.parent.stream.on("socket:bound",function(){t.xt()})},l.prototype.wt=function(){var t;this.gt!==this.vt||this._t!==this.ot?(this.gt=this.vt,this._t=this.ot,t=[],this.gt&&t.push(this.gt),this.parent.stream.emit("socket:bind",{ray:"client",events:this._t,rooms:t,context:this.pt})):this.xt()},l.prototype.kt=function(){null!==this.mt&&this.mt(),this.bt(),this.gt=null,this._t=null},l.prototype.xt=function(){null!==this.yt&&this.yt(),this.bt()},l.prototype.bt=function(){this.vt=null,this.ot=[],this.pt={},this.yt=null,this.mt=null},l);function l(t){this.parent=t,this.st(),this.ft()}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=(v.prototype.update=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},s={ray:this.$t(t),type:t,data:i};this.Ft.push(s.ray),this.jt[s.ray]={success:n,error:e},this.parent.socket.emit("storage:sync:update",s),this.parent.event.publish("storage:sync:update",s)},v.prototype.get_stamp_local=function(t){var i=this.Et(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]);return"object"===f(window.localStorage)&&window.localStorage.getItem(i)||""},v.prototype.set_stamp_local=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=this.Et(t,i);return"object"===f(window.localStorage)&&(window.localStorage.setItem(i,n),!0)},v.prototype.is_syncing_storage=function(){return 0<this.Ft.length&&!0},v.prototype.reset=function(){this.st()},v.prototype.Et=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=this.zt+"/"+t;return 0<i.length&&(n+="/"+i.join("/")),n},v.prototype.st=function(){this.Ct=1,this.St=0,this.jt={},this.Ft=[]},v.prototype.ft=function(){this.parent.socket.on("storage:sync:updated",this.It.At(this))},v.prototype.It=function(t){var i;"object"===f(this.jt[t.ray])&&(t.error?this.jt[t.ray].error():this.jt[t.ray].success(),delete this.jt[t.ray],-1!==(i=this.Ft.indexOf(t.ray))&&this.Ft.splice(i,1)),this.parent.event.publish("storage:sync:updated",t)},v.prototype.$t=function(t){return t+"/"+Math.floor(Math.random()*this.qt)+"/"+this.St++},v);function v(t){this.parent=t,this.qt=1e5,this.zt="crisp-client",this.st(),this.ft()}var p=(y.prototype.update_message=function(t,i){this.parent.socket.emit("message:update",i={fingerprint:t,content:i}),this.Dt(i,"local")},y.prototype.send_raw_message=function(t){var i,n=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;-1===this.Ot.indexOf(t.fingerprint)&&this.Ot.push(t.fingerprint),this.parent.platform_name&&this.parent.platform_signature_key&&(_signature_data=[this.parent.Session.Rt,t.fingerprint,t.type],(i=this.parent.sha256.hmac.create(this.parent.platform_signature_key.split("/").map(function(t){return String.fromCharCode(parseInt(t,36))}).join(""))).update("["+_signature_data.join("|")+"]"),t.signature=this.parent.platform_name+":"+i.hex()),this.parent.event.publish("message:send",t),this.parent.Schedule.set_timeout(function(){n.parent.socket.emit("message:send",t)},e)},y.prototype.send_text_message=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.send_raw_message({type:"text",origin:"chat",content:t,timestamp:(new Date).getTime(),fingerprint:this.Bt()},i)},y.prototype.send_file_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"file",origin:"chat",content:{name:t,url:i,type:n},timestamp:(new Date).getTime(),fingerprint:this.Bt()},e)},y.prototype.send_animation_message=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.send_raw_message({type:"animation",origin:"chat",content:{url:t,type:i},timestamp:(new Date).getTime(),fingerprint:this.Bt()},n)},y.prototype.send_audio_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"audio",origin:"chat",content:{url:t,type:i,duration:n},timestamp:(new Date).getTime(),fingerprint:this.Bt()},e)},y.prototype.send_picker_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"picker",origin:"chat",content:{id:t,text:i,choices:n},timestamp:(new Date).getTime(),fingerprint:this.Bt()},e)},y.prototype.send_field_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"field",origin:"chat",content:{id:t,text:i,explain:n},timestamp:(new Date).getTime(),fingerprint:this.Bt()},e)},y.prototype.send_message_compose=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;(!0!==this.parent.Config.nt&&"1"===(navigator||{}).doNotTrack||!1===this.parent.Config.et)&&(n=null);var n=this.Mt(n),e=t!==this.Nt.local.type&&!0;(1==e||n!==(this.Nt.local.excerpt||null)||"start"===this.Nt.local.type&&this.Tt&&(new Date).getTime()-this.Tt>=this.Ut)&&(this.Tt=(new Date).getTime(),this.Nt.local={type:t},n&&(this.Nt.local.excerpt=n),1==e&&null!==this.Pt&&(this.parent.Schedule.clear_timeout(this.Pt),this.Pt=null),null===this.Pt&&(this.Pt=this.parent.Schedule.set_timeout(function(){i.Pt=null,i.parent.socket.emit("message:compose:send",i.Nt.local),i.parent.event.publish("message:compose:send",i.Nt.local)},1==e?0:this.Lt)))},y.prototype.send_message_thread=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={type:t};i&&(n.text=i),this.parent.socket.emit("message:thread",n),this.parent.event.publish("message:thread",n)},y.prototype.receive_message_local=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e={from:"operator",type:t,origin:"local",timestamp:(new Date).getTime(),content:i,fingerprint:null!==e?e:this.Bt(),user:n};this.parent.socket.emit("message:received:local",e),this.Jt(e)},y.prototype.receive_message_mirror=function(t,i,n,e){e={from:"operator",type:t,origin:i,timestamp:(new Date).getTime(),content:n,fingerprint:e},this.parent.socket.emit("message:received:mirror",e)},y.prototype.get_message_compose=function(){this.parent.event.publish("message:compose:received",this.Nt.remote)},y.prototype.get_cached_messages=function(){return this.Vt},y.prototype.count_message_history=function(){return this.Vt.length},y.prototype.count_message_history_diff=function(){return this.Wt.length},y.prototype.get_message_history=function(){if(0<this.Vt.length){for(var t=0;t<this.Vt.length;t++)this.Vt[t].origin="history";this.parent.event.publish("history:messages",this.Vt)}for(var i=0;i<this.Wt.length;i++)this.Ht(this.Wt[i],"diff");this.Wt=[]},y.prototype.is_sending_messages=function(){return 0<this.Ot.length&&!0},y.prototype.mark_messages_as_read=function(){!0===this.Gt(void 0,void 0,!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.Kt()},y.prototype.set_messages_in_view=function(t){this.Zt=t,this.mark_messages_as_read(!1)},y.prototype.get_unread_messages=function(){this.Yt=-1,this.Xt()},y.prototype.set_unread_messages_callback=function(t){this.Qt=t},y.prototype.reset=function(){this.st()},y.prototype.ti=function(t){this.ii(t)},y.prototype.ni=function(t){t&&(this.Nt.remote=t)},y.prototype.ei=function(t){if(t){this.si(t);for(var i=0;i<t.length;i++)this.Wt.push(t[i]);this.Xt()}},y.prototype.ii=function(t){this.Vt=t=t||[],this.ci=[],this.si(this.Vt);for(var i=0;i<this.Vt.length;i++){var n=this.Vt[i];this.ci.push(n.fingerprint),t[i].is_me||n.read||this.ai.push(n.fingerprint)}this.Xt()},y.prototype.st=function(){this.Vt=[],this.ci=[],this.Wt=[],this.ai=[],this.Ot=[],this.ri=[],this.Pt=null,this.Zt=!1,this.Qt=function(){},this.Yt=-1,this.Tt=0,this.Nt={local:{type:"stop"},remote:{type:"stop"}}},y.prototype.ft=function(){this.parent.socket.on("message:updated",this.Dt.At(this)),this.parent.socket.on("message:sent",this.oi.At(this)),this.parent.socket.on("message:received",this.hi.At(this)),this.parent.socket.on("message:received:local",this.Jt.At(this)),this.parent.socket.on("message:compose:received",this.ui.At(this)),this.parent.socket.on("message:acknowledge:read:send",this.li.At(this)),this.parent.socket.on("message:acknowledge:read:received",this.fi.At(this)),this.parent.socket.on("message:acknowledge:pending",this.di.At(this))},y.prototype.Mt=function(t){var i=null;return null===t||(t=t.match(this.vi))&&(i=(t[1]||"").trim()),i},y.prototype.pi=function(t){this.parent.socket.emit("message:acknowledge:pending",{origin:"chat",fingerprints:t}),this.parent.socket.emit("message:acknowledge:delivered",{origin:"chat",fingerprints:t})},y.prototype.yi=function(t){this.parent.socket.emit("message:acknowledge:read:received",{origin:"chat",fingerprints:t})},y.prototype.mi=function(t,i){var n=!1;!1===i&&(this.ai=[],this.Xt());for(var e=0;e<this.Vt.length;e++){var s=this.Vt[e];!0===s.read||0!==t.length&&-1===t.indexOf(s.fingerprint)||i===(!0===s.is_me)&&(n=s.read=!0,this.gi(s))}return n},y.prototype.Gt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=i||!1;return!1===i&&(!0===(2<arguments.length&&void 0!==arguments[2]&&arguments[2])||!0===this.Zt)&&0<this.ai.length&&(this.yi(this.ai),n=!0),!0===n&&this.mi(t,i)},y.prototype.Kt=function(t,i){if(0<this.ri.length){for(var n=[],e=0;e<this.Vt.length;e++){var s=this.Vt[e];-1!==this.ri.indexOf(s.fingerprint)&&(delete s.index,n.push(s))}this.ri=[],this.parent.Storage.update("message",n,t,i)}else"function"==typeof t&&t()},y.prototype._i=function(t,i,n){null===this.wi(t.fingerprint)?(this.ci.push(t.fingerprint),this.Vt.push(t),this.Gt(),this.gi(t),this.Kt(i,n)):"function"==typeof i&&i()},y.prototype.wi=function(t){return 0<=(t=this.ci.indexOf(t))&&this.Vt[t]||null},y.prototype.gi=function(t){-1===this.ri.indexOf(t.fingerprint)&&this.ri.push(t.fingerprint)},y.prototype.si=function(t){t.sort(function(t,i){return t.timestamp<i.timestamp?-1:t.timestamp>i.timestamp?1:0})},y.prototype.Bt=function(){var t=""+(new Date).getTime()+Math.ceil(100*Math.random());return t.length<15&&(t+=new Array(15-t.length+1).join("0")),parseInt(t,10)},y.prototype.Ht=function(t,i){t.is_me?this.oi(t,i):this.hi(t,i)},y.prototype.Xt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=this.ai.length;i!==this.Yt&&(this.Yt=i,"function"==typeof this.Qt&&this.Qt(i,this.ai,[].concat(this.Vt,t)))},y.prototype.Dt=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",n=this.wi(t.fingerprint);null!==n&&(n.content=t.content,n.edited=!0,this.Ht(n,"update"),"local"!==i&&(this.gi(n),this.Kt()))},y.prototype.oi=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",e=this.Ot.indexOf(t.fingerprint);-1!==e&&this.Ot.splice(e,1);var s=t.origin;t.origin=n,t.index={current:1,total:1},this._i(t,function(){"chat"===s||"network"!==n&&"diff"!==n||i.pi([t.fingerprint]),i.parent.event.publish("message:sent",t)}),1===this.count_message_history()&&this.parent.Session.bi()},y.prototype.hi=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"message:received";t.origin=n,t.index={current:1,total:1},"update"!==n&&(this.ai.push(t.fingerprint),this.Xt([t])),this._i(t,function(){"network"!==n&&"diff"!==n||i.pi([t.fingerprint]),i.parent.event.publish(e,t)})},y.prototype.Jt=function(t){this.hi(t,"local","message:received:local")},y.prototype.ui=function(t){this.Nt.remote=t,this.parent.event.publish("message:compose:received",t)},y.prototype.li=function(t){!0===this.Gt(t.fingerprints,!0)&&this.Kt(),this.parent.event.publish("message:acknowledge:read:send",t.fingerprints)},y.prototype.fi=function(t){for(var i=0;i<t.fingerprints.length;i++){var n=this.ai.indexOf(t.fingerprints[i]);-1!==n&&this.ai.splice(n,1)}this.Xt()},y.prototype.di=function(t){this.parent.event.publish("message:acknowledge:pending",t.fingerprints)},y);function y(t){this.parent=t,this.Ut=6e4,this.Lt=6e3,this.vi=new RegExp(["(^(?:\\S+(?:(?:\\s+|\\?|\\!|\\.|\\(|\\)|:|;)|(?:[\\u4e00-\\u9fff])|(?:[\\u0e00-\\u0e7f])))+).*$"].join(""),"i"),this.st(),this.ft()}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=(g.prototype.save=function(){var t={domain:this.ki(),expires:this.xi()},i=this.$i();t.sameSite=i.policy,!0===i.secure&&(t.secure=!0),this.parent.cookie.set(this.Fi(),this.Rt,t),this.parent.token_id&&this.parent.cookie.set(this.Fi(this.parent.token_id),this.Rt,t),this.parent.event.publish("session:saved",this.Rt)},g.prototype.storage_session_retrieve=function(t){this.ji(t.state),this.parent.Message.ti(t.message)},g.prototype.sync_session_diff=function(t){this.parent.Message.ni(t.compose),this.parent.Message.ei(t.messages)},g.prototype.sync_user_data=function(t){for(var i=0;i<this.Ei.length;i++){var n=this.Ei[i];this.zi[n]&&this.zi[n]!==t[n]?this["set_"+n](this.zi[n],!0,this.Ci[n]):this.zi[n]=t[n]||null}this.Si(t.segments||[],this.zi.segments),this.Ai(t.data||{},this.zi.data)},g.prototype.send_device=function(){var t=this.Ii();null!==t&&this.parent.socket.emit("session:device",t)},g.prototype.send_event=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i={events:[]},n=0;n<t.length;n++){var e=t[n],s={text:e[0]};null!==e[1]&&(s.data=e[1]),null!==e[2]&&(s.color=e[2]),i.events.push(s)}0<i.events.length&&this.parent.socket.emit("session:event",i)},g.prototype.get_request_initiate=function(t){Object.keys&&0===Object.keys(this.qi).length&&0<this.parent.Message.count_message_history_diff()&&this.Di({}),"function"==typeof t&&t()},g.prototype.get_state=function(t){this.handle_state(this.qi,t)},g.prototype.handle_state=function(t,i){this.qi=t,this.parent.event.publish("session:state",this.qi),"function"==typeof i&&i()},g.prototype.set_state=function(t,i){for(var n in t)this.qi[n]=t[n];this.parent.Storage.update("state",t),this.sync_state(t,i)},g.prototype.sync_state=function(t,i){this.parent.socket.emit("session:state",t),"function"==typeof i&&i()},g.prototype.create=function(){var t={website_id:this.parent.website_id,website_domain:this.parent.website_domain,useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.parent.token_id&&(t.token_id=this.parent.token_id),this.parent.socket.emit("session:create",t)},g.prototype.get_email=function(){return this.zi.email},g.prototype.set_email=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s={};null!==e&&("string"===(i=void 0===e?"undefined":f(e))?s.verify=e:"object"===i&&(s=e)),!0===this.Oi("email",t,n,s)&&this.bi()},g.prototype.get_phone=function(){return this.zi.phone},g.prototype.set_phone=function(t){this.Oi("phone",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},g.prototype.get_nickname=function(){return this.zi.nickname},g.prototype.set_nickname=function(t){this.Oi("nickname",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},g.prototype.get_avatar=function(){return this.zi.avatar},g.prototype.set_avatar=function(t){this.Oi("avatar",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},g.prototype.get_company=function(){return this.zi.company},g.prototype.set_company=function(t){this.Oi("company",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},g.prototype.get_data=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.zi.data:this.zi.data[t]||null},g.prototype.set_data=function(t){this.Ai(this.zi.data||{},t)},g.prototype.set_segments=function(t){this.Si(this.zi.segments||[],t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},g.prototype.mark_active=function(){var t=(new Date).getTime();t-Math.min(this.Ri||t,this.Bi||t)>=this.Mi&&this.Ni(!0),this.Ri=t},g.prototype.acquire_saved=function(){var t=this.Ti(),i=null,n=(location.search||"").match(this.Ui),e=(document.referrer||"").match(this.Pi);return n&&n[2]&&n[2]!==t.current&&(i=n[2]||null),e=(i=e&&e[1]===this.parent.url_go&&e[3]!==t.current?e[3]||null:i)||t.current,i=null,{session_id:e,merge:i=t.previous&&t.current!==t.previous&&t.current===e?t.previous:i}},g.prototype.restore=function(){var t=this.acquire_saved();this.Li(t.session_id,t.merge)},g.prototype.join=function(){var t,i={session_id:this.Rt,expire:this.Ji,storage:!0,sync:0<arguments.length&&void 0!==arguments[0]&&arguments[0],useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.Vi||null!==(t=this.Ii())&&(i.device=t),null!==this.Wi&&(i.merge={session_id:this.Wi}),this.parent.socket.emit("session:join",i)},g.prototype.reset=function(t,i){var n=null;try{for(var e in this.parent){var s=this.parent[e];s!==this&&s&&"object"===(void 0===s?"undefined":f(s))&&"function"==typeof s.reset&&s.reset()}this.Hi()}catch(t){n=t}n?"function"==typeof i&&i(n):"function"==typeof t&&t()},g.prototype.bi=function(){var t=this;this.zi.email&&(this.Gi&&this.parent.Schedule.clear_timeout(this.Gi),this.Gi=this.parent.Schedule.set_timeout(function(){t.Gi=null,t.Ni(!0)},this.Ki))},g.prototype.st=function(){this.Rt=null,this.Wi=null,this.Vi=!1,this.Ri=0,this.Bi=(new Date).getTime(),this.Zi=null,this.Gi=null,this.Yi=null,this.Xi=null,this.zi={},this.Ci={},this.qi={}},g.prototype.ft=function(){var t=this;this.parent.socket.on("session:created",this.Qi.At(this)),this.parent.socket.on("session:joined",this.tn.At(this)),this.parent.socket.on("session:state",this.in.At(this)),this.parent.socket.on("session:error",this.nn.At(this)),this.parent.socket.on("session:request:initiate",this.Di.At(this)),this.parent.socket.on("session:request:purge",this.en.At(this)),this.parent.socket.on("connect",function(){t.Vi?t.join(!0):t.restore()})},g.prototype.Qi=function(t){var i;t.error?this.parent.event.publish("session:created",{error:t.error}):(i=!!this.parent.token_id,this.Rt=t.session_id,this.save(),this.join(i),this.parent.event.publish("session:created",{session_id:this.Rt}))},g.prototype.tn=function(t){t.error?this.parent.event.publish("session:joined",{error:t.error}):(this.Vi||(this.Vi=!0),this.parent.Website.set_users_available(t.users_available),this.storage_session_retrieve(t.storage||{}),this.sync_session_diff(t.sync||{}),this.sync_user_data(t),this.parent.Browsing.restore_browsing_state(),this.parent.event.publish("session:joined",t),this.sn(t.last_active))},g.prototype.in=function(t){this.handle_state(t)},g.prototype.nn=function(t){"email:invalid_format"===t.type&&(delete this.zi.email,delete this.Ci.email),this.parent.event.publish("session:error",t)},g.prototype.Di=function(t){this.parent.event.publish("session:request:initiate",t)},g.prototype.en=function(t){this.parent.event.publish("session:request:purge",t)},g.prototype.Hi=function(){this.st();var t={domain:this.ki()};this.parent.cookie.expire(this.Fi(),t),this.parent.token_id&&this.parent.cookie.expire(this.Fi(this.parent.token_id),t)},g.prototype.Ti=function(){var t={previous:null,current:null};return this.parent.token_id?(this.parent.runtime_configuration&&!0===this.parent.runtime_configuration.session_merge&&(t.previous=this.parent.cookie.get(this.Fi())||null),t.current=this.parent.cookie.get(this.Fi(this.parent.token_id))||null):t.current=this.parent.cookie.get(this.Fi())||null,t},g.prototype.Li=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;null!==i&&(this.Wi=i),t?(this.Rt=t,this.save(),this.join(!0)):this.create()},g.prototype.ji=function(t){this.qi=t||{}},g.prototype.sn=function(){this.Ri=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)||(new Date).getTime(),this.Ni()},g.prototype.Ni=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.Zi&&this.parent.Schedule.clear_timeout(this.Zi),this.Zi=this.parent.Schedule.set_timeout(function(){t.Zi=null,t.Bi=(new Date).getTime(),t.parent.socket.emit("session:heartbeat",{last_active:t.Ri||0,availability:{type:"online",time:{for:t.Ji}}}),t.Ni()},!0===i?0:this.cn)},g.prototype.Ii=function(){var t=document.location.href||"";if(this.Yi!==t){this.Yi=t;var i=(new Date).getTime();if(i-(this.Xi||0)>=this.an){this.Xi=i;var n=document.title||"";if(n.length>this.rn&&(n=n.substring(0,this.rn-this.hn.length),n+=this.hn),!0===this.un.test(t)&&("?"!==(i=(t=t.replace(this.un,"$1$3"))[t.length-1])&&"&"!==i||(t=t.substr(0,t.length-1))),(t=t.length>this.ln?t.split("?")[0]||"":t)&&n&&t.length<=this.ln)return t={page_url:t,page_title:n},(n=(document.referrer||"").split("?")[0]||"")&&n.length<=this.ln&&(t.page_referrer=n),t}}return null},g.prototype.Fi=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=[this.parent.website_id];return t&&i.push(t),this.parent.Storage.Et("session",i)},g.prototype.xi=function(){return"number"==typeof this.parent.cookie_expire&&0<this.parent.cookie_expire?this.parent.cookie_expire:this.dn},g.prototype.ki=function(){return"string"==typeof this.parent.cookie_domain&&this.parent.cookie_domain?this.parent.cookie_domain:this.vn()},g.prototype.$i=function(){return!0===this.parent.runtime_configuration.cross_origin_cookies&&"https:"===document.location.protocol?{policy:"none",secure:!0}:{policy:"lax"}},g.prototype.vn=function(){var t=document.domain,i=t,n=this.$i(),e="samesite="+n.policy+";"+(!0===n.secure?"secure;":"");try{for(var s=0,c=i.split("."),a=this.parent.Storage.Et("domain-detect",[""+(new Date).getTime()]);s<c.length-1&&-1===document.cookie.indexOf(a+"="+a);)i=c.slice(-1-++s).join("."),document.cookie=a+"="+a+";domain="+i+";"+e;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+i+";"+e}catch(t){}finally{return i||t}},g.prototype.Oi=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=!1;if(!0===n?s=!0:i instanceof Object?!1===this.pn(this.zi[t],i)&&(s=!0):this.zi[t]!==i&&(s=!0),!0!==s||(this.zi[t]=i,this.Ci[t]=e,!0!==this.Vi))return!1;var c,a={};for(c in a[t]=i,e)a[c]=e[c];return this.parent.socket.emit("session:set_"+t,a),!0},g.prototype.Si=function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=[],s=0;s<i.length;s++){var c=(i[s]||"").trim().toLowerCase();c&&-1===t.indexOf(c)&&e.push(c)}var a=void 0;!0===n?0<e.length||t.length!==i.length?(a=[].concat(i),this.zi.segments=a):a=[]:this.zi.segments=t.concat(a=e),0<a.length&&!0===this.Vi&&(a={segments:a},!0===n&&(a.overwrite=!0),this.parent.socket.emit("session:set_segments",a))},g.prototype.Ai=function(t){var i,n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=!1,c={};for(i in e)t[i]!==e[i]&&(s=!0,c[i]=e[i]);for(n in this.zi.data=t,c)this.zi.data[n]=c[n];!0===s&&!0===this.Vi&&this.parent.socket.emit("session:set_data",{data:c})},g.prototype.pn=function(t,i){if(t instanceof Object&&i instanceof Object){var n,e,s={};for(n in t)s[n]=!0;for(e in i)s[e]=!0;var c,a=!0;for(c in s)if(!1===this.pn(t[c],i[c])){a=!1;break}return a}return t===i&&!0},g);function g(t){this.parent=t,this.Pi=new RegExp("^(https?\\:\\/\\/[^/]+)\\/chat\\/resume\\/\\?target_url=(.+)&session_id=(.+)$"),this.Ui=/^\?.*(crisp_sid=([^&=]+)).*$/,this.un=/(\?.*)(crisp_sid=[^&=]+&?)(.*)$/,this.Mi=9e4,this.Ki=5e3,this.an=3e3,this.ln=240,this.rn=80,this.hn="...",this.cn=24e4,this.Ji=3e5,this.dn=15768e3,this.Ei=["email","phone","nickname","avatar","company"],this.parent.disable_autoload||(this.st(),this.ft())}var _=(w.prototype.get_users_available=function(){this.yn(!1)},w.prototype.set_users_available=function(t){this.mn=t},w.prototype.reset=function(){this.st()},w.prototype.st=function(){this.mn=!1},w.prototype.ft=function(){this.parent.socket.on("website:users:available",this.gn.At(this))},w.prototype.gn=function(t){"boolean"==typeof t&&(this.set_users_available(t),this.yn(!0))},w.prototype.yn=function(){this.parent.event.publish("website:users:available",{available:this.mn,changed:0<arguments.length&&void 0!==arguments[0]&&arguments[0]})},w);function w(t){this.parent=t,this.st(),this.ft()}var b=(k.prototype.get_url_upload=function(t,i){i={id:""+(new Date).getTime(),from:"visitor",file:{name:t,type:i}},this.parent.socket.emit("bucket:url:upload:generate",i),this.parent.event.publish("bucket:url:upload:generate",i)},k.prototype.ft=function(){this.parent.socket.on("bucket:url:upload:generated",this.wn.At(this))},k.prototype.wn=function(t){this.parent.event.publish("bucket:url:upload:generated",t)},k);function k(t){this.parent=t,this.ft()}var x=($.prototype.get_animation_list=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i={id:(new Date).getTime(),from:"visitor",list:{page:i}};t&&(i.list.query=t),this.parent.socket.emit("media:animation:list",i),this.parent.event.publish("media:animation:list",i)},$.prototype.ft=function(){this.parent.socket.on("media:animation:listed",this.bn.At(this))},$.prototype.bn=function(t){this.parent.event.publish("media:animation:listed",t)},$);function $(t){this.parent=t,this.ft()}function F(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var j=(E.prototype.get_article_search=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.kn("search",this.xn,"query",this.$n.At(this),t,i)},E.prototype.get_article_suggest=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.kn("suggest",this.Fn,"part",this.jn.At(this),t,i)},E.prototype.report_article_search=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(i=(i||"").trim())&&(this.parent.socket.emit("helpdesk:article:report",i={report:{locale:t,query:i}}),this.parent.event.publish("helpdesk:article:report",i))},E.prototype.reset=function(){this.st()},E.prototype.st=function(){this.xn={},this.Fn={}},E.prototype.ft=function(){this.parent.socket.on("helpdesk:article:searched",this.$n.At(this)),this.parent.socket.on("helpdesk:article:suggested",this.jn.At(this))},E.prototype.$n=function(t){return this.En("search",this.xn,"query",t)},E.prototype.jn=function(t){return this.En("suggest",this.Fn,"part",t)},E.prototype.kn=function(t,i,n,e,s){var c=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=(i[c||"default"]||{})[s],r="helpdesk:article:"+t,o=F({id:(new Date).getTime(),from:"visitor"},t,F({locale:c},n,s));this.parent.event.publish(r,o),a?this.parent.Schedule.set_timeout(function(){e(F({id:o.id,results:a},t,F({locale:c},n,s)))},this.zn):this.parent.socket.emit(r,o)},E.prototype.En=function(t,i,n,e){var s;e[t]&&"string"==typeof e[t][n]&&(i[s=e[t].locale||"default"]=i[s]||{},i[s][e[t][n]]=e.results),this.parent.event.publish("helpdesk:article:"+t+"ed",e)},E);function E(t){this.parent=t,this.zn=100,this.st(),this.ft()}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var z=(C.prototype.init=function(t,i,n){var e=this;this.parent.Stream.bind_to(null,this.Cn,{session_id:this.parent.Session.Rt},function(){-1===(e.parent.device.capabilities||[]).indexOf("browsing")||!0!==e.parent.Config.nt&&"1"===(navigator||{}).doNotTrack?(e.parent.stream.emit("client:browsing:request:decline",{}),e.Sn()):(e.An=t.deps.tree_mirror||null,(e.In=!0)===t.resume?(e.parent.stream.emit("client:browsing:resume",{browsing_id:e.qn}),e.Ni(!0),!0===e.Dn&&e.On(!0)):(e.Ni(!0),e.parent.stream.emit("client:browsing:request:accept",{useragent:navigator.userAgent}))),"function"==typeof i&&i()},function(){"function"==typeof n&&n()})},C.prototype.restore_browsing_state=function(){this.qn&&(!1===this.Rn()?this.Bn({resume:!0}):this.Sn())},C.prototype.toggle_ignore_scroll_event=function(){this.Mn=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},C.prototype.reset=function(){!0===this.Dn&&this.Sn(),this.st(),this.Nn()},C.prototype.st=function(){if(this.parent.Schedule.clear_interval(this.Tn),this.parent.Schedule.clear_interval(this.Un),this.parent.Schedule.clear_interval(this.Pn),this.parent.Schedule.clear_interval(this.Ln),"object"===f(this.Jn))for(var t in this.Jn)this.parent.Schedule.clear_timeout(this.Jn[t]);if("object"===f(this.Vn))for(var i in this.Vn)this.parent.Schedule.clear_timeout(this.Vn[i].dead_timeout);(this.Wn||{}).defer_event&&this.parent.Schedule.clear_timeout(this.Wn.defer_event),this.In=!1,this.qn=null,this.Dn=!1,this.Bi=null,this.Tn=null,this.Un=null,this.Pn=null,this.Ln=null,this.Mn=!1,this.Hn=null,this.An=null,this.Gn=null,this.Jn={},this.Kn=[],this.Vn={assist:{ongoing:!1,last_heartbeat:null,dead_timeout:null}},this.Zn={x:0,y:0,last_x:0,last_y:0},this.Yn={x:0,y:0,last_x:0,last_y:0},this.Wn={last_call:(new Date).getTime(),defer_event:null}},C.prototype.Fi=function(){return this.parent.Storage.Et("browsing",[this.parent.website_id])},C.prototype.ft=function(){this.parent.socket.on("browsing:request:initiate",this.Bn.At(this)),this.parent.stream.on("client:browsing:request:initiated",this.Xn.At(this)),this.parent.stream.on("client:browsing:action:start",this.Qn.At(this)),this.parent.stream.on("client:browsing:action:stop",this.te.At(this)),this.parent.stream.on("client:browsing:action:heartbeat",this.ie.At(this)),this.parent.stream.on("client:browsing:assist:start",this.ne.At(this)),this.parent.stream.on("client:browsing:assist:stop",this.ee.At(this)),this.parent.stream.on("client:browsing:assist:heartbeat",this.se.At(this)),this.parent.stream.on("client:browsing:assist:mouse",this.ce.At(this)),this.parent.stream.on("client:browsing:assist:scroll",this.ae.At(this)),this.parent.stream.on("client:browsing:assist:click",this.re.At(this))},C.prototype.oe=function(){var t;"object"!==f(window.sessionStorage)||(t=window.sessionStorage.getItem(this.Fi()))&&(t=JSON.parse(t),this.qn=t.browsing_id||null,this.Dn=t.is_playing||!1,this.Bi=t.last_heartbeat||null)},C.prototype.Bn=function(t){!0===this.In&&!0!==t.resume||(!0!==t.resume&&this.Sn(),this.parent.event.publish("browsing:request:initiate",t||{}))},C.prototype.Xn=function(t){!0===this.In&&(this.qn=t.browsing_id,this.Bi=(new Date).getTime(),this.he())},C.prototype.Qn=function(){!0===this.In&&this.qn&&this.On()},C.prototype.te=function(){!0===this.In&&this.qn&&this.Sn()},C.prototype.ie=function(){!0===this.In&&this.qn&&(this.Bi=(new Date).getTime(),this.he())},C.prototype.ne=function(){!0===this.In&&this.qn&&!0===this.ue("assist")&&this.parent.event.publish("browsing:assist:started",{})},C.prototype.ee=function(){!0===this.In&&this.qn&&!0===this.le("assist")&&this.parent.event.publish("browsing:assist:stopped",{})},C.prototype.se=function(){!0===this.In&&this.qn&&this.fe("assist")},C.prototype.ce=function(t){!0===this.In&&this.qn&&!0===this.Vn.assist.ongoing&&this.parent.event.publish("browsing:assist:mouse",t)},C.prototype.ae=function(t){!0===this.In&&this.qn&&!0===this.Vn.assist.ongoing&&this.parent.event.publish("browsing:assist:scroll",t)},C.prototype.re=function(t){!0===this.In&&this.qn&&!0===this.Vn.assist.ongoing&&this.parent.event.publish("browsing:assist:click",t)},C.prototype.he=function(){"object"===f(window.sessionStorage)&&JSON&&"function"==typeof JSON.stringify&&window.sessionStorage.setItem(this.Fi(),JSON.stringify({browsing_id:this.qn,is_playing:this.Dn,last_heartbeat:this.Bi}))},C.prototype.Nn=function(){"object"===f(window.sessionStorage)&&"object"===f(window.sessionStorage)&&window.sessionStorage.removeItem(this.Fi())},C.prototype.On=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.Dn=!0,this.Bi=(new Date).getTime(),this.he(),this.de(),this.ve(!0),this.pe(!0),this.ye(!0),!0!==t&&this.parent.stream.emit("client:browsing:action:started",{})},C.prototype.Sn=function(){var t=this.Dn;this.Gn&&this.Gn.disconnect(),this.st(),this.he(),!0===t&&this.parent.stream.emit("client:browsing:action:stopped",{}),this.parent.Stream.unbind_from()},C.prototype.de=function(){var s=this;if(this.me(),this.ge(),this.we(),this.Gn)return this.be(this.Hn);this.Gn=new this.An(document,{initialize:function(t,i){s.Hn={f:"initialize",args:[t,i]},s.be(s.Hn)},applyChanged:function(t,i,n,e){s.Kn.push({f:"applyChanged",args:[t,i,n,e]})}})},C.prototype.be=function(t){t.f&&t.args&&"function"==typeof JSON.stringify&&this.parent.stream.emit("client:browsing:stream:mirror",{f:t.f,args:JSON.stringify(t.args)})},C.prototype.ge=function(){this.parent.stream.emit("client:browsing:stream:tab",{title:document.title,url:document.location.href,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight})},C.prototype.me=function(){this.parent.stream.emit("client:browsing:stream:mouse",{x:this.Zn.x,y:this.Zn.y})},C.prototype.we=function(){this.parent.stream.emit("client:browsing:stream:scroll",{x:this.Yn.x,y:this.Yn.y})},C.prototype.ke=function(){this.parent.stream.emit("client:browsing:stream:click",{})},C.prototype.ue=function(t){var i=!0!==this.Vn[t].ongoing&&!0;return this.Vn[t].ongoing=!0,this.fe(t),this.parent.stream.emit("client:browsing:"+t+":started",{}),i},C.prototype.le=function(t){return!0===this.Vn[t].ongoing&&(this.fe(t,!1),this.Vn[t].ongoing=!1,this.parent.stream.emit("client:browsing:"+t+":stopped",{}),!0)},C.prototype.fe=function(t){var i=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];!0===this.Vn[t].ongoing&&(null!==this.Vn[t].dead_timeout&&(this.parent.Schedule.clear_timeout(this.Vn[t].dead_timeout),this.Vn[t].dead_timeout=null),!0===n?(this.Vn[t].last_heartbeat=(new Date).getTime(),this.Vn[t].dead_timeout=this.parent.Schedule.set_timeout(function(){i.le(t)},this.xe)):this.Vn[t].last_heartbeat=null)},C.prototype.$e=function(){var i=this;this.parent.Listener.add_event("browsing","document","mousemove",function(t){i.Zn.last_x=t.pageX,i.Zn.last_y=t.pageY})},C.prototype.Fe=function(){var n=this;this.parent.Listener.add_event("browsing","window","resize",function(){null!==n.Wn.defer_event&&n.parent.Schedule.clear_timeout(n.Wn.defer_event),n.Wn.defer_event=n.parent.Schedule.set_timeout(function(){n.Wn.defer_event=null;var t=n.Wn.last_call,i=(new Date).getTime();n.Wn.last_call=i,t&&i>t+n.je&&!0===n.Dn&&n.ge()},n.Ee)})},C.prototype.ze=function(){var i=this;this.parent.Listener.add_event("browsing","window","scroll",function(){var t;!0!==i.Mn&&(t=document.documentElement,i.Yn.last_x=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),i.Yn.last_y=(window.pageYOffset||t.scrollTop)-(t.clientTop||0))})},C.prototype.Ce=function(){var i=this;this.parent.Listener.add_event("browsing","window","click",function(t){!0!==i.Dn||t.Se||i.Ae("click",function(){i.ke(),i.me()})})},C.prototype.Rn=function(){return null===this.Bi||null!==this.Bi&&(new Date).getTime()-this.Bi>=this.Ie},C.prototype.Ni=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Tn&&this.parent.Schedule.clear_interval(this.Tn),!0===i&&(this.Tn=this.parent.Schedule.set_interval(function(){t.parent.stream.emit("client:browsing:heartbeat",{}),!0===t.Rn()&&t.Sn()},this.qe))},C.prototype.ve=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Pn&&(this.parent.Schedule.clear_interval(this.Pn),this.Pn=null),!0===i&&(this.Pn=this.parent.Schedule.set_interval(function(){t.Zn.last_x===t.Zn.x&&t.Zn.last_y===t.Zn.y||!0!==t.Dn||(t.Zn.x=t.Zn.last_x,t.Zn.y=t.Zn.last_y,t.me())},this.je))},C.prototype.pe=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Ln&&(this.parent.Schedule.clear_interval(this.Ln),this.Ln=null),!0===i&&(this.Ln=this.parent.Schedule.set_interval(function(){t.Yn.last_x===t.Yn.x&&t.Yn.last_y===t.Yn.y||!0!==t.Dn||(t.Yn.x=t.Yn.last_x,t.Yn.y=t.Yn.last_y,t.me(),t.we())},this.je))},C.prototype.ye=function(){var i=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Un&&this.parent.Schedule.clear_interval(this.Un),!0===t&&(this.Un=this.parent.Schedule.set_interval(function(){for(var t=0;t<i.Kn.length&&!(t>=i.De);t++)i.be(i.Kn[t]);i.Kn.splice(0,i.De)},this.Oe))},C.prototype.Ae=function(t,i){var n=this;void 0===this.Jn[t]&&(this.Jn[t]=this.parent.Schedule.set_timeout(function(){delete n.Jn[t],i()},this.Re))},C);function C(t){this.parent=t,this.qe=1e4,this.Ie=45e3,this.xe=45e3,this.Ee=1e3,this.je=1e3,this.Re=500,this.Oe=1e3,this.De=10,this.Cn=["browsing:action:start","browsing:action:stop","browsing:action:heartbeat","browsing:assist:start","browsing:assist:stop","browsing:assist:heartbeat","browsing:assist:mouse","browsing:assist:scroll","browsing:assist:click"],this.st(),this.ft(),this.oe(),this.$e(),this.Fe(),this.ze(),this.Ce()}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var S=(A.prototype.init=function(t,i,n){var e=this;this.parent.Stream.bind_to(null,this.Cn,{session_id:this.parent.Session.Rt},function(){e.Be=t.mode||null,e.Me=t.ice||[],!0===t.has_support?(e.parent.stream.emit("client:call:request:initiated",{call_id:t.call_id}),e.Ni(!0)):e.parent.stream.emit("client:call:request:decline",{}),"function"==typeof i&&i()},function(){"function"==typeof n&&n()})},A.prototype.accept=function(){!0===this.In&&(this.Ne=!0,this.parent.stream.emit("client:call:request:accept",{}))},A.prototype.decline=function(){!0===this.In&&(this.parent.stream.emit("client:call:request:decline",{}),this.Sn())},A.prototype.stop=function(){!0===this.In&&(this.parent.stream.emit("client:call:action:stopped",{}),this.Sn())},A.prototype.toggle_audio=function(){return this.Te("audio","getAudioTracks")},A.prototype.toggle_video=function(){return this.Te("video","getVideoTracks")},A.prototype.toggle_screensharing=function(){return!0===this.In&&null!==this.Ue.local&&(!1===this.Pe?this.Le():this.Je()),this.Pe},A.prototype.is_ongoing=function(){return!0===this.In&&null!==this.Ve&&!0},A.prototype.has_support_screensharing=function(){return!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getDisplayMedia)},A.prototype.get_stream=function(t){return this.Ue[t]||null},A.prototype.reset=function(){!0===this.In&&this.Sn(),this.st()},A.prototype.st=function(){this.In=!1,this.Pe=!1,this.Ne=!1,this.We=!1,this.qn=null,this.Ve=null,this.Tn=null,this.He=null,this.Be=null,this.Me=[],this.Ue={local:null,remote:null},this.Ge={video:null}},A.prototype.ft=function(){this.parent.socket.on("call:request:initiate",this.Bn.At(this)),this.parent.stream.on("client:call:request:accepted",this.Ke.At(this)),this.parent.stream.on("client:call:request:declined",this.Ze.At(this)),this.parent.stream.on("client:call:action:stopped",this.Ye.At(this)),this.parent.stream.on("client:call:signaling:sdp",this.Xe.At(this)),this.parent.stream.on("client:call:signaling:candidate",this.Qe.At(this))},A.prototype.Bn=function(t){!0!==this.In&&(t.has_support=-1!==(this.parent.device.capabilities||[]).indexOf("call"),this.In=!0,this.parent.event.publish("call:request:initiate",t))},A.prototype.Ke=function(){!0===this.In&&!0!==this.Ne&&this.Sn()},A.prototype.Ze=function(){!0===this.In&&this.Sn()},A.prototype.Ye=function(){!0===this.In&&this.Sn()},A.prototype.Xe=function(t){var i=this;!0===this.In&&(this.ts(),"operator"===t.from&&this.Ve.setRemoteDescription(new RTCSessionDescription(t.sdp)).then(function(){return i.parent.event.publish("call:peer:remote:success",{}),null===i.Ue.local?i.es():"offer"===t.sdp.type?i.ss("answer"):Promise.resolve()}).catch(function(){i.parent.event.publish("call:peer:remote:error",{})}))},A.prototype.Qe=function(t){!0===this.In&&(this.ts(),"operator"===t.from&&"object"===f(t.candidate)&&null!==t.candidate&&this.Ve.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})).catch(function(){}))},A.prototype.ts=function(){var n=this;null===this.Ve&&(this.Ve=new RTCPeerConnection({iceServers:this.Me}),this.Ve.onicecandidate=function(t){t&&t.candidate&&n.parent.stream.emit("client:call:signaling:candidate",{from:"user",candidate:t.candidate})},this.Ve.ontrack=function(t){t=t.streams[0],n.Ue.remote=t,n.parent.event.publish("call:media:remote:success",{}),t.onremovetrack=function(){n.parent.event.publish("call:media:remote:success",{})}},this.Ve.oniceconnectionstatechange=function(t){var i=n.Ve;null!==i&&"failed"!==i.iceConnectionState&&"closed"!==i.iceConnectionState||n.cs(),null!==i&&"disconnected"===i.iceConnectionState&&(n.He=n.parent.Schedule.set_timeout(function(){(n.He=null)!==n.Ve&&"connected"===i.iceConnectionState||n.cs()},n.as)),null!==i&&"connected"===i.iceConnectionState&&!0!==n.We&&n.parent.Schedule.set_timeout(function(){n.es(!0)},n.rs)},this.Ve.onnegotiationneeded=function(){n.ss("offer")},this.Ve.onclose=function(){n.cs()})},A.prototype.es=function(){function i(t){n.parent.event.publish("call:peer:local:error",{})}var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.os(function(t){navigator.mediaDevices.getUserMedia({audio:!0,video:"video"===n.Be&&!0===t.video}).then(function(t){return n.Ue.local=t,n.parent.event.publish("call:media:local:success",{retried:e||!1}),!0===e&&(n.We=!0),n.hs(t,e)}).catch(i)},i)},A.prototype.hs=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=t.getTracks();!0===n&&this.Ve.getSenders().forEach(function(t){t.track&&t.track.stop(),i.Ve.removeTrack(t)});for(var s=0;s<e.length;s++)this.Ve.addTrack(e[s],t);!0!==n&&this.ss("answer")},A.prototype.os=function(n,e){var s={audio:!1,video:!1};navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(t){for(var i=0;i<t.length;i++)switch(t[i].kind){case"audioinput":s.audio=!0;break;case"videoinput":s.video=!0}!0!==s.audio?e():n(s)}).catch(e):n(s)},A.prototype.ss=function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"offer",e=void 0;return Promise.resolve().then(function(){var t={OfferToReceiveAudio:!0,OfferToReceiveVideo:!0};return"answer"===n?i.Ve.createAnswer(t):i.Ve.createOffer(t)}).then(function(t){return e=t,i.Ve.setLocalDescription(e)}).then(function(){return i.parent.stream.emit("client:call:signaling:sdp",{from:"user",sdp:e}),i.parent.event.publish("call:peer:local:success",{}),Promise.resolve()}).catch(function(){return i.parent.event.publish("call:peer:local:error",{}),Promise.resolve()})},A.prototype.Sn=function(){this.cs()},A.prototype.cs=function(){if(null!==this.Ve){for(var t=this.Ve.getSenders(),i=0;i<t.length;i++)null!==t[i].track&&t[i].track.stop();null!==this.Ge.video&&this.Ge.video.stop(),this.Ve.close(),this.Ve=null}null!==this.He&&(this.parent.Schedule.clear_timeout(this.He),this.He=null),this.parent.Stream.unbind_from(),this.In=!1,this.Pe=!1,this.Ne=!1,this.We=!1,this.Be=null,this.Me=[],this.Ue.local=null,this.Ue.remote=null,this.Ge.video=null,this.Ni(!1),this.parent.event.publish("call:action:stopped",{})},A.prototype.Te=function(t,i){var n=!1;if(!0===this.In&&null!==this.Ue.local){for(var e=!1,s=this.Ue.local[i](),c=0;c<s.length;c++)e=!0,n=!s[c].enabled,s[c].enabled=n;!0===e&&this.parent.event.publish("call:track:local:"+(!0===n?"started":"ended"),{media:t})}return n},A.prototype.Le=function(){var s=this;!0===this.has_support_screensharing()&&(this.Pe=!0,navigator.mediaDevices.getDisplayMedia({video:!0}).then(function(t){for(var t=t.getTracks()[0],i=s.Ve.getSenders(),n=null,e=0;e<i.length;e++)if(i[e].track&&"video"===i[e].track.kind){n=i[e];break}null!==n?(s.Ge.video=n.track,n.replaceTrack(t)):n=s.Ve.addTrack(t,s.Ue.local),t.onended=function(){null!==s.Ve&&(s.us(n),s.parent.event.publish("call:track:local:ended",{media:"screensharing"}))},s.parent.event.publish("call:track:local:started",{media:"screensharing"})}).catch(function(t){s.Pe=!1}))},A.prototype.Je=function(){for(var t=this.Ve.getSenders(),i=null,n=0;n<t.length;n++)if(t[n].track&&"video"===t[n].track.kind){i=t[n];break}null!==i&&(i.track.stop(),i.track.dispatchEvent(new Event("ended")))},A.prototype.us=function(t){null!==this.Ge.video?(t.replaceTrack(this.Ge.video),this.Ge.video=null):this.Ve.removeTrack(t),this.Pe=!1},A.prototype.Ni=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.Tn&&this.parent.Schedule.clear_interval(this.Tn),!0===i&&(this.Tn=this.parent.Schedule.set_interval(function(){t.parent.stream.emit("client:call:heartbeat",{})},this.qe))},A);function A(t){this.parent=t,this.qe=1e4,this.as=5e3,this.rs=200,this.Cn=["call:request:initiate","call:request:accepted","call:request:declined","call:action:stopped","call:signaling:sdp","call:signaling:candidate"],this.st(),this.ft()}var I=(q.prototype.fired=function(t,i){this.parent.socket.emit("trigger:fired",i={identifier:t,name:i}),this.parent.event.publish("trigger:fired",i)},q);function q(t){this.parent=t}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var D,O,R=(B.prototype.configure=function(t){this.ls=t.project,this.ds=t.revision,this.vs=t.environment,this.ps=t.useragent,this.ys=t.page},B.prototype.report=function(t,i,n){if(!(this.ls&&this.ds&&this.vs&&this.ps&&this.ys))throw new Error("Missing a configuration parameter. Did you call configure() before?");"object"===(void 0===n?"undefined":f(n))&&n instanceof Error&&(n={fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,message:n.message,stack:n.stack}),n={project:this.ls,revision:this.ds,environment:this.vs,useragent:this.ps,page:this.ys,level:t,namespace:i,traceback:n},this.parent.socket.emit("issue:report",n),this.parent.event.publish("issue:report",n)},B.prototype.st=function(){this.ls=null,this.ds=null,this.vs=null,this.ps=null,this.ys=null},B);function B(t){this.parent=t,this.st()}D=r,O=function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function c(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function s(){return(s=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n,e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function a(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&r(t,i)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,i){return(r=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t,i,n){return(l=u()?Reflect.construct:function(t,i,n){var e=[null];return e.push.apply(e,i),e=new(Function.bind.apply(t,e)),n&&r(e,n.prototype),e}).apply(null,arguments)}function n(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return l(t,arguments,h(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),r(i,t)}(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(n){var e=u();return function(){var t,i=h(n);return function(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,e?(t=h(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments))}}function v(t,i,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,n){if(t=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=h(t)););return t}(t,i))return(i=Object.getOwnPropertyDescriptor(t,i)).get?i.get.call(n):i.value})(t,i,n||t)}function p(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}var y=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,m=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],g=Object.create(null);g.open="0",g.close="1",g.ping="2",g.pong="3",g.message="4",g.upgrade="5",g.noop="6";var _=Object.create(null);Object.keys(g).forEach(function(t){_[g[t]]=t});for(var w={type:"error",data:"parser error"},b="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),k="function"==typeof ArrayBuffer,x=function(t,i){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];i("b"+t)},n.readAsDataURL(t)},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<t.length;i++)$[t.charCodeAt(i)]=i;function F(t,i){return"blob"===i&&t instanceof ArrayBuffer?new Blob([t]):t}var j="function"==typeof ArrayBuffer,E=z;function z(t){if(t)return function(t){for(var i in z.prototype)t[i]=z.prototype[i];return t}(t)}z.prototype.on=z.prototype.addEventListener=function(t,i){return this.gs=this.gs||{},(this.gs["$"+t]=this.gs["$"+t]||[]).push(i),this},z.prototype.once=function(t,i){function n(){this.off(t,n),i.apply(this,arguments)}return n.fn=i,this.on(t,n),this},z.prototype.off=z.prototype.removeListener=z.prototype.removeAllListeners=z.prototype.removeEventListener=function(t,i){if(this.gs=this.gs||{},0==arguments.length)return this.gs={},this;var n,e=this.gs["$"+t];if(!e)return this;if(1==arguments.length)return delete this.gs["$"+t],this;for(var s=0;s<e.length;s++)if((n=e[s])===i||n.fn===i){e.splice(s,1);break}return 0===e.length&&delete this.gs["$"+t],this},z.prototype.emitReserved=z.prototype.emit=function(){}