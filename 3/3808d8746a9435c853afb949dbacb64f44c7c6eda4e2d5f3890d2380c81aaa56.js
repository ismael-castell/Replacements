!function(t){function e(e){for(var n,o,i=e[0],u=e[1],a=0,s=[];a<i.length;a++)o=i[a],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(c&&c(e);s.length;)s.shift()()}var n={},r={1:0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=i);var u,a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(t){return o.p+""+({0:"vendors~intl-relativetimeformat~polyfills",2:"lang_af",3:"lang_ar",4:"lang_be",5:"lang_bg",6:"lang_bs",7:"lang_ca",8:"lang_cs",9:"lang_da",10:"lang_de",11:"lang_el",12:"lang_es",13:"lang_et",14:"lang_fi",15:"lang_fil",16:"lang_fr",17:"lang_he",18:"lang_hi",19:"lang_hr",20:"lang_hu",21:"lang_id",22:"lang_is",23:"lang_it",24:"lang_ja",25:"lang_ka",26:"lang_kk",27:"lang_ko",28:"lang_ky",29:"lang_lt",30:"lang_lv",31:"lang_nl",32:"lang_no",33:"lang_pa",34:"lang_pl",35:"lang_pt",36:"lang_pt_br",37:"lang_ro",38:"lang_ru",39:"lang_sk",40:"lang_sl",41:"lang_sq",42:"lang_sr",43:"lang_sr_me",44:"lang_sv",45:"lang_sw",46:"lang_th",47:"lang_tr",48:"lang_tw",49:"lang_uk",50:"lang_ur",51:"lang_uz",52:"lang_vi",53:"lang_zh_cn",54:"lang_zh_tw",55:"locale_ak",56:"locale_ar",57:"locale_be",58:"locale_bg",59:"locale_bs",60:"locale_ca",61:"locale_cs",62:"locale_da",63:"locale_de",64:"locale_el",65:"locale_en",66:"locale_es",67:"locale_et",68:"locale_fi",69:"locale_fil",70:"locale_fr",71:"locale_he",72:"locale_hi",73:"locale_hr",74:"locale_hu",75:"locale_id",76:"locale_is",77:"locale_it",78:"locale_ja",79:"locale_ka",80:"locale_kk",81:"locale_ko",82:"locale_ky",83:"locale_lt",84:"locale_lv",85:"locale_nl",86:"locale_pa",87:"locale_pl",88:"locale_pt",89:"locale_ro",90:"locale_ru",91:"locale_sk",92:"locale_sl",93:"locale_sq",94:"locale_sr",95:"locale_sr_cyrl_me",96:"locale_sv",97:"locale_sw",98:"locale_th",99:"locale_tr",100:"locale_uk",101:"locale_ur",102:"locale_uz",103:"locale_vi",104:"locale_zh",105:"loclae_af",106:"polyfills",107:"pubnub",111:"vendors~polyfills",112:"vendors~pubnub",113:"vendors~sentry"}[t]||t)+"."+{0:"fc9ca3b2551bbfafd21f",2:"62e25c244414c46ac5d8",3:"2c8589f2feed557e2ee6",4:"828ef471ac2d965a7707",5:"5b0d4f275dc908f97207",6:"c2c601ec7d712c3ca68f",7:"088dd19c34d45d10b2ed",8:"08f919afb4a2f77954ab",9:"24a2ab1e2355142e313f",10:"da1a9af1f2936df86602",11:"e8ffb78719667cd80a1d",12:"f279371c86e1ad13e3a8",13:"e1bb6517698f36d3a591",14:"dbf80413a43e15bbe580",15:"d9911d5fd8e480b1a3aa",16:"e00e303b5f005f0e335d",17:"0fe22ebb25d7b88ba05d",18:"eda1a0d9e163b08871c3",19:"025a1619fa9814fa5cd3",20:"441fd8df650ccdf009f7",21:"ba854ffcfba40203a4ad",22:"83fa16ea118f8a0b147c",23:"521eb43d24b82de1377d",24:"4b7f6c2898dddc4c8672",25:"d3fdb40721d9285c195d",26:"136759446030ac4ea8db",27:"5c1943cb5587c1006d0d",28:"2bca9bc338bd86fccc30",29:"08158b6215e73b4f1814",30:"d648cf1661da4b6ffd16",31:"63d85e2edd0be62d461a",32:"e9e9632c19f94da99251",33:"275466f3306e27d7f472",34:"6eedcb0c43205386cc37",35:"af150e8e53b35ac87c26",36:"d06fc97428f888a54abe",37:"f9c9e376752606b19719",38:"9e0e622e2c96563dcc76",39:"65b5be6b01c4f66df57b",40:"34fc97418d490f3a2722",41:"61f19860429fabc4ad98",42:"cacefa3588c4111fba14",43:"d4501c857f88a6873714",44:"0d4d98d1b7a1bae66677",45:"f02758ccee58b2dd3367",46:"07c7fe9bc687a93715d3",47:"52f5c911348c3786f927",48:"4a27ac2e53cc7050b1b5",49:"5720b531be186784409e",50:"ad8e284fb7b6000c95c3",51:"e1982249e5befb7c7dd2",52:"a565635bd297f5457558",53:"1c40b52df966ec95d656",54:"3b1463cadb1ceb8455fc",55:"0c7f8c83804d4505bdb1",56:"3c77935ebc43282c822d",57:"717891f5c657f77149a1",58:"ea6994429c652f696fe0",59:"5caa969cd6e9542aa1c1",60:"014acc4e56a1c8ce3aea",61:"6aea8223fc6a21c52499",62:"48607f246c5177eaa966",63:"30badb2a80500c05943c",64:"7ea0af10086f5ccc6390",65:"8d7290827af403295509",66:"127db121f3f0851812f7",67:"802a7211d655f29338f3",68:"7978ea9da4fc6159164a",69:"7849f9608fe9cee05f91",70:"6bc70a4582b49adef7c8",71:"3091bd4f6c21e3c532a7",72:"25374121cfce882252ee",73:"290a22140f5ea819270a",74:"9b0e7a3cb13288f267d6",75:"5d2209cacd25fb41a848",76:"132a837cd72ef9748abf",77:"b27c9c2724d7f71e93cd",78:"0f57a2b25f9b59a922f6",79:"d798147e1bcf7818dbf8",80:"a6a03ebcb342f19212f2",81:"21747219a23c95ad09fd",82:"fe1aee4dbf878d0e4275",83:"bc811b5fe6df74f37bbb",84:"1f7ac16d91bdd78485fb",85:"2acfecfcb3ae90b3884d",86:"92694693b672739c767e",87:"f7f9031011270b1ff326",88:"f6bf1c02dabf47b015c8",89:"13b2b6fd4840d83d4c51",90:"aebaf76c90a40bbed620",91:"5584ac976a4ae8115377",92:"24f61628e26681b3c746",93:"9a5da31c74bf76640a8a",94:"3b114a792e8590a33b23",95:"94d3a10099b76032e243",96:"9d0ddbfbdaf28d0aa85e",97:"db7669bc4fb40067e68f",98:"3f42d5052ff5fe9e26fa",99:"9f7cceb82b6e56c43a38",100:"43d49c5117584cc885b4",101:"6ff642bfa241682eef5f",102:"13abc086ead55152dc31",103:"fda9cb359813e7ae08a4",104:"6d2b0c2c9863df908fda",105:"0dfb7dbe17149ebba874",106:"e6683f2beebee98011ab",107:"36e2639cc169e2d2f217",111:"227cfb5538d423ad78ac",112:"773d1f0fa441e4631d59",113:"b23c883220e8eb28c9c9"}[t]+".js"}(t);var c=new Error;u=function(e){a.onerror=a.onload=null,clearTimeout(s);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[t]=void 0}};var s=setTimeout((function(){u({type:"timeout",target:a})}),12e4);a.onerror=a.onload=u,document.head.appendChild(a)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="https://cdn.kustomerapp.com/chat-web/release-v0.1.270/",o.oe=function(t){throw console.error(t),t};var i=window.kustomer_chat_webpackJsonp=window.kustomer_chat_webpackJsonp||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var a=0;a<i.length;a++)e(i[a]);var c=u;o(o.s=96)}([,,,function(t,e,n){"use strict";n.d(e,"g",(function(){return d})),n.d(e,"m",(function(){return f})),n.d(e,"a",(function(){return v})),n.d(e,"k",(function(){return b})),n.d(e,"b",(function(){return g})),n.d(e,"f",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"l",(function(){return y})),n.d(e,"j",(function(){return O})),n.d(e,"h",(function(){return w})),n.d(e,"d",(function(){return j})),n.d(e,"i",(function(){return _})),n.d(e,"e",(function(){return I}));var r=n(25);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={listeners:{},sessions:{},unreadCounts:{conversations:{},total:0},users:{}},l=s,d=function(){return l},f=function(t,e){l=a(a({},l),{},c({},t,e))},v=function(t,e){var n=l.listeners[t]||[];l=a(a({},l),{},{listeners:a(a({},l.listeners),{},c({},t,[].concat(o(n),[e])))})},b=function(t,e){var n=l.listeners[t];null!=n&&n.length&&(l=a(a({},l),{},{listeners:a(a({},l.listeners),{},c({},t,n.filter((function(t){return t!==e}))))}))},g=function(t){l=a(a({},l),{},{sessions:a(a({},l.sessions),{},c({},t.id,t))})},h=function(t){var e;return null===(e=l.sessions)||void 0===e?void 0:e[t]},p=function(t){l=a(a({},l),{},{unreadCounts:t})},m=function(t,e,n){l=a(a({},l),{},{unreadCounts:{total:e,conversations:a(a({},l.unreadCounts.conversations),{},c({},t,n))}})},y=function(t){var e=l.unreadCounts.conversations[t],n=l.unreadCounts.total;m(t,n>0?n-e:0,0)},O=function(t){var e=l.unreadCounts.conversations[t]||0,n=l.unreadCounts.total||0;m(t,n+1,e+1)},w=function(){return l.unreadCounts},j=function(t,e){l=a(a({},l),{},{users:a(a({},l.users),{},c({},t,e))})},_=function(t){return l.users[t]},I=function(){f("customerId",void 0),f("externalId",void 0),f("email",void 0),f("verified",void 0),f("sessions",{}),f("users",{}),f("unreadCounts",s.unreadCounts),r.a.clear()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"i",(function(){return v})),n.d(e,"d",(function(){return b})),n.d(e,"f",(function(){return g})),n.d(e,"e",(function(){return h})),n.d(e,"k",(function(){return p}));var r=n(5);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){return window.KustomerCore},c=function(){return window.parent.Kustomer},s=function t(){var e;null===(e=document.getElementById("root"))||void 0===e||e.classList.remove("userIsTabbing"),window.removeEventListener("mousedown",t),window.addEventListener("keydown",l)},l=function t(e){var n;r.d(e)&&(null===(n=document.getElementById("root"))||void 0===n||n.classList.add("userIsTabbing"),window.removeEventListener("keydown",t),window.addEventListener("mousedown",s))},d=function(t){return JSON.parse(window.localStorage.getItem("kustomerState")||"{}")[t]},f=function(t,e){var n=JSON.parse(window.localStorage.getItem("kustomerState")||"{}");window.localStorage.setItem("kustomerState",JSON.stringify(i(i({},n),{},u({},t,e))))},v=function(t,e,n){var r,o,i;null===(r=c())||void 0===r||null===(o=r.listeners)||void 0===o||null===(i=o[t])||void 0===i||i.forEach((function(t){t(e,n)}))},b=function(t,e){if(null!=t&&t.messages&&e){var n=t.messages.slice().reverse().find((function(t){var n,r,o;return"user"===(null===(n=e.messageData)||void 0===n||null===(r=n[t])||void 0===r||null===(o=r.sentBy)||void 0===o?void 0:o.type)}));return n?e.messageData[n]:void 0}},g=function(t,e,n){var r,o,i;return{avatarUrl:(null==t?void 0:t.avatarUrl)||(null==n||null===(r=n.attributes)||void 0===r?void 0:r.avatarUrl)||(null==e?void 0:e.teamIconUrl),displayName:(null==t?void 0:t.displayName)||(null==n||null===(o=n.attributes)||void 0===o?void 0:o.publicName)||(null==n||null===(i=n.attributes)||void 0===i?void 0:i.name)||(null==e?void 0:e.teamName)}},h=function(t){var e,n=t.satisfaction,r=t.lastMessageAt,o=t.preview,i=null==n?void 0:n.timetoken,u=null==n||null===(e=n.form)||void 0===e?void 0:e.introduction;return i&&r&&r<i?u:o},p=function(t,e){return t.length>e?"".concat(null==t?void 0:t.substring(0,e),"..."):t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u}));var r=function(t){var e=t.which,n=t.key,r=t.keyCode;return 13===e||"Enter"===n||13===r},o=function(t){var e=t.which,n=t.key,r=t.keyCode;return 9===e||"Tab"===n||9===r},i=function(t){var e=t.which,n=t.key,r=t.keyCode;return 27===e||("Escape"===n||"Esc"===n)||27===r},u=function(t){var e=t.which,n=t.key,r=t.keyCode,o=t.shiftKey;return 16===e||("Shift"===n||"ShiftLeft"===n||"ShiftRight"===n)||16===r||o}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return b}));var r={};n.r(r),n.d(r,"default",(function(){return c}));var o=n(11),i=n(4),u={af:"af",ar:"ar",be:"be",bg:"bg",bs:"bs",ca:"ca",he:"he",cs:"cs",da:"da",de:"de",nl:"nl",el:"el",en:"en_us",en_us:"en_us",en_ca:"en_ca",en_gb:"en_gb",es:"es",es_es:"es_es",et:"et",fi:"fi",fil:"fil",fr:"fr",fr_ca:"fr_ca",hi:"hi",hr:"hr",hu:"hu",id:"id",is:"is",it:"it",ja:"ja",ka:"ka",kk:"kk",ko:"ko",ky:"ky",lt:"lt",lv:"lv",no:"no",pa:"pa",pl:"pl",pt:"pt",pt_br:"pt_br",ro:"ro",ru:"ru",sk:"sk",sl:"sl",sq:"sq",sr:"sr",sr_me:"sr_me",sv:"sv",sw:"sw",th:"th",tr:"tr",tw:"tw",uk:"uk",ur:"ur",uz:"uz",vi:"vi",zh:"zh_cn",zh_cn:"zh_cn",zh_tw:"zh_tw"},a={},c={en_us:{getMessages:function(){return Promise.resolve(a)},getLocale:function(){return n.e(65).then(n.t.bind(null,185,7))}},en:{getMessages:function(){return Promise.resolve(a)},getLocale:function(){return n.e(65).then(n.t.bind(null,185,7))}},en_gb:{getMessages:function(){return Promise.resolve(a)},getLocale:function(){return n.e(65).then(n.t.bind(null,185,7))}},en_ca:{getMessages:function(){return Promise.resolve(a)},getLocale:function(){return n.e(65).then(n.t.bind(null,185,7))}},es:{getMessages:function(){return n.e(12).then(n.t.bind(null,316,3))},getLocale:function(){return n.e(66).then(n.t.bind(null,317,7))}},es_es:{getMessages:function(){return n.e(12).then(n.t.bind(null,316,3))},getLocale:function(){return n.e(66).then(n.t.bind(null,317,7))}},fr:{getMessages:function(){return n.e(16).then(n.t.bind(null,318,3))},getLocale:function(){return n.e(70).then(n.t.bind(null,319,7))}},fr_ca:{getMessages:function(){return n.e(16).then(n.t.bind(null,318,3))},getLocale:function(){return n.e(70).then(n.t.bind(null,319,7))}},de:{getMessages:function(){return n.e(10).then(n.t.bind(null,320,3))},getLocale:function(){return n.e(63).then(n.t.bind(null,321,7))}},pt:{getMessages:function(){return n.e(35).then(n.t.bind(null,322,3))},getLocale:function(){return n.e(88).then(n.t.bind(null,323,7))}},ar:{getMessages:function(){return n.e(3).then(n.t.bind(null,324,3))},getLocale:function(){return n.e(56).then(n.t.bind(null,325,7))}},he:{getMessages:function(){return n.e(17).then(n.t.bind(null,326,3))},getLocale:function(){return n.e(71).then(n.t.bind(null,327,7))}},af:{getMessages:function(){return n.e(2).then(n.t.bind(null,328,3))},getLocale:function(){return n.e(105).then(n.t.bind(null,329,7))}},be:{getMessages:function(){return n.e(4).then(n.t.bind(null,330,3))},getLocale:function(){return n.e(57).then(n.t.bind(null,331,7))}},bg:{getMessages:function(){return n.e(5).then(n.t.bind(null,332,3))},getLocale:function(){return n.e(58).then(n.t.bind(null,333,7))}},bs:{getMessages:function(){return n.e(6).then(n.t.bind(null,334,3))},getLocale:function(){return n.e(59).then(n.t.bind(null,335,7))}},ca:{getMessages:function(){return n.e(7).then(n.t.bind(null,336,3))},getLocale:function(){return n.e(60).then(n.t.bind(null,337,7))}},cs:{getMessages:function(){return n.e(8).then(n.t.bind(null,338,3))},getLocale:function(){return n.e(61).then(n.t.bind(null,339,7))}},da:{getMessages:function(){return n.e(9).then(n.t.bind(null,340,3))},getLocale:function(){return n.e(62).then(n.t.bind(null,341,7))}},nl:{getMessages:function(){return n.e(31).then(n.t.bind(null,342,3))},getLocale:function(){return n.e(85).then(n.t.bind(null,343,7))}},el:{getMessages:function(){return n.e(11).then(n.t.bind(null,344,3))},getLocale:function(){return n.e(64).then(n.t.bind(null,345,7))}},et:{getMessages:function(){return n.e(13).then(n.t.bind(null,346,3))},getLocale:function(){return n.e(67).then(n.t.bind(null,347,7))}},fi:{getMessages:function(){return n.e(14).then(n.t.bind(null,348,3))},getLocale:function(){return n.e(68).then(n.t.bind(null,349,7))}},fil:{getMessages:function(){return n.e(15).then(n.t.bind(null,350,3))},getLocale:function(){return n.e(69).then(n.t.bind(null,351,7))}},hi:{getMessages:function(){return n.e(18).then(n.t.bind(null,352,3))},getLocale:function(){return n.e(72).then(n.t.bind(null,353,7))}},hr:{getMessages:function(){return n.e(19).then(n.t.bind(null,354,3))},getLocale:function(){return n.e(73).then(n.t.bind(null,355,7))}},hu:{getMessages:function(){return n.e(20).then(n.t.bind(null,356,3))},getLocale:function(){return n.e(74).then(n.t.bind(null,357,7))}},id:{getMessages:function(){return n.e(21).then(n.t.bind(null,358,3))},getLocale:function(){return n.e(75).then(n.t.bind(null,359,7))}},is:{getMessages:function(){return n.e(22).then(n.t.bind(null,360,3))},getLocale:function(){return n.e(76).then(n.t.bind(null,361,7))}},it:{getMessages:function(){return n.e(23).then(n.t.bind(null,362,3))},getLocale:function(){return n.e(77).then(n.t.bind(null,363,7))}},ja:{getMessages:function(){return n.e(24).then(n.t.bind(null,364,3))},getLocale:function(){return n.e(78).then(n.t.bind(null,365,7))}},ka:{getMessages:function(){return n.e(25).then(n.t.bind(null,366,3))},getLocale:function(){return n.e(79).then(n.t.bind(null,367,7))}},kk:{getMessages:function(){return n.e(26).then(n.t.bind(null,368,3))},getLocale:function(){return n.e(80).then(n.t.bind(null,369,7))}},ko:{getMessages:function(){return n.e(27).then(n.t.bind(null,370,3))},getLocale:function(){return n.e(81).then(n.t.bind(null,371,7))}},ky:{getMessages:function(){return n.e(28).then(n.t.bind(null,372,3))},getLocale:function(){return n.e(82).then(n.t.bind(null,373,7))}},lt:{getMessages:function(){return n.e(29).then(n.t.bind(null,374,3))},getLocale:function(){return n.e(83).then(n.t.bind(null,375,7))}},lv:{getMessages:function(){return n.e(30).then(n.t.bind(null,376,3))},getLocale:function(){return n.e(84).then(n.t.bind(null,377,7))}},no:{getMessages:function(){return n.e(32).then(n.t.bind(null,378,3))}},pa:{getMessages:function(){return n.e(33).then(n.t.bind(null,379,3))},getLocale:function(){return n.e(86).then(n.t.bind(null,380,7))}},pl:{getMessages:function(){return n.e(34).then(n.t.bind(null,381,3))},getLocale:function(){return n.e(87).then(n.t.bind(null,382,7))}},pt_br:{getMessages:function(){return n.e(36).then(n.t.bind(null,383,3))},getLocale:function(){return n.e(88).then(n.t.bind(null,323,7))}},ro:{getMessages:function(){return n.e(37).then(n.t.bind(null,384,3))},getLocale:function(){return n.e(89).then(n.t.bind(null,385,7))}},ru:{getMessages:function(){return n.e(38).then(n.t.bind(null,386,3))},getLocale:function(){return n.e(90).then(n.t.bind(null,387,7))}},sk:{getMessages:function(){return n.e(39).then(n.t.bind(null,388,3))},getLocale:function(){return n.e(91).then(n.t.bind(null,389,7))}},sl:{getMessages:function(){return n.e(40).then(n.t.bind(null,390,3))},getLocale:function(){return n.e(92).then(n.t.bind(null,391,7))}},sq:{getMessages:function(){return n.e(41).then(n.t.bind(null,392,3))},getLocale:function(){return n.e(93).then(n.t.bind(null,393,7))}},sr:{getMessages:function(){return n.e(42).then(n.t.bind(null,394,3))},getLocale:function(){return n.e(94).then(n.t.bind(null,395,7))}},sr_me:{getMessages:function(){return n.e(43).then(n.t.bind(null,396,3))},getLocale:function(){return n.e(95).then(n.t.bind(null,397,7))}},sv:{getMessages:function(){return n.e(44).then(n.t.bind(null,398,3))},getLocale:function(){return n.e(96).then(n.t.bind(null,399,7))}},sw:{getMessages:function(){return n.e(45).then(n.t.bind(null,400,3))},getLocale:function(){return n.e(97).then(n.t.bind(null,401,7))}},th:{getMessages:function(){return n.e(46).then(n.t.bind(null,402,3))},getLocale:function(){return n.e(98).then(n.t.bind(null,403,7))}},tr:{getMessages:function(){return n.e(47).then(n.t.bind(null,404,3))},getLocale:function(){return n.e(99).then(n.t.bind(null,405,7))}},tw:{getMessages:function(){return n.e(48).then(n.t.bind(null,406,3))},getLocale:function(){return n.e(55).then(n.t.bind(null,407,7))}},uk:{getMessages:function(){return n.e(49).then(n.t.bind(null,408,3))},getLocale:function(){return n.e(100).then(n.t.bind(null,409,7))}},ur:{getMessages:function(){return n.e(50).then(n.t.bind(null,410,3))},getLocale:function(){return n.e(101).then(n.t.bind(null,411,7))}},uz:{getMessages:function(){return n.e(51).then(n.t.bind(null,412,3))},getLocale:function(){return n.e(102).then(n.t.bind(null,413,7))}},vi:{getMessages:function(){return n.e(52).then(n.t.bind(null,414,3))},getLocale:function(){return n.e(103).then(n.t.bind(null,415,7))}},zh_cn:{getMessages:function(){return n.e(53).then(n.t.bind(null,416,3))},getLocale:function(){return n.e(104).then(n.t.bind(null,417,7))}},zh_tw:{getMessages:function(){return n.e(54).then(n.t.bind(null,418,3))},getLocale:function(){return n.e(104).then(n.t.bind(null,417,7))}}},s=function(){var t,e=window.navigator;return Object(o.c)()?null==e?void 0:e.browserLanguage:null==e||null===(t=e.languages)||void 0===t?void 0:t[0]},l=function(){var t,e;return(null===(t=Object(i.a)())||void 0===t||null===(e=t.startParameters)||void 0===e?void 0:e.lang)||s()},d=function(t){var e=t.toLowerCase(),n=e.replace("-","_");return-1===n.indexOf("_")?e:u[n]?n:n.split("_")[0]},f=function(t){var e,n;if(t)return u[t];var r=null===(e=Object(i.a)())||void 0===e||null===(n=e.startParameters)||void 0===n?void 0:n.lang,o=r&&"string"==typeof r&&d(r);if(o&&u[o])return u[o];var a=d(s());return u[a]},v=function(){var t,e,n=f();return null==r||null===(t=c)||void 0===t||null===(e=t[n])||void 0===e?void 0:e.getMessages()},b=function(){var t;return"he"!==(t=f())&&"ar"!==t||(document.dir="rtl"),Object(o.b)().then((function(){return function(){var t,e,n=f(),o=null==r||null===(t=c)||void 0===t||null===(e=t[n])||void 0===e?void 0:e.getLocale;return Intl.RelativeTimeFormat.polyfilled&&o?o():Promise.resolve()}()})).catch((function(t){return"An error occurred while getting locale data, ".concat(t)}))}},function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return g})),n.d(e,"b",(function(){return h}));var r=n(19),o=n(3),i=n(29),u=n(30);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t){if("No Content"!==t.statusText){var e=t.headers.get("content-type");return e&&e.includes("application/json")?t.ok?null==t?void 0:t.json():function(t){return t.json().then((function(e){var n=function(t){var e,n,r=t[0],o=null==r||null===(e=r.meta)||void 0===e||null===(n=e.subErrors)||void 0===n?void 0:n[0],i=r.title,u=r.code,a=r.source;if(o){var c=o.title;return{code:o.code,title:c,source:o.source.pointer}}return{source:(null==a?void 0:a.parameter)||(null==a?void 0:a.pointer),title:i,code:u}}(e.errors),r="".concat(null==t?void 0:t.status," ").concat(null==t?void 0:t.statusText," to ").concat(null==t?void 0:t.url);"badparam"===n.code&&(r="".concat(null==n?void 0:n.title,": ").concat(null==n?void 0:n.source));var o=new Error(r);throw o.title=null==n?void 0:n.title,o.status=t.status?"".concat(t.status):"",o.source=null==n?void 0:n.source,o.url=null==t?void 0:t.url,o.type=null==t?void 0:t.type,o}))}(t):null}},d=function(t,e){return fetch(t,{method:"POST",body:e}).then((function(t){return l(t)}))},f=function(t,e){var n,a=Object(u.a)(),s=a.protocol,d=a.orgName,f=a.baseUrlDomain;if(void 0===d)return Promise.reject();var v=Object(o.g)(),b=null==v||null===(n=v.settings)||void 0===n?void 0:n.enabled,g=[i.a];if(!1===b&&!g.includes(t))return Promise.reject(new Error("Could not complete request because Kustomer Chat is disabled in your org settings"));var h="".concat(s,"://").concat(d,".").concat(f).concat(t);var p=function(t){var e=Object(r.a)()||"",n=new Headers({"Content-Type":"application/json","x-kustomer":"kustomer","x-kustomer-client":"chat-web","x-kustomer-tracking-token":e,credentials:"include"});return c(c({},t),{},{headers:n})}(e);return fetch(h,p).then((function(t){return l(t)}))},v=function(t,e){var n=c({method:"GET"},e);return f(t,n)},b=function(t,e){var n=c({method:"POST"},e);return f(t,n)},g=function(t,e){var n=c({method:"PUT"},e);return f(t,n)},h=function(t,e){var n=c({method:"PATCH"},e);return f(t,n)}},function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"l",(function(){return o})),n.d(e,"k",(function(){return i})),n.d(e,"n",(function(){return u})),n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"h",(function(){return s})),n.d(e,"m",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return h})),n.d(e,"o",(function(){return p}));var r="onConversationCreate",o="onMessageSent",i="onMessageReceived",u="onUnreadCountChange",a="onConversationEnded",c="onAssistantEnded",s="onConversationUnended",l="onSatisfactionReceived",d="onAgentTypingActivity",f="onConversationMerged",v="onLogin",b="onLogout",g=25,h=100,p=100},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return u}));var r=n(8),o=n(3),i=function(t){return!![r.e,r.l,r.k,r.n,r.f,r.h,r.d,r.m,r.c,r.i,r.j,r.g].includes(t)||(console.error("Provided Kustomer event type is invalid: ".concat(t)),!1)},u=function(t,e,n){var r=Object(o.g)().listeners[t];null!=r&&r.length&&r.forEach((function(t){e||n?t(e,n):t()}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return a}));var r,o=n(19),i=n(7),u=function(){return Object(i.a)("/c/v1/tracking/tokens/current").then((function(t){var e=t.data.attributes.token;return Object(o.c)(e),t}))},a=function(){return Object(o.a)()?Promise.resolve():r||(r=u().then((function(){r=void 0})))}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return u}));var r=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE")>0||t.indexOf("Trident")>0},o=function(){return null!==(t=window)&&void 0!==t&&null!==(e=t.Intl)&&void 0!==e&&e.RelativeTimeFormat?Promise.resolve():n.e(0).then(n.t.bind(null,195,7));var t,e},i=function(){return r()?Promise.all([n.e(0),n.e(111),n.e(106)]).then(n.bind(null,312)).catch((function(t){return"An error occurred while loading polyfills, ".concat(t)})):Promise.resolve()},u=function(t,e){var n=t;r()&&function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&t.getAttribute&&(t.setAttribute("srcdoc",n),e="javascript: window.frameElement.getAttribute('srcdoc');",t.contentWindow&&(t.contentWindow.location=e),t.setAttribute("src",e))}(n,e),n.srcdoc=e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return m}));var r=n(3),o=n(10),i=n(7),u=n(14),a=n(6),c=n(31),s=function(t){if(!t)return new Error("A conversationId must be provided.")},l=function(t){return"/c/v2/chat/sessions/".concat(t)};function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){var e=function(t){var e=null==t?void 0:t.title;if(e&&Object(u.d)(e)&&e.length>256)return new Error("Title must be less than or equal to 256 characters")}(t);return e?Promise.reject(e):Object(o.b)().then((function(){return Object(i.c)(function(t){var e=null==t?void 0:t.lang,n=Object(a.b)(e);return n?"/c/v2.1/chat/sessions?lang=".concat(n):"/c/v2.1/chat/sessions"}(t),{body:JSON.stringify({title:t.title,assistant:t.assistant,brand:t.brand,custom:t.custom})}).then((function(t){var e=t.data.relationships.customer.data.id;return Object(r.m)("customerId",e),Object(r.b)(t.data),t}))}))},g=function(t){return Object(i.a)((e=t,n=c.a,o=null==e?void 0:e.page,u=null==e?void 0:e.pageSize,a=null==e?void 0:e.brandId,s=[],o&&s.push("page=".concat(o)),u&&s.push("pageSize=".concat(u)),a&&s.push("brandId=".concat(a)),s.length&&(n="/c/v2/chat/sessions?".concat(s.join("&"))),n)).then((function(t){var e=null==t?void 0:t.data.filter((function(t){var e,n=null==t||null===(e=t.attributes)||void 0===e?void 0:e.pubnub;return n&&!(null!=n&&n.error)}));return null==e||e.forEach((function(t){Object(r.b)(t)})),f(f({},t),{},{data:e})}));var e,n,o,u,a,s},h=function(t){var e=s(t);return e?Promise.reject(e):Object(i.a)(l(t)).then((function(t){return Object(r.b)(t.data),t}))},p=function(t,e){var n=s(t);return n?Promise.reject(n):Object(i.d)(l(t),{body:JSON.stringify(e)}).then((function(t){return Object(r.b)(t.data),t}))},m=function(t){var e=null==t?void 0:t.body;return Object(i.b)(function(t){var e=null==t?void 0:t.sessionId,n=null==t?void 0:t.messageIds;return"/c/v2/chat/sessions/".concat(e,"/messages/").concat(n)}(t),{body:JSON.stringify(e)})}},function(t,e,n){"use strict";n.d(e,"o",(function(){return r})),n.d(e,"m",(function(){return o})),n.d(e,"n",(function(){return i})),n.d(e,"l",(function(){return u})),n.d(e,"k",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"j",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return b})),n.d(e,"h",(function(){return g})),n.d(e,"p",(function(){return h})),n.d(e,"q",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return y}));var r="PNSubscribeOperation",o="PNReconnectedCategory",i="PNNetworkUpCategory",u="PNNetworkDownCategory",a=["PNNetworkIssuesCategory","PNBadRequestCategory","PNAccessDeniedCategory"],c="kustomer.app.chat.session.end",s="kustomer.assistant.chat.session.end",l="kustomer.app.chat.message.receive",d="kustomer.app.chat.message.send",f="kustomer.app.chat.session.update",v="kustomer.app.chat.csat.send",b="kustomer.app.chat.csat.submit",g="kustomer.app.chat.session_merge.create",h="user-typing",p="user-typing-ended",m="customer-typing-ended",y="customer-typing"},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return c}));var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=r(t);if(e<=0)return n;for(;o.length;)n.push(o.splice(0,e));return n},u=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.filter((function(t){return n.every((function(e){return e.includes(t)}))}))},a=function(t){return"string"==typeof t},c=function(){var t=window;if(!t||!t.KustomerMain)throw Error("KustomerMain object not found");return t.KustomerMain}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(t){var e=t.attributes,n=e.htmlBody,r=e.metaDescription,o=e.title,i=e.article,u=e.updatedAt,a=e.lang,c=e.slug,s=e.hash,l=e.kbUrl,d=e.knowledgeBaseId;return{articleId:i,htmlBody:n,title:o,description:r,updatedAt:u,lang:a,slug:c,hash:s,version:t.id,kbUrl:l,knowledgeBaseId:d}},o=function(t){return{articles:t}}},function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}},function(t,e,n){"use strict";e.a=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var u=n.then;if("function"==typeof u)return void u.call(n,(function(e){i(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--o&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--o&&e(r)}for(var u=0;u<r.length;u++)i(u,r[u])}))}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));n(11);var r=function(t){try{localStorage.setItem("kustomer-chat-tracking-token",t)}catch(t){throw new Error("Setting tracking token in local storage")}},o=function(){try{return localStorage.getItem("kustomer-chat-tracking-token")}catch(t){throw new Error("Getting tracking token from local storage")}},i=function(){try{return localStorage.removeItem("kustomer-chat-tracking-token")}catch(t){throw new Error("Removing tracking token from local storage")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"b",(function(){return g}));var r=n(10),o=n(7),i=function(t){var e,n=0;return t.every((function(t){return n+=t.size,!(e=function(t){if(t.size>5e6)return new Error("Individual attachment file size is greater than 5MB")}(t))})),e||(n>9e6?new Error("Total attachments file size is greater than 9MB"):void 0)};function u(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c=function(t){var e=t.file;return Object(r.b)().then((function(){var n;return Object(o.c)("/c/v1/chat/attachments",{body:JSON.stringify({contentLength:e.size,contentType:e.type,name:e.name})}).then((function(e){return n=e,function(t,e){var n;if(null==e||null===(n=e.meta)||void 0===n||!n.upload)return Promise.reject();var r=e.meta.upload,i=r.fields,u=r.url,a=new FormData;return Object.entries(i).forEach((function(t){a.append(t[0],t[1])})),a.append("file",t.file),Object(o.e)(u,a)}(t,e)})).then((function(){return n}))}))},s=function(t){if(null==t||!t.length)return Promise.reject();var e=function(t){if(t.find((function(t){return!t.file})))return new Error("Attachment is missing one or more of the required properties: file");var e=t.map((function(t){return t.file})),n=i(e);return n||void 0}(t);if(e)return Promise.reject(e);var n=t.reduce((function(t,e){var n=c(e);return[].concat(u(t),[n])}),[]);return Promise.all(n)},l=n(6),d=function(t,e){var n=t.lang,r=Object(l.b)(n);return r?"".concat(e,"?lang=").concat(r):e},f=function(t,e){var n=function(t,e){if(!t)return new Error("A conversationId must be provided.");var n=null==e?void 0:e.body,r=null==e?void 0:e.attachments;return n||null!=r&&r.length?void 0:new Error("Message is missing one or more of the required properties: body or attachments")}(t,e);if(n)return Promise.reject(n);var i=null==e?void 0:e.body,u=null==e?void 0:e.payload,a=null==e?void 0:e.attachments,c=null==e?void 0:e.lastDeflection,l=null==e?void 0:e.isInAssistantMode,f=null==e?void 0:e.initAssistantPayload;return Object(r.b)().then((function(){if(null!=a&&a.length)return s(a)})).then((function(n){var r;return n&&(r=n.map((function(t){var e;return null==t||null===(e=t.data)||void 0===e?void 0:e.id}))),l?Object(o.c)(d(e,"/c/v2/chat/assistant/messages"),{body:JSON.stringify({session:t,body:i,payload:u,lastDeflection:c,attachments:r,assistant:null==f?void 0:f.assistant,dialog:null==f?void 0:f.dialog,node:null==f?void 0:f.node,initialMessages:null==f?void 0:f.initialMessages})}):Object(o.c)(function(t){return d(t,"/c/v2/chat/messages")}(e),{body:JSON.stringify({session:t,body:i,payload:u,lastDeflection:c,attachments:r})})}))},v=function(t){return Object(o.a)(function(t){return"/c/v1/chat/messages/".concat(t,"/attachments")}(t))},b=function(t,e){return Object(o.a)(function(t,e){var n="/c/v2.1/chat/sessions/".concat(t,"/messages?count=").concat(e.count);return e.before?"".concat(n,"&before=").concat(e.before):n}(t,e))},g=function(t){return new Promise((function(e){setTimeout((function(){e(v(t))}),400)}))}},,function(t,e,n){"use strict";function r(){return n.e(113).then(n.bind(null,94))}function o(t,e){return r().then((function(n){return n.getCurrentHub().getClient()||n.init({dsn:"https://".concat(t,"@o38471.ingest.sentry.io/6150287"),environment:"production",release:"release-v0.1.270",initialScope:{tags:{orgId:e}}}),n}))}function i(t){return r().then((function(e){return e.captureException(t)}))}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u}));var r=n(6),o=function(t,e){if(!t)return new Error("A satisfactionId must be provided.");var n=e.rating,r=e.answers;if(r&&r.find((function(t){var e;return(null===(e=t.answer)||void 0===e?void 0:e.length)>1024})))return new Error("Answers cannot exceed 1024 characters");return n&&("number"!=typeof n||n>10||n<1)?new Error("Rating must be a number between 1 and 10"):void 0},i=function(t,e,n){var r,o,i,u,a,c,s={},l=null==t||null===(r=t.relationships)||void 0===r||null===(o=r.conversation)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id,d=null==t||null===(u=t.relationships)||void 0===u||null===(a=u.session)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.id;if(!t||!n||!l&&!d)return s;var f=t.id,v=t.attributes,b=v.rating,g=v.answers,h=v.createdAt;s.conversationId=l||d,s.satisfactionId=f;var p=h;if(e){var m=Number(e)/1e4;p=new Date(m).toISOString()}if(s.timetoken=p,s.response={rating:b,answers:g},n){var y=n.attributes,O=y.description,w=y.introduction,j=y.name,_=y.questions,I=y.ratingPrompt,P=y.scale;s.form={description:O,introduction:w,name:j,questions:_,ratingPrompt:I,scale:P}}return s},u=function(t,e){var n=Object(r.b)(e),o="/c/v3/chat/satisfaction-responses/".concat(t,"?include=satisfaction");return n&&(o+="&lang=".concat(n)),o}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),o=n(16);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(t){var e=t.links.related,n=t.id,r=t.attributes;return{url:e,attachmentId:n,contentLength:r.contentLength,contentType:r.contentType,name:r.name}},s=function(t,e,n){var i,a,s,l,d,f,v,b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pubnub",g=null==n?void 0:n.find((function(t){return"user"===t.type})),h=null==g?void 0:g.attributes;if(h){var p=null==g?void 0:g.id;Object(r.d)(p,h)}else{var m,y,O;h=Object(r.i)(null==t||null===(m=t.relationships)||void 0===m||null===(y=m.sentBy)||void 0===y||null===(O=y.data)||void 0===O?void 0:O.id)}var w,j=null==n?void 0:n.find((function(t){return"template"===t.type})),_=null==n||null===(i=n.filter((function(t){return"article"===t.type})))||void 0===i?void 0:i.map(o.a),I=t.id,P=t.attributes,k=t.relationships;null!=e&&e.length&&(w=e.map((function(t){return c(t)})));var M=P.appGenerated,S=P.auto,A=P.body,C=P.bodyOverride,E=P.createdAt,D=P.direction,T=P.directionType,L=P.titleOverride,$=k.session.data.id,N=null===(a=k.sentBy)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.type,F=null===(l=k.sentBy)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.id,x=null===(f=h)||void 0===f?void 0:f.displayName,B=null===(v=h)||void 0===v?void 0:v.avatarUrl,U=j&&u(u({},null==j?void 0:j.attributes),{},{id:null==j?void 0:j.id});return{appGenerated:M,messageId:I,body:A,createdAt:E,direction:D,directionType:T,conversationId:$,attachments:w,meta:{template:U,articles:_},notificationOverrides:{bodyOverride:C,titleOverride:L},sentBy:{type:S?"user":N,id:F,displayName:x,avatarUrl:B},source:b}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return u}));var r=n(6),o=function(t){if(null==t||!t.assistant)return new Error("Missing one or more of the required properties: assistant")},i=function(t){var e=t.lang,n=Object(r.b)(e),o="/c/v1/chat/assistant/init";return n&&(o="".concat(o,"?lang=").concat(n)),o},u=new Map},function(t,e,n){"use strict";(function(t){var r=n(17),o=n(18),i=setTimeout,u=void 0!==t?t:null;function a(t){return Boolean(t&&void 0!==t.length)}function c(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void f(e.promise,t)}d(e.promise,r)}else(1===t._state?d:f)(e.promise,t._value)}))):t._deferreds.push(e)}function d(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof s)return t._state=3,t._value=e,void v(t);if("function"==typeof n)return void g((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,v(t)}catch(e){f(t,e)}var r,o}function f(t,e){t._state=2,t._value=e,v(t)}function v(t){2===t._state&&0===t._deferreds.length&&s._immediateFn((function(){t._handled||s._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)l(t,t._deferreds[e]);t._deferreds=null}function b(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function g(t,e){var n=!1;try{t((function(t){n||(n=!0,d(e,t))}),(function(t){n||(n=!0,f(e,t))}))}catch(t){if(n)return;n=!0,f(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var n=new this.constructor(c);return l(this,new b(t,e,n)),n},s.prototype.finally=r.a,s.all=function(t){return new s((function(e,n){if(!a(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(e){i(t,e)}),n)}r[t]=u,0==--o&&e(r)}catch(t){n(t)}}for(var u=0;u<r.length;u++)i(u,r[u])}))},s.allSettled=o.a,s.resolve=function(t){return t&&"object"==typeof t&&t.constructor===s?t:new s((function(e){e(t)}))},s.reject=function(t){return new s((function(e,n){n(t)}))},s.race=function(t){return new s((function(e,n){if(!a(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=t.length;r<o;r++)s.resolve(t[r]).then(e,n)}))},s._immediateFn="function"==typeof u&&function(t){u(t)}||function(t){i(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=s}).call(this,n(37).setImmediate)},,function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f}));var r=n(7),o=n(3),i=n(31),u=function(t){var e,n=["emails","phones","socials"];return Object.entries(t).every((function(t){var r,o,i=t[0],u=t[1];return n.includes(i)?!("socials"===i&&(o=["twitter","instagram","facebook","linkedin"],u.every((function(t){return t.type&&t.username?!!o.includes(t.type)||(r=new Error("".concat(t.type," is not a valid social type. Socials must be one of: twitter, instagram, linkedin, facebook")),!1):(r=new Error("Social is missing one or more of the required properties: username, type"),!1)})),e=r)):(e=new Error("".concat(i," is not a valid attribute. Attributes must contain at least one of: emails, phones, socials")),!1)})),e};function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t){var e=t.attributes,n=t.custom,o=function(t){var e=null==t?void 0:t.attributes,n=null==t?void 0:t.custom;return e||n?e?u(e):void 0:new Error("Missing one or more of the required properties: attributes, customAttributes")}(t);return o?Promise.reject(o):Object(r.b)("/c/v1/customers/current",{body:JSON.stringify(c(c({},e),{},{custom:n}))})},d=function(){return Object(r.a)("/c/v1/chat/customers/current").then((function(t){return Object(o.m)("customerContext",function(t){var e,n,r,o,i,u,a=(null==t||null===(e=t.data)||void 0===e?void 0:e.attributes)||{},c=a.activityAt,s=a.createdAt,l=a.lastMessageAt,d=a.lastMessageSentAt,f=a.lastOutboundMsgSentAt,v=a.lastSeenAt,b=a.signedUpAt,g=a.lastMessageUnrespondedTo,h=a.avgSatisfactionRating,p=a.avgSatisfactionScore,m=a.name,y=a.email,O=a.phone,w=a.sentiment,j=a.company,_=a.custom,I=(null==t||null===(n=t.data)||void 0===n||null===(r=n.attributes)||void 0===r?void 0:r.conversationCount)||{};return{activityAt:c,createdAt:s,lastMessageAt:l,lastMessageSentAt:d,lastMessageOutSentAt:f,lastSeenAt:v,signedUpAt:b,lastMessageUnrespondedToSentAt:g,satisfactionLevel:{avgRating:h,avgScore:p},conversationCounts:{all:I.all,done:I.done,open:I.open,snoozed:I.snoozed},name:m,email:y,phone:O,sentiment:w,company:j,createdBy:((null==t||null===(o=t.data)||void 0===o||null===(i=o.relationships)||void 0===i||null===(u=i.createdBy)||void 0===u?void 0:u.data)||{}).id,custom:_}}(t)),t}))},f=function(t){return Object(r.a)(i.b).then((function(e){var n=e.data.attributes,r={total:n.totalUnreadCount,conversations:c({},n.sessionsWithUnreads)};return Object(o.c)(r),"function"==typeof t&&t(),r}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="/p/v1/schedules/:scheduleId?include=holidays"},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r,o=null==="https://api.kustomerapp.com"?void 0:"https://api.kustomerapp.com".replace("".concat("https","://"),""),i=function(t){try{if(!t)throw new Error;var e=t.split("."),n=JSON.parse(atob(e[1]));if(!n.orgName)throw new Error;return n.orgName}catch(t){return void console.error("You've provided an invalid Kustomer api key.")}}(null===(r=window.parent.KustomerCore)||void 0===r?void 0:r.a),u=function(){return{protocol:"https",orgName:i,baseUrlDomain:o}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r="/c/v2/chat/sessions",o="/c/v2/chat/session-stats"},,function(t,e,n){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",o="minute",i="hour",u="day",a="week",c="month",s="quarter",l="year",d="date",f="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},p={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+h(r,2,"0")+":"+h(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,c),i=n-o<0,u=e.clone().add(r+(i?-1:1),c);return+(-(r+(n-o)/(i?o-u:u-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:l,w:a,d:u,D:d,h:i,m:o,s:r,ms:n,Q:s}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",y={};y[m]=g;var O=function(t){return t instanceof I},w=function(t,e,n){var r;if(!t)return m;if("string"==typeof t)y[t]&&(r=t),e&&(y[t]=e,r=t);else{var o=t.name;y[o]=t,r=o}return!n&&r&&(m=r),r||!n&&m},j=function(t,e){if(O(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new I(n)},_=p;_.l=w,_.i=O,_.w=function(t,e){return j(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var I=function(){function g(t){this.$L=w(t.locale,null,!0),this.parse(t)}var h=g.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(v);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return _},h.isValid=function(){return!(this.$d.toString()===f)},h.isSame=function(t,e){var n=j(t);return this.startOf(e)<=n&&n<=this.endOf(e)},h.isAfter=function(t,e){return j(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<j(t)},h.$g=function(t,e,n){return _.u(t)?this[e]:this.set(n,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,e){var n=this,s=!!_.u(e)||e,f=_.p(t),v=function(t,e){var r=_.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return s?r:r.endOf(u)},b=function(t,e){return _.w(n.toDate()[t].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,h=this.$M,p=this.$D,m="set"+(this.$u?"UTC":"");switch(f){case l:return s?v(1,0):v(31,11);case c:return s?v(1,h):v(0,h+1);case a:var y=this.$locale().weekStart||0,O=(g<y?g+7:g)-y;return v(s?p-O:p+(6-O),h);case u:case d:return b(m+"Hours",0);case i:return b(m+"Minutes",1);case o:return b(m+"Seconds",2);case r:return b(m+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(t,e){var a,s=_.p(t),f="set"+(this.$u?"UTC":""),v=(a={},a[u]=f+"Date",a[d]=f+"Date",a[c]=f+"Month",a[l]=f+"FullYear",a[i]=f+"Hours",a[o]=f+"Minutes",a[r]=f+"Seconds",a[n]=f+"Milliseconds",a)[s],b=s===u?this.$D+(e-this.$W):e;if(s===c||s===l){var g=this.clone().set(d,1);g.$d[v](b),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else v&&this.$d[v](b);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[_.p(t)]()},h.add=function(n,s){var d,f=this;n=Number(n);var v=_.p(s),b=function(t){var e=j(f);return _.w(e.date(e.date()+Math.round(t*n)),f)};if(v===c)return this.set(c,this.$M+n);if(v===l)return this.set(l,this.$y+n);if(v===u)return b(1);if(v===a)return b(7);var g=(d={},d[o]=t,d[i]=e,d[r]=1e3,d)[v]||1,h=this.$d.getTime()+n*g;return _.w(h,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=_.z(this),i=this.$H,u=this.$m,a=this.$M,c=n.weekdays,s=n.months,l=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].substr(0,i)},d=function(t){return _.s(i%12||12,t,"0")},v=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:_.s(a+1,2,"0"),MMM:l(n.monthsShort,a,s,3),MMMM:l(s,a),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:_.s(i,2,"0"),h:d(1),hh:d(2),a:v(i,u,!0),A:v(i,u,!1),m:String(u),mm:_.s(u,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:o};return r.replace(b,(function(t,e){return e||g[t]||o.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(n,d,f){var v,b=_.p(d),g=j(n),h=(g.utcOffset()-this.utcOffset())*t,p=this-g,m=_.m(this,g);return m=(v={},v[l]=m/12,v[c]=m,v[s]=m/3,v[a]=(p-h)/6048e5,v[u]=(p-h)/864e5,v[i]=p/e,v[o]=p/t,v[r]=p/1e3,v)[b]||p,f?m:_.a(m)},h.daysInMonth=function(){return this.endOf(c).$D},h.$locale=function(){return y[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},h.clone=function(){return _.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},g}(),P=I.prototype;return j.prototype=P,[["$ms",n],["$s",r],["$m",o],["$H",i],["$W",u],["$M",c],["$y",l],["$D",d]].forEach((function(t){P[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),j.extend=function(t,e){return t.$i||(t(e,I,j),t.$i=!0),j},j.locale=w,j.isDayjs=O,j.unix=function(t){return j(1e3*t)},j.en=y[m],j.Ls=y,j.p={},j}()},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var c,s=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):d=-1,s.length&&v())}function v(){if(!l){var t=a(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++d<e;)c&&c[d].run();d=-1,e=s.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function b(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new b(t,e)),1!==s.length||l||a(v)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i}));var r=function(t,e){return"ext-convo-group-".concat(e,".cust-").concat(t)},o=function(t,e){return"ext-meta-cust-".concat(e,".cust-").concat(t)},i=function(t,e){return"shrd-cust-".concat(e,".cust-").concat(t)}},function(t,e,n){"use strict";n.r(e),function(t){var e=n(26),r=n(17),o=n(18),i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();"function"!=typeof i.Promise?i.Promise=e.a:(i.Promise.prototype.finally||(i.Promise.prototype.finally=r.a),i.Promise.allSettled||(i.Promise.allSettled=o.a))}.call(this,n(15))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(38),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(15))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,u,a,c=1,s={},l=!1,d=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){b(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){b(t.data)},r=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(t){var e=d.createElement("script");e.onreadystatechange=function(){b(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(b,0,t)}:(u="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(u)&&b(+e.data.slice(u.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(u+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return s[c]=o,r(c),c++},f.clearImmediate=v}function v(t){delete s[t]}function b(t){if(l)setTimeout(b,0,t);else{var e=s[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{v(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(15),n(34))},function(t,e){!function(){if("undefined"!=typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var e=function(t,e){var n,r;return(e=e||{}).bubbles=!!e.bubbles,e.cancelable=!!e.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},n};e.prototype=window.Event.prototype,window.CustomEvent=e}}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return a}));var r=n(8),o=n(9),i=n(3),u=function(t){if(!t)return new Error("A conversationId must be provided.")},a=function(t){var e=Object(i.h)(),n={total:e.total,change:{conversationId:t,count:e.conversations[t]}};Object(o.a)(r.n,n)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){var e=t.id,n=t.attributes;return{conversationId:e,createdAt:n.createdAt,ended:!!n.lockedAt}}},,,,,function(t,e,n){(function(e){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,a=/^\[object .+?Constructor\]$/,c="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,l=c||s||Function("return this")();var d,f=Array.prototype,v=Function.prototype,b=Object.prototype,g=l["__core-js_shared__"],h=(d=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",p=v.toString,m=b.hasOwnProperty,y=b.toString,O=RegExp("^"+p.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=l.Symbol,j=f.splice,_=L(l,"Map"),I=L(Object,"create"),P=w?w.prototype:void 0,k=P?P.toString:void 0;function M(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function S(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function A(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function C(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function E(t,e){for(var o,i=0,u=(e=function(t,e){if(x(t))return!1;var o=typeof t;if("number"==o||"symbol"==o||"boolean"==o||null==t||U(t))return!0;return r.test(t)||!n.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:x(o=e)?o:$(o)).length;null!=t&&i<u;)t=t[N(e[i++])];return i&&i==u?t:void 0}function D(t){return!(!B(t)||(e=t,h&&h in e))&&(function(t){var e=B(t)?y.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?O:a).test(function(t){if(null!=t){try{return p.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function T(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function L(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return D(n)?n:void 0}M.prototype.clear=function(){this.__data__=I?I(null):{}},M.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},M.prototype.get=function(t){var e=this.__data__;if(I){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return m.call(e,t)?e[t]:void 0},M.prototype.has=function(t){var e=this.__data__;return I?void 0!==e[t]:m.call(e,t)},M.prototype.set=function(t,e){return this.__data__[t]=I&&void 0===e?"__lodash_hash_undefined__":e,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(t){var e=this.__data__,n=C(e,t);return!(n<0)&&(n==e.length-1?e.pop():j.call(e,n,1),!0)},S.prototype.get=function(t){var e=this.__data__,n=C(e,t);return n<0?void 0:e[n][1]},S.prototype.has=function(t){return C(this.__data__,t)>-1},S.prototype.set=function(t,e){var n=this.__data__,r=C(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},A.prototype.clear=function(){this.__data__={hash:new M,map:new(_||S),string:new M}},A.prototype.delete=function(t){return T(this,t).delete(t)},A.prototype.get=function(t){return T(this,t).get(t)},A.prototype.has=function(t){return T(this,t).has(t)},A.prototype.set=function(t,e){return T(this,t).set(t,e),this};var $=F((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(U(t))return k?k.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return o.test(t)&&n.push(""),t.replace(i,(function(t,e,r,o){n.push(r?o.replace(u,"$1"):e||t)})),n}));function N(t){if("string"==typeof t||U(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function F(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(F.Cache||A),n}F.Cache=A;var x=Array.isArray;function B(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function U(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==y.call(t)}t.exports=function(t,e,n){var r=null==t?void 0:E(t,e);return void 0===r?n:r}}).call(this,n(15))},,,function(t,e,n){n(36),n(39),t.exports=n(98)},,function(t,e,n){"use strict";n.r(e);var r=n(11),o=n(7),i=n(3),u=n(6),a=function(t){return Object(o.a)(function(t){var e=null==t?void 0:t.brandId,n=null==t?void 0:t.lang,r="/p/v2/chat/settings";e&&(r="/p/v2/chat/brands/".concat(e,"/settings"));var o=Object(u.b)(n);return n&&(r="".concat(r,"?lang=").concat(o)),r}({brandId:t.brandId,lang:t.lang})).then((function(e){var n,r,o,u,a,c,s,l,d,f,v=e.data.attributes,b=v.assistantRules,g=v.closableChat,h=v.colors,p=v.disableAttachments,m=v.domainCriteria,y=v.embedIconColor,O=v.embedIconUrl,w=v.enabled,j=v.greeting,_=v.noHistory,I=v.offhoursDisplay,P=v.offhoursImageUrl,k=v.offhoursMessage,M=v.outboundChatEnabled,S=v.sentry,A=v.sharedPubNubKeySet,C=v.showBrandingIdentifier,E=v.showTypingIndicatorCustomerWeb,D=v.showTypingIndicatorWeb,T=v.singleSessionChat,L=v.teamIconUrl,$=v.teamName,N=v.volumeControl,F=v.waitMessage,x=v.widgetType,B=e.data.relationships.org.data.id,U=null==e||null===(n=e.data)||void 0===n||null===(r=n.relationships)||void 0===r||null===(o=r.brand)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.id,z=null==e||null===(a=e.data)||void 0===a||null===(c=a.relationships)||void 0===c||null===(s=c.kb)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.id,R=(null==t?void 0:t.assistantId)||(null==e||null===(d=e.data)||void 0===d||null===(f=d.attributes)||void 0===f?void 0:f.activeAssistant);return Object(i.m)("settings",{activeAssistant:R,assistantRules:b,brandId:U,closableChat:g,colors:h,disableAttachments:p,domainCriteria:m,embedIconColor:y,embedIconUrl:O,enabled:w,greeting:j,knowledgeBaseId:z,noHistory:_,offhoursDisplay:I,offhoursImageUrl:P,offhoursMessage:k,outboundChatEnabled:M,sentry:S,sharedPubNubKeySet:A,showBrandingIdentifier:C,showTypingIndicatorCustomerWeb:E,showTypingIndicatorWeb:D,singleSessionChat:T,teamIconUrl:L,teamName:$,volumeControl:N,waitMessage:F,widgetType:x}),Object(i.m)("orgId",B),e}))},c=n(19),s=n(29),l=function(t){var e,n,r=t||(null===(e=Object(i.g)())||void 0===e||null===(n=e.schedule)||void 0===n?void 0:n.id);return Object(o.a)(function(t){var e=s.a;return e=e.replace(":scheduleId",t||"default")}(r)).then((function(t){var e=t.included,n=t.data,r=n.id,o=n.attributes,u=o.hours,a=o.name,c=o.timezone,s=o.timezoneOffset;return Object(i.m)("schedule",{id:r,hours:u,name:a,timezone:c,timezoneOffset:s,holidays:e}),t}))},d=n(10),f=function(t){return Promise.all([n.e(112),n.e(107)]).then(n.bind(null,420)).then((function(e){if(!t)return e;var n=t.customerId,r=t.orgId,o=t.cb;return Object(i.g)().isPubNubConnected?e:e.initializePubNub({customerId:n,orgId:r,cb:o}).then((function(){return e}))}))},v=n(22),b=function(){var t=Object(i.g)().settings,e=t.embedIconUrl,n=t.embedIconColor,r=t.teamIconUrl,o=t.teamName,u=t.waitMessage,a=t.greeting,c=t.singleSessionChat,s=t.noHistory,l=t.disableAttachments,d=t.offhoursImageUrl,f=t.offhoursMessage,v=t.closableChat,b=t.widgetType,g=t.activeAssistant,h=t.volumeControl,p=t.domainCriteria,m=t.colors,y=t.showBrandingIdentifier,O=t.brandId,w=t.knowledgeBaseId,j=t.assistantRules,_=t.sentry;return{settings:{embedIconUrl:e,embedIconColor:n,teamName:o,teamIconUrl:r,waitMessage:h.customWaitMessage||u,greeting:a,singleSessionChat:c,noHistory:s,disableAttachments:l,offhoursImageUrl:d,offhoursMessage:f,closableChat:v,widgetType:b,activeAssistant:g,volumeControl:h,domainCriteria:p,colors:m,showBrandingIdentifier:y,brandId:O,knowledgeBaseId:w,assistantRules:j,sentry:_}}},g=function(t,e){var n=Object(c.a)();return Promise.all([a({brandId:null==t?void 0:t.brandId,lang:null==t?void 0:t.lang,assistantId:null==t?void 0:t.assistantId}),l(null==t?void 0:t.scheduleId)]).then((function(t){var r,o,u,a,c=null===(r=t[0])||void 0===r||null===(o=r.data)||void 0===o||null===(u=o.attributes)||void 0===u||null===(a=u.sentry)||void 0===a?void 0:a.web;if(c&&Object(v.b)(c,Object(i.g)().orgId),!Object(i.g)().settings.enabled){var s="Kustomer Chat is disabled in your org settings. Initialization will not continue.";return console.warn(s),Promise.reject(new Error(s))}if(null!==n)return Object(d.a)().then((function(t){var n,r,o,u,a=null==t||null===(n=t.data)||void 0===n||null===(r=n.relationships)||void 0===r||null===(o=r.customer)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.id;if(Object(i.m)("customerId",a),void 0!==a){var c=Object(i.g)().orgId,s=b();return f({customerId:a,orgId:c,cb:function(){"function"==typeof e&&e(s)}}).then((function(){return s}))}Object(i.m)("isPubNubConnected",!1)}));Object(i.m)("isPubNubConnected",!1)})).then((function(t){if(!t&&"function"==typeof e){var n=b();e(n)}})).catch((function(t){console.error("Failed to initialize",t),"function"==typeof e&&e(null,t)}))},h=n(12),p=n(8),m=n(9),y=n(13),O=function(t,e){var n=t.conversationChannels;return function(t){var r=t.operation,o=t.affectedChannels,i=t.error,u=t.category;r===y.o&&((n.filter((function(t){return null==o?void 0:o.includes(t)})).length===n.length||i)&&e(null,i?u:null))}},w=n(20),j=n(24),_=function(t){if(t)return Object.entries(t).reduce((function(t,e){var n,r=e[0],o=e[1],i={};t&&(i=t);var u=null==o||null===(n=o.match(/(page=)([0-9]+)/g))||void 0===n?void 0:n[0];if("string"==typeof u){var a,c=null===(a=u.split("="))||void 0===a?void 0:a[1];u=Number.parseInt(c,10)}return i?("prev"===r?i.previous=u:"self"===r?i.current=u:i[r]=u,i):t}),{})},I=function(t,e){return Object(d.b)().then((function(){return Object(h.c)(t)})).then((function(t){var n=function(t){return{conversations:t.data.filter((function(t){return!0!==t.attributes.deleted})).map((function(t){var e;return{preview:t.attributes.preview,lastResponder:null===(e=t.attributes.previewDetails)||void 0===e?void 0:e.lastResponder,createdAt:t.attributes.createdAt,lastMessageAt:t.attributes.lastMessageAt,conversationId:t.id,ended:!!t.attributes.lockedAt,isInAssistantMode:t.attributes.isInAssistantMode}})),pages:_(t.links)}}(t);return"function"==typeof e&&e(n),t})).catch((function(t){"function"==typeof e&&e(null,t),console.error("Failed to get conversations for customer:",t)}))},P=n(23);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(t,e){var n={satisfaction:{},messages:[]};return null!=t&&t.length&&(n=t.reduce((function(t,e){var n,r;e.message.name!==y.e&&e.message.name!==y.f||t.messages.push(Object(j.a)(e.message.data,null==e||null===(n=e.attachments)||void 0===n?void 0:n.data,null==e||null===(r=e.message)||void 0===r?void 0:r.included,"pubnub"));if(e.message.name===y.c||e.message.eventType===y.d){var o,i,u=null==e||null===(o=e.message.included)||void 0===o?void 0:o.find((function(t){return"satisfaction"===t.type})),a=e.timetoken;t.satisfaction=Object(P.a)(null==e||null===(i=e.message)||void 0===i?void 0:i.data,a,u)}return t}),n)),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){M(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({conversationId:e},n)};function A(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=function(t){var e=null==t?void 0:t.messages.map((function(t){return new Promise((function(e){var n,r,o;(null==t||null===(n=t.message)||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.relationships)||void 0===o?void 0:o.attachments)?Object(w.d)(t.message.data.id).then((function(n){e(D(D({},t),{},{attachments:n}))})):e(t)}))}));return Promise.all(e).then((function(t){return{messages:t}}))},$=function(t,e){var n,r=null==t?void 0:t.conversationId;return f().then((function(t){return n=t,function(t){var e=Object(i.f)(t);return e?Promise.resolve(e):Object(h.b)(t).then((function(){return Object(i.f)(t)}))}(r)})).then((function(t){var e,r,o,u=null==t||null===(e=t.attributes)||void 0===e||null===(r=e.pubnub)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.channels,a=Object(i.g)(),c=a.settings,s=c.showTypingIndicatorCustomerWeb,l=c.showTypingIndicatorWeb,d=s||l;if(!u)throw new Error("Conversation PubNub channels not found");var f=u.find((function(t){return"conversation"===t.type}));if(a.isPubNubConnected&&f){var v,b=u.find((function(t){return"conversation"===t.type}));if(d&&b){var g,h,m=b.name.replace("ext-convo-","shrd-convo-");if(m.length)null===(g=n.getMetaPubNub())||void 0===g||null===(h=g.instance)||void 0===h||h.subscribe({channels:[m]})}return function(t,e){return new Promise((function(n){!function r(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.fetchMessages({channels:[t],start:o,count:p.b}).then((function(e){var o,u=(null==e||null===(o=e.channels)||void 0===o?void 0:o[t])||[],a=[].concat(A(i),A(u));if(null==u||!u.length||u.length<p.b)return n({messages:a});var c=u[0].timetoken;return r(c,a)})).catch((function(){console.error("Failed to get messages")}))}(0)}))}(f.name,null===(v=n.getConversationPubNub())||void 0===v?void 0:v.instance)}})).then(L).then((function(t){var n=S(null==t?void 0:t.messages,r);"function"==typeof e&&e(n)})).catch((function(t){"function"==typeof e&&e(null,t),console.error("Failed to get messages",t)}))};function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B=function(t,e){var n={satisfaction:{},messages:[]};return null!=t&&t.length&&(n=t.reduce((function(t,e){var n;"chat_message"===e.message.type&&t.messages.push(Object(j.a)(e.message,null==e||null===(n=e.attachments)||void 0===n?void 0:n.data,function(t){var e,n,r,o,i,u,a,c,s=[];null!==(e=t.attributes)&&void 0!==e&&null!==(n=e.meta)&&void 0!==n&&n.template&&s.push({attributes:null===(a=t.attributes)||void 0===a||null===(c=a.meta)||void 0===c?void 0:c.template,type:"template"});return null===(r=t.attributes)||void 0===r||null===(o=r.meta)||void 0===o||null===(i=o.template)||void 0===i||null===(u=i.articles)||void 0===u||u.forEach((function(t){return s.push(F(F({},t),{},{type:"article"}))})),s}(e.message),"historical"));return t}),n)),F({conversationId:e},n)},U=function(t){var e,n=null==t||null===(e=t.data)||void 0===e?void 0:e.map((function(t){return new Promise((function(e){var n;(null==t||null===(n=t.relationships)||void 0===n?void 0:n.attachments)?Object(w.d)(t.id).then((function(n){e({message:t,attachments:n})})):e({message:t})}))}));return Promise.all(n).then((function(t){return{messages:t}}))},z=n(14),R=n(33),q=n.n(R),J=n(93),H=n.n(J);function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var K={s:"second",h:"hour",d:"day",w:"week",m:"minute",M:"month"};function Y(t,e){var n=t.replace(/_/g,".");return H()(e,n)}function G(t){return null!=t&&("string"==typeof t?""!==t.trim():!Array.isArray(t)||0!==t.length)}function V(t,e){var n;if(Array.isArray(t)&&!Array.isArray(e))return t.includes(e);try{switch(W(t)){case"string":n=String(e);break;case"number":n=Number(e);break;case"boolean":n="boolean"==typeof e?e:"true"===e;break;default:n=e}}catch(t){n=e}return t==n}function Z(t,e){if(Object(z.d)(t)&&Object(z.d)(e)){var n=(t||"").toLocaleLowerCase(),r=(e||"").toLocaleLowerCase();return n.includes(r)}return!!(t||[]).filter((function(t){return(t||"").toLocaleLowerCase().includes((e||"").toLocaleLowerCase())})).length}function Q(t,e){return Object(z.d)(t)&&Array.isArray(e)?!!e.filter((function(e){return(t||"").toLocaleLowerCase().includes((e||"").toLocaleLowerCase())})).length:!(!Array.isArray(t)||!Array.isArray(e))&&e.some((function(e){return t.some((function(t){var n=Object(z.d)(t)?t.toLocaleLowerCase():t,r=Object(z.d)(e)?e.toLocaleLowerCase():e;return n.includes(r)}))}))}function X(t,e){return Array.isArray(t)&&Array.isArray(e)?!!Object(z.c)(t,e).length:(e||[]).includes(t)}function tt(t){return Object(z.d)(t)&&q()(t).isValid()}function(){}