(self.wsp=self.wsp||[]).push([["platform"],{60465:function(e,t){"use strict";if("function"==typeof Symbol&&Symbol.for){var r=Symbol.for;r("react.element"),r("react.portal"),r("react.fragment"),r("react.strict_mode"),r("react.profiler"),r("react.provider"),r("react.context"),r("react.forward_ref"),r("react.suspense"),r("react.suspense_list"),r("react.memo"),r("react.lazy"),r("react.block"),r("react.server.block"),r("react.fundamental"),r("react.debug_trace_mode"),r("react.legacy_hidden")}},42744:function(e,t,r){"use strict";r(60465)},32109:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===s)if(r.toString===Object.prototype.toString)for(var a in r)n.call(r,a)&&r[a]&&e.push(a);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},44317:function(e,t,r){"use strict";var n=r(1238),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return n.isMemo(e)?i:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var o=h(r);o&&o!==f&&e(t,o,n)}var i=l(r);d&&(i=i.concat(d(r)));for(var a=c(t),g=c(r),m=0;m<i.length;++m){var v=i[m];if(!(s[v]||n&&n[v]||g&&g[v]||a&&a[v])){var y=p(r,v);try{u(t,v,y)}catch(e){}}}}return t}},93816:function(e){"use strict";e.exports=function(e,t,r,n,o,s,i,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,s,i,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},38418:function(e){e.exports={}},34238:function(e){e.exports={block:"a3AlgM",hasHeightAnimation:"b3AlgM",expanded:"c3AlgM",content:"d3AlgM",hasOpacityAnimation:"e3AlgM"}},21040:function(e){e.exports={flex:"a33ikM",hidden:"b33ikM"}},77296:function(e,t,r){"use strict";t.__esModule=!0;var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=r(44121),i=(n=s)&&n.__esModule?n:{default:n};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){return console.error("asyncComponent: Loading failed",e)},d=function(e){return"[object Function]"===Object.prototype.toString.call(e)},p=function(e){return!!e&&("object"===(void 0===e?"undefined":o(e))||"function"==typeof e)&&"function"==typeof e.then};t.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.placeholder,n=function(t){function n(){a(this,n);var e=c(this,t.call(this));return e.state={component:null},e.mounting=!0,e}return u(n,t),n.prototype.componentDidMount=function(){var t=this;if(!d(e))return console.error("asyncComponent: Loader is not function");var r=e();if(!p(r))return console.error("asyncComponent: Loader doesn't return a promise");r.then((function(e){return t.mounting&&t.setState({component:e.default||e})})).catch(l)},n.prototype.componentWillUnmount=function(){this.mounting=!1},n.prototype.render=function(){return this.state.component?i.default.createElement(this.state.component,this.props):r||null},n}(s.Component);return n}},72567:function(e,t,r){"use strict";t.B=void 0;var n,o=(n=r(77296))&&n.__esModule?n:{default:n};t.B=o.default},27595:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case d:case s:case a:case i:case h:return e;default:switch(e=e&&e.$$typeof){case u:case p:case m:case g:case c:return e;default:return t}}case o:return t}}}function E(e){return S(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=n,t.ForwardRef=p,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return E(e)||S(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return S(e)===u},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return S(e)===p},t.isFragment=function(e){return S(e)===s},t.isLazy=function(e){return S(e)===m},t.isMemo=function(e){return S(e)===g},t.isPortal=function(e){return S(e)===o},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===i},t.isSuspense=function(e){return S(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===i||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},t.typeOf=S},1238:function(e,t,r){"use strict";e.exports=r(27595)},73951:function(e,t,r){"use strict";r.r(t),r.d(t,{assoc:function(){return d},deepMerge:function(){return S},dissoc:function(){return g},get:function(){return c},merge:function(){return b},update:function(){return y}});var n=Array.prototype.slice;function o(e){return"object"==typeof e}function s(e){if(Array.isArray(e))return e.slice();var t={};for(var r in e)t[r]=e[r];return t}function i(e,t,r){return o(e)&&null!==e&&t in e?e[t]:r}function a(e,t,r){var n=t[0],o=t.slice(1);return i(e,n)&&o.length?a(e[n],o,r):i(e,n,r)}function c(e,t,r){return Array.isArray(t)?a(e,t,r):i(e,t,r)}function u(e,t,r){if(e[t]===r)return e;var n=s(e);return n[t]=r,n}function l(e,t,r){if(a(e,t)===r)return e;var n=t[0],o=t.slice(1),i=s(e);return o.length?i[n]=l(n in i?i[n]:{},o,r):i[n]=r,i}function d(e){for(var t,r,n=arguments,o=arguments.length,s=e,i=1;i<o;i+=2)t=n[i],r=n[i+1],s=Array.isArray(t)?l(s,t,r):u(s,t,r);return s}function p(e,t){if(!(t in e))return e;var r=s(e);return delete r[t],r}function h(e,t){var r=t[0],n=t.slice(1);return n.length?r in e&&h(e[r],n):r in e}function f(e,t){if(!h(e,t))return e;var r=t[0],n=t.slice(1),o=s(e);return 0!==n.length?(o[r]=f(e[r],n),0===Object.keys(o[r]).length&&delete o[r]):delete o[r],o}function g(e){for(var t,r=arguments,n=arguments.length,o=0,s=e;++o<n;)t=r[o],s=Array.isArray(t)?f(s,t):p(s,t);return s}function m(e,t,r){var o=i(e,t);return u(e,t,r.apply(o,[o].concat(n.call(arguments,3))))}function v(e,t,r){var o=a(e,t);return l(e,t,r.apply(o,[o].concat(n.call(arguments,3))))}function y(e,t){return Array.isArray(t)?v.apply(this,arguments):m.apply(this,arguments)}function b(){for(var e,t=arguments,r=arguments.length,n=0,o=arguments[0];++n<r;)for(var s in e=t[n])o=u(o,s,e[s]);return o}function _(e,t){for(var r,n,i=Object.keys(t),a=i.length,c=-1,l=e;++c<a;)l=o(r=t[n=i[c]])&&null!==r?u(l,n,n in l?_(l[n],r):s(r)):u(l,n,r);return l}function S(){for(var e=arguments,t=arguments.length,r=0,n=arguments[0];++r<t;)n=_(n,e[r]);return n}},52025:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},75697:function(e,t,r){var n=r(90010);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},28817:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},53009:function(e,t,r){var n=r(94851).default;function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=i?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(s,a,c):s[a]=e[a]}return s.default=e,r&&r.set(e,s),s},e.exports.__esModule=!0,e.exports.default=e.exports},90010:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},94851:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},71885:function(e,t,r){"use strict";var n=r(53009).default,o=r(28817).default;t.__esModule=!0,t.default=void 0;var s,i,a,c=o(r(75697)),u=o(r(52025)),l=n(r(44121)),d=o(r(94083)),p=o(r(21318)),h=o(r(51472)),f=(s={},i=[],a={isPhone:window.matchMedia("(max-width: "+d.default.PHONE+"px)"),isTablet:window.matchMedia("(min-width: "+d.default.TABLETS+"px)"),isDesktop:window.matchMedia("(min-width: "+d.default.DESKTOP+"px)"),isDesktopS:window.matchMedia("(min-width: "+d.default.DESKTOP_SMALL+"px)"),isDesktopM:window.matchMedia("(min-width: "+d.default.DESKTOP_MEDIUM+"px)"),isDesktopL:window.matchMedia("(min-width: "+d.default.DESKTOP_LARGE+"px)"),isDesktopXL:window.matchMedia("(min-width: "+d.default.DESKTOP_EXTRA_LARGE+"px)"),isRetina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)")},Object.keys(a).forEach((function(e){s[e]=a[e].matches,a[e].addListener((function(t){return function(e,t){var r;s=(0,u.default)({},s,((r={})[e]=t,r)),function(){for(var e=0;e<i.length;e++)(0,i[e])()}()}(e,t.matches)}))})),{getState:function(){return s},getDeviceType:p.default,subscribe:function(e){return i.push(e),function(){var t=i.indexOf(e);i.splice(t,1)}}});t.default=function(e){return void 0===e&&(e={}),function(e){var t=e.displayName||e.name,r=function(t){function r(e){var r;return(r=t.call(this,e)||this).updateMedia=function(){r.setState({media:f&&f.getState()})},r.state={media:{},deviceType:(0,p.default)()},r.isTouch=!1,r.subscribe=function(){},r}(0,c.default)(r,t);var n=r.prototype;return n.componentDidMount=function(){this.isTouch=h.default,this.subscribe=f&&f.subscribe(this.updateMedia),this.updateMedia()},n.componentWillUnmount=function(){this.subscribe()},n.render=function(){return l.default.createElement(e,Object.assign({},this.props,{media:this.state.media,deviceType:this.state.deviceType,isTouch:this.isTouch}))},r}(l.Component);return r.displayName="MediaInfo("+t+")",r.defaultProps=e.defaultProps,r}}},52011:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlocksTrackingEvents=t.sendEvent=t.techSendEvent=t.makeEvent=void 0;const n=r(65058).__importDefault(r(56393)),o=r(79746),s=n.default("analytics:tracking");function i(e,t){let r;try{r=new CustomEvent(e,{detail:t,bubbles:!0})}catch(n){r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!1,t)}return r}function a(e,t,r=document.body){let n=r;return o.isConnected(r)||(t.originalTarget=r,n=document.body),null!==n&&(n.dispatchEvent(i(e,t)),!0)}function c(e,t,r=document.body){a(e,t,r)&&s.info("Dispatched event:",e,t)}t.makeEvent=i,t.techSendEvent=a,t.sendEvent=c,t.BlocksTrackingEvents=class{constructor(e,t,r){this._eventea=e,this._tree=t,this._trackingOptions=r}trackBlock(e,t,r){const n=this._tree.traverseBlockTarget(e);if(n){const{guid:o,payload:s}=n;if(!this._tree.isActiveTracking(o))return;const i=Object.assign({},r,s);this.sendEvent(t,i,e)}}sendEvent(e,t,r){this._eventea&&!this._trackingOptions.disableEventea?this._eventea.send({project:"boxy",event:e,payload:t}):c(e,t,r)}}},20175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058),o=n.__importStar(r(44121)),s=n.__importDefault(r(85045)),i=["flags"];t.default=function(e){return t=>{const r=o.useMemo((()=>{var e,r;const n=new s.default({options:null===(e=t.dival)||void 0===e?void 0:e.trackingOptions,eventea:null===(r=t.dival)||void 0===r?void 0:r.eventea});return n.setTree(t.tree),n}),[]);o.useEffect((()=>(r.mount(),r.unmount)),[]);const n=Object.assign({},t.dival,{blocksTrackingFeatures:i});return o.default.createElement(e,Object.assign({},t,{dival:n,saveDomRef:(e,n)=>(t.saveDomRef&&t.saveDomRef(e,n),r.registerElement(e,n))}))}}},46348:function(e,t,r){"use strict";const n=r(65058),o=n.__importDefault(r(99639)),s=n.__importDefault(r(20175));t.Z=s.default(o.default)},76062:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIST_SCHEMA_KEYS=void 0,t.LIST_SCHEMA_KEYS=["slideList","slides","panels","panelList","banners"];class r{constructor(e=[],t){this.segments=e,this.noImpressions=(null==t?void 0:t.noImpressions)||!1,this.hasListKey=(null==t?void 0:t.hasListKey)||!1}get length(){return this.segments.length}get(e){return this.segments[e]}getAsNumber(e){const t=this.segments[e],r=parseInt(t);if(isFinite(r))return r}asNumber(){if(1===this.length)return this.getAsNumber(0)}getListKey(){if(this.hasListKey)return this.segments[0]}toString(){return this.segments.join(".")}concat(e){const t=[...this.segments,...e.segments],n=this.length?this.hasListKey:e.hasListKey;return new r(t,{noImpressions:this.noImpressions||e.noImpressions,hasListKey:n})}static parseString(e=""){const[n,...o]=e.split("|"),s=n.split(".").filter((e=>e.length)),i={noImpressions:!1,hasListKey:s.reduce(((e,r)=>e||-1!==t.LIST_SCHEMA_KEYS.indexOf(r)),!1)};return o.forEach((e=>{var t,n;return null===(n=(t=r.flagHandlersMap)[e])||void 0===n?void 0:n.call(t,{segments:s,options:i})})),new r(s,i)}}t.default=r,r.flagHandlersMap={noimp:({options:e})=>{e.noImpressions=!0},lst:({options:e})=>{e.hasListKey=!0},nolst:({options:e})=>{e.hasListKey=!1}}},85045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LOCAL_KEYS=t.DEFAULT_IMPRESSION_DELAY=t.DEFAULT_IMPRESSION_BATCH_DELAY=t.CLICK_DEDUP_KEY=void 0;const n=r(65058),o=n.__importDefault(r(56393)),s=n.__importStar(r(76062)),i=r(78923),a=r(52011),c=r(47365),u=r(79746),l=o.default("tcs:blocks-tracking");t.CLICK_DEDUP_KEY="dedup_click",t.DEFAULT_IMPRESSION_BATCH_DELAY=300,t.DEFAULT_IMPRESSION_DELAY=100,t.DEFAULT_LOCAL_KEYS=["itemType","itemName"];const d=Array.prototype.forEach;let p=(e,t={})=>"undefined"!=typeof IntersectionObserver?new IntersectionObserver(e,Object.assign({root:null},t)):(console.warn("IntersectionObserver feature not supported!"),p=()=>null,null);function h(e,t){for(let r=e.parentElement;r;r=r.parentElement)if(r.dataset&&t.some((e=>null==r?void 0:r.dataset[e])))return r}function f(e,t){e.unobserve(t),e.observe(t)}function g(e,t){return Array.prototype.find.call(e,t)}function m(e){if(!u.isConnected(e))return!1;const t=getComputedStyle(e);return"0"!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility}t.default=class{constructor(e={}){this._elemsMutObserver=null,this._elementsMap={},this._recheckQueue=[],this._delayedEvents={},this._trackedAsVisibleMap={},this._elemsSeenTimings={},this.mount=()=>{l.info("mount"),document.addEventListener("mousedown",this.handleMouseDown,!0),document.addEventListener("visibilitychange",this.handlePageVisChange)},this.unmount=()=>{l.info("umount"),this.elemsInObserver&&this.elemsInObserver.disconnect(),document.removeEventListener("visibilitychange",this.handlePageVisChange),document.removeEventListener("mousedown",this.handleMouseDown,!0),Object.keys(this._delayedEvents).forEach((e=>{clearTimeout(this._delayedEvents[e])})),this._delayedEvents={}},this.handleMouseDown=e=>{const r=this._delayedEvents[t.CLICK_DEDUP_KEY];r&&clearTimeout(r),this._delayedEvents[t.CLICK_DEDUP_KEY]=setTimeout((()=>{this._events.trackBlock(function(e){const t=function(e,t){try{return"elementsFromPoint"in document?document.elementsFromPoint(e,t):"msElementsFromPoint"in document?document.msElementsFromPoint(e,t):null}catch(e){return null}}(e.clientX,e.clientY)||[],r=e.target||void 0,n=g(t,(e=>e instanceof HTMLElement&&!!e.dataset.guid));return n&&g(t,(e=>e instanceof HTMLElement&&(!!e.dataset.schemaPath||e===n)||e instanceof Node&&!n.contains(e)))||r}(e)||document.body,"blockClick",{itemType:"block"}),delete this._delayedEvents[t.CLICK_DEDUP_KEY]}))},this.handleElemsIntersection=e=>{document.hidden?e.forEach((e=>{this._recheckQueue.push(e.target)})):e.forEach((e=>{const t=m(e.target),r=this._tree.getTargetDesc(e.target);if(!r)return;const n=r.guid+"/"+r.schemaPath.toString(),o=`seen_${n}`;e.intersectionRatio>=this._trackingOptions.elemsIntersectionThreshold&&t?this.cancelableDelayedAction(o,(()=>{this._trackedAsVisibleMap[n]||(this._trackedAsVisibleMap[n]=!0,this._elemsSeenTimings[n]=Date.now(),this._events.trackBlock(e.target,"blockImpressionIn",{itemType:"block"}))}),this._trackingOptions.elemsImpressionDelay):this.cancelableDelayedAction(o,(()=>{if(this._trackedAsVisibleMap[n]){this._trackedAsVisibleMap[n]=!1;const t=n in this._elemsSeenTimings?Date.now()-this._elemsSeenTimings[n]:0;this._events.trackBlock(e.target,"blockImpressionOut",{itemType:"block",componentTime:t})}}),this._trackingOptions.elemsImpressionDelay)}))},this.handlePageVisChange=()=>{const{elemsInObserver:e}=this;!document.hidden&&this._recheckQueue.length>0&&e&&(this._recheckQueue.forEach((t=>{f(e,t)})),this._recheckQueue=[])},this.handleElemsMutation=e=>{const{elemsInObserver:t}=this;t&&e.forEach((e=>{const r=this._tree.getTargetDesc(e.target);if(!r)return;const n=r.guid+"/"+r.schemaPath.toString();var o;this._trackedAsVisibleMap[n]||(o=e.target,m(o)?Promise.resolve(!0):new Promise((e=>{setTimeout((()=>{e(m(o))}),350)}))).then((r=>{r&&t&&f(t,e.target)}))}))};const{options:r={},eventea:n}=e;this._trackingOptions=Object.assign({elemsIntersectionThreshold:.4,elemsImpressionDelay:t.DEFAULT_IMPRESSION_DELAY,impressionBatchDelay:t.DEFAULT_IMPRESSION_BATCH_DELAY,localKeys:t.DEFAULT_LOCAL_KEYS,disableEventea:!1},r),this._tree=new i.BlocksTree(this._trackingOptions),this._events=new a.BlocksTrackingEvents(n||null,this._tree,this._trackingOptions)}setTree(e){e&&this._tree.setPageMakerTree(e)}get elemsInObserver(){return void 0===this._elemsInObserver&&(this._elemsInObserver=p(this.handleElemsIntersection,{threshold:this._trackingOptions.elemsIntersectionThreshold})),this._elemsInObserver}get elemsMutObserver(){return void 0===this._elemsMutObserver&&(this._elemsMutObserver=new MutationObserver(this.handleElemsMutation)),this._elemsMutObserver}registerElement(e,t){if(null!==t)if(t instanceof HTMLElement){if(t!==this._elementsMap[e]&&this._elementsMap[e]&&this.unregisterElement(e),this.attachInfoDataAttrsToElement(e,t),t.dataset.guid=e,!this._tree.isActiveTracking(e))return;l.info({event:"attach",guid:e}),d.call(t.querySelectorAll("[data-eye-target]"),(e=>{this.observeElem(e)})),this.getListElements(e,t).forEach((e=>{this.observeElem(e)})),this._elementsMap[e]=t}else l.warn(`Couldn't find dom node for ${e}`)}unregisterElement(e){const t=this._elementsMap[e];t instanceof HTMLElement&&(delete t.dataset.guid,delete this._elementsMap[e])}getListElements(e,t){if(!this._tree.hasBlockInfo(e))return[];const r=[t].concat(Array.from(t.querySelectorAll("[data-schema-path]"))).map((e=>({elem:e,schemaPath:s.default.parseString(e.dataset.schemaPath)}))).filter((({schemaPath:e})=>e.hasListKey));if(0===r.length)return[t];const n=r.find((({schemaPath:e})=>1===e.length));if(n){const{elem:e}=n,t=[];return d.call(e.querySelectorAll("[data-schema-path]"),(r=>{if(!(r instanceof HTMLElement))return;const n=s.default.parseString(r.dataset.schemaPath);n.noImpressions||void 0===n.asNumber()||h(r,["schemaPath"])!==e||t.push(r)})),t}return r.reduce(((e,{elem:r,schemaPath:n})=>{if(!n.noImpressions&&h(r,["schemPath","guid"])===t){if(n.length>2||void 0===n.getAsNumber(1))throw new Error(`data-schema-path, содержащие в себе ключи списков (${s.LIST_SCHEMA_KEYS}), могут иметь вид '${n.getListKey()}}' или \`${n.getListKey()}.\${index}\``);e.push(r)}return e}),[])}observeElem(e){var t,r;l.info({event:"attach to elem",element:e}),null===(t=this.elemsInObserver)||void 0===t||t.observe(e),null===(r=this.elemsMutObserver)||void 0===r||r.observe(e,{childList:!1,attributes:!0,subtree:!1})}attachInfoDataAttrsToElement(e,t){try{if(localStorage.getItem("set-page-maker-data-attrs")){const{type:r,version:n,render:o}=this._tree.getBlockInfo(e).block;t.dataset.type=r,t.dataset.schemaVersion=String(n),t.dataset.render=JSON.stringify(o)}}catch(e){}}cancelableDelayedAction(e,t,r){if(0===r)c.requestIdleCallbackWithDuration((()=>t.call(this)));else{const n=this._delayedEvents[e];n?(delete this._delayedEvents[e],clearTimeout(n)):this._delayedEvents[e]=setTimeout((()=>{delete this._delayedEvents[e],c.requestIdleCallbackWithDuration((()=>t.call(this)))}),r)}}}},78923:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlocksTree=void 0;const n=r(65058),o=r(67783),s=n.__importDefault(r(76062)),i={active:!1},a={localKeys:["itemType","itemName"]};function c(e,t,r){const n=Object.keys(t);for(const o of n)r(o,t[o])&&(e[o]=t[o]);return e}t.BlocksTree=class{constructor(e={}){this._traversedTargets=new WeakMap,this._blocksTrackingMeta={},this._blocksTrackingData={},this._opts=Object.assign(a,e)}setPageMakerTree(e){const t={};let r=1,n=1;o.traverseTree(e,((e,o,s)=>{const i=1===s.depth?s.layerPosition+1:r,a=1===s.depth?s.neighborsCount+1:n;1===s.depth&&(r=i,n=a),t[e.id]=Object.assign({},s,{position:i,maxPosition:a,block:e})}),{pattern:"pre-order"}),this._blocksRegistry=t}hasBlockInfo(e){return!!this._blocksRegistry&&e in this._blocksRegistry}getBlockInfo(e){if(this._blocksRegistry)return this._blocksRegistry[e]}doCollect(e,t,r=[]){if(!this._blocksRegistry||!this._blocksRegistry[e])return;const n=t.length,o=this.getBlockPayload(e),s=this._blocksRegistry[e].block.properties||{},i=t.getListKey();let a;if(i)if(a=s[i].filter((e=>!1!==e.active)),a.length>1){const e=s.panelProps||s.slideProps;e&&e.type&&"row"===e.type.substr(0,3)?o.view="row":o.view="slider"}else o.view="default";let u=s;s&&s.analytics&&Object.assign(o,s.analytics);let l,d,p=-1,h=!1,f=!1;for(let e=0;e<t.length;e++){const g=t.get(e);if(h=e==n-1,u=u[g],!u)throw new Error(`Оборвана связь со схемой блока, пропустили data-schema-path ? path=${t}, error-at=${g}`);if(-1!==p){l=d="card";const r=t.getAsNumber(e);i&&!f&&void 0!==r&&(f=!0,o.componentMaxPosition=a.length,o.componentPosition=r+1-s[i].slice(0,r).filter((e=>!1===e.active)).length,u.productName&&(o.componentProductName=u.productName),u.productCategory&&(o.componentProductCategory=u.productCategory))}const m=e=>!!h||-1===this._opts.localKeys.indexOf(e);c(o,r[e],m),u.analytics&&c(o,u.analytics,m),t.getListKey()===g&&(p=e)}if(t.length>0){const e=!i||-1!==p&&n-1-p>=2;if(!o.itemType){const r=e?t.get(n-1):l;r&&(o.itemType=r)}if(!o.itemName){let t;e||o.itemType!==l||(t=d),e&&(t=u.title||u.text),"string"==typeof t&&(o.itemName=t)}}return{guid:e,payload:o}}traverseBlockTarget(e){const t=this.getTargetDesc(e);if(t)return this.doCollect(t.guid,t.schemaPath,t.payloadVector)}getTargetDesc(e){if(e){if(!this._traversedTargets)return this.traverseTargetDesc(e);if(!this._traversedTargets.has(e)){const t=this.traverseTargetDesc(e);this._traversedTargets.set(e,t)}return this._traversedTargets.get(e)}}traverseTargetDesc(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return;const t=[];let r=new s.default,n={};for(let o=e;o;o=o.parentElement){const e=o.dataset;if(e){if(e.schemaPath){r.length&&t.unshift(n),n={};const o=s.default.parseString(e.schemaPath);r=o.concat(r);let i=o.length;for(;i-- >1;)t.unshift({})}if(0!==r.length){if(e.aData)try{Object.assign(n,JSON.parse(e.aData),n)}catch(e){}for(const t of["itemType","itemName"])e[t]&&!n[t]&&(n[t]=e[t])}const o=e.guid;if(o)return r.length&&t.unshift(n),{guid:o,schemaPath:r,payloadVector:t}}}}getTrackingData(e){if(!this._blocksRegistry)throw new Error("blocksRegistry is not ready");if(!this._blocksTrackingMeta[e]){const t=this._blocksRegistry[e];if(!t)return i;const{block:r}=t,n=((r.meta||{}).analytics||{}).tracking||{active:!0};this._blocksTrackingMeta[e]=n}return this._blocksTrackingMeta[e]}getBlockPayload(e){const{_blocksRegistry:t}=this;if(!t)throw new Error("blocksRegistry is not ready");const r=this.getTrackingData(e),n=t[e];if(!n)throw new Error(`No metadata found for block ${e}`);const{block:o,depth:s,position:i,maxPosition:a}=n,c=r.trackingName||`${o.type}_${o.id}`;return Object.assign({},this._blocksTrackingData[e],{type:o.type,name:c,position:i,maxPosition:a,depth:s,componentPosition:1,componentMaxPosition:1})}isActiveTracking(e){return this.getTrackingData(e).active||function(){try{if("true"===localStorage.getItem("page_tracking_force_enabled"))return!0}catch(e){}return!1}()}}},47365:function(e,t){"use strict";function r(e,t){if("function"==typeof window.requestIdleCallback)return window.requestIdleCallback(e,t);const r=Date.now();return window.setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-r))})}),1)}Object.defineProperty(t,"__esModule",{value:!0}),t.requestIdleCallbackWithDuration=t.safeCancelIdleCallback=t.safeRequestIdleCallback=void 0,t.safeRequestIdleCallback=r,t.safeCancelIdleCallback=function(e){return window.cancelIdleCallback?window.cancelIdleCallback(e):clearTimeout(e)},t.requestIdleCallbackWithDuration=function(e,t){const n=function(e){return Math.min(e||10,50)}(null==t?void 0:t.duration),o=()=>{r((t=>{if(t.timeRemaining()<n&&!t.didTimeout)return o();e(t)}),t)};o()}},79746:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConnected=void 0,t.isConnected=function(e){return!(e instanceof Node)||(void 0!==e.isConnected?e.isConnected:!((e.ownerDocument||document).compareDocumentPosition(e)&Node.DOCUMENT_POSITION_DISCONNECTED))}},64990:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withMedia=t.MediaContext=t.MediaConsumer=t.MediaProvider=void 0;var o=r(70981);Object.defineProperty(t,"MediaProvider",{enumerable:!0,get:function(){return o.MediaProvider}}),Object.defineProperty(t,"MediaConsumer",{enumerable:!0,get:function(){return o.MediaConsumer}}),Object.defineProperty(t,"MediaContext",{enumerable:!0,get:function(){return o.MediaContext}});var s=r(60771);Object.defineProperty(t,"withMedia",{enumerable:!0,get:function(){return n(s).default}})},98295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackMediaProvider=void 0;const n=r(65058),o=n.__importStar(r(44121)),s=n.__importDefault(r(71885));class i extends o.PureComponent{render(){return this.props.children(this.props.media)}}t.FallbackMediaProvider=s.default()(i)},70981:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaConsumer=t.MediaProvider=t.MediaContext=void 0;const n=r(65058),o=n.__importStar(r(44121)),s=r(98295),i=n.__importDefault(r(95258));t.MediaContext=i.default,t.MediaProvider=({value:e,children:r})=>o.createElement(t.MediaContext.Provider,{value:e},r),t.MediaConsumer=({children:e})=>o.createElement(t.MediaContext.Consumer,null,(t=>((e,t)=>t?e(t):o.createElement(s.FallbackMediaProvider,null,e))(e,t)))},95258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058).__importStar(r(44121)),o="__MEDIA_CONTEXT_GLOBAL_REACT_CONTEXT__";let s;s=window[o],s||"undefined"==typeof globalThis||(s=globalThis[o]),s||void 0===r.g||(s=r.g[o]),s||(s=n.createContext(null),"undefined"!=typeof globalThis&&(globalThis[o]=s),void 0!==r.g&&(r.g[o]=s),window[o]=s),t.default=s},60771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058).__importStar(r(44121)),o=r(70981);t.default=function(e){var t;return(t=class extends n.PureComponent{render(){return n.createElement(o.MediaConsumer,null,(t=>n.createElement(e,Object.assign({},this.props,{media:t}))))}}).displayName=`WithMedia(${e.displayName||e.name})`,t}},84196:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillMap=t.getMap=void 0;const n=r(65058),o=n.__importDefault(r(44121)),s=r(21460),i=r(67783),a=r(27971),c=r(96954),u=n.__importDefault(r(56393));t.getMap=a.getMap;const l=u.default("mml:client");t.fillMap=(e,t)=>(a.fillMap(),i.traverseTree(e,(e=>{var r;"string"==typeof(null===(r=e.render)||void 0===r?void 0:r.lazy)&&"none"!==e.render.lazy&&((e,t)=>{if(void 0===e.render)return;const r=a.getTemper(),n=c.getMmid(e);if(r.modules[n])return;const{render:i}=e,u=c.getUrl(e,"clientJs",t);let d;!1===e.render.isCriticalCss&&(d=c.getUrl(e,"css",t));const p=o.default.forwardRef(((e,t)=>o.default.createElement(s.ClientLazyRender,{clientJs:u,css:d,mmid:n,props:e,forwardedRef:t,modules:r.modules,strategy:i.lazy}))),h={initialize:()=>(h.initialize=!0,l.debug("initializing lazy",n),h),initialized:!0,meta:{mmid:n,clientJs:u,css:d,strategy:i.lazy,render:e.render},exports:p};r.modules[n]=h,h.exports.displayName=`ClientLazyRender(${n})`,a._addToMap(n,h.exports),l.debug("assigned lazy to temper",h)})(e,t)})),a.getMap()),t.default=t.fillMap},22054:function(e,t,r){"use strict";const n=r(65058),o=r(27971),s=r(67783),i=n.__importDefault(r(76439)),a=n.__importDefault(r(80393)),c=r(96954),u=r(8757),l=n.__importDefault(r(56393)),d=n.__importDefault(r(84196)),p=l.default("mm-lazy:dynamic"),h=e=>{const t=o.getTemper().modules[e];if(void 0===t)throw new Error(`module ${e} not found`);p.debug("initializeModule",e,t),!1===t.initialized&&(t.initialize(),t.initialized=!0,t.exports||p.error("no exports after initialization",e,t)),p.debug("initialized",e,t),o._addToMap(e,t.exports)};t.Z=async({tree:e,baseUrl:t=u.defaultBaseUrl})=>{p.debug("starting blockMap with baseUrl and tree",t,e),d.default(e,t);const r=o.getTemper(),n=[];s.traverseTree(e,(e=>{var o,s;if(void 0===e.render)return;const u=c.getMmid(e),l=r.modules[u];if(!(null==l?void 0:l.exports)){l?p.debug("module found, but no exports",u,l):p.debug("module not found",u);const r=c.getUrl(e,"clientJs",t),d=c.getUrl(e,"css",t);p.debug(`block ${e.type} not found, loading it via solo url`,r);const h=null===(o=e.render)||void 0===o?void 0:o.integrity,f=Object.assign({mmid:u},null!==(s=h&&{integrity:h})&&void 0!==s?s:void 0),g=Promise.all([i.default("stylesheet",d),a.default(r,f)]).then((()=>({mmid:u}))).catch((()=>({mmid:u,failed:!0})));n.push(g)}}));try{const e=await Promise.all(n);for(const{mmid:t,failed:r}of e)r?p.warn(`mmid ${t} failed to load`):(p.debug(`initializing async block ${t}`),h(t))}catch(e){p.error({message:"failed to load some modules"}),console.error(e)}return o.getMap()}},21460:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientLazyRender=void 0;const n=r(65058),o=n.__importStar(r(44121)),s=r(76363),i=n.__importDefault(r(80393)),a=n.__importDefault(r(76439)),c={__html:""},u=s.createUseObserverVisible({root:null,rootMargin:"200px 0px 0px 0px"}),l={};t.ClientLazyRender=({mmid:e,clientJs:t,css:r,props:n,forwardedRef:s,modules:d,strategy:p})=>{var h,f,g;const m=`${e}-lazy-inner`,v=!!(null===(h=d[m])||void 0===h?void 0:h.initialized),[y,b]=o.useState(v),[_,S]=o.useState(null),E=u(_,"viewport"===p),[w,O]=o.useState(!1),[k,C]=o.useState(!1);o.useEffect((()=>{"function"==typeof n.forwardDomRef&&n.forwardDomRef(_),"string"==typeof r&&a.default("stylesheet",r),"idle"===p&&("function"==typeof window.__testRequestIdleCallback?__testRequestIdleCallback((()=>C(!0))):"function"==typeof window.requestIdleCallback?window.requestIdleCallback((()=>C(!0))):C(!0))}),[]);const T=void 0===p||"none"===p,R="hover"===p&&w,P="viewport"===p&&E,M="idle"===p&&k,x="static"===p&&0===(null==_?void 0:_.innerHTML.length);if((T||R||P||M||x)&&!y&&i.default(t,{mmid:m}).then((()=>b(!0))),y){d[m].initialized||d[m].initialize();const t=d[m].exports;null===(f=n.onBotaUpdate)||void 0===f||f.call(n,t.bota);let r=n;return(null===(g=t.prototype)||void 0===g?void 0:g.render)&&(r=Object.assign({},n,{ref:s})),o.default.createElement("div",{"data-mmid":e,ref:e=>S(e),style:l},o.default.createElement(t,Object.assign({},r)))}let N;return"hover"===p&&(N={onMouseMove:()=>{w||O(!0)}}),o.default.createElement("div",Object.assign({"data-mmid":e,ref:e=>S(e),style:l,suppressHydrationWarning:!0,dangerouslySetInnerHTML:c},N))},t.ClientLazyRender.displayName="ClientLazyRender"},76363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUseObserverVisible=void 0;const n=r(44121);t.createUseObserverVisible=e=>(t,r)=>{const[o,s]=n.useState(!1);return n.useEffect((()=>{if(!t||o||!r)return;const n=new IntersectionObserver(((e,t)=>{e.forEach((({isIntersecting:e})=>{e&&(t.disconnect(),s(!0))}))}),e);return n.observe(t),()=>{n.disconnect()}}),[t]),o}},76439:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new Map;t.default=(e,t,n={})=>{if(r.has(t))return r.get(t);const o=document.createElement("link");Object.assign(o,n,{rel:e,href:t});const s=new Promise(((e,r)=>{o.onerror=()=>r(new Error(`could not load link ${t}`)),"onload"in o?o.onload=e:setTimeout(e,50),document.head.appendChild(o)}));return r.set(t,s),s}},80393:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new Map;t.default=(e,t={})=>{if(r.has(e))return r.get(e);const n=document.createElement("script");Object.assign(n,{async:!0,src:e}),"mmid"in t&&(n.dataset.mmid=t.mmid),t.integrity&&n.setAttribute("integrity",t.integrity);const o=new Promise(((t,r)=>{n.onerror=t=>r(new Error(`could not load script ${e} ${t.message||t}`)),n.onload=t,document.head.appendChild(n)}));return r.set(e,o),o}},96954:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMmid=t.getUrl=void 0;const n=r(65058).__importDefault(r(82129)),o={clientJs:".client.js",css:".css",jsMap:".client.js.map"};t.getUrl=function(e,t,r){const{type:s,render:i}=e;if(void 0===i)throw new Error(`render field is not defined for ${s}@${e.version}`);if(t in i&&"string"==typeof i[t])return i[t];if("npmVersion"in i){const e=n.default(s);return`${r}/${e}/${i.npmVersion}/${e}${o[t]}`}throw new Error(`failed to get resource location for ${e.id}`)},t.getMmid=function(e){var t,r;const{type:n,render:o}=e;if(void 0===o)throw new Error(`failed to get mmid for subtree ${e.id}`);return null!==(r=null!==(t=o.mmid)&&void 0!==t?t:o.clientJs)&&void 0!==r?r:`${n}@${o.npmVersion}`}},27971:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillMap=t._addToMap=t.getTemper=t.getMap=t._map=void 0;const n=r(65058),o=n.__importDefault(r(44121)),s=n.__importDefault(r(90776)),i=n.__importDefault(r(56393)).default("mm:client");t._map={},t.getMap=()=>t._map,t.getTemper=()=>{window.__tempref59452||(window.__tempref59452={});const e=window.__tempref59452;return void 0===e.externals&&(e.externals={react:o.default,"react-dom":s.default}),void 0===e.modules&&(e.modules={}),e},t._addToMap=(e,r)=>{t._map[e]=r},t.fillMap=()=>{const e=t.getTemper();for(const r in e.modules){const n=e.modules[r];i.debug("initial mm value",n),!1===n.initialized&&(n.initialize(),n.initialized=!0,n.exports||i.error("no exports after initialization",r,n)),i.debug("mm initialized",n),t._addToMap(r,n.exports)}return t._map},t.default=t.fillMap},8757:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBaseCloudUrl=t.defaultBaseUrl=void 0,t.defaultBaseUrl="https://acdn.tinkoff.ru/pfp-boxy/mm",t.defaultBaseCloudUrl="https://acdn.tinkoff.ru/boxycloud/"},79416:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDi=t.ALLOWED_KEYS=void 0,r(65058).__importDefault(r(56393)).default("page-maker:di"),t.ALLOWED_KEYS=Symbol("allowed_di_keys"),t.createDi=e=>{const{dival:r,diKeys:n}=e,o={[t.ALLOWED_KEYS]:n,get:e=>{const n=o[t.ALLOWED_KEYS];let s;return(void 0===n||-1!==n.indexOf(e))&&(s=r[e]),s}};return o}},13860:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateProps=void 0;const n=r(65058).__importDefault(r(56393)),o=r(79416),s=n.default("page-maker:di");t.generateProps=(e,t)=>{const{children:r,ids:n,missedDi:i}=t;let a=t.bota;const c=(r=[])=>{r.forEach((r=>{r in t.dival||i({key:r,bota:a,subtree:e})}))},u=o.createDi({dival:t.dival,diKeys:null==a?void 0:a.diKeys,type:e.type});return c(null==a?void 0:a.diRequiredKeys),Object.assign({},e.properties,{di:u,dispatch:r=>(s.debug({message:"dispatch was called with payload",payload:r}),t.act(r,e,n)),bus:(r,n)=>(s.debug({message:`component ${e.id} is subscribing for event ${r}`}),t.bus(e.id,r,n)),key:e.id,id:e.id,children:r,forwardDomRef:r=>t.saveDomRef(e.id,r)},"sticky"===e.type?{scrollParent:t.scrollParent}:{},{onBotaUpdate:e=>{a=e,u[o.ALLOWED_KEYS]=null==a?void 0:a.diKeys,c(null==a?void 0:a.diRequiredKeys)}})}},99639:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JointMaker=t.NakedMaker=void 0;const n=r(65058),o=n.__importDefault(r(56623));t.NakedMaker=o.default;const s=n.__importDefault(r(74995));t.JointMaker=s.default,t.default=s.default},74995:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jointUse=void 0;const n=r(65058),o=n.__importDefault(r(44121)),s=n.__importDefault(r(56393)),i=r(86744),a=n.__importDefault(r(56623)),c=s.default("page-maker:render"),u={flex:i.Flex,expander:i.Expander,fragment:i.Fragment,screen:i.Screen};function l(e){const{use:r}=e;return o.default.createElement(a.default,Object.assign({},e,{use:(e,n)=>t.jointUse(e)||(null==r?void 0:r(e,n))}))}t.jointUse=({type:e})=>{if(void 0!==u[e])return c.debug(`for type "${e}" found build-in component, returning`),u[e];c.debug(`jointUse: type "${e}" not found inside page-maker, going outside`)},l.displayName="JointMaker",t.default=l},37547:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058),o=n.__importStar(r(44121)),s=n.__importDefault(r(32109)),i=n.__importDefault(r(34238));function a(e){const[t,r]=o.useState(e.isExpanded),[n,a]=o.useState(e.isExpanded),c=o.useRef(t);o.useEffect((()=>{c.current=t}),[t]),e.isExpanded!==n&&(r(e.isExpanded),a(e.isExpanded)),o.useEffect((()=>{var t;return null===(t=e.bus)||void 0===t?void 0:t.call(e,"expand",(()=>{r(!0)}))}),[]),o.useEffect((()=>{var t;return null===(t=e.bus)||void 0===t?void 0:t.call(e,"minimize",(()=>{r(!1)}))}),[]),o.useEffect((()=>{var t;return null===(t=e.bus)||void 0===t?void 0:t.call(e,"toggle",(()=>{r(!c.current)}))}),[]);const{dataQA:u,forwardDomRef:l,animation:d,children:p}=e;return o.default.createElement("div",{className:s.default(i.default.block,{[i.default.expanded]:t,[i.default.hasHeightAnimation]:null==d?void 0:d.height}),"data-qa":u,ref:l},o.default.createElement("div",{className:s.default(i.default.content,{[i.default.hasOpacityAnimation]:null==d?void 0:d.opacity})},p))}t.default=a,a.displayName="Expander",a.defaultProps={isExpanded:!1,animation:{height:!0,opacity:!0}}},2976:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058),o=n.__importDefault(r(44121)),s=n.__importDefault(r(32109)),i=n.__importDefault(r(21040)),a=["padding","background","flex","flexDirection","justifyContent","alignItems","borderTop","borderBottom","alignSelf"].concat(["fontSize","fontFamily","fontWeight","color"]);function c(e){const{className:t,hidden:r,html:n,forwardDomRef:c}=e,u=(l=e,d=a,Object.keys(l).reduce(((e,t)=>(-1!==d.indexOf(t)&&l[t]&&(e[t]=l[t]),e)),{}));var l,d;const p=s.default(i.default.flex,t,{[i.default.hidden]:r});return n&&!e.children?o.default.createElement("div",{ref:c,dangerouslySetInnerHTML:{__html:n},className:p,style:u}):o.default.createElement("div",{ref:c,className:p,style:u},e.children)}t.default=c,c.displayName="Flex"},86744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=t.Fragment=t.Expander=t.Flex=void 0;const n=r(65058),o=n.__importDefault(r(2976));t.Flex=o.default;const s=n.__importDefault(r(37547));function i(e){return e.children}function a(e){return e.children}t.Expander=s.default,t.Fragment=i,i.displayName="PMFragment",t.Screen=a,a.displayName="PMScreen"},80220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058).__importDefault(r(44121)).default.createContext({scrollTo:()=>{}});n.displayName="StickyContext",t.default=n},56623:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058),o=n.__importStar(r(44121)),s=n.__importDefault(r(56393)),i=n.__importDefault(r(80220)),a=n.__importDefault(r(66070)),c=s.default("page-maker:master-of-scroll");class u extends o.Component{constructor(e){super(e),this.scrollParentElement=null,this.stack=[],this.beforeHeightsMap={},this.contextValue={scrollTo:this.scrollTo.bind(this)}}lazyScrollParent(){if(this.scrollParentElement instanceof HTMLElement)return this.scrollParentElement;let e=null;return this.props.scrollParent&&(e=document.querySelector(this.props.scrollParent)),e instanceof HTMLElement||(e=document.scrollingElement||document.body&&document.body.parentElement),e instanceof HTMLElement&&(this.scrollParentElement=e),c.debug({message:"scrollParentElement",scrollParentElement:e}),this.scrollParentElement}componentDidMount(){this.lazyScrollParent()}componentWillUnmount(){this.stack=[]}scrollTo(e){const t=this.scrollParentElement;if(e instanceof HTMLElement&&t instanceof HTMLElement){const{top:r}=e.getBoundingClientRect(),n=r+t.scrollTop;"function"==typeof this.props.scrollTo?this.props.scrollTo(0,n):"scrollTo"in t?t.scrollTo({left:0,top:n,behavior:"smooth"}):t.scrollTop=n}}render(){return o.default.createElement(i.default.Provider,{value:this.contextValue},o.default.createElement(a.default,Object.assign({},this.props)))}}t.default=u,u.displayName="MasterOfScroll"},66070:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(65058),o=n.__importDefault(r(56393)),s=r(44121),i=r(8758),a=n.__importDefault(r(80220)),c=o.default("page-maker:dispatch"),u=o.default("page-maker"),l=o.default("page-maker");function d(e){const{tree:t,use:r,dival:n,saveDomRef:o}=e,d=s.useContext(a.default),[p]=s.useState(new Map),[h]=s.useState(new Map);s.useEffect((()=>{u.debug({event:"reistry",domRegistry:p})}),[t]);const{displayTree:f}=i.renderTree(t,{use:r,act:(t,r,n)=>function(e,t,r,n){c.debug({event:"action",action:r});const{domRegistry:o,stickyContext:s,subscriptions:i,ids:a}=t;if("string"!=typeof(null==r?void 0:r.type))return void l.error('Wrong action shape, no "type: string" found',r);const u=(null==r?void 0:r.payload)||{};switch(null==r?void 0:r.type){case"scrollTo":{const e="targetGuid"in u?u.targetGuid:u.blockId;if("string"!=typeof e){l.error("cannot scrollTo, because id is not a string");break}if(s.scrollTo(o.get(e)),!o.has(e)){let t=`Failed to scroll to the element with id='${e}'.`;t=a&&a.has(e)?`${t} Tree node id='${e}' exists, but html element does not. Make sure forwardDomRef is called.`:`${t} Tree node id='${e}' does not exists. Check block properties.`,l.error(t),console.error(t)}break}case"emit":if(u.eventName&&u.blockId){const e=`${u.eventName}-${u.blockId}`;c.debug(`eventName and blockId found in action.payload, key is ${e}`),i.has(e)?(c.debug(`found ${e} subscription, invoking it with`,u.arg),i.get(e)(u.arg)):c.debug(`subscription ${e} not found, all subscriptions:`,i)}break;case"send":console.error("Action type send is no longer supported, use emit instead");break;default:"function"==typeof e.act?e.act(r,n):l.warn("action fired, but no one listening",r)}}(e,{domRegistry:p,stickyContext:d,subscriptions:h,ids:n},t,r),dival:n,saveDomRef:(e,t)=>{p.set(e,t),o&&o(e,t)},subscriptions:h,miss:e.miss,missedDi:e.missedDi||(e=>{})});return f}d.displayName="PureMaker",t.default=d},8758:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTree=void 0;const n=r(65058),o=n.__importDefault(r(44121)),s=n.__importDefault(r(56393)),i=r(67783),a=r(13860),c=s.default("page-maker:render");t.renderTree=function(e,t){let r,n=0;const s=new Set;return c.debug({event:"renderTree",subtree:e,options:t}),r=e?i.traverseTree(e,((e,r,i)=>{var u;s.add(e.id),n++;const{depth:l}=i;let d;"function"==typeof t.use&&(d=t.use(e,{depth:l})),d||(d=({children:t})=>o.default.createElement("div",{"data-fail-type":e.type},t),c.warn({message:`Component ${e.type} not found. Using fallback instead (() => children)`,subtree:{type:e.type,version:e.version,render:e.render}}),null===(u=t.miss)||void 0===u||u.call(t,e));const p=a.generateProps(e,{ids:s,children:r,dival:t.dival,bota:d.bota,act:t.act,saveDomRef:t.saveDomRef,scrollParent:t.scrollParent,depth:l,bus:(e,r,n)=>{const o=`${r}-${e}`;return t.subscriptions.set(o,n),()=>t.subscriptions.delete(o)},missedDi:t.missedDi});return o.default.createElement(d,Object.assign({},p))})):null,c.debug({event:"renderTreeResult",result:r,counter:n}),{displayTree:r,counter:n}}},83657:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("")}},67783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asTree=t.FIRST_ID=t.mapTree=t.traverseTree=void 0;const n=r(65058).__importDefault(r(83657));function o(e,t,r){var n;const o=null!==(n=null==r?void 0:r.pattern)&&void 0!==n?n:"post-order";return function e(r,n=0,s=0,i=0){var a,c,u;const l=null!==(c=null===(a=r.content)||void 0===a?void 0:a.length)&&void 0!==c?c:0;let d=null!==(u=r.content)&&void 0!==u?u:null;const p={depth:n,layerPosition:i,neighborsCount:s};switch(o){case"pre-order":{const o=t(r,d,p);if(Array.isArray(r.content)){const t=r.content.map(((t,r)=>e(t,n+1,l-1,r)));o&&"object"==typeof o&&(o.content=t)}return o}case"post-order":return Array.isArray(r.content)&&(d=r.content.map(((t,r)=>e(t,n+1,l-1,r)))),t(r,d,p);default:throw new Error(`wrong pattern value: "${o}"`)}}(e)}function s(e,t){return o(e,((e,r)=>Object.assign({},t(e),{content:r})))}t.traverseTree=o,t.mapTree=s,t.FIRST_ID="generated-id",t.asTree=function e(r,o=0){let i=o;return Array.isArray(r)?e({type:"fragment",content:r}):s(r,(e=>{var r,o;let s=e.id;if(!s){const e=i>0?`-${String(i)}`:"";s=`${t.FIRST_ID}${e}`,i++}return{id:s,type:n.default(null!==(r=e.type)&&void 0!==r?r:"as-tree-generated-type"),version:null!==(o=e.version)&&void 0!==o?o:"AS_TREE_PLACEHOLDER",content:e.content,render:e.render,properties:e.properties}}))}},82129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/([a-z0-9]|(?=[A-Z0-9]))([A-Z0-9])/g,"$1-$2").toLowerCase()}},46609:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return!1;if("Chrome"===r[1]&&null!==(e=t.match(/\bOPR|Edge\/(\d+)/)))return parseInt(e[1],10)>=38;r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]);var n=parseInt(r[1],10);return"Edge"===r[0]&&n>=15||"Chrome"===r[0]&&n>=58||"Firefox"===r[0]&&n>=53||"Safari"===r[0]&&n>=11}},65408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16509);t.default=function(){window.cobrowsing&&(window.cobrowsing.closeAllStreams(),window.cobrowsing=null);var e=document.getElementById(n.COBROWSING_ID);e&&document.body.removeChild(e),Array.from(document.querySelectorAll('script[src*="//cobrowsing"]')).forEach((function(e){return e.remove()}))}},80624:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17355);t.default=function(e,t,r){if(void 0===t&&(t=n.AppId.TEST),localStorage){var o=localStorage.getItem("cobrowsingDynamicStand");if(o)return o.includes("localhost")?o:o+"/static/"+t}switch(e){case n.Env.LOCAL:return"http://localhost:"+r;case n.Env.PROD:return"https://unic-cdn-prod.cdn-tinkoff.ru/cobrowsing-static/static/"+t;case n.Env.QA:return"https://cobrowsing-"+e+".tcsbank.ru/static/"+t;default:return e+"/static/"+t}}},58711:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return"https://cobrowsing-admin.tcsbank.ru/player/"+e+"/"+t+"/"+r}},21519:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=window.cobrowsing;return t?t.getRecordedTime(e):Promise.resolve(null)}},54233:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getRecordedTime=t.getPlayerUrl=t.Modern=t.SendMessageTypes=t.ViewId=t.Env=t.AppId=t.ReceiveMessageTypes=t.close=t.send=t.initialize=void 0;var a=i(r(16509));t.initialize=a.default;var c=i(r(62772));t.send=c.default;var u=i(r(65408));t.close=u.default;var l=i(r(58711));t.getPlayerUrl=l.default;var d=i(r(21519));t.getRecordedTime=d.default;var p=r(71801);Object.defineProperty(t,"SendMessageTypes",{enumerable:!0,get:function(){return p.SendMessageTypes}});var h=r(17355);Object.defineProperty(t,"AppId",{enumerable:!0,get:function(){return h.AppId}}),Object.defineProperty(t,"ViewId",{enumerable:!0,get:function(){return h.ViewId}}),Object.defineProperty(t,"Env",{enumerable:!0,get:function(){return h.Env}}),Object.defineProperty(t,"ReceiveMessageTypes",{enumerable:!0,get:function(){return h.ReceiveMessageTypes}}),Object.defineProperty(t,"Modern",{enumerable:!0,get:function(){return h.Modern}});try{Promise.resolve().then((function(){return s(r(20459))})).then((function(e){window.cobrowsingPackageVersion=e.version}))}catch(e){}},17355:function(e,t){"use strict";var r,n,o,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ViewId=t.Modern=t.ReceiveMessageTypes=t.AppId=t.Env=void 0,function(e){e.PF="pf",e.SME="sme",e.TCRM="tcrm",e.TQM="tqm",e.ITR="itr",e.TEST="test",e.TCB="tcb",e.WO="wo",e.TEST_SETTINGS="testsettings",e.TEST_LIMITS="testlimits",e.TCRMSME="tcrmsme",e.PWAMVNO="pwamvno",e.PWACREDIT="pwacredit",e.PWADEPOSIT="pwadeposit",e.PWASME="pwasme",e.PWAKASKO="pwakasko",e.TCRMINSURANCE="tcrminsurance",e.TCRMMOBILE="tcrmmobile",e.TCRMFLCALLCENTER="tcrmflcallcenter",e.TCRMFLCHAT="tcrmflchat",e.TCRMSMECHAT="tcrmsmechat",e.TCRMOUTBOUND="tcrmoutbound",e.TCRMVALIDATION="tcrmvalidation",e.TCRMINVESTCALLS="tcrminvestcalls",e.TCRMINVESTCHATS="tcrminvestchats",e.TCRMVERIFICATION="tcrmverification",e.TCRMOPNK="tcrmopnk",e.MONOLITH="monolith",e.TRAVEL="travel"}(r||(r={})),t.AppId=r,function(e){e.TQM="tqm",e.TCB="tcb",e.TQM_WO="tqmwo",e.TEST_PLAYER="testplayer",e.PF_PLAYER="pfplayer",e.TEST_SETTINGS_PLAYER="testsettingsplayer",e.TEST_LIMITS_PLAYER="testlimitsplayer",e.SME_PLAYER="smeplayer",e.TQM_SME="tqmsme",e.PWAMVNO_PLAYER="pwamvnoplayer",e.PWACREDIT_PLAYER="pwacreditplayer",e.PWADEPOSIT_PLAYER="pwadepositplayer",e.PWASME_PLAYER="pwasmeplayer",e.PWAKASKO_PLAYER="pwakaskoplayer",e.TQMINSURANCE="tqminsurance",e.TQMMOBILE="tqmmobile",e.TQMFLCALLCENTER="tcrmflcallcenter",e.TQMFLCHAT="tqmflchat",e.TQMSMECHAT="tqmsmechat",e.TQMTCRMOUTBOUND="tqmtcrmoutbound",e.TQMVALIDATION="tqmvalidation",e.TQMINVESTCALLS="tqminvestcalls",e.TQMINVESTCHATS="tqminvestchats",e.TQMVERIFICATION="tqmverification",e.TQMOPNK="tqmopnk",e.MONOLITH="monolith",e.TRAVEL_PLAYER="travelplayer"}(n||(n={})),t.ViewId=n,function(e){e.LOCAL="local",e.PROD="prod",e.QA="qa"}(o||(o={})),t.Env=o,function(e){e.auto="auto",e.modern="modern",e.legacy="legacy"}(s||(s={})),t.Modern=s,function(e){e.GOOD_CONNECTION="GOOD_CONNECTION",e.BAD_CONNECTION="BAD_CONNECTION",e.CONNECTION_LOST="CONNECTION_LOST",e.SESSION_CLOSE="SESSION_CLOSE",e.SESSION_REQUEST="SESSION_REQUEST",e.NO_CONNECTION="NO_CONNECTION",e.MARK_AREA="MARK_AREA",e.SESSION_CODE="SESSION_CODE",e.SESSION_REJECTED="SESSION_REJECTED"}(i||(i={})),t.ReceiveMessageTypes=i},16509:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.COBROWSING_ID=void 0;var o=n(r(80624)),s=r(62772),i=r(17355),a=n(r(46609)),c="cobrowsingScript";t.COBROWSING_ID=c;var u=function(){};function l(e){try{return JSON.parse(e.data)}catch(t){return e.data}}t.default=function(e,t,r,n){var d=e.env,p=e.wuid,h=e.appId,f=e.disableStream,g=e.modern,m=e.minDomUpdateTimeout,v=e.ngZone,y=e.onlyOnLoad;void 0===t&&(t=u),void 0===r&&(r=u),void 0===n&&(n=u);var b=function(e,t,r){void 0===e&&(e=i.Env.QA),void 0===t&&(t=i.AppId.TEST),void 0===r&&(r=i.Modern.auto);var n=o.default(e,t,3e3);return r===i.Modern.auto?n+"/main."+(a.default()?"modern.":"")+"bundle.js?appId="+t:r===i.Modern.legacy?n+"/main.bundle.js?appId="+t:n+"/main.modern.bundle.js?appId="+t}(d,h,g),_=document.getElementById(c);_&&(window.cobrowsing&&(window.cobrowsing.closeAllStreams(),window.cobrowsing=null),document.body.removeChild(_)),window.addEventListener("message",(function e(o){"cobrowsingReady"===l(o).message&&(window.cobrowsing.initialize(p,f,m,v),window.cobrowsing.subscribe(t,r,n),window.removeEventListener("message",e))}),!1),window.addEventListener("message",(function(e){"cobrowsingConnectionReady"===l(e).message&&s.flushBuffer()}),!1);var S=function e(){(_=document.createElement("script")).setAttribute("id",c),_.src=b+"&t="+(new Date).getTime(),document.body.appendChild(_),window.removeEventListener("load",e)};y&&"complete"!==document.readyState?window.addEventListener("load",S):S()}},71801:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SendMessageTypes=void 0,function(e){e.SESSION_CONFIRMATION="SESSION_CONFIRMATION",e.SESSION_REFUSE="SESSION_REFUSE",e.SESSION_CLOSE="SESSION_CLOSE",e.START_RECORD="START_RECORD",e.STOP_RECORD="STOP_RECORD",e.CUSTOM_DATA="CUSTOM_DATA",e.STOP_LIGHT_RECORD="STOP_LIGHT_RECORD",e.SESSION_REQUEST="SESSION_REQUEST"}(r||(r={})),t.SendMessageTypes=r},62772:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flushBuffer=void 0;var r=[];function n(e,t,n){var o=window.cobrowsing;"object"==typeof n&&n.saveStartTime&&!n.startTime&&(n.startTime=Date.now()),o&&o.isSocketReady&&o.isSocketReady()?o.send(e,t,n):!o||o.isSocketReady?r.push({message:e,data:t,settings:n}):o.send(e,t,n)}t.flushBuffer=function(){var e=r.slice();r=[];for(var t=e.shift();t;t=e.shift())n(t.message,t.data,t.settings)},t.default=n},19652:function(e,t,r){"use strict";r.d(t,{ZF:function(){return c},wG:function(){return h},sX:function(){return n},HC:function(){return m},fH:function(){return g},V3:function(){return a},JJ:function(){return v}});const n={REQUEST:"request",SINGLETON:"singleton"},o="NotFound",s=(e,t)=>{const r=new Error(e);return Object.assign(r,Object.assign({},t,{stack:t.stack?`${r.stack}\n---- caused by: ----\n${t.stack}`:r.stack}))};class i{constructor(e,t={}){this.isToken=!0,this.name=e,this.options=t}toString(){return this.name}}function a(e,t){return new i(e,t)}const c=a("di"),u="__NOT_YET__MARKER",l="__CIRCULAR__MARKER";function d(e,t,r,n,o){return{factory:e,resolvedDeps:t,scope:r,multi:n?[]:void 0,stack:o}}class p{constructor(e,t){this.records=new Map,this.recordValues=new Map,e&&e.forEach((e=>this.register(e))),this.fallback=t,this.register({provide:c,useValue:this})}get(e){var t;let r,n=!1;"string"==typeof e?r=e:"token"in e?(r=e.token,n=e.optional):r=e,r=r.toString();const i=this.getRecord(r);return!i&&(null===(t=this.fallback)||void 0===t?void 0:t.getRecord(r))?this.fallback.get(e):!i&&n?null:(function(e,t){if(void 0===e)throw s(`Token not found "${t}"`,{type:o})}(i,r),this.hydrate(i,r,n))}getOfDeps(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=this.get(e[r]));return t}getRecord(e){return this.records.get(e)}has(e){return!!this.getRecord(e.toString())}borrowToken(e,t){const r=t.toString();if(!this.getRecord(r)){const t=e.getRecord(r);t&&(this.records.set(r,t),this.recordValues.set(t,u))}}getValue(e){return this.recordValues.get(e)}register(e){return function(e){if("string"==typeof e.provide)return;const t=e.provide.options;if(t&&t.multi&&!e.multi)throw s(`Token ${e.provide.toString()} require multi providers`,{type:"RequireMulti",stack:e.__stack})}(e),this.processProvider(e)}processProvider(e){const t=e.provide.toString(),r=function(e){let t,r={},o=n.REQUEST;return"useFactory"in e?(t=t=>e.useFactory(t),e.deps&&(r=e.deps),e.scope&&(o=e.scope)):"useClass"in e&&(t=t=>new e.useClass(t),e.deps&&(r=e.deps),e.scope&&(o=e.scope)),d(t,r,o,!1,e.__stack)}(e),o=function(e){return"useValue"in e?e.useValue:u}(e);if(e.multi){let o=this.getRecord(t);if(o){if(void 0===o.multi)throw s(`Mixed multi-provider for ${t}`,{type:"MixedMulti",stack:e.__stack})}else o=d(void 0,{},e.scope||n.REQUEST,!0,e.__stack),this.records.set(t,o),this.recordValues.set(o,u);o.multi.push(r)}else this.records.set(t,r);this.recordValues.set(r,o)}hydrateDeps(e){return this.getOfDeps(e.resolvedDeps)}hydrate(e,t,r){let n=this.getValue(e);if(function(e,t,r){if(r===l)throw s(`Circular dep for "${t}"`,{type:"CircularDep",stack:e.stack})}(e,t,n),n!==u)return n;if(e.multi)this.recordValues.set(e,l),n=e.multi.map((e=>this.hydrate(e,t,!1)));else{this.recordValues.set(e,l);try{n=e.factory(this.hydrateDeps(e))}catch(n){if(this.recordValues.set(e,u),r&&n.type===o)return null;!function(e,t){throw t.__extendedWithStack?t.message+=` < ${e}`:(t.__extendedWithStack=!0,t.message=`${t.message} at "${e}"`),Object.hasOwnProperty.call(t,"stack")&&"string"==typeof t.stack&&(t.stack=t.stack.replace(/^.+\n/,`${t.name}: ${t.message}\n`)),t}(t,Object.assign(n,{stack:!e.stack||/---- caused by: ----/g.test(n.stack)?n.stack:`${n.stack}\n---- caused by: ----\n${e.stack||""}`}))}}return this.recordValues.set(e,n),n}}const h=a("isDiChildContainer");class f extends p{constructor(e,t){super(void 0,t),this.root=e,this.register({provide:c,useValue:this}),this.register({provide:h,useValue:!0})}getRecord(e){return super.getRecord(e)||this.root.getRecord(e)}getValue(e){return this.recordValues.has(e)?this.recordValues.get(e):e.scope!==n.SINGLETON&&e.factory?u:this.root.getValue(e)}hydrateDeps(e){return e.scope===n.REQUEST?super.hydrateDeps(e):super.hydrateDeps.call(this.root,e)}hydrate(e,t,r){return e.scope===n.REQUEST?super.hydrate(e,t,r):super.hydrate.call(this.root,e,t,r)}}function g(e){return new p(e)}function m(e,t){const r=new f(e);return t&&t.forEach((e=>{r.register(e)})),r}function v(e){return e}},94970:function(e,t,r){"use strict";r.d(t,{v7:function(){return a},pn:function(){return i},CB:function(){return s}});var n=r(51336),o=r.n(n);const s=e=>{if(!e)return"value should not be empty";let t;try{t=e.startsWith("/")?new URL(e,"http://localhost:3000"):new URL(e)}catch(e){return"URL is not valid"}return"http:"!==t.protocol&&"https:"!==t.protocol&&`Invalid protocol ${t.protocol}`},i=e=>t=>t?!!t.endsWith(e)||`value should ends with ${e}`:"value should not be empty",a=e=>t=>e.reduce(((e,r)=>{const n=r(t);return o()(n)?o()(e)?`${e}; ${n}`:n:o()(e)?e:e&&n}),!0)},56393:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A},BrowserReporter:function(){return C},LEVELS:function(){return _},LEVEL_NAMES:function(){return S},RemoteReporter:function(){return I},createLoggerFactory:function(){return k},formatJson:function(){return N},logger:function(){return M}});var n=r(85797),o=r.n(n),s=r(16061),i=r.n(s),a=r(75972),c=r.n(a),u=r(13016),l=r.n(u),d=r(88430),p=r.n(d),h=r(51336),f=r.n(h),g=r(37384),m=r.n(g),v=r(39648),y=r.n(v),b=r(81934);const _={trace:50,debug:40,info:30,warn:20,error:10,fatal:0,silent:-1/0},S={50:"trace",40:"debug",30:"info",20:"warn",10:"error",0:"fatal"},E=e=>new RegExp(`^${e.replace(/\*/g,".*?")}$`);class w{constructor(e={name:""}){if(this.name=o()(e.name),this.key=e.key||this.name,w.instances[this.key])return w.instances[this.key];this.beforeReporters=e.beforeReporters||[],this.reporters=e.reporters||[],this.filters=e.filters||[],this.extensions=e.extensions||[],this.defaults=e.defaults||{},e.level&&this.setLevel(_[e.level]),e.enabled&&this.setLevel(_.trace),this.checkEnabled(),w.instances[this.key]=this,i()(((e,t)=>{this[t]=(...t)=>this.log(e,t)}),_)}static save(){var e;null===(e=w.onChange)||void 0===e||e.call(w,{level:w.level,enabledName:this.enabledName,enabledLevel:this.enabledLevel})}static load(e){w.level=e.level,w.enabledName=e.enabledName,w.enabledLevel=e.enabledLevel}static setLevel(e){var t;w.level=null!==(t=_[e])&&void 0!==t?t:w.level,w.save()}static setOnChange(e){w.onChange=e}static enable(e,t){const[r,n]=t?[_[e],t]:[_.trace,e];w.enabledName.push(n),w.enabledLevel.push(r),w.save();const o=E(n);i()((e=>{const{name:t}=e;o.test(t)&&e.setLevel(r)}),w.instances)}static disable(e,t){const[r,n]=t?[_[e],t]:[_.silent,e],o=w.enabledName.indexOf(n);o>-1?(w.enabledName.splice(o,1),w.enabledLevel.splice(o,1)):(w.enabledName.push(n),w.enabledLevel.push(r)),w.save();const s=E(n);i()((e=>{const{name:t}=e;s.test(t)&&e.setLevel(r)}),w.instances)}static clear(){w.level=_.silent,w.enabledName=[],w.enabledLevel=[],w.save(),i()((e=>{e.setLevel(void 0)}),w.instances)}static setGlobalReporters(e){const t=c()(e);i()((e=>{e.reporters=t}),w.instances)}child(e){const t="string"==typeof e?{name:e}:e,r=t.key||t.name,n=this.name?`${this.name}.${t.name}`:t.name,o=this.key?`${this.key}.${r}`:r;return new w(Object.assign({beforeReporters:this.beforeReporters,reporters:this.reporters,filters:this.filters,extensions:this.extensions,defaults:this.defaults},t,{name:n,key:o}))}addBeforeReporter(e){this.beforeReporters=this.beforeReporters.concat(e)}setBeforeReporters(e){this.beforeReporters=c()(e)}addReporter(e){this.reporters=this.reporters.concat(e)}setReporters(e){this.reporters=c()(e)}addFilter(e){this.filters=this.filters.concat(e)}setFilters(e){this.filters=c()(e)}addExtension(e){this.extensions=this.extensions.concat(e),this.extensions.push(e)}setExtensions(e){this.extensions=c()(e)}setLevel(e){this.level=e}checkEnabled(){for(let e=w.enabledName.length-1;e>=0;e--){const t=w.enabledName[e];if(E(t).test(this.name))return void this.setLevel(w.enabledLevel[e])}}createLogObj(e,t){return Object.assign({date:new Date},this.defaults,{name:this.name,type:S[e],level:e,args:t})}log(e,t){let r;this.beforeReporters.length&&(r=this.createLogObj(e,t));for(const e of this.beforeReporters)e.log(r);if(void 0===this.level){if(e>w.level)return!1}else if(e>this.level)return!1;r||(r=this.createLogObj(e,t));for(const e of this.filters)if(!1===e.filter(r))return!1;for(const e of this.extensions)r=e.extend(r);for(const e of this.reporters)e.log(r);return!0}}w.level=_.silent,w.instances={},w.enabledName=[],w.enabledLevel=[];const O=["addBeforeReporter","setBeforeReporters","addReporter","setReporters","addFilter","setFilters","addExtension","setExtensions",...Object.keys(_)],k=e=>{const t=new w(e);return Object.assign((e=>t.child(e)),O.reduce(((e,r)=>(t[r]&&(e[r]=t[r].bind(t)),e)),{}),{setLevel:w.setLevel,setGlobalReporters:w.setGlobalReporters,enable:w.enable,disable:w.disable,clear:w.clear})};class C{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c00046",10:"#c0392b",20:"#f39c12",30:"#00BCD4"}}log(e){const t=e.level<20?console.error:20===e.level?console.warn:console.log,r=`\n      background: ${this.levelColorMap[e.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,n=`%c${[e.name,e.type].filter(Boolean).join(":")}`;"string"==typeof e.args[0]?t.call(console,`${n}%c ${e.args[0]}`,r,"",...e.args.slice(1)):t.call(console,n,r,...e.args)}}const T="_tinkoff_logger";let R,P;_.error;try{R=window.localStorage,P=JSON.parse(R.getItem(T))}catch(e){}P||(P=(()=>{try{return(e=>{if(!e)return;const t=e.split(",");return{level:_.silent,enabledLevel:Array(t.length).fill(_.trace),enabledName:t}})(window.localStorage.getItem("debug"))}catch(e){}})()),w.setOnChange((e=>{try{R.setItem(T,JSON.stringify(e))}catch(e){}})),P&&w.load(P);const M=k({name:"",reporters:[new C]});window.logger=M;const x=e=>(f()(e)&&(e=new Error(e)),Object.assign({},e,{body:(0,b.KQ)(e.body),code:(0,b.KQ)(e.code),message:e.message,stack:e.stack})),N=e=>{let t,r,n=null;const{args:o}=e;o[0]instanceof Error?(r=x(o[0]),t=f()(o[1])?o[1]:o[0].message):m()(o[0])&&!y()(o[0])?(n=o[0],r=n.error&&x(n.error),o[0].message?t=o[0].message:f()(o[1])&&(t=o[1])):t=o[0];const s=o.slice(t===o[1]?2:1).map((e=>e instanceof Error?{error:x(e)}:e));return Object.assign({},e,{args:s.length?s:void 0},n,{error:r,message:t})};class I{constructor({requestCount:e,makeRequest:t,emitLevels:r}){this.reqCount=0,this.queue=[],this.requestCount=e||1,this.makeRequest=t,this.emitLevels=r||{fatal:!0}}checkQueue(){this.queue.length&&this.reqCount<this.requestCount&&this.sendRequest()}sendRequest(){const e=this.queue.shift();this.reqCount++,this.makeRequest(N(e)).catch(l()).then((()=>{this.reqCount--,this.checkQueue()}))}remote(e){this.queue.push(e),this.checkQueue()}log(e){const{type:t,remote:r}=e;null==r?this.emitLevels[t]&&this.remote(e):(!0===r||p()(["emitLevels",t],!0,r))&&this.remote(Object.assign({},e,{remote:void 0}))}}const A=M},94945:function(e,t,r){"use strict";r.d(t,{L:function(){return a},s:function(){return i}});var n=r(44121),o=r(72322),s=r.n(o);const i=e=>{const t=(0,n.useRef)(e);return s()(t.current,e)||(t.current=e),t.current},a=n.useLayoutEffect},22846:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.httpMethod,r=void 0===t?"GET":t,n=e.url,o=e.payload,s=e.query,i=e.rawQueryString,a=void 0===i?"":i,c=e.additionalCacheKey,u=void 0===c?"":c;return r.toLowerCase()+n+JSON.stringify(o||"")+JSON.stringify(s||"")+a+JSON.stringify(u)}},51537:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CACHE=void 0,t.CACHE="cache"},90321:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058),o=n.__importDefault(r(86247)),s=r(51537),i=n.__importDefault(r(22846));t.default=function(e,t){void 0===t&&(t=i.default);var r=o.default("key",e.getInternalMeta(s.CACHE));return r||(r=t(e.getRequest()),e.updateInternalMeta(s.CACHE,{key:r})),r}},35125:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaTypes=t.getCacheKey=t.cacheKey=t.shouldCacheExecute=void 0;var n=r(65058),o=n.__importDefault(r(42436));t.shouldCacheExecute=o.default;var s=n.__importDefault(r(22846));t.cacheKey=s.default;var i=n.__importDefault(r(90321));t.getCacheKey=i.default;var a=n.__importStar(r(51537));t.metaTypes=a},42436:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058).__importDefault(r(86247)),o=r(80927),s=r(51537);t.default=function(e,t){return function(r){var i,a,c,u,l,d=r.getRequest(),p=null!==(a=n.default("cacheForce",d))&&void 0!==a&&a,h=null!==(c=n.default(e+"CacheForce",d))&&void 0!==c?c:p,f=null!==(u=n.default("cache",d))&&void 0!==u?u:t,g=null!==(l=n.default(e+"Cache",d))&&void 0!==l?l:f;return r.getStatus()===o.Status.INIT&&r.updateExternalMeta(s.CACHE,((i={forced:p,enabled:f})[e+"Enabled"]=g,i[e+"Force"]=h,i)),h?r.getStatus()===o.Status.COMPLETE:g}}},92527:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INIT="init",e.COMPLETE="complete",e.ERROR="error"}(r||(r={})),t.default=r},96839:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058),o=n.__importDefault(r(94511)),s=n.__importDefault(r(92527)),i=function(){function e(e){this.state=n.__assign({status:s.default.INIT,request:null,response:null,error:null},e),this.internalMeta={},this.externalMeta={}}return e.prototype.getState=function(){return this.state},e.prototype.setState=function(e){var t=o.default([this.state],e);t&&(this.state=n.__assign(n.__assign({},this.state),t))},e.prototype.getInternalMeta=function(e){return this.getMeta(e,this.internalMeta)},e.prototype.getExternalMeta=function(e){return this.getMeta(e,this.externalMeta)},e.prototype.updateInternalMeta=function(e,t){this.internalMeta=this.extendMeta(e,t,this.internalMeta)},e.prototype.updateExternalMeta=function(e,t){this.externalMeta=this.extendMeta(e,t,this.externalMeta)},e.prototype.getStatus=function(){return this.state.status},e.prototype.getResponse=function(){return this.state.response},e.prototype.getRequest=function(){return this.state.request},e.prototype.getMeta=function(e,t){return void 0===t&&(t=this.externalMeta),e?t[e]:t},e.prototype.extendMeta=function(e,t,r){var o;if(void 0===r&&(r=this.externalMeta),t)return n.__assign(n.__assign({},r),((o={})[e]=n.__assign(n.__assign({},r[e]),t),o))},e}();t.default=i},80927:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058),o=r(27552);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var s=r(96839);Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return s.default}}),n.__exportStar(r(67872),t);var i=r(92527);Object.defineProperty(t,"Status",{enumerable:!0,get:function(){return i.default}})},27552:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(65058),s=o.__importDefault(r(94511)),i=o.__importDefault(r(23915)),a=o.__importDefault(r(44444)),c=o.__importDefault(r(92527)),u=o.__importDefault(r(96839)),l=((n={})[c.default.INIT]=c.default.COMPLETE,n);t.default=function(e){return function t(r){var n=-1,o=e.length,d=new u.default;d.setState({request:r});var p=new Promise((function(r,u){var p=function(e){var t=d.getState(),n=t.status,o=l[n];return e?h(n,-1):o?(d.setState({status:o}),h(o,-1)):void(n===c.default.COMPLETE?r(t.response):u(Object.assign(t.error||{},{url:t.request.url})))},h=function(r,u){var l=d.getState().status;!function h(f){if(d.setState(f),d.getState().status!==l)return p(!0);if((n+=u)<0||n>=o)return p(!1);var g=e[n],m=g[r];if(!m||!s.default([d],a.default("shouldExecute",!0,g)))return h();try{m(d,i.default(h),t)}catch(e){return h({status:c.default.ERROR,error:e})}}()};h(c.default.INIT,1)}));return Object.assign(p,{getState:d.getState.bind(d),getInternalMeta:d.getInternalMeta.bind(d),getExternalMeta:d.getExternalMeta.bind(d)})}}},67872:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},39134:function(e,t,r){"use strict";var n=r(35125);t.Z=function(e){var t=void 0===e?{}:e,r=t.shouldExecute,o=void 0===r||r,s=t.getCacheKey,i=void 0===s?void 0:s,a={},c=function(e){var t=e.getState(),r=n.getCacheKey(e,i);if(r&&a[r]){var o=a[r];delete a[r],o.forEach((function(e){e({status:t.status,response:t.response,error:t.error})}))}};return{shouldExecute:n.shouldCacheExecute("deduplicate",o),init:function(e,t){var r=n.getCacheKey(e,i);if(a[r])return e.updateExternalMeta(n.metaTypes.CACHE,{deduplicated:!0}),void a[r].push(t);a[r]=[],t()},complete:function(e,t){c(e),t()},error:function(e,t){c(e),t()}}}},40266:function(e,t,r){"use strict";var n=r(65058),o=n.__importDefault(r(86247)),s=n.__importDefault(r(44444)),i=r(80927),a=r(35125),c=3e5;t.Z=function(e){var t=void 0===e?{}:e,u=t.lruOptions,l=void 0===u?{max:1e3,maxAge:c}:u,d=t.shouldExecute,p=void 0===d||d,h=t.allowStale,f=void 0!==h&&h,g=t.staleTtl,m=void 0===g?l.maxAge||c:g,v=t.memoryConstructor,y=void 0===v?function(e){return new(r(41738))(e)}:v,b=t.getCacheKey,_=void 0===b?void 0:b,S=y(n.__assign(n.__assign({},l),{stale:!0}));return{shouldExecute:a.shouldCacheExecute("memory",p),init:function(e,t,r){var o=a.getCacheKey(e,_);if(S.has(o))return e.updateExternalMeta(a.metaTypes.CACHE,{memoryCache:!0,memoryCacheOutdated:!1}),t({status:i.Status.COMPLETE,response:S.get(o)});var c=s.default("memoryCacheAllowStale",f,e.getRequest())&&S.peek(o);if(c){var u=e.getRequest();return e.updateExternalMeta(a.metaTypes.CACHE,{memoryCache:!0,memoryCacheOutdated:!0}),S.set(o,c,m),setTimeout((function(){return r(n.__assign(n.__assign({},u),{memoryCacheForce:!0,memoryCacheBackground:!0})).catch((function(){}))}),15),t({status:i.Status.COMPLETE,response:c})}t()},complete:function(e,t){var r=a.getCacheKey(e,_),n=o.default("memoryCacheTtl",e.getRequest());S.set(r,e.getResponse(),n),e.updateExternalMeta(a.metaTypes.CACHE,{memoryCacheBackground:o.default("memoryCacheBackground",e.getRequest())}),t()}}}},8233:function(e,t,r){"use strict";var n=r(65058).__importDefault(r(46818));t.Z=n.default({})},19925:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOG=void 0,t.LOG="log"},7744:function(e,t,r){"use strict";var n=r(65058),o=n.__importDefault(r(86247)),s=n.__importDefault(r(56322)),i=n.__importDefault(r(39648)),a=n.__importDefault(r(37384)),c=r(19925),u=function(e){var t=e.getExternalMeta(c.LOG),r=Date.now(),n=r-t.start;e.updateExternalMeta(c.LOG,{end:r,duration:n})},l=function(e){return{debug:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return console.debug.apply(console,n.__spreadArrays([e],t))},error:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return console.error.apply(console,n.__spreadArrays([e],t))}}},d=function(e,t){return!0===t?e:a.default(e)?!1===t?s.default((function(){return"*"}),e):s.default((function(e,r){return t.has(r)?e:"*"}),e):"*"};t.Z=function(e){var t=e.name,r=void 0===t?"":t,n=e.logger,s=void 0===n?l:n,a=e.showQueryFields,p=void 0!==a&&a,h=e.showPayloadFields,f=void 0!==h&&h,g=s("request."+r),m=function(e){var t=e.url,r=e.query,n=e.payload,o=e.showQueryFields,s=e.showPayloadFields,a=null!=o?o:p,c=null!=s?s:f;return{url:t,query:r&&d(r,i.default(a)?new Set(a):a),payload:n&&d(n,i.default(c)?new Set(c):c)}};return{init:function(e,t){var r=e.getRequest(),n=Date.now();o.default("silent",r)||g.debug({event:"init",info:m(r)}),e.updateExternalMeta(c.LOG,{start:n}),t()},complete:function(e,t){u(e);var r=e.getRequest();o.default("silent",r)||g.debug({event:"complete",info:m(r),meta:e.getExternalMeta()}),t()},error:function(e,t){var r=e.getRequest(),n=o.default("silent",r);u(e),n||g.error({event:"error",info:m(r),error:e.getState().error,meta:e.getExternalMeta()}),t()}}}},48738:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REQUEST_TYPES=t.HttpMethods=t.PROTOCOL_HTTP=void 0,t.PROTOCOL_HTTP="PROTOCOL_HTTP",t.HttpMethods={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD",PATCH:"PATCH"},t.REQUEST_TYPES={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded","multipart/form-data":""}},10329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=t.HttpRequestError=t.TimeoutError=void 0;var n=r(65058),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code="ERR_HTTP_REQUEST_TIMEOUT",t.message="Request timed out",t}return n.__extends(t,e),t}(Error);t.TimeoutError=o;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code="ERR_HTTP_ERROR",t}return n.__extends(t,e),t}(Error);t.HttpRequestError=s;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code="ABORT_ERR",t}return n.__extends(t,e),t}(Error);t.AbortError=i},89691:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Response=t.Request=t.Headers=t.fetch=void 0;var r="undefined"!=typeof self?self:window;t.fetch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.fetch.apply(r,e)};var n=r.Headers,o=r.Request,s=r.Response;t.Headers=n,t.Request=o,t.Response=s},80164:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058),o=n.__importDefault(r(91680)),s=n.__importDefault(r(16061)),i=n.__importDefault(r(39648)),a=n.__importDefault(r(16724)),c=n.__importDefault(r(91566));t.default=function(e,t){void 0===t&&(t=[]);var r=new c.default;return s.default((function e(t,n){if(i.default(t))return o.default((function(t){return e(t,n)}),t);a.default(t)||r.append(n,t)}),e),t.forEach((function(e){if(e instanceof window.Blob){var t=e.uploadName||e.name,n=e.fieldName||"file";r.append(n,e,encodeURIComponent(t))}})),r}},88094:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058),o=n.__importDefault(r(27021)),s=n.__importDefault(r(44444)),i=r(80927),a=r(89691),c=r(22806),u=r(81995),l=r(48738),d=n.__importDefault(r(10771)),p=n.__importDefault(r(80164)),h=r(10329),f=!1;window.addEventListener("beforeunload",(function(){f=!0})),t.default=function(e){return(void 0===e?{}:e).agent,{init:function(e,t){var r,g,m,v,y,b,_=e.getRequest(),S=_.httpMethod,E=void 0===S?l.HttpMethods.GET:S,w=_.url,O=_.query,k=_.queryNoCache,C=_.headers,T=_.type,R=void 0===T?"form":T,P=_.payload,M=_.attaches,x=void 0===M?[]:M,N=_.timeout,I=_.withCredentials,A=_.abortPromise,D=_.responseType,j=!1,L=E.toUpperCase(),V=L===l.HttpMethods.GET||L===l.HttpMethods.HEAD;if(x.length)g=(r=p.default(P,x)).getHeaders&&r.getHeaders();else{var U=s.default(R,R,l.REQUEST_TYPES);g=U?{"Content-type":U}:{},V||(r=u.serialize(R,P))}if(o.default){var F=new o.default;v=F.signal;var q=function(e){j||(j=!0,F.abort(),t({status:i.Status.ERROR,error:e instanceof Error?e:Object.assign(new h.AbortError,{abortOptions:e||{}})}))};A&&A.then(q),N&&(m=setTimeout((function(){q(new h.TimeoutError)}),N)),e.updateInternalMeta(l.PROTOCOL_HTTP,{requestAbort:q})}else N&&(m=setTimeout((function(){t({status:i.Status.ERROR,error:new h.TimeoutError}),j=!0}),N));a.fetch(c.addQuery(c.normalizeUrl(w),n.__assign(n.__assign(n.__assign({},V?P:{}),k),O)),{signal:v,method:L,headers:n.__assign(n.__assign({},g),C),agent:undefined,credentials:I?"include":"same-origin",body:r,timeout:N}).then((function(t){return y=t,e.updateInternalMeta(l.PROTOCOL_HTTP,{response:y}),y[D]?y[D]():d.default(y)})).then((function(e){if(!j){if(b=e,!y.ok)throw new Error(y.statusText);t({status:i.Status.COMPLETE,response:b})}})).catch((function(e){if(!(j||e&&f))return e&&"string"==typeof e.type&&/timeout/.test(e.type)?t({status:i.Status.ERROR,error:new h.TimeoutError}):void t({status:i.Status.ERROR,error:Object.assign(e,{code:"ERR_HTTP_ERROR",status:y&&y.status,body:b}),response:b})})).then((function(){j=!0,m&&clearTimeout(m)}))}}}},419:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058);n.__exportStar(r(72512),t),n.__exportStar(r(58354),t);var o=r(48738);Object.defineProperty(t,"HttpMethods",{enumerable:!0,get:function(){return o.HttpMethods}});var s=r(88094);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}})},10771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65058),o=n.__importDefault(r(85797)),s=n.__importDefault(r(9567));t.default=function(e){var t=o.default(e.headers.get("content-type")||"");return s.default("application/json",t)?e.json():s.default("application/octet-stream",t)?e.arrayBuffer():e.text()}},81995:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var n=r(22806);t.serialize=function(e,t){switch(e){case"form":case"urlencoded":case"form-data":return n.serialize(t);case"json":return JSON.stringify(t);default:return t}}},22806:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUrl=t.addQuery=t.serialize=void 0;var n=r(65058),o=n.__importDefault(r(16061)),s=n.__importDefault(r(16724));t.serialize=function(e,t){void 0===t&&(t="");var r=new URLSearchParams(t);return o.default((function(e,t){s.default(e)||r.set(t,e)}),e),r.toString()},t.addQuery=function(e,r){var n=e.split("?",2),o=n[0],s=n[1],i=t.serialize(r,s);return i?o+"?"+i:o},t.normalizeUrl=function(e){return e}},72512:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abort=t.getStatus=t.getHeader=t.getHeaders=t._getResponse=void 0;var n=r(65058).__importDefault(r(86247)),o=r(48738);t._getResponse=function(e){var t=e.getInternalMeta(o.PROTOCOL_HTTP);return t&&t.response};var s=function(e){return n.default("headers",t._getResponse(e))};t.getHeaders=function(e){var t=s(e),r={};return t&&t.forEach((function(e,t){r[t]="set-cookie"===t?[]:e})),r},t.getHeader=function(e,t){var r=s(e);if(r)return"set-cookie"===t?[]:r.get(t)},t.getStatus=function(e){return n.default("status",t._getResponse(e))},t.abort=function(e){var t=e.getInternalMeta(o.PROTOCOL_HTTP);return t&&t.requestAbort()}},58354:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isServerError=t.isNetworkFail=t.isAbortError=t.isTimeoutError=t.isHttpError=void 0,t.isHttpError=function(e){return"ERR_HTTP_ERROR"===e.code},t.isTimeoutError=function(e){return"ERR_HTTP_REQUEST_TIMEOUT"===e.code},t.isAbortError=function(e){return"ABORT_ERR"===e.code},t.isNetworkFail=function(e){return t.isTimeoutError(e)||t.isHttpError(e)&&!e.status},t.isServerError=function(e){return t.isHttpError(e)&&e.status>=500}},91566:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},33008:function(e,t,r){"use strict";var n=r(65058);t.Z=function(e){var t=void 0===e?{}:e,r=t.baseUrl,o=void 0===r?"":r,s=t.transform,i=void 0===s?function(e){return""+e.baseUrl+e.url}:s;return{init:function(e,t){var r=e.getRequest();t({request:n.__assign(n.__assign({},r),{url:i(n.__assign(n.__assign({},r),{baseUrl:r.baseUrl||o}))})})}}}},21616:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALIDATE=void 0,t.VALIDATE="validate"},69454:function(e,t,r){"use strict";var n=r(65058),o=n.__importDefault(r(30934)),s=r(80927),i=r(21616);t.Z=function(e){var t=void 0===e?{}:e,r=t.validator,a=void 0===r?o.default:r,c=t.allowFallback,u=void 0===c||c,l=t.errorValidator,d=void 0===l?o.default:l;return{complete:function(e,t){var r=e.getState(),o=r.request,c=a(r);return e.updateExternalMeta(i.VALIDATE,{validated:!c}),c?t({error:c,request:u?o:n.__assign(n.__assign({},o),{fallbackCache:!1}),status:s.Status.ERROR}):t()},error:function(e,t){var r=e.getState(),n=d(r);return e.updateExternalMeta(i.VALIDATE,{errorValidated:!!n}),n?(e.updateExternalMeta(i.VALIDATE,{error:r.error}),t({error:null,status:s.Status.COMPLETE})):t()}}}},19622:function(e,t,r){"use strict";r.d(t,{t1:function(){return q},$d:function(){return V},Me:function(){return B},gK:function(){return oe},sc:function(){return se},F3:function(){return te},mm:function(){return z},CE:function(){return ne},G$:function(){return re},Ft:function(){return ie},TF:function(){return J},QO:function(){return Y},C5:function(){return G},o2:function(){return K},HS:function(){return X},Qj:function(){return ee},kq:function(){return ae}});var n=r(35852),o=r.n(n),s=r(50746),i=r.n(s),a=r(44444),c=r.n(a),u=r(56322),l=r.n(u),d=r(65868),p=r.n(d),h=r(21218),f=r.n(h),g=r(88430),m=r.n(g),v=r(42421),y=r.n(v),b=r(68072),_=r.n(b),S=r(71897),E=r.n(S),w=r(74815),O=r.n(w),k=r(59726),C=r.n(k),T=r(50180),R=r.n(T),P=r(25368),M=r.n(P),x=r(19777),N=r.n(x),I=r(83089),A=r.n(I);const D=(e,t,r)=>{const n=c()(t,{},e);return i()(((e,t)=>e===n[t]),r)?e:Object.assign({},e,{[t]:Object.assign({},n,r)})},j=l()(o()),L=e=>j(e),V="CORE",U=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE"],F={0:"ANONYMOUS",5:"AUTHENTICATED",20:"APPLICANT",30:"CANDIDATE",35:"REGISTERED",40:"CLIENT",50:"EMPLOYEE"},q=U.reduce(((e,t)=>(e[t]=t,e)),Object.create(null)),B=()=>Object.assign({},L(q),{[q.ANONYMOUS]:!0}),H=(e,t)=>{if(t===q.ANONYMOUS)return D(e,V,B());let r=!0;const n=U.reduce(((e,n)=>(e[n]=r,n===t&&(r=!1),e)),{});return D(e,V,n)},$=c()(V,{}),J=f()([V,q.AUTHENTICATED],p()),Y=m()([V,q.REGISTERED],!0),G=m()([V,q.CLIENT],!0),K=e=>{const t=$(e);return!!t[q.REGISTERED]&&!t[q.CLIENT]},z=(e=0)=>H({[V]:{}},F[e]),W=U.length,Q="DYNAMIC",Z=c()(Q,{}),X=e=>y()(Boolean,Z(e)),ee=(e,t)=>{const r=X(e),n=X(t);return!(r||!n)||!(r&&!n)&&function(e,t){const r=$(e),n=$(t);if(r===n)return!1;for(let e=W-1;e>=0;e--){const t=U[e];if(!r[t]&&n[t])return!0}return!1}(e,t)},te=(e,t)=>{var r;const n=null===(r=t.campaign)||void 0===r?void 0:r.id;return n?((e,t)=>{const r=D(e,V,L(q)),n={[`${q.CLIENT}_${t}`]:!0},o=Z(e);return i()(((e,t)=>e===o[t]),n)?r:Object.assign({},r,{[Q]:n})})(e,n):H(((e,t)=>{const r=c()(t,{},e);return i()((e=>!1===e),r)?e:Object.assign({},e,{[t]:j(r)})})(e,Q),t.accessLevel)},re=_()(E()((e=>!!e)),O()(","),R()(["config","requiredRoles"],"")),ne=R()(["config","accessLevel"],0),oe=R()(["config","authenticateFailureRedirectUrl"],""),se=R()(["config","failureRedirectWithQueryParams"],!1);function ie(e,t=[]){const r=A()(e);return C()((t=>C()((r=>e[r][t]),r)),t)}function ae(e,t){return 0===function(e,t){const r=[];return e===t||M()(N()(A()(e),A()(t))).forEach((n=>{const o=c()(n,{},e),s=c()(n,{},t);M()(N()(A()(o),A()(s))).forEach((e=>{o[e]!==s[e]&&r.push(e)}))})),r}(e,t).length}},6801:function(e,t,r){"use strict";r.d(t,{ZP:function(){return _},wD:function(){return v}});var n=r(61973),o=r(36600),s=r.n(o),i=r(39310),a=r.n(i),c=r(49079),u=r.n(c),l=r(44271),d=r.n(l),p=r(52165),h=r.n(p),f=r(13016),g=r.n(f);const m=["sessionId","millisLeft","accessLevel","userId"],v="psid",y={sessionId:void 0,sessionWillExpireIn:0,accessLevel:"ANONYMOUS",millisLeft:0,userId:null,requested:!1},b={session:y},_=class extends class{constructor({apiClient:e,dispatcher:t,cookie:r,initialState:n,sessionCookieName:o}){this.state=b,this.dispatcher=t,this.apiClient=e,this.cookie=r,this.sessionCookieName=o,n&&this.setState(n)}async updateSessionStatus(e){return this.fetchOrCreateSession(e).then(d()((e=>this.saveAndDispatchSession(e))))}getSessionId(){return this.getSessionIdFromCookie()}async authenticate(){return this.isAuthenticated()?Promise.resolve():this.runAuthenticateFlow()}async logout(){return this.resetSessionOnServer().then(this.resetSessionOnClient.bind(this)).then(this.noSessionAuthFlow.bind(this))}async replaceWithNewSession(){return this.resetSessionOnServer().then(this.noSessionAuthFlow.bind(this))}async prolongateSession(e){return this.pingSession(e).then(this.updateSessionStatus.bind(this)).catch(g())}async runAuthenticateFlow(){const e=this.getSessionIdFromCookie();return e?this.hasSessionAuthFlow(e):this.noSessionAuthFlow()}async noSessionAuthFlow(){return this.createSession().then(this.saveAndDispatchSession.bind(this))}async hasSessionAuthFlow(e){return this.updateSessionStatus(e)}async fetchOrCreateSession(e){return e?this.fetchSessionStatus(e).catch((e=>{const t=h()(["response","errorMessage"],e);if(t&&u()("Session is absent",t))return this.createSession();throw e})):this.createSession()}async createSession(){return this.apiClient.request({method:"session",cache:!1,withoutSession:!0}).then(this.fetchSessionStatus.bind(this)).catch((e=>y))}async saveSession(e=y){let{sessionId:t,millisLeft:r,accessLevel:o="ANONYMOUS",userId:s}=e,i=(0,n.Z)(e,m);const a=(new Date).getTime()+r;this.setSessionIdToCookie(t,r);const c=Object.assign({},i,{accessLevel:o,sessionId:t,sessionWillExpireIn:a,userId:s,requested:!0});return this.setState({session:c}),c}async resetSessionOnClient(){return this.saveAndDispatchSession(y)}async resetSessionOnServer(){return this.apiClient.request({method:"sign_out",cache:!1,query:{sessionid:this.getSessionId()}})}async dispatchStatusChanged(){return this.dispatcher({action:"STATUS_CHANGED",payload:this.getState()})}async saveAndDispatchSession(e){return Promise.resolve().then((()=>this.saveSession(e))).then(this.dispatchStatusChanged.bind(this))}async pingSession(e){return this.apiClient.request({method:"ping",cache:!1,silent:!0,query:{sessionid:e}}).then((()=>e))}isAuthenticated(){const{session:{sessionWillExpireIn:e}}=this.getState();return a()(e)&&e>Date.now()}getSessionCookieName(){return this.sessionCookieName||v}getSessionIdFromCookie(){return this.cookie.get(this.getSessionCookieName())}setSessionIdToCookie(e,t){const r=t/1e3;this.cookie.set({expires:r,name:this.getSessionCookieName(),value:e})}async fetchSessionStatus(e){return this.apiClient.request({method:"session_status",cache:!1,silent:!0,query:{sessionid:e}}).then((t=>Object.assign({sessionId:e},t)))}getState(){return this.state}setState(e){this.state=Object.assign({},this.getState(),e)}}{async fetchSessionStatus(e){const t=(r=3)=>super.fetchSessionStatus(e).catch((e=>{if((s()(e)||!e.errorId)&&r>0)return new Promise((e=>setTimeout(e,500))).then((()=>t(r-1)));throw e}));return t()}}},99463:function(e,t,r){"use strict";r.d(t,{DI:function(){return y},n2:function(){return p},WU:function(){return _},Qc:function(){return f},co:function(){return b},F_:function(){return h},Hz:function(){return g}});var n=r(61973),o=r(52787),s=r.n(o),i=r(16061),a=r.n(i),c=r(91680),u=r.n(c);const l=["href","path","query","origin","port","username","password"],d=(s()(/^(?:[a-z]+:)?\/\//i),e=>e.pathname+e.search+e.hash),p=e=>{const t=Object.create(null);e.searchParams.forEach(((e,r)=>{Object.prototype.hasOwnProperty.call(t,r)?Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]:t[r]=e}));const r=e.toString(),n=d(e),o={href:n,origin:e.origin,protocol:e.protocol,username:e.username,password:e.password,port:e.port,pathname:e.pathname,path:n,search:e.search,hash:e.hash,query:t};return"localhost"!==e.host&&Object.assign(o,{href:e.href,host:e.host,hostname:e.hostname}),Object.defineProperty(o,"toString",{value:()=>r,enumerable:!1}),o},h=(e,t=(()=>window.location.href)())=>new URL((e=>{if(e.length<2)return!1;for(let t=0;t<e.length;t++)switch(e[t]){case"?":return!0;case"/":break;default:return!1}return!0})(e)?e.replace(/^\/+/,"/"):e,t),f=e=>p(h(e)),g=(e,t)=>{const r=h(e.toString());return h(t,r)},m=/^(\/[^?\s]*)(\?[^\s]*)?(#[^s]*)?$/,v=(e,t)=>{a()(((t,r)=>{Array.isArray(t)?(e.delete(r),u()((t=>e.append(r,t)),t)):void 0===t?e.delete(r):e.set(r,t)}),t)},y=(e,t)=>{const r=h(e.toString());return v(r.searchParams,t),p(r)},b=(e,t)=>{const{path:r,query:o,port:s,username:i,password:a}=t,c=(0,n.Z)(t,l);if(r){const t=(e=>{const t=m.exec(e);if(t){const[e,r,n="",o=""]=t;return{pathname:r,search:n,hash:o}}})(r);t&&Object.assign(e,t)}if(i&&(e.username=i),a&&(e.password=a),Object.assign(e,c),void 0!==s&&(e.port=s,"0"===e.port&&(e.port="http:"===e.protocol?"80":"443")),o){const r=new URLSearchParams(t.search);v(r,o),e.search=r.toString()}return e},_=e=>{const t=h("");return p(b(t,e)).href}},59726:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1}))},19777:function(e,t,r){"use strict";var n=r(17986),o=r(39648),s=r(75030),i=r(67709);e.exports=n(2,(function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=[]),o(e))return e.concat(t);if(s(e)){for(var r=i(0,e.length,e),n=0;n<t.length;n++)r.push(t[n]);return r}return e+t}))},88219:function(e,t,r){"use strict";var n=r(17986),o=r(47160);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var r=[],n=0;n<e.length;n++)o(e[n],t)<0&&r.push(e[n]);return r}))},91680:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)e(t[r],r,t)}))},71897:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}))},40112:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return t[r]}))},61053:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return r;return-1}))},40858:function(e,t,r){"use strict";var n=r(75030);e.exports=function e(t){void 0===t&&(t=[]);for(var r=[],o=0;o<t.length;o++){var s=t[o];if(n(s))for(var i=e(s),a=0;a<i.length;a++)r.push(i[a]);else r.push(s)}return r}},9567:function(e,t,r){"use strict";var n=r(17986),o=r(47160);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),-1!==o(e,t)}))},47160:function(e,t,r){"use strict";var n=r(17986),o=r(51336);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),o(t)?t.indexOf(e):Array.prototype.indexOf.call(t,e)}))},13970:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=t.length,n=new Array(r),o=0;o<r;o++)n[o]=e(t[o],o,t);return n}))},9294:function(e,t,r){"use strict";var n=r(17986);e.exports=n(3,(function(e,t,r){void 0===r&&(r=[]);for(var n=r.length,o=0;o<n;o++)t=e(t,r[o],o,r);return t}))},67709:function(e,t,r){"use strict";var n=r(17986),o=r(51336);e.exports=n(3,(function(e,t,r){return void 0===r&&(r=[]),o(r)?r.slice(e,t):Array.prototype.slice.call(r,e,t)}))},75972:function(e,t,r){"use strict";var n=r(39648),o=r(75030);e.exports=function(e){return n(e)?e:o(e)?Array.prototype.slice.call(e):[e]}},25368:function(e){"use strict";e.exports=function(e){void 0===e&&(e=[]);for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}},88131:function(e,t,r){"use strict";var n=r(39648);e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t[0])?Object.assign.apply(Object,[[]].concat(t)):Object.assign.apply(Object,[{}].concat(t))}},79267:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return null==t||t!=t?e:t}))},35852:function(e){"use strict";e.exports=function(){return!1}},58318:function(e){"use strict";e.exports=function(){return!0}},70905:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0;o<e.length;o++)if(!e[o].apply(e,r))return!1;return!0}))},46818:function(e){"use strict";e.exports=function(e){return function(){return e}}},94511:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return"function"==typeof t?t.apply(void 0,e):t}))},89833:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return function(){return e.apply(void 0,arguments)&&t.apply(void 0,arguments)}}))},66495:function(e){"use strict";e.exports=function(e){return function(){return!e.apply(void 0,arguments)}}},68072:function(e){"use strict";e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=t.length-1,r=t[e].apply(t,arguments),n=e-1;n>=0;n--)r=t[n](r);return r}}},83411:function(e){"use strict";e.exports=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var o=0;o<e.length;o++)if(e[o][0].apply(this,r))return e[o][1].apply(this,r)}}},67679:function(e,t,r){"use strict";var n=r(17986);e.exports=function(e){return n(e.length,e)}},17986:function(e){"use strict";e.exports=function(e,t){return function r(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e?t.apply(this,o):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,o.concat(t))}}}},34957:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){var r;function n(){var n=this,o=arguments;clearTimeout(r),r=setTimeout((function(){return t.apply(n,o)}),e)}return n.cancel=function(){return clearTimeout(r)},n}))},53301:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return function(){return e.apply(void 0,arguments)||t.apply(void 0,arguments)}}))},90767:function(e){"use strict";e.exports=function(e){return e}},7216:function(e,t,r){"use strict";var n=r(17986);e.exports=n(3,(function(e,t,r){return function(){return e.apply(void 0,arguments)?t.apply(void 0,arguments):r.apply(void 0,arguments)}}))},36537:function(e,t,r){"use strict";var n=r(72584);e.exports=function(e,t){void 0===t&&(t=n);var r,o=[],s=!1,i=function(e,r){return t(e,o[r])};return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return s&&n.length===o.length&&n.every(i)||(r=e.apply(void 0,n),s=!0,o=n),r}}},13016:function(e){"use strict";e.exports=function(){}},30934:function(e){"use strict";e.exports=function(){}},23915:function(e){"use strict";e.exports=function(e){var t,r=!1;return function(){return r||(t=e.apply(void 0,arguments),r=!0),t}}},90087:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){var r,n;return function(){for(var o=this,s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var c=Date.now(),u=r+e-c;r&&u>0?(clearTimeout(n),n=setTimeout((function(){r=c,t.apply(o,i)}),u)):(r=c,t.apply(this,i))}}))},39820:function(e,t,r){"use strict";var n=r(17986);e.exports=n(3,(function(e,t,r){return e(r)?t(r):r}))},39648:function(e){"use strict";e.exports=function(e){return!!e&&Array.isArray(e)}},75030:function(e,t,r){"use strict";var n=r(39648),o=r(51336),s=r(10074);e.exports=function(e){switch(!0){case n(e):return!0;case!e:case"object"!=typeof e:case o(e):return!1;case 1===e.nodeType:return!!e.length;case 0===e.length:return!0;case e.length>0:return s("0",e)&&s(String(e.length-1),e)}return!1}},36600:function(e,t,r){"use strict";var n=r(16724),o=r(39648),s=r(51336),i=r(37384);e.exports=function(e){switch(!0){case n(e):return!0;case s(e):return""===e;case o(e):return 0===e.length;case i(e):return 0===Object.keys(e).length}return!1}},72584:function(e,t,r){"use strict";var n=r(67679),o=r(39648),s=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||e!==Object(e)||!e||!t)return!1;if(o(e)&&o(t))return function(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(!s(e[n],t[n]))return!1;return!0}(e,t);var r=Object.prototype.toString.call(e);return"[object Object]"===r&&Object.prototype.toString.call(t)===r?function(e,t){var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(var o=0;o<n;o++){var i=r[o];if(!Object.prototype.hasOwnProperty.call(t,i)||!s(e[i],t[i]))return!1}return!0}(e,t):"function"==typeof e?e===t:function(e,t){return e.toString()===t.toString()}(e,t)};e.exports=n(s)},20543:function(e){"use strict";e.exports=function(e){return"function"==typeof e}},16724:function(e){"use strict";e.exports=function(e){return null==e}},39310:function(e){"use strict";e.exports=function(e){return"number"==typeof e||e instanceof Number}},37384:function(e){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},49331:function(e,t,r){"use strict";var n=r(37384),o=r(20543);e.exports=function(e){return(n(e)||o(e))&&o(e.then)}},39329:function(e,t,r){"use strict";var n,o=r(10074);try{n=r(1238).isElement}catch(e){}n||(n=function(e){return!!e&&o("$$typeof",e)}),e.exports=n},72322:function(e,t,r){"use strict";var n=r(37384),o=Object.prototype.hasOwnProperty;e.exports=function(e,t){if(e===t)return!0;if(!n(e)||!n(t))return!1;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(var s=0;s<r.length;s++){var i=r[s];if(!o.call(t,i)||e[i]!==t[i])return!1}return!0}},50948:function(e){"use strict";e.exports=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},51336:function(e){"use strict";e.exports=function(e){return"string"==typeof e||e instanceof String}},65868:function(e){"use strict";e.exports=function(e){return!e}},50746:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)if(Object.prototype.hasOwnProperty.call(t,r)&&!e(t[r],r,t))return!1;return!0}))},42421:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t))return!0;return!1}))},16061:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}))},74522:function(e,t,r){"use strict";var n=r(17986),o=r(83089);e.exports=n(2,(function(e,t){void 0===t&&(t={});for(var r=o(t),n={},s=0;s<r.length;s++){var i=r[s];e(t[i],i,t)&&(n[i]=t[i])}return n}))},10074:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))},83089:function(e,t,r){"use strict";var n=r(37384);e.exports=function(e){return n(e)?Object.keys(e):[]}},56322:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===t&&(t={});var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n],n,t));return r}))},36552:function(e,t,r){"use strict";var n=r(17986),o=r(83089),s=r(88131);e.exports=n(3,(function(e){for(var t=s(arguments.length<=1?void 0:arguments[1]),r=1;r<(arguments.length<=1?0:arguments.length-1);r++)for(var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1],i=o(n),a=0;a<i.length;a++){var c=i[a];Object.prototype.hasOwnProperty.call(t,c)?t[c]=e(t[c],n[c],c,t,n):t[c]=n[c]}return t}))},34676:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){var r;return(r={})[e]=t,r}))},22795:function(e,t,r){"use strict";var n=r(17986),o=r(83089);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=Object.create(null),n=0;n<e.length;n++)r[e[n]]=!0;for(var s={},i=o(t),a=0;a<i.length;a++){var c=i[a];r[c]||(s[c]=t[c])}return s}))},52165:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=t,n=0;n<e.length;n++){if(null==r)return;r=r[e[n]]}return r}))},21218:function(e,t,r){"use strict";var n=r(17986),o=r(52165);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),t(o(e,r),e,r)}))},88430:function(e,t,r){"use strict";var n=r(17986),o=r(52165);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),o(e,r)===t}))},50180:function(e,t,r){"use strict";var n=r(17986),o=r(52165);e.exports=n(3,(function(e,t,r){void 0===e&&(e=[]),void 0===r&&(r={});var n=o(e,r);return null!=n?n:t}))},25743:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r={},n=0;n<e.length;n++){var o=e[n];o in t&&(r[o]=t[o])}return r}))},86247:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return null!=t?t[e]:void 0}))},36060:function(e,t,r){"use strict";var n=r(17986),o=r(86247);e.exports=n(3,(function(e,t,r){return o(e,r)===t}))},44444:function(e,t,r){"use strict";var n=r(17986),o=r(86247);e.exports=n(3,(function(e,t,r){var n=o(e,r);return null!=n?n:t}))},81786:function(e,t,r){"use strict";var n=r(17986);e.exports=n(3,(function(e,t,r){for(var n in void 0===r&&(r={}),r)Object.prototype.hasOwnProperty.call(r,n)&&(t=e(t,r[n],n,r));return t}))},29553:function(e,t,r){"use strict";var n=r(83089);e.exports=function(e){for(var t=n(e),r=t.length,o=new Array(r),s=0;s<r;s++)o[s]=e[t[s]];return o}},44271:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return Promise.resolve().then((function(){return e(t)})).then((function(){return t}))}))},49079:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(-e.length)===e}))},33038:function(e){"use strict";var t=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n=function(e){return r[e]};e.exports=function(e){return void 0===e&&(e=""),e.replace(t,n)}},72137:function(e,t,r){"use strict";var n=r(17986),o=r(51336);e.exports=n(2,(function(e,t){if(void 0===e&&(e=0),!o(t))return"";for(var r="",n=0;n<e;n++)r+=t;return r}))},35759:function(e,t,r){"use strict";var n=r(17986);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===r&&(r=""),r.replace(e,t)}))},74815:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.split(e)}))},52468:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(0,e.length)===e}))},52787:function(e,t,r){"use strict";var n=r(17986);e.exports=n(2,(function(e,t){return void 0===e&&(e=/()/),void 0===t&&(t=""),e.test(t)}))},85797:function(e){"use strict";e.exports=function(e){return void 0===e&&(e=""),e.toLowerCase()}},40661:function(e,t){"use strict";t.A=void 0,t.A=function(){return new Promise((function(e){var t=window.tracking;t&&t.fullfill?e(t):window.addEventListener("tracking-created",(function(t){t instanceof CustomEvent&&e(t.detail||window.tracking)}))}))}},97824:function(e,t){"use strict";t.x4=t.OR=void 0,t.OR=function(e,t){var r=t.event,n=t.config,o=void 0===n?{}:n,s=t.payload,i=r,a=void 0===s?{}:s;"pushTrack"===o.type&&(i=o.type,a.pageAction?a._event=r:a.pageAction=r),e.event.call({isSendContext:!0,fromEventea:!0},i,a)},t.x4=function(e,t){var r=t.payload,n=void 0===r?{}:r;e.extend(n)}},66938:function(e,t,r){"use strict";var n=r(65058),o=r(73951),s=(0,n.__importDefault)(r(39649)),i=function(){function e(){var e=this;this.utils={},this.proxy=!0,this.addUtil=this.createProxiedMethod((function(e){return e.addUtil})),this.updateLocation=this.createProxiedMethod((function(e){return e.updateLocation})),this.addPixel=this.createProxiedMethod((function(e){return e.addPixel})),this.use=this.createProxiedMethod((function(e){return e.use})),this._clearAllListeners=this.createProxiedMethod((function(e){return e._clearAllListeners})),this._event=this.createProxiedMethod((function(e){return e.event})),this._stateAcc={},this._listeners=Object.create(null),this.ready=new Promise((function(t){e._readyResolve=t})),this.trackingReady=new Promise((function(t){e._trackingResolve=t}))}return Object.defineProperty(e.prototype,"_version",{get:function(){return this.tracking?this.tracking._version:"proxy-5.13.2"},enumerable:!1,configurable:!0}),e.prototype.setTracking=function(e){var t=this;this.tracking=e;var r=Object.keys(e.state).length>0;this._trackingResolve(e),e.ready.then(this._readyResolve),e.extend(this._stateAcc),r&&this._listeners.change&&this._listeners.change.forEach((function(r){r(e.state,t._stateAcc)})),this._listeners=Object.create(null)},e.prototype.addPixels=function(e){return this.tracking?this.tracking.addPixels(e):this.trackingReady.then((function(t){return t.addPixels(e)}))},e.prototype.resolve=function(e){var t=this;return Promise.resolve(e).then((function(e){return t.setTracking(e),e}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.tracking?this.tracking.state:this._stateAcc},enumerable:!1,configurable:!0}),e.prototype.callUtil=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return this.tracking?(t=this.tracking).callUtil.apply(t,(0,n.__spreadArray)([e],r,!1)):this.trackingReady.then((function(t){return t.callUtil.apply(t,(0,n.__spreadArray)([e],r,!1))}))},e.prototype.fullfill=function(e){return this.tracking?this.tracking.fullfill(e):this.trackingReady.then((function(t){return t.fullfill(e)}))},e.prototype.extend=function(e){if(this.tracking)return this.tracking.extend(e);var t=Object.keys(e).reduce((function(t,r){var n=r.split(".");return(0,o.assoc)(t,n,e[r])}),this._stateAcc);return this.update(t)},e.prototype.extendDeep=function(e){if(this.tracking)return this.tracking.extendDeep(e);var t=Object.keys(e).reduce((function(t,r){var n=r.split(".");return(0,o.update)(t,n,(function(e,t){return(0,s.default)(e)&&(0,s.default)(t)?(0,o.deepMerge)(e,t):t}),e[r])}),this._stateAcc);return this.update(t)},e.prototype.update=function(e){return this.tracking?this.tracking.update(e):(this._stateAcc!==e&&(this._stateAcc=e),this)},e.prototype.remove=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.tracking)return(e=this.tracking).remove.apply(e,t);var s=o.dissoc.apply(void 0,(0,n.__spreadArray)([this._stateAcc],t.map((function(e){return e.split(".")})),!1));return this.update(s)},e.prototype.on=function(e,t){this.tracking?this.tracking.on(e,t):("change"===e&&(this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)),this.trackingReady.then((function(r){r.on(e,t)})))},e.prototype.event=function(e,t){return"u"!=="object"[0]?this._event(e,t):this},e.prototype.off=function(e,t){this.tracking?this.tracking.off(e,t):("change"===e&&this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t}))),this.trackingReady.then((function(r){r.off(e,t)})))},e.prototype.emit=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];this.tracking?(t=this.tracking).emit.apply(t,(0,n.__spreadArray)([e],r,!1)):this.trackingReady.then((function(t){t.emit.apply(t,(0,n.__spreadArray)([e],r,!1))}))},e.prototype.waitFor=function(e){return this.trackingReady.then((function(t){return t.waitFor(e)}))},e.prototype.createProxiedMethod=function(e){var t=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.tracking?e(t.tracking).apply(t.tracking,r):t.trackingReady.then((function(t){e(t).apply(t,r)})),t}},e}();t.Z=i},39649:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype}},26215:function(e,t,r){"use strict";r.d(t,{x:function(){return j}});var n=r(99463),o=r(36600),s=r.n(o),i=r(52165),a=r.n(i),c=r(56322),u=r.n(c),l=r(81934),d=r(74522),p=r.n(d),h=r(25743),f=r.n(h),g=r(91680),m=r.n(g),v=r(50180),y=r.n(v),b=r(39648),_=r.n(b),S=r(25368),E=r.n(S);const w="x-service",O="dcoData";function k(e){let t;try{t=(0,l.or)(e)}catch(e){}return t||""}const C=["utm_source","utm_content","utm_campaign","utm_medium","utm_term","sid","wm"],T=(e,t)=>"dco.id"===e?new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(t):void 0!==e&&void 0!==t,R=C.reduce(((e,t)=>Object.assign({},e,{[t]:!0})),{}),P=/; */,M=/, */,x=e=>p()(((e,t)=>!R[t]),e),N=(e,t)=>Object.keys(e).sort().map((r=>{const n=t[r]||e[r];return T(r,n)?`${r}=${e[r]}`:null})).filter(Boolean).join("; "),I=(e,t,r,n)=>{const o=(e=>{if(!e)return e;const t={};return Object.keys(e).forEach((r=>{if(Object.prototype.hasOwnProperty.call(e,r))try{t[encodeURIComponent(r)]=encodeURIComponent(e[r])}catch(e){}})),t})((e=>!!e.utm_source&&f()(C,e))(e));return o?N(Object.assign({},x(r),o),t):t.utm_source?N(r,t):N(Object.assign({},x(r),{utm_source:n||""}),t)},A=["protocol","host","pathname","query"];function D(e,t,r){let o=Object.assign({},e);var s;return void 0!==r&&(o.query=Object.assign({},o.query,{dco_ic:r})),o=Object.assign({},o,{query:(s=Object.assign({},o.query,t.query),u()((e=>{if(_()(e)){const t=E()(e);return 1===t.length?t[0]:t}return e}),s))}),o=f()(A,o),"/"!==o.pathname.slice(-1)&&(o.pathname+="/"),(0,n.WU)(o)}class j{constructor({pageUrl:e,pageReferrer:t,logger:r,userHeaders:o}){this.pageUrl=(0,n.Qc)(e),this.pageReferrer=t,this.logger=r,this.userHeaders=o,this.rawUserCookie=((e="")=>e.split(P).reduce(((e,t)=>{const[r,n]=t.split("=");return Object.assign({},e,{[r]:n})}),{}))(this.userHeaders.cookie),this.decodedUserCookie=u()((e=>function(e){try{return decodeURIComponent(e)}catch(t){return e}}(e)),this.rawUserCookie)}getDcoRequestParams({appId:e,service:t}){const{query:r}=this.pageUrl,n={"x-app-id":e,"x-dco-user-data":I(r,this.decodedUserCookie,this.rawUserCookie,this.pageReferrer)};return t?n[w]=t:this.userHeaders[w]&&(n[w]=this.userHeaders[w]),{headers:n,payload:Object.assign({},r,{trackingState:k({dco:{referrer:this.pageReferrer,beforeRedirectPageUrl:this.decodedUserCookie.beforeRedirectPageUrl}})})}}getUserResponseParams({dcoResponse:e,dcoResponseHeaders:t}){const r=(e=>{const t=[];return m()((r=>{const n=e[r];T(r,n)&&t.push({name:r,value:n,expires:31536e3,noSubdomains:!0})}),Object.keys(e).sort()),t})(((e="")=>e.split(M).reduce(((e,t)=>{const[r,n]=t.split("=");return Object.assign({},e,{[r]:n})}),{}))(t["x-dco-set-context"])),o=e.dco,i=!s()(o)&&!s()(o.state);if(i&&e.redirectUrl)return r.push({name:"beforeRedirectPageUrl",value:this.pageUrl.pathname,expires:60},{name:O,value:k(o),expires:60}),{redirectUrl:D((0,n.Qc)(e.redirectUrl),this.pageUrl,a()(["state","ic"],o)),redirectCode:e.redirectCode,cookieSet:r};const c=((e,t)=>{const r=e.dcoData;let n;if(r)try{n=JSON.parse(r)}catch(e){t({name:"dcoParsingCookieState"}).error(e)}return n})(this.decodedUserCookie,this.logger);c&&r.push({name:O,value:"",expires:new Date(0)});const u=i||!c?o:c,l=function({dcoData:e,query:t,dcoResponseHeaders:r,decodedUserCookie:n,referrer:o}){const s=y()(["dco_ic"],"",t),i=a()(["x-dco-ic"],r),c={personalizedLandingMetrics:e,dco:{referrer:o,ic:a()(["state","ic"],e)||i||s}};return n.beforeRedirectPageUrl&&(c.dco.beforeRedirectPageUrl=n.beforeRedirectPageUrl),c}({referrer:this.pageReferrer,query:this.pageUrl.query,dcoData:u,dcoResponseHeaders:t,decodedUserCookie:this.decodedUserCookie});return{cookieSet:r,dcoData:u,trackingData:l}}}},20236:function(e,t,r){"use strict";r.d(t,{C:function(){return K},b:function(){return ee},d:function(){return G},s:function(){return q}});var n=r(65058),o=r(31283),s=r(70510),i=r(85354),a=r(89660),c=r(68368),u=r(44121),l=r.n(u),d=r(50180),p=r.n(d),h=r(68928),f=r(54233),g=r(19622),m=r(68072),v=r.n(m),y=r(44444),b=r.n(y),_=r(74815),S=r.n(_),E=r(70324),w=r(19777),O=r.n(w),k=r(36600),C=r.n(k),T=r(67709),R=r.n(T),P=r(87915),M=r(6801),x=r(19652);const N="cobrowsing",I={authorized:!1,anonymous:!1},A={isCobrowsingReady:!1,cobrowsingEnabled:I,fullstoryEnabled:I},D=(0,c.yM)("COBROWSING_READY"),j=(0,c.yM)("COBROWSING_CONFIG_UPDATED"),L=(0,c.yM)("COBROWSING_STATE_CHANGED"),V=(0,c.Lq)(N,A).on(D,(function(e){return Object.assign({},e,{isCobrowsingReady:!0})})).on(j,(function(e,t){return Object.assign({},e,t,{loaded:!0})})).on(L,(function(e,t){return Object.assign({},e,{cobrowsingState:t})})),U=(0,o.PH)({name:"setCobrowsingStateAction",fn:function(e,t){return e.dispatch(L(t))},conditions:{onlyBrowser:!0,requiredCoreRoles:[g.t1.REGISTERED]}});let F=null;const q=(0,o.PH)({name:"startCobrowsingAction",fn:function(e,t,r){if(F)return F;const{onMessage:n,disableStream:o}=t||{};return F=new Promise((t=>{window.addEventListener("message",(function r(n){let o=null==n?void 0:n.data;try{o=JSON.parse(n.data)}catch(e){return}"cobrowsingReady"===o.message&&(e.dispatch(D()),window.removeEventListener("message",r),F=null,t())}),!1);const s=(({envManager:e,wuid:t})=>{var r;return{wuid:t,env:e.get("COBROWSING_SCRIPT_ENV")||(r=e.get("COBROWSING_SCRIPT_URL"),v()(b()(1,"prod"),S()("-"),b()(0,""),S()("."),b()(2,""),S()("/"))(r))||e.get("COBROWSING_LOCAL")&&"local",appId:e.get("COBROWSING_APP_ID")}})(r);void 0!==o&&(s.disableStream=o),(0,f.initialize)(s,n)})),F},deps:{wuid:E.$2,envManager:i.vC},conditions:{onlyBrowser:!0}}),B=32,H="a-",$="n-",J=()=>(0,f.send)(f.SendMessageTypes.STOP_RECORD),Y=(e,t)=>{if(J(),window.removeEventListener("beforeunload",J),!C()(e))return(0,f.send)(f.SendMessageTypes.START_RECORD,e),(0,f.send)(f.SendMessageTypes.CUSTOM_DATA,{name:"appId",value:t}),window.addEventListener("beforeunload",J),e},G=(0,o.PH)({name:"startFullstoryAction",fn:(e,t,{cookieManager:r,appInfo:n,wuid:o})=>{const s=(({context:e,sessionId:t,wuid:r})=>{if(!t||!r)return"";const{authPrefix:n=H,anonPrefix:o=$,maxUidLen:s=B}=(e=>e.getStore(N).getState())(e),i=(e=>(0,g.QO)(e.getStore("roles").getState()))(e);return v()(R()(0,s),O()(i?n:o),O()(t.slice(0,12)))(r)})({context:e,sessionId:r.get(M.wD),wuid:o});return Y(s,"pfphome")},deps:{cookieManager:P.T,appInfo:s.Qo,wuid:E.$2},conditions:{onlyBrowser:!0}});var K;(0,o.PH)({name:"resumeFullstoryAction",fn:(e,t,{appInfo:r})=>Y(t,"pfphome"),deps:{appInfo:s.Qo},conditions:{onlyBrowser:!0}}),function(e){e.Hide="hide",e.Disconnect="disconnect",e.Error="error",e.Show="show",e.Connect="connect",e.NoConnection="no_connection",e.Connected="connected",e.Deny="deny",e.DisconnectError="disconnect_error",e.DisconnectNoConnection="disconnect_no_connection"}(K||(K={}));const z=()=>{var e,t;null===(t=null===(e=window)||void 0===e?void 0:e.cobrowsing)||void 0===t||t.closeAllStreams()},W=({cobrowsing:e,roles:t})=>{const r=(0,g.QO)(t),n=r?"authorized":"anonymous";return Object.assign({},e,{cobrowsingEnabled:p()(["cobrowsingEnabled",n],!1,e),fullstoryEnabled:p()(["fullstoryEnabled",n],!1,e),isAuth:r})},Q=l().lazy((()=>r.e("cobrowsing-ui").then(r.bind(r,23318))));function Z(){const e=(()=>{var e;const{cobrowsingEnabled:t,fullstoryEnabled:r,isCobrowsingReady:n,cobrowsingState:o,loaded:s,isAuth:i}=(0,c.v9)([N,{store:"roles",optional:!0}],W),a=(0,h.Z)(o),[l,d,p]=(0,c.ol)([U,q,G]),[g,m]=(0,u.useState)(!0),[v,y]=(0,u.useState)(),b=(0,u.useCallback)((()=>setTimeout((()=>{/^disconnect/.test(a.current)&&l(K.Hide)}),1e4)),[a,l]),_=(0,u.useCallback)((()=>setTimeout((()=>{a.current===K.Error&&(m(!0),l(K.DisconnectError),b())}),3e3)),[a,b,l]),S=(0,u.useMemo)((()=>e=>{switch(e.type){case f.ReceiveMessageTypes.SESSION_REQUEST:m(!1),l(K.Show);break;case f.ReceiveMessageTypes.SESSION_CLOSE:m(!0),l(K.Disconnect),b();break;case f.ReceiveMessageTypes.CONNECTION_LOST:m(!1),l(K.Error),(0,f.send)(f.SendMessageTypes.SESSION_CLOSE,"handleConnectionLost"),_();break;case f.ReceiveMessageTypes.BAD_CONNECTION:l(K.Connect);break;case f.ReceiveMessageTypes.GOOD_CONNECTION:l(K.Connected);break;case f.ReceiveMessageTypes.NO_CONNECTION:m(!1),l(K.NoConnection);break;case f.ReceiveMessageTypes.MARK_AREA:y(e.data)}}),[_,b,l]),E=(0,u.useMemo)((()=>({handleApproveClick:()=>{m(!0),l(K.Connect),(0,f.send)(f.SendMessageTypes.SESSION_CONFIRMATION,"handleApproveClick")},handleConnectedClick:()=>{m(!1)},handleOnDenyClick:()=>{m(!0),l(K.Deny),(0,f.send)(f.SendMessageTypes.SESSION_REFUSE,"handleOnDenyClick"),b()},handleOnDisconnectClick:()=>{m(!0),l(K.Disconnect),(0,f.send)(f.SendMessageTypes.SESSION_CLOSE,"handleOnDisconnectClick"),b()},handleOnCloseClick:()=>{m(!0)},handleOnCloseError:()=>{m(!0),l(K.DisconnectError),b()},handleNoConnectionRefresh:()=>{m(!0),l(K.DisconnectNoConnection),(0,f.send)(f.SendMessageTypes.SESSION_CLOSE,"handleNoConnectionClose"),b()}})),[b,l]);return(0,u.useEffect)((()=>{s&&t&&d({onMessage:S,disableStream:!i}).then((()=>r&&p())).catch((()=>{}))}),[S,t,r,s,d,p,i]),(0,u.useEffect)((()=>z),[]),(null===(e=window)||void 0===e?void 0:e.cobrowsing)&&n?{collapsed:g,markData:v,cobrowsingState:null!=o?o:"hide",handlers:E}:{collapsed:g,handlers:E,cobrowsingState:"hide"}})(),{handlers:t,collapsed:r,cobrowsingState:n,markData:o}=e||{};return n&&"hide"!==n&&l().createElement(u.Suspense,{fallback:""},l().createElement(Q,{handlers:t,collapsed:r,markData:o,cobrowsingState:n}))}Z.displayName="Cobrowsing";const X=(0,x.V3)("SEND_CUSTOM_DATA");let ee=class{};ee=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:i.Ym,multi:!0,useValue:[V]},{provide:a.OQ,useValue:{components:{cobrowsing:Z}},multi:!0},{provide:X,useValue:function(...e){return(0,f.send)(f.SendMessageTypes.CUSTOM_DATA,...e)}}]})],ee)},32494:function(e,t,r){"use strict";r.d(t,{J:function(){return y}});var n=r(65058),o=r(31283),s=r(19652),i=r(85354),a=r(87915),c=r(65991),u=r(77384),l=r(26215),d=r(88085),p=r(56322),h=r.n(p),f=r(37384),g=r.n(f),m=r(35759),v=r.n(m);let y=class{};y=(0,n.__decorate)([(0,o.Yl)({providers:[(0,s.JJ)({provide:i.sQ,multi:!0,scope:s.sX.REQUEST,useValue:[{key:"DCO_SERVICE",optional:!0,dehydrate:!1}]}),(0,s.JJ)({provide:u.eZ,multi:!0,scope:s.sX.REQUEST,useFactory:({cookieManager:e,tracking:t,dcoClient:r,routesFallback:n,envManager:o,domainResolve:s})=>i=>async a=>{const c=r.getDcoRequestParams({appId:a.appId,service:o.get("DCO_SERVICE")});let u;n&&(i(a).then((({route:e,payload:t})=>{e&&("string"!=typeof t&&"page"in t&&t.page.matchedUrlParams?n.set(Object.assign({},e,{alias:a.url.pathname}),{appId:a.appId}):n.set(e,{appId:a.appId}))})).catch((()=>{})),u=n.get(a.url.pathname,{appId:a.appId}));const[l,d]=await Promise.all([i(Object.assign({},a,{shouldSetFallback:!1,requestOptions:Object.assign({},a.requestOptions,{headers:c.headers,query:c.payload,cache:!!(u&&u.config&&u.config.disableDco)})})),s()]);if(!g()(l.payload))return l;const p=r.getUserResponseParams({dcoResponseHeaders:l.headers,dcoResponse:l.payload});if(p.cookieSet.forEach((t=>e.set(t))),"trackingData"in p&&t&&t.extend(p.trackingData),"redirectUrl"in p){const e=v()(new RegExp(`^https://(?:${d}|${d.replace(/^www\./,"")})`),"",p.redirectUrl);return Object.assign({},l,{payload:Object.assign({},l.payload,{redirectUrl:e}),route:Object.assign({},l.route,{name:"dco-redirect",redirect:{url:e,code:+p.redirectCode,preserveQuery:!1}})})}return l},deps:{cookieManager:a.T,tracking:{token:c.t3,optional:!0},dcoClient:"dcoClient",routesFallback:{token:u.c3,optional:!0},envManager:i.vC,domainResolve:u.xO}}),(0,s.JJ)({provide:"dcoClient",scope:s.sX.REQUEST,useFactory:({logger:e,requestManager:t,store:r})=>{const n=h()((e=>Array.isArray(e)?e.join(","):e),t.getHeaders());return new l.x({logger:e,pageUrl:t.getUrl(),userHeaders:n,pageReferrer:(0,d.l)(t.getHeader("referer"))})},deps:{logger:i.Fp,store:i.kR,requestManager:i.Gu}})]})],y)},88085:function(e,t,r){"use strict";r.d(t,{l:function(){return u}}),r(72137);var n=r(68072),o=r.n(n),s=r(52468),i=r.n(s),a=r(81934);const c="https://secure.tcsbank.ru/acs/auth/finish.do",u=o()(((e="")=>i()(c,e)?c:e),a.l0)},37392:function(e,t,r){"use strict";r.d(t,{nM:function(){return a},j5:function(){return c},rF:function(){return i},eW:function(){return s},Bv:function(){return o},q2:function(){return u},g3:function(){return l}});var n=r(19652);(0,n.V3)("EVENTEA_LOADER_HANDLE_ERROR"),(0,n.V3)("EVENTEA_LOADER_TIMEOUT"),(0,n.V3)("EVENTEA_PROJECT_ROUTING",{multi:!0}),(0,n.V3)("EVENTEA_PROJECT_LOADERS"),(0,n.V3)("EVENTEA_LOADER_REQUEST");const o=(0,n.V3)("EVENTEA_TOKEN"),s=(0,n.V3)("EVENTEA_PROJECT_HANDLERS",{multi:!0}),i=(0,n.V3)("EVENTEA_ROUTING"),a=(0,n.V3)("EVENTEA_ERROR_HANDLERS"),c=(0,n.V3)("EVENTEA_DEFAULT_LOG_HANDLER"),u=(0,n.V3)("EVENTEA_DEFAULT_TRACKING_HANDLER"),l=(0,n.V3)("EVENTEA_TWT_DATA_HANDLER")},77384:function(e,t,r){"use strict";r.d(t,{DG:function(){return o},xO:function(){return s},c3:function(){return a},eZ:function(){return i}});var n=r(19652);const o=(0,n.V3)("router appIdResolve"),s=(0,n.V3)("router domainResolve"),i=(0,n.V3)("router routeResolveExtend",{multi:!0}),a=((0,n.V3)("router configMigration",{multi:!0}),(0,n.V3)("router fallback"));(0,n.V3)("router enableAutoDomainResolve")},46819:function(e,t){"use strict";t.Z={routes:{},pages:{}}},31283:function(e,t,r){"use strict";r.d(t,{Yl:function(){return f},PH:function(){return O},ri:function(){return b},Zv:function(){return w}});var n=r(19652),o=r(70510),s=r(25919),i=r(85354),a=r(19777),c=r.n(a),u=r(36552),l=r.n(u),d=r(22795),p=r.n(d);const h="_module_parameters_";function f({providers:e,imports:t,deps:r={}}){return n=>Object.assign(n,{[h]:{providers:e,deps:r,imports:t,name:n.name,id:`${n.name}-${Math.random()}`}})}const g=e=>!1!==Boolean(e)&&(h in e||"mainModule"in e&&g(e.mainModule)),m=e=>!!e.mainModule,v=e=>{let t;if(m(e)){const r=e.mainModule[h];t=Object.assign({},r),t.providers=t.providers.concat(e.providers||[]);const n=t.imports||[];t.imports=n.concat(e.imports||[])}else t=e[h];return t};class y{constructor({name:e,modules:t=[],bundles:r={},actions:s=[],providers:i}){this.di=(0,n.fH)(),this.modulesToResolve=new Set,this.walkOfProviders(function(e,t,r,s){return[{provide:o.Qo,scope:n.sX.SINGLETON,useValue:{appName:e}},{provide:o.om,scope:n.sX.SINGLETON,useValue:t},{provide:o.I7,scope:n.sX.SINGLETON,useValue:r,multi:!0},{provide:o.mJ,scope:n.sX.SINGLETON,useValue:s}]}(e,r,s,t)),this.walkOfModules(t),i&&this.walkOfProviders(i)}async initialization(e,t="init"){const r=this.di.get({token:i.Fp,optional:!0}),n=null==r?void 0:r("tramvai-core"),s=this.di.get({token:o.S9,optional:!0});if(!s)throw new Error("`COMMAND_LINE_RUNNER_TOKEN` is not defined, have you added `@tramvai/module-common` to your dependency list?");null==n||n.warn({event:"tramvai-app-init",message:"Initializing. Run CommandLineRunner."});const a=await s.run(e,t);return null==n||n.warn({event:"tramvai-app-init",message:"CommandLineRunner executed successfully. Resolving modules."}),this.resolveModules(),null==n||n.warn({event:"tramvai-app-init",message:"Modules resolved successfully. Tramvai App initialized"}),a}resolveModules(){this.modulesToResolve.forEach((e=>{new e(this.resolveModuleDeps(e))}))}resolveModuleDeps(e){const{deps:t}=e[h];if(t)return this.di.getOfDeps(t)}walkOfProviders(e){e.forEach((e=>{this.di.register(e)}))}walkOfModules(e){(e=>{const t=[],r=new Set,n=new Set,o=e=>{if(!g(e))throw new Error("В списке модулей приложения передан некорректный модуль");const s=v(e);r.has(s.id)||(r.add(s.id),n.add(s.name),s.imports&&s.imports.forEach((e=>{o(e)})),t.push(e))};return e.forEach((e=>{o(e)})),t})(e).forEach((e=>{const t=v(e);this.modulesToResolve.add(m(e)?e.mainModule:e),this.walkOfProviders(t.providers)}))}}function b(e){let t;try{t=new y(e)}catch(e){throw e.appCreationError=!0,e}return t.initialization("client").then((()=>t))}const _=(e,t)=>Array.isArray(e)&&Array.isArray(t)?c()(e,t):"object"==typeof e&&"object"==typeof t?l()(_,e,t):t,S=l()(_),E=e=>{if(!e||!e.length)return{};const t=e.map((e=>S(E(e.presets),p()(["presets"],e))));return 1===t.length?t[0]:S(...t)};function w(e){let t={};return e.presets&&(t=E(e.presets)),S(t,e)}function O(e){const t=Object.assign(e.fn,{[s.d]:e});return e.conditions||(e.conditions={}),t}},57860:function(e,t,r){"use strict";r.d(t,{s:function(){return o},I:function(){return n}});class n{get(e,t,r){return this.request(Object.assign({path:e},t,r,{method:"GET"}))}post(e,t,r){return this.request(Object.assign({path:e,requestType:"json"},t,r,{method:"POST"}))}put(e,t,r){return this.request(Object.assign({path:e,requestType:"json"},t,r,{method:"PUT"}))}delete(e,t,r){return this.request(Object.assign({path:e},t,r,{method:"DELETE"}))}}class o extends n{constructor(e){super(),this.httpClient=e}request(e){return this.httpClient.request(e)}}},65991:function(e,t,r){"use strict";r.d(t,{dZ:function(){return E},t3:function(){return b},Ip:function(){return D}});var n=r(65058),o=r(31283),s=r(19652),i=r(70510),a=r(85354);var c=r(83964),u=r(66938),l=r(40661),d=r(94970),p=r(82036),h=r(44444),f=r.n(h),g=r(68368);(0,s.V3)("DPP_LANGUAGE_CONFIGURATION",{multi:!0}),(0,s.V3)("DPP_BANNER_STRUCTURE");const m=(0,s.V3)("DPP_SERVICE");(0,s.V3)("DPP_IS_MOBILE_BANNER");var v=r(87915),y=r(19622);const b=(0,s.V3)("analytics"),_=(0,s.V3)("analyticsConfig"),S=(0,s.V3)("analyticsTagManagerContainer"),E=(0,s.V3)("analyticsEventeaReady"),w=(0,g.yM)("Set analytics config"),O=(0,g.Lq)("analytics",{}).on(w,((e,t)=>Object.assign({},e,{config:t}))),k=[{provide:a.Ym,multi:!0,useValue:[O]},(0,s.JJ)({provide:i.Bi.resolvePageDeps,multi:!0,useFactory:({tracking:e,pageService:t})=>function(){e.extend(f()("analytics",{},t.getMeta()))},deps:{tracking:b,pageService:p.Y9}}),(0,s.JJ)({provide:_,useFactory:({store:e})=>{const{config:t={}}=e.getState(O);return t},deps:{store:a.kR}})],C="userType",T={Visitor:0,"Client-Light":10,Applicant:20,"Client-Heavy":30},R=e=>T[e]||0;let P=!1;const M=({tracking:e,cookies:t,logger:r,store:n})=>{const o=r("analytics:tracking:user-type"),{roles:s}=n.getState(),i=t.get(C)||"Visitor",a=R(i),c=(e=>{let t;switch(!0){case(0,y.o2)(e):t="Client-Light";break;case(0,y.C5)(e):t="Client-Heavy";break;default:t="Visitor"}return t})(s),u=R(c);let l=i;u>=a&&(l=c,((e,t,r)=>{t.debug({message:"New user level",userType:r}),e.set({name:C,value:r,expires:63072e3,noSubdomains:!0})})(t,o,c)),e.extend({userType:l,userStatus:(0,y.QO)(s)?"Logged In":"Not Logged In"}),!P&&u>a&&(0,y.QO)(s)&&(P=!0,e.event("ibSuccess"))},x={essentials:"Essential",functional:"Functionality",analytics:"Statistics",marketing:"Marketing"},N=[{provide:i.Bi.resolvePageDeps,useFactory:({store:e,tracking:t,logger:r,cookies:n})=>()=>((({tracking:e,cookies:t,logger:r,store:n})=>{let{roles:o}=n.getState();o&&(M({tracking:e,cookies:t,logger:r,store:n}),n.subscribe((()=>{const{roles:s}=n.getState();s!==o&&(o=s,M({tracking:e,cookies:t,logger:r,store:n}))})))})({store:e,tracking:t,logger:r,cookies:n}),Promise.resolve()),deps:{store:a.kR,tracking:b,logger:a.Fp,cookies:v.T},multi:!0},(0,s.JJ)({provide:i.Bi.customerStart,multi:!0,deps:{dppService:{token:m,optional:!0},tracking:b},useFactory:({dppService:e,tracking:t})=>async()=>{if(!e)return;const r=await t.callUtil("getConsentVault");if(!r)return;const n=e.subscribeToAccept((async e=>{r.update(((e,t)=>Object.entries(e).reduce(((e,[r,n])=>(e[t[x[r]]]=n,e)),{}))(e,r.categories),"keep"),n()}))}})],I={analytics:b};var A;(0,o.PH)({name:"pushTrack",fn(e,t,{analytics:r}){const n="string"==typeof t?{pageAction:t}:t;r.event("pushTrack",n)},deps:I,conditions:{always:!0,onlyBrowser:!0}});let D=A=class{static forRoot({atmContainer:e}){return{mainModule:A,providers:[{provide:S,useValue:e}]}}};D=A=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:a.sQ,multi:!0,useValue:[{key:"TINKOFF_API",dehydrate:!1,validator:(0,d.v7)([d.CB,(0,d.pn)("/")])},{key:"CONFIG_API",dehydrate:!1,validator:(0,d.v7)([d.CB,(0,d.pn)("/")])},{key:"APP_VERSION",optional:!0,dehydrate:!0}]},(0,s.JJ)({provide:b,useFactory:({logger:e,store:t,atmContainer:r,eventeaReady:n,appInfo:o,envManager:s})=>{var i,a,d;const{config:p={}}=t.getState(O),h=window.twtConfig=window.twtConfig||{};h.logger=e("analytics:tracking");const f=null===(i=null==p?void 0:p.atm)||void 0===i?void 0:i.containers;f&&(h.atmContainers=f);const g=r||(null===(d=null===(a=null==p?void 0:p.atm)||void 0===a?void 0:a.appToContainerMap)||void 0===d?void 0:d[o.appName]);g&&(h.atmContainerName=g);const m=new u.Z;m.resolve((0,l.A)());const v={appName:o.appName,appVersion:s.get("APP_VERSION"),proxyVersion:c.i8,tramvaiVersion:"1.84.2",eventeaReady:n};m.event=(e,t)=>(m.callUtil("tramSendEvent",e,t,v),m);const y=m.extend;return m.extend=e=>{const t=y.call(m,e);return m.callUtil("tramPostData",e,v),t},m},deps:{logger:a.Fp,store:a.kR,atmContainer:{token:S,optional:!0},eventeaReady:{token:E,optional:!0},envManager:a.vC,appInfo:i.Qo}}),(0,s.JJ)({provide:"router afterNavigateHooks",multi:!0,useFactory:({tracking:e})=>()=>{e.updateLocation()},deps:{tracking:b}}),...k,...N]})],D)},41841:function(e,t,r){"use strict";r.d(t,{a0:function(){return De},Od:function(){return Te},eZ:function(){return Me}});var n=r(61973),o=r(65058),s=r(31283),i=r(19652),a=r(70510),c=r(70324),u=r(8716),l=r(85354),d=r(16724),p=r.n(d),h=r(68072),f=r.n(h),g=r(53301),m=r.n(g),v=r(80927),y=r.n(v),b=r(7744),_=r(39134),S=r(40266),E=r(69454),w=r(419),O=r.n(w),k=r(33008),C=r(8233),T=r(57860);const R=["logger","name","disableCache","enableCircuitBreaker","createCache","cacheTime","defaultTimeout","validator","errorValidator","errorModificator","circuitBreakerOptions","getCacheKey","lruOptions","agent"],P=["modifyRequest","modifyResponse","modifyError"],M=["method","body","requestType"];function x(e,t,r){if(null==r?void 0:r.replace)return Object.assign({},e,t);const n=Object.assign({},e,t,{query:Object.assign({},e.query,t.query),headers:Object.assign({},e.headers,t.headers)}),o=r=>{e[r]&&t[r]&&(n[r]=f()(t[r],e[r]))};return o("modifyRequest"),o("modifyResponse"),o("modifyError"),n}class N extends T.I{constructor({options:e,tinkoffRequest:t}){super(),this.options=e,this.tinkoffRequest=t}async request(e){const t=x(this.options,e),{modifyRequest:r,modifyResponse:o,modifyError:s}=t,i=(0,n.Z)(t,P),a=r?r(i):i,{method:c,body:u,requestType:l}=a,d=(0,n.Z)(a,M);c&&(d.httpMethod=c),u&&(d.payload=u),l&&(d.type=l);const p=this.tinkoffRequest(d);try{const e=await p,t={payload:e,status:(0,w.getStatus)(p),headers:(0,w.getHeaders)(p)};return o?o(t):t}catch(e){const t=p.getExternalMeta(),r=Object.assign(e,{__meta:t});throw s?s(r,d):r}}fork(e={},t={}){return new N({options:x(this.options,e,t),tinkoffRequest:this.tinkoffRequest})}}var I=r(18299),A=r(86247),D=r.n(A);const j=e=>e=>e,L=e=>{if(e.originalMessage)return e;const t=e.message,r=(e=>!0===(/network timeout at/i.test(e)||/request timed out/i.test(e))?"Время истекло. Обновите страницу и повторите попытку.":"Что-то пошло не так. Мы уже решаем проблему. Попробуйте снова через несколько минут.")(t);return Object.assign(e,{message:r,originalMessage:t})},V={defaultTimeout:3e4};class U extends T.s{constructor({httpClientFactory:e,baseUrl:t}){super(e({name:"papi",baseUrl:t,validator:({response:e})=>{if(!e.resultCode||!e.payload)return e.error||new Error(JSON.stringify(e))},modifyResponse:e=>Object.assign({},e,{payload:D()("payload",e.payload)})}))}}let F=class{};F=(0,o.__decorate)([(0,s.Yl)({providers:[(0,i.JJ)({provide:u.J2,scope:i.sX.SINGLETON,useClass:U,deps:{httpClientFactory:u.FB,baseUrl:I.a9}})]})],F);const q=(0,i.V3)("httpClient createCache");let B=class{};B=(0,o.__decorate)([(0,s.Yl)({imports:[F],providers:[(0,i.JJ)({provide:u.FB,useFactory:({logger:e,envManager:t,appInfo:r,requestManager:o,headersList:s,createCache:i,tinkoffRequestRegistry:a,agent:c,disableCircuitBreaker:u=!1})=>r=>{if(!r.name)throw Error('Необходимо передать уникальное поле "name" для экземпляра HTTP клиента!');const o=t.get("HTTP_CLIENT_CACHE_DISABLED"),s=t.get("HTTP_CLIENT_CIRCUIT_BREAKER_DISABLED"),l=x(Object.assign({logger:e,agent:c,method:"GET",createCache:i?e=>i("memory",e):void 0,modifyRequest:f()(j(),(e=>e)),modifyError:L,circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10}},V),r);p()(o)||(l.disableCache=!!o),u&&(l.enableCircuitBreaker=!1),p()(s)||(l.enableCircuitBreaker=!s),a.has(l.name)||a.set(l.name,function(e){const{logger:t,name:r,disableCache:o,enableCircuitBreaker:s,createCache:i,cacheTime:a=3e4,defaultTimeout:c,validator:u,errorValidator:l,errorModificator:d,circuitBreakerOptions:p={},getCacheKey:h,lruOptions:f={max:1e3,maxAge:a},agent:g}=e,v=(0,n.Z)(e,R),T=(t&&t(`${r}:initialization`),[]);return T.push({init:(e,t)=>{t({request:Object.assign({timeout:c},e.getRequest())})}}),T.push((0,k.Z)({baseUrl:v.baseUrl,transform:({baseUrl:e,path:t,url:r})=>{if(r)return r;if(e&&t){const r="/"===e.slice(-1),n="/"===t.slice(0,1),o=!r;return n&&(t=t.substring(1)),`${e}${o?"/":""}${t}`}return e||t||""}})),T.push((0,b.Z)({logger:t,name:r,showQueryFields:!0,showPayloadFields:!0})),T.push((0,S.Z)({shouldExecute:!o,lruOptions:f,allowStale:!0,getCacheKey:h,memoryConstructor:i})),T.push((0,_.Z)(h?{getCacheKey:h}:void 0)),s&&T.push((0,C.Z)(Object.assign({isSystemError:m()(w.isServerError,w.isNetworkFail)},p))),T.push({error:(e,t)=>{const r=e.getState(),n=null==d?void 0:d(r);return n?t({error:n}):t()}}),(u||l)&&T.push((0,E.Z)({validator:u,errorValidator:l,allowFallback:!0})),T.push(O()({agent:g||void 0})),y()(T)}(l));const d=a.get(l.name);return new N({options:l,tinkoffRequest:d})},deps:{logger:l.Fp,envManager:l.vC,appInfo:a.Qo,createCache:q,tinkoffRequestRegistry:"tinkoffRequestRegistry",requestManager:{token:l.Gu,optional:!0},headersList:{token:u.s,optional:!0},agent:{token:u.zn,optional:!0},disableCircuitBreaker:{token:u.pW,optional:!0}}}),(0,i.JJ)({provide:u.bV,useFactory:({factory:e})=>e({name:"http-client",disableCache:!0}),deps:{factory:u.FB}}),(0,i.JJ)({provide:l.sQ,useValue:[{key:"HTTP_CLIENT_CACHE_DISABLED",optional:!0,dehydrate:!1},{key:"HTTP_CLIENT_CIRCUIT_BREAKER_DISABLED",optional:!0,dehydrate:!1}],multi:!0}),(0,i.JJ)({provide:"tinkoffRequestRegistry",scope:i.sX.SINGLETON,useFactory:()=>new Map}),(0,i.JJ)({provide:q,scope:i.sX.SINGLETON,useFactory:({createCache:e})=>e,deps:{createCache:l.xC}}),(0,i.JJ)({provide:u.s,multi:!0,useValue:["x-request-id"]})]})],B);var H=r(1153);class $ extends T.s{constructor({httpClient:e}){super(e),this.pagesIntegrationApi="pages/api/integration/v1"}buildJsonRpcParams(e,t){return{path:`${this.pagesIntegrationApi}/${e}`,method:"POST",requestType:"json",body:{method:e,params:t,id:"null",jsonrpc:"2.0"}}}getRoutesByDomainAndAppId(e){return this.request(this.buildJsonRpcParams("getRoutesByDomainAndAppId",e))}}class J extends T.s{constructor({httpClient:e}){super(e)}async getResources(e,t={}){const{query:r={}}=t,{payload:n}=await this.request(Object.assign({},t,{path:"resources",query:Object.assign({},r,{name:e})}));return n||{}}}class Y{constructor({httpClient:e}){this.httpClient=e}getResponse(e,t){return this.httpClient.request(Object.assign({},t,{path:`${Y.pageEnrichmentApi}/getResponse`,query:Object.assign({},null==t?void 0:t.query,e)}))}getPreview(e,t){return this.httpClient.request(Object.assign({},t,{path:`${Y.pageEnrichmentApi}/getPreview`,query:Object.assign({},null==t?void 0:t.query,e)}))}}Y.pageEnrichmentApi="web-gateway";var G=r(44444),K=r.n(G),z=r(37384),W=r.n(z),Q=r(52165),Z=r.n(Q),X=r(87915),ee=r(78678),te=r(88430),re=r.n(te),ne=r(70905),oe=r.n(ne),se=r(10074),ie=r.n(se),ae=r(13016),ce=r.n(ae),ue=r(34676),le=r.n(ue),de=r(94970);const pe=["query","method","serverGetSession","roles"],he=["query","name"],fe=["query","sessionid","wuid"],ge={cacheTime:6e5,defaultTimeout:3e4},me=e=>Object.assign({},e,{payload:e.payload.response||e.payload.result||Z()(["error","message"],e.payload)}),ve=e=>Object.assign({},e,{payload:K()("value",{},me(e).payload)}),ye=({request:e})=>{var t,r;return null!==(r=null===(t=e.path)||void 0===t?void 0:t.split("/")[0])&&void 0!==r?r:""};let be=class{};be=(0,o.__decorate)([(0,s.Yl)({providers:[{provide:H.fg,useFactory:({factory:e,envManager:t})=>e({baseUrl:t.get("CONFIG_API"),circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10,isSystemError:()=>!0,getKey:ye}}),deps:{factory:H.O7,envManager:l.vC}},{provide:H.l4,useFactory:({factory:e,envManager:t})=>{const r=e({name:"admin-resources-api",baseUrl:t.get("RESOURCES_API"),modifyResponse:ve});return new J({httpClient:r})},deps:{factory:H.O7,envManager:l.vC}},{provide:H.w1,useFactory:({factory:e,envManager:t})=>{const r=e({name:"admin-integration-api",baseUrl:t.get("INTEGRATION_CONFIG_API")});return new $({httpClient:r})},deps:{factory:H.O7,envManager:l.vC}},(0,i.JJ)({provide:H.O7,useFactory:({factory:e,optionsFactory:t})=>r=>e(Object.assign({},t(r),r)),deps:{factory:u.FB,optionsFactory:H.DL}}),(0,i.JJ)({provide:H.DL,useValue:e=>Object.assign({},ge,{name:"admin-api",validator:({request:e,response:t})=>{if(!t||!t.response&&!t.result)return W()(t)?Object.assign(new Error,W()(t.error)?t.error:{path:e.path,response:t||null}):new Error(JSON.stringify(t))},errorValidator:({request:e,response:t,error:r})=>(404===r.status||400===r.status)&&!(!t||!t.error),errorModificator:({error:e})=>Object.assign(e,{errorId:"CONFIG_REQUEST_ERROR"}),modifyResponse:me,enableCircuitBreaker:!0,circuitBreakerOptions:{failureThreshold:75,minimumFailureCount:10,isSystemError:()=>!0}})}),{provide:H.xs,useFactory:({httpClient:e})=>new Y({httpClient:e}),deps:{httpClient:{token:H.fg,optional:!0}}}]})],be);const _e={expired:re()(["resultCode"],"SESSION_IS_ABSENT"),notAllowed:re()(["resultCode"],"INSUFFICIENT_PRIVILEGES"),confirmation:oe()([re()(["resultCode"],"WAITING_CONFIRMATION"),ie()("confirmations"),ie()("confirmationData")])},Se=re()(["resultCode"],"OK"),Ee={defaultTimeout:6e4},we=e=>Object.assign({},e,{payload:e.payload.payload});class Oe extends T.s{constructor({httpClient:e,context:t,hooks:r,apiOriginService:n,cookieManager:o,wuid:s,sessionCookieName:i}){super(e),this.context=t,this.hooks=r,this.customizeParams=f()((e=>t=>{const r=e.getWhen({requestOrigin:t.origin});return Object.assign({},t,{query:Object.assign({origin:r},t.query)})})(n),(({cookieManager:e,sessionCookieName:t})=>r=>r.withoutSession?r:Object.assign({},r,{query:Object.assign({sessionid:e.get(t||"psid")},r.query)}))({cookieManager:o,sessionCookieName:i}),(e=>t=>t.withoutSession||t.withoutWuid?t:Object.assign({},t,{query:Object.assign({wuid:e},t.query)}))(s))}request(e){const{path:t,confirmHide:r,confirmSSR:n=!1,confirmViewType:o=null,onConfirm:s=ce()}=e;return this.httpClient.request(this.customizeParams(e)).then((e=>_e.confirmation(e.payload)?this.hooks.runPromiseHooks("confirm",this.context)({viewType:o,onConfirmShowed:s,confirmHide:r,confirmSSR:n,data:e.payload}).then(le()("payload")):e)).catch((r=>{switch(!0){case"session_status"!==t&&_e.expired(r.response):return this.hooks.runPromiseHooks("sessionAbsent",this.context)({sessionExpired:!0,useCache:!1});case _e.notAllowed(r.response):return this.hooks.runPromiseHooks("notAllowed",this.context)(void 0).then((()=>{throw new Error("Not Allowed")}));default:return this.hooks.runPromiseHooks("unknown",this.context,e)(r).then((()=>{throw r}))}}))}}let ke=class{};ke=(0,o.__decorate)([(0,s.Yl)({providers:[(0,i.JJ)({provide:H.JB,useFactory:({factory:e,envManager:t,appInfo:r,context:n,hooks:o,apiOriginService:s,cookieManager:i,wuid:a,sessionCookieName:c})=>{const u=e({name:"tinkoff-api",baseUrl:t.get("TINKOFF_API"),disableCache:!0,query:{appName:r.appName,appVersion:t.get("APP_VERSION")},modifyResponse:e=>_e.confirmation(e.payload)?e:Object.assign({},e,{payload:e.payload.payload})},{isResponseValid:e=>Se(e)||_e.confirmation(e)});return new Oe({httpClient:u,context:n,hooks:o,apiOriginService:s,cookieManager:i,wuid:a,sessionCookieName:c})},deps:{factory:H.iu,envManager:l.vC,appInfo:a.Qo,hooks:l.vy,requestManager:l.Gu,context:l.l6,apiOriginService:H.JS,cookieManager:X.T,wuid:c.$2,sessionCookieName:{token:ee.sV,optional:!0},headersList:{token:u.s,optional:!0}}}),(0,i.JJ)({provide:H.iu,useFactory:({factory:e,optionsFactory:t})=>(r,n)=>e(Object.assign({},t(r,n),r)),deps:{factory:u.FB,optionsFactory:H.Z1}}),(0,i.JJ)({provide:H.Z1,useValue:({modifyResponse:e=we,disableCache:t},{isResponseValid:r=Se}={})=>Object.assign({name:"common-api",validator:({request:e,response:t})=>{if(!r(t))return W()(t)?Object.assign(new Error,W()(t.error)?t.error:{path:e.path,response:t||null}):new Error(JSON.stringify(t))},errorModificator:({error:e})=>Object.assign(e,{errorId:"COMMON_API_REQUEST_ERROR"}),modifyRequest:e=>{const{query:r={},method:o="GET",serverGetSession:s=!1,roles:i}=e,a=(0,n.Z)(e,pe),c=r.sessionid+JSON.stringify(i),u=Object.assign({method:o},a,{query:r,additionalCacheKey:c});if(!t){const{cache:e="POST"!==o,cacheForce:t}=u,r=!0;u.cache=r&&e,u.cacheForce=r&&t}return u},modifyResponse:e,enableCircuitBreaker:!0},Ee)})]})],ke);const Ce=e=>{const t=Object.assign({},e);return e.method&&(t.path=e.method,delete t.method),e.httpMethod&&(t.method=e.httpMethod,delete t.httpMethod),e.payload&&(t.method&&"GET"!==t.method.toUpperCase()&&"DELETE"!==t.method.toUpperCase()?(t.body=e.payload,delete t.payload):(t.query=e.query?Object.assign({},e.query,e.payload):e.payload,delete t.payload)),t},Te=e=>e.then((e=>e.payload)),Re=({httpClient:e,customRequestParams:t={},adoptParams:r=Ce})=>{const n=e.fork(t);return{request:e=>{const t={},o=new Promise(((o,s)=>{const i=r(e);n.request(i).then((e=>(Object.assign(t,e.headers),o(e.payload)))).catch((e=>{s(e)}))}));return Object.assign(o,{__RESPONSE_HEADERS__:t})},getHeaders:e=>e.__RESPONSE_HEADERS__?e.__RESPONSE_HEADERS__:{}}},Pe=e=>{const{query:t={},name:r}=e,o=(0,n.Z)(e,he);return Object.assign({},o,{query:Object.assign({name:r},t)})},Me=e=>{const t=Ce(e),{query:r={},sessionid:o,wuid:s}=t,i=(0,n.Z)(t,fe),a={};return o&&(a.sessionid=o),s&&(a.wuid=s),Object.assign({},i,{query:Object.assign({},a,r)})};let xe=class{};xe=(0,o.__decorate)([(0,s.Yl)({providers:[{provide:H.yi,useFactory:({adminService:e})=>(({httpClient:e,customRequestParams:t={}})=>Re({httpClient:e,customRequestParams:t}))({httpClient:e}),deps:{adminService:H.fg}},{provide:H.yJ,useFactory:e=>(({httpClient:e,customRequestParams:t={}})=>Re({httpClient:e,customRequestParams:Object.assign({path:"resources",modifyRequest:Pe},t)}))({httpClient:e.adminResourcesService.httpClient}),deps:{adminResourcesService:H.l4}},{provide:H.To,useClass:class{constructor({tinkoffApiService:e}){this.tinkoffApiService=e}request(e){return Te(this.tinkoffApiService.request(Me(e)))}},deps:{tinkoffApiService:H.JB}}]})],xe);const Ne=f()((e=>D()("tinkoffApiOrigin",e)||Z()(["properties","tinkoffApiOrigin"],e)),Z()(["currentRoute","config"]),("router",e=>e.getState().router));class Ie{constructor({context:e,defaultOrigin:t}){this.chooseOriginFrom=({routeOrigin:e,defaultOrigin:t,requestOrigin:r})=>e||r||t,this.context=e,this.defaultOrigin=t}get(){return this.chooseOriginFrom({routeOrigin:Ne(this.context),defaultOrigin:this.defaultOrigin})}getWhen({requestOrigin:e}){return this.chooseOriginFrom({requestOrigin:e,routeOrigin:Ne(this.context),defaultOrigin:this.defaultOrigin})}}let Ae=class{};Ae=(0,o.__decorate)([(0,s.Yl)({imports:[c.Gi],providers:[{provide:l.sQ,useValue:[{key:"CONFIG_API",validator:(0,de.v7)([de.CB,(0,de.pn)("/")])},{key:"TINKOFF_API",validator:(0,de.v7)([de.CB,(0,de.pn)("/")])},{key:"RESOURCES_API",validator:(0,de.v7)([de.CB,(0,de.pn)("/")])},{key:"INTEGRATION_CONFIG_API",dehydrate:!1,validator:(0,de.v7)([de.CB,(0,de.pn)("/")])}],multi:!0},{provide:"defaultOrigin",useValue:"web,ib5,platform"},{provide:H.JS,useFactory:({context:e,defaultOrigin:t})=>new Ie({context:e,defaultOrigin:t}),deps:{context:l.l6,defaultOrigin:"defaultOrigin"}},(0,i.JJ)({provide:H.iQ,scope:i.sX.SINGLETON,useClass:class{constructor({papiService:e}){this.papiService=e}request(e){return Te(this.papiService.request(Ce(e)))}},deps:{papiService:u.J2}}),{provide:u.s,multi:!0,useValue:["x-b3-traceid","x-b3-spanid","x-b3-parentspanid","x-b3-sampled","x-b3-flags","x-ot-span-context"]}]})],Ae);let De=class{};De=(0,o.__decorate)([(0,s.Yl)({imports:[c.Gi,Ae,B,be,ke,xe],providers:[]})],De)},16544:function(e,t,r){"use strict";r.d(t,{kE:function(){return $},Af:function(){return B},zU:function(){return Y},zq:function(){return oe},_q:function(){return L}});var n=r(61973),o=r(65058),s=r(31283),i=r(19652),a=r(70510),c=r(85354),u=r(87915),l=r(82036),d=r(22054),p=r(67783);const h=e=>!e||e.length<=0?{}:e.reduce(((e,{type:t,component:r})=>(e[t]=r,e)),{}),f=e=>{if(!e||!e.startsWith("http"))return!0;const t=new URL(e);return t.host.endsWith(".tinkoff.ru")||t.host.endsWith(".tcsbank.ru")};var g=r(1153),m=r(8716),v=r(77384),y=r(78678),b=r(70324),_=r(85099);const S=(0,i.V3)("mgm_boxy");(0,i.V3)("mgm_default_product_code"),(0,i.V3)("custom_mgm_raw_data_provider");var E=r(37392),w=r(8757),O=r(19622),k=r(72322),C=r.n(k),T=r(44121),R=r.n(T),P=r(68368),M=r(46348),x=r(41841),N=r(65201);r(38418);const I=["npmVersion"],A=["getTree","createUse","createUseOptions","dival"],D=["createUseOptions"],j=["act"];function L(e){return Object.keys(e).reduce(((t,r)=>Object.assign({},t,{[r]:Object.keys(e[r]).reduce(((t,o)=>{let s=e[r][o];const{npmVersion:i}=s,a=(0,n.Z)(s,I);return void 0!==i&&(s=function(e){const{type:t,npmVersion:r,cdnPath:n}=e,o=null!=n?n:w.defaultBaseUrl,s=t.replace(/([A-Z])/g,"-$1").toLowerCase(),i=`${o}/${s}/${r}/${s}`;return{clientJs:`${i}.client.js`,serverJs:`${i}.server.js`,css:`${i}.css`,jsMap:`${i}.client.js.map`}}({type:r,npmVersion:i})),Object.assign({},t,{[o]:Object.assign({},a,s)})}),{})})),{})}const V=e=>({fatal:e.fatal.bind(e),error:e.error.bind(e),warn:e.warn.bind(e),info:e.info.bind(e),debug:e.debug.bind(e),trace:e.trace.bind(e)}),U=e=>e.child({name:"remote",defaults:{remote:{emitLevels:{fatal:!0,error:!0,warn:!0,info:!0,debug:!0,trace:!0}}}});function F(e){const t=e("boxy-di-logger");return Object.assign({},V(t),{remote:V(U(t)),createNamespace:e=>{const r=t.child(e);return Object.assign({},V(r),{remote:V(U(r))})}})}const q=(0,i.V3)("boxyService"),B=(0,i.V3)("boxyFallbackMappingExtension",{multi:!0}),H=(0,i.V3)("boxyCustomMappingExtension",{multi:!0}),$=(0,i.V3)("boxyBaseMappingExtension",{multi:!0}),J=(0,i.V3)("boxyLazy"),Y=(0,i.V3)("boxyRenderer"),G=(0,i.V3)("boxyMetrics"),K=(0,i.V3)("getDivalToken"),z=(0,i.V3)("boxy default bundle"),W=(0,i.V3)("boxyPubsub"),Q=(0,P.yM)("boxy ssr data set"),Z=(0,P.Lq)("boxy",{ssrData:{}}).on(Q,((e,t)=>t)),X=(new Set(["env","runtimeEnv","appName","appId","isAuthorized","isUserAuthorized"]),new Set(["showRegionPopup"])),ee=(0,i.V3)("BOXY_TINKOFF_API_ADAPTER"),te=(0,s.Zv)({name:"mainDefault",components:{pageDefault:()=>{const{BoxyRenderer:e}=(0,N.xq)({BoxyRenderer:Y});return R().createElement(e,null)}}}),re=[(0,i.JJ)({provide:ee,useClass:class{constructor({tinkoffApiService:e}){this.tinkoffApiService=e}request(e){return(0,x.Od)(this.tinkoffApiService.request((0,x.eZ)(e)))}},deps:{tinkoffApiService:g.JB}}),(0,i.JJ)({provide:q,useClass:class{constructor({fallbackMapping:e,customMapping:t,baseMappingExtensions:r,boxyLazy:n}){this.map={},this.fallbackMapping=h(e),this.customMapping=h(t),this.baseMappingExtension=r?r.reduce(((e,t)=>Object.assign(e,t)),{}):void 0,this.boxyLazy=n||void 0,this.cookieMapping=void 0}isValidMapping(e){return Object.keys(e).reduce(((t,r)=>t&&Object.keys(e[r]).reduce(((t,n)=>{const o=e[r][n];return t&&f(o.clientJs)&&f(o.serverJs)}),!0)),!0)}setCookieMapping(e){try{const t=JSON.parse(e);this.isValidMapping(t)&&(this.cookieMapping=t)}catch(e){}}registerMap(e){this.map=e}registerTree(e){this.tree=e}getTree(){return this.transformTree(this.tree)}transformTree(e){const t=this.baseMappingExtension||this.boxyLazy||this.cookieMapping;return e&&t?(0,p.mapTree)(e,(e=>{var t,r,n,o,s,i,a,c,u,l;const d=null===(r=null===(t=this.baseMappingExtension)||void 0===t?void 0:t[e.type])||void 0===r?void 0:r[e.version],p=null!==(s=null!==(n=null==d?void 0:d.lazy)&&void 0!==n?n:null===(o=e.render)||void 0===o?void 0:o.lazy)&&void 0!==s?s:null===(i=this.boxyLazy)||void 0===i?void 0:i.lazy;if(!d&&!e.render)return e;const h=null===(c=null===(a=this.cookieMapping)||void 0===a?void 0:a[e.type])||void 0===c?void 0:c[e.version];if((null===(u=this.boxyLazy)||void 0===u?void 0:u.lazy)||d||h){let t=null!=d?d:e.render;return(null===(l=e.render)||void 0===l?void 0:l.overwriteLocal)&&(t=e.render),Object.assign({},e,{render:Object.assign({},t,h,p&&{lazy:p})})}return e})):e}getMap(){return this.map}getComponent({type:e,render:t},r={},n={}){let o;if(t){const r="clientJs";o=r in t?t[r]:`${e}@${t.npmVersion}`}return n[e]||this.customMapping[e]||o&&this.map[o]||r[e]||this.fallbackMapping[e]}createUse(e={}){return t=>this.getComponent(t,e.fallbackBlockMap,e.customBlockMap)||e.notFound}},deps:{fallbackMapping:{token:B,multi:!0,optional:!0},customMapping:{token:H,multi:!0,optional:!0},baseMappingExtensions:{token:$,multi:!0,optional:!0},boxyLazy:{token:J,optional:!0}}}),(0,i.JJ)({provide:Y,useFactory:({boxyService:e,analyticsConfig:t,boxyMetrics:r,authenticator:o,pageService:s,getUnchargedDival:i,context:a,boxyPubsub:c})=>u=>{const{dival:l}=u,{ssrData:d}=(0,P.v9)(Z,(({boxy:e})=>({ssrData:e.ssrData}))),{roles:p,featureToggle:h,region:f,referrer:g}=a.getState(),m=(0,P.v9)([p&&"roles",h&&"featureToggle",f&&"region",g&&"referrer"].filter(Boolean),(e=>({roles:e.roles,featureToggle:e.featureToggle,region:e.region,referrer:e.referrer}))),v=i(m);o&&(v.logout=()=>o.logout()),s&&(v.navigate=e=>s.navigate(e)),t&&(v.trackingOptions=t.blocks);const y=function({dival:e,ssrData:t,unchargedDival:r}){const n=Object.assign({},e,r,{env:Object.assign({},r.env,null==e?void 0:e.env),runtimeEnv:Object.assign({},r.runtimeEnv,null==e?void 0:e.runtimeEnv)});return Object.assign({},n,t)}({dival:l,ssrData:d,unchargedDival:v}),b=function(e,t){var r,o,s;const{getTree:i,createUse:a,createUseOptions:c,dival:u}=e,l=(0,n.Z)(e,A),d=(0,T.useRef)({cacheKeys:{simpleProps:null,createUseOptions:null},data:null}),p=(0,n.Z)(e,D);if(!C()(d.current.cacheKeys.simpleProps,p)||!C()(d.current.cacheKeys.createUseOptions,c)){const e=()=>{const e=[];return Promise.resolve().then((()=>{t.boxyMetrics.blocksRendered(),e.length&&t.boxyMetrics.blockMiss(e)})).catch((()=>{})),t=>{e.push(t)}};d.current={cacheKeys:{createUseOptions:c,simpleProps:p},data:Object.assign({},l,{miss:e(),missedDi:({key:e,subtree:r})=>t.boxyMetrics.diMiss(r.type,e),tree:i?i():t.boxyService.getTree(),use:a?a():t.boxyService.createUse(c)})}}return(null===(r=d.current.data.tree.content)||void 0===r?void 0:r.length)||null===(s=(o=t.boxyMetrics).emptyContent)||void 0===s||s.call(o),d.current.data}(u,{boxyService:e,boxyMetrics:r}),{act:_}=b,S=(0,n.Z)(b,j),E=(0,T.useCallback)((e=>{_&&_(e);const t="object"==typeof e&&(null==e?void 0:e.type);X.has(t)&&c.publish("page-maker-action",e)}),[_]);return R().createElement(M.Z,Object.assign({act:E},S,{dival:y}))},deps:{boxyService:q,analyticsConfig:{token:"analyticsConfig",optional:!0},analytics:{token:"analytics",optional:!0},appInfo:a.Qo,boxyMetrics:G,envManager:c.vC,cookieManager:u.T,getAppId:{token:v.DG,optional:!0},authenticator:{token:y.i6,optional:!0},pageService:{token:l.Y9,optional:!0},getUnchargedDival:K,context:c.l6,boxyPubsub:W}}),{provide:c.Ym,useValue:[Z],multi:!0},(0,i.JJ)({provide:K,useFactory:e=>({roles:t,referrer:r,featureToggle:n,region:o})=>function({analytics:e,cookieManager:t,envManager:r,pageService:n,getAppId:o,appInfo:s,userAgent:i,logger:a,sessionManager:c,wuid:u,roles:l,featureToggle:d,region:p,referrer:h,mgm:f,eventea:g}){var m;const v=null==n?void 0:n.getCurrentUrl(),y=null==o?void 0:o(),b=O.QO(l),_=O.C5(l),S=O.HS(l),E=_||S;return Object.assign({env:(w=r.getAll(),w?Object.keys(w).filter((e=>void 0!==w[e])).reduce(((e,t)=>{return Object.assign({},e,{[(r=t,r.split("_").map(((e,t)=>0===t?e.toLowerCase():`${e[0]}${e.slice(1).toLowerCase()}`)).join(""))]:String(w[t])});var r}),{}):{}),logger:F(a),getWuid:()=>u,trackingService:e||void 0,runtimeEnv:Object.assign({},t&&{cookies:t.all()},{location:Object.assign({},v||{},{query:null==v?void 0:v.query})},"string"==typeof h&&{referrer:h})},i&&{userAgent:i},(null==s?void 0:s.appName)&&{appName:null==s?void 0:s.appName},y&&{appId:y},{layout:"mobile"===(null===(m=null==i?void 0:i.device)||void 0===m?void 0:m.type)?"mobile":"desktop"},l&&{roles:l,isAuthorized:b,isUserAuthorized:E},d&&{featureToggle:d},p&&{currentRegion:null==p?void 0:p.currentRegion},c&&{getSessionId:async()=>c.getSessionId()},n&&{setUrlQuery:e=>n.updateCurrentRoute({query:e})},{mgm:f,eventea:g});var w}(Object.assign({},e,{roles:t,referrer:r,featureToggle:n,region:o})),deps:{analytics:{token:"analytics",optional:!0},envManager:c.vC,cookieManager:{token:u.T,optional:!0},getAppId:{token:v.DG,optional:!0},pageService:{token:l.Y9,optional:!0},appInfo:{token:a.Qo,optional:!0},userAgent:{token:_.NJ,optional:!0},logger:c.Fp,sessionManager:{token:y.db,optional:!0},wuid:b.$2,mgm:{token:S,optional:!0},eventea:{token:E.Bv,optional:!0}}}),(0,i.JJ)({provide:c.xj,multi:!0,useFactory:({boxyDefaultBundle:e})=>({mainDefault:e}),deps:{boxyDefaultBundle:z}}),(0,i.JJ)({provide:z,useValue:te}),(0,i.JJ)({provide:W,useFactory:({pubSubFactory:e})=>e(),deps:{pubSubFactory:c.eP}})],ne=[{provide:G,useClass:class{constructor({logger:e,papiService:t,pageService:r,eventea:n}){this._logger=e,this._eventea=n,this._papiService=t,this._pageService=r,this.blockMiss=this.blockMiss.bind(this)}async blocksRendered(){var e,t;null===(e=this._eventea)||void 0===e||e.send({project:"boxy",event:"pagemaker-client-rendered"}),null===(t=this._papiService)||void 0===t||t.request({path:"metrics/boxy-block-client-rendered",method:"POST"}).catch((()=>{}))}async emptyContent(){var e,t,r;null===(e=this._logger)||void 0===e||e.error({event:"boxy-render-empty-content",message:"Empty content",href:null===(r=null===(t=this._pageService)||void 0===t?void 0:t.getCurrentUrl())||void 0===r?void 0:r.href})}async blockMiss(e){var t,r,n,o;null===(t=this._eventea)||void 0===t||t.send({project:"boxy",event:"block-client-fallback",payload:{blocksCount:e.length,blockTypes:e.map((({type:e,version:t})=>`${e}-v${t}`))}}),null===(r=this._papiService)||void 0===r||r.request({path:"metrics/boxy-block-client-users-fallback",method:"POST"}).catch((()=>{})),null===(n=this._papiService)||void 0===n||n.request({path:"metrics/boxy-block-client-fallback",method:"POST",body:{value:e.length}}).catch((()=>{})),null===(o=this._logger)||void 0===o||o.error({event:"boxy-block-client-fallback",message:"Blocks were fallbacked by page-maker",blocks:e.map((e=>({type:e.type,id:e.id,version:e.version,render:e.render})))})}async diMiss(e,t){var r;null===(r=this._eventea)||void 0===r||r.send({project:"boxy",event:"di-required-key-missed",payload:{type:e,key:t}})}},deps:{logger:{token:c.Fp,optional:!0},papiService:m.J2,pageService:l.Y9,eventea:{token:E.Bv,optional:!0}}}];let oe=class{};oe=(0,o.__decorate)([(0,s.Yl)({providers:[...re,...ne,{provide:a.Bi.resolvePageDeps,useFactory:({boxyService:e,pageService:t,cookieManager:r})=>async function(){const n=t.getContent();if(!n)return;e.setCookieMapping(r.get("cookieMapping")),e.registerTree(n);const o=e.getTree(),s=await(0,d.Z)({tree:o});return e.registerMap(s),Promise.resolve()},multi:!0,deps:{boxyService:q,pageService:l.Y9,context:c.l6,cookieManager:u.T}}]})],oe)},85099:function(e,t,r){"use strict";r.d(t,{pY:function(){return k},NJ:function(){return h},Zl:function(){return _},jj:function(){return E},Ns:function(){return S},GS:function(){return w}});var n=r(65058),o=r(31283),s=r(19652),i=r(70510),a=r(85354),c=r(87915),u=r(34957),l=r.n(u),d=r(68368),p=r(10850);const h=(0,s.V3)("userAgent"),f=(0,d.yM)("setMedia"),g=(0,d.Lq)("media",{height:0,width:0,isTouch:!1,retina:!1,synchronized:!1}).on(f,((e,t)=>Object.assign({},e,t))),m=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),v=(0,d.yM)("setUserAgent"),y=(0,d.Lq)("userAgent",null).on(v,((e,t)=>t)),b=[{provide:a.Ym,multi:!0,useValue:[y,g]}];function _(e){return!!e.synchronized}function S(e){return!!e.supposed}function E(e){return!!e.retina}function w(){return(0,d.v9)("media",(({media:e})=>e))}let O=class{};O=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:p.zJ,multi:!0,useValue:[g,y]}]})],O);let k=class{};k=(0,n.__decorate)([(0,o.Yl)({providers:[...b,(0,s.JJ)({provide:h,useFactory:({store:e})=>e.getState(y),deps:{store:a.kR}}),(0,s.JJ)({provide:i.Bi.clear,multi:!0,useFactory:({context:e,cookieManager:t})=>function(){const r=()=>{const r={width:window.innerWidth,height:window.innerHeight,isTouch:m,retina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches};return t.set({name:"mediaInfo",value:JSON.stringify(r)}),e.dispatch(f(Object.assign({},r,{supposed:!1})))},n=l()(300,r);return window.addEventListener("orientationchange",n),window.addEventListener("resize",n),r()},deps:{context:a.l6,cookieManager:c.T}})]})],k)},87915:function(e,t,r){"use strict";r.d(t,{T:function(){return h},m:function(){return f}});var n=r(61973),o=r(65058),s=r(31283),i=r(19652);class a{constructor(e={}){this.defaults=e}get(e){const t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}if(i===e||o===e)try{return decodeURIComponent(s)}catch(e){return console.warn("Decode cookie value error",e),s}}return null}set(e,t,r){if(!e)return;const{domain:n,path:o,expires:s,secure:i,httpOnly:a,sameSite:c}=function(e={},t={}){var r,n,o,s,i;return{expires:e.expires||t.expires,domain:e.domain||t.domain,path:null!==(n=null!==(r=e.path)&&void 0!==r?r:t.path)&&void 0!==n?n:"/",secure:null!==(o=e.secure)&&void 0!==o?o:t.secure,httpOnly:null!==(s=e.httpOnly)&&void 0!==s?s:t.httpOnly,sameSite:null!==(i=e.sameSite)&&void 0!==i?i:t.sameSite}}(r,this.defaults),u=function(e){return e?new Date("number"==typeof e?(new Date).getTime()+864e5*e:e):null}(s),l=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29"),d=("string"==typeof t?t:"").replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent),p=u&&u.getTime()>=0?`;expires=${u.toUTCString()}`:"",h=n?`;domain=${n}`:"",f=o?`;path=${o}`:"",g=i?";secure":"",m=a?";httponly":"",v=c?`;samesite=${c}`:"";document.cookie=`${l}=${d}${p}${h}${f}${g}${m}${v}`}erase(e,t={}){this.set(e,"",{expires:-1,domain:t.domain,path:t.path,secure:!1,httpOnly:!1})}all(){const e={},t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i,a;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}try{a=decodeURIComponent(s)}catch(e){console.warn("Decode cookie value error",e)}e[null!=i?i:o]=null!=a?a:s}return e}}const c=["name","value","noSubdomains"],u=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,l=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,d=e=>{if(e)return new Date("number"==typeof e?+new Date+1e3*e:e)};class p{constructor(){this.cache=Object.create(null)}get(e){return this.cache[e]||void 0}set(e,t){this.cache[e]=t}erase(e){delete this.cache[e]}all(){return this.cache}}const h=(0,i.V3)("cookieManager");let f=class{};f=(0,o.__decorate)([(0,s.Yl)({providers:[{provide:h,useClass:class{constructor({cookieOptions:e={}}={}){const t="https:"===window.location.protocol;this.cookies=(()=>{const e="testcookiesenabled";return document.cookie=e,document.cookie.indexOf(e)>-1&&(document.cookie=`${e}; expires=Thu, 01 Jan 1970 00:00:01 GMT'`,!0)})()?new a(Object.assign({sameSite:t?"none":"lax",secure:t},e)):new p}get(e){return this.cookies.get(e)||void 0}set(e){let{name:t,value:r,noSubdomains:o}=e,s=(0,n.Z)(e,c);var i;this.cookies.set(t,r,Object.assign({},s,{expires:d(s.expires),domain:o?(i=s.domain||window.location.hostname,(e=>u.test(e)||l.test(e))(i)?i:(e=>e.replace(/:\d+$/,""))(i.indexOf("localhost")>=0?i:`.${i.split(".").slice(-2).join(".")}`)):s.domain}))}all(){return this.cookies.all()}remove(e,t){return this.cookies.erase(e,t)}},scope:i.sX.SINGLETON,deps:{cookieOptions:{token:"temporary cookieOptions",optional:!0}}}]})],f)},82707:function(e,t,r){"use strict";r.d(t,{kg:function(){return v},Wb:function(){return m}});var n=r(65058),o=r(31283),s=r(85354),i=r(16061),a=r.n(i),c=r(68368),u=r(44121),l=r(19652);const d=(0,c.yM)("FEATURE_TOGGLE"),p=(0,c.Lq)("featureToggle",{__values:{}}).on(d,((e,t)=>{const r={},n={};return a()((({status:e,value:t},o)=>{!1!==e&&(r[o]=e),null!==e&&e===t||(n[o]=t)}),t),Object.assign({},r,{__values:n})})),h=(e,t)=>t[e],f=(e,t)=>{var r;const n=null===(r=t.__values)||void 0===r?void 0:r[e],o=h(e,t);return void 0===n&&null!==o?o:n},g=()=>(0,c.v9)({store:"featureToggle",optional:!0},(({featureToggle:e})=>null!=e?e:{}));(0,u.memo)((({name:e,children:t})=>{const r=g();return t(h(e,r),f(e,r))})).displayName="FeatureToggle";const m=e=>{const t=g();return f(e,t)};(0,l.V3)("customFeatureToggleGroups",{multi:!0});let v=class{};v=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:s.Ym,useValue:p,multi:!0}]})],v)},38889:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i},compilerOptions:function(){return o},include:function(){return n},references:function(){return s}});var n=["./src"],o={declarationDir:"./lib",outDir:"./lib",rootDir:"./src"},s=[{path:"../region"},{path:"../feature-toggle"},{path:"../api-clients"},{path:"../pfp-base"},{path:"../../../packages/tokens/server"},{path:"../../../packages/modules/env"},{path:"../../../packages/tramvai/core"},{path:"../../../packages/modules/common"},{path:"../../../packages/modules/render"},{path:"../../../packages/tramvai/react"},{path:"../../../packages/tramvai/state"},{path:"../metrics-ignore-label"},{path:"../admin-content-images-preload"},{path:"../router-extension-dco"},{path:"../monitoring"},{path:"../statist-api-client"},{path:"../eventea-pwa"},{path:"../network-error-logging"},{path:"../deprecated-route-dco"},{path:"../deprecated-route"},{path:"../eventea-boxy"},{path:"../analytics"},{path:"../sage"},{path:"../router"},{path:"../../../packages/libs/router"},{path:"../deprecated-route-base"},{path:"../referrer"},{path:"../../tokens/router"},{path:"../../../packages/tokens/http-client"}];const i={extends:"../../../tsconfig.lib.json",include:n,compilerOptions:o,references:s}},45686:function(e,t,r){"use strict";r.d(t,{H:function(){return v}});var n=r(65058),o=r(31283),s=r(19652),i=r(85354),a=r(87915),c=r(65991),u=r(26215),l=r(56322),d=r.n(l),p=r(88085),h=r(37384),f=r.n(h);let g=null,m=!1;try{m=!!r(Object(function(){var e=new Error("Cannot find module '@tramvai/module-route-dco/tsconfig.json'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}try{g=Object(function(){var e=new Error("Cannot find module '@tramvai/module-route-admin'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){console.warn("Не удалось получить модуль @tramvai/module-route-admin,\nвозможно произошёл микс модулей старого и нового роутинга\nобратитесь к документации https://coretech-frontend.pages.devplatform.tcsbank.ru/tramvai/docs/releases/migration#11122020-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4-%D0%BD%D0%B0-%D0%BD%D0%BE%D0%B2%D1%8B%D0%B9-%D1%80%D0%BE%D1%83%D1%82%D0%B8%D0%BD%D0%B3\nили в чат #tramvai")}let v=class{};v=(0,n.__decorate)([(0,o.Yl)({providers:!g||m?[]:[(0,s.JJ)({provide:i.sQ,multi:!0,scope:s.sX.REQUEST,useValue:[{key:"DCO_SERVICE",optional:!0,dehydrate:!1}]}),(0,s.JJ)({provide:g,multi:!0,scope:s.sX.REQUEST,useFactory:({cookieManager:e,tracking:t,dcoClient:r,envManager:n})=>o=>s=>{const i=r.getDcoRequestParams({appId:s.appId,service:n.get("DCO_SERVICE")});return o(Object.assign({},s,{withDco:!0,headers:i.headers,payload:Object.assign({},s.payload,i.payload)})).then((n=>{if(!f()(n.payload))return n;const o=r.getUserResponseParams({dcoResponseHeaders:n.headers,dcoResponse:n.payload});return o.cookieSet.forEach((t=>e.set(t))),"trackingData"in o&&t&&t.extend(o.trackingData),"redirectUrl"in o?Object.assign({},n,{payload:Object.assign({},n.payload,{redirectUrl:o.redirectUrl,finalRedirectUrl:!0})}):Object.assign({},n,{payload:Object.assign({},n.payload,{dco:o.dcoData})})}))},deps:{cookieManager:a.T,tracking:{token:c.t3,optional:!0},dcoClient:"dcoClient",envManager:i.vC}}),(0,s.JJ)({provide:"dcoClient",scope:s.sX.REQUEST,useFactory:({logger:e,requestManager:t,store:r})=>{const n=d()((e=>Array.isArray(e)?e.join(","):e),t.getHeaders());return new u.x({logger:e,pageUrl:t.getUrl(),userHeaders:n,pageReferrer:(0,p.l)(t.getHeader("referer"))})},deps:{logger:i.Fp,store:i.kR,requestManager:i.Gu}}),{provide:"__tinkoffRouterDeprecatedToken",multi:!0,useValue:["@tramvai/module-route-dco","@tramvai-tinkoff/module-router-extension-dco"]}]})],v)},70324:function(e,t,r){"use strict";r.d(t,{$2:function(){return i},Gi:function(){return a}});var n=r(65058),o=r(31283),s=r(87915);const i=(0,r(19652).V3)("webUserId");let a=class{};a=(0,n.__decorate)([(0,o.Yl)({imports:[],providers:[{provide:i,useFactory:({cookie:e})=>e.get("__P__wuid"),deps:{cookie:s.T}}]})],a)},65201:function(e,t,r){"use strict";r.d(t,{n5:function(){return T},Ek:function(){return I},O7:function(){return N},EC:function(){return x},xq:function(){return R},mX:function(){return P}});var n=r(44121),o=r.n(n),s=r(44317),i=r.n(s),a=r(56322),c=r.n(a),u=r(65058),l=r(19652),d=r(61973),p=r(50145);function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var f=r(1238);var g=o().createContext(),m={},v="PENDING",y="REJECTED",b=function(e){return e};function _(e){var t=e.defaultResolveComponent,r=void 0===t?b:t,n=e.render,s=e.onLoad;function a(e,t){void 0===t&&(t={});var a=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),c={};function u(e){return t.cacheKey?t.cacheKey(e):a.resolve?a.resolve(e):"static"}function l(e,n,o){var s=t.resolveComponent?t.resolveComponent(e,n):r(e);if(t.resolveComponent&&!(0,f.isValidElementType)(s))throw new Error("resolveComponent returned something that is not a React component!");return i()(o,s,{preload:!0}),s}var b,_,S=function(e){var r,o;function i(r){var n;return(n=e.call(this,r)||this).state={result:null,error:null,loading:!0,cacheKey:u(r)},function(e,t){if(!e){var r=new Error("loadable: "+t);throw r.framesToPop=1,r.name="Invariant Violation",r}}(!r.__chunkExtractor||a.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),r.__chunkExtractor?(!1===t.ssr||(a.requireAsync(r).catch((function(){return null})),n.loadSync(),r.__chunkExtractor.addChunk(a.chunkName(r))),function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)):(!1!==t.ssr&&(a.isReady&&a.isReady(r)||a.chunkName&&m[a.chunkName(r)])&&n.loadSync(),n)}o=e,(r=i).prototype=Object.create(o.prototype),r.prototype.constructor=r,h(r,o),i.getDerivedStateFromProps=function(e,t){var r=u(e);return(0,p.Z)({},t,{cacheKey:r,loading:t.loading||t.cacheKey!==r})};var f=i.prototype;return f.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===y&&this.setCache(),this.state.loading&&this.loadAsync()},f.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},f.componentWillUnmount=function(){this.mounted=!1},f.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},f.getCacheKey=function(){return u(this.props)},f.getCache=function(){return c[this.getCacheKey()]},f.setCache=function(e){void 0===e&&(e=void 0),c[this.getCacheKey()]=e},f.triggerOnLoad=function(){var e=this;s&&setTimeout((function(){s(e.state.result,e.props)}))},f.loadSync=function(){if(this.state.loading)try{var e=l(a.requireSync(this.props),this.props,w);this.state.result=e,this.state.loading=!1}catch(e){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:a.resolve(this.props),chunkName:a.chunkName(this.props),error:e?e.message:e}),this.state.error=e}},f.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var r=l(t,e.props,{Loadable:w});e.safeSetState({result:r,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},f.resolveAsync=function(){var e=this,t=this.props,r=(t.__chunkExtractor,t.forwardedRef,(0,d.Z)(t,["__chunkExtractor","forwardedRef"])),n=this.getCache();return n||((n=a.requireAsync(r)).status=v,this.setCache(n),n.then((function(){n.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:a.resolve(e.props),chunkName:a.chunkName(e.props),error:t?t.message:t}),n.status=y}))),n},f.render=function(){var e=this.props,r=e.forwardedRef,o=e.fallback,s=(e.__chunkExtractor,(0,d.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),i=this.state,a=i.error,c=i.loading,u=i.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===v)throw this.loadAsync();if(a)throw a;var l=o||t.fallback||null;return c?l:n({fallback:l,result:u,options:t,props:(0,p.Z)({},s,{ref:r})})},i}(o().Component),E=(_=function(e){return o().createElement(g.Consumer,null,(function(t){return o().createElement(b,Object.assign({__chunkExtractor:t},e))}))},(b=S).displayName&&(_.displayName=b.displayName+"WithChunkExtractor"),_),w=o().forwardRef((function(e,t){return o().createElement(E,Object.assign({forwardedRef:t},e))}));return w.displayName="Loadable",w.preload=function(e){a.requireAsync(e)},w.load=function(e){return a.requireAsync(e)},w}return{loadable:a,lazy:function(e,t){return a(e,(0,p.Z)({},t,{suspense:!0}))}}}var S=_({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,r=e.props;return o().createElement(t,r)}}),E=S.loadable,w=S.lazy,O=_({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,r=e.props;return r.children?r.children(t):null}}),k=O.loadable,C=O.lazy;E.lib=k,w.lib=C;const T=(0,n.createContext)(null);function R(e){const t=(()=>{const e=(0,n.useContext)(T);if(!e)throw new Error("DI-контейнер не найден");return e})();return(0,n.useMemo)((()=>{return"[object Object]"!==e.toString()||"token"in(r=e)&&(1===Object.keys(r).length||"boolean"==typeof r.optional||"boolean"==typeof r.multi)?t.get(e):c()((e=>t.get(e)),e);var r}),[e,t])}const P=e=>t=>i()((function(r){const n=R(e);return o().createElement(t,Object.assign({},r,n))}),t),M=()=>o().createElement("div",null,o().createElement("div",{style:{textAlign:"center",marginBottom:11,paddingTop:26,fontSize:30,lineHeight:"36px",fontWeight:200}},"Возникла ошибка :("),o().createElement("div",{style:{textAlign:"center",marginBottom:17,color:"#9299a2",fontSize:20,lineHeight:"24px"}},"Попробуйте"," ",o().createElement("a",{href:"",onClick:()=>window.location.reload()},"перезагрузить страницу")));M.displayName="FallbackError";class x extends n.Component{constructor(e){super(e),this.state={error:e.error||null,url:e.url}}static getDerivedStateFromProps(e,t){return e.url!==t.url?{error:e.error||null,url:e.url}:{error:e.error||t.error,url:t.url}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{errorHandlers:r}=this.props;r&&r.forEach((r=>{r(e,t)}))}render(){const{children:e,fallback:t,fallbackFromDi:r}=this.props,{url:n,error:s}=this.state;return s?t?o().createElement(t,{url:n,error:s}):r||o().createElement(M,null):e}}x.displayName="UniversalErrorBoundary";const N=(0,l.V3)("reactErrorBoundaryHandlers",{multi:!0}),I=((0,l.V3)("rootErrorBoundaryComponent"),(0,l.V3)("errorBoundaryFallbackComponent"));let A=class extends n.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){const{errorHandlers:r}=this.props;r&&r.forEach((r=>{r(e,t)}))}render(){const{children:e,fallbackComponent:t,fallbackComponentFromDi:r}=this.props,{hasError:n}=this.state;return n?t||r||o().createElement(M,null):e}};A.displayName="ErrorBoundary",A=(0,u.__decorate)([P({errorHandlers:{token:N,optional:!0},fallbackComponentFromDi:{token:I,optional:!0}})],A)},81934:function(e,t,r){"use strict";r.d(t,{l0:function(){return d},or:function(){return c},KQ:function(){return u}});var n=r(9294),o=r.n(n);const s=/[<>\/\u2028\u2029]/g,i={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"},a=e=>i[e],c=e=>JSON.stringify(e).replace(s,a),u=(e,t,r)=>{try{return JSON.stringify(e,t,r)}catch(n){return((e,t,r)=>{const n=new Set,o=t||(e=>e);return JSON.stringify(e,((e,t)=>t&&"object"==typeof t?n.has(t)?"[~Circular~]":(n.add(t),o(t)):o(t)),r)})(e,t,r)}},l=[/<link[^>]+>/gi,/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script\s*>/gi],d=(e="")=>o()(((e,t)=>e.replace(t,"")),e,l)},68368:function(e,t,r){"use strict";r.d(t,{zt:function(){return he},$j:function(){return me},j$:function(){return L},pD:function(){return F},yM:function(){return q},Lq:function(){return B},$J:function(){return A},ol:function(){return Y},xO:function(){return J},v9:function(){return Q},oR:function(){return G},US:function(){return Z}});var n=r(61973),o=r(68072),s=r.n(o),i=r(90767),a=r.n(i),c=r(72322),u=r.n(c),l=r(50948),d=r.n(l),p=r(44317),h=r.n(p),f=r(93816),g=r.n(f),m=r(44121),v=r.n(m),y=(r(42744),r(39648)),b=r.n(y),_=r(94945),S=r(13016),E=r.n(S),w=r(75972),O=r.n(w),k=r(46818),C=r.n(k),T=r(56322),R=r.n(T);const P=["getDisplayName","methodName","stores","shouldHandleStateChanges","forwardRef","schedule","pure"],M=["forwardedRef"],x=["initMapStateToProps","initMapContextToProps","initMergeProps"],N=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];let I=()=>()=>e=>t=>e(t);var A={__proto__:null,get middleware(){return I}};const D=(e,t)=>{e.on("change",t),t()};class j{constructor(){this.listeners=[]}emit(e){this.listeners.forEach((e=>{e()}))}addListener(e,t){this.listeners.push(t)}on(e,t){this.addListener(e,t)}removeListener(e,t){const r=[];for(let e=0;e<this.listeners.length;e++)this.listeners[e]!==t&&r.push(this.listeners[e]);this.listeners=r}off(e,t){this.removeListener(e,t)}}const L=(e,t)=>"string"==typeof e?{payload:t,type:e,error:!1}:e;class V extends j{constructor(e,t,r,n){super(),this.applyDispatch=e=>{const t=this.dispatcher.handlers[e.type]||[];return t.length?(this.applyHandlers(e,t),e.payload):e.payload},this.dispatcher=e,this.storeInstances={},this.storeUnsubscribeCallbacks={},this.context=t,this.dispatcherInterface={getContext:()=>this.context,getStore:this.getStore.bind(this)},this.rehydratedStoreState={},this.fullState={},r&&this.rehydrate(r),(null==n?void 0:n.length)&&(this.applyDispatch=this.applyMiddlewares(n)),Object.keys(this.dispatcher.stores).forEach((e=>{this.getStore(e)}))}applyMiddlewares(e){let t=(...e)=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const r={getState:this.getState.bind(this),subscribe:this.subscribe.bind(this),dispatch:(...e)=>t(...e)};return t=s()(...e.map((e=>e(r))))(this.applyDispatch),t}storeSubscribe(e,t){const r=()=>{const r=t.getState();r!==this.fullState[e]&&(this.fullState=Object.assign({},this.fullState,{[e]:r}),this.emit("change"))};D(t,r),this.storeUnsubscribeCallbacks[e]=()=>{t.off("change",r)}}getStore(e){let t,r=!1;"object"==typeof e?(t=e.store,r=e.optional):t=e;const n=this.dispatcher.getStoreName(t);if(!this.storeInstances[n]){let e=this.dispatcher.stores[n];if(!e){if("function"!=typeof t){if(r)return null;throw new Error(`Store ${n} was not registered.`)}this.dispatcher.registerStore(t),e=t}const o=new e(this.dispatcherInterface);if(this.storeInstances[n]=o,this.rehydratedStoreState&&this.rehydratedStoreState[n]){const e=this.rehydratedStoreState[n];o.rehydrate&&o.rehydrate(e),this.rehydratedStoreState[n]=null}this.storeSubscribe(n,o),e.dependencies&&e.dependencies.forEach((e=>{const t=this.getStore(e);D(t,(()=>{o.emit("change")}))}))}return this.storeInstances[n]}dispatch(e,t){if(!e)throw new Error(`eventOrType parameter ${e} is invalid.`);const r=L(e,t);return this.applyDispatch(r)}applyHandlers(e,t){const r={},n=e=>{if(r[e.name])return;const t=this.getStore(e.name);t&&("function"==typeof e.handler?r[e.name]=e.handler.bind(t):r[e.name]=t[e.handler].bind(t))},o=t.length;for(let e=0;e<o;e++)n(t[e]);return((e,t)=>{const r=Object.keys(t);for(let n=0;n<r.length;n++){const o=r[n],s=t[o];if(!s)throw new Error(`${o} does not have a handler for action ${e.type}`);s(e.payload,e.type)}})(e,r)}dehydrate(){const e={},t=Object.keys(this.storeInstances);for(let r=0;r<t.length;r++){const n=t[r],o=this.storeInstances[n];o.dehydrate()&&(e[n]=o.dehydrate())}return{stores:e}}rehydrate(e){if(e.stores){const t=Object.keys(e.stores);for(let r=0;r<t.length;r++){const n=t[r];this.rehydratedStoreState[n]=e.stores[n]}}}subscribe(...e){if("storeName"in e[0]){const t=e[0],r=e[1],n=this.getStore(t),o=()=>{const e=this.getState(t);r(e)};return n.on("change",o),()=>{n.off("change",o)}}const t=e[0],r=()=>{const e=this.getState();t(e)};return this.on("change",r),()=>{this.off("change",r)}}getState(e){return e?this.fullState[e.storeName]:this.fullState}setContext(e){this.context=e}hasStore(e){return e.storeName in this.storeInstances&&this.dispatcher.hasStore(e)}registerStore(e){this.dispatcher.registerStore(e),this.getStore(e)}unregisterStore(e){const{storeName:t}=e;this.dispatcher.unregisterStore(e),this.storeUnsubscribeCallbacks[t](),delete this.storeUnsubscribeCallbacks[t],delete this.rehydratedStoreState[t],delete this.storeInstances[t]}}class U{constructor(e){(e=e||{}).stores=e.stores||[],this.stores={},this.handlers={},e.stores.forEach((e=>{this.registerStore(e)}))}createContext(e,t,r){return new V(this,e,t,r)}hasStore(e){return!!this.stores[e.storeName]}registerStore(e){const{storeName:t}=e;this.stores[t]&&this.stores[t]===e||(this.stores[t]=e,e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.registerHandler(r,t,n)})))}unregisterStore(e){const{storeName:t}=e;this.stores[t]&&(delete this.stores[t],e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.unregisterHandler(r,t,n)})))}getStoreName(e){return"string"==typeof e?e:e.storeName}registerHandler(e,t,r){this.handlers[e]=this.handlers[e]||[],this.handlers[e].push({name:t,handler:r})}unregisterHandler(e,t,r){Array.isArray(this.handlers[e])&&(this.handlers[e]=this.handlers[e].filter((e=>!(e.name===t&&e.handler===r))))}}function F(e){return new U(e)}function q(e,t=a()){const r=e,n=(...e)=>({type:r,payload:t(...e)});return n.getType=()=>r,n.toString=()=>r,n}function B(e,t){var r;const n={};return(r=class e extends j{constructor(){super(),this.state=t}static createEvents(t){const r=Object.keys(t),n={};return r.forEach((r=>{const o=t[r],s=q(`${r}`);n[r]=s,e.on(s,o)})),n}static on(t,r){if(Array.isArray(t))return t.forEach((t=>e.on(t,r))),e;const o=t.toString();return e.handlers[o]="handle",n[o]=r,e}getState(){return this.state}setState(e){this.state=e,this.emit("change")}dehydrate(){return this.state}rehydrate(e){this.state=e}handle(e,t){const r=n[t];r&&(this.state=r(this.state,e),this.emit("change"))}}).storeName=e,r.handlers={},r}class H{constructor(e){this.handleStateChange=()=>{this.onStateChange&&this.onStateChange()},this.stores=e,this.unsubscribe=void 0}isSubscribed(){return Boolean(this.unsubscribe)}setOnStateChange(e){this.onStateChange=e}trySubscribe(){this.unsubscribe||(this.unsubscribe=this.stores.filter(Boolean).map((e=>(e.on("change",this.handleStateChange),()=>{e.removeListener("change",this.handleStateChange)}))))}tryUnsubscribe(){this.unsubscribe&&(this.unsubscribe.forEach((e=>e())),this.unsubscribe=void 0),this.onStateChange=void 0}}const $=(0,m.createContext)(null),J=()=>{const e=(0,m.useContext)($);if(!e)throw new Error('CONSUMER_CONTEXT not found, have you added "@tramvai/module-common"?');return e};function Y(e){const t=J(),r=(0,_.s)(e);return(0,m.useMemo)((()=>b()(r)?r.map((e=>t.executeAction.bind(t,e))):t.executeAction.bind(t,r)),[r,t])}function G(e){const t=J(),r=(0,m.useRef)(e),n=(0,m.useRef)(null),o=(0,m.useRef)(E()),[,s]=(0,m.useReducer)((e=>e+1),0);t.hasStore(e)||(t.registerStore(e),n.current=e.storeName);const i=(0,m.useRef)(t.getState(e));return(0,_.L)((()=>{const a=e=>{i.current!==e&&(i.current=e,s())};return a(t.getState(e)),o.current=t.subscribe(e,a),r.current=e,()=>{o.current(),n.current&&(t.unregisterStore(r.current),n.current=null)}}),[e,t]),i.current}const K=window;function z(){return"requestAnimationFrame"in K?requestAnimationFrame:"setImmediate"in K?K.setImmediate:setTimeout}const W=z();function Q(e,t,r=u()){g()(t,"You must pass a selector to useSelectors");const n=J(),[,o]=(0,m.useReducer)((e=>e+1),0),s=(0,m.useRef)(!1),i=(0,_.s)(e),a=(0,m.useMemo)((()=>new H(O()(i).map(n.getStore))),[i,n]),c=(0,m.useRef)(),l=(0,m.useRef)(t),d=(0,m.useRef)();let p;try{p=!d.current||t!==l.current||c.current?t(n.getState()):d.current}catch(e){let t=`An error occured while selecting the store state: ${e.message}.`;throw c.current&&(t+=`\nThe error may be correlated with this previous error:\n${c.current.stack}\n\nOriginal stack trace:`),new Error(t)}return(0,_.L)((()=>{l.current=t,d.current=p,c.current=void 0})),(0,_.L)((()=>{let e=!1;function t(){if(s.current=!1,!e){try{const e=l.current(n.getState());if(r(e,d.current))return;d.current=e}catch(e){c.current=e}o()}}return a.setOnStateChange((()=>{s.current||(s.current=!0,W(t))})),a.trySubscribe(),t(),()=>(e=!0,a.tryUnsubscribe())}),[a]),p}const Z=(e,t)=>{const r=(0,m.useCallback)((r=>t(r[e.storeName])),[e,t]);return Q(e,r)},X=[];function ee(e,t){const[,r]=e;return[t.payload,r+1]}const te=()=>[null,0];function re(e,t={}){let{getDisplayName:r=(e=>`ConnectAdvanced(${e})`),methodName:o="connectAdvanced",stores:s=[],shouldHandleStateChanges:i=!0,forwardRef:a=!1,schedule:c=(e=>e()),pure:u=!0}=t,l=(0,n.Z)(t,P);return function(t){const d=t.displayName||t.name||"Component",p=r(d),f=Object.assign({},l,{pure:u,getDisplayName:r,methodName:o,shouldHandleStateChanges:i,displayName:p,wrappedComponentName:d,WrappedComponent:t}),y=u?m.useMemo:e=>e(),b=r=>{const[o,a]=(0,m.useMemo)((()=>{const{forwardedRef:e}=r;return[e,(0,n.Z)(r,M)]}),[r]),u=J();g()(Boolean(u),`Could not find context in "${p}". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to ${p} in connect options.`);const l=(0,m.useMemo)((()=>e(u,f)),[u]),d=(0,m.useMemo)((()=>i?new H(s.map((e=>u.getStore(e)))):null),[u]);(0,m.useMemo)((()=>{d&&d.trySubscribe()}),[d]);const[[h],b]=(0,m.useReducer)(ee,X,te);if(h&&h.error)throw h.error;const S=(0,m.useRef)(),E=(0,m.useRef)(a),w=(0,m.useRef)(),O=(0,m.useRef)(!1),k=y((()=>w.current&&a===E.current?w.current:l(u.getState(),a)),[u,h,a]);return(0,_.L)((()=>{E.current=a,S.current=k,w.current&&(w.current=void 0)})),(0,_.L)((()=>{if(!d)return;let e=!1,t=null;const r=()=>{if(O.current=!1,e)return;const r=u.getState();let n,o;try{n=l(r,E.current)}catch(e){o=e,t=e}o||(t=null),n!==S.current&&(S.current=n,w.current=n,b({type:"STORE_UPDATED",payload:{latestStoreState:r,error:o}}))};return d.setOnStateChange((()=>{O.current||(O.current=!0,c(r))})),r(),()=>{if(e=!0,d.tryUnsubscribe(),t)throw t}}),[u,d,l]),(0,m.useMemo)((()=>v().createElement(t,Object.assign({},k,{ref:o}))),[o,k])},S=u?v().memo(b):b;if(S.WrappedComponent=t,S.displayName=p,a){const e=v().forwardRef((function(e,t){return v().createElement(S,Object.assign({},e,{forwardedRef:t}))}));return e.displayName=p,e.WrappedComponent=t,h()(e,t)}return h()(S,t)}}function ne(e){return function(t,r){const n=C()(e(t,r));return n.dependsOnOwnProps=!1,n}}function oe(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function se(e,t){return function(t,{displayName:r}){const n=(e,t)=>n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e,void 0);return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=oe(e);let o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=oe(o),o=n(t,r)),o},n}}const ie=[function(e){return"object"==typeof e&&null!==e?(t=e,ne((function({executeAction:e},{displayName:r}){return R()(((t,r)=>r=>e(t,r)),t)}))):void 0;var t},function(e){return"function"==typeof e?se(e):void 0},function(e){return e?void 0:ne(C()({}))}],ae=[function(e){return"function"==typeof e?se(e):void 0},function(e){return e?void 0:ne(C()({}))}],ce=(e,t,r)=>Object.assign({},r,e,t),ue=[function(e){return"function"==typeof e?function(e){return function(t,{displayName:r,pure:n,areMergedPropsEqual:o}){let s,i=!1;return function(t,r,a){const c=e(t,r,a);return i?n&&o(c,s)||(s=c):(i=!0,s=c),s}}}(e):void 0},function(e){return e?void 0:()=>ce}];function le(e,t,r,n){return function(o,s){return r(e(o,s),t(n,s),s)}}function de(e,t,r,n,{areStatesEqual:o,areOwnPropsEqual:s,areStatePropsEqual:i,WrappedComponent:{defaultProps:a}}){let c,u,l,d,p,h,f=!1;return function(g,m){return f?function(f,g){const m=!s(g,u),v=!o(f,c);return c=f,u=g,l=Object.assign({},a,g),m&&v?(d=e(c,l),t.dependsOnOwnProps&&(p=t(n,l)),h=r(d,p,u),h):m?(e.dependsOnOwnProps&&(d=e(c,l)),t.dependsOnOwnProps&&(p=t(n,l)),h=r(d,p,u),h):v?function(){const t=e(c,l),n=!i(t,d);return d=t,n&&(h=r(d,p,u)),h}():h}(g,m):(c=g,u=v=m,l=Object.assign({},a,v),d=e(c,l),p=t(n,l),h=r(d,p,u),f=!0,h);var v}}function pe(e,t){let{initMapStateToProps:r,initMapContextToProps:o,initMergeProps:s}=t,i=(0,n.Z)(t,x),a=r(e,i);const c=o(e,i),u=s(e,i);return(i.pure?de:le)(a,c,u,e,i)}const he=({context:e,children:t})=>v().createElement($.Provider,{value:e},t);function fe(e,t,r){for(let r=t.length-1;r>=0;r--){const n=t[r](e);if(n)return n}return(t,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${r} argument when connecting component ${n.wrappedComponentName}.`)}}function ge({connectHOC:e=re,mapStateToPropsFactories:t=ae,mapContextToPropsFactories:r=ie,mergePropsFactories:o=ue,selectorFactory:s=pe,schedule:i=z()}={}){return(a,c,l,p,h={})=>{let{pure:f=!0,areStatesEqual:g=d(),areOwnPropsEqual:m=u(),areStatePropsEqual:v=u(),areMergedPropsEqual:y=u()}=h,b=(0,n.Z)(h,N);const _=fe(c,t,"mapStateToProps"),S=fe(l,r,"mapContextToProps"),E=fe(p,o,"mergeProps");return e(s,Object.assign({stores:a,initMapStateToProps:_,initMapContextToProps:S,initMergeProps:E,pure:f,areStatesEqual:g,areOwnPropsEqual:m,areStatePropsEqual:v,areMergedPropsEqual:y,schedule:i,methodName:"connect",getDisplayName:e=>`Connect(${e})`,shouldHandleStateChanges:a&&a.length>0},b))}}const me=ge(),{Consumer:ve}=$},1153:function(e,t,r){"use strict";r.d(t,{DL:function(){return u},O7:function(){return c},yi:function(){return g},xs:function(){return i},l4:function(){return s},yJ:function(){return m},fg:function(){return o},JS:function(){return f},Z1:function(){return p},iu:function(){return d},w1:function(){return a},iQ:function(){return h},To:function(){return v},JB:function(){return l}});var n=r(19652);const o=(0,n.V3)("ADMIN_SERVICE"),s=(0,n.V3)("ADMIN_RESOURCES_SERVICE"),i=(0,n.V3)("ADMIN_PAGE_ENRICHMENT_SERVICE"),a=(0,n.V3)("INTEGRATION_ADMIN_SERVICE"),c=(0,n.V3)("ADMIN_API_HTTP_CLIENT_FACTORY"),u=(0,n.V3)("ADMIN_API_DEFAULT_OPTIONS_FACTORY"),l=(0,n.V3)("TINKOFF_API_SERVICE"),d=(0,n.V3)("COMMON_API_HTTP_CLIENT_FACTORY"),p=(0,n.V3)("COMMON_API_DEFAULT_OPTIONS_FACTORY"),h=(0,n.V3)("papiClient"),f=((0,n.V3)("bundleinfoDomain"),(0,n.V3)("apiOriginService")),g=(0,n.V3)("adminClient"),m=(0,n.V3)("adminResourceClient"),v=(0,n.V3)("tinkoffApiClient")},78678:function(e,t,r){"use strict";r.d(t,{i6:function(){return o},sI:function(){return c},hM:function(){return u},sV:function(){return i},Zh:function(){return a},db:function(){return s}});var n=r(19652);const o=(0,n.V3)("authenticator"),s=(0,n.V3)("sessionManager"),i=(0,n.V3)("sessionCookieName"),a=(0,n.V3)("sessionLifetimeController"),c=(0,n.V3)("authStrategies",{multi:!0}),u=(0,n.V3)("logoutRedirectUrl")},10850:function(e,t,r){"use strict";r.d(t,{FE:function(){return u},iO:function(){return i},E:function(){return c},zJ:function(){return a},Bi:function(){return s}});var n=r(19652);const o={multi:!0},s={customerStart:(0,n.V3)("child-app customer_start",o),resolveUserDeps:(0,n.V3)("child-app resolve_user_deps",o),resolvePageDeps:(0,n.V3)("child-app resolve_page_deps",o),clear:(0,n.V3)("child-app clear",o),spaTransition:(0,n.V3)("child-app spa_transition",o),afterSpaTransition:(0,n.V3)("child-app after_spa_transition",o)},i=((0,n.V3)("child-app resolve configs",o),(0,n.V3)("child-app resolution config manager"),(0,n.V3)("child-app resolve external config"),(0,n.V3)("child-app resolve external base url"),(0,n.V3)("child-app preload manager"),(0,n.V3)("child-app current config")),a=((0,n.V3)("child-app action",o),(0,n.V3)("child-app root state subscription",o),(0,n.V3)("child-app root state allowed store",o)),c=(0,n.V3)("child-app root di borrow",o),u=((0,n.V3)("child-app isChildApp Di"),(0,n.V3)("child-app singleton di manager"),(0,n.V3)("child-app di manager"),(0,n.V3)("child-app render manager"),(0,n.V3)("child-app state manager"),(0,n.V3)("child-app loader"),(0,n.V3)("child-app command runner"),(0,n.V3)("child-app initialAppState"));(0,n.V3)("child-app render")},85354:function(e,t,r){"use strict";r.d(t,{xW:function(){return l},R$:function(){return c},FM:function(){return u},R9:function(){return a},xj:function(){return s},gE:function(){return o},oK:function(){return v},Ym:function(){return S},KI:function(){return y},l6:function(){return i},xC:function(){return g},jm:function(){return _},qb:function(){return b},vC:function(){return x},sQ:function(){return N},vy:function(){return d},E6:function(){return O},J0:function(){return C},Fp:function(){return k},eP:function(){return p},k3:function(){return h},TZ:function(){return m},Z:function(){return T},Gu:function(){return R},YC:function(){return P},rX:function(){return M},Tm:function(){return f},PU:function(){return w},kR:function(){return E}});var n=r(19652);const o=(0,n.V3)("bundleManager"),s=(0,n.V3)("additional bundle",{multi:!0}),i=(0,n.V3)("context"),a=(0,n.V3)("actionRegistry"),c=(0,n.V3)("actionExecution"),u=(0,n.V3)("actionPageRunner"),l=(0,n.V3)("actionConditionals",{multi:!0}),d=(0,n.V3)("hooks"),p=(0,n.V3)("pubsubFactory"),h=(0,n.V3)("pubsub"),f=(0,n.V3)("rootPubsub"),g=(0,n.V3)("createCache"),m=(0,n.V3)("registerClearCache",{multi:!0}),v=(0,n.V3)("clearCache"),y=(0,n.V3)("componentRegistry"),b=(0,n.V3)("dispatcher"),_=(0,n.V3)("dispatcherContext"),S=(0,n.V3)("combineReducers",{multi:!0}),E=(0,n.V3)("store"),w=(0,n.V3)("storeMiddleware",{multi:!0}),O=(0,n.V3)("initialAppState"),k=(0,n.V3)("logger"),C=(0,n.V3)("loggerHook"),T=(0,n.V3)("request"),R=(0,n.V3)("requestManager"),P=(0,n.V3)("response"),M=(0,n.V3)("responseManager"),x=(0,n.V3)("environmentManager"),N=(0,n.V3)("envUsed",{multi:!0})},70510:function(e,t,r){"use strict";r.d(t,{I7:function(){return s},Qo:function(){return a},om:function(){return o},PR:function(){return u},S9:function(){return c},mJ:function(){return i},Bi:function(){return d}});var n=r(19652);const o=(0,n.V3)("bundleList"),s=(0,n.V3)("actionsList"),i=(0,n.V3)("modulesList"),a=(0,n.V3)("appInfo"),c=(0,n.V3)("commandLineRunner"),u=(0,n.V3)("commandLines"),l={multi:!0},d={init:(0,n.V3)("init",l),listen:(0,n.V3)("listen",l),customerStart:(0,n.V3)("customer_start",l),resolveUserDeps:(0,n.V3)("resolve_user_deps",l),resolvePageDeps:(0,n.V3)("resolve_page_deps",l),generatePage:(0,n.V3)("generate_page",l),clear:(0,n.V3)("clear",l),spaTransition:(0,n.V3)("spa_transition",l),afterSpaTransition:(0,n.V3)("after_spa_transition",l),close:(0,n.V3)("close",l)}},8716:function(e,t,r){"use strict";r.d(t,{s:function(){return a},pW:function(){return u},bV:function(){return s},zn:function(){return i},FB:function(){return o},J2:function(){return c}});var n=r(19652);const o=(0,n.V3)("HTTP_CLIENT_FACTORY"),s=(0,n.V3)("HTTP_CLIENT"),i=(0,n.V3)("HTTP_CLIENT_AGENT"),a=(0,n.V3)("apiClientPassHeaders",{multi:!0}),c=(0,n.V3)("papi service"),u=(0,n.V3)("disable circuit breaker")},89660:function(e,t,r){"use strict";r.d(t,{p6:function(){return a},mc:function(){return f},fT:function(){return h},MV:function(){return p},Qv:function(){return d},OQ:function(){return g},IF:function(){return i},QH:function(){return u},zS:function(){return s},$j:function(){return c},u$:function(){return m},FZ:function(){return o},Ky:function(){return v},d6:function(){return l}});var n=r(19652),o={__proto__:null,HEAD_META:"head:meta",HEAD_PERFORMANCE:"head:performance",HEAD_CORE_STYLES:"head:core-styles",HEAD_POLYFILLS:"head:polyfills",HEAD_CORE_SCRIPTS:"head:core-scripts",HEAD_DYNAMIC_SCRIPTS:"head:dynamic-scripts",HEAD_ANALYTICS:"head:analytics",HEAD_ICONS:"head:icons",BODY_START:"body:start",REACT_RENDER:"react:render",BODY_END:"body:end",BODY_TAIL_ANALYTICS:"body:tail:analytics",BODY_TAIL:"body:tail"};const s=(0,n.V3)("RENDER_SLOTS",{multi:!0}),i=((0,n.V3)("HTML_ATTRS",{multi:!0}),(0,n.V3)("RENDERER_CALLBACK",{multi:!0})),a=(0,n.V3)("CUSTOM_RENDER"),c=(0,n.V3)("resourcesRegistry"),u=((0,n.V3)("POLYFILL_CONDITION"),(0,n.V3)("RENDER_MODE")),l=(0,n.V3)("useReactStrictMode"),d=(0,n.V3)("EXTEND_RENDER",{multi:!0}),p=(0,n.V3)("defaultLayoutComponent"),h=(0,n.V3)("defaultHeaderComponent"),f=(0,n.V3)("defaultFooterComponent"),g=(0,n.V3)("layoutOptions",{multi:!0}),m=(0,n.V3)("resourceInlineThreshold"),v=(0,n.V3)("tramvaiRenderMode")},82036:function(e,t,r){"use strict";r.d(t,{Y9:function(){return a},sU:function(){return i},$d:function(){return l},l1:function(){return o},Dk:function(){return s},TL:function(){return c},S3:function(){return u}});var n=r(19652);const o=(0,n.V3)("router router"),s=(0,n.V3)("router routes",{multi:!0}),i=(0,n.V3)("router guard",{multi:!0}),a=(0,n.V3)("router pageService"),c=(0,n.V3)("router routeResolve"),u=(0,n.V3)("router routeTransform",{multi:!0}),l=(0,n.V3)("router spaRunMode")},18299:function(e,t,r){"use strict";r.d(t,{$8:function(){return i},QR:function(){return s},a9:function(){return o}});var n=r(19652);const o=(0,n.V3)("serverModulePapiPublicUrl"),s=(0,n.V3)("serverModulePapiPrivateUrl"),i=(0,n.V3)("serverModulePapiPrivateRoute",{multi:!0});(0,n.V3)("serverModulePapiPublicRoute",{multi:!0}),(0,n.V3)("serverModuleStaticsOptions"),(0,n.V3)("server"),(0,n.V3)("webApp"),(0,n.V3)("webAppBeforeInit",{multi:!0}),(0,n.V3)("webAppInit",{multi:!0}),(0,n.V3)("webAppLimitter",{multi:!0}),(0,n.V3)("webAppAfterInit",{multi:!0}),(0,n.V3)("proxyConfigToken",{multi:!0}),(0,n.V3)("dependenciesVersionFilter"),(0,n.V3)("specialServerPaths",{multi:!0}),(0,n.V3)("readiness-probe-fn"),(0,n.V3)("liveness-probe-fn")},25919:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});const n="__action_parameters__"},27021:function(e){"use strict";const{AbortController:t,AbortSignal}="undefined"!=typeof self?self:window;e.exports=t,e.exports.AbortSignal=AbortSignal,e.exports.default=t},41738:function(e,t,r){"use strict";const n=r(77033),o=Symbol("max"),s=Symbol("length"),i=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),u=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),f=()=>1,g=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(m(e,t)){if(y(e,n),!e[a])return}else r&&(e[h]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},v=e=>{if(e[s]>e[o])for(let t=e[d].tail;e[s]>e[o]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[u]&&e[u](r.key,r.value),e[s]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class b{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const _=(e,t,r,n)=>{let o=r.value;m(e,o)&&(y(e,r),e[a]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||f;if(this[i]="function"!=typeof t?f:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[u]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,v(this)}get max(){return this[o]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,v(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[i]&&(this[i]=e,this[s]=0,this[d].forEach((e=>{e.length=this[i](e.value,e.key),this[s]+=e.length}))),v(this)}get lengthCalculator(){return this[i]}get length(){return this[s]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;_(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;_(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach((e=>this[u](e.key,e.value))),this[p]=new Map,this[d]=new n,this[s]=0}dump(){return this[d].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[i](t,e);if(this[p].has(e)){if(a>this[o])return y(this,this[p].get(e)),!1;const i=this[p].get(e).value;return this[u]&&(this[l]||this[u](e,i.value)),i.now=n,i.maxAge=r,i.value=t,this[s]+=a-i.length,i.length=a,this.get(e),v(this),!0}const h=new b(e,t,a,n,r);return h.length>this[o]?(this[u]&&this[u](e,t),!1):(this[s]+=h.length,this[d].unshift(h),this[p].set(e,this[d].head),v(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>g(this,t,!1)))}}},65058:function(e,t,r){"use strict";r.r(t),r.d(t,{__extends:function(){return o},__assign:function(){return s},__rest:function(){return i},__decorate:function(){return a},__param:function(){return c},__metadata:function(){return u},__awaiter:function(){return l},__generator:function(){return d},__createBinding:function(){return p},__exportStar:function(){return h},__values:function(){return f},__read:function(){return g},__spread:function(){return m},__spreadArrays:function(){return v},__spreadArray:function(){return y},__await:function(){return b},__asyncGenerator:function(){return _},__asyncDelegator:function(){return S},__asyncValues:function(){return E},__makeTemplateObject:function(){return w},__importStar:function(){return k},__importDefault:function(){return C},__classPrivateFieldGet:function(){return T},__classPrivateFieldSet:function(){return R}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function a(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))}function d(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var p=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function h(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function y(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,u):l(s[0][2],r)}catch(e){l(s[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return O(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function R(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}},10364:function(e){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},77033:function(e,t,r){"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function s(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,s=this.head;null!==s&&o<e;o++)s=s.next;for(;null!==s&&o<t;o++,s=s.next)r.push(s.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,s=this.tail;null!==s&&o>t;o--)s=s.prev;for(;null!==s&&o>e;o--,s=s.prev)r.push(s.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;null!==s&&n<e;n++)s=s.next;var i=[];for(n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);for(null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev),n=0;n<r.length;n++)s=o(this,s,r[n]);return i},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(10364)(n)}catch(e){}},48658:function(e,t,r){"use strict";var n=r(65058),o=r(31283),s=r(19652),i=r(70510),a=r(85354),c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var p=function(){var e=0;return function(){return{clientEventTimestamp:Date.now(),clientUploadTimestamp:Date.now(),sequence:++e,uuid:d()}}},h={test:"https://api.statist.v2.dev2.k8s.tcsbank.ru",prod:"https://api-statist.tinkoff.ru"},f=document,g=window,m=navigator,v=XMLHttpRequest,y=function(){function e(e,t){var r=this;this.events=[],this.timer=null,this.listeners=Object.create(null),this.destroy=function(){g.removeEventListener("visibilitychange",r.handleVisibilityChange),g.removeEventListener("pagehide",r.handlePageHide)},this.handleVisibilityChange=function(){"hidden"===f.visibilityState&&r.sendByBeacon()},this.handlePageHide=function(){r.sendByBeacon()},this.pushEventsUrl=e+"/gateway/v1/events",this.batchSize=t.batchSize,this.pushInterval=t.pushInterval,this.pushTimeout=t.pushInterval,"visibilityState"in f?g.addEventListener("visibilitychange",this.handleVisibilityChange,!1):g.addEventListener("pagehide",this.handlePageHide,!1)}return e.prototype.handleApiError=function(e){var t,r,n=this;if(e.response)try{var o=JSON.parse(e.response);if(o.message&&(null===(t=o.details)||void 0===t?void 0:t.errors))return void o.details.errors.forEach((function(t){t&&n.emit("error",Object.assign(new Error(o.message),{status:e.status,response:t}))}))}catch(e){}this.emit("error",Object.assign(new Error(null!==(r=e.response)&&void 0!==r?r:e.message),{status:e.status}))},e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.emit=function(e,t){var r=this.listeners[e];if(r)for(var n=0,o=r;n<o.length;n++)(0,o[n])(t)},e.prototype.startPush=function(){var e=this;this.timer||0===this.events.length||(this.timer=setTimeout((function(){return(e.isReady()?e.pushEvents(e.batchSize):Promise.resolve()).catch((function(t){return e.handleApiError(t)})).then((function(){e.timer=null,e.startPush()}))}),this.pushInterval))},e.prototype.pushEvents=function(e){var t=this.events.splice(0,e);return this.sendByXhr(t)},e.prototype.updateTimestamp=function(e){for(var t=Date.now(),r=0,n=e;r<n.length;r++)n[r].eventParameters.clientUploadTimestamp=t},e.prototype.sendByXhr=function(e){var t=this;return v?e.length?(this.updateTimestamp(e),new Promise((function(r,n){var o=new v,s=function(){if(o.status>=200&&o.status<=204)r();else{var t=Object.assign(new Error(o.responseText),{status:o.status,response:o.responseText,events:e});n(t)}};o.onerror=s,o.onload=s,o.timeout=t.pushTimeout,o.open("POST",t.pushEventsUrl,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(e))}))):Promise.resolve():Promise.reject()},e.prototype.sendByBeacon=function(){var e=this.events;this.events=[],e.length&&(this.updateTimestamp(e),m.sendBeacon(this.pushEventsUrl,JSON.stringify(e)))},e.prototype.send=function(e){this.events.push(e),this.startPush()},e.prototype.isReady=function(){return!0},e}(),b=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.ready=!1,n.preconnectUrl=t+"/preconnect",r.preconnect&&(n.preconnect(),setInterval((function(){return n.preconnect()}),6e5)),n}return u(t,e),t.prototype.handleApiError=function(t){var r;if(t.status>=200&&t.status<500)return e.prototype.handleApiError.call(this,t);(r=this.events).unshift.apply(r,t.events),this.startPush()},t.prototype.preconnect=function(){"fetch"in g?this.preconnectFetch():this.preconnectXhr()},t.prototype.setReady=function(){this.ready=!0},t.prototype.preconnectFetch=function(){var e=this;return fetch(this.preconnectUrl,{method:"GET",mode:"no-cors"}).then((function(){return e.setReady()})).catch((function(){return e.setReady()}))},t.prototype.preconnectXhr=function(){var e=this,t=new v;t.onload=function(){return e.setReady()},t.timeout=this.pushTimeout,t.open("GET",this.preconnectUrl,!0),t.send()},t.prototype.isReady=function(){return this.ready},t}(y),_={},S=function(){function e(e,t,r){this.clientParameters=e,this.transport=t,this.eventParameters=r}return e.prototype.send=function(e,t,r,n){var o=l(l({},null!=n?n:this.clientParameters),{visitId:"",deviceId:""});o.visitId=o.visitId||function(e){try{return sessionStorage.getItem(e)}catch(t){return function(e){return _[e]?_[e]:null}(e)}}("vIdUid")||function(e,t){try{sessionStorage.setItem(e,t)}catch(e){!function(e,t){_.vIdUid=t}(0,t)}return t}("vIdUid",d()),o.deviceId=o.deviceId||f.cookie.split("; ").reduce((function(e,t){var r=t.split("=");return"stDeIdU"===r[0]?decodeURIComponent(r[1]):e}),"")||null||function(e,t){var r=new Date(Date.now()+15768e7).toUTCString();return f.cookie="stDeIdU="+encodeURIComponent(t)+"; expires="+r+"; path=/; domain="+g.location.hostname.split(".").slice(-2).join("."),t}(0,d());var s,i={project:e,name:t,parameters:r,eventParameters:(s=this.eventParameters,"function"==typeof s?s():s),clientParameters:o};this.transport.send(i)},e.prototype.updateClientParameters=function(e){for(var t in e)this.clientParameters[t]=e[t]},e.prototype.on=function(e,t){this.transport.on(e,t)},e.prototype.off=function(e,t){this.transport.off(e,t)},e}(),E=function(e){function t(t){var r=t.transportOptions||{},n=r.batchSize,o=void 0===n?500:n,s=r.pushInterval,i=void 0===s?15e3:s,a=r.pushTimeout,c=void 0===a?3e4:a,u=r.preconnect,l=void 0===u||u;return e.call(this,t.clientParameters,new b(h[t.environment],{batchSize:o,pushInterval:i,pushTimeout:c,preconnect:l}),t.eventParameters||p())||this}return u(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n||{},o)},t}(S),w=function(e){function t(t){var r=t.transportOptions||{},n=r.batchSize,o=void 0===n?500:n,s=r.pushInterval,i=void 0===s?6e4:s,a=r.pushTimeout,c=void 0===a?3e4:a,u=r.preconnect,l=void 0===u||u;return e.call(this,t.clientParameters,new y(h[t.environment],{batchSize:o,pushInterval:i,pushTimeout:c,preconnect:l}),t.eventParameters||p())||this}return u(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n,o)},t}(S);const O=(e,t)=>{var r,n,o,s,i;return(null===(n=null===(r=t.getState())||void 0===r?void 0:r.featureToggle)||void 0===n?void 0:n.statist_metrics)?{environment:null!==(i=null===(s=null===(o=t.getState())||void 0===o?void 0:o.featureToggle)||void 0===s?void 0:s.statist_metrics_env_dev)&&void 0!==i&&i?"test":"prod",clientParameters:{client:e.appName,clientVersion:"1.0.0",ssoId:null}}:null},k=(0,s.V3)("STATIST_EVENT_API_CLIENT"),C=(0,s.V3)("STATIST_METRIC_API_CLIENT");let T=class{};T=(0,n.__decorate)([(0,o.Yl)({providers:[(0,s.JJ)({provide:k,useFactory:({appInfo:e,store:t,logger:r})=>{const n=O(e,t),o=r({name:"statist:event",defaults:{remote:!0}});if(n){const e=new E(n);return e.on("error",(e=>{o.error({event:"send-failed",error:e,status:e.status,response:e.response})})),e}},deps:{appInfo:i.Qo,store:a.kR,logger:a.Fp}}),{provide:C,useFactory:({appInfo:e,store:t,logger:r})=>{const n=O(e,t),o=r({name:"statist:metric",defaults:{remote:!0}});if(n){const e=new w(n);return e.on("error",(e=>{o.error({event:"send-failed",error:e,status:e.status,response:e.response})})),e}},deps:{appInfo:i.Qo,store:a.kR,logger:a.Fp}}]})],T);var R=r(34957),P=r.n(R),M=r(40858),x=r.n(M),N=r(39648),I=r.n(N),A=r(90767),D=r.n(A),j=r(10074),L=r.n(j),V=r(16061),U=r.n(V),F=r(81786),q=r.n(F);class B{constructor(){this.state=new Map}eachMeta(e){this.state.forEach(((t,r)=>e(t,r)))}updateMeta(e,t){var r;return U()(((t,r)=>{if(!t&&null!==t)return;const n=this.state.get(r);(!n||e>=n.priority)&&(null===t?this.state.delete(r):this.state.set(r,{value:t,priority:e}))}),t),null===(r=this.onChange)||void 0===r||r.call(this),this}get(e){return this.state.get(e)}reset(){this.state.clear()}subscribe(e){this.onChange=e}}const H=e=>L()("tag",e)?e:null;class ${constructor({list:e,transformValue:t=D(),converters:r={},metaWalk:n}){this.listSources=e,this.transformValue=t,this.converters=r,this.metaWalk=n}dataCollection(...e){var t;const r=null!==(t=this.metaWalk)&&void 0!==t?t:new B;this.listSources.map((t=>t(r,...e)));let n=[];return r.eachMeta(((e,t)=>{const r=this.transformValue(e),o=(this.converters[t]||H)(r.value);o&&(n=n.concat(I()(o)?o.filter(D()):o))})),n}}q()(((e,t,r)=>`${e} ${r}="${t}"`),"");const J=({tag:e,attributes:t,innerHtml:r})=>{const n=document.createElement(e);return r&&(n.innerHTML=r),t&&U()(((e,t)=>{n.setAttribute(t,e||"")}),t),n.setAttribute("data-meta-dynamic","true"),n};class Y{constructor(e){this.meta=e}update(){const e=document.head||document.querySelector("head"),t=this.meta.dataCollection().map(J),r=e.querySelectorAll("[data-meta-dynamic]"),n=document.createDocumentFragment();[].slice.call(r).forEach((t=>e.removeChild(t))),t.forEach((e=>n.appendChild(e))),e.insertBefore(n,e.firstChild)}}var G=r(7216),K=r.n(G),z=r(51336),W=r.n(z),Q=r(33038),Z=r.n(Q),X=r(82036),ee=r(17986),te=r.n(ee);const re=K()(W(),Z(),D()),ne=e=>e.priority>10?{priority:e.priority,value:re(e.value)}:e,oe=(0,s.V3)("metaDefaultPack"),se=(0,s.V3)("metaWalk"),ie=(0,s.V3)("metaUpdater",{multi:!0}),ae=(e,t={})=>{const r={};return Object.keys(t).forEach((n=>{var o;r[e+(o=n,`${o.charAt(0).toUpperCase()}${o.slice(1)}`)]=t[n]})),r},ce=[{provide:se,useClass:B},{provide:oe,useValue:{title:"Tramvai"}},{provide:ie,multi:!0,useFactory:({defaultMeta:e})=>{return t=e,e=>{e.updateMeta(0,t)};var t},deps:{defaultMeta:oe}},{provide:ie,useFactory:({pageService:e})=>t=>{const r=e.getMeta().seo||{},n=r.shareSchema||{},o=Object.assign({},r.metaTags,ae("twitter",n.twitterCard),ae("og",n.openGraph));t.updateMeta(10,o)},multi:!0,deps:{pageService:X.Y9}},{provide:ie,multi:!0,useFactory:({context:e,metaList:t})=>{const r=x()(t||[]);return t=>{r.forEach((r=>r(e,t)))}},deps:{context:a.l6,metaList:{token:"metaList",optional:!0}}}],ue=te()(2,((e,t)=>t&&{tag:e,innerHtml:t})),le=te()(2,((e,t)=>t&&{tag:"meta",attributes:{name:e,content:t}})),de=te()(2,((e,t)=>t&&{tag:"meta",attributes:{property:e,content:t}})),pe=te()(2,((e,t)=>t&&{tag:"link",attributes:{rel:e,href:t}})),he=[le("robots","noindex, follow"),le("robots","noarchive")],fe=[le("robots","index, nofollow"),le("robots","noarchive")],ge=[le("robots","none"),le("robots","noindex, nofollow"),le("robots","noarchive")],me={all:[le("robots","all"),le("robots","index, follow"),le("robots","noarchive")],noindex:he,"noindex, follow":he,nofollow:fe,"index, nofollow":fe,none:ge,"noindex, nofollow":ge},ve={title:ue("title"),description:le("description"),keywords:le("keywords"),canonical:pe("canonical"),viewport:le("viewport"),ogTitle:de("og:title"),ogDescription:de("og:description"),ogSiteName:de("og:site_name"),ogUrl:de("og:url"),ogType:de("og:type"),ogImage:de("og:image"),ogImageSecure:de("og:image:secure_url"),ogImageType:de("og:image:type"),ogImageAlt:de("og:image:alt"),ogImageWidth:de("og:image:width"),ogImageHeight:de("og:image:height"),ogLocale:de("og:locale"),twitterTitle:le("twitter:title"),twitterDescription:le("twitter:description"),twitterCard:le("twitter:card"),twitterSite:le("twitter:site"),twitterCreator:le("twitter:creator"),twitterImage:le("twitter:image"),twitterImageAlt:le("twitter:image:alt"),robots:e=>me[e]};var ye;let be=ye=class{static forRoot(e){if(I()(e))return{mainModule:ye,providers:[{provide:"metaList",useValue:e,multi:!0}]};const{metaUpdaters:t,metaDefault:r}=e,n=[];return r&&n.push({provide:oe,useValue:r}),t&&n.push({provide:ie,useValue:t,multi:!0}),{providers:n,mainModule:ye}}};be=ye=(0,n.__decorate)([(0,o.Yl)({providers:[...ce,(0,s.JJ)({provide:i.Bi.spaTransition,multi:!0,useFactory:({metaWalk:e,metaUpdaters:t})=>{const r=new $({list:x()(t||[]),transformValue:ne,converters:ve,metaWalk:e});let n=!1;const o=()=>{n=!0,new Y(r).update(),n=!1},s=P()(500,o);return e.subscribe((()=>{n||s()})),function(){e.reset(),o()}},deps:{metaWalk:se,metaUpdaters:{token:ie,optional:!0,multi:!0}}})]})],be);var _e=r(94970),Se=r(56393),Ee=r(81934);const we=window.fetch.bind(window),Oe=(e,t)=>t instanceof Error?Object.assign({message:t.message,stack:t.stack},t):t;var ke=r(70324);const Ce=e=>Math.round(e),Te=e=>e,Re=e=>t=>Ce(t[e]),Pe=e=>t=>t[e]?1:0,Me=e=>t=>t[e],xe=(e,t,r)=>r[e]?((e,t)=>{const r={};for(const n in t)r[n]=t[n](e);return r})(t,r[e]):null,Ne={"largest-contentful-paint":{largestContentfulPaint:Ce},"long-tasks":{longTasksTotal:Re("total-long-tasks"),longTasksFirstDuration:Re("first-long-task-duration"),longTasksFirstStartTime:Re("first-long-task-start-time")},"first-paint":{firstPaintTime:Ce},"first-input-delay":{firstInputDelay:Re("duration")},"navigation-timings":{navigationTimingsDomainLookupTime:Re("domain-lookup-time"),navigationTimingsServerResponseTime:Re("server-response-time"),navigationTimingsServerConnectionTime:Re("server-connection-time"),navigationTimingsDownloadDocumentTime:Re("download-document-time")},"network-information":{networkInformationRoundTripTime:Re("round-trip-time"),networkInformationDownloadBandwidth:Re("downlink-bandwidth"),networkInformationEffectiveConnectionType:Me("effective-connection-type"),networkInformationSaveDataV2:Pe("save-data")},"first-contentful-paint":{firstContentfulPaint:Ce},"cumulative-layout-shift":{cumulativeLayoutShift:Te}};var Ie;!function(e){e[e.Perfectum=0]="Perfectum",e[e.Perfume=1]="Perfume"}(Ie||(Ie={}));const Ae=(0,s.V3)("PERFORMANCE_LIBRARY_TOKEN"),De={lcp:{largestContentfulPaint:Ce},fp:{firstPaintTime:Ce},fid:{firstInputDelay:Ce},navigationTiming:{navigationTimingsDomainLookupTime:Re("dnsLookupTime"),navigationTimingsServerResponseTime:Re("timeToFirstByte"),navigationTimingsDownloadDocumentTime:Re("downloadTime")},networkInformation:{networkInformationRoundTripTime:Re("rtt"),networkInformationDownloadBandwidth:Re("downlink"),networkInformationEffectiveConnectionType:Me("effectiveType"),networkInformationSaveDataV2:Pe("saveData")},fcp:{firstContentfulPaint:Ce},cls:{cumulativeLayoutShift:Te},tbt:{totalBlockingTime:Ce},ttfb:{timeToFirstByte:Ce}};let je=class{};je=(0,n.__decorate)([(0,o.Yl)({providers:[(0,s.JJ)({provide:Ae,useValue:Ie.Perfectum}),(0,s.JJ)({provide:i.Bi.init,useFactory:({statistClient:e,performanceLibrary:t})=>()=>{e&&((e,t)=>{const n=(e=>{var t;const r=-1!==(null===(t=navigator.userAgent)||void 0===t?void 0:t.indexOf("Mobi"))?"mobile":"desktop";let n={};const o=P()(500,(()=>{e.send("coretech.web.metrics","performance.rum",Object.assign({},n,{deviceType:r})),n={}}));return e=>{e&&(n=Object.assign({},n,e),o())}})(e);t===Ie.Perfectum?r.e("_perfectum_client_lib_index_es_min_js").then(r.bind(r,8427)).then((e=>{e.default.init({onMetricCallback:(e,t)=>{n(xe(e,t,Ne))}})})):t===Ie.Perfume&&r.e("perfume_js_dist_perfume_esm_min_js").then(r.bind(r,66157)).then((e=>{new(0,e.default)({analyticsTracker:e=>{const{metricName:t,data:r}=e;n(xe(t,r,De))}})}))})(e,t)},multi:!0,deps:{statistClient:{token:C,optional:!0},performanceLibrary:Ae}})]})],je);const Le=[(0,s.JJ)({provide:oe,useValue:{title:"Тинькофф — Кредитные и дебетовые карты, кредиты для бизнеса и физических лиц",ogTitle:"Кредитные и дебетовые карты с доставкой по всей России. Моментальные платежи и переводы с карты на карту.",ogDescription:"Онлайн оформление кредитных карт и кредитов за 5 минут. Доставка банковских карт домой и в офис. Лучший онлайн-банк и универсальный платежный сервис.",ogSiteName:"Тинькофф Банк",ogImage:"http://static2.tinkoff.ru/portal/share/tinkoffru.png",ogImageSecure:"https://static2.tinkoff.ru/portal/share/tinkoffru.png"}}),(0,s.JJ)({provide:a.sQ,useValue:[{key:"SENTRY_SDK_URL",dehydrate:!0,optional:!0,value:"https://www.cdn-tinkoff.ru/frontend-libraries/npm/sentry/5.17.0/bundle.min.js",validator:_e.CB}],multi:!0})],Ve=[(0,s.JJ)({provide:a.J0,multi:!0,useFactory:({remoteReporter:e})=>t=>{t.addBeforeReporter(e)},deps:{remoteReporter:"remoteReporter"}}),(0,s.JJ)({provide:"remoteReporter",useFactory:({appInfo:e,envManager:t,wuid:r})=>{const{appName:n}=e,o=t.get("APP_VERSION"),s=t.get("APP_RELEASE"),i=t.get("FRONT_LOG_API");return new Se.RemoteReporter({requestCount:1,emitLevels:{error:!0,fatal:!0},makeRequest:e=>(({logApi:e,payload:t})=>we(`${e}collect`,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:(0,Ee.KQ)(t,Oe)}).catch((e=>e)))({logApi:i,payload:Object.assign({},e,{component:`tramvai-${n}-${e.name}`,wuid:r,release:s,appVersion:o,appName:n,appType:"tramvai",from:"browser",userAgent:window.navigator.userAgent,href:window.location.href})})})},scope:s.sX.SINGLETON,deps:{appInfo:i.Qo,envManager:a.vC,wuid:{token:ke.$2,optional:!0}}}),(0,s.JJ)({provide:a.sQ,useValue:[{key:"FRONT_LOG_API",dehydrate:!0,validator:_e.CB}],multi:!0})],Ue=[...Ve];let Fe=class{};Fe=(0,n.__decorate)([(0,o.Yl)({imports:[T,je],providers:[...Le,...Ue]})],Fe);var qe=r(61973),Be=r(25919),He=r(68368);class $e{constructor(){this.parameters={}}get(e){return this.parameters[e]}getInt(e,t){const r=Number(e in this.parameters?this.parameters[e]:t);return Number.isFinite(r)?r:t}getAll(){return this.parameters}update(e){this.parameters=Object.assign(this.parameters,e)}clientUsed(){return this.getAll()}updateClientUsed(e){this.update(e)}}const Je=(0,He.Lq)("environment",{});let Ye=class{};Ye=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:a.vC,useFactory:({store:e})=>{const t=new $e;return t.update(e.getState(Je)),t},scope:s.sX.SINGLETON,deps:{store:a.kR}},{provide:a.Ym,useValue:Je,multi:!0}]})],Ye);var Ge=r(87915);var Ke=r(18299),ze=r(91680),We=r.n(ze),Qe=r(74815),Ze=r.n(Qe);const Xe=(0,He.yM)("setLogs"),et=(0,He.Lq)("devLogs",[]).on(Xe,((e,t)=>t));class tt{constructor(e){this.logs=[],this.logs=e}extend(e){const[t]=e.args;return this.logs[t]}}(0,s.JJ)({provide:a.J0,multi:!0,useFactory:({reporter:e})=>t=>{t.addReporter(e)},deps:{reporter:"ssrDevReporter"}}),(0,s.JJ)({provide:"ssrDevReporter",scope:s.sX.SINGLETON,useClass:class{constructor(){this.logs=[]}log(e){this.logs.push(e)}start(){this.reset()}reset(){this.logs=[]}flush(){const e=this.logs;return this.reset(),e}}}),(0,s.JJ)({provide:a.Ym,multi:!0,useValue:et}),(0,s.JJ)({provide:i.Bi.customerStart,multi:!0,useFactory:({reporter:e})=>function(){e.start()},deps:{reporter:"ssrDevReporter"}}),(0,s.JJ)({provide:i.Bi.generatePage,multi:!0,useFactory:({context:e,reporter:t})=>{const r=t.flush();return function(){return e.dispatch(Xe(r))}},deps:{context:a.l6,reporter:"ssrDevReporter"}}),(0,s.JJ)({provide:Ke.$8,multi:!0,useFactory:({environmentManager:e})=>(e=>{const t=e.handler.length>1?t=>e.handler(null==t?void 0:t.req,null==t?void 0:t.res,t):e.handler;return Object.assign(t,{__papi_parameters__:Object.assign({},e,{handler:t,options:e.options||{},method:e.method||"all"})})})({method:"get",path:"/logger",async handler({req:t}){const{mode:r,level:n,enable:o}=t.query,s=r||n||o;let i,a;"default"===r&&(i=e.get("DEBUG_LEVEL"),a=e.get("DEBUG_ENABLE")),n&&(i=n),o&&(a=o),s&&Se.logger.clear(),i&&Se.logger.setLevel(i),a&&We()((e=>{const[t,r]=e.split(":");Se.logger.enable(t,r)}),Ze()(",",a))}}),deps:{environmentManager:a.vC}}),(0,s.JJ)({provide:a.Ym,multi:!0,useValue:et}),(0,s.JJ)({provide:i.Bi.customerStart,multi:!0,useFactory:({logger:e,store:t})=>function(){const r=t.getState(et);((e,t)=>{t&&t.length&&(console.groupCollapsed("%c🚀 Tramvai SSR Logs","font-size: 110%"),t.forEach(((t,r)=>e[t.type](r))),console.groupEnd())})(e({name:"ssr-logger",beforeReporters:[],reporters:[new Se.BrowserReporter],extensions:[new tt(r)]}),r)},deps:{logger:a.Fp,store:a.kR}});const rt=(0,Se.createLoggerFactory)({name:"",key:"tramvai",reporters:[new Se.BrowserReporter]});let nt=class{};nt=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:a.Fp,useFactory({loggerInitHooks:e}){if(e)for(const t of e)t(rt);return rt},deps:{loggerInitHooks:{token:a.J0,multi:!0,optional:!0}}}]})],nt);var ot=r(25368),st=r.n(ot);r(46819);var it=r(44317),at=r.n(it),ct=r(50180),ut=r.n(ct),lt=r(36600),dt=r.n(lt),pt=r(29553),ht=r.n(pt);const ft=(0,s.V3)("metricsModule");(0,s.V3)("metricsServicesRegistry"),(0,s.V3)("registerInstantMetric");var gt=r(13016),mt=r.n(gt);const vt=["message","httpStatus"],yt=["message"],bt=["message","nextUrl","httpStatus"];class _t extends Error{constructor(e){let{message:t="Http Error",httpStatus:r}=e,n=(0,qe.Z)(e,vt);super(t),this.name=_t.errorName,this.httpStatus=r,Object.assign(this,n)}}_t.errorName="HttpError";class St extends _t{constructor(e={}){let{message:t="Not Found"}=e,r=(0,qe.Z)(e,yt);super({message:t,httpStatus:404}),this.name=St.errorName,Object.assign(this,r)}}St.errorName="NotFoundError";class Et extends _t{constructor(e){let{message:t="Redirect Found",nextUrl:r,httpStatus:n=307}=e,o=(0,qe.Z)(e,bt);super({message:t,httpStatus:n}),this.name=Et.errorName,this.nextUrl=r,this.httpStatus=n,Object.assign(this,o)}}Et.errorName="RedirectFoundError";class wt extends Error{constructor(e){super(e),this.isSilent=!0,this.name=wt.errorName}}wt.errorName="SilentError";const Ot=e=>e.name===Et.errorName,kt={logger:{debug:mt(),info:mt(),error:mt()},resultTransform:e=>1===e.length?e[0]:e};class Ct{constructor(e){this.subscribers=new Map;const t=Object.assign({},kt,e);this.logger=t.logger,this.resultTransform=t.resultTransform}subscribe(e,t){this.logger.debug("subscribe",e,t);let r=this.subscribers.get(e);return r?r.add(t):(r=new Set([t]),this.subscribers.set(e,r)),()=>r.delete(t)}publish(e,...t){this.logger.debug("publish",e,t);const r=this.subscribers.get(e);if(r&&r.size){const e=[];return r.forEach((r=>e.push(Promise.resolve(r(...t))))),Promise.all(e).then(this.resultTransform)}return Promise.resolve()}}var Tt=r(56322),Rt=r.n(Tt),Pt=r(88219),Mt=r.n(Pt),xt=r(75972),Nt=r.n(xt),It=r(41738),At=r.n(It),Dt=r(44121),jt=r.n(Dt),Lt=r(89660),Vt=r(10850);const Ut=["additionalBundleList"];class Ft{constructor({bundleList:e,componentRegistry:t,actionRegistry:r,dispatcher:n,dispatcherContext:o,logger:s}){this.bundles=e,this.componentRegistry=t,this.actionRegistry=r,this.dispatcher=n,this.dispatcherContext=o}get(e,t){return this.loadBundle(e,t).then((e=>this.resolve(e.default,t)))}has(e,t){return!!this.bundles[e]}async resolve(e,t){if(t&&e.components[t]){const r=e.components[t],n="function"==typeof r.load?(await r.load()).default:r;r!==n&&at()(r,n),n.components&&U()(((e,r)=>{this.componentRegistry.add(r,e,t)}),n.components),n.actions&&this.actionRegistry.add(t,n.actions),n.reducers&&n.reducers.forEach((e=>{this.dispatcher.registerStore(e),this.dispatcherContext.getStore(e)}))}return U()(((t,r)=>{this.componentRegistry.add(r,t,e.name)}),e.components),e.actions&&this.actionRegistry.add(e.name,e.actions),e.reducers&&e.reducers.forEach((e=>{this.dispatcher.registerStore(e),this.dispatcherContext.getStore(e)})),e}loadBundle(e,t){return this.has(e,t)?this.bundles[e]():Promise.reject(new Error(`Bundle "${e}" not found`))}}const qt=(0,He.yM)("setRequest"),Bt=(0,He.Lq)("requestManager",{}).on(qt,((e,t)=>t)),Ht=[{provide:a.Gu,scope:s.sX.REQUEST,useClass:class{constructor({request:e}){this.request=e||{},this.url=window.location.href}getBody(){return this.request.body}getUrl(){return this.url}getMethod(){return this.request.method}getHeader(e){return this.request.headers[e]}getHeaders(){return this.request.headers}getCookie(e){return this.request.cookies[e]}getCookies(){return this.request.cookies}getClientIp(){return this.getHeader("x-real-ip")||ut()(["connection","remoteAddress"],"",this.request)}getHost(){return window.location.host}},deps:{request:a.Z}},{provide:a.Ym,multi:!0,useValue:Bt}];let $t=class{};$t=(0,n.__decorate)([(0,o.Yl)({providers:[...Ht,(0,s.JJ)({provide:a.Z,useFactory:({store:e})=>{const t=e.getState(Bt);return Object.assign({},t,{headers:Object.assign({},null==t?void 0:t.headers,{"user-agent":navigator.userAgent,cookie:document.cookie})})},deps:{store:a.kR}})]})],$t);const Jt=[{provide:a.rX,scope:s.sX.REQUEST,useClass:class{constructor(){this.body="",this.headers={},this.cookies={},this.status=200}getBody(){return this.body}setBody(e){this.body=e}getHeader(e){return"set-cookie"===e?ht()(this.cookies):this.headers[e]}getHeaders(){return dt()(this.cookies)?this.headers:Object.assign({},this.headers,{"Set-Cookie":ht()(this.cookies)})}setHeader(e,t){this.headers[e]=t}getCookie(e){return this.cookies[e]}getCookies(){return this.cookies}setCookie(e,t){this.cookies[e]=t}setStatus(e){this.status=e}getStatus(){return this.status}},deps:{response:a.YC}}];let Yt=class{};Yt=(0,n.__decorate)([(0,o.Yl)({providers:[...Jt,{provide:a.YC,useValue:{}}]})],Yt);class Gt{constructor({di:e,dispatcherContext:t,pubsub:r,store:n}){this.executeAction=(e,t)=>this.di.get(a.R$).run(e,t),this.dispatch=(e,t)=>new Promise(((r,n)=>{try{r(this.store.dispatch((0,He.j$)(e,t)))}catch(e){n(e)}})),this.dispatchWith=(e,t)=>"function"==typeof e?(...r)=>this.dispatch(e(...r),t):t=>this.dispatch(e,t),this.getStore=e=>this.dispatcher.getStore(e),this.dehydrate=()=>({dispatcher:this.dispatcher.dehydrate()}),this.getState=e=>this.store.getState(e),this.subscribe=(...e)=>this.store.subscribe(e[0],e[1]),this.hasStore=e=>this.dispatcher.hasStore(e),this.registerStore=e=>this.dispatcher.registerStore(e),this.unregisterStore=e=>this.dispatcher.unregisterStore(e),this.store=n,this.dispatcher=t,this.dispatcher.setContext(this),this.di=e,this.pubsub=r}}const Kt=[.01,.025,.05,.1,.25,.5,1,2.5,5,10,20,40,60],zt={init:[i.Bi.init,i.Bi.listen],close:[i.Bi.close],customer:[i.Bi.customerStart,i.Bi.resolveUserDeps,i.Bi.resolvePageDeps,i.Bi.generatePage,i.Bi.clear],spa:[i.Bi.resolveUserDeps,i.Bi.resolvePageDeps,i.Bi.spaTransition],afterSpa:[i.Bi.afterSpaTransition]},Wt={server:zt,client:zt};let Qt=class{};Qt=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:i.S9,scope:s.sX.SINGLETON,useClass:class{constructor({lines:e,rootDi:t,logger:r,metrics:n}){this.lines=e,this.rootDi=t,this.log=r("command:command-line-runner"),this.metrics=n}run(e,t,r,n){const o=null!=n?n:((e,t,r,n)=>{let o=r;return"customer"===t&&"client"!==e&&(o=(0,s.HC)(o)),n&&n.forEach((e=>o.register(e))),o})(e,t,this.rootDi,r);return this.log.debug({event:"command-run",type:e,status:t}),this.lines[e][t].reduce(((e,t)=>e.then((()=>{const e=this.createDurationMetric();return Promise.resolve().then((()=>this.createLineChain(o,t))).finally((()=>e({line:t.toString()})))}))),Promise.resolve()).then((()=>o))}createLineChain(e,t){let r;try{if(r=e.get({token:t,optional:!0}),null===r)return Promise.resolve()}catch(t){return this.log.error(t),this.throwError(t,e)}return Array.isArray(r)?Promise.all(r.map((r=>this.instanceExecute(r,t,e)))):this.instanceExecute(r,t,e)}instanceExecute(e,t,r){if(!(e instanceof Function)){const r=new TypeError(`Ожидалась функция в обработке линии "commandLineListTokens.${t.toString()}", получено "${e}".\n      Проверьте, что все подписчики на commandLineListTokens возвращают функции`);return void this.log.error({event:"line-error",error:r,line:t.toString()})}const{name:n=""}=e;return this.log.debug({event:"line-run",line:t.toString(),command:n}),Promise.resolve().then((()=>e())).catch((e=>{this.log[(e=>!!e.isSilent)(e)?"debug":"error"]({event:"line-error",error:e,line:t.toString(),command:n}),this.throwError(e,r)}))}createDurationMetric(){return this.metrics?(this.metricsInstance||(this.metricsInstance=this.metrics.histogram({name:"command_line_runner_execution_time",help:"Command line processing duration",labelNames:["line"],buckets:Kt})),this.metricsInstance.startTimer()):mt()}throwError(e,t){throw e.di=t,e}},deps:{lines:i.PR,rootDi:s.ZF,logger:a.Fp,metrics:{token:ft,optional:!0}}},{provide:i.PR,scope:s.sX.SINGLETON,useValue:Wt}]})],Qt);let Zt=class{};Zt=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:a.eP,scope:s.sX.SINGLETON,useFactory:e=>()=>new Ct({logger:e.logger("pubsub")}),deps:{logger:a.Fp}},{provide:a.k3,scope:s.sX.REQUEST,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:a.eP}},{provide:a.Tm,scope:s.sX.SINGLETON,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:a.eP}}]})],Zt);const Xt=(0,s.V3)("initialAppState"),er=[{provide:Xt,useFactory:()=>JSON.parse(window.initialState||"{}"),scope:s.sX.REQUEST},{provide:i.Bi.listen,useFactory:({commandLineRunner:e})=>function(){return e.run("client","customer")},deps:{commandLineRunner:i.S9},multi:!0}],tr=(0,He.yM)("action state execution in server"),rr=(0,He.Lq)("actionTramvai",{serverState:{}}).on(tr,((e,t)=>Object.assign({},e,{serverState:t}))),nr="global";class or{constructor(e,t,r,n,o){this.globalConditionals=e,this.payload=t,this.parameters=r,this.executionState=n,this.type=o,this.status=!0,this.forbiddenMarker=!1,this.key=null,o===nr&&(this.status="success"!==n.status),this.conditions=r.conditions}check(){return this.globalConditionals.forEach((e=>{this.key=e.key,e.fn(this)})),this.getStatus()}setState(e){this.executionState.state[this.key]=e}getState(){return this.executionState.state[this.key]}forbid(){this.executionState.status="forbidden",this.forbiddenMarker=!0}allow(){this.status=!0}getStatus(){return!this.forbiddenMarker&&this.status}}const sr="@@global",ir={},ar={key:"pageServer",fn:e=>{e.conditions.pageServer&&e.type===nr&&e.forbid()}};let cr=class{};cr=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:a.Ym,multi:!0,useValue:rr},{provide:a.R9,scope:s.sX.SINGLETON,useClass:class{constructor({actionsList:e}){this.actions=new Map([[sr,x()(e)]])}add(e,t){const r=Nt()(t);this.actions.set(e,st()(this.actions.has(e)?[...this.actions.get(e),...r]:r))}get(e,t){return st()([...this.actions.get(e)||[],...t||[]])}getGlobal(){return this.actions.get(sr)}remove(e,t){if(!t)return void this.actions.delete(e);const r=Nt()(t);this.actions.has(e)&&this.actions.set(e,Mt()(this.actions.get(e),r))}},deps:{actionsList:i.I7}},(0,s.JJ)({provide:a.R$,scope:s.sX.REQUEST,useClass:class{constructor({actionConditionals:e,store:t,context:r,di:n,transformAction:o}){this.actionConditionals=x()(null!=e?e:[]),this.context=r,this.di=n,this.execution=new Map,this.transformAction=o||D();const s=t.getState(rr);s&&s.serverState&&Rt()(((e,t)=>{this.execution.set(t,e)}),s.serverState)}run(e,t,r="local"){this.transformAction(e);const n=(e=>e[Be.d])(e),o=this.getExecutionState(n);if(!this.canExecuteAction(t,n,o,r))return Promise.resolve();const s=n.deps?this.di.getOfDeps(n.deps):{};return o.status="pending",Promise.resolve().then((()=>e(this.context,t,s))).then((e=>(o.status="success",e))).catch((e=>{throw o.status="failed",e}))}getExecutionState(e){let t=this.execution.get(e.name);return t||(t={status:"pending",state:{}},this.execution.set(e.name,t)),t}canExecuteAction(e,t,r,n){return new or(this.actionConditionals,e,t,r,n).check()}},deps:{actionConditionals:{token:a.xW,optional:!0},context:a.l6,store:a.kR,di:s.ZF,transformAction:{token:"actionTransformAction",optional:!0}}}),{provide:a.FM,scope:s.sX.REQUEST,useClass:class{constructor({actionExecution:e,logger:t}){this.actionExecution=e,this.log=t("action:action-page-runner")}runActions(e,t=(()=>!1)){return Promise.all(e.map((e=>Promise.resolve().then((()=>this.actionExecution.run(e,ir,nr))).catch((r=>{const n=e[Be.d];if(this.log.error({error:r,event:"action-execution-error",message:`${n.name} execution error`}),t(r))throw r})))))}},deps:{actionExecution:a.R$,store:a.kR,limitTime:"limitActionGlobalTimeRun",logger:a.Fp}},{provide:"limitActionGlobalTimeRun",useValue:500},{provide:a.xW,multi:!0,useValue:[{key:"alwaysCondition",fn:e=>{e.conditions.always&&e.allow()}},{key:"onlyServer",fn:e=>{e.conditions.onlyServer&&e.forbid()}},{key:"onlyBrowser",fn:e=>{e.conditions.onlyBrowser}},ar,{key:"pageBrowser",fn:e=>{e.conditions.pageBrowser&&e.type}}]}]})],cr);let ur=class{};ur=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:a.qb,scope:s.sX.SINGLETON,useFactory:({stores:e})=>(0,He.pD)({stores:e&&x()(e)}),deps:{stores:{token:a.Ym,optional:!0}}},{provide:a.jm,scope:s.sX.REQUEST,useFactory:({dispatcher:e,initialState:t,middlewares:r})=>e.createContext({},t,[He.$J.middleware(),...x()(r||[])]),deps:{dispatcher:a.qb,middlewares:{token:a.PU,optional:!0},initialState:{token:Xt,optional:!0}}},{provide:a.kR,scope:s.sX.REQUEST,useFactory:({dispatcherContext:e})=>({getState:t=>e.getState(t),dispatch:t=>e.dispatch(t),subscribe:(t,r)=>e.subscribe(t,r)}),deps:{dispatcherContext:a.jm}}]})],ur),At().prototype.clear=At().prototype.reset;const lr=(e,...t)=>new(At())(...t),dr=(0,s.V3)("_cachesList");let pr=class{};pr=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:dr,scope:s.sX.SINGLETON,useValue:[]},{provide:a.xC,useFactory:({caches:e,isChildDi:t})=>t?lr:(t,...r)=>{const n=lr(t,...r);return e.push(n),n},deps:{caches:dr,isChildDi:{token:s.wG,optional:!0}}},{provide:a.oK,scope:s.sX.SINGLETON,useFactory:({caches:e,cachesClear:t})=>r=>(e.forEach((e=>e.clear())),t?Promise.all(t.map((e=>e(r)))):Promise.resolve()),deps:{caches:dr,cachesClear:{token:a.TZ,optional:!0}}}]})],pr);let hr=class{};hr=(0,n.__decorate)([(0,o.Yl)({imports:[Qt,Ye,Zt,nt,Ge.m,cr,ur,$t,Yt,pr],providers:[(0,s.JJ)({provide:a.vy,scope:s.sX.SINGLETON,useClass:class{constructor(){this.hooks=Object.create(null)}registerHooks(e,t){this.hooks[e]||(this.hooks[e]=[]),this.hooks[e]=st()(this.hooks[e].concat(t))}runHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;let s=r;for(let e=0;e<o.length;e++)s=o[e](t,s,n);return s}runAsyncHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;for(let e=0;e<o.length;e++){const s=o[e];setTimeout((()=>{s(t,r,n)}))}return r}runPromiseHooks(e,t,r){const n=this.hooks[e];return e=>{if(!n)return Promise.resolve(e);let o=0;return Promise.resolve(e).then((function e(s){const i=n[o++];return i?Promise.resolve(i(t,s,r)).then(e):s}))}}}}),(0,s.JJ)({provide:a.KI,scope:s.sX.SINGLETON,useClass:class{constructor({componentList:e}={}){this.components={__default:Object.assign({},...x()(null!=e?e:[]))}}add(e,t,r="__default"){const n=this.components[r]||{};n[e]=t,this.components[r]=n}get(e,t="__default"){return(this.components[t]||{})[e]||this.components.__default[e]}getComponentParam(e,t,r,n){return ut()([e],t,this.get(r,n))}},deps:{componentList:{token:"componentDefaultList",optional:!0}}}),(0,s.JJ)({provide:a.gE,scope:s.sX.SINGLETON,useFactory:e=>{let{additionalBundleList:t}=e,r=(0,qe.Z)(e,Ut);var n;return null===(n=t)||void 0===n||n.forEach((e=>{U()(((e,t)=>{t in r.bundleList||(r.bundleList[t]=()=>Promise.resolve({default:e}))}),e)})),new Ft(r)},deps:{bundleList:i.om,additionalBundleList:{token:a.xj,optional:!0},componentRegistry:a.KI,actionRegistry:a.R9,dispatcher:a.qb,dispatcherContext:a.jm,logger:a.Fp}}),(0,s.JJ)({provide:a.l6,scope:s.sX.REQUEST,useFactory:function({di:e,dispatcherContext:t,pubsub:r,store:n}){return new Gt({di:e,dispatcherContext:t,pubsub:r,store:n})},deps:{di:s.ZF,pubsub:a.k3,dispatcherContext:a.jm,store:a.kR}}),...er]})],hr);const fr=[(0,s.JJ)({provide:a.E6,useFactory:({commonState:e,config:t})=>e[`${t.key}`],deps:{commonState:Vt.FE,config:Vt.iO}})],gr=[(0,s.JJ)({provide:Vt.E,multi:!0,useValue:[a.qb,a.kR,a.l6]})],mr={customer:[Vt.Bi.customerStart,Vt.Bi.resolveUserDeps,Vt.Bi.resolvePageDeps],clear:[Vt.Bi.clear],spa:[Vt.Bi.resolveUserDeps,Vt.Bi.resolvePageDeps,Vt.Bi.spaTransition],afterSpa:[Vt.Bi.afterSpaTransition]},vr={server:mr,client:mr},yr=[(0,s.JJ)({provide:Vt.E,multi:!0,useValue:i.S9}),(0,s.JJ)({provide:i.PR,scope:s.sX.SINGLETON,useValue:vr})],br=[(0,s.JJ)({provide:Vt.E,multi:!0,useValue:[a.R$,a.FM]}),{provide:a.Ym,multi:!0,useValue:rr}];let _r=class{};_r=(0,n.__decorate)([(0,o.Yl)({providers:[...fr,...gr,...yr,...br,(0,s.JJ)({provide:Lt.Qv,multi:!0,useFactory:({context:e})=>t=>jt().createElement(He.zt,{context:e},t),deps:{context:a.l6}})]})],_r);var Sr=r(99463),Er=r(37384),wr=r.n(Er),Or=r(13970),kr=r.n(Or),Cr=r(40112),Tr=r.n(Cr),Rr=(r(61053),r(94945));const Pr=/\*/,Mr=/<history-fallback>/,xr=/([^(?]+)(?:\((.+)\))?(\?)?/,Nr=(e,t=!1)=>{const r=e.endsWith("/");return t?r||(e=>/\/.+\.[^/]+$/.test(e))(e)?e:`${e}/`:e.length>1&&r?e.slice(0,-1):e},Ir=e=>"string"==typeof e?{url:e}:e,Ar=(e,t)=>(e.add(t),()=>{e.delete(t)}),Dr=e=>e.split("/").slice(e.startsWith("/")?1:0,e.endsWith("/")?-1:1/0),jr=e=>Mr.test(e),Lr=e=>Pr.test(e),Vr=e=>e.includes(":"),Ur=(e,t)=>{const r=Dr(e),n=kr()((r=>{var n;if(jr(r)||Lr(r))throw new Error(`Pathname should be only a string with dynamic parameters, not a special string, got ${e}`);if(Vr(r)){const[e="",o="",s=""]=r.split(":"),i=xr.exec(o);if(!i)throw new Error('parameters should satisfy pattern "prefix:paramName(regexp)\\?:postfix"');const[,a,c,u]=i,l=null===(n=t[a])||void 0===n?void 0:n.toString();if(u&&!l)return"";if(!l)throw new Error(`value for parameter for ${a} should be defined in params`);if(c&&!new RegExp(c).test(l))throw new Error(`passed parameter for ${a} should satisfy regxep: ${c}, got: ${l}`);return e+l+s||r}return r}),r).join("/");return Nr(`/${n}`,e.endsWith("/"))};let Fr={trace:mt(),debug:mt(),info:mt(),warn:mt(),error:mt()};const qr=window.history&&window.history.pushState,Br=e=>e&&"string"==typeof e.key,Hr=(e,t)=>{const r=(e=>{const{to:t}=e;if(t)return`${t.name}_${t.path}`})(e);let{type:n}=e;return e.replace&&t&&(n=t.type===n?n:"navigate"),{key:r,type:n,navigateState:e.navigateState}};class $r extends class{init(e){}listen(e){this.listener=e}setTree(e){this.tree=e}}{constructor(){super(),this.currentIndex=0,this.historyWrapper=(({onNavigate:e})=>{if(!qr){const e=(e,t,r)=>{window.location.href=r};return window.history.pushState=e,window.history.replaceState=e,{navigate:({path:t})=>e({},"",t),history:()=>{throw new Error("Method not implemented")},init:mt(),subscribe:mt()}}let t=window.history;"__originalHistory"in window.history?t=window.history.__originalHistory:window.history.__originalHistory={pushState:t.pushState.bind(window.history),replaceState:t.replaceState.bind(window.history),go:t.go.bind(window.history)};const r=t.pushState.bind(window.history),n=t.replaceState.bind(window.history),o=t.go.bind(window.history),s=e=>{o(e)},i=(t=!1)=>(r,n,o)=>{e({url:o,replace:t,navigateState:r})};return window.history.pushState=i(!1),window.history.replaceState=i(!0),window.history.go=s,window.history.back=()=>s(-1),window.history.forward=()=>s(1),{navigate:({path:e,replace:t,state:o})=>{t?n(o,"",e):r(o,"",e)},history:s,init:e=>{n(e,"")},subscribe:e=>{window.addEventListener("popstate",(({state:t})=>{e({path:window.location.pathname+window.location.search+window.location.hash,state:t})}))}}})({onNavigate:({url:e,replace:t,navigateState:r})=>{this.listener({url:e,replace:t,navigateState:r})}})}init(e){var t;this.currentState=Br(null===(t=window.history)||void 0===t?void 0:t.state)?window.history.state:Hr(e),this.historyWrapper.init(this.currentState),this.historyWrapper.subscribe((async({path:e,state:t})=>{var r,n;try{let n,o;if(Br(t)){const{key:e,type:r}=this.currentState,{key:s,type:i}=t;this.currentState=t,o=t.navigateState,n=s!==e||"updateCurrentRoute"!==i&&"updateCurrentRoute"!==r?"navigate":"updateCurrentRoute"}else this.currentIndex=0;await this.listener({type:n,history:!0,url:e,navigateState:o}),null===(r=this.goPromiseResolve)||void 0===r||r.call(this)}catch(e){null===(n=this.goPromiseReject)||void 0===n||n.call(this,e)}}))}save(e){const{replace:t,url:r}=e;t||this.currentIndex++,this.currentState=Hr(e,this.currentState),this.historyWrapper.navigate({path:r.path,replace:t,state:this.currentState})}go(e,t){var r;if(this.currentIndex+e<0){if(null==t?void 0:t.historyFallback)return this.listener({url:t.historyFallback,type:"navigate",history:!1});const e=null===(r=this.tree)||void 0===r?void 0:r.getHistoryFallback(window.location.pathname);if(e)return this.listener({url:e.actualPath,type:"navigate",history:!1})}const n=new Promise(((e,t)=>{this.goPromiseResolve=e,this.goPromiseReject=t}));return this.historyWrapper.history(e),n}}const Jr=e=>e.href.replace(/#.*$/,""),Yr=(0,Dt.createContext)(null),Gr=(0,Dt.createContext)(null),Kr=(0,Dt.createContext)(null),zr=({router:e,children:t})=>{const[r,n]=(0,Dt.useState)({route:e.getCurrentRoute(),url:e.getCurrentUrl()});return(0,Rr.L)((()=>e.registerSyncHook("change",(({to:e,url:t})=>{n({route:e,url:t})}))),[e]),jt().createElement(Yr.Provider,{value:e},jt().createElement(Gr.Provider,{value:r.route},jt().createElement(Kr.Provider,{value:r.url},t)))};zr.displayName="Provider";var Wr=r(68072),Qr=r.n(Wr),Zr=r(35759),Xr=r.n(Zr);const en=["spaMode"],tn=["spaMode"],rn=(0,He.yM)("SET_CURRENT_ROUTE"),nn=(0,He.yM)("SET_URL_ON_REHYDRATE"),on=(0,He.Lq)("router",{currentRoute:null,previousRoute:null,currentUrl:null,previousUrl:null}).on(rn,((e,{to:t,from:r,url:n,fromUrl:o,replace:s})=>({currentRoute:t,previousRoute:s?e.previousRoute:r,currentUrl:n,previousUrl:s?e.previousUrl:o}))).on(nn,((e,t)=>Object.assign({},e,{currentUrl:t}))),sn=(0,s.V3)("router routerClassToken"),an=(0,s.V3)("router additionalParameters"),cn=(0,s.V3)("router onChangeHooks",{multi:!0}),un=(0,s.V3)("router beforeResolveHooks",{multi:!0}),ln=(0,s.V3)("router beforeNavigateHooks",{multi:!0}),dn=(0,s.V3)("router afterNavigateHooks",{multi:!0}),pn=(0,s.V3)("router beforeUpdateCurrentHooks",{multi:!0}),hn=(0,s.V3)("router afterUpdateCurrentHooks",{multi:!0}),fn=(0,s.V3)("router finalRouteTransform");(0,s.V3)("router bundleInfoAdditional");const gn=[{provide:X.sU,multi:!0,useFactory:({bundleManager:e,logger:t,actionRegistry:r,responseManager:n})=>{const o=t("route:load-bundles");return async({to:t})=>{o.debug({event:"load-bundle",route:t});const{bundle:r,pageComponent:s}=t.config;if(!e.has(r,s))return o.info({event:"load-bundle-not-found",bundle:r,pageComponent:s}),n.setStatus(404),!1;try{await e.get(r,s)}catch(e){return o.error({event:"load-bundle-failed",error:e}),!1}}},deps:{logger:a.Fp,bundleManager:a.gE,actionRegistry:a.R9,responseManager:a.rX}},{provide:X.sU,multi:!0,useFactory:({responseManager:e,logger:t})=>{const r=t("route:guard-check-error");return async()=>{if(e.getStatus()>=500)return r.error({event:"status-is-error",status:e.getStatus()}),!1}},deps:{logger:a.Fp,responseManager:a.rX}}],mn=({router:e})=>t=>jt().createElement(zr,{router:e},t),vn=[...gn,...[{provide:cn,multi:!0,useFactory:({context:e})=>t=>{e.dispatch(rn(t))},deps:{context:a.l6}}],...[{provide:fn,useFactory:({transformers:e})=>e&&0!==e.length?Qr()(...x()(e)):D(),deps:{transformers:{token:X.S3,optional:!0}}},{provide:X.S3,multi:!0,useValue:e=>{const t=Object.assign({bundle:"mainDefault",pageComponent:"pageDefault"},e.config);return Object.assign({},e,{config:t})}},{provide:X.S3,multi:!0,useValue:e=>Object.assign({},e,{path:Xr()(/\/?$/,"/",e.path)})},{provide:Lt.Qv,multi:!0,useFactory:mn,deps:{router:X.l1}}],...[!1].filter(Boolean),{provide:X.l1,useFactory:({RouterClass:e,routes:t,routeTransform:r,routeResolve:n,additionalParameters:o})=>{const s=new e(Object.assign({},o,{trailingSlash:!0,mergeSlashes:!0,routes:x()(null!=t?t:[]).map(r)}));return n&&s.registerHook("beforeResolve",(async e=>{if(!s.resolve(e.url.href)){const t=await n(e);t&&s.addRoute(r(t))}})),s},deps:{RouterClass:sn,additionalParameters:{token:an,optional:!0},routes:{token:X.Dk,optional:!0},routeTransform:fn,routeResolve:{token:X.TL,optional:!0}}},{provide:i.Bi.customerStart,multi:!0,useFactory:({router:e,guards:t,onChange:r,beforeResolve:n,beforeNavigate:o,afterNavigate:s,beforeUpdateCurrent:i,afterUpdateCurrent:a})=>function(){x()(null!=t?t:[]).forEach((t=>e.registerGuard(t))),x()(null!=r?r:[]).forEach((t=>e.registerSyncHook("change",t))),x()(null!=n?n:[]).forEach((t=>e.registerHook("beforeResolve",t))),x()(null!=o?o:[]).forEach((t=>e.registerHook("beforeNavigate",t))),x()(null!=s?s:[]).forEach((t=>e.registerHook("afterNavigate",t))),x()(null!=i?i:[]).forEach((t=>e.registerHook("beforeUpdateCurrent",t))),x()(null!=a?a:[]).forEach((t=>e.registerHook("afterUpdateCurrent",t)))},deps:{router:X.l1,guards:{token:X.sU,optional:!0},onChange:{token:cn,optional:!0},beforeResolve:{token:un,optional:!0},beforeNavigate:{token:ln,optional:!0},afterNavigate:{token:dn,optional:!0},beforeUpdateCurrent:{token:pn,optional:!0},afterUpdateCurrent:{token:hn,optional:!0}}},{provide:i.Bi.init,multi:!0,useFactory:({logger:e})=>function(){var t;t=e("route:router"),Fr=t},deps:{logger:a.Fp}},{provide:X.$d,useValue:"after"},(0,s.JJ)({provide:X.Y9,useClass:class{constructor({router:e,componentRegistry:t}){this.router=e,this.componentRegistry=t}getCurrentRoute(){return this.router.getCurrentRoute()}getCurrentUrl(){return this.router.getCurrentUrl()}getConfig(){var e,t;return null!==(t=null===(e=this.getCurrentRoute())||void 0===e?void 0:e.config)&&void 0!==t?t:{}}getContent(){var e;return null!==(e=this.getConfig().content)&&void 0!==e?e:{}}getMeta(){var e;return null!==(e=this.getConfig().meta)&&void 0!==e?e:{}}navigate(e){return this.router.navigate(e)}updateCurrentRoute(e){return this.router.updateCurrentRoute(e)}back(e){return this.router.back(e)}forward(){return this.router.forward()}go(e,t){return this.router.go(e,t)}addComponent(e,t){const r=this.getComponentsGroupName();return this.componentRegistry.add(e,t,r)}getComponent(e){const t=this.getComponentsGroupName();return this.componentRegistry.get(e,t)}resolveComponentFromConfig(e){var t;const r=`${e}Component`,n=`${e}Default`,o=null!==(t=this.getConfig()[r])&&void 0!==t?t:n;return this.getComponent(o)||this.getComponent(n)}getComponentsGroupName(){const{bundle:e,pageComponent:t}=this.getConfig();return e}},deps:{router:X.l1,componentRegistry:a.KI}}),{provide:a.Ym,multi:!0,useValue:on}],yn=e=>{if(e.name===St.errorName||Ot(e))return!0},bn=({store:e,router:t,actionRegistry:r,actionPageRunner:n})=>function(){const e=t.getCurrentRoute(),{config:{bundle:o,pageComponent:s}={}}=e;if(!o||!s)throw new Error(`bundle and pageComponent should be defined, but got ${e}`);const i=st()([...r.getGlobal()||[],...r.get(o)||[],...r.get(s)||[]]);return n.runActions(i,yn).catch((e=>{if(Ot(e))return t.navigate({url:e.nextUrl,replace:!0,code:e.httpStatus});throw e.error||e}))},_n=[...vn,(0,s.JJ)({provide:i.Bi.customerStart,multi:!0,useFactory:({router:e,store:t})=>async function(){const r=t.getState(on).currentRoute;return e.rehydrate({to:r})},deps:{router:X.l1,store:a.kR}}),(0,s.JJ)({provide:i.Bi.clear,multi:!0,useFactory:({router:e,store:t})=>function(){return t.getState().router.currentUrl.href!==window.location.href&&t.dispatch(nn(e.getCurrentUrl())),e.start()},deps:{router:X.l1,store:a.kR}}),(0,s.JJ)({provide:i.Bi.clear,multi:!0,useFactory:e=>{const t=e.store.getState(on).currentRoute;return"client"===e.renderMode&&(!t||t&&t.actualPath!==window.location.pathname)?mt():bn(e)},deps:{store:a.kR,router:X.l1,actionRegistry:a.R9,actionPageRunner:a.FM,renderMode:Lt.Ky}}),(0,s.JJ)({provide:i.Bi.clear,multi:!0,useFactory:({store:e,router:t,renderMode:r})=>async function(){const n=e.getState(on).currentRoute;if("client"===r&&(!n||n&&n.actualPath!==window.location.pathname))return t.navigate(window.location.href)},deps:{store:a.kR,router:X.l1,renderMode:Lt.Ky}})],Sn=e=>(t,r={})=>({mainModule:e,providers:[{provide:X.Dk,multi:!0,useValue:t},r.spaActionsMode&&{provide:X.$d,useValue:r.spaActionsMode}].filter(Boolean)});var En;const wn=(0,o.Yl)({providers:[..._n,{provide:sn,useValue:class extends class extends class{constructor({trailingSlash:e,mergeSlashes:t,beforeResolve:r=[],beforeNavigate:n=[],afterNavigate:o=[],beforeUpdateCurrent:s=[],afterUpdateCurrent:i=[],guards:a=[],onChange:c=[],onRedirect:u,onNotFound:l,onBlock:d}){this.started=!1,this.trailingSlash=!1,this.strictTrailingSlash=!0,this.mergeSlashes=!1,this.trailingSlash=null!=e&&e,this.strictTrailingSlash=void 0===e,this.mergeSlashes=null!=t&&t,this.hooks=new Map([["beforeResolve",new Set(r)],["beforeNavigate",new Set(n)],["afterNavigate",new Set(o)],["beforeUpdateCurrent",new Set(s)],["afterUpdateCurrent",new Set(i)]]),this.guards=new Set(a),this.syncHooks=new Map([["change",new Set(c)]]),this.onRedirect=u,this.onNotFound=l,this.onBlock=d}async start(){Fr.debug({event:"start"}),this.started=!0}getCurrentRoute(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.to)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.to}getCurrentUrl(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.url)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.url}commitNavigation(e){Fr.debug({event:"commit-navigation",navigation:e}),e.history||this.history.save(e),this.runSyncHooks("change",e),this.lastNavigation=e,this.currentNavigation=null}async updateCurrentRoute(e){return this.internalUpdateCurrentRoute(e,{})}async internalUpdateCurrentRoute(e,{history:t}){var r;const n=null!==(r=this.currentNavigation)&&void 0!==r?r:this.lastNavigation;if(!n)throw new Error("updateCurrentRoute should only be called after navigate to some route");const{replace:o,params:s,navigateState:i}=e,{to:a,url:c}=n,u={type:"updateCurrentRoute",from:a,to:this.resolveRoute({params:s,navigateState:i},{wildcard:!0}),url:this.resolveUrl(e),fromUrl:c,replace:o,history:t,navigateState:i,code:e.code};Fr.debug({event:"update-current-route",updateRouteOptions:e,navigation:u}),await this.run(u)}async runUpdateCurrentRoute(e){await this.runHooks("beforeUpdateCurrent",e),this.commitNavigation(e),await this.runHooks("afterUpdateCurrent",e)}async navigate(e){return this.internalNavigate("string"==typeof e?{url:e}:e,{})}async internalNavigate(e,{history:t}){var r;const{url:n,replace:o,params:s,navigateState:i,code:a}=e,c=null!==(r=this.currentNavigation)&&void 0!==r?r:this.lastNavigation;if(!n&&!c)throw new Error("Navigate url should be specified and cannot be omitted for first navigation");const u=this.resolveUrl(e),{to:l,url:d}=null!=c?c:{};let p={type:"navigate",from:l,url:u,fromUrl:d,replace:o,history:t,navigateState:i,code:a};await this.runHooks("beforeResolve",p);const h=this.resolveRoute({url:u,params:s,navigateState:i},{wildcard:!0});if(h&&(p=Object.assign({},p,{to:h})),Fr.debug({event:"navigation",navigation:p}),!p.to)return this.notfound(p);await this.run(p)}async runNavigate(e){if(e.to.redirect)return this.redirect(e,Ir(e.to.redirect));await this.runGuards(e),await this.runHooks("beforeNavigate",e),this.commitNavigation(e),await this.runHooks("afterNavigate",e)}async run(e){this.currentNavigation=e,"navigate"===e.type&&await this.runNavigate(e),"updateCurrentRoute"===e.type&&await this.runUpdateCurrentRoute(e)}resolve(e,t){const r="string"==typeof e?{url:e}:e;return this.resolveRoute(Object.assign({},r,{url:(0,Sr.Qc)(r.url)}),t)}back(e){return this.go(-1,e)}forward(){return this.go(1)}async go(e,t){return Fr.debug({event:"history.go",to:e}),this.history.go(e,t)}isNavigating(){return!!this.currentNavigation}async dehydrate(){throw new Error("Not implemented")}async rehydrate(e){throw new Error("Not implemented")}addRoute(e){var t;null===(t=this.tree)||void 0===t||t.addRoute(e)}async redirect(e,t){var r;return Fr.debug({event:"redirect",navigation:e,target:t}),null===(r=this.onRedirect)||void 0===r?void 0:r.call(this,Object.assign({},e,{from:e.to,fromUrl:e.url,to:null,url:this.resolveUrl(t)}))}async notfound(e){var t;return Fr.debug({event:"not-found",navigation:e}),null===(t=this.onNotFound)||void 0===t?void 0:t.call(this,e)}async block(e){if(Fr.debug({event:"blocked",navigation:e}),this.currentNavigation=null,this.onBlock)return this.onBlock(e);throw new Error("Navigation blocked")}normalizePathname(e){let t=e;return this.mergeSlashes&&(t=(e=>{const[t,...r]=e.split("?");return[t.replace(/\/+/g,"/").replace(/^(\w+):\//,"$1://"),...r].join("?")})(t)),this.strictTrailingSlash||(t=Nr(t,this.trailingSlash)),t}resolveUrl({url:e,query:t={},params:r,preserveQuery:n,hash:o}){var s;const i=this.getCurrentRoute(),a=this.getCurrentUrl(),c=e?(0,Sr.Hz)(null!==(s=null==a?void 0:a.href)&&void 0!==s?s:"",e):(0,Sr.F_)(a.href);let{pathname:u}=c;return r&&(e?u=Ur(c.pathname,r):i&&(u=Ur(i.path,Object.assign({},i.params,r)))),u=this.normalizePathname(u),(0,Sr.n2)((0,Sr.co)(c,{pathname:u,search:e?c.search:"",query:Object.assign({},n?this.getCurrentUrl().query:{},t),hash:null!=o?o:c.hash}))}resolveRoute({url:e,params:t,navigateState:r},{wildcard:n}={}){var o,s;let i=e?null===(o=this.tree)||void 0===o?void 0:o.getRoute(e.pathname):this.getCurrentRoute();if(n&&!i&&e&&(i=null===(s=this.tree)||void 0===s?void 0:s.getWildcard(e.pathname)),i)return t||r!==i.navigateState?Object.assign({},i,{params:Object.assign({},i.params,t),navigateState:r}):i}async runGuards(e){if(Fr.debug({event:"guards.run",navigation:e}),!this.guards)return void Fr.debug({event:"guards.empty",navigation:e});const t=await Promise.all(Array.from(this.guards).map((t=>Promise.resolve(t(e)).catch((e=>{Fr.warn({event:"guard.error",error:e})})))));Fr.debug({event:"guards.done",navigation:e,results:t});for(const r of t){if(!1===r)return this.block(e);if(W()(r)||wr()(r))return this.redirect(e,Ir(r))}}registerGuard(e){return Ar(this.guards,e)}runSyncHooks(e,t){Fr.debug({event:"sync-hooks.run",hookName:e,navigation:t});const r=this.syncHooks.get(e);if(r){for(const e of r)try{e(t)}catch(e){Fr.warn({event:"sync-hooks.error",error:e})}Fr.debug({event:"sync-hooks.done",hookName:e,navigation:t})}else Fr.debug({event:"sync-hooks.empty",hookName:e,navigation:t})}registerSyncHook(e,t){return Ar(this.syncHooks.get(e),t)}async runHooks(e,t){Fr.debug({event:"hooks.run",hookName:e,navigation:t});const r=this.hooks.get(e);r?(await Promise.all(Array.from(r).map((r=>Promise.resolve(r(t)).catch((t=>{if(Fr.warn({event:"hook.error",error:t}),"beforeResolve"===e)throw t}))))),Fr.debug({event:"hooks.done",hookName:e,navigation:t})):Fr.debug({event:"hooks.empty",hookName:e,navigation:t})}registerHook(e,t){return Ar(this.hooks.get(e),t)}}{constructor(e){super(e),this.history=new $r,this.history.listen((async({type:e,url:t,navigateState:r,replace:n,history:o})=>{var s;const i=this.getCurrentUrl(),{pathname:a,query:c}=this.resolveUrl({url:t}),u=i.pathname===a;if("updateCurrentRoute"===e||!e&&u){const e=null===(s=this.tree)||void 0===s?void 0:s.getRoute(a);await this.internalUpdateCurrentRoute({params:null==e?void 0:e.params,query:c,replace:n,navigateState:r},{history:o})}else await this.internalNavigate({url:t,replace:n,navigateState:r},{history:o})}))}async rehydrate(e){Fr.debug({event:"rehydrate",navigation:e});const t=(0,Sr.Qc)(window.location.href);this.currentNavigation=Object.assign({},e,{type:"navigate",url:t}),this.lastNavigation=this.currentNavigation,await this.runGuards(this.currentNavigation),this.history.init(this.currentNavigation),this.currentNavigation=null,e.to&&this.addRoute({name:e.to.name,path:e.to.path,config:e.to.config,alias:t.pathname})}resolveRoute(...e){const{url:t}=e[0];if(!t||(e=>!e.host||e.host===window.location.host)(t))return super.resolveRoute(...e)}async notfound(e){return await super.notfound(e),e.replace?window.location.replace(e.url.href):window.location.assign(e.url.href),new Promise((()=>{}))}async block(e){return this.notfound(e)}async redirect(e,t){return await super.redirect(e,t),this.navigate(Object.assign({},t,{replace:t.replace||e.replace}))}}{run(e){const{type:t,fromUrl:r,url:n}=e;return"updateCurrentRoute"===t||Jr(n)===Jr(r)?super.run(e):this.notfound(e)}async runHooks(){}}}]})(((En=class{}).forRoot=Sn(En),En));s.ZF,i.S9,s.ZF,i.S9,i.Bi.spaTransition,a.kR,X.l1,a.R9,a.FM,X.$d,i.Bi.afterSpaTransition,a.kR,X.l1,a.R9,a.FM,X.$d;var On;(On=class{}).forRoot=Sn(On);let kn=class{};kn=(0,n.__decorate)([(0,o.Yl)({providers:[(0,s.JJ)({provide:Lt.Qv,multi:!0,useFactory:mn,deps:{router:X.l1}}),{provide:Vt.zJ,multi:!0,useValue:on}]})],kn);var Cn=r(32494),Tn=r(65201);const Rn=["children"],Pn=["header","footer","layout","content","page"],Mn=e=>Array.isArray(e)?e:[e],xn=(e,t)=>Mn(null!=t?t:[]).reduce(((e,t)=>t(e)),e),Nn=({children:e})=>e,In=e=>{let{children:t}=e;return t((0,qe.Z)(e,Rn))},An=(0,He.yM)("setPageError"),Dn=(0,He.Lq)("pageError",null).on(An,((e,t)=>t&&function(e){return Object.assign({},e,{message:e.message,stack:e.stack})}(t))),jn=e=>{const{children:t,fallback:r}=e,n=(0,Dt.useContext)(Kr),o=(0,He.oR)(Dn),s=(0,Dt.useMemo)((()=>o&&function(e){const t=new Error(e.message);return Object.assign(t,e),t}(o)),[o]),i=(0,Tn.xq)({token:Tn.O7,optional:!0}),a=(0,Tn.xq)({token:Tn.Ek,optional:!0});return jt().createElement(Tn.EC,{url:n,error:s,errorHandlers:i,fallback:r,fallbackFromDi:a},t)};class Ln extends Dt.PureComponent{render(){const{LayoutComponent:e,PageComponent:t,HeaderComponent:r,FooterComponent:n,ErrorBoundaryComponent:o}=this.props;return jt().createElement(e,{Header:r,Footer:n},jt().createElement(jn,{fallback:o},jt().createElement(t,null)))}}const Vn=({pageService:e})=>{const{config:t}=(0,Dt.useContext)(Gr),{pageComponent:r}=t;let n=e.getComponent(r);n||(n=()=>{throw new Error(`Page component '${r}' not found`)});const o=e.resolveComponentFromConfig("layout"),s=e.resolveComponentFromConfig("header"),i=e.resolveComponentFromConfig("footer"),a=e.resolveComponentFromConfig("errorBoundary");return jt().createElement(Ln,{HeaderComponent:s,FooterComponent:i,LayoutComponent:o,PageComponent:n,ErrorBoundaryComponent:a})};let Un=class{};Un=(0,n.__decorate)([(0,o.Yl)({providers:[{provide:Lt.MV,useFactory:({layoutOptions:e})=>{var t;return(({components:e={},wrappers:t={}}={})=>{const{header:r=In,footer:n=In,layout:o=Nn,content:s=Nn,page:i=Nn}=e,a=(0,qe.Z)(e,Pn),c=xn(o,t.layout),u=xn(s,t.content),l=xn(i,t.page),d=xn(r,t.header),p=xn(n,t.footer),h=Object.keys(a).map((e=>({name:e,Component:xn(a[e],t[e])}))),f=({children:e,Header:t,Footer:r})=>jt().createElement(c,null,h.map((({Component:e,name:t})=>jt().createElement(e,{key:t}))),jt().createElement(u,null,t?jt().createElement(d,null,(e=>jt().createElement(t,Object.assign({},e)))):null,jt().createElement(l,null,e),r?jt().createElement(p,null,(e=>jt().createElement(r,Object.assign({},e)))):null));return f.displayName="Layout",f})((t=e,x()(null!=t?t:[]).reduce(((e,t)=>{const{components:r,wrappers:n}=e;return t.components&&Object.assign(r,t.components),t.wrappers&&Object.keys(t.wrappers).forEach((e=>{n[e]||(n[e]=[]),n[e].push(...Mn(t.wrappers[e]))})),e}),{components:{},wrappers:{}})))},deps:{layoutOptions:{token:Lt.OQ,optional:!0}}},{provide:"componentDefaultList",multi:!0,useFactory:e=>e,deps:{layoutDefault:Lt.MV,footerDefault:{token:Lt.mc,optional:!0},headerDefault:{token:Lt.fT,optional:!0}}}]})],Un);const Fn=[(0,s.JJ)({provide:a.Ym,multi:!0,useValue:Dn}),(0,s.JJ)({provide:Lt.Ky,useValue:"ssr"})];var qn;let Bn=qn=class{static forRoot({mode:e,useStrictMode:t}){const r=[];return"string"!=typeof e&&"boolean"!=typeof t||r.push({provide:Lt.d6,useValue:null!=t?t:"strict"===e}),{mainModule:qn,providers:r}}};Bn=qn=(0,n.__decorate)([(0,o.Yl)({imports:[Un],providers:[...Fn,(0,s.JJ)({provide:i.Bi.customerStart,multi:!0,useFactory:({router:e,store:t})=>function(){e.registerHook("beforeResolve",(async()=>{t.getState(Dn)&&t.dispatch(An(null))}))},deps:{router:X.l1,store:a.kR}}),(0,s.JJ)({provide:Lt.$j,useFactory:({logger:e})=>({getPageResources:()=>[],register:()=>{}}),deps:{logger:a.Fp}}),(0,s.JJ)({provide:i.Bi.generatePage,useFactory:e=>function(){return window.contextExternal=e.consumerContext,function({pageService:e,log:t,consumerContext:n,customRender:o,extendRender:s,di:i,useStrictMode:a,rendererCallback:c}){return new Promise(((u,l)=>{let d=function({pageService:e,di:t},r){return jt().createElement(He.zt,{context:r},jt().createElement(Tn.n5.Provider,{value:t},jt().createElement(Vn,{pageService:e})))}({pageService:e,di:i},n);if(s&&We()((e=>{d=e(d)}),s),o)return o(d);a&&(d=(0,Dt.createElement)(Dt.StrictMode,null,d));const p=document.querySelector(".application"),h=e=>null==c?void 0:c.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),f={element:d,container:p,callback:()=>{t.debug("App rendering"),document.querySelector("html").classList.remove("no-js"),h(),u()},log:t};try{(({element:e,container:t,callback:n})=>{const{hydrate:o}=r(90776);o(e,t,n)})(f)}catch(e){h(e),l(e)}}))}(e)},deps:{pageService:X.Y9,log:a.Fp,customRender:{token:Lt.p6,optional:!0},extendRender:{token:Lt.Qv,optional:!0},rendererCallback:{token:Lt.IF,optional:!0},consumerContext:a.l6,di:s.ZF,useStrictMode:Lt.d6},multi:!0}),(0,s.JJ)({provide:Lt.d6,useFactory:({deprecatedMode:e})=>"strict"===e,deps:{deprecatedMode:Lt.QH}}),(0,s.JJ)({provide:Lt.QH,useValue:"legacy"})]})],Bn);var Hn,$n,Jn=r(86247),Yn=r.n(Jn);!function(e){e.static="static",e.dynamic="dynamic"}(Hn||(Hn={})),Hn.static,Hn.dynamic,function(e){e.iconLink="iconLink",e.meta="meta",e.inlineScript="inlineScript",e.script="script",e.asIs="asIs",e.preconnectLink="preconnectLink",e.preloadLink="preloadLink",e.inlineStyle="inlineStyle",e.style="style"}($n||($n={})),$n.iconLink,$n.meta,$n.inlineScript,$n.script,$n.asIs,$n.preconnectLink,$n.preloadLink,$n.inlineStyle,$n.style;const Gn=q()(((e,t,r)=>r&&t?`${e} ${r}="${t}"`:null===t?e:`${e} ${r}`),""),Kn={[$n.asIs]:Yn()("payload"),[$n.iconLink]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({},t,{href:e})}),[$n.meta]:Yn()("payload"),[$n.inlineScript]:({payload:e,attrs:t})=>({tag:"script",innerHtml:e,attributes:t}),[$n.script]:({payload:e,attrs:t})=>({tag:"script",attributes:Object.assign({defer:"defer",charset:"utf-8",crossorigin:"anonymous"},t,{src:e})}),[$n.preconnectLink]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({},t,{rel:"preconnect",href:e})}),[$n.preloadLink]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({charset:"utf-8"},t,{rel:"preload",href:e})}),[$n.inlineStyle]:({payload:e})=>({tag:"style",attributes:{type:"text/css"},innerHtml:e}),[$n.style]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({},t,{rel:"stylesheet",href:e})})},zn=(Rt()((e=>(...t)=>{const r=e(...t);return"string"==typeof r?r:(({tag:e,attributes:t,innerHtml:r})=>{const n=`${Gn(t)}`;return r?`<${e}${n}>${r}</${e}>`:`<${e}${n}></${e}>`})(r)}),Kn),e=>Math.round(e)/1e3),Wn=e=>t=>e.test(t),Qn=Wn(/\.js$/),Zn=Wn(/\.css$/),Xn=Wn(/\.(?:svg|png|jpeg|webp|jpg)$/),eo=Wn(/\.(?:woff|eot|woff2|ttf)/);var to;!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(to||(to={}));const ro=(e,t)=>{if(e.getEntriesByType)return e.getEntriesByType(t)},no=e=>{const t=ro(e,"paint");return t&&t[0]?t[0].startTime:0},oo=(e,t)=>e&&e[t]||0,so=(e,t)=>({duration:oo(e,"duration")+zn(t.duration),transferSize:oo(e,"transferSize")+t.transferSize,encodedBodySize:oo(e,"encodedBodySize")+t.encodedBodySize});function io(){let e;try{if(e=window.performance,!e.timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}const{requestStart:t,responseStart:r,responseEnd:n,domComplete:o,loadEventEnd:s,domInteractive:i,navigationStart:a}=e.timing,c=[{key:"connection",start:a,end:t},{key:"backend",start:t,end:r},{key:"pageDownload",start:r,end:n},{key:"first-paint",start:0,end:no(e)},{key:"domInteractive",start:a,end:i},{key:"domComplete",start:a,end:o},{key:"pageLoadTime",start:a,end:s}],u={};return c.forEach((e=>{const t=zn(e.end-e.start);u[e.key]=t>0||t<2e3?t:void 0})),u.download=(e=>{const t={},r=ro(e,"resource");r&&r.length>0&&r.forEach((e=>{const r=(e=>{switch(!0){case Zn(e):return to.css;case Qn(e):return to.js;case Xn(e):return to.img;case eo(e):return to.font;default:return to.other}})(e.name.split("?",1)[0]);to[r]&&(t[r]=so(t[r],e))}));const n=ro(e,"navigation");return n&&n.length>0&&(t[to.html]=so({},n[0])),t})(e),u}class ao{constructor(e){}inc(){}reset(){}remove(){}labels(){return{inc(){}}}}class co{constructor(e){}inc(){}dec(){}set(){}setToCurrentTime(){}reset(){}remove(){}startTimer(e){return e=>{}}labels(){return{inc(){},dec(){},set(){},setToCurrentTime(){},startTimer:()=>e=>{}}}}class uo{constructor(e){}observe(){}startTimer(e){return e=>{}}reset(){}remove(){}labels(){return{observe(){},startTimer:()=>()=>{}}}}class lo{constructor(e){}observe(){}startTimer(){return e=>{}}reset(){}labels(e){return{observe(){},startTimer:()=>e=>{}}}remove(){}}var po=r(8716);const ho=(0,He.yM)("set instant metrics map"),fo=(0,He.Lq)("instantMetrics",{instantMetricsMap:{}}).on(ho,((e,t)=>t)),go=[{provide:a.Ym,multi:!0,useValue:[fo]}];let mo=class{};mo=(0,n.__decorate)([(0,o.Yl)({providers:[...go,{provide:i.Bi.init,scope:s.sX.SINGLETON,multi:!0,useFactory({logger:e,papiService:t,context:r}){if(!t)return()=>{};const n=r.getStore("instantMetrics").getState().instantMetricsMap,o=new Se.RemoteReporter({requestCount:1,emitLevels:{trace:!0,debug:!0,info:!0,warn:!0,error:!0,fatal:!0},makeRequest:e=>n[e.event]?t.request({path:`metrics/${e.event}`,method:"post",payload:e.value?{value:e.value}:{}}).then((({payload:e})=>e)):Promise.resolve()});return()=>{e.addBeforeReporter(o)}},deps:{papiService:{token:po.J2,optional:!0},context:a.l6,logger:a.Fp}}]})],mo),"undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&performance.clearMeasures;let vo=class{};vo=(0,n.__decorate)([(0,o.Yl)({imports:[mo],providers:[{provide:ft,useFactory:()=>({counter:e=>new ao(Object.assign({},e)),gauge:e=>new co(Object.assign({},e)),histogram:e=>new uo(Object.assign({},e)),summary:e=>new lo(Object.assign({},e))}),scope:s.sX.SINGLETON},{provide:i.Bi.init,useFactory:({logger:e})=>()=>{window.addEventListener("load",(()=>{setTimeout((()=>{const t=io();e({name:"metrics:perf",defaults:{remote:{emitLevels:{info:!0}}}}).info(Object.assign({},t,{event:"perf-timings"}))}),0)}))},multi:!0,deps:{logger:a.Fp}}]})],vo);const yo=[{provide:Ke.a9,useFactory:({appInfo:e})=>`/${e.appName}/papi`,deps:{appInfo:i.Qo}},{provide:Ke.QR,useFactory:({appInfo:e})=>`/${e.appName}/private/papi`,deps:{appInfo:i.Qo}}];let bo=class{};bo=(0,n.__decorate)([(0,o.Yl)({providers:[...yo]})],bo);let _o=class{};_o=(0,n.__decorate)([(0,o.Yl)({imports:[vo,bo],providers:[]})],_o);var So=r(41841),Eo=r(20543),wo=r.n(Eo),Oo=r(39329),ko=r.n(Oo),Co=r(49331),To=r.n(Co),Ro=r(46818),Po=r.n(Ro),Mo=r(83411),xo=r.n(Mo),No=r(58318),Io=r.n(No);const Ao=e=>t=>{const[r,n]=(0,Dt.useState)(!1);return(0,Dt.useEffect)((()=>{if(!t.current||r)return;const o=new IntersectionObserver(((e,t)=>{e.forEach((({isIntersecting:e})=>{e&&(t.disconnect(),n(!0))}))}),e);return o.observe(t.current),()=>{o.disconnect()}}),[t]),r},Do={__html:""},jo=Ao({root:null,rootMargin:"200px 0px 0px 0px"}),Lo=({mode:e,children:t,useObserver:r=jo,wrapper:n="div",wrapperProps:o={}})=>{const s=(0,Dt.useRef)(null);return r(s)||"static"===e?jt().createElement(n,Object.assign({},o),t):jt().createElement(n,Object.assign({ref:s,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Do},o))};Lo.displayName="LazyRender";var Vo=r(49079),Uo=r.n(Vo);const Fo=(e,t,r={})=>{const n=document.createElement("link");return Object.assign(n,r,{rel:e,href:t}),new Promise(((e,r)=>{n.onerror=()=>r(new Error(`could not load link ${t}`)),"onload"in n?n.onload=e:setTimeout(e,50),document.head.appendChild(n)}))},qo=(e,t={},r)=>{const n=document.createElement("script");return Object.assign(n,t,{async:!0,src:e}),r&&r(n),new Promise(((t,r)=>{n.onerror=t=>r(new Error(`could not load script ${e} ${t.message||t}`)),n.onload=t,document.head.appendChild(n)}))},Bo=e=>null==e?void 0:e.replace(/^https?:/,""),Ho=e=>Tr()((t=>!!t.href&&Bo(t.href)===e),document.styleSheets),$o=e=>document.querySelector(`[data-href="${e}"]`);const Jo={trace:mt(),debug:mt(),info:mt(),warning:mt(),error:mt()},Yo=["path","parentName","properties"],Go=(0,Dt.createContext)({loader:void 0}),Ko=xo()([[wo(),jt().createElement],[ko(),jt().cloneElement],[W(),D()],[Io(),Po()("")]]);class zo extends Dt.Component{constructor(e,t){super(e,t);const{loader:r}=this.props,n=null==r?void 0:r(e.moduleName,e.moduleVersion,{lazy:!!e.lazy}),o=To()(n);this.state={module:o||!n?null:n.default,failed:!n},o&&n.then((e=>this.setState({module:e.default}))).catch((()=>this.setState({failed:!0})))}render(){const{error:e,loading:t,moduleProps:r,moduleInitialState:n,moduleInnerStore:o}=this.props,{module:s,failed:i}=this.state;return s?jt().createElement(s,Object.assign({},r,{moduleInnerStore:o,moduleInitialState:n})):Ko(i?e:t)}}zo.displayName="ModuleWrapper",zo.defaultProps={error:jt().createElement("div",null),loading:jt().createElement("div",null)};const Wo={root:null,rootMargin:"200px 0px 0px 0px"},Qo=e=>{const{moduleName:t,moduleVersion:r,loader:n,lazyMode:o,lazyObserverOptions:s,lazyWrapper:i,lazyWrapperProps:a}=e,c=(0,Dt.useMemo)((()=>(({moduleName:e,moduleVersion:t,loader:r,lazyObserverOptions:n})=>{const o=Ao(n||Wo);return n=>{const s=o(n),[i,a]=(0,Dt.useState)(!1);return(0,Dt.useEffect)((()=>{s&&r&&Promise.resolve(r(e,t)).catch(mt()).then((()=>{a(!0)}))}),[s]),i}})({moduleName:t,moduleVersion:r,loader:n,lazyObserverOptions:s})),[t,r,n,s]);return jt().createElement(Lo,{useObserver:c,wrapper:i,wrapperProps:a,mode:o},jt().createElement(zo,Object.assign({},e)))},Zo=e=>jt().createElement(Go.Consumer,null,(({loader:t})=>e.lazy?jt().createElement(Qo,Object.assign({},e,{loader:t,lazyMode:void 0})):jt().createElement(zo,Object.assign({},e,{loader:t})))),Xo=e=>`${-1===e.indexOf("localhost")?"https":"http"}://${e.replace(/\/$/,"")}`,es=(e,t)=>"string"==typeof e?{[e]:t}:"object"==typeof e?e:null,ts={config:{},navigate:{url:{query:{}}},params:{}},rs=(e,t)=>{if(!e)return ts;const r=(e=>{var t;const r=null!==(t=e.config)&&void 0!==t?t:{},{path:n,parentName:o,properties:s}=r,i=(0,qe.Z)(r,Yo);return Object.assign({},i,s,{path:Uo()("/",n)?n:`${n}/`,parent:o})})(e);return Object.assign({},e,{config:r,navigate:{url:t},url:r.path,query:t.query,parsedUrl:t})};class ns{constructor(e={}){this.log=e.log||Jo}isLoaded(e){return!!this.get(e)}get(e){return(e=>{if(window.__externals&&window.__externals[e])return window.__externals[e]})(e.name)}load(e){const t=e.name;let r=this.get(e);if(r)return this.log.debug(`module "${t}" returned from cache`),r;this.log.debug(`module "${t}" will be fetched`);const n=()=>(r=this.get(e),r?(this.log.debug(t,"loaded"),Promise.resolve(r)):(this.log.error(`cannot find module ${t}`),Promise.reject(new Error(`Error resolving module ${t}`))));return function(e,t={}){const r=(n=e,Tr()((e=>!!e.src&&Bo(e.src)===n),document.scripts));var n;if(r){const e=r.getAttribute("loaded");return e?"true"===e?Promise.resolve():Promise.reject():new Promise((