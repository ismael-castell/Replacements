/*! For license information please see bundle.f9808092507a73433fcc.js.LICENSE.txt */
!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()()}var installedModules={},installedCssChunks={5:0},installedChunks={5:0};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function(chunkId){var promises=[];installedCssChunks[chunkId]?promises.push(installedCssChunks[chunkId]):0!==installedCssChunks[chunkId]&&{0:1,1:1,2:1,4:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1}[chunkId]&&promises.push(installedCssChunks[chunkId]=new Promise((function(resolve,reject){for(var href=({}[chunkId]||chunkId)+"."+{0:"fbbfe9910218178ad0c4",1:"4930e1cc1479d6bd0083",2:"6ea1ba9653fb7c4b8d84",3:"31d6cfe0d16ae931b73c",4:"d95b1bf0be949b8bee95",6:"43976268216889334978",7:"d58d6409ba9047dfe9f9",8:"3f31ea177b903db1f196",9:"b8e40a719dde4eedb98c",10:"2babf8d0a07aa5a27df3",11:"19262e7b83b127b747db",12:"d511b16db7fb65c4d474",13:"ecc229336f50dd14e795",14:"bd7b74ebf65319041083",15:"cd5f5aa398184b14c0c7",16:"4c899b8ab89011644e9f",17:"a8e710800797fbc141fe",18:"ae9f8b22fae1851b4d67",19:"31d6cfe0d16ae931b73c",20:"31d6cfe0d16ae931b73c",21:"31d6cfe0d16ae931b73c",22:"31d6cfe0d16ae931b73c",23:"31d6cfe0d16ae931b73c",24:"31d6cfe0d16ae931b73c",25:"31d6cfe0d16ae931b73c",26:"31d6cfe0d16ae931b73c",27:"31d6cfe0d16ae931b73c",28:"31d6cfe0d16ae931b73c",29:"31d6cfe0d16ae931b73c",30:"31d6cfe0d16ae931b73c",31:"31d6cfe0d16ae931b73c",32:"31d6cfe0d16ae931b73c",33:"31d6cfe0d16ae931b73c",34:"31d6cfe0d16ae931b73c",35:"31d6cfe0d16ae931b73c",36:"31d6cfe0d16ae931b73c",37:"31d6cfe0d16ae931b73c",38:"31d6cfe0d16ae931b73c",39:"31d6cfe0d16ae931b73c",40:"31d6cfe0d16ae931b73c",41:"31d6cfe0d16ae931b73c",42:"31d6cfe0d16ae931b73c"}[chunkId]+".css",fullhref=__webpack_require__.p+href,existingLinkTags=document.getElementsByTagName("link"),i=0;i<existingLinkTags.length;i++){var dataHref=(tag=existingLinkTags[i]).getAttribute("data-href")||tag.getAttribute("href");if("stylesheet"===tag.rel&&(dataHref===href||dataHref===fullhref))return resolve()}var existingStyleTags=document.getElementsByTagName("style");for(i=0;i<existingStyleTags.length;i++){var tag;if((dataHref=(tag=existingStyleTags[i]).getAttribute("data-href"))===href||dataHref===fullhref)return resolve()}var linkTag=document.createElement("link");linkTag.rel="stylesheet",linkTag.type="text/css",linkTag.onload=resolve,linkTag.onerror=function(event){var request=event&&event.target&&event.target.src||fullhref,err=new Error("Loading CSS chunk "+chunkId+" failed.\n("+request+")");err.code="CSS_CHUNK_LOAD_FAILED",err.request=request,delete installedCssChunks[chunkId],linkTag.parentNode.removeChild(linkTag),reject(err)},linkTag.href=fullhref,document.getElementsByTagName("head")[0].appendChild(linkTag)})).then((function(){installedCssChunks[chunkId]=0})));var installedChunkData=installedChunks[chunkId];if(0!==installedChunkData)if(installedChunkData)promises.push(installedChunkData[2]);else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var onScriptComplete,script=document.createElement("script");script.charset="utf-8",script.timeout=120,__webpack_require__.nc&&script.setAttribute("nonce",__webpack_require__.nc),script.src=function(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+"."+{0:"72c44f08aee1388ea42c",1:"431c36414e5693ffa504",2:"13afa7083f2a7cb433b4",3:"6404210168f5af146b9a",4:"b0fc4b99fafc77228c43",6:"020ef146fb5c1a1b9fd0",7:"9faa87e52e851b830fa5",8:"58ec92fcac224f2ebd61",9:"ad522722be59d3ca5893",10:"cf73bec8ac2ba1c7a93e",11:"bc24160bd34a6b6ecd9e",12:"bef1a08f22709ce81ec5",13:"2b10bc8fe47e30df06ae",14:"26ec2e835e1116bf2e38",15:"a96dfc1b68bc629580d3",16:"a03370c155408a6c2dfa",17:"417f4e4761838e770af5",18:"03e64bbf085f6e30db18",19:"ac7db8fff75d4c942c77",20:"acf1c5d3eff45b6e5009",21:"423be5b2e3e232a4c62f",22:"35e054e67bae51d8123a",23:"8de628e473899a9a1259",24:"e551f5e94f3883369258",25:"3ac50fa29cf414bd1cfd",26:"d9b7b98ec06224d795d6",27:"d33a9d72bea17b667bb4",28:"e07272e3e2395f2e3b8e",29:"50550807fa016f48e91a",30:"9886670db68cfc2dbfce",31:"4018aa251d523a12d23e",32:"5de2cbc3704f95cdecf3",33:"d8b8fbcd2397aa487deb",34:"8a731321aec5e78026f2",35:"7d5790c8b01f3bf165fb",36:"3f62c3ab4fa3425afb43",37:"e53cdd5844ebc6f262a8",38:"0233cbd6d44c24cf3347",39:"6b26632cf785f71ed04c",40:"5fcdcec380ec7686e619",41:"824e5afedb089d4e45d6",42:"9380964024e42ea881eb"}[chunkId]+".js"}(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null,clearTimeout(timeout);var chunk=installedChunks[chunkId];if(0!==chunk){if(chunk){var errorType=event&&("load"===event.type?"missing":event.type),realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")",error.name="ChunkLoadError",error.type=errorType,error.request=realSrc,chunk[1](error)}installedChunks[chunkId]=void 0}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete,document.head.appendChild(script)}return Promise.all(promises)},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/",__webpack_require__.oe=function(err){throw console.error(err),err};var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;__webpack_require__(__webpack_require__.s=78)}([function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function noop(){}__webpack_require__.d(__webpack_exports__,"a",(function(){return HtmlTag})),__webpack_require__.d(__webpack_exports__,"b",(function(){return SvelteComponent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return SvelteComponentDev})),__webpack_require__.d(__webpack_exports__,"d",(function(){return action_destroyer})),__webpack_require__.d(__webpack_exports__,"e",(function(){return add_flush_callback})),__webpack_require__.d(__webpack_exports__,"f",(function(){return add_render_callback})),__webpack_require__.d(__webpack_exports__,"g",(function(){return add_resize_listener})),__webpack_require__.d(__webpack_exports__,"h",(function(){return append})),__webpack_require__.d(__webpack_exports__,"i",(function(){return assign})),__webpack_require__.d(__webpack_exports__,"j",(function(){return attr})),__webpack_require__.d(__webpack_exports__,"k",(function(){return beforeUpdate})),__webpack_require__.d(__webpack_exports__,"l",(function(){return bind})),__webpack_require__.d(__webpack_exports__,"m",(function(){return binding_callbacks})),__webpack_require__.d(__webpack_exports__,"n",(function(){return bubble})),__webpack_require__.d(__webpack_exports__,"o",(function(){return check_outros})),__webpack_require__.d(__webpack_exports__,"p",(function(){return component_subscribe})),__webpack_require__.d(__webpack_exports__,"q",(function(){return compute_rest_props})),__webpack_require__.d(__webpack_exports__,"r",(function(){return createEventDispatcher})),__webpack_require__.d(__webpack_exports__,"s",(function(){return create_animation})),__webpack_require__.d(__webpack_exports__,"t",(function(){return create_component})),__webpack_require__.d(__webpack_exports__,"u",(function(){return create_slot})),__webpack_require__.d(__webpack_exports__,"v",(function(){return destroy_component})),__webpack_require__.d(__webpack_exports__,"w",(function(){return destroy_each})),__webpack_require__.d(__webpack_exports__,"x",(function(){return detach})),__webpack_require__.d(__webpack_exports__,"y",(function(){return element})),__webpack_require__.d(__webpack_exports__,"z",(function(){return empty})),__webpack_require__.d(__webpack_exports__,"A",(function(){return exclude_internal_props})),__webpack_require__.d(__webpack_exports__,"B",(function(){return fix_and_outro_and_destroy_block})),__webpack_require__.d(__webpack_exports__,"C",(function(){return fix_position})),__webpack_require__.d(__webpack_exports__,"D",(function(){return getContext})),__webpack_require__.d(__webpack_exports__,"E",(function(){return get_spread_object})),__webpack_require__.d(__webpack_exports__,"F",(function(){return get_spread_update})),__webpack_require__.d(__webpack_exports__,"G",(function(){return get_store_value})),__webpack_require__.d(__webpack_exports__,"H",(function(){return globals})),__webpack_require__.d(__webpack_exports__,"I",(function(){return group_outros})),__webpack_require__.d(__webpack_exports__,"J",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"K",(function(){return init})),__webpack_require__.d(__webpack_exports__,"L",(function(){return insert})),__webpack_require__.d(__webpack_exports__,"M",(function(){return is_function})),__webpack_require__.d(__webpack_exports__,"N",(function(){return listen})),__webpack_require__.d(__webpack_exports__,"O",(function(){return loop})),__webpack_require__.d(__webpack_exports__,"P",(function(){return mount_component})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return noop})),__webpack_require__.d(__webpack_exports__,"R",(function(){return now})),__webpack_require__.d(__webpack_exports__,"S",(function(){return onDestroy})),__webpack_require__.d(__webpack_exports__,"T",(function(){return onMount})),__webpack_require__.d(__webpack_exports__,"U",(function(){return outro_and_destroy_block})),__webpack_require__.d(__webpack_exports__,"V",(function(){return prevent_default})),__webpack_require__.d(__webpack_exports__,"W",(function(){return run_all})),__webpack_require__.d(__webpack_exports__,"X",(function(){return safe_not_equal})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return select_option})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return select_value})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return setContext})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return set_attributes})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return set_data})),__webpack_require__.d(__webpack_exports__,"db",(function(){return set_input_value})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return set_store_value})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return set_style})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return space})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return stop_propagation})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return subscribe})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return text})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return tick})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return to_number})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return toggle_class})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return transition_in})),__webpack_require__.d(__webpack_exports__,"ob",(function(){return transition_out})),__webpack_require__.d(__webpack_exports__,"pb",(function(){return update_keyed_each})),__webpack_require__.d(__webpack_exports__,"qb",(function(){return update_slot}));const identity=x=>x;function assign(tar,src){for(const k in src)tar[k]=src[k];return tar}function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}function is_empty(obj){return 0===Object.keys(obj).length}function subscribe(store,...callbacks){if(null==store)return noop;const unsub=store.subscribe(...callbacks);return unsub.unsubscribe?()=>unsub.unsubscribe():unsub}function get_store_value(store){let value;return subscribe(store,_=>value=_)(),value}function component_subscribe(component,store,callback){component.$$.on_destroy.push(subscribe(store,callback))}function create_slot(definition,ctx,$$scope,fn){if(definition){const slot_ctx=get_slot_context(definition,ctx,$$scope,fn);return definition[0](slot_ctx)}}function get_slot_context(definition,ctx,$$scope,fn){return definition[1]&&fn?assign($$scope.ctx.slice(),definition[1](fn(ctx))):$$scope.ctx}function get_slot_changes(definition,$$scope,dirty,fn){if(definition[2]&&fn){const lets=definition[2](fn(dirty));if(void 0===$$scope.dirty)return lets;if("object"==typeof lets){const merged=[],len=Math.max($$scope.dirty.length,lets.length);for(let i=0;i<len;i+=1)merged[i]=$$scope.dirty[i]|lets[i];return merged}return $$scope.dirty|lets}return $$scope.dirty}function update_slot(slot,slot_definition,ctx,$$scope,dirty,get_slot_changes_fn,get_slot_context_fn){const slot_changes=get_slot_changes(slot_definition,$$scope,dirty,get_slot_changes_fn);if(slot_changes){const slot_context=get_slot_context(slot_definition,ctx,$$scope,get_slot_context_fn);slot.p(slot_context,slot_changes)}}function exclude_internal_props(props){const result={};for(const k in props)"$"!==k[0]&&(result[k]=props[k]);return result}function compute_rest_props(props,keys){const rest={};keys=new Set(keys);for(const k in props)keys.has(k)||"$"===k[0]||(rest[k]=props[k]);return rest}function set_store_value(store,ret,value=ret){return store.set(value),ret}function action_destroyer(action_result){return action_result&&is_function(action_result.destroy)?action_result.destroy:noop}const is_client="undefined"!=typeof window;let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?cb=>requestAnimationFrame(cb):noop;const tasks=new Set;function run_tasks(now){tasks.forEach(task=>{task.c(now)||(tasks.delete(task),task.f())}),0!==tasks.size&&raf(run_tasks)}function loop(callback){let task;return 0===tasks.size&&raf(run_tasks),{promise:new Promise(fulfill=>{tasks.add(task={c:callback,f:fulfill})}),abort(){tasks.delete(task)}}}function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function destroy_each(iterations,detaching){for(let i=0;i<iterations.length;i+=1)iterations[i]&&iterations[i].d(detaching)}function element(name){return document.createElement(name)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function listen(node,event,handler,options){return node.addEventListener(event,handler,options),()=>node.removeEventListener(event,handler,options)}function prevent_default(fn){return function(event){return event.preventDefault(),fn.call(this,event)}}function stop_propagation(fn){return function(event){return event.stopPropagation(),fn.call(this,event)}}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}function set_attributes(node,attributes){const descriptors=Object.getOwnPropertyDescriptors(node.__proto__);for(const key in attributes)null==attributes[key]?node.removeAttribute(key):"style"===key?node.style.cssText=attributes[key]:"__value"===key?node.value=node[key]=attributes[key]:descriptors[key]&&descriptors[key].set?node[key]=attributes[key]:attr(node,key,attributes[key])}function to_number(value){return""===value?null:+value}function set_data(text,data){data=""+data,text.wholeText!==data&&(text.data=data)}function set_input_value(input,value){input.value=null==value?"":value}function set_style(node,key,value,important){node.style.setProperty(key,value,important?"important":"")}function select_option(select,value){for(let i=0;i<select.options.length;i+=1){const option=select.options[i];if(option.__value===value)return void(option.selected=!0)}}function select_value(select){const selected_option=select.querySelector(":checked")||select.options[0];return selected_option&&selected_option.__value}let crossorigin;function is_crossorigin(){if(void 0===crossorigin){crossorigin=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(error){crossorigin=!0}}return crossorigin}function add_resize_listener(node,fn){"static"===getComputedStyle(node).position&&(node.style.position="relative");const iframe=element("iframe");iframe.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),iframe.setAttribute("aria-hidden","true"),iframe.tabIndex=-1;const crossorigin=is_crossorigin();let unsubscribe;return crossorigin?(iframe.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",unsubscribe=listen(window,"message",event=>{event.source===iframe.contentWindow&&fn()})):(iframe.src="about:blank",iframe.onload=()=>{unsubscribe=listen(iframe.contentWindow,"resize",fn)}),append(node,iframe),()=>{(crossorigin||unsubscribe&&iframe.contentWindow)&&unsubscribe(),detach(iframe)}}function toggle_class(element,name,toggle){element.classList[toggle?"add":"remove"](name)}function custom_event(type,detail){const e=document.createEvent("CustomEvent");return e.initCustomEvent(type,!1,!1,detail),e}class HtmlTag{constructor(anchor=null){this.a=anchor,this.e=this.n=null}m(html,target,anchor=null){this.e||(this.e=element(target.nodeName),this.t=target,this.h(html)),this.i(anchor)}h(html){this.e.innerHTML=html,this.n=Array.from(this.e.childNodes)}i(anchor){for(let i=0;i<this.n.length;i+=1)insert(this.t,this.n[i],anchor)}p(html){this.d(),this.h(html),this.i(this.a)}d(){this.n.forEach(detach)}}const active_docs=new Set;let current_component,active=0;function create_rule(node,a,b,duration,delay,ease,fn,uid=0){const step=16.666/duration;let keyframes="{\n";for(let p=0;p<=1;p+=step){const t=a+(b-a)*ease(p);keyframes+=100*p+`%{${fn(t,1-t)}}\n`}const rule=keyframes+`100% {${fn(b,1-b)}}\n}`,name=`__svelte_${function(str){let hash=5381,i=str.length;for(;i--;)hash=(hash<<5)-hash^str.charCodeAt(i);return hash>>>0}(rule)}_${uid}`,doc=node.ownerDocument;active_docs.add(doc);const stylesheet=doc.__svelte_stylesheet||(doc.__svelte_stylesheet=doc.head.appendChild(element("style")).sheet),current_rules=doc.__svelte_rules||(doc.__svelte_rules={});current_rules[name]||(current_rules[name]=!0,stylesheet.insertRule(`@keyframes ${name} ${rule}`,stylesheet.cssRules.length));const animation=node.style.animation||"";return node.style.animation=`${animation?animation+", ":""}${name} ${duration}ms linear ${delay}ms 1 both`,active+=1,name}function delete_rule(node,name){const previous=(node.style.animation||"").split(", "),next=previous.filter(name?anim=>anim.indexOf(name)<0:anim=>-1===anim.indexOf("__svelte")),deleted=previous.length-next.length;deleted&&(node.style.animation=next.join(", "),active-=deleted,active||raf(()=>{active||(active_docs.forEach(doc=>{const stylesheet=doc.__svelte_stylesheet;let i=stylesheet.cssRules.length;for(;i--;)stylesheet.deleteRule(i);doc.__svelte_rules={}}),active_docs.clear())}))}function create_animation(node,from,fn,params){if(!from)return noop;const to=node.getBoundingClientRect();if(from.left===to.left&&from.right===to.right&&from.top===to.top&&from.bottom===to.bottom)return noop;const{delay:delay=0,duration:duration=300,easing:easing=identity,start:start_time=now()+delay,end:end=start_time+duration,tick:tick=noop,css:css}=fn(node,{from:from,to:to},params);let name,running=!0,started=!1;function stop(){css&&delete_rule(node,name),running=!1}return loop(now=>{if(!started&&now>=start_time&&(started=!0),started&&now>=end&&(tick(1,0),stop()),!running)return!1;if(started){const t=0+1*easing((now-start_time)/duration);tick(t,1-t)}return!0}),css&&(name=create_rule(node,0,1,duration,delay,easing,css)),delay||(started=!0),tick(0,1),stop}function fix_position(node){const style=getComputedStyle(node);if("absolute"!==style.position&&"fixed"!==style.position){const{width:width,height:height}=style,a=node.getBoundingClientRect();node.style.position="absolute",node.style.width=width,node.style.height=height,function(node,a){const b=node.getBoundingClientRect();if(a.left!==b.left||a.top!==b.top){const style=getComputedStyle(node),transform="none"===style.transform?"":style.transform;node.style.transform=`${transform} translate(${a.left-b.left}px, ${a.top-b.top}px)`}}(node,a)}}function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function beforeUpdate(fn){get_current_component().$$.before_update.push(fn)}function onMount(fn){get_current_component().$$.on_mount.push(fn)}function onDestroy(fn){get_current_component().$$.on_destroy.push(fn)}function createEventDispatcher(){const component=get_current_component();return(type,detail)=>{const callbacks=component.$$.callbacks[type];if(callbacks){const event=custom_event(type,detail);callbacks.slice().forEach(fn=>{fn.call(component,event)})}}}function setContext(key,context){get_current_component().$$.context.set(key,context)}function getContext(key){return get_current_component().$$.context.get(key)}function bubble(component,event){const callbacks=component.$$.callbacks[event.type];callbacks&&callbacks.slice().forEach(fn=>fn(event))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(fn){render_callbacks.push(fn)}function add_flush_callback(fn){flush_callbacks.push(fn)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let i=0;i<dirty_components.length;i+=1){const component=dirty_components[i];set_current_component(component),update(component.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(seen_callbacks.add(callback),callback())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}function transition_out(block,local,detach,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block),outros.c.push(()=>{outroing.delete(block),callback&&(detach&&block.d(1),callback())}),block.o(local)}}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function outro_and_destroy_block(block,lookup){transition_out(block,1,1,()=>{lookup.delete(block.key)})}function fix_and_outro_and_destroy_block(block,lookup){block.f(),outro_and_destroy_block(block,lookup)}function update_keyed_each(old_blocks,dirty,get_key,dynamic,ctx,list,lookup,node,destroy,create_each_block,next,get_context){let o=old_blocks.length,n=list.length,i=o;const old_indexes={};for(;i--;)old_indexes[old_blocks[i].key]=i;const new_blocks=[],new_lookup=new Map,deltas=new Map;for(i=n;i--;){const child_ctx=get_context(ctx,list,i),key=get_key(child_ctx);let block=lookup.get(key);block?dynamic&&block.p(child_ctx,dirty):(block=create_each_block(key,child_ctx),block.c()),new_lookup.set(key,new_blocks[i]=block),key in old_indexes&&deltas.set(key,Math.abs(i-old_indexes[key]))}const will_move=new Set,did_move=new Set;function insert(block){transition_in(block,1),block.m(node,next),lookup.set(block.key,block),next=block.first,n--}for(;o&&n;){const new_block=new_blocks[n-1],old_block=old_blocks[o-1],new_key=new_block.key,old_key=old_block.key;new_block===old_block?(next=new_block.first,o--,n--):new_lookup.has(old_key)?!lookup.has(new_key)||will_move.has(new_key)?insert(new_block):did_move.has(old_key)?o--:deltas.get(new_key)>deltas.get(old_key)?(did_move.add(new_key),insert(new_block)):(will_move.add(old_key),o--):(destroy(old_block,lookup),o--)}for(;o--;){const old_block=old_blocks[o];new_lookup.has(old_block.key)||destroy(old_block,lookup)}for(;n;)insert(new_blocks[n-1]);return new_blocks}function get_spread_update(levels,updates){const update={},to_null_out={},accounted_for={$$scope:1};let i=levels.length;for(;i--;){const o=levels[i],n=updates[i];if(n){for(const key in o)key in n||(to_null_out[key]=1);for(const key in n)accounted_for[key]||(update[key]=n[key],accounted_for[key]=1);levels[i]=n}else for(const key in o)accounted_for[key]=1}for(const key in to_null_out)key in update||(update[key]=void 0);return update}function get_spread_object(spread_props){return"object"==typeof spread_props&&null!==spread_props?spread_props:{}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let SvelteElement;function bind(component,name,callback){const index=component.$$.props[name];void 0!==index&&(component.$$.bound[index]=callback,callback(component.$$.ctx[index]))}function create_component(block){block&&block.c()}function mount_component(component,target,anchor){const{fragment:fragment,on_mount:on_mount,on_destroy:on_destroy,after_update:after_update}=component.$$;fragment&&fragment.m(target,anchor),add_render_callback(()=>{const new_on_destroy=on_mount.map(run).filter(is_function);on_destroy?on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]}),after_update.forEach(add_render_callback)}function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function init(component,options,instance,create_fragment,not_equal,props,dirty=[-1]){const parent_component=current_component;set_current_component(component);const prop_values=options.props||{},$$=component.$$={fragment:null,ctx:null,props:props,update:noop,not_equal:not_equal,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(parent_component?parent_component.$$.context:[]),callbacks:blank_object(),dirty:dirty,skip_bound:!1};let ready=!1;if($$.ctx=instance?instance(component,prop_values,(i,ret,...rest)=>{const value=rest.length?rest[0]:ret;return $$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&(!$$.skip_bound&&$$.bound[i]&&$$.bound[i](value),ready&&function(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),schedule_update(),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}(component,i)),ret}):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment&&create_fragment($$.ctx),options.target){if(options.hydrate){const nodes=function(element){return Array.from(element.childNodes)}(options.target);$$.fragment&&$$.fragment.l(nodes),nodes.forEach(detach)}else $$.fragment&&$$.fragment.c();options.intro&&transition_in(component.$$.fragment),mount_component(component,options.target,options.anchor),flush()}set_current_component(parent_component)}"function"==typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const key in this.$$.slotted)this.appendChild(this.$$.slotted[key])}attributeChangedCallback(attr,_oldValue,newValue){this[attr]=newValue}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}});class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}}class SvelteComponentDev extends SvelteComponent{constructor(options){if(!options||!options.target&&!options.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return apiUrl}));function apiUrl(url){return"https://api.www.documentcloud.org/api/"+url}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cookiesEnabled}));var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),axios_retry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(49),axios_retry__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios_retry__WEBPACK_IMPORTED_MODULE_1__);axios_retry__WEBPACK_IMPORTED_MODULE_1___default()(axios__WEBPACK_IMPORTED_MODULE_0___default.a,{retries:3,retryDelay:axios_retry__WEBPACK_IMPORTED_MODULE_1___default.a.exponentialDelay});let cookiesEnabled=!1;try{document.cookie,cookiesEnabled=!0}catch(e){}const session=axios__WEBPACK_IMPORTED_MODULE_0___default.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:cookiesEnabled});session.interceptors.response.use(response=>response,error=>error.response&&error.response.data?Promise.reject({errorData:error.response.data,status:error.response.status}):Promise.reject(error));const sessionCache=new class{constructor(){this.cached=[],this.cachedByUrl={}}trimCache(){for(;this.cached.length>50;){const{url:url}=this.cached.shift();delete this.cachedByUrl[url]}}cache(url,contents){this.cached.push({url:url,contents:contents}),this.cachedByUrl[url]=contents,this.trimCache()}has(url){return this.cachedByUrl.hasOwnProperty(url)}lookup(url){return this.has(url)?this.cachedByUrl[url]:null}};session.getStatic=async function(url){if(sessionCache.has(url))return sessionCache.lookup(url);if(url.startsWith("https://api.www.documentcloud.org")){const redirectUrl=(await session.get(url)).data.location,result=(await axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(redirectUrl)).data;return sessionCache.cache(url,result),result}{const result=(await axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(url)).data;return sessionCache.cache(url,result),result}},__webpack_exports__.b=session},function(module,__webpack_exports__,__webpack_require__){"use strict";function urlParts(url){const qIndex=url.indexOf("?");return-1==qIndex?[url,null]:[url.substr(0,qIndex),url.substr(qIndex+1)]}function urlJoin(...parts){return parts.reduce((a,b)=>(a.endsWith("/")&&(a=a.substr(0,a.length-1)),b.startsWith("/")&&(b=b.substr(1)),""==a?b:""==b?a:[a,b].join("/")),"")}function getQueryStringParamsFromQuery(query){return null==query?{}:query.split("&").reduce((params,param)=>{let[key,value]=param.split("=");return params[key]=value?decodeURIComponent(value.replace(/\+/g," ")):"",params},{})}function getQueryStringParams(url){const[_,query]=urlParts(url);return getQueryStringParamsFromQuery(query)}function urlsEqual(url1,url2,plusReplace=!1){const[base1,query1]=urlParts(url1),[base2,query2]=urlParts(url2);if(base1!=base2)return!1;const qp1=getQueryStringParamsFromQuery(query1),qp2=getQueryStringParamsFromQuery(query2),keys1=Object.keys(qp1),keys2=Object.keys(qp2);if(keys1.length!=keys2.length)return!1;keys1.sort(),keys2.sort();for(let i=0;i<keys1.length;i++){const k1=keys1[i],k2=keys2[i];if(k1!=k2)return!1;if("q"==k1&&plusReplace){const replaceAtBeginning=(s,replace)=>s.startsWith(replace)?s.substr(replace.length):s;if(replaceAtBeginning(qp1[k1],"+")!=replaceAtBeginning(qp2[k2],"+"))return!1}else if(qp1[k1]!=qp2[k2])return!1}return!0}function currentUrl(){return window.location.pathname+window.location.search}function queryBuilder(baseUrl,params,cleanSlate=!1){null==baseUrl&&(baseUrl=currentUrl());const[url,query]=urlParts(baseUrl),oldParams=cleanSlate?{}:getQueryStringParamsFromQuery(query);for(const prop in params)params.hasOwnProperty(prop)&&(oldParams[prop]=params[prop]);let result="",prefix="?";for(const prop in oldParams)if(oldParams.hasOwnProperty(prop)){const key=prop,value=oldParams[key];if(null==value)continue;result+=`${prefix}${key}=${encodeURIComponent(value)}`,prefix="&"}return`${url}${result}`}function truthyParamValue(value){if(null==value)return!1;const normalized=value.trim().toLowerCase();return"1"==normalized||"true"==normalized||"yes"==normalized}function falsyParamValue(value){if(null==value)return!1;const normalized=value.trim().toLowerCase();return"0"==normalized||"false"==normalized||"no"==normalized}__webpack_require__.d(__webpack_exports__,"f",(function(){return urlJoin})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getQueryStringParams})),__webpack_require__.d(__webpack_exports__,"g",(function(){return urlsEqual})),__webpack_require__.d(__webpack_exports__,"a",(function(){return currentUrl})),__webpack_require__.d(__webpack_exports__,"d",(function(){return queryBuilder})),__webpack_require__.d(__webpack_exports__,"e",(function(){return truthyParamValue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return falsyParamValue}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Svue}));var svelte_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);const STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ARGUMENT_NAMES=/([^\s,]+)/g,QUICK_ARROW=/^\s*([a-zA-Z0-9$_]+)\s*=>/;function getParamNames(func){const fnStr=func.toString().replace(STRIP_COMMENTS,""),quickMatch=fnStr.match(QUICK_ARROW);if(null!=quickMatch)return[quickMatch[1]];const result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES);if(null===result)return[];const arrowIdx=result.indexOf("=>");return-1!=arrowIdx?result.slice(0,arrowIdx):result}class Svue{constructor(structure){this.data={},this.writables={},this.subscribeId=0,this.subscribers={},null!=structure.data&&this.initData(structure.data),null!=structure.computed&&this.initComputed(structure.computed),null!=structure.watch&&this.initWatch(structure.watch)}subscribe(fn){fn(this);const subscribeId=this.subscribeId++;return this.subscribers[subscribeId]=fn,()=>{delete this.subscribers[subscribeId]}}pingSubscriptions(){Object.keys(this.subscribers).forEach(subscriber=>{this.subscribers[subscriber](this)})}initData(data){const destructured=data();Object.keys(destructured).forEach(key=>{let w=destructured[key];null!=w&&w.set&&w.subscribe||(w=Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.c)(w)),this.writables[key]=w,Object.defineProperty(this,key,{get:()=>Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.b)(w),set(newValue){w.set(newValue)}}),w.subscribe(()=>this.pingSubscriptions())})}initComputed(computed){const keys=Object.keys(computed);for(;0!=keys.length;){let matched=!1;for(let i=0;i<keys.length;i++){const key=keys[i],args=getParamNames(computed[key]);if(!args.every(arg=>null!=this.writables[arg]))continue;matched=!0;const d=Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.a)(args.map(a=>this.writables[a]),(args,setFn)=>{const result=computed[key].bind(this)(...args);result&&"function"==typeof result.then?result.then(x=>setFn(x)):setFn(result)});this.writables[key]=d,Object.defineProperty(this,key,{get:()=>Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.b)(d)}),d.subscribe(()=>this.pingSubscriptions()),keys.splice(i,1),i--}if(!matched)throw new Error("INVALID COMPUTED")}}initWatch(watch){Object.keys(watch).forEach(key=>{key.split(".").reduce((x,k)=>x.writables[k],this).subscribe(watch[key].bind(this))})}set(key,value){if(!(key instanceof Svue)){if(null==this.writables[key])throw new Error("Invalid key: "+key);this.writables[key].set(value)}}update(fn){let key=getParamNames(fn);if(key.length>1)throw new Error("Only specify one arg for update");if(key=key[0],null==this.writables[key])throw new Error("Invalid key: "+key);this.writables[key].update(fn)}get(key){return Object(svelte_store__WEBPACK_IMPORTED_MODULE_0__.b)(this.writables[key])}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return router})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getPath})),__webpack_require__.d(__webpack_exports__,"d",(function(){return pushUrl})),__webpack_require__.d(__webpack_exports__,"b",(function(){return goBack})),__webpack_require__.d(__webpack_exports__,"c",(function(){return nav}));var rlite_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(73),rlite_router__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(rlite_router__WEBPACK_IMPORTED_MODULE_0__),svue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_util_lazyComponent__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21);const endings=[".html",".html"];class Router extends svue__WEBPACK_IMPORTED_MODULE_1__.a{constructor(notFound){super({data:()=>({notFound:notFound,routeFunc:()=>{},pastUrl:null,backNav:!1,currentUrl:null,lazyComponent:_util_lazyComponent__WEBPACK_IMPORTED_MODULE_3__.a}),computed:{routes:(routeFunc,lazyComponent)=>routeFunc(lazyComponent),mapping(routes){const mapping={};for(const name in routes)if(routes.hasOwnProperty(name)){const route=routes[name];null!=route.path&&(mapping[route.path]=props=>({name:name,props:props,component:route.component,get:route.get}))}return mapping},router:(mapping,notFound)=>rlite_router__WEBPACK_IMPORTED_MODULE_0___default()(()=>({component:notFound}),mapping),resolvedRoute(currentUrl,router,lazyComponent){if(null==currentUrl||null==router||null==lazyComponent)return null;const resolved=this.resolve(currentUrl);return null==resolved.component&&null!=resolved.get&&resolved.get(),resolved}}})}lookup(name){return this.routes[name].path}resolve(path){path=path.split("#")[0];for(let i=0;i<endings.length;i++){const ending=endings[i];if(path.endsWith(ending)){path=path.substr(0,path.length-ending.length);break}}return this.router(path)}}const router=new Router(_pages_home_Empty_svelte__WEBPACK_IMPORTED_MODULE_2__.default);function getPath(to,params=null){let path=router.lookup(to);if(null!=params)for(const param in params)params.hasOwnProperty(param)&&(path=path.replace(":"+param,params[param]),path=path.replace("*"+param,params[param]));return path}function pushUrl(url){router.backNav=!1,router.pastUrl=router.currentUrl,router.currentUrl=url,window.history.pushState({path:url,dc:!0},"",window.location.origin+url)}function goBack(fallback="/app"){null!=router.pastUrl?window.history.back():(router.currentUrl=fallback,window.history.replaceState({path:fallback},"",window.location.origin+fallback))}function nav(to,params=null){pushUrl(getPath(to,params))}window.addEventListener("popstate",e=>{const isDc=(e.state||{dc:!1}).dc;router.backNav=1==isDc})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_ORDERING})),__webpack_require__.d(__webpack_exports__,"d",(function(){return USER_EXPAND})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ORG_EXPAND})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_EXPAND}));const DEFAULT_ORDERING="-created_at",USER_EXPAND="user",ORG_EXPAND="organization",DEFAULT_EXPAND=[USER_EXPAND,ORG_EXPAND].join(",")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return viewer})),__webpack_require__.d(__webpack_exports__,"c",(function(){return updateNote})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addNote})),__webpack_require__.d(__webpack_exports__,"b",(function(){return removeNote}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_api_document__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26),_router_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_api_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_util_iframe__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30),_pages_viewer_viewerEditDialogs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(69);function collectNotes(orderedNotes,predicate){if(null==orderedNotes)return{};const index={};return orderedNotes.forEach(note=>{if(!predicate(note))return;const existing=index.hasOwnProperty(note.page)?index[note.page]:[];index[note.page]=[...existing,note]}),index}let viewerInitCache={};const viewer=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_3__.e,notes:null,sections:null,document:null,embed:Object(_util_iframe__WEBPACK_IMPORTED_MODULE_5__.a)(),id:null,me:null,loadedMe:!1,error:null,show404:!1,showPending:!1}),watch:{"router.resolvedRoute"(){const route=_router_router__WEBPACK_IMPORTED_MODULE_3__.e.resolvedRoute;if(null!=route&&"viewer"==route.name&&null!=route.props)return this.id=(idSlug=route.props.id,parseInt(idSlug.split("-")[0])),"1"==route.props.embed?this.embed=!0:this.embed=Object(_util_iframe__WEBPACK_IMPORTED_MODULE_5__.a)(),void(null==viewerInitCache[this.id]&&(id=this.id,Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.f)(id,[_api_common__WEBPACK_IMPORTED_MODULE_4__.a,"notes","sections","notes.organization","notes.user"].join(",")).then(doc=>{doc.viewable||(viewer.showPending=!0),viewer.document=doc,viewer.notes=doc.notes,viewer.sections=doc.sections}).catch(e=>{null!=e.status&&""+e.status=="404"?viewer.show404=!0:viewer.error=e}),viewer.embed?(viewer.me=null,viewer.loadedMe=!0):Object(_api_orgAndUser__WEBPACK_IMPORTED_MODULE_2__.f)().then(me=>{viewer.me=me,viewer.loadedMe=!0}).catch(()=>{viewer.me=null,viewer.loadedMe=!0}),viewerInitCache[this.id]=!0));var id,idSlug;null!=route&&"viewer"!=route.name&&(viewerInitCache={},this.document=null)},document(){null!=this.document&&this.document.editAccess&&Object(_pages_viewer_viewerEditDialogs__WEBPACK_IMPORTED_MODULE_6__.a)()}},computed:{orderedSections:sections=>null==sections?null:sections.sort((a,b)=>a.page-b.page),orderedSectionsAndNotes(orderedSections,orderedNotes){if(null==orderedSections||null==orderedNotes)return null;let sectionIdx=0,noteIdx=0;const results=[];for(;sectionIdx<orderedSections.length||noteIdx<orderedNotes.length;){const currentSection=orderedSections[sectionIdx],currentNote=orderedNotes[noteIdx];null!=currentSection&&(null==currentNote||currentSection.page<=currentNote.page)?(results.push({type:"section",value:currentSection}),sectionIdx++):(results.push({type:"note",value:currentNote}),noteIdx++)}return results},sectionsAndNotes(orderedSectionsAndNotes){if(null==orderedSectionsAndNotes)return null;let currentSection=null;const results=[];for(let i=0;i<orderedSectionsAndNotes.length;i++){const chunk=orderedSectionsAndNotes[i];"section"==chunk.type?(currentSection={type:"section",section:chunk.value,children:[]},results.push(currentSection)):null==currentSection?results.push({type:"note",note:chunk.value}):currentSection.children.push({type:"note",note:chunk.value})}return results},loaded:(document,pageAspects,notes,sections,loadedMe)=>null!=document&&null!=pageAspects&&null!=notes&&null!=sections&&loadedMe,orderedNotes:notes=>null==notes?null:(notes.sort((note1,note2)=>note1.page!=note2.page?note1.page-note2.page:note1.y1!=note2.y1?note1.y1-note2.y1:note1.x1!=note2.x1?note1.x1-note2.x1:0),notes),notesByPage:orderedNotes=>collectNotes(orderedNotes,note=>!note.isPageNote),pageNotesByPage:orderedNotes=>collectNotes(orderedNotes,note=>note.isPageNote),pageAspects:document=>null==document?null:document.pageSizes,isVerified:me=>null!=me&&me.verified_journalist}});function updateNote(note){viewer.notes=viewer.notes.map(oldNote=>oldNote.id==note.id?note:oldNote)}function addNote(note){viewer.notes=[...viewer.notes,note]}function removeNote(note){viewer.notes=viewer.notes.filter(oldNote=>oldNote.id!=note.id)}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"n",(function(){return searchDocuments})),__webpack_require__.d(__webpack_exports__,"m",(function(){return searchDocument})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDocument})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getDocumentsWithIds})),__webpack_require__.d(__webpack_exports__,"d",(function(){return deleteDocument})),__webpack_require__.d(__webpack_exports__,"e",(function(){return editMetadata})),__webpack_require__.d(__webpack_exports__,"c",(function(){return changeAccess})),__webpack_require__.d(__webpack_exports__,"l",(function(){return reprocessDocument})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cancelProcessing})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getPendingProgress})),__webpack_require__.d(__webpack_exports__,"j",(function(){return redactDocument})),__webpack_require__.d(__webpack_exports__,"i",(function(){return modifyDocument})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addData})),__webpack_require__.d(__webpack_exports__,"k",(function(){return removeData})),__webpack_require__.d(__webpack_exports__,"o",(function(){return uploadDocuments}));var _session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_base__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_util_url__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(40),__webpack_require__(3)),_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_structure_results__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(27),_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(35),_util_storageManager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(66),_util_array__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(12),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(31),axios__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__),_structure_document__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(13);process.env.POLL_TIMEOUT;const GET_BATCH=parseInt("25"),GET_BATCH_DELAY=parseInt("1000"),UPLOAD_BATCH=parseInt("25"),UPLOAD_BATCH_DELAY=parseInt("1000"),deletedManager=new _util_storageManager__WEBPACK_IMPORTED_MODULE_7__.a("deleted");function filterDeleted(docs){const deleted=deletedManager.get("",[]);return docs.filter(x=>!Object(_util_array__WEBPACK_IMPORTED_MODULE_8__.c)(deleted,x.id))}async function searchDocuments(query,page=0,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){const url=Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)("documents/search/",{q:query,expand:expand,page:page+1,hl:"true"})),{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(url);return data.results=filterDeleted(data.results.map(doc=>new _structure_document__WEBPACK_IMPORTED_MODULE_10__.a(doc))),new _structure_results__WEBPACK_IMPORTED_MODULE_5__.a(url,data)}async function searchDocument(query,docId){const url=Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)(`documents/${docId}/search/`,{q:query})),{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(url);return Object(_structure_document__WEBPACK_IMPORTED_MODULE_10__.d)(data,"<em>","</em>",!0)}async function getDocument(id,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)(`documents/${id}/`,{expand:expand})));return new _structure_document__WEBPACK_IMPORTED_MODULE_10__.a(data)}async function getDocumentsWithIds(ids,remaining=!1,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){return await Object(_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__.a)(ids,GET_BATCH,GET_BATCH_DELAY,async subIds=>{if(0==subIds.length)return[];const params={expand:expand,id__in:subIds};remaining&&(params.remaining=!0);const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)("documents/",params))),docs=data.results.map(document=>new _structure_document__WEBPACK_IMPORTED_MODULE_10__.a(document)),orderedDocs=[];for(let i=0;i<subIds.length;i++){const matching=docs.filter(doc=>doc.id==subIds[i]);0!=matching.length&&orderedDocs.push(matching[0])}return orderedDocs},e=>console.error("error getting documents with ids",e))}async function deleteDocument(ids){await _session__WEBPACK_IMPORTED_MODULE_0__.b.delete(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.d)("documents/",{id__in:ids}))),function(ids){deletedManager.set("",deletedManager.get("",[]).concat(ids))}(ids)}async function editMetadata(ids,metadata){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/"),ids.map(id=>({...metadata,id:id})))}async function changeAccess(ids,access){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/"),ids.map(id=>({id:id,access:access})))}async function reprocessDocument(ids,forceOcr){await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/process/"),ids.map(id=>({id:id,force_ocr:forceOcr})))}async function cancelProcessing(id){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.delete(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/process/`));return data}async function getPendingProgress(){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/pending/"));return data}async function redactDocument(id,redactions){await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/redactions/`),redactions.map(redaction=>redaction.note))}async function modifyDocument(id,modifications){await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/modifications/`),modifications)}async function addData(id,key,value){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/data/${key}/`),{values:[value]})}async function removeData(id,key,value){await _session__WEBPACK_IMPORTED_MODULE_0__.b.patch(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(`documents/${id}/data/${key}/`),{remove:[value]})}async function uploadDocuments(docs,access,language,forceOcr,projects,createProgressFn,progressFn,processProgressFn,allCompleteFn,errorFn){const progresses=[],toComplete=[];for(let i=0;i<docs.length;i++)progresses.push({progress:0}),toComplete.push(i);const projectIds=projects.map(p=>p.id);let newDocuments;try{const getExtension=file=>{if(null==file.name)return"";const parts=file.name.split(".");return parts.length<=1?"":parts[parts.length-1].toLowerCase()};let createCount=0;const data=await Object(_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__.a)(docs,UPLOAD_BATCH,UPLOAD_BATCH_DELAY,async subDocs=>{const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/"),subDocs.map(doc=>({title:doc.name,access:access,language:language,original_extension:getExtension(doc.file),projects:projectIds})));return createCount+=subDocs.length,createProgressFn(createCount/docs.length),data},e=>console.error("error creating some docs",e));newDocuments=data}catch(e){return console.error(e),errorFn("failed to create the document",e)}const badDocs={};try{await Promise.all(docs.map((doc,i)=>{const url=newDocuments[i].presigned_url,id=newDocuments[i].id,file=doc.file;return new Promise(resolve=>{axios__WEBPACK_IMPORTED_MODULE_9___default.a.put(url,file,{headers:{"Content-Type":file.type||"application/octet-stream"},onUploadProgress:progressEvent=>{const progress=progressEvent.loaded/progressEvent.total;progresses[i].progress=progress,progressFn(i,progress)}}).then(results=>resolve(results)).catch(e=>{console.error("doc upload failed",e),progresses[i].progress=1,progressFn(i,1),badDocs[id]=!0,resolve()})})}))}catch(e){return console.error(e),errorFn("failed to upload the document",e)}const goodDocuments=newDocuments.filter(doc=>!badDocs[doc.id]),ids=goodDocuments.map(doc=>doc.id);let count=0;try{await Object(_util_batchDelay__WEBPACK_IMPORTED_MODULE_6__.a)(ids,UPLOAD_BATCH,UPLOAD_BATCH_DELAY,async subIds=>{await _session__WEBPACK_IMPORTED_MODULE_0__.b.post(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)("documents/process/"),subIds.map(id=>({id:id,force_ocr:forceOcr}))),count+=subIds.length,processProgressFn(count/ids.length)},e=>console.error("error processing some docs",e))}catch(e){return console.error(e),errorFn("failed to start processing the document",e)}allCompleteFn(goodDocuments.map(x=>new _structure_document__WEBPACK_IMPORTED_MODULE_10__.a(x)))}}).call(this,__webpack_require__(58))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"t",(function(){return layout})),__webpack_require__.d(__webpack_exports__,"y",(function(){return selectionProcessing})),__webpack_require__.d(__webpack_exports__,"B",(function(){return unselectDocument})),__webpack_require__.d(__webpack_exports__,"x",(function(){return openDispatchAddon})),__webpack_require__.d(__webpack_exports__,"g",(function(){return hideAddonDispatch})),__webpack_require__.d(__webpack_exports__,"w",(function(){return openAddonBrowser})),__webpack_require__.d(__webpack_exports__,"f",(function(){return hideAddonBrowser})),__webpack_require__.d(__webpack_exports__,"k",(function(){return hideDocumentInfo})),__webpack_require__.d(__webpack_exports__,"m",(function(){return hideMeta})),__webpack_require__.d(__webpack_exports__,"v",(function(){return openAccess})),__webpack_require__.d(__webpack_exports__,"e",(function(){return hideAccess})),__webpack_require__.d(__webpack_exports__,"r",(function(){return hideReprocess})),__webpack_require__.d(__webpack_exports__,"n",(function(){return hideOwner})),__webpack_require__.d(__webpack_exports__,"a",(function(){return editData})),__webpack_require__.d(__webpack_exports__,"i",(function(){return hideData})),__webpack_require__.d(__webpack_exports__,"u",(function(){return newProject})),__webpack_require__.d(__webpack_exports__,"d",(function(){return embedProject})),__webpack_require__.d(__webpack_exports__,"q",(function(){return hideProjectEmbed})),__webpack_require__.d(__webpack_exports__,"b",(function(){return editProject})),__webpack_require__.d(__webpack_exports__,"o",(function(){return hideProject})),__webpack_require__.d(__webpack_exports__,"z",(function(){return showCollaborators})),__webpack_require__.d(__webpack_exports__,"h",(function(){return hideCollaborators})),__webpack_require__.d(__webpack_exports__,"C",(function(){return updateProjectEdit})),__webpack_require__.d(__webpack_exports__,"c",(function(){return editProjectCollaboratorAccess})),__webpack_require__.d(__webpack_exports__,"p",(function(){return hideProjectCollaboratorAccess})),__webpack_require__.d(__webpack_exports__,"A",(function(){return showSearchTips})),__webpack_require__.d(__webpack_exports__,"s",(function(){return hideSearchTips})),__webpack_require__.d(__webpack_exports__,"j",(function(){return hideDiagnostics})),__webpack_require__.d(__webpack_exports__,"l",(function(){return hideMailkey}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_router_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_util_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_util_array__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12);const ACCESS_LEVELS={public:2,organization:1,private:0},layout=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_1__.e,sidebarExpanded:!1,loading:!0,error:!1,uploading:!1,selectedMap:{},addonDispatchOpen:!1,addonBrowserOpen:!1,metaOpen:null,documentInfoOpen:!1,projectEdit:null,projectOpen:!1,projectEmbed:!1,projectCollaboratorsOpen:!1,projectEditUser:null,searchTipsOpen:!1,diagnosticsOpen:!1,mailkeyOpen:!1,dataDocuments:[],dataOpen:!1,accessEditDocuments:[],reprocessDocuments:[],ownerEditDocuments:[]}),watch:{"router.resolvedRoute"(){this.sidebarExpanded=!1}},computed:{selected:selectedMap=>Object.values(selectedMap),numSelected:selected=>selected.length,hasSelection:selected=>selected.length>0,selectionEditable:selected=>0==selected.filter(doc=>!doc.editAccess).length,accessOpen:accessEditDocuments=>accessEditDocuments.length>0,reprocessOpen:reprocessDocuments=>reprocessDocuments.length>0,ownerOpen:ownerEditDocuments=>ownerEditDocuments.length>0,numAccessSelected:accessEditDocuments=>accessEditDocuments.length,numReprocessSelected:reprocessDocuments=>reprocessDocuments.length,sameLanguage:reprocessDocuments=>Object(_util_array__WEBPACK_IMPORTED_MODULE_3__.g)(reprocessDocuments,x=>x.language),numOwnerSelected:ownerEditDocuments=>ownerEditDocuments.length,defaultAccess(accessEditDocuments){let minAccess=null,minAccessRank=null;for(let i=0;i<accessEditDocuments.length;i++){const newAccess=accessEditDocuments[i].access,newRank=ACCESS_LEVELS[newAccess];(null==minAccessRank||newRank<minAccessRank)&&(minAccessRank=newRank,minAccess=newAccess)}return minAccess},sameAccess:sameAccessProp=>sameAccessProp("access"),samePublishAt:sameAccessProp=>sameAccessProp("publishAt"),sameAccessProp:accessEditDocuments=>prop=>Object(_util_array__WEBPACK_IMPORTED_MODULE_3__.g)(accessEditDocuments,x=>x[prop]),projectCollaboratorAccessOpen:projectEditUser=>null!=projectEditUser,projectEmbedTitle(router){const route=router.resolvedRoute;return null==route||"project"!=route.name||null==route.props?null:route.props.title},projectEmbedSearchBar(router){const route=router.resolvedRoute;return null==route||("project"!=route.name||(null==route.props||Object(_util_url__WEBPACK_IMPORTED_MODULE_2__.e)(route.props.searchbar)))}}});function selectionProcessing(){return[someProcessing(...layout.selected),allProcessing(...layout.selected)]}function unselectDocument(document){delete layout.selectedMap[document.id],layout.selectedMap=layout.selectedMap}function openDispatchAddon(addon){layout.addonDispatchOpen=addon}function hideAddonDispatch(){layout.addonDispatchOpen=!1}function openAddonBrowser(){layout.addonBrowserOpen=!0}function hideAddonBrowser(){layout.addonBrowserOpen=!1}function hideDocumentInfo(){layout.documentInfoOpen=!1}function hideMeta(){layout.metaOpen=null}function canEdit(...documents){return 0==documents.filter(doc=>!doc.editAccess).length}function someProcessing(...documents){return documents.filter(doc=>doc.processing).length>0}function allProcessing(...documents){return 0==documents.filter(doc=>!doc.processing).length}function openAccess(documents){0!=documents.length&&canEdit(...documents)&&!someProcessing(...documents)&&(layout.accessEditDocuments=documents)}function hideAccess(){layout.accessEditDocuments=[]}function hideReprocess(){layout.reprocessDocuments=[]}function hideOwner(){layout.ownerEditDocuments=[]}function editData(documents){0!=documents.length&&canEdit(...documents)&&(layout.dataDocuments=documents,layout.dataOpen=!0)}function hideData(){layout.dataOpen=!1}function newProject(){layout.projectEdit=null,layout.projectOpen=!0}function embedProject(){hideProject(),layout.projectEmbed=!0}function hideProjectEmbed(){layout.projectEmbed=!1}function editProject(project){project.editAccess&&(layout.projectEdit=project,layout.projectOpen=!0)}function hideProject(){layout.projectOpen=!1}function showCollaborators(){layout.projectCollaboratorsOpen=!0,layout.projectOpen=!1}function hideCollaborators(){layout.projectCollaboratorsOpen=!1}function updateProjectEdit(){layout.projectEdit=layout.projectEdit}function editProjectCollaboratorAccess(collaborator){layout.projectEditUser=collaborator}function hideProjectCollaboratorAccess(){layout.projectEditUser=null}function showSearchTips(){layout.searchTipsOpen=!0}function hideSearchTips(){layout.searchTipsOpen=!1}function hideDiagnostics(){layout.diagnosticsOpen=!1}function hideMailkey(){layout.mailkeyOpen=!1}},function(module,__webpack_exports__,__webpack_require__){"use strict";async function wrapLoadSeparate(loadWritable,errorStore,fn){loadWritable.set(!0);try{return await fn()}catch(e){console.error(e),errorStore.error=e}finally{loadWritable.set(!1)}}async function wrapSeparate(loadStore,errorStore,fn){null!=loadStore&&(loadStore.loading=!0);try{return await fn()}catch(e){console.error(e),errorStore.error=e}finally{null!=loadStore&&(loadStore.loading=!1)}}async function wrapLoad(store,fn){return await wrapSeparate(store,store,fn)}async function wrapMultipleSeparate(loadStore,errorStore,...fns){return await wrapSeparate(loadStore,errorStore,()=>Promise.all(fns.map(fn=>fn())))}__webpack_require__.d(__webpack_exports__,"b",(function(){return wrapLoadSeparate})),__webpack_require__.d(__webpack_exports__,"d",(function(){return wrapSeparate})),__webpack_require__.d(__webpack_exports__,"a",(function(){return wrapLoad})),__webpack_require__.d(__webpack_exports__,"c",(function(){return wrapMultipleSeparate}))},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return derived})),__webpack_require__.d(__webpack_exports__,"c",(function(){return writable}));var _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_require__.d(__webpack_exports__,"b",(function(){return _internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.G}));const subscriber_queue=[];function writable(value,start=_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Q){let stop;const subscribers=[];function set(new_value){if(Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.X)(value,new_value)&&(value=new_value,stop)){const run_queue=!subscriber_queue.length;for(let i=0;i<subscribers.length;i+=1){const s=subscribers[i];s[1](),subscriber_queue.push(s,value)}if(run_queue){for(let i=0;i<subscriber_queue.length;i+=2)subscriber_queue[i][0](subscriber_queue[i+1]);subscriber_queue.length=0}}}return{set:set,update:function(fn){set(fn(value))},subscribe:function(run,invalidate=_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Q){const subscriber=[run,invalidate];return subscribers.push(subscriber),1===subscribers.length&&(stop=start(set)||_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Q),run(value),()=>{const index=subscribers.indexOf(subscriber);-1!==index&&subscribers.splice(index,1),0===subscribers.length&&(stop(),stop=null)}}}}function derived(stores,fn,initial_value){const single=!Array.isArray(stores),stores_array=single?[stores]:stores,auto=fn.length<2;return{subscribe:writable(initial_value,set=>{let inited=!1;const values=[];let pending=0,cleanup=_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Q;const sync=()=>{if(pending)return;cleanup();const result=fn(single?values[0]:values,set);auto?set(result):cleanup=Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.M)(result)?result:_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.Q},unsubscribers=stores_array.map((store,i)=>Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.ib)(store,value=>{values[i]=value,pending&=~(1<<i),inited&&sync()},()=>{pending|=1<<i}));return inited=!0,sync(),function(){Object(_internal_index_mjs__WEBPACK_IMPORTED_MODULE_0__.W)(unsubscribers),cleanup()}}).subscribe}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function removeFromArray(array,elem){const idx=array.indexOf(elem);return-1!=idx&&array.splice(idx,1),array}function uniquify(array,fieldAccess=(x=>x.id)){let unique={};const results=[];for(let i=array.length-1;i>=0;i--){const obj=array[i],field=fieldAccess(obj);null==unique[field]&&(results.push(obj),unique[field]=!0)}return results}function includes(array,elem,eq=((a,b)=>a==b)){for(let i=0;i<array.length;i++)if(eq(array[i],elem))return!0;return!1}function index(array,elem,eq=((a,b)=>a==b)){for(let i=0;i<array.length;i++)if(eq(array[i],elem))return i;return-1}function intersection(arrays,eq=((a,b)=>a==b)){return 0==arrays.length?[]:arrays.reduce((a,b)=>a.filter(elem=>includes(b,elem,eq)))}function arrayEq(x1,x2,eq=((a,b)=>a==b)){if(x1.length!=x2.length)return!1;for(let i=0;i<x1.length;i++)if(!eq(x1[i],x2[i]))return!1;return!0}function addToArrayIfUnique(array,newElem,eq=((a,b)=>a==b)){for(let i=0;i<array.length;i++)if(eq(array[i],newElem))return array;return[...array,newElem]}function sameProp(l,propFn,eq=((x,y)=>x==y)){let value=null;for(let i=0;i<l.length;i++){const prop=propFn(l[i]);if(null!=prop)if(null!=value){if(!eq(prop,value))return null}else value=prop}return value}__webpack_require__.d(__webpack_exports__,"f",(function(){return removeFromArray})),__webpack_require__.d(__webpack_exports__,"h",(function(){return uniquify})),__webpack_require__.d(__webpack_exports__,"c",(function(){return includes})),__webpack_require__.d(__webpack_exports__,"d",(function(){return index})),__webpack_require__.d(__webpack_exports__,"e",(function(){return intersection})),__webpack_require__.d(__webpack_exports__,"b",(function(){return arrayEq})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addToArrayIfUnique})),__webpack_require__.d(__webpack_exports__,"g",(function(){return sameProp}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return document_Document})),__webpack_require__.d(__webpack_exports__,"c",(function(){return docEquals})),__webpack_require__.d(__webpack_exports__,"b",(function(){return copyDoc})),__webpack_require__.d(__webpack_exports__,"d",(function(){return transformHighlights}));var svue=__webpack_require__(4),array=__webpack_require__(12);var structure_note=__webpack_require__(23),structure_section=__webpack_require__(67),fast_deep_equal=__webpack_require__(33),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),fast_copy=__webpack_require__(75),fast_copy_default=__webpack_require__.n(fast_copy);const PAGE_NO_RE=/^page_no_(\d+)$/;class document_Document extends svue.a{constructor(rawDocument,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.doc=rawDocument,data.lastProgress=null,data.lastImagesProcessed=null,data.lastTextsProcessed=null,data.highlightStart="<em>",data.highlightEnd="</em>",data},computed:{...null==structure.computed?{}:structure.computed,id:doc=>doc.id,slug:doc=>doc.slug,slugId:(id,slug)=>[id,slug].join("-"),canonicalUrl:slugId=>"https://www.documentcloud.org/documents/"+slugId,pageHashUrl:()=>page=>"#document/p"+page,noteHashUrl:pageHashUrl=>note=>`${pageHashUrl(note.page+1)}/a${note.id}`,pageUrl:(canonicalUrl,pageHashUrl)=>page=>`${canonicalUrl}${pageHashUrl(page)}`,canonicalPageUrl:canonicalUrl=>page=>`${canonicalUrl}/pages/${page}`,relativeCanonicalUrl:slugId=>"/documents/"+slugId,relativePageUrl:(relativeCanonicalUrl,pageHashUrl)=>page=>`${relativeCanonicalUrl}${pageHashUrl(page)}`,noteUrl:pageUrl=>note=>`${pageUrl(note.page+1)}/a${note.id}`,fakeNoteUrl:canonicalUrl=>note=>`${canonicalUrl}/annotations/${note.id}`,canonicalNoteUrl:fakeNoteUrl=>fakeNoteUrl,title:doc=>doc.title,description:doc=>doc.description,source:doc=>doc.source,relatedArticleUrl:doc=>doc.related_article,publishedUrl:doc=>doc.published_url,pageCount:doc=>doc.page_count,publishAt:doc=>doc.publish_at,user:doc=>doc.user,userName:user=>user.name,userId:user=>user.id,organization:doc=>doc.organization,orgId:organization=>organization.id,individualOrg:organization=>organization.individual,organizationName:organization=>organization.name,assetUrl:doc=>doc.asset_url,language:doc=>doc.language,pdf:(assetUrl,id,slug)=>`${assetUrl}documents/${id}/${slug}.pdf`,thumbnail:(assetUrl,id,slug,updatedAtTimestamp)=>`${assetUrl}documents/${id}/pages/${slug}-p1-small.gif?ts=${updatedAtTimestamp}`,rawCreatedAt:doc=>doc.created_at,createdAt:rawCreatedAt=>new Date(Date.parse(rawCreatedAt)),rawUpdatedAt:doc=>doc.updated_at,updatedAtTimestamp:rawUpdatedAt=>Date.parse(rawUpdatedAt),updatedAt:updatedAtTimestamp=>new Date(updatedAtTimestamp),pageSpec:doc=>doc.page_spec,pageSizes:(pageSpec,pageCount)=>null==pageSpec?null:function(pageSpec){if(0==pageSpec.trim().length)return[];const parts=pageSpec.split(";"),sizes=[];for(let i=0;i<parts.length;i++){const part=parts[i],[size,range]=part.split(":"),[width,height]=size.split("x").map(parseFloat),aspect=height/width,rangeParts=range.split(",");for(let j=0;j<rangeParts.length;j++){const rangePart=rangeParts[j];if(-1!=rangePart.indexOf("-")){const[start,end]=rangePart.split("-").map(x=>parseInt(x,10));for(let page=start;page<=end;page++)sizes[page]=aspect}else{sizes[parseInt(rangePart,10)]=aspect}}}return sizes}(pageSpec).slice(0,pageCount),access:doc=>doc.access,privateAccess:access=>"private"==access,publicAccess:access=>"public"==access,organizationAccess:access=>"organization"==access,editAccess:doc=>null!=doc.edit_access&&doc.edit_access,status:doc=>doc.status,success:status=>"success"==status,readable:status=>"readable"==status,pending:status=>"pending"==status,deleted:status=>"deleted"==status,error:status=>"error"==status,nofile:status=>"nofile"==status,processing:(pending,readable)=>pending||readable,viewable:(success,readable,editAccess)=>success||readable&&editAccess,nonPending:pending=>!pending,rawRemaining:doc=>doc.remaining,hasRemaining:rawRemaining=>null!=rawRemaining,imagesRemaining:(rawRemaining,hasRemaining)=>hasRemaining?rawRemaining.images:null,textsRemaining:(rawRemaining,hasRemaining)=>hasRemaining?rawRemaining.texts:null,imagesProcessed(pageCount,imagesRemaining){return null==imagesRemaining||(this.lastImagesProcessed=0==pageCount?0:pageCount-imagesRemaining),this.lastImagesProcessed},textsProcessed(pageCount,textsRemaining){return null==textsRemaining||(this.lastTextsProcessed=0==pageCount?0:pageCount-textsRemaining),this.lastTextsProcessed},imageProgress:(hasRemaining,imagesProcessed,pageCount)=>hasRemaining?0==pageCount?0:imagesProcessed/pageCount:null,textProgress:(hasRemaining,textsProcessed,pageCount)=>hasRemaining?0==pageCount?0:textsProcessed/pageCount:null,processingProgress:(hasRemaining,imageProgress,textProgress)=>hasRemaining?(imageProgress+textProgress)/2:null,realProgress(processingProgress){return null==processingProgress?this.lastProgress:(this.lastProgress=processingProgress,processingProgress)},projectIds:doc=>null==doc.projects?[]:doc.projects,notes:doc=>null==doc.notes?[]:doc.notes.map(note=>new structure_note.a(note)),sections:doc=>null==doc.sections?[]:doc.sections.map(section=>new structure_section.a(section)),rawData:doc=>doc.data,dataPoints(rawData){const results=[];for(const key in rawData)if(rawData.hasOwnProperty(key)){const values=Object(array.h)(rawData[key],x=>x);for(let i=0;i<values.length;i++)results.push({key:key,value:values[i]})}return results.sort((a,b)=>{const aKey="_tag"==a.key?a.value:a.key,bKey="_tag"==b.key?b.value:b.key,aValue=a.value,bValue=b.value,keyCompare=aKey.localeCompare(bKey);return 0!=keyCompare?keyCompare:aValue.localeCompare(bValue)}),results},rawHighlights:doc=>doc.highlights,highlights:(rawHighlights,highlightStart,highlightEnd)=>null==rawHighlights?null:transformHighlights(rawHighlights,highlightStart,highlightEnd),userOrgString:(individualOrg,userName,organizationName)=>null==userName?"":individualOrg||null==organizationName?userName:`${userName} (${organizationName})`,orgString:(individualOrg,userName,organizationName)=>individualOrg||null==organizationName?userName:organizationName}})}}function docEquals(doc1,doc2){return fast_deep_equal_default()(doc1.doc,doc2.doc)}function copyDoc(doc){return new document_Document(fast_copy_default()(doc.doc))}function transformPassage(passage,highlightStart,highlightEnd){const chunks=[],advance=numChars=>{passage=passage.substr(numChars)},pushRaw=numChars=>{null==numChars&&(numChars=passage.length),0!=numChars&&(chunks.push({text:passage.substr(0,numChars),type:"normal"}),advance(numChars))};for(;passage.length>0;){let foundHighlight=!1,idxStart=passage.indexOf(highlightStart);if(-1!=idxStart){let idxEnd=passage.indexOf(highlightEnd,idxStart+highlightStart.length);-1!=idxEnd&&(pushRaw(idxStart),advance(highlightStart.length),0!=(numChars=idxEnd-idxStart-highlightStart.length)&&(chunks.push({text:passage.substr(0,numChars),type:"highlight"}),advance(numChars)),advance(highlightEnd.length),foundHighlight=!0)}if(!foundHighlight)break}var numChars;return pushRaw(),chunks}function transformHighlights(rawHighlights,highlightStart,highlightEnd,returnDict=!1){const highlights=returnDict?{}:[],pages=[];for(const pageKey in rawHighlights)if(rawHighlights.hasOwnProperty(pageKey)){const match=pageKey.match(PAGE_NO_RE);if(null==match)continue;const page=parseInt(match[1])-1,highlight={page:page,passages:[]},passages=rawHighlights[pageKey];for(let i=0;i<passages.length;i++){const passage=passages[i];highlight.passages.push(transformPassage(passage,highlightStart,highlightEnd))}returnDict?(null==highlights[page]&&pages.push({page:page,count:highlight.passages.length}),highlights[page]=highlight.passages):highlights.push(highlight)}return returnDict?(pages.sort((a,b)=>a.page-b.page),{highlights:highlights,pages:pages}):(highlights.sort((a,b)=>a.page-b.page),highlights)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=void 0;var tslib_1=__webpack_require__(63),error_1=__webpack_require__(64),parser_1=__webpack_require__(99),types_1=__webpack_require__(45);exports.parse=function(message,opts){void 0===opts&&(opts={}),opts=tslib_1.__assign({shouldParseSkeletons:!0},opts);var result=new parser_1.Parser(message,opts).parse();if(result.err){var error=SyntaxError(error_1.ErrorKind[result.err.kind]);throw error.location=result.err.location,error.originalMessage=result.err.message,error}return(null==opts?void 0:opts.captureLocation)||function pruneLocation(els){els.forEach((function(el){if(delete el.location,types_1.isSelectElement(el)||types_1.isPluralElement(el))for(var k in el.options)delete el.options[k].location,pruneLocation(el.options[k].value);else types_1.isNumberElement(el)&&types_1.isNumberSkeleton(el.style)||(types_1.isDateElement(el)||types_1.isTimeElement(el))&&types_1.isDateTimeSkeleton(el.style)?delete el.style.location:types_1.isTagElement(el)&&pruneLocation(el.children)}))}(result.val),result.val},tslib_1.__exportStar(__webpack_require__(45),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return X})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ee})),__webpack_require__.d(__webpack_exports__,"c",(function(){return X})),__webpack_require__.d(__webpack_exports__,"d",(function(){return I})),__webpack_require__.d(__webpack_exports__,"e",(function(){return $})),__webpack_require__.d(__webpack_exports__,"f",(function(){return runtime_esm_k})),__webpack_require__.d(__webpack_exports__,"g",(function(){return T})),__webpack_require__.d(__webpack_exports__,"h",(function(){return y})),__webpack_require__.d(__webpack_exports__,"i",(function(){return Y}));var store=__webpack_require__(11),cjs=__webpack_require__(74),cjs_default=__webpack_require__.n(cjs),extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.create;function __spreadArray(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}Object.create;var ErrorCode,icu_messageformat_parser=__webpack_require__(14),src=__webpack_require__(50),src_default=__webpack_require__.n(src);!function(ErrorCode){ErrorCode.MISSING_VALUE="MISSING_VALUE",ErrorCode.INVALID_VALUE="INVALID_VALUE",ErrorCode.MISSING_INTL_API="MISSING_INTL_API"}(ErrorCode||(ErrorCode={}));var PART_TYPE,error_FormatError=function(_super){function FormatError(msg,code,originalMessage){var _this=_super.call(this,msg)||this;return _this.code=code,_this.originalMessage=originalMessage,_this}return __extends(FormatError,_super),FormatError.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},FormatError}(Error),error_InvalidValueError=function(_super){function InvalidValueError(variableId,value,options,originalMessage){return _super.call(this,'Invalid values for "'+variableId+'": "'+value+'". Options are "'+Object.keys(options).join('", "')+'"',ErrorCode.INVALID_VALUE,originalMessage)||this}return __extends(InvalidValueError,_super),InvalidValueError}(error_FormatError),error_InvalidValueTypeError=function(_super){function InvalidValueTypeError(value,type,originalMessage){return _super.call(this,'Value for "'+value+'" must be of type '+type,ErrorCode.INVALID_VALUE,originalMessage)||this}return __extends(InvalidValueTypeError,_super),InvalidValueTypeError}(error_FormatError),error_MissingValueError=function(_super){function MissingValueError(variableId,originalMessage){return _super.call(this,'The intl string context variable "'+variableId+'" was not provided to the string "'+originalMessage+'"',ErrorCode.MISSING_VALUE,originalMessage)||this}return __extends(MissingValueError,_super),MissingValueError}(error_FormatError);function isFormatXMLElementFn(el){return"function"==typeof el}function formatToParts(els,locales,formatters,formats,values,currentPluralValue,originalMessage){if(1===els.length&&Object(icu_messageformat_parser.isLiteralElement)(els[0]))return[{type:PART_TYPE.literal,value:els[0].value}];for(var result=[],_i=0,els_1=els;_i<els_1.length;_i++){var el=els_1[_i];if(Object(icu_messageformat_parser.isLiteralElement)(el))result.push({type:PART_TYPE.literal,value:el.value});else if(Object(icu_messageformat_parser.isPoundElement)(el))"number"==typeof currentPluralValue&&result.push({type:PART_TYPE.literal,value:formatters.getNumberFormat(locales).format(currentPluralValue)});else{var varName=el.value;if(!values||!(varName in values))throw new error_MissingValueError(varName,originalMessage);var value=values[varName];if(Object(icu_messageformat_parser.isArgumentElement)(el))value&&"string"!=typeof value&&"number"!=typeof value||(value="string"==typeof value||"number"==typeof value?String(value):""),result.push({type:"string"==typeof value?PART_TYPE.literal:PART_TYPE.object,value:value});else if(Object(icu_messageformat_parser.isDateElement)(el)){var style="string"==typeof el.style?formats.date[el.style]:Object(icu_messageformat_parser.isDateTimeSkeleton)(el.style)?el.style.parsedOptions:void 0;result.push({type:PART_TYPE.literal,value:formatters.getDateTimeFormat(locales,style).format(value)})}else if(Object(icu_messageformat_parser.isTimeElement)(el)){style="string"==typeof el.style?formats.time[el.style]:Object(icu_messageformat_parser.isDateTimeSkeleton)(el.style)?el.style.parsedOptions:void 0;result.push({type:PART_TYPE.literal,value:formatters.getDateTimeFormat(locales,style).format(value)})}else if(Object(icu_messageformat_parser.isNumberElement)(el)){(style="string"==typeof el.style?formats.number[el.style]:Object(icu_messageformat_parser.isNumberSkeleton)(el.style)?el.style.parsedOptions:void 0)&&style.scale&&(value*=style.scale||1),result.push({type:PART_TYPE.literal,value:formatters.getNumberFormat(locales,style).format(value)})}else{if(Object(icu_messageformat_parser.isTagElement)(el)){var children=el.children,value_1=el.value,formatFn=values[value_1];if(!isFormatXMLElementFn(formatFn))throw new error_InvalidValueTypeError(value_1,"function",originalMessage);var chunks=formatFn(formatToParts(children,locales,formatters,formats,values,currentPluralValue).map((function(p){return p.value})));Array.isArray(chunks)||(chunks=[chunks]),result.push.apply(result,chunks.map((function(c){return{type:"string"==typeof c?PART_TYPE.literal:PART_TYPE.object,value:c}})))}if(Object(icu_messageformat_parser.isSelectElement)(el)){if(!(opt=el.options[value]||el.options.other))throw new error_InvalidValueError(el.value,value,Object.keys(el.options),originalMessage);result.push.apply(result,formatToParts(opt.value,locales,formatters,formats,values))}else if(Object(icu_messageformat_parser.isPluralElement)(el)){var opt;if(!(opt=el.options["="+value])){if(!Intl.PluralRules)throw new error_FormatError('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',ErrorCode.MISSING_INTL_API,originalMessage);var rule=formatters.getPluralRules(locales,{type:el.pluralType}).select(value-(el.offset||0));opt=el.options[rule]||el.options.other}if(!opt)throw new error_InvalidValueError(el.value,value,Object.keys(el.options),originalMessage);result.push.apply(result,formatToParts(opt.value,locales,formatters,formats,values,value-(el.offset||0)))}else;}}}return function(parts){return parts.length<2?parts:parts.reduce((function(all,part){var lastPart=all[all.length-1];return lastPart&&lastPart.type===PART_TYPE.literal&&part.type===PART_TYPE.literal?lastPart.value+=part.value:all.push(part),all}),[])}(result)}function mergeConfigs(defaultConfig,configs){return configs?Object.keys(defaultConfig).reduce((function(all,k){var c1,c2;return all[k]=(c1=defaultConfig[k],(c2=configs[k])?__assign(__assign(__assign({},c1||{}),c2||{}),Object.keys(c1).reduce((function(all,k){return all[k]=__assign(__assign({},c1[k]),c2[k]||{}),all}),{})):c1),all}),__assign({},defaultConfig)):defaultConfig}function createFastMemoizeCache(store){return{create:function(){return{has:function(key){return key in store},get:function(key){return store[key]},set:function(key,value){store[key]=value}}}}}!function(PART_TYPE){PART_TYPE[PART_TYPE.literal=0]="literal",PART_TYPE[PART_TYPE.object=1]="object"}(PART_TYPE||(PART_TYPE={}));var memoizeIntl=src_default.a||src;var lib=function(){function IntlMessageFormat(message,locales,overrideFormats,opts){var cache,_this=this;if(void 0===locales&&(locales=IntlMessageFormat.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(values){var parts=_this.formatToParts(values);if(1===parts.length)return parts[0].value;var result=parts.reduce((function(all,part){return all.length&&part.type===PART_TYPE.literal&&"string"==typeof all[all.length-1]?all[all.length-1]+=part.value:all.push(part.value),all}),[]);return result.length<=1?result[0]||"":result},this.formatToParts=function(values){return formatToParts(_this.ast,_this.locales,_this.formatters,_this.formats,values,void 0,_this.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(_this.locales)[0]}},this.getAst=function(){return _this.ast},"string"==typeof message){if(this.message=message,!IntlMessageFormat.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=IntlMessageFormat.__parse(message,{ignoreTag:null==opts?void 0:opts.ignoreTag})}else this.ast=message;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=mergeConfigs(IntlMessageFormat.formats,overrideFormats),this.locales=locales,this.formatters=opts&&opts.formatters||(void 0===(cache=this.formatterCache)&&(cache={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:memoizeIntl((function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return new((_a=Intl.NumberFormat).bind.apply(_a,__spreadArray([void 0],args)))}),{cache:createFastMemoizeCache(cache.number),strategy:memoizeIntl.strategies.variadic}),getDateTimeFormat:memoizeIntl((function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return new((_a=Intl.DateTimeFormat).bind.apply(_a,__spreadArray([void 0],args)))}),{cache:createFastMemoizeCache(cache.dateTime),strategy:memoizeIntl.strategies.variadic}),getPluralRules:memoizeIntl((function(){for(var _a,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return new((_a=Intl.PluralRules).bind.apply(_a,__spreadArray([void 0],args)))}),{cache:createFastMemoizeCache(cache.pluralRules),strategy:memoizeIntl.strategies.variadic})})}return Object.defineProperty(IntlMessageFormat,"defaultLocale",{get:function(){return IntlMessageFormat.memoizedDefaultLocale||(IntlMessageFormat.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),IntlMessageFormat.memoizedDefaultLocale},enumerable:!1,configurable:!0}),IntlMessageFormat.memoizedDefaultLocale=null,IntlMessageFormat.__parse=icu_messageformat_parser.parse,IntlMessageFormat.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},IntlMessageFormat}();const r={},i=(e,n,t)=>t?(n in r||(r[n]={}),e in r[n]||(r[n][e]=t),t):t,a=(e,n)=>{if(null==n)return;if(n in r&&e in r[n])return r[n][e];const t=E(n);for(let o=0;o<t.length;o++){const r=c(t[o],e);if(r)return i(e,n,r)}};let l;const s=Object(store.c)({});function u(e){return e in l}function c(e,n){return u(e)?function(e,n){if(n in e)return e[n];const t=n.split(".");let o=e;for(let e=0;e<t.length;e++)if("object"==typeof o){if(e>0){const n=t.slice(e,t.length).join(".");if(n in o){o=o[n];break}}o=o[t[e]]}else o=void 0;return o}(function(e){return l[e]||null}(e),n):null}Object(store.a)([s],([e])=>Object.keys(e));s.subscribe(e=>l=e);const d={};function g(e){return d[e]}function w(e){return E(e).some(e=>{var n;return null===(n=g(e))||void 0===n?void 0:n.size})}function h(e,n){return Promise.all(n.map(n=>(function(e,n){d[e].delete(n),0===d[e].size&&delete d[e]}(e,n),n().then(e=>e.default||e)))).then(n=>function(e,...n){delete r[e],s.update(o=>(o[e]=cjs_default.a.all([o[e]||{},...n]),o))}(e,...n))}const p={};function b(e){if(!w(e))return e in p?p[e]:void 0;const n=function(e){return E(e).map(e=>{const n=g(e);return[e,n?[...n]:[]]}).filter(([,e])=>e.length>0)}(e);return p[e]=Promise.all(n.map(([e,n])=>h(e,n))).then(()=>{if(w(e))return b(e);delete p[e]}),p[e]}function y(e,n){g(e)||function(e){d[e]=new Set}(e);const t=g(e);g(e).has(n)||(u(e)||s.update(n=>(n[e]={},n)),t.add(n))}function v(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}const O={fallbackLocale:null,initialLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,ignoreTag:!0};function j(){return O}function $(e){const{formats:n}=e,t=v(e,["formats"]),o=e.initialLocale||e.fallbackLocale;return Object.assign(O,t,{initialLocale:o}),n&&("number"in n&&Object.assign(O.formats.number,n.number),"date"in n&&Object.assign(O.formats.date,n.date),"time"in n&&Object.assign(O.formats.time,n.time)),T.set(o)}const runtime_esm_k=Object(store.c)(!1);let L;const T=Object(store.c)(null);function x(e){return e.split("-").map((e,n,t)=>t.slice(0,n+1).join("-")).reverse()}function E(e,n=j().fallbackLocale){const t=x(e);return n?[...new Set([...t,...x(n)])]:t}function D(){return L}T.subscribe(e=>{L=e,"undefined"!=typeof window&&null!==e&&document.documentElement.setAttribute("lang",e)});const M=T.set;T.set=e=>{if(function(e){if(null==e)return;const n=E(e);for(let e=0;e<n.length;e++){const t=n[e];if(u(t))return t}}(e)&&w(e)){const{loadingDelay:n}=j();let t;return"undefined"!=typeof window&&null!=D()&&n?t=window.setTimeout(()=>runtime_esm_k.set(!0),n):runtime_esm_k.set(!0),b(e).then(()=>{M(e)}).finally(()=>{clearTimeout(t),runtime_esm_k.set(!1)})}return M(e)},T.update=e=>M(e(L));const I=()=>"undefined"==typeof window?null:window.navigator.language||window.navigator.languages[0],Z=e=>{const n=Object.create(null);return t=>{const o=JSON.stringify(t);return o in n?n[o]:n[o]=e(t)}},C=(e,n)=>{const{formats:t}=j();if(e in t&&n in t[e])return t[e][n];throw new Error(`[svelte-i18n] Unknown "${n}" ${e} format.`)},G=Z(e=>{var{locale:n,format:t}=e,o=v(e,["locale","format"]);if(null==n)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return t&&(o=C("number",t)),new Intl.NumberFormat(n,o)}),J=Z(e=>{var{locale:n,format:t}=e,o=v(e,["locale","format"]);if(null==n)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return t?o=C("date",t):0===Object.keys(o).length&&(o=C("date","short")),new Intl.DateTimeFormat(n,o)}),U=Z(e=>{var{locale:n,format:t}=e,o=v(e,["locale","format"]);if(null==n)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return t?o=C("time",t):0===Object.keys(o).length&&(o=C("time","short")),new Intl.DateTimeFormat(n,o)}),H=Z((e,n=D())=>new lib(e,n,j().formats,{ignoreTag:j().ignoreTag})),K=(e,n={})=>{"object"==typeof e&&(e=(n=e).id);const{values:t,locale:o=D(),default:r}=n;if(null==o)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let i=a(e,o);if(i){if("string"!=typeof i)return console.warn(`[svelte-i18n] Message with id "${e}" must be of type "string", found: "${typeof i}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),i}else j().warnOnMissingMessages&&console.warn(`[svelte-i18n] The message "${e}" was not found in "${E(o).join('", "')}".${w(D())?"\n\nNote: there are at least one loader still registered to this locale that wasn't executed.":""}`),i=r||e;if(!t)return i;let l=i;try{l=H(i,o).format(t)}catch(n){console.warn(`[svelte-i18n] Message "${e}" has syntax error:`,n.message)}return l},Q=(e,n)=>((e={})=>{var{locale:n=D()}=e,t=v(e,["locale"]);return U(Object.assign({locale:n},t))})(n).format(e),R=(e,n)=>((e={})=>{var{locale:n=D()}=e,t=v(e,["locale"]);return J(Object.assign({locale:n},t))})(n).format(e),V=(e,n)=>((e={})=>{var{locale:n=D()}=e,t=v(e,["locale"]);return G(Object.assign({locale:n},t))})(n).format(e),W=(e,n=D())=>a(e,n),X=Object(store.a)([T,s],()=>K),Y=Object(store.a)([T],()=>Q),ee=Object(store.a)([T],()=>R);Object(store.a)([T],()=>V),Object(store.a)([T,s],()=>W)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"i",(function(){return search})),__webpack_require__.d(__webpack_exports__,"e",(function(){return initSearch})),__webpack_require__.d(__webpack_exports__,"j",(function(){return setDocuments})),__webpack_require__.d(__webpack_exports__,"d",(function(){return handleUpload})),__webpack_require__.d(__webpack_exports__,"a",(function(){return allDocumentsUrl})),__webpack_require__.d(__webpack_exports__,"h",(function(){return projectUrl})),__webpack_require__.d(__webpack_exports__,"g",(function(){return projectIdUrl})),__webpack_require__.d(__webpack_exports__,"l",(function(){return userUrl})),__webpack_require__.d(__webpack_exports__,"k",(function(){return userSearchQuery})),__webpack_require__.d(__webpack_exports__,"b",(function(){return dataUrl})),__webpack_require__.d(__webpack_exports__,"f",(function(){return orgUrl})),__webpack_require__.d(__webpack_exports__,"c",(function(){return handleSearch}));var svue=__webpack_require__(4),router=__webpack_require__(5),wrapLoad=__webpack_require__(10),layout=__webpack_require__(9),api_document=__webpack_require__(8),common=__webpack_require__(6),api_project=__webpack_require__(18),fast_deep_equal=__webpack_require__(33),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);function findFromCache(cache,args){for(let i=0;i<cache.length;i++){const cacheEntry=cache[i];if(fast_deep_equal_default()(cacheEntry[0],args))return[!0,cacheEntry[1]]}return[!1]}var parse=__webpack_require__(68);const searchDocumentsCached=function(fn,cacheSize=20){const cache=[];return async(...args)=>{const cacheResult=findFromCache(cache,args);if(cacheResult[0])return cacheResult[1];const result=await fn(...args);for(cache.push([args,result]);cache.length>cacheSize;)cache.shift();return result}}(api_document.n),PROJECT_EMBED_SORTS={title:"title",created_at:"created_at",source:"source",page_count:"page_count"},GET_DOCUMENT_FIELDS={"project:":{idType:!0},"projects:":{transform:"project",idType:!0},"user:":{idType:!0},"account:":{transform:"user",idType:!0},"organization:":{idType:!0},"group:":{transform:"organization",idType:!0},"document:":{idType:!0},"id:":{transform:"document",idType:!0},"access:":{accept:["public","organization","private"]},"status:":{accept:["success","readable","pending","error","nofile"]}};function extractId(slugId){const parts=slugId.split("-");if(0==parts.length)return null;const lastPart=parts[parts.length-1];return/^[0-9]+$/.test(lastPart)?parseInt(lastPart):null}function plusNormalize(s){return s.startsWith("+")?s.substr(1):s}class searchParams_SearchParams extends svue.a{constructor(rawParams,onlyShowSuccess=!1,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.params=rawParams,data.onlyShowSuccess=onlyShowSuccess,data},computed:{...null==structure.computed?{}:structure.computed,page:params=>(null==params.page?1:parseInt(params.page))-1,projectEmbedId(params){const projectEmbedId=params.projectEmbedId;return null==projectEmbedId||0==projectEmbedId.trim().length?null:extractId(projectEmbedId)},perPage:params=>params.perpage||12,projectEmbedOrder:params=>params.order,query(params,projectEmbedId,onlyShowSuccess){if(null!=projectEmbedId)return null;let query=null==params.q?null:params.q;return null!=query&&onlyShowSuccess&&(query=`status:success AND (${query})`),query},parsedQuery:query=>null==query?null:Object(parse.a)(query),getDocumentParams(parsedQuery){const params={};if(null!=parsedQuery)for(let i=0;i<parsedQuery.length;i++){const highlight=parsedQuery[i];if("raw"==highlight.type&&0!=highlight.text.trim().length)return null;if("field"==highlight.type){const getDocumentField=GET_DOCUMENT_FIELDS[plusNormalize(highlight.field)];if(null==getDocumentField)return null;let normalizedValue=null;if(getDocumentField.idType)normalizedValue=extractId(highlight.value);else{if(!getDocumentField.accept.includes(highlight.value))return null;normalizedValue=highlight.value}const normalizedField=null!=getDocumentField.transform?getDocumentField.transform:plusNormalize(highlight.field.substr(0,highlight.field.length-1));null==params[normalizedField]?params[normalizedField]=[normalizedValue]:params[normalizedField].push(normalizedValue)}}return params},oneUserSearch:getDocumentParams=>null==getDocumentParams||null!=getDocumentParams.project||null!=getDocumentParams.organization||null==getDocumentParams.user||1!=getDocumentParams.user.length?null:getDocumentParams.user[0],oneOrgSearch:getDocumentParams=>null==getDocumentParams||null!=getDocumentParams.project||null!=getDocumentParams.user||null==getDocumentParams.organization||1!=getDocumentParams.organization.length?null:getDocumentParams.organization[0],oneProjectSearch:getDocumentParams=>null==getDocumentParams||null!=getDocumentParams.user||null!=getDocumentParams.organization||null==getDocumentParams.project||1!=getDocumentParams.project.length?null:getDocumentParams.project[0],oneAccessSearch:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.access||1!=getDocumentParams.access.length?null:getDocumentParams.access[0],noStatus:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.status,noAccess:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.access,oneOrZeroAccesses:getDocumentParams=>null==getDocumentParams||null==getDocumentParams.access||getDocumentParams.access.length<=1,isAllSearch:getDocumentParams=>null!=getDocumentParams&&(null==getDocumentParams.user&&null==getDocumentParams.organization&&null==getDocumentParams.project),getMethod(query,projectEmbedId,page,perPage,projectEmbedOrder,oneUserSearch,oneProjectSearch,oneAccessSearch,noStatus,oneOrZeroAccesses){if(null!=projectEmbedId){const extraProps={};let ordering=common.b;if(null!=perPage&&(extraProps.per_page=perPage),null!=projectEmbedOrder){const sort=PROJECT_EMBED_SORTS[projectEmbedOrder];null!=sort&&(ordering=sort)}return[()=>Object(api_project.d)(projectEmbedId,page,{per_page:perPage},ordering),null]}if(null==query)return null;if(0==page&&noStatus&&oneOrZeroAccesses){const cachedFn=()=>searchDocumentsCached(query,page),accessCondition=doc=>null==oneAccessSearch||doc.access==oneAccessSearch;if(null!=oneUserSearch)return[cachedFn,doc=>accessCondition(doc)&&doc.userId==oneUserSearch];if(null!=oneProjectSearch)return[cachedFn,doc=>accessCondition(doc)&&doc.projectIds.includes(oneProjectSearch)]}return[()=>Object(api_document.n)(query,page),null]}}})}}var url=__webpack_require__(3),string=__webpack_require__(29),modifications=__webpack_require__(36),structure_results=__webpack_require__(27),i18n=__webpack_require__(47);let lastSearch=null;const search=new svue.a({data:()=>({router:router.e,params:null,results:null,filePickerUser:null,_:i18n.a}),watch:{"router.resolvedRoute"(){checkForInit()},filePickerUser(){checkForInit()},_(){this.results=this.results}},computed:{onlyShowSuccessfulStatuses(filePickerUser,router){const route=router.resolvedRoute;return null!=filePickerUser||null!=route&&"project"==route.name},documents:(hasResults,results)=>hasResults?results.results:[],hasResults:results=>null!=results&&null!=results.results}});async function initSearch(params){if(search.params=new searchParams_SearchParams(params,search.onlyShowSuccessfulStatuses),null!=search.params.getMethod){const results=await Object(wrapLoad.d)(layout.t,search,search.params.getMethod[0]);search.results=results;const filter=search.params.getMethod[1];null!=filter?(modifications.a.applyModifications(),function(filter){setDocuments(search.documents.filter(filter))}(filter)):search.results=search.results}}function checkForInit(){const route=router.e.resolvedRoute,searchCache=[null!=route&&route.name,null!=route&&search.filePickerUser,null!=route&&route.props];null!=lastSearch&&fast_deep_equal_default()(searchCache,lastSearch)||(lastSearch=searchCache,null==route||("app"!=route.name&&"project"!=route.name||1==router.e.backNav)&&null==search.filePickerUser||initSearch(null!=search.filePickerUser?{q:userSearchQuery(search.filePickerUser)}:route.props))}function setDocuments(documents){const results=null==search.results?new structure_results.a("",{count:0,results:[]}):search.results;results.rawResults={...null==results.rawResults?{}:results.rawResults,results:documents},search.results=results}function handleUpload(newDocs){setDocuments([...newDocs,...search.documents])}function allDocumentsUrl(){return searchUrl("")}function projectUrl(project){return searchUrl(`+project:${Object(string.g)(project.title,project.id)} `)}function projectIdUrl(projectId){return searchUrl(`+project:${projectId} `)}function userOrgUrl(obj,key,publicAccessOnly=!1){const access=publicAccessOnly?"+access:public ":"";return searchUrl(`+${key}:${Object(string.g)(obj.name,obj.id)} ${access}`)}function userUrl(user,publicAccessOnly=!1){return userOrgUrl(user,"user",publicAccessOnly)}function userSearchQuery(user){return`user:${Object(string.g)(user.name,user.id)} `}function dataUrl(key,value){return searchUrl(`+${"_tag"==key?"tag":"data_"+key}:${function(value){return`"${value.replace('"','\\"')}"`}(value)}`)}function orgUrl(organization){return userOrgUrl(organization,"organization")}function searchUrl(query){return Object(url.d)(Object(router.a)("app"),{q:query,page:null})}function handleSearch(query,urlPush=!0){urlPush?Object(router.d)(searchUrl(query)):initSearch({q:query})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return grabAllPages}));var _api_session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);const MAX_PER_PAGE=parseInt("100");async function grabAllPages(url,perPage=MAX_PER_PAGE){null!=perPage&&(url=Object(_url__WEBPACK_IMPORTED_MODULE_1__.d)(url,{per_page:perPage}));const{data:data}=await _api_session__WEBPACK_IMPORTED_MODULE_0__.b.get(url),results=data.results;if(null!=data.next){const next=await grabAllPages(data.next);return results.concat(next)}return results}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return newProject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return deleteProject})),__webpack_require__.d(__webpack_exports__,"j",(function(){return updateProject})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addDocumentsToProject})),__webpack_require__.d(__webpack_exports__,"h",(function(){return removeDocumentsFromProject})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getProjects})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getProjectUsers})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getProjectDocuments})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addUserToProject})),__webpack_require__.d(__webpack_exports__,"k",(function(){return updateUserAccess})),__webpack_require__.d(__webpack_exports__,"i",(function(){return removeUser}));var session=__webpack_require__(2),base=__webpack_require__(1),svue=__webpack_require__(4),array=__webpack_require__(12);class project_Project extends svue.a{constructor(rawProject,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.project=rawProject,data.usersAndAccesses=[],data},computed:{...null==structure.computed?{}:structure.computed,id:project=>project.id,slug:project=>project.slug,slugId:(id,slug)=>[slug,id].join("-"),title:project=>project.title,description:project=>project.description,editAccess:project=>null!=project.edit_access&&project.edit_access,addRemoveAccess:(project,editAccess)=>null==project.add_remove_access?editAccess:project.add_remove_access,embedUrl:slugId=>`https://www.documentcloud.org/projects/${slugId}/`}})}addUser(user,access){this.usersAndAccesses=Object(array.h)([...this.usersAndAccesses,{user:user,access:access}],x=>x.user.id)}removeUser(user){this.usersAndAccesses=this.usersAndAccesses.filter(x=>x.user.id!=user.id)}changeAccess(user,access){this.usersAndAccesses=this.usersAndAccesses.map(x=>(x.user.id==user.id&&(x.access=access),x))}}var paginate=__webpack_require__(17),common=__webpack_require__(6),util_url=__webpack_require__(3),results=__webpack_require__(27),structure_document=__webpack_require__(13);async function newProject(title,description){const{data:data}=await session.b.post(Object(base.a)("projects/"),{title:title,description:description});return new project_Project(data)}async function deleteProject(projectId){await session.b.delete(Object(base.a)(`projects/${projectId}/`))}async function updateProject(projectId,title,description){const{data:data}=await session.b.patch(Object(base.a)(`projects/${projectId}/`),{title:title,description:description});return new project_Project(data)}async function addDocumentsToProject(projectId,docIds){await session.b.post(Object(base.a)(`projects/${projectId}/documents/`),docIds.map(id=>({document:id})))}async function removeDocumentsFromProject(projectId,docIds){await session.b.delete(Object(base.a)(`projects/${projectId}/documents/?document_id__in=${docIds.map(x=>""+x).join(",")}`))}async function getProjects(userId,expand=common.a){return(await Object(paginate.a)(Object(util_url.d)(Object(base.a)("projects/"),{user:userId,expand:expand}))).map(project=>new project_Project(project))}async function getProjectUsers(projectId,expand=common.a){return await Object(paginate.a)(Object(base.a)(Object(util_url.d)(`projects/${projectId}/users/`,{expand:expand})))}async function getProjectDocuments(projectId,page=0,extraParams={},ordering=common.b,expand=common.a+",document"){const params={...extraParams,ordering:ordering,expand:expand,page:page+1},url=Object(base.a)(Object(util_url.d)(`projects/${projectId}/documents/`,params)),{data:data}=await session.b.get(url);return data.results=data.results.map(document=>new structure_document.a(document.document)),new results.a(url,data)}async function addUserToProject(projectId,email,access,expand=common.a){const{data:user}=await session.b.post(Object(base.a)(`projects/${projectId}/users/`),{email:email,access:access}),{data:data}=await session.b.get(Object(base.a)(Object(util_url.d)(`projects/${projectId}/users/${user.user}/`,{expand:expand})));return data}async function updateUserAccess(projectId,userId,access){await session.b.patch(Object(base.a)(`projects/${projectId}/users/${userId}/`),{access:access})}async function removeUser(projectId,userId){await session.b.delete(Object(base.a)(`projects/${projectId}/users/${userId}/`))}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(54),toString=Object.prototype.toString;function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"==typeof val}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!=obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=merge(result[key],val):result[key]=val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},deepMerge:function deepMerge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=deepMerge(result[key],val):result[key]="object"==typeof val?deepMerge({},val):val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},extend:function(a,b,thisArg){return forEach(b,(function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val})),a},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);class Empty extends svelte_internal__WEBPACK_IMPORTED_MODULE_0__.b{constructor(options){super(),Object(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.K)(this,options,null,null,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.X,{})}}__webpack_exports__.default=Empty},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return lazyComponent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return loadDefault})),__webpack_require__.d(__webpack_exports__,"e",(function(){return loadHome})),__webpack_require__.d(__webpack_exports__,"b",(function(){return loadApp})),__webpack_require__.d(__webpack_exports__,"j",(function(){return loadViewer})),__webpack_require__.d(__webpack_exports__,"g",(function(){return loadNote})),__webpack_require__.d(__webpack_exports__,"h",(function(){return loadPage})),__webpack_require__.d(__webpack_exports__,"i",(function(){return loadProject})),__webpack_require__.d(__webpack_exports__,"d",(function(){return loadEntities})),__webpack_require__.d(__webpack_exports__,"f",(function(){return loadLegacyRedirect}));const lazyComponent=new(__webpack_require__(4).a)({data:()=>({default:null,home:null,app:null,viewer:null,note:null,page:null,project:null,legacyRedirect:null,entities:null})});function loadDefault(){null==lazyComponent.default&&Promise.resolve().then(__webpack_require__.bind(null,20)).then(module=>{lazyComponent.default=module.default})}function loadHome(){null==lazyComponent.home&&__webpack_require__.e(13).then(__webpack_require__.bind(null,147)).then(module=>{lazyComponent.home=module.default})}function loadApp(){null==lazyComponent.app&&Promise.all([__webpack_require__.e(4),__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(2),__webpack_require__.e(7)]).then(__webpack_require__.bind(null,144)).then(module=>{lazyComponent.app=module.default})}function loadViewer(){null==lazyComponent.viewer&&Promise.all([__webpack_require__.e(19),__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(6)]).then(__webpack_require__.bind(null,142)).then(module=>{lazyComponent.viewer=module.default})}function loadNote(){null==lazyComponent.note&&Promise.all([__webpack_require__.e(3),__webpack_require__.e(17)]).then(__webpack_require__.bind(null,115)).then(module=>{lazyComponent.note=module.default})}function loadPage(){null==lazyComponent.page&&Promise.all([__webpack_require__.e(3),__webpack_require__.e(15)]).then(__webpack_require__.bind(null,145)).then(module=>{lazyComponent.page=module.default})}function loadProject(){null==lazyComponent.project&&Promise.all([__webpack_require__.e(4),__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(2),__webpack_require__.e(8)]).then(__webpack_require__.bind(null,116)).then(module=>{lazyComponent.project=module.default})}function loadEntities(){null==lazyComponent.entities&&__webpack_require__.e(16).then(__webpack_require__.bind(null,117)).then(module=>{lazyComponent.entities=module.default})}function loadLegacyRedirect(){null==lazyComponent.legacyRedirect&&__webpack_require__.e(20).then(__webpack_require__.bind(null,118)).then(module=>{lazyComponent.legacyRedirect=module.default})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return documents})),__webpack_require__.d(__webpack_exports__,"r",(function(){return updateInCollection})),__webpack_require__.d(__webpack_exports__,"m",(function(){return removeDocuments})),__webpack_require__.d(__webpack_exports__,"i",(function(){return markAsDirty})),__webpack_require__.d(__webpack_exports__,"o",(function(){return reprocessDocuments})),__webpack_require__.d(__webpack_exports__,"c",(function(){return cancelProcessDocuments})),__webpack_require__.d(__webpack_exports__,"d",(function(){return changeAccessForDocuments})),__webpack_require__.d(__webpack_exports__,"e",(function(){return changeOwnerForDocuments})),__webpack_require__.d(__webpack_exports__,"k",(function(){return removeDocument})),__webpack_require__.d(__webpack_exports__,"g",(function(){return editSelectedDocumentInfo})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addDocumentData})),__webpack_require__.d(__webpack_exports__,"n",(function(){return replaceDocumentData})),__webpack_require__.d(__webpack_exports__,"l",(function(){return removeDocumentData})),__webpack_require__.d(__webpack_exports__,"h",(function(){return handleNewDocuments})),__webpack_require__.d(__webpack_exports__,"p",(function(){return selectDocument})),__webpack_require__.d(__webpack_exports__,"q",(function(){return unselectAll})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addDocsToProject})),__webpack_require__.d(__webpack_exports__,"j",(function(){return removeDocsFromProject}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_api_document__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_api_project__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(18),_layout__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_confirmDialog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),_router_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5),_search_search__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),_toast__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37),_util_string__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(29),_util_array__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(12),_modifications__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(36),_structure_document__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(13),_util_url__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3);let lastSelected=null;function mapReduce(l,id,fn){const results={};for(let i=0;i<l.length;i++){const x=l[i];results[x[id]]=fn(x)}return results}const documents=new svue__WEBPACK_IMPORTED_MODULE_0__.a({data:()=>({router:_router_router__WEBPACK_IMPORTED_MODULE_6__.e,search:_search_search__WEBPACK_IMPORTED_MODULE_7__.i,hasInited:!1,processingChangeTimeout:null,doneProcessing:!0,pending:[],inDocumentPickerDialog:!1}),watch:{"router.resolvedRoute"(){checkForInit()},inDocumentPickerDialog(){checkForInit()},rawDoneProcessing(){null!=this.processingChangeTimeout&&(clearTimeout(this.processingChangeTimeout),this.processingChangeTimeout=null),this.processingChangeTimeout=setTimeout(()=>{this.doneProcessing=this.rawDoneProcessing,this.processingChangeTimeout=null},500)}},computed:{staticMode(router){const route=router.resolvedRoute;return null==route||("project"==route.name||!(null==route.props||!Object(_util_url__WEBPACK_IMPORTED_MODULE_13__.e)(route.props.embed)))},allDocuments:search=>search.documents.filter(doc=>!doc.deleted),error:search=>search.error,docsById(allDocuments){const results={};return allDocuments.forEach(doc=>results[doc.id]=doc),results},documents:allDocuments=>allDocuments,pendingExisting:(docsById,pending)=>pending.filter(x=>{const id=x.doc_id;return null!=docsById[id]}),pendingMap:pending=>mapReduce(pending,"doc_id",x=>x),pagesProcessedMap:pending=>mapReduce(pending,"doc_id",x=>null==x.images||null==x.texts||null==x.text_positions||null==x.pages?null:Math.min(x.pages-x.images,x.pages-x.texts,x.pages-x.text_positions)),pageCountMap:pending=>mapReduce(pending,"doc_id",x=>null==x.pages?null:x.pages),realProgressMap:pending=>mapReduce(pending,"doc_id",x=>{if(null==x.images||null==x.texts||null==x.text_positions||null==x.pages)return null;return(x.pages-x.images+(x.pages-x.texts)+(x.pages-x.text_positions))/3/x.pages}),processingDocuments:allDocuments=>getDocumentsByCondition(doc=>doc.pending,allDocuments),updatingDocuments:documents=>getDocumentsByCondition(doc=>doc.readable,documents),numProcessing:pending=>pending.length,rawDoneProcessing:numProcessing=>0==numProcessing,processingProgress(pending){if(0==pending.length)return 1;let totalPages=0,totalPagesProcessed=0;for(let i=0;i<pending.length;i++){const p=pending[i];null!=p.images&&null!=p.texts&&null!=p.text_positions&&null!=p.pages&&(totalPages+=p.pages,totalPagesProcessed+=(p.pages-p.images+(p.pages-p.texts)+(p.pages-p.text_positions))/3)}return 0==totalPages?0:totalPagesProcessed/totalPages},pollDocuments:(processingDocuments,updatingDocuments)=>[...processingDocuments,...updatingDocuments],pollEvents(pollDocuments,processingDocuments,numProcessing){const grabPending=processingDocuments.length>0||numProcessing>0?[async()=>{try{await updatePending()}catch(e){console.error("error fetching pending",e)}}]:[],pollEvent=pollDocuments.length>0?[async()=>{try{(await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.g)(pollDocuments.map(doc=>doc.id))).forEach(doc=>replaceInCollection(doc))}catch(e){console.error("failed to get update info",docs)}}]:[];return grabPending.concat(pollEvent)}}});function checkForInit(){const route=_router_router__WEBPACK_IMPORTED_MODULE_6__.e.resolvedRoute;unselectAll(),null==route||!documents.inDocumentPickerDialog&&"app"!=route.name&&"project"!=route.name||documents.hasInited||(!async function(){Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.j)([..._search_search__WEBPACK_IMPORTED_MODULE_7__.i.documents]),updatePending()}(),documents.hasInited=!0)}function getDocumentsByCondition(condition,documents){return documents.filter(condition)}const collectionModifiers={addToCollection:addToCollection,removeFromCollection:removeFromCollection,updateInCollection:updateInCollection};function removeFromCollection(docId,modify=!0){modify&&_modifications__WEBPACK_IMPORTED_MODULE_11__.a.remove(collectionModifiers,docId);const newDocuments=documents.allDocuments.filter(doc=>doc.id!=docId);Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.j)(newDocuments),null!=documents.pendingMap[docId]&&(documents.pending=documents.pending.filter(x=>x.doc_id!=docId)),0==newDocuments.length&&window.location.reload()}function updateInCollection(document,docFn,modify=!0){let modified=!1,oldDoc=null,newDoc=null;const newDocuments=documents.allDocuments.map(doc=>(doc.id==document.id&&(oldDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(doc),docFn(doc),modified=!0,newDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(doc)),doc));return modify&&modified?Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.c)(oldDoc,newDoc)||_modifications__WEBPACK_IMPORTED_MODULE_11__.a.modify(collectionModifiers,oldDoc,docFn):(oldDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(document),docFn(document),newDoc=Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(document)),Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.j)(newDocuments),[modified,newDoc]}function replaceInCollection(document){updateInCollection(document,doc=>{doc.doc=document.doc})}function addToCollection(newDocs,modify=!0){const docsToAdd=Math.max(50-documents.allDocuments.length,0);newDocs=newDocs.slice(0,docsToAdd),modify&&_modifications__WEBPACK_IMPORTED_MODULE_11__.a.add(collectionModifiers,newDocs.map(x=>Object(_structure_document__WEBPACK_IMPORTED_MODULE_12__.b)(x)));const remainingDocs=[];newDocs.forEach(newDoc=>{!function(documents,id){for(let i=0;i<documents.length;i++)if(documents[i].id==id)return!0;return!1}(documents.allDocuments,newDoc.id)?remainingDocs.push(newDoc):replaceInCollection(newDoc)}),Object(_search_search__WEBPACK_IMPORTED_MODULE_7__.d)(remainingDocs)}function getIndex(document){for(let i=0;i<documents.documents.length;i++)if(documents.documents[i]==document)return i;return null}function removeDocuments(documents){0!=documents.length&&Object(_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("dialogDeleteDialog.title","dialogDeleteDialog.deleteDocs","dialog.delete",async()=>{await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.t,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.d)(documents.map(doc=>doc.id)),documents.map(doc=>removeFromCollection(doc.id))}),unselectAll()},{n:documents.length})}async function markAsDirty(docIds){try{(await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.g)(docIds)).map(doc=>replaceInCollection(doc))}catch(e){console.error("unexpected error marking docs dirty",docIds)}}async function reprocessDocuments(documents,forceOcr,language){await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.t,async()=>{const ids=documents.map(doc=>doc.id);await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.e)(documents.map(doc=>doc.id),{language:language}),await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.l)(ids,forceOcr),await markAsDirty(ids)})}function cancelProcessDocuments(documents){0!=documents.length&&Object(_confirmDialog__WEBPACK_IMPORTED_MODULE_5__.d)("dialogCancelProcessingDialog.title","dialogCancelProcessingDialog.deleteDocs","dialog.continue",async()=>{await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.t,async()=>{for(let i=0;i<documents.length;i++){const id=documents[i].id;await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.b)(id)}}),await markAsDirty(documents.map(doc=>doc.id)),unselectAll()},{n:documents.length})}async function changeAccessForDocuments(documents,access,publishAt,layout){await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(layout,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.e)(documents.map(doc=>doc.id),{access:access,publish_at:publishAt}),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,status:"readable",publish_at:publishAt}))}),Object(_layout__WEBPACK_IMPORTED_MODULE_3__.e)()}async function changeOwnerForDocuments(documents,user,organization,layout){await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(layout,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.e)(documents.map(doc=>doc.id),{user:user.id,organization:organization.id}),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,user:user,organization:organization}))})}function removeDocument(document){return removeDocuments([document])}async function editSelectedDocumentInfo(info,layout,selected,viewerUpdate=(()=>{})){await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(layout,async()=>{await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.e)(selected.map(doc=>doc.id),info),selected.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,...info})),viewerUpdate()}),unselectAll()}async function addDocumentData(documents,key,value){for(let i=0;i<documents.length;i++){const document=documents[i];await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.a)(document.id,key,value),null==document.doc.data[key]?document.doc.data[key]=[value]:document.doc.data[key].push(value),document.doc=document.doc,replaceInCollection(document)}}async function replaceDocumentData(documents,originalKey,originalValue,newKey,newValue){await removeDocumentData(documents,originalKey,originalValue),await addDocumentData(documents,newKey,newValue)}async function removeDocumentData(documents,key,value){for(let i=0;i<documents.length;i++){const document=documents[i];await Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.k)(document.id,key,value),null!=document.doc.data[key]&&(document.doc.data[key]=document.doc.data[key].filter(x=>x!=value),document.doc=document.doc,replaceInCollection(document))}}async function handleNewDocuments(newDocs){addToCollection(newDocs=newDocs.map(d=>(d.doc={...d.doc,status:"pending"},d)))}function selectDocument(document,shiftKey=!0){if(_layout__WEBPACK_IMPORTED_MODULE_3__.t.selectedMap={..._layout__WEBPACK_IMPORTED_MODULE_3__.t.selectedMap,[document.id]:document},shiftKey&&null!=lastSelected){const lastSelectedIndex=getIndex(lastSelected);if(null!=lastSelectedIndex){const toIndex=getIndex(document);if(null!=toIndex)for(let i=Math.min(lastSelectedIndex,toIndex)+1;i<Math.max(lastSelectedIndex,toIndex);i++)selectDocument(documents.documents[i],!1)}}lastSelected=document}function unselectAll(){_layout__WEBPACK_IMPORTED_MODULE_3__.t.selectedMap={},lastSelected=null}async function updatePending(){if(documents.staticMode)return;const pending=await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.d)(null,_layout__WEBPACK_IMPORTED_MODULE_3__.t,()=>Object(_api_document__WEBPACK_IMPORTED_MODULE_1__.h)());for(let i=0;i<pending.length;i++){const pendingDoc=pending[i],existingDoc=documents.pendingMap[pendingDoc.doc_id];null!=existingDoc&&(pendingDoc.images=null==pendingDoc.images?existingDoc.images:pendingDoc.images,pendingDoc.texts=null==pendingDoc.texts?existingDoc.texts:pendingDoc.texts,pendingDoc.text_positions=null==pendingDoc.text_positions?existingDoc.text_positions:pendingDoc.text_positions,pendingDoc.pages=null==pendingDoc.pages?existingDoc.pages:pendingDoc.pages)}documents.pending=pending}async function addDocsToProject(project,documents,showToast=!0){0!=(documents=documents.filter(doc=>!doc.projectIds.includes(project.id))).length&&(await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.t,async()=>{await Object(_api_project__WEBPACK_IMPORTED_MODULE_2__.a)(project.id,documents.map(doc=>doc.id)),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,projects:Object(_util_array__WEBPACK_IMPORTED_MODULE_10__.a)(d.projectIds,project.id)}))}),!_layout__WEBPACK_IMPORTED_MODULE_3__.t.error&&showToast&&Object(_toast__WEBPACK_IMPORTED_MODULE_8__.b)(`Successfully added ${Object(_util_string__WEBPACK_IMPORTED_MODULE_9__.d)(documents.length,"document",!0)} to ${project.title}.`))}async function removeDocsFromProject(project,documents,showToast=!0){0!=(documents=documents.filter(doc=>doc.projectIds.includes(project.id))).length&&(await Object(_util_wrapLoad__WEBPACK_IMPORTED_MODULE_4__.a)(_layout__WEBPACK_IMPORTED_MODULE_3__.t,async()=>{await Object(_api_project__WEBPACK_IMPORTED_MODULE_2__.h)(project.id,documents.map(doc=>doc.id)),documents.forEach(doc=>updateInCollection(doc,d=>d.doc={...d.doc,projects:Object(_util_array__WEBPACK_IMPORTED_MODULE_10__.f)(d.projectIds,project.id)}))}),!_layout__WEBPACK_IMPORTED_MODULE_3__.t.error&&showToast&&Object(_toast__WEBPACK_IMPORTED_MODULE_8__.b)(`Successfully removed ${Object(_util_string__WEBPACK_IMPORTED_MODULE_9__.d)(documents.length,"document",!0)} from project (${project.title}).`))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Note}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_util_bounds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39);function getDefault(obj,defaultValue=""){return null==obj?defaultValue:obj}class Note extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(rawNote,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.note=rawNote,data},computed:{...null==structure.computed?{}:structure.computed,id:note=>note.id,title:note=>getDefault(note.title),content:note=>getDefault(note.content),access:note=>getDefault(note.access,"private"),page:note=>note.page_number,isPageNote:note=>null===note.x1,x1:note=>null===note.x1?null:Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.min(note.x1,note.x2)),x2:note=>null===note.x2?null:Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.max(note.x1,note.x2)),y1:note=>null===note.y1?null:Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.min(note.y1,note.y2)),y2:note=>null===note.y2?null:Object(_util_bounds__WEBPACK_IMPORTED_MODULE_1__.a)(Math.max(note.y2,note.y2)),width:(x1,x2)=>x2-x1,height:(y1,y2)=>y2-y1,username:note=>getDefault(note.user,{name:""}).name,organization(note){const org=getDefault(note.organization,{});return org.individual?null:org.name}}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Addon})),__webpack_require__.d(__webpack_exports__,"c",(function(){return AddonRun})),__webpack_require__.d(__webpack_exports__,"b",(function(){return AddonEvent}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);function getDefault(obj,defaultValue=""){return null==obj?defaultValue:obj}class Addon extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(rawAddon,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.addon=rawAddon,data},computed:{...null==structure.computed?{}:structure.computed,id:addon=>addon.id,name:addon=>getDefault(addon.name),repository:addon=>getDefault(addon.repository),parameters:addon=>getDefault(addon.parameters,{}),user:addon=>addon.user,active:addon=>addon.active,organization(addon){const org=getDefault(addon.organization,{});return org.individual?null:org.name}}})}}class AddonRun extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(rawAddonRun,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.addonRun=rawAddonRun,data},computed:{...null==structure.computed?{}:structure.computed,uuid:addonRun=>addonRun.uuid,addonName:addonRun=>addonRun.addon.name,user:addonRun=>addonRun.user,status:addonRun=>addonRun.status,progress:addonRun=>addonRun.progress,message:addonRun=>addonRun.message,fileUrl:addonRun=>addonRun.file_url,rawCreatedAt:addonRun=>addonRun.created_at,createdAt: