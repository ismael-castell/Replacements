"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5915],{76679:(e,t,i)=>{i.d(t,{D:()=>n});var o=i(91051);function n(e,t){const{onClick:i,onDoubleClick:n}=e(),a=(0,o.useRef)(0),r=(0,o.useRef)(!1);return(0,o.useCallback)((e=>{a.current&&window.clearTimeout(a.current),r.current?null==n||n(e):(r.current=!0,window.setTimeout((()=>{r.current=!1}),300),a.current=window.setTimeout((()=>{null==i||i(e)}),300))}),t)}},57214:(e,t,i)=>{i.d(t,{V:()=>o});const o=(0,i(91051).createContext)({isMsePlayer:!1})},63464:(e,t,i)=>{function o(e){var t,i;return null!==(i=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==i?i:"UnknownComponent"}i.d(t,{i:()=>o})},16454:(e,t,i)=>{i.d(t,{S:()=>o});const o=["AT","BE","BG","HR","CY","CZ","DE","DK","EE","EL","FI","FR","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","IS","LI"]},88228:(e,t,i)=>{i.d(t,{n:()=>o,_:()=>n});const o=e=>{try{let t=btoa(e);return t=t.replace(/=+$/,""),encodeURIComponent(t)}catch(e){return null}},n=e=>{try{const t=decodeURIComponent(e);let i="";const o=t.length%4;2===o?i="==":3===o&&(i="=");const n=atob(t+i);if(!n)throw Error();return n}catch(e){return null}}},15073:(e,t,i)=>{i.d(t,{wC:()=>O,T:()=>T,bg:()=>B,g0:()=>M,yM:()=>R,Hx:()=>D});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(35167),l=i(86254),d=i.n(l),c=i(82346),u=i(11348),p=i(60595),m=i(20948),h=i(53095),g=i(93859),v=i(10026),y=i(5549),b=i(49584),_=i(68854),f=i(35468),x=i(21396),j=i(66958),C=i(88228);const k=({reportTarget:e})=>{if(!e)return null;const{report_type:t,video_owner:i,video_id:o,object_id:n}=e;let a=null;if(o&&i){const e=(0,j.fH)({uniqueId:null==i?void 0:i.uniqueId,videoId:o,secUid:null==i?void 0:i.secUid});a=`${location.origin}${e}`,"comment"===t&&(a=`${a}&cid=${(0,C.n)(n)}`)}return a};var w,S=i(53086),P=i(84785),I=i(92702);!function(e){e[e.Normal=0]="Normal",e[e.Bully=1]="Bully",e[e.Legal=2]="Legal",e[e.Spam=3]="Spam",e[e.UserPretend=4]="UserPretend",e[e.UserProfile=5]="UserProfile",e[e.Netzdg=6]="Netzdg",e[e.Kopig=7]="Kopig",e[e.Avia=8]="Avia"}(w||(w={}));const T=[112,212,9014],O=[222,9015],D=({reportTarget:e})=>{const t=k({reportTarget:e});return"https://www.tiktok.com/legal/report/NetzDG?lang=de"+(t?"&reporturl="+encodeURIComponent(t):"")},M=({reportTarget:e})=>{const t=k({reportTarget:e});return"https://www.tiktok.com/legal/report/lcen?lang=fr"+(t?"&reporturl="+encodeURIComponent(t):"")},R=({reportTarget:e})=>{const t=k({reportTarget:e});return"https://www.tiktok.com/legal/copyright-policy"+(t?"?report_url="+encodeURIComponent(t):"")};var L;!function(e){e[e.Reason=0]="Reason",e[e.Normal=1]="Normal",e[e.Kopig=2]="Kopig",e[e.User=3]="User",e[e.BlockUser=4]="BlockUser",e[e.Finish=5]="Finish",e[e.Ftcreport=6]="Ftcreport"}(L||(L={}));let B=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.report=t,this.appContext=i,this.t=o,this.defaultState={reasons:null,showing:!1,loading:!1,requesting:void 0,reportTarget:null,lastStatus:-1,PageState:0,PageStateData:void 0,PreState:[],UserData:{selectedReason:void 0,submitresult:void 0,HistoryReason:[]},blockedVideos:[]}}setReportTarget(e,t){e.reportTarget=t}judgeFtc(e,t){"kid_mode_video"===t.report_type&&(e.PageState=6)}setReasons(e,t){e.reasons=t,e.PageStateData={reasons:t}}addBlockVideo(e,t){e.blockedVideos.includes(t)||e.blockedVideos.push(t)}removeBlockVideo(e,t){e.blockedVideos=e.blockedVideos.filter((e=>e!==t))}setLoading(e,t){e.loading=t}getReasons(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,t])=>{var i;if(d()(e,t.reportTarget)&&t.reasons&&(null===(i=t.reasons)||void 0===i?void 0:i.length)>0)return(0,c.of)(this.getActions().setReasons(t.reasons));const{report_type:o,lang:n,object_id:a}=e;return this.service.getReportReasons({report_type:o,lang:n,object_id:a}).pipe((0,g.b)((({body:e})=>{e.length||f.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:1.2,widthType:"half"})})),(0,h.z)((t=>{var i,o,n;if(0===t.statusCode){let a=null!==(i=t.body)&&void 0!==i?i:[];return"user"===e.report_type&&(a=null!==(n=null===(o=a.find((e=>300===e.reason_type)))||void 0===o?void 0:o.next_reason)&&void 0!==n?n:[]),(0,c.of)(this.getActions().setReasons(a))}return(0,c.of)(this.getActions().setReasons([]))})),(0,v.O)(this.getActions().setLoading(!0)),(0,y.l)(this.getActions().setLoading(!1)))})))}handleNextReason(e){return e.pipe((0,m.M)(this.state$),(0,g.b)((([{reason_id:e},{reportTarget:t}])=>{const{object_id:i="",report_type:o=""}=null!=t?t:{};this.report.handleReportNext({object_id:i,object_type:o,reason_id:e})})),(0,h.z)((([{nextReason:e},{PageStateData:t,PageState:i}])=>(0,c.of)(this.getActions().setPageStateData({reasons:e}),this.getActions().appendToPreState({state:i,data:t})))))}handleNextForm(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{PageStateData:t,PageState:i}])=>(0,c.of)(this.getActions().setPageState(e),this.getActions().setPageStateData({test:123}),this.getActions().appendToPreState({state:i,data:t})))))}setShowing(e,t){e.showing=t}showReport(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().setShowing(!0),this.getActions().judgeFtc(e),this.getActions().getReasons(e),this.getActions().setReportTarget(e)))))}hideReport(e){return e.pipe((0,h.z)((()=>(0,c.of)(this.getActions().setShowing(!1)))))}setRequesting(e,t){e.requesting=t}setLastStatus(e,t){e.lastStatus=t}postReport(e){return e.pipe((0,m.M)(this.state$,this.appContext.state$),(0,b.z)((([{reason:e,extraData:t},{reportTarget:i,UserData:o},{appContext:n}])=>{var a,r;if(!i)return u.E;const s=8===(null===(a=null==o?void 0:o.selectedReason)||void 0===a?void 0:a.special_type),l={};Array.isArray(e)&&"kid_mode_video"===i.report_type&&(l.additional_reasons=`%5B${e.join(",")}%5D`,e=e[0]);const d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({app_name:"tiktok_web",aid:1988,current_region:null==n?void 0:n.$region,reporter_id:null===(r=null==n?void 0:n.$user)||void 0===r?void 0:r.uid,reason:e},i),{target:i.object_id}),t),{report_type:"kid_mode_video"===i.report_type?"video":i.report_type}),l);return this.service.postReport(d).pipe((0,_.K)((()=>(0,c.of)({status_code:-1}))),(0,h.z)((t=>{let o;switch(t.status_code){case 90002:o={title:this.t("Web_report_thanks_for_report"),content:this.t("Web_report_report_detail"),button:this.t("live_close"),success:!1};break;case 0:o={title:this.t("Web_report_thanks_for_report"),content:s?this.t("avia_law_report_received_confirm"):this.t("Web_report_report_detail"),button:this.t("pm_mt_live_done"),success:!0};break;default:o={title:this.t("Web_report_report_for_error"),content:this.t("Sorry, something wrong with the server, please try again."),button:this.t("live_close"),success:!1}}if(0===t.status_code){const{object_id:t,report_type:o}=i;this.report.handleReportSubmit({object_id:t,object_type:o,reason_id:e})}return"video"===i.report_type&&0===t.status_code&&i.object_id?(0,c.of)(this.getActions().addBlockVideo(i.object_id),this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:o})):(0,c.of)(this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:o}))})),(0,v.O)(this.getActions().setRequesting(!0)),(0,y.l)(this.getActions().setRequesting(!1)))})))}setPageState(e,t){e.PageState=t}appendToPreState(e,t){e.PreState.push(t)}removeFromPreState(e){e.PreState.pop()}resetPreState(e){e.PreState=[]}setUserData(e,t){e.UserData=Object.assign(Object.assign({},e.UserData),t)}setPageStateData(e,t){e.PageStateData=t}resetState(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().resetPreState(),this.getActions().setUserData({selectedReason:void 0,HistoryReason:[]}),this.getActions().setPageState(0),this.getActions().setPageStateData(null)))))}handlePrevStep(e){return e.pipe((0,m.M)(this.state$),(0,h.z)((([e,{PreState:t}])=>{if(0===t.length)return u.E;const{state:i,data:o}=t[t.length-1];return(0,c.of)(this.getActions().setPageState(i),this.getActions().setPageStateData(o),this.getActions().removeFromPreState())})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setReportTarget",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"judgeFtc",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setReasons",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"addBlockVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"removeBlockVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setLoading",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"getReasons",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"handleNextReason",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"handleNextForm",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setShowing",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"showReport",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"hideReport",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setRequesting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setLastStatus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"postReport",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setPageState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"appendToPreState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"removeFromPreState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"resetPreState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setUserData",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"setPageStateData",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"resetState",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],B.prototype,"handlePrevStep",null),B=(0,o.__decorate)([(0,r.Y)("Report"),(0,o.__param)(3,(0,s.t)(x.s)),(0,o.__metadata)("design:paramtypes",[I.r,S.y,P.G,Function])],B)},92702:(e,t,i)=>{i.d(t,{r:()=>l});var o=i(64047),n=i(57244),a=i(82346),r=i(30626),s=i(4206);let l=class{constructor(e){this.fetch=e}getReportReasons(e){return this.fetch.get("/node/report/reasons",{query:e,baseUrlType:2})}postReport(e){return this.fetch.get("/aweme/v1/aweme/feedback/",{query:e,baseUrlType:2})}uploadImage(e){if(0===e.length)return(0,a.of)({data:[],statusCode:0});const t=new FormData;for(let i=0;i<e.length;i++){const o=e[i];t.append("type",o.type),t.append("size",`${o.size}`),t.append("name",o.name),t.append("height",o.height),t.append("width",o.width),t.append(`file${i}`,o,o.name)}return this.fetch.post("/node/feedback/upload_image/",{body:t,headers:{[r.eD]:this.fetch.csrfToken},baseUrlType:2,omitContentType:!0})}};l=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[s.r])],l)},16494:(e,t,i)=>{i.d(t,{Q:()=>d}),i(11040);var o=i(9236),n=i(16926),a=i(91051),r=i(40599),s=i(53086),l=i(15073);function d({onShow:e,reportTarget:t}){const{showModal:i}=(0,r.J)(),d=(0,o.qj)(l.bg),c=(0,n.fz)(s.y);return{handleShowReport:(0,a.useCallback)((o=>{null==e||e(o),i(),d.showReport(t),c.handleShowReport({object_type:t.report_type,type:t.report_type,object_id:t.object_id,play_mode:t.play_mode})}),[d,e,c,t,i])}}},16929:(e,t,i)=>{var o;i.d(t,{PA:()=>n,G2:()=>a}),function(e){e[e.OneColumn=0]="OneColumn",e[e.ThreeColumn=1]="ThreeColumn",e[e.BrowserMode=2]="BrowserMode",e[e.SwiperMode=3]="SwiperMode",e[e.VideoDetail=4]="VideoDetail"}(o||(o={}));const n={0:{forceMute:!1,defaultMute:!1},1:{forceMute:!0,defaultMute:!0},2:{forceMute:!1,defaultMute:!1},3:{forceMute:!1,defaultMute:!1},4:{forceMute:!1,defaultMute:!1}},a=.8},14870:(e,t,i)=>{i.d(t,{Fk:()=>p,Mz:()=>m,s_:()=>h,DZ:()=>g,$v:()=>v,ru:()=>b,A4:()=>_});var o=i(16926),n=i(9236),a=i(91051),r=i(13964),s=i(91218),l=i(56785),d=i(16929),c=i(52432),u=i(13033);function p({loadingThreshold:e=1e3,isCurrentVideo:t}){const[i,o]=(0,a.useState)(!1),n=(0,a.useRef)(0),r=(0,a.useCallback)((()=>{n.current&&window.clearTimeout(n.current),o(!1)}),[]),s=(0,a.useCallback)((()=>{e?(n.current&&window.clearTimeout(n.current),n.current=window.setTimeout((()=>{o(!0)}),e)):o(!0)}),[e]);return(0,a.useEffect)((()=>(t||(window.clearTimeout(n.current),o(!1)),()=>window.clearTimeout(n.current))),[t]),{loading:i,handleCanPlayWithLoading:r,handlePauseWithLoading:r,handlePlayingWithLoading:r,handleErrorWithLoading:r,handleWaitingWithLoading:s}}function m(){const[e,t]=(0,a.useState)(!0),i=(0,a.useCallback)((()=>{t(!1)}),[]),o=(0,a.useCallback)((()=>{t(!0)}),[]);return(0,a.useEffect)((()=>{const e=(0,r.Y8)(i,o);return()=>{null==e||e()}}),[o,i]),e}function h(e){const t=(0,o.fz)(c.B),[i,r]=(0,n.b7)(l.x,{selector:e=>e.mute,dependencies:[]}),s=(0,a.useCallback)(((i,o="click")=>{t.handleSwitchSound({muted:i,playMode:e,enter_method:o}),u.Bv.setItem("muted",i),r.setMute(i),i||0!==u.Bv.getItem("volume")||(u.Bv.setItem("volume",d.G2),r.setVolume(d.G2))}),[r,e,t]);return{mute:i,setMute:s}}function g(){const[{mute:e,volume:t},i]=(0,n.b7)(l.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),o=(0,a.useCallback)(((e,t)=>{u.Bv.setItem("volume",e),i.setVolume(e),0===e?(u.Bv.setItem("muted",!0),i.setMute(!0)):t&&(u.Bv.setItem("muted",!1),i.setMute(!1))}),[i]);return{mute:e,volume:t,setVolume:o}}function v(e){const{setMute:t,setVolume:i}=(0,n.qj)(l.x);(0,a.useEffect)((()=>{var o,n;t(null!==(o=u.Bv.getItem("muted"))&&void 0!==o?o:d.PA[e].defaultMute),i(null!==(n=u.Bv.getItem("volume"))&&void 0!==n?n:d.G2)}),[])}const y="video_playback_error";function b(){const e=(0,o.fz)(s.n);return(0,a.useCallback)((t=>{var i,o,n;const a=null!==(o=null===(i=null==t?void 0:t.nativeEvent)||void 0===i?void 0:i.target)&&void 0!==o?o:null===(n=null==t?void 0:t.nativeEvent)||void 0===n?void 0:n.srcElement;if(a){const{error:{code:t=-1,message:i="Empty message"}={},networkState:o,readyState:n,src:r="",currentTime:s=0}=a;e.emitEvent(y,{code:t},{errorMessage:i,errorCode:t,readyState:n,networkState:o,isXgPlayer:"0"});const l={errorCode:t,errorMessage:i,src:r,currentTime:s,networkState:o,readyState:n};e.captureMessage(`Video playback error: ${JSON.stringify(l)}`,"error")}}),[e])}function _(){const e=(0,o.fz)(s.n);return(0,a.useCallback)((t=>{if(t)try{const{error:i,readyState:o,networkState:n,currentTime:a=0,currentSrc:r=""}=t,{code:s=-1,message:l="Empty message"}=null!=i?i:{};e.emitEvent(y,{code:s},{errorMessage:l,errorCode:String(s),readyState:String(o),networkState:String(n),isXgPlayer:"1"});const d={errorCode:s,errorMessage:l,src:r,currentTime:a,networkState:n,readyState:o,isXgPlayer:!0};e.captureMessage(`Video playback error: ${JSON.stringify(d)}`,"error")}catch(e){}}),[e])}},75595:(e,t,i)=>{i.d(t,{S:()=>n});var o=i(91051);function n(e){const{direction:t="ltr",progressRef:i,circleRef:n,barRef:a,initialPercent:r=0,draggingPercentCb:s,draggingStateCb:l,progressReportCallback:d}=e,[c,u]=(0,o.useState)(r),p=(0,o.useRef)(0),m=(0,o.useRef)(null),h=(0,o.useCallback)(((e,t="original")=>{if("number"!=typeof e||e!=e)return;const i=Math.min(1,Math.max(0,e));u(i),("dragging"!==t&&"stop"!==t||i!==m.current)&&(null==s||s(i),m.current=i)}),[s]),g=(0,o.useCallback)(((e,o="original")=>{if(!n.current||!i.current||!a.current)return;let r;e.stopPropagation();const s="vertical"===t?i.current.getBoundingClientRect().height:i.current.getBoundingClientRect().width,{x:l,y:c,width:u,height:m}=i.current.getBoundingClientRect();switch(t){case"vertical":r=c+m-e.clientY;break;case"rtl":r=l+u-e.clientX;break;default:r=e.clientX-l}if("start"===o)switch(t){case"vertical":{const e=a.current.getBoundingClientRect().height;p.current=Math.min(1,Math.max(0,e/s));break}default:{const e=a.current.getBoundingClientRect().width;p.current=Math.min(1,Math.max(0,e/s));break}}else{if("stop"===o){const e=Math.min(1,Math.max(0,r/s)),t=p.current;null==d||d(t,e)}h(r/s,o)}}),[n,i,a,t,h,d]),v=(0,o.useRef)((e=>{null==l||l(!0),e.preventDefault(),g(e,"dragging")})),y=(0,o.useRef)((e=>{document.removeEventListener("mouseup",y.current),document.removeEventListener("mousemove",v.current),g(e,"stop"),null==l||l(!1)}));return{percent:c,bindDrag:(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g(e,"start"),document.addEventListener("mouseup",y.current),document.addEventListener("mousemove",v.current)}),[g]),seek:g,update:u}}},80910:(e,t,i)=>{i.d(t,{y:()=>l});var o,n,a=i(64047),r=i(57244),s=i(481);!function(e){e.LikeComment="like_comment",e.CancelLikeComment="cancel_like_comment",e.PostComment="post_comment",e.EnterText="enter_text",e.CloseText="close_text",e.SearchCommentEmoji="search_comment_emoji",e.SearchCommentAt="search_comment_at",e.AddCommentAt="add_comment_at",e.VideoCommentShow="video_comment_show",e.ShowMoreReply="show_more_reply",e.TapComment="tap_comment",e.CloseCommentTab="close_comment_tab",e.CloseComment="close_comment",e.KeepEditingComment="keep_editing_comment",e.LeaveCommentPage="leave_comment_page",e.CopyCommentUrl="web_comment_url",e.MentionItemShow="tag_mention_head_show"}(o||(o={})),function(e){e.Original="original",e.Reply="reply",e.ReplyToReply="reply_to_reply"}(n||(n={}));let l=class{constructor(){this.handleCommentLike=e=>{var{isLike:t}=e,i=(0,a.__rest)(e,["isLike"]);const o=t?"like_comment":"cancel_like_comment";s.WB.event(o,i)},this.handlePostComment=e=>{s.WB.event("post_comment",e)},this.handleShowMoreReply=e=>{s.WB.event("show_more_reply",e)},this.handleCommentShow=e=>{s.WB.event("video_comment_show",e)},this.handleEnterText=e=>{s.WB.event("enter_text",e)},this.handleCloseText=e=>{s.WB.event("close_text",e)},this.handleSearchAt=e=>{s.WB.event("search_comment_at",e)},this.handleSelectAt=e=>{s.WB.event("add_comment_at",e)},this.handleEmojiSelect=e=>{s.WB.event("search_comment_emoji",e)},this.handleClose=e=>{s.WB.event("close_comment",e)},this.handleLeaveComment=e=>{s.WB.event("leave_comment_page",e)},this.handleKeepComment=e=>{s.WB.event("keep_editing_comment",e)},this.handleCopyCommentUrl=e=>{s.WB.event("web_comment_url",e)},this.handleMentionItemShow=e=>{s.WB.event("tag_mention_head_show",Object.assign(Object.assign({},e),{function:"mention"}))},this.handleTapComment=e=>{s.WB.event("tap_comment",e)},this.handleCloseCommentTab=()=>{s.WB.event("close_comment_tab",{enter_method:"click_cancel"})}}};l=(0,a.__decorate)([(0,r.G)()],l)},53086:(e,t,i)=>{i.d(t,{y:()=>s});var o,n=i(64047),a=i(57244),r=i(481);!function(e){e.Report="click_report",e.ReportSubmit="web_report_submit",e.ReportNext="web_choose_report_reason_next"}(o||(o={}));let s=class{handleShowReport(e){r.WB.event("click_report",Object.assign(Object.assign({},e),{channel:"web"}))}handleReportSubmit(e){r.WB.event("web_report_submit",e)}handleReportNext(e){r.WB.event("web_choose_report_reason_next",e)}};s=(0,n.__decorate)([(0,a.G)()],s)},76985:(e,t,i)=>{i.d(t,{m:()=>o,x:()=>n});const o=e=>10229===e||10230===e,n=e=>isNaN(e)?"00:00":`${`0${Math.floor(e/60%60)}`.slice(-2)}:${`0${Math.floor(e%60)}`.slice(-2)}`},48793:(e,t,i)=>{i.d(t,{t:()=>m});var o,n=i(11040),a=i(91051),r=i(95918),s=i(27918);function l({styleType:e,direction:t}){switch(e){case 0:case 1:return{flexDirection:"column"};case 2:return{flexDirection:"row","& + &":(0,s.YJ)({direction:t,marginStart:"20px"})}}return null}!function(e){e[e.OneColumn=0]="OneColumn",e[e.OneColumnShare=1]="OneColumnShare",e[e.BrowserMode=2]="BrowserMode"}(o||(o={}));const d=(0,r.Z)("button",{target:"e1hk3hf90"})((({styleType:e,theme:{direction:t,colors:i}})=>[s.Ph,{position:"relative",display:"flex",alignItems:"center",cursor:"pointer",":disabled":{cursor:"default",color:i.TextPrimary}},l({styleType:e,direction:t})]),"label:ButtonActionItem;");function c({styleType:e,direction:t}){switch(e){case 0:return[{marginTop:"8px",marginBottom:"6px"},(0,s.f1)({max:767,style:{width:"32px",height:"32px",padding:"6px",svg:{width:"20px",height:"20px"}}})];case 1:return[{padding:"0",marginTop:"8px",marginBottom:"6px"}];case 2:return[{padding:"6px"},(0,s.YJ)({direction:t,marginEnd:"6px"})]}return null}const u=(0,r.Z)("span",{target:"e1hk3hf91"})((({styleType:e,theme:{direction:t,colors:i}})=>[{display:"flex",justifyContent:"center",alignItems:"center",width:2===e?"32px":"48px",height:2===e?"32px":"48px",fontSize:"0px",borderRadius:"50%",transition:"all ease-in-out 200ms"},1!==e?{backgroundColor:i.BGInput,[`${d}:not(:disabled) &:hover`]:{backgroundColor:"rgba(22, 24, 35, .1)"},[`${d}:not(:disabled) &:active`]:{backgroundColor:"rgba(22, 24, 35, .14)"}}:null,c({styleType:e,direction:t})]),"label:SpanIconWrapper;"),p=(0,r.Z)("strong",{target:"e1hk3hf92"})((({theme:e})=>(0,s.GI)({theme:e,typography:"P4",color:"TextSecondary"})),{textAlign:"center"},"label:StrongText;"),m=(0,a.memo)((function(e){const{text:t,Icon:i,styleType:o,disabled:a,children:r,e2eTag:s}=e;return(0,n.jsxs)(d,Object.assign({styleType:o,type:"button",onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:a},{children:[(0,n.jsx)(u,Object.assign({styleType:o,"data-e2e":`${s}-icon`},{children:i}),void 0),(0,n.jsx)(p,Object.assign({"data-e2e":`${s}-count`},{children:t}),void 0),r]}),void 0)}))},17118:(e,t,i)=>{i.d(t,{H:()=>s});var o=i(11040),n=i(91051),a=i(17936),r=i(8721);const s=e=>{const{visible:t=!1,duration:i=5e3,onHide:s,text:l,children:d,onShow:c,closeByActive:u}=e,p=(0,r.Q)(),[m,h]=(0,n.useState)(!1);(0,n.useEffect)((()=>{h(t)}),[t]),(0,n.useEffect)((()=>{!m&&s&&s(),m&&(null==c||c(),setTimeout((()=>{h(!1)}),i))}),[s,m,i,c]);const g=(0,n.useCallback)((()=>{u&&h(!1)}),[u]),v=(0,n.useMemo)((()=>({padding:"12px"})),[]),y=(0,n.useMemo)((()=>({keepParent:!0})),[]);return(0,o.jsx)(a.u,Object.assign({destroyTooltipOnHide:y,onClick:g,placement:"top",overlay:p(l),tooltipTheme:"blue",visible:m,overlayInnerStyle:v},{children:d}),void 0)}},14452:(e,t,i)=>{i.d(t,{B:()=>m});var o=i(91051),n=i(32667),a=i(11040),r=i(58695),s=i(30641),l=i(95918);const d=(0,l.Z)("div",{target:"exhfy940"})({pointerEvents:"none",position:"fixed",zIndex:1e3},"label:DivDoubleTapContainer;"),c=(0,s.F4)({"0%":{opacity:"1",transform:"scale(1.18)"},"14%":{opacity:"1",transform:"scale(.9)"},"21%":{opacity:"1",transform:"scale(1)"},"58%":{opacity:"1",transform:"scale(1)"},"100%":{opacity:"0",transform:"scale(1.93)"}}),u=(0,l.Z)(r.Z,{target:"exhfy941"})({animation:`${c} 1400ms`,width:"120px",height:"120px"},"label:StyledLikeIcon;"),p=function({x:e,y:t}){const i=Math.floor(61*Math.random()-30);return(0,a.jsx)(d,Object.assign({style:{left:e-60,top:t-60,transform:`rotate(${i}deg)`}},{children:(0,a.jsx)(u,{},void 0)}),void 0)};class m{constructor(e,t){this.x=e,this.y=t,this.el=document.createElement("div")}emit(){document.body.appendChild(this.el),(0,n.render)((0,o.createElement)(p,{x:this.x,y:this.y}),this.el),window.setTimeout((()=>{this.destroy()}),1400)}destroy(){(0,n.unmountComponentAtNode)(this.el),document.body.removeChild(this.el)}}},57462:(e,t,i)=>{i.d(t,{C:()=>d});var o=i(11040),n=i(8721),a=i(34708),r=i(95918),s=i(27918);const l=(0,r.Z)("p",{target:"ejymp3n0"})((({theme:e,isMobile:t})=>[(0,s.GI)({theme:e,fontFamily:"Proxima",typography:t?"P3":"P2"}),{marginTop:t?"-4px":"8px",marginBottom:t?"8px":"unset",fontSize:t?"15px":"16px",fontWeight:400}]),"label:PPaidPartnership;"),d=function({item:e}){var t;const i=(0,n.Q)(),{$isMobile:r}=null!==(t=(0,a.L)((()=>["$isMobile"]),[]))&&void 0!==t?t:{};return 2===(null==e?void 0:e.adLabelVersion)?(0,o.jsx)(l,Object.assign({isMobile:r},{children:i("bc_new_disclosure")}),void 0):null}},1160:(e,t,i)=>{i.d(t,{V:()=>n});var o=i(91051);const n=()=>{const e=(0,o.useRef)(-1),[t,i]=(0,o.useState)(!1);return{showing:t,handleItemEnter:(0,o.useCallback)((()=>{e.current=window.setTimeout((()=>{i(!0)}),1e3)}),[]),handleItemLeave:(0,o.useCallback)((()=>{window.clearTimeout(e.current),i(!1)}),[]),handleCardEnter:(0,o.useCallback)((()=>{window.clearTimeout(e.current),i(!0)}),[]),handleCardLeave:(0,o.useCallback)((()=>{e.current=window.setTimeout((()=>{i(!1)}),500)}),[])}}},57354:(e,t,i)=>{i.d(t,{W:()=>m});var o=i(11040),n=i(66089),a=i(70119),r=i(39556),s=i(91051),l=i(8721),d=i(95918),c=i(27918);const u=(0,d.Z)("div",{target:"e4cyjsy0"})((({theme:e,justifyContent:t})=>[(0,c.GI)({theme:e,fontFamily:"Proxima",color:"ConstTextInverse"}),{background:e.colors.BGInverse3,display:"flex",justifyContent:t,alignItems:"center"}]),"label:DivScheduleItemWarn;");function p(e){const t=(0,r.unix)(e).format("YYYY-M-D-H:mm"),[i,n,a,s]=t.split("-");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:" "},void 0),(0,o.jsx)("span",{children:i},void 0),(0,o.jsx)("span",{children:"-"},void 0),(0,o.jsx)("span",{children:n},void 0),(0,o.jsx)("span",{children:"-"},void 0),(0,o.jsx)("span",{children:a},void 0),(0,o.jsx)("span",{children:" "},void 0),(0,o.jsx)("span",{children:s},void 0)]},void 0)}const m=(0,s.memo)((function({height:e,fontSize:t,scheduledTime:i,iconSize:r,iconMargin:s,className:d,isTextAlignStart:c=!1}){const{direction:m}=(0,a.a)(),h=(0,l.Q)();return(0,o.jsxs)(u,Object.assign({justifyContent:c?"center":void 0,className:d,style:{fontSize:t,height:e,lineHeight:e}},{children:[(0,o.jsx)(n.Z,{width:r,height:r,style:{["ltr"===m?"marginRight":"marginLeft"]:s}},void 0),h("scheduled_for"),p(i)]}),void 0)}))},62321:(e,t,i)=>{i.d(t,{M:()=>s});var o=i(64047),n=i(73566),a=i(48185),r=i(19630);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setVideoInfo(e,t){var i;const{videoId:o,videoPercent:n,duration:a,currentTime:r}=t,s=Object.assign({},null!==(i=e[o])&&void 0!==i?i:{},{videoPercent:n,duration:a,currentTime:r});e[o]?Object.keys(s).forEach((t=>{e[o][t]=s[t]})):(Object.keys(e).forEach((t=>delete e[t])),e[o]=s)}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setVideoInfo",null),s=(0,o.__decorate)([(0,r.Y)("SeekBarModule")],s)},70643:(e,t,i)=>{i.d(t,{Z:()=>n,j:()=>a});var o=i(13033);const n=e=>{var t;return-1!==(null!==(t=o.F3.getItem("has_use_seek_bar"))&&void 0!==t?t:[]).indexOf(e)},a=e=>{var t;const i=null!==(t=o.F3.getItem("has_use_seek_bar"))&&void 0!==t?t:[];-1===i.indexOf(e)&&i.push(e),o.F3.setItem("has_use_seek_bar",i)}},56344:(e,t,i)=>{i.d(t,{p:()=>v});var o=i(11040),n=i(99122),a=i(89442),r=i(5625),s=i(70119),l=i(91051),d=i(95918),c=i(27918);const u=(0,d.Z)("div",{target:"e7o5pyu0"})({display:"flex",alignItems:"start",justifyContent:"center",padding:"8px",backgroundColor:"rgba(0, 0, 0, 0.6)"},"label:DivContainer;"),p=(0,d.Z)("div",{target:"e7o5pyu1"})({flex:"0 0 22px",width:22,padding:"4px 0",fontSize:"16px"},"label:DivIconContainer;"),m=(0,d.Z)(p,{target:"e7o5pyu2"})((({theme:{direction:e}})=>({textAlign:(0,c.$K)(e,"start")})),"label:StyledWarningIconContainer;"),h=(0,d.Z)(p,{target:"e7o5pyu3"})((({theme:{direction:e}})=>({textAlign:(0,c.$K)(e,"start")})),"label:StyledArrowIconContainer;"),g=(0,d.Z)("div",{target:"e7o5pyu4"})((({theme:e})=>[(0,c.GI)({theme:e,fontWeight:"semiBold",color:"ConstTextInverse"}),{flex:"0 1 auto",fontSize:"16px",lineHeight:"24px",wordBreak:"break-word",verticalAlign:"text-top",textAlign:(0,c.$K)(e.direction,"start")}]),"label:DivWarnInfoContent;"),v=(0,l.memo)((function({info:{text:e,url:t},needExtraBottom:i=!1}){const{direction:d,colors:{ConstTextInverse:c}}=(0,s.a)(),p=(0,l.useMemo)((()=>"ltr"===d?(0,o.jsx)(n.Z,{fill:c},void 0):(0,o.jsx)(a.Z,{fill:c},void 0)),[c,d]),v=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),t&&window.open(t,"_blank","noopener,noreferrer")}),[t]);return(0,o.jsxs)(u,Object.assign({onClick:v,style:{cursor:t?"pointer":"unset",paddingBottom:i?"44px":void 0}},{children:[(0,o.jsx)(m,{children:(0,o.jsx)(r.Z,{fill:c},void 0)},void 0),(0,o.jsx)(g,{children:e},void 0),t&&(0,o.jsx)(h,{children:p},void 0)]}),void 0)}))},91497:(e,t,i)=>{i.d(t,{Y:()=>a});var o=i(2734),n=i(34708);const a=()=>{const{$language:e}=(0,o.m7)((0,n.L)((()=>["$language"]),[]));return{isRTL:"ar"===e||"ur"===e||"he-IL"===e}}},48382:(e,t,i)=>{i.d(t,{wu:()=>a,AZ:()=>r,SD:()=>s,cl:()=>l,ky:()=>d,z5:()=>c,no:()=>u,qf:()=>p}),i(77094);var o=i(95918),n=i(27918);const a=(0,o.Z)("div",{target:"ehlq8k30"})({position:"relative",padding:"16px 0"},"label:DivContainer;"),r=(0,o.Z)("div",{target:"ehlq8k31"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivFlexCenterRow;"),s=(0,o.Z)(r,{target:"ehlq8k32"})({justifyContent:"space-between"},"label:StyledWrapper;"),l=(0,o.Z)("div",{target:"ehlq8k33"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P3",color:"TextSecondary"}),{display:"flex",flexDirection:"row",marginTop:"16px",boxSizing:"border-box",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px"}]),"label:DivCopyLinkContainer;"),d=(0,o.Z)("p",{target:"ehlq8k34"})(n.wj,(({theme:e})=>({flex:"1 1 auto",paddingTop:"7px",paddingBottom:"5px",backgroundColor:e.colors.BGInput})),(({theme:{direction:e}})=>(0,n.YJ)({direction:e,paddingStart:"12px",paddingEnd:"0"})),"label:PCopyLinkText;");d.defaultProps=Object.assign(Object.assign({},d.defaultProps),{"data-e2e":"browse-video-link"});const c=(0,o.Z)("button",{target:"ehlq8k36"})((({theme:e})=>[n.Ph,{color:e.colors.TextPrimary,fontWeight:e.fontWeights.bold,flex:"0 0 auto",cursor:"pointer",padding:"7px 18px",":hover":{backgroundColor:e.colors.BGView},":active":{backgroundColor:e.colors.BGInput}}]),"label:ButtonCopyLink;");c.defaultProps=Object.assign(Object.assign({},c.defaultProps),{"data-e2e":"browse-copy"});const u=(0,o.Z)("button",{target:"ehlq8k37"})([n.Ph,{position:"relative",display:"flex",width:"24px",height:"24px",justifyContent:"center",alignItems:"center",borderRadius:"50%",cursor:"pointer",":hover":{backgroundColor:"rgba(22, 24, 35, 0.1)"},":active":{backgroundColor:"rgba(22, 24, 35, 0.1)"}}],"label:ButtonShare;"),p=(0,o.Z)("div",{target:"ehlq8k38"})((({theme:e})=>[(0,n.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:448,overflow:"auto","::-webkit-scrollbar":{width:"6px"},"::-webkit-scrollbar-thumb":{borderRadius:"3px",background:"rgba(0, 0, 0, 0.15)"}}]),"label:DivShareWrapper;");p.defaultProps=Object.assign(Object.assign({},p.defaultProps),{"data-e2e":"feed-share-group"})},38993:(e,t,i)=>{i.d(t,{Q:()=>_});var o=i(11040),n=i(54251),a=i(9236),r=i(16926),s=i(91051),l=i(8721),d=i(52432),c=i(52053),u=i(81634),p=i(95918),m=i(27918);const h=(0,p.Z)("button",{target:"ef0ywbl0"})(m.Ph,(({theme:e})=>[(0,m.YJ)({direction:e.direction,end:"26px"}),(0,m.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary",typography:"P3"})]),{display:"flex",justifyContent:"center",alignItems:"center",height:"20px",cursor:"pointer",":hover":{textDecoration:"underline"}},"label:ButtonDelete;"),g=(0,p.Z)(u.Z,{target:"ef0ywbl1"})((({theme:{direction:e}})=>(0,m.YJ)({direction:e,marginEnd:6})),"label:StyledTrashBin;"),v=(0,p.Z)("p",{target:"ef0ywbl2"})((({theme:e})=>(0,m.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),y=(0,p.Z)("button",{target:"ef0ywbl3"})(m.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonConfirm;"),b=(0,p.Z)(y,{target:"ef0ywbl4"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),_=function({video:e}){const[t,i]=(0,s.useState)(!1),u=(0,l.Q)(),p=(0,a.qj)(c.O),m=(0,r.fz)(d.B),_=(0,s.useCallback)((()=>{i(!0),m.handleScheduleConfirm(e.id)}),[m,e.id]),f=(0,s.useCallback)((()=>{p.postScheduleDelete(e.id),i(!1)}),[p,e.id]),x=(0,s.useCallback)((()=>{i(!1),m.handleScheduleDelete("cancel")}),[m]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h,Object.assign({type:"button",onClick:_},{children:[(0,o.jsx)(g,{width:18.33,height:18.33},void 0),u("delete")]}),void 0),(0,o.jsxs)(n.AR,Object.assign({closeOnBackdropClick:!1,compact:!0,closeOnEsc:!1,isOpen:t,onClose:x},{children:[(0,o.jsx)(v,{children:u("delete_confirm")},void 0),(0,o.jsx)(y,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:f},{children:u("delete")}),void 0),(0,o.jsx)(b,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:x},{children:u("cancel_settings")}),void 0)]}),void 0)]},void 0)}},42568:(e,t,i)=>{i.d(t,{C:()=>xe});var o=i(11040),n=i(70119),a=i(16926),r=i(91051),s=i(8721),l=i(52432),d=i(84475),c=i(39973),u=i(54251),p=i(25615),m=i.n(p),h=i(25818),g=i(73694),v=i(30641),y=i(95918),b=i(27918);const _=(0,y.Z)("div",{target:"e1rwytmq0"})((({theme:e})=>[(0,b.GI)({theme:e,typography:"H6",fontFamily:"Proxima"}),{position:"relative",userSelect:"none"}]),"label:DivContainer;"),f=(0,y.Z)("div",{target:"e1rwytmq1"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px",borderRadius:"2px",border:`1px solid ${e.LineSecondary2}`,cursor:"pointer"})),"label:DivSelectionContainer;"),x=(0,y.Z)("p",{target:"e1rwytmq2"})(b.wj,{flex:"1 1 auto"},"label:PSelected;"),j=(0,y.Z)(g.Z,{target:"e1rwytmq3"})({width:24,height:24,flex:"0 0 24px"},"label:StyledChevronDown;"),C=(0,y.Z)("div",{target:"e1rwytmq4"})({position:"fixed",left:0,right:0,top:0,bottom:0},"label:DivSelectMask;"),k=(0,v.F4)({from:{opacity:"0",transform:"scale(0.6, 0.6)"},"70%":{opacity:"1",transform:"scale(1.01, 1.01)"},to:{opacity:"1",transform:"scale(1, 1)",animationTimingFunction:"cubic-bezier(0.215, 0.61, 0.355, 1)"}}),w=(0,y.Z)("ul",{target:"e1rwytmq5"})((({theme:{colors:e}})=>({position:"absolute",left:0,right:0,margin:0,padding:0,listStyle:"none",border:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,boxShadow:`0px 2px 8px ${e.ShadowPrimary}`,animation:`${k} 100ms normal`,transformOrigin:"center top",zIndex:1})),"label:UlOptionsContainer;"),S=(0,y.Z)("li",{target:"e1rwytmq6"})((({theme:{colors:e}})=>({cursor:"pointer",padding:"8px 12px",":hover":{background:e.BGView}})),"label:LiOptionsItem;"),P=(0,y.Z)("p",{target:"e1rwytmq7"})(b.wj,"label:POptionsTitle;"),I=(0,y.Z)("p",{target:"e1rwytmq8"})(b.wj,(({theme:e})=>(0,b.GI)({theme:e,typography:"P4",color:"TextTertiary"})),"label:POptionsDesc;");function T({value:e,options:t,e2eData:i,itemE2eData:n,onChange:a,placeholder:s}){var l,d;const[c,u]=(0,r.useState)(!1),p=t.find((({value:t})=>t===e)),m=(0,r.useCallback)((()=>{u(!0)}),[]),h=(0,r.useCallback)((()=>{u(!1)}),[]),g=(0,r.useCallback)((e=>()=>{null==a||a(e),h()}),[h,a]);return(0,o.jsxs)(_,{children:[(0,o.jsxs)(f,Object.assign({"data-e2e":i,onClick:m},{children:[(0,o.jsx)(x,{children:null!==(d=null!==(l=null==p?void 0:p.title)&&void 0!==l?l:null==p?void 0:p.value)&&void 0!==d?d:s},void 0),(0,o.jsx)(j,{width:24,height:24},void 0)]}),void 0),c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C,{onClick:h},void 0),(0,o.jsx)(w,{children:t.map((({value:e,key:t,title:i,desc:a})=>{const r=String(null!=i?i:e);return(0,o.jsxs)(S,Object.assign({"data-e2e":n,title:r,onClick:g(e)},{children:[(0,o.jsx)(P,{children:i},void 0),a&&(0,o.jsx)(I,{children:a},void 0)]}),null!=t?t:String(e))}))},void 0)]},void 0)]},void 0)}var O,D,M=i(33104),R=i(9236),L=i(65122),B=i(64047),F=i(73566),A=i(48185),Z=i(19630),E=i(60595),z=i(93859),$=i(56979),V=i(49584),U=i(20948),G=i(90035),W=i(47165),N=i(57244),q=i(481);!function(e){e.PrivateAccountPop="private_account_pop",e.PrivateAccountPopClick="private_account_pop_click",e.CookieBannerShow="cookie_banner_show",e.CookieBannerEnterPolicy="enter_cookie_policy",e.ChangeCookieSetting="change_cookie_setting",e.ClickCookiePolicy="click_cookie_policy",e.ClickCookieSettings="click_cookie_settings"}(O||(O={})),function(e){e.ClickBannerAccept="click_banner_accept",e.ClickBannerDecline="click_banner_decline",e.ClickPolicy="click_banner_cookie_policy",e.ClickSettings="click_banner_cookie_settings"}(D||(D={}));let H=class{constructor(){this.handlePrivateBannerShow=()=>{q.WB.event("private_account_pop")},this.handlePrivateBannerClick=e=>{q.WB.event("private_account_pop_click",{result:e})},this.handleCookieBannerShow=e=>{q.WB.event("cookie_banner_show",e)},this.handleClickCookieSettings=()=>{q.WB.event("click_cookie_settings",{enter_method:"click_banner_cookie_settings"})},this.handleClickCookiePolicy=()=>{q.WB.event("click_cookie_policy",{enter_method:"click_banner_cookie_policy"})},this.handleCookieBannerAccept=e=>{q.WB.event("change_cookie_setting",Object.assign({enter_method:"click_banner_accept"},e))},this.handleCookieBannerDeny=e=>{q.WB.event("change_cookie_setting",Object.assign({enter_method:"click_banner_decline"},e))}}};H=(0,B.__decorate)([(0,N.G)()],H);var Y=i(4206);let Q=class{constructor(e){this.fetch=e,this.postPrivateBannerAck=()=>this.fetch.post("/api/private_banner/ack/")}getVideoPrivateSetting(){return this.fetch.get("/api/compliance/settings/",{baseUrlType:2})}};var J,K;Q=(0,B.__decorate)([(0,N.G)(),(0,B.__metadata)("design:paramtypes",[Y.r])],Q),function(e){e[e.Show=0]="Show",e[e.CanNotModify=1]="CanNotModify",e[e.Hide=2]="Hide"}(J||(J={})),function(e){e[e.NoRestriction=0]="NoRestriction",e[e.Compliance=1]="Compliance",e[e.FamilyPairing=2]="FamilyPairing",e[e.PrivateAccount=3]="PrivateAccount"}(K||(K={}));let X=class extends F.D{constructor(e,t){super(),this.service=e,this.report=t,this.defaultState={isPrivateBannerShowing:!1,videoPrivateSetting:{duet:{show_type:0,res_type:0},stitch:{show_type:0,res_type:0}}}}setIsPrivateBannerShowing(e,t){e.isPrivateBannerShowing=t}handleShowPrivateBanner(e){return e.pipe((0,z.b)((e=>{e&&this.report.handlePrivateBannerShow()})),(0,$.U)((e=>this.getActions().setIsPrivateBannerShowing(e))))}handlePrivateBannerClose(e){return e.pipe((0,z.b)((()=>{this.report.handlePrivateBannerClick("ok")})),(0,V.z)((()=>this.service.postPrivateBannerAck())),(0,z.b)((e=>{(0,G.k)(e.statusCode,[0])})),(0,$.U)((e=>0===e.statusCode?this.getActions().setIsPrivateBannerShowing(!1):this.noop())),(0,W.n)({}))}setVideoPrivateSetting(e,t){e.videoPrivateSetting=t}getVideoPrivateSetting(e){return e.pipe((0,U.M)(this.state$),(0,V.z)((([e,t])=>this.service.getVideoPrivateSetting().pipe((0,$.U)((e=>{var i,o,n,a;const{private_settings:r}=e;return this.getActions().setVideoPrivateSetting({duet:{show_type:null!==(i=null==r?void 0:r.video_privacy.duet.show_type)&&void 0!==i?i:t.videoPrivateSetting.duet.show_type,res_type:null!==(o=null==r?void 0:r.video_privacy.duet.res_type)&&void 0!==o?o:t.videoPrivateSetting.duet.res_type},stitch:{show_type:null!==(n=null==r?void 0:r.video_privacy.stitch.show_type)&&void 0!==n?n:t.videoPrivateSetting.stitch.show_type,res_type:null!==(a=null==r?void 0:r.video_privacy.stitch.res_type)&&void 0!==a?a:t.videoPrivateSetting.stitch.res_type}})}))))),(0,W.n)({}))}};(0,B.__decorate)([(0,A.lF)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[Object,Boolean]),(0,B.__metadata)("design:returntype",void 0)],X.prototype,"setIsPrivateBannerShowing",null),(0,B.__decorate)([(0,A.Qm)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[E.y]),(0,B.__metadata)("design:returntype",void 0)],X.prototype,"handleShowPrivateBanner",null),(0,B.__decorate)([(0,A.Qm)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[E.y]),(0,B.__metadata)("design:returntype",void 0)],X.prototype,"handlePrivateBannerClose",null),(0,B.__decorate)([(0,A.lF)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[Object,Object]),(0,B.__metadata)("design:returntype",void 0)],X.prototype,"setVideoPrivateSetting",null),(0,B.__decorate)([(0,A.Qm)(),(0,B.__metadata)("design:type",Function),(0,B.__metadata)("design:paramtypes",[E.y]),(0,B.__metadata)("design:returntype",void 0)],X.prototype,"getVideoPrivateSetting",null),X=(0,B.__decorate)([(0,Z.Y)("Compliance"),(0,B.__metadata)("design:paramtypes",[Q,H])],X);var ee=i(52053);const te=(0,y.Z)("div",{target:"e1i2llgv1"})({padding:"32px",width:"332px"},"label:DivContentWrapper;"),ie=(0,y.Z)("h2",{target:"e1i2llgv2"})((({theme:e})=>(0,b.GI)({theme:e,typography:"H4"})),{marginTop:"4px",textAlign:"center"},"label:H2Title;"),oe=(0,y.Z)("p",{target:"e1i2llgv3"})((({theme:e})=>(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{marginTop:"24px",marginBottom:"8px"},"label:PDesc;"),ne=(0,y.Z)("div",{target:"e1i2llgv4"})({marginTop:"16px"},"label:DivSwitchGroupContainer;"),ae=(0,y.Z)("div",{target:"e1i2llgv5"})({display:"flex",flexDirection:"row",alignItems:"center",height:"40px"},"label:DivSwitchItemContainer;"),re=(0,y.Z)("span",{target:"e1i2llgv6"})((({theme:e,disabled:t})=>[(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:t?"TextQuaternary":"TextPrimary"}),(0,b.YJ)({direction:e.direction,marginEnd:"12px"}),{flex:"1 1 auto"}]),"label:SpanSwitchText;"),se=(0,y.Z)("p",{target:"e1i2llgv7"})((({theme:e})=>(0,b.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextQuaternary"})),{marginTop:"4px"},"label:PHint;"),le=(0,y.Z)("button",{target:"e1i2llgv8"})(b.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonSave;"),de=function(e){const{videoId:t,visible:i,onClose:n=m()}=e,a=(0,s.Q)(),l=function(e){return(0,R.mp)(L.AP,{selector:t=>t[e],dependencies:[e]})}(t),d=(0,M.p)(null==l?void 0:l.author),{handleChange:c,optionsList:p,visibilityValue:h}=function({item:e,author:t}){const i=(0,s.Q)(),o=(0,R.qj)(ee.O),{forFriend:n,secret:a,id:l="",adAuthorization:d}=null!=e?e:{},{privateAccount:c}=null!=t?t:{};return{visibilityValue:(0,r.useMemo)((()=>n?"3":a?"2":"1"),[n,a]),optionsList:(0,r.useMemo)((()=>d?[{title:i("who_can_view_public"),desc:i("public_desc"),value:"1"},{title:i("new_video_status"),desc:i("pull_video_expl_available_for_ads"),value:"2"}]:[{title:i(c?"who_can_view_followers":"who_can_view_public"),desc:i(c?"followers_desc_for_private":"public_desc"),value:"1"},{title:i("who_can_view_friends"),desc:i("followers_desc"),value:"3"},{title:i("video_label_private"),desc:i("private_desc"),value:"2"}]),[d,c,i]),handleChange:(0,r.useCallback)((e=>{o.postModifyVisibility({aweme_id:l,type:e})}),[o,l])}}({item:l,author:d}),{comment:g,duet:v,stitch:y,hintTextKey:b}=function({item:e}){const[{isEnableDuet:t,isEnableStitch:i,isShowSafetyHint:o},n]=(0,R.b7)(X,{selector:e=>({isEnableDuet:0===e.videoPrivateSetting.duet.show_type,isEnableStitch:0===e.videoPrivateSetting.stitch.show_type,isShowSafetyHint:1===e.videoPrivateSetting.duet.res_type||1===e.videoPrivateSetting.stitch.res_type}),dependencies:[]}),a=1===(null==e?void 0:e.duetDisplay)||1===(null==e?void 0:e.stitchDisplay),s=3!==(null==e?void 0:e.itemCommentStatus),l=Boolean(null==e?void 0:e.duetEnabled)&&!a,d=Boolean(null==e?void 0:e.stitchEnabled)&&!a,c=Number(null==e?void 0:e.video.duration)>=61,u=(0,R.qj)(ee.O),p=(0,r.useMemo)((()=>o?"setting_disabled_16":a?"duet_stitch_minor":c?"hint2":"hint1"),[c,o,a]);(0,r.useEffect)((()=>{n.getVideoPrivateSetting()}),[n]);const m=(0,r.useCallback)((t=>{var i;u.postUserSetting({field:"item_comment",aweme_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",private_setting:t?0:3})}),[null==e?void 0:e.id,u]),h=(0,r.useCallback)((t=>i=>{var o;u.postDuetOrStitchChange({aweme_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",type:t,enable:i?0:1})}),[null==e?void 0:e.id,u]);return{comment:{checked:s,onChange:m},duet:{checked:l,disabled:c||!t||a,onChange:h("item_duet")},stitch:{checked:d,disabled:c||!i||a,onChange:h("item_stitch")},hintTextKey:p}}({item:l,author:d});return(0,o.jsxs)(u.AR,Object.assign({e2eData:"video-setting-list",compact:!0,isOpen:i,onClose:n},{children:[(0,o.jsxs)(te,{children:[(0,o.jsx)(ie,{children:a("privacy_set")},void 0),(0,o.jsx)(oe,{children:a("view_access")},void 0),(0,o.jsx)(T,{e2eData:"video-setting-choose",itemE2eData:"video-watch-list",value:h,options:p,onChange:c},void 0),(0,o.jsxs)(ne,{children:[(0,o.jsx)(ce,Object.assign({e2eData:"video-setting-comment",text:a("allow_comment")},g),void 0),(0,o.jsx)(ce,Object.assign({e2eData:"video-setting-duet",text:a("allow_duet")},v),void 0),(0,o.jsx)(ce,Object.assign({e2eData:"video-setting-stitch",text:a("allow_stitch")},y),void 0)]},void 0),(0,o.jsx)(se,{children:a(b)},void 0)]},void 0),(0,o.jsx)(le,Object.assign({"data-e2e":"video-setting-down",onClick:e.onClose},{children:a("privacy_settings_done")}),void 0)]}),void 0)},ce=function(e){const{disabled:t,checked:i,text:n,e2eData:a}=e;return(0,o.jsxs)(ae,{children:[(0,o.jsx)(re,{children:n},void 0),(0,o.jsx)(h.r,{e2eData:a,checked:i,onChange:e.onChange,disabled:t},void 0)]},void 0)};var ue=i(32543);const pe=(0,y.Z)("div",{target:"e161jvwg0"})({position:"relative",flex:"0 0 24px",width:"24px",height:"24px"},"label:DivActionContainer;"),me=(0,y.Z)(ue.Z,{target:"e161jvwg1"})({width:24,height:24,cursor:"pointer"},"label:StyledEllipsisHorizontal;"),he=(0,y.Z)("ul",{target:"e161jvwg2"})((({theme:e})=>(0,b.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{listStyle:"none",margin:"0",padding:"8px 16px",whiteSpace:"nowrap",minWidth:"200px"},"label:UlPopupContainer;"),ge=(0,y.Z)("li",{target:"e161jvwg3"})((({theme:{colors:e}})=>({position:"relative",padding:"13px",":last-of-type::before":{content:'""',position:"absolute",left:0,top:0,width:"100%",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}})),"label:LiPopupItem;"),ve=(0,y.Z)("button",{target:"e161jvwg4"})(b.Ph,(({theme:{colors:e}})=>({cursor:"pointer",":hover":{color:e.Primary}})),"label:ButtonAction;"),ye=(0,y.Z)("p",{target:"e1qpteip0"})((({theme:e})=>(0,b.GI)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),be=(0,y.Z)("button",{target:"e1qpteip1"})(b.Ph,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer"})),"label:ButtonConfirm;"),_e=(0,y.Z)(be,{target:"e1qpteip2"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;"),fe=function(e){const{visible:t,onClose:i=m(),videoId:n}=e,d=(0,s.Q)(),c=(0,R.qj)(ee.O),p=(0,a.fz)(l.B),h=(0,r.useCallback)((()=>{c.postVideoDelete({aweme_id:n,target:n}),null==i||i()}),[c,i,n]),g=(0,r.useCallback)((()=>{p.handleVideoDelete("cancel"),null==i||i()}),[i,p]);return(0,o.jsxs)(u.AR,Object.assign({e2eData:"video-delete-modal",isOpen:t,compact:!0,onClose:i},{children:[(0,o.jsx)(ye,{children:d("delete_confirm")},void 0),(0,o.jsx)(be,Object.assign({"data-e2e":"video-modal-delete",type:"button",onClick:h},{children:d("delete")}),void 0),(0,o.jsx)(_e,Object.assign({"data-e2e":"video-modal-cancel",type:"button",onClick:g},{children:d("cancel_settings")}),void 0)]}),void 0)},xe=function({videoId:e}){const{direction:t}=(0,n.a)(),i="ltr"===t?"bottomRight":"bottomLeft",u=(0,s.Q)(),p=(0,a.fz)(l.B),{active:m,handleMouseEnter:h,handleMouseLeave:g}=(0,c.R)(),[v,y]=(0,r.useState)(!1),b=(0,r.useCallback)((()=>{y(!0)}),[]),_=(0,r.useCallback)((()=>{y(!1)}),[]),[f,x]=(0,r.useState)(!1),j=(0,r.useCallback)((()=>{x(!0),p.handleClickDeleteVideo({group_id:e})}),[p,e]),C=(0,r.useCallback)((()=>{x(!1)}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(pe,Object.assign({"data-e2e":"video-setting",onMouseEnter:h,onMouseLeave:g},{children:[(0,o.jsx)(me,{},void 0),(0,o.jsx)(d.G,Object.assign({placement:i,active:m,margin:-11,arrowMargin:10},{children:(0,o.jsxs)(he,{children:[(0,o.jsx)(ge,Object.assign({"data-e2e":"video-privacy-settings"},{children:(0,o.jsx)(ve,Object.assign({onClick:b,type:"button"},{children:u("privacy_set")}),void 0)}),void 0),(0,o.jsx)(ge,Object.assign({"data-e2e":"video-delete"},{children:(0,o.jsx)(ve,Object.assign({onClick:j,type:"button"},{children:u("delete")}),void 0)}),void 0)]},void 0)}),void 0)]}),void 0),(0,o.jsx)(de,{videoId:e,visible:v,onClose:_},void 0),(0,o.jsx)(fe,{visible:f,onClose:C,videoId:e},void 0)]},void 0)}},93583:(e,t,i)=>{i.d(t,{_:()=>Te});var o=i(11040),n=i(89567),a=i(47393),r=i(9236),s=i(16926),l=i(91051),d=i(35468),c=i(17936),u=i(8721),p=i(13964),m=i(80910),h=i(48710),g=i(34708);const v=(0,i(74752).ZP)({resolved:{},chunkName:()=>"editor",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(5932),i.e(1792),i.e(1189)]).then(i.bind(i,50786)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>50786});var y=i(45802),b=i(95918),_=i(27918);const f=(0,b.Z)("div",{target:"exl80ic0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",display:"flex",flexDirection:"column-reverse",backgroundColor:e.BGPrimary})),"label:DivEmojiSuggestionContainer;"),x=(0,b.Z)("ul",{target:"exl80ic1"})((({theme:{colors:e}})=>({listStyleType:"none",margin:0,padding:0,order:1,flex:"0 0 38px",borderTop:`1px solid ${e.LineSecondary}`,display:"flex",flexDirection:"row"})),"label:UlNavContainer;"),j=(0,b.Z)("div",{target:"exl80ic2"})((({theme:{colors:e}})=>({order:2,flex:"1 1 100%",overflowY:"scroll",scrollbarWidth:"none","::-webkit-scrollbar":{width:4},"::-webkit-scrollbar-track":{marginTop:8},"::-webkit-scrollbar-thumb":{borderRadius:2,backgroundColor:e.LineSecondary},":hover::-webkit-scrollbar-thumb":{backgroundColor:e.TextQuaternary}})),"label:DivPanelContainer;"),C=(0,b.Z)("ul",{target:"exl80ic3"})({listStyleType:"none",margin:0,padding:0,width:"100%",height:"100%",display:"flex",flexWrap:"wrap"},"label:UlPanelList;"),k=(0,b.Z)("li",{target:"exl80ic4"})((({theme:e,theme:{colors:t},isActive:i})=>[(0,_.GI)({theme:e,color:"ConstBGInverse",typography:"H4"}),{listStyleType:"none",flex:"0 0 auto",width:40,height:40,lineHeight:"46px",margin:"5px 6px",cursor:"pointer",textAlign:"center",backgroundColor:i?t.BGInput:t.BGPrimary,borderRadius:8,":hover":{backgroundColor:t.BGInput}}]),"label:LiItem;"),w=(0,l.memo)((function({emojis:e,onSelect:t}){const i=(0,l.useRef)(-1),n=(0,l.useCallback)((e=>{const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");i.current=e?Number(e):-1}}),[]),a=(0,l.useCallback)((o=>{(0,p.NS)(o);const n=i.current;-1!==n&&t(e[n].emoji)}),[e,t]);return(0,o.jsx)(C,Object.assign({onMouseOver:n,onClick:a},{children:e.map(((e,t)=>(0,o.jsx)(k,Object.assign({"data-index":t,isActive:!1},{children:e.emoji}),e.alias)))}),void 0)})),S=[{name:"basic",data:y.Z,iconIndex:11}],P=(0,l.memo)((function(e){const[t,i]=(0,l.useState)(0),n=(0,l.useCallback)((e=>{(0,p.NS)(e);const t=e.target;if("li"===t.nodeName.toLocaleLowerCase()){const e=t.getAttribute("data-index");i(e?Number(e):0)}}),[]);return(0,o.jsxs)(f,{children:[(0,o.jsx)(x,Object.assign({onClick:n},{children:S.map((({name:e,data:i,iconIndex:n},a)=>(0,o.jsx)(k,Object.assign({"data-index":a,isActive:a===t},{children:i[n].emoji}),e)))}),void 0),(0,o.jsx)(j,Object.assign({"data-e2e":"comment-emoji-group"},{children:(0,o.jsx)(w,{emojis:S[t].data,onSelect:e.onSelect},S[t].name)}),void 0)]},void 0)}));var I=i(67862),T=i(70119),O=i(88671),D=i(53304),M=i(64047),R=i(73566),L=i(48185),B=i(19630),F=i(82346),A=i(15608),Z=i(11348),E=i(60595),z=i(20948),$=i(49584),V=i(53095),U=i(10026),G=i(5549),W=i(35435),N=i(56979),q=i(68854),H=i(47165),Y=i(2734),Q=i(57244),J=i(4206);let K=class{constructor(e){this.fetch=e}fetchAtDefaultList(){return this.fetch.get("/api/at/default/list/",{query:{cursor:0,count:25}})}fetchRecentContactList(){return this.fetch.get("/api/mention/recent/contact/list/",{query:{mention_type:3}})}fetchSearchList(e,t){return this.fetch.get("/api/comment/search/sug/user/",{query:{keyword:e,count:30,mention_type:3,uid_filter_list:t}})}};K=(0,M.__decorate)([(0,Q.G)(),(0,M.__metadata)("design:paramtypes",[J.r])],K);let X=class extends R.D{constructor(e){super(),this.service=e,this.defaultState={keyword:"",loading:!1,isFetchError:!1,defaultResult:{list:[]},searchResult:{list:[],hasMore:!0,uidFilterList:""},activeList:[],activeItem:{index:null,isActivatedByMouse:!1},recentCount:0}}setKeyword(e,t){e.keyword=t}setLoading(e,t){e.loading=t}setFetchError(e,t){e.isFetchError=t,t&&(e.searchResult.hasMore=!1)}setActiveList(e,t){e.activeList=t}setActiveItem(e,t){const{index:i,isActivatedByMouse:o=!1}=t;e.activeItem.index=i,e.activeItem.isActivatedByMouse=o}activePrev(e){const{activeItem:t,activeList:i}=e,{index:o}=t;null!==o&&0!==i.length&&(e.activeItem.index=Math.max(0,o-1),e.activeItem.isActivatedByMouse=!1)}activeNext(e){const{activeItem:t,activeList:i}=e,{index:o}=t;if(null===o)return;const n=i.length;0!==n&&(e.activeItem.index=Math.min(o+1,n-1),e.activeItem.isActivatedByMouse=!1)}setDefaultList(e,t){e.defaultResult.list=t,e.activeList=t}setSearchResult(e,t){e.searchResult=t,0===t.list.length?e.activeList=e.defaultResult.list:e.activeList=t.list}setRecentCount(e,t){e.recentCount=t}fetchDefaultResult(e){return e.pipe((0,z.M)(this.state$),(0,$.z)((([e,t])=>t.defaultResult.list.length>0?(0,F.of)(this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword(""),this.getActions().setActiveList(t.defaultResult.list)):(0,A.D)([this.service.fetchRecentContactList(),this.service.fetchAtDefaultList()]).pipe((0,V.z)((([e,t])=>{const{statusCode:i,userList:o=[]}=e,{status_code:n,user_list:a=[],block_results:r=[]}=t;if(0===i||0===n){const e=a.map((e=>(0,Y.yk)(e))).map((e=>(r.some((t=>((e,t)=>{var i,o;if(e.uid===t.id)return t.blockResult=null===(o=null===(i=e.user_blocked_results)||void 0===i?void 0:i[0])||void 0===o?void 0:o.block_type,!0})(t,e))),e)));return(0,F.of)(this.getActions().setRecentCount(o.length),this.getActions().setDefaultList(function(e,t){let i=t;return e.forEach((e=>{i=i.filter((t=>e.id!==t.id))})),[...e,...i]}(o,e)))}return(0,F.of)(this.getActions().setFetchError(!0))})),(0,U.O)(this.getActions().setLoading(!0),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:null})),(0,G.l)(this.getActions().setLoading(!1),this.getActions().setActiveItem({index:-1}),this.getActions().setKeyword("")),(0,H.n)({})))))}fetchSearchResult(e){return e.pipe((0,z.M)(this.state$),(0,W.w)((([e,t])=>{const{keyword:i,searchResult:{uidFilterList:o,list:n,hasMore:a}}=t,r=e===i,s=r?o:"";return""===e||r&&!a?Z.E:this.service.fetchSearchList(e,s).pipe((0,N.U)((e=>{const{statusCode:t,userList:i=[],hasMore:o}=e;if(0===t||403===t||203===t){const e=r?[...n,...i]:i,t=encodeURIComponent(JSON.stringify(e.map((e=>e.id))));return this.getActions().setSearchResult({list:e,hasMore:1===o,uidFilterList:t})}return this.getActions().setFetchError(!0)})),(0,U.O)(this.getActions().setLoading(!r),this.getActions().setFetchError(!1),this.getActions().setActiveItem({index:r?t.activeItem.index:null})),(0,G.l)(this.getActions().setLoading(!1),this.getActions().setKeyword(e),this.getActions().setActiveItem({index:r?t.activeItem.index:-1})),(0,q.K)((()=>(0,F.of)(this.getActions().setLoading(!1),this.getActions().setFetchError(!0)))))})))}};(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,String]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setKeyword",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Boolean]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setLoading",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Boolean]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setFetchError",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Array]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setActiveList",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Object]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setActiveItem",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"activePrev",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"activeNext",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Array]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setDefaultList",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Object]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setSearchResult",null),(0,M.__decorate)([(0,L.lF)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[Object,Number]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"setRecentCount",null),(0,M.__decorate)([(0,L.Qm)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[E.y]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"fetchDefaultResult",null),(0,M.__decorate)([(0,L.Qm)(),(0,M.__metadata)("design:type",Function),(0,M.__metadata)("design:paramtypes",[E.y]),(0,M.__metadata)("design:returntype",void 0)],X.prototype,"fetchSearchResult",null),X=(0,M.__decorate)([(0,B.Y)("MentionSuggestionUserModule"),(0,M.__metadata)("design:paramtypes",[K])],X);var ee=i(43683),te=i(13761);const ie=(0,b.Z)("div",{target:"e16bf9xh0"})((({theme:{colors:e}})=>({width:"100%",height:"100%",overflowX:"hidden",overflowY:"scroll",backgroundColor:e.BGPrimary,scrollbarWidth:"none","::-webkit-scrollbar":{width:0}})),"label:DivContainer;"),oe=(0,b.Z)("div",{target:"e16bf9xh1"})({display:"flex",flexDirection:"column",alignItems:"center"},"label:DivNotItemContainer;"),ne=(0,b.Z)("p",{target:"e16bf9xh2"})((({theme:e})=>(0,_.GI)({theme:e,color:"TextTertiary",typography:"H6"})),{flex:"1 1 auto",margin:"18px auto"},"label:PLoadingText;"),ae=(0,b.Z)("p",{target:"e16bf9xh3"})((({theme:e})=>(0,_.GI)({theme:e,color:"TextTertiary",typography:"H5"})),{flex:"1 1 auto",marginTop:106},"label:PErrorText;"),re=(0,b.Z)("p",{target:"e16bf9xh4"})((({theme:e})=>(0,_.GI)({theme:e,color:"Primary",typography:"H6"})),{flex:"1 1 auto",margin:"11px auto",cursor:"pointer"},"label:PRetryText;"),se=(0,b.Z)("div",{target:"e16bf9xh5"})((({theme:{colors:e},isDisabled:t})=>({height:"100%",padding:"4px 0",margin:"0 16px",display:"flex",cursor:t?"default":"pointer",borderBottom:`1px solid ${e.LineSecondary}`})),"label:DivItemContainer;"),le=(0,b.Z)("div",{target:"e16bf9xh6"})((({theme:{colors:e},isActive:t,isDisabled:i})=>({height:48,backgroundColor:t?e.BGView:e.BGPrimary,opacity:i?.34:1})),"label:DivItemBackground;"),de=(0,b.Z)("div",{target:"e16bf9xh7"})([{flex:"1 1 auto",overflow:"hidden"},({theme:{direction:e}})=>(0,_.YJ)({direction:e,marginStart:8})],"label:DivInfoContainer;"),ce=(0,b.Z)("p",{target:"e16bf9xh8"})([{display:"flex",alignItems:"center"}],"label:PMentionInfoLine;"),ue=(0,b.Z)("span",{target:"e16bf9xh9"})((({theme:e})=>(0,_.GI)({theme:e,fontWeight:"semiBold",typography:"P3"})),_.wj,"label:SpanInfoNickname;"),pe=(0,b.Z)("span",{target:"e16bf9xh10"})((({theme:e})=>(0,_.GI)({theme:e,fontWeight:"normal",typography:"P4"})),_.wj,"label:SpanInfoUniqueId;"),me=(0,b.Z)("span",{target:"e16bf9xh11"})({margin:"0px 4px"},"label:SpanInfoDot;"),he=(0,b.Z)("span",{target:"e16bf9xh12"})({fontSize:"10px"},"label:SpanInfoVerify;"),ge=(0,b.Z)("span",{target:"e16bf9xh13"})((({theme:e})=>(0,_.GI)({theme:e,color:"TextTertiary",fontWeight:"semiBold",typography:"P4"})),{verticalAlign:"middle",flexShrink:0},"label:SpanInfoFollowing;"),ve=(0,l.memo)((function({isActive:e,index:t,user:i}){var n;const a=(0,u.Q)(),{$user:s}=null!==(n=(0,g.L)((()=>["$user"]),[]))&&void 0!==n?n:{},{nickname:d,uniqueId:c,verified:p,relation:m,avatarThumb:h,blockResult:v}=i,y=(0,l.useMemo)((()=>1===m||2===m),[m]),b=1===v||c===(null==s?void 0:s.uniqueId),{setActiveItem:_}=(0,r.qj)(X),f=(0,l.useCallback)((()=>{_({index:t,isActivatedByMouse:!0})}),[_,t]);return(0,o.jsx)(le,Object.assign({"data-e2e":"comment-at-list",isActive:e,isDisabled:b,onMouseEnter:f},{children:(0,o.jsxs)(se,Object.assign({isDisabled:b},{children:[(0,o.jsx)(te.q,{size:40,src:h,style:{flex:"0 0 40px"}},void 0),(0,o.jsxs)(de,{children:[(0,o.jsxs)(ce,{children:[(0,o.jsx)(ue,Object.assign({"data-e2e":"comment-at-nickname"},{children:d}),void 0),p&&(0,o.jsx)(he,{children:(0,o.jsx)(ee.Q,{},void 0)},void 0),y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(me,{children:"·"},void 0),(0,o.jsx)(ge,{children:a("Following")},void 0)]},void 0)]},void 0),(0,o.jsx)(ce,{children:(0,o.jsx)(pe,Object.assign({"data-e2e":"comment-at-uniqueid"},{children:c}),void 0)},void 0)]},void 0)]}),void 0)}),void 0)}));var ye=i(12820);const be=(0,l.memo)((function({keyword:e="",onSelect:t}){var i;const n=(0,u.Q)(),{colors:a}=(0,T.a)(),{$user:d}=null!==(i=(0,g.L)((()=>["$user"]),[]))&&void 0!==i?i:{},[{loading:c,isFetchError:h,activeList:v,activeItem:y,recentCount:b},{fetchDefaultResult:_,fetchSearchResult:f}]=(0,r.b7)(X),{index:x}=y,j=(0,l.useRef)(null),C=(0,l.useRef)([]),k=(0,s.fz)(m.y);(0,l.useEffect)((()=>{_()}),[_]),(0,l.useEffect)((()=>{""===e?_():f(e)}),[e,_,f]),(0,l.useEffect)((()=>{const{index:e,isActivatedByMouse:t}=y;t||function(e,t){if(null===t||-1===t||null===e.current)return;const i=48*t,o=48*(t+1),n=e.current.clientHeight,a=e.current.scrollTop;i<a?e.current.scrollTop=i:o>n+a&&(e.current.scrollTop=o-n)}(j,e)}),[y]);const w=(0,l.useCallback)((()=>""!==e&&f(e)),[f,e]);(0,D.s)({elemRef:j,onHitBottom:w,bottomThreshold:96});const S=(0,l.useCallback)((t=>{(0,p.NS)(t),""===e?_():f(e)}),[_,f,e]),P=(0,l.useCallback)((e=>{(0,p.NS)(e),null==t||t()}),[t]),I=(0,l.useCallback)((t=>{v.slice(t,t+5).forEach(((i,o)=>{if(C.current[t+o])return;const{blockResult:n,uniqueId:a,id:r,relation:s}=i,l=1===n||a===(null==d?void 0:d.uniqueId);let c="all_user";!e&&t+o<b?c="recent":1===s?c="following":2===s&&(c="friends"),k.handleMentionItemShow({to_user_id:r,user_type:c,search_keyword:e,is_valid:l?"0":"1"}),C.current[t+o]=!0}))}),[v,null==d?void 0:d.uniqueId,e,b,k]),M=(0,O.fB)((e=>{const{scrollTop:t}=e.target,i=Math.floor(t/48);I(i)}),[I],50);return(0,l.useEffect)((()=>{I(0)}),[I]),c?(0,o.jsx)(ie,{children:(0,o.jsxs)(oe,{children:[(0,o.jsx)(ye.$,{size:26,fill:a.TextTertiary,style:{marginTop:80,flex:"1 1 auto"}},void 0),(0,o.jsx)(ne,{children:n("comment_at_search")},void 0)]},void 0)},void 0):h?(0,o.jsx)(ie,{children:(0,o.jsxs)(oe,{children:[(0,o.jsx)(ae,{children:n("comment_at_load")},void 0),(0,o.jsx)(re,Object.assign({onClick:S},{children:n("comment_at_tryagain")}),void 0)]},void 0)},void 0):(0,o.jsx)(ie,Object.assign({ref:j,onClick:P,onScroll:M},{children:v.map(((e,t)=>(0,o.jsx)(ve,{user:e,index:t,isActive:x===t},e.id)))}),void 0)})),_e=(0,b.Z)("div",{target:"e1rzzhjk0"})({display:"flex",flexDirection:"row",alignItems:"flex-end"},"label:DivCommentContainer;"),fe=(0,b.Z)("div",{target:"e1rzzhjk1"})({flex:"1 1 auto"},"label:DivLayoutContainer;"),xe=(0,b.Z)("div",{target:"e1rzzhjk2"})((({theme:{colors:e},isFocus:t})=>({position:"relative",display:"flex",flexDirection:"row",alignItems:"flex-end",backgroundColor:e.BGInput,boxSizing:"border-box",border:"1px solid",borderColor:t?e.LinePrimary:"transparent",borderRadius:8,padding:"0 9px"})),"label:DivInputAreaContainer;");xe.defaultProps=Object.assign(Object.assign({},xe.defaultProps),{"data-e2e":"comment-input"});const je=(0,b.Z)("div",{target:"e1rzzhjk3"})({flex:"1 1 auto",height:"auto",margin:"10px 0"},(({theme:{direction:e}})=>(0,_.YJ)({direction:e,marginEnd:8})),"label:DivInputEditorContainer;");function Ce({theme:e,isActive:t=!1}){return[{flex:"0 0 32px",width:32,height:32,padding:5,margin:3,cursor:"pointer",backgroundColor:t?e.colors.ShadowPrimary:"transparent",borderRadius:8,":hover":{backgroundColor:e.colors.ShadowPrimary},svg:{width:"100%",height:"100%"}}]}je.defaultProps=Object.assign(Object.assign({},je.defaultProps),{"data-e2e":"comment-text"});const ke=(0,b.Z)("div",{target:"e1rzzhjk4"})(Ce,"label:DivMentionButton;");ke.defaultProps=Object.assign(Object.assign({},ke.defaultProps),{"data-e2e":"comment-at-icon"});const we=(0,b.Z)("div",{target:"e1rzzhjk5"})(Ce,"label:DivEmojiButton;");we.defaultProps=Object.assign(Object.assign({},we.defaultProps),{"data-e2e":"comment-emoji-icon"});const Se=(0,b.Z)("div",{target:"e1rzzhjk6"})((({theme:e,isActive:t})=>[(0,_.GI)({theme:e,color:t?"Primary":"TextQuaternary",typography:"H6"}),{cursor:t?"pointer":"default",flex:"0 0 48px",lineHeight:"39px",textAlign:(0,_.$K)(e.direction,"end")},(0,_.YJ)({direction:e.direction,marginEnd:4})]),"label:DivPostButton;");Se.defaultProps=Object.assign(Object.assign({},Se.defaultProps),{"data-e2e":"comment-post"});const Pe=(0,b.Z)("div",{target:"e1rzzhjk7"})((({display:e,theme:{colors:t,direction:i}})=>[{position:"absolute",width:280,height:256,top:-256,borderRadius:8,overflow:"hidden",backgroundColor:t.BGPrimary,boxShadow:`${t.ShadowPrimary} 0px 4px 16px 0px`,display:e?"block":"none"},(0,_.YJ)({direction:i,start:44})]),"label:DivMentionSuggestionContainer;"),Ie=(0,b.Z)("div",{target:"e1rzzhjk9"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",width:368,height:300,top:-300,borderRadius:8,overflow:"hidden",backgroundColor:e.BGPrimary,boxShadow:`${e.ShadowPrimary} 0px 4px 16px 0px`,outline:0,zIndex:1},(0,_.YJ)({direction:t,end:12})]),"label:DivEmojiPanelContainer;"),Te=(0,l.memo)((function({itemId:e,disable:t,teaParams:i,onBlur:y=(()=>{}),onFocus:b=(()=>{})}){var _;const{$user:f}=null!==(_=(0,g.L)((()=>["$user"]),[]))&&void 0!==_?_:{},[{activeItem:x,activeList:j},{activePrev:C,activeNext:k}]=(0,r.b7)(X,{selector:({activeItem:e,activeList:t})=>({activeItem:e,activeList:t}),dependencies:[]}),{index:w}=x,[S,{publishComment:T,setNeedResetKeyword:O}]=(0,r.b7)(I.p,{selector:e=>e.isInputEmpty,dependencies:[]}),[D,M]=(0,l.useState)(null),[R,L]=(0,l.useState)(!1),[B,F]=(0,l.useState)(!1),A=(0,l.useRef)(null),Z=(0,s.fz)(m.y),E=(0,u.Q)(),[z,$]=(0,l.useState)(!1);(0,l.useEffect)((()=>{$(!0)}),[]);const V=(0,l.useCallback)((e=>{var t;(0,p.NS)(e),null===(t=A.current)||void 0===t||t.handleInsertMentionTrigger(),Z.handleSearchAt(Object.assign({enter_method:"button"},i))}),[Z,i]),U=(0,l.useCallback)((e=>{"@"===e&&Z.handleSearchAt(Object.assign({enter_method:"input"},i))}),[Z,i]),G=(0,l.useCallback)((()=>{var e;if(null===D||null===w)return;const t=j[w];t&&(1!==t.blockResult?t.uniqueId!==(null==f?void 0:f.uniqueId)?(null===(e=A.current)||void 0===e||e.handleSelectUser(t),Z.handleSelectAt(Object.assign(Object.assign({},i),{to_user_id:t.id}))):d.h.open({content:E("no_at_me"),duration:3,widthType:"half"}):d.h.open({content:E("mention_privacy_toast_cant_mention"),duration:3,widthType:"half"}))}),[w,j,D,Z,E,i,f]),W=(0,l.useCallback)((e=>{var t,o,n;null===(t=A.current)||void 0===t||t.handleSelectEmoji(e),L(!1),Z.handleEmojiSelect(Object.assign({enter_method:"button",emoji_code:null===(n=e,o=[...n].map((e=>`${e.codePointAt(0)}`)))||void 0===o?void 0:o[0]},i))}),[Z,i]),N=(0,l.useCallback)((e=>{var t;(0,p.NS)(e),L(!R),M(null),null===(t=A.current)||void 0===t||t.focus()}),[R]),q=(0,l.useCallback)((t=>()=>{var o,n;if(!S){const a=null!==(n=null===(o=A.current)||void 0===o?void 0:o.getTextInfo())&&void 0!==n?n:{inputText:"",textExtra:[]};T(Object.assign(Object.assign({awemeId:e},a),{teaParams:Object.assign({enter_method:t},i)}))}}),[S,e,T,i]),H=(0,l.useCallback)((()=>{F(!0),b()}),[b]),Y=(0,l.useCallback)((()=>{F(!1),y(),Z.handleCloseText({group_id:null==i?void 0:i.group_id})}),[y,Z,i.group_id]),Q=(0,l.useCallback)((()=>{Z.handleEnterText({group_id:null==i?void 0:i.group_id})}),[Z,i.group_id]),J=(0,h.J)({upHandler:C,downHandler:k,confirmHandler:G});return(0,l.useEffect)((()=>{const e=()=>{R&&L(!1),O(!0)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[R,O]),(0,o.jsxs)(_e,{children:[(0,o.jsx)(fe,{children:(0,o.jsxs)(xe,Object.assign({isFocus:B,onKeyDown:J,onFocus:H,onBlur:Y,onClick:Q},{children:[(0,o.jsx)(je,{children:z?(0,o.jsx)(v,{ref:A,disable:t,onKeywordChange:M,onPost:q("input"),onInputTrigger:U},void 0):null},void 0),(0,o.jsx)(c.u,Object.assign({overlay:E("comment_tray_at")},{children:(0,o.jsx)(ke,Object.assign({onClick:V},{children:(0,o.jsx)(n.Z,{},void 0)}),void 0)}),void 0),(0,o.jsx)(c.u,Object.assign({overlay:E("comment_tray_emoji")},{children:(0,o.jsx)(we,Object.assign({isActive:R,onClick:N},{children:(0,o.jsx)(a.Z,{},void 0)}),void 0)}),void 0),null!==D&&!R&&(0,o.jsx)(Pe,Object.assign({"data-e2e":"comment-at-user",display:j.length>0},{children:(0,o.jsx)(be,{keyword:D,onSelect:G},void 0)}),void 0),R&&(0,o.jsx)(Ie,Object.assign({"data-e2e":"comment-emoji-list"},{children:(0,o.jsx)(P,{onSelect:W},void 0)}),void 0)]}),void 0)},void 0),(0,o.jsx)(Se,Object.assign({isActive:!S,onClick:q("button")},{children:E("comment_tray_btn")}),void 0)]},void 0)}))},67862:(e,t,i)=>{i.d(t,{p:()=>k});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(35167),l=i(82346),d=i(60595),c=i(20948),u=i(49584),p=i(93859),m=i(53095),h=i(35468),g=i(47165),v=i(21396),y=i(80910),b=i(19330),_=i(57244),f=i(30626),x=i(4206);let j=class{constructor(e){this.fetch=e}publishRequest(e){return this.fetch.post("/api/comment/publish/",{query:e,baseUrlType:8,headers:{[f.eD]:this.fetch.csrfToken}})}};j=(0,o.__decorate)([(0,_.G)(),(0,o.__metadata)("design:paramtypes",[x.r])],j);const C={nickname:"",replyId:void 0,replyToReplyId:void 0,position:-1};let k=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.comment=t,this.report=i,this.t=o,this.defaultState={reply:Object.assign({},C),mentionUserList:[],isInputEmpty:!0,needClearInput:!1,needResetKeyword:!1}}setReply(e,t){e.reply=null===t?Object.assign({},C):t}setMentionUserList(e,t){e.mentionUserList=null===t?[]:t}setIsInputEmpty(e,t){e.isInputEmpty=t}setNeedClearInput(e,t){e.needClearInput=t}setNeedResetKeyword(e,t){e.needResetKeyword=t}publishComment(e){return e.pipe((0,c.M)(this.state$),(0,u.z)((([e,t])=>{const{awemeId:i,inputText:o,textExtra:n,teaParams:a}=e,{reply:{replyId:r,replyToReplyId:s,nickname:d,position:c}}=t,u={aweme_id:i,text:o,reply_id:r,reply_to_reply_id:s,text_extra:JSON.stringify(n)};return this.service.publishRequest(u).pipe((0,p.b)((({status_code:e,comment:t})=>{if(0===e){const e=Boolean(d)?"0"===s?"reply":"reply_to_reply":"original",i=d?this.t("comment_reply_success"):this.t("comment_post_success");h.h.destroy(),h.h.open({content:i,duration:3}),this.report.handlePostComment(Object.assign({comment_category:e,comment_id:t.cid},a))}else 22===e?(h.h.destroy(),h.h.open({content:this.t("comment_banned_toast"),duration:3})):e?(h.h.destroy(),h.h.open({content:this.t("comment_post_failed"),duration:3})):(h.h.destroy(),h.h.open({content:this.t("comment_nointernet_toast"),duration:3}))})),(0,m.z)((({status_code:e,comment:t})=>0===e?d?(0,l.of)(this.getActions().setNeedClearInput(!0),this.comment.getActions().handleReplySuccess({comment:t,position:c})):(0,l.of)(this.getActions().setNeedClearInput(!0),this.comment.getActions().handlePostSuccess(t)):(0,l.of)(this.noop()))),(0,g.n)({}))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setReply",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setMentionUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setIsInputEmpty",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setNeedClearInput",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setNeedResetKeyword",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",d.y)],k.prototype,"publishComment",null),k=(0,o.__decorate)([(0,r.Y)("CommentInputModule"),(0,o.__param)(3,(0,s.t)(v.s)),(0,o.__metadata)("design:paramtypes",[j,b.x,y.y,Function])],k)},20417:(e,t,i)=>{i.d(t,{S:()=>v});var o=i(11040),n=i(54251),a=i(91051),r=i(21041),s=i(8721),l=i(95918),d=i(27918);const c=(0,l.Z)("div",{target:"e19twy0g0"})((({theme:{colors:e}})=>({position:"relative",width:310,height:218,boxSizing:"content-box",borderRadius:8,backgroundColor:e.BGPrimary,textAlign:"center"})),"label:DivLeaveModalContainer;"),u=(0,l.Z)("div",{target:"e19twy0g1"})((({theme:e})=>[(0,d.GI)({theme:e,color:"TextPrimary",typography:"H5"}),{position:"absolute",top:22,left:20,right:20}]),"label:DivTitle;"),p=(0,l.Z)("div",{target:"e19twy0g2"})((({theme:e})=>[(0,d.GI)({theme:e,color:"TextSecondary",typography:"H6"}),{position:"absolute",top:60,left:20,right:20}]),"label:DivSubTitle;"),m=(0,l.Z)("div",{target:"e19twy0g3"})({position:"absolute",top:118,left:20,right:20,height:100},"label:DivButtonContainer;"),h=(0,l.Z)("div",{target:"e19twy0g4"})((({theme:e})=>[(0,d.GI)({theme:e,color:"ConstTextInverse",typography:"H6"}),{height:48,lineHeight:"48px",borderRadius:2,backgroundColor:e.colors.Primary,cursor:"pointer"}]),"label:DivConfirmButton;"),g=(0,l.Z)("div",{target:"e19twy0g5"})((({theme:e})=>[(0,d.GI)({theme:e,color:"TextTertiary",typography:"H6"}),{height:48,lineHeight:"48px",cursor:"pointer",marginTop:2}]),"label:DivCancelButton;"),v=(0,a.memo)((function({needLeaveCheck:e,visible:t,onConfirmLeave:i,onCancelLeave:l}){const d=(0,s.Q)(),v=(0,r.k6)(),y=(0,a.useRef)(null),[b,_]=(0,a.useState)(!1),[f,x]=(0,a.useState)(!1),j=(0,a.useCallback)((()=>{_(!1),x(!0),i()}),[i]),C=(0,a.useCallback)((()=>{_(!1),y.current=null,l()}),[l]),k=(0,a.useCallback)((t=>!(!f&&e&&(_(!0),y.current=t,1))),[f,e]);return(0,a.useEffect)((()=>{const e=y.current;f&&e&&v.push(e)}),[f,v]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.NL,{when:e,message:k},void 0),(0,o.jsx)(n.AR,Object.assign({compact:!0,isOpen:t||b,closeOnBackdropClick:!1},{children:(0,o.jsxs)(c,{children:[(0,o.jsx)(u,{children:d("comment_tray_exit_title")},void 0),(0,o.jsx)(p,{children:d("comment_tray_exit_des")},void 0),(0,o.jsxs)(m,{children:[(0,o.jsx)(h,Object.assign({onClick:j},{children:d("comment_tray_exit_leave")}),void 0),(0,o.jsx)(g,Object.assign({onClick:C},{children:d("comment_tray_exit_stay")}),void 0)]},void 0)]},void 0)}),void 0)]},void 0)}))},15550:(e,t,i)=>{i.d(t,{r:()=>u});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(25855),l=i.n(s),d=i(40316),c=i.n(d);let u=class extends n.D{constructor(){super(...arguments),this.defaultState={}}setItem(e,t){e[t.cid]=t}setItemDiggState(e,t){e[t.cid]&&(e[t.cid].user_digged=t.digged)}setItemDiggCount(e,t){e[t.cid]&&(e[t.cid].digg_count=t.count)}removeItem(e,t){e[t]=void 0}multiSetCommentItem(e,t){t.forEach((t=>{e[t.cid]=l()({},e[t.cid],t)}))}multiRemoveCommentItem(e,t){return t.forEach((t=>{e[t]=void 0})),e}reduceOrIncreaseCommentCount(e,{cid:t,isReduce:i}){var o,n;if(!e[t])return;const a=Number(null!==(n=null===(o=e[t])||void 0===o?void 0:o.reply_comment_total)&&void 0!==n?n:0);e[t].reply_comment_total=i?a-1:a+1}getProcessedCommentItem(e,t={}){var i;const o=c()(e,"user","reply_comment");return o.user=null!==(i=e.user.unique_id)&&void 0!==i?i:"",!e.reply_comment||t.ignoreReply?[o]:[o,...e.reply_comment.reduce(((e,t)=>(this.getProcessedCommentItem(t).forEach((t=>{e.push(t)})),e)),[])]}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItemDiggState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"setItemDiggCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"removeItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"multiSetCommentItem",null),(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"multiRemoveCommentItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],u.prototype,"reduceOrIncreaseCommentCount",null),u=(0,o.__decorate)([(0,r.Y)("CommentItem")],u)},97446:(e,t,i)=>{i.d(t,{$:()=>qe});var o=i(11040),n=i(9236),a=i(91051),r=i(21041),s=i(2734),l=i(19330),d=i(30074),c=i(8721),u=i(90035),p=i(15550),m=i(16926),h=i(43683),g=i(35468),v=i(13761),y=i(66958),b=i(16454),_=i(88228),f=i(85404),x=i(80910),j=i(47127),C=i(39526),k=i(1160),w=i(84785),S=i(34708),P=i(76759),I=i(65122),T=i(67862),O=i(54251),D=i(18752),M=i(81634),R=i(70119),L=i(13964),B=i(84475),F=i(39973),A=i(16494),Z=i(56187),E=i(38128),z=i(95918),$=i(27918);const V=(0,z.Z)("div",{target:"ezxoskx0"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P4",color:"TextTertiary"})),{width:"20px",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},"label:DivLikeWrapper;"),U=(0,z.Z)(V,{target:"ezxoskx1"})((({theme:e})=>(0,$.YJ)({direction:e.direction,marginStart:"24px"})),{width:"unset",height:"20px",display:"inline-flex",flexDirection:"row",alignItems:"center",cursor:"pointer",verticalAlign:"bottom"},"label:StyledLikeWrapper;"),G=(0,z.Z)("span",{target:"ezxoskx2"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P4"})),(({theme:e})=>(0,$.YJ)({direction:e.direction,marginStart:"4px"})),"label:SpanCount;");G.defaultProps=Object.assign(Object.assign({},G.defaultProps),{"data-e2e":"comment-like-count"});const W=(0,a.memo)((function(e){const{count:t,liked:i}=e,{colors:n}=(0,R.a)(),a=i?(0,o.jsx)(Z.Z,{width:20,height:20,fill:n.Primary},void 0):(0,o.jsx)(E.Z,{width:20,height:20},void 0);return(0,o.jsxs)(V,Object.assign({onClick:e.onClick},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"comment-like-icon"},{children:a}),void 0),(0,o.jsx)(G,Object.assign({style:{marginLeft:0,marginRight:0}},{children:(0,s.BT)(t)}),void 0)]}),void 0)})),N=(0,a.memo)((function(e){const{count:t,liked:i}=e,{colors:n}=(0,R.a)(),a=i?(0,o.jsx)(Z.Z,{width:20,height:20,fill:n.Primary},void 0):(0,o.jsx)(E.Z,{width:20,fill:n.ConstBGInverse,height:20},void 0);return(0,o.jsxs)(U,Object.assign({onClick:e.onClick},{children:[a,(0,o.jsx)(G,Object.assign({style:{color:n.ConstBGInverse,fontSize:"14px"}},{children:(0,s.BT)(t)}),void 0)]}),void 0)}));var q=i(32543);const H=(0,z.Z)("div",{target:"esns4rh0"})((({theme:{direction:e}})=>[(0,$.YJ)({direction:e,marginStart:"18px",paddingEnd:"2px"}),{width:"24px",flex:"0 0 24px",paddingTop:"24px",display:"flex",flexDirection:"column",alignItems:"center"}]),"label:DivActionContainer;"),Y=(0,z.Z)("div",{target:"esns4rh1"})({position:"relative",display:"none"},"label:DivMoreContainer;"),Q=(0,z.Z)(q.Z,{target:"esns4rh2"})({width:"24px",height:"24px",cursor:"pointer",display:"block"},"label:StyledMoreIcon;");Q.defaultProps=Object.assign(Object.assign({},Q.defaultProps),{"data-e2e":"comment-more-icon"});const J=(0,z.Z)("div",{target:"esns4rh3"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{padding:"8px 16px",minWidth:"200px"},"label:DivPopupContainer;"),K=(0,z.Z)("p",{target:"esns4rh4"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"12px 0",whiteSpace:"nowrap",cursor:"pointer","&:not(:last-of-type)":{borderBottom:`1px solid ${e.LineSecondary}`},":hover":{color:e.Primary}})),"label:PActionItem;"),X=(0,z.Z)("span",{target:"esns4rh5"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e,marginStart:"12px"})),"label:SpanActionText;"),ee=(0,z.Z)("div",{target:"esns4rh6"})((({theme:e})=>(0,$.GI)({theme:e,typography:"H4",fontFamily:"Sofia",fontWeight:"bold"})),{padding:"28px 24px",textAlign:"center"},"label:DivModalContentContainer;"),te=(0,z.Z)("div",{target:"esns4rh7"})({display:"flex",flexDirection:"column"},"label:DivButtonContainer;"),ie=(0,z.Z)("button",{target:"esns4rh8"})($.Ph,(({primary:e,theme:t})=>[(0,$.GI)({theme:t,typography:"H6",color:e?"TextPrimary":"TextTertiary",fontWeight:e?"semiBold":"normal"}),{height:"48px",lineHeight:"48px",cursor:"pointer",":first-of-type":{"::before":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"},"::after":{content:'""',width:"100%",height:"1px",display:"block",background:t.colors.LineSecondary,transform:"scaleY(0,5)"}}}]),"label:ButtonAction;"),oe=function(e){const{itemId:t,cid:i,count:r,liked:s,onDelete:l,isShowReport:d,isShowDelete:u,inDetailPage:m=!1}=e,h=(0,c.Q)(),{direction:g}=(0,R.a)(),{active:v,handleMouseEnter:y,handleMouseLeave:b}=(0,F.R)(),_=function({itemId:e,cid:t,onShow:i}){var o;const a=(0,n.mp)(w.G,{selector:e=>e.lang,dependencies:[]}),r=(0,n.mp)(I.AP,{selector:t=>{var i,o;return null!==(o=null===(i=t[e])||void 0===i?void 0:i.author)&&void 0!==o?o:""},dependencies:[e]}),s=(0,n.mp)(p.r,{dependencies:[t],selector:e=>e[t]}),l=(0,n.mp)(P.z,{dependencies:[null==s?void 0:s.user],selector:e=>{var t,i;return null===(i=e.users[null!==(t=null==s?void 0:s.user)&&void 0!==t?t:""])||void 0===i?void 0:i.secUid}}),d=(0,n.mp)(I.AP,{selector:t=>t[e],dependencies:[e]}),c=(0,n.mp)(P.z,{selector:e=>{var t;return e.users[null!==(t=null==d?void 0:d.author)&&void 0!==t?t:""]},dependencies:[null==d?void 0:d.author]}),{handleShowReport:u}=(0,A.Q)({onShow:i,reportTarget:{lang:a,report_type:"comment",comment_with_emoji:/\[(\w+)\]/g.test(null!==(o=null==s?void 0:s.text)&&void 0!==o?o:"")?1:0,object_id:t,owner_id:null!=l?l:"",object_owner_id:null!=l?l:"",video_owner_id:r,video_id:e,video_owner:c}});return u}({itemId:t,cid:i,onShow:L.NS}),[f,x]=(0,a.useState)(!1),j=(0,a.useCallback)((()=>{x(!0)}),[]),C=(0,a.useCallback)((()=>{l(),x(!1)}),[l]),k=(0,a.useCallback)((()=>{x(!1)}),[]),S="ltr"===g?"bottomRight":"bottomLeft";return(0,o.jsxs)(H,{children:[(0,o.jsxs)(Y,Object.assign({onMouseEnter:y,onMouseLeave:b},{children:[(0,o.jsx)("div",Object.assign({"data-e2e":"comment-more-icon"},{children:(0,o.jsx)(Q,{},void 0)}),void 0),(0,o.jsx)(B.G,Object.assign({active:v,placement:S,margin:-6},{children:(0,o.jsxs)(J,{children:[d&&(0,o.jsxs)(K,Object.assign({onClick:_,"data-e2e":"comment-report"},{children:[(0,o.jsx)(D.Z,{width:24,height:24},void 0),(0,o.jsx)(X,{children:h("Report")},void 0)]}),void 0),u&&(0,o.jsxs)(K,Object.assign({"data-e2e":"comment-delete",onClick:j},{children:[(0,o.jsx)(M.Z,{width:24,height:24},void 0),(0,o.jsx)(X,{children:h("comment_delete_btn")},void 0)]}),void 0)]},void 0)}),void 0)]}),void 0),m?null:(0,o.jsx)(W,{count:r,liked:s,onClick:e.onLike},void 0),u&&(0,o.jsx)(O.AR,Object.assign({compact:!0,isOpen:f,closeOnEsc:!1,closeOnBackdropClick:!1},{children:(0,o.jsxs)("div",Object.assign({"data-e2e":"comment-delete-modal",style:{width:310}},{children:[(0,o.jsx)(ee,{children:h("comment_delete_des")},void 0),(0,o.jsxs)(te,{children:[(0,o.jsx)(ie,Object.assign({"data-e2e":"comment-modal-delete",primary:!0,onClick:C},{children:h("comment_delete_confirm")}),void 0),(0,o.jsx)(ie,Object.assign({"data-e2e":"comment-modal-cancel",onClick:k},{children:h("comment_delete_cancel")}),void 0)]},void 0)]}),void 0)}),void 0)]},void 0)};var ne=i(30641),ae=i(11838);const re={boxShadow:"0 2px 12px rgb(0 0 0 / 12%)",padding:"8px 16px",margin:"-8px -16px 8px",borderRadius:"8px"},se={boxShadow:"none",padding:"0",margin:"0 0 16px"},le=(0,ne.F4)({"0%":se,"10%":re,"90%":re,"100%":se}),de=(0,z.Z)("div",{target:"e1g2efjf0"})({display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:"16px",position:"relative",":hover":{[`${Y}`]:{display:"block"},[`${H}`]:{paddingTop:"0"}}},(({highlighted:e})=>e?{animationName:le,animationDuration:"3s"}:null),"label:DivCommentContentContainer;"),ce=(0,z.Z)("div",{target:"e1g2efjf1"})({flex:"1 1 auto"},"label:DivContentContainer;"),ue=(0,z.Z)("span",{target:"e1g2efjf2"})((({theme:{colors:e},isCreator:t})=>({fontSize:"16px",color:t?e.Primary:e.TextTertiary})),"label:SpanIdentity;"),pe=(0,z.Z)("span",{target:"e1g2efjf3"})("label:SpanUserNameText;"),me=(0,z.Z)(ae.D,{target:"e1g2efjf4"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P1",fontFamily:"Sofia",fontWeight:"bold"})),$.gi,{[`:hover ${pe}`]:{textDecoration:"underline"}},"label:StyledUserLinkName;"),he=(0,z.Z)(ae.D,{target:"e1g2efjf5"})((({theme:{direction:e}})=>[{":hover":{[`~ ${ce} ${me} ${pe}`]:{textDecoration:"underline"}}},(0,$.YJ)({direction:e,marginEnd:"12px"})]),"label:StyledUserLinkAvatar;"),ge=(0,z.Z)("p",{target:"e1g2efjf6"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P2"})),{whiteSpace:"pre-line",wordBreak:"break-word",marginBottom:"6px"},"label:PCommentText;"),ve=(0,z.Z)("p",{target:"e1g2efjf8"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P3",color:"TextTertiary"})),"label:PCommentSubContent;"),ye=(0,z.Z)("span",{target:"e1g2efjf9"})((({inDetailPage:e=!1,theme:{colors:t}})=>({cursor:"pointer",color:e?t.ConstBGInverse:t.TextTertiary})),(({theme:e,inDetailPage:t=!1})=>(0,$.GI)({theme:e,fontWeight:t?"semiBold":"normal"})),(({theme:{direction:e}})=>(0,$.YJ)({direction:e,marginStart:24})),"label:SpanReplyButton;"),be=(0,z.Z)(ae.D,{target:"e1g2efjf10"})((({theme:{colors:e}})=>({display:"inline-block",direction:"ltr",color:e.Primary,cursor:"pointer",":hover":{color:e.Primary},"&:-webkit-any-link":{color:e.Primary}})),"label:StyledUserLinkContent;");var _e=i(48036);const fe=(0,z.Z)(ge,{target:"exi6j8f0"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P3"})),"label:StyledPCommentTextForSwiper;"),xe=(0,a.memo)((e=>{const{isInVideoFeedRedesign:t}=(0,_e.y7)(),i=t?fe:ge;return(0,o.jsx)(i,Object.assign({},e),void 0)}));var je;!function(e){e[e.PlainText=0]="PlainText",e[e.User=1]="User"}(je||(je={}));const Ce=(0,a.memo)((function({commentItem:e,e2eTag:t,onLinkClick:i}){const{text:n,text_extra:r}=e,s=((0,c.Q)(),(0,a.useMemo)((()=>function(e,t){if(!t||0===t.length)return[{type:0,text:e}];const i=[];let o=0;return t.forEach((({start:t,end:n,sec_uid:a,user_id:r})=>{o!==t&&i.push({type:0,text:e.substring(o,t)}),i.push({type:1,text:e.substring(t,n),uid:r,secUid:a}),o=n})),i.push({type:0,text:e.substring(o,e.length)}),i}(n,r)),[n,r]));return(0,o.jsxs)(xe,Object.assign({"data-e2e":t},{children:["",s.map((({text:e,type:t,uid:n,secUid:a},r)=>0===t?(0,o.jsx)("span",{children:e},r):1===t?(0,o.jsx)(be,Object.assign({uniqueId:null!=a?a:"",secUid:a,isInBrowserMode:!0,onLinkClick:i,teaParams:{to_user_id:null!=n?n:"",enter_method:"comment"}},{children:e}),r):null))]}),void 0)}));var ke;!function(e){e[e.Level1=1]="Level1",e[e.Level2=2]="Level2"}(ke||(ke={}));const we={1:40,2:24};var Se;!function(e){e[e.Creator=1]="Creator",e[e.Following=2]="Following",e[e.Friends=8]="Friends"}(Se||(Se={}));const Pe={1:"creator",2:"following_acc",8:"friends_acc"},Ie={1:"comment-creator",2:"comment-following",8:"comment-friends"},Te=(0,a.memo)((function({parentCid:e,item:t,level:i,disableReply:s,index:d,subIndex:c,teaParams:O,onLinkClick:D,inDetailPage:M=!1}){var R;const{t:L,timeTranslator:B}=(0,f.e)(),F=(0,n.mp)(p.r,{selector:e=>e[t.cid],dependencies:[t.cid]}),A=(0,n.mp)(P.z,{selector:e=>{var t;return e.users[null!==(t=null==F?void 0:F.user)&&void 0!==t?t:""]},dependencies:[null==F?void 0:F.user]}),{loginUserId:Z,loginUserUid:E}=(0,n.mp)(w.G,{selector:e=>{var t,i,o,n;return{loginUserId:null===(i=null===(t=e.appContext)||void 0===t?void 0:t.$user)||void 0===i?void 0:i.uniqueId,loginUserUid:null===(n=null===(o=e.appContext)||void 0===o?void 0:o.$user)||void 0===n?void 0:n.uid}},dependencies:[]}),{videoAuthorId:z,teaAuthorId:$,videoAuthorSecId:V}=(0,n.mp)(I.AP,{selector:e=>{var t,i,o,n,a,r,s;return{videoAuthorId:null===(i=e[null!==(t=null==F?void 0:F.aweme_id)&&void 0!==t?t:""])||void 0===i?void 0:i.author,teaAuthorId:null!==(a=null===(n=e[null!==(o=null==F?void 0:F.aweme_id)&&void 0!==o?o:""])||void 0===n?void 0:n.authorId)&&void 0!==a?a:"",videoAuthorSecId:null===(s=e[null!==(r=null==F?void 0:F.aweme_id)&&void 0!==r?r:""])||void 0===s?void 0:s.authorSecId}},dependencies:[]}),U=(0,n.qj)(l.x),G=(0,m.fz)(x.y),{setReply:W}=(0,n.qj)(T.p),{showing:q,handleCardEnter:H,handleCardLeave:Y,handleItemEnter:Q,handleItemLeave:J}=(0,k.V)(),K=(0,a.useMemo)((()=>we[i]),[i]),X=(0,a.useCallback)((()=>{if(!F)return;const{aweme_id:e,cid:t}=F;U.handleCommentLike({itemId:e,cid:t,teaAuthorId:$})}),[U,F,$]),ee=(0,j.X)({action:X,modalConfig:{query:{enter_method:"click_like_comment"}}}),{$region:te=""}=null!==(R=(0,S.L)((()=>["$region"]),[]))&&void 0!==R?R:{},ie=(0,a.useCallback)((()=>{if(!F)return;const{aweme_id:t,cid:i}=F;U.handleCommentDelete({itemId:t,cid:i,parentCid:e,index:d,subIndex:c})}),[U,F,d,c,e]),ne=(0,a.useCallback)((()=>{const{nickname:e=""}=null!=A?A:{},{cid:t="",reply_id:o=""}=null!=F?F:{};W({nickname:e,replyId:1===i?t:o,replyToReplyId:1===i?"0":t,position:d})}),[A,F,W,i,d]),ae=(0,j.X)({action:ne,modalConfig:{query:{enter_method:"click_reply_comment"}}}),re=(0,a.useCallback)((e=>{const t=b.S.includes(te);if(!E||!t||!F)return;const{cid:i,aweme_id:o,text:n}=F;e.stopPropagation();const a=(0,y.fH)({uniqueId:null!=z?z:"",secUid:null!=V?V:"",videoId:o}),r=(0,_.n)(i);if(!r)return;const s=`${window.location.host}${a}?cid=${r}`,l=document.createElement("input");l.style.fontSize="16px",document.body.appendChild(l),l.value=s,l.select(),l.setSelectionRange(0,s.length),document.execCommand&&document.execCommand("copy"),l.remove(),g.h.open({content:L("WebApp_comment_copyurl_id"),duration:1,style:{width:"560px"}}),G.handleCopyCommentUrl({copy:i,comment:n,group_id:o,user_id:E})}),[te,E,z,V,F,G,L]),se=(0,a.useMemo)((()=>{var e;return Object.assign(Object.assign({},O),{to_user_id:null!==(e=null==A?void 0:A.id)&&void 0!==e?e:"",enter_method:"comment"})}),[null==A?void 0:A.id,O]),{state:le}=(0,r.TH)(),ge=(null==le?void 0:le.cid)===t.cid;if(!F||!A)return(0,u.G)(["commentItem","user"]);const{avatarThumb:be,nickname:_e,verified:fe,uniqueId:xe,secUid:je}=A,{label_type:ke,create_time:Se,aweme_id:Te,cid:Oe,digg_count:De,user_digged:Me}=F,Re=B(1e3*Number(Se)),Le=Boolean(Z)&&z===Z,Be=Boolean(Z)&&xe===Z,Fe=!Be,Ae=Le||Be;return(0,o.jsxs)(de,Object.assign({id:t.cid,highlighted:ge},{children:[(0,o.jsx)(he,Object.assign({style:{flex:`0 0 ${K}px`},uniqueId:xe,secUid:je,onMouseEnter:Q,onMouseLeave:J,isInBrowserMode:!0,teaParams:se,"data-e2e":`comment-avatar-${i}`,onLinkClick:D},{children:(0,o.jsx)(v.q,{size:K,src:be},void 0)}),void 0),(0,o.jsxs)(ce,{children:[(0,o.jsxs)(me,Object.assign({uniqueId:xe,secUid:je,onMouseEnter:Q,onMouseLeave:J,isInBrowserMode:!0,teaParams:se,onLinkClick:D},{children:[(0,o.jsxs)(pe,Object.assign({"data-e2e":`comment-username-${i}`},{children:[_e," ",fe&&(0,o.jsx)(h.Q,{"data-e2e":`comment-bluev-${i}`},void 0)]}),void 0),!!ke&&Boolean(Pe[ke])&&(0,o.jsxs)(o.Fragment,{children:["·"," ",(0,o.jsx)(ue,Object.assign({isCreator:1===ke,"data-e2e":`${Ie[ke]}-${i}`},{children:L(Pe[ke])}),void 0)]},void 0)]}),void 0),(0,o.jsx)(Ce,{onLinkClick:D,commentItem:F,e2eTag:`comment-level-${i}`},void 0),(0,o.jsxs)(ve,{children:[(0,o.jsx)("span",Object.assign({"data-e2e":`comment-time-${i}`,onClick:re},{children:Re}),void 0),M?(0,o.jsx)(N,{count:De,liked:Boolean(Me),onClick:ee},void 0):null,!s&&(0,o.jsx)(ye,Object.assign({inDetailPage:M,onClick:ae,"data-e2e":`comment-reply-${i}`},{children:L("comment_reply_btn")}),void 0)]},void 0)]},void 0),(0,o.jsx)(oe,{itemId:Te,cid:Oe,inDetailPage:M,count:De,liked:Boolean(Me),onLike:ee,onDelete:ie,isShowDelete:Ae,isShowReport:Fe},void 0),q&&(0,o.jsx)(C.C,{uniqueId:xe,onMouseEnter:H,onMouseLeave:Y},void 0)]}),void 0)}));var Oe=i(19761);const De=(0,z.Z)("div",{target:"eo72wou0"})({marginBottom:"16px"},"label:DivCommentItemContainer;"),Me=(0,z.Z)("div",{target:"eo72wou1"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e,paddingStart:52})),"label:DivReplyContainer;"),Re=(0,z.Z)("div",{target:"eo72wou2"})({display:"flex",flexDirection:"row",justifyContent:"space-between",position:"relative"},(({isUnfold:e,hasMore:t,theme:{direction:i,colors:o}})=>e?[t?(0,$.YJ)({direction:i,paddingStart:"52px"}):null,{"::before":Object.assign({content:'""',position:"absolute",top:"50%",width:"36px",height:"1px",background:o.LineSecondary,transform:"scaleY(0.5)"},(0,$.YJ)({direction:i,start:"0"}))}]:null),"label:DivReplyActionContainer;"),Le=(0,z.Z)(Oe.Z,{target:"eo72wou3"})((({reversed:e,theme:{direction:t}})=>[(0,$.YJ)({direction:t,marginStart:"6px"}),{width:"14px",height:"14px",verticalAlign:"middle",transform:e?"rotate(180deg)":"none"}]),"label:StyledChevronDownFill;"),Be=(0,z.Z)("p",{target:"eo72wou4"})((({theme:e})=>(0,$.GI)({theme:e,color:"TextTertiary",typography:"P3",fontWeight:"semiBold"})),{cursor:"pointer",":hover":{textDecoration:"underline"}},"label:PReplyActionText;"),Fe=(0,a.memo)((function({item:e,disableReply:t,index:i,onHideReply:r,teaParams:s,onLinkClick:m,inDetailPage:h=!1}){var g,v;const y=(0,c.Q)(),b=(0,n.qj)(l.x),_=(0,n.mp)(p.r,{selector:t=>t[e.cid],dependencies:[e.cid]}),f=(0,a.useCallback)((()=>{_&&b.handleShowMoreReply({itemId:_.aweme_id,cid:_.cid})}),[b,_]),x=(0,a.useRef)(null),j=(0,a.useCallback)((()=>{var e,t;_&&(null==r||r(null!==(t=null===(e=x.current)||void 0===e?void 0:e.scrollHeight)&&void 0!==t?t:0),b.handleCollapseReply({itemId:_.aweme_id,cid:_.cid}))}),[b,_,r]),C=(0,a.useMemo)((()=>{var t,i,n,a,r,s;if(!_)return null;if(null===(t=e.replyCache)||void 0===t?void 0:t.loading)return(0,o.jsx)(Re,{children:(0,o.jsx)(d.g,{center:!0,size:"small"},void 0)},void 0);const l=null!==(n=null===(i=e.reply_comment)||void 0===i?void 0:i.length)&&void 0!==n?n:0,c=Number(null!==(a=_.reply_comment_total)&&void 0!==a?a:0)-l;if(!c)return null;if(!e.replyCache||!(null===(r=e.reply_comment)||void 0===r?void 0:r.length))return(0,o.jsx)(Re,{children:(0,o.jsxs)(Be,Object.assign({onClick:f,"data-e2e":"view-more-1"},{children:[y("view_more_replies",{num:c}),(0,o.jsx)(Le,{},void 0)]}),void 0)},void 0);const u=e.replyCache.hasMore||e.replyCache.comments.length>e.reply_comment.length;return Number(null===(s=e.reply_comment)||void 0===s?void 0:s.length)>0?(0,o.jsxs)(Re,Object.assign({isUnfold:!0,hasMore:u},{children:[(0,o.jsx)(Be,Object.assign({onClick:f,"data-e2e":"view-more-2"},{children:Boolean(u)&&(0,o.jsxs)(o.Fragment,{children:[y("view_more_comm"),(0,o.jsx)(Le,{},void 0)]},void 0)}),void 0),(0,o.jsxs)(Be,Object.assign({onClick:j,"data-e2e":"comment-hide"},{children:[y("hide"),(0,o.jsx)(Le,{reversed:!0},void 0)]}),void 0)]}),void 0):null}),[j,f,_,e.replyCache,null===(g=e.reply_comment)||void 0===g?void 0:g.length,y]);return _?(0,o.jsxs)(De,{children:[(0,o.jsx)(Te,{inDetailPage:h,item:e,disableReply:t,index:i,level:1,teaParams:s,onLinkClick:m},void 0),Boolean(_.reply_comment_total)&&(0,o.jsxs)(Me,Object.assign({ref:x},{children:[null===(v=e.reply_comment)||void 0===v?void 0:v.map(((n,a)=>(0,o.jsx)(Te,{parentCid:e.cid,item:n,disableReply:t,index:i,subIndex:a,level:2,teaParams:s,onLinkClick:m,inDetailPage:h},n.cid))),C]}),void 0)]},void 0):(0,u.G)(["item"])})),Ae=(0,ne.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),Ze=(0,z.Z)("div",{target:"eht1nyc0"})({width:"100%",marginTop:"16px",display:"flex",flexDirection:"column"},"label:DivCommentItemSkeletonContainer;"),Ee=(0,z.Z)("div",{target:"eht1nyc1"})({width:"100%",marginBottom:"24px",display:"flex",alignItems:"flex-start"},"label:DivCommentItemSkeleton;"),ze=(0,z.Z)("div",{target:"eht1nyc2"})((({theme:e})=>({width:"40px",height:"40px",borderRadius:"100px",backgroundColor:e.colors.BGPlaceholderDefault,flexShrink:0,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${Ae} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonAvatar;"),$e=(0,z.Z)("div",{target:"eht1nyc3"})({width:"100%",display:"flex",flexDirection:"column"},(({theme:{direction:e}})=>(0,$.YJ)({direction:e,marginStart:"20px"})),"label:DivCommentItemSkeletonInfo;"),Ve=(0,z.Z)("div",{target:"eht1nyc4"})((({width:e="100%",height:t="24px",marginTop:i="0px",theme:o})=>({width:e,height:t,marginTop:i,backgroundColor:o.colors.BGPlaceholderDefault,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${Ae} cubic-bezier(0, 0, 1, 1) 1.5s infinite`})),"label:DivCommentItemSkeletonLine;"),Ue=(0,a.memo)((function({num:e=3}){const t=[];for(let i=0;i<e;i++)t.push(i);return(0,o.jsx)(Ze,{children:t.map((e=>(0,o.jsxs)(Ee,{children:[(0,o.jsx)(ze,{},void 0),(0,o.jsxs)($e,{children:[(0,o.jsx)(Ve,{width:"160px"},void 0),(0,o.jsx)(Ve,{height:"20px",marginTop:"4px"},void 0),(0,o.jsx)(Ve,{height:"12px",marginTop:"8px",width:"96px"},void 0)]},void 0)]},e)))},void 0)})),Ge=(0,z.Z)("div",{target:"ekjxngi0"})((({theme:e,empty:t=!1,inDetailPage:i=!1})=>({paddingTop:t?"":"16px",width:"100%",padding:i?"none":t?"0 32px":"24px 32px",boxSizing:"border-box",backgroundColor:i?"":e.colors.BGCreation3,borderTop:i||t?"none":"1px solid rgba(18, 18, 18, 0.12)",borderBottom:i?"none":"1px solid rgba(18, 18, 18, 0.12)",overflowY:"auto",overflowX:"hidden",flexGrow:1})),"label:DivCommentListContainer;"),We=(0,z.Z)(Ge,{target:"e1u1vkmc0"})({borderTop:"none",padding:"16px",margin:0,background:"#f8f8f8",border:"none"},"label:StyledDivCommentListContainerForSwiper;"),Ne=(0,a.memo)((0,a.forwardRef)(((e,t)=>{const{isInVideoFeedRedesign:i}=(0,_e.y7)(),n=i?We:Ge;return(0,o.jsx)(n,Object.assign({},e,{ref:t}),void 0)}))),qe=(0,a.memo)((0,a.forwardRef)((function({itemId:e,disableReply:t,teaParams:i,onLinkClick:d,inDetailPage:c=!1,hasMore:u=!0},p){var m,h;const[g,v]=(0,n.b7)(l.x),y=(0,r.TH)();(0,a.useEffect)((()=>{const{browserMode:t,vid:i,cid:o}=(0,s.m7)(y.state),n=i===e&&t?o:void 0;e!==g.awemeId&&e&&v.switchVideo({currId:e,insertCid:n})}),[v,g.awemeId,e,y.state]);const b=(0,a.useMemo)((()=>{var e;if(!g||!(null===(e=g.comments)||void 0===e?void 0:e.length)&&g.loading&&u)return(0,o.jsx)(Ue,{num:9},void 0);const n=[];return g.comments.forEach(((e,a)=>{var r;const s=(0,o.jsx)(Fe,{item:e,disableReply:t,index:a,teaParams:i,onLinkClick:d,inDetailPage:c},e.cid);(null===(r=y.state)||void 0===r?void 0:r.cid)===e.cid?n.unshift(s):n.push(s)})),(0,o.jsxs)(o.Fragment,{children:[n,g.loading&&(0,o.jsx)(Ue,{num:1},void 0)]},void 0)}),[t,d,g,i,null===(m=y.state)||void 0===m?void 0:m.cid,c,u]);return(0,o.jsx)(Ne,Object.assign({inDetailPage:c,ref:p,empty:0===(null===(h=null==g?void 0:g.comments)||void 0===h?void 0:h.length)},{children:b}),void 0)})))},19330:(e,t,i)=>{i.d(t,{x:()=>F});var o=i(64047),n=i(73566),a=i(48185),r=i(19630),s=i(35167),l=i(80390),d=i.n(l),c=i(82346),u=i(11348),p=i(60595),m=i(53095),h=i(20948),g=i(56979),v=i(93859),y=i(49584),b=i(10026),_=i(5549),f=i(12167),x=i(35468),j=i(90035),C=i(47165),k=i(21396),w=i(2734),S=i(80910),P=i(84785),I=i(76759),T=i(65122),O=i(15550),D=i(57244),M=i(30626),R=i(4206);let L=class{constructor(e){this.fetch=e}getCommentList(e){return this.fetch.get("/api/comment/list/",{query:Object.assign(Object.assign({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1}),baseUrlType:2})}getCommentReply(e){return this.fetch.get("/api/comment/list/reply/",{query:Object.assign(Object.assign({},e),{count:3,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1}),baseUrlType:2})}postCommentLike(e){return this.fetch.post("/api/comment/digg/",{query:Object.assign(Object.assign({},e),{aid:1988,channel_id:0}),headers:{[M.eD]:this.fetch.csrfToken},baseUrlType:2})}postCommentDelete(e){return this.fetch.post("/api/comment/delete/",{query:e,baseUrlType:2,headers:{[M.eD]:this.fetch.csrfToken}})}};var B;L=(0,o.__decorate)([(0,D.G)(),(0,o.__metadata)("design:paramtypes",[R.r])],L),function(e){e[e.Like=1]="Like",e[e.Unlike=2]="Unlike"}(B||(B={}));let F=class extends n.D{constructor(e,t,i,o,n,a,r){super(),this.report=e,this.service=t,this.commentItem=i,this.item=o,this.user=n,this.t=a,this.home=r,this.defaultState={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}}setCommentItem(e,t){return t?e=Object.assign(Object.assign({},e),t):e}setReplyLoading(e,t){var i,o,n;const a=e.comments.find((({cid:e})=>e===t.cid));if(!a)return e;a.replyCache?a.replyCache.loading=t.loading:a.replyCache={comments:null!==(i=a.reply_comment)&&void 0!==i?i:[],cursor:null!==(n=null===(o=a.reply_comment)||void 0===o?void 0:o.length)&&void 0!==n?n:"0",hasMore:!0,loading:t.loading}}setReplyComment(e,t){const i=this.getCommentItem(e,t.cid);if(!i)return e;i.reply_comment=t.comments}setReplyCommentCache(e,t){const i=this.getCommentItem(e,t.cid);if(!i)return e;i.replyCache?(i.replyCache.comments=t.comments,i.replyCache.hasMore=t.hasMore,i.replyCache.cursor=t.cursor):i.replyCache={comments:t.comments,cursor:t.cursor,hasMore:t.hasMore,loading:!1}}deleteCommentFromList(e,t){var i,o;const{index:n,subIndex:a}=t;void 0===a?e.comments.splice(n,1):(null===(i=e.comments[n].reply_comment)||void 0===i||i.splice(a,1),null===(o=e.comments[n].replyCache)||void 0===o||o.comments.splice(a,1))}addCommentToFirst(e,t){e.comments.unshift({cid:t.cid,reply_comment:[],replyCache:null})}addReplyToFirst(e,{comment:t,position:i}){var o,n;const a=e.comments[i];a&&(a.reply_comment=null!==(o=a.reply_comment)&&void 0!==o?o:[],a.reply_comment.unshift({cid:t.cid,reply_comment:null,replyCache:null}),null===(n=a.replyCache)||void 0===n||n.comments.unshift({cid:t.cid,reply_comment:null,replyCache:null}))}handlePostSuccess(e){return e.pipe((0,m.z)((e=>{const{users:t,commentItems:i}=this.processCommentList([e]);return(0,c.of)(this.getActions().addCommentToFirst(e),this.user.getActions().multiSetUser(t),this.commentItem.getActions().multiSetCommentItem(i),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}handleReplySuccess(e){return e.pipe((0,m.z)((({comment:e,position:t})=>{const{users:i,commentItems:o}=this.processCommentList([e],{ignoreReply:!0});return(0,c.of)(this.getActions().addReplyToFirst({comment:e,position:t}),this.user.getActions().multiSetUser(i),this.commentItem.getActions().multiSetCommentItem(o),this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:e.reply_id}),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}fetchComment(e){return e.pipe((0,h.M)(this.state$,this.home.state$),(0,g.U)((([e,t])=>({query:e,item:t}))),(0,v.b)((({item:e})=>{})),(0,y.z)((({query:{aweme_id:e,insert_ids:t},item:i})=>{var o;if(!(null==i?void 0:i.hasMore))return u.E;const n=null!==(o=null==i?void 0:i.cursor)&&void 0!==o?o:"0";return this.service.getCommentList({insert_ids:"0"===n?t:void 0,aweme_id:e,cursor:n}).pipe((0,v.b)((e=>{(0,j.k)(e.status_code,[0])})),(0,m.z)((t=>{var o,n,a;if(0===t.status_code&&(null===(o=t.comments)||void 0===o?void 0:o.length)){const{users:o,comments:a,commentItems:r}=this.processCommentList(t.comments),s=null!==(n=null==i?void 0:i.comments)&&void 0!==n?n:[],l=d()(s.concat(a),"cid"),u=[this.user.getActions().multiSetUser(o),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setCommentItem({comments:l,hasMore:Boolean(t.has_more),cursor:t.cursor,loading:!1})];return t.total&&u.push(this.item.getActions().setCommentCount({id:e,commentCount:Number(t.total)})),(0,c.of)(...u)}return 0!==t.status_code||(null===(a=t.comments)||void 0===a?void 0:a.length)||t.has_more?(0,c.of)(this.noop()):(0,c.of)(this.getActions().setCommentItem({hasMore:Boolean(t.has_more),loading:!1}))})),(0,b.O)(this.getActions().setCommentItem({awemeId:e,loading:!0})),(0,_.l)(this.getActions().setCommentItem({loading:!1}),this.terminate()),(0,C.n)({shouldShowMsg:!1}),(0,f.R)(this.dispose$))})))}fetchCommentReply(e){return e.pipe((0,h.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,v.b)((([e,t])=>{t||console.warn("No item here in fetch commoent reply")})),(0,m.z)((([e,t])=>{var i,o;return t?this.service.getCommentReply({comment_id:e.cid,item_id:e.itemId,cursor:null!==(o=null===(i=t.replyCache)||void 0===i?void 0:i.cursor)&&void 0!==o?o:"0"}).pipe((0,v.b)((e=>{(0,j.k)(e.status_code,[0])})),(0,m.z)((i=>{var o;if(0===i.status_code){const{users:n,comments:a,commentItems:r}=this.processCommentList(i.comments),s=null!==(o=null==t?void 0:t.reply_comment)&&void 0!==o?o:[],l=d()(s.concat(a),"cid");return(0,c.of)(this.user.getActions().multiSetUser(n),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setReplyComment(Object.assign({comments:[...l]},e)),this.getActions().setReplyCommentCache(Object.assign({comments:[...l],hasMore:Boolean(i.has_more),cursor:i.cursor},e)))}return(0,c.of)(this.noop())})),(0,b.O)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!0}))),(0,_.l)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!1}))),(0,C.n)({})):u.E})))}handleCollapseReply(e){return e.pipe((0,h.M)(this.state$),(0,v.b)((([e,t])=>{this.getCommentItem(t,e.cid)||console.warn("item is null")})),(0,g.U)((([e,t])=>this.getCommentItem(t,e.cid)?this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:[]})):this.noop())))}handleShowMoreReply(e){return e.pipe((0,h.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,v.b)((([{cid:e,itemId:t}])=>{this.report.handleShowMoreReply({parent_comment_id:e,group_id:t})})),(0,v.b)((([e,t])=>{t||console.warn("item is null")})),(0,g.U)((([e,t])=>{if(!t)return this.noop();if(!t.reply_comment||!t.replyCache)return this.getActions().fetchCommentReply(e);const i=t.reply_comment.length,o=t.replyCache.comments.length;if(i<o){const n=i+3>o?o:i+3;return this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:t.replyCache.comments.slice(0,n)}))}return this.getActions().fetchCommentReply(e)})))}handleCommentLike(e){return e.pipe((0,h.M)(this.commentItem.state$,this.user.state$),(0,g.U)((([e,t,i])=>{var o;const n=t[e.cid];return{query:e,commentItem:n,user:i.users[null!==(o=null==n?void 0:n.user)&&void 0!==o?o:""]}})),(0,v.b)((({commentItem:e})=>{e||console.warn("No comment item here in hendle comment like")})),(0,y.z)((({query:e,commentItem:t,user:i})=>{if(!t)return u.E;const o=t.user_digged?2:1;return this.service.postCommentLike({aweme_id:e.itemId,cid:e.cid,digg_type:o}).pipe((0,v.b)((t=>{var n;0===(null==t?void 0:t.status_code)?this.report.handleCommentLike({isLike:1===o,comment_id:e.cid,group_id:e.itemId,comment_user_id:null!==(n=null==i?void 0:i.id)&&void 0!==n?n:"",author_id:e.teaAuthorId}):3002043===(null==t?void 0:t.status_code)?(x.h.destroy(),x.h.open({content:this.t(2===o?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3})):(null==t?void 0:t.status_code)?(x.h.destroy(),x.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half"})):(x.h.destroy(),x.h.open({content:this.t("comment_nointernet_toast"),duration:3,widthType:"half"}))})),(0,m.z)((i=>{if(0===i.status_code){let i,n;return 1===o?(i=1,n=t.digg_count+1):(i=0,n=Math.max(t.digg_count-1,0)),(0,c.of)(this.commentItem.getActions().setItemDiggState({cid:e.cid,digged:i}),this.commentItem.getActions().setItemDiggCount({cid:e.cid,count:n}))}return 3002043===i.status_code?(0,c.of)(this.item.getActions().updateItem({id:e.itemId,itemCommentStatus:3})):u.E})),(0,C.n)({}))})))}handleCommentDelete(e){return e.pipe((0,m.z)((e=>{const{itemId:t,cid:i,parentCid:o,subIndex:n}=e;return this.service.postCommentDelete({cid:i}).pipe((0,v.b)((({status_code:e})=>{0===e?x.h.open({content:this.t("comment_delete_success"),duration:3,widthType:"half"}):x.h.open({content:this.t("comment_delete_failed"),duration:3,widthType:"half"})})),(0,m.z)((a=>{if(0===a.status_code){const a=[this.getActions().deleteCommentFromList(e),this.commentItem.getActions().removeItem(i),this.item.getActions().reduceOrIncreaseCommentCount({id:t,isReduce:!0})];return void 0!==n&&o&&a.push(this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:o,isReduce:!0})),(0,c.of)(...a)}return(0,c.of)(this.noop())})),(0,C.n)({}))})))}switchVideo(e){return e.pipe((0,m.z)((({currId:e,insertCid:t})=>(0,c.of)(this.getActions().dispose$(),this.getActions().setCommentItem({awemeId:e,cursor:"0",hasMore:!0,loading:!1,comments:[]}),this.getActions().fetchComment({insert_ids:t,aweme_id:e})))))}mapCommentItemFromQuery([e,t]){return[e,this.getCommentItem(t,e.cid)]}getCommentItem(e,t){return e.comments.find((({cid:e})=>e===t))}processCommentList(e=[],t={}){return e.reduce(((e,i)=>{const{user:o,reply_comment:n}=i;return e.users.push((0,w.yk)(o)),(null!=n?n:[]).forEach((({user:t})=>{e.users.push((0,w.yk)(t))})),e.comments.push(this.processComment(i,t)),this.commentItem.getProcessedCommentItem(i,t).forEach((t=>{e.commentItems.push(t)})),e}),{users:[],comments:[],commentItems:[]})}processComment(e,t={}){var i;return{cid:e.cid,reply_comment:null===(i=e.reply_comment)||void 0===i?void 0:i.map((e=>this.processComment(e,t))),replyCache:null}}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",p.y)],F.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setCommentItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setReplyLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setReplyComment",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setReplyCommentCache",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"deleteCommentFromList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"addCommentToFirst",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"addReplyToFirst",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"handlePostSuccess",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"handleReplySuccess",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!0}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"fetchComment",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"fetchCommentReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"handleCollapseReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"handleShowMoreReply",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"handleCommentLike",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"handleCommentDelete",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"switchVideo",null),F=(0,o.__decorate)([(0,r.Y)("Comment"),(0,o.__param)(5,(0,s.t)(k.s)),(0,o.__metadata)("design:paramtypes",[S.y,L,O.r,T.AP,I.z,Function,P.G])],F)},77015:(e,t,i)=>{i.d(t,{EN:()=>r,OH:()=>s,Gg:()=>l,hh:()=>d,TK:()=>c,Is:()=>u,Vk:()=>p});var o=i(95918),n=i(27918),a=i(57354);const r=(0,o.Z)("div",{target:"e1mecfx00"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0"},"label:DivContentContainer;"),s=(0,o.Z)("div",{target:"e1mecfx01"})({padding:"0 32px",overflow:"visible",display:"flex",flexDirection:"column",flexShrink:0},"label:DivMainContent;"),l=(0,o.Z)(a.W,{target:"e1mecfx02"})((({theme:{colors:e}})=>({marginTop:"9px",marginBottom:"17px",background:"transparent",color:e.TextSecondary})),"label:StyledScheduleTime;"),d=(0,o.Z)("div",{target:"e1mecfx03"})((({theme:{colors:e}})=>({width:"100%",padding:"0 32px",boxSizing:"border-box",backgroundColor:e.BGCreation3,borderTop:"none",borderBottom:"1px solid rgba(18, 18, 18, 0.12)",overflowX:"hidden",flexGrow:1})),"label:DivCommentContainerPolyfill;"),c=(0,o.Z)("div",{target:"e1mecfx04"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 30px",padding:"21px 0"})),"label:DivBottomCommentContainer;"),u=(0,o.Z)("div",{target:"e1mecfx05"})((({theme:e})=>[(0,n.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),p=(0,o.Z)("div",{target:"e1mecfx06"})((({theme:e})=>(0,n.GI)({theme:e,fontWeight:"semiBold",color:"Primary"})),{height:"100%",background:"#F8F8F8",borderRadius:"2px",padding:"14px 16px",fontSize:"16px",cursor:"pointer"},"label:DivLoginBar;")},65915:(e,t,i)=>{i.d(t,{r:()=>zi});var o=i(11040),n=i(9236),a=i(91051),r=i(21041),s=i(63464),l=i(8456),d=i(52053),c=i(49541),u=i(33156),p=i(96770),m=i(27319),h=i(9517),g=i(16926),v=i(35468),y=i(8721),b=i(76679),_=i(13964),f=i(90035),x=i(15073),j=i(14870),C=i(48036),k=i(40599),w=i(52432),S=i(44465),P=i(47127),I=i(14452),T=i(56344),O=i(57354),D=i(62321),M=i(54251),R=i(43893),L=i(56277),B=i(25615),F=i.n(B),A=i(93859),Z=i(17936),E=i(30074),z=i(85404),$=i(2734),V=i(3483),U=i(57107),G=i(82774),W=i(95918),N=i(27918);const q=(0,W.Z)("div",{target:"e1t8v77z0"})((({theme:{direction:e},align:t})=>[{textAlign:t},(0,N.YJ)({direction:e,textAlign:"left"===t?"start":"end"})]),"label:DivStatisticContainer;"),H=(0,W.Z)("div",{target:"e1t8v77z1"})({color:"inherit",display:"inline-block"},"label:DivValue;"),Y=(0,W.Z)("div",{target:"e1t8v77z2"})((({color:e})=>({color:e,":global(svg)":{verticalAlign:"text-bottom"}})),"label:DivComparison;");var Q;!function(e){e.Rise="rise",e.Fall="fall",e.NoChange="no-change"}(Q||(Q={}));const J={rise:(0,o.jsx)(U.Z,{width:16,height:16},void 0),fall:(0,o.jsx)(G.Z,{width:16,height:16},void 0),"no-change":null},K={rise:"#10A2C5",fall:"#FF4C3A","no-change":"inherit"},X=(0,a.memo)((({value:e,comparison:t,suffix:i,growth:n,align:a="left",children:r,showArrow:s=!1})=>{const l=K[n];return(0,o.jsxs)(q,Object.assign({align:a},{children:[(0,o.jsx)(H,{children:e},void 0),(0,o.jsxs)(Y,Object.assign({color:l},{children:[null!=t?t:r,s&&J[n],i]}),void 0)]}),void 0)})),ee=(0,W.Z)("div",{target:"e6a09rd0"})((({theme:{colors:e}})=>({fontSize:"13px",lineHeight:"17px",color:e.TextReverse3,background:e.BGPrimary})),"label:DivTooltipOverlay;"),te=(0,W.Z)("span",{target:"e6a09rd1"})((({theme:e})=>({display:"inline-flex",justifyContent:"center",alignItems:"center",padding:"0 4px",height:"16px",color:e.colors.TextQuaternary,cursor:"pointer"})),"label:SpanTooltipWrapper;"),ie=(0,a.memo)((({desc:e})=>{const t=(0,a.useMemo)((()=>(0,o.jsx)(ee,{children:e},void 0)),[e]),i=(0,a.useMemo)((()=>({borderRadius:"8px",boxShadow:"3px 6px 14px rgba(0, 0, 0, 0.17)"})),[]);return(0,o.jsx)(Z.u,Object.assign({tooltipTheme:"white",placement:"top",overlay:t,overlayStyle:i},{children:(0,o.jsx)(te,{children:(0,o.jsx)(R.Z,{width:16,height:16},void 0)},void 0)}),void 0)})),oe=(0,W.Z)("div",{target:"e1m23xuv0"})((({height:e})=>({width:"100%",height:null!=e?e:"unset",display:"flex",flexDirection:"column",justifyContent:"space-around"})),"label:DivVerticalChartContainer;"),ne=(0,W.Z)("div",{target:"e1m23xuv1"})({width:"100%",height:"40px",display:"flex",justifyContent:"space-between",alignItems:"center"},"label:DivVerticalChartItemContainer;"),ae=(0,W.Z)("div",{target:"e1m23xuv2"})((({width:e})=>({width:e,height:"40px",background:"#4DDDF0",justifySelf:"flex-end",cursor:"pointer",transition:"background 200ms linear",animation:"width-expand ease 400ms","@keyframes width-expand":{"0%":{width:0},"100%":{width:e}},":hover":{background:"#00bbd4"}})),"label:DivVerticalBar;"),re=(0,W.Z)("span",{target:"e1m23xuv3"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextSecondary"}),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexFlow:"1"}]),"label:SpanBarLabel;"),se=(0,W.Z)("span",{target:"e1m23xuv4"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{width:"40px",flexShrink:0,alignItems:"center",justifyContent:"flex-end",textAlign:"right"},(0,N.YJ)({direction:e.direction,textAlign:"end"})]),"label:SpanBarValue;"),le=(0,a.memo)((e=>{const{chartData:t}=e,i=(0,a.useCallback)((()=>{const e=[...t].filter((e=>Number(e.value)>=.01));return e.length>5?null:60*e.length+32/e.length+"px"}),[t]),n=(0,a.useMemo)(i,[t,i]);return(0,o.jsx)(oe,Object.assign({height:null!=n?n:""},{children:t.map((({value:e=0,key:t})=>(0,o.jsxs)(ne,{children:[(0,o.jsxs)(re,{children:[t,(0,o.jsx)(ae,{width:100*(null!=e?e:0)+"%"},t)]},void 0),(0,o.jsx)(se,{children:`${(100*(0,$.G)(e)).toFixed(0)}%`},void 0)]},t)))}),void 0)}));var de=i(34708),ce=i(98465),ue=i(64047),pe=i(73566),me=i(48185),he=i(19630),ge=i(82346),ve=i(60595),ye=i(49584),be=i(58755),_e=i(68854),fe=i(53095),xe=i(10026),je=i(5549),Ce=i(17230),ke=i(57244),we=i(40316),Se=i.n(we),Pe=i(4206);let Ie=class{constructor(e){this.fetch=e}getAnalyticsData(e){return this.fetch.post("/aweme/v1/data/insighs/",{query:Se()(e,"body"),headers:{"Content-Type":"application/x-www-form-urlencoded"},baseUrlType:1,credentials:"include",body:e.body})}};Ie=(0,ue.__decorate)([(0,ke.G)(),(0,ue.__metadata)("design:paramtypes",[Pe.r])],Ie);const Te=new Set(["video_output_time","self_rooms_has_more","self_rooms"]),Oe={status_code:0},De=-1*(new Date).getTimezoneOffset()*60;let Me=class extends pe.D{constructor(e){super(),this.service=e,this.defaultState={loading:!1,hideTerritories:!1,isOldVideo:!1,statusCode:0,requestData:{},analyticsData:{}}}setAnalyticsData(e,t){var i,o;const{status_code:n,user_info:a,video_info:r}=t,{create_time:s}=null!=r?r:{},l=a&&-1!==["HK"].indexOf((null!==(i=null==a?void 0:a.region)&&void 0!==i?i:"").toUpperCase()),d=(null!==(o=null==a?void 0:a.open_insight_time)&&void 0!==o?o:0)>Number(null!=s?s:0);e.statusCode=n,e.hideTerritories=null!=l&&l,e.isOldVideo=d,e.analyticsData=t}setLoading(e,t){e.loading=t}getAnalyticsData(e){return e.pipe((0,ye.z)((({requestData:e,aid:t,region:i})=>{const{existData:o,notExistRequest:n=[],cacheResponse:a}=this.cacheQuest(e);return o.vv_history&&(o.isNewUser=o.vv_history.every((e=>0!==e.status))),0===n.length?(0,ge.of)(this.getActions().setAnalyticsData(o)):this.service.getAnalyticsData({tz_offset:De,aid:t,carrier_region:i,body:`type_requests=${JSON.stringify(e)}`}).pipe((0,be.V)(Ce.ES),(0,_e.K)((()=>(0,ge.of)({status_code:-1}))),(0,fe.z)((e=>{const{vv_history:t}=e;return t&&(e.isNewUser=t.every((e=>0!==e.status))),a(e),(0,ge.of)(this.getActions().setAnalyticsData(e))})),(0,xe.O)(this.getActions().setLoading(!0)),(0,je.l)(this.getActions().setLoading(!1),this.terminate()))})))}cacheQuest(e){let t={status_code:0};const i=[],o={};return e.forEach((e=>{const n=JSON.stringify(e);o[e.insigh_type]=n,Oe[n]?t=Object.assign(Object.assign({},t),Oe[n]):i.push(e)})),{existData:t,notExistRequest:i,cacheResponse:e=>{Object.keys(e).forEach((t=>{Te.has(t)||o[t]&&e[t]&&(Oe[o[t]]={[t]:e[t]})}))}}}};var Re;function Le(){return Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Le.apply(this,arguments)}(0,ue.__decorate)([(0,me.lF)(),(0,ue.__metadata)("design:type",Function),(0,ue.__metadata)("design:paramtypes",[Object,Object]),(0,ue.__metadata)("design:returntype",void 0)],Me.prototype,"setAnalyticsData",null),(0,ue.__decorate)([(0,me.lF)(),(0,ue.__metadata)("design:type",Function),(0,ue.__metadata)("design:paramtypes",[Object,Boolean]),(0,ue.__metadata)("design:returntype",void 0)],Me.prototype,"setLoading",null),(0,ue.__decorate)([(0,me.Qm)({}),(0,ue.__metadata)("design:type",Function),(0,ue.__metadata)("design:paramtypes",[ve.y]),(0,ue.__metadata)("design:returntype",void 0)],Me.prototype,"getAnalyticsData",null),Me=(0,ue.__decorate)([(0,he.Y)("AnalyticsModule"),(0,ue.__metadata)("design:paramtypes",[Ie])],Me);const Be=function(e){return a.createElement("svg",Le({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Re||(Re=a.createElement("path",{fill:"#161823",fillOpacity:.34,fillRule:"evenodd",d:"M21.75 11.471c0 2.306-1.13 4.286-3.064 6.187-2.365 2.324-5.344 3.7-5.344 3.7-.663.342-1.2.013-1.2-.734v-1.262c-5.386 0-9.892-3.212-9.892-7.89C2.25 6.791 6.615 3 12 3s9.75 3.793 9.75 8.471zm-7.877 7.909a20.644 20.644 0 002.623-1.784c.407-.327.788-.664 1.138-1.008 1.785-1.754 2.616-3.373 2.616-5.117 0-3.8-3.65-6.971-8.25-6.971s-8.25 3.172-8.25 6.971c0 3.621 3.591 6.39 8.391 6.39h1.5v1.65l.232-.131zM6.25 11.25a1.25 1.25 0 102.501 0 1.25 1.25 0 00-2.501 0zM12 12.5a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5zm3.25-1.25a1.25 1.25 0 102.5.001 1.25 1.25 0 00-2.5-.002z",clipRule:"evenodd"})))};var Fe;function Ae(){return Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ae.apply(this,arguments)}const Ze=function(e){return a.createElement("svg",Ae({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Fe||(Fe=a.createElement("path",{fill:"#161823",fillOpacity:.34,fillRule:"evenodd",d:"M12.111 5.218c.87-1.22 2.299-1.864 3.87-1.864 2.993 0 5.483 2.555 5.483 5.592 0 .087-.002.153-.003.2a.442.442 0 00.003.111c-.012.639-.124 1.167-.323 1.864-.113.126-.218.361-.322.622a2.75 2.75 0 00-.323.621c-1.885 3.114-5.858 6.307-7.1 7.305-.2.161-.33.265-.368.302-.27.266-.539.53-1.078.53s-.808-.264-1.077-.53a7.836 7.836 0 00-.365-.29c-1.337-1.04-5.873-4.572-7.45-7.93-.27-.53-.605-1.793-.621-2.494.006-.006.005-.04.003-.107a7.258 7.258 0 01-.003-.204c0-3.039 2.488-5.592 5.482-5.592 1.569 0 2.999.644 4.192 1.864zm7.37 5.831c.099-.236.185-.421.286-.585.129-.483.183-.808.195-1.163-.002-.039-.002-.05-.002-.087 0-.036 0-.077.002-.132l.002-.136c0-2.221-1.83-4.092-3.982-4.092-1.138 0-2.09.45-2.65 1.235a1.5 1.5 0 01-2.292.178c-.925-.945-1.975-1.413-3.12-1.413-2.154 0-3.983 1.87-3.983 4.092 0 .046 0 .086.002.134l.003.138c0 .033 0 .047-.002.075.033.475.283 1.438.476 1.82.083.177.178.358.285.545.647 1.127 1.696 2.377 3.041 3.681 1.399 1.357 4.46 3.835 4.191 3.572l-.008-.009.025.025.026-.025c.055-.054.434-.363.817-.675.264-.215.531-.432.693-.567.96-.8 1.87-1.614 2.722-2.456 1.191-1.176 2.158-2.303 2.827-3.334.04-.06.078-.12.115-.18a3.9 3.9 0 01.332-.64z",clipRule:"evenodd"})))};var Ee,ze;function $e(){return $e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},$e.apply(this,arguments)}const Ve=function(e){return a.createElement("svg",$e({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Ee||(Ee=a.createElement("g",{opacity:.34},a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z",clipRule:"evenodd",opacity:.01}))),ze||(ze=a.createElement("path",{fill:"#161823",fillOpacity:.34,fillRule:"evenodd",d:"M14.629 4.678c-.922-.86-1.675-.536-1.675.728V7.92c-9.041 0-10.644 6.101-11.429 10.01-.188 2.123.735 1.974.972 1.548 2.54-4.564 10.457-3.168 10.457-3.168v2.21c0 1.269.78 1.624 1.742.802l7-5.98c.642-.549.66-1.458.044-2.033l-7.111-6.631zm-1.675 4.743h1.5V6.567l6.15 5.734-6.15 5.255v-2.504l-1.239-.219a13.368 13.368 0 00-.869-.115c-1.71-.18-3.544-.163-5.302.19-1.371.275-2.59.738-3.607 1.417.45-1.645 1.007-2.852 1.872-3.922 1.554-1.92 3.96-2.982 7.645-2.982z",clipRule:"evenodd"})))};var Ue;function Ge(){return Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ge.apply(this,arguments)}const We=function(e){return a.createElement("svg",Ge({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Ue||(Ue=a.createElement("path",{fill:"#161823",fillOpacity:.34,fillRule:"evenodd",d:"M5.505 5.08v13.967l12.3-6.984-12.3-6.983zm-1.636-.458c0-1.012 1.15-1.64 2.058-1.124l13.107 7.442a1.279 1.279 0 010 2.247L5.927 20.63c-.909.516-2.058-.112-2.058-1.124V4.622z",clipRule:"evenodd"})))};var Ne=i(91497);const qe=(0,W.Z)("p",{target:"e1icgj7e0"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima",color:"TextQuaternary",typography:"P4"})]),"label:PEmptyText;"),He=(0,W.Z)("div",{target:"e1icgj7e1"})((({theme:e})=>({width:"987px",minHeight:"500px",padding:"48px",background:e.colors.BGPrimary,borderRadius:"8px"})),"label:DivAnalyticsVideo;"),Ye=(0,W.Z)("div",{target:"e1icgj7e2"})((({theme:e})=>({position:"absolute",right:"24px",top:"24px",width:"40px",height:"40px",boxSizing:"border-box",background:e.colors.BGView,color:"#B0B0B4",padding:"8px",borderRadius:"50%",cursor:"pointer"})),"label:DivCloseBtn;"),Qe=(0,W.Z)("div",{target:"e1icgj7e3"})((({theme:e})=>({textAlign:"center",ul:{margin:"16px auto 32px",padding:0,display:"flex",justifyContent:"center",listStyle:"none",li:{minWidth:"100px",marginLeft:"17px",marginBottom:0,"&:first-child":{marginLeft:0}},p:{fontSize:"17px",lineHeight:"20px",color:e.colors.TextPrimary}}})),"label:DivAnalyticsVideoHeader;"),Je=(0,W.Z)("div",{target:"e1icgj7e4"})({display:"flex",justifyContent:"space-between","& > div":{width:"49%",alignSelf:"flex-start"}},"label:DivAnalyticsVideoContent;"),Ke=(0,W.Z)("div",{target:"e1icgj7e5"})({display:"inline-flex",position:"relative",fontSize:0,marginBottom:"12px",cursor:"pointer"},"label:DivImageContainer;"),Xe=(0,W.Z)("img",{target:"e1icgj7e6"})({width:"88px"},"label:ImgVideoCover;"),et=(0,W.Z)("div",{target:"e1icgj7e7"})({position:"absolute",top:0,left:0,bottom:0,right:0,backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, .5))"},"label:DivImgMask;"),tt=(0,W.Z)("p",{target:"e1icgj7e8"})((({theme:e})=>[(0,N.GI)({theme:e,color:"ConstTextInverse"}),{zIndex:2,position:"absolute",width:"100%",textAlign:"center",bottom:"4px",background:"transparent",fontSize:"12px"}]),"label:PDuration;"),it=(0,W.Z)("p",{target:"e1icgj7e9"})((({theme:e})=>[(0,N.GI)({theme:e,fontWeight:"semiBold",typography:"P3",color:"TextPrimary"}),{display:"flex",justifyContent:"center",alignItems:"center"}]),"label:PTextWithTooltip;"),ot=(0,W.Z)("div",{target:"e1icgj7e10"})((({theme:e})=>[(0,N.GI)({theme:e,fontWeight:"semiBold"}),{textAlign:"initial",fontSize:"13px",lineHeight:"16px",color:e.colors.TextReverse3,marginBottom:"12px",display:"flex",alignItems:"center",":global(.tooltip)":{marginInlineStart:"4px",display:"inline-block",height:"16px"}}]),"label:DivUpdateTimeContainer;"),nt=(0,W.Z)("div",{target:"e1icgj7e11"})((({theme:{colors:e}})=>({marginBottom:"16px",padding:"24px",border:`1px solid ${e.LineSecondary}`,boxSizing:"border-box",borderRadius:"8px"})),"label:DivChartContainer;"),at=(0,W.Z)("h5",{target:"e1icgj7e12"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold"}),{margin:0,marginBottom:"24px",display:"flex",alignItems:"center",fontSize:"13px",lineHeight:"17px"}]),"label:H5TrafficSource;"),rt=(0,W.Z)("div",{target:"e1icgj7e13"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima"}),{display:"flex",justifyContent:"space-between",alignItems:"center",height:"56px",p:{display:"inline-flex"},"&:first-of-type":{marginTop:0},span:{fontSize:"17px",lineHeight:"20px",color:e.colors.TextPrimary}}]),"label:DivVideoStatistics;"),st=(0,W.Z)("span",{target:"e1icgj7e14"})((({theme:e})=>({fontSize:"12px !important",lineHeight:"15px !important",color:`${e.colors.TextTertiary}  !important`})),"label:SpanComparison;"),lt=(0,W.Z)("span",{target:"e1icgj7e15"})({marginInlineStart:"4px",display:"inline-block",height:"16px",cursor:"pointer"},"label:SpanTooltip;"),dt=(0,W.Z)("div",{target:"e1icgj7e16"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima"}),{fontSize:"13px",lineHeight:"17px",color:e.colors.TextTertiary}]),"label:DivVideoTooltip;"),ct=(0,W.Z)("div",{target:"e1icgj7e17"})((({hideTerritories:e})=>({width:e?"100%":"unset"})),"label:DivWidthWrapper;"),ut=(0,W.Z)("p",{target:"e1icgj7e18"})((({theme:e})=>[(0,N.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextTertiary"}),{marginTop:"24px",fontSize:"13px",lineHeight:"17px"}]),"label:PUTCTime;");var pt=i(7582);const mt=(e,t=0,i="",o=!1,n=0,a=0)=>{const r={insigh_type:e};return t&&(r.days=t+a),a&&(r.end_days=1+a),i&&(o?r.room_id=i:r.aweme_id=i),"self_rooms"===e&&n&&(r.end_time=n),r};var ht,gt;!function(e){e.Time="time",e.Number="number"}(ht||(ht={})),function(e){e.Short="short",e.Full="full",e.Default=""}(gt||(gt={}));const vt=1e3,yt=36e5;function bt(e,t="number",i="",o=!1){return"time"===t?function(e,t="",i=0,o=!1){if((0,pt.kK)(e))return"--";const n=e=>{const t=Math.pow(10,i);return(Math.max(Math.round(e*t),e>0?1:0)/t).toFixed(i)},a=e>=0?o?"+":"":"-";let r=Math.abs(Number(e));const s=Math.floor(r/yt);r-=s*yt;let l=Math.floor(r/6e4);r-=6e4*l;const d=Math.floor(r/vt);return"short"===t?s>0&&d>29&&(l+=1,60===l)?`${a}${n(s+1)}h`:s>0?`${a}${n(s+l/60)}h`:l>0?`${a}${n(l+d/60)}m`:(r-=d*vt,`${a}${n(d+r/vt)}s`):s>0||"full"===t?`${a}${s}h:${l}m:${d}s`:l>0?`${a}${l}m:${d}s`:`${a}${d}s`}(e,i,1,o):Math.abs(e)<.01&&0!==e?e>0?(o?"+":"")+"0.01":"-0.01":"short"===i?(0,pt.wm)(e,o):(0,pt.GF)(e,o)}function _t(e,t,i,o){const{type:n="number",format:a="full",comparisonFormat:r="short"}=null!=o?o:{};let s=bt(e,n,a);if(2===i?s="--":1===i&&(s="N/A"),(0,pt.kK)(e)||(0,pt.kK)(t))return{valueStr:s,comparisonStr:"--",percentStr:"--",growth:"no-change"};const l=e-t,d=l>0?"rise":l<0?"fall":"no-change";var c;return{valueStr:s,comparisonStr:bt(l,n,r,!0),percentStr:0===l?"+0%":0===t?">999%":`${l/t>=0?"+":""}${c=l/t*100,Math.abs(c)<.01&&0!==c?c<0?"-0.01":"0.01":(0,pt.uY)(Number(c.toFixed(2)))}%`,growth:d}}const ft=24,xt=(0,a.memo)((e=>{const t=(0,y.Q)("MT_Analytics"),{isOldVideo:i,updateTime:n}=e,r=(0,a.useMemo)((()=>({borderRadius:"8px",boxShadow:"3px 10px 14px rgba(0, 0, 0, 0.17)"})),[]),s=(0,a.useMemo)((()=>(0,o.jsxs)(dt,{children:[(0,o.jsx)("div",Object.assign({className:"title"},{children:t("estimate_data_title")}),void 0),(0,o.jsx)("div",Object.assign({className:"contents"},{children:t("estimate_data_tips")}),void 0)]},void 0)),[t]),l=(0,a.useCallback)(((e,t)=>{const[i]=e.getElementsByClassName("tiktok-tooltip-arrow");i&&(i.style.transform=`translateX(${0-t.offset[0]}px) rotate(180deg)`)}),[]);return i?(0,o.jsx)(o.Fragment,{children:t("tips_of_update_none")},void 0):null===n||"number"!=typeof n?(0,o.jsx)(o.Fragment,{children:t("tips_of_update_wait")},void 0):(0,o.jsxs)(o.Fragment,{children:[t("tips_of_update_normal",{create_time:(0,pt.p6)(n,t,"MMM DD, YYYY")}),(0,o.jsx)(Z.u,Object.assign({tooltipTheme:"white",placement:"top",overlayStyle:r,onPopupAlign:l,overlay:s},{children:(0,o.jsx)(lt,{children:(0,o.jsx)(R.Z,{width:16,height:16},void 0)},void 0)}),void 0)]},void 0)})),jt=(0,a.memo)((e=>{const{show:t,id:i,onClose:r=F()}=e,s=(0,y.Q)("MT_Analytics"),{$language:l,$region:d="",$appType:c}=(0,$.m7)((0,de.L)((()=>["$language","$region","$appType"]),[])),u="m"===c?1233:1180,[{loading:p,isOldVideo:m,hideTerritories:h,analyticsData:v},b]=(0,n.b7)(Me,{selector:e=>({loading:e.loading,statusCode:e.statusCode,analyticsData:e.analyticsData,isOldVideo:e.isOldVideo,hideTerritories:e.hideTerritories}),dependencies:[]}),_=(0,g.fz)(V._e),{isNewUser:f,video_page_percent:x={},video_region_percent:j={},video_total_duration:C={},video_total_duration_before:k={},video_per_duration:w={},video_per_duration_before:S={},finish_rate:P={},finish_rate_before:I={},video_uv:T={},video_uv_before:O={},video_output_time:D,video_info:R={}}=v,B=(0,a.useRef)(!1),{isRTL:Z}=(0,Ne.Y)(),{video:U={},statistics:G,author:W={},aweme_id:N,create_time:q}=R,{cover:H={},duration:Y}=U,{unique_id:Q=""}=W,{url_list:J=[]}=H,{share_count:K=0,comment_count:ee=0,digg_count:te=0,play_count:oe=0}=(0,$.m7)(G),ne=(0,a.useCallback)((e=>{const t=(e=>[mt("video_info",null,e),mt("video_page_percent",null,e),mt("video_region_percent",null,e),mt("video_total_duration",null,e),mt("video_total_duration_before",null,e),mt("video_per_duration",null,e),mt("video_per_duration_before",null,e),mt("user_info"),mt("video_uv",null,e),mt("video_uv_before",null,e),mt("finish_rate",null,e),mt("finish_rate_before",null,e),mt("video_output_time"),mt("vv_history",8)])(e);b.getAnalyticsData({requestData:t,aid:u,region:d})}),[d,u,b]),ae=_t((0,$.G)(null==T?void 0:T.value),(0,$.G)(null==O?void 0:O.value),0,{type:"number",format:"short"}),re=(0,a.useCallback)((e=>{let t=s("Not enough data yet.");return m||!f&&2!==e.status||(t=s("Insights will be updated tomorrow")),(0,o.jsx)(qe,{children:t},void 0)}),[s,f,m]),se=(0,a.useCallback)((()=>{const e=_t((0,$.G)(C.value),(0,$.G)(k.value),0,{type:"time",format:"full"}),t=_t((0,$.G)(w.value),(0,$.G)(S.value),0,{type:"time",format:"short"}),i=_t((0,$.G)(P.value),(0,$.G)(I.value),0,{format:"full"});return(0,o.jsxs)(nt,{children:[(0,o.jsxs)(rt,{children:[(0,o.jsx)("p",{children:s("total_time_watched")},void 0),(0,o.jsx)("span",{children:"--"===e.valueStr?"--":(0,o.jsx)(X,Object.assign({align:"right",growth:e.growth,value:e.valueStr},{children:(0,o.jsxs)(st,{children:["(",e.comparisonStr," ",s("compare_1d_ago"),")"]},void 0)}),void 0)},void 0)]},void 0),(0,o.jsxs)(rt,{children:[(0,o.jsx)("p",{children:s("average_time_watched")},void 0),(0,o.jsx)("span",{children:"--"===t.valueStr?"--":(0,o.jsx)(X,Object.assign({align:"right",growth:t.growth,value:t.valueStr},{children:(0,o.jsxs)(st,{children:["(",t.comparisonStr," ",s("compare_1d_ago"),")"]},void 0)}),void 0)},void 0)]},void 0),(0,o.jsxs)(rt,{children:[(0,o.jsx)("p",{children:s("watch_full_video")},void 0),(0,o.jsx)("span",{children:"--"===i.valueStr?"--":(0,o.jsx)(X,Object.assign({align:"right",growth:i.growth,value:`${(100*(0,$.G)(P.value)).toFixed(1)}%`},{children:(0,o.jsxs)(st,{children:["(",i.percentStr," ",s("compare_1d_ago"),")"]},void 0)}),void 0)},void 0)]},void 0)]},void 0)}),[P.value,I.value,s,w.value,S.value,C.value,k.value]),ue=(0,a.useCallback)((()=>{null==r||r()}),[r]),pe=(0,a.useCallback)((()=>{_.handleClickAnalyticsVideoCover(),window.open(`https://www.tiktok.com/@${Q}/video/${N}`)}),[N,_,Q]);(0,a.useEffect)((()=>{t&&!B.current&&ne(null!=i?i:"")}),[t,i,ne]);const me=function(e){const{domain:t,teaDomain:i}=(0,z.o)(),o=(0,n.mp)(ce.L,{selector:({lang:e})=>e,dependencies:[]}),r=(0,g.fz)(ce.L),[s,l]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{e&&r.loadData$({lang:o,namespaces:["MT_Analytics"],domain:t,teaDomain:i}).pipe((0,A.b)((()=>{l(!1)}))).subscribe()}),[t,r,o,e,i]),s}(t);return(0,o.jsx)(M.AR,Object.assign({compact:!0,isOpen:t},{children:p||me?(0,o.jsx)(E.g,{center:!0,size:"small"},void 0):(0,o.jsxs)(He,{children:[(0,o.jsx)(Ye,Object.assign({onClick:ue},{children:(0,o.jsx)(L.Z,{width:24,height:24},void 0)}),void 0),(0,o.jsxs)(Qe,{children:[(0,o.jsxs)(Ke,Object.assign({onClick:pe},{children:[(0,o.jsx)(et,{},void 0),(0,o.jsx)(Xe,{src:J[0]},void 0),(0,o.jsx)(tt,{children:(0,pt.LU)((0,$.G)(Y),"s")},void 0)]}),void 0),(0,o.jsxs)(it,{children:[s("Data since post time {0}",{0:(0,pt.JN)((0,$.G)(q),s)}),(0,o.jsx)(ie,{isRTL:Z,desc:(he=(0,$.G)(q),s("Post time displays in your local time (UTC{shift_X}h)").replace("{shift_X}",(0,pt.Bv)(he)))},void 0)]},void 0),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)(We,{width:ft,height:ft},void 0),(0,o.jsx)("p",{children:(0,pt.wm)((0,$.G)(oe))},void 0)]},void 0),(0,o.jsxs)("li",{children:[(0,o.jsx)(Ze,{width:ft,height:ft},void 0),(0,o.jsx)("p",{children:(0,pt.wm)((0,$.G)(te))},void 0)]},void 0),(0,o.jsxs)("li",{children:[(0,o.jsx)(Be,{width:ft,height:ft},void 0),(0,o.jsx)("p",{children:(0,pt.wm)((0,$.G)(ee))},void 0)]},void 0),(0,o.jsxs)("li",{children:[(0,o.jsx)(Ve,{width:ft,height:ft},void 0),(0,o.jsx)("p",{children:(0,pt.wm)((0,$.G)(K))},void 0)]},void 0)]},void 0),(0,o.jsx)(ot,{children:(0,o.jsx)(xt,{isOldVideo:m,updateTime:(0,$.G)(D),isRTL:Z},void 0)},void 0)]},void 0),(0,o.jsxs)(Je,{children:[(0,o.jsxs)(ct,Object.assign({hideTerritories:h},{children:[se(),(0,o.jsxs)(nt,{children:[(0,o.jsxs)(at,{children:[s("traffic_sources"),(0,o.jsx)(ie,{isRTL:Z,desc:s("Where your video traffic comes from.")},void 0)]},void 0),(0,pt.V5)(x)?(0,o.jsx)(le,{lang:l,chartData:null==x?void 0:x.value},void 0):re(x)]},void 0)]}),void 0),!h&&(0,o.jsxs)(nt,{children:[(0,o.jsxs)(at,{children:[s("audience_territories"),(0,o.jsx)(ie,{isRTL:Z,desc:s("Location distribution of users who watched your videos")},void 0)]},void 0),(0,pt.V5)(j)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(rt,{children:[(0,o.jsx)("p",{children:s("total_audience")},void 0),(0,o.jsx)("span",{children:(0,o.jsx)(X,Object.assign({align:"right",growth:ae.growth,value:ae.valueStr},{children:(0,o.jsxs)(st,{children:["(",ae.comparisonStr," ",s("compare_1d_ago"),")"]},void 0)}),void 0)},void 0)]},void 0),(0,o.jsx)(le,{lang:l,chartData:j.value},void 0)]},void 0):re(j)]},void 0)]},void 0),(0,o.jsx)(ut,{children:s("Data displays in UTC time zone")},void 0)]},void 0)}),void 0);var he}));var Ct=i(33104),kt=i(74472),wt=i(65122),St=i(12853),Pt=i(81578),It=i(23683),Tt=i(83421),Ot=i(26884),Dt=i(36761),Mt=i(20417),Rt=i(96207),Lt=i(99727),Bt=i(57462),Ft=i(10388),At=i(56187),Zt=i(80149),Et=i(70119),zt=i(66958),$t=i(22585),Vt=i(48793),Ut=i(84475),Gt=i(39973),Wt=i(34447),Nt=i(12886),qt=i(10126),Ht=i(44401),Yt=i(32045),Qt=i(76759),Jt=i(48382);const Kt=(0,o.jsx)(Ft.Z,{width:20,height:20},void 0),Xt=(0,a.memo)((function(e){var t;const i=(0,Et.a)(),r="rtl"===i.direction,s=(0,g.fz)($t.p),l=(0,y.Q)(),{itemId:d,teaParams:c}=e,u=(0,Nt.V)(d),[p,m]=(0,n.b7)(wt.AP,{selector:e=>e[d],dependencies:[d]}),h=(0,n.mp)(Qt.z,{selector:e=>{var t;return e.users[null!==(t=null==p?void 0:p.author)&&void 0!==t?t:""]},dependencies:[null==p?void 0:p.author]}),[b,_]=(0,a.useState)(!1),{stats:f,digged:x,id:j=""}=null!=p?p:{},{uniqueId:C="",secUid:k}=null!=h?h:{},w=(0,zt.fH)({uniqueId:C,secUid:k,videoId:j}),{$wid:S=""}=null!==(t=(0,de.L)((()=>["$wid"]),[]))&&void 0!==t?t:{},I=`https://www.tiktok.com${w}?is_from_webapp=1&sender_device=pc&web_id=${S}`,T=(0,a.useMemo)((()=>(0,qt.IG)({platform:"copy",url:I})),[I]),O=(0,a.useCallback)((()=>{s.handleShare(Object.assign({platform:"copy",author_id:null==h?void 0:h.id,group_id:d,play_mode:"browser_mode",share_click_from:"short"},c)),T(),v.h.open({content:l("Copied"),duration:1.2,widthType:"half"})}),[T,d,s,l,null==h?void 0:h.id,c]),D=(0,a.useCallback)((()=>{m.postLikeVideo(Object.assign({id:d},c))}),[m,d,c]),M=(0,P.X)({action:D,modalConfig:{query:{enter_method:"click_like"}}}),R=(0,a.useMemo)((()=>(0,o.jsx)(At.Z,{fill:x?i.colors.Primary:i.colors.Primary2,width:20,height:20},void 0)),[x,i.colors.Primary,i.colors.Primary2]),L=(0,a.useMemo)((()=>Object.assign({author_id:null==h?void 0:h.id,group_id:d,play_mode:"browser_mode"},c)),[c,d,null==h?void 0:h.id]),{active:B,handleMouseEnter:F,handleMouseLeave:A}=(0,Gt.R)(200),{expanded:Z}=(0,Ht.c1)(),E=(0,a.useCallback)((()=>{s.handleSharePanelShow({group_id:d,author_id:null==h?void 0:h.id,share_option_type:Z}),F()}),[F,s,d,null==h?void 0:h.id,Z]),z=(0,Ht.JW)();(0,a.useEffect)((()=>{z()}),[z]);const V=(0,a.useCallback)((()=>{_(!0)}),[_]),U=(0,a.useCallback)((()=>{_(!1)}),[_]);return(0,o.jsxs)(Jt.wu,{children:[(0,o.jsxs)(Jt.SD,{children:[(0,o.jsxs)(Jt.AZ,{children:[(0,o.jsx)(Vt.t,{styleType:2,text:(0,$.BT)(null==f?void 0:f.diggCount),Icon:R,onClick:M,e2eTag:"browse-like"},void 0),(0,o.jsx)(Vt.t,{styleType:2,text:(0,$.BT)(null==f?void 0:f.commentCount),Icon:Kt,disabled:!0,e2eTag:"browse-comment"},void 0)]},void 0),(0,o.jsxs)(Jt.AZ,Object.assign({"data-e2e":"browse-share-group"},{children:[(0,o.jsx)(Yt.mB,{videoId:j,enabled:null==p?void 0:p.shareEnabled,mode:0,url:I,embedCode:u,onEmbedModalVisibleChange:e.onEmbedModalVisibleChange,teaParams:L,onSendMessagePanelOpen:V},void 0),(0,o.jsxs)(Jt.no,Object.assign({onMouseEnter:E,onMouseLeave:A},{children:[(0,o.jsx)(Zt.Z,{width:"16",height:"16"},void 0),(0,o.jsx)(Ut.G,Object.assign({placement:r?"bottomLeft":"bottomRight",active:B,margin:-12,arrowMargin:12},{children:(0,o.jsx)(Jt.qf,{children:(0,o.jsx)(Yt.mB,{videoId:j,mode:1,url:I,enabled:null==p?void 0:p.shareEnabled,embedCode:u,onEmbedModalVisibleChange:e.onEmbedModalVisibleChange,teaParams:L,onSendMessagePanelOpen:V,from:3},void 0)},void 0)}),void 0)]}),void 0)]}),void 0)]},void 0),(0,o.jsxs)(Jt.cl,{children:[(0,o.jsx)(Jt.ky,{children:I},void 0),(0,o.jsx)(Jt.z5,Object.assign({onClick:O},{children:l("copy_link")}),void 0)]},void 0),b&&(0,o.jsx)(Wt.J,{visible:b,videoId:j,onClose:U},void 0)]},void 0)}));var ei=i(85291),ti=i(65513),ii=i(59151),oi=i(43683),ni=i(75546),ai=i(39526),ri=i(1160),si=i(84785),li=i(88650),di=i(38993),ci=i(80537),ui=i(11838),pi=i(63092);const mi=(0,W.Z)("div",{target:"evv7pft0"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"22px 32px 15px",position:"relative",flex:"0 0 82px"},"label:DivInfoContainer;"),hi=(0,W.Z)("span",{target:"evv7pft1"})((({theme:e})=>(0,N.GI)({theme:e,typography:"P1",fontWeight:"bold",fontFamily:"Sofia"})),"label:SpanUniqueId;");hi.defaultProps=Object.assign(Object.assign({},hi.defaultProps),{"data-e2e":"browse-username"});const gi=(0,W.Z)("span",{target:"evv7pft2"})((({theme:e})=>(0,N.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{display:"flex",alignItems:"center"},"label:SpanOtherInfos;");gi.defaultProps=Object.assign(Object.assign({},gi.defaultProps),{"data-e2e":"browser-nickname"});const vi=(0,W.Z)(ui.D,{target:"evv7pft3"})(N.wj,N.gi,{flex:"1 1 auto",":hover":{[`${hi}`]:{textDecoration:"underline"}}},(({theme:{direction:e}})=>(0,N.YJ)({direction:e,marginEnd:"12px"})),"label:StyledLink;"),yi=({theme:{direction:e}})=>[{flex:"0 0 40px",":hover":{[`~ ${vi} ${hi}`]:{textDecoration:"underline"}}},(0,N.YJ)({direction:e,marginEnd:"12px"})],bi=(0,W.Z)(ci.W,{target:"evv7pft6"})({justifySelf:"flex-end","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;");bi.defaultProps=Object.assign(Object.assign({},bi.defaultProps),{"data-e2e":"browse-follow"});var _i=i(42568);const fi=(0,a.memo)((function(e){const{uniqueId:t,videoId:i,teaParams:r}=e,s=(0,n.mp)(Qt.z,{selector:e=>e.users[t],dependencies:[t]}),{t:l,timeTranslator:d}=(0,z.e)(),c=(0,n.mp)(wt.AP,{selector:e=>null==e?void 0:e[i],dependencies:[i]}),{secret:u,forFriend:p,createTime:m,adAuthorization:h}=null!=c?c:{},{showing:g,handleCardEnter:v,handleCardLeave:y,handleItemEnter:b,handleItemLeave:_}=(0,ri.V)(),x=(0,li.zW)(s),{isShowLive:j}=x;(0,li.TB)({isShowLive:j,reportTrigger:j,user:s,enterMethod:j?"video_head_browser":"creator",autoReport:!0,reportValidator:()=>void 0!==(null==s?void 0:s.relation),once:!0});const C=(0,li.CN)(Object.assign({user:s,enterMethod:j?"video_head_browser":"creator"},r)),k=(0,a.useMemo)((()=>Object.assign(Object.assign({},C),{author_id:C.to_user_id,group_id:i})),[C,i]),w=(0,a.useMemo)((()=>{if(s)return Object.assign(Object.assign({},C),{author_id:s.id,to_user_id:s.id,group_id:i,enterMethod:"creator"})}),[s,i,C]);if(!s)return(0,f.G)(["authorInfo"]);const{nickname:S,secUid:P,verified:I}=s,T=function(e){return e?(0,W.Z)(pi.G,{target:"evv7pft4"})(yi):(0,W.Z)(ui.D,{target:"evv7pft5"})(yi)}(j);return(0,o.jsxs)(mi,{children:[(0,o.jsx)(T,Object.assign({uniqueId:t,secUid:P,onMouseEnter:b,onMouseLeave:_,isInBrowserMode:!0,teaParams:k,"data-e2e":"browse-user-avatar",onClick:e.onClick,onLinkClick:e.onLinkClick},{children:(0,o.jsx)(ni.k,Object.assign({needAnimation:!0,liveTheme:2,size:40},x),void 0)}),void 0),(0,o.jsxs)(vi,Object.assign({uniqueId:t,secUid:P,onMouseEnter:b,onMouseLeave:_,isInBrowserMode:!0,teaParams:w,onClick:e.onClick,onLinkClick:e.onLinkClick},{children:[(0,o.jsxs)(hi,{children:[t,I&&(0,o.jsx)(oi.Q,{width:14,height:14,"data-e2e":"browse-bluev"},void 0)]},void 0),(0,o.jsx)("br",{},void 0),(0,o.jsxs)(gi,{children:[S,(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,o.jsx)("span",{children:d(1e3*Number(m))},void 0)]},void 0),u&&!h&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,o.jsx)(ei.Z,{width:16,height:16,style:{fill:"#121212",opacity:.5,margin:"0 4px"}},void 0),(0,o.jsx)("span",{children:l("video_label_private")},void 0)]},void 0),p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:" · "},void 0),(0,o.jsx)(ti.Z,{style:{margin:"0 4px"},width:20,height:20},void 0),(0,o.jsx)("span",Object.assign({className:"friend"},{children:l("Friends only")}),void 0)]},void 0)]},void 0)]}),void 0),(0,o.jsx)(xi,{author:s,video:c,videoReportParams:r},void 0),g&&(0,o.jsx)(ai.C,{top:30,fixedLeft:32,onMouseEnter:v,onMouseLeave:y,uniqueId:t},void 0)]},void 0)})),xi=function({author:e,video:t,videoReportParams:i}){var a;const r=(0,n.mp)(si.G,{selector:t=>{var i,o;return(null===(o=null===(i=t.appContext)||void 0===i?void 0:i.$user)||void 0===o?void 0:o.uniqueId)===e.uniqueId},dependencies:[e.uniqueId]}),s=(0,P.Q)({query:{enter_method:"click_follow"}}),{text:l,handleFollow:d,isFollowing:c,relation:u}=(0,Ct.w)({uniqueId:e.uniqueId,onNeedLogin:s,teaParams:Object.assign({group_id:null==t?void 0:t.id},i)});return(null==t?void 0:t.scheduleTime)?(0,o.jsx)(di.Q,{video:t},void 0):r?(0,o.jsx)(_i.C,{videoId:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},void 0):(0,o.jsxs)(bi,Object.assign({size:"small",buttonTheme:c?"default":"line",onClick:d},{children:[2===u?(0,o.jsx)(ii.Z,{},void 0):null,l]}),void 0)};var ji=i(97446),Ci=i(93583),ki=i(97801),wi=i(77015);const Si=(0,a.memo)((function(e){var t;const{item:i,teaParams:n,videoReportParams:r}=e,s=(0,y.Q)(),{$user:l}=null!==(t=(0,de.L)((()=>["$user"]),[]))&&void 0!==t?t:{},d=Boolean(l),{id:c,author:u="",scheduleTime:p}=i,m=(0,Ct.p)(null==i?void 0:i.author),{nickname:h=""}=null!=m?m:{},g=(0,a.useMemo)((()=>3===(null==i?void 0:i.itemCommentStatus)||3===(null==m?void 0:m.commentSetting)),[null==m?void 0:m.commentSetting,null==i?void 0:i.itemCommentStatus]),v=(0,a.useMemo)((()=>(0,$.sA)(m,null==l?void 0:l.uid)),[m,null==l?void 0:l.uid]),{isInNewVideoDetail:b}=(0,C.xy)(),_=(0,ki.Ui)({id:c,needDispose:!b}),f=(0,P.Q)();return p?(0,o.jsxs)(wi.EN,{children:[(0,o.jsx)(fi,{onLinkClick:e.onLinkClick,uniqueId:u,videoId:c,teaParams:n},void 0),(0,o.jsxs)(wi.OH,{children:[(0,o.jsx)(Rt.Q,{onLinkClick:e.onLinkClick,item:i,e2eTag:"browse-video-desc",reportParams:n},void 0),(0,o.jsx)(wi.Gg,{scheduledTime:Number(p),height:22,fontSize:16,iconSize:20,iconMargin:4},void 0)]},void 0),(0,o.jsx)(wi.hh,{},void 0),(0,o.jsx)(wi.TK,{children:(0,o.jsx)(wi.Is,{children:s("scheduled_video_comment_unavailable")},void 0)},void 0)]},void 0):(0,o.jsxs)(wi.EN,{children:[(0,o.jsx)(fi,{onLinkClick:e.onLinkClick,uniqueId:u,videoId:c,teaParams:n},void 0),(0,o.jsxs)(wi.OH,{children:[(0,o.jsx)(Rt.Q,{onLinkClick:e.onLinkClick,item:i,e2eTag:"browse-video-desc",reportParams:n},void 0),(0,o.jsx)(Bt.C,{item:i},void 0),(0,o.jsx)(Lt._,{onLinkClick:e.onLinkClick,styleType:1,item:i,e2eTag:"browse-music",teaParams:n},void 0),(0,o.jsx)(Xt,{itemId:c,onEmbedModalVisibleChange:e.onEmbedVisibleChange,teaParams:n},void 0)]},void 0),g?(0,o.jsx)(wi.Is,Object.assign({"data-e2e":"comment-turned-off"},{children:s("comment_off")}),void 0):(0,o.jsx)(ji.$,{itemId:c,disableReply:v,ref:_,teaParams:n},void 0),d&&!g&&(0,o.jsx)(wi.TK,{children:v?(0,o.jsx)("div",{children:s("comment_disable_notfollow").replace("%@",h)},void 0):(0,o.jsx)(Ci._,{itemId:c,teaParams:r},void 0)},void 0),!d&&(0,o.jsx)(wi.TK,Object.assign({onClick:f},{children:(0,o.jsx)(wi.Vk,{children:"Please log in to comment"},void 0)}),void 0)]},void 0)}));var Pi=i(46562),Ii=i(23028),Ti=i(75595),Oi=i(76985),Di=i(17118),Mi=i(70643),Ri=i(2218);const Li=(0,a.memo)((function(e){var t,i,r;const s=(0,a.useRef)(null),l=(0,a.useRef)(null),d=(0,a.useRef)(null),c=(0,a.useRef)(null),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!0),{direction:y}=(0,Et.a)(),b=(0,a.useRef)("0"),{$abTestVersion:f,$user:x}=null!==(t=(0,de.L)((()=>["$abTestVersion","$user"]),[]))&&void 0!==t?t:{},[{duration:j,videoPercent:C,currentTime:k}]=(0,n.b7)(D.M,{selector:t=>t[e.vid]?t[e.vid]:{duration:0,videoPercent:0,currentTime:0},dependencies:[e.vid]}),w=(0,Ii.x)(f,"seekbar_persistent_and_tooltip_test"),S="v1"!==w,P=(0,Ii.x)(f,"seekbar_theme_test"),{vid:I,seek:T,videoRef:O,progressReportCallback:M,extraBottomSpace:R=!1,isXgPlayer:L,isBrowserMode:B}=e;(0,a.useEffect)((()=>{b.current=I}),[I]);const{percent:F,bindDrag:A,seek:Z}=(0,Ti.S)({direction:y,progressRef:l,circleRef:d,barRef:c,initialPercent:0,draggingStateCb:p,draggingPercentCb:T,progressReportCallback:M});(0,a.useEffect)((()=>{var e,t;null===(e=O.current)||void 0===e||e.onSeeked((()=>{setTimeout((()=>{h(!1)}),0)})),null===(t=O.current)||void 0===t||t.onSeeking((()=>{h(!0)}))}),[O.current,h]),(0,a.useEffect)((()=>{var e;"v3"===w&&(null===(e=O.current)||void 0===e?void 0:e.currentCanPlay)&&v((0,Mi.Z)(`${null==x?void 0:x.uid}`))}),[null===(i=O.current)||void 0===i?void 0:i.currentCanPlay]);const E=(0,a.useCallback)((()=>{(0,Mi.j)(`${null==x?void 0:x.uid}`)}),[null==x?void 0:x.uid]),z=(0,a.useCallback)((()=>{(0,Mi.Z)(`${null==x?void 0:x.uid}`)||E(),g||v(!0)}),[null==x?void 0:x.uid,E,g]);if(0===k||!(null===(r=null==O?void 0:O.current)||void 0===r?void 0:r.currentCanPlay)&&L&&B)return null;const $=u||m?F:C,V="ltr"===y?{left:`calc(${100*$}%)`}:{right:`calc(${100*$}%)`};return(0,o.jsx)(Di.H,Object.assign({visible:!g,text:"webapp_seekbar_tooltip",onShow:E},{children:(0,o.jsxs)(Ri.ov,Object.assign({show:u||S,extraBottomSpace:R,onMouseDown:_.UW,onClick:z},{children:[(0,o.jsxs)(Ri.yx,Object.assign({ref:s},{children:[(0,o.jsx)(Ri.MT,{ref:l,onClick:Z,onMouseDown:A},void 0),(0,o.jsx)(Ri.FL,{ref:d,style:V,onMouseDown:A},void 0),(0,o.jsx)(Ri.$_,{backgroundTheme:"v2"===P?"primary":void 0,ref:c,style:{transform:`scaleX(${$}) translateY(-50%)`},onClick:Z,onMouseDown:A},void 0)]}),void 0),(0,o.jsx)(Ri.F7,{children:"ltr"===y?`${(0,Oi.x)(k)}/${(0,Oi.x)(j)}`:`${(0,Oi.x)(j)}/${(0,Oi.x)(k)}`},void 0)]}),void 0)}),void 0)}));var Bi=i(88671),Fi=i(16929),Ai=i(41273);const Zi=(0,a.memo)((function(){var e;const t=(0,a.useRef)(null),i=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useRef)(!0),[s,l]=(0,a.useState)(!1),{mute:d,volume:c,setVolume:u}=(0,j.DZ)(),p=(0,g.fz)(w.B),{$abTestVersion:m}=null!==(e=(0,de.L)((()=>["$abTestVersion"]),[]))&&void 0!==e?e:{},h=(0,Ii.x)(m,"seekbar_theme_test"),v=(0,a.useCallback)(((e,t)=>{p.handleSwitchSound({playMode:2,volume_from:e,volume_to:t})}),[p]),y=(0,a.useRef)(d);(0,a.useEffect)((()=>{y.current=d}),[d]);const{percent:b,bindDrag:f,seek:x,update:C}=(0,Ti.S)({direction:"vertical",progressRef:t,circleRef:i,barRef:n,initialPercent:c,draggingStateCb:l,progressReportCallback:v}),k=(0,Bi.fB)((e=>{r.current?r.current=!1:u(e,y.current)}),[u],160);(0,a.useEffect)((()=>k(b)),[b]),(0,a.useEffect)((()=>{d||c!==Fi.G2||C(Fi.G2)}),[d,c,C]);const S=d?0:b,P=0===S?8:72*S;return(0,o.jsxs)(Ai.nW,Object.assign({dragging:s,onClick:_.UW},{children:[(0,o.jsx)(Ai.CY,{ref:t,onClick:x,onMouseDown:f},void 0),(0,o.jsx)(Ai.tP,{ref:i,style:{transform:`translateY(-${P}px)`},onMouseDown:f},void 0),(0,o.jsx)(Ai.SM,{backgroundTheme:"v2"===h?"primary":void 0,ref:n,style:{transform:`scaleY(${S})`},onClick:x,onMouseDown:f},void 0)]}),void 0)})),Ei=(0,a.memo)((function({itemListKey:e,currentIndex:t,needUrlDelegate:i=!0,onCloseBrowserMode:r,onNextVideo:s,onPrevVideo:l,teaParams:d,onJumpSamePage:M}){var R,L,B;const F=(0,y.Q)(),{$user:A}=null!==(R=(0,de.L)((()=>["$user"]),[]))&&void 0!==R?R:{},[Z,E]=(0,a.useState)(!1),z=(0,a.useRef)(!1),$=(0,a.useRef)(null),V=(0,a.useRef)(!1),{mute:U,setMute:G}=(0,j.s_)(2),{isUseNativePlayer:W,xgplayerVid:N}=(0,C.It)(),q=(0,a.useCallback)(((e,t="click")=>{e.preventDefault(),e.stopPropagation(),G(!U,t)}),[U,G]),H=(0,n.mp)(kt.h9,{selector:i=>{const o=i[null!=e?e:""];return o?{id:o.browserList[t],listLength:o.browserList.length}:null},dependencies:[e,t]}),[Y,Q]=(0,n.b7)(wt.AP,{selector:e=>{var t;return e[null!==(t=null==H?void 0:H.id)&&void 0!==t?t:""]},dependencies:[H]}),J=null!==(L=null==Y?void 0:Y.id)&&void 0!==L?L:"",K=(0,Ct.p)(null==Y?void 0:Y.author);(0,ki.xf)({author:K,item:Y,currentIndex:t,itemListKey:e,needUrlDelegate:i,onCloseBrowserMode:r});const X=null!==(B=null==H?void 0:H.listLength)&&void 0!==B?B:0,ee=t<X-1,te=(0,a.useCallback)(((e="click")=>{Q.postLikeVideo(Object.assign({id:J,enter_method:e},d))}),[Q,J,d]),ie=(0,P.X)({action:te,modalConfig:{query:{enter_method:"click_like"}}}),oe=(0,n.mp)(x.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),ne=(0,n.qj)(x.bg),ae=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),Y&&ne.removeBlockVideo(Y.id)}),[ne,Y]),[re,se]=(0,a.useState)(!1);(0,a.useEffect)((()=>{se(!0)}),[]);const{showVideoMask:le,maskType:ce,videoMaskTitle:ue,videoMaskDesc:pe,icon:me,videoMaskFirstButtonText:he,videoMaskSecondButtonText:ge}=(0,St.g)({playMode:2,item:null!=Y?Y:{},isLogin:Boolean(A)}),[{photoSensitiveVideosSetting:ve,hideMaskTempVideoId:ye},be]=(0,n.b7)(Pt.P),_e=le&&ye!==J,{handleLinkClick:fe,handleClose:xe,handleNext:je,handlePrev:Ce,preventDefault:ke,videoPlayerRef:we,togglePlay:Se,isInputEmpty:Pe,showLeaveModal:Ie,handleConfirmLeave:Te,handleCancelLeave:Oe}=(0,ki.q5)({onCloseBrowserMode:r,onNextVideo:s,onPrevVideo:l,pause:Z,shouldPause:_e,setPause:e=>{E(e),z.current=e},embedVisibleRef:V,group_id:J,handleLikeClick:ie,author_id:null==Y?void 0:Y.authorId,itemListKey:e,onJumpSamePage:M}),De=(0,a.useCallback)((()=>{E(!0),z.current=!0}),[]),Me=(0,a.useRef)(!1),Re=(0,a.useCallback)((e=>{var t,i;null===(i=null===(t=we.current)||void 0===t?void 0:t.seek)||void 0===i||i.call(t,e)}),[we]),Le=(0,a.useCallback)((()=>{Me.current=!0,setTimeout((()=>{Me.current=!1}),500)}),[]),Be=(0,a.useCallback)((()=>{Me.current&&(Se(),Me.current=!1)}),[Se]);(0,ki._0)({showLeaveModal:Ie,group_id:J});const Fe=(0,P.X)({action:(0,a.useCallback)((e=>{if(!Me.current)return;const{clientX:t,clientY:i}=e;new I.B(t,i).emit(),Q.postLikeVideo({id:J,forceLike:!0}),Me.current=!1}),[J,Q])}),Ae=(0,b.D)((()=>({onClick:Be,onDoubleClick:Fe})),[Fe,Be]),Ze=(0,Dt.Q)({item:Y,onShow:_.NS}),Ee=(0,a.useCallback)((e=>{V.current=e}),[]),ze=U?c.Z:u.Z,$e=(0,ki.om)({handleNext:je,handlePrev:Ce,hasNext:ee,currentIndex:t,itemListKey:e});(0,j.$v)(2);const{showModal:Ve,hideModal:Ue}=(0,k.J)();(0,a.useEffect)((()=>(Ve(!0),()=>{Ue()})),[Ue,Ve]),(0,a.useEffect)((()=>{var e,t;Y&&oe.includes(Y.id)&&(null===(t=null===(e=we.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e))}),[oe,Y,we]),(0,a.useEffect)((()=>{var e;(null==Y?void 0:Y.video)||r({playProgress:null===(e=we.current)||void 0===e?void 0:e.currentTime})}),[Y,r,we]);const{showAnalyticsButton:Ge,showAnalyticsModal:We,handleOpenAnalyticsModal:Ne,handleCloseAnalyticsModal:qe}=(0,ki.zX)(Y),He=(0,a.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:t="",format:i="",videoQuality:o="",encodeUserTag:n="",codecType:a="",definition:r=""}={},authorId:s="",id:l="",scheduleTime:c}=null!=Y?Y:{},u=Object.assign({author_id:s,group_id:l,is_scheduled:Boolean(c),bitrate:Number(e),encodedType:t,format:i,videoQuality:o,encodeUserTag:n,codecType:a,definition:r},d);return $.current=u,u}),[Y,d]),Ye=(0,g.fz)(w.B),Qe=(0,a.useCallback)(((e,t)=>{var i,o;Ye.handleSeekBarClick(Object.assign({fromPercent:e,toPercent:t,video_length:null!==(o=null===(i=we.current)||void 0===i?void 0:i.duration)&&void 0!==o?o:0,is_pause:z.current,play_mode:"browser_mode"},$.current))}),[Ye,we]),Je=(0,n.qj)(D.M),Ke=(0,a.useCallback)((e=>{var t,i,o;const n=null===(t=we.current)||void 0===t?void 0:t.duration;Je.setVideoInfo({videoId:J,videoPercent:e,currentTime:null!==(o=null===(i=we.current)||void 0===i?void 0:i.currentTime)&&void 0!==o?o:0,duration:n})}),[J,Je,we]),Xe=(0,a.useRef)(-1),et=(0,a.useRef)(void 0),tt=(0,a.useRef)(-1),it=(0,a.useRef)(0),ot=(0,a.useCallback)((()=>{clearTimeout(tt.current),it.current=0}),[]),[nt,at]=(0,n.b7)(Tt.f,{selector:e=>{var t;return Number(null===(t=e.currentVideo)||void 0===t?void 0:t.index)},dependencies:[]}),rt=(0,g.fz)(S.W),st=(0,a.useRef)(!1);(0,a.useEffect)((()=>{var e,i,o,n,a,r;_e||(at.updateVideo({currentVideo:{id:J,index:t,mode:2},playProgress:null!==(i=null===(e=we.current)||void 0===e?void 0:e.currentTime)&&void 0!==i?i:0}),null===(n=null===(o=we.current)||void 0===o?void 0:o.play)||void 0===n||n.call(o),ot()),t!==Xe.current&&(-1!==Xe.current&&(be.setHideMaskTempVideoId(""),re&&se(!1),st.current=!1),ot(),void 0===ve&&"photo_sensitive"===et.current&&be.setSkipPhotoSensitive(!1),le?("photo_sensitive_denied"===ce?rt.handleShowPhotosensitiveRemoved({group_id:J}):rt.handleShowMaskLayer({scenario:"general_sensitive"===ce?"general":"photosensitive",group_id:J}),tt.current=window.setInterval((()=>{var e,t,i;it.current++>100&&ot(),(null===(e=we.current)||void 0===e?void 0:e.currentCanPlay)&&(null===(i=(t=we.current).pause)||void 0===i||i.call(t),ot())}),50)):null===(r=null===(a=we.current)||void 0===a?void 0:a.play)||void 0===r||r.call(a),Xe.current=t,et.current=ce)}),[le,_e,we,t,ce,be,ve,ot,re,ye,J,at,rt]);const lt=(0,a.useCallback)((e=>{xe(e),ot()}),[xe,ot]),dt=(0,a.useCallback)((e=>{if((0,_.NS)(e),"general_sensitive"===ce){if(st.current)return;ee?je(e):X>1?Ce(e):xe(e),rt.handleMaskLayerClickSkip({scenario:"general",group_id:J}),v.h.open({content:F("photosensitive_skepped_toast"),duration:3,widthType:"half"}),st.current=!0}else be.setSkipPhotoSensitive(!1),ot(),rt.handleMaskLayerClickWatch({scenario:"photosensitive",group_id:J})}),[ce,ee,X,F,je,Ce,xe,be,ot,rt,J]),ct=(0,a.useCallback)((e=>{if((0,_.NS)(e),"general_sensitive"===ce)be.setHideMaskTempVideoId(J),ot(),rt.handleMaskLayerClickWatch({scenario:"general",group_id:J});else{if(st.current)return;ee?je(e):1===X?(null==A?void 0:A.uid)===(null==Y?void 0:Y.authorId)&&xe(e):Ce(e),be.setSkipPhotoSensitive(!0),rt.handleMaskLayerClickSkip({scenario:"photosensitive",group_id:J}),v.h.open({content:F("photosensitive_skepped_toast"),duration:3,widthType:"half"}),st.current=!0}}),[ce,be,J,ot,rt,ee,F,je,X,null==A?void 0:A.uid,null==Y?void 0:Y.authorId,xe,Ce]),ut=(0,a.useRef)(null),pt=(0,a.useRef)([]),mt=(0,a.useRef)(-1),ht=(0,a.useRef)((new Date).getTime()),gt=(0,a.useCallback)((e=>{(0,_.NS)(e),mt.current&&clearTimeout(mt.current),mt.current=window.setTimeout((()=>{pt.current=[]}),400);const t=(new Date).getTime(),i=e.wheelDelta||-e.deltaY||-e.detail,o=Math.max(-1,Math.min(1,i)),n=t-ht.current;pt.current=[...pt.current,Math.abs(i)],ht.current=t,n>400&&1===pt.current.length&&(o<0?je(e,"scroll"):Ce(e,"scroll"))}),[je,Ce]);if(!(null==Y?void 0:Y.video))return(0,f.G)(["item.video"]);const{video:{cover:vt,playAddr:yt="",width:bt=1,height:_t=1},id:ft,itemMute:xt,warnInfo:Rt,scheduleTime:Lt}=Y,Bt=(bt/_t||1)>=1,Ft=Boolean(null==Rt?void 0:Rt[0])||Boolean(Lt);return(0,o.jsxs)(Pi.E9,{children:[(0,o.jsxs)(Pi.ik,Object.assign({onWheel:gt,ref:ut,onClick:Ae,onMouseDown:Le},{children:[(0,o.jsx)(Pi.lI,{style:{backgroundImage:`url(${vt})`}},void 0),(0,o.jsxs)(Pi.L7,{children:[(0,o.jsx)(Ot.S,{isInExperiment:!W,poster:vt,horizontal:Bt,mode:2,ref:we,desc:Y.desc,id:ft,playUrl:yt,index:t,itemMute:Boolean(xt),teaParams:He,playerTestVid:N,onVideoError:De,onTimeUpdate:Ke,e2eTag:"browse-video"},ft),(0,o.jsx)(Li,{seek:Re,videoRef:we,vid:ft,progressReportCallback:Qe,extraBottomSpace:Ft,isXgPlayer:!W,isBrowserMode:!0},void 0),(0,o.jsx)(Ri.Am,{onMouseDown:_.UW},void 0),(0,o.jsx)(Ri.Gb,{onMouseDown:_.UW},void 0),oe.includes(Y.id||"")?(0,o.jsx)(Pi.qq,{children:(0,o.jsxs)(Pi.uc,{children:[(0,o.jsx)(Pi.Vz,{children:(0,o.jsx)(p.Z,{width:40,height:40},void 0)},void 0),(0,o.jsx)(Pi.Eb,{children:F("Web_report_thanks_for_report")},void 0),(0,o.jsx)(Pi.vN,{children:F("Web_report_hide_video")},void 0),(0,o.jsx)(Pi.b7,Object.assign({onClick:ae},{children:F("Web_report_show_video")}),void 0)]},void 0)},void 0):null,_e&&(0,o.jsx)(It.a,{playMode:2,icon:me,title:ue,desc:pe,firstButtonText:he,secondButtonText:ge,onClickFirstButton:dt,onClickSecondButton:ct},void 0)]},void 0),Z&&(0,o.jsx)(Pi.Sd,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:70,height:70,fill:"#fff"},{children:(0,o.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(0,o.jsx)(Pi.Sf,Object.assign({onClick:lt,onMouseDown:_.UW},{children:(0,o.jsx)(m.Z,{width:18,height:18,fill:"#fff"},void 0)}),void 0),(0,o.jsx)(Pi.ps,{width:40,height:40,onClick:ke},void 0),(0,o.jsxs)(Pi.oT,Object.assign({widerBottom:Ft,onMouseDown:_.UW},{children:[(0,o.jsx)(Zi,{},void 0),(0,o.jsx)(Pi.sL,Object.assign({onClick:q,widerBottom:Ft},{children:(0,o.jsx)(ze,{width:40,height:40,fill:"none"},void 0)}),void 0)]}),void 0),$e,(0,o.jsxs)(Pi.Q9,Object.assign({onClick:Ze},{children:[(0,o.jsx)(Pi.Y1,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:16,height:15},{children:(0,o.jsx)("use",{xlinkHref:"#svg-flag"},void 0)}),void 0),F("Report")]}),void 0),Ge&&!Lt&&(0,o.jsxs)(Pi.oH,Object.assign({onClick:Ne},{children:[(0,o.jsx)(h.Z,{width:20,height:20,fill:"#fff",style:{marginInlineEnd:"6px"}},void 0),F("view_analytics")]}),void 0),(null==Rt?void 0:Rt[0])&&(0,o.jsx)(Pi.zo,{children:(0,o.jsx)(T.p,{info:Rt[0]},void 0)},void 0),Boolean(Lt)&&(0,o.jsx)(Pi.zo,{children:(0,o.jsx)(O.W,{isTextAlignStart:!0,scheduledTime:Number(Lt),height:56,fontSize:14,iconSize:18.33,iconMargin:4.83},void 0)},void 0)]}),void 0),(0,o.jsx)(Si,{item:Y,teaParams:d,onLinkClick:fe,onEmbedVisibleChange:Ee,videoReportParams:He},void 0),(0,o.jsx)(Mt.S,{visible:Ie,needLeaveCheck:!Pe,onConfirmLeave:Te,onCancelLeave:Oe},void 0),(0,o.jsx)(jt,{id:ft,show:We,onClose:qe},void 0)]},void 0)}));function zi(e,t=!0){return function(i){const c=s=>{const{closeBrowserMode:c,isBrowserModeShowing:u,showBrowserMode:p,teaParams:m}=(0,l.J)(),[h,g]=(0,n.b7)(d.O),v=(0,r.k6)(),y=(0,a.useCallback)((({playProgress:e,fromPopState:i,shouldPause:o}={})=>{!i&&t&&v.goBack(),c({playProgress:e,shouldPause:o})}),[c,v]),b=(0,a.useCallback)((()=>{g.clickSamePage()}),[g]),_=(0,a.useCallback)((()=>(u&&c(void 0),!0)),[c,u]);(0,a.useEffect)((()=>{g.setItemListKey(e)}),[g]);const f=(0,a.useMemo)((()=>({closeBrowserMode:c,showBrowserMode:p,isBrowserModeShowing:u})),[c,u,p]);return(0,o.jsxs)(l._.Provider,Object.assign({value:f},{children:[(0,o.jsx)(i,Object.assign({},s),void 0),(0,o.jsx)(r.NL,{message:_},void 0),Boolean(u)&&(0,o.jsx)(Ei,{itemListKey:h.itemListKey,currentIndex:h.currentIndex,onNextVideo:g.handleNextVideo,onPrevVideo:g.handlePrevVideo,needUrlDelegate:t,onCloseBrowserMode:y,teaParams:m,onJumpSamePage:b},void 0)]}),void 0)};return c.displayName=`WithBrowserMode(${(0,s.i)(i)})`,c}}},97801:(e,t,i)=>{i.d(t,{xf:()=>M,q5:()=>L,Ui:()=>B,_0:()=>F,om:()=>A,zX:()=>Z,AS:()=>E});var o,n=i(11040),a=i(39903),r=i(9236),s=i(16926),l=i(40316),d=i.n(l),c=i(53586),u=i.n(c),p=i(90293),m=i(91051),h=i(21041),g=i(29046),v=i(66958),y=i(15073),b=i(52432),_=i(14870),f=i(80910),x=i(53304),j=i(3483),C=i(93328),k=i(34708),w=i(65763),S=i(33104),P=i(74472),I=i(67862),T=i(19330),O=i(52053),D=i(46562);function M({itemListKey:e,item:t,author:i,needUrlDelegate:o,onCloseBrowserMode:n}){const{search:a}=(0,h.TH)(),r=(0,h.k6)(),s=(0,m.useRef)(!1);(0,m.useEffect)((()=>{const e=()=>{n({fromPopState:!0})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),(0,m.useEffect)((()=>{if(!t||!e||!o)return;const{scheduleTime:n,id:r,author:l=""}=t,c=n?(0,v.yl)({uniqueId:l,secUid:null==i?void 0:i.secUid}):(0,p.stringifyUrl)({url:(0,v.fH)({uniqueId:l,videoId:r,secUid:null==i?void 0:i.secUid}),query:Object.assign(Object.assign({},d()((0,p.parse)(a),"sender_device","sender_web_id","item_id")),{is_from_webapp:"v1",is_copy_url:"1"})},{skipNull:!0});s.current?window.history.replaceState(window.history.state,"video-detail",c):(window.history.pushState(window.history.state,"video-detail",c),s.current=!0)}),[null==i?void 0:i.secUid,r,t,e,o,a])}!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Prev=2]="Prev",e[e.Next=3]="Next",e[e.Redirect=4]="Redirect"}(o||(o={}));const R=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function L({onCloseBrowserMode:e,onNextVideo:t,onPrevVideo:i,pause:o,setPause:n,embedVisibleRef:a,group_id:l,handleLikeClick:d,author_id:c,itemListKey:u,onJumpSamePage:p,shouldPause:v}){const[x,j]=(0,m.useState)(!1),[k,S]=(0,m.useState)(0),[{isInputEmpty:P,noReplyUser:T},{setNeedClearInput:O}]=(0,r.b7)(I.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),D=(0,s.fz)(b.B),{mute:M,setMute:L}=(0,_.s_)(2),B=(0,m.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),L(!M,"keydown")}),[M,L]),{enhanceVideoConsumptionVersion:F="v1"}=(0,C.m)(),A=["v2","v3"].includes(F),Z=(0,r.mp)(y.bg,{selector:({showing:e})=>e,dependencies:[]}),E=(0,r.mp)(w.r,{selector:e=>e.isOpen,dependencies:[]}),z=(0,m.useRef)(null),$=(0,m.useCallback)((()=>{var e,t,i,a;o?null===(t=null===(e=z.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e):null===(a=null===(i=z.current)||void 0===i?void 0:i.pause)||void 0===a||a.call(i),n(!o)}),[o,n]),{pathname:V}=(0,h.TH)(),U=(0,h.k6)(),G=(0,m.useCallback)((t=>{var i;R(t),P&&T?e({playProgress:null===(i=z.current)||void 0===i?void 0:i.currentTime,shouldPause:v}):(S(1),j(!0))}),[P,T,v,e]),W=(0,m.useRef)(""),N=(0,m.useCallback)(((e,t)=>{if(t.includes(V)&&V!==g.Ad.home)return G(e),void p();P&&T||(R(e),S(4),j(!0),W.current=t)}),[G,P,T,V,p]),q=(0,m.useCallback)(((e,i="click")=>{if(e&&R(e),P&&T){t(),n(!1);const e={direction:"next",enter_method:i,play_mode:2,group_id:l,author_id:c,skipped_group_num:0,skipped_group_ids:""};D.handleVideoChange(e),"foryou"===u&&D.handleHotVideoChange(e)}else S(3),j(!0)}),[P,T,t,n,D,l,c,u]),H=(0,m.useCallback)(((e,t="click")=>{if(e&&R(e),P&&T){i(),n(!1);const e={direction:"prev",enter_method:t,play_mode:2,group_id:l,author_id:c,skipped_group_num:0,skipped_group_ids:""};D.handleVideoChange(e),"foryou"===u&&D.handleHotVideoChange(e)}else S(2),j(!0)}),[P,T,i,n,D,l,c,u]),Y=(0,m.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||E)return;const t=new Map([[27,()=>{Z||a.current||G(e)}],[40,()=>{A&&q(e,"keydown")}],[32,()=>{$()}],[39,()=>{A||q(e,"keydown")}],[38,()=>{A&&H(e,"keydown")}],[37,()=>{A||H(e,"keydown")}],[76,()=>{"v3"===F&&d("keydown")}],[77,()=>{"v3"===F&&B(e)}]]),{keyCode:i}=e;t.has(i)&&(e.preventDefault(),t.get(i)())}),[a,G,d,q,H,B,E,Z,A,$,F]),Q=(0,s.fz)(f.y),J=(0,m.useCallback)((()=>{var o;switch(k){case 1:e({playProgress:null===(o=z.current)||void 0===o?void 0:o.currentTime,shouldPause:v});break;case 2:i(),n(!1);break;case 3:t(),n(!1);break;case 4:W.current&&U.push(W.current)}j(!1),O(!0),Q.handleLeaveComment({group_id:l})}),[Q,k,l,U,v,e,t,i,O,n]),K=(0,m.useCallback)((()=>{S(0),j(!1),Q.handleKeepComment({group_id:l})}),[Q,l]);return(0,m.useEffect)((()=>(document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)})),[Y]),{handleLinkClick:N,handleClose:G,handleNext:q,handlePrev:H,preventDefault:R,togglePlay:$,videoPlayerRef:z,showLeaveModal:x,isInputEmpty:P,handleConfirmLeave:J,handleCancelLeave:K}}function B({id:e,needDispose:t=!0}){const i=(0,r.qj)(T.x),o=(0,m.useRef)(null),n=(0,m.useCallback)((()=>{i.fetchComment({aweme_id:e})}),[i,e]);return(0,m.useEffect)((()=>()=>{t&&(i.dispose$(),i.setCommentItem({awemeId:""}))}),[i,t]),(0,x.s)({elemRef:o,onHitBottom:n,bottomThreshold:200,throttle:200}),o}function F({showLeaveModal:e,group_id:t}){const i=(0,s.fz)(f.y);(0,m.useEffect)((()=>{e&&i.handleClose({group_id:t})}),[t,i,e]),(0,m.useEffect)((()=>()=>{i.handleClose({group_id:t})}),[t,i])}const A=({currentIndex:e,handlePrev:t,hasNext:i,handleNext:o,itemListKey:r})=>{const{isEnhanceVideoConsumptionV1:s,enhanceVideoConsumptionVersion:l}=(0,C.m)(),d=(0,m.useCallback)(u()((e=>{r&&e.srcElement.classList.value.includes("BasicVideo")&&(e.deltaY>=1?o(e,"scroll"):e.deltaY<=-1&&t(e,"scroll"))}),100),[o,t]);return(0,m.useEffect)((()=>("v3"===l&&window.addEventListener("wheel",d),()=>{"v3"===l&&window.removeEventListener("wheel",d)}))),s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.o1,Object.assign({disabled:0===e,isPrev:!0,onClick:t,"data-e2e":"arrow-left"},{children:(0,n.jsx)(a.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0),(0,n.jsx)(D.o1,Object.assign({disabled:!i,isPrev:!1,onClick:o,"data-e2e":"arrow-right"},{children:(0,n.jsx)(a.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0)]},void 0):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.He,Object.assign({disabled:0===e,isPrev:!0,onClick:t,isUpAndDown:!s,"data-e2e":"arrow-left"},{children:(0,n.jsx)(a.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0),(0,n.jsx)(D.He,Object.assign({disabled:!i,isPrev:!1,onClick:o,isUpAndDown:!s,"data-e2e":"arrow-right"},{children:(0,n.jsx)(a.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0)]},void 0)},Z=e=>{var t,i;let o=!0;const n=(0,S.p)(null==e?void 0:e.author),{$user:a={}}=null!==(t=(0,k.L)((()=>["$user"]),[]))&&void 0!==t?t:{},[r,l]=(0,m.useState)(!1),d=(0,s.fz)(j._e),c=(0,m.useCallback)((e=>{e.stopPropagation(),d.handleClickAnalyticsButton(),l(!0)}),[d]),u=(0,m.useCallback)((()=>{l(!1)}),[]);a||(o=!1);const{secUid:p,analyticsOn:h}=null!=a?a:{};return p===(null!==(i=null==n?void 0:n.secUid)&&void 0!==i?i:"")&&h||(o=!1),{showAnalyticsButton:o,showAnalyticsModal:r,handleOpenAnalyticsModal:c,handleCloseAnalyticsModal:u}};function E(e,t){const{listLength:i,statusCode:o}=(0,r.mp)(P.h9,{selector:t=>{var i,o,n;return{listLength:null!==(o=null===(i=t[e])||void 0===i?void 0:i.list.length)&&void 0!==o?o:0,statusCode:null===(n=t[e])||void 0===n?void 0:n.statusCode}},dependencies:[]}),n=(0,r.mp)(O.O,{selector:e=>e.currentIndex,dependencies:[]});(0,m.useEffect)((()=>{0===o&&(!i||i-n<=3)&&t()}),[n,t,i,o])}},46562:(e,t,i)=>{i.d(t,{b7:()=>f,sL:()=>A,oH:()=>$,lI:()=>x,TK:()=>R,E9:()=>m,lk:()=>D,Is:()=>h,qq:()=>g,uc:()=>v,vN:()=>_,Vz:()=>y,Eb:()=>b,Q9:()=>L,ik:()=>E,L7:()=>j,oT:()=>Z,zo:()=>z,o$:()=>M,Sf:()=>w,hy:()=>O,ps:()=>S,o1:()=>P,He:()=>I,Y1:()=>B,Sd:()=>C});var o,n,a=i(56277),r=i(95918),s=i(27918),l=i(91051);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},d.apply(this,arguments)}const c=function(e){return l.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),o||(o=l.createElement("g",{fillRule:"evenodd",clipPath:"url(#logo-icon_svg__a)",clipRule:"evenodd"},l.createElement("path",{fill:"#000",d:"M0 36c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12H12C5.373 0 0 5.372 0 12v24z"}),l.createElement("path",{fill:"#25F4EE",d:"M30.636 6.288A9.23 9.23 0 0130.35 4h-6.97v26.133c0 3.014-2.056 5.457-5.062 5.457-3.006 0-5.443-2.443-5.443-5.456 0-3.014 2.437-5.457 5.443-5.457.6 0 .797.098 1.337.278v-7.051c-.562-.079-.754-.12-1.337-.12C11.515 17.785 6 23.315 6 30.135c0 6.82 5.515 12.349 12.318 12.349 6.708 0 12.357-5.375 12.51-12.062V17.049c2.528 1.733 5.395 2.746 8.689 2.746V13.19c-4.275 0-7.866-2.933-8.88-6.902z"}),l.createElement("path",{fill:"#fff",d:"M33.12 8.77a9.23 9.23 0 01-.287-2.288h-6.971v26.134c0 3.014-2.055 5.456-5.061 5.456s-5.443-2.442-5.443-5.456a5.45 5.45 0 015.443-5.456c.6 0 .797.097 1.337.277v-7.05c-.562-.08-.754-.12-1.337-.12-6.803 0-12.318 5.529-12.318 12.349S13.998 44.965 20.8 44.965c6.707 0 12.357-5.374 12.51-12.062V19.531c2.528 1.733 5.395 2.747 8.689 2.747v-6.606c-4.275 0-7.866-2.933-8.88-6.901z"}),l.createElement("path",{fill:"#FE2C55",d:"M15.92 35.033a5.446 5.446 0 01-.562-2.416c0-3.014 2.437-5.457 5.443-5.457.523 0 .739.074 1.143.212l.194.066v-7.051l-.21-.03c-.411-.059-.623-.09-1.127-.09-.386 0-.769.018-1.146.053v4.635l-.194-.066c-.404-.138-.62-.212-1.143-.212-3.006 0-5.443 2.443-5.443 5.457a5.46 5.46 0 003.045 4.9zm-4.972 4.997a12.29 12.29 0 009.853 4.935c6.707 0 12.357-5.374 12.51-12.061V19.532c2.528 1.733 5.395 2.746 8.689 2.746v-6.605a9.2 9.2 0 01-2.483-.341v4.463c-3.294 0-6.161-1.013-8.69-2.746v13.372c-.152 6.688-5.802 12.062-12.509 12.062-2.763 0-5.314-.912-7.37-2.453zm23.455-28.401a9.206 9.206 0 01-3.715-5.146h2.145a9.155 9.155 0 001.57 5.146z"}))),n||(n=l.createElement("defs",null,l.createElement("clipPath",{id:"logo-icon_svg__a"},l.createElement("rect",{width:48,height:48,fill:"#fff",rx:10.5})))))};var u=i(2218),p=i(41273);const m=(0,r.Z)("div",{target:"e11s2kul0"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.BGPrimary,zIndex:1e3,display:"flex",flexDirection:"row"})),"label:DivBrowserModeContainer;"),h=(0,r.Z)("div",{target:"e11s2kul1"})((({theme:e})=>[(0,s.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),g=(0,r.Z)("div",{target:"e11s2kul2"})((({theme:e})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute",zIndex:2})),"label:DivMask;"),v=(0,r.Z)("div",{target:"e11s2kul3"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),y=(0,r.Z)("div",{target:"e11s2kul4"})((({theme:e})=>({width:"106px",height:"106px",padding:"33px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),b=(0,r.Z)("div",{target:"e11s2kul5"})((({theme:e})=>({maxWidth:"419px",margin:"24px auto 0",fontSize:"24px",lineHeight:"32px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),_=(0,r.Z)("div",{target:"e11s2kul6"})((({theme:e})=>({maxWidth:"419px",margin:"16px auto 0",fontSize:"18px",lineHeight:"24px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),f=(0,r.Z)("button",{target:"e11s2kul7"})((({theme:e})=>({maxWidth:"419px",height:"56px",cursor:"pointer",margin:"224px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"16px",fontSize:"18px",lineHeight:"24px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),x=(0,r.Z)("div",{target:"e11s2kul8"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",left:"50%",top:"50%",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover"},"label:DivBlurBackground;"),j=(0,r.Z)("div",{target:"e11s2kul9"})({position:"relative",width:"100%",height:"100%",cursor:"pointer",":hover":{[`${u.ov}`]:{opacity:1}}},"label:DivVideoWrapper;"),C=(0,r.Z)("svg",{target:"e11s2kul10"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:SvgPlayIcon;");C.defaultProps=Object.assign(Object.assign({},C.defaultProps),{"data-e2e":"browse-video-play"});const k=(0,r.Z)("button",{target:"e11s2kul11"})((({theme:{colors:e}})=>({position:"absolute",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",background:e.ConstLineInverse,borderRadius:"50%",cursor:"pointer",border:"none",outline:"none",fontsize:0})),"label:ButtonBasicButtonContainer;"),w=(0,r.Z)(k,{target:"e11s2kul12"})((({theme:e})=>({top:"20px",transition:"opacity .3s",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,s.YJ)({direction:e,start:"20px"})),"label:StyledCloseIconContainer;");w.defaultProps=Object.assign(Object.assign({},w.defaultProps),{"data-e2e":"browse-close"});const S=(0,r.Z)(c,{target:"e11s2kul13"})({position:"absolute",zIndex:1,top:"20px",borderRadius:"100px"},(({theme:{direction:e}})=>(0,s.YJ)({direction:e,start:"84px"})),"label:StyledLogo;");S.defaultProps=Object.assign(Object.assign({},S.defaultProps),{"data-e2e":"browse-logo"});const P=(0,r.Z)(k,{target:"e11s2kul14"})((({isPrev:e,theme:{direction:t,colors:i}})=>{const o=e?"start":"end",n=(0,s.$K)(t,o);return{[n]:"20px",transform:"left"===n?"rotate(180deg)":void 0,top:"50%",marginTop:"-24px",":disabled":{display:"none"},background:i.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}}}),"label:StyledVideoSwitch;"),I=(0,r.Z)(k,{target:"e11s2kul15"})((({isPrev:e,theme:{colors:t}})=>({transform:e?"rotate(-90deg)":"rotate(90deg)",top:e?"calc(50% - 48px)":"calc(50% + 8px)",marginTop:"-24px",":disabled":{display:"none"},background:t.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,s.YJ)({direction:e,end:"20px"})),"label:StyledVideoSwitchV2;"),T=(0,r.Z)("div",{target:"e11s2kul16"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0"},"label:DivContentContainer;"),O=(0,r.Z)(T,{target:"e11s2kul17"})((({isOpen:e=!1,isRTL:t=!1})=>({flex:"unset",width:"360px",height:"100%",padding:"0",transform:`translateX(${e?0:t?-100:100}%)`,transition:"transform 200ms cubic-bezier(.65, 0, .35, 1)"})),"label:StyledDivContentContainerSwiper;"),D=(0,r.Z)("div",{target:"e11s2kul18"})((({theme:e})=>[(0,s.GI)({theme:e,typography:"P1",fontWeight:"semiBold",fontFamily:"Proxima"}),{color:e.colors.TextPrimary,height:"64px",background:e.colors.BGPlaceholderOpaque,boxSizing:"border-box",padding:"16px 16px 24px",borderRadius:"4px"}]),"label:DivCommentTitle;"),M=(0,r.Z)(a.Z,{target:"e11s2kul19"})((({theme:{direction:e}})=>[(0,s.YJ)({direction:e,end:"24px"}),{position:"absolute",top:"20px",cursor:"pointer"}]),"label:StyledCloseBtn;"),R=(0,r.Z)("div",{target:"e11s2kul21"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 16px",padding:"16px 0"})),"label:DivBottomCommentContainer;"),L=(0,r.Z)("div",{target:"e11s2kul22"})((({theme:e})=>[(0,s.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse4",fontFamily:"Sofia"}),{padding:"10px 16px",backgroundColor:e.colors.ConstBGContainer,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100px",position:"absolute",top:"20px",cursor:"pointer",color:e.colors.ConstTextInverse,":hover":{opacity:.7},":active":{opacity:.5}},(0,s.YJ)({direction:e.direction,end:"20px"})]),"label:DivReportText;");L.defaultProps=Object.assign(Object.assign({},L.defaultProps),{"data-e2e":"browse-report"});const B=(0,r.Z)("svg",{target:"e11s2kul23"})((({theme:{direction:e}})=>(0,s.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:SvgIconFlag;");B.defaultProps={fill:"currentColor",width:"1em",height:"1em"};const F=(0,r.Z)("button",{target:"e11s2kul24"})(s.Ph,(({theme:e,widerBottom:t=!1})=>({position:"absolute",bottom:t?"60px":"20px",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,s.YJ)({direction:e,end:"20px"})),"label:ButtonVoiceControl;");F.defaultProps=Object.assign(Object.assign({},F.defaultProps),{"data-e2e":"browse-sound"});const A=(0,r.Z)("button",{target:"e11s2kul25"})(s.Ph,(({theme:e})=>({display:"flex",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),"label:ButtonVoiceControlNew;");A.defaultProps=Object.assign(Object.assign({},A.defaultProps),{"data-e2e":"browse-sound"});const Z=(0,r.Z)("div",{target:"e11s2kul26"})((({widerBottom:e=!1})=>({position:"absolute",zIndex:1,bottom:e?"60px":"20px",[`:hover ${p.nW}`]:{opacity:"1"}})),(({theme:{direction:e}})=>(0,s.YJ)({direction:e,end:"20px"})),"label:DivVoiceControlContainer;"),E=(0,r.Z)("div",{target:"e11s2kul27"})((({theme:{colors:e}})=>({flex:"1 1 896px",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivVideoContainer;"),z=(0,r.Z)("div",{target:"e11s2kul28"})({position:"absolute",bottom:0,left:0,right:0},"label:DivWarnInfoPosition;"),$=(0,r.Z)("div",{target:"e11s2kul30"})((({theme:{colors:e}})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:"84px",left:"50%",transform:"translateX(-50%)",fontWeight:500,fontSize:"18px",padding:"11.5px 24px",borderRadius:"52px",color:e.ConstTextInverse,background:e.ToastDefault,cursor:"pointer",":hover":{opacity:.7},":active":{opacity:.5}})),"label:DivAnalyticsWrapper;")},2218:(e,t,i)=>{i.d(t,{yx:()=>a,F7:()=>r,MT:()=>s,$_:()=>l,FL:()=>d,ov:()=>p,Gb:()=>m,Am:()=>h});var o=i(95918),n=i(27918);const a=(0,o.Z)("div",{target:"e1rpry1m0"})({width:"100%",height:"24px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),r=(0,o.Z)("div",{target:"e1rpry1m1"})({flex:"0 0 88px",maxWidth:"88px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"24px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),s=(0,o.Z)("div",{target:"e1rpry1m2"})({height:"4px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer"},"label:DivSeekBarProgress;"),l=(0,o.Z)("div",{target:"e1rpry1m3"})((({theme:{direction:e,colors:t},backgroundTheme:i})=>({height:"4px",width:"100%",backgroundColor:"primary"===i?t.Primary:t.BGPrimary,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),d=(0,o.Z)("div",{target:"e1rpry1m4"})((({theme:{direction:e}})=>(0,n.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),c="calc(100% - 160px)",u="translateX(-50%)",p=(0,o.Z)("div",{target:"e1rpry1m5"})((({show:e,extraBottomSpace:t})=>({width:c,height:"24px",paddingInline:"16px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:t?"68px":"28px",cursor:"initial",display:"flex",alignItems:"center",left:"50%",transform:u,maxWidth:"56.25vh",[`:hover ${s}`]:{height:"6px"},[`:hover ${l}`]:{height:"6px"},[`:hover ${d}`]:{display:"block"},"@media (max-width: 900px)":{display:"none"}})),"label:DivVideoControlContainer;"),m=(0,o.Z)("div",{target:"e1rpry1m6"})({width:c,height:"28px",position:"absolute",bottom:0,left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlBottom;"),h=(0,o.Z)("div",{target:"e1rpry1m7"})({width:c,height:"10px",position:"absolute",bottom:"52px",left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlTop;")},41273:(e,t,i)=>{i.d(t,{nW:()=>n,CY:()=>a,SM:()=>r,tP:()=>s});var o=i(95918);const n=(0,o.Z)("div",{target:"e1exqkaz0"})((({dragging:e})=>({width:"28px",height:"96px",margin:"8px 6px",display:"block",opacity:e?"1":"0",position:"relative",background:"rgba(255, 255, 255, 0.12)",borderRadius:"32px"})),"label:DivVolumeControlContainer;"),a=(0,o.Z)("div",{target:"e1exqkaz1"})({width:"4px",height:"80px",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"12px",top:"8px",bottom:"8px",cursor:"pointer"},"label:DivVolumeControlProgress;"),r=(0,o.Z)("div",{target:"e1exqkaz2"})((({theme:{colors:e},backgroundTheme:t})=>({width:"4px",height:"80px",backgroundColor:"primary"===t?e.Primary:e.BGPrimary,position:"absolute",left:"12px",bottom:"8px",cursor:"pointer",transform:"scaleY(0)",transformOrigin:"bottom"})),"label:DivVolumeControlBar;"),s=(0,o.Z)("div",{target:"e1exqkaz3"})({width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",left:"6px",bottom:"0",cursor:"pointer",zIndex:1},"label:DivVolumeControlCircle;")},34447:(e,t,i)=>{i.d(t,{J:()=>le});var o=i(64047),n=i(11040),a=i(54251),r=i(56277),s=i(59577),l=i(9236),d=i(16926),c=i(91051),u=i(88671),p=i(8721),m=i(19014),h=i(91497),g=i(84785),v=i(76759),y=i(65122),b=i(44538),_=i(33980),f=i(89388),x=i(14695),j=i(19306),C=i(13899),k=i(95918),w=i(27918),S=i(30074),P=i(80537);const I=(0,k.Z)("div",{target:"e140z3d00"})({position:"relative",width:400},"label:DivSendMessagePanelContainer;"),T=(0,k.Z)("div",{target:"e140z3d01"})((({theme:{direction:e}})=>[{position:"absolute",top:36,cursor:"pointer"},(0,w.YJ)({direction:e,end:32})]),"label:DivCloseButtonWrapper;"),O=(0,k.Z)("h2",{target:"e140z3d02"})((({theme:e,theme:{direction:t}})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P0",fontWeight:"bold"}),{padding:"32px 0 0"},(0,w.YJ)({direction:t,paddingStart:32,paddingEnd:62})]),"label:H2ModalTitle;"),D=(0,k.Z)("div",{target:"e140z3d03"})((({theme:e})=>({display:"flex",alignItems:"center",width:336,height:36,margin:"24px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGPlaceholderDefault})),"label:DivSearchContainer;"),M=(0,k.Z)(f.Z,{target:"e140z3d04"})((({theme:{direction:e}})=>[(0,w.YJ)({direction:e,marginStart:16,marginEnd:12})]),"label:StyledMagnifyingGlass;"),R=(0,k.Z)("input",{target:"e140z3d05"})((({theme:e,theme:{colors:t}})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{width:240,height:22,border:"none",outline:"none",background:"transparent",caretColor:t.Primary,"::placeholder":{color:t.TextTertiary}}]),"label:InputUser;"),L=(0,k.Z)("div",{target:"e140z3d06"})((({theme:{direction:e}})=>[{width:16,height:16,cursor:"pointer"},(0,w.YJ)({direction:e,marginStart:8})]),"label:DivClearButton;"),B=(0,k.Z)("div",{target:"e140z3d07"})({minHeight:200,marginTop:24},"label:DivUserListContainer;"),F=(0,k.Z)("p",{target:"e140z3d08"})((({theme:e})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P1",color:"TextQuaternary"}),{marginTop:74,textAlign:"center"}]),"label:PNoResult;"),A=(0,k.Z)(S.g,{target:"e140z3d09"})({width:36,height:36,margin:"6px auto 12px"},"label:StyledLoading;"),Z=(0,k.Z)("p",{target:"e140z3d010"})((({theme:e,theme:{direction:t}})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextTertiary"}),{marginBottom:4,fontSize:"13px"},(0,w.YJ)({direction:t,marginStart:32})]),"label:PUserTitle;"),E=(0,k.Z)("div",{target:"e140z3d011"})((({long:e,isSearching:t})=>({position:"relative",boxSizing:"border-box",overflowY:"auto",width:"100%",minHeight:t?e?578:472:200,maxHeight:e?578:472,paddingBottom:e?210:102,"::-webkit-scrollbar":{display:"none"}})),"label:DivUserListInnerContainer;"),z=(0,k.Z)("div",{target:"e140z3d012"})((({theme:e})=>({boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"8px 32px",cursor:"pointer",":hover":{backgroundColor:e.colors.BGView}})),"label:DivUserItemContainer;"),$=(0,k.Z)("div",{target:"e140z3d013"})({display:"flex",flex:1,alignItems:"center",height:48},"label:DivUserItem;"),V=(0,k.Z)("div",{target:"e140z3d014"})((({theme:{direction:e}})=>(0,w.YJ)({direction:e,marginStart:12})),"label:DivRightPart;"),U=(0,k.Z)("div",{target:"e140z3d015"})([{display:"flex",alignItems:"center"}],"label:DivNicknameContainer;"),G=(0,k.Z)("span",{target:"e140z3d016"})((({theme:e})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P1",fontWeight:"bold"}),{maxWidth:220},w.wj]),"label:SpanNickname;"),W=(0,k.Z)(x.Z,{target:"e140z3d017"})((({theme:{direction:e}})=>[{flexShrink:0},(0,w.YJ)({direction:e,marginStart:4})]),"label:StyledVerifiedBadgeColor;"),N=(0,k.Z)("p",{target:"e140z3d018"})((({theme:e})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextTertiary"}),{maxWidth:240,marginTop:2},w.wj]),"label:PUniqueId;"),q=(0,k.Z)("div",{target:"e140z3d019"})((({theme:{direction:e}})=>[{flexShrink:0,width:22,height:22},(0,w.YJ)({direction:e,marginStart:12})]),"label:DivCheckboxContainer;"),H=(0,k.Z)("div",{target:"e140z3d020"})({position:"absolute",bottom:0,left:0,right:0,padding:"12px 32px 32px 32px",backgroundColor:"#fff",borderRadius:"0 0 8px 8px",":before":{position:"absolute",top:0,left:0,right:0,content:'""',transform:"scaleY(.5)",width:"100%",height:1,backgroundColor:"rgba(22, 24, 35, .12)"}},"label:DivSendContainer;"),Y=(0,k.Z)(P.W,{target:"e140z3d021"})({width:336,height:46,marginTop:12},"label:StyledSendButton;"),Q=(0,k.Z)("div",{target:"e140z3d022"})({display:"flex",marginTop:12},"label:DivMessageContainer;"),J=(0,k.Z)("textarea",{target:"e140z3d023"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P2"}),{display:"block",width:268,height:98,border:"none",resize:"none",outline:"none",wordBreak:"break-word",overflowWrap:"break-word",caretColor:i.Primary,"::placeholder":{color:i.TextTertiary}},(0,w.YJ)({direction:t,marginEnd:12})]),"label:Textarea;"),K=(0,k.Z)("img",{target:"e140z3d024"})({width:56,height:74},"label:ImgCover;"),X=(0,k.Z)("div",{target:"e140z3d025"})((({theme:e,theme:{direction:t}})=>[{display:"flex",alignItems:"center",width:336,padding:"12px 0 12px",margin:"16px 32px 0",borderRadius:"4px",backgroundColor:e.colors.BGView},(0,w.YJ)({direction:t,paddingStart:16,paddingEnd:4})]),"label:DivTipContainer;"),ee=(0,k.Z)(j.Z,{target:"e140z3d026"})({width:24,height:24,flexShrink:0},"label:StyledPersonArrowLeftRight;"),te=(0,k.Z)(C.Z,{target:"e140z3d027"})({width:24,height:24,flexShrink:0},"label:StyledTwoPerson;"),ie=(0,k.Z)("p",{target:"e140z3d028"})((({theme:e,theme:{direction:t}})=>[(0,w.GI)({theme:e,fontFamily:"Proxima",typography:"P4",color:"TextSecondary"}),{fontSize:"13px"},(0,w.YJ)({direction:t,marginStart:12})]),"label:PTip;");var oe=i(13761),ne=i(74920),ae=i(2734);const re=(0,c.forwardRef)((function({uniqueId:e,isSelected:t=!1,searchValue:i="",selectedCount:o,onUserSelected:a},r){const s=(0,l.mp)(v.z,{selector:t=>t.users[e],dependencies:[e]}),d=(0,c.useRef)(null);(0,c.useImperativeHandle)(r,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=d.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0}})),[]);const u=(0,c.useCallback)((()=>{o>=15&&!t||a(s,!t)}),[t,s,o,a]),{avatarThumb:p,nickname:m="",verified:h}=(0,ae.m7)(s),g=m.toLocaleLowerCase().indexOf(i.toLocaleLowerCase()),y=-1===g?0:i.length;if(!e||!s)return null;const b=m.slice(0,g),_=m.slice(g,g+y),f=m.slice(g+y);return(0,n.jsxs)(z,Object.assign({ref:d,onClick:u},{children:[(0,n.jsxs)($,{children:[(0,n.jsx)(oe.q,{size:48,src:p},void 0),(0,n.jsxs)(V,{children:[(0,n.jsxs)(U,{children:[(0,n.jsx)(G,{dangerouslySetInnerHTML:{__html:`<span>${b}<span style="color: #fe2c55">${_}</span>${f}</span>`}},void 0),h&&(0,n.jsx)(W,{width:14,height:14,style:{verticalAlign:"middle",marginLeft:4}},void 0)]},void 0),(0,n.jsx)(N,{children:e},void 0)]},void 0)]},void 0),(0,n.jsx)(q,{children:(0,n.jsx)(ne.X,{size:22,isCircle:!1,value:t},void 0)},void 0)]}),void 0)}));var se;!function(e){e.RECENT="recent",e.FOLLOWING="following"}(se||(se={}));const le=(0,c.memo)((function({visible:e,videoId:t,onClose:i}){const f=(0,p.Q)(),x=(0,l.mp)(g.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.$user}}),j=(0,l.mp)(y.AP,{selector:e=>e[t],dependencies:[t]}),{video:C,forFriend:k,author:w="",authorId:S=""}=(0,c.useMemo)((()=>null!=j?j:{}),[j]),[P,z]=(0,l.b7)(v.z,{selector:e=>e.users[w],dependencies:[t]}),{privateAccount:$,nickname:V}=(0,c.useMemo)((()=>null!=P?P:{}),[P]),[{recentUserList:U,recentUserNameList:G,recentUidList:W,followingUser:N,isFollowingLoading:q,isSendMessageLoading:oe},ne]=(0,l.b7)(_.O),ae=(0,d.fz)(m.RB),se=(0,c.useRef)({recent:!1,following:!1}),le=(0,c.useRef)({recent:{list:[],hasShown:[]},following:{list:[],hasShown:[]}}),de=(0,c.useCallback)(((e,t)=>i=>{le.current[t].list[e]=i}),[]),{isRTL:ce}=(0,h.Y)(),[ue,pe]=(0,c.useState)(""),[me,he]=(0,c.useState)(""),[ge,ve]=(0,c.useState)([]),[ye,be]=(0,c.useState)([]),[_e,fe]=(0,c.useState)([]),xe=ge.length,je=U.length,{list:Ce,nicknameList:ke,uidList:we,hasMore:Se}=N,Pe=Ce.length,Ie=xe>0,Te=""!==ue,Oe=$||k;(0,c.useEffect)((()=>{e||(pe(""),he(""),ve([]),ne.setSendMessageStatus({isFailed:!1,isLoading:!1}))}),[e,ne]),(0,c.useEffect)((()=>{if(!Pe&&Se){if(x){const{uid:e,avatarUri:t,nickName:i}=x,n=(0,o.__rest)(x,["uid","avatarUri","nickName"]),a=Object.assign({id:e,nickname:i,verified:!1,relation:0,avatarThumb:t[0],avatarMedium:t[0],avatarLarger:t[0]},n);z.setUser(a),ne.updateFollowingUserList({list:[x.uniqueId],nicknameList:[i],uidList:[e],hasMore:!0,maxCursor:0,minCursor:0})}ne.getFollowingUserListWithCanShare({count:90})}}),[]),(0,c.useEffect)((()=>{Promise.resolve().then((()=>{const e=le.current.recent,t=le.current.following;if(je&&!se.current.recent&&(se.current.recent=!0,U.slice(0,5).forEach(((t,i)=>{var o,n;(null!==(n=null===(o=e.list[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:1/0)<354&&(ae.handleShareHeadShow({user_type:"recent",rank_index:i,is_self:t===(null==x?void 0:x.uniqueId)?1:0,to_user_id:W[i]}),e.hasShown[i]=!0)}))),Pe&&!se.current.following){if(1===Pe&&Se)return;se.current.following=!0,Ce.slice(0,5).forEach(((e,i)=>{var o,n;(null!==(n=null===(o=t.list[i])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:1/0)<354&&(ae.handleShareHeadShow({user_type:"following",rank_index:i,is_self:e===(null==x?void 0:x.uniqueId)?1:0,to_user_id:we[i]}),t.hasShown[i]=!0)}))}})).catch((()=>{}))}),[null==x?void 0:x.uniqueId,Ce,Pe,U,je,ae,W,we,Se]),(0,c.useEffect)((()=>{if(!ue)return;const e=[],t=[],i=ue.toLocaleLowerCase();G.forEach(((t,o)=>{(t.toLocaleLowerCase().indexOf(i)>-1||U[o].toLocaleLowerCase().indexOf(i)>-1)&&e.push(U[o])})),ke.forEach(((o,n)=>{e.indexOf(Ce[n])<0&&(o.toLocaleLowerCase().indexOf(i)>-1||Ce[n].toLocaleLowerCase().indexOf(i)>-1)&&t.push(Ce[n])})),be(e),fe(t)}),[ue,G,U,Ce,ke]);const De=(0,c.useCallback)((()=>{i()}),[i]),Me=(0,c.useCallback)(((e,t)=>{var i;if(t)e&&ve([...ge,e]),ae.handleShareVideo({platform:"chat_head",enter_method:Te?"search":"normal",is_self:(null==e?void 0:e.id)===(null==x?void 0:x.uid)?1:0,group_id:C.id,author_id:S,to_user_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:""});else{let t=-1;ge.some(((i,o)=>{if(i.uniqueId===(null==e?void 0:e.uniqueId))return t=o,!0})),t>-1&&(ge.splice(t,1),ve([...ge]))}}),[ge,ae,Te,null==x?void 0:x.uid,C.id,S]),Re=(0,c.useCallback)((e=>{const t=e.target.value;pe(t)}),[]),Le=(0,c.useCallback)((()=>{ae.handleSearchContact()}),[ae]),Be=(0,c.useCallback)((()=>{pe("")}),[]),Fe=(0,c.useCallback)((e=>{const t=e.target.value;he(t)}),[]),Ae=(0,b.Fk)({selectedUserList:ge,messageText:me,videoId:t});(0,b.RQ)({selectedUserList:ge,messageText:me,handleSuccess:()=>{i()},isRTL:ce});const Ze=(0,u.fB)((e=>{if(Te)return;const t=e.target,{scrollHeight:i,scrollTop:o,clientHeight:n}=t;i-o===n&&!q&&Se&&ne.getFollowingUserListWithCanShare({count:30});const a=le.current.recent,r=le.current.following;a.list.forEach(((e,t)=>{var i;a.hasShown[t]||(null!==(i=null==e?void 0:e.offsetTop)&&void 0!==i?i:1/0)<o+n&&(ae.handleShareHeadShow({user_type:"recent",rank_index:t,is_self:U[t]===(null==x?void 0:x.uniqueId)?1:0,to_user_id:W[t]}),a.hasShown[t]=!0)})),r.list.forEach(((e,t)=>{var i;r.hasShown[t]||(null!==(i=null==e?void 0:e.offsetTop)&&void 0!==i?i:1/0)<o+n&&(ae.handleShareHeadShow({user_type:"following",rank_index:t,is_self:Ce[t]===(null==x?void 0:x.uniqueId)?1:0,to_user_id:we[t]}),r.hasShown[t]=!0)}))}),[q,Se,ne,ae,U,null==x?void 0:x.uniqueId,Ce,Te,W,we],100),Ee=(0,c.useCallback)(((e,t,i)=>{const o=ge.some((t=>t.uniqueId===e));return(0,n.jsx)(re,{uniqueId:e,isSelected:o,searchValue:ue,selectedCount:xe,onUserSelected:Me,ref:de(t,i)},t)}),[ue,xe,ge,de,Me]);return(0,n.jsx)(a.AR,Object.assign({isOpen:e,closeOnBackdropClick:!1,compact:!0},{children:(0,n.jsxs)(I,{children:[(0,n.jsx)(T,Object.assign({onClick:De},{children:(0,n.jsx)(r.Z,{width:24,height:24},void 0)}),void 0),(0,n.jsx)(O,{children:f("support_webapp_sharing_option_button")},void 0),Oe&&(0,n.jsxs)(X,{children:[$?(0,n.jsx)(te,{fill:"rgba(22, 24, 35, .75)"},void 0):(0,n.jsx)(ee,{fill:"rgba(22, 24, 35, .75)"},void 0),(0,n.jsx)(ie,{children:f($?"support_webapp_sharing_toast_2":"support_webapp_sharing_toast_1",{username:V})},void 0)]},void 0),(0,n.jsxs)(D,{children:[(0,n.jsx)(M,{width:24,height:24,fill:Te?"":"rgba(22, 24, 35, .34)"},void 0),(0,n.jsx)(R,{value:ue,placeholder:f("support_webapp_sharing_searchbar_ghosttext"),onChange:Re,onClick:Le},void 0),Te&&(0,n.jsx)(L,Object.assign({onClick:Be},{children:(0,n.jsx)(s.Z,{width:16,height:16,fill:"rgba(22, 24, 35, .34)"},void 0)}),void 0)]},void 0),(0,n.jsx)(B,{children:(0,n.jsx)(E,Object.assign({long:Ie,isSearching:Te,onScroll:Ze},{children:(()=>{if(Te){const e=ye.length>0||_e.length>0;return(0,n.jsxs)(n.Fragment,{children:[ye.map(((e,t)=>Ee(e,t,"recent"))),_e.map(((e,t)=>Ee(e,t,"following"))),!e&&(0,n.jsx)(F,{children:f("support_webapp_sharing_search_results")},void 0)]},void 0)}return(0,n.jsxs)(n.Fragment,{children:[0!==je&&(0,n.jsx)(Z,{children:f("support_webapp_sharing_recent")},void 0),U.map(((e,t)=>Ee(e,t,"recent"))),(0,n.jsx)(Z,Object.assign({style:{marginTop:je?12:0}},{children:f("support_webapp_sharing_following")}),void 0),Ce.map(((e,t)=>Ee(e,t,"following"))),q&&(0,n.jsx)(A,{},void 0)]},void 0)})()}),void 0)},void 0),(0,n.jsxs)(H,{children:[Ie&&(0,n.jsxs)(Q,{children:[(0,n.jsx)(J,{value:me,placeholder:f("support_webapp_sharing_write_a_message"),maxLength:6e3,onChange:Fe},void 0),(0,n.jsx)(K,{src:null==C?void 0:C.cover},void 0)]},void 0),(0,n.jsxs)(Y,Object.assign({buttonTheme:"primary",disabled:!Ie,onClick:Ae,loading:oe},{children:[f("support_webapp_sharing_send_button"),xe>1?`(${xe})`:""]}),void 0)]},void 0)]},void 0)}),void 0)}))},12886:(e,t,i)=>{i.d(t,{V:()=>d,g:()=>c});var o=i(9236),n=i(66958),a=i(76759),r=i(65122);const s="https://www.tiktok.com";function l(e){const t={"<":"&lt",">":"&gt;",'"':"&#34;","'":"&#39;","&":"&#38;","/":"&#47;"};let i=`(${Object.keys(t).toString()})`;i=i.replace(/,/g,")|(");const o=new RegExp(i,"g");return e.replace(o,(e=>t[e]))}function d(e){var t,i,d;const c=(0,o.mp)(r.AP,{selector:t=>t[e],dependencies:[e]}),u=(0,o.mp)(a.z,{selector:e=>{var t;return e.users[null!==(t=null==c?void 0:c.author)&&void 0!==t?t:""]},dependencies:[null==c?void 0:c.author]}),{music:p,textExtra:m,desc:h}=null!=c?c:{},{uniqueId:g="",secUid:v}=null!=u?u:{},y=null!==(t=null==p?void 0:p.title)&&void 0!==t?t:"",b=null!==(i=null==p?void 0:p.id)&&void 0!==i?i:"",_=null!==(d=null==p?void 0:p.authorName)&&void 0!==d?d:"",f=(0,n.yl)({uniqueId:g,secUid:v}),x=(0,n.MB)({musicName:y,musicId:b}),j=(0,n.fH)({uniqueId:g,secUid:v,videoId:e}),C=y.replace(`- ${_}`,"")+(_?` - ${_}`:""),k=`${s}${f.split("?")[0]}`,w=`${s}${x.split("?")[0]}`,S=`${s}${j.split("?")[0]}`,P=`${s}/embed.js`,I=`@${g}`,T=`♬ ${l(C)}`;return`\n    <blockquote class="tiktok-embed"\n      cite="${S}"\n      data-video-id="${e}" style="max-width: 605px;min-width: 325px;" >\n      <section>\n          <a target="_blank" title="${I}" href="${k}">${I}</a>\n          ${function(e,t=[]){return t.length?[...t].sort(((e,t)=>e.start-t.start)).reduce(((t,i,o,a)=>{const{start:r,end:d,hashtagName:c,type:u}=i,p=0===o?0:a[o-1].end,m=r,h=e.substring(p,m);h&&(t+=l(h));const g=e.substring(r,d);return t+(1===u&&c?`<a title="${c}" target="_blank" href="${s}${(0,n.JD)({tagName:c})}">${l(g)}</a>`:l(g))}),""):`<p>${l(e)}</p>`}(null!=h?h:"",m)}\n          <a target="_blank" title="${T}" href="${w}">${T}</a>\n      </section>\n    </blockquote>\n    <script async src="${P}"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function c(e){if(e)return`\n    <blockquote class="tiktok-embed"\n      cite="${s}/@${e}"\n      data-unique-id="${e}" \n      data-embed-type="creator" style="max-width: 720px; min-width: 288px;" >\n      <section>\n        <a target="_blank" href="${s}/@${e}?refer=creator_embed">@${e}</a>\n      </section>\n    </blockquote>\n    <script async src="${s}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}},12853:(e,t,i)=>{i.d(t,{g:()=>b});var o,n=i(11040),a=i(27172),r=i(69916),s=i(54771),l=i(9236),d=i(91051),c=i(8721),u=i(34708);!function(e){e.GeneralSensitive="general_sensitive",e.PhotoSensitive="photo_sensitive",e.PhotoSensitiveDenied="photo_sensitive_denied"}(o||(o={}));const p={general_sensitive:"masklayer_general_title",photo_sensitive:"photosensitive_masklayer_title",photo_sensitive_denied:"photosensitive_masklayer_removed"},m={general_sensitive:["masklayer_general_body"],photo_sensitive:["photosensitive_masklayer_body1","photosensitive_masklayer_body2"],photo_sensitive_denied:["photosensitive_masklayer_removed_body1","photosensitive_masklayer_removed_body3"]},h={general_sensitive:"masklayer_general_skip",photo_sensitive:"photosensitive_masklayer_watch",photo_sensitive_denied:""},g={general_sensitive:"masklayer_general_watch",photo_sensitive:"photosensitive_masklayer_skipall",photo_sensitive_denied:""};var v;!function(e){e[e.Reported=1]="Reported",e[e.Dislike=2]="Dislike",e[e.General=3]="General",e[e.Photosensitive=4]="Photosensitive"}(v||(v={}));var y=i(81578);const b=({playMode:e,item:t})=>{var i;const o=(0,c.Q)(),{$user:v}=null!==(i=(0,u.L)((()=>["$user"]),[]))&&void 0!==i?i:{},{photoSensitiveVideosSetting:b,uid:_}=null!=v?v:{},{photoSensitiveVideosSetting:f}=(0,l.mp)(y.P);return(0,d.useMemo)((()=>{const{maskType:i,authorId:l}=t,d=3===i,c=4===i;if(!c&&!d)return{showVideoMask:!1};if(c&&(2===b||2===f||l===_&&0!==b))return{showVideoMask:!1};let u;u=d?"general_sensitive":1===f?"photo_sensitive_denied":"photo_sensitive";const v=o(p[u]),y=m[u].map((e=>o(e))).join(""),x=((e,t)=>{let i=null,o=48;switch(e){case"general_sensitive":o=0===t?36:53,i=(0,n.jsx)(a.Z,{width:o,height:o,fill:"rgba(255, 255, 255, .75)"},void 0);break;case"photo_sensitive":o=0===t?32:48,i=(0,n.jsx)(r.Z,{width:o,height:o,fill:"#fff"},void 0);break;case"photo_sensitive_denied":o=0===t?32:48,i=(0,n.jsx)(s.Z,{width:o,height:o,fill:"#0BE09B"},void 0)}return i})(u,e),j=o(((e,t)=>2===t||3===t||0===t&&"photo_sensitive"===e?h[e]:"")(u,e)),C=o(((e,t)=>2===t||3===t||0===t&&"general_sensitive"===e?g[e]:"")(u,e));return{showVideoMask:!0,maskType:u,videoMaskTitle:v,videoMaskDesc:y,icon:x,videoMaskFirstButtonText:j,videoMaskSecondButtonText:C}}),[t,b,f,_,o,e])}},23683:(e,t,i)=>{i.d(t,{a:()=>_});var o=i(11040),n=i(91051),a=i(13964),r=i(95918),s=i(27918),l=i(80537);const d=(0,r.Z)("div",{target:"e4uoj5v0"})((({theme:e,playMode:t})=>[{position:"absolute",zIndex:3===t?0:1,width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary},2===t?{left:"-80px",right:"-80px",width:"unset"}:null]),"label:DivVideoMask;"),c=(0,r.Z)("div",{target:"e4uoj5v1"})((({playMode:e})=>[{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:2===e?"calc(100% - 160px)":"100%",maxWidth:"515px",padding:0===e?"32px":"48px"},3===e?{width:"463px"}:{}]),"label:DivVideoMaskContainer;"),u=(0,r.Z)("div",{target:"e4uoj5v2"})({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"label:DivVideoMaskInfo;"),p=(0,r.Z)("div",{target:"e4uoj5v3"})((({theme:e,playMode:t})=>({display:"flex",justifyContent:"center",alignItems:"center",width:0===t?"72px":"106px",height:0===t?"72px":"106px",borderRadius:"50%",backgroundColor:e.colors.ConstBGContainer2,color:e.colors.Positive})),"label:DivVideoMaskIcon;"),m=(0,r.Z)("p",{target:"e4uoj5v4"})((({theme:e,theme:{colors:t},playMode:i})=>[(0,s.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{fontSize:0===i?"17px":"24px",lineHeight:0===i?"20px":"32px",textAlign:"center",color:t.ConstTextInverse2,marginTop:0===i?"20px":"24px"}]),"label:PVideoMaskTitle;"),h=(0,r.Z)("p",{target:"e4uoj5v5"})((({theme:e,playMode:t})=>[(0,s.GI)({theme:e,typography:0===t?"H6":"P1",fontFamily:"Proxima",fontWeight:"normal"}),{textAlign:"center",color:"rgba(255, 255, 255, .75)",marginTop:0===t?"12px":"16px"}]),"label:PVideoMaskDesc;"),g=(0,r.Z)("div",{target:"e4uoj5v6"})((({playMode:e,horizontal:t})=>({marginTop:0===e?t?"20px":"80px":"180px"})),"label:DivBtnWrapper;");function v(e){const{theme:t,second:i,playMode:o}=e;return[s.wj,(0,s.GI)({theme:t,typography:"P1",fontFamily:"Proxima",fontWeight:"semiBold"}),{display:"block",minWidth:"unset",width:"100%",height:0===o?"36px":"56px",marginBottom:i?"0":"8px",background:i?t.colors.ConstBGContainer:t.colors.Primary},i?{"&:hover":{background:t.colors.ConstBGContainer2},"&:active":{background:t.colors.ConstBGContainer3}}:null,0===o?{fontSize:"14px",lineHeight:"17px"}:null]}const y=(0,r.Z)(l.W,{target:"e4uoj5v7"})((e=>v(e)),"label:StyledButtonFirst;"),b=(0,r.Z)(l.W,{target:"e4uoj5v8"})((e=>v(e)),"label:StyledButtonSecond;"),_=(0,n.memo)((e=>{const{playMode:t,icon:i,title:r,desc:s,horizontal:l=!1,firstButtonText:v,secondButtonText:_,canClickPropagation:f=!1,onClickFirstButton:x,onClickSecondButton:j}=e,C=Boolean(v),k=Boolean(_),w=(0,n.useCallback)((e=>{!f&&(0,a.NS)(e)}),[f]);return(0,o.jsx)(d,Object.assign({playMode:t,onClick:w},{children:(0,o.jsxs)(c,Object.assign({playMode:t},{children:[(0,o.jsxs)(u,{children:[Boolean(i)&&(0,o.jsx)(p,Object.assign({playMode:t},{children:i}),void 0),Boolean(r)&&(0,o.jsx)(m,Object.assign({playMode:t},{children:r}),void 0),Boolean(s)&&(0,o.jsx)(h,Object.assign({playMode:t},{children:s}),void 0)]},void 0),(0,o.jsxs)(g,Object.assign({horizontal:l,playMode:t},{children:[C&&(0,o.jsx)(y,Object.assign({type:"button",buttonTheme:"primary",playMode:t,onClick:x},{children:v}),void 0),k&&(0,o.jsx)(b,Object.assign({type:"button",buttonTheme:"primary",playMode:t,second:!0,onClick:j},{children:_}),void 0)]}),void 0)]}),void 0)}),void 0)}))},26884:(e,t,i)=>{i.d(t,{S:()=>$});var o=i(64047),n=i(11040),a=i(91051),r=i(57214),s=i(9236),l=i(16926),d=i(88851),c=i(955),u=i(31966),p=i(14870),m=i(2734),h=i(16929),g=i(56785),v=i(95918),y=i(30074);const b=(0,v.Z)("div",{target:"e1yey0rl0"})((({horizontal:e,mode:t})=>[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:"rgba(22, 24, 35, .06)",backgroundSize:e?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},2===t||1===t||3===t?{display:"flex",alignItems:"center",justifyContent:"center"}:null]),"label:DivContainer;"),_=(0,v.Z)("img",{target:"e1yey0rl1"})((({horizontal:e,mode:t})=>2!==t&&3!==t&&4!==t?{width:"100%",height:"100%",objectFit:"cover"}:{width:"100%",height:"100%",objectFit:e?"contain":"cover"}),"label:ImgPoster;"),f=(0,v.Z)("div",{target:"e1yey0rl2"})((({horizontal:e=!0})=>({position:"absolute",left:0,top:0,width:"100%",height:"100%","& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"}})),"label:DivBasicPlayerWrapper;"),x=(0,v.Z)(y.g,{target:"e1yey0rl3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:StyledLoading;"),j=(0,v.Z)("video",{target:"e1yey0rl4"})((({horizontal:e})=>({display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"})),"label:VideoBasic;");var C;!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(C||(C={}));const k=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),w=(0,a.memo)((0,a.forwardRef)((function(e,t){var{playProgress:i,horizontal:r,muteSetting:l,onUnmount:d,onEnded:c,onWaiting:u}=e,p=(0,o.__rest)(e,["playProgress","horizontal","muteSetting","onUnmount","onEnded","onWaiting"]);const m=(0,a.useRef)(null),h=(0,a.useRef)(!1),[{mute:v,volume:y},{setMute:b,setMuteSetting:_}]=(0,s.b7)(g.x,{selector:e=>({mute:e.muteSetting||e.mute,volume:e.volume}),dependencies:[]}),f=(0,s.mp)(g.x,{selector:e=>e.playing,dependencies:[]});(0,a.useImperativeHandle)(t,(()=>{const e=m.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),seek:t=>{if(e){const i=e.duration;e.currentTime=i*t}},seekTime:t=>{e&&(e.currentTime=t)},onSeeked:t=>{null==e||e.addEventListener("seeked",t)},onSeeking:t=>{null==e||e.addEventListener("seeking",t)},onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,a=null!==(o=e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>k(e)}}));const x=(0,a.useCallback)(((e=0)=>(0,o.__awaiter)(this,void 0,void 0,(function*(){var t,i,o;if(!(e>=3))try{yield null===(t=m.current)||void 0===t?void 0:t.play()}catch(t){const n=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"";(null!==(o=n.match("failed because the user didn't interact with the document first."))&&void 0!==o?o:n.match("The request is not allowed by the user agent or the platform in the current context"))?(b(!0),setTimeout((()=>{x(e+1)}),0)):x(e+1)}}))),[b]);(0,a.useEffect)((()=>{m.current&&(m.current.volume=y)}),[y]),(0,a.useEffect)((()=>{_(l),x(),m.current&&Math.abs(m.current.currentTime-i)>.2&&(m.current.currentTime=i)}),[l,i,_,x]),(0,a.useEffect)((()=>{var e;f?h.current&&(h.current=!1,x()):(h.current=!0,null===(e=m.current)||void 0===e||e.pause())}),[f,x]),(0,a.useEffect)((()=>{const e=m.current;return()=>{null==d||d(k(e))}}),[]);const C=(0,a.useCallback)((e=>{null==u||u(e)}),[u]),w=(0,a.useCallback)((e=>{null==c||c(e),x()}),[c,x]);return(0,n.jsx)(j,Object.assign({horizontal:r,ref:m},p,{muted:v,playsInline:!0,autoPlay:!0,onEnded:w,onWaiting:C}),void 0)})));var S=i(83421);const P=(0,a.memo)((0,a.forwardRef)((function({poster:e,lazyLoading:t=!0,horizontal:i,playUrl:o,id:r,teaParams:v,index:y,mode:j,itemMute:C,desc:k,onVideoPause:P,onVideoPlaying:I,onVideoPlay:T,onVideoEnded:O,onVideoError:D,e2eTag:M,onTimeUpdate:R,subtitleStruct:L},B){const{currentVideo:F,playProgress:A}=(0,s.mp)(S.f),{updateVVTime:Z}=(0,s.qj)(S.f),E=(0,a.useRef)(null),z=(0,a.useRef)(null),$=(0,l.fz)(d.e),V=(0,l.fz)(c.k),U=(0,l.fz)(u.KF),[G,W]=(0,a.useState)(!1),N=(0,a.useCallback)((()=>{var e,t;null===(t=null===(e=E.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),q=(0,a.useCallback)((()=>{var e,t;null===(t=null===(e=E.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),H=(0,a.useMemo)((()=>{if(!F)return!1;const{id:e,index:t,mode:i}=F;return e===r&&t===y&&i===j}),[r,y,j,F]);(0,a.useImperativeHandle)(B,(()=>({play:()=>{N(),z.current=!0},pause:()=>{q(),z.current=!1,$.triggerPause({enter_method:"click_pause",playMode:j})},seek:e=>{var t;null===(t=E.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=E.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=E.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=E.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=E.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=E.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=E.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return H&&G}})),[N,q,$,j,H,G]),(0,a.useEffect)((()=>{H||W(!1)}),[H]);const Y=(0,p.Mz)();(0,a.useEffect)((()=>{const e=null===z.current||z.current;Y&&e?N():(q(),H&&!Y&&$.triggerPause({enter_method:"switch_tab",playMode:j}))}),[Y,N,q,$,H,j]);const Q=(0,a.useCallback)((()=>{var e;const t=(0,m.m7)(null===(e=E.current)||void 0===e?void 0:e.getPlayerAttributes()),{bitrate:i,author_id:o,format:n,encodedType:a,videoQuality:s,encodeUserTag:l,codecType:d,definition:c,secret:u,forFriend:p}=v;return Object.assign({id:r,authorId:o,playMode:j,bitrate:i,format:n,encodedType:a,videoQuality:s,encodeUserTag:l,codecType:d,definition:c,secret:u,forFriend:p},null!=t?t:{})}),[r,j,v]),{mute:J}=(0,s.mp)(g.x),K=(0,a.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:i,search_id:o,search_keyword:n,search_result_id:a,question_id:r}=v||{};return{itemId:e,authorId:t,isScheduled:Boolean(i),autoplayStatus:1,searchId:o,searchKeyword:n,searchResultId:a,questionId:r,playMode:j,isMute:J}}),[j,J,v]),X=(0,a.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,m.m7)(null===(e=E.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},K),{currentTime:t,duration:i})}),[K]),{loading:ee,handleCanPlayWithLoading:te,handlePauseWithLoading:ie,handlePlayingWithLoading:oe,handleWaitingWithLoading:ne}=(0,p.Fk)({isCurrentVideo:H}),ae=(0,a.useCallback)((()=>{V.handleLoadStart(Q())}),[V,Q]),re=(0,a.useCallback)((()=>{V.handleLoadedData(Q())}),[V,Q]),se=(0,a.useCallback)((()=>{te(),W(!0),U.getCurrentPageReport()||(U.reportVideoFirstScreen({endTime:Date.now(),videoSource:o}),U.reportVideoAddition({endTime:Date.now(),videoSource:o}))}),[te,o,U]),le=(0,a.useCallback)((e=>{V.handlePlay(),null==T||T(e)}),[V,T]),de=(0,a.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,m.m7)(null===(e=E.current)||void 0===e?void 0:e.getPlayerAttributes()),o=$.handleTimeUpdate(X());V.handleTimeUpdate(Q()),"video_play"===o&&Z(),U.getFirstFrameReport()||U.reportVideoFirstFrame(t),null==R||R(t/i)}),[$,X,V,Q,U,R,Z]),ce=(0,p.ru)(),ue=(0,a.useCallback)((e=>{null==D||D(e),ce(e),$.handleError(K),V.handleError(Q())}),[D,ce,$,K,V,Q]),pe=(0,a.useCallback)((e=>{null==P||P(e),ie(),V.handlePause(Q()),$.handlePause(X())}),[P,ie,V,Q,$,X]),me=(0,a.useCallback)((e=>{null==I||I(e),oe(),U.reportVideoInteract({endTime:Date.now(),videoSource:o})}),[I,oe,U,o]),he=(0,a.useCallback)((()=>{ne(),$.handleWaiting(X()),V.handleWaiting(Q())}),[ne,$,X,V,Q]),ge=(0,a.useCallback)((e=>{null==O||O(e),$.handleEnded(K),V.handleEnded()}),[O,$,K,V]),ve=(0,a.useCallback)((e=>{$.handlePlayTime(K),V.reset(r,Object.assign(Object.assign({},Q()),e))}),[r,$,K,V,Q]);(0,a.useEffect)((()=>{H||null==P||P({})}),[H,P]);const ye=i||2===j||3===j||4===j;return(0,n.jsxs)(b,Object.assign({horizontal:i,mode:j},{children:[e?(0,n.jsx)(_,{horizontal:ye,mode:j,src:e,alt:k,loading:t?"lazy":"eager"},void 0):null,H&&(0,n.jsxs)(f,Object.assign({"data-e2e":M},{children:[(0,n.jsx)(w,{ref:E,horizontal:ye,muteSetting:C||h.PA[j].forceMute,defaultMute:h.PA[j].defaultMute,playProgress:null!=A?A:0,src:o,onUnmount:ve,onLoadStart:ae,onLoadedData:re,onTimeUpdate:de,onError:ue,onCanPlay:se,onPause:pe,onPlay:le,onPlaying:me,onWaiting:he,onEnded:ge},void 0),ee&&(0,n.jsx)(x,{},void 0),4===j&&L?(0,n.jsx)("track",{default:!0,kind:"subtitles",srclang:L.language,src:L.url},void 0):null]}),void 0)]}),void 0)})));var I=i(25615),T=i.n(I),O=i(97913),D=i(73825),M=i(9559),R=i(23905),L=i.n(R);let B=!0;const F={width:"100%",height:"100%",controls:!1,closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,closePlayerBlur:!0,closeControlsBlur:!0,closeFocusVideoFocus:!0,closePlayVideoFocus:!0,closeVideoStopPropagation:!0,ignores:["play","start"]};var A;!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",e.AbortRequest="new load request"}(A||(A={}));const Z=(e,t)=>{var i,o,n,a,r,s,l;const d=null!==(o=null===(i=null==e?void 0:e.video)||void 0===i?void 0:i.error)&&void 0!==o?o:null,c=null===(n=null==e?void 0:e.video)||void 0===n?void 0:n.buffered,u=null!==(a=null==e?void 0:e._needFilterFallbackCase)&&void 0!==a&&a,p=null==e?void 0:e.currentTime,m=u&&p>0,h=null==e?void 0:e._resetNeedFilterFallbackCase,g=null==e?void 0:e._videoType,v=null==e?void 0:e._playerType;return{buffered:c,currentTime:p,currentSrc:null!=t?t:null==e?void 0:e.currentSrc,duration:null==e?void 0:e.duration,readyState:null===(r=null==e?void 0:e.video)||void 0===r?void 0:r.readyState,networkState:null===(s=null==e?void 0:e.video)||void 0===s?void 0:s.networkState,error:d?{code:null==d?void 0:d.code,message:null!==(l=null==e?void 0:e.error)&&void 0!==l?l:(null==d?void 0:d.message)||"UNKNOWN_ERROR_MESSAGE",MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4}:null,videoType:g,playerType:v,needFilterFallbackCase:m,resetNeedFilterFallbackCase:h,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}},E=(0,a.memo)((0,a.forwardRef)((function({id:e,url:t,mode:i,muteSetting:r,playProgress:d,onLoadStart:c,onLoadedData:u,onCanPlay:p,onPause:m,onPlay:h,onPlaying:v,onTimeUpdate:y,onWaiting:b,onEnded:_,onError:f,onUnmount:x,onVideoChange:j,subtitleStruct:C},k){const[w,S]=(0,a.useState)(!1),P=(0,a.useRef)(!1),I=(0,a.useRef)(null),[{mute:R,volume:A},{setMute:E,setMuteSetting:z}]=(0,s.b7)(g.x,{selector: