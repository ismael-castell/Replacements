                                                                                                                   
                              
   																																																																																																																																																																																																																																																																																																																																																																																																						
 																																																																																																																			
  
                                                     
                 
	                                                                                                                  
	
	  
   
	  
	  
	                
		
	 
	
	                                                  
	                          
	           
	                                             
		 var Clock={minutes:["00","30"],format:function(b,g){return str=1==b.toString().length?"0"+b+":"+g:b+":"+g},drawTime:function(b,g){var e=(!b?"10:00":b).split(":",2),f=e[0],f=parseInt(f,10),e=e[1],a="",d;if(g)for(d=0;24>d;d++)for(var c=0;2>c;c++)b=this.format(d,this.minutes[c]),a=f===d&&e===this.minutes[c]?a+('<option selected="selected" value="'+b+'">'+b+"</option>"):a+('<option value="'+b+'">'+b+"</option>");else{a=0===f&&"00"===e?a+'<option selected="selected" value="00:00">12:00 Midnight</option>':
a+'<option value="00:00">12:00 Midnight</option>';a=0===f&&"30"===e?a+'<option selected="selected" value="00:30">12:30 AM</option>':a+'<option value="00:30">12:30 AM</option>';for(d=1;12>d;d++)for(c=0;2>c;c++)b=this.format(d,this.minutes[c]),a=f===d&&Number(e)==this.minutes[c]?a+('<option selected="selected" value="'+b+'">'+b+" AM</option>"):a+('<option value="'+b+'">'+b+" AM</option>");for(var a=12===f&&"00"===e?a+'<option selected="selected" value="12:00">12:00 Noon</option>':a+'<option value="12:00">12:00 Noon</option>',
a=12===f&&"30"===e?a+'<option selected="selected" value="00:30">12:30 PM</option>':a+'<option value="12:30">12:30 PM</option>',h=1;12>h;h++)for(var i=h+12,c=0;2>c;c++)b=this.format(h,this.minutes[c]),d=this.format(i,this.minutes[c]),a=f==i&&e==this.minutes[c]?a+('<option selected="selected" value="'+d+'">'+b+" PM</option>"):a+('<option value="'+d+'">'+b+" PM</option>")}return"<select>"+a+"</select>"}};"function"==typeof define&&define.amd&&define("tools/timelist",[],function(){return Clock});                  
var Calendar=function(a){this.params=_.extend({euro:!1,increment:1,mode:1,expandable:!0},a);this.init()};
Calendar.prototype={header:function(a,b){return'<header><span class="prev arrow"><span class="icons-arrow_black_left"></span></span><span class="next arrow"><span class="icons-arrow_black_right"></span></span><h1 data-automation-id = "'+(a+1)+'">'+this.params.monthNames[a]+" "+b+"</h1></header>"},daysHeader:function(){for(var a="<tr>",b=0;b<this.params.headers.length;b++)a+="<th>"+this.params.headers[b]+"</th>";return a+"</tr>"},drawMonth:function(a,b){var c=new Date(b,a,1),d=c.getDay(),i=(new Date(b,
a+1,0)).getDate();(new Date(b,a,0)).getDate();for(var f=0-d,j=0===this.params.start.val().length?null:this.createDate(this.params.start.val()),h=this.params.end?0===this.params.end.val().length?null:this.createDate(this.params.end.val()):null,n=2===this.params.mode?"dual":"",e='<table class="body" cellpadding="0" cellspacing="0" border="0">'+this.daysHeader(),g=0;6>g;g++){for(var e=e+"<tr>",k=0;7>k;k++){f++;var l="",m="";0>=f||f>i?l="empty":m=f;e+='<td class="'+l+'">'+m+"</td>"}e+="</tr>"}e+="</table>";
if(this.today.getMonth()===a&&this.today.getFullYear()===b){f=this.today.getDate()+d-1;e=this.highlight(e,f,"today");for(g=f-1;g>=d;g--)e=this.highlight(e,g,"past")}j&&(j.getMonth()===a&&j.getFullYear()===b)&&(f=j.getDate()+d-1,e=this.highlight(e,f,"start"));h&&(h.getMonth()===a&&h.getFullYear()===b)&&(f=h.getDate()+d-1,e=this.highlight(e,f,"end"));j&&h&&(e=$("<div>"+e+"</div>"),f=parseInt(e.find("td.start").text()),g=parseInt(e.find("td.end").text()),startIndex=f?f+d-1:d,endIndex=g?g+d-1:i+d,f||
g?e.find("td").slice(startIndex,endIndex).addClass("selected"):j.getTime()<c.getTime()&&h.getTime()>c.getTime()&&e.find("td").slice(startIndex,endIndex).addClass("selected"),e=e.html());return'<div class="month '+n+'"><div class="wrapper">'+this.header(a,b)+e+"</div></div>"},highlight:function(a,b,c){a=$("<div>"+a+"</div>");$(a).find("td:eq("+b+")").addClass(c);return a.html()},footer:function(a){return'<footer class="clearfix"><span class="area"><span class="close">'+a+'</span><span class="icons-close_sm"></span></span></footer>'},
maxDate:function(){var a=new Date(this.today.getTime());a.setFullYear(a.getFullYear()+1);a.setMonth(a.getMonth()+4);a.setDate(0);return a},calendarMonths:function(){if(this.params.content){var a=this.params.content.homePage.calendarContent;return[a.calMonthJan,a.calMonthFeb,a.calMonthMar,a.calMonthApr,a.calMonthMay,a.calMonthJun,a.calMonthJul,a.calMonthAug,a.calMonthSep,a.calMonthOct,a.calMonthNov,a.calMonthDec]}return htz.calendar.monthNames},calendarDays:function(){if(this.params.content){var a=
this.params.content.homePage.calendarContent;return[a.calDaySun,a.calDayMon,a.calDayTues,a.calDayWed,a.calDayThur,a.calDayFri,a.calDaySat]}return htz.calendar.dayHeaders},init:function(){var a=this,b=a.params.start,c=a.params.end,d=a.params.startText||null,i=a.params.endText||null,f=function(){};a.params.syncPickupAndDropoff&&(f=a.params.syncPickupAndDropoff);a.params.monthNames=a.calendarMonths();a.params.headers=a.calendarDays();this.params.content?(a.params.returnBeforePickup=a.params.content.homePage.jsErrorContent.invalidDateError,
a.params.closeButton=a.params.content.links.closeButton):(a.params.returnBeforePickup=htz.calendar.content.returnBeforePickup,a.params.closeButton=htz.calendar.content.closeText);a.params.mode=a.params.target?1:a.params.mode;a.params.expandable=a.params.target?!1:a.params.expandable;a.calendar=$('<div class="calendar"></div>');if(b&&d)d.on("click",function(){localStorage.removeItem("PICK_UP_DATE");if(a.active)a.close();else{a.today=a.createDate();a.input=b;a.inputText=d.find(".value");a.dropoff=!1;
var c=a.maxDate();a.currentDate=a.createDate(b.val());a.currentDate.setDate(1);2===a.params.mode&&(c.getMonth()===a.currentDate.getMonth()&&c.getFullYear()===a.currentDate.getFullYear())&&a.currentDate.setMonth(a.currentDate.getMonth()-1);a.show(this);return!1}});if(c&&i)i.on("click",function(){localStorage.removeItem("DROP_OFF_DATE");if(a.active)a.close();else{a.today=a.createDate();a.input=c;a.inputText=i.find(".value");a.dropoff=!0;var f=a.maxDate();if(0===c.val().length&&0!==b.val().length){var h=
a.createDate(b.val()),d=(new Date(h.getFullYear(),h.getMonth()+1,0)).getDate();a.currentDate=a.createDate(b.val());a.params.expandable&&7>d-h.getDate()&&(a.params.mode=2,htz.helpers.SessionHelper.setItem("calendarMode",2))}else 0!==b.val().length?(h=a.createDate(b.val()),d=a.createDate(c.val()),d.setDate(1),d.setMonth(d.getMonth()-1),a.currentDate=2===a.params.mode&&h.getMonth()===d.getMonth()&&h.getFullYear()===d.getFullYear()?h:a.createDate(c.val())):a.currentDate=a.createDate(c.val());a.currentDate.setDate(1);
2===a.params.mode&&(f.getMonth()===a.currentDate.getMonth()&&f.getFullYear()===a.currentDate.getFullYear())&&a.currentDate.setMonth(a.currentDate.getMonth()-1);a.show(this)}});a.calendar.delegate("span.next","click",function(){a.shuffle(1)});a.calendar.delegate("span.prev","click",function(){a.shuffle(-1)});a.calendar.delegate("td","click",function(){if(!$(this).hasClass("empty")&&!$(this).hasClass("past")){var b=a.inputStr(this),c=a.createDate(b),d=a.dropoff?a.createDate(a.params.start.val()):c,
e=a.params.end?a.dropoff?c:a.createDate(a.params.end.val()):null;if(a.dropoff&&e.getTime()<d.getTime())$(this).mouseout(),alert(a.params.returnBeforePickup);else{if(a.params.end&&0!==a.params.end.val().length&&d.getTime()>=e.getTime()){var g=a.maxDate(),g=g.getFullYear()===d.getFullYear()&&g.getMonth()===d.getMonth()&&g.getDate()===d.getDate()?0:a.params.increment,c=new Date(c.getTime()+864E5*g),c=a.dateToStr(c);a.params.end.val(c);a.params.end.trigger("change");a.params.endText.find(".value").text(c)}f(b,
a.input.selector,g,a);a.input.val(b);a.input.trigger("change");a.inputText.text(b);a.dropoff?localStorage.setItem("DROP_OFF_DATE",b):localStorage.setItem("PICK_UP_DATE",b);a.close()}}});a.calendar.delegate("td","mouseover",function(){!$(this).hasClass("past")&&!$(this).hasClass("empty")&&$(this).addClass("hover")});a.calendar.delegate("td","mouseout",function(){$(this).removeClass("hover")});a.calendar.delegate("footer span","click",function(){a.close()});a.calendar.append(a.footer(a.params.closeButton));
this.params.calledWithinOverlay||$("body").find(".calendar").remove();a.params.target?(a.calendar.addClass("elastic"),$(a.params.target).wrapInner("<div>"),$(a.params.target).append(a.calendar)):($("body").append(a.calendar),$("body").hasClass("lt-ie7")&&(a.iframe=$('<iframe class="calendar">'),$("body").append(a.iframe)))},close:function(){this.calendar.hide();this.params.target?this.calendar.siblings().show():this.iframe&&this.iframe.hide();this.active=!1},dateToStr:function(a){var b=parseInt(a.getMonth()+
1),c=parseInt(a.getDate()),c=10>c?"0"+c:c,b=10>b?"0"+b:b;return this.params.euro?c+"/"+b+"/"+a.getFullYear():b+"/"+c+"/"+a.getFullYear()},inputStr:function(a){var b=$(a).text(),a=$(a).closest(".month").index(),c=new Date(this.currentDate.getTime());c.setMonth(c.getMonth()+a);c.setDate(b);return this.dateToStr(c)},resize:function(){!this.params.target&&$("body").hasClass("lt-ie8")&&(1===this.params.mode?this.calendar.width(230):2===this.params.mode&&this.calendar.width(460),this.iframe&&(this.iframe.show(),
this.iframe.css({height:this.calendar.outerHeight(),width:this.calendar.outerWidth(),top:this.calendar.position().top,left:this.calendar.position().left})))},show:function(a){this.create();this.calendar.show();if(this.params.target)this.calendar.siblings().hide();else{var b=$("#container").width(),c=this.calendar.width(),d=$(a).offset().left;c+d>b?this.calendar.css({top:$(a).offset().top+$(a).outerHeight(),right:$(window).width()-d-$(a).outerWidth(),left:""}):this.calendar.css({top:$(a).offset().top+
$(a).outerHeight(),left:d,right:""});this.resize()}this.active=!0},create:function(){var a=this.calendar.find("footer"),b=this.maxDate();this.calendar.find(".month").remove();a.before(this.drawMonth(this.currentDate.getMonth(),this.currentDate.getFullYear()));if(2===this.params.mode){var c=new Date(this.currentDate.getTime());c.setMonth(c.getMonth()+1);a.before(this.drawMonth(c.getMonth(),c.getFullYear()));this.calendar.find("span.next:first").hide();this.calendar.find("span.prev:last").hide();b.setDate(0)}this.currentDate.getMonth()===
this.today.getMonth()&&this.currentDate.getFullYear()===this.today.getFullYear()&&this.calendar.find("span.prev").hide();this.currentDate.getMonth()===b.getMonth()&&this.currentDate.getFullYear()===b.getFullYear()&&this.calendar.find("span.next").hide()},shuffle:function(a){1===this.params.mode&&this.params.expandable&&(this.params.mode=2,htz.helpers.SessionHelper.setItem("calendarMode",2),a=0<a?a-1:a);this.currentDate.setMonth(this.currentDate.getMonth()+a);this.create();this.resize()},createDate:function(a){if(!a||
0===a.length)return a=new Date,new Date(a.getFullYear(),a.getMonth(),a.getDate());a=a.split("/");return newDate=this.params.euro?new Date(a[2],a[1]-1,a[0]):new Date(a[2],a[0]-1,a[1])}};"function"==typeof define&&define.amd&&define("tools/calendar",[],function(){return Calendar});
addDependencies("reservation/vehicle/core/view/vehicle-page-view","jquery underscore backbone framework/view/abstract-view config/app-config utils/utils-proxy utils/sessionhelper reservation/vehicle/core/view/vehicle-list-view reservation/rental-links/core/presenter/rental-links-presenter reservation/itinerary-info/core/presenter/itinerary-presenter reservation/rate-details/core/presenter/rate-details-presenter reservation/common/retry/core/view/retry-view reservation/common/steps/core/view/steps-view reservation/process-info/core/model/process-model reservation/config reservation/reservation-info/core/model/reservation-info-model reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils utils/gtm-tracker".split(" "));
addDependencies("reservation/vehicle/core/presenter/vehicle-presenter","jquery json utils/utils utils/domhelper config/utilconfig utils/sessionhelper config/app-info config/app-config reservation/vehicle/core/model/vehicle-page-model reservation/vehicle/core/view/vehicle-page-view reservation/vehicle/core/view/helper/view-helper reservation/process-info/core/model/process-model utils/utils-proxy reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils".split(" ")); 
define("reservation/common/content-format/core/view/content-format-view",["jquery","backbone"],function(g,f){return f.View.extend({initialize:function(){this.content=this.options.content;this.attrs=this.options.attributes;this.render()},formStartTag:function(a){if(0<a.indexOf("@")){var a=a.split("@"),b=null,c="",e=-1,d;for(d in a)e++,0==e?b=a[d]:c+=" "+a[d];return"<"+b+" "+c+">"}return"<"+a+">"},formEndTag:function(a){var b=null,b=0<a.indexOf("@")?a.split("@")[0]:a;return"</"+b+">"},render:function(){for(var a in this.attrs){var b=
a,c=this.attrs[b];0<=this.content.indexOf("{"+b+"}")?this.content=this.content.replace("{"+b+"}",c):0<=this.content.indexOf("{"+b+"_S}")&&(this.content=this.content.replace("{"+b+"_S}",this.formStartTag(c)),0<=this.content.indexOf("{"+b+"_E}")&&(this.content=this.content.replace("{"+b+"_E}",this.formEndTag(c))))}return this}})});
define("reservation/arrival-info/core/model/arrival-form-model",["utils/restmodel","config/app-config"],function(a,b){return a.extend({defaults:{type:"",desc:"",flightName:"",flightNumber:""},getErrorLocation:function(){return"#arrival-info #error-list"},url:b.config.rootContext+"/rest/hertz/v2/reservations/flight"})});
define("reservation/itinerary-info/core/model/location-model",["backbone"],function(a){return a.Model.extend({defaults:{name:null,addressLine1:null,addressLine2:null,city:null,state:null,stateCode:null,country:null,countryCode:null,zip:null,type:null,hours:null,phone:null,fax:null,lat:0,lon:0,isDelivery:!1,isCollection:!1,isPickup:!1,servedByNotes:null,directions:null}})});
define("reservation/itinerary-info/core/model/itinerary-model",["backbone","reservation/itinerary-info/core/model/location-model","reservation/arrival-info/core/model/arrival-form-model","reservation/process-info/core/model/process-model"],function(f,c,g,d){return f.Model.extend({defaults:{editAction:null,pickupDate:null,dropoffDate:null,pickupLocation:null,dropoffLocation:null,age:null,discounts:null,arrivalInfo:null,isOneWay:!1,page:"",state:0,isItnModifiable:!0,isArrModifiable:!1,isReview:!1},
url:function(){return""},parse:function(a){if(!a)return a;if(a.pickupLocation){var b=new c;b.set(a.pickupLocation);a.pickupLocation=b}if(a.dropoffLocation||a.pickupLocation){b=a.dropoffLocation||a.pickupLocation;b.isPickup=!1;b.isDelivery=!1;var e=new c;e.set(b);a.dropoffLocation=e}a.arrivalInfo&&(b=new g,b.set(a.arrivalInfo),a.arrivalInfo=b);b=0;d.getStep()==htz.res.config.ReservationConstants.CONFIRMATION?(a.isItnModifiable=!1,b=1):d.getStep()==htz.res.config.ReservationConstants.REVIEW&&(b=1,a.isReview=
!0);a.isArrModifiable=a.isReview;a.suppressEditLink&&(a.isItnModifiable=!1,a.isArrModifiable=!1);a.state=b;return a}})});
define("reservation/itinerary-info/core/view/location-view",["jquery","underscore","backbone","utils/utils-proxy"],function(c,b,f,g){function e(){null==d&&(d=g.getLightbox());return d}var d=null;return f.View.extend({initialize:function(){this.template=0==this.options.state?b.template(c("#itn-location-tpl").html()):b.template(c("#itn-location-2-tpl").html());this.content=this.options.content;this.isGoldAnytimeRes=this.options.isGoldAnytimeRes;this.render()},events:{"click .itn-loc-detail-link":"toggleDetail",
"click .itn-map-img":"showDirection","click .itn-ga-overlay":"showGoldAnytimeOverlay"},toggleDetail:function(a){if("phone"!==htz.config.deviceGroup&&!htz.config.isApp){var a=c(a.target).closest("article"),h=a.find(".itn-location-container").html(),b=a.find("section");b.find("label").first().before(h);e().overlay({title:a.find(".itn-location-header label").html(),width:"625"},b.html())}else c(a.currentTarget).parent().hasClass("loc-view-link1")?(this.$(".loc-view-link1").hide(),this.$(".loc-view-link2").show()):
(this.$(".loc-view-link2").hide(),this.$(".loc-view-link1").show()),this.$(".itn-loc-detail").toggleClass("hidden-item")},showDirection:function(){if(0<b.size(this.model.get("directions"))){var a=null;b.each(this.model.get("directions"),function(b){b&&0<b.name.indexOf("mapquest.com")&&(a=b.name)});a||(a=b.first(this.model.get("directions")).name);window.open(a)}},showGoldAnytimeOverlay:function(){var a=this;require(["reservation/common/gold-anytime-overlay/core/view/gold-anytime-overlay-view"],function(b){e().overlay({title:a.content.reservationGlobals.goldAnytime.gaOverlayTitle,
width:"625"},(new b({template:"#gold-anytime-overlay-tpl",content:a.content})).render().el)})},render:function(){try{this.$el.html(this.template(c.extend(this.model.attributes,{content:this.content,state:this.options.state,isOneWay:this.options.isOneWay,isGoldAnytimeRes:this.isGoldAnytimeRes}))),1===this.options.state&&0!==this.model.get("lat")&&this.$el.find(".itn-map-img").attr("src",htz.config.rootContext+"/rest/map/lat/"+this.model.get("lat")+"/long/"+this.model.get("lon")+"/radius/5280?imageWidth=250&imageHeight=200")}catch(a){}return this},
doCleanup:function(){this.content=this.template=null}})});
define("reservation/itinerary-info/core/view/itinerary-view","jquery underscore reservation/itinerary-info/core/view/location-view reservation/process-info/core/model/process-model config/app-config reservation/config framework/view/abstract-view utils/utils-proxy".split(" "),function(b,e,f,d,c,g,h,i){return h.extend({initialize:function(){this.template=0==this.model.get("state")?e.template(b("#itn-main-tpl").html()):e.template(b("#itn-main-2-tpl").html());this.content=this.options.content;this.isGoldAnytimeRes=
this.options.isGoldAnytimeRes},events:{"click .itn-edit-link":"showEditPage","click .itn-arrival-edit":"showArrivalEditPage","click .itn-header-icon-crtl":"handleItineraryToggle","click .itn-header-crtl":"handleItineraryToggle","click .itn-title":"handleItineraryToggle"},showEditPage:function(){if(!this.model.get("isReview")&&("all"==c.config.deviceGroup||"desktop"==c.config.deviceGroup||"tablet"==c.config.deviceGroup))i.getSpinner().spin(),require(["reservation/res-flow/core/presenter/res-flow-presenter"],
function(a){a.showResForm()}),"undefined"!==typeof WebTracking&&WebTracking.trackPage("edit-itinerary-"+d.getStep());else if(this.model.get("isReview"))require(["reservation/confirmation/core/view/helper/view-helper"],function(a){a.editItinerary()});else{var a=htz.res.config.ReservationConstants.ITINERARY;d.isModify()&&(a="modify/"+a);g.getRotar().rotate(a)}},handleItineraryToggle:function(){var a=this.$(".itn-header-crtl");a&&a.is(":visible")&&(this.$(".itn-container").toggleClass("hidden-item"),
this.$el.find("#expand_collapse_itn").hasClass("icons-expand_icon")?this.$el.find("#expand_collapse_itn").removeClass("icons-expand_icon").addClass("icons-collapse_icon"):this.$el.find("#expand_collapse_itn").removeClass("icons-collapse_icon").addClass("icons-expand_icon"))},showArrivalEditPage:function(){var a=this;if(this.model.get("isReview"))require(["reservation/confirmation/core/view/helper/view-helper"],function(b){b.showArrivalEditPage(a.content)});else{var b="RYANAIR"==c.config.subSystemId?
htz.res.config.ReservationConstants.ITINERARY:htz.res.config.ReservationConstants.REVIEW_AND_BOOK;d.isModify()&&(b="modify/"+b);g.getRotar().rotate(b)}},render:function(){return this.renderView()},renderYourself:function(){this.$el.html(this.template(b.extend(!0,this.model.attributes,{content:this.content})));this.pickupView=new f({content:this.content,el:this.$(".pickup-location"),model:this.model.get("pickupLocation"),state:this.model.get("state"),isOneWay:this.model.get("isOneWay"),isGoldAnytimeRes:this.isGoldAnytimeRes});
this.model.get("isOneWay")?this.returnView=new f({content:this.content,el:this.$(".return-location"),model:this.model.get("dropoffLocation"),state:this.model.get("state"),isOneWay:this.model.get("isOneWay"),isGoldAnytimeRes:this.isGoldAnytimeRes}):this.$(".return-location").hide();this.$("#res-itinerary").addClass("state"+this.model.get("state"))},doCleanup:function(){this.content=this.template=null}})});
define("reservation/itinerary-info/core/presenter/itinerary-presenter","json utils/sessionhelper reservation/itinerary-info/core/model/itinerary-model reservation/itinerary-info/core/view/itinerary-view config/app-config reservation/process-info/core/model/process-model reservation/config reservation/process-config/core/reservation-constants".split(" "),function(i,j,h,k,l,d,e,f){var b,c;return{showItinerary:function(a,d,e,g){if(a)try{a.get("pickupLocation"),b=a}catch(l){b=new h,b.set(b.parse(a))}else(a=
j.getItem(f.ITINERARY_INFO_DATA))&&(a=i.parse(a)),a&&(b=new h,b.set(b.parse(a)));a=!1;g&&(a=!!g.optional);c&&$(d).off();c=new k({content:e,el:d,model:b,isGoldAnytimeRes:g.goldAnytimeRes});c.setOptional(a);c.render()},editItinerary:function(){var a=f.ITINERARY;d.isModify()&&(a="modify/"+a);e.getRotar().rotate(a)},editArrivalInfo:function(){var a=f.REVIEW_AND_BOOK;d.isModify()&&(a="modify/"+a);e.getRotar().rotate(a)},doCleanup:function(){b&&b.doCleanup&&b.doCleanup();c&&c.doCleanup&&c.doCleanup();b=
c=null}}}); 
define("reservation/rate-details/core/model/vehicle-model",["backbone"],function(a){return a.Model.extend({defaults:{sipp:"",name:"",unique:!1,img:"",collection:0,amenities:null,icon:"",bold:0,allNotAvailableOrSoldout:!1,uscList:"green fun prestige adrenaline family greentravel".split(" "),emeacList:"green fun prestige supercars family greentravel".split(" "),clClass:"",iconClass:"",imgPref:"//images.hertz.com/vehicles/152x88/",passengers:"",luggage:"",transmission:"",airConditioning:"",fuel:"",carGroup:"",
carTypeDisplay:""},initialize:function(){0<this.get("collection")&&this.set("clClass","icons-"+(1==this.get("bold")?this.get("uscList")[this.get("collection")-1]+"_bold":this.get("emeacList")[this.get("collection")-1]));this.get("icon")&&this.set("iconClass","icons-"+this.get("icon")+"_lg")}})});
define("reservation/rate-details/core/model/extra-model",["backbone","utils/utils"],function(b,c){return b.Model.extend({defaults:{name:"",quantity:0,total:0,currency:"",duration:"",img:"",description:"",note:"",removable:!1},initialize:function(){var a=this.get("total");0<a?this.set("total",c.formatPrice(a)):this.set("total",null)}})});
define("reservation/rate-details/core/model/inclexcl-model",["backbone"],function(a){return a.Model.extend({defaults:{name:"",value:""}})}); 
define("reservation/rate-details/core/model/rate-model",["backbone","utils/utils"],function(c,b){return c.Model.extend({defaults:{key:"",name:"",quantity:0,unitRate:0,total:0,currency:"",duration:""},initialize:function(){var a=this.get("total");0<a?this.set("total",b.formatPrice(a)):this.set("total",null);a=this.get("unitRate");0<a?this.set("unitRate",b.formatPrice(a)):this.set("unitRate",null)}})});  
define("reservation/rate-details/core/model/rate-details-model","backbone reservation/rate-details/core/model/vehicle-model reservation/rate-details/core/model/inclexcl-model reservation/rate-details/core/model/rate-model utils/utils config/app-config reservation/rate-details/core/model/paynow-paylater-model reservation/rate-details/core/model/rate-info-model reservation/rate-details/core/model/general-info-model reservation/rate-details/core/model/session-model".split(" "),function(d,l,e,m,n,o,f,
g,h,p){var i=d.Collection.extend({model:e}),j=d.Collection.extend({model:e}),k=d.Collection.extend({model:m});return d.Model.extend({defaults:{vehicle:null,payNow:null,paylater:null,inclusions:null,exclusions:null,optionals:null,discounts:null,rateInfo:null,generalInfo:null,session:null},url:function(){var a=o.config.rootContext+"/rest/hertz/v2/reservations/"+this.getReservationId()+"/rate-details",d=!1,a=0==this.get("session").get("state")?a+"/extras":a+"/bookable",b=this.get("vehSipp"),c=this.get("quoteIndex");
b&&(a+="?upsellSipp="+b,d=!0);c&&(d?a+="&quoteIndex="+c:a+="?quoteIndex="+c);return a},getReservationId:function(){return this.reservationId},parse:function(a,d){if(!n.sessionTimedOut(d)){if(!a)return a;a.data&&(a=a.data);if(a.vehicle){var b=new l(a.vehicle);a.vehicle=b}else a.vehicle=null;a.payNow?(b=new f(a.payNow),a.payNow=b,b.get("currency")&&b.get("alternateCurrency")&&(b.get("currency"),b.get("alternateCurrency")),a.payNow=b):a.payNow=new f;a.payLater?(b=new f(a.payLater),b.get("currency")&&
b.get("alternateCurrency")&&(b.get("currency"),b.get("alternateCurrency")),a.payLater=b):a.payLater=new f;a.inclusions?(b=new i,b.reset(a.inclusions),a.inclusions=b):a.inclusions=new i;a.exclusions?(b=new j,b.reset(a.exclusions),a.exclusions=b):a.exclusions=new j;b=!1;a.optionals?(b=new k,b.reset(a.optionals),a.optionals=b,b=!0):a.optionals=new k;if(a.rateInfo){var c=new g(a.rateInfo);a.rateInfo=c}else a.generalInfo&&a.generalInfo.isTATour&&(a.rateInfo=new g({isTATour:a.generalInfo.isTATour}));a.generalInfo?
(a.generalInfo.rateInfo=a.rateInfo,c=new h(a.generalInfo),a.generalInfo=c,a.generalInfo.get("milesNote1")&&(c=new e,c.set({text:a.generalInfo.get("milesNote1")}),a.inclusions.add(c)),a.generalInfo.get("milesNote2")&&(c=new e,c.set({text:a.generalInfo.get("milesNote2")}),a.exclusions.add(c,{at:0}))):a.generalInfo=new h;a.session=new p({suppressEditLink:a.generalInfo.get("suppressEditLink"),hasOptionals:b});return a}}})});
define("reservation/rate-details/core/view/vehicle-view",["jquery","underscore","backbone","utils/gtm-tracker"],function(a,b,c,d){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-veh-details-tpl").html());this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.session=this.options.session;this.model.on("change",this.render,this);this.render()},events:{"click .rd-veh-detail-link":"showDetail"},showDetail:function(){this.viewHelper.showVehicleDetail(this.model,
{orSimilarText:this.content.bookablePage.rateDetailsView.similarVehicle,groupText:this.content.whatPage.whatViewVehicleInclude.groupText});if(!htz.config.isApp){var a={scenario:"productView-car"};a.payload=this.model;d.track(a)}},render:function(){if(!this.model.get("sipp"))return this;this.$el.html(this.template(a.extend(!0,this.model.attributes,{content:this.content,session:this.session.attributes})));return this},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.content=
this.template=this.viewHelper=null}})});  
define("reservation/rate-details/core/view/discount-view",["jquery","underscore","backbone"],function(c,a,d){return d.View.extend({initialize:function(){this.template=a.template(c("#rate-details-discounts-tpl").html());this.content=this.options.content;this.render()},render:function(){var b=this.model;0<a.size(b)?(this.$el.html(this.template({content:this.content,discounts:b})),this.$el.show()):this.$el.hide();return this},doCleanup:function(){this.content=this.template=null}})});
define("reservation/rate-details/core/view/exclusive-list-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-details-excl-tpl").html());this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.render()},render:function(){0<this.collection.size()?(this.$el.html(this.template({content:this.content,collection:this.collection.models})),this.$el.show()):this.$el.hide();return this},doCleanup:function(){this.viewHelper.doCleanup&&
this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=null}})});
define("reservation/rate-details/core/view/extra-detail-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-details-extDetail-tpl").html());this.content=this.options.content;this.render()},render:function(){this.$el.html(this.template(a.extend(!0,this.model.attributes,{content:this.content})));return this},doCleanup:function(){this.content=this.template=null}})});
define("reservation/rate-details/core/view/extras-list-view",["jquery","underscore","backbone"],function(a,c,d){return d.View.extend({initialize:function(){this.template=c.template(a("#rate-details-extras-tpl").html());this.collection=this.model;this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.showExtrasEditLink=this.options.showExtrasEditLink;this.state=this.options.state;this.render()},events:{"click .rd-extras-detail-link":"showInfo","click .rd-extra-remove-link":"removeExtra",
"click .rd-extra-edit-link":"showEditPage"},showInfo:function(b){this.viewHelper.showExtraDetail(this.collection.get(a(b.currentTarget).attr("lang")))},removeExtra:function(b){a.publish(htz.res.config.ReservationConstants.REMOVE_EXTRAS,[this.collection.get(a(b.currentTarget).attr("lang")).get("id")])},showEditPage:function(){this.viewHelper.showExtrasEditPage(this.state)},render:function(){0<this.collection.length?(this.$el.html(this.template({content:this.content,collection:this.collection.models,
showExtrasEditLink:this.showExtrasEditLink})),this.$el.show()):this.$el.hide()},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.collection=this.content=this.template=this.viewHelper=this.showExtrasEditLink=null}})});
define("reservation/rate-details/core/view/inclusive-list-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-details-incl-tpl").html());this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.includedMiles=this.options.includedMiles;this.showFeesAndSurchargeDiv=this.options.showFeesAndSurchargeDiv;this.render()},render:function(){0<this.collection.size()||this.includedMiles?(this.$el.html(this.template({content:this.content,
collection:this.collection.models,isRateDisplay:this.options.isRateDisplay,includedMiles:this.includedMiles,showFeesAndSurchargeDiv:this.showFeesAndSurchargeDiv})),this.$el.show()):this.$el.hide();return this},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=null}})}); 
define("reservation/rate-details/core/view/optionals-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-details-optionals-tpl").html());this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.render()},render:function(){0<this.collection.size()&&this.$el.html(this.template({content:this.content,collection:this.collection.models,state:this.options.state}))},doCleanup:function(){this.viewHelper.doCleanup&&
this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=null}})});
define("reservation/rate-details/core/view/base-rate-view",["jquery","underscore","backbone"],function(b,c,d){return d.View.extend({initialize:function(){this.template=c.template(b("#rate-details-base-rates-tpl").html());this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.generalInfo=this.options.generalInfo;this.render()},render:function(){var a=this.model;a&&0<a.length&&(a=a.models);a&&this.$el.html(this.template({content:this.content,baseRates:a,currency:this.model.get("currency"),
isEMEARuleActive:this.generalInfo.get("isEMEARuleActive"),ccGuaranteed:this.generalInfo.get("ccGuaranteed")}))},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=null}})});
define("reservation/rate-details/core/view/mandatory-rate-view",["jquery","underscore","backbone"],function(b,c,d){return d.View.extend({initialize:function(){this.template=c.template(b("#rate-details-mandatory-rates-tpl").html());this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.generalInfo=this.options.generalInfo;this.showTaxFeildInsteadofFees=this.generalInfo.get("isDisplayInclusionRates");this.render()},render:function(){var a=this.model;a&&0<a.length&&(a=a.models);
a&&this.$el.html(this.template({content:this.content,manRates:a,currency:this.model.get("currency"),isCalcTaxOn:this.generalInfo.get("isCalcTaxOn"),isEMEARuleActive:this.generalInfo.get("isEMEARuleActive"),isTax:this.showTaxFeildInsteadofFees}))},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=this.generalInfo=null}})});
define("reservation/rate-details/core/view/taxes-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-details-taxes-tpl").html());this.isSeparateTax=this.options.isSeparateTax;this.content=this.options.content;this.taxes=this.options.taxes?this.options.taxes:null;this.render()},render:function(){this.$el.html(this.template(a.extend(!0,this.model.attributes,{content:this.content,taxes:this.taxes.models,isSeparateTax:this.isSeparateTax})));
return this},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=null}})});
define("reservation/rate-details/core/view/total-rate-view","jquery underscore framework/view/abstract-view reservation/utils/core/reservation-utils reservation/process-info/core/model/process-model reservation/process-config/core/reservation-constants".split(" "),function(d,e,c,f,g,h){return c.extend({initialize:function(){this.template=d("#rate-details-total-splits-tpl");this.content=this.options.content;this.payType=this.options.payType;this.isPrepay=this.options.isPrepay;this.rateInfo=this.options.rateInfo;
this.totalPlaceholders={toBePaid:this.content.bookablePage.rateDetailsView.toBePaidTotal};this.approxPlaceholders={toBePaid:this.content.bookablePage.rateDetailsView.toBePaid};this.render()},render:function(){var c=g.getStep()===h.REVIEW,a="payLater"==this.payType&&this.model.get("total")?this.model.get("total"):0,a={isPrepay:this.isPrepay,currency:this.rateInfo.get("currency"),alternateCurrency:this.rateInfo.get("alternateCurrency"),payLater:a},b=f.approxRateDecider(a),a=this.rateInfo.get("balance"),
b=b?this.approxPlaceholders:this.totalPlaceholders;0<=a?b.creditCardBalanceText=this.content.bookablePage.rateDetailsView.yourCCWillBeCharged:(b.creditCardBalanceText=this.content.bookablePage.rateDetailsView.yourCCWillBeRefunded,a=Math.abs(a));this.$el.empty();this.$el.append(e.template(this.template.html(),d.extend({},this.model.attributes,{content:this.content,placeholders:b,isApp:htz.config.isApp,isReview:c,payType:this.payType,rateInfo:this.rateInfo.attributes,balance:a})));this.postRender()},
doCleanup:function(){this.content=this.template=null}})});
define("reservation/rate-details/core/view/vehicle-detail-view",["jquery","underscore","backbone"],function(a,b,c){return c.View.extend({initialize:function(){this.template=b.template(a("#rate-details-vehDetail-tpl").html());this.content=this.options.content;this.render()},render:function(){this.$el.html(this.template(a.extend(!0,this.model.attributes,{content:this.content})));return this},doCleanup:function(){this.content=this.template=null}})});
define("reservation/rate-details/core/view/rate-details-view","jquery underscore reservation/rate-details/core/view/rate-type-breakdown-view reservation/rate-details/core/view/optionals-view framework/view/abstract-view reservation/rate-details/core/view/total-rental-amount-view utils/gtm-tracker".split(" "),function(b,c,d,e,f,g,h){Backbone.pubSub=c.extend({},Backbone.Events);return f.extend({initialize:function(){Backbone.pubSub.on("extrasShowFullDetail",this.showFullDetail,this);this.template=c.template(b("#rate-details-main-tpl").html());
this.content=this.options.content;this.viewHelper=this.options.viewHelper;this.model.on("change",this.render,this)},events:{"click .rd-fuel-surcharge-link":"showFuelInfo","click .rd-full-link":"showFullDetail","click .rd-view-options-link":"handleOptionalDisplay","click .rd-currency-converter-link":"showCurrencyConverter","click #rd-rate > header a":"showEditPage","click .rd-edit-link":"showEditPage","click .rd-header-crtl":"handleRatedetailToggle"},showFuelInfo:function(){this.viewHelper.showFuelOptionDetail(this.model.get("locationCode"))},
showFullDetail:c.debounce(function(){this.viewHelper.showFullRateDetail(this.model,this.content,this.viewHelper,this.content.bookablePage.rateDetailsView.moreDetailAboutQuote)},300),handleOptionalDisplay:function(a){b(a.currentTarget).parent().hasClass("rd-opt-detail-link1")?(this.$(".rd-opt-detail-link1").hide(),this.$(".rd-opt-detail-link2").show()):(this.$(".rd-opt-detail-link2").hide(),this.$(".rd-opt-detail-link1").show());this.$(".rd-optionals").toggleClass("hidden-item")},showCurrencyConverter:function(){this.viewHelper.showCurrencyConverter(this.model)},
showEditPage:function(){this.viewHelper.showVehicleEditPage(this.model.get("session").get("state"));if(!htz.config.isApp){var a={scenario:"removeFromCart-car"};a.payload=this.model;h.track(a)}},handleRatedetailToggle:function(){var a=this.$(".rd-header-crtl");a&&a.is(":visible")&&(this.$(".rd-detail, #rd-more, .rd-pending-details").toggleClass("hidden-item"),htz.config.isApp&&"#res-vehicles-page-container"==location.hash&&(b(".rd-edit-cont").find(".rd-edit-link").remove(),b("#rd-more").find(".rd-info").remove()),
this.$el.find("#expand_collapse_vehicle").hasClass("icons-expand_icon")?this.$el.find("#expand_collapse_vehicle").removeClass("icons-expand_icon").addClass("icons-collapse_icon"):this.$el.find("#expand_collapse_vehicle").removeClass("icons-collapse_icon").addClass("icons-expand_icon"))},formatPayNowPayLaterView:function(){b.trim(this.$("#rd-pay-now").html()).length?b.trim(this.$("#rd-pay-later").html()).length||(this.$("#rd-pay-later").hide(),this.$(".plus").hide(),this.$(".equals").css("visibility",
"hidden")):(this.$("#rd-pay-now").hide(),this.$(".plus").hide(),this.$(".equals").css("visibility","hidden"))},render:function(){return this.renderView()},renderYourself:function(){var a=this.model.get("generalInfo"),a=a&&a.get("isPrepay")?a.get("isPrepay"):!1;if(this.model.get("vehicle")){var c=this;this.$el.html(this.template({content:this.content,session:this.model.get("session").attributes,rateInfo:this.model.get("rateInfo").attributes,generalInfo:this.model.get("generalInfo").attributes}));a&&
(this.model.get("payNow")&&0<this.model.get("payNow").get("total"))&&(this.payNowView=new d({viewHelper:this.viewHelper,content:this.content,el:this.$("#rd-pay-now"),model:this.model,type:"payNow",isRateDisplay:this.options.isRateDisplay}));if(!a||a&&this.model.get("payLater")&&(0<this.model.get("payLater").get("total")||0<this.model.get("payLater").get("extras").length))this.payLaterView=new d({viewHelper:this.viewHelper,content:this.content,el:this.$("#rd-pay-later"),model:this.model,type:"payLater",
isRateDisplay:this.options.isRateDisplay});this.model.get("rateInfo")&&0<this.model.get("rateInfo").get("approxTotal")?this.totalRentalAmountView=new g({content:this.content,el:this.$("#rd-rental-total"),model:this.model.get("rateInfo"),isPrepay:a,payLater:this.model.get("payLater").get("total")}):this.$("#rd-rental-total").hide();this.optionalView=new e({viewHelper:this.viewHelper,content:this.content,el:this.$(".rd-optionals"),collection:this.model.get("optionals"),isOptionalsWithTax:this.model.get("generalInfo").get("isOptionalsWithTax"),
state:this.model.get("session").get("state")});this.formatPayNowPayLaterView();b(document).off("click","#rqrLookupRentalQualification").on("click","#rqrLookupRentalQualification",function(){c.viewHelper.showRentalQualification(c.model.get("locationCode"))})}},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.content=this.template=this.viewHelper=null}})}); 
define('reservation/rate-details/core/view/helper/view-helper', 
	   ['utils/utils-proxy', 'reservation/rate-details/core/model/vehicle-model', 
	    'reservation/rate-details/core/view/rate-details-view', 
	    'reservation/rate-details/core/view/vehicle-detail-view',
	    'reservation/rate-details/core/view/extra-detail-view', 
	    'config/app-config','reservation/process-info/core/model/process-model', 
	    'reservation/config', 'helpers/resource-loader', 'reservation/process-config/core/reservation-constants', 'res/res-resource-config', 'reservation/utils/core/reservation-utils'], 
	   function(utilsProxy, rateDetailsModel, rateDetailsView, vehicleDetailView, extraDetailView, 
			    appConfig, process, resConfig, ResourceLoader, ResConstants, ResourceConfig, ResUtils) {
	
	var modelRef, viewRef, lightboxRef;
	
	function getLightBox(isNew) {
		if(isNew) { return new utilsProxy.getLightbox(); }
		if(!lightboxRef) { lightboxRef = new utilsProxy.getLightbox(); }
		else if(lightboxRef.isInUse()) {
			return new utilsProxy.getLightbox();
		}
		
		return lightboxRef;
	}

	
	var viewHelper = {
		/**
			@description It shows vehicle information in more detail in lightbox.
			@function 
			@param {object} model It's the vehicle model. 
			@param {object} content To be used for the title and "or similar" text
		*/
		showVehicleDetail: function(model, content) {
			var overlayTitle = ResUtils.generateVehicleDetailTitle ( model , content);
			getLightBox().overlay({title:overlayTitle, width:650}, (new vehicleDetailView({model: model})).$el);
		},
		/**
			@description It shows extras information in more detail in lightbox.
			@function 
			@param {object} model Its the extras model. 
		*/
		showExtraDetail: function(model) {
			getLightBox().overlay({title:model.get("name")}, (new extraDetailView({model: model})).$el);
		},
		/**
			@description It shows the fuel purchase options disclaimer.
			@function 
		*/
		showFuelOptionDetail: function(loactionCode) {
			window.open(appConfig.config.rootContext + "/reservation/reviewmodifycancel/templates/rentalTerms.jsp?KEYWORD=CFPO&EOAG="+loactionCode, "Rental_Terms", "width=700, height=500, left=200,top=100");
		},
		/**
			@description It shows currency converter.
			@function 
		*/
		showCurrencyConverter: function(modelRef) {
			
			var toLoad = ResourceConfig.getPageInfo(ResConstants.CURRENCY_CONVERTER) ;

			toLoad.callback = function( options ){
				require(['reservation/currency-converter/core/presenter/currency-converter-presenter'], function(ConverterPresenter){
						ConverterPresenter.show({
						template : options.template,
						content : options.content
					}, modelRef);
				});
			}

			ResourceLoader.load(toLoad);
		},
		/**
			@description It shows rental qualifications.
			@function 
		*/
		showRentalQualification: function(loactionCode) {
			window.open(appConfig.config.rootContext+'/reservation/reviewmodifycancel/templates/rentalTerms.jsp?EOAG='+loactionCode,'Rental_Terms_and_Qualification', 'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,left=200,top=100,width=700,height=500');
		},
		/**
			@description It takes user to vehicle page.
			@function 
		*/
		showVehicleEditPage: function(state) {
			if(state == 2) {  
				require(['reservation/confirmation/core/view/helper/view-helper'], function(viewHelper){
					viewHelper.editVehicle();
	 			});
				return;
			}

			var toPage = htz.res.config.ReservationConstants.VEHICLES;
			if(process.isModify()) {
				toPage = 'modify/'+toPage;
			}
			resConfig.getRotar().rotate(toPage);	
		},
		/**
			@description It takes user to extras page.
			@function 
		*/
		showExtrasEditPage: function(state) {
			if(state == 2) {
				require(['reservation/confirmation/core/view/helper/view-helper'], function(viewHelper){
					viewHelper.editExtras();
	 			});
				return;
			} 
			
			var toPage = htz.res.config.ReservationConstants.EXTRAS;
			if(process.isModify()) {
				toPage = 'modify/'+toPage;
			}
			resConfig.getRotar().rotate(toPage);	
		},
		/**
			@description It shows rate details in more detail on lightbox.
			@function 
			@param {object} model Its the rate detail model. 
		*/
		showFullRateDetail: function(model, content, viewHelper, title) {
			var newModel = model.clone();
			newModel.get('session').set({'state' : 3, 'showVehEditLink' : false, 'showExtrasEditLink' : false, }, {silent : true});
			newModel.get('generalInfo').set({'isEMEARuleActive': false}, {silent : true});
	
			getLightBox().overlay({title: title, width:1000, top:($(document).scrollTop() + 50)}, (new rateDetailsView({model: newModel, isRateDisplay: true, content : content, viewHelper : viewHelper })).render().$el);
		},
		doCleanup: function () {
			if (modelRef && modelRef.doCleanup) { modelRef.doCleanup(); }
			if (viewRef && viewRef.doCleanup) { viewRef.doCleanup(); }
			modelRef = viewRef = lightboxRef;
		}
	};
	
	return viewHelper;
});
 
define("reservation/rate-details/core/presenter/rate-details-presenter","json utils/sessionhelper reservation/rate-details/core/model/rate-details-model reservation/rate-details/core/view/rate-details-view reservation/rate-details/core/view/helper/view-helper config/app-config utils/utils-proxy reservation/process-info/core/model/process-model reservation/process-config/core/reservation-constants reservation/rate-details/core/model/vehicle-model".split(" "),function(j,i,m,q,r,n,o,s,e,t){function k(){try{a&&
i.setItem(e.RATE_DETAILS_DATA,j.stringify(a.toJSON()))}catch(b){}}var a,c;$.subscribe(e.CHANGE_VEHICLE_IN_REVIEW_BOOK,function(a,g){p.reload(g)});var p={showRateDetail:function(b,g,d,u,h){if(b)try{b.get("vehInfo"),a=b}catch(v){a=new m,a.set(a.parse(b)),h.vehicleData&&a.set("vehicle",new t(h.vehicleData)),a.set()}else if(b=i.getItem(e.RATE_DETAILS_DATA))if(b=j.parse(b))a=new m,a.set(a.parse(b));else return null;else return null;b=!1;h&&(b=!!h.optional);c&&$(g).off();c=new q({viewHelper:r,content:u,
el:g,model:a,isRateDisplay:!1});c.setOptional(b);c.render();return c},reload:function(b,g){if(a){b&&a.set({vehSipp:b},{silent:!0});if(s.isModify()){var d=i.getItem(e.CONFIRMATION_NUMBER);a.reservationId=d}else d=i.getItem(e.VEHICLES_DATA),d=j.parse(d).href.split("/"),a.reservationId=d[d.length-2];n.config.isApp||o.getSpinner().spin();a.fetch({cache:!1,success:function(a,b){if(b){k();var d,l,c,f;d=b.payNow&&b.payNow.get("total")?b.payNow.get("total"):0;payLater=b.payLater&&b.payLater.get("total")?
b.payLater.get("total"):0;(f=b.rateInfo)?(l=f.get("approxTotal"),c=f.get("paidAmount"),f=f.get("balance")):l=c=f=0;$.publish(e.CHANGE_RATE_IN_REVIEW_BOOK,[d,payLater,l,c,f]);g&&g()}},complete:function(){n.config.isApp||o.getSpinner().stop()}})}},reloadWithResponse:function(b){$.publish(e.CHANGE_RATE_IN_REVIEW_BOOK,[b.payNow,b.payLater,b.approxTotal,b.paidAmount,b.balance]);a.set(a.parse(b));k()},reloadPoints:function(b,c,d,e,h){a&&(b&&a.set({vehSipp:b},{silent:!0}),-1<d.length&&a.set({quoteIndex:d},
{silent:!0}),a.fetch({cache:!1,success:function(b,a){if(a&&(k(),c&&"function"==typeof c)){var d=a.rateInfo&&a.rateInfo.get("approxTotal")?a.rateInfo.get("approxTotal"):"",f=a.generalInfo&&a.generalInfo.get("totalAvailablePoints")?a.generalInfo.get("totalAvailablePoints"):"";c(a.payNow,a.payLater,d);e.text(d);h.text(f)}}}))},doCleanup:function(){a&&a.doCleanup&&a.doCleanup();c&&c.doCleanup&&c.doCleanup();a=c=null}};return p});
define("reservation/vehicle/core/model/quote-model",["utils/restmodel","config/app-config"],function(a){return a.extend({defaults:{id:"",href:"",prepaid:0,rateType:0,price:"",approxTotalPrice:"",currency:"",save:"",vehicleIndex:0,quoteIndex:0,fee:"",allNotAvailableOrSoldout:!1,guarantee:"",mileageCap:"",isUnlimitedMiles:!1,priced:0,prepaidNotice:0,rate:"",guaranteed:!1,phone:"",vto:"",isSpecialityVehicle:!1,isFlightRequired:!1,creditCardRequired:!1,rateCode:"",ccGuaranteed:!1,cancelFeeModel:null},
initialize:function(){this.constructor.__super__.initialize.apply(this,arguments);this.get("price")&&this.set({price:parseFloat(this.get("price")).toFixed(2)})},handleSessionTimeout:function(a){this.trigger("session-timeout",a)}})});  
define("reservation/vehicle/core/model/vehicle-model",["backbone","config/app-config","reservation/vehicle/core/model/vehicle-collection-model","reservation/vehicle/core/model/quote-model"],function(d,e,f,g){return d.Model.extend({defaults:{imgPrefix:"//images.hertz.com/vehicles/220x128/",carGroup:"",carTypeDisplay:""},initialize:function(){var a=this.get("quotes"),b=this.get("collection"),c=this.get("icon");if(a){var h=d.Collection.extend({model:g});this.set("quotes",new h(a))}b&&(a="icons-"+(this.get("bold")?
f[b-1].bold:f[b-1].normal),this.set("collectionClass",a));c&&(this.set("iconsSmall","icons-"+c+"_sm"),this.set("iconsLarge","icons-"+c+"_lg"));this.get("multiRate")&&this.set("dualRate","dual");this.get("selected")&&this.set("selected","selected");this.get("passengers")&&this.set("passengersNumber",this.get("passengers").split(" ")[0]);!e.config.isApp&&"phone"===e.config.deviceGroup&&this.set("hideVehicleDetails",!0);this.set("img_url",this.get("imgPrefix")+this.get("img"))}})});
define("reservation/vehicle/core/model/vehicle-collection-model",[],function(){return[{normal:"green"},{normal:"fun"},{normal:"prestige",bold:"prestige_sm"},{normal:"supercars",bold:"adrenaline_sm"},{normal:"family"},{normal:"greentravel",bold:"greentravel_sm"}]});
define("reservation/vehicle/core/model/vehicle-page-model",["backbone","utils/restmodel","reservation/vehicle/core/model/vehicle-model"],function(f,g,h){return g.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments)},parse:function(b){var a=b.vehicles;if(a){var c=f.Collection.extend({model:h});b.vehicles=new c(a)}b.metaData=new f.Model(b.metaData);return b},doSort:function(){var b=this.get("vehicles"),a=this.get("sortBy"),c=this.get("sortDir"),a="price"===a||"size"===
a?a:null,c="down"===c?-1:1;b.comparator="size"===a?function(a){return a.get("sippIndex")*c}:"price"===a?function(a,b){var d=a.get("quotes").models[0].get("price"),e=b.get("quotes").models[0].get("price");return d&&e?(d-e)*c:d?-1:e?1:a.get("vehicleIndex")-b.get("vehicleIndex")}:function(a){return a.get("vehicleIndex")};b.sort()}})});   
define("reservation/vehicle/core/view/quote-view","jquery underscore backbone utils/utils-proxy utils/sessionhelper reservation/process-config/core/reservation-constants reservation/vehicle/core/view/helper/view-helper reservation/vehicle/core/view/ratedetails-overlay-view utils/gtm-tracker reservation/common/retry/core/view/retry-view config/app-config reservation/itinerary/core/model/itinerary-model reservation/reservation-info/core/model/reservation-info-model".split(" "),function(i,p,r,f,g,h,
m,s,l,q,j,n){function k(){null==o&&(o=f.getLightbox());return o}var o=null;return r.View.extend({initialize:function(a){this.page=a.page;this.index=a.index;this.content=this.options.content;this.viewReferrer=this.options.viewReferrer;this.bindEvents()},events:{"click button":"handleCDPVerification","click .show-rate-details":"showRateDetails","click #returnHomeBtn":"returnToHomePage"},bindEvents:function(){this.model.on("session-timeout",this.handleSessionTimeout,this)},handleSessionTimeout:function(a){a&&
(window.location.href=a)},isCDPVerificationReq:function(a){var e=i.Deferred(),b;try{b=a}catch(d){b=""}i.ajax({type:"GET",url:j.config.rootContext+"/rest/hertz/v2/reservations/AAA/vehicles/"+b,cache:!1,async:!1,dataType:"jsonp",success:function(a){"true"==a.data?e.resolve():e.reject()},error:function(a,b,d){console.error("error fetching isCDPVerificationReq endpoint");console.error(b);console.error(d);e.reject()}});return e.promise()},handleCDPVerification:p.debounce(function(){var a=this,e,b=new n(JSON.parse(g.getItem(h.ITINERARY_DATA)));
e=b.get("metaData").get("loggedIn")?"otherCdpIndicator"==b.get("formData").get("cdpRadioButton")?b.get("formData").get("memberOtherCdpField"):b.get("formData").get("memberSelectedCdp"):b.get("formData").get("cdpField");try{"US"==htz.config.pos?this.isCDPVerificationReq(e).done(function(){function e(c){c.stopPropagation();if("memberValidationSuccess"==c.data.status||"memberValidationCancel"==c.data.status)if("memberValidationSuccess"==c.data.status){window.removeEventListener(f,e,!1);i("#aaanational-membervalidation").remove();
if(!htz.config.isApp)try{var d={scenario:"cdp_validation",payload:{}};d.payload.id=b.get("formData").get("cdpField");d.payload.name=a.viewReferrer.metaData.get("itinerary").discounts[0];d.payload.status="validated";l.track(d)}catch(j){console.log("Error with AAA CDP validation."+j.message)}a.model.set({partnerCDPVerified:1},{silent:!0});a.submit()}else{if("memberValidationCancel"==c.data.status){window.removeEventListener(f,e,!1);i("#aaanational-membervalidation").remove();g.setItem(h.VEHICLES_ERROR_DATA,
'{"messages":["'+(a.content.reservationGlobals.errorMsg.AAAValidationFailed?a.content.reservationGlobals.errorMsg.AAAValidationFailed:"Discount code validation failed")+'"]}');if(!htz.config.isApp)try{d={scenario:"cdp_validation",payload:{}},d.payload.id=b.get("formData").get("cdpField"),d.payload.name=a.viewReferrer.metaData.get("itinerary").discounts[0],d.payload.status="canceled",l.track(d)}catch(k){console.log("Error with AAA CDPvalidation."+k.message)}a.resubmitItenerary(a)}}else"memberValidationLoaded"===
c.data.status&&(window.AAAValidationLoaded=!0)}var c=document.createElement("iframe");c.src="https://www.aaa.com/sharedservices/validate?vendor=hertz";c.style.display="block";c.style.position="fixed";c.style.width="100%";c.style.height="100%";c.style.margin="0";c.style.padding="0";c.style.border="0";c.style.background="transparent";c.style.zIndex="100000000";c.id="aaanational-membervalidation";var d=window.addEventListener?"addEventListener":"attachEvent",f="attachEvent"==d?"onmessage":"message";
window[d](f,e,!1);document.getElementsByTagName("body")[0].insertBefore(c,document.getElementsByTagName("body")[0].firstChild);if(!htz.config.isApp)try{c={scenario:"cdp_validation",payload:{}},c.payload.id=b.get("formData").get("cdpField"),c.payload.name=a.viewReferrer.metaData.get("itinerary").discounts[0],c.payload.status="shown",l.track(c)}catch(j){console.log("Error with AAA CDPvalidation."+j.message)}setTimeout(function(){window.AAAValidationLoaded||document.getElementById("aaanational-membervalidation").remove()},
2E4)}).fail(function(){void 0!==a.model.attributes.selectForQuote&&1===a.model.attributes.selectForQuote?(g.setItem(h.NEW_SIPP,a.model.sipp),a.resubmitQuotesCall(a)):a.submit()}):void 0!==a.model.attributes.selectForQuote&&1===a.model.attributes.selectForQuote?(g.setItem(h.NEW_SIPP,a.model.sipp),a.resubmitQuotesCall(a)):a.submit()}catch(d){console.log("error processing handleCDPVerification form vehicles page"),void 0!==a.model.attributes.selectForQuote&&1===a.model.attributes.selectForQuote?(g.setItem(h.NEW_SIPP,
a.model.sipp),a.resubmitQuotesCall(a)):a.submit()}},1E3),resubmitItenerary:function(){var a=this,e=new n(JSON.parse(g.getItem(h.ITINERARY_DATA))),b=e.get("metaData"),d=e.get("formData");b.get("loggedIn")?d.set({corporateRate:"",memberSelectedCdp:"",memberOtherCdpField:"",cdpRadioButton:"",checkDiscount:"",officialTravel:""},{silent:!0}):d.set({cdpField:""},{silent:!0});d.set({checkDiscount:""},{silent:!0});g.setItem(h.ITINERARY_DATA,JSON.stringify(e));d.set({cdpVerificationFailed:!0},{silent:!0});
q.saveWithRetry(d,{},{url:j.config.rootContext+"/rest/hertz/v2/itinerary/vehicles",type:"POST",beforeSend:function(){j.config.isApp?htz.utils.Spinner.spin():f.getSpinner().spin()},error:function(){a.viewReferrer.goHome();f.getSpinner().stop()},success:function(b,c){i("#aaanational-membervalidation").remove();c&&c.resultInfo&&c.data?(k().closeOverlay(),a.viewReferrer.handlePostAAAVerification(c.data)):(a.viewReferrer.goHome(),f.getSpinner().stop())}})},resubmitQuotesCall:function(){var a=this,e=new n(JSON.parse(g.getItem(h.ITINERARY_DATA))),
b=e.get("metaData"),d=e.get("formData");d.attributes.selectedCarType=g.getItem(h.NEW_SIPP);i("html,body").scrollTop(0);b.get("loggedIn")?d.set({corporateRate:"",memberSelectedCdp:"",memberOtherCdpField:"",cdpRadioButton:"",checkDiscount:"",officialTravel:""},{silent:!0}):d.set({cdpField:""},{silent:!0});d.set({checkDiscount:""},{silent:!0});g.setItem(h.ITINERARY_DATA,JSON.stringify(e));d.set({cdpVerificationFailed:!0},{silent:!0});q.saveWithRetry(d,{},{url:j.config.rootContext+"/rest/hertz/v2/itinerary/vehicles",
type:"POST",beforeSend:function(){j.config.isApp?htz.utils.Spinner.spin():f.getSpinner().spin()},error:function(a,b){Utils.displayErrorMessage(JSON.parse(b.responseText).message,document.querySelector("#res-vehicles-page #vehicles #error-list"));f.getSpinner().stop()},success:function(b,c){i("#aaanational-membervalidation").remove();c&&c.resultInfo&&c.data?(k().closeOverlay(),a.viewReferrer.handlePostAAAVerification(c.data)):(a.viewReferrer.goHome(),f.getSpinner().stop())}})},submit:function(){htz.config.isApp&&
localStorage.setItem("vehiclePageBack",!0);var a=this,e=JSON.parse(g.getItem(h.ITINERARY_DATA)),b=e.formData,e=e.metaData;a.model.get("citySpecialPrice")&&(""!=b.cdpField||(""!=b.pcNumber||b.cvNumber&&""!=b.cvNumber||b.itNumber&&""!=b.itNumber||b.typeInRateQuote&&"1click"!=b.typeInRateQuote)||e.loggedIn&&(b.memberSelectedCdp&&""!=b.memberSelectedCdp||""!=b.memberOtherCdpField||""!=b.corporateRate||""!=b.officialTravel))?require(["reservation/vehicle/core/view/vehicle-city-special-cdp-view"],function(b){k().overlay({title:a.content.whatPage.whatViewOverlays.citySpecialsCdpOvlerayTitle,
close:function(){m.trackCitySpecials("Close")}},(new b({template:"#city-special-cdp-warning-tpl",handleSelect:function(b){a.selectFromCitySpecialCdpView(b)},content:a.content})).render().el)}):a.viewReferrer.submitFromQuoteView(a.model);htz.config.isApp||(b={scenario:"addToCart-car",payload:this},l.track(b),b.scenario="productClick-car",l.track(b))},selectFromCitySpecialCdpView:function(a){a.hasClass("close")?(m.trackCitySpecials("NoButton"),k().closeOverlay()):(m.trackCitySpecials("ContinueButton"),
this.viewReferrer.submitFromQuoteView(this.model))},render:function(){var a=g.getItem(h.SELECTED_VEHICLE_INFO),e="selected"==this.options.isThisVehicleSelected,b,a=void 0!=a&&null!=a;b=this.options.showRateDetails&&!a;this.$el.append(p.template(i("#quote-tpl").html(),{content:this.content,quote:this.model.attributes,page:this.page,index:this.index,isMultiRate:this.options.isMultiRate,showRateDetails:b,isVehicleSelected:a,isThisVehicleSelected:e}));return this},showRateDetails:function(a){a=i(a.target).attr("data-index");
this.model.set({img:this.options.image,sipp:this.options.sipp,carTypeDisplay:this.options.carTypeDisplay,carGroup:this.options.carGroup,name:this.options.name},{silent:!0});this.lightbox||(this.lightBox=f.getLightbox());this.lightBox.overlay({title:this.model.get("price")+" "+this.model.get("currency")+" "+this.model.get("rate"),width:584,center:!0},(new s({index:a,template:"#rate-overlay-tpl",content:this.content,sipp:this.options.sipp,href:this.options.href,vehicle:this.model.attributes,quoteView:this})).el)},
returnToHomePage:function(){document.location.href=htz.config.rootContext},doCleanup:function(){this.page=this.index=this.content=this.viewReferrer=null}})});     
define("reservation/vehicle/core/view/vehicle-view",["jquery","underscore","backbone","reservation/vehicle/core/view/quote-view"],function(g,e,h,i){return h.View.extend({className:"vehicle",events:{"click a.show-more-details":"moreDetails","click a.show-less-details":"lessDetails","click .mobile-info":"mobileDetails","click .more-info":"citySpecialsInfo","click img.car-info":"carInfo"},carInfo:function(){this.viewHelper.showCarInfo(this.model,this.content);return!1},citySpecialsInfo:function(){this.viewHelper.showCitySpecialsInfo(this.content)},
details:function(){this.$el.find(".more-details").toggle();this.$el.find(".links-toggle").toggle();return!1},moreDetails:function(){this.$el.find(".more-details").show();this.$el.find(".show-link").hide();this.$el.find(".hide-link").show();return!1},lessDetails:function(){this.$el.find(".more-details").hide();this.$el.find(".show-link").show();this.$el.find(".hide-link").hide();return!1},mobileDetails:function(){this.$el.find(".features").toggleClass("hidden-item");return!1},initialize:function(a){this.page=
a.page;this.content=this.options.content;this.template=this.options.template;this.viewHelper=this.options.viewHelper;this.viewReferrer=this.options.viewReferrer;this.vehicleCollectionList=this.viewHelper.vehicleCollectionList(this.content);this.model.on("reset",this.resetting,this)},resetting:function(){this.render()},render:function(){for(var a=this,c=a.model.get("quotes"),f=!1,b=0;b<c.models.length;b++)c.models[b].get("citySpecialPrice")&&(f=!0);a.$el.append(e.template(g(a.template).html(),{vehicle:this.model.toJSON(),
page:this.page,content:this.content,vehicleCollection:this.vehicleCollectionList,isCitySplVehicle:f}));a.model.get("allNotAvailableOrSoldout")||(htz.config.isApp?a.$el.find(".image").prepend('<img class="app-car-info" src="'+a.model.get("img_url")+'" />'):a.$el.find(".image").prepend('<img class="car-info" src="'+a.model.get("img_url")+'" />'));e.each(c.models,function(d,b){d.quotes=c;d.sipp=a.model.get("sipp");a.$el.find(".pricing .wrapper:eq("+b+")").append((new i({viewReferrer:a.viewReferrer,content:a.content,
model:d,page:a.page,isMultiRate:a.model.get("multiRate"),sipp:a.model.get("sipp"),href:d.get("href"),image:a.model.get("img"),carGroup:a.model.get("carGroup"),carTypeDisplay:a.model.get("carTypeDisplay"),name:a.model.get("name"),index:b,showRateDetails:a.page.showRateDetails,isThisVehicleSelected:a.model.get("selected")})).render().el)});return this},doCleanup:function(){this.viewHelper.doCleanup&&this.viewHelper.doCleanup();this.page=this.content=this.template=this.viewHelper=this.viewReferrer=this.vehicleCollectionList=
this.model=null}})});  
define("reservation/vehicle/core/view/vehicle-list-view","jquery underscore config/utilconfig framework/view/abstract-view reservation/common/content-format/core/view/content-format-view reservation/vehicle/core/view/vehicle-view config/app-config".split(" "),function(b,c,d,e,g,f,h){return e.extend({events:{"click span.sort-arrows a":"sort","change select":"sortDropDown","click button.display-count":"showAll","click .redeem-points-info a":"pointsOverlay"},showAll:function(){htz.config.isApp&&htz.utils.Spinner.spin();
this.viewReferrer.showAll()},sortDropDown:function(){}