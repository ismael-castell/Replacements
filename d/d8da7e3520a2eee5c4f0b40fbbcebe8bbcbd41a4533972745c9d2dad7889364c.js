(self.webpackChunknsweb=self.webpackChunknsweb||[]).push([[2567],{28366:function(t,e,n){"use strict";n(32068)},32068:function(t,e,n){function r(t){this.session=t}n(74916),n(64765),n(15306),r.CACHE_KEY="ns_institutions",r.CACHE_TIME=9e5,r.ACCESS_ENDPOINT="/api/v1/institutions-access",r.prototype.init=function(){var t=this.session.getItem(r.CACHE_KEY),e=window.location.hostname,n=window.location.pathname,i=window.location.search;if(NS_INSTITUTIONS_HOSTNAME!==e)try{if(t&&this.isValidCache(t))return!1;t&&this.clearSessionItem(r.CACHE_KEY);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState)if(400===s.status){var t={redirect:"false"};t.time=Date.now()+r.CACHE_TIME,this.setSessionItem(r.CACHE_KEY,t)}else{if(200!==s.status)throw new Error("Problem retrieving data for Institution. Error code "+s.status);JSON.parse(s.responseText).siteAccess&&this.redirectToInstitutions(n,i)}}.bind(this),s.open("GET",r.ACCESS_ENDPOINT),s.send()}catch(t){throw new Error("Unable to retrieve institution:"+t.message)}},r.prototype.isValidCache=function(t){try{var e=JSON.parse(t);return e.time&&Date.now()<e.time}catch(t){return!1}},r.prototype.setSessionItem=function(t,e){this.session.setItem(t,JSON.stringify(e))},r.prototype.clearSessionItem=function(t){this.session.removeItem(t)},r.prototype.redirectToInstitutions=function(){}