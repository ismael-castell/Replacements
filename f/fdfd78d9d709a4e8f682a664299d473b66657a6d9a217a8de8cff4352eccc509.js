"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}var cx,escapable,gap,indent,meta,rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,n=0;n<f;n+=1)u[n]=str(n,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,n=0;n<f;n+=1)"string"==typeof rep[n]&&(o=str(r=rep[n],p))&&u.push(quote(r)+(gap?": ":":")+o);else for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(o=str(r,p))&&u.push(quote(r)+(gap?": ":":")+o);return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(r=walk(o,n))?o[n]=r:delete o[n]);return reviver.call(t,e,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
var isNode=!1;!function(exports,require){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"==typeof e){var r,t=Object(this),n=t.length>>>0,a=0;if(2<=arguments.length)r=arguments[1];else{for(;a<n&&!a in t;)a++;if(n<=a)throw new TypeError("Reduce of empty array with no initial value");r=t[a++]}for(;a<n;a++)a in t&&(r=e(r,t[a],a,t));return r}}),Array.prototype.map||(Array.prototype.map=function(e,r){var t,n,a;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"==typeof e){for(1<arguments.length&&(t=r),n=new Array(o),a=0;a<o;){var f,u;a in i&&(f=i[a],u=e.call(t,f,a,i),n[a]=u),a++}return n}}),Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw new TypeError;var r=Object(this),t=r.length>>>0;if("function"==typeof e){for(var n=[],a=2<=arguments.length?arguments[1]:void 0,i=0;i<t;i++)if(i in r){var o=r[i];e.call(a,o,i,r)&&n.push(o)}return n}});var isNode="undefined"!=typeof module&&!!module.exports,vm=isNode?require("vm"):{runInNewContext:function(expr,context){with(context)return eval(expr)}};exports.eval=jsonPath;var cache={};function push(e,r){return(e=e.slice()).push(r),e}function unshift(e,r){return(r=r.slice()).unshift(e),r}function jsonPath(e,r,t){var s={resultType:t&&t.resultType||"VALUE",flatten:t&&t.flatten||!1,wrap:!t||!t.hasOwnProperty("wrap")||t.wrap,sandbox:t&&t.sandbox?t.sandbox:{},normalize:function(e){if(cache[e])return cache[e];var t=[],r=e.replace(/[\['](\??\(.*?\))[\]']/g,function(e,r){return"[#"+(t.push(r)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/(;)?(\^+)(;)?/g,function(e,r,t,n){return";"+t.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(e){var r=e.match(/#([0-9]+)/);return r&&r[1]?t[r[1]]:e});return cache[e]=r},asPath:function(e){for(var r=e,t="$",n=1,a=r.length;n<a;n++)t+=/^[0-9*]+$/.test(r[n])?"["+r[n]+"]":"['"+r[n]+"']";return t},trace:function(e,t,i){if(!e.length)return[{path:i,value:t}];var r=e[0],n=e.slice(1);if("^"===r)return i.length?[{path:i.slice(0,-1),expr:n,isParentSelector:!0}]:[];var a=[];function o(e){a=a.concat(e)}if(t&&t.hasOwnProperty(r))o(s.trace(n,t[r],push(i,r)));else if("*"===r)s.walk(r,n,t,i,function(e,r,t,n,a){o(s.trace(unshift(e,t),n,a))});else if(".."===r)o(s.trace(n,t,i)),s.walk(r,n,t,i,function(e,r,t,n,a){"object"==typeof n[e]&&o(s.trace(unshift("..",t),n[e],push(a,e)))});else if("("===r[0])o(s.trace(unshift(s.eval(r,t,i[i.length],i),n),t,i));else if(-1===r.indexOf("key")&&0===r.indexOf("?("))s.walk(r,n,t,i,function(e,r,t,n,a){s.eval(r.replace(/^\?\((.*?)\)$/,"$1"),n[e],e,i)&&o(s.trace(unshift(e,t),n,a))});else if(-1===r.indexOf("key")&&-1<r.indexOf(","))for(var f=r.split(","),u=0;u<f.length;u++)o(s.trace(unshift(f[u],n),t,i));else if(t&&0===r.indexOf("key")){var c=new RegExp(r.split("'")[1]);for(var l in t)t.hasOwnProperty(l)&&c.test(l)&&o(s.trace(n,t[l],push(i,l)))}else/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(r)&&o(s.slice(r,n,t,i));return a.reduce(function(e,r){return e.concat(r.isParentSelector?s.trace(r.expr,t,r.path):[r])},[])},walk:function(e,r,t,n,a){if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)a(i,e,r,t,n);else if("object"==typeof t)for(var f in t)t.hasOwnProperty(f)&&a(f,e,r,t,n)},slice:function(e,r,t,n){if(Array.isArray(t)){var a=t.length,i=e.split(":"),o=i[0]&&parseInt(i[0])||0,f=i[1]&&parseInt(i[1])||a,u=i[2]&&parseInt(i[2])||1;o=o<0?Math.max(0,o+a):Math.min(a,o),f=f<0?Math.max(0,f+a):Math.min(a,f);for(var c=[],l=o;l<f;l+=u)c=c.concat(s.trace(unshift(l,r),t,n));return c}},eval:function(r,e,t,n){if(!a||!e)return!1;-1<r.indexOf("@path")&&(s.sandbox._path=s.asPath(n.concat([t])),r=r.replace(/@path/g,"_path")),-1<r.indexOf("@")&&(s.sandbox._v=e,r=r.replace(/@/g,"_v"));try{return vm.runInNewContext(r,s.sandbox)}catch(e){throw new Error("jsonPath: "+e.message+": "+r)}}},a=e,n=s.resultType.toLowerCase();if(r&&e&&("value"==n||"path"==n)){var i=s.normalize(r);"$"===i[0]&&1<i.length&&i.shift();var o=s.trace(i,e,["$"]);return(o=o.filter(function(e){return e&&!e.isParentSelector})).length?1!==o.length||s.wrap||Array.isArray(o[0].value)?o.reduce(function(e,r){var t=r[n];return"path"===n&&(t=s.asPath(t)),s.flatten&&Array.isArray(t)?e=e.concat(t):e.push(t),e},[]):o[0][n]||!1:!!s.wrap&&[]}}}("undefined"==typeof exports?this.jsonPath={}:exports,"undefined"==typeof require?null:require);
var _bcc={};!function(){"use strict";_bcc={store:{wait_q:{n:"wait_q",t:"localStorage"}},tmpls:{},ptns:{wmbeacon:{rqTp:"post_limit",opts:[["beacon_url_domain",""],["beacon_url_path",""],["site_domain",""],["site_id","sams"],["site_version","d.www.2.0"],["tm_version","v0"]],tmpls:null}},ctxs:{"":{acts:{PERFORMANCE_METRICS:{ptns:{wmbeacon:{}}}}}}}}(_bcq);

!function(t){"use strict";t.utils.defKey="_def",t.utils.separator="__",t.utils.pctx="PCTX",t.utils.isEmptyObj=function(t){var r;for(r in t)if(t.hasOwnProperty(r))return!1;return!0},t.utils.createClass=function(t){function r(){this.initialize.apply(this,arguments)}var i;for(i in t)t.hasOwnProperty(i)&&(r.prototype[i]=t[i]);return r.prototype.initialize||(r.prototype.initialize=function(){}),r},t.utils.exceFiltering=function(t,r){return"string"==typeof t&&""!==t&&(t="string"==typeof r[t]?r[t]:t),t},t.utils.extend=function(){return t.utils.createClass(t.utils.merge.apply(this,arguments))},t.utils.toCamelCase=function(t,r){if("string"!=typeof t)return t;var i=t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});return r&&(i=t.charAt(0).toUpperCase()+t.slice(1)),i},t.utils.findValueByKey=function(t,r){var i,e,n="";if(Array.isArray(r))for(i=r.length,e=0;e<i;++e)if(Array.isArray(r[e])&&1<r[e].length&&r[e][0]===t){n=r[e][1];break}return n}}(_bcq);
!function(c,u){"use strict";c.utils.isIE=function(){var t,e,r,i;try{r=-1,i=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?e=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"):"Netscape"===navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})")),null!==e.exec(i)&&(r=parseInt(RegExp.$1,10)),t=-1!==r&&r}catch(t){}return t},c.utils.ieUrlLimit=function(){var t=c.utils.isIE();return!!t&&(t<9?2080:4997)},c.utils.hasVal=function(t){return null!=t},c.utils.bind=function(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent&&t.attachEvent("on"+e,r)},c.utils.addCommand=function(t,e,r){var i,a,n,o={};if("string"==typeof(i=t)&&2<=arguments.length&&Array.isArray(e))for(n=(o=e).length,a=0;a<n;a++)c.utils.addEntry(o[a],i,r)},c.utils.addEntry=function(t,e,r){var i,a,n,o,s;if(Array.isArray(t)&&c.utils.hasVal(t[0])&&(!(2<t.length)||c.utils.hasVal(t[1]))){e=e||"",i=Array.isArray(t[0])?t[0]:[t[0]],a=2<t.length?Array.isArray(t[1])?t[1]:[t[1]]:[c.utils.defKey],n=2<t.length?t[2]:t[1],c.data[e]=c.data[e]||{};try{i=i.join(c.utils.separator),a=a.join(c.utils.separator),c.data[e][i]=c.data[e][i]||{},c.data[e][i][a]=r?c.utils.mergeData(c.data[e][i][a],n):n}catch(t){c.utils.log("add failed under ctx ["+e+"] for group ["+i+"]")}if(("Checkout"===e||"Thankyou"===e)&&c.data[e]){if("py"===i)for(o in s=c.data[e].py)s.hasOwnProperty(o)&&(s[o].em="",s[o].cn="");if("ul"===i)for(o in s=c.data[e].ul)s.hasOwnProperty(o)&&(s[o].pp="",s[o].sp="");if("pc"===i)for(o in s=c.data[e].pc)s.hasOwnProperty(o)&&(s[o].em="");if("al"===i)for(o in s=c.data[e].al)s.hasOwnProperty(o)&&(s[o].pa="",s[o].sa="")}}},c.utils.addData=function(t,e){var r;if("object"!=typeof e||null===e)return e;for(r in t=t||{},e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},c.utils.fetchData=function(t,e){var r,i;if(c.utils.hasVal(e)&&t)for(i=(e="string"==typeof e?e.split("."):"number"==typeof e?e:[]).length,t=t[e[0]],r=1;r<i;r++)t=t&&t[e[r]];return t},c.utils.mergeData=function(t,e){var r;for(r in null!=e&&(t=t||{}),e)"object"==typeof e[r]&&t[r]?c.utils.mergeData(t[r],e[r]):e.hasOwnProperty(r)&&(t[r]=e[r]);return t},c.utils.getData=function(t,e,r){var i;return c.utils.hasVal(t)?i=c.utils.fetchData(c.data[t],e):c.utils.hasVal(e)&&(i=c.utils.fetchData(r,e)),i},c.utils.getDataNew=function(t,e){var r;return c.utils.hasVal(t)?r=c.utils.fetchData(c.data[t],e):c.utils.hasVal(e)&&(r=c.utils.fetchData(pulse.runtime.pulsePayload,e)),r},c.utils.readBaseEntry=function(t,e,r,i){var a,n,o,s,u;t=t||{};try{if(1<(n=e.length))for(s=r.length,a=0;a<n;a++)if(1===r.length&&r[0]===c.utils.defKey)t=c.utils.readEntry(t,[e[a]],i);else{for(u=[],o=0;o<s;o++)u.push(r[o][a]);t=c.utils.readEntry(t,[e[a],u],i)}}catch(t){c.utils.log("read failed under ctx ["+i+"] for group ["+e+"]")}return t},c.utils.readEntry=function(t,e,r,i){var a,n,o,s,u,l=c.utils.separator;if(t=t||{},!Array.isArray(e)&&e)return t;a=Array.isArray(e[0])?e[0]:[e[0]],n=1===e.length?[c.utils.defKey]:2===e.length?"string"==typeof e[1]||"number"==typeof e[1]?[e[1]]:Array.isArray(e[1])?e[1]:[c.utils.defKey]:Array.isArray(e[1])?e[1]:[e[1]],o=2===e.length&&n[0]===c.utils.defKey?e[1]:e[2],t=t||{},i&&(t=c.utils.readBaseEntry(t,a,n,r));try{for(t[a=a.join(c.utils.separator)]=t[a]||{},u=n.length,s=0;s<u;s++)Array.isArray(n[s])?t[a][n[s].join(l)]=void 0===o?c.utils.getData(r,a+"."+n[s].join(l)):o:t[a][n[s]]=void 0===o?c.utils.getData(r,a+"."+n[s]):o}catch(t){c.utils.log("read failed under ctx ["+r+"] for group ["+a+"]")}return t},c.utils.actionData=function(t,e,r,i){var a,n;if(t=t||{},Array.isArray(e))for(n=e.length,a=0;a<n;a++)t=c.utils.readEntry(t,e[a],r,i);return t},c.utils.rmvEntry=function(t,e){var r,i,a,n,o=c.utils.separator;if(Array.isArray(t)){r=Array.isArray(t[0])?t[0]:[t[0]],i=1<t.length?Array.isArray(t[1])?t[1]:[t[1]]:[c.utils.defKey];try{for(r=r.join(o),n=i.length,a=0;a<n;a++)Array.isArray(i[a])?delete c.data[e][r][i[a].join(o)]:delete c.data[e][r][i[a]]}catch(t){c.utils.log("Remove failed under ctx ["+e+"] for group ["+r+"]")}}},c.utils.rmvAllEntry=function(e,t){var r,i;if(!0===t)delete c.data[e];else if(Array.isArray(t)){i=t.length;try{for(r=0;r<i;r++)Array.isArray(t[r])?delete c.data[e][t[r].join(c.utils.separator)]:delete c.data[e][t[r]]}catch(t){c.utils.log("RemoveAll failed under ctx ["+e+"]")}}},c.utils.rmvCommand=function(t,e,r){var i,a;if("string"==typeof t)if(r)c.utils.rmvAllEntry(t,e);else if(Array.isArray(e))for(a=e.length,i=0;i<a;i++)c.utils.rmvEntry(e[i],t)},c.utils.setOptions=function(t){c.utils.merge(c.options,t),t&&t.item_category&&(c.utils.reportSuite(c.options),"object"==typeof s_omni&&s_omni&&"function"==typeof s_omni.sa&&s_omni.sa(window.s_account))},c.utils.reportSuite=function(t){var e;t=t||{},u.ptns.omniture&&(u.ptns.omniture.ds?c.utils.log("Tagging for Partner [omniture] is disabled"):(e=c.utils.buildReportSuite(t.item_category))?window.s_account=e:u.ptns.omniture.ds=!0)},c.utils.buildReportSuite=function(t){var e,r,i,a,n=[],o=pulse.runtime.omniture.enums,s=o&&o.rpIdFilter||{};if(t=Array.isArray(t)?t:[t],(e=c.utils.findValueByKey("s_account",u.ptns.omniture.opts))&&(n.push(e),Array.isArray(t)))for(i=t.length,r=0;r<i;r++)"string"==typeof(a=t[r])&&""!==a&&("autotires"===(a=(a="string"==typeof s[a]?s[a]:a).replace(/[\s\\&]/g,"").toLowerCase())?n.push(e.replace(/com$/,"")+a):"photocenter"===a||"pharmacy"===a?(n=[]).push(e.replace(/com$/,"")+a):n.push(a));return n.join()},c.utils.urlMatch=function(t){t=t||[];var e=document.location.href;if(t[0])return new RegExp(t[0],"g").test(e)?t[1]:null},c.utils.contextRule=function(){var t,e,r,i;if(void 0===c.context_rule&&(c.context_rule={},u&&u.context_rule))for(r=u.context_rule.length,e=0;e<r;e++)(t=u.context_rule[e]).rr&&(i=c.utils.urlMatch(t.rr.args))&&(c.context_rule[t.rn]=i)},c.utils.corsReq=function(t,e){var r;try{"withCredentials"in(r=new XMLHttpRequest)?(r.open(t,e,!0),r.withCredentials=!0):"undefined"!=typeof XDomainRequest?((r=new XDomainRequest).open(t,e),r.ontimeout=function(){},r.onprogress=function(){},r.onload=function(){c.utils.log(r.responseText)},r.onerror=function(){},r.timeout=1e4):r=null}catch(t){}return r},c.utils.getError=function(t){var e={code:0,desc:"Unknown error"};switch(t){case"no-ctx":e.code=1,e.desc="Invalid Ctx";break;case"no-act":e.code=2,e.desc="Invalid Act";break;case"no-rep":e.code=3,e.desc="No ReportId"}return e},c.utils.isResponsive=function(){if(window&&window._WML)return window._WML.IS_RESPONSIVE},c.utils.clientDim=function(){var t={},e=document?document.documentElement:null,r=window,i=r?r.screen:null;return e&&(t.vw=e.clientWidth,t.vh=e.clientHeight),i&&(t.sw=i.width,t.sh=i.height),r&&(t.iw=r.innerWidth,t.ih=r.innerHeight),t},c.utils.sniffPage=function(){var t={},e=document.getElementsByTagName("title")||{};return e=e[0]?e[0].text:"",t.tl=e,t},c.utils.aniviaMetadata=function(){try{if(WebViewJavascriptBridge&&WebViewJavascriptBridge.analytics)return WebViewJavascriptBridge.analytics();if(Bridge&&Bridge.info)return Bridge.info()}catch(t){}},c.topics=c.topics||{},c.topics.NEW_INTERNAL_VIEW="new_internal_view",c.utils.newInternalView=function(t){c.utils.referrer=t&&t.referrer?t.referrer:c.utils.referrer?c.utils.referrer:document.referrer},c.utils.resetPageViewMetadata=function(t){c.utils.newInternalView(t),c.original_page_view_id=c.page_view_id,c.utils.rumSeq=0,c.page_view_id=c.utils.getPageViewId(),c.utils.isResetPageViewMetadataTrigger=!0},c.utils.hashCode=function(t){var e,r=0;if(0===t.length)return r;for(e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r},c.utils.getReferralPvId=function(t){var e,r;try{(r=c.store.read("cpv_id",{storage:"sessionStorage"}))&&r!==t&&c.store.write("rpv_id",r,{storage:"sessionStorage"}),e=c.store.read("rpv_id",{storage:"sessionStorage"}),c.store.write("cpv_id",t,{storage:"sessionStorage"})}catch(t){_bcq&&_bcq.options&&"debug"===_bcq.options.mode&&(c.utils.log("ERROR: in referral page view id setting"),c.utils.log(t))}return e},c.utils.getSeqNum=function(){var t,e,r;try{t=c.store.getCookie("bstc"),(e=c.store.read(t,{storage:"localStorage"}))?e++:(e=1,(r=c.store.read("pulse_old_bstc_value",{storage:"localStorage"}))&&localStorage.removeItem("_bc_"+r),c.store.write("pulse_old_bstc_value",t,{storage:"localStorage"})),c.store.write(t,e,{storage:"localStorage"})}catch(t){_bcq&&_bcq.options&&"debug"===_bcq.options.mode&&(c.utils.log("ERROR: in setting seqNum"),c.utils.log(t))}return e},c.utils.getCorrelationId=function(){var t;try{var e=document.getElementById("tb-djs-wml-data");e&&(t=JSON.parse(e.innerHTML).correlationId)}catch(t){_bcq&&_bcq.options&&"debug"===_bcq.options.mode&&(c.utils.log("ERROR: in correlation id setting"),c.utils.log(t))}return t},c.utils.setGlobalSodPref=function(t){try{if(c.store.getCookie("sod")){var e=[],r="";t&&t.ptns&&t.ptns.wmbeacon&&(e=t.ptns.wmbeacon.opts||[]);for(var i=0;i<e.length;i++)if("site_id"===e[i][0]){r=e[i][1];break}0<=["uswm","usdl","usph","sm","usms"].indexOf(r)?window.privPrefData={sod:1}:window.privPrefData={sod:void 0}}else window.privPrefData={sod:void 0}}catch(t){_bcq&&_bcq.options&&"debug"===_bcq.options.mode&&(c.utils.log("ERROR: in setting global preference for sod value."),c.utils.log(t))}},c.utils.getParamsSPA=function(t,r){var i={};try{var a=c.handlers.wmbeacon;i=a.metadata({},"",t,r);var n,o=c.store.getCookie("SP");if(o&&(i.cu=i.cu||{},i.cu[c.utils.defKey]=i.cu[c.utils.defKey]||{},i.cu[c.utils.defKey].SP=o),(i=a.formatParams(i,{}.formatParams)).cd)try{i.cd=JSON.parse(i.cd)._def}catch(t){i.cd={}}else i.cd={};i.cd.dim=c.utils.clientDim(),i.cd=JSON.stringify(i.cd),n=c.utils.isResponsive(),i.bjs=c.version||1,void 0!==n&&(i.resp=n),delete i.u,delete i.r,i.err&&(i.err=JSON.stringify(i.err)),0<c.options.above_the_fold_end&&(BOOMR.plugins.RT.startTimer("t_atf",c.options.start_time),BOOMR.plugins.RT.endTimer("t_atf",c.options.above_the_fold_end)),BOOMR.removeVar("restiming")}catch(t){_bcq&&_bcq.options&&"debug"===_bcq.options.mode&&(c.utils.log("ERROR: in getting the params for SPA or Error Beacon."),c.utils.log(e))}return i}}(_bcq,_bcc);
!function(c){var o={topics:{},publish:function(c){var p,s=[].slice.apply(arguments,[1]),i=o.topics[c],a=Array.isArray(i)?i.length:0;for(p=0;p<a;p++)i[p]&&i[p].callback&&i[p].callback.apply(i[p].scope,s)},subscribe:function(c,p){o.topics[c]||(o.topics[c]=[]),o.topics[c].push(p)}};c.pubsub=o}(_bcq);
!function(x,A){"use strict";x.commands._setOptions=function(t){x.utils.setOptions.apply(x,arguments)},x.commands._addData=function(t,a){x.utils.addCommand.apply(x,arguments)},x.commands._clearData=function(t,a){x.utils.rmvCommand.apply(x,arguments)},x.commands._clearAllData=function(t,a){x.utils.rmvCommand.apply(x,[t,a,!0])},x.commands._tagAction=function(t,a,s,e){var n,i,r,o,c,d=[],l="",u="",p="",g={},f={},y={},m=!1,h=!1,_=!0;arguments.length<2?"string"==typeof t&&(p=t):arguments.length<3?"object"==typeof a?("string"==typeof t&&(p=t),g=a):("string"==typeof t&&(l=t),"string"==typeof a&&(p=a)):arguments.length<4?"object"==typeof s?("string"==typeof t&&(l=t),"string"==typeof a&&(p=a),g=s):("string"==typeof t&&(l=t),"string"==typeof a&&(p=a),"string"==typeof s&&(o=s)):4<=arguments.length&&("string"==typeof t&&(l=t),"string"==typeof a&&(p=a),"string"==typeof s&&(o=s),"object"==typeof e&&(g=e)),"undefined"!=typeof _exp&&_exp&&_exp.bc&&_exp.bc.apply(_exp,[{ctx:l,act:p}]),-1!==(i=(l="string"==typeof l?l:"").indexOf("_"))&&(u=l.substring(i+1),l=l.substring(0,i+1));try{h=A.ctxs[l].ds}catch(t){h=!1}if(h)x.utils.log("Tagging disabled for context ["+l+"]");else{try{h=A.ctxs[l].acts[p].ds}catch(t){h=!1}if(!h){try{_=!1!==A.ctxs[l].acts[p].readBase}catch(t){_=!0}g=g||{},Array.isArray(g)&&(g=x.utils.actionData({},g,l+u,_)||{}),r=l+u+"-"+p;try{m=A.ctxs[l].acts[p].imAdd}catch(t){m=!1}m&&(x.data=x.data||{},x.data[r]=g),A.ctxs[l]?A.ctxs[l].acts[p]?x.utils.hasVal(o)&&""!==o||(x.utils.log("WARNING - No ReportID specified for action defined as ["+p+"] under given context ["+l+"]"),y.rp=this.utils.getError("no-rep")):(x.utils.log("WARNING - There is no such action defined as ["+p+"] under given context ["+l+"]"),y.act=this.utils.getError("no-act")):(x.utils.log("WARNING - There is no such context defined as ["+l+"]"),y.ctx=this.utils.getError("no-ctx")),x.utils.isEmptyObj(y)||(g.err=y),"PERFORMANCE_METRICS"===p&&x.utils.addCommand("PCTX",[["pg",x.utils.sniffPage()]]);try{A.ctxs[l].context_override}catch(t){0}for(n in x.utils.rumSeq="number"==typeof x.utils.rumSeq?++x.utils.rumSeq:1,x.handlers)if(x.handlers.hasOwnProperty(n)){try{f=A.ctxs[l].acts[p].ptns[n]}catch(t){f=null}!f&&x.handlers[n]&&x.handlers[n].forceTagAction()?(g=x.handlers[n].metadata(g,l+u,p,o),d.push(x.handlers[n].tagAction(l+u,p,o,g,f))):f&&!f.ds&&(g=x.handlers[n].metadata(g,l+u,p,o),d.push(x.handlers[n].tagAction(l+u,p,o,g,f)))}d.length||x.utils.log("WARNING - Action ["+p+"] under context ["+l+"] was not tagged by any Partners");try{c=A.ctxs[l].acts[p].clr}catch(t){}return c&&x.utils.rmvAllEntry(l,A.ctxs[l].acts[p].clr),d}x.utils.log("Tagging disabled for action ["+p+"] under context ["+l+"]")}},x.commands._tagOutboundAction=function(a,s,t,e,n){var i,r,o,c,d="",l=[];if(!(arguments.length<5)){-1!==(i=(a="string"==typeof a?a:"").indexOf("_"))&&(d=a.substring(i+1),a=a.substring(0,i+1));try{if(A.ctxs[a].acts[s].triggerNow)return x.commands._tagAction(a,s,t,e)}catch(t){}try{r=!1!==A.ctxs[a].acts[s].readBase}catch(t){r=!0}e=e||{},Array.isArray(e)&&(e=x.utils.actionData({},e,a+d,r)||{}),e.opv_id=x.page_view_id,c={ctx:a+d,act:s,rpt:t,attrs:e};try{o=A.store.wait_q,(l=_bcq.store.read(o.n,{storage:o.t})||[]).push(c),_bcq.store.write(o.n,l,{storage:o.t})}catch(t){x.utils.log("ERROR - _tagOutboundAction failed for ["+s+"] under ["+a+"]")}}},x.commands._resetPageViewMetadata=function(t){x.utils.resetPageViewMetadata.apply(x,arguments)},x.push=function(){var e=arguments;function t(){var t,a,s;for(t=0;t<e.length;++t)a=e[t],x.apiq&&x.apiq.push(a),Array.isArray(a)&&a.length&&((s=a[0])&&"_setOptions"!==s&&"_resetPageViewMetadata"!==s&&s.search("_set")&&1<a.lenth&&"function"==typeof a[1]?(s=s.replace("set",""),x.commands[s]=a[1]):x.commands.hasOwnProperty(s)?x.commands[s].apply(x,a.slice(1)):x.utils.log("No such command found with name : "+s))}!0===x.options.push_timeout?window.setTimeout(t,0):t()},window.s_account="";var t=x.utils.findValueByKey("_setOptions",x.queue);x.utils.reportSuite.apply(x,[t]),x._tagAction=function(t,a,s,e){var n,i=x.commands._tagAction.apply(x,arguments),r=Array.isArray(i)?i.length:0,o=[];for(n=0;n<r;n++)"string"==typeof i[n]&&""!==i[n]&&o.push(i[n]);return o},x._addData=function(t,a){x.utils.addCommand.apply(x,arguments)}}(_bcq,_bcc);
function BOOMR_check_doc_domain(t){if("performance"in window&&window.performance&&"function"==typeof window.performance.mark&&!window.BOOMR_no_mark&&window.performance.mark("boomr:check_doc_domain"),window){if(!t){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(e){BOOMR.isCrossOriginError(e)||BOOMR.addError(e,"BOOMR_check_doc_domain.domainFix")}t=document.domain}if(t&&-1!==t.indexOf(".")&&window.parent){try{return void window.parent.document}catch(e){try{document.domain=t}catch(e){return}}try{return void window.parent.document}catch(e){t=t.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(t)}}}"performance"in window&&window.performance&&"function"==typeof window.performance.mark&&!window.BOOMR_no_mark&&window.performance.mark("boomr:startup"),BOOMR_start=(new Date).getTime(),BOOMR_check_doc_domain(),function(c){var u,t,O,i,a,e,o,n=c;if(c.parent!==c&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(c=c.parent),O=c.document,c.BOOMR||(c.BOOMR={}),BOOMR=c.BOOMR,!BOOMR.version){if(BOOMR.version="pulse_boomerang_v2.0_Beta",BOOMR.window=c,BOOMR.boomerang_frame=n,BOOMR.plugins||(BOOMR.plugins={}),function(){try{void 0!==new c.CustomEvent("CustomEvent")&&(i=function(e,t){return new c.CustomEvent(e,t)})}catch(e){}try{!i&&O.createEvent&&O.createEvent("CustomEvent")&&(i=function(e,t){var n=O.createEvent("CustomEvent");return t=t||{cancelable:!1,bubbles:!1},n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n})}catch(e){}!i&&O.createEventObject&&(i=function(e,t){var n=O.createEventObject();return n.type=n.propertyName=e,n.detail=t.detail,n}),i=i||function(){}}(),a=function(t,e,n){var r=i(t,{detail:e});function(){}r&&(n?BOOMR.setImmediate(o):o())},void 0!==O.hidden?(e="visibilityState",o="visibilitychange"):void 0!==O.mozHidden?(e="mozVisibilityState",o="mozvisibilitychange"):void 0!==O.msHidden?(e="msVisibilityState",o="msvisibilitychange"):void 0!==O.webkitHidden&&(e="webkitVisibilityState",o="webkitvisibilitychange"),u={beacon_url:"",beacon_url_force_https:!0,beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:void 0,beacon_with_credentials:!1,beacon_disable_sendbeacon:!1,site_domain:c.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:void 0,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],spa_cancel:[],xhr_send:[],xhr_error:[],error:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},unloadEventsCount:0,unloadEventCalled:0,listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",nativeOverwrites:[],xb_handler:function(n){return function(e){var t;(e=e||c.event).target?t=e.target:e.srcElement&&(t=e.srcElement),3===t.nodeType&&(t=t.parentNode),t&&t.nodeName&&"OBJECT"===t.nodeName.toUpperCase()&&"application/x-shockwave-flash"===t.type||u.fireEvent(n,t)}},clearEvents:function(){},clearListeners:function(){},fireEvent:function(t,e){var n,r,o,i;if(t=t.toLowerCase(),BOOMR.utils.mark("fire_event"),BOOMR.utils.mark("fire_event:"+t+":start"),this.translate_events[t]&&(t=this.translate_events[t]),this.events.hasOwnProperty(t)){for(this.public_events.hasOwnProperty(t)&&a(this.public_events[t],e),o=this.events[t],"before_beacon"!==t&&"beacon"!==t&&BOOMR.real_sendBeacon(),i=o.length,n=0;n<i;n++)try{(r=o[n]).fn.call(r.scope,e,r.cb_data)}catch(e){BOOMR.addError(e,"fireEvent."+t+"<"+n+">")}for(n=0;n<i;n++)o[n].once&&(o.splice(n,1),i--,n--);BOOMR.utils.mark("fire_event:"+t+":end"),BOOMR.utils.measure("fire_event:"+t,"fire_event:"+t+":start","fire_event:"+t+":end")}},spaNavigation:function(){u.onloadfired=!0},beaconUrlAllowed:function(){},checkLocalStorageSupport:function(){var e=u.LOCAL_STORAGE_PREFIX+"clss";u.localStorageSupported=!1;try{if(!c.JSON||!c.localStorage)return;c.localStorage.setItem(e,e),u.localStorageSupported=c.localStorage.getItem(e)===e,c.localStorage.removeItem(e)}catch(e){u.localStorageSupported=!1}},onFrameUnloaded:function(){var e,t;for(BOOMR.isUnloaded=!0,e=0;e<u.nativeOverwrites.length;e++)(t=u.nativeOverwrites[e]).obj[t.functionName]=t.origFn;u.nativeOverwrites=[]}},t={t_start:BOOMR_start,t_end:void 0,url:"",config_url:null,loadedLate:!1,beaconsSent:0,isUnloaded:!1,beaconInQueue:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},session:{domain:u.site_domain,ID:void 0,start:void 0,length:0,enabled:!0},utils:{hasPostMessageSupport:function(){},objectToString:function(e,t,n){var r,o=[];if(!e||"object"!=typeof e)return e;if(void 0===t&&(t="\n\t"),n=n||0,BOOMR.utils.isArray(e)){for(r=0;r<e.length;r++)0<n&&null!==e[r]&&"object"==typeof e[r]?o.push(this.objectToString(e[r],t+("\n\t"===t?"\t":""),n-1)):"&"===t?o.push(encodeURIComponent(e[r])):o.push(e[r]);t=","}else for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(0<n&&null!==e[r]&&"object"==typeof e[r]?o.push(encodeURIComponent(r)+"="+this.objectToString(e[r],t+("\n\t"===t?"\t":""),n-1)):"&"===t?o.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r])):o.push(r+"="+e[r]));return o.join(t)},getCookie:function(e){return e?(BOOMR.utils.mark("get_cookie"),e=" "+e+"=",0<=(t=(n=" "+O.cookie+";").indexOf(e))?(t+=e.length,n=n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")):void 0):null;var t,n},setCookie:function(e,t,n){var r,o,i,a,s;if(!e||!BOOMR.session.domain||void 0===t)return BOOMR.debug("Invalid parameters or site domain: "+e+"/"+t+"/"+BOOMR.session.domain),BOOMR.addVar("nocookie",1),!1;if(BOOMR.utils.mark("set_cookie"),(o=e+'="'+(r=this.objectToString(t,"&"))+'"').length<500){if(a=[o,"path=/","domain="+BOOMR.session.domain],"number"==typeof n&&((s=new Date).setTime(s.getTime()+1e3*n),s=s.toGMTString(),a.push("expires="+s)),O.cookie=a.join("; "),r===(i=this.getCookie(e))||void 0===i&&"number"==typeof n&&n<=0)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+r+"\n"+i)}else BOOMR.warn("Cookie too long: "+o.length+" "+o);return BOOMR.addVar("nocookie",1),!1},getSubCookies:function(e){var t,n,r,o,i=!1,a={};if(!e)return null;if("string"!=typeof e)return BOOMR.debug("TypeError: cookie is not a string: "+typeof e),null;for(n=0,r=(t=e.split("&")).length;n<r;n++)(o=t[n].split("="))[0]&&(o.push(""),a[decodeURIComponent(o[0])]=decodeURIComponent(o[1]),i=!0);return i?a:null},removeCookie:function(){},getLocalStorage:function(e){var t,n;if(!e||!u.localStorageSupported)return null;BOOMR.utils.mark("get_local_storage");try{if(null===(t=c.localStorage.getItem(u.LOCAL_STORAGE_PREFIX+e)))return;n=c.JSON.parse(t)}catch(e){return BOOMR.warn(e),null}return n&&"object"==typeof n.items?"number"==typeof n.expires&&BOOMR.now()>=n.expires?void this.removeLocalStorage(e):n.items:(this.removeLocalStorage(e),null)},setLocalStorage:function(e,t,n){var r,o,i;if(!e||!u.localStorageSupported||"object"!=typeof t)return!1;if(BOOMR.utils.mark("set_local_storage"),r={items:t},"number"==typeof n&&(r.expires=BOOMR.now()+1e3*n),(o=c.JSON.stringify(r)).length<5e4){try{if(c.localStorage.setItem(u.LOCAL_STORAGE_PREFIX+e,o),o===(i=c.localStorage.getItem(u.LOCAL_STORAGE_PREFIX+e)))return!0}catch(e){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+o+"\n"+i)}else BOOMR.warn("Storage items too large: "+o.length+" "+o);return!1},removeLocalStorage:function(e){if(!e||!u.localStorageSupported)return!1;try{return c.localStorage.removeItem(u.LOCAL_STORAGE_PREFIX+e),!0}catch(e){}return!1},cleanupURL:function(e,t){if(!e||BOOMR.utils.isArray(e))return"";if(u.strip_query_string&&(e=e.replace(/\?.*/,"?qs-redacted")),void 0!==t&&e&&e.length>t){var n=e.indexOf("?");e=-1!==n&&n<t?e.substr(0,n)+"?...":e.substr(0,t-3)+"..."}return e},hashQueryString:function(e,t){return e?e.match?(e.match(/^\/\//)&&(e=location.protocol+e),e.match(/^(https?|file):/)?(t&&(e=e.replace(/#.*/,"")),BOOMR.utils.MD5?e.replace(/\?([^#]*)/,function(){}):e):(BOOMR.error("Passed in URL is invalid: "+e),"")):(BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e),""):e},pluginConfig:function(e,t,n,r){var o,i=0;if(!t||!t[n])return!1;for(o=0;o<r.length;o++)void 0!==t[n][r[o]]&&(e[r[o]]=t[n][r[o]],i++);return 0<i},arrayFilter:function(){},arrayFind:function(e,t){if((this.isArray(e)||e&&"number"==typeof e.length)&&"function"==typeof t){if("function"==typeof e.find)return e.find(t);for(var n,r=-1,o=e.length;++r<o;)if(t(n=e[r],r,e))return n}},isMutationObserverSupported:function(){},addObserver:function(e,t,n,r,o,i){var a,s,u={observer:null,timer:null};if(BOOMR.utils.mark("add_observer"),!this.isMutationObserverSupported()||!r||!e)return null;function l(e){var t=!1;BOOMR.utils.mark("mutation_observer_callback"),u.timer&&(clearTimeout(u.timer),u.timer=null),r&&((t=r.call(i,e,o))||(r=null)),!t&&u.observer&&(u.observer.disconnect(),u.observer=null),"number"==typeof t&&0<t&&(u.timer=setTimeout(l,t))}return a=c.MutationObserver,c.Zone&&"function"==typeof c.Zone.__symbol__&&(s=c.Zone.__symbol__("MutationObserver"))&&"string"==typeof s&&c.hasOwnProperty(s)&&"function"==typeof c[s]&&(BOOMR.debug("Detected Zone.js, using native MutationObserver"),a=c[s]),u.observer=new a(l),n&&(u.timer=setTimeout(l,u.timeout)),u.observer.observe(e,t),u},addListener:function(e,t,n,r){var o=!1;BOOMR.utils.mark("add_listener"),e.addEventListener?(r&&BOOMR.browser.supportsPassive()&&(o={capture:!1,passive:!0}),e.addEventListener(t,n,o)):e.attachEvent&&e.attachEvent("on"+t,n),u.listenerCallbacks[t]=u.listenerCallbacks[t]||[],u.listenerCallbacks[t].push({el:e,fn:n})},removeListener:function(e,t,n){if(BOOMR.utils.mark("remove_listener"),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),u.listenerCallbacks.hasOwnProperty(t))for(var r=0;r<u.listenerCallbacks[t].length;r++)if(n===u.listenerCallbacks[t][r].fn&&e===u.listenerCallbacks[t][r].el)return void u.listenerCallbacks[t].splice(r,1)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},inArray:function(){},getQueryParamValue:function(e,t){var n,r,o,i;if(!e)return null;for("string"==typeof t?(n=BOOMR.window.document.createElement("a")).href=t:n="object"==typeof t&&"string"==typeof t.search?t:BOOMR.window.location,r=n.search.slice(1).split(/&/),o=0;o<r.length;o++)if(r[o]&&(i=r[o].split("=")).length&&i[0]===e)return 1<i.length?decodeURIComponent(i.splice(1).join("=").replace(/\+/g," ")):"";return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},generateId:function(){},serializeForUrl:function(e){return BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl?BOOMR.utils.Compression.jsUrl(e):window.JSON?JSON.stringify(e):(BOOMR.debug("JSON is not supported"),"")},getMyURL:function(){var t,e=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(e)return e.src;var n,r=document.getElementsByTagName("script");for(n=r.length;n--;)if("interactive"===r[n].readyState)return r[n].src;try{throw new Error}catch(e){if("stack"in e&&(t=this.arrayFilter(e.stack.split(/\n/),function(e){return e.match(/https?:\/\//)}))&&t.length)return t[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var e=void 0!==c.pageXOffset,t="CSS1Compat"===(c.document.compatMode||""),n={x:0,y:0};return e?"function"==typeof c.pageXOffset?(n.x=c.pageXOffset(),n.y=c.pageYOffset()):(n.x=c.pageXOffset,n.y=c.pageYOffset):t?(n.x=c.document.documentElement.scrollLeft,n.y=c.document.documentElement.scrollTop):(n.x=c.document.body.scrollLeft,n.y=c.document.body.scrollTop),"number"==typeof n.sx&&(n.sx=Math.round(n.sx)),"number"==typeof n.sy&&(n.sy=Math.round(n.sy)),n},windowHeight:function(){return c.innerHeight||c.document.documentElement.clientHeight||c.document.body.clientHeight},windowWidth:function(){},isNative:function(){},overwriteNative:function(e,t,n){e&&n&&(BOOMR.boomerang_frame!==BOOMR.window&&u.nativeOverwrites.push({obj:e,functionName:t,origFn:e[t]}),e[t]=n)},isInteger:function(){},forEach:function(e,t,n){if(BOOMR.utils.isArray(e)&&"function"==typeof t)for(var r=e.length,o=0;o<r;o++)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)},mark:function(e){var t=BOOMR.getPerformance();t&&"function"==typeof t.mark&&!BOOMR.window.BOOMR_no_mark&&t.mark("boomr:"+e)},measure:function(e,t,n){var r=BOOMR.getPerformance();r&&"function"==typeof r.measure&&!BOOMR.window.BOOMR_no_mark&&r.measure("boomr:"+e,t?"boomr:"+t:void 0,n?"boomr:"+n:void 0)}},browser:{results:{},supportsPassive:function(){if(void 0===BOOMR.browser.results.supportsPassive){if(BOOMR.browser.results.supportsPassive=!1,!Object.defineProperty)return!1;try{var e=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,e)}catch(e){}}return BOOMR.browser.results.supportsPassive}},init:function(e){var t,n,r=["autorun","beacon_auth_key","beacon_auth_token","beacon_with_credentials","beacon_disable_sendbeacon","beacon_url","beacon_url_force_https","beacon_type","site_domain","strip_query_string","user_ip"];if(BOOMR.utils.mark("init"),BOOMR_check_doc_domain(),void 0!==(e=e||{}).log&&(this.log=e.log),this.log||(this.log=function(){}),this.pageId||(this.pageId=BOOMR.utils.generateId(8),BOOMR.debug("Generated PageID: "+this.pageId)),e.primary&&u.handlers_attached)return this;for(n in"string"==typeof e.site_domain&&(this.session.domain=e.site_domain),BOOMR.session.enabled&&void 0===BOOMR.session.ID&&(BOOMR.session.ID=BOOMR.utils.generateUUID()),void 0!==e.autorun&&(u.autorun=e.autorun),BOOMR.utils.mark("init:plugins:start"),this.plugins)if(this.plugins.hasOwnProperty(n)){if(e[n]&&e[n].hasOwnProperty("enabled")&&!1===e[n].enabled){u.disabled_plugins[n]=1,"function"==typeof this.plugins[n].disable&&this.plugins[n].disable();continue}if(u.disabled_plugins[n]){if(!e[n]||!e[n].hasOwnProperty("enabled")||!0!==e[n].enabled)continue;"function"==typeof this.plugins[n].enable&&this.plugins[n].enable(),delete u.disabled_plugins[n]}if("function"==typeof this.plugins[n].init)try{BOOMR.utils.mark("init:plugins:"+n+":start"),this.plugins[n].init(e),BOOMR.utils.mark("init:plugins:"+n+":end"),BOOMR.utils.measure("init:plugins:"+n,"init:plugins:"+n+":start","init:plugins:"+n+":end")}catch(e){BOOMR.addError(e,n+".init")}}for(BOOMR.utils.mark("init:plugins:end"),BOOMR.utils.measure("init:plugins","init:plugins:start","init:plugins:end"),t=0;t<r.length;t++)void 0!==e[r[t]]&&(u[r[t]]=e[r[t]]);return(!u.handlers_attached&&!e.wait||u.handlers_attached&&u.waiting_for_config)&&(u.onloadfired||void 0!==u.autorun&&!1===u.autorun||(BOOMR.hasBrowserOnloadFired()&&(BOOMR.loadedLate=!0),BOOMR.attach_page_ready(BOOMR.page_ready_autorun)),u.waiting_for_config=!1),u.handlers_attached||(e.wait&&(u.waiting_for_config=!0),BOOMR.attach_page_ready(function(){}),BOOMR.utils.addListener(c,"DOMContentLoaded",function(){u.fireEvent("dom_loaded")}),BOOMR.fireEvent("config",e),BOOMR.subscribe("config",function(e){e.beacon_url&&(u.beacon_url=e.beacon_url)}),BOOMR.subscribe("spa_navigation",u.spaNavigation,null,u),function(){var e,t;for(void 0!==o&&(BOOMR.utils.addListener(O,o,function(){u.fireEvent("visibility_changed")}),u.lastVisibilityState=BOOMR.visibilityState(),BOOMR.subscribe("visibility_changed",function(){var e=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[e]=BOOMR.now(),BOOMR.debug("Visibility changed from "+u.lastVisibilityState+" to "+e),"prerender"===u.lastVisibilityState&&"prerender"!==e&&(BOOMR.addVar("vis.pre","1"),u.fireEvent("prerender_to_visible")),u.lastVisibilityState=e})),BOOMR.utils.addListener(O,"mouseup",u.xb_handler("click")),e=O.getElementsByTagName("form"),t=0;t<e.length;t++)BOOMR.utils.addListener(e[t],"submit",u.xb_handler("form_submit"));c.onpagehide||null===c.onpagehide||BOOMR.utils.addListener(c,"unload",function(){}),BOOMR.boomerang_frame!==BOOMR.window&&BOOMR.utils.addListener(BOOMR.boomerang_frame,"unload",u.onFrameUnloaded)}(),u.handlers_attached=!0),this},attach_page_ready:function(){},page_ready_autorun:function(){},page_ready:function(e,t){var n;return t||"number"!=typeof e||(n=e,e=null),e=(e=e||c.event)||{name:"load"},t?"number"==typeof c.BOOMR_page_ready&&(e.timing=e.timing||{},e.timing.loadEventEnd=c.BOOMR_page_ready,BOOMR.addVar("pr",1,!0)):(e.timing=e.timing||{},n?e.timing.loadEventEnd=n:"number"==typeof c.BOOMR_page_ready?e.timing.loadEventEnd=c.BOOMR_page_ready:e.timing.loadEventEnd=BOOMR.now(),BOOMR.addVar("pr",1,!0)),u.onloadfired||(u.fireEvent("page_ready",e),u.onloadfired=!0),this},hasBrowserOnloadFired:function(){},onloadFired:function(){return u.onloadfired},setImmediate:function(e,t,n,r){var o,i;"undefined"!=typeof Error&&(i=(i=new Error).stack?i.stack.replace(/^Error/,"Called"):void 0),o=function(){e.call(r||null,t,n||{},i),o=null},c.requestIdleCallback?c.requestIdleCallback(o,{timeout:1e3}):c.setImmediate?c.setImmediate(o):setTimeout(o,10)},now:Date.now||function(){return(new Date).getTime()},getPerformance:function(){},hrNow:function(){var e,t=BOOMR.getPerformance();return t&&t.now?t.now():(e=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start,BOOMR.now()-e)},visibilityState:void 0===e?function(){return"visible"}:function(){return O[e]},lastVisibilityEvent:{},registerEvent:function(e){return u.events.hasOwnProperty(e)||(u.events[e]=[]),this},disable:function(){u.clearEvents(),u.clearListeners()},fireEvent:function(e,t){return u.fireEvent(e,t)},subscribe:function(t,n,r,o,e){var i,a,s;for(t=t.toLowerCase(),BOOMR.utils.mark("subscribe"),BOOMR.utils.mark("subscribe:"+t),u.translate_events[t]&&(t=u.translate_events[t]),u.events.hasOwnProperty(t)||(u.events[t]=[]),s=u.events[t],i=0;i<s.length;i++)if((a=s[i])&&a.fn===n&&a.cb_data===r&&a.scope===o)return this;return s.push({fn:n,cb_data:r||{},scope:o||null,once:e||!1}),"page_ready"===t&&u.onloadfired&&u.autorun&&this.setImmediate(n,null,r,o),"page_unload"!==t&&"before_unload"!==t||(u.unloadEventsCount++,function(){var e;s.length;e=function(e){n&&n.call(o,e||c.event,r),++u.unloadEventCalled===u.unloadEventsCount&&BOOMR.real_sendBeacon()},"page_unload"===t&&(c.onpagehide||null===c.onpagehide?BOOMR.utils.addListener(c,"pagehide",e):BOOMR.utils.addListener(c,"unload",e)),BOOMR.utils.addListener(c,"beforeunload",e)}()),this},addError:function(e,t,n){var r,o=BOOMR.plugins.Errors;BOOMR.utils.mark("add_error"),BOOMR.error("Boomerang caught error: "+e+", src: "+t+", extra: "+n),o&&o.is_supported()?"string"==typeof e?o.send({message:e,extra:n,functionName:t,noStack:!0},o.VIA_APP,o.SOURCE_BOOMERANG):("string"==typeof t&&(e.functionName=t),void 0!==n&&(e.extra=n),o.send(e,o.VIA_APP,o.SOURCE_BOOMERANG)):("string"!=typeof e&&((r=String(e)).match(/^\[object/)&&(r=e.name+": "+(e.description||e.message).replace(/\r\n$/,"")),e=r),void 0!==t&&(e="["+t+":"+BOOMR.now()+"] "+e),n&&(e+=":: "+n),u.errors[e]?u.errors[e]++:u.errors[e]=1)},isCrossOriginError:function(){},addVar:function(e,t,n){if(BOOMR.utils.mark("add_var"),"string"==typeof e)u.vars[e]=t;else if("object"==typeof e){var r,o=e;for(r in o)o.hasOwnProperty(r)&&(u.vars[r]=o[r])}return n&&(u.singleBeaconVars[e]=1),this},appendVar:function(e,t){var n=BOOMR.getVar(e)||"";return n&&(n+=","),BOOMR.addVar(e,n+t),this},removeVar:function(e){var t,n;if(!arguments.length)return this;for(n=1===arguments.length&&BOOMR.utils.isArray(e)?e:arguments,t=0;t<n.length;t++)u.vars.hasOwnProperty(n[t])&&delete u.vars[n[t]];return this},hasVar:function(e){return u.vars.hasOwnProperty(e)},getVar:function(e){return u.vars[e]},setVarPriority:function(e,t){return"number"!=typeof t||1!==Math.abs(t)||(u.varPriority[t][e]=1),this},setReferrer:function(e){u.r=e},requestStart:function(t){var n=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+t,n),{loaded:function(e){BOOMR.responseEnd(t,n,e)}}},readyToSend:function(){var e;for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(u.disabled_plugins[e])continue;if("function"==typeof this.plugins[e].readyToSend&&!1===this.plugins[e].readyToSend())return BOOMR.debug("Plugin "+e+" is not ready to send"),!1}return!0},responseEnd:function(e,t,n,r){if(t="number"==typeof t?t:BOOMR.now(),r="number"==typeof r?r:BOOMR.now(),!BOOMR.readyToSend())return BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again..."),void setTimeout(function(){BOOMR.responseEnd(e,t,n,r)},1e3);if(BOOMR.hasSentPageLoadBeacon()||BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS))if(u.beaconInQueue)BOOMR.subscribe("beacon",function(){BOOMR.responseEnd(e,t,n,r)},null,BOOMR,!0);else if(u.beaconInQueue=!0,"object"==typeof e){if(!e.url)return void BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");u.fireEvent("xhr_load",e)}else BOOMR.real_sendBeacon(),BOOMR.addVar("xhr.pg",e),BOOMR.plugins.RT.startTimer("xhr_"+e,t),u.fireEvent("xhr_load",{name:"xhr_"+e,data:n,timing:{loadEventEnd:r}});else BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(e,t,n,r)},null,BOOMR,!0)},uninstrumentXHR:function(){},instrumentXHR:function(){},uninstrumentFetch:function(){},instrumentFetch:function(){},sendBeacon:function(e){return e&&(u.beacon_url_override=e),u.beaconQueued||(u.beaconQueued=!0,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)),!0},sendBeaconWhenReady:function(e,t,n){if(u.beaconInQueue)BOOMR.subscribe("beacon",function(){BOOMR.sendBeaconWhenReady(e,t,n)},null,BOOMR,!0);else{for(var r in u.beaconInQueue=!0,e)e.hasOwnProperty(r)&&BOOMR.addVar(r,e[r],!0);"function"==typeof t&&void 0!==n&&t.apply(n),BOOMR.sendBeacon()}},real_sendBeacon:function(){var e,t=[],n={};if(!u.beaconQueued)return!1;for(e in BOOMR.utils.mark("send_beacon:start"),u.beaconQueued=!1,BOOMR.debug("Checking if we can send beacon"),this.plugins)if(this.plugins.hasOwnProperty(e)){if(u.disabled_plugins[e])continue;if(!this.plugins[e].is_complete(u.vars))return BOOMR.debug("Plugin "+e+" is not complete, deferring beacon send"),!1}if(!(window&&window.Image&&window.navigator&&BOOMR.window))return BOOMR.debug("DOM not fully available, not sending a beacon"),!1;var r=BOOMR.utils.inArray(u.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),o=void 0===u.vars["http.initiator"]||r;for(e in u.vars.pgu||(u.vars.pgu=r?O.URL:O.URL.replace(/#.*/,"")),u.vars.pgu=BOOMR.utils.cleanupURL(u.vars.pgu),u.vars.u&&!r||(u.vars.u=u.vars.pgu),u.vars.pgu===u.vars.u&&delete u.vars.pgu,u.r?u.vars.r=BOOMR.utils.cleanupURL(u.r):delete u.vars.r,u.vars.v=BOOMR.version,BOOMR.snippetVersion&&(u.vars.sv=BOOMR.snippetVersion),u.vars.sm=BOOMR.snippetMethod||"i",BOOMR.session.enabled&&(u.vars["rt.si"]=BOOMR.session.ID+"-"+Math.round(BOOMR.session.start/1e3).toString(36),u.vars["rt.ss"]=BOOMR.session.start,u.vars["rt.sl"]=BOOMR.session.length),BOOMR.visibilityState()&&(u.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible&&(u.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible),BOOMR.lastVisibilityEvent.hidden&&(u.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)),u.vars["ua.plt"]=navigator.platform,u.vars["ua.vnd"]=navigator.vendor,this.pageId&&(u.vars.pid=this.pageId),u.vars.n=++this.beaconsSent,c!==window&&(u.vars.if=""),u.errors)u.errors.hasOwnProperty(e)&&t.push(e+(1<u.errors[e]?" (*"+u.errors[e]+")":""));for(e in 0<t.length&&(u.vars.errors=t.join("\n")),u.errors={},u.fireEvent("before_beacon",u.vars),u.vars)u.vars.hasOwnProperty(e)&&(n[e]=u.vars[e]);for(var i in BOOMR.removeVar(["qt","pgu"]),u.singleBeaconVars)u.singleBeaconVars.hasOwnProperty(i)&&BOOMR.removeVar(i);return u.singleBeaconVars={},!u.hasSentPageLoadBeacon&&o&&(u.hasSentPageLoadBeacon=!0,BOOMR.setImmediate(function(){u.fireEvent("page_load_beacon",n)})),BOOMR.session.rate_limited?(BOOMR.debug("Skipping because we're rate limited"),!1):(u.beaconInQueue=!1,BOOMR.sendBeaconData(n),u.vars={},BOOMR.utils.mark("send_beacon:end"),BOOMR.utils.measure("send_beacon","send_beacon:start","send_beacon:end"),!0)},hasSentPageLoadBeacon:function(){return u.hasSentPageLoadBeacon},sendBeaconData:function(e){var t,n,r,o,i,a=[],s=!0;if(BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(e)),!e.a||""===e.a.trim())return BOOMR.debug("No beacon action, so skipping."),!1;if(u.beacon_url=u.beacon_url_override||u.beacon_url,!u.beacon_url)return BOOMR.debug("No beacon URL, so skipping."),!1;if(!u.beaconUrlAllowed(u.beacon_url))return BOOMR.debug("Beacon URL not allowed: "+u.beacon_url),!1;if(0===e.length)return!1;if("PERFORMANCE_METRICS_SPA"===e.a&&(delete e.perf_other,delete e.prf),delete e.isFirstLoad,u.fireEvent("beacon",e),a=this.getVarsOfPriority(e,-1),t=this.getVarsOfPriority(e,1),n=a.concat(this.getVarsOfPriority(e,0),t).join("&"),u.beacon_url_force_https&&u.beacon_url.match(/^\/\//)&&(u.beacon_url="https:"+u.beacon_url),r=u.beacon_url+(-1<u.beacon_url.indexOf("?")?"&":"?")+n,"GET"===u.beacon_type?(s=!0,r.length>BOOMR.constants.MAX_GET_LENGTH&&(window.console&&(console.warn||console.log)||function(){})("Boomerang: Warning: Beacon may not be sent via GET due to payload size > 2000 bytes")):("POST"===u.beacon_type||r.length>BOOMR.constants.MAX_GET_LENGTH)&&(s=!1),BOOMR.orig_XMLHttpRequest||c&&c.XMLHttpRequest||(s=!0),s){try{o=new Image}catch(e){return BOOMR.debug("Image is not a constructor, not sending a beacon"),!1}o.src=r}else{i=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(i,n)}catch(e){i=new BOOMR.boomerang_frame.XMLHttpRequest,this.sendXhrPostBeacon(i,n)}}return!0},sendXhrPostBeacon:function(e,t){e.open("POST",u.beacon_url),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),void 0!==u.beacon_auth_token&&(void 0===u.beacon_auth_key&&(u.beacon_auth_key="Authorization"),e.setRequestHeader(u.beacon_auth_key,u.beacon_auth_token)),u.beacon_with_credentials&&(e.withCredentials=!0),e.send(t)},getVarsOfPriority:function(e,t){var n,r=[],o=0!==t?u.varPriority[t]:e;for(n in o)o.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(r.push(this.getUriEncodedVar(n,void 0===e[n]?"":e[n])),0!==t&&delete e[n]);return r},getUriEncodedVar:function(e,t){return null==t&&(t=""),"object"==typeof t&&(t=BOOMR.utils.serializeForUrl(t)),encodeURIComponent(e)+"="+encodeURIComponent(t)},getResourceTiming:function(e,t,n){var r,o=BOOMR.getPerformance();try{if(o&&"function"==typeof o.getEntriesByName){if(!(r=o.getEntriesByName(e))||!r.length)return;if(!("function"!=typeof n||(r=BOOMR.utils.arrayFilter(r,n))&&r.length))return;return 1<r.length&&"function"==typeof t&&r.sort(t),r[r.length-1]}}catch(e){BOOMR.warn("getResourceTiming:"+e)}},setBeaconUrlsAllowed:function(e){u.beacon_urls_allowed=e}},BOOMR.url){var r=BOOMR.window.document.createElement("a");r.href=BOOMR.url,t.url=r.href}else t.url=t.utils.getMyURL();var s;delete BOOMR_start,"number"==typeof BOOMR_lstart?(t.t_lstart=BOOMR_lstart,delete BOOMR_lstart):"number"==typeof BOOMR.window.BOOMR_lstart&&(t.t_lstart=BOOMR.window.BOOMR_lstart),"number"==typeof BOOMR.window.BOOMR_onload&&(t.t_onload=BOOMR.window.BOOMR_onload),"object"==typeof console&&void 0!==console.log?t.log=function(){}:t.log=function(){},s=function(n){return function(e,t){return this.log(e,n,"boomerang"+(t?"."+t:"")),this}},t.debug=s("debug"),t.info=s("info"),t.warn=s("warn"),t.error=s("error");try{var l=t.getPerformance();l&&"function"==typeof l.now&&/\[native code\]/.test(String(l.now))&&l.timing&&l.timing.navigationStart&&(t.now=function(){})}catch(e){}u.checkLocalStorageSupport(),function(){}(),function(){if(BOOMR.checkWindowOverrides=function(r){if(!Object.getOwnPropertyNames)return[];var e,t,n,o=[];function i(e){!function(e){var t=e.split("."),n=r;for(;n&&t.length;)try{n=n[t.shift()]}catch(e){return}return"function"==typeof n&&!function(e,t){if("console.assert"===t||"Function.prototype"===t||0<=t.indexOf("onload")||0<=t.indexOf("onbeforeunload")||0<=t.indexOf("onerror")||0<=t.indexOf("onload")||0<=t.indexOf("NodeFilter"))return 1;return e.toString&&!e.hasOwnProperty("toString")&&/\[native code\]/.test(String(e))}(n,e)}(e)||o.push(e)}(n=O.createElement("iframe")).style.display="none",n.src="javascript:false",O.getElementsByTagName("script")[0].parentNode.appendChild(n),e=n.contentWindow,t=Object.getOwnPropertyNames(e);for(var a=0;a<t.length;a++){var s=t[a];if("window"!==s&&"self"!==s&&"top"!==s&&"parent"!==s&&"frames"!==s&&(e[s]&&("object"==typeof e[s]||"function"==typeof e[s]))){i(s);var u=[];try{u=Object.getOwnPropertyNames(e[s])}catch(e){}for(var l=0;l<u.length;l++)i([s,u[l]].join("."));if(e[s].prototype){u=Object.getOwnPropertyNames(e[s].prototype);for(l=0;l<u.length;l++)i([s,"prototype",u[l]].join("."))}}}return o},BOOMR.checkDocumentOverrides=function(t){return BOOMR.utils.arrayFilter(["readyState","domain","hidden","URL","cookie"],function(e){return t.hasOwnProperty(e)})},"true"===BOOMR.utils.getQueryParamValue("overridden")&&c&&c.Object&&Object.getOwnPropertyNames){var e=[].concat(BOOMR.checkWindowOverrides(c)).concat(BOOMR.checkDocumentOverrides(O));0<e.length&&BOOMR.warn("overridden: "+e.sort())}}(),a("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window);
!function(){var d,u,c,h,f,l=["uninitialized","open","responseStart","domInteractive","responseEnd"],p=-999,O=-997;function R(e){BOOMR.debug(e,"AutoXHR")}function n(e){if(!e)return null;e.href=e.href;var t=e.pathname;return"/"!==t.charAt(0)&&(t="/"+t),t}function(){}function g(){this.watch=0,this.timer=null,this.pending_events=[],this.lastSpaLocation=null}function m(e,t){var n,r;if(!t||!e)return!1;if("boolean"==typeof t)return!0===t;if("function"==typeof t)try{return!0===t(e)}catch(e){return!1}if(BOOMR.utils.isArray(t))for(n=0;n<t.length;n++){if("string"==typeof(r=t[n])&&r===e)return!0;if(r instanceof RegExp&&r.test(e))return!0}return!1}function M(){f.monitorFetch&&"function"==typeof d.fetch&&"function"==typeof d.Request&&"function"==typeof d.Response&&"function"==typeof d.Promise&&"function"==typeof window.fetch&&!d.fetch.polyfill&&(BOOMR.proxy_fetch&&BOOMR.proxy_fetch===d.fetch||(BOOMR.proxy_fetch&&BOOMR.orig_fetch&&BOOMR.orig_fetch===d.fetch?d.fetch=BOOMR.proxy_fetch:(BOOMR.orig_fetch=d.orig_fetch||d.fetch,BOOMR.proxy_fetch=function(e,t){var n,r,i,o={timing:{},initiator:"xhr"};if("object"==typeof e&&e instanceof d.Request?(n=e.url,r=t&&t.method||e.method||"GET",f.captureXhrRequestResponse&&(i=t&&t.body||e.body||void 0)):(n=e,r=t&&t.method||"GET",f.captureXhrRequestResponse&&(i=t&&t.body||void 0)),h.href=n,f.excludeFilter(h))return BOOMR.debug("Exclude found for resource: "+h.href+" Skipping Fetch instrumentation!","AutoXHR"),BOOMR.orig_fetch.apply(d,arguments);BOOMR.fireEvent("xhr_init","fetch"),o.url=h.href,o.method=r,o.type="fetch",i&&(o.requestPayload=i),BOOMR.fireEvent("xhr_send",{resource:o}),c.addEvent(o);try{o.timing.requestStart=BOOMR.now();var s=BOOMR.orig_fetch.apply(this,arguments);function u(n,r,i){function o(){var e;i.fetchResponse&&!i.fetchResponse.bodyUsed&&f.fetchBodyUsedWait?(e=BOOMR.now(),i.responseBodyNotUsed=!0,setTimeout(function(){f.loadFinished(i,e)},f.fetchBodyUsedWait)):f.loadFinished(i)}return function(){var e,t=n._bmrNextP;try{for(e=r.apply(this===window?d:this,arguments);t&&!t._bmrHasOnFulfilled;)t=t._bmrNextP;return t||(e instanceof d.Promise?e.then=a(e,e.then,i):o()),e}catch(e){for(;t&&!t._bmrHasOnRejected;)t=t._bmrNextP;throw t||o(),e}}}function a(n,r,i){return n._bmrNextP?r:function(){var e=Array.prototype.slice.call(arguments);0<e.length&&("function"==typeof e[0]&&(e[0]=u(n,e[0],i),n._bmrHasOnFulfilled=!0),1<e.length&&"function"==typeof e[1]&&(e[1]=u(n,e[1],i),n._bmrHasOnRejected=!0));var t=r.apply(n,e);return(n._bmrNextP=t).then=a(t,t.then,i),t}}return s.then=a(s,s.then,o),s.then(function(e){var t,n=!1,r=!1;if((e.status<200||400<=e.status)&&(o.status=e.status),o.fetchResponse=e,0<=o.index&&c.monitorMO(o.index),f.captureXhrRequestResponse&&"function"==typeof e.clone){(t=e.headers.get("content-type"))&&(n=-1!==t.indexOf("json"),r=-1!==t.indexOf("xml")),o.response={};try{e.clone().text().then(function(e){o.response.text=e,o.response.raw=e,r&&"function"==typeof d.DOMParser&&(o.response.xml=(new d.DOMParser).parseFromString(e,"text/xml"))}).then(null,function(e){})}catch(e){}if(n)try{e.clone().json().then(function(e){o.response.json=e}).then(null,function(e){})}catch(e){}}return e},function(e){throw!e||"AbortError"!==e.name&&20!==e.code?o.status=-998:o.status=p,e})}catch(e){throw o.status=O,f.loadFinished(o),e}},BOOMR.utils.overwriteNative(d,"fetch",BOOMR.proxy_fetch))))}function(){}function v(){if(!BOOMR.proxy_XMLHttpRequest||BOOMR.proxy_XMLHttpRequest!==d.XMLHttpRequest){if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===d.XMLHttpRequest)return d.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest,void g.start();BOOMR.orig_XMLHttpRequest=d.orig_XMLHttpRequest||d.XMLHttpRequest,g.start(),BOOMR.subscribe("click",function(){if(!f.singlePageApp){var e={timing:{},initiator:"click"};BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==d.XMLHttpRequest&&(e.timing.requestStart=BOOMR.now(),c.addEvent(e))}}),BOOMR.proxy_XMLHttpRequest=function(){var i,o,t,s={timing:{},initiator:"xhr"},u=!1,a=!1;return i=new BOOMR.orig_XMLHttpRequest,o=i.open,t=i.send,i.open=function(e,t,n){if(h.href=t,f.excludeFilter(h))return a=!0,R("Exclude found for resource: "+h.href+" Skipping XHR instrumentation!"),o.apply(i,arguments);function r(e,t){i.addEventListener(e,function(){if("readystatechange"===e)if(s.timing[l[i.readyState]]=BOOMR.now(),4===i.readyState&&0!==i.status){if((i.status<200||400<=i.status)&&(s.status=i.status),f.captureXhrRequestResponse&&(s.response={text:""===i.responseType||"text"===i.responseType?i.responseText:null,xml:""===i.responseType||"document"===i.responseType?i.responseXML:null,raw:i.response,json:i.responseJSON},i.response&&i.response.constructor&&i.response.constructor===BOOMR.boomerang_frame.Object&&BOOMR.boomerang_frame.Object!==d.Object))try{i.response.constructor=d.Object}catch(e){}f.loadFinished(s)}else 0===i.readyState&&"number"==typeof s.timing.open&&(s.status=p,f.loadFinished(s));else"load"===e?(i.status<200||400<=i.status)&&(s.status=i.status):s.status=void 0===t?i.status:t,f.loadFinished(s)},!1)}a=!1,void 0===n&&(n=!0),BOOMR.fireEvent("xhr_init","xhr"),u||(n&&r("readystatechange"),r("load"),r("timeout",-1001),r("error",-998),r("abort",p)),s.url=h.href,s.method=e,s.type="xhr",delete s.status,n||(s.synchronous=!0),u=!0;try{return o.apply(i,arguments)}catch(e){throw s.status=O,f.loadFinished(s),e}},i.send=function(e){return a?t.apply(i,arguments):(f.captureXhrRequestResponse&&(i.resource.requestPayload=e),BOOMR.fireEvent("xhr_send",i),c.addEvent(s),s.timing.requestStart=BOOMR.now(),void 0===s.status||s.status!==O?t.apply(i,arguments):void 0)},i.resource=s,i},BOOMR.proxy_XMLHttpRequest.UNSENT=0,BOOMR.proxy_XMLHttpRequest.OPENED=1,BOOMR.proxy_XMLHttpRequest.HEADERS_RECEIVED=2,BOOMR.proxy_XMLHttpRequest.LOADING=3,BOOMR.proxy_XMLHttpRequest.DONE=4,BOOMR.proxy_XMLHttpRequest.prototype=BOOMR.orig_XMLHttpRequest.prototype,BOOMR.utils.overwriteNative(d,"XMLHttpRequest",BOOMR.proxy_XMLHttpRequest)}}function(){}function y(e){e.initiator="xhr",BOOMR.responseEnd(e)}BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.AutoXHR||(d=BOOMR.window)&&d.XMLHttpRequest&&(new d.XMLHttpRequest).addEventListener&&(g.stop=function(){g.pause(),g.observer=null},g.pause=function(){g.observer&&g.observer.observer&&!g.isPaused&&(g.isPaused=!0,g.observer.observer.disconnect())},g.resume=function(){g.observer&&g.observer.observer&&g.isPaused&&(g.isPaused=!1,g.observer.observer.observe(u,g.observer.config))},g.start=function(){if(!g.observer){var e={childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]};(g.observer=BOOMR.utils.addObserver(u,e,null,c.mutation_cb,null,c))&&(g.observer.config=e,BOOMR.subscribe("page_unload",g.stop,null,g))}},g.prototype.addEvent=function(e){var t,n,r,i={type:e.initiator,resource:e,nodes_to_wait:0,total_nodes:0,resources:[],aborted:!1,complete:!1},o=this.pending_events.length,s=this;for(t=o-1;0<=t;t--)if(this.pending_events[t]&&!this.pending_events[t].complete){n=this.pending_events[t],r=t;break}if(n)if("click"===n.type)0!==n.nodes_to_wait&&n.resource.url||(this.pending_events[r]=void 0,this.watch--);else if("xhr"===n.type){if("click"===i.type)return null;if("xhr"===i.type)return c.add_event_resource(e),null}else if(BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)){if("xhr"===i.type)return c.add_event_resource(e),null;BOOMR.utils.inArray(i.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(R("Aborting previous SPA navigation"),n.resource.timing.loadEventEnd=BOOMR.now(),n.aborted=!0,this.sendEvent(r))}if("click"===i.type){if(!g.observer)return null;this.setTimeout(f.xhrIdleTimeout,o)}else"xhr"===i.type?(i.nodes_to_wait++,i.total_nodes++,i.ignoreMO=!0):BOOMR.utils.inArray(i.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(g.start(),e.wait?(i.nodes_to_wait++,i.total_nodes++,e.waitComplete=function(){s.load_finished(o),e.waitComplete=void 0}):this.setTimeout(f.spaIdleTimeout,o));return this.watch++,this.pending_events.push(i),e.index=o},g.prototype.sendEvent=function(e){var t=this.pending_events[e],n=this,r=BOOMR.now();if(t&&!t.complete)if(this.clearTimeout(e),BOOMR.readyToSend()){if(t.complete=!0,this.watch--,t.resource.resources=t.resources,BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(t.resource.url=u.URL),"spa"===t.type&&0===t.total_nodes&&t.resource.url===n.lastSpaLocation)return R("SPA beacon cancelled, no URL change or resources triggered"),BOOMR.fireEvent("spa_cancel"),void(this.pending_events[e]=void 0);BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(n.lastSpaLocation=t.resource.url,t.forced||0!==t.total_nodes||(t.resource.timing.loadEventEnd=r-f.spaIdleTimeout)),this.sendResource(t.resource,e)}else setTimeout(function(){n.sendEvent(e)},500)},g.prototype.sendResource=function(r,i){function t(e,t){if(e&&(r.timing.loadEventEnd=t||BOOMR.now()),BOOMR.real_sendBeacon(),r.onComplete&&r.onComplete(r),BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_enabled()&&r.timing&&r.timing.requestStart){var n=BOOMR.plugins.ResourceTiming.getCompressedResourceTiming(r.timing.requestStart,r.timing.loadEventEnd);BOOMR.plugins.ResourceTiming.addToBeacon(n)}BOOMR.utils.inArray(r.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(o.calculateSpaTimings(r),"number"==typeof i&&o.pending_events[i].aborted&&(BOOMR.addVar("pgu",u.URL),BOOMR.addVar("rt.quit",""),BOOMR.addVar("rt.abld",""),f.addedVars.push("pgu","rt.quit","rt.abld"))),BOOMR.responseEnd(r,s,r),"number"==typeof i&&(o.pending_events[i]=void 0)}var o=this,e=o.pending_events[i],s=r.timing?r.timing.requestStart:void 0;"spa_hard"!==r.initiator||e&&e.aborted||BOOMR.hasBrowserOnloadFired()?t(!1):BOOMR.utils.addListener(d,"load",function(){})},g.prototype.calculateSpaTimings=function(e){var t=BOOMR.getPerformance();if(t&&t.timing)if("spa_hard"===e.initiator)e.timing.responseEnd=t.timing.responseStart,e.timing.fetchStart=t.timing.navigationStart;else{if(!BOOMR.plugins.ResourceTiming||!BOOMR.plugins.ResourceTiming.is_supported())return;var n=BOOMR.plugins.ResourceTiming.getFilteredResourceTiming(e.timing.requestStart,e.timing.loadEventEnd,f.spaBackEndResources).entries,r=Math.round(e.timing.loadEventEnd-e.timing.requestStart);if(!n||!n.length)return void(e.timers={t_resp:0,t_page:r,t_done:r});for(var i=e.timing.loadEventEnd-t.timing.navigationStart,o=0;o<n.length;o++)n[o].responseStart>i?(n[o].responseStart=i,n[o].responseEnd=i):n[o].responseEnd>i&&(n[o].responseEnd=i);var s=Math.round(BOOMR.plugins.ResourceTiming.calculateResourceTimingUnion(n)),u=r-s;if(s<0||r<0||u<0)return void BOOMR.addError("Incorrect SPA time calculation");e.timers={t_resp:s,t_page:u,t_done:r}}},g.prototype.setTimeout=function(e,t){var n=this;e&&(this.clearTimeout(t),this.timer=setTimeout(function(){n.timedout(t)},e))},g.prototype.timedout=function(e){var t;this.clearTimeout(e),(t=this.pending_events[e])&&0===t.nodes_to_wait&&("click"!==t.type||0!==t.total_nodes&&t.resource.url||(this.watch--,this.pending_events[e]=void 0),this.sendEvent(e))},g.prototype.clearTimeout=function(e){this.timer&&e===this.pending_events.length-1&&(clearTimeout(this.timer),this.timer=null)},g.prototype.load_cb=function(e,t){var n,r,i=BOOMR.now();(n=e.target||e.srcElement)&&n._bmr&&(r=n._bmr.idx,t=void 0!==t?t:n._bmr.res||0,n._bmr.end[t]||(n._bmr.end[t]=i,this.load_finished(r,i)))},g.prototype.monitorMO=function(){},g.prototype.load_finished=function(e,t){var n=this.pending_events[e];n&&(n.nodes_to_wait--,0===n.nodes_to_wait&&(n.resource.timing.loadEventEnd=t||BOOMR.now(),e===this.pending_events.length-1?BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)?this.setTimeout(f.spaIdleTimeout,e):this.setTimeout(f.xhrIdleTimeout,e):this.sendEvent(e)))},g.prototype.wait_for_node=function(t,n){var e,r,i,o,s,u,a,d,c,l=this,p=!1,O=!1;if(t&&t.nodeName&&(t.nodeName.toUpperCase().match(/^(IMG|IFRAME|IMAGE)$/)||"LINK"===t.nodeName.toUpperCase()&&t.rel&&t.rel.match(/\bstylesheet\b/i))){if(t._bmr&&"number"==typeof t._bmr.res&&t._bmr.end[t._bmr.res]&&(O=!0),!(s=t.src||"function"==typeof t.getAttribute&&t.getAttribute("xlink:href")||t.href)||s.match(/^(about:|javascript:|data:)/i))return!1;if(t._bmr&&t._bmr.url!==s&&(O=!0),"IMG"===t.nodeName){if(t.naturalWidth&&!O)return!1;if("function"==typeof t.getAttribute&&""===t.getAttribute("src"))return!1}if("IFRAME"===t.nodeName&&O)return!1;if("function"==typeof t.getAttribute&&(a=parseInt(t.getAttribute("height"),10),d=parseInt(t.getAttribute("width"),10)),isNaN(a)&&(a=!t.style||"0"!==t.style.height&&"0px"!==t.style.height&&"1px"!==t.style.height?void 0:0),isNaN(d)&&(d=!t.style||"0"!==t.style.width&&"0px"!==t.style.width&&"1px"!==t.style.width?void 0:0),!isNaN(a)&&a<=1&&!isNaN(d)&&d<=1)return!1;if(t.style&&"none"===t.style.display)return!1;if(t.style&&"hidden"===t.style.visibility)return!1;if(!(e=this.pending_events[n]))return!1;if(u=e.resources.length,t._bmr||(t._bmr={end:{}}),e.urls||(e.urls={}),e.urls[s])return!1;if(!e.resource.url){if(h.href=s,f.excludeFilter(h))return R("Exclude for "+h.href+" matched. Excluding"),!1;e.resource.url=h.href}t._bmr.res=u,t._bmr.idx=n,delete t._bmr.end[u],t._bmr.url=s,c=function(e){l.load_cb(e,u),t.removeEventListener("load",c),t.removeEventListener("error",c)},R("Monitoring mutation URL: "+s+" for event id: "+n),t.addEventListener("load",c),t.addEventListener("error",c),e.nodes_to_wait++,this.clearTimeout(n),e.total_nodes++,e.resources.push(t),e.urls[s]=1,p=!0}else t.nodeType===Node.ELEMENT_NODE&&["IMAGE","IMG"].forEach(function(){},this);return p},g.prototype.add_event_resource=function(e){var t,n=this.pending_events.length-1;return n<0?-1:(t=this.pending_events[n])&&e?(R("Monitoring "+e.type+" URL: "+e.url+" for event id: "+n),t.nodes_to_wait++,t.total_nodes++,e.index=n,e.node=!0,n):-1},g.prototype.mutation_cb=function(e){var i,o,s;return this.watch&&((o=(i=this).pending_events.length-1)<0||!this.pending_events[o]||(s=this.pending_events[o]).ignoreMO||(void 0===s.interesting&&(s.interesting=!1),e&&e.length&&(s.resource.timing.domComplete=BOOMR.now(),e.forEach(function(e){var t,n,r;if("attributes"===e.type)s.interesting|=i.wait_for_node(e.target,o);else if("childList"===e.type){for(n=e.addedNodes.length,t=0;t<n;t++)s.interesting|=i.wait_for_node(e.addedNodes[t],o);for(n=e.removedNodes.length,t=0;t<n;t++)"IFRAME"===(r=e.removedNodes[t]).nodeName&&r._bmr&&i.load_cb({target:r,type:"removed"})}})),s.interesting||s.timeoutExtended||(this.setTimeout(1e3,o),s.timeoutExtended=!0))),!0},g.prototype.queue_is_empty=function(){return 0===this.nodesWaitingFor()},g.prototype.nodesWaitingFor=function(e){var t;return 0===this.pending_events.length?0:(void 0===e&&(e=this.pending_events.length-1),(t=this.pending_events[e])?t.nodes_to_wait:0)},g.prototype.completeEvent=function(e){var t,n=BOOMR.now();0!==this.pending_events.length&&(void 0===e&&(e=this.pending_events.length-1),(t=this.pending_events[e])&&(t.resource.timing.loadEventEnd=n,t.forced=!0,this.sendEvent(e)))},c=new g,f={spaBackEndResources:["xmlhttprequest","script","fetch"],alwaysSendXhr:!1,excludeFilters:[],initialized:!1,addedVars:[],captureXhrRequestResponse:!1,singlePageApp:!1,autoXhrEnabled:!1,monitorFetch:!1,fetchBodyUsedWait:200,spaIdleTimeout:1e3,xhrIdleTimeout:50,excludeFilter:function(e){var t,n;if(!e||!e.href)return!1;for(t=0;t<f.excludeFilters.length;t++)if("function"==typeof f.excludeFilters[t].cb){n=f.excludeFilters[t].ctx,f.excludeFilters[t].name&&R("Running filter: "+f.excludeFilters[t].name+" on URL: "+e.href);try{if(f.excludeFilters[t].cb.call(n,e))return R("Found matching filter at: "+f.excludeFilters[t].name+" for URL: "+e.href),!0}catch(e){BOOMR.addError(e,"BOOMR.plugins.AutoXHR.impl.excludeFilter()")}}return!1},clear:function(){f.addedVars&&0<f.addedVars.length&&(BOOMR.removeVar(f.addedVars),f.addedVars=[])},loadFinished:function(t,e){var n,r,i,o,s;e=e||BOOMR.now(),t.timing.loadEventEnd||(t.status&&BOOMR.fireEvent("xhr_error",t),t.timing.loadEventEnd=e,(s=BOOMR.getPerformance())&&s.timing&&(r=s.timing.navigationStart,(n=BOOMR.getResourceTiming(t.url,function(e,t){return e.responseEnd-t.responseEnd},function(){}))&&(i=Math.floor(r+n.startTime),(o=Math.floor(r+n.responseEnd))<=BOOMR.now()&&(t.timing.responseEnd=o,t.timing.loadEventEnd<o&&(t.timing.loadEventEnd=o),t.timing.requestStart=i,t.timing.fetchStart=i,0!==n.responseStart&&(t.timing.responseStart=Math.floor(r+n.responseStart)),t.restiming=n))),t.node&&m(t.url,f.alwaysSendXhr)&&c.sendResource(t),0<=t.index&&(c.monitorMO(t.index),c.load_finished(t.index,t.timing.responseEnd)))}},BOOMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(e){var t,n;if(u=d.document,d&&u){if(h=u.createElement("A"),BOOMR.utils.pluginConfig(f,e,"AutoXHR",["spaBackEndResources","alwaysSendXhr","monitorFetch","fetchBodyUsedWait","spaIdleTimeout","xhrIdleTimeout"]),BOOMR.instrumentXHR=v,BOOMR.uninstrumentXHR=B,BOOMR.instrumentFetch=M,BOOMR.uninstrumentFetch=_,f.initialized||(this.addExcludeFilter(a,null,"shouldExcludeXhr"),f.initialized=!0),e&&e.AutoXHR&&e.AutoXHR.excludeFilters&&0<e.AutoXHR.excludeFilters.length)for(n=0;n<e.AutoXHR.excludeFilters.length;n++)f.excludeFilters.push(e.AutoXHR.excludeFilters[n]);if(f.autoXhrEnabled=e.instrument_xhr,BOOMR.plugins.SPA&&BOOMR.plugins.SPA.supported_frameworks){var r=BOOMR.plugins.SPA.supported_frameworks();for(t=0;t<r.length;t++){var i=r[t];if(e[i]&&e[i].enabled){f.singlePageApp=!0;break}}}if(f.alwaysSendXhr&&f.autoXhrEnabled&&BOOMR.xhr&&"function"==typeof BOOMR.xhr.stop){function(){}var s=BOOMR.xhr.stop(o);s&&s.length&&BOOMR.setImmediate(o,s)}f.singlePageApp?(f.alwaysSendXhr||(f.autoXhrEnabled=!1),f.autoXhrEnabled&&(BOOMR.instrumentXHR(),BOOMR.instrumentFetch())):f.autoXhrEnabled?(BOOMR.instrumentXHR(),BOOMR.instrumentFetch()):!1===f.autoXhrEnabled&&(BOOMR.uninstrumentXHR(),BOOMR.uninstrumentFetch()),BOOMR.registerEvent("xhr_error"),BOOMR.subscribe("beacon",f.clear,null,f)}},getMutationHandler:function(){return c},getPathname:n,enableAutoXhr:function(){f.autoXhrEnabled||(BOOMR.instrumentXHR(),BOOMR.instrumentFetch()),f.autoXhrEnabled=!0},addExcludeFilter:function(){},setXhrRequestResponseCapturing:function(e){f.captureXhrRequestResponse=e},matchesAlwaysSendXhr:m})}();
!function(){var r,e=!1,n=!1,u=!1,s=!1,l=!1,O=!0,p=!1,g=!1,c=!1,i=[],a=!1;if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.SPA&&BOOMR.plugins.AutoXHR){var o={spaHardMissedOnComplete:function(t){var n,e=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart();a=!1,BOOMR.addVar("spa.missed","1"),BOOMR.plugins.RT&&BOOMR.plugins.RT.clearTimer("t_done"),t.timing.requestStart=e,0===t.resources.length&&(n=BOOMR.getPerformance())&&n.timing&&n.timing.navigationStart&&n.timing.loadEventEnd&&(t.timing.loadEventEnd=n.timing.loadEventEnd)},onBeacon:function(){BOOMR.removeVar("spa.missed","spa.forced","spa.waiting")}};BOOMR.plugins.SPA={is_complete:function(){return!a},init:function(t){t&&t.instrument_xhr&&(l=t.instrument_xhr,u&&l&&BOOMR.plugins.AutoXHR.enableAutoXhr()),n||(n=!0,BOOMR.subscribe("beacon",o.onBeacon,null,o))},register:function(t){i.push(t)},supported_frameworks:function(){return i},onLoadSpaHardMissed:function(){u||(s=!0,l&&BOOMR.plugins.AutoXHR.enableAutoXhr(),a=!0,c?a=!1:(BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),BOOMR.window.document.URL]),BOOMR.plugins.SPA.route_change(o.spaHardMissedOnComplete)))},hook:function(t,n){return n=n||{},d("Hooked"),"function"==typeof n.routeFilter&&(p=n.routeFilter),"function"==typeof n.routeChangeWaitFilter&&(g=n.routeChangeWaitFilter),n.disableHardNav&&(c=n.disableHardNav),e||(t&&BOOMR.attach_page_ready(this.onLoadSpaHardMissed),e=!0),this},route_change:function(n,t){d("Route Change");var e=!1,i=O&&!c?"spa_hard":"spa";if(r&&r.wait)d("Route change wait filter not complete; not tracking this route");else{if("spa"==i&&p)try{if(!p.apply(null,t))return void d("Route filter returned false; not tracking this route");d("Route filter returned true; tracking this route")}catch(t){BOOMR.addError(t,"SPA.route_change.routeFilter")}u=!0;var a=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart(),o={timing:{requestStart:s?BOOMR.now():a},initiator:i,url:BOOMR.window.document.URL};if(O=!1,s&&"function"!=typeof n||(s=!0,o.onComplete=function(t){e||(e=!0,BOOMR.fireEvent("spa_navigation")),"function"==typeof n&&n(t)}),"spa"==i&&g){d("Running route change wait filter");try{g.apply(null,arguments)?(d("Route filter returned true; waiting for complete call"),o.wait=!0,r=o):d("Route wait filter returned false; not waiting for complete call")}catch(t){BOOMR.addError(t,"SPA.route_change.routeChangeWaitFilter")}}o.index=BOOMR.plugins.AutoXHR.getMutationHandler().addEvent(o),l&&BOOMR.plugins.AutoXHR.enableAutoXhr()}},last_location:function(t){lastLocationChange=t},current_spa_nav:function(){return s?"spa":"spa_hard"},wait_complete:function(){r&&(r.wait=!1,r.waitComplete&&(d("Route wait filter complete"),r.waitComplete()),r=null)},markNavigationComplete:function(){var t,n,e,i=BOOMR.plugins.AutoXHR.getMutationHandler();if(r&&r.wait&&BOOMR.plugins.SPA.wait_complete(),i&&0<i.pending_events.length)for(t=i.pending_events.length-1;0<=t;t--)if((n=i.pending_events[t])&&BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)){if(n.complete)break;return d("SPA Navigation being marked complete; nodes waiting for: "+(e=i.nodesWaitingFor(t))),BOOMR.addVar("spa.forced","1"),BOOMR.addVar("spa.waiting",e),void i.completeEvent(t)}d("No SPA navigation in progress to mark as complete")},isSpaNavInProgress:function(){}},BOOMR.plugins.SPA.waitComplete=BOOMR.plugins.SPA.wait_complete}function d(t){BOOMR.debug(t,"SPA")}}();
!function(){var s={auto:!1,enabled:!0,hooked:!1,routeHooked:!1,hadMissedRouteChange:!1,routeChangeInProgress:!1,disableHardNav:!1,routeFilter:void 0,routeChangeWaitFilter:void 0,monitorReplaceState:!0,a:void 0,resetRouteChangeInProgress:function(){u("resetting routeChangeInProgress"),s.routeChangeInProgress&&clearTimeout(s.routeChangeInProgress),s.routeChangeInProgress=!1},setRouteChangeInProgress:function(){s.routeChangeInProgress&&clearTimeout(s.routeChangeInProgress),s.routeChangeInProgress=setTimeout(s.resetRouteChangeInProgress,50)},spaInit:function(){},routeChange:function(e,t){if(s.enabled){if(s.disableHardNav&&!BOOMR.onloadFired())return;if(s.routeChangeInProgress)u("routeChangeInProgress, not triggering");else{u("routeChange triggered, sending route_change() event"),s.spaInit(e,t);var n=_bcq.utils.getParamsSPA("PERFORMANCE_METRICS_SPA","prf.pgl.vww.pgl");BOOMR.addVar(n),BOOMR.plugins.SPA.route_change()}}else u("Not enabled - we've missed a routeChange"),s.hadMissedRouteChange=!0,s.resetRouteChangeInProgress()}};function u(e){BOOMR.debug(e,"History")}function r(){var r,a,t,e,n,o=BOOMR.window.history;function i(){BOOMR.window.addEventListener("popstate",function(e){u("popstate"),s.routeChange()})}return"function"==typeof o.pushState&&(o.pushState=(r=o.pushState,function(e,t,n){return u("pushState, title: "+t+" url: "+n),s.routeChange(t,n),r.apply(this,arguments)})),s.monitorReplaceState&&"function"==typeof o.replaceState&&(o.replaceState=(a=o.replaceState,function(e,t,n){var r=BOOMR.window.document.URL,o=r;return 3<=arguments.length&&null!=n&&(s.a.href=n,o=s.a.href),BOOMR.plugins.SPA.isSpaNavInProgress()&&o===r?u("replaceState ignored (no URL change and a SPA nav is in progress), title: "+t+" url: "+n):(u("replaceState, title: "+t+" url: "+n),s.routeChange(t,n)),a.apply(this,arguments)})),"function"==typeof o.go&&(o.go=(t=o.go,function(e){return u("go"),s.routeChange(),t.apply(this,arguments)})),"function"==typeof o.back&&(o.back=(e=o.back,function(){return u("back"),s.routeChange(),e.apply(this,arguments)})),"function"==typeof o.forward&&(o.forward=(n=o.forward,function(){return u("forward"),s.routeChange(),n.apply(this,arguments)})),BOOMR.window.addEventListener("hashchange",function(e){var t=(e||{}).newURL;u("hashchange "+t),s.routeChange(null,t)}),BOOMR.hasBrowserOnloadFired()?i():BOOMR.window.addEventListener("load",function(){setTimeout(i,0)}),BOOMR.subscribe("beacon",s.resetRouteChangeInProgress),BOOMR.subscribe("spa_cancel",s.resetRouteChangeInProgress),BOOMR.subscribe("spa_init",s.setRouteChangeInProgress),1}BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.History||void 0===BOOMR.plugins.SPA||void 0===BOOMR.plugins.AutoXHR||BOOMR.window&&BOOMR.window.history&&(BOOMR.plugins.SPA.register("History"),s.a=BOOMR.window.document.createElement("A"),BOOMR.plugins.History={is_complete:function(){return!0},hook:function(e,t,n){return(n=n||{}).disableHardNav=s.disableHardNav,s.hooked||(s.routeFilter&&(n.routeFilter=s.routeFilter),s.routeChangeWaitFilter&&(n.routeChangeWaitFilter=s.routeChangeWaitFilter),r()&&(BOOMR.plugins.SPA.hook(t,n),s.hooked=!0)),this},init:function(e){return BOOMR.utils.pluginConfig(s,e,"History",["auto","enabled","disableHardNav","routeFilter","routeChangeWaitFilter","monitorReplaceState"]),s.auto&&s.enabled&&this.hook(void 0,!0,{}),this},disable:function(){return s.enabled=!1,this},enable:function(){return s.enabled=!0,s.hooked&&s.hadMissedRouteChange&&(s.hadMissedRouteChange=!1,BOOMR.plugins.SPA.route_change(),s.setRouteChangeInProgress(),u("Hooked and hadMissedRouteChange sending route_change!")),this}})}();
!function(i){var o,n,a=1800;BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.RT||(n={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:604800,session_exp:a,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,loadTime:0,oboError:0,t_start:void 0,cached_t_start:void 0,cached_xhr_start:void 0,t_fb_approx:void 0,r:void 0,beacon_url:void 0,next_beacon_url:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},crossdomain_sending:!1,addedVars:[],updateCookie:function(t,e){var r,i,o,s;if(!this.cookie)return!1;for(s in o=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{})o.hasOwnProperty(s)&&(isNaN(parseInt(s,10))||delete o[s]);if("object"==typeof t)for(s in t)t.hasOwnProperty(s)&&(void 0===t[s]?o.hasOwnProperty(s)&&delete o[s]:o[s]=t[s]);return o.z=1,o.dm=BOOMR.session.domain,o.si=BOOMR.session.ID,o.ss=BOOMR.session.start.toString(36),o.sl=BOOMR.session.length.toString(36),n.session_exp!==a&&(o.se=n.session_exp.toString(36)),BOOMR.session.rate_limited&&(o.rl=1),o.tt=this.loadTime.toString(36),0<this.oboError?o.obo=this.oboError.toString(36):delete o.obo,i=BOOMR.now(),e&&(o[e]=(i-BOOMR.session.start).toString(36),n.lastActionTime=i),this.beacon_url&&(o.bcn=this.beacon_url),BOOMR.debug("Setting cookie (timer="+e+")\n"+BOOMR.utils.objectToString(o),"rt"),BOOMR.utils.setCookie(this.cookie,o,this.cookie_exp)?(50<(r=BOOMR.now())-i&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+i+" -> "+r,"rt")),!0):(BOOMR.error("cannot set start cookie","rt"),!1)},refreshSession:function(t){(t=t||BOOMR.plugins.RT.getCookie())&&(t.ss?BOOMR.session.start=t.ss:BOOMR.session.start=BOOMR.t_lstart||BOOMR.t_start,t.si&&t.si.match(/-/)&&(BOOMR.session.ID=t.si),t.sl&&(BOOMR.session.length=t.sl),t.tt&&(this.loadTime=t.tt),t.obo&&(this.oboError=t.obo),t.dm&&!BOOMR.session.domain&&(BOOMR.session.domain=t.dm),t.se&&(n.session_exp=t.se),t.bcn&&(this.beacon_url=t.bcn),t.rl&&"1"===t.rl&&(BOOMR.session.rate_limited=!0))},maybeResetSession:function(t,e){BOOMR.debug("Current session meta:\n"+BOOMR.utils.objectToString(BOOMR.session),"rt"),BOOMR.debug("Timers: t_start="+e+", sessionLoad="+n.loadTime+", sessionError="+n.oboError+", lastAction="+n.lastActionTime,"rt");var r=0;BOOMR.session.start&&BOOMR.session.length&&(r=(BOOMR.now()-BOOMR.session.start)/BOOMR.session.length);var i=1e3*n.session_exp;(!BOOMR.session.start||e&&BOOMR.session.start>e||t-(n.lastActionTime||BOOMR.t_start)>i||i<r)&&(BOOMR.session.start=e||BOOMR.t_lstart||BOOMR.t_start,BOOMR.session.length=0,BOOMR.session.rate_limited=!1,n.loadTime=0,n.oboError=0,n.beacon_url=n.next_beacon_url,n.lastActionTime=t,n.updateCookie({rl:void 0,sl:BOOMR.session.length,ss:BOOMR.session.start,tt:n.loadTime,obo:void 0,bcn:n.beacon_url})),BOOMR.debug("New session meta:\n"+BOOMR.utils.objectToString(BOOMR.session),"rt"),BOOMR.debug("Timers: t_start="+e+", sessionLoad="+n.loadTime+", sessionError="+n.oboError,"rt")},initFromCookie:function(){var t,e,r;r=BOOMR.plugins.RT.getCookie(),this.cookie||(BOOMR.session.enabled=!1),r&&(r.s=Math.max(+r.ld||0,Math.max(+r.ul||0,+r.cl||0)),BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(r),"rt"),r.s&&(r.r||r.nu)&&(this.r=r.r,t=BOOMR.utils.MD5(o.URL),e=BOOMR.utils.MD5(o&&o.referrer||""),BOOMR.debug("referrer check: "+this.r+" =?= "+e,"rt"),r.cl&&BOOMR.debug(r.s+" <? "+(+r.cl+15),"rt"),r.nu&&BOOMR.debug(r.nu+" =?= "+t,"rt"),!this.strict_referrer||r.cl&&r.nu&&r.nu===t&&r.s<+r.cl+15||r.s===+r.ul&&this.r===e?(this.t_start=r.s,+r.hd>r.s&&(this.t_fb_approx=r.hd)):this.t_start=this.t_fb_approx=void 0),r.s&&(this.lastActionTime=r.s),this.refreshSession(r),this.updateCookie({s:void 0,ul:void 0,cl:void 0,hd:void 0,ld:void 0,rl:void 0,r:void 0,nu:void 0,sh:void 0}),this.maybeResetSession(BOOMR.now()))},incrementSessionDetails:function(){BOOMR.debug("Incrementing Session Details... ","RT"),BOOMR.session.length++,isNaN(n.timers.t_done.delta)?n.oboError++:n.loadTime+=n.timers.t_done.delta},getBoomerangTimings:function(){var t,e,r,i,o;function(){}BOOMR.t_start&&(BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start),BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end),BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start),BOOMR.t_lstart&&(BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart),BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)));try{if(window&&"performance"in window&&window.performance&&"function"==typeof window.performance.getEntriesByName)for(r in e={"rt.bmr":BOOMR.url},BOOMR.config_url&&(e["rt.cnf"]=BOOMR.config_url),e)if(e.hasOwnProperty(r)&&e[r]){if(!(t=window.performance.getEntriesByName(e[r]))||0===t.length||!t[0])continue;o=[i=s((t=t[0]).startTime,0),s(t.responseEnd,i),s(t.responseStart,i),s(t.requestStart,i),s(t.connectEnd,i),s(t.secureConnectionStart,i),s(t.connectStart,i),s(t.domainLookupEnd,i),s(t.domainLookupStart,i),s(t.redirectEnd,i),s(t.redirectStart,i)].join(",").replace(/,+$/,""),BOOMR.addVar(r,o),n.addedVars.push(r)}}catch(t){BOOMR.addError(t,"rt.getBoomerangTimings")}},checkPreRender:function(){return"prerender"===BOOMR.visibilityState()&&(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),!0)},initFromNavTiming:function(){var t,e,r;this.navigationStart||((e=BOOMR.getPerformance())&&e.navigation&&(this.navigationType=e.navigation.type),e&&e.timing?t=e.timing:i.chrome&&i.chrome.csi&&i.chrome.csi().startE?(t={navigationStart:i.chrome.csi().startE},r="csi"):i.gtbExternal&&i.gtbExternal.startE()&&(t={navigationStart:i.gtbExternal.startE()},r="gtb"),t?(BOOMR.addVar("rt.start",r||"navigation"),this.navigationStart=t.navigationStart||t.fetchStart||void 0,this.fetchStart=t.fetchStart||void 0,this.responseStart=t.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=t.unloadEventStart||t.fetchStart||void 0)):BOOMR.warn("This browser doesn't support the WebTiming API","rt"))},validateLoadTimestamp:function(){},setPageLoadTimers:function(t,e,r){var i,o;if("xhr"!==t&&(n.initFromCookie(),n.initFromNavTiming(),n.checkPreRender()))return!1;if("xhr"===t)if(r.timers)for(var s in r.timers)r.timers.hasOwnProperty(s)&&BOOMR.plugins.RT.setTimer(s,r.timers[s]);else r&&r.timing&&(void 0===(o=r.timing.fetchStart)||r.timing.responseEnd>=o)&&(i=r.timing.responseEnd);else n.responseStart?n.responseStart>=n.navigationStart&&n.responseStart>=n.fetchStart&&(i=n.responseStart):n.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):n.t_fb_approx&&(i=n.t_fb_approx);return i&&(o?BOOMR.plugins.RT.setTimer("t_resp",o,i):BOOMR.plugins.RT.endTimer("t_resp",i),"load"===t&&n.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",n.timers.t_load.end-i):e<i?BOOMR.addVar("t_page.inv",1):BOOMR.plugins.RT.setTimer("t_page",e-i)),"load"===t&&n.timers.hasOwnProperty("t_postrender")&&(BOOMR.plugins.RT.endTimer("t_postrender"),BOOMR.plugins.RT.endTimer("t_prerender")),!0},setSupportingTimestamps:function(t){t&&BOOMR.addVar("rt.tstart",t),"number"==typeof n.navigationStart&&n.navigationStart!==t&&BOOMR.addVar("rt.nstart",n.navigationStart),"number"==typeof n.t_start&&n.t_start!==t&&BOOMR.addVar("rt.cstart",n.t_start),BOOMR.addVar("rt.bstart",BOOMR.t_start),BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart),BOOMR.addVar("rt.end",n.timers.t_done.end)},determineTStart:function(t,e){var r;return"xhr"===t?(e&&e.name&&n.timers[e.name]?r=n.timers[e.name].start:e&&e.timing&&e.timing.requestStart&&(r=e.timing.requestStart),void 0===r&&e&&BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS)?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual"),n.cached_xhr_start=r):(n.navigationStart?r=n.navigationStart:n.t_start&&2!==n.navigationType?(r=n.t_start,BOOMR.addVar("rt.start","cookie")):r=n.cached_t_start?n.cached_t_start:void BOOMR.addVar("rt.start","none"),n.cached_t_start=r),BOOMR.debug("Got start time: "+r,"rt"),r},page_ready:function(){this.onloadfired=!0},check_visibility:function(){},prerenderToVisible:function(){n.onloadfired&&n.autorun&&(BOOMR.debug("Transitioned from prerender to "+BOOMR.visibilityState(),"rt"),BOOMR.addVar("vis.pre","1"),BOOMR.plugins.RT.done(null,"visible"))},page_unload:function(t){BOOMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt"),this.unloadfired||BOOMR.plugins.RT.done(t,"unload"),this.updateCookie(!n.navigationStart&&n.strict_referrer?{r:BOOMR.utils.MD5(o.URL)}:null,"beforeunload"===t.type?"ul":"hd"),this.unloadfired=!0},_iterable_click:function(t,e,r,i){var o;if(r){for(BOOMR.debug(t+" called with "+r.nodeName,"rt");r&&r.nodeName&&r.nodeName.toUpperCase()!==e;)r=r.parentNode;r&&r.nodeName&&r.nodeName.toUpperCase()===e&&(BOOMR.debug("passing through","rt"),this.refreshSession(),this.maybeResetSession(BOOMR.now()),o=i(r),this.updateCookie({nu:BOOMR.utils.MD5(o)},"cl"),BOOMR.addVar("nu",BOOMR.utils.cleanupURL(o)),n.addedVars.push("nu"))}},onclick:function(){},markComplete:function(){},onsubmit:function(){},onconfig:function(t){t.beacon_url&&(n.beacon_url=t.beacon_url),t.RT&&(t.RT.oboError&&!isNaN(t.RT.oboError)&&t.RT.oboError>n.oboError&&(n.oboError=t.RT.oboError),t.RT.loadTime&&!isNaN(t.RT.loadTime)&&t.RT.loadTime>n.loadTime&&(n.loadTime=t.RT.loadTime,n.timers.t_done&&!isNaN(n.timers.t_done.delta)&&(n.loadTime+=n.timers.t_done.delta)))},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){BOOMR.removeVar("rt.start"),n.addedVars&&0<n.addedVars.length&&(BOOMR.removeVar(n.addedVars),n.addedVars=[])},spaNavigation:function(){n.onloadfired=!0}},BOOMR.plugins.RT={init:function(t){if(BOOMR.debug("init RT","rt"),i!==BOOMR.window&&(i=BOOMR.window),t&&t.CrossDomain&&t.CrossDomain.sending&&(n.crossdomain_sending=!0),i&&i.document)return o=i.document,BOOMR.utils.pluginConfig(n,t,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]),t&&void 0!==t.autorun&&(n.autorun=t.autorun),t&&t.beacon_url&&(n.beacon_url&&!t.force_beacon_url||(n.beacon_url=t.beacon_url),n.next_beacon_url=t.beacon_url),void 0!==o&&(n.r=BOOMR.utils.hashQueryString(o.referrer,!0)),n.initFromCookie(),n.initialized||(n.complete=!1,n.timers={},n.check_visibility(),BOOMR.subscribe("page_ready",n.page_ready,null,n),BOOMR.subscribe("visibility_changed",n.check_visibility,null,n),BOOMR.subscribe("prerender_to_visible",n.prerenderToVisible,null,n),BOOMR.subscribe("page_ready",this.done,"load",this),BOOMR.subscribe("xhr_load",this.done,"xhr",this),BOOMR.subscribe("dom_loaded",n.domloaded,null,n),BOOMR.subscribe("page_unload",n.page_unload,null,n),BOOMR.subscribe("click",n.onclick,null,n),BOOMR.subscribe("form_submit",n.onsubmit,null,n),BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),BOOMR.subscribe("beacon",n.clear,null,n),BOOMR.subscribe("error",n.markComplete,null,n),BOOMR.subscribe("config",n.onconfig,null,n),BOOMR.subscribe("spa_navigation",n.spaNavigation,null,n),BOOMR.subscribe("interaction",n.markComplete,null,n),BOOMR.getBeaconURL=function(){return n.beacon_url},n.initialized=!0),this},startTimer:function(t,e){return t&&("t_page"===t&&this.endTimer("t_resp",e),n.timers[t]={start:"number"==typeof e?e:BOOMR.now()}),this},endTimer:function(t,e){return t&&(n.timers[t]=n.timers[t]||{},void 0===n.timers[t].end&&(n.timers[t].end="number"==typeof e?e:BOOMR.now())),this},clearTimer:function(t){return t&&delete n.timers[t],this},setTimer:function(t,e,r){return t&&(n.timers[t]=void 0!==r?{start:e,end:r,delta:r-e}:{delta:e}),this},addTimersToBeacon:function(t,e){var r,i,o=[];for(r in n.timers)if(n.timers.hasOwnProperty(r)){if("number"!=typeof(i=n.timers[r]).delta&&("number"!=typeof i.start&&(i.start="xhr"===e?n.cached_xhr_start:n.cached_t_start),i.delta=i.end-i.start),isNaN(i.delta))continue;n.basic_timers.hasOwnProperty(r)?(BOOMR.addVar(r,i.delta),n.addedVars.push(r)):o.push(r+"|"+i.delta)}o.length&&(BOOMR.addVar("t_other",o.join(",")),n.addedVars.push("t_other")),"beacon"===e&&(n.timers={},n.complete=!1)},done:function(t,e){BOOMR.debug("Called done: "+e,"rt");var r,i,o=BOOMR.now(),s=!1;return n.complete=!1,i=n.validateLoadTimestamp(o,t,e),("load"!==e&&"visible"!==e&&"xhr"!==e||n.setPageLoadTimers(e,i,t))&&(("load"===e||"visible"===e||"xhr"===e&&t&&"spa_hard"===t.initiator)&&n.getBoomerangTimings(),r=n.determineTStart(e,t),n.refreshSession(),n.maybeResetSession(i,r),this.endTimer("t_done",i),t&&"xhr"===t.initiator&&this.setTimer("t_done",t.timing.requestStart,t.timing.loadEventEnd),BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","rt.tstart","rt.nstart","rt.cstart","rt.bstart","rt.end","rt.subres","http.errno","http.method","http.type","xhr.sync","fetch.bnu","rt.ss","rt.sl","rt.tt","rt.lt"),n.setSupportingTimestamps(r),this.addTimersToBeacon(null,e),BOOMR.setReferrer(n.r),"xhr"===e&&t&&t&&t.data&&(t=t.data),"xhr"===e&&t&&(s=t.subresource,t.url&&(BOOMR.addVar("u",BOOMR.utils.cleanupURL(t.url.replace(/#.*/,""))),n.addedVars.push("u")),t.status&&(t.status<-1||400<=t.status)&&BOOMR.addVar("http.errno",t.status),t.method&&"GET"!==t.method&&BOOMR.addVar("http.method",t.method),t.type&&"xhr"!==t.type&&BOOMR.addVar("http.type",t.type[0]),t.headers&&BOOMR.addVar("http.hdr",t.headers),t.synchronous&&BOOMR.addVar("xhr.sync",1),t.initiator&&BOOMR.addVar("http.initiator",t.initiator),t.responseBodyNotUsed&&BOOMR.addVar("fetch.bnu",1),n.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator","fetch.bnu")),s&&"passive"!==s&&(BOOMR.addVar("rt.subres",1),n.addedVars.push("rt.subres")),("load"===e||"visible"===e||"xhr"===e&&!s||"unload"===e&&!n.onloadfired&&n.autorun&&!n.crossdomain_sending)&&(n.incrementSessionDetails(),n.updateCookie(null,"ld")),BOOMR.addVar({"rt.tt":n.loadTime,"rt.obo":n.oboError}),n.addedVars.push("rt.tt","rt.obo"),n.updateCookie(),"unload"===e&&(BOOMR.addVar("rt.quit",""),n.onloadfired||(BOOMR.addVar("rt.abld",""),n.addedVars.push("rt.abld")),n.visiblefired||BOOMR.addVar("rt.ntvu","")),n.complete=!0,BOOMR.sendBeacon(n.beacon_url)),this},is_complete:function(){},updateCookie:function(){n.updateCookie()},getCookie:function(){var t,e,r;return!!n.cookie&&((t=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(n.cookie))||{})&&(r=1&t.z?(e=36,parseInt(t.ss||0,36)):(e=10,0),t.ss=parseInt(t.ss||0,e),t.tt=parseInt(t.tt||0,e),t.obo=parseInt(t.obo||0,e),t.sl=parseInt(t.sl||0,e),t.se&&(t.se=parseInt(t.se,e)||a),t.ld&&(t.ld=r+parseInt(t.ld,e)),t.ul&&(t.ul=r+parseInt(t.ul,e)),t.cl&&(t.cl=r+parseInt(t.cl,e)),t.hd&&(t.hd=r+parseInt(t.hd,e))),t)},incrementSessionDetails:function(){n.incrementSessionDetails()},navigationStart:function(){return n.navigationStart||n.initFromNavTiming(),n.navigationStart}})}(window);
!function(){if(BOOMR=window.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.NavigationTiming){var c={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0,BOOMR.sendBeacon()},xhr_done:function(t){var n;if(t&&"spa_hard"===t.initiator)c.done(t);else if(t&&"spa"===t.initiator)c.sendBeacon();else{BOOMR.window;var e,i,r={};if(t){if(t.data&&(t=t.data),(n=BOOMR.getPerformance())&&t.restiming)for(i in r={nt_red_st:t.restiming.redirectStart,nt_red_end:t.restiming.redirectEnd,nt_fet_st:t.restiming.fetchStart,nt_dns_st:t.restiming.domainLookupStart,nt_dns_end:t.restiming.domainLookupEnd,nt_con_st:t.restiming.connectStart,nt_con_end:t.restiming.connectEnd,nt_req_st:t.restiming.requestStart,nt_res_st:t.restiming.responseStart,nt_res_end:t.restiming.responseEnd},t.restiming.secureConnectionStart&&(r.nt_ssl_st=t.restiming.secureConnectionStart),r)r.hasOwnProperty(i)&&r[i]&&(r[i]+=n.timing.navigationStart,r[i]=Math.floor(r[i]));for(i in t.timing&&(e=t.timing,r.nt_req_st||(r.nt_req_st=e.requestStart),r.nt_res_st||(r.nt_res_st=e.responseStart),r.nt_res_end||(r.nt_res_end=e.responseEnd),r.nt_domint=e.domInteractive,r.nt_domcomp=e.domComplete,r.nt_load_st=e.loadEventEnd,r.nt_load_end=e.loadEventEnd),r)r.hasOwnProperty(i)&&!r[i]&&delete r[i];BOOMR.addVar(r);try{c.addedVars.push.apply(c.addedVars,Object.keys(r))}catch(t){}c.sendBeacon()}}},done:function(){var t,n,e,i,r,o,a=BOOMR.window,d={},s=0,_=!1;if(this.complete)return this;if(c.addedVars=[],t=BOOMR.getPerformance()){for(o in"function"==typeof t.getEntriesByType&&((i=t.getEntriesByType("navigation"))&&i.length?(BOOMR.info("This user agent supports NavigationTiming2","nt"),i=i[0],s=t.timing?t.timing.navigationStart:0):i=void 0),!i&&t.timing&&(BOOMR.info("This user agent supports NavigationTiming","nt"),i=t.timing),i&&(!(d={nt_nav_st:t.timing?t.timing.navigationStart:0,nt_red_st:m(s,i.redirectStart),nt_red_end:m(s,i.redirectEnd),nt_fet_st:m(s,i.fetchStart),nt_dns_st:m(s,i.domainLookupStart),nt_dns_end:m(s,i.domainLookupEnd),nt_con_st:m(s,i.connectStart),nt_con_end:m(s,i.connectEnd),nt_req_st:m(s,i.requestStart),nt_res_st:m(s,i.responseStart),nt_res_end:m(s,i.responseEnd),nt_domloading:m(s,i.domLoading),nt_domint:m(s,i.domInteractive),nt_domcontloaded_st:m(s,i.domContentLoadedEventStart),nt_domcontloaded_end:m(s,i.domContentLoadedEventEnd),nt_domcomp:m(s,i.domComplete),nt_load_st:m(s,i.loadEventStart),nt_load_end:m(s,i.loadEventEnd),nt_unload_st:m(s,i.unloadEventStart),nt_unload_end:m(s,i.unloadEventEnd)}).nt_domloading&&t&&t.timing&&t.timing.domLoading&&(d.nt_domloading=t.timing.domLoading),i.secureConnectionStart&&(d.nt_ssl_st=m(s,i.secureConnectionStart)),t.timing&&t.timing.msFirstPaint&&(d.nt_first_paint=t.timing.msFirstPaint),i.workerStart&&(d.nt_worker_start=m(s,i.workerStart)),(i.decodedBodySize||i.transferSize)&&(d.nt_enc_size=i.encodedBodySize,d.nt_dec_size=i.decodedBodySize,d.nt_trn_size=i.transferSize),i.nextHopProtocol&&(d.nt_protocol=i.nextHopProtocol)),!d.nt_first_paint&&BOOMR.plugins.PaintTiming&&(_=BOOMR.plugins.PaintTiming.is_supported(),(r=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(d.nt_first_paint=m(s,r))),d.nt_protocol&&d.nt_first_paint||i&&""===i.nextHopProtocol||_||!a.chrome||"function"!=typeof a.chrome.loadTimes||(e=a.chrome.loadTimes())&&(d.nt_spdy=e.wasFetchedViaSpdy?1:0,d.nt_cinf=e.connectionInfo,"number"==typeof e.firstPaintTime&&0!==e.firstPaintTime&&(d.nt_first_paint=Math.round(1e3*e.firstPaintTime))),t.navigation&&(n=t.navigation,d.nt_red_cnt=n.redirectCount,d.nt_nav_type=n.type),d)d.hasOwnProperty(o)&&void 0===d[o]&&delete d[o];BOOMR.addVar(d),i&&(i.requestStart&&i.navigationStart&&i.requestStart<i.navigationStart||i.responseStart&&i.navigationStart&&i.responseStart<i.navigationStart||i.responseStart&&i.fetchStart&&i.responseStart<i.fetchStart||i.navigationStart&&i.fetchStart<i.navigationStart||i.responseEnd&&i.responseEnd>BOOMR.now()+864e5)&&(BOOMR.addVar("nt_bad",1),c.addedVars.push("nt_bad"));try{c.addedVars.push.apply(c.addedVars,Object.keys(d))}catch(t){}0<d.nt_load_end&&(this.fullySent=!0)}c.sendBeacon()},clear:function(){c.addedVars&&0<c.addedVars.length&&(BOOMR.removeVar(c.addedVars),c.addedVars=[]),this.complete=this.fullySent},prerenderToVisible:function(){this.complete=!1,this.done()}};BOOMR.plugins.NavigationTiming={init:function(){return c.initialized||(BOOMR.subscribe("page_ready",c.done,null,c),BOOMR.subscribe("prerender_to_visible",c.prerenderToVisible,null,c),BOOMR.subscribe("xhr_load",c.xhr_done,null,c),BOOMR.subscribe("before_unload",c.done,null,c),BOOMR.subscribe("beacon",c.clear,null,c),c.initialized=!0),this},is_complete:function(){return!0}}}function(){}