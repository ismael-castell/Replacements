$(document).on("mouseenter","a.ctaArrow.btn-cta-view",function(a){a.isTrigger||$(a.currentTarget).find(".arrow").mouseover()});$(document).on("mouseleave","a.ctaArrow.btn-cta-view",function(a){a.isTrigger||$(a.currentTarget).find(".arrow").mouseout()});
$(document).on("click",".cta-showhide-section-control a",function(a){a.preventDefault();a.stopPropagation();var c=a=0;$("header .sticky-head").length&&(a=$("header .sticky-head").height());$("#sticky-nav.sticky-stuck").length&&(c=$("#sticky-nav.sticky-stuck").height());$("section.cta-showhide-section-target").toggleClass("d-block-edit-mode");$("section.cta-showhide-section-target").hasClass("d-block-edit-mode")||$("html, body").animate({scrollTop:$("section.cta-showhide-section-target").offset().top-
a-c},"slow")});
$(window).on("load",function(){if(0==$(".subnav .nav-view").length&&!(0<$(".subnav .subnav2-0").length)){var a=$(".subnav"),c=$("header .sticky-head"),b=$("#sticky-nav.sticky-head");$("header .sticky-head").outerHeight();var d=$(a).offset(),e=$(b).offset(),l=a.find("a"),f=l.map(function(){if(0==$(this).attr("href").indexOf("#")){var a=$($(this).attr("href"));if(a.length)return a}});b.length?b.outerHeight():a.outerHeight();var k=0;l.click(function(a){if(0==$(this).attr("href").indexOf("#")){if($(b).length){var d=$(this).attr("href"),
e=$(d),f=$(d+".section");if(1<f.length)for(var n=0;n<f.length;n++)0!=$(f[n]).offset().top&&(e=$(f[n]));var g="#"===d?0:e.offset().top-c.outerHeight();992>$(window).width()&&(g-=20);f=$("#stickyTab.sticky-head");if(f.length){var l=e.closest(".editorial-listing").length?e.closest(".editorial-listing").closest("section.section").offset().top:0;n=f.closest(".editorial-listing").closest("section.section").offset().top;l==n&&(f.hasClass("sticky-stuck")?f.outerHeight():(f.addClass("sticky-stuck"),g=f.outerHeight(),
g=c.outerHeight()+b.outerHeight()+g+"px",$(f).closest("section").css("margin-top",g)),g="#"===d?0:e.offset().top-c.outerHeight()-b.outerHeight());e.offset().top>n?(d=n+f.closest(".editorial-listing").closest("section.section").outerHeight(),e.offset().top+1<d||k>n?f.attr("resetMarginTop","false"):f.attr("resetMarginTop","true")):f.attr("resetMarginTop","false")}}else d=$(this).attr("href"),g="#"===d?0:$(d).offset().top+1;$("html, body").stop().animate({scrollTop:g},300);a.preventDefault();k=g}});
$(a).length&&$(window).bind("scroll",function(){$(window).scrollTop()>=d.top?$(a).closest("section.section").addClass("fixedNav"):$(a).closest("section.section").removeClass("fixedNav")});$(window).bind("scroll",function(){handleSubnavScroll(b,c,a,f,l,void 0,e)});handleSubnavScroll(b,c,a,f,l,void 0,e)}});
function handleSubnavScroll(a,c,b,d,e,l,f){var k=$("#stickyTab.sticky-head"),p=$(window).scrollTop();p=a.length?$(window).scrollTop()+c.outerHeight()+a.outerHeight():$(window).scrollTop()+b.outerHeight();if(k.length){var m=k.closest(".editorial-listing");b=m.offset().top;m=b+m.outerHeight();$(window).scrollTop()+1>b&&$(window).scrollTop()<m&&(k.hasClass("sticky-stuck"),k=k.outerHeight(),p+=k)}d=d.map(function(){var a=$(this),b=$(this).attr("id");b=$("#"+b+".section");if(1<b.length)for(var c=0;c<b.length;c++)0!=
$(b[c]).offset().top&&(a=$(b[c]));a=a.offset().top;if(p>a)return this});d=(d=d[d.length-1])&&d.length?d[0].id:"";"undefined"!=typeof d&&l!==d&&(l=d,e.removeClass("active"),$(".subnav").find("[href\x3d'#"+d+"']").addClass("active"));$(a).length&&(992>$(window).width()?$(window).scrollTop()+c.outerHeight()>a.offset().top?a.hasClass("sticky-stuck")||a.addClass("sticky-stuck"):$(window).scrollTop()+c.outerHeight()<=f.top&&$(a).removeClass("sticky-stuck"):$(window).scrollTop()+c.outerHeight()>a.offset().top+
a.outerHeight()?a.hasClass("sticky-stuck")||a.addClass("sticky-stuck"):$(window).scrollTop()+c.outerHeight()<=f.top+a.outerHeight()&&$(a).removeClass("sticky-stuck"))}
$(window).on("load",function(){if(0<$(".subnav2-0 .sticky-head").length){$("#sticky-nav \x3e .inner-wrap").append('\x3cdiv class\x3d"slidingDiv"\x3e\x3c/div\x3e');var a=$(".subnav2-0"),c=$(".sticky-head");c.outerHeight();$(a).offset();$(c).offset();var b=a.find("a:not('.pdp-buy-btn-link, .reviews-subnavItem.hidden a')"),d=b.map(function(){if(0==$(this).attr("href").indexOf("#")){var a=$($(this).attr("href"));if(a.length)return a}});$(".subnav2-0 .sticky-head a.link-cta").on("click",function(a){if(0===
$.trim($(this).attr("href")).indexOf("#")){a.preventDefault();a.stopPropagation();a=$("header.header:visible").outerHeight()+75;var b=$(".inner-wrap .subnav-item:first-child");this.attributes.href==b[0].childNodes[1].attributes.href?$("html, body").animate({scrollTop:$(this.hash).offset().top-a},500):$("html, body").animate({scrollTop:$(this.hash).offset().top-75},500);992>$(window).width()&&$(this).closest(".sticky-head").toggleClass("mob-subnav-dropdown-open");return!1}});$(window).bind("scroll",
function(){handleNavbar2_0Scroll(d,b,void 0)});handleNavbar2_0Scroll(d,b,void 0);var e=location.href.split(/[?#]/)[0].split("/");e=e[e.length-1].split(".")[0];$(".sticky-head a.link-cta").each(function(){var a=$(this).attr("href").split(/[?#]/)[0].split("/");a=a[a.length-1].split(".")[0];if(a==e)return $(this).addClass("subnav-active-item"),992>$(window).width()&&$(".sticky-head:visible").scrollLeft($(this).offset().left),!1});$(".store-product-wtb, .addToCartBtn").length&&(setTimeout(function(){$(window).scroll(function(){var a=
$(".store-product-wtb:visible, .addToCartBtn:visible").offset().top-50;$(this).scrollTop()>=a?$(".pdp-buy-btn").removeClass("hidden"):$(".pdp-buy-btn").addClass("hidden")})},1500),$(".subnav2-0 .sticky-head a.pdp-buy-btn-link").on("click",function(a){a.preventDefault();a.stopPropagation();$("html, body").animate({scrollTop:$(this.hash).offset().top-75},500)}));991>=$(window).width()&&($(window).scroll(function(){$("#sticky-nav.sticky-head .subnav-item").hasClass("active-subnav-item")?$("#sticky-nav.sticky-head .subnav-item").closest(".inner-wrap").addClass("carrot-arrow"):
$("#sticky-nav.sticky-head .subnav-item").closest(".inner-wrap").removeClass("carrot-arrow")}),$("#sticky-nav.sticky-head").on("click",".subnav-item",function(){$(this).closest(".sticky-head").toggleClass("mob-subnav-dropdown-open")}),a=$(".sticky-head .subnav-active-item").parent(".subnav-item"),$(".sticky-head .inner-wrap").prepend($(a)))}});var lastScrolledDiv=null;
function handleNavbar2_0Scroll(a,c,b){var d=$("#sticky-nav.sticky-head"),e=$(window).scrollTop();e>$("header.header").outerHeight(!0)?d.addClass("sticky-stuck"):d.removeClass("sticky-stuck");a=a.map(function(){var a=$(this),b=$(this).attr("id");b=$("#"+b+".section");if(1<b.length)for(var c=0;c<b.length;c++)0!=$(b[c]).offset().top&&(a=$(b[c]));a=a.offset().top;if(e+100>a)return this});a=(a=a[a.length-1])&&a.length?a[0].id:"";"undefined"!=typeof a&&b!==a&&(b=a,c.closest(".subnav-item").removeClass("active-subnav-item"),
$(".sticky-head").find("[href\x3d'#"+a+"']").closest(".subnav-item").addClass("active-subnav-item"),c.removeClass("active-section"),$(".sticky-head").find("[href\x3d'#"+a+"']").addClass("active-section"),c=$(".sticky-head:visible").find("[href\x3d'#"+a+"']").parent("div"),!c.is(lastScrolledDiv)&&c.length&&(lastScrolledDiv=c,$("#sticky-nav").scrollLeft($(lastScrolledDiv).offset().left)),executeSlidingBarOnSubnav(c))}var verticalSubNavApp=angular.module("VerticalSubNavApp",[]);
verticalSubNavApp.controller("VerticalSubNavController",["$scope",function(a){$(window).on("load",function(){if(1==$(".subnav-vertical-list").length){var c,b=$(".subnav-vertical-list"),d=$(".subnav-vertical-list").offset().top;b.outerHeight();var e=b.find("a"),l=e.map(function(){if(0==$(this).attr("href").indexOf("#")){var a=$($(this).attr("href"));if(a.length)return a}});e.click(function(a){var b=75;992>$(window).width()&&(b=150);if(0==$(this).attr("href").indexOf("#")){var c=$(this).attr("href");
b="#"===c?0:$(c).offset().top-b;$("html, body").stop().animate({scrollTop:b},300);a.preventDefault()}});isIE=!!document.documentMode;isEdge=!isIE&&!!window.StyleMedia;a.stickyNavIe=function(){(1==isIE||1==isEdge)&&992>$(window).width()&&($(window).scrollTop()>=d?b.closest(".navbar").addClass("ie-sticky-left-nav"):b.closest(".navbar").removeClass("ie-sticky-left-nav"))};a.stickyNavIe();$(window).scroll(function(){var d=$(this).scrollTop(),k=l.map(function(){if($(this).offset().top-d<b.offset().top-
d)return this});k=(k=k[k.length-1])&&k.length?k[0].id:"";"undefined"!=typeof k&&c!==k&&(c=k,e.removeClass("font-medium"),$(".subnav-vertical-list").find("[href\x3d'#"+k+"']").addClass("font-medium"));a.stickyNavIe()})}});a.subnavDropdownActive=!1;a.subnavelinkDropdown=function(c){a.subnavDropdownActive?(a.subnavDropdownActive=!a.subnavDropdownActive,$(".listSabNavView li a").parent("li").removeClass("flex").addClass("bg-gray-1"),$(c.currentTarget).parent("li").addClass("flex bg-white").removeClass("bg-gray-1"),
$(".listSabNavView li .simple-svg-wrapper").addClass("hidden").removeClass("rotate-180"),$(c.currentTarget).parent("li").find(".simple-svg-wrapper").removeClass("hidden")):(a.subnavDropdownActive=!a.subnavDropdownActive,$(".listSabNavView li").addClass("flex bg-gray-1"),$(".listSabNavView li .simple-svg-wrapper").addClass("hidden").removeClass("rotate-180"),$(c.currentTarget).parent("li").find(".simple-svg-wrapper").removeClass("hidden").addClass("rotate-180"),$(c.currentTarget).parent("li").removeClass("bg-gray-1").addClass("bg-white"))}}]);
$(document).on("click",".closeVideo",function(){$(this).closest(".modal").modal("hide");$(this).closest(".modal-content").find("iframe").attr("src","")});function addSrcToIframeInModal(a){a=$(a);$(a.attr("data-target")).find("iframe").attr("src",a.attr("data-videosrc"))}
angular.module("wdmodal",[]).controller("wdmodalController",["$scope",function(a){a.WdOpenModal=function(a,b){try{var c={};c.videoUrl=$(a).find("iframe").attr("src",b);var e=window.aa.createEvent("PLAY_PROMO_VIDEO",c);window.dispatchEvent(e)}catch(l){console.log("Error while creating event for analytics on play video"+l)}$(a).find("iframe").attr("src",b);$("body").addClass("overflow-hidden");$(a).removeClass("hidden");tabKeyFunctionality(a)};a.WdCloseModal=function(a){$(a).addClass("hidden");$("body").removeClass("overflow-hidden");
$(a).find("iframe").attr("src","")}}]);function storeOpenVideoModal(a){a=$(a);var c=a.attr("data-target");$(c).find("iframe").attr("src",a.attr("data-videosrc"));$("body").addClass("overflow-hidden");$(c).removeClass("hidden");var b={};b.modalId=c;b.videoURL=$(c).find("iframe").attr("src",a.attr("data-videosrc"));try{var d=window.aa.createEvent("VIDEO",b);window.dispatchEvent(d)}catch(e){console.log("Error while triggering analytics VIDEO event")}}
function storeCloseVideoModal(a){a=$(a);a.closest(".wd-modal").addClass("hidden");a.closest(".wd-modal").find("iframe").attr("src","");$("body").removeClass("overflow-hidden")}$.loadScript=function(a,c){jQuery.ajax({url:a,dataType:"script",success:c,async:!0})};
"undefined"==typeof google&&$(".component-location").length&&$.loadScript("https://maps.googleapis.com/maps/api/js?key\x3dAIzaSyCsgfVmu6ziDGL037gXVAU-vUX4X4oIfe0\x26sensor\x3dfalse\x26extension\x3d.js",function(){google.maps.event.addDomListener(window,"load",function(){var e,l=document.getElementById("locationSelect"),f=$("#wdRegion").find(".cityLatLong");null!=l&&0<l.length&&0<=l.selectedIndex?e=l.options[l.selectedIndex].getAttribute("data-latLong").split(","):null!=f&&0<f.length&&(e=f[0].getAttribute("data-latLong").split(","));
d.lat=parseFloat(e[0]);d.lng=parseFloat(e[1]);b={center:new google.maps.LatLng(d),zoom:15,disableDefaultUI:!0,zoomControl:!0,panControl:!1,draggable:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"all",stylers:[{saturation:0},{hue:"#e7ecf0"}]},{featureType:"road",stylers:[{saturation:-70}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{saturation:-60}]}]};$(".component-location").length&&
(e=document.getElementById("wd_map"),a=new google.maps.Map(e,b),c=new google.maps.Marker({position:d,map:a,title:"WD GLOBAL HEADQUARTERS"}))});var a,c,b,d={lat:33.6732066,lng:-117.841192};$(".component-location").length&&($(".contact-info").hide(),$("#contactInfo_0").show(),$(".component-location").find("select").change(function(){var b=$(this).find(":selected").attr("data-latLong").split(",")[0],d=$(this).find(":selected").attr("data-latLong").split(",")[1],f=new google.maps.LatLng(b,d);a&&c&&(a.panTo(f),
c.setPosition(new google.maps.LatLng(b,d)),c.setTitle(this.value));$(".contact-info").hide();$("#contactInfo_"+$(this).find(":selected").attr("data-index")).show()}),$(".cityLatLong").click(function(){var b=$(this).attr("data-latLong").split(",")[0],d=$(this).attr("data-latLong").split(",")[1],f=new google.maps.LatLng(b,d);a&&c&&(a.panTo(f),c.setPosition(new google.maps.LatLng(b,d)),c.setTitle(this.value))}),$(".component-location").find("select").trigger("change"))});
0<$("#contactUs-stickyBar").length&&window.addEventListener("load",function(){function a(){$(window).scrollTop()>c?$("#contactUs-stickyBar").closest("section").addClass("stickBar"):$("#contactUs-stickyBar").closest("section").removeClass("stickBar")}var c=$("#contactUs-stickyBar").offset().top;$(function(){$(window).scroll(a);a()})});var contentListingApp=angular.module("ContentListingApp",["ngSanitize","CommonUtilApp"]);
contentListingApp.directive("contentlistDir",function(){return function(a,c,b){a.init(b.jsonString)}});
contentListingApp.controller("ContentListingController",["$scope","$filter","$sce","CommonUtilService",function(a,c,b,d){function e(a){return a.replace(/\\u[\dA-F]{4}/gi,function(a){return String.fromCharCode(parseInt(a.replace(/\\u/g,""),16))})}a.onLoad=!0;a.isFiltersExists=!1;a.contentListJson=[];a.SearchText={};a.showListDropDown=!1;a.$watch("contentListingLoaded",function(){a.enableFilters&&(a.isFiltersExists=!0,a.filterTagMapping=JSON.parse(a.filterTagMappingString))});a.init=function(b){a.contentListJson=
JSON.parse(b)};a.updateFilter=function(b){a.selectedFilterTag=b.filterTag;a.onLoad=!1};a.checkContent=function(b){return a.onLoad||"all"==a.selectedFilterTag||"undefined"!=typeof b.tags&&-1<b.tags.indexOf(a.selectedFilterTag)?!0:!1};a.getIframeSrc=function(a){var b=d.isPublishInstance()?"":"?wcmmode\x3ddisabled";return a+b};a.search=function(b){return void 0==a.SearchText.text||-1!=b.title.toLowerCase().indexOf(a.SearchText.text.toLowerCase())||-1!=b.description.toLowerCase().indexOf(a.SearchText.text.toLowerCase())||
0<b.keywords.length&&-1!=b.keywords.indexOf(a.SearchText.text)?!0:!1};a.unescape=function(b){return a.getUnEscapedHTMLContent(e(b).replace(/\\/g,""))};a.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return b.trustAsHtml(a)};a.addSrcToIframe=function(a,b){$("div#videoDetail-"+b+" iframe").attr("src");$("div#videoDetail-"+b+" iframe").attr("src",a)};a.showListDropDownView=function(){a.showListDropDown=!a.showListDropDown};a.rewritePageURL=function(a){return 0<
a.trim().length?d.rewritePageURL(a):a};a.rewritePageURLWithHTML=function(a){return 0<a.trim().length?d.rewritePageURLWithHTML(a):a};a.isPathProtected=function(a){return d.isPathProtected(a)};a.getImgRenditionPath=function(a){return a.imagePath+(a.isInternalImage?".thumb.3000.3000.png":"")};$(window).on("load",function(){if($(".content-subnav-list").length){if($(".active.mss-lang").length)var a=$(".active.mss-lang").offset().top;else $(".content-listing .navbar-nav").length&&(a=$(".content-listing .navbar-nav").offset().top);
$(".content-subnav-list").each(function(){var b,c=$(this),d=$(".ie-leftnav-fixed").offset().top;c.outerHeight();var e=c.closest(".navbar"),h=c.find("a"),q=h.map(function(){if(0==$(this).attr("href").indexOf("#")){var a=c.closest("section.section").find($(this).attr("href"));if(a.length)return a}});h.click(function(a){var b=75;992>$(window).width()&&(b=150);if(0==$(this).attr("href").indexOf("#")){var d=$(this).attr("href");b="#"===d?0:c.closest("section.section").find(d).offset().top-b;$("html, body").stop().animate({scrollTop:b},
300);a.preventDefault()}});$(window).scroll(function(){var f=$(window).scrollTop(),g=q.map(function(){if($(this).offset().top-f<c.offset().top-f)return this});g=(g=g[g.length-1])&&g.length?g[0].id:"";"undefined"!=typeof g&&b!==g&&(b=g,h.removeClass("font-medium"),c.find("[href\x3d'#"+g+"']").addClass("font-medium"));isIE=!!document.documentMode;isEdge=!isIE&&!!window.StyleMedia;if(1==isIE||1==isEdge)$(window).scrollTop()+50>a?(e.hasClass("ie-sticky-left-nav")||e.addClass("ie-sticky-left-nav"),$(window).scrollTop()<
d&&e.removeClass("ie-sticky-left-nav")):c.closest(".navbar").removeClass("ie-sticky-left-nav")})})}$(".store-content-subnav-list").length&&$(".store-content-subnav-list").each(function(){var b,c=$(this),d=$(".ie-leftnav-fixed").offset().top;c.outerHeight();var e=c.closest(".navbar"),h=c.find("a"),q=h.map(function(){if(0==$(this).attr("href").indexOf("#")){var a=c.closest("section.section").find($(this).attr("href"));if(a.length)return a}});$(window).scroll(function(){var f=$(window).scrollTop(),g=
q.map(function(){if($(this).offset().top-f<c.offset().top-f)return this});g=(g=g[g.length-1])&&g.length?g[0].id:"";"undefined"!=typeof g&&b!==g&&(b=g,h.removeClass("font-medium"),c.find("[href\x3d'#"+g+"']").addClass("font-medium"));isIE=!!document.documentMode;isEdge=!isIE&&!!window.StyleMedia;if(1==isIE||1==isEdge)$(window).scrollTop()+50>a?(e.hasClass("ie-sticky-left-nav")||e.addClass("ie-sticky-left-nav"),$(window).scrollTop()<d&&e.removeClass("ie-sticky-left-nav")):c.closest(".navbar").removeClass("ie-sticky-left-nav")})})});
a.subnavDropdownActive=!1;a.subnavelinkDropdown=function(b){a.subnavDropdownActive?(a.subnavDropdownActive=!a.subnavDropdownActive,$(".listSabNavView li a").parent("li").removeClass("flex").addClass("bg-gray-1"),$(b.currentTarget).parent("li").addClass("flex bg-white").removeClass("bg-gray-1"),$(".listSabNavView li .simple-svg-wrapper").addClass("hidden").removeClass("rotate-180"),$(b.currentTarget).parent("li").find(".simple-svg-wrapper").removeClass("hidden")):(a.subnavDropdownActive=!a.subnavDropdownActive,
$(".listSabNavView li").addClass("flex bg-gray-1"),$(".listSabNavView li .simple-svg-wrapper").addClass("hidden").removeClass("rotate-180"),$(b.currentTarget).parent("li").find(".simple-svg-wrapper").removeClass("hidden").addClass("rotate-180"),$(b.currentTarget).parent("li").removeClass("bg-gray-1").addClass("bg-white"))};a.accordionViewBtn=function(a){$(a.currentTarget).parents(".accordion-contain").siblings().find(".accordion-box").addClass("hidden");$(a.currentTarget).parents(".accordion-contain").siblings().removeClass("active");
$(a.currentTarget).parents(".accordion-contain").toggleClass("active");$(a.currentTarget).parents(".accordion-contain").find(".accordion-box").toggleClass("hidden");if($(a.currentTarget).parents(".accordion-contain").find(".accordion-box").hasClass("hidden"))$(a.currentTarget).parents(".accordion-contain").css("height","auto");else{var b=$(a.currentTarget).parent("div").outerHeight(),c=$(a.currentTarget).parents(".accordion-contain").find(".accordion-box").outerHeight();$(a.currentTarget).parents(".accordion-contain").siblings().css("height",
"auto");$(a.currentTarget).parents(".accordion-contain").height(b+c);992>$(window).width()&&$("html, body").animate({scrollTop:$(event.target).offset().top-$("header").height()-75},500)}};a.getEllipsis=function(a,b){return a&&a.toString().length>b?a.toString().substring(0,b)+"...":a.toString()}}]);$(document).on("click",".closeVideo",function(){$(this).closest(".wd-modal").modal("hide");$(this).closest(".wd-modal-content").find("iframe").attr("src","")});
var idtcPageListingApp=angular.module("IDTCPageListingApp",["CommonUtilApp","UserApp","ngSanitize"]);idtcPageListingApp.filter("unique",function(){return function(a,c){var b=[],d=[];angular.forEach(a,function(a){var e=a[c];-1===d.indexOf(e)&&(d.push(e),b.push(a))});return b}});
idtcPageListingApp.controller("IDTCPageListingController",["$q","$scope","$filter","CommonUtilService","UserService","USER_CONSTANTS",function(a,c,b,d,e,l){function f(a){commonLoggerObj("constructObject - IDTC Page Listing");var b=[];angular.forEach(v,function(c,d){d.startsWith(a)&&(c.tags&&0<c.tags.length&&(c.tags=c.tags.map(function(a){return JSON.parse('{"id":"'+a+'","label":"'+A[a]+'"}')})),c.path=d,b.push(c))});0<b.length?k(b,!1):commonLoggerObj("Object is null")}function k(a,e){commonLoggerObj("populateConentData - IDTC Page Listing");
c.facetMap=JSON.parse('{"date":[],"category":[],"track":[],"country":[],"presenter":[]}');var f=null!=u.favorite?u.favorite.split(","):"";a.forEach(function(a,b){a.tags&&0<a.tags.length&&(c.facetMap.track=c.facetMap.track.concat(a.tags.filter(function(a){return-1==a.id.indexOf("idtc:type")})));if(a.authors&&angular.isArray(a.authors)&&0<a.authors.length)a.authors.forEach(function(a){c.facetMap.presenter=c.facetMap.presenter.concat(JSON.parse('{"label":"'+a.attAuthorName+'","id":"'+a.attAuthorId+'"}'))});
else if(a.authors){b=a.authors.attAuthorId;var e=a.authors.attAuthorName;a.authors=[a.authors];c.facetMap.presenter=c.facetMap.presenter.concat(JSON.parse('{"label":"'+e+'","id":"'+b+'"}'))}a.sessionEndDate&&a.sessionStartDate?(b=(new Date(a.sessionStartDate)).setMinutes((new Date(a.sessionStartDate)).getMinutes()-y),e=(new Date(a.sessionEndDate)).setMinutes((new Date(a.sessionStartDate)).getMinutes()+y),a.session=q(b,e)):"posters"==c.activeTab&&(a.session=1);-1!=f.indexOf(a.path)?a.favorite=!0:a.favorite=
!1;a.sessionStartDate&&("breakout-sessions"==c.activeTab||c.isInnovationBazaar)&&(b=d.getConvertedDate(new Date(a.sessionStartDate)),a.startTime=b.toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit"})+" "+d.getTimeZone(),a.startDate=b.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),c.facetMap.date=c.facetMap.date.concat(JSON.parse('{"label":"'+a.startDate+'","id":"'+a.startDate+'","date":"'+a.sessionStartDate+'"}')));a.restricted&&(c.facetMap.category=c.facetMap.category.concat(JSON.parse('{"label":"'+
t+'","id":"jv"}')));a.country&&(c.facetMap.country=c.facetMap.country.concat(JSON.parse('{"label":"'+a.country+'","id":"'+a.country+'"}')))});c.facetMap.country.sort(g);c.facetMap.track.sort(g);c.facetMap.presenter.sort(g);c.facetMap.date.sort(n);"breakout-sessions"==c.activeTab||c.isInnovationBazaar||c.isApacHackathon?a.sort(w):a.sort(r);c.contentDetails=a;c.uniquePresenter||(c.uniquePresenter=b("unique")(c.facetMap.presenter,"id"),c.uniqueTrack=b("unique")(c.facetMap.track,"id"),c.uniqueCategory=
b("unique")(c.facetMap.category,"id"),c.uniqueDate=b("unique")(c.facetMap.date,"id"));e||(c.fullResponse=a,c.searchData=a,c.isInnovationBazaar||c.isApacHackathon?c.changeTab("posters"):c.changeTab("breakout-sessions"));h(c.contentDetails.length)}function p(){c.selection=[];angular.forEach(c.facetMap,function(a,b){angular.forEach(a,function(a){a.selected=!1})});c.showClearAll=!1}function m(a){if(c.isInnovationBazaar||c.isApacHackathon)return a;if("posters"==c.activeTab)var b="idtc:type/posters";else"breakout-sessions"==
c.activeTab&&(b="idtc:type/breakout-sessions");return a.filter(function(a){if(a.restricted&&-1!=b.indexOf("jv")||a.tags&&a.tags.some(function(a){return-1!=b.indexOf(a.id)})||a.authors&&a.authors.some(function(a){return-1!=b.indexOf(a.attAuthorId)}))return a;if(a.sessionStartDate)return-1!=b.indexOf(a.startDate)})}function h(a){commonLoggerObj("pagination - IDTC Page Listing");c.start=0;c.row=c.countLimit;c.numOfResult=a;c.numOfPages=Math.floor((c.numOfResult-1)/c.countLimit)+1;c.countSelector=""+
(Math.floor(c.start/c.countLimit)+1)}function q(a,b){var c=(new Date).getTime();if(a>c)return 1;if(a<=c&&b>=c)return 0;if(b<c)return-1}function n(a,b){a=new Date(a.date);b=new Date(b.date);var c=0;a>b?c=1:a<b&&(c=-1);return c}function g(a,b){a=a.label.trim().toLowerCase();b=b.label.trim().toLowerCase();var c=0;a>b?c=1:a<b&&(c=-1);return c}function r(a,b){a=a.title.trim().toLowerCase();b=b.title.trim().toLowerCase();var c=0;a>b?c=1:a<b&&(c=-1);return c}function w(a,b){var c=a.session,d=b.session;0>
c&&(c=2);0>d&&(d=2);if(c>d)return 1;if(c<d)return-1;a=(new Date(a.sessionStartDate)).getTime();b=(new Date(b.sessionStartDate)).getTime();if(c!=d||0!=c&&1!=c){if(a<b)return 1;if(a>b)return-1}else{if(a>b)return 1;if(a<b)return-1}}var u=e.getSessionVariable(l.USER_INFO),v=e.getSessionVariable(l.BREAKOUT_POSTER_CARDS),A=e.getSessionVariable(l.TAGS),y,t;c.contentDetails;c.searchData;c.fullResponse;c.selection=[];c.isInnovationBazaar="ib"==d.getSiteName()?!0:!1;c.isApacHackathon="apac-hackathon"==d.getSiteName()?
!0:!1;c.init=function(b,d,g,n){t=n;y=g;commonLoggerObj("Init - IDTC Page Listing");c.countLimit=d?d:9;null==A||null==v||null==u?(commonLoggerObj("sessionBreakoutPosterCards or sessionTag or sessionUserDetails is null"),a.all([e.getTags(),e.getBreakoutAndPosterCards(),e.getUserDetails()]).then(function(){v=e.getSessionVariable(l.BREAKOUT_POSTER_CARDS);A=e.getSessionVariable(l.TAGS);u=e.getSessionVariable(l.USER_INFO);commonLoggerObj("sessionBreakoutPosterCards \x26 sessionTag data retrived");f(b)},
function(a){commonLoggerObj(a)},function(a){commonLoggerObj(a)})):(commonLoggerObj("sessionBreakoutPosterCards \x26 sessionTag \x26 sessionUserDetails data retrived"),f(b))};c.onChangesearch=function(){2<c.searchText.length?c.search():0==c.searchText.length&&(c.searchTerm=c.searchText,p(),k(m(c.fullResponse),!0),c.searchData=c.contentDetails)};c.search=function(){commonLoggerObj("search - IDTC Page Listing");c.searchTerm=c.searchText;p();var a=m(c.fullResponse);c.contentDetails=a.filter(function(a){if(a.title.toLowerCase().contains(c.searchTerm.toLowerCase())||
a.description.toLowerCase().contains(c.searchTerm.toLowerCase()))return a;if(a.authors){var b=a.authors.some(function(a){if(a.attAuthorName)return a.attAuthorName.toLowerCase().contains(c.searchTerm.toLowerCase())});if(b)return a;var d=c.uniqueTrack.filter(function(a){if(a.label.toLowerCase().contains(c.searchTerm.toLowerCase()))return a}).flatMap(function(a){return a.id});if(b=a.tags.some(function(a){return-1!=d.indexOf(a.id)}))return a}});c.searchData=c.contentDetails;k(c.contentDetails,!0)};c.changeTab=
function(a){commonLoggerObj("changeTab - IDTC Page Listing");c.activeTab=a;c.searchTerm="";c.searchText="";p();k(m(c.fullResponse),!0);c.searchData=c.contentDetails};c.filterFacet=function(a){commonLoggerObj("filterFacet - IDTC Page Listing");var b=[],d=[],e=[],g=[],f=[];angular.forEach(c.facetMap,function(a,c){angular.forEach(a,function(a){a.selected&&("date"===c?b.push(a.id):"category"===c?d.push(a.id):"track"===c?e.push(a.id):"presenter"===c?g.push(a.id):"country"===c&&f.push(a.id))})});commonLoggerObj("Facet Selected:");
commonLoggerObj("Selected Date: "+b);commonLoggerObj("Selected Category: "+d);commonLoggerObj("Selected Track: "+e);commonLoggerObj("Selected Presenter: "+g);commonLoggerObj("Selected Country: "+f);0<b.length||0<d.length||0<e.length||0<g.length||0<f.length?(c.showClearAll=!0,c.contentDetails=c.searchData.filter(function(a){if((0==d.length||a.restricted&&-1!=d.indexOf("jv"))&&(0==e.length||0<e.length&&a.tags.some(function(a){return-1!=e.indexOf(a.id)}))&&(0==g.length||0<g.length&&a.authors.some(function(a){return-1!=
g.indexOf(a.attAuthorId)}))&&(0==b.length||0<b.length&&-1!=b.indexOf(a.startDate))&&(0==f.length||0<f.length&&-1!=f.indexOf(a.country)))return a})):(c.showClearAll=!1,c.contentDetails=c.searchData);h(c.contentDetails.length)};c.clearAll=function(){commonLoggerObj("clearall - IDTC Page Listing");c.changeTab(c.activeTab)};c.showLessMore=function(a){a=angular.element(a.target);a.hasClass("less")?(a.addClass("hidden"),a.prev().removeClass("hidden")):(a.addClass("hidden"),a.next().removeClass("hidden"));
a.siblings("div.toggleable").toggleClass("hidden")};c.updateFavorites=function(a,b,d){commonLoggerObj("updateFavorites - IDTC Page Listing");-1!=(u.favorite?u.favorite.split(","):"").indexOf(a)||d?d&&(c.updateFavoriteMsg={},e.updateFavorites(a,l.REMOVE_FAVORITE).then(function(){c.contentDetails[b].favorite=!1;c.updateFavoriteMsg.title=v[a].title;c.updateFavoriteMsg.action="remove";$("#favoriteModal").removeClass("hidden");commonLoggerObj("Favorite removed: "+a)})):(c.updateFavoriteMsg={},e.updateFavorites(a,
l.ADD_FAVORITE).then(function(){c.contentDetails[b].favorite=!0;c.updateFavoriteMsg.title=v[a].title;c.updateFavoriteMsg.action="add";$("#favoriteModal").removeClass("hidden");commonLoggerObj("Favorite added: "+a)}))};c.goOnPage=function(){c.start=(Number.parseInt(c.countSelector)-1)*Number.parseInt(c.countLimit);c.row=Number.parseInt(c.countSelector)*Number.parseInt(c.countLimit)};c.nextClick=function(){c.start=Number.parseInt(c.start)+Number.parseInt(c.countLimit);c.row=Number.parseInt(c.row)+Number.parseInt(c.countLimit);
c.countSelector=""+(Math.floor(c.start/c.countLimit)+1)};c.prevClick=function(){c.start=Number.parseInt(c.start)-Number.parseInt(c.countLimit);c.row=Number.parseInt(c.row)-Number.parseInt(c.countLimit);c.countSelector=""+(Math.floor(c.start/c.countLimit)+1)};c.getEllipsis=function(a,b){return a&&a.toString().length>b?a.toString().substring(0,b)+" ...":a?a.toString():a};c.rewritePageURL=function(a){return 0<a.trim().length?d.rewritePageURL(a):a}}]);
function commonLoggerObj(a){-1<window.location.search.indexOf("debugIDTCPageListing\x3dtrue")&&console.log("IDTCPL: "+a+"-\x3e")}var inventorPageListingApp=angular.module("InventorPageListingApp",["CommonUtilApp","UserApp"]);
inventorPageListingApp.controller("InventorPageListingController",["$http","$scope","CommonUtilService","UserService","USER_CONSTANTS",function(a,c,b,d,e){function l(a){commonLoggerObj("pagination - Inventor Page Listing");c.start=0;c.row=c.countLimit;c.numOfResult=a;c.numOfPages=Math.floor((c.numOfResult-1)/c.countLimit)+1;c.countSelector=""+(Math.floor(c.start/c.countLimit)+1)}function f(a,b){a=a.label.trim().toLowerCase();b=b.label.trim().toLowerCase();var c=0;a>b?c=1:a<b&&(c=-1);return c}c.filteredInventorList=
d.getSessionVariable(e.INVESTOR);c.init=function(b,f,m,h){c.countLimit=f?f:9;c.filteredInventorList?c.constructObj(m,h):a.get(b+".exceltojson.json").then(function(a){d.setSessionVariable(e.INVESTOR,a.data[0].data);c.filteredInventorList=a.data[0].data;c.constructObj(m,h)},function(a){commonLoggerObj("Error:");commonLoggerObj(a)})};c.constructObj=function(a,b){a?c.filteredInventorList=c.filteredInventorList.filter(function(b){return b["EMPLOYEE DEPARTMENT NAME"]&&b["EMPLOYEE DEPARTMENT NAME"]===a}):
b&&(c.filteredInventorList=c.filteredInventorList.filter(function(a){return a.Title&&a.Title===b}));c.fullInventorList=c.filteredInventorList;c.searchInventorList=c.filteredInventorList;l(c.filteredInventorList.length);c.constructFilter()};c.constructFilter=function(){var a=[],b=[];c.filteredInventorList.forEach(function(c){0==a.length&&c.Title?a.push(JSON.parse('{"label":"'+c.Title+'","selected":false}')):0<a.length&&c.Title&&!a.some(function(a){return a.label===c.Title})&&a.push(JSON.parse('{"label":"'+
c.Title+'","selected":false}'));0==b.length&&c.COUNTRY?b.push(JSON.parse('{"label":"'+c.COUNTRY+'","selected":false}')):0<b.length&&c.COUNTRY&&!b.some(function(a){return a.label===c.COUNTRY})&&b.push(JSON.parse('{"label":"'+c.COUNTRY+'","selected":false}'))});var d=JSON.parse('{"event":[],"country":[]}');d.event=a.sort(f);d.country=b.sort(f);c.filterMap=d};c.onChangesearch=function(){2<c.searchText.length?c.search():0==c.searchText.length&&(c.filteredInventorList=c.fullInventorList,c.searchInventorList=
c.fullInventorList,c.search())};c.search=function(){angular.forEach(c.filterMap,function(a,b){angular.forEach(a,function(a){a.selected=!1})});c.filteredInventorList=c.searchText?c.fullInventorList.filter(function(a){return a["Inventor Name"]&&a["Inventor Name"].toLowerCase().contains(c.searchText.toLowerCase())||a["EMPLOYEE DEPARTMENT NAME"]&&a["EMPLOYEE DEPARTMENT NAME"].toLowerCase().contains(c.searchText.toLowerCase())}):c.fullInventorList;c.searchInventorList=c.filteredInventorList;c.constructFilter();
l(c.filteredInventorList.length)};c.resetAll=function(){c.search()};c.filterFacet=function(){commonLoggerObj("filterFacet - Inventor Page Listing");var a=[],b=[];angular.forEach(c.filterMap,function(c,d){angular.forEach(c,function(c){c.selected&&("event"===d?a.push(c.label):"country"===d&&b.push(c.label))})});c.filteredInventorList=0<a.length||0<b.length?c.searchInventorList.filter(function(c){if((0==a.length||c.Title&&-1<a.indexOf(c.Title))&&(0==b.length||0<b.length&&c.COUNTRY&&-1<b.indexOf(c.COUNTRY)))return c}):
c.searchInventorList;l(c.filteredInventorList.length)};c.goOnPage=function(){c.start=(Number.parseInt(c.countSelector)-1)*Number.parseInt(c.countLimit);c.row=Number.parseInt(c.countSelector)*Number.parseInt(c.countLimit)};c.nextClick=function(){c.start=Number.parseInt(c.start)+Number.parseInt(c.countLimit);c.row=Number.parseInt(c.row)+Number.parseInt(c.countLimit);c.countSelector=""+(Math.floor(c.start/c.countLimit)+1)};c.prevClick=function(){c.start=Number.parseInt(c.start)-Number.parseInt(c.countLimit);
c.row=Number.parseInt(c.row)-Number.parseInt(c.countLimit);c.countSelector=""+(Math.floor(c.start/c.countLimit)+1)}}]);function commonLoggerObj(a){-1<window.location.search.indexOf("debugInventorPageListing\x3dtrue")&&console.log("Inventor Listing Comp: "+a+"-\x3e")}var wdProductBannerApp=angular.module("WDProductBannerApp",["CommonUtilApp"]);
wdProductBannerApp.controller("WDProductBannerController",["$scope","$sce","CommonUtilService",function(a,c,b){a.productAssetGallery=function(){$(".productAssetGallery").removeClass("hidden");var a=$(".wd-product-image");$("body").addClass("overflow-hidden md:overflow-visible");wdActivateSlick(a)};a.closeGalleryPopup=function(){$(".productAssetGallery").addClass("hidden");$("body").removeClass("overflow-hidden md:overflow-visible")}}]);
function wdpb_commonLogger(a){-1<window.location.search.indexOf("debug\x3dtrue")&&console.log("WDPB: "+a)}
function wdActivateSlick(a){try{a.find(".product-slider-single").hasClass("slick-initialized")&&a.find(".product-slider-single").slick("unslick"),a.find(".product-slider-nav").hasClass("slick-initialized")&&a.find(".product-slider-nav").slick("unslick"),a.find(".product-slider-single").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,adaptiveHeight:!0,infinite:!1,useTransform:!0,speed:400,cssEase:"cubic-bezier(0.77, 0, 0.18, 1)",responsive:[{breakpoint:992,settings:{arrows:!0,dots:!0}}]}),
a.find(".product-slider-nav").on("init",function(a,b){$(this).find(".slick-slide.slick-current").addClass("is-active")}).slick({slidesPerRow:2,rows:2,focusOnSelect:!1,infinite:!1,dots:!0}),a.find("div[data-wdslide]").on("click",function(c){c.preventDefault();c=$(this).data("wdslide");a.find(".slickThumbnail").removeClass("border-gray-2").addClass("border-white");a.find(this).parent(".slickThumbnail").addClass("border-gray-2").removeClass("border-white");a.find(".product-slider-single").slick("slickGoTo",
c)})}catch(c){console.log(c)}}var afterChange=function(a,c){c=$(a.$slides[c]).height();$(a.$slider).height(c)},storeProductBannerApp=angular.module("StoreProductBannerApp",["CommerceApp","StoreProductCartApp","CommonUtilApp","ngSanitize"]);storeProductBannerApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
storeProductBannerApp.directive("moreless",["$timeout","$window",function(a,c){var b={height:250};return{restrict:"EA",transclude:!0,scope:{},template:'\x3cdiv class\x3d"accordianText-showless"\x3e\x3cdiv ng-transclude class\x3d"accordianText-content" ng-style\x3d"style"\x3e\x3c/div\x3e\x3csection class\x3d"accordianText-trigger relative w-full border-b border-grey flex items-center justify-center" ng-if\x3d"showSection"\x3e  \x3ci class\x3d"accordianText-down-arrow"\x3e\x3c/i\x3e  \x3cbutton  ng-click\x3d"toggleMore()" aria-expanded\x3d"false" class\x3d"toggleMoreLess absolute -pin-t-10 text-center cursor-pointer -mt-3"\x3e\x3cimg alt\x3d""  class\x3d"cursor-pointer w-12 h-12 z-1 relative" ng-src\x3d{{more?"https://www.westerndigital.com/content/dam/store/en-us/portal-assets/icons/moreAccView.svg":"https://www.westerndigital.com/content/dam/store/en-us/portal-assets/icons/lessAccView.svg"}}\x3e\x3ci class\x3d"absolute w-8 h-4 bg-white -ml-10 z-0 mt-4"\x3e\x3c/i\x3e\x3c/button\x3e  \x3c/section\x3e\x3c/div\x3e',link:function(c,
e,l){function d(){m=e.find(".accordianText-content").height();c.style={height:m};m>h.height&&(c.toggleSection(!0),c.style.height=h.height,c.toggleMore())}function k(){var a=c.more,b=a?m:h.height;$(".toggleMoreLess").attr("aria-expanded",a);c.style.height=b;c.more=!c.more}function p(a){c.showSection=a}var m,h=angular.extend({},angular.copy(b),c.$eval(l.options));(function(){if(e&&0<e.find("div.active").length){var b=0;e.find("div.active").children().each(function(a){4>a&&(b+=this.offsetHeight)});b&&
0<b&&(h.height=b)}c.toggleMore=k;c.toggleSection=p;c.toggleSection(!1);a(d)})()}}}]);storeProductBannerApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);storeProductBannerApp.directive("contentlistDir",function(){return function(a,c,b){a.init(b.jsonString,b.id)}});storeProductBannerApp.directive("custompromotionDir",function(){return function(a,c,b){a.initCustomPromotion(b.customPromotionsJsonString)}});
storeProductBannerApp.directive("b2bjsonDir",function(){return function(a,c,b){a.initB2BJson(b.b2bJsonString)}});storeProductBannerApp.directive("b2cjsonDir",function(){return function(a,c,b){a.initB2CJson(b.b2cJsonString)}});storeProductBannerApp.directive("digitalattributesDir",function(){return function(a,c,b){a.initDigitalDataAttributes(b.jsonString,b.id)}});
storeProductBannerApp.directive("productimagesDir",function(){return function(a,c,b){a.initProductAssets(b.productimagesjsonString,b.featuredassetsjsonString,b.videosjsonString)}});storeProductBannerApp.directive("productattributesDir",function(){return function(a,c,b){a.updateProductAttributeValues(b.sku,b.productattributes)}});
storeProductBannerApp.directive("onlyDigits",function(){return{require:"ngModel",link:function(a,c,b,d){d.$parsers.push(function(a){var b=a.toLowerCase().replace(/[^0-9]/g,"");b!=a&&(d.$setViewValue(b),d.$render());return parseInt(b,10)})}}});storeProductBannerApp.service("StoreProductQuantityResetService",["$q",function(a){this.resetQuantity=function(){angular.element(document.getElementById("productQuantity")).scope().resetProductQuantity()}}]);
storeProductBannerApp.filter("filteredSkuList",function(){return function(a){if(void 0!=a){var c={};angular.forEach(a,function(a,d){0!==d.indexOf("sku")&&0!==d.indexOf("ean")&&(c[d]=a)});return c}}});
storeProductBannerApp.controller("StoreProductBannerController",["$scope","$sce","$http","$location","$timeout","$filter","CommerceService","COMMERCE_CONSTANTS","StoreProductCartService","CommonUtilService","safeApply",function(a,c,b,d,e,l,f,k,p,m,h){function q(b,c){spb_commonLogger("findSku :: paramCategoriesSelected :",b);spb_commonLogger("findSku :: primaryCategory :",c);var d=[];a.skuVariantCategoryMapping.filter(function(a,b){-1<a.categories.indexOf(c)&&(a.count=0,d.push(a))});1<d.length&&(d.forEach(function(a,
c){a=a.categories.filter(function(a){return-1<b.indexOf(a)});d[c].count=a.length}),d.sort(function(a,b){return b.count-a.count}));spb_commonLogger("findSku :: mappings :",d);return d[0].sku}function n(){a.techSpecList=[];for(var b=a.productList.productList.filter(function(b){return b.variantId===a.currentSku})[0],c={},d=0;d<b.prodTags.length;d++){var e=b.prodTags[d].tagID.split("/")[0];c[e]=b.prodTags[d].tagTitle}for(var g in a.productAttributesJson)b.techSpecs.hasOwnProperty(g)&&(d={},d.name=g,d.title=
b.techSpecs[g].title,d.value=void 0!=b.techSpecs[g].value?b.techSpecs[g].value:c[g],a.techSpecList.push(d));h(a)}function g(){a.currentSkuDigitalAttributesArray=[];for(var b in a.digitalAttributesObject)if(a.digitalAttributesObject.hasOwnProperty(b)){var c={};c.skuSpecificAttributes=a.digitalAttributesObject[b][a.currentSku];c.path=b;a.currentSkuDigitalAttributesArray.push(c)}h(a)}function r(){a.currentSkuProuctResourceArray=[];a.productResourceJson&&a.productResourceJson.hasOwnProperty(a.currentSku)&&
a.productResourceJson[a.currentSku].forEach(function(b){a.currentSkuProuctResourceArray.push(b)});h(a)}function w(){a.currentSkuCategoryOptions=[];if(0<a.productList.productList.length){for(var b=a.productList.productList.filter(function(b){return b.variantId===a.currentSku})[0],c={},d=0;d<b.prodTags.length;d++){var e=b.prodTags[d].tagID.split("/")[0];spb_commonLogger("This is Tag Id -----------\x3e",e);var g=b.prodTags[d].titlePath.split(":")[1];spb_commonLogger("This is Tag Value -----------\x3e",
g);c[e]=g}b=a.skuVariantCategoryMapping.filter(function(b){return b.sku===a.currentSku})[0];for(var f in b.categories)d=b.categories[f].split("/")[0],spb_commonLogger("This is category key-------------\x3e",f),spb_commonLogger("This is category value-------------\x3e",d),e={},c.hasOwnProperty(d)&&(e.key=c[d].split("/")[0],e.value=c[d].split("/")[1],a.currentSkuCategoryOptions.push(e));h(a)}}function u(){a.currentSkuSpecificProductObject={};0<a.productList.productList.length&&(a.currentSkuSpecificProductObject=
a.productList.productList.filter(function(b){return b.variantId===a.currentSku})[0],h(a))}function v(){ActivateStoreProductBannerSlick($(".productimagedynamicload").find(".store-product-image"));e(function(){0!=$(".productimagedynamicload").find(".store-product-image .slick-initialized").length&&0!=$(".productimagedynamicload").find(".store-product-image .zoomImageBox.slick-active").width()&&1!=$(".productimagedynamicload").find(".store-product-image .zoomImageBox.slick-active").closest(".slick-list.draggable").height()||
v()},1E3)}function A(){if(!a.checkInventoryStatusAndSelectDefaultVariantFlag){spb_commonLogger("Inventory is out of stock or null for default variant : ",a.currentSku);spb_commonLogger("Filtering skus which has inventory to select updated default variant");var b=a.skuList.filter(function(a){var b=f.getSessionVariable(a);if(null!=b&&b.purchasable&&"Active"==b.productLifeCycle&&("inStock"==b.stockStatus||"lowStock"==b.stockStatus))return a});spb_commonLogger("checkInventoryStatusAndSelectDefaultVariant : Filtered Skus[inStock] :",
b);0==b.length&&(b=a.skuList.filter(function(a){var b=f.getSessionVariable(a);if(null!=b&&b.purchasable&&("Active"==b.productLifeCycle&&"backOrderStock"==b.stockStatus||"Pre"==b.productLifeCycle&&("preOrder"==b.stockStatus||"reserveNow"==b.stockStatus)))return a}),spb_commonLogger("checkInventoryStatusAndSelectDefaultVariant : Filtered Skus[backOrder,preOrder,reserveNow] :",b));a.checkInventoryStatusAndSelectDefaultVariantFlag=!0;0<b.length?(a.currentSku=b[0],a.updateVariantCategoriesView(a.currentSku,
null),a.updateViewForVariant(a.currentSku,!1)):(a.isCommerceServiceIssue=!0,$(".productimagedynamicload").length?v():ActivateStoreProductBannerSlick($("div[data-sku\x3d'"+a.currentSku+"'].store-product-image")))}}function y(){$(".store-product-wtb").removeClass("hidden")}function t(){var a=f.getSessionVariable(k.AFFIRM_ALLOWED);if("undefined"==typeof affirm&&null!=a&&a)a={public_api_key:f.getAffirmPublicApiKey(),script:f.getAffirmScriptURL()},function(a,b,c,d,e,g,f){var n=a[c]||{},h=document.createElement(g),
q=document.getElementsByTagName(g)[0],r=function(a,b,c){return function(){a[b]._.push([c,arguments])}};n[d]=r(n,d,"set");var l=n[d];n[e]={};n[e]._=[];l._=[];n[e][f]=r(n,e,f);e=0;for(f="set add save post open empty reset on off trigger ready setProduct".split(" ");e<f.length;e++)l[f[e]]=r(n,d,f[e]);e=0;for(f=["get","token","url","items"];e<f.length;e++)l[f[e]]=function(){};h.async=!0;h.src=b[g];q.parentNode.insertBefore(h,q);delete b[g];l(b);a[c]=n}(window,a,"affirm","checkout","ui","script","ready");
else if("undefined"!=typeof affirm&&"undefined"!=typeof affirm.ui)try{setTimeout(function(){affirm.ui.refresh()},1)}catch(E){spb_commonLogger("error while refreshing affirm ui")}}function C(b){try{a.inventory.prices.list=a.inventory.prices.volumePrice[b],1<a.inventory.prices.volumePrice.length&&(a.inventory.prices.sale=a.inventory.prices.volumePrice[b])}catch(E){console.log("Error while changing List Price according to volume",E)}}function F(b){a.sessionRelatedProducts=b.filter(function(b){if(null!=
a.productReferences[b.code])return b});h(a)}function z(b,c){a.sessionRelatedProducts.length==b+1&&(spb_commonLogger("product banner - initializing slick for related products "),$("#"+c).removeClass("invisible"),"rtl"==$("html").attr("dir")?$(".relatedItemWrap-v1").length?$(".relatedItemWrap-v1").each(function(){$(this).slick({infinite:!1,speed:300,slidesToShow:5,slidesToScroll:1,rtl:!0,arrows:!1,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:576,settings:{infinite:!1,
dots:!1,slidesToShow:1,slidesToScroll:1}}]})}):$("#"+c).each(function(){$(this).slick({infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,rtl:!0,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:576,settings:{infinite:!0,dots:!0,slidesToShow:2,slidesToScroll:2}}]})}):$(".relatedItemWrap-v1").length?$(".relatedItemWrap-v1").each(function(){$(this).slick({infinite:!1,speed:50,slidesToShow:5,slidesToScroll:1,arrows:!1,swipeToSlide:!0,responsive:[{breakpoint:992,settings:{slidesToShow:3,
slidesToScroll:1}},{breakpoint:576,settings:{infinite:!1,dots:!1,slidesToShow:1,slidesToScroll:1}}]})}):$("#"+c).each(function(){$(this).slick({infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:576,settings:{infinite:!1,dots:!0,slidesToShow:2,slidesToScroll:2}}]})}))}function x(b,c){$.ajax({url:c,type:"POST",data:b.serialize(),xhrFields:{withCredentials:!0}}).then(function(c,d,e){spb_commonLogger("Request Quote service response :",
c);if("success"==d){spb_commonLogger("showing success");a.requestQuoteSuccess=!0;h(a);try{c={businessUse:"",quantity:"",targetShipDate:"",comments:""};var g={};$.each($(".requestquote-form").serializeArray(),function(a,b){g[b.name]=b.value});c.businessUse=g["emailTemplate-businessUse"];c.quantity=g["emailTemplate-qty"];c.targetShipDate=g["emailTemplate-date"];c.comments=g["emailTemplate-comments"];var f=window.aa.createEvent("Request_Quote",JSON.stringify(c));window.dispatchEvent(f)}catch(P){console.log("Error while firing Analytics call for Request Quote",
P)}}else spb_commonLogger("showing form"),a.requestQuoteSuccess=!1,a.requestQuoteFailure=!0,h(a);b.trigger("reset");setTimeout(function(){tabKeyFunctionality(".requestQuote-modal")},1E3)},function(c){b.trigger("reset");a.requestQuoteSuccess=!1;a.requestQuoteFailure=!0;b.trigger("reset");spb_commonLogger("Error in Request Quote Service",c);h(a)})}function D(b){a.requestQuoteFailure=!1;var c=!0,d=a.requestModalBusinessUse;if(void 0==d.key||""==d.key)c=!1,b.find('[name\x3d"emailTemplate-businessUse"]').closest(".form-group").addClass("focused filled invalidField");
d=b.find('[name\x3d"emailTemplate-sku"]').val();if(void 0==d||""==d)c=!1,b.find('[name\x3d"emailTemplate-sku"]').closest(".form-group").addClass("focused filled invalidField");d=b.find('[name\x3d"emailTemplate-qty"]').val();if(""==d||1>parseFloat(d))c=!1,b.find('[name\x3d"emailTemplate-qty"]').closest(".form-group").addClass("focused filled invalidField");d=b.find('[name\x3d"emailTemplate-date"]').val();var e=l("date")(new Date,"dd/MM/yyyy");if(void 0==d||""==d||new Date(d)<e)c=!1,b.find('[name\x3d"emailTemplate-date"]').closest(".form-group").addClass("focused filled invalidField");
d=b.find('[name\x3d"emailTemplate-comments"]').val();if(void 0==d||""==d||""==d.trim())c=!1,b.find('[name\x3d"emailTemplate-comments"]').closest(".form-group").addClass("focused filled invalidField");h(a);return c}function K(a){return a.replace(/\\u[\dA-F]{4}/gi,function(a){return String.fromCharCode(parseInt(a.replace(/\\u/g,""),16))})}function H(){var b=f.getSessionVariable(k.USER_DETAILS);null==b?f.getUser().then(function(){b=f.getSessionVariable(k.USER_DETAILS);null==b||"undefined"==typeof b.uid?
spb_commonLogger("populateUserDetailForRequestQuote : User is not logged in."):(spb_commonLogger("populateUserDetailForRequestQuote : user logged in."),a.uuid=b.uid,a.name=b.firstName+" "+b.lastName,a.firstName=b.firstName,a.lastName=b.lastName,a.locale=m.getLocale().toLowerCase())}):(spb_commonLogger("populateUserDetailForRequestQuote : user is logged in."),a.uuid=b.uid,a.name=b.firstName+" "+b.lastName,a.firstName=b.firstName,a.lastName=b.lastName,a.locale=m.getLocale().toLowerCase())}function G(){a.productqtySkuMap[a.currentSku]=
a.product.quantity;spb_commonLogger("product quantity sku map in updateProductQuantitySkuMap method: ",a.productqtySkuMap)}function B(){if(a.inventory&&a.inventory.prices&&a.inventory.prices.volumePrice){if(1==a.inventory.prices.volumePrice.length)a.activeTieredPrice=0;else for(var b=0;b<a.inventory.prices.volumePrice.length;b++){var c=a.inventory.prices.volumePrice[b];null!=c.maxQuantity&&c.maxQuantity>=a.product.quantity&&c.minQuantity<=a.product.quantity?a.activeTieredPrice=b:null==c.maxQuantity&&
c.minQuantity<=a.product.quantity&&(a.activeTieredPrice=b)}a:{if(a.inventory&&a.inventory.prices&&a.inventory.prices.volumePrice){if(1==a.inventory.prices.volumePrice.length){b=0;break a}for(b=0;b<a.inventory.prices.volumePrice.length;b++)if(c=a.inventory.prices.volumePrice[b],null!=c.maxQuantity&&c.maxQuantity>=a.product.quantity&&c.minQuantity<=a.product.quantity||null==c.maxQuantity&&c.minQuantity<=a.product.quantity)break a}b=void 0}C(b);try{var d=window.aa.createEvent("PRICE_TIER",JSON.stringify({priceTier:"TIER"+
a.activeTieredPrice}));window.dispatchEvent(d)}catch(N){console.log("Error while firing Analytics call for Tiered Pricing",N)}}}a.isCatalogPurchasable=f.getPurchasableCatalog();a.wtbPagePath=m.rewritePageURL(f.getWTBPagePath());a.platformCommerceURL=f.getPlatformCommerceURL();a.relatedProducts={};a.sessionRelatedProducts=[];a.hashUrl=!1;a.viewUpdated=!1;a.notifyMeSuccess=!1;a.checkInventoryStatusAndSelectDefaultVariantFlag=!1;a.primaryCategoryGroup=null;a.secondaryCategoryGroup=null;a.selectedPrimaryCategory=
null;a.selectedSecondaryCategory=null;a.contentListJson={};a.ddItemSelected={};a.ddItemSelectedTitles={};a.productList={};a.userTypeSkuList=[];a.product={quantity:1};a.digitalAttributesObject={};a.productAssets={};a.featuredAssets={};a.videos={};a.currentSkuDigitalAttributesArray=[];a.currentSkuProuctResourceArray=[];a.currentSkuCategoryOptions=[];a.productInvalid=!1;a.productStockUnavailable=!1;a.techSpecList=[];a.techSpecsSkuMapping={};a.activeTieredPrice=0;a.requestQuoteDate={value:new Date,currentDate:new Date};
a.requestQuoteFailure=!1;a.productqtySkuMap={};a.currentSkuObject={};a.isCandyrackEnabled=null;a.isB2BUser=function(){return f.getCustomerChannel()==k.B2B?!0:!1};a.isFunctionalConsent=!window.aa||!window.aa.trustArcCookies||window.aa.trustArcCookies.euCookie.isPresent&&!window.aa.trustArcCookies.fnCookie.isPresent&&!window.aa.trustArcCookies.euCookie.isTrue||window.aa.trustArcCookies.euCookie.isPresent&&window.aa.trustArcCookies.euCookie.isTrue&&window.aa.trustArcCookies.fnCookie.isPresent&&window.aa.trustArcCookies.fnCookie.isTrue||
window.aa.trustArcCookies.euCookie.isPresent&&!window.aa.trustArcCookies.euCookie.isTrue&&window.aa.trustArcCookies.fnCookie.isPresent&&window.aa.trustArcCookies.fnCookie.isTrue;a.init=function(b,c){a.contentListJson[c]=JSON.parse(b);h(a)};a.initCustomPromotion=function(b){try{a.customPromotions=JSON.parse(b),spb_commonLogger("custom promotions",a.customPromotios),h(a)}catch(E){console.error("product banner : error while parsing custom promotions",E)}};a.getContentListJson=function(b){return a.contentListJson[b]};
a.initB2CJson=function(b){a.b2cProductsJson=JSON.parse(b);h(a)};a.initB2BJson=function(b){a.b2bProductsJson=JSON.parse(b)};a.initDigitalDataAttributes=function(b,c){try{b=b.replace(/\n|\r/g,""),a.digitalAttributesObject[c]=JSON.parse(b)}catch(M){console.log(M)}g();h(a)};a.initProductAssets=function(b,c,d){a.productAssets=JSON.parse(b);a.featuredAssets=JSON.parse(c);a.videos=JSON.parse(d);h(a);spb_commonLogger(a.productAssets);spb_commonLogger(a.featuredAssets);spb_commonLogger(a.videos)};a.trustAsUrl=
function(a){return c.trustAsResourceUrl(a)};a.$watch("productsLoaded",function(){if(a.productsLoaded){spb_commonLogger("in productsLoaded...");spb_commonLogger("skuVariantCategoryMapping",a.skuVariantCategoryMapping);void 0!=a.customPromotions&&void 0!=a.customPromotions[a.promotionType]&&(a.customPromotionInfo=a.customPromotions[a.promotionType][a.promotionMessageId]);a.allvariantCategories=[];a.skuVariantCategoryMapping.forEach(function(b){a.allvariantCategories=a.allvariantCategories.concat(b.categories)});
a.allvariantCategories=a.allvariantCategories.filter(function(b,c){return a.allvariantCategories.indexOf(b)==c});spb_commonLogger("allvariantCategories",a.allvariantCategories);spb_commonLogger("variantCategoryOptionsString",JSON.parse(a.variantCategoryOptionsString));a.skuProductIdsMapping=JSON.parse(a.skuProductIdsMappingString);a.skuList=a.productIds.split(",");spb_commonLogger("Sku list:",a.skuList);a.currentSku=a.defaultVariantSku;if(0<window.location.hash.trim().length){var b=window.location.hash.split("#")[1];
a.skuProductIdsMapping.hasOwnProperty(b)&&(a.hashUrl=!0,a.currentSku=b)}a.variantCategoryOptions=JSON.parse(a.variantCategoryOptionsString);0<a.variantCategoryOptions.length&&(a.primaryCategoryGroup=a.variantCategoryOptions[0].variantCategory);1<a.variantCategoryOptions.length&&(a.secondaryCategoryGroup=a.variantCategoryOptions[1].variantCategory);setTimeout(function(){a.updateVariantCategoriesView(a.currentSku,null);a.updateViewForVariant(a.currentSku,!0)},1);spb_commonLogger("isHashUrl ::",a.hashUrl);
a.productReferences=f.getSessionVariable(k.PRODUCT_REFERENCES);null==a.productReferences?(spb_commonLogger("calling get product references from product banner component. . ."),f.getProductReferences().then(function(){a.productReferences=f.getSessionVariable(k.PRODUCT_REFERENCES);a.processRelatedProducts()},function(a){spb_commonLogger("Issue in getting product references ",a)})):a.processRelatedProducts()}});a.$watch("productsLoadedNewView",function(){if(a.productsLoadedNewView){spb_commonLogger("in productsLoadedNewView...");
a.isB2BUser()?(a.productList=a.b2bProductsJson,a.skuVariantCategoryMapping=a.b2bSkuVariantCategoryMapping,a.variantCategoryOptionsString=a.b2bVariantCategoryOptionsString,a.skuProductIdsMappingString=a.b2bSkuProductIdsMappingString,a.productIds=a.b2bProductIds):(a.productList=a.b2cProductsJson,a.skuVariantCategoryMapping=a.b2cSkuVariantCategoryMapping,a.variantCategoryOptionsString=a.b2cVariantCategoryOptionsString,a.skuProductIdsMappingString=a.b2cSkuProductIdsMappingString,a.productIds=a.b2cProductIds);
H();void 0!=a.requestQuoteFormFields&&(a.requestQuoteFormField=JSON.parse(a.requestQuoteFormFields),a.requestModalBusinessUse=a.requestQuoteFormField.businessUse[0]);a.defaultVariantSku=void 0!=a.productList.productList[0]&&void 0!=a.productList.productList[0].variantId?a.productList.productList[0].variantId:"";a.allCategories=[];a.productList.productList.forEach(function(b){a.allCategories[b.sku]=a.productList.baseProductModel.categories});spb_commonLogger("skuVariantCategoryMapping",a.skuVariantCategoryMapping);
void 0!=a.customPromotions&&void 0!=a.customPromotions[a.promotionType]&&(a.customPromotionInfo=a.customPromotions[a.promotionType][a.promotionMessageId]);a.allvariantCategories=[];void 0!=a.skuVariantCategoryMapping&&a.skuVariantCategoryMapping.forEach(function(b){a.allvariantCategories=a.allvariantCategories.concat(b.categories)});a.allvariantCategories=a.allvariantCategories.filter(function(b,c){return a.allvariantCategories.indexOf(b)==c});spb_commonLogger("allvariantCategories",a.allvariantCategories);
spb_commonLogger("variantCategoryOptionsString",JSON.parse(a.variantCategoryOptionsString));a.skuProductIdsMapping=JSON.parse(a.skuProductIdsMappingString);a.skuList=a.productIds.split(",");spb_commonLogger("Sku list:",a.skuList);a.currentSku=a.defaultVariantSku;a.skuList&&0<a.skuList.length&&a.skuList.forEach(function(b){a.productqtySkuMap[b]=a.product.quantity});if(0<window.location.hash.trim().length){var b=window.location.hash.split("#")[1];a.skuProductIdsMapping.hasOwnProperty(b)&&(a.hashUrl=
!0,a.currentSku=b)}a.variantCategoryOptions=JSON.parse(a.variantCategoryOptionsString);0<a.variantCategoryOptions.length&&(a.primaryCategoryGroup=a.variantCategoryOptions[0].variantCategory);1<a.variantCategoryOptions.length&&(a.secondaryCategoryGroup=a.variantCategoryOptions[1].variantCategory);setTimeout(function(){a.updateVariantCategoriesView(a.currentSku,null);a.updateViewForVariant(a.currentSku,!0)},1);spb_commonLogger("isHashUrl ::",a.hashUrl);w();u();a.productReferences=f.getSessionVariable(k.PRODUCT_REFERENCES);
null==a.productReferences?(spb_commonLogger("calling get product references from product banner component. . ."),f.getProductReferences().then(function(){a.productReferences=f.getSessionVariable(k.PRODUCT_REFERENCES);a.processRelatedProducts()},function(a){spb_commonLogger("Issue in getting product references ",a)})):a.processRelatedProducts()}});a.updateProductAttributesJsonString=function(b){a.productAttributesJson=JSON.parse(b);n()};a.updateProductSkuJsonString=function(b,c){a.isB2BUser()?a.userTypeSkuList=
JSON.parse(b):a.userTypeSkuList=JSON.parse(c);h(a)};a.updateProductResourceJsonString=function(b){a.productResourceJson=JSON.parse(b);r()};a.updateVariantCategoriesView=function(b,c){spb_commonLogger("updateVariantCategoriesView :: sku ",b);spb_commonLogger("updateVariantCategoriesView :: selectedCategory ",c);a.prevSelectedSkuCategories=[];null!=c&&($("li[data-variant-category].active-variant-axis").each(function(){$(this).attr("data-variant-category")!=c&&a.prevSelectedSkuCategories.push($(this).attr("data-variant-category"))}),
$("option[data-variant-category].active-variant-axis").each(function(){$(this).attr("data-variant-category")!=c&&a.prevSelectedSkuCategories.push($(this).attr("data-variant-category"))}));null==b&&(a.currentSku=q(a.prevSelectedSkuCategories,c));a.activeSkuObj=a.skuVariantCategoryMapping.filter(function(b){if(b.sku==a.currentSku)return b.categories})[0];spb_commonLogger("updateVariantCategoriesView :: activeSkuObj ",a.activeSkuObj);var d=[];a.skuVariantCategoryMapping.forEach(function(a){d=d.concat(a.categories)});
d=d.filter(function(a,b){return d.indexOf(a)==b});var e=a.activeSkuObj.categories;null==c&&(c=e[0]);var g={};e.forEach(function(b){g[b]=[];for(var c in a.skuVariantCategoryMapping){var d=a.skuVariantCategoryMapping[c].categories;-1<d.indexOf(b)&&(g[b]=g[b].concat(d))}null!=a.primaryCategoryGroup&&-1<b.indexOf(a.primaryCategoryGroup)&&(a.selectedPrimaryCategory=b);null!=a.secondaryCategoryGroup&&-1<b.indexOf(a.secondaryCategoryGroup)&&(a.selectedSecondaryCategory=b)});spb_commonLogger("available :: ",
g);spb_commonLogger("selected primary category :: ",a.selectedPrimaryCategory);a.variantCategoryOptions.map(function(a){a.children.map(function(a){-1<e.indexOf(a.variantCategory)?a.viewType=1:1<e.length?e.forEach(function(b){a.variantCategory.substr(0,a.variantCategory.indexOf("/"))!=b.substr(0,b.indexOf("/"))&&(-1<g[b].indexOf(a.variantCategory)?a.viewType=0:a.viewType=-1)}):a.viewType=0})});spb_commonLogger("categories after viewtype updation :: ",a.variantCategoryOptions);a.variantCategoryOptionsNewView=
a.variantCategoryOptions;a.variantCategoryOptionsNewView.map(function(b,c){0<c?b.children.map(function(b,d){-1<e.indexOf(b.variantCategory)&&(a.ddItemSelected[c]=b.variantCategory,a.ddItemSelectedTitles[c]=b.variantCategoryLabel);-1<e.indexOf(b.variantCategory)?b.showFlag=1:1<e.length?1==c?-1<g[a.selectedPrimaryCategory].indexOf(b.variantCategory)?b.showFlag=0:b.showFlag=-1:-1<g[a.selectedPrimaryCategory].indexOf(b.variantCategory)&&-1<g[a.selectedSecondaryCategory].indexOf(b.variantCategory)?b.showFlag=
0:b.showFlag=-1:b.showFlag=0}):b.children.map(function(b,d){-1<e.indexOf(b.variantCategory)&&(a.ddItemSelected[c]=b.variantCategory,a.ddItemSelectedTitles[c]=b.variantCategoryLabel);b.showFlag=b.variantCategory==a.selectedPrimaryCategory?1:0})});spb_commonLogger("categories after viewtype updation for new view :: ",a.variantCategoryOptionsNewView)};a.handleVariantCategoryClick=function(b){a.updateVariantCategoriesView(null,b);a.updateViewForVariant(a.currentSku,!1);e(function(){$(".variant-category-select").each(function(){spb_commonLogger("updating dropdown with",
a.ddItemSelected[$(this).attr("data-variant-category-number")]);$(this).val(a.ddItemSelected[$(this).attr("data-variant-category-number")]).trigger("change")});$("ul.variant-category-container").find("li").find("a, button").attr("tabindex","-1");$("ul.variant-category-container").find("li.active").find("a, button").attr("tabindex","0");roleList();a.productsLoadedNewView&&(a.productInvalid=!1,a.product.quantity=a.productqtySkuMap[a.currentSku],w(),n(),g(),r(),a.isB2BUser()&&a.product.quantity<a.inventory.stockLevel?
a.productStockUnavailable=!1:a.isB2BUser()&&a.product.quantity>a.inventory.stockLevel&&(a.productStockUnavailable=!0),a.isB2BUser()&&B(),u())})};window.onhashchange=function(b){b=window.location.hash.split("#")[1];a.skuProductIdsMapping.hasOwnProperty(b)&&(b!=a.currentSku&&(a.currentSku=b,a.viewUpdated=!1,a.updateVariantCategoriesView(a.currentSku,null),a.updateViewForVariant(a.currentSku,!1)),h(a))};a.updateViewForVariant=function(b,c){spb_commonLogger("in updateViewForVariant");a.viewUpdated=!0;
spb_commonLogger("in updateViewForVariant:Updatinf view for sku:",b);if(a.hashUrl||!c)$("div[data-sku].active").addClass("hidden").removeClass("active"),h(a),$("div[data-sku\x3d'"+b+"']").each(function(){spb_commonLogger("in updateViewForVariant:Updating view for sku:",b);$(this).addClass("active").removeClass("hidden")});$(".productimagedynamicload").length?v():ActivateStoreProductBannerSlick($("div[data-sku\x3d'"+b+"'].store-product-image"));initVideoCarousel();window.location.hash=b;$("div.component-product-bv")&&
$("div.component-product-bv").find("div.rating_reviews")&&0<$("div.component-product-bv").find("div.rating_reviews").length&&$("div.component-product-bv").find("div.rating_reviews").children().attr("data-bv-product-id",b);$("div.component-product-bv")&&$("div.component-product-bv").find("div.rating_reviews")&&0<$("div.component-product-bv").find("div.rating_reviews").length&&a.isB2BUser()&&($("div.component-product-bv").closest("section.component-accordian-text")[0].outerHTML="");a.getPriceFrmInventory();
a.currentSkuObject=a.productList.productList.filter(function(b){return b.variantId===a.currentSku})[0];try{window.aa.updateUtagProductVariables(b)}catch(M){}};a.getPriceFrmInventory=function(){a.inventory=null;a.isCommerceServiceIssue=!1;spb_commonLogger("in getPriceFrmInventory...");a.isCatalogPurchasable?(spb_commonLogger("catalog is purchasable"),null==f.getSessionVariable(a.currentSku)||null==f.getSessionVariable(a.currentSku).prices?(spb_commonLogger("getProductPrice from API for: ",a.productIds),
f.getProductPrice(a.productIds).then(function(b){spb_commonLogger("product banner - got product price");a.isCommerceServiceIssue=!1;a.inventory=f.getSessionVariable(a.currentSku);null==a.inventory||null==a.inventory.productLifeCycle?(a.isCommerceServiceIssue=!0,A()):a.hashUrl||(!a.inventory.purchasable||"Active"==a.inventory.productLifeCycle&&"inStock"!=a.inventory.stockStatus&&"lowStock"!=a.inventory.stockStatus||"Pre"==a.inventory.productLifeCycle&&"preOrder"!=a.inventory.stockStatus&&"reserveNow"!=
a.inventory.stockStatus)&&A();t();y();a.isB2BUser()&&C(0);a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory);spb_commonLogger("current sku inventory:",a.inventory);h(a)},function(b){spb_commonLogger("product banner - Rejection from commerce service");a.isCommerceServiceIssue=!0;y();a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory);h(a)})):(spb_commonLogger("getProductPrice from session for ",a.currentSku),a.inventory=f.getSessionVariable(a.currentSku),null==a.inventory||null==
a.inventory.productLifeCycle?(a.isCommerceServiceIssue=!0,A()):a.hashUrl||(!a.inventory.purchasable||"Active"==a.inventory.productLifeCycle&&"inStock"!=a.inventory.stockStatus&&"lowStock"!=a.inventory.stockStatus||"Pre"==a.inventory.productLifeCycle&&"preOrder"!=a.inventory.stockStatus&&"reserveNow"!=a.inventory.stockStatus)&&A(),t(),y(),a.isB2BUser()&&C(0),a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory),spb_commonLogger("inventory : ",a.inventory),h(a))):(y(),a.triggerAnalyticsProductViewEvent(a.currentSku,
a.inventory),spb_commonLogger("catalog is not purchasable"));h(a)};a.changePriceValueOnTieredPriceClick=function(b,c){try{a.inventory.prices.list=b;1<a.inventory.prices.volumePrice.length&&(a.inventory.prices.sale=b);a.product.quantity=parseFloat(b.minQuantity);a.activeTieredPrice=c;G();var d={priceTier:"TIER"+a.activeTieredPrice};console.log("Price Tier Analytics call obj: "+d);var e=window.aa.createEvent("PRICE_TIER",JSON.stringify(d));window.dispatchEvent(e)}catch(I){console.log("Error while firing Analytics call for Tiered Pricing",
I)}};a.triggerAnalyticsProductViewEvent=function(b,c){try{var d={productSkuID:[],productSalePrice:[],productUnitPrice:[],productDiscount:[]};d.productSkuID.push(b);d.inventoryFlag="";null!=c&&null!=c.prices&&(d.productSalePrice.push(c.prices.sale.amount.toFixed(2).toString()),d.productUnitPrice.push(c.prices.list.amount.toFixed(2).toString()),d.productDiscount.push((c.prices.list.amount-c.prices.sale.amount).toFixed(2)),d.inventoryFlag=c.stockStatus);d.productSkuName=[];d.productSkuName.push($("div[data-sku\x3d'"+
b+"'].product-title").attr("data-sku-title"));var e=[];angular.forEach(a.variantCategoryOptions,function(a){var b=a.children.filter(function(a){return 1==a.viewType});spb_commonLogger("activeCategory:",b);"undefined"!=typeof b[0]&&e.push(a.attVariantCategoryLabel+":"+b[0].attVariantCategoryLabel)});0<e.length&&(d.productVariantCategory=[],d.productVariantCategory.push(e));if("undefined"!=typeof a.allCategories[b]){d.productCategory=[];var g=(a.productsLoadedNewView?a.allCategories[b]:a.allCategories[b].split(",")).map(function(a){return a.match("vvc")?
a.substring(a.match("vvc").index,a.length):a});d.productCategory.push(g)}var n=f.getSessionVariable(k.USER_DETAILS);d.loginStatusFlag=null==n||"undefined"==typeof n.uid?"guest":"logged-in";spb_commonLogger("analytics product view data obj: ",d);var h=window.aa.createEvent("PROD_VIEW",d);window.dispatchEvent(h)}catch(P){console.log("Error while triggering analytics PROD_VIEW event")}};a.processRelatedProducts=function(){spb_commonLogger("processRelatedProduct for ",a.baseProductId);var b=f.getSessionVariable(k.REL_PROD+
a.baseProductId);null==b?(spb_commonLogger("product banner - getting related products"),f.getRelatedProductsDetail(a.baseProductId).then(function(c){spb_commonLogger("product banner - got related products");b=f.getSessionVariable(k.REL_PROD+a.baseProductId);F(b)})):(spb_commonLogger("product banner - related products info found in session"),b=f.getSessionVariable(k.REL_PROD+a.baseProductId),F(b))};a.initCustomPromotionInfo=function(b){spb_commonLogger("initCustomPromotionInfo");var c={},d=f.getSessionVariable(k.PRODUCT_REFERENCES);
d&&d[b]?(c.attPromotionType=d[b].attPromotionType,c.attPromotionMessageId=d[b].attPromotionMessageId,void 0!=a.customPromotions&&void 0!=a.customPromotions[c.attPromotionType]&&(c.cpJson=a.customPromotions[c.attPromotionType][c.attPromotionMessageId])):f.getProductReferences().then(function(){var d=f.getSessionVariable(k.PRODUCT_REFERENCES);d&&d[b]&&(c.attPromotionType=d[b].attPromotionType,c.attPromotionMessageId=d[b].attPromotionMessageId,void 0!=a.customPromotions&&void 0!=a.customPromotions[c.attPromotionType]&&
(c.cpJson=a.customPromotions[c.attPromotionType][c.attPromotionMessageId]))});return c};a.getProductInfo=function(b,c,d){spb_commonLogger("product banner - setting related products info to scope");spb_commonLogger("sku.code :: ",b.code);var e={},g=a.productReferences[b.code];e.pagePath=g.pagePath;e.pageImage=g.urlFileReference;e.pageTitle=g.pageTitle;e.brandId=g.productBrandId;g.badgesInfo.tagTitle&&(e.badgeTagLabel=g.badgesInfo.tagTitle,e.badgeClass=g.badgesInfo.styleClass,e.badgeStartDate=g.badgesInfo.startDate,
e.badgeEndDate=g.badgesInfo.endDate);a.relatedProducts[b.code]=e;if(a.isCatalogPurchasable){var n=f.getSessionVariable(b.code);if(null==n)f.getBaseProductInfo(b.code,b.variants).then(function(){spb_commonLogger("sku.code :: ",b.code);n=f.getSessionVariable(b.code);var g={};if(null!=f.getSessionVariable(n.minPricedSKU)){var q=f.getSessionVariable(n.minPricedSKU);g.amountFormatted=q.prices.sale.amountFormatted;if(g.isSubscriptionProduct=q.isSubscriptionProduct)g.billingPlanName=q.prices.sale.billingPlanName;
e.minPricedSKU=g}a.relatedProducts[b.code]=e;spb_commonLogger("sessionBaseProductInfo :: ",n);h(a);z(c,d)}).catch(function(){spb_commonLogger("error thrown while getting sessionBaseProductInfo :: ",b.code);h(a);z(c,d)});else{g={};if(null!=f.getSessionVariable(n.minPricedSKU)){var q=f.getSessionVariable(n.minPricedSKU);g.amountFormatted=q.prices.sale.amountFormatted;if(g.isSubscriptionProduct=q.isSubscriptionProduct)g.billingPlanName=q.prices.sale.billingPlanName;e.minPricedSKU=g}a.relatedProducts[b.code]=
e;h(a);z(c,d)}}else z(c,d);spb_commonLogger("product banner - related products ",a.relatedProducts);h(a)};a.notifyMe=function(b,c){var d=$(c.currentTarget).attr("data-target");a.notifyMeSuccess=!1;$(d).removeClass("hidden");$(d).find("form").trigger("reset");$(d).find("form .form-group").removeClass("filled invalidField");$("body").addClass("overflow-hidden");setTimeout(function(){tabKeyFunctionality(d)},1E3)};a.submitNotifyMeForm=function(b){b.preventDefault();b.stopPropagation();var c=$(b.currentTarget);
a.email=c.find('[name\x3d"email"]').val();""==a.email||validateEmail(a.email)||$.ajax({url:b.currentTarget.action,type:"GET",data:c.serialize(),xhrFields:{withCredentials:!0}}).then(function(b){spb_commonLogger("Notify Me service response :",b);if(-1<b.indexOf("success")){spb_commonLogger("showing success");a.notifyMeSuccess=!0;b={};b.formRef=c;try{spb_commonLogger("analytics form submitted data obj: ",b);var d=window.aa.createEvent("FORM_SUBMITTED",b);window.dispatchEvent(d)}catch(I){console.log("Error while triggering analytics FORM_SUBMITTED event")}}else spb_commonLogger("showing form"),
a.notifyMeSuccess=!1;h(a);c.trigger("reset");setTimeout(function(){tabKeyFunctionality(".notifyme-modal")},1E3)},function(b){c.trigger("reset");a.notifyMeSuccess=!1;c.trigger("reset");spb_commonLogger("Error in Notify Me Service",b)})};a.notifyMeClose=function(a){a=$(a.currentTarget);$(a).closest(".notifyme-modal").find(".wd-modal-close").trigger("click");$(a).closest(".product-details").find(".active .product-price button").focus()};a.requestQuote=function(b){var c=$(b.currentTarget).attr("data-target");
a.isB2BUser()&&1==a.inventory.prices.volumePrice.length&&(a.inventory.prices.maxQuantity=50);a.requestQuoteSuccess=!1;a.requestQuoteFailure=!1;$(c).removeClass("hidden");$(c).find("form").trigger("reset");$(c).find("form .form-group").removeClass("filled invalidField");$("body").addClass("overflow-hidden");setTimeout(function(){tabKeyFunctionality(c)},1E3)};a.getFormattedText=function(a,b){return a.replace("{}",b)};a.getFormattedBackOrderAvailabilityText=function(b){return b.replace("{'stockLevel'}",
a.inventory.stockLevel).replace("{'availabilityMsg'}",a.inventory.stockAvailabilityMessage)};a.requestQuoteB2c=function(b){var c=f.getSessionVariable(k.USER_DETAILS);null==c||"undefined"==typeof c.uid?(spb_commonLogger("User is not logged in."),$(".login-modal").find("form.loginForm").trigger("reset"),$("body").addClass("overflow-hidden"),a.showLoginForm()):(spb_commonLogger("User is logged in."),a.requestQuote(b))};a.requestQuoteFormSubmitAction=function(a){a.preventDefault();a.stopPropagation();
var b=$(a.currentTarget);b.find(".form-group").removeClass("focused filled invalidField");var c=$("#commonUtilLoad").attr("data-enableRecaptcha"),d=a.currentTarget.action;if("true"==c){var e=$("#commonUtilLoad").attr("data-recaptchaSiteKey");grecaptcha.ready(function(){grecaptcha.execute(e,{action:"requestQuote"}).then(function(a){a=$("\x3cinput\x3e").attr("type","hidden").attr("name","g-recaptcha-response").val(a);b.append(a);D(b)&&x(b,d)})})}else D(b)&&x(b,d)};a.addToCart=function(b,c,d){if(("undefined"==
typeof a.product.quantity||isNaN(a.product.quantity)||0>=a.product.quantity)&&"undefined"==typeof d)a.productInvalid=!0,h(a);else if(a.isB2BUser()&&a.product.quantity>a.inventory.stockLevel)a.productStockUnavailable=!0,h(a);else if(a.productInvalid=!1,a.productStockUnavailable=!1,$(c.currentTarget).addClass("addToCartBtnActive"),$(".cartwrapper").removeClass("hidden").addClass("updateCartData addToCartButton"),$(".cartwrapper").find(".cartShowInProgress").removeClass("hidden"),a.isB2BUser()||"true"!=
a.isCandyrackEnabled)a.triggerAddToCart(b,c,d,null);else{var e=f.getSessionVariable(k.REL_PROD+b);null==e?(spb_commonLogger("getting sku based related products"),f.getRelatedProductsDetail(b,!0).then(function(g){e=f.getSessionVariable(k.REL_PROD+b);spb_commonLogger("got sku based related products",e);0<e.length?angular.element(".product-cart .wdAngularApp").scope().showCandyRackProducts(a,e,b,c,d):a.triggerAddToCart(b,c,d,null)})):(spb_commonLogger("product banner - sku related products info found in session"),
0<e.length?angular.element(".product-cart .wdAngularApp").scope().showCandyRackProducts(a,e,b,c,d):a.triggerAddToCart(b,c,d,null))}};a.triggerAddToCart=function(b,c,d,e){c="undefined"==typeof d?a.product.quantity:d;e&&(e.showCandyRackContainer=!e.showCandyRackContainer);768>$(window).width()&&$("html, body").animate({scrollTop:0},600);e=f.getSessionVariable(k.CART_DETAILS);var g=!1;a.isCatalogPurchasable?(spb_commonLogger("catalog is purchasable"),null==e||"undefined"!=typeof e.cartId&&null!=e.cartId&&
"undefined"!=typeof e.cartEntries&&0!=e.cartEntries.length||(g=!0),f.addProductToCart(b,c).then(function(c){spb_commonLogger("returned from adding product to cart, now update cart");p.updateCartData(b);g?a.checkAndtriggerAnalyticsCartOpenEvent(g,b):a.triggerAnalyticsAddToCartEvent(b)})):spb_commonLogger("catalog is not purchasable")};window.addEventListener("load",function(){});a.checkAndtriggerAnalyticsCartOpenEvent=function(b,c){var d={},e=f.getSessionVariable(k.CART_DETAILS);try{if(spb_commonLogger("analytics SC_FIRST event data obj :",
d),b){d.cartID=e.cartId;d.productName=[];d.productName.push(e.cartEntries[0].pageTitle);d.productSkuName=[];d.productSkuName.push($("div[data-sku\x3d'"+c+"'].product-title").attr("data-sku-title"));d.productID=[];d.productID.push(e.cartEntries[0].pagePath.substring(e.cartEntries[0].pagePath.lastIndexOf("/")+1));d.productSkuID=[];d.productSkuID.push(c);d.productUnitPrice=[];d.productUnitPrice.push(e.cartEntries[0].prices.list.amount.toFixed(2).toString());d.productSalePrice=[];d.productSalePrice.push(e.cartEntries[0].prices.sale.amount.toFixed(2).toString());
d.productDiscount=[];d.productDiscount.push((e.cartEntries[0].prices.list.amount-e.cartEntries[0].prices.sale.amount).toFixed(2));a.isB2BUser()&&(d.priceTier=a.activeTieredPrice);d.productQuantity=a.product.quantity;var g=window.aa.createEvent("SC_FIRST",d);window.dispatchEvent(g)}}catch(O){console.log("Error while triggering analytics SC_FIRST event")}};a.triggerAnalyticsAddToCartEvent=function(b){b={};var c=f.getSessionVariable(k.CART_DETAILS);null!=c&&"undefined"!=typeof c.cartId&&(b.cartID=c.cartId,
a.isB2BUser()&&(b.priceTier=a.activeTieredPrice),b.productQuantity=a.product.quantity);try{spb_commonLogger("analytics ADD_TO_CART event data obj :",b);var d=window.aa.createEvent("ADD_TO_CART",b);window.dispatchEvent(d)}catch(N){console.log("Error while triggering analytics ADD_TO_CART event")}};a.checkSkuInFavorites=function(){var b=f.getSessionVariable(k.USER_DETAILS);if(null==b)f.getUser().then(function(){b=f.getSessionVariable(k.USER_DETAILS);if(null==b||"undefined"==typeof b.uid)return spb_commonLogger("checkSkuInFavorites : User is not logged in."),
!0;if(0<b.wishlistCount&&-1<b.wishlistProducts.indexOf(a.currentSku))return spb_commonLogger("checkSkuInFavorites : sku found in wishlist."),!1});else if(0<b.wishlistCount&&-1<b.wishlistProducts.indexOf(a.currentSku))return spb_commonLogger("checkSkuInFavorites : sku found in wishlist."),!1;return!0};a.addToFavorites=function(){var b=f.getSessionVariable(k.USER_DETAILS);null==b||"undefined"==typeof b.uid?(spb_commonLogger("User is not logged in."),$(".login-modal").find("form.loginForm").trigger("reset"),
$(".login-modal").removeClass("hidden").addClass("addToFavorites"),$("body").addClass("overflow-hidden"),a.showLoginForm()):(spb_commonLogger("User is logged in."),f.addProductToFavorites(a.currentSku).then(function(){f.getUser().then(function(){spb_commonLogger("product added to favorites : ",JSON.stringify(f.getSessionVariable(k.USER_DETAILS)));b=f.getSessionVariable(k.USER_DETAILS);null!=b&&"undefined"!=typeof b.uid&&(a.triggerAnalyticsAddToFavourites(),a.updateUserInfoComp(b),$(".login-modal").hasClass("addToFavorites")&&
window.location.reload())})},function(){spb_commonLogger("User session timed out");$(".login-modal").find("form.loginForm").trigger("reset");$(".login-modal").removeClass("hidden").addClass("addToFavorites");$("body").addClass("overflow-hidden");a.showLoginForm()}))};a.triggerAnalyticsAddToFavourites=function(){try{var a=window.aa.createEvent("ADD_TO_FAV",{});window.dispatchEvent(a)}catch(E){console.log("Error while triggering analytics ADD_TO_FAV event")}};a.removeFromFavorites=function(){f.getUser().then(function(){var b=
f.getSessionVariable(k.USER_DETAILS);null==b||"undefined"==typeof b.uid?spb_commonLogger("User is not logged in."):(spb_commonLogger("User is logged in."),f.removeProductFromFavorites(a.currentSku).then(function(){f.getUser().then(function(){spb_commonLogger("product removed from favorites : ",JSON.stringify(f.getSessionVariable(k.USER_DETAILS)));b=f.getSessionVariable(k.USER_DETAILS);null!=b&&"undefined"!=typeof b.uid&&(a.triggerAnalyticsRemoveFromFavourites(),a.updateUserInfoComp(b),$(".login-modal").hasClass("removeFromFavorites")&&
window.location.reload())})},function(){spb_commonLogger("User session timed out");$(".login-modal").find("form.loginForm").trigger("reset");$(".login-modal").removeClass("hidden").addClass("removeFromFavorites");$("body").addClass("overflow-hidden");a.showLoginForm()}))})};a.triggerAnalyticsRemoveFromFavourites=function(){try{var a=window.aa.createEvent("REMOVE_FROM_FAV",{});window.dispatchEvent(a)}catch(E){console.log("Error while triggering analytics REMOVE_FROM_FAV event")}};a.showLoginForm=function(){f.removeAllSessionVariable();
var a=$(".commerce-user-info .wdAngularApp");spb_commonLogger("In showLoginForm :: ",a.length);if("undefined"!=typeof a)for(var b=0;b<a.length;b++){var c=angular.element(a[b]).scope();c.triggerSignInModal();c.$apply()}};a.updateUserInfoComp=function(a){var b=$(".commerce-user-info .wdAngularApp");if("undefined"!=typeof b)for(var c=0;c<b.length;c++){var d=angular.element(b[c]).scope();d.totalItems=a.wishlistCount;d.$apply()}};a.openReserveNowForm=function(b,c){a.qvActiveSkuObj=a.productReferences[a.currentSku];
a.qvActiveSkuObj.baseProductId=a.baseProductId;h(a);b=c.currentTarget;$("[data-target\x3d'#reserve-now-modal']").removeAttr("data-target");$(b).attr("data-target","#reserve-now-modal");$("#reserve-now-modal").removeClass("hidden");$("body").addClass("overflow-hidden");setTimeout(function(){tabKeyFunctionality("#reserve-now-modal")},1E3)};a.offerSchema=function(b,c,d,e,g,n,q,h){if(!a.isB2BUser())if(a.isCatalogPurchasable){var r="";null==f.getSessionVariable(g)||null==f.getSessionVariable(g).prices?
(spb_commonLogger("getProductPrice from API for: ",a.productIds),f.getProductPrice(a.productIds).then(function(l){spb_commonLogger("product banner offer schema - got product price");r=f.getSessionVariable(g);a.getOfferSchema(r,b,c,d,e,g,n,q,h)})):(spb_commonLogger("getProductPrice from session for ",g),r=f.getSessionVariable(g),a.getOfferSchema(r,b,c,d,e,g,n,q,h))}else spb_commonLogger("generate product json with empty offers obj for non commerce sites. . . "),a.getOfferSchema(r,b,c,d,e,g,n,q,h)};
a.getOfferSchema=function(a,b,d,e,g,f,n,q,h){spb_commonLogger("inside getOfferSchema. . . ");var r={};if(a&&a.prices&&a.prices.sale){var m=(new Date).toISOString().slice(0,10);r["@type"]="Offer";r.url=d;r.priceCurrency=a.prices.sale.currency;r.price=a.prices.sale.amount;r.availability=a.stockStatus;r.priceValidUntil=m;a={"@type":"Organization"};a.name=n;r.seller=[a]}a={"@type":"Brand"};a.name=n;b={"@context":"http://schema.org","@id":d.split("#")[0]?d.split("#")[0]:d,"@type":"Product",name:b,brand:[a],
identifier:h,description:q,url:d,image:e,color:g,sku:f,mpn:f,offers:[r]};spb_commonLogger("productJson"+b);b=c.trustAsHtml(l("json")(b));$(".productBannerApp").append('\x3cscript nonce\x3d"'+$("#commonUtilLoad").attr("data-nonceKey")+'" type\x3d"application/ld+json"\x3e'+b+"\x3c/script\x3e")};a.rewritePageURL=function(a){return void 0!=a&&0<a.trim().length?m.rewritePageURL(a):a};a.openWtbPage=function(){a.trackWTBClick();window.location.href=a.wtbPagePath};a.trackWTBClick=function(){try{var a=window.aa.createEvent("WHERE_TO_BUY",
{});window.dispatchEvent(a)}catch(E){console.log("Error while triggering analytics WHERE_TO_BUY event")}};a.unescape=function(b){return a.getUnEscapedHTMLContent(K(b).replace(/\\/g,""))};a.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return c.trustAsHtml(a)};a.increment=function(){a.product.quantity++;a.updateOnInputQuantityChange()};a.decrement=function(){a.product.quantity--;a.updateOnInputQuantityChange()};a.resetProductQuantity=function(){a.product={quantity:1};
a.productInvalid=!1;h(a)};a.checkForVerticalCarouselLayout=function(){return 1<parseInt(a.productAssets[a.currentSku].size)||1<=parseInt(a.productAssets[a.currentSku].size)&&(1<=parseInt(a.featuredAssets[a.currentSku].size)||1<=a.videos[a.currentSku].length)};a.checkForCarouselLayout=function(){return 1==parseInt(a.productAssets[a.currentSku].size)&&0==parseInt(a.featuredAssets[a.currentSku].size)&&0==a.videos[a.currentSku].length};a.formatPrice=function(b,c){if(0<a.product.quantity){b=(new Intl.NumberFormat(m.getLocale(),
{style:"currency",currency:c})).format(b*a.product.quantity);if("en-CA"==m.getLocale()||"fr-CA"==m.getLocale())b=b.replace("$","C$ ");return b}};a.showRequestModalOtherField=function(b){a.requestModalBusinessUse=b;"other"==b.key?($(".otherBusinessUseTextField").removeClass("hidden"),$(".otherBusinessUseTextField").prop("required",!0)):($(".otherBusinessUseTextField").addClass("hidden"),$(".otherBusinessUseTextField").prop("required",!1))};a.isProductValidForUser=function(){var b=!0;a.isB2BUser()&&
"B2C"==a.productList.channel.toUpperCase()?b=!1:a.isB2BUser()||"B2B"!=a.productList.channel.toUpperCase()||(b=!1);return b};a.updateOnInputQuantityChange=function(){0<a.product.quantity?(a.productInvalid=!1,a.isB2BUser()&&a.product.quantity<a.inventory.stockLevel?a.productStockUnavailable=!1:a.isB2BUser()&&a.product.quantity>a.inventory.stockLevel&&(a.productStockUnavailable=!0),a.isB2BUser()&&B(),G()):a.productInvalid=!0};a.showBusinessLoginPage=function(){window.location.replace(f.gotoBusinessCommerceURL("login"))};
a.isPathProtected=function(a){return m.isPathProtected(a)};a.updateProductAttributeValues=function(b,c){c=c.replace(/\n|\t|\r/g,"");a.techSpecsSkuMapping[b]=JSON.parse(c)};a.isBadgeStatusActive=function(a,b){return m.isBadgeStatusActive(a,b)};document.querySelector("body").addEventListener("FIRE_TAG",function(b){a.isFunctionalConsent=!window.aa||!window.aa.trustArcCookies||window.aa.trustArcCookies.euCookie.isPresent&&!window.aa.trustArcCookies.fnCookie.isPresent&&!window.aa.trustArcCookies.euCookie.isTrue||
window.aa.trustArcCookies.euCookie.isPresent&&window.aa.trustArcCookies.euCookie.isTrue&&window.aa.trustArcCookies.fnCookie.isPresent&&window.aa.trustArcCookies.fnCookie.isTrue||window.aa.trustArcCookies.euCookie.isPresent&&!window.aa.trustArcCookies.euCookie.isTrue&&window.aa.trustArcCookies.fnCookie.isPresent&&window.aa.trustArcCookies.fnCookie.isTrue;h(a)})}]);
function activeProductZoom(a){a.ezPlus({zoomActivation:"click",zoomType:"inner",cursor:"crosshair",responsive:!0,respond:[{range:"0-992",enabled:!1,showLens:!1,zoomType:!1}]})}$("body").on("click",".store-product-image.active .product-slider-single .zoomImageBox.slick-current img, .variant-category-container",function(){992<$(window).width()&&($("body").find(".ZoomContainer").length?$(".ZoomContainer").remove():activeProductZoom($(this)))});
$(".store-product-image.active .product-slider-single").on("afterChange",function(a,c,b,d){$(".ZoomContainer").remove()});
function ActivateStoreProductBannerSlick(a){try{a.find(".product-slider-single").hasClass("slick-initialized")&&a.find(".product-slider-single").slick("unslick");a.find(".product-slider-nav").hasClass("slick-initialized")&&a.find(".product-slider-nav").slick("unslick");a.find(".vertical-product-slider-nav").hasClass("slick-initialized")&&a.find(".vertical-product-slider-nav").slick("unslick");"rtl"==$("html").attr("dir")?a.find(".product-slider-single").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,
fade:!0,adaptiveHeight:!0,infinite:!1,useTransform:!0,speed:400,onAfterChange:afterChange,init:afterChange,cssEase:"cubic-bezier(0.77, 0, 0.18, 1)",rtl:!0,responsive:[{breakpoint:768,settings:{dots:!0}}]}):a.find(".product-slider-single").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,adaptiveHeight:!0,infinite:!1,useTransform:!0,speed:400,onAfterChange:afterChange,init:afterChange,cssEase:"cubic-bezier(0.77, 0, 0.18, 1)",responsive:[{breakpoint:768,settings:{dots:!0}}]});$(window).resize(function(){setTimeout(function(){resetThumbnailHeight(a)},
200)});"rtl"==$("html").attr("dir")?a.find(".product-slider-nav").on("init",function(b,c){resetThumbnailHeight(a);$(this).find(".slick-slide.slick-current").addClass("is-active")}).slick({slidesToShow:4,slidesToScroll:4,focusOnSelect:!1,infinite:!1,rtl:!0}):a.find(".product-slider-nav").on("init",function(b,c){resetThumbnailHeight(a);$(this).find(".slick-slide.slick-current").addClass("is-active")}).slick({slidesToShow:4,slidesToScroll:4,focusOnSelect:!1,infinite:!1});"rtl"==$("html").attr("dir")?
a.find(".vertical-product-slider-nav").on("init",function(b,c){resetThumbnailHeight(a);$(this).find(".slick-slide.slick-current").addClass("is-active")}).slick({slidesToShow:4,infinite:!1,vertical:!0,verticalSwiping:!0,swipeToSlide:!0,arrows:!1,speed:50,responsive:[{breakpoint:768,settings:{vertical:!1,verticalSwiping:!1,dots:!1,slidesToShow:4,rtl:!0}}]}):a.find(".vertical-product-slider-nav").on("init",function(b,c){resetThumbnailHeight(a);$(this).find(".slick-slide.slick-current").addClass("is-active")}).slick({slidesToShow:4,
infinite:!1,vertical:!0,verticalSwiping:!0,swipeToSlide:!0,arrows:!1,speed:50,responsive:[{breakpoint:768,settings:{vertical:!1,verticalSwiping:!1,dots:!1,slidesToShow:4}}]});a.find(".vertical-product-slider-nav button.slick-slide").attr("tabindex","0");$(".vertical-product-slider-nav").on("wheel",function(a){a.preventDefault();0<a.originalEvent.deltaY?$(this).slick("slickNext"):$(this).slick("slickPrev");setTimeout(function(){$(".vertical-product-slider-nav button.slick-slide").attr("tabindex","0")},
2E3)});var c=$(".relatedItemWrap-v1 .slick-slide");if(992<=$(window).width()&&5<c.length||576<=$(window).width()&&3<c.length||576>$(window).width()&&2<c.length)$(".relatedItemWrap-v1").on("wheel",function(a){a.preventDefault();0<a.originalEvent.deltaY?$(this).slick("slickNext"):$(this).slick("slickPrev")});a.find(".vertical-product-slider-nav").on("click",".slick-slide",function(b){b.preventDefault();b=$(this).data("slick-index");$(".ZoomContainer").remove();a.find(".product-slider-single").slick("slickGoTo",
b)});a.find(".product-slider-single").on("afterChange",function(b,c,e){a.find(".product-slider-nav").slick("slickGoTo",e);a.find(".product-slider-nav .slick-slide.is-active").removeClass("is-active");a.find('.product-slider-nav .slick-slide[data-slick-index\x3d"'+e+'"]').addClass("is-active")});a.find(".product-slider-nav").on("click",".slick-slide",function(b){b.preventDefault();b=$(this).data("slick-index");$(".ZoomContainer").remove();a.find(".product-slider-single").slick("slickGoTo",b)})}catch(b){console.log(b)}}
function resetThumbnailHeight(a){var c=a.find(".product-slider-nav").closest(".active").find(".product-slider-nav .slick-slide").width();a.find(".product-slider-nav").closest(".active").find(".product-slider-nav .slick-slide").height(c);c=a.find(".vertical-product-slider-nav").closest(".active").find(".vertical-product-slider-nav .slick-slide").width();a.find(".vertical-product-slider-nav").closest(".active").find(".vertical-product-slider-nav .slick-slide").height(c)}
afterChange=function(a,c){c=$(a.$slides[c]).height();$(a.$slider).height(c)};$(document).ready(function(){$(".store-product-image.active").each(function(){ActivateStoreProductBannerSlick($(this));$(this).removeClass("invisible")});addAnchorsToDisclosures()});
function addAnchorsToDisclosures(){$("body").find(".product-banner").find("sup").each(function(){if(!$(this).parent().hasClass("skip-for-disclosures")){var a=$(this).text();a=$('\x3ca class\x3d"disclosure" href\x3d"#disclosures'+a+'" target\x3d"_self" aria-describedby\x3d"disclosures"\x3e\x3c/a\x3e');$(this).wrap(a)}})}
function initWTB(){var a="";0<window.location.hash.trim().length&&(a=window.location.hash.split("#")[1]);$(".store-product-wtb").each(function(){$(this).removeClass("text-hide");""!=a?$(this).attr("data-sku")==a?$(this).addClass("active"):$(this).addClass("hidden"):$(this).hasClass("active")||$(this).addClass("hidden")})}
function initVariantCategoryDropdown(){$(".variantList \x3e li");$(document).off("click",".variantList \x3e li").on("click",".variantList \x3e li",function(a){a=a.currentTarget;$(a).closest(".variant-category-dropdown").find(".selectedvariant").text($(a).text());$(a).removeClass("selected");$(a).addClass("selected");$(a).closest(".variant-category-dropdown").find(".variantList").toggleClass("hidden")});$(".variantToggle");$(document).off("click",".variantToggle").on("click",".variantToggle",function(a){$(a.currentTarget).closest(".variant-category-dropdown").find(".variantList").toggleClass("hidden")})}
$(document).ready(function(){initVariantCategoryDropdown();initVideoCarousel()});$(document).click(function(a){$(a.target).closest(".variant-category-dropdown").length||$("body").find(".variantList").addClass("hidden")});$("body").on("click",".galleryListDropdown",function(){$(".gallery-list").toggleClass("hidden");$(".galleryListDropdown svg").toggleClass("rotate-180")});
function initVideoCarousel(){$(".productCarouselVideo").each(function(){$(this).hasClass("slick-initialized")&&$(this).slick("unslick");1<$(this).find(".wd-video").length&&$(this).slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,adaptiveHeight:!0,infinite:!1,useTransform:!0,speed:400,cssEase:"cubic-bezier(0.77, 0, 0.18, 1)",onAfterChange:afterChange,init:afterChange,dots:!0});$(this).closest(".product-video").removeClass("overflow-hidden h-0")})}
function spb_commonLogger(a,c){-1<window.location.search.indexOf("debugSPB\x3dtrue")&&console.log(a,null!=c?c:"")}$(document).ready(function(){var a=document.getElementById("commerceLoad"),c=a.getAttribute("data-enableBV"),b=getCookie("Channel"),d=document.getElementById("hideProductReviews").value;"true"==c&&"B2B"!=b&&"true"!=d&&(c=document.createElement("script"),c.src=a.getAttribute("data-bv-endpoint-url"),document.body.appendChild(c),document.getElementById("sticky-nav")&&$(".reviews-subnavItem").removeClass("hidden"))});
var wdStoreProductBannerApp=angular.module("WDStoreProductBannerApp",["CommerceApp","CommonUtilApp","angular.filter","ngSanitize"]);wdStoreProductBannerApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);wdStoreProductBannerApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
wdStoreProductBannerApp.directive("contentlistDir",function(){return function(a,c,b){a.init(b.jsonString,b.id)}});
wdStoreProductBannerApp.controller("WDStoreProductBannerController",["$scope","$sce","$http","$location","$timeout","$filter","CommerceService","COMMERCE_CONSTANTS","CommonUtilService","safeApply",function(a,c,b,d,e,l,f,k,p,m){function h(b,c){wdspb_commonLogger("findSku :: paramCategoriesSelected :",b);wdspb_commonLogger("findSku :: primaryCategory :",c);var d=[];a.skuVariantCategoryMapping.filter(function(a,b){-1<a.categories.indexOf(c)&&(a.count=0,d.push(a))});1<d.length&&(d.forEach(function(a,
c){a=a.categories.filter(function(a){return-1<b.indexOf(a)});d[c].count=a.length}),d.sort(function(a,b){return b.count-a.count}));wdspb_commonLogger("findSku :: mappings :",d);return d[0].sku}function q(a){return a.replace(/\\u[\dA-F]{4}/gi,function(a){return String.fromCharCode(parseInt(a.replace(/\\u/g,""),16))})}a.relatedProducts={};a.sessionRelatedProducts=[];a.skuVariantCategoryMapping=[];a.hashUrl=!1;a.viewUpdated=!1;a.notifyMeSuccess=!1;a.checkInventoryStatusAndSelectDefaultVariantFlag=!1;
a.primaryCategoryGroup=null;a.secondaryCategoryGroup=null;a.selectedPrimaryCategory=null;a.selectedSecondaryCategory=null;a.contentListJson={};a.ddItemSelected={};a.ddItemSelectedTitles={};a.init=function(b,c){a.contentListJson[c]=JSON.parse(b);m(a)};a.getContentListJson=function(b){return a.contentListJson[b]};a.trustAsUrl=function(a){return c.trustAsResourceUrl(a)};a.$watch("productsLoaded",function(){wdspb_commonLogger("in productsLoaded...");wdspb_commonLogger("skuVariantCategoryMapping",a.skuVariantCategoryMapping);
a.allvariantCategories=[];a.skuVariantCategoryMapping.forEach(function(b){a.allvariantCategories=a.allvariantCategories.concat(b.categories)});a.allvariantCategories=a.allvariantCategories.filter(function(b,c){return a.allvariantCategories.indexOf(b)==c});wdspb_commonLogger("allvariantCategories",a.allvariantCategories);wdspb_commonLogger("variantCategoryOptionsString",JSON.parse(a.variantCategoryOptionsString));a.skuProductIdsMapping=JSON.parse(a.skuProductIdsMappingString);a.skuList=a.productIds.split(",");
wdspb_commonLogger("Sku list:",a.skuList);a.currentSku=a.defaultVariantSku;a.variantCategoryOptions=JSON.parse(a.variantCategoryOptionsString);0<a.variantCategoryOptions.length&&(a.primaryCategoryGroup=a.variantCategoryOptions[0].variantCategory);1<a.variantCategoryOptions.length&&(a.secondaryCategoryGroup=a.variantCategoryOptions[1].variantCategory);setTimeout(function(){a.updateVariantCategoriesView(a.currentSku,null);a.updateViewForVariant(a.currentSku,!0)},1);wdspb_commonLogger("isHashUrl ::",
a.hashUrl)});a.updateVariantCategoriesView=function(b,c){wdspb_commonLogger("updateVariantCategoriesView :: sku ",b);wdspb_commonLogger("updateVariantCategoriesView :: selectedCategory ",c);a.prevSelectedSkuCategories=[];null!=c&&($("li[data-variant-category].active-variant-axis").each(function(){$(this).attr("data-variant-category")!=c&&a.prevSelectedSkuCategories.push($(this).attr("data-variant-category"))}),$("option[data-variant-category].active-variant-axis").each(function(){$(this).attr("data-variant-category")!=
c&&a.prevSelectedSkuCategories.push($(this).attr("data-variant-category"))}));null==b&&(a.currentSku=h(a.prevSelectedSkuCategories,c));a.activeSkuObj=a.skuVariantCategoryMapping.filter(function(b){if(b.sku==a.currentSku)return b.categories})[0];wdspb_commonLogger("updateVariantCategoriesView :: activeSkuObj ",a.activeSkuObj);var d=[];a.skuVariantCategoryMapping.forEach(function(a){d=d.concat(a.categories)});d=d.filter(function(a,b){return d.indexOf(a)==b});if(a.activeSkuObj){var e=a.activeSkuObj.categories;
null==c&&(c=e[0]);var g={};e.forEach(function(b){g[b]=[];for(var c in a.skuVariantCategoryMapping){var d=a.skuVariantCategoryMapping[c].categories;-1<d.indexOf(b)&&(g[b]=g[b].concat(d))}null!=a.primaryCategoryGroup&&-1<b.indexOf(a.primaryCategoryGroup)&&(a.selectedPrimaryCategory=b);null!=a.secondaryCategoryGroup&&-1<b.indexOf(a.secondaryCategoryGroup)&&(a.selectedSecondaryCategory=b)});wdspb_commonLogger("available :: ",g);wdspb_commonLogger("selected primary category :: ",a.selectedPrimaryCategory);
a.variantCategoryOptions.map(function(a){a.children.map(function(a){-1<e.indexOf(a.variantCategory)?a.viewType=1:1<e.length?e.forEach(function(b){a.variantCategory.substr(0,a.variantCategory.indexOf("/"))!=b.substr(0,b.indexOf("/"))&&(-1<g[b].indexOf(a.variantCategory)?a.viewType=0:a.viewType=-1)}):a.viewType=0})});wdspb_commonLogger("categories after viewtype updation :: ",a.variantCategoryOptions);a.variantCategoryOptionsNewView=a.variantCategoryOptions;a.variantCategoryOptionsNewView.map(function(b,
c){0<c?b.children.map(function(b,d){-1<e.indexOf(b.variantCategory)&&(a.ddItemSelected[c]=b.variantCategory,a.ddItemSelectedTitles[c]=b.variantCategoryLabel);-1<e.indexOf(b.variantCategory)?b.showFlag=1:1<e.length?1==c?-1<g[a.selectedPrimaryCategory].indexOf(b.variantCategory)?b.showFlag=0:b.showFlag=-1:-1<g[a.selectedPrimaryCategory].indexOf(b.variantCategory)&&-1<g[a.selectedSecondaryCategory].indexOf(b.variantCategory)?b.showFlag=0:b.showFlag=-1:b.showFlag=0}):b.children.map(function(b,d){-1<e.indexOf(b.variantCategory)&&
(a.ddItemSelected[c]=b.variantCategory,a.ddItemSelectedTitles[c]=b.variantCategoryLabel);b.showFlag=b.variantCategory==a.selectedPrimaryCategory?1:0})});wdspb_commonLogger("categories after viewtype updation for new view :: ",a.variantCategoryOptions)}a.triggerAnalyticsProductViewEventForWD(a.currentSku);m(a)};a.handleVariantCategoryClick=function(b){a.updateVariantCategoriesView(null,b);a.updateViewForVariant(a.currentSku,!1);e(function(){$(".variant-category-select").each(function(){wdspb_commonLogger("updating dropdown with",
a.ddItemSelected[$(this).attr("data-variant-category-number")]);$(this).val(a.ddItemSelected[$(this).attr("data-variant-category-number")]).trigger("change")});$("ul.variant-category-container").find("li").find("a, button").attr("tabindex","-1");$("ul.variant-category-container").find("li.active").find("a, button").attr("tabindex","0")})};a.updateViewForVariant=function(b,c){wdspb_commonLogger("in updateViewForVariant");a.viewUpdated=!0;wdspb_commonLogger("in updateViewForVariant:Updatinf view for sku:",
b);if(a.hashUrl||!c)$("div[data-sku].active").addClass("hidden").removeClass("active"),$("div[data-sku\x3d'"+b+"']").each(function(){wdspb_commonLogger("in updateViewForVariant:Updating view for sku:",b);$(this).addClass("active").removeClass("hidden")});ActivateStoreProductBannerSlick($("div[data-sku\x3d'"+b+"'].store-product-image"));initVideoCarousel();try{window.aa.updateUtagProductVariables(b)}catch(r){}};a.triggerAnalyticsProductViewEventForWD=function(b){var c={productSkuID:[]};c.productSkuID.push(b);
c.productSkuName=[];c.productSkuName.push($("div[data-sku\x3d'"+b+"'].product-title").attr("data-sku-title"));var d=[];angular.forEach(a.variantCategoryOptions,function(a){var b=a.children.filter(function(a){return 1==a.viewType});spb_commonLogger("activeCategory:",b);"undefined"!=typeof b[0]&&d.push(a.attVariantCategoryLabel+":"+b[0].attVariantCategoryLabel)});0<d.length&&(c.productVariantCategory=[],c.productVariantCategory.push(d));"undefined"!=typeof a.allCategories[b]&&(c.productCategory=[],
b=a.allCategories[b].split(",").map(function(a){return a.match("vvc")?a.substring(a.match("vvc").index,a.length):a}),c.productCategory.push(b));b=f.getSessionVariable(k.USER_DETAILS);c.loginStatusFlag=null==b||"undefined"==typeof b.uid?"guest":"logged-in";try{spb_commonLogger("analytics product view data obj: ",c);var e=window.aa.createEvent("PROD_VIEW",c);window.dispatchEvent(e)}catch(u){console.log("Error while triggering analytics PROD_VIEW event")}};a.rewritePageURL=function(a){return 0<a.trim().length?
p.rewritePageURL(a):a};a.openWtbPage=function(){a.trackWTBClick();window.location.href=a.wtbPagePath};a.trackWTBClick=function(){try{var a=window.aa.createEvent("WHERE_TO_BUY",{});window.dispatchEvent(a)}catch(g){console.log("Error while triggering analytics WHERE_TO_BUY event")}};a.unescape=function(b){return a.getUnEscapedHTMLContent(q(b).replace(/\\/g,""))};a.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return c.trustAsHtml(a)}}]);
function wdspb_commonLogger(a,c){-1<window.location.search.indexOf("debugWDSPB\x3dtrue")&&console.log(a,null!=c?c:"")}var wdProductListingApp=angular.module("WDProductListingApp",["CommonUtilApp","ngSanitize"]);wdProductListingApp.directive("productlistDir",function(){return function(a,c,b){a.initialize(b.productJsonString)}});
wdProductListingApp.controller("WDProductListingController",["$scope","CommonUtilService","$sce",function(a,c,b){wdpl_commonLogger("in WDProductListingController...");a.initialize=function(b){wdpl_commonLogger("in initialize...");wdpl_commonLogger(b);b=JSON.parse(b);a.productJSON=b};a.rewritePageURL=function(a){return c.rewritePageURL(a)};a.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return b.trustAsHtml(a)}}]);
wdStoreProductBannerApp.directive("productlistDir",function(){return function(a,c,b){a.initialize(b.productJsonString)}});
wdStoreProductBannerApp.controller("WDStoreViewProductListingController",["$scope","CommonUtilService","$sce",function(a,c,b){wdpl_commonLogger("in WDStoreViewProductListingController...");a.initialize=function(b){wdpl_commonLogger("in initialize...");wdpl_commonLogger(b);b=JSON.parse(b);a.productJSON=b};a.rewritePageURL=function(a){return c.rewritePageURL(a)};a.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return b.trustAsHtml(a)};a.initRelatedProductCarousel=
function(b,c){a.productJSON.length==b+1&&(wdpl_commonLogger("product banner - initializing slick for related products "),$("#"+c).removeClass("invisible"),"rtl"==$("html").attr("dir")?$("#"+c).each(function(){$(this).slick({infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,rtl:!0,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:576,settings:{infinite:!0,dots:!0,slidesToShow:2,slidesToScroll:2}}]})}):$("#"+c).each(function(){$(this).slick({infinite:!1,speed:300,
slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:576,settings:{infinite:!0,dots:!0,slidesToShow:2,slidesToScroll:2}}]})}))}}]);function wdpl_commonLogger(a){-1<window.location.search.indexOf("debugCommerce\x3dtrue")&&console.log("WDPL: "+a)}var storeProductListingApp=angular.module("StoreProductListingApp",["CommerceApp","CampaignApp","ngSanitize","uiSlider"]);
storeProductListingApp.directive("productlistDir",function(){return function(a,c,b){a.init(b.jsonString)}});storeProductListingApp.filter("startFrom",function(){return function(a,c){if(void 0!=a)return a.slice(+c)}});storeProductListingApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);storeProductListingApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
storeProductListingApp.directive("custompromotionDir",function(){return function(a,c,b){a.initCustomPromotion(b.customPromotionsJsonString)}});
storeProductListingApp.controller("StoreProductListingController",["COMMERCE_CONSTANTS","CommonUtilService","$scope","$http","CommerceService","CampaignService","$sce","orderByFilter","$filter","$window","$location","$q","safeApply",function(a,c,b,d,e,l,f,k,p,m,h,q,n){function g(a){return void 0!==a&&null!==a&&a.constructor==Object}function r(a){var c="";angular.forEach(JSON.parse(b.filtersJSON),function(b){b.filterId==a&&(c=b.filterView)});return c}function w(a){var c="";angular.forEach(JSON.parse(b.filtersJSON),
function(b){b.filterId==a&&(c=b.filterType)});return""!=c?c:"or"}function u(){var a=m.innerHeight,b=Math.abs(angular.element(".fliter_header").outerHeight()),c=Math.abs(angular.element(".filter_btn_height").outerHeight());angular.element(".filterItemWrap").height(a-b-c)}function v(a,c){angular.forEach(b.filterLabels,function(d){if(d.selected&&d.filterType==a&&d.value!=c)for(d.selected=!1,d=0;d<b.selectedFacetsLabel.length;d++)b.selectedFacetsLabel[d].split(",")[3]==a&&b.selectedFacetsLabel.splice(d,
1)})}function A(){var a=window.location.pathname,c=window.location.search;if(b.selectedFacetsLabel.length){for(var d="",e=0;e<b.selectedFacetsLabel.length;e++){var g=b.selectedFacetsLabel[e].split(",")[0];d=d+"."+g}window.history.replaceState("","",a.substring(a.lastIndexOf("/")+1,-1<a.indexOf(".")?a.indexOf("."):a.length)+d+c);K=!0}else K&&window.history.replaceState("","",a.split(".")[0]+c)}function y(a){return a.replace(/\\u[\dA-F]{4}/gi,function(a){return String.fromCharCode(parseInt(a.replace(/\\u/g,
""),16))})}var t=[],C=!0,F=0;b.productInfo={};b.selectorVal=[];b.dataLoaded=!1;b.colorFound=!1;b.min=Number.MAX_SAFE_INTEGER;b.max=Number.MIN_SAFE_INTEGER;b.isCatalogPurchasable=e.getPurchasableCatalog();b.categoryPagesListJson=[];b.selectedFacetsLabel=[];b.currentPage=0;b.countSelector="1";b.pageSize=12;b.categoryPrefix;b.productJSON=t;b.customCampaignQuery="";var z=[],x="";b.productCategoryCode="cat_products";var D="",K=!1,H=null,G="",B="",L="",E="",M={},N=[];b.allProductDetailsUpdated=!1;b.isB2BUser=
function(){return e.getCustomerChannel()==a.B2B?!0:!1};b.initCustomPromotion=function(a){try{b.customPromotions=JSON.parse(a),spl_commonLogger("custom promotions",b.customPromotios),n(b)}catch(Q){console.error("pl : error while parsing custom promo json",Q)}};b.initCustomPromotionInfo=function(c){spl_commonLogger("initCustomPromotionInfo");var d={},g=e.getSessionVariable(a.PRODUCT_REFERENCES);g&&g[c]?(d.attPromotionType=g[c].attPromotionType,d.attPromotionMessageId=g[c].attPromotionMessageId,void 0!=
b.customPromotions&&void 0!=b.customPromotions[d.attPromotionType]&&(d.cpJson=b.customPromotions[d.attPromotionType][d.attPromotionMessageId])):e.getProductReferences().then(function(){var g=e.getSessionVariable(a.PRODUCT_REFERENCES);g&&g[c]&&(d.attPromotionType=g[c].attPromotionType,d.attPromotionMessageId=g[c].attPromotionMessageId,void 0!=b.customPromotions&&void 0!=b.customPromotions[d.attPromotionType]&&(d.cpJson=b.customPromotions[d.attPromotionType][d.attPromotionMessageId]))});return d};b.initBadgeInfo=
function(b){spl_commonLogger("initBadgeInfo");var c={},d=e.getSessionVariable(a.PRODUCT_REFERENCES);d&&d[b]&&d[b].badgesInfo.tagTitle?(c.badgeTagLabel=d[b].badgesInfo.tagTitle,c.badgeClass=d[b].badgesInfo.styleClass,c.badgeStartDate=d[b].badgesInfo.startDate,c.badgeEndDate=d[b].badgesInfo.endDate):e.getProductReferences().then(function(){var d=e.getSessionVariable(a.PRODUCT_REFERENCES);d&&d[b]&&d[b].badgesInfo.tagTitle&&(c.badgeTagLabel=d[b].badgesInfo.tagTitle,c.badgeClass=d[b].badgesInfo.styleClass,
c.badgeStartDate=d[b].badgesInfo.startDate,c.badgeEndDate=d[b].badgesInfo.endDate)});return c};b.isBadgeStatusActive=function(a,b){return c.isBadgeStatusActive(a,b)};b.filterOptionsLimit=b.filterOptionsLimit?parseInt(b.filterOptionsLimit):5;b.$watch("brandFilters",function(){void 0==b.brandFilters||g(b.brandFilters)||(b.brandFiltersJson=JSON.parse(b.brandFilters))});b.$watch("capacityFilterRange",function(){void 0==b.capacityFilterRange||g(b.capacityFilterRange)||(b.capacityFilterRange=JSON.parse(b.capacityFilterRange))});
d=window.location.pathname.replace(".html","");!angular.isUndefined(d)&&d.contains(".")&&(d=d.substr(d.indexOf(".")+1),b.selectorVal=decodeURIComponent(d).split("."));b.getCurrentPagefromUrl=function(){void 0!=h.search().page?(b.currentPage=h.search().page-1,b.countSelector=h.search().page+""):(b.currentPage=0,b.countSelector="1")};b.getCurrentPagefromUrl();b.init=function(a){b.categoryPagesListJson=JSON.parse(a)};b.sortBy="desc-sku-disc-percentage"==b.viewResultsTypeBy?"discountDesc":"relevance";
var I="";b.sortProducts=function(){b.allProductDetailsUpdated||b.loadAllResults?b.processSortProducts():b.updateAllProductDetails().then(function(){b.processSortProducts()},function(a){spl_commonLogger("In sortProducts: sort activity failed ")})};b.processSortProducts=function(){if("relevance"!=b.sortBy&&""==I||I.length!=b.productJSON.length)I=b.productJSON;spl_commonLogger("In processSortProducts - sortBy: "+b.sortBy);b.productJSON="titleAsce"==b.sortBy?k(b.productJSON,"name",!1):"titleDesc"==b.sortBy?
k(b.productJSON,"name",!0):"priceAsce"==b.sortBy?k(b.productJSON,"price",!1):"priceDesc"==b.sortBy?k(b.productJSON,"price",!0):"discountAsce"==b.sortBy?k(b.productJSON,"percentageOff",!1):"discountDesc"==b.sortBy?k(b.productJSON,"percentageOff",!0):I;spl_commonLogger("In sortProducts function - product json lenth : "+b.productJSON.length);try{var a={};a.dropdownValue=b.sortBy;var c=window.aa.createEvent("SORT_BY",a);window.dispatchEvent(c)}catch(R){console.log("Error while triggering analytics SORT_BY event")}};
b.numberOfPages=function(){if(b.productJSON&&b.pageSize)return Math.ceil(b.productJSON.length/b.pageSize)};b.previousPage=function(){b.allProductDetailsUpdated||b.loadAllResults?b.processPreviousPage():b.updateAllProductDetails().then(function(){b.processPreviousPage()},function(a){spl_commonLogger("In previousPage: previous page loading failed ")})};b.processPreviousPage=function(){""!=b.customCampaignQuery&&(spl_commonLogger("previousPage func - selectedbrandFilter "+E),b.fetchCampaignDetails(b.customCampaignQuery,
E,!0));document.body.scrollTop=0;document.documentElement.scrollTop=0;--b.currentPage;b.countSelector=parseInt(b.countSelector)-1+"";h.search("page",b.currentPage+1);spl_commonLogger("In previousPage function - $scope.currentPage value : "+b.currentPage);$("#plpProductDiv div:first-child").find("div.productListItem a:first").addClass("focusOutline").focus()};b.nextPage=function(){b.allProductDetailsUpdated||b.loadAllResults?b.processNextPage():b.updateAllProductDetails().then(function(){b.processNextPage()},
function(a){spl_commonLogger("In previousPage: previous page loading failed ")})};b.processNextPage=function(){""!=b.customCampaignQuery&&(spl_commonLogger("nextPage func - selectedbrandFilter  "+E),b.fetchCampaignDetails(b.customCampaignQuery,E,!0));document.body.scrollTop=0;document.documentElement.scrollTop=0;b.currentPage+=1;b.countSelector=parseInt(b.countSelector)+1+"";h.search("page",b.currentPage+1);spl_commonLogger("In nextPage function - $scope.currentPage value : "+b.currentPage);$("#plpProductDiv div:first-child").find("div.productListItem a:first").addClass("focusOutline").focus()};
b.goOnPage=function(){0!=b.productJSON.length&&(b.allProductDetailsUpdated||b.loadAllResults?b.processGoOnPage():b.updateAllProductDetails().then(function(){b.processGoOnPage()},function(a){spl_commonLogger("In previousPage: previous page loading failed ")}))};b.processGoOnPage=function(){""!=b.customCampaignQuery&&(spl_commonLogger("goOnPage func - selectedbrandFilter  "+E),b.fetchCampaignDetails(b.customCampaignQuery,E,!0));document.body.scrollTop=0;document.documentElement.scrollTop=0;b.currentPage=
parseInt(b.countSelector)-1;b.countSelector=null!=b.countSelector?b.countSelector:"1";b.currentPage=isNaN(b.currentPage)?0:b.currentPage;h.search("page",b.currentPage+1);spl_commonLogger("In goOnPage function - $scope.currentPage value : "+b.currentPage);$("#plpProductDiv div:first-child").find("div.productListItem a:first").addClass("focusOutline").focus()};b.$watch("productsLimit",function(){b.pageSize=b.productsLimit?parseInt(b.productsLimit):12;b.initialPageSize=b.pageSize});b.updateAllProductDetails=
function(){spl_commonLogger("in updateAllProductDetails...");var a=q.defer();if(x&&x.products){for(var c=x.products[x.products.length-1].code,d=0;d<x.products.length;d++)b.getProductDetail(x.products[d],d).then(function(b){b==c&&a.resolve()});b.allProductDetailsUpdated=!0}return a.promise};b.getProductDetail=function(a,c){spl_commonLogger("in getProductDetail...");var d=q.defer(),g=a.code,f=a.listOfSkuId,h=e.getSessionVariable(g);null==h?e.getBaseProductInfo(g,f).then(function(){h=e.getSessionVariable(g);
null!=h?(b.productInfo[a.code]=h,b.addPriceInfoToProducts(h,a,c)):spl_commonLogger("Product "+g+"not found in session.");d.resolve(a.code)},function(a){console.log("Product Info not found for: "+g+"response "+a)}):(b.productInfo[a.code]=h,b.addPriceInfoToProducts(h,a,c),d.resolve(a.code));return d.promise};b.addPriceInfoToProducts=function(a,c,d){spl_commonLogger("in addPriceInfoToProducts...");var e=void 0==b.viewResultsTypeBy||""==b.viewResultsTypeBy||"relevance"==b.viewResultsTypeBy?a.minPricedSKU:
a.maxDiscountPercentageSKU;""!=e&&void 0!=e?(a=b.getProductPrice(e),a.prices&&(c.price=a.prices.sale.amount,c.price<b.min&&(b.min=Math.floor(a.prices.sale.amount)),c.price>b.max&&(b.max=Math.ceil(a.prices.sale.amount))),a.percentageOff&&(c.percentageOff=a.percentageOff,"desc-sku-disc-percentage"==b.viewResultsTypeBy&&z.push(c))):(spl_commonLogger("In addPriceInfoToProducts function - sessionBaseProductInfo : ",a),c.percentageOff=0);d+1==x.products.length&&("desc-sku-disc-percentage"==b.viewResultsTypeBy&&
(b.productJSON=z,b.getFacets(z),spl_commonLogger("In addPriceInfoToProducts function - discounted product json length  : "+b.productJSON.length)),F=b.productJSON.length,b.lowerPriceBound=b.min,spl_commonLogger("min price : "+b.min),b.upperPriceBound=b.max,spl_commonLogger("max price : "+b.max))};b.getProductPrice=function(a){a=e.getSessionVariable(a);return null!=a?a:""};var O=[];b.sliderChange=function(){void 0!=b.productJSON&&(b.allProductDetailsUpdated||b.loadAllResults?b.processSliderChange():
b.updateAllProductDetails().then(function(){b.processSliderChange()},function(a){spl_commonLogger("In sliderChange: price slider loading failed ")}))};O=[];b.processSliderChange=function(){spl_commonLogger("in processSliderChange...");spl_commonLogger("productJSON.length "+b.productJSON.length);spl_commonLogger("noOfProducts "+F);try{if(b.lowerPriceBound&&b.upperPriceBound&&-1==N.indexOf("currencySign,"+b.currencySign+","+b.lowerPriceBound+" to "+b.upperPriceBound+",priceRange")){N.push("currencySign,"+
b.currencySign+","+b.lowerPriceBound+" to "+b.upperPriceBound+",priceRange");M.selectedPriceLabel=N;var a=window.aa.createEvent("SORT_OPTION",M);window.dispatchEvent(a)}}catch(R){console.log("Error while triggering analytics SORT_OPTION event")}b.productJSON.length==F?O=b.productJSON:0<O.length&&(b.productJSON=O);a=[];for(var c=0;c<b.productJSON.length;c++)(parseFloat(b.productJSON[c].price)>=b.lowerPriceBound&&parseFloat(b.productJSON[c].price)<=b.upperPriceBound||void 0==b.productJSON[c].price)&&
a.push(b.productJSON[c]);b.productJSON=a;spl_commonLogger("In sliderChange function - product json length : "+b.productJSON.length);b.getFilteredProducts(a)};b.$watch("lowerPriceBound",function(){spl_commonLogger("in lowerPriceBound");b.selectedMinPrice=parseInt(b.lowerPriceBound);b.allProductDetailsUpdated?b.sliderChange():b.loadAllResults&&b.sliderChange()});b.$watch("upperPriceBound",function(){spl_commonLogger("in upperPriceBound");b.selectedMaxPrice=parseInt(b.upperPriceBound);b.allProductDetailsUpdated?
b.sliderChange():b.loadAllResults&&b.sliderChange()});b.$watch("selectedMinPrice",function(){spl_commonLogger("in selectedMinPrice...");null!=b.selectedMinPrice&&(b.lowerPriceBound=b.selectedMinPrice)});b.$watch("selectedMaxPrice",function(){spl_commonLogger("in selectedMaxPrice...");null!=b.selectedMaxPrice&&(b.upperPriceBound=b.selectedMaxPrice)});b.updatePriceSliderLimits=function(){spl_commonLogger("in updatePriceSliderLimits");b.allProductDetailsUpdated||b.loadAllResults||b.updateAllProductDetails()};
b.processCategoryListing=function(d,g){if(void 0!=d){b.selectedFacetsLabel=[];b.sortBy="desc-sku-disc-percentage"==b.viewResultsTypeBy?"discountDesc":"relevance";g=":brandCode:"+d.id;var f="";if(d.selected)if(""==B)f=g;else{var h=B.split(":brandCode:");f=!1;for(var q=0;q<h.length;q++)h[q]==d.id&&(f=!0);f=f?g:B+g}else if(!d.selected)for(h=B.split(":brandCode:"),f="",q=0;q<h.length;q++)""!=h[q]&&h[q]!=d.id&&(f=f+":brandCode:"+h[q]);spl_commonLogger("newBrandURLAttribute "+f);spl_commonLogger("brandURLAttribute "+
B);f=""!=f?f:":brandCode:GT:brandCode:WD:brandCode:WDC:brandCode:SD:brandCode:Incase:brandCode:SDP";G=G.replace(""!=B?B:L,""!=B?f:f+"\x26customQuery\x3d*");B=f}else void 0==d&&g&&(b.selectedFacetsLabel=[],G=G.replace(""!=B?B:L,":brandCode:GT:brandCode:WD:brandCode:WDC:brandCode:SD:brandCode:Incase:brandCode:SDP"),B=":brandCode:GT:brandCode:WD:brandCode:WDC:brandCode:SD:brandCode:Incase:brandCode:SDP");e.getCategoryListing(G).then(function(d){b.allProductDetailsUpdated=!1;x=d;z=[];spl_commonLogger("In watch filterOptions - sessionCategoryListing products length "+
x.products.length);if(0==x.products.length)b.productJSON=[],F=0,b.dataLoaded=!0;else{"desc-sku-disc-percentage"!=b.viewResultsTypeBy&&b.getFacets(x.products);spl_commonLogger("In watch filterOptions - loadAllResults : "+b.loadAllResults);if(b.loadAllResults)for(d=0;d<x.products.length;d++)b.getProductDetail(x.products[d],d);else{var e=x.products.slice(0!=b.currentPage?b.currentPage*a.BLOCK_SIZE-b.currentPage:b.currentPage*a.BLOCK_SIZE,(b.currentPage+1)*a.BLOCK_SIZE);for(d=0;d<e.length;d++)b.getProductDetail(e[d],
d)}F=b.productJSON.length;if(""!=b.customCampaignQuery){E="";e=B.split(":brandCode:");for(d=1;d<e.length;d++){var g=p("filter")(b.brandFiltersJson.brandmapping,{id:e[d]},!0)[0];g.selected&&-1==b.selectedFacetsLabel.indexOf(g.id+","+g.key+","+g.value+","+g.filterType)?(E+=(""!=E?",":"")+g.id,b.selectedFacetsLabel.push(g.id+","+g.key+","+g.value+","+g.filterType)):!g.selected&&-1<b.selectedFacetsLabel.indexOf(g.id+","+g.key+","+g.value+","+g.filterType)&&b.selectedFacetsLabel.splice(b.selectedFacetsLabel.indexOf(g.id+
","+g.key+","+g.value+","+g.filterType),1)}b.fetchCampaignDetails(b.customCampaignQuery,E)}d={};try{if(0<b.selectedFacetsLabel.length){d.selectedFacetLabel=b.selectedFacetsLabel;var f=window.aa.createEvent("SORT_OPTION",d);window.dispatchEvent(f)}}catch(U){console.log("Error while triggering analytics SORT_OPTION event")}$("li.toggleable").addClass("hidden");$("li.filter-less").addClass("hidden");$("li.filter-more").removeClass("hidden");c.isPublishInstance()&&A()}},function(a){console.log("Error while getting product list.");
console.log(a);b.dataLoaded=!0})};b.$watch("filterOptions",function(){b.categoryPrefix="cat_";var a=""!=b.resultSize?b.resultSize:"1000",c="";if(b.customQuery){c=b.customQuery;L="";for(var d=c.split(":"),e=0;e<d.length;e++)d[e].startsWith(b.categoryPrefix)&&(b.storeCategory=d[e]),b.selectorVal&&(d[e].startsWith("SD")||d[e].startsWith("WDC")||d[e].startsWith("WD")||d[e].startsWith("GT")||d[e].startsWith("Incase")||d[e].startsWith("SDP"))&&(L=L+":brandCode:"+d[e]);if(0<b.selectorVal.length){B="";for(d=
0;d<b.selectorVal.length;d++)if("SD"==b.selectorVal[d]||"WDC"==b.selectorVal[d]||"WD"==b.selectorVal[d]||"GT"==b.selectorVal[d]||"Incase"==b.selectorVal[d]||"SDP"==b.selectorVal[d])for(B=B+":brandCode:"+b.selectorVal[d],e=0;e<b.brandFiltersJson.brandmapping.length;e++)b.brandFiltersJson.brandmapping[e].id==b.selectorVal[d]&&(b.brandFiltersJson.brandmapping[e].selected=!0);c=c.replace(L,B+"\x26customQuery\x3d*")}}G="pageSize\x3d"+a+"\x26query\x3d"+c;spl_commonLogger("In watch filterOptions - uri : "+
G);b.processCategoryListing()});b.fetchCampaignDetails=function(a,d,e){if(H!=d||e)H=d,l.getCampaignDetails(a+b.campaignQueryPath,d).then(function(a){spl_commonLogger("In fetchCampaignDetails function - response : "+a);b.campaignDetails=a;b.pageSize=b.customCampaignQuery&&!b.campaignDetails.error?b.initialPageSize-1:b.initialPageSize;c.isPublishInstance()&&((a=document.getElementById("plpProductDiv").getElementsByClassName("clp-campaign-tile")[0])&&void 0!=a&&(a.style.display="none"),a=window.aa.createEvent("TRIGGER_VIEW",
{target_element_class:"clp-campaign-tile",target_element_id:"plpProductDiv"}),window.dispatchEvent(a))},function(a){spl_commonLogger("Error while getting campaign details.");spl_commonLogger(a)})};b.showPriceFilter=function(){return b.filterOptions.includes("price")};b.getRegionalFilterLabel=function(b,c){var d=e.getSessionVariable(a.PRODUCT_REFERENCES);return d&&d.allCategories&&d.allCategories[b]?d.allCategories[b]:c};b.getCapacityRange=function(a){spl_commonLogger("In getCapacityRange function - productCapacity : "+
a);if(void 0==a||-1==a.indexOf(" "))spl_commonLogger("Prod capacity skipped as product capacity is undefined or syntax not valid");else if(b.capacityFilterRange.capacity){for(var c=!1,d,e,g,f=a.split(" ")[0],h=a.split(" ")[1],q=b.capacityFilterRange.capacity.length-1;0<=q;q--)if(d=b.capacityFilterRange.capacity[q].value.split("-")[0],g=d.split("_")[0].startsWith("\x3e")||d.split("_")[0].startsWith("\x3c")?d.split("_")[0].substring(1):d.split("_")[0],a=d.split("_")[1],d=d.split("_")[0].startsWith("\x3c")?
parseInt(f)<=parseInt(g):parseInt(f)>=parseInt(g),spl_commonLogger("In getCapacityRange function - val : "+d),h==a&&d){c=!0;e=q;break}if(c)return e}return null};var J=[];b.getFacets=function(a){var c=0!=b.filterOptions.length;spl_commonLogger("In getFacets function - dialogHasFilter : "+c);t=a;b.filterLabels=[];var d=!1,e=!1;for(a=0;a<t.length;a++){spl_commonLogger("getFacets method - product code: "+t[a].code);var g=b.filterOptions.split(",");for(d=0;d<g.length;d++){var f=g[d];spl_commonLogger("getFacets method - filterName: "+
f);if(t[a][f])for(var q=0;q<t[a][f].length;q++)if(!f.startsWith("cat_")&&!f.startsWith("vc-")&&t[a][f][q]&&t[a][f][q].code){e=!1;for(var h=0;h<b.filterLabels.length;h++)if(b.filterLabels[h].key==t[a][f][q].code&&b.filterLabels[h].filterType==f){e=!0;break}0!=b.filterLabels.length&&e||(-1==D.indexOf(f)&&(D=D+(0!=D.length?",":"")+f),h=t[a][f][q].code,e="interfaceList"==f||"connectorList"==f?f+"-"+h:h,b.filterLabels.push({filterType:f,filterHeading:f,key:h,id:e,value:t[a][f][q].name,selected:-1!=b.selectorVal.indexOf(e),
sequence:a}),spl_commonLogger("filter - code: "+t[a][f][q].code+" value: "+t[a][f][q].name))}}if(void 0!=t[a].categories)for(g=0;g<t[a].categories.length;g++){if(t[a].categories[g].code.startsWith(b.categoryPrefix)&&t[a].categories[g].code!=b.storeCategory&&t[a].categories[g].code!=b.productCategoryCode){d=!1;for(h=0;h<b.filterLabels.length;h++)if(b.filterLabels[h].value==t[a].categories[g].name){d=!0;break}0!=b.filterLabels.length&&d||(b.filterLabels.push({filterType:b.categoryPrefix,filterHeading:"Type",
key:t[a].categories[g].code,id:t[a].categories[g].code.replace(b.categoryPrefix,""),value:t[a].categories[g].name,selected:-1!=b.selectorVal.indexOf(t[a].categories[g].code.replace(b.categoryPrefix,"")),sequence:t[a].categories[g].sequence}),spl_commonLogger("Type filter - code: "+t[a].categories[g].code+" value: "+t[a].categories[g].name))}if(t[a].categories[g].code.startsWith("vc-")){d=!1;for(h=0;h<J.length;h++)if(J[h].code==t[a].categories[g].code){d=!0;break}d||J.push({code:t[a].categories[g].code,
name:t[a].categories[g].name})}if(t[a].categories[g].code.startsWith("vvc-")){q=f="";e=!1;for(h=0;h<b.filterLabels.length;h++)if(b.filterLabels[h].key==t[a].categories[g].code){e=!0;break}if(0==b.filterLabels.length||!e){d=t[a].categories[g].code;d=d.substring(1,d.length);for(h=0;h<J.length;h++)if(d.startsWith(J[h].code)){f=J[h].code;q=J[h].name;break}c||-1!=b.filterOptions.indexOf(f)||(b.filterOptions=b.filterOptions+(0!=b.filterOptions.length?",":"")+f);""!=f&&(!c||-1<b.filterOptions.indexOf(f))&&
("vc-capacity"!=f&&b.filterLabels.push({filterType:f,filterHeading:q,key:t[a].categories[g].code,id:t[a].categories[g].code.replace("v"+f+"-",""),value:t[a].categories[g].name,selected:-1!=b.selectorVal.indexOf(t[a].categories[g].code.replace("v"+f+"-","")),sequence:t[a].categories[g].sequence}),"vc-capacity"==f&&(b.showIndividualCapacityFilter?b.filterLabels.push({filterType:f,filterHeading:q,key:t[a].categories[g].code,id:t[a].categories[g].code.replace("v"+f+"-",""),value:t[a].categories[g].name,
selected:-1!=b.selectorVal.indexOf(t[a].categories[g].code.replace("v"+f+"-","")),sequence:t[a].categories[g].sequence}):(d=b.getCapacityRange(t[a].categories[g].name),spl_commonLogger("In getFacets function - index : "+d),null!=d&&(h=p("filter")(b.filterLabels,{value:b.capacityFilterRange.capacity[d].label}),0==h.length&&b.filterLabels.push({filterType:f,filterHeading:q,key:b.capacityFilterRange.capacity[d].value,id:b.capacityFilterRange.capacity[d].value,value:b.capacityFilterRange.capacity[d].label,
selected:-1!=b.selectorVal.indexOf(b.capacityFilterRange.capacity[d].value),sequence:t[a].categories[g].sequence})))),spl_commonLogger(f+" filter - code: "+t[a].categories[g].code+" value: "+t[a].categories[g].name))}}}else spl_commonLogger("product categories not found for: "+t[a].code)}a=b.filterOptions;spl_commonLogger("In getFacets function - filterOptions : "+a);b.filterLabels.sort(function(a,b){return a.sequence-b.sequence});c=a.split(",");b.facetLabels=[];for(a=0;a<c.length;a++)c[a]==b.categoryPrefix||
-1<D.indexOf(c[a])?(h=p("filter")(b.filterLabels,{filterType:c[a]}),h.length&&b.facetLabels.push({key:c[a],value:c[a],filterView:r(c[a]),filterCount:h.length,filter:h})):(h=p("filter")(J,{code:c[a]}),d=p("filter")(b.filterLabels,{filterType:c[a]}),h.length&&b.facetLabels.push({key:h[0].code,value:h[0].name,filterView:r(h[0].code),filterCount:d.length,filter:d}));b.productJSON=t;b.dataLoaded=!0;spl_commonLogger("In getFacets function - product json length : "+b.productJSON.length)};document.addEventListener("mouseover",
function(){angular.element(".productListItem").mouseover(function(){var a=window.innerWidth,b=$(this).parent().height();992<a&&($(this).parent(".relative").css("height",b),$(this).addClass("hover:md:absolute CatThumbnail"),$(this).find(".productColorVarient").removeClass("md:h-0"))})});document.addEventListener("mouseout",function(){angular.element(".productListItem").mouseout(function(){992<window.innerWidth&&($(this).parent(".relative").css("height","auto"),$(this).removeClass("hover:md:absolute CatThumbnail"),
$(this).find(".productColorVarient").addClass("md:h-0"))})});b.productListingHover=function(){angular.element(".productListItem").mouseover(function(){var a=window.innerWidth,b=$(this).parent().height();992<a&&($(this).parent(".relative").css("height",b),$(this).addClass("hover:md:absolute CatThumbnail"),$(this).find(".productColorVarient").removeClass("md:h-0"))});angular.element(".productListItem").mouseout(function(){992<window.innerWidth&&($(this).parent(".relative").css("height","auto"),$(this).removeClass("hover:md:absolute CatThumbnail"),
$(this).find(".productColorVarient").addClass("md:h-0"))})};b.resetAllPoductfilter=function(a){angular.forEach(b.filterLabels,function(a){a.selected&&(a.selected=!1)});var c=!1;angular.forEach(b.brandFiltersJson.brandmapping,function(a){a.selected&&(c=!0,a.selected=!1)});b.selectedFacetsLabel=[];c?b.processCategoryListing(void 0,!0):b.getFilteredProducts()};b.clearProductfilter=function(a,c){$(a.currentTarget).closest(".filterList").find("ul").find("li").each(function(){1==$(this).find('input[type\x3d"checkbox"]').prop("checked")?
$(this).find('input[type\x3d"checkbox"]').click():1==$(this).find('input[type\x3d"radio"]').prop("checked")&&(v(c,null),b.getFilteredProducts())})};b.uncheckFilterCheckbox=function(a){var c=a.split(",")[0],d=a.split(",")[1],e=a.split(",")[2],g=null;angular.forEach(b.filterLabels,function(a){a.selected&&a.id==c&&a.key==d&&a.value==e&&(a.selected=!1,g=a,b.getFilteredProducts(void 0,void 0,void 0,g))});angular.forEach(b.brandFiltersJson.brandmapping,function(a){a.selected&&a.id==c&&a.key==d&&a.value==
e&&(a.selected=!1,b.processCategoryListing(a))})};d=angular.element(m);d.bind("resize",function(){u()});u();b.openProductFilterMobile=function(){angular.element(".filter-overlay").show();angular.element("body").addClass("overflow-hidden");angular.element(".left-filter").removeClass("hidden");u()};b.closeProductFilterMobile=function(){angular.element(".filter-overlay").removeAttr("style");angular.element("body").removeClass("overflow-hidden");angular.element(".left-filter").addClass("hidden");angular.element(".filterItemWrap").removeAttr("style")};
d=angular.element(m);d.bind("resize",function(){768<m.innerWidth&&angular.element(".close-productList-filter").triggerHandler("click")});b.isColorPresent=function(a){b.colorFound=!1;void 0!=a&&void 0!=a["vc-color"]&&(b.colorFound=!0);return b.colorFound};b.getFilteredProducts=function(a,c,d,e){b.allProductDetailsUpdated||b.loadAllResults?b.processGetFilteredProducts(a,c,d,e):b.updateAllProductDetails().then(function(){b.processGetFilteredProducts(a,c,d,e)},function(a){spl_commonLogger("In getFilteredProducts: not able to get filtered products ")})};
b.processGetFilteredProducts=function(a,d,e,g){var f=!1;void 0!=d&&v(d,e);var h=[];I="";void 0!=g&&g.selected?(f=!0,b.selectedFacetsLabel.push(g.id+","+g.key+","+g.value+","+g.filterType)):void 0==g||g.selected||(f=!0,b.selectedFacetsLabel.splice(b.selectedFacetsLabel.indexOf(g.id+","+g.key+","+g.value+","+g.filterType),1));angular.forEach(b.filterLabels,function(a){if(a.selected){for(var c=!1,d=0;d<h.length;d++)h[d].key==a.filterType&&(h[d].value=h[d].value+","+("vc-capacity"!=a.filterType?a.value:
a.key),spl_commonLogger("In getFilteredProducts function - selectedFacets info - id : "+a.id+" key "+a.key+" value "+a.value),-1==b.selectedFacetsLabel.indexOf(a.id+","+a.key+","+a.value+","+a.filterType)&&(f=!0,b.selectedFacetsLabel.push(a.id+","+a.key+","+a.value+","+a.filterType)),c=!0);0!=h.length&&c||(spl_commonLogger("In getFilteredProducts function - selectedFacets info - id : "+a.id+" key "+a.key+" value "+a.value),-1==b.selectedFacetsLabel.indexOf(a.id+","+a.key+","+a.value+","+a.filterType)&&
(f=!0,b.selectedFacetsLabel.push(a.id+","+a.key+","+a.value+","+a.filterType)),h.push({key:a.filterType,value:"vc-capacity"!=a.filterType?a.value:a.key,filterType:w(a.filterType)}))}});d={};try{if(0<b.selectedFacetsLabel.length&&f){d.selectedFacetLabel=b.selectedFacetsLabel;M=d;var q=window.aa.createEvent("SORT_OPTION",d);window.dispatchEvent(q)}}catch(V){console.log("Error while triggering analytics SORT_OPTION event")}spl_commonLogger("In getFilteredProducts function - filteredProducts value : "+
a);a=void 0!=a?a:t;q=[];spl_commonLogger("In getFilteredProducts function - selectedFacetsArray length "+h.length);for(d=0;d<a.length;d++){e=!0;for(g=0;g<h.length;g++)if(void 0!=a[d].categories){e=!1;for(var n=0;n<a[d].categories.length;n++)if("vc-capacity"!=h[g].key&&a[d].categories[n].code.includes(h[g].key)){for(var r=h[g].value.split(","),l=0;l<r.length;l++)if("or"==h[g].filterType&&r[l]==a[d].categories[n].name){e=!0;break}else if("and"==h[g].filterType){e=!1;for(n=0;n<a[d].categories.length;n++)r[l]==
a[d].categories[n].name&&(e=!0);if(!e)break}if(e||"and"==h[g].filterType&&!e)break}else if("vc-capacity"==h[g].key&&a[d].categories[n].code.includes(h[g].key)){if(b.showIndividualCapacityFilter){r=h[g].value.split(",");for(l=0;l<r.length;l++)if("or"==h[g].filterType&&r[l]==a[d].categories[n].code){e=!0;break}else if("and"==h[g].filterType){e=!1;for(n=0;n<a[d].categories.length;n++)r[l]==a[d].categories[n].code&&(e=!0);if(!e)break}if(e||"and"==h[g].filterType&&!e)break}else for(r=h[g].value.split(","),
l=0;l<r.length;l++){var m=a[d].categories[n].name;var k=m.split(" ")[0];m=m.split(" ")[1];var u=r[l].split("-")[0];if(u.split(" ")[0].startsWith("\x3e")||u.split(" ")[0].startsWith("\x3c")){u=u.substring(1);var p=u.split("_")[0];u=u.split("_")[1];k=r[l].split("-")[0].split("_")[0].startsWith("\x3e")?parseInt(k)>parseInt(p):parseInt(k)<parseInt(p)}else{p=u.split("_")[0];u=u.split("_")[1];var F=r[l].split("-")[1].trim();var C=F.split("_")[0];F.split("_");k=parseInt(k)>=parseInt(p)&&parseInt(k)<=parseInt(C)}if(m==
u&&k){e=!0;break}}if(e)break}k=D.split(",");for(m=0;m<k.length;m++)if(p=k[m],h[g].key==p&&void 0!=a[d][p])for(n=0;n<a[d][p].length;n++){r=h[g].value.split(",");for(l=0;l<r.length;l++)if("or"==h[g].filterType&&r[l]==a[d][p][n].name){e=!0;break}else if("and"==h[g].filterType){e=!1;for(u=0;u<a[d][p].length;u++)r[l]==a[d][p][u].name&&(e=!0);if(!e)break}if(e||"and"==h[g].filterType&&!e)break}if(!e)break}e&&q.push(a[d])}b.productJSON=q;spl_commonLogger("In getFilteredProducts function - product json length : "+
b.productJSON.length);0<h.length?b.sortBy="desc-sku-disc-percentage"==b.viewResultsTypeBy?"discountDesc":"relevance":"desc-sku-disc-percentage"==b.viewResultsTypeBy&&(b.sortBy="discountDesc",b.sortProducts());c.isPublishInstance()&&A()};b.showLessMore=function(a){a=angular.element(a.target);a.hasClass("less")?(a.addClass("hidden"),a.prev().removeClass("hidden")):(a.addClass("hidden"),a.next().removeClass("hidden"));a.siblings("li.toggleable").toggleClass("hidden")};b.openCategoryPage=function(a,c,
d){a.preventDefault();a=c.isCurrentPage?"":b.rewritePageURL(c.path);c={};try{if(""!=a){c.categoryPageUrl=a;var e=window.aa.createEvent("SORT_CATEGORY",c);window.dispatchEvent(e)}}catch(S){console.log("Error while triggering analytics SORT_CATEGORY event")}m.open(a,d)};b.openFilterSelectedPage=function(a,c,d,e){a.preventDefault();c=""!=d&&void 0!=d?b.rewritePageURL(c)+"#"+d:b.rewritePageURL(c);a={};try{if(0<b.selectedFacetsLabel.length){a.selectedFacetLabel=b.selectedFacetsLabel;var g=window.aa.createEvent("SORT_FILTER",
a);window.dispatchEvent(g)}}catch(T){console.log("Error while triggering analytics SORT_FILTER event")}m.open(c,e)};b.fireCampaignAnalyticsEvent=function(a,b,d){"linkTo"==b.viewType&&a.preventDefault();try{var e=window.aa.createEvent("PLP_Ad",b);window.dispatchEvent(e)}catch(S){console.log("Error while triggering analytics PLP_Ad event")}"linkTo"==b.viewType&&m.open(c.rewritePageURL(b.campaignUrl),d)};b.rewritePageURL=function(a){if(!angular.isUndefined(b.selectorVal)&&0<b.selectorVal.length&&C){var d=
angular.element(".product-listing .wdAngularApp").find(".accordionUpArrow");null!=d&&0<d.length&&(C=!1,d.removeClass("accordionUpArrow").addClass("accordionDownArrow"),d.next().addClass("hidden"),b.selectorVal.forEach(function(a){a=a.startsWith("\x3c")||a.startsWith("\x3e")?CSS.escape(a):a;angular.element("#"+a).closest(".filterItems").find(".accordionDownArrow").removeClass("accordionDownArrow").addClass("accordionUpArrow");angular.element("#"+a).closest(".filterList").removeClass("hidden")}))}return void 0!=
a&&0<a.trim().length?c.rewritePageURL(a):a};b.getFilteredProductBasedOnSelectors=function(){!angular.isUndefined(b.selectorVal)&&0<b.selectorVal.length&&(b.getFilteredProducts(),F=b.productJSON.length)};if(window.history&&window.history.pushState)$(window).on("popstate",function(){b.getCurrentPagefromUrl();b.$apply()});b.openQuickViewBtn=function(a,b){angular.element(".StoreQuickView").scope().openQuickViewBtn(a);angular.element(b.currentTarget).attr("aria-expanded",!0);roleList();setTimeout(function(){tabKeyFunctionality("#sidebar-wrapper")},
2E3);$(".sidebar-inner-wrap button:first").focus()};b.unescape=function(a){return b.getUnEscapedHTMLContent(y(a).replace(/\\/g,""))};b.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return f.trustAsHtml(a)};b.openCampaignModal=function(a,d){var e=d.campaignUrl;$(a).find("iframe").attr("src",c.rewritePageURL(e));$(a).removeClass("hidden");$("body").addClass("overflow-hidden");b.fireCampaignAnalyticsEvent(void 0,d,void 0)};b.closeCampaignModal=function(a){$(a).find("iframe").attr("src",
"");$(a).addClass("hidden");$("body").removeClass("overflow-hidden")}}]);function spl_commonLogger(a){-1<window.location.search.indexOf("debugCategoryListing\x3dtrue")&&console.log("SPL: "+a)}function isNumber(a){a=a.which?a.which:event.keyCode;return 31<a&&(48>a||57<a)?!1:!0}
$(document).ready(function(){$(document).on("click",".product-listing .filterHeader",function(){$(this).hasClass("accordionUpArrow")?$(this).attr("aria-expanded","true"):$(this).hasClass("accordionDownArrow")&&$(this).attr("aria-expanded","false")})});var storeQuickViewApp=angular.module("StoreQuickViewApp",["CommerceApp","ngSanitize","StoreProductCartApp","CommonUtilApp"]);storeQuickViewApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
storeQuickViewApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);storeQuickViewApp.directive("custompromotionDir",function(){return function(a,c,b){a.initCustomPromotion(b.customPromotionsJsonString)}});
storeQuickViewApp.controller("StoreQuickViewAppController",["$scope","$sce","$http","$location","$timeout","$filter","CommerceService","COMMERCE_CONSTANTS","StoreProductCartService","CommonUtilService","safeApply",function(a,c,b,d,e,l,f,k,p,m,h){function q(b,c){qv_commonLogger("in findSku : previous selected cateories ::",b);qv_commonLogger("in findSku : current clicked category ::",c);var d=[],e;for(e in a.qvProduct.variants){var g=a.qvProduct.variants[e].categories,f;for(f in g)-1<g[f].id.indexOf(c)&&
(a.qvProduct.variants[e].count=0,a.qvProduct.variants[e].sku=e,d.push(a.qvProduct.variants[e]))}qv_commonLogger("in findSku : filtered mapping ::",d);1<d.length&&(d.forEach(function(a,c){var e=[];a=a.categories;for(var g in a)-1<b.indexOf(a[g].id)&&e.push(a);d[c].count=e.length}),d.sort(function(a,b){return b.count-a.count}));return d[0].sku}function n(){if(!a.checkInventoryStatusAndSelectDefaultVariantFlag){qv_commonLogger("Inventory is out of stock or null for default variant : ",a.currentSku);
qv_commonLogger("Filtering skus which has inventory to select updated default variant");var b=a.qvProduct.skuList.filter(function(a){var b=f.getSessionVariable(a);if(null!=b&&b.purchasable&&"Active"==b.productLifeCycle&&("inStock"==b.stockStatus||"lowStock"==b.stockStatus))return a});qv_commonLogger("checkInventoryStatusAndSelectDefaultVariant : Filtered Skus[inStock] :",b);0==b.length&&(b=a.qvProduct.skuList.filter(function(a){var b=f.getSessionVariable(a);if(null!=b&&b.purchasable&&("Active"==b.productLifeCycle&&
"backOrderStock"==b.stockStatus||"Pre"==b.productLifeCycle&&("preOrder"==b.stockStatus||"reserveNow"==b.stockStatus)))return a}),qv_commonLogger("checkInventoryStatusAndSelectDefaultVariant : Filtered Skus[backOrder,preOrder,reserveNow] :",b));a.checkInventoryStatusAndSelectDefaultVariantFlag=!0;0<b.length?(a.currentSku=b[0],a.qvActiveSkuObj=a.qvProduct.variants[a.currentSku],qv_commonLogger("Current Sku :: ",a.currentSku),qv_commonLogger("Active SKU obj :: ",a.qvActiveSkuObj),a.initSlick(!0),a.updateVariantCategoriesView(a.currentSku,
null),a.getPriceFrmInventory(),h(a),initVariantCategoryDropdown()):a.isCommerceServiceIssue=!0}}function g(){var a=f.getSessionVariable(k.AFFIRM_ALLOWED);if("undefined"==typeof affirm&&null!=a&&a)a={public_api_key:f.getAffirmPublicApiKey(),script:f.getAffirmScriptURL()},function(a,b,c,d,e,g,f){var h=a[c]||{},q=document.createElement(g),n=document.getElementsByTagName(g)[0],r=function(a,b,c){return function(){a[b]._.push([c,arguments])}};h[d]=r(h,d,"set");var l=h[d];h[e]={};h[e]._=[];l._=[];h[e][f]=
r(h,e,f);e=0;for(f="set add save post open empty reset on off trigger ready setProduct".split(" ");e<f.length;e++)l[f[e]]=r(h,d,f[e]);e=0;for(f=["get","token","url","items"];e<f.length;e++)l[f[e]]=function(){};q.async=!0;q.src=b[g];n.parentNode.insertBefore(q,n);delete b[g];l(b);a[c]=h}(window,a,"affirm","checkout","ui","script","ready");else if("undefined"!=typeof affirm&&"undefined"!=typeof affirm.ui)try{setTimeout(function(){affirm.ui.refresh()},1)}catch(w){spb_commonLogger("error while refreshing affirm ui")}}
a.isCatalogPurchasable=f.getPurchasableCatalog();a.wtbPagePath=m.rewritePageURL(f.getWTBPagePath());a.platformCommerceURL=f.getPlatformCommerceURL();a.notifyMeSuccess=!1;a.checkInventoryStatusAndSelectDefaultVariantFlag=!1;a.primaryCategoryGroup=null;a.secondaryCategoryGroup=null;a.selectedPrimaryCategory=null;a.selectedSecondaryCategory=null;a.ddItemSelected={};a.ddItemSelectedTitles={};a.isCandyrackEnabled=null;a.trustAsUrl=function(a){return c.trustAsResourceUrl(a)};a.initCustomPromotion=function(b){try{a.customPromotions=
JSON.parse(b),qv_commonLogger("custom promotions",a.customPromotios),h(a)}catch(w){console.error("PLP : error while parsing costom promo json",w)}};a.openQuickViewBtn=function(b){qv_commonLogger("Quick view called for product ",b);qv_commonLogger("getting product references");var c=f.getSessionVariable(k.PRODUCT_REFERENCES);null==c?(qv_commonLogger("calling get product references"),f.getProductReferences().then(function(){c=f.getSessionVariable(k.PRODUCT_REFERENCES);a.initQuickView(b,c)},function(a){qv_commonLogger("Issue in getting product references ",
a)})):a.initQuickView(b,c)};a.initQuickView=function(b,c){if(null!=c){qv_commonLogger("product object from reference service :: ",c[b]);a.qvProductCode=b;var d=c[b];d.variants={};d.skuList.forEach(function(a){d.variants[a]=c[a]});qv_commonLogger("Quick view product object :: ",d);a.qvProduct=d;b=0;for(var e in a.qvProduct.categories)0==b&&(a.primaryCategoryGroup=e),1==b&&(a.secondaryCategoryGroup=e),b++;a.currentSku=d.skuList[0];a.qvActiveSkuObj=d.variants[a.currentSku];qv_commonLogger("Current Sku :: ",
a.currentSku);qv_commonLogger("Active SKU obj :: ",a.qvActiveSkuObj);a.initCustomPromotionInfo(d);a.initSlick(!0);a.updateVariantCategoriesView(a.currentSku,null);a.getPriceFrmInventory();h(a);initVariantCategoryDropdown()}};a.initCustomPromotionInfo=function(b){qv_commonLogger("initCustomPromotionInfo");a.customPromotionInfo="";void 0!=a.customPromotions&&void 0!=a.customPromotions[b.attPromotionType]&&(a.customPromotionInfo=a.customPromotions[b.attPromotionType][b.attPromotionMessageId],qv_commonLogger(a.customPromotionInfo))};
a.initSlick=function(b){var c="";$(".quickViewSlider").hasClass("slick-initialized")&&($(".quickViewSlider").slick("unslick"),$(".quickViewSlider").html(""));a.qvActiveSkuObj.assetsList.forEach(function(b){c+='\x3cimg class\x3d"mx-auto" src\x3d"'+b+'.thumb.500.500.png" alt\x3d"'+a.qvActiveSkuObj.pageTitle+' Image"\x3e'});$(".quickViewSlider").append(c);"rtl"==$("html").attr("dir")?$(".quickViewSlider").slick({dots:!0,slidesToShow:1,rtl:!0}):$(".quickViewSlider").slick({dots:!0,slidesToShow:1});setTimeout(function(){$(".quickViewSlider").slick("refresh")},
1E3);b&&($("#sidebar-wrapper").addClass("toggled"),$("body").addClass("overflow-hidden"))};$(".quickViewModalClose").on("click",function(){$("#sidebar-wrapper").removeClass("toggled");$(this).closest("body").removeClass("overflow-hidden");a.checkInventoryStatusAndSelectDefaultVariantFlag=!1;$(".openQuickViewBtn").attr("aria-expanded",!1)});$(document).off("keydown",".quickViewModalClose").on("keydown",".quickViewModalClose",function(b){if(13===b.which||27===b.which)b.preventDefault(),$(".quickViewModalClose").trigger("click"),
$(".productListItem."+a.qvProductCode).find("a").first().focus()});$(document).on("click",function(a){0!=$(a.target).parents(".quickViewWrap").length||$(a.target).hasClass("disableOverFlowClick")||$(a.target).hasClass("fliter_header")||$(a.target).hasClass("mob-filter-button")||$(a.target).hasClass("quickViewModalClose")||$(a.target).hasClass("openQuickViewBtn")||$(".quickViewModalClose").trigger("click")});a.updateVariantCategoriesView=function(b,c){a.prevSelectedSkuCategories=[];null!=c&&($("li[data-variant-category].active-variant-axis").each(function(){$(this).attr("data-variant-category")!=
c&&a.prevSelectedSkuCategories.push($(this).attr("data-variant-category"))}),$("option[data-variant-category].active-variant-axis").each(function(){$(this).attr("data-variant-category")!=c&&a.prevSelectedSkuCategories.push($(this).attr("data-variant-category"))}));null==b&&(a.currentSku=q(a.prevSelectedSkuCategories,c),a.qvActiveSkuObj=a.qvProduct.variants[a.currentSku],qv_commonLogger("Current Sku :: ",a.currentSku),qv_commonLogger("Active SKU obj :: ",a.qvActiveSkuObj),a.initSlick(),h(a));var d=
[],e;for(e in a.qvActiveSkuObj.categories)d.push(a.qvActiveSkuObj.categories[e].id);qv_commonLogger("categoriesSelected :: ",d);null==c&&(c=d[0]);qv_commonLogger("selectedCategory :: ",c);var g={};d.forEach(function(b){g[b]=[];for(var c in a.qvProduct.variants){var d=a.qvProduct.variants[c].categories,e=[],f;for(f in d)e.push(d[f].id);-1<e.indexOf(b)&&(g[b]=g[b].concat(e))}null!=a.primaryCategoryGroup&&-1<b.indexOf(a.primaryCategoryGroup)&&(a.selectedPrimaryCategory=b);null!=a.secondaryCategoryGroup&&
-1<b.indexOf(a.secondaryCategoryGroup)&&(a.selectedSecondaryCategory=b)});qv_commonLogger("available :: ",g);spb_commonLogger("selected primary category :: ",a.selectedPrimaryCategory);for(e in a.qvProduct.categories)a.qvProduct.categories[e].data.map(function(a){-1<d.indexOf(a.id)?a.viewType=1:1<d.length?d.forEach(function(b){a.id.substr(0,a.id.indexOf("/"))!=b.substr(0,b.indexOf("/"))&&(-1<g[b].indexOf(a.id)?a.viewType=0:a.viewType=-1)}):a.viewType=0});qv_commonLogger("categories after viewtype updation :: ",
a.qvProduct.categories);a.qvProduct.categoriesNewView=a.qvProduct.categories;var f=0;for(e in a.qvProduct.categoriesNewView)0<f?a.qvProduct.categoriesNewView[e].data.map(function(b){-1<d.indexOf(b.id)&&(a.ddItemSelected[f]=b.id,a.ddItemSelectedTitles[f]=b.title);-1<d.indexOf(b.id)?b.showFlag=1:1<d.length?1==f?-1<g[a.selectedPrimaryCategory].indexOf(b.id)?b.showFlag=0:b.showFlag=-1:-1<g[a.selectedPrimaryCategory].indexOf(b.id)&&-1<g[a.selectedSecondaryCategory].indexOf(b.id)?b.showFlag=0:b.showFlag=
-1:b.showFlag=0}):a.qvProduct.categoriesNewView[e].data.map(function(b){-1<d.indexOf(b.id)&&(a.ddItemSelected[f]=b.id,a.ddItemSelectedTitles[f]=b.title);b.showFlag=b.id==a.selectedPrimaryCategory?1:0}),f++};a.handleVariantCategoryClick=function(b){a.updateVariantCategoriesView(null,b);a.getPriceFrmInventory();e(function(){$(".variant-category-select").each(function(){spb_commonLogger("updating dropdown with",a.ddItemSelected[$(this).attr("data-variant-category-number")]);$(this).val(a.ddItemSelected[$(this).attr("data-variant-category-number")]).trigger("change")});
roleList()})};a.getPriceFrmInventory=function(){a.inventory=null;a.isCommerceServiceIssue=!1;qv_commonLogger("in getPriceFrmInventory...");a.isCatalogPurchasable?(qv_commonLogger("catalog is purchasable"),null==f.getSessionVariable(a.currentSku)||null==f.getSessionVariable(a.currentSku).prices?(qv_commonLogger("getProductPrice from API for: "+a.qvProduct.skuList),f.getProductPrice(a.qvProduct.skuList.toString()).then(function(b){qv_commonLogger("product banner - got product price");a.isCommerceServiceIssue=
!1;a.inventory=f.getSessionVariable(a.currentSku);(null==a.inventory||null==a.inventory.productLifeCycle||!a.inventory.purchasable||"Active"==a.inventory.productLifeCycle&&"inStock"!=a.inventory.stockStatus&&"lowStock"!=a.inventory.stockStatus||"Pre"==a.inventory.productLifeCycle&&"preOrder"!=a.inventory.stockStatus&&"reserveNow"!=a.inventory.stockStatus)&&n();g();a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory);qv_commonLogger("current sku inventory:");qv_commonLogger(a.inventory)},function(b){qv_commonLogger("product banner - Rejection from commerce service");
a.isCommerceServiceIssue=!0;a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory)})):(qv_commonLogger("getProductPrice from session for "+a.currentSku),a.inventory=f.getSessionVariable(a.currentSku),(null==a.inventory||null==a.inventory.productLifeCycle||!a.inventory.purchasable||"Active"==a.inventory.productLifeCycle&&"inStock"!=a.inventory.stockStatus&&"lowStock"!=a.inventory.stockStatus||"Pre"==a.inventory.productLifeCycle&&"preOrder"!=a.inventory.stockStatus&&"reserveNow"!=a.inventory.stockStatus)&&
n(),g(),a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory),qv_commonLogger(a.inventory))):(a.triggerAnalyticsProductViewEvent(a.currentSku,a.inventory),qv_commonLogger("catalog is not purchasable"))};a.triggerAnalyticsProductViewEvent=function(b,c){var d={productSkuID:[],productSalePrice:[],productUnitPrice:[],productDiscount:[]};d.productSkuID.push(b);d.inventoryFlag="";null!=c&&null!=c.prices&&(d.productSalePrice.push(c.prices.sale.amount.toFixed(2).toString()),d.productUnitPrice.push(c.prices.list.amount.toFixed(2).toString()),
d.productDiscount.push((c.prices.list.amount-c.prices.sale.amount).toFixed(2)),d.inventoryFlag=c.stockStatus);d.productBrand=[];d.productBrand.push(a.qvActiveSkuObj.productBrand);d.productID=[];d.productID.push(a.qvProductCode);d.productName=[];d.productName.push(a.qvActiveSkuObj.pageTitle);d.productCategory=[];d.productCategory.push(a.qvActiveSkuObj.productCategory);d.productSkuID=[];d.productSkuID.push(a.currentSku);d.productSkuName=[];d.productSkuName.push(a.qvActiveSkuObj.variantTitle);b=[];c=
[];for(var e in a.qvActiveSkuObj.categories){c.push(a.qvActiveSkuObj.categories[e].attLabel+":"+a.qvActiveSkuObj.categories[e].attTitle);var g=a.qvActiveSkuObj.categories[e].id;g.match("vvc")&&g.substring(g.match("vvc").index,g.length)}0<c.length&&(d.productVariantCategory=[],d.productVariantCategory.push(c));if("undefined"!=typeof a.qvProduct.productCategories||b.length)d.productCategory=[],null!=a.qvProduct.productCategories&&(b=b.concat(a.qvProduct.productCategories)),d.productCategory.push(b);
e=f.getSessionVariable(k.USER_DETAILS);d.loginStatusFlag=null==e||"undefined"==typeof e.uid?"guest":"logged-in";try{qv_commonLogger("analytics product view data obj: ",d);var h=window.aa.createEvent("PROD_VIEW",d);window.dispatchEvent(h)}catch(t){console.log("Error while triggering analytics PROD_VIEW event")}};a.notifyMe=function(b,c){b=$(c.currentTarget).attr("data-target");a.notifyMeSuccess=!1;$(b).removeClass("hidden");$(b).find("form").trigger("reset");$(b).find("form .form-group").removeClass("filled invalidField");
$(".quickViewModalClose").trigger("click");$("body").addClass("overflow-hidden")};a.submitNotifyMeForm=function(b){b.preventDefault();b.stopPropagation();var c=$(b.currentTarget);a.email=c.find('[name\x3d"email"]').val();if(""==a.email||validateEmail(a.email)){var d={};d.formRef=c;d.errorMessage="Client validation Error | Invalid email";try{b=window.aa.createEvent("FORM_ERROR",d),window.dispatchEvent(b)}catch(v){console.log("Error while triggering analytics FORM_ERROR event")}}else $.ajax({url:a.platformCommerceURL+
a.notifyUrl+a.currentSku,type:"GET",data:c.serialize(),xhrFields:{withCredentials:!0}}).then(function(b){qv_commonLogger("Notify Me service response :"+b);if(-1<b.indexOf("success")){qv_commonLogger("showing success");a.notifyMeSuccess=!0;b={};b.formRef=c;try{spb_commonLogger("analytics form submitted data obj: "+b);var d=window.aa.createEvent("FORM_SUBMITTED",b);window.dispatchEvent(d)}catch(y){console.log("Error while triggering analytics FORM_SUBMITTED event")}}else qv_commonLogger("showing form"),
a.notifyMeSuccess=!1;h(a);c.trigger("reset")},function(b){c.trigger("reset");a.notifyMeSuccess=!1;c.trigger("reset");qv_commonLogger("Error in Notify Me Service",b)})};a.notifyMeClose=function(a){a=$(a.currentTarget);$(a).closest(".notifyme-modal").find(".wd-modal-close").trigger("click")};a.isB2BUser=function(){return f.getCustomerChannel()==k.B2B?!0:!1};a.addToCart=function(b,c){$(".quickViewModalClose").trigger("click");$(c.currentTarget).addClass("addToCartBtnActive");$(".cartwrapper").removeClass("hidden").addClass("updateCartData addToCartButton");
$(".cartwrapper").find(".cartShowInProgress").removeClass("hidden");if(a.isB2BUser()||"true"!=a.isCandyrackEnabled)a.triggerAddToCart(b,c,1,null);else{var d=f.getSessionVariable(k.REL_PROD+b);null==d?(qv_commonLogger("getting sku based related products"),f.getRelatedProductsDetail(b,!0).then(function(e){d=f.getSessionVariable(k.REL_PROD+b);qv_commonLogger("got sku based related products",d);0<d.length?angular.element(".product-cart .wdAngularApp").scope().showCandyRackProducts(a,d,b,c,1):a.triggerAddToCart(b,
c,1,null)})):(spb_commonLogger("product quick view - sku related products info found in session"),0<d.length?angular.element(".product-cart .wdAngularApp").scope().showCandyRackProducts(a,d,b,c,1):a.triggerAddToCart(b,c,1,null))}};a.triggerAddToCart=function(b,c,d,e){e&&(e.showCandyRackContainer=!e.showCandyRackContainer);768>$(window).width()&&$("html, body").animate({scrollTop:0},600);c=f.getSessionVariable(k.CART_DETAILS);var g=!1;a.isCatalogPurchasable?(qv_commonLogger("catalog is purchasable"),
null==c||"undefined"!=typeof c.cartId&&null!=c.cartId&&"undefined"!=typeof c.cartEntries&&0!=c.cartEntries.length||(g=!0),f.addProductToCart(b).then(function(c){qv_commonLogger("returned from adding product to cart, now update cart");p.updateCartData(b);g?a.checkAndtriggerAnalyticsCartOpenEvent(g,b):a.triggerAnalyticsAddToCartEvent()})):qv_commonLogger("catalog is not purchasable")};a.checkAndtriggerAnalyticsCartOpenEvent=function(a,b){var c={},d=f.getSessionVariable(k.CART_DETAILS);try{if(spb_commonLogger("analytics SC_FIRST event data obj in Quick view:",
c),a){c.cartID=d.cartId;c.productName=[];c.productName.push(d.cartEntries[0].pageTitle);c.productSkuName=[];c.productSkuName.push($("div[data-sku\x3d'"+b+"'].product-title").attr("data-sku-title"));c.productID=[];c.productID.push(d.cartEntries[0].pagePath.substring(d.cartEntries[0].pagePath.lastIndexOf("/")+1));c.productSkuID=[];c.productSkuID.push(b);c.productUnitPrice=[];c.productUnitPrice.push(d.cartEntries[0].prices.list.amount.toFixed(2).toString());c.productSalePrice=[];c.productSalePrice.push(d.cartEntries[0].prices.sale.amount.toFixed(2).toString());
c.productDiscount=[];c.productDiscount.push((d.cartEntries[0].prices.list.amount-d.cartEntries[0].prices.sale.amount).toFixed(2));var e=window.aa.createEvent("SC_FIRST",c);window.dispatchEvent(e)}}catch(y){console.log("Error while triggering analytics SC_FIRST event")}};a.triggerAnalyticsAddToCartEvent=function(){var a={},b=f.getSessionVariable(k.CART_DETAILS);null!=b&&"undefined"!=typeof b.cartId&&(a.cartID=b.cartId);try{qv_commonLogger("analytics ADD_TO_CART event data obj :",a);var c=window.aa.createEvent("ADD_TO_CART",
a);window.dispatchEvent(c)}catch(v){console.log("Error while triggering analytics ADD_TO_CART event")}};a.checkSkuInFavorites=function(){var b=f.getSessionVariable(k.USER_DETAILS);if(null==b)f.getUser().then(function(){b=f.getSessionVariable(k.USER_DETAILS);if(null==b||"undefined"==typeof b.uid)return qv_commonLogger("checkSkuInFavorites : User is not logged in."),!0;if(0<b.wishlistCount&&-1<b.wishlistProducts.indexOf(a.currentSku))return qv_commonLogger("checkSkuInFavorites : sku found in wishlist."),
!1});else if(0<b.wishlistCount&&-1<b.wishlistProducts.indexOf(a.currentSku))return qv_commonLogger("checkSkuInFavorites : sku found in wishlist."),!1;return!0};a.addToFavorites=function(){var b=f.getSessionVariable(k.USER_DETAILS);null==b||"undefined"==typeof b.uid?(qv_commonLogger("User is not logged in."),$(".login-modal").find("form.loginForm").trigger("reset"),$(".login-modal").removeClass("hidden").addClass("addToFavorites"),$("body").addClass("overflow-hidden"),a.showLoginForm()):(qv_commonLogger("User is logged in."),
qv_commonLogger("current sku :: ",a.currentSku),f.addProductToFavorites(a.currentSku).then(function(){f.getUser().then(function(){qv_commonLogger("product added to favorites : "+JSON.stringify(f.getSessionVariable(k.USER_DETAILS)));b=f.getSessionVariable(k.USER_DETAILS);null!=b&&"undefined"!=typeof b.uid&&(a.triggerAnalyticsAddToFavourites(),a.updateUserInfoComp(b),$(".quickViewModalClose").trigger("click"),$(".login-modal").hasClass("addToFavorites")&&window.location.reload())})},function(){qv_commonLogger("User session timed out");
$(".login-modal").find("form.loginForm").trigger("reset");$(".login-modal").removeClass("hidden").addClass("addToFavorites");$("body").addClass("overflow-hidden");a.showLoginForm()}))};a.triggerAnalyticsAddToFavourites=function(){try{var a=window.aa.createEvent("ADD_TO_FAV",{});window.dispatchEvent(a)}catch(w){console.log("Error while triggering analytics ADD_TO_FAV event")}};a.removeFromFavorites=function(){$(".quickViewModalClose").trigger("click");f.getUser().then(function(){var b=f.getSessionVariable(k.USER_DETAILS);
null==b||"undefined"==typeof b.uid?qv_commonLogger("User is not logged in."):(qv_commonLogger("User is logged in."),f.removeProductFromFavorites(a.currentSku).then(function(){f.getUser().then(function(){qv_commonLogger("product removed from favorites : "+JSON.stringify(f.getSessionVariable(k.USER_DETAILS)));b=f.getSessionVariable(k.USER_DETAILS);null!=b&&"undefined"!=typeof b.uid&&(a.triggerAnalyticsRemoveFromFavourites(),a.updateUserInfoComp(b),$(".login-modal").hasClass("removeFromFavorites")&&
window.location.reload())})},function(){qv_commonLogger("User session timed out");$(".login-modal").find("form.loginForm").trigger("reset");$(".login-modal").removeClass("hidden").addClass("removeFromFavorites");$("body").addClass("overflow-hidden");a.showLoginForm()}))})};a.triggerAnalyticsRemoveFromFavourites=function(){try{var a=window.aa.createEvent("REMOVE_FROM_FAV",{});window.dispatchEvent(a)}catch(w){console.log("Error while triggering analytics REMOVE_FROM_FAV event")}};a.showLoginForm=function(){f.removeAllSessionVariable();
var a=$(".commerce-user-info .wdAngularApp");qv_commonLogger("In showLoginForm :: "+a.length);if("undefined"!=typeof a)for(var b=0;b<a.length;b++){var c=angular.element(a[b]).scope();c.triggerSignInModal();$(".quickViewModalClose").trigger("click");c.$apply()}};a.updateUserInfoComp=function(a){var b=$(".commerce-user-info .wdAngularApp");if("undefined"!=typeof b)for(var c=0;c<b.length;c++){var d=angular.element(b[c]).scope();d.totalItems=a.wishlistCount;d.$apply()}};a.openReserveNowForm=function(a,
b){$(".quickViewModalClose").trigger("click");$("#reserve-now-modal").removeClass("hidden");$("body").addClass("overflow-hidden")};a.openWtbPage=function(b){a.trackWTBClick();window.location.href=""!=b?b:a.wtbPagePath};a.trackWTBClick=function(){$(".quickViewModalClose").trigger("click");try{var a=window.aa.createEvent("WHERE_TO_BUY",{});window.dispatchEvent(a)}catch(w){console.log("Error while triggering analytics WHERE_TO_BUY event")}};a.rewritePageURL=function(a){return 0<a.trim().length?m.rewritePageURL(a):
a}}]);function qv_commonLogger(a,c){-1<window.location.search.indexOf("debugQuickView\x3dtrue")&&console.log(a,null!=c?c:"")}var studioProductSearchApp=angular.module("StudioProductSearchApp",["UserApp","CommonUtilApp"]);studioProductSearchApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
studioProductSearchApp.controller("StudioProductSearchController",["$scope","$http","UserService","USER_CONSTANTS","CommonUtilService","safeApply",function(a,c,b,d,e,l){ui_commonLogger("in StudioProductSearchController...");var f=b.getSessionVariable(d.ONE_STUDIO_PRODUCTS);a.init=function(){null==f?b.getOneStudioProducts().then(function(a){f=b.getSessionVariable(d.ONE_STUDIO_PRODUCTS);k()}):k()};a.redirect=function(b,c){a.searchText=b;window.location.replace(window.location.origin+c+".html")};var k=
function(){var b=[];angular.forEach(f,function(a,c){a.path=c;b.push(a)});a.suggestionResults=b}}]);function sps_commonLogger(a,c){-1<window.location.search.indexOf("debugSPS\x3dtrue")&&console.log(a,c?c:"")}var studioProductListingApp=angular.module("StudioProductListingApp",["UserApp","CommonUtilApp"]);studioProductListingApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
studioProductListingApp.controller("StudioProductListingController",["$q","$scope","$http","UserService","USER_CONSTANTS","CommonUtilService","safeApply",function(a,c,b,d,e,l,f){function k(a,b){a.forEach(function(a){(a.selected=b)&&-1==c.selection.indexOf(a.id)?c.selection.push(a.id):!b&&-1<c.selection.indexOf(a.id)&&c.selection.splice(c.selection.indexOf(a.id),1);a.child&&0<a.child.length&&k(a.child,b)})}function p(a){a.forEach(function(a){a.selected=!1;a.child&&0<a.child.length&&p(a.child)})}function m(a,
b){a=a.label.trim().toLowerCase();b=b.label.trim().toLowerCase();var c=0;a>b?c=1:a<b&&(c=-1);return c}ui_commonLogger("in StudioProductListingController...");var h=d.getSessionVariable(e.ONE_STUDIO_PRODUCTS),q=d.getSessionVariable(e.TAGS),n=us_this.getSessionVariable(e.USER_INFO),g,r=12;c.subCategory={};c.fullSubCategory={};c.selection=[];var w=[],u,v=!1;c.init=function(b,c,f,m){b&&(r=b);v=m?!0:!1;u=JSON.parse(f);g=c?c+"/":l.getCurrentPagePath()+"/";null==h||null==n?a.all([d.getOneStudioProducts(),
d.getUserDetails()]).then(function(){q=d.getSessionVariable(e.TAGS);h=d.getSessionVariable(e.ONE_STUDIO_PRODUCTS);n=d.getSessionVariable(e.USER_INFO);w=n.groups.split(",");A()},function(a){console.log(a)},function(a){console.log(a)}):(w=n.groups.split(","),A())};c.filter=function(a){a.child&&0<a.child.length&&k(a.child,a.selected);-1==c.selection.indexOf(a.id)?c.selection.push(a.id):c.selection.splice(c.selection.indexOf(a.id),1);c.filterCategory("")};c.filterCategory=function(a){c.searchText="";
a&&(-1==c.selection.indexOf(a)?c.selection.push(a):c.selection.splice(c.selection.indexOf(a),1));c.productList=0<c.selection.length?c.fullCategoryList.filter(function(a){return c.selection.some(function(b){return-1<a.tags.indexOf(b)})||-1<c.selection.indexOf(a.brand)}):c.fullCategoryList;c.searchFullCategoryList=c.productList;t(c.productList.length)};c.search=function(){c.productList=c.searchFullCategoryList.filter(function(a){return a.title.toLowerCase().contains(c.searchText.toLowerCase())});t(c.productList.length)};
c.onChangesearch=function(){3<c.searchText.length?c.search():0==c.searchText.length&&(c.productList=c.searchFullCategoryList,t(c.productList.length))};c.resetAll=function(){c.selection=[];c.categoryList&&0<c.categoryList.length?p(c.categoryList):c.brandList&&0<c.brandList.length&&c.brandList.forEach(function(a){a.selected=!1});c.filterCategory("")};var A=function(){var a=[],b="",d=[];angular.forEach(h,function(e,f){f.startsWith(g)&&(e.path=f,e.tags&&e.tags.forEach(function(a){b||(b=a);b&&-1==b.indexOf(a)&&
(b=b.concat(",").concat(a));u.forEach(function(b){angular.forEach(b,function(b,c){-1==a.indexOf(c)||e.brand&&b.group||(e.brand=b.label,e.group=b.group,e.selected=!1,d&&-1==d.indexOf(b)&&d.push(b))})})}),c.fullSubCategory=c.subCategory,a.push(e))});var e=[];b.split(",").map(function(a){return a.split("/").map(function(b,c,d){if(c=a.match("(studio:products/(.*?)/(.*?)/)"+b+"/")){if(b=c[0].substr(0,c[0].length-1),q[b])return c=q[b],JSON.parse('{"id":"'+b+'","label":"'+c+'", "selected":false, "toggle":false}')}else if(a.match("(studio:products/.*?/)"+
b)&&(b=a.match("(studio:products/.*?/)"+b)[0],q[b]))return c=q[b],JSON.parse('{"id":"'+b+'","label":"'+c+'", "selected":false, "toggle":true}')}).filter(function(a){return a})}).flat().forEach(function(a){0<e.filter(function(b){return b.id===a.id}).length?null:e.push(a)});v?(c.brandList=d.filter(function(a){return w.some(function(b){return a.group===b})}),c.productList=a.filter(function(a){return w.some(function(b){return a.group===b})})):(y(e,0),c.categoryList=e.sort(m),c.productList=a);c.fullCategoryList=
c.productList;c.searchFullCategoryList=c.productList;t(c.productList.length)},y=function(a,b){var c=a[b].id,d=-1;a.some(function(a,b){if(c===a.id.substr(0,a.id.lastIndexOf("/")))return d=b,!0});-1<d&&y(a,d);if(a.length>b&&a[b].id.match("(studio:products/.*?/.*?/.*?)")){var e=a[b];a.splice(b,1);a.forEach(function(a){a.id===e.id.substr(0,e.id.lastIndexOf("/"))&&(a.child||(a.child=[]),a.child.push(e),a.child.sort(m))})}d=-1;a.some(function(a,b){if(a.id.match("(studio:products/.*?/.*?/.*?)"))return d=
b,!0});-1<d&&y(a,d)},t=function(a){c.start=0;c.row=r;c.numOfResult=a;c.numOfPages=Math.floor((c.numOfResult-1)/r)+1;c.countSelector=""+(Math.floor(c.start/r)+1)};c.goOnPage=function(){c.start=(Number.parseInt(c.countSelector)-1)*Number.parseInt(r);c.row=Number.parseInt(c.countSelector)*Number.parseInt(r)};c.nextClick=function(){c.start=Number.parseInt(c.start)+Number.parseInt(r);c.row=Number.parseInt(c.row)+Number.parseInt(r);c.countSelector=""+(Math.floor(c.start/r)+1)};c.prevClick=function(){c.start=
Number.parseInt(c.start)-Number.parseInt(r);c.row=Number.parseInt(c.row)-Number.parseInt(r);c.countSelector=""+(Math.floor(c.start/r)+1)};c.rewritePageURL=function(a){return 0<a.trim().length?l.rewritePageURL(a):a}}]);function spl_commonLogger(a,c){-1<window.location.search.indexOf("debugSPL\x3dtrue")&&console.log(a,c?c:"")}var wdProductCategoryApp=angular.module("WdProductCategoryApp",["CommonUtilApp"]);
wdProductCategoryApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
wdProductCategoryApp.controller("WdProductCategoryController",["$scope","$http","safeApply","$q","CommonUtilService","$window",function(a,c,b,d,e,l){wdpl_commonLogger("in WdProductCategoryController...");a.filterList=[];a.selection=[];var f=[];a.countLimit=12;a.initCustom=function(b,d,e){wdpl_commonLogger("in WdProductCategoryController...");e&&(a.countLimit=e);c.get("/bin/wd/listtags.corp:product-category.json").then(function(c){a.productList=JSON.parse(b);a.fullProductList=JSON.parse(b);tags=c.data;
a.constructObject(d.split(","),tags)},function(a){wdpl_commonLogger(a)})};a.initQuery=function(b,e,f){wdpl_commonLogger("in WdProductCategoryController...");f&&(a.countLimit=f);d.all([c.get(b),c.get("/bin/wd/listtags.corp:product-category.json")]).then(function(b){0<b[0].data.hits.length&&(a.productList=b[0].data.hits,a.fullProductList=b[0].data.hits,a.constructObject(e.split(","),b[1].data))},function(a){wdpl_commonLogger(a)},function(a){wdpl_commonLogger(a)})};a.constructObject=function(b,c){f=
b.map(function(a){var b=c.filter(function(b){return b.tagId===a});if(0<b.length){var d=b[0]["title_"+e.getLocale().toLocaleLowerCase().replace("-","_")]?b[0]["title_"+e.getLocale().toLocaleLowerCase().replace("-","_")]:b[0].title;return JSON.parse('{"tagId":"'+b[0].tagId+'","title":"'+d+'"}')}}).filter(function(a){return a});f.forEach(function(b){var d=c.filter(function(a){return a.tagId===b.tagId}),f=d[0]["title_"+e.getLocale().toLocaleLowerCase().replace("-","_")]?d[0]["title_"+e.getLocale().toLocaleLowerCase().replace("-",
"_")]:d[0].title;a.filterList.push(JSON.parse('{"id":"'+d[0].tagId+'","label":"'+f+'","filters":[]}'))});a.productList.forEach(function(b){b["jcr:content/image/urlFileReference"]&&(b.productImagePath=b["jcr:content/image/urlFileReference"]);if(b["jcr:content/jcr:title"]||b.pageTitle)b.productTitle=b.pageTitle||b["jcr:content/jcr:title"];b["jcr:path"]&&(b.productPagePath=b["jcr:path"]);b["jcr:content/cq:tags"]&&(b.pageTag=b["jcr:content/cq:tags"]);b["jcr:content/product/txtCategoryTitle"]&&(b.productCategory=
b["jcr:content/product/txtCategoryTitle"]);b.pageTag&&b.pageTag.forEach(function(b){var d=c.filter(function(a){return a.tagId===b}),g=-1;if(a.filterList.some(function(a){g++;return-1<b.indexOf(a.id)})&&!a.filterList[g].filters.some(function(a){return a&&a.tagId===d[0].tagId})){var f=d[0]["title_"+e.getLocale().toLocaleLowerCase().replace("-","_")]?d[0]["title_"+e.getLocale().toLocaleLowerCase().replace("-","_")]:d[0].title;a.filterList[g].filters.push(JSON.parse('{"tagId":"'+d[0].tagId+'","title":"'+
f+'"}'))}})});k(a.productList.length)};a.filterFacet=function(b){f.forEach(function(a){-1<b.indexOf(a.tagId)?(a.selection||(a.selection=[]),-1==a.selection.indexOf(b)?a.selection.push(b):a.selection.splice(a.selection.indexOf(b),1)):a.selection||(a.selection=[])});f.some(function(a){return 0<a.selection.length})?a.productList=a.fullProductList.filter(function(a){return f.every(function(b){return 0==b.selection.length||a.pageTag&&a.pageTag.some(function(a){return-1<b.selection.indexOf(a)})})}):a.productList=
a.fullProductList;k(a.productList.length)};a.goOnPage=function(){a.start=(Number.parseInt(a.countSelector)-1)*Number.parseInt(a.countLimit);a.row=Number.parseInt(a.countSelector)*Number.parseInt(a.countLimit)};a.nextClick=function(){a.start=Number.parseInt(a.start)+Number.parseInt(a.countLimit);a.row=Number.parseInt(a.row)+Number.parseInt(a.countLimit);a.countSelector=""+(Math.floor(a.start/a.countLimit)+1)};a.prevClick=function(){a.start=Number.parseInt(a.start)-Number.parseInt(a.countLimit);a.row=
Number.parseInt(a.row)-Number.parseInt(a.countLimit);a.countSelector=""+(Math.floor(a.start/a.countLimit)+1)};var k=function(b){a.start=0;a.row=a.countLimit;a.numOfResult=b;a.numOfPages=Math.floor((a.numOfResult-1)/a.countLimit)+1;a.countSelector=""+(Math.floor(a.start/a.countLimit)+1)};a.reset=function(){f.forEach(function(a){a.selection=[]});a.productList=a.fullProductList;$(".filterList").find("input[type\x3dcheckbox]").prop("checked",!1);k(a.productList.length)};a.navigateToPage=function(b){window.location.href=
a.rewritePageURL(b+".html")};a.rewritePageURL=function(a){return 0<a.trim().length?e.rewritePageURL(a):a};a.openProductFilterMobile=function(){angular.element(".filter-overlay").show();angular.element("body").addClass("overflow-hidden");angular.element(".left-filter").removeClass("hidden");var a=l.innerHeight,b=Math.abs(angular.element(".fliter_header").outerHeight()),c=Math.abs(angular.element(".filter_btn_height").outerHeight());angular.element(".filterItemWrap").height(a-b-c)};a.closeProductFilterMobile=
function(){angular.element(".filter-overlay").removeAttr("style");angular.element("body").removeClass("overflow-hidden");angular.element(".left-filter").addClass("hidden");angular.element(".filterItemWrap").removeAttr("style")};angular.element(l).bind("resize",function(){768<l.innerWidth&&angular.element(".close-productList-filter").triggerHandler("click")})}]);function wdpl_commonLogger(a,c){-1<window.location.search.indexOf("debugWDPL\x3dtrue")&&console.log(a,c?c:"")}
var productCardListingApp=angular.module("ProductCardListingApp",["CommerceApp","ngSanitize"]);productCardListingApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);productCardListingApp.directive("custompromotionDir",function(){return function(a,c,b){a.initCustomPromotion(b.customPromotionsJsonString)}});
productCardListingApp.controller("ProductCardListingController",["COMMERCE_CONSTANTS","CommonUtilService","$scope","CommerceService","safeApply",function(a,c,b,d,e){b.ProductListingObj=[];b.productReferenceObject=[];b.isCatalogPurchasable=d.getPurchasableCatalog();var l=d.getSessionVariable(a.PRODUCT_REFERENCES);b.getProductCardList=function(){productcardlist_commonLogger(b.ProductListingObj);null==l?d.getProductReferences().then(function(){l=d.getSessionVariable(a.PRODUCT_REFERENCES);b.constructProductCardList()},
function(a){productcardlist_commonLogger("defferd from commerce service : getProductReferences Method",a)}):b.constructProductCardList()};b.setProductCardList=function(a,c){b.ProductListingObj.push(JSON.parse('{"productid":"'+a+'","skuid":"'+c+'"}'));productcardlist_commonLogger(b.ProductListingObj)};b.constructProductCardList=function(){var a=0;b.ProductListingObj.forEach(function(c){var d=""!=c.productid?c.productid:c.skuid;l[d]&&(l[d].skuid=c.skuid,b.productReferenceObject.push(l[d]),b.getProductPriceInfo(d,
a),b.updateSkuImage(a),b.updateSkuTitle(a),b.updatePagePath(a),b.initCustomPromotionInfo(c.productid,c.skuid,a),a++)})};b.updateSkuImage=function(a){b.productReferenceObject[a].skuid&&l[b.productReferenceObject[a].skuid].urlFileReference&&(b.productReferenceObject[a].urlFileReference=l[b.productReferenceObject[a].skuid].urlFileReference)};b.updateSkuTitle=function(a){b.productReferenceObject[a].skuid&&l[b.productReferenceObject[a].skuid].variantTitle&&(b.productReferenceObject[a].pageTitle=l[b.productReferenceObject[a].skuid].variantTitle)};
b.updatePagePath=function(a){b.productReferenceObject[a].skuid&&l[b.productReferenceObject[a].skuid].pagePath&&(b.productReferenceObject[a].pagePath=l[b.productReferenceObject[a].skuid].pagePath)};b.getProductPriceInfo=function(a,c){var f=b.productReferenceObject[c].skuid;if(null!=f&&""!=f){var l=d.getSessionVariable(f);null==l||null==l.prices?d.getProductPrice(f).then(function(a){productcard_commonLogger("SKU Info found for: "+f+"response "+a);l=d.getSessionVariable(f);null!=l?(b.productReferenceObject[c].minPricedSkuObj=
l,e(b)):productcard_commonLogger("SKU Code "+f+"not found in session.")},function(a){productcard_commonLogger("SKU Info not found for: "+f+"response "+a)}):(b.productReferenceObject[c].minPricedSkuObj=l,e(b))}else{var h=d.getSessionVariable(a);null==h?d.getBaseProductInfo(a,b.productReferenceObject[c].skuList).then(function(){h=d.getSessionVariable(a);if(null!=h){var f=h.minPricedSKU;""!=f&&(f=b.getSessionProductPricingInfo(f),b.productReferenceObject[c].minPricedSkuObj=f,e(b))}else productcard_commonLogger("Product "+
a+"not found in session.")},function(b){productcard_commonLogger("Product Info not found for: "+a+"response "+b)}):(f=h.minPricedSKU,""!=f&&(l=b.getSessionProductPricingInfo(f),b.productReferenceObject[c].minPricedSkuObj=l,e(b)))}};b.getSessionProductPricingInfo=function(a){a=d.getSessionVariable(a);return null!=a?a:""};b.rewritePageURL=function(a,b){void 0!=a&&0<a.trim().length&&(a=c.rewritePageURL(a),null!=b&&""!=b&&(a=a.concat("#"+b)));return a};b.initCustomPromotion=function(a){try{b.customPromotions=
JSON.parse(a),productcardlist_commonLogger("custom promotions",b.customPromotios),e(b)}catch(k){console.error("error while parsing custom promo json",k)}};b.initCustomPromotionInfo=function(a,c,d){productcardlist_commonLogger("initCustomPromotionInfo");!a&&c&&l[c]&&(a=l[c].productId);l[a]&&(c=l[a].attPromotionType,a=l[a].attPromotionMessageId,b.productReferenceObject[d].attPromotionType=c,b.productReferenceObject[d].attPromotionMessageId=a,void 0!=b.customPromotions&&void 0!=b.customPromotions[c]&&
(b.productReferenceObject[d].cpJson=b.customPromotions[c][a]))}}]);function productcardlist_commonLogger(a,c){-1<window.location.search.indexOf("debugProductCardListing\x3dtrue")&&console.log("Product Card Listing:"+a,null!=c?c:"")}var wdsearchApp=angular.module("wdSearchApp",["SearchCommonApp","ngSanitize"]);wdsearchApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
wdsearchApp.controller("wdSearchController",["$scope","$sce","$filter","$window","$http","$timeout","$document","$location","AutoSuggestService","SearchFacetsService","SearchResultsService",function(a,c,b,d,e,l,f,k,p,m,h){a.isFacetedSearch=!1;a.searchResp={};a.productdata={};a.subDocumentType={};a.suggestions={};a.row=10;a.start=0;a.numFound=0;var q=!1,n="",g="",r={},w=!1,u=!0;a.$watch("docTypeLabels",function(){var b;if(b=void 0!=a.docTypeLabels)b=a.docTypeLabels,b=!(void 0!==b&&null!==b&&b.constructor==
Object);b&&(a.docTypeLabels=JSON.parse(a.docTypeLabels))});void 0!=k.search().q&&""!=k.search().q?(a.q=k.search().q,q=!0):(k.search({q:""}),w=!0);a.pageTop=function(){document.body.scrollTop=0;document.documentElement.scrollTop=0};var v=function(){a.suggestions=[];a.searchResp={};a.subDocumentType={};if(a.q||w)u&&m.getSubDocTypeFacetsJson(a.q,n,g,a.facetQueryEndPoint,a.otherLabel).then(function(b){a.jsonData=b}),a.loading=!0,h.getSearchResults(a.q,a.searchBaseUrl,r,n,g,q).then(function(b){a.searchResp=
b.response;a.numFound=b.response.numFound;a.numOfResult=a.numFound;a.loading=!1},function(a){console.log("Error while getting search results")})};l(function(){!a.q&&!w||a.isNotSearchResultPage||v()});a.documentTypeFacetFilter=function(){n="";angular.forEach(a.docTypeLabels.documenttypemapping,function(a){a.selected&&(n=""!=n?n+"%20OR%20":"",n+=a.value)});n=""!=n?"documentType:("+n+")":"";u=""!=n&&""==g||""!=g&&""!=n||""==n&&""==g||0==a.numOfResult||0<=g.indexOf(a.otherLabel)?!0:!1;r.start=a.start=
0;v()};a.subDocumentTypeFacetFilter=function(){g="";g=m.getSelectedSubDocumentTypeFacets(a.jsonData);g=""!=g?"filterSubDocumentType:("+g+")":"";u=""==n&&""!=g||""!=n&&""!=g||""==n&&""==g?!1:!0;r.start=a.start=0;v()};a.clearDocTypeFilters=function(){angular.forEach(a.docTypeLabels.documenttypemapping,function(a){a.selected&&(a.selected=!1)});n="";u=!0;r.start=a.start=0;v()};a.clearSubDocTypeFilters=function(){angular.forEach(a.jsonData,function(a){a.selected&&(a.selected=!1)});g="";r.start=a.start=
0;v()};a.openURL=function(a,b){b?d.open(a,"_self"):d.open(a,"_blank")};a.prevClick=function(){0<a.start&&(a.start=0<a.start-a.row?a.start-a.row:0,r.row=a.row,r.start=a.start,v(),a.pageTop())};a.nextClick=function(){a.start+a.row<a.numFound&&(a.start+=a.row,r.row=a.row,r.start=a.start,v(),a.pageTop())};a.getSearchBlockClass=function(){return a.isFacetedSearch?"seventy col-sm-9":"col-sm-12"};a.submitQuery=function(b){b&&(a.q=b.replace(/<\/?[^>]+(>|$)/g,""));void 0==a.q||""==a.q?(k.search({q:""}),w=
!0):k.search({q:a.q});if(a.q||w)a.isNotSearchResultPage?a.openURL(a.resultPagePath,!0):(r={},a.start=0,groupNumFoundArr=[],u=q=!0,v())};a.trackSearchResultClick=function(a,b){try{d.aa.trackSearchResultClick(a.currentTarget,b)}catch(t){}};a.autoSuggest=function(){p.getAutoSuggestResults(a.q,a.autoSuggestUrl).then(function(b){a.suggestions=b.response.docs},function(a){console.log("Error while getting auto suggest results")})};f.bind("click",function(a){0==$(a.target).parents(".ui-autocomplete").length&&
$(".ui-autocomplete li").hide()});a.filterDescription=function(a){return a.replace(/{{[^}}]+}}/g,"")};a.getTitle=function(a){return a.title?a.title[0]:a.id}}]);var storeSearchApp=angular.module("storeSearchApp",["SearchCommonApp","CommerceApp","ngSanitize"]);storeSearchApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);storeSearchApp.directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(a,b,d){!0===a.$last&&a.$evalAsync(d.onFinishRender)}}}]);
storeSearchApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);storeSearchApp.directive("custompromotionDir",function(){return function(a,c,b){a.initCustomPromotion(b.customPromotionsJsonString)}});
storeSearchApp.controller("storeSearchController",["$scope","$sce","$filter","$window","$http","$timeout","$document","$location","COMMERCE_CONSTANTS","CommerceService","AutoSuggestService","SearchFacetsService","SearchResultsService","CommonUtilService","safeApply",function(a,c,b,d,e,l,f,k,p,m,h,q,n,g,r){a.isFacetedSearch=!1;a.searchResp={};a.productdata={};a.subDocumentType={};a.suggestions={};a.row=10;a.start=0;a.numFound=0;var w=!1,u="",v={},A=!1,y=!0;a.subDocTypeAllResults=!0;var t="";a.initCustomPromotion=
function(b){try{a.customPromotions=JSON.parse(b),store_searchLogger("custom promotions",a.customPromotios),r(a)}catch(z){console.error("error while parsing custom promo json",z)}};a.showProductResources=function(a,b){if(void 0!=a){if(-1<a.indexOf(b)){a=a.split(",");for(var c=0;c<a.length;c++)if(a[c].startsWith(b))return a[c].substring(b.length+1)}return""}};a.getProductMinPricedSkuInfo=function(b,c,d){if(void 0!=c){c=c.split(",");var e=m.getSessionVariable(b);if(null==e)m.getBaseProductInfo(b,c).then(function(){e=
m.getSessionVariable(b);if(null!=e){var c=e.minPricedSKU;if(""!=c)return a.getSessionProductPricingInfo(c)}else store_searchLogger("Product not found in session.",b)},function(a){store_searchLogger("Product Info not found for ",b)});else if(c=e.minPricedSKU,""!=c)return a.getSessionProductPricingInfo(c)}};a.getSessionProductPricingInfo=function(a){a=m.getSessionVariable(a);return null!=a?a:""};a.getSkuColorInfo=function(a){var b="",c=m.getSessionVariable(p.PRODUCT_REFERENCES);null==c?cs_this.getProductReferences().then(function(){(c=
m.getSessionVariable(p.PRODUCT_REFERENCES))&&c[a]&&c[a].categories&&c[a].categories["vc-color"]&&(b=c[a].categories["vc-color"].title)},function(a){store_searchLogger("In method: getSkuColorInfo, product Info not found for ",productCode)}):(c=m.getSessionVariable(p.PRODUCT_REFERENCES))&&c[a]&&c[a].categories&&c[a].categories["vc-color"]&&(b=c[a].categories["vc-color"].title);return b};a.productSchema=function(d,e,g,f,h,n){if(d&&f){d={"@context":"http://schema.org","@type":"Product",name:d,url:e,image:"https://"+
h+g,color:a.getSkuColorInfo(f),sku:f};var q=c.trustAsHtml(b("json")(d));setTimeout(function(){document.getElementById("schema-product-"+f+"-"+n).outerHTML='\x3cscript nonce\x3d"'+$("#commonUtilLoad").attr("data-nonceKey")+'" type\x3d"application/ld+json"\x3e'+q+"\x3c/script\x3e"},1E3)}};a.offerSchema=function(d,e,g,f,h,n,q){if(m.getPurchasableCatalog()&&d&&d.prices.sale){d={"@context":"http://schema.org","@type":"Offer",priceCurrency:d.prices.sale.currency,price:d.prices.sale.amount,availability:d.stockStatus,
itemOffered:[{"@type":"Product",name:e,url:g,image:"https://"+n+f,color:a.getSkuColorInfo(h),sku:h}]};var l=c.trustAsHtml(b("json")(d));setTimeout(function(){document.getElementById("schema-offer-"+h+"-"+q).outerHTML='\x3cscript nonce\x3d"'+$("#commonUtilLoad").attr("data-nonceKey")+'" type\x3d"application/ld+json"\x3e'+l+"\x3c/script\x3e"},1E3)}};a.initCustomPromotionInfo=function(b){store_searchLogger("initCustomPromotionInfo");var c={},d=m.getSessionVariable(p.PRODUCT_REFERENCES);d&&d[b]?(c.attPromotionType=
d[b].attPromotionType,c.attPromotionMessageId=d[b].attPromotionMessageId,void 0!=a.customPromotions&&void 0!=a.customPromotions[c.attPromotionType]&&(c.cpJson=a.customPromotions[c.attPromotionType][c.attPromotionMessageId])):m.getProductReferences().then(function(){var d=m.getSessionVariable(p.PRODUCT_REFERENCES);d&&d[b]&&(c.attPromotionType=d[b].attPromotionType,c.attPromotionMessageId=d[b].attPromotionMessageId,void 0!=a.customPromotions&&void 0!=a.customPromotions[c.attPromotionType]&&(c.cpJson=
a.customPromotions[c.attPromotionType][c.attPromotionMessageId]))});return c};a.initBadgeInfo=function(a){spl_commonLogger("initBadgeInfo");var b={},c=m.getSessionVariable(p.PRODUCT_REFERENCES);c&&c[a]&&c[a].badgesInfo.tagTitle?(b.badgeTagLabel=c[a].badgesInfo.tagTitle,b.badgeClass=c[a].badgesInfo.styleClass,b.badgeStartDate=c[a].badgesInfo.startDate,b.badgeEndDate=c[a].badgesInfo.endDate):m.getProductReferences().then(function(){var c=m.getSessionVariable(p.PRODUCT_REFERENCES);c&&c[a]&&c[a].badgesInfo.tagTitle&&
(b.badgeTagLabel=c[a].badgesInfo.tagTitle,b.badgeClass=c[a].badgesInfo.styleClass,b.badgeStartDate=c[a].badgesInfo.startDate,b.badgeEndDate=c[a].badgesInfo.endDate)});return b};a.isBadgeStatusActive=function(a,b){return g.isBadgeStatusActive(a,b)};a.rewritePageURL=function(a){return void 0!=a&&0<a.trim().length?g.rewritePageURL(a):a};void 0!=k.search().q&&""!=k.search().q?(a.q=k.search().q,w=!0):0<$("#searchDetailView").length&&(k.search({q:""}),A=!0);a.pageTop=function(){document.body.scrollTop=
0;document.documentElement.scrollTop=0};var C=function(){a.suggestions=[];a.searchResp={};a.subDocumentType={};if(a.q||A){y&&q.getSubDocTypeFacetsJson(a.q,"",u,a.facetQueryEndPoint,a.otherLabel).then(function(b){a.jsonData=b});if(""==t){a.productdata={};t=k.search().q;$(".storeSearchResult").addClass("h-0 overflow-hidden");var b=n.getSearchUrl(a.q,a.searchBaseUrl,v)+"\x26fq\x3dbaseProductId_s:*\x26fq\x3ddocumentType:products\x26qf\x3dtitle^10%20description^8%20url^5%20skuId^1";n.getProductSearchResults(b).then(function(b){a.productdata=
b.response.docs;$(".slick-initialized").hasClass("slick-initialized")&&($(".storeSearchResult").slick("reinit"),$(".storeSearchResult").slick("slickGoTo",0),$(".storeSearchResult").slick("refresh"))})}a.loading=!0;n.getSearchResults(a.q,a.searchBaseUrl,v,"",u,w).then(function(b){a.searchResp=b.response;a.numFound=b.response.numFound;a.numOfResult=a.numFound;a.loading=!1},function(a){store_searchLogger("Error while getting search results.")})}};l(function(){!a.q&&!A||a.isNotSearchResultPage||C()});
a.finished=function(){l(function(){roleList()})};a.subDocumentTypeFacetFilter=function(){u="";u=q.getSelectedSubDocumentTypeFacets(a.jsonData);a.subDocTypeAllResults=""==u?!0:!1;u=""!=u?"filterSubDocumentType:("+u+")":"";y=""!=u||""==u?!1:!0;v.start=a.start=0;C()};a.subDocumentTypeAllResultsFilter=function(){angular.forEach(a.jsonData,function(a){a.selected&&(a.selected=!1)});a.subDocumentTypeFacetFilter()};a.openURL=function(a,b){b?d.open(a,"_self"):d.open(a,"_blank")};a.prevClick=function(){0<a.start&&
(a.start=0<a.start-a.row?a.start-a.row:0,v.row=a.row,v.start=a.start,C(),a.isPagination=1)};a.nextClick=function(){a.start+a.row<a.numFound&&(a.start+=a.row,v.row=a.row,v.start=a.start,C(),a.isPagination=1)};a.getSearchBlockClass=function(){return a.isFacetedSearch?"seventy col-sm-9":"col-sm-12"};a.setFocusOnPagination=function(){1==a.isPagination&&($("html, body").animate({scrollTop:$("#searchResultContainerDiv").position().top+500},1E3),l(function(){$("#searchResultContainerDiv h6:first a").focus().addClass("focusOutline")}),
a.isPagination=0)};a.submitQuery=function(b){b&&(a.q=b.replace(/<\/?[^>]+(>|$)/g,""));void 0==a.q||""==a.q?(k.search({q:""}),A=!0):k.search({q:a.q});if(a.q||A)a.isNotSearchResultPage?a.openURL(a.resultPagePath,!0):(v={},a.start=0,groupNumFoundArr=[],y=w=!0,t="",C())};a.trackSearchResultClick=function(a,b){try{d.aa.trackSearchResultClick(a.currentTarget,b)}catch(x){}};a.autoSuggest=function(){h.getAutoSuggestResults(a.q,a.autoSuggestUrl).then(function(b){a.suggestions=b.response.docs},function(a){store_searchLogger("Error while getting auto suggest results.")})};
f.bind("click",function(a){0==$(a.target).parents(".ui-autocomplete").length&&$(".ui-autocomplete li").hide()});a.filterDescription=function(a){return a.replace(/{{[^}}]+}}/g,"")};a.getTitle=function(a){return a.title?a.title[0]:a.id};a.openProductFilterMobile=function(){angular.element(".filter-overlay").show();angular.element("body").addClass("overflow-hidden");angular.element(".left-filter").removeClass("hidden");var a=d.innerHeight,b=Math.abs(angular.element(".fliter_header").outerHeight()),c=
Math.abs(angular.element(".filter_btn_height").outerHeight());angular.element(".filterItemWrap").height(a-b-c)};a.closeProductFilterMobile=function(){angular.element(".filter-overlay").removeAttr("style");angular.element("body").removeClass("overflow-hidden");angular.element(".left-filter").addClass("hidden");angular.element(".filterItemWrap").removeAttr("style")};angular.element(d).bind("resize",function(){768<d.innerWidth&&angular.element(".close-productList-filter").triggerHandler("click")});a.storeSearchResultSlider=
function(){$(".storeSearchResult").hasClass("slick-initialized")||storeSearchSlider();$(".storeSearchResult").slick("refresh");$(".storeSearchResult").slick("slickGoTo",0);$(".storeSearchResult").removeClass("h-0 overflow-hidden")}}]);
function storeSearchSlider(){$(".storeSearchResult").removeClass("overflow-hidden h-0");"rtl"==$("html").attr("dir")?$(".storeSearchResult").slick({infinite:!0,slidesToShow:6,slidesToScroll:1,arrows:!0,dots:!1,rtl:!0,accessibility:!0,prevArrow:'\x3cbutton class\x3d"slick-prev slick-arrow focusOutline" aria-label\x3d"Product Slider Previous" type\x3d"button" style\x3d""\x3ePrevious\x3c/button\x3e',nextArrow:'\x3cbutton class\x3d"slick-next slick-arrow" aria-label\x3d"Product Slider Next" type\x3d"button" style\x3d""\x3eNext\x3c/button\x3e',
responsive:[{breakpoint:1460,settings:{slidesToShow:5}},{breakpoint:1140,settings:{slidesToShow:4}},{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:3,dots:!0}},{breakpoint:576,settings:{slidesToShow:2,dots:!0}}]}):$(".storeSearchResult").slick({infinite:!0,slidesToShow:6,slidesToScroll:1,arrows:!0,dots:!1,accessibility:!0,prevArrow:'\x3cbutton class\x3d"slick-prev slick-arrow focusOutline" aria-label\x3d"Product Slider Previous" type\x3d"button" style\x3d""\x3ePrevious\x3c/button\x3e',
nextArrow:'\x3cbutton class\x3d"slick-next slick-arrow" aria-label\x3d"Product Slider Next" type\x3d"button" style\x3d""\x3eNext\x3c/button\x3e',responsive:[{breakpoint:1460,settings:{slidesToShow:5}},{breakpoint:1140,settings:{slidesToShow:4}},{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:3,dots:!0}},{breakpoint:576,settings:{slidesToShow:2,dots:!0}}]})}
$(document).on("mouseenter",".storeSearchResult .slick-slide",function(){var a=$(".storeSearchResult .slick-slide.slick-active").height(),c=$(this).outerHeight();$(this).find(".productCTAwrap").addClass("productCTAwrapShow");$(this).closest(".storeSearchResult").css("height",c);$(this).siblings().find(".storeSearchWrapper").css("height",a)});
$(document).on("mouseleave",".storeSearchResult .slick-slide",function(){$(this).closest(".storeSearchResult").css("height","");$(this).find(".productCTAwrap").removeClass("productCTAwrapShow");$(this).siblings().find(".storeSearchWrapper").css("height","")});$("#subDocType,#searchright").on("focus",function(){$(".ui-autocomplete li").remove()});$(document).on("keyup",function(a){27===a.keyCode&&$(".ui-autocomplete li").remove()});
function store_searchLogger(a,c){-1<window.location.search.indexOf("debugStoreSearch\x3dtrue")&&console.log(a,null!=c?c:"")}
$(document).ready(function(){$(document).on("click",".redirectToUrl",function(){if(0==$("body").hasClass("disabledOutine")&&1==$(this).hasClass("redirectOnEnter")){var a=$(this).attr("data-url");window.location.href=a}else 0==$(this).hasClass("redirectOnEnter")&&(a=$(this).attr("data-url"),window.location.href=a)});$(document).on("click",".btn-search-SummaryView",function(a){a.stopPropagation();$(this).attr("tabindex","-1");$(this).closest("#searchSummaryView").find(".searchSummaryViewInput").addClass("search-expanded").focus();
0<$(".searchSummaryViewInput").val().length&&0<$(".searchSummaryViewInput").width()&&$("#searchSummaryViewForm").submit()});$(document).on("click",".svClearInput",function(){$(this).closest("#searchSummaryView").find(".searchSummaryViewInput").focus()});$(document).on("click",".search-collapse",function(){$(this).closest("#searchSummaryView").find(".searchSummaryViewInput").removeClass("search-expanded");$("#searchSummaryView").addClass("z-4").removeClass("z-20");$(".svClearInput, .btn-search-SummaryView").removeAttr("tabindex")});
$(".btn-search-SummaryView").on("click",function(){$("#searchSummaryView").addClass("z-20").removeClass("z-4")});$(".searchSummaryViewInput").on("keyup",function(){""==$(".searchSummaryViewInput").val()?$(".svClearInput").attr("tabindex","-1"):$(".svClearInput").removeAttr("tabindex")})});var webhelpsearchApp=angular.module("webhelpSearchApp",["SearchCommonApp","ngSanitize"]);webhelpsearchApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
webhelpsearchApp.directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(a,b,d){!0===a.$last&&a.$evalAsync(d.onFinishRender)}}}]);
webhelpsearchApp.controller("webhelpSearchController",["$scope","$q","$window","$timeout","$document","$location","$filter","AutoSuggestService","SearchResultsService",function(a,c,b,d,e,l,f,k,p){a.searchResp={};a.productdata={};a.suggestions={};a.row=10;a.start=0;a.numFound=0;var m={},h=!1;void 0!=l.search().q&&""!=l.search().q?a.q=l.search().q:a.isNotSearchResultPage&&(l.search({q:""}),h=!0);a.pageTop=function(){document.body.scrollTop=0;document.documentElement.scrollTop=0};var q=function(){a.suggestions=
[];a.searchResp={};if(a.q||h)a.loading=!0,p.getSearchResults(a.q,a.searchBaseUrl,m,"","","").then(function(b){a.searchResp=b.response;a.numFound=b.response.numFound;a.numOfResult=a.numFound;a.loading=!1;a.highlights=b.highlighting},function(a){console.log("Error while getting search results")})};d(function(){!a.q&&!h||a.isNotSearchResultPage||q()});a.openURL=function(a,c){c?b.open(a,"_self"):b.open(a,"_blank")};a.prevClick=function(){0<a.start&&(a.start=0<a.start-a.row?a.start-a.row:0,m.row=a.row,
m.start=a.start,q(),a.pageTop())};a.nextClick=function(){a.start+a.row<a.numFound&&(a.start+=a.row,m.row=a.row,m.start=a.start,q(),a.pageTop())};a.getSearchBlockClass=function(){return a.isFacetedSearch?"seventy col-sm-9":"col-sm-12"};a.submitQuery=function(b){b&&(a.q=b.replace(/<\/?[^>]+(>|$)/g,""));void 0==a.q||""==a.q?(l.search({q:""}),h=!0):l.search({q:a.q});if(a.q||h)a.isNotSearchResultPage?a.openURL(a.resultPagePath+"?q\x3d"+a.q,!0):(m={},a.start=0,groupNumFoundArr=[],q())};a.autoSuggest=function(){k.getAutoSuggestResults(a.q,
a.autoSuggestUrl).then(function(b){a.suggestions=b.response.docs},function(a){console.log("Error while getting auto suggest results")})};e.bind("click",function(a){0==$(a.target).parents(".ui-autocomplete").length&&$(".ui-autocomplete li").hide()});a.filterDescription=function(a){return a.replace(/{{[^}}]+}}/g,"")};a.getTitle=function(a){return a.title?a.title[0]:a.id}}]);function whs_commonLogger(a){-1<window.location.search.indexOf("debugUser\x3dtrue")&&console.log("WHS: "+a)}
var supportSearchApp=angular.module("SupportSearchApp",["ngSanitize","CommonUtilApp","CommonSupportApp"]);supportSearchApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);supportSearchApp.directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(a,b,d){!0===a.$last&&a.$evalAsync(d.onFinishRender)}}}]);
supportSearchApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
supportSearchApp.controller("supportSearchController",["$q","$scope","$sce","$filter","$window","$http","$timeout","$document","$location","CommonSupportService","CommonUtilService","safeApply",function(a,c,b,d,e,l,f,k,p,m,h,q){c.knowledgeBaseSearchResponse={};c.currentSelectedCategory="";c.knowledgeBaseResp=[];c.communityResp=[];c.productDocumentationResp=[];c.searchResp=[];c.start=0;c.selectedDocType={};var n={},g="";c.searchKeyword="";c.rewritePageURL=function(a){return void 0!=a&&0<a.trim().length?
h.rewritePageURL(a):a};void 0!=p.search().q&&""!=p.search().q&&(c.q=p.search().q,aaTrack=!0);c.pageTop=function(){document.body.scrollTop=0;document.documentElement.scrollTop=0};var r=function(){c.knowledgeBaseResp=[];c.communityResp=[];c.productDocumentationResp=[];c.searchResp=[];c.docTypeFilter=[];c.selectedDocType={};c.noData=!1;c.noKnowledgeBaseData=!1;c.noCommunitySearchData=!1;c.noProductDocumentationData=!1;c.row=c.row?parseInt(c.row):10;c.q&&$.when(u(),v(),A(),c.getDocumentTypeFilter(),y("pageLoad")).then(w)},
w=function(){console.log("Inside updateResponseFromCombinedCall");0==c.knowledgeBaseResp.length&&0==c.communityResp.length&&0==c.productDocumentationNumFound?c.noData=!0:(0==c.knowledgeBaseResp.length?(c.noKnowledgeBaseData=!0,c.currentSelectedCategory="productDocumentation"):c.currentSelectedCategory="knowledgeBase",0==c.knowledgeBaseResp.length&&0==c.productDocumentationNumFound&&(c.currentSelectedCategory="community"),0==c.productDocumentationNumFound&&(c.noProductDocumentationData=!0),0==c.communityResp.length&&
(c.noCommunitySearchData=!0));q(c);c.updateResponseObject()},u=function(){var b=a.defer();c.kbResultSize=c.kbResultSize?parseInt(c.kbResultSize):100;$.ajax({url:c.commonSupportBasePath+"?q\x3danswer\x26lang\x3d"+h.getLocale().toLowerCase()+"\x26k_wds\x3d"+c.q+"\x26ans_count\x3d"+c.kbResultSize,type:"GET"}).then(function(a,d,e){support_searchLogger("KB search response received",a);m.isResponseTypeJson(e)?(console.log("Inside Knowledge"),$.trim(a)&&void 0==a.Error?(support_commonLogger("product search returned from service, redirecting to support page."),
c.knowledgeBaseResp=a):(support_commonLogger("product list not returned from service."),c.noKnowledgeBaseData=!0)):(m.createErrorObject(e,"Get Product Search response object is not of type JSON",null),c.noKnowledgeBaseData=!0);b.resolve();q(c)},function(a){b.resolve();c.noKnowledgeBaseData=!0;m.createErrorObject(responseXhr,"Get Product Search response object is not of type JSON",a)});return b.promise},v=function(){var b=a.defer();$.ajax({url:c.commonSupportCommunitySearchBasePath+"?term\x3d"+c.q+
"\x26include_blurbs\x3dtrue",contentType:"application/json",headers:{Accept:"application/json","Content-Type":"application/json"},type:"GET"}).then(function(a,d,e){support_searchLogger("Community search response received",a);m.isResponseTypeJson(e)?$.trim(a)&&void 0==a.Error?(support_commonLogger("product search returned from service, redirecting to support page."),angular.forEach(a.posts,function(b){c.noCommunitySearchData=!1;var d={};d.description=b.blurb;angular.forEach(a.topics,function(a){b.topic_id==
a.id&&(d.title=a.fancy_title,d.link=c.commonSupportCommunitySiteBasePath+a.id,c.communityResp.push(d))})})):(support_commonLogger("WD Community Search not returned from service."),c.noCommunitySearchData=0==c.communityResp.length?!0:!1):(m.createErrorObject(e,"Get WD Community Search response object is not of type JSON",null),c.noCommunitySearchData=0==c.communityResp.length?!0:!1);b.resolve();q(c)},function(a){b.resolve();c.noCommunitySearchData=0==c.communityResp.length?!0:!1;m.createErrorObject(responseXhr,
"Get WD Community Search response object is not of type JSON",a)});return b.promise},A=function(){var b=a.defer();$.ajax({url:c.commonSupportSandiskCommunitySearchBasePath+"?term\x3d"+c.q+"\x26include_blurbs\x3dtrue",contentType:"application/json",headers:{Accept:"application/json","Content-Type":"application/json"},type:"GET"}).then(function(a,d,e){support_searchLogger("Sandisk Community search response received",a);m.isResponseTypeJson(e)?$.trim(a)&&void 0==a.Error?(support_commonLogger("Sandisk Community Search returned from service, redirecting to support page."),
angular.forEach(a.posts,function(b){c.noCommunitySearchData=!1;var d={};d.description=b.blurb;angular.forEach(a.topics,function(a){b.topic_id==a.id&&(d.title=a.fancy_title,d.link=c.commonSupportSandiskCommunitySiteBasePath+a.id,c.communityResp.push(d))})})):(support_commonLogger("Sandisk Community Search not returned from service."),c.noCommunitySearchData=0==c.communityResp.length?!0:!1):(m.createErrorObject(e,"Get Sandisk Community Search response object is not of type JSON",null),c.noCommunitySearchData=
0==c.communityResp.length?!0:!1);b.resolve();q(c)},function(a){b.resolve();c.noCommunitySearchData=0==c.communityResp.length?!0:!1;m.createErrorObject(responseXhr,"Get Product Search response object is not of type JSON",a)});return b.promise};c.getSelectedFilters=function(){support_commonLogger("in getSelectedFilters..");var a="",b;for(b in c.selectedDocType)c.selectedDocType[b]&&(a=""!=a?a+"%20OR%20":"",a+="%22"+b+"%22");g=""!=a?"\x26fq\x3dfilterSubDocumentType:("+a+")":"";n.start=c.start=0;y()};
c.getDocumentTypeFilter=function(){var b=a.defer();support_commonLogger("in getDocumentTypeFilter..");var d=t(c.facetQueryEndPoint)+"\x26facet.field\x3dfilterSubDocumentType";$.ajax({url:d,contentType:"application/json",headers:{Accept:"application/json","Content-Type":"application/json"},type:"GET"}).then(function(a,d,e){support_searchLogger("Product Document Type Filter response received",a);$.trim(a)?(support_commonLogger("product Document Type Filter returned from service"),a=JSON.parse(a),c.docTypeFilter=
a.facet_counts.facet_fields.filterSubDocumentType):support_commonLogger("product Document Type Filter not returned from service.");b.resolve();q(c)},function(a){m.createErrorObject(responseXhr,"Get Product Document Type Filter failed",a);b.resolve()});return b.promise};var y=function(b){support_commonLogger("in getSearchResults..");var d=a.defer(),e=t(c.searchResultEndPoint)+"\x26sort\x3ddocumentTypeDate%20desc\x26fq\x3d-subDocumentType:%22Do+Not+Show%22";support_commonLogger("url: "+e);$.ajax({url:e,
contentType:"application/json",headers:{Accept:"application/json","Content-Type":"application/json"},type:"GET"}).then(function(a,e,g){support_searchLogger("Product Documentation search response received",a);$.trim(a)?(support_commonLogger("product search returned from service, redirecting to support page."),a=JSON.parse(a),c.productDocumentationResp=a.response.docs,c.productDocumentationNumFound=a.response.numFound,"pageLoad"!=b&&c.updateResponseObject()):(support_commonLogger("product list not returned from service."),
scope.noProductDocumentationData=!0);d.resolve();q(c)},function(a){d.resolve();scope.noProductDocumentationData=!0;m.createErrorObject(responseXhr,"Get Product Documentation Search failed",a)});return d.promise};c.updateResponseObject=function(){c.searchResp=[];if("knowledgeBase"==c.currentSelectedCategory)if(c.numFound=c.knowledgeBaseResp.length,c.start+c.row<c.numFound)for(var a=c.start;a<c.start+c.row;a++)c.searchResp.push(c.knowledgeBaseResp[a]);else for(a=c.start;a<c.numFound;a++)c.searchResp.push(c.knowledgeBaseResp[a]);
else if("community"==c.currentSelectedCategory)if(c.numFound=c.communityResp.length,c.start+c.row<c.numFound)for(a=c.start;a<c.start+c.row;a++)c.searchResp.push(c.communityResp[a]);else for(a=c.start;a<c.numFound;a++)c.searchResp.push(c.communityResp[a]);else"productDocumentation"==c.currentSelectedCategory&&(c.numFound=c.productDocumentationNumFound,c.searchResp=c.productDocumentationResp);q(c)};c.changeCategory=function(a){c.start=0;c.currentSelectedCategory=a;c.updateResponseObject()};var t=function(a){a+=
-1<a.indexOf("?")?"\x26":"?";var b=a+"q\x3d"+encodeURIComponent(void 0!=c.q&&""!=c.q?c.q:"*:*");n.wt="json";for(key in n)"[object Array]"===Object.prototype.toString.call(n[key])?angular.forEach(n[key],function(a){b+="\x26"+key+"\x3d"+a}):b+="\x26"+key+"\x3d"+n[key];return b+g+"\x26fq\x3did:*/content/dam/doc-library*"};f(function(){!c.q||void 0==c.isNotSearchResultPage&&c.isNotSearchResultPage||r()});c.getDateObj=function(a){return new Date(a)};c.checkIfAssetIsNew=function(a){var b=parseInt(c.lastModifiedIndicator);
b=new Date((new Date).getTime()-864E5*b);return c.getDateObj(a)>b.getTime()};c.finished=function(){f(function(){})};c.openURL=function(a,b){b?e.open(a,"_self"):e.open(a,"_blank")};c.prevClick=function(){0<c.start&&(c.start=0<c.start-c.row?c.start-c.row:0,n.rows=c.row,n.start=c.start,"productDocumentation"==c.currentSelectedCategory?y():c.updateResponseObject(),c.isPagination=1);c.pageTop()};c.nextClick=function(){c.start+c.row<c.numFound&&(c.start+=c.row,n.rows=c.row,n.start=c.start,"productDocumentation"==
c.currentSelectedCategory?y():c.updateResponseObject(),c.isPagination=1);c.pageTop()};c.getSearchBlockClass=function(){return c.isFacetedSearch?"seventy col-sm-9":"col-sm-12"};c.setFocusOnPagination=function(){1==c.isPagination&&($("html, body").animate({scrollTop:$("#searchResultContainerDiv").position().top+500},1E3),f(function(){$("#searchResultContainerDiv h6:first a").focus().addClass("focusOutline")}),c.isPagination=0)};c.submitQuery=function(a){a&&(c.q=a.replace(/<\/?[^>]+(>|$)/g,""));c.q&&
(void 0==c.isNotSearchResultPage||c.isNotSearchResultPage?c.openURL(c.rewritePageURL(c.resultPagePath)+"?q\x3d"+c.q,!0):(void 0==c.q||""==c.q?(p.search({q:""}),emptySearch=!0):p.search({q:c.q}),n={},c.start=0,groupNumFoundArr=[],refreshSubDocTypeFacets=aaTrack=!0,lastSearchQ="",r()))};c.trackSearchResultClick=function(a,b){try{e.aa.trackSearchResultClick(a.currentTarget,b)}catch(z){}};c.filterDescription=function(a){return a.replace(/{{[^}}]+}}/g,"")};c.getTitle=function(a){return a.title?a.title[0]:
a.id};c.openProductFilterMobile=function(){angular.element(".filter-overlay").show();angular.element("body").addClass("overflow-hidden");angular.element(".left-filter").removeClass("hidden");var a=e.innerHeight,b=Math.abs(angular.element(".fliter_header").outerHeight()),c=Math.abs(angular.element(".filter_btn_height").outerHeight());angular.element(".filterItemWrap").height(a-b-c)};c.closeProductFilterMobile=function(){angular.element(".filter-overlay").removeAttr("style");angular.element("body").removeClass("overflow-hidden");
angular.element(".left-filter").addClass("hidden");angular.element(".filterItemWrap").removeAttr("style")};angular.element(e).bind("resize",function(){768<e.innerWidth&&angular.element(".close-productList-filter").triggerHandler("click")})}]);function support_commonLogger(a){-1<window.location.search.indexOf("debugSupportSearch\x3dtrue")&&console.log(a)}function support_searchLogger(a,c){-1<window.location.search.indexOf("debugSupportSearch\x3dtrue")&&console.log(a,null!=c?c:"")}
$(document).ready(function(){$(document).on("click",".redirectToUrl",function(){if(0==$("body").hasClass("disabledOutine")&&1==$(this).hasClass("redirectOnEnter")){var a=$(this).attr("data-url");window.location.href=a}else 0==$(this).hasClass("redirectOnEnter")&&(a=$(this).attr("data-url"),window.location.href=a)})});
$(".heroBannerCarousel").each(function(){var a=$(this).data("autorotate"),c=$(this).data("autorotatespeed"),b=$(this).data("pauseonhover");$(this).hasClass("promo-carousel")?$(this).slick({dots:!1,arrows:!0,infinite:!0,adaptiveHeight:!1,autoplay:a,autoplaySpeed:c?c:3E3,slidesToShow:1,pauseOnHover:b}):$(this).hasClass("wd-custom-carousel")?$(this).slick({dots:!0,arrows:!1,infinite:!0,adaptiveHeight:!1,autoplay:a,autoplaySpeed:c?c:3E3,slidesToShow:1,pauseOnHover:b,vertical:!0,verticalSwiping:!0,responsive:[{breakpoint:992,
settings:{vertical:!1,verticalSwiping:!1}}]}):("rtl"==$("html").attr("dir")?$(this).slick({dots:!0,arrows:!1,infinite:!0,adaptiveHeight:!1,autoplay:a,autoplaySpeed:c?c:3E3,fade:!0,slidesToShow:1,pauseOnHover:b,rtl:!0}):$(this).slick({dots:!0,arrows:!1,infinite:!0,adaptiveHeight:!1,autoplay:a,autoplaySpeed:c?c:3E3,fade:!0,slidesToShow:1,pauseOnHover:b}),$(this).on("afterChange",function(a,b){$(this).find("iframe")&&$(this).find("iframe").each(function(){$(this)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',
"*")})}))});$(function(){$(".heroBannerCarousel .play-btn").click(function(){var a=$(".heroBannerCarousel .wd-modal").attr("id"),c=$("#"+a).clone();$("body").append(c);$("#"+a).remove()})});
$(document).ready(function(){if($(".wd-custom-carousel").length){$(".wd-custom-carousel ul.slick-dots li:last").after('\x3cli role\x3d"presentation" class\x3d"wd-carousel-pauses"\x3e\x3cbutton type\x3d"button" role\x3d"tab"\x3e\x3csvg class\x3d"slickPause" xmlns\x3d"http://www.w3.org/2000/svg" height\x3d"20px" viewBox\x3d"5 5 20 20" width\x3d"18px" fill\x3d"#FFFFFF"\x3e\x3cpath d\x3d"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"/\x3e\x3c/svg\x3e\x3csvg class\x3d"slickPlay hidden" xmlns\x3d"http://www.w3.org/2000/svg" height\x3d"20px" viewBox\x3d"7 5 20 20" width\x3d"20px" fill\x3d"#FFFFFF"\x3e\x3cpath d\x3d"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/\x3e\x3c/svg\x3e\x3c/button\x3e\x3c/li\x3e');$(".wd-carousel-pauses button").click(function(){$(this).find(".slickPause").hasClass("hidden")?
($(".wd-custom-carousel").slick("slickPlay"),$(this).find(".slickPlay").addClass("hidden"),$(this).find(".slickPause").removeClass("hidden")):(console.log("slickPause hasClass.."),$(".wd-custom-carousel").slick("slickPause"),$(this).find(".slickPause").addClass("hidden"),$(this).find(".slickPlay").removeClass("hidden"))});var a=-1;$(".wd-custom-carousel .slick-slide").each(function(){$(this).height()>a&&(a=$(this).height())});$(".wd-custom-carousel .slick-slide").each(function(){$(this).height()<
a&&$(this).css("margin",Math.ceil((a-$(this).height())/2)+"px 0")})}});var storeProductCartApp=angular.module("StoreProductCartApp",["CommerceApp","CommonUtilApp","StoreProductBannerApp"]);storeProductCartApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);storeProductCartApp.directive("cartpromotionDir",function(){return function(a,c,b){a.initCartPromotion(b.cartPromotionsJsonString)}});
storeProductCartApp.service("StoreProductCartService",["$q","CommerceService","COMMERCE_CONSTANTS",function(a,c,b){pc_this=this;skuID="";sessionSkuRelatedProducts=null;this.showMiniCart=function(){angular.element(".mini-cart-trigger").addClass("triggerdFromAddToCart").triggerHandler("click")};this.updateCartData=function(a){pc_commonLogger("in updateCartData...");skuID=a;a=c.getSessionVariable(b.CART_DETAILS);null!=a&&"undefined"!=typeof a.cartId?(pc_commonLogger("cart details found in session storage"),
a=a.totalUnitCount,angular.element(".nav-cart-count-placeholder").html(a),angular.element(".mini-cart-trigger").addClass("triggerdFromAddToCart").triggerHandler("click")):pc_commonLogger("cart details not found in session storage")};this.setSkuId=function(a){skuID=a};this.getSkuId=function(){return skuID}}]);
storeProductCartApp.controller("StoreProductCartController",["$scope","$http","CommerceService","StoreProductCartService","COMMERCE_CONSTANTS","CommonUtilService","safeApply","$sce","StoreProductQuantityResetService",function(a,c,b,d,e,l,f,k,p){function m(){$(".cartwrapper").hasClass("updateCartData")&&($(".cartwrapper").find(".cartSignInBar").addClass("hidden"),$(".cartwrapper").find(".cartShowInProgress").addClass("hidden"),$(".cartwrapper").find(".cartShowCompleted").removeClass("hidden").addClass("miniCartAnimateBar"),
setTimeout(function(){$(".cartShowCompleted").removeClass("miniCartAnimateBar")},4600),setTimeout(function(){$(".cartShowCompleted").addClass("hidden");$(".cartwrapper").find(".cartSignInBar").removeClass("hidden")},5E3),setTimeout(function(){$(".cartwrapper").find(".cartSignInBar").addClass("miniCartAnimateBar")},5200))}function h(c){void 0!=c&&""!=c?(a.responseMessage=c,$(".showProductAddResponse").removeClass("hidden"),c=b.getSessionVariable(e.CART_DETAILS),p.resetQuantity(),null!=c&&(c.responseMessage=
"",b.setSessionVariable(e.CART_DETAILS,c))):$(".showProductAddResponse").addClass("hidden")}pc_commonLogger("in StoreProductCartController...");a.totalItems=0;a.cartItems=null;a.triggeredFromCartIcon=!1;a.productPriceObj={};a.promotion={};a.acceptedPromotions=[];a.isCatalogPurchasable=b.getPurchasableCatalog();a.platformCommerceURL=b.getPlatformCommerceURL();a.showCandyRackContainer=!1;a.candyRackProducts=[];a.cartObjectMap={};a.productQuantity={};a.productTypeMap={};a.pbScope=null;a.mainSkuId="";
a.mainSkuQuantity="";a.mainEvent="";a.isCandyRackCartCTAClicked=!1;a.upsellSku="";a.serviceProductSku="";a.isUserLoggedIn=!1;a.trustAsUrl=function(a){return k.trustAsResourceUrl(a)};a.initCartPromotion=function(c){a.promotionsInfoFromI18n=JSON.parse(c);pc_commonLogger("cart promotions",a.promotionsInfoFromI18n);var d=b.getSessionVariable(e.USER_DETAILS);userInfoLogger("in initUserInfo::sessionUserDetails::"+JSON.stringify(d));null!=d?(userInfoLogger("in initUserInfo::userid::"+d.uid),"undefined"!=
typeof d.uid?(a.isUserLoggedIn=!0,d=b.getSessionVariable(e.USER_DETAILS),a.totalItems=d.wishlistCount,a.isCustomerChannelB2B=d.customerChannel&&"B2B"==d.customerChannel?!0:!1,a.wdCreditEnabledForUser=d.enableWDCredit,a.firstName=d.firstName,f(a)):(userInfoLogger("in initUserInfo: anonymous user ..."),a.isUserLoggedIn=!1,a.isCustomerChannelB2B=!1,a.wdCreditEnabledForUser=!1)):b.getUser().then(function(){d=b.getSessionVariable(e.USER_DETAILS);userInfoLogger("in initUserInfo: user info :"+JSON.stringify(d));
null!=d&&"undefined"!=typeof d.uid?(a.isUserLoggedIn=!0,a.totalItems=d.wishlistCount,a.isCustomerChannelB2B=d.customerChannel&&"B2B"==d.customerChannel?!0:!1,a.wdCreditEnabledForUser=d.enableWDCredit,f(a)):(userInfoLogger("in initUserInfo: anonymous user ..."),a.isUserLoggedIn=!1,a.isCustomerChannelB2B=!1,a.wdCreditEnabledForUser=!1)},function(){userInfoLogger("in initUserInfo: user info error ...");a.isUserLoggedIn=!1;a.isCustomerChannelB2B=!1;a.wdCreditEnabledForUser=!1});f(a)};a.showCandyRackProducts=
function(c,d,g,h,l){try{var q=[],n=[],m=[];a.pbScope=c;"undefined"==typeof l&&(l=a.pbScope.product.quantity);a.mainSkuId=g;a.mainSkuQuantity=l;a.productQuantity[g]=l;a.mainEvent=h;pc_commonLogger("adding main sku to cart obj");a.updateCartObject(g,l,"MAIN");d.forEach(function(a,c){n.push(a.code);null==b.getSessionVariable(a.code)&&m.push(a.code)});pc_commonLogger("all product ID's",n.join());pc_commonLogger("missingFromSessionProductIds",m.join());0<m.length?b.getProductPrice(n.join()).then(function(c){d.forEach(function(c,
d){a.productQuantity[c.code]=1;d=b.getSessionVariable(c.code);pc_commonLogger("product cart - candy rack sku inventory",d);null==d||!d.purchasable||"Active"!=d.productLifeCycle||"inStock"!=d.stockStatus&&"lowStock"!=d.stockStatus?pc_commonLogger("product cart - check inventory",c):q.push(c)})},function(b){pc_commonLogger("product cart - Rejection from commerce service");f(a)}):d.forEach(function(c,d){a.productQuantity[c.code]=1;d=b.getSessionVariable(c.code);pc_commonLogger("product cart - candy rack sku inventory",
d);null==d||!d.purchasable||"Active"!=d.productLifeCycle||"inStock"!=d.stockStatus&&"lowStock"!=d.stockStatus?pc_commonLogger("product cart - check inventory",c):q.push(c)});a.productReferences=b.getSessionVariable(e.PRODUCT_REFERENCES);null==a.productReferences?(pc_commonLogger("calling get product references from product cart component. . ."),b.getProductReferences().then(function(){a.productReferences=b.getSessionVariable(e.PRODUCT_REFERENCES);a.showCandyRackContainer=!0;a.candyRackProducts=q;
f(a);a.getCartData();setTimeout(function(){a.triggerCandyRackAnalyticsEvent("SC_CRI")},0)},function(a){pc_commonLogger("Issue in getting product references ",a)})):(a.showCandyRackContainer=!0,a.candyRackProducts=q,f(a),a.getCartData(),setTimeout(function(){a.triggerCandyRackAnalyticsEvent("SC_CRI")},0))}catch(y){console.error("Issue in showing candy rack products  ",y),a.pbScope.triggerAddToCart(a.mainSkuId,a.mainEvent,a.mainSkuQuantity,a)}};a.triggerCandyRackAnalyticsEvent=function(b){try{var c=
{};c.sourceSkuid=a.mainSkuId;c.upsellSkuid=[];c.crosssellSkuid=[];a.candyRackProducts.forEach(function(a){"UPSELLING"==a.refType?c.upsellSkuid.push(a.code):c.crosssellSkuid.push(a.code)});b=window.aa.createEvent(b,c);window.dispatchEvent(b)}catch(g){console.log("Error while triggering analytics Candy Rack",b)}};a.updateCartObject=function(b,c,d){var e=!0;"UPSELLING"==d?a.isUpsellAdded?(delete a.cartObjectMap[a.upsellSku],pc_commonLogger("upsellSku equal ?  ",b,a.upsellSku),b==a.upsellSku?(a.isUpsellAdded=
!1,a.upsellSku="",e=!1):(a.upsellSku=b,a.isUpsellAdded=!0)):(a.upsellSku=b,a.isUpsellAdded=!0):"SERVICE"==d?a.isServiceProductAdded?(delete a.cartObjectMap[a.serviceProductSku],pc_commonLogger("serviceProductSku equal ?  ",b,a.serviceProductSku),b==a.serviceProductSku?(a.isServiceProductAdded=!1,a.serviceProductSku="",e=!1):(a.serviceProductSku=b,a.isServiceProductAdded=!0)):(a.serviceProductSku=b,a.isServiceProductAdded=!0):null!=a.cartObjectMap[b]&&a.cartObjectMap[b].quantity==a.productQuantity[b]&&
(delete a.cartObjectMap[b],e=!1);if(e){var g={};g.quantity=a.productQuantity[b];var h={};h.code=b;"SERVICE"==d&&(h.productType={code:"SERVICE"},h.associatedProductCode=a.mainSkuId);g.product=h;a.cartObjectMap[b]=g}f(a);pc_commonLogger("cartObj",a.cartObjectMap);"MAIN"!=d&&a.triggerCandyRackPopUpActionsEvent(b,c,d,e)};a.triggerCandyRackPopUpActionsEvent=function(b,c,d,e){try{var g={},f="";"UPSELLING"==d?(g.upsellSkuid=b,g.upsellSkuUnit=a.productQuantity[a.mainSkuId],f=e?"SC_CRU":"SC_CRUR"):(g.crosssellSkuid=
b,g.crosssellSkuUnit=c,f=e?"SC_CRA":"SC_CRAR");f=window.aa.createEvent(f,g);window.dispatchEvent(f)}catch(v){console.log("Error while triggering analytics Candy Rack Popup Actions SC_CRA,SC_CRAR,SC_CRU,SC_CRUR event")}};a.addToCartCandyRack=function(c){a.dataRequest={};var h=a.mainSkuId;a.isCandyRackCartCTAClicked=!0;if(c)try{null!=a.cartObjectMap[a.upsellSku]&&(delete a.cartObjectMap[a.mainSkuId],a.cartObjectMap[a.upsellSku].quantity=a.productQuantity[a.mainSkuId],h=a.upsellSku,null!=a.cartObjectMap[a.serviceProductSku]&&
(a.cartObjectMap[a.serviceProductSku].product.associatedProductCode=a.upsellSku));null!=a.cartObjectMap[a.serviceProductSku]&&(a.cartObjectMap[a.serviceProductSku].quantity=a.productQuantity[a.mainSkuId]);a.showCandyRackContainer=!a.showCandyRackContainer;$(".cartwrapper").find(".cartShowInProgress").removeClass("hidden");768>$(window).width()&&$("html, body").animate({scrollTop:0},600);a.dataRequest.cartEntries=Object.values(a.cartObjectMap);pc_commonLogger("Add to cart candyrack : Json Object",
a.dataRequest);a.isNewCartInstance=!1;var g=b.getSessionVariable(e.CART_DETAILS);null==g||"undefined"!=typeof g.cartId&&null!=g.cartId&&"undefined"!=typeof g.cartEntries&&0!=g.cartEntries.length||(a.isNewCartInstance=!0);b.addMultipleProductToCart(a.dataRequest).then(function(b){f(a);pc_commonLogger("returned from adding product to cart, now update cart");d.setSkuId(h);a.showMiniCart();a.triggerCandyRackAddToCartAnalyticsEvent()},function(){console.error("Issue while adding candy rack products  ");
a.pbScope.triggerAddToCart(a.mainSkuId,a.mainEvent,a.mainSkuQuantity,a)})}catch(r){console.error("Issue while adding candy rack products  ",r),a.pbScope.triggerAddToCart(a.mainSkuId,a.mainEvent,a.mainSkuQuantity,a)}else a.pbScope.triggerAddToCart(a.mainSkuId,a.mainEvent,a.mainSkuQuantity,a)};a.triggerCandyRackAddToCartAnalyticsEvent=function(){try{var c={},d=b.getSessionVariable(e.CART_DETAILS),g=Object.keys(a.cartObjectMap);c.cartID=d.cartId;if(a.isUpsellAdded){var f={},h=a.getProductInfo(a.upsellSku);
f.productName=h.pageTitle;f.productSkuName=h.variantTitle;f.productID=h.pagePath.substring(h.pagePath.lastIndexOf("/")+1);f.skuID=a.upsellSku;l=a.productPriceObj[a.upsellSku];f.productUnitPrice=l.prices.list.amount.toFixed(2).toString();f.productSalePrice=l.prices.sale.amount.toFixed(2).toString();f.productDiscount=(l.prices.list.amount-l.prices.sale.amount).toFixed(2);c.upsellProduct=f}else{h={};f=a.getProductInfo(a.mainSkuId);h.productName=f.pageTitle;h.productSkuName=f.variantTitle;h.productID=
f.pagePath.substring(f.pagePath.lastIndexOf("/")+1);h.skuID=a.mainSkuId;var l=a.productPriceObj[a.mainSkuId];h.productUnitPrice=l.prices.list.amount.toFixed(2).toString();h.productSalePrice=l.prices.sale.amount.toFixed(2).toString();h.productDiscount=(l.prices.list.amount-l.prices.sale.amount).toFixed(2);c.mainProduct=h}var m=[];g.forEach(function(b){if(b!=a.upsellSku&&b!=a.mainSkuId){var c={},d=a.getProductInfo(b);c.productName=d.pageTitle;c.productSkuName=d.variantTitle;c.productID=d.pagePath.substring(d.pagePath.lastIndexOf("/")+
1);c.skuID=b;b=a.productPriceObj[b];c.productUnitPrice=b.prices.list.amount.toFixed(2).toString();c.productSalePrice=b.prices.sale.amount.toFixed(2).toString();c.productDiscount=(b.prices.list.amount-b.prices.sale.amount).toFixed(2);m.push(c)}});m.length&&(c.crosssellProducts=m);pc_commonLogger("candy rack addtocart analytics dataObj",c);var k=window.aa.createEvent(a.isNewCartInstance?"CANDY_RACK_SC_FIRST":"CANDY_RACK_ADD_TO_CART",c);window.dispatchEvent(k)}catch(y){console.log("Error while triggering analytics Candy Rack add to cart event")}};
a.increment=function(b){a.productQuantity[b]++;a.cartObjectMap[b]&&(a.cartObjectMap[b].quantity=a.productQuantity[b]);f(a);pc_commonLogger("cartObj after increment",a.cartObjectMap)};a.decrement=function(b){a.productQuantity[b]--;a.cartObjectMap[b]&&(a.cartObjectMap[b].quantity=a.productQuantity[b]);f(a);pc_commonLogger("cartObj after decrement",a.cartObjectMap)};a.resetCandyRackData=function(){a.showCandyRackContainer=!1;a.candyRackProducts=[];a.cartObjectMap={};a.productQuantity={};a.productTypeMap=
{};a.pbScope=null;a.mainSkuId="";a.mainSkuQuantity="";a.mainEvent="";a.upsellSku="";a.serviceProductSku="";a.isCandyRackCartCTAClicked=!1;a.isUpsellAdded=!1;a.isServiceProductAdded=!1};a.getCartData=function(){pc_commonLogger("in getCartData...");if(a.isCatalogPurchasable){var c=b.getSessionVariable(e.CART_DETAILS);null!=c&&"undefined"!=typeof c.cartId?(a.totalItems=c.totalUnitCount,f(a)):b.getCartSummary().then(function(d){pc_commonLogger(d);pc_commonLogger("product cart - got cart details");c=b.getSessionVariable(e.CART_DETAILS);
pc_commonLogger(c);null!=c&&"undefined"!=typeof c.cartId&&(a.totalItems=c.totalUnitCount,f(a))})}};a.getProductInfo=function(a){pc_commonLogger("in getProductInfo...");var c={},d=b.getSessionVariable(e.PRODUCT_REFERENCES);d&&d[a]?(c.pagePath=d[a].pagePath,c.pageTitle=d[a].pageTitle,c.urlFileReference=d[a].urlFileReference,c.variantTitle=d[a].variantTitle):b.getProductReferences().then(function(){var d=b.getSessionVariable(e.PRODUCT_REFERENCES);d&&d[a]&&(c.pagePath=d[a].pagePath,c.pageTitle=d[a].pageTitle,
c.urlFileReference=d[a].urlFileReference,c.variantTitle=d[a].variantTitle)});pc_commonLogger(c);return c};a.selectBogoProduct=function(b){b.selected?$(".addToCartBogo").addClass("pointer-events-none opacity-25"):$(".addToCartBogo").removeClass("pointer-events-none opacity-25");pc_commonLogger("in selectBogoProduct...");for(var c=0;c<a.cartItems.promotions.length;c++)for(var d=0;d<a.cartItems.promotions[c].targetProducts.length;d++)a.cartItems.promotions[c].targetProducts[d].selected&&a.cartItems.promotions[c].targetProducts[d].productId!=
b.productId&&(a.cartItems.promotions[c].targetProducts[d].selected=!1);return!b.selected};a.getProductPrice=function(c){pc_commonLogger("in getProductPrice...");var d=b.getSessionVariable(c);null!=d&&null!=d.prices?(a.productPriceObj[c]=d,f(a)):b.getProductPrice(c).then(function(){var d=b.getSessionVariable(c);null!=d&&(a.productPriceObj[c]=d,f(a))})};a.showMiniCart=function(){$(".mini-cart-trigger").hasClass("triggerdFromAddToCart")?$(".mini-cart-trigger").removeClass("triggerdFromAddToCart"):$(".cartinitloadmessage").removeClass("hidden");
$(".addToCartBogo").addClass("pointer-events-none opacity-25");pc_commonLogger("in showMiniCart...");$(".cartwrapper").removeClass("hidden");$("body").addClass("overflow-hidden");b.getCartInfo().then(function(){pc_commonLogger("product cart - got cart info");a.promotionsFound=!1;var c=b.getSessionVariable(e.CART_DETAILS);if(c.promotions&&c.promotions.length&&Object.keys(a.promotionsInfoFromI18n).length){for(var l=0;l<c.promotions.length;l++){var g=c.promotions[l].consumedEntries;if(g[0]&&g[0].code==
d.getSkuId()){a.promotion.code=g[0].code;a.promotion.orderEntryNumber=g[0].orderEntryNumber;a.promotion.targetProducts=c.promotions[l].targetProducts;var k=c.promotions[l].msgText.split("|")[1];a.promotion.key=k;a.promotion.info=a.promotionsInfoFromI18n.promotions[0][k];pc_commonLogger(a.promotion);a.promotionsFound=-1==k.indexOf("Default")}}if(!a.promotionsFound){for(l=0;l<c.promotions.length;l++)a.defaultPromotions={},g=c.promotions[l].consumedEntries,k=c.promotions[l].msgText.split("|")[1],-1!=
k.indexOf("Default")&&(a.defaultPromotions[g[0].code]=a.promotionsInfoFromI18n.promotions[0][k].desc);pc_commonLogger(a.defaultPromotions)}}c.acceptedPromotions&&(a.acceptedPromotions=c.acceptedPromotions.filter(function(a){if(a.isPromotionAccepted)return a}));a.cartItems=c;a.totalItems=c.totalUnitCount;f(a);m();h(c.responseMessage);$("[data-target\x3d'#openCartModal']").removeAttr("data-target");$(".addToCartBtn").is(".addToCartBtnActive")?($(".addToCartBtn").attr("data-target","#openCartModal"),
$(".addToCartBtn").removeClass("addToCartBtnActive")):$(".mini-cart-trigger").attr("data-target","#openCartModal");setTimeout(function(){tabKeyFunctionality("#openCartModal")},1E3)})};a.addToCart=function(){pc_commonLogger("in addToCart...");if(0<$(".bogoProduct.active").length){var c=$(".bogoProduct.active").attr("data-productId"),d=$(".bogoProduct.active").attr("data-quantity");d="undefined"!=typeof d?parseInt(d):1;pc_commonLogger("productId..."+c);pc_commonLogger("quantity..."+d);b.addProductToCart(c,
d).then(function(b){a.promotion={};a.showMiniCart();a.promotionsFound=!1;f(a)})}};a.accept3PPromotion=function(c,d){pc_commonLogger("in acceptPromotion...");pc_commonLogger("consumed entry..."+a.promotion.code);var e;d&&0<$(".bogoProduct.active").length&&(e=$(".bogoProduct.active").attr("data-productId"));b.accept3PPromotion(a.promotion.key,c,e).then(function(b){a.promotion={};a.showMiniCart();a.promotionsFound=!1;f(a)})};a.hideMiniCart=function(){$(".cartwrapper").addClass("hidden");$("body").removeClass("overflow-hidden");
a.showCandyRackContainer&&!a.isCandyRackCartCTAClicked?(a.triggerCandyRackAnalyticsEvent("SC_CRC"),a.pbScope.triggerAddToCart(a.mainSkuId,a.mainEvent,a.mainSkuQuantity,a)):($(".cartwrapper").removeClass("updateCartData"),$(".cartwrapper").find(".cartShowInProgress").addClass("hidden"),$(".cartwrapper").find(".cartShowCompleted").addClass("hidden"),$(".cartwrapper").find(".cartSignInBar").removeClass("miniCartAnimateBar"));a.resetCandyRackData()};a.handleSkipBogoPromotions=function(){pc_commonLogger("in handleSkipBogoPromotions");
var c=b.getSessionVariable(e.CART_DETAILS);b.getCartInfo().then(function(){pc_commonLogger("product cart - got cart details");c=b.getSessionVariable(e.CART_DETAILS);a.skipBogoPromotion(c)})};a.skipBogoPromotion=function(c){c=a.promotion.code;var d=a.promotion.orderEntryNumber;pc_commonLogger("skipping bogo promotion: consumed entry :"+c+" , entryNumber:"+d);b.skipBogoOffer(c,d).then(function(b){pc_commonLogger("bogo promotion skipped");a.promotion={};a.showMiniCart();f(a)},function(b){pc_commonLogger("failed to skip bogo promotion");
a.promotion={};a.showMiniCart();f(a)})};a.openLoginPopupFromCart=function(b){a.hideMiniCart();b=$(".commerce-user-info .wdAngularApp");if("undefined"!=typeof b)for(var c=0;c<b.length;c++){var d=angular.element(b[c]).scope();d.triggerSignInModal();d.$apply()}};a.closeSignInBanner=function(a){$(a.currentTarget.parentElement).hide()};a.rewritePageURL=function(a){return l.rewritePageURL(a)};a.gotoCommerceURL=function(a){return b.gotoCommerceURL(a)}}]);
function pc_commonLogger(a,c){-1<window.location.search.indexOf("debugProductCart\x3dtrue")&&console.log("PC: "+a,c?c:"")}var productCardApp=angular.module("ProductCardApp",["CommerceApp","ngSanitize"]);productCardApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);productCardApp.directive("custompromotionDir",function(){return function(a,c,b){a.initCustomPromotion(b.customPromotionsJsonString)}});
productCardApp.controller("ProductCardController",["COMMERCE_CONSTANTS","CommonUtilService","$scope","$http","CommerceService","safeApply",function(a,c,b,d,e,l){b.isCatalogPurchasable=e.getPurchasableCatalog();b.initCustomPromotion=function(a){try{b.customPromotions=JSON.parse(a),spb_commonLogger("custom promotions",b.customPromotios),l(b)}catch(k){console.error("product card : error while parsing custom promotions",k)}};b.$watchGroup(["productID","skuID"],function(){b.productReferenceObject={};var c=
e.getSessionVariable(a.PRODUCT_REFERENCES);c&&(c[b.productID]||c[b.skuID])?(productcard_commonLogger("mapping product obj for product id : "+b.productID+": ",c[b.productID]),b.productReferenceObject=c[""!=b.productID?b.productID:b.skuID],b.skuReferenceObject="",null!=b.skuID&&""!=b.skuID&&(b.skuReferenceObject=c[b.skuID]),b.getProductPriceInfo(),b.updateSkuImage(),b.updateSkuTitle(),b.updatePagePath(),b.initCustomPromotionInfo(b.productID,b.skuID,c)):(productcard_commonLogger("productReferences not found in session. Calling product reference service."),
e.getProductReferences().then(function(){c=e.getSessionVariable(a.PRODUCT_REFERENCES);productcard_commonLogger("mapping product obj for product id : "+b.productID+": ",c[b.productID]);b.productReferenceObject=c[""!=b.productID?b.productID:b.skuID];b.skuReferenceObject="";null!=b.skuID&&""!=b.skuID&&(b.skuReferenceObject=c[b.skuID]);b.getProductPriceInfo();b.updateSkuImage();b.updateSkuTitle();b.updatePagePath();b.initCustomPromotionInfo(b.productID,b.skuID,c)},function(a){productcard_commonLogger("defferd from commerce service : getProductReferences Method",
a)}))});b.getProductPriceInfo=function(){var a=b.productID,c=b.skuID;if(null!=c&&""!=c){var d=e.getSessionVariable(c);null==d||null==d.prices?e.getProductPrice(c).then(function(a){productcard_commonLogger("SKU Info found for: "+c+"response "+a);d=e.getSessionVariable(c);null!=d?(b.productReferenceObject.minPricedSkuObj=d,l(b)):productcard_commonLogger("SKU Code "+c+"not found in session.")},function(a){productcard_commonLogger("SKU Info not found for: "+c+"response "+a)}):(b.productReferenceObject.minPricedSkuObj=
d,l(b))}else{var m=e.getSessionVariable(a);null==m?e.getBaseProductInfo(a,b.productReferenceObject.skuList).then(function(){m=e.getSessionVariable(a);if(null!=m){var c=m.minPricedSKU;""!=c&&(c=b.getSessionProductPricingInfo(c),b.productReferenceObject.minPricedSkuObj=c,l(b))}else productcard_commonLogger("Product "+a+"not found in session.")},function(b){productcard_commonLogger("Product Info not found for: "+a+"response "+b)}):(c=m.minPricedSKU,""!=c&&(d=b.getSessionProductPricingInfo(c),b.productReferenceObject.minPricedSkuObj=
d,l(b)))}};b.updateSkuImage=function(){null!=b.skuID&&""!=b.skuID&&null!=b.skuReferenceObject.urlFileReference&&""!=b.skuReferenceObject.urlFileReference&&(b.productReferenceObject.urlFileReference=b.skuReferenceObject.urlFileReference)};b.updateSkuTitle=function(){null!=b.skuID&&""!=b.skuID&&null!=b.skuReferenceObject.variantTitle&&""!=b.skuReferenceObject.variantTitle&&(b.productReferenceObject.pageTitle=b.skuReferenceObject.variantTitle)};b.updatePagePath=function(){null!=b.skuID&&""!=b.skuID&&
null!=b.skuReferenceObject.pagePath&&""!=b.skuReferenceObject.pagePath&&(b.productReferenceObject.pagePath=b.skuReferenceObject.pagePath)};b.getSessionProductPricingInfo=function(a){a=e.getSessionVariable(a);return null!=a?a:""};b.rewritePageURL=function(a){void 0!=a&&0<a.trim().length&&(a=c.rewritePageURL(a),null!=b.skuID&&""!=b.skuID&&(a=a.concat("#"+b.skuID)));return a};b.initCustomPromotionInfo=function(a,c,d){productcard_commonLogger("initCustomPromotionInfo");!a&&c&&d[c]&&(a=d[c].productId);
b.customPromotionInfo="";a=d[a];void 0!=b.customPromotions&&void 0!=b.customPromotions[a.attPromotionType]&&(b.customPromotionInfo=b.customPromotions[a.attPromotionType][a.attPromotionMessageId],productcard_commonLogger(b.customPromotionInfo))};b.isBadgeStatusActive=function(a,b){return c.isBadgeStatusActive(a,b)}}]);function productcard_commonLogger(a,c){-1<window.location.search.indexOf("debugProductCard\x3dtrue")&&console.log("Product Card :"+a,null!=c?c:"")}
$(document).ready(function(){$("input.referrer_field").each(function(){$(this).val(document.referrer)});$("input.dam_excelpath").each(function(){var a=$(this).val(),c=$(this).next(),b=$(this).prev();if(b&&void 0!=b.val())var d=b.val();getJsonFrmExcelSheet(a,"").then(function(a){jsonData=a[0].data;for(a=0;a<jsonData.length;++a){var b=jsonData[a].Label,e=jsonData[a].Value;e=void 0==e?b:e;-1==d.indexOf(b)&&c.append($("\x3coption /\x3e").val(e).text(b))}})});$(".validate-portal-form form").submit(function(a){0==
validateForm(this,createFormObjectForAnalytics(this))&&submitForm(this);return!1})});
$(window).bind("load",function(){$("#userLoad").length&&angular.injector(["ng","UserApp"]).invoke(["UserService",function(a){var b=a.getSessionVariable("userInfo");null==b?a.getUserDetails().then(function(){b=a.getSessionVariable("userInfo");null!=b&&setUserName(b.givenName+" "+b.familyName)}):setUserName(b.givenName+" "+b.familyName)}]);var a=new Date,c=a.getMonth()+1,b=a.getDate();a=a.getFullYear();10>c&&(c="0"+c.toString());10>b&&(b="0"+b.toString());c=a+"-"+c+"-"+b;0<$('input.hide-future-date[type\x3d"date"]').length&&
$('input.hide-future-date[type\x3d"date"]').attr("max",c);0<$('input.hide-past-date[type\x3d"date"]').length&&$('input.hide-past-date[type\x3d"date"]').attr("min",c)});function setUserName(a){form_commonLogger("fullName: ",a);""!=a?($(".loggedinuserinfo-fullname").each(function(){$(this).html(a)}),$(".loggedinuserinfo-userid").each(function(){$(this).html(a)})):form_commonLogger("fullName is empty")}
function customFormSubmitAction(a){form_commonLogger("in customFormSubmitAction...");if(0==validateForm(a,createFormObjectForAnalytics(a))){$("#"+a.id).find('button[type\x3d"submit"]').prop("disabled",!0).addClass("bg-grey-2 border-grey-2 cursor-wait");var c=$("#commonUtilLoad").attr("data-enableRecaptcha");form_commonLogger("enableRecaptcha: "+c);var b=$("#"+a.id+' [name\x3d"formName"]').val();if("true"==c){var d=void 0!=b?b.replace(/[^a-z]/gi,""):"",e=$("#commonUtilLoad").attr("data-recaptchaSiteKey");
grecaptcha.ready(function(){grecaptcha.execute(e,{action:d}).then(function(b){b=$("\x3cinput\x3e").attr("type","hidden").attr("name","g-recaptcha-response").val(b);$("#"+a.id).append(b);submitForm(a)})})}else submitForm(a)}return!1}
function validateForm(a,c){for(var b=a.getElementsByTagName("*"),d=0;d<b.length;d++)$(b[d]).hasClass("validate")&&validateInput(b[d],c);b=document.getElementById("captcha");void 0!=b&&(c=grecaptcha.getResponse(),b=$(b).find(".error-message"),0==c.length&&(invalid=!0,setCaptchaErrorStatus(b,invalid)));return $(a).find(".error-message.show").length}
function setCaptchaErrorStatus(a,c){if(c){a.addClass("show");a.closest(".form-group").addClass("invalidField");try{formObjAnalytics.errorMessage="Client validation Error | "+a[0].innerText;var b=window.aa.createEvent("FORM_ERROR",formObjAnalytics);window.dispatchEvent(b)}catch(d){form_commonLogger("Error while triggering analytics FORM_ERROR event",d)}}}
$(".dp-validate").bind("change blur",function(){value=$(this).val();if(""==value||null==value){$(this).closest(".input").find(".error-message").addClass("show");$(this).closest(".form-group").addClass("invalidField");$(this).closest(".input").find(".error-message.show").stop().animate({right:"50px"},150);try{var a=createFormObjectForAnalytics($(this).closest("form"));a.errorMessage="Client validation Error | "+$(this).closest(".input").find(".error-message")[0].innerText;var c=window.aa.createEvent("FORM_ERROR",
a);window.dispatchEvent(c)}catch(b){form_commonLogger("Error while triggering analytics FORM_ERROR event",b)}}else $(this).closest(".input").find(".error-message.show").stop().animate({right:"0px"},150),$(this).closest(".input").find(".error-message").removeClass("show"),$(this).closest(".form-group").removeClass("invalidField")});$(document).on("keyup",".validate",function(){$(this).next(".error-message").hasClass("show")&&validateInput(this,createFormObjectForAnalytics($(this).closest("form")))});
$(document).on("focusout",".validate",function(){validateInput(this,createFormObjectForAnalytics($(this).closest("form")))});
function validateInput(a,c){var b,d=$(a).next(".error-message");$(a).hasClass("email")&&(b=validateEmail(a.value));$(a).hasClass("url")&&(b=validateUrl(a.value));$(a).hasClass("empty")&&(b=validateEmpty(a.value));$(a).hasClass("onlyNumbers")&&(b=validateOnlyNumbers(a.value));$(a).hasClass("onlyAlphabets")&&(b=validateOnlyText(a.value));$(a).hasClass("requiredSelection")&&(b=validateSelection(a));$(a).hasClass("minFieldLength")&&(b=validateMinFieldLength(a));$(a).hasClass("compareFieldValue")&&(b=
compareFieldValue(a));if(b){d.addClass("show");d.closest(".form-group").addClass("invalidField");try{c.errorMessage="Client validation Error | "+d[0].innerText;var e=window.aa.createEvent("FORM_ERROR",c);window.dispatchEvent(e)}catch(l){form_commonLogger("Error while triggering analytics FORM_ERROR event",l)}}else d.removeClass("show"),d.closest(".form-group").removeClass("invalidField")}
function validateEmail(a){if(!/^(([^<>()[\]\.,;:\s@"]+(\.[^<>()[\]\.,;:\s@"]+)*)|(".+"))@(([^<>()[\]\.,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]{2,})$/i.test(a)||128<a.length)return!0}function validateUrl(a){if(!/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/.test(a))return!0}function validateOnlyNumbers(a){if(!/^-?\d+\.?\d*$/.test(a))return!0}function validateOnlyText(a){if(!/^[a-zA-Z\s]+$/.test(a))return!0}function validateEmpty(a){a=a.trim();if(""==a||null==a)return!0}
function validateSelection(a){if(0==$(a).find(":checked").length)return!0}function compareFieldValue(a){var c=$(a).attr("data-compare-with");c=$("#"+c).val();if(""==a.value||null==a.value||a.value!=c)return!0}function validateMinFieldLength(a){var c=$(a).attr("data-min-length");if($(a).val().trim().length<c)return!0}function createFormObjectForAnalytics(a){var c={};c.formRef=a;return c}
function openPopUp(a){0==validateForm(a.closest("form"))&&($(a).closest("form").find(".wd-modal").removeClass("hidden"),$(".wd-rellax").addClass("wd-rellax-disable"),$("body").addClass("overflow-hidden"))}function closePopUp(a){$(a).closest(".wd-modal").addClass("hidden");$("body").removeClass("overflow-hidden");$(".wd-rellax").removeClass("wd-rellax-disable")}
$(".sub-terms-conditions-btn").click(function(){if(0>=$(".acceptTerms input[type\x3dradio]:checked").length){$(this).closest(".modal-body").find(".error-message").addClass("show");try{var a=createFormObjectForAnalytics($(this).closest("form"));a.errorMessage="Client validation Error | "+$(this).closest(".modal-body").find(".error-message")[0].innerText;var c=window.aa.createEvent("FORM_ERROR",a);window.dispatchEvent(c)}catch(b){form_commonLogger("Error while triggering analytics FORM_ERROR event",
b)}return!1}$(this).closest(".modal-body").find(".error-message").removeClass("show");return!0});$(".acceptTerms input[type\x3dradio]").click(function(){$(this).closest(".modal-body").find(".error-message").removeClass("show")});function getMessageFromResponse(a,c){var b="";a=a.split(",");for(var d=0;d<a.length;d++)if(a[d].startsWith(c)){b=a[d].substring(a[d].indexOf(":")+1);break}return b}
function updateSuccessMsg(a,c){for(var b=0;b<a.length;b++)-1!=c.indexOf(a[b].code)&&(c=c.replace(a[b].code,a[b].message));return c}function updateHTTPDomainValue(a){a.startsWith("http://")?a=a.replace("http://","http_"):a.startsWith("https://")&&(a=a.replace("https://","https_"));return a}
function submitForm(a){form_commonLogger("in submitForm with formObject: ",a);var c=$("#"+a.id);c.find('button[type\x3d"submit"]').prop("disabled",!0).addClass("disabled bg-grey-2 border-grey-2 cursor-wait");var b=$("#commonUtilLoad").attr("data-language")+"_"+$("#commonUtilLoad").attr("data-country");$("#"+a.id+' [type\x3d"submit"]').prop("disabled",!0).addClass("disabled");$("#"+a.id+' [type\x3d"reset"]').prop("disabled",!0).addClass("disabled");var d=$("#"+a.id).serializeArray();$.each(d,function(a,
b){b.value.includes("://")&&(b.value=updateHTTPDomainValue(b.value))});var e=[];$("#"+a.id).find("input[type\x3dcheckbox]:checked").each(function(){var b=this.name,c=$("#"+a.id).find("input[name\x3d"+b+"]:checked"),f=[];if(1<c.length&&-1==e.indexOf(b))for(c.each(function(){f.push(this.value)}),c=0;c<d.length;++c)d[c].name==b&&(d[c].value=f,e.push(b))});d=$.param(d);d+="\x26locale\x3d"+b;$("#"+a.id).find("input[data-boolean-type\x3dtrue]:checkbox:not(:checked)").each(function(){var a=this.name;d="unsubscribed"!=
a?d+("\x26"+a+"\x3dfalse"):d+"\x26unsubscribed\x3dtrue"});var l=$("#"+a.id).find('input[name\x3d"showServerResponse"]').val(),f=$("#"+a.id).find('input[name\x3d"serverResponseMessage"]').val(),k=$("#"+a.id).find('input[name\x3d"showErrorFromServerResponse"]').val(),p=$("#"+a.id).find('input[name\x3d"serverResponseErrorMessage"]').val();$.ajax({method:"POST",url:a[0].value,data:d,success:function(b){"true"==l&&""!=f?(b=getMessageFromResponse(f,b.success[0].code),$("#"+a.id).addClass("d-none hidden"),
$(".form-success."+a.id).html(b)):(b&&b.success&&(b=updateSuccessMsg(b.success,$(".form-success."+a.id).html()),$(".form-success."+a.id).html(b)),$("#"+a.id).addClass("d-none hidden"),$(".form-error."+a.id).addClass("d-none hidden"));$(".form-success."+a.id).removeClass("d-none hidden");$("body").removeClass("overflow-hidden");$("html, body").animate({scrollTop:$(".form-success."+a.id).closest("section").offset().top-160},500);$("#"+a.id).closest(".store-modal-dialog").find(".modal-top-close").addClass("hidden");
$("#"+a.id).closest(".store-modal-dialog").removeAttr("class").addClass("store-modal-dialog m-auto px-4 w-full xs:w-500px");b={};b.formRef=a;try{delete b.errorMessage;spb_commonLogger("analytics form submitted data obj: "+b);var c=window.aa.createEvent("FORM_SUBMITTED",b);window.dispatchEvent(c)}catch(q){form_commonLogger("Error while triggering analytics FORM_SUBMITTED event")}$("#"+a.id).find('button[type\x3d"submit"]').removeAttr("disabled").removeClass("bg-grey-2 border-grey-2 cursor-wait")}}).fail(function(b,
d,e){$("#"+a.id).find('button[type\x3d"submit"]').removeAttr("disabled").removeClass("bg-grey-2 border-grey-2 cursor-wait");"true"==k?(c.find('button[type\x3d"submit"]').prop("disabled",!0).removeClass("disabled bg-grey-2 border-grey-2 cursor-wait"),$("#"+a.id+' [type\x3d"submit"]').prop("disabled",!1).removeClass("disabled"),$("#"+a.id+' [type\x3d"reset"]').prop("disabled",!1).removeClass("disabled"),b=JSON.parse(b.responseText),b.results&&b.results.code?(d=getMessageFromResponse(p,b.results.code),
""!=d?showPromoCodeErrorMsg(a,d):showPromoCodeErrorMsg(a,b.results.message)):($("#"+a.id).find("#service-response-error").length&&$("#"+a.id).find("#service-response-error").remove(),"undefined"===typeof b.errorMessage&&(b.errorMessage="Oops! Something went wrong. Please try again later."),$("#"+a.id).prepend('\x3cdiv id\x3d"service-response-error" class\x3d"text parbase text-red"\x3e\x3cdiv class\x3d" textcolumn form-error"\x3e\x3cdiv role\x3d"alert" class\x3d"mb-8 alert alert-danger py-2 px-4"\x3e '+
b.errorMessage+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),1==b.addressValidationError?($("#"+a.id+' [name \x3d"city"]').addClass("border-red"),$("#"+a.id+' [name \x3d"state"]').addClass("border-red"),$("#"+a.id+' [name \x3d"postalCode"]').addClass("border-red")):0==b.addressValidationError&&($("#"+a.id+' [name \x3d"city"]').removeClass("border-red"),$("#"+a.id+' [name \x3d"state"]').removeClass("border-red"),$("#"+a.id+' [name \x3d"postalCode"]').removeClass("border-red")))):($(".form-error."+a.id).removeClass("d-none hidden"),
$("#"+a.id).addClass("d-none hidden"),$("body").removeClass("overflow-hidden"),$("html, body").animate({scrollTop:$(".form-error."+a.id).closest("section").offset().top-160},500),$("#"+a.id).closest(".store-modal-dialog").find(".modal-top-close").addClass("hidden"),$("#"+a.id).closest(".store-modal-dialog").removeAttr("class").addClass("store-modal-dialog m-auto px-4 w-full xs:w-500px"));form_commonLogger("Error while submitting form.."+e);e={};e.formRef=a;e.errorMessage="Form Server error";try{spb_commonLogger("analytics form submitted data obj: "+
e);var f=window.aa.createEvent("FORM_ERROR",e);window.dispatchEvent(f)}catch(g){form_commonLogger("Error while triggering analytics FORM_ERROR event")}})}$(document).on("focusout",".no-spaces-field",function(){$(this).val($(this).val().replace(/\s+/g,""))});$(".store-form .form-group input").each(function(){($(this).hasClass("empty")||$(this).hasClass("email")||$(this).hasClass("optional"))&&""!=$(this).val()&&$(this).parents(".form-group").addClass("focused")});
$(document).on("focus",".store-form .form-group input",function(){$(this).parents(".form-group").addClass("focused")});$(document).on("blur",".store-form .form-group input",function(){""==$(this).val()?($(this).removeClass("filled"),$(this).parents(".form-group").removeClass("focused")):$(this).parents(".form-group").addClass("filled")});$(".store-form .form-group select").on("change",function(){""==$(this).val()?$(this).parents(".form-group").removeClass("filled"):$(this).parents(".form-group").addClass("filled")});
$(document).on("change","input.fileUploadField",function(){var a=$(this),c=a.val();form_commonLogger("filepath",c);""!=c&&(c=new FormData,0<a.prop("files").length&&(c.set("fileToUploadInBox",a.prop("files")[0]),c.set("targetBoxFolderId",$(this).attr("data-targetFolderId")),$.ajax({type:"POST",enctype:"multipart/form-data",url:a.attr("data-uploadUrl"),data:c,processData:!1,contentType:!1,cache:!1,success:function(b){form_commonLogger("uploadResponse",b);b=JSON.parse(b);form_commonLogger("box file path",
b.url);$("."+a.attr("data-hiddenFieldClass")).val(b.url);a.parent().find(".fileUploadFieldSpan").html(a[0].files[0].name);a.parent().find(".fileUploadFieldSpan").removeClass("text-black-50");a.parent().find(".upload-error-message").addClass("hidden");a.parent().find(".field-error-message").removeClass("hidden").addClass("error-message");a.parent().removeClass("invalidField");a.closest("form").find('button[type\x3d"submit"]').prop("disabled",!1)},error:function(b){form_commonLogger("uploadResponse",
b);a.parent().find(".fileUploadFieldSpan").html(a[0].files[0].name);a.parent().find(".fileUploadFieldSpan").removeClass("text-black-50");a.parent().find(".upload-error-message").removeClass("hidden");a.parent().find(".field-error-message").addClass("hidden").removeClass("error-message");a.parent().addClass("invalidField");a.closest("form").find('button[type\x3d"submit"]').prop("disabled",!0)}})))});
function showPromoCodeErrorMsg(a,c){form_commonLogger("in showPromoCodeErrorMsg..");for(var b,d=$("#"+a.id+' [name^\x3d"verifyPromoCode"]'),e=0;e<d.length;e++)-1==d[e].name.indexOf("verifyPromoCodeErrorMsg")&&(b=d[e].value,$("#"+a.id+' [name\x3d"'+b+'"]').addClass("invalid-coupon"));$(".form-error."+a.id).removeClass("d-none hidden");$(".form-error."+a.id).addClass("font-Roboto text-red font-roboto mt-3");$(".form-error."+a.id).text(c);$("#"+a.id).find('button[type\x3d"submit"]').removeAttr("disabled").removeClass("bg-grey-2 border-grey-2 cursor-wait")}
function form_commonLogger(a,c){-1<window.location.search.indexOf("debugForm\x3dtrue")&&console.log(a,c?c:"")}$(document).ready(function(){$(".navbar .navbar-toggler").on("click",function(){$("body").toggleClass("menu-open")})});
if(769<$(window).width())$(".navbar .dropdown-nav").hover(function(){$(this).find(".dropdown-menu").first().stop(!0,!0).show();$(this).addClass("open")},function(){$(this).find(".dropdown-menu").first().stop(!0,!0).hide();$(this).removeClass("open")}),$(".navbar .dropdown-nav .dropdown-menu li a").click(function(){location.href=this.href});else $("ul.dropdown-menu [data-toggle\x3ddropdown]").on("click",function(a){0===$(this).parent().find("ul.dropdown-menu").length&&(location.href=this.href);a.preventDefault();
a.stopPropagation();$(this).parent().toggleClass("open")});if(768<$(window).width())$(".navbar-nav li").on("mouseenter mouseleave",function(){if($("ul",this).length){var a=$("ul:first",this),c=a.offset().left;a=a.width();var b=$(window).width();c=c+a<=b;b=$(".dropdown-nav .dropdown-menu\x3eli\x3eul");c?($(this).find(b).css("left","100%"),$(this).find(".caret.right").removeClass("caret-lft")):($(this).find(b).css("left",-a),$(this).find(".caret.right").addClass("caret-lft"))}});
var wtbApp=angular.module("WTBApp",[]);wtbApp.filter("unique",function(){return function(a,c){var b=[],d=[];angular.forEach(a,function(a){var e=a[c];-1===d.indexOf(e)&&(d.push(e),b.push(a))});return b}});
wtbApp.controller("WTBController",["$scope","$http","$filter",function(a,c,b){function d(){a.selectedCountry=$("#country-dropdown").val();a.selectedResellerType=a.excelData[0].ResellerType;$("#wtb-reseller-type").show();$("#wtb-reseller").show();a.$apply();a.resultCount();a.checkResellersExists();0!=$(".featured").length?$(".featured").closest(".countryListWrap").addClass("border-bottom mb-4"):$(".countryListWrap").removeClass("border-bottom mb-4")}wtb_commonLogger("in WTBController...");a.excelData=
[];a.$watch("excelPath",function(){wtb_commonLogger("in excelPath watch...");a.defaultResllerType=a.resellerType;getJsonFrmExcelSheet(a.excelPath,a.sheetName).then(function(b){wtb_commonLogger("wtb - got json of excel data");null!=a.filterColumnName&&""!=a.filterColumnName&&null!=a.filterColumnValue&&""!=a.filterColumnValue?(a.responseData=b[0].data,a.excelData=a.getFilteredData(a.filterColumnName,a.filterColumnValue),a.$apply()):(a.excelData=b[0].data,a.$apply(),"select-country"!=a.selectedCountry&&
d())});a.selectedRegion="select-region";a.selectedCountry=a.defaultCountry});$("#region-dropdown").change(function(){a.selectedRegion=$("#region-dropdown").val();$("#wtb-reseller-type").hide();$("#wtb-reseller").hide();a.$apply();a.resultCount();$("#country-dropdown").val("select-country")});$("#country-dropdown").change(function(){d()});a.handleResellerTypeChange=function(b){$("#wtb-reseller").hide();a.selectedResellerType=b;$("#wtb-reseller").show();a.resultCount()};a.resultCount=function(){angular.element(document).ready(function(){a.totalresult=
$("#countryList li").length;a.$apply()})};a.checkResellersExists=function(){var c=!1,d=!1,f=b("unique")(a.excelData,"ResellerType");f=b("orderBy")(f,"ResellerType");angular.forEach(f,function(b){c=!1;angular.forEach(a.excelData,function(d){c||d.Country!=a.selectedCountry||d.ResellerType!=b.ResellerType||(wtb_commonLogger(d),c=!0)});wtb_commonLogger(b.ResellerType);wtb_commonLogger("Exists?"+c);var e=a.defaultResllerType==b.ResellerType;c?($("#"+a.getFormatedString(b.ResellerType)).attr("disabled",
!1),!d&&e&&(d=!0,$("#"+a.getFormatedString(b.ResellerType)).click())):($("#"+a.getFormatedString(b.ResellerType)).attr("disabled",!0),e&&$("#wtb-reseller-type").find('input[type\x3d"radio"]:first').click())})};a.getFormatedString=function(a){a&&(a=a.replace(/[^a-zA-Z0-9]/g,""));return a};a.getFilteredData=function(c,d){var e=d.toLowerCase();a.filteredJson=b("filter")(a.responseData,function(a){return a[c].toString()==e});return a.filteredJson}}]);
function wtb_commonLogger(a){-1<window.location.search.indexOf("debugWTB\x3dtrue")&&console.log(a)}var storeWtbApp=angular.module("StoreWTBApp",["ngSanitize"]);storeWtbApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
storeWtbApp.filter("uniquekeys",function(){return function(a,c){var b=[],d=[];angular.forEach(a,function(a){var e=a[c];if(Array.isArray(e)){if(e.length){var f=[];angular.forEach(e,function(c){c.title&&-1===d.indexOf(c.title)&&(d.push(c.title),b.push(a));c.title&&-1===f.indexOf(c.title)&&f.push(c.title)});f.length&&(a[c+"Data"]=f)}}else-1===d.indexOf(e)&&(d.push(e),b.push(a))});return d}});
storeWtbApp.filter("filterrecords",function(){return function(a,c){var b=[];angular.forEach(a,function(a){if(a.brandName.length){var d=[];angular.forEach(a.brandName,function(e){-1<c.indexOf(e.title)&&(b.push(a),d.push(e.title))});d.length&&(a.brandNameData=d)}});return b}});
storeWtbApp.filter("mapping",function(){return function(a,c){var b={};angular.forEach(a,function(a){a.brandName.length&&angular.forEach(a.brandName,function(c){if(c.title.length)if(b[c.title])b[c.title][a.regionTitle]?(b[c.title][a.regionTitle][a.countryTitle]?(g=b[c.title][a.regionTitle][a.countryTitle],angular.forEach(a.resellerType,function(a){0>g.indexOf(a.title)&&g.push(a.title)})):(g=[],angular.forEach(a.resellerType,function(a){g.push(a.title)})),b[c.title][a.regionTitle][a.countryTitle]=g):
(e={},g=[],angular.forEach(a.resellerType,function(a){g.push(a.title)}),e[a.countryTitle]=g,b[c.title][a.regionTitle]=e);else{var d={},e={},g=[];angular.forEach(a.resellerType,function(a){g.push(a.title)});e[a.countryTitle]=g;d[a.regionTitle]=e;b[c.title]=d}})});for(var d in b){a=[];c=[];var e=[],l;for(l in b[d]){var f=[],k=[];a.push(l);b[l]||(b[l]={});for(var p in b[d][l])b[p]||(b[p]=[]),b[d][p]||(b[d][p]=b[d][l][p]),0>c.indexOf(p)&&c.push(p),0>f.indexOf(p)&&f.push(p),angular.forEach(b[d][l][p],
function(a){0>k.indexOf(a)&&k.push(a);0>e.indexOf(a)&&e.push(a);Array.isArray(b[p])&&0>b[p].indexOf(a)&&b[p].push(a)});b[l].allCountries=b[l].allCountries?b[l].allCountries.concat(f).unique():f;b[l].allResellerTypes=b[l].allResellerTypes?b[l].allResellerTypes.concat(k).unique():k}b[d].allCountries=b[d].allCountries?b[d].allCountries.concat(c).unique():c;b[d].allResellerTypes=b[d].allResellerTypes?b[d].allResellerTypes.concat(e).unique():e;a=a.unique();b[d].allRegions=a}return b}});
storeWtbApp.controller("StoreWTBController",["$scope","$http","$filter","safeApply",function(a,c,b,d){swtb_commonLogger("in StoreWTBController...");a.defaultResellerType="";a.resellersLoaded=!1;a.showFeaturedLabelFlag=!1;a.showNonFeaturedLabelFlag=!1;a.$watch("wtbLoaded",function(){var e=a.allowedBrands.split(","),l=a.getWTBDomain()+a.resellerDataUrl;c.get(l).then(function(c){swtb_commonLogger("WTB Data : ",c.data);a.wtbData=b("filterrecords")(c.data,e);swtb_commonLogger("WTB Data : Filtered with brands :",
a.wtbData);a.mapping=b("mapping")(a.wtbData,"");swtb_commonLogger("WTB : Mapping : ",a.mapping);a.brands=e;a.regions=b("uniquekeys")(a.wtbData,"regionTitle");swtb_commonLogger("WTB : Regions : ",a.regions);a.countries=b("uniquekeys")(a.wtbData,"countryTitle");swtb_commonLogger("WTB : Countries : ",a.countries);a.resellerTypes=b("uniquekeys")(a.wtbData,"resellerType");swtb_commonLogger("WTB : resellerTypes : ",a.resellerTypes);a.selectedBrand=a.brands[0];a.selectedRegion=a.defaultRegion;a.selectedCountry=
a.defaultCountry;a.featuredResellers=b("filter")(a.wtbData,{featured:"true"});a.featuredResellers=a.featuredResellers.filter(function(a,b,c){return b===c.indexOf(a)});a.nonFeaturedResellers=b("filter")(a.wtbData,{featured:""});a.nonFeaturedResellers=a.nonFeaturedResellers.filter(function(a,b,c){return b===c.indexOf(a)});d(a)},function(a){swtb_commonLogger("Reponse error while getting Resellers",a)})});$("#wtb-brand-dropdown").change(function(){a.selectedBrand=$(this).val();$("#wtb-region-dropdown").val("select-brand").trigger("change");
a.$apply();$("#wtb-brand-dropdown").focus()});$("#wtb-region-dropdown").change(function(){a.selectedRegion=$(this).val();$("#wtb-country-dropdown").val("select-country").trigger("change");a.$apply();$("#wtb-region-dropdown").focus()});$("#wtb-country-dropdown").change(function(){a.selectedCountry=$(this).val();a.checkResellersExists();$("#wtb-country-dropdown").focus();a.$apply()});a.showRegionInDropdown=function(b){return a.selectedBrand&&"select-brand"!=a.selectedBrand&&"undefined"==typeof a.mapping[a.selectedBrand][b]?
!1:!0};a.showCountryInDropdown=function(b){if(!a.selectedBrand||"select-brand"==a.selectedBrand){if(!a.selectedRegion||"select-region"==a.selectedRegion||-1<a.mapping[a.selectedRegion].allCountries.indexOf(b))return!0}else if(!a.selectedRegion||"select-region"==a.selectedRegion){if(-1<a.mapping[a.selectedBrand].allCountries.indexOf(b))return!0}else if("undefined"!=typeof a.mapping[a.selectedBrand][a.selectedRegion][b])return!0;return!1};a.disableResellerType=function(b){if(!a.selectedBrand||"select-brand"==
a.selectedBrand)if(!a.selectedRegion||"select-region"==a.selectedRegion){if(a.selectedCountry&&"select-country"!=a.selectedCountry&&-1<a.mapping[a.selectedCountry].indexOf(b))return!0}else if(!a.selectedCountry||"select-country"==a.selectedCountry){if(-1<a.mapping[a.selectedRegion].allResellerTypes.indexOf(b))return!0}else{if(-1<a.mapping[a.selectedRegion].allResellerTypes.indexOf(b)&&-1<a.mapping[a.selectedCountry].indexOf(b))return!0}else if(!a.selectedRegion||"select-region"==a.selectedRegion)if(!a.selectedCountry||
"select-country"==a.selectedCountry){if(-1<a.mapping[a.selectedBrand].allResellerTypes.indexOf(b))return!0}else{if(-1<a.mapping[a.selectedBrand].allResellerTypes.indexOf(b)&&-1<a.mapping[a.selectedBrand][a.selectedCountry].indexOf(b))return!0}else if(!a.selectedCountry||"select-country"==a.selectedCountry){if(-1<a.mapping[a.selectedBrand].allResellerTypes.indexOf(b)&&-1<a.mapping[a.selectedRegion].allResellerTypes.indexOf(b))return!0}else if(a.selectedBrand&&a.selectedRegion&&a.selectedCountry&&"undefined"!=
typeof a.mapping[a.selectedBrand][a.selectedRegion][a.selectedCountry]&&-1<a.mapping[a.selectedBrand][a.selectedRegion][a.selectedCountry].indexOf(b))return!0;return!1};a.handleResellerTypeChange=function(b){a.selectedResellerType=b;a.resetFeaturedLabelFlags();d(a)};a.attachResellersEvent=function(){setTimeout(function(){a.checkResellersExists()},1E3)};a.checkResellersExists=function(){d(a);var b=a.resellerTypes.sort(),c=angular.element("#"+a.getFormatedString(a.defaultResellerType)),f=!1;angular.forEach(b,
function(b){if(!f){var d=$("#"+a.getFormatedString(b));$("#"+a.getFormatedString(b)).parent().click();c.length&&"undefined"==typeof c.attr("disabled")?(f=!0,c.parent().click()):d.length&&"undefined"==typeof d.attr("disabled")&&(f=!0,d.parent().click())}});a.resetFeaturedLabelFlags()};a.showFeaturedLabel=function(b){$("#wtb-reseller .featured").children().length&&"undefined"!=typeof $($("#wtb-reseller .featured").children()[0])?a.showFeaturedLabelFlag=!0:a.showFeaturedLabelFlag=!1};a.showNonFeaturedLabel=
function(b){$("#wtb-reseller .non-featured").children().length?a.showNonFeaturedLabelFlag=!0:a.showNonFeaturedLabelFlag=!1};a.resetFeaturedLabelFlags=function(){a.showFeaturedLabel();a.showNonFeaturedLabel();d(a)};a.getFormatedString=function(a){a&&(a=a.replace(/[^a-zA-Z0-9]/g,""));return a};a.decodeHtml=function(a){return $("\x3ctextarea/\x3e").html(a).text()};Array.prototype.unique=function(){for(var a=this.concat(),b=0;b<a.length;++b)for(var c=b+1;c<a.length;++c)a[b]===a[c]&&a.splice(c--,1);return a};
a.getWTBDomain=function(){return-1<window.location.host.indexOf("www.westerndigital.")||-1<window.location.host.indexOf("aem.")?a.domains.split(",")[0]:a.domains.split(",")[1]}}]);function swtb_commonLogger(a,c){-1<window.location.search.indexOf("debugSWTB\x3dtrue")&&(console.log(a),c&&console.log(c))}
angular.module("FeedReaderApp",["CommonUtilApp"]).controller("FeedReaderController",["$scope","FeedService","$sce","CommonUtilService",function(a,c,b,d){a.init=function(b,d,f){c.rssFeed(b,d,f).then(function(b){a.feeds=b.data})};a.imageUrl=function(a,b){var c=$(a).wrap("\x3cdiv\x3e\x3c/div\x3e");if("undefined"!=typeof c[0]){var d=$(c[0].outerHTML).attr("srcset");c=c[0].src;if(d&&-1<d.indexOf(" "+b))d=d.split(","),angular.forEach(d,function(c){if(-1<c.indexOf(b))return a=c.replace(" "+b,"")});else return"undefined"!=
typeof d?(d=d.split(","),d=d[d.length-1].trim(),d=d.substring(0,d.indexOf(" "))):c}return a};a.description=function(a){if(a=$(a).wrap("\x3cdiv\x3e\x3c/div\x3e")[1].textContent)return a};a.wcmImagePath="";a.wcmImageExists=function(b){var c=document.createElement("div");c.innerHTML=b;b=c.getElementsByTagName("img");a.wcmImagePath=b&&0<b.length?b[0].src:null;return a.wcmImagePath?!0:!1};a.getUnEscapedHTMLContent=function(a){a=angular.element("\x3cdiv/\x3e").html(a).text();return b.trustAsHtml(a)};a.getFormattedDate=
function(a){return new Date(a)};a.getCategoriesAsString=function(b){var c="";if(b&&0<b.length){for(var d=0;d<b.length;d++){var e=a.getUnEscapedHTMLContent(b[d]);c+="\x26nbsp;"+e+","}c=c.substr(0,c.length-1)}return c};a.initSolrFeed=function(b){c.solrFeed(b).then(function(b){a.getFeedsResponse=JSON.parse(b.data).response.docs})};a.getEllipsis=function(a,b){return a&&a.toString().length>b?a.toString().substring(0,b)+"...":a.toString()};a.getMergeArray=function(a,b){return d.mergeStringArray(a,b)}}]).factory("FeedService",
["$http","$sce",function(a,c){return{solrFeed:function(b){return a({url:b,transformResponse:function(a,b,c){if(200==c)return a;console.log("error occured with status: "+c);console.log(a);return""}})},rssFeed:function(b,c,e){c=c&&""!=c?c:"5";e=e&&""!=e?e:"120";return a({url:"//www.westerndigital.com/rssblogsfeed?url\x3d"+b,method:"GET",transformResponse:function(a,b,d){if(200==d){if(a){a=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("item");b=[];for(d=0;d<a.length&&!(d>=c);d++){var f=
getValueFromTag(a[d],"description"),l=angular.element("\x3cdiv/\x3e").html(f).text();b.push({title:getValueFromTag(a[d],"title"),link:getValueFromTag(a[d],"link"),author:getAuthorValue(a[d]),source:getValueFromTag(a[d],"source"),publishedDate:getValueFromTag(a[d],"pubDate"),content:f,contentSnippet:getEllipsis(l,e),categories:getMultiValueFromTag(a[d],"category")})}return b}}else return console.log("error occured with status: "+d),console.log(a),""}})}}}]);
function getEllipsis(a,c){return a&&a.length>c?a.substring(0,c)+"...":a}function getMultiValueFromTag(a,c,b){var d=[];if(0<a.getElementsByTagName(c).length)for(var e=0;e<a.getElementsByTagName(c).length;e++)"html"===b?d.push(a.getElementsByTagName(c)[e].innerHTML):d.push(a.getElementsByTagName(c)[e].textContent);return d}function getAuthorValue(a){var c=getValueFromTag(a,"author");""==c&&(c=getValueFromTagNS(a,"creator","http://purl.org/dc/elements/1.1/"));return c}
function getValueFromTagNS(a,c,b,d){return 0<a.getElementsByTagNameNS(b,c).length?"html"===d?a.getElementsByTagNameNS(b,c)[0].innerHTML:a.getElementsByTagNameNS(b,c)[0].textContent:""}function getValueFromTag(a,c,b){return 0<a.getElementsByTagName(c).length?"html"===b?a.getElementsByTagName(c)[0].innerHTML:a.getElementsByTagName(c)[0].textContent:""}
var resLibConFunction=function(a,c,b,d){a.techPubWebService=function(b,d,f,k,p){a.tagTitleMap=[];a.getWebServiceRes=[];c.get(d).then(function(b){a.tagTitleMap=b.data},function(a){console.error("Response error",a.status);return!0});d="2_group.1_property\x3d"+encodeURIComponent("jcr:content/metadata/cq:tags")+"\x262_group.1_property.value\x3d"+encodeURIComponent(k);var e=f.split(",");f="";for(k=0;k<e.length;k++)f=f+"group."+(k+1)+"_property\x3d"+encodeURIComponent("jcr:content/metadata/cq:tags")+"\x26group."+
(k+1)+"_property.value\x3d"+encodeURIComponent(e[k])+"\x26";b=b.replace("PRODUCT-TAG-CONSTANT",d).replace("DOCUMENT-TYPE-TAG-CONSTANT",f);c.get(b).then(function(b){a.resultsFound=!0;0==b.data.hits.length&&(a.resultsFound=!1);var c=JSON.stringify(b.data.hits),d=c;for(b=0;b<c.length;b++)d=d.replace("jcr:content/metadata/cq:tags","jcr_content_metadata_cq_tags").replace("jcr:path","jcr_path").replace("jcr:content/metadata/dc:title","jcr_content_metadata_dc_title").replace("jcr:content/metadata/Iptc4xmpExt:LocationShown",
"jcr_content_metadata_Iptc4xmpExt_LocationShown").replace("jcr:content/jcr:lastModified","jcr_content_jcr_lastModified");c=JSON.parse(d);for(b=0;b<c.length;b++){var g=[];for(d=0;d<c[b].jcr_content_metadata_cq_tags.length;d++)-1<c[b].jcr_content_metadata_cq_tags[d].indexOf(p)&&-1<e.indexOf(c[b].jcr_content_metadata_cq_tags[d])&&g.push(c[b].jcr_content_metadata_cq_tags[d]);c[b].jcr_content_metadata_cq_tags=g;c[b].jcr_content_metadata_dc_title=Array.isArray(c[b].jcr_content_metadata_dc_title)?c[b].jcr_content_metadata_dc_title[0]:
c[b].jcr_content_metadata_dc_title}for(b=0;b<c.length;b++)if(1<c[b].jcr_content_metadata_cq_tags.length)for(d=1;d<c[b].jcr_content_metadata_cq_tags.length;d++)c.push({jcr_path:c[b].jcr_path,jcr_content_metadata_dc_title:c[b].jcr_content_metadata_dc_title,jcr_content_metadata_cq_tags:[c[b].jcr_content_metadata_cq_tags[d]],jcr_content_metadata_Iptc4xmpExt_LocationShown:c[b].jcr_content_metadata_Iptc4xmpExt_LocationShown}),c[b].jcr_content_metadata_cq_tags.splice(d,1),d--;g=0;for(b=0;b<e.length;b++)for(d=
0;d<c.length;d++)if(e[b]==c[d].jcr_content_metadata_cq_tags[0]){var f=c[d];c[d]=c[g];c[g]=f;g++}a.getWebServiceRes=c},function(a){console.error("Response error",a.status);return!0})};a.getTagsInfo=function(c){c=b("filter")(a.tagTitleMap,{tagId:c});var e=d.getLocale().toLowerCase().replace("-","_");return c&&c[0]?c[0]["title_"+e]?c[0]["title_"+e]:c[0].title:""};a.$watch(function(){a.assetDomainMappingJson=JSON.parse(a.assetDomainMapping)});a.getDomainForAsset=function(b){a.assetDomain="";for(var c=
0;c<a.assetDomainMappingJson.length;c++)for(var d in a.assetDomainMappingJson[c])if(0==b.indexOf(a.assetDomainMappingJson[c][d])){a.assetDomain=d;break}return a.assetDomain};a.isAssetHasUrlExtension=function(a){return-1<a.indexOf(".url")?!0:!1};a.isYoutubeUrl=function(a){return-1<a.indexOf("youtube")||-1<a.indexOf("youtu")||-1<a.indexOf("yout")?!0:!1};a.showVideoModal=function(a,b){a=$(a.target).closest(".resource-library").find(".wd-modal");a.find("iframe").attr("src",b);$("body").addClass("overflow-hidden");
a.removeClass("hidden")};a.closeVideoModal=function(a){a=$(a.target).closest(".resource-library").find(".wd-modal");var b=a.find("iframe");a.addClass("hidden");$("body").removeClass("overflow-hidden");b.attr("src","")};a.isPathProtected=function(a){return d.isPathProtected(a)}};angular.module("ResLibraryApp",["ngSanitize","angular.filter","CommonUtilApp"]).controller("ResLibraryCtrl",["$scope","$http","$filter","CommonUtilService",resLibConFunction]);
storeProductBannerApp.controller("ResLibraryCtrl",["$scope","$http","$filter","CommonUtilService",resLibConFunction]);
wdStoreProductBannerApp.controller("ResLibraryCtrl",["$scope","$http","$filter","CommonUtilService",function(a,c,b,d){a.techPubWebService=function(b,d,f,k,p){if(""!=k&&""!=f){a.tagTitleMap=[];a.getWebServiceRes=[];c.get(d).then(function(b){a.tagTitleMap=b.data},function(a){console.error("Response error",a.status);return!0});d="2_group.1_property\x3d"+encodeURIComponent("jcr:content/metadata/cq:tags")+"\x262_group.1_property.value\x3d"+encodeURIComponent(k);var e=f.split(",");f="";for(k=0;k<e.length;k++)f=
f+"group."+(k+1)+"_property\x3d"+encodeURIComponent("jcr:content/metadata/cq:tags")+"\x26group."+(k+1)+"_property.value\x3d"+encodeURIComponent(e[k])+"\x26";b=b.replace("PRODUCT-TAG-CONSTANT",d).replace("DOCUMENT-TYPE-TAG-CONSTANT",f);c.get(b).then(function(b){a.resultsFound=!0;0==b.data.hits.length&&(a.resultsFound=!1);var c=JSON.stringify(b.data.hits),d=c;for(b=0;b<c.length;b++)d=d.replace("jcr:content/metadata/cq:tags","jcr_content_metadata_cq_tags").replace("jcr:path","jcr_path").replace("jcr:content/metadata/dc:title",
"jcr_content_metadata_dc_title").replace("jcr:content/metadata/Iptc4xmpExt:LocationShown","jcr_content_metadata_Iptc4xmpExt_LocationShown").replace("jcr:content/jcr:lastModified","jcr_content_jcr_lastModified");c=JSON.parse(d);for(b=0;b<c.length;b++){var g=[];for(d=0;d<c[b].jcr_content_metadata_cq_tags.length;d++)-1<c[b].jcr_content_metadata_cq_tags[d].indexOf(p)&&-1<e.indexOf(c[b].jcr_content_metadata_cq_tags[d])&&g.push(c[b].jcr_content_metadata_cq_tags[d]);c[b].jcr_content_metadata_cq_tags=g;c[b].jcr_content_metadata_dc_title=
Array.isArray(c[b].jcr_content_metadata_dc_title)?c[b].jcr_content_metadata_dc_title[0]:c[b].jcr_content_metadata_dc_title}for(b=0;b<c.length;b++)if(1<c[b].jcr_content_metadata_cq_tags.length)for(d=1;d<c[b].jcr_content_metadata_cq_tags.length;d++)c.push({jcr_path:c[b].jcr_path,jcr_content_metadata_dc_title:c[b].jcr_content_metadata_dc_title,jcr_content_metadata_cq_tags:[c[b].jcr_content_metadata_cq_tags[d]],jcr_content_metadata_Iptc4xmpExt_LocationShown:c[b].jcr_content_metadata_Iptc4xmpExt_LocationShown}),
c[b].jcr_content_metadata_cq_tags.splice(d,1),d--;g=0;for(b=0;b<e.length;b++)for(d=0;d<c.length;d++)if(e[b]==c[d].jcr_content_metadata_cq_tags[0]){var f=c[d];c[d]=c[g];c[g]=f;g++}a.getWebServiceRes=c},function(a){console.error("Response error",a.status);return!0})}else a.getWebServiceRes=[]};a.getTagsInfo=function(c){c=b("filter")(a.tagTitleMap,{tagId:c});var e=d.getLocale().toLowerCase().replace("-","_");return c&&c[0]?c[0]["title_"+e]?c[0]["title_"+e]:c[0].title:""};a.$watch(function(){a.assetDomainMappingJson=
JSON.parse(a.assetDomainMapping)});a.getDomainForAsset=function(b){a.assetDomain="";for(var c=0;c<a.assetDomainMappingJson.length;c++)for(var d in a.assetDomainMappingJson[c])if(0==b.indexOf(a.assetDomainMappingJson[c][d])){a.assetDomain=d;break}return a.assetDomain};a.isAssetHasUrlExtension=function(a){return-1<a.indexOf(".url")?!0:!1};a.isYoutubeUrl=function(a){return-1<a.indexOf("youtube")||-1<a.indexOf("youtu")||-1<a.indexOf("yout")?!0:!1};a.showVideoModal=function(a,b){a=$(a.target).closest(".resource-library").find(".wd-modal");
a.find("iframe").attr("src",b);$("body").addClass("overflow-hidden");a.removeClass("hidden")};a.closeVideoModal=function(a){a=$(a.target).closest(".resource-library").find(".wd-modal");var b=a.find("iframe");a.addClass("hidden");$("body").removeClass("overflow-hidden");b.attr("src","")};a.isPathProtected=function(a){return d.isPathProtected(a)}}]);var wdResourceLibraryApp=angular.module("WDResourceLibraryApp",["ngSanitize","CommonUtilApp"]);
wdResourceLibraryApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
wdResourceLibraryApp.controller("WDResourceLibraryController",["$scope","$http","$timeout","$q","$filter","CommonUtilService","$window","$location",function(a,c,b,d,e,l,f,k){a.selectMostRecentCategory=!0;a.selectedDocType={};a.selectedCategory={};a.selectedIndustryType={};a.selectedProductType={};var p={},m="";a.searchKeyword="";a.$watch("facetQueryEndPoint",function(){rl_commonLogger("in watch..");a.start=0;a.row=parseInt(a.row);void 0!=k.search().product&&""!=k.search().product?(a.product=k.search().product,
rl_commonLogger("product: "+a.product),a.tagTitleMap=[],c.get(a.domainInfo+a.productServiceUrl).then(function(b){a.tagTitleMap=b.data;b=(b=e("filter")(a.tagTitleMap,{tagId:a.product}))&&b[0]?b[0].title:"";rl_commonLogger("tagTitle: "+b);a.selectedProductType[b]=!0;a.getCategoryFilter();a.getDocumentTypeFilter();a.getIndustryFilter();a.getSelectedFilters()},function(a){console.error("Response error",a.status)})):(a.getSearchResults(),a.getCategoryFilter(),a.getProductFilter(),a.getDocumentTypeFilter(),
a.getIndustryFilter())});var h=function(b){b+=-1<b.indexOf("?")?"\x26":"?";var c=b+"q\x3d"+encodeURIComponent(void 0!=a.q&&""!=a.q?a.q:"*:*");p.wt="json";for(key in p)"[object Array]"===Object.prototype.toString.call(p[key])?angular.forEach(p[key],function(a){c+="\x26"+key+"\x3d"+a}):c+="\x26"+key+"\x3d"+p[key];return c+m+"\x26fq\x3did:*/content/dam/doc-library*"};a.getSearchResults=function(){rl_commonLogger("in getSearchResults..");var b=h(a.searchResultEndPoint)+"\x26sort\x3ddocumentTypeDate%20desc\x26fq\x3d-subDocumentType:%22Do+Not+Show%22";
rl_commonLogger("url: "+b);c.get(b).then(function(b){b=b.data;a.numFound=b.response.numFound;a.searchResults=b.response.docs;a.numberOfPages=Math.ceil(a.numFound/a.row)},function(a){console.log("error: ",a.data)})};a.getIndustryFilter=function(){rl_commonLogger("in getIndustryFilter..");var b=h(a.facetQueryEndPoint)+"\x26facet.field\x3dfilterIndustryType";c.get(b).then(function(b){a.industryTypeFilter=b.data.facet_counts.facet_fields.filterIndustryType},function(a){console.log("error: ",a.data)})};
a.getDocumentTypeFilter=function(){rl_commonLogger("in getDocumentTypeFilter..");var b=h(a.facetQueryEndPoint)+"\x26facet.field\x3dfilterSubDocumentType";c.get(b).then(function(b){a.docTypeFilter=b.data.facet_counts.facet_fields.filterSubDocumentType},function(a){console.log("error: ",a.data)})};a.getCategoryFilter=function(){rl_commonLogger("in getCategoryFilter..");var b=h(a.facetQueryEndPoint)+"\x26facet.field\x3dfilterProductCategoryType";c.get(b).then(function(b){a.categoryFilter=b.data.facet_counts.facet_fields.filterProductCategoryType},
function(a){console.log("error: ",a.data)})};a.getProductFilter=function(){rl_commonLogger("in getProductFilter..");var b=h(a.facetQueryEndPoint)+"\x26facet.field\x3dfilterProductType";c.get(b).then(function(b){a.productFilter=b.data.facet_counts.facet_fields.filterProductType},function(a){console.log("error: ",a.data)})};a.getDateObj=function(a){return new Date(a)};a.getSelectedFilters=function(){rl_commonLogger("in getSelectedFilters..");a.showProductFilters=!1;a.selectMostRecentCategory=!0;var b=
"",c;for(c in a.selectedDocType)a.selectedDocType[c]&&(b=""!=b?b+"%20OR%20":"",b+="%22"+c+"%22");b=""!=b?"\x26fq\x3dfilterSubDocumentType:("+b+")":"";var d="";for(c in a.selectedCategory)a.selectedCategory[c]&&(d=""!=d?d+"%20OR%20":"",d+="%22"+c+"%22",a.showProductFilters=!0,a.selectMostRecentCategory=!1);d=""!=d?"\x26fq\x3dfilterProductCategoryType:("+d+")":"";var e="";for(c in a.selectedIndustryType)a.selectedIndustryType[c]&&(e=""!=e?e+"%20OR%20":"",e+="%22"+c+"%22");e=""!=e?"\x26fq\x3dfilterIndustryType:("+
e+")":"";var f="";if(a.showProductFilters||a.product){for(c in a.selectedProductType)a.selectedProductType[c]&&(f=""!=f?f+"%20OR%20":"",f+="%22"+c+"%22",a.showProductFilters=!0);f=""!=f?"\x26fq\x3dfilterProductType:("+f+")":""}else a.selectedProductType={};rl_commonLogger("productFacetURL: "+f);""==f&&k.search("product",null);m=b+e+d+f;p.start=a.start=0;a.getSearchResults();a.getProductFilter()};a.showSelectedFiltersAsTags=function(){return""!=m||""!=a.searchKeyword};a.submitQuery=function(){a.searchKeyword=
void 0==a.q||""==a.q?"":a.q;a.start=0;p={};a.selectedDocType={};a.selectedCategory={};a.selectedIndustryType={};a.selectedProductType={};m="";a.selectMostRecentCategory=!0;a.showProductFilters=!1;a.getSearchResults();a.getCategoryFilter();a.getDocumentTypeFilter();a.getIndustryFilter()};a.getTagsInfoAfterFormatting=function(a){if(a){a=a.split(",");for(var b="",c=0;c<a.length;c++)if(""!=a[c]&&1<a[c].split("~").length){var d=a[c].split("~")[0],e=a[c].split("~")[1];if(d.startsWith("language:")||d.startsWith("studio:document-type"))b=
b+e+", "}return b.substring(0,b.length-2)}};a.checkIfAssetIsNew=function(b){var c=parseInt(a.lastModifiedIndicator);c=new Date((new Date).getTime()-864E5*c);return a.getDateObj(b)>c.getTime()};a.goOnPage=function(){a.pageNumberSelected=null!=a.pageNumberSelected?a.pageNumberSelected:"1";p.rows=a.row;a.start=(a.pageNumberSelected-1)*a.row;p.start=a.start;a.getSearchResults()};a.prevClick=function(){0<a.start&&(a.start=0<a.start-a.row?a.start-a.row:0,p.rows=a.row,p.start=a.start,a.getSearchResults(),
a.pageNumberSelected=parseInt(a.pageNumberSelected)-1+"")};a.nextClick=function(){a.start+a.row<a.numFound&&(a.start+=a.row,p.rows=a.row,p.start=a.start,a.getSearchResults(),a.pageNumberSelected=parseInt(a.pageNumberSelected)+1+"")};a.openProductFilterMobile=function(){angular.element(".filter-overlay").show();angular.element("body").addClass("overflow-hidden");angular.element(".left-filter").removeClass("hidden");var a=l.innerHeight,b=Math.abs(angular.element(".fliter_header").outerHeight()),c=Math.abs(angular.element(".filter_btn_height").outerHeight());
angular.element(".filterItemWrap").height(a-b-c)};a.closeProductFilterMobile=function(){angular.element(".filter-overlay").removeAttr("style");angular.element("body").removeClass("overflow-hidden");angular.element(".left-filter").addClass("hidden");angular.element(".filterItemWrap").removeAttr("style")};angular.element(l).bind("resize",function(){768<l.innerWidth&&angular.element(".close-productList-filter").triggerHandler("click")})}]);
function rl_commonLogger(a){-1<window.location.search.indexOf("debugRL\x3dtrue")&&console.log(a)}var editorialListingApp=angular.module("EditorialListingApp",[]);editorialListingApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1}).hashPrefix("")}]);
editorialListingApp.controller("EditorialListingController",["$scope","$location","$timeout",function(a,c,b){a.editorialListingIds=[];a.currentId="";a.isHashUrl=!1;a.$watch("editorialListingViewLoaded",function(){0<window.location.hash.trim().length&&(a.hashUrl=!0,a.currentId=window.location.hash.split("#")[1]);"undefined"!=typeof a.editorialListingIds&&(-1<a.editorialListingIds.indexOf(a.currentId)&&""!=a.currentId&&b(function(){a.isHashUrl=!0;$("#"+a.currentId).trigger("click")},0,!1),""==a.currentId&&
(a.currentId=a.editorialListingIds[0],a.isHashUrl=!1))});a.wdTabSwitcher=function(a,b){$(".wb-tabContent").addClass("hidden");$(b).removeClass("hidden");$(".wdTabSwitcher").addClass("border-gray-1").removeClass("border-blue");$(a.currentTarget).removeClass("border-gray-1").addClass("border-blue");a=$(".subnav a.active");a.length&&(b=a.attr("href"),$(b).closest(".wb-tabContent").length&&a.trigger("click"))};a.accordionViewBtn=function(a){$(a.currentTarget).parents(".accordion-contain").siblings().find(".accordion-box").addClass("hidden");
$(a.currentTarget).parents(".accordion-contain").siblings().removeClass("active");$(a.currentTarget).parents(".accordion-contain").toggleClass("active");$(a.currentTarget).parents(".accordion-contain").find(".accordion-box").toggleClass("hidden");if($(a.currentTarget).parents(".accordion-contain").find(".accordion-box").hasClass("hidden"))$(a.currentTarget).parents(".accordion-contain").css("height","auto");else{var b=$(a.currentTarget).outerHeight(),c=$(a.currentTarget).parents(".accordion-contain").find(".accordion-box").outerHeight();
$(a.currentTarget).parents(".accordion-contain").siblings().css("height","auto");$(a.currentTarget).parents(".accordion-contain").height(b+c);992>$(window).width()&&$("html, body").animate({scrollTop:$(event.target).offset().top-$("header").height()-75},500)}};a.activetab=function(){$(".editorial-tabview").each(function(){var a=$(this).find(".active.tabview-contain button").outerHeight(),b=$(this).find(".active.tabview-contain button").parents(".tabview-contain").find(".tabview-box").outerHeight();
$(this).find(".active.tabview-contain button").parents(".tabview-contain").siblings().css("height","auto");var c=0,f=0;$(this).find(".tabview-contain button").each(function(){$(this).css("height","auto");c=$(this).outerHeight();c>f&&(f=c)});768>$(window).width()?($(this).find(".active.tabview-contain button").parents(".tabview-contain").height("auto"),$(this).find(".active.tabview-contain button").parents(".editorial-tabview").parents(".editorial-listing").height("auto"),$(this).find(".tabview-contain").parent().css("height",
"auto"),$(this).find(".tabview-contain \x3e button").css("height","auto")):($(this).find(".active.tabview-contain button").parents(".editorial-tabview").parents(".editorial-listing").height(a+b),$(this).find(".active.tabview-contain button").parents(".tabview-contain").height(a+b),$(this).find(".tabview-contain").parent().css("height",f),$(this).find(".tabview-contain \x3e button").css("height",f));$(this).find(".active \x3e .invisible").removeClass("invisible")})};a.tabViewBtn=function(a){$(a.currentTarget).parents(".editorial-tabview").find(".tabview-contain \x3e button").attr("aria-expanded",
"false");$(a.currentTarget).parents(".tabview-contain").attr("aria-expanded","true");$(a.currentTarget).attr("aria-expanded","true");$(a.currentTarget).parents(".tabview-contain").siblings().find(".tabview-box").addClass("hidden d-none");$(a.currentTarget).parents(".tabview-contain").siblings().removeClass("active");$(a.currentTarget).parents(".editorial-tabview").find(".tabview-contain").find("button").removeClass("pointer-events-none sm:border-b-4 border-blue bg-blue sm:bg-transparent text-white").addClass("border-2 sm:border-none border-black");
$(a.currentTarget).removeClass("border-2 sm:border-none border-black").addClass("pointer-events-none sm:border-b-4 border-blue bg-blue sm:bg-transparent text-white");$(a.currentTarget).parents(".tabview-contain").find(".tabview-box").toggleClass("hidden d-none");if($(a.currentTarget).parents(".tabview-contain").find(".tabview-box").hasClass("d-none")&&$(a.currentTarget).parents(".tabview-contain").find(".tabview-box").hasClass("hidden"))$(a.currentTarget).parents(".tabview-contain").height("auto");
else{var b=$(a.currentTarget).outerHeight(),c=$(a.currentTarget).parents(".tabview-contain").find(".tabview-box").outerHeight();$(a.currentTarget).parents(".tabview-contain").siblings().css("height","auto");768>$(window).width()?($(a.currentTarget).parents(".tabview-contain").height("auto"),$(a.currentTarget).parents(".editorial-tabview").parents(".editorial-listing").height("auto"),$("html, body").animate({scrollTop:$(event.target).offset().top-$("header").height()-75},500)):($(a.currentTarget).parents(".editorial-tabview").parents(".editorial-listing").height(b+
c),$(a.currentTarget).parents(".tabview-contain").height(b+c))}};a.storeTabViewBtn=function(b,c){if(a.isHashUrl){var d=$("header.header").outerHeight(),e=$(".wd-site-header").length?50:0;d=$(b.currentTarget).offset().top-d-e;$("html, body").stop().animate({scrollTop:d},300)}b=$(b.currentTarget);b.parents(".store-tabview").find(".tabview-contain").each(function(){$(this).find("button").removeClass("pointer-events-none border-b-4 border-blue sm:bg-transparent text-blue").addClass("border-b-4 border-blue text-grey-5 border-none").attr("aria-expanded",
"false")});b.removeClass("border-b-4 border-blue text-grey-5 border-none").addClass("pointer-events-none border-b-4 border-blue sm:bg-transparent text-blue").attr("aria-expanded","true");b.parents(".store-tabview").find(".tabview-box").each(function(){$(this).addClass("hidden")});b.closest(".store-tabview").find(c).removeClass("hidden");b.closest(".store-tabview").find(c).find(":focusable").eq(0)[0].focus()};a.storeTabViewBtnV2=function(a,b){a=$(a.currentTarget);var c=a.attr("id");$('button.mob-tab[data-tabId\x3d"'+
c+'"]').addClass("mob-tab-active");a.parents(".store-tabview").find(".tabview-contain").each(function(){$(this).find("button").removeClass("pointer-events-none bg-grey-1 ").addClass("bg-transparent").attr("aria-expanded","false")});a.removeClass("bg-transparent").addClass("pointer-events-none bg-grey-1").attr("aria-expanded","true");a.closest(".tabview-contain").addClass("bg-grey-1 activeTab").siblings().removeClass("bg-grey-1 activeTab");a.parents(".store-tabview").find(".tabview-box").each(function(){$(this).addClass("hidden")});
$(".tabview-box").hasClass("sm:block")&&$(".tabview-box").removeClass("sm:block");a.closest(".store-tabview").find(b).removeClass("hidden")};a.accordionTileViewBtn=function(b){a.isHashUrl&&a.scrollToEditorialItem(b);b=$(b.currentTarget);var c=b.closest(".accordionTile-contain");c.siblings().find(".accordionTile-box").addClass("hidden");c.siblings().find(".detail-block").removeClass("selected-block");c.find(".detail-block").toggleClass("selected-block");c.find(".accordionTile-box").toggleClass("hidden");
if(c.find(".accordionTile-box").hasClass("hidden"))c.css("height","auto"),c.find(".detail-block").attr("aria-expanded","false");else{var d=b.outerHeight(),f=c.find(".accordionTile-box").outerHeight();c.siblings().css("height","auto");c.height(d+f);992>$(window).width()&&$("html, body").animate({scrollTop:$(event.target).offset().top-$("header").height()-75},500);c.find(".detail-block").attr("aria-expanded","true")}window.location.hash=b.attr("id")};$(window).resize(function(){if($(".accordionTile-contain .detail-block").hasClass("selected-block")){var b=
$(".accordionTile-contain .detail-block.selected-block").outerHeight(),c=$(".accordionTile-contain .detail-block.selected-block").next(".accordionTile-box").outerHeight();$(".accordionTile-contain .detail-block.selected-block").parent(".accordionTile-contain").css("height",b+c)}$(".accordion-contain").hasClass("active")&&(b=$(".accordion-contain.active .contain-arrow-t").outerHeight(),c=$(".accordion-contain.active .accordion-box").outerHeight(),$(".accordion-contain.active").css("height",b+c));a.activetab()});
a.scrollToEditorialItem=function(a){var b=$("#sticky-nav.sticky-head").outerHeight(),c=$("header .sticky-head").outerHeight();a=$(a.currentTarget).offset().top-(c+b+50);$("html, body").stop().animate({scrollTop:a},300)};window.onload=function(){a.activetab()};a.openCarouselModel=function(a){$("#"+a).removeClass("hidden");$("body").addClass("overflow-hidden")}}]);
window.onload=function(){var a=$("#stickyTab.sticky-head");$("header .sticky-head");$("#sticky-nav.sticky-head");if(a.length){var c=a.closest(".editorial-listing"),b=c.offset().top;$(window).bind("scroll",function(){setTimeout(function(){handlestickyTabScroll(c,b)},250)});handlestickyTabScroll(c,b)}};
function handlestickyTabScroll(a,c){a=c+a.outerHeight();$(window).scrollTop()>c&&$(window).scrollTop()<a?"true"!=$(stickyTab).attr("resetMarginTop")&&(stickyTab.hasClass("sticky-stuck")||$(stickyTab).addClass("sticky-stuck"),c=wdtopHeader.outerHeight()+wdtopMenu.outerHeight()+stickyTab.outerHeight()+"px",$(stickyTab).closest("section").css("margin-top",c),$(stickyTab).removeClass("invisible")):$(window).scrollTop()<c?($(stickyTab).removeClass("sticky-stuck"),$(stickyTab).removeClass("invisible"),
$(stickyTab).closest("section").css("margin-top","0")):($(stickyTab).addClass("invisible"),"true"==$(stickyTab).attr("resetMarginTop")&&($(stickyTab).removeClass("sticky-stuck"),$(stickyTab).closest("section").css("margin-top","0")))}
$(document).ready(function(){$(".idtcCarouselView").each(function(){var a={autoplay:!0,autoplaySpeed:1E3,slidesToShow:5,slidesToScroll:1,centerMode:!1,centerPadding:"60px",infinite:!0,responsive:[{breakpoint:1460,settings:{slidesToShow:4,slidesToScroll:1,infinite:!0}},{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:1,arrows:!1,infinite:!0,dots:!0}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1,arrows:!1,infinite:!0,dots:!0}},{breakpoint:576,settings:{slidesToShow:1,slidesToScroll:1,
arrows:!1,infinite:!0,dots:!0}}]};$(this).hasClass("disable-auto-rotate")&&(a.autoplay=!1);$(this).slick(a)});$("#editorial-list-dropdown").change(function(){$(".editorial-dropdown-content-wrap").addClass("hidden");$("#"+$(this).val()).removeClass("hidden")});jQuery.extend(jQuery.expr[":"],{focusable:function(a,c,b){return $(a).is('a, input[type\x3d"text"]')}});$("#portfolio, #resource-library").on("keyup",function(a){(9==a.keyCode||9===a.keyCode&&a.shiftKey)&&$("html, body").animate({scrollTop:0},
800)});$(document).on("click",".mob-tab",function(a){a.preventDefault();a=$(this).attr("data-target");var c=$(this).attr("data-tabId");$("#"+c).parent(".tabview-contain").siblings().removeClass("bg-grey-1 activeTab").find("button").removeClass("pointer-events-none bg-grey-1");$("#"+c).parent(".tabview-contain").addClass("bg-grey-1 activeTab");$(this).closest(".store-tabview").find("#editorial-tab-1").removeClass("sm:block");$(this).hasClass("mob-tab-active")?($(this).removeClass("mob-tab-active"),
$(this).closest(".store-tabview").find(a).addClass("hidden")):($(this).closest(".store-tabview").find(a).removeClass("hidden"),$(this).addClass("mob-tab-active"))});$(window).resize(function(){0<$("button.mob-tab-active:visible").length?$("button.mob-tab:visible").each(function(){var a=$(this).attr("data-target");$(this).hasClass("mob-tab-active")?$(this).closest(".store-tabview").find(a).removeClass("hidden"):$(this).closest(".store-tabview").find(a).addClass("hidden")}):0<$("div.desktopTabs:visible").length&&
$("div.tabview-contain:visible").each(function(){var a="#"+$(this).find("button").attr("aria-controls");$(this).hasClass("activeTab")?$(this).closest(".store-tabview").find(a).removeClass("hidden"):$(this).closest(".store-tabview").find(a).addClass("hidden")})});$(".detail-block svg.el-arrow-t, .accordion-contain svg.el-arrow-t").css("fill",$(".accordionTile-box-inner, .accordion-box-inner").css("background-color"));$("svg.expandSection path, svg.collapseSection rect").css("fill",$(".detail-block").css("color"))});
var supportBrandApp=angular.module("SupportBrandApp",["CommonUtilApp"]);
supportBrandApp.controller("SupportBrandController",["$scope","$location","CommonUtilService",function(a,c,b){function d(){var b=a.currentSelector.split(".");1<=b.length&&""!=b?angular.forEach(a.jsonVal,function(c,d){1<b.length&&d===b[0]?(a.categoryImage=c.cardlogo,a.categoryTitle=c["jcr:title"],angular.forEach(c.children,function(c,d){d===b[1]&&(a.categoryImageHide=!1,a.backButtonHide=!1,a.currentSelector=a.currentSelector+"."+d,a.productJsonVal=c.children,a.selectoption=c.subtitle,a.supportHide=
!0,a.categoryHide=!0,a.productHide=!1)})):d===b[0]&&(a.categoryImage=c.cardlogo,a.categoryTitle=c["jcr:title"],a.categoryImageHide=!1,a.backButtonHide=!1,a.currentSelector=d,a.categoryJsonVal=c.children,a.selectoption=c.subtitle,a.supportHide=!0,a.categoryHide=!1,a.productHide=!0)}):(a.backButtonHide=!0,a.categoryImageHide=!0,a.selectoption="",a.supportHide=!1,a.categoryHide=!0,a.productHide=!0)}a.jsonVal=JSON.parse($(".responsedata").attr("data-jsonObj"));a.supportHide=!1;a.backButtonHide=!0;a.categoryImageHide=
!0;a.categoryHide=!0;a.productHide=!0;a.selectoption="";a.categorytitle="";a.currentSelector="";a.selector=window.location.pathname.replace(".html","");a.selector=a.selector.substr(a.selector.indexOf(".")+1);1<=a.selector.length&&""!=a.selector&&(a.currentSelector=a.selector,d());a.goBack=function(){a.currentSelector.contains(".")?a.currentSelector=a.currentSelector.substr(0,a.currentSelector.indexOf(".")):a.currentSelector="";d()};a.rewritePageURL=function(a){return b.rewritePageURL(a)};a.getCategories=
function(){a.categoryImage=this.val.cardlogo;a.categoryTitle=this.val["jcr:title"];a.categoryImageHide=!1;a.backButtonHide=!1;a.currentSelector=this.key;a.categoryJsonVal=this.val.children;a.selectoption=this.val.subtitle;a.supportHide=!0;a.categoryHide=!1;a.productHide=!0};a.getProducts=function(){a.currentSelector=a.currentSelector+"."+this.key;a.productJsonVal=this.val.children;a.selectoption=this.val.subtitle;a.supportHide=!0;a.categoryHide=!0;a.productHide=!1}}]);
var ProductCompatibilityApp=angular.module("ProductCompatibilityApp",[]);ProductCompatibilityApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);ProductCompatibilityApp.filter("unique",function(){return function(a,c){var b=[],d=[];angular.forEach(a,function(a){var e=a[c];-1===d.indexOf(e)&&(d.push(e),b.push(a))});return b}});
ProductCompatibilityApp.controller("ProductCompatibilityController",["$scope","$http","$filter","$location",function(a,c,b,d){angular.element("#internal-product-support-page-error-message").hide();a.allCategories="all-categories";a.selectedCategory="all-categories";a.allProducts="all-products";a.selectedProduct="all-products";a.urlHasSelectors=!1;var e=[];a.excelData=[];a.$watch("excelPath",function(){a.urlSelectors&&(a.urlHasSelectors=!0,e=a.urlSelectors.split(","));a.isPartner?a.init():!a.urlHasSelectors&&
a.internalRedirectURL&&a.isWCMModeDisabled?window.location.href=a.internalRedirectURL:a.init();a.isWCMModeDisabled||($("#compatibility-disclaimer").removeClass("hidden"),$("#internal-product-support-page-error-message").removeClass("hidden"))});a.init=function(){getJsonFrmExcelSheet(a.excelPath,a.sheetName).then(function(b){a.excelData=b;a.isPartner?(a.productList=b[1].data,a.partnerProductList=b[0].data):(a.productList=b[0].data,a.partnerProductList=b[1].data);a.productCompatibility=b[2].data;a.productCompatibility.forEach(function(a){a.productIdentifier=
a["product-identifier"];a.partnerProductIdentifier=a["partner-product-identifier"]});a.partnerProductList.forEach(function(a){a.partnerProductIdentifier=a["product-identifier"]});setTimeout(function(){a.urlHasSelectors&&($("#product-dropdown").val(e[0]),$("#product-dropdown").trigger("change"),$("#dropdown-section").hide())},500);a.$apply()})};$("#categories-dropdown").change(function(){a.selectedCategory=$("#categories-dropdown").val();$("#compatible-list").hide();$("#product-dropdown").val(a.allProducts);
a.$apply()});$("#product-dropdown").change(function(){a.selectedProduct=$("#product-dropdown").val();$("#compatible-list").show();$("#compatibility-disclaimer").removeClass("hidden");$("#dropdown-section").hide();a.$apply()});a.resetDefaultOptions=function(){$("#dropdown-section").show();$("#compatible-list").hide();$("#compatibility-disclaimer").addClass("hidden")};a.downloadDoc=function(){document.title=$(".compatibilityProductTitle").text();window.print()}}]);
var storeProductCompatibilityApp=angular.module("StoreProductCompatibilityApp",["CommerceApp","CommonUtilApp"]);storeProductCompatibilityApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);storeProductCompatibilityApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
storeProductCompatibilityApp.filter("unique",function(){return function(a,c){var b=[],d=[];angular.forEach(a,function(a){var e=a[c];-1===d.indexOf(e)&&(d.push(e),b.push(a))});return b}});
storeProductCompatibilityApp.controller("StoreProductCompatibilityController",["$scope","$http","$filter","$location","CommerceService","COMMERCE_CONSTANTS","CommonUtilService","safeApply",function(a,c,b,d,e,l,f,k){a.isCatalogPurchasable=e.getPurchasableCatalog();a.wtbPagePath=f.rewritePageURL(e.getWTBPagePath());a.productReferences=e.getSessionVariable(l.PRODUCT_REFERENCES);null==a.productReferences&&(prodCompatibility_commonLogger("calling get product references from product compatibility component. . ."),
e.getProductReferences().then(function(){a.productReferences=e.getSessionVariable(l.PRODUCT_REFERENCES)},function(a){prodCompatibility_commonLogger("Issue in getting product references ",a)}));a.selectedVendorName="select-vendor";a.selectedVendorModel="select-model";a.urlHasSelectors=!1;var p=[];angular.element("#store-compatible-list").hide();a.$watch("excelPath",function(){a.urlSelectors&&(a.urlHasSelectors=!0,p=a.urlSelectors.split(","));getJsonFrmExcelSheet(a.excelPath,a.sheetName).then(function(b){a.excelDataStore=
b[0].data;setTimeout(function(){a.urlHasSelectors&&($("#vendor-dropdown").val(p[0]),a.selectedVendorName=p[0],$("#vendor-model-dropdown").val(p[1]),$("#vendor-model-dropdown").trigger("change"))},1E3);k(a)})});a.initPriceAndCapacity=function(b){a.getProductPrice(b);a.getCapacity(b)};a.getProductPagePath=function(b){b=a.productReferences[b];return null!=b&&"undefined"!=typeof b.pagePath?b.pagePath:"#"};a.sessionCapacityObj={};a.getCapacity=function(b){a.sessionCapacityObj[b]=a.productReferences[b];
k(a)};a.sessionProductPriceObj={};a.getProductPrice=function(b){a.isCatalogPurchasable&&(a.sessionProductPriceObj[b]=e.getSessionVariable(b),null!=a.sessionProductPriceObj[b]&&null!=e.getSessionVariable(b).prices||e.getProductPrice(b).then(function(c){prodCompatibility_commonLogger("got product price for",b);a.sessionProductPriceObj[b]=e.getSessionVariable(b);k(a)},function(a){prodCompatibility_commonLogger("product price - Rejection from commerce service")}));k(a)};$("#vendor-dropdown").change(function(){a.selectedVendorName=
$("#vendor-dropdown").val();$("#vendor-model-dropdown").val(a.selectedVendorModel);$("#store-compatible-list").hide();$("#vendor-model-section").show();k(a)});$("#vendor-model-dropdown").change(function(){a.selectedVendorModel=$("#vendor-model-dropdown").val();$("#store-compatible-list").show();k(a)})}]);function prodCompatibility_commonLogger(a,c){-1<window.location.search.indexOf("debugProdCompatibility\x3dtrue")&&console.log(a,null!=c?c:"")}var app=angular.module("MultilingualSectionApp",[]);
app.controller("MultilingualSectionController",["$scope",function(a){var c=$(".mss-lang").map(function(){return $(this).attr("data-mss-lang-key")}).get();a.language=$(".responsedata").attr("data-key").split(",").filter(function(a){if(-1<c.indexOf(a))return a});a.localeTitle=JSON.parse($(".responsedata").attr("data-locale")).languagemapping;a.languageTitle=function(b){for(var c=0;c<a.localeTitle.length;c++)if(a.localeTitle[c].locale===b)return a.localeTitle[c].text};a.selector=window.location.pathname.replace(".html",
"");a.selector=a.selector.substr(a.selector.indexOf(".")+1);angular.isUndefined(a.languageTitle(a.selector))?a.tmpSelectedVal=$(".responsedata").attr("data-currentkey"):a.tmpSelectedVal=a.selector;angular.forEach(a.language,function(b){b==a.tmpSelectedVal&&(a.selectedVal=a.tmpSelectedVal)});angular.isUndefined(a.selectedVal)&&(a.selectedVal=a.language[0]);a.$watch("selectedVal",function(){$("div.mss-lang").addClass("hidden").removeClass("active");$("div[data-mss-lang-key\x3d'"+a.selectedVal+"']").removeClass("hidden").addClass("active")})}]);
app=angular.module("MultilingualStoreApp",[]);
app.controller("MultilingualStoreController",["$scope",function(a){var c=$(".mss-lang").map(function(){return $(this).attr("data-mss-lang-key").substr(0,5)}).get();a.language=$(".responsedata").attr("data-key").split(",").filter(function(a){if(-1<c.indexOf(a))return a});a.localeTitle=JSON.parse($(".responsedata").attr("data-locale")).languagemapping;a.brandType=JSON.parse($(".responsedata").attr("data-brand"));a.languageTitle=function(b){for(var c=0;c<a.localeTitle.length;c++)if(a.localeTitle[c].locale===
b)return a.localeTitle[c].text};a.checkLocaleInDependentLocaleMapping=function(a){var b=a,c=$(".responsedata").attr("data-dependentLocaleMapping");null!=c&&""!=c&&(c=c.split(","),angular.forEach(c,function(c){-1<c.indexOf(a)&&(b=c.split(":")[1])}));return b};a.selector=window.location.pathname.replace(".html","");a.selector=a.selector.substr(a.selector.indexOf(".")+1);a.tmpBrand="";a.tmpLocale="";-1<a.selector.indexOf(".")?(a.tmpBrand=a.selector.split(".")[0],a.tmpLocale=a.selector.split(".")[1],
a.tmpBrand&&!angular.isUndefined(a.brandType[a.tmpBrand])&&(a.selectedBrandVal=a.tmpBrand),a.tmpLocale&&!angular.isUndefined(a.languageTitle(a.tmpLocale))?a.tmpSelectedVal=a.checkLocaleInDependentLocaleMapping(a.tmpLocale):a.tmpSelectedVal=a.checkLocaleInDependentLocaleMapping($(".responsedata").attr("data-currentkey"))):angular.isUndefined(a.brandType[a.selector])?angular.isUndefined(a.languageTitle(a.selector))?a.tmpSelectedVal=a.checkLocaleInDependentLocaleMapping($(".responsedata").attr("data-currentkey")):
a.tmpSelectedVal=a.checkLocaleInDependentLocaleMapping(a.selector):(a.selectedBrandVal=a.selector,a.tmpSelectedVal=a.checkLocaleInDependentLocaleMapping($(".responsedata").attr("data-currentkey")));angular.forEach(a.language,function(b){b==a.tmpSelectedVal&&(a.selectedCountryVal=a.tmpSelectedVal)});angular.isUndefined(a.selectedCountryVal)&&(a.selectedCountryVal=a.language[0]);if(angular.isUndefined(a.selectedBrandVal))for(var b in a.brandType){a.selectedBrandVal=b;break}a.$watch("selectedCountryVal",
function(){$("div.mss-lang").addClass("hidden").removeClass("active");$("div[data-mss-lang-key\x3d'"+a.selectedCountryVal+"-"+a.selectedBrandVal+"']").removeClass("hidden").addClass("active")});a.$watch("selectedBrandVal",function(){$("div.mss-lang").addClass("hidden").removeClass("active");$("div[data-mss-lang-key\x3d'"+a.selectedCountryVal+"-"+a.selectedBrandVal+"']").removeClass("hidden").addClass("active");a.language=$(".responsedata").attr("data-key").split(",").filter(function(b){if(c.includes(b)&&
a.brandType[a.selectedBrandVal].children.includes(b))return b});a.language.includes(a.selectedCountryVal)||(a.selectedCountryVal=a.language[0])})}]);var ProductTechSpecsApp=angular.module("ProductTechSpecsApp",[]);
ProductTechSpecsApp.controller("ProductTechSpecsController",["$scope",function(a){a.excelResponse=[];a.skuNumber="";a.handleTechSpecsForVariant=function(c){c=angular.element(c.target).parent();var b=c.attr("id");a.toggleTechSpecs(c.closest(".section "),b)};a.toggleTechSpecs=function(a,b){a.find("div.tech-spec-variant-title").each(function(){$(this).attr("id")==b?$(this).addClass("bg-blue text-black").removeClass("bg-black text-white"):$(this).removeClass("bg-blue text-black").addClass("bg-black text-white")});
a.find("div[data-tech-spec-for-variant]").each(function(){$(this).attr("data-tech-spec-for-variant")==b?$(this).removeClass("hidden"):$(this).addClass("hidden")})};a.initModelChecker=function(){getJsonFrmExcelSheet(a.excelPath,a.sheetName).then(function(c){a.excelResponse=c[0].data;a.$apply()})};a.clearResults=function(){a.skuNumber=null;a.activeSkuObj=null;a.invalid=null;$(".product-tech-specs").find("form .modelCloseIcon").addClass("hidden");$(".product-tech-specs").find("form .modelSearcIcon").removeClass("hidden");
a.$apply()};a.searchSkuNumber=function(){a.invalid=!0;a.activeSkuObj=a.excelResponse.filter(function(c){if(null!=a.skuNumber.match(c.modelNumber))return a.invalid=!1,c})[0];$(".product-tech-specs").find("form .modelSearcIcon").addClass("hidden");$(".product-tech-specs").find("form .modelCloseIcon").removeClass("hidden")}}]);var editorialApp=angular.module("EditorialApp",["CommonUtilApp"]);
editorialApp.directive("editorialappdir",function(){return function(a,c,b){a.processEditorialText($(c).closest(".wdAngularApp").find(".editorial-text"),!0)}});
editorialApp.controller("EditorialController",["$scope","CommonUtilService",function(a,c){a.isWcmModeDisabled=c.isWcmModeDisabled();a.showReadMore=!0;a.showReadMoreContainer=!0;a.processEditorialText=function(b,c){if(a.isWcmModeDisabled){b=c?b:$(b.target).closest(".editorial-text");var d=!1;if(b.find(".textcolumn").find("hr").length)b.find(".textcolumn").children().each(function(){"hr"==$(this)[0].localName&&(d=!0);d&&$(this).toggleClass("hidden")}),c||(b.closest(".spotlight").parent().toggleClass("relative").parent().toggleClass("relative"),
b.closest(".editorialView").toggleClass("card-expanded"));else{var l=parseInt(a.charLength),f=b.find(".textcolumn").text(),k=f.substr(0,l)+" ...";f.length>=l?(b.find(".textcolumn").toggleClass("hidden"),b.find(".editorial-short-text").length?(b.find(".editorial-short-text").toggleClass("hidden"),c||(b.closest(".spotlight").parent().toggleClass("relative").parent().toggleClass("relative"),b.closest(".editorialView").toggleClass("card-expanded"))):b.find(".textcolumn").after('\x3cdiv class\x3d"editorial-short-text"\x3e\x3cp\x3e'+
k+"\x3c/p\x3e\x3cdiv\x3e")):a.showReadMoreContainer=!1}}}}]);
angular.module("ProdSuppInfoApp",[]).controller("ProdSuppInfoCtrl",["$scope",function(a){a.showVideoModal=function(a,b){a=$(a.target).closest(".product-support-info").find(".wd-modal");a.find("iframe").attr("src",b);$("body").addClass("overflow-hidden");a.removeClass("hidden")};a.closeVideoModal=function(a){a=$(a.target).closest(".product-support-info").find(".wd-modal");var b=a.find("iframe");a.addClass("hidden");$("body").removeClass("overflow-hidden");b.attr("src","")}}]);
$(document).ready(function(){function a(a){var b=a.find("option:selected").text();a.closest(".language-toggler").find(".languageSelectorWidth").text(b);b=a.closest(".language-toggler").find(".languageSelectorWidth").width();a.css("width",b+50)}$("#wdLanguageSelector").length&&a($("#wdLanguageSelector"));$(".storeLanguageSelector").each(function(){a($(this))});$("#wdLanguageSelector").change(function(){var c=$("#wdLanguageSelector"),b=c.find("option:selected").val();a(c);window.location.href=b});$(".storeLanguageSelector").change(function(){var c=
$(this),b=c.find("option:selected").val();a(c);for(c=sessionStorage.length;c--;){var d=sessionStorage.key(c);/cmrc/.test(d)&&sessionStorage.removeItem(d)}document.cookie="IgnoreRegionSelector\x3dtrue; secure\x3dtrue";$.get(window.location.origin+("/"==b?"":b)+"/store/?clear\x3dtrue").done(function(){window.location.href=b}).fail(function(){console.log("error")})});$(".storeLanguageSelectorHref").click(function(a){a.preventDefault();var b=$(this).attr("href");for(a=sessionStorage.length;a--;){var c=
sessionStorage.key(a);/cmrc/.test(c)&&sessionStorage.removeItem(c)}document.cookie="IgnoreRegionSelector\x3dtrue; secure\x3dtrue";$.get($("#commerceLoad").attr("data-commerce-platform")+("/"==b?"":b)+"/store/?clear\x3dtrue").done(function(){window.location.href=b}).fail(function(){console.log("Error while switching site");window.location.href=b})})});
$(document).ready(function(){$(document).on("click",".accordion-text .accordion-title",function(){"true"==$(this).attr("aria-expanded")?$(this).attr("aria-expanded","false"):$(this).attr("aria-expanded","true");$(this).closest(".accordion-box").find(".accordion-content:first").slideToggle();$(this).find("svg").each(function(){$(this).toggleClass("hidden")})});$(".accordion-text .accordion-text-v1").each(function(){var a=$(this);0==a.closest(".product-banner").length&&250<a.find(".accordion-content").height()&&
(a.find(".accordion-content .accordianText-content").height(250),a.find(".accordion-content").append('\x3csection class\x3d"accordianText-trigger accordianText-trigger-jquery relative w-full border-b border-grey flex items-center justify-center"\x3e\x3ci class\x3d"accordianText-down-arrow"\x3e\x3c/i\x3e\x3cbutton aria-expanded\x3d"false" class\x3d"toggleMoreLess absolute -pin-t-10 text-center cursor-pointer -mt-3"\x3e\x3cimg alt\x3d""  class\x3d"more cursor-pointer w-12 h-12 z-1 relative" src\x3d"https://www.westerndigital.com/content/dam/store/en-us/portal-assets/icons/moreAccView.svg"\x3e\x3cimg alt\x3d""  class\x3d"hidden less cursor-pointer w-12 h-12 z-1 relative" src\x3d"https://www.westerndigital.com/content/dam/store/en-us/portal-assets/icons/lessAccView.svg"\x3e\x3ci class\x3d"absolute w-8 h-4 bg-white -ml-10 z-0 mt-4"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/section\x3e'))});
$(document).on("click",".accordianText-trigger-jquery",function(){250==$(this).closest(".accordion-content").find(".accordianText-content").height()?($(this).find(".more").addClass("hidden"),$(this).find(".less").removeClass("hidden"),$(this).closest(".accordion-content").find(".accordianText-content").animate({height:$(this).closest(".accordion-content").find(".accordianText-content").find("div:first").height()},400)):($(this).find(".more").removeClass("hidden"),$(this).find(".less").addClass("hidden"),
$(this).closest(".accordion-content").find(".accordianText-content").animate({height:250},400))})});
function initializeImgGallery(a,c){a.find(".wd-slider-for").slick("unslick");a.find(".wd-slider-for").not(".slick-initialized").slick({slidesToShow:1,slidesToScroll:1,fade:!0,asNavFor:".wd-slider-nav",responsive:[{breakpoint:992,settings:{arrows:!1}}],lazyLoad:"progressive"});a.find(".wd-slider-nav").not(".slick-initialized").slick({slidesToShow:4,slidesToScroll:1,asNavFor:".wd-slider-for",dots:!1,centerMode:!0,focusOnSelect:!0,variableWidth:!0,arrows:!0});a.find(".wd-slider-for").slick("slickGoTo",
c);a.find(".wd-slider-nav").slick("slickGoTo",c)}
$(window).on("load",function(){$(".wd-slider-for").not(".slick-initialized").each(function(){$(this).slick({slidesToShow:1,slidesToScroll:1,fade:!0,variableWidth:!1,asNavFor:".wd-slider-nav",responsive:[{breakpoint:992,settings:{arrows:!1}}],lazyLoad:"progressive"})});$(".wd-slider-nav").not(".slick-initialized").each(function(){$(this).slick({slidesToShow:4,slidesToScroll:1,asNavFor:".wd-slider-for",dots:!1,centerMode:!0,focusOnSelect:!0,variableWidth:!0,arrows:!1,infinite:!0})});$(".store-carousel").each(function(){var a=
$(this),c=$(this).data("autorotate"),b=$(this).data("autorotatespeed"),d=$(this).data("pauseonhover"),e=$(this).data("itemsperslide");a.find(".store-carousel-slide").slick({dots:!0,arrows:!1,infinite:!0,adaptiveHeight:!1,autoplay:c,autoplaySpeed:parseInt(b),fade:!0,slidesToShow:parseInt(e),pauseOnHover:d})});$(".img-gallery-anchor").not(".slick-initialized").each(function(){$(this).slick({slidesToShow:4,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:768,settings:{dots:!0,slidesToShow:1}}]})})});
var getThumbnailId;$(".imageGallery .wd-modal-btn").on("click",function(a){var c=$(this).closest(".imageGallery"),b=$(this).attr("data-target");getThumbnailId=$(this).attr("id");var d=$(this).attr("data-index");"viewAll"==d&&(d=0);c.find(b).removeClass("hidden").addClass("flex").attr({"aria-hidden":"false","aria-labelledby":getThumbnailId});$("body").addClass("overflow-hidden");a.preventDefault();initializeImgGallery(c,d)});
function initializeFullImgGallery(a,c){a.find(".slick-initialized").lenght&&a.find(".full-img-gallery-slider").slick("unslick");a.find(".full-img-gallery-slider").not(".slick-initialized").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,infinite:!1,speed:500,fade:!0,cssEase:"linear",responsive:[{breakpoint:768,settings:{dots:!0,slidesToShow:1}}]});a.find(".full-img-gallery-slider").slick("slickGoTo",c);c=a.find(".full-img-gallery-slider").slick("getSlick").slideCount;a.find(".totalCount").html(c)}
$(".full-img-gallery .wd-modal-btn").on("click",function(a){var c=$(this).closest(".full-img-gallery"),b=$(this).attr("data-target"),d=$(this).attr("id");c.find(".wd-image-gallery").prop("id",b.replace("#",""));b=$(this).attr("data-index");c.closest(".wd-image-gallery").removeClass("hidden").addClass("flex").attr({"aria-hidden":"false","aria-labelledby":d});$("body").addClass("overflow-hidden");a.preventDefault();initializeFullImgGallery(c,b)});
$(".wd-modal-close").click(function(a){$(this).closest(".wd-modal").addClass("hidden").removeClass("flex").attr("aria-hidden","true");$("body").removeClass("overflow-hidden")});var timelineApp=angular.module("TimelineApp",["ngSanitize","CommonUtilApp"]);timelineApp.directive("timelineDir",function(){return function(a,c,b){a.init(b.jsonString)}});
timelineApp.controller("TimelineController",["$scope","$filter","$sce","CommonUtilService",function(a,c,b,d){a.timelineJson=[];a.init=function(b){a.timelineJson=JSON.parse(b)}}]);var storeCommerceUserInfoApp=angular.module("StoreCommerceUserInfoApp",["CommerceApp","StoreProductCartApp","CommonUtilApp","ngCookies"]);storeCommerceUserInfoApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
storeCommerceUserInfoApp.controller("StoreCommerceUserInfoAppController",["$scope","$compile","CommerceService","COMMERCE_CONSTANTS","StoreProductCartService","safeApply","$sce","$cookies","CommonUtilService",function(a,c,b,d,e,l,f,k,p){userInfoLogger("Store Commerce User Info App");a.isCatalogPurchasable=b.getPurchasableCatalog();a.platformCommerceURL=b.getPlatformCommerceURL();a.totalItems=0;a.isUserLoggedIn=!1;a.isCustomerChannelB2B=!1;a.wdCreditEnabledForUser=!1;a.showPasswordResetMessage=!1;
a.firstName="";a.emailId="";a.popupType="";a.trustAsUrl=function(a){return f.trustAsResourceUrl(a)};a.gotoCommerceURL=function(a){return f.trustAsResourceUrl(b.gotoCommerceURL(a))};a.initUserInfo=function(){userInfoLogger("in initUserInfo...");var c=b.getSessionVariable(d.USER_DETAILS);userInfoLogger("in initUserInfo::sessionUserDetails::"+JSON.stringify(c));null!=c?(userInfoLogger("in initUserInfo::userid::"+c.uid),"undefined"!=typeof c.uid?(a.isUserLoggedIn=!0,c=b.getSessionVariable(d.USER_DETAILS),
a.totalItems=c.wishlistCount,a.isCustomerChannelB2B=c.customerChannel&&"B2B"==c.customerChannel?!0:!1,a.wdCreditEnabledForUser=c.enableWDCredit,a.firstName=c.firstName,a.emailId=c.uid,a.popupType=c.popupType,m(),l(a)):(userInfoLogger("in initUserInfo: anonymous user ..."),a.isUserLoggedIn=!1,a.isCustomerChannelB2B=!1,a.wdCreditEnabledForUser=!1)):b.getUser().then(function(){c=b.getSessionVariable(d.USER_DETAILS);userInfoLogger("in initUserInfo: user info :"+JSON.stringify(c));null!=c&&"undefined"!=
typeof c.uid?(a.isUserLoggedIn=!0,a.totalItems=c.wishlistCount,a.isCustomerChannelB2B=c.customerChannel&&"B2B"==c.customerChannel?!0:!1,a.wdCreditEnabledForUser=c.enableWDCredit,a.firstName=c.firstName,a.emailId=c.uid,a.popupType=c.popupType,m(),l(a)):(userInfoLogger("in initUserInfo: anonymous user ..."),a.isUserLoggedIn=!1,a.isCustomerChannelB2B=!1,a.wdCreditEnabledForUser=!1)},function(){userInfoLogger("in initUserInfo: user info error ...");a.isUserLoggedIn=!1;a.isCustomerChannelB2B=!1;a.wdCreditEnabledForUser=
!1})};var m=function(){var b=k.get(d.LOGIN_POPUP_COOKIE),c=p.getLocale().toLowerCase();void 0==a.popupType||""==a.popupType||b||(k.put(d.LOGIN_POPUP_COOKIE,!0,{secure:!0}),fetch("/api/assets/store/en-us/content-fragments/"+a.popupType+".json",{credentials:"include"}).then(function(a){return a.json()}).then(function(b){if(b&&b.properties&&b.properties.elements&&b.properties.elements.main&&b.properties.elements.main.value){var d=document.body,e="";e=b.properties.elements.main.variations&&b.properties.elements.main.variations[c]?
b.properties.elements.main.variations[c].value:b.properties.elements.main.value;b=document.createElement("div");b.innerHTML=e.replace(/(\r\n\t|\n|\r\t)/gm,"");d.appendChild(b);$(document).on("click",".wd-consent-modal-close",function(){$(this).closest(".wd-modal");a.passShowPopUpConsent("no")});$(document).on("click",".wd-after-login-modal-btn",function(){var a=$(this).attr("data-attr");window.location.href=p.rewritePageURL(a)})}}))};a.passShowPopUpConsent=function(c){var e=b.getSessionVariable(d.USER_DETAILS);
null!=e&&(e.popupType=void 0,b.setSessionVariable(d.USER_DETAILS,e));b.addConsentForUser(a.emailId,a.popupType,c).then(function(a){userInfoLogger("Add Consent For User response",a)})};a.openLoginPopup=function(c){c=$(c.currentTarget);var e=c.closest(".commerce-user-info"),f=e.find(".login-modal"),g=e.find(".login-error");e.find(".login-modal").attr("id","login-modal-win");f.find(".wd-modal-dialog").attr("aria-modal","true");f.removeClass("hidden");g.closest(".form-error").addClass("hidden");$("body").addClass("overflow-hidden");
$(".loginForm").trigger("reset");a.showLoginForm=!0;a.showForgotPwdForm=!1;a.showResendEmailForm=!1;g.closest(".errorcontent").removeClass("bg-orange").addClass("bg-red");$("[data-target\x3d'#login-modal-win']").removeAttr("data-target");e.find(".login-modal").hasClass("addToFavorites")?$(".product-price.active").find(".addToFavoritesTrigger").attr("data-target","#login-modal-win"):c.attr("data-target","#login-modal-win");setTimeout(function(){tabKeyFunctionality("#login-modal-win")},1E3);b.getCustomerChannel()==
d.B2B&&1<$("input[name\x3dcustomerChannel]").length&&($("input[name\x3dcustomerChannel]")[1].checked=!0)};a.triggerSignInModal=function(){$(".shopAccountLogin a").click().focus()};a.openForgotPasswordPopup=function(b,c){a.loginSource="";$(b.currentTarget).closest(".commerce-user-info").find(".login-error").closest(".form-error").addClass("hidden");a.forgotPwdSuccess=!1;a.showForgotPwdForm=!0;a.showLoginForm=!1;"undefined"!=typeof c&&(a.loginSource=c);a.showPasswordResetMessage&&(b=$($(".forgot-pwd-form .form-error")[0].outerHTML),
b.find(".login-error").html(a.passwordResetMessage.replace("showResetMessage_","")),b.removeClass("hidden").addClass("migrated-user-msg-container"),b.find(".errorcontent").removeClass("bg-red").addClass("bg-orange"),b.find(".closeAccAlert").remove(),$(".forgetPassForm").prepend(b));setTimeout(function(){tabKeyFunctionality(".login-modal")},1E3)};a.closeLoginModal=function(c){c.preventDefault();c.stopPropagation();void 0!=k.get(d.CHANNEL_COOKIE)?(k.remove(d.CHANNEL_COOKIE),b.removeAllSessionVariable(),
location.reload()):(a.showLoginForm=!1,a.showForgotPwdForm=!1,a.showPasswordResetMessage=!1,$(c.currentTarget).closest(".login-modal").addClass("hidden"),$(c.currentTarget).closest(".login-modal").removeClass("addToFavorites removeFromFavorites"),$(c.currentTarget).closest(".login-modal").find(".wd-modal-dialog").attr("aria-modal","false"),$(".migrated-user-msg-container").remove(),$("body").removeClass("overflow-hidden"))};a.logout=function(c){c.preventDefault();c.stopPropagation();k.remove(d.CHANNEL_COOKIE);
k.remove(d.LOGIN_POPUP_COOKIE);b.removeAllSessionVariable();var e=$(c.currentTarget).attr("ng-href");"undefined"==typeof e&&(e=$(c.currentTarget).attr("href"));$.get(e).done(function(){window.location.href=a.platformCommerceURL+$("#commonUtilLoad").attr("data-rootPath")}).fail(function(){console.log("error while logging out")})};a.loginUser=function(c,e){userInfoLogger("CUI: Login USER");c.preventDefault();c.stopPropagation();var f=$(c.currentTarget),g={};g.formRef=f;var h=f.closest(".commerce-user-info"),
l=h.find(".login-modal"),m=h.find(".login-error");m.html("");var p=c.currentTarget.action;e&&(e=h.find(".personalDetailInfo.businessAccount"),p=0<e.length&&0<e.find("form").length&&e.find("form").attr("action")&&""!=e.find("form").attr("action")?e.find("form").attr("action"):a.platformCommerceURL+"/store/business/popup/login");c.currentTarget.customerChannel&&(p=c.currentTarget.customerChannel.value);$.ajax({url:p,type:"POST",data:f.serialize(),xhrFields:{withCredentials:!0}}).then(function(e){userInfoLogger("User Login response :",
e);if(-1<e.indexOf("redirect:/cart")){k.put(d.CHANNEL_COOKIE,b.getCustomerChannelFromPath(p),{secure:!0,path:"/"});b.removeAllSessionVariable();userInfoLogger("User Login Success");b.getUser().then(function(){var a=angular.element($(".product-banner .wdAngularApp.productBannerApp")).scope();userInfoLogger("Product Banner Scope");"undefined"==typeof a&&(a=angular.element(".StoreQuickView").scope());l.hasClass("addToFavorites")?"undefined"!=typeof a&&(a.addToFavorites(),a.$apply()):l.hasClass("removeFromFavorites")?
"undefined"!=typeof a&&(a.removeFromFavorites(),a.$apply()):window.location.reload()});try{var h=window.aa.createEvent("FORM_SUBMITTED",g);window.dispatchEvent(h);userInfoLogger("Sign in FORM successfully submitted to analytics.."+g)}catch(C){console.log("Error while triggering analytics FORM_SUBMITTED event")}}else if(-1<e.indexOf("showResetMessage_"))userInfoLogger("User is Migrated User"),a.showPasswordResetMessage=!0,a.passwordResetMessage=e,$(".forgetPassModal").click();else if(-1<e.indexOf("showEmailValidationMessage_")){userInfoLogger("user email verification pending");
m.html(e.replace("showEmailValidationMessage_",""));m.closest(".errorcontent").removeClass("bg-red").addClass("bg-orange");m.closest(".form-error").removeClass("hidden");try{g.errorMessage="Login Status | "+e.replace("showEmailValidationMessage_","");var n=window.aa.createEvent("FORM_ERROR",g);window.dispatchEvent(n);userInfoLogger("Error while triggering analytics for sign in form.."+g)}catch(C){console.log("Error while triggering analytics FORM_ERROR event")}}else if(-1<e.indexOf("showB2BUserValidationMessage_")){userInfoLogger("b2b user validation message");
m.html(e.replace("showB2BUserValidationMessage_",""));m.closest(".form-error").removeClass("hidden");try{g.errorMessage="Login Status | "+e.replace("showB2BUserValidationMessage_",""),n=window.aa.createEvent("FORM_ERROR",g),window.dispatchEvent(n),userInfoLogger("Error while triggering analytics for sign in form.."+g)}catch(C){console.log("Error while triggering analytics FORM_ERROR event")}}else if(-1<e.indexOf("Your username or password was incorrect.")||-1<e.indexOf("attempts remaining before your account is locked.")||
-1<e.indexOf("Your account is locked")){userInfoLogger("User Login Failure");m.html(e);m.closest(".form-error").removeClass("hidden");f.trigger("reset");try{g.errorMessage="Login Status | "+e,n=window.aa.createEvent("FORM_ERROR",g),window.dispatchEvent(n),userInfoLogger("Error while triggering analytics for sign in form.."+g)}catch(C){console.log("Error while triggering analytics FORM_ERROR event")}}else if(-1<e.indexOf("isB2BUser"))userInfoLogger("User is a B2B user, Login into B2B account"),a.loginUser(c,
!0);else{userInfoLogger("User Login Failure");m.html("Login Failure");m.closest(".form-error").removeClass("hidden");f.trigger("reset");try{g.errorMessage="Login Status | "+e,n=window.aa.createEvent("FORM_ERROR",g),window.dispatchEvent(n),userInfoLogger("Error while triggering analytics for sign in form.."+g)}catch(C){console.log("Error while triggering analytics FORM_ERROR event")}}},function(a){userInfoLogger("User Login Failure");m.html("Login Failure");m.closest(".form-error").removeClass("hidden");
userInfoLogger("failed to login",a);try{g.errorMessage="Login Failure | Server unavailable";var b=window.aa.createEvent("FORM_ERROR",g);window.dispatchEvent(b);userInfoLogger("Error while triggering analytics for sign in form.."+g)}catch(t){console.log("Error while triggering analytics FORM_ERROR event")}})};a.verifyRecaptchaForForgotPwd=function(b){userInfoLogger("CUI: verifyRecaptchaForForgotPwd");b.preventDefault();b.stopPropagation();var c=$("#commonUtilLoad").attr("data-enableRecaptcha");userInfoLogger("enableRecaptcha: "+
c);var d=b.currentTarget.name;if("true"==c){var e=void 0!=d?d.replace(/[^a-z]/gi,""):"",f=$("#commonUtilLoad").attr("data-recaptchaSiteKey");grecaptcha.ready(function(){grecaptcha.execute(f,{action:e}).then(function(d){0<$(b.currentTarget).find('[name\x3d"g-recaptcha-response"]').length&&$(b.currentTarget).find('[name\x3d"g-recaptcha-response"]').remove();d=$("\x3cinput\x3e").attr("type","hidden").attr("name","g-recaptcha-response").val(d);$(b.currentTarget).append(d);0<$(b.currentTarget).find('[name\x3d"g-recaptcha-flag"]').length&&
$(b.currentTarget).find('[name\x3d"g-recaptcha-flag"]').remove();d=$("\x3cinput\x3e").attr("type","hidden").attr("name","g-recaptcha-flag").val(c);$(b.currentTarget).append(d);a.forgotPwd(b)})})}else userInfoLogger("in normal flow.."),a.forgotPwd(b)};a.forgotPwd=function(b){userInfoLogger("CUI: FORGOT PWD");b.preventDefault();b.stopPropagation();var c=$(b.currentTarget),d=c.closest(".commerce-user-info"),e={};e.formRef=c;d.find(".login-modal");var h=d.find(".login-error");h.html("");a.email=c.find('[name\x3d"email"]').val();
b=b.currentTarget.action;"b2b"==a.loginSource&&(b=b.replace("/store/","/store/business/"));$.ajax({url:b,type:"POST",data:c.serialize(),xhrFields:{withCredentials:!0}}).then(function(b){userInfoLogger("FORGOT PWD Service response :",b);if(-1<b.indexOf("success")){a.forgotPwdSuccess=!0;a.forgotSuccessMsg=f.trustAsHtml(b);c.trigger("reset");try{var d=window.aa.createEvent("FORM_SUBMITTED",e);window.dispatchEvent(d);userInfoLogger("Forgot password form successfully submitted to analytics.."+e)}catch(v){console.log("Error while triggering analytics FORM_SUBMITTED event")}}else{a.forgotPwdSuccess=
!1;h.html("Server Error");h.closest(".form-error").removeClass("hidden");try{e.errorMessage="Form Error | Server unavailable",d=window.aa.createEvent("FORM_ERROR",e),window.dispatchEvent(d),userInfoLogger("Error while triggering analytics for forgot password form.."+e)}catch(v){console.log("Error while triggering analytics FORM_ERROR event")}}l(a);setTimeout(function(){tabKeyFunctionality(".login-modal")},1E3)},function(b){a.forgotPwdSuccess=!1;h.html("Server Error");h.closest(".form-error").removeClass("hidden");
userInfoLogger("failed to reset password",b);try{e.errorMessage="Form Error | Server unavailable";var c=window.aa.createEvent("FORM_ERROR",e);window.dispatchEvent(c);userInfoLogger("Error while triggering analytics for forgot password form.."+e)}catch(v){console.log("Error while triggering analytics FORM_ERROR event")}})};$(document).on("click",".customer-verification-resend-email",function(){$(this).closest(".commerce-user-info").find(".login-error").closest(".form-error").addClass("hidden");a.resendVerificationSuccess=
!1;a.showLoginForm=!1;a.showResendEmailForm=!0;l(a)});$(document).on("click",".triggerForgotPasswordModal",function(){$(".forgetPassModal").click()});a.resendEmailVerification=function(b){userInfoLogger("CUI: resendEmailVerification");b.preventDefault();b.stopPropagation();var c=$(b.currentTarget),d=c.closest(".commerce-user-info"),e={};e.formRef=c;d.find(".login-modal");var f=d.find(".login-error");f.html("");a.email=c.find('[name\x3d"email"]').val();$.ajax({url:b.currentTarget.action,type:"POST",
data:c.serialize()}).then(function(b){userInfoLogger("resendEmailVerification Service response :",b);a.resendVerificationSuccess=!0;c.trigger("reset");a.resendVerificationSuccessMsg=b;l(a);try{var d=window.aa.createEvent("FORM_SUBMITTED",e);window.dispatchEvent(d);userInfoLogger("Email Verification form successfully submitted to analytics.."+e)}catch(v){console.log("Error while triggering analytics FORM_SUBMITTED event")}l(a)},function(b){a.resendVerificationSuccess=!1;f.html("Server Error");f.closest(".form-error").removeClass("hidden");
userInfoLogger("failed to resend verify email",b);try{e.errorMessage="Form Error | Server unavailable";var c=window.aa.createEvent("FORM_ERROR",e);window.dispatchEvent(c);userInfoLogger("Error while triggering analytics for forgot password form.."+e)}catch(v){console.log("Error while triggering analytics FORM_ERROR event")}})}}]);function userInfoLogger(a,c){-1<window.location.search.indexOf("debugUserInfo\x3dtrue")&&(console.log("USER INFO: "+a),c?console.log(c):"")}
$(document).ready(function(){$(".wdJavaScript").length&&($(".openLoginFlyout").on("click",function(){$(this).closest(".commerce-user-info").find(".login-flyout").removeClass("hidden")}),$(".loginFlyoutClose").on("click",function(){$(this).closest("body").removeClass("mob-visibleLoginFlyout");$(this).closest(".login-flyout").addClass("hidden")}),$(document).on("click",".mob-openLoginFlyout",function(){$(".openLoginFlyout").trigger("click");$("body").addClass("mob-visibleLoginFlyout")}),$(document).click(function(a){$(a.target).closest(".login-flyout,.openLoginFlyout").length||
$(a.target).closest(".StoreQuickView").length||$(a.target).closest(".mob-visibleLoginFlyout")||$(".loginFlyoutClose").closest(".login-flyout").addClass("hidden")}),$("#login-tab-consumer").on("click",function(){$(this).addClass("border-b-2 border-blue text-blue font-medium");$("#login-tab-business").removeClass("border-b-2 border-blue text-blue font-medium");$("#login-tab-support").removeClass("border-b-2 border-blue text-blue font-medium");$(".shopAccount").removeClass("hidden");$(".businessAccount").addClass("hidden");
$(".support-menuitems").addClass("hidden");$(".hide-menuitems").removeClass("hidden")}),$("#login-tab-business").on("click",function(){$(this).addClass("border-b-2 border-blue text-blue font-medium");$("#login-tab-consumer").removeClass("border-b-2 border-blue text-blue font-medium");$("#login-tab-support").removeClass("border-b-2 border-blue text-blue font-medium");$(".shopAccount").addClass("hidden");$(".businessAccount").removeClass("hidden");$(".support-menuitems").addClass("hidden");$(".hide-menuitems").removeClass("hidden")}),
$("#login-tab-support").on("click",function(){$(this).addClass("border-b-2 border-blue text-blue font-medium");$("#login-tab-consumer").removeClass("border-b-2 border-blue text-blue font-medium");$("#login-tab-business").removeClass("border-b-2 border-blue text-blue font-medium");$(".shopAccount").addClass("hidden");$(".businessAccount").removeClass("hidden");$(".support-menuitems").removeClass("hidden");$(".hide-menuitems").addClass("hidden")}))});
var storePotentialPromotionsApp=angular.module("StorePotentialPromotionsApp",["CommerceApp","CampaignApp","ngSanitize","uiSlider"]);storePotentialPromotionsApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
storePotentialPromotionsApp.controller("StorePotentialPromotionsController",["COMMERCE_CONSTANTS","CommonUtilService","$scope","$http","CommerceService","CampaignService","$sce","orderByFilter","$filter","$window","safeApply",function(a,c,b,d,e,l,f,k,p,m,h){b.potentialPromotions={};b.isCatalogPurchasable=e.getPurchasableCatalog();b.processPotentialPromotions=function(a){if(b.isCatalogPurchasable){a=a.split(",");for(var c=0;c<a.length;c++)b.getPotentialPromotions(a[c])}else spp_commonLogger("No potential promotions as catalog is not Purchasable.")};
b.getPotentialPromotions=function(a){var c=e.getSessionVariable(a);null==c||null==c.potentialPromotions?e.getPotentialPromotions(a).then(function(){c=e.getSessionVariable(a);null!=c&&c.potentialPromotions?(b.potentialPromotions[a]=c.potentialPromotions,h(b)):spp_commonLogger("sku "+a+" do not have potential promotion.")},function(b){console.log("Potential Promotion Service failed to get response.["+a+"],response "+b)}):c.potentialPromotions?(b.potentialPromotions[a]=c.potentialPromotions,h(b)):spp_commonLogger("sku "+
a+" do not have potential promotion.")}}]);function spp_commonLogger(a){-1<window.location.search.indexOf("debugPotentialPromotions\x3dtrue")&&console.log("SPP: "+a)}var newsroomApp=angular.module("NewsroomApp",["CommonUtilApp"]);newsroomApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
newsroomApp.controller("NewsroomController",["$scope","$http","$filter","$location","CommonUtilService",function(a,c,b,d,e){function l(a){var b=$("html").attr("lang").toLowerCase();return"en-us"==b?a+"/tools/":a+("/"+b+"/tools/")}function f(a,b){a=a.id;b=b.id;var c=0;a>b?c=1:a<b&&(c=-1);return c}function k(a,b){a=a.eventStartDate;b=b.eventStartDate;var c=0;(new Date(a)).getTime()>(new Date(b)).getTime()?c=1:(new Date(a)).getTime()<(new Date(b)).getTime()&&(c=-1);return c}nr_commonLogger("in NewsroomController...");
var p="";a.initQueryUrl=function(a){p=a&&""!=a?l(a):l(window.location.origin)};var m=/(q=.*?)&/,h=/rows=(.*?)&/,q=/start=(.*?)&/,n={offSetDate:0,maxCount:12,queryUrl:p,customQuery:"",updatedCustomQuery:"",customFacetQuery:"",customFeatureQuery:"",skipFacet:!1,activeTab:"",newsroom:{setDate:90},pressrelease:{setDate:1},blogs:{setDate:1},events:{setDate:90},mediakits:{setDate:1},search:{setDate:1}};a.init=function(b,c,e,f,l){a.showClearAll=!1;$(".newsroomSearch").attr("action",$("#searchhref").val()+
".html");var g=c.match(h);null!=g&&2==g.length&&(n.maxCount=g[1]);n.activeTab=b;n.customFeatureQuery=f;n.customQuery=c;n.customFacetQuery=e;"newsroom"==b?n.skipFacet=!0:"search"==b&&(void 0!=d.search().q&&""!=d.search().q?(b=" AND "+d.search().q+"\x26",$("#searchDesc").addClass("hidden"),$("#searchTitle").find(".breaker").removeClass("breaker"),$("#searchTitle").find(".heading1").html(l+' "'+d.search().q+'"')):b="\x26",n.customQuery=c.replace(m,"$1"+b),n.customFacetQuery=e.replace(m,"$1"+b));n.updatedCustomQuery=
n.customQuery;a.getInfo(0)};a.getInfo=function(b){n.skipFacet||a.getfacetInfo().then(function(b){nr_commonLogger("Get facets..."+n.activeTab);a.facetDetails=a.getfacetJson(b)});a.getContentInfo(b).then(function(c){nr_commonLogger("Get Content..."+n.activeTab);if("newsroom"===n.activeTab){var d=JSON.parse('{"pressrelease":{"href":"","data":[]},"mediakits":{"href":"","data":[]},"events":{"href":"","data":[]},"blogs":{"href":"","data":[]},"feature":[]}');angular.forEach(c.data.grouped.grpDocumentType.groups,
function(a){switch(a.groupValue){case "Press Release":d.pressrelease.data=a.doclist.docs;d.pressrelease.href=$("#pressreleasehref").val();break;case "Events":d.events.data=a.doclist.docs;d.events.href=$("#eventshref").val();break;case "Media Kits":d.mediakits.data=a.doclist.docs;d.mediakits.href=$("#mediakitshref").val();break;case "Blogs":d.blogs.data=a.doclist.docs;d.blogs.href=$("#blogshref").val();break;default:d.blogs.data||(d.blogs.data=a.doclist.docs,d.blogs.href=$("#blogshref").val())}});
a.newsroomData=d;a.getFeatureInfo().then(function(b){var c=[],d=!1,e=!1;angular.forEach(b.data.response.docs,function(a){"Media Kits"!=a.documentType||d||(c[1]=a,d=!0);"Press Release"!=a.documentType||e||(c[0]=a,e=!0)});a.newsroomData.feature=c.length?c:b.data.response.docs})}else a.contentDetails=c.data.response.docs,a.start=parseInt(b),a.row=parseInt(n.maxCount),a.numOfResult=parseInt(c.data.response.numFound),a.numOfPages=Math.floor(a.numOfResult/a.row)+1,a.countSelector=""+(a.start/a.row+1),n.skipFacet||
""==n.customFeatureQuery.trim()||a.getFeatureInfo().then(function(b){b=b.data.response.docs;"events"==n.activeTab&&b.sort(k);a.featureDetails=b})})};a.getfacetInfo=function(){var a=new Date;a=a.setDate(a.getDate()+n[n.activeTab].setDate);a="\x26fq\x3d"+("events"==n.activeTab?"eventStartDate":"documentTypeDate")+":[* TO "+b("date")(a,"yyyy-MM-dd")+"T23:59:00Z]";return c({url:p+"shopsearchfacets?"+n.customFacetQuery+a,method:"GET"})};a.getContentInfo=function(a){var d=new Date;d=d.setDate(d.getDate()+
n[n.activeTab].setDate);d="\x26fq\x3d"+("events"==n.activeTab?"eventStartDate":"documentTypeDate")+":[* TO "+b("date")(d,"yyyy-MM-dd")+"T23:59:00Z]";return c({url:p+"shopsearchquery?"+n.updatedCustomQuery.replace(q,"start\x3d"+a+"\x26")+d,method:"GET"})};a.getFeatureInfo=function(){var a=new Date;a=a.setDate(a.getDate()+n[n.activeTab].setDate);a="\x26fq\x3d"+("events"==n.activeTab?"eventStartDate":"documentTypeDate")+":[* TO "+b("date")(a,"yyyy-MM-dd")+"T23:59:00Z]";return c({url:p+"shopsearchquery?"+
n.customFeatureQuery+a,method:"GET"})};a.getfacetJson=function(a){var b=JSON.parse('{"year":[], "brand":[], "topics":[]}');angular.forEach(a.data.facet_counts.facet_fields,function(a,c){angular.forEach(a,function(a){if(!Number.isInteger(a))switch(c){case "cqTagsIdName_s":a.split(",").forEach(function(a){a=a.split("~");if(2==a.length&&!a[0].includes("newsroom/category/all")&&!a[0].includes("newsroom/category/featured")&&!a[0].includes("newsroom/category/media-kit")){var c=a[0].replace("corp:","");
a=a[1];if(c.includes("brands")){var d=b.brand.findIndex(function(a){return a.id===c});-1==d&&b.brand.push(JSON.parse('{"id":"'+c+'","selected":false,"label":"'+a+'"}'))}else c.includes("newsroom/category")&&(d=b.topics.findIndex(function(a){return a.id===c}),-1==d&&b.topics.push(JSON.parse('{"id":"'+c+'","selected":false,"label":"'+a+'"}')))}});break;case "subDocumentType":var d=a.replace(/\s+/,"").toLowerCase(),e=b.topics.findIndex(function(b){return b.label===a});-1==e&&b.topics.push(JSON.parse('{"id":"'+
d+'","selected":false,"label":"'+a+'"}'));break;case "yearMonth":var g=a.split("-")[0];e=b.year.findIndex(function(a){return a.label==g});-1==e&&b.year.push(JSON.parse('{"id":"'+g+'","selected":false,"label":"'+g+'"}'))}})});b.year.sort(function(a,b){return b.id-a.id});b.brand.sort(f);b.topics.sort(f);nr_commonLogger(b);return b};a.goOnPage=function(){n.skipFacet=!0;a.getInfo((Number.parseInt(a.countSelector)-1)*Number.parseInt(a.row))};a.nextClick=function(){n.skipFacet=!0;a.getInfo(Number.parseInt(a.start)+
Number.parseInt(a.row))};a.prevClick=function(){n.skipFacet=!0;a.getInfo(Number.parseInt(a.start)-Number.parseInt(a.row))};a.clickFacet=function(){nr_commonLogger("In Click Facet");var b="",c="",d="",e=!1;angular.forEach(a.facetDetails,function(a,g){angular.forEach(a,function(a){a.selected&&(e=!0,"topics"===g&&"blogs"==n.activeTab?b=b+'subDocumentType:"'+a.label+'" OR ':"topics"===g&&"search"==n.activeTab?b=b+'subDocumentType:"'+a.label+'" OR cqTagsIdName_s:*'+a.id+"* OR ":"topics"===g&&"blogs"!=
n.activeTab&&"search"!=n.activeTab?b=b+"cqTagsIdName_s:*"+a.id+"* OR ":"year"===g?c=c+"yearMonth:"+a.id+"* OR ":"brand"===g&&(d=d+"cqTagsIdName_s:*"+a.id+"* OR "))})});a.showClearAll=e?!0:!1;var f=(0<b.length?" AND ("+b.substring(0,b.lastIndexOf(" OR "))+")":"")+(0<c.length?" AND ("+c.substring(0,c.lastIndexOf(" OR "))+")":"")+(0<d.length?" AND ("+d.substring(0,d.lastIndexOf(" OR "))+")":"");n.skipFacet=!0;n.updatedCustomQuery=n.customQuery.replace(m,"$1"+f+"\x26");a.getInfo(0)};a.getBrandSubDoc=
function(a,b){if(a.documentType)var c=a.documentType;if(a.cqTagsIdName_s){b=a.cqTagsIdName_s;var d=[],g=[],f;b=angular.isArray(a.cqTagsIdName_s)&&0<a.cqTagsIdName_s.length?a.cqTagsIdName_s[0]:a.cqTagsIdName_s;b.split(",").forEach(function(a){a=a.split("~");2!=a.length||a[0].includes("newsroom/category/all")||a[0].includes("newsroom/category/featured")||a[0].includes("newsroom/category/media-kit")?a[0].includes("newsroom/category/media-kit")&&(f=a[1]):a[0].includes("brands")?d.push(a[1]):a[0].includes("newsroom/category")&&
g.push(a[1])});d.sort();g.sort();return c&&"Media Kits"==c?e.mergeStringArray([f],""):e.mergeStringArray([c],"")}return a.documentType?e.mergeStringArray([c],""):""};a.getMergeArray=function(a,b){return null!=a?(a.sort(),""==b?(a=e.mergeStringArray(a,b),a.includes("|")?a.substr(0,a.lastIndexOf("|")):a):e.mergeStringArray(a,b)):""};a.clearAll=function(){angular.forEach(a.facetDetails,function(a,b){angular.forEach(a,function(a){a.selected=!1})});n.skipFacet=!0;n.updatedCustomQuery=n.customQuery;a.getInfo(0);
a.showClearAll=!1};a.getFormattedDate=function(a){return e.getConvertedDate(new Date(a))}}]);function nr_commonLogger(a){-1<window.location.search.indexOf("debugNR\x3dtrue")&&console.log(a)}$(document).ready(function(){$(document).on("click",".nrFilterBTN",function(){$(this).next(".nrFilterWrap").removeClass("hidden");$(this).closest("body").addClass("overflow-hidden")});$(document).on("click",".nrFilterCloseBTN",function(){$(this).closest(".nrFilterWrap").addClass("hidden");$(this).closest("body").removeClass("overflow-hidden")})});
void 0===Number.parseInt&&(Number.parseInt=window.parseInt);Number.isInteger=Number.isInteger||function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a};
Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(a,c){if(null==this)throw new TypeError('"this" is null or not defined');var b=Object(this),d=b.length>>>0;if("function"!==typeof a)throw new TypeError("predicate must be a function");for(var e=0;e<d;){if(a.call(c,b[e],e,b))return e;e++}return-1},configurable:!0,writable:!0});
var commonSupportApp=angular.module("CommonSupportApp",["CommonUtilApp"]),deferredPromisesGetProductCategories=[],getProductCategoriesCallInProgress=!1,getProductNamesCallInProgress=!1,getProductListCallInProgress=!1,productNameMap=new Map,productListMap=new Map;commonSupportApp.config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]);
commonSupportApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);commonSupportApp.constant("SUPPORT_CONSTANTS",{INVALIDATION_TIMEOUT:"supportInvalidationTimeout",PREFIX:"support_",EMPTY_JSON:"{}",PRODUCT_CATEGORY:"productCategory",PRODUCT_NAME:"productName",PRODUCT_LIST:"productList"});
commonSupportApp.service("CommonSupportService",["$q","$sce","SUPPORT_CONSTANTS","CommonUtilService","$http",function(a,c,b,d,e){cs_commonLogger("in CommonSupportService...");css_this=this;d.getSiteName();this.getInvalidationTimeout=function(){cs_commonLogger("invalidationTimeout: 15");return 15};this.initialize=function(c){cs_commonLogger("in initialize..."+c);c=a.defer();var d=css_this.getSessionVariable(b.INVALIDATION_TIMEOUT),e=(new Date).getTime();null==d?(cs_commonLogger("invalidationTimeout doesn't exist in session storage"),
e+=6E4*css_this.getInvalidationTimeout(),css_this.setSessionVariable(b.INVALIDATION_TIMEOUT,e),cs_commonLogger("invalidationTimeout set as: "+e)):(cs_commonLogger("invalidationTimeout exists in session storage"),cs_commonLogger("invalidationTimeout: "+d),cs_commonLogger("currentTimeInMilliseconds: "+e),d<e?(cs_commonLogger("out of session"),css_this.removeAllSessionVariable(),cs_commonLogger("empty session storage")):cs_commonLogger("within session"));c.resolve();return c.promise};this.getProductCategories=
function(b){cs_commonLogger("in getProductCategories...");var c=a.defer();deferredPromisesGetProductCategories.push(c);getProductCategoriesCallInProgress?cs_commonLogger("get user call in progress"):(getProductCategoriesCallInProgress=!0,css_this.getProductCategoriesWS(b).then(function(){getProductCategoriesCallInProgress=!1;cs_commonLogger("resolve all deferred promises in getProductCategories: "+deferredPromisesGetProductCategories.length);for(var a=0;a<deferredPromisesGetProductCategories.length;a++)deferredPromisesGetProductCategories[a].resolve();
deferredPromisesGetProductCategories=[]},function(a){getProductCategoriesCallInProgress=!1;cs_commonLogger("reject all deferred promises in getProductCategories: "+deferredPromisesGetUser.length);for(var b=0;b<deferredPromisesGetProductCategories.length;b++)deferredPromisesGetProductCategories[b].reject(a);deferredPromisesGetProductCategories=[]}));return c.promise};this.getProductCategoriesWS=function(c){cs_commonLogger("in getProductCategoriesWS...");var d=a.defer();css_this.initialize("from getProductCategoriesWS").then(function(){cs_commonLogger("calling get Product Category For Support");
null==css_this.getSessionVariable(b.PRODUCT_CATEGORY)?(cs_commonLogger("product categories not found in session"),$.ajax({url:c,type:"GET"}).then(function(a,c,e){cs_commonLoggerObj("product category response received",a);css_this.isResponseTypeJson(e)?($.trim(a)&&void 0==a.Error?(cs_commonLogger("product categories returned from service, storing in session."),css_this.setSessionVariable(b.PRODUCT_CATEGORY,a)):cs_commonLogger("product categories not returned from service."),d.resolve()):css_this.createErrorObject(d,
"Get Product Categories response object is not of type JSON",null)},function(a){css_this.createErrorObject(d,"failed to get Product Categories from service",a)})):(cs_commonLogger("product categories found in session"),d.resolve())});return d.promise};this.getProductNames=function(b,c){cs_commonLogger("in getProductNames...");cs_commonLogger("inputProductCategoryId: "+c);var d=a.defer();if(productNameMap.get(c)){getProductNamesCallInProgress=!0;cs_commonLogger("is already there in map, then add to promise");
var e=productNameMap.get(c);deferredPromisesGetProductPrice.push(d)}else e=[],e.push(d),productNameMap.set(c,e),getProductNamesCallInProgress=!1,cs_commonLogger("is not there in map, then add it.");cs_commonLoggerObj("objects in product price map",productNameMap);getProductNamesCallInProgress?cs_commonLogger("getProductNames call in progress"):(getProductNamesCallInProgress=!0,css_this.getProductNamesWS(b,c).then(function(){getProductNamesCallInProgress=!1;cs_commonLogger("resolve all deferred promises in getProductNames: "+
e.length);for(var a=0;a<e.length;a++)e[a].resolve();e=[]},function(a){getProductNamesCallInProgress=!1;cs_commonLogger("reject all deferred promises in getProductNames: "+deferredPromisesGetUser.length);for(var b=0;b<e.length;b++)e[b].reject(a);e=[]}));return d.promise};this.getProductNamesWS=function(c,d){cs_commonLogger("in getProductNamesWS...");var e=a.defer();css_this.initialize("from getProductNamesWS").then(function(){cs_commonLogger("calling get Product Name For Support");null==css_this.getSessionVariable(b.PRODUCT_NAME+
"_"+d)?(cs_commonLogger("product names not found in session"),$.ajax({url:c,type:"GET"}).then(function(a,c,f){cs_commonLoggerObj("product name response received",a);css_this.isResponseTypeJson(f)?($.trim(a)&&void 0==a.Error?(cs_commonLogger("product names returned from service, storing in session."),css_this.setSessionVariable(b.PRODUCT_NAME+"_"+d,a)):cs_commonLogger("product name not returned from service."),e.resolve()):css_this.createErrorObject(e,"Get Product Name response object is not of type JSON",
null)},function(a){css_this.createErrorObject(e,"failed to get Product name from service",a)})):(cs_commonLogger("product name found in session"),e.resolve())});return e.promise};this.getProductList=function(b,c){cs_commonLogger("in getProductList...");cs_commonLogger("productNameId: "+c);var d=a.defer();if(productListMap.get(c)){getProductListCallInProgress=!0;cs_commonLogger("is already there in map, then add to promise");var e=productListMap.get(c);deferredPromisesGetProductPrice.push(d)}else e=
[],e.push(d),productListMap.set(c,e),getProductListCallInProgress=!1,cs_commonLogger("is not there in map, then add it.");cs_commonLoggerObj("objects in product price map",productListMap);getProductListCallInProgress?cs_commonLogger("getProductList call in progress"):(getProductListCallInProgress=!0,css_this.getProductListWS(b,c).then(function(){getProductListCallInProgress=!1;cs_commonLogger("resolve all deferred promises in getProductList: "+e.length);for(var a=0;a<e.length;a++)e[a].resolve();e=
[]},function(a){getProductListCallInProgress=!1;cs_commonLogger("reject all deferred promises in getProductList: "+deferredPromisesGetUser.length);for(var b=0;b<e.length;b++)e[b].reject(a);e=[]}));return d.promise};this.getProductListWS=function(c,d){cs_commonLogger("in getProductListWS...");var e=a.defer();css_this.initialize("from getProductListWS").then(function(){cs_commonLogger("calling get Product List For Support");null==css_this.getSessionVariable(b.PRODUCT_LIST+"_"+d)?(cs_commonLogger("product list not found in session"),
$.ajax({url:c,type:"GET"}).then(function(a,c,f){cs_commonLoggerObj("product list response received",a);css_this.isResponseTypeJson(f)?($.trim(a)&&void 0==a.Error?(cs_commonLogger("product list returned from service, storing in session."),css_this.setSessionVariable(b.PRODUCT_LIST+"_"+d,a)):cs_commonLogger("product list not returned from service."),e.resolve()):css_this.createErrorObject(e,"Get Product List response object is not of type JSON",null)},function(a){css_this.createErrorObject(e,"failed to get Product List from service",
a)})):(cs_commonLogger("product list found in session"),e.resolve())});return e.promise};this.getPrefix=function(){return b.PREFIX+d.getLocale().toLowerCase()+"_"};this.createErrorObject=function(a,b,c){var d={};d.status=c?c.status:-1;d.statusText=c?c.statusText:"this is not a service response error but custom processing error";d.responseText=b+(c?", serviceResponseText: "+c.responseText:"");cs_errorLogger(JSON.stringify(d));if(a)return a.reject(d),a.promise};this.isResponseTypeJson=function(a){a=
a.getResponseHeader("content-type");cs_commonLoggerObj("contentTypeHeader",a);return a?a?-1<a.indexOf("json"):!1:!0};this.getSessionVariable=function(a){try{return a=css_this.getPrefix()+a.trim(),null==sessionStorage.getItem(a)||""==sessionStorage.getItem(a)?null:JSON.parse(sessionStorage.getItem(a))}catch(f){return null}};this.setSessionVariable=function(a,b){sessionStorage.setItem(css_this.getPrefix()+a.trim(),JSON.stringify(b))};this.removeSessionVariable=function(a){sessionStorage.removeItem(a)};
this.removeAllSessionVariable=function(){cs_commonLogger("remove all support keys from session storage");for(var a=sessionStorage.length;a--;){var b=sessionStorage.key(a).trim();0==b.indexOf(css_this.getPrefix())?(css_this.removeSessionVariable(b),cs_commonLogger("remove key: "+b)):cs_commonLogger("keep key: "+b)}}}]);
commonSupportApp.controller("CommonSupportController",["$scope","$http","$filter","$location","SUPPORT_CONSTANTS","CommonSupportService","CommonUtilService","$window","safeApply",function(a,c,b,d,e,l,f,k,p){function m(){null==a.supportProductList||0==a.supportProductList.length?a.noProductOrSerialNumSelected=!0:1==a.supportProductList.length?k.location.href=a.supportProductList[0].p_link:1<a.supportProductList.length&&(k.location.href=f.rewritePageURL(a.multipleProductsRedirectPath)+"?productName\x3d"+
a.selectedProductName)}cs_commonLogger("in CommonSupportController...");a.noProductOrSerialNumSelected=!1;a.$watch("commonSupportDefaultView",function(){a.commonSupportDefaultView&&(cs_commonLogger("in commonSupportDefaultView watch..."),a.noProductOrSerialNumSelected=!1,a.supportProductCategories=l.getSessionVariable(e.PRODUCT_CATEGORY),null==a.supportProductCategories&&(cs_commonLogger("calling get support product categories. . ."),l.getProductCategories(a.commonSupportBasePath+"?q\x3dproduct_catalog\x26lang\x3d"+
f.getLocale().toLowerCase()).then(function(){a.supportProductCategories=l.getSessionVariable(e.PRODUCT_CATEGORY)},function(a){cs_commonLogger("Issue in getting product categories ",a)})))});a.$watch("commonSupportMultiProductView",function(){if(a.commonSupportMultiProductView){cs_commonLogger("in commonSupportMultiProductView watch...");a.noProductOrSerialNumSelected=!1;var b=d.search().productName;a.supportProductList=l.getSessionVariable(e.PRODUCT_LIST+"_"+b);null==a.supportProductList&&(cs_commonLogger("calling get support product list. . ."),
l.getProductList(a.commonSupportBasePath+"?q\x3dproduct_list\x26lang\x3d"+f.getLocale().toLowerCase()+"\x26p_id\x3d"+b,b).then(function(){a.supportProductList=l.getSessionVariable(e.PRODUCT_LIST+"_"+b);null==a.supportProductList&&(a.emptyMultiProductResponse=!0)},function(a){cs_commonLogger("Issue in getting product list ",a)}))}});a.populateProductName=function(){cs_commonLogger("in populateProductName method");a.noProductOrSerialNumSelected=!1;a.supportProductNames=l.getSessionVariable(e.PRODUCT_NAME+
"_"+a.selectedProductCategory);null==a.supportProductNames&&(cs_commonLogger("calling get support product names. . ."),l.getProductNames(a.commonSupportBasePath+"?q\x3dproduct_catalog\x26lang\x3d"+f.getLocale().toLowerCase()+"\x26p_id\x3d"+a.selectedProductCategory,a.selectedProductCategory).then(function(){a.supportProductNames=l.getSessionVariable(e.PRODUCT_NAME+"_"+a.selectedProductCategory);null==a.supportProductNames&&(a.selectedProductName="select-productName",a.noProductOrSerialNumSelected=
!0)},function(a){cs_commonLogger("Issue in getting product name ",a)}))};a.getProductListAndRedirect=function(b){cs_commonLogger("in getProductListAndRedirect method");a.noProductOrSerialNumSelected=!1;a.serialNumber&&0<a.serialNumber.length?$.ajax({url:a.commonSupportBasePath+"?q\x3dproduct_search\x26lang\x3d"+f.getLocale().toLowerCase()+"\x26s_string\x3d"+a.serialNumber,type:"GET"}).then(function(b,c,d){cs_commonLoggerObj("product search response received",b);css_this.isResponseTypeJson(d)?$.trim(b)&&
void 0==b.Error?(cs_commonLogger("product search returned from service, redirecting to support page."),k.location.href=b[0].p_link):(cs_commonLogger("product list not returned from service."),a.noProductOrSerialNumSelected=!0):(css_this.createErrorObject(d,"Get Product Search response object is not of type JSON",null),a.noProductOrSerialNumSelected=!0);p(a)},function(b){a.noProductOrSerialNumSelected=!0;p(a);css_this.createErrorObject(responseXhr,"failed to get Product Search from service",b)}):"select-productCategory"!=
a.selectedProductCategory&&"select-productName"!=a.selectedProductName?(a.supportProductList=l.getSessionVariable(e.PRODUCT_LIST+"_"+a.selectedProductName),null==a.supportProductList?(cs_commonLogger("calling get support product list. . ."),l.getProductList(a.commonSupportBasePath+"?q\x3dproduct_list\x26lang\x3d"+f.getLocale().toLowerCase()+"\x26p_id\x3d"+a.selectedProductName,a.selectedProductName).then(function(){a.supportProductList=l.getSessionVariable(e.PRODUCT_LIST+"_"+a.selectedProductName);
m()},function(a){cs_commonLogger("Issue in getting product list ",a)})):m()):a.noProductOrSerialNumSelected=!0};a.redirectURL=function(a){return f.rewritePageURL(a)}}]);function cs_commonLogger(a){-1<window.location.search.indexOf("debugCS\x3dtrue")&&console.log(a)}function cs_errorLogger(a){console.log(a)}function cs_commonLoggerObj(a,c){-1<window.location.search.indexOf("debugCS\x3dtrue")&&(console.log("CS: "+a+"-\x3e"),console.log(c))}var stockpriceApp=angular.module("StockPrice",[]);
stockpriceApp.controller("StockPriceController",["$scope","$http",function(a,c){sp_commonLogger("in StockPriceController...");a.exchange="";a.lastTrade="";a.initStockPrice=function(b){sp_commonLogger(b);c.get(b).then(function(b){sp_commonLogger("response",b);try{b.data.data[0]?(sp_commonLogger("Setting stock price values"),a.exchange=b.data.data[0].exchange,a.lastTrade="$"+b.data.data[0].lastTrade):sp_commonLogger("Values not present in respone")}catch(e){sp_commonLogger("error while processing response",
e)}},function(a){console.error("Response error",a.status);return!0})}}]);function sp_commonLogger(a,c){-1<window.location.search.indexOf("debugSP\x3dtrue")&&(console.log(a),c?console.log(c):"")}
document.getElementById("av-container")&&(document.getElementsByClassName("av-month-error")[0].style.display="none",document.getElementsByClassName("av-day-error")[0].style.display="none",document.getElementsByClassName("av-year-error")[0].style.display="none",document.getElementById("av-above-18-fail").style.display="none");
function av_closePopUp(){console.log("in av_closePopUp...");document.getElementById("av-success").style.display="block";document.getElementById("av-above-18-fail").style.display="none";document.getElementsByClassName("av-month-error")[0].style.display="none";document.getElementsByClassName("av-day-error")[0].style.display="none";document.getElementsByClassName("av-year-error")[0].style.display="none";document.getElementById("av-month").value="";document.getElementById("av-day").value="";document.getElementById("av-year").value=
""}
function av_validateAge(a){if(!a||onlyNumberKey(a)){a=document.getElementById("av-month").value;var c=document.getElementById("av-day").value,b=document.getElementById("av-year").value;document.getElementsByClassName("age-input-error");if(""==a||""!=a&&(1>a||12<a))return document.getElementsByClassName("av-month-error")[0].style.display="",-1;document.getElementsByClassName("av-month-error")[0].style.display="none";if(""==c||""!=c&&(1>c||31<c))return document.getElementsByClassName("av-day-error")[0].style.display="",
-1;document.getElementsByClassName("av-day-error")[0].style.display="none";var d=(new Date).getFullYear();if(""==b||""!=b&&(b<d-100||b>d))return document.getElementsByClassName("av-year-error")[0].style.display="",-1;document.getElementsByClassName("av-year-error")[0].style.display="none";return""!=a&&""!=c&&""!=b?new Date(a+"/"+c+"/"+b):-1}}
function av_submitAge(){var a=av_validateAge();av_log("birthDate: "+a);if(-1!=a){var c=new Date,b=c.getFullYear()-a.getFullYear(),d=c.getMonth()-a.getMonth();(0>d||0===d&&c.getDate()<a.getDate())&&b--;av_log("age: "+b);18<=b?(document.getElementById("av-above-18-fail").style.display="none",document.getElementById("av-success").style.display="block",window.location.href=document.getElementById("av-redirectPagePath").value):(document.getElementById("av-above-18-fail").style.display="block",document.getElementById("av-success").style.display=
"none")}}function onlyNumberKey(a){a=a.which?a.which:a.keyCode;return 31<a&&(48>a||57<a)?!1:!0}function av_log(a){console.log(a)}var spinTheWheelApp=angular.module("SpinTheWheelApp",["CommonUtilApp","CommerceApp"]);spinTheWheelApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);
spinTheWheelApp.controller("SpinTheWheelController",["spinTheWheelResponse","SPINTHEWHEEL_CONSTANTS","$scope","safeApply","CommonUtilService","CommerceService","COMMERCE_CONSTANTS","$timeout",function(a,c,b,d,e,l,f,k){stw_commonLogger("in SpinTheWheelController...");var p=0;$(".spin-btn").on("mousedown touchstart",function(a){$(this).addClass("active");p=setInterval(function(){},100)}).bind("mouseup mouseleave touchend",function(){$(this).removeClass("active");clearInterval(p)});var m,h,q,n,g="",
r,w={};b.spinTheWheelFormID;b.spinButtonHide=!1;var u=l.getSessionVariable(f.USER_DETAILS);b.spinTheWheelPopUpView=!0;b.successModel=!0;b.emailModel=!0;b.errorModel=!0;b.spinPopUpHide=!0;b.wheelSpinning=!1;b.initPopup=function(d,g,f,h,l,m,p,r,u,w,H,G){b.spinTheWheelFormName=m;var t=a.getCookieVariable(b.spinTheWheelFormName);t&&t[b.spinTheWheelFormName]&&(t[b.spinTheWheelFormName]===c.NO_THANKS||t[b.spinTheWheelFormName]===c.COMPLETED)&&(b.spinButtonHide=!0);q=(new URL(location.href)).searchParams.get("acsId");
b.init(d,g,f,h,l,m,H,G);p&&(n=p,b.spinPopUpHide=!1,$("#"+p+"-popup").addClass("hidden"),$("#"+p).click(function(){!$.cookie(m)||"completed"!==JSON.parse($.cookie(m))[m]&&"NotInterested"!==JSON.parse($.cookie(m))[m]?$("#"+p+"-popup").removeClass("hidden"):($("#"+p+"-cookieModel").removeClass("hidden"),"completed"===JSON.parse($.cookie(m))[m]?($("#"+p+"-completed").removeClass("hidden"),$("#"+p+"-NotInterested").addClass("hidden")):($("#"+p+"-completed").addClass("hidden"),$("#"+p+"-NotInterested").removeClass("hidden")))}));
d=(new URL(location.href)).searchParams.get("formName");d=null!=d&&d.startsWith("GreenMonday");"on"==r&&q&&d?(b.spinPopUpHide=!1,!$.cookie(m)||"completed"!==JSON.parse($.cookie(m))[m]&&"NotInterested"!==JSON.parse($.cookie(m))[m]?p&&$("#"+p+"-popup").removeClass("hidden"):($("#"+p+"-cookieModel").removeClass("hidden"),"completed"===JSON.parse($.cookie(m))[m]?($("#"+p+"-completed").removeClass("hidden"),$("#"+p+"-NotInterested").addClass("hidden")):($("#"+p+"-completed").addClass("hidden"),$("#"+p+
"-NotInterested").removeClass("hidden")))):u&&!b.spinButtonHide&&(w&&w.split(",").some(function(a){return a===e.getCurrentPagePath()})?k(function(){b.spinPopUpHide=!1;p&&$("#"+p+"-popup").removeClass("hidden")},1E3*u):w||k(function(){b.spinPopUpHide=!1;p&&$("#"+p+"-popup").removeClass("hidden")},1E3*u))};b.init=function(d,e,k,n,p,q,r,x){b.spinTheWheelFormName=q;var t=a.getCookieVariable(b.spinTheWheelFormName);t&&t[b.spinTheWheelFormName]&&(t[b.spinTheWheelFormName]===c.NO_THANKS||t[b.spinTheWheelFormName]===
c.COMPLETED)&&(b.spinButtonHide=!0);b.spinTheWheelFormID=q+"-spinTheWheelParam";b.setTimeOut=r||4E3;b.lastDuration=x||1;h=n;m=JSON.parse(JSON.stringify(e));"on"!=p&&e.forEach(function(a){a.text=""});d=JSON.parse(d);d.canvasId=b.spinTheWheelFormName;d.segments=e;d.numSegments=e.length;b.theWheel=new Winwheel(d);k.split(",").forEach(function(a){a=a.split(":");w[a[0]]=a[1]});null==u?l.getUser().then(function(){u=l.getSessionVariable(f.USER_DETAILS);g=u.uid;b.resetWheelSpin()},function(a){b.resetWheelSpin()}):
(g=u.uid,b.resetWheelSpin())};b.submitEmail=function(){b.emailModel=!0;g=b.emailid;b.emailid="";b.spinTheWheelFn(!1)};b.close=function(){b.resetWheelSpin();b.spinButtonHide=!1;n?$("#"+n+"-popup").addClass("hidden"):b.spinPopUpHide=!0};b.closeResponseModel=function(){b.successModel=!0;b.emailModel=!0;b.errorModel=!0};b.closeCookieModel=function(){$("#"+n+"-cookieModel").addClass("hidden")};b.clearCookieAndLoadPopUp=function(){var d=a.getCookieVariable(b.spinTheWheelFormName);d&&d[b.spinTheWheelFormName]&&
d[b.spinTheWheelFormName]===c.NO_THANKS&&(b.closeCookieModel(),$.removeCookie(b.spinTheWheelFormName,{path:"/"}),b.spinButtonHide=!1,$("#"+n+"-popup").removeClass("hidden"))};b.calcTime=function(){r=(new Date).getTime()};b.spinTheWheelFn=function(d){b.closeResponseModel();d&&(d=Math.round(((new Date).getTime()-r)/1E3),b.theWheel.animation.duration+=d,b.theWheel.animation.spins+=d);if(0==b.wheelSpinning&&(g||q)){b.wheelSpinning=!0;d=$("#"+b.spinTheWheelFormID).serialize();d+="\x26currentPagePath\x3d"+
e.getCurrentPagePath();g&&(d+="\x26email\x3d"+g);b.resetWheelSpin();d=d+("\x26acsId\x3d"+(q?q:""))+("\x26locale\x3d"+$("#commonUtilLoad").attr("data-language")+"_"+$("#commonUtilLoad").attr("data-country"));var f="";m.forEach(function(a){f+='{"id":"'+a.id+'", "text":"'+a.text.replace(/\n/g,"")+'"},'});b.theWheel.startAnimation();stw_commonLogger("1st animation started"+(new Date).getSeconds());d+="\x26wheelSegments\x3d"+encodeURIComponent(JSON.stringify(JSON.parse("["+f.slice(0,-1)+"]")));a.getResponse(d,
b.setTimeOut).then(function(d){if(200==d.status&&d.data&&d.data.success){if("ERR_NEED_EMAIL"===d.data.success[0].code)b.resetWheelSpin(),b.emailModel=!1;else if("USER_PRIZE"===d.data.success[0].code){var e=0;m.forEach(function(a,b){a.id===d.data.success[0].message&&(e=b)});b.theWheel.stopAnimation(!1);b.theWheel.animation.stopAngle=(b.theWheel.segments[e+1].startAngle+b.theWheel.segments[e+1].endAngle)/2;b.theWheel.animation.duration=b.lastDuration;stw_commonLogger("2st animation started"+(new Date).getSeconds());
b.theWheel.startAnimation();b.successMsg=w[d.data.success[0].code];b.successModel=!1;a.setCookieVariable(b.spinTheWheelFormName,JSON.parse('{"'+b.spinTheWheelFormName+'":"'+c.COMPLETED+'"}'));b.spinButtonHide=!0}else b.resetWheelSpin(),b.errorMsg=w[d.data.success[0].code],b.errorModel=!1,b.close();g=u&&u.uid?u.uid:""}else g=u&&u.uid?u.uid:"",b.resetWheelSpin(),b.errorMsg=h,b.errorModel=!1,b.close();b.wheelSpinning=!1})}else 0==b.wheelSpinning&&(b.resetWheelSpin(),b.emailModel=!1)};b.noThanks=function(){b.closeResponseModel();
b.resetWheelSpin();n?$("#"+n+"-popup").addClass("hidden"):b.spinPopUpHide=!0;a.setCookieVariable(b.spinTheWheelFormName,JSON.parse('{"'+b.spinTheWheelFormName+'":"'+c.NO_THANKS+'"}'))};b.resetWheelSpin=function(){g=u&&u.uid?u.uid:"";b.theWheel.stopAnimation(!1);b.theWheel.rotationAngle=-20;b.theWheel.draw()}}]).service("spinTheWheelResponse",["$http","$q",function(a,c){this.getResponse=function(b,d){var e=c.defer();a({method:"POST",url:"/bin/wd/acs/spinwheel",data:b,headers:{"Content-Type":"application/x-www-form-urlencoded; charset\x3dUTF-8"}}).then(function(a){setTimeout(function(){e.resolve(a)},
d)},function(a){setTimeout(function(){e.resolve(a)},d)});return e.promise};this.getCookieVariable=function(a){return $.cookie(a.trim())?JSON.parse($.cookie(a.trim())):null};this.setCookieVariable=function(a,c){$.cookie(a.trim(),JSON.stringify(c),{path:"/"})}}]).constant("SPINTHEWHEEL_CONSTANTS",{NO_THANKS:"NotInterested",COMPLETED:"completed"});function stw_commonLogger(a,c){-1<window.location.search.indexOf("debugSTW\x3dtrue")&&console.log(a,c?c:"")}
$(document).ready(function(){var a=1E3*parseInt($("#loadTime").val());setTimeout(function(){$(".spinPopUpModal").addClass("spinModalOpen")},a)});$(document).ready(function(){"function"===typeof lc_gif_player&&lc_gif_player(".img-gif")});var productFilterApp=angular.module("ProductFilterApp",["CommerceApp","ngSanitize"]);
productFilterApp.controller("ProductFilterController",["COMMERCE_CONSTANTS","CommonUtilService","$scope","$http","CommerceService","$filter","$q",function(a,c,b,d,e,l,f){var k="",p="",m=[];b.selectorVal=[];b.step=0;b.productInfo={};var h=[],q="";b.select=[];b.productCategoryCode="cat_products";b.$watch("filterOptions",function(){b.categoryPrefix="cat_";var a="";b.customQuery&&(a=b.customQuery,brandQueryAttribute="");k="pageSize\x3d1000\x26query\x3d"+a;productfilter_commonLogger("In watch filterOptions - uri : "+
k);b.processCategoryListing();b.filtersJSONObj=JSON.parse(b.filtersJSON)});b.processCategoryListing=function(){e.getCategoryListing(k).then(function(a){q=a;productfilter_commonLogger("sessionCategoryListing products length "+q.products.length);0==q.products.length?(b.productJSON=[],noOfProducts=0,b.dataLoaded=!0):b.getFacets(q.products)},function(a){console.log("Error while getting product list.");console.log(a);b.dataLoaded=!0})};var n=[];b.getFacets=function(a){var c=0!=b.filterOptions.length;productfilter_commonLogger("In getFacets function - dialogHasFilter : "+
c);m=a;b.filterLabels=[];var d=!1,e=!1;for(a=0;a<m.length;a++){var f=b.filterOptions.split(",");for(d=0;d<f.length;d++){var g=f[d];productfilter_commonLogger("getFacets method - filterName: "+g);if(m[a][g])for(var h=0;h<m[a][g].length;h++)if(!g.startsWith("cat_")&&!g.startsWith("vc-")&&m[a][g][h]&&m[a][g][h].code){e=!1;for(var k=0;k<b.filterLabels.length;k++)if(b.filterLabels[k].key==m[a][g][h].code&&b.filterLabels[k].filterType==g){e=!0;break}0!=b.filterLabels.length&&e||(-1==p.indexOf(g)&&(p=p+
(0!=p.length?",":"")+g),k=m[a][g][h].code,e="interfaceList"==g||"connectorList"==g?g+"-"+k:k,b.filterLabels.push({filterType:g,filterHeading:g,key:k,id:e,value:m[a][g][h].name,selected:-1!=b.selectorVal.indexOf(e),sequence:a}),productfilter_commonLogger("filter - code: "+m[a][g][h].code+" value: "+m[a][g][h].name))}}if(void 0!=m[a].categories)for(f=0;f<m[a].categories.length;f++){if(m[a].categories[f].code.startsWith(b.categoryPrefix)&&m[a].categories[f].code!=b.storeCategory&&m[a].categories[f].code!=
b.productCategoryCode){d=!1;for(k=0;k<b.filterLabels.length;k++)if(b.filterLabels[k].value==m[a].categories[f].name){d=!0;break}0!=b.filterLabels.length&&d||(b.filterLabels.push({filterType:b.categoryPrefix,filterHeading:"Type",key:m[a].categories[f].code,id:m[a].categories[f].code.replace(b.categoryPrefix,""),value:m[a].categories[f].name,selected:-1!=b.selectorVal.indexOf(m[a].categories[f].code.replace(b.categoryPrefix,"")),sequence:m[a].categories[f].sequence}),productfilter_commonLogger("Type filter - code: "+
m[a].categories[f].code+" value: "+m[a].categories[f].name))}if(m[a].categories[f].code.startsWith("vc-")){d=!1;for(k=0;k<n.length;k++)if(n[k].code==m[a].categories[f].code){d=!0;break}d||n.push({code:m[a].categories[f].code,name:m[a].categories[f].name})}if(m[a].categories[f].code.startsWith("vvc-")){h=g="";e=!1;for(k=0;k<b.filterLabels.length;k++)if(b.filterLabels[k].key==m[a].categories[f].code){e=!0;break}if(0==b.filterLabels.length||!e){d=m[a].categories[f].code;d=d.substring(1,d.length);for(k=
0;k<n.length;k++)if(d.startsWith(n[k].code)){g=n[k].code;h=n[k].name;break}c||-1!=b.filterOptions.indexOf(g)||(b.filterOptions=b.filterOptions+(0!=b.filterOptions.length?",":"")+g);""!=g&&(!c||-1<b.filterOptions.indexOf(g))&&("vc-capacity"!=g&&b.filterLabels.push({filterType:g,filterHeading:h,key:m[a].categories[f].code,id:m[a].categories[f].code.replace("v"+g+"-",""),value:m[a].categories[f].name,selected:-1!=b.selectorVal.indexOf(m[a].categories[f].code.replace("v"+g+"-","")),sequence:m[a].categories[f].sequence}),
"vc-capacity"==g&&(b.showIndividualCapacityFilter?b.filterLabels.push({filterType:g,filterHeading:h,key:m[a].categories[f].code,id:m[a].categories[f].code.replace("v"+g+"-",""),value:m[a].categories[f].name,selected:-1!=b.selectorVal.indexOf(m[a].categories[f].code.replace("v"+g+"-","")),sequence:m[a].categories[f].sequence}):(d=b.getCapacityRange(m[a].categories[f].name),productfilter_commonLogger("In getFacets function - index : "+d),null!=d&&(k=l("filter")(b.filterLabels,{value:b.capacityFilterRange.capacity[d].label}),
0==k.length&&b.filterLabels.push({filterType:g,filterHeading:h,key:b.capacityFilterRange.capacity[d].value,id:b.capacityFilterRange.capacity[d].value,value:b.capacityFilterRange.capacity[d].label,selected:-1!=b.selectorVal.indexOf(b.capacityFilterRange.capacity[d].value),sequence:m[a].categories[f].sequence})))),productfilter_commonLogger(g+" filter - code: "+m[a].categories[f].code+" value: "+m[a].categories[f].name))}}}else productfilter_commonLogger("product categories not found for: "+m[a].code)}a=
b.filterOptions;productfilter_commonLogger("In getFacets function - filterOptions : "+a);b.filterLabels.sort(function(a,b){return a.sequence-b.sequence});c=a.split(",");b.facetLabels=[];for(a=0;a<c.length;a++)c[a]==b.categoryPrefix||-1<p.indexOf(c[a])?(k=l("filter")(b.filterLabels,{filterType:c[a]}),k.length&&b.facetLabels.push({key:c[a],value:c[a],filterCount:k.length,filter:k})):(k=l("filter")(n,{code:c[a]}),d=l("filter")(b.filterLabels,{filterType:c[a]}),k.length&&b.facetLabels.push({key:k[0].code,
value:k[0].name,filterCount:d.length,filter:d}));productfilter_commonLogger(b.facetLabels);b.productJSON=m;b.dataLoaded=!0;productfilter_commonLogger("In getFacets function - product json length : "+b.productJSON.length)};b.getCapacityRange=function(a){productfilter_commonLogger("In getCapacityRange function - productCapacity : "+a);if(b.capacityFilterRange.capacity){for(var c=!1,d,e,f,g=a.split(" ")[0],h=a.split(" ")[1],k=b.capacityFilterRange.capacity.length-1;0<=k;k--)if(d=b.capacityFilterRange.capacity[k].value.split("-")[0],
f=d.split("_")[0].startsWith("\x3e")||d.split("_")[0].startsWith("\x3c")?d.split("_")[0].substring(1):d.split("_")[0],a=d.split("_")[1],d=d.split("_")[0].startsWith("\x3c")?parseInt(g)<=parseInt(f):parseInt(g)>=parseInt(f),productfilter_commonLogger("In getCapacityRange function - val : "+d),h==a&&d){c=!0;e=k;break}if(c)return e}return null};b.$watch("capacityFilterRange",function(){var a;if(a=void 0!=b.capacityFilterRange)a=b.capacityFilterRange,a=!(void 0!==a&&null!==a&&a.constructor==Object);a&&
(b.capacityFilterRange=JSON.parse(b.capacityFilterRange))});b.resetProductfilter=function(){angular.forEach(b.filterLabels,function(a){a.selected&&(a.selected=!1)});b.step=0;h=[];b.getFilteredProducts()};b.nextStep=function(){productfilter_commonLogger("in nextStep..");angular.forEach(b.filterLabels,function(a){a.selected&&(a.selected=!1)});productfilter_commonLogger("selectedValues: ",h);angular.forEach(b.filterLabels,function(a){angular.forEach(h,function(b){var c=b.key;a.id==b.id&&a.key==c&&(a.selected=
!0)})});b.getFilteredProducts();productfilter_commonLogger("facetLabels: ",b.facetLabels);b.facetLabels[b.step+1]&&0==b.facetLabels[b.step+1].filterCount?(productfilter_commonLogger("next step skipped.."),b.step+=2):b.step+=1;if(b.facetLabels[b.step]&&1==b.facetLabels[b.step].filterCount){productfilter_commonLogger("next step has only 1 option so selecting it by default..");var a=b.facetLabels[b.step].filter[0];b.select[b.step]=a;a.step=b.step;a.selected=!0;h.push(a);productfilter_commonLogger("updated selectedValues: ",
h)}if(b.facetLabels.length==b.step)for(a=0;a<b.productJSON.length;a++)b.getProductDetail(b.productJSON[a])};b.previousStep=function(){productfilter_commonLogger("in previousStep..");productfilter_commonLogger("facetLabels: ",b.facetLabels);var a=1;b.facetLabels[b.step-1]&&0==b.facetLabels[b.step-1].filterCount&&(productfilter_commonLogger("previous step skipped.."),a=2);b.step-=a;productfilter_commonLogger("selectedValues: ",h);b.step+a==h[h.length-1].step&&(h.pop(),productfilter_commonLogger("removed current step selection.. updated selectedValues: ",
h));a=h[h.length-1].id;var c=h[h.length-1].key;h.pop();productfilter_commonLogger("removed previous step selection.. updated selectedValues: ",h);angular.forEach(b.filterLabels,function(a){a.selected&&(a.selected=!1)});angular.forEach(b.filterLabels,function(a){angular.forEach(h,function(b){var c=b.key;a.id==b.id&&a.key==c&&(a.selected=!0)})});b.getFilteredProducts();productfilter_commonLogger("facetLabels after getting filtered products: ",b.facetLabels);for(var d=0;d<b.facetLabels.length;d++)for(var e=
0;e<b.facetLabels[d].filter.length;e++)if(b.facetLabels[d].filter[e].id==a&&b.facetLabels[d].filter[e].key==c){productfilter_commonLogger("selecting by default the option that was selected for previous step..",b.facetLabels[d].filter[e]);var f=b.facetLabels[d].filter[e];b.select[b.step]=f;f.step=b.step;f.selected=!0;h.push(f);productfilter_commonLogger("updated selectedValues: ",h)}};b.getSelectedFilter=function(a){productfilter_commonLogger("in getSelectedFilter..");a&&(productfilter_commonLogger("selectedValues: ",
h),h[h.length-1]&&h[h.length-1].step==b.step&&(h.pop(),productfilter_commonLogger("last selected option removed.. updated selectedValues: ",h)),a.step=b.step,a.selected=!0,h.push(a),productfilter_commonLogger("added selected filter.. updated selectedValues: ",h),angular.forEach(b.filterLabels,function(a){angular.forEach(h,function(b){var c=b.key;a.id==b.id&&a.key==c&&(a.selected=!0)})}))};b.getFilteredProducts=function(){var a=[];angular.forEach(b.filterLabels,function(b){if(b.selected){for(var c=
!1,d=0;d<a.length;d++)a[d].key==b.filterType&&(a[d].value=a[d].value+","+("vc-capacity"!=b.filterType?b.value:b.key),productfilter_commonLogger("In getFilteredProducts function - selectedFacets info - id : "+b.id+" key "+b.key+" value "+b.value),c=!0);0!=a.length&&c||(productfilter_commonLogger("In getFilteredProducts function - selectedFacets info - id : "+b.id+" key "+b.key+" value "+b.value),a.push({key:b.filterType,value:"vc-capacity"!=b.filterType?b.value:b.key}))}});var c=q.products,d=[];productfilter_commonLogger("In getFilteredProducts function - selectedFacetsArray length "+
a.length,a);for(var e=0;e<c.length;e++){for(var f=!0,h=0;h<a.length;h++)if(void 0!=c[e].categories){f=!1;for(var k=0;k<c[e].categories.length;k++)if("vc-capacity"!=a[h].key&&c[e].categories[k].code.includes(a[h].key)){for(var m=a[h].value.split(","),l=0;l<m.length;l++)if(m[l]==c[e].categories[k].name){f=!0;break}if(f)break}else if("vc-capacity"==a[h].key&&c[e].categories[k].code.includes(a[h].key)){if(b.showIndividualCapacityFilter){m=a[h].value.split(",");for(l=0;l<m.length;l++)if(m[l]==c[e].categories[k].code){f=
!0;break}if(f)break}else for(m=a[h].value.split(","),l=0;l<m.length;l++){var n=c[e].categories[k].name;var z=n.split(" ")[0];n=n.split(" ")[1];var x=m[l].split("-")[0];if(x.split(" ")[0].startsWith("\x3e")||x.split(" ")[0].startsWith("\x3c")){x=x.substring(1);var D=x.split("_")[0];x=x.split("_")[1];z=m[l].split("-")[0].split("_")[0].startsWith("\x3e")?parseInt(z)>parseInt(D):parseInt(z)<parseInt(D)}else{D=x.split("_")[0];x=x.split("_")[1];var K=m[l].split("-")[1].trim();var H=K.split("_")[0];K.split("_");
z=parseInt(z)>=parseInt(D)&&parseInt(z)<=parseInt(H)}if(n==x&&z){f=!0;break}}if(f)break}z=p.split(",");for(n=0;n<z.length;n++)if(D=z[n],a[h].key==D&&void 0!=c[e][D])for(k=0;k<c[e][D].length;k++){m=a[h].value.split(",");for(l=0;l<m.length;l++)if(m[l]==c[e][D][k].name){f=!0;break}if(f)break}if(!f)break}f&&d.push(c[e])}b.productJSON=d;productfilter_commonLogger("In getFilteredProducts function - product json length : "+b.productJSON.length);b.getFacets(b.productJSON)};b.getProductDetail=function(a){productfilter_commonLogger("in getProductDetail...");
var c=f.defer(),d=a.code,g=a.listOfSkuId,h=e.getSessionVariable(d);null==h?e.getBaseProductInfo(d,g).then(function(){h=e.getSessionVariable(d);null!=h?b.productInfo[a.code]=h:productfilter_commonLogger("Product "+d+"not found in session.");c.resolve(a.code)},function(a){productfilter_commonLogger("Product Info not found for: "+d+"response "+a)}):(b.productInfo[a.code]=h,c.resolve(a.code));return c.promise};b.getProductPrice=function(a){a=e.getSessionVariable(a);return null!=a?a:""};b.getDropdownPlaceholder=
function(a){for(var c=0;c<b.filtersJSONObj.length;c++)if(b.filtersJSONObj[c].filterId==a)return b.filtersJSONObj[c].txtFilterPlaceholder};b.rewritePageURL=function(a){if(void 0!=a)return 0<a.trim().length?c.rewritePageURL(a):a};$("#find-your-drive .wd-modal-close").click(function(a){b.resetProductfilter();b.$apply()})}]);function productfilter_commonLogger(a,c){-1<window.location.search.indexOf("debugProductFilter\x3dtrue")&&console.log("Product Filter :"+a,null!=c?c:"")}
$(document).ready(function(){$("div.component-product-bv")&&$("div.component-product-bv").find("div.rating_reviews")&&0==$("div.component-product-bv").find("div.rating_reviews").length&&$("div.component-product-bv").closest("section.component-accordian-text")&&1==$("div.component-product-bv").closest("section.component-accordian-text").length&&($("div.component-product-bv").closest("section.component-accordian-text")[0].outerHTML="")});
var imageMultipleCTAApp=angular.module("ImageMultipleCTAApp",["CommonUtilApp","ngSanitize"]);imageMultipleCTAApp.factory("safeApply",[function(a){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&a.$eval(b):b?a.$apply(b):a.$apply()}}]);imageMultipleCTAApp.controller("ImageMultipleCTAController",["CommonUtilService","$scope","safeApply",function(a,c,b){c.rewritePageURL=function(b){return 0<b.trim().length?a.rewritePageURL(b):b}}]);
function imagemultiplecta_commonLogger(a,c){-1<window.location.search.indexOf("debugImageMultipleCTA\x3dtrue")&&console.log("Image - Multiple CTA :"+a,null!=c?c:"")}
$(window).bind("load",function(){var a=$("#commonUtilLoad").attr("data-isWcmModeDisabled");$("#commerceLoad").length&&a&&"true"==a&&angular.injector(["ng","CommerceApp"]).invoke(["CommerceService","COMMERCE_CONSTANTS",function(a,b){a.getCustomerChannel()==b.B2B?($(".b2b-container").removeClass("hidden"),$(".b2c-container").remove()):$(".b2b-container").remove()}]);document.body.classList.contains("aem-AuthorLayer-Edit")&&($(".b2c-container").removeClass("hidden"),$(".b2b-container").removeClass("hidden"))});
var storeBundledPromotionApp=angular.module("StoreBundledPromotionApp",["CommerceApp","StoreProductCartApp"]);
storeBundledPromotionApp.controller("StoreBundledPromotionController",["$scope","CommerceService","StoreProductCartService",function(a,c,b){a.addToCart=function(a){a=$(a.currentTarget);a=JSON.parse(a.attr("data-request-json"));$(".cartwrapper").removeClass("hidden").addClass("updateCartData addToCartButton");$(".cartwrapper").find(".cartShowInProgress").removeClass("hidden");768>$(window).width()&&$("html, body").animate({scrollTop:0},600);c.addMultipleProductToCart(a).then(function(){}