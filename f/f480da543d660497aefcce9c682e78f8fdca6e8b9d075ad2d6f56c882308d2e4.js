!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return r(t[o][1][e]||e)}),u,u.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){let i=e("@ima/core/dist/ima.client.cjs.js").vendorLinker;i.set("@ima/helpers",e("@ima/helpers")),i.set("classnames",e("classnames")),i.set("react",e("react")),i.set("react-dom",e("react-dom")),i.set("memoize-one",e("memoize-one")),i.set("@cns/component-utils",e("@cns/component-utils")),i.set("@cns/css-class-scrambler",e("@cns/css-class-scrambler")),i.set("@cns/hooks",e("@cns/hooks")),i.set("@cns/number-to-css-class",e("@cns/number-to-css-class")),i.set("@cns/pixel-generator",e("@cns/pixel-generator")),i.set("@cns/plugin-ab-testing",e("@cns/plugin-ab-testing")),i.set("@cns/plugin-adblock-tracker",e("@cns/plugin-adblock-tracker")),i.set("@cns/plugin-advert",e("@cns/plugin-advert")),i.set("@cns/plugin-analytics",e("@cns/plugin-analytics")),i.set("@cns/plugin-article",e("@cns/plugin-article")),i.set("@cns/plugin-article-molecules",e("@cns/plugin-article-molecules")),i.set("@cns/plugin-atoms",e("@cns/plugin-atoms")),i.set("@cns/plugin-author",e("@cns/plugin-author")),i.set("@cns/plugin-breadcrumb-navigation",e("@cns/plugin-breadcrumb-navigation")),i.set("@cns/plugin-component-view",e("@cns/plugin-component-view")),i.set("@cns/plugin-crossdomain-recommendation",e("@cns/plugin-crossdomain-recommendation")),i.set("@cns/plugin-election",e("@cns/plugin-election")),i.set("@cns/plugin-footer",e("@cns/plugin-footer")),i.set("@cns/plugin-headline",e("@cns/plugin-headline")),i.set("@cns/plugin-hit-page-time",e("@cns/plugin-hit-page-time")),i.set("@cns/plugin-infobox",e("@cns/plugin-infobox")),i.set("@cns/plugin-layout",e("@cns/plugin-layout")),i.set("@cns/plugin-lightbox",e("@cns/plugin-lightbox")),i.set("@cns/plugin-media",e("@cns/plugin-media")),i.set("@cns/plugin-meta-header",e("@cns/plugin-meta-header")),i.set("@cns/plugin-override",e("@cns/plugin-override")),i.set("@cns/plugin-player",e("@cns/plugin-player")),i.set("@cns/plugin-redirect",e("@cns/plugin-redirect")),i.set("@cns/plugin-report",e("@cns/plugin-report")),i.set("@cns/plugin-ribbon-merkur",e("@cns/plugin-ribbon-merkur")),i.set("@cns/plugin-section",e("@cns/plugin-section")),i.set("@cns/plugin-seo-footer",e("@cns/plugin-seo-footer")),i.set("@cns/plugin-seo-footer-ui",e("@cns/plugin-seo-footer-ui")),i.set("@cns/plugin-server-date",e("@cns/plugin-server-date")),i.set("@cns/plugin-service",e("@cns/plugin-service")),i.set("@cns/plugin-social",e("@cns/plugin-social")),i.set("@cns/plugin-squircle-mask",e("@cns/plugin-squircle-mask")),i.set("@cns/plugin-static-content",e("@cns/plugin-static-content")),i.set("@cns/plugin-tag",e("@cns/plugin-tag")),i.set("@cns/plugin-timelines",e("@cns/plugin-timelines")),i.set("@cns/plugin-szn-discussion",e("@cns/plugin-szn-discussion")),i.set("@cns/plugin-track-visibility",e("@cns/plugin-track-visibility")),i.set("@cns/plugin-user",e("@cns/plugin-user")),i.set("@cns/rest-api-client",e("@cns/rest-api-client")),i.set("@cns/utils",e("@cns/utils")),i.set("@ima/plugin-analytic",e("@ima/plugin-analytic")),i.set("@ima/plugin-analytic-dot",e("@ima/plugin-analytic-dot")),i.set("@ima/plugin-analytic-gemius",e("@ima/plugin-analytic-gemius")),i.set("@ima/plugin-analytic-google",e("@ima/plugin-analytic-google")),i.set("@ima/plugin-atoms",e("@ima/plugin-atoms")),i.set("@ima/plugin-jobs-offer",e("@ima/plugin-jobs-offer")),i.set("@ima/plugin-less-constants/map",e("@ima/plugin-less-constants/map")),i.set("@ima/plugin-less-constants/media",e("@ima/plugin-less-constants/media")),i.set("@ima/plugin-less-constants/units",e("@ima/plugin-less-constants/units")),i.set("@ima/plugin-less-constants/util",e("@ima/plugin-less-constants/util")),i.set("@ima/plugin-loading-manager",e("@ima/plugin-loading-manager")),i.set("@ima/plugin-local-storage",e("@ima/plugin-local-storage")),i.set("@ima/plugin-logger",e("@ima/plugin-logger")),i.set("@ima/plugin-login",e("@ima/plugin-login")),i.set("@ima/plugin-mishmash-dom",e("@ima/plugin-mishmash-dom")),i.set("@ima/plugin-notification",e("@ima/plugin-notification")),i.set("@ima/plugin-script-loader",e("@ima/plugin-script-loader")),i.set("@ima/plugin-select",e("@ima/plugin-select")),i.set("@ima/plugin-self-xss",e("@ima/plugin-self-xss")),i.set("@ima/plugin-sklik-radar",e("@ima/plugin-sklik-radar")),i.set("@ima/plugin-style-loader",e("@ima/plugin-style-loader")),i.set("@ima/plugin-traffic",e("@ima/plugin-traffic")),i.set("@ima/plugin-useragent",e("@ima/plugin-useragent")),i.set("@seznam/szn-select-react",e("@seznam/szn-select-react")),i.set("infinite-circle",e("infinite-circle")),i.set("prop-types",e("prop-types")),i.set("@ima/core",e("@ima/core/dist/ima.client.cjs.js")),t.exports=i},{"@cns/component-utils":4,"@cns/css-class-scrambler":6,"@cns/hooks":8,"@cns/number-to-css-class":9,"@cns/pixel-generator":10,"@cns/plugin-ab-testing":12,"@cns/plugin-adblock-tracker":14,"@cns/plugin-advert":15,"@cns/plugin-analytics":17,"@cns/plugin-article":19,"@cns/plugin-article-molecules":18,"@cns/plugin-atoms":20,"@cns/plugin-author":22,"@cns/plugin-breadcrumb-navigation":26,"@cns/plugin-component-view":27,"@cns/plugin-crossdomain-recommendation":29,"@cns/plugin-election":31,"@cns/plugin-footer":32,"@cns/plugin-headline":33,"@cns/plugin-hit-page-time":35,"@cns/plugin-infobox":37,"@cns/plugin-layout":39,"@cns/plugin-lightbox":41,"@cns/plugin-media":42,"@cns/plugin-meta-header":43,"@cns/plugin-override":45,"@cns/plugin-player":46,"@cns/plugin-redirect":48,"@cns/plugin-report":50,"@cns/plugin-ribbon-merkur":52,"@cns/plugin-section":53,"@cns/plugin-seo-footer":55,"@cns/plugin-seo-footer-ui":54,"@cns/plugin-server-date":57,"@cns/plugin-service":59,"@cns/plugin-social":61,"@cns/plugin-squircle-mask":63,"@cns/plugin-static-content":64,"@cns/plugin-szn-discussion":66,"@cns/plugin-tag":68,"@cns/plugin-timelines":69,"@cns/plugin-track-visibility":73,"@cns/plugin-user":75,"@cns/rest-api-client":76,"@cns/utils":78,"@ima/core/dist/ima.client.cjs.js":82,"@ima/helpers":83,"@ima/plugin-analytic":92,"@ima/plugin-analytic-dot":85,"@ima/plugin-analytic-gemius":87,"@ima/plugin-analytic-google":89,"@ima/plugin-atoms":98,"@ima/plugin-jobs-offer":100,"@ima/plugin-less-constants/map":101,"@ima/plugin-less-constants/media":102,"@ima/plugin-less-constants/units":103,"@ima/plugin-less-constants/util":104,"@ima/plugin-loading-manager":106,"@ima/plugin-local-storage":108,"@ima/plugin-logger":110,"@ima/plugin-login":112,"@ima/plugin-mishmash-dom":116,"@ima/plugin-notification":118,"@ima/plugin-script-loader":135,"@ima/plugin-select":139,"@ima/plugin-self-xss":141,"@ima/plugin-sklik-radar":147,"@ima/plugin-style-loader":149,"@ima/plugin-traffic":153,"@ima/plugin-useragent":155,"@seznam/szn-select-react":162,classnames:164,"infinite-circle":170,"memoize-one":224,"prop-types":232,react:242,"react-dom":236}],2:[function(e,t,n){"use strict";function i(){var e=["574344QDlKEa","1878YonUhL","1CMsLFT","459rSZiuy","310ESAzYY","3095pSdvUQ","139770uRMwzD","12830643jYdCBN","66296yxpaaS","993443qMijeb","618346RSgFWe"];return(i=function(){return e})()}!function(e,t){for(var n=s,i=e();;)try{if(983467==-parseInt(n(171))/1*(parseInt(n(168))/2)+-parseInt(n(175))/3+parseInt(n(169))/4+-parseInt(n(174))/5*(parseInt(n(170))/6)+-parseInt(n(176))/7+-parseInt(n(166))/8*(-parseInt(n(172))/9)+-parseInt(n(173))/10*(-parseInt(n(167))/11))break;i.push(i.shift())}catch(e){i.push(i.shift())}}(i);var r={};function s(e,t){var n=i();return(s=function(e,t){return n[e-=166]})(e,t)}r.div="width: 1px !important;\n\t\t\theight: 1px !important;\n\t\t\tposition: absolute !important;\n\t\t\tright: 1px !important;\n\t\t\ttop: 1px !important",r.img="width: 1px !important;\n\t\t\theight: 1px !important;\n\t\t\tposition: absolute !important;\n\t\t\tright: 1px !important;\n\t\t\tbottom: 1px !important;\n\t\t\tvisibility: hidden;";var o=r,a=function(e){switch(e.type){case"XMLHttpRequest":return t=e,(n=new XMLHttpRequest).open("GET",t._0x2b49da.url||"/"),t._0x2b49da.contentType&&n.setRequestHeader("Content-Type",t._0x2b49da.contentType),n;case"HTMLElement":return function(e){var t=document.createElement(e.name);for(var n in e._0x2b49da)t[n]=e._0x2b49da[n];var i=e.name in o?o[e.name]:"";return t.style.cssText+=i,t}(e);default:return null}var t,n},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return i.type=e,i.name=t,i._0x2b49da=n,i._0x523b8a=!1,i.loaded=!1,i.target=a(i),i},c=function(e){e._0x112e23.forEach((function(e){"HTMLElement"===e.type&&document.body.contains(e.target)&&e.target.parentNode.removeChild(e.target)})),e._0x112e23=[]},u=function(e){e._0x112e23.forEach((function(e){switch(e.type){case"XMLHttpRequest":e.target.onerror=function(t){""===t.target.statusText&&0===t.target.status&&4===t.target.readyState&&(e._0x523b8a=!0)},e.target.send();break;case"HTMLElement":if(document.body.appendChild(e.target),"iframe"===e.name){var t="fisher";e.target.onload=function(){window.addEventListener("message",(function(n){n.data===t&&(e.loaded=!0)})),e.target.contentWindow.postMessage(t,"*")}}}}))},d=function(e,t){return e._0x112e23.forEach((function(e){"HTMLElement"===e.type&&("iframe"!==e.name&&0===window.getComputedStyle(e.target).display.indexOf("none")&&(e._0x523b8a=!0),t&&"iframe"===e.name&&!e.loaded&&(e._0x523b8a=!0))})),e._0x112e23.some((function(e){return e._0x523b8a}))},p=new RegExp("google|seznambot|bingbot|yandexbot|Naverbot|msnbot|ia_archiver|baiduspider|applebot|slurp|duckduckbot|BUbiNG|BingPreview|seoscanners|VoilaBot|adscanner|Qwantify|spider|crawler|slurp|externalhit|ttd-content|SznProhlizec|MSIE|Trident|https?:[/][/]","i"),m=function(e){return new Date(Date.now()+36e5*e).toGMTString()},h=function(e,t){var n="https:"===location.protocol?" SameSite=None; Secure;":"";document.cookie="".concat(e,"=").concat(t,"; expires=").concat(m(720),"; path=/; ")+n},g=function(e){document.cookie="".concat(e,"=; expires=").concat(m(-24),"; path=/")},f=function(e){document.cookie.indexOf(e)>=0&&window.addEventListener("beforeunload",(function(){g(e)}))},_=function(){return document.cookie.indexOf("__nttd=")>=0},y=function(){return!navigator||!navigator.userAgent||-1!==navigator.userAgent.search(p)},b=function(e){var t,n={};return n._0x3f8eac=e,n._0x39cefa={_0x112e23:[l("HTMLElement","div",{className:"adform-adbox\n\t\t\t\t\tadvert-square\n\t\t\t\t\tarticle-adtip-box\n\t\t\t\t\tbazar-box\n\t\t\t\t\tbx-leaderboard\n\t\t\t\t\tetarget\n\t\t\t\t\thp-advert\n\t\t\t\t\tic0.vendor-list\n\t\t\t\t\tillustrated.illV.article.columns.col2\n\t\t\t\t\tjobscz\n\t\t\t\t\tpopisreklama\n\t\t\t\t\tpromo-in-article\n\t\t\t\t\treklama-3\n\t\t\t\t\treklama-abmix\n\t\t\t\t\treklama-bottom\n\t\t\t\t\treklama-box\n\t\t\t\t\treklama-left\n\t\t\t\t\treklama-lista\n\t\t\t\t\treklama-megaboard\n\t\t\t\t\treklama-right\n\t\t\t\t\treklama-top\n\t\t\t\t\treklamaBottom\n\t\t\t\t\treklamaHorniLista\n\t\t\t\t\treklamaOdkazyVeVetachDole\n\t\t\t\t\treklama_ahead\n\t\t\t\t\treklama_box_standard\n\t\t\t\t\treklama_square\n\t\t\t\t\treklama_title_flat\n\t\t\t\t\treklamni-up-1\n\t\t\t\t\treklamni-up-2\n\t\t\t\t\tsklik\n\t\t\t\t\tsklik-block\n\t\t\t\t\tsklik-box\n\t\t\t\t\tsklik_left\n\t\t\t\t\tsklik_right\n\t\t\t\t\tspored-links\n\t\t\t\t\ttopreklama\n\t\t\t\t\tvelke_zlavy\n\t\t\t\t\tvreklama\n\t\t\t\t\tzlavy-box\n\t\t\t\t\tpub_300x250\n\t\t\t\t\tpub_300x250m\n\t\t\t\t\tpub_728x90\n\t\t\t\t\tsafeframe\n\t\t\t\t\ttext-ad\n\t\t\t\t\ttextAd\n\t\t\t\t\ttext_ad\n\t\t\t\t\ttext_ads\n\t\t\t\t\ttext-ads\n\t\t\t\t\ttext-ad-links"}),l("HTMLElement","img",{src:"/ad_ads_advert_advertisement_adform_pub_300x250.png"}),l("XMLHttpRequest","img",{contentType:"image/png",url:"/ad_ads_advert_advertisement_adform_pub_300x250.png"})],id:"".concat(Date.now()).concat(Math.floor((1+Math.random())*Date.now()))},t=e,window.postMessage("ab-ck:"+t,"*"),n};"undefined"!=typeof window&&window.addEventListener("message",(function e(t){var n="b737c40";if("string"==typeof t.data&&0===t.data.indexOf(n)){var i=t.data.substr(n.length)||"fishingFloat";(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(_())!t(!1)&&f(e._0x3f8eac);else if(y())!t(!1)&&g(e._0x3f8eac);else{u(e._0x39cefa);var n=25,i=setInterval((function(){if(n--,d(e._0x39cefa,0===n))return!t(!0)&&h(e._0x3f8eac,"1"),c(e._0x39cefa),void clearInterval(i);0===n&&(!t(!1)&&f(e._0x3f8eac),c(e._0x39cefa),clearInterval(i))}),100)}})(b(i)),window.removeEventListener("message",e)}}))},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("intersect-objects"),r=e("lodash/get"),s=e("react"),o=e("@ima/core"),a=e("shallowequal"),l=e("prop-types"),c=e("@ima/plugin-select"),u=e("infinite-circle"),d=e("reselect");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(i),h=p(r),g=p(s),f=p(a),_=p(l),y=p(c);function b(e,t={},n={}){return t=Object.entries(t).reduce(((t,[n,i])=>(t[n]=(...t)=>i(e.context,...t),t)),{}),n=Object.entries(n).reduce(((t,[n,i])=>(t[n]=(...t)=>i(e,...t),t)),{}),{componentInstance:e,logics:t,overrides:n}}const v=Object.freeze({selector:Symbol("selector")}),C=Object.freeze({componentEntry:Symbol("componentEntry")});class w extends o.AbstractComponent{static get contextType(){return o.PageContext}constructor(e,t){super(e,t);const n=this.constructor.logicFactory?this.constructor.logicFactory():{},i=this.props.$logicFactory?this.props.$logicFactory():{},r=this.constructor.overrideFactory?this.constructor.overrideFactory():{},s=this.props.$overrideFactory?this.props.$overrideFactory():{};this[C.componentEntry]=b(this,Object.assign({},n,i),Object.assign({},r,s)),this[v.selector]=(this.props.$selector||this.constructor.defaultSelector||function(){})(this[C.componentEntry])}render(){return this.renderInnerComponent()}renderInnerComponent(e,t){return e?g.default.createElement(e,t):null}getComponentInstance(){return this[C.componentEntry].componentInstance}getLogics(){return this[C.componentEntry].logics}getOverrides(){return this[C.componentEntry].overrides}getProps(){return this[v.selector]()}}class E extends o.AbstractPureComponent{static get contextType(){return o.PageContext}constructor(e,t){super(e,t);const n=this.constructor.logicFactory?this.constructor.logicFactory():{},i=this.props.$logicFactory?this.props.$logicFactory():{},r=this.constructor.overrideFactory?this.constructor.overrideFactory():{},s=this.props.$overrideFactory?this.props.$overrideFactory():{};this[C.componentEntry]=b(this,Object.assign({},n,i),Object.assign({},r,s)),this[v.selector]=(this.props.$selector||this.constructor.defaultSelector||function(){})(this[C.componentEntry])}render(){return this.renderInnerComponent()}renderInnerComponent(e,t){return e?g.default.createElement(e,t):null}getComponentInstance(){return this[C.componentEntry].componentInstance}getLogics(){return this[C.componentEntry].logics}getOverrides(){return this[C.componentEntry].overrides}getProps(){return this[v.selector]()}}function S(e,t){const n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every((e=>i.indexOf(e)>=0))}var T=_.default.oneOfType([_.default.func,_.default.object]);const P=(e,t)=>{if("function"==typeof e.createHOCSelect)return e.createHOCSelect(t);if(!t)return e;const n=y.default(...t)(e);return c.hoistNonReactStatic(n,e),n};function x(e,t,n){const i=d.createSelector(t,n);return()=>i(Object.assign({},e))}const I=[({componentInstance:e})=>e.props,({componentInstance:e})=>e.context];Object.defineProperty(n,"intersectObjects",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"get",{enumerable:!0,get:function(){return h.default}}),n.AbstractComponent=w,n.AbstractPureComponent=E,n.ComponentPropType=T,n.Public=C,n.ResizeCircle=class{static get $dependencies(){return["$Window","$UIComponentHelper"]}constructor(e,t){this._window=e,this._uiComponentHelper=t,this._resizeCircle=this._createResizeCircle()}init(){this._uiComponentHelper.infinite.add(this._resizeCircle)}register(e,t,n){return this._resizeCircle.register({read:e,write:t,meta:{interval:n}})}unregister(e){this._resizeCircle.unregister(e)}_createResizeCircle(){return new u.Circle({listen:e=>this._listenOnCircleEvents(e),unlisten:e=>this._unlistenOnCircleEvents(e)})}_listenOnCircleEvents(e){this._window.bindEventListener(this._window.getWindow(),"resize",e)}_unlistenOnCircleEvents(e){this._window.unbindEventListener(this._window.getWindow(),"resize",e)}},n.compose=b,n.customSelector=x,n.defaultSelector=function(e,t){return x(e,I,t)},n.deleteKeys=function(e,t){let n=Object.assign({},e);return t.forEach((e=>{delete n[e]})),n},n.fillObject=function(e,t){return e.reduce(((e,n)=>(e[n]=t,e)),{})},n.overrideComponent=function(e,t,n){return class extends e{static defaultSelector(...n){const i=t.defaultSelector,r=e.defaultSelector;return i?i(...n):r?r(...n):void 0}static logicFactory(){const n=t.logicFactory?t.logicFactory():{},i=e.logicFactory?e.logicFactory():{};return Object.assign({},i,n)}static overrideFactory(){const n=t.overrideFactory?t.overrideFactory():{},i=e.overrideFactory?e.overrideFactory():{};return Object.assign({},i,n)}render(){if(!n)return super.render();let e=this.getProps();return super.renderInnerComponent(n,e)}}},n.registerComponentHelper=e=>{const t=({originalNs:t,component:n,selectors:i,transformComponent:r=P,transformNs:s=(e=>e)})=>{t&&n&&"function"==typeof r&&"function"==typeof s?e.set(s(t),r(n,i)):console.error("Wrong registerComponent arguments for ",t)},n=e=>e.replace(/plugin\.[^.]*/,"app");return{registerComponent:t,registerPluginComponent:(i,r,s,o=n)=>t({originalNs:i,component:e.get(i),selectors:r,transformComponent:s,transformNs:o}),overridePluginComponent:(n,i,r)=>t({originalNs:n,component:e.get(n),selectors:i,transformComponent:r}),registerAppComponent:(e,n,i)=>t({originalNs:e,component:n,selectors:i})}},n.shouldComponentUpdate=function(e,t,n){let{props:i,state:r}=e,s=e.constructor.defaultProps||{};delete s.properties,delete s.settings;const o=m.default(s,t),a=m.default(s,i),l=!f.default(n||{},r||{}),c=!f.default(i.properties||{},t.properties||{},((e,t)=>function(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let i=0;i<n.length;i++){if(e[n[i]]instanceof Date&&t[n[i]]instanceof Date){if(e[n[i]].getTime()===t[n[i]].getTime())continue;return!1}if(e[n[i]]&&t[n[i]]&&"object"==typeof e[n[i]]&&"object"==typeof t[n[i]]&&!S(e[n[i]],t[n[i]]))return!1;if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Object.is(e[n[i]],t[n[i]]))return!1}return!0}(e,t)),this),u=!f.default(i.settings||{},t.settings||{}),d=!f.default(o,a);return l||c||u||d}},{"@ima/core":81,"@ima/plugin-select":139,"infinite-circle":170,"intersect-objects":171,"lodash/get":216,"prop-types":232,react:242,reselect:243,shallowequal:250}],4:[function(e,t,n){t.exports=e("./dist/main.js")},{"./dist/main.js":3}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=e("classnames"),s=e("@cns/number-to-css-class");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(i),l=o(r),c=o(s);n.default=function(e){const t=e&&new Map,n=e&&new Map;if(e){const[i,r]=e;for(let e=0;e<i.length;e++)t.set(i[e],c.default(e));for(let e=0;e<r.length;e++)n.set(r[e],c.default(e))}return(...i)=>{for(let e=0;e<i.length;e++)i[e]instanceof a.default.Component&&(i[e]=(i[e].props||{}).className);const r=l.default(...i);return e?{className:r.split(/\s+/).map((e=>{const i=e.split("-"),r=i[0],s=i.slice(1).join("-");return t.has(r)&&n.has(s)?`${t.get(r)}_${n.get(s)}`:e})).join(" "),"data-class":r}:{className:r}}}},{"@cns/number-to-css-class":9,classnames:164,react:242}],6:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{"./dist/main.js":5,dup:4}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/react-hooks"),r=e("react");Object.defineProperty(n,"useComponentUtils",{enumerable:!0,get:function(){return i.useComponentUtils}}),Object.defineProperty(n,"useCssClasses",{enumerable:!0,get:function(){return i.useCssClasses}}),Object.defineProperty(n,"useDispatcher",{enumerable:!0,get:function(){return i.useDispatcher}}),Object.defineProperty(n,"useLink",{enumerable:!0,get:function(){return i.useLink}}),Object.defineProperty(n,"useLocalize",{enumerable:!0,get:function(){return i.useLocalize}}),Object.defineProperty(n,"useOnce",{enumerable:!0,get:function(){return i.useOnce}}),Object.defineProperty(n,"usePageContext",{enumerable:!0,get:function(){return i.usePageContext}}),Object.defineProperty(n,"useSSR",{enumerable:!0,get:function(){return i.useSSR}}),Object.defineProperty(n,"useSettings",{enumerable:!0,get:function(){return i.useSettings}}),Object.defineProperty(n,"useWindowEvent",{enumerable:!0,get:function(){return i.useWindowEvent}}),n.useComponent=function(e=null){const t=i.useComponent(),{urlParams:n,currentABTest:r}=i.usePageContext();return i.useOnce((()=>{e&&t.utils.CssRenderingHelper.register(e)})),{urlParams:n,currentABTest:r,...t}},n.useDefaultVisibility=function(e,t,n={}){const s=r.useRef(null),{$UIComponentHelper:o}=i.useComponentUtils();r.useEffect((()=>(s.current=o.visibility.register(o.getVisibilityReader(e.current,n),o.wrapVisibilityWriter(t)),()=>{o.visibility.unregister(s.current),s.current=null})),[e,n,t,o,s])},n.useRegisterComponent=function(e){const{CssRenderingHelper:t}=i.useComponentUtils();i.useOnce((()=>{t.register(e)}))},n.useVisibility=function(e,t){const n=r.useRef(null),{$UIComponentHelper:s}=i.useComponentUtils();r.useEffect((()=>(n.current=s.visibility.register(e,s.wrapVisibilityWriter(t)),()=>{s.visibility.unregister(n.current),n.current=null})),[e,t,s,n])}},{"@ima/react-hooks":157,react:242}],8:[function(e,t,n){t.exports=e("./dist/main")},{"./dist/main":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-".split(""),r=(i.join("")+"0123456789").split("");n.default=function(e){if(e<i.length)return i[e];e+=r.length-i.length;let t="";for(;e>=i.length;)t=r[e%r.length]+t,e=Math.floor(e/r.length);return t=e?i[e-1]+t:"_"+t,t}},{}],10:[function(e,t,n){"use strict";const i=[66,77,30,0,0,0,0,0,0,0,26,0,0,0,12,0,0,0,1,0,1,0,1,0,24,0,0,0,0,0];Object.freeze(i);const r=i[10];function s(e,t,n){if(!Number.isInteger(e)||e<0||e>255)throw new TypeError(`The red color channel value must be an integer within the [0, 255] range, ${e} has been provided`);if(!Number.isInteger(t)||t<0||t>255)throw new TypeError(`The green color channel value must be an integer within the [0, 255] range, ${t} has been provided`);if(!Number.isInteger(n)||n<0||n>255)throw new TypeError(`The blue color channel value must be an integer within the [0, 255] range, ${n} has been provided`);const s=i.slice();return s[r+0]=n,s[r+1]=t,s[r+2]=e,Object.freeze(s),s}function o(e,t,n){return"undefined"!=typeof Buffer?a(e,t,n).toString("base64"):btoa(String.fromCharCode.apply(null,s(e,t,n)))}function a(e,t,n){if("undefined"==typeof Buffer)throw new Error("An image buffer cannot be created at the client-side");return Buffer.from(s(e,t,n))}t.exports.generateImage=s,t.exports.generateImageBase64String=o,t.exports.generateImageDataUrl=function(e,t,n){return"data:image/bmp;base64,"+o(e,t,n)},t.exports.generateImageBuffer=a},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/rest-api-client"),s=e("@ima/plugin-traffic");class o extends r.AbstractEntity{static get dataFieldMapping(){return{id:"_id",dateFrom:r.dateMapper,dateTo:r.dateMapper,possibleVariants:"variantsProgress"}}static get embeds(){return[{field:"layoutStorage",resource:i.ns.get("plugin.layout.LayoutEntity")}]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"abtest"}constructor(e){super(e)}}class a extends r.List{constructor(...e){super(...e)}getRandomTest(e=this._items){return e.length>0?e[Math.floor(Math.random()*e.length)]:null}getTestById(e){return this._items.find((t=>t.id===e))}getTestByName(e){let t=this._items.filter((t=>t.name===e));return this.getRandomTest(t)}pickUpVariant(e){let t=e.possibleVariants.filter((e=>e.percent<100));return t.length>0?t[Math.floor(Math.random()*t.length)].name:null}}class l extends r.AbstractService{static get entityClass(){return i.ns.get("plugin.abTesting.ABTestEntity")}authenticatePickedABTest(e,t){return this.create({},{id:e.id,variant:t},null,null).catch((()=>{}))}}class c{get dateFrom(){return this.abTestEntity.dateFrom}get dateTo(){return this.abTestEntity.dateTo}get description(){return this.abTestEntity.description}get fromLayouts(){return this._variantData.fromLayouts}get id(){return this.abTestEntity.id}get layoutReplacement(){return this._layoutReplacement||this._initLayoutReplacement(),this._layoutReplacement}get name(){return this.abTestEntity.name}get serviceSkin(){return this._variantData.skin}get toLayouts(){return this._variantData.toLayouts}get variant(){return this._variant.toLowerCase()}get _variantData(){return this.abTestEntity.variantsDict[this._variant]||{}}constructor(e,t){this.abTestEntity=e,this._variant=t,this._layoutReplacement=null}createDotAbtestParam(){return[this.name||"",this.variant||""].join("/")}getValueReplacement(e,t,n){return-1!==t.toLowerCase().indexOf("layout")?this.layoutReplacement[n]:e&&e instanceof i.ns.get("plugin.service.ServiceEntity")&&"skin"===t?this.serviceSkin:void 0}getVariantCategory(){return this.variant&&this.variant.charAt(0)?this.variant.charAt(0).toLowerCase():null}isActive(){const e=(new Date).getTime();return this.dateFrom.getTime()<=e&&this.dateTo.getTime()>=e}isValid(){return this.name&&this.variant&&this.dateFrom&&this.dateTo}_initLayoutReplacement(){if(this._layoutReplacement={},this._variantData.fromLayouts&&this._variantData.fromLayouts.length&&this._variantData.toLayouts&&this._variantData.fromLayouts.length===this._variantData.toLayouts.length)for(let e=0;e<this._variantData.fromLayouts.length;e++)this._layoutReplacement[this._variantData.fromLayouts[e]]=this._variantData.toLayouts[e]}}class u{static get $dependencies(){return[]}constructor(){this.currentABTest=null}clearCurrentABTest(){this.currentABTest=null}getCurrentABTest(){return this.currentABTest?this.currentABTest:null}setCurrentABTest(e){this.currentABTest=e}}class d extends i.AbstractExtension{static get $dependencies(){return[l,u,"DotAnalytic",i.CookieStorage,i.MapStorage,s.TrafficService,"$Settings"]}constructor(e,t,n,i,r,s,o){super(),this._abTestService=e,this._pageABTestRegistry=t,this._dotAnalytic=n,this._cookieStorage=i,this._mapStorage=r,this._trafficService=s,this._settings=o}init(){if(!this._settings.features.allowedABTests||this._trafficService.isDowngraded())return;let e=null;e=this.params.ABTest&&this.params.ABTestVariant?this._getABTestFromUrlParams():this._getABTestFromCookie(),e.then((e=>{if(e&&e.isValid()&&e.isActive()){this._setABTestToCookie(e.id,e.name,e.variant,e.dateTo);let t=e.createDotAbtestParam();return this._dotAnalytic.setAbtest(t),this._mapStorage.set("currentABTest",{name:e.name,variant:e.variant}),e}return null})),this._pageABTestRegistry.setCurrentABTest(e)}load(){return this._settings.features.allowedABTests&&!this._trafficService.isDowngraded()?{currentABTest:this._pageABTestRegistry.getCurrentABTest()}:{currentABTest:null}}activate(){const{currentABTest:e}=this.getState();!this._settings.features.allowedABTests||this._trafficService.isDowngraded()||e||this._dealVariant()}_clearABTestCookie(){this._cookieStorage.set(this._getCookieName())}_createList(e){return new a(...e)}_dealVariant(){return this._abTestService.list({}).then((e=>this._createList(e))).then((e=>this._pickUpNewABTest(e)))}_getABTestFromCookie(){const e=this._getParsedABTestFromCookie();return e?this._abTestService.get(e.id).then((t=>new c(t,e.variant)),(e=>(e&&404===e.getHttpStatus()&&this._clearABTestCookie(),null))):Promise.resolve(null)}_getABTestFromUrlParams(){const{ABTest:e,ABTestVariant:t}=this.params;return this._abTestService.get(e).then((e=>new c(e,t)),(()=>this._getABTestFromCookie()))}_getCookieName(){const{serviceSlug:e}=this._settings.plugin.cns.plugin.service;return`cnsABTests_${e}`}_getParsedABTestFromCookie(){const e=this._cookieStorage.get(this._getCookieName());if(e&&"string"==typeof e){const[t,n,i]=e.split("_");return{id:t,name:n,variant:i}}return null}_pickUpNewABTest(e){const t=e.getRandomTest();if(t){const n=e.pickUpVariant(t);n&&this._abTestService.authenticatePickedABTest(t,n).then((()=>this._setABTestToCookie(t.id,t.name,n,t.dateTo)))}}_setABTestToCookie(e,t,n,i){this._cookieStorage.set(this._getCookieName(),`${e}_${t}_${n}`,{expires:i})}}n.$registerImaPlugin=e=>{e.namespace("plugin.abTesting.ABTestEntity"),e.plugin.abTesting.ABTestEntity=o},n.ABTestEntity=o,n.ABTestExtension=d,n.ABTestList=a,n.ABTestService=l,n.ABTestStorage=c,n.PageABTestRegistry=u,n.applyAbTestModification=function(e,t,n){return t&&n&&n.length?e.then((e=>e?function(e,t,n){return t.then((t=>{if(!t)return e;let i={};for(let r of n){let n=e[r],s=t.getValueReplacement(e,r,n);s&&(i[r]=s)}return e&&e.cloneAndPatch?e.cloneAndPatch(i):null}))}(e,t,n):null)):e},n.initServices=function(e,t){t.get(i.ComponentUtils).register({PageABTestRegistry:u})}},{"@cns/rest-api-client":76,"@ima/core":81,"@ima/plugin-traffic":153}],12:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":11,dup:8}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/plugin-report");var s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(e("react"));class o extends i.AbstractExtension{static get $dependencies(){return[r.ReportService]}constructor(e){super(),this._reportService=e}load(){return{}}onReportAdBlock(e){return this._reportService.report("adblock",e)}}const a=Object.freeze({REPORT_ADBLOCK:"reportAdBlock"});class l extends i.AbstractComponent{static get contextType(){return i.PageContext}constructor(e,t){super(e,t)}componentDidMount(){const{$Dispatcher:e}=this.utils;e.listen(i.RouterEvents.AFTER_HANDLE_ROUTE,this.checkTestDiv,this)}componentWillUnmount(){const{$Dispatcher:e}=this.utils;e.unlisten(i.RouterEvents.AFTER_HANDLE_ROUTE,this.checkTestDiv,this)}render(){return this.utils.$UIComponentHelper.isAmp()?null:s.default.createElement("div",{className:"ad-content",style:{display:"block",position:"absolute",top:-1e4,left:-1e4,width:1,height:1},ref:e=>{this.testDiv=e}})}checkTestDiv(){const{UserAgent:e,DeviceHelper:t,$UIComponentHelper:n}=this.utils;if(n.isAmp())return;const i=e.getVersion().split("."),r={browser:`${e.getName()}/${e.getName()} ${i[0]}`,mobile:t.isMobile(),tablet:t.isTablet(),adblock:!this.testDiv.clientWidth};this.fire(a.REPORT_ADBLOCK,r)}}n.$registerImaPlugin=e=>{e.namespace("plugin.adBlockTracker")},n.AdBlockTracker=l,n.AdBlockTrackerEvents=a,n.AdBlockTrackerExtension=o},{"@cns/plugin-report":50,"@ima/core":81,react:242}],14:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{"./dist/main.js":13,dup:4}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-less-constants/media"),r=e("@ima/plugin-less-constants/units"),s=e("@ima/plugin-logger"),o=e("@cns/plugin-section"),a=e("@cns/utils"),l=e("@cns/plugin-atoms"),c=e("react"),u=(e("prop-types"),e("@ima/core")),d=e("@cns/component-utils"),p=e("@cns/plugin-adblock-tracker"),m=e("hoist-non-react-statics"),h=e("@ima/plugin-analytic"),g=e("@ima/plugin-script-loader"),f=e("@cns/plugin-ab-testing"),_=e("@ima/plugin-select"),y=e("@ima/plugin-useragent"),b=e("@cns/plugin-report");function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var C=v(c),w=v(m),E=v(_);const S={color:{gray:{f2:r.hex("f2f2f2")}},advert:{homepageNative:{width:111,height:111},skyscraper:{width:r.px(300),height:r.px(600)},skyscraperStatic:{width:r.px(300),height:r.px(250)},sponsor:{width:r.px(300),height:r.px(250)},bottom:{width:r.px(1100),height:r.px(500)},rectangle:{width:r.px(970),height:r.px(310)},native:{width:r.px(610),height:r.px(300)},articleSklik:{width:r.px(111),height:r.px(111)},articleSklikDesktop:{width:r.px(560),height:r.px(315)},mobile:{width:r.px(480),height:r.px(480),minWidth:r.px(300),minHeight:r.px(250),height640:r.px(640)},leaderboardMobile:{width:r.px(320),height:r.px(100)},branding:{width:r.px(2560),height:r.px(1440),outerHeight:r.px(226),sklikWidth:r.px(932),sklikHeight:r.px(182),pageWidth:r.px(1100),pageWidthNarrow:r.px(1060),media:i.minWidthMedia(r.px(1100)),placeholder:{width:r.px(970),height:r.px(210)}},label:r.px(16)},repeatingAdvert:{height:r.px(1500),marginBottom:r.px(32)}},T="ram",P="videonativ",x={COMBINED:[{width:64,height:""},{width:128,height:""},{width:160,height:""},{width:192,height:""},{width:200,height:""},{width:256,height:""},{width:300,height:""},{width:384,height:""},{width:400,height:""},{width:512,height:""},{width:600,height:""},{width:768,height:""},{width:800,height:""},{width:1024,height:""},{width:1200,height:""},{width:1600,height:""},{width:2400,height:""}],DRTG:[{width:28,height:28},{width:38,height:38},{width:48,height:48},{width:70,height:70},{width:90,height:90},{width:100,height:100},{width:120,height:120},{width:134,height:134},{width:152,height:152},{width:200,height:200},{width:350,height:350},{width:440,height:440},{width:600,height:600},{width:1200,height:1200},{width:2048,height:2048}]},I="COMBINED",A="DRTG",k="NATIVE",R={maxAdvertItems:1,minImageWidth:300,maxImageWidth:1/0},M=/.+-a\.sdn\.cz.*/;class O{static get $dependencies(){return["$CookieStorage"]}constructor(e){this._cookieStorage=e}isAdb(){try{return!!this._cookieStorage.get("adb")}catch(e){s.warn("isAdb",e)}return!1}}function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N.apply(this,arguments)}const D=Object.freeze({RESET:"usa.plugin.advert.reset"});function L(e){class t extends d.AbstractComponent{constructor(e,t){super(e,t),this.state={shouldRender:!0}}componentDidMount(){const{$Dispatcher:e}=this.utils;e.listen(D.RESET,this._onReset,this)}componentWillUnmount(){const{$Dispatcher:e}=this.utils;e.unlisten(D.RESET,this._onReset,this)}render(){const{shouldRender:t}=this.state,{forwardedRef:n}=this.props;return t&&C.default.createElement(e,N({ref:n},this.props))}_onReset(){this.setState({shouldRender:!1},(()=>this.setState({shouldRender:!0})))}}w.default(t,e);const n=C.default.forwardRef(((e,n)=>C.default.createElement(t,N({},e,{forwardedRef:n})))),i=e.displayName||e.name||"Component";return n.displayName=`ResetWrapper(${i})`,n}const $=Object.freeze({INITIALIZED:"INITIALIZED",FETCHED:"FETCHED",RENDERED:"RENDERED",MISSED:"MISSED"}),H=Object.freeze({IFRAME:"iframe",IFRAME_URL:"iframe_url",JSON:"json",JSON_URL:"json_url",CODE:"code",ERROR:"error",EMPTY:"empty"}),j=Object.freeze({FETCHED:"cns.plugin.advert.ssp.fetched",REQUESTED:"cns.plugin.advert.ssp.requested",DESTROY:"seznam.im3.spot.destroy",PAGEOFFSET:"seznam.im3.spot.pageoffset"});class U extends d.AbstractComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{onAdvertLoaded:null,onNoAdvertAvailable:null,onAdvertFetched:null,properties:{},settings:{width:0,height:0,minWidth:0,minHeight:0,zoneId:0,advertType:"",collocation:"",contentId:"",advertSection:"",autoSize:!1,noRender:!1}}}get _adaptableContainerWidth(){return this._settings.adaptableHeight&&!this.state.responsive?this.state.width:null}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.advert.component.molecule.advert.Advert"),this._onReportAdBlock=this._onReportAdBlock.bind(this),this._advertContainerRef=C.default.createRef(),this._advert=null,this._settings={},this._advertState=null,this._registeredVisibilityId=null,this._generateAdvertSettings(this.props.settings),this._onNoAdvertAvailableBound=this._onNoAdvertAvailable.bind(this),this.state=this._defaultState()}componentDidMount(){const{$Window:e}=this.utils;this._shouldRender()?(this.listen(e.getWindow(),p.AdBlockTrackerEvents.REPORT_ADBLOCK,this._onReportAdBlock),this._onAdvertRoot()):setTimeout(this._onNoAdvertAvailableBound,0)}componentDidUpdate(){this._onAdvertRoot()}componentWillUnmount(){const{current:e}=this._advertContainerRef,{$Window:t}=this.utils;this._unregisterVisibilityCheck(),this.unlisten(t.getWindow(),p.AdBlockTrackerEvents.REPORT_ADBLOCK,this._onReportAdBlock),this.utils.AdvertHelper.fireCustomEvent(e,j.DESTROY),this._advertState=null}render(){const{noRender:e}=this.props.settings,t=this.utils.$UIComponentHelper.isAmp();return this._advertState===$.MISSED||!this._shouldRender()||t?null:C.default.createElement("div",{className:this.cssClasses({"mol-advert":!0,"js-ad":!0},!0)},C.default.createElement("div",{className:this.cssClasses("mol-advert-container"),"data-e2e-advert":this._advertState,"data-e2e-zoneid":this._settings.zoneId,"data-e2e":"mol-advert",style:{maxWidth:this._adaptableContainerWidth}},this._settings.showLabel?C.default.createElement(l.Paragraph,{mode:"12",align:"right"},"Reklama"):null,!e&&this._renderAdvert()))}_renderAdvert(){return C.default.createElement("div",{className:this.cssClasses({"el-position-relative":!0})},this._settings.autoSize?this._renderAdvertRoot():this._renderAdvertSizer())}_renderAdvertRoot(){return C.default.createElement("div",{className:this.cssClasses("mol-advert-content"),ref:this._advertContainerRef})}_renderAdvertSizer(){return[C.default.createElement(l.Sizer,{key:"sizer",width:this.state.width,height:this.state.height}),C.default.createElement("div",{key:"fill",className:this.cssClasses({"atm-fill":!0})},this._renderAdvertRoot())]}_onAdvertFetched(e){this._advertState!==$.RENDERED&&this._advertState!==$.MISSED&&(this._advertState=$.FETCHED),this.props.onAdvertFetched&&this.props.onAdvertFetched(e)}_onAdvertMissed(){this._advertState=$.MISSED,this._onNoAdvertAvailable()}_onAdvertRendered(){this._advertState!==$.MISSED&&(this._advertState=$.RENDERED),this.props.onAdvertLoaded&&this.props.onAdvertLoaded()}_onAdvertRoot(){const{current:e}=this._advertContainerRef;this._advertState||this._isAdvertInvisible()||(this._settings.inscreen?this._registerVisibilityCheck(e):this._fetchAdvert())}_onNoAdvertAvailable(){this.props.onNoAdvertAvailable&&this.props.onNoAdvertAvailable()}_onReportAdBlock(e){e&&e.detail&&e.detail.data&&e.detail.data.adblock&&this._onNoAdvertAvailable()}_onVisibilityWriter(e){e>0&&(this._unregisterVisibilityCheck(),this._fetchAdvert())}_afterAdvertFetched(e){const{current:t}=this._advertContainerRef;t&&(this._advert=e,this._onAdvertFetched(e),this._writeAdvert(t,e))}_defaultState(){const{placeholder:e,width:t,height:n}=this._settings;return e?{width:e.width,height:e.height}:{width:t||0,height:n||0}}_fetchAdvert(){this._advertState=$.INITIALIZED;let{zoneId:e,width:t,height:n,minWidth:i,minHeight:r,collocation:s,contentId:o,advertSection:a,sectionPrefix:l}=this._settings;const c=this.context.currentABTest;!this.utils.AdvertHelper.isNarrowForBranding()&&(s=this.utils.AdvertHelper.addRamKeywordToCollocation(s)),s=this.utils.AdvertHelper.addABTestKeywordToCollocation(s,c);const u=[l,a].join("")||null;this.utils.SspHelper.getAd(e,t,n,i,r,{collocation:s,contentId:o,section:u}).then((e=>this._afterAdvertFetched(e))).catch((e=>{this._onAdvertMissed(e)}))}_generateAdvertSettings(e){const t=this.constructor.defaultProps.settings,n=this.utils.AdvertHelper.resolvePosition(e.advertType);this._settings=Object.assign({},t,n,e)}_isAdvertInvisible(){const{current:e}=this._advertContainerRef;if(!e)return!0;let t=this.utils.$UIComponentHelper.componentPositions.getBoundingClientRect(e);return 0===t.top&&0===t.left&&0===t.width&&0===t.height}_registerVisibilityCheck(e){e&&!this._registeredVisibilityId&&(this._registeredVisibilityId=this.utils.$UIComponentHelper.visibility.register(this.utils.$UIComponentHelper.getVisibilityReader(e,{extendedPadding:760}),this.utils.$UIComponentHelper.wrapVisibilityWriter((e=>this._onVisibilityWriter(e)))))}_shouldRender(){return this.utils.DeviceHelper.isMobile()&&!1!==this._settings.renderMobile||!this.utils.DeviceHelper.isMobile()&&!1!==this._settings.renderDesktop}_unregisterVisibilityCheck(){this._registeredVisibilityId&&this.utils.$UIComponentHelper.visibility.unregister(this._registeredVisibilityId)}_writeAdvert(e,t){const{current:n}=this._advertContainerRef,i={};n&&this._advertState!==$.RENDERED&&this._advertState!==$.MISSED&&(s.warnIf(!1,`Advert type: ${t.type} is not suitable for SSP rendering`),this.utils.SspHelper.writeAd(e,t),(this._settings.adaptableHeight||t.type===H.ERROR||t.type===H.EMPTY)&&(i.height=t.height,i.width=t.width),t.responsive&&(i.responsive=t.responsive),this.setState(i),t.type!==H.EMPTY&&t.type!==H.ERROR?this._onAdvertRendered():this._onAdvertMissed())}}const z=L(U);class F{static get $dependencies(){return[O,"$Window","$Dispatcher","DotAnalytic",f.PageABTestRegistry,g.ScriptLoaderPlugin,"$RouterEvents","$WarningEventName","$Settings.ssp"]}constructor(e,t,n,i,r,s,o,a,l){this._adbHelper=e,this._window=t,this._dispatcher=n,this._dot=i,this._pageABTestRegistry=r,this._config=l,this._scriptLoader=s,this._routerEvents=o,this._errorEventName=a,this._enable=!1,this._pendingRequests=[],this._flushTimeoutId=null,this._sspScriptLoadingFailed=!1}init(){this._install(),!this.isEnabled()&&this._window.isClient()&&this._dispatcher.listen(h.Events.LOADED,(e=>{"dot"===e.type&&this._onDependencyLoaded()}))}_onDependencyLoaded(){this._configureAndFlush(!0)}getAd(e,t=0,n=0,i=0,r=0,s={collocation:null,contentId:null,section:null}){return new Promise(((o,a)=>{this._sspScriptLoadingFailed&&a(new Error("Ssp script loading failed"));const l=Date.now(),c={zoneId:e,width:t,height:n,minWidth:i,minHeight:r,callback:t=>{this._dispatcher.fire(j.FETCHED,{zoneId:e,collocation:s.collocation,contentId:s.contentId,section:s.section,requestedTime:l,fetchedTime:Date.now(),advert:t},!0),o(t)},rejectionCallback:a,options:s};this._dispatcher.fire(j.REQUESTED,{zoneId:e,collocation:s.collocation,contentId:s.contentId,section:s.section,requestedTime:l},!0),this._pendingRequests.push(c),this.isEnabled()&&(this._flushTimeoutId&&clearTimeout(this._flushTimeoutId),this._flushTimeoutId=setTimeout((()=>{this._flush()}),this._config.flushTimeout))}))}isEnabled(){return this._enable}served(e){try{this._window.getWindow().sssp.served(e)}catch(e){this._processSspError("served",e)}}setPageViewId(){try{this.isEnabled()&&this._window.getWindow().sssp.setPageViewId()}catch(e){this._processSspError("setPageViewId",e)}}writeAd(e,t){try{this._window.getWindow().sssp.writeAd(t,{id:e})}catch(e){this._processSspError("writeAd",e)}}_addCurrentABTestToConfig(e){return new Promise((t=>{if(!e)return void t(e);const n=this._pageABTestRegistry.getCurrentABTest();n?n.then((n=>{const i=Object.assign({},e),{name:r,variant:s}=n||{};r&&s&&(i.ab={[r]:s}),t(i)})).catch((n=>{s.error(n),t(e)})):t(e)}))}_configure(e){if(!this._window.isClient()||!this._window.getWindow().sssp||!this._dot.isEnabled()||!this._config.server||e&&this.isEnabled())return Promise.resolve();e&&(this._window.getWindow().sssp.init(),this._dispatcher.listen(this._routerEvents.AFTER_HANDLE_ROUTE,(()=>{this._flushTimeoutId&&clearTimeout(this._flushTimeoutId),this._configureAndFlush(!1)}))),this._enable=!0;try{const{site:e,server:t,protocol:n,aab:i,badge:r}=this._config,s={server:t};return e&&(s.site=e),n&&(s.protocol=n),i&&(s.adblock=this._adbHelper.isAdb()),s.badge=r||!1,this._addCurrentABTestToConfig(s).then((e=>{this._window.getWindow().sssp.config(e)}))}catch(e){return this._processSspError("_configure",e),Promise.resolve()}}_configureAndFlush(e){this._configure(e).then((()=>{this.isEnabled()&&this._flush()}))}_flush(){try{this._window.getWindow().sssp.getAds(this._pendingRequests)}catch(e){this._processSspError("_flush",e)}this._pendingRequests=[]}_install(){!this.isEnabled()&&this._window.isClient()&&this._config.scriptUrl&&(this._window.getWindow()._sspDoNotInit=!0,this._window.getWindow()._sspDoNotLoadDOT=!0,this._scriptLoader.load(this._config.scriptUrl).then((()=>{this._onDependencyLoaded()})).catch((e=>{this._sspScriptLoadingFailed=!0,this._rejectAllRequests(),console.error(e)})))}_processSspError(e,t,n){this._dispatcher.fire(this._errorEventName,{package:"@cns/plugin-advert",class:"SspHelper",method:e,error:t,advert:n},!0)}_rejectAllRequests(){Array.isArray(this._pendingRequests)&&this._pendingRequests.map((e=>{e.rejectionCallback(new Error("Ssp script loading failed"))}))}}class B extends u.PageHandler{static get $dependencies(){return[F]}constructor(e){super(),this._sspHelper=e,this.firstRouteLoaded=!1}handlePreManagedState(){this.firstRouteLoaded?this._sspHelper.setPageViewId():this.firstRouteLoaded=!0}}class V extends u.AbstractPureComponent{static get contextType(){return u.PageContext}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.advert.component.molecule.gamblingWarning.GamblingWarning")}render(){return C.default.createElement("div",{className:this.cssClasses("mol-gambling-warning",!0)},C.default.createElement("svg",{className:this.cssClasses("mol-gambling-warning__icon"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 177.01 176.5"},C.default.createElement("path",{fill:"#dc1820",fillRule:"evenodd",d:"M0 88.3a88.5 88.5 0 1 1 88.5 88.2A88.4 88.4 0 0 1 0 88.3z"}),C.default.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M15.4 88.3a73.2 73.2 0 1 1 73.1 72.9 73 73 0 0 1-73.1-73z"}),C.default.createElement("path",{d:"M67.3 119.6v-10.1h-10V56.9H45.2L26.6 68.2l5 8.9L45 68.7v40.8H33.2v10h34zM92.7 56C78.3 56 71 63.5 71 72.8c0 7.4 5 13 13 14.6-8.6.8-14.4 6.8-14.4 15.6 0 10.8 7.8 17.4 23 17.4s23-6.6 23-17.4c0-8.9-5.7-15.1-14.4-16 8.6-1.4 13.1-7 13.1-14 0-9.5-7.4-17-21.7-17zm0 36c6 0 11 2.2 11 9.1 0 5.5-3.5 9.2-11 9.2s-11-3.7-11-9.1c0-7 4.9-9.3 11-9.3zm0-26c6.6 0 9.5 3.4 9.5 8 0 6.2-3.8 8.8-9.5 8.8s-9.5-2.6-9.5-8.7c0-4.6 2.8-8.1 9.5-8.1zM138.1 73.6h-6.2V85h-11.4v6.2H132v11.3h6.2V91.1h11.4V85H138V73.6z"})),C.default.createElement(l.Paragraph,{className:this.cssClasses("mol-gambling-warning__text")},this.localize("gamblingWarning.text")))}}const W=Object.freeze({COMBINED:"COMBINED",ETA:"ETA",ADVERT:"ADVERT",DRTG:"DRTG",SHOP:"SHOP",DYNAMIC_BANNER:"DYNAMIC_BANNER"});class q extends d.AbstractPureComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{onNoAdvertAvailable:null,onAdvertFetched:null,properties:{},settings:{width:0,height:0,minWidth:0,minHeight:0,zoneId:0,advertType:"",collocation:"",contentId:"",advertSection:"",videoNative:!1}}}get _advertDone(){return this._advertState===$.RENDERED||this._advertState===$.MISSED}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.advert.component.molecule.nativeAdvert.NativeAdvert"),this._settings=this._generateAdvertSettings(this.props.settings),this._advertState=null,this._advert=null,this._advertRoot=C.default.createRef(),this._registeredVisibilityId=null,this._visibilityImpressId=null}componentDidMount(){!this._advertState&&this._shouldRender()&&this._fetchAdvert()}componentWillUnmount(){this._unregisterVisibilityCheck()}render(){return C.default.createElement("div",{ref:this._advertRoot,className:this.cssClasses({"mol-native-advert":!0,"js-ad":!0},!0)},this.props.children)}onExternalRender(e){if(this._advertDone)return;this._advertState=$.RENDERED;const t=this._getAllImpressions();this.utils.SspHelper.served(t),this._registerVisibilityCheck(e)}_onAdvertFetched(e){this._advertState!==$.RENDERED&&this._advertState!==$.MISSED&&(this._advertState=$.FETCHED),this.props.onAdvertFetched&&this.props.onAdvertFetched(e)}_onAdvertMissed(){this._advertState=$.MISSED,this.props.onNoAdvertAvailable&&this.props.onNoAdvertAvailable(),this._advert&&(this._advert.type===H.EMPTY||this._advert.tracking&&this._advert.tracking.served)&&this.utils.SspHelper.served(this._advert.tracking.served)}_fetchAdvert(){this._advertState=$.INITIALIZED;const{zoneId:e,width:t,height:n,minWidth:i,minHeight:r,collocation:s,contentId:o,advertSection:a,videoNative:l}=this._settings,c=this.context.currentABTest;let u=this.utils.AdvertHelper.addABTestKeywordToCollocation(s,c);l&&(u=this.utils.AdvertHelper.addVideoNativeToCollocation(u)),this.utils.SspHelper.getAd(e,t,n,i,r,{collocation:u,contentId:o,section:a}).then((e=>this._processAdvert(e))).catch((e=>{this._onAdvertMissed(e)}))}_generateAdvertSettings(e){const t=e.advertType,n=this.constructor.defaultProps.settings,i=this.utils.AdvertHelper.resolvePosition(t);return Object.assign({},n,i,e)}_getAllImpressions(){const e=this._advert,t=[];if(!e)return t;if(e.tracking&&e.tracking.served&&t.push(...e.tracking.served),e.ads&&e.ads.length&&e.ads[0]){const n=e.ads[0];if(n.externalImpress&&t.push(n.externalImpress),t.push(...this._getEventTrackersImpress(n)),n.adType===W.DRTG||n.adType===W.DYNAMIC_BANNER){const n=e.ads.find((e=>e.adType===W.SHOP));t.push(...this._getEventTrackersImpress(n))}}return e.data&&e.data.native&&e.data.native.imptrackers&&e.data.native.imptrackers.length&&t.push(...e.data.native.imptrackers),t}_getEventTrackersImpress(e){return e&&e.eventTrackers&&e.eventTrackers.impress&&e.eventTrackers.impress.length?e.eventTrackers.impress:[]}_processAdvert(e){if(this._advert=e,this._advertState===$.INITIALIZED)if(e.type!==H.EMPTY)if(e.type!==H.IFRAME){try{e.data=JSON.parse(e.data.trim().replace(/<!--[^(-->)]*-->/g,"")),e.type=H.JSON,e.ads=e.data.ads||[],e.isValid=!!e.ads.length}catch(e){return void this._onAdvertMissed()}this._onAdvertFetched(e)}else this._onAdvertFetched(e);else this._onAdvertMissed()}_registerVisibilityCheck(e){const t=e||this._advertRoot.current;t&&!this._registeredVisibilityId&&(this._registeredVisibilityId=this.utils.$UIComponentHelper.visibility.register(this.utils.$UIComponentHelper.getVisibilityReader(t,{}),(e=>{e.payload>=50?this._visibilityImpressId||(this._visibilityImpressId=setTimeout((()=>this._visibilityImpress()),1e3)):(clearTimeout(this._visibilityImpressId),this._visibilityImpressId=null)})))}_shouldRender(){return this.utils.DeviceHelper.isMobile()&&!1!==this._settings.renderMobile||!this.utils.DeviceHelper.isMobile()&&!1!==this._settings.renderDesktop}_unregisterVisibilityCheck(){this._registeredVisibilityId&&this.utils.$UIComponentHelper.visibility.unregister(this._registeredVisibilityId)}_visibilityImpress(){this._advert.tracking.visible&&this.utils.SspHelper.served(this._advert.tracking.visible),this._unregisterVisibilityCheck()}}const G=L(q),K="downloading",Z="fetched",Q="missed";class Y extends u.AbstractComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{article:null,onAdvertFetched:null,onNoAdvertAvailable:null,section:null,layout:null,className:"",properties:{advertComponent:null,advertComponentProps:{},placeholderComponent:null,placeholderComponentProps:{},missComponent:null,missComponentProps:{}},settings:{advertType:"",collocation:"",lazyLoad:!0,zoneId:0}}}static get requiredProps(){return["article","section","layout"]}get useIntersectionObserver(){const{$Settings:e}=this.utils;return!(e&&e.plugin&&e.plugin.imaUiAtoms&&e.plugin.imaUiAtoms.useIntersectionObserver&&!1===e.plugin.imaUiAtoms.useIntersectionObserver.images)}constructor(e,t){super(e,t),this._advertPointer=C.default.createRef(),this._elementRef=C.default.createRef(),this.state={advertData:null,loadState:K},this.utils.CssRenderingHelper.register("plugin.advert.component.molecule.nativeAdvert.NativeAdvertWrapper"),this._onReportAdBlockBound=this._onReportAdBlock.bind(this)}componentDidMount(){this.listen(this.utils.$Window.getWindow(),p.AdBlockTrackerEvents.REPORT_ADBLOCK,this._onReportAdBlockBound);const{advertType:e,zoneId:t}=this.props.settings;e&&t||this._onNoAdvertAvailable()}componentWillUnmount(){this.unlisten(this.utils.$Window.getWindow(),p.AdBlockTrackerEvents.REPORT_ADBLOCK,this._onReportAdBlockBound)}render(){const{advertType:e,collocation:t="",zoneId:n}=this.props.settings;if(!e||!n)return this._renderMissComponent();const{article:i,layout:r,section:s}=this.props,o=this.utils.AdvertHelper.selectAdvertSection(i,s),a=this.utils.AdvertHelper.createCollocation({article:i,layout:r},t);return C.default.createElement(G,{className:this.cssClasses("mol-native-advert-wrapper",!0),settings:{advertSection:o,advertType:e,collocation:a,zoneId:n},onAdvertFetched:this._onAdvertFetched.bind(this),onNoAdvertAvailable:this._onNoAdvertAvailable.bind(this),ref:this._advertPointer},this.state.loadState===Z?this._renderAdvertComponent():null,this.state.loadState===K?this._renderPlaceholderComponent():null,this.state.loadState===Q?this._renderMissComponent():null)}_renderAdvertComponent(){const{advertData:e}=this.state,{advertComponentProps:t={},advertComponent:n}=this.props.properties;if(!e||!n)return null;this.onExternalRender(this._elementRef.current);const i={...t};return i.properties="object"==typeof i.properties?i.properties:{},i.properties.advert=e,C.default.createElement(n,N({ref:this._elementRef},i))}_renderMissComponent(){const{missComponentProps:e={},missComponent:t}=this.props.properties;return t?C.default.createElement(t,e):null}_renderPlaceholderComponent(){const{placeholderComponentProps:e={},placeholderComponent:t}=this.props.properties;return t?C.default.createElement(t,e):null}onExternalRender(e){this._advertPointer.current&&this._advertPointer.current.onExternalRender(e),this.props.settings.lazyLoad&&this._loadLazyAssets()}_onAdvertFetched(e){e?(this.setState({advertData:e,loadState:Z}),this.props.onAdvertFetched&&this.props.onAdvertFetched(e)):this._onNoAdvertAvailable()}_onNoAdvertAvailable(){this.setState({loadState:Q}),this.props.onNoAdvertAvailable&&this.props.onNoAdvertAvailable()}_onReportAdBlock(e){e&&e.detail&&e.detail.data&&e.detail.data.adblock&&this._onNoAdvertAvailable()}_loadLazyAssets(){const{$UIComponentHelper:e,$Window:t}=this.utils;this.useIntersectionObserver&&t.getWindow().IntersectionObserver||e.visibility.notify()}}const X=E.default((e=>e?{article:e.article,layout:e.layout,section:e.section}:{}))(Y);class J extends u.AbstractComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{renderComponent:null,properties:{advert:null}}}get advert(){const{properties:e={}}=this.props;return e.advert}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.advert.component.molecule.nativeAdvert.VideoNative"),this._renderComponent=e.renderComponent,this._videoNativeRef=C.default.createRef(),this._videoNativeWritten=!1}componentDidMount(){this._writeVideoNative()}componentDidUpdate(){this._writeVideoNative()}render(){const e=this.advert;return e&&"object"==typeof e?e.type===H.IFRAME?this._renderVideoNativeElement():this._renderRegularNativeAdvert():null}_renderRegularNativeAdvert(){const e=this._renderComponent;if(!e)return null;const t={...this.props}||{};return delete t.renderComponent,C.default.createElement(e,t)}_renderVideoNativeElement(){return C.default.createElement("div",{ref:this._videoNativeRef,className:this.cssClasses({"mol-video-native":!0},!0)})}_writeVideoNative(){this._videoNativeRef.current&&!this._videoNativeWritten&&(this.utils.SspHelper.writeAd(this._videoNativeRef.current,this.advert),this._videoNativeWritten=!0)}}const ee={layout:"responsive"};class te extends d.AbstractComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{section:null,className:"",properties:{},settings:{zoneId:0,advertType:"",collocation:"",width:0,height:0},layout:null,article:null,landingPage:null,tag:null,onAdvertFetched:null}}static get requiredProps(){return["section","layout","article","landingPage","tag"]}static defaultSelector(e){return d.defaultSelector(e,((e,{$Utils:t})=>{const n=t.AdvertHelper.resolvePosition(e.settings.advertType),i=t.AdvertHelper.selectAdvertSection(e.article,e.section),r=t.AdvertHelper.createCollocation({article:e.article,layout:e.layout,landingPage:e.landingPage,tag:e.tag},e.settings.collocation),s=e.article&&e.article.uid?`${e.article.uid}`:"",o=Object.assign({},ee,e.settings,{collocation:r,contentId:s,advertSection:i});return Object.assign({},e,{advertPosition:n,settings:o})}))}constructor(e,t){super(e,t),this.utils.$UIComponentHelper.isAmp()||this.utils.CssRenderingHelper.register("plugin.advert.component.organism.advert.Advert"),this._advertLayoutRef=C.default.createRef(),this._onNoAdvertAvailableBind=this.onNoAdvertAvailable.bind(this),this._onAdvertFetchedBind=this.onAdvertFetched.bind(this),this.state={noAdvertAvailable:!1}}render(){if(this.utils.$UIComponentHelper.isAmp())return null;let e=this.getProps(),t=e.advertPosition.type?e.advertPosition.type.replace(/\./g,"-"):"";return C.default.createElement("div",{ref:this._advertLayoutRef,className:this.cssClasses({"ogm-advert-layout":!0,"ogm-advert-static":!0,"ogm-advert-adaptable":e.advertPosition.adaptableHeight,[`ogm-advert-${t}`]:e.advertPosition.type,"ogm-advert-not-available":this.state.noAdvertAvailable},!0)},C.default.createElement("div",{className:this.cssClasses({"ogm-advert-container":!0})},C.default.createElement(z,{settings:e.settings,onAdvertFetched:this._onAdvertFetchedBind,onNoAdvertAvailable:this._onNoAdvertAvailableBind})))}onAdvertFetched(e){const t=this.getProps();return t.onAdvertFetched?t.onAdvertFetched(e):null}onNoAdvertAvailable(){const{current:e}=this._advertLayoutRef;e&&this.setState({noAdvertAvailable:!0})}}const ne=Object.freeze({LEADERBOARD_WIDTH:970,LEADERBOARD_HEIGHT:210,SKLIK_WIDTH:930,SKLIK_HEIGHT:180,BRANDING_WIDTH:2560,BRANDING_HEIGHT:1440,BRANDING_CODE_WIDTH:2e3,BRANDING_CODE_HEIGHT:1400});class ie{static get $dependencies(){return[a.ColorHelper,F]}get impress(){return this._impress}get isBranding(){return this.isValid&&!this.isLeaderboard&&!this.isSklik}get isCodeBranding(){return this.isBranding&&this.spot.content&&this._isCodeBranding(this.spot.content)}get isHTML5Branding(){return this.isBranding&&this.spot.content&&this._isHTML5Branding(this.spot.content)}get isIframeBranding(){return this.isBranding&&this.spot.content&&this._isIframeBranding(this.spot.content)}get isImageBranding(){return this.isBranding&&this.spot.content&&"image"===this.spot.content.type}get isLeaderboard(){return this.isValid&&this.spot.width===ne.LEADERBOARD_WIDTH&&this.spot.height===ne.LEADERBOARD_HEIGHT}get isNarrow(){return this.isBranding&&this.spot.content&&"1060"===this.spot.content.layout}get isSklik(){return this.isValid&&this.spot.width===ne.SKLIK_WIDTH&&this.spot.height===ne.SKLIK_HEIGHT}get isValid(){return this.spot&&this.spot.height&&this.spot.width}constructor(e,t){this._colorHelper=e,this._sspHelper=t,this._hasBeenHit=!1,this._impress=[],this.spot={}}hit(){!this._hasBeenHit&&this.isBranding&&(this._hasBeenHit=!0,this._sspHelper.served(this._impress))}parse(e){if(this.data=e,e.tracking.served&&this._impress.push(...e.tracking.served),e.tracking.visible&&this._impress.push(...e.tracking.visible),this.spot.width=e.width,this.spot.height=e.height,this.isBranding){if(e.type===H.IFRAME_URL)return void(this.spot.content={type:"html5",creative:e.data,layout:"1060"});if(e.type===H.IFRAME)return void(this.spot.content={type:H.IFRAME,creative:e.data,layout:"1060"});this.spot.content=this._parseContent(e.data);const t=this.spot.content;t&&t.color&&(t.color=this._colorHelper.parseColor(t.color).toHex()),t&&t.impress&&this._impress.push(t.impress),t&&t.customImpress&&this._impress.push(t.customImpress)}}_appendClickthruToCreative(e,t){return s.throwIf("string"!=typeof e,new TypeError("Argument creative must be a string.")),e?t?`${e}${-1===e.indexOf("?")?"?":"&"}clickthru=${encodeURIComponent(t)}`:e:""}_isCodeBranding(e){return s.throwIf("string"!=typeof e&&"object"!=typeof e,new TypeError("Argument content must be a string/object.")),"string"!=typeof e&&this.isBranding&&e.type===H.CODE}_isHTML5Branding(e){return s.throwIf("string"!=typeof e&&"object"!=typeof e,new TypeError("Argument content must be a string/object.")),"string"!=typeof e&&this.isBranding&&"html5"===e.type}_isIframeBranding(e){return s.throwIf("string"!=typeof e&&"object"!=typeof e,new TypeError("Argument content must be a string/object.")),"string"!=typeof e&&this.isBranding&&e.type===H.IFRAME}_parseContent(e){s.throwIf(!e||"string"!=typeof e,new TypeError("Argument content must be a string."));const t=e.replace(/^[^{]*/,"").replace(/[^}]*$/,"");let n;try{n=JSON.parse(t)}catch(e){return s.error(new SyntaxError(`Cannot parse the branding advert content: ${e.message}.`)),null}let i=["type","clickthru","creative","topCreative","sideCreative","color","customImpress","impress"];for(let e of i)!n.hasOwnProperty(e)||this._isCodeBranding(n)&&"creative"===e||(n[e]=n[e].replace(/&amp;/g,"&"));if(this._isHTML5Branding(n)){const{creative:e,clickthru:t}=n;n.creative=this._appendClickthruToCreative(e,t)}return n}}const re=Object.freeze({PAGEOFFSET:"usa.plugin.advert.codeBrandingAdvert.pageOffset",TRANSITIONEND:"usa.plugin.advert.codeBrandingAdvert.transitionEnd"});class se extends d.AbstractPureComponent{static get contextType(){return u.PageContext}constructor(e,t){super(e,t),this.utils.$UIComponentHelper.isAmp()||this.utils.CssRenderingHelper.register("plugin.advert.component.organism.advert.branding.CodeBrandingAdvert"),this._containerRef=C.default.createRef(),this._sizerRef=C.default.createRef()}componentDidMount(){const{$Dispatcher:e,$Window:t,SspHelper:n}=this.utils,{current:i}=this._containerRef,{current:r}=this._sizerRef,s=this._formatAdvertForSsp(this.props.advert);n.writeAd(i,s),t.bindEventListener(i,j.PAGEOFFSET,(t=>{r.style.height=`${t.detail}px`,t.stopPropagation(),e.fire(re.PAGEOFFSET,{offsetValue:t.detail},!0)})),t.bindEventListener(r,"transitionend",(t=>{t.stopPropagation(),e.fire(re.TRANSITIONEND,{},!0)}))}componentWillUnmount(){const{current:e}=this._containerRef;this.utils.AdvertHelper.fireCustomEvent(e,j.DESTROY)}render(){if(this.utils.$UIComponentHelper.isAmp())return null;const{content:e}=this.props.advert.spot;return C.default.createElement("div",{className:this.cssClasses({"ogm-branding-advert":!0,"ogm-branding-advert-narrow":"1060"===this.props.advert.spot.content.layout}),"data-e2e":"ogm-branding-advert"},C.default.createElement("div",{className:this.cssClasses({"ogm-branding-advert-creative":e.type!==H.IFRAME,"ogm-branding-advert-code-iframe":e.type===H.IFRAME}),style:{backgroundColor:`${e.color}`},ref:this._containerRef}),C.default.createElement("div",{className:this.cssClasses("ogm-branding-sizer"),ref:this._sizerRef}))}_formatAdvertForSsp(e){return s.throwIf(!(e instanceof ie),new TypeError("Argument advert must be an instance of BrandingAdvertEntity.")),Object.assign({},e.data,{data:e.spot.content.creative})}}class oe extends d.AbstractPureComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{section:null,className:"",properties:{},settings:{zoneId:0,advertType:"",collocation:""},layout:null,article:null,landingPage:null,tag:null}}static get requiredProps(){return["section","layout","article","landingPage","ribbonMerkurWidget","tag"]}get height(){const{advert:e}=this.state,{spot:t}=e||{};return t?t.height:0}get width(){const{advert:e}=this.state,{spot:t}=e||{};return t?t.width:0}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.advert.component.organism.advert.branding.BrandingAdvert"),this.state={advert:null},this._resizeFired=!1}componentDidMount(){const{$Dispatcher:e}=this.utils;e.listen(D.RESET,this._onReset,this)}componentDidUpdate(){if(!this._resizeFired&&this.state.advert&&this.state.advert.isBranding){const{$Window:e}=this.utils,t=e.createCustomEvent("resize");e.getWindow().dispatchEvent(t),this._resizeFired=!0}}componentWillUnmount(){const{$Dispatcher:e}=this.utils;e.unlisten(D.RESET,this._onReset,this)}render(){const{advert:e}=this.state,t=this.utils.AdvertHelper.isNarrowForBranding()?"leaderboard":this.props.settings.advertType;return C.default.createElement("div",{className:this.cssClasses({"ogm-branding":!0,"ogm-branding-narrow":e&&e.isNarrow,"ogm-branding-is-branding-shown":e&&e.isBranding}),"data-e2e":"ogm-branding"},this._renderBrandingPlaceholder(),this._renderImageBrandingAdvert(),this._renderHTML5BrandingAdvert(),this._renderCodeBrandingAdvert(),this._renderIframeBrandingAdvert(),C.default.createElement("div",{className:this.cssClasses("ogm-branding-page-content")},this._shouldRenderStatic()&&C.default.createElement(te,{className:this.cssClasses({"ogm-branding-static-advert":!0,"ogm-branding-loader":e&&e.isBranding}),article:this.props.article,layout:this.props.layout,landingPage:this.props.landingPage,section:this.props.section,tag:this.props.tag,onAdvertFetched:e=>this.onAdvertFetched(e),settings:{zoneId:this.props.settings.zoneId,advertType:t,noRender:e&&e.isBranding,collocation:this.props.settings.collocation}}),this.props.children))}_renderBrandingPlaceholder(){const{advert:e}=this.state,{useBrandingPlaceholder:t}=this.utils.$Settings.plugin.cns.plugin.advert;return!t||e&&e.isBranding?null:C.default.createElement("div",{className:this.cssClasses("ogm-branding-advert")})}_renderCodeBrandingAdvert(){const{advert:e}=this.state;return e&&e.isCodeBranding?C.default.createElement(se,{advert:e}):null}_renderHTML5BrandingAdvert(){const{advert:e}=this.state;return e&&e.isHTML5Branding?(e.hit(),C.default.createElement("div",{className:this.cssClasses("ogm-branding-advert"),"data-e2e":"ogm-branding-advert"},this._getRibbonHeight()&&C.default.createElement("style",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\t\t\t\t.${this.cssClasses("ogm-branding-advert-iframe")} {\n\t\t\t\t\t\t\t\t\ttop: ${this._getRibbonHeight()};\n\t\t\t\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t\t\t\t}`}}),C.default.createElement("div",{className:this.cssClasses("ogm-branding-advert-creative"),style:{backgroundColor:`${e.spot.content.color}`}},C.default.createElement(l.Iframe,{className:this.cssClasses({"ogm-branding-advert-iframe":!0,"ogm-branding-advert-iframe-2000":2e3===e.spot.width}),src:e.spot.content.creative,width:e.spot.width,height:e.spot.height,marginWidth:0,marginHeight:0})),C.default.createElement("div",{className:this.cssClasses("ogm-branding-sizer")}))):null}_renderIframeBrandingAdvert(){const{advert:e}=this.state;return e&&e.isIframeBranding?C.default.createElement(C.default.Fragment,null,this._getRibbonHeight()&&C.default.createElement("style",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\t\t\t\t.${this.cssClasses("ogm-branding-advert-code-iframe")} {\n\t\t\t\t\t\t\t\t\ttop: ${this._getRibbonHeight()};\n\t\t\t\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t\t\t\t}`}}),C.default.createElement(se,{advert:e})):null}_renderImageBrandingAdvert(){const{advert:e}=this.state;if(!e||!e.isImageBranding)return null;e.hit();const t={backgroundImage:`url("${e.spot.content.creative}")`};return this._getRibbonHeight()&&(t.backgroundPositionY=this._getRibbonHeight()),C.default.createElement("div",{className:this.cssClasses("ogm-branding-advert"),"data-e2e":"ogm-branding-advert"},C.default.createElement("div",{className:this.cssClasses("ogm-branding-advert-creative"),style:{backgroundColor:`${e.spot.content.color}`}},C.default.createElement(l.Link,{href:e.spot.content.clickthru,title:"Reklama",target:"_blank"},C.default.createElement("div",{className:this.cssClasses({"ogm-branding-advert-creative-background":!0}),style:t}))),C.default.createElement("div",{className:this.cssClasses("ogm-branding-sizer")}))}onAdvertFetched(e){const t=this.utils.oc.create(ie);t.parse(e),this.setState({advert:t})}_onReset(){this._resizeFired=!1,this.setState({advert:null})}_getRibbonHeight(){const{ribbonMerkurWidget:e}=this.props;return e&&e.widgetProperties?e.widgetProperties.height:null}_shouldRenderStatic(){const{advertType:e}=this.props.settings,{advert:t}=this.state,n=this.utils.$UIComponentHelper.isAmp(),i=this.utils.AdvertHelper.resolvePosition(e);return!(n||this.utils.DeviceHelper.isMobile()&&!i.renderMobile||(!t||!t.isBranding)&&t&&!t.isLeaderboard&&!t.isSklik)}}const ae=Object.freeze({RESET:"usa.plugin.advert.repeating.reset"});class le extends d.AbstractPureComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{section:null,className:"",properties:{},settings:{zoneId:0,advertType:"",autoRender:!1,collocation:""},layout:null,article:null,landingPage:null,tag:null}}static get requiredProps(){return["section","layout","article","landingPage","ribbonMerkurWidget","tag"]}static defaultSelector(e){return d.defaultSelector(e,((e,{$Utils:t})=>{const n=t.AdvertHelper.resolvePosition(e.settings.advertType),i=t.CssRenderingHelper.getConstant("advert.label"),r=t.AdvertHelper.selectAdvertSection(e.article,e.section),s=t.AdvertHelper.createCollocation({article:e.article,layout:e.layout,landingPage:e.landingPage,tag:e.tag},e.settings.collocation),o=e.article&&e.article.uid?`${e.article.uid}`:"",a=Object.assign({},le.defaultProps.settings,e.settings,{collocation:s,contentId:o,advertSection:r});return Object.assign({},e,{advertPosition:n,advertLabel:i,settings:a})}))}static overrideFactory(){return{onVisibilityWriter:ce,alignContainerToBottom:ue,alignContainerToTop:de,fixContainerToWindow:pe}}constructor(e,t){super(e,t),this.utils.$UIComponentHelper.isAmp()||this.utils.CssRenderingHelper.register("plugin.advert.component.organism.advert.Advert"),this._advertLayoutRef=C.default.createRef(),this._advertContainerRef=C.default.createRef(),this._registeredVisibilityId=null,this._onNoAdvertAvailable=this.onNoAdvertAvailable.bind(this),this.state={containerAlignClass:"ogm-advert-align-to-top",animate:!1,noAdvertAvailable:!1}}componentDidMount(){const{$UIComponentHelper:e}=this.utils;this._isLegacyOrOutdated()&&(this._registeredVisibilityId=e.visibility.register((()=>this.onVisibilityReader()),e.wrapVisibilityWriter((e=>this.getOverrides().onVisibilityWriter(e))),{visibilityInterval:120}))}componentWillUnmount(){this.utils.$UIComponentHelper.visibility.unregister(this._registeredVisibilityId)}render(){const e=this.getProps();return!e.advertPosition.type||this.utils.$UIComponentHelper.isAmp()?null:C.default.createElement("div",{ref:this._advertLayoutRef,className:this.cssClasses({"ogm-advert-layout":!0,"ogm-advert-sticky":!0,"ogm-advert-not-available":this.state.noAdvertAvailable},!0)},C.default.createElement("div",{ref:this._advertContainerRef,className:this.cssClasses({"ogm-advert-container":!0,"ogm-advert-really-sticky":!this._isLegacyOrOutdated(),[this.state.containerAlignClass]:this._isLegacyOrOutdated()&&!!this.state.containerAlignClass,animate:this.state.animate}),style:this._getStickyStyle()},C.default.createElement(z,{settings:e.settings,onNoAdvertAvailable:this._onNoAdvertAvailable})))}onNoAdvertAvailable(){const{current:e}=this._advertLayoutRef;e&&this.setState({noAdvertAvailable:!0})}onVisibilityReader(){const{current:e}=this._advertLayoutRef,{current:t}=this._advertContainerRef;if(!t||!e||this.utils.RegressionHelper.isRegression())return{layoutTop:0,layoutBottom:0,layoutIsRendered:!1};const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.top;return{layoutTop:r,layoutBottom:r+n.height-i.height,layoutIsRendered:n.height>0}}_getRibbonHeight(){const{ribbonMerkurWidget:e}=this.props;return e&&e.widgetProperties?e.widgetProperties.height:null}_getStickyStyle(){const e=this._getTopOffset();return this._isLegacyOrOutdated()&&"ogm-advert-fix-to-window"!==this.state.containerAlignClass?{}:{top:`${e}px`}}_getTopOffset(){const e=this.utils.CssRenderingHelper.getConstant("advert.label"),t=parseInt(this._getRibbonHeight());return isNaN(t)?e:t+e}_isLegacyOrOutdated(){const{LegacyBrowserDetector:e}=this.utils;return e.isLegacyClient()||e.isOutDatedClient()}_setSticky(){this.setState({containerAlignClass:"ogm-advert-sticky",animate:!0})}}function ce(e,t){if(t.layoutIsRendered){const n=e.getOverrides(),i=e._getTopOffset();t.layoutTop<=i?t.layoutBottom>=i?n.fixContainerToWindow():n.alignContainerToBottom():n.alignContainerToTop()}}function ue(e){e.setState({containerAlignClass:"ogm-advert-align-to-bottom",animate:!1})}function de(e){e.setState({containerAlignClass:"ogm-advert-align-to-top",animate:!1})}function pe(e){e.setState({containerAlignClass:"ogm-advert-fix-to-window",animate:!0})}class me extends d.AbstractPureComponent{static get contextType(){return u.PageContext}static get defaultProps(){return{section:null,article:null,className:"",properties:{},settings:{zoneId:0,advertType:"",collocation:"",advertsLimit:Number.MAX_SAFE_INTEGER,fitAdvert:!1},layout:null,landingPage:null,tag:null}}static get requiredProps(){return["section","article","layout","landingPage","ribbonMerkurWidget","tag"]}static overrideFactory(){return{generateStickyAdverts:he,generateSpecificAdverts:ge}}constructor(e,t){super(e,t),this.utils.$UIComponentHelper.isAmp()||this.utils.CssRenderingHelper.register("plugin.advert.component.organism.advert.Advert"),this.state={adverts:[]},this._advertLayoutRef=C.default.createRef(),this.onResize=this.onResize.bind(this),this.onReset=this.onReset.bind(this),this.onAfterHandleRoute=this.onAfterHandleRoute.bind(this)}componentDidMount(){const{$Dispatcher:e,$Window:t}=this.utils;t.bindEventListener(t.getWindow(),"resize",this.onResize),e.listen(ae.RESET,this.onReset),e.listen(u.RouterEvents.AFTER_HANDLE_ROUTE,this.onAfterHandleRoute)}componentWillUnmount(){const{$Dispatcher:e,$Window:t}=this.utils;t.unbindEventListener(t.getWindow(),"resize",this.onResize),e.unlisten(ae.RESET,this.onReset),e.unlisten(u.RouterEvents.AFTER_HANDLE_ROUTE,this.onAfterHandleRoute)}render(){return this.utils.$UIComponentHelper.isAmp()?null:C.default.createElement("div",{ref:this._advertLayoutRef,className:this.cssClasses({"ogm-advert-layout":!0,"ogm-advert-repeating":!0},!0)},this._composeAdvertsView())}onAfterHandleRoute(){this._recalculateAdverts()}onReset(){this.setState({adverts:[]}),this._recalculateAdverts()}onResize(){this._recalculateAdverts()}_composeAdvertsView(){return this.state.adverts.map(((e,t)=>{const{article:n}=this.props,{Component:i,zoneId:r,advertType:s,height:o}=e,{collocation:a}=this.props.settings||{};let l=d.deleteKeys(this.props,["className","properties","settings"]);const c=n&&n.uid?`${n.uid}`:"";return l.settings={zoneId:r,advertType:s,collocation:`pozice${t+1} ${a||""}`,contentId:c},(o||0===o)&&(l.settings.height=o),C.default.createElement(i,N({},l,{key:t}))}))}_getAdvertHeight(e){const t=this.utils.AdvertHelper.resolvePosition(e.advertType),n=this.utils.CssRenderingHelper.getConstant("advert.label"),i=this.utils.CssRenderingHelper.getConstant("repeatingAdvert.marginBottom");return{minHeight:t.height+n,minFitHeight:250+n,maxHeight:i+this.utils.CssRenderingHelper.getConstant("repeatingAdvert.height")}}_getCurrentMaxAdvertsHeight(e){return e.reduce(((e,t)=>e+this._getAdvertHeight(t).maxHeight),0)}_recalculateAdverts(){const{current:e}=this._advertLayoutRef;if(!e)return null;const t=this.utils.$UIComponentHelper.componentPositions.getBoundingClientRect(e);let n=this.state.adverts.slice();n=this.getOverrides().generateStickyAdverts(n,t.height),this.state.adverts.length!==n.length&&this.setState({adverts:n})}}function he(e,t,n){const{settings:i}=e.props,r={Component:le,zoneId:i.zoneId,advertType:i.advertType};return e.getOverrides().generateSpecificAdverts(t,n,r)}function ge(e,t,n,i){const{settings:{fitAdvert:r,advertsLimit:s}}=e.props,o=e._getAdvertHeight(i),a=n-e._getCurrentMaxAdvertsHeight(t),l=a%o.maxHeight,c=Math.trunc(a/o.maxHeight),u=Array(Math.max(c,0)).fill(i);l>o.minHeight?u.push(i):r&&l>o.minFitHeight&&u.push({...i,height:Math.trunc(l)});const d=s||Number.MAX_SAFE_INTEGER,p=t.length+u.length>d?d-t.length:u.length;return t.push(...u.slice(0,p)),t}function fe(e,t){let n={};return function(i,r){-1!==e.indexOf(i)&&(n[i]=r),Object.keys(n).length===e.length&&t(n)}}n.$registerImaPlugin=e=>{e.set("plugin.advert.component.molecule.advert.Advert",z),e.set("plugin.advert.component.molecule.nativeAdvert.NativeAdvert",G),e.set("plugin.advert.component.molecule.nativeAdvert.NativeAdvertWrapper",X),e.set("plugin.advert.component.molecule.nativeAdvert.VideoNative",J),e.set("plugin.advert.component.molecule.gamblingWarning.GamblingWarning",V),e.set("plugin.advert.component.organism.advert.StaticAdvert",te),e.set("plugin.advert.component.organism.advert.StickyAdvert",le),e.set("plugin.advert.component.organism.advert.RepeatingAdvert",me),e.set("plugin.advert.component.organism.advert.branding.BrandingAdvert",oe)},n.AdbHelper=O,n.Advert=z,n.AdvertEvents=D,n.AdvertHelper=class{static get $dependencies(){return["$Settings.plugin.cns.plugin.advert.positions","$Settings.plugin.cns.plugin.advert.sdn",a.CssRenderingHelper,a.DeviceHelper,o.SectionHelper,"$Window","$UIComponentHelper"]}constructor(e,t,n,i,r,s,o){this._advertPositions=e||[],this._sdnConfig=t,this._cssRenderingHelper=n,this._deviceHelper=i,this._sectionHelper=r,this._window=s,this._uiComponentHelper=o}addABTestKeywordToCollocation(e,t){return t&&t.isValid()?(e?e+" ":"")+t.name+t.variant:e}addRamKeywordToCollocation(e){return[e,T].filter(Boolean).join(" ")}addVideoNativeToCollocation(e){return this._deviceHelper.isMobile()?e:[e,P].filter(Boolean).join(" ")}createCollocation(e,t){const{article:n,layout:i,landingPage:r,tag:s}=e,o=[];return n&&n.adKeywords&&o.push(...n.adKeywords),i&&i.adKeywords&&o.push(...i.adKeywords),r&&r.adKeywords&&o.push(...r.adKeywords),s&&s.adKeywords&&o.push(...s.adKeywords),t&&o.push(t),o.map((e=>e.trim())).join(" ")}fireCustomEvent(e,t){if(!e)return;s.throwIf("undefined"!=typeof HTMLElement&&!(e instanceof HTMLElement),new TypeError("Argument eventTarget must be a HTML element.")),s.throwIf(!t||"string"!=typeof t,new TypeError("Argument eventName must be a string."));const n=this._window.createCustomEvent(t,{bubbles:!0,cancelable:!0});e&&void 0!==e.dispatchEvent&&e.dispatchEvent(n)}isNarrowForBranding(){return this._window.isClient()&&this._uiComponentHelper.componentPositions.getWindowViewportRect().width<1366}nativeImageSrcSet(e,t="original",n=null){const i=this._getSdnConfig(n||this._getSdnId(e));return i&&i[t]?i[t].map((t=>`${e}?fl=res,${t.width},${t.height||""},${t.keepAspectRatio},${t.color||""}& ${t.width}w`)).join(", "):null}resolvePosition(e){let t=this._advertPositions.reduce(((t,n)=>t||n.type!==e?t:n),null);if(!t)return{type:void 0,renderMobile:!1,renderDesktop:!1,width:0,height:0,minWidth:0,minHeight:0};{t.width=this._getConstantValue(t.width),t.height=this._getConstantValue(t.height),t.minWidth=this._getConstantValue(t.minWidth),t.minHeight=this._getConstantValue(t.minHeight);const{placeholder:e}=t;e&&(e.width=this._getConstantValue(e.width),e.height=this._getConstantValue(e.height))}return t}selectAdvertSection(e,t){let n=null;if(e){let t=this._sectionHelper.getPrimarySection(e);t&&t.advertSection&&(n=t.advertSection)}else t&&t.advertSection&&(n=t.advertSection);return n}selectVideoAdvertSection(e,t=""){let n=t;if(e){let t=this._sectionHelper.getPrimarySection(e);if(!t||!t.advertSection)return n;let i=t.advertSection.trim();n+=i.search(/^\//)>=0?i:"/"+i,n=n.replace("//","/")}return n}_getConstantValue(e){return"string"!=typeof e?e:this._cssRenderingHelper.getConstant(e)}_getSdnConfig(e){return e?this._sdnConfig[e]:null}_getSdnId(e){const t=e.match(/\/(d_\d+)\//);return t?t[1]:null}_processError(e){}},n.AdvertReportService=class{static get $dependencies(){return["$Dispatcher","$Window","$Router",b.ReportService]}constructor(e,t,n,i){this._dispatcher=e,this._window=t,this._router=n,this._monitoringReportService=i,this._beforeHandleRouteTimeStamp=null,this._afterHandleRouteTimeStamp=null,this._requestedAdvert=[],this._fetchedAdvert=[],this._afterAdvertIsLoaded=null,this._afterPageIsLoaded=null,this._firstAdvertReport=!0,this._beforeHandleRoutePromise=new a.DeferredPromise}init(){this._dispatcher.listen(j.REQUESTED,(e=>this._onAdvertRequested(e))),this._dispatcher.listen(j.FETCHED,(e=>this._onAdvertFetched(e))),this._dispatcher.listen(u.RouterEvents.BEFORE_HANDLE_ROUTE,(()=>this._onBeforeHandleRoute())),this._dispatcher.listen(u.RouterEvents.AFTER_HANDLE_ROUTE,(()=>this._onAfterHandleRoute())),this._window.bindEventListener(this._window.getWindow(),"load",(()=>this._beforeHandleRoutePromise.promise.then((()=>this._afterPageIsLoaded("load")))))}_onAdvertFetched(e){this._fetchedAdvert.push(e),this._requestedAdvert.length===this._fetchedAdvert.length&&0!==this._fetchedAdvert.length&&this._afterAdvertIsLoaded("advertFetched",e)}_onAdvertRequested(e){this._requestedAdvert.push(e)}_onAfterHandleRoute(){this._afterHandleRouteTimeStamp=Date.now(),this._afterAdvertIsLoaded("afterHandleRoute"),this._afterPageIsLoaded("afterHandleRoute")}_onBeforeHandleRoute(){this._afterAdvertIsLoaded=fe(["beforeHandleRouter","afterHandleRoute","advertFetched"],function(e){let t=!1;return function(...n){if(!t)return t=!0,e(...n)}}((()=>this._reportAdvertSpeed()))),this._afterPageIsLoaded=fe(["beforeHandleRouter","afterHandleRoute","load"],(()=>this._reportPageSpeed())),this._beforeHandleRoutePromise.isResolved||this._beforeHandleRoutePromise.resolve(),this._fetchedAdvert=[],this._requestedAdvert=[],this._beforeHandleRouteTimeStamp=Date.now(),this._afterAdvertIsLoaded("beforeHandleRouter"),this._afterPageIsLoaded("beforeHandleRouter")}_getRouteInformation(){let e={url:this._router.getUrl()};try{const t=this._router.getCurrentRouteInfo(),n=new RegExp("^[a-zA-Z]*$");e={params:t.params&&t.params.length?t.params.filter((e=>n.test(e))):{},path:t.path,name:t.route.getName()}}catch(e){console.error(e)}return e}_reportAdvertSpeed(){const e=this._fetchedAdvert.map((e=>({zoneId:e.zoneId,requestedTime:e.requestedTime,fetchedTime:e.fetchedTime}))),t={firstAdvertReport:this._firstAdvertReport,adverts:e,beforeHandleRoute:this._beforeHandleRouteTimeStamp,afterHandleRoute:this._afterHandleRouteTimeStamp,routeInfo:this._getRouteInformation()};!0===this._firstAdvertReport&&(this._firstAdvertReport=!1),this._monitoringReportService.report(b.ReportTypes.ADVERT,t)}_reportPageSpeed(){const e=this._window.getWindow();if(e.performance&&e.performance.timing){let t={peformance:JSON.parse(JSON.stringify(performance.timing)),application:{beforeHandleRoute:this._beforeHandleRouteTimeStamp,afterHandleRoute:this._afterHandleRouteTimeStamp}};const{downlink:n,downlinkMax:i,effectiveType:r,rtt:s,type:o}=e.navigator.connection||{};t.networkInfo={downlink:n,downlinkMax:i,effectiveType:r,rtt:s,type:o},t.routeInfo=this._getRouteInformation(),this._monitoringReportService.report(b.ReportTypes.SPEED,t)}}},n.AdvertState=$,n.AdvertType=H,n.BrandingAdvert=oe,n.CodeBrandingAdvertEvents=re,n.FixedIE11ScrollFix=class{static get $dependencies(){return["$Window",y.UserAgent]}constructor(e,t){this._$window=e,this._userAgent=t}init(){const e=this._userAgent.getOSFamily(),t=this._userAgent.getOSVersion(),n=this._userAgent.getName(),i=parseFloat(this._userAgent.getVersion());if("Windows"===e&&("8"===t||"10"===t)&&"IE"===n&&i>=11&&i<12){const e=this._$window.getWindow();this._$window.bindEventListener(e,"mousewheel",(()=>{event.preventDefault();const e=this._$window.getScrollY();this._$window.scrollTo(0,e-event.wheelDelta)})),this._$window.bindEventListener(e,"keydown",(e=>{const t=this._$window.getScrollY();switch(e.which){case 33:e.preventDefault(),this._$window.scrollTo(0,Math.max(t-120,0));break;case 34:e.preventDefault(),this._$window.scrollTo(0,Math.max(t+120,0));break;default:return}}))}}},n.GamblingWarning=V,n.JsonAdvertType=W,n.NativeAdvert=G,n.NativeAdvertWrapper=X,n.RepeatingAdvert=me,n.RepeatingAdvertEvents=ae,n.SklikHelper=class{static get $dependencies(){return["$Settings",l.MediaHelper]}constructor(e,t){this._settings=e,this._mediaHelper=t}canTransformData(e){return e&&(e.ads&&e.ads.length||this._containsIABdata(e))}isSDNUrl(e){const{customSdnUrlMatchers:t}=this._settings.plugin.cns.plugin.advert;let n=[M];Array.isArray(t)&&(n=[...n,...t]);for(let t=0;t<n.length;t++)if(n[t].test(e))return!0;return!1}transformData(e,t={},n=null){if(!this.canTransformData(e))return e;const i=Object.assign({},R,t),r=this._getSklikItems(e,i.maxAdvertItems);return Object.assign({},e,{ads:r.map((e=>{const t=Object.assign({},this._getDataFromItem(e,i));if(!n)return t;const r=Object.assign({},t);for(var s in n)if("string"==typeof n[s]){const e=n[s];r[s]=t[e],delete r[e]}else if("function"==typeof n[s]){const i=n[s];r[s]=i(t,e)}return r}))})}_addUrlParam(e,t){if(!e)return null;const n=e.includes("?")?"&":"?";return`${e}${n}${t}`}_assembleDrtgItems(e){const{ads:t}=e,n=t.find((e=>"SHOP"===e.adType));return t.filter((e=>e.adType===A)).map((e=>Object.assign({},n,e)))}_assembleIABItem(e){return Object.assign({},e.data.native,{adType:k})}_containsIABdata(e){return e.data&&e.data.native&&e.data.native.assets&&e.data.native.assets.length}_generateIABData(e){const{assets:t}=e,n=e.link&&e.link.url,i=this._getIABAssetById(t,1),r=this._getIABAssetById(t,2),s=this._getIABAssetById(t,11),o=s&&s.title&&s.title.text,a=this._getIABAssetById(t,12);return{clickUrl:n,adImageUrl:i&&i.img&&i.img.url,adSquareImageUrl:r&&r.img&&r.img.url,adType:e.adType,shortHeadline:o,longHeadline:o,description:a&&a.data&&a.data.value,eventTrackers:{impress:e.imptrackers}}}_generateImageSizes(e,t=0,n=1/0){let i=[];return i=(Array.isArray(x[e])?x[e]:[]).filter((e=>e.width>=t&&e.width<=n)).sort(((e,t)=>e.width-t.width)),i=i.map((t=>{const n={...t};return e===A&&(n.fill=n.fill?n.fill:"fff"),this._mediaHelper.isWebPSupported()?n.filetypeFilter="webp,75":n.filetypeFilter="string"==typeof n.filetypeFilter?n.filetypeFilter:"jpg,90",n})),i}_generateImageSrc(e,t){if(!e||"object"!=typeof t||!t.width)return e;t.height=t.height?t.height:"",t.fill=t.fill?t.fill:"";let n=`fl=res,${t.width},${t.height},1,${t.fill}`;return"string"==typeof t.filetypeFilter&&(n=`${n}|${t.filetypeFilter}`),this._addUrlParam(e,n)}_generateSrcset(e,t){if(Array.isArray(t))return t.map((t=>`${this._generateImageSrc(e,t)} ${t.width}w`)).join(", ")}_getDataFromItem(e,t={}){if(!e||!e.adType)return null;const{adType:n,clickUrl:i}=e,r=n===I?e.adImageUrl:e.imageUrl,{minImageWidth:s,maxImageWidth:o}=t;let a,l,c=[];return this.isSDNUrl(r)&&(c=this._generateImageSizes(n,s,o),l=c[c.length-1]),a=n===A?Object.assign({},e,{clickUrl:i,longHeadline:this._getTextPriceAndShop(e),adImageUrl:this._generateImageSrc(r,l),adImageSrcset:this._generateSrcset(r,c)}):n===I?Object.assign({},e,{adImageUrl:this._generateImageSrc(r,l),adImageSrcset:this._generateSrcset(r,c)}):n===k?this._generateIABData(e):e,a}_getIABAssetById(e,t){return e.find((e=>e.id===t))}_getSklikItems(e,t){let n;return n=this._shouldRenderDrtgAdvert(e)?this._assembleDrtgItems(e):this._shouldRenderIABAdvert(e)?[this._assembleIABItem(e)]:e.ads,n.slice(0,t||R.maxAdvertItems)}_getTextPriceAndShop(e){return e.price&&e.shopName?`${e.title||""} za ${e.price} na ${e.shopName}`:e.title||""}_shouldRenderDrtgAdvert(e){return e.ads.some((e=>e.adType===A))}_shouldRenderIABAdvert(e){return e&&this._containsIABdata(e)}},n.SspEvents=j,n.SspHelper=F,n.SspPageHandler=B,n.StaticAdvert=te,n.StickyAdvert=le,n.VideoNative=J,n.initServices=(e,t)=>{t.get("$ComponentUtils").register("oc","$oc","@cns/plugin-advert")},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{advert:{sdn:{d_25:{square_1x1:[{keepAspectRatio:1,width:152,height:152,color:"fff"},{keepAspectRatio:1,width:224,height:224,color:"fff"},{keepAspectRatio:1,width:350,height:350,color:"fff"},{keepAspectRatio:1,width:600,height:600,color:"fff"}],original:[{keepAspectRatio:1,width:152},{keepAspectRatio:1,width:220},{keepAspectRatio:1,width:350},{keepAspectRatio:1,width:600}]},d_49:{original:[{keepAspectRatio:1,width:128},{keepAspectRatio:1,width:256},{keepAspectRatio:1,width:384},{keepAspectRatio:1,width:768}]}},positions:[{type:"skyscraper",renderMobile:!0,renderDesktop:!0,adaptableHeight:!0,showLabel:!0,width:"advert.skyscraper.width",height:"advert.skyscraper.height"},{type:"skyscraper.static",renderMobile:!0,renderDesktop:!0,adaptableHeight:!0,showLabel:!0,width:"advert.skyscraperStatic.width",height:"advert.skyscraperStatic.height"},{type:"sponsor",renderMobile:!0,renderDesktop:!0,adaptableHeight:!0,showLabel:!0,width:"advert.sponsor.width",height:"advert.sponsor.height"},{type:"rectangle",renderMobile:!0,renderDesktop:!0,adaptableHeight:!0,showLabel:!0,width:"advert.rectangle.width",height:"advert.rectangle.height"},{type:"native",renderMobile:!0,renderDesktop:!0,width:"advert.native.width",height:"advert.native.height"},{type:"native.video",renderMobile:!0,renderDesktop:!0,videoNative:!0,width:"advert.native.width",height:"advert.native.height"},{type:"article.sklik",renderMobile:!0,renderDesktop:!1,autoSize:!0,showLabel:!0,width:"advert.articleSklik.width",height:"advert.articleSklik.height"},{type:"article.sklik.desktop",renderMobile:!1,renderDesktop:!0,autoSize:!0,showLabel:!0,width:"advert.articleSklikDesktop.width",height:"advert.articleSklikDesktop.height"},{type:"mobile.square",renderMobile:!0,renderDesktop:!1,adaptableHeight:!0,showLabel:!0,width:"advert.mobile.width",height:"advert.mobile.height"},{type:"mobile.square.inscreen",renderMobile:!0,renderDesktop:!1,adaptableHeight:!0,inscreen:!0,showLabel:!0,width:"advert.mobile.width",height:"advert.mobile.height"},{type:"mobile.square.640",renderMobile:!0,renderDesktop:!1,adaptableHeight:!0,showLabel:!0,width:"advert.mobile.width",height:"advert.mobile.height640",placeholder:{width:"advert.mobile.width",height:"advert.mobile.height"}},{type:"mobile.leaderboard",renderMobile:!0,renderDesktop:!1,adaptableHeight:!1,width:"advert.leaderboardMobile.width",height:"advert.leaderboardMobile.height"},{type:"branding",renderMobile:!1,renderDesktop:!0,adaptableHeight:!0,width:"advert.branding.width",height:"advert.branding.height",placeholder:{width:"advert.branding.placeholder.width",height:"advert.branding.placeholder.height"}},{type:"leaderboard",renderMobile:!1,renderDesktop:!0,adaptableHeight:!0,width:"advert.branding.placeholder.width",height:"advert.branding.placeholder.height"}],useBrandingPlaceholder:!1}}}},ssp:{badge:!0}},dev:{plugin:{cns:{plugin:{advert:{customSdnUrlMatchers:[/.+advert.test.dszn.cz.*/]}}}}},regression:{ssp:{badge:!1}}}),n.layout=S},{"@cns/component-utils":4,"@cns/plugin-ab-testing":12,"@cns/plugin-adblock-tracker":14,"@cns/plugin-atoms":20,"@cns/plugin-report":50,"@cns/plugin-section":53,"@cns/utils":78,"@ima/core":81,"@ima/plugin-analytic":92,"@ima/plugin-less-constants/media":102,"@ima/plugin-less-constants/units":103,"@ima/plugin-logger":110,"@ima/plugin-script-loader":135,"@ima/plugin-select":139,"@ima/plugin-useragent":155,"hoist-non-react-statics":168,"prop-types":232,react:242}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-analytic-dot"),r=e("@ima/plugin-analytic-gemius"),s=e("@ima/plugin-analytic-google"),o=e("@ima/plugin-loading-manager"),a=e("@ima/plugin-useragent"),l=e("@cns/plugin-report"),c=e("@ima/plugin-logger");class u{static get $dependencies(){return["$CookieStorage"]}constructor(e){this._cookieStorage=e}getPurposeConsents(){const e={};return"1"===this._cookieStorage.get("szncmpone")&&(e[1]=!0),e}}class d extends i.DotAnalytic{constructor(e,t,n,i,r,...s){super(...s),this._dotArticleHelper=e,this._lightboxHelper=t,this._sectionHelper=n,this._videoCollector=i,this._cnsConfig=r}_getPageViewData(e){const t=Object.assign({},e);if(t.params=Object.assign({},t.params),t.params.pageUrl=this._window.getDomain()+t.path,e.route.getName()===this._cnsConfig.appRouteNames.DETAIL&&this._dotArticleHelper&&this._lightboxHelper&&this._videoCollector&&this._sectionHelper){const e=t.response.pageState||{},{article:n}=e;if(n){const i=this._dotArticleHelper.getArticleParams(e,this._lightboxHelper,this._videoCollector)||{};Array.isArray(n.sections)&&(i.articleAllSections=n.sections.map((e=>this._sectionHelper.getSectionName(e)))),i&&Object.assign(t.params,i)}}return super._getPageViewData(t)}}class p extends r.GemiusAnalytic{constructor(e,t,...n){super(...n),this._sectionHelper=e,this._cnsConfig=t}_getPageViewData(e){c.throwIf(!e||"object"!=typeof e,new TypeError("Argument pageData must be an object.")),c.throwIf(!e.response||"object"!=typeof e.response,new TypeError("Argument pageData.response must be an object."));const{response:t}=e;c.throwIf(!t.pageState||"object"!=typeof t.pageState,new TypeError("Argument pageData.response.pageState must be an object."));const n=this._cnsConfig.appRouteNames,{pageState:i}=t,r=e.route.getName();let s={};if([n.DETAIL,n.SECTION].includes(r)&&this._sectionHelper){let e=null;if(r===n.DETAIL&&i&&i.article&&i.article.sections&&i.article.sections.length?e=this._sectionHelper.getPrimarySection(i.article):r===n.SECTION&&i.section&&(e=i.section),e){let{gemiusCode:t,gemiusExtraParameter:n}=e;t&&t.length&&(s.identifier=t),n&&n.length&&(s.parameters=`gA=${n}`)}}else if(i.landingPage&&i.section){const{gemiusCode:e,gemiusExtraParameter:t}=i.section;s={identifier:e||void 0,parameters:t?`gA=${t}`:void 0}}let o=this._config.routes[r]||this._config.routes[this._cnsConfig.gemius.defaultRoute];return o&&(s.identifier||(s.identifier=o.identifier),s.parameters||(s.parameters=o.parameters)),s}}class m extends s.GoogleAnalytic{constructor(e,...t){super(...t),this._sectionHelper=e}_getPageViewData(e){const t=super._getPageViewData(e);if(e&&e.response&&e.response.pageState&&this._sectionHelper){const{article:n,post:i}=e.response.pageState,{params:r}=e;let s=null;if(r.article&&n?s=n:r.post&&i&&(s=i),s){const e=this._sectionHelper.getPrimarySection(s),n=(this._sectionHelper.getParentSectionsTree(e)||[]).map((e=>e.slug)).join(" > ");t.dimension1=n}}return t}}const h=["$Settings.plugin.cns.plugin.analytics",...i.defaultDependencies],g=["$Settings.plugin.cns.plugin.analytics",...r.GemiusAnalytic.$dependencies],f=[...s.GoogleAnalytic.$dependencies];n.$registerImaPlugin=()=>{},n.Analytics=class{static get $dependencies(){return[u,"$Dispatcher","DotAnalytic","$Env","GemiusAnalytic","GoogleAnalytic",l.ReportService,"$Settings.plugin.cns.plugin.analytics",a.UserAgent,"$Window"]}constructor(e,t,n,i,r,s,o,a,l,c){this._cmpHelper=e,this._dispatcher=t,this._enviroment=i,this._dotAnalytic=n,this._gemiusAnalytic=r,this._googleAnalytic=s,this._reportService=o,this._config=a,this._userAgent=l,this._window=c}init(){this._dispatcher.listen(o.StageEvents.CRITICAL,(e=>{e.addTask((()=>this._initCriticalStageOnce()))})),this._dispatcher.listen(o.StageEvents.LOW,(e=>{e.addTask((()=>this._initLowStageOnce())),e.addTask((()=>this._initLowStage(e.payload)))}))}hitPageView(e){this._gemiusAnalytic.hitPageView(e),this._dotAnalytic.hitPageView(e),this._googleAnalytic.hitPageView(e)}hitPageViewOrError(e){if(this._config.hitPageViewEnvs.includes(this._enviroment))if(e&&e.response&&e.response.status>=200&&e.response.status<300)this.hitPageView(e);else if(e&&e.params&&e.params.error){let{error:t}=e.params,{status:n}=e.response;this._reportService.handleClientError(t,!1),this._dotAnalytic.hitError({message:t.message,name:t.name,status:n});let i=t?t.toString():void 0;this._googleAnalytic.hit({category:"error",action:"render",label:i,value:n});let r=this._userAgent.getOSFamily(),s=this._userAgent.getName(),o=this._userAgent.getVersion();this._googleAnalytic.hit({category:"error",action:"userAgent",label:`OS: ${r}, Browser: ${s}, version: ${o}`})}}_initCriticalStageOnce(){return o.once((()=>{this._window.isClient()&&(this._dotAnalytic.init(),this._dotAnalytic.load(),this._gemiusAnalytic.init(),this._googleAnalytic.init({purposeConsents:this._cmpHelper.getPurposeConsents()}))}))()}_initLowStage(e){this._window.isClient()&&this._config.hitsPageViews&&this.hitPageViewOrError(e)}_initLowStageOnce(){return o.once((()=>{this._window.isClient()&&(this._gemiusAnalytic.load(),this._googleAnalytic.load())}))()}},n.CmpHelper=u,n.DotAnalytic=d,n.GemiusAnalytic=p,n.GoogleAnalytic=m,n.dotAnalyticBaseDependencies=h,n.gemiusAnalyticBaseDependencies=g,n.googleAnalyticBaseDependencies=f,n.initBind=()=>{},n.initServices=(e,t)=>{t.get("Analytics").init()},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{analytics:{appRouteNames:{DETAIL:"detail",SECTION:"section"},gemius:{defaultRoute:"defaultRoute"},hitPageViewEnvs:["prod","test"],hitsPageViews:!0}}}}}})},{"@cns/plugin-report":50,"@ima/plugin-analytic-dot":85,"@ima/plugin-analytic-gemius":87,"@ima/plugin-analytic-google":89,"@ima/plugin-loading-manager":106,"@ima/plugin-logger":110,"@ima/plugin-useragent":155}],17:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":16,dup:8}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@cns/rest-api-client"),r=e("@ima/core"),s=e("@ima/plugin-local-storage"),o=e("@cns/plugin-user"),a=e("react"),l=e("prop-types"),c=e("@ima/plugin-logger"),u=e("@cns/plugin-atoms"),d=e("@ima/helpers"),p=e("@cns/component-utils"),m=e("@cns/plugin-player"),h=e("@cns/plugin-article"),g=e("@ima/plugin-select"),f=e("@cns/plugin-report");function _(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var y=_(a),b=_(l),v=_(g);class C extends i.AbstractEntity{static get dataFieldMapping(){return{}}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"pollvote"}constructor(e){super(e)}$deserialize(e){let t=Object.assign({},e);return Object.prototype.hasOwnProperty.call(e,"id")&&(t.answerId=e.id,delete t.id),Object.prototype.hasOwnProperty.call(e,"_headers")&&Object.prototype.hasOwnProperty.call(e._headers,"x-poll-token")&&(t.alphabet=e._headers["x-poll-token"]),t}$serialize(e=this){let t=Object.assign({},e);return Object.prototype.hasOwnProperty.call(e,"answerId")&&(t.id=e.answerId,delete t.answerId),Object.prototype.hasOwnProperty.call(e,"alphabet")&&delete t.alphabet,t}}class w extends i.AbstractService{static get $dependencies(){return[...i.defaultDependencies]}static get entityClass(){return r.ns.get("plugin.articleMolecules.PollVoteEntity")}constructor(...e){super(...e)}post(e,t){return this.create({},{ItemId:t,AnswerId:e},{withCredentials:!0})}}const E=Object.freeze({AUTOLOGIN_DONE:"ima.plugin.login.autologinDone",AUTOLOGIN_FAIL:"ima.plugin.login.autologinFail",AUTOLOGOUT_DONE:"ima.plugin.login.autologoutDone",BADGE:"ima.plugin.login.badge",FORGET:"ima.plugin.login.forget",LOGIN_CLOSE:"ima.plugin.login.loginClose",LOGIN_DONE:"ima.plugin.login.loginDone",LOGIN_READY:"ima.plugin.login.loginReady",LOGIN:"ima.plugin.login.login",LOGOUT:"ima.plugin.login.logout",OPEN_LOGIN:"ima.plugin.login.openLogin"});function S(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T(e,t){return e(t={exports:{}},t.exports),t.exports}var P=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.freeze({LOADED:"ima.plugin.script.loader.loaded"});t.default=n}));S(P);var x=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=class{static get $dependencies(){return[]}promisify(e,t,n=!1){return new Promise(((i,r)=>{function s(e){e instanceof Error?r(e):r(new Error(`Failed to load resource: ${t}`))}e.onload=i,e.onerror=s,n&&(e.onabort=()=>s(new Error(`Loading of a resource has been aborted: ${t}`)))}))}injectToPage(e){document.head.appendChild(e)}}}));S(x);var I=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ResourceLoader",{enumerable:!0,get:function(){return i.default}}),t.$registerImaPlugin=t.default=void 0;var n,i=(n=x)&&n.__esModule?n:{default:n};t.$registerImaPlugin=()=>{};var r=i.default;t.default=r}));S(I),I.$registerImaPlugin;var A=I,k=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=P)&&n.__esModule?n:{default:n};t.default=class{static get $dependencies(){return["$Window","$Dispatcher",A.ResourceLoader]}constructor(e,t,n){this._window=e,this._dispatcher=t,this._resourceLoader=n,this._loadedScripts={}}load(e,t){if(this._loadedScripts[e])return this._loadedScripts[e];let n=this._createScriptElement();return this._loadedScripts[e]=this._resourceLoader.promisify(n,t||e).then((()=>this._handleOnLoad(e))).catch((()=>this._handleOnError(e))),t?n.innerHTML=t:(n.async=!0,n.src=e),this._resourceLoader.injectToPage(n),t&&setTimeout((()=>n.onload()),0),this._loadedScripts[e]}_createScriptElement(){return document.createElement("script")}_handleOnLoad(e){let t={url:e};return this._dispatcher.fire(i.default.LOADED,t,!0),t}_handleOnError(e){let t=new Error(`The ${e} script failed to load.`),n={url:e,error:t};throw this._dispatcher.fire(i.default.LOADED,n,!0),t}}}));S(k);var R=T((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ScriptLoaderPlugin",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Events",{enumerable:!0,get:function(){return i.default}}),t.$registerImaPlugin=t.defaultDependencies=void 0;var n=r(k),i=r(P);function r(e){return e&&e.__esModule?e:{default:e}}let s=n.default.$dependencies;t.defaultDependencies=s,t.$registerImaPlugin=()=>{}}));S(R),R.$registerImaPlugin,R.defaultDependencies,R.ScriptLoaderPlugin,Object.freeze({AUTOLOGIN_DONE:"autologin-done",AUTOLOGIN_FAIL:"autologin-fail",AUTOLOGOUT_DONE:"autologout-done",BADGE:"badge",FORGET:"forget",LOGIN_CLOSE:"login-close",LOGIN_DONE:"login-done",LOGIN:"login",LOGOUT:"logout"});const M="cnsPollVoteAfterLogin",O=31536e3;class N extends r.AbstractExtension{static get $dependencies(){return[w,"$Dispatcher",s.LocalStorage,"LoginHelper"]}get _isLogin(){return this._loginHelper.login.current.state===o.LoginState.LOGIN}constructor(e,t,n,i){super(),this._pollVoteService=e,this._dispatcher=t,this._localStorage=n,this._loginHelper=i,this.onLogin=this._onLogin.bind(this)}getAllowedStateKeys(){return["votedPolls","newVotes"]}load(){return{}}activate(){this._dispatcher.listen(E.LOGIN,this.onLogin,this),this._prepareState()}deactivate(){this._dispatcher.unlisten(E.LOGIN,this.onLogin,this)}onVote({answerId:e,answerVotes:t,pollId:n}){this._isLogin?this._vote(e,t,n):(this._localStorage.set(M,JSON.stringify({answerId:e,answerVotes:t,pollId:n}),{expires:O}),this._loginHelper.openLogin())}_onLogin(){if(this._localStorage.has(M)){const{answerId:e,answerVotes:t,pollId:n}=JSON.parse(this._localStorage.get(M));this._vote(e,t,n)}}_prepareState(){const{votedPolls:e=[]}=this.getState();for(const t of this._localStorage.keys())t.indexOf("cnsPoll")>-1&&e.push(this._localStorage.get(t));this.setState({votedPolls:e})}_vote(e,t,n){const{votedPolls:i=[],newVotes:r={}}=this.getState(),s=[...i,n];let o=Object.assign({},r);o[n]={answerId:e,answerVotes:t+1},this._localStorage.set(`cnsPoll${n}`,n,{expires:O}),this._localStorage.has(M)&&this._localStorage.delete(M),this.setState({newVotes:o,votedPolls:s}),this._pollVoteService.post(e,n)}}function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D.apply(this,arguments)}b.default.arrayOf(b.default.shape({entity:b.default.shape({data:b.default.object.isRequired,type:b.default.string.isRequired}),length:b.default.number.isRequired,offset:b.default.number.isRequired}));const L={BOLD:"BOLD",ITALIC:"ITALIC",SUBSCRIPT:"SUBSCRIPT",SUPERSCRIPT:"SUPERSCRIPT",UNDERLINE:"UNDERLINE"};b.default.arrayOf(b.default.shape({length:b.default.number.isRequired,offset:b.default.number.isRequired,style:b.default.oneOf(Object.values(L)).isRequired}));class $ extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",entityRanges:[],inlineStyleRanges:[],text:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.atom.textDecorator.TextDecorator")}render(){const{text:e}=this.props,t=this._joinRanges();let n,i,r;return t.length&&(n=this._findTextPoints(t),i=this._separateTextInPoints(e,n),r=this._generateForest(n,t,i)),y.default.createElement("span",{className:this.cssClasses("atm-text-decorator",!0)},r?this._renderForest(r):e)}_renderEntity(e,t){const{_children:n,entity:i}=e||{},{data:s,type:o}=i||{},a=r.ns.get(`plugin.atoms.component.${o}`);return a?y.default.createElement(a,D({key:t},s),this._renderForest(n)):(c.warn(new Error(`An unknown entity type "${o}".`)),null)}_renderForest(e){return e&&e.length?e.map(((e,t)=>{const{entity:n,style:i,_text:r}=e;return n?this._renderEntity(e,t):i?this._renderStyle(e,t):r?y.default.createElement(y.default.Fragment,{key:t},r):(c.warn(new Error("The forest contains an invalid tree.")),null)})).filter((e=>e)):null}_renderStyle(e,t){const{_children:n,style:i}=e||{};let r="atm-text-decorator__style--";switch(i){case L.BOLD:r+="bold";break;case L.ITALIC:r+="italic";break;case L.SUBSCRIPT:r+="subscript";break;case L.SUPERSCRIPT:r+="superscript";break;case L.UNDERLINE:r+="underline";break;default:r="",c.warn(new Error(`An unknown style "${i}".`))}return y.default.createElement("span",{className:this.cssClasses(r),key:t},this._renderForest(n))}_findTextPoints(e){return Array.from((e||[]).reduce(((e,t)=>{const{length:n,offset:i}=t||{};return Number.isSafeInteger(n)&&Number.isSafeInteger(i)&&(e.set(i,1),e.set(i+n,1)),e}),new Map([[0,1]])).keys()).sort(((e,t)=>e-t))}_generateForest(e,t,n){const i=t.sort(((e,t)=>t.length-e.length)),r={};return e.reduce(((t,s)=>{const o=i.filter((e=>e.offset===s));let a=r[s]||t;return o.forEach((t=>{const n=[],i=Object.assign({},t,{_children:n});e.some((e=>{const{length:i,offset:s}=t;return e>=s&&e<s+i?(r[e]=n,!1):e>=s+i||void 0})),a.push(i),a=n})),n[s]&&a.push({_text:n[s]}),t}),[])}_joinRanges(){const{entityRanges:e,inlineStyleRanges:t}=this.props;return(e||[]).concat(t||[])}_separateTextInPoints(e,t){return e&&e.length?(t||[]).reduce(((t,n,i,r)=>{let s;return s=i+1<r.length?e.slice(n,r[i+1]):e.slice(n),s&&(t[n]=s),t}),{}):{}}}const H=["text"],j=["noLightbox","renderLinks","showAuthorInCaption","showCaptionViaMediaItem"],U=Object.keys(u.VideoContextType);class z extends p.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{},settings:{}}}static defaultSelector(e){return p.defaultSelector(e,(t=>{const{logics:n}=e;return{...t,authorForCaption:n.getAuthorForCaption(t),dotParams:n.getDOTParams(t),MediaItem:n.getMediaItemComponent(),mediaItemOnShowLightbox:n.getMediaItemOnShowLightbox(t),mediaItemProperties:n.getMediaItemProperties(t),mediaItemSettings:n.getMediaItemSettings(t),videoContext:n.getVideoContext(t)}}))}static logicFactory(){return{getAuthorForCaption:F,getAuthorPrefix:B,getDOTParams:V,getMediaItemComponent:W,getMediaItemOnShowLightbox:q,getMediaItemProperties:G,getMediaItemSettings:K,getVideoContext:Z}}constructor(e,t){super(e,t),this.state={hideCaption:!1},this._hideCaptionBound=this._hideCaption.bind(this),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.figure.Figure")}componentDidMount(){this.listen(this,m.PlayerEvent.CONTENT_SWITCH,this._hideCaptionBound)}componentWillUnmount(){this.unlisten(this,m.PlayerEvent.CONTENT_SWITCH,this._hideCaptionBound)}render(){const e=this.getProps(),{MediaItem:t,properties:n}=e,{media:i,text:r}=n;return i?y.default.createElement(u.VideoContext.Provider,{value:e.videoContext},y.default.createElement("figure",D({"aria-label":e.mediaItemOnShowLightbox&&r?`Galerie ${r}`:null,className:this.cssClasses("mol-figure",!0)},e.dotParams),y.default.createElement(t,{className:this.cssClasses("mol-figure__media"),onShowLightbox:e.mediaItemOnShowLightbox,properties:e.mediaItemProperties,settings:e.mediaItemSettings}),!e.settings.showCaptionViaMediaItem&&this._renderCaption(r,e.authorForCaption))):null}_renderCaption(e,t=null){return e||t?y.default.createElement("figcaption",{className:this.cssClasses({"mol-figure__caption":!0,"mol-figure__caption--hidden":this.state.hideCaption})},y.default.createElement(u.Paragraph,null,e&&y.default.createElement("span",{className:this.cssClasses("mol-figure__caption-text")},e),t&&y.default.createElement("span",{className:this.cssClasses("mol-figure__caption-author")},t))):null}_hideCaption(e){e.stopPropagation(),this.state.hideCaption||this.setState({hideCaption:!0})}}function F(e,t){const{media:n}=t.properties,{showAuthorInCaption:i,renderLinks:r}=t.settings,{MediaHelper:s}=e.$Utils;return n&&i?r?s.renderCaptionWithLinks(n,B(e,n)):s.getCaption(n,B(e,n)):null}function B(e,t){const{MediaHelper:n}=e.$Utils;return n.constructor.isVideo(t)?n.VIDEO_CAPTION_PREFIX:n.IMAGE_CAPTION_PREFIX}function V(e,t){const{properties:n}=t;let i;if(!n.media)return null;switch(n.media._cls){case u.MediaItemTypes.VIDEO:i="video";break;case u.MediaItemTypes.EMBED:i="embed";break;case u.MediaItemTypes.LIVE:i="live";break;default:i="foto"}return{"data-dot":"mol-figure","data-dot-data":e.$Utils.DotAnalytic.getDOTDataForElement({mediaItemType:i})}}function W(){return r.ns.get("plugin.atoms.component.atom.mediaItem.MediaItem")}function q(e,t){const{properties:n,settings:i}=t;return n.media?n.media._cls!==u.MediaItemTypes.IMAGE||i.noLightbox?null:(t,n,i)=>{t.preventDefault(),e.$Utils.LightboxHelper.show(n,i)}:null}function G(e,t){const n=d.clone(t.properties),{media:i,text:r}=n;if(!i)return null;if(r&&(i.text=r),t.settings.showCaptionViaMediaItem){n.caption=r||"";const i=F(e,t);i&&(n.caption+=(n.caption?"\n":"")+i)}return H.forEach((e=>{e in n&&delete n[e]})),n}function K(e,t){const n=d.clone(t.settings);return[...j,...U].forEach((e=>{e in n&&delete n[e]})),n}function Z(e,t){const{settings:n}=t;return U.reduce(((e,t)=>(t in n&&(e.settings[t]=n[t]),e)),{settings:{}})}class Q extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{href:"",media:null,target:"_blank"},settings:{trim:""}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.banner.Banner")}render(){const{properties:e,settings:t}=this.props,{href:n,media:i}=e,r=e.target||"_blank";if(!i||i._cls!==u.MediaItemTypes.IMAGE||!n)return null;const s=t.trim||u.MediaTrims.ORIGINAL,o=this._responsifyImage(i,s);return y.default.createElement("div",{className:this.cssClasses("mol-banner"),"data-dot":"mol-banner"},y.default.createElement(u.Link,{href:n,target:r},y.default.createElement(z,{properties:{media:o},settings:Object.assign({},t,{trim:s,noLightbox:!0})})))}_responsifyImage(e,t=u.MediaTrims.ORIGINAL){return e&&e.trims?this.utils.MediaHelper.responsifyImage(e,t,[u.MediaSizes.WIDTH240,u.MediaSizes.WIDTH480,u.MediaSizes.WIDTH600,u.MediaSizes.WIDTH1200,u.MediaSizes.WIDTH2560],[{mediaCondition:"(min-width: 851px)",width:"700px"},{width:"100vw"}]):e}}const Y=/televizeseznam\.((dev|test)\.dszn\.)?cz/,X=/stream\.((dev|test)\.dszn\.)?cz/;class J extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{height:300,url:"",width:400},settings:{autoPlay:!1}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.embed.Embed"),this._isTvSeznamOrStreamPodcastEmbed=!1,this._parsedUrl={}}render(){const{properties:e}=this.props,{height:t,url:n,width:i}=e;if(!n||"string"!=typeof n)return null;this._parsedUrl=this.utils.LinkHelper.parseUrl(n),this._isTvSeznamOrStreamPodcastEmbed=this._isTvSeznamOrStreamPodcast(this._parsedUrl);const{isHeightFixed:r,pixelHeight:s,pixelWidth:o}=this._parsePixelDimensions(i,t);return s&&o?y.default.createElement("div",{className:this.cssClasses({"mol-embed":!0,"mol-embed--fixed-height":r},!0),"data-dot":"mol-embed"},y.default.createElement(u.Iframe,{allowFullScreen:this._shouldAllowFullScreen(this._parsedUrl),className:this.cssClasses("mol-embed__iframe"),height:s,layout:r?null:"responsive",sandbox:"allow-same-origin allow-scripts allow-popups",src:this._getEmbedsIframeSrc(n),width:o})):null}shouldHaveFixedHeight(e){const{hostname:t,pathname:n}=e;return"string"==typeof t&&"string"==typeof n&&(t.includes("knightlab.com")&&(n.includes("/storyline/")||n.includes("/storymapjs/")||n.includes("/timeline3/"))||this._isTvSeznamOrStreamPodcastEmbed)}_getEmbedsIframeSrc(e){const{settings:t}=this.props;if(this._isTvSeznamOrStreamPodcastEmbed){const{articleMolecules:t}=this.utils.$Settings.plugin.cns.plugin||{},{podcastPbColor:n}=t.embed||{};if("string"==typeof n)return this.utils.LinkHelper.concatQuery(e,{pbcolor:n})}return t.autoPlay&&this._isTvSeznamOrStreamEmbed(this._parsedUrl.hostname)&&!this._isTvSeznamOrStreamPodcastEmbed?this.utils.LinkHelper.concatQuery(e,{autoplay:"muted"}):this._isTwitchEmbed(this._parsedUrl.hostname)?this.utils.LinkHelper.concatQuery(e,{parent:this.utils.$Router.getHost()}):e}_isTvSeznamOrStreamEmbed(e){return"string"==typeof e&&(Y.test(e)||X.test(e))}_isTvSeznamOrStreamPodcast(e){const{hostname:t,pathname:n,search:i}=e;return"string"==typeof t&&"string"==typeof n&&"string"==typeof i&&this._isTvSeznamOrStreamEmbed(t)&&n.includes("/embed/")&&i.includes("audio=1")}_isTwitchEmbed(e){return e.includes("player.twitch.tv")}_isYouTubeEmbed(e){const{hostname:t,pathname:n}=e;return"string"==typeof t&&"string"==typeof n&&t.includes("youtube.com")&&n.includes("/embed/")}_parsePixelDimension(e,t){const n=String(e).match(/(\d*)(?:\.\d+)?(\D*)/);let i;return"px"!==n[2]&&n[2]?"%"===n[2]?i=Number(n[1])/100*t:(c.error(new Error(`Unknown unit "${n[2]}".`)),i=0):i=Number(n[1]),i}_parsePixelDimensions(e,t){const n=this.shouldHaveFixedHeight(this._parsedUrl),i=this.utils.$Settings.layout.content.width.valueOf();return{pixelWidth:n?i:this._parsePixelDimension(e,i),pixelHeight:this._parsePixelDimension(t,i),isHeightFixed:n}}_shouldAllowFullScreen(e){return!!(this._isYouTubeEmbed(e)||this._isTwitchEmbed(e.hostname)||this._isTvSeznamOrStreamEmbed(e.hostname))}}class ee extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",extendedPadding:300,html:null,load:null}}constructor(e,t){super(e,t),this._registeredVisibilityId=null,this._rootRef=y.default.createRef()}componentDidMount(){this._registerVisibilityCheck()}shouldComponentUpdate(){return!1}componentWillUnmount(){this._unregisterVisibilityCheck()}render(){const{html:e}=this.props;return e?y.default.createElement("div",{ref:this._rootRef,className:this.cssClasses("",!0),dangerouslySetInnerHTML:{__html:e}}):(c.warn("SdkEmbed - there is no html to render."),null)}_onVisibilityWriter(e){e>0&&(this._unregisterVisibilityCheck(),this._load())}_load(){const{load:e}=this.props,t=this._rootRef.current;e||c.warn("SdkEmbed - load prop is not defined."),t||c.warn("SdkEmbed - rootElement was not found."),e(t)}_registerVisibilityCheck(){const{extendedPadding:e}=this.props;!this._registeredVisibilityId&&this._rootRef.current&&(this._registeredVisibilityId=this.utils.$UIComponentHelper.visibility.register(this.utils.$UIComponentHelper.getVisibilityReader(this._rootRef.current,{extendedPadding:e}),this.utils.$UIComponentHelper.wrapVisibilityWriter((e=>this._onVisibilityWriter(e)))))}_unregisterVisibilityCheck(){this._registeredVisibilityId&&this.utils.$UIComponentHelper.visibility.unregister(this._registeredVisibilityId)}}const te="mol-facebook-post",ne="mol-facebook-post-loading",ie="mol-facebook-post-placeholder",re="mol-facebook-post--loading",se="mol-facebook-post--placeholder";class oe extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",settings:{},properties:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.facebook.post.Post")}render(){const{html:e,url:t}=this.props.properties||{};return e?t?this.utils.$UIComponentHelper.isAmp()?y.default.createElement("amp-facebook",{class:this.cssClasses({[te]:!0,[se]:!0,[ie]:!0}),"data-dot":"mol-facebook-post",width:528,height:300,layout:"responsive","data-href":t,dangerouslySetInnerHTML:{__html:e.replace(/<blockquote/i,"<blockquote placeholder")}}):y.default.createElement(ee,{className:this.cssClasses({[te]:!0,[se]:!0,[ie]:!0}),"data-dot":"mol-facebook-post",html:e,load:this._loadPost.bind(this)}):(c.warn("FacebookPost - property url is not defined."),null):(c.warn("FacebookPost - property html is not defined."),null)}_loadPost(e){e.classList.add(re),e.classList.add(ne),this.utils.FacebookHelper.init().then((()=>this.utils.FacebookHelper.parseElement(e).then((()=>{e.classList.remove(re),e.classList.remove(ne),e.classList.remove(se),e.classList.remove(ie)})))).catch(c.error)}}const ae=b.default.shape({text:b.default.string,media:u.MediaType}),le=b.default.arrayOf(ae),ce={className:b.default.string,properties:b.default.shape({collectionIndex:b.default.number,gallery:b.default.shape({mediaList:le.isRequired,title:b.default.string,uid:b.default.number})}),settings:b.default.shape({forceExpandedMode:b.default.bool})},ue={className:"",properties:{collectionIndex:0,gallery:{mediaList:[],uid:null}},settings:{forceExpandedMode:!1}};class de extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return ue}get _gallery(){return this.props.properties.gallery}get _isDirectlyExpanded(){return this._gallery&&this._gallery.mediaList&&this._gallery.mediaList.length<=this._totalPreviewImagesCount}get _isFullyExpanded(){return this.state.fullyExpanded}get _restingImagesCount(){return this._gallery.mediaList.length-this._totalPreviewImagesCount}get _restingImagesCounter(){return`+${this._restingImagesCount}`}get _totalPreviewImagesCount(){return 4}constructor(e,t){super(e,t);let n=this.utils.$UIComponentHelper.isAmp()||this.props.settings.forceExpandedMode||this.context.urlParams["mol-gallery--expanded"]||this._isDirectlyExpanded;this.state={fullyExpanded:n},this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.gallery.Gallery")}render(){return this._gallery&&this._gallery.mediaList&&this._gallery.mediaList.length?y.default.createElement("div",{className:this.cssClasses("mol-gallery",!0),"data-dot":"mol-gallery"},this._renderGallery()):null}_renderFullyExpandedGallery(){return this._createFullyExpandedImages()}_renderGallery(){return this._isFullyExpanded?this._renderFullyExpandedGallery():this._renderPreviewGallery()}_renderPreviewGallery(){return y.default.createElement("div",{className:this.cssClasses("mol-gallery__preview-container"),"data-dot":"mol-gallery__thumbs"},this._createMainPreviewImages(),this._createPreviewBar())}onExpandGallery(e){this.utils.ComponentHelper.shouldResultInNewWindow(e)||(e.preventDefault(),this.setState({fullyExpanded:!0}),this.utils.$Window.getWindow().dispatchEvent(this.utils.$Window.createCustomEvent("resize")))}onShowLightbox(e,t,n){e.preventDefault(),this.utils.LightboxHelper.show(t,n)}_createExpandedImage(e,t,n=!1){const i=this._getFigureComponent();let r="";return n&&(r=e.text),y.default.createElement("div",{key:t,className:this.cssClasses("mol-gallery__image-container")},y.default.createElement(i,{settings:{trim:u.MediaTrims.ORIGINAL,layout:"responsive"},properties:{media:e.media,text:r},className:this.cssClasses("mol-gallery__image")}))}_createFullyExpandedImages(){return y.default.createElement("div",{className:this.cssClasses("mol-gallery__images-container")},this._gallery.mediaList.map(((e,t)=>this._createExpandedImage(e,t,!0))))}_createLastPreviewImage(e,t){return y.default.createElement("div",{key:t,className:this.cssClasses("mol-gallery__preview-image mol-gallery__preview-image-last")},y.default.createElement("div",{className:this.cssClasses("mol-gallery__preview-background")},y.default.createElement("div",{key:t,className:this.cssClasses("mol-gallery__image-container")},y.default.createElement(u.MediaItem,{settings:{trim:u.MediaTrims.DEFAULT16x9,layout:"responsive"},properties:{media:e,caption:""},className:this.cssClasses("mol-gallery__image")}))),y.default.createElement("div",{className:this.cssClasses("mol-gallery__preview-foreground")},y.default.createElement(u.Link,{className:this.cssClasses("mol-gallery__image-link"),href:this.utils.LinkHelper.concatQuery(this.utils.$Router.getUrl(),{"mol-gallery--expanded":1}),onClick:e=>this.onExpandGallery(e),"data-dot":"mol-gallery__image-link"})),y.default.createElement("div",{className:this.cssClasses("mol-gallery__preview-rest-container")},y.default.createElement(u.H2,{className:this.cssClasses("mol-gallery__preview-rest")},this._restingImagesCounter),y.default.createElement("svg",{"aria-label":"Dal obrzky",className:this.cssClasses("mol-gallery__preview-rest-icon"),xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 51 37"},y.default.createElement("g",{fill:"#FFF"},y.default.createElement("path",{d:"M45 8L51 8 51 37 8 37 8 31 12 31 12 33 47 33 47 12 45 12 45 8Z"}),y.default.createElement("path",{d:"M0 0L43 0 43 29 0 29 0 0ZM4 4L4 25 39 25 39 4 4 4Z"})))))}_createMainPreviewImages(){return this._gallery.mediaList.slice(0,1).map(((e,t)=>y.default.createElement("div",{key:t,className:this.cssClasses("mol-gallery__preview-main-image")},this._createExpandedImage(e,t))))}_createPreviewBar(){return y.default.createElement("div",{className:this.cssClasses("mol-gallery__preview-bar")},this._gallery.mediaList.slice(1,this._totalPreviewImagesCount).map(((e,t)=>this._createPreviewBarImage(e.media,t))))}_createPreviewBarImage(e,t){const n=this._responsifyPreviewBarImage(e);return 2===t?this._createLastPreviewImage(n,t):y.default.createElement("div",{key:t,className:this.cssClasses("mol-gallery__preview-image")},this._createPreviewImage(n,t))}_createPreviewImage(e,t){return y.default.createElement("div",{key:t,className:this.cssClasses("mol-gallery__image-container")},y.default.createElement(u.MediaItem,{settings:{trim:u.MediaTrims.DEFAULT16x9,layout:"responsive"},properties:{media:e,caption:""},className:this.cssClasses("mol-gallery__image"),onShowLightbox:(e,t,n)=>this.onShowLightbox(e,t,n)}))}_getFigureComponent(){return r.ns.get("plugin.articleMolecules.component.molecule.figure.Figure")}_responsifyPreviewBarImage(e){if(!e)return null;let t=this.utils.MediaHelper.toMediaCondition(this.utils.$Settings.layout.mobile.toString()),n=this.utils.$Settings.layout.template.padding.mobile.toString();return this.utils.MediaHelper.responsifyImage(e,u.MediaTrims.DEFAULT16x9,[u.MediaSizes.WIDTH160,u.MediaSizes.WIDTH240,u.MediaSizes.WIDTH320,u.MediaSizes.WIDTH480],[{mediaCondition:t,width:`calc((100vw - 2 * ${n}) / 3)`},{width:"calc(600px / 3)"}])}}class pe extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{text:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.headline.H1")}render(){const{text:e}=this.props.properties;return y.default.createElement(u.Headline,{className:this.cssClasses("mol-headline",!0),type:"h1"},e)}}class me extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{text:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.headline.H2")}render(){const{text:e}=this.props.properties;return y.default.createElement(u.Headline,{className:this.cssClasses("mol-headline",!0),type:"h2"},e)}}class he extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{text:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.headline.H3")}render(){const{text:e}=this.props.properties;return y.default.createElement(u.Headline,{className:this.cssClasses("mol-headline mol-h3",!0),type:"h3"},e)}}class ge extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{text:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.headline.H4")}render(){const{text:e}=this.props.properties;return y.default.createElement(u.Headline,{className:this.cssClasses("mol-headline",!0),type:"h4"},e)}}class fe extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{text:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.headline.H5")}render(){const{text:e}=this.props.properties;return y.default.createElement(u.Headline,{className:this.cssClasses("mol-headline",!0),type:"h5"},e)}}class _e extends p.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return Object.assign({},h.RichContentSharedDefaultProps,{className:"",properties:{},settings:{}})}static get requiredProps(){return h.RichContentSharedRequiredProps}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.infobox.Infobox")}render(){let{settings:e}=this.props;const{collectionIndex:t=0,infobox:n}=this.props.properties,{content:i}=n||{},r=this._getRichContentComponent();if(!Array.isArray(i)||!i.length||!r)return null;let s={settings:e};return h.RichContentSharedRequiredProps.forEach((e=>{s[e]=this.props[e]})),y.default.createElement("div",{className:this.cssClasses("mol-infobox",!0),"data-dot":"mol-infobox"},this._renderTitle(),y.default.createElement(r,D({},s,{className:this.cssClasses("mol-rich-content--for-infobox"),content:i,properties:{collectionIndex:t}})))}_renderTitle(){const{infobox:e}=this.props.properties,{nameIsTitle:t,name:n}=e||{};return t?y.default.createElement(u.H3,{className:this.cssClasses("mol-infobox__title")},n):null}_getRichContentComponent(){return r.ns.get("plugin.article.component.molecule.richContent.RichContent")}}const ye="mol-instagram-post",be="mol-instagram-post--loading",ve="mol-instagram-post--placeholder";class Ce extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.instagram.post.Post")}render(){const{html:e,url:t}=this.props.properties||{};if(!e)return c.warn("InstagramPost - property html is not defined."),null;if(!t)return c.warn("InstagramPost - property url is not defined."),null;if(this.utils.$UIComponentHelper.isAmp()){const n=this.utils.InstagramHelper.extractShortcode(t);return n?y.default.createElement("amp-instagram",{class:this.cssClasses({[ye]:!0,[ve]:!0}),"data-dot":"mol-instagram-post",width:528,height:300,layout:"responsive","data-shortcode":n,dangerouslySetInnerHTML:{__html:e.replace(/<blockquote/i,"<blockquote placeholder")}}):(c.warn("InstagramPost - cannot extract shortcode from the URL."),null)}return y.default.createElement(ee,{className:this.cssClasses({[ye]:!0,[ve]:!0}),"data-dot":"mol-instagram-post",html:e,load:this._loadPost.bind(this)})}_loadPost(e){e.classList.add(be),this.utils.InstagramHelper.init().then((()=>this.utils.InstagramHelper.processEmbeds().then((()=>{e.classList.remove(be),e.classList.remove(ve)})))).catch(c.error)}}const we="ORDERED";b.default.oneOf([we,"UNORDERED"]);class Ee extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{items:[]},settings:{style:"UNORDERED"}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.list.List")}render(){const e=this._generateItemsTree();return y.default.createElement("div",{className:this.cssClasses("mol-list",!0),"data-dot":"mol-list"},this._renderList(e))}_renderList(e,t=null){const{style:n}=this.props.settings,i=n===we?u.Ol:u.Ul;return y.default.createElement(i,{key:t},e&&e.map(((e,t)=>{const{entityRanges:n,inlineStyleRanges:i,_subtree:r,text:s}=e;return r?this._renderList(r,t):y.default.createElement(u.Li,{key:t},y.default.createElement($,{entityRanges:n,inlineStyleRanges:i,text:s}))})))}_generateItemsTree(){const{items:e}=this.props.properties,t=[];let n=t,i=0;return e&&e.length?(e.forEach((e=>{let{depth:r}=e;r=Math.min(r,7);const s=r-i;if(s>0)for(let e=0;e<s;e++){const e=[];n.push({_subtree:e}),n=e}else if(s<0){n=t;for(let e=0;e<r;e++){const[e]=n.slice(-1);n=e._subtree}}n.push(e),i=r})),t):t}}class Se extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{entityRanges:[],inlineStyleRanges:[],text:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.paragraph.Paragraph")}render(){const{entityRanges:e,inlineStyleRanges:t,text:n}=this.props.properties,i=this._getTextDecoratorComponent();return y.default.createElement("div",{className:this.cssClasses("mol-paragraph",!0),"data-dot":"mol-paragraph"},y.default.createElement(u.Paragraph,null,y.default.createElement(i,{entityRanges:e,inlineStyleRanges:t,text:n})))}_getTextDecoratorComponent(){return r.ns.get("plugin.articleMolecules.component.atom.textDecorator.TextDecorator")}}class Te extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{applicationStartServerTimestamp:0,applicationStartServerTimezoneOffset:0,properties:{poll:{_id:"",question:"",answers:[],dateFrom:"",dateTo:""}},newVotes:{},votedPolls:[],settings:{}}}static get requiredProps(){return["applicationStartServerTimestamp","applicationStartServerTimezoneOffset"]}get _isVoted(){const{votedPolls:e,properties:t}=this.props;return!!e.find((e=>e===t.poll._id))}constructor(e,t){super(e,t),this.props.properties.poll&&this.props.properties.poll.answers&&(this.state={answers:this.props.properties.poll.answers}),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.poll.Poll")}static getDerivedStateFromProps(e,t){const n=e.properties.poll._id,{newVotes:i}=e,{answers:r}=t,s=r.slice();if(i[n]){const e=s.find((e=>e.id===i[n].answerId&&e.votes<i[n].answerVotes));e&&e.votes++}return{answers:s}}render(){let{poll:e}=this.props.properties;e=Object.assign({},Te.defaultProps.properties.poll,e);let t=this._getVotesCount(this.state.answers),n=!1,i=!1;return this._hasStarted(e)?(this._hasExpired(e)&&(n=!0),(this._isVoted||n)&&(i=!0),y.default.createElement("div",{className:this.cssClasses({"mol-poll":!0,"mol-poll--disabled":i},!0),"data-dot":"mol-poll"},this._renderQuestion(e.question),this._renderAnswers(this.state.answers,t,i),this._renderVotesCount(t,n))):null}_renderAnswer(e,t,n){return y.default.createElement("div",{className:this.cssClasses({"mol-poll__answer":!0}),onClick:n?null:()=>this._onAnswerClicked(e.id,e.votes),key:t},y.default.createElement("div",{className:this.cssClasses("mol-poll__answer-text")},e.answer),y.default.createElement("div",{className:this.cssClasses("mol-poll__answer-result")},y.default.createElement("div",{className:this.cssClasses("mol-poll__progress-bar")},y.default.createElement("div",{className:this.cssClasses("mol-poll__progress-bar-container")},this._renderProgressBar(e.percentage))),y.default.createElement("div",{className:this.cssClasses("mol-poll__answer-percent")},`${Number(e.percentage).toLocaleString("cs")} %`)))}_renderAnswers(e,t,n){if(!e)return null;let i,r=0;return y.default.createElement("div",{className:this.cssClasses("mol-poll__answers")},e.map(((s,o)=>(o+1===e.length&&r&&s.votes?(i=100-r,i=Math.round(10*i)/10):i=this._getPercentageFromAllVotes(t,s.votes),s.percentage=i,r+=i,this._renderAnswer(s,o,n)))))}_renderProgressBar(e){let t=this._getPercentBlockCounts(e),n=[],i=0,r=["mol-poll__progress-bar-block mol-poll__progress-bar-hundred","mol-poll__progress-bar-block mol-poll__progress-bar-thirty","mol-poll__progress-bar-block mol-poll__progress-bar-ten","mol-poll__progress-bar-block mol-poll__progress-bar-five","mol-poll__progress-bar-block mol-poll__progress-bar-one","mol-poll__progress-bar-block mol-poll__progress-bar-point-three","mol-poll__progress-bar-block mol-poll__progress-bar-point-one"];for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)){let s=t[e];for(let o=0;o<s;o++){let s=Object.keys(t).indexOf(e);r[s]&&n.push(y.default.createElement("div",{className:this.cssClasses(r[s]),key:i++}))}}return n}_renderQuestion(e){return y.default.createElement("div",{className:this.cssClasses("mol-poll__question")},e)}_renderVotesCount(e,t){let n="";return t&&(n="HLASOVN SKONILO: "),y.default.createElement("div",{className:this.cssClasses("mol-poll__votes-count")},`${n}Celkem\n\t\t\t\t${this.localize("poll.voted",{COUNT:e})}\n\t\t\t\t${e}\n\t\t\t\t${this.localize("poll.reader",{COUNT:e})}.`)}_onAnswerClicked(e,t){this.fire("vote",{answerId:e,answerVotes:t,pollId:this.props.properties.poll._id})}_getPercentageFromAllVotes(e,t){if(t){let n=t/e*100;return Math.round(10*n)/10}return 0}_getPercentBlockCounts(e){let t=0,n=0,i=0,r=0,s=0,o=0,a=0;return t=Math.floor(e/100),e-=100*t,t||(n=Math.floor(e/30),e-=30*n,i=Math.floor(e/10),e-=10*i,r=Math.floor(e/5),e-=5*r,s=Math.floor(e/1),e-=s,o=Math.floor(e/.3),e-=.3*o,a=Math.floor(e/.1),e-=.1*a),{hundredPercentBlocksCount:t,thirtyPercentBlocksCount:n,tenPercentBlocksCount:i,fivePercentBlocksCount:r,onePercentBlocksCount:s,pointThreePercentBlocksCount:o,pointOnePercentBlocksCount:a}}_getVotesCount(e){return e?e.reduce(((e,t)=>e+t.votes),0):0}_hasExpired(e){const{applicationStartServerTimestamp:t,applicationStartServerTimezoneOffset:n}=this.props,{dateTo:i}=e;if(i){const e=this.utils.ServerDateHelper.convertBEDateStringToTimestamp(i,n);return!this.utils.ServerDateHelper.isValidTimestamp(e)||!this.utils.ServerDateHelper.isValidTimestamp(t)||t>=e}return!1}_hasStarted(e){const{applicationStartServerTimestamp:t,applicationStartServerTimezoneOffset:n}=this.props,{dateFrom:i}=e;if(i){const e=this.utils.ServerDateHelper.convertBEDateStringToTimestamp(i,n);return!(!this.utils.ServerDateHelper.isValidTimestamp(e)||!this.utils.ServerDateHelper.isValidTimestamp(t))&&t>=e}return!0}}const Pe=v.default((e=>({newVotes:e.newVotes||{},votedPolls:e.votedPolls||[]})))(Te);g.hoistNonReactStatic(Pe,Te);class xe extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{properties:{author:"",cite:"",date:null},className:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.quote.Quote")}render(){const{author:e,cite:t,date:n}=this.props.properties;return y.default.createElement("div",{className:this.cssClasses("mol-quote",!0),"data-dot":"mol-quote"},y.default.createElement("blockquote",{className:this.cssClasses("mol-quote__quote")},t),y.default.createElement("footer",{className:this.cssClasses("mol-quote__footer")},!!e&&y.default.createElement("div",{className:this.cssClasses("mol-quote__author")},e),this._renderDate(n)))}_renderDate(e){return e?y.default.createElement(u.FormattedDate,{date:i.dateMapper.deserialize(e),dateOnly:!0,className:this.cssClasses("mol-quote__date")}):null}}class Ie extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{staticContent:{_id:"",cssMediaQuery:""}},settings:{}}}get className(){return`_${this.staticContentId}`}get cssText(){const{staticContent:e}=this.props.properties,{cssMediaQuery:t}=e;return t?`__CLASS__ .${this.utils.$CssClasses("atm-sizer")} { display: none; } ${t}`.replace(new RegExp("__CLASS__","g"),`.${this.className}`):null}get staticContentId(){return this.props.properties.staticContent._id}get staticContentUrl(){const{$Router:e,$Settings:t}=this.utils;return`${t.plugin.cns.plugin.articleMolecules.staticContent.url}${t.plugin.cns.plugin.service.serviceSlug}/${this.staticContentId}?parentUrl=${encodeURIComponent(e.getUrl())}`}constructor(e,t){super(e,t),this._staticContentContainer=y.default.createRef(),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.staticContent.StaticContent"),this.utils.CssRenderingHelper.registerInlineCss("plugin.articleMolecules.component.molecule.staticContent.StaticContent",this.cssText),this._errorReportCount=0}componentDidMount(){const{$Window:e}=this.utils;e.bindEventListener(e.getWindow(),"message",this)}componentWillUnmount(){const{$Window:e}=this.utils;let t=document.getElementById("main-html");t&&(t.className=""),e.unbindEventListener(e.getWindow(),"message",this)}render(){return this.utils.$UIComponentHelper.isAmp()?this._renderAmp():y.default.createElement("div",{className:`${this.cssClasses("mol-static-content")} ${this.className}`,"data-dot":"mol-static-content",ref:this._staticContentContainer},this.cssText?y.default.createElement("style",{key:"inlineStyle",dangerouslySetInnerHTML:{__html:this.cssText}}):null,y.default.createElement(u.Iframe,{className:this.cssClasses("mol-static-content__iframe-container"),key:"staticContent",src:this.staticContentUrl,scrolling:"no",layout:"responsive",allowFullScreen:!0,sandbox:null,"data-e2e":"static-content"}))}_renderAmp(){const e=this.context.urlParams.layoutId;return y.default.createElement(u.Iframe,{className:`${this.cssClasses({"amp-iframe-app":this.context.urlParams.layoutId},!0)} ${this.className}`,"data-id":this.staticContentId,src:`${this.staticContentUrl}${e?"":"&isAmp=true"}`,width:1e3,height:100,layout:"responsive",allowFullScreen:!0,resizable:!0,sandbox:"allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-popups allow-popups-to-escape-sandbox"},y.default.createElement("div",{overflow:""},"Zobrazit vce"),y.default.createElement("div",{placeholder:""}))}handleEvent(e){const{data:t,type:n}=e,{current:i}=this._staticContentContainer;"message"===n&&t.sentinel===this.staticContentId&&("RESIZE"===t.type&&i&&(i.style.height=t.payload.height+"px"),"FULLSCREEN_MODE"===t.type&&t.payload.activate&&this._hideWebSiteScrollBars(),"SCROLL_TO"===t.type&&this.utils.$Window.scrollTo(t.payload.x,t.payload.y),"link_redirect_SYN"===t.type&&this._sendMessageToStaticContent("link_redirect_ACK"),"REDIRECT"===t.type&&this._processRouterRedirect(t.url),"ERROR"===t.type&&this._processErrorMessage(t.error))}_hideWebSiteScrollBars(){document.getElementById("main-html").className=this.utils.$CssClasses("hide-scroll-bars")}_processErrorMessage(e){const{ReportService:t}=this.utils;if(e&&this._errorReportCount<2&&t){this._errorReportCount+=1;let{name:n,message:i,stack:r}=e;r=JSON.stringify(r),t.report(f.ReportTypes.ERROR,{name:n,message:i,stack:r,url:this.staticContentUrl})}}_processRouterRedirect(e){e&&this.utils.$Router.redirect(e)}_sendMessageToStaticContent(e,t={}){if(!this._staticContentContainer.current)return;const n=this._staticContentContainer.current.querySelector("iframe");n&&n.contentWindow&&this.staticContentId&&n.contentWindow.postMessage({sentinel:this.staticContentId,type:e,data:t},"*")}}const Ae="BOLD",ke="ITALIC",Re="UNDERLINE";b.default.oneOf([Ae,ke,Re]);const Me="left",Oe="center",Ne="right";b.default.oneOf([Me,Oe,Ne]);const De=Object.freeze({TD:"td",TH:"th"});class Le extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{grid:[]},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.table.Table")}render(){const{grid:e}=this.props.properties;return Array.isArray(e)&&e.length&&e.every((e=>Array.isArray(e)&&e.length))?y.default.createElement("div",{className:this.cssClasses("mol-table",!0),"data-dot":"mol-table"},this._renderTable()):null}_renderCell(e,t,n=De.TD){return y.default.createElement(n,{key:t,className:this.cssClasses({"mol-table__cell":!0,"mol-table__cell--bold":e.style&&e.style.includes(Ae),"mol-table__cell--underline":e.style&&e.style.includes(Re),"mol-table__cell--italic":e.style&&e.style.includes(ke),"mol-table__cell--text-left":e.textAlign===Me,"mol-table__cell--text-center":e.textAlign===Oe,"mol-table__cell--text-right":e.textAlign===Ne,[`mol-table__cell--predefined-style-${e.predefinedStyle}`]:Number.isInteger(e.predefinedStyle)},!0),colSpan:e.colSpan,rowSpan:e.rowSpan},e.href?y.default.createElement(u.Link,{href:e.href,target:e.target||"_self"},e.value):e.value)}_renderTable(){const{predefinedStylesForThead:e=[]}=this.utils.$Settings.plugin.cns.plugin.articleMolecules.table||{},{grid:t}=this.props.properties;let n=t.slice(),i=null;e.includes(n[0][0].predefinedStyle)&&(i=y.default.createElement("thead",null,y.default.createElement("tr",null,n[0].map(((e,t)=>this._renderCell(e,t,De.TH))))),n.shift());const r=y.default.createElement("tbody",{className:this.cssClasses("mol-table__body")},n.map(((e,t)=>y.default.createElement("tr",{key:t,className:this.cssClasses("mol-table__row")},e.map(((e,t)=>this._renderCell(e,t)))))));return y.default.createElement("table",{className:this.cssClasses("mol-table__table",!0)},i,r)}}class $e extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",settings:{},properties:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.articleMolecules.component.molecule.twitter.tweet.Tweet")}render(){const{html:e,id:t}=this.props.properties||{},n="mol-twitter-tweet";return e?(t||c.debug("Tweet - property id is not defined."),this.utils.$UIComponentHelper.isAmp()?t?y.default.createElement("amp-twitter",{class:this.cssClasses(n),"data-dot":n,width:500,height:300,layout:"responsive","data-tweetid":t,dangerouslySetInnerHTML:{__html:e.replace(/<blockquote/i,"<blockquote placeholder")}}):null:y.default.createElement(ee,{className:this.cssClasses(n),"data-dot":n,html:e,load:this._loadTweet.bind(this)})):(c.warn("Tweet - property html is not defined."),null)}_loadTweet(e){this.utils.ScriptLoaderPlugin.load(this.utils.$Settings.plugin.cns.plugin.articleMolecules.twitter.scriptUrl).then((()=>{window.twttr&&window.twttr.widgets&&window.twttr.widgets.load(e)})).catch(c.error)}}class He{static getContentEmbedsFields(){return[{field:"embeddedDocuments",resource:r.ns.get("plugin.article.ArticleEntity")},{field:"embeddedDocuments.caption"},{field:"embeddedDocuments.captionForTimeline"},{field:"embeddedDocuments.caption.caption"},{field:"gallery"},{field:"gallery.mediaList.media"},{field:"gallery.mediaList.media.sources"},{field:"media"},{field:"media.sources"},{field:"poll"},{field:"staticContent"}]}static getContentEmbedsTypes(){return[""]}static getContentEmbeds(e,t){let n=[];return Array.isArray(e)&&Array.isArray(t)?(t.forEach((t=>{"string"==typeof t&&e.forEach((e=>{if("object"!=typeof e)return;let i={field:t?`content.properties.${t}.content.properties.${e.field}`:`content.properties.${e.field}`,inline:!0,cache:!1};Object.prototype.hasOwnProperty.call(e,"resource")&&(i.resource=e.resource),n.push(i)}))})),n):n}}n.$registerImaPlugin=e=>{e.namespace("app.component.molecule.banner"),e.namespace("app.component.molecule.embed"),e.namespace("app.component.molecule.facebook.post"),e.namespace("app.component.molecule.instagram.post"),e.namespace("app.component.molecule.figure"),e.namespace("app.component.molecule.gallery"),e.namespace("app.component.molecule.headline"),e.namespace("app.component.molecule.infobox"),e.namespace("app.component.molecule.list"),e.namespace("app.component.molecule.paragraph"),e.namespace("app.component.molecule.poll"),e.namespace("app.component.molecule.quote"),e.namespace("app.component.molecule.staticContent"),e.namespace("app.component.molecule.table"),e.namespace("app.component.molecule.twitter.tweet"),e.namespace("plugin.articleMolecules.component.atom.textDecorator"),e.namespace("plugin.articleMolecules.component.molecule.banner"),e.namespace("plugin.articleMolecules.component.molecule.embed"),e.namespace("plugin.articleMolecules.component.molecule.facebook.post"),e.namespace("plugin.articleMolecules.component.molecule.instagram.post"),e.namespace("plugin.articleMolecules.component.molecule.figure"),e.namespace("plugin.articleMolecules.component.molecule.gallery"),e.namespace("plugin.articleMolecules.component.molecule.headline"),e.namespace("plugin.articleMolecules.component.molecule.infobox"),e.namespace("plugin.articleMolecules.component.molecule.list"),e.namespace("plugin.articleMolecules.component.molecule.paragraph"),e.namespace("plugin.articleMolecules.component.molecule.poll"),e.namespace("plugin.articleMolecules.component.molecule.poll"),e.namespace("plugin.articleMolecules.component.molecule.quote"),e.namespace("plugin.articleMolecules.component.molecule.staticContent"),e.namespace("plugin.articleMolecules.component.molecule.table"),e.namespace("plugin.articleMolecules.component.molecule.twitter.tweet"),e.plugin.articleMolecules.ContentEmbedHelper=He,e.plugin.articleMolecules.PollVoteEntity=C;const t=e.app.component,n=e.plugin.articleMolecules.component;t.molecule.banner.Banner=Q,t.molecule.embed.Embed=J,t.molecule.facebook.post.Post=oe,t.molecule.instagram.post.Post=Ce,t.molecule.figure.Figure=z,t.molecule.gallery.Gallery=de,t.molecule.headline.H1=pe,t.molecule.headline.H2=me,t.molecule.headline.H3=he,t.molecule.headline.H4=ge,t.molecule.headline.H5=fe,t.molecule.infobox.Infobox=_e,t.molecule.list.List=Ee,t.molecule.paragraph.Paragraph=Se,t.molecule.poll.Poll=Pe,t.molecule.quote.Quote=xe,t.molecule.staticContent.StaticContent=Ie,t.molecule.table.Table=Le,t.molecule.twitter.tweet.Tweet=$e,n.atom.textDecorator.TextDecorator=$,n.molecule.banner.Banner=Q,n.molecule.embed.Embed=J,n.molecule.facebook.post.Post=oe,n.molecule.instagram.post.Post=Ce,n.molecule.figure.Figure=z,n.molecule.gallery.Gallery=de,n.molecule.headline.H1=pe,n.molecule.headline.H2=me,n.molecule.headline.H3=he,n.molecule.headline.H4=ge,n.molecule.headline.H5=fe,n.molecule.infobox.Infobox=_e,n.molecule.list.List=Ee,n.molecule.paragraph.Paragraph=Se,n.molecule.poll.Poll=Pe,n.molecule.quote.Quote=xe,n.molecule.staticContent.StaticContent=Ie,n.molecule.table.Table=Le,n.molecule.twitter.tweet.Tweet=$e},n.Banner=Q,n.ContentEmbedHelper=He,n.Embed=J,n.FacebookPost=oe,n.Figure=z,n.Gallery=de,n.H1=pe,n.H2=me,n.H3=he,n.H4=ge,n.H5=fe,n.Infobox=_e,n.InstagramPost=Ce,n.List=Ee,n.Paragraph=Se,n.Poll=Pe,n.PollExtension=N,n.PollVoteEntity=C,n.PollVoteService=w,n.Quote=xe,n.StaticContent=Ie,n.Table=Le,n.TextDecorator=$,n.Tweet=$e,n.galleryDefaultProps=ue,n.galleryPropTypes=ce,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{articleMolecules:{staticContent:{url:"https://share.seznam.cz/static-content/"},table:{predefinedStylesForThead:[0]},twitter:{scriptUrl:"//platform.twitter.com/widgets.js"}}}}}},test:{plugin:{cns:{plugin:{articleMolecules:{staticContent:{url:"https://share.seznam.test.dszn.cz/static-content/"}}}}}},dev:{plugin:{cns:{plugin:{articleMolecules:{staticContent:{url:"https://share.seznam.dev.dszn.cz/static-content/"}}}}}}})},{"@cns/component-utils":4,"@cns/plugin-article":19,"@cns/plugin-atoms":20,"@cns/plugin-player":46,"@cns/plugin-report":50,"@cns/plugin-user":75,"@cns/rest-api-client":76,"@ima/core":81,"@ima/helpers":83,"@ima/plugin-local-storage":108,"@ima/plugin-logger":110,"@ima/plugin-select":139,"prop-types":232,react:242}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@cns/utils"),r=e("@ima/plugin-less-constants/media"),s=e("@ima/plugin-less-constants/units"),o=e("@ima/core"),a=e("@cns/plugin-atoms"),l=e("@cns/rest-api-client"),c=e("@cns/plugin-ab-testing"),u=e("@cns/plugin-hit-page-time"),d=e("react"),p=e("prop-types"),m=e("@ima/plugin-logger"),h=e("@cns/component-utils"),g=e("@ima/plugin-select"),f=e("@cns/plugin-player"),_=e("@ima/plugin-login"),y=e("@cns/plugin-track-visibility"),b=e("@cns/plugin-section"),v=e("@ima/plugin-script-loader");function C(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var w=C(d),E=C(p),S=C(g);const T={sznPremiumDesktop:r.minWidthMedia(s.px(1100))};class P extends l.AbstractEntity{static get dataFieldMapping(){return{id:"_id",dateOfPublication:l.dateMapper,dateOfUnpublication:l.dateMapper,dateOfLastUpdate:l.dateMapper,recommendUntilDate:l.dateMapperNullable,adKeywords:l.defaultToArray,authors:l.defaultToArray,content:l.defaultToArray,relatedDocuments:l.defaultToArray,workflowLabels:l.defaultToArray,metaKeywords:l.defaultToArray}}static get embeds(){return[{field:"authors",resource:o.ns.get("plugin.author.AuthorEntity"),inline:!0,cache:!1},{field:"authors.media",inline:!0,cache:!1},{field:"caption",inline:!0,cache:!1},{field:"captionForTimeline",inline:!0,cache:!1},{field:"caption.caption",inline:!0,cache:!1},{field:"caption.sources",inline:!0,cache:!1},{field:"tags",resource:o.ns.get("plugin.tag.TagEntity"),inline:!0,cache:!1},{field:"tags.replacedByTag",resource:o.ns.get("plugin.tag.TagEntity"),inline:!0,cache:!1},{field:"layout",resource:o.ns.get("plugin.layout.LayoutEntity")},{field:"relatedDocuments",resource:o.ns.get("plugin.article.ArticleEntity"),inline:!0,cache:!1},{field:"sections",resource:o.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"sections.parent",resource:o.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"sections.parent.parent",resource:o.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"sections.parent.parent.parent",resource:o.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"sections.parent.parent.parent.parent",resource:o.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},...this.getContentEmbeds(this.getContentEmbedsFields(),this.getContentEmbedsTypes())]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"document"}static getContentEmbedsFields(){return o.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsFields()}static getContentEmbedsTypes(){let e=o.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsTypes();return e.push("infobox"),e}static getContentEmbeds(e,t){return o.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbeds(e,t)}get articleUrl(){return`${this.slug}-${this.uid}`}get captionVideoDurationS(){return this.caption&&a.MediaHelper.isVideo(this.caption)&&this.caption.video&&this.caption.video.videoInfo?this.caption.video.videoInfo.durationS:null}get documentUrl(){return`${this.slug}-${this.uid}`}get hasCaptionVideo(){return!!(this.caption&&a.MediaHelper.isVideo(this.caption)||this.captionEmbed&&a.MediaHelper.isEmbedWithSeznamVideo(this.captionEmbed))}get relatedTags(){return this.tags}get urlParameters(){return{article:`${this.slug}-${this.uid}`}}constructor(e){super(e)}}const x=["layout"];class I extends l.AbstractService{static get $dependencies(){return[c.PageABTestRegistry,...l.defaultDependencies]}static get entityClass(){return o.ns.get("plugin.article.ArticleEntity")}constructor(e,...t){super(...t),this._pageABTestRegistry=e,Object.freeze(this)}get(e,t){const n={};t&&(n.previewToken=t);const i=super.get(e,n),r=this._pageABTestRegistry.getCurrentABTest();return c.applyAbTestModification(i,r,x)}list(e){return super.list(e).then((e=>new l.List(...e)))}}const A=Object.freeze({DOP_CLICK:"dop-click",DOP_IMPRESS:"dop-impress",DOP_READ:"dop-read"});class k extends o.AbstractExtension{static get $dependencies(){return["DotAnalytic","$Router",i.LinkHelper,o.Dispatcher]}constructor(e,t,n,i){super(),this._dotAnalytic=e,this._router=t,this._linkHelper=n,this._dispatcher=i,this._pastRequests=[]}load(){return{}}activate(){this._dispatcher.listen(o.RouterEvents.BEFORE_HANDLE_ROUTE,this.onBeforeHandleRoute,this)}deactivate(){this._dispatcher.unlisten(o.RouterEvents.BEFORE_HANDLE_ROUTE,this.onBeforeHandleRoute,this)}onArticleFinishedReading(e){const t=this._getRecommendationUrlParams()||{};let n={action:A.DOP_READ,id:e.articleUid||null,dop_ab_variant:t.abVariant?parseInt(t.abVariant):null};this._hit(n)}onArticlePositionChange(e){this._hit({action:"scroll",articleId:e.articleUid,position:e.articlePosition,time:e.timeSinceLoaded})}onBeforeHandleRoute(){this._pastRequests=[]}onRecommendedArticleClick(e){const t=e.dopSourceZoneName,n=this._getZoneArticlesIds(t),i=this._getArticlePosition(e.articleUid,n);-1!==i&&((e=Object.assign({},{position:i},this._getArticlesHitData(e.articleUid),e)).isFirstClick&&this._makeDopClickHit(e),e.shouldResultInRedirect&&this._redirect(e))}onRecommendedArticlesImpress(e){e&&e.articles&&e.settings&&e.settings.hasSuggestedArticles&&this._makeDopImpressHit(e.articles,e.settings)}_createRecommendationHashParams(e){const{dopSourceZoneName:t,reqId:n,abVariant:i,articleUid:r}=e;let s={};return s[u.RECOMMENDATION_PARAMS.AB_VARIANT]=void 0!==i?i:null,s[u.RECOMMENDATION_PARAMS.ZONE]=t||null,s[u.RECOMMENDATION_PARAMS.REQ_ID]=n||null,s[u.RECOMMENDATION_PARAMS.DOP_ID]=r||null,s}_generateRemReqIds(e,t){const n={};let i=0;return this._pastRequests.forEach((r=>{r&&r.reqId&&r.zone===t&&Array.isArray(r.articlesIds)&&(n[r.reqId]=r.articlesIds.map((t=>e!==t?i++:-1)).filter((e=>-1!==e)))})),n}_getArticle(e,t){let n=t.filter((t=>t.uid===e));return n.length?n[0]:null}_getArticlePosition(e,t){let n=-1;for(let i=0;i<t.length;i++)if(t[i]===e){n=i+1;break}return n}_getArticlesHitData(e){return this._pastRequests.find((t=>t&&t.articlesIds&&t.articlesIds.includes(e)))}_getArticleUrl(e,t){return this._router.link("detail",t,e)}_getRecommendationUrlParams(){const{hash:e}=this._router.getCurrentRouteInfo();if(!e)return null;if("object"!=typeof e||0===Object.keys(e).length)return null;let t={};for(let n of Object.keys(e))Object.values(u.RECOMMENDATION_PARAMS).includes(n)&&(n===u.RECOMMENDATION_PARAMS.AB_VARIANT?t.abVariant=e[n]:t[n]=e[n]);return t}_getZoneArticlesIds(e){return this._pastRequests.filter((t=>t&&t.zone===e)).reduce(((e,t)=>t&&Array.isArray(t.articlesIds)?e.concat(t.articlesIds):e),[])}_hit(e){this._dotAnalytic.hit(e)}_isCurrentRouteDetail(e){return"detail"===e.getName()}_logImpress(e){this._pastRequests.push(e)}_makeDopClickHit(e){const t=e.dopSourceZoneName,n=this._getZoneArticlesIds(t).filter((t=>t!==e.articleUid)),i=e.articles.filter((t=>t.uid!==e.articleUid)).map((e=>e.recommendedAlgs)),r=e.articles.find((t=>t.uid===e.articleUid)),s={action:A.DOP_CLICK,dop_source_zone_name:t||null,id:e.articleUid||null,pos:e.position||null,rem_ids:n||null,dop_ab_variant:void 0!==e.abVariant?e.abVariant:null,dop_req_id:e.reqId||null,rem_req_ids:this._generateRemReqIds(e.articleUid,t)||null,rem_algs:i||null,alg:r.recommendedAlgs||null};this._hit(s)}_makeDopImpressHit(e,t){const{abVariant:n,reqId:i,dopSourceZoneName:r}=t;if(!i||!e||!e.length)return;const s=e.map((e=>e.uid)),o=e.map((e=>e.recommendedAlgs));let a={action:A.DOP_IMPRESS,dop_ids:s||[],dop_ab_variant:void 0!==n?n:null,dop_source_zone_name:r||"",dop_req_id:i||null,algs:o||null};this._logImpress({abVariant:a.dop_ab_variant,articlesIds:a.dop_ids,reqId:a.dop_req_id,zone:a.dop_source_zone_name}),this._hit(a)}_redirect(e){const t=this._getArticle(e.articleUid,e.articles),n=this._createRecommendationHashParams(e),i=Object.assign({},t.urlParameters,e.urlParams||{}),r=this._getArticleUrl(n,i);e.shouldResultInNewWindow?window.open(r):this._router.redirect(r,{},{type:o.ActionTypes.CLICK})}}const R=Object.freeze({RECOMMENDED_ARTICLES_IMPRESS:"recommendedArticlesImpress",RECOMMENDED_ARTICLE_CLICK:"recommendedArticleClick",ARTICLE_IN_TIMELINE_CLICKED:"articleInTimelineClicked"});class M extends o.AbstractComponent{static get contextType(){return o.PageContext}static get defaultProps(){return{articles:[],settings:{abVariant:null,dopSourceZoneName:null,hasSuggestedArticles:!1,reqId:""}}}constructor(e,t){super(e,t),this._onArticleClicked=this._onArticleClicked.bind(this),this.utils.CssRenderingHelper.register("plugin.article.component.molecule.articlesContainer.ArticlesContainer")}componentDidMount(){this.props.settings.hasSuggestedArticles&&this.fire(R.RECOMMENDED_ARTICLES_IMPRESS,this.props),this.listen(this,R.ARTICLE_IN_TIMELINE_CLICKED,this._onArticleClicked)}componentDidUpdate(e){const{settings:t,articles:n}=this.props;if(t.hasSuggestedArticles&&n.length!==e.articles.length){const t=Object.assign({},this.props,{articles:n.filter((t=>!e.articles.includes(t)))});this.fire(R.RECOMMENDED_ARTICLES_IMPRESS,t)}}componentWillUnmount(){this.unlisten(this,R.ARTICLE_IN_TIMELINE_CLICKED,this._onArticleClicked)}render(){return w.default.createElement("div",{className:this.cssClasses("mol-articles-container"),"data-dot":"mol-articles-container"},this.props.children)}_onArticleClicked(e){e.stopPropagation(),this.props.settings.hasSuggestedArticles&&this.fire(R.RECOMMENDED_ARTICLE_CLICK,Object.assign({},e.detail.data,{articles:this.props.articles,dopSourceZoneName:this.props.settings.dopSourceZoneName}))}}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O.apply(this,arguments)}const N=Object.freeze({applicationStartServerTimestamp:E.default.number,applicationStartServerTimezoneOffset:E.default.number,get article(){return E.default.instanceOf(o.ns.get("plugin.article.ArticleEntity"))},get layout(){return E.default.instanceOf(o.ns.get("plugin.layout.LayoutEntityDecorator"))},get service(){return E.default.instanceOf(o.ns.get("plugin.service.ServiceEntity"))},timelines:E.default.object}),D=Object.freeze({applicationStartServerTimestamp:0,applicationStartServerTimezoneOffset:0,article:null,layout:null,service:null,timelines:null}),L=Object.freeze(["applicationStartServerTimestamp","applicationStartServerTimezoneOffset","article","layout","service","timelines"]),$=E.default.arrayOf(E.default.shape({component:E.default.string,componentId:E.default.string,properties:E.default.object,settings:E.default.object}));class H extends h.AbstractComponent{static get contextType(){return o.PageContext}static get defaultProps(){return Object.assign({},D,{className:"",content:[],properties:{},responsifyImage:null,settings:{}})}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.article.component.molecule.richContent.RichContent"),this._collectMedia()}render(){const{content:e}=this.props;return Array.isArray(e)&&e.length?w.default.createElement("div",{className:this.cssClasses("mol-rich-content",!0)},e.map(((e,t)=>this._renderContentComponent(e,t)))):null}_renderContentComponent(e,t){let n=o.ns.get(this._getComponentNamespace(e.component));if(!n)return m.warn(`Component with namespace "${e.component}" doesn't exist.`),w.default.createElement("div",{key:t});let i=Object.assign({},e.properties||{}),r=Object.assign({},e.settings||{});this._processComponentData(e,i,r);let s=this.utils.ComponentDependencyHelper.getComponentDependency(n,this.props);return w.default.createElement(n,O({},s,{className:e.className||null,key:e.componentId||`${e.component}__${t}`,properties:i,settings:r}))}processComponentDataMethods(){return[this._responsifyImages.bind(this),this._passMediaRelatedData.bind(this)]}pushImageIntoLightboxHelper(e){e.index=this.utils.LightboxHelper.images.pushUnique(e)}responsifyImage(e,t=a.MediaTrims.ORIGINAL){return e&&e._cls===a.MediaItemTypes.IMAGE?this.props.responsifyImage?this.props.responsifyImage(e,t):this.utils.MediaHelper.responsifyImage(e,t,[a.MediaSizes.WIDTH320,a.MediaSizes.WIDTH480,a.MediaSizes.WIDTH600,a.MediaSizes.WIDTH722,a.MediaSizes.WIDTH1024,a.MediaSizes.WIDTH1280,a.MediaSizes.WIDTH2560],[{mediaCondition:"(min-width: 851px)",width:"700px"},{width:"100vw"}]):e}_collectMedia(){const{content:e}=this.props;Array.isArray(e)&&e.length&&e.forEach((e=>{const{properties:t={}}=e;if("molecule.figure.Figure"===e.component){const{media:e,text:n}=t;e&&(e._cls===a.MediaItemTypes.IMAGE?(e.titleFromArticle=n,this.pushImageIntoLightboxHelper(e)):this.utils.MediaHelper.constructor.isVideo(e)&&this.utils.VideoCollector.pushUnique(e))}"molecule.gallery.Gallery"===e.component&&t&&t.gallery&&Array.isArray(t.gallery.mediaList)&&t.gallery.mediaList.forEach((e=>{e&&e.media&&e.media._cls===a.MediaItemTypes.IMAGE&&(e.media.titleFromArticle=e.text,this.pushImageIntoLightboxHelper(e.media))}))}))}_getComponentNamespace(e){return`app.component.${e.replace(/^atom\./,"molecule.")}`}_passMediaRelatedData(e){let{layoutComponent:t,properties:n,settings:i}=e;const{collectionIndex:r=0}=this.props.properties;if("molecule.figure.Figure"===t.component){const{media:e}=n;e&&this.utils.MediaHelper.constructor.isVideo(e)&&Object.assign(i,this.props.settings,{showAuthorInCaption:!0,trim:a.MediaTrims.DEFAULT16x9})}"molecule.infobox.Infobox"===t.component&&(n.collectionIndex=r,Object.assign(i,this.props.settings))}_processComponentData(e,t,n){const i=this.processComponentDataMethods();if(Array.isArray(i)&&i.length)return i.forEach((i=>{"function"==typeof i&&i({layoutComponent:e,properties:t,settings:n})}))}_responsifyImages(e){const{layoutComponent:t,properties:n,settings:i}=e;"molecule.figure.Figure"===t.component&&(n.media=this.responsifyImage(n.media,i.trim)),"molecule.gallery.Gallery"===t.component&&n&&n.gallery&&Array.isArray(n.gallery.mediaList)&&n.gallery.mediaList.forEach((e=>{e&&e.media&&(e.media=this.responsifyImage(e.media))}))}}const j=[20,40,60,80,100];class U extends h.AbstractComponent{static get contextType(){return o.PageContext}static get defaultProps(){return Object.assign({},D,{article:null,className:"",entity:null,properties:{},settings:{}})}static get requiredProps(){return L}static createHOCSelect(e=[z],t=this){const n=S.default(...e)(t);return g.hoistNonReactStatic(n,t),n}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.article.component.organism.article.Article"),this._paragraphsCount=0,this._articleFinishedReading=null,this._registeredVisibilityId=null,this._componentPositions=this.utils.$UIComponentHelper.componentPositions,this._reportedArticlePositions={},this._timeLoaded=Date.now(),this._articleRef=w.default.createRef()}componentDidMount(){const e=this.utils.$Window.getWindow();this._articleFinishedReading=e.setTimeout((()=>{this.props.article&&this.fire("articleFinishedReading",{articleUid:this.props.article.uid})}),5e3),this._registerToCheckingVisibility()}shouldComponentUpdate(e,t){return h.shouldComponentUpdate(this,e,t)}componentWillUnmount(){this.utils.$Window.getWindow().clearTimeout(this._articleFinishedReading),this._unregisterToCheckingVisibility()}render(){const{entity:e}=this.props,t=this._getRichContentComponent();if(!e||!t)return null;const n=this._getRichContentProps();return w.default.createElement("div",{className:this.cssClasses({"ogm-article-layout":!0,"ogm-article-layout--empty":0===n.content.length}),"data-e2e":"ogm-article-layout"},w.default.createElement("article",{ref:this._articleRef,className:this.cssClasses("ogm-article-container"),role:"article","aria-labelledby":"accessibility-article"},w.default.createElement(a.SklikPixel,{id:e.retargetingCode,url:this.utils.$Router.getUrl(),sid:this.utils.DotAnalytic.getSid()}),w.default.createElement(a.H6,{id:"accessibility-article"},"lnek"),w.default.createElement("div",{className:this.cssClasses("ogm-article-content"),"data-dot":"ogm-article-content"},w.default.createElement(t,n))))}onVisibilityWriter(e){if(!this.props.article)return;if(!("articleHeight"in e)||!("articlePercentagePosition"in e))return;const{entity:t}=this.props;let n=this._findReportableArticlePosisition(e.articlePercentagePosition);if("number"!=typeof n||this._reportedArticlePositions[n])return;let i=Date.now();if(i-Math.max(0,...Object.values(this._reportedArticlePositions))>this._getDelayBetweenPositionReports(e.articleHeight)){let r={articleUid:t.uid,articlePosition:n,timeSinceLoaded:e.timeSinceLoaded};this._reportedArticlePositions[n]=i,this.fire("articlePositionChange",r)}}getMobileCubeAdvert(){m.error("The getMobileCubeAdvert() method is abstract and must be overridden.")}getRepeatingAdvert(){m.error("The getRepeatingAdvert() method is abstract and must be overridden.")}getSelfPromo(){m.error("The getSelfPromo() method is abstract and must be overridden.")}processArticleContentMethods(){return[this._insertMobileCubeAdvert.bind(this),this._insertSelfPromo.bind(this),this._insertRepeatingAdvert.bind(this)]}_articleHasSetAnyAdvert(){const{settings:e}=this.props;return!!(e.cubeZoneId||e.repeatingAdvertZoneId||e.selfPromoZoneId)}_componentIsLongEnoughParagraph(e){return!!(e&&"molecule.paragraph.Paragraph"===e.component&&e.properties&&"string"==typeof e.properties.text&&e.properties.text.length>=80)}_countParagraphsInArticleContent(e){if(!Array.isArray(e))return 0;let t=0;return e.forEach((e=>{this._componentIsLongEnoughParagraph(e)&&t++})),t}_createRepeatingAdvertWithUniqueComponentId(e={},t){return Object.assign({},e,{componentId:`${e.componentId}.${t}`})}_findReportableArticlePosisition(e){for(let t=0;t<j.length;t++)if(e>=j[t]&&("number"!=typeof j[t+1]||e<j[t+1]))return j[t];return null}_getAdvertInsertionPosition(e,t){if(!Array.isArray(e)||!t)return null;const{advertType:n,zoneId:i,afterParagraph:r,minimumParagraphs:s=0}=t,o=r+1;let a=0;if(!n||!i||"number"!=typeof r||o>this._paragraphsCount||"number"!=typeof s||s>this._paragraphsCount)return null;for(let t=0;t<e.length;t++){const n=e[t];if(this._componentIsLongEnoughParagraph(n)&&(a++,a===o)){const n=Math.max(0,t-1);return this._isBannedPreviousComponent(e[n])?n:t}}return null}_getDelayBetweenPositionReports(e){return Math.max(Math.round(1e3*Math.log(Math.max(e-400,0)/60)),0)}_getRepeatingPositions(e,t,n){const i=n+1;let r=0,s=[];for(let n=t;n<e.length;n++){const o=e[n];if(this._componentIsLongEnoughParagraph(o)&&(r++,r===i)){const i=Math.max(t,n-1),o=this._isBannedPreviousComponent(e[i])?-1:0;s.push(n+s.length+o),r=1}}return s}_getRichContentComponent(){return o.ns.get("plugin.article.component.molecule.richContent.RichContent")}_getRichContentProps(){const{entity:e,settings:t}=this.props,n={className:this.cssClasses("mol-rich-content--for-article"),content:this._processArticleContent(),properties:{collectionIndex:e.uid},settings:{}};return L.forEach((e=>{n[e]=this.props[e]})),Object.keys(a.VideoContextType).forEach((e=>{t[e]&&(n.settings[e]=t[e])})),n}_getVisibilityReader(){return()=>{if(!this._articleRef.current)return{};let e=this._componentPositions.getBoundingClientRect(this._articleRef.current),t=this._componentPositions.getWindowViewportRect(),n=this._componentPositions.getRectsIntersection(e,t),i=Math.min(Math.max(n.height-(e.top<0?e.top:0)-t.height/2,0)/e.height*100,100),r=Date.now()-this._timeLoaded;return{articleHeight:e.height,articlePercentagePosition:i,timeSinceLoaded:r}}}_insertMobileCubeAdvert(e){const{cubeAdvertType:t,cubeAfterParagraph:n,cubeMinimumParagraphs:i,cubeZoneId:r}=this.props.settings;if(!this.utils.DeviceHelper.isMobile())return;const s=this.getMobileCubeAdvert(),o=this._getAdvertInsertionPosition(e,{advertType:t,zoneId:r,afterParagraph:n,minimumParagraphs:i});this._isValidComponentObject(s)&&this._isValidArticleContentPosition(e,o)&&e.splice(o,0,s)}_insertRepeatingAdvert(e){const{repeatingAdvertAdvertType:t,repeatingAdvertAfterParagraph:n,repeatingAdvertRepeatAfterEachParagraphs:i,repeatingAdvertZoneId:r}=this.props.settings;if(!this.utils.DeviceHelper.isMobile())return;const s=this.getRepeatingAdvert(),o=this._getAdvertInsertionPosition(e,{advertType:t,zoneId:r,afterParagraph:n});this._isValidComponentObject(s)&&this._isValidArticleContentPosition(e,o)&&(e.splice(o,0,this._createRepeatingAdvertWithUniqueComponentId(s,o)),"number"==typeof i)&&this._getRepeatingPositions(e,o+1,i).forEach((t=>{this._isValidArticleContentPosition(e,t)&&e.splice(t,0,this._createRepeatingAdvertWithUniqueComponentId(s,t))}))}_insertSelfPromo(e){const{selfPromoAdvertType:t,selfPromoAfterParagraph:n,selfPromoMinimumParagraphs:i,selfPromoZoneId:r}=this.props.settings;if(!this.utils.DeviceHelper.isDesktop())return;const s=this.getSelfPromo(),o=this._getAdvertInsertionPosition(e,{advertType:t,zoneId:r,afterParagraph:n,minimumParagraphs:i});this._isValidComponentObject(s)&&this._isValidArticleContentPosition(e,o)&&e.splice(o,0,s)}_isBannedPreviousComponent(e){return this._isValidComponentObject(e)&&e.component.startsWith("molecule.headline.")}_isValidArticleContentPosition(e,t){return"number"==typeof t&&t>=0&&t<=e.length-1}_isValidComponentObject(e){return!(!e||"object"!=typeof e||"string"!=typeof e.component)}_processArticleContent(){const{entity:e}=this.props,t=e&&e.content;if(!Array.isArray(t))return[];if(!this._articleHasSetAnyAdvert())return t;const n=this.processArticleContentMethods();if(!Array.isArray(n)||!n.length)return t;this._paragraphsCount=this._countParagraphsInArticleContent(t);let i=t.slice();return n.forEach((e=>{"function"==typeof e&&e(i)})),i}_registerToCheckingVisibility(){this._registeredVisibilityId=this.utils.$UIComponentHelper.visibility.register(this._getVisibilityReader(),this.utils.$UIComponentHelper.wrapVisibilityWriter((e=>this.onVisibilityWriter(e))))}_unregisterToCheckingVisibility(){this.utils.$UIComponentHelper.visibility.unregister(this._registeredVisibilityId)}}const z=(e,t,n)=>{const{article:i,landingPage:r,tag:s}=e,{properties:o={}}=n,a=o.entity||"@article";return{article:i,entity:t.$Utils.StringReferencesHelper.getReferenceData(a,{article:i,landingPage:r,tag:s})}};class F extends o.AbstractComponent{static get contextType(){return o.PageContext}static get defaultProps(){return{article:null}}static get requiredProps(){return["article"]}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.article.component.organism.article.Perex")}render(){const{article:e}=this.props;return e&&e.perex?w.default.createElement(a.Paragraph,{className:this.cssClasses("ogm-article-perex"),"data-dot":"ogm-article-perex"},e.perex):null}}class B extends o.AbstractComponent{static get contextType(){return o.PageContext}static get defaultProps(){return{entity:null}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.article.component.organism.sznPremium.SznPremium");const n=this.utils.$UIComponentHelper.isAmp(),i=this._isPremiumUser();this.state={premium:i,loading:!n}}componentDidMount(){this.utils.$Dispatcher.listen(_.Events.BADGE,this._setPremiumStatus,this),this.utils.$Dispatcher.listen(_.Events.LOGIN,this._setPremiumStatus,this),this.utils.$Dispatcher.listen(_.Events.LOGOUT,this._setPremiumStatus,this),this.utils.$Dispatcher.listen(_.Events.FORGET,this._setPremiumStatus,this),this.utils.$Dispatcher.listen(o.RouterEvents.AFTER_HANDLE_ROUTE,this._onAfterHandleRoute,this)}componentWillUnmount(){this.utils.$Dispatcher.unlisten(_.Events.BADGE,this._setPremiumStatus,this),this.utils.$Dispatcher.unlisten(_.Events.LOGIN,this._setPremiumStatus,this),this.utils.$Dispatcher.unlisten(_.Events.LOGOUT,this._setPremiumStatus,this),this.utils.$Dispatcher.unlisten(_.Events.FORGET,this._setPremiumStatus,this),this.utils.$Dispatcher.unlisten(o.RouterEvents.AFTER_HANDLE_ROUTE,this._onAfterHandleRoute,this)}render(){return this._shouldRender()?this.state.loading?this._renderPlaceholder():this._renderBanner():null}_renderBanner(){const{premium:e}=this.state,t=this._getBannerSettings();return w.default.createElement(a.Link,{className:this.cssClasses({"ogm-szn-premium":!0,"ogm-szn-premium--premium":e},!0),href:this._getBannerLink(t),target:"_blank","data-dot":"ogm-szn-premium","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement({premium:e})},this._renderIcon(t.icon),w.default.createElement("div",{className:this.cssClasses("ogm-szn-premium__text"),"data-dot":"ogm-szn-premium__text"},w.default.createElement("div",{className:this.cssClasses("ogm-szn-premium--mobile")},t.mobileText),w.default.createElement("div",{className:this.cssClasses("ogm-szn-premium--desktop")},t.desktopText),w.default.createElement("div",{className:this.cssClasses({"ogm-szn-premium__text__description":!0,"ogm-szn-premium--desktop":!0})},t.description)),!e&&w.default.createElement("div",{className:this.cssClasses("ogm-szn-premium__button"),"data-dot":"ogm-szn-premium__button"},"Zjistit vce"),w.default.createElement(y.TrackVisibility,{analyticsAction:e?"premiumThanksImpress":"premiumBannerImpress"}))}_renderIcon(e){return w.default.createElement("div",{className:this.cssClasses({"ogm-szn-premium__icon":!0,"ogm-szn-premium__icon--placeholder":this.state.loading}),"data-dot":"ogm-szn-premium__icon"},e&&w.default.createElement(a.Image,{src:e.src,width:e.width,height:e.height,layout:"responsive"}))}_renderPlaceholder(){return w.default.createElement("div",{className:this.cssClasses("ogm-szn-premium",!0)},this._renderIcon(null),w.default.createElement("div",{className:this.cssClasses({"ogm-szn-premium__text":!0,"ogm-szn-premium__text--placeholder":this.state.loading})},""))}_onAfterHandleRoute(){this._getBadgeUser()&&this._setPremiumStatus()}_getBadgeUser(){const e=this.utils.$Window;try{return e.isClient()&&e.getWindow().login.current}catch(e){return null}}_getBannerLink(e){return`${e.link}?utm_source=${e.utmSource}&utm_medium=product_promo&utm_campaign=seznam_premium&utm_content=banner_pod_playerem`}_getBannerSettings(){const{premium:e}=this.state,t=this.utils.$Settings.plugin.cns.plugin.article.sznPremium||{},n=Object.assign({mobileText:"Videa bez reklam?",desktopText:"Sledujte nae videa bez reklam",description:"Uvejte si je neruen dky Seznam Premium."},t.default||{});return e&&Object.assign(n,t.premium||{},{mobileText:w.default.createElement(w.default.Fragment,null,"Dky Seznam Premium te mte vechna ",w.default.createElement("u",null,"nae videa")," bez reklam"),desktopText:"Mte pedplacen Seznam Premium",description:w.default.createElement(w.default.Fragment,null,"Vechna ",w.default.createElement("u",null,"nae videa")," te mete sledovat bez reklam.")}),n}_isPremiumUser(){const e=this._getBadgeUser();return!(!e||!e.premium)}_setPremiumStatus(){this.setState({premium:this._isPremiumUser(),loading:!1})}_shouldRender(){const{entity:e}=this.props;return e&&e.hasCaptionVideo}}const V=["hideMediaTitle"];class W extends o.AbstractComponent{static get contextType(){return o.PageContext}static get defaultProps(){return{entity:null,className:"",properties:{},settings:{}}}static get requiredProps(){return["entity"]}static createHOCSelect(e=[q],t=this){const n=S.default(...e)(t);return g.hoistNonReactStatic(n,t),n}get Embed(){return o.ns.get("plugin.articleMolecules.component.molecule.embed.Embed")}get Figure(){return o.ns.get("plugin.articleMolecules.component.molecule.figure.Figure")}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.article.component.organism.mainMedia.MainMedia"),this._collectMedia()}render(){const{entity:e}=this.props;if(!e||!e.caption&&!e.captionEmbed)return null;const t=this.utils.$Settings.plugin.cns.plugin.article.sznPremium||{};return w.default.createElement(w.default.Fragment,null,w.default.createElement("div",{className:this.cssClasses("ogm-main-media")},w.default.createElement("div",{className:this.cssClasses("ogm-main-media__container"),"data-dot":"ogm-main-media","data-e2e":"ogm-main-media"},e.captionEmbed?this._renderEmbed():this._renderFigure())),t.enable&&w.default.createElement(B,{entity:e}))}_renderEmbed(){const{Embed:e}=this,{entity:t}=this.props,n=this._isAutoPlay();return w.default.createElement(e,{properties:t.captionEmbed,settings:{autoPlay:n}})}_renderFigure(){const{Figure:e}=this,{entity:t,settings:n}=this.props;return w.default.createElement(e,{properties:{media:t.caption,text:n.hideMediaTitle?"":t.captionTitle},settings:this._getFigureSettings()})}pushImageIntoLightboxHelper(e){e.index=this.utils.LightboxHelper.images.pushUnique(e)}_collectMedia(){const{entity:e}=this.props;if(!e)return;const t=e.caption;t&&(t._cls===a.MediaItemTypes.IMAGE?(t.titleFromArticle=e.captionTitle,this.pushImageIntoLightboxHelper(t)):e.hasCaptionVideo&&this.utils.VideoCollector.pushUnique(t))}_getFigureSettings(){const{entity:e,settings:t}=this.props,n=Object.entries(t).reduce(((e,[t,n])=>(V.includes(t)||(e[t]=n),e)),{});if(n.trim=n.trim||a.MediaTrims.DEFAULT16x9,e.hasCaptionVideo){const e=this._isAutoPlay();Object.assign(n,{layoutContext:f.LayoutContext.MAIN_MEDIA,mutedAutoPlay:e,mutedAutoPlaySubtitles:e,showAuthorInCaption:!t.hideMediaTitle})}return n}_isAutoPlay(){return!this.utils.DeviceHelper.isPortable()}}const q=(e,t,n)=>{const{article:i,landingPage:r,tag:s}=e,{properties:o={}}=n,a=o.entity||"@article";return{entity:t.$Utils.StringReferencesHelper.getReferenceData(a,{article:i,landingPage:r,tag:s})}};class G{static get $dependencies(){return[]}getDurationOfAllVideos(e){return Array.isArray(e)?e.reduce(((e,t)=>e+(t.video&&t.video.videoInfo&&t.video.videoInfo.durationS||0)),0):0}}class K{static get $dependencies(){return[v.ScriptLoaderPlugin,"$Settings.plugin.cns.plugin.article.facebook"]}constructor(e,t){this._scriptLoader=e,this._config=t,this._initPromise=null}init(){return this._initPromise||(this._initPromise=this._scriptLoader.load(this._config.scriptUrl).then(this._scriptLoaded.bind(this),this._connectionProblem.bind(this))),this._initPromise}parseElement(e){return this._initPromise?this._initPromise.then((()=>new Promise((t=>{FB.XFBML.parse(e,t)})))):Promise.reject(new Error("FB object isnt configured, please call method init first."))}_connectionProblem(e){return m.warn("Facebook - sdk script is not loaded.",e),Promise.reject(new Error(e))}_scriptLoaded(){return FB?(FB.init(this._config.conf),Promise.resolve()):Promise.reject(new Error("FB object doesnt exist"))}}const Z=/^(?:https?:\/\/)?(?:www\.)?(?:instagram\.com(?:\/\w+)?\/(?:[\w-]+)\/)([\w-]+)(?:\/)?(?:\?.*)?$/i;class Q{static get $dependencies(){return[v.ScriptLoaderPlugin,"$Window","$Settings.plugin.cns.plugin.article.instagram"]}constructor(e,t,n){this._scriptLoader=e,this._window=t,this._config=n,this._initPromise=null}init(){return!this._initPromise&&this._window.isClient()&&(this._initPromise=this._scriptLoader.load(this._config.scriptUrl).then(this._scriptLoaded.bind(this),this._connectionProblem.bind(this))),this._initPromise}extractShortcode(e){const t=e.match(Z);return Array.isArray(t)?t[1]:null}processEmbeds(){if(!this._initPromise)return Promise.reject(new Error("Instagram object isnt configured, please call method init first."));const{instgrm:e}=this._window.getWindow();return this._initPromise.then((()=>new Promise((t=>{e.Embeds.process(),t()}))))}_connectionProblem(e){return m.warn("Instagram - SDK script is not loaded.",e),Promise.reject(new Error(e))}_scriptLoaded(){const{instgrm:e}=this._window.getWindow();return e?Promise.resolve():Promise.reject(new Error("Instagram object doesnt exist."))}}class Y{static get $dependencies(){return[]}get items(){return this._items.entries()}get length(){return this._items.size}constructor(){this._items=new Map}clear(e=null){if(!e)return this._items.clear();this._items.set(e,[])}createCollectionIfNotExists(e){this.hasCollection(e)||this._items.set(e,[])}get(e,t=0){if(!this.hasCollection(t))throw new Error(`plugin.article.MediaCollection.get: The collectionIndex ${t} is out of range.`);if(this.has(e,t))return this.getCollection(t)[e];throw new Error(`plugin.article.MediaCollection.get: The mediaIndex ${e} is out of range.`)}getCollection(e){if(!this.hasCollection(e))throw new Error(`plugin.article.MediaCollection.getCollection: The collectionIndex ${e} is out of range.`);return this._items.get(e).slice()}getCollectionSize(e){if(!this.hasCollection(e))throw new Error(`plugin.article.MediaCollection.getCollection: The collectionIndex ${e} is out of range.`);return this._items.get(e).length}getNextIndex(e,t=0){if(!this.hasCollection(t))throw new Error(`plugin.article.MediaCollection.getNextIndex: The collectionIndex ${t} is out of range.`);const n=e+1,i=this.getCollection(t);return Number.isInteger(e)&&void 0!==i[n]?n:0}getPreviousIndex(e,t=0){if(!this.hasCollection(t))throw new Error(`plugin.article.MediaCollection.getPreviousIndex: The collectionIndex ${t} is out of range.`);const n=e-1,i=this.getCollection(t);return Number.isInteger(e)&&void 0!==i[n]?n:i.length-1}has(e,t=0){return!!this.hasCollection(t)&&void 0!==this.getCollection(t)[e]}hasCollection(e){return this._items.has(e)}push(e,t=0){return this.createCollectionIfNotExists(t),this._items.get(t).push(e)-1}pushUnique(e,t=0,n="uid"){if(e!==Object(e))return-1;let i=-1;return this.hasCollection(t)&&(i=this._items.get(t).findIndex((t=>t[n]===e[n]))),-1===i&&(i=this.push(e,t)),i}}class X{static get $dependencies(){return["$Dispatcher","$RouterEvents"]}get images(){return this._images}get mediaTypes(){return{IMAGE:"image"}}constructor(e,t){this._dispatcher=e,this._routerEvents=t,this._images=new Y}init(){this._dispatcher.listen(this._routerEvents.BEFORE_HANDLE_ROUTE,this.onRouteSwitched,this)}onRouteSwitched(){this._images.clear()}show(e,t,n=this.mediaTypes.IMAGE,i=null){this._dispatcher.fire("lightbox-show",{collectionIndex:t,mediaType:n,mediaIndex:e,mediaContext:i})}showList(e=this.mediaTypes.IMAGE){this._dispatcher.fire("lightbox-show-list",{mediaType:e})}}class J{static get $dependencies(){return["$Dispatcher","$RouterEvents"]}constructor(e,t){this._dispatcher=e,this._routerEvents=t,this._items=[]}init(){this._dispatcher.listen(this._routerEvents.BEFORE_HANDLE_ROUTE,this.onRouteSwitched,this)}onRouteSwitched(){this.clear()}clear(){this._items=[]}count(){return this._items.length}getItems(){return this._items.slice()}push(e){return this._items.push(e)-1}pushUnique(e,t="uid"){if(e!==Object(e))return-1;let n=this._items.findIndex((n=>n[t]===e[t]));return-1===n&&(n=this.push(e)),n}}n.$registerImaPlugin=e=>{e.namespace("app.component.organism.mainMedia"),e.namespace("app.component.organism.article"),e.namespace("plugin.article"),e.namespace("plugin.article.ArticleEntity"),e.namespace("plugin.article.ArticleService"),e.namespace("plugin.article.component.molecule"),e.namespace("plugin.article.component.molecule.articlesContainer"),e.namespace("plugin.article.component.molecule.richContent"),e.namespace("plugin.article.component.organism"),e.namespace("plugin.article.component.organism.article"),e.namespace("plugin.article.component.organism.mainMedia"),e.namespace("plugin.article.component.organism.sznPremium");const t=e.plugin.article;t.ArticleEntity=P,t.ArticleService=I,t.component.molecule.articlesContainer.ArticlesContainer=M,t.component.molecule.richContent.RichContent=H,t.component.organism.article.Article=U,t.component.organism.article.Perex=F,t.component.organism.mainMedia.MainMedia=W,t.component.organism.mainMedia.SznPremium=B,e.app.component.organism.article.Perex=F,e.app.component.organism.mainMedia.MainMedia=W},n.Article=U,n.ArticleAnalyticEvents=A,n.ArticleAnalyticExtension=k,n.ArticleEntity=P,n.ArticleService=I,n.ArticlesContainer=M,n.ArticlesContainerEvents=R,n.DotArticleHelper=class{static get $dependencies(){return[b.SectionHelper,G,"$Window"]}constructor(e,t,n){this._sectionHelper=e,this._videoAnalyticHelper=t,this._window=n}getArticleParams(e,t,n){const{article:i}=e||{};if(!i)return null;const{authors:r,caption:s,dateOfPublication:o,title:l,uid:c,tags:u}=i,d={};c&&(d.articleId=c),o&&(d.articlePublished=o.getTime()/1e3,d.articleDaysAfterPublished=this._getDaysAfter(o)),l&&(d.articleTitle=l),r&&(d.author=r.map((e=>e&&e.name)).join(", ")),d.articleSection=this._sectionHelper.getPrimarySectionName(i),d.expectedReadTime=this.getExpectedReadTime(this.getNumberOfViewableChars(i));const{images:p}=t||{};if(c&&p&&p.hasCollection(c)){const e=p.getCollection(c);d.photoCount=e.length}else d.photoCount=0;return d.photoGalery=!!d.photoCount,n?(d.videoCount=n.count(),d.videoTotalTime=this._videoAnalyticHelper.getDurationOfAllVideos(n.getItems())):(d.videoCount=0,d.videoTotalTime=0),s&&s.itemType===a.MediaItemTypes.EMBED&&(d.embedId=s.embed),u&&(d.articleTags=u.map((e=>e.uid))),d}getExpectedReadTime(e){return Math.round(95*e/1800)}getNumberOfViewableChars(e){const t=this._getAllTextsFromContent(e.content).join("");return this._getViewableText(e.title).length+this._getViewableText(e.perex).length+this._getViewableText(t).length}_getAllTextsFromContent(e){let t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.properties&&i.properties.text&&t.push(i.properties.text),i.properties&&i.properties.texts&&i.properties.texts.length&&(t=t.concat(i.properties.texts))}return t}_getDaysAfter(e){const t=new Date,n=new Date(e.getTime());return t.setHours(0,0,0,0),n.setHours(0,0,0,0),(t.getTime()-n.getTime())/864e5}_getViewableText(e){if(!e)return"";const t=this._window.getWindow().document.createElement("div");let n="";return t.innerHTML=e,n=t.textContent||t.innerText||"",n}},n.FacebookHelper=K,n.InstagramHelper=Q,n.LightboxHelper=X,n.MainMedia=W,n.MediaCollector=Y,n.Perex=F,n.RichContent=H,n.RichContentContentProp=$,n.RichContentSharedDefaultProps=D,n.RichContentSharedProps=N,n.RichContentSharedRequiredProps=L,n.SznPremium=B,n.VideoAnalyticHelper=G,n.VideoCollector=J,n.articleSelector=z,n.initBind=(e,t)=>{t.get("$ComponentUtils").register({DeviceHelper:i.DeviceHelper,FacebookHelper:K,InstagramHelper:Q,LightboxHelper:X,MediaCollector:Y,VideoAnalyticHelper:G,VideoCollector:J})},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{article:{facebook:{scriptUrl:"//connect.facebook.net/cs_CZ/sdk.js",conf:{appId:void 0,version:"v2.9",status:!1,xfbml:!1}},instagram:{scriptUrl:"https://www.instagram.com/static/bundles/metro/EmbedSDK.js/33cd2c5d5d59.js?fbclid=IwAR0U2WxhqIVQqB7KbEziwehtVMzbm1cl2aYKu56BVB7jIuizFzfYKdHhd6g"},sznPremium:{enable:!0,default:{icon:{src:"//d15-a.sdn.cz/d_15/c_img_QP_X/6H7v/seznam-premium-koruna.png",width:52,height:42},link:"https://premium.seznam.cz",utmSource:"undefined"},premium:{icon:{src:"//d15-a.sdn.cz/d_15/c_img_QI_W/kRWt/seznam-premium-koruna-aktivni.png",width:60,height:60},link:"https://premium.seznam.cz/dekujeme"}}}}}}}}),n.layout=T,n.mainMediaSelector=q},{"@cns/component-utils":4,"@cns/plugin-ab-testing":12,"@cns/plugin-atoms":20,"@cns/plugin-hit-page-time":35,"@cns/plugin-player":46,"@cns/plugin-section":53,"@cns/plugin-track-visibility":73,"@cns/rest-api-client":76,"@cns/utils":78,"@ima/core":81,"@ima/plugin-less-constants/media":102,"@ima/plugin-less-constants/units":103,"@ima/plugin-logger":110,"@ima/plugin-login":112,"@ima/plugin-script-loader":135,"@ima/plugin-select":139,"prop-types":232,react:242}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-atoms"),r=e("@ima/plugin-useragent"),s=e("@cns/utils"),o=e("react"),a=e("prop-types"),l=e("@ima/core"),c=e("@ima/plugin-select"),u=e("@cns/component-utils"),d=e("@cns/hooks"),p=e("@cns/pixel-generator"),m=e("@ima/plugin-logger");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}(i),f=h(o),_=h(a),y=h(c);class b extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{date:null,serverTimestamp:0,timeOnly:!1,dateOnly:!1}}static defaultSelector(e){return u.defaultSelector(e,((t,n)=>{t=Object.assign({},t);const{$Utils:i}=n;return i.RegressionHelper.isRegression()&&(t.serverTimestamp="2222-02-02T22:22:00"),t.serverDate=new Date(t.serverTimestamp),t.date=t.date?t.date:t.serverDate,t.date=t.date instanceof Date?t.date:new Date(t.date),t.formattedDate=e.logics.formatDate(t.date,t.serverDate,t.timeOnly,t.dateOnly),t}))}static logicFactory(){return{formatDate:C,formatDateOnly:S,formatTime:E,formatNumber:T,formatWeekDay:w,isSameDay:P}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.date.FormattedDate")}render(){let e=this.getProps();return f.default.createElement("span",{className:this.cssClasses({"atm-date-formatted":!0},!0),"data-dot":"atm-date-formatted"},e.formattedDate,e.children)}}const v=y.default((e=>({serverTimestamp:e.applicationStartServerTimestamp?e.applicationStartServerTimestamp:Date.now()})))(b);function C(e,t,n,i,r){if(i)return E(e,t);if(r)return S(e,t);if(P(e,t,n))return`dnes ${E(e,t)}`;if(P(e,t,new Date(n.getFullYear(),n.getMonth(),n.getDate()-1)))return`vera ${E(e,t)}`;let s=new Date(n.getFullYear(),n.getMonth(),n.getDate()-6);return t.getTime()>s.getTime()?w(e,t)+" "+E(e,t):S(e,t)}function w(e,t){switch(t.getDay()){case 0:return"nedle";case 1:return"pondl";case 2:return"ter";case 3:return"steda";case 4:return"tvrtek";case 5:return"ptek";case 6:return"sobota";default:throw new Error("Unknown week day: "+t.getDay())}}function E(e,t){return T(e,t.getHours())+":"+T(e,t.getMinutes())}function S(e,t){return`${t.getDate()}. ${t.getMonth()+1}. ${t.getFullYear()}`}function T(e,t){let n=`${t}`;return n.length<2?`0${n}`:n}function P(e,t,n){return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x.apply(this,arguments)}class I extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{isSameDomain:!1,text:null,rel:null,role:null,mode:"",className:"","data-e2e":null,settings:{}}}static extendRel(e,t){const n=e?e.split(" "):[];return n.push(t),Array.from(new Set(n)).join(" ")}constructor(e,t){super(e,t),this._onClick=this._onClick.bind(this),this._lastClickTimestamp=0,this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.link.Link")}render(){return f.default.createElement(i.Link,x({},this.props,{rel:this._getRel(),onClick:this._onClick}),this.props.children)}_onClick(e){Date.now()<this._lastClickTimestamp+300?e.preventDefault():(this._lastClickTimestamp=Date.now(),this.props.onClick&&this.props.onClick(e))}_getRel(){const{target:e,isSameDomain:t,rel:n}=this.props;return"_blank"!==e||t?n:I.extendRel(n,"noopener")}}const A=(e,t,n)=>{let i=!1;return n.href&&t.$Utils&&t.$Utils.$Router&&(i=new RegExp("^"+t.$Utils.$Router.getBaseUrl()).test(n.href)),{isSameDomain:i}},k=(e,t,n)=>{let i=n.rel;return e.article&&e.article.commercial&&(i=I.extendRel(i,"sponsored")),{rel:i}},R=y.default(A)(I),M=y.default(A,k)(I);class O extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{href:null,disabled:!1,onClick:null,dataDotData:{click:"expand-timeline"},dataDot:"atm-expand-button-link",settings:{animate:!1},role:"button"}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.expandButton.ExpandButton")}render(){const{children:e,dataDotData:t,dataDot:n,href:i,disabled:r,onClick:s,role:o}=this.props;return f.default.createElement("div",{className:this.cssClasses({"atm-expand-button":!0,"atm-expand-button-disabled":r,"atm-expand-button-animate":this.props.settings.animate},!0),"data-dot":"atm-expand-button"},f.default.createElement(R,{className:this.cssClasses({"atm-expand-button-link":!0}),"data-e2e":"atm-expand-button-link","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement(t),"data-dot":n,href:i,onClick:s,role:o},e))}}function N(e){return e.replace(/([\da-z])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()}function D({icon:e,className:t,label:n,...i}){const{cssClasses:r}=d.useComponent("plugin.atoms.component.atom.icon.Icon"),s=l.ns.get("plugin.atoms.component.atom.icon.Icons")||{};if(!s[e])return null;const o=s[e];return f.default.createElement(o,x({label:n,className:r(["atm-icon",`atm-icon__${N(e)}`],t)},i))}D.propTypes={icon:_.default.string.isRequired,className:_.default.string,label:_.default.string};const L=f.default.memo(D);class $ extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{alt:null,className:"",cover:!1,"data-e2e":null,height:null,layout:null,noloading:!1,placeholder:"",sizes:null,src:null,srcSet:null,width:null}}static defaultSelector(e){return u.defaultSelector(e,((e,{$Utils:t})=>{if(e=Object.assign({},e),(t.LegacyBrowserDetector.isLegacyClient()||t.RegressionHelper.isRegression()||t.LegacyBrowserDetector.isCrawlerBot())&&(e=Object.assign({},e,{noloading:!0})),t.RegressionHelper.isRegression()&&e.src){let n=e.src.split("?")[0];if(t.ColorHelper.isValidColor(n)){const i=t.ColorHelper.parseColor(n);e.src=p.generateImageDataUrl(i.red,i.green,i.blue)}}return e}))}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.image.Image")}render(){let e=this.getProps();return f.default.createElement(i.Image,e)}}class H extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{src:null,width:null,height:null,scrolling:"no",layout:null,sandbox:null,allowFullScreen:null,frameBorder:"0",noloading:!1,className:"",onLoad:null,"data-e2e":null}}static defaultSelector(e){return u.defaultSelector(e,((e,{$Utils:t})=>(e=Object.assign({},e),t.LegacyBrowserDetector.isLegacyClient()&&(e=Object.assign({},e,{noloading:!0})),e)))}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.iframe.Iframe")}render(){let e=this.getProps();return this.utils.RegressionHelper.isRegression()?(e.src="rgb(128, 0, 128)",f.default.createElement($,e)):f.default.createElement(i.Iframe,e)}}class j extends l.AbstractPureComponent{static get defaultProps(){return{content:null}}render(){const{content:e}=this.props;return e?f.default.createElement("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}}):null}}class U extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{children:null,className:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.label.Label")}render(){const{children:e}=this.props;return e?f.default.createElement("span",{className:this.cssClasses("atm-label",!0),"data-dot":"atm-label"},e):null}}const z=Object.freeze({VIDEO:"Video",LIVE:"Live"}),F=Object.freeze({IMAGE:"Image",EMBED:"Embed",POSTER:"Poster",...z}),B=Object.freeze({WIDTH60:60,WIDTH80:80,WIDTH160:160,WIDTH240:240,WIDTH320:320,WIDTH480:480,WIDTH600:600,WIDTH640:640,WIDTH722:722,WIDTH1024:1024,WIDTH1200:1200,WIDTH1280:1280,WIDTH2560:2560}),V=Object.freeze({ORIGINAL:"original",CRT4x3:"crt_4x3",DEFAULT16x9:"default_16x9",SQUARE1x1:"square_1x1",WIDE3x2:"wide_3x2"});var W=_.default.shape({_created:_.default.string,_createdByRole:_.default.string,_createdByUser:_.default.string,_id:_.default.string,_updated:_.default.string,_updatedByRole:_.default.string,_updatedByUser:_.default.string,expiration:_.default.number,geoblocking:_.default.shape({countries:_.default.arrayOf(_.default.string)}),keywords:_.default.arrayOf(_.default.string),name:_.default.string,url:_.default.string}),q=_.default.shape({_cls:_.default.oneOf(Object.keys(F).map((e=>F[e]))),_created:_.default.string,_createdByRole:_.default.string,_createdByUser:_.default.string,_id:_.default.string,_updated:_.default.string,_updatedByRole:_.default.string,_updatedByUser:_.default.string,author:_.default.string,authorUrl:_.default.string,backgroundColor:_.default.string,cdnServiceId:_.default.number,customId:_.default.string,expiration:_.default.string,isRunning:_.default.bool,keywords:_.default.arrayOf(_.default.string),liveStreamUrl:_.default.string,midrolls:_.default.arrayOf(_.default.object),playFromBeginning:_.default.bool,productPlacement:_.default.bool,sensitiveContent:_.default.bool,showAdvert:_.default.bool,showAdvertInLive:_.default.bool,sizes:_.default.string,skipEndTime:_.default.number,skipStartTime:_.default.number,slot:_.default.string,sources:_.default.oneOfType([_.default.string,W,_.default.arrayOf(_.default.string),_.default.arrayOf(W)]),srcSet:_.default.string,status:_.default.string,statusMessage:_.default.string,title:_.default.string,trims:_.default.shape({_cls:_.default.string,default:_.default.shape({_cls:_.default.string,trimH:_.default.number,trimW:_.default.number,trimX:_.default.number,trimY:_.default.number}),original:_.default.shape({_cls:_.default.string,trimH:_.default.number,trimW:_.default.number,trimX:_.default.number,trimY:_.default.number}),square:_.default.shape({_cls:_.default.string,trimH:_.default.number,trimW:_.default.number,trimX:_.default.number,trimY:_.default.number}),wide:_.default.shape({_cls:_.default.string,trimH:_.default.number,trimW:_.default.number,trimX:_.default.number,trimY:_.default.number})}),uid:_.default.number,url:_.default.string,video__poster__height:_.default.number,video__poster__url:_.default.string,video__poster__width:_.default.number,video__sdn:_.default.string,video__videoInfo__displayAspectRatio:_.default.number,video__videoInfo__duration:_.default.number,video__videoInfo__durationS:_.default.number});let G=_.default.shape({zoneId:_.default.number,startOffset:_.default.number,closeOffset:_.default.number,sectionPrefix:_.default.string}),K=_.default.shape({zoneId:_.default.number,skipOffset:_.default.number,sectionPrefix:_.default.string});var Z=Object.freeze({autoMidrollAds:_.default.bool,autoPlay:_.default.bool,autoPlaySubtitles:_.default.bool,autoPrerollAds:_.default.bool,embed:_.default.string,layoutContext:_.default.string,midrollMarketingSectionPrefix:_.default.string,midrollMarketingSkipOffset:_.default.number,midrollMarketingZoneId:_.default.number,midrollSectionPrefix:_.default.string,midrollSkipOffset:_.default.number,midrollZoneId:_.default.number,mutedAutoPlay:_.default.bool,mutedAutoPlaySubtitles:_.default.bool,overlayCloseOffset:_.default.number,overlaySectionPrefix:_.default.string,overlayStartOffset:_.default.number,overlayZoneId:_.default.number,pauseAdSectionPrefix:_.default.string,pauseAdZoneId:_.default.number,postrollSectionPrefix:_.default.string,postrollSkipOffset:_.default.number,postrollZoneId:_.default.number,prerollMarketingSectionPrefix:_.default.string,prerollMarketingSkipOffset:_.default.number,prerollMarketingZoneId:_.default.number,prerollSectionPrefix:_.default.string,prerollSkipOffset:_.default.number,prerollZoneId:_.default.number,preroll2SectionPrefix:_.default.string,preroll2SkipOffset:_.default.number,preroll2ZoneId:_.default.number});class Q extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{className:"",settings:{},properties:{alt:null,dataDot:"",media:{},placeholder:""},onShowLightbox:null}}static defaultSelector(e){return u.defaultSelector(e,((e,{$Utils:t})=>{let{properties:n,settings:i}=e,{caption:r,media:s}=n,{srcSet:o,sizes:a}=s,l=i.trim||V.ORIGINAL,c=i.width||B.WIDTH1200,d=i.layout||"responsive",p=i.cover||!1,m=t.MediaHelper.getImageSource(s,l,c);return r=void 0===r?m.caption:r,t.RegressionHelper.isRegression()&&(o=null,a=null),Object.assign({},u.intersectObjects(u.fillObject(["className","onShowLightbox","children"]),e),{alt:n.alt,caption:r,cover:p,dataDot:n.dataDot,height:m.height,layout:d,media:s,noloading:i.noloading,placeholder:n.placeholder,sizes:a,src:m.url,srcSet:o,width:m.width})}))}constructor(e,t){super(e,t),this._captionNode=null,this._showLightbox=this._showLightbox.bind(this)}componentDidMount(){this._captionNode&&this.utils.$Window.bindEventListener(this._captionNode,"touchstart",(()=>{}),!0)}componentWillUnmount(){this._captionNode&&this.utils.$Window.unbindEventListener(this._captionNode,"touchstart",(()=>{}),!0)}render(){let e=this.getProps();const{LegacyBrowserDetector:t}=this.utils,n=t.isLegacyClient()||t.isOutDatedClient()?"":e.placeholder;return f.default.createElement("div",{className:this.cssClasses({"atm-media-item-image":!0,[e.className]:e.className}),"data-dot":e.dataDot},f.default.createElement("div",{className:this.cssClasses("atm-media-item-image-events"),tabIndex:e.onShowLightbox?0:null,onClick:this._showLightbox,onKeyPress:this._showLightbox},f.default.createElement($,{alt:e.alt,cover:e.cover,height:e.height,layout:e.layout,noloading:e.noloading,placeholder:n,sizes:e.sizes,src:e.src,srcSet:e.srcSet,width:e.width})),e.caption?f.default.createElement("span",{className:this.cssClasses("atm-media-item-image-caption"),ref:e=>this._captionNode=e,"data-dot":"atm-media-item-image-caption"},f.default.createElement("span",{className:this.cssClasses("atm-media-item-image-caption-box")},f.default.createElement("span",{className:this.cssClasses("atm-media-item-image-caption-text")},e.caption))):null,e.children)}_showLightbox(e){let t=this.getProps();!t.onShowLightbox||e.keyCode&&32!==e.keyCode||t.onShowLightbox(e,t.media.index,t.media.collectionIndex||0)}}class Y extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{className:"",settings:{},properties:{},onShowLightbox:null}}static defaultSelector(e){return u.defaultSelector(e,((t,{$Utils:n})=>{t=Object.assign({},t);const{media:i}=t.properties;return n.RegressionHelper.isRegression()&&(t.settings.noloading=!0),i&&(t.MediaComponent=e.logics.getMediaComponent(i)),t}))}static logicFactory(){return{getMediaComponent:X}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.mediaItem.MediaItem")}render(){const e=this.getProps(),{MediaComponent:t}=e;return t?f.default.createElement(t,e):null}}function X(e,t){switch(t._cls){case F.IMAGE:case F.POSTER:return l.ns.get("plugin.atoms.component.atom.mediaItem.ImageMediaItem");case F.VIDEO:case F.LIVE:return l.ns.get("plugin.atoms.component.atom.mediaItem.VideoMediaItem");default:return m.warn(`plugin.atoms.component.atom.mediaItem.MediaItem: Unknown media type: ${t._cls}`),null}}const J=f.default.createContext();class ee extends u.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{applicationStartServerTimestamp:0,applicationStartServerTimezoneOffset:0,article:null,className:"",layout:null,properties:{},service:null,settings:{}}}static defaultSelector(e){return u.defaultSelector(e,((t,{$Utils:n})=>{const{logics:i}=e,{PlayerConfigurator:r}=n;return{...t,IframePlayer:i.getIframePlayerComponent(),isExpired:i.isMediaExpired(t),isLive:i.isMediaLive(t),mediaDimensions:i.getMediaDimensions(t),poster:r.getPoster(t),shouldRenderIframePlayer:i.shouldRenderIframePlayer(),Sizer:i.getSizerComponent(),sourceUrl:r.getSourceUrl(t),VideoExpiredPoster:i.getVideoExpiredPoster(),VideoLoadingPoster:i.getVideoLoadingPoster()}}))}static logicFactory(){return{getIframePlayerComponent:te,getMediaDimensions:ne,getSizerComponent:ie,getVideoExpiredPoster:re,getVideoLoadingPoster:se,isMediaExpired:oe,isMediaLive:ae,shouldRenderIframePlayer:le}}constructor(e,t){super(e,t),this._playerRef=f.default.createRef(),this._setupPlayerBound=this._setupPlayer.bind(this),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.mediaItem.VideoMediaItem")}componentDidMount(){this._playerRef&&this._playerRef.current&&!this.getProps().isExpired&&!this.utils.RegressionHelper.isRegression()&&this._registerPlayerVisibility()}componentWillUnmount(){this._unregisterPlayerVisibility()}render(){const{IframePlayer:e,isExpired:t,isLive:n,mediaDimensions:i,poster:r,shouldRenderIframePlayer:s,Sizer:o,sourceUrl:a,VideoExpiredPoster:l,VideoLoadingPoster:c}=this.getProps()||{};return a?f.default.createElement("div",{className:this.cssClasses({"atm-video-media-item":!0,"atm-video-media-item--live":n},!0)},f.default.createElement(o,{width:i.width||r.width,height:i.height||r.height}),t?f.default.createElement(l,null):s?f.default.createElement(e,{properties:this.props.properties,settings:this.props.settings}):f.default.createElement("div",{className:this.cssClasses({"atm-fill":!0,"atm-video-media-item__player-container":!0}),ref:this._playerRef},f.default.createElement(c,{url:r.url}))):null}onPlayerVisibilityWriter(e){e.viewportsToBeginOfVideo<1&&(this._unregisterPlayerVisibility(),this.utils.PlayerScriptLoader.load().then(this._setupPlayerBound))}_getPlayerVisibilityReader(){return()=>{const{componentPositions:e}=this.utils.$UIComponentHelper,t=e.getBoundingClientRect(this._playerRef.current),n=e.getWindowViewportRect();let i=0;return i=t.top>=0?(t.top-n.height)/n.height:Math.abs(t.top)/n.height,{viewportsToBeginOfVideo:i}}}_registerPlayerVisibility(){const{$UIComponentHelper:e}=this.utils;this._registeredVideoMediaItemVisibility=e.visibility.register(this._getPlayerVisibilityReader(),e.wrapVisibilityWriter((e=>this.onPlayerVisibilityWriter(e))))}_setupPlayer(){this._playerRef&&this._playerRef.current&&this.utils.PlayerConfigurator.configurePlayer(this.props,this.context,this._playerRef)}_unregisterPlayerVisibility(){this._registeredVideoMediaItemVisibility&&(this.utils.$UIComponentHelper.visibility.unregister(this._registeredVideoMediaItemVisibility),delete this._registeredVideoMediaItemVisibility)}}function te(){return l.ns.get("plugin.player.component.atom.iframePlayer.IframePlayer")}function ne(e,t){const{media:n}=t.properties,i=Number(n&&n.video&&n.video.videoInfo&&n.video.videoInfo.displayAspectRatio),r={width:0,height:0};return i>0&&(r.width=i,r.height=1),r}function ie(){return l.ns.get("ima.ui.atom.sizer.Sizer")}function re(){return l.ns.get("plugin.atoms.component.atom.videoPoster.VideoExpiredPoster")}function se(){return l.ns.get("plugin.atoms.component.atom.videoPoster.VideoLoadingPoster")}function oe(e,t){const{applicationStartServerTimestamp:n,applicationStartServerTimezoneOffset:i,properties:r}=t,{media:s}=r;if(!s||!s.expiration)return!1;const{ServerDateHelper:o}=e.$Utils,a=o.convertBEDateStringToTimestamp(s.expiration,i);return!o.isValidTimestamp(a)||!o.isValidTimestamp(n)||n>=a}function ae(e,t){const{media:n}=t.properties;return e.$Utils.MediaHelper.constructor.isLive(n)}function le(e){return(e.$Utils.$UIComponentHelper.isAmp()||e.$Utils.LegacyBrowserDetector.isLegacyClient())&&!e.$Utils.RegressionHelper.isRegression()}class ce extends u.AbstractPureComponent{static get contextType(){return J}render(){return f.default.createElement(ee,x({},this.context,this.props,{properties:{...this.context&&this.context.properties,...this.props.properties},settings:{...this.context&&this.context.settings,...this.props.settings}}))}}const ue=y.default((e=>({applicationStartServerTimestamp:e.applicationStartServerTimestamp,applicationStartServerTimezoneOffset:e.applicationStartServerTimezoneOffset,article:e.article,layout:e.layout,service:e.service})))(ce);c.hoistNonReactStatic(ue,ce);class de extends l.AbstractComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{src:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.pixel.Pixel")}componentDidMount(){this.utils.$Dispatcher.listen(l.RouterEvents.AFTER_HANDLE_ROUTE,this._hit,this)}shouldComponentUpdate(){return!1}componentWillUnmount(){this.utils.$Dispatcher.unlisten(l.RouterEvents.AFTER_HANDLE_ROUTE,this._hit,this)}render(){const{src:e}=this.props;return e?this.utils.$UIComponentHelper.isAmp()?f.default.createElement("amp-pixel",{src:e}):this.utils.LegacyBrowserDetector.isLegacyClient()?f.default.createElement("img",{src:e,alt:"",className:this.cssClasses("atm-pixel")}):null:null}_hit(){const{src:e}=this.props;if(!e)return null;(new Image).src=e}}const pe=Object.freeze({DARK:"dark",MEDIUM:"medium",LIGHT:"light"});class me extends l.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{aspectRatio:V.DEFAULT16x9,bgColor:pe.LIGHT,className:"",hasRoundedCorners:!1,isCircular:!1}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.imagePlaceholder.ImagePlaceholder")}render(){const{aspectRatio:e,hasRoundedCorners:t,isCircular:n,bgColor:i}=this.props,{width:r,height:s}=this._getWidthHeight(e);let o={},a="atm-image-placeholder--aspect-ratio-UNKNOWN";return r&&s&&(o={paddingTop:`${(s/r*100).toFixed(2)}%`},a=`atm-image-placeholder--aspect-ratio-${r}-${s}`,this.utils.CssRenderingHelper.registerInlineCss("plugin.election.component.organism.merkur.Merkur",o)),f.default.createElement("div",{style:o,className:this.cssClasses({"atm-image-placeholder":!0,"atm-image-placeholder--rounded-corners":t,"atm-image-placeholder--circular":n,"atm-image-placeholder--color-dark":i===pe.DARK,"atm-image-placeholder--color-medium":i===pe.MEDIUM,"atm-image-placeholder--color-light":i===pe.LIGHT,[a]:!0},!0)})}_getWidthHeight(e){let t={width:0,height:0};if(!e||"string"!=typeof e)return t;const n=e.match(/(\d+)x(\d+)/);return n&&3===n.length?{width:parseFloat(n[1]),height:parseFloat(n[2])}:t}}const he=Object.freeze({BIG:"big",MEDIUM:"medium",SMALL:"small"}),ge=Object.freeze({W100P:"w-100-p",W80P:"w-80-p",W60P:"w-60-p",W40P:"w-40-p",W15P:"w-15-p"});class fe extends l.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{bgColor:pe.LIGHT,className:"",height:he.SMALL,width:ge.W100P}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.textPlaceholder.TextPlaceholder")}render(){const{height:e,width:t,bgColor:n}=this.props;return f.default.createElement("span",{className:this.cssClasses({"atm-text-placeholder":!0,"atm-text-placeholder--big":e===he.BIG,"atm-text-placeholder--medium":e===he.MEDIUM,"atm-text-placeholder--small":e===he.SMALL,"atm-text-placeholder--w-100-p":t===ge.W100P,"atm-text-placeholder--w-80-p":t===ge.W80P,"atm-text-placeholder--w-60-p":t===ge.W60P,"atm-text-placeholder--w-40-p":t===ge.W40P,"atm-text-placeholder--w-15-p":t===ge.W15P,"atm-text-placeholder--color-dark":n===pe.DARK,"atm-text-placeholder--color-medium":n===pe.MEDIUM,"atm-text-placeholder--color-light":n===pe.LIGHT},!0)})}}const _e=["id","category","itemId","pageType","url","sid"];class ye extends l.AbstractComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{id:0,category:"",itemId:"",pageType:"",url:"",sid:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.sklikPixel.SklikPixel")}shouldComponentUpdate(){return!1}render(){return this.props.id?f.default.createElement(de,{src:this._getImgSrc()}):null}_createHitParams(){const e=_e.filter((e=>!!this.props[e])).map((e=>`${e}=${encodeURIComponent(this.props[e])}`)),t=this.utils.DotAnalytic.getEuconsent();return t&&2===t.euconsentVersion&&e.push(`euconsent=${encodeURIComponent(t.euconsent)}`),e.join("&")}_getImgSrc(){return`https://c.seznam.cz/retargeting?${this._createHitParams()}`}}class be extends l.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{className:"",label:"Upozornn"}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.videoPoster.icon.WarningIcon")}render(){const{className:e,label:t}=this.props;return f.default.createElement("svg",{"aria-label":t,className:e,version:"1.1",viewBox:"0 0 65 60",xmlns:"http://www.w3.org/2000/svg"},f.default.createElement("g",{fill:"#FFF",fillRule:"nonzero"},f.default.createElement("path",{d:"M33 20c-1.2 0-2 .783-2 1.957v14.086c0 1.174.8 1.957 2 1.957s2-.783 2-1.957V21.957C35 20.783 34.2 20 33 20zM34.556 44.571a2.403 2.403 0 0 0-3.112 0C31 44.952 31 45.714 31 46.095c0 .762 0 1.143.444 1.524.445.381 1.334.381 1.778.381.445 0 1.334 0 .89-.381.444-.38.888-1.143.888-1.524 0-.762 0-1.143-.444-1.524z"}),f.default.createElement("path",{d:"M63.562 44.903L40.937 5.033C39.403 1.934 35.952 0 32.5 0c-3.451 0-6.52 1.936-8.437 5.032L1.438 44.903a9.524 9.524 0 0 0 0 10.065C2.972 58.065 6.423 60 9.875 60h45.25c3.835 0 6.903-1.936 8.437-5.032a9.524 9.524 0 0 0 0-10.065zm-3.068 8.517c-.767 1.935-2.684 3.096-4.985 3.096H9.875c-1.918 0-3.835-1.16-4.985-3.096a5.99 5.99 0 0 1 0-6.194L27.515 7.355c.767-1.936 2.684-3.097 4.985-3.097 2.3 0 4.218 1.161 5.369 3.097l22.625 39.87a5.989 5.989 0 0 1 0 6.195z"})))}}class ve extends l.AbstractPureComponent{static get contextType(){return l.PageContext}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.videoPoster.VideoExpiredPoster")}render(){return f.default.createElement("div",{className:this.cssClasses("atm-video-expired-poster atm-fill"),"data-dot":"atm-video-expired-poster"},f.default.createElement("div",{className:this.cssClasses("atm-video-expired-poster__expire-message-container")},f.default.createElement(be,{className:this.cssClasses("atm-video-expired-poster__expire-message-icon")}),f.default.createElement("div",{className:this.cssClasses("atm-video-expired-poster__expire-message-text")},"Toto video u bohuel nememe pehrvat z dvodu vypren internetov licence")))}}class Ce extends l.AbstractPureComponent{static get contextType(){return l.PageContext}static get defaultProps(){return{url:""}}get Image(){return l.ns.get("plugin.atoms.component.atom.image.Image")}get ImagePlaceholder(){return l.ns.get("plugin.atoms.component.atom.imagePlaceholder.ImagePlaceholder")}get Loader(){return l.ns.get("ima.ui.atom.loader.Loader")}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.atoms.component.atom.videoPoster.VideoLoadingPoster")}render(){const{url:e}=this.props,{Image:t,ImagePlaceholder:n,Loader:i}=this,r=this.utils.RegressionHelper.isRegression();return f.default.createElement("div",{className:this.cssClasses({"atm-video-loading-poster":!0,"atm-video-loading-poster--regression":r,"atm-fill":!0,"atm-overflow":!0}),"data-dot":"atm-video-loading-poster"},f.default.createElement(n,{aspectRatio:"",className:this.cssClasses("atm-fill")}),e&&f.default.createElement(t,{layout:"fill",src:e}),r?f.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"Video regression placeholder"):f.default.createElement(i,{layout:"center",color:"white"}))}}function we(e,t){class n extends f.default.PureComponent{static get contextType(){return l.PageContext}constructor(e,n){super(e,n),this.context.$Utils.CssRenderingHelper.register(t)}render(){const{forwardedRef:t,...n}=this.props;return f.default.createElement(e,x({ref:t},n))}}function i(e,t){return f.default.createElement(n,x({},e,{forwardedRef:t}))}const r=e.displayName||e.name;return i.displayName=`CssRenderingHelperHOC(${r})`,f.default.forwardRef(i)}const Ee=new RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/i),Se=/(?:~")?(?:[a-z]+\s+(?:and|or)\s+)?([^"]*)"?/i;function Te(e,t={}){const n=e.getName(),i=parseFloat(e.getVersion()),r=e.getOSFamily();return!("1"===t.amp||"true"===t.amp)&&"iOS"!==r&&(-1!==["Chrome","Chrome Mobile"].indexOf(n)&&i>=23||"Android Browser"===n&&i>=4.3||"Opera"===n&&i>=12.1||"Microsoft Edge"===n&&i>=18||"Firefox"===n&&i>=65&&"Android"!==r||"Opera Mini"===n)}class Pe{static get $dependencies(){return["$Router",s.LinkHelper,r.UserAgent,s.RegressionHelper]}get IMAGE_CAPTION_PREFIX(){return"Foto"}get VIDEO_CAPTION_PREFIX(){return"Video"}static isVideo(e){return Object.values(z).includes(e&&e._cls)}static isLive(e){return(e&&e._cls)===z.LIVE}static isRunningLive(e){return Pe.isLive(e)&&e.isRunning}static isEmbedWithSeznamVideo(e){return e&&e.url&&(e.url.includes("televizeseznam.cz")||e.url.includes("stream.cz"))}constructor(e,t,n,i){this._router=e,this._linkHelper=t,this._userAgent=n,this._regressionHelper=i,this._cachedWebPSupport=null}renderCaptionWithLinks(e,t=this.IMAGE_CAPTION_PREFIX){let n,i;return e.sources&&e.sources.length&&(n=e.sources.map(((e,t)=>e.url?f.default.createElement(I,{key:t,href:e.url,target:"_blank"},e.name):f.default.createElement("span",{key:t},e.name))).reduce(((e,t)=>[e,", ",t]))),e.author&&(i=e.authorUrl?f.default.createElement(I,{href:e.authorUrl,target:"_blank"},e.author):f.default.createElement("span",null,e.author)),n?i?f.default.createElement(f.default.Fragment,null,t,": ",i,", ",n):f.default.createElement(f.default.Fragment,null,t,": ",n):i?f.default.createElement(f.default.Fragment,null,t,": ",i):void 0}getCaption(e,t=this.IMAGE_CAPTION_PREFIX){if(e.sources&&e.sources.length){const n=this._concatSources(e.sources);return e.author?`${t}: ${e.author}${n?", ":""}${n}`:`${t}: ${n}`}if(e.author)return`${t}: ${e.author}`}getCaptionImageForTimeline(e){return e&&(e.captionForTimeline||e.caption)}getImageSource(e,t,n=1200,i=0,r="jpeg",s=80){if(!e||"object"!=typeof e||!Object.keys(e).length)return{url:"",width:0,height:0,caption:""};const o=this._getImageUrl(e);if(o&&this._linkHelper.parseUrl(o).search)return e;"jpeg"===r&&this.isWebPSupported()&&(r="webp",s=80===s?75:s);let{trimX:a,trimY:l,trimW:c,trimH:u}=this._getTrims(e,t),d={url:o,width:Math.floor(c),height:Math.floor(u),caption:this.getCaption(e)};const p=this.isValidDataURI(o),m=!d.width||!d.height;if(m){if(d.width=n,d.height=Math.floor(n/16*9),!o)return d;d.url=o+(p?"":"?fl=crs,600,337,7")}if(!p){if(m||(d.url=`${o}?fl=cro,${Math.floor(a)},${Math.floor(l)},${Math.floor(c)},${Math.floor(u)}|res,${Math.floor(n)},,1`),i){const e=Math.floor(Math.sqrt(i));d.url+=`|blr,${i},${e}`}"jpeg"===r&&(d.url+=`|jpg,${s},,1`),"webp"===r&&(d.url+=`|webp,${s}`),this._regressionHelper.isRegression()||(d.url=encodeURI(d.url))}return d}isValidDataURI(e){return Ee.test(e)}isWebPSupported(){if(null!==this._cachedWebPSupport)return this._cachedWebPSupport;const e=this._router.getUrl(),t=this._linkHelper.parseUrl(e),n=this._linkHelper.parseQuery(t.search);return this._cachedWebPSupport=Te(this._userAgent,n),this._cachedWebPSupport}responsifyImage(e,t,n,i,r,s,o){let a=Object.assign({},e);if(n){let i=[],l=[];n.forEach((n=>{const{trimW:a}=this._getTrims(e,t),c=a&&a<=n?a:n;l.includes(c)||(l.push(c),i.push(`${this.getImageSource(e,t,n,r,s,o).url} ${c}w`))})),i.length>0&&(a.srcSet=i.join(", "))}if(i){let e=[];i.forEach((t=>{e.push(`${t.mediaCondition||""} ${t.width}`.trim())})),e.length>0&&(a.sizes=e.join(", "))}return a}toMediaCondition(e){let t=e.match(Se);return t[1]&&t[1].trim()?t[1].trim():null}_concatSources(e){return e.reduce(((t,n,i)=>n&&n.name?e[i+1]?`${t}${n.name}, `:`${t}${n.name}`:t),"")}_getImageUrl(e){return Pe.isVideo(e)?e.caption?e.caption.url:"":e.url}_getTrims(e,t){let n={};const i=Pe.isVideo(e)?e.caption&&e.caption.trims:e.trims;return i&&i[t]?n=i[t]:i&&i.original&&(n=i.original),n}_processError(e){}}let{UIComponentHelper:xe,Visibility:Ie,ComponentPositions:Ae,Sizer:ke,Video:Re}=g;const Me=we(i.Headline,"plugin.atoms.component.atom.headline.Headline"),Oe=we(i.Headline1,"plugin.atoms.component.atom.headline.Headline"),Ne=we(i.Headline2,"plugin.atoms.component.atom.headline.Headline"),De=we(i.Headline3,"plugin.atoms.component.atom.headline.Headline"),Le=we(i.Headline4,"plugin.atoms.component.atom.headline.Headline"),$e=we(i.Headline5,"plugin.atoms.component.atom.headline.Headline"),He=we(i.Headline6,"plugin.atoms.component.atom.headline.Headline"),je=we(i.H1,"plugin.atoms.component.atom.headline.Headline"),Ue=we(i.H2,"plugin.atoms.component.atom.headline.Headline"),ze=we(i.H3,"plugin.atoms.component.atom.headline.Headline"),Fe=we(i.H4,"plugin.atoms.component.atom.headline.Headline"),Be=we(i.H5,"plugin.atoms.component.atom.headline.Headline"),Ve=we(i.H6,"plugin.atoms.component.atom.headline.Headline"),We=we(i.Li,"plugin.atoms.component.atom.li.Li"),qe=we(i.ListItem,"plugin.atoms.component.atom.li.Li"),Ge=we(i.List,"plugin.atoms.component.atom.list.List"),Ke=we(i.OrderedList,"plugin.atoms.component.atom.list.List"),Ze=we(i.Ol,"plugin.atoms.component.atom.list.List"),Qe=we(i.UnorderedList,"plugin.atoms.component.atom.list.List"),Ye=we(i.Ul,"plugin.atoms.component.atom.list.List"),Xe=we(i.Loader,"plugin.atoms.component.atom.loader.Loader"),Je=we(i.P,"plugin.atoms.component.atom.paragraph.Paragraph"),et=we(i.Paragraph,"plugin.atoms.component.atom.paragraph.Paragraph");n.$registerImaPlugin=function(e){e.namespace("plugin.atoms.component.atom"),e.namespace("plugin.atoms.component.atom.image"),e.namespace("plugin.atoms.component.atom.iframe"),e.namespace("plugin.atoms.component.atom.label"),e.namespace("plugin.atoms.component.atom.link"),e.namespace("plugin.atoms.component.atom.date"),e.namespace("plugin.atoms.component.atom.expandButton"),e.namespace("plugin.atoms.component.atom.mediaItem"),e.namespace("plugin.atoms.component.atom.pixel"),e.namespace("plugin.atoms.component.atom.imagePlaceholder"),e.namespace("plugin.atoms.component.atom.textPlaceholder"),e.namespace("plugin.atoms.component.atom.sklikPixel"),e.namespace("plugin.atoms.component.atom.jsonLd"),e.namespace("plugin.atoms.component.atom.icon"),e.namespace("plugin.atoms.component.atom.videoPoster");let t=e.plugin.atoms.component.atom;t.image.Image=$,t.iframe.Iframe=H,t.label.Label=U,t.link.Link=M,t.date.FormattedDate=v,t.expandButton.ExpandButton=O,t.pixel.Pixel=de,t.imagePlaceholder.ImagePlaceholder=me,t.textPlaceholder.TextPlaceholder=fe,t.sklikPixel.SklikPixel=ye,t.jsonLd.JsonLd=j,t.icon.Icon=L,t.icon.BaseIcon=D,t.icon.Icons={...e.namespace("plugin.atoms.component.atom.icon.Icons")},t.videoPoster.VideoExpiredPoster=ve,t.videoPoster.VideoLoadingPoster=Ce;let n=t.mediaItem;n.MediaItem=Y,n.ImageMediaItem=Q,n.VideoMediaItem=ue},n.A=R,n.BaseFormattedDate=b,n.BaseIcon=D,n.ComponentPositions=Ae,n.ExpandButton=O,n.FormattedDate=v,n.H1=je,n.H2=Ue,n.H3=ze,n.H4=Fe,n.H5=Be,n.H6=Ve,n.Headline=Me,n.Headline1=Oe,n.Headline2=Ne,n.Headline3=De,n.Headline4=Le,n.Headline5=$e,n.Headline6=He,n.Icon=L,n.Iframe=H,n.Image=$,n.ImageMediaItem=Q,n.ImagePlaceholder=me,n.Img=$,n.JsonLd=j,n.Label=U,n.Li=We,n.Link=R,n.LinkRaw=I,n.List=Ge,n.ListItem=qe,n.Loader=Xe,n.MediaHelper=Pe,n.MediaItem=Y,n.MediaItemTypes=F,n.MediaSizes=B,n.MediaTrims=V,n.MediaType=q,n.MediaVideoTypes=z,n.Ol=Ze,n.OrderedList=Ke,n.OverlayAdvertType=G,n.P=Je,n.Paragraph=et,n.Pixel=de,n.PlaceholderThemes=pe,n.Sizer=ke,n.SklikPixel=ye,n.TextPlaceholder=fe,n.TextPlaceholderHeights=he,n.TextPlaceholderWidths=ge,n.UIComponentHelper=xe,n.Ul=Ye,n.UnorderedList=Qe,n.Video=Re,n.VideoAdvertType=K,n.VideoContext=J,n.VideoContextType=Z,n.VideoExpiredPoster=ve,n.VideoLoadingPoster=Ce,n.VideoMediaItem=ue,n.Visibility=Ie,n.camelToKebabCase=N,n.initBind=function(e,t){t.inject(Pe,["$Router",s.LinkHelper,r.UserAgent,s.RegressionHelper])},n.isWebPSupport=Te,n.relSponsoredLinkSelector=k,n.sameDomainLinkSelector=A},{"@cns/component-utils":4,"@cns/hooks":8,"@cns/pixel-generator":10,"@cns/utils":78,"@ima/core":81,"@ima/plugin-atoms":98,"@ima/plugin-logger":110,"@ima/plugin-select":139,"@ima/plugin-useragent":155,"prop-types":232,react:242}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/rest-api-client"),s=e("@cns/plugin-ab-testing"),o=e("react"),a=(e("prop-types"),e("@cns/plugin-article-molecules")),l=e("@cns/plugin-atoms"),c=e("@cns/plugin-squircle-mask");var u=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(o);class d extends r.AbstractEntity{static get dataFieldMapping(){return{id:"_id",metaKeywords:r.defaultToArray}}static get embeds(){return[{field:"layout",resource:i.ns.get("plugin.layout.LayoutEntity")},{field:"media",inline:!0,cache:!1},...this.getContentEmbeds(this.getContentEmbedsFields(),this.getContentEmbedsTypes())]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"author"}static getContentEmbedsFields(){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsFields()}static getContentEmbedsTypes(){let e=i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsTypes();return e.push("infobox"),e}static getContentEmbeds(e,t){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbeds(e,t)}get authorUrl(){return`${this.slug}-${this.uid}`}get urlParameters(){return{author:`${this.slug}-${this.uid}`}}constructor(e){super(e)}}const p=["layout"];class m extends r.AbstractService{static get $dependencies(){return[s.PageABTestRegistry,...r.defaultDependencies]}static get entityClass(){return i.ns.get("plugin.author.AuthorEntity")}constructor(e,...t){super(...t),this._pageABTestRegistry=e,Object.freeze(this)}get(e,t={},n={}){const i=super.get(e,t,n),r=this._pageABTestRegistry.getCurrentABTest();return s.applyAbTestModification(i,r,p)}}class h extends i.AbstractPureComponent{static get contextType(){return i.PageContext}static get defaultProps(){return{className:"",label:"Autor"}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.author.component.atom.icons.AuthorPlaceholderIcon")}render(){const{className:e,label:t}=this.props;return u.default.createElement("svg",{viewBox:"0 0 128 128",xmlns:"http://www.w3.org/2000/svg",className:this.cssClasses(e),"aria-label":t},u.default.createElement("path",{className:this.cssClasses("atm-icon__author-placeholder--light"),d:"M128 64a158.67 158.67 0 0 1-3.57 33.58A34.996 34.996 0 0 1 115 115a19.97 19.97 0 0 1-.95.91 35.147 35.147 0 0 1-16.4 8.52 157.51 157.51 0 0 1-20.64 3c-4.26.34-8.58.52-12.93.52s-8.63-.17-12.93-.52a157.861 157.861 0 0 1-20.64-3A35.004 35.004 0 0 1 14 115.9c-.32-.3-.64-.6-.95-.91l-.11-.12a35 35 0 0 1-9.37-17.3 159.62 159.62 0 0 1 0-67.14A35.08 35.08 0 0 1 30.43 3.57a159.62 159.62 0 0 1 67.14 0 35 35 0 0 1 26.86 26.86A158.71 158.71 0 0 1 128 64Z"}),u.default.createElement("path",{className:this.cssClasses("atm-icon__author-placeholder--dark"),d:"M90.25 71.42a13.25 13.25 0 0 0 9.59-11.67l.13-1.68a10.31 10.31 0 0 0-2.71-7.77c-.07-.07-.15-.14-.22-.22.246-.33.441-.693.58-1.08 2.69-7.78 2-15.11-2-20.66a20.32 20.32 0 0 0-16-8.23c-14.15-7.88-28.8-7.76-39.35.36-9.06 7-13 18.29-10.16 28.83.107.394.276.769.5 1.11A10.31 10.31 0 0 0 28 58.07l.13 1.68a13.24 13.24 0 0 0 9.59 11.67c2.7 10.83 11.74 22.81 23.77 24.4.832.113 1.67.173 2.51.18a19.644 19.644 0 0 0 2.47-.18c12.04-1.59 21.08-13.57 23.78-24.4ZM65.43 87.88a8.58 8.58 0 0 1-2.86 0c-8.41-1.1-15.33-10.52-17.2-19 0-.1 0-.42-.09-1.19a4 4 0 0 0-4-3.77 5.19 5.19 0 0 1-5.15-4.77L36 57.46a2.21 2.21 0 0 1 .6-1.72 2.25 2.25 0 0 1 1.68-.74h2.6a4 4 0 0 0 3.5-2.11c.251-.304.46-.64.62-1l.21-.49c2.47-5.39 5.92-6 12.87-6.81 5.9-.67 13.46-1.54 20.37-8h.34a19.07 19.07 0 0 1 4.33 12.11V51a4 4 0 0 0 4 4h2.6a2.25 2.25 0 0 1 1.67.73 2.209 2.209 0 0 1 .6 1.72l-.13 1.68a5.19 5.19 0 0 1-5.15 4.77 4 4 0 0 0-4 3.77c0 .77-.08 1.09-.09 1.19-1.86 8.5-8.78 17.92-17.19 19.02Z"}),u.default.createElement("path",{className:this.cssClasses("atm-icon__author-placeholder--dark"),d:"M114.89 115a35.151 35.151 0 0 1-17.33 9.41A158.692 158.692 0 0 1 64 128a158.446 158.446 0 0 1-33.57-3.57A35.001 35.001 0 0 1 13.11 115c3.46-4.08 14.56-16.71 22-20.19a7.88 7.88 0 0 1 3.38-.75A8 8 0 0 1 43.74 96c5.93 5.11 11.53 8 16.63 8.72 1.17.16 2.35.244 3.53.25a26.571 26.571 0 0 0 3.52-.25c5.28-.69 11-3.73 17-9A8 8 0 0 1 93 94.44l.35.15c6.44 2.92 15.08 12.41 21.54 20.41Z"}))}}var g=Object.freeze({"author-placeholder":h});const f={twitter:{label:"twitter"},facebook:{label:"facebook"}};class _ extends i.AbstractComponent{static get contextType(){return i.PageContext}static get defaultProps(){return{article:null,author:null,className:"",properties:{},settings:{showBio:!1,showRole:!1,showSocialNetworks:!1}}}static get requiredProps(){return["article","author"]}get author(){let{article:e,author:t}=this.props;return!t&&e&&e.authors&&e.authors.length&&(t=e.authors[0]),t}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.author.component.organism.authorBox.AuthorBox")}render(){return this._areResourcesLoaded()?u.default.createElement("div",{className:this.cssClasses({"ogm-author-box":!0},!0),"data-dot":"ogm-author-box"},this._renderPhoto(),u.default.createElement("div",{className:this.cssClasses("ogm-author-box__right-container")},u.default.createElement("div",{className:this.cssClasses("ogm-author-box__right-top-container")},this._renderName(),this._renderRole()),this._renderSocialLinks(),this._renderBio())):null}_renderBio(){const{showBio:e}=this.props.settings;if(!e)return null;const t=this._getAuthorParagraphs();return t.length?u.default.createElement("div",{className:this.cssClasses("ogm-author-box__bio")},t.map(((e,t)=>u.default.createElement(a.Paragraph,{className:this.cssClasses("ogm-author-box__paragraph"),key:t,properties:e.properties,settings:e.settings})))):null}_renderName(){const{author:e}=this;return u.default.createElement(l.Link,{className:this.cssClasses({"ogm-author-box__name":!0}),href:this.link("author",e),"data-dot":"ogm-author-box__name"},e.name)}_renderPhoto(){const{media:e}=this.author;return u.default.createElement("div",{className:this.cssClasses("ogm-author-box__photo")},e?u.default.createElement(c.SquircleMask,{iconUri:this.utils.MediaHelper.getImageSource(e,l.MediaTrims.SQUARE1x1,l.MediaSizes.WIDTH240).url}):u.default.createElement(l.Icon,{icon:"author-placeholder"}))}_renderRole(){const{showRole:e}=this.props.settings,{author:t}=this;return e&&t.role?u.default.createElement("div",{className:this.cssClasses("ogm-author-box__role")},t.role):null}_renderSocialLinks(){const e=[];if(this.props.settings.showSocialNetworks&&(Object.keys(f).forEach((t=>{const n=this.author[t]||null;n&&e.push({label:f[t].label,url:n})})),this.author.email&&e.push({label:"e-mail",url:`mailto:${this.author.email}`})),e.length)return u.default.createElement("div",{className:this.cssClasses({"ogm-author-box__social-links":!0})},e.map(((e,t)=>u.default.createElement(l.Link,{key:t,className:this.cssClasses("ogm-author-box__social-link"),href:e.url,target:"_blank","data-dot":"ogm-author-box__social-link","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement({index:t})},e.label))))}_areResourcesLoaded(){return!!this.author}_getAuthorParagraphs(){const{author:e}=this,{content:t}=e||{};return Array.isArray(t)?t.filter((e=>e&&"molecule.paragraph.Paragraph"===e.component)):[]}}n.$registerImaPlugin=e=>{e.set("plugin.author.AuthorEntity",d),e.set("plugin.author.AuthorService",m),e.set("plugin.author.component.organism.authorBox.AuthorBox",_),e.set("plugin.author.component.atom.icons.Icons",g),e.set("plugin.author.component.atom.icons.AuthorPlaceholderIcon",h),e.set("plugin.atoms.component.atom.icon.Icons",{...e.get("plugin.atoms.component.atom.icon.Icons"),...g})},n.AuthorBox=_,n.AuthorEntity=d,n.AuthorPlaceholderIcon=h,n.AuthorService=m,n.Icons=g},{"@cns/plugin-ab-testing":12,"@cns/plugin-article-molecules":18,"@cns/plugin-atoms":20,"@cns/plugin-squircle-mask":24,"@cns/rest-api-client":76,"@ima/core":81,"prop-types":232,react:242}],22:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":21,dup:8}],23:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=(i=e("react"))&&"object"==typeof i&&"default"in i?i.default:i,s=e("@ima/core");function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var l=a((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,m=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116,_=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case s:case a:case o:case m:return e;default:switch(e=e&&e.$$typeof){case c:case p:case f:case g:case l:return e;default:return t}}case r:return t}}}function C(e){return v(e)===d}t.typeOf=v,t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=p,t.Fragment=s,t.Lazy=f,t.Memo=g,t.Portal=r,t.Profiler=a,t.StrictMode=o,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===o||e===m||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===_||e.$$typeof===y||e.$$typeof===b)},t.isAsyncMode=function(e){return C(e)||v(e)===u},t.isConcurrentMode=C,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return v(e)===p},t.isFragment=function(e){return v(e)===s},t.isLazy=function(e){return v(e)===f},t.isMemo=function(e){return v(e)===g},t.isPortal=function(e){return v(e)===r},t.isProfiler=function(e){return v(e)===a},t.isStrictMode=function(e){return v(e)===o},t.isSuspense=function(e){return v(e)===m}}));o(l),l.typeOf,l.AsyncMode,l.ConcurrentMode,l.ContextConsumer,l.ContextProvider,l.Element,l.ForwardRef,l.Fragment,l.Lazy,l.Memo,l.Portal,l.Profiler,l.StrictMode,l.Suspense,l.isValidElementType,l.isAsyncMode,l.isConcurrentMode,l.isContextConsumer,l.isContextProvider,l.isElement,l.isForwardRef,l.isFragment,l.isLazy,l.isMemo,l.isPortal,l.isProfiler,l.isStrictMode,l.isSuspense;var c=a((function(e,n){"production"!==t.env.NODE_ENV&&function(){Object.defineProperty(n,"__esModule",{value:!0});var e,t="function"==typeof Symbol&&Symbol.for,i=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,m=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,f=t?Symbol.for("react.lazy"):60116,_=t?Symbol.for("react.fundamental"):60117,y=t?Symbol.for("react.responder"):60118,b=t?Symbol.for("react.scope"):60119,v=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=0,s="Warning: "+e.replace(/%s/g,(function(){return n[r++]}));"undefined"!=typeof console&&console.warn(s);try{throw new Error(s)}catch(e){}};e=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];v.apply(void 0,[t].concat(i))}};var C=e;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:var n=e.type;switch(n){case u:case d:case s:case a:case o:case m:return n;default:var h=n&&n.$$typeof;switch(h){case c:case p:case f:case g:case l:return h;default:return t}}case r:return t}}}var E=u,S=d,T=c,P=l,x=i,I=p,A=s,k=f,R=g,M=r,O=a,N=o,D=m,L=!1;function $(e){return w(e)===d}n.typeOf=w,n.AsyncMode=E,n.ConcurrentMode=S,n.ContextConsumer=T,n.ContextProvider=P,n.Element=x,n.ForwardRef=I,n.Fragment=A,n.Lazy=k,n.Memo=R,n.Portal=M,n.Profiler=O,n.StrictMode=N,n.Suspense=D,n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===o||e===m||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===_||e.$$typeof===y||e.$$typeof===b)},n.isAsyncMode=function(e){return L||(L=!0,C(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),$(e)||w(e)===u},n.isConcurrentMode=$,n.isContextConsumer=function(e){return w(e)===c},n.isContextProvider=function(e){return w(e)===l},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},n.isForwardRef=function(e){return w(e)===p},n.isFragment=function(e){return w(e)===s},n.isLazy=function(e){return w(e)===f},n.isMemo=function(e){return w(e)===g},n.isPortal=function(e){return w(e)===r},n.isProfiler=function(e){return w(e)===a},n.isStrictMode=function(e){return w(e)===o},n.isSuspense=function(e){return w(e)===m}}()}));o(c),c.typeOf,c.AsyncMode,c.ConcurrentMode,c.ContextConsumer,c.ContextProvider,c.Element,c.ForwardRef,c.Fragment,c.Lazy,c.Memo,c.Portal,c.Profiler,c.StrictMode,c.Suspense,c.isValidElementType,c.isAsyncMode,c.isConcurrentMode,c.isContextConsumer,c.isContextProvider,c.isElement,c.isForwardRef,c.isFragment,c.isLazy,c.isMemo,c.isPortal,c.isProfiler,c.isStrictMode,c.isSuspense;var u=a((function(e){"production"===t.env.NODE_ENV?e.exports=l:e.exports=c})),d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function h(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var g=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,i,r=h(e),s=1;s<arguments.length;s++){for(var o in n=Object(arguments[s]))p.call(n,o)&&(r[o]=n[o]);if(d){i=d(n);for(var a=0;a<i.length;a++)m.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r},f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_=function(){};if("production"!==t.env.NODE_ENV){var y=f,b={},v=Function.call.bind(Object.prototype.hasOwnProperty);_=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function C(e,n,i,r,s){if("production"!==t.env.NODE_ENV)for(var o in e)if(v(e,o)){var a;try{if("function"!=typeof e[o]){var l=Error((r||"React class")+": "+i+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.");throw l.name="Invariant Violation",l}a=e[o](n,o,r,i,null,y)}catch(e){a=e}if(!a||a instanceof Error||_((r||"React class")+": type specification of "+i+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in b)){b[a.message]=!0;var c=s?s():"";_("Failed "+i+" type: "+a.message+(null!=c?c:""))}}}C.resetWarningCache=function(){"production"!==t.env.NODE_ENV&&(b={})};var w=C,E=Function.call.bind(Object.prototype.hasOwnProperty),S=function(){};function T(){return null}"production"!==t.env.NODE_ENV&&(S=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});function P(){}function x(){}x.resetWarningCache=P,a((function(e){if("production"!==t.env.NODE_ENV){var n=u;e.exports=function(e,n){var i="function"==typeof Symbol&&Symbol.iterator,r="<<anonymous>>",s={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:l(T),arrayOf:function(e){return l((function(t,n,i,r,s){if("function"!=typeof e)return new a("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new a("Invalid "+r+" `"+s+"` of type `"+p(o)+"` supplied to `"+i+"`, expected an array.");for(var l=0;l<o.length;l++){var c=e(o,l,i,r,s+"["+l+"]",f);if(c instanceof Error)return c}return null}))},element:l((function(t,n,i,r,s){var o=t[n];return e(o)?null:new a("Invalid "+r+" `"+s+"` of type `"+p(o)+"` supplied to `"+i+"`, expected a single ReactElement.")})),elementType:l((function(e,t,n,i,r){var s=e[t];return u.isValidElementType(s)?null:new a("Invalid "+i+" `"+r+"` of type `"+p(s)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return l((function(t,n,i,s,o){if(!(t[n]instanceof e)){var l=e.name||r;return new a("Invalid "+s+" `"+o+"` of type `"+((c=t[n]).constructor&&c.constructor.name?c.constructor.name:r)+"` supplied to `"+i+"`, expected instance of `"+l+"`.")}var c;return null}))},node:l((function(e,t,n,i,r){return d(e[t])?null:new a("Invalid "+i+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return l((function(t,n,i,r,s){if("function"!=typeof e)return new a("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var o=t[n],l=p(o);if("object"!==l)return new a("Invalid "+r+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected an object.");for(var c in o)if(E(o,c)){var u=e(o,c,i,r,s+"."+c,f);if(u instanceof Error)return u}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&S(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),T;function n(t,n,i,r,s){for(var l=t[n],c=0;c<e.length;c++)if(o(l,e[c]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===m(t)?String(t):t}));return new a("Invalid "+r+" `"+s+"` of value `"+String(l)+"` supplied to `"+i+"`, expected one of "+u+".")}return l(n)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&S("Invalid argument supplied to oneOfType, expected an instance of array."),T;for(var n=0;n<e.length;n++){var i=e[n];if("function"!=typeof i)return S("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+h(i)+" at index "+n+"."),T}return l((function(t,n,i,r,s){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,i,r,s,f))return null;return new a("Invalid "+r+" `"+s+"` supplied to `"+i+"`.")}))},shape:function(e){return l((function(t,n,i,r,s){var o=t[n],l=p(o);if("object"!==l)return new a("Invalid "+r+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var d=u(o,c,i,r,s+"."+c,f);if(d)return d}}return null}))},exact:function(e){return l((function(t,n,i,r,s){var o=t[n],l=p(o);if("object"!==l)return new a("Invalid "+r+" `"+s+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");var c=g({},t[n],e);for(var u in c){var d=e[u];if(!d)return new a("Invalid "+r+" `"+s+"` key `"+u+"` supplied to `"+i+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=d(o,u,i,r,s+"."+u,f);if(m)return m}return null}))}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function a(e){this.message=e,this.stack=""}function l(e){if("production"!==t.env.NODE_ENV)var i={},s=0;function o(o,l,c,u,d,p,m){if(u=u||r,p=p||c,m!==f){if(n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var g=u+":"+c;!i[g]&&s<3&&(S("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),i[g]=!0,s++)}}return null==l[c]?o?null===l[c]?new a("The "+d+" `"+p+"` is marked as required in `"+u+"`, but its value is `null`."):new a("The "+d+" `"+p+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(l,c,u,d,p)}var l=o.bind(null,!1);return l.isRequired=o.bind(null,!0),l}function c(e){return l((function(t,n,i,r,s,o){var l=t[n];return p(l)!==e?new a("Invalid "+r+" `"+s+"` of type `"+m(l)+"` supplied to `"+i+"`, expected `"+e+"`."):null}))}function d(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(d);if(null===t||e(t))return!0;var n=function(e){var t=e&&(i&&e[i]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var r,s=n.call(t);if(n!==t.entries){for(;!(r=s.next()).done;)if(!d(r.value))return!1}else for(;!(r=s.next()).done;){var o=r.value;if(o&&!d(o[1]))return!1}return!0;default:return!1}}function p(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function m(e){if(null==e)return""+e;var t=p(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function h(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return a.prototype=Error.prototype,s.checkPropTypes=w,s.resetWarningCache=w.resetWarningCache,s.PropTypes=s,s}(n.isElement,!0)}else e.exports=function(){function e(e,t,n,i,r,s){if(s!==f){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:x,resetWarningCache:P};return n.PropTypes=n,n}()}));class I extends s.AbstractPureComponent{static get contextType(){return s.PageContext}static get defaultProps(){return{iconUri:null}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.squircleMask.component.atom.squircleMask.SquircleMask"),this._sequentialUId=0,this.utils.ComponentHelper&&(this._sequentialUId=this.utils.ComponentHelper.sequentialUId())}get maskId(){return`atm-icon-mask-${this._sequentialUId}`}render(){const{children:e,iconUri:t}=this.props;return t||e?r.createElement("svg",{className:this.cssClasses({"atm-icon-mask":!0},!0),version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("mask",{id:this.maskId},r.createElement("rect",{x:"0",y:"0",width:"40",height:"40",fill:"#000000"}),r.createElement("path",{fill:"#ffffff",fillRule:"nonzero",d:"M30.49 38.885a10.948 10.948 0 0 0 8.394-8.393A49.607 49.607 0 0 0 40 20c0-3.6-.385-7.11-1.116-10.491a10.948 10.948 0 0 0-8.392-8.393A49.611 49.611 0 0 0 20 0C16.4 0 12.89.385 9.51 1.116A10.949 10.949 0 0 0 1.116 9.51 49.6 49.6 0 0 0 0 19.999c0 3.6.385 7.11 1.116 10.492a10.949 10.949 0 0 0 8.393 8.393A49.584 49.584 0 0 0 20 40c3.6 0 7.11-.385 10.49-1.115"}))),e||r.createElement("image",{xlinkHref:t,mask:`url(#${this.maskId})`,height:"40",width:"40"})):null}}n.$registerImaPlugin=e=>{e.namespace("plugin.squircleMask.component.atom"),e.namespace("plugin.squircleMask.component.atom.squircleMask"),e.plugin.squircleMask.component.atom.squircleMask.SquircleMask=I},n.SquircleMask=I}).call(this)}).call(this,e("_process"))},{"@ima/core":81,_process:228,react:242}],24:[function(e,t,n){"use strict";t.exports=e("./dist/client.cjs.js")},{"./dist/client.cjs.js":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-less-constants/units"),r=e("react"),s=(e("prop-types"),e("@ima/core")),o=e("@cns/component-utils"),a=e("@cns/plugin-atoms");var l=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r);const c={breadcrumb:{color:{text:i.hex("808080")},separator:'"\\00BB"'}},u=e=>e.map(((e,t)=>({"@type":"ListItem",position:t+1,name:e.text,item:e.href})));class d extends o.AbstractPureComponent{static get contextType(){return s.PageContext}static get defaultProps(){return{article:null,author:null,className:"",properties:{breadcrumb:null},section:null,settings:{withoutJsonLd:!1},tag:null}}static get requiredProps(){return["article","author","section","tag","merkurWidget"]}get pluginSettings(){return this.utils.$Settings.plugin.cns.plugin.breadcrumbNavigation}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.breadcrumbNavigation.component.organism.breadcrumbNavigation.BreadcrumbNavigation")}render(){const{withoutJsonLd:e}=this.props.settings,t=this._getNavigationItems();return t&&t.length?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:this.cssClasses({"ogm-breadcrumb-navigation":!0},!0),"data-dot":"ogm-breadcrumb-navigation"},this._renderItems(t)),!e&&this._renderJsonLd(t)):null}_renderItems(e){return e.filter((e=>e.text&&e.href&&e.key)).map(((e,t)=>l.default.createElement(a.Link,{className:this.cssClasses("ogm-breadcrumb-navigation__link"),key:e.key,href:e.href,"data-dot":"ogm-breadcrumb-navigation-item","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement({position:t})},l.default.createElement("span",null,e.text))))}_renderJsonLd(e){return l.default.createElement(a.JsonLd,{content:(t=e,{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:u(t.filter((e=>e.text&&e.href)))})});var t}_createItemLinkParams(e,t={}){const n={};return Object.entries(e||{}).forEach((([e,i])=>{const r=this._replaceReferences(i,t);(r||""===r)&&(n[e]=r)})),0===Object.keys(n).length?null:n}_createItemUrl(e,t={},n={}){const i=this._replaceReferences(e,n),r=this._createItemLinkParams(t,n);return r?this.link(i,r):null}_generateArticleItem(e){if(!this.pluginSettings.article)return;const{linkText:t,linkRoute:n}=this.pluginSettings.article,{article:i}=this.props;i&&e.push({key:"article",text:this._replaceReferences(t),href:this.link(n,i)})}_generateHomeItem(e){if(!this.pluginSettings.home)return;const{linkText:t,linkRoute:n}=this.pluginSettings.home;e.push({key:"home",text:this._replaceReferences(t),href:this.link(n)})}_generateLastItem(e){const t=this.utils.$Router.getCurrentRouteInfo().route.getName(),{routes:n,linkText:i,linkRoute:r,linkParams:s,linkEntity:o}=e;let a="";if(n.includes(t)){if(o){const e=this.utils.StringReferencesHelper.getReferenceData(o,Object.assign({},this.context,this.props));if(!e)return null;a=this.link(r,e)}else if(s&&(a=this._createItemUrl(r,s),!a))return null;return{key:`lastItem-${i}`,text:this._replaceReferences(i),href:a}}}_generateLastItems(e){(this.pluginSettings.lastItems||[]).forEach((t=>{const n=this._generateLastItem(t);n&&e.push(n)}))}_generateSectionItem(e){if(!this.pluginSettings.section)return;const{linkText:t,linkRoute:n}=this.pluginSettings.section,i=this.utils.SectionHelper,{article:r,section:s}=this.props;let o=s;r&&(o=i.getPrimarySection(r)),i.getParentSectionsTree(o).forEach((i=>e.push({key:`section-${i.uid}`,text:this._replaceReferences(t,{section:i}),href:this.link(n,i)})))}_getAbsoluteUrl(e){if("string"==typeof e&&!e.startsWith("http")){const t=e.startsWith("/")?e:`/${e}`;return`${this.utils.$Router.getBaseUrl()}${t}`}return e}_getDefaultItems(){const e=[];return this._itemGeneratorMethods().forEach((t=>{"function"==typeof t&&t(e)})),e}_getNavigationItems(){const{breadcrumb:e}=this.props.properties;return e&&e.length?this._parseBreadcrumbProps(e):this._getDefaultItems()}_itemGeneratorMethods(){return[this._generateHomeItem.bind(this),this._generateSectionItem.bind(this),this._generateArticleItem.bind(this),this._generateLastItems.bind(this)]}_parseBreadcrumbProps(e){return e.filter((e=>e.text&&e.href)).map((e=>({key:`breadcrumbItem-${e.text}-${e.href}`,text:this._replaceReferences(e.text),href:this._getAbsoluteUrl(this._replaceReferences(e.href))})))}_replaceReferences(e,t={}){return e?this.utils.StringReferencesHelper.replaceReferences(e,Object.assign({},this.context,this.props,t)):""}}n.$registerImaPlugin=e=>{e.namespace("app.component.organism.breadcrumbNavigation").BreadcrumbNavigation=d,e.namespace("plugin.breadcrumbNavigation.component.organism.breadcrumbNavigation").BreadcrumbNavigation=d},n.BreadcrumbNavigation=d,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{breadcrumbNavigation:{home:{linkText:"",linkRoute:"home"},section:{linkText:"@section.name",linkRoute:"section"},article:{linkText:"@article.title",linkRoute:"detail"},lastItems:[{routes:["author"],linkText:"@author.name",linkRoute:"author",linkEntity:"@author"}]}}}}}}),n.layout=c},{"@cns/component-utils":4,"@cns/plugin-atoms":20,"@ima/core":81,"@ima/plugin-less-constants/units":103,"prop-types":232,react:242}],26:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":25,dup:8}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var core=require("@ima/core"),helpers=require("@ima/helpers"),pluginStyleLoader=require("@ima/plugin-style-loader"),utils=require("@cns/utils"),React=require("react"),pluginAtoms=require("@cns/plugin-atoms");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React);const NONE_PREVIEW={values:{unavailable:{}},current:"unavailable"};class ComponentController extends core.AbstractController{static get $dependencies(){return["$Router","$Http",pluginStyleLoader.StyleLoaderPlugin,"$Window",utils.DeviceHelper]}get extendLoadEntities(){return{}}constructor(e,t,n,i,r){super(),this._router=e,this._http=t,this._styleLoaderPlugin=n,this._window=i,this._deviceHelper=r}init(){}load(){const e=this._createLayoutEntityDecoratorFromData.bind(this);return Object.assign({params:this._getParams(),preselectedNamespace:this.params.namespace,article:this._loadResourceWithLayouts("article",core.ns.get("plugin.article.ArticleEntity"),["layout"]),author:this._loadResourceWithLayouts("author",core.ns.get("plugin.author.AuthorEntity"),["layout"]),feedEntity:this._loadResource("article",core.ns.get("plugin.article.ArticleEntity")),gallery:this._loadResource("gallery",Object),layout:this._loadResource("layout",(function(t){return e(t)})),ribbonMerkurWidget:this._loadResource("ribbonMerkurWidget",Object),service:this._loadResourceWithLayouts("service",core.ns.get("plugin.service.ServiceEntity"),["layout"]),previews:this._getPreviews(this.params.namespace),loading:!1},this.extendLoadEntities)}setMetaParams(){}onSelectPreview(e){let t=this.getState(),n=Object.assign({},t.previews.values[e].params);n.preview={current:e,values:t.params.preview.values},n.namespace=t.params.namespace,n.extraParams.hideSettings=!1,this._updateComponent(n)}onSettingsUpdateVisibility(){let e=this.getState().params;e.extraParams.hideSettings=!e.extraParams.hideSettings,this.setState({params:e})}onTextareaUpdated(e){let t=this.getState().params,n={};n[e]=!1,t=helpers.assignRecursively({},t,{updateTextarea:n}),this.setState({params:t})}onUpdatePreselectedNamespace(e){this.setState({preselectedNamespace:e,previews:NONE_PREVIEW}),this._getPreviews(e).then((t=>{delete t.values[this._getCustomPreview().current];let n={};if(t.current=Object.keys(t.values)[0],t.current===NONE_PREVIEW.current)return n.componentProps={},n.extraParams={},n.namespace=e,n.updateTextarea={componentProps:!0,extraParams:!0},void this.setState({params:n,waitForUpdate:!0});n=Object.assign({},this.params,t.values[t.current].params),n=helpers.assignRecursively({},n,{namespace:e},{extraParams:{hideSettings:!1}}),delete n.preview,this._updateComponent(n)}))}onUpdateSettings(e){let t=this._getCustomPreview(e),n=Object.assign({},this.params,e,{preview:t});delete n.suite,this._updateComponent(n)}_createLayoutEntityDecoratorFromData(e){const t=core.ns.get("plugin.layout.LayoutEntity");return new(core.ns.get("plugin.layout.LayoutEntityDecorator"))(new t(e),this._deviceHelper)}_getCustomPreview(e={}){return{values:{">>> CUSTOM <<<":{params:{componentProps:JSON.parse(e.componentProps||"{}"),extraParams:JSON.parse(e.extraParams||"{}")}}},current:">>> CUSTOM <<<"}}_getParams(){let e=this.params;return e.suite?this._getParamsForPreview().then((t=>Object.assign({},e,t,t.extraParams))):(e=this._getParsedKeys(e,["componentProps","extraParams","preview","updateTextarea"]),e=Object.assign({},e,e.extraParams),Promise.resolve(e))}_getParamsForPreview(){return this._loadPreviews(this.params.namespace).then((e=>e[this.params.suite].params))}_getParsedKeys(e,t){return t.forEach((t=>{try{e[t]instanceof Object||(e[t]=JSON.parse(e[t]||"{}"))}catch(n){console.warn(`Unable to parse object key ${t}`,e),console.warn(n)}})),e}_getPreviewKey(e){return e.replace(/ima\.ui\.|app\.component\.|plugin\.atoms\.component\./,"")}_getPreviews(e){return new Promise(((t,n)=>{this._loadPreviews(e).then((e=>{if(!e)return console.warn("There are no previews available for the selected component."),void t(NONE_PREVIEW);this._getParams().then((n=>{let i=this.params.preview&&this.params.preview.current,r={};n.preview&&n.preview.values&&n.preview.values[this._getCustomPreview().current]&&(r[this._getCustomPreview().current]=n.preview.values[this._getCustomPreview().current]),t({values:Object.assign({},r,e),current:i||Object.keys(e)[0]})}))})).catch((e=>{n(e)}))}))}_getStringifiedKeys(e,t){return t.forEach((t=>{try{"string"!=typeof e[t]&&(e[t]=JSON.stringify(e[t]||{}))}catch(n){console.warn(`Unable to stringify object key ${t}`,e),console.warn(n)}})),e}_isPreviewAvailable(e){return this._makeRequest("/regression",(function(e){return Object.keys(e)})).then((t=>t.includes(this._getPreviewKey(e))))}_loadPreviews(e){let t="/regression/"+this._getPreviewKey(e);return this._isPreviewAvailable(e).then((e=>e?this._makeRequest(t,(function(e){return e})):null))}_loadResource(e,t,n=null){return n=n||"/"+e,this._getParams().then((i=>i.extraParams&&i.extraParams[e]?this._makeRequest(n,t):null))}_loadResourceWithLayouts(e,t,n){const i=this._createLayoutEntityDecoratorFromData.bind(this);return this._loadResource(e,(function(e){const r=Object.assign({},e);return n.forEach((e=>{r[e]=i(r[e])})),new t(r)}))}_loadTemplateResource(e){return this._loadResourceWithLayouts(e,core.ns.get("plugin.service.ServiceEntity"),["layout","articleLayout","authorLayout"])}_makeRequest(e,t){return this.setState({loading:!0}),this._http.get(this._router.getBaseUrl()+"/pro/mockApi"+e).then((e=>{$Debug=!1;let n=Reflect.construct(t,[e.body]);return $Debug=!1,this.setState({loading:!1}),n})).catch((e=>{console.warn("Unable to load mockApi resource",e),this.setState({loading:!1})}))}_updateComponent(e){e.updateTextarea={componentProps:!0,extraParams:!0},(e=this._getStringifiedKeys(e,["componentProps","extraParams","preview","updateTextarea"])).regression=!0,e.service="pro",this._router.redirect(this._router.link("component",e))}}class Combobox extends core.AbstractComponent{static get contextType(){return core.PageContext}static get defaultProps(){return{currentValue:"",values:[],disabled:!1,onChange:null}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("app.page.component.settings.Previews")}render(){return React__default.default.createElement("select",{className:this.cssClasses("component-view-settings-combobox"),value:this.props.currentValue,disabled:this.props.disabled,onChange:this.props.onChangeEvent},this.props.values.sort().map((e=>React__default.default.createElement("option",{key:e},e))))}}class NamespaceSelector extends core.AbstractComponent{static get contextType(){return core.PageContext}static get defaultProps(){return{preselectedNamespace:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("app.page.component.settings.NamespaceSelector")}componentDidMount(){let e=this._getPreselectedNamespace(this.props.preselectedNamespace);e!==this.props.preselectedNamespace&&this.fire("updatePreselectedNamespace",e)}render(){let e=this.props.preselectedNamespace.split("."),t=core.ns,n=[];return React__default.default.createElement("div",{className:this.cssClasses("component-view-settings-namespace-selector")},e.map(((e,i)=>{let r=n,s=Object.keys(t);return n.push(e),t=t[e],React__default.default.createElement(Combobox,{values:s,currentValue:e,onChangeEvent:e=>this._handleNamespaceSelectorChange(e,r,i),key:e})})))}_handleNamespaceSelectorChange(e,t,n){t[n]=e.target.value,t=t.slice(0,n+1);let i=this._getPreselectedNamespace(t.join("."));this.fire("updatePreselectedNamespace",i)}_getPreselectedNamespace(e){let t=e||"app.component",n=t.split("."),i=core.ns.get(t);for(;i&&!(i instanceof Function||i instanceof Array)&&!(i instanceof Object&&i.render instanceof Function);){let e=Object.keys(i)[0];n.push(e),i=core.ns.get(n.join("."))}return n.join(".")}}class Previews extends core.AbstractComponent{static get contextType(){return core.PageContext}static get defaultProps(){return{previews:{current:"",values:{}}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("app.page.component.settings.Previews")}render(){let e=Object.keys(this.props.previews&&this.props.previews.values||{});return React__default.default.createElement("div",{className:this.cssClasses("component-view-settings-content-previews")},React__default.default.createElement(Combobox,{values:e,currentValue:this.props.previews&&this.props.previews.current,disabled:"unavailable"===e[0],onChangeEvent:e=>this._handlePreviewUpdated(e)}))}_handlePreviewUpdated(e){e.preventDefault(),this.fire("selectPreview",e.target.value)}}class Textarea extends core.AbstractComponent{static get contextType(){return core.PageContext}static get defaultProps(){return{title:"",name:"",textareaRef:null,textareaDataRef:null,data:{},shouldReload:!1}}constructor(e,t){super(e,t),this.state={data:this._getFormattedData(this.props)},this.utils.CssRenderingHelper.register("app.page.component.settings.Textarea")}componentDidUpdate(e){e!==this.props&&this.props.shouldReload&&(this.setState({data:this._getFormattedData(this.props)}),this.fire("textareaUpdated",this.props.name))}render(){return React__default.default.createElement("div",{className:this.cssClasses("component-view-settings-textarea-box")},React__default.default.createElement("p",null,this.props.title,":"),React__default.default.createElement("textarea",{name:this.props.name,ref:this.props.textareaRef,value:this.state.data,onChange:e=>this._textAreaChanged(e),onKeyDown:e=>this._processTab(e)}))}_getFormattedData(e){return JSON.stringify(e.data,null,"\t")}_processTab(e){if(9===e.keyCode){e.preventDefault();let t=this.state.data,n=e.target.selectionStart,i=e.target.selectionEnd,r={};r.data=t.substring(0,n)+"\t"+t.substring(i),this.setState(r,(()=>{this.props.textareaDataRef.selectionStart=this.props.textareaDataRef.selectionEnd=n+1}))}}_textAreaChanged(e){this.setState({data:e.target.value})}}class Settings extends core.AbstractComponent{static get contextType(){return core.PageContext}constructor(e,t){super(e,t),this._bindedSettingsSubmit=this._settingsSubmit.bind(this),this._bindedUpdateAdvancedSettingsVisibility=this._updateAdvancedSettingsVisibility.bind(this),this.state={showAdvancedSettings:!1},this.utils.CssRenderingHelper.register("plugin.componentView.page.componentView.settings.Settings")}componentDidMount(){this.utils.$Window.bindEventListener(this.utils.$Window.getWindow(),"keydown",this._bindedSettingsSubmit),this.utils.$Window.bindEventListener(this.utils.$Window.getWindow(),"keydown",this._bindedUpdateAdvancedSettingsVisibility)}componentWillUnmount(){this.utils.$Window.unbindEventListener(this.utils.$Window.getWindow(),"keydown",this._bindedSettingsSubmit),this.utils.$Window.unbindEventListener(this.utils.$Window.getWindow(),"keydown",this._bindedUpdateAdvancedSettingsVisibility)}render(){return React__default.default.createElement("div",{className:this.cssClasses("component-view-settings-content")},React__default.default.createElement("form",{onSubmit:e=>this._handleSubmit(e)},React__default.default.createElement("div",{className:this.cssClasses("component-view-settings-content-top")},React__default.default.createElement(NamespaceSelector,{preselectedNamespace:this.props.preselectedNamespace}),React__default.default.createElement(Previews,{previews:this.props.previews})),React__default.default.createElement("div",{className:this.cssClasses({"component-view-settings-textarea-hidden":!this.state.showAdvancedSettings})},React__default.default.createElement("div",null,React__default.default.createElement(Textarea,{title:"Props",name:"componentProps",textareaRef:e=>this.textareaProps=e,textareaDataRef:this.textareaProps,data:this.props.params.componentProps,shouldReload:this.props.params.updateTextarea&&this.props.params.updateTextarea.componentProps}),React__default.default.createElement(Textarea,{title:"Params",name:"extraParams",textareaRef:e=>this.textareaParams=e,textareaDataRef:this.textareaParams,data:this.props.params.extraParams,shouldReload:this.props.params.updateTextarea&&this.props.params.updateTextarea.extraParams}))),React__default.default.createElement("p",null,"Shortcuts: Show/Hide settings (alt + T), Show/Hide Advanced settings (alt + A), Update settings (alt + S)"),React__default.default.createElement("div",null,React__default.default.createElement("input",{className:this.cssClasses("component-view-settings-button-default"),type:"button",value:this.state.showAdvancedSettings?"Hide Advanced Settings":"Show Advanced Settings",onClick:()=>this.setState({showAdvancedSettings:!this.state.showAdvancedSettings})}),React__default.default.createElement("input",{className:this.cssClasses("component-view-settings-button-submit"),type:"submit",value:"Update settings"}))))}_handleSubmit(event){event.preventDefault();let propsInput=this.textareaProps.value||"{}",paramsInput=this.textareaParams.value||"{}",newComponentProps=JSON.stringify(eval(`(${propsInput})`)),newParams=JSON.stringify(eval(`(${paramsInput})`));this.fire("updateSettings",{componentProps:newComponentProps,extraParams:newParams,namespace:this.props.preselectedNamespace})}_settingsSubmit(e){e.altKey&&83===e.keyCode&&this._handleSubmit(e)}_updateAdvancedSettingsVisibility(e){e.altKey&&65===e.keyCode&&this.setState({showAdvancedSettings:!this.state.showAdvancedSettings})}}class ComponentView extends core.AbstractComponent{static get contextType(){return core.PageContext}static get pageClassName(){return"page-component"}get allowedResources(){return["article","author","layout","service","timelines","gallery","ribbonMerkurWidget"].concat(this.extendAllowedResources)}get extendAllowedResources(){return[]}constructor(e,t){super(e,t),this._bindedSettingsUpdateVisibility=this._settingsUpdateVisibility.bind(this),this.utils.CssRenderingHelper.register("plugin.componentView.page.componentView.ComponentView")}componentDidMount(){this.utils.$Window.bindEventListener(this.utils.$Window.getWindow(),"keydown",this._bindedSettingsUpdateVisibility)}componentWillUnmount(){this.utils.$Window.unbindEventListener(this.utils.$Window.getWindow(),"keydown",this._bindedSettingsUpdateVisibility)}render(){let{params:e}=this.props;return e?(this.willRender(),React__default.default.createElement("div",{className:this.cssClasses("component-view")},e.extraParams.hideSettings?null:React__default.default.createElement(Settings,this.props),React__default.default.createElement("div",{className:this.cssClasses(`skin-${e.extraParams.skin}`)},React__default.default.createElement("div",{className:this.cssClasses(e.className)},this._renderComponent())))):React__default.default.createElement(pluginAtoms.Loader,null)}_renderComponent(){if(!this._isLoadedResources()||this.props.loading)return React__default.default.createElement(pluginAtoms.Loader,null);if(this.props.waitForUpdate)return React__default.default.createElement("div",null,"There is no preview available, set Advenced Settings and click Update Settings to display the component.");let e=core.ns.get(this.props.params.namespace||""),t=this.props.params.componentProps,n={};try{this._handleReplaces(t),this._assign(n,t)}catch(e){return console.error(e),React__default.default.createElement("div",null,"An error occured while parsing data for the component.")}if(t=Object.assign({},t,n),!(e instanceof Function||e instanceof Object&&"function"==typeof e.render))return React__default.default.createElement("div",null,`Component with namespace "${this.props.params.namespace}" is not valid react element.`);let i=Object.assign({},this.props,t);return i.template&&i.template.layout&&i.template.service&&(i.service=i[i.template.service],i.layout=i[i.template.service][i.template.layout]),React__default.default.createElement("div",{id:"component-view-container",className:this.cssClasses({"component-view-container":!0,"component-view-card-container":"app.component.molecule.card.Card"===this.props.params.namespace,"component-view-feed-item-container":"app.component.molecule.feedItem.FeedItem"===this.props.params.namespace},!0)},React__default.default.createElement(e,i))}_handleArrayAssign(e){let t=e.slice();return t.forEach(((n,i)=>{this._isReference(n)?t[i]=this._handleMockAssign(n):"string"==typeof n?n.startsWith("@@")?t[i]=n.substr(1):t[i]=n:this._assign(t[i],e[i])})),t}_handleMockAssign(e){let t=e.replace(/\]/g,"").split(/\.|\[/),n=t[0].replace("@",""),i=this.props[n];if(!i)throw Error(`Mock '${n}' does not exist or is not loaded yet. Maybe you forgot to update ComponentView.extendAllowedResources with new mock entity?`);for(let r=1;r<t.length;r++){if(t&&t[r]&&void 0===i[t[r]])throw Error(`Cannot find entity '${t[r]}' inside the '${n}' mock with path '${e}'.`);i=i[t[r]]}return i}_handleReplaces(e){let t=this._loadReplaces(e);Object.keys(t).forEach((e=>{let n=this._pathToJSON(e,t[e]);this._assign(this.props,n)}))}willRender(){}_assign(e,t){Object.keys(t).forEach((n=>{t[n]instanceof Array?e[n]=this._handleArrayAssign(t[n]):t[n]instanceof Object&&!(t[n]instanceof Function)?(e[n]instanceof Object||(e[n]={}),this._assign(e[n],t[n])):this._isReference(t[n])?e[n]=this._handleMockAssign(t[n]):"string"==typeof t[n]&&t[n].startsWith("@@")?e[n]=t[n].substr(1):e[n]=t[n]}))}_isLoadedResources(){return Object.keys(this.props.params.extraParams).filter((e=>this.allowedResources.includes(e))).reduce(((e,t)=>e&&!!this.props[t]),!0)}_isReference(e){return"string"==typeof e&&"@"===e.charAt(0)&&"@"!==e.charAt(1)}_loadReplaces(e){let t=this.props.params.extraParams.replaces||{},n=e.replaces||{};return Object.assign({},t,n)}_pathToJSON(e,t){let n=e.replace(/\]/g,"").split(/\.|\[/),i=t;for(let e=n.length-1;e>=0;e--){let t={};t[n[e]]=i,i=t}return i}_settingsUpdateVisibility(e){e.altKey&&84===e.keyCode&&this.fire("settingsUpdateVisibility")}}exports.ComponentController=ComponentController,exports.ComponentView=ComponentView},{"@cns/plugin-atoms":20,"@cns/utils":78,"@ima/core":81,"@ima/helpers":83,"@ima/plugin-style-loader":149,react:242}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=e("prop-types"),s=e("@ima/core"),o=e("@cns/plugin-atoms"),a=e("@cns/plugin-advert"),l=e("@ima/plugin-logger"),c=e("@cns/plugin-user");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(i),p=u(r);const m=p.default.shape({abVariant:p.default.number,alg:p.default.arrayOf(p.default.string),id:p.default.number,img:p.default.string,requestId:p.default.string,service:p.default.string,serviceName:p.default.string,title:p.default.string,url:p.default.string});class h extends s.AbstractComponent{static get contextType(){return s.PageContext}static get defaultProps(){return{className:"",properties:{advert:null,item:null,isAdvertItem:!1},settings:{renderPlaceholder:!1},onClick:null}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.crossdomainRecommendation.component.molecule.seznamRecommendsItem.SeznamRecommendsItem")}render(){const{renderPlaceholder:e}=this.props.settings;if(e)return this._renderPlaceholder();const{advert:t,index:n=0,isAdvertItem:i}=this.props.properties;let r,s=!1;if(i&&t){const e=this.utils.SklikHelper.transformData(t);if(Array.isArray(e.ads)&&e.ads[0]){const{adImageUrl:t,adTag:i,longHeadline:o,clickUrl:a}=e.ads[0];s=!0,r={id:`${n+1}`,img:t,service:"advert",serviceName:i||this.localize("seznamRecommendsItem.advertLabel"),title:o,url:a}}}else r=this.props.properties.item;if(!r)return null;const{id:a,img:l,service:c,serviceName:u,title:p,url:m}=r;return d.default.createElement(o.Link,{className:this.cssClasses("mol-seznam-recommends-item"),"data-dot":"mol-seznam-recommends-item","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement({position:n+1,serviceName:u}),"data-dot-text":p,href:m,key:a&&c?`${c}_${a}`:n,onClick:s?null:()=>this.onClick()},d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item__image")},d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item__image-sizer")},d.default.createElement(o.Image,{alt:p,layout:"fill",src:l}))),d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item__text-box")},d.default.createElement("p",{className:this.cssClasses("mol-seznam-recommends-item__service-name")},d.default.createElement(o.Label,{className:this.cssClasses({"mol-seznam-recommends-item__label--is-advert":s,"mol-seznam-recommends-item__label--is-service":!s})},u)),d.default.createElement(o.H4,{className:this.cssClasses("mol-seznam-recommends-item__title")},p)))}_renderPlaceholder(){return d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item")},d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item__image")},d.default.createElement(o.ImagePlaceholder,null)),d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item__text-box")},d.default.createElement("div",{className:this.cssClasses("mol-seznam-recommends-item__service-name")},d.default.createElement(o.TextPlaceholder,{width:o.TextPlaceholderWidths.W40P})),d.default.createElement(o.H4,{className:this.cssClasses("mol-seznam-recommends-item__title")},d.default.createElement(o.TextPlaceholder,null),d.default.createElement(o.TextPlaceholder,{width:o.TextPlaceholderWidths.W80P}))))}onClick(){const{onClick:e}=this.props,{item:t,index:n}=this.props.properties;"function"==typeof e&&e({item:t,index:n})}}class g extends s.AbstractComponent{static get contextType(){return s.PageContext}static get defaultProps(){return{className:"",properties:{},settings:{zoneId:0,advertType:""},seznamRecommendsItems:[]}}static get requiredProps(){return["seznamRecommendsItems"]}get useIntersectionObserver(){const{$Settings:e}=this.utils;return!(e&&e.plugin&&e.plugin.uiAtoms&&e.plugin.uiAtoms.useIntersectionObserver&&!1===e.plugin.uiAtoms.useIntersectionObserver.images)}constructor(e,t){super(e,t),this.utils.$UIComponentHelper.isAmp()||this.utils.CssRenderingHelper.register("plugin.crossdomainRecommendation.component.organism.seznamRecommends.SeznamRecommends"),this._advertHasBeenHit=!1,this._alreadyHitImpressForItemsOnIndexes=[],this._nativeAdvertPointer=d.default.createRef()}render(){const{seznamRecommendsItems:e}=this.props;return this.utils.$UIComponentHelper.isAmp()?null:e&&Array.isArray(e)?this._renderContent():null}_renderContent(){const{seznamRecommendsItems:e}=this.props;return d.default.createElement("aside",{"aria-labelledby":"accessibility-seznam-recommends",className:this.cssClasses("ogm-seznam-recommends"),"data-dot":"ogm-seznam-recommends",role:"complementary"},d.default.createElement("div",{className:this.cssClasses("ogm-seznam-recommends__content")},e.length?this._renderItems():this._renderPlaceholders()))}_renderItems(){const{seznamRecommendsItems:e}=this.props;return this._hitSeznamRecommendsItemsImpress(),e.slice(0,4).map(((e,t)=>{const{id:n,service:i}=e,r=n&&i?`${i}_${n}`:t;let s;return s=e.shouldRenderAdvert?this._renderNativeAdvertWrapper(e,t):d.default.createElement(h,{properties:{item:e,index:t},onClick:this.onSeznamRecommendsItemClick.bind(this)}),d.default.createElement("div",{key:r,className:this.cssClasses("ogm-seznam-recommends__item")},s)}))}_renderNativeAdvertWrapper(e,t){const{seznamRecommendsItems:n}=this.props,{zoneId:i,advertType:r}=this.props.settings;return d.default.createElement(a.NativeAdvertWrapper,{className:this.cssClasses("ogm-seznam-recommends__native-advert"),ref:this._nativeAdvertPointer,settings:{advertType:r,zoneId:i},properties:{advertComponent:h,advertComponentProps:{properties:{index:t,isAdvertItem:!0}},placeholderComponent:h,placeholderComponentProps:{settings:{renderPlaceholder:!0}},missComponent:h,missComponentProps:{properties:{item:n[4]||{},index:t}}},onAdvertFetched:this.onAdvertFetched.bind(this),onNoAdvertAvailable:this.onNoAdvertAvailable.bind(this)})}_renderPlaceholders(){let e=[];for(let t=0;t<4;t++)e.push(d.default.createElement("div",{key:`placeholder-on-position-${t}`,className:this.cssClasses("ogm-seznam-recommends__item")},d.default.createElement(h,{settings:{renderPlaceholder:!0}})));return e}onAdvertFetched(e){if(e&&Array.isArray(e.ads)&&e.ads[0]){const t=e.ads[0];this._hitAdvert(t.impressUrl),this._loadLazyAssets()}}onNoAdvertAvailable(){const{seznamRecommendsItems:e}=this.props;e[4]&&this._hitSeznamRecommendsItemsImpress(4)}onSeznamRecommendsItemClick({item:e,index:t}){e&&this.utils.DotAnalytic.hit(this._getDataForSeznamRecommendsItemClick(e,t))}_getDataAboutNotClickedSeznamRecommendsItems(e){const{settings:t,seznamRecommendsItems:n}=this.props;let i={rem_ids:[],rem_pos:[],rem_req_ids:{}};for(let r=0;r<4;r++)if(n[r]&&r!==e){let e=n[r];e.shouldRenderAdvert&&!t.zoneId&&(e=n[4]),e&&!e.shouldRenderAdvert&&(i.rem_ids.push(e.id),i.rem_pos.push(r+1),i.rem_req_ids[e.requestId]?i.rem_req_ids[e.requestId].push(i.rem_ids.length-1):i.rem_req_ids[e.requestId]=[i.rem_ids.length-1])}return i}_getDataForSeznamRecommendsItemClick(e,t){return Object.assign({},{action:"dop-car-click",id:e.id,service:e.service,pos:t+1,href:e.url,ab:e.abVariant,alg:e.alg,req_id:e.requestId},this._getDataAboutNotClickedSeznamRecommendsItems(t))}_getDataForSeznamRecommendsItemsImpress(e){const{seznamRecommendsItems:t}=this.props;let n={action:"dop-car-impress"};const i=e||3;for(let r=e||0;r<=i;r++)if(t[r]&&!t[r].shouldRenderAdvert){const e=t[r],i=e.service;n[`${i}-ab`]=e.abVariant,n[`${i}-req-id`]=e.requestId,n[`${i}-ids`]?n[`${i}-ids`].push(e.id):n[`${i}-ids`]=[e.id],n[`${i}-algs`]?n[`${i}-algs`].push(e.alg):n[`${i}-algs`]=[e.alg]}return n}_hitAdvert(e){this._advertHasBeenHit||(this._advertHasBeenHit=!0,this._nativeAdvertPointer&&this._nativeAdvertPointer.current&&this._nativeAdvertPointer.current.onExternalRender(),e&&this.utils.SspHelper.served([e]))}_hitSeznamRecommendsItemsImpress(e=null){(!e&&!this._alreadyHitImpressForItemsOnIndexes.includes("0-3")||e&&!this._alreadyHitImpressForItemsOnIndexes.includes(e))&&(this.utils.DotAnalytic.hit(this._getDataForSeznamRecommendsItemsImpress(e)),this._alreadyHitImpressForItemsOnIndexes.push(e||"0-3"))}_loadLazyAssets(){const{$UIComponentHelper:e,$Window:t}=this.utils;!t.isClient()||this.useIntersectionObserver&&t.getWindow().IntersectionObserver||e.visibility.notify()}}class f extends s.AbstractExtension{static get $dependencies(){return[s.Dispatcher,s.HttpAgent,"DotAnalytic","$Settings.plugin.cns.plugin.crossdomainRecommendation","$Settings.plugin.cns.plugin.service.serviceSlug"]}constructor(e,t,n,i,r){super(),this._dispatcher=e,this._httpAgent=t,this._dotAnalytic=n,this._seznamRecommendsSettings=i,this._crossDomainRecommendationAlreadyFetched=!1,this._defaultHeaders={Accept:"application/json","Content-Type":"application/json"},this._options={headers:this._defaultHeaders,timeout:this._seznamRecommendsSettings.requestTimeout},this._serviceSlug=r}init(){this._dispatcher.listen(c.Events.INIT,this._fetchSeznamRecommendsArticles,this)}getAllowedStateKeys(){return["seznamRecommendsItems"]}load(){return{seznamRecommendsItems:[]}}destroy(){this._crossDomainRecommendationAlreadyFetched=!1}_appendAdvert(e){const t=Math.floor(Math.random()*e.length);return e.splice(t,0,{shouldRenderAdvert:!0}),e}_fetchSeznamRecommendsArticles(e){const{rusId:t}=e||{},{layout:n}=this.getState();!this._crossDomainRecommendationAlreadyFetched&&n&&n.isComponentPresent(this._seznamRecommendsSettings.organismNamespace)&&this._makeCrossdomainRecommendationApiCall(t).then((e=>{if(e&&e.body){const t=this._appendAdvert(e.body);this._crossDomainRecommendationAlreadyFetched=!0,this.setState({seznamRecommendsItems:t})}})).catch((e=>{l.warn(e),this.setState({seznamRecommendsItems:null})}))}_makeCrossdomainRecommendationApiCall(e){const{apiUrl:t,recommendedDocumentsCount:n}=this._seznamRecommendsSettings;return t?(e&&(e=e.toString()),this._httpAgent.post(t,{recommendedDocumentsCount:n,requestingService:this._serviceSlug,rusId:e,sid:this._dotAnalytic.getSid()||null,...this._dotAnalytic.getEuconsent()},this._options)):Promise.reject(new Error("Crossdomain recommendation api url has to be set."))}}n.$registerImaPlugin=e=>{e.namespace("plugin.crossdomainRecommendation.component.molecule.seznamRecommendsItem"),e.namespace("plugin.crossdomainRecommendation.component.organism.seznamRecommends");const t=e.plugin.crossdomainRecommendation.component;t.molecule.seznamRecommendsItem.SeznamRecommendsItem=h,t.organism.seznamRecommends.SeznamRecommends=g},n.SeznamRecommends=g,n.SeznamRecommendsExtension=f,n.SeznamRecommendsItem=h,n.SeznamRecommendsItemType=m,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{crossdomainRecommendation:{apiUrl:"https://share.seznam.cz/crossdomain/v1/recommend",organismNamespace:"organism.seznamRecommends.SeznamRecommends",recommendedDocumentsCount:4,requestTimeout:5e3}}}}},test:{plugin:{cns:{plugin:{crossdomainRecommendation:{apiUrl:"https://share.crossdomain.seznam.test.dszn.cz/v1/recommend"}}}}},dev:{plugin:{cns:{plugin:{crossdomainRecommendation:{apiUrl:"https://share.crossdomain.seznam.dev.dszn.cz/v1/recommend"}}}}}})},{"@cns/plugin-advert":15,"@cns/plugin-atoms":20,"@cns/plugin-user":75,"@ima/core":81,"@ima/plugin-logger":110,"prop-types":232,react:242}],29:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":28,dup:8}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/plugin-atoms"),s=e("@cns/utils"),o=e("@ima/plugin-merkur"),a=e("react"),l=e("prop-types"),c=e("@cns/hooks"),u=e("@merkur/integration-react/lib/index.es9.cjs"),d=e("@merkur/plugin-router/lib/index.es9.cjs"),p=e("@ima/plugin-select"),m=e("@cns/component-utils");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=h(a),f=h(l),_=h(p);class y extends i.AbstractController{static get $dependencies(){return[s.ExtensionsHelper,i.Router,i.HttpAgent,s.StringReferencesHelper,r.MediaHelper,s.LinkHelper,"plugin.election.LayoutService","plugin.election.SectionService","plugin.election.ServiceService","$Settings.plugin.cns.plugin.election"]}constructor(e,t,n,i,r,s,o,a,l,c){super(),this._extensionsHelper=e,this._router=t,this._httpAgent=n,this._stringReferencesHelper=i,this._mediaHelper=r,this._linkHelper=s,this._layoutService=o,this._sectionService=a,this._serviceService=l,this._settings=c}init(){this._extensionsHelper.addExtensionsToController(this)}load(){const e=this._serviceService.get(),t=this._fetchLandingPage(),n=t.then((e=>this._layoutService.loadById(e.layout))),i=t.then((e=>e.sections&&e.sections.length?this._sectionService.get(e.sections[0]):null));return{service:e,landingPage:t,layout:n,section:i}}setMetaParams(e,t,n){const{landingPage:{metaTitle:i="",metaDescription:s="",metaKeywords:o=[],caption:a}}=e,l=this._replaceReference(i),c=this._replaceReference(s),u=this._replaceKeywordsReference(o);let d="",p=this._linkHelper.getCanonicalUrl(n.getUrl());a&&a.url&&(a.itemType=a._cls,d=this._mediaHelper.getImageSource(a,r.MediaTrims.DEFAULT16x9,r.MediaSizes.WIDTH1200,0,null).url,d.startsWith("http")||(d=n.getProtocol()+d)),t.setTitle(l),t.setMetaName("description",c),t.setMetaName("keywords",u),t.setMetaName("twitter:title",l),t.setMetaName("twitter:description",c),t.setMetaName("twitter:card","summary_large_image"),t.setMetaName("twitter:site",""),t.setMetaName("twitter:image",d),t.setMetaName("twitter:url",p),t.setMetaProperty("og:title",l),t.setMetaProperty("og:description",c),t.setMetaProperty("og:type","website"),t.setMetaProperty("og:image",d),t.setMetaProperty("og:url",p),t.setLink("canonical",p),t.setLink("previewimage",d)}_fetchLandingPage(){const{apiUrl:e}=this._settings,t=this._router.getPath().split("?")[0];return this._httpAgent.get(`${e}${t}&embedded=caption`,{},{withCredentials:!1}).then((e=>e.body))}_replaceKeywordsReference(e){return this._stringReferencesHelper.replaceKeywordsReferences(e,this.getState())}_replaceReference(e){return this._stringReferencesHelper.replaceReferences(e,this.getState())}}class b extends i.AbstractExtension{static get $dependencies(){return[i.Router,o.MerkurResource,"$UIComponentHelper",s.DeviceHelper]}constructor(e,t,n,i){super(),this._router=e,this._merkurResource=t,this._uiComponentHelper=n,this._deviceHelper=i}load(){return{merkurWidget:this.getAllMerkurData()}}fetchMerkurData(e,t,n){const i=e.properties||{};if(!i.key)throw new Error("Missing 'key' in Merkur component properties");const r=i.requestParams?i.requestParams.map((e=>({[e.key]:e.value}))):[],s=Object.assign({},n,...r),o=`.merkur-widget-${i.key}`;return s.containerSelector=o,t.length&&(s.slot={},t.forEach((({properties:e})=>{s.slot[e.slotName]={containerSelector:`${o}-${e.slotName}`}}))),this._merkurResource.get(i.apiUrl,s,{method:i.method||"get",withCredentials:!1,ttl:3e4}).then((e=>({[i.key]:{widgetProperties:e.body}}))).catch((e=>{if(e.getHttpStatus&&404===e.getHttpStatus())throw e;return{[i.key]:{error:e}}}))}getAllMerkurData(){const e=this._router.getCurrentRouteInfo().route.toPath({}),t=this._router.getPath().split("?")[0],{layout:n}=this.getState();if(!n)return Promise.resolve(null);const i=n.then((e=>({components:e.getLayoutOrderedComponents("organism.merkur.Merkur"),slotComponents:e.getLayoutOrderedComponents("organism.merkurSlot.MerkurSlot")}))),r={protocol:this._router.getProtocol().replace(":",""),host:this._router.getHost(),baseUrl:e,pathname:t,isAmp:this._uiComponentHelper.isAmp(),isMobile:this._deviceHelper.isMobile(),isTablet:this._deviceHelper.isTablet(),isDesktop:this._deviceHelper.isDesktop()};return i.then((({slotComponents:e,components:t})=>Promise.all(t.filter((e=>e.properties.apiUrl)).map((t=>{const n=e.filter((e=>e.properties.parentKey===t.properties.key));return this.fetchMerkurData(t,n,r)}))))).then((e=>e.reduce(((e,t)=>Object.assign(e,t)),{})))}}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)}function C({className:e="",error:t=null,...n}){const{cssClasses:i,localize:r}=c.useComponent("plugin.election.component.atom.merkurError.MerkurError");return g.default.createElement("div",v({className:i("atm-merkur-error",e)},n),g.default.createElement("svg",{className:i("atm-merkur-error__icon"),viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},g.default.createElement("path",{d:"M10.67.56a17.05 17.05 0 00-7.34 0A3.84 3.84 0 00.39 3.49 17.7 17.7 0 000 7.08c.01 1.23.14 2.43.39 3.59a3.85 3.85 0 002.94 2.94 17.05 17.05 0 007.34 0 3.85 3.85 0 002.94-2.94c.25-1.16.38-2.36.39-3.59a17.7 17.7 0 00-.39-3.59A3.84 3.84 0 0010.67.56zM8 11H6V6h2v5zm0-6H6V3h2v2z"})),g.default.createElement("div",{className:i("atm-merkur-error__content")},g.default.createElement("span",{className:i("atm-merkur-error__title")},r("merkurError.errorTitle")),g.default.createElement("span",{className:i("atm-merkur-error__text")},r("merkurError.errorText"),!1)))}C.propTypes={className:f.default.string,error:f.default.object};var w=g.default.memo(C);function E({className:e="",...t}){const{cssClasses:n}=c.useComponent("plugin.election.component.atom.merkurPlaceholder.MerkurPlaceholder");return g.default.createElement("div",v({className:n("atm-merkur-placeholder",e)},t),g.default.createElement(r.Loader,{className:n("atm-merkur-placeholder__loader")}))}E.propTypes={className:f.default.string};var S=g.default.memo(E);class T extends m.AbstractPureComponent{static get contextType(){return i.PageContext}constructor(e,t){super(e,t);const{widgetProperties:n}=this.props;if(this._onWidgetMounted=this._onWidgetMounted.bind(this),this._onWidgetUnmounting=this._onWidgetUnmounting.bind(this),this._onWidgetRedirect=this._onWidgetRedirect.bind(this),this.utils.CssRenderingHelper.register("plugin.election.component.organism.merkur.Merkur"),this.utils.$UIComponentHelper.isAmp()){const e=n&&n.assets;if(e){const t=e.reduce(((e,t)=>(["inlineStyle"].includes(t.type)&&(e+=t.source),e)),"");this.utils.CssRenderingHelper.registerInlineCss("plugin.election.component.organism.merkur.Merkur",t)}}}render(){const{widgetProperties:e,error:t}=this.props,n=Object.assign({},e);return t?g.default.createElement(w,{error:t}):(this.utils.$UIComponentHelper.isAmp()&&(n.assets=[]),g.default.createElement("div",{className:this.cssClasses("ogm-merkur")},g.default.createElement(u.MerkurWidget,{widgetProperties:n,onWidgetMounted:this._onWidgetMounted,onWidgetUnmounting:this._onWidgetUnmounting,debug:!1},(({error:e})=>e?g.default.createElement(w,{error:e}):g.default.createElement(S,null)))))}_onWidgetMounted(e){e&&e.on(d.ROUTER_EVENTS.REDIRECT,this._onWidgetRedirect)}_onWidgetRedirect(e,t){t&&t.url&&(t.openInNewTab?this.utils.$Window.getWindow().open(t.url,"blank"):this.utils.$Router.redirect(t.url,{},{type:i.ActionTypes.CLICK}))}_onWidgetUnmounting(e){e&&e.off(d.ROUTER_EVENTS.REDIRECT,this._onWidgetRedirect)}}var P=_.default((({merkurWidget:e},t,{properties:n})=>e&&e[n.key]?e[n.key]:{widgetProperties:void 0}))(T);function x({widgetProperties:e,slotName:t,error:n}){const{cssClasses:i}=c.useComponent("plugin.election.component.organism.merkur.MerkurSlot");return n?g.default.createElement(w,{error:n}):g.default.createElement("div",{className:i("ogm-merkur-slot")},g.default.createElement(u.MerkurSlot,{widgetProperties:e,slotName:t},g.default.createElement(S,null)))}x.propTypes={widgetProperties:f.default.object,slotName:f.default.string};var I=_.default((({merkurWidget:e},t,{properties:n})=>e&&e[n.parentKey]?{...e[n.parentKey],slotName:n.slotName}:{widgetProperties:null,slotName:""}))(g.default.memo(x));n.$registerImaPlugin=e=>{!function(e,t){e.namespace(`${t}.component.organism.merkur`).Merkur=P,e.namespace(`${t}.component.organism.merkurSlot`).MerkurSlot=I}(e,"plugin.election")},n.BaseMerkurError=C,n.BaseMerkurPlaceholder=E,n.BaseMerkurSlot=x,n.ElectionController=y,n.Merkur=P,n.MerkurError=w,n.MerkurExtension=b,n.MerkurPlaceholder=S,n.MerkurSlot=I,n.initBind=()=>{},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{election:{apiUrl:"https://api-web.garaz.cz/v1/landing-pages?url="}}}}},dev:{plugin:{cns:{plugin:{election:{apiUrl:"https://api-web.cns-dev.dev.dszn.cz/v1/landing-pages?url="}}}}}})},{"@cns/component-utils":4,"@cns/hooks":8,"@cns/plugin-atoms":20,"@cns/utils":78,"@ima/core":81,"@ima/plugin-merkur":114,"@ima/plugin-select":139,"@merkur/integration-react/lib/index.es9.cjs":159,"@merkur/plugin-router/lib/index.es9.cjs":161,"prop-types":232,react:242}],31:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":30,dup:8}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@cns/plugin-atoms");var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class a extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",dataDot:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.footer.component.atom.cmpLink.CmpLink")}render(){const e="Nastaven personalizace";return this.utils.$UIComponentHelper.isAmp()?null:o.default.createElement(s.Link,{className:this.cssClasses("atm-cmp-link",!0),"data-dot":this.props.dataDot||"atm-cmp-link","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement({title:e}),onClick:e=>this._initCmp(e),title:e},e)}_initCmp(e){const{scmp:t}=this.utils.$Window.getWindow();e.preventDefault(),e.stopPropagation(),t&&"function"==typeof t.open&&t.open()}}class l extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",links:[],separator:"",withCmp:!1}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.footer.component.molecule.footerItems.FooterItems")}render(){return o.default.createElement("div",{className:this.cssClasses("mol-footer-items",!0),"data-dot":"mol-footer-items"},this._renderList())}_renderCmpLink(e){return o.default.createElement(s.ListItem,{className:this.cssClasses("mol-footer-items__list-item"),key:e},o.default.createElement(a,{className:this.cssClasses("mol-footer-items__link"),dataDot:"mol-footer-items__link"}))}_renderItem(e,t,n){const{itemLink:i,itemTarget:r,itemTitle:a}=e,l=t===n-1,c=!l||l&&this._shouldRenderCmpLink(),u=r||"_blank";return o.default.createElement(s.ListItem,{className:this.cssClasses("mol-footer-items__list-item"),key:t},o.default.createElement(s.Link,{className:this.cssClasses("mol-footer-items__link"),"data-dot":"mol-footer-items__link","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement({title:a}),href:i,target:u,title:a},a),c&&this._renderSeparator())}_renderList(){const{links:e}=this.props;if(!Array.isArray(e)||!e.length)return null;const t=e.filter((({itemLink:e,itemTitle:t})=>e&&t));return o.default.createElement(s.UnorderedList,{className:this.cssClasses("mol-footer-items__list")},t.map(((e,n)=>this._renderItem(e,n,t.length))),this._shouldRenderCmpLink()&&this._renderCmpLink(t.length))}_renderSeparator(){const{separator:e}=this.props;return e?o.default.createElement("span",{className:this.cssClasses("mol-footer-items__separator")},e):null}_shouldRenderCmpLink(){const{withCmp:e}=this.props,t=this.utils.$UIComponentHelper.isAmp();return e&&!t}}n.$registerImaPlugin=e=>{e.set("plugin.footer.component.atom.cmpLink.CmpLink",a),e.set("plugin.footer.component.molecule.footerItems.FooterItems",l)},n.CmpLink=a,n.FooterItems=l,n.initBind=()=>{}},{"@cns/plugin-atoms":20,"@ima/core":81,"prop-types":232,react:242}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@cns/plugin-article-molecules");var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);const a="left";class l extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{title:""},settings:{align:"left",size:"h1"},article:null,section:null,tag:null,timelines:{}}}static get requiredProps(){return["article","section","tag","timelines"]}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("app.component.organism.headline.Headline")}render(){let e=this.utils.StringReferencesHelper.replaceReferences(this.props.properties.title,{article:this.props.article,section:this.props.section,tag:this.props.tag,timelines:this.props.timelines});if(!e)return null;let{align:t,size:n}=this.props.settings,i=this._getHeadlineMolecule(n);return o.default.createElement("div",{className:this.cssClasses({"ogm-headline":!0,"ogm-headline--left":t===a,"ogm-headline--center":"center"===t,"ogm-headline--right":"right"===t},!0)},o.default.createElement(i,{properties:{text:e}}))}_getHeadlineMolecule(e){switch(e){default:case"h1":return s.H1;case"h2":return s.H2;case"h3":return s.H3;case"h4":return s.H4;case"h5":return s.H5}}}n.$registerImaPlugin=e=>{e.namespace("app.component.organism.headline").Headline=l,e.namespace("plugin.headline.component.organism.headline").Headline=l},n.Headline=l,n.initBind=()=>{}},{"@cns/plugin-article-molecules":18,"@ima/core":81,"prop-types":232,react:242}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@ima/plugin-loading-manager");class s{static get $dependencies(){return["$Dispatcher","$Window","DotAnalytic","$Settings.plugin.cns.plugin.hitPageTime","$Env"]}constructor(e,t,n,i,r){this._dispatcher=e,this._window=t,this._dotAnalytic=n,this._settings=i,this._env=r,this._onLowStageBound=this._onLowStage.bind(this)}init(){this._isEnabled()&&(this._dispatcher.listen(i.RouterEvents.BEFORE_HANDLE_ROUTE,(()=>{this._dotAnalytic.stopSpentTime()})),this._dispatcher.listen(r.StageEvents.LOW,this._onLowStageBound))}_onLowStage(e){const{addTask:t,payload:n}=e||{};t&&n&&t((()=>{const e=this._getHitData(n);e&&this._dotAnalytic.spentTime(e)}))}_getArticleId(e){const{article:t,post:n}=e||{},i=t||n;return i&&parseInt(i.match(/\d*$/)[0])||null}_getHitData(e){const{params:t,route:n}=e||{},{articleRoutes:i}=this._settings;if(!n||!n.getName||!i)return null;const r=n.getName();if(i.includes(r)){const e=this._getArticleId(t);if(e)return{id:e}}return null}_isEnabled(){return this._window.isClient()&&this._settings.enable}}const o=Object.freeze({AB_VARIANT:"dop_ab_variant",DOP_ID:"dop_id",REQ_ID:"dop_req_id",ZONE:"dop_source_zone_name"});n.$registerImaPlugin=e=>{e.namespace("plugin.hitPageTime")},n.PageTimeService=s,n.RECOMMENDATION_PARAMS=o,n.initServices=(e,t)=>{t.get(s).init()},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{hitPageTime:{articleRoutes:["detail"],enable:!0}}}}},test:{plugin:{cns:{plugin:{hitPageTime:{enable:!0}}}}},dev:{plugin:{cns:{plugin:{hitPageTime:{enable:!1}}}}}})},{"@ima/core":81,"@ima/plugin-loading-manager":106}],35:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":34,dup:8}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/rest-api-client"),s=e("react"),o=(e("prop-types"),e("@cns/plugin-article"));var a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s);class l extends r.AbstractEntity{static get dataFieldMapping(){return{id:"_id"}}static get embeds(){return[...this.getContentEmbeds(this.getContentEmbedsFields(),this.getContentEmbedsTypes())]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"infobox"}static getContentEmbedsFields(){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsFields()}static getContentEmbedsTypes(){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsTypes()}static getContentEmbeds(e,t){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbeds(e,t)}constructor(e){super(e)}}class c extends r.AbstractService{static get entityClass(){return i.ns.get("plugin.infobox.InfoboxEntity")}fetchInfoboxes(e){const t={filter:{_id:{$in:e}}};return this.list(t).then((t=>t.reduce(((t,n,i)=>(t[e[i]]=n,t)),{})))}}const u="organism.infobox.Infobox";class d extends i.AbstractExtension{static get $dependencies(){return[c]}constructor(e){super(),this._infoboxService=e}getAllowedStateKeys(){return["infoboxes"]}load(){const{layout:e}=this.getState();return e?{infoboxes:e.then((e=>{if(e&&e.isComponentPresent(u)){const t=e.getLayoutOrderedComponents(u).map((e=>e.properties.infobox));return this._infoboxService.fetchInfoboxes(t)}return Promise.reject(`The current layout doesn't contain any "${u}" components.`)})).catch((()=>null))}:{}}}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}class m extends i.AbstractComponent{static get contextType(){return i.PageContext}static get defaultProps(){return Object.assign({},o.RichContentSharedDefaultProps,{className:"",infoboxes:{},properties:{infobox:""},settings:{}})}static get requiredProps(){return["infoboxes"].concat(o.RichContentSharedRequiredProps)}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("app.component.organism.infobox.Infobox")}render(){const{infoboxes:e,properties:t,...n}=this.props,{infobox:i}=t,r=this._getInfoboxMolecule();return e&&e[i]&&r?a.default.createElement("div",{className:this.cssClasses("ogm-info-box"),"data-dot":"ogm-info-box"},a.default.createElement(r,p({},n,{properties:{infobox:e[i]}}))):null}_getInfoboxMolecule(){return i.ns.get("plugin.articleMolecules.component.molecule.infobox.Infobox")}}n.$registerImaPlugin=e=>{e.namespace("app.component.organism.infobox").Infobox=m,e.namespace("plugin.infobox.component.organism.infobox").Infobox=m,e.plugin.infobox.InfoboxEntity=l},n.Infobox=m,n.InfoboxEntity=l,n.InfoboxExtension=d,n.InfoboxService=c,n.initBind=()=>{}},{"@cns/plugin-article":19,"@cns/rest-api-client":76,"@ima/core":81,"prop-types":232,react:242}],37:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":36,dup:8}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@cns/rest-api-client"),r=e("@ima/core"),s=e("@ima/plugin-logger"),o=e("@cns/utils"),a=e("@cns/plugin-ab-testing"),l=e("react"),c=(e("prop-types"),e("@cns/plugin-atoms")),u=e("@cns/plugin-advert"),d=e("@cns/plugin-adblock-tracker");var p=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(l);class m{constructor(e){if(e){for(let t of Object.keys(e))Object.defineProperty(this,t,{configurable:!1,enumerable:!0,get:()=>e[t],set:n=>{e[t]=n}});for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(e)))"constructor"!==t&&Object.defineProperty(this,t,{configurable:!1,enumerable:!1,get:()=>e[t]})}}}class h extends i.AbstractEntity{static get dataFieldMapping(){return{id:"_id"}}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"layout"}constructor(e){super(e)}}class g extends m{get fragmentNames(){return Object.keys(this._fragments)}get fragments(){return this._fragments}get fragmentsOrderMap(){return this._fragmentsOrder}constructor(e,t){if(super(e),!(e instanceof r.ns.get("plugin.layout.LayoutEntity")))throw new r.GenericError("Unable to fetch layout, current document may not have any layout set.",{status:404});if(!(t instanceof o.DeviceHelper))throw new r.GenericError("LayoutEntityDecorator needs a DeviceHelper instance as second parameter.");this.layoutEntity=e,this.deviceHelper=t;const n=this._getLayoutForCurrentDevice(e);this._fragments=this._getFragmentsFromData(n),this._fragmentsOrder=n._order;const{componentNames:i,componentNamesByFragments:s}=this._prepareComponentNames();this._componentNames=i,this._componentNamesByFragments=s,Object.freeze(this)}getComponentDescriptor(e,t=null){const n=t?[t]:this.fragmentNames;for(const t of n)for(const n of this._fragments[t])if(n.component===e)return n;return null}getLayoutOrderedComponents(e,t=null){e&&!Array.isArray(e)&&(e=[e]);let n=[];for(const i of this.fragmentsOrderMap){if(!this._fragments[i])continue;const r=this._getLayoutComponentsFromFragment(this._fragments[i],e,t);n=n.concat(r)}return n}hasPagePart(e){return this.fragmentNames&&this.fragmentNames.includes(e)}isComponentPresent(e,t=null){if(!this._componentNames||t&&!this._componentNamesByFragments)return!1;let n;return n=t?this._componentNamesByFragments[t]||[]:this._componentNames||[],n.includes(e)}_getFragmentsFromData(e){const t=Object.assign({},e);for(const e of Object.keys(t))0===e.indexOf("_")&&delete t[e];return t}_getLayoutComponent(e,t=null){return t?(e[t]||s.warn(`plugin.layout: Component property "${t}" isn't defined in ${e}`),e[t]):e}_getLayoutComponentsFromContainer(e,t,n){return e.properties&&e.properties.organisms?this._getLayoutComponentsFromFragment(e.properties.organisms,t,n):[]}_getLayoutComponentsFromFragment(e,t,n){if(!Array.isArray(e)||0===e.length)return[];let i=[];for(const r of e)"organism.container.Container"===r.component&&(i=i.concat(this._getLayoutComponentsFromContainer(r,t,n))),t&&!t.includes(r.component)||i.push(this._getLayoutComponent(r,n));return i}_getLayoutForCurrentDevice(e){return this.deviceHelper.isMobile()?e.mobile:e.desktop}_getTemplateComponent(e){return r.ns.get("app.component."+e)}_prepareComponentNames(){let e=[],t={};for(const n of this.fragmentNames){const i=this._fragments[n],r=this._getLayoutComponentsFromFragment(i,null,"component");e.push(...r),t[n]=r}return{componentNames:e,componentNamesByFragments:t}}}class f extends i.AbstractService{static get $dependencies(){return[a.PageABTestRegistry,o.DeviceHelper,...i.defaultDependencies]}static get entityClass(){return r.ns.get("plugin.layout.LayoutEntity")}constructor(e,t,...n){super(...n),this._pageABTestRegistry=e,this._deviceHelper=t}createFromData(e){return e.then((e=>{const t=r.ns.get("plugin.layout.LayoutEntity");return this.newLayoutEntityDecorator(new t(e))}))}loadById(e){return this.get(e).then((e=>this.newLayoutEntityDecorator(e)))}newLayoutEntityDecorator(e){return new(r.ns.get("plugin.layout.LayoutEntityDecorator"))(e,this._deviceHelper)}}const _="$Debug";class y extends r.AbstractExtension{static get $dependencies(){return["$CookieStorage"]}constructor(e){super(),this._cookieStorage=e}load(){return this.params.szndbg&&this._cookieStorage.set(_,1,{expires:new Date("Fri, 31 Dec 9999 23:59:59 UTC")}),this._cookieStorage.has(_)?{debug:this.params.error}:{}}}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(this,arguments)}const v=["@charset","@font-face","@import","@keyframes","@media"];class C extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{css:"",organisms:[]},settings:{}}}get className(){const{componentId:e}=this.props;return e?`_${e}`:"_container"}get cssString(){const{css:e}=this.props.properties;return e?`${this._processCssString(e)}`.replace(new RegExp("__CLASS__","g"),`.${this.className}`):null}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.layout.component.organism.container.Container"),this.utils.CssRenderingHelper.registerInlineCss("plugin.layout.component.organism.container.Container",this.cssString)}render(){const{organisms:e}=this.props.properties,t=!e||!(Array.isArray(e)&&e.length);return p.default.createElement("div",{className:`${this.cssClasses("ogm-container")} ${this.className}`},this._renderContainerCss(),t?null:this._renderContainerOrganisms(e))}_renderContainerCss(){const e=this.cssString;return!e||this.utils.$UIComponentHelper.isAmp()?null:p.default.createElement("style",{key:"inlineStyle",dangerouslySetInnerHTML:{__html:e}})}_renderContainerOrganisms(e){return e.map(((e,t)=>{let n=this._getComponent(e.component);if(!n)return p.default.createElement("div",{key:t});const i=n===this._getComponent("organism.container.Container")?this.props:this.utils.ComponentDependencyHelper.getComponentDependency(n,this.props);return p.default.createElement(n,b({},i,{key:e.componentId,properties:e.properties||{},settings:e.settings||{},componentId:e.componentId}))}))}_getComponent(e){return r.ns.get(`app.component.${e}`)}_processCssString(e){return e.split(/\s+/).map((e=>e.includes("@")&&!v.includes(e)?e.split("$").map((e=>e.includes("@")?this.utils.CssRenderingHelper.getConstant(e.substr(1)):e)).join(""):e.includes(".")?e.split(".").map((e=>{const t=e.match(/([^:]*)(:?.*)/);return t&&t[1]?this.cssClasses(t[1])+(t&&t[2]||""):""})).join("."):e)).join(" ")}}class w extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{properties:{debug:null}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.layout.component.organism.debug.Debug")}render(){const{debug:e}=this.props.properties;if(!e)return null;const t=this.utils.oc.get("$Cache").serialize();return p.default.createElement("div",{className:this.cssClasses("ogm-debug")},p.default.createElement("pre",null,"name: ",e.name),p.default.createElement("pre",null,"message: ",e.message),p.default.createElement("pre",null,"fileName: ",e.fileName),p.default.createElement("pre",null,"lineNumber: ",e.lineNumber),p.default.createElement("pre",null,"stack: ",e.stack),p.default.createElement("pre",null,"params:"," ",JSON.stringify(e.getParams?e.getParams():{},null,"\t")),p.default.createElement("pre",null,"cache: ",JSON.stringify(JSON.parse(t),null,2)))}}var E=Object.freeze({DESKTOP:"desktop",MOBILE:"mobile"});class S extends r.AbstractComponent{_renderPageFragment(e){if(!this.props.layout)return null;const{fragments:t}=this.props.layout;return(t[e]||[]).map(((t,n)=>{const i=this._getComponent(t.component);if(!i)return p.default.createElement("div",{key:n});const r=i===this._getComponent("organism.container.Container")?this.props:this._getComponentProps(i);return p.default.createElement(i,b({},r,{key:t.componentId,settings:t.settings||{},properties:t.properties||{},componentId:t.componentId,pageFragment:e}))}))}_componentExists(e){return!!this._getComponent(e)}_getComponent(e){return r.ns.get(this._getFullNamespace(e))}_getFullNamespace(e){return"app.component."+e}_getComponentProps(e){return this.utils.ComponentDependencyHelper.getComponentDependency(e,this.props)}}const T="plugin.layout.template.royalty";r.ns.namespace(T);class P extends S{constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register(`${T}.Royalty`)}render(){return this._shouldRenderBrandingAdvert()?this._renderBrandingView():this._renderDefaultView()}renderMainContent(){throw new Error("The renderMainContent method is abstract and must be overridden")}get templateRootClassName(){throw new Error("The templateRootClassName property is abstract and must be overridden")}_renderDefaultView(){return p.default.createElement("div",{className:this.cssClasses({"tpl-royalty":!0,[this.templateRootClassName]:!0},!0),"data-e2e":"tpl-royalty"},this._hookToRenderAtViewStart(),this._renderPageFragment("pageBackground"),this._renderHeaderView(),this._renderMainView(),this._renderBottomView(),this._renderFooterView(),this._renderDebug(),this._renderTracker(),this._hookToRenderAtViewEnd())}_renderBrandingView(){const e=this._getComponentProps(u.BrandingAdvert),t=this.props.layout.getComponentDescriptor("organism.advert.branding.BrandingAdvert");return p.default.createElement("div",{className:this.cssClasses({"tpl-royalty":!0,[this.templateRootClassName]:!0},!0)},this._hookToRenderAtViewStart(),this._renderPageFragment("pageBackground"),p.default.createElement("div",{className:this.cssClasses("tpl-royalty-branding")},p.default.createElement(u.BrandingAdvert,b({properties:t.properties,settings:t.settings},e),this._renderHeaderView(),this._renderMainView(),p.default.createElement("div",{className:this.cssClasses("tpl-royalty-branding-bottom")},this._renderBottomView(),this._renderFooterView()))),this._renderDebug(),this._renderTracker(),this._hookToRenderAtViewEnd())}_renderHeaderView(){return p.default.createElement("header",{"aria-labelledby":"accessibility-header"},p.default.createElement(c.H6,{id:"accessibility-header"},"zhlav"),p.default.createElement("div",{className:this.cssClasses("tpl-royalty-wideHeader"),"data-dot":"tpl-wideHeader","data-e2e":"tpl-royalty-wideHeader"},this._renderPageFragment("wideHeader")),p.default.createElement("div",{className:this.cssClasses("tpl-royalty-header"),"data-e2e":"tpl-royalty-header",role:"banner"},this._renderPageFragment("header")))}_renderMainView(){return p.default.createElement("main",{className:this.cssClasses("tpl-royalty-main"),role:"main","aria-labelledby":"accessibility-content"},p.default.createElement(c.H6,{id:"accessibility-content"},"Hlavn obsah"),this.renderMainContent())}_renderBottomView(){return p.default.createElement("div",{className:this.cssClasses("tpl-royalty-bottom")},this._renderPageFragment("bottom"))}_renderFooterView(){return p.default.createElement("footer",{className:this.cssClasses("tpl-royalty-footer"),"data-dot":"tpl-footer",role:"contentinfo","aria-labelledby":"accessibility-footer","data-e2e":"tpl-royalty-footer"},p.default.createElement(c.H6,{id:"accessibility-footer"},"Patika strnky"),this._renderPageFragment("footer"))}_renderDebug(){return p.default.createElement(w,{properties:{debug:this.props.debug}})}_renderTracker(){return p.default.createElement(d.AdBlockTracker,null)}_hookToRenderAtViewStart(){return null}_hookToRenderAtViewEnd(){return null}_shouldRenderBrandingAdvert(){const e=this.props.layout;return!(!e||!e.isComponentPresent("organism.advert.branding.BrandingAdvert")||this.utils.$UIComponentHelper.isAmp())}}r.ns.namespace(T).Royalty=P;const x="plugin.layout.template.king";r.ns.namespace(x);class I extends P{constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register(`${x}.King`)}get templateRootClassName(){return"tpl-king"}renderMainContent(){return p.default.createElement("div",{className:this.cssClasses("tpl-royalty-layout")},p.default.createElement("header",{className:this.cssClasses("tpl-king-mainHeader"),"data-dot":"tpl-mainHeader","data-e2e":"tpl-royalty-mainHeader"},this._renderPageFragment("mainHeader")),p.default.createElement("div",{className:this.cssClasses("tpl-king-top-content")},p.default.createElement("div",{className:this.cssClasses("tpl-king-container")},p.default.createElement("section",{className:this.cssClasses("tpl-king-content"),"data-dot":"tpl-content","data-e2e":"tpl-royalty-content"},this._renderPageFragment("content")),p.default.createElement("section",{className:this.cssClasses({"tpl-king-sidebar":!0,"tpl-royalty-sidebar":!0}),"data-dot":"tpl-sidebar","data-e2e":"tpl-royalty-sidebar",role:"complementary","aria-labelledby":"accessibility-sidebar-top-content"},p.default.createElement(c.H6,{id:"accessibility-sidebar-top-content"},"Postrann panel"),p.default.createElement("div",{className:this.cssClasses("tpl-king-sidebar-container")},this._renderPageFragment("sidebar"))))),p.default.createElement("div",{className:this.cssClasses("tpl-king-middle-content")},p.default.createElement("div",{className:this.cssClasses("tpl-king-container tpl-king-middle-container"),"data-dot":"tpl-middleContent"},this._renderPageFragment("middleContent"))),p.default.createElement("div",{className:this.cssClasses("tpl-king-bottom-content")},p.default.createElement("div",{className:this.cssClasses("tpl-king-container")},p.default.createElement("section",{className:this.cssClasses("tpl-king-content"),"data-dot":"tpl-bottomContent"},this._renderPageFragment("bottomContent")),p.default.createElement("section",{className:this.cssClasses({"tpl-king-sidebar":!0,"tpl-royalty-sidebar":!0}),role:"complementary","aria-labelledby":"accessibility-sidebar-bottom-content"},p.default.createElement(c.H6,{id:"accessibility-sidebar-bottom-content"},"Postrann panel"),p.default.createElement("div",{className:this.cssClasses("tpl-king-sidebar-container"),"data-dot":"tpl-bottomSidebar"},this._renderPageFragment("bottomSidebar"))))),p.default.createElement("aside",{className:this.cssClasses("tpl-king-mainFooter mainFooter"),"data-dot":"tpl-mainFooter",role:"complementary","aria-labelledby":"accessibility-main-footer","data-e2e":"tpl-royalty-mainFooter"},p.default.createElement(c.H6,{id:"accessibility-main-footer"},"Mohlo by vs zajmat"),this._renderPageFragment("mainFooter")))}}r.ns.namespace(x).King=I;const A="plugin.layout.template";r.ns.namespace(A);class k extends r.AbstractComponent{constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register(`${A}.PageTemplateRenderer`)}render(){let e=this.props.layout;if(!e||!e.template)return p.default.createElement(c.Loader,{mode:"big",layout:"center",timeout:3e3,"data-e2e":"atm-page-loader"});const t=this._getTemplateComponent(e.template);if(!t)throw new Error(`Unsupported template: ${e.template}`);return p.default.createElement("div",{className:this.props.className,"data-e2e":this.props["data-e2e"]},p.default.createElement(t,b({},this.props,{className:null})))}_getTemplateComponent(e){return r.ns.get("app.component."+e)||r.ns.get("cns.layout."+e)}}r.ns.namespace(A).PageTemplateRenderer=k,n.$registerImaPlugin=e=>{e.namespace("app.component.organism.container"),e.namespace("plugin.layout.component.organism.container"),e.namespace("plugin.layout.component.organism.debug"),e.namespace("plugin.layout.LayoutEntity"),e.namespace("plugin.layout.LayoutEntityDecorator"),e.namespace("plugin.layout.LayoutService"),e.app.component.organism.container.Container=C,e.plugin.layout.component.organism.container.Container=C,e.plugin.layout.component.organism.debug.Debug=w,e.plugin.layout.LayoutEntityDecorator=g,e.plugin.layout.LayoutEntity=h,e.plugin.layout.LayoutService=f},n.AbstractLayoutEntityDecorator=m,n.AbstractPageTemplate=S,n.Container=C,n.Debug=w,n.DebugExtension=y,n.King=I,n.LayoutDeviceType=E,n.LayoutEntity=h,n.LayoutEntityDecorator=g,n.LayoutService=f,n.PageTemplateRenderer=k,n.Royalty=P,n.initBind=()=>{}},{"@cns/plugin-ab-testing":12,"@cns/plugin-adblock-tracker":14,"@cns/plugin-advert":15,"@cns/plugin-atoms":20,"@cns/rest-api-client":76,"@cns/utils":78,"@ima/core":81,"@ima/plugin-logger":110,"prop-types":232,react:242}],39:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":38,dup:8}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-less-constants/units"),r=e("react"),s=e("prop-types"),o=e("@ima/core"),a=e("@cns/plugin-atoms"),l=e("@ima/plugin-logger");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(r),d=c(s);const p={lightbox:{color:{background:i.hex("343534"),controls:i.hex("FFF"),captionSecondary:i.hex("999999"),captionPrimary:i.hex("FFF"),captionBackground:i.rgba(0,0,0,.9),dot:i.hex("D0D0D0"),dotActive:i.hex("000")},zIndex:9999,controls:{size:i.px(48),mobileSize:i.px(36),margin:i.px(16),zIndex:1},caption:{marginBottom:i.px(16)}}},m=.2,h=Object.freeze({LEFT:"left",RIGHT:"right",NONE:"none"});class g extends o.AbstractPureComponent{static get contextType(){return o.PageContext}static get defaultProps(){return{properties:{title:"",mediaList:[],mediaIndex:0},settings:{showControls:!0,showDotNavigation:!0,showTitle:!0,lazyLoad:!1,trim:a.MediaTrims.DEFAULT16x9,mediaSizes:[{width:"100vw"}],swipeThreshold:m},className:"",onItemChange:null,onClick:null}}get currentIndex(){return this.state.currentIndex}set currentIndex(e){const{lowestLoadedItem:t,topLoadedItem:n}=this.state,i=Math.min(this.size-1,Math.max(0,e)),r=Math.max(0,i-2),s=Math.min(this.size-1,i+2);this.setState({isTouching:!1,currentIndex:i,lowestLoadedItem:Math.min(t,r),topLoadedItem:Math.max(n,s)})}get size(){return this.props.properties.mediaList.length}constructor(e,t){super(e,t),this._touchObject={},this._carouselRef=u.default.createRef(),this._container=null,this._registeredVisibilityId=null,this._registeredResizeCircleId=null,this._maxTranslateX=0,this._currentItemWidth=0,this._boundOnResize=this.onResize.bind(this);const n=e.properties.mediaIndex||0;this.state={isTouching:!1,currentIndex:n,lowestLoadedItem:Math.max(0,n-2),topLoadedItem:Math.min(this.size-1,n+2),isVisible:!e.settings.lazyLoad},this.utils.CssRenderingHelper.register("plugin.lightbox.component.molecule.carousel.Carousel")}componentDidMount(){const{lazyLoad:e}=this.props.settings,{ResizeCircle:t}=this.utils;this.onResize(),this._registeredResizeCircleId=t.register(this._boundOnResize,null,300),e&&this._registerVisibilityCheck()}componentDidUpdate(e,t){const{onItemChange:n}=this.props;"function"==typeof n&&this.state.currentIndex!==t.currentIndex&&n(this.currentIndex)}componentWillUnmount(){const{ResizeCircle:e}=this.utils;null!==this._registeredResizeCircleId&&e.unregister(this._registeredResizeCircleId),this._unregisterVisibilityCheck()}render(){const{onClick:e}=this.props,{mediaList:t}=this.props.properties;if(!Array.isArray(t)||!t.length)return null;const{showControls:n,showDotNavigation:i}=this.props.settings,{isVisible:r}=this.state;return u.default.createElement("div",{onClick:()=>e?e():null,ref:this._carouselRef,"data-dot":"mol-carousel",className:this.cssClasses("mol-carousel")},u.default.createElement("div",{className:this.cssClasses("mol-carousel__panel")},r&&this._renderCarousel(),n&&this._renderControls()),i&&this._renderDotNavigation())}_renderCarousel(){const{mediaList:e}=this.props.properties;return u.default.createElement("ul",{ref:e=>{this._container=e},className:this.cssClasses({"mol-carousel__container":!0,"mol-carousel__container--moving":this.state.isTouching}),style:{transform:`translate3d(${this._getTranslateX()}, 0, 0)`},onTouchStart:e=>this.onTouchStart(e),onTouchMove:e=>this.onTouchMove(e),onTouchEnd:e=>this.onTouchEnd(e),onTouchCancel:e=>this.onTouchCancel(e)},e.map(((e,t)=>this._renderCarouselItem(e,t))))}_renderCarouselItem(e,t){const{showTitle:n}=this.props.settings;return u.default.createElement("li",{className:this.cssClasses("mol-carousel__item"),key:e.uid||t},n&&u.default.createElement("div",{className:this.cssClasses("mol-carousel__item-title")},e.titleFromArticle||e.title),u.default.createElement("div",{className:this.cssClasses("mol-carousel__item-wrapper")},this._renderImage(e,t)))}_renderControls(){return u.default.createElement("div",{className:this.cssClasses("mol-carousel__controls")},u.default.createElement("button",{className:this.cssClasses({"mol-carousel__controls-prev":!0,"mol-carousel__controls--hidden":0===this.currentIndex}),onClick:()=>this.prev()},u.default.createElement(a.Icon,{icon:"lb-arrow",label:this.localize("carousel.previous")})),u.default.createElement("button",{className:this.cssClasses({"mol-carousel__controls-next":!0,"mol-carousel__controls--hidden":this.currentIndex===this.size-1}),onClick:()=>this.next()},u.default.createElement(a.Icon,{icon:"lb-arrow",label:this.localize("carousel.next")})))}_renderDotNavigation(){const{title:e,mediaList:t}=this.props.properties,n=t.length;return u.default.createElement("ul",{className:this.cssClasses("mol-carousel__dot-navigation")},t.map((({uid:t},i)=>u.default.createElement("li",{key:t||i,className:this.cssClasses({"mol-carousel__dot-navigation-item":!0,"mol-carousel__dot-navigation-item--active":i===this.currentIndex})},u.default.createElement("button",{onClick:e=>this.onDotNavigation(e,i),"aria-label":this.localize("carousel.dotNavigationLabel",{LABEL:e||"",COUNT:i+1,TOTAL:n})},u.default.createElement("span",null))))))}_renderImage(e,t){const{lowestLoadedItem:n,topLoadedItem:i}=this.state,{MediaHelper:r,RegressionHelper:s}=this.utils,{trim:o=a.MediaTrims.DEFAULT16x9,mediaSizes:l=[{width:"100vw"}]}=this.props.settings,{url:c,width:d,height:p}=r.getImageSource(e,o),{srcSet:m,sizes:h}=r.responsifyImage(e,o,[a.MediaSizes.WIDTH320,a.MediaSizes.WIDTH480,a.MediaSizes.WIDTH600,a.MediaSizes.WIDTH722,a.MediaSizes.WIDTH1280,a.MediaSizes.WIDTH2560],l)||{},g=t>=n&&t<=i;return u.default.createElement(a.Image,{className:this.cssClasses("mol-lightbox__item-image"),src:g?c:"",srcSet:!s.isRegression()&&g?m:null,sizes:!s.isRegression()&&g?h:null,width:d,height:p,layout:"fill",alt:e.title})}onDotNavigation(e,t){e.preventDefault(),this.currentIndex=t}onResize(){this._container&&this._container.offsetWidth&&(this._maxTranslateX=-this._container.offsetWidth*(this.size-1),this._currentItemWidth=this._container.offsetWidth)}onTouchCancel(){this.setState({isTouching:!1})}onTouchEnd(){const{swipeThreshold:e=m}=this.props.settings,{delta:t,direction:n}=this._touchObject;Math.abs(t)>this._currentItemWidth*e&&n!==h.NONE&&(n===h.RIGHT?this.prev():this.next()),this.setState({isTouching:!1})}onTouchMove(e){this._touchObject.endX=e.touches[0].pageX,this._touchObject.endY=e.touches[0].pageY;const{endX:t,endY:n,startX:i,startY:r}=this._touchObject,s=t-i,o=n-r;Math.abs(s)>Math.abs(o)&&(this._touchObject.direction=s<0?h.LEFT:h.RIGHT,this._touchObject.delta=s),this._container&&(this._container.style.transform=`translate3d(${this._getTranslateX()}, 0, 0)`)}onTouchStart(e){this._touchObject={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY,delta:0,direction:h.NONE},this.setState({isTouching:!0})}_onVisibilityWriter(e){e>0&&(this.setState({isVisible:!0}),this._unregisterVisibilityCheck(),this.onResize())}next(){this.utils.DotAnalytic.hit({path:"mol-carousel-next"}),this.currentIndex++}prev(){this.utils.DotAnalytic.hit({path:"mol-carousel-prev"}),this.currentIndex--}_getTranslateX(){return this.state.isTouching?`${Math.max(this._maxTranslateX,Math.min(0,-1*this.state.currentIndex*this._currentItemWidth+this._touchObject.delta))}px`:-1*this.state.currentIndex*100+"%"}_registerVisibilityCheck(){const{$UIComponentHelper:e}=this.utils,{current:t}=this._carouselRef;t&&(this._registeredVisibilityId=e.visibility.register(e.getVisibilityReader(t,{}),e.wrapVisibilityWriter((e=>this._onVisibilityWriter(e)))))}_unregisterVisibilityCheck(){null!==this._registeredVisibilityId&&this.utils.$UIComponentHelper.visibility.unregister(this._registeredVisibilityId),this._registeredVisibilityId=null}}const f=Object.freeze({SHOW:"lightbox-show",SHOW_LIST:"lightbox-show-list"});let _=null;class y extends o.AbstractPureComponent{static get contextType(){return o.PageContext}get mediaCollection(){const{LightboxHelper:e}=this.utils;return e.images&&e.images.length>0?e.images:null}get size(){return this.mediaCollection.getCollectionSize(this.state.collectionIndex)}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.lightbox.component.molecule.lightbox.Lightbox"),this._boundOnKeyDown=this.onKeyDown.bind(this),this.state={collectionIndex:0,mediaIndex:0,isVisible:!1,isListVisible:!1,isCaptionVisible:!0}}componentDidMount(){const{$Dispatcher:e,$Window:t}=this.utils;e.listen(f.SHOW,this.onShow,this),e.listen(f.SHOW_LIST,this.onList,this),t.bindEventListener(t.getWindow(),"keydown",this._boundOnKeyDown)}componentDidUpdate(e,t){const{isVisible:n}=this.state,{$Window:i}=this.utils,r=i.getWindow(),s=i.getDocument(),o=this.cssClasses("noscroll");t.prevState!==t&&(n?(_=r.scrollY||r.pageYOffset,s.documentElement.classList.add(o)):(s.documentElement.classList.remove(o),null!==_&&(r.scrollTo(0,_),_=null))),this._loadLazyAssets()}componentWillUnmount(){const{$Dispatcher:e,$Window:t}=this.utils;e.unlisten(f.SHOW,this.onShow,this),e.unlisten(f.SHOW_LIST,this.onList,this),t.unbindEventListener(t.getWindow(),"keydown",this._boundOnKeyDown)}render(){const{isVisible:e,isListVisible:t}=this.state;return(e||t)&&this.mediaCollection?u.default.createElement("div",{"data-dot":"mol-lightbox",className:this.cssClasses("mol-lightbox")},t?this._renderListView():this._renderCarousel(),this._renderControls()):null}_renderCaption(){const{isCaptionVisible:e,mediaIndex:t,collectionIndex:n}=this.state,i=this.mediaCollection.get(t,n),r=this.utils.MediaHelper.getCaption(i);return u.default.createElement("div",{className:this.cssClasses({"mol-lightbox__caption":!0,"mol-lightbox__caption--hidden":!e})},u.default.createElement("div",{className:this.cssClasses("mol-lightbox__caption-text")},i.titleFromArticle||i.title,r&&u.default.createElement("span",{className:this.cssClasses("mol-lightbox__caption-author")},r)))}_renderCarousel(){const{isCaptionVisible:e,mediaIndex:t,collectionIndex:n}=this.state;return u.default.createElement(u.default.Fragment,null,u.default.createElement(g,{ref:e=>{this.carousel=e},properties:{mediaList:this.mediaCollection.getCollection(n),mediaIndex:t},settings:{showControls:!1,showDotNavigation:!1,showTitle:!1,trim:a.MediaTrims.ORIGINAL,lazyLoad:!1},onItemChange:e=>this.onItemChange(e),onClick:()=>this.setState({isCaptionVisible:!e})}),this._renderCaption())}_renderControls(){const{isListVisible:e,mediaIndex:t}=this.state;return u.default.createElement("div",{className:this.cssClasses("mol-lightbox__controls")},u.default.createElement("button",{onClick:e=>this.onList(e),className:this.cssClasses({"mol-lightbox__controls-button":!0,"mol-lightbox__controls-button--hidden":e}),"data-dot":"mol-lightbox-list"},u.default.createElement(a.Icon,{icon:"lb-list",label:this.localize("lightbox.list")})),u.default.createElement("button",{onClick:e=>this.onPreviousMedia(e),className:this.cssClasses({"mol-lightbox__controls-button":!0,"mol-lightbox__controls-button--previous":!0,"mol-lightbox__controls-button--hidden":!e&&0===t}),"data-dot":"mol-lightbox-previous"},u.default.createElement(a.Icon,{icon:"lb-arrow",label:this.localize("lightbox.previous")})),u.default.createElement(a.Paragraph,{className:this.cssClasses({"mol-lightbox__controls-text":!0,"mol-lightbox__controls-button--hidden":e})},`${t+1} / ${this.size}`),u.default.createElement("button",{onClick:e=>this.onNextMedia(e),className:this.cssClasses({"mol-lightbox__controls-button":!0,"mol-lightbox__controls-button--next":!0,"mol-lightbox__controls-button--hidden":!e&&t===this.size-1}),"data-dot":"mol-lightbox-next"},u.default.createElement(a.Icon,{icon:"lb-arrow",label:this.localize("lightbox.next")})),u.default.createElement("button",{onClick:e=>this.onClose(e),className:this.cssClasses("mol-lightbox__controls-button"),"data-dot":"mol-lightbox-close"},u.default.createElement(a.Icon,{icon:"lb-close",label:this.localize("lightbox.close")})))}_renderListView(){const{collectionIndex:e}=this.state;return u.default.createElement("div",{className:this.cssClasses("mol-lightbox__list")},this.mediaCollection.getCollection(e).map(((e,t)=>u.default.createElement(a.MediaItem,{key:e.uid||t,className:this.cssClasses("mol-lightbox__list-image"),settings:{width:a.MediaSizes.WIDTH160,trim:a.MediaTrims.DEFAULT16x9,layout:"fill"},properties:{media:this._responsifyListImage(e),caption:null},onShowLightbox:(e,t)=>this.onSelectMedia(e,t)}))))}onClose(e){e.preventDefault(),this.setState({isVisible:!1,isListVisible:!1,collectionIndex:0,mediaIndex:0})}onItemChange(e){this.setState({mediaIndex:e})}onKeyDown(e){const{isVisible:t,isListVisible:n}=this.state;if(t||n)switch(e.key){case"Esc":case"Escape":this.onClose(e);break;case"Left":case"ArrowLeft":this.onPreviousMedia(e);break;case"Right":case"ArrowRight":this.onNextMedia(e)}}onList(e={}){const{mediaType:t}=e;e.preventDefault&&e.preventDefault(),t&&t!==this.utils.LightboxHelper.mediaTypes.IMAGE?l.error("Molecule Lightbox supports only IMAGE media type."):this.setState({isVisible:!!t,isListVisible:!0,mediaIndex:0})}onNextMedia(e){e.preventDefault();const{isListVisible:t}=this.state;if(t)return this.onSelectMedia(e,0);this.carousel&&this.carousel.next()}onPreviousMedia(e){e.preventDefault();const{isListVisible:t}=this.state;if(t)return this.onSelectMedia(e,this.size-1);this.carousel&&this.carousel.prev()}onSelectMedia(e,t){e.preventDefault(),this.setState({mediaIndex:"number"==typeof t?t:0,isVisible:!0,isListVisible:!1})}onShow(e={}){const{collectionIndex:t,mediaIndex:n,mediaType:i}=e;i===this.utils.LightboxHelper.mediaTypes.IMAGE?this.setState({isVisible:!0,collectionIndex:"number"==typeof t?t:0,mediaIndex:"number"==typeof n?n:0}):l.error("Molecule Lightbox supports only IMAGE media type.")}_loadLazyAssets(){const{$UIComponentHelper:e,$Window:t}=this.utils;!t.isClient()||this._useIntersectionObserver()&&t.getWindow().IntersectionObserver||e.visibility.notify()}_responsifyListImage(e){return e?this.utils.MediaHelper.responsifyImage(e,a.MediaTrims.DEFAULT16x9,[a.MediaSizes.WIDTH240,a.MediaSizes.WIDTH320,a.MediaSizes.WIDTH480],[{width:"220px"}]):null}_useIntersectionObserver(){const{$Settings:e}=this.utils;return e&&e.plugin&&e.plugin.uiAtoms&&e.plugin.uiAtoms.useIntersectionObserver&&!0===e.plugin.uiAtoms.useIntersectionObserver.images}}function b({className:e,label:t="Dal"}){return u.default.createElement("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",focusable:!1,className:e,"aria-label":t},u.default.createElement("path",{d:"M 9.767767,12 17.06066,4.7071067 15.646447,3.2928931 6.9393398,12 15.646447,20.707107 17.06066,19.292893 Z"}))}function v({className:e,label:t="Zavt"}){return u.default.createElement("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",focusable:!1,className:e,"aria-label":t},u.default.createElement("path",{d:"M12,10.5857864 L19.2928932,3.29289322 L20.7071068,4.70710678 L13.4142136,12 L20.7071068,19.2928932 L19.2928932,20.7071068 L12,13.4142136 L4.70710678,20.7071068 L3.29289322,19.2928932 L10.5857864,12 L3.29289322,4.70710678 L4.70710678,3.29289322 L12,10.5857864 Z"}))}function C({className:e,label:t="Seznam"}){return u.default.createElement("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",focusable:!1,className:e,"aria-label":t},u.default.createElement("path",{d:"M4,16 L20,16 L20,18 L4,18 L4,16 Z M4,11 L20,11 L20,13 L4,13 L4,11 Z M4,6 L20,6 L20,8 L4,8 L4,6 Z"}))}b.propTypes={className:d.default.string,label:d.default.string},v.propTypes={className:d.default.string,label:d.default.string},C.propTypes={className:d.default.string,label:d.default.string};var w=Object.freeze({"lb-arrow":b,"lb-close":v,"lb-list":C});n.$registerImaPlugin=function(e){e.namespace("plugin.lightbox.component.molecule.lightbox"),e.namespace("plugin.lightbox.component.molecule.carousel"),e.namespace("plugin.lightbox.component.atom.icons"),e.plugin.lightbox.component.molecule.lightbox.Lightbox=y,e.plugin.lightbox.component.molecule.carousel.Carousel=g,e.plugin.lightbox.component.atom.icons.Icons=w,e.plugin.lightbox.component.atom.icons.LBArrowIcon=b,e.plugin.lightbox.component.atom.icons.LBCloseIcon=v,e.plugin.lightbox.component.atom.icons.LBListIcon=C,e.namespace("plugin.atoms.component.atom.icon").Icons={...e.namespace("plugin.atoms.component.atom.icon.Icons"),...w}},n.Carousel=g,n.Icons=w,n.LBArrowIcon=b,n.LBCloseIcon=v,n.LBListIcon=C,n.Lightbox=y,n.LightboxEvents=f,n.layout=p},{"@cns/plugin-atoms":20,"@ima/core":81,"@ima/plugin-less-constants/units":103,"@ima/plugin-logger":110,"prop-types":232,react:242}],41:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":40,dup:8}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/rest-api-client");class s extends r.AbstractEntity{static get dataFieldMapping(){return{id:"_id",keywords:r.defaultToArray}}static get embeds(){return[{field:"caption",resource:i.ns.get("plugin.media.MediaEntity"),inline:!0,cache:!1},{field:"sources",inline:!0,cache:!1}]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"medium"}constructor(e){super(e)}}class o extends r.AbstractService{static get entityClass(){return i.ns.get("plugin.media.MediaEntity")}}n.$registerImaPlugin=e=>{e.set("plugin.media.MediaEntity",s),e.set("plugin.media.MediaService",o)},n.MediaEntity=s,n.MediaService=o},{"@cns/rest-api-client":76,"@ima/core":81}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class i{static getKeywords({metaKeywords:e=[],relatedTags:t}){return(t?t.map((e=>e.title)):e).join(", ")}static getCanonicalUrl({router:e,entity:t}){const{route:n}=e.getCurrentRouteInfo();return e.link(n.getName(),t)}static setDefaultMeta({metaManager:e,router:t,settings:n,entity:i}){const r=n.plugin.cns.plugin.metaHeader,{defaultTitle:s,defaultDescription:o,defaultImage:{url:a}}=r,l=this.getCanonicalUrl({router:t,entity:i}),c=this.getKeywords(i);e.setTitle(s),e.setMetaName("description",o),e.setMetaName("keywords",c),e.setMetaName("robots","index, follow"),e.setMetaName("twitter:title",s),e.setMetaName("twitter:description",o),e.setMetaName("twitter:card","summary"),e.setMetaName("twitter:image",a),e.setMetaName("twitter:url",l),e.setMetaProperty("og:title",s),e.setMetaProperty("og:description",o),e.setMetaProperty("og:type","website"),e.setMetaProperty("og:image",a),e.setMetaProperty("og:url",l),e.setLink("canonical",l),e.setLink("amphtml",`${l}${l.includes("?")?"&":"?"}amp=1`),e.setLink("previewimage",a)}}n.$registerImaPlugin=()=>{},n.ArticleMetaHelper=class extends i{static getMetaTitle({metaTitle:e,title:t},{name:n}){return e||`${t} - ${n}`}static getSocialTitle({title:e},{name:t}){return`${e} - ${t}`}static getMetaDescription({metaDescription:e,perex:t}){return e||t}static getSocialDescription({perex:e}){return e}static setDefaultMeta(e){i.setDefaultMeta(e),e.metaManager.setMetaName("twitter:card","summary_large_image")}},n.AuthorMetaHelper=class extends i{static getMetaTitle({metaTitle:e,name:t},{name:n}){return e||`${t} - ${n}`}static getMetaDescription({metaDescription:e},t=""){return e||t}},n.HomeMetaHelper=class extends i{static getMetaTitle({metaTitle:e,name:t}){return e||t}static getMetaDescription({metaDescription:e},t=""){return e||t}static setDefaultMeta(e){i.setDefaultMeta(e),e.metaManager.setMetaName("twitter:card","summary_large_image")}},n.SectionMetaHelper=class extends i{static getMetaTitle({metaTitle:e,name:t},{name:n}){return e||`${t} - ${n}`}static getSocialTitle({name:e},{name:t}){return`${e} - ${t}`}static getMetaDescription({metaDescription:e,name:t}){return e||`Vechny lnky ze sekce ${t}`}static getSocialDescription({name:e}){return`Vechny lnky ze sekce ${e}`}static getCurrentSection(e,t){return e.filter((e=>e.slug===t))[0]}},n.TagMetaHelper=class extends i{static getKeywords({metaKeywords:e=[],relatedTags:t=[]}){return(e.length?e:t.map((e=>e.title))).join(", ")}static getMetaTitle({metaTitle:e,title:t},{name:n}){return e||`${t} - ${n}`}static getSocialTitle({title:e},{name:t}){return`${e} - ${t}`}static getMetaDescription({metaDescription:e,title:t}){return e||`Vechny lnky k tmatu ${t}`}static getSocialDescription({title:e}){return`Vechny lnky k tmatu ${e}`}},n.initBind=()=>{},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{metaHeader:{defaultImage:{url:""},defaultTitle:"Seznam lnky",defaultDescription:"lnky na Seznamu"}}}}}})},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@ima/plugin-logger"),s=e("@cns/rest-api-client");class o extends i.ClientRouter{getCurrentRouteInfo(){const e=super.getCurrentRouteInfo();return e.hash=this._getHashParams(),e}link(e,t={},n={}){r.throwIf(!e||"string"!=typeof e,new i.GenericError("Argument routeName must be a string.")),r.throwIf(!t||"object"!=typeof t,new i.GenericError("Argument params must be a object.")),r.throwIf(n&&"object"!=typeof n,new i.GenericError("Argument params must be a object."));const o=(this._routeHandlers||this._routes).get(e),a=[];if(t instanceof s.AbstractEntity&&"urlParameters"in t&&o instanceof i.StaticRoute&&(t=t.urlParameters),!o)throw new i.GenericError(`ima.router.AbstractRouter:link has undefined route with name ${e}. Add new route with that name.`);for(let e of Object.keys(n)){const t=[e,n[e]];a.push(t.map(encodeURIComponent).join("="))}const l=a.length?"#"+a.join("&"):"";return this.getBaseUrl()+o.toPath(t)+l}_getHashParams(){const{hash:e}=this._window.getWindow().location,t=e.indexOf("#"),n={};if(e){const i=e.substring(t+1).split(/[&;]/);for(let e of i){const t=e.split("=");n[decodeURIComponent(t[0])]=!(t.length>1)||decodeURIComponent(t[1])}}return n}_handle(e,t,n,s){let o;return(o=r.rejectIf(!t||"object"!=typeof t,new i.GenericError("Argument params must be an object.")))?o:super._handle(e,t,n,s)}}class a extends i.ServerRouter{link(e,t={},n={}){r.throwIf(!e||"string"!=typeof e,new i.GenericError("Argument routeName must be a string.")),r.throwIf(!t||"object"!=typeof t,new i.GenericError("Argument params must be a object.")),r.throwIf(n&&"object"!=typeof n,new i.GenericError("Argument params must be a object."));const o=(this._routeHandlers||this._routes).get(e),a=[];if(t instanceof s.AbstractEntity&&"urlParameters"in t&&o instanceof i.StaticRoute&&(t=t.urlParameters),!o)throw new i.GenericError(`ima.router.AbstractRouter:link has undefined route with name ${e}. Add new route with that name.`);for(let e of Object.keys(n)){const t=[e,n[e]];a.push(t.map(encodeURIComponent).join("="))}const l=a.length?"#"+a.join("&"):"";return this.getBaseUrl()+o.toPath(t)+l}_handle(e,t,n,s){let o;return(o=r.rejectIf(!t||"object"!=typeof t,new i.GenericError("Argument params must be an object.")))?o:super._handle(e,t,n,s)}redirect(e,t={}){return super.redirect(e,Object.assign({},{headers:{"Cache-control":"no-store",Expires:"Thu, 01 Jan 1970 00:00:00 GMT"}},t))}}n.$registerImaPlugin=e=>{e.namespace("plugin.override")},n.ClientRouter=o,n.ServerRouter=a},{"@cns/rest-api-client":76,"@ima/core":81,"@ima/plugin-logger":110}],45:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{"./dist/main.js":44,dup:4}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("react"),s=e("prop-types"),o=e("@ima/plugin-logger"),a=e("@cns/plugin-atoms"),l=e("@cns/plugin-section"),c=e("@cns/plugin-advert"),u=e("@ima/plugin-loading-manager"),d=e("@ima/plugin-script-loader");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(r),h=p(s);class g extends i.AbstractController{static get $dependencies(){return["plugin.article.ArticleService","plugin.media.MediaService","plugin.service.ServiceService","$Response"]}constructor(e,t,n,i){super(),this._articleService=e,this._mediaService=t,this._serviceService=n,this._$response=i}load(){this._$response&&this._$response._response&&(this._$response._response.headersSent||this._$response._response.removeHeader("Content-Security-Policy"));let e=null,t=null;if(this.params.mediaId)t=this._mediaService.get(this.params.mediaId);else{const t=this._getCurrentArticleUid();e=this._articleService.get(t)}const n=this._serviceService.get();return{params:this.params,embedArticle:e,media:t,service:n}}setMetaParams(e,t){t.setTitle(e.service.metaTitle),t.setMetaName("description","Video Embed"),t.setMetaName("robots","noindex, nofollow")}_getCurrentArticleUid(){return this.params.article?this._articleService.extractId(this.params.article):null}}class f extends i.AbstractDocumentView{static get contextType(){return i.PageContext}static get masterElementId(){return"szn-clanky"}render(){const e=`\n\t\t\thtml, body, #szn-clanky {\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t\tbody {\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\t.${this.cssClasses("atm-fill")} {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tright: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder: none;\n\t\t\t\tdisplay: block;\n\t\t\t\tmin-width: 100%;\n\t\t\t\tmax-width: 100%;\n\t\t\t\tmin-height: 100%;\n\t\t\t\tmax-height: 100%;\n\t\t\t\tmargin: auto;\n\t\t\t}\n\t\t`;return m.default.createElement("html",null,m.default.createElement("head",null,m.default.createElement("meta",{charSet:"utf-8"}),m.default.createElement("meta",{name:"description",content:this.props.metaManager.getMetaName("description")}),m.default.createElement("meta",{name:"robots",content:this.props.metaManager.getMetaName("robots")}),m.default.createElement("title",null,this.props.metaManager.getTitle()),m.default.createElement("style",null,e)),m.default.createElement("body",null,m.default.createElement("div",{id:"szn-clanky",dangerouslySetInnerHTML:{__html:this.props.page}})))}}class _ extends i.AbstractDocumentView{static get defaultProps(){return{embedArticle:null,params:{},className:"",media:null,properties:{},settings:{},service:null}}get _configurationData(){const{embedArticle:e,media:t,params:n,service:i}=this.props,r=t||e&&e.caption||null;return r?this.utils.PlayerConfigurator.getConfigurationData({properties:{media:r},service:i,settings:{autoPrerollAds:!n.disableAutoPrerollAds,autoMidrollAds:!n.disableAutoMidrollAds,...this._generateAdvert("midroll",this._sanitizeParam(n.midrollZoneId)),...this._generateAdvert("midrollMarketing",this._sanitizeParam(n.midrollMarketingZoneId)),...this._generateAdvert("pauseAd",this._sanitizeParam(n.pauseAdZoneId)),...this._generateAdvert("postroll",this._sanitizeParam(n.postrollZoneId)),...this._generateAdvert("prerollMarketing",this._sanitizeParam(n.prerollMarketingZoneId)),...this._generateAdvert("preroll",this._sanitizeParam(n.prerollZoneId)),...this._generateAdvert("preroll2",this._sanitizeParam(n.prerollZoneId2)),trim:this._sanitizeParam(n.trim),embed:this._normalizedEmbedUrlParameter}},this.context):null}get _dotSettings(){return this.utils.$Settings.plugin.analytic.dot}get _normalizedEmbedUrlParameter(){const{params:e}=this.props,{embed:t}=e;return!t||"string"!=typeof t||["false","0"].includes(t.toLowerCase())?"":this._sanitizeParam(t)}render(){let{_configurationData:e}=this;return e?m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{id:"player-container",className:this.cssClasses("atm-fill")}),this._renderScriptTags(),m.default.createElement("script",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\tvar configuration = ${JSON.stringify(e)};\n\n\t\t\t\t\tif (window.DOT) {\n\t\t\t\t\t\tconfiguration.setup.dot = window.DOT;\n\t\t\t\t\t\twindow.DOT.cfg({\n\t\t\t\t\t\t\timpress: false,\n\t\t\t\t\t\t\tload: false,\n\t\t\t\t\t\t\tservice: '${this._dotSettings.defaultConfig.service}'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.GemiusPlayer) {\n\t\t\t\t\t\tconfiguration.setup.gemiusPlayer = window.GemiusPlayer;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tif (window.gemiusStream) {\n\t\t\t\t\t\tconfiguration.setup.gemiusStream = window.gemiusStream;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.SznPlayerLoader.load(${JSON.stringify(this.utils.PlayerScriptLoader.PLAYER_COMPONENTS)})\n\t\t\t\t\t\t.then(function() {\n\t\t\t\t\t\t\tvar player = window.SznPlayer.singleContentSetup(\n\t\t\t\t\t\t\t\tconfiguration.content,\n\t\t\t\t\t\t\t\tconfiguration.options,\n\t\t\t\t\t\t\t\tconfiguration.setup\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdocument.getElementById('player-container')\n\t\t\t\t\t\t\t\t.appendChild(player.getElement());\n\t\t\t\t\t\t\tplayer.setVisibleUiElements(configuration.visibleElements);\n\t\t\t\t\t\t});\n\t\t\t\t`}})):null}_renderScriptTags(){const{PLAYER_SCRIPTS:e}=this.utils.PlayerScriptLoader;return m.default.createElement(m.default.Fragment,null,e.map(((e,t)=>m.default.createElement("script",{key:t,src:e}))),m.default.createElement("script",{key:e.length,src:this._dotSettings.scriptUrl}))}_generateAdvert(e,t){return e&&t?{[e+"ZoneId"]:t,[e+"SkipOffset"]:5}:null}_sanitizeParam(e){if(!e)return;const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},n=new RegExp(["[",...Object.keys(t),"]"].join(""),"gi");return e.replace(n,(e=>t[e]))}}var y=Object.freeze({CONTENT_SWITCH:"@cns/plugin-player/content-switch"}),b=Object.freeze({DEFAULT:"inText",MAIN_MEDIA:"main",TIMELINE:"inTimeline"});class v{static get $dependencies(){return[a.MediaHelper]}constructor(e){this._mediaHelper=e}getPoster(e){const{properties:t,settings:n}=e||{},{media:i}=t||{},{trim:r}=n||{};if(!i)return null;const{height:s,url:o,width:l}=this._mediaHelper.getImageSource(i,r||a.MediaTrims.DEFAULT16x9,a.MediaSizes.WIDTH1200);return{height:s,url:o,width:l}}getSourceUrl(e){const{properties:t}=e||{},{media:n}=t||{},{liveStreamUrl:i,status:r,video:s}=n||{},{sdn:o}=s||{};return a.MediaHelper.isLive(n)?i:r&&"done"===r?o:null}}class C{static get $dependencies(){return["$Settings.plugin.cns.plugin.player"]}static get defaultOptions(){return{}}static get optionTypes(){throw new i.GenericError(`@cns/plugin-player/AbstractPlayerConfigurator: ${this.name}: optionTypes is an abstract static property and must be overriden.`)}static get relatedPluginSettingNames(){return[]}get baseOptions(){const e=this.constructor.relatedPluginSettingNames.reduce(((e,t)=>{const n=this._findPropertyByPath(this._settings,t);return n.found&&(e[n.name]=n.value),e}),{});return{...this.constructor.defaultOptions,...e}}constructor(e){this._settings=e||{}}_checkOptions(e){h.default.checkPropTypes(this.constructor.optionTypes,e,"option",`@cns/plugin-player/${this.constructor.name}`)}_findPropertyByPath(e,t,n="."){return t.split(n).reduce(((e,t)=>"object"==typeof e.value&&e.value&&t&&t in e.value?{found:!0,name:t,value:e.value[t]}:{found:!1,name:null,value:null}),{name:null,value:e,found:!1})}}const w="ArticlePublished",E="StoryArticlePublished";class S extends C{static get $dependencies(){return[a.MediaHelper,v,"$Router",l.SectionHelper,...C.$dependencies]}static get defaultOptions(){return{}}static get optionTypes(){return{analyticsData:h.default.shape({context:h.default.string,contextId:h.default.string,embed:h.default.string,materialName:h.default.string,materialType:h.default.string,sectionName:h.default.string,service:h.default.string}),contentInfo:h.default.shape({linkLabel:h.default.string,linkTarget:h.default.string,linkUrl:h.default.string,videoAuthor:h.default.string,videoDescription:h.default.string}),duration:h.default.number,id:h.default.string.isRequired,poster:h.default.string,pp:h.default.bool,source:h.default.shape({src:h.default.string.isRequired,type:h.default.string.isRequired,options:h.default.shape({cutFrom:h.default.number,cutTo:h.default.number,type:h.default.string})}).isRequired,startTime:h.default.number,title:h.default.string,vpId:h.default.string}}get _analyticsData(){const{_media:e,_props:t}=this,{article:n,service:i,settings:r}=t,{title:s,uid:o}=n||{},{_cls:a}=e,{name:l}=i||{},{embed:c,layoutContext:u}=r||{},d={context:u&&String(u)||b.DEFAULT};return s&&(d.materialName=this._removeInvalidCharactersForAnalytics(s)),a&&(d.materialType=this._removeInvalidCharactersForAnalytics(a)),n&&(d.sectionName=this._removeInvalidCharactersForAnalytics(this._sectionHelper.getPrimarySectionName(n))),o&&(d.contextId=String(o)),l&&(d.service=this._removeInvalidCharactersForAnalytics(l)),c&&(d.embed=String(c)),d}get _contentInfo(){const{article:e}=this._props,{_cls:t,urlParameters:n}=e||{},i={},r=this._mediaHelper.getCaption(this._media,this._mediaHelper.VIDEO_CAPTION_PREFIX);return r&&(i.videoAuthor=r),n&&[w,E].includes(t)&&(i.linkLabel="lnek",i.linkTarget="_top",i.linkUrl=this._router.link("detail",n)),Object.keys(i).length>0?i:null}get _dotData(){const{currentABTest:e}=this._pageContext||{},t=e&&e.createDotAbtestParam&&e.createDotAbtestParam();return t?{"*":{abTest:t}}:null}get _duration(){const{video:e}=this._media,{videoInfo:t}=e||{},{durationS:n}=t||{},{cutFrom:i,cutTo:r}=this._sourceOptions,s=Number(n)-(i||0)+(r||0);return s>0?s:0}get _media(){const{properties:e}=this._props,{media:t}=e||{};return t||{}}get _source(){const e=this._playerConfigurationHelper.getSourceUrl(this._props),{_sourceOptions:t}=this,n={src:e,type:e&&e.indexOf(".mp4")>0?"video/mp4":"application/vnd.seznam-cz.spl+json"};return Object.keys(t).length>0&&(n.options=t),n}get _sourceOptions(){const{_media:e}=this,{skipStartTime:t,skipEndTime:n}=e,i={};a.MediaHelper.isLive(e)&&(i.type="EVENT");const r=Number(t),s=-Number(n);return r>0&&(i.cutFrom=r),s<0&&!a.MediaHelper.isRunningLive(e)&&(i.cutTo=s),i}get _startTime(){const{_media:e}=this,{playFromBeginning:t}=e;return t&&a.MediaHelper.isRunningLive(e)?0:null}get _title(){const{article:e}=this._props,{text:t}=this._media;return t||e&&e.title}constructor(e,t,n,i,...r){super(...r),this._mediaHelper=e,this._playerConfigurationHelper=t,this._router=n,this._sectionHelper=i}getOptions(e,t){this._props=e||{},this._pageContext=t||{};const{baseOptions:n,_analyticsData:i,_contentInfo:r,_dotData:s,_duration:o,_media:a,_playerConfigurationHelper:l,_props:c,_source:u,_startTime:d,_title:p}=this,{productPlacement:m,uid:h,videoportalId:g}=a,f={...n,id:String(h),source:u},_=l.getPoster(c).url;return _&&(f.poster=_),g&&(f.vpId=String(g)),p&&(f.title=p),r&&(f.contentInfo=r),s&&(f.dotData=s),o&&(f.duration=o),null!=d&&(f.startTime=d),m&&(f.pp=!!m),i&&(f.analyticsData=i),this._checkOptions(f),f}_removeInvalidCharactersForAnalytics(e){return"string"!=typeof e?(o.warn("@cns/plugin-player/Content._removeInvalidCharactersForAnalytics(): Argument string expected to be string."),null):e.replace(/[;/]/g,"")}}class T extends C{static get optionTypes(){return{actionArea:h.default.bool,adClickThrough:h.default.bool,adInfo:h.default.bool,adInfoNext:h.default.bool,adSkip:h.default.bool,captions:h.default.bool,castButton:h.default.bool,contentInfo:h.default.bool,contentInfoAuthor:h.default.bool,contentInfoDuration:h.default.bool,contentInfoLink:h.default.bool,contentInfoPp:h.default.bool,contentInfoTitle:h.default.bool,fullscreenButton:h.default.bool,injections:h.default.bool,liveInfo:h.default.bool,logo:h.default.bool,pipButton:h.default.bool,pp:h.default.bool,settingsButton:h.default.bool,subtitlesButton:h.default.bool}}static get relatedPluginSettingNames(){return["actionArea","adClickThrough","adInfo","adInfoNext","adSkip","captions","castButton","contentInfo","contentInfoAuthor","contentInfoDuration","contentInfoLink","contentInfoPp","contentInfoTitle","fullscreenButton","injections","liveInfo","logo","pipButton","pp","settingsButton","subtitlesButton"].map((e=>`visibleElements.${e}`))}getOptions(){const e={...this.baseOptions};return this._checkOptions(e),e}}const P=Object.freeze({AUTO:"auto",MANUAL:"manual",MARKETING:"marketing"});class x extends C{static get $dependencies(){return[c.AdvertHelper,...C.$dependencies]}static get optionTypes(){return{midroll:h.default.shape({point:h.default.shape({timeType:h.default.string}),skipOffset:h.default.arrayOf(h.default.number).isRequired,spec:h.default.arrayOf(h.default.shape({collocation:h.default.string,section:h.default.string,type:h.default.string,zoneId:h.default.string})).isRequired}),overlay:h.default.shape({closeOffset:h.default.number,spec:h.default.shape({collocation:h.default.string,section:h.default.string,zoneId:h.default.string}).isRequired,startOffset:h.default.number}),pauseAd:h.default.shape({spec:h.default.shape({collocation:h.default.string,section:h.default.string,zoneId:h.default.string}).isRequired}),postroll:h.default.shape({skipOffset:h.default.number.isRequired,spec:h.default.shape({collocation:h.default.string,section:h.default.string,zoneId:h.default.string}).isRequired}),preroll:h.default.shape({autoMode:h.default.bool,skipOffset:h.default.arrayOf(h.default.number).isRequired,spec:h.default.arrayOf(h.default.shape({collocation:h.default.string,section:h.default.string,type:h.default.string,zoneId:h.default.string})).isRequired})}}get _midroll(){const{autoMidrollAds:e,midrollMarketingSectionPrefix:t,midrollMarketingSkipOffset:n,midrollMarketingZoneId:i,midrollSectionPrefix:r,midrollSkipOffset:s,midrollZoneId:o}=this._atomSettings;if(!e)return null;const a=[[o,r,s,e],[i,t,n,e,!0]].reduce(((e,t)=>{const n=this._createAdConfiguration(...t);return n&&(e.spec.push(n.spec),e.skipOffset.push(n.skipOffset)),e}),{point:{timeType:"auto"},skipOffset:[],spec:[]});return a.spec.length?a:null}get _overlay(){const{overlayCloseOffset:e,overlaySectionPrefix:t,overlayStartOffset:n,overlayZoneId:i}=this._atomSettings,r=this._createAdConfiguration(i,t);if(!r)return null;if(delete r.skipOffset,e){const t=Number(e);Number.isNaN(t)||(r.closeOffset=t)}if(n){const e=Number(n);Number.isNaN(e)||(r.startOffset=e)}return r}get _pauseAd(){const{pauseAdSectionPrefix:e,pauseAdZoneId:t}=this._atomSettings,n=this._createAdConfiguration(t,e);return n?(delete n.skipOffset,n):null}get _postroll(){const{postrollSectionPrefix:e,postrollSkipOffset:t,postrollZoneId:n}=this._atomSettings;return this._createAdConfiguration(n,e,t)}get _preroll(){const{autoPrerollAds:e,prerollMarketingSectionPrefix:t,prerollMarketingSkipOffset:n,prerollMarketingZoneId:i,prerollSectionPrefix:r,prerollSkipOffset:s,prerollZoneId:o,preroll2SectionPrefix:a,preroll2SkipOffset:l,preroll2ZoneId:c}=this._atomSettings,u=[[o,r,s,e],[c,a,l,e],[i,t,n,e,!0]].reduce(((e,t)=>{const n=this._createAdConfiguration(...t);return n&&(e.spec.push(n.spec),e.skipOffset.push(n.skipOffset)),e}),{autoMode:!!e,skipOffset:[],spec:[]});return u.spec.length?u:null}get _shouldShowAdvert(){const{media:e}=this._props.properties||{};return!(!e||!(a.MediaHelper.isRunningLive(e)?e.showAdvertInLive:e.showAdvert))}constructor(e,...t){super(...t),this._advertHelper=e}getOptions(e,t){this._props=e||{},this._pageContext=t||{},this._atomSettings=this._props.settings||{},this._collocation=this._getCollocation();const{baseOptions:n,_midroll:i,_overlay:r,_pauseAd:s,_postroll:o,_preroll:a,_shouldShowAdvert:l}=this;if(!l)return{};const c={...n};return a&&(c.preroll=a),i&&(c.midroll=i),o&&(c.postroll=o),r&&(c.overlay=r),s&&(c.pauseAd=s),this._checkOptions(c),c}_createAdConfiguration(e,t,n,i=!1,r=!1){if(!e)return null;const{article:s}=this._props,o=Number(n),a={spec:{zoneId:String(e)},skipOffset:null===n||Number.isNaN(o)?-1:o};return r?a.spec.type=P.MARKETING:i&&(a.spec.type=P.AUTO),this._collocation&&(a.spec.collocation=this._collocation),(s||t)&&(a.spec.section=this._advertHelper.selectVideoAdvertSection(s,t)),a}_getCollocation(){const{article:e,layout:t}=this._props,{currentABTest:n}=this._pageContext||{};let i="";return e&&Array.isArray(e.adKeywords)&&(i+=` ${e.adKeywords.join(" ")}`),t&&Array.isArray(t.adKeywords)&&(i+=` ${t.adKeywords.join(" ")}`),n&&(i=this._advertHelper.addABTestKeywordToCollocation(i,n)||""),i.trim()}}class I extends C{static get $dependencies(){return["$Window",...C.$dependencies]}static get optionTypes(){return{autoplay:h.default.string,playWhenVisible:h.default.bool,autoplaySubtitles:h.default.string}}static get relatedPluginSettingNames(){return["playWhenVisible"]}get _richMediaPlayer(){const{SznPlayer:e}=this._nativeWindow,{SznRichMediaPlayer:t}=e||{},{autoplay:n,subtitles:i}=t||{};return n&&i&&"object"==typeof n&&"object"==typeof i?t:null}get _shouldAutoplayRunningLive(){const{autoPlay:e,mutedAutoPlay:t}=this._props.settings||{},{media:n}=this._props.properties||{};return void 0===e&&void 0===t&&a.MediaHelper.isRunningLive(n)}constructor(e,...t){super(...t),this._window=e,this._nativeWindow=e&&e.getWindow&&e.getWindow()||{}}getOptions(e){this._props=e||{};const{baseOptions:t,_props:n,_richMediaPlayer:i,_shouldAutoplayRunningLive:r}=this,{autoPlay:s,autoPlaySubtitles:o,mutedAutoPlay:a,mutedAutoPlaySubtitles:l}=n.settings||{},c={...t};return i&&(c.autoplay=a?i.autoplay.MUTED:s||r?i.autoplay.AUTO:i.autoplay.DISABLED,c.autoplaySubtitles=l?i.subtitles.MUTED:o?i.subtitles.ALWAYS:i.subtitles.DISABLED),this._checkOptions(c),c}}class A extends C{static get $dependencies(){return[x,"$Settings.plugin.analytic.gemius",I,"$Window",...C.$dependencies]}static get defaultOptions(){return{autoContentSwitch:!0,disableSplashScreen:!1,ssp:!0,transitionNextItemTime:1e4,transitionWaitingTime:5e3}}static get optionTypes(){return{ads:h.default.shape(x.optionTypes),autoContentSwitch:h.default.bool,disableSplashScreen:h.default.bool,dot:h.default.object,gemiusStream:h.default.object,gemiusStreamSettings:h.default.shape({identifier:h.default.string.isRequired}),gemiusPlayer:h.default.func,gemiusPrismSettings:h.default.shape({accountId:h.default.string.isRequired}),ssp:h.default.oneOfType([h.default.bool,h.default.string]),transitionEnabled:h.default.bool,transitionNextItemTime:h.default.number,transitionPreviewEnabled:h.default.bool,transitionWaitingTime:h.default.number,userLogin:h.default.bool,vpZone:h.default.string}}static get relatedPluginSettingNames(){return["transitionEnabled","transitionPreviewEnabled"]}get _userLogin(){const{settings:e}=this._props,{embed:t}=e||{};return!t&&null}constructor(e,t,n,i,...r){super(...r),this._adsConfig=e,this._gemiusSettings=t||{},this._playlistConfig=n,this._window=i,this._nativeWindow=i&&i.getWindow&&i.getWindow()||{}}getOptions(e,t){this._props=e||{};const{baseOptions:n,_settings:i,_userLogin:r,_nativeWindow:s}=this,{DOT:o,GemiusPlayer:a,gemiusStream:l}=s,{gemiusPrismIdentifier:c}=this._gemiusSettings,{vpZone:u}=i,d=this._adsConfig.getOptions(e,t),p=this._playlistConfig.getOptions(e),m={...n};return d&&Object.keys(d).length>0&&(m.ads=d),o&&(m.dot=o),c&&(m.gemiusPrismSettings={accountId:c},m.gemiusStreamSettings={identifier:c},a&&(m.gemiusPlayer=a),l&&(m.gemiusStream=l)),u&&(m.vpZone=String(u)),null!=r&&(m.userLogin=r),p&&(m.playlistConfig=p),this._checkOptions(m),m}}class k extends C{static get defaultOptions(){return{disableDefaultPauseAd:!0,id:"usa"}}static get optionTypes(){return{countdownBeforeAd:h.default.number,countAds:h.default.bool,disableDefaultPauseAd:h.default.bool,id:h.default.string.isRequired,muted:h.default.bool}}static get relatedPluginSettingNames(){return["countdownBeforeAd","muted"]}getOptions(e){this._props=e||{};const{service:t}=this._props,n={...this.baseOptions};return"countAds"in t&&(n.countAds=!!t.countAds),this._checkOptions(n),n}}const R="@cns/plugin-player/PlayerConfigurator";class M{static get $dependencies(){return[S,"$EventBus",v,T,A,k,"$Window"]}get _player(){if(!this._playerInstance){const{SznPlayer:e}=this._nativeWindow;e&&"function"==typeof e.singleContentSetup&&(this._playerInstance=e)}return this._playerInstance}constructor(e,t,n,i,r,s,o){this._content=e,this._eventBus=t,this._playerConfigurationHelper=n,this._playerInstance=null,this._playerVisibleElements=i,this._singleContentSetup=r,this._techOptions=s,this._window=o,this._nativeWindow=o&&o.getWindow&&o.getWindow()||{}}_onContentSwitch(e,t){this._eventBus.fire(e.current,y.CONTENT_SWITCH,t)}configurePlayer(e,t,n){const{_player:r,_window:s}=this;if(!s||!s.isClient())throw new i.GenericError(`${R}: configurePlayer() can be called only on a client side.`);if(!r)throw new i.GenericError(`${R}: SznPlayer must be loaded before calling configurePlayer().`);if(!n||!n.current)throw new i.GenericError(`${R}: configurePlayer() expected playerElementRef to be a reference to a rendered element.`);const a=this.getConfigurationData(e,t),l=this._player.singleContentSetup(a.content,a.options,a.setup);o.debug(`${R}: configurePlayer() calls SznPlayer.singleContentSetup(content, options, setup) with:`,"\n","content = ",a.content,"\n","options = ",a.options,"\n","setup = ",a.setup);const c=n.current;return c.firstChild&&c.removeChild(c.firstChild),c.appendChild(l.getElement()),l.setVisibleUiElements(a.visibleElements),o.debug(`${R}: configurePlayer() calls player.setVisibleUiElements(options) with:`,"\n","options = ",a.visibleElements),l.on(r.SznRichMediaPlayer.EVENT_CONTENT_SWITCH,this._onContentSwitch.bind(this,n)),l}getConfigurationData(e,t){return{content:this._content.getOptions(e,t),options:this._techOptions.getOptions(e),setup:this._singleContentSetup.getOptions(e,t),visibleElements:this._playerVisibleElements.getOptions()}}getPoster(e){return this._playerConfigurationHelper.getPoster(e)}getSourceUrl(e){return this._playerConfigurationHelper.getSourceUrl(e)}}const O="@cns/plugin-player/PlayerScriptLoader";class N{static get $dependencies(){return["$Settings.plugin.cns.plugin.player",d.ScriptLoaderPlugin,"$Window"]}get PLAYER_COMPONENTS(){return["shim","player"]}get PLAYER_SCRIPTS(){return[...this.PLAYER_SCRIPTS_REQUIRED,...this.PLAYER_SCRIPTS_OPTIONAL]}get PLAYER_SCRIPTS_OPTIONAL(){return this._settings.scripts&&this._settings.scripts.optional}get PLAYER_SCRIPTS_REQUIRED(){return this._settings.scripts&&this._settings.scripts.required}constructor(e,t,n){this._settings=e||{},this._scriptLoader=t,this._window=n,this._loadEverythingOnce=u.once(this._loadEverything.bind(this)),this._loadComponentsBound=this._loadComponents.bind(this),this._processScriptsLoadingResultsBound=this._processScriptsLoadingResults.bind(this)}load(){return this._loadEverythingOnce()}_loadComponents(){const{SznPlayerLoader:e}=this._window.getWindow();return e.load(this.PLAYER_COMPONENTS)}_loadEverything(){return this._loadScripts().then(this._loadComponentsBound)}_loadScripts(){const e=this.PLAYER_SCRIPTS.map((e=>this._scriptLoader.load(e)));return"function"==typeof Promise.allSettled?Promise.allSettled(e).then(this._processScriptsLoadingResultsBound):Promise.all(e)}_processScriptsLoadingResults(e){const t=Object.assign({},...this.PLAYER_SCRIPTS_REQUIRED.map((e=>({[e]:1}))));e.forEach((e=>{const{reason:n,status:i,value:r}=e||{};"rejected"!==i?r&&r.url&&t[r.url]&&delete t[r.url]:o.error(new Error(`${O}: ${n.message||n}`))}));const n=Object.keys(t);if(n.length>0)throw new Error(`${O}: Loading failed for these required scripts: ${n.join(", ")}`);return e}}class D extends i.AbstractPureComponent{static get contextType(){return i.PageContext}static get defaultProps(){return{className:"",properties:{},settings:{}}}get Iframe(){return i.ns.get("plugin.atoms.component.atom.iframe.Iframe")}get _src(){const{media:e}=this.props.properties,{autoMidrollAds:t,autoPrerollAds:n,midrollMarketingZoneId:i,midrollZoneId:r,pauseAdZoneId:s,postrollZoneId:o,prerollMarketingZoneId:a,prerollZoneId:l,preroll2ZoneId:c,trim:u}=this.props.settings,{appRouteNames:d}=this.utils.$Settings.plugin.cns.plugin.player||{},{EMBED_PLAYER:p}=d||{};if(!e||!e._id||!p)return null;const m={mediaId:e._id};return[{name:"disableAutoMidrollAds",value:!t},{name:"disableAutoPrerollAds",value:!n},{name:"midrollMarketingZoneId",value:i},{name:"midrollZoneId",value:r},{name:"pauseAdZoneId",value:s},{name:"postrollZoneId",value:o},{name:"prerollMarketingZoneId",value:a},{name:"prerollZoneId",value:l},{name:"prerollZoneId2",value:c},{name:"trim",value:u}].forEach((e=>{e.value&&(m[e.name]=e.value)})),this.link(p,m)}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.player.component.atom.iframePlayer.IframePlayer")}render(){const{_src:e}=this;if(!e)return null;const{Iframe:t}=this;return m.default.createElement("div",{className:this.cssClasses("atm-iframe-player",!0),"data-dot":"atm-iframe-player"},m.default.createElement(t,{allowFullScreen:!0,className:this.cssClasses("atm-iframe-player__iframe"),layout:"fill",noloading:!0,src:e,sandbox:this.utils.$UIComponentHelper.isAmp()?"allow-presentation allow-scripts":null}))}}n.$registerImaPlugin=e=>{e.set("plugin.player.component.atom.iframePlayer.IframePlayer",D)},n.IframePlayer=D,n.LayoutContext=b,n.PlayerConfigurator=M,n.PlayerEvent=y,n.PlayerScriptLoader=N,n.VideoEmbedController=g,n.VideoEmbedDocumentView=f,n.VideoEmbedView=_,n.initBind=(e,t)=>{t.get("$ComponentUtils").register({PlayerConfigurator:M,PlayerScriptLoader:N})},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{player:{appRouteNames:{EMBED_PLAYER:"embed-player"},countdownBeforeAd:5,muted:!1,playWhenVisible:!1,scripts:{required:["https://d53-a.sdn.cz/d_53/sl/13/loader.js"],optional:["https://scz.hit.gemius.pl/gplayer.js","https://scz.hit.gemius.pl/gstream.js"]},transitionEnabled:!0,transitionPreviewEnabled:!0,visibleElements:{actionArea:!0,adClickThrough:!0,adInfo:!0,adInfoNext:!0,adSkip:!0,captions:!0,castButton:!0,contentInfo:!0,contentInfoAuthor:!0,contentInfoDuration:!0,contentInfoLink:!0,contentInfoPp:!0,contentInfoTitle:!0,fullscreenButton:!0,injections:!0,liveInfo:!0,logo:!0,pipButton:!0,pp:!0,settingsButton:!0,subtitlesButton:!0},vpZone:""}}}}}})},{"@cns/plugin-advert":15,"@cns/plugin-atoms":20,"@cns/plugin-section":53,"@ima/core":81,"@ima/plugin-loading-manager":106,"@ima/plugin-logger":110,"@ima/plugin-script-loader":135,"prop-types":232,react:242}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@cns/rest-api-client"),r=e("@ima/core");class s extends i.AbstractEntity{static get idFieldName(){return"id"}static get idParameterName(){return"source"}static get inlineResponseBody(){return!0}static get resourceName(){return"redirect"}constructor(e){super(e)}$deserialize(e){const t=super.$deserialize(e);return t.id=e._id,delete t._id,t.data={},t}}class o extends i.AbstractService{static get entityClass(){return r.ns.get("plugin.redirect.RedirectEntity")}getBySourceUrl(e){const t={source:{$eq:e}};return this.get(null,{filter:t})}}n.$registerImaPlugin=e=>{e.namespace("plugin.redirect.RedirectEntity"),e.plugin.redirect.RedirectEntity=s},n.Redirect=class{static get $dependencies(){return[o,"$Router","$Settings"]}get serviceSlug(){return this._settings.router.defaultService}constructor(e,t,n){this._redirectService=e,this._router=t,this._settings=n}tryRedirect(){const e=this._routeInfo();if(!e.path||"string"!=typeof e.path)return;const t=this._getRedirectData(e);return this._checkUrl(t,e)}_checkUrl(e,t){return e.then((e=>{if(e&&e.length){const n=this._getAbsoluteUrl(e[0].destination,t);this._router.redirect(n)}})).catch((()=>{throw new r.GenericError("Url redirect failed",{status:500})}))}_getAbsoluteUrl(e,t){if(!this._isAbsoluteUrl(e)){const n=t.service?`/${t.serviceSlug}`:"",i="string"==typeof e&&e.startsWith("/")?"":"/";return`${this._router.getDomain()}${n}${i}${e}`}return e}_getPath(e){return e.path.startsWith("/")?e.path:`/${e.path}`}_getRedirectData(e){const t=this._getPath(e);return this._redirectService.getBySourceUrl(`${t.toLowerCase()}`)}_isAbsoluteUrl(e){return/^(?:[a-z]+:)?\/\//i.test(e)}_routeInfo(){const e=this.serviceSlug,t=this._router.getPath(),n=new RegExp(`^(/(${e}))?/([^?#]*)`,"i").exec(t);return n&&n.length>2?{service:!!n[2],serviceSlug:e,path:n[3]}:{service:!1,serviceSlug:e,path:t}}},n.RedirectEntity=s,n.initSettings=()=>({prod:{router:{defaultService:""}}})},{"@cns/rest-api-client":76,"@ima/core":81}],48:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":47,dup:8}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@ima/plugin-loading-manager"),s=e("@ima/plugin-logger"),o=e("@cns/utils");class a{static get $dependencies(){return["$Http","$Settings.plugin.monitoring.customUrl","$Settings.plugin.cns.plugin.report.maxConcurrentRequests"]}constructor(e,t,n){this._http=e,this._url=t,this._maxConcurrentRequests=n,this._queue=[]}add(e,t){this._queue.push(Object.assign({},t,{$type:e}))}isEmpty(){return this.size()<=0}processBatch(){if(this.isEmpty())return null;let e=this._queue.splice(0,this._maxConcurrentRequests);return Promise.all(e.map((e=>this._http.post(this._url,e,{repeatRequest:0}).catch(s.error)))).then((()=>this.processBatch())).catch(s.error)}size(){return this._queue.length}}const l=Object.freeze({ERROR:"error",ADVERT:"advert",SPEED:"speed"});class c{static get $dependencies(){return["$Dispatcher","$PageStateManager","$Router","$Window",a,o.StringReferencesHelper,"$Settings.plugin.cns.plugin.report"]}constructor(e,t,n,i,r,s,o){this._dispatcher=e,this._pageStateManager=t,this._router=n,this._window=i,this._batchProcessingQueue=r,this._stringReferencesHelper=s,this._config=o,this._reportStateData={},this._reportingIntervalId=null,this._referrer=null,this._errorReportCount=0,this._reportingPaused=!0}init(){const{reportStateValues:e}=this._config;e&&!Array.isArray(e)&&s.error("cns.plugin.report: reportStateData must be of type Array."),e.length&&this._dispatcher.listen(i.StateEvents.AFTER_CHANGE_STATE,this._collectReportStateData,this),this._window.isClient()&&(this._referrer=this._window.getDocument().referrer,this._dispatcher.listen(i.RouterEvents.BEFORE_HANDLE_ROUTE,(()=>{this._reportingPaused=!0})),this._dispatcher.listen(i.RouterEvents.AFTER_HANDLE_ROUTE,(()=>{this.sendCurrentReports()})),this._dispatcher.listen(r.StageEvents.LOW,(e=>{e.addTask((()=>{this._reportingPaused=!1,this.sendCurrentReports()}))})))}handleClientError(e,t=!0){if(e&&e.name&&"SyntaxError"===e.name&&e.message&&e.message.includes("JSON"))this._reportClientError(e);else if(t&&e&&e.name&&-1===this._config.ignoreExceptionNames.indexOf(e.name)){this._reportClientError(e);const t=e.stack,n=new RegExp("("+this._config.bundleFileNames.join("|")+")");if(t&&"string"==typeof t&&-1===t.search(n))return;this._dispatcher.fire("page-error",{error:e}),this._router.handleError({error:e})}else this._reportClientError(e||new Error("Null error."))}report(e,t={}){this._batchProcessingQueue.add(e,this._addAdditionalReportData(t)),this._reportingPaused&&-1===e.indexOf("error")||this.sendCurrentReports()}sendCurrentReports(){if(this._batchProcessingQueue.isEmpty())return null;this._batchProcessingQueue.processBatch().catch(s.error)}_addAdditionalReportData(e){const{route:t,params:n,path:i}=this._router.getCurrentRouteInfo();let r;try{r=JSON.stringify(n)}catch(e){s.error("cns.plugin.report: unable to stringify params\n",e)}const o={referrer:this._referrer,route:{path:i,params:r,name:t.getName()},state:this._reportStateData};return Object.assign({},o,e)}_collectReportStateData(){this._reportStateData={};const e=this._pageStateManager.getState();this._config.reportStateValues.forEach((t=>{Object.assign(this._reportStateData,{[t]:this._stringReferencesHelper.getReferenceData(`@${t}`,e)})}))}_reportClientError(e){if(e&&!e.name&&!e.message&&!e.stack)try{let t,n;try{t=`Keys:[${Object.keys(e).join(",")}]`}catch(e){t=`No object keys (${e.toString()})`}try{n=e.toString()}catch(e){n=`No error string (${e.toString()})`}throw new Error(`Empty error.\n${n}\n${t}`)}catch(t){e=t}if(e&&this._errorReportCount<this._config.maxErrorReportCount){this._errorReportCount+=1;let{name:t,message:n,stack:i}=e;i=JSON.stringify(i);const r=e.getParams?e.getParams():{},s=this._router.getUrl();this.report("error",{name:t,message:n,stack:i,params:r,url:s})}}}n.$registerImaPlugin=e=>{e.namespace("plugin.report")},n.BatchProcessingQueue=a,n.ReportService=c,n.ReportTypes=l,n.initBind=()=>{},n.initServices=(e,t,n)=>{const s=t.get("$Dispatcher"),o=t.get("$Window"),a=t.get(c),l=t.get(r.LoadingManager),u=[r.StageEvents.OTHER,r.StageEvents.PREFETCH];o.isClient()&&(s.listen(r.StageEvents.CRITICAL,(e=>{e.addTask(r.once((()=>{a.init()})))})),n.$IMA.fatalErrorHandler=e=>{a.handleClientError(e,!1),console.error("FATAL ERROR HANDLER:",e)},s.listen(r.LoadingManagerEvents.ERROR,(e=>a.handleClientError(e&&e.error,!u.includes(l.currentStage)))),o.bindEventListener(o.getWindow(),"error",(e=>{a.handleClientError(e.error)})),o.bindEventListener(o.getWindow(),"unhandledrejection",(e=>{a.handleClientError(e.reason,!1)})),s.listen(t.get("$WarningEventName"),(e=>{let t=Object.assign({},e,{error:{name:e.error.name,message:e.error.message,stack:JSON.stringify(e.error.stack||{})}}),n=new i.GenericError(`The warning from ${e.package}:${e.class}:${e.method}.`,t);a.handleClientError(n,!1)})))},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{report:{maxConcurrentRequests:3,reportStateValues:[],maxErrorReportCount:2,ignoreExceptionNames:["SecurityError"],bundleFileNames:["app.bundle.","vendor.client.","app.client.","polyfill.","shim."]}}}}}})},{"@cns/utils":78,"@ima/core":81,"@ima/plugin-loading-manager":106,"@ima/plugin-logger":110}],50:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{"./dist/main.js":49,dup:4}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@ima/plugin-logger"),s=e("@ima/plugin-merkur"),o=e("react"),a=e("@merkur/integration-react/lib/index.es9.cjs"),l=e("prop-types"),c=e("@ima/helpers");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(o),p=u(l),m=u(c);class h extends i.AbstractExtension{static get $dependencies(){return[s.MerkurResource,"$UIComponentHelper","$Settings.plugin.cns.plugin.ribbonMerkur"]}constructor(e,t,n){super(),this._merkurResource=e,this._uiComponentHelper=t,this._settings=n,this._cachedWidgetData=null}load(){return{ribbonMerkurWidget:this._getRibbonMerkurWidget()}}_fetchRibbonMerkurWidget(){const{apiUrl:e,widgetClassName:t,serviceID:n}=this._settings;n||console.warn("Plugin ribbonMerkur couldn't find serviceID in the $Settings.plugin.cns.plugin.ribbonMerkur.serviceID settings");const i={containerSelector:`.${t}`,debug:!1,isAmp:this._uiComponentHelper.isAmp(),serviceID:n};return this._merkurResource.get(e,i,{ttl:864e8,timeout:500,repeatRequest:0}).then((e=>(this._cachedWidgetData={widgetProperties:e.body},this._cachedWidgetData))).catch((e=>(r.error(e),null)))}_getRibbonMerkurWidget(){return this._cachedWidgetData?this._cachedWidgetData:this._fetchRibbonMerkurWidget()}}class g extends i.AbstractComponent{static get contextType(){return i.PageContext}static get defaultProps(){return{className:"",ribbonMerkurWidget:p.default.object}}static get requiredProps(){return["ribbonMerkurWidget"]}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.ribbonMerkur.component.organism.ribbon.Ribbon"),this.utils.$UIComponentHelper.isAmp()&&this._registerAmpStyles()}render(){const{ribbonMerkurWidget:e}=this.props,t=e&&e.widgetProperties&&e.widgetProperties.height?{height:e.widgetProperties.height}:void 0;return d.default.createElement("div",{className:this.cssClasses("ogm-ribbon",!0),"data-dot":"ogm-ribbon",style:t},this._renderMerkurWidget(e))}_renderMerkurWidget(e){const{$Settings:t}=this.utils;if(!e||!e.widgetProperties)return null;const n=m.default.clone(e.widgetProperties);return n.assets=t.plugin.cns.plugin.ribbonMerkur.assetsFilterMethod(n.assets),this.utils.$UIComponentHelper.isAmp()&&(n.assets=[]),d.default.createElement(a.MerkurWidget,{widgetProperties:n})}_registerAmpStyles(){const{ribbonMerkurWidget:e}=this.props,t=e&&e.widgetProperties&&e.widgetProperties.assets;if(Array.isArray(t)&&t.length){const e=t.reduce(((e,t)=>("inlineStyle"===t.type&&(e+=t.source),e)),"");this.utils.CssRenderingHelper.registerInlineCss("plugin.ribbonMerkur.component.organism.ribbon.Ribbon",e)}}}n.$registerImaPlugin=e=>{e.set("app.component.organism.ribbon.Ribbon",g),e.set("plugin.ribbonMerkur.component.organism.ribbon.Ribbon",g)},n.Ribbon=g,n.RibbonExtension=h,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{ribbonMerkur:{apiUrl:"https://ribbon.seznam.cz/widget",widgetClassName:"ribbon_wrapper",serviceID:"",assetsFilterMethod:e=>e}}}}},test:{plugin:{cns:{plugin:{ribbonMerkur:{apiUrl:"https://ribbon.test.dszn.cz/widget"}}}}},dev:{plugin:{cns:{plugin:{ribbonMerkur:{apiUrl:"https://ribbon.test.dszn.cz/widget"}}}}}})},{"@ima/core":81,"@ima/helpers":83,"@ima/plugin-logger":110,"@ima/plugin-merkur":114,"@merkur/integration-react/lib/index.es9.cjs":159,"prop-types":232,react:242}],52:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":51,dup:8}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/rest-api-client"),s=e("@cns/plugin-ab-testing"),o=e("@cns/plugin-meta-header"),a=e("@cns/utils"),l=e("@ima/plugin-logger");class c extends r.AbstractEntity{static get dataFieldMapping(){return{id:"_id",metaKeywords:r.defaultToArray}}static get embeds(){return[{field:"layout",resource:i.ns.get("plugin.layout.LayoutEntity")},{field:"parent",resource:i.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"parent.parent",resource:i.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"parent.parent.parent",resource:i.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1},{field:"parent.parent.parent.parent",resource:i.ns.get("plugin.section.SectionEntity"),inline:!0,cache:!1}]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"section"}get urlParameters(){return{section:`${this.slug}-${this.uid}`}}constructor(e){super(e)}}class u extends r.AbstractService{static get $dependencies(){return[s.PageABTestRegistry,"$Settings.plugin.cns.plugin.section",...r.defaultDependencies]}static get entityClass(){return i.ns.get("plugin.section.SectionEntity")}constructor(e,t,...n){super(...n),this._pageABTestRegistry=e,this._settings=t,Object.freeze(this)}get(e,t={}){const{abTestReplacementFields:n}=this._settings,i=super.get(e,t),r=this._pageABTestRegistry.getCurrentABTest();return s.applyAbTestModification(i,r,n)}loadSections(e={}){const t=Object.assign({},{filter:{visible:!0},limit:100},e);return this.list(t).then((e=>new r.List(...e)))}}class d extends i.AbstractController{static get $dependencies(){return[a.ExtensionsHelper,a.ControllerHelper,"plugin.layout.LayoutService","plugin.service.ServiceService","plugin.section.SectionService","$Router"]}constructor(e,t,n,i,r,s){super(),this._extensionsHelper=e,this._controllerHelper=t,this._layoutService=n,this._sectionService=r,this._serviceService=i,this._router=s}init(){this._extensionsHelper.addExtensionsToController(this)}load(){const e=this._sectionService.extractId(this.params.section),t=this._sectionService.get(e||this.params.section),n=this._serviceService.get(),i=t.then((e=>this._layoutService.loadById(e.layout)));return{_checkUrl:this._checkUrl(t),layout:i,section:t,service:n}}setMetaParams(e,t,n,i,r){const{service:s,section:a}=e;if(!s||!a)return;o.SectionMetaHelper.setDefaultMeta({metaManager:t,router:n,settings:r,entity:a});const l=o.SectionMetaHelper.getMetaTitle(a,s),c=o.SectionMetaHelper.getSocialTitle(a,s),u=o.SectionMetaHelper.getMetaDescription(a),d=o.SectionMetaHelper.getSocialDescription(a);t.setTitle(l),t.setMetaName("description",u),t.setMetaName("twitter:title",c),t.setMetaName("twitter:description",d),t.setMetaProperty("og:title",c),t.setMetaProperty("og:description",d)}_checkUrl(e){return e.then((e=>{this._controllerHelper.checkCurrentUrlAndRedirect(e,this.params)}))}}class p{static get $dependencies(){return[]}getArticleSectionsEntities(e){const t=e.sections;return t.length?t:(console.warn("Sections of given article wasn't found."),[])}getParentSectionsTree(e,t=!0){if(!e)return[];let n=[],i=[],r=e;do{t&&!r.visible||i.push(r),n.push(r.id),r=r.parent}while(r&&!n.includes(r.id));return i.reverse(),i}getPrimarySection(e){return e&&e.sections&&e.sections[0]?e.sections[0]:(l.log("[SectionHelper] Primary section could not be determined because given article doesn't contain any sections."),null)}getPrimarySectionName(e){let t=this.getPrimarySection(e);return this.getSectionName(t)}getPrimarySectionSlug(e){let t=this.getPrimarySection(e);return this.getSectionSlug(t)}getSectionName(e){return e?e.name:(console.warn("Argument section is not set."),"")}getSectionSlug(e){return e?e.slug:(console.warn("Argument section is not set."),"")}}n.$registerImaPlugin=e=>{e.namespace("plugin.section"),e.namespace("plugin.section.SectionEntity"),e.namespace("plugin.section.SectionService");let t=e.plugin.section;t.SectionEntity=c,t.SectionService=u},n.SectionController=d,n.SectionEntity=c,n.SectionHelper=p,n.SectionService=u,n.initBind=(e,t)=>{t.get("$ComponentUtils").register({SectionHelper:p})},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{section:{abTestReplacementFields:["layout"]}}}}}})},{"@cns/plugin-ab-testing":12,"@cns/plugin-meta-header":43,"@cns/rest-api-client":76,"@cns/utils":78,"@ima/core":81,"@ima/plugin-logger":110}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@ima/plugin-logger"),o=e("@cns/plugin-atoms");var a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class l extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{seoFooter:{},properties:{},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.seoFooterUi.component.molecule.seoFooter.SeoFooter")}render(){const{seoFooter:e}=this.props;return e&&e.data&&e.data.items&&0!==e.data.items.length?a.default.createElement("div",{className:this.cssClasses("mol-seo-footer"),"data-dot":"mol-seo-footer"},this._renderGroups(e.data.items)):null}_renderGroups(e){return a.default.createElement("div",{className:this.cssClasses("mol-seo-footer__groups")},e.map(((e,t)=>{const{data:n,text:i}=e,r=t>=6;let s=n.items;if(r||(s=this._compressGroupItems(s)),s)return a.default.createElement("div",{key:t,className:this.cssClasses({"mol-seo-footer__group":!0,"mol-seo-footer__group--additional":r})},a.default.createElement(o.Headline2,{className:this.cssClasses("mol-seo-footer__title")},i),this._renderItems(s))})))}_renderItems(e){return a.default.createElement(o.UnorderedList,{className:this.cssClasses("mol-seo-footer__list")},e.map(((e,t)=>{let n;return n=Array.isArray(e)?e:[e],a.default.createElement(o.ListItem,{key:t,className:this.cssClasses("mol-seo-footer__item")},n.map(((e,t)=>this._renderLinkAndSeparator(e,t,n.length-1===t))))})))}_renderLinkAndSeparator(e,t,n=!1,i="|"){const{href:r,text:s}=e;return a.default.createElement("span",{key:t},a.default.createElement(o.Link,{className:this.cssClasses("mol-seo-footer__link"),href:r},s),n?null:a.default.createElement("span",{className:this.cssClasses("mol-seo-footer__separator")},i))}_compressGroupItems(e){return e.reduce(((t,n,i)=>{const r=i>=12;if(s.warnIf(r,`Molecule SeoFooter: we ignore link "${n.title}" because only 12 items can be rendered.`),r)return t;if(e.length-i+t.length>6){const e=t[t.length-1];return e&&1===e.length?(e.push(n),t):t.concat([[n]])}return t.concat([n])}),[])}}class c extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{seoFooter:{}}}static get requiredProps(){return["seoFooter"]}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.seoFooterUi.component.organism.seoFooter.SeoFooter")}render(){const{seoFooter:e}=this.props;return e&&e.data&&e.data.items&&0!==e.data.items.length?a.default.createElement("nav",{"aria-labelledby":"accessibility-seo-footer",className:this.cssClasses("ogm-seo-footer"),"data-dot":"ogm-seo-footer",role:"navigation"},a.default.createElement(o.H6,{id:"accessibility-seo-footer"},"Dal sluby"),a.default.createElement(l,{seoFooter:e})):null}}n.$registerImaPlugin=e=>{e.namespace("plugin.seoFooterUi.component.molecule.seoFooter"),e.namespace("plugin.seoFooterUi.component.organism.seoFooter"),e.plugin.seoFooterUi.component.molecule.seoFooter.SeoFooter=l,e.plugin.seoFooterUi.component.organism.seoFooter.SeoFooter=c},n.SeoFooter=l,n.SeoFooterOrganism=c},{"@cns/plugin-atoms":20,"@ima/core":81,"@ima/plugin-logger":110,"prop-types":232,react:242}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@ima/plugin-logger");const s="seoFooterFetchTimedOut";class o extends i.AbstractExtension{static get $dependencies(){return[i.HttpAgent,"$Cache","$Window","$Settings.plugin.cns.plugin.seoFooter"]}constructor(e,t,n,i){super(),this._httpAgent=e,this._cache=t,this._window=n,this._settings=i,this._options={ttl:288e5,timeout:this._settings.requestTimeout}}load(){if(this._window.isClient()&&this._cache.has(s))return{seoFooter:null};const{apiUrl:e,componentName:t,seoFooterId:n}=this._settings,{layout:o}=this.getState();return r.throwIf("string"!=typeof e||!e||!n||"number"!=typeof n,new TypeError("$Settings.plugin.cns.plugin.seoFooter.apiUrl must be a string and $Settings.plugin.cns.plugin.seoFooter.seoFooterId must be a number.")),o&&e&&n?{seoFooter:o.then((i=>i&&i.isComponentPresent(t)?this._httpAgent.get(e+"/"+n,"",this._options):Promise.reject(`The current layout doesn't contain "${t}" component.`))).then((e=>{const{body:t}=e||{};return t&&t.data&&t.data.items&&0!==t.data.items.length?t:null})).catch((e=>(e&&e instanceof Error?e instanceof i.GenericError&&408===e.getHttpStatus()?this._cache.set(s,!0,1/0):r.error("SeoFooterExtension data loading failed:",e):r.debug("SeoFooterExtension data not loaded:",e),null)))}:{}}}n.$registerImaPlugin=()=>{},n.SeoFooterExtension=o,n.initServices=(e,t)=>{const n=t.get("$Settings").plugin.cns.plugin.seoFooter;!t.get("$Window").isClient()&&"prod"===t.get("$Env")&&n.internalApiUrl&&t.get("$HttpUrlTransformer").addRule(n.apiUrl,n.internalApiUrl)},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{seoFooter:{apiUrl:"https://share.seznam.cz/seoapi/public/seo",seoFooterId:19,internalApiUrl:"http://share.ops.iszn.cz/seoapi/public/seo",componentName:"organism.seoFooter.SeoFooter",requestTimeout:50}}}}},test:{plugin:{cns:{plugin:{seoFooter:{requestTimeout:100}}}}},dev:{plugin:{cns:{plugin:{seoFooter:{requestTimeout:100}}}}}})},{"@ima/core":81,"@ima/plugin-logger":110}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@ima/plugin-logger"),s="serverDateEndpoint";const o="serverTimestamp",a="serverTimezoneOffset",l=36e5;class c extends i.AbstractExtension{static get $dependencies(){return["$Cache","$Window",i.HttpAgent,"$Settings.plugin.cns.plugin.serverDate.endpoint"]}constructor(e,t,n,i){super(),this._cache=e,this._window=t,this._httpAgent=n,this._serverDateEndpoint=i}getAllowedStateKeys(){return["applicationStartServerTimestamp","applicationStartServerTimezoneOffset"]}load(){let e=0,t=0;if(this._cache.has(o)&&this._cache.has(a))e=this._cache.get(o),t=this._cache.get(a);else if(this._window.isClient()){let n=this._fetchServerDate();e=n.then((e=>e.serverTimestamp)),t=n.then((e=>e.serverTimezoneOffset))}else{let n=new Date;e=n.getTime(),t=n.getTimezoneOffset(),this._cache.set(o,e,l),this._cache.set(a,t,l)}return{applicationStartServerTimestamp:e,applicationStartServerTimezoneOffset:t}}_fetchServerDate(){return this._httpAgent.get(this._serverDateEndpoint).then((e=>e&&e.body?e.body:{})).catch((e=>{r.warn(e)}))}}n.$registerImaPlugin=()=>{},n.ServerDateExtension=c,n.ServerDateHelper=class{static get $dependencies(){return[]}convertBEDateStringToTimestamp(e,t){if(!this.isValidBEDateString(e)||"number"!=typeof t||isNaN(t))return null;const n=e.split(" "),i=n[0].split("-"),r=n[1].split(":"),s=60*t*1e3;let o=Date.UTC(i[0],i[1]-1,i[2],r[0],r[1],r[2],0);return this.isValidTimestamp(o)&&this.isValidTimestamp(s)?o+s:null}isValidBEDateString(e){return!(!e||"string"!=typeof e||!/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(e))}isValidTimestamp(e){return"number"==typeof e&&!isNaN(e)}},n.initBind=()=>{},n.initSettings=(e,t,n)=>{const i=n.$App[s]?n.$App[s]:"/pro/serverdate";return{prod:{plugin:{cns:{plugin:{serverDate:{endpoint:n.$Protocol+"//"+n.$Host+i}}}}}}}},{"@ima/core":81,"@ima/plugin-logger":110}],57:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":56,dup:8}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/rest-api-client"),s=e("@cns/plugin-ab-testing");class o extends r.AbstractEntity{static get dataFieldMapping(){return{id:"_id",metaKeywords:r.defaultToArray}}static get embeds(){return[{field:"layout",resource:i.ns.get("plugin.layout.LayoutEntity")}]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"service"}constructor(e){super(e)}}class a extends r.AbstractService{static get $dependencies(){return[s.PageABTestRegistry,"$Settings.plugin.cns.plugin.service",...r.defaultDependencies]}static get entityClass(){return i.ns.get("plugin.service.ServiceEntity")}constructor(e,t,...n){super(...n),this._pageABTestRegistry=e,this._settings=t,Object.freeze(this)}get(e={embedded:""},t={ttl:864e5}){const{abTestReplacementFields:n,serviceSlug:i}=this._settings;i||console.warn("web-plugins.plugin-service.ServiceService: The serviceSlug is not set in settings.");const r=super.get(i,e,t),o=this._pageABTestRegistry.getCurrentABTest();return s.applyAbTestModification(r,o,n)}}n.$registerImaPlugin=e=>{e.namespace("plugin.service"),e.namespace("plugin.service.ServiceEntity"),e.namespace("plugin.service.ServiceService");let t=e.plugin.service;t.ServiceEntity=o,t.ServiceService=a},n.ServiceEntity=o,n.ServiceService=a,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{service:{abTestReplacementFields:["skin","layout","sectionLayout"],serviceSlug:""}}}}}})},{"@cns/plugin-ab-testing":12,"@cns/rest-api-client":76,"@ima/core":81}],59:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":58,dup:8}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@cns/plugin-atoms"),o=e("@ima/plugin-loading-manager"),a=e("@ima/plugin-logger");var l=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class c extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{}}}get shareLink(){const{shareUrl:e,utmParameters:t}=this.props.properties;let n=e;if(t&&"object"==typeof t){const e=Object.entries(t).map((([e,t])=>`${e}=${t}`));e.length>0&&(n+=`#${e.join("&")}`)}return`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.social.component.atom.facebook.shareButton.FacebookShareButton")}render(){const{dataDotData:e,mouseoverTitle:t,shareUrl:n}=this.props.properties;return n?l.default.createElement(s.Link,{className:this.cssClasses("atm-facebook-share-button",!0),"data-dot":"atm-facebook-share-button","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement(Object.assign({},e)),"data-e2e":"atm-facebook-share-button",href:this.shareLink,onClick:e=>this.onClick(e),target:"_blank",title:void 0===t?"Sdlet na Facebooku":t},l.default.createElement("svg",{"aria-label":"Facebook share button",className:this.cssClasses("atm-facebook-share-button__icon"),viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{className:this.cssClasses("atm-facebook-share-button__icon-circle"),d:"M32 16c0-8.837-7.163-16-16-16S0 7.163 0 16c0 7.986 5.851 14.605 13.5 15.806V20.625H9.437V16H13.5v-3.525c0-4.01 2.389-6.225 6.043-6.225 1.751 0 3.582.313 3.582.313V10.5h-2.018c-1.987 0-2.607 1.233-2.607 2.499V16h4.438l-.71 4.625H18.5v11.18C26.149 30.606 32 23.987 32 16",fill:"#909090"}),l.default.createElement("path",{className:this.cssClasses("atm-facebook-share-button__icon-logo"),d:"M22.228 20.625l.71-4.625H18.5v-3.001c0-1.266.62-2.499 2.607-2.499h2.018V6.562s-1.831-.312-3.582-.312c-3.654 0-6.043 2.215-6.043 6.225V16H9.437v4.625H13.5v11.18a16.12 16.12 0 005 0v-11.18h3.728",fill:"#fff"})))):null}onClick(e){e.preventDefault(),window.open(this.shareLink,"FacebookShareButton","width=800,height=400")}}class u extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",discussionUrl:"",text:""}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.social.component.atom.infoBubble.InfoBubble")}render(){const{discussionUrl:e,text:t}=this.props;return e&&t?l.default.createElement("div",{className:this.cssClasses("atm-info-bubble",!0),"data-dot":"atm-info-bubble"},l.default.createElement(s.Link,{className:this.cssClasses("atm-info-bubble__inside"),"data-dot":"atm-info-bubble__inside",href:e},l.default.createElement("svg",{className:this.cssClasses("atm-info-bubble__icon"),fill:"none",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},l.default.createElement("path",{clipRule:"evenodd",d:"M6 6h2V4H6v2zm0 4h2V7H6v3zm7.609-6.672A3.83 3.83 0 0010.672.391 17.357 17.357 0 007 0C5.74 0 4.512.135 3.328.391A3.828 3.828 0 00.391 3.328 17.357 17.357 0 000 7c0 1.26.135 2.488.391 3.672a3.83 3.83 0 002.937 2.937C4.512 13.865 5.74 14 7 14c1.26 0 2.488-.135 3.672-.391a3.83 3.83 0 002.937-2.937C13.865 9.488 14 8.26 14 7c0-1.26-.135-2.488-.391-3.672z",fillRule:"evenodd"})),l.default.createElement("span",{className:this.cssClasses("atm-info-bubble__text")},t))):null}}class d extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",discussionUrl:"",commentCount:0}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.social.component.atom.seznam.discussionLink.SeznamDiscussionLink")}render(){const{discussionUrl:e,commentCount:t}=this.props;return e?l.default.createElement(s.Link,{className:this.cssClasses("atm-seznam-discussion-link",!0),"data-dot":"atm-seznam-discussion-link",href:e},l.default.createElement("svg",{className:this.cssClasses("atm-seznam-discussion-link__icon"),viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},l.default.createElement("path",{d:"M7 10c-3.316 0-5-.619-5-4 0-3.381 1.684-4 5-4s5 .619 5 4c0 3.381-1.684 4-5 4zM7 0C2.452 0 0 1.582 0 6c0 2.33.688 3.864 2 4.801V14l4-2-.074-.037c.345.022.7.037 1.074.037 4.548 0 7-1.582 7-6s-2.452-6-7-6z"})),l.default.createElement("span",{className:this.cssClasses("atm-seznam-discussion-link__text")},"Diskuze"),l.default.createElement("span",{className:this.cssClasses("atm-seznam-discussion-link__count")},t)):null}}class p extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",likeUrl:""}}get likeUrl(){return this.props.likeUrl||this.utils.LinkHelper.getCanonicalUrl(this.utils.$Router.getUrl())}constructor(e,t){super(e,t),this._loadButtonOnce=o.once(this._loadButton.bind(this)),this.utils.CssRenderingHelper.register("plugin.social.component.atom.seznam.likeButton.SeznamLikeButton")}componentDidMount(){this.utils.LoadingManager.currentStage!==o.StageEvents.UNKNOWN?this.utils.$Dispatcher.listen(o.StageEvents.OTHER,(e=>e.addTask(this._loadButtonOnce)),this):this._loadButtonOnce()}render(){return l.default.createElement("div",{className:this.cssClasses("atm-seznam-like-button")},l.default.createElement("seznam-pocitadlolibise",{entity:this.likeUrl,layout:"seamless",size:"large"}))}_loadButton(){let{ScriptLoaderPlugin:e,$Settings:t}=this.utils;e.load(t.plugin.cns.plugin.social.scriptUrl).catch((e=>{a.warn("SznLikeButton - script is not loaded.",e)}))}}class m extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{}}}get shareLink(){const{related:e,shareUrl:t,title:n,utmParameters:i,via:r}=this.props.properties;let s=t;if(i&&"object"==typeof i){const e=Object.entries(i).map((([e,t])=>`${e}=${t}`));e.length>0&&(s+=`#${e.join("&")}`)}let o=`https://www.twitter.com/intent/tweet?url=${encodeURIComponent(s)}`;return n&&(o+=`&text=${encodeURIComponent(n)}`),r&&(o+=`&via=${encodeURIComponent(r)}`),e&&(o+=`&related=${encodeURIComponent(e)}`),o}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.social.component.atom.twitter.shareButton.TwitterShareButton")}render(){const{dataDotData:e,mouseoverTitle:t,shareUrl:n}=this.props.properties;return n?l.default.createElement(s.Link,{className:this.cssClasses("atm-twitter-share-button",!0),"data-dot":"atm-twitter-share-button","data-dot-data":this.utils.DotAnalytic.getDOTDataForElement(Object.assign({},e)),"data-e2e":"atm-twitter-share-button",href:this.shareLink,onClick:e=>this.onClick(e),target:"_blank",title:void 0===t?"Sdlet na Twitteru":t},l.default.createElement("svg",{className:this.cssClasses("atm-twitter-share-button__icon"),viewBox:"0 0 16 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Twitter share button"},l.default.createElement("path",{className:this.cssClasses("atm-twitter-share-button__icon-logo"),d:"M16 1.539a6.55 6.55 0 01-1.885.516A3.29 3.29 0 0015.558.24a6.572 6.572 0 01-2.084.796A3.283 3.283 0 007.88 4.03 9.319 9.319 0 011.114.6 3.282 3.282 0 002.13 4.982a3.26 3.26 0 01-1.487-.41v.04a3.284 3.284 0 002.633 3.219 3.272 3.272 0 01-1.483.056 3.286 3.286 0 003.067 2.28A6.587 6.587 0 010 11.525 9.287 9.287 0 005.031 13c6.038 0 9.34-5 9.34-9.338 0-.142-.003-.284-.01-.424A6.656 6.656 0 0016 1.539z",fill:"#909090",fillRule:"evenodd"}))):null}onClick(e){e.preventDefault(),window.open(this.shareLink,"TwitterShareButton","width=800,height=400")}}const h="sharebt";class g extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{title:"",twitterAccountName:""},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.social.component.molecule.socialShareButtons.SocialShareButtons")}render(){const e=this.utils.LinkHelper.getCanonicalUrl(this.utils.$Router.getUrl()),t=this.props.properties.title||"",n=this.props.settings.utmCampaign||"web",i=this.props.properties.twitterAccountName||"";return e?l.default.createElement("div",{className:this.cssClasses("mol-social-share-buttons",!0),"data-dot":"mol-social-share-buttons"},l.default.createElement(c,{className:this.cssClasses({"mol-social-share-buttons__share-button":!0,"mol-social-share-buttons__share-button--facebook":!0}),properties:{shareUrl:e,utmParameters:{utm_source:"facebook",utm_medium:h,utm_campaign:n}}}),l.default.createElement(m,{className:this.cssClasses({"mol-social-share-buttons__share-button":!0,"mol-social-share-buttons__share-button--twitter":!0}),properties:{related:i,shareUrl:e,title:t,utmParameters:{utm_source:"twitter",utm_medium:h,utm_campaign:n},via:i}})):null}}const f=Object.freeze({OPEN:"open",DELETED:"deleted",CLOSED:"closed",PAUSED:"paused"});class _ extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{article:null,properties:{},service:null,settings:{},tag:null}}static get requiredProps(){return["article","service","tag"]}get infoBubbleText(){return this.utils.$Settings.plugin.cns.plugin.social.infoBubbleText}get showLikeButton(){return this.utils.$Settings.plugin.cns.plugin.social.showLikeButton}get twitterAccountName(){const{twitterAccountName:e}=this.utils.$Settings.plugin.cns.plugin.social;if(e)return e;const{service:t}=this.props;if(!t)return"";let n=t.twitterUrl;if(!n)return"";const i=n.match(/(.+)\/(\w+)/);return i?i[2]:""}constructor(e,t){super(e,t),this.utils.SznDiscussionHelper&&"function"==typeof this.utils.SznDiscussionHelper.loadModules&&this.utils.SznDiscussionHelper.loadModules(["commentCount"]),this.state={commentCount:null,status:null},this.utils.CssRenderingHelper.register("plugin.social.component.organism.shareBar.ShareBar")}componentDidMount(){this._loadCommentCount()}render(){return l.default.createElement("div",{className:this.cssClasses("ogm-share-bar")},l.default.createElement("div",{className:this.cssClasses("ogm-share-bar__left")},this._renderLikeButton(),this._shouldRenderDiscussionLink()&&this._renderDiscussionLink()),this._renderSocialButtons(),this._shouldRenderDiscussionLink()&&this._renderInfoBubble())}_renderDiscussionLink(){return l.default.createElement(d,{discussionUrl:this.getDiscussionUrl(),commentCount:this.utils.RegressionHelper.isRegression()?123:this.state.commentCount,className:this.cssClasses("ogm-share-bar__discussion")})}_renderInfoBubble(){return l.default.createElement(u,{className:this.cssClasses({"ogm-share-bar__bubble":!0,"ogm-share-bar__bubble--without-like-button":!this._shouldRenderLikeButton()}),discussionUrl:this.getDiscussionUrl(),text:this.infoBubbleText})}_renderLikeButton(){return l.default.createElement("div",{className:this.cssClasses("ogm-share-bar__like")},this._shouldRenderLikeButton()?l.default.createElement(p,null):null)}_renderSocialButtons(){const{article:e,tag:t}=this.props,n=e&&e.title||t&&t.title||"";return l.default.createElement("div",{className:this.cssClasses("ogm-share-bar__share")},l.default.createElement("div",{className:this.cssClasses("ogm-share-bar__text")},l.default.createElement("span",null,"Sdlejte")," ",l.default.createElement("span",{className:this.cssClasses("ogm-share-bar__text--hidden-on-mobile")},e?"lnek":"")),l.default.createElement(g,{className:this.cssClasses("ogm-share-bar__share-buttons"),properties:{title:n,twitterAccountName:this.twitterAccountName},settings:{utmCampaign:"bottom"}}))}getDiscussionUrl(){if(this.utils.RegressionHelper.isRegression())return"discussion-url";throw new r.GenericError("The getDiscussionUrl() method is abstract and must be overridden.")}_isDiscussionOpen(){const{status:e}=this.state;return e&&[f.PAUSED,f.OPEN].includes(e)}_loadCommentCount(){const{SznDiscussionHelper:e}=this.utils,{article:t}=this.props,n=this.getDiscussionUrl();if(t&&t.discussionStatus&&n&&e&&"function"==typeof e.getPermalinkFromEntity&&"function"==typeof e.loadCommentCount){const n=e.getPermalinkFromEntity(t);e.loadCommentCount(n).then((e=>{if(e&&e[n]){const{status:t,commentCount:i}=e[n];this.setState({status:t,commentCount:i})}}))}}_shouldRenderDiscussionLink(){if(this.utils.RegressionHelper.isRegression())return!0;const{article:e}=this.props,t=!!this.utils.$UIComponentHelper.isAmp()||this._isDiscussionOpen();return!!(e&&e.discussionStatus&&t&&this.utils.SznDiscussionHelper)}_shouldRenderLikeButton(){return this.showLikeButton&&!this.utils.$UIComponentHelper.isAmp()&&!this.utils.LegacyBrowserDetector.isLegacyClient()}}function y(e,t){e.namespace(t+".component.atom"),e.namespace(t+".component.atom.infoBubble"),e.namespace(t+".component.atom.facebook"),e.namespace(t+".component.atom.facebook.shareButton"),e.namespace(t+".component.atom.twitter"),e.namespace(t+".component.atom.twitter.shareButton"),e.namespace(t+".component.atom.seznam"),e.namespace(t+".component.atom.seznam.discussionLink"),e.namespace(t+".component.atom.seznam.likeButton"),e.namespace(t+".component.molecule"),e.namespace(t+".component.molecule.socialShareButtons"),e.namespace(t+".component.organism"),e.namespace(t+".component.organism.shareBar");const n=e.namespace(t+".component");n.atom.infoBubble.InfoBubble=u,n.atom.facebook.shareButton.FacebookShareButton=c,n.atom.twitter.shareButton.TwitterShareButton=m,n.atom.seznam.discussionLink.SeznamDiscussionLink=d,n.atom.seznam.likeButton.SeznamLikeButton=p,n.molecule.socialShareButtons.SocialShareButtons=g,n.organism.shareBar.ShareBar=_}n.$registerImaPlugin=e=>{y(e,"plugin.social"),y(e,"app")},n.DiscussionStatus=f,n.FacebookShareButton=c,n.InfoBubble=u,n.SeznamDiscussionLink=d,n.SeznamLikeButton=p,n.ShareBar=_,n.SocialShareButtons=g,n.TwitterShareButton=m,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{social:{scriptUrl:"https://pocitadlolibise.seznam.cz/pocitadlolibise.js?use-social-token",showLikeButton:!0,infoBubbleText:"Vstoupit do diskuze",twitterAccountName:""}}}}},test:{plugin:{cns:{plugin:{social:{scriptUrl:"https://pocitadlolibise.seznam.test.dszn.cz/pocitadlolibise.js?use-social-token"}}}}},dev:{plugin:{cns:{plugin:{social:{scriptUrl:"https://pocitadlolibise.seznam.dev.dszn.cz/pocitadlolibise.js?use-social-token"}}}}},regression:{plugin:{cns:{plugin:{social:{showLikeButton:!1}}}}}})},{"@cns/plugin-atoms":20,"@ima/core":81,"@ima/plugin-loading-manager":106,"@ima/plugin-logger":110,"prop-types":232,react:242}],61:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":60,dup:8}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@cns/pixel-generator");var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class a extends r.AbstractPureComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{iconUri:null,lazyLoading:!0,extendedPadding:0,useIntersectionObserver:!0,showBackground:!1,showBorder:!1}}get maskId(){return`atm-icon-mask-${this._sequentialUId}`}get squircleId(){return`atm-icon-squircle-${this._sequentialUId}`}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.squircleMask.component.atom.squircleMask.SquircleMask"),this._registeredVisibilityId=null,this._onVisibilityWriter=this.onVisibilityWriter.bind(this),this._sequentialUId=0,this.utils.ComponentHelper&&(this._sequentialUId=this.utils.ComponentHelper.sequentialUId()),this._rootElement=o.default.createRef(),this.state={shouldRenderPlaceholder:e.lazyLoading}}componentDidMount(){this._shouldLazyLoadImage()&&this._registerToCheckingVisibility()}componentWillUnmount(){this._shouldLazyLoadImage()&&this._unregisterToCheckingVisibility()}render(){const{children:e,iconUri:t}=this.props;return t||e?o.default.createElement("svg",{className:this.cssClasses({"atm-icon-mask":!0},!0),ref:this._rootElement,version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("defs",null,o.default.createElement("path",{id:this.squircleId,fill:"#ffffff",fillRule:"nonzero",d:"M30.49 38.885a10.948 10.948 0 0 0 8.394-8.393A49.607 49.607 0 0 0 40 20c0-3.6-.385-7.11-1.116-10.491a10.948 10.948 0 0 0-8.392-8.393A49.611 49.611 0 0 0 20 0C16.4 0 12.89.385 9.51 1.116A10.949 10.949 0 0 0 1.116 9.51 49.6 49.6 0 0 0 0 19.999c0 3.6.385 7.11 1.116 10.492a10.949 10.949 0 0 0 8.393 8.393A49.584 49.584 0 0 0 20 40c3.6 0 7.11-.385 10.49-1.115"}),o.default.createElement("mask",{id:this.maskId},o.default.createElement("use",{xlinkHref:`#${this.squircleId}`}))),this.props.showBackground&&o.default.createElement("rect",{className:this.cssClasses("atm-icon-mask__background"),width:"40",height:"40",mask:`url(#${this.maskId})`}),this.props.showBorder&&o.default.createElement("use",{className:this.cssClasses("atm-icon-mask__border"),xlinkHref:`#${this.squircleId}`}),this._renderImage(e,t)):null}_renderImage(e,t){return e||this._renderImageThroughUri(t)}_renderImageThroughUri(e){return this._shouldRenderPlaceholdedImage()&&(e=this._generatePlaceholderImageUri()),o.default.createElement("image",{xlinkHref:e,mask:`url(#${this.maskId})`,width:"40",height:"40"})}onVisibilityWriter(e,t){e>0&&(t&&t.disconnect(),this._unregisterToCheckingVisibility(),this.setState({shouldRenderPlaceholder:!1}))}_generatePlaceholderImageUri(){const{ColorHelper:e}=this.utils,{placeholderColor:t}=this.utils.$Settings.plugin.cns.plugin.squircleMask;if(e.isValidColor(t)){const n=e.parseColor(t);return s.generateImageDataUrl(n.red,n.green,n.blue)}return null}_registerToCheckingVisibility(){const{useIntersectionObserver:e}=this.props,{$UIComponentHelper:t}=this.utils,n=this.props.extendedPadding||Math.max(Math.round(t.componentPositions.getWindowViewportRect().height),300);this._registeredVisibilityId=t.visibility.register(t.getVisibilityReader(this._rootElement.current,{extendedPadding:n,useIntersectionObserver:e,width:40,height:40}),t.wrapVisibilityWriter(this._onVisibilityWriter))}_shouldLazyLoadImage(){const{LegacyBrowserDetector:e,RegressionHelper:t,$UIComponentHelper:n}=this.utils;return this.props.lazyLoading&&!n.isAmp()&&!e.isLegacyClient()&&!t.isRegression()&&!e.isCrawlerBot()}_shouldRenderPlaceholdedImage(){return this._shouldLazyLoadImage()&&this.state.shouldRenderPlaceholder}_unregisterToCheckingVisibility(){const{$UIComponentHelper:e}=this.utils;this._registeredVisibilityId&&(e.visibility.unregister(this._registeredVisibilityId),this._registeredVisibilityId=null)}}n.$registerImaPlugin=e=>{e.namespace("plugin.squircleMask.component.atom"),e.namespace("plugin.squircleMask.component.atom.squircleMask"),e.plugin.squircleMask.component.atom.squircleMask.SquircleMask=a},n.SquircleMask=a,n.initSettings=()=>({prod:{plugin:{cns:{plugin:{squircleMask:{placeholderColor:"#f2f2f2"}}}}}})},{"@cns/pixel-generator":10,"@ima/core":81,"prop-types":232,react:242}],63:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{"./dist/client.cjs.js":62,dup:24}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core")),s=e("@cns/component-utils"),o=e("@cns/plugin-article-molecules");var a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class l extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{className:"",properties:{staticContent:{_id:"",cssMediaQuery:""}},settings:{}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("app.component.organism.staticContent.StaticContent")}shouldComponentUpdate(e,t){return s.shouldComponentUpdate(this,e,t)}render(){return a.default.createElement(o.StaticContent,this._getMoleculeProps())}_getMoleculeProps(){const{properties:e}=this.props,{staticContent:t}=e||{};return"string"!=typeof t?this.props:{...this.props,properties:{...e,staticContent:{_id:t}}}}}n.$registerImaPlugin=e=>{e.set("plugin.staticContent.component.organism.staticContent.StaticContent",l),e.namespace("app.component.organism"),e.namespace("app.component.organism.staticContent"),e.app.component.organism.staticContent.StaticContent=l},n.StaticContentOrganism=l},{"@cns/component-utils":4,"@cns/plugin-article-molecules":18,"@ima/core":81,"prop-types":232,react:242}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("react"),s=(e("prop-types"),e("@cns/component-utils")),o=e("@cns/plugin-atoms"),a=e("@cns/plugin-user"),l=e("@ima/plugin-script-loader");var c=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r);class u extends s.AbstractComponent{static get contextType(){return i.PageContext}static get defaultProps(){return{article:null,user:null,className:"",properties:{},settings:{}}}static get requiredProps(){return["user","article"]}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.sznDiscussion.component.organism.sznDiscussion.SznDiscussion"),this._discussionRef=c.default.createRef(),this._discussionInstancePromise=null,this._onDiscussionResized=this._onDiscussionResized.bind(this),this._onDiscussionLogin=this._onDiscussionLogin.bind(this),this.utils.SznDiscussionHelper.loadModules(["embedded"])}componentDidMount(){this._loadDiscussion()}shouldComponentUpdate(e){return!this.props.article&&!!e.article}componentDidUpdate(e){this.props.article!==e.article&&this._loadDiscussion()}componentWillUnmount(){this._discussionInstancePromise&&this._discussionInstancePromise.then((e=>{e.unlisten("resized",this._onDiscussionResized),e.unlisten("login",this._onDiscussionLogin),e.unload(),this._discussionInstancePromise=null}))}render(){const{article:e}=this.props;if(!e)return console.warn("SznDiscussion: Seznam Discussion supports discussions just about an articles at this moment. Therefore, the article entity needs to be loaded."),null;const t=this.utils.$UIComponentHelper.isAmp();return c.default.createElement("div",{className:this.cssClasses("ogm-szn-discussion",!0),ref:this._discussionRef},t&&this._renderAmpVersion())}_renderAmpVersion(){const e=this._getCurrentCanonicalUrl(),t=this.utils.$Settings.plugin.cns.plugin.sznDiscussion.ampBtnText;return c.default.createElement("div",{className:this.cssClasses("ogm-szn-discussion--amp-btn-wrapper")},c.default.createElement(o.Link,{href:e,className:this.cssClasses("ogm-szn-discussion--amp-btn")},t))}_onDiscussionLogin(){const{user:e}=this.props;!this.utils.LoginHelper||!this.utils.LoginHelper.login||e&&e.loginStatus===a.LoginStatus.GREEN||this.utils.LoginHelper.autologin()}_onDiscussionResized(){const{$Window:e}=this.utils,t=e.createCustomEvent("resize");e.getWindow().dispatchEvent(t)}_getCurrentCanonicalUrl(){const e=this.utils.$Router.getUrl();return this.utils.LinkHelper.getCanonicalUrl(e)}_loadDiscussion(){const{article:e}=this.props;if(e&&!this._discussionInstancePromise){const t=this._discussionRef.current,n=this.utils.SznDiscussionHelper.getPermalinkFromEntity(e);this._discussionInstancePromise=this.utils.SznDiscussionHelper.loadDiscussion(t,n,{title:e.title,url:this._getCurrentCanonicalUrl()},{articleId:e.uid}),this._discussionInstancePromise.then((e=>{e.listen("resized",this._onDiscussionResized),e.listen("login",this._onDiscussionLogin)}))}}}class d{static get $dependencies(){return["$Router",l.ScriptLoaderPlugin,"$Window","$Settings.plugin.cns.plugin.sznDiscussion"]}constructor(e,t,n,i){this._router=e,this._scriptLoader=t,this._window=n,this._config=i,this._modulesLoadedPromise=null}getPermalinkFromEntity(e){const t=this._config.permalinkHost||this._router.getHost();if(e instanceof i.ns.get("plugin.article.ArticleEntity"))return`${t}/clanek/${e.uid}`;throw new Error("SznDiscussionHelper.getPermalink does not support this type of entity given as param.")}loadCommentCount(e){const t=this._window.getWindow();return this._moduleMethodReady("discussionFetchCommentCount").then((()=>t.SZN.Discussion.discussionFetchCommentCount(e))).catch((e=>{console.error(e)}))}loadDiscussion(e,t,n={},i={}){const r=this._window.getWindow();return this._moduleMethodReady("create").then((()=>{const s=r.SZN.Discussion.create(this._config.service,e,this._config.conf||{});return s.loadDiscussion(t,n,i),s})).catch((e=>{console.error(e)}))}loadModules(e){this._window.isClient()&&this._config.loaderUrl&&Array.isArray(e)&&e.length&&(this._modulesLoadedPromise=this._scriptLoader.load(this._config.loaderUrl).then((()=>this._loadModules(e))).catch((e=>{console.error(e)})))}_loadModules(e){const t=this._window.getWindow();if(!t.SZN||!t.SZN.DiscussionLoader)throw new Error("window.SZN.DiscussionLoader is not available.");const n=e.filter((e=>!t.SZN.DiscussionLoader.isLoaded(e)));return n.length?t.SZN.DiscussionLoader.load(n):Promise.resolve()}_moduleMethodReady(e){if(!this._modulesLoadedPromise)throw new Error("EmbedPromise is not available. Make sure that you call init method before.");return this._modulesLoadedPromise.then((()=>{const t=this._window.getWindow();if(e&&(!t.SZN.Discussion||!t.SZN.Discussion[e]))throw new Error(e+" is not available. Make sure that you have loaded correct discussion module.")}))}}n.$registerImaPlugin=()=>{i.ns.namespace("app.component.organism.sznDiscussion"),i.ns.namespace("plugin.sznDiscussion.component.organism.sznDiscussion"),i.ns.app.component.organism.sznDiscussion.SznDiscussion=u,i.ns.plugin.sznDiscussion.component.organism.sznDiscussion.SznDiscussion=u},n.SznDiscussion=u,n.SznDiscussionHelper=d,n.initBind=(e,t)=>{t.get("$ComponentUtils").register({SznDiscussionHelper:d})},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{sznDiscussion:{loaderUrl:"https://d21-a.sdn.cz/d_21/sl/3/loader.js",ampBtnText:"Zat diskutovat"}}}}}})},{"@cns/component-utils":4,"@cns/plugin-atoms":20,"@cns/plugin-user":75,"@ima/core":81,"@ima/plugin-script-loader":135,"prop-types":232,react:242}],66:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":65,dup:8}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/core"),r=e("@cns/plugin-atoms"),s=e("@cns/rest-api-client"),o=e("@cns/plugin-ab-testing"),a=e("@cns/plugin-meta-header"),l=e("@cns/plugin-redirect"),c=e("@cns/utils"),u=e("react"),d=(e("prop-types"),e("@ima/plugin-select"));function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=p(u),h=p(d);class g extends s.AbstractEntity{static get dataFieldMapping(){return{id:"_id",adKeywords:s.defaultToArray,metaKeywords:s.defaultToArray,relatedTags:s.defaultToArray}}static get embeds(){return[{field:"layout",resource:i.ns.get("plugin.layout.LayoutEntity")},{field:"caption",inline:!0,cache:!1},{field:"caption.sources",inline:!0,cache:!1},{field:"caption.caption",inline:!0,cache:!1},{field:"relatedTags",resource:i.ns.get("plugin.tag.TagEntity"),inline:!0,cache:!1},{field:"relatedTags.replacedByTag",resource:i.ns.get("plugin.tag.TagEntity"),inline:!0,cache:!1},...this.getContentEmbeds(this.getContentEmbedsFields(),this.getContentEmbedsTypes())]}static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"tag"}static getContentEmbedsFields(){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsFields()}static getContentEmbedsTypes(){let e=i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbedsTypes();return e.push("infobox"),e}static getContentEmbeds(e,t){return i.ns.get("plugin.articleMolecules.ContentEmbedHelper").getContentEmbeds(e,t)}get hasCaptionVideo(){return!!this.caption&&r.MediaHelper.isVideo(this.caption)}get hasDetailPage(){const{articleCount:e,status:t,profileStatus:n}=this;return["imported","approved"].includes(t)&&(["published","redirected"].includes(n)||e>=2)}get isVisible(){return"rejected"!==this.status}get tagUrl(){return`${this.slug}-${this.uid}`}get urlParameters(){return{tag:`${this.slug}-${this.uid}`}}constructor(e){super(e)}}class f extends s.AbstractService{static get $dependencies(){return[o.PageABTestRegistry,"$Settings.plugin.cns.plugin.tag",...s.defaultDependencies]}static get entityClass(){return i.ns.get("plugin.tag.TagEntity")}constructor(e,t,...n){super(...n),this._pageABTestRegistry=e,this._settings=t,Object.freeze(this)}get(e,t={}){const{abTestReplacementFields:n}=this._settings,i=super.get(e,t),r=this._pageABTestRegistry.getCurrentABTest();return o.applyAbTestModification(i,r,n)}}class _ extends i.AbstractController{static get $dependencies(){return[c.ExtensionsHelper,r.MediaHelper,"plugin.layout.LayoutService","plugin.service.ServiceService","plugin.tag.TagService","$Router",l.Redirect]}constructor(e,t,n,i,r,s,o){super(),this._extensionsHelper=e,this._mediaHelper=t,this._layoutService=n,this._tagService=r,this._serviceService=i,this._router=s,this._redirect=o}init(){this._extensionsHelper.addExtensionsToController(this)}load(){const e=this._tagService.extractId(this.params.tag),t=this._serviceService.get(),n=this._tagService.get(e).then((e=>(e.profileStatus&&"redirected"===e.profileStatus&&this._redirect.tryRedirect(),e))),i=n.then((e=>this._layoutService.loadById(e.layout)));return{_checkUrl:this._checkUrl(n),layout:i,tag:n,service:t}}setMetaParams(e,t,n,i,s){const{service:o,tag:l}=e;if(!o||!l)return;a.TagMetaHelper.setDefaultMeta({metaManager:t,router:n,settings:s,entity:l});const c=a.TagMetaHelper.getMetaTitle(l,o),u=a.TagMetaHelper.getSocialTitle(l,o),d=a.TagMetaHelper.getMetaDescription(l),p=a.TagMetaHelper.getSocialDescription(l),m=a.TagMetaHelper.getKeywords(l),h=l.caption;if(t.setTitle(c),t.setMetaName("description",d),t.setMetaName("keywords",m),t.setMetaName("twitter:title",u),t.setMetaName("twitter:description",p),t.setMetaProperty("og:title",u),t.setMetaProperty("og:description",p),h){let e=this._mediaHelper.getImageSource(h,r.MediaTrims.DEFAULT16x9,r.MediaSizes.WIDTH1200).url;e.startsWith("http")||(e=n.getProtocol()+e),t.setMetaName("twitter:image",e),t.setMetaProperty("og:image",e),t.setLink("previewimage",e)}}_checkUrl(e){return e.then((e=>{const{_router:t}=this,n=t.getCurrentRouteInfo().route.getName(),r=t.link(n,e),s=t.getUrl().split("?")[0];if(![void 0,"0","1"].includes(this.params.amp)||r!==s){const r=Object.assign({},e.urlParameters);(this.params.amp||""===this.params.amp)&&(r.amp="1");const s=t.link(n,r);throw new i.GenericError("Bad url redirect",{status:301,url:s})}}))}}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y.apply(this,arguments)}const b="ogm-related-tags";class v extends i.AbstractComponent{static get contextType(){return i.PageContext}static get defaultProps(){return{className:"",relatedTags:[]}}static get requiredProps(){return[]}static createHOCSelect(e=[C],t=this){const n=h.default(...e)(t);return d.hoistNonReactStatic(n,t),n}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.tag.component.organism.relatedTags.RelatedTags")}render(){const e=this._processReplacedTags(this.props.relatedTags).filter((e=>e.isVisible));return 0===e.length?null:m.default.createElement("div",{className:this.cssClasses(b,!0),"data-dot":"ogm-related-tags"},m.default.createElement("span",{className:this.cssClasses(`${b}__title`)},"Souvisejc tmata:"),this._renderTags(e))}_renderTags(e){return e.map((e=>{let t="span",n={};return e.hasDetailPage&&(t=r.Link,n.href=this.utils.$Router.link("tag",e)),m.default.createElement("div",{className:this.cssClasses(`${b}__item`),key:e.uid},m.default.createElement(t,y({className:this.cssClasses(`${b}__tag`)},n),e.title))}))}_processReplacedTags(e){if(!Array.isArray(e))return[];const t=[],n=[];return e.forEach((e=>{let i=e;i.replacedByTag&&i.replacedByTag.uid&&(i=i.replacedByTag),t.includes(i.uid)||(t.push(i.uid),n.push(i))})),n}}const C=(e,t,n)=>{const{article:i,tag:r}=e,{properties:s={}}=n,o=s.entity||"@article",a=t.$Utils.StringReferencesHelper.getReferenceData(o,{article:i,tag:r});return{relatedTags:a&&a.relatedTags||[]}};n.$registerImaPlugin=e=>{e.namespace("plugin.tag.component.organism.relatedTags"),e.namespace("plugin.tag"),e.namespace("plugin.tag.TagEntity"),e.namespace("plugin.tag.TagService");let t=e.plugin.tag;t.component.organism.relatedTags.RelatedTags=v,t.TagEntity=g,t.TagService=f},n.RelatedTags=v,n.TagController=_,n.TagEntity=g,n.TagService=f,n.initBind=()=>{},n.initSettings=()=>({prod:{plugin:{cns:{plugin:{tag:{abTestReplacementFields:["layout"]}}}}}}),n.relatedTagsSelector=C},{"@cns/plugin-ab-testing":12,"@cns/plugin-atoms":20,"@cns/plugin-meta-header":43,"@cns/plugin-redirect":48,"@cns/rest-api-client":76,"@cns/utils":78,"@ima/core":81,"@ima/plugin-select":139,"prop-types":232,react:242}],68:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":67,dup:8}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@cns/plugin-user"),r=e("@cns/rest-api-client"),s=e("@ima/core"),o=e("@ima/plugin-logger"),a=e("@cns/plugin-report"),l=e("@cns/utils");var c=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(e("prop-types"));const u="0";class d extends r.AbstractService{static get $dependencies(){return["TimelineTypes",...r.defaultDependencies]}static get entityClass(){return s.ns.get("plugin.timelines.TimelineEntity")}constructor(e,...t){super(...t),this._timelineTypes=e}fetchArticles(e,t,n){const i=e.filter((e=>this.isValidTimelineComponentConfig(e)));if(0===i.length)return Promise.resolve({});const r=this._processTimelineComponentConfigs(i,t,n),{pageItemIds:s,includePageItems:o,topItemIds:a,prevItems:l,deduplicate:c,excludedItems:u}=r;let d=null,p=[],m=[],h=[];r.containsSeparatedTimelineComponentConfigs?(d=this._getTimelinesToLimitsInDuplicateSeparatedMode(i),p=d.itemIds,m=d.nextItems,h=this._getTimelineFilterParametersInDuplicateSeparatedMode(i)):(d=this._getTimelinesToLimits(i),p=Array.from(d.keys()),m=Array.from(d.values())),n.pageItemId&&this._fixNextItemsForIncludePageItems(m,o);const g={itemIds:p,nextItems:m,prevItems:l,pageItemIds:s,includePageItems:o,topItemIds:a,deduplicate:c,filters:h,excludedItems:u};return this.fetchTimelines(g,r.componentsIdsToLimits,r.containsSeparatedTimelineComponentConfigs)}fetchMoreArticles(e,t,n,i,r,s){const o={nextItems:t,prevItems:n,itemIds:e.timelineId,excludedItems:i,pageItemIds:r,pageItemDates:s,loadingNextItems:1,filters:this._getTimelineFilterParameters(e)};return this.fetchMoreArticleTimelines(o)}fetchMoreArticleTimelines(e){return this.list(e)}fetchTimelines(e,t,n=!1){return this.list(e).then((e=>this._processTimelinesResponse(e,t,n)))}isValidTimelineComponentConfig(e){return!!e.timelineId}_addComponentIdToLimit(e,t){const n=e.timelineId,i={[e.componentId]:e.limit};return t[n]?t[n]=Object.assign(t[n],i):t[n]=i,t}_fixNextItemsForIncludePageItems(e,t){e.forEach(((n,i)=>{"1"===t[i]&&n>0&&e[i]--}))}_followingOrSectionTimelineExists(e){return!!e.find((e=>e.timelineType===this._timelineTypes.followingTimeline.name||e.timelineType===this._timelineTypes.sectionTimeline.name))}_getTimelineComponentIdsToLimits(e){return e.reduce(((e,t)=>this._addComponentIdToLimit(t,e)),{})}_getTimelineFilterParameters(e){Array.isArray(e)||(e=[e]);const t=new Map;return e.forEach((e=>{const n=e.timelineId;if(t.has(n))t.set(n,this._mergeTimelineFilters(t.get(n),e));else{let i={};e.documentTypes&&e.documentTypes.length&&(i._cls={$in:e.documentTypes}),e.timelineType&&this._timelineTypes.getByName(e.timelineType).filters&&(i=Object.assign(i,this._timelineTypes.getByName(e.timelineType).filters)),Object.keys(i).length&&t.set(n,{...i,...e.filters})}})),t.size?Array.from(t.values()):[]}_getTimelineFilterParametersInDuplicateSeparatedMode(e){Array.isArray(e)||(e=[e]);const t=e.map((e=>{const t={};return e.documentTypes&&e.documentTypes.length&&(t._cls={$in:e.documentTypes}),e.timelineType===this._timelineTypes.authorTimeline.name&&(t.storyUid=null),{...t,...e.filters}})),n=t.filter((e=>Object.keys(e).length));return t.length>1&&n.length>0?t:n}_getTimelinesToLimits(e){let t=new Map;for(let n of e){const{limit:e}=n,i=n.timelineId;t.has(i)?t.set(i,t.get(i)+e):t.set(i,e)}return t}_getTimelinesToLimitsInDuplicateSeparatedMode(e){return e.reduce(((e,t)=>(e.itemIds.push(t.timelineId),e.nextItems.push(t.limit),e)),{itemIds:[],nextItems:[]})}_limitPrecedingPageItemTimelineExists(e){return!!e.find((e=>e.limitPrecedingPageItem))}_mergeArrayFilter(e,t){return e?Array.from(new Set(e.concat(t))):t}_mergeTimelineFilters(e,t){const n=t.documentTypes;let i=Object.assign({},e);if(n&&n.length){let t=this._mergeArrayFilter(e.documentTypes,n);i._cls={$in:t}}return i}_processTimelineComponentConfigs(e,t,n){const i={excludedItems:new Set,pageItemIds:[],includePageItems:[],topItemIds:[],prevItems:[],deduplicate:[],componentsIdsToLimits:{},containsSeparatedTimelineComponentConfigs:!1};let r=!1,s=!1;const o=!!n.pageItemId,a=!!t&&this._followingOrSectionTimelineExists(e),l=o&&this._limitPrecedingPageItemTimelineExists(e);i.containsSeparatedTimelineComponentConfigs=o||a;let c=e.reduce(((e,i)=>{const c=Object.keys(i.filters||{}).length||i.documentTypes&&i.documentTypes.length||i.timelineType===this._timelineTypes.authorTimeline.name,d=!1===i.deduplicate;return(c||d)&&(e.containsSeparatedTimelineComponentConfigs=!0),e.componentsIdsToLimits=this._addComponentIdToLimit(i,e.componentsIdsToLimits),d?(s=!0,e.deduplicate.push(u)):e.deduplicate.push("1"),i.excludedDocuments&&i.excludedDocuments.length&&i.excludedDocuments.forEach((t=>e.excludedItems.add(t))),o&&(!r&&i.timelineStateKey===n.expandableTimelineStateKey&&i.showLoadNextArticles?(e.pageItemIds.push(n.pageItemId),e.includePageItems.push("1"),r=!0,l&&e.prevItems.push(i.limitPrecedingPageItem)):(e.pageItemIds.push(u),e.includePageItems.push(u),l&&e.prevItems.push(u))),a&&(i.timelineType===this._timelineTypes.followingTimeline.name||i.timelineType===this._timelineTypes.sectionTimeline.name?o?e.topItemIds.push(t):e.pageItemIds.push(t):o?e.topItemIds.push(u):e.pageItemIds.push(u)),e}),i);return s||(c.deduplicate=[]),c.excludedItems=Array.from(c.excludedItems),c}_processTimelinesResponse(e,t,n){return Array.isArray(e)?n?this._processTimelinesResponseInDupliciteTimelinesSeparatedMode(e,t):this._processTimelinesResponseInDupliciteTimelinesJoinedMode(e,t):{}}_processTimelinesResponseInDupliciteTimelinesJoinedMode(e,t){return e.reduce(((e,n)=>{const i=t[n.id],r=Object.keys(i).length>1;let s=Object.keys(i)[0];if(r)Object.entries(i).forEach((([t,i])=>{const r=n.id+this._timelineTypes.stateKeySeparator+t;Array.isArray(n.documents.items)&&(e[r]=n.cloneAndPatch({documents:{items:n.documents.items.splice(0,i),meta:Object.assign({},n.documents.meta)}}))}));else{const t=n.id+this._timelineTypes.stateKeySeparator+s;e[t]=n}return e}),{})}_processTimelinesResponseInDupliciteTimelinesSeparatedMode(e,t){return e.reduce(((e,n)=>{const i=t[n.id],r=Object.keys(i).length>1;let s=Object.keys(i)[0];const o=n.id+this._timelineTypes.stateKeySeparator+s;return r&&delete i[s],e[o]=n,e}),{})}}class p extends d{static get $dependencies(){return["TimelineTypes",...r.defaultDependencies]}constructor(e,...t){super(e,...t)}fetchDynamicUpdates(e,t,n,i,r){const s=this._getDynamicUpdatedTimelineComponentConfigs(e,n),o=this._getDynamicUpdatesApiParameters(s,t,n,i,r);if(!o.correctlyAssembled)return Promise.resolve({});const{nextItems:a,prevItems:l,pageItemIds:c,excludedItems:u}=o,d={itemIds:this._getDynamicUpdatedTimelineIds(s),nextItems:a,prevItems:l,pageItemIds:c,excludedItems:u,filters:this._getTimelineFilterParameters(Object.values(s))};return this.fetchTimelines(d,this._getTimelineComponentIdsToLimits(Object.values(s)))}_getDynamicUpdatedTimelineComponentConfigs(e,t){return e&&Array.isArray(e)?e.slice(0).filter((e=>t.includes(e.timelineStateKey))).reduce(((e,t)=>(e[t.timelineStateKey]=t,e)),{}):{}}_getDynamicUpdatedTimelineIds(e){return Object.keys(e).map((t=>e[t].timelineId))}_getDynamicUpdatesApiParameters(e,t,n,i,r){let s={pageItemIds:[],nextItems:[],prevItems:[],excludedItems:r,correctlyAssembled:!0};return n.reduce(((e,n)=>(n.indexOf(this._timelineTypes.stateKeySeparator)||(e.correctlyAssembled=!1),t[n].pageItemId?e.pageItemIds.push(t[n].pageItemId):e.pageItemIds.push("0"),t[n].prevItemsLimit?e.prevItems.push(t[n].prevItemsLimit):e.prevItems.push("0"),i&&e.excludedItems.push(i),e.nextItems.push("0"),e)),s)}}class m extends d{static get $dependencies(){return["TimelineTypes",...r.defaultDependencies]}constructor(e,...t){super(e,...t)}fetchMoreArticles(e,t,n,i,r,s,o){const a={nextItems:s,itemIds:r.timelineId,excludedItems:o,sid:e,...t,context_id:i,rus_id:n,suggestAuthors:r.filterByAuthor?[r.filterByAuthor]:[],suggestSections:r.filterByAuthor?[r.filterByAuthor]:[],dopSourceZoneName:r.dopSourceZoneName};return this.fetchMoreArticleTimelines(a)}fetchSuggestedTimelines(e,t,n,i,r){const s=this._getTimelinesToLimits(r);let o={sid:e,...t,context_id:i,rus_id:n,itemIds:Array.from(s.keys()),nextItems:Array.from(s.values()),suggestAuthors:this._processSuggestSettings(r,"filterByAuthor"),suggestSections:this._processSuggestSettings(r,"filterBySection"),dopSourceZoneName:(r.find((e=>e.dopSourceZoneName))||{}).dopSourceZoneName};return this.fetchTimelines(o,this._getTimelineComponentIdsToLimits(r))}_processSuggestSettings(e,t){let n=[];return e.forEach((e=>{e[t]&&n.push(e[t])})),n}}class h extends r.AbstractEntity{static get idFieldName(){return"id"}static get idParameterName(){return"ItemId"}static get inlineResponseBody(){return!0}static get resourceName(){return"timeline"}constructor(e){super(e)}$serialize(e=this){let t=Object.assign({},e);return Object.prototype.hasOwnProperty.call(e,"id")&&(t._id=e.id,delete t.id),e.documents instanceof Array&&(t.documents._items=e.documents.items.map((e=>e.$serialize()))),t}$deserialize(e){let t=Object.assign({},e);return Object.prototype.hasOwnProperty.call(e,"_id")&&(t.id=e._id,delete t._id),e.documents&&e.documents._items instanceof Array&&(t.documents.items=e.documents._items.map((e=>{let t=Object.assign({},e);return this._deserializeItem(t)}))),e.documents&&e.documents._meta instanceof Object&&(t.documents.meta=e.documents._meta),t}_deserializeItem(e){return new(s.ns.get("plugin.article.ArticleEntity"))(e)}}const g=Object.freeze({REGISTER:"dynamicUpdateRegister",UNREGISTER:"dynamicUpdateUnregister"}),f="updateDynamicUpdatesPageItemId",_=Object.freeze({BASIC:"fetchMoreDocuments",INFINITE_SCROLL:"infiniteScrollFetchMoreDocuments"});class y extends s.AbstractExtension{static get $dependencies(){return[d,m,"$UIComponentHelper",s.Dispatcher,"$Router","DotAnalytic","$Settings.plugin.cns.plugin.timelines.suggestedTimelineFetch","TimelineTypes","TimelineComponents",a.ReportService,l.LegacyBrowserDetector]}static get TIMELINE_PAGE_ITEM_QUERY_PARAMETER(){return"timeline--pageItem"}static get TIMELINE_POSTS_QUERY_PARAMETER(){return"timeline--postsTimeline"}static get ALLOWED_PREV_ITEMS_LIMIT(){return 15}static getPageItemId(e){let t=e[y.TIMELINE_PAGE_ITEM_QUERY_PARAMETER];return void 0===t?null:Number.isNaN(Number.parseInt(t))?"":t}constructor(e,t,n,i,r,o,a,l,c,u,d){super(),this._TimelineEntity=s.ns.get("plugin.timelines.TimelineEntity"),this._timelineService=e,this._suggestedTimelineService=t,this._uiComponentHelper=n,this._dispatcher=i,this._reportService=u,this._legacyBrowserDetector=d,this._router=r,this._dotAnalytic=o,this._suggestedTimelineFetchSettings=a,this._timelineTypes=l,this._timelineComponents=c,this._suggestedTimelinesEventHandler=e=>{this._manageFetchingSuggestedTimelines(this._suggestedTimelineComponents,e)},this._suggestedTimelineComponents=null,this._timelineStateKeys,this._infiniteScrollTimeout=null,this._requestedDocumentsLimit=0,this._previousStartingPointItemUid=null,this._timelineComponentConfigs=[],this._zeroLimitTimelinesResponses={}}init(){this._suggestedTimelineFetchSettings.isDeferred&&this._dispatcher.listen(this._suggestedTimelineFetchSettings.triggerEvent,this._suggestedTimelinesEventHandler,this)}getAllowedStateKeys(){return["timelines","timelineComponentConfigs","isLoadingArticles","timelinesExpandLinkShown","timelinePageItemId","timelineNextPageItemId"]}load(){this._processUrlRedirect();const e=this.getState(),t=e.layout,n=this._getPromiseFromPartialState(e,"article"),i=this._getPromiseFromPartialState(e,"author"),r=this._getPromiseFromPartialState(e,"section"),s=this._getPromiseFromPartialState(e,"tag");if(!t)return{};const o=Promise.all([n,i,t,r,s]).then((([t,n,i,r,s])=>this._getTimelineComponentConfigsFromLayout(t,n,i,r,s,e.applicationStartServerTimestamp))).then((e=>this._timelineComponentConfigs=e)),a=o.then((e=>0===e.length?null:this._fetchTimelines(e))),l=Promise.all([a,o]).then((([e,t])=>this._getNextPageItemId(e,t))),c=a.then((e=>this._mapObject(e,(()=>!1)))),u=a.then((e=>this._mapObject(e,(()=>!0))));return o.then((e=>{this._timelineStateKeys=e.map((e=>e.timelineStateKey))})),{timelines:a,timelineComponentConfigs:o,isLoadingArticles:c,timelinesExpandLinkShown:u,timelinePageItemId:y.getPageItemId(this.params),timelineNextPageItemId:l}}activate(){this._suggestedTimelineFetchSettings.isDeferred||this._manageFetchingSuggestedTimelines(this._suggestedTimelineComponents,{})}destroy(){this._timelineComponentConfigs=[],this._suggestedTimelineComponents=null,clearTimeout(this._infiniteScrollTimeout),this._infiniteScrollTimeout=null,this._requestedDocumentsLimit=0,this._previousStartingPointItemUid=null,this._suggestedTimelineFetchSettings.isDeferred&&this._dispatcher.unlisten(this._suggestedTimelineFetchSettings.triggerEvent,this._suggestedTimelinesEventHandler,this)}onFetchMoreDocuments(e){this._fetchMoreDocuments(e)}onInfiniteScrollFetchMoreDocuments(e){this._infiniteScrollTimeout?this._requestedDocumentsLimit<50&&(this._requestedDocumentsLimit+=e.nextItemsLimit):(this._infiniteScrollTimeout=setTimeout((()=>{this._requestedDocumentsLimit&&(e.nextItemsLimit=this._requestedDocumentsLimit,this._requestedDocumentsLimit=0,this._fetchMoreDocuments(e)),this._infiniteScrollTimeout=null}),600),this._fetchMoreDocuments(e))}_addTimelinesToState(e,t){const n=this.getState(),i=this._mapObject(e,(()=>!1)),r=this._mapObject(e,(()=>!0)),s=this._getNextPageItemId(e,t);let o=n.isLoadingArticles||{},a=n.timelines||{},l=n.timelinesExpandLinkShown||{};o=Object.assign(o,i),a=Object.assign({},a,e),l=Object.assign(l,r),this.setState({isLoadingArticles:o,timelineNextPageItemId:s,timelines:a,timelinesExpandLinkShown:l})}_collectExcludedArticlesIds(e){let t=[],n=this.getState().timelines;if(!n)return t;if(1===n.length)return t;for(let i in n){Object.prototype.hasOwnProperty.call(n,i)&&i!==e&&this._containsDocuments(n[i])&&n[i].documents.items.map((e=>{e.uid&&t.push(e.uid)}));let r=this._getCurrentDocumentId();r&&t.push(r)}return t}_containsDocuments(e){return!!(e&&e.documents&&e.documents.items&&e.documents.items.length>0)}_extractArticleId(e){return parseInt(e.split("-").pop())}_fetchArticleTimelines(e,t){return this._timelineService.fetchArticles(e,this._getCurrentDocumentId(),this._getPagesFetchData(t))}_fetchFallbackTimelines(e){const t=[];e.forEach((e=>{if(e.fallbackTimelineId){const n=this._timelineTypes.changeToFallback(e);t.push(n)}})),this._timelineComponentConfigs.unshift(...t),this._fetchArticleTimelines(t,this._timelineComponentConfigs).then((e=>{this._addTimelinesToState(e,t)}))}_fetchMoreDocuments(e){let{nextItemsLimit:t,prevItemsLimit:n=0,currentTimelineStateKey:i,currentTimelineType:r,currentTimelineLimit:s}=e,o={},a=!1;if(t?o=this._getLastTimelineItem(i):n&&n<=y.ALLOWED_PREV_ITEMS_LIMIT?o=this._getFirstTimelineItem(i):(n=0,t=s,a=!0),o.uid===this._previousStartingPointItemUid&&!a)return;o.uid&&(this._previousStartingPointItemUid=o.uid);const l=this._getTimelineComponentConfigByTimelineStateKey(i);if(0===Object.keys(l).length)return;const c=r!==this._timelineTypes.suggestedTimeline.name?i:"",u=this._collectExcludedArticlesIds(c);this._setArticlesFetchingState(i),this._fetchMoreTimeline(i,l,t,n,a,u,o.uid,o.dateOfLastUpdate)}_fetchMoreTimeline(e,t,n,i,r,s,o,a){let l;if(t.timelineType===this._timelineTypes.suggestedTimeline.name){const e=this.getState(),{rusId:i}=e.user||{};l=this._suggestedTimelineService.fetchMoreArticles(this._dotAnalytic.getSid()||0,this._dotAnalytic.getEuconsent(),i,this._getCurrentDocumentId(),t,n,s.join(","))}else l=this._timelineService.fetchMoreArticles(t,n,i,s.join(","),o,a);this._processMoreFetchedDocuments(l,n,i,e,r)}_fetchSuggestedTimelines(e,t){return this._suggestedTimelineService.fetchSuggestedTimelines(this._dotAnalytic.getSid()||0,this._dotAnalytic.getEuconsent(),t,this._getCurrentDocumentId(),e)}_fetchTimelines(e){let t=null,n=[],i=[];const r=this._timelineTypes.names;return e.forEach((e=>{e.timelineType===this._timelineTypes.suggestedTimeline.name?n.push(e):r.includes(e.timelineType)?i.push(e):o.warn(`Timeline type '${e.timelineType}' is not supported.`)})),(this._uiComponentHelper.isAmp()||this._legacyBrowserDetector.isLegacyClient())&&n.length&&(n.forEach((e=>{if(e.fallbackTimelineId){const t=this._timelineTypes.changeToFallback(e);i.unshift(t),this._timelineComponentConfigs.unshift(t)}})),n=[]),i.length&&(t=this._fetchArticleTimelines(i,e)),n.length&&(this._suggestedTimelineComponents=n),this._processFetchedTimelines(t)}_getCurrentDocumentId(){let e=this.params.article;return e?this._extractArticleId(e):0}_getExpandableTimelineStateKey(e){for(let t of e)if(t.showLoadNextArticles)return t.timelineStateKey;return null}_getFirstTimelineItem(e){let t=this.getState().timelines;if(!t||!this._containsDocuments(t[e]))return{};let n=t[e].documents.items;return n&&n.length?n[0]:{}}_getLastTimelineItem(e){let t=this.getState().timelines;if(!t||!this._containsDocuments(t[e]))return{};let n=t[e].documents.items;return n&&n.length?n[n.length-1]:{}}_getNextPageItemId(e,t){let n=this._getExpandableTimelineStateKey(t);if(e&&n&&this._containsDocuments(e[n])){let t=e[n].documents.items.slice().pop();if(t)return t.uid.toString()}return""}_getPagesFetchData(e){if(!e)return{expandableTimelineStateKey:null,pageItemId:null};let t=y.getPageItemId(this.params);return{expandableTimelineStateKey:t?this._getExpandableTimelineStateKey(e):null,pageItemId:t}}_getPromiseFromPartialState(e,t){return this.params[t]&&e[t]?e[t]:Promise.resolve(null)}_getTimelineComponentConfigByTimelineStateKey(e){const t=this._timelineComponentConfigs,n=e.indexOf(this._timelineTypes.stateKeySeparator);let i="";n&&(i=e.slice(0,n));const r=t.find((e=>e.timelineId===i))||{};return!r.timelineId&&this._zeroLimitTimelinesResponses[e]?{timelineId:i}:r}_getTimelineComponentConfigsFromLayout(e,t,n,i,r,s){if(!n)return[];let o=this._timelineComponents.order(n);return o?o.reduce(((o,a)=>{let l=this._timelineComponents.getByNamespace(a.component).getConfig({article:e,author:t,component:a,currentDocumentId:this._getCurrentDocumentId(),layout:n,section:i,tag:r,applicationStartServerTimestamp:s});return Array.isArray(l)||(l=[l]),l.forEach((e=>{0===e.limit?(this._saveZeroLimitComponent(e),o.push({})):o.push(e)})),o}),[]):[]}_manageFetchingSuggestedTimelines(e,t){if(!e)return;const{rusId:n=null}=t||{};this._fetchSuggestedTimelines(e,n).then((t=>{this._addTimelinesToState(t,e)})).catch((()=>{const t=this._router.getUrl();this._reportToMonitoring("timeline:fallback",{url:t,suggestedTimelineComponentConfigs:e}),this._fetchFallbackTimelines(e)}))}_mapObject(e,t){let n={};if(!e)return null;for(let i of Object.keys(e))n[i]=t(e[i],i,e);return n}_patchObject(e,t,n){return Object.assign({},e,{[t]:n})}_processFetchedTimelines(e){return e?e.then((e=>{let t={};return t=Object.assign(t,e),Object.keys(this._zeroLimitTimelinesResponses).length&&(t=Object.assign(t,this._zeroLimitTimelinesResponses)),t})):null}_processMoreFetchedDocuments(e,t,n,i,r){let s=this.getState();e.then((e=>e[0]?this._containsDocuments(e[0])?this._updateTimelinesStateData(i,t,n,r,e[0]):void 0:(this.setState({isLoadingArticles:this._patchObject(s.isLoadingArticles,i,!1),timelinesExpandLinkShown:this._patchObject(s.timelinesExpandLinkShown,i,!1)}),null))).catch((e=>{this.setState({isLoadingArticles:this._patchObject(s.isLoadingArticles,i,!1)}),o.warn(e)}))}_processUrlRedirect(){if(""===y.getPageItemId(this.params)){const{route:e,params:t}=this._router.getCurrentRouteInfo();delete t[y.TIMELINE_PAGE_ITEM_QUERY_PARAMETER],this._router.redirect(this._router.link(e.getName(),t),{httpStatus:301})}}_replaceTimelineDocuments(e,t,n,i=!1){let r={items:t,meta:n};return r.meta.metaDynamicallyUpdated=i,e.cloneAndPatch({documents:r})}_reportToMonitoring(e,t={}){o.throwIf(!e||"string"!=typeof e,new TypeError("Argument type must be a string.")),o.throwIf("object"!=typeof t,new TypeError("Argument params must be an object.")),this._reportService.report(e,t)}_saveZeroLimitComponent(e){const t={[e.timelineStateKey]:new this._TimelineEntity({documents:{items:[],meta:{}},dataAlreadyFetched:!1})};this._zeroLimitTimelinesResponses=Object.assign(this._zeroLimitTimelinesResponses,t)}_setArticlesFetchingState(e){const t=this.getState().isLoadingArticles;this.setState({isLoadingArticles:Object.assign({},t,{[e]:!0})})}_updateTimelinesStateData(e,t,n,i,r){const s=this.getState(),o=this._containsDocuments(s.timelines[e])?s.timelines[e].documents:{items:[],meta:{}},a=o.items,l=o.meta,c=r.documents,u=c.items;let d=c.meta,p=[];i?p=u:t?(p=a.concat(u),Object.prototype.hasOwnProperty.call(l,"prevItemsNotShownCount")&&(d.prevItemsNotShownCount=l.prevItemsNotShownCount)):(p=u.concat(a),Object.prototype.hasOwnProperty.call(l,"nextItemsNotShownCount")&&(d.nextItemsNotShownCount=l.nextItemsNotShownCount));let m=Object.assign({},s.timelines),h=this._replaceTimelineDocuments(r,p,d);!1===m[e].dataAlreadyFetched&&(h.dataAlreadyFetched=!0),m[e]=h;let g=u.length,_=u.slice(-1)[0];this.setState({timelinePageItemId:"",timelineNextPageItemId:_&&_.uid?_.uid.toString():"",timelinesExpandLinkShown:this._patchObject(s.timelinesExpandLinkShown,e,!(g<t)),timelines:m,isLoadingArticles:this._patchObject(s.isLoadingArticles,e,!1)}),this._dispatcher.fire(f,e)}}n.$registerImaPlugin=e=>{e.namespace("plugin.timelines.TimelineEntity"),e.plugin.timelines.TimelineEntity=h},n.DefaultTimelineComponents=class{static get $dependencies(){return["TimelineTypes"]}get componentObject(){return this._componentObject||(this._componentObject={},this.getAll().forEach((e=>{this._componentObject[e.namespace]=e}))),this._componentObject}get namespaces(){return Object.keys(this.componentObject)}get timeline(){return{namespace:"organism.timeline.Timeline",getConfig:e=>{const{component:t,currentDocumentId:n,article:i,author:r,section:s,tag:o}=e,a=this.getDefaultConfig({component:t,currentDocumentId:n,article:i,author:r,section:s,tag:o});return a.showLoadNextArticles=t.settings.showLoadNextArticles||!1,a}}}get topStory(){return{namespace:"organism.topStory.TopStory",getConfig:e=>{const{author:t,component:n,currentDocumentId:i,section:r,tag:s}=e,o=this.getDefaultConfig({component:n,currentDocumentId:i,author:t,section:r,tag:s});return o.limit=1,o}}}constructor(e){this._timelineTypes=e,this._componentObject=null}getAll(){return[this.timeline,this.topStory]}getByNamespace(e){return this.componentObject[e]}getDefaultConfig(e){const{article:t,author:n,component:i,currentDocumentId:r,section:s,tag:o}=e,a=t&&t.authors&&t.authors[0],l=i.properties.author||n&&n.id||a&&a.id||null;let c={componentId:i.componentId,currentDocumentId:r,authorId:l,sectionId:i.properties.section||(s?s.id:null),tagId:o?o.uid:null,deduplicate:void 0!==i.settings.deduplicate?i.settings.deduplicate:i.properties.deduplicate,excludedDocuments:r?[r]:[],limit:i.settings.limit||i.properties.limit||0,limitPrecedingPageItem:i.settings.limitPrecedingPageItem||i.properties.limitPrecedingPageItem||0,_timeline:i.settings.timeline||i.properties.timeline||"",timelineType:i.settings.timelineType||i.properties.timelineType||this._timelineTypes.default.name};c.timelineId=c._timeline;const u=c.timelineType,d=this._timelineTypes.getByName(u);return d&&d.getId?(c.timelineId=d.getId(c),c.timelineStateKey=d.getStateKey(c)):(c.timelineType=this._timelineTypes.default.name,c.timelineStateKey=this._timelineTypes.default.getStateKey(c)),u===this._timelineTypes.suggestedTimeline.name&&(c.filterByAuthor=i.properties.author||"",c.filterBySection=i.properties.section||"",c.dopSourceZoneName=i.properties.dopSourceZoneName,i.properties.fallbackTimeline&&(c.fallbackTimelineId=i.properties.fallbackTimeline)),c}order(e){return e.getLayoutOrderedComponents(this.namespaces)}},n.DefaultTimelineTypes=class{get authorTimeline(){return{name:"AuthorTimeline",prefix:"author",filters:{storyUid:null},getId:e=>e.authorId?this.authorTimeline.prefix+this.separator+e.authorId:null,getStateKey:e=>e.authorId?this.authorTimeline.getId(e)+this.stateKeySeparator+e.componentId:null}}get commonTimeline(){return{name:"CommonTimeline",getId:e=>e.timelineId,getStateKey:e=>e.timelineId+this.stateKeySeparator+e.componentId}}get componentIdPrefix(){return"in"}get default(){return this.commonTimeline}get followingTimeline(){return{name:"FollowingTimeline",getId:this.default.getId,getStateKey:this.default.getStateKey}}get names(){return Object.keys(this.typeObject)}get propTypes(){return c.default.oneOf(this.names)}get sectionTimeline(){return{name:"SectionTimeline",prefix:"section",getId:e=>e.sectionId?this.sectionTimeline.prefix+this.separator+e.sectionId:null,getStateKey:e=>e.sectionId?this.sectionTimeline.getId(e)+this.stateKeySeparator+e.componentId:null}}get separator(){return"_"}get stateKeySeparator(){return this.separator+this.componentIdPrefix+this.separator}get suggestedTimeline(){return{name:"SuggestedTimeline",getStateKey:this.default.getStateKey,getId:this.default.getId}}get tagTimeline(){return{name:"TagTimeline",prefix:"tag",getId:e=>e.tagId?this.tagTimeline.prefix+this.separator+e.tagId:null,getStateKey:e=>e.tagId?this.tagTimeline.getId(e)+this.stateKeySeparator+e.componentId:null}}get typeObject(){return this._typeObject||(this._typeObject={},this.getAll().forEach((e=>{this._typeObject[e.name]=e}))),this._typeObject}constructor(){this._typeObject=null}changeToFallback(e){const t=Object.assign({},e);return t.timelineId=e.fallbackTimelineId,t.timelineType=this.commonTimeline.name,t.timelineStateKey=this.commonTimeline.getStateKey(t),t}getAll(){return[this.commonTimeline,this.authorTimeline,this.followingTimeline,this.sectionTimeline,this.tagTimeline,this.suggestedTimeline]}getByName(e){return this.typeObject[e]}},n.DynamicUpdateEvents=g,n.DynamicUpdateExtension=class extends y{static get $dependencies(){return[s.Dispatcher,p]}constructor(e,t){super(),this._dispatcher=e,this._DynamicUpdateService=t,this._dynamicUpdatesInterval=null,this._dynamicUpdatedTimelines={},this._dynamicUpdatesAllowed=!1,this._directDynamicUpdatesAllowed=!1,this._forcedDynamicUpdatesAllowed=!1,this._directDynamicUpdatesFlushTimeout=null,this._forcedDynamicUpdatesFlushTimeout=null}init(){this._dispatcher.listen(s.RouterEvents.AFTER_HANDLE_ROUTE,this._afterHandleRoute,this),this._dispatcher.listen(f,this._updateDynamicUpdatesPageItemId,this)}load(){return{}}activate(){this._dynamicUpdatesAllowed=!0}destroy(){clearInterval(this._dynamicUpdatesInterval),this._dynamicUpdatesInterval=null,this._directDynamicUpdatesAllowed=!1,this._forcedDynamicUpdatesAllowed=!1,clearTimeout(this._directDynamicUpdatesFlushTimeout),this._directDynamicUpdatesFlushTimeout=null,this._forcedDynamicUpdatesFlushTimeout=null}onDynamicUpdateRegister(e){if(!this._dynamicUpdatesAllowed)return;let t=Object.keys(e)[0],n=e[t];if(this._dynamicUpdatesInterval||(this._dynamicUpdatesInterval=setInterval(this._fetchDynamicUpdates.bind(this),62e3)),!n.pageItemId){let e=this._getFirstTimelineItem(t);e.uid&&(n.pageItemId=e.uid)}this._directDynamicUpdatesAllowed&&(this._directDynamicUpdatesFlushTimeout||(this._directDynamicUpdatesFlushTimeout=setTimeout((()=>{this._fetchDynamicUpdates(),this._directDynamicUpdatesFlushTimeout=null}),500))),this._forcedDynamicUpdatesAllowed&&n.forceImmediateUpdate&&(this._forcedDynamicUpdatesFlushTimeout||(this._forcedDynamicUpdatesFlushTimeout=setTimeout((()=>{this._fetchDynamicUpdates(),this._forcedDynamicUpdatesFlushTimeout=null}),100))),Object.assign(this._dynamicUpdatedTimelines,e)}onDynamicUpdateUnregister(e){let{timelineStateKey:t}=e;delete this._dynamicUpdatedTimelines[t],Object.keys(this._dynamicUpdatedTimelines).length||(clearInterval(this._dynamicUpdatesInterval),this._dynamicUpdatesInterval=null)}onFetchMoreDocuments(){return this.warnOnBadlyBoundExtension("fetchMoreDocuments"),!1}onInfiniteScrollFetchMoreDocuments(){return this.warnOnBadlyBoundExtension("infiniteScrollFetchMoreDocuments"),!1}warnOnBadlyBoundExtension(e){o.warn(`Cannot properly handle the '${e}' event. Please include TimelineExtension before DynamicUpdateExtension in bind.js.`)}_afterHandleRoute(){this._allowDirectDynamicUpdates(),this._allowForcedDynamicUpdates()}_allowDirectDynamicUpdates(){setTimeout((()=>{this._directDynamicUpdatesAllowed=!0}),3e4)}_allowForcedDynamicUpdates(){this._forcedDynamicUpdatesAllowed=!0}_collectMultipleTimelinesExcludedItemIds(e){let t=this.getState().timelines;const n=Object.keys(t||{});return!t||n.length<2?[]:n.filter((t=>!e.includes(t))).reduce(((e,n)=>this._containsDocuments(t[n])?t[n].documents.items.reduce(((e,t)=>(t.uid&&e.push(t.uid),e)),e):e),[])}_fetchDynamicUpdates(){if(!Object.keys(this._dynamicUpdatedTimelines).length)return;let e=Object.assign({},this._dynamicUpdatedTimelines),t=Object.keys(e),n=this._collectMultipleTimelinesExcludedItemIds(t);t.length>1&&(t=t.sort(((e,t)=>this._timelineStateKeys?this._timelineStateKeys.indexOf(e)-this._timelineStateKeys.indexOf(t):0)));let i=this.getState().timelineComponentConfigs;i||o.warn("No timeline component configs found in state.");let r=this._DynamicUpdateService.fetchDynamicUpdates(i,e,t,this._getCurrentDocumentId()||"",n);this._updateDynamicUpdatesStateData(r)}_isValidTimeline(e){return!!(e&&e.documents&&Array.isArray(e.documents.items)&&e.documents.meta&&void 0!==e.documents.meta.prevItemsNotShownCount)}_updateDynamicUpdatesPageItemId(e){if(this._dynamicUpdatedTimelines[e]){let t=this._getFirstTimelineItem(e);t&&t.uid&&(this._dynamicUpdatedTimelines[e].pageItemId=t.uid)}}_updateDynamicUpdatesStateData(e){e.then((e=>{let t=!1,n=Object.assign({},this.getState().timelines);Object.entries(e).forEach((([e,i])=>{let r=i.documents,s=r.items,o=r.meta,a=this._isValidTimeline(n[e])?n[e].documents:{items:[],meta:{}},l=a.items,c=a.meta,u=!1,d=!1,p=!1;s.length&&(l=s.concat(l),d=!0),o.prevItemsNotShownCount>c.prevItemsNotShownCount&&(c.prevItemsNotShownCount=o.prevItemsNotShownCount,u=!0,p=!0),(d||p)&&(n[e]=this._replaceTimelineDocuments(n[e],l,c,u),t=!0),this._updateDynamicUpdatesPageItemId(e)})),t&&this.setState({timelines:n})}))}},n.DynamicUpdateService=p,n.FetchEvents=_,n.SuggestedTimelineService=m,n.TimelineComponentHelper=class{static get $dependencies(){return[l.RegressionHelper,"TimelineTypes","TimelineComponents"]}get timelineComponents(){return this._timelineComponents}get timelineTypes(){return this._timelineTypes}constructor(e,t,n){this._regressionHelper=e,this._timelineTypes=t,this._timelineComponents=n}getDocuments(e){const{timeline:t,limit:n=null}=e;if(!t)return[];const i=t&&t.documents&&Array.isArray(t.documents.items)?t.documents.items:[];return n?i.slice(0,n):i.slice()}getTimeline(e){const{timelines:t,timelineType:n,componentId:i,currentDocumentId:r=0,timelineId:s,fallbackTimelineId:o,authorId:a="",sectionId:l="",tagId:c=""}=e;if(!t)return null;if(!this._timelineTypes.getByName(n))return null;const u={authorId:a,componentId:i,currentDocumentId:r,sectionId:l,tagId:c,timelineId:s,timelineType:n,fallbackTimelineId:o};let d=this.getTimelineStateKey(u),p=t[d];return!p&&o&&(d=this.getTimelineStateKey(this._timelineTypes.changeToFallback(u)),p=t[d]),p}getTimelineStateKey(e){return this._timelineTypes.getByName(e.timelineType).getStateKey(e)}},n.TimelineEntity=h,n.TimelineExtension=y,n.TimelineService=d,n.initBind=()=>{},n.initSettings=(e,t,n)=>({prod:{plugin:{cns:{plugin:{timelines:{suggestedTimelineFetch:{isDeferred:!0,triggerEvent:i.Events.INIT}}}}}}})},{"@cns/plugin-report":50,"@cns/plugin-user":75,"@cns/rest-api-client":76,"@cns/utils":78,"@ima/core":81,"@ima/plugin-logger":71,"prop-types":232}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});let i={silentMode:!1};function r(e){e&&"object"==typeof e?"silentMode"in e&&(i.silentMode=!!e.silentMode):n.error(new TypeError("Argument config must be an object."))}n.$registerImaPlugin=e=>{e.namespace("plugin.logger")},n.beSilent=function(){r({silentMode:!0})},n.configureLogger=r,n.debug=function(...e){n.isSilent()||("function"==typeof console.debug?console.debug(...e):console.log(...e))},n.debugIf=function(e,...t){return e&&n.debug(...t),!!e},n.error=function(...e){n.isSilent()||console.error(...e)},n.errorIf=function(e,...t){return e&&n.error(...t),!!e},n.info=function(...e){n.isSilent()||console.info(...e)},n.infoIf=function(e,...t){return e&&n.info(...t),!!e},n.isSilent=function(){return i.silentMode},n.log=function(...e){n.isSilent()||console.log(...e)},n.logIf=function(e,...t){return e&&n.log(...t),!!e},n.rejectIf=function(e,t){return e?Promise.reject(t):null},n.throwIf=function(e,t){if(e)throw t},n.warn=function(...e){n.isSilent()||console.warn(...e)},n.warnIf=function(e,...t){return e&&n.warn(...t),!!e}},{}],71:[function(e,t,n){"use strict";t.exports=e("./dist/main")},{"./dist/main":70}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),r=(e("prop-types"),e("@ima/core"));var s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);class o extends r.AbstractComponent{static get contextType(){return r.PageContext}static get defaultProps(){return{onVisible:null,settings:{action:"",data:null,visiblePercent:0}}}constructor(e,t){super(e,t),this.utils.CssRenderingHelper.register("plugin.trackVisibility.component.organism.track.TrackVisibility"),this._ref=s.default.createRef(),this._visibilityId=null}componentDidMount(){this._registerVisibility()}shouldComponentUpdate(){return!1}componentWillUnmount(){this._unregisterVisibility()}render(){return s.default.createElement("span",{ref:this._ref,className:this.cssClasses("ogm-track-visibility")})}_onVisibilityWriter(e){const{visiblePercent:t}=this.props.settings||{};e>(t||0)&&(this._callOnVisibleCallback(),this._hitAnalyticsAction(),this._unregisterVisibility())}_callOnVisibleCallback(){"function"==typeof this.props.onVisible&&this.props.onVisible()}_hitAnalyticsAction(){const{action:e,data:t}=this.props.settings||{},n=Object.assign({},t,{action:e});e&&this.utils.DotAnalytic.hit(n)}_registerVisibility(){this._ref.current&&!this._visibilityId&&(this._visibilityId=this.utils.$UIComponentHelper.visibility.register(this.utils.$UIComponentHelper.getVisibilityReader(this._ref.current,{extendedPadding:1}),this.utils.$UIComponentHelper.wrapVisibilityWriter(this._onVisibilityWriter.bind(this))))}_unregisterVisibility(){this._visibilityId&&(this.utils.$UIComponentHelper.visibility.unregister(this._visibilityId),this._visibilityId=null)}}n.$registerImaPlugin=e=>{e.namespace("plugin.trackVisibility.component.organism.track"),e.plugin.trackVisibility.component.organism.track.TrackVisibility=o},n.TrackVisibility=o,n.initBind=()=>{}},{"@ima/core":81,"prop-types":232,react:242}],73:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":72,dup:8}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@cns/rest-api-client"),r=e("@ima/core"),s=e("@ima/plugin-loading-manager"),o=e("@ima/plugin-login"),a=e("@ima/plugin-traffic");class l extends i.AbstractEntity{static get inlineResponseBody(){return!0}static get resourceName(){return"user"}constructor(e){super(e)}}class c{get rusId(){return this.rusId||null}constructor(e){if(e){for(let t of Object.keys(e))Object.defineProperty(this,t,{configurable:!1,enumerable:!0,get:()=>e[t],set:n=>{e[t]=n}});for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(e)))"constructor"!==t&&Object.defineProperty(this,t,{configurable:!1,enumerable:!1,get:()=>e[t]});Object.freeze(this)}}}class u extends i.AbstractService{static get entityClass(){return r.ns.get("plugin.user.UserEntity")}get(){const e=r.ns.get("plugin.user.UserEntityDecorator");return super.get(null,{},{cache:!0,repeatRequest:0,withCredentials:!0}).then((t=>new e(t)))}invalidateCache(){this.$restClient.invalidateCache("get",this.constructor.entityClass)}}const d=Object.freeze({INIT:"cns.plugin.user.init",LOGIN:"cns.plugin.user.login",LOGOUT:"cns.plugin.user.logout",FORGET:"cns.plugin.user.forget",RELOAD:"cns.plugin.user.reload"}),p=Object.freeze({LOGIN:"login",LOGOUT:"logout",FORGET:"forget"}),m=Object.freeze({GREEN:"green",ORANGE:"orange",RED:"red"}),h="isDsCookieAvailable",g="reloadOccurred",f="dsCookieVerificationFailed",_="badgeCalled",y="initDotCalled";class b extends r.AbstractExtension{static get $dependencies(){return[r.CookieStorage,r.Dispatcher,"DotAnalytic",u,a.TrafficService,"$Cache","$Window"]}constructor(e,t,n,i,r,o,a){super(),this._cookieStorage=e,this._dispatcher=t,this._dotAnalytic=n,this._userService=i,this._trafficService=r,this._cache=o,this._window=a,this._delayedInit=null,this._disableDOTLazyLoading=s.callAfter([y,_],(()=>{this._dotAnalytic.disableLazyLoading()}))}getAllowedStateKeys(){return["user"]}load(){if(!this._window.isClient()){const e=this._cookieStorage.has("ds");this._setDsAvailableCache(e)}return{user:null}}activate(){if(this._trafficService.isDowngraded())return void this._dispatcher.fire(d.INIT,{},!0);const{_dispatcher:e}=this,t=this._cache.get(h);e.listen(o.Events.BADGE,this._onInit,this),e.listen(o.Events.LOGIN,this._reloadUser,this),e.listen(o.Events.LOGOUT,this._reloadUser,this),e.listen(o.Events.FORGET,this._forgetUserHandler,this),e.listen(d.RELOAD,this._reloadUser,this),t?(this._delayedInit=s.callAfter([f,g],(()=>{this._reloadUser()})),this._userService.get().then((e=>{const{loginStatus:t}=e||{};t===m.RED&&this._delayedInit?this._delayedInit.dispatch(f):this._processUser(e),this._dispatcher.fire(d.INIT,e,!0)})).catch((()=>{this._delayedInit&&(this._dispatcher.fire(d.INIT,{},!0),this._delayedInit.dispatch(f))}))):this._dispatcher.fire(d.INIT,{},!0)}deactivate(){const{_dispatcher:e}=this;e.unlisten(o.Events.BADGE,this._onInit,this),e.unlisten(o.Events.LOGIN,this._reloadUser,this),e.unlisten(o.Events.LOGOUT,this._reloadUser,this),e.unlisten(o.Events.FORGET,this._forgetUserHandler,this),e.unlisten(d.RELOAD,this._reloadUser,this)}destroy(){this._delayedInit=null}_onInit(e){const{detail:t}=e||{},{state:n}=t||{};this._dotAnalytic.setPremium(this._isUserPremium()),this._disableDOTLazyLoading.dispatch(_),[p.LOGIN,p.LOGOUT].includes(n)?this._delayedInit?this._delayedInit.dispatch(g):this._reloadUser():this._forgetUser()}_forgetUser(){this.setState({user:null}),this._setDotAnalytic(null),this._dispatcher.fire(d.FORGET,{},!0),this._setDsAvailableCache(!1)}_forgetUserHandler(){this._userService.invalidateCache(),this._forgetUser()}_isUserPremium(){const{login:e}=this._window.getWindow();return!!(e&&e.current&&e.current.premium)&&e.current.premium}_loginUser(e){e instanceof r.ns.get("plugin.user.UserEntityDecorator")||this._forgetUser(),this.setState({user:e}),this._setDotAnalytic(e),this._dispatcher.fire(d.LOGIN,e,!0),this._setDsAvailableCache(!0)}_logoutUser(e){e instanceof r.ns.get("plugin.user.UserEntityDecorator")||this._forgetUser(),this.setState({user:null}),this._setDotAnalytic(e),this._dispatcher.fire(d.LOGOUT,e,!0),this._setDsAvailableCache(!0)}_processUser(e){const{loginStatus:t}=e||{};switch(t){case m.GREEN:this._loginUser(e);break;case m.ORANGE:this._logoutUser(e);break;default:this._forgetUser()}}_reloadUser(){this._userService.invalidateCache(),this._userService.get().then((e=>this._processUser(e))).catch((()=>this._forgetUser()))}_setDotAnalytic(e){const{_dotAnalytic:t}=this;e instanceof r.ns.get("plugin.user.UserEntityDecorator")?(t.setRusId(e.rusId),t.setPremium(this._isUserPremium()),t.setLoginState(e.loginStatus)):(t.setRusId(null),t.setPremium(!1),t.setLoginState(m.RED)),this._disableDOTLazyLoading.dispatch(y)}_setDsAvailableCache(e){this._cache.set(h,e,1/0)}}n.$registerImaPlugin=e=>{e.namespace("plugin.user"),e.namespace("plugin.user.UserEntity"),e.plugin.user.UserEntity=l,e.namespace("plugin.user.UserEntityDecorator"),e.plugin.user.UserEntityDecorator=c},n.Events=d,n.LoginState=p,n.LoginStatus=m,n.UserEntity=l,n.UserEntityDecorator=c,n.UserExtension=b,n.UserService=u,n.initBind=()=>{}},{"@cns/rest-api-client":76,"@ima/core":81,"@ima/plugin-loading-manager":106,"@ima/plugin-login":112,"@ima/plugin-traffic":153}],75:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dist/main":74,dup:8}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/helpers"),r=e("@ima/plugin-rest-client"),s=e("@ima/plugin-shared-cache");var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);function a(e){const t=function(e){return Array.from(new Set(e)).sort().reduce(((e,t,n,i)=>{if(n>0){const r=i[n-1];-1===t.lastIndexOf(r,0)&&e.push(r)}return n===i.length-1&&e.push(t),e}),[])}(e);return l(t.map((e=>e.split(".")))).join(",")}function l(e){const t=e.reduce(((e,t)=>{const n=t.shift();let i=[];return e.has(n)&&(i=e.get(n)),e.set(n,[...i,t]),e}),new Map);return Array.from(t).map((([e,t])=>{if(1===t.length)return[e,...t[0]].join(".");{const n=l(t);return e+"."+(1===n.length?n[0]:"("+n.join(",")+")")}}))}function c(e,t,n,...i){let r=null;for(let s=0;s<e.length;s++){if(r&&(t=t[r]),Array.isArray(t)){t.forEach(((r,o)=>c(e.slice(s),t[o],n,...i))),r=null;break}const o=e[s];if(t!==Object(t)||!(o in t)){r=null;break}r=o}r&&function(e,t,n,...i){const r=e[t];Array.isArray(r)?r.forEach(((r,s)=>{e[t][s]=n(r,...i)})):e[t]=n(r,...i)}(t,r,n,...i)}class u{static addEmbeddedParamToURL(e,t){return e.search("embedded=")>=0?e.replace(/(embedded=)[^&#]*/,"$1"+t):`${e+=e.indexOf("?")>-1?"&":"?"}embedded=${t}`}static getResourceUrlWithEmbeds(e,t){const n=a(t);return u.addEmbeddedParamToURL(e,n)}constructor(e,t,n,i){this._httpAgent=e,this._cache=t,this._linkGenerator=n,this._httpConfig=i}createEmbeddedEntityCacheRecord(e,t,n){const{resource:i,field:r}=t,s=i?n[i.idFieldName]:null;if(!s)return;let o=this._linkGenerator.createLink(null,i,s,{},e.serverConfiguration);const a=this._getEmbedsForEmbeddedEntity(e,r);a.length&&(o=u.getResourceUrlWithEmbeds(o,a));const l={embedded:e.resource.resourceName,origin:e.url};return this._storeEntityInCache(e,i,n.$serialize(),o,l)}createEntityCacheRecord(e,t,n){const{request:i}=e;return!!this._shouldCacheRequest(i)&&(this._storeEntityInCache(i,i.resource,t,null,n),!0)}getEmbeddedEntityData(e,t,n){const i=this._getSingleEmbeddedEntityFromCache(t,n,e);return i&&i.body?i.body:e}getEntityCacheRecord(e){if(!this._shouldCacheRequest(e))return null;let{resource:t,method:n,url:i,data:r}=e;if(t.embeds&&t.embeds.length){const e=t.embeds.map((e=>e.field)),s=u.getResourceUrlWithEmbeds(i,e);if(i!==s){const e=this._cache.get(this._httpAgent.getCacheKey(n.toLowerCase(),s,r));if(e)return e}}return this._cache.get(this._httpAgent.getCacheKey(n.toLowerCase(),i,r))}_getEmbedsForEmbeddedEntity(e,t){if("embedded"in e.parameters){const n=String(e.parameters.embedded).split(",");return this._getEmbedsForField(n,t)}return[]}_getEmbedsForField(e,t){if(e&&e.length){const n=t+".";return e.filter((e=>0===e.lastIndexOf(n,0))).map((e=>e.replace(n,"")))}return[]}_getSingleEmbeddedEntityFromCache(e,t,n){const{resource:{embeds:i}}=e,r=i.map((e=>e.field)),{resource:s,field:o}=t,{method:a,serverConfiguration:l}=e;let c=this._linkGenerator.createLink(null,s,n,{},l);const d=this._getEmbedsForField(r,o);if(d.length){const t=this._getEmbedsForEmbeddedEntity(e,o),n=u.getResourceUrlWithEmbeds(c,t);if(c=u.getResourceUrlWithEmbeds(c,d),c!==n){const e=this._cache.get(this._httpAgent.getCacheKey(a.toLowerCase(),n,null));if(e)return e}}return this._cache.get(this._httpAgent.getCacheKey(a.toLowerCase(),c,null))}_getTTLFromRequest(e){let{ttl:t}=e.options;if(void 0===t){const{defaultRequestOptions:e}=this._httpConfig||{};e&&"ttl"in e&&(t=e.ttl)}return t}_shouldCacheRequest(e){let{cache:t}=e.options;if(void 0===t){const{defaultRequestOptions:e}=this._httpConfig||{};e&&"cache"in e&&(t=e.cache)}return t}_storeEntityInCache(e,t,n,i=null,r={}){let{url:s,method:o,data:a}=e;o=o.toLowerCase(),s=i||s,e.resource!==t&&(a=null);const l=this._httpAgent.getCacheKey(o,s,a),c={status:200,body:n,params:{method:o,url:s,data:a,transformedUrl:s},headers:{},cached:!0};return this._cache.set(l,c,this._getTTLFromRequest(e)),l}}class d{get nextItemsExist(){return!!this._items.length&&this._items[this._items.length-1]._meta.nextItemExists}get offset(){return this._items.length?this._items[0]._meta.offset:0}get previousItemsExist(){return!!this._items.length&&this._items[0]._meta.previousItemExists}constructor(...e){this.length=e.length,this._items=e.slice();for(let e=0;e<this.length;e++)Object.defineProperty(this,e,{enumerable:!0,get:()=>this._items[e],set:t=>{this._items[e]=t}});this.constructor===d&&(Object.freeze(this._items),Object.freeze(this))}concat(...e){let t=e.map((e=>e instanceof d?e._items:e));return new d(...this._items.concat(...t))}filter(e,t){return new d(...Array.prototype.filter.call(this,e,t))}find(e,t=null){return this._items.find(((t,n)=>e(t,n,this)),t)}item(e){if("number"!=typeof e||Math.floor(e)!==e)throw new TypeError("The index must be a non-negative integer within the index's bounds, "+e+" was provided");if(e<0||e>=this.length)throw new Error("The index must be within the bounds of this list ([0, "+this.length+")), "+e+" was provided");return this._items[e]}[Symbol.iterator](){return new p(this)}map(e,t){return new d(...Array.prototype.map.call(this,e,t))}slice(e=0,t=this.length){return new d(...this._items.slice(e,t))}toArray(){return this._items.slice()}}class p{constructor(e){this._list=e,Object.defineProperty(this,"_list",{enumerable:!1,writable:!1}),this._index=0,Object.defineProperty(this,"_list",{enumerable:!1}),Object.seal(this)}next(){if(this._index>=this._list.length)return{done:!0,value:void 0};let e={done:this._index>=this._list.length,value:this._list[this._index]};return this._index++,e}}function m(e){let t=e.split(" "),n=t[0].split("-"),i=t[1].split(":");return new Date(n[0],n[1]-1,n[2],i[0],i[1],i[2],0)}function h(e){if(!e)return e;let t=r(e.getHours()),n=r(e.getMinutes()),i=r(e.getSeconds());return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+` ${t}:${n}:${i}`;function r(e,t=2){let n=`${e}`;for(;n.length<t;)n=`0${n}`;return n}}const g={dataFieldName:null,serialize:h,deserialize:e=>e?m(e):new Date},f={dataFieldName:null,serialize:h,deserialize:e=>e?m(e):e},_=Symbol("idParameterName"),y=Symbol("idParameterNameConfigured"),b=Symbol("embeds"),v=Symbol("embedsConfigured");class C extends r.AbstractEntity{static get embeds(){return this[v]?this[b]:[]}static set embeds(e){if(this[v])throw new TypeError("The embeds property cannot be reconfigured");this[b]=e,this[v]=!0}static get idParameterName(){if(!this[y])throw new Error("The idParameterName is abstract and must be overridden");return this[_]}static set idParameterName(e){if(this[y])throw new TypeError("The idParameterName property cannot be reconfigured");this[_]=e,this[y]=!0}}class w extends r.ResponsePostProcessor{constructor(e){super(),this._embedsCache=e,this._debugInfo={}}process(e){let{request:t,body:n,cached:i}=e;this._debugInfo.embeds={},n=o.default.clone(n);const s=o.default.clone(n);return this._process(t,n,s,i),i=this._embedsCache.createEntityCacheRecord(e,s,this._debugInfo),this._debugInfo={},new r.Response(Object.assign({},e,{body:n,cached:i}))}_createEmbeddedEntity(e,t){return e?Reflect.construct(e,[t]):t}_getEntityCacheValue(e,t,n){const i=this._processEmbeddedEntity(e,t,n,!1);return i instanceof C?i.$serialize():i}_process(e,t,n,i){const{embeds:r}=e.resource;r.sort(((e,t)=>e.field<t.field?1:-1));for(const s of r){let{field:r,cache:o=!0}=s;i&&(o=!1);const a=r.split(".");c(a,t,this._processEmbeddedEntity.bind(this),e,s,o),c(a,n,this._getEntityCacheValue.bind(this),e,s)}}_processEmbeddedEntity(e,t,n,i){const{field:r,inline:s,resource:o}=n;if(e!==Object(e))return e;if(!o)return e;let a=this._createEmbeddedEntity(o,e);return i&&this._embedsCache.createEmbeddedEntityCacheRecord(t,n,a),s?a:a[o.idFieldName]}}class E extends r.RequestPreProcessor{constructor(e){super(),this._embedsCache=e,Object.freeze(this)}process(e){const t=this._getRequestEmbedFields(e),n=0===t.length?this._modifyRequestToExcludeEmbeds(e):this._modifyRequestToIncludeEmbeds(e,t),i=this._embedsCache.getEntityCacheRecord(n);return i?this._constructResponseFromCache(n,t,i):n}_constructResponseFromCache(e,t,n){const{embeds:i}=e.resource,{status:s,headers:a,cached:l}=n,u=o.default.clone(n.body);if(i.length){i.sort(((e,t)=>e.field<t.field?1:-1));for(const n of i)t.includes(n.field)&&!n.inline&&this._isEmbedCached(n)&&c(n.field.split("."),u,this._embedsCache.getEmbeddedEntityData.bind(this._embedsCache),e,n)}return new r.Response({status:s,headers:a,body:u,cached:l,request:e})}_getRequestEmbedFields(e){const t=e.resource.embeds?e.resource.embeds.map((e=>e.field)):[];if("embedded"in e.parameters){const n=String(e.parameters.embedded);return n.length?n.split(",").filter((e=>t.includes(e))):[]}return t}_isEmbedCached(e){return e.cache||void 0===e.cache}_modifyRequestToExcludeEmbeds(e){const{url:t,parameters:n}=e,i=Object.assign({},n);return delete i.embedded,new r.Request(Object.assign({},e,{parameters:i,url:t.replace(/embedded=&?/,"").replace(/(&|\?)$/,"")}))}_modifyRequestToIncludeEmbeds(e,t=[]){const{url:n,parameters:i}=e,s=Object.assign({},i,{embedded:a(t)}),o=u.addEmbeddedParamToURL(n,s.embedded);return o.length,new r.Request(Object.assign({},e,{parameters:s,url:o}))}}class S extends r.ResponsePostProcessor{static get $dependencies(){return["$Settings.plugin.cns.restApiClient"]}constructor(e){super(),this._selectedHeaders=e.headersToBody,Object.freeze(this)}process(e){if(!e.body)return e;let t={},n=0;return this._selectedHeaders.forEach((i=>{e.headers[i]&&"string"==typeof i&&(t[i.toLowerCase()]=e.headers[i],n++)})),n>0?new r.Response(Object.assign({},e,{body:Object.assign({},e.body,{_headers:t})})):e}}class T extends r.ResponsePostProcessor{constructor(){super(),Object.freeze(this)}process(e){if(!(e.body&&e.body._meta&&e.body._items instanceof Array))return e;if("_items,_meta"!==Object.keys(e.body).sort().join(","))return e;let t=e.body._meta,n=e.body._items.map(((e,n,i)=>Object.assign({},e,{_meta:Object.freeze(Object.assign({},t,{offset:t.offset+n,previousItemExists:n>0||t.previousItems,nextItemExists:n<i.length-1||t.nextItems}))})));return new r.Response(Object.assign({},e,{body:n}))}}class P extends r.ResponsePostProcessor{constructor(){super(),Object.freeze(this)}process(e){if(!(e.body&&e.body._meta instanceof Object))return e;let t={},n=e.body._meta;for(let e of Object.keys(n)){let i,r=n[e];switch(typeof r){case"number":case"string":i=`${r}`;break;default:i=JSON.stringify(r)}t[this._generateHeaderName(e)]=i}return new r.Response(Object.assign({},e,{headers:Object.assign({},e.headers,t)}))}_generateHeaderName(e){let t="",n=!0;for(let r=0;r<e.length;r++){let s=e.charAt(r);if(n){if(i(s)){t+=s.toLowerCase();continue}n=!1}i(s)?(t+=`-${s.toLowerCase()}`,n=!0):t+=s}return`x-meta-${t}`;function i(e){return e===e.toUpperCase()}}}class x extends r.Configurator{constructor(e,t,n){super(),this._httpAgent=e,this._cache=t,this._apiRootUrl=n,this._sharedCache=s.SharedCache.getCache("CNS REST API client"),this._rootResponseStorageFile="./rest-api-root.json",Object.freeze(this)}getConfiguration(){let t=`${this._apiRootUrl}`;if(this._sharedCache.has(this._apiRootUrl)){let e=this._sharedCache.get(this._apiRootUrl),n=this._httpAgent.getCacheKey("get",t,{});return this._cache.set(n,{status:200,body:{_links:e.links},params:{method:"get",url:t,transformedUrl:t,data:{}},headers:{},cached:!0}),Promise.resolve(e)}return this._httpAgent.get(t,{}).then((t=>{let n={apiRoot:this._apiRootUrl,links:t.body._links};this._sharedCache.set(this._apiRootUrl,n);let i=this._rootResponseStorageFile;if("undefined"==typeof window)try{e("fs").writeFileSync(i,JSON.stringify(t,null,4))}catch(e){console.error(`Cannot store the server's response in ${i}`,e)}return n}))}}class I extends r.AbstractRestClient{constructor(e,t,n,i,r,s){super(e,new x(e,t,n),i,r,s),this._cache=t,this._internalCacheOfPromises=new Map}invalidateCache(e,t,n=null,i=null,r={},s=null){const o=this._generateUrl(s,t,n,r),a=this._httpAgent.getCacheKey(e,o,i);this._cache.delete(a)}_createRequest(e,t,n,i,s,o,a){return a=Object.assign({cache:i===r.HttpMethod.GET},a),super._createRequest(e,t,n,i,s,o,a)}_executeRequest(e){const{method:t,url:n,data:i}=e,r=this._httpAgent.getCacheKey(t.toLowerCase(),n,i);if(this._internalCacheOfPromises.has(r))return this._internalCacheOfPromises.get(r);const s=super._executeRequest(e).then((e=>(this._internalCacheOfPromises.delete(r),e)),(e=>{throw this._internalCacheOfPromises.delete(r),e}));return this._internalCacheOfPromises.set(r,s),s}_executeRequestUsingHttpAgent(e){const t=e.options.cache;return e=new r.Request(Object.assign({},e,{options:Object.assign({},e.options,{cache:!1})})),super._executeRequestUsingHttpAgent(e).then((n=>(e=new r.Request(Object.assign({},n.request,{options:Object.assign({},n.request.options,{cache:t})})),new r.Response(Object.assign({},n,{request:e})))))}}class A extends r.AbstractResource{static get $dependencies(){return[I]}extractId(e){return parseInt(e.split("-").pop())}}class k extends r.LinkGenerator{constructor(){super(),Object.freeze(this)}createLink(e,t,n,i,r){let s=Object.assign({},i);n&&(s[t.idParameterName]=n);let o=Object.keys(s),a=r.apiRoot;if(!r.links[t.resourceName])throw new Error(`The resource ${t.resourceName} is not configured, cannot generate a URL`);let l=r.links[t.resourceName];l instanceof Array||(l=[l]);let c=this._getBestMatchingLink(l,o);return this._processLink(c,s,a)}_clearNotDefinedParameters(e){let t=Object.assign({},e);for(const e of Object.keys(t))(null===t[e]||void 0===t[e]||Array.isArray(t[e])&&0===t[e].length)&&delete t[e];return t}_flatObject(e){function t(e,n,i,r=""){const s=[r,n].filter((e=>e)).join(".");return null===i||"object"!=typeof i||Array.isArray(i)?Object.assign(e,{[s]:i}):Object.keys(i).reduce(((e,n)=>t(e,n,i[n],s)),e)}return Object.keys(e).reduce(((n,i)=>t(n,i,e[i])),{})}_getBestMatchingLink(e,t){let n=null,i=-1;for(let r of e){let e=r.variables||[],s=0;for(let n of e)t.indexOf(n)>-1&&s++;s>i&&(n=r,i=s)}return n}_hasObjectAsValue(e){for(const t of Object.keys(e))if(null!==e[t]&&"object"==typeof e[t]&&!Array.isArray(e[t]))return!0;return!1}_processLink(e,t,n){let i=n+e.href,s=e.variables||[],o=Object.assign({},t);for(let e of s){let n=t[e]||"";i=i.replace(`{${e}}`,encodeURIComponent(n)),delete o[e]}if(o=this._clearNotDefinedParameters(o),Object.keys(o).length){if(o.filter&&(o.filter=JSON.stringify(o.filter)),this._hasObjectAsValue(o)&&(o=this._flatObject(o)),!this._validateProjection(o))throw new Error(`The ${o.projection} contains both positive and negative projections, which cannot be used together.`);this._stringifyArraysOfObjects(o),i+=i.indexOf("?")>-1?"&":"?",i+=r.LinkGenerator.encodeQuery(o)}return i}_stringifyArraysOfObjects(e){for(const t of Object.keys(e))null!==e[t]&&Array.isArray(e[t])&&e[t].length>0&&e[t].every((e=>"object"==typeof e))&&(e[t]=JSON.stringify(e[t]))}_validateProjection(e){if(e.projection&&"string"==typeof e.projection){const t=e.projection.split(",");return!!(t.every((e=>"-"!==e.charAt(0)))^t.every((e=>"-"===e.charAt(0))))}return!0}}const R=A.$dependencies;n.$registerImaPlugin=()=>{},n.AbstractEntity=C,n.AbstractService=A,n.EmbedsCache=u,n.EmbedsPostProcessor=w,n.EmbedsPreProcessor=E,n.HeadersToBodyPostProcessor=S,n.List=d,n.ListInliningPostProcessor=T,n.ResponseMetaHeaderGeneratorPostProcessor=P,n.RestClient=I,n.RestClientConfigurator=x,n.RestClientLinkGenerator=k,n.dateMapper=g,n.dateMapperNullable=f,n.defaultDependencies=R,n.defaultToArray={dataFieldName:null,deserialize:e=>e||[],serialize:e=>e}},{"@ima/helpers":77,"@ima/plugin-rest-client":133,"@ima/plugin-shared-cache":145,fs:163}],77:[function(e,t,n){"use strict";const i=e("clone");function r(e,t,n=null){let i=[];for(const s of Object.keys(t)){const o=t[s],a=n?n+"."+s:s;i.push(a),o instanceof Array?e[s]=o.slice():o instanceof Object&&!(o instanceof Function)?(e[s]instanceof Object||(e[s]={}),i=i.concat(r(e[s],o,a))):e[s]=o}return i}function s(e,...t){for(let n of t)r(e,n);return e}t.exports={assignRecursively:s,assignRecursivelyWithTracking:function(e){return function(t,...n){let i=[];for(const e of n)i=i.concat(r(t,e));t.__meta__ instanceof Object||(t.__meta__={});for(const n of i)t.__meta__[n]=e;return t}},deepFreeze:function e(t){if(!(t instanceof Object))return t;for(let n of Object.keys(t))e(t[n]);return Object.freeze(t)},allPromiseHash:function(e){let t=Object.keys(e),n=t.map((t=>Promise.resolve(e[t])));return Promise.all(n).then((e=>{let n={};for(let i of t)n[i]=e.shift();return n}))},escapeRegExp:function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")},resolveEnvironmentSetting:function(e={},t="production"){let n=e.prod||e.production||{},i=e[t];return"prod"!==t&&"production"!==t&&i&&s(n,i),n},clone:i}},{clone:165}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("@ima/plugin-logger"),r=e("@ima/core"),s=e("@ima/plugin-useragent");var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(e("easy-ease"));class a{constructor(e,t,n,i=0){this.red=e,this.green=t,this.blue=n,this.alpha=i}toHex(e=!1){return(e?"":"#")+(("0"+this.red.toString(16)).slice(-2)+("0"+this.green.toString(16)).slice(-2)+("0"+this.blue.toString(16)).slice(-2)).toUpperCase()}}const l=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/,c=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+(\.\d+)?)\)$/,u=/^#?(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|([0-9A-F])([0-9A-F])([0-9A-F]))$/i,d=["className","properties","settings","onShowLightbox"],p=0,m=1,h=["atom","molecule","organism","template","page"];class g{get isRejected(){return this._isRejected}get isResolved(){return this._isResolved}constructor(){this._isResolved=!1,this._isRejected=!1,this.promise=new Promise(((e,t)=>{this._resolveFunc=e,this._rejectFunc=t}))}reject(e){this._rejectFunc(e),this._isRejected=!0}resolve(e){this._resolveFunc(e),this._isResolved=!0}}g.Promise=Promise;const f=/^(https?:)?\/\/(([^:/?#]*)(?::([0-9]+))?)(\/*[^?#]*)(\?[^#]*|)(#.*|)$/;class _{constructor(e){this._router=e}concatQuery(e,t){if(!t)return e;let n=this.parseUrl(e),i=this.parseQuery(n.search),r=Object.assign({},i,t);return`${this._getString(n.protocol)}//${this._getString(n.host)}${this._getString(n.pathname)}${this._getString(this.generateQueryToUrl(r))}${this._getString(n.hash)}`}generateHashToUrl(e){return this._generateParamsToUrl(e,"#")}generateQueryToUrl(e){return this._generateParamsToUrl(e,"?")}getCanonicalUrl(e){let t=this.parseUrl(e);return`${this._getString(t.protocol)}//${this._getString(t.host)}${this._getString(t.pathname)}`}getUrl(){return console.warn("DeprecationWarning: You are still using LinkHelper.getUrl() method, which will be removed in future releases. It should be replaced by calling router.getUrl() directly on your application's router."),this._router.getUrl()}parseQuery(e="="){return e.substr(1).split("&").reduce(((e,t)=>{let n=t.split("=");if(""!==n[0])try{e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}catch(e){}return e}),{})}parseUrl(e){let t=e.match(f);return t?{protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5]||"/",search:t[6],hash:t[7]}:{protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,search:void 0,hash:void 0}}removeQueryParameter(e,t=this.getUrl()){if(i.throwIf(!e||"string"!=typeof e,new TypeError("Argument parameter must be a string.")),i.throwIf("string"!=typeof t,new TypeError("Argument url must be a string.")),!e)return t;const n=this.parseUrl(t),r=this.parseQuery(n.search);let s=Object.assign({},r);return e in s&&delete s[e],`${this._getString(n.protocol)}//${this._getString(n.host)}${this._getString(n.pathname)}${this._getString(this.generateQueryToUrl(s))}${this._getString(n.hash)}`}resolveRelativeUrl(e){return"string"==typeof e&&e.startsWith("/")&&!e.includes("//")?`${this._router.getDomain()}${e}`:e}sparselyCompareUrls(...e){if(e.some((e=>!e||"string"!=typeof e)))return!1;if(e.length<=1)return!1;const t=e.map((e=>e.replace("www.",""))),n=t.shift(),{hostname:i,pathname:r}=this.parseUrl(n);return!(!i||!r)&&t.every((e=>{const{hostname:t,pathname:n}=this.parseUrl(e);return t&&n&&i===t&&r===n}))}validateUrl(e){return f.test(e)}_generateParamsToUrl(e,t){let n="";for(let t of Object.keys(e))null!==e[t]&&(e[t]?n+=`&${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`:n+=`&${encodeURIComponent(t)}`);return""!==n&&(n=t+n.substr(1)),n}_getString(e){return e||""}}const y=/@[a-z0-9.]*/gi,b=/^@[a-z0-9.]*$/i,v={"@@":"@","||||":"||"},C="@{index}";n.$registerImaPlugin=function(){},n.ColorHelper=class{static get $dependencies(){return[]}isValidColor(e){return this.isValidRGB(e)||this.isValidRGBA(e)||this.isValidRGBHex(e)}isValidRGB(e){return l.test(e)}isValidRGBA(e){return c.test(e)}isValidRGBHex(e){return u.test(e)}parseColor(e){if(this.isValidRGB(e)){const t=e.match(l).slice(1).map((e=>parseInt(e)));return new a(...t)}if(this.isValidRGBA(e)){const t=e.match(c).slice(1).map(((e,t)=>t<3?parseInt(e):parseFloat(e)));return new a(...t)}if(this.isValidRGBHex(e)){const t=e.match(u).slice(2).map(((e,t)=>t<3?"string"==typeof e?parseInt(e,16):null:"string"==typeof e?parseInt(e+e,16):null)).filter((e=>"number"==typeof e));return new a(...t)}throw new Error(`Unsupported color representation: ${e}`)}},n.ComponentDependencyHelper=class{static get $dependencies(){return[]}getComponentDependency(e,t,n=d){i.errorIf("function"!=typeof e&&!("object"==typeof e&&"function"==typeof e.render),new TypeError("Argument componentConstructor must be a valid React component.")),i.errorIf(!t||"object"!=typeof t,new TypeError("Argument actualProps must be an object.")),i.errorIf(!n||!Array.isArray(n),new TypeError("Argument ignoredPropNames must be an array."));const{requiredProps:r}=e;return r?Array.isArray(r)?r.filter((e=>-1===n.indexOf(e))).reduce(((e,n)=>Object.assign({},e,{[n]:t[n]})),{}):(i.error(new TypeError("Argument requiredProps must be an array.")),{}):this.__DEPRECATED__getComponentDependency(e,t,n)}__DEPRECATED__getComponentDependency(e,t,n){let{defaultProps:r}=e;if(!r)return{};const s=Object.keys(r).filter((e=>-1===n.indexOf(e)));return 0===s.length?{}:(i.warn(`DeprecationWarning: Use of defaultProps in ComponentDependencyHelper.getComponentDependency() in '${e.name||e.render&&e.render.displayName}' component is now deprecated. Please use requiredProps instead.`),s.reduce(((e,n)=>{let i=t[n];return i||(i=r[n]),Object.assign({},e,{[n]:i})}),{}))}},n.ComponentHelper=class{static get $dependencies(){return["$Window"]}constructor(e){this._sequentialUId=function*(){let e=0;for(;;)e===1/0&&(e=0),yield e++}(),this._window=e}debounce(e,t,n){let i=null;return n&&(e=e.bind(n)),function(...n){const r=n[0];r&&r.persist&&r.persist(),clearTimeout(i),i=setTimeout((()=>e(...n)),t)}}didEventSelectText(e){if(!this._window.isClient())return!1;const t=this._window.getWindow().getSelection().toString();return"click"===e.type&&t&&t.length>0}findClosest(e,t){if(!this._window.isClient())return null;if(Element.prototype.closest)return t.closest(e);if(!this._window.getDocument().documentElement.contains(t))return null;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}nodeContains(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}sequentialUId(){return this._sequentialUId.next().value}shouldResultInNewWindow(e){let t=e.button===p,n=e.ctrlKey&&t,i=e.metaKey&&t;return!t||n||i}shouldResultInRedirect(e){return[p,m].includes(e.button)}willEventTriggerAction(e,t=["A","BUTTON","IFRAME","TWITTERWIDGET"]){return!!this._window.isClient()&&(t.includes(e.target.tagName)||t.some((t=>null!==this.findClosest(t,e.target))))}},n.ControllerHelper=class{static get $dependencies(){return["$Router"]}constructor(e){this._router=e}checkCurrentUrl(e,t){const n=this._router.getCurrentRouteInfo().route.getName(),i=this._router.link(n,e),r=this._router.getUrl().split("?")[0];return!(![void 0,"0","1"].includes(t.amp)||i!==r)}checkCurrentUrlAndRedirect(e,t,n=[]){if(!this.checkCurrentUrl(e,t)){const i=this.getValidUrl(e,t,n);throw new r.GenericError("Bad url redirect",{status:301,url:i})}}getValidUrl(e,t,n=[]){const i=this._router.getCurrentRouteInfo().route.getName();let r=Object.assign({},e.urlParameters);return(t.amp||""===t.amp)&&(r.amp="1"),n.forEach((e=>{t[e]&&(r[e]=t[e])})),this._router.link(i,r)}},n.CssRenderingHelper=class{static get $dependencies(){return["$Dispatcher","$RouterEvents","$Window"]}constructor(e,t,n){this._dispatcher=e,this._routerEvents=t,this._window=n,this._defaultOptions={amp:!0},this._skinConstants={},this._baseCss=[],this._inlineCss={},this._electronCss=[],this._skin=null,this._registeredComponents=new Map,this._registeredComponents.set("base",this._baseCss),this._registeredComponents.set("electron",this._electronCss),this._registeredComponents.set("atom",[]),this._registeredComponents.set("molecule",[]),this._registeredComponents.set("organism",[]),this._registeredComponents.set("template",[]),this._registeredComponents.set("page",[])}init(){this._dispatcher.listen(this._routerEvents.BEFORE_HANDLE_ROUTE,this.onRouteSwitched,this)}onRouteSwitched(){this._registeredComponents=new Map,this._registeredComponents.set("base",this._baseCss),this._registeredComponents.set("electron",this._electronCss),this._registeredComponents.set("atom",[]),this._registeredComponents.set("molecule",[]),this._registeredComponents.set("organism",[]),this._registeredComponents.set("template",[]),this._registeredComponents.set("page",[]),this._inlineCss={}}getConstant(e){let t,n,r=e.split(".");return this._skinConstants.hasOwnProperty(this._skin)&&(t=this._getConstantRecursive(this._skinConstants[this._skin],r)),n=this._getConstantRecursive(this._skinConstants,r),null==t&&null==n?(i.error(new Error(`Constant named ${r[0]} does not exists`)),null):(t||n).valueOf()}getRequiredCss(t,n=null){const i=n===Object(n)?n:this._defaultOptions;let r="",s={};if(this._registeredComponents.forEach((e=>{r+=e.filter((([,e])=>{for(let[t,n]of Object.entries(i))if(n!==e[t])return!1;return!0})).reduce(((e,[n])=>{let i="";return this._skin&&(i=this._getSkinFilepath(n)),(n in t||i in t||this._inlineCss.hasOwnProperty(n))&&!s[n]&&(t[n]&&(e+=t[n]),i&&t[i]&&(e+=t[i]),this._inlineCss.hasOwnProperty(n)&&(e+=this._inlineCss[n].join(" ")),s[n]=!0),e}),"")})),!this._window.isClient()){const t="uglifycss",{processString:n}=e(t);r=n(r)}return r}register(e,t=null){const n=t===Object(t)?t:this._defaultOptions;if(e&&"string"==typeof e){let t=this._getComponentCategory(e);if(this._isAllowedComponentCategory(t)){let i=this._transformNamespaceToFilepath(e);this._registeredComponents.get(t).push([i,n])}else i.warn("\n\t\t\t\t\tFailed attempt to register component's namespace to CssRenderingHelper.\n\t\t\t\t\tComponent namespace is not allowed.\n\t\t\t\t")}else i.warn(`\n\t\t\t\tFailed attempt to register component's namespace to CssRenderingHelper.\n\t\t\t\tExpected string, got ${e}. \n\t\t\t`)}registerInlineCss(e,t){if(i.throwIf(!e,new Error(`\n\t\t\t\tFailed attempt to register inline CSS by component's namespace to CssRenderingHelper.\n\t\t\t\tExpected string, got ${e}.\n\t\t\t`)),!t)return;let n=this._transformNamespaceToFilepath(e);this._inlineCss.hasOwnProperty(n)?this._inlineCss[n].push(t):this._inlineCss[n]=new Array(t)}setBaseCss(e){this._baseCss=e.map((e=>"string"==typeof e?[e,this._defaultOptions]:e)),this._registeredComponents.set("base",this._baseCss)}setDefaultOptions(e){this._defaultOptions=e}setElectronCss(e){this._electronCss=e.map((e=>"string"==typeof e?[e,this._defaultOptions]:e)),this._registeredComponents.set("electron",this._electronCss)}setSkin(e){this._skin=e}setSkinConstants(e){this._skinConstants=e}_getComponentCategory(e){return/(app|plugin.[a-zA-Z]+)\.(component|page|template)\.(\w+)/i.test(e)?["page","template"].includes(RegExp.$2)?RegExp.$2:RegExp.$3:"notFound"}_getConstantRecursive(e,t){return e.hasOwnProperty(t[0])?t.length>1?this._getConstantRecursive(e[t[0]],t.slice(0).splice(1)):e[t[0]]:null}_getSkinFilepath(e){let t=e.split("/").pop().split(".").shift();return this._skin&&(t+=`${this._skin.charAt(0).toUpperCase()+this._skin.slice(1)}.css`),e.replace(e.substr(e.lastIndexOf("/")+1,e.length),t)}_isAllowedComponentCategory(e){return h.indexOf(e)>-1}_transformNamespaceToFilepath(e){const t=e.split("."),n=t.pop(),i=n.charAt(0).toLowerCase()+n.slice(1)+".css";return t.push(i),t.join("/")}},n.DeferredPromise=g,n.DeviceHelper=class{static get $dependencies(){return[s.UserAgent]}constructor(e){this._userAgent=e}isAndroid(){return"Android"===this._userAgent.getOSFamily()}isDesktop(){return!this.isPortable()}isIOS(){return"iOS"===this._userAgent.getOSFamily()}isMobile(){return this.isPortable()&&!this.isTablet()}isPortable(){return this.isAndroid()||this.isIOS()||this.isWindowsPhone()}isTablet(){const e=this._userAgent.getUserAgent();return this.isPortable()&&/(tab|pad)/i.test(e)}isWindowsPhone(){return"Windows Phone"===this._userAgent.getOSFamily()}},n.ExtensionsHelper=class{constructor(...e){this._extensions=e}addExtensionsToController(e){for(let t of this._extensions)e.addExtension(t)}getExtensions(){return this._extensions}},n.LegacyBrowserDetector=class{static get $dependencies(){return[s.UserAgent]}constructor(e){this._userAgentHelper=e}isCrawlerBot(){return/(Googlebot|SeznamBot|Bingbot|Slurp|DuckDuckBot|Baiduspider|YandexBot)/.test(this._userAgentHelper.getUserAgent())}isLegacyClient(){const e=this._userAgentHelper.getName(),t=parseFloat(this._userAgentHelper.getVersion()),n=this._userAgentHelper.getOSFamily(),i=parseFloat(this._userAgentHelper.getOSVersion());return"IE"===e&&t<=10||"Android Browser"===e&&i<5||"Microsoft Edge"===e&&t<15||"string"==typeof e&&e.includes("Safari")&&t<11&&("iOS"===n||"OS X"===n)&&i<12}isOutDatedClient(){const e=this._userAgentHelper.getOSFamily(),t=this._userAgentHelper.getName(),n=parseFloat(this._userAgentHelper.getVersion());return"iOS"===e&&parseFloat(this._userAgentHelper.getOSVersion())<11||"Firefox"===t&&n<=51||"Microsoft Edge"===t&&15===Math.floor(n)||"IE"===t&&n>=11||"SznProhlizec"===t||"Windows Phone"===e||"unknown"===t}},n.LinkHelper=_,n.RegressionHelper=class{static get $dependencies(){return["$Router"]}constructor(e){this._router=e}isRegression(){let e=null;try{e=!!this._router.getCurrentRouteInfo().params.regression}catch(t){e=!1}return e}},n.Scroller=class{static get $dependencies(){return["$Window"]}constructor(e){this._window=e,this._cancelOnUserScroll=!0,this._onCompleteCallback=null,this._onComplete=this._onComplete.bind(this),this._scrollStepsSum=0,this._scrollThreshold=20}_onAnimationStep(e){if(!this._cancelOnUserScroll)return void this._window.scrollTo(0,Math.round(e));const t=Math.round(this._window.getScrollY());if(t>=this._scrollStepsSum-this._scrollThreshold&&t<=this._scrollStepsSum+this._scrollThreshold){const t=Math.round(e);this._window.scrollTo(0,t),this._scrollStepsSum=t}}_onComplete(){this._scrollStepsSum=0,this._onCompleteCallback&&"function"==typeof this._onCompleteCallback&&this._onCompleteCallback()}scrollToElement(e){if(!this._window.isClient())return;const{element:t,alignment:n,additionalOffset:i,startPosition:r,durationInMs:s,onCompleteCallback:a,cancelOnUserScroll:l}=e;"boolean"==typeof l&&(this._cancelOnUserScroll=l),"function"==typeof a&&(this._onCompleteCallback=a);const c=this._calculateScrollOffset(t,i,n);if(this._isValidNumber(c))if(0===s)this._window.scrollTo(0,c),this._onComplete();else{const e=this._isValidNumber(r)?r:this._window.getScrollY();if(e===c)return;this._scrollStepsSum=e,o.default({startValue:e,endValue:c,durationMs:this._isValidNumber(s)?s:500,onStep:e=>this._onAnimationStep(e),onComplete:this._onComplete})}}_calculateScrollOffset(e,t,n){if("string"==typeof e&&(e=document.querySelector(e)),!e)return 0;const i=document.body,r=document.documentElement,s=e.getBoundingClientRect(),o=r.clientHeight,a=Math.max(i.scrollHeight,i.offsetHeight,o,r.scrollHeight,r.offsetHeight);let l;t=t||0,l="bottom"===n?s.bottom-o:"middle"===n?s.bottom-o/2-s.height/2:s.top;const c=a-o;return Math.min(l+t+window.pageYOffset,c)}_isValidNumber(e){return"number"==typeof e&&!isNaN(e)}},n.StringReferencesHelper=class{static get $dependencies(){return[]}getReferenceData(e,t){let n;try{n=this._getReferenceData(e,t)}catch(e){return this._processError(e),null}return n}replaceKeywordsReferences(e,t){return Array.isArray(e)&&e.length?e.reduce(((e,n)=>{const i=this._findReferences(n);if(Array.isArray(i)&&i.length){const i=this.replaceReferences(n,t);i&&e.push(i)}else e.push(n);return e}),[]).join(", "):null}replaceReferences(e,t){const n=this._findAlternatives(e);let i;return n.some(((e,r,s)=>{i=e,i=this._translateIndexToSpecialExpressions(i);const o=this._findReferences(i);try{o.forEach((e=>{const n="("+this._escapeRegExp(e)+")(?=\\s|$|,|-|\\)|\\||\\.|/|:)",r=this._getReferenceData(e,t);i=i.replace(new RegExp(n,"g"),this._convertToString(r))}))}catch(e){return r===n.length-1&&this._processError(e),!1}return!(s.length-r>1&&""===i)}))?(i=this._translateSpecialExpressions(i),i):null}_convertToString(e){if("string"==typeof e)return e;try{return e.toString()}catch(t){throw new Error(`Value of type ${typeof e} cannot be converted to string.`)}}_escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}_findAlternatives(e){return this._translateSpecialExpressions(e,C).split("||")}_findReferences(e){return this._translateSpecialExpressions(e,"").match(y)||[]}_getReferenceData(e,t){if(!e.match(b))throw new Error(`Invalid reference ${e}.`);let n=e.replace(/^@/,"").split("."),i=Object.assign({},t);return n.forEach((t=>{if(Array.isArray(i)){if(isNaN(parseInt(t)))throw new Error(`Invalid token ${t} used to access an array in reference ${e}.`);i=i[t]}else if(i&&"object"==typeof i){if(!t)throw new Error(`Empty token in reference ${e}.`);if(!(t in i))throw new Error(`No data item for token ${t} from reference ${e}.`);i=i[t]}else if(t)throw new Error(`Token ${t} is probably not necessary in reference ${e} or invalid data.`)})),i}_processError(e){}_translateIndexToSpecialExpressions(e){let t=e;const n=Object.keys(v);return t=t.replace(new RegExp(this._escapeRegExp(C).replace("index","(\\d)"),"g"),((e,t)=>n[t]||e)),t}_translateSpecialExpressions(e,t=null){let n=e,i=0;for(let e in v)n=n.replace(new RegExp(this._escapeRegExp(e),"g"),"string"!=typeof t?v[e]:t===C?C.replace("index",i):t),i++;return n}},n.initBind=function(e,t){t.inject(_,["$Router"])}},{"@ima/core":81,"@ima/plugin-logger":80,"@ima/plugin-useragent":155,"easy-ease":166}],79:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],80:[function(e,t,n){arguments[4][71][0].apply(n,arguments)},{"./dist/main":79,dup:71}],81:[function(e,t,n){t.exports=e("./dist/ima.client.cjs.js")},{"./dist/ima.client.cjs.js":82}],82:[function(e,t,n){(function(t){(function(){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("@ima/helpers")),s=i(e("classnames")),o=i(e("react")),a=i(e("react-dom")),l=i(e("memoize-one")),c=new class{constructor(){this._modules=new Map,this._plugins=[]}set(e,t){this._modules.set(e,t),"function"==typeof t.$registerImaPlugin&&this._plugins.push({name:e,module:t}),$IMA.Loader.register(e,[],(e=>({setters:[],execute:()=>{e("default",t);for(let n of Object.keys(t))e(n,t[n])}})))}get(e,t){if(!this._modules.has(e)&&!t)throw new Error(`The module '${e}' is not registered.Add the module to vendors in build.js`);return this._modules.get(e)}clear(){return this._modules.clear(),this._plugins=[],this}bindToNamespace(e){let t=e.namespace("vendor");for(let n of this._modules.keys()){let i=this._modules.get(n);"function"==typeof i.$registerImaPlugin&&i.$registerImaPlugin(e),t[n]=i}}getImaPlugins(){return this._plugins}},u=new class{constructor(){}namespace(e){const t=this._resolvePathLevels(e);let n=this;for(const e of t)Object.prototype.hasOwnProperty.call(n,e)||(n[e]={}),n=n[e];return n}has(e){let t;try{t=void 0!==this.get(e)}catch(e){t=!1}return t}get(e){const t=this._resolvePathLevels(e);let n=this;for(let e of t){if(!n[e])return;n=n[e]}return n}set(e,t){const n=this._resolvePathLevels(e),i=n.pop();this.namespace(n.join("."))[i]=t}_resolvePathLevels(e){if(!e||"string"!=typeof e)throw Error("namespace.get: path is not type of string");return e.split(".")}};u.namespace("ima.core");class d{static get PLUGIN_BINDING_STATE(){return"plugin"}static get IMA_BINDING_STATE(){return"ima.core"}static get APP_BINDING_STATE(){return"app"}constructor(e){this._namespace=e,this._entries=new Map,this._bindingState=null,this._bindingPlugin=null}bind(e,t,n){let i=this._entries.get(t),r=this._entries.get(e),s=i||r;if(i&&!r&&n){let i=this._createEntry(t,n);return this._entries.set(e,i),this}if(s)this._entries.set(e,s),n&&this._updateEntryValues(s,t,n);else{let i=this._createEntry(t,n);this._entries.set(t,i),this._entries.set(e,i)}return this}constant(e,t){let n=this._createEntry((()=>t),[],{writeable:!1});return n.sharedInstance=t,this._entries.set(e,n),this}inject(e,t){let n=this._entries.get(e);return n?t&&this._updateEntryValues(n,e,t):(n=this._createEntry(e,t),this._entries.set(e,n)),this}provide(e,t,n){let i=this._entries.get(t);return i?(this._entries.set(e,i),n&&this._updateEntryValues(i,t,n)):(i=this._createEntry(t,n),this._entries.set(t,i),this._entries.set(e,i)),this}get(e){let t=this._getEntry(e);return null===t.sharedInstance&&(t.sharedInstance=this._createInstanceFromEntry(t)),t.sharedInstance}getConstructorOf(e){return this._getEntry(e).classConstructor}has(e){return this._entries.has(e)||!!this._getEntryFromConstant(e)||!!this._getEntryFromNamespace(e)||!!this._getEntryFromClassConstructor(e)}create(e,t){let n=this._getEntry(e);return this._createInstanceFromEntry(n,t)}clear(){return this._entries.clear(),this._bindingState=null,this._bindingPlugin=null,this}setBindingState(e,t=null){if(this._bindingState===d.APP_BINDING_STATE)throw new Error("ima.core.ObjectContainer:setBindingState The setBindingState() method  has to be called only by the bootstrap script. Other calls are not allowed.");this._bindingState=e,this._bindingPlugin=e===d.PLUGIN_BINDING_STATE?t:null}_getEntry(e){return this._entries.get(e)||this._getEntryFromConstant(e)||this._getEntryFromNamespace(e)||this._getEntryFromClassConstructor(e)}_updateEntryValues(e,t,n){e.classConstructor=t,e.dependencies=n}_createEntry(e,t,n){t&&0!==t.length||!Array.isArray(e.$dependencies)||(t=e.$dependencies);let i=this._bindingState;return this._bindingState===d.PLUGIN_BINDING_STATE&&(i=this._bindingPlugin),new p(e,t,i,n)}_createInstanceFromEntry(e,t=[]){if(0===t.length){t=[];for(let n of e.dependencies)["function","string"].indexOf(typeof n)>-1?t.push(this.get(n)):t.push(n)}return new(0,e.classConstructor)(...t)}_getEntryFromConstant(e){if("string"!=typeof e)return null;let t=e.split("."),n=this._entries.has(t[0])?this._entries.get(t[0]).sharedInstance:null,i=t.length;for(let e=1;e<i&&n;e++)n=n[t[e]];if(null!=n){let e=this._createEntry((()=>n),[],{writeable:!1});return e.sharedInstance=n,e}return null}_getEntryFromNamespace(e){if("string"!=typeof e||!this._namespace.has(e))return null;let t=this._namespace.get(e);if("function"==typeof t)return this._entries.has(t)?this._entries.get(t):this._createEntry(t);let n=this._createEntry((()=>t));return n.sharedInstance=t,n}_getEntryFromClassConstructor(e){if("function"==typeof e&&Array.isArray(e.$dependencies)){let t=this._createEntry(e,e.$dependencies);return this._entries.set(e,t),t}return null}}u.ima.core.ObjectContainer=d;class p{constructor(e,t,n,i){this.classConstructor=e,this.sharedInstance=null,this._options=i||{writeable:!0},this._referrer=n,this._dependencies=t||[],this._overrideCounter=0}set dependencies(e){this._dependencies=e,this._overrideCounter++}get dependencies(){return this._dependencies}get referrer(){return this._referrer}get writeable(){return this._options.writeable}}class m{init(){}add(){}use(){}remove(){}getPath(){}getUrl(){}getBaseUrl(){}getDomain(){}getHost(){}getProtocol(){}getCurrentRouteInfo(){}listen(){}unlisten(){}redirect(){}link(){}route(){}handleError(){}handleNotFound(){}isClientError(){}isRedirection(){}}u.namespace("ima.core");class h{constructor(e){this._oc=e,this._config={}}run(e){this._config=e,this._initSettings(),this._bindDependencies(),this._initServices(),this._initRoutes()}_initSettings(){let e={};this._config.plugins.concat([{name:d.APP_BINDING_STATE,module:this._config}]).filter((e=>"function"==typeof e.module.initSettings)).forEach((t=>{let n=t.module.initSettings(u,this._oc,this._config.settings),i=r.resolveEnvironmentSetting(n,this._config.settings.$Env);r.assignRecursivelyWithTracking(t.name)(e,i)})),this._config.bind=Object.assign(this._config.bind||{},e,this._config.settings)}_getEnvironmentSetting(e){let t=this._config.settings.$Env,n=e[t]||{};if("prod"!==t){let t=e.prod;r.assignRecursively(t,n),n=t}return n}_bindDependencies(){this._oc.setBindingState(d.IMA_BINDING_STATE),this._config.initBindIma(u,this._oc,this._config.bind,d.IMA_BINDING_STATE),this._config.plugins.filter((e=>"function"==typeof e.module.initBind)).forEach((e=>{this._oc.setBindingState(d.PLUGIN_BINDING_STATE,e.name),e.module.initBind(u,this._oc,this._config.bind,e.name)})),this._oc.setBindingState(d.APP_BINDING_STATE),this._config.initBindApp(u,this._oc,this._config.bind,d.APP_BINDING_STATE)}_initRoutes(){let e=this._oc.get(m);this._config.initRoutes(u,this._oc,this._config.routes,e)}_initServices(){this._config.initServicesIma(u,this._oc,this._config.services),this._config.plugins.filter((e=>"function"==typeof e.module.initServices)).forEach((e=>{e.module.initServices(u,this._oc,this._config.services)})),this._config.initServicesApp(u,this._oc,this._config.services)}}u.ima.core.Bootstrap=h;class g{clear(){}has(){}get(){}set(){}delete(){}disable(){}enable(){}serialize(){}deserialize(){}}class f{constructor(e,t){this._value=e,this._ttl=t,this._created=Date.now()}isExpired(){return Date.now()>this._created+this._ttl}serialize(){return{value:this._value,ttl:this._ttl}}getValue(){return this._value}}class _{static get $dependencies(){return[]}createCacheEntry(e,t){return new f(e,t)}}class y extends g{constructor(e,t,n,i={ttl:3e4,enabled:!1}){super(),this._cache=e,this._factory=t,this._Helper=n,this._ttl=i.ttl,this._enabled=i.enabled}clear(){this._cache.clear()}has(e){if(!this._enabled||!this._cache.has(e))return!1;let t=this._cache.get(e);return!(!t||t.isExpired())||(this.delete(e),!1)}get(e){if(this.has(e)){let t=this._cache.get(e).getValue();return this._clone(t)}return null}set(e,t,n=null){if(!this._enabled)return;let i=this._factory.createCacheEntry(this._clone(t),n||this._ttl);this._cache.set(e,i)}delete(e){this._cache.delete(e)}disable(){this._enabled=!1,this.clear()}enable(){this._enabled=!0}serialize(){let e={};for(let t of this._cache.keys()){const n=this._cache.get(t);if(n instanceof f){const i=n.serialize();i.ttl===1/0&&(i.ttl="Infinity"),e[t]=i}}return JSON.stringify(e).replace(/<\/script/gi,"<\\/script")}deserialize(e){for(let t of Object.keys(e)){let n=e[t];"Infinity"===n.ttl&&(n.ttl=1/0),this.set(t,n.value,n.ttl)}}_canSerializeValue(e){if(e instanceof Date||e instanceof RegExp||e instanceof Promise||"function"==typeof e)return console.warn("The provided value is not serializable: ",e),!1;if(!e)return!0;if(e.constructor===Array)for(let t of e)if(!this._canSerializeValue(t))return console.warn("The provided array is not serializable: ",e),!1;if("object"==typeof e)for(let t of Object.keys(e))if(!this._canSerializeValue(e[t]))return console.warn("The provided object is not serializable due to the following property: ",t,e),!1;return!0}_clone(e){return null===e||"object"!=typeof e||e instanceof Promise?e:this._Helper.clone(e)}}class b{init(){}destroy(){}activate(){}deactivate(){}load(){}update(){}setState(){}getState(){}beginStateTransaction(){}commitStateTransaction(){}cancelStateTransaction(){}addExtension(){}getExtensions(){}setMetaParams(){}setRouteParams(){}getRouteParams(){}setPageStateManager(){}getHttpStatus(){}}class v extends b{constructor(e,t,n,i,r){super(),this._controller=e,this._metaManager=t,this._router=n,this._dictionary=i,this._settings=r}init(){this._controller.init()}destroy(){this._controller.destroy()}activate(){this._controller.activate()}deactivate(){this._controller.deactivate()}load(){return this._controller.load()}update(e={}){return this._controller.update(e)}setReactiveView(e){this._controller.setReactiveView(e)}setState(e){this._controller.setState(e)}getState(){return this._controller.getState()}beginStateTransaction(){this._controller.beginStateTransaction()}commitStateTransaction(){this._controller.commitStateTransaction()}cancelStateTransaction(){this._controller.cancelStateTransaction()}addExtension(e){return this._controller.addExtension(e),this}getExtensions(){return this._controller.getExtensions()}setMetaParams(e){this._controller.setMetaParams(e,this._metaManager,this._router,this._dictionary,this._settings)}setRouteParams(e={}){this._controller.setRouteParams(e)}getRouteParams(){return this._controller.getRouteParams()}setPageStateManager(e){this._controller.setPageStateManager(e)}getHttpStatus(){return this._controller.getHttpStatus()}getMetaManager(){return this._metaManager}}class C{init(){}getLanguage(){}get(){}has(){}}function w(e,t=!0){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this.constructor===w)throw new TypeError("The ExtensibleError is an abstract class and must be extended before it can be instantiated.");Error.call(this,e),this.name=this.constructor.name,this.message=e,this._nativeError=new Error(e),this._nativeError.name=this.name,this._nativeError.columnNumber&&(this.lineNumber=this._nativeError.lineNumber,this.columnNumber=this._nativeError.columnNumber,this.fileName=this._nativeError.fileName),this._stack=null,this._dropInternalStackFrames=t}w.prototype=Object.create(Error.prototype),w.prototype.constructor=w,Object.defineProperty(w.prototype,"stack",{configurable:!0,enumerable:!1,get:function(){if(this._stack)return this._stack;let e=this._nativeError.stack;if("string"==typeof e){if(this._dropInternalStackFrames){let t=e.split("\n"),n=1,i=Object.getPrototypeOf(this);for(;i!==w.prototype;)i=Object.getPrototypeOf(i),n++;t.splice(1,n),this._stack=t.join("\n")}else this._stack=e;return this._stack}}});class E extends w{getHttpStatus(){}getParams(){}}class S extends E{constructor(e,t={},n=!0){super(e,n),this._params=t}getHttpStatus(){return this._params.status||500}getParams(){return this._params}}class T extends C{static get $dependencies(){return[]}constructor(){super(),this._language=null,this._dictionary=null}init(e){this._language=e.$Language,this._dictionary=e.dictionary}getLanguage(){return this._language}get(e,t={}){const n=this._getScope(e);if(!n)throw new S(`ima.core.dictionary.MessageFormatDictionary.get: The localization phrase '${e}' does not exists`,{key:e,parameters:t});return n(t)}has(e){if(!/^[^.]+\.[^.]+$/.test(e))throw new Error(`The provided key (${e}) is not a valid localization phrase key, expecting a "file_name.identifier" notation`);return!!this._getScope(e)}_getScope(e){let t=e.split("."),n=this._dictionary;for(let e of t){if(!n[e])return null;n=n[e]}return n}}class P{fire(){}listenAll(){}listen(){}unlistenAll(){}unlisten(){}}class x{isClient(){}isCookieEnabled(){}hasSessionStorage(){}setTitle(){}getWebSocket(){}getWindow(){}getDocument(){}getScrollX(){}getScrollY(){}scrollTo(){}getDomain(){}getHost(){}getPath(){}getUrl(){}getBody(){}getElementById(){}getHistoryState(){}querySelector(){}querySelectorAll(){}redirect(){}pushState(){}replaceState(){}createCustomEvent(){}bindEventListener(){}unbindEventListener(){}}const I="$IMA.CustomEvent";class A extends P{static get $dependencies(){return[x]}constructor(e){super(),this._window=e,this._listeners=new WeakMap,this._allListenersTargets=new WeakMap}fire(e,t,n,i={}){var r={},s={detail:{eventName:t,data:n}};Object.assign(r,{bubbles:!0,cancelable:!0},i,s);var o=this._window.createCustomEvent(I,r);if(!e||void 0===e.dispatchEvent)throw new S(`ima.core.event.EventBusImpl.fire: The EventSource ${e} is not defined or can not dispatch event '${t}' (data: ${n}).`,{eventTarget:e,eventName:t,data:n,eventInitialization:r});return e.dispatchEvent(o),this}listenAll(e,t){this._allListenersTargets.has(e)||this._allListenersTargets.set(e,new WeakMap);var n=e=>{e.type===I&&e.detail&&e.detail.eventName&&t(e)};return this._allListenersTargets.get(e).set(t,n),this._window.bindEventListener(e,I,n),this}listen(e,t,n){if(!e)return this;this._listeners.has(n)||this._listeners.set(n,new WeakMap);var i=this._listeners.get(n);i.has(e)||i.set(e,new Map);var r=e=>{e.type===I&&e.detail&&e.detail.eventName===t&&n(e)};return i.get(e).set(t,r),this._window.bindEventListener(e,I,r),this}unlistenAll(e,t){if(!this._allListenersTargets.has(e))return this;var n=this._allListenersTargets.get(e);if(!n.has(t))return this;var i=n.get(t);return this._window.unbindEventListener(e,I,i),n.delete(t),n.size||this._allListenersTargets.delete(e),this}unlisten(e,t,n){if(!this._listeners.has(n))return this;var i=this._listeners.get(n);if(!i.has(e))return this;var r=i.get(e);if(!r.has(t))return this;var s=r.get(t);return this._window.unbindEventListener(e,I,s),r.delete(t),r.size||i.delete(e),this}}class k{clear(){}listen(){}unlisten(){}fire(){}}const R=Object.freeze(new Map),M=Object.freeze(new Set);class O extends k{static get $dependencies(){return[]}constructor(){super(),this._eventListeners=new Map}clear(){return this._eventListeners.clear(),this}listen(e,t,n=null){return this._eventListeners.has(e)||this._createNewEvent(e),this._getListenersOf(e).has(t)||this._createNewListener(e,t),this._getScopesOf(e,t).add(n),this}unlisten(e,t,n=null){let i=this._getScopesOf(e,t);if(i.delete(n),!i.size){let n=this._getListenersOf(e);n.delete(t),n.size||this._eventListeners.delete(e)}return this}fire(e,t,n=!1){let i=this._getListenersOf(e);i.size||n||console.warn(`There are no event listeners registered for the ${e} event`,{event:e,data:t});for(let[e,n]of i)for(let i of n)e.bind(i)(t);return this}_createNewEvent(e){let t=new Map;this._eventListeners.set(e,t)}_createNewListener(e,t){let n=new Set;this._eventListeners.get(e).set(t,n)}_getScopesOf(e,t){let n=this._getListenersOf(e);return n.has(t)?n.get(t):M}_getListenersOf(e){return this._eventListeners.has(e)?this._eventListeners.get(e):R}}class N{get(){}post(){}put(){}patch(){}delete(){}getCacheKey(){}setDefaultHeader(){}clearDefaultHeaders(){}}class D extends N{constructor(e,t,n,i){super(),this._proxy=e,this._cache=t,this._cookie=n,this._cacheOptions=i.cacheOptions,this._defaultRequestOptions=i.defaultRequestOptions,this._internalCacheOfPromises=new Map}get(e,t,n={}){return this._requestWithCheckCache("get",e,t,n)}post(e,t,n={}){return this._requestWithCheckCache("post",e,t,Object.assign({cache:!1},n))}put(e,t,n={}){return this._requestWithCheckCache("put",e,t,Object.assign({cache:!1},n))}patch(e,t,n={}){return this._requestWithCheckCache("patch",e,t,Object.assign({cache:!1},n))}delete(e,t,n={}){return this._requestWithCheckCache("delete",e,t,Object.assign({cache:!1},n))}getCacheKey(e,t,n){return this._cacheOptions.prefix+this._getCacheKeySuffix(e,t,n)}setDefaultHeader(e,t){return this._proxy.setDefaultHeader(e,t),this}clearDefaultHeaders(){return this._proxy.clearDefaultHeaders(),this}_requestWithCheckCache(e,t,n,i){if((i=this._prepareOptions(i)).cache){let i=this._getCachedData(e,t,n);if(i)return i}return this._request(e,t,n,i)}_getCachedData(e,t,n){let i=this.getCacheKey(e,t,n);if(this._internalCacheOfPromises.has(i))return this._internalCacheOfPromises.get(i);if(this._cache.has(i)){let e=this._cache.get(i);return Promise.resolve(e)}return null}_request(e,t,n,i){let r=this.getCacheKey(e,t,n),s=this._proxy.request(e,t,n,i).then((e=>this._proxyResolved(e)),(e=>this._proxyRejected(e)));return this._internalCacheOfPromises.set(r,s),s}_proxyResolved(e){let t={status:e.status,body:e.body,params:e.params,headers:e.headers,headersRaw:e.headersRaw,cached:!1},n=this.getCacheKey(t.params.method,t.params.url,t.params.data);this._internalCacheOfPromises.delete(n),this._proxy.haveToSetCookiesManually()&&this._setCookiesFromResponse(t);let{postProcessor:i,cache:r}=t.params.options;return"function"==typeof i&&(t=i(t)),r&&this._saveAgentResponseToCache(t),t}_proxyRejected(e){let t=e.getParams(),n=t.method,i=t.url,r=t.data;if(t.options.repeatRequest>0)return t.options.repeatRequest--,this._request(n,i,r,t.options);{let s=this.getCacheKey(n,i,r);this._internalCacheOfPromises.delete(s);let o=`${t.errorName}: ima.core.http.Agent:_proxyRejected: ${e.message}`,a=new S(o,t);return Promise.reject(a)}}_prepareOptions(e){let t=Object.assign({},this._defaultRequestOptions,e),n={};return t.withCredentials&&(n={Cookie:this._cookie.getCookiesStringForCookieHeader()}),t.headers=Object.assign(n,this._defaultRequestOptions.headers,e.headers||{}),t}_getCacheKeySuffix(e,t,n){let i="";if(n)try{i=JSON.stringify(n).replace(/<\/script/gi,"<\\/script")}catch(e){console.warn("The provided data does not have valid JSON format",n)}return`${e}:${t}?${i}`}_setCookiesFromResponse(e){if(e.headersRaw){let t=e.headersRaw.raw()["set-cookie"];t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{this._cookie.parseFromSetCookieHeader(e)})))}}_saveAgentResponseToCache(e){let t=this.getCacheKey(e.params.method,e.params.url,e.params.data);e.cached=!0;let n=e.params.options.ttl;this._cache.set(t,e,n),e.cached=!1}}const L=Object.freeze({OK:200,NO_CONTENT:204,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,TIMEOUT:408,SERVER_ERROR:500});class ${constructor(e,t){this._transformer=e,this._window=t,this._defaultHeaders=new Map}request(e,t,n,i){const r=this._composeRequestParams(e,t,n,i);return new Promise(((s,o)=>{let a;i.timeout&&(a=setTimeout((()=>{o(new S("The HTTP request timed out",{status:L.TIMEOUT}))}),i.timeout)),this._getFetchApi()(this._composeRequestUrl(t,this._shouldRequestHaveBody(e,n)?{}:n),this._composeRequestInit(e,n,i)).then((e=>{a&&clearTimeout(a);const t=e.headers.get("content-type");return e.status===L.NO_CONTENT?Promise.resolve([e,null]):t&&t.includes("application/json")?e.json().then((t=>[e,t])):e.text().then((t=>[e,t]))})).then((([e,t])=>this._processResponse(r,e,t))).then(s,o)})).catch((e=>{throw this._processError(e,r)}))}setDefaultHeader(e,t){this._defaultHeaders.set(e,t)}clearDefaultHeaders(){this._defaultHeaders.clear()}getErrorParams(e,t,n,i,r,s,o){let a=this._composeRequestParams(e,t,n,i);void 0===s&&(s={});let l={status:r,body:s,cause:o};switch(r){case L.TIMEOUT:l.errorName="Timeout";break;case L.BAD_REQUEST:l.errorName="Bad Request";break;case L.UNAUTHORIZED:l.errorName="Unauthorized";break;case L.FORBIDDEN:l.errorName="Forbidden";break;case L.NOT_FOUND:l.errorName="Not Found";break;case L.SERVER_ERROR:l.errorName="Internal Server Error";break;default:l.errorName="Unknown"}return Object.assign(l,a)}haveToSetCookiesManually(){return!this._window.isClient()}_processResponse(e,t,n){if(t.ok)return{status:t.status,body:n,params:e,headers:this._headersToPlainObject(t.headers),headersRaw:t.headers,cached:!1};throw new S("The request failed",{status:t.status,body:n})}_headersToPlainObject(e){let t={};if(e.entries)for(let[n,i]of e.entries())t[n]=i;else e.forEach&&(e.getAll?e.forEach(((n,i)=>{t[i]=e.getAll(i).join(", ")})):e.get?e.forEach(((n,i)=>{t[i]=e.get(i)})):e.forEach(((e,n)=>{t[n]=e})));return t}_processError(e,t){const n=e instanceof S?e.getParams():{};return this._createError(e,t,n.status||L.SERVER_ERROR,n.body||null)}_createError(e,t,n,i=null){return new S(e.message,this.getErrorParams(t.method,t.url,t.data,t.options,n,i,e))}_getFetchApi(){return this._window.isClient()?this._window.getWindow().fetch:e("node-fetch")}_composeRequestParams(e,t,n,i){return{method:e,url:t,transformedUrl:this._transformer.transform(t),data:n,options:i}}_composeRequestInit(e,t,n){const i=this._getContentType(e,t,n);i&&(n.headers["Content-Type"]=i);for(let[e,t]of this._defaultHeaders)n.headers[e]=t;let r={method:e.toUpperCase(),headers:n.headers,credentials:n.withCredentials?"include":"same-origin",redirect:"follow"};return this._shouldRequestHaveBody(e,t)&&(r.body=this._transformRequestBody(t,n.headers)),Object.assign(r,n.fetchOptions||{}),r}_getContentType(e,t,n){return n.headers["Content-Type"]&&"string"==typeof n.headers["Content-Type"]?n.headers["Content-Type"]:this._shouldRequestHaveBody(e,t)?"application/json":null}_composeRequestUrl(e,t){const n=this._transformer.transform(e),i=this._convertObjectToQueryString(t||{}),r=i?n.includes("?")?"&":"?":"";return`${n}${r}${i}`}_shouldRequestHaveBody(e,t){return!(!e||!t||["get","head"].includes(e.toLowerCase()))}_transformRequestBody(e,t){switch(t["Content-Type"]){case"application/json":return JSON.stringify(e);case"application/x-www-form-urlencoded":return this._convertObjectToQueryString(e);case"multipart/form-data":return this._convertObjectToFormData(e);default:return e}}_convertObjectToQueryString(e){return Object.keys(e).map((t=>[t,e[t]].map(encodeURIComponent).join("="))).join("&")}_convertObjectToFormData(e){const t=this._window.getWindow();if(!t||!t.FormData)return e;const n=new FormData;return Object.keys(e).forEach((t=>n.append(t,e[t]))),n}}class H{static get $dependencies(){return[]}constructor(){this._rules={}}addRule(e,t){return this._rules[e]=t,this}clear(){return this._rules={},this}transform(e){let t=Object.keys(this._rules);if(0===t.length)return e;let n=new RegExp(t.join("|"),"g");return e.replace(n,(e=>this._rules[e]))}}class j{setTitle(){}getTitle(){}setMetaName(){}getMetaName(){}getMetaNames(){}setMetaProperty(){}getMetaProperty(){}getMetaProperties(){}setLink(){}getLink(){}getLinks(){}}class U extends j{static get $dependencies(){return[]}constructor(){super(),this._title="",this._metaName=new Map,this._metaProperty=new Map,this._link=new Map}setTitle(e){this._title=e}getTitle(){return this._title}setMetaName(e,t){this._metaName.set(e,t)}getMetaName(e){return this._metaName.get(e)||""}getMetaNames(){return Array.from(this._metaName.keys())}setMetaProperty(e,t){this._metaProperty.set(e,t)}getMetaProperty(e){return this._metaProperty.get(e)||""}getMetaProperties(){return Array.from(this._metaProperty.keys())}setLink(e,t){this._link.set(e,t)}getLink(e){return this._link.get(e)||""}getLinks(){return Array.from(this._link.keys())}}function z(e,t){return t&&t.$Utils||e.$Utils}function F(e,t,n){return e.utils.$Dictionary.get(t,n)}function B(e,t,n){return e.utils.$Router.link(t,n)}function V(e,t,n){return e.utils.$CssClasses(t,n&&e)}function W(e,t){let n="string"==typeof t?t:null;return!n&&(t instanceof o.Component||t instanceof o.PureComponent)&&(n=t.props.className),s(e,n)}function q(e,t,n=null){return e.utils.$EventBus.fire(a.findDOMNode(e),t,n)}function G(e,t,n,i){return t&&!t.addEventListener&&(t=a.findDOMNode(t)),e.utils.$EventBus.listen(t,n,i)}function K(e,t,n,i){return t&&!t.addEventListener&&(t=a.findDOMNode(t)),e.utils.$EventBus.unlisten(t,n,i)}class Z{constructor(e){this._oc=e}createController(e){return this._oc.create(e)}createView(e){if("function"==typeof e)return e;let t=this._oc.getConstructorOf(e);if(t)return t;throw new S(`ima.core.page.Factory:createView hasn't name of view "${e}".`)}decorateController(e){let t=this._oc.get("$MetaManager"),n=this._oc.get("$Router"),i=this._oc.get("$Dictionary"),r=this._oc.get("$Settings");return this._oc.create("$ControllerDecorator",[e,t,n,i,r])}decoratePageStateManager(e,t){return this._oc.create("$PageStateManagerDecorator",[e,t])}}