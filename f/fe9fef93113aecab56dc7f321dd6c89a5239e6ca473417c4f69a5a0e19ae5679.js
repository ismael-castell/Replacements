(window.webpackJsonp=window.webpackJsonp||[]).push([[5,40],{1342:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return T})),n.d(t,"MUTATION_TYPES",(function(){return E})),n.d(t,"ACTION_TYPES",(function(){return S})),n.d(t,"mutations",(function(){return y})),n.d(t,"actions",(function(){return O})),n.d(t,"storeModule",(function(){return I}));var o=n(0),r=(n(9),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(11),n(15),n(76),n(18),n(2)),c=n(1125),l=n(2032),d=n(2239),T=()=>({flatSections:[],sectionTree:null}),E={SET_FLAT_SECTIONS:"SET_FLAT_SECTIONS",REPLACE_SECTION:"REPLACE_SECTION"},S={FETCH:"FETCH",FETCH_CONTENTS:"FETCH_CONTENTS",UPDATE_NOTE_LIKE_STATUS:"UPDATE_NOTE_LIKE_STATUS",UPDATE_MAGAZINE_FOLLOWING_STATUS:"UPDATE_MAGAZINE_FOLLOWING_STATUS"},y={[E.SET_FLAT_SECTIONS](e,t){var{flatSections:n}=t,o=(e=>{var table=new Map;e.forEach((e=>table.set(e.key,Object.assign(Object.assign({},e),{contents:e.contents?[...e.contents]:[]}))));var t=null,n=Number.POSITIVE_INFINITY;return e.forEach((e=>{var o,r=table.get(e.key);if(e.parentSectionKey){var c=table.get(e.parentSectionKey),l=null!==(o=c.contents)&&void 0!==o?o:[];c.contents=[...l.filter((s=>s.key!==r.key)),r]}n>r.depth&&(n=r.depth,t=r)})),table.clear(),t})(n);e.flatSections=[...n],e.sectionTree=o?Object.assign({},o):null},[E.REPLACE_SECTION](e,t){var{section:section}=t;Object(d.a)(null==section?void 0:section.parentSectionKey,e.sectionTree,(s=>{var e,t=null===(e=s.contents)||void 0===e?void 0:e.find((s=>s.key===section.key));t&&Object.keys(section).forEach((e=>r.a.set(t,e,section[e])))}))}},O={[S.FETCH](e,t){var n=this;return Object(o.a)((function*(){var{commit:o}=e,{sectionKey:r}=t,d=yield n.$axios.$get("/v3/layout_infra/sections/".concat(r)).catch((e=>{throw console.error(e),e}));if(d.error)throw console.error(d.error),new Error(d.error);var T=["text","image","oembed","amazon_widgets"],S={dataset_keys:d.data.reduce(((e,t)=>t.contentKey?[...e,t.contentKey]:e),[])},y=(yield n.$axios.$get("/v3/layout_infra/sections/".concat(r,"/dataset_list"),{params:S}).catch((e=>{throw console.error(e),e}))).data.reduce(((e,t)=>(T.includes(t.contentType)?e.bulkCacheDatasetKeys=[...e.bulkCacheDatasetKeys,t.key]:e.datasetKeys=[...e.datasetKeys,t.key],e)),{bulkCacheDatasetKeys:[],datasetKeys:[]}),O=yield n.$axios.$get("/v3/layout_infra/sections/".concat(r,"/datasets"),{params:{dataset_keys:y.bulkCacheDatasetKeys,is_cache:!0}}).catch((e=>{throw console.error(e),e})),I=Object(c.a)(y.datasetKeys,3).map((e=>n.$axios.$get("/v3/layout_infra/sections/".concat(r,"/datasets"),{params:{dataset_keys:e}}).catch((e=>{throw console.error(e),e})))),_=yield Promise.all(I).then((e=>e.reduce(((e,t)=>[...e,...t.data]),[]))),N=[...O.data||[],..._],v=d.data.map((s=>{if(!s.contentKey)return Object.assign(Object.assign({},s),{contents:[],contentType:""});var e=N.find((e=>e.key===s.contentKey));return e?Object.assign(Object.assign({},s),{contents:e.contents.map((e=>Object.assign(Object.assign({},e),{parentSectionKey:s.key}))),contentType:Object(l.a)(e.contentType),contentName:e.name}):Object.assign(Object.assign({},s),{contents:[],contentType:""})}));o(E.SET_FLAT_SECTIONS,{flatSections:v})}))()},[S.FETCH_CONTENTS](e,t){var n=this;return Object(o.a)((function*(){var{commit:o}=e,{section:section}=t;if(section.contentKey){var r=yield n.$axios.$get("/v3/datasets/".concat(section.contentKey));if(r.data){var c=Object.assign(Object.assign({},section),{contents:r.data.contents.map((e=>Object.assign(Object.assign({},e),{parentSectionKey:section.key}))),contentType:Object(l.a)(r.data.contentType),contentName:r.data.name});o(E.REPLACE_SECTION,{section:c})}}}))()},[S.UPDATE_NOTE_LIKE_STATUS](e,t){var{commit:n}=e,{section:section,isLiked:o}=t,r=o?section.likeCount+1:section.likeCount-1,c=Object.assign(Object.assign({},section),{isLiked:o,likeCount:r});n(E.REPLACE_SECTION,{section:c})},[S.UPDATE_MAGAZINE_FOLLOWING_STATUS](e,t){var{commit:n}=e,{section:section,isFollowing:o}=t,r=Object.assign(Object.assign({},section),{isFollowing:o});n(E.REPLACE_SECTION,{section:r})}},I={namespaced:!0,state:T,mutations:y,actions:O}},1631:function(e,t,n){"use strict";n.r(t),n.d(t,"STORE_NAME",(function(){return k})),n.d(t,"getType",(function(){return C})),n.d(t,"state",(function(){return A})),n.d(t,"MUTATION_TYPES",(function(){return h})),n.d(t,"ACTION_TYPES",(function(){return K})),n.d(t,"SECTIONSET_ITEMS",(function(){return j})),n.d(t,"CONTENT_ITEMS",(function(){return z})),n.d(t,"ITEMS",(function(){return P})),n.d(t,"ITEM_KEY_DATASOURCE_MAP",(function(){return M})),n.d(t,"mapItemKeyToDatasource",(function(){return R})),n.d(t,"mutations",(function(){return x})),n.d(t,"actions",(function(){return G})),n.d(t,"storeModule",(function(){return U}));var o=n(0),r=(n(15),n(9),n(11),n(24),n(118),n(76),n(18),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(2)),c=n(541),l=n(1342),d=(n(575),n(1817),n(1720),n(1705)),T="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",E=()=>Array.from(crypto.getRandomValues(new Uint32Array(16))).map((e=>T[e%T.length])).join(""),S={NOTE(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"creator_notes",componentType:"medium",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},MAGAZINE(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"magazines",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},CREATOR(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"creators",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},CIRCLE(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"circles",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},AMAZON_WIDGET(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"amazon_widgets",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},OEMBED(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"oembed",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},CUSTOM_LINK(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"List",contentType:"custom_links",contentId:null,contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,listType:{value:"ListLiquid",label:"ListLiquid",name:"ListLiquid"},numberOfLines:{label:"指定なし",name:"auto"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},TEXT(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"Text",contentType:"text",contentId:E(),contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,textType:{label:"見出し",name:"Heading",value:"Heading"},size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},IMAGE(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,displayType:"Image",contentType:"image",contentId:E(),contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge}};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},EMPTY(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:null,datasource:null,contentId:null,contentKey:null,contentName:null,displayType:"Empty",contentType:"empty",contents:[],backgroundImage:{},options:{editable:!0},depth:-1,sortOrder:-1};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})},CVBLOCK(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,c=E(),l={key:c,contentId:null,contentKey:null,contentName:null,parentSectionKey:o,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.fixLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:l});var T={parentSectionKey:o,contentId:null,contentKey:null,contentName:null,displayType:"Spacer",backgroundImage:{},options:{editable:!0,spacerSize:{label:"小",name:"Small",value:"small"}},depth:-1,sortOrder:-1,contentType:null,contents:[]},S=Object.assign({key:E()},T);n(K.ADD_SECTION,{key:c,section:S});var y=E(),O={key:y,contentId:null,contentKey:null,contentName:null,parentSectionKey:c,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.ADD_SECTION,{key:c,section:O});var I={displayType:"Text",contentType:"text",contentId:E(),contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,fontColor:{label:"白",name:"white",value:"white"},fontSize:{label:"36",name:"36",value:"36"},textType:{label:"h2",name:"h2",value:"h2"},size:d.b.size.values.flexLarge}},_=Object.assign({key:E(),parentSectionKey:y},I);n(K.ADD_SECTION,{key:y,section:_});var N=Object.assign(Object.assign({key:E(),parentSectionKey:y},I),{options:{editable:!0,fontColor:{label:"白",name:"white",value:"white"},fontSize:{label:"16",name:"16",value:"16"},textType:{label:"指定なし",name:"Paragraph",value:"Paragraph"},size:d.b.size.values.flexLarge}});n(K.ADD_SECTION,{key:y,section:N});var v=E(),m={key:v,contentId:null,contentKey:null,contentName:null,parentSectionKey:c,displayType:"Horizontal",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.ADD_SECTION,{key:c,section:m});var k={parentSectionKey:v,displayType:"Image",contentType:"image",contentId:E(),contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexMedium}};n(K.ADD_SECTION,{key:v,section:Object.assign({key:E()},k)}),n(K.ADD_SECTION,{key:v,section:Object.assign({key:E()},k)}),n(K.ADD_SECTION,{key:v,section:Object.assign({key:E()},k)});var C=Object.assign({key:E()},T);n(K.ADD_SECTION,{key:c,section:C})},NOTEFOOTER(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,c=E(),l={key:c,contentId:null,contentKey:null,contentName:null,parentSectionKey:o,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.fixLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:l});var T={parentSectionKey:o,contentId:null,contentKey:null,contentName:null,displayType:"Spacer",backgroundImage:{},options:{editable:!0,spacerSize:{label:"小",name:"Small",value:"small"}},depth:-1,sortOrder:-1,contentType:null,contents:[]},S=Object.assign({key:E()},T);n(K.ADD_SECTION,{key:c,section:S});var y=E(),O={key:y,contentId:null,contentKey:null,contentName:null,parentSectionKey:c,displayType:"Horizontal",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.ADD_SECTION,{key:c,section:O});var image={key:E(),parentSectionKey:y,displayType:"Image",contentType:"image",contentId:E(),contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexSmall}};n(K.ADD_SECTION,{key:y,section:image});var I={displayType:"Text",contentType:"text",contentId:E(),contentKey:null,contentName:null,contents:[],depth:-1,sortOrder:-1,backgroundImage:{},options:{editable:!0,fontSize:{label:"12",name:"12",value:"12"},textType:{label:"指定なし",name:"Paragraph",value:"Paragraph"},size:d.b.size.values.flexLarge}},_=Object.assign(Object.assign({key:E(),parentSectionKey:y},I),{options:{editable:!0,fontSize:{label:"14",name:"14",value:"14"},textType:{label:"指定なし",name:"Paragraph",value:"Paragraph"},size:d.b.size.values.flexMedium}});n(K.ADD_SECTION,{key:y,section:_});var N=Object.assign({key:E(),parentSectionKey:c},I);n(K.ADD_SECTION,{key:c,section:N});var v=Object.assign({key:E()},T);n(K.ADD_SECTION,{key:c,section:v})},LEFT_MAIN(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,c=E(),l={key:c,contentId:null,contentKey:null,contentName:null,parentSectionKey:o,displayType:"Horizontal",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:l});var T={key:E(),parentSectionKey:c,contentId:null,contentKey:null,contentName:null,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:0,contents:[],contentType:null};n(K.ADD_SECTION,{key:c,section:T});var S={key:E(),parentSectionKey:c,contentId:null,contentKey:null,contentName:null,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexSmall},depth:-1,sortOrder:1,contents:[],contentType:null};n(K.ADD_SECTION,{key:c,section:S})},EQUALLY_SPACED(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,c=E(),l={key:c,parentSectionKey:o,contentId:null,contentKey:null,contentName:null,displayType:"Horizontal",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:l}),[E(),E(),E()].forEach((e=>{var t={key:e,parentSectionKey:c,contentId:null,contentKey:null,contentName:null,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexMedium},depth:-1,sortOrder:0,contents:[],contentType:null};n(K.ADD_SECTION,{key:c,section:t})}))},RIGHT_MAIN(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,c=E(),l={key:c,parentSectionKey:o,contentId:null,contentKey:null,contentName:null,displayType:"Horizontal",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:l});var T={key:E(),parentSectionKey:c,contentId:null,contentKey:null,contentName:null,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexSmall},depth:-1,sortOrder:1,contents:[],contentType:null};n(K.ADD_SECTION,{key:c,section:T});var S={key:E(),contentId:null,contentKey:null,contentName:null,parentSectionKey:c,displayType:"Vertical",backgroundImage:{},options:{editable:!0,size:d.b.size.values.flexLarge},depth:-1,sortOrder:0,contents:[],contentType:null};n(K.ADD_SECTION,{key:c,section:S})},SPACER(e,t){var{dispatch:n}=e,{key:o,sortOrder:r}=t,section={key:E(),parentSectionKey:o,contentId:null,contentKey:null,contentName:null,displayType:"Spacer",backgroundImage:{},options:{editable:!0,spacerSize:{label:"小",name:"Small",value:"small"}},depth:-1,sortOrder:-1,contentType:null,contents:[]};n(K.INSERT_SECTION,{key:o,sortOrder:r,section:section})}},y=(e,t)=>{var n=t.reduce(((t,s)=>s.parentSectionKey&&e.includes(s.parentSectionKey)?[...t,s.key]:t),[]);return 0===n.length?e:[...e,...y(n,t)]},O=n(2239),I=n(2240),_=(e,t)=>{var n=Object.create(null);return t.forEach((t=>{n[t]=e[t]})),(e=>JSON.stringify(e))(n)},N=e=>JSON.parse(e),v=()=>{var e=[],t=[];return{push:n=>{e.push(n),t=[]},undo:n=>{var o=e.pop();return o?(t.push(n),o):null},redo:n=>{var o=t.pop();return o?(e.push(n),o):null}}};var m=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},k="editLayoutInfraStore",C=e=>"".concat(k,"/").concat(e),D=["flatSections","sectionTree","addedSections","updatedSections","deletedSections","selectedSection","selectedParentKeys","options"],f=null,L=e=>{f||(f=v()),f.push(e)},A=()=>Object.assign({addedSections:[],updatedSections:[],deletedSections:[],dragging:null,selectedSection:null,selectedParentKeys:[],options:{},contents:null,contentSideModal:{sortOrder:-1,visible:!1},datasetGroupKey:""},l.storeModule.state()),h=Object.assign({SET_DRAGGING:"SET_DRAGGING",SET_SELECTED:"SET_SELECTED",SET_OPTIONS:"SET_OPTIONS",SET_CONTENTS:"SET_CONTENTS",SET_DATASET_GROUP_KEY:"SET_DATASET_GROUP_KEY",ADD_SECTION:"ADD_SECTION",DELETE_SECTION:"DELETE_SECTION",UPDATE_SECTIONS:"UPDATE_SECTIONS",UPDATE_SECTION:"UPDATE_SECTION",SET_EDITED_SECTIONS:"SET_EDITED_SECTIONS",SET_CONTENT_SIDE_MODAL:"SET_CONTENT_SIDE_MODAL",RESTORE_MEMENTO:"RESTORE_MEMENTO"},l.MUTATION_TYPES),K=Object.assign({SET_DRAGGING:"SET_DRAGGING",HANDLE_DROP:"HANDLE_DROP",HANDLE_CLICK_SIDE_MODAL:"HANDLE_CLICK_SIDE_MODAL",INSERT_SECTION:"INSERT_SECTION",DEBUG_INIT_SECTION:"DEBUG_INIT_SECTION",SET_SELECTED:"SET_SELECTED",FETCH_OPTIONS:"FETCH_OPTIONS",SAVE:"SAVE",ADD_SECTION:"ADD_SECTION",SET_ADDED_SECTION:"SET_ADDED_SECTION",SET_UPDATED_SECTION:"SET_UPDATED_SECTION",SET_DELETED_SECTION:"SET_DELETED_SECTION",DELETE_SECTION:"DELETE_SECTION",UPDATE_SECTIONS:"UPDATE_SECTIONS",UPDATE_SECTION:"UPDATE_SECTION",TOGGLE_CONTENT_SIDE_MODAL:"TOGGLE_CONTENT_SIDE_MODAL",COPY_SECTION:"COPY_SECTION",UNDO:"UNDO",REDO:"REDO",FETCH_DATASET_GROUP_KEY:"FETCH_DATASET_GROUP_KEY"},l.ACTION_TYPES),j={CVBLOCK:"CVBLOCK",NOTEFOOTER:"NOTEFOOTER"},z={NOTE:"NOTE",MAGAZINE:"MAGAZINE",CREATOR:"CREATOR",CIRCLE:"CIRCLE",AMAZON_WIDGET:"AMAZON_WIDGET",CUSTOM_LINK:"CUSTOM_LINK",TEXT:"TEXT",IMAGE:"IMAGE",OEMBED:"OEMBED"},P=Object.assign(Object.assign(Object.assign({},z),j),{EMPTY:"EMPTY",LEFT_MAIN:"LEFT_MAIN",EQUALLY_SPACED:"EQUALLY_SPACED",RIGHT_MAIN:"RIGHT_MAIN",SPACER:"SPACER"}),M={empty:"EMPTY",creator_notes:"NOTE",magazines:"MAGAZINE",creators:"CREATOR",circles:"CIRCLE",amazon_widgets:"AMAZON_WIDGET",custom_links:"CUSTOM_LINK",text:"TEXT",image:"IMAGE",oembed:"OEMBED"},R=e=>{var t=Object.entries(M),n=Object.values(M).findIndex((t=>t===e));return-1===n?null:t[n][0]},x=Object.assign({[h.SET_EDITED_SECTIONS](e,t){var{addedSections:n,updatedSections:o,deletedSections:r}=t;n&&(e.addedSections=[...n]),o&&(e.updatedSections=[...o]),r&&(e.deletedSections=[...r])},[h.ADD_SECTION](e,t){var{section:section}=t;e.flatSections.push(section),Object(O.a)(null==section?void 0:section.parentSectionKey,e.sectionTree,(s=>{var e;return null===(e=s.contents)||void 0===e?void 0:e.push(section)}))},[h.DELETE_SECTION](e,t){var{key:n,section:section,keys:o}=t;e.flatSections=[...e.flatSections.filter((s=>!o.includes(s.key)))],Object(O.a)(n,e.sectionTree,(s=>{var e,t,n,o=null!==(t=null===(e=s.contents)||void 0===e?void 0:e.findIndex((e=>e.key==section.key)))&&void 0!==t?t:-1;-1!==o&&(null===(n=s.contents)||void 0===n||n.splice(o,1))}))},[h.UPDATE_SECTIONS](e,t){var{key:n,sections:o}=t;o.forEach((section=>{var t,n=null!==(t=e.flatSections.findIndex((s=>s.key===section.key)))&&void 0!==t?t:-1;-1!==n&&e.flatSections.splice(n,1,section)})),e.flatSections.sort(((a,b)=>a.depth+a.sortOrder-(b.depth+b.sortOrder))),Object(O.a)(n,e.sectionTree,(s=>{var e;o.forEach((section=>{var e,t=null===(e=s.contents)||void 0===e?void 0:e.find((s=>s.key===section.key));t&&Object.keys(section).forEach((e=>r.a.set(t,e,section[e])))})),null===(e=s.contents)||void 0===e||e.sort(((a,b)=>a.depth+a.sortOrder-(b.depth+b.sortOrder)))}))},[h.UPDATE_SECTION](e,t){var n,{section:section}=t,o=null!==(n=e.flatSections.findIndex((s=>s.key===section.key)))&&void 0!==n?n:-1;-1!==o&&(e.flatSections.splice(o,1,section),Object(O.a)(null==section?void 0:section.parentSectionKey,e.sectionTree,(s=>{var e,t=null===(e=s.contents)||void 0===e?void 0:e.find((s=>s.key===section.key));t&&Object.keys(section).forEach((e=>r.a.set(t,e,section[e])))})))},[h.SET_DRAGGING](e,t){var{dragging:n}=t;e.dragging=n},[h.SET_SELECTED](e,t){var{section:section,parentKeys:n}=t;section?(e.selectedSection=Object.assign({},section),e.selectedParentKeys=[...n]):(e.selectedSection=null,e.selectedParentKeys=[])},[h.SET_OPTIONS](e,t){var{options:n}=t;e.options=Object.assign({},n)},[h.SET_CONTENTS](e,t){var{contents:n}=t;e.contents=n?Object.assign({},n):null},[h.SET_CONTENT_SIDE_MODAL](e,t){var{contentSideModal:n}=t;e.contentSideModal=Object.assign({},n)},[h.SET_DATASET_GROUP_KEY](e,t){var{key:n}=t;e.datasetGroupKey=n},[h.RESTORE_MEMENTO](e,t){var{memento:n}=t;e.flatSections=[...n.flatSections],e.sectionTree=n.sectionTree?Object.assign({},n.sectionTree):null,e.addedSections=[...n.addedSections],e.updatedSections=[...n.updatedSections],e.deletedSections=[...n.deletedSections],e.selectedSection=n.selectedSection?Object.assign({},n.selectedSection):null,e.selectedParentKeys=[...n.selectedParentKeys],e.options=Object.assign({},n.options)}},l.storeModule.mutations),G=Object.assign({[K.SAVE](e,t){var n=this;return Object(o.a)((function*(){var{state:o,commit:r}=e,l=e=>Object.keys(e).reduce(((t,n)=>Object.assign(Object.assign({},t),{[Object(c.a)(n)]:e[n]})),{}),{key:d}=t,T=o.addedSections.map((e=>{var{contents:t,backgroundImageFile:n}=e,s=m(e,["contents","backgroundImageFile"]);return l(s)})),E=o.deletedSections.map((e=>{var{contents:t}=e,s=m(e,["contents"]);return s.backgroundImage.key&&Object(I.a)(n.$axios,{key:s.backgroundImage.key}),l(s)})),S=o.updatedSections.map((e=>{var{contents:t,backgroundImageFile:o}=e,s=m(e,["contents","backgroundImageFile"]);return s.backgroundImage.key&&(o||s.backgroundImage.deleted)&&Object(I.a)(n.$axios,{key:s.backgroundImage.key}),l(s)}));yield n.$axios.$put("/v3/layout_infra/sections",{section_key:d,added:{items:T},deleted:{items:E},updated:{items:S}}),r(h.SET_EDITED_SECTIONS,{addedSections:[],updatedSections:[],deletedSections:[]})}))()},[K.ADD_SECTION](e,t){var{commit:n,dispatch:o,state:r}=e,{key:c,section:section,withLogging:l=!0}=t;l&&L(_(r,D));var d=r.flatSections.find((e=>e.key===c));if(!d)throw new Error("Parent node was not found.");var T=d.depth+1,E=r.flatSections.filter((e=>e.depth===T&&e.parentSectionKey===d.key)).reduce(((e,t)=>e>t.sortOrder?e:t.sortOrder),-1)+1,S=Object.assign(Object.assign({},section),{parentSectionKey:c,depth:T,sortOrder:E});n(h.ADD_SECTION,{section:S}),o(K.SET_ADDED_SECTION,{section:S})},[K.SET_ADDED_SECTION](e,t){var{commit:n,state:o}=e,{section:section}=t;n(h.SET_EDITED_SECTIONS,{addedSections:[...o.addedSections,section]})},[K.DELETE_SECTION](e,t){var{commit:n,dispatch:o,state:r}=e;L(_(r,D));var{key:c,section:section}=t,l=y([section.key],r.flatSections);o(K.SET_DELETED_SECTION,{keys:l}),n(h.DELETE_SECTION,{key:c,section:section,keys:l});var d=[];Object(O.a)(c,r.sectionTree,(s=>{s.contents&&d.push(...s.contents)})),d.sort(((a,b)=>a.depth+a.sortOrder-(b.depth+b.sortOrder))),o(K.UPDATE_SECTIONS,{key:c,sections:d,withLogging:!1})},[K.SET_DELETED_SECTION](e,t){var{state:n,commit:o}=e,{keys:r}=t,{addedSections:c,updatedSections:l,deletedSections:d}=n,T=r.reduce(((e,t)=>{var o=n.flatSections.find((s=>s.key===t));return o?[...e,o]:e}),[]),E=c.filter((s=>!r.includes(s.key))),S=l.filter((s=>!r.includes(s.key))),y=[...d.filter((s=>!r.includes(s.key))),...T];o(h.SET_EDITED_SECTIONS,{addedSections:E,updatedSections:S,deletedSections:y})},[K.UPDATE_SECTIONS](e,t){var{commit:n,dispatch:o,state:r}=e,{key:c,sections:l,withLogging:d=!0}=t;d&&L(_(r,D));var T=l.map(((s,e)=>Object.assign(Object.assign({},s),{sortOrder:e})));n(h.UPDATE_SECTIONS,{key:c,sections:T}),o(K.SET_UPDATED_SECTION,{sections:T})},[K.UPDATE_SECTION](e,t){var{commit:n,dispatch:o,state:r}=e;L(_(r,D)),n(h.UPDATE_SECTION,t),o(K.SET_UPDATED_SECTION,{sections:[t.section]})},[K.SET_UPDATED_SECTION](e,t){var{commit:n,state:o}=e,{sections:r}=t,{addedSections:c,updatedSections:l}=o,[d,T]=r.reduce(((e,s)=>{var[t,n]=e,o=c.findIndex((e=>e.key===s.key)),r=l.findIndex((e=>e.key===s.key));return-1!==o?t.splice(o,1,s):-1!==r?n.splice(r,1,s):n.push(s),[t,n]}),[[...c],[...l]]);n(h.SET_EDITED_SECTIONS,{addedSections:d,updatedSections:T})},[K.FETCH_OPTIONS]:e=>Object(o.a)((function*(){var t,{state:o,commit:r}=e,c=null===(t=o.selectedSection)||void 0===t?void 0:t.displayType;if(c){var l=yield n(1759)("./".concat(c)).catch((()=>{}));l&&l.options?r(h.SET_OPTIONS,{options:l.options}):r(h.SET_OPTIONS,{options:{}})}else r(h.SET_OPTIONS,{options:{}})}))(),[K.SET_DRAGGING](e,t){var{commit:n}=e;n(h.SET_DRAGGING,t)},[K.SET_SELECTED]:(e,t)=>Object(o.a)((function*(){var n,{commit:o,dispatch:r,state:c}=e,l=(null===(n=t.section)||void 0===n?void 0:n.key)?((e,t)=>{var n=[];if(!e)return n;for(var o=function(o){var r=o.pop();if(!r)return{v:n};r!==e&&n.push(r);var c=t.find((s=>s.key===r));if(!c||!c.parentSectionKey)return{v:n};o.push(c.parentSectionKey)},r=[e];r.length;){var c=o(r);if("object"==typeof c)return c.v}return n})(t.section.key,c.flatSections):[];o(h.SET_SELECTED,Object.assign(Object.assign({},t),{parentKeys:l})),yield r(K.FETCH_OPTIONS)}))(),[K.HANDLE_DROP](e,t){var n=e.state.dragging;n&&(L(_(e.state,D)),S[n](e,t))},[K.HANDLE_CLICK_SIDE_MODAL](e,t){var n=e.state.selectedSection;if(n&&n.parentSectionKey){L(_(e.state,D));var{itemKey:o}=t,r=e.state.contentSideModal.sortOrder;S[o](e,{key:n.parentSectionKey,sortOrder:r})}},[K.INSERT_SECTION]:(e,t)=>Object(o.a)((function*(){var{dispatch:n,state:o}=e,{key:r,section:section,sortOrder:c,withLogging:l=!0}=t;n(K.ADD_SECTION,{key:r,section:section,withLogging:l});var d=o.flatSections.find((s=>s.key===section.key));if(d)if(-1!==c){var T=[];Object(O.a)(r,o.sectionTree,(s=>{s.contents&&T.push(...s.contents)})),T.sort(((a,b)=>a.depth+a.sortOrder-(b.depth+b.sortOrder))),T.splice(c,0,T.splice(d.sortOrder,1)[0]),n(K.UPDATE_SECTIONS,{key:r,sections:T,withLogging:l});var E=o.flatSections.find((s=>s.key===section.key));n(K.SET_SELECTED,{section:E})}else n(K.SET_SELECTED,{section:d})}))(),[K.TOGGLE_CONTENT_SIDE_MODAL](e,t){var{commit:n}=e;n(h.SET_CONTENT_SIDE_MODAL,{contentSideModal:t})},[K.COPY_SECTION](e,t){var n,{dispatch:o,state:r}=e;L(_(r,D));for(var{section:section,to:c}=t,l=[Object.assign(Object.assign({},section),{parentSectionKey:c||section.parentSectionKey})],d=new Map;l.length;){var T=l.pop();if(!T)break;var S=T.parentSectionKey,y=E(),O=!!T.contentKey;o(K.INSERT_SECTION,{section:Object.assign(Object.assign({},T),{key:y,parentSectionKey:null,contents:O&&T.contents?[...T.contents]:[]}),key:S?null!==(n=d.get(S))&&void 0!==n?n:S:null,sortOrder:T.sortOrder,withLogging:!1}),d.set(T.key,y),!O&&T.contents&&l.push(...T.contents)}},[K.UNDO](e){var t,n,{state:o,commit:r}=e,c=(t=_(o,D),(n=null==f?void 0:f.undo(t))?N(n):null);c&&r(h.RESTORE_MEMENTO,{memento:c})},[K.REDO](e){var t,n,{state:o,commit:r}=e,c=(t=_(o,D),(n=null==f?void 0:f.redo(t))?N(n):null);c&&r(h.RESTORE_MEMENTO,{memento:c})},[K.FETCH_DATASET_GROUP_KEY](e,t){var n=this;return Object(o.a)((function*(){var{commit:o}=e,{sectionKey:r}=t,c=yield n.$axios.$get("/v3/layout_infra/sections/".concat(r,"/dataset_groups")).catch((e=>{throw console.error(e),e}));o(h.SET_DATASET_GROUP_KEY,{key:c.data.key})}))()}},l.storeModule.actions),U={namespaced:!0,mutations:x,actions:G,state:A}},1705:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var o=n(2),r={size:{label:"コンテンツ幅",kind:"buttons",values:{flexSmall:{name:"flexSmall",label:"小"},flexMedium:{name:"flexMedium",label:"中"},flexLarge:{name:"flexLarge",label:"大"},fixLarge:{name:"fixLarge",label:"フィット"}}}};t.a=o.a.extend({computed:{sizeSuffix(){var e;return null===(e=this.section.contents)||void 0===e?void 0:e.map((s=>s.options.size?s.options.size.name:null))}},methods:{logInfo(){var section=this.section;console.log(null==section?void 0:section.displayType,"key: ".concat(null==section?void 0:section.key),"depth: ".concat(null==section?void 0:section.depth),"sortOrder: ".concat(null==section?void 0:section.sortOrder))}}})},1759:function(e,t,n){var map={"./Carousel":[3383,89],"./Carousel.vue":[3383,89],"./Carousel/CarouselItem":[2257,98],"./Carousel/CarouselItem.vue":[2257,98],"./Empty":[3384,107],"./Empty.vue":[3384,107],"./Horizontal":[2259,24],"./Horizontal/":[2259,24],"./Horizontal/Horizontal":[2258,102],"./Horizontal/Horizontal.vue":[2258,102],"./Horizontal/HorizontalEdit":[3385,17,31,108],"./Horizontal/HorizontalEdit.vue":[3385,17,31,108],"./Horizontal/index":[2259,24],"./Horizontal/index.vue":[2259,24],"./HorizontalScroll":[3386,92],"./HorizontalScroll.vue":[3386,92],"./HorizontalScroll/HorizontalScrollItem":[2260,99],"./HorizontalScroll/HorizontalScrollItem.vue":[2260,99],"./Image":[3387,100],"./Image.vue":[3387,100],"./List":[3388,103],"./List.vue":[3388,103],"./List/List1Column":[2749,37],"./List/List1Column.vue":[2749,37],"./List/List2Column":[2750,38],"./List/List2Column.vue":[2750,38],"./List/List3Column":[2751,39],"./List/List3Column.vue":[2751,39],"./List/ListLiquid":[2752,36],"./List/ListLiquid.vue":[2752,36],"./Spacer":[3389,104],"./Spacer.vue":[3389,104],"./Text":[3390,97],"./Text.vue":[3390,97],"./Text/Heading":[2261,95],"./Text/Heading.vue":[2261,95],"./Text/Paragraph":[2262,96],"./Text/Paragraph.vue":[2262,96],"./Vertical":[1966,23],"./Vertical/":[1966,23],"./Vertical/Vertical":[1965,101],"./Vertical/Vertical.vue":[1965,101],"./Vertical/VerticalEdit":[3391,17,32,109],"./Vertical/VerticalEdit.vue":[3391,17,32,109],"./Vertical/index":[1966,23],"./Vertical/index.vue":[1966,23]};function o(e){if(!n.o(map,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=map[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(map)},o.id=1759,e.exports=o},2032:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var o=e=>!!e&&["notes","creator_notes","magazine_notes","hashtag_notes","category_notes"].includes(e),r=