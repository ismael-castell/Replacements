/*Built by pcw player group @6/7/2022, 3:43:05 PM */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).QiyiPlayerLoader=t()}(this,function(){"use strict";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};function __extends(e,t){function a(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}function __awaiter(t,i,s,l){return new(s=s||Promise)(function(e,a){function r(e){try{o(l.next(e))}catch(t){a(t)}}function n(e){try{o(l["throw"](e))}catch(t){a(t)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((l=l.apply(t,i||[])).next())})}function __generator(a,r){var n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o,i,s,e,e={next:t(0),"throw":t(1),"return":t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return l([t,e])}}function(){}}var PlayerVersion="5.2.71";function mixin(a,e,r,n){function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function t(e,t){var a;for(a in e)if(o(e,a)&&t(e[a],a))break}return e&&t(e,function(e,t){!r&&o(a,t)||(n&&"string"!=typeof e&&"boolean"!=typeof e?(a[t]||(a[t]={}),mixin(a[t],e,r,n)):a[t]=e)}),a}var licked={},cookie={get:function(e,t){var a="",r,n;return(t=mixin({memory:!1},t,!0)).memory&&Object.prototype.hasOwnProperty.call(licked,e)?a=licked[e]:(!new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)||(n=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie))&&(a=n[2]||""),"string"==typeof a&&(a=decodeURIComponent(a)),t.memory&&(licked[e]=a)),a},set:function(e,t,a){a=a||{},t=encodeURIComponent(t);var r=a.expires;"number"==typeof a.expires&&(r=a.expires<=0?new Date(0):new Date).setTime(r.getTime()+a.expires),delete licked[e],document.cookie=e+"="+t+(a.path?"; path="+a.path:"")+(r?"; expires="+r.toUTCString():"")+(a.domain?"; domain="+a.domain:"")},remove:function(e,t){(t=t||{}).expires=-1,this.set(e,"",t)}},objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill,defaultMaxListeners=50,Dispatcher=(oa.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},oa.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},oa.prototype.getMaxListeners=function(){return $getMaxListeners(this)},oa.prototype.emit=function(e){var t,a,r,n,o,i,s="error"===e,i=this._events;if(i)s=s&&null==i.error;else if(!s)return!1;if(s){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;var s=new Error('Unhandled "error" event. ('+t+")");throw s.context=t,s}if(!(a=i[e]))return!1;var l="function"==typeof a,r;switch(r=arguments.length){case 1:emitNone(a,l,this);break;case 2:emitOne(a,l,this,arguments[1]);break;case 3:emitTwo(a,l,this,arguments[1],arguments[2]);break;case 4:emitThree(a,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];emitMany(a,l,this,n)}return!0},oa.prototype.on=function(e,t,a){return _addListener(this,e,t,a="object"!=typeof(a=void 0===a?{highPriority:!1}:a)?{}:a)},oa.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},oa.prototype.off=function(e,t){return _removeListener.call(this,e,t)},oa.prototype.un=function(e,t){this.off(e,t)},oa.prototype.removeAllListeners=function(e){var t,a,r,a=this._events;if(!a)return this;if(!a.off)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):a[e]&&(0==--this._eventsCount?this._events=objectCreate(null):delete a[e]),this;if(0===arguments.length){for(var n=objectKeys(a),o,r=0;r<n.length;++r)"off"!==(o=n[r])&&this.removeAllListeners(o);return this.removeAllListeners("off"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.off(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.off(e,t[r]);return this},oa.prototype.listeners=function(e){return _listeners(this,e,!0)},oa.prototype.rawListeners=function(e){return _listeners(this,e,!1)},oa.prototype.listenerCount=function(){return oa.listenerCount.apply(this,arguments)},oa),hasDefineProperty;function oa(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(err){hasDefineProperty=!1}function $getMaxListeners(e){return e._maxListeners===undefined?Dispatcher.defaultMaxListeners:e._maxListeners}function emitNone(e,t,a){if(t)e.call(a);else for(var r=e.length,n=arrayClone(e,r),o=0;o<r;++o)try{n[o].call(a)}catch(i){}}function emitOne(e,t,a,r){if(t)e.call(a,r);else for(var n=e.length,o=arrayClone(e,n),i=0;i<n;++i)try{o[i].call(a,r)}catch(s){}}function emitTwo(e,t,a,r,n){if(t)e.call(a,r,n);else for(var o=e.length,i=arrayClone(e,o),s=0;s<o;++s)try{i[s].call(a,r,n)}catch(l){}}function emitThree(e,t,a,r,n,o){if(t)e.call(a,r,n,o);else for(var i=e.length,s=arrayClone(e,i),l=0;l<i;++l)try{s[l].call(a,r,n,o)}catch(c){}}function emitMany(e,t,a,r){if(t)e.apply(a,r);else for(var n=e.length,o=arrayClone(e,n),i=0;i<n;++i)try{o[i].apply(a,r)}catch(s){}}function _addListener(e,t,a,r){var n,r,o,n=!!(r=void 0===r?{}:r).highPriority,n,n;if("function"!=typeof a)throw new TypeError('"listener" argument must be a function');return(r=e._events)?(r.newListener&&(e.emit("newListener",t,a.listener||a),r=e._events),o=r[t]):(r=e._events=objectCreate(null),e._eventsCount=0),o?("function"==typeof o?o=r[t]=[o,a]:n?o.shift(a):o.push(a),o.warned||(n=$getMaxListeners(e))&&0<n&&o.length>n&&(o.warned=!0,(n=new Error("Possible Dispatcher memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length)):(o=r[t]=a,++e._eventsCount),e}function _removeListener(e,t){var a,r,n,o,i;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(a=r[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=objectCreate(null):(delete r[e],r.off&&this.emit("off",e,a.listener||t));else if("function"!=typeof a){for(n=-1,o=a.length-1;0<=o;o--)if(a[o]===t||a[o].listener===t){i=a[o].listener,n=o;break}if(n<0)return this;0===n?a.shift():spliceOne(a,n),1===a.length&&(r[e]=a[0]),r.off&&this.emit("off",e,i||t)}return this}function onceWrapper(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _onceWrap(e,t,a){var e={fired:!1,wrapFn:undefined,target:e,type:t,listener:a},t=bind.call(onceWrapper,e);return t.listener=a,e.wrapFn=t}function _listeners(e,t,a){var e=e._events;if(!e)return[];var t=e[t];return t?"function"==typeof t?a?[t.listener||t]:[t]:a?unwrapListeners(t):arrayClone(t,t.length):[]}function listenerCount(e){var t=this._events;if(t){var e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function spliceOne(e,t){for(var a=t,r=a+1,n=e.length;r<n;a+=1,r+=1)e[a]=e[r];e.pop()}function arrayClone(e,t){for(var a=new Array(t),r=0;r<t;++r)a[r]=e[r];return a}function unwrapListeners(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}function objectCreatePolyfill(e){var t=function(){};return t.prototype=e,new t}function objectKeysPolyfill(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t);return t}function functionBindPolyfill(e){var t=this;return function(){return t.apply(e,arguments)}}hasDefineProperty?Object.defineProperty(Dispatcher,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=e}}):Dispatcher.defaultMaxListeners=defaultMaxListeners;var chrsz=8;function core_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,r=-271733879,n=-1732584194,o=271733878,i=0;i<e.length;i+=16){var s=a,l=r,c=n,p=o,a=md5_ff(a,r,n,o,e[i+0],7,-680876936),o=md5_ff(o,a,r,n,e[i+1],12,-389564586),n=md5_ff(n,o,a,r,e[i+2],17,606105819),r=md5_ff(r,n,o,a,e[i+3],22,-1044525330);a=md5_ff(a,r,n,o,e[i+4],7,-176418897),o=md5_ff(o,a,r,n,e[i+5],12,1200080426),n=md5_ff(n,o,a,r,e[i+6],17,-1473231341),r=md5_ff(r,n,o,a,e[i+7],22,-45705983),a=md5_ff(a,r,n,o,e[i+8],7,1770035416),o=md5_ff(o,a,r,n,e[i+9],12,-1958414417),n=md5_ff(n,o,a,r,e[i+10],17,-42063),r=md5_ff(r,n,o,a,e[i+11],22,-1990404162),a=md5_ff(a,r,n,o,e[i+12],7,1804603682),o=md5_ff(o,a,r,n,e[i+13],12,-40341101),n=md5_ff(n,o,a,r,e[i+14],17,-1502002290),a=md5_gg(a,r=md5_ff(r,n,o,a,e[i+15],22,1236535329),n,o,e[i+1],5,-165796510),o=md5_gg(o,a,r,n,e[i+6],9,-1069501632),n=md5_gg(n,o,a,r,e[i+11],14,643717713),r=md5_gg(r,n,o,a,e[i+0],20,-373897302),a=md5_gg(a,r,n,o,e[i+5],5,-701558691),o=md5_gg(o,a,r,n,e[i+10],9,38016083),n=md5_gg(n,o,a,r,e[i+15],14,-660478335),r=md5_gg(r,n,o,a,e[i+4],20,-405537848),a=md5_gg(a,r,n,o,e[i+9],5,568446438),o=md5_gg(o,a,r,n,e[i+14],9,-1019803690),n=md5_gg(n,o,a,r,e[i+3],14,-187363961),r=md5_gg(r,n,o,a,e[i+8],20,1163531501),a=md5_gg(a,r,n,o,e[i+13],5,-1444681467),o=md5_gg(o,a,r,n,e[i+2],9,-51403784),n=md5_gg(n,o,a,r,e[i+7],14,1735328473),a=md5_hh(a,r=md5_gg(r,n,o,a,e[i+12],20,-1926607734),n,o,e[i+5],4,-378558),o=md5_hh(o,a,r,n,e[i+8],11,-2022574463),n=md5_hh(n,o,a,r,e[i+11],16,1839030562),r=md5_hh(r,n,o,a,e[i+14],23,-35309556),a=md5_hh(a,r,n,o,e[i+1],4,-1530992060),o=md5_hh(o,a,r,n,e[i+4],11,1272893353),n=md5_hh(n,o,a,r,e[i+7],16,-155497632),r=md5_hh(r,n,o,a,e[i+10],23,-1094730640),a=md5_hh(a,r,n,o,e[i+13],4,681279174),o=md5_hh(o,a,r,n,e[i+0],11,-358537222),n=md5_hh(n,o,a,r,e[i+3],16,-722521979),r=md5_hh(r,n,o,a,e[i+6],23,76029189),a=md5_hh(a,r,n,o,e[i+9],4,-640364487),o=md5_hh(o,a,r,n,e[i+12],11,-421815835),n=md5_hh(n,o,a,r,e[i+15],16,530742520),a=md5_ii(a,r=md5_hh(r,n,o,a,e[i+2],23,-995338651),n,o,e[i+0],6,-198630844),o=md5_ii(o,a,r,n,e[i+7],10,1126891415),n=md5_ii(n,o,a,r,e[i+14],15,-1416354905),r=md5_ii(r,n,o,a,e[i+5],21,-57434055),a=md5_ii(a,r,n,o,e[i+12],6,1700485571),o=md5_ii(o,a,r,n,e[i+3],10,-1894986606),n=md5_ii(n,o,a,r,e[i+10],15,-1051523),r=md5_ii(r,n,o,a,e[i+1],21,-2054922799),a=md5_ii(a,r,n,o,e[i+8],6,1873313359),o=md5_ii(o,a,r,n,e[i+15],10,-30611744),n=md5_ii(n,o,a,r,e[i+6],15,-1560198380),r=md5_ii(r,n,o,a,e[i+13],21,1309151649),a=md5_ii(a,r,n,o,e[i+4],6,-145523070),o=md5_ii(o,a,r,n,e[i+11],10,-1120210379),n=md5_ii(n,o,a,r,e[i+2],15,718787259),r=md5_ii(r,n,o,a,e[i+9],21,-343485551),a=safe_add(a,s),r=safe_add(r,l),n=safe_add(n,c),o=safe_add(o,p)}return Array(a,r,n,o)}function md5_cmn(e,t,a,r,n,o){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(r,o)),n),a)}function md5_ff(e,t,a,r,n,o,i){return md5_cmn(t&a|~t&r,e,t,n,o,i)}function md5_gg(e,t,a,r,n,o,i){return md5_cmn(t&r|a&~r,e,t,n,o,i)}function md5_hh(e,t,a,r,n,o,i){return md5_cmn(t^a^r,e,t,n,o,i)}function md5_ii(e,t,a,r,n,o,i){return md5_cmn(a^(t|~r),e,t,n,o,i)}function safe_add(e,t){var a=(65535&e)+(65535&t),r;return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function bit_rol(e,t){return e<<t|e>>>32-t}function str2binl(e){for(var t=Array(),a=(1<<chrsz)-1,r=0;r<e.length*chrsz;r+=chrsz)t[r>>5]|=(e.charCodeAt(r/chrsz)&a)<<r%32;return t}function binl2hex(e){for(var t="0123456789abcdef",a="",r=0;r<4*e.length;r++)a+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return a}function md5(e){return binl2hex(core_md5(str2binl(e),e.length*chrsz))}var isBool=function(e){return"boolean"==typeof e},isNum=function(e){return"number"==typeof e&&!isNaN(e)},isObject=function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},isArray=function(e){var e,e=Array.isArray?Array.isArray(e):"[object array]"===Object.prototype.toString.call(e).toLowerCase();return e},formatMilliseconds=function(e){if(isNaN(e))return"00:00:00";var t=3600<=(e=Math.round(e))?Math.floor(e/3600):0,a,a=10<=(a=60<=e%3600?Math.floor(e%3600/60):0)?a:"0"+a;return e=10<=(e=0<=parseInt(a,10)?e%3600%60:e)?e:"0"+e,0<t?(9<t?t:"0"+t)+":"+a+":"+e:a+":"+e},protocolRevise=function(e){var t="",t;return t=(t=(t=(e=void 0===e?"":e).replace("http://","//")).replace("https://","//")).replace(".qiyipic",".iqiyipic")},hex2rgba=function(e,t){void 0===t&&(t=1);for(var a=[],r=1;r<e.length;){var n=e.substring(r,r+2);a.push(parseInt(n,16)),r+=2}return a.push(t),"rgba("+a.join(",")+")"},util={isBool:isBool,isNumber:isNum,isArray:isArray,isObject:isObject,formatMilliseconds:formatMilliseconds,protocolRevise:protocolRevise,hex2rgba:hex2rgba},doc=document,noop=function(){},cacheMappingURL={},accepts={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},converters={"*":null,text:null,html:null,xml:null,json:function(e){var t={},a=window.JSON?JSON.parse:function(){return{}};try{t=a(e)}catch(r){}return t}},defaultOptions={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:noop,success:noop,failure:noop},_paramFormat=function(e){var t=[];if("object"==typeof e)for(var a in e)t[t.length]=encodeURIComponent(a)+"="+encodeURIComponent(e[a]);return t.join("&").replace(/%20/g,"+")},ajax=function(d){mixin(d=d||{},defaultOptions);var u=d.url,f=d.dataType,_=d.params||{},y=d.success,h=d.failure,e;u&&function(){__awaiter(this,void 0,void 0,function(){function t(){var e;if(s+=", readyState = "+c.readyState,4==c.readyState)if(e=converters[f]?converters[f](c.responseText):c.responseText,s+=", status = "+c.status+", statusText = "+c.statusText,200==c.status){if("json"===f&&"string"==typeof e)try{e=JSON.parse(e)}catch(a){}y(e)}else if(!l){l=!0;var t="";try{t=JSON.stringify(e)}catch(a){t=" json error"}s+=", data = "+t+"url = "+r.url,h("xhr error, time = "+d.timeout+s)}}function a(e){var e;l||(l=!0,e="xhr timeout, time = "+d.timeout+", readyState = "+c.readyState+", status = "+c.status+", data = "+JSON.stringify(e)+"url = "+r.url,h(e))}var r,n,o,i,s,l,c,p;return __generator(this,function(e){switch(e.label){case 0:return r={},n=d.headers,o=d.data||null,i=_paramFormat(_),r.params=_,r.url=u+(0<i.length?(/\?/i.test(u)?"&":"?")+i:""),"function"!=typeof d.beforeSend?[3,2]:[4,d.beforeSend(r)];case 1:r=e.sent(),e.label=2;case 2:if(s="",l=!1,(c=new XMLHttpRequest).withCredentials=d.withCredentials,c.onreadystatechange=t,c.ontimeout=a,c.open(d.method,r.url,!0),c.timeout=d.timeout,c.setRequestHeader("Accept",accepts[f]),util.isObject(n))for(p in n)c.setRequestHeader(p,n[p]);return c.send(o),[2]}})})}()},xhrJSON=function(e){mixin(e=e||{},defaultOptions),e.dataType="json",ajax(e)},jsonp=function(e){mixin(e=e||{},defaultOptions);var t=e.url,a=e.params||{},r=_paramFormat(a),n=t+(0<r.length?(/\?/i.test(t)?"&":"?")+r:""),o=e.complete,i=e.success,s=e.failure,l=(e.callbackhead||"Q")+md5(e.fixedCallback||n),c=!!e.memory,p=md5(n),d=cacheMappingURL[p];if(n){if(!(c&&d&&i)){var u=function(e,t,a){switch(f(),e){case"success":c&&(cacheMappingURL[p]=a),i(a);break;case"fail":s(a,t)}o(a)},f=function(){if(window[l]){window[l]=undefined;try{delete window[l]}catch(e){}}},_;window[l]=function(e){f(),setTimeout(function(){u("success","200",e)},0)};var y={},h=doc.createElement("script");h.async=!0,h.type="text/javascript",h.charset=e.charset;var m=function(){if(h)try{h.onload(null,!0)}catch(e){}};h.abort=m,h.onload=h.onreadystatechange=function(e,t){!t&&h.readyState&&!/loaded|complete/.test(h.readyState)||(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),h=null,clearTimeout(_))},h.onerror=function(){u("fail",null),m()};var _=setTimeout(function(){u("fail",408),m()},e.timeout),r={};if(r[e.jsonpCallback]=l,mixin(a,r,!0),e.isSort&&1==e.isSort){var g=[],E="",A;for(A in e.params)g.push(A+"="+e.params[A]);g.sort();for(var A=0;A<g.length;A++)A===g.length-1?E+=g[A]:E+=g[A]+"&";y.url=t+(/\?/i.test(t)?"&":"?")+E}else y.url=n+(/\?/i.test(n)?"&":"?")+_paramFormat(r);return y.params=a,"function"==typeof e.beforeSend&&(y=e.beforeSend(y)||y),h.src=y.url,doc.getElementsByTagName("head")[0].appendChild(h),h}i(d)}},beacon=function(e,t,a){if(void 0===a&&(a={}),"string"==typeof t){var a=mixin({cache:!1},a,!0);if(e){var r=[],n;for(n in!1===a.cache&&(e._=+new Date),e)r.push(n+"="+encodeURIComponent(e[n]));var t=t+(/\?/.test(t)?"&":"?")+r.join("&"),o=new Image;o.onload=o.onerror=o.onabort=function(){o.onload=o.onerror=o.onabort=null,o=null},o.src=t}}},http={serializeParam:_paramFormat,ajax:ajax,json:xhrJSON,jsonp:jsonp,beacon:beacon},data={},changeData={},deleteData={},tMark=0,storage={getItem:function(e){return data[e]},setItem:function(e,t){data[e]=t},removeItem:function(e){delete data[e]}},ls=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return storage}(),updateStorage=function(){0===tMark&&(clearTimeout(tMark),tMark=setTimeout(function(){for(var e in tMark=0,changeData)ls.setItem(e,changeData[e]),delete changeData[e];for(var t in deleteData)ls.removeItem(t),delete deleteData[t]},1e3))},storage$1={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return data[e]||(data[e]=ls.getItem(e)),data[e]},write:function(e,t){data[e]=t,changeData[e]=t,updateStorage()},remove:function(e){delete data[e],deleteData[e]=0,updateStorage()}},loggerMessageChanged=!1,LOGGER_MESSAGE="",AD_LOGGER_MESSAGE="",LOGGER_KEY="QiyiPlayerLogger",LOGGER_LEVEL_KEY="QiyiPlayerLoggerLevel",COLOR_BG_NORMAL="#FFA500",COLOR_BG_WARN="#ff6cb7",COLOR_BG_ERROR="#F30",COLOR_BG_DEBUG="#FFA500",Levels={OFF:{value:0,name:"OFF"},ERROR:{value:1,name:"ERROR"},WARN:{value:2,name:"WARN"},INFO:{value:3,name:"INFO"},DEBUG:{value:4,name:"DEBUG"}},filterLevelInStore=parseInt(storage$1.read(LOGGER_LEVEL_KEY),10),slice=Array.prototype.slice,DefaultLoggerName="Unknown",prelogInfo="",repeatNum=0,prelog="",timeLabel=function(){var e;try{e=(new Date).toISOString()}catch(t){e=(new Date).toString()}return e},checkrepeat=function(e){var t=e.join("");prelog!==t?(prelog=t,repeatNum=0):(1<++repeatNum&&(LOGGER_MESSAGE=(LOGGER_MESSAGE=LOGGER_MESSAGE.replace(prelogInfo,"")).substring(0,LOGGER_MESSAGE.length-2)),e.push(">>repeat("+repeatNum+")<<"))},logHandler=function(e,t){var a,r=COLOR_BG_NORMAL,n;if(e=slice.call(e),checkrepeat(e),e.unshift("%c"),t.name!==DefaultLoggerName&&e.unshift("["+t.name+"]"),e.unshift("%c["+timeLabel()+" "+t.level.name+"]"),t.level!==Levels.DEBUG&&(prelogInfo=e.join("").replace(/%c/gi,""),LOGGER_MESSAGE=(""!==(n=LOGGER_MESSAGE||"")?n+"\n":"")+prelogInfo,loggerMessageChanged=!0),"undefined"!=typeof console)try{a=console.log,t.level===Levels.WARN&&console.warn?(a=console.warn,r=COLOR_BG_WARN):t.level===Levels.ERROR&&console.error?(a=console.error,r=COLOR_BG_ERROR):t.level===Levels.INFO&&console.info?a=console.info:t.level===Levels.DEBUG&&console.debug&&(a=console.debug,r=COLOR_BG_DEBUG),t.print&&a.apply(console,[e.join(" ")+" ","background-color:#699f00;color:#fff;","background-color:"+r+";color:#fff;"])}catch(o){}},emitOnce=!0,PlayerLogger=(Jf=Dispatcher,__extends(Kf,Jf),Kf.stringify=function(e){var t="";try{t=JSON.stringify(e)}catch(a){}return t},Kf.setLevel=function(e){e&&"value"in e&&(Kf._filterLevel=e,storage$1.write(LOGGER_LEVEL_KEY,e.value))},Kf.getLevel=function(){if(!Kf._filterLevel){var e=Levels.WARN,t;for(t in Levels)Levels[t].value===filterLevelInStore&&(e=Levels[t]);Kf._filterLevel=e}return Kf._filterLevel},Kf.getLog=function(){return LOGGER_MESSAGE+"\n\n\n **** ad log ****\n"+AD_LOGGER_MESSAGE},Kf.saveImmediately=function(){writeLogInstantly()},Kf.prototype.enabledFor=function(e){return e.value<=Kf.getLevel().value},Kf.prototype.invoke=function(e,t){logHandler(t,mixin({level:e,print:this.enabledFor(e)},this.context))},Kf.prototype.debug=function(){this.invoke(Levels.DEBUG,arguments)},Kf.prototype.log=function(){var e=arguments[1];emitOnce&&this.context.name===DefaultLoggerName&&"string"==typeof e&&/^w: overflow NALU found/.test(e)&&(emitOnce=!1,this.emit("needFireLog")),this.invoke(Levels.INFO,arguments)},Kf.prototype.info=function(){this.invoke(Levels.INFO,arguments)},Kf.prototype.adInfo=function(e){AD_LOGGER_MESSAGE=e},Kf.prototype.warn=function(){this.invoke(Levels.WARN,arguments)},Kf.prototype.error=function(){this.invoke(Levels.ERROR,arguments)},Kf),Jf;function Kf(e){var t=Jf.call(this)||this;return t.context={name:e||DefaultLoggerName},t}PlayerLogger.Levels=Levels;var period=3e4,M=1048576,limitSize=.5*M;function truncateLog(e,t){var a="\n",r,a=LOGGER_MESSAGE.split(a).slice(0,16).join(a)+a+"~~~~~truncated log~~~~~"+a;LOGGER_MESSAGE=a+LOGGER_MESSAGE.slice(a.length<e?e:a.length,t)}function writeLogInstantly(){var e=LOGGER_MESSAGE.length;limitSize<e&&truncateLog(e-limitSize,e),storage$1.write(LOGGER_KEY,LOGGER_MESSAGE+"\n\n\n **** ad log ****\n"+AD_LOGGER_MESSAGE)}function cronLogIntoStore(){loggerMessageChanged&&(loggerMessageChanged=!1,writeLogInstantly()),setTimeout(cronLogIntoStore,period)}setTimeout(cronLogIntoStore,period);var _parse=function(e){var t="",a="",r="",n="",o=/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/,o=e.match(o);return o&&(t=o[1],a=o[2],r=o[3],n=o[4]),{protocol:t,host:a,port:r,path:n}},_queryToJson=function(e){for(var t,a=e.substr(e.lastIndexOf("?")+1).split("&"),r=a.length,n={},o=0,i,s,l,s;o<r;o++)a[o]&&(i=(s=a[o].split("=")).shift(),s=s.join("="),void 0===(l=n[i])&&(n[i]=s));return n},_getQueryValue=function(e,t){1===arguments.length&&(t=e,e=window.location.href);var t=String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1"),t=new RegExp("(^|&|\\?|#)"+t+"=([^&#]*)(&|$|#)",""),t=e.match(t);return t?t[2]:""},_filename=function(e){var e=_parse(e),t;return(e&&e.path||"").replace(/^.*[\\\/]/,"").split(".")[0]},urlkit={parse:_parse,query:_getQueryValue,query2Json:_queryToJson,filename:_filename},ConstantType={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",SkinType_pc:"pc",SkinType_mobile:"mobile",SkinType_mini:"mini",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_CHECK_CLIENT_INSTALL:"checkClientInstall",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_BARRAGE_SEND:"barrageSend",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_WRITE_FLASH_LOG:"writeFlashLog",QYPLAYER_SWITCH_PLAYER:"switchPlayer",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_AD_BLOCK:"adblock",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_SCORECHANGE:"scoreTaskChange",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW:"feedbackPanelShow",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_BuyPlay:"buyPlay",QYPLAYER_NOTIFY_TO_DIVERSION:"todiversion",QYPLAYER_NOTIFY_AI_STAR_INFO:"aistarinfo",QYPLAYER_NOTIFY_AI_FEEDBACK:"aifeedback",QYPLAYER_NOTIFY_AI_STAR_CLOSE:"aistarclose",QYPLAYER_NOTIFY_SHOW_VIDEOLIST:"showvideolist",QYPLAYER_NOTIFY_CLICK_VIDEOLIST_BTN:"clickVideolistBtn",QYPLAYER_NOTIFY_FOLLOW_CLICK:"followbtnclick",QYPLAYER_NOTIFY_INTERACTION_START:"interactionstart",QYPLAYER_NOTIFY_INTERACTION_END:"interactionend",QYPLAYER_NOTIFY_METAPANEL_STATE_CHANGE:"metaPanelStateChange",QYPLAYER_NOTIFY_RF_STATE_CHANGE:"rightFloaterStateChange",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged",QYPLAYER_H5_SEEK_DRAGSTART:"h5seekdragstart",QYPLAYER_H5_SEEK_DRAGEND:"h5seekdragend"},_uuidTick=0,_newUser=undefined,_veid="",_webEventId=window.webEventID||"",_removeWeid=function(){_webEventId=window.webEventID||""},_genUuid=function(){return md5(window.navigator.userAgent+document.cookie+Math.random()+(new Date).getTime()*_uuidTick++)},saveCookie=function(e,t,a){cookie.set(e,t,{expires:a||31536e6,path:"/",domain:"iqiyi.com"})},_getJsuid=function(){var e="QC006",t=cookie.get(e);return t||(window.QiyiPlayerIsNewUser=!0,t=_genUuid(),saveCookie(e,t)),t},_getFluid=function(){return _checkJSUid()},_checkJSUid=function(){var e="QC005",t,a=cookie.get(e);return a||(a=_genUuid(),saveCookie(e,a,283824e7)),a},UUID={createUUID:function guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getQtsid:function(){var e,t=/^\d{10}\.\d{10}\.\d{10}\.\d+$/,a=function(){return parseInt(new Date/1e3,10).toString()},a,e;return e=cookie.get("QC008"),cookie.get("QC010")&&e||(t.test(e)?((e=e.split("."))[1]=e[2],e[2]=a(),e[3]=parseInt(e[3],10)+1):e=[a=a(),a,a,"1"],e.join(".")),e},getJsuid:_getJsuid,getFluid:_getFluid,getWeid:function(){return _webEventId=_webEventId||(window.webEventID||md5(_getJsuid()+"weid"+ +new Date))},getEid:function(){var e="";return _veid||(e=_getJsuid(),_veid=md5(e+"veid"+ +new Date)),_veid},getIsNewUser:function(e){var e,t;return(e=void 0===e?!1:e)||_newUser===undefined&&(e="QP0030",1===parseInt(cookie.get(e),10)?_newUser=!1:(_newUser=!0,saveCookie(e,1,283824e7))),window.QiyiPlayerIsNewUser===undefined&&(window.QiyiPlayerIsNewUser=!1,_getJsuid()),window.QiyiPlayerIsNewUser},init:function(){try{window.addEventListener("unload",_removeWeid),window.addEventListener("beforeunload",_removeWeid),window.addEventListener("pagehide",_removeWeid)}catch(e){}}};function platform(){var e="",l={},c={},t="",a=navigator,r=a.platform,n=a.userAgent.toLowerCase();c.userAgent=n;var o="",o=navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:(o=n.match(/NetType\/\w+/)?n.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/",""),i=n.match(/rtrident/),s=!i&&n.match(/(ipad).*os\s([\d_]+)/),p=!i&&!s&&n.match(/(iphone\sos)\s([\d_]+)/),d=n.match(/Android\s+([\d.]+)/i),u=n.match(/(?:redmi|hm) ([\w ]+) build/i),f=n.match(/iqiyireader iqiyireaderversion\/([\d.]+)/i),_=n.match(/iqiyiversion_reader\/([\d.]+)/i),a=!f&&!_&&/iqiyiapp/gi.test(n),y,h;c.IE11=/rv\:11/.test(n),c.IE=/msie/.test(n)||c.IE11,c.IE6=/msie 6/.test(n),c.IE7=/msie 7/.test(n),c.IE8=/msie 8/.test(n),c.IE9=/msie 9/.test(n),c.IE10=/msie 10/.test(n),c.EDGE=/edge/.test(n),c.iPhone=/iphone os/.test(n)&&!i,c.iPhone4=/iphone os [45]_/.test(n)&&!i,c.iPad=/ipad/.test(n)&&!i,c.iPod=/iPod/i.test(n)&&!i,c.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,c.CHROMEIOS=/crios/.test(n),c.CHROME=/chrome/.test(n)&&!c.EDGE,c.SAFARI=/safari/.test(n)&&!/chrome/.test(n),c.FIREFOX=/firefox/.test(n),c.mobile=/mobile/gi.test(n),c.mobileSafari=c.iPhone||c.iPhone||c.iPad,c.QQ=/QQBrowser/gi.test(n),c.WECHAT=/(wechat)|(micromessenger)/gi.test(n),c.SmartTV=/SMART-TV/gi.test(n),c.BAIDU=/baidubrowser/gi.test(n),c.BAIDU_BOX=/baiduboxapp/gi.test(n),c.HUAWEI=/huaweibrowser/gi.test(n),c.VIVO=/vivobrowser/gi.test(n),c.MIUI=/miuibrowser/gi.test(n),c.MIUI_VIDEO=/miuivideo/gi.test(n),c.CHROME&&(y=/chrome\/([\d\.]+) /gi.exec(n),c.version=y?parseInt(y[1],10):0),c.EDGE&&(h=/edge\/([\d\.]+)/gi.exec(n),c.version=h?parseInt(h[1],10):0),u&&(c.redmi=u);var y=/mac/i.test(r),h="X11"==r&&!y,u=/win/i.test(r)&&!h,r=/android/.test(n);l.unix=h,l.win=u,l.mac=y,l.android=r,l.androidMobile=r&&c.mobile,l.androidTablet=r&&(!c.mobile||/pad/i.test(n)),d&&(l.version=d[1]),l.ios=!1,p&&(l.ios=!0,l.version=p[2].replace(/_/g,".")),s&&(l.ios=!0,l.version=s[2].replace(/_/g,".")),c.iPod&&(l.ios=!0);var e=c.iPad?"b85da1cf3ae44351":"b6c13e26323c537d",m=function(e){var t="01";(c.iPhone||l.android)&&(t="02"),(c.iPad||l.androidTablet)&&(t="03");var a="01",r,n,o,i,s;return l.android&&(a="02"),l.mac&&(a="08"),t+(a=l.ios?"03":a)+"003"+"101"+"00"+(e?"10":"00")+"000000"},g=function(e){return t||m(e)},n=function(e){t=e},d=function(e){var t=1,a;switch(g(e).substr(0,4)){case"0108":t=276;break;case"0303":t=10;break;case"0302":t=11;break;case"0203":t=13;break;case"0202":t=12}return t},p=function(){var e="";return c.CHROME?e="CHROME":c.SAFARI?e="SAFARI":c.FIREFOX?e="FIREFOX":c.QQ?e="QQ":c.WECHAT?e="WECHAT":c.IE?e="IE":c.IE6?e="IE6":c.IE7?e="IE7":c.IE8?e="IE8":c.IE9?e="IE9":c.IE10?e="IE10":c.EDGE?e="EDGE":c.mobileSafari?e="mobileSafari":l.ios||l.ios?e="ios":l.androidMobile?e="androidMobile":l.androidTablet&&(e="androidTablet"),e},s=function(e,t){function a(e){return-1<e.indexOf(".")?e.split(".").slice(0,3):[e.slice(0,6)]}try{e=a(""+e),t=a(""+t);for(var r=0;r<e.length||r<t.length;){var n=r<e.length&&"undefined"!=typeof e[r]?parseInt(e[r]):0,o=r<t.length&&"undefined"!=typeof t[r]?parseInt(t[r]):0;if(o<n)return 1;if(n<o)return-1;r++}}catch(i){}return 0},s=l.ios&&!f&&!_||l.android&&((a||c.HUAWEI||c.MIUI_VIDEO||c.MIUI)&&0<=s(l.version,"4.0")||(c.BAIDU_BOX||c.BAIDU||c.WECHAT||!c.WECHAT&&c.QQ&&0<=s(c.version,"7.6"))&&0<=s(l.version,"4.4")||c.VIVO&&0<s(l.version,"5.0"))?"m3u8":"mp4";return/__pmode__=m3u8/.test(window.location.href)?s="m3u8":/__pmode__=mp4/.test(window.location.href)&&(s="mp4"),{browser:c,os:l,code:e,getPtid:g,setPtid:n,getAgentType:d,browserName:p,network:o,playerMode:s}}var platform$1=platform(),protocol=window.location.protocol,opendataURL=protocol+"//msg.qy.net/v5/bi/opendata",PF_CODE_PCW="1",PF_CODE_MOBILE="2",P_CODE_PCW="10",P_CODE_MOBILE="20",P1_CODE_PCW="101",P1_CODE_PHW="201",P1_CODE_TBW="202",pf=PF_CODE_PCW,p=P_CODE_PCW,p1=P1_CODE_PCW;platform$1.browser.iPad?(pf=PF_CODE_MOBILE,p=P_CODE_MOBILE,p1=P1_CODE_TBW):(platform$1.os.ios||platform$1.os.android)&&(pf=PF_CODE_MOBILE,p=P_CODE_MOBILE,p1=P1_CODE_PHW);var p_code=pf+"_"+p+"_"+p1,os_type="";platform$1.os.ios||platform$1.os.mac?os_type=2:platform$1.os.android&&(os_type=1);var _send=function(e){var t;mixin(t={p1:p_code,flashuid:UUID.getFluid()||"",v:e.playerVersion,pkg:"",sid:UUID.getWeid(),sttime:"",os_t:os_type,os_v:navigator.platform||"",ua_model:"",brand:"",lang:navigator.language||navigator.browserLanguage,resolution:window.screen.width+"*"+window.screen.height,network:"",cell_id:"",gps_lon:"",gps_lat:"",ipv4:"",tvid:e.tvid||"",aid:e.albumId||"",cid:e.cid||"",pid:UUID.getEid(),duration:e.duration||"",rn:+new Date,rfr:window.document.referrer,url:window.location.href,br:platform$1.browser.userAgent,ce:UUID.getWeid(),c2:""},e,!0),http.beacon(t,opendataURL)},ThreePingback=(Sh.prototype.sendStartPlayPingback=function(e){e.type=3,e.sttime=Math.round((new Date).getTime()/1e3),_send(e)},Sh.prototype.sendEndPlayPingback=function(e){e.type=4,e.sttime=Math.round((new Date).getTime()/1e3),_send(e)},Sh);function Sh(){}var ThreePingback$1=new ThreePingback;function isSupported(){var e=!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach,t=window.MediaSource||window.WebKitMediaSource,a=window.URL,r=!1,n,o,r;return t&&"function"==typeof t.isTypeSupported&&(n=t.isTypeSupported('video/mp4;codecs="avc1.42E01E"'),r=t.isTypeSupported('audio/mp4;codecs="mp4a.40.2"')&&n),e&&!!a&&(!!r||platform$1.browser.EDGE)}var mseFlag=isSupported(),_userAgent=navigator.userAgent,chromeVersion=/chrome\/([\d\.]+) /gi.exec(_userAgent.toLowerCase()),chromeVersion=chromeVersion?parseInt(chromeVersion[1],10):0,firxfoxVersion=/firefox\/([\d\.]+)/gi.exec(_userAgent.toLowerCase()),firxfoxVersion=firxfoxVersion?parseInt(firxfoxVersion[1],10):0,safariVersion=/Version\/([\d\.]+)/gi.exec(_userAgent.toLowerCase()),_swf;function isSupportKernel(){var e=platform$1.browser.WECHAT,t=platform$1.browser.CHROME&&34<=chromeVersion&&!platform$1.browser.EDGE,a=platform$1.browser.SAFARI&&10<=safariVersion,r=platform$1.browser.FIREFOX&&42<=firxfoxVersion,n=platform$1.browser.EDGE,o=platform$1.browser.SmartTV,i;return mseFlag&&(e||t||a||r||n||o)}function isSupportHtml5(){return isSupportKernel()||platform$1.os.ios||platform$1.os.android}function getForcedType(){var e;return cookie.get("player_forcedType")||null}function getDefaultType(){var e=ConstantType.PlayerType_Html5VOD,t;return e="flash"==urlkit.query("__playertype__")?ConstantType.PlayerType_FlashVOD:e}function getPlayerType(e){var t;return isSupportHtml5()?getForcedType()||e||getDefaultType():ConstantType.PlayerType_FlashVOD}var safariVersion=safariVersion?parseFloat(safariVersion[1]):0,EmbedSwf=(li.prototype.embed=function(e,t){var a=[];a.push("<object>");var r="",n=document.getElementById(e.parentId);e.isInPca?r='<style type="text/css">  div, span, a {margin: 0;padding: 0;}  a {text-decoration: none;}  a:link, a:visited, a:hover, a:active {text-decoration: none;}  .iqp-layer-upgrade {position: absolute;top: -1px;left: -1px;right: -1px;bottom: -1px;background-color: #000;z-index: 100;font-size: 14px;line-height: 32px;}  .iqp-layer-upgrade .iqp-layer-con {position: absolute; width: 100%;top: 50%;-webkit-transform: translateY(-50%);transform: translateY(-50%);text-align: center;}  .iqp-layer-upgrade .iqp-layer-main {line-height: 32px;font-size: 16px; color: #fff;}</style><div class="iqp-layer-upgrade">   <div class="iqp-layer-con">       <div class="iqp-layer-main">浏览器内核正在升级，请稍后重试...</div>   </div></div>':r+='<style type="text/css">  div, span, a {margin: 0;padding: 0;}  a {text-decoration: none;}  a:link, a:visited, a:hover, a:active {text-decoration: none;}  .iqp-layer-upgrade {position: absolute;top: -1px;left: -1px;right: -1px;bottom: -1px;background-color: #000;z-index: 100;font-size: 14px;line-height: 32px;}  .iqp-layer-upgrade .iqp-layer-con {position: absolute; width: 100%;top: 50%;-webkit-transform: translateY(-50%);transform: translateY(-50%);text-align: center;}  .iqp-layer-upgrade .iqp-layer-main {line-height: 32px;font-size: 16px; color: #fff;}  .iqp-layer-upgrade .iqp-layer-minor {line-height: 30px;font-size: 14px; color: #fff;opacity: 0.5;}  .iqp-layer-upgrade .browser-item {box-sizing: border-box;display: inline-block;width: 160px;height: 40px;border: 1px solid #00CC4C;border-radius: 6px;margin-top: 16px; font-size: 0;}  .iqp-layer-upgrade .browser-item:hover { border-color: #33D66F; }  .iqp-layer-upgrade .browser-item:hover .browser-name {color: #33D66F;}  .iqp-layer-upgrade .browser-item:hover .browser-btn {background-color:#33D66F;}  .iqp-layer-upgrade .upgrade-icon {display: inline-block;vertical-align: middle;width: 24px;height: 24px;background-image: url(//www.iqiyipic.com/common/fix/player/upgradeTips-icon.png);background-repeat: no-repeat; margin-right: 8px;}  .iqp-layer-upgrade .upgrade-icon.browser-goole {background-position: 0 0;}  .iqp-layer-upgrade .upgrade-icon.browser-QQ {background-position: -25px 0;}  .iqp-layer-upgrade .upgrade-icon.browser-360 {background-position: -50px 0;}  .iqp-layer-upgrade .browser-name {display: inline-block;vertical-align: middle;line-height: 38px;font-size: 14px;color: #00CC4C;}  .iqp-layer-upgrade .browser-btn {float: right;width: 40px;height: 38px;background-color: #00CC4C;border-radius: 0 4px 4px 0;}  .iqp-layer-upgrade .browser-btn .upgrade-icon {display: inline-block;width: 20px;height: 20px;background-position: -75px 0;margin-right: 0;margin-top: 4px;}  @media screen and (min-width: 0) {.iqp-layer-upgrade .upgrade-icon { background-image: url(//www.iqiyipic.com/common/fix/player/upgradeTips-icon@2x.png);background-size: 100px 25px;}}</style><div class="iqp-layer-upgrade">   <div class="iqp-layer-con">       <div class="iqp-layer-main">当前浏览器不支持播放，建议使用以下浏览器</div>       <div class="iqp-layer-minor">下列软件均已通过安全验证，您可放心安装</div>       <div class="iqp-layer-browser">           <div class="browser-wrap">               <a href="//www.google.cn/intl/zh-CN/chrome/" class="browser-item">                   <span class="upgrade-icon browser-goole"></span>                   <span class="browser-name">谷歌浏览器</span>                   <span class="browser-btn">                       <i class="upgrade-icon"></i>                   </span>               </a>           </div>           <div class="browser-wrap">               <a href="//browser.qq.com/" class="browser-item">                   <span class="upgrade-icon browser-QQ"></span>                   <span class="browser-name">QQ浏览器</span>                   <span class="browser-btn">                       <i class="upgrade-icon"></i>                   </span>               </a>           </div>           <div class="browser-wrap">               <a href="//browser.360.cn/ee/" class="browser-item">                   <span class="upgrade-icon browser-360"></span>                   <span class="browser-name">360浏览器</span>                   <span class="browser-btn">                       <i class="upgrade-icon"></i>                   </span>               </a>           </div>       </div>   </div></div>',a.push(r),a.push("</object>");var a=a.join(""),o=document.createElement("div");o.innerHTML=a;try{n.appendChild(o.firstChild),(_swf=document.getElementById(e.origin)).loadSuccess=!1}catch(i){}return o=null,_swf},li.prototype.addEvent=function(e,t,a){window.attachEvent?e.attachEvent("on"+t,a):window.addEventListener&&e.addEventListener(t,a)},li);function li(){}var cbcache={},genCacheKey=function(e){return e},VideoInfo={get:function(e,o){var t=e.tvid,a=e.locale,e=genCacheKey(t),t,t;cbcache[e]=cbcache[e]||[],cbcache[e].push(o),t&&o&&(t="//pcw-api.iqiyi.com/video/video/playervideoinfo?tvid="+t,t=a?t+"&locale="+a:t,http.jsonp({url:t,memory:!0,success:function(e){"A00000"===e.code&&e.data||o({}),e=e.data;var t=genCacheKey(e.tvid),a=genCacheKey(e.videoQipuId),r=[];cbcache[t]?(r=(cbcache[t]||[]).slice(0),delete cbcache[t]):cbcache[a]&&(r=(cbcache[a]||[]).slice(0),delete cbcache[a]);for(var n=0;n<r.length;n++)r[n]&&function(e,t){setTimeout(function(){e({tvid:t.videoQipuId,vid:t.vid,albumId:t.albumId,cid:t.cid,vi:t,sid:t.sid,cType:t.cType})},0)}(r[n],e);r=null},failure:function(e){o(e||{})}}))},isUGC:function(e){return!!((e+="")&&2<e.length&&"9"==e.charAt(e.length-1)&&"0"==e.charAt(e.length-2)&&0<(e=parseInt(e,10))&&9e7<e)}},xml2json=function(d){var e="1.2.0";function t(){d.escapeMode===undefined&&(d.escapeMode=!0),d.attributePrefix=d.attributePrefix||"_",d.arrayAccessForm=d.arrayAccessForm||"none",d.emptyNodeForm=d.emptyNodeForm||"text",d.enableToStringFunc===undefined&&(d.enableToStringFunc=!0),d.arrayAccessFormPaths=d.arrayAccessFormPaths||[],d.skipEmptyTextNodesForObj===undefined&&(d.skipEmptyTextNodesForObj=!0),d.stripWhitespaces===undefined&&(d.stripWhitespaces=!0),d.datetimeAccessFormPaths=d.datetimeAccessFormPaths||[],d.useDoubleQuotes===undefined&&(d.useDoubleQuotes=!1),d.xmlElementsFilter=d.xmlElementsFilter||[],d.jsonPropertiesFilter=d.jsonPropertiesFilter||[],d.keepCData===undefined&&(d.keepCData=!1)}d=d||{},t();var u={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function f(e){var t=e.localName;return t=null==(t=null==t?e.baseName:t)||""==t?e.nodeName:t}function _(e){return e.prefix}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function n(e,t,a,r){for(var n=0;n<e.length;n++){var o=e[n];if("string"==typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"==typeof o&&o(t,a,r))break}return n!=e.length}function y(e,t,a){"property"===d.arrayAccessForm&&(e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]),!(e[t]instanceof Array)&&0<d.arrayAccessFormPaths.length&&n(d.arrayAccessFormPaths,e,t,a)&&(e[t]=[e[t]])}function r(e){var t=e.split(/[-T:+Z]/g),a=new Date(t[0],t[1]-1,t[2]),r=t[5].split("."),t,n,t;return a.setHours(t[3],t[4],r[0]),1<r.length&&a.setMilliseconds(r[1]),t[6]&&t[7]?(t=60*t[6]+Number(t[7]),t=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*t:t),a.setMinutes(a.getMinutes()-t-a.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()))),a}function h(e,t,a){if(0<d.datetimeAccessFormPaths.length){var a=a.split(".#")[0];return n(d.datetimeAccessFormPaths,e,t,a)?r(e):e}return e}function m(e,t,a,r){return!(t==u.ELEMENT_NODE&&0<d.xmlElementsFilter.length)||n(d.xmlElementsFilter,e,a,r)}function g(e,t){var a,r,n,o,i,s,l,c;if(e.nodeType==u.DOCUMENT_NODE){for(c=new Object,l=e.childNodes,s=0;s<l.length;s++)(a=l.item(s)).nodeType==u.ELEMENT_NODE&&(c[r=f(a)]=g(a,r));return c}if(e.nodeType==u.ELEMENT_NODE){for((c=new Object).__cnt=0,l=e.childNodes,s=0;s<l.length;s++)r=f(a=l.item(s)),a.nodeType!=u.COMMENT_NODE&&(n=t+"."+r,m(c,a.nodeType,r,n)&&(c.__cnt++,null==c[r]?(c[r]=g(a,n),y(c,r,n)):(null!=c[r]&&(c[r]instanceof Array||(c[r]=[c[r]],y(c,r,n))),c[r][c[r].length]=g(a,n))));for(i=0;i<e.attributes.length;i++)o=e.attributes.item(i),c.__cnt++,c[d.attributePrefix+o.name]=o.value;var p=_(e);return null!=p&&""!=p&&(c.__cnt++,c.__prefix=p),null!=c["#text"]&&(c.__text=c["#text"],c.__text instanceof Array&&(c.__text=c.__text.join("\n")),d.stripWhitespaces&&(c.__text=c.__text.trim()),delete c["#text"],"property"==d.arrayAccessForm&&delete c["#text_asArray"],c.__text=h(c.__text,r,t+"."+r)),null!=c["#cdata-section"]&&(c.__cdata=c["#cdata-section"],delete c["#cdata-section"],"property"==d.arrayAccessForm&&delete c["#cdata-section_asArray"]),0==c.__cnt&&"text"==d.emptyNodeForm?c="":1==c.__cnt&&null!=c.__text?c=c.__text:1!=c.__cnt||null==c.__cdata||d.keepCData?1<c.__cnt&&null!=c.__text&&d.skipEmptyTextNodesForObj&&(d.stripWhitespaces&&""==c.__text||""==c.__text.trim())&&delete c.__text:c=c.__cdata,delete c.__cnt,!d.enableToStringFunc||null==c.__text&&null==c.__cdata||(c.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),c}if(e.nodeType==u.TEXT_NODE||e.nodeType==u.CDATA_SECTION_NODE)return e.nodeValue}function c(e,t,a,r){var n="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=a)for(var o=0;o<a.length;o++){var i=a[o],s=e[i];d.escapeMode&&(s=l(s)),n+=" "+i.substr(d.attributePrefix.length)+"=",d.useDoubleQuotes?n+='"'+s+'"':n+="'"+s+"'"}return n+=r?"/>":">"}function p(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function a(e,t){return-1!==e.indexOf(t,e.length-t.length)}function E(e,t){return!!("property"==d.arrayAccessForm&&a(t.toString(),"_asArray")||0==t.toString().indexOf(d.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function)}function A(e){var t=0;if(e instanceof Object)for(var a in e)E(e,a)||t++;return t}function P(e,t,a){return 0==d.jsonPropertiesFilter.length||""==a||n(d.jsonPropertiesFilter,e,t,a)}function T(e){var t=[];if(e instanceof Object)for(var a in e)-1==a.toString().indexOf("__")&&0==a.toString().indexOf(d.attributePrefix)&&t.push(a);return t}function o(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(d.escapeMode?t+=l(e.__text):t+=e.__text),t}function L(e){var t="";return e instanceof Object?t+=o(e):null!=e&&(d.escapeMode?t+=l(e):t+=e),t}function v(e,t){return""===e?t:e+"."+t}function S(e,t,a,r){var n="";if(0==e.length)n+=c(e,t,a,!0);else for(var o=0;o<e.length;o++)n+=c(e[o],t,T(e[o]),!1),n+=R(e[o],v(r,t)),n+=p(e[o],t);return n}function R(e,t){var a="",r,n,o,i;if(0<A(e))for(var s in e){E(e,s)||""!=t&&!P(e,s,v(t,s))||(o=T(n=e[s]),null==n||n==undefined?a+=c(n,s,o,!0):n instanceof Object?n instanceof Array?a+=S(n,s,o,t):n instanceof Date?(a+=c(n,s,o,!1),a+=n.toISOString(),a+=p(n,s)):0<A(n)||null!=n.__text||null!=n.__cdata?(a+=c(n,s,o,!1),a+=R(n,v(t,s)),a+=p(n,s)):a+=c(n,s,o,!0):(a+=c(n,s,o,!1),a+=L(n),a+=p(n,s)))}return a+=L(e)}this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window,a;if(e===undefined)return null;if(window.DOMParser){var r=new window.DOMParser,n=null;if(!t)try{n=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(err){n=null}try{a=r.parseFromString(e,"text/xml"),null!=n&&0<a.getElementsByTagNameNS(n,"parsererror").length&&(a=null)}catch(err){a=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(a=new ActiveXObject("Microsoft.XMLDOM")).async="false",a.loadXML(e);return a},this.asArray=function(e){return e===undefined||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?r(e):e},this.xml2json=function(e){return g(e)},this.xml_str2json=function(e){var e=this.parseXmlString(e);return null!=e?this.xml2json(e):null},this.json2xml_str=function(e){return R(e,"")},this.json2xml=function(e){var e=this.json2xml_str(e);return this.parseXmlString(e)},this.getVersion=function(){return e}},logger=new PlayerLogger("FlashAdapter"),FlashAdapter=function(_super){function FlashAdapter(param,isSupportHtml5,manager){var _this_1=_super.call(this)||this;_this_1._player=_this_1,_this_1.__canRecordEvents=!0,_this_1.eventsRecorder={},_this_1.__evtRecorderTimer=setTimeout(function(){_this_1.stopRecordEvents()},3e5),_this_1.isSmallWindow=null,_this_1._videoid=param.vid,_this_1._tvid=param.tvid,_this_1.local=param.local||"cn_s",_this_1._isFirstWriteLog=!0;var _this=_this_1;return _this_1._embedSwf=new EmbedSwf,_this_1._swf=_this_1._embedSwf.embed(param,isSupportHtml5),_this_1._playerId=param.parentId||"",_this_1._param=param,_this_1._prevCalls=[],_this_1._firstTime=!0,_this_1.LOGGER_KEY="QiyiPlayerLogger",_this_1._swf&&(_this_1._swf.fire=function(data){try{var ev_1=window.JSON?window.JSON.parse(data):eval("("+data+")");if(ev_1.data.origin&&ev_1.data.origin!=_this._swf.id)return;setTimeout(function(){try{_this.handleEvent(ev_1.type,ev_1.data)}catch(e){}},0)}catch(e){return}},_this_1.destroy=function(){_this_1._swf.parentNode.removeChild(_this_1._swf),_this_1._swf=null,_this_1._embedSwf=null,delete manager.players[_this_1._playerId],_this_1.fire({type:"destroy"}),_this_1.removeAllListeners()}),_this_1._embedSwf.addEvent(window,"beforeunload",function(){_this_1._flashcall("stopHeartBeat")}),_this_1}return __extends(FlashAdapter,_super),FlashAdapter.prototype.callSwf=function(e){var t=this._swf,a=e.functionName,r=e.parameter,e=e.callback||function(){};t&&a&&t[a]&&(r===undefined?e(t[a]()):"[object Object]"==Object.prototype.toString.apply(r)||"[object Array]"==Object.prototype.toString.apply(r)?e(t[a](JSON.stringify(r))):e(t[a](r)))},FlashAdapter.prototype.handleEvent=function(e,a){var r=this,t,n,n;a=a||{},e==ConstantType.QYPLAYER_STATE_CHANGE?(t=a.state||"",a.vid!=r._videoid&&(r._videoid=a.vid,r._tvid=a.tvid,t.toLocaleLowerCase()==ConstantType.QYPLAYER_STATUS_LOAD_MOVIE&&r.getVideoInfo(function(e){r.fire({type:ConstantType.QYPLAYER_VIDEO_CHANGE,data:e})}),r.getPlayInfo(function(e){var t={};t.prePlayingDuration=e.prePlayingDuration,t.preTvid=e.preTvid,t.curPlayingDuration=e.curPlayingDuration,t.playerVersion=e.playerVersion,mixin(a,t),r.fire({type:ConstantType.QYPLAYER_VID_CHANGE,data:a})})),t.toLocaleLowerCase()==ConstantType.QYPLAYER_STATUS_DATA_READY&&r.getVideoInfo(function(e){r.fire({type:ConstantType.QYPLAYER_STATUS_DATA_READY,data:e})}),t.toLocaleLowerCase()==ConstantType.QYPLAYER_STATUS_END_PLAY&&r.getPlayInfo(function(e){var t={};t.prePlayingDuration=e.prePlayingDuration,t.preTvid=e.preTvid,t.curPlayingDuration=e.curPlayingDuration,t.playerVersion=e.playerVersion,mixin(a,t)}),t.toLocaleLowerCase()==ConstantType.QYPLAYER_STATUS_START_PLAY&&r.getPlayInfo(function(e){r._timeMark=e.totaleDuration,mixin(a,e)}),t.toLocaleLowerCase()==ConstantType.QYPLAYER_STATUS_SEEKING&&r.fire({type:ConstantType.QYPLAYER_STATUS_SEEKING,data:{actionType:"controls",current:a.current,duration:a.duration}}),a.state&&(a.state=t.toLocaleLowerCase()),r.fire({type:ConstantType.QYPLAYER_STATE_CHANGE,data:a})):e==ConstantType.QYPLAYER_NEXT_VIDEO?r.fire({type:ConstantType.QYPLAYER_NEXT_VIDEO}):e==ConstantType.QYPLAYER_SWITCH_PLAYER?(cookie.set("QP004",0,{expires:288e5,path:"/",domain:"iqiyi.com"}),window.location.reload()):e==ConstantType.QYPLAYER_LOAD_COMPLETE?r.fire({type:ConstantType.QYPLAYER_LOAD_COMPLETE,data:a}):e==ConstantType.QYPLAYER_SET_LIGHT?(n="false"==a.open,r.fire({type:ConstantType.QYPLAYER_SET_LIGHT,data:n})):e==ConstantType.QYPLAYER_MOVETO_QITAN?r.fire({type:ConstantType.QYPLAYER_MOVETO_QITAN}):e==ConstantType.QYPLAYER_LOAD_SUCCESS?(a.playerId=this._param.parentId,r.fire({type:ConstantType.QYPLAYER_LOAD_SUCCESS,data:a})):e==ConstantType.QYPLAYER_SHOW_LOGIN_PANEL?r.fire({type:ConstantType.QYPLAYER_SHOW_LOGIN_PANEL,data:a}):e==ConstantType.QYPLAYER_EXPAND?r.fire({type:ConstantType.QYPLAYER_EXPAND,data:a}):e==ConstantType.QYPLAYER_AUTHENTICATION_RESULE?r.fire({type:ConstantType.QYPLAYER_AUTHENTICATION_RESULE,data:{isTryWatch:"true"==a.isTryWatch,tvid:a.tvid}}):e==ConstantType.QYPLAYER_RECHARGE?r.fire({type:ConstantType.QYPLAYER_RECHARGE,data:a}):e==ConstantType.QYPLAYER_BuyPlay?r.fire({type:ConstantType.QYPLAYER_BuyPlay,data:a}):e==ConstantType.QYPLAYER_REFRESH_PAGE?r.fire({type:ConstantType.QYPLAYER_REFRESH_PAGE}):e==ConstantType.QYPLAYER_DOWNLOAD?r.fire({type:ConstantType.QYPLAYER_DOWNLOAD,data:a}):e==ConstantType.QYPLAYER_REQUEST_VIDEOLIST?r.fire({type:ConstantType.QYPLAYER_REQUEST_VIDEOLIST,data:a}):e==ConstantType.QYPLAYER_SWITCH_FULL_SCREEN?r.fire({type:ConstantType.QYPLAYER_SWITCH_FULL_SCREEN,data:a.value}):e==ConstantType.QYPLAYER_ADD_TO_TABLE||e==ConstantType.QYPLAYER_ADD_TO_TABLE?r.fire({type:ConstantType.QYPLAYER_ADD_TO_TABLE}):e==ConstantType.QYPLAYER_FOCUS_TIPS?r.fire({type:ConstantType.QYPLAYER_FOCUS_TIPS,data:a}):e==ConstantType.QYPLAYER_FOCUS_UPLOADER?r.fire({type:ConstantType.QYPLAYER_FOCUS_UPLOADER,data:a}):e==ConstantType.QYPLAYER_FIND_GOODS?r.fire({type:ConstantType.QYPLAYER_FIND_GOODS,data:a}):e==ConstantType.QYPLAYER_BARRAGE_REPLAY?r.fire({type:ConstantType.QYPLAYER_BARRAGE_REPLAY,data:a}):e==ConstantType.QYPLAYER_BARRAGE_RECEIVE_DATA?r.fire({type:ConstantType.QYPLAYER_BARRAGE_RECEIVE_DATA,data:a}):e==ConstantType.QYPLAYER_SET_BARRAGE_INTERACT_INFO?r.fire({type:ConstantType.QYPLAYER_SET_BARRAGE_INTERACT_INFO,data:a}):e==ConstantType.QYPLAYER_SET_BARRAGE_CONFIG_INFO?r.fire({type:ConstantType.QYPLAYER_SET_BARRAGE_CONFIG_INFO,data:a}):e==ConstantType.QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO?r.fire({type:ConstantType.QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO,data:a}):e==ConstantType.QYPLAYER_NOTIFY_GIFT_INFO?r.fire({type:ConstantType.QYPLAYER_NOTIFY_GIFT_INFO,data:{data:decodeURIComponent(a.data||"")}}):e==ConstantType.QYPLAYER_NOTIFY_BARRAGE_DATA?(n={},a&&a.data&&(n=(new xml2json).xml_str2json(decodeURIComponent(a.data))),r.fire({type:ConstantType.QYPLAYER_NOTIFY_BARRAGE_DATA,data:{data:n.danmu}})):e==ConstantType.QYPLAYER_SHOW_DOWNLOAD_APPPOP?r.fire({type:ConstantType.QYPLAYER_SHOW_DOWNLOAD_APPPOP,data:a}):e==ConstantType.QYPLAYER_NOTIFY_SCORECHANGE?r.fire({type:ConstantType.QYPLAYER_NOTIFY_SCORECHANGE}):e==ConstantType.QYPLAYER_CHECK_CLIENT_INSTALL?r.fire({type:ConstantType.QYPLAYER_CHECK_CLIENT_INSTALL,data:a}):e==ConstantType.QYPLAYER_REQUEST_SEND_PINGBACK?r.fire({type:ConstantType.QYPLAYER_REQUEST_SEND_PINGBACK,data:a}):e==ConstantType.QYPLAYER_DOSOMETHING?r.fire({type:ConstantType.QYPLAYER_DOSOMETHING,data:a}):e==ConstantType.QYPLAYER_FOLLOW_UPNEXT_LOAD?r.fire({type:ConstantType.QYPLAYER_FOLLOW_UPNEXT_LOAD,data:a}):e==ConstantType.QYPLAYER_USER_CLICK_SCORE?r.fire({type:ConstantType.QYPLAYER_USER_CLICK_SCORE,data:a}):e==ConstantType.QYPLAYER_BARRAGE_STATE_CHANGE?r.fire({type:ConstantType.QYPLAYER_BARRAGE_STATE_CHANGE,data:a}):e==ConstantType.QYPLAYER_REQUEST_REWARD?r.fire({type:ConstantType.QYPLAYER_REQUEST_REWARD,data:a}):e==ConstantType.QYPLAYER_COMMENT_ALLOWED?r.fire({type:ConstantType.QYPLAYER_COMMENT_ALLOWED,data:a}):e==ConstantType.QYPLAYER_NOTIFY_WRITE_FLASH_LOG?r._isFirstWriteLog?(storage$1.write(r.LOGGER_KEY,a.logStr.join("\n")),r._isFirstWriteLog=!1):storage$1.write(r.LOGGER_KEY,storage$1.read(r.LOGGER_KEY)+"\n"+a.logStr.join("\n")):e==ConstantType.QYPLAYER_NOTIFY_AD_START?r.fire({type:ConstantType.QYPLAYER_NOTIFY_AD_START,data:a}):e==ConstantType.QYPLAYER_NOTIFY_AD_END?r.fire({type:ConstantType.QYPLAYER_NOTIFY_AD_END,data:a}):e==ConstantType.QYPLAYER_NOTIFY_TIMEUPDATE?r.fire({type:ConstantType.QYPLAYER_NOTIFY_TIMEUPDATE,data:a}):e==ConstantType.QYPLAYER_NOTIFY_AD_NOTIFY_INFO?r.fire({type:a.data.type,data:a.data.data}):e==ConstantType.QYPLAYER_NOTIFY_FEEDBACK_SHOW?r.fire({type:ConstantType.QYPLAYER_NOTIFY_FEEDBACK_SHOW,data:a}):e==ConstantType.QYPLAYER_NOTIFY_FEEDBACK_HIDE?r.fire({type:ConstantType.QYPLAYER_NOTIFY_FEEDBACK_HIDE,data:a}):e==ConstantType.QYPLAYER_NOTIFY_USER_SEEK?r.fire({type:ConstantType.QYPLAYER_NOTIFY_USER_SEEK}):e==ConstantType.QYPLAYER_BARRAGE_RECEIVE_DATA&&r.fire({type:ConstantType.QYPLAYER_BARRAGE_RECEIVE_DATA,data:a})},FlashAdapter.prototype.fire=function(e){var t=e.type,a=e.data,e={type:t};a!==undefined&&(e.data=a),this.emit(t,e),this.__canRecordEvents&&(this.eventsRecorder[t]||(this.eventsRecorder[t]=[]),"playerStateChange"===t?this.eventsRecorder[t].push(e):this.eventsRecorder[t]=[e])},FlashAdapter.prototype.un=function(e,t){return this.off(e,t),this},FlashAdapter.prototype._flashcall=function(e,t,a){var t={callback:a,functionName:e,parameter:t};this.callSwf(t)},FlashAdapter.prototype.load=function(e){this._flashcall("loadQiyiVideo",e)},FlashAdapter.prototype.stopRecordEvents=function(){var e=this;e.__canRecordEvents=!1,clearTimeout(e.__evtRecorderTimer),setTimeout(function(){e.eventsRecorder={}},1e4)},FlashAdapter.prototype.play=function(){this._flashcall("playQiyiVideo")},FlashAdapter.prototype.resume=function(){this._flashcall("resumeQiyiVideo")},FlashAdapter.prototype.replay=function(){this._flashcall("replayQiyiVideo")},FlashAdapter.prototype.pause=function(){this._flashcall("pauseQiyiVideo")},FlashAdapter.prototype.seek=function(e){this._flashcall("seekQiyiVideo",e)},FlashAdapter.prototype.stop=function(){this._flashcall("stopQiyiVideo")},FlashAdapter.prototype.getPlayInfo=function(t){this._flashcall("getQiyiPlayerInfo",undefined,function(e){var e=e||"",e=e?JSON.parse(e.replace(/\r/g,"").replace(/\n/g,"")):"";e&&(e.currentTime=e.currentTime?e.currentTime/1e3:0,t(e))})},FlashAdapter.prototype.getVideoInfo=function(e){var t,t="tw_t"===(t=this.locale)||"cn_t"===t?"zh_tw":"";VideoInfo.get({tvid:this._tvid,vid:this._videoid,locale:t},e)},FlashAdapter.prototype.getPlayerId=function(){return this._playerId},FlashAdapter.prototype.setQiyiUserLogin=function(e){this._flashcall("setQiyiUserLogin",e)},FlashAdapter.prototype.switchVideo=function(e){this._flashcall("switchVideo",e)},FlashAdapter.prototype.switchNextVideo=function(){this._flashcall("switchNextVideo")},FlashAdapter.prototype.switchPreVideo=function(){this._flashcall("switchNextVideo")},FlashAdapter.prototype.addVideoList=function(e){this._flashcall("addVideoList",e)},FlashAdapter.prototype.removeVideoList=function(e){this._flashcall("removeVideoList",e)},FlashAdapter.prototype.setSmallWindowMode=function(e){this.isSmallWindow!==e&&(this.isSmallWindow=e,this._flashcall("setSmallWindowMode",e))},FlashAdapter.prototype.jsNotifyAdManager=function(e){this._flashcall("jsNotifyAdManager",e)},FlashAdapter.prototype.getQiyiPlayerLog=function(e){this._flashcall("getQiyiPlayerLog",undefined,e)},FlashAdapter.prototype.clearBanWord=function(){this._flashcall("clearBanWord")},FlashAdapter.prototype.addBanWord=function(e){e!==undefined&&""!==e&&this._flashcall("addBanWord",e)},FlashAdapter.prototype.removeBanWord=function(e){e&&this._flashcall("removeBanWord",e)},FlashAdapter.prototype.requestBarrageData=function(e){this._flashcall("requestBarrageData")},FlashAdapter.prototype.notyfyADInfo=function(e){this._flashcall("notyfyADInfo",e)},FlashAdapter.prototype.getIsInMainVideo=function(e){this._flashcall("getIsInMainVideo",undefined,e)},FlashAdapter.prototype.setCyclePlay=function(e){this._flashcall("setCyclePlay")},FlashAdapter.prototype.getQiyiPlayerInfo=function(e){this.getPlayInfo(e)},FlashAdapter.prototype.getQiyiVideoInfo=function(e){this._flashcall("getQiyiVideoInfo",undefined,e)},FlashAdapter.prototype.setLight=function(e){this._flashcall("setLight",e)},FlashAdapter.prototype.expand=function(e){this._flashcall("expand",e)},FlashAdapter.prototype.setBarrageStatus=function(e){this._flashcall("setBarrageStatus",e)},FlashAdapter.prototype.setSelfSendBarrageInfo=function(e){this._flashcall("setSelfSendBarrageInfo",e)},FlashAdapter.prototype.setBarrageSetting=function(e){this._flashcall("setBarrageSetting",e)},FlashAdapter.prototype.setActivityNoticeInfo=function(e){this._flashcall("setActivityNoticeInfo",e)},FlashAdapter.prototype.zoomQiyiVideo=function(e){this._flashcall("zoomQiyiVideo",e)},FlashAdapter.prototype.setTimeListener=function(e){this._flashcall("setTimeListener",e)},FlashAdapter.prototype.getHasBarrageConfigInfo=function(){this._flashcall("getHasBarrageConfigInfo")},FlashAdapter.prototype.getHasBarrageChannelConfigInfo=function(){this._flashcall("getHasBarrageChannelConfigInfo")},FlashAdapter.prototype.getHasBarrageGiftInfo=function(){this._flashcall("getHasBarrageGiftInfo")},FlashAdapter.prototype.getCommentConfigInfo=function(){this._flashcall("getCommentConfigInfo")},FlashAdapter.prototype.setContinuePlayState=function(e){this._flashcall("setContinuePlayState",e)},FlashAdapter.prototype.getSwitchVideoType=function(e){this._flashcall("getSwitchVideoType",undefined,e)},FlashAdapter.prototype.forceToSaveCurVideoInfo=function(e){this._flashcall("forceToSaveCurVideoInfo",e)},FlashAdapter.prototype.getContinueData=function(e){this._flashcall("getContinueData",e)},FlashAdapter.prototype.setQiyiVisits=function(e){this._flashcall("setQiyiVisits",e)},FlashAdapter.prototype.initQiyiVideo=function(e){this._flashcall("initQiyiVideo",e)},FlashAdapter.prototype.getQiyiPlayerType=function(e){var t="flash";return e&&"function"==typeof e&&e(t),t},FlashAdapter.prototype.setPlayerFullScreen=function(e){e&&this._flashcall("setPlayerFullScreen",e)},FlashAdapter.prototype.exitPicInPic=function(){},FlashAdapter.prototype.setQiyiSubscribe=function(){},FlashAdapter.prototype.setSubscribeInfo=function(){},FlashAdapter.prototype.setSubscribeStateChange=function(){},FlashAdapter.prototype.setPlayerWebFullScreen=function(){},FlashAdapter.prototype.setRightBarStatus=function(){},FlashAdapter.prototype.setExpandScreenStatus=function(){},FlashAdapter.prototype.showToast=function(){},FlashAdapter.prototype.refresh=function(){},FlashAdapter.prototype.backToStoryLine=function(){},FlashAdapter.prototype.backToIVMain=function(){},FlashAdapter}(Dispatcher);function skinConfigure(e){var t=ConstantType.SkinType_pc;return(platform$1.os.ios||platform$1.os.android)&&(t=ConstantType.SkinType_mobile),{skinType:t=e&&t===ConstantType.SkinType_pc?ConstantType.SkinType_pc+"."+ConstantType.SkinType_mini:t}}var logger$1=new PlayerLogger("H5Adapter"),H5Adapter=(pm=Dispatcher,__extends(qm,pm),qm.prototype.fire=function(e){var t=e.type,a=e.data,e={type:t};a!==undefined&&(e.data=a),this.emit(t,e),this.__canRecordEvents&&(this.eventsRecorder[t]||(this.eventsRecorder[t]=[]),"playerStateChange"===t?this.eventsRecorder[t].push(e):this.eventsRecorder[t]=[e])},qm.prototype.un=function(e,t){return this.off(e,t),this},qm.prototype.loadSkin=function(e){var t=window.QiyiPlayerLoader;t&&t.loadSkin(e)},qm.prototype.checkPack=function(e,t,a){var r=this;if(!this.disabled){var n=function(){if(a)a();else{if(r["package"][e])return r["package"][e](t);logger$1.info("checkPack error, method = "+e)}};if(this["package"])return n();this.once("createPack",n)}},qm.prototype.addView=function(e){this.hasview||(this.hasview=!0,this.checkPack("addView",e))},qm.prototype.load=function(e){this.checkPack("load",e)},qm.prototype.stopRecordEvents=function(){var e=this;e.__canRecordEvents=!1,clearTimeout(e.__evtRecorderTimer),setTimeout(function(){e.eventsRecorder={}},1e4)},qm.prototype.play=function(e){void 0===e&&(e={withUserGesture:!1}),this.checkPack("play",e)},qm.prototype.resume=function(){this.checkPack("resume")},qm.prototype.replay=function(){this.checkPack("replay")},qm.prototype.pause=function(){this.checkPack("pause")},qm.prototype.seek=function(e){this.checkPack("seek",e)},qm.prototype.seekN=function(e){this.checkPack("seekN",e)},qm.prototype.setPlayPingbackInfo=function(e){this.checkPack("setPlayPingbackInfo",e)},qm.prototype.stop=function(){this.checkPack("stop")},qm.prototype.isPaused=function(){return this.checkPack("isPaused")},qm.prototype.getPlayInfo=function(e){this.checkPack("getPlayInfo",e)},qm.prototype.getVideoInfo=function(e){this.checkPack("getVideoInfo",e)},qm.prototype.getPlayerId=function(){return this._playerId},qm.prototype.getMuted=function(){return this.checkPack("getMuted")},qm.prototype.setMuted=function(e){this.checkPack("setMuted",e)},qm.prototype.setQiyiUserLogin=function(e){this.checkPack("setQiyiUserLogin",e)},qm.prototype.switchVideo=function(e){this.checkPack("switchVideo",e)},qm.prototype.switchNextVideo=function(){this.checkPack("switchNextVideo")},qm.prototype.switchPreVideo=function(){this.checkPack("switchPreVideo")},qm.prototype.addVideoList=function(e){this.checkPack("addVideoList",e)},qm.prototype.removeVideoList=function(e){this.checkPack("removeVideoList",e)},qm.prototype.setSmallWindowMode=function(e){var t=this;this.isSmallWindow!==e&&(logger$1.info("js call func,params: type = setSmallWindowMode(设置小窗,1为小窗), data = "+e),this.isSmallWindow=e,this.checkPack("setSmallWindowMode",null,function(){t["package"].setSmallWindowMode&&t["package"].setSmallWindowMode(e)}))},qm.prototype.jsNotifyAdManager=function(e){this.checkPack("jsNotifyAdManager",e)},qm.prototype.getQiyiPlayerLog=function(e){try{e(PlayerLogger.getLog())}catch(t){}},qm.prototype.clearBanWord=function(){this.checkPack("clearBanWord")},qm.prototype.addBanWord=function(e){e!==undefined&&""!==e&&this.checkPack("addBanWord",e)},qm.prototype.removeBanWord=function(e){this.checkPack("removeBanWord",e)},qm.prototype.requestBarrageData=function(){},qm.prototype.notyfyADInfo=function(e){this.checkPack("notyfyADInfo",e)},qm.prototype.getQiyiPlayerInfo=function(e){this.checkPack("getQiyiPlayerInfo",e)},qm.prototype.getQiyiPlayerType=function(e){var t="h5";return e&&"function"==typeof e&&e(t),t},qm.prototype.setDelayPlayInfo=function(e){this.checkPack("setDelayPlayInfo",e)},qm.prototype.clearDelayPlayInfo=function(e){this.checkPack("clearDelayPlayInfo",e)},qm.prototype.setBarrageStatus=function(){},qm.prototype.setSelfSendBarrageInfo=function(){},qm.prototype.setBarrageSetting=function(){},qm.prototype.setPlayerWebFullScreen=function(e){this.checkPack("setPlayerWebFullScreen",e)},qm.prototype.setPlayerFullScreen=function(e){this.checkPack("setPlayerFullScreen",e)},qm.prototype.getHasBarrageChannelConfigInfo=function(){},qm.prototype.getHasBarrageConfigInfo=function(){},qm.prototype.getHasBarrageGiftInfo=function(){},qm.prototype.addPlayListView=function(e){this.checkPack("addPlayListView",e)},qm.prototype.getSwitchVideoType=function(){return this.checkPack("getSwitchVideoType")},qm.prototype.setRightBarStatus=function(e){this.checkPack("setRightBarStatus",e)},qm.prototype.setExpandScreenStatus=function(e){this.checkPack("setExpandScreenStatus",e)},qm.prototype.exitPicInPic=function(){this.checkPack("exitPicInPic")},qm.prototype.showToast=function(e){this.checkPack("showToast",e)},qm.prototype.refresh=function(e){this.checkPack("refresh",e)},qm.prototype.backToStoryLine=function(e){this.checkPack("backToStoryLine",e)},qm.prototype.backToIVMain=function(e){this.checkPack("backToIVMain",e)},qm.prototype.setFollowData=function(e){this.checkPack("setFollowData",e)},qm.prototype.changeFollowState=function(e){this.checkPack("changeFollowState",e)},qm.prototype.changeAIBaikeState=function(e){this.checkPack("changeAIBaikeState",e)},qm.prototype.setBarrageState=function(e){this.checkPack("setBarrageState",e)},qm.prototype.getFeedbackInfo=function(){this.checkPack("getFeedbackInfo")},qm.prototype.showTips=function(e){this.checkPack("showTips",e)},qm.prototype.notifyMetaPanel=function(e){this.checkPack("notifyMetaPanel",e)},qm.prototype.getMetaPanelInfo=function(){return this.checkPack("getMetaPanelInfo")},qm.prototype.noticeRightFloater=function(e){this.checkPack("noticeRightFloater",e)},qm.prototype.getRightFloaterInfo=function(){return this.checkPack("getRightFloaterInfo")},qm.prototype.setPayLayerStatus=function(e){this.checkPack("setPayLayerStatus",e)},qm.prototype.setBarragePanel=function(e){this.checkPack("setBarragePanel",e)},qm.prototype.getPlayerDom=function(){return this.checkPack("getPlayerDom")},qm.prototype.getIsInMainVideo=function(){},qm.prototype.setCyclePlay=function(){},qm.prototype.getQiyiVideoInfo=function(){},qm.prototype.setQiyiSubscribe=function(){},qm.prototype.setLight=function(){},qm.prototype.expand=function(){},qm.prototype.setActivityNoticeInfo=function(){},qm.prototype.zoomQiyiVideo=function(){},qm.prototype.setTimeListener=function(){},qm.prototype.getCommentConfigInfo=function(){},qm.prototype.setSubscribeInfo=function(){},qm.prototype.setSubscribeStateChange=function(){},qm.prototype.setContinuePlayState=function(){},qm.prototype.forceToSaveCurVideoInfo=function(){},qm.prototype.getContinueData=function(){},qm.prototype.setQiyiVisits=function(){},qm.prototype.initQiyiVideo=function(){},qm),pm;function qm(e,t){var a=pm.call(this)||this;(a._player=a)._playerId=e.parentId,a.disabled=!1,a.hasview=!1,a.type=ConstantType.PlayerType_Html5VOD,a.skinType=skinConfigure(!!e.skinType).skinType;var r=window.QiyiPlayerLoader;return r&&(r.Package?a["package"]=new r.Package(e,a):(a["package"]=null,r.once("ready",function(){a["package"]=new r.Package(e,a),a.emit("createPack")}))),a.__canRecordEvents=!0,a.eventsRecorder={},a.__evtRecorderTimer=setTimeout(function(){a.stopRecordEvents()},3e5),a.isSmallWindow=null,setTimeout(function(){logger$1.info("call js, fire event,params: type = playerLoadSuccess(播放器初始化完毕)"),a.fire({type:ConstantType.QYPLAYER_LOAD_SUCCESS,data:{playerId:e.parentId}}),a.fire({type:ConstantType.QYPLAYER_BARRAGE_ALLOWED,data:{enable:!1}})},0),a.destroy=function(){a.checkPack("destroy",null,function(){logger$1.log("js call func,params: type = player destroy(销毁播放器)"),a["package"].destroy(),a.hasview=!1,a.disabled=!0,delete t.players[e.parentId],a.removeAllListeners(),a.fire({type:"destroy"})})},a}var onlineUrl={"skin.mobile":"//static.iqiyi.com/js/player_vt20220607/skin.mobile.cb492c61.js","skin.pc":"//static.iqiyi.com/js/player_vt20220607/skin.pc.cb492c61.js","skin.pc.mini":"//static.iqiyi.com/js/player_vt20220607/skin.pc.mini.cb492c61.js","wonder.data.pc":"//static.iqiyi.com/js/player_vt20220607/wonder.data.pc.cb492c61.js","wonder.http.mobile":"//static.iqiyi.com/js/player_vt20220607/wonder.http.mobile.cb492c61.js"},CONST_adParamAttrName="data-widget-adparam",CONST_flashParamAttrName="data-widget-flashplayerparam",CONST_flashVarsAttrName="data-flashplayerparam-flashvars",CONST_h5Vars="data-h5playerparam-h5vars",CONST_PlayerParams,CONST_PlayerParamsKV,spans,ParamVars={},setInitVars=function(){spans=document.querySelectorAll?document.querySelectorAll("span"):document.getElementsByTagName("span"),CONST_PlayerParams=window.QiyiPlayerParam||[],CONST_PlayerParamsKV={};for(var e=0;e<CONST_PlayerParams.length;e++)CONST_PlayerParams[e].name&&(CONST_PlayerParamsKV[CONST_PlayerParams[e].name]=CONST_PlayerParams[e].attribute||{})},getVer=function(){var e="";try{e=navigator.plugins["Shockwave Flash"].description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(err){}}return((e="string"!=typeof e?"":e)||"0 r0").match(/\d+/g)},checkFlashLzma=function(){var e=getVer();return 2<e.length&&(12<=parseInt(e[0],10)||11===parseInt(e[0],10)&&4<=parseInt(e[1],10))},outsite=function(){var e=[],t;try{t=!window.parent.location.href}catch(a){for(0===e.length&&(t=!0);e.length;)if(-1===document.referrer.indexOf(e.pop())){t=!0;break}}return t+""}(),delItemInPlayerParams=function(e){(CONST_PlayerParamsKV[e]||CONST_PlayerParamsKV.hasOwnProperty(e))&&(CONST_PlayerParamsKV[e]=null,delete CONST_PlayerParamsKV[e]);for(var t=CONST_PlayerParams.length;t--;)CONST_PlayerParams[t].name===e&&CONST_PlayerParams.splice(t,1)},safely=function(e){return e.replace(/([<>])/g,"")},delParamEmptyProps=function(e){for(var t in e)e[t]||!1===e[t]||delete e[t];return e},getElemWrapperParams=function(t){for(var e,a,r,n=function(e){return t.getAttribute(e)},o={expandState:n("data-player-expandstate"),albumId:n("data-player-albumid"),tvid:n("data-player-tvid"),vid:n("data-player-videoid"),autoplay:n("data-player-autoplay"),isMember:n("data-player-ismember"),cyclePlay:n("data-player-cycleplay"),exclusive:n("data-player-exclusive"),qiyiProduced:n("data-player-qiyiProduced"),share_sTime:n("data-player-startTime"),share_eTime:n("data-player-endTime"),showBarStyle:n("data-player-barStyle"),isLoop:n("data-player-isloop")},e=0,i,r,r,a;e<spans.length;e++){(r=spans[e]).getAttribute(CONST_adParamAttrName)===CONST_adParamAttrName&&(i=r.getAttribute("data-adparam-cupid"),r=r.getAttribute("data-adparam-playerid"),i&&(o.adurl=i),r&&(o.cid=r))}return delParamEmptyProps(o)},getElemAdParams=function(){for(var e,t,a,r={},e=0,n,a,a,t;e<spans.length;e++){(a=spans[e]).getAttribute(CONST_adParamAttrName)===CONST_adParamAttrName&&(n=a.getAttribute("data-adparam-cupid"),a=a.getAttribute("data-adparam-playerid"),n&&(r.adurl=n),a&&(r.cid=a))}return delParamEmptyProps(r)},getElemPublicParams=function(){for(var e,t,a,r,n,r,o=!1,i={},n=0;n<CONST_PlayerParams.length;n++)"public"===CONST_PlayerParams[n].name&&(mixin(i,delParamEmptyProps(CONST_PlayerParams[n].attribute||{}),!0),delItemInPlayerParams("public"),o=!0);if(!o)for(e=0;e<spans.length;e++)t=(r=spans[e]).getAttribute(CONST_flashParamAttrName),a=r.getAttribute(CONST_flashVarsAttrName),r=r.getAttribute(CONST_h5Vars),"public"===t&&(a&&mixin(i,delParamEmptyProps(urlkit.query2Json(a)),!0),r&&mixin(i,delParamEmptyProps(urlkit.query2Json(r)),!0));return delParamEmptyProps(i)},getJSConfigParams=function(e){var t={playerUrl:checkFlashLzma()&&onlineUrl.FLASH_PLAYER_ZURL?onlineUrl.FLASH_PLAYER_ZURL:onlineUrl.FLASH_PLAYER_URL,flashP2PCoreUrl:onlineUrl.FLASH_P2P_URL,barrageurl:onlineUrl.FLASH_BARRAGE_URL,preloader:onlineUrl.FLASH_PRELOADER_URL,preloaderTw:onlineUrl.FLASH_PRELOADER_URL_TW,qiyiProducedPreloader:onlineUrl.FLASH_PRELOADER_PRODUCE,qiyiProducedPreloaderTw:onlineUrl.FLASH_PRELOADER_PRODUCE_TW,exclusivePreloader:onlineUrl.FLASH_PRELOADER_EXCLUSIVE,exclusivePreloaderTw:onlineUrl.FLASH_PRELOADER_EXCLUSIVE_TW,vipPreloader:onlineUrl.FLASH_PRELOADER_VIP,vipPreloaderTw:onlineUrl.FLASH_PRELOADER_VIP_TW,iconPreloader:onlineUrl.FLASH_PRELOADER_ICON,iconPreloaderTw:onlineUrl.FLASH_PRELOADER_ICON_TW,iconProducedPreloader:onlineUrl.FLASH_PRELOADER_ICON_PRODUCE,iconProducedPreloaderTw:onlineUrl.FLASH_PRELOADER_ICON_PRODUCE_TW,iconExclusivePreloader:onlineUrl.FLASH_PRELOADER_ICON_EXCLUSIVE,iconExclusivePreloaderTw:onlineUrl.FLASH_PRELOADER_ICON_EXCLUSIVE_TW,tipdataurl:onlineUrl.FLASH_TIP_XML};return delParamEmptyProps(t)},getElemCustomParams=function(){for(var e,t,a,r,r,n={},e=0;e<spans.length;e++)t=(r=spans[e]).getAttribute(CONST_flashParamAttrName),a=r.getAttribute(CONST_flashVarsAttrName),r=r.getAttribute(CONST_h5Vars),t&&"public"!==t&&(CONST_PlayerParamsKV[t]?(mixin(n,delParamEmptyProps(CONST_PlayerParamsKV[t]),!0),delItemInPlayerParams(t)):(a&&mixin(n,delParamEmptyProps(urlkit.query2Json(a)),!0),r&&mixin(n,delParamEmptyProps(urlkit.query2Json(r)),!0)));if(0<CONST_PlayerParams.length)for(e=0;e<CONST_PlayerParams.length;e++)CONST_PlayerParams[e]&&CONST_PlayerParams[e].name&&mixin(n,delParamEmptyProps(CONST_PlayerParams[e].attribute||{}),!0);return delParamEmptyProps(n)},getElemWrapperFlashVarsParams=function(t){var e={},a,r,r=(r=function(e){return t.getAttribute(e)}("data-player-flashvars"))?urlkit.query2Json(r):{};return mixin(e,delParamEmptyProps(r),!0),delParamEmptyProps(e)},getURLParams=function(){var e={},t=function(e){var t=urlkit.query2Json(e),a,a=(a=t.flashVars)?urlkit.query2Json(safely(decodeURIComponent(a))):{},r=t.share_sTime,n=t.share_eTime;if(t.cupid_init_sub_type)for(var o=(t.cupid_init_sub_type+"").split(";"),i=void 0,s=0;s<o.length;s++)1<(i=(o[s]+"").split(":")).length&&(t[i[0]]=i[1]);var e=r&&r.match(/(\d*)-.*?=(\d*)/);e&&(r=e[1],n=e[2]);var n={autoplay:"1"===t.iamp||t.autoplay,ignoreUserGesture:"true"===t.ignoreUserGesture||undefined,vid:t.videoid||t.vid,tvid:t.tvid||t.tvId,albumId:t.albumid,cyclePlay:t.cycleplay,isMember:t.ismember,exclusive:t.exclusive,qiyiProduced:t.qiyiProduced,share_sTime:r,share_eTime:n,outsite:t.outsite,cid:t.cid,ptid:t.ptid,isCid:t.isCid,vfrm:t.vfrm,isMute:"1"===t.iamp||t.isMute,showBarStyle:t.barStyle,local:t.local,components:t.components,isLoop:t.isLoop,masflag:t.masflag,isExpandScreen:t.isExpandScreen,isSupportedShot:t.isSupportedShot,isSmallWindowMode:t.isSmallWindowMode,isSupportedHotKey:t.isSupportedHotKey,ps3:t.ps3,abtest:t.abtest,ist:t.cupid_init_sub_type};return mixin(a,delParamEmptyProps(n),!0),a},a=t(safely(window.location.search.replace(/([<>])/g,""))),t=t(safely(window.location.hash.slice(1).replace(/([<>])/g,""))),r;for(r in mixin(e,delParamEmptyProps(a),!0),mixin(e,delParamEmptyProps(t),!0),e)e[r]||!1===e[r]||delete e[r];return delParamEmptyProps(e)},playerParams={mix:function(e,t){setInitVars();var a=window.__qlt,r="";a&&a.brs&&(r=a.brs||"");var a=e.tmplt||0,n={outsite:outsite,site:"iqiyiw",components:"feffffe6e",local:"cn_s",ost:"0",browserType:r,pageTmpltType:a},o;for(o in mixin(n,getElemWrapperParams(t),!0),mixin(n,getElemAdParams(),!0),mixin(n,getElemPublicParams(),!0),mixin(n,getJSConfigParams(e),!0),mixin(n,getElemCustomParams(),!0),mixin(n,getElemWrapperFlashVarsParams(t),!0),mixin(n,e,!0),mixin(n,getURLParams(),!0),storage$1.read("abtest")&&(n.abtest=storage$1.read("abtest"),storage$1.remove("abtest")),n)"string"==typeof n[o]&&(n[o]=n[o].replace(/^http:/gi,""));return ParamVars=n},getVars:function(){return ParamVars}},logger$2=new PlayerLogger("PlayerManager"),_playersReadyCalls={};UUID.getIsNewUser(!0);var PlayerManager=(Ro.prototype.createPlayer=function(e){var t=this,a=document.getElementById(e.parentId);e=playerParams.mix(e,a);var r=this.players[e.parentId];if(!e.hasOwnProperty("parentId"))return null;if(null!=r)return null;e.width&&e.height&&(a.style.width=parseInt(e.width,10)+"px",a.style.height=parseInt(e.height,10)+"px"),e.plyct=+new Date;var n="production",o=getPlayerType(e.playerType),i=cookie.get("QC005",{memory:!0}),a=cookie.get("setting",{memory:!0});switch(logger$2.log(o+", v: "+PlayerVersion+", location: "+window.location.href+", env: "+navigator.userAgent.toLowerCase()+", "+n+"/"+i+"/"+(a||"-")+", parameters: "+PlayerLogger.stringify(e)),o){case ConstantType.PlayerType_Html5VOD:r=new H5Adapter(e,this);break;case ConstantType.PlayerType_FlashVOD:r=new FlashAdapter(e,!1,this)}(this.players[e.parentId]=r).on(ConstantType.QYPLAYER_LOAD_SUCCESS,function(e){r.__loadsuccess=!0;var e=e.data.playerId;t.flushPlayerReadyCalls(e)});var s="";return r.on(ConstantType.QYPLAYER_STATE_CHANGE,function(e){var t=e.data.state.toLocaleLowerCase(),a={};switch(a.tvid=e.data.tvid||"",a.albumId=e.data.albumId||"",a.cid=e.data.cid||"",a.playerVersion=e.data.playerVersion||"",t){case ConstantType.QYPLAYER_STATUS_END_PLAY:e.data.spend&&(a.duration=e.data.spend),ThreePingback$1.sendEndPlayPingback(a);break;case ConstantType.QYPLAYER_STATUS_START_PLAY:case ConstantType.QYPLAYER_STATUS_AD_START_PLAY:var r=e.data.tvid;r!==s&&(ThreePingback$1.sendStartPlayPingback(a),s=r);break;case ConstantType.QYPLAYER_STATUS_ERROR:}}),r.on(ConstantType.QYPLAYER_VID_CHANGE,function(e){var t,a,r={};e.data.preMovieInfo?(t=e.data.preMovieInfo.tvid,a=e.data.preMovieInfo.spend,r.albumId=e.data.preMovieInfo.albumId||"",r.cid=e.data.preMovieInfo.cid||""):(t=e.data.preTvid,a=e.data.prePlayingDuration),r.playerVersion=e.data.playerVersion||"",r.tvid=t||"",r.duration=a||"",ThreePingback$1.sendEndPlayPingback(r)}),r},Ro.prototype.getPlayerById=function(e){return this.players[e]},Ro.prototype.destroyPlayer=function(e){this.players[e].destroy()},Ro.prototype.addView=function(e,t){var a=arguments.length,r=0===a;if(1===a||2<a)logger$2.error("add view only support no-args mode or 2-args modes");else for(var n in e&&t&&(this._skins[t]=e),this.players){var n=this.players[n];r?(t=n.skinType,(e=this._skins[t])&&n.addView(e)):n.skinType===t&&n.addView(e)}},Ro.prototype.ready=function(e,t){var a=this.getPlayerById(e),r=_playersReadyCalls[e]||[];(_playersReadyCalls[e]=r).push(t),a&&a.__loadsuccess&&this.flushPlayerReadyCalls(e)},Ro.prototype.flushPlayerReadyCalls=function(e){var t=_playersReadyCalls[e]||[];_playersReadyCalls[e]=[];for(var a=0;a<t.length;a++)!function(e,t){setTimeout(function(){e[t].call()},0)}(t,a)},Ro);function Ro(){this.players={},this._skins={},this.constantType=ConstantType,this.version=PlayerVersion}function seriesLoadScripts(t,a){"object"!=typeof t&&(t=[t]);var r=document.getElementsByTagName("head").item(0)||document.documentElement,n=[],o=t.length-1,i=function(e){n[e]=document.createElement("script"),n[e].setAttribute("type","text/javascript"),n[e].onload=n[e].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),e!=o?i(e+1):"function"==typeof a&&a(!0))},n[e].onerror=n[e].onstalled=function(){"function"==typeof a&&a(!1)},n[e].setAttribute("src",t[e]),r.appendChild(n[e])};i(0)}var grayConfig=undefined,adurl="//static.iqiyi.com/js/common/ares-mobile-h5.min.js",PackLoader=(Hp.prototype.matchGray=function(e){var t=grayConfig||{};if(t.id){var a=cookie.get("QC005",{memory:!0}),r=cookie.get("QP0032",{memory:!0}),n=!1;return""!==t.index&&(a=parseInt(a.substr(t.index,1),16),""!==t.eq?n=a==t.eq:""!==t.st&&""!==t.ed&&(n=a>=t.st&&a<=t.ed)),r&&cookie.remove("QP0032",{path:"/"}),n=n||"1"==r,-1<t.channelIds.indexOf(e)||n}return!1},Hp.prototype.loadPackage=function(){var e=this,t="data",a="pc";(platform$1.os.ios||platform$1.os.android)&&(t="http",a="mobile");var r="wonder."+t+"."+a,n=this.configUrl[r];this.globalEntry.packageName=r,setTimeout(function(){e.globalEntry.isSyncing=!1,e.globalEntry.Package||(e.logger.log("package loading: ("+r+")"),seriesLoadScripts(n,function(){e.logger.log("package loaded: ("+r+")")}))},0)},Hp.prototype.isSkinLoaded=function(e){var e=skinConfigure((e=void 0===e?{}:e).isMini).skinType;return!!this._loadedSkinTypes[e]},Hp.prototype.loadSkin=function(e){var t=this,a=skinConfigure((e=void 0===e?{}:e).isMini).skinType;this._loadedSkinTypes[a]=!0,seriesLoadScripts(this.configUrl["skin."+a],function(e){!1===e&&(t._loadedSkinTypes[a]=!1)})},Hp.prototype.loadAD=function(e){var r=this;"boolean"==typeof this.adcb.loaded?e():("function"==typeof e&&this.adcb.push(e),this.adcb.loading||(this.adcb.loading=!0,seriesLoadScripts(adurl,function(e){for(r.adcb.loading=!1,r.adcb.loaded=e;0<r.adcb.length;)try{var t;r.adcb.shift()()}catch(a){}})))},Hp);function Hp(e,t){if(this.logger=new PlayerLogger("PackLoader"),this.globalEntry=e,this.configUrl=onlineUrl,this._loadedSkinTypes={},this.usedGrayUrl={},this.p2pcb=[],this.adcb=[],this.matchGray(t)){var a=grayConfig.url,r;for(r in a)this.configUrl[r]=a[r],this.usedGrayUrl[r]=!0}isSupportHtml5()&&this.loadPackage()}var logger$3=new PlayerLogger("QiyiLoader");Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,a=+arguments[1]||0;if(0===t||isNaN(a)||t<=a)return-1;for(a<0&&(a=t+a)<0&&(a=0);a<t;++a)if(this[a]===e)return a;return-1});var PlayerLoader=(iq=Dispatcher,__extends(jq,iq),jq.prototype.ready=function(e){"function"==typeof e&&(this.isActived=!0,e(this.manager),this._checkEnv())},jq.prototype._checkEnv=function(){var e;this._testEnvChecked||(this._testEnvChecked=!0,e=cookie.get("setting",{memory:!0}))},jq.prototype.logger=function(){return PlayerLogger},jq.prototype.setPackage=function(e){this.Package=e,this.emit("ready")},jq.prototype.addView=function(e,t){this.manager.addView(e,t)},jq.prototype.loadSkin=function(e){void 0===e&&(e={}),this.packLoader.isSkinLoaded(e)?this.manager.addView():this.packLoader.loadSkin(e)},jq.prototype.loadAd=function(e){this.packLoader.loadAD(e)},jq),iq;function jq(){var e=iq.call(this)||this,t=0;window.__qlt&&"number"==typeof window.__qlt.statisticsStart&&(t=window.__qlt.statisticsStart),logger$3.log("player v2 sdk init,player-"+PlayerVersion+", page benchmark@"+t+"!");var a,t=(window.uniqy||{}).curVideoInfo||{};return e.Package=null,e.packLoader=new PackLoader(e,t.channelId),e.renderd=!1,e.manager=new PlayerManager,e.isSyncing=!0,e}var QiyiPlayerLoader=new PlayerLoader;return QiyiPlayerLoader});
/*! Built by pcw player group @6/7/2022, 3:43:05 PM */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],s=0,u=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={8:0,7:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({0:"pako_deflate",4:"vendors.crypto",5:"vendors.jszip",6:"vendors.kiwi.mat",7:"vendors.pako_deflate"}[e]||e)+".cb492c61.js"}(e);var c=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}r[e]=undefined}};var u=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="//static.iqiyi.com/js/player_vt20220607/",i.oe=function(e){throw console.error(e),e};var a=window.iqiyiPlayerJSONPCallback=window.iqiyiPlayerJSONPCallback||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var c=o;i(i.s=632)}([function(e,t,n){"use strict";t.a={Status_Idle:"idle",Status_Ready:"ready",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadedMetaData:"loadedmetadata",Status_StartPlay:"startplay",Status_EveryStartPlay:"everystartplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"stoped",Status_End_Play:"endplay",Status_PlayError:"error",Status_PatchStartplay:"patchstartplay",Status_MiddStoped:"middstoped",Status_AdLoaded:"adloaded",Status_AdInit:"adinit",Status_AdLoadstart:"adloadstart",Status_AdStartPlay:"adstartplay",Status_ADEveryStartPlay:"adeverystartplay",Status_AdPlaying:"adplaying",Status_AdPaused:"adpaused",Status_AdWillPlayEnded:"adwillended",Status_AdPlayEnded:"adended",Status_AdError:"aderror",Status_AdStalled:"adstalled",Status_AdWaiting:"adwaiting",Status_AresPlay:"aresplay",Status_AresEnded:"aresended",Status_AresNoticeInfo:"aresnoticeinfo",Status_ADLoadedMetaData:"adloadedmetadata",Status_Error:"ntferror",Status_Destroy:"ntfdestroy",NTF_StatusChanged:"statusChanged",NTF_Error:"engineError",NTF_SRC_Attaching:"srcAttaching",NTF_VideoRefresh:"videorefresh",NTF_VideoChange:"videochange",NTF_VideoChanged:"videochanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_VRSStart:"vrsstart",NTF_VRSReady:"vrsready",NTF_VRSDone:"vrsdone",NTF_VRSPreloaded:"vrspreloaded",NTF_VDChangeFail:"ntfvdchangefail",NTF_AUDChanged:"ntfaudchange",NTF_AUDChangeFail:"ntfaudchangefail",NTF_ARES_Info:"ntfaresinfo",NTF_DefinitionSwitching:"definitionswitch",NTF_DefinitionSwitched:"definitionswitched",NTF_AudioSwitching:"aduioswitching",NTF_AudioSwitched:"aduioswitched",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_Before_Seeking:"beforeSeeking",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_Recharge:"recharge",NTF_BuyPlay:"buyPlay",NTF_SkipHook:"skiphook",NTF_FollowUpNextLoad:"followUpNextLoad",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",NTF_MutedStartPlay:"mutedStartPlay",NTF_PlayingFailByAutoPlay:"playingFailByAutoPlay",NTF_DelayToPlay:"delaytoplay",NTF_DelayToPlay_End:"delaytoplayend",NTF_Get_Record:"getrecord",NTF_AD_Showtips:"adshowtips",NTF_PLAY_MUTED:"playfailmuted",NTF_FPS_REPORT:"playFPSReport",NTF_IVPACKAGEPARSE_Failed:"IVPackageParse_Failed",NTF_IVPACKAGEPARSE_Finished:"IVPackageParse_Finished",NTF_AD_SingleStart:"aresSingleStart",NTF_AD_SingleEnd:"aresSingleEnd",NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_AD_CanPlayThrough:"adcanplaythrough",NTF_AD_VolumeChanged:"advolumechanged",NTF_AD_DurationChanged:"addurationchange",NTF_AD_TimeUpdate:"adtimeupdate",NTF_AD_Progress:"adprogress",NTF_AD_Seeking:"adseeking",NTF_AD_Seeked:"adseeked",NTF_AD_NotifyManager:"jsNotifyAdManager",NTF_AD_CloudPlay:"adcloudplay",NTF_AD_CloudPlayEnd:"adcloudplayend",NTF_AD_BLOCK:"adblock",NTF_ARES_Load:"aresload",NTF_Show_VIPPay:"showVIPPay",NTF_PREVIEW_END:"previewEnd",NTF_TW_BLOCK:"twBlock",NTF_SKIP_PRELUDE:"skipPrelude",Evt_StartFromHistory:"playStartFromHistory",Evt_SkipHeader:"playSkipHeader",Evt_SkipTailer:"playSkipTailer",Evt_StartShareTime:"playShareTime",Evt_PreloadAD:"playPreloadAD",ERROR_HttpFailed:"P00001",ERROR_AnalyzFailed:"P00002",Enjoy_Evt_PlayEnd:"enjoy_play_end",Enjoy_Evt_PanleShow:"enjoy_panle_show",HTTP_ENGINE:"HTTP",ENGINE_TYPE:"KIWI",CDN_LOADERMODE:"CDN",P2P_LOADERMODE:"P2P"}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=0,i="ntf_";t.a={NTF_PLG_Enable:i+r++,NTF_PLG_Disable:i+r++,NTF_PLG_ALL_LOADED:i+r++,NTF_ZOOMOUT_ENTER:i+r++,NTF_ZOOMOUT_LEAVE:i+r++,NTF_VIDEO_INNER_RESIZE:i+r++,NTF_VIEW_BTN_CLICK:i+r++,NTF_Play:i+r++,NTF_Pause:i+r++,NTF_Replay:i+r++,NTF_ChangeVolume:i+r++,NTF_PlayerSmallWindowStatus:i+r++,NTF_HOTKEY_ControlbarShow:i+r++,NTF_METAPANEL_DATA:i+r++,NTF_METAPANEL_STATE_CHANGE:i+r++,NTF_METAPANEL_TRY_COLLAPSE:i+r++,NTF_BARRAGEPANEL_DATA:i+r++,NTF_RIGHTFLOATER_DATA:i+r++,NTF_PAYLAYER_DATA:i+r++,NTF_ControlbarShow:i+r++,NTF_ControlbarHide:i+r++,NTF_DefinitionBtnClick:i+r++,NTF_DefinitionBtnMouseEnter:i+r++,NTF_DefinitionBtnMouseLeave:i+r++,NTF_DefinitionListShow:i+r++,NTF_DefinitionListhide:i+r++,NTF_DefinitionADShow:i+r++,NTF_DefinitionADClick:i+r++,NTF_DefinitionUpdateText:i+r++,NTF_StageSizeChange:i+r++,NTF_FullScreen:i+r++,NTF_WebFullScreen:i+r++,NTF_SetDownLoad:i+r++,NTF_BarrageSelfSend:i+r++,NTF_BarrageSettingChange:i+r++,NTF_HIDE_BOTTOM_TOP:i+r++,NTF_SHOW_BOTTOM_TOP:i+r++,NTF_BOTTOM_MUTUAL_EXCLUSION:i+r++,NTF_SHOW_VIDEOLIST:i+r++,NTF_HIDE_VIDEOLIST:i+r++,NTF_VIDEOLIST_CHANGED:i+r++,NTF_VIDEOLIST_BTN_CLICK:i+r++,NTF_RF_STATE_CHANGE:i+r++,NTF_TOP_HIDE:i+r++,NTF_TOP_SHOW:i+r++,NTF_BOTTOM_HIDE:i+r++,NTF_BOTTOM_SHOW:i+r++,NTF_DOCK_RIGHT_ITEM_SHOW:i+r++,NTF_DOCK_RIGHT_ITEM_HIDE:i+r++,NTF_CLICK_PLAYLIST_BTN:i+r++,NTF_SHOW_PLAYLIST_BTN:i+r++,NTF_HIDE_PLAYLIST_BTN:i+r++,NTF_SEEKBAR_HOVER:i+r++,NTF_SHOW_HEATMAP:i+r++,NTF_HIDE_CONTROLBAR_VIDEOTIP:i+r++,NTF_SHOW_TOAST:i+r++,NTF_SHOW_TIPS:i+r++,NTF_SHOW_SETTING_BOX:i+r++,NTF_SUBTITLES_REGISTER_DOM:i+r++,NTF_USERSET_SKIP_BTN:i+r++,NTF_PROGRESS_SKIP_BTN:i+r++,NTF_KeyVolumeChange:i+r++,NTF_SHOW_LOGIN_PANEL:i+r++,NTF_SHOW_ENDPLAY_PANEL:i+r++,NTF_HIDE_ENDPLAY_PANEL:i+r++,NTF_VideoListChanged:"videolistchanged",NTF_ADDVideoList:"addvideolist",NTF_REMOVEVideoList:"removevideolist",NTF_ClientInstallChecked:"clientinstallchecked",NTF_IV_SWITCH_FromStoryLine:"ivswitchfromstoryline",NTF_IV_REPLAY:"ivreplay",NTF_IV_PLAYEND:"ivplayend",NTF_IV_INTERACTIONSTART:"ivinteractionstart",NTF_IV_INTERACTIONEND:"ivinteractionend",NTF_IV_SHOWSTROYGUIDE:"ivshowstoryguide",NTF_IV_SHOWSTROYLIST:"ivshowstorylinelist",NTF_BACK_TO_IV_MAIN:"ivbacktomain",NTF_FOLLOW_SET_INFO:"followsetinfo",NTF_FOLLOW_CHANGE_STATE:"followchangestate",NTF_GESTURE_ASYNC_CONTROLS:i+r++,NTF_USER_SEEK:i+r++,NTF_BanTipHide:i+r++,NTF_WebFullScreen_BeforeChange:i+r++,NTF_WebFullScreen_AfterChange:i+r++,NTF_WebFullScreen_SetSwitch:i+r++,NTF_FullScreen_BeforeChange:i+r++,NTF_FullScreen_AfterChange:i+r++,NTF_ScoreTask_ScoreChange:i+r++,NTF_FullScreen_SetSwitch:i+r++,NTF_VideoPercent_Changed:i+r++,NTF_RIGHTBAR_STATUS_CHANGED:i+r++,NTF_EXPANDSCREEN_STATUS_CHANGED:i+r++,NTF_Voice_Change:i+r++,NTF_CTXMenu_Copied:i+r++,NTF_Hotkey_Percent_Seek:i+r++,NTF_Hotkey_Playback_Rate:i+r++,MINI_NTF_PLAY_END:i+r++,MINI_NTF_POSTER_SHOW:i+r++,MINI_NTF_POSTER_HIDE:i+r++,Type_Play:"play",Type_Pause:"pause",Type_Replay:"replay",Type_ExitPic:"exitpicinpic",Type_SEEK_DRAGSTART:"seekdragstart",Type_SEEK_DRAGEND:"seekdragend",NTF_Barrage_SetConfigInfo:i+r++,NTF_Barrage_SetChannelConfigInfo:i+r++,NTF_Barrage_SetSwitch:i+r++,NTF_Barrage_ShowLike:i+r++,NTF_Barrage_ShowMoreLike:i+r++,NTF_Barrage_ShowReport:i+r++,NTF_Barrage_EnsureReport:i+r++,NTF_Barrage_ShowRulePage:i+r++,NTF_Barrage_NotifyBarrageData:i+r++,NTF_Barrage_Send:i+r++,NTF_Barrage_ClearBanWord:i+r++,NTF_Barrage_AddBanWord:i+r++,NTF_Barrage_RemoveBanWord:i+r++,NTF_Barrage_CatchSystemBarrage:i+r++,NTF_Barrage_NotifyGiftInfo:i+r++,NTF_Barrage_ShowSystemBarrage:i+r++,NTF_Barrage_ClickSystemBarrage:i+r++,NTF_Barrage_ClickSystemBarrageButton:i+r++,NTF_Barrage_RequestBarrageData:i+r++,NTF_Subtitles_Changing:i+r++,NTF_Subtitles_Changed:i+r++,NTF_Subtitles_ChangeFailed:i+r++,NTF_FeedBack_Show:i+r++,NTF_FeedBack_Hide:i+r++,NTF_FeedBack_Panel_show:i+r++,NTF_FeedBack_getInfo:i+r++,NTF_TO_DIVERSION:i+r++,NTF_AIView_ItemClick:i+r++,NTF_AIView_AIResult:i+r++,NTF_AIView_AIFeedback:i+r++,NTF_AIView_CLOSE:i+r++,NTF_AIView_BAIKE_CLOSE:i+r++,NTF_AIView_BAIKE_STATECHANGE:i+r++,NTF_IVOS_REC_DATA_COMPLETE:i+r++,NTF_IVOS_DYN_BOX_DATA_COMPLETE:i+r++,NTF_IVOS_TIP_BOX_DATA_COMPLETE:i+r++,NTF_IVOS_REQUEST_IN:i+r++,NTF_IVOS_PREVIEW_CLOSE:i+r++,NTF_IVOS_PREVIEW_STARTPLAY:i+r++,NTF_IVOS_STATE_CHANGED:i+r++,NTF_SVP_POINTSREFRESH:i+r++}},function(e,t,n){var r=n(236);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(37)["default"],i=n(39);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n(140),n(17),n(30),n(25),n(38),n(56),n(43);t.a=function(){var e="",t={},n={},r="",i=navigator,a=i.platform,o=i.userAgent.toLowerCase();n.userAgent=o;var s="";s=navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:(s=o.match(/NetType\/\w+/)?o.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/","");var c=o.match(/rtrident/),u=!c&&o.match(/(ipad).*os\s([\d_]+)/),d=!c&&!u&&o.match(/(iphone\sos)\s([\d_]+)/),l=o.match(/Android\s+([\d.]+)/i),f=o.match(/(?:redmi|hm) ([\w ]+) build/i),h=o.match(/iqiyireader iqiyireaderversion\/([\d.]+)/i),p=o.match(/iqiyiversion_reader\/([\d.]+)/i),_=!h&&!p&&/iqiyiapp/gi.test(o);if(n.IE11=/rv\:11/.test(o),n.IE=/msie/.test(o)||n.IE11,n.IE6=/msie 6/.test(o),n.IE7=/msie 7/.test(o),n.IE8=/msie 8/.test(o),n.IE9=/msie 9/.test(o),n.IE10=/msie 10/.test(o),n.EDGE=/edge/.test(o),n.iPhone=/iphone os/.test(o)&&!c,n.iPhone4=/iphone os [45]_/.test(o)&&!c,n.iPad=/ipad/.test(o)&&!c,n.iPod=/iPod/i.test(o)&&!c,n.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,n.CHROMEIOS=/crios/.test(o),n.CHROME=/chrome/.test(o)&&!n.EDGE,n.SAFARI=/safari/.test(o)&&!/chrome/.test(o),n.FIREFOX=/firefox/.test(o),n.mobile=/mobile/gi.test(o),n.mobileSafari=n.iPhone||n.iPhone||n.iPad,n.QQ=/QQBrowser/gi.test(o),n.WECHAT=/(wechat)|(micromessenger)/gi.test(o),n.SmartTV=/SMART-TV/gi.test(o),n.BAIDU=/baidubrowser/gi.test(o),n.BAIDU_BOX=/baiduboxapp/gi.test(o),n.HUAWEI=/huaweibrowser/gi.test(o),n.VIVO=/vivobrowser/gi.test(o),n.MIUI=/miuibrowser/gi.test(o),n.MIUI_VIDEO=/miuivideo/gi.test(o),n.CHROME){var v=/chrome\/([\d\.]+) /gi.exec(o);n.version=v?parseInt(v[1],10):0}if(n.EDGE){var g=/edge\/([\d\.]+)/gi.exec(o);n.version=g?parseInt(g[1],10):0}f&&(n.redmi=f);var y=/mac/i.test(a),m="X11"==a&&!y,b=/win/i.test(a)&&!m,k=/android/.test(o);t.unix=m,t.win=b,t.mac=y,t.android=k,t.androidMobile=k&&n.mobile,t.androidTablet=k&&(!n.mobile||/pad/i.test(o)),l&&(t.version=l[1]),t.ios=!1,d&&(t.ios=!0,t.version=d[2].replace(/_/g,".")),u&&(t.ios=!0,t.version=u[2].replace(/_/g,".")),n.iPod&&(t.ios=!0),e=n.iPad?"b85da1cf3ae44351":"b6c13e26323c537d";var x=function(e){return r||function(e){var r="01";(n.iPhone||t.android)&&(r="02"),(n.iPad||t.androidTablet)&&(r="03");var i="01";return t.android&&(i="02"),t.mac&&(i="08"),t.ios&&(i="03"),r+i+"00310100"+(e?"10":"00")+"000000"}(e)},T=function(e,t){function n(e){return e.indexOf(".")>-1?e.split(".").slice(0,3):[e.slice(0,6)]}try{e=n("".concat(e)),t=n("".concat(t));for(var r=0;r<e.length||r<t.length;){var i=r<e.length&&"undefined"!=typeof e[r]?parseInt(e[r]):0,a=r<t.length&&"undefined"!=typeof t[r]?parseInt(t[r]):0;if(i>a)return 1;if(i<a)return-1;r++}}catch(o){}return 0},S=t.ios&&!h&&!p||t.android&&((_||n.HUAWEI||n.MIUI_VIDEO||n.MIUI)&&T(t.version,"4.0")>=0||(n.BAIDU_BOX||n.BAIDU||n.WECHAT||!n.WECHAT&&n.QQ&&T(n.version,"7.6")>=0)&&T(t.version,"4.4")>=0||n.VIVO&&T(t.version,"5.0")>0)?"m3u8":"mp4";return/__pmode__=m3u8/.test(window.location.href)?S="m3u8":/__pmode__=mp4/.test(window.location.href)&&(S="mp4"),{browser:n,os:t,code:e,getPtid:x,setPtid:function(e){r=e},getAgentType:function(e){var t=1;switch(x(e).substr(0,4)){case"0108":t=276;break;case"0303":t=10;break;case"0302":t=11;break;case"0203":t=13;break;case"0202":t=12}return t},browserName:function(){},network:s,playerMode:S}}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return T}));var r=n(37),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s),u=(n(10),n(56),n(30),n(17),n(106),n(19),n(38),n(184),n(55),n(27),n(25),n(84),n(45),n(20)),d=document,l=window,f=/^-ms-/,h=/-([a-z])/g,p=Object.prototype.toString,_=Array.prototype.slice,v=!1;try{addEventListener("test",null,Object.defineProperties({},{passive:{get:function(){return v=!0,!1},configurable:!0,enumerable:!0}}))}catch(S){}function g(e){return e.replace(f,"ms-").replace(h,(function(e,t){return t.toUpperCase()}))}function y(e,t){return e.className&&e.className.baseVal!==undefined?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.getAttribute("class")):(" "+e.className+" ").indexOf(" "+t+" ")>=0}function m(e,t){var n=e.className&&e.className.baseVal!==undefined;y(e,t)||(n?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=(e.className?" ":"")+t)}function b(e,t){if(e.className&&e.className.baseVal!==undefined){var n=e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");y(e,t)&&e.setAttribute("class",n)}else{for(var r=" "+e.className+" ";r.indexOf(" "+t+" ")>=0;)r=r.replace(" "+t+" "," ");e.className="function"==typeof r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}}var k=function(){function e(t){return o()(this,e),this._query.call(this,t)}return c()(e,[{key:"find",value:function(t){return this._query(t,new e)}},{key:"findHook",value:function(e){return this.find('[data-player-hook="'.concat(e,'"]'))}},{key:"_query",value:function(e,t){var n,r=this,i=[];if(!e)return this;if("[object nodelist]"===p.call(e).toLowerCase())i=e;else if(e.nodeType)i.push(e);else if(t)for(n=0;n<r.length;n++)i=i.concat(_.call(r[n].querySelectorAll(e)));else i=e.__$__&&"length"in e?_.call(e):d.querySelectorAll(e);for(t=t||r,n=0;n<i.length;n++)t[n]=i[n];return t.__$__=!0,t.length=i.length,t}},{key:"_each",value:function(e){for(var t=this,n=0;n<t.length&&!1!==e.call(t[n],n,t[n]);n++);return t}},{key:"addClass",value:function(e){return this._each((function(t,n){m(n,e)}))}},{key:"removeClass",value:function(e){return this._each((function(t,n){b(n,e)}))}},{key:"replaceClass",value:function(){}},{key:"toggleClass",value:function(){}},{key:"hasClass",value:function(e){return y(this[0],e)}},{key:"css",value:function(e,t){if("object"===i()(e)){for(var n in e)this.css(n,e[n]);return this}return t!==undefined?this._each((function(n,r){r.style[g(e)]=t})):(this.length>0&&(t=getComputedStyle(this[0])[g(e)]),t)}},{key:"show",value:function(){return this.css("display","")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"attr",value:function(e,t){return t!==undefined?this._each((function(n,r){r.setAttribute(e,t)})):(this.length>0&&(t=this[0].getAttribute(e)),t)}},{key:"removeAttr",value:function(){}},{key:"children",value:function(){}},{key:"parent",value:function(){var t,n=this[0];return n&&(t=n.parentNode),this._query(t,new e)}},{key:"html",value:function(){}},{key:"append",value:function(e){var t,n,r=this,i=r[0];return i?("string"==typeof e&&(t=d.createDocumentFragment(),n=d.createElement("iqpdiv"),t.appendChild(n),n.innerHTML=e,e=n.firstChild),i.appendChild(e),n=null,r):r}},{key:"remove",value:function(){return this._each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))}},{key:"offset",value:function(){var e,t=d.documentElement,n=this[0];if(!n)return{top:0,bottom:0,left:0,right:0};e=n.getBoundingClientRect();var r=(l.pageYOffset||t.scrollTop)-(t.clientTop||0),i=(l.pageXOffset||t.scrollLeft)-(t.clientLeft||0);return{top:e.top+r,bottom:e.bottom+r,left:e.left+i,right:e.right+i}}},{key:"width",value:function(e){var t=this[0];if(!t)return 0;if(e!==undefined)return this.css("width",isNaN(e)?e:e+"px");var n=this.css("width");if(n=parseInt("100%"===n?0:n),isNaN(n)){var r=t.offsetWidth;r<=0||null==r||(n=r)}return n}},{key:"height",value:function(e){return this[0]?e!==undefined?this.css("height",isNaN(e)?e:e+"px"):parseInt(this.css("height")):0}},{key:"contains",value:function(){}},{key:"on",value:function(e,t,n){var r=this._events=this._events||[],i=r[e];return n=Object(u.a)({capture:!1,passive:!1,once:!1},n||{},!0),i||(i=r[e]=[]),i.push(t),this._each((function(r,i){i.addEventListener(e,t,v?n:n.capture)}))}},{key:"un",value:function(){}},{key:"fire",value:function(e,t){var n=this,r=n._events=n._events||[],i=r[e];i||(i=r[e]=[]),t.data=t.data||{},n._each((function(e,n){i.forEach((function(e){e.call(n,t)}))}))}}]),e}();function x(e){return new k(e)}var T=x(document)},function(e,t,n){var r=n(22),i=n(105),a=n(102),o=n(34),s=n(41),c=n(125),u=n(235),d=n(24),l=i("Reflect","construct"),f=d((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),h=!d((function(){l((function(){}))})),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(h&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var i=n.prototype,d=c(s(i)?i:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,n){var r=n(183),i=n(83),a=n(248);r||i(Object.prototype,"toString",a,{unsafe:!0})},function(e,t,n){"use strict";n(10),n(19);var r=null;function i(){var e=new Date;return(e.getHours()>=10?e.getHours():"0"+e.getHours())+":"+(e.getMinutes()>=10?e.getMinutes().toString():"0"+e.getMinutes())+":"+(e.getSeconds()>=10?e.getSeconds().toString():"0"+e.getSeconds())}t.a=Object.defineProperties({debug:function(e){r?r.debug("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},log:function(e){r?r.log("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},info:function(e){r?r.info("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},warn:function(e){r?r.warn("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},error:function(e){r?r.error("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)}},{logTarget:{set:function(e){r=e},configurable:!0,enumerable:!0}})},function(e,t,n){"use strict";t.a={M4S:"m4s",TS:"ts",FTS:"fts",DASH:"dash",VP9:"vp9",AV1:"AV1"}},function(e,t,n){"use strict";n(25),n(43),n(17),n(10),n(19);function r(e){try{return localStorage.getItem(e)}catch(t){return null}}function i(e,t){try{localStorage.setItem(e,t)}catch(n){}}var a=0,o=0,s=32,c=0,u=32,d=!1,l=r("absDoMain");r("onP2PLog")&&(d=!0);var f=r("downTime");if(f&&(f=parseInt(f)),f&&Date.now()-f<864e5){var h=r("downMax");h&&(h=parseInt(h)),h&&(s=h)}var p=r("upTime");if(p&&(p=parseInt(p)),p&&Date.now()-p<864e5){var _=r("upMax");_&&(_=parseInt(_)),_&&(u=_)}var v=null;var g=Object.defineProperties({getUserInfo:function(){if(v||(v=r("QP0022")),v){var e=v.split("|");return!e||e.length<2?{}:{userInfo:e[0]+"|"+e[1],idc:e[2],userNetType:e[0],userArea:e[1].split("-")[0],userIP:e[1].split("-")[1]}}return{}},setUserInfo:function(e){v=e,i("QP0022",e)},aid:0,MixWaterMark:!1,trackerStatus:0,platform:0,enableStartSpeed:!1,p2pLog:"",onLog:d,bitrate:0,absOpen:!0,getBufferFunc:null,switchAutoDef:null,canSwitchVd:null,startPlayed:null,getReBufTimeFunc:null,sendPingBack:null,getUserInfoFunc:null,noticeDataArrived:null,checkIsMobius:null,noticeRefreshMovieData:null,playDuration:0,tvId:"",trackerIP:"",absStatus:0,cdnLoadDoMain:"",lastReadSegIndex:0,lastReadTvID:0,fileType:"",pcwBuffer:0,avgBuffer:0,avgBufferCnt:0,cdnSize:0,cdnCostTime:0,openDache:!0,last_errMesaage:"",last_errurl:"",last_cdnIP:"",idc:"",domain:""},{bid:{get:function(){return r("bid")},configurable:!0,enumerable:!0},downMax:{get:function(){return s},configurable:!0,enumerable:!0},cdnSpeed:{get:function(){return a},set:function(e){!function(e){(a=e)+o>s&&(i("downMax",(s=a+o).toString()),i("downTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},downSpeed:{get:function(){return o},set:function(e){!function(e){a+(o=e)>s&&(i("downMax",(s=a+o).toString()),i("downTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},upMax:{get:function(){return u},configurable:!0,enumerable:!0},upSpeed:{get:function(){return c},set:function(e){!function(e){(c=e)>u&&(i("upMax",(u=c).toString()),i("upTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},absDoMain:{get:function(){return l},configurable:!0,enumerable:!0}});t.a=g},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=function(){function e(t){return i()(this,e),new(0,e.PlayerLogger)(t)}return o()(e,null,[{key:"PlayerLogger",get:function(){return window.QiyiPlayerLoader.logger()}},{key:"levels",get:function(){return e.PlayerLogger.Levels}},{key:"stringify",value:function(e){var t="";try{t=JSON.stringify(e)}catch(n){}return t}},{key:"setLevel",value:function(t){e.PlayerLogger.setLevel(t)}},{key:"getLevel",value:function(){return e.PlayerLogger.getLevel()}},{key:"getLog",value:function(){return e.PlayerLogger.getLog()}},{key:"saveImmediately",value:function(){e.PlayerLogger.saveImmediately()}}]),e}();t.a=s},function(e,t,n){"use strict";n(106),n(17),n(19);var r=n(20),i={},a={get:function(e,t){var n="";if((t=Object(r.a)({memory:!1},t,!0)).memory&&Object.prototype.hasOwnProperty.call(i,e))n=i[e];else{if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var a=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);a&&(n=a[2]||"")}"string"==typeof n&&(n=decodeURIComponent(n)),t.memory&&(i[e]=n)}return n},set:function(){},remove:function(e,t){(t=t||{}).expires=-1,this.set(e,"",t)}};t.a=a},function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return _})),n.d(t,"k",(function(){return v}));n(246),n(10),n(93),n(31),n(87);var r=n(21),i=n(13),a={mobile:!1,limitP2P:"",onP2P:!0,trackerVersion:3,tracker:[],stun:[],aidList:[],defaultTracker:[],getPeerIDStep:3e4,weedOutPeerStep:3e4,connectPeerStep:2e3,NATTimeoutStep:15e3,connectMax:8,passiveMax:10,RTCMax:1500,RTCPoolSize:50,coolDownTime:3e5,switchPage:!1,closeP2PVidList:[],closeP2PNetList:[],closeP2PFileTypeList:[],closeP2PProvinceList:[]},o={openP2P:!1,p2pUpLoad:!1,memory:0,fastGC:0,cacheMaxLen:50,loadMinLen:30},s={dispatchCfg:[8e3,8e3,8e3,8e3],TTFBCfg:[8e3,8e3,8e3,8e3],rcvCfg:[8e3,8e3,8e3,8e3],reLoadCfg:[500,2e3,4e3,6e3],maxBuff:30},c={open:!1},u={subPieceSize:1024,chunkSize:1048576,videoDataSize:0,videoMaxSize:134217728},d={play:null,sourceId:"",d:{URL:""}};function l(e){i.a.enableStartSpeed&&(d.play=e,e&&e.ts&&e.ts.l&&(d.d.URL=e.ts.l,d.sourceId=r.a.getFileNameFromUrl(e.ts.l)))}function f(e){var t=h.get(e);if(t)return t;if(d.d.URL&&d.sourceId&&d.sourceId===e&&i.a.enableStartSpeed){var n=[];return n.push(d.d),h.set(e,n),d.d={URL:""},d.sourceId="",n}return null}var h=new Map,p=25,_=601,v=60;t.i={version:"1.0.0"}},function(e,t,n){"use strict";var r=n(22),i=n(146);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(5),c=n.n(s),u=n(6),d=n.n(u),l=n(1),f=n.n(l),h=n(42);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var _="ntf_plg_",v=0,g={SHOW:_+v++,HIDE:_+v++},y=function(e){c()(n,e);var t=p(n);function n(e,r,a,o){var s;return i()(this,n),(s=t.call(this)).view=r,s.engine=r.engine,s.name=e,s.visible=!1,s.isChildPlugin=!!o,s.enabled=!0,a&&(s.parent=a,s.plugin=a.querySelector('[data-player-hook="'.concat(e,'"]')),s.cache="plgcontainer"===a.getAttribute("data-player-hook")),s.cacheFragment=document.createDocumentFragment(),s}return o()(n,[{key:"_onBeforeEnableAction",value:function(){}},{key:"enable",value:function(){this.enabled||(this._onBeforeEnableAction(),this.enabled=!0,this.cache&&this.plugin&&!this.isChildPlugin&&this.parent.appendChild(this.plugin),this._onAfterEnableAction(),this.rollType=null,this.seekable=!1)}},{key:"_onAfterEnableAction",value:function(){}},{key:"_onBeforeDisableAction",value:function(){}},{key:"disable",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e&&this.rollType&&this.rollType!==e.rollType&&(this.enabled=!0),this.enabled&&(this.rollType=e.rollType,this.seekable=e.seekable,this._onBeforeDisableAction(),this.enabled=!1,this.cache&&this.plugin&&!this.isChildPlugin&&this.cacheFragment.appendChild(this.plugin),this._onAfterDisableAction())}},{key:"_onAfterDisableAction",value:function(){}},{key:"show",value:function(){this.visible=!0,this.plugin&&(this.plugin.style.display="",this.emit(g.SHOW))}},{key:"hide",value:function(){this.visible=!1,this.plugin&&(this.plugin.style.display="none",this.emit(g.HIDE))}},{key:"toggle",value:function(){this.visible?this.hide():this.show()}},{key:"destroy",value:function(){this.plugin&&this.plugin.parentNode&&this.plugin.parentNode.removeChild(this.plugin)}},{key:"fire",value:function(e,t){this.view.emit(e,t)}}],[{key:"css",value:function(){return""}},{key:"html",value:function(){return""}},{key:"padCss",value:function(){return this.css()}},{key:"padHtml",value:function(){return this.html()}},{key:"mobileCss",value:function(){return this.css()}},{key:"mobileHtml",value:function(){return this.html()}}]),n}(h.a);t.b=y},function(e,t,n){"use strict";var r=n(83),i=n(34),a=n(24),o=n(170),s="toString",c=RegExp.prototype,u=c.toString,d=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=s;(d||l)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(n===undefined&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)}),{unsafe:!0})},function(){},function(e,t,n){"use strict";n(56),n(140),n(17),n(25),n(10),n(19),n(47),n(106),n(38),n(286),n(43),n(129),n(116);var r=n(13),i=n(16),a=o("QC005");function o(e){var t="";if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);n&&(t=n[2]||"")}return"string"==typeof t&&(t=decodeURIComponent(t)),t}function s(){return r.a.getUserInfo()}t.a={fireUrl:function(e,t){if("string"==typeof t&&e){var n=new Image;n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,n=null};var r=[];for(var i in e.dur=+new Date,e)e.hasOwnProperty(i)&&r.push(i+"="+encodeURIComponent(e[i]));n.src=t+"?"+r.join("&")}},accSub:function(e,t){var n,r,i,a;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{r=t.toString().split(".")[1].length}catch(o){r=0}return i=Math.pow(10,Math.max(n,r)),a=n>=r?n:r,parseFloat((Math.round(e*i-t*i)/i).toFixed(a))},accAdd:function(e,t){var n,r,i;try{n=e.toString().split(".")[1].length}catch(a){n=0}try{r=t.toString().split(".")[1].length}catch(a){r=0}return i=Math.pow(10,Math.max(n,r)),Math.round(e*i+t*i)/i},trimNumber:function(e,t){t||(t=1e4);var n=t.toString().substr(1),r=Math.ceil(e);return r>0&&(n=(r+=t).toString().substr(1)),n},getCookie:o,searchPosIndex:function(e,t){if(e<0)return!1;var n=0,r=t.length-1;if(e>=t[r])return r;for(;n<=r;){var i=Math.floor((n+r)/2);if(e>=t[i]&&(e<t[i+1]||i===t.length-1))return i;e<t[i]?r=i-1:n=i+1}return-1},searchTSPosIndex:function(e,t){if(e<0)return!1;var n=0,r=t.length-1;if(e>=t[r].ePos)return t.length;for(;n<=r;){var i=Math.floor((n+r)/2);if(e>=t[i].sPos&&e<t[i].ePos)return i;e<t[i].sPos?r=i-1:n=i+1}return-1},getUserInfoFromCookie:s,strToNumber:function(e){var t,n=0;t=e.length>8?e.slice(0,8):e;for(var r=0;r<t.length;r++)switch(r){case 0:n+=72057594037927940*("0x"+t[r]);break;case 1:n+=281474976710656*("0x"+t[r]);break;case 2:n+=1099511627776*("0x"+t[r]);break;case 3:n+=4294967296*("0x"+t[r]);break;case 4:n+=16777216*("0x"+t[r]);break;case 5:n+=65536*("0x"+t[r]);break;case 6:n+=256*("0x"+t[r]);break;case 7:n+=1*("0x"+t[r])}return n},getQueryString:function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=e.split("?")[1].match(n);return null!=r?decodeURIComponent(r[2]):null},sliceStr:function(e,t){var n="";if(e.length<=t){for(n=e;n.length<t;)n+="0";return n}var r=Math.floor(e.length/t);(t-1)*(r+1)+1<=e.length&&(r+=1);for(var i=0;n.length<t;)n+=e[i],i+=r;return n},getPureIP:function(e){var t=e.match(/(\w+):\/\/([^/:]+):?(\d*)((?:\/|$)[^?#]*)/);return t?t[2]:""},parseURL:function(e){return e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/)},isDomain:function(e){var t=e.match(/[a-z|A-Z]/g);return!!(t&&t.length>0)},shuffle:function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},ArrayBufferToStr:function(e,t,n){for(var r="",i=0;i<n;i++){var a=parseInt(e[t+i]);if(a===undefined)break;r+=(a<16?"0"+a.toString(16):a.toString(16))+"-"}return r},ArrayBufferTo10Str:function(e,t,n){for(var r="",i=0;i<n;i++){var a=parseInt(e[t+i]);if(a===undefined)break;r+=a.toString(10)+"-"}return r},setStringToData:function(e,t,n,r){for(var i=0;i<r;i++)i>=n.length?e[t+i]=0:e[t+i]=n.charCodeAt(i)},setNumberToData:function c(e,t,n,r){for(var i=n,a=t,o=r;o>4;)c(e,a,Math.floor(i/4294967296),o-4),i%=4294967296,a+=o-4,o-=o-4;for(var s=0;s<o;)e[a+s]=i/(1<<8*(o-s-1)),s++},getFileNameFromUrl:function(e){var t=e.indexOf(".ts");t<0&&(t=e.indexOf(".m4s")),t<0&&(t=e.indexOf(".webm")),t<0&&(t=e.indexOf(".mp4")),t<0&&(t=e.indexOf(".265ts"));var n=e.lastIndexOf("/",t);return e.slice(n+1,t)},getTrackerIP:function(e,t,n,a){if(i.g.aidList.indexOf(r.a.aid)>=0&&i.g.defaultTracker.length>0)return i.g.defaultTracker[Math.floor(Math.random()*(i.g.defaultTracker.length-1))];for(var o="",s=0;s<t.length;s++)if(e===t[s].key||"*"===t[s].key){var c=t[s].value;c&&c.length>0&&(o=c[((n-1+1)%c.length+(a||0))%c.length]);break}return o},isHit:function(){var e=a,t=s();return!!(parseInt(e.substring(0,1))<3||t&&t.userInfo&&t.userInfo.indexOf("OVERSEA")>=0)},QC005:a}},function(e,t,n){var r=n(23),i=n(109).f,a=n(90),o=n(83),s=n(176),c=n(225),u=n(138);e.exports=function(e,t){var n,d,l,f,h,p=e.target,_=e.global,v=e.stat;if(n=_?r:v?r[p]||s(p,{}):(r[p]||{}).prototype)for(d in t){if(f=t[d],l=e.noTargetGet?(h=i(n,d))&&h.value:n[d],!u(_?d:p+(v?".":"#")+d,e.forced)&&l!==undefined){if(typeof f==typeof l)continue;c(f,l)}(e.sham||l&&l.sham)&&a(f,"sham",!0),o(n,d,f,e)}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(224))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(22),i=n(243);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){"use strict";n(10),n(19),n(25),n(43),n(17),n(47);var r=n(15),i=n(89),a=(n(88),0),o=undefined,s="",c=window.webEventID||"",u=function(){c=window.webEventID||""},d=function(){},l=function(){},f=function(){var e="QC006",t=r.a.get(e);return t||(window.QiyiPlayerIsNewUser=!0,t=d(),l(e,t)),t},h=function(){var e="QC005",t=r.a.get(e);return t||(t=d(),l(e,t,283824e7)),t},p={createUUID:function(){},getQtsid:function(){},getJsuid:f,getFluid:function(){return h()},getWeid:function(){},getEid:function(){},getIsNewUser:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(!e&&o===undefined){var t="QP0030",n=parseInt(r.a.get(t),10);1===n?o=!1:(o=!0,l(t,1,283824e7))}return window.QiyiPlayerIsNewUser===undefined&&(window.QiyiPlayerIsNewUser=!1,f()),window.QiyiPlayerIsNewUser},init:function(){try{window.addEventListener("unload",u),window.addEventListener("beforeunload",u),window.addEventListener("pagehide",u)}catch(e){}}};t.a=p},function(e,t,n){"use strict";var r=n(22),i=n(24),a=n(144),o=n(41),s=n(86),c=n(44),u=n(150),d=n(181),l=n(139),f=n(33),h=n(160),p=f("isConcatSpreadable"),_=9007199254740991,v="Maximum allowed index exceeded",g=h>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),y=l("concat"),m=function(e){if(!o(e))return!1;var t=e[p];return t!==undefined?!!t:a(e)};r({target:"Array",proto:!0,forced:!g||!y},{concat:function(e){var t,n,r,i,a,o=s(this),l=d(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(m(a=-1===t?o:arguments[t])){if(f+(i=c(a.length))>_)throw TypeError(v);for(n=0;n<i;n++,f++)n in a&&u(l,f,a[n])}else{if(f>=_)throw TypeError(v);u(l,f++,a)}return l.length=f,l}})},function(e,t,n){"use strict";var r=n(46),i=n.n(r),a=n(37),o=n.n(a),s=n(29),c=n.n(s),u=(n(30),n(17),n(47),n(136),n(20)),d=n(89),l=n(36),f=document,h=function(){},p={},_={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},v={"*":null,text:null,html:null,xml:null,json:function(){}},g={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:h,success:h,failure:h},y=function(e){var t=[];if("object"==o()(e))for(var n in e)t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.join("&").replace(/%20/g,"+")},m=function(e){e=e||{},Object(u.a)(e,g);var t=e.url,n=e.dataType,r=e.params||{},a=e.success,o=e.failure;t&&function(){var s=i()(c.a.mark((function u(){var i,s,d,f,h,p,g,m,b,k;return c.a.wrap((function(){}),u)})));return function(){return s.apply(this,arguments)}}()()};t.a={serializeParam:y,ajax:m,json:function(){},jsonp:function(e){e=e||{},Object(u.a)(e,g);var t=e.url,n=e.params||{},r=y(n),i=t+(r.length>0?(/\?/i.test(t)?"&":"?")+r:""),a=e.complete,o=e.success,s=e.failure,c=(e.callbackhead?e.callbackhead:"Q")+Object(d.a)(e.fixedCallback||i),l=!!e.memory,h=Object(d.a)(i),_=p[h];if(i){if(!(l&&_&&o)){var v,m=function(){},b=function(){if(window[c]){window[c]=undefined;try{delete window[c]}catch(e){}}};window[c]=function(){};var k={},x=f.createElement("script");x.async=!0,x.type="text/javascript",x.charset=e.charset;var T=function(){};x.abort=T,x.onload=x.onreadystatechange=function(){},x.onerror=function(){m("fail",null),T()},v=setTimeout((function(){m("fail",408),T()}),e.timeout);var S={};if(S[e.jsonpCallback]=c,Object(u.a)(n,S,!0),e.isSort&&1==e.isSort){var P=[],w="";for(var I in e.params)P.push(I+"="+e.params[I]);P.sort();for(var A=0;A<P.length;A++)A===P.length-1?w+=P[A]:w+=P[A]+"&";k.url=t+(/\?/i.test(t)?"&":"?")+w}else k.url=i+(/\?/i.test(i)?"&":"?")+y(S);return k.params=n,"function"==typeof e.beforeSend&&(k=e.beforeSend(k)||k),x.src=k.url,f.getElementsByTagName("head")[0].appendChild(x),x}o(_)}},beacon:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if("string"==typeof t){var r=Object(u.a)({cache:!1},n,!0);if(e){var i=[];for(var a in!1===r.cache&&(e._=+new Date),e)i.push(a+"="+encodeURIComponent(e[a]));var o=t+(/\?/.test(t)?"&":"?")+i.join("&"),s=new Image;s.onload=s.onerror=s.onabort=function(){s.onload=s.onerror=s.onabort=null,s=null},s.src=o}}}}},function(e,t,n){e.exports=n(239)},function(e,t,n){"use strict";var r=n(161),i=n(34),a=n(44),o=n(96),s=n(95),c=n(182),u=n(244),d=n(162),l=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,_=h?"$":"$0";return[function(n,r){var i=s(this),a=n==undefined?undefined:n[e];return a!==undefined?a.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!h&&p||"string"==typeof r&&-1===r.indexOf(_)){var s=n(t,e,this,r);if(s.done)return s.value}var v=i(e),g=String(this),y="function"==typeof r;y||(r=String(r));var m=v.global;if(m){var b=v.unicode;v.lastIndex=0}for(var k=[];;){var x=d(v,g);if(null===x)break;if(k.push(x),!m)break;""===String(x[0])&&(v.lastIndex=c(g,a(v.lastIndex),b))}for(var T,S="",P=0,w=0;w<k.length;w++){x=k[w];for(var I=String(x[0]),A=l(f(o(x.index),g.length),0),E=[],D=1;D<x.length;D++)E.push((T=x[D])===undefined?T:String(T));var q=x.groups;if(y){var O=[I].concat(E,A,g);q!==undefined&&O.push(q);var R=String(r.apply(undefined,O))}else R=u(I,g,A,E,q,r);A>=P&&(S+=g.slice(P,A)+R,P=A+I.length)}return S+g.slice(P)}]}))},function(e,t,n){"use strict";var r=n(98),i=n(203),a=n(152),o=n(107),s=n(247),c="Array Iterator",u=o.set,d=o.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,{value:undefined,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",SkinType_pc:"pc",SkinType_mobile:"mobile",SkinType_mini:"mini",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_CHECK_CLIENT_INSTALL:"checkClientInstall",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_BARRAGE_SEND:"barrageSend",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_WRITE_FLASH_LOG:"writeFlashLog",QYPLAYER_SWITCH_PLAYER:"switchPlayer",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_AD_BLOCK:"adblock",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_SCORECHANGE:"scoreTaskChange",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW:"feedbackPanelShow",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_BuyPlay:"buyPlay",QYPLAYER_NOTIFY_TO_DIVERSION:"todiversion",QYPLAYER_NOTIFY_AI_STAR_INFO:"aistarinfo",QYPLAYER_NOTIFY_AI_FEEDBACK:"aifeedback",QYPLAYER_NOTIFY_AI_STAR_CLOSE:"aistarclose",QYPLAYER_NOTIFY_SHOW_VIDEOLIST:"showvideolist",QYPLAYER_NOTIFY_CLICK_VIDEOLIST_BTN:"clickVideolistBtn",QYPLAYER_NOTIFY_FOLLOW_CLICK:"followbtnclick",QYPLAYER_NOTIFY_INTERACTION_START:"interactionstart",QYPLAYER_NOTIFY_INTERACTION_END:"interactionend",QYPLAYER_NOTIFY_METAPANEL_STATE_CHANGE:"metaPanelStateChange",QYPLAYER_NOTIFY_RF_STATE_CHANGE:"rightFloaterStateChange",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged",QYPLAYER_H5_SEEK_DRAGSTART:"h5seekdragstart",QYPLAYER_H5_SEEK_DRAGEND:"h5seekdragend"}},function(e,t,n){var r=n(23),i=n(191),a=n(53),o=n(166),s=n(192),c=n(227),u=i("wks"),d=r.Symbol,l=c?d:d&&d.withoutSetter||o;e.exports=function(e){return a(u,e)||(s&&a(d,e)?u[e]=d[e]:u[e]=l("Symbol."+e)),u[e]}},function(e,t,n){var r=n(41);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){"use strict";n(10),n(25),n(30),n(17),n(47);t.a={isBool:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isArray:function(){},isObject:function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},formatMilliseconds:function(){},protocolRevise:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return e.replace("http://","//").replace("https://","//").replace(".qiyipic",".iqiyipic")},hex2rgba:function(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,n=[],r=1;r<e.length;){var i=e.substring(r,r+2);n.push(parseInt(i,16)),r+=2}return n.push(t),"rgba(".concat(n.join(","),")")}}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(22),i=n(174).indexOf,a=n(119),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:s||!c},{indexOf:function(e){return s?o.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(262);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},e.exports["default"]=e.exports,e.exports.__esModule=!0),i(t,n,a||t)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r,i=n(37),a=n.n(i),o=n(2),s=n.n(o),c=n(3),u=n.n(c),d=(n(155),Object.create||function(e){var t=function(){};return t.prototype=e,new t}),l=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},f=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}},h=50,p=function(){function e(){s()(this,e),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=d(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}return u()(e,[{key:"setMaxListeners",value:function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this}},{key:"getMaxListeners",value:function(){return v(this)}},{key:"emit",value:function(e){var t,n,r,i,a,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:g(n,u,this);break;case 2:y(n,u,this,arguments[1]);break;case 3:m(n,u,this,arguments[1],arguments[2]);break;case 4:b(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];k(n,u,this,i)}return!0}},{key:"on",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{highPriority:!1};return"object"!=a()(n)&&(n={}),x(this,e,t,n)}},{key:"once",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,function(e,t,n){var r={fired:!1,wrapFn:undefined,target:e,type:t,listener:n},i=f.call(S,r);return i.listener=n,r.wrapFn=i,i}(this,e,t)),this}},{key:"off",value:function(e,t){return T.call(this,e,t)}},{key:"un",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){var t,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=d(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=d(null):delete n[e]),this;if(0===arguments.length){var i,a=l(n);for(r=0;r<a.length;++r)"off"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=d(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.off(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.off(e,t[r]);return this}},{key:"listeners",value:function(e){return P(this,e,!0)}},{key:"rawListeners",value:function(e){return P(this,e,!1)}},{key:"listenerCount",value:function(){return e.listenerCount.apply(this,arguments)}}],[{key:"listenerCount",value:function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):w.call(e,t)}}]),e}();t.a=p;try{var _={};Object.defineProperty&&Object.defineProperty(_,"x",{value:0}),r=0===_.x}catch(A){r=!1}function v(e){return e._maxListeners===undefined?p.defaultMaxListeners:e._maxListeners}function g(e,t,n){if(t)e.call(n);else for(var r=e.length,i=I(e,r),a=0;a<r;++a)try{i[a].call(n)}catch(o){console.error(o)}}function y(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=I(e,i),o=0;o<i;++o)try{a[o].call(n,r)}catch(s){console.error(s)}}function m(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=I(e,a),s=0;s<a;++s)try{o[s].call(n,r,i)}catch(c){console.error(c)}}function b(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=I(e,o),c=0;c<o;++c)try{s[c].call(n,r,i,a)}catch(u){console.error(u)}}function k(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=I(e,i),o=0;o<i;++o)try{a[o].apply(n,r)}catch(s){console.error(s)}}function x(e,t,n){var r,i,o,s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},c={highPriority:!!s.highPriority};if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]):(i=e._events=d(null),e._eventsCount=0),o){if("function"==typeof o?o=i[t]=[o,n]:c.highPriority?o.shift(n):o.push(n),!o.warned&&(r=v(e))&&r>0&&o.length>r){o.warned=!0;var u=new Error("Possible Dispatcher memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,"object"===("undefined"==typeof console?"undefined":a()(console))&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else o=i[t]=n,++e._eventsCount;return e}function T(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=d(null):(delete r[e],r.off&&this.emit("off",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.off&&this.emit("off",e,o||t)}return this}function S(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function P(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):I(i,i.length):[]}function w(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function I(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}r?Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');h=e}}):p.defaultMaxListeners=h},function(e,t,n){"use strict";var r=n(161),i=n(201),a=n(34),o=n(95),s=n(142),c=n(182),u=n(44),d=n(162),l=n(146),f=n(24),h=[].push,p=Math.min,_=4294967295,v=!f((function(){return!RegExp(_,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),a=n===undefined?_:n>>>0;if(0===a)return[];if(e===undefined)return[r];if(!i(e))return t.call(r,e,a);for(var s,c,u,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,f+"g");(s=l.call(v,r))&&!((c=v.lastIndex)>p&&(d.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&h.apply(d,s.slice(1)),u=s[0].length,p=c,d.length>=a));)v.lastIndex===s.index&&v.lastIndex++;return p===r.length?!u&&v.test("")||d.push(""):d.push(r.slice(p)),d.length>a?d.slice(0,a):d}:"0".split(undefined,0).length?function(e,n){return e===undefined&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),a=t==undefined?undefined:t[e];return a!==undefined?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var l=a(e),f=String(this),h=s(l,RegExp),g=l.unicode,y=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),m=new h(v?l:"^(?:"+l.source+")",y),b=i===undefined?_:i>>>0;if(0===b)return[];if(0===f.length)return null===d(m,f)?[f]:[];for(var k=0,x=0,T=[];x<f.length;){m.lastIndex=v?x:0;var S,P=d(m,v?f:f.slice(x));if(null===P||(S=p(u(m.lastIndex+(v?0:x)),f.length))===k)x=c(f,x,g);else{if(T.push(f.slice(k,x)),T.length===b)return T;for(var w=1;w<=P.length-1;w++)if(T.push(P[w]),T.length===b)return T;x=k=S}}return T.push(f.slice(k)),T}]}),!v)},function(e,t,n){var r=n(96),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(23),i=n(223),a=n(238),o=n(90);for(var s in i){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{o(u,"forEach",a)}catch(d){u.forEach=a}}},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,"next",e)}function c(e){n(o,i,a,s,c,"throw",e)}s(undefined)}))}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(22),i=n(148),a=n(98),o=n(119),s=[].join,c=i!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s.call(a(this),e===undefined?",":e)}})},function(e,t,n){var r=n(24);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return x}));n(9);var r=n(103),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s),u=n(5),d=n.n(u),l=n(6),f=n.n(l),h=n(1),p=n.n(h),_=(n(47),n(56),n(27),n(99)),v=n(266),g=n(164);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var m=v.a.console,b=">>>",k=new(function(e){d()(n,e);var t=y(n);function n(){var e;return o()(this,n),(e=t.call(this)).enable=!0,e.MSG_NAME="__log__",e}return c()(n,[{key:"info",value:function(){this.log.apply(this,arguments)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"log",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=m.log).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"debug",Array.prototype.slice.call(arguments).join("")):this.enable&&m.debug&&(r=m.debug).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}},{key:"assert",value:function(e){if(this.enable&&m.assert){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=Array.prototype.slice.call(r,1);o.unshift(b),(t=m.assert).call.apply(t,[m,e].concat(i()(o)))}}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"warn",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=m.warn).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"error",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=m.error).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}}]),n}(_.EventEmitter));function x(e){m=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var r="iqp-big-mode",i="iqp-btn-disable",a="volumeup",o="volumedown",s="volumem"},,function(e,t,n){var r=n(48),i=n(204),a=n(34),o=n(124),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var r=n(22),i=n(24),a=n(269),o=n(34),s=n(128),c=n(44),u=n(142),d=a.ArrayBuffer,l=a.DataView,f=d.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new d(2).slice(1,undefined).byteLength}))},{slice:function(e,t){if(f!==undefined&&t===undefined)return f.call(o(this),e);for(var n=o(this).byteLength,r=s(e,n),i=s(t===undefined?n:t,n),a=new(u(this,d))(c(i-r)),h=new l(this),p=new l(a),_=0;r<i;)p.setUint8(_++,h.getUint8(r++));return a}})},function(e,t,n){"use strict";var r=n(22),i=n(104).find,a=n(203),o="find",s=!0;o in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}}),a(o)},function(e,t,n){"use strict";var r=n(22),i=n(41),a=n(144),o=n(128),s=n(44),c=n(98),u=n(150),d=n(33),l=n(139)("slice"),f=d("species"),h=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!l},{slice:function(e,t){var n,r,d,l=c(this),_=s(l.length),v=o(e,_),g=o(t===undefined?_:t,_);if(a(l)&&("function"!=typeof(n=l.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[f])&&(n=undefined):n=undefined,n===Array||n===undefined))return h.call(l,v,g);for(r=new(n===undefined?Array:n)(p(g-v,0)),d=0;v<g;v++,d++)v in l&&u(r,d,l[v]);return r.length=d,r}})},function(e,t,n){"use strict";var r=n(85),i=n(363),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(a(this),e,t,arguments.length>2?arguments[2]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(104).every,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(260),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(85),i=n(104).filter,a=n(364),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:undefined);return a(this,t)}))},function(e,t,n){"use strict";var r=n(85),i=n(104).find,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(104).findIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(104).forEach,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(174).includes,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(174).indexOf,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(23),i=n(85),a=n(31),o=n(33)("iterator"),s=r.Uint8Array,c=a.values,u=a.keys,d=a.entries,l=i.aTypedArray,f=i.exportTypedArrayMethod,h=s&&s.prototype[o],p=!!h&&("values"==h.name||h.name==undefined),_=function(){return c.call(l(this))};f("entries",(function(){return d.call(l(this))})),f("keys",(function(){return u.call(l(this))})),f("values",_,!p),f(o,_,!p)},function(e,t,n){"use strict";var r=n(85),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].join;a("join",(function(e){return o.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(85),i=n(285),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(85),i=n(104).map,a=n(142),o=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:undefined,(function(e,t){return new(s(a(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var r=n(85),i=n(270).left,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=n(270).right,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){for(var e,t=this,n=i(t).length,r=o(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}))},function(e,t,n){"use strict";var r=n(85),i=n(44),a=n(294),o=n(86),s=n(24),c=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){c(this);var t=a(arguments.length>1?arguments[1]:undefined,1),n=this.length,r=o(e),s=i(r.length),u=0;if(s+t>n)throw RangeError("Wrong length");for(;u<s;)this[t+u]=r[u++]}),s((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var r=n(85),i=n(142),a=n(24),o=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice;c("slice",(function(e,t){for(var n=u.call(o(this),e,t),r=i(this,this.constructor),a=0,c=n.length,d=new(s(r))(c);c>a;)d[a]=n[a++];return d}),a((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var r=n(85),i=n(104).some,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(85),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].sort;a("sort",(function(e){return o.call(i(this),e)}))},function(e,t,n){"use strict";var r=n(85),i=n(44),a=n(128),o=n(142),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,c=a(e,r);return new(o(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((t===undefined?r:a(t,r))-c))}))},function(e,t,n){"use strict";var r=n(23),i=n(85),a=n(24),o=r.Int8Array,s=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,d=[].slice,l=!!o&&a((function(){u.call(new o(1))}));c("toLocaleString",(function(){return u.apply(l?d.call(s(this)):s(this),arguments)}),a((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!a((function(){o.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var r=n(85).exportTypedArrayMethod,i=n(24),a=n(23).Uint8Array,o=a&&a.prototype||{},s=[].toString,c=[].join;i((function(){s.call({})}))&&(s=function(){return c.call(this)});var u=o.toString!=s;r("toString",s,u)},function(e,t,n){n(282)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";t.a={DASH:"DASH",CKNSP:"CKNSP",KIWI:"KIWI",KIWIR:"KIWIR",AD:"AD",IVG:"IVG",P00001:"P00001",P00002:"P00002",P00003:"P00003",P00004:"P00004",P00005:"P00005",P00006:"P00006",P00007:"P00007",P07001:"P07001",IV0001:"IV0001",dataKeyMap:{A00001:2,A00101:2,A00302:32,A00301:31,U00001:22,P00001:101,P00002:102,P00007:12,304:10,401:10,405:10,406:10,493:10,411:9,491:9,501:12,502:13,505:15,506:15,601:14,602:14,701:14,702:14,706:14,711:14,Q00312:22,Q00311:22,Q00501:22,P00005:21,P07001:7001},keyMap:{1:{title:"error_code_title1",desc:"error_code_desc1"},2:"error_code_desc2",6:"error_code_desc6",7:"error_code_desc7",9:{title:"error_code_title9",desc:"&nbsp;"},10:{title:"error_code_title10",desc:"&nbsp;"},11:"error_code_desc11",12:{title:"error_code_title12",desc:"error_code_desc12"},13:{title:"error_code_title13",desc:"error_code_desc12"},14:{title:"error_code_title14",desc:"&nbsp;"},15:{title:"本视频仅限爱奇艺站点播放，请至爱奇艺网站观看",desc:"&nbsp;"},21:"error_code_desc21",22:{title:"error_code_desc22",desc:"&nbsp;"},31:{title:"error_private_selfsee",desc:"&nbsp;"},32:{title:"error_private_video",desc:"&nbsp;"},101:"error_code_desc_http",102:"error_code_desc_http",3e3:{title:"error_code_title301",desc:"&nbsp;"},3302:{title:"error_code_vda_err",desc:"&nbsp;"},3303:{title:"error_code_audio_err",desc:"&nbsp;"},7001:"error_code_desc_ad"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(136),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(30),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(19),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(25),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(47),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(140),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(43),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__),_kit_dispatcher__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(42),_kit_cookie__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(15),_kit_http__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(28),_kit_md5__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(89),_kit_logger__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(14),_kit_platform__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(7),_kit_uuid__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(26),_res_authkey__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(117),_res_authkey__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_res_authkey__WEBPACK_IMPORTED_MODULE_22__),_i18n__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(91);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(e);if(t){var i=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var logger=new _kit_logger__WEBPACK_IMPORTED_MODULE_19__.a("user"),NoticedLoginInfo,_isNewUser=!_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC006"),_heartBeatTimer=0,_heartBeatTime=0,_isActivation=!1,_tvid="",_bossStatus="",_agentType=1,_qdv=7,_vipTypes="";_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.browser.iPad?23:_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.os.androidTablet?24:1;var preIsVip=!1,_userIpInfo="",requestVipTypesRetryTimes=0;_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()&&(_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getAgentType(!0));var getUserInfo=function getUserInfo(){var userInfo={},p00003=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00003"),qc179=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC179");return null!==p00003&&""!==p00003?userInfo.uid=p00003:null!==qc179&&""!==qc179&&(qc179=window.JSON?window.JSON.parse(qc179):eval("("+qc179+")"),userInfo.uid=qc179.uid),userInfo},onHeartBeatTimer=function(){var e={authcookie:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),agenttype:_agentType,cversion:2,device_id:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getFluid(),paid:_bossStatus,ptid:getPTID(),viptypes:_vipTypes,tv_id:_tvid,tn:Math.random().toString().replace(".","")};_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive.action",params:e,beforeSend:function(e){var t=[];for(var n in e.params)t.push(n+"="+e.params[n]);return e.url+="&sign="+function(e){e&&e.sort();for(var t="",n=0;n<e.length;n++)t+=e[n]+"|";return t+="jfaljluixn39012$#",Object(_kit_md5__WEBPACK_IMPORTED_MODULE_18__.a)(t)}(t),e}})},getPTID=function(){return _kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getPtid(_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale())},addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)},_getVipTypesStack=[],_getVipTypesCallback=function(e){for(var t=0;t<_getVipTypesStack.length;t++)_getVipTypesStack[t](e);_getVipTypesStack=[]},isRequestVipTypes=!1,isKeepalive=!1,__QP0013=null,UserInfo=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(n,e);var t=_createSuper(n);function n(){return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,n),t.call(this)}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(n,[{key:"isLogin",value:function(){return NoticedLoginInfo?NoticedLoginInfo.login:""!==this.getUid()}},{key:"getUid",value:function(){return getUserInfo().uid||""}},{key:"passportCookie",value:function(){return NoticedLoginInfo&&NoticedLoginInfo.P00001?NoticedLoginInfo.P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001")||""}},{key:"isNewUser",value:function(){return _isNewUser}},{key:"setInfo",value:function(e){preIsVip=""!==__QP0013&&"0"!==__QP0013,!0===(NoticedLoginInfo=e).login||"true"===NoticedLoginInfo.login?NoticedLoginInfo.login=!0:NoticedLoginInfo.login=!1,this.clearVipTypes(),this.emit("infoset")}},{key:"tvid",value:function(e){_tvid=e}},{key:"bossStatus",value:function(e){_bossStatus=e}},{key:"openHeartBeat",value:function(){_isActivation||0===_heartBeatTime||(_isActivation=!0,0===_heartBeatTimer&&(onHeartBeatTimer(),_heartBeatTimer=setInterval(onHeartBeatTimer,_heartBeatTime)))}},{key:"stopHeartBeat",value:function(){_isActivation=!1,0!==_heartBeatTimer&&(clearInterval(_heartBeatTimer),_heartBeatTimer=0)}},{key:"closeHeartBeat",value:function(){var e=this,t=+new Date,n=getPTID(),r={authcookie:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),agenttype:_agentType,device_id:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getFluid()||_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getJsuid(),tv_id:_tvid,paid:_bossStatus,viptypes:_vipTypes,ptid:n,version:"4.1.1",qd_v:_qdv,ts:t};_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/off.action",params:r,beforeSend:function(t){var n=[];for(var r in t.params)n.push(r+"="+t.params[r]);try{var i=e.verifySgin(n);t.url+="&qd_sc="+_res_authkey__WEBPACK_IMPORTED_MODULE_22___default.a.cmd5x(i)}catch(a){}return logger.log(t.url),t},isSort:!0})}},{key:"beforeunloadListener",value:function(){var e=this;addEvent(window,"beforeunload",(function(){e.isVip((function(t){t&&e.closeHeartBeat()}))}))}},{key:"keepalive",value:function(){var e=this;if(!isKeepalive){isKeepalive=!0;var t=getPTID();_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()&&(_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getAgentType(!0));var n=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");n&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive_required.action",params:{authcookie:n,agenttype:_agentType,cversion:2,device_id:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC005"),paid:_bossStatus,ptid:t,tv_id:_tvid,qd_v:_qdv,viptypes:_vipTypes},timeout:2e3,memory:!0,beforeSend:function(t){var n=[];for(var r in t.params)n.push(r+"="+t.params[r]);try{var i=e.verifySgin(n);t.url+="&qd_sc="+_res_authkey__WEBPACK_IMPORTED_MODULE_22___default.a.cmd5x(i)}catch(a){}return t},success:function(t){if(t&&"A00000"==t.code&&t.data&&t.data.interval){var n=1e3*parseInt(t.data.interval,10);n>0&&(n<1e4&&(n=1e4),_heartBeatTime=n,clearInterval(_heartBeatTimer),e.openHeartBeat())}},isSort:!0})}}},{key:"isVip",value:function(e){this.getVipTypes((function(t){var n=t.join(",");e("0"!==n&&""!==n)}))}},{key:"getVipTypes",value:function(e){if(this.isLogin()||this.clearVipTypes(),_getVipTypesStack.push(e),!__QP0013){var t=(__QP0013=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QP0013")).match(/[0-9]/g)||[];__QP0013&&t.length!=__QP0013.replace(/,/g,"").length&&(__QP0013="")}__QP0013?(_vipTypes=__QP0013.split(","),_getVipTypesCallback(_vipTypes)):isRequestVipTypes||(isRequestVipTypes=!0,this.requestVipTypes())}},{key:"updateVipTypes",value:function(){isRequestVipTypes||(isRequestVipTypes=!0,this.requestVipTypes())}},{key:"clearVipTypes",value:function(){isRequestVipTypes=!1,requestVipTypesRetryTimes=0,_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013","",{expires:1296e6,path:"/",domain:"iqiyi.com"}),__QP0013=null}},{key:"__isChangeVipState",value:function(e){this.isVip((function(t){logger.log("isChangeVipState! preIsVip:"+preIsVip+",curIsVip: "+t),e(preIsVip!=t)}))}},{key:"requestVipTypes",value:function(){var e=this,t=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");if(!this.isLogin()||!t)return isRequestVipTypes=!1,void _getVipTypesCallback([0]);t&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),platform:getPTID(),version:"5.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.createUUID(),vipTypes:_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()?"5,6,7,8,10,13,14,16,18":"1,3,4,5,7,8,10,13,14,16,18,58"},timeout:2e3,memory:!0,success:function(t){isRequestVipTypes=!1;try{t=JSON.parse(t||{})}catch(o){logger.error("vip_users: parse Error"),e.requestVipTypesFailed()}if("A00000"===t.code){var n=t.data||{},r=[];for(var i in n){var a=n[i];a&&"1"==a.status&&r.push(a.vipType),a=null}r.length||r.push(0),__QP0013=r.join(","),_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013",__QP0013,{expires:1296e6,path:"/",domain:"iqiyi.com"}),logger.log("requset vipTypes success! viptypes is "+__QP0013),_getVipTypesCallback(r)}else e.requestVipTypesFailed()},failure:function(t,n){isRequestVipTypes=!1,e.requestVipTypesFailed()}})}},{key:"requestVipTypesFailed",value:function(){requestVipTypesRetryTimes>0?(__QP0013="1",logger.log("requset vipTypes failed! viptypes is "+__QP0013),_getVipTypesCallback([1])):(this.requestVipTypes(),requestVipTypesRetryTimes++)}},{key:"getUserIPInfo",value:function(e){_userIpInfo?e(_userIpInfo):_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.json({url:"//data.video.iqiyi.com/v.f4v",withCredentials:!1,timeout:2e3,memory:!0,success:function(t){_userIpInfo=t,e(t)},failure:function(t){e(t)}})}},{key:"reqVipTypes",value:function(e){var t=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");t?t&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),platform:getPTID(),version:"5.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.createUUID(),vipTypes:_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()?"5,6,7,8,10,13,14,16,18":"1,3,4,5,7,8,10,13,14,16,18,58"},timeout:2e3,memory:!0,success:function(t){try{t=JSON.parse(t||{})}catch(s){e([1])}if("A00000"===t.code){var n=t.data||{},r=[];for(var i in n){var a=n[i];a&&"1"==a.status&&r.push(parseInt(a.vipType)),a=null}r.length||r.push(0);var o=r.join(",");_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013",o,{expires:1296e6,path:"/",domain:"iqiyi.com"}),e(r)}else e([1]);logger.info("user reqVipTypes: result = ".concat(t))},failure:function(){e([1]),logger.info("user reqVipTypes: failure")}}):e([0])}},{key:"verifySgin",value:function(e){e&&e.sort();for(var t="",n=0;n<e.length;n++)n===e.length-1?t+=e[n]:t+=e[n]+"&";return t}}]),n}(_kit_dispatcher__WEBPACK_IMPORTED_MODULE_15__.a);__webpack_exports__.a=new UserInfo},function(e,t,n){var r=n(23),i=n(90),a=n(53),o=n(176),s=n(177),c=n(107),u=c.get,d=c.enforce,l=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||i(n,"name",t),(c=d(n)).source||(c.source=l.join("string"==typeof t?t:""))),e!==r?(u?!h&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){"use strict";var r=n(22),i=n(128),a=n(96),o=n(44),s=n(86),c=n(181),u=n(150),d=n(139)("splice"),l=Math.max,f=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,d,_,v,g,y=s(this),m=o(y.length),b=i(e,m),k=arguments.length;if(0===k?n=r=0:1===k?(n=0,r=m-b):(n=k-2,r=f(l(a(t),0),m-b)),m+n-r>h)throw TypeError(p);for(d=c(y,r),_=0;_<r;_++)(v=b+_)in y&&u(d,_,y[v]);if(d.length=r,n<r){for(_=b;_<m-r;_++)g=_+n,(v=_+r)in y?y[g]=y[v]:delete y[g];for(_=m;_>m-r+n;_--)delete y[_-1]}else if(n>r)for(_=m-r;_>b;_--)g=_+n-1,(v=_+r-1)in y?y[g]=y[v]:delete y[g];for(_=0;_<n;_++)y[_+b]=arguments[_+2];return y.length=m-r+n,d}})},function(e,t,n){"use strict";var r,i=n(283),a=n(48),o=n(23),s=n(41),c=n(53),u=n(165),d=n(90),l=n(83),f=n(52).f,h=n(189),p=n(173),_=n(33),v=n(166),g=o.Int8Array,y=g&&g.prototype,m=o.Uint8ClampedArray,b=m&&m.prototype,k=g&&h(g),x=y&&h(y),T=Object.prototype,S=T.isPrototypeOf,P=_("toStringTag"),w=v("TYPED_ARRAY_TAG"),I=i&&!!p&&"Opera"!==u(o.opera),A=!1,E={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},q=function(e){if(!s(e))return!1;var t=u(e);return c(E,t)||c(D,t)};for(r in E)o[r]||(I=!1);if((!I||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},I))for(r in E)o[r]&&p(o[r],k);if((!I||!x||x===T)&&(x=k.prototype,I))for(r in E)o[r]&&p(o[r].prototype,x);if(I&&h(b)!==x&&p(b,x),a&&!c(x,P))for(r in A=!0,f(x,P,{get:function(){return s(this)?this[w]:undefined}}),E)o[r]&&d(o[r],w,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:A&&w,aTypedArray:function(e){if(q(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(S.call(k,e))return e}else for(var t in E)if(c(E,r)){var n=o[t];if(n&&(e===n||S.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in E){var i=o[r];i&&c(i.prototype,e)&&delete i.prototype[e]}x[e]&&!n||l(x,e,n?t:I&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(p){if(n)for(r in E)(i=o[r])&&c(i,e)&&delete i[e];if(k[e]&&!n)return;try{return l(k,e,n?t:I&&g[e]||t)}catch(s){}}for(r in E)!(i=o[r])||i[e]&&!n||l(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(E,t)||c(D,t)},isTypedArray:q,TypedArray:k,TypedArrayPrototype:x}},function(e,t,n){var r=n(95);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(23),i=n(223),a=n(31),o=n(90),s=n(33),c=s("iterator"),u=s("toStringTag"),d=a.values;for(var l in i){var f=r[l],h=f&&f.prototype;if(h){if(h[c]!==d)try{o(h,c,d)}catch(_){h[c]=d}if(h[u]||o(h,u,l),i[l])for(var p in a)if(h[p]!==a[p])try{o(h,p,a[p])}catch(_){h[p]=a[p]}}}},function(e,t,n){"use strict";var r={},i={},a={},o=0,s={getItem:function(e){return r[e]},setItem:function(e,t){r[e]=t},removeItem:function(e){delete r[e]}},c=function(){}(),u=function(){};t.a={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return r[e]||(r[e]=c.getItem(e)),r[e]},write:function(e,t){r[e]=t,i[e]=t,u()},remove:function(){}}},function(e,t,n){"use strict";function r(e,t,n,r,i,a){return c(function(e,t){return e<<t|e>>>32-t}(c(c(t,e),c(r,a)),i),n)}function i(e,t,n,i,a,o,s){return r(t&n|~t&i,e,t,a,o,s)}function a(e,t,n,i,a,o,s){return r(t&i|n&~i,e,t,a,o,s)}function o(e,t,n,i,a,o,s){return r(t^n^i,e,t,a,o,s)}function s(e,t,n,i,a,o,s){return r(n^(t|~i),e,t,a,o,s)}function c(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.a=function(){}},function(e,t,n){var r=n(48),i=n(52),a=n(123);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r="tw_t";t.a={locale:"cn_s",isTraditionalChinese:function(){var e=!1,t=this.locale;return t!==r&&"cn_t"!==t||(e=!0),e},isTWLocale:function(){var e=!1,t=this.locale;return t!==r&&"tw_s"!==t||(e=!0),e},local:function(){return this.locale},setLocale:function(e){this.locale=e}}},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(84),n(56),n(45),n(13)),c=[],u=function(){function e(){i()(this,e),this._events={}}return o()(e,[{key:"on",value:function(e,t,n){var r=[];return this._events||(this._events={}),n&&this._events[e]&&(r=this._events[e]),r.push(t),this._events[e]=r,this}},{key:"off",value:function(e,t){if(this._events){var n=this._events[e];if(!t||Array.isArray(n)&&n.length<1)delete this._events[e];else for(var r=n?n.length:0;r--;)n[r]===t&&n.splice(r,1);return this}}},{key:"emit",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=[].slice.call(n,1),o=this._events[i];return o&&o.forEach((function(t){return t.apply(e,a)})),this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];t.apply(n,a),n.off(e,r)})),this}},{key:"clear",value:function(){delete this._events}}]),e}();t.a={getEvent:function(){return c[s.a.tvId]},newEvent:function(){return c[s.a.tvId]=new u,c[s.a.tvId]},clearEvent:function(e){c[e]&&c[e].clear()}}},function(e,t,n){"use strict";var r=n(207).charAt,i=n(107),a=n(247),o="String Iterator",s=i.set,c=i.getterFor(o);a(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:undefined,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r,i,a,o,s=n(22),c=n(135),u=n(23),d=n(105),l=n(249),f=n(83),h=n(190),p=n(134),_=n(185),v=n(41),g=n(102),y=n(157),m=n(177),b=n(218),k=n(196),x=n(142),T=n(208).set,S=n(250),P=n(252),w=n(253),I=n(210),A=n(254),E=n(107),D=n(138),q=n(33),O=n(163),R=n(160),L=q("species"),C="Promise",M=E.get,N=E.set,B=E.getterFor(C),F=l,U=u.TypeError,j=u.document,V=u.process,H=d("fetch"),W=I.f,z=W,Y=!!(j&&j.createEvent&&u.dispatchEvent),G="function"==typeof PromiseRejectionEvent,Q="unhandledrejection",K=D(C,(function(){if(!(m(F)!==String(F))){if(66===R)return!0;if(!O&&!G)return!0}if(c&&!F.prototype["finally"])return!0;if(R>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[L]=t,!(e.then((function(){}))instanceof t)})),$=K||!k((function(e){F.all(e)["catch"]((function(){}))})),Z=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;S((function(){for(var r=e.value,i=1==e.state,a=0;n.length>a;){var o,s,c,u=n[a++],d=i?u.ok:u.fail,l=u.resolve,f=u.reject,h=u.domain;try{d?(i||(2===e.rejection&&ne(e),e.rejection=1),!0===d?o=r:(h&&h.enter(),o=d(r),h&&(h.exit(),c=!0)),o===u.promise?f(U("Promise-chain cycle")):(s=Z(o))?s.call(o,l,f):l(o)):f(r)}catch(p){h&&!c&&h.exit(),f(p)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},J=function(e,t,n){var r,i;Y?((r=j.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!G&&(i=u["on"+e])?i(r):e===Q&&w("Unhandled promise rejection",n)},ee=function(e){T.call(u,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=A((function(){O?V.emit("unhandledRejection",r,n):J(Q,n,r)})),e.rejection=O||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){T.call(u,(function(){var t=e.facade;O?V.emit("rejectionHandled",t):J("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,X(e,!0))},ae=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=Z(t);r?S((function(){var n={done:!1};try{r.call(t,re(ae,n,e),re(ie,n,e))}catch(i){ie(n,i,e)}})):(e.value=t,e.state=1,X(e,!1))}catch(i){ie({done:!1},i,e)}}};K&&(F=function(e){y(this,F,C),g(e),r.call(this);var t=M(this);try{e(re(ae,t),re(ie,t))}catch(n){ie(t,n)}},(r=function(e){N(this,{type:C,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:undefined})}).prototype=h(F.prototype,{then:function(e,t){var n=B(this),r=W(x(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=O?V.domain:undefined,n.parent=!0,n.reactions.push(r),0!=n.state&&X(n,!1),r.promise},"catch":function(e){return this.then(undefined,e)}}),i=function(){var e=new r,t=M(e);this.promise=e,this.resolve=re(ae,t),this.reject=re(ie,t)},I.f=W=function(e){return e===F||e===a?new i(e):z(e)},c||"function"!=typeof l||(o=l.prototype.then,f(l.prototype,"then",(function(e,t){var n=this;return new F((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof H&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return P(F,H.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:K},{Promise:F}),p(F,C,!1,!0),_(C),a=d(C),s({target:C,stat:!0,forced:K},{reject:function(e){var t=W(this);return t.reject.call(undefined,e),t.promise}}),s({target:C,stat:!0,forced:c||K},{resolve:function(e){return P(c&&this===a?F:this,e)}}),s({target:C,stat:!0,forced:$},{all:function(e){var t=this,n=W(t),r=n.resolve,i=n.reject,a=A((function(){var n=g(t.resolve),a=[],o=0,s=1;b(e,(function(e){var c=o++,u=!1;a.push(undefined),s++,n.call(t,e).then((function(e){u||(u=!0,a[c]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=W(t),r=n.reject,i=A((function(){var i=g(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";t.a={LoaderState_ready:"LoaderState_ready",LoaderState_progress:"LoaderState_progress",LoaderState_done:"LoaderState_done",LoaderState_error:"LoaderState_error",LoaderState_error_dispatch:"LoaderState_error_dispatch",LoaderState_error_load:"LoaderState_error_load",LoaderState_dataRangeError:"DataRangeError",LoaderState_lowSpeed:"LoaderState_lowpeed",LoaderState_405:"LoaderState_405"}},function(e,t,n){var r=n(148),i=n(95);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,undefined,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,a),!0;case 6:return d.fn.call(d.context,t,n,r,a,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var f,h=d.length;for(u=0;u<h;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,undefined,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,n);break;case 4:d[u].fn.call(d[u].context,t,n,r);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];d[u].fn.apply(d[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return c(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||c(this,a);else{for(var s=0,u=[],d=o.length;s<d;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:c(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},function(e,t,n){"use strict";n(25),n(47),n(277);var r={1:{3:!0,37:!1,40:!0,42:!0,48:!0,50:!0},2:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},4:{3:!1,5:!1,14:!0,27:!0,28:!1,41:!1,46:!0,51:!0},5:{1:!0}};function i(e){for(var t=[],n=1;n<=64;n++)t.push(r[e][n]?1:0);return parseInt(t.reverse().join(""),2)}t.a={getFT1:function(){return i(1)},getFT2:function(){return i(2)},getFT4:function(){return i(4)},getFT5:function(){return i(5)},getM3U8FT1:function(){var e=[];r[1][37]=!0,r[1][38]=!0,r[1][42]=!1,r[1][50]=!0;for(var t=1;t<=64;t++)e.push(r[1][t]?1:0);return parseInt(e.reverse().join(""),2)},getMP4FT1:function(){var e=[];r[1][42]=!1,r[1][45]=!0,r[1][50]=!0;for(var t=1;t<=64;t++)e.push(r[1][t]?1:0);return parseInt(e.reverse().join(""),2)},hasBit:function(e,t){return r[e][t]},openBit:function(e,t){r[e][t]=!0},closeBit:function(e,t){r[e][t]=!1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(){},function(e,t,n){var r=n(130),i=n(148),a=n(86),o=n(44),s=n(181),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,d=4==e,l=6==e,f=7==e,h=5==e||l;return function(p,_,v,g){for(var y,m,b=a(p),k=i(b),x=r(_,v,3),T=o(k.length),S=0,P=g||s,w=t?P(p,T):n||f?P(p,0):undefined;T>S;S++)if((h||S in k)&&(m=x(y=k[S],S,b),e))if(t)w[S]=m;else if(m)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:c.call(w,y)}else switch(e){case 4:return!1;case 7:c.call(w,y)}return l?-1:u||d?d:w}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(e,t,n){var r=n(216),i=n(23),a=function(e){return"function"==typeof e?e:undefined};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(48),i=n(23),a=n(138),o=n(186),s=n(52).f,c=n(131).f,u=n(201),d=n(170),l=n(200),f=n(83),h=n(24),p=n(107).set,_=n(185),v=n(33)("match"),g=i.RegExp,y=g.prototype,m=/a/g,b=/a/g,k=new g(m)!==m,x=l.UNSUPPORTED_Y;if(r&&a("RegExp",!k||x||h((function(){return b[v]=!1,g(m)!=m||g(b)==b||"/a/i"!=g(m,"i")})))){for(var T=function(e,t){var n,r=this instanceof T,i=u(e),a=t===undefined;if(!r&&i&&e.constructor===T&&a)return e;k?i&&!a&&(e=e.source):e instanceof T&&(a&&(t=d.call(e)),e=e.source),x&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=o(k?new g(e,t):g(e,t),r?this:y,T);return x&&n&&p(s,{sticky:n}),s},S=function(e){e in T||s(T,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},P=c(g),w=0;P.length>w;)S(P[w++]);y.constructor=T,T.prototype=y,f(i,"RegExp",T)}_("RegExp")},function(e,t,n){var r,i,a,o=n(234),s=n(23),c=n(41),u=n(90),d=n(53),l=n(178),f=n(179),h=n(149),p=s.WeakMap;if(o){var _=l.state||(l.state=new p),v=_.get,g=_.has,y=_.set;r=function(e,t){return t.facade=e,y.call(_,e,t),t},i=function(e){return v.call(_,e)||{}},a=function(e){return g.call(_,e)}}else{var m=f("state");h[m]=!0,r=function(e,t){return t.facade=e,u(e,m,t),t},i=function(e){return d(e,m)?e[m]:{}},a=function(e){return d(e,m)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){"use strict";t.a={DisPatchStatus:"disPatch.status",LoadStatus:"cdnTaskLoader.loadStatus",DisLoadStatus:"dispatchLoader.status",CdnNodeMgrStateChange:"cdnNodeMgr.stateChange"}},function(e,t,n){var r=n(48),i=n(199),a=n(123),o=n(98),s=n(124),c=n(53),u=n(204),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=o(e),t=s(t,!0),u)try{return d(e,t)}catch(n){}if(c(e,t))return a(!i.f.call(e,t),e[t])}},,function(e,t,n){var r=n(368),i=n(369),a=n(301),o=n(370);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";function r(e){return{payload:e,offset:0,index:0}}n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s}));function i(e){var t=e.payload,n=e.offset,r=t[e.index];return r>>=7-(7&n),r&=1,o(e,1),r}function a(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=e.payload,a=e.offset,s=(e.index,8*r.length-a);if(t>s)throw new Error("Cannot get "+t+" bit(s) from offset "+a+", "+s+" available");for(var c=0,u=0;u<t;){var d=void 0;t-u>=8&&0==(7&a)?(c|=r[a>>3]<<t-1-u,d=8,o(e,8)):(c|=i(e)<<t-1-u,d=1),u+=d}return n?(32!==t&&c&1<<t-1&&(c|=-1^(1<<t)-1),c):c>>>0}function o(e,t){var n=e.offset+t;if(!(n<=8*e.payload.byteLength))throw Error("".concat("bit operator: "," can't skip ").concat(t));e.offset=n,e.index=e.offset>>3}function s(e){var t=e.offset;return 8*e.payload.byteLength-t}},function(e,t,n){"use strict";n(43),n(17),n(115);var r,i=n(15),a="-1",o={get:function(){},setSDK:function(e){r=e}};t.a=o},function(e,t,n){"use strict";n.d(t,"f",(function(){return N})),n.d(t,"d",(function(){return B})),n.d(t,"c",(function(){return F})),n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return V})),n.d(t,"e",(function(){return H}));n(9);var r,i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=n(5),u=n.n(c),d=n(6),l=n.n(d),f=n(1),h=n.n(f),p=(n(56),n(10),n(19),n(143),n(27),n(637)),_=n(195),v=n(49),g=n(390),y=n(659),m=n(99),b=n(259),k=n(46),x=n.n(k),T=(n(272),n(172),n(94),n(25),n(401),n(284),n(54),n(115),n(116),n(214),n(29)),S=n.n(T),P=n(266),w=n(164),I=function(){function e(t,n,r){a()(this,e),this.netType=t,this.context=n,this.speedSampler=r}var t,n;return s()(e,[{key:"destroy",value:function(){this.abort(),this.url=this.controller=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.controller,t=this.stats;this._resetTimer(),t&&(t.isTimeout?t.aborted=!1:t.aborted=!0),e&&!e.signal.aborted&&e.abort(),t&&t.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_parseRes",value:(n=x()(S.a.mark((function i(e,t){var n;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next="arraybuffer"===r.t0?3:"json"===r.t0?7:11;break;case 3:return r.next=5,t.arrayBuffer();case 5:return n=r.sent,r.abrupt("break",14);case 7:return r.next=9,t.json();case 9:return n=r.sent,r.abrupt("break",14);case 11:return r.next=13,t.text();case 13:n=r.sent;case 14:return r.abrupt("return",n);case 15:case"end":return r.stop()}}),i)}))),function(e,t){return n.apply(this,arguments)})},{key:"_initReqTimeout",value:function(){var e=this.context;this.stats;e.retryParameters.timeout>0&&(clearTimeout(this._requestTimeout),this._requestTimeout=setTimeout(this._onTimeout.bind(this),e.retryParameters.timeout))}},{key:"_doLoad",value:(t=x()(S.a.mark((function o(){var e,t,n,r,i,a,s,c,u,d,l,f,h,p,_,g,y,m,k,T,w;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=function(){return n.retry>=t.retryParameters.maxRetry||a>=400&&a<499},e=this,t=this.context,n=this.stats,r=this.speedSampler,i=this.url,c=0,u=t.callbacks,d=this.controller=new AbortController,n.requestStartMark=performance.now(),e._initReqTimeout(),o.prev=8,f=i,h={method:t.method,headers:t.headers||new Headers,body:t.body||undefined,mode:"cors",credentials:t.allowCrossSiteCredentials?"include":"same-origin",signal:d.signal,cache:"no-store"},o.next=13,P.a.fetch(f,h);case 13:if(s=o.sent,!((a=s.status)>=200&&a<300)){o.next=34;break}if(!u.onProgress){o.next=23;break}return p=s.clone().body.getReader(),(_=s.headers.get("Content-Length"))&&parseInt(_,10),g=function(){var t=x()(S.a.mark((function n(t){var r,i;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){p.read().then((function(t){var n=t.done,r=t.value;e({done:n,value:r})}),(function(t){e({done:!0})}))}));case 2:if(r=n.sent,clearTimeout(e._requestTimeout),!r.done){n.next=8;break}t&&t.close(),n.next=14;break;case 8:return(i=ArrayBuffer.isView(r.value)?r.value.buffer:null)&&(c+=i.byteLength),e._onProgress(i),t&&t.enqueue(i),n.next=14,g();case 14:case"end":return n.stop()}}),n)})));return function(e){return t.apply(this,arguments)}}(),o.next=23,g();case 23:if(!u.onSuccess){o.next=32;break}return o.next=26,e._parseRes(t.responseType,s);case 26:y=o.sent,m=performance.now()-n.requestStartMark,k=null,this.netType===b.a.SEGMENT&&(k=Number((y.byteLength/(m/1e3)).toFixed(3))),T={netCost:m,speed:k,url:i,data:y,status:a},n.aborted||(y&&r.sample(y.byteLength-c),u.onSuccess(T,n,t),this._onComplete(),n.dump=!0);case 32:o.next=48;break;case 34:if(!l()){o.next=47;break}if(!n.isTimeout){o.next=39;break}u.onTimeout&&u.onTimeout(n,t,{status:a,url:i}),o.next=44;break;case 39:if(!u.onError){o.next=44;break}return o.next=42,e._parseRes(t.responseType,s);case 42:w=o.sent,n.aborted||u.onError({status:a,url:i,response:w},t);case 44:this._onComplete(),o.next=48;break;case 47:this._retry();case 48:o.next=54;break;case 50:o.prev=50,o.t0=o["catch"](8),(o.t0 instanceof RangeError||o.t0 instanceof ReferenceError||o.t0 instanceof SyntaxError||o.t0 instanceof TypeError||o.t0 instanceof URIError)&&v.a.error("fetch ".concat(o.t0.constructor.name,": ").concat(o.t0.stack?o.t0.stack:o.t0.message?o.t0.message:o.t0));try{n.aborted||(l()?(n.isTimeout?u.onTimeout&&u.onTimeout(n,t,{status:a,url:i}):u.onError&&u.onError({status:a,response:null,url:i,error:o.t0},t),this._onComplete()):this._retry())}catch(I){v.a.error(I.stack?I.stack:I.message?I.message:I)}case 54:return o.abrupt("return",this);case 55:case"end":return o.stop()}}),o,this,[[8,50]])}))),function(){return t.apply(this,arguments)})},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onTimeout",value:function(){this.context;this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t=this.context,n=this.stats,r=t.callbacks;(Object(w.k)(e)||Object(w.a)(e))&&this.speedSampler.sample(e.byteLength),r.onProgress(e,n),n.dump=!0}},{key:"_onAbort",value:function(){var e=this.context;if(!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,this.speedSampler.reset(),v.a.log("fetch onComplete"),this._resetTimer(),t.onComplete&&t.onComplete()}}}],[{key:"isSupported",value:function(){if("boolean"!=typeof r){var e=!!P.a.fetch,t=!!P.a.AbortController,n=!0;if(P.a.ReadableStream)try{new ReadableStream({})}catch(i){n=!1}else n=!1;r=e&&n&&t}return r}}]),e}(),A=(n(624),n(407));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var D,q=performance&&performance.now?performance.now.bind(performance):Date.now,O=function(e){u()(n,e);var t=E(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0,e.resetTimer_=new A.a((function(){e.tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0})),e}return s()(n,[{key:"averageBps",get:function(){if(null===this.bytesAll||null===this.tInit)return 0;var e=(q()-this.tInit)/1e3;return this.bytesAll/e}},{key:"reset",value:function(){this.resetTimer_.schedule(1)}},{key:"sample",value:function(e){var t=q();if(null===this.tInit)this.tInit=t,this.tLastArrivedSecond=t,this.bytesInSecond=e;else{var n=(t-this.tLastArrivedSecond)/1e3;if(n<1?this.bytesInSecond+=e:(this.bytesInSecond=e,this.tLastArrivedSecond=t),0==n&&(n=1),n>.5){var r=this.bytesInSecond/n||0;this.bandwidth=Math.floor(Math.max(r,this.bandwidth||0))||null,this.emit("estimate",{downloadSpeed:r,bandwidth:Math.floor(Math.max(this.downloadSpeed,this.bandwidth||0))||null})}}}}]),n}(m.EventEmitter),R=(n(132),n(45),n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(31),"moz-chunked-arraybuffer"),L=function(){function e(t,n,r){a()(this,e),this.netType=t,this.context=n,this.speedSampler=r}return s()(e,[{key:"destroy",value:function(){this.abort(),this.url=this.loader=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.stats,t=this.loader;this._resetTimer(),e&&(e.isTimeout?e.aborted=!1:e.aborted=!0),t&&4!==t.readyState?t.abort():this._onAbort(),e&&e.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_doLoad",value:function(){var t=this.url,n=this.context,r=this.stats,i=this.netType,a=n.headers,o=this.loader=new XMLHttpRequest;if(r.requestStartMark=performance.now(),o.open(n.method,t,!0),n.retryParameters.timeout>0&&(this._requestTimeout=setTimeout(this._onTimeout.bind(this),n.retryParameters.timeout)),o.withCredentials=!!n.allowCrossSiteCredentials,o.onload=this._onLoad.bind(this),o.onprogress=this._onProgress.bind(this),a)if(a instanceof Headers)a.forEach?a.forEach((function(e,t){var n=t.toLowerCase();o.setRequestHeader(n,e)})):v.a.warn("Native Headers mismatch forEach");else for(var s in a){var c=s.toLowerCase();o.setRequestHeader(c,n.headers[s])}return o.responseType=n.responseType||"arraybuffer",i===b.a.SEGMENT&&"arraybuffer"===o.responseType&&e.isMozChunkedSupported()&&(o.responseType=R),o.send(n.body),this}},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onLoad",value:function(e){var t=this.context,n=this.stats,r=this.url,i=e.currentTarget,a=i.status,o=t.callbacks;if(n.aborted)this._onAbort();else if(clearTimeout(this._requestTimeout),a>=200&&a<300){var s=i.response,c=performance.now()-n.requestStartMark,u=null;if(i.responseType===R&&(s=t.totalBuffer),o.onSuccess){(Object(w.k)(s)||Object(w.a)(s))&&(u=Number(s.byteLength/(c/1e3)),this.speedSampler.sample(s.byteLength));var d={netCost:c,speed:u,status:a,data:s,url:r};o.onSuccess(d,n,t)}this._onComplete(),n.dump=!0}else n.retry>=t.retryParameters.maxRetry||a>=400&&a<499?(n.isTimeout?o.onTimeout&&o.onTimeout(n,t,{status:a,url:r}):o.onError&&o.onError({status:a,url:r,response:i.response},t),this._onComplete()):this._retry()}},{key:"_onTimeout",value:function(){this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(t){var n,r=this.context,i=this.stats,a=(this.loader,r.callbacks);t.lengthComputable&&(i.loaded?(n=t.loaded-i.loaded,this.speedSampler.sample(n)):n=t.loaded,this.speedSampler.sample(n||0),i.loaded=t.loaded,i.total=t.total);if(a.onProgress&&this.netType===b.a.SEGMENT&&e.isMozChunkedSupported()){var o=t.target?t.target.response:null;if(o){var s=new Uint8Array(o),c=r.totalBuffer?new Uint8Array(r.totalBuffer):new Uint8Array(0),u=new Uint8Array(c.byteLength+s.byteLength);u.set(c,0),u.set(s,c.byteLength),r.totalBuffer=u.buffer}o&&((Object(w.k)(o)||Object(w.a)(o))&&this.speedSampler.sample(o.byteLength),a.onProgress(o,i),i.dump=!0)}}},{key:"_onAbort",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,e.totalBuffer=null,this.speedSampler.reset(),this._resetTimer(),t.onComplete&&t.onComplete()}}}],[{key:"isMozChunkedSupported",value:function(){if("boolean"!=typeof D)if(/firefox/gi.test(navigator.userAgent.toLowerCase())){var e=new XMLHttpRequest;try{e.responseType=R}catch(t){}D=e.responseType===R}else D=!1;return D}}]),e}();function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var M=location.protocol,N=/^http/.test(M)?M:"https:";function B(e,t){return{uris:e,method:"GET",headers:new Headers,body:null,responseType:"arraybuffer",allowCrossSiteCredentials:!1,retryParameters:t,callbacks:{onSuccess:function(e){},onError:function(){},onTimeout:function(e,t,n){},onAbort:function(){},onComplete:function(){}}}}function F(){return I.isSupported()||L.isMozChunkedSupported()}function U(){return{maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0}}function j(e,t,n){n[e]={loader:t}}var V=function(e){u()(n,e);var t=C(n);function n(e){var r;return a()(this,n),(r=t.call(this)).schemes_={},r.krt_=e,r.speedSampler_=new O,I.isSupported()?(j("http",I,r.schemes_),j("https",I,r.schemes_)):(j("http",L,r.schemes_),j("https",L,r.schemes_)),r.speedSampler_.on("estimate",(function(t){e&&Object(_.a)(e.ctx.stats,t)})),r}return s()(n,[{key:"setRuntime",value:function(e){e&&(this.krt_=e)}},{key:"unsetRuntime",value:function(){this.krt_=null}},{key:"request",value:function(e,t){var n=this.krt_,r=this.schemes_,i=this.speedSampler_;t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=Object(_.a)({maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0},t.retryParameters),t.uris=Object(_.a)({},t.uris);var a=new y.a(t.uris[0]),o=a.scheme,s=a.domain;if(o||(o=N.slice(0,-1),a.setScheme(o),t.uris[0]=a.toString()),e===b.a.SEGMENT&&n){if("http"===o&&/^https/gi.test(M))return v.a.warn("HTTP request in HTTPS Page: ".concat(a.toString())),void this.krt_.throwError(new p.a(p.a.severity.CRITICAL,p.a.category.NETWORK,g.a.NET_HTTPS_UNMATCHED_HTTP_SCHEME,a));n.ctx.stats.cdnHost=s,n.ctx.stats.netProtocol=o}var c=r[o],u=c?c.loader:null;if(!u&&n)return v.a.warn("Wrong with scheme ".concat(o,": ").concat(a.toString())),void n.throwError(new p.a(p.a.severity.CRITICAL,p.a.category.NETWORK,g.a.NET_UNSUPPORTED_SCHEME,a));var d=new u(e,t,i);return d.load(t.uris[0]),d}}]),n}(m.EventEmitter),H=new V},function(e,t,n){"use strict";var r=n(48),i=n(23),a=n(138),o=n(83),s=n(53),c=n(101),u=n(186),d=n(124),l=n(24),f=n(125),h=n(131).f,p=n(109).f,_=n(52).f,v=n(151).trim,g="Number",y=i.Number,m=y.prototype,b=c(f(m))==g,k=function(e){var t,n,r,i,a,o,s,c,u=d(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=v(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=(a=u.slice(2)).length,s=0;s<o;s++)if((c=a.charCodeAt(s))<48||c>i)return NaN;return parseInt(a,r)}return+u};if(a(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var x,T=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof T&&(b?l((function(){m.valueOf.call(n)})):c(n)!=g)?u(new y(k(t)),n,T):k(t)},S=r?h(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),P=0;S.length>P;P++)s(y,x=S[P])&&!s(T,x)&&_(T,x,p(y,x));T.prototype=m,m.constructor=T,o(i,g,T)}},function(e,t,n){"use strict";var r=n(22),i=n(96),a=n(255),o=n(256),s=n(24),c=1..toFixed,u=Math.floor,d=function(e,t,n){return 0===t?n:t%2==1?d(e,t-1,n*e):d(e*e,t/2,n)},l=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=u(i/1e7)},f=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=u(r/t),r=r%t*1e7},h=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+o.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}))},{toFixed:function(e){var t,n,r,s,c=a(this),u=i(e),p=[0,0,0,0,0,0],_="",v="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(_="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*d(2,69,1))-69)<0?c*d(2,-t,1):c/d(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(p,0,n),r=u;r>=7;)l(p,1e7,0),r-=7;for(l(p,d(10,r,1),0),r=t-1;r>=23;)f(p,1<<23),r-=23;f(p,1<<r),l(p,1,1),f(p,2),v=h(p)}else l(p,0,n),l(p,1<<-t,0),v=h(p)+o.call("0",u);return v=u>0?_+((s=v.length)<=u?"0."+o.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):_+v}})},function(e,t,n){var r;(r=function(e,t,r){var i=n(300),a=null;r.exports={setEngine:function(e){a=e},cmd5xdash:i.cmd5xdash,cmd5x:function(){var e=a&&a.sbtr;e&&e.authkeyInvoking();var t=i.cmd5x.apply(i,arguments);return e&&e.authkeyInvoked(),t}}}.call(t,n,t,e))===undefined||(e.exports=r)},function(e,t,n){"use strict";n(140),n(17),n(286),n(43),n(47),n(30),n(106),n(19);var r=function(){};t.a={parse:r,query:function(){},query2Json:function(){},filename:function(){}}},function(e,t,n){"use strict";var r=n(24);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(22),i=n(104).filter;r({target:"Array",proto:!0,forced:!n(139)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";var r=n(22),i=n(104).map;r({target:"Array",proto:!0,forced:!n(139)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";t.a="5.2.71"},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(41);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r,i=n(34),a=n(226),o=n(180),s=n(149),c=n(206),u=n(175),d=n(179),l=d("IE_PROTO"),f=function(){},h=function(e){return"<script>"+e+"</"+"script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(i){}var e,t;p=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete p.prototype[o[n]];return p()};s[l]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=i(e),n=new f,f.prototype=null,n[l]=e):n=p(),t===undefined?n:a(n,t)}},function(e,t,n){var r=n(22),i=n(346);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},,function(e,t,n){var r=n(96),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},function(e,t,n){var r=n(22),i=n(245);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,n){var r=n(102);e.exports=function(e,t,n){if(r(e),t===undefined)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(205),i=n(180).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(22),i=n(238);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},,function(e,t,n){var r=n(52).f,i=n(53),a=n(33)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(22),i=n(102),a=n(86),o=n(24),s=n(119),c=[],u=c.sort,d=o((function(){c.sort(undefined)})),l=o((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:d||!l||!f},{sort:function(e){return e===undefined?u.call(a(this)):u.call(a(this),i(e))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(5),c=n.n(s),u=n(6),d=n.n(u),l=n(1),f=n.n(l),h=n(99);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var _=function(e){c()(n,e);var t=p(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"pipe",value:function(e){return this.on("reset",(function(){e.reset()})),this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),e}},{key:"unpipe",value:function(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}},{key:"push",value:function(e){this.emit("data",e)}},{key:"flush",value:function(e){this.emit("done",e)}},{key:"reset",value:function(){this.emit("reset")}}]),n}(h.EventEmitter)},function(e,t,n){var r=n(24),i=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},function(e,t,n){var r=n(24),i=n(33),a=n(160),o=i("species");e.exports=function(e){return a>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){"use strict";var r=n(161),i=n(34),a=n(44),o=n(95),s=n(182),c=n(162);r("match",1,(function(e,t,n){return[function(t){var n=o(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),u=String(this);if(!o.global)return c(o,u);var d=o.unicode;o.lastIndex=0;for(var l,f=[],h=0;null!==(l=c(o,u));){var p=String(l[0]);f[h]=p,""===p&&(o.lastIndex=s(u,a(o.lastIndex),d)),h++}return 0===h?null:f}]}))},function(e,t,n){"use strict";n(25);var r=n(89),i={};t.a={generate:function(e){e=parseInt(e,10);var t=Object(r.a)(e+"IQIYI"+(new Date).getTime());return i[e]=t,t},getEpisodeId:function(e){var t;for(var n in i)if(i[n]===e){t=n;break}return parseInt(t,10)},getEventId:function(e){return i[e]||""}}},function(e,t,n){var r=n(34),i=n(102),a=n(33)("species");e.exports=function(e,t){var n,o=r(e).constructor;return o===undefined||(n=r(o)[a])==undefined?t:i(n)}},function(e,t,n){var r=n(83),i=Date.prototype,a="Invalid Date",o="toString",s=i.toString,c=i.getTime;new Date(NaN)+""!=a&&r(i,o,(function(){var e=c.call(this);return e==e?s.call(this):a}))},function(e,t,n){var r=n(101);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t){e.exports="\t\n\x0B\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r,i,a=n(170),o=n(200),s=RegExp.prototype.exec,c=String.prototype.replace,u=s,d=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=o.UNSUPPORTED_Y||o.BROKEN_CARET,f=/()??/.exec("")[1]!==undefined;(d||f||l)&&(u=function(e){var t,n,r,i,o=this,u=l&&o.sticky,h=a.call(o),p=o.source,_=0,v=e;return u&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),v=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,_++),n=new RegExp("^(?:"+p+")",h)),f&&(n=new RegExp("^"+p+"$(?!\\s)",h)),d&&(t=o.lastIndex),r=s.call(u?n:o,v),u?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:d&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),f&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(r[i]=undefined)})),r}),e.exports=u},function(e,t,n){n(22)({target:"Array",stat:!0},{isArray:n(144)})},function(e,t,n){var r=n(24),i=n(101),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a.call(e,""):Object(e)}:Object},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(124),i=n(52),a=n(123);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,a(0,n)):e[o]=n}},function(e,t,n){var r=n(95),i="["+n(145)+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports={}},,,function(e,t,n){var r=n(22),i=n(86),a=n(168);r({target:"Object",stat:!0,forced:n(24)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"f",(function(){return p}));n(10),n(19),n(143),n(376);var r=Object.prototype,i=r.toString,a=Function.prototype.toString,o=a.call(Object),s=9007199254740991,c="[object Object]",u=r.hasOwnProperty,d=function(e,t){return u.call(e,t)};function l(e,t){if(e)for(var n in e)if(d(e,n)&&t(e[n],n,e))break}var f=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);function h(){return{}}function p(){}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},,,function(e,t,n){var r,i,a=n(23),o=n(169),s=a.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){"use strict";n(17);var r=n(83),i=n(24),a=n(33),o=n(146),s=n(90),c=a("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d="$0"==="a".replace(/./,"$0"),l=a("replace"),f=!!/./[l]&&""===/./[l]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var p=a(e),_=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=_&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!_||!v||"replace"===e&&(!u||!d||f)||"split"===e&&!h){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,i){return t.exec===o?_&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),m=y[0],b=y[1];r(String.prototype,e,m),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}l&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(101),i=n(146);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){var r=n(101),i=n(23);e.exports="process"==r(i.process)},function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"k",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return _})),n.d(t,"f",(function(){return v})),n.d(t,"l",(function(){return g}));var r=n(37),i=n.n(r),a=(n(147),n(156)),o=function(e){return/^https/gi.test(e||window.location.protocol)};var s=function(e){return!!e&&"object"==i()(e)},c=function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a.a}(e.length)&&!h(e)},u=function(e){for(var t in e)if(Object(a.e)(e,t))return!1;return!0},d=(Array.isArray,function(e){return s(e)&&"[object arraybuffer]"===a.i.call(e).toLowerCase()}),l=function(e){return s(e)&&"[object uint8array]"===a.i.call(e).toLowerCase()},f=function(e){return"number"==typeof e&&!isNaN(e)},h=function(e){return"function"==typeof e},p=function(e){return"string"==typeof e},_=function(e){return null!==e&&"object"===i()(e)},v=function(e){return"[object map]"===a.i.call(e).toLowerCase()},g="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts},function(e,t,n){var r=n(183),i=n(101),a=n(33)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),a))?n:o?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(105),o=n(135),s=n(48),c=n(192),u=n(227),d=n(24),l=n(53),f=n(144),h=n(41),p=n(34),_=n(86),v=n(98),g=n(124),y=n(123),m=n(125),b=n(168),k=n(131),x=n(367),T=n(217),S=n(109),P=n(52),w=n(199),I=n(90),A=n(83),E=n(191),D=n(179),q=n(149),O=n(166),R=n(33),L=n(296),C=n(297),M=n(134),N=n(107),B=n(104).forEach,F=D("hidden"),U="Symbol",j=R("toPrimitive"),V=N.set,H=N.getterFor(U),W=Object.prototype,z=i.Symbol,Y=a("JSON","stringify"),G=S.f,Q=P.f,K=x.f,$=w.f,Z=E("symbols"),X=E("op-symbols"),J=E("string-to-symbol-registry"),ee=E("symbol-to-string-registry"),te=E("wks"),ne=i.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,ie=s&&d((function(){return 7!=m(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=G(W,t);r&&delete W[t],Q(e,t,n),r&&e!==W&&Q(W,t,r)}:Q,ae=function(e,t){var n=Z[e]=m(z.prototype);return V(n,{type:U,tag:e,description:t}),s||(n.description=t),n},oe=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},se=function(e,t,n){e===W&&se(X,t,n),p(e);var r=g(t,!0);return p(n),l(Z,r)?(n.enumerable?(l(e,F)&&e[F][r]&&(e[F][r]=!1),n=m(n,{enumerable:y(0,!1)})):(l(e,F)||Q(e,F,y(1,{})),e[F][r]=!0),ie(e,r,n)):Q(e,r,n)},ce=function(e,t){p(e);var n=v(t),r=b(n).concat(fe(n));return B(r,(function(t){s&&!ue.call(n,t)||se(e,t,n[t])})),e},ue=function(e){var t=g(e,!0),n=$.call(this,t);return!(this===W&&l(Z,t)&&!l(X,t))&&(!(n||!l(this,t)||!l(Z,t)||l(this,F)&&this[F][t])||n)},de=function(e,t){var n=v(e),r=g(t,!0);if(n!==W||!l(Z,r)||l(X,r)){var i=G(n,r);return!i||!l(Z,r)||l(n,F)&&n[F][r]||(i.enumerable=!0),i}},le=function(e){var t=K(v(e)),n=[];return B(t,(function(e){l(Z,e)||l(q,e)||n.push(e)})),n},fe=function(e){var t=e===W,n=K(t?X:v(e)),r=[];return B(n,(function(e){!l(Z,e)||t&&!l(W,e)||r.push(Z[e])})),r};(c||(A((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==undefined?String(arguments[0]):undefined,t=O(e),n=function(e){this===W&&n.call(X,e),l(this,F)&&l(this[F],t)&&(this[F][t]=!1),ie(this,t,y(1,e))};return s&&re&&ie(W,t,{configurable:!0,set:n}),ae(t,e)}).prototype,"toString",(function(){return H(this).tag})),A(z,"withoutSetter",(function(e){return ae(O(e),e)})),w.f=ue,P.f=se,S.f=de,k.f=x.f=le,T.f=fe,L.f=function(e){return ae(R(e),e)},s&&(Q(z.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),o||A(W,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:z}),B(b(te),(function(e){C(e)})),r({target:U,stat:!0,forced:!c},{"for":function(e){var t=String(e);if(l(J,t))return J[t];var n=z(t);return J[t]=n,ee[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(l(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return t===undefined?m(e):ce(m(e),t)},defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:le,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:d((function(){T.f(1)}))},{getOwnPropertySymbols:function(e){return T.f(_(e))}}),Y)&&r({target:"JSON",stat:!0,forced:!c||d((function(){var e=z();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);if(r=t,(h(t)||e!==undefined)&&!oe(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!oe(t))return t}),i[1]=t,Y.apply(null,i)}});z.prototype[j]||I(z.prototype,j,z.prototype.valueOf),M(z,U),q[F]=!0},function(e,t,n){var r=n(205),i=n(180);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(105);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r=n(34);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r={100:{nbid:100,value:"极速",qipu:"jisu",obid:96},200:{nbid:200,value:"流畅",qipu:"300",obid:1},300:{nbid:300,value:"高清",qipu:"600",obid:2},400:{nbid:400,value:"超清",qipu:"1000",obid:3},500:{nbid:500,value:"720P",qipu:"720P",obid:4},600:{nbid:600,value:"1080P",qipu:"1080P",obid:5},601:{nbid:601,value:"爱奇艺HDR",qipu:"HDR",obid:51},610:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},700:{nbid:700,value:"2K",qipu:"2K",obid:6},800:{nbid:800,value:"4K",qipu:"4K",obid:10},96:{nbid:100,value:"极速",qipu:"jisu",obid:96},1:{nbid:200,value:"流畅",qipu:"300",obid:1},2:{nbid:300,value:"高清",qipu:"600",obid:2},3:{nbid:400,value:"超清",qipu:"1000",obid:3},4:{nbid:500,value:"720P",qipu:"720P",obid:4},5:{nbid:600,value:"1080P",qipu:"1080P",obid:5},51:{nbid:601,value:"爱奇艺HDR",qipu:"HDR",obid:51},27:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},6:{nbid:700,value:"2K",qipu:"2K",obid:6},10:{nbid:800,value:"4K",qipu:"4K",obid:10}},i={getNewVd:function(e){return r[e]?r[e].nbid:""},getOldVd:function(e){return r[e]?r[e].obid:""}};t.a=i},function(e,t,n){n(22)({target:"Function",proto:!0},{bind:n(235)})},function(e,t,n){var r=n(34),i=n(237);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(a){}return function(n,a){return r(n),i(a),t?e.call(n,a):n.__proto__=a,n}}():undefined)},function(e,t,n){var r=n(98),i=n(44),a=n(128),o=function(e){return function(t,n,o){var s,c=r(t),u=i(c.length),d=a(o,u);if(e&&n!=n){for(;u>d;)if((s=c[d++])!=s)return!0}else for(;u>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t,n){var r=n(23),i=n(41),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,n){var r=n(23),i=n(90);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(178),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(23),i=n(176),a="__core-js_shared__",o=r[a]||i(a,{});e.exports=o},function(e,t,n){var r=n(191),i=n(166),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(41),i=n(144),a=n(33)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[a])&&(n=undefined):n=undefined),new(n===undefined?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r=n(207).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r={};r[n(33)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){"use strict";var r=n(22),i=n(151).trim;r({target:"String",proto:!0,forced:n(257)("trim")},{trim:function(){return i(this)}})},function(e,t,n){"use strict";var r=n(105),i=n(52),a=n(33),o=n(48),s=a("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(41),i=n(173);e.exports=function(e,t,n){var a,o;return i&&"function"==typeof(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&i(e,o),e}},function(e,t,n){var r=n(165),i=n(152),a=n(33)("iterator");e.exports=function(e){if(e!=undefined)return e[a]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(22),i=n(303);r({target:"Array",stat:!0,forced:!n(196)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){var r=n(53),i=n(86),a=n(179),o=n(276),s=a("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(83);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(135),i=n(178);(e.exports=function(e,t){return i[e]||(i[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.9.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(24);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n(56),n(25);var r=n(28),i={};t.a={get:function(e,t){var n=e.tvid,a=e.locale,o=n;if(i[o]=i[o]||[],i[o].push(t),n&&t){var s="//pcw-api.iqiyi.com/video/video/playervideoinfo?tvid="+n;s=a?s+"&locale="+a:s,r.a.jsonp({url:s,memory:!0,success:function(e){"A00000"===e.code&&e.data||t({});var n=(e=e.data).tvid,r=e.videoQipuId,a=[];i[n]?(a=(i[n]||[]).slice(0),delete i[n]):i[r]&&(a=(i[r]||[]).slice(0),delete i[r]);for(var o=0;o<a.length;o++)a[o]&&function(e,t){setTimeout((function(){e({tvid:t.videoQipuId,vid:t.vid,albumId:t.albumId,cid:t.cid,vi:t,sid:t.sid,cType:t.cType})}),0)}(a[o],e);a=null},failure:function(e){t(e||{})}})}},isUGC:function(e){return!!((e+="")&&e.length>2&&"9"==e.charAt(e.length-1)&&"0"==e.charAt(e.length-2)&&(e=parseInt(e,10))>0&&e>9e7)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(156);function i(e,t){var n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],a=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return t&&Object(r.b)(t,(function(t,o){!n&&Object(r.e)(e,o)||(a&&"string"!=typeof t&&"boolean"!=typeof t?(e[o]||(e[o]={}),i(e[o],t,n,a)):e[o]=t)})),e}},function(e,t,n){var r=n(33)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},"return":function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(s){}return n}},function(e,t,n){"use strict";var r=n(22),i=n(48),a=n(23),o=n(53),s=n(41),c=n(52).f,u=n(225),d=a.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||d().description!==undefined)){var l={},f=function(){var e=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]),t=this instanceof f?new d(e):e===undefined?d():d(e);return""===e&&(l[t]=!0),t};u(f,d);var h=f.prototype=d.prototype;h.constructor=f;var p=h.toString,_="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(l,e))return"";var n=_?t.slice(7,-1):t.replace(v,"$1");return""===n?undefined:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(297)("iterator")},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){"use strict";var r=n(24);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var r=n(41),i=n(101),a=n(33)("match");e.exports=function(e){var t;return r(e)&&((t=e[a])!==undefined?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(22),i=n(24),a=n(98),o=n(109).f,s=n(48),c=i((function(){o(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},function(e,t,n){var r=n(33),i=n(125),a=n(52),o=r("unscopables"),s=Array.prototype;s[o]==undefined&&a.f(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,n){var r=n(48),i=n(24),a=n(175);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(53),i=n(98),a=n(174).indexOf,o=n(149);e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)!r(o,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(u,n)||u.push(n));return u}},function(e,t,n){var r=n(105);e.exports=r("document","documentElement")},function(e,t,n){var r=n(96),i=n(95),a=function(e){return function(t,n){var a,o,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":undefined:(a=s.charCodeAt(c))<55296||a>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):a:e?s.slice(c,c+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){var r,i,a,o=n(23),s=n(24),c=n(130),u=n(206),d=n(175),l=n(209),f=n(163),h=o.location,p=o.setImmediate,_=o.clearImmediate,v=o.process,g=o.MessageChannel,y=o.Dispatch,m=0,b={},k="onreadystatechange",x=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},T=function(e){return function(){x(e)}},S=function(e){x(e.data)},P=function(e){o.postMessage(e+"",h.protocol+"//"+h.host)};p&&_||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++m]=function(){("function"==typeof e?e:Function(e)).apply(undefined,t)},r(m),m},_=function(e){delete b[e]},f?r=function(e){v.nextTick(T(e))}:y&&y.now?r=function(e){y.now(T(e))}:g&&!l?(a=(i=new g).port2,i.port1.onmessage=S,r=c(a.postMessage,a,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&h&&"file:"!==h.protocol&&!s(P)?(r=P,o.addEventListener("message",S,!1)):r=k in d("script")?function(e){u.appendChild(d("script")).onreadystatechange=function(){u.removeChild(this),x(e)}}:function(e){setTimeout(T(e),0)}),e.exports={set:p,clear:_}},function(e,t,n){var r=n(169);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){"use strict";var r=n(102),i=function(e){var t,n;this.promise=new e((function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(22),i=n(174).includes,a=n(203);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}}),a("includes")},function(e,t,n){"use strict";var r=n(22),i=n(378),a=n(95);r({target:"String",proto:!0,forced:!n(379)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(i(e),arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){var r=n(262),i=n(193);function a(e,t,n,o){return(a="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,a){var o,s=r(e,t);if(s){if((o=Object.getOwnPropertyDescriptor(s,t)).set)return o.set.call(a,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(a,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(a,t,o)}else i(a,t,n);return!0})(e,t,n,o)}e.exports=function(e,t,n,r,i){if(!a(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(48),i=n(52).f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in a)&&i(a,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){var r=n(33),i=n(152),a=r("iterator"),o=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||o[a]===e)}},function(e,t,n){var r=n(23);e.exports=r},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(34),i=n(215),a=n(44),o=n(130),s=n(187),c=n(228),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var d,l,f,h,p,_,v,g=n&&n.that,y=!(!n||!n.AS_ENTRIES),m=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),k=o(t,g,1+y+b),x=function(e){return d&&c(d),new u(!0,e)},T=function(e){return y?(r(e),b?k(e[0],e[1],x):k(e[0],e[1])):b?k(e,x):k(e)};if(m)d=e;else{if("function"!=typeof(l=s(e)))throw TypeError("Target is not iterable");if(i(l)){for(f=0,h=a(e.length);h>f;f++)if((p=T(e[f]))&&p instanceof u)return p;return new u(!1)}d=l.call(e)}for(_=d.next;!(v=_.call(d)).done;){try{p=T(v.value)}catch(S){throw c(d),S}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DEPOSIT_ERROR="DEPOSIT_ERROR",e.UPDATE_TIME_RANGES="UPDATE_TIME_RANGES",e.DEPOSIT_RAWNESS="DEPOSIT_RAWNESS",e.DEPOSIT_MANIFEST="DEPOSIT_MANIFEST",e.DEPOSIT_LOADER="DEPOSIT_LOADER",e.DEPOSIT_MUX="DEPOSIT_MUX",e.DEPOSIT_RENDERER="DEPOSIT_RENDERER",e.DEPOSIT_AUDIO="DEPOSIT_AUDIO"}(r||(r={}))},,,function(e,t,n){var r=n(105),i=n(131),a=n(217),o=n(34);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(53),i=n(222),a=n(109),o=n(52);e.exports=function(e,t){for(var n=i(t),s=o.f,c=a.f,u=0;u<n.length;u++){var d=n[u];r(e,d)||s(e,d,c(t,d))}}},function(e,t,n){var r=n(48),i=n(52),a=n(34),o=n(168);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(192);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(34);e.exports=function(e){var t=e["return"];if(t!==undefined)return r(t.call(e)).value}},function(e,t,n){var r=n(22),i=n(48);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(52).f})},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-poster{position:absolute;width:100%;height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}",""])},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return D}));n(9);var r=n(2),i=n.n(r),a=n(5),o=n.n(a),s=n(6),c=n.n(s),u=n(1),d=n.n(u),l=n(3),f=n.n(l),h=(n(27),n(49)),p=n(651),_=n(99),v=n(348),g=n(340),y=n(652),m=n(112);n(126);var b=n(653);var k=new b.a;function x(e,t,n,r){var i,a,o=e.payload;if(t&&Object(m.a)(e))for(t===n&&(a=y.a.readUEV(o,e.offset),Object(m.e)(e,a.bitLength)),Object(m.e)(e,1),a=y.a.readUEV(o,e.offset),Object(m.e)(e,a.bitLength),r[t]=0,i=0;i<=r[t-1];i++){var s=0,c=Object(m.a)(e);c||(s=Object(m.a)(e)),(c||s)&&r[t]++}else{var u=y.a.readUEV(o,e.offset);Object(m.e)(e,u.bitLength);var d=y.a.readUEV(o,e.offset);for(Object(m.e)(e,d.bitLength),i=0;i<u.value;i++)Object(m.e)(e,y.a.readUEV(o,e.offset).bitLength),Object(m.e)(e,1);for(i=0;i<d.value;i++)Object(m.e)(e,y.a.readUEV(o,e.offset).bitLength),Object(m.e)(e,1)}}function T(e,t,n){var r,i;for(r=0;r<=t;r++)i=y.a.readUEV(e.payload,e.offset),Object(m.e)(e,i.bitLength),i=y.a.readUEV(e.payload,e.offset),Object(m.e)(e,i.bitLength),n&&(i=y.a.readUEV(e.payload,e.offset),Object(m.e)(e,i.bitLength),i=y.a.readUEV(e.payload,e.offset),Object(m.e)(e,i.bitLength)),Object(m.e)(e,1)}function S(e){var t,n,r,i=Object(m.d)(e),a=i.payload,o=[1,1],s=1,c=0,u=new Array(64),d=(14&a[0])>>1;Object(m.e)(i,8);var l=function(e,t){var n,r=e.payload.subarray(e.index),i=r[0]>>6,a=r[0]>>5&1,o=31&r[0],s=r.subarray(1,5),c=r.subarray(5,11),u=r[11];Object(m.e)(e,96);var d=[],l=[];for(n=0;n<t;n++)d[n]=Object(m.a)(e),l[n]=Object(m.a)(e);if(t>0)for(n=t;n<8;n++)Object(m.e)(e,2);for(n=0;n<t;n++)d[n]&&Object(m.e)(e,88),l[n]&&Object(m.e)(e,8);return{profile_space:i,tier_flag:a,profile_idc:o,profile_compatibility_flags:s,constraint_indicator_flags:c,level_idc:u}}(i,d),f=y.a.readUEV(a,i.offset);Object(m.e)(i,f.bitLength);var h=y.a.readUEV(a,i.offset);r=h.value,Object(m.e)(i,h.bitLength),3==r&&Object(m.e)(i,1);var p=y.a.readUEV(a,i.offset);Object(m.e)(i,p.bitLength);var _=y.a.readUEV(a,i.offset);Object(m.e)(i,_.bitLength),Object(m.a)(i)&&(n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength));var v=y.a.readUEV(a,i.offset);Object(m.e)(i,v.bitLength);var g=y.a.readUEV(a,i.offset);Object(m.e)(i,g.bitLength);var b=y.a.readUEV(a,i.offset);for(Object(m.e)(i,b.bitLength),t=Object(m.a)(i)?0:d;t<=d;t++)n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength);if(n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),Object(m.a)(i)){var S=y.a.readBit(a,i.offset);Object(m.e)(i,1),S&&function(e){var t,n,r,i;for(t=0;t<4;t++)for(n=0;n<(3==t?2:6);n++)if(Object(m.a)(e)){if(i=Math.min(64,1<<4+(t<<1)),t>1){var a=y.a.readSEV(e.payload,e.offset);Object(m.e)(e,a.bitLength)}for(r=0;r<i;r++){var o=y.a.readSEV(e.payload,e.offset);Object(m.e)(e,o.bitLength)}}else{var s=y.a.readUEV(e.payload,e.offset);Object(m.e)(e,s.bitLength)}}(i)}Object(m.e)(i,1),Object(m.e)(i,1),Object(m.a)(i)&&(Object(m.e)(i,4),Object(m.e)(i,4),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),Object(m.e)(i,1));var P=y.a.readUEV(a,i.offset);for(Object(m.e)(i,P.bitLength),t=0;t<P.value;t++)x(i,t,P.value,u);if(Object(m.a)(i)){var w=y.a.readUEV(a,i.offset);for(Object(m.e)(i,w.bitLength),t=0;t<w.value;t++){var I=Math.min(b.value+4,16);Object(m.e)(i,I),Object(m.e)(i,1)}}if(Object(m.e)(i,1),Object(m.e)(i,1),Object(m.a)(i)){if(Object(m.a)(i)){var A=y.a.readByte(a,i.offset);switch(Object(m.e)(i,8),A){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:var E=y.a.readByte(a,i.offset);Object(m.e)(i,8);var D=y.a.readByte(a,i.offset);Object(m.e)(i,8);var q=y.a.readByte(a,i.offset);Object(m.e)(i,8);var O=y.a.readByte(a,i.offset);Object(m.e)(i,8),o=[E<<8|D,q<<8|O]}o&&(s=o[0]/o[1]),255===A&&(Object(m.e)(i,16),Object(m.e)(i,16))}if(Object(m.a)(i)&&Object(m.e)(i,1),Object(m.a)(i)&&(Object(m.e)(i,3),Object(m.e)(i,1),Object(m.a)(i)&&Object(m.e)(i,24)),Object(m.a)(i)){var R=y.a.readUEV(a,i.offset);Object(m.e)(i,R.bitLength);var L=y.a.readUEV(a,i.offset);Object(m.e)(i,L.bitLength)}Object(m.e)(i,3),Object(m.a)(i)&&(n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength)),Object(m.a)(i)&&(y.a.readBit(a,i.offset,32),Object(m.e)(i,32),y.a.readBit(a,i.offset,32),Object(m.e)(i,32),Object(m.a)(i)&&(n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength)),Object(m.a)(i)&&function(e,t,n){var r,i,a=0,o=0,s=0;for(t&&(o=Object(m.a)(e),s=Object(m.a)(e),(o||s)&&((a=Object(m.a)(e))&&Object(m.e)(e,19),Object(m.e)(e,8),a&&Object(m.e)(e,4),Object(m.e)(e,15))),r=0;r<=n;r++){var c=0,u=0,d=0;Object(m.a)(e)||(d=Object(m.a)(e)),d?(i=y.a.readUEV(e.payload,e.offset),Object(m.e)(e,i.bitLength)):u=Object(m.a)(e),u||(i=y.a.readUEV(e.payload,e.offset),Object(m.e)(e,i.bitLength),c=i.value),o&&T(e,c,a),s&&T(e,c,a)}}(i,1,d)),Object(m.a)(i)&&(Object(m.e)(i,3),n=y.a.readUEV(a,i.offset),Object(m.e)(i,n.bitLength),c=Math.min(n.value,4095))}var C=k.readUint32(l.profile_compatibility_flags);return Object.assign(Object.assign({payload:i.payload},l),{profile_compatibility:C,chromaFormat:r,bitDepthLumaMinus8:v.value,bitDepthChromaMinus8:g.value,minSpatialSegmentationIdc:c,width:p.value*s,height:_.value*s,pixelRatio:o,fps:0,fixedFPS:!0})}var P=function q(e){switch(i()(this,q),this.unit_type=e[0]>>1&63,this.data=Object(g.a)(e.subarray(2)),this.rawData=e,this.unit_type){case 32:this.vps=function(e){var t=Object(m.d)(e);Object(m.e)(t,12);var n=(14&e[1])>>1,r=1&e[1];return Object(m.e)(t,4),Object(m.e)(t,16),{payload:e,numTemporalLayers:n,temporalIdNested:r}}(this.data);break;case 33:this.sps=S(this.data);break;case 34:this.pps=(t=this.data,r=Object(m.d)(t),a=t,n=y.a.readUEV(a,r.offset),Object(m.e)(r,n.bitLength),n=y.a.readUEV(a,r.offset),Object(m.e)(r,n.bitLength),Object(m.e)(r,7),n=y.a.readUEV(a,r.offset),Object(m.e)(r,n.bitLength),n=y.a.readUEV(a,r.offset),Object(m.e)(r,n.bitLength),n=y.a.readSEV(a,r.offset),Object(m.e)(r,n.bitLength),Object(m.e)(r,2),Object(m.a)(r)&&(n=y.a.readUEV(a,r.offset),Object(m.e)(r,n.bitLength)),n=y.a.readSEV(a,r.offset),Object(m.e)(r,n.bitLength),n=y.a.readSEV(a,r.offset),Object(m.e)(r,n.bitLength),Object(m.e)(r,4),{payload:t,tiles_enabled_flag:Object(m.a)(r),entropy_coding_sync_enabled_flag:Object(m.a)(r)})}var t,n,r,a};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var I=function(e){o()(n,e);var t=w(n);function n(e){var r;return i()(this,n),(r=t.call(this)).lastState=null,r.lastNALu=null,r.lastNALuState=null,r.codecType=e,r}return f()(n,[{key:"spitNalu_",value:function(e,t,n){var r;switch(this.codecType){case 0:r=new v.a(e);break;case 1:r=new P(e)}r.pts=t,r.dts=n,this.lastNALu=r,this.emit("nalu",r)}},{key:"push",value:function(e){var t=this.lastState,n=this.lastNALuState,r=0,i=-1,a=e.pts,o=e.dts,s=e.payload,c=e.naluSizeLength;if(c){var u=0,d=0,l=0,f=s.length;do{d=0;for(var _=0;_<c;_++)d|=s[u+_]<<8*(c-_-1);(l=(u+=c)+d)>f&&(l=f),this.spitNalu_(s.subarray(u,l),a,o),u=l}while(u<f)}else{var v=s.byteLength-1,g=0;do{if(0!==s[v])break;g++,v--}while(v>0);g>=3&&(s=s.subarray(0,v+1));var y=s.length,m=0;do{var b=s[r++];if(0!==m)if(1!==m)if(b)if(1===b){if(i>=0)this.lastNALuState=m,this.spitNalu_(s.subarray(i,r-1-m),a,o);else{var k=this.lastNALu;if(k){t&&r<=4-t&&n&&(k.rawData=k.rawData.subarray(0,k.rawData.byteLength-t));var x=r-m-1;if(x>0){h.a.log("overflow NALU found: ".concat(x,"/").concat(a,"/").concat(o));var T=new p.a;T.append(k.rawData),T.append(s.subarray(0,x));var S=T.toNewBytes();T.clear(),k.rawData=S}}}r<y&&(i=r,m=0)}else m=0;else m=3;else m=b?0:2;else m=b?0:1}while(r<y);i>=0&&m>=0&&(this.lastNALuState=m,this.spitNalu_(s.subarray(i,y),a,o)),this.lastState=m}this.emit("done")}},{key:"reset",value:function(){this.lastState=null,this.lastNALu=null,this.lastNALuState=null}}]),n}(_.EventEmitter);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var E=function(e){o()(n,e);var t=A(n);function n(){return i()(this,n),t.call(this,0)}return n}(I),D=function(e){o()(n,e);var t=A(n);function n(){return i()(this,n),t.call(this,1)}return n}(I)},,,function(e,t,n){var r=n(23),i=n(177),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(i(a))},function(e,t,n){"use strict";var r=n(102),i=n(41),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(41);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(104).forEach,i=n(119)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:undefined)}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(q){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=l;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===_)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(q){return{type:"throw",arg:q}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",_={};function v(){}function g(){}function y(){}var m={};m[a]=function(){return this};var b=Object.getPrototypeOf,k=b&&b(b(E([])));k&&k!==n&&r.call(k,a)&&(m=k);var x=y.prototype=v.prototype=Object.create(m);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function E(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},T(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(x),c(x,s,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},,function(e,t,n){"use strict";t.a={Access_Control_Allow_Origin_Error:/(.*Access)(?=.*Control)(?=.*Allow)(?=.*Origin)/gi,SSL_Error:/SSL/g,DNS_Error:/指定主机名的服务器/g,Network_Error:/Loadfailed|网络连接已中断|Loadingfailed|offline|断开与互联网的连接|網絡連線中斷/gi,HTTP_4XX:/statusErr_4/,HTTP_5XX:/statusErr_5/,OOM:/tryCatchError_oom/,Unknown:"unknown",getErrorType:function(e){return"string"!=typeof e?"unknown":"ttfbTimeout"===e?"ttfbTimeout":"recvTimeout"===e?"recvTimeout":"timeout"===e?"timeout":"slowSpeed"===e?"slowSpeed":this.Access_Control_Allow_Origin_Error.test(e)?"Access_Control_Allow_Origin_Error":this.SSL_Error.test(e)?"SSL_Error":this.DNS_Error.test(e)?"DNS_Error":this.Network_Error.test(e)?"Network_Error":this.HTTP_4XX.test(e)?"HTTP_4XX":this.HTTP_5XX.test(e)?"HTTP_5XX":this.OOM.test(e)?"OOM":"unknown"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n.n(r),a=function o(){i()(this,o)};a.ERROR="Error",a.PRE_ERROR="PreError",a.TIMELINE_SWITCHING="DataStageSwitching",a.TIMELINE_SWITCHED="DataStageSwitched",a.STATE_CHANGE="StateChange"},function(e,t,n){var r=n(23),i=n(151).trim,a=n(145),o=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==o(a+"08")||22!==o(a+"0x16");e.exports=c?function(e,t){var n=i(String(e));return o(n,t>>>0||(s.test(n)?16:10))}:o},function(e,t,n){var r=n(86),i=Math.floor,a="".replace,o=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,c,u,d){var l=n+e.length,f=c.length,h=s;return u!==undefined&&(u=r(u),h=o),a.call(d,h,(function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":o=u[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>f){var d=i(s/10);return 0===d?r:d<=f?c[d-1]===undefined?a.charAt(1):c[d-1]+a.charAt(1):r}o=c[s-1]}return o===undefined?"":o}))}},function(e,t,n){var r=n(23),i=n(151).trim,a=n(145),o=r.parseFloat,s=1/o(a+"-0")!=-Infinity;e.exports=s?function(e){var t=i(String(e)),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){"use strict";var r=n(345),i=n(395);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}}),i)},function(e,t,n){"use strict";var r=n(22),i=n(275),a=n(189),o=n(173),s=n(134),c=n(90),u=n(83),d=n(33),l=n(135),f=n(152),h=n(263),p=h.IteratorPrototype,_=h.BUGGY_SAFARI_ITERATORS,v=d("iterator"),g="keys",y="values",m="entries",b=function(){return this};e.exports=function(e,t,n,d,h,k,x){i(n,t,d);var T,S,P,w=function(e){if(e===h&&q)return q;if(!_&&e in E)return E[e];switch(e){case g:case y:case m:return function(){return new n(this,e)}}return function(){return new n(this)}},I=t+" Iterator",A=!1,E=e.prototype,D=E[v]||E["@@iterator"]||h&&E[h],q=!_&&D||w(h),O="Array"==t&&E.entries||D;if(O&&(T=a(O.call(new e)),p!==Object.prototype&&T.next&&(l||a(T)===p||(o?o(T,p):"function"!=typeof T[v]&&c(T,v,b)),s(T,I,!0,!0),l&&(f[I]=b))),h==y&&D&&D.name!==y&&(A=!0,q=function(){return D.call(this)}),l&&!x||E[v]===q||c(E,v,q),f[t]=q,h)if(S={values:w(y),keys:k?q:w(g),entries:w(m)},x)for(P in S)(_||A||!(P in E))&&u(E,P,S[P]);else r({target:t,proto:!0,forced:_||A},S);return S}},function(e,t,n){"use strict";var r=n(183),i=n(165);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(23);e.exports=r.Promise},function(e,t,n){var r,i,a,o,s,c,u,d,l=n(23),f=n(109).f,h=n(208).set,p=n(209),_=n(251),v=n(163),g=l.MutationObserver||l.WebKitMutationObserver,y=l.document,m=l.process,b=l.Promise,k=f(l,"queueMicrotask"),x=k&&k.value;x||(r=function(){var e,t;for(v&&(e=m.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():a=undefined,n}}a=undefined,e&&e.enter()},p||v||_||!g||!y?b&&b.resolve?(u=b.resolve(undefined),d=u.then,o=function(){d.call(u,r)}):o=v?function(){m.nextTick(r)}:function(){h.call(l,r)}:(s=!0,c=y.createTextNode(""),new g(r).observe(c,{characterData:!0}),o=function(){c.data=s=!s})),e.exports=x||function(e){var t={fn:e,next:undefined};a&&(a.next=t),i||(i=t,o()),a=t}},function(e,t,n){var r=n(169);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(34),i=n(41),a=n(210);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(23);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,n){var r=n(101);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){"use strict";var r=n(96),i=n(95);e.exports="".repeat||function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==Infinity)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){var r=n(24),i=n(145);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(25);function r(e){var t=parseInt(e,10);return t<9e7&&(t=100*(t+9e5)),t}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.MANIFEST=0]="MANIFEST",e[e.DISPATCH=1]="DISPATCH",e[e.SEGMENT=2]="SEGMENT",e[e.LICENSE=3]="LICENSE",e[e.APP=4]="APP"}(r||(r={}))},function(e,t,n){"use strict";var r=n(86),i=n(128),a=n(44);e.exports=function(e){for(var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:undefined,n),c=o>2?arguments[2]:undefined,u=c===undefined?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";n(93);var r,i=n(22),a=n(48),o=n(305),s=n(23),c=n(226),u=n(83),d=n(157),l=n(53),f=n(346),h=n(303),p=n(207).codeAt,_=n(380),v=n(134),g=n(381),y=n(107),m=s.URL,b=g.URLSearchParams,k=g.getState,x=y.set,T=y.getterFor("URL"),S=Math.floor,P=Math.pow,w="Invalid scheme",I="Invalid host",A="Invalid port",E=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,q=/\d/,O=/^(0x|0X)/,R=/^[0-7]+$/,L=/^\d+$/,C=/^[\dA-Fa-f]+$/,M=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,N=/[\u0000\t\u000A\u000D #/:?@[\\]]/,B=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\t\u000A\u000D]/g,U=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return I;if(!(n=V(t.slice(1,-1))))return I;e.host=n}else if($(e)){if(t=_(t),M.test(t))return I;if(null===(n=j(t)))return I;e.host=n}else{if(N.test(t))return I;for(n="",r=h(t),i=0;i<r.length;i++)n+=Q(r[i],W);e.host=n}},j=function(e){var t,n,r,i,a,o,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=O.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?L:8==a?R:C).test(i))return e;o=parseInt(i,a)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=P(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*P(256,3-r);return s},V=function(e){var t,n,r,i,a,o,s,c=[0,0,0,0,0,0,0,0],u=0,d=null,l=0,f=function(){return e.charAt(l)};if(":"==f()){if(":"!=e.charAt(1))return;l+=2,d=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&C.test(f());)t=16*t+parseInt(f(),16),l++,n++;if("."==f()){if(0==n)return;if(l-=n,u>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;l++}if(!q.test(f()))return;for(;q.test(f());){if(a=parseInt(f(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;l++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(l++,!f())return}else if(f())return;c[u++]=t}else{if(null!==d)return;l++,d=++u}}if(null!==d)for(o=u-d,u=7;0!=u&&o>0;)s=c[u],c[u--]=c[d+o-1],c[d+--o]=s;else if(8!=u)return;return c},H=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=S(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},W={},z=f({},W,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=f({},z,{"#":1,"?":1,"{":1,"}":1}),G=f({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Q=function(e,t){var n=p(e,0);return n>32&&n<127&&!l(t,e)?e:encodeURIComponent(e)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(e){return l(K,e.scheme)},Z=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},J=function(e,t){var n;return 2==e.length&&E.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ee=function(e){var t;return e.length>1&&J(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},te=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&J(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},re={},ie={},ae={},oe={},se={},ce={},ue={},de={},le={},fe={},he={},pe={},_e={},ve={},ge={},ye={},me={},be={},ke={},xe={},Te={},Se=function(e,t,n,i){var a,o,s,c,u,d=n||re,f=0,p="",_=!1,v=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(B,"")),t=t.replace(F,""),a=h(t);f<=a.length;){switch(o=a[f],d){case re:if(!o||!E.test(o)){if(n)return w;d=ae;continue}p+=o.toLowerCase(),d=ie;break;case ie:if(o&&(D.test(o)||"+"==o||"-"==o||"."==o))p+=o.toLowerCase();else{if(":"!=o){if(n)return w;p="",d=ae,f=0;continue}if(n&&($(e)!=l(K,p)||"file"==p&&(Z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void($(e)&&K[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?d=ve:$(e)&&i&&i.scheme==e.scheme?d=oe:$(e)?d=de:"/"==a[f+1]?(d=se,f++):(e.cannotBeABaseURL=!0,e.path.push(""),d=ke)}break;case ae:if(!i||i.cannotBeABaseURL&&"#"!=o)return w;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,d=Te;break}d="file"==i.scheme?ve:ce;continue;case oe:if("/"!=o||"/"!=a[f+1]){d=ce;continue}d=le,f++;break;case se:if("/"==o){d=fe;break}d=be;continue;case ce:if(e.scheme=i.scheme,o==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&$(e))d=ue;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",d=xe;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),d=be;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",d=Te}break;case ue:if(!$(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,d=be;continue}d=fe}else d=le;break;case de:if(d=le,"/"!=o||"/"!=p.charAt(f+1))continue;f++;break;case le:if("/"!=o&&"\\"!=o){d=fe;continue}break;case fe:if("@"==o){_&&(p="%40"+p),_=!0,s=h(p);for(var y=0;y<s.length;y++){var m=s[y];if(":"!=m||g){var b=Q(m,G);g?e.password+=b:e.username+=b}else g=!0}p=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&$(e)){if(_&&""==p)return"Invalid authority";f-=h(p).length+1,p="",d=he}else p+=o;break;case he:case pe:if(n&&"file"==e.scheme){d=ye;continue}if(":"!=o||v){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&$(e)){if($(e)&&""==p)return I;if(n&&""==p&&(Z(e)||null!==e.port))return;if(c=U(e,p))return c;if(p="",d=me,n)return;continue}"["==o?v=!0:"]"==o&&(v=!1),p+=o}else{if(""==p)return I;if(c=U(e,p))return c;if(p="",d=_e,n==pe)return}break;case _e:if(!q.test(o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&$(e)||n){if(""!=p){var k=parseInt(p,10);if(k>65535)return A;e.port=$(e)&&k===K[e.scheme]?null:k,p=""}if(n)return;d=me;continue}return A}p+=o;break;case ve:if(e.scheme="file","/"==o||"\\"==o)d=ge;else{if(!i||"file"!=i.scheme){d=be;continue}if(o==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",d=xe;else{if("#"!=o){ee(a.slice(f).join(""))||(e.host=i.host,e.path=i.path.slice(),te(e)),d=be;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",d=Te}}break;case ge:if("/"==o||"\\"==o){d=ye;break}i&&"file"==i.scheme&&!ee(a.slice(f).join(""))&&(J(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),d=be;continue;case ye:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&J(p))d=be;else if(""==p){if(e.host="",n)return;d=me}else{if(c=U(e,p))return c;if("localhost"==e.host&&(e.host=""),n)return;p="",d=me}continue}p+=o;break;case me:if($(e)){if(d=be,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=r&&(d=be,"/"!=o))continue}else e.fragment="",d=Te;else e.query="",d=xe;break;case be:if(o==r||"/"==o||"\\"==o&&$(e)||!n&&("?"==o||"#"==o)){if(".."===(u=(u=p).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(te(e),"/"==o||"\\"==o&&$(e)||e.path.push("")):ne(p)?"/"==o||"\\"==o&&$(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&J(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(o==r||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",d=xe):"#"==o&&(e.fragment="",d=Te)}else p+=Q(o,Y);break;case ke:"?"==o?(e.query="",d=xe):"#"==o?(e.fragment="",d=Te):o!=r&&(e.path[0]+=Q(o,W));break;case xe:n||"#"!=o?o!=r&&("'"==o&&$(e)?e.query+="%27":e.query+="#"==o?"%23":Q(o,W)):(e.fragment="",d=Te);break;case Te:o!=r&&(e.fragment+=Q(o,z))}f++}},Pe=function(e){var t,n,r=d(this,Pe,"URL"),i=arguments.length>1?arguments[1]:undefined,o=String(e),s=x(r,{type:"URL"});if(i!==undefined)if(i instanceof Pe)t=T(i);else if(n=Se(t={},String(i)))throw TypeError(n);if(n=Se(s,o,null,t))throw TypeError(n);var c=s.searchParams=new b,u=k(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},a||(r.href=Ie.call(r),r.origin=Ae.call(r),r.protocol=Ee.call(r),r.username=De.call(r),r.password=qe.call(r),r.host=Oe.call(r),r.hostname=Re.call(r),r.port=Le.call(r),r.pathname=Ce.call(r),r.search=Me.call(r),r.searchParams=Ne.call(r),r.hash=Be.call(r))},we=Pe.prototype,Ie=function(){var e=T(this),t=e.scheme,n=e.username,r=e.password,i=e.host,a=e.port,o=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",Z(e)&&(u+=n+(r?":"+r:"")+"@"),u+=H(i),null!==a&&(u+=":"+a)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Ae=function(){var e=T(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&$(e)?t+"://"+H(e.host)+(null!==n?":"+n:""):"null"},Ee=function(){return T(this).scheme+":"},De=function(){return T(this).username},qe=function(){return T(this).password},Oe=function(){var e=T(this),t=e.host,n=e.port;return null===t?"":null===n?H(t):H(t)+":"+n},Re=function(){var e=T(this).host;return null===e?"":H(e)},Le=function(){var e=T(this).port;return null===e?"":String(e)},Ce=function(){var e=T(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Me=function(){var e=T(this).query;return e?"?"+e:""},Ne=function(){return T(this).searchParams},Be=function(){var e=T(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&c(we,{href:Fe(Ie,(function(e){var t=T(this),n=String(e),r=Se(t,n);if(r)throw TypeError(r);k(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Ae),protocol:Fe(Ee,(function(e){var t=T(this);Se(t,String(e)+":",re)})),username:Fe(De,(function(e){var t=T(this),n=h(String(e));if(!X(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Q(n[r],G)}})),password:Fe(qe,(function(e){var t=T(this),n=h(String(e));if(!X(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Q(n[r],G)}})),host:Fe(Oe,(function(e){var t=T(this);t.cannotBeABaseURL||Se(t,String(e),he)})),hostname:Fe(Re,(function(e){var t=T(this);t.cannotBeABaseURL||Se(t,String(e),pe)})),port:Fe(Le,(function(e){var t=T(this);X(t)||(""==(e=String(e))?t.port=null:Se(t,e,_e))})),pathname:Fe(Ce,(function(e){var t=T(this);t.cannotBeABaseURL||(t.path=[],Se(t,e+"",me))})),search:Fe(Me,(function(e){var t=T(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Se(t,e,xe)),k(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(Ne),hash:Fe(Be,(function(e){var t=T(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Se(t,e,Te)):t.fragment=null}))}),u(we,"toJSON",(function(){return Ie.call(this)}),{enumerable:!0}),u(we,"toString",(function(){return Ie.call(this)}),{enumerable:!0}),m){var Ue=m.createObjectURL,je=m.revokeObjectURL;Ue&&u(Pe,"createObjectURL",(function(e){return Ue.apply(m,arguments)})),je&&u(Pe,"revokeObjectURL",(function(e){return je.apply(m,arguments)}))}v(Pe,"URL"),i({global:!0,forced:!o,sham:!a},{URL:Pe})},function(e,t,n){var r=n(1);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r,i,a,o=n(24),s=n(189),c=n(90),u=n(53),d=n(33),l=n(135),f=d("iterator"),h=!1;[].keys&&("next"in(a=[].keys())?(i=s(s(a)))!==Object.prototype&&(r=i):h=!0);var p=r==undefined||o((function(){var e={};return r[f].call(e)!==e}));p&&(r={}),l&&!p||u(r,f)||c(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){"use strict";var r=n(22),i=n(270).left,a=n(119),o=n(160),s=n(163);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&o>79&&o<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(39),c=n.n(s),u=n(40),d=n.n(u),l=n(5),f=n.n(l),h=n(6),p=n.n(h),_=n(1),v=n.n(_),g=(n(43),n(17),n(27),n(132),n(45),n(386)),y=n(638),m=n(242),b=n(349),k=n(219);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}function T(e){var t=e.toUpperCase(),n=null;for(var r in k.a){var i=r.split("_"),a=i[0],o=i[1];if("DEPOSIT"===a&&o===t){n=k.a[r];break}}return n}var S=function(e){f()(n,e);var t=x(n);function n(e){var r;i()(this,n),(r=t.call(this,{ctx:e.runtime.ctx})).$TAG="~",r.$error=null,r.silenced=!1,r.watchingKeys=[],r.watchingCallbacks=[],r.stateSlice=null,r.$watch=function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=c()(r),i=n.watchingCallbacks;t?i.unshift(e):i.push(e)},r.$throwError=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=c()(r),i=n.$stream;if(!r.$error&&e&&(r.$error=e),t.immediately){var a=i.error;a&&i.emit(m.a.ERROR,{stream:i,error:a})}};var a=e.store,o=e.watch,s=(e.pkg,e.runtime),u=e.uuid,d=e.stream,l=e.ipc,f=e.hoc;return r.watchingKeys=Object(g.a)(o),r.$store=a,r.$krt=s,r.$ipc=l,r.$stream=d,r.streamUuid=u,r.$initStateSlice(),r.$subscribeStore(),r.$watch((function(e){r.onStoreStateChanged&&Object(b.a)((function(){r.onStoreStateChanged(e)}))}),f),r}return o()(n,[{key:"LOG_TAG",get:function(){return"[".concat(this.$TAG).concat(this.silenced?"(silence)":"","]")}},{key:"$silenced",get:function(){return this.silenced},set:function(e){this.silenced=e}},{key:"$provideArtefact",value:function(e){e&&this.$store.dispatch({type:this.$ARTEFACT_ACTION,payload:e,meta:{stream_uid:this.streamUuid}})}},{key:"$consumeArtefact",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.$store.dispatch({type:T(e),payload:t?undefined:{},meta:{stream_uid:this.streamUuid}})}},{key:"$queryArtefact",value:function(e){return this.$store.getState()[e]}},{key:"$initStateSlice",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this.$store,r=this.watchingKeys,i=this.streamUuid,a=n.getState(),o={};return r.forEach((function(n){o[n]=a[n][i]||(!0!==t&&e.stateSlice?e.stateSlice[n]:{})||{}})),this.stateSlice=o,o}},{key:"$drainBuffer",value:function(e){var t=this.$ARTEFACT_ACTION.split("_")[1].toLowerCase();this.$selfArtifact=null,this.$consumeArtefact(t,!!e&&e.delInStream)}},{key:"recoverAt",value:function(e){this.$error=null}},{key:"$subscribeStore",value:function(){var e=this,t=this.$store,n=this.streamUuid;this.$unSubscribeStore(),this.unsubscribe=t.subscribe((function(){var r=e.watchingKeys,i=e.watchingCallbacks,a=e.stateSlice,o=t.getState(),s=!1;if(a)for(var c,u=0;u<r.length;u++){var d=o[c=r[u]][n],l=a[c];if(d&&l!==d){s=!0;break}}else s=!0;s&&i.forEach((function(t){t(e.$initStateSlice())}))}))}},{key:"$unSubscribeStore",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"destroy",value:function(){d()(v()(n.prototype),"destroy",this).call(this),this.$error=undefined,this.streamUuid=undefined,this.stateSlice=undefined,this.$selfArtifact=undefined,this.$unSubscribeStore()}}]),n}(y.a)},function(e,t,n){"use strict";var r;if(n.d(t,"a",(function(){return i})),"undefined"!=typeof globalThis)r=globalThis;else if("undefined"!=typeof window)r=window;else{if("undefined"==typeof self)throw new Error("unable to locate global object");r=self}var i=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(5),c=n.n(s),u=n(6),d=n.n(u),l=n(1),f=n.n(l),h=(n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54),n(341)),p=n(49),_=n(137),v=n(164);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(e){c()(n,e);var t=g(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this)).eventManager_=new h.a,a.debug&&(p.a.enable=!0),r.ctx_=e,r.options_=a,r}return o()(n,[{key:"endStream",get:function(){return null}},{key:"listenEndStream_",value:function(){var e=this;this.eventManager_.on(this.endStream,"data",(function(t){e.emit("ESD",t)})).on(this.endStream,"done",(function(t){e.emit("O",t)})).on(this.ctx_,"error",(function(t){e.emit("E",t)}))}},{key:"reset",value:function(){}},{key:"destroy",value:function(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}]),n}(_.a),m=function(e){c()(n,e);var t=g(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this,e,a)).eventManager_.on(r.ctx_,"info",(function(e){r.emit("demux_info",e)})),r}return o()(n,[{key:"constraintPushData_",value:function(e){var t=null;return Object(v.a)(e)||Object(v.k)(e)?t=Object(v.a)(e)?new Uint8Array(e):e:t}}]),n}(y),b=function(e){c()(n,e);var t=g(n);function n(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),t.call(this,e,r)}return n}(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe}));n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54),n(27),n(9);var r=n(2),i=n.n(r),a=n(5),o=n.n(a),s=n(6),c=n.n(s),u=n(1),d=n.n(u),l=(n(147),[0,0,0,0,0,0,0,0]),f=[].concat(l,[0,0,0,0]),h=[].concat(l,[1,0,0,0]),p=function Ke(e){var t;i()(this,Ke);for(var n=Array.isArray(e)?e:e.type,r=!Array.isArray(e)&&!!e.boxHead,a=function(e,t){e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e.set(n,4)},o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];if(r&&1===s.length)a(t=s[0],t.byteLength);else{for(var u=s.length,d=u,l=8;d--;)l+=s[d].byteLength;try{t=new Uint8Array(l)}catch(f){throw"mp4 box ".concat(n," alloc mem err: ").concat(f.message)}for(a(t,l),d=0,l=8;d<u;d++)t.set(s[d],l),l+=s[d].byteLength}this.bytes=t},_=p,v={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(var g in v)if(Object.prototype.hasOwnProperty.call(v,g))for(var y=0;y<4;y++)v[g].push(g.charCodeAt(y));var m=v;function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var k=function(e){o()(n,e);var t=b(n);function n(e){i()(this,n);for(var r,a=new Uint8Array([105,115,111,109]),o=new Uint8Array([0,0,0,1]),s=new Uint8Array([97,118,99,49]),c=0;c<e.length;c++){if(r=e[c],/^hvc/gi.test(r.codec))s=new Uint8Array([104,118,99,49]);break}return t.call(this,m.ftyp,a,o,a,s)}return n}(_);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var T=function(e){o()(n,e);var t=x(n);function n(e){var r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return i()(this,n),t.call(this,{type:m.mdat,boxHead:r},e)}return n}(_),S=n(103),P=n.n(S);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var I=function(e){o()(n,e);var t=w(n);function n(e){return i()(this,n),t.call(this,{type:m.mfhd,boxHead:!0},new Uint8Array([].concat(P()(f),[e>>24,e>>16&255,e>>8&255,255&e])))}return n}(p),A=Math.pow(2,32)-1;n(366);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var D=function(e){o()(n,e);var t=E(n);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];i()(this,n);for(var r,a=new Uint8Array(12+e.length),o=0;o<e.length;o++)r=e[o].flags,a[o+12]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.call(this,{type:m.sdtp,boxHead:!0},a)}return n}(p);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var O=function(e){o()(n,e);var t=q(n);function n(e,r){return i()(this,n),t.call(this,{type:m.tfdt,boxHead:!0},new Uint8Array([].concat(P()(h),[e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r])))}return n}(p);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var L=function(e){o()(n,e);var t=R(n);function n(e){return i()(this,n),t.call(this,{type:m.tfhd,boxHead:!0},new Uint8Array([].concat(P()(f),[e>>24,e>>16&255,e>>8&255,255&e])))}return n}(p);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var M=function(e){o()(n,e);var t=C(n);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r=arguments.length>1?arguments[1]:undefined;i()(this,n);var a,o,s,c,u,d=e.length,l=20+16*d,f=new Uint8Array(l);r+=l,f.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],8);for(var h=0;h<d;h++)o=(a=e[h]).duration,s=a.size,c=a.flags,u=a.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSyncSample,61440&c.degradationPriority,15&c.degradationPriority,u>>>24&255,u>>>16&255,u>>>8&255,255&u],20+16*h);return t.call(this,{type:m.trun,boxHead:!0},f)}return n}(p);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var B=function(e){o()(n,e);var t=N(n);function n(e,r){i()(this,n);var a=e.id,o=e.samples,s=Math.floor(r/(A+1)),c=Math.floor(r%(A+1)),u=function(e){return new D(e).bytes}(o);return t.call(this,m.traf,function(e){return new L(e).bytes}(a),function(e,t){return new O(e,t).bytes}(s,c),function(e,t){return new M(e,t).bytes}(o,u.length+16+20+8+16+8+8),u)}return n}(p);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var U=function(e){o()(n,e);var t=F(n);function n(e,r,a){return i()(this,n),t.call(this,m.moof,new I(e).bytes,function(e,t){return new B(e,t).bytes}(a,r))}return n}(_);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var V=function(e){o()(n,e);var t=j(n);function n(e,r){i()(this,n),r*=e;var a=Math.floor(r/(A+1)),o=Math.floor(r%(A+1)),s=new Uint8Array([].concat(P()(h),[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return t.call(this,{type:m.mvhd,boxHead:!0},s)}return n}(p);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var W=function(e){o()(n,e);var t=H(n);function n(e){i()(this,n);var r=e.id,a=e.duration*e.timescale,o=e.width,s=e.height,c=Math.floor(a/(A+1)),u=Math.floor(a%(A+1));return t.call(this,m.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,s>>8&255,255&s,0,0]))}return n}(_);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Y=function(e){o()(n,e);var t=z(n);function n(e,r){i()(this,n),r*=e;var a=Math.floor(r/(A+1)),o=Math.floor(r%(A+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]);return t.call(this,m.mdhd,s)}return n}(_);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),K=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),$=function(e){o()(n,e);var t=G(n);function n(e){var r;switch(i()(this,n),e){case"video":r=Q;break;case"audio":r=K}return t.call(this,m.hdlr,r)}return n}(_);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var X=(new(function(e){o()(n,e);var t=Z(n);function n(){return i()(this,n),t.call(this,{type:m.dref,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))}return n}(p))).bytes;function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ee=(new(function(e){o()(n,e);var t=J(n);function n(){return i()(this,n),t.call(this,m.dinf,X)}return n}(p))).bytes;function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ne=(new(function(e){o()(n,e);var t=te(n);function n(){return i()(this,n),t.call(this,{type:m.smhd,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ie=(new(function(e){o()(n,e);var t=re(n);function n(){return i()(this,n),t.call(this,m.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}return n}(p))).bytes;function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var oe=(new(function(e){o()(n,e);var t=ae(n);function n(){return i()(this,n),t.call(this,{type:m.stco,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ce=(new(function(e){o()(n,e);var t=se(n);function n(){return i()(this,n),t.call(this,{type:m.stsz,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0,0,0,0,0])))}return n}(p))).bytes;function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var de=(new(function(e){o()(n,e);var t=ue(n);function n(){return i()(this,n),t.call(this,{type:m.stsc,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var fe=(new(function(e){o()(n,e);var t=le(n);function n(){return i()(this,n),t.call(this,{type:m.stts,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;n(56);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var pe=function(e){o()(n,e);var t=he(n);function n(){return i()(this,n),t.call(this,m.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))}return n}(_);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ve=function(e){o()(n,e);var t=_e(n);function n(e,r){return i()(this,n),t.call(this,m.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r]))}return n}(_);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ye=function(e){o()(n,e);var t=ge(n);function n(e,r){i()(this,n);for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return t.call.apply(t,[this,e,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r.width>>8&255,255&r.width,r.height>>8&255,255&r.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])].concat(o))}return n}(_);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var be=function(e){o()(n,e);var t=me(n);function n(e,r,a){return i()(this,n),t.call(this,m.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(a)))}return n}(_),ke=function(e){o()(n,e);var t=me(n);function n(e){i()(this,n);var r,a,o,s=[],c=[];for(r=0;r<e.sps.length;r++)o=(a=e.sps[r]).byteLength,s.push(o>>>8&255),s.push(255&o),s=s.concat(Array.prototype.slice.call(a));for(r=0;r<e.pps.length;r++)o=(a=e.pps[r]).byteLength,c.push(o>>>8&255),c.push(255&o),c=c.concat(Array.prototype.slice.call(a));var u=e.pixelRatio[0],d=e.pixelRatio[1];return t.call(this,m.avc1,e,new be(e,s,c).bytes,(new pe).bytes,new ve(u,d).bytes)}return n}(ye);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}function Te(e,t){for(var n=[128&t,0,1],r=0;r<1;r++){var i=2+e.byteLength;n.push((65535&i)>>8),n.push(255&i),n.push(64),n.push(1),n=n.concat(Array.prototype.slice.call(e))}return n}var Se=function(e){o()(n,e);var t=xe(n);function n(e,r,a,o){return i()(this,n),t.call(this,m.hvcC,function(e,t,n,r){var i;return i=t.minSpatialSegmentationIdc?n.entropy_coding_sync_enabled_flag&&n.tiles_enabled_flag?0:n.entropy_coding_sync_enabled_flag?3:n.tiles_enabled_flag?2:1:0,new Uint8Array([1,t.profile_space<<6|t.tier_flag<<5|t.profile_idc,t.profile_compatibility_flags[0],t.profile_compatibility_flags[1],t.profile_compatibility_flags[2],t.profile_compatibility_flags[3],t.constraint_indicator_flags[0],t.constraint_indicator_flags[1],t.constraint_indicator_flags[2],t.constraint_indicator_flags[3],t.constraint_indicator_flags[4],t.constraint_indicator_flags[5],t.level_idc,240&t.minSpatialSegmentationIdc>>8,255&t.minSpatialSegmentationIdc,252&i,252&t.chromaFormat,248&t.bitDepthLumaMinus8,248&t.bitDepthChromaMinus8,0,0,0|e.numTemporalLayers<<3|e.temporalIdNested<<2|3,3].concat(Te(r.vps[0],32)).concat(Te(r.sps[0],33)).concat(Te(r.pps[0],34)))}(r,a,o,e))}return n}(_),Pe=function(e){o()(n,e);var t=xe(n);function n(e){i()(this,n);var r=e.pixelRatio[0],a=e.pixelRatio[1];return t.call(this,m.hvc1,e,new Se(e,e.hevc_vps,e.hevc_sps,e.hevc_pps).bytes,(new pe).bytes,new ve(r,a).bytes)}return n}(ye);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ie=function(e){o()(n,e);var t=we(n);function n(e){i()(this,n);var r=e.sampleRate;return t.call(this,m[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}return n}(_);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ee=function(e){o()(n,e);var t=Ae(n);function n(e){i()(this,n);var r=e.config,a=r.length;return t.call(this,{type:m.esds,boxHead:!0},new Uint8Array([].concat(P()(f),[3,23+a,0,1,0,4,15+a,64,21,0,0,0,0,0,0,0,0,0,0,0,5,a]).concat(r).concat([6,1,2])))}return n}(p),De=function(e){o()(n,e);var t=Ae(n);function n(e){i()(this,n);var r=e.sampleRate,a=e.channelCount;return t.call(this,m.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a,0,16,0,0,0,0,r>>8&255,255&r,0,0]),new Ee(e).bytes)}return n}(p);function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Oe=function(e){o()(n,e);var t=qe(n);function n(e){i()(this,n);var r,a=new Uint8Array([0,0,0,0,0,0,0,1]);return r="audio"===e.type?e.isAAC||"mp3"!==e.codec?function(e){return new De(e).bytes}(e):function(e){return new Ie(e).bytes}(e):/^hvc1/gi.test(e.codec)?function(e){return new Pe(e).bytes}(e):function(e){return new ke(e).bytes}(e),t.call(this,m.stsd,a,r)}return n}(_);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Le=function(e){o()(n,e);var t=Re(n);function n(e){return i()(this,n),t.call(this,m.stbl,function(e){return new Oe(e).bytes}(e),fe,de,ce,oe)}return n}(p);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Me=function(e){o()(n,e);var t=Ce(n);function n(e){return i()(this,n),t.call(this,m.minf,"audio"===e.type?ne:ie,ee,function(e){return new Le(e).bytes}(e))}return n}(_);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Be=function(e){o()(n,e);var t=Ne(n);function n(e){return i()(this,n),t.call(this,m.mdia,(r=e.timescale,a=e.duration,new Y(r,a).bytes),function(e){return new $(e).bytes}(e.type),function(e){return new Me(e).bytes}(e));var r,a}return n}(_);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ue=function(e){o()(n,e);var t=Fe(n);function n(e){return i()(this,n),t.call(this,m.trak,function(e){return new W(e).bytes}(e),function(e){return new Be(e).bytes}(e))}return n}(_);function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ve=function(e){o()(n,e);var t=je(n);function n(e){i()(this,n);var r=e.id;return t.call(this,{type:m.trex,boxHead:!0},new Uint8Array([].concat(P()(f),[r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])))}return n}(p);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var We=function(e){o()(n,e);var t=He(n);function n(e){return i()(this,n),t.call.apply(t,[this,m.mvex].concat(P()(e)))}return n}(_),ze=function(e){for(var t,n=e.length,r=[];n--;)r[n]=(t=e[n],new Ve(t).bytes);return new We(r).bytes};function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ge=function(e){o()(n,e);var t=Ye(n);function n(e){i()(this,n);for(var r,a,o,s=e.length,c=[];s--;)c[s]=((r=e[s]).duration=r.duration||4294967295,new Ue(r).bytes);return t.call.apply(t,[this,m.moov,(a=e[0].timescale,o=e[0].duration,new V(a,o).bytes)].concat(c,[ze(e)]))}return n}(_),Qe={initSegment:function(e){var t,n=function(e){return new Ge(e).bytes}(e),r=function(e){return new k(e).bytes}(e);try{t=new Uint8Array(r.byteLength+n.byteLength)}catch(i){throw"mp4 initSegment alloc mem err ".concat(r.byteLength,"-").concat(n.byteLength)}return t.set(r),t.set(n,r.byteLength),t},moof:function(e,t,n){return function(e,t,n){return new U(e,t,n).bytes}(e,t,n)},mdat:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new T(e,t).bytes}}},function(e,t,n){"use strict";var r=n(23),i=n(48),a=n(283),o=n(90),s=n(190),c=n(24),u=n(157),d=n(96),l=n(44),f=n(293),h=n(360),p=n(189),_=n(173),v=n(131).f,g=n(52).f,y=n(260),m=n(134),b=n(107),k=b.get,x=b.set,T="ArrayBuffer",S="DataView",P="Wrong index",w=r.ArrayBuffer,I=w,A=r.DataView,E=A&&A.prototype,D=Object.prototype,q=r.RangeError,O=h.pack,R=h.unpack,L=function(e){return[255&e]},C=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},N=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return O(e,23,4)},F=function(e){return O(e,52,8)},U=function(e,t){g(e.prototype,t,{get:function(){return k(this)[t]}})},j=function(e,t,n,r){var i=f(n),a=k(e);if(i+t>a.byteLength)throw q(P);var o=k(a.buffer).bytes,s=i+a.byteOffset,c=o.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,i,a){var o=f(n),s=k(e);if(o+t>s.byteLength)throw q(P);for(var c=k(s.buffer).bytes,u=o+s.byteOffset,d=r(+i),l=0;l<t;l++)c[u+l]=d[a?l:t-l-1]};if(a){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),w.name!=T}))){for(var H,W=(I=function(e){return u(this,I),new w(f(e))}).prototype=w.prototype,z=v(w),Y=0;z.length>Y;)(H=z[Y++])in I||o(I,H,w[H]);W.constructor=I}_&&p(E)!==D&&_(E,D);var G=new A(new I(2)),Q=E.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||s(E,{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},{unsafe:!0})}else I=function(e){u(this,I,T);var t=f(e);x(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},A=function(e,t,n){u(this,A,S),u(e,I,S);var r=k(e).byteLength,a=d(t);if(a<0||a>r)throw q("Wrong offset");if(a+(n=n===undefined?r-a:l(n))>r)throw q("Wrong length");x(this,{buffer:e,byteLength:n,byteOffset:a}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},i&&(U(I,"byteLength"),U(A,"buffer"),U(A,"byteLength"),U(A,"byteOffset")),s(A.prototype,{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:undefined);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:undefined);return t[1]<<8|t[0]},getInt32:function(e){return N(j(this,4,e,arguments.length>1?arguments[1]:undefined))},getUint32:function(e){return N(j(this,4,e,arguments.length>1?arguments[1]:undefined))>>>0},getFloat32:function(e){return R(j(this,4,e,arguments.length>1?arguments[1]:undefined),23)},getFloat64:function(e){return R(j(this,8,e,arguments.length>1?arguments[1]:undefined),52)},setInt8:function(e,t){V(this,1,e,L,t)},setUint8:function(e,t){V(this,1,e,L,t)},setInt16:function(e,t){V(this,2,e,C,t,arguments.length>2?arguments[2]:undefined)},setUint16:function(e,t){V(this,2,e,C,t,arguments.length>2?arguments[2]:undefined)},setInt32:function(e,t){V(this,4,e,M,t,arguments.length>2?arguments[2]:undefined)},setUint32:function(e,t){V(this,4,e,M,t,arguments.length>2?arguments[2]:undefined)},setFloat32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:undefined)},setFloat64:function(e,t){V(this,8,e,F,t,arguments.length>2?arguments[2]:undefined)}});m(I,T),m(A,S),e.exports={ArrayBuffer:I,DataView:A}},function(e,t,n){var r=n(102),i=n(86),a=n(148),o=n(44),s=function(e){return function(t,n,s,c){r(n);var u=i(t),d=a(u),l=o(u.length),f=e?l-1:0,h=e?-1:1;if(s<2)for(;;){if(f in d){c=d[f],f+=h;break}if(f+=h,e?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:l>f;f+=h)f in d&&(c=n(c,d[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},,function(e,t,n){var r=n(22),i=n(23),a=n(169),o=[].slice,s=function(e){return function(t,n){var r=arguments.length>2,i=r?o.call(arguments,2):undefined;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},,function(e,t,n){var r=n(149),i=n(41),a=n(53),o=n(52).f,s=n(166),c=n(299),u=s("meta"),d=0,l=Object.isExtensible||function(){return!0},f=function(e){o(e,u,{value:{objectID:"O"+ ++d,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,u)){if(!l(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},getWeakData:function(e,t){if(!a(e,u)){if(!l(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},onFreeze:function(e){return c&&h.REQUIRED&&l(e)&&!a(e,u)&&f(e),e}};r[u]=!0},function(e,t,n){"use strict";var r=n(263).IteratorPrototype,i=n(125),a=n(123),o=n(134),s=n(152),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:a(1,n)}),o(e,u,!1,!0),s[u]=c,e}},function(e,t,n){var r=n(24);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){"use strict";var r=n(22),i=n(144),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(46),i=n.n(r),a=n(29),o=n.n(a),s=(n(94),n(10),n(93),n(31),n(87),n(14));function c(e){return u.apply(this,arguments)}function u(){return(u=i()(o.a.mark((function e(t){var r,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(7),n.e(0)]).then(n.bind(null,587));case 2:r=e.sent["default"],i=s.a.getLog(),a=r.gzip(i),(c=new XMLHttpRequest).open("POST","//qosp.iqiyi.com/crashlog?source=pcwplayer"),c.setRequestHeader("Content-Encoding","gzip"),c.setRequestHeader("Content-Type","application/octet-stream"),c.setRequestHeader("File-Name",t),c.send(a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return _}));n(147),n(121),n(38),n(56),n(10),n(214),n(188),n(93),n(167),n(197),n(198),n(31),n(87);var r=n(307),i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=(n(246),n(304),n(27),n(132),n(45),n(202),n(229),n(126),n(172),n(156)),u=n(164);function d(e){return!!e}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=new(function(){function e(){a()(this,e),this.cachedInjectors_=new Map}return s()(e,[{key:"validKey_",value:function(e,t,n){var r=!1,i=undefined;return n||(n=this.cachedInjectors_.get(e)),t.startsWith("$")||t in e&&(n.map((function(e){return e.key})).indexOf(t)>-1||(r=!0)),{valid:r,descriptor:i}}},{key:"ejectApi_",value:function(e,t){Object(c.e)(e,t)&&delete e[t]}},{key:"dispose",value:function(){this.cachedInjectors_.clear()}},{key:"provide",value:function(e,t){var n=this,i=this.cachedInjectors_;if(e){var a=[];i.has(e)?a=i.get(e):i.set(e,a),t.forEach((function(t){var i;n.validKey_(e,t,a).valid&&(Object(r.a)(e,(function(e){return i=Object.getOwnPropertyDescriptor(e,t)})),a.push({key:t,descriptor:i}))}))}else 0}},{key:"inject",value:function(e){var t=this.cachedInjectors_;d(e)&&t.forEach((function(t,n){t.forEach((function(t){var r=t.key,i=t.descriptor,a=void 0===i?{}:i,o=!!a.set,s=!!a.get;r in n&&(r in e||(o||s?Object.defineProperty(e,r,Object.assign(Object.assign({},a),{get:s?function(){return n[r]}:undefined,set:o?function(e){return n[r]=e}:undefined})):Object(u.d)(n[r])&&(e[r]=n[r].bind(n),e[r].__target__=n)))}))}))}},{key:"eject",value:function(e,t){var n=this;this.cachedInjectors_;d(e)&&Array.isArray(t)&&t.forEach((function(t){n.ejectApi_(e,t)}))}}]),e}());function p(e,t,n){var r=e.$__apiDescriptorQueue__=e.$__apiDescriptorQueue__||[];if(n){if(Array.isArray(r))-1==r.map((function(e){return e.key})).indexOf(t)&&r.push({key:t,descriptor:n});return n}}function _(){var e=[];return Object(r.b)(this,(function(t){var n=t.$__apiDescriptorQueue__;if(Array.isArray(n)){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;-1===e.indexOf(a.key)&&e.push(a.key)}}catch(o){i.e(o)}finally{i.f()}}})),e}},function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(48),o=n(359),s=n(85),c=n(269),u=n(157),d=n(123),l=n(90),f=n(44),h=n(293),p=n(294),_=n(124),v=n(53),g=n(165),y=n(41),m=n(125),b=n(173),k=n(131).f,x=n(362),T=n(104).forEach,S=n(185),P=n(52),w=n(109),I=n(107),A=n(186),E=I.get,D=I.set,q=P.f,O=w.f,R=Math.round,L=i.RangeError,C=c.ArrayBuffer,M=c.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,F=s.TypedArray,U=s.TypedArrayPrototype,j=s.aTypedArrayConstructor,V=s.isTypedArray,H="BYTES_PER_ELEMENT",W="Wrong length",z=function(e,t){for(var n=0,r=t.length,i=new(j(e))(r);r>n;)i[n]=t[n++];return i},Y=function(e,t){q(e,t,{get:function(){return E(this)[t]}})},G=function(e){var t;return e instanceof C||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},Q=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return Q(e,t=_(t,!0))?d(2,e[t]):O(e,t)},$=function(e,t,n){return!(Q(e,t=_(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};a?(N||(w.f=K,P.f=$,Y(U,"buffer"),Y(U,"byteOffset"),Y(U,"byteLength"),Y(U,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:K,defineProperty:$}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,d="set"+e,_=i[s],v=_,g=v&&v.prototype,P={},w=function(e,t){q(e,t,{get:function(){return function(e,t){var n=E(e);return n.view[c](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=E(e);n&&(r=(r=R(r))<0?0:r>255?255:255&r),i.view[d](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};N?o&&(v=t((function(e,t,n,r){return u(e,v,s),A(y(t)?G(t)?r!==undefined?new _(t,p(n,a),r):n!==undefined?new _(t,p(n,a)):new _(t):V(t)?z(v,t):x.call(v,t):new _(h(t)),e,v)})),b&&b(v,F),T(k(_),(function(e){e in v||l(v,e,_[e])})),v.prototype=g):(v=t((function(e,t,n,r){u(e,v,s);var i,o,c,d=0,l=0;if(y(t)){if(!G(t))return V(t)?z(v,t):x.call(v,t);i=t,l=p(n,a);var _=t.byteLength;if(r===undefined){if(_%a)throw L(W);if((o=_-l)<0)throw L(W)}else if((o=f(r)*a)+l>_)throw L(W);c=o/a}else c=h(t),i=new C(o=c*a);for(D(e,{buffer:i,byteOffset:l,byteLength:o,length:c,view:new M(i)});d<c;)w(e,d++)})),b&&b(v,F),g=v.prototype=m(U)),g.constructor!==v&&l(g,"constructor",v),B&&l(g,B,s),P[s]=v,r({global:!0,forced:v!=_,sham:!N},P),H in v||l(v,H,a),H in g||l(g,H,a),S(s)}):e.exports=function(){}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(269),o=n(185),s="ArrayBuffer",c=a.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==c},{ArrayBuffer:c}),o(s)},function(e,t,n){"use strict";var r=n(98),i=n(96),a=n(44),o=n(119),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),l=u||!d;e.exports=l?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=s(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},function(e,t,n){var r=n(22),i=n(285);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,n){var r=n(22),i=n(269);r({global:!0,forced:!n(283)},{DataView:i.DataView})},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(39),c=n.n(s),u=n(5),d=n.n(u),l=n(6),f=n.n(l),h=n(1),p=n.n(h),_=(n(147),n(126),n(272),n(341)),v=n(49),g=n(195),y=n(164);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var b=function(e){d()(n,e);var t=m(n);function n(e,r){var a,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{debug:!1};i()(this,n),(a=t.call(this))._eventManager=new _.a,o.debug&&(v.a.enable=!0);var s=Object(g.a)({},o,!1),u=Object(g.a)({},o,!1);return Array.isArray(e)&&(Object(g.a)(s,e[1]||{}),e=e[0]),Array.isArray(r)&&(Object(g.a)(u,r[1]||{}),r=r[0]),a.demuxer=new e(c()(a),s),a.remuxer=new r(c()(a),u),a._eventManager.on(a.demuxer,"demux_info",(function(e){return a.emit("demux_info",e)})).on(a.demuxer,"ESD",(function(e){return a.emit("demux_data",e)})).on(a.remuxer,"ESD",(function(e){return a.emit("remux_data",e)})).on(a.remuxer.endStream,"done",(function(){return a.emit("done")})),a}return o()(n,[{key:"push",value:function(e,t){var n=t.resetInitSegment,r=t.audioSegmentAlignPTS;"number"!=typeof r||isNaN(r)||(this.remuxer.audioAlignPTS=r),"boolean"==typeof n&&n&&this.remuxer.rebuildInitSegment(),this.config=t,this.demuxer.push(e),this._noticeIdle()}},{key:"reset",value:function(){this.demuxer.reset(),this.remuxer.reset()}},{key:"destroy",value:function(){this.demuxer.unpipe(),this.demuxer.endStream.unpipe(),this.remuxer.endStream.removeAllListeners("data"),this.remuxer.endStream.removeAllListeners("done"),this._eventManager.removeAll()}},{key:"fireErr",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.emit("error",e,t,Object.assign(Object.assign({},n),{meta:this.config&&this.config.meta||{}}))}},{key:"_noticeIdle",value:function(){var e=this,t=function(){return e.emit("__idle__")};y.l?t():setTimeout((function(){t()}),0)}}]),n}(n(137).a)},function(e,t,n){var r,i,a,o,s;r=n(625),i=n(409).utf8,a=n(626),o=n(409).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,d=-271733879,l=-1732584194,f=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var p=s._ff,_=s._gg,v=s._hh,g=s._ii;for(h=0;h<n.length;h+=16){var y=u,m=d,b=l,k=f;u=p(u,d,l,f,n[h+0],7,-680876936),f=p(f,u,d,l,n[h+1],12,-389564586),l=p(l,f,u,d,n[h+2],17,606105819),d=p(d,l,f,u,n[h+3],22,-1044525330),u=p(u,d,l,f,n[h+4],7,-176418897),f=p(f,u,d,l,n[h+5],12,1200080426),l=p(l,f,u,d,n[h+6],17,-1473231341),d=p(d,l,f,u,n[h+7],22,-45705983),u=p(u,d,l,f,n[h+8],7,1770035416),f=p(f,u,d,l,n[h+9],12,-1958414417),l=p(l,f,u,d,n[h+10],17,-42063),d=p(d,l,f,u,n[h+11],22,-1990404162),u=p(u,d,l,f,n[h+12],7,1804603682),f=p(f,u,d,l,n[h+13],12,-40341101),l=p(l,f,u,d,n[h+14],17,-1502002290),u=_(u,d=p(d,l,f,u,n[h+15],22,1236535329),l,f,n[h+1],5,-165796510),f=_(f,u,d,l,n[h+6],9,-1069501632),l=_(l,f,u,d,n[h+11],14,643717713),d=_(d,l,f,u,n[h+0],20,-373897302),u=_(u,d,l,f,n[h+5],5,-701558691),f=_(f,u,d,l,n[h+10],9,38016083),l=_(l,f,u,d,n[h+15],14,-660478335),d=_(d,l,f,u,n[h+4],20,-405537848),u=_(u,d,l,f,n[h+9],5,568446438),f=_(f,u,d,l,n[h+14],9,-1019803690),l=_(l,f,u,d,n[h+3],14,-187363961),d=_(d,l,f,u,n[h+8],20,1163531501),u=_(u,d,l,f,n[h+13],5,-1444681467),f=_(f,u,d,l,n[h+2],9,-51403784),l=_(l,f,u,d,n[h+7],14,1735328473),u=v(u,d=_(d,l,f,u,n[h+12],20,-1926607734),l,f,n[h+5],4,-378558),f=v(f,u,d,l,n[h+8],11,-2022574463),l=v(l,f,u,d,n[h+11],16,1839030562),d=v(d,l,f,u,n[h+14],23,-35309556),u=v(u,d,l,f,n[h+1],4,-1530992060),f=v(f,u,d,l,n[h+4],11,1272893353),l=v(l,f,u,d,n[h+7],16,-155497632),d=v(d,l,f,u,n[h+10],23,-1094730640),u=v(u,d,l,f,n[h+13],4,681279174),f=v(f,u,d,l,n[h+0],11,-358537222),l=v(l,f,u,d,n[h+3],16,-722521979),d=v(d,l,f,u,n[h+6],23,76029189),u=v(u,d,l,f,n[h+9],4,-640364487),f=v(f,u,d,l,n[h+12],11,-421815835),l=v(l,f,u,d,n[h+15],16,530742520),u=g(u,d=v(d,l,f,u,n[h+2],23,-995338651),l,f,n[h+0],6,-198630844),f=g(f,u,d,l,n[h+7],10,1126891415),l=g(l,f,u,d,n[h+14],15,-1416354905),d=g(d,l,f,u,n[h+5],21,-57434055),u=g(u,d,l,f,n[h+12],6,1700485571),f=g(f,u,d,l,n[h+3],10,-1894986606),l=g(l,f,u,d,n[h+10],15,-1051523),d=g(d,l,f,u,n[h+1],21,-2054922799),u=g(u,d,l,f,n[h+8],6,1873313359),f=g(f,u,d,l,n[h+15],10,-30611744),l=g(l,f,u,d,n[h+6],15,-1560198380),d=g(d,l,f,u,n[h+13],21,1309151649),u=g(u,d,l,f,n[h+4],6,-145523070),f=g(f,u,d,l,n[h+11],10,-1120210379),l=g(l,f,u,d,n[h+2],15,718787259),d=g(d,l,f,u,n[h+9],21,-343485551),u=u+y>>>0,d=d+m>>>0,l=l+b>>>0,f=f+k>>>0}return r.endian([u,d,l,f])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(e===undefined||null===e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={stringify:function(e,t,n){var r="";try{r=JSON.stringify(e,t,n)}catch(i){}return r},parse:function(e,t){return JSON?JSON.parse(e,t):null}}},function(){},,function(e,t,n){var r=n(96),i=n(44);e.exports=function(e){if(e===undefined)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){var r=n(361);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},,function(e,t,n){var r=n(33);t.f=r},function(e,t,n){var r=n(216),i=n(53),a=n(296),o=n(52).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(22),i=n(48),a=n(222),o=n(98),s=n(109),c=n(150);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),i=s.f,u=a(r),d={},l=0;u.length>l;)(n=i(r,t=u[l++]))!==undefined&&c(d,t,n);return d}})},function(e,t,n){var r=n(24);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(module,exports,__webpack_require__){var _qda=["YkRXV2k=","Vi46Sg==","IDI0IDE0J0w=","Sk5NTWw=","PyAxOFcgMjc=","VWVrZkc=","ZVJnZkE=","OVQgMDggMTI=","UGpYd24=","UUZ3dmU=","IDI5IDA2IDI2Rw==","Rl8gMjEz","IyAxOVVc","TGNRYXY=","Z013VUY=","IDIwIDIxI1Y=","JSAyMEZe","emR4aUg=","IDMxUihf","IDIyKyUw","KSAxNyhU","IDE3IDExIDIwTQ==","cGNkdmI=","I1gvJg==","TDhNYQ==","IDEzWGIgMzI=","IDE0IDI0YyI=","QyAxNTtJ","MjUmIDI2","IDE1QyAxMTE=","TSAyOCogMDE=","enZQb2g=","ITYoIDA4","RVVoSnk=","IDI1XS9M","IDE3JiAyNiAwOQ==","b0Jta3I=","ViNTTA==","K0siSA==","b25lcnJvcg==","Q1BzRFM=","MyAwNmAgMTE=","IDEzWGIgMTI=","U2NMeHo=","S1RHaHA=","R2tLRnA=","R1EnRg==","IDE1YyAwOVY=","T29xUGw=","VWludDhBcnJheQ==","TUVjd08=","RmhTUFk=","cmVzcG9uc2U=","IDI5KTYw","cWR5","T29VS0c=","IDExIDE5MTs=","PUY2IDIz","Q0xXeW4=","LFJTYw==","TT9QTQ==","eXhnWXg=","ak5mclk=","KjVNKg==","SCAyOVAgMjY=","IDE5IDIxTlg=","QCJQYA==","IiAyNSJZ","SU9KS1c=","cFVOa2k=","IDE1VDYgMTI=","Q2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiA=","ZklvQXY=","NzVHUw==","RS4gMjAz","bUV6bHc=","b25SdW50aW1lSW5pdGlhbGl6ZWQ=","IDE5IDEwRF4=","MVhRJw==","IDI4IDEzYEo=","bUxtRmU=","X2ZyZWU=","OV1VIDEy","VlFLa0I=","O0FiUg==","NSAxNSAwOWI=","KyAxMU8gMTQ=","WVVXb04=","QCJQPA==","cG9w","TXhsY2Y=","WEtobHc=","IDI0MFIt","QlVJdlI=","VXlUb2U=","KyAzMSAwOV8=","ZFVwQmg=","SEVBUDg=","WSAyOCAyOSs=","KCAxMCAyNUQ=","JSAyMjogMjQ=","IDI5VzRK","IDE2VDhA","J10gMDMgMTI=","I1c0IDIz","IDE2RV47","ISAxMkFh","aFpCVHY=","SSAzMTJF","RWNoVmc=","PmIsIDAz","IDEzRiAxNCg=","d2luZG93Ow==","IDI1KVRj","KCAwMlQgMDY=","IiIgMDhf","dFVseUo=","enhza3Y=","XCAxOTggMjY=","Oi0uIDA3","OD8gMjlD","IDIzSFkgMDI=","IDI4RV0gMTY=","KUUgMDRa","IDAxIDAyQCAyNSAwNg==","ZkhwVG8=","MyohOQ==","ITc2UQ==","Y2hhckNvZGVBdA==","Y21kNXg=","IDIzIDIxMyE=","QyAyMmMgMDA=","YXJyYXk=","T3NVSlU=","VkNKWVg=","bHVVenk=","QlkgMTJK","KCAxMyAxMCAwOA==","VDEgMTUx","PiAxOTsz","T1JuQUs=","IkYgMjMgMDU=","IDMxKl1E","IDMyMmMj","dFJLYUM=","IDE4PCNe","PTBUOg==","KD8gMjVg","IDAxIDEzIDIxNCE=","UnJ1b0U=","O2AgMTNA","M11XTw==","aW11bA==","Y1hMdm4=","aURtZ0E=","d1VoTWY=","RSAyNigw","YXJn","Vk9ueW4=","Tm5EbGY=","KCAxNF8n","OV1KPw==","R211cXM=","TEhJZUc=","QWxNb3Y=","IzpbLA==","UVlPRkE=","VWJGcUI=","IDEzIDEwQ10=","Wk0gMDNb","bm9FeGl0UnVudGltZQ==","IDMxIyAwNCw=","SlJwTVk=","akNoV3I=","RjRZXw==","cW9XeVc=","MyQgMDhE","W29iamVjdCBwcm9jZXNzXQ==","VlVua2M=","MCAyNCAwOCAxMg==","ZmlsZTovLw==","b3Blbg==","IDI4XUEgMjc=","IlRcIw==","SFk3Yw==","eFRzc1c=","IDMxKkFe","Kj9HIDMw","WCAyMyAxNzo=","akxqdkw=","LVQ/Og==","bWVKYnk=","Y21kNXhsaXZl","UVJ6aUM=","QiggMjMgMjg=","YXBwbHk=","UF4gMjlf","c3RhY2s=","ZFVLQ3U=","ZnNGbWQ=","bUFwYkg=","RjJGIDI5","IDE4IDIxIDE2Nw==","QnlFdno=","ZG9jYWk=","OiQgMDVR","dHJ1bmM=","SGhkRVY=","KCAxNSFW","ZmVhUUI=","IDAxIDI2IDI4NWA=","bVNpamo=","MlkkPA==","clVjTEM=","dXNlIGFzbQ==","Y0FPYmg=","SHNZU3I=","UmdaQlI=","WiAxOTRS","QiAwOEg1","Q0l0dmI=","PCAzMSAwNiAxMA==","MzpOIDAw","SCAzMSAwMjk=","dG9TdHJpbmc=","MkY7Rw==","IDMxLCUgMTc=","IDE2U085","MCAyNi8gMDM=","Z01FQ2k=","RSAzMSAwNEA=","Lj8wMA==","JCAyMyAwMU8=","TUxoblY=","alpLRmU=","b2JqZWN0","IDI3SCAwNyAwOA==","JSAwMmNM","eW9oR2M=","IDI3VSAwMkw=","PUpDWw==","IDIxNTQj","WUNDaXI=","IyUgMjJi","d0ZURVc=","WFF0ZFU=","YXJndW1lbnRz","IDE0IDI0IDI2IDIw","PyAwMyAxNTQ=","IDI4RCAwMlY=","c2V0U3RhdHVz","O0NeIDE2","IDExTTxi","QWxFQ1Y=","IDIwYzkgMjg=","RjMgMjBP","KSc1IDI4","ST8gMjYgMTc=","IDIxXVogMjE=","YnVmZmVy","JEsgMDA1","bnVtYmVy","eWhMZ2I=","IDE4IDIxIDE2QQ==","ZFRkZVM=","LCAxNTBe","QUlLVGU=","JTEoRw==","ck9OSUI=","Q0VgPA==","T15cMQ==","IDI0SiAwNU0=","QVV2ZmE=","YWJGPg==","dXZ1ZEs=","PCAyOSAwMSAxNQ==","QlwgMDRU","RXJ4S20=","IDMyWyAyODc=","c3Jj","YmxvYjo=","cmVxdWlyZTs=","ISAyMiVM","JiMgMjNd","cHJvdG90eXBl","IDI1XS8n","IDI5KTcgMDg=","RXd5Y0k=","IDMwIDE2VCAyMQ==","JSAwNDkn","J1ggMjcn","JitbWA==","b2xJalc=","IDE5IDEyJU8=","IDMxWyAyMCM=","IDE4Q0IgMDg=","cHJpbnQ=","WklmaEw=","Qm5IU3U=","JyAwM0ZV","JmM6Lg==","S0FtTms=","QUg3IDMy","IDI5P2BW","IDE5IDIwJCAxOA==","UnVubmluZy4uLg==","IDE1VDVh","WW5PY3M=","QFk8JA==","IDI1IDA0SCU=","cXJ3eEQ=","SUVPdU8=","PFYzIDAz","JyAxNmBK","IDMxIDMwLSAwMg==","Z1ZrbUU=","SFp6cFQ=","LC5VJw==","PUc/Sg==","O0cgMDQgMjM=","JFIgMzE6","RkdROQ==","cGh3WUo=","LVwxOQ==","JEAgMjUo","TSAyNDxT","SU5JVElBTF9NRU1PUlk=","RUpoQUY=","Tks1Mw==","IDI4RCVe","UG9Sc0Y=","IDIxXGM0","MSMgMDE5","IDE1IDIzSCY=","VkhSQVg=","PiAwMF8n","RXNoams=","IDIxIDA4VCAyOA==","bG9jYXRpb24=","UkRPckM=","KCAxMERh","STQgMDFG","IDAxIDIzIDEyQD0=","ZlJ3U1E=","IDI0WzMgMzE=","WUZxQW4=","IDI0KyAyNi4=","alpSQnY=","UkNXWHQ=","R0xhbUs=","Q25BZWs=","IDIzIUQgMjY=","Z0ZTYlg=","OCxXSw==","WXBEcWg=","IDAxKVEgMjZK","NlI6Rw==","TCsgMTYgMjg=","T0tFdkk=","cmVzcG9uc2VUZXh0","QWZOS2o=","IDE2WCIu","JVkgMzE1","X21hbGxvYw==","Wkt3ZUY=","IDE5QCogMzA=","UEZ4Y28=","KS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4=","Y1hEZUk=","IDI5ME0w","IDE0IDA2IDE3IDA5","TGRSb1k=","VkZzTk4=","IDE4LjsgMDc=","IDI4RiggMjY=","UyAxMyAwNyY=","IDI0KSAwN18=","KiAwNiAwOSAxNQ==","Z0NISGQ=","IyAxNzhQ","aW94dlc=","I0szIDI4","IylTQg==","NSAxNSAxMSAwMQ==","OEA0IDA1","IDI2Li1j","MSAyNiAwMzg=","T2JVb24=","IDI3LSAxNSAyNQ==","bmF2aWdhdG9y","c2NyZWVu","YCAyMjY4","dGdaUlY=","WG1OQmY=","ZkdTSnM=","OyY7VA==","NDphIDMx","IDE4LjAm","SnFQS1Y=","S3NwUHg=","bFpEU1g=","YWdQREE=","MCAwMVQ6","IDE2VDdG","cG9zdFJ1bg==","PyAwMCxW","IDEyIDE2YFE=","Ozo2OA==","ISAwMSAxMyY=","V2RJT1M=","U1dwWHA=","Ik4gMDAt","PSs/Pg==","TFRaSXc=","dXRmLTE2bGU=","Ji0gMThH","bVB6SUE=","TDNUIDI1","bWFUVkg=","ZG9jdW1lbnQ=","IiYxVw==","KVMgMTc8","IDI0IkRY","REdOa0Y=","Z2V0TmF0aXZlVHlwZVNpemUgaW52YWxpZCBiaXRzIA==","IDMwY0wgMDg=","dG9Mb3dlckNhc2U=","IDE3SC9Q","U0R3WVg=","UXp5ZFE=","PERUUg==","VUNOWGI=","ZHluQ2FsbF92aQ==","elZPS3U=","IDIzYSAwMT8=","IDAxIDIyMydH","IDE3QUBR","KVo/MA==","UiggMTQgMTc=","R2JDUGE=","ckNMSEo=","VCAwNUMgMTg=","IDI2WCAwMEo=","UiAyNyAyMDw=","c09TSmg=","YnZGWnc=","Y2h4SUE=","LiAxNUUgMTA=","ZXZlcnk=","IDMxIDA4IDA0MA==","IDI4Yjgu","UE5pdU0=","R0VU","IDE1IDIwWCAyOA==","IDI5KEMi","LyAxMEFh","L1lJIDMy","IDI3IDEzLSM=","ZnFkaVY=","RlBIRnE=","OyAxNSAzMCAxOA==","Y2NWZ3M=","KVtVIDIx","SSZdTg==","dmZDUmI=","ISAwNCQgMDA=","dktwck8=","IDE4MyAwNT8=","UEF4d00=","IDE1OyAxNSAyOA==","LCAwNiAwNUA=","KiAzMSAwOTo=","Wm9RcFE=","WGdKdlE=","IDEzXC5I","alRrVG8=","Mz5CIDEz","JkkgMTBj","VUNRaEM=","THJaVnA=","UiAwNSAwN1E=","IDE2IDMwIDE3IDMx","IDEzIDIzIDIyUg==","aWxvdmVpcWl5aQ==","alZZSlU=","MVQ/IDI4","cmNrbHo=","MCAzMCAwMyAyMg==","TVFBdXc=","KzZfPA==","QSAyNUUgMjM=","IDE4IDE4Ky4=","IDExLF0p","S012Zm8=","IDIwIDAwIDE2LA==","KCAwMFlW","WCAyMzM3","Y1ZpVlI=","JyAyNVdf","IDE0OzI9","eUd1RWo=","ISAwNSAxNjQ=","R2JkRUQ=","IDIzIDE0IDE4Og==","TzAuLA==","c2tVT3k=","RihXSA==","QCAyMiAwM0w=","S3daYXI=","MzogMDIq","Nz4gMjMr","KCAwNlwgMDc=","UygzIDMx","bG9jYWxob3N0","OyAxNl0n","IDE2LUYgMjM=","IDMyIDA2IDEyIDIx","SUNvRE8=","VSAwMDNS","IDI4Y0te","IDIzLiU6","WW9yWlg=","SEVBUFUzMg==","R2JleHI=","YXJyYXlidWZmZXI=","LSAwMiI7","KFwgMDVS","WiAzMS4gMDE=","RlNNQ2w=","OyAxNl1G","PSAyOTxF","IyI8Uw==","IDAxIDE2IDE3YWA=","IDA3SyAxM2A=","QkFMbVQ=","IDIzXCAxNyAwNA==","cElPcGU=","VS0gMDBM","ViAwNEtH","MTsgMjggMTU=","IDAxIDIwNT1d","R2ZPckY=","IDI5RyAwOV4=","LzRXIDI4","QkNNa28=","TlZeXg==","IDMwIDI4UVY=","cE5kQmo=","MSQ8IDIx","S1JXWW4=","a1Z3ak0=","UyAyODsy","IDAxKiYyIDA2","VkFnemg=","UEh4eWo=","U1p6TU4=","SCAyOVBV","dkZqZHA=","aTMy","IDI3X1IgMjc=","KlUgMDMgMzI=","JyAwMiw2","T0Q4Sg==","IDI1VCAzMT8=","JC8gMjFB","IDIwLyAyNU0=","UF4gMzBj","IDI4RiggMDY=","ZnVuY3Rpb24=","bGFzdEluZGV4T2Y=","JEhZIDIx","Yy9aIDIz","QUhQZmw=","UywgMjcgMjQ=","IDEzRiAxNCAxOQ==","T2hJVE0=","JiAyNlxL","ZnJybEs=","IDAxIDIyUyAxMzw=","cHJlbG9hZGVkQXVkaW9z","IDE4VCAyMSAxNg==","NSAzMkk9","UVFZeUs=","IkgtIDE3","R1liY2Y=","IDE2IDMyIyAwNg==","endtZXY=","JSAyNU9U","IDEyVD8gMDU=","Ni0gMjQx","TG9rd2o=","SklYQmY=","bG9n","d2Fybg==","JCAwOCgl","bWVzc2FnZQ==","bG9jYXRlRmlsZQ==","IDE4VSAwMiAxMQ==","IS0jIDI4","IDI1Iihh","VmRMWno=","TCAxMlEgMjc=","LycyIDEw","MSAyN1AgMTc=","IyAyMzdC","RV4gMjAi","TmBCIDI4","WXFUWEc=","ISAyOCIgMzI=","IDI0WitD","MjlYVA==","RG1Pelk=","VCAxNyAwMk0=","RCAwMTwgMjM=","IDExTT0gMTk=","IDE1IDE4M0M=","Y1B3bEU=","YFQgMjY9","X2Vtc2NyaXB0ZW5fZ2V0X3NicmtfcHRy","IDE3KDJc","RWxJc2U=","OSAxNiAyMyAwOQ==","IDI3SCAwOCAwNg==","SmhWZUE=","IDIxNSAxOFg=","IDE4IDA5KS4=","TEhwTHg=","U0dLV28=","VDo0IDA0","JSAwNj4gMDQ=","UXluS0E=","X2k2NEFkZA==","IDI3IDEyJSAyNw==","eHZidlc=","YnFLVWs=","RXhpdFN0YXR1cw==","aFh2enE=","ZHFRV0w=","d053d1I=","UFJ1WVE=","a3hTQ1U=","JUBOIDI1","IDExIDE0IDAxNA==","OlggMzBH","UlVlaUs=","OT9bMA==","OiAwNyAyMzk=","NTdVIDAx","IDE2Pj4gMTM=","IDMxKkFV","IDE4LjAgMjQ=","RUg8Pw==","PDE6Uw==","JyVMQQ==","OlFGIDE0","IDIyIDAxIDE0Sg==","dG1qVUk=","LCAxMSIgMTI=","IDI3Oidd","aHRtbA==","LCAwMTAgMjc=","ZHluQ2FsbF8=","dlBFWU4=","IDE3JiAyNV4=","eGpia2I=","O1BWQw==","Y2xpZW50SGVpZ2h0","UWpGZHY=","LjggMjVg","IDE1IDE4NCAwNg==","LDc/Ng==","IDEzSyAxMjI=","ZG91Ymxl","TyAxOCIgMjU=","IDE0NzM3","cW9OYk4=","X21lbXNldA==","LCByZXRyeWluZyA=","LTNYWQ==","IDEyIDEwWF4=","IDMxJCAwMFM=","RUhSY2Q=","IDMyIDA4SVI=","Y2VpbA==","b25BYm9ydA==","IDI4TkggMDc=","J0leSg==","JF4wYg==","IDI2VyAxMlc=","M1ZfIDE1","aGVpZ2h0","IDI3K1lJ","KzIgMzAr","UHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCg=","bnVFaFk=","IDMyNVEgMjI=","TlhSPg==","IDA5IDEzV0s=","I1c0IQ==","SyAwMEg9","Lk86Og==","KSAgYXQgb2Zmc2V0IA==","Z0hjdEo=","JT1gUw==","KEBbYQ==","Jz8sYw==","RFVSRkY=","dmdUdlI=","NlMgMjRM","cHJvY2Vzczs=","Uj9iYQ==","IDE3MSAzMlo=","LCAxNicq","Il0gMDAk","P0BQIDE4","X2JpdHNoaWZ0NjRTaGw=","MzogMDFC","KyAwNEQgMTg=","KCAwMEBC","YXFEWlU=","PiAyNCAwNCg=","cHJvY2Vzcw==","aGV3clo=","IDMwIDEzIDEyIg==","IDE5XiAxOEs=","IDEyY0E9","VUhyV2Y=","Li90aGlzLnByb2dyYW0=","IDI3IDEyJVA=","cnFrRVk=","X21lbWNweQ==","cmVwbGFjZQ==","IjYnXw==","IDMxX1El","dXRmOA==","LmAgMDEh","ZElyZkk=","QCJRJQ==","IDExVVxX","IDE3WFBe","c3RhcnRzV2l0aA==","amdkeG8=","TWF0aA==","alFYTmQ=","WlFLZXQ=","VXhLZnA=","SmJkUlQ=","MVslIDI1","bFh2V3c=","eWRiUm8=","JScuIDA3","TE1xUnE=","TVVhd2s=","UyAwNyEgMjk=","aHJRUWc=","SEVBUFU4","IDEwIDE1XiAyNA==","WlluenM=","R3pSQVg=","KiAwOUBS","UlhMZ2E=","OyAxM1s1","ISAyMiVI","IDI1IDA5PiAyMw==","SUQlIDIy","IyAxOVVQ","IDE4IDA4QDE=","TlRwS08=","ZVJndHQ=","cHJpbnRFcnI=","QXNzZXJ0aW9uIGZhaWxlZDog","TiAwNFhR","LileIDAw","R3lZa1U=","IDE5LyAxNyAyNw==","dW5zaGlmdA==","IDIxUyAxNiAyNQ==","U3RHb2I=","IDMyRCAxMVw=","TmhtakE=","U05kcVY=","cExrc3k=","SU5OLg==","eUxSZm8=","KG5vIHN0YWNrIHRyYWNlIGF2YWlsYWJsZSk=","IDE3IDE5IDE3IDIz","eWRVU1A=","IDI2TyAyMU8=","R0JEb2I=","J0cgMTRT","I0EgMjIgMDk=","c2hvd24=","OiAzMENf","IzpbIDI4","Ilo4Mg==","Y3VycmVudFNjcmlwdA==","Nk03IDA5","PyAyNyAwOSAzMQ==","ekxLZ00=","cmVzcG9uc2VUeXBl","WUV4YUo=","I1EgMTEgMTU=","LEQvIDA3","Iy4gMDUgMTE=","R1dHaUM=","IDI3ViAyMUM=","IDIwVyAxMlw=","JSAyMTtQ","dkhodXo=","JVwgMTYgMTM=","IDI4OCxQ","IDI0IDI1IDMxKg==","SCcgMjM7","OlM7VA==","Y2FsbGVkUnVu","NV5AIDAy","IDE4XSAyMiAyMg==","R1hzRGM=","IDEwIDE2IDEyIDE1","LEw8XQ==","IDI1NSAwNDg=","UnNhWVo=","d0FjdWI=","IDI5IDA3JyE=","IDI1KSAwNiAwNw==","U1ViUQ==","I1EgMTBR","OT9aQw==","cWZmV0k=","I008OQ==","SiAwOVFO","IDE4LjAgMDQ=","V2hMd0Y=","R0YgMDUgMDc=","SCAxOSAyNFM=","Y1NISEE=","IDI5YiAwNiM=","IDE5TzQgMjY=","bXlLaU0=","Q2xkQ0E=","IDEyQyAyM1o=","IDE1SyAyN2A=","IDAxIDEzIDA3IDE2IDEw","TzAtWg==","IDIwJy1X","ITYnXA==","dU1uZ0Y=","c3RhY2tSZXN0b3Jl","ISAyNE9T","OiAxN1k/","IDAxRFk6IDE5","Lz1WNg==","IDI1NSAwNDc=","IDE2IDI1IDAwIDA3","IDEzWy9G","IzpcLQ==","RklZcVE=","JkQgMjUgMTc=","OCAxOSxd","ZUpTRE4=","UURxV3A=","NDg6IDE1","am9pbg==","aVVsS1E=","IDEzYyAxNiE=","cHJlUnVu","IDMwWCAzMSAzMA==","IDE1IDIzRyAyNw==","U3NmUk4=","IDAxIDE3IDMwTV4=","IDI2MklT","IDMxMzNB","IDExXTIy","SkdpaHQ=","IDE0PCAyMyAyOQ==","JiAwMyAzMjg=","MDMgMTEgMTU=","TVByQ1U=","S29oaG0=","c3Vic3Ry","K14gMjQ6","b25sb2Fk","MkY8Kg==","J2M6IDMw","LVlMIDI3","IDIxIDA0LCAwNg==","IDA5NSxQ","J1EgMDEz","b1hZY0g=","aW5kZXhPZg==","RVhRIDA2","Ij5DUg==","Iik/YA==","OSAzMi4k","OiAwMCpY","Oi8kIDE1","U1VjMA==","d2NEVEE=","LCBtYWtlIHN1cmUgaXQgaXMgZXhwb3J0ZWQ=","IDMwXFwy","ekVtbEc=","YlJDZkk=","IDAxIiAxMScgMDQ=","Rl0gMjMgMTU=","IDEwVEwgMDg=","KyAxOVpV","Q29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4=","d2tUVXQ=","TXdGZlY=","S3pmdUU=","ekZzaVk=","WlNscEU=","S253WG0=","KksgMzAgMDI=","c3RhY2tTYXZl","YWlBWWk=","bWxDWUc=","LmAgMDE2","KDYgMjMgMjQ=","IDEzIDEwQyo=","VSAyMyAxMjU=","IDAxIDE1Wz0gMjI=","IyAxOVUgMTk=","IT0gMjkgMjg=","IDIzYSAwMEk=","JFtWYw==","LVwxTQ==","IDA4IDE5LiAxNA==","PCktNA==","TypERQ==","VmBgKg==","SSAwMFBH","IDI3IDAzSyAwMw==","bVBDS0w=","O0FiVg==","VlB6WnY=","aTE2","IDE5IDA0IDE4IDI3","ME08Wg==","ZG9tYWlu","LlogMjQl","IDE1VyAyMEA=","SSAyOU1T","c2xpY2U=","IDE5YSAxOCAwMw==","IDIxIDMwIDA4Vg==","KT81Qw==","YXNt","IDAxLiAwMCAwNlA=","cmVnaVI=","IDMyTCow","UmtPVGo=","IDAxIDAyOzop","Uk5kWE4=","c2VuZA==","d016UXU=","IDI5U0tB","TC4gMDAgMDA=","bUp6dFQ=","USAxNUsgMDM=","YmluZA==","S1BIak8=","IDAxIDI2ME1T","dUV4V1k=","VUIkUA==","WEVBdnM=","IDAxIDI2S2Ek","IDI0IDIxKFM=","IDI2QkNf","Mj5BSg==","LVo2MQ==","IDAxJThLIDA1","TG9qWWY=","JiAwNi4gMjI=","anhuUkM=","Y21kNXhkYXNo","IDMwIDIwPC8=","YkxjaWg=","eHJQU2k=","Tyg2Rg==","O0NeTA==","LyAxOSAwNiAwNA==","ITxDQw==","MyAxOCAxNTo=","eHFaaXY=","dUZTRVg=","JEVcSw==","RkUkIDIx","LklbOg==","IDE0NzQy","eG1IcEQ=","MScuUg==","RGxuSng=","PVw5Vw==","JCcgMjUgMjM=","I14gMDY8","bGVuZ3Ro","JyAxOS1Q","Vk9OUVQ=","LFwgMjJB","Y29uY2F0","ZXJzUXc=","WyAwNUVO","SGdtUkk=","IDI3SyAwNUQ=","Z3NVZ0U=","IDEwOiJN","PUdiIDAy","SEVBUDE2","IDE2LUYi","dGhpc1Byb2dyYW0=","IDI4IDA5IDI1IDMy","PVRhIDEw","LycyKA==","RlhsZU8=","PSAwN1Ey","JCAyNS4/","dUF3TVI=","bnpzZ0Q=","JUBWIDI4","Y0dFWkQ=","Vlpwc08=","IUpGOw==","IDE0PCAyMyAyOA==","JDhcQA==","IDMxPkZQ","IDI4QlA0","UnpZbmg=","Jj1KNQ==","NE8gMDdG","IDMyNiAxNyY=","LGFVIDEw","LyAxMSAyNVQ=","LVJiIDI5","c2V0","Wk1OYVI=","IDEyYSAyOF0=","YiAxOUggMjk=","JiAyOD9S","aWNUZWc=","bmFtZQ==","YlZFVUw=","Y2xpZW50V2lkdGg=","IDI0XSAxOSc=","IDE1OyAxNEc=","S0shIDE1","IDI4IDI1IDI1Rw==","SWNFcVY=","d1h5Wkg=","OlMgMDg8","dGl0bGU=","IDEzNlUk","IDI4OUNM","OyY6Uw==","a2hPSUE=","LCB0eXBlIA==","I0szIDA5","VCAxNyAwMj0=","IDMxY0QgMTk=","SGFtTUM=","IDMwMUhJ","ZnJvbUNoYXJDb2Rl","OlEgMTQ8","IDIwIDEwSy0=","IDE2RV42","IDE2IDA1IDA3OQ==","RSAyNihK","YyAyNist","WlpYSEc=","RiAwM0FU","IDMxVyAwNis=","IDE5VmFh","IyAyOCAxMyAyMQ==","IDIwIDEwTCAxOA==","IDAxIDA1IDMyOFI=","ZFVQclM=","Q2hhcmFjdGVyIGNvZGUg","IDI4SF4p","RFJkamw=","SlhyVGQ=","IDI4XFBP","IDE2P2AgMDY=","IDI1JUdi","IDE1IDIwVyAxNw==","OCAwNTsgMTA=","KicgMjYgMTM=","TGVDeFY=","YllqZWQ=","YWZXTkM=","IDIxIDAzP0w=","IDIwVyAzMEo=","ZGVjb2Rl","YkQgMzBh","IDE0VmMj","QzEnVQ==","IDE4NyAyMFo=","ZHd3dnA=","cHNTVnI=","IyAxOUBL","Q2ppc1I=","ald4Sm4=","Zmxvb3I=","IDMyIDE2IDIzJg==","S1pkbUo=","RUhHd1Q=","MyAxN0hU","LSggMTRA","dXR0UkQ=","aHJlZg==","IDAxQSAzMSNY","cmRzSW0=","ZWNubEQ=","bGt0eU8=","IDMxSigi","NicgMDggMjM=","IDE2XCsr","dW5kZWZpbmVk","O0YgMDZP","RHhWU3U=","MSggMTJF","YlVKaUo=","IDIwIDAwIDE2PQ==","IDE0NCAxNVo=","ZEdYc0I=","IDE2IDAwJEs=","IDI2IDAxKVY=","IDIwSiAxNU4=","MkY8JA==","QnF6ZVc=","L1YgMTVb","bEhLZVc=","JypTNw==","KCAwNDogMjg=","ZkFEelY=","IDA5Qj0q","IDIwIDIxI2M=","OTcjSA==","WHFJa0c=","bEh5SEk=","IDExR1g3","IS4gMDMgMDg=","RCg8Kw==","JFUgMjgm","IDMyRCAxMSAwMA==","KyhKNg==","IDI3OyAwMWA=","QEdPWg==","VHppWWM=","WUhZTGk=","IDI0YCAxNSw=","IDI4RCAwMWA=","Il5CQg==","Y1hST28=","Uk1kVFQ=","IDE5IlBR","JSAxNlEgMjc=","KiJDYQ==","KiAxNE44","bHdlY04=","IDE2NCAwMl4=","RHlwRm0=","IDIwIDEwSzM=","IDIwPiAyMyc=","IDE5RSI2","SiAwMiAwOE4=","OSAxNjo+","Y2FsbA==","IDE2P186","KiQgMTggMTQ=","IDE1Ny4gMDE=","bWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0VVJM","J08gMDkq","QXlacEQ=","IDIwMk1J","JGJGIw==","IDI4IDA4OSAwNA==","YmlBQWg=","IDI2IDExRCc=","Tk1Pam8=","S0shIDMx","YmVWbms=","TzlbSQ==","SjUgMzAgMjk=","ITYnJg==","U2l0b0U=","IDExIDE0IDAxNg==","MyAyMVgn","d3ZDRGY=","UGZMZ1E=","VUxKd3o=","IDEwODggMDg=","cHVzaA==","aG9zdG5hbWU=","IDE4VCAyMiAyNw==","X2NtZDV4","IDAxIDAzLWMl","IDExIDE2TDs=","RT8mTg==","IDIzPCAwOCAyNQ==","IDI0IkYgMDA=","J1tDKg==","IDI5L1gz","RHBtUUw=","b3Vwd2w=","IDI5IDExIDA1IDA2","cWxhTkM=","SFpKS1o=","QyAwMCAzMiAyOQ==","ODVaMg==","NWJCNA==","UmFvVFA=","IzhRIDE5","IDE1VyAwMEQ=","PTw7IDEy","KiAyMSAxOWM=","IDMxIDE2IDAzNQ==","YWJ1REM=","KDcvYQ==","IDAxIDI0OzUgMjI=","S3h5QVU=","IDAxIDA2IDA1TiAxMw==","IDIwNCAzMEg=","MlMgMTJC","aGN3YlQ=","IDI3XCAzMCs=","TCAxMlEgMjI=","aFN0WmI=","aG9tZU0=","IDMwJCAzMjo=","RllUdHk=","UCAyNCAwMT0=","LiAyNkU4","U1ogMTAx","eWNLenY=","SyAxOCAwNj4=","IDI1IDAxIDIyWA==","IDI0WjE7","JFUgMjda","TCAyOCAwMyAzMQ==","eHNOa1g=","IDE3LVwv","ZmxvYXQ=","IDMwRSAyM0w=","aE1BZms=","IDIzRi5f","aGJhdkY=","IG5vdCBpbiAweDAwLTB4RkYu","U2VGSmg=","YWJvcnQo","IDE0PCAyMjQ=","bkJhT2E=","J0leIDI1","UCAyMSVd","IkxSIDE4","IDMwUlxX","d3FyS3E=","bXZkdW8=","VVZhdnM=","RVdrZ1I=","elFGdEQ=","UkxNVW8=","cUhodHQ=","LF8gMDcgMDQ=","SlggMDBK","Q2hJc0w=","JDU+Jw==","Z01HVkg=","V1RYQUw=","IDEwWyAwNSAwMg==","VyhMIDAy","MzI5WQ==","IDAxIDEyLjJQ","JTEgMTJj","IDA4OVogMDc=","SEVBUEYzMg==","KyAxNyAwNSg=","Y2JEckg=","JCAwNTZL","cHJlSW5pdA==","eVNBWk4=","IDE0PSg+","IDI2OiAxOCAyNw==","NSAxNSAxMCQ=","c0hjYlk=","IDMxIDA3IDAyLg==","R2lBdnA=","IDE2IDAwJCAyOA==","QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0=","IDA4KUogMTI=","TldSZnY=","IDA2IDA0KSAxNg==","IDE3KCRQ","Ynl0ZUxlbmd0aA==","IiAyNSox","Zmppb0c=","JSAwMmNP","IDE3IDE1VyAxNw==","YXRxbnc=","YmxWaUg=","S1RGIDA4","VUJ3UWk=","SWNOZmM=","YVpFQ3I=","Y3dyYXA=","IDIzIDI4IDEzPQ==","NiAxNyAyMEo=","KUpBIDE1","IDA5Qy0gMTg=","Y2x6MzI=","IDIzRlcgMjk=","IDIyTiAyMUY=","RldkSm4=","IDE3UVxI","dEdHYUk=","IDE2IDEzRT0=","IDE5Ik4gMTY=","bkZEbUk=","IDE4YlhO","ak1jbU0=","UHBoWGE=","PiAxOU4k","d1dNTHc=","MF9LIDI0","MzNRWg==","IiwgMjVC","SEV3dUs=","IDMwIDA2OiAxNg==","cXpFcmU=","MDMgMTFX","Tm56Z3Q=","IDIzXzhP","ek9abFM=","UmZ1Q20=","YUVKUGI=","YXNjTWw=","QycgMjAgMzA=","R0YgMDYgMDI=","LCAxNicgMTc=","IDI0IDIyLzo=","ND8+Tg==","LyAyNiAwNGE=","K14gMjUgMjM=","XDpIYA==","IDE1RiAxNiAyOQ==","WVhoWmQ=","IDE4NU8v","Mkk/Yg==","eFZwZHU=","S0EgMzEgMjA=","J2I/IDMx","UU5ud2k=","Vz4uYQ==","IDAxNCAwOUM+","S0sgMzJK","IDAxIDA5IDA3MyAxOQ==","VHNRTWw=","SEVBUDMy","QFwjLg==","P1csIDA3","KSAwMSAyMys=","dGlvcVo=","bWdndXE=","IDE1LydY","QEsgMjI4","aGlzdG9yeQ==","cW9KUVo=","IDMyJ0RN","QnZhUGg=","KiAxN0dM","SDZFNA==","bWVtb3J5IGluaXRpYWxpemVy","IDAxLDAtTQ==","STQgMDFL","QURQVW4=","SCAxOSAyNFA=","IDIyYUZM","c2hpZnQ=","Rm5NelY=","OFEgMThI","REduRGI=","NCdXIg==","QiAxMSAxNSAwNw==","I2IgMjJP","Y29weVdpdGhpbg==","IDMwIDA4IyAzMQ==","clhDaFU=","IDI4KVEgMjk=","PSAxMjdH","NSAwM1sgMDk=","KiAyMSAyMDc=","cXJldnY=","IltUSQ==","NSAyNCAyNyAxNg==","Q2IvXQ==","MzpOIDE0","YmtRTHo=","IVIgMThb","IDE0PSggMjM=","IDIyVGI/","IDE4IDI5YFQ=","IDIxIDExIDE2IQ==","IDI5IDEwKSAxMQ==","bk5sbVE=","bFBQbmQ=","LSAwN0EgMjE=","eVZSVE4=","cWRz","IDE5IlAgMDU=","IDExRDVX","ZHRic2Q=","c3RhY2tBbGxvYw==","IDA5XiAzMTE=","b0RhTVU=","NiAyMEggMDg=","IDI3MDRV","Rk15S2E=","IDI2SWBQ","IDI0PzZB","RnFFeW0=","QiAyOFY4","PU09IDIz","Q0luZ3Q=","IDE5IDA0IDE4Wg==","IDIyKy8gMTQ=","PC1ASQ==","ZlRZR0M=","bkxZS2w=","IDI4KTxc","eHpmQ0M=","bXNxZ1g=","ZHluQ2FsbF92","aUdRUHM=","L1kgMDIgMjQ=","a1NraXU=","NyAwOTAgMDQ=","dWxtZnI=","ZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LA==","RWluV3I=","X19fZXJybm9fbG9jYXRpb24=","SiAyMSAwMVE=","QCYgMDlU","UkxZU1k=","IDE1IDI0Kio=","IDE2Wl4gMTM=","Tm5HR3g=","d2FzbUJpbmFyeQ==","UHhWakE=","a0NVUGI=","OE9XIDAy","a3NhdmY=","IDExOVhI","JSE1IDEy","IDE3IDMwQzY=","aHdRQWw=","KUpBJw==","QmEgMjAm","ZFhjUUw=","amlNZ3A=","IDA5IDExWic=","QiAwOCQ2","SW50MzJBcnJheQ==","IDIwVyAxMV8=","ZWhIcE8=","W0NSRw==","RyAxNF4gMjM=","cWNVVnA=","aGFzT3duUHJvcGVydHk=","RnRoVWo=","IDI1IDA0R1A=","KyAyN0Bi","IDE0PCAyMyo=","SSAwM0YgMjA=","cHJlbG9hZGVkSW1hZ2Vz","Y3JUbUw=","IDEwIkBB","PyAwNSAxNyAxMQ==","KDdCSg==","IDEyWiogMDM=","R0Rhd2Q=","IDIwVyAzMFQ=","bWlu","Wk93SGY=","aTY0","SEVBUEY2NA==","LkRMIDA2","Vk1EIDMx","Q1Z3ZEQ=","KiAwODMw","IzggMjQgMjM=","YkN6c04=","V3BMaXA=","blBDcWo=","cnVu","c3RhdHVz","cm5UTHA=","IDA3OyAwMkg=","IDE3LVxh","QFJaMw==","IDIwVCAxNiAwMw==","Y291bGQgbm90IGxvYWQgbWVtb3J5IGluaXRpYWxpemVyIA==","WCAwMiAxMjQ=","ZFprQnc=","YCAzMUYgMDg=","ZUxTZHo=","JSMgMzIgMjU=","IDE0PCAyMjo=","SFJzc04=","U3dCZnI=","IDI3SCAwN0M=","IDE1Ny09","bW9vaW4=","Y2hBWnc=","Sld4aGY=","IDI5MyAyOSAwNg==","RSAzMCAxOSAyOQ==","IDE1IjQgMjc=","QyAwNjtF","R0pqb04=","cWRfdg==","YXRFV1c=","Y2hhckF0","P0ogMDAgMjM=","LjsgMTUl","JTVEVw==","IDIwIDI4PSAwOQ==","MitWYQ==","QU9MWEE=","PSxeWw==","OiAxNFwgMTg=","cG53Vmo=","NjwgMjZP","JiAxNiAwNkE=","SlZTWFg=","IDI1OSAyOCAzMg==","UXJ0Z0k=","d2lkdGg=","WkVza0g=","VWJpV28=","T09N","YWJz","V1VEZEU=","IDE3YyAwMy0=","IDMwIDE5NCAwMA==","SHJpWW8=","b1NscE4=","R0YgMDUgMDE=","JEAgMjUgMjE=","WEV5d3k=","WVlRemk=","IDAxIDAyIDA4SkQ=","IDEzIDI0XkU=","LyAxOSAxMFM=","TmVWdHM=","c3RyaW5n","KyMgMjhK","Vktydm0=","UkZOaUk=","bEZwZEo=","JyVNKQ==","V3ZwbmM=","SEVBUFUxNg==","YWRkRXZlbnRMaXN0ZW5lcg==","KCkxIDEz","IDI4N1Y7","IDI3WikgMTA=","T0xZUGc=","R0FwV3M=","ZnhiVWU=","IDI0IDEyTlg=","LCAxNicgMjA=","YkdTTHE=","PCFPKA==","Z1F4a08=","LlBFJg==","XSQ6IDAx","PiAwMkZW","IDMxIDA3IDAzIg==","KCFdIg==","O1lGXw==","UFhFc0Y=","JVBgSQ==","MVQ+SQ==","RWZ1RXM=","SWJTTE0=","QE48Xw==","IiAxMSAwNSw=","TEZCQVM=","IDI2Lig0","V3ZrQXE=","KCAxNSAxOCAzMQ==","UydiIDA5","TUxaSmM=","IDIzLiUgMjg=","W10jMA==","UExyRHU=","OScgMTUi","TGJ0bWY=","IDE5IDI4PCAyMw==","IDIxIDA0IDA3IDA2","KTQgMjUy","Ym9keQ==","IDE2IDA1IDA3IDE2","IDExIDEzNl0=","MV5aIDE1","RUNod0k=","IyNiIDEz","R0tYS1c=","LiNHMA==","aUNReHk=","YXVCRVM=","QUQ8IDI1","IDE2IDAxNCAyOQ==","ZnVuY3Rpb24lMjBqYXZhRW5hYmxlZCUyOCUyOSUyMCU3QiUyMCU1Qm5hdGl2ZSUyMGNvZGUlNUQlMjAlN0Q=","QmRITVI=","LSAxMiAwOEw=","cXVpdA==","amF2YUVuYWJsZWQ=","IDI5JSogMTE=","ViAwMyVG","UEpoQ0k=","ZG9jdHlwZQ==","VlloSnc=","eFBoeVM=","VEZNSFk=","c3ViYXJyYXk=","bGJtR2s=","IDI3MDQ1","UHRqWmI=","YSBwcm9ibGVtIHNlZW1zIHRvIGhhdmUgaGFwcGVuZWQgd2l0aCBNb2R1bGUubWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0LCBzdGF0dXM6IA==","SFJTdVo=","IDAxIDE0JyAyODs=","WmRPWWo=","cHdNSUI=","IDMxIDE3IDI4QA==","IUdZIDE3","IDAxIDMwXyMgMDI=","dEtReXc=","clV2SE0=","RyAxMz0gMTQ=","JT4gMjg6","JiAzMCAwN0Q=","b2trVGU=","aW52YWxpZCB0eXBlIGZvciBzZXRWYWx1ZTog","IDEwIDE2TiAxNQ==","KjsgMjMx","RUVITGE=","V3ZlTUw=","MDcgMjQgMDQ=","IDI3Rj4gMTc=","IDI2QkQy","enJQdVY=","bEF4Z1o=","bWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0","NiAxOSAzMTk=","dGZrWmY=","IDA3IDExMU4=","PyAxOFYgMjU=","VldMSE8=","RUJCb3U=","bWpzWFE=","IDMxIDI3MT4=","dXJidlY=","IDI1KlI3","SW50OEFycmF5","IDE3TExJ","MD43Yg==","TU4gMTY3","TklUQVA=","TWFWSUE=","IDE3TCAzMlM=","Zk12V3Q=","IDIyX1RT","KUpOIDE4","MDcgMjQgMjc=","ZnVuYw==","RyAwNiAwNWE=","Ym9vbGVhbg==","WWdEQVg=","IDAxIDAwRCAyMUQ=","IDMyLFEgMjI=","Qm5lRFA=","RGZxU00=","IDIxSiAwOSAxMg==","IDExIUAgMTY=","Z2V0VGltZQ==","OCAxMFggMjU=","O0IgMzEgMDY=","IDE3M1MgMjI=","JGM/Xg==","NSAyMiAxMzg=","bG9hZA==","IDA4IDMwMEE=","IDAxIDExIDMwIDAwMw==","QyAxNTwz","WyAyMyUgMjU=","elNrcno=","ZEJZRU8=","IDE2XVZJ","aHViVGk=","bW9uaXRvclJ1bkRlcGVuZGVuY2llcw==","JFEgMDQ0","KVcgMTRA","YXdwZHg=","ZEZrVEY=","LV5XWQ==","Ilo5IDI3","IDE2QzIy","RlIjIDI0","VF02JA==","TExXTkU=","IDEyRyEt","OksgMDFJ","IDE3JCAzMEA=","QmNwV0I=","IDE2IDIwIDA2IDI1","IDI3SSRE","SHVUQ0k=","IDMwIDE4W14=","SGt4VEg=","IDI4IDI3IDEyYA==","Q2RRdXk=","Y2h0R2U=","KEMoIDA4","IDMxQCAyODs=","ZEdrU1U=","MiAyMDcgMjA=","IDE1OCAyNzk=","aXlaQk0=","I1wgMjYgMTU=","IDE2IDIwIDI2IDEw","YnpjcGQ=","IDEzLiAyNVo=","NFkgMTVE","QXlpZ1M=","JiAxN2MgMTE=","IDE5Njg1","IDE3MSFJ","YXpkQWc=","dXNlckFnZW50","IDMxIUFE","SE1HZk4=","KE9aMg==","QXBsdms=","KzIgMzAgMjA=","IDEwIDEyWy0=","IDExWTJb"],a,b;a=_qda,b=203,function(e){for(;--e;)a.push(a.shift())}(++b);var _qdb=function(e,t){var n,r=_qda[e-=0];_qdb.MrGYgn===undefined&&((n=function(){var e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e}()).atob||(n.atob=function(e){for(var t,n,r=String(e).replace(/=+$/,""),i="",a=0,o=0;n=r.charAt(o++);~n&&(t=a%4?64*t+n:n,a++%4)?i+=String.fromCharCode(255&t>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i}),_qdb.nZmPbu=function(e){for(var t=atob(e),n=[],r=0,i=t.length;r<i;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)},_qdb.mfQYOn={},_qdb.MrGYgn=!0);var i=_qdb.mfQYOn[e];return i===undefined?(r=_qdb.nZmPbu(r),_qdb.mfQYOn[e]=r):r=i,r};function _qdc(){var d=function(e){if(_qdb("0x2f8")!==_qdb("0x4ee")){for(var t in e)if(_qdb("0x1cd")===_qdb("0x299"))for(var n=0;n<args[_qdb("0x319")];n++){var r=toC[argTypes[n]];r?(0===stack&&(stack=bk()),cArgs[n]=r(args[n])):cArgs[n]=args[n]}else if(e[_qdb("0x4ef")](t))return!1;return!0}try{throw new Error}catch(i){B=i}if(!B[_qdb("0x6cc")])return _qdb("0x245")},e=function(bt){if(_qdb("0x410")!==_qdb("0x5db"))return eval(bt);u=u[_qdb("0x2a4")](0,u[_qdb("0x16e")]("/")+1)},f=null,g=function(e){if(_qdb("0x39d")==_qdb("0x39d")){if(!f){if(_qdb("0x56c")!==_qdb("0xd"))return _qdb("0x118");var n=str[_qdb("0x687")](++i);u=65536+((1023&u)<<10)|1023&n}var r="",a=a3(e),s=bf(a+1);a2(e,s,a+1);var c=f(s);if(bd(s),c){if(_qdb("0x77")===_qdb("0x1f7"))throw new Error(_qdb("0x2bf"));r=a0(c),bd(c)}return r}o=0|b4[f+8>>2],b4[o+12>>2]=t,b4[t+8>>2]=o,y=t},h=function(){if(_qdb("0x52e")==_qdb("0x52e")){var e={};e[_qdb("0x523")]=2,e.tm=(new Date)[_qdb("0x5c9")]();var t=window;if(typeof t[_qdb("0xba")]===_qdb("0x391"))_qdb("0x17d")!=_qdb("0x17d")?e[_qdb("0x63d")]=_qdb("0x581")===escape(t[_qdb("0xba")][_qdb("0x585")][_qdb("0x15")]())?"a":"i":e[_qdb("0x63d")]="u";else{if(_qdb("0x559")!=_qdb("0x559"))return _qdb("0x245");e[_qdb("0x63d")]=_qdb("0x581")===escape(t[_qdb("0xba")][_qdb("0x585")][_qdb("0x15")]())?"a":"i"}for(var n in e[_qdb("0x4b3")]=0,t)_qdb("0x508")!=_qdb("0x508")?(v=Z+f|0,b4[_+4>>2]=3|v,i=_+v+4|0,b4[i>>2]=1|b4[i>>2]):t[_qdb("0x4ef")](n)&&(_qdb("0x67c")!==_qdb("0x59a")?n=n[_qdb("0xdf")]():x(aJ,bm,(function(){throw new Error(_qdb("0x510")+aJ)})));return e}ja=pa+1048320|0,_=ja>>>16&8,ja=pa<<_,pa=ja+520192|0,Z=pa>>>16&4,pa=ja<<Z,ja=pa+245760|0,ia=ja>>>16&2,ja=pa<<ia,pa=14-(Z|_|ia)+(ja>>>15)|0,ja=pa+7|0,Ja=1&(ja?d>>>ja:d)|pa<<1},i=function(){if(_qdb("0xc5")==_qdb("0xc5")){var e=h();return e.tm=parseInt(e.tm/1e3),e}p+=-33014};if(exports[_qdb("0x688")]=g,exports[_qdb("0x304")]=h,exports[_qdb("0x6c7")]=i,typeof ArrayBuffer!==_qdb("0x391")){var j={};j[_qdb("0x7b")]=32768;var k=j,k=typeof k!==_qdb("0x391")?k:{},l={},m;for(m in k)if(_qdb("0x160")!=_qdb("0x160"))u0=(15&u0)<<12|u1<<6|u2;else if(k[_qdb("0x4ef")](m)){if(_qdb("0x290")!=_qdb("0x290"))return Y[_qdb("0x378")](heap[_qdb("0x58d")](idx,endPtr));l[m]=k[m]}var n=[],o=_qdb("0x20c"),p=function(e,t){if(_qdb("0x64b")==_qdb("0x64b"))throw t;ra=0,O=143},q=!0,r=!1,s=!1,t=!1,u="",w,x,y,z;if(q||r)if(_qdb("0x1ab")!==_qdb("0x4a")){if(r)_qdb("0x152")===_qdb("0x459")?p+=-22081:u=self[_qdb("0x87")][_qdb("0x389")];else if(document[_qdb("0x250")]){if(_qdb("0x569")!=_qdb("0x569")){var bx=aR(x);return x===bx?x:bx+" ["+x+"]"}u=document[_qdb("0x250")][_qdb("0x4c")]}if(0!==u[_qdb("0x2ae")](_qdb("0x4d")))if(_qdb("0x32b")!==_qdb("0x2da"))u=u[_qdb("0x2a4")](0,u[_qdb("0x16e")]("/")+1);else{var by=aF;aF=null,by()}else{if(_qdb("0x610")===_qdb("0x553")){var bz=h();return bz.tm=parseInt(bz.tm/1e3),bz}u=""}if(_qdb("0x517")===_qdb("0x43e"))return s(0|b6,0|d,0|e),0|b6;w=function(e){if(_qdb("0x641")!==_qdb("0xd7"))try{if(_qdb("0x4f6")!==_qdb("0x395")){var t=new XMLHttpRequest;return t[_qdb("0x6bc")](_qdb("0xf9"),e,!1),t[_qdb("0x2ef")](null),t[_qdb("0x9c")]}p+=-720}catch(i){if(_qdb("0x45e")!==_qdb("0x3ff")){var n=b3(e);if(n){if(_qdb("0x672")==_qdb("0x672"))return b0(n);b4[4]=F|b6,b4[l>>2]=m,b4[m+24>>2]=l,b4[m+12>>2]=m,b4[m+8>>2]=m}throw i}for(var r=0;r<str[_qdb("0x319")];++r)a8[a7++>>0]=str[_qdb("0x687")](r);dontAddNull||(a8[a7>>0]=0)}else pa<<=1,ja=_},r&&(_qdb("0x665")!==_qdb("0x38d")?y=function(e){if(_qdb("0x340")===_qdb("0x2c8"))return String[_qdb("0x51")][_qdb("0x219")]?str[_qdb("0x219")](prefix):0===str[_qdb("0x2ae")](prefix);try{if(_qdb("0x52b")==_qdb("0x52b")){var t=new XMLHttpRequest;return t[_qdb("0x6bc")](_qdb("0xf9"),e,!1),t[_qdb("0x254")]=_qdb("0x141"),t[_qdb("0x2ef")](null),new Uint8Array(t[_qdb("0x63b")])}p+=6507}catch(r){if(_qdb("0x6c0")!==_qdb("0x4cc")){var n=b3(e);if(n){if(_qdb("0xcf")==_qdb("0xcf"))return n;n[_qdb("0x441")]&&(n=new Uint8Array(n)),a9[_qdb("0x33f")](n,N),k[_qdb("0x5a9")]&&delete k[_qdb("0x5a9")][_qdb("0x63b")],aH(_qdb("0x48f"))}throw r}aJ=v(aJ)}}:a7=new ArrayBuffer(ak)),x=function(e,t,n){if(_qdb("0x119")!=_qdb("0x119"))p+=27466;else{var r=new XMLHttpRequest;r[_qdb("0x6bc")](_qdb("0xf9"),e,!0),r[_qdb("0x254")]=_qdb("0x141"),r[_qdb("0x2a6")]=function(){if(_qdb("0x27b")===_qdb("0x3f8"))document[_qdb("0x34f")]=title;else{if(200==r[_qdb("0x50a")]||0==r[_qdb("0x50a")]&&r[_qdb("0x63b")]){if(_qdb("0x303")!==_qdb("0x6ce"))return void t(r[_qdb("0x63b")]);F[_qdb("0x24c")][text]=1,B(text)}var i=b3(e);if(i)return _qdb("0xbe")===_qdb("0x21d")?528:void t(i[_qdb("0x38")]);n()}},r[_qdb("0x62e")]=n,r[_qdb("0x2ef")](null)}},z=function(e){if(_qdb("0x446")!=_qdb("0x446"))for(h=g-4|0;(0|b6)<(0|h);)j[b6>>0]=0|j[d>>0],j[b6+1>>0]=0|j[d+1>>0],j[b6+2>>0]=0|j[d+2>>0],j[b6+3>>0]=0|j[d+3>>0],b6=b6+4|0,d=d+4|0;else document[_qdb("0x34f")]=e}}else k[_qdb("0x1e1")](what);var A=k[_qdb("0x5d")]||console[_qdb("0x185")][_qdb("0x2f5")](console),B=k[_qdb("0x236")]||console[_qdb("0x186")][_qdb("0x2f5")](console);for(m in l)_qdb("0x4eb")!==_qdb("0x420")?l[_qdb("0x4ef")](m)&&(_qdb("0x684")!=_qdb("0x684")?(aZ&&T(!1,_qdb("0x369")+chr+" ("+String[_qdb("0x35a")](chr)+_qdb("0x1f2")+i+_qdb("0x413")),chr&=255):k[m]=l[m]):k[_qdb("0xe5")](func,callback[_qdb("0x6a4")]);l=null,k[_qdb("0x2b")]&&(n=k[_qdb("0x2b")]),k[_qdb("0x327")]&&(o=k[_qdb("0x327")]),k[_qdb("0x584")]&&(p=k[_qdb("0x584")]);var C=16,G=1,H=new Array(0),I={},K=0,L=function(e){if(_qdb("0x102")!=_qdb("0x102")){for(var t=[],n=0;n<array[_qdb("0x319")];n++){var r=array[n];r>255&&(aZ&&T(!1,_qdb("0x369")+r+" ("+String[_qdb("0x35a")](r)+_qdb("0x1f2")+n+_qdb("0x413")),r&=255),t[_qdb("0x3dc")](String[_qdb("0x35a")](r))}return t[_qdb("0x293")]("")}K=e},M=function(){if(_qdb("0x30e")!==_qdb("0xf8"))return K;l[_qdb("0x4ef")](m)&&(k[m]=l[m])},N=8,O,P;k[_qdb("0x4da")]&&(O=k[_qdb("0x4da")]),k[_qdb("0x6b1")]&&(P=k[_qdb("0x6b1")]);var R=!1,S=0,X=3,Y=typeof TextDecoder!==_qdb("0x391")?new TextDecoder(_qdb("0x213")):undefined,a4=typeof TextDecoder!==_qdb("0x391")?new TextDecoder(_qdb("0xd3")):undefined,a7,a8,a9,aa,ab,ac,ad,ae,af,ah=736,ai=4832,aj=528,ak=k[_qdb("0x7b")]||16777216;k[_qdb("0x38")]?_qdb("0x3d9")===_qdb("0x6c4")?p+=31715:a7=k[_qdb("0x38")]:_qdb("0x4a3")!==_qdb("0x4")?a7=new ArrayBuffer(ak):(b4[3]=_|ja,Ha=pa+8|0,Ia=pa),ak=a7[_qdb("0x441")],ag(a7),ac[aj>>2]=ai;var am=[],an=[],ao=[],ap=[],aq=!1,ar=!1;Math[_qdb("0x69f")]&&-5===Math[_qdb("0x69f")](4294967295,5)||(Math[_qdb("0x69f")]=function(e,t){if(_qdb("0x6a0")!==_qdb("0x63a")){var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16)|0}da=P,ea=m}),Math[_qdb("0x451")]||(Math[_qdb("0x451")]=function(e){if(_qdb("0xd5")==_qdb("0xd5")){var t=32,n=e>>16;if(n&&(_qdb("0x601")!=_qdb("0x601")?(t-=4,e=n):(t-=16,e=n)),(n=e>>8)&&(_qdb("0x4e5")!==_qdb("0x12b")?(t-=8,e=n):(Z=d,b4[(d=d+4|0)>>2]=7)),(n=e>>4)&&(_qdb("0x14d")!==_qdb("0x1a8")?(t-=4,e=n):(ret_str=a0(p_ret),bd(p_ret))),n=e>>2){if(_qdb("0x14b")===_qdb("0x402")){var r=k["_"+ident];return T(r,_qdb("0x64e")+ident+_qdb("0x2b7")),r}t-=2,e=n}return(n=e>>1)?t-2:t-e}return o(b4<<b6|(j&(1<<b6)-1<<32-b6)>>>32-b6|0),j<<b6}),Math[_qdb("0x3")]||(Math[_qdb("0x3")]=function(e){if(_qdb("0x275")==_qdb("0x275"))return e<0?Math[_qdb("0x1e0")](e):Math[_qdb("0x382")](e);k[_qdb("0x4cb")](func)});var az=Math[_qdb("0x538")],aA=Math[_qdb("0x1e0")],aB=Math[_qdb("0x382")],aC=Math[_qdb("0x4fd")],aD=0,aE=null,aF=null;k[_qdb("0x4f5")]={},k[_qdb("0x178")]={};var aJ=null,aL=_qdb("0x4d1"),aN=_qdb("0x6bb"),aO,aP,aQ=720,aY=Uint8Array[_qdb("0x51")][_qdb("0x49c")]?function(e,t,n){_qdb("0x49e")!==_qdb("0x385")?a9[_qdb("0x49c")](e,t,t+n):(j[b6>>0]=0|j[d>>0],j[b6+1>>0]=0|j[d+1>>0],j[b6+2>>0]=0|j[d+2>>0],j[b6+3>>0]=0|j[d+3>>0],b6=b6+4|0,d=d+4|0)}:function(e,t,n){_qdb("0x6ad")!==_qdb("0x253")?a9[_qdb("0x33f")](a9[_qdb("0x58d")](t,t+n),e):(b4[ua+16>>2]=g,b4[g+24>>2]=ua)},aZ=!1,b1=typeof atob===_qdb("0x16d")?atob:function(e){if(_qdb("0x41c")!==_qdb("0x512")){var t,r,i,a,o,c,u=_qdb("0x43c"),d="",f=0;e=e[_qdb("0x210")](/[^A-Za-z0-9\+\/\=]/g,"");do{if(_qdb("0xe1")==_qdb("0xe1"))t=u[_qdb("0x2ae")](e[_qdb("0x525")](f++))<<2|(a=u[_qdb("0x2ae")](e[_qdb("0x525")](f++)))>>4,r=(15&a)<<4|(o=u[_qdb("0x2ae")](e[_qdb("0x525")](f++)))>>2,i=(3&o)<<6|(c=u[_qdb("0x2ae")](e[_qdb("0x525")](f++))),d+=String[_qdb("0x35a")](t),64!==o&&(_qdb("0x5f4")===_qdb("0x449")?(n-=16,x=y):d+=String[_qdb("0x35a")](r)),64!==c&&(_qdb("0x1b9")==_qdb("0x1b9")?d+=String[_qdb("0x35a")](i):G=1&((F=(l=14-((j=(l=(F=l<<(E=(F=l+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(b6=(F=(l=F<<j)+245760|0)>>>16&2))+((F=l<<b6)>>>15)|0)+7|0)?D>>>F:D)|l<<1);else for(typeof k[_qdb("0x433")]==_qdb("0x16d")&&(k[_qdb("0x433")]=[k[_qdb("0x433")]]);k[_qdb("0x433")][_qdb("0x319")]>0;)k[_qdb("0x433")][_qdb("0x660")]()()}while(f<e[_qdb("0x319")]);return d}v=0|b4[n+8>>2],b4[v+12>>2]=s,b4[s+8>>2]=v,x=s},b4={};b4[_qdb("0x21b")]=Math,b4[_qdb("0x5b4")]=Int8Array,b4[_qdb("0x4e9")]=Int32Array,b4[_qdb("0x638")]=Uint8Array;var b5=b4,b6={};b6.a=aI,b6.b=L,b6.c=M,b6.d=aU,b6.e=aV,b6.f=aY,b6.g=aX,b6.h=aQ;var b7=b6,b8=function(bK,bL,bM){_qdb("0xb");var bN=new(bK[_qdb("0x5b4")])(bM),bO=new(bK[_qdb("0x4e9")])(bM),bP=new(bK[_qdb("0x638")])(bM),bQ=0|bL.h,bR=0,bS=0,bT=0,bU=0,bV=0,bW=0,bX=0,bY=0,bZ=bK[_qdb("0x21b")][_qdb("0x69f")],c0=bL.a,c1=bL.b,c2=bL.c,c3=bL.d,c4=bL.e,c5=bL.f,c6=bL.g,c7=736,c8=4832,c9=0;function ca(co){co|=0;var cp=0,cq=0,cr=0,cs=0,ct=0,cu=0,cv=0,cw=0,cx=0,cy=0,cz=0,cA=0,cB=0,cC=0,cD=0,cE=0,cF=0,cG=0,cH=0,cI=0,cJ=0,cK=0,cL=0,cM=0,cN=0,cO=0,cP=0,cQ=0,cR=0,cS=0,cT=0,cU=0,cV=0,cW=0,cX=0,cY=0,cZ=0,d0=0,d1=0,d2=0,d3=0,d4=0,d5=0,d6=0,d7=0,d8=0,d9=0,dc=0,dd=0,de=0,df=0,dg=0,dh=0,di=0,dj=0,dk=0,dl=0,dm=0,dn=0,dp=0,dq=0,dr=0,ds=0,dt=0,du=0,dv=0,dw=0,dx=0,dy=0,dz=0,dA=0,dB=0,dC=0,dD=0,dE=0,dF=0,dG=0,dH=0,dI=0,dJ=0,dK=0,dL=0,dM=0,dN=0,dO=0,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,e0=0,e1=0,e2=0,e3=0,e4=0,e5=0,e6=0,e7=0,e8=0,e9=0,ec=0,ed=0,ee=0,ef=0,eg=0,eh=0,ei=0,ej=0,ek=0,el=0,em=0,en=0,eo=0,ep=0,eq=0,er=0,es=0,et=0,eu=0,ev=0,ew=0,ex=0,ey=0,ez=0,eA=0,eB=0,eC=0,eD=0,eE=0,eF=0,eG=0,eH=0,eI=0,eJ=0;cp=c7,c7=c7+608|0,cq=cp+48|0,cr=cp+592|0,cs=cp+588|0,ct=cp+584|0,cu=cp+580|0,cv=cp+576|0,cw=cp+572|0,cx=cp+568|0,cy=cp+564|0,cz=cp+560|0,cA=cp,cB=cA+4|0,cC=cA+8|0,cD=cA+12|0,cE=cA+16|0,cF=cA+20|0,cG=cA+24|0,cH=cA+28|0,cI=cA+32|0,cJ=cq+8|0,cK=cq+16|0,cL=cq+24|0,cM=cq+32|0,cN=cq+40|0,cO=cq+48|0,cP=cq+56|0,cQ=cq+64|0,cR=cq+72|0,cS=cq+80|0,cT=cq+88|0,cU=cq+96|0,cV=cq+104|0,cW=cq+112|0,cX=cq+120|0,cY=cq+128|0,cZ=cq+136|0,d0=cq+144|0,d1=cq+152|0,d2=cq+160|0,d3=cq+168|0,d4=cq+176|0,d5=cq+184|0,d6=cq+192|0,d7=cq+200|0,d8=cq+208|0,d9=cq+216|0,dc=cq+224|0,dd=cq+232|0,de=cq+240|0,df=cq+248|0,dg=cq+256|0,dh=cq+264|0,di=cq+272|0,dj=cq+280|0,dk=cq+288|0,dl=cq+296|0,dm=cq+304|0,dn=cq+312|0,dp=cq+320|0,dq=cq+328|0,dr=cq+336|0,ds=cq+344|0,dt=cq+352|0,du=cq+360|0,dv=cq+368|0,dw=cq+376|0,dx=cq+384|0,dy=cq+392|0,dz=cq+400|0,dA=cq+408|0,dB=cq+416|0,dC=cq+424|0,dD=cq+432|0,dE=cq+440|0,dF=cq+448|0,dG=cq+456|0,dH=cq+464|0,dI=cq+472|0,dJ=cq+480|0,dK=cq+488|0,dL=cq+496|0,dM=cq+504|0,dN=0,dO=140,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,e0=0,e1=0,e2=0,e3=0,e4=0,e5=0,e6=0,e7=0,e8=0,e9=0,ec=0,ed=0;e:for(;;){switch((255&dO)<<24>>24){case 35:if(_qdb("0x21c")==_qdb("0x21c"))break e;return cz=0,c7=co,0|cz;case 124:if(_qdb("0x4b9")==_qdb("0x4b9")){ee=0,ef=140;break e}enc1=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc2=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc3=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc4=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String[_qdb("0x35a")](chr1),64!==enc3&&(output+=String[_qdb("0x35a")](chr2)),64!==enc4&&(output+=String[_qdb("0x35a")](chr3));case 112:if(_qdb("0x27c")==_qdb("0x27c")){eg=0|cc(e8<<2),eh=eg,ei=108,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=eg;break}c2+=13302;case 111:if(_qdb("0x95")!==_qdb("0x3b6")){eg=(dS|~dU)^dT,eG=dY+-1|0,eh=dN,ei=109,ej=dP,ek=eG>>2,el=dR,em=dS,en=dT,eo=dU,ep=eg,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eg+(-2&dR)&-2|1&dR)+(1&eg)|0,eD=dW+((7*dX|0)%16|0)|0,eE=ec,eF=ed;break}cy-=2,cF=cG;case 109:if(_qdb("0x588")!==_qdb("0x234")){eg=dY+32|0,eh=dN,ei=(0|e9)>(eg>>2|0)?85:107,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cp=Object[_qdb("0x51")][_qdb("0x15")][_qdb("0x3c3")](cv(_qdb("0x1fa")))===_qdb("0x6b8");case 108:if(_qdb("0xe6")!==_qdb("0x41e")){eh=dN,ei=(0|dW)<(0|e8)?104:102,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-30737;case 107:if(_qdb("0x204")==_qdb("0x204")){eh=dN,ei=(0|e9)>(0|dQ)?105:99,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=6067;case 105:if(_qdb("0x6b6")==_qdb("0x6b6")){eh=dN,ei=(0|e3)>0?103:101,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-13216;case 104:if(_qdb("0xa5")!==_qdb("0x12e")){bO[ed+(dW<<2)>>2]=0,eh=dN,ei=108,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bn();case 103:if(_qdb("0x283")!==_qdb("0x346")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}return k[_qdb("0x1ca")+sig][_qdb("0x3c3")](null,ptr);case 102:if(_qdb("0x65e")==_qdb("0x65e")){eh=dN,ei=98,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bm(bo[_qdb("0x38")]);case 101:if(_qdb("0x3d1")!==_qdb("0x6c")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}am[_qdb("0x23c")](e3);case 99:if(_qdb("0x2b9")==_qdb("0x2b9")){eh=dN,ei=(0|e9)==(0|dQ)?97:91,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[_qdb("0x2f")](_qdb("0x66")),setTimeout((function(){setTimeout((function(){k[_qdb("0x2f")]("")}),1),doRun()}),1);case 98:if(_qdb("0x71")===_qdb("0x507"))return void(bO[5]=cA);eh=dN,ei=(0|dW)<(0|dY)?94:92,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 97:if(_qdb("0x50b")==_qdb("0x50b")){eh=dN,ei=(0|e3)>0?95:91,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE=cD,cF=c7;case 95:if(_qdb("0x25d")!==_qdb("0x45c")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=cw|ct,de=cD+8|0,df=cD;case 94:if(_qdb("0x6b4")==_qdb("0x6b4")){eg=ed+(dW>>2<<2)|0,bO[eg>>2]=bN[co+dW>>0]<<(((0|dW)%4|0)<<3)|bO[eg>>2],eh=dN,ei=98,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-10871;case 92:if(_qdb("0x592")==_qdb("0x592")){bO[cr>>2]=0,bO[cs>>2]=0,bO[ct>>2]=0,bO[cu>>2]=0,bO[cv>>2]=0,eg=dY+32|0,eG=ed+(eg>>2<<2)|0,bO[eG>>2]=bO[eG>>2]|128<<(((0|eg)%4|0)<<3),bO[cw>>2]=0,bO[cx>>2]=0,bO[cy>>2]=0,bO[cz>>2]=0,bO[cA>>2]=cr,bO[cB>>2]=cw,bO[cC>>2]=cs,bO[cD>>2]=cx,bO[cE>>2]=ct,bO[cF>>2]=cy,bO[cG>>2]=cu,bO[cH>>2]=cz,bO[cI>>2]=cv,eh=dN,ei=90,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=(0|dY)%4|0,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}d3=cP,d4=d2;case 91:if(_qdb("0x353")!==_qdb("0x6aa")){eh=dN,ei=(0|e9)>(dQ+1|0)?89:87,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-36568;case 90:if(_qdb("0x3f")!==_qdb("0x2b6")){eh=dN,ei=(0|e3)>0?88:78,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ap[_qdb("0x23c")](e3);case 89:if(_qdb("0x4c7")==_qdb("0x4c7")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}eh=dN,ei=dO,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;case 88:if(_qdb("0x548")!==_qdb("0x533")){eh=dN,ei=84,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dY-e3|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=cY,cO=d0,cI<<=1,cT=cZ;case 87:if(_qdb("0xa9")!==_qdb("0x5e9")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}K=value;case 85:if(_qdb("0x2f0")!=_qdb("0x2f0")){var f8=new XMLHttpRequest;return f8[_qdb("0x6bc")](_qdb("0xf9"),url,!1),f8[_qdb("0x2ef")](null),f8[_qdb("0x9c")]}eg=dY+40|0,eh=dN,ei=(0|e9)==(14|eg>>6<<4)?83:81,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 84:if(_qdb("0xed")==_qdb("0xed")){eh=dN,ei=(0|dW)<(0|dY)?80:78,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[_qdb("0x5d8")](aD);case 83:if(_qdb("0x30d")!==_qdb("0x644")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[d6+20>>2]=cw,bO[cw+24>>2]=d6,dd=cD;case 81:if(_qdb("0x23a")==_qdb("0x23a")){eh=dN,ei=(0|e9)>(dQ+1|0)?79:77,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=38401;case 80:if(_qdb("0x4a8")==_qdb("0x4a8")){eg=0|bO[cA>>2],bO[eg>>2]=bO[eg>>2]|bN[co+dW>>0]<<(((0|dW)%4|0)<<3),eh=dN,ei=84,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=11874;case 79:if(_qdb("0x67b")!==_qdb("0x1b1")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}output+=String[_qdb("0x35a")](chr2);case 78:if(_qdb("0x5eb")!==_qdb("0x60f")){eh=dN,ei=74,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=0|c3(),eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-30046;case 77:if(_qdb("0x54a")==_qdb("0x54a")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cA+16>>2]=cw,bO[cw+24>>2]=cA;case 75:if(_qdb("0x5dc")!==_qdb("0x21f")){eg=cq+(dX<<3)|0,eG=dV>>1,eH=0|ck(0|bO[eg>>2],0|bO[eg+4>>2],0|ci(0|eG,((0|eG)<0)<<31>>31|0,1),0|c2()),c2(),eG=(1&dV)+eH|0,eH=(eG+(-2&e8)&-2|1&e8)+(1&eG)|0,eg=(0|dX)%4|0,eI=6+(eg<<2)+((0|bZ(eg+-1|0,eg))/2|0)|0,eg=32-eI|0,eJ=eH<<eI|(eg?eH>>>eg:eH),eh=dN,ei=115,ej=dP,ek=eH,el=dU,em=(eJ+(-2&dS)&-2|1&dS)+(1&eJ)|0,en=dS,eo=dT,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eI,eB=e7,eC=e8,eD=eG,eE=ec,eF=ed;break}d9=cs,dc=cw;case 74:if(_qdb("0x61d")==_qdb("0x61d")){eh=dN,ei=(0|dW)<8?70:40,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dh=dn+8|0,dG=dh,dH=0|bO[dh>>2];case 73:if(_qdb("0x62f")==_qdb("0x62f")){eh=dN,ei=36,ej=dP,ek=dQ,el=((-2&dZ)+dR&-2|1&dZ)+(1&dR)|0,em=((-2&e0)+dS&-2|1&e0)+(1&dS)|0,en=((-2&e1)+dT&-2|1&e1)+(1&dT)|0,eo=((-2&e2)+dU&-2|1&e2)+(1&dU)|0,ep=dV,eq=dW+16|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=0|bO[ct+8>>2],bO[cw+12>>2]=cv,bO[cv+8>>2]=cw,cA=cv;case 71:if(_qdb("0x1ae")!==_qdb("0x5ee")){cd(dN),eh=dN,ei=67,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=0|cc(33),ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-31865;case 70:if(_qdb("0x6a1")!==_qdb("0x1a1")){eh=dN,ei=66,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}al(ao);case 67:if(_qdb("0x29")==_qdb("0x29")){eh=dN,ei=(0|dX)<32?63:37,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}output+=String[_qdb("0x35a")](chr3);case 66:if(_qdb("0x4ca")==_qdb("0x4ca")){eh=dN,ei=(0|dX)<4?62:42,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE[_qdb("0x4ef")](objkey)&&(objkey=objkey[_qdb("0xdf")]());case 63:if(_qdb("0x693")==_qdb("0x693")){eh=dN,ei=61,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=(0|dX)/8|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cr=0|bO[8],cw=bZ>>>3,cB=52+(cw<<1<<2)|0,cD=1<<cw,cD&cs?(cD=cB+8|0,cL=cD,ck=0|bO[cD>>2]):(bO[3]=cD|cs,cL=cB+8|0,ck=cB),bO[cL>>2]=cr,bO[ck+12>>2]=cr,bO[cr+8>>2]=ck,bO[cr+12>>2]=cB;case 62:if(_qdb("0x8c")==_qdb("0x8c")){eG=dW+1|0,eI=dX+1|0,eh=dN,ei=58,ej=0,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=72871+(359*eI|0)+(0|bZ(29+(661*eI|0)|0,eG))+(0|bZ(919+(797*e6|0)+(0|bZ(881*eI|0,eI))+(0|bZ((8353*eI|0)+(277*eG|0)|0,eG))|0,e6))|0,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=39832;case 61:if(_qdb("0xf3")==_qdb("0xf3")){eh=dN,ei=0==(0|dW)?59:57,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=c2|cu,c3=cw+8|0,cA=cw;case 59:if(_qdb("0x36c")==_qdb("0x36c")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dR,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=c3,cC=cw;case 58:if(_qdb("0x2ee")==_qdb("0x2ee")){eh=dN,ei=(0|dP)<16?54:52,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}u=document[_qdb("0x250")][_qdb("0x4c")];case 57:if(_qdb("0x4d9")!==_qdb("0x2c2")){eh=dN,ei=1==(0|dW)?55:53,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=cE+1048320|0,cI=cB>>>16&8,cB=cE<<cI,cE=cB+520192|0,cJ=cE>>>16&4,cE=cB<<cJ,cB=cE+245760|0,cO=cB>>>16&2,cB=cE<<cO,cE=14-(cJ|cI|cO)+(cB>>>15)|0,cB=cE+7|0,cN=1&(cB?cr>>>cB:cr)|cE<<1;case 55:if(_qdb("0x3d")!==_qdb("0x375")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dS,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=ct+cq|0,bO[cy+4>>2]=3|cw,cr=cy+cw+4|0,bO[cr>>2]=1|bO[cr>>2];case 54:if(_qdb("0x114")==_qdb("0x114")){eG=1519533197+(0|bZ(e7,-1946432927))|0,eh=dN,ei=58,ej=dP+1|0,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=eG>>>16&1023,eA=e6,eB=eG,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=24497;case 53:if(_qdb("0x40c")===_qdb("0x140")){fx|=0,bO|=0,co|=0,cp|=0;var fx=0;return fx=fx+co>>>0,0|(cz(bO+cp+(fx>>>0<fx>>>0|0)>>>0|0),0|fx)}eh=dN,ei=2==(0|dW)?51:49,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-90:if(_qdb("0x634")!==_qdb("0x599")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}callback[_qdb("0x6a4")]===undefined?k[_qdb("0x4cb")](func):k[_qdb("0xe5")](func,callback[_qdb("0x6a4")]);case 52:if(_qdb("0x88")===_qdb("0x388"))return cz=0,c7=co,0|cz;eh=dN,ei=50,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=31&e5,eE=ec,eF=ed;break;case 51:if(_qdb("0xf1")==_qdb("0xf1")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dT,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ct=cD+8|0,de=ct,df=0|bO[ct>>2];case-92:if(_qdb("0x5f")!==_qdb("0x6b3")){eh=dN,ei=(0|e9)>(dQ+1|0)?163:162,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}du=dc,dv=de;case 50:if(_qdb("0x496")!==_qdb("0x255")){eh=dN,ei=(0|e9)<10?48:46,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}if(!aM(filename))return;return b2(filename[_qdb("0x2e4")](aL[_qdb("0x319")]));case-93:if(_qdb("0x10d")==_qdb("0x10d")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cArgs[cu]=args[cu];case 49:if(_qdb("0x2ec")!==_qdb("0x37e")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dU,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=24275;case-94:if(_qdb("0xff")==_qdb("0xff")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=ct,co=co+4|0;case 48:if(_qdb("0x29e")!==_qdb("0x6c6")){eh=dN,ei=44,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9+32|0,eE=ec,eF=ed;break}c2+=44604;case-95:if(_qdb("0x522")==_qdb("0x522")){eG=dY+40|0,eh=dN,ei=(0|e9)==(14|eG>>6<<4)?160:159,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-5358;case 47:if(_qdb("0x301")==_qdb("0x301")){eG=dX<<2&28^4,eh=dN,ei=45,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=15&(eG?dV>>eG:dV),eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=59939;case-96:if(_qdb("0x17b")!==_qdb("0x1")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bN[co>>0]=0|bN[cp>>0],co=co+1|0,cp=cp+1|0;case 46:if(_qdb("0x331")!==_qdb("0x58b")){eh=dN,ei=44,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9+72|0,eE=ec,eF=ed;break}func(callback[_qdb("0x6a4")]===undefined?null:callback[_qdb("0x6a4")]);case-97:if(_qdb("0x3eb")!==_qdb("0x1a4")){eh=dN,ei=(0|e9)>(dQ+1|0)?158:157,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}try{for(var fL=b1(cB),fM=new Uint8Array(fL[_qdb("0x319")]),fN=0;fN<fL[_qdb("0x319")];++fN)fM[fN]=fL[_qdb("0x687")](fN);return fM}catch(fO){throw new Error(_qdb("0x2bf"))}case 45:if(_qdb("0x1b2")==_qdb("0x1b2")){eh=dN,ei=(0|dV)<10?43:41,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cx=ct,bZ=ct,cy=cu;case-98:if(_qdb("0x1f")==_qdb("0x1f")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cY=cB,cZ=cT;case 44:if(_qdb("0x266")==_qdb("0x266")){eG=dX+e3|0,eI=eG+(dW<<2)|0,eJ=0|bO[cA+(eI>>2<<2)>>2],bO[eJ>>2]=bO[eJ>>2]|e9+16<<(((0|eG)%4|0)<<3),eh=dN,ei=66,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=25614;case-99:if(_qdb("0x664")==_qdb("0x664")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}return func;case 43:if(_qdb("0x21e")!==_qdb("0x3c9")){eh=dN,ei=39,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV+48|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}F[_qdb("0x24c")]||(F[_qdb("0x24c")]={}),F[_qdb("0x24c")][text]||(F[_qdb("0x24c")][text]=1,B(text));case-100:if(_qdb("0xa3")!==_qdb("0x582")){eG=cq+(dX<<3)|0,eJ=dV>>1,eI=0|ck(0|bO[eG>>2],0|bO[eG+4>>2],0|ci(0|eJ,((0|eJ)<0)<<31>>31|0,1),0|c2()),c2(),eJ=(1&dV)+eI|0,eI=(eJ+(-2&e8)&-2|1&e8)+(1&eJ)|0,eG=(0|dX)%4|0,eH=5+(eG<<2)+((0|bZ(eG+-1|0,eG))/2|0)|0,eG=32-eH|0,eg=eI<<eH|(eG?eI>>>eG:eI),eh=dN,ei=9,ej=dP,ek=eI,el=dU,em=(eg+(-2&dS)&-2|1&dS)+(1&eg)|0,en=dS,eo=dT,ep=eg,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eH,eB=e7,eC=e8,eD=eJ,eE=ec,eF=ed;break}c2+=17659;case 42:if(_qdb("0x271")===_qdb("0x34d")){for(var fS in obj)if(obj[_qdb("0x4ef")](fS))return!1;return!0}eh=dN,ei=74,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 41:if(_qdb("0x69c")!==_qdb("0x425")){eh=dN,ei=39,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV+87|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cu=cv(_qdb("0x677"));case-102:if(_qdb("0x2ad")==_qdb("0x2ad")){eh=dN,ei=(0|dX)<48?152:115,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=8809;case 40:if(_qdb("0x57b")===_qdb("0x594"))return eval(cB);eJ=(dW<<2)+e3|0,eH=0|bO[cA+(eJ>>2<<2)>>2],bO[eH>>2]=bO[eH>>2]|128<<(((0|e3)%4|0)<<3),eh=dN,ei=36,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 39:if(_qdb("0x2f3")!=_qdb("0x2f3"))return b0(bl);bN[e4+dX>>0]=dV,eh=dN,ei=67,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-104:if(_qdb("0x291")!==_qdb("0x393")){eH=dT^dS^dU,eJ=dY+-1|0,eh=dN,ei=151,ej=dP,ek=eJ>>2,el=dR,em=dS,en=dT,eo=dU,ep=eH,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eH+(-2&dR)&-2|1&dR)+(1&eH)|0,eD=dW+((5+(3*dX|0)|0)%16|0)|0,eE=ec,eF=ed;break}for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)ay(k[_qdb("0xc9")][_qdb("0x495")]());case-105:if(_qdb("0x607")==_qdb("0x607")){eH=dY+32|0,eh=dN,ei=(0|e9)>(eH>>2|0)?137:150,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=cD|cs,cL=cB+8|0,ck=cB;case 37:if(_qdb("0x22a")==_qdb("0x22a")){bN[e4+32>>0]=0,eh=dN,ei=35,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-35594;case-106:if(_qdb("0x15b")===_qdb("0x6b9"))return V(ident,returnType,argTypes,arguments,opts);eh=dN,ei=(0|e9)>(0|dQ)?149:146,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 36:if(_qdb("0x4fb")!==_qdb("0x3bd")){eH=dY+40|0,eh=dN,ei=(0|dW)<(14|eH>>6<<4)?33:71,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=15745;case-107:if(_qdb("0x5ae")==_qdb("0x5ae")){eh=dN,ei=(0|e3)>0?148:147,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=6092;case-108:if(_qdb("0x105")==_qdb("0x105")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=0|bO[d4+8>>2],bO[cw+12>>2]=ct,bO[ct+8>>2]=cw,d6=ct;case-109:if(_qdb("0x5e2")==_qdb("0x5e2")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cc=cq,cd=cp;case 33:if(_qdb("0x183")==_qdb("0x183")){eh=dN,ei=31,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dR,eu=dS,ev=dT,ew=dU,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ax(k[_qdb("0x296")][_qdb("0x495")]());case-110:if(_qdb("0x557")==_qdb("0x557")){eh=dN,ei=(0|e9)==(0|dQ)?145:142,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}throw new Error;case-111:if(_qdb("0x176")==_qdb("0x176")){eh=dN,ei=(0|e3)>0?144:142,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ay(k[_qdb("0xc9")][_qdb("0x495")]());case 31:if(_qdb("0x5a8")!==_qdb("0xf2")){eh=dN,ei=(0|dX)<16?29:9,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-18148;case-112:if(_qdb("0x412")!==_qdb("0x174")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cA+20>>2]=cw,bO[cw+24>>2]=cA,cx=ct,bZ=ct,cy=cu;case 29:if(_qdb("0x4dc")!==_qdb("0x1c5")){eH=dU&~dS|dT&dS,eJ=dY+-1|0,eh=dN,ei=28,ej=dP,ek=eJ>>2,el=dR,em=dS,en=dT,eo=dU,ep=eH,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eH+(-2&dR)&-2|1&dR)+(1&eH)|0,eD=dW+((0|dX)%16|0)|0,eE=ec,eF=ed;break}clearInterval(aE),aE=null;case-114:if(_qdb("0x381")!==_qdb("0x59")){eh=dN,ei=(0|e9)>(dQ+1|0)?141:139,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=ct,bO[co+4>>2]=ct,bO[co+8>>2]=ct,bO[co+12>>2]=ct,bO[co+16>>2]=ct,bO[co+20>>2]=ct,bO[co+24>>2]=ct,bO[co+28>>2]=ct,bO[co+32>>2]=ct,bO[co+36>>2]=ct,bO[co+40>>2]=ct,bO[co+44>>2]=ct,bO[co+48>>2]=ct,bO[co+52>>2]=ct,bO[co+56>>2]=ct,bO[co+60>>2]=ct,co=co+64|0;case 28:if(_qdb("0xaf")==_qdb("0xaf")){eH=dY+32|0,eh=dN,ei=(0|e9)>(eH>>2|0)?16:27,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-5882;case-115:if(_qdb("0x4b2")==_qdb("0x4b2")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dn=de,dp=d6,cS=136;case 27:if(_qdb("0x145")==_qdb("0x145")){eh=dN,ei=(0|e9)>(0|dQ)?26:23,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}for(;3&co;){if(!cq)return 0|cr;bN[co>>0]=0|bN[cp>>0],co=co+1|0,cp=cp+1|0,cq=cq-1|0}for(ct=-4&cs|0,cq=ct-64|0;(0|co)<=(0|cq);)bO[co>>2]=bO[cp>>2],bO[co+4>>2]=bO[cp+4>>2],bO[co+8>>2]=bO[cp+8>>2],bO[co+12>>2]=bO[cp+12>>2],bO[co+16>>2]=bO[cp+16>>2],bO[co+20>>2]=bO[cp+20>>2],bO[co+24>>2]=bO[cp+24>>2],bO[co+28>>2]=bO[cp+28>>2],bO[co+32>>2]=bO[cp+32>>2],bO[co+36>>2]=bO[cp+36>>2],bO[co+40>>2]=bO[cp+40>>2],bO[co+44>>2]=bO[cp+44>>2],bO[co+48>>2]=bO[cp+48>>2],bO[co+52>>2]=bO[cp+52>>2],bO[co+56>>2]=bO[cp+56>>2],bO[co+60>>2]=bO[cp+60>>2],co=co+64|0,cp=cp+64|0;for(;(0|co)<(0|ct);)bO[co>>2]=bO[cp>>2],co=co+4|0,cp=cp+4|0;case-116:if(_qdb("0x162")!==_qdb("0x41")){eH=cq,bO[eH>>2]=-680876936,bO[eH+4>>2]=-1,eH=cJ,bO[eH>>2]=-389564586,bO[eH+4>>2]=-1,eH=cK,bO[eH>>2]=606105819,bO[eH+4>>2]=0,eH=cL,bO[eH>>2]=-1044525330,bO[eH+4>>2]=-1,eH=cM,bO[eH>>2]=-176418897,bO[eH+4>>2]=-1,eH=cN,bO[eH>>2]=1200080426,bO[eH+4>>2]=0,eH=cO,bO[eH>>2]=-1473231341,bO[eH+4>>2]=-1,eH=cP,bO[eH>>2]=-45705983,bO[eH+4>>2]=-1,eH=cQ,bO[eH>>2]=1770035416,bO[eH+4>>2]=0,eH=cR,bO[eH>>2]=-1958414417,bO[eH+4>>2]=-1,eH=cS,bO[eH>>2]=-42063,bO[eH+4>>2]=-1,eH=cT,bO[eH>>2]=-1990404162,bO[eH+4>>2]=-1,eH=cU,bO[eH>>2]=1804603682,bO[eH+4>>2]=0,eH=cV,bO[eH>>2]=-40341101,bO[eH+4>>2]=-1,eH=cW,bO[eH>>2]=-1502002290,bO[eH+4>>2]=-1,eH=cX,bO[eH>>2]=1236535329,bO[eH+4>>2]=0,eH=cY,bO[eH>>2]=-165796510,bO[eH+4>>2]=-1,eH=cZ,bO[eH>>2]=-1069501632,bO[eH+4>>2]=-1,eH=d0,bO[eH>>2]=643717713,bO[eH+4>>2]=0,eH=d1,bO[eH>>2]=-373897302,bO[eH+4>>2]=-1,eH=d2,bO[eH>>2]=-701558691,bO[eH+4>>2]=-1,eH=d3,bO[eH>>2]=38016083,bO[eH+4>>2]=0,eH=d4,bO[eH>>2]=-660478335,bO[eH+4>>2]=-1,eH=d5,bO[eH>>2]=-405537848,bO[eH+4>>2]=-1,eH=d6,bO[eH>>2]=568446438,bO[eH+4>>2]=0,eH=d7,bO[eH>>2]=-1019803690,bO[eH+4>>2]=-1,eH=d8,bO[eH>>2]=-187363961,bO[eH+4>>2]=-1,eH=d9,bO[eH>>2]=1163531501,bO[eH+4>>2]=0,eH=dc,bO[eH>>2]=-1444681467,bO[eH+4>>2]=-1,eH=dd,bO[eH>>2]=-51403784,bO[eH+4>>2]=-1,eH=de,bO[eH>>2]=1735328473,bO[eH+4>>2]=0,eH=df,bO[eH>>2]=-1926607734,bO[eH+4>>2]=-1,eH=dg,bO[eH>>2]=-378558,bO[eH+4>>2]=-1,eH=dh,bO[eH>>2]=-2022574463,bO[eH+4>>2]=-1,eH=di,bO[eH>>2]=1839030562,bO[eH+4>>2]=0,eH=dj,bO[eH>>2]=-35309556,bO[eH+4>>2]=-1,eH=dk,bO[eH>>2]=-1530992060,bO[eH+4>>2]=-1,eH=dl,bO[eH>>2]=1272893353,bO[eH+4>>2]=0,eH=dm,bO[eH>>2]=-155497632,bO[eH+4>>2]=-1,eH=dn,bO[eH>>2]=-1094730640,bO[eH+4>>2]=-1,eH=dp,bO[eH>>2]=681279174,bO[eH+4>>2]=0,eH=dq,bO[eH>>2]=-358537222,bO[eH+4>>2]=-1,eH=dr,bO[eH>>2]=-722521979,bO[eH+4>>2]=-1,eH=ds,bO[eH>>2]=76029189,bO[eH+4>>2]=0,eH=dt,bO[eH>>2]=-640364487,bO[eH+4>>2]=-1,eH=du,bO[eH>>2]=-421815835,bO[eH+4>>2]=-1,eH=dv,bO[eH>>2]=530742520,bO[eH+4>>2]=0,eH=dw,bO[eH>>2]=-995338651,bO[eH+4>>2]=-1,eH=dx,bO[eH>>2]=-198630844,bO[eH+4>>2]=-1,eH=dy,bO[eH>>2]=1126891415,bO[eH+4>>2]=0,eH=dz,bO[eH>>2]=-1416354905,bO[eH+4>>2]=-1,eH=dA,bO[eH>>2]=-57434055,bO[eH+4>>2]=-1,eH=dB,bO[eH>>2]=1700485571,bO[eH+4>>2]=0,eH=dC,bO[eH>>2]=-1894986606,bO[eH+4>>2]=-1,eH=dD,bO[eH>>2]=-1051523,bO[eH+4>>2]=-1,eH=dE,bO[eH>>2]=-2054922799,bO[eH+4>>2]=-1,eH=dF,bO[eH>>2]=1873313359,bO[eH+4>>2]=0,eH=dG,bO[eH>>2]=-30611744,bO[eH+4>>2]=-1,eH=dH,bO[eH>>2]=-1560198380,bO[eH+4>>2]=-1,eH=dI,bO[eH>>2]=1309151649,bO[eH+4>>2]=0,eH=dJ,bO[eH>>2]=-145523070,bO[eH+4>>2]=-1,eH=dK,bO[eH>>2]=-1120210379,bO[eH+4>>2]=-1,eH=dL,bO[eH>>2]=718787259,bO[eH+4>>2]=0,eH=dM,bO[eH>>2]=-343485551,bO[eH+4>>2]=-1,eh=dN,ei=136,ej=dP,ek=0,el=1732584193,em=-271733879,en=-1732584194,eo=271733878,ep=1732584193,eq=0,er=0,es=0,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=1,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=33105;case 26:if(_qdb("0x2ba")!==_qdb("0x222")){eh=dN,ei=(0|e3)>0?25:24,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=bO[cp>>2],co=co+4|0,cp=cp+4|0;case-117:if(_qdb("0x549")==_qdb("0x549")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=52278;case 25:if(_qdb("0x2c5")===_qdb("0x2a3"))return 8;eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 24:if(_qdb("0x62")!==_qdb("0x224")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bM=k[_qdb("0x38")];case-119:if(_qdb("0x5ab")===_qdb("0x4bc"))return ptr?Z(a9,ptr,maxBytesToRead):"";eH=dY+40|0,eh=dN,ei=(0|e9)==(14|eH>>6<<4)?135:133,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 23:if(_qdb("0x398")==_qdb("0x398")){eh=dN,ei=(0|e9)==(0|dQ)?22:19,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}aI(_qdb("0x537"));case-120:if(_qdb("0xce")===_qdb("0x306"))return bN|=0,bO|=0,co|=0,(0|co)<32?(cz(bO<<co|(bN&(1<<co)-1<<32-co)>>>32-co|0),bN<<co):(cz(bN<<co-32|0),0);eh=dN,ei=134,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=dW,eF=ed;break;case 22:if(_qdb("0x438")!==_qdb("0x19d")){eh=dN,ei=(0|e3)>0?21:19,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cD=cB+8|0,cL=cD,ck=0|bO[cD>>2];case-121:if(_qdb("0x58c")!==_qdb("0x27")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}return dm=dl-cM|0,bO[6]=dm,dl=0|bO[9],dq=dl+cM|0,bO[9]=dq,bO[dq+4>>2]=1|dm,bO[dl+4>>2]=3|cM,cz=dl+8|0,c7=co,0|cz;case 21:if(_qdb("0x15e")==_qdb("0x15e")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dl=dk,dm=dn?dp:dq,cS=145;case-122:if(_qdb("0x131")==_qdb("0x131")){eh=dN,ei=0==(0|bN[co+ec>>0])?128:130,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-11163;case-123:if(_qdb("0x6ab")!==_qdb("0x2c3")){eh=dN,ei=(0|e9)>(dQ+1|0)?131:129,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}a9[_qdb("0x49c")](dest,src,src+num);case 19:if(_qdb("0x198")!==_qdb("0x11b")){eh=dN,ei=(0|e9)>(dQ+1|0)?18:17,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE=c3,cF=cw;case 18:if(_qdb("0x109")!==_qdb("0x5ed")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=359;case-125:if(_qdb("0x485")==_qdb("0x485")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cy=0|bO[8],ct=bZ>>>3,cw=52+(ct<<1<<2)|0,cu=1<<ct,c2&cu?(cu=cw+8|0,c3=cu,cA=0|bO[cu>>2]):(bO[3]=c2|cu,c3=cw+8|0,cA=cw),bO[c3>>2]=cy,bO[cA+12>>2]=cy,bO[cy+8>>2]=cA,bO[cy+12>>2]=cw;case 17:if(_qdb("0x8")===_qdb("0xc3"))return a9[_qdb("0x319")];eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-126:if(_qdb("0x380")==_qdb("0x380")){eh=dN,ei=136,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY+1|0,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cG+20>>2]=cu,bO[cu+24>>2]=cG;case 16:if(_qdb("0x674")!==_qdb("0x4af")){eH=dY+40|0,eh=dN,ei=(0|e9)==(14|eH>>6<<4)?15:14,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[m]=l[m];case-127:if(_qdb("0x2c0")==_qdb("0x2c0")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=11458;case 15:if(_qdb("0x9b")==_qdb("0x9b")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cD<<=1,cs=cw;case-128:if(_qdb("0x259")==_qdb("0x259")){eh=dN,ei=126,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=dY>>2,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-14993;case 14:if(_qdb("0x6a5")==_qdb("0x6a5")){eh=dN,ei=(0|e9)>(dQ+1|0)?13:12,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}this[_qdb("0x345")]=_qdb("0x1b0"),this[_qdb("0x188")]=_qdb("0x1ea")+status+")",this[_qdb("0x50a")]=status;case 127:if(_qdb("0x4fe")!==_qdb("0xdc")){eH=cq+(dX<<3)|0,eJ=dV>>1,eg=0|ck(0|bO[eH>>2],0|bO[eH+4>>2],0|ci(0|eJ,((0|eJ)<0)<<31>>31|0,1),0|c2()),c2(),eJ=(1&dV)+eg|0,eh=dN,ei=125,ej=dP,ek=(eJ+(-2&e8)&-2|1&e8)+(1&eJ)|0,el=dU,em=dS,en=dS,eo=dT,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=eJ,eE=ec,eF=ed;break}response=bl[_qdb("0x38")];case 13:if(_qdb("0xe2")!==_qdb("0x1f8")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=21455;case 126:if(_qdb("0x645")!==_qdb("0x5e")){eh=dN,ei=(0|dY)<6?124:122,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bN|=0,c7=bN;case 12:eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 125:eh=dN,ei=(0|(0|dX)%4)<2?123:121,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 11:eJ=cq+(dX<<3)|0,eg=dV>>1,eH=0|ck(0|bO[eJ>>2],0|bO[eJ+4>>2],0|ci(0|eg,((0|eg)<0)<<31>>31|0,1),0|c2()),c2(),eg=(1&dV)+eH|0,eH=(eg+(-2&e8)&-2|1&e8)+(1&eg)|0,eJ=5*((0|dX)%4|0)|0,eI=eJ+7|0,eG=25-eJ|0,eJ=eH<<eI|(eG?eH>>>eG:eH),eh=dN,ei=31,ej=dP,ek=eH,el=dU,em=(eJ+(-2&dS)&-2|1&dS)+(1&eJ)|0,en=dS,eo=dT,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eI,eB=e7,eC=e8,eD=eg,eE=ec,eF=ed;break;case 123:eh=dN,ei=119,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=4,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 9:eh=dN,ei=(0|dX)<32?7:154,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 122:eh=dN,ei=120,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e3+1|0,eD=e9,eE=ec,eF=ed;break;case 121:eh=dN,ei=119,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=2,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 7:eg=dU&dS|dT&~dU,eI=dY+-1|0,eh=dN,ei=6,ej=dP,ek=eI>>2,el=dR,em=dS,en=dT,eo=dU,ep=eg,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eg+(-2&dR)&-2|1&dR)+(1&eg)|0,eD=dW+((1+(5*dX|0)|0)%16|0)|0,eE=ec,eF=ed;break;case 120:eh=dN,ei=(0|e8)<33?118:116,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 6:eg=dY+32|0,eh=dN,ei=(0|e9)>(eg>>2|0)?161:5,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 119:eg=(7*((0|dX)%4|0)|0)+e6|0,eI=32-eg|0,eJ=(eI?dQ>>>eI:dQ)|dQ<<eg,eh=dN,ei=154,ej=dP,ek=dQ,el=dR,em=(eJ+(-2&dT)&-2|1&dT)+(1&eJ)|0,en=dT,eo=dU,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eg,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 5:eh=dN,ei=(0|e9)>(0|dQ)?4:1,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 118:eh=dN,ei=116,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=33,eD=e9,eE=ec,eF=ed;break;case 4:eh=dN,ei=(0|e3)>0?3:2,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 3:eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 116:eg=dY+32|0,eh=dN,ei=(0|e8)>(8+(eg>>2)|0)?112:114,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 2:eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 115:eh=dN,ei=(0|dX)<64?111:73,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 1:eh=dN,ei=(0|e9)==(0|dQ)?0:164,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 114:eg=dY+32|0,eh=dN,ei=112,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=8+(eg>>2)|0,eD=e9,eE=ec,eF=ed;break;case 0:eh=dN,ei=(0|e3)>0?166:164,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;default:eh=dN,ei=dO,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed}dN=eh,dO=ei,dP=ej,dQ=ek,dR=el,dS=em,dT=en,dU=eo,dV=ep,dW=eq,dX=er,dY=es,dZ=et,e0=eu,e1=ev,e2=ew,e3=ex,e4=ey,e5=ez,e6=eA,e7=eB,e8=eC,e9=eD,ec=eE,ed=eF}return 140==(0|ef)?(c7=cp,0|ee):(ee=e4,c7=cp,0|ee)}function cb(){return 8}function cc(e){e|=0;var t,n=0,r=0,i=0,a=0,o=0,s=0,c=0,u=0,d=0,l=0,f=0,h=0,p=0,_=0,v=0,g=0,y=0,m=0,b=0,k=0,x=0,T=0,S=0,P=0,w=0,I=0,A=0,E=0,D=0,q=0,O=0,R=0,L=0,C=0,M=0,N=0,B=0,F=0,U=0,j=0,V=0,H=0,W=0,z=0,Y=0,G=0,Q=0,K=0,$=0,Z=0,X=0,J=0,ee=0,te=0,ne=0,re=0,ie=0,ae=0,oe=0,se=0,ue=0,de=0,le=0,fe=0,he=0,pe=0,_e=0,ve=0,ge=0,ye=0,me=0,be=0,ke=0,xe=0,Te=0,Se=0,Pe=0,we=0,Ie=0,Ae=0,Ee=0,De=0,qe=0,Oe=0,Re=0;t=c7,c7=c7+16|0,n=t;do{if(e>>>0<245){if(i=(r=e>>>0<11?16:e+11&-8)>>>3,a=0|bO[3],3&(o=i?a>>>i:a)|0)return d=0|bO[(u=(c=52+((s=(1&o^1)+i|0)<<1<<2)|0)+8|0)>>2],(0|(f=0|bO[(l=d+8|0)>>2]))==(0|c)?bO[3]=a&~(1<<s):(bO[f+12>>2]=c,bO[u>>2]=f),f=s<<3,bO[d+4>>2]=3|f,bO[(s=d+f+4|0)>>2]=1|bO[s>>2],c7=t,0|l;if(r>>>0>(l=0|bO[5])>>>0){if(0|o)return o=0|bO[(d=(u=52+((c=((s=(i=(f=(s=((f=o<<i&((s=2<<i)|0-s))&0-f)-1|0)>>>12&16)?s>>>f:s)>>>5&8)|f|(i=(o=s?i>>>s:i)>>>2&4)|(o=(d=i?o>>>i:o)>>>1&2)|(d=(u=o?d>>>o:d)>>>1&1))+(d?u>>>d:u)|0)<<1<<2)|0)+8|0)>>2],(0|(f=0|bO[(i=o+8|0)>>2]))==(0|u)?(s=a&~(1<<c),bO[3]=s,h=s):(bO[f+12>>2]=u,bO[d>>2]=f,h=a),c=(f=c<<3)-r|0,bO[o+4>>2]=3|r,bO[(d=o+r|0)+4>>2]=1|c,bO[o+f>>2]=c,0|l&&(f=0|bO[8],u=52+((o=l>>>3)<<1<<2)|0,h&(s=1<<o)?(p=s=u+8|0,_=0|bO[s>>2]):(bO[3]=h|s,p=u+8|0,_=u),bO[p>>2]=f,bO[_+12>>2]=f,bO[f+8>>2]=_,bO[f+12>>2]=u),bO[5]=c,bO[8]=d,c7=t,0|i;if(i=0|bO[4]){for(v=0|bO[316+(((d=(u=(c=(d=(i&0-i)-1|0)>>>12&16)?d>>>c:d)>>>5&8)|c|(u=(f=d?u>>>d:u)>>>2&4)|(f=(s=u?f>>>u:f)>>>1&2)|(s=(o=f?s>>>f:s)>>>1&1))+(s?o>>>s:o)<<2)>>2],o=(-8&bO[v+4>>2])-r|0,s=v,f=v;;){if(v=0|bO[s+16>>2])g=v;else{if(!(u=0|bO[s+20>>2]))break;g=u}o=(u=(v=(-8&bO[g+4>>2])-r|0)>>>0<o>>>0)?v:o,s=g,f=u?g:f}if((s=f+r|0)>>>0>f>>>0){u=0|bO[f+24>>2],v=0|bO[f+12>>2];do{if((0|v)==(0|f)){if(d=0|bO[(c=f+20|0)>>2])k=d,x=c;else{if(!(m=0|bO[(y=f+16|0)>>2])){b=0;break}k=m,x=y}for(c=k,d=x;;){if(m=0|bO[(y=c+20|0)>>2])P=m,w=y;else{if(!(S=0|bO[(T=c+16|0)>>2]))break;P=S,w=T}c=P,d=w}bO[d>>2]=0,b=c}else y=0|bO[f+8>>2],bO[y+12>>2]=v,bO[v+8>>2]=y,b=v}while(0);do{if(0|u){if(v=0|bO[f+28>>2],(0|f)==(0|bO[(y=316+(v<<2)|0)>>2])){if(bO[y>>2]=b,!b){bO[4]=i&~(1<<v);break}}else if(bO[((0|bO[(v=u+16|0)>>2])==(0|f)?v:u+20|0)>>2]=b,!b)break;bO[b+24>>2]=u,0|(v=0|bO[f+16>>2])&&(bO[b+16>>2]=v,bO[v+24>>2]=b),0|(v=0|bO[f+20>>2])&&(bO[b+20>>2]=v,bO[v+24>>2]=b)}}while(0);return o>>>0<16?(u=o+r|0,bO[f+4>>2]=3|u,bO[(i=f+u+4|0)>>2]=1|bO[i>>2]):(bO[f+4>>2]=3|r,bO[s+4>>2]=1|o,bO[s+o>>2]=o,0|l&&(i=0|bO[8],v=52+((u=l>>>3)<<1<<2)|0,(y=1<<u)&a?(I=y=v+8|0,A=0|bO[y>>2]):(bO[3]=y|a,I=v+8|0,A=v),bO[I>>2]=i,bO[A+12>>2]=i,bO[i+8>>2]=A,bO[i+12>>2]=v),bO[5]=o,bO[8]=s),c7=t,0|(f+8|0)}E=r}else E=r}else E=r}else if(e>>>0<=4294967231)if(i=-8&(v=e+11|0),y=0|bO[4]){u=0-i|0,D=(m=v>>>8)?i>>>0>16777215?31:1&((v=(m=14-((S=(m=(v=m<<(T=(v=m+1048320|0)>>>16&8))+520192|0)>>>16&4)|T|(q=(v=(m=v<<S)+245760|0)>>>16&2))+((v=m<<q)>>>15)|0)+7|0)?i>>>v:i)|m<<1:0,m=0|bO[316+(D<<2)>>2];e:do{if(m)for(v=u,q=0,T=i<<(31==(0|D)?0:25-(D>>>1)|0),S=m,M=0;;){if((N=(-8&bO[S+4>>2])-i|0)>>>0<v>>>0){if(!N){B=0,F=S,U=S,C=65;break e}j=N,V=S}else j=v,V=M;if(H=0==(0|(N=0|bO[S+20>>2]))|(0|N)==(0|(S=0|bO[S+16+(T>>>31<<2)>>2]))?q:N,!S){O=j,R=H,L=V,C=61;break}v=j,q=H,T<<=1,M=V}else O=u,R=0,L=0,C=61}while(0);if(61==(0|C)){if(0==(0|R)&0==(0|L)){if(!(u=((m=2<<D)|0-m)&y)){E=i;break}W=0|bO[316+(((m=(r=(u=(m=(u&0-u)-1|0)>>>12&16)?m>>>u:m)>>>5&8)|u|(r=(f=m?r>>>m:r)>>>2&4)|(f=(s=r?f>>>r:f)>>>1&2)|(s=(o=f?s>>>f:s)>>>1&1))+(s?o>>>s:o)<<2)>>2],z=0}else W=R,z=L;W?(B=O,F=W,U=z,C=65):(Y=O,G=z)}if(65==(0|C))for(o=B,s=F,f=U;;){if(m=(u=(r=(-8&bO[s+4>>2])-i|0)>>>0<o>>>0)?r:o,r=u?s:f,!(Q=(u=0|bO[s+16>>2])||0|bO[s+20>>2])){Y=m,G=r;break}o=m,s=Q,f=r}if(0!=(0|G)&&Y>>>0<((0|bO[5])-i|0)>>>0&&(f=G+i|0)>>>0>G>>>0){s=0|bO[G+24>>2],o=0|bO[G+12>>2];do{if((0|o)==(0|G)){if(m=0|bO[(r=G+20|0)>>2])$=m,Z=r;else{if(!(a=0|bO[(u=G+16|0)>>2])){K=0;break}$=a,Z=u}for(r=$,m=Z;;){if(a=0|bO[(u=r+20|0)>>2])X=a,J=u;else{if(!(M=0|bO[(l=r+16|0)>>2]))break;X=M,J=l}r=X,m=J}bO[m>>2]=0,K=r}else u=0|bO[G+8>>2],bO[u+12>>2]=o,bO[o+8>>2]=u,K=o}while(0);do{if(s){if(o=0|bO[G+28>>2],(0|G)==(0|bO[(u=316+(o<<2)|0)>>2])){if(bO[u>>2]=K,!K){u=y&~(1<<o),bO[4]=u,ee=u;break}}else if(bO[((0|bO[(u=s+16|0)>>2])==(0|G)?u:s+20|0)>>2]=K,!K){ee=y;break}bO[K+24>>2]=s,0|(u=0|bO[G+16>>2])&&(bO[K+16>>2]=u,bO[u+24>>2]=K),(u=0|bO[G+20>>2])?(bO[K+20>>2]=u,bO[u+24>>2]=K,ee=y):ee=y}else ee=y}while(0);e:do{if(Y>>>0<16)y=Y+i|0,bO[G+4>>2]=3|y,bO[(s=G+y+4|0)>>2]=1|bO[s>>2];else{if(bO[G+4>>2]=3|i,bO[f+4>>2]=1|Y,bO[f+Y>>2]=Y,s=Y>>>3,Y>>>0<256){y=52+(s<<1<<2)|0,(u=0|bO[3])&(o=1<<s)?(te=o=y+8|0,ne=0|bO[o>>2]):(bO[3]=u|o,te=y+8|0,ne=y),bO[te>>2]=f,bO[ne+12>>2]=f,bO[f+8>>2]=ne,bO[f+12>>2]=y;break}if(re=(y=Y>>>8)?Y>>>0>16777215?31:1&((o=(y=14-((s=(y=(o=y<<(u=(o=y+1048320|0)>>>16&8))+520192|0)>>>16&4)|u|(a=(o=(y=o<<s)+245760|0)>>>16&2))+((o=y<<a)>>>15)|0)+7|0)?Y>>>o:Y)|y<<1:0,y=316+(re<<2)|0,bO[f+28>>2]=re,bO[(o=f+16|0)+4>>2]=0,bO[o>>2]=0,!(ee&(o=1<<re))){bO[4]=ee|o,bO[y>>2]=f,bO[f+24>>2]=y,bO[f+12>>2]=f,bO[f+8>>2]=f;break}o=0|bO[y>>2];t:do{if((-8&bO[o+4>>2]|0)!=(0|Y)){for(y=Y<<(31==(0|re)?0:25-(re>>>1)|0),a=o;u=0|bO[(ae=a+16+(y>>>31<<2)|0)>>2];){if((-8&bO[u+4>>2]|0)==(0|Y)){ie=u;break t}y<<=1,a=u}bO[ae>>2]=f,bO[f+24>>2]=a,bO[f+12>>2]=f,bO[f+8>>2]=f;break e}ie=o}while(0);r=0|bO[(o=ie+8|0)>>2],bO[r+12>>2]=f,bO[o>>2]=f,bO[f+8>>2]=r,bO[f+12>>2]=ie,bO[f+24>>2]=0}}while(0);return c7=t,0|(G+8|0)}E=i}else E=i;else E=-1}while(0);if((G=0|bO[5])>>>0>=E>>>0)return ie=G-E|0,ae=0|bO[8],ie>>>0>15?(Y=ae+E|0,bO[8]=Y,bO[5]=ie,bO[Y+4>>2]=1|ie,bO[ae+G>>2]=ie,bO[ae+4>>2]=3|E):(bO[5]=0,bO[8]=0,bO[ae+4>>2]=3|G,bO[(ie=ae+G+4|0)>>2]=1|bO[ie>>2]),c7=t,0|(ae+8|0);if((ae=0|bO[6])>>>0>E>>>0)return ie=ae-E|0,bO[6]=ie,Y=(G=0|bO[9])+E|0,bO[9]=Y,bO[Y+4>>2]=1|ie,bO[G+4>>2]=3|E,c7=t,0|(G+8|0);if(0|bO[121]?oe=0|bO[123]:(bO[123]=4096,bO[122]=4096,bO[124]=-1,bO[125]=-1,bO[126]=0,bO[114]=0,bO[121]=-16&n^1431655768,oe=4096),n=E+48|0,(oe=(ie=oe+(G=E+47|0)|0)&(Y=0-oe|0))>>>0<=E>>>0)return c7=t,0|0;if(0|(re=0|bO[113])&&(ne=(ee=0|bO[111])+oe|0)>>>0<=ee>>>0|ne>>>0>re>>>0)return c7=t,0|0;e:do{if(4&bO[114])he=0,C=143;else{re=0|bO[9];t:do{if(re){for(ne=460;!((ee=0|bO[ne>>2])>>>0<=re>>>0&&(ee+(0|bO[ne+4>>2])|0)>>>0>re>>>0);){if(!(ee=0|bO[ne+8>>2])){C=128;break t}ne=ee}if((ee=ie-ae&Y)>>>0<2147483647)if((0|(te=0|ce(ee)))==((0|bO[ne>>2])+(0|bO[ne+4>>2])|0)){if(-1!=(0|te)){ue=te,de=ee,C=145;break e}se=ee}else le=te,fe=ee,C=136;else se=0}else C=128}while(0);do{if(128==(0|C))if(-1!=(0|(re=0|ce(0)))&&(i=re,ee=(K=(0==((te=(ee=0|bO[122])+-1|0)&i|0)?0:(te+i&0-ee)-i|0)+oe|0)+(i=0|bO[111])|0,K>>>0>E>>>0&K>>>0<2147483647)){if(0|(te=0|bO[113])&&ee>>>0<=i>>>0|ee>>>0>te>>>0){se=0;break}if((0|(te=0|ce(K)))==(0|re)){ue=re,de=K,C=145;break e}le=te,fe=K,C=136}else se=0}while(0);do{if(136==(0|C)){if(K=0-fe|0,!(n>>>0>fe>>>0&fe>>>0<2147483647&-1!=(0|le))){if(-1==(0|le)){se=0;break}ue=le,de=fe,C=145;break e}if((re=G-fe+(te=0|bO[123])&0-te)>>>0>=2147483647){ue=le,de=fe,C=145;break e}if(-1==(0|ce(re))){ce(K),se=0;break}ue=le,de=re+fe|0,C=145;break e}}while(0);bO[114]=4|bO[114],he=se,C=143}}while(0);if(143==(0|C)&&oe>>>0<2147483647&&!(-1==(0|(se=0|ce(oe)))|1^(le=(fe=(oe=0|ce(0))-se|0)>>>0>(E+40|0)>>>0)|se>>>0<oe>>>0&-1!=(0|se)&-1!=(0|oe)^1)&&(ue=se,de=le?fe:he,C=145),145==(0|C)){he=(0|bO[111])+de|0,bO[111]=he,he>>>0>(0|bO[112])>>>0&&(bO[112]=he),he=0|bO[9];e:do{if(he){for(fe=460;;){if((0|ue)==((pe=0|bO[fe>>2])+(_e=0|bO[fe+4>>2])|0)){C=154;break}if(!(le=0|bO[fe+8>>2]))break;fe=le}if(154==(0|C)&&(le=fe+4|0,0==(8&bO[fe+12>>2]|0))&&ue>>>0>he>>>0&pe>>>0<=he>>>0){bO[le>>2]=_e+de,se=he+(oe=0==(7&(se=he+8|0)|0)?0:0-se&7)|0,G=(le=(0|bO[6])+de|0)-oe|0,bO[9]=se,bO[6]=G,bO[se+4>>2]=1|G,bO[he+le+4>>2]=40,bO[10]=bO[125];break}for(ue>>>0<(0|bO[7])>>>0&&(bO[7]=ue),le=ue+de|0,G=460;;){if((0|bO[G>>2])==(0|le)){C=162;break}if(!(se=0|bO[G+8>>2]))break;G=se}if(162==(0|C)&&0==(8&bO[G+12>>2]|0)){bO[G>>2]=ue,bO[(fe=G+4|0)>>2]=(0|bO[fe>>2])+de,se=ue+(0==(7&(fe=ue+8|0)|0)?0:0-fe&7)|0,oe=le+(0==(7&(fe=le+8|0)|0)?0:0-fe&7)|0,fe=se+E|0,n=oe-se-E|0,bO[se+4>>2]=3|E;t:do{if((0|he)==(0|oe))Y=(0|bO[6])+n|0,bO[6]=Y,bO[9]=fe,bO[fe+4>>2]=1|Y;else{if((0|bO[8])==(0|oe)){Y=(0|bO[5])+n|0,bO[5]=Y,bO[8]=fe,bO[fe+4>>2]=1|Y,bO[fe+Y>>2]=Y;break}if(1==(3&(Y=0|bO[oe+4>>2])|0)){ae=-8&Y,ie=Y>>>3;n:do{if(Y>>>0<256){if(re=0|bO[oe+8>>2],(0|(K=0|bO[oe+12>>2]))==(0|re)){bO[3]=bO[3]&~(1<<ie);break}bO[re+12>>2]=K,bO[K+8>>2]=re;break}re=0|bO[oe+24>>2],K=0|bO[oe+12>>2];do{if((0|K)==(0|oe)){if(i=0|bO[(ee=(te=oe+16|0)+4|0)>>2])ge=i,ye=ee;else{if(!(J=0|bO[te>>2])){ve=0;break}ge=J,ye=te}for(ee=ge,i=ye;;){if(J=0|bO[(te=ee+20|0)>>2])me=J,be=te;else{if(!(Z=0|bO[(X=ee+16|0)>>2]))break;me=Z,be=X}ee=me,i=be}bO[i>>2]=0,ve=ee}else te=0|bO[oe+8>>2],bO[te+12>>2]=K,bO[K+8>>2]=te,ve=K}while(0);if(!re)break;a=316+((K=0|bO[oe+28>>2])<<2)|0;do{if((0|bO[a>>2])==(0|oe)){if(bO[a>>2]=ve,0|ve)break;bO[4]=bO[4]&~(1<<K);break n}if(bO[((0|bO[(te=re+16|0)>>2])==(0|oe)?te:re+20|0)>>2]=ve,!ve)break n}while(0);if(bO[ve+24>>2]=re,0|(a=0|bO[(K=oe+16|0)>>2])&&(bO[ve+16>>2]=a,bO[a+24>>2]=ve),!(a=0|bO[K+4>>2]))break;bO[ve+20>>2]=a,bO[a+24>>2]=ve}while(0);ke=oe+ae|0,xe=ae+n|0}else ke=oe,xe=n;if(bO[(ie=ke+4|0)>>2]=-2&bO[ie>>2],bO[fe+4>>2]=1|xe,bO[fe+xe>>2]=xe,ie=xe>>>3,xe>>>0<256){Y=52+(ie<<1<<2)|0,(ne=0|bO[3])&(a=1<<ie)?(Te=a=Y+8|0,Se=0|bO[a>>2]):(bO[3]=ne|a,Te=Y+8|0,Se=Y),bO[Te>>2]=fe,bO[Se+12>>2]=fe,bO[fe+8>>2]=Se,bO[fe+12>>2]=Y;break}Y=xe>>>8;do{if(Y){if(xe>>>0>16777215){Pe=31;break}Pe=1&((a=(ie=14-((K=(ie=(a=Y<<(ne=(a=Y+1048320|0)>>>16&8))+520192|0)>>>16&4)|ne|(te=(a=(ie=a<<K)+245760|0)>>>16&2))+((a=ie<<te)>>>15)|0)+7|0)?xe>>>a:xe)|ie<<1}else Pe=0}while(0);if(Y=316+(Pe<<2)|0,bO[fe+28>>2]=Pe,bO[(ae=fe+16|0)+4>>2]=0,bO[ae>>2]=0,!((ae=0|bO[4])&(ie=1<<Pe))){bO[4]=ae|ie,bO[Y>>2]=fe,bO[fe+24>>2]=Y,bO[fe+12>>2]=fe,bO[fe+8>>2]=fe;break}ie=0|bO[Y>>2];n:do{if((-8&bO[ie+4>>2]|0)!=(0|xe)){for(Y=xe<<(31==(0|Pe)?0:25-(Pe>>>1)|0),ae=ie;a=0|bO[(Ie=ae+16+(Y>>>31<<2)|0)>>2];){if((-8&bO[a+4>>2]|0)==(0|xe)){we=a;break n}Y<<=1,ae=a}bO[Ie>>2]=fe,bO[fe+24>>2]=ae,bO[fe+12>>2]=fe,bO[fe+8>>2]=fe;break t}we=ie}while(0);Y=0|bO[(ie=we+8|0)>>2],bO[Y+12>>2]=fe,bO[ie>>2]=fe,bO[fe+8>>2]=Y,bO[fe+12>>2]=we,bO[fe+24>>2]=0}}while(0);return c7=t,0|(se+8|0)}for(fe=460;!((n=0|bO[fe>>2])>>>0<=he>>>0&&(Ae=n+(0|bO[fe+4>>2])|0)>>>0>he>>>0);)fe=0|bO[fe+8>>2];n=(fe=(n=(fe=Ae+-47|0)+(0==(7&(se=fe+8|0)|0)?0:0-se&7)|0)>>>0<(se=he+16|0)>>>0?he:n)+8|0,le=ue+(G=0==(7&(le=ue+8|0)|0)?0:0-le&7)|0,Y=(oe=de+-40|0)-G|0,bO[9]=le,bO[6]=Y,bO[le+4>>2]=1|Y,bO[ue+oe+4>>2]=40,bO[10]=bO[125],bO[(oe=fe+4|0)>>2]=27,bO[n>>2]=bO[115],bO[n+4>>2]=bO[116],bO[n+8>>2]=bO[117],bO[n+12>>2]=bO[118],bO[115]=ue,bO[116]=de,bO[118]=0,bO[117]=n,n=fe+24|0;do{Y=n,bO[(n=n+4|0)>>2]=7}while((Y+8|0)>>>0<Ae>>>0);if((0|fe)!=(0|he)){if(n=fe-he|0,bO[oe>>2]=-2&bO[oe>>2],bO[he+4>>2]=1|n,bO[fe>>2]=n,Y=n>>>3,n>>>0<256){le=52+(Y<<1<<2)|0,(G=0|bO[3])&(ie=1<<Y)?(Ee=ie=le+8|0,De=0|bO[ie>>2]):(bO[3]=G|ie,Ee=le+8|0,De=le),bO[Ee>>2]=he,bO[De+12>>2]=he,bO[he+8>>2]=De,bO[he+12>>2]=le;break}if(qe=(le=n>>>8)?n>>>0>16777215?31:1&((ie=(le=14-((Y=(le=(ie=le<<(G=(ie=le+1048320|0)>>>16&8))+520192|0)>>>16&4)|G|(re=(ie=(le=ie<<Y)+245760|0)>>>16&2))+((ie=le<<re)>>>15)|0)+7|0)?n>>>ie:n)|le<<1:0,le=316+(qe<<2)|0,bO[he+28>>2]=qe,bO[he+20>>2]=0,bO[se>>2]=0,!((ie=0|bO[4])&(re=1<<qe))){bO[4]=ie|re,bO[le>>2]=he,bO[he+24>>2]=le,bO[he+12>>2]=he,bO[he+8>>2]=he;break}re=0|bO[le>>2];t:do{if((-8&bO[re+4>>2]|0)!=(0|n)){for(le=n<<(31==(0|qe)?0:25-(qe>>>1)|0),ie=re;G=0|bO[(Re=ie+16+(le>>>31<<2)|0)>>2];){if((-8&bO[G+4>>2]|0)==(0|n)){Oe=G;break t}le<<=1,ie=G}bO[Re>>2]=he,bO[he+24>>2]=ie,bO[he+12>>2]=he,bO[he+8>>2]=he;break e}Oe=re}while(0);re=0|bO[(n=Oe+8|0)>>2],bO[re+12>>2]=he,bO[n>>2]=he,bO[he+8>>2]=re,bO[he+12>>2]=Oe,bO[he+24>>2]=0}}else 0==(0|(re=0|bO[7]))|ue>>>0<re>>>0&&(bO[7]=ue),bO[115]=ue,bO[116]=de,bO[118]=0,bO[12]=bO[121],bO[11]=-1,bO[16]=52,bO[15]=52,bO[18]=60,bO[17]=60,bO[20]=68,bO[19]=68,bO[22]=76,bO[21]=76,bO[24]=84,bO[23]=84,bO[26]=92,bO[25]=92,bO[28]=100,bO[27]=100,bO[30]=108,bO[29]=108,bO[32]=116,bO[31]=116,bO[34]=124,bO[33]=124,bO[36]=132,bO[35]=132,bO[38]=140,bO[37]=140,bO[40]=148,bO[39]=148,bO[42]=156,bO[41]=156,bO[44]=164,bO[43]=164,bO[46]=172,bO[45]=172,bO[48]=180,bO[47]=180,bO[50]=188,bO[49]=188,bO[52]=196,bO[51]=196,bO[54]=204,bO[53]=204,bO[56]=212,bO[55]=212,bO[58]=220,bO[57]=220,bO[60]=228,bO[59]=228,bO[62]=236,bO[61]=236,bO[64]=244,bO[63]=244,bO[66]=252,bO[65]=252,bO[68]=260,bO[67]=260,bO[70]=268,bO[69]=268,bO[72]=276,bO[71]=276,bO[74]=284,bO[73]=284,bO[76]=292,bO[75]=292,bO[78]=300,bO[77]=300,n=ue+(se=0==(7&(n=ue+8|0)|0)?0:0-n&7)|0,fe=(re=de+-40|0)-se|0,bO[9]=n,bO[6]=fe,bO[n+4>>2]=1|fe,bO[ue+re+4>>2]=40,bO[10]=bO[125]}while(0);if((ue=0|bO[6])>>>0>E>>>0)return de=ue-E|0,bO[6]=de,he=(ue=0|bO[9])+E|0,bO[9]=he,bO[he+4>>2]=1|de,bO[ue+4>>2]=3|E,c7=t,0|(ue+8|0)}return bO[(0|cb())>>2]=48,c7=t,0|0}function cd(e){var t,n=0,r=0,i=0,a=0,o=0,s=0,c=0,u=0,d=0,l=0,f=0,h=0,p=0,_=0,v=0,g=0,y=0,m=0,b=0,k=0,x=0,T=0,S=0,P=0,w=0,I=0,A=0,E=0,D=0,q=0,O=0,R=0;if(e|=0){n=e+-8|0,r=0|bO[7],t=n+(e=-8&(i=0|bO[e+-4>>2]))|0;do{if(1&i)d=n,l=n,f=e;else{if(a=0|bO[n>>2],!(3&i))return;if(s=a+e|0,(o=n+(0-a)|0)>>>0<r>>>0)return;if((0|bO[8])==(0|o)){if(3!=(3&(u=0|bO[(c=t+4|0)>>2])|0)){d=o,l=o,f=s;break}return bO[5]=s,bO[c>>2]=-2&u,bO[o+4>>2]=1|s,void(bO[o+s>>2]=s)}if(u=a>>>3,a>>>0<256){if(a=0|bO[o+8>>2],(0|(c=0|bO[o+12>>2]))==(0|a)){bO[3]=bO[3]&~(1<<u),d=o,l=o,f=s;break}bO[a+12>>2]=c,bO[c+8>>2]=a,d=o,l=o,f=s;break}a=0|bO[o+24>>2],c=0|bO[o+12>>2];do{if((0|c)==(0|o)){if(p=0|bO[(h=(u=o+16|0)+4|0)>>2])g=p,y=h;else{if(!(_=0|bO[u>>2])){v=0;break}g=_,y=u}for(h=g,p=y;;){if(_=0|bO[(u=h+20|0)>>2])k=_,x=u;else{if(!(b=0|bO[(m=h+16|0)>>2]))break;k=b,x=m}h=k,p=x}bO[p>>2]=0,v=h}else u=0|bO[o+8>>2],bO[u+12>>2]=c,bO[c+8>>2]=u,v=c}while(0);if(a){if(c=0|bO[o+28>>2],(0|bO[(u=316+(c<<2)|0)>>2])==(0|o)){if(bO[u>>2]=v,!v){bO[4]=bO[4]&~(1<<c),d=o,l=o,f=s;break}}else if(bO[((0|bO[(c=a+16|0)>>2])==(0|o)?c:a+20|0)>>2]=v,!v){d=o,l=o,f=s;break}bO[v+24>>2]=a,0|(u=0|bO[(c=o+16|0)>>2])&&(bO[v+16>>2]=u,bO[u+24>>2]=v),(u=0|bO[c+4>>2])?(bO[v+20>>2]=u,bO[u+24>>2]=v,d=o,l=o,f=s):(d=o,l=o,f=s)}else d=o,l=o,f=s}}while(0);if(!(d>>>0>=t>>>0)&&1&(n=0|bO[(e=t+4|0)>>2])){if(2&n)bO[e>>2]=-2&n,bO[l+4>>2]=1|f,bO[d+f>>2]=f,A=f;else{if((0|bO[9])==(0|t)){if(v=(0|bO[6])+f|0,bO[6]=v,bO[9]=l,bO[l+4>>2]=1|v,(0|l)!=(0|bO[8]))return;return bO[8]=0,void(bO[5]=0)}if((0|bO[8])==(0|t))return v=(0|bO[5])+f|0,bO[5]=v,bO[8]=d,bO[l+4>>2]=1|v,void(bO[d+v>>2]=v);v=(-8&n)+f|0,x=n>>>3;do{if(n>>>0<256){if(k=0|bO[t+8>>2],(0|(y=0|bO[t+12>>2]))==(0|k)){bO[3]=bO[3]&~(1<<x);break}bO[k+12>>2]=y,bO[y+8>>2]=k;break}k=0|bO[t+24>>2],y=0|bO[t+12>>2];do{if((0|y)==(0|t)){if(i=0|bO[(r=(g=t+16|0)+4|0)>>2])S=i,P=r;else{if(!(u=0|bO[g>>2])){T=0;break}S=u,P=g}for(r=S,i=P;;){if(u=0|bO[(g=r+20|0)>>2])w=u,I=g;else{if(!(_=0|bO[(c=r+16|0)>>2]))break;w=_,I=c}r=w,i=I}bO[i>>2]=0,T=r}else h=0|bO[t+8>>2],bO[h+12>>2]=y,bO[y+8>>2]=h,T=y}while(0);if(0|k){if(y=0|bO[t+28>>2],(0|bO[(s=316+(y<<2)|0)>>2])==(0|t)){if(bO[s>>2]=T,!T){bO[4]=bO[4]&~(1<<y);break}}else if(bO[((0|bO[(y=k+16|0)>>2])==(0|t)?y:k+20|0)>>2]=T,!T)break;bO[T+24>>2]=k,0|(s=0|bO[(y=t+16|0)>>2])&&(bO[T+16>>2]=s,bO[s+24>>2]=T),0|(s=0|bO[y+4>>2])&&(bO[T+20>>2]=s,bO[s+24>>2]=T)}}while(0);if(bO[l+4>>2]=1|v,bO[d+v>>2]=v,(0|l)==(0|bO[8]))return void(bO[5]=v);A=v}if(f=A>>>3,A>>>0<256)return d=52+(f<<1<<2)|0,(n=0|bO[3])&(e=1<<f)?(E=e=d+8|0,D=0|bO[e>>2]):(bO[3]=n|e,E=d+8|0,D=d),bO[E>>2]=l,bO[D+12>>2]=l,bO[l+8>>2]=D,void(bO[l+12>>2]=d);q=(d=A>>>8)?A>>>0>16777215?31:1&((D=(d=14-((e=(d=(D=d<<(E=(D=d+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(n=(D=(d=D<<e)+245760|0)>>>16&2))+((D=d<<n)>>>15)|0)+7|0)?A>>>D:A)|d<<1:0,d=316+(q<<2)|0,bO[l+28>>2]=q,bO[l+20>>2]=0,bO[l+16>>2]=0,D=0|bO[4],n=1<<q;e:do{if(D&n){E=0|bO[d>>2];t:do{if((-8&bO[E+4>>2]|0)!=(0|A)){for(e=A<<(31==(0|q)?0:25-(q>>>1)|0),f=E;v=0|bO[(R=f+16+(e>>>31<<2)|0)>>2];){if((-8&bO[v+4>>2]|0)==(0|A)){O=v;break t}e<<=1,f=v}bO[R>>2]=l,bO[l+24>>2]=f,bO[l+12>>2]=l,bO[l+8>>2]=l;break e}O=E}while(0);k=0|bO[(E=O+8|0)>>2],bO[k+12>>2]=l,bO[E>>2]=l,bO[l+8>>2]=k,bO[l+12>>2]=O,bO[l+24>>2]=0}else bO[4]=D|n,bO[d>>2]=l,bO[l+24>>2]=d,bO[l+12>>2]=l,bO[l+8>>2]=l}while(0);if(l=(0|bO[11])-1|0,bO[11]=l,!(0|l)){for(l=468;O=0|bO[l>>2];)l=O+8|0;bO[11]=-1}}}}function ce(e){var t,n,r;t=(e|=0)+3&-4,e=0|cj(),r=(n=0|bO[e>>2])+t|0;do{if((0|t)<1|r>>>0>n>>>0){if(r>>>0>(0|c4())>>>0&&0==(0|c6(0|r)))break;return bO[e>>2]=r,0|n}}while(0);return bO[(0|cb())>>2]=48,0|-1}function cf(e){var t;return t=c7,c7=(c7=c7+(e|=0)|0)+15&-16,0|t}function cg(e){c7=e|=0}function ch(){return 0|c7}function ci(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(c1(t<<n|(e&(1<<n)-1<<32-n)>>>32-n|0),e<<n):(c1(e<<n-32|0),0)}function cj(){return 528}function(){}function cl(e,t,n){e|=0,t|=0;var r,i,a=0;if((0|(n|=0))>=512)return c5(0|e,0|t,0|n),0|e;if(r=0|e,i=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|r;bN[e>>0]=0|bN[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(n=(a=-4&i|0)-64|0;(0|e)<=(0|n);)bO[e>>2]=bO[t>>2],bO[e+4>>2]=bO[t+4>>2],bO[e+8>>2]=bO[t+8>>2],bO[e+12>>2]=bO[t+12>>2],bO[e+16>>2]=bO[t+16>>2],bO[e+20>>2]=bO[t+20>>2],bO[e+24>>2]=bO[t+24>>2],bO[e+28>>2]=bO[t+28>>2],bO[e+32>>2]=bO[t+32>>2],bO[e+36>>2]=bO[t+36>>2],bO[e+40>>2]=bO[t+40>>2],bO[e+44>>2]=bO[t+44>>2],bO[e+48>>2]=bO[t+48>>2],bO[e+52>>2]=bO[t+52>>2],bO[e+56>>2]=bO[t+56>>2],bO[e+60>>2]=bO[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|a);)bO[e>>2]=bO[t>>2],e=e+4|0,t=t+4|0}else for(a=i-4|0;(0|e)<(0|a);)bN[e>>0]=0|bN[t>>0],bN[e+1>>0]=0|bN[t+1>>0],bN[e+2>>0]=0|bN[t+2>>0],bN[e+3>>0]=0|bN[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|i);)bN[e>>0]=0|bN[t>>0],e=e+1|0,t=t+1|0;return 0|r}function cm(e,t,n){t|=0;var r,i=0,a=0,o=0;if(r=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)bN[e>>0]=t,e=e+1|0;for(a=t|t<<8|t<<16|t<<24,o=(i=-4&r|0)-64|0;(0|e)<=(0|o);)bO[e>>2]=a,bO[e+4>>2]=a,bO[e+8>>2]=a,bO[e+12>>2]=a,bO[e+16>>2]=a,bO[e+20>>2]=a,bO[e+24>>2]=a,bO[e+28>>2]=a,bO[e+32>>2]=a,bO[e+36>>2]=a,bO[e+40>>2]=a,bO[e+44>>2]=a,bO[e+48>>2]=a,bO[e+52>>2]=a,bO[e+56>>2]=a,bO[e+60>>2]=a,e=e+64|0;for(;(0|e)<(0|i);)bO[e>>2]=a,e=e+4|0}for(;(0|e)<(0|r);)bN[e>>0]=t,e=e+1|0;return r-n|0}var cn={};return cn[_qdb("0x4d3")]=cb,cn[_qdb("0x200")]=ci,cn[_qdb("0x3df")]=ca,cn[_qdb("0x19f")]=cj,cn[_qdb("0x658")]=cd,cn[_qdb("0x1ac")]=ck,cn[_qdb("0xa0")]=cc,cn[_qdb("0x20f")]=cl,cn[_qdb("0x1d9")]=cm,cn[_qdb("0x4b7")]=cf,cn[_qdb("0x284")]=cg,cn[_qdb("0x2c7")]=ch,cn}(b5,b7,a7),b9=k[_qdb("0x4d3")]=b8[_qdb("0x4d3")],ba=k[_qdb("0x200")]=b8[_qdb("0x200")],bb=k[_qdb("0x3df")]=b8[_qdb("0x3df")],bc=k[_qdb("0x19f")]=b8[_qdb("0x19f")],bd=k[_qdb("0x658")]=b8[_qdb("0x658")],be=k[_qdb("0x1ac")]=b8[_qdb("0x1ac")],bf=k[_qdb("0xa0")]=b8[_qdb("0xa0")],bg=k[_qdb("0x20f")]=b8[_qdb("0x20f")],bh=k[_qdb("0x1d9")]=b8[_qdb("0x1d9")],bi=k[_qdb("0x4b7")]=b8[_qdb("0x4b7")],bj=k[_qdb("0x284")]=b8[_qdb("0x284")],bk=k[_qdb("0x2c7")]=b8[_qdb("0x2c7")],bq;if(k[_qdb("0x2e8")]=b8,k[_qdb("0x44c")]=W,aJ)if(aM(aJ)||(aJ=v(aJ)),s||t){var bl=y(aJ);a9[_qdb("0x33f")](bl,N)}else{aG(_qdb("0x48f"));var bm=function(){},bn=function(){x(aJ,bm,(function(){throw new Error(_qdb("0x510")+aJ)}))},bo=b3(aJ);if(bo)bm(bo[_qdb("0x38")]);else if(k[_qdb("0x5a9")]){var bp=function(){};k[_qdb("0x5a9")][_qdb("0x63b")]?setTimeout(bp,0):k[_qdb("0x5a9")][_qdb("0x54e")](_qdb("0x5cf"),bp)}else bn()}if(aF=function a(){bq||bs(),bq||(aF=a)},k[_qdb("0x509")]=bs,k[_qdb("0x433")])for(typeof k[_qdb("0x433")]==_qdb("0x16d")&&(k[_qdb("0x433")]=[k[_qdb("0x433")]]);k[_qdb("0x433")][_qdb("0x319")]>0;)k[_qdb("0x433")][_qdb("0x660")]()();P=!0,bs(),f=k[_qdb("0x44c")](_qdb("0x688"),_qdb("0x3a"),[_qdb("0x3a")])}function v(e){if(_qdb("0x90")==_qdb("0x90")){if(k[_qdb("0x189")]){if(_qdb("0x51c")==_qdb("0x51c"))return k[_qdb("0x189")](e,u);b4[5]=0,b4[8]=0,b4[ka+4>>2]=3|_,ja=ka+_+4|0,b4[ja>>2]=1|b4[ja>>2]}return u+e}b4[3]=b6|j,E=l+8|0,F=l}function D(e){if(_qdb("0x400")!==_qdb("0x91")){var t=ac[aj>>2],n=t+e+15&-16;return ac[aj>>2]=n,t}p+=37843}function E(e){if(_qdb("0x13e")==_qdb("0x13e"))switch(e){case"i1":case"i8":return 1;case _qdb("0x2dd"):return 2;case _qdb("0x163"):return 4;case _qdb("0x4ff"):return 8;case _qdb("0x40e"):return 4;case _qdb("0x1d5"):return 8;default:if(_qdb("0x39f")===_qdb("0x3bb"))0===stack&&(stack=bk()),cArgs[i]=converter(args[i]);else if("*"===e[e[_qdb("0x319")]-1]){if(_qdb("0xa8")==_qdb("0xa8"))return 4;bytes[i]=decoded[_qdb("0x687")](i)}else if("i"===e[0]){if(_qdb("0x11d")==_qdb("0x11d")){var t=Number(e[_qdb("0x2a4")](1));return T(t%8==0,_qdb("0xdd")+t+_qdb("0x354")+e),t/8}var n=toC[argTypes[i]];n?(0===stack&&(stack=bk()),cArgs[i]=n(args[i])):cArgs[i]=args[i]}else{if(_qdb("0x4c9")==_qdb("0x4c9"))return 0;k[_qdb("0x5d8")](aD)}}else E=D,F=C}function F(e){if(_qdb("0x215")!==_qdb("0x662")){if(F[_qdb("0x24c")]||(F[_qdb("0x24c")]={}),!F[_qdb("0x24c")][e]){if(_qdb("0x338")!=_qdb("0x338")){for(var t=b1(s),n=new Uint8Array(t[_qdb("0x319")]),r=0;r<t[_qdb("0x319")];++r)n[r]=t[_qdb("0x687")](r);return n}F[_qdb("0x24c")][e]=1,B(e)}}else p+=42849}function J(e,t,n){if(_qdb("0x4bf")==_qdb("0x4bf"))if(n&&n[_qdb("0x319")]){if(_qdb("0x5fe")!==_qdb("0x37d"))return k[_qdb("0x1ca")+e][_qdb("0x6ca")](null,[t][_qdb("0x31d")](n));p+=-37295}else{if(_qdb("0x478")!==_qdb("0x539"))return k[_qdb("0x1ca")+e][_qdb("0x3c3")](null,t);p+=-4030}else{var r=str[_qdb("0x687")](i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&str[_qdb("0x687")](++i)),r<=127?++len:len+=r<=2047?2:r<=65535?3:4}}function Q(e,t,n,r){if(_qdb("0x207")===_qdb("0x83"))p+=25607;else switch("*"===(n=n||"i8")[_qdb("0x525")](n[_qdb("0x319")]-1)&&(n=_qdb("0x163")),n){case"i1":case"i8":a8[e>>0]=t;break;case _qdb("0x2dd"):aa[e>>1]=t;break;case _qdb("0x163"):ac[e>>2]=t;break;case _qdb("0x4ff"):aP=[t>>>0,(aO=t,+az(aO)>=1?aO>0?(0|aC(+aB(aO/4294967296),4294967295))>>>0:~~+aA((aO-+(~~aO>>>0))/4294967296)>>>0:0)],ac[e>>2]=aP[0],ac[e+4>>2]=aP[1];break;case _qdb("0x40e"):ae[e>>2]=t;break;case _qdb("0x1d5"):af[e>>3]=t;break;default:aI(_qdb("0x59f")+n)}}function T(e,t){if(_qdb("0x194")===_qdb("0x3cf"))return 0;e||(_qdb("0x5b8")!==_qdb("0x633")?aI(_qdb("0x237")+t):j[_qdb("0x63d")]="u")}function U(e){if(_qdb("0x652")!==_qdb("0x563")){var t=k["_"+e];return T(t,_qdb("0x64e")+e+_qdb("0x2b7")),t}p+=-2333}function V(e,t,n,r,i){if(_qdb("0x129")!==_qdb("0x184")){var a={};a[_qdb("0x546")]=function(e){if(_qdb("0x60a")==_qdb("0x60a")){var t=0;if(null!==e&&e!==undefined&&0!==e)if(_qdb("0x464")!==_qdb("0x15a")){var n=1+(e[_qdb("0x319")]<<2);a2(e,t=bi(n),n)}else aq=!0,al(an);return t}za=la,Aa=d},a[_qdb("0x68b")]=function(e){if(_qdb("0x503")!==_qdb("0x554")){var t=bi(e[_qdb("0x319")]);return a5(e,t),t}R=L,S=X,T=Y,O=65};var o=a;var s=U(e),c=[],u=0;if(r)if(_qdb("0x632")===_qdb("0x486"))p+=-34334;else for(var l=0;l<r[_qdb("0x319")];l++)if(_qdb("0x15f")!=_qdb("0x15f"))requestedSize>>>=0,aW(requestedSize);else{var f=o[n[l]];if(f)_qdb("0x595")!==_qdb("0x32f")?(0===u&&(u=bk()),c[l]=f(r[l])):p+=29420;else{if(_qdb("0xb1")===_qdb("0x11"))throw k[_qdb("0x1e1")]&&k[_qdb("0x1e1")](what),what+="",B(what),R=!0,S=1,what=_qdb("0x415")+what+_qdb("0xa4"),what;c[l]=r[l]}}var h=s[_qdb("0x6ca")](null,c);return h=function(e){if(_qdb("0x41f")==_qdb("0x41f"))return t===_qdb("0x546")?a0(e):t===_qdb("0x5c1")?Boolean(e):e;E=w,F=v}(h),0!==u&&bj(u),h}return r&&r[_qdb("0x319")]?k[_qdb("0x1ca")+sig][_qdb("0x6ca")](null,[ptr][_qdb("0x31d")](r)):k[_qdb("0x1ca")+sig][_qdb("0x3c3")](null,ptr)}function W(t,r,a,o){if(_qdb("0x56f")==_qdb("0x56f")){var c=(a=a||[])[_qdb("0xf5")]((function(e){if(_qdb("0x38c")!==_qdb("0x54c"))return e===_qdb("0x3a");Z=(0|b4[6])+d|0,b4[6]=Z,b4[9]=qa,b4[qa+4>>2]=1|Z}));if(r!==_qdb("0x546")&&c&&!o){if(_qdb("0x51d")==_qdb("0x51d"))return U(t);b4[y+16>>2]=i,b4[i+24>>2]=y}return function(){if(_qdb("0x3b")!==_qdb("0x4c2"))return V(t,r,a,arguments,o);p+=-7911}}b4[n+4>>2]=3|e,b4[i+4>>2]=1|h,b4[i+h>>2]=h,0|m&&(f=0|b4[8],s=52+((k=m>>>3)<<1<<2)|0,(v=1<<k)&g?(G=v=s+8|0,H=0|b4[v>>2]):(b4[3]=v|g,G=s+8|0,H=s),b4[G>>2]=f,b4[H+12>>2]=f,b4[f+8>>2]=H,b4[f+12>>2]=s),b4[5]=h,b4[8]=i}function Z(t,r,a){if(_qdb("0x28d")!==_qdb("0x6cf")){for(var c=r+a,d=r;t[d]&&!(d>=c);)++d;if(d-r>16&&t[_qdb("0x58d")]&&Y){if(_qdb("0x3d5")!==_qdb("0x5c5"))return Y[_qdb("0x378")](t[_qdb("0x58d")](r,d));k[_qdb("0x5a9")][_qdb("0x54e")](_qdb("0x5cf"),bp)}else{if(_qdb("0x657")===_qdb("0x6a2"))return l=52+(n<<1<<2)|0,(b6=0|b4[3])&(j=1<<n)?(E=j=l+8|0,F=0|b4[j>>2]):(b4[3]=b6|j,E=l+8|0,F=l),b4[E>>2]=m,b4[F+12>>2]=m,b4[m+8>>2]=F,void(b4[m+12>>2]=l);for(var f="";r<d;)if(_qdb("0x47")===_qdb("0x68"))p+=-7777;else{var v=t[r++];if(!(128&v)){if(_qdb("0x158")==_qdb("0x158")){f+=String[_qdb("0x35a")](v);continue}X=M,Y=N}var g=63&t[r++];if(192==(224&v)){if(_qdb("0x5a2")!==_qdb("0x3a6")){f+=String[_qdb("0x35a")]((31&v)<<6|g);continue}z=k,A=s}var y=63&t[r++];if(224==(240&v)){if(_qdb("0x34c")!=_qdb("0x34c"))return ja=ka-I|0,b4[6]=ja,_=0|b4[9],Z=_+I|0,b4[9]=Z,b4[Z+4>>2]=1|ja,b4[_+4>>2]=3|I,o=_+8|0,u=b6,0|o;v=(15&v)<<12|g<<6|y}else _qdb("0x552")!=_qdb("0x552")?ar=!0:v=(7&v)<<18|g<<12|y<<6|63&t[r++];if(v<65536)if(_qdb("0x4b6")!=_qdb("0x4b6")){if(200==xhr[_qdb("0x50a")]||0==xhr[_qdb("0x50a")]&&xhr[_qdb("0x63b")])return void onload(xhr[_qdb("0x63b")]);var b=b3(url);if(b)return void onload(b[_qdb("0x38")]);onerror()}else f+=String[_qdb("0x35a")](v);else if(_qdb("0x1b4")==_qdb("0x1b4")){var x=v-65536;f+=String[_qdb("0x35a")](55296|x>>10,56320|1023&x)}else h=w,i=$,n=e}}return f}if(k[_qdb("0x296")])for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];)ax(k[_qdb("0x296")][_qdb("0x495")]());al(am)}function a0(e,t){if(_qdb("0x498")!==_qdb("0x68d"))return e?Z(a9,e,t):"";p+=47107}function a1(e,n,r,i){if(_qdb("0x6a9")!==_qdb("0x5d4")){if(!(i>0))return 0;for(var a=r,c=r+i-1,u=0;u<e[_qdb("0x319")];++u)if(_qdb("0x417")!=_qdb("0x417"))p+=39038;else{var f=e[_qdb("0x687")](u);if(f>=55296&&f<=57343)if(_qdb("0x361")==_qdb("0x361"))f=65536+((1023&f)<<10)|1023&e[_qdb("0x687")](++u);else p+=1354;if(f<=127)if(_qdb("0x315")===_qdb("0x4d0"))E=j=l+8|0,F=0|b4[j>>2];else{if(r>=c)break;n[r++]=f}else if(f<=2047)if(_qdb("0x155")===_qdb("0x6b"))b4[b6>>2]=b4[d>>2],b4[b6+4>>2]=b4[d+4>>2],b4[b6+8>>2]=b4[d+8>>2],b4[b6+12>>2]=b4[d+12>>2],b4[b6+16>>2]=b4[d+16>>2],b4[b6+20>>2]=b4[d+20>>2],b4[b6+24>>2]=b4[d+24>>2],b4[b6+28>>2]=b4[d+28>>2],b4[b6+32>>2]=b4[d+32>>2],b4[b6+36>>2]=b4[d+36>>2],b4[b6+40>>2]=b4[d+40>>2],b4[b6+44>>2]=b4[d+44>>2],b4[b6+48>>2]=b4[d+48>>2],b4[b6+52>>2]=b4[d+52>>2],b4[b6+56>>2]=b4[d+56>>2],b4[b6+60>>2]=b4[d+60>>2],b6=b6+64|0,d=d+64|0;else{if(r+1>=c)break;n[r++]=192|f>>6,n[r++]=128|63&f}else if(f<=65535)if(_qdb("0x3b1")===_qdb("0x31e"))p+=-22037;else{if(r+2>=c)break;n[r++]=224|f>>12,n[r++]=128|f>>6&63,n[r++]=128|63&f}else if(_qdb("0x60c")==_qdb("0x60c")){if(r+3>=c)break;n[r++]=240|f>>18,n[r++]=128|f>>12&63,n[r++]=128|f>>6&63,n[r++]=128|63&f}else s=p,t=o}return n[r]=0,r-a}p+=-16907}function a2(e,t,n){if(_qdb("0x45b")!=_qdb("0x45b")){argTypes=argTypes||[];var r=argTypes[_qdb("0xf5")]((function(){}));return returnType!==_qdb("0x546")&&r&&!opts?U(ident):function(){return V(ident,returnType,argTypes,arguments,opts)}}return a1(e,a9,t,n)}function a3(e){if(_qdb("0x603")==_qdb("0x603")){for(var t=0,n=0;n<e[_qdb("0x319")];++n)if(_qdb("0x428")!=_qdb("0x428"))u=self[_qdb("0x87")][_qdb("0x389")];else{var r=e[_qdb("0x687")](n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e[_qdb("0x687")](++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}onload(bl[_qdb("0x38")])}function a5(e,t){_qdb("0x541")!==_qdb("0x70")?a8[_qdb("0x33f")](e,t):p+=39984}function a6(e,t,n){if(_qdb("0x5b9")==_qdb("0x5b9")){for(var r=0;r<e[_qdb("0x319")];++r)_qdb("0x126")===_qdb("0x3e8")?p+=3766:a8[t++>>0]=e[_qdb("0x687")](r);n||(a8[t>>0]=0)}else aD++,k[_qdb("0x5d8")]&&k[_qdb("0x5d8")](aD)}function ag(e){_qdb("0x322")!==_qdb("0x3b0")?(a7=e,k[_qdb("0x668")]=a8=new Int8Array(e),k[_qdb("0x325")]=aa=new Int16Array(e),k[_qdb("0x481")]=ac=new Int32Array(e),k[_qdb("0x228")]=a9=new Uint8Array(e),k[_qdb("0x54d")]=ab=new Uint16Array(e),k[_qdb("0x13f")]=ad=new Uint32Array(e),k[_qdb("0x42f")]=ae=new Float32Array(e),k[_qdb("0x500")]=af=new Float64Array(e)):a9[_qdb("0x33f")](a9[_qdb("0x58d")](src,src+num),dest)}function al(e){if(_qdb("0x31b")!==_qdb("0x373"))for(;e[_qdb("0x319")]>0;)if(_qdb("0x661")==_qdb("0x661")){var t=e[_qdb("0x495")]();if(typeof t==_qdb("0x16d")){if(_qdb("0x579")!==_qdb("0x4b0")){t(k);continue}b4[123]=4096,b4[122]=4096,b4[124]=-1,b4[125]=-1,b4[126]=0,b4[114]=0,b4[121]=-16&d^1431655768,la=4096}var i=t[_qdb("0x5bf")];if(typeof i===_qdb("0x3a"))if(_qdb("0x320")!==_qdb("0x414"))if(t[_qdb("0x6a4")]===undefined){if(_qdb("0x560")===_qdb("0x1cb"))return r=(0|b4[5])+n|0,b4[5]=r,b4[8]=l,b4[m+4>>2]=1|r,void(b4[l+r>>2]=r);k[_qdb("0x4cb")](i)}else{if(_qdb("0x32")===_qdb("0x294"))return aK(filename,aL);k[_qdb("0xe5")](i,t[_qdb("0x6a4")])}else pa=ga,qa=fa,O=136;else _qdb("0x1b5")==_qdb("0x1b5")?i(t[_qdb("0x6a4")]===undefined?null:t[_qdb("0x6a4")]):p+=8001}else b4[j>>2]=-2&b6,b4[m+4>>2]=1|n,b4[l+n>>2]=n,D=n;else xa=ea,ya=ga}function as(){if(_qdb("0x374")!=_qdb("0x374"))p+=-27396;else{if(k[_qdb("0x296")]){if(_qdb("0x1eb")===_qdb("0x3a2"))return ja=_-I|0,ka=0|b4[8],ja>>>0>15?(Z=ka+I|0,b4[8]=Z,b4[5]=ja,b4[Z+4>>2]=1|ja,b4[ka+_>>2]=ja,b4[ka+4>>2]=3|I):(b4[5]=0,b4[8]=0,b4[ka+4>>2]=3|_,ja=ka+_+4|0,b4[ja>>2]=1|b4[ja>>2]),o=ka+8|0,u=b6,0|o;for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];){if(_qdb("0x1d8")!=_qdb("0x1d8"))return 4;ax(k[_qdb("0x296")][_qdb("0x495")]())}}al(am)}}function at(){_qdb("0x58a")!==_qdb("0x697")?(aq=!0,al(an)):p+=-30434}function au(){_qdb("0x2a")!=_qdb("0x2a")?(U=Q,V=D):al(ao)}function av(){if(_qdb("0x240")===_qdb("0x468")){var e=Number(type[_qdb("0x2a4")](1));return T(e%8==0,_qdb("0xdd")+e+_qdb("0x354")+type),e/8}ar=!0}function aw(){if(_qdb("0x567")===_qdb("0x3cd"))return bl;if(k[_qdb("0xc9")])if(_qdb("0x456")==_qdb("0x456"))for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)_qdb("0x51b")==_qdb("0x51b")?ay(k[_qdb("0xc9")][_qdb("0x495")]()):(ga=0|b4[la+8>>2],b4[ga+12>>2]=aa,b4[aa+8>>2]=ga,ua=aa);else{var e=k[_qdb("0x5a9")],t=e[_qdb("0x63b")];if(200!==e[_qdb("0x50a")]&&0!==e[_qdb("0x50a")]){var n=b3(k[_qdb("0x3c7")]);if(!n)return console[_qdb("0x186")](_qdb("0x591")+e[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t=n[_qdb("0x38")]}bm(t)}al(ap)}function ax(e){_qdb("0x5d5")===_qdb("0x5f1")?p+=14107:am[_qdb("0x23c")](e)}function ay(e){_qdb("0x23")!==_qdb("0x46b")?ap[_qdb("0x23c")](e):i=j(_qdb("0x4e"))}function aG(e){_qdb("0xec")!=_qdb("0xec")?p+=7133:(aD++,k[_qdb("0x5d8")]&&(_qdb("0x44b")===_qdb("0x590")?u0=(7&u0)<<18|u1<<12|u2<<6|63&heap[idx++]:k[_qdb("0x5d8")](aD)))}function aH(e){if(_qdb("0x57e")==_qdb("0x57e")){if(aD--,k[_qdb("0x5d8")]&&(_qdb("0x48a")==_qdb("0x48a")?k[_qdb("0x5d8")](aD):p+=25017),0==aD)if(_qdb("0x2f6")===_qdb("0x667"))objkey=objkey[_qdb("0xdf")]();else if(null!==aE&&(_qdb("0x618")!==_qdb("0x480")?(clearInterval(aE),aE=null):p+=35631),aF){if(_qdb("0x2dc")===_qdb("0x92")){var t=b3(url);if(t)return b0(t);throw B}var n=aF;aF=null,n()}}else{var r=new XMLHttpRequest;r[_qdb("0x6bc")](_qdb("0xf9"),url,!0),r[_qdb("0x254")]=_qdb("0x141"),r[_qdb("0x2a6")]=function(){},r[_qdb("0x62e")]=onerror,r[_qdb("0x2ef")](null)}}function aI(e){if(_qdb("0x113")==_qdb("0x113"))throw k[_qdb("0x1e1")]&&(_qdb("0x4f0")!=_qdb("0x4f0")?p+=10774:k[_qdb("0x1e1")](e)),B(e+=""),R=!0,S=1,e=_qdb("0x415")+e+_qdb("0xa4");if(!f)return _qdb("0x118");var t="",n=a3(urlpara),r=bf(n+1);a2(urlpara,r,n+1);var i=f(r);return bd(r),i&&(t=a0(i),bd(i)),t}function aK(e,t){if(_qdb("0x2c1")==_qdb("0x2c1"))return String[_qdb("0x51")][_qdb("0x219")]?e[_qdb("0x219")](t):0===e[_qdb("0x2ae")](t);a8[_qdb("0x33f")](array,a7)}function aM(e){if(_qdb("0x626")==_qdb("0x626"))return aK(e,aL);bq||(bq=!0,k[_qdb("0x263")]=!0,R||(at(),au(),k[_qdb("0x653")]&&k[_qdb("0x653")](),aw()))}function aR(e){if(_qdb("0x36b")!==_qdb("0x53d"))return e;k[_qdb("0x2f")]("")}function aS(e){if(_qdb("0x5a7")!==_qdb("0x100")){return e[_qdb("0x210")](/\b__Z[\w\d_]+/g,(function(e){if(_qdb("0x307")==_qdb("0x307")){var t=aR(e);return e===t?e:t+" ["+e+"]"}return K}))}}function aT(){if(_qdb("0x3f5")==_qdb("0x3f5")){var e=new Error;if(!e[_qdb("0x6cc")])if(_qdb("0xc6")==_qdb("0xc6")){try{if(_qdb("0x368")==_qdb("0x368"))throw new Error;p+=-6170}catch(t){_qdb("0x247")===_qdb("0x1af")?p+=-14833:e=t}if(!e[_qdb("0x6cc")]){if(_qdb("0x225")!==_qdb("0x171"))return _qdb("0x245");ba=g,ca=k}}else a7=buf,k[_qdb("0x668")]=a8=new Int8Array(buf),k[_qdb("0x325")]=aa=new Int16Array(buf),k[_qdb("0x481")]=ac=new Int32Array(buf),k[_qdb("0x228")]=a9=new Uint8Array(buf),k[_qdb("0x54d")]=ab=new Uint16Array(buf),k[_qdb("0x13f")]=ad=new Uint32Array(buf),k[_qdb("0x42f")]=ae=new Float32Array(buf),k[_qdb("0x500")]=af=new Float64Array(buf);return e[_qdb("0x6cc")][_qdb("0x15")]()}if(k[_qdb("0xc9")])for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)ay(k[_qdb("0xc9")][_qdb("0x495")]());al(ap)}function aU(){if(_qdb("0x4e6")!=_qdb("0x4e6")){if(!e)return 0|f;j[F>>0]=0|j[Q>>0],F=F+1|0,Q=Q+1|0,e=e-1|0}else for(var t=53169;;)if(_qdb("0x535")===_qdb("0x3da"))bq||bs(),bq||(aF=runCaller);else switch(t){case 56024:ce[16]=_qdb("0x659"),ce[3]=_qdb("0x613"),t+=-24831;break;case 61241:ce[15]=_qdb("0x6b2"),t+=-1889;break;case 15387:ce[38]=_qdb("0x69"),ce[37]=_qdb("0x177"),ce[25]=_qdb("0x6a3"),ce[19]=_qdb("0x640"),t+=26636;break;case 17630:ce[6]=_qdb("0x55a"),ce[5]=_qdb("0x686"),t+=-9162;break;case 515:ce[4]=_qdb("0x47a"),ce[5]=_qdb("0x11e"),ce[24]=_qdb("0x62a"),t+=30156;break;case 25634:i[103]=[],t+=-3691;break;case 28946:M=e,t+=-18581;break;case 43470:try{if(_qdb("0x41d")!=_qdb("0x41d"))return k[_qdb("0x189")]?k[_qdb("0x189")](path,u):u+path;Q=Object[_qdb("0x51")][_qdb("0x15")][_qdb("0x3c3")](M(_qdb("0x1fa")))===_qdb("0x6b8")}catch(ye){}t+=-33663;break;case 19317:ce[24]=_qdb("0x300"),ce[4]=_qdb("0x135"),ce[21]=_qdb("0x3d2"),ce[7]=_qdb("0x47e"),t+=18648;break;case 21758:ce[13]=_qdb("0x73"),ce[24]=_qdb("0x3e0"),ce[28]=_qdb("0x56e"),t+=3876;break;case 56419:ce[2]=_qdb("0x1aa"),t+=-49406;break;case 44830:ce[9]=_qdb("0xc8"),ce[16]=_qdb("0x1d6"),t+=-13748;break;case 31150:ce[10]=_qdb("0x5e4"),ce[20]=_qdb("0x69b"),ce[11]=_qdb("0x52"),t+=5624;break;case 43969:ce[0]=_qdb("0x5a0"),ce[12]=_qdb("0x1b6"),t+=1858;break;case 42111:ce[28]=_qdb("0x2f7"),ce[22]=_qdb("0x3f0"),t+=18213;break;case 10789:M++,t+=35243;break;case 10264:ce[4]=_qdb("0x211"),ce[0]=_qdb("0x3e1"),ce[5]=_qdb("0x35e"),ce[13]=_qdb("0x3de"),t+=35394;break;case 21950:ce=i[93],t+=-9285;break;case 8577:ce[17]=_qdb("0xd4"),t+=32569;break;case 43122:ce[17]=_qdb("0x696"),t+=3991;break;case 1531:ce[7]=_qdb("0x574"),ce[14]=_qdb("0x3ae"),ce[9]=_qdb("0xb0"),t+=25149;break;case 1692:t+=44415;break;case 10713:ce[18]=_qdb("0x561"),ce[25]=_qdb("0x13b"),t+=20908;break;case 59570:ce=i[48],t+=-39589;break;case 58161:if(M<ce[_qdb("0x319")]){if(_qdb("0x241")!=_qdb("0x241"))return _qdb("0x118");t+=-13216}else _qdb("0x3a7")==_qdb("0x3a7")?t+=-47550:t+=22481;break;case 17368:ce[14]=_qdb("0x69d"),ce[12]=_qdb("0x309"),ce[1]=_qdb("0x137"),ce[28]=_qdb("0x1bc"),t+=-6655;break;case 7013:ce[8]=_qdb("0x5fb"),t+=46942;break;case 2271:ce[7]=_qdb("0xfa"),ce[19]=_qdb("0x5e7"),t+=10335;break;case 4782:ce[9]=_qdb("0x27f"),ce[15]=_qdb("0x29a"),ce[23]=_qdb("0x6f"),ce[4]=_qdb("0x570"),t+=164;break;case 9141:Q=Q[_qdb("0x5ff")],t+=29;break;case 26039:ce[30]=_qdb("0x28f"),ce[6]=_qdb("0x5e1"),ce[10]=_qdb("0x608"),t+=-2641;break;case 48532:t+=7074;break;case 38717:ce[0]=_qdb("0x50c"),t+=-14849;break;case 49373:F++,t+=13923;break;case 23868:ce[1]=_qdb("0x467"),ce[6]=_qdb("0x196"),t+=8758;break;case 42710:i[65]=[],t+=-5026;break;case 53169:var i=[];t+=11294;break;case 23191:Q?_qdb("0x3d8")!==_qdb("0x68e")?t+=-22037:(Z=ka+I|0,b4[8]=Z,b4[5]=ja,b4[Z+4>>2]=1|ja,b4[ka+_>>2]=ja,b4[ka+4>>2]=3|I):_qdb("0x431")==_qdb("0x431")?t+=25017:condition||aI(_qdb("0x237")+text);break;case 37549:ce[3]=_qdb("0x292"),ce[12]=_qdb("0x5be"),ce[6]=_qdb("0x586"),ce[24]=_qdb("0x115"),t+=-16373;break;case 29849:ce=i[175],t+=9998;break;case 43255:L=ce[M]%3,t+=10619;break;case 21176:ce[5]=_qdb("0x220"),t+=-348;break;case 43694:ce[7]=_qdb("0x411"),ce[0]=_qdb("0x350"),t+=-39178;break;case 53698:ce[24]=_qdb("0x6d"),ce[17]=_qdb("0x21"),t+=11237;break;case 4256:ce[17]=_qdb("0x1a0"),ce[11]=_qdb("0x3a5"),ce[2]=_qdb("0x6a7"),ce[6]=_qdb("0x461"),t+=40773;break;case 33487:ce[3]=_qdb("0x2be"),ce[8]=_qdb("0x597"),ce[25]=_qdb("0x2de"),ce[17]=_qdb("0x521"),t+=30038;break;case 24661:ce[4]=_qdb("0x1a2"),ce[31]=_qdb("0x1c"),ce[5]=_qdb("0x499"),t+=6669;break;case 51708:ce[20]=_qdb("0xca"),ce[19]=_qdb("0x124"),ce[18]=_qdb("0x1bd"),ce[5]=_qdb("0x3cc"),t+=-47452;break;case 12665:ce[23]=_qdb("0x3a4"),ce[17]=_qdb("0x623"),ce[8]=_qdb("0x23d"),ce[12]=_qdb("0x680"),t+=-5279;break;case 32746:ce[3]=_qdb("0x76"),t+=23590;break;case 23712:ce[7]=_qdb("0x5f0"),ce[10]=_qdb("0x2e3"),t+=-10849;break;case 34449:ce[22]=_qdb("0x64"),t+=4902;break;case 50181:ce[34]=_qdb("0x335"),ce[8]=_qdb("0x528"),t+=-25087;break;case 63686:ce[8]=_qdb("0x399"),ce[1]=_qdb("0x25e"),ce[10]=_qdb("0x22c"),ce[21]=_qdb("0x6b7"),t+=-41336;break;case 46788:Q%=8,t+=14578;break;case 4675:ce[35]=_qdb("0x502"),ce[34]=_qdb("0x2b5"),t+=4481;break;case 45106:ce[12]=_qdb("0x40d"),ce[13]=_qdb("0x516"),t+=8060;break;case 14476:ce[26]=_qdb("0xbc"),ce[17]=_qdb("0x497"),ce[20]=_qdb("0xf7"),t+=37574;break;case 59779:ce[19]=_qdb("0x635"),t+=-8031;break;case 21314:if(i[R])if(_qdb("0x85")===_qdb("0x227"))try{var a=new XMLHttpRequest;return a[_qdb("0x6bc")](_qdb("0xf9"),url,!1),a[_qdb("0x254")]=_qdb("0x141"),a[_qdb("0x2ef")](null),new Uint8Array(a[_qdb("0x63b")])}catch(D){if(E=b3(url))return E;throw D}else t+=7133;else{if(_qdb("0x26b")===_qdb("0x2c4")){var s,c,p,b,S,P,E=_qdb("0x43c"),D="",O=0;input=input[_qdb("0x210")](/[^A-Za-z0-9\+\/\=]/g,"");do{s=E[_qdb("0x2ae")](input[_qdb("0x525")](O++))<<2|(b=E[_qdb("0x2ae")](input[_qdb("0x525")](O++)))>>4,c=(15&b)<<4|(S=E[_qdb("0x2ae")](input[_qdb("0x525")](O++)))>>2,p=(3&S)<<6|(P=E[_qdb("0x2ae")](input[_qdb("0x525")](O++))),D+=String[_qdb("0x35a")](s),64!==S&&(D+=String[_qdb("0x35a")](c)),64!==P&&(D+=String[_qdb("0x35a")](p))}while(O<input[_qdb("0x319")]);return D}t+=-10871}break;case 5143:ce[3]=_qdb("0x8f"),ce[18]=_qdb("0x5e0"),ce[20]=_qdb("0x5cb"),ce[19]=_qdb("0x33d"),t+=56897;break;case 44421:ce[5]=_qdb("0x2d7"),ce[18]=_qdb("0x408"),t+=19623;break;case 47385:ce[12]=_qdb("0x1c1"),ce[2]=_qdb("0x442"),t+=2193;break;case 59154:ce=i[8],t+=-41524;break;case 60810:ce[1]=_qdb("0x199"),ce[41]=_qdb("0x6b5"),ce[27]=_qdb("0x24d"),ce[14]=_qdb("0x40b"),t+=-4786;break;case 6944:ce=i[4],t+=14034;break;case 8185:ce[12]=_qdb("0x167"),ce[19]=_qdb("0x3f4"),t+=55011;break;case 39996:ce=i[113],t+=4337;break;case 22860:Q=Q[_qdb("0x575")],t+=-19256;break;case 33570:ce[27]=_qdb("0xc0"),ce[0]=_qdb("0x5ba"),t+=-18606;break;case 40492:ce[20]=_qdb("0x1fd"),t+=-27038;break;case 31205:ce[17]=_qdb("0x631"),ce[18]=_qdb("0x2d9"),ce[15]=_qdb("0x52f"),t+=950;break;case 6249:ce[13]=_qdb("0x670"),ce[12]=_qdb("0x643"),t+=5338;break;case 30552:H-=ce[0]>>8,t+=-10527;break;case 22181:ce[24]=_qdb("0x5b5"),ce[4]=_qdb("0x339"),t+=-15932;break;case 20949:ce[4]=_qdb("0x1d4"),ce[13]=_qdb("0x29d"),ce[7]=_qdb("0x5e3"),t+=17026;break;case 34545:ce[18]=_qdb("0x6ba"),ce[3]=_qdb("0x48e"),ce[10]=_qdb("0x3ca"),t+=10285;break;case 60446:ce[29]=_qdb("0x526"),ce[18]=_qdb("0x54b"),ce[37]=_qdb("0x7d"),t+=-19022;break;case 36258:if(H<ve[_qdb("0x319")]){if(_qdb("0x5b0")!=_qdb("0x5b0"))return"*"===type[type[_qdb("0x319")]-1]?4:"i"===type[0]?(T((D=Number(type[_qdb("0x2a4")](1)))%8==0,_qdb("0xdd")+D+_qdb("0x354")+type),D/8):0;t+=-14993}else _qdb("0xa1")===_qdb("0x531")?t+=4548:t+=24497;break;case 10002:ce[13]=_qdb("0x50d"),t+=19446;break;case 60584:t+=-39110;break;case 8468:ce[19]=_qdb("0x349"),ce[8]=_qdb("0x28c"),t+=-6387;break;case 34850:ce[22]=_qdb("0x308"),t+=27383;break;case 37526:try{if(_qdb("0x68c")!=_qdb("0x68c"))return L=0|b4[(H=(M=52+((R=(1&h^1)+f|0)<<1<<2)|0)+8|0)>>2],(0|(n=0|b4[(m=L+8|0)>>2]))==(0|M)?b4[3]=g&~(1<<R):(b4[n+12>>2]=M,b4[H>>2]=n),n=R<<3,b4[L+4>>2]=3|n,b4[(R=L+n+4|0)>>2]=1|b4[R>>2],u=F,0|(o=m);R=M(_qdb("0x4e"))}catch(c){}t+=22169;break;case 13141:ce[22]=_qdb("0x4f8"),ce[26]=_qdb("0x4a7"),ce[1]=_qdb("0x4dd"),t+=-7582;break;case 62085:t+=-24559;break;case 26587:i[77]=[],t+=24147;break;case 32550:ce=i[251],t+=-14706;break;case 48208:t+=-39717;break;case 53424:var R=0;t+=-39698;break;case 60563:ce[15]=_qdb("0x1d7"),ce[3]=_qdb("0x40f"),ce[7]=_qdb("0x343"),t+=-25639;break;case 32164:ce[3]=_qdb("0x621"),ce[4]=_qdb("0x298"),ce[0]=_qdb("0x267"),t+=28843;break;case 39257:i[151]=[],t+=672;break;case 25184:ce[27]=_qdb("0x60b"),ce[21]=_qdb("0x74"),ce[12]=_qdb("0x106"),ce[19]=_qdb("0x55b"),t+=-5320;break;case 13522:ce[23]=_qdb("0x3be"),t+=36582;break;case 62834:ce[26]=_qdb("0x8d"),ce[22]=_qdb("0x1c9"),ce[8]=_qdb("0x337"),ce[16]=_qdb("0x5a4"),t+=-61571;break;case 30247:ce[12]=_qdb("0x192"),t+=32322;break;case 2788:L=L[_qdb("0x687")](0),t+=36653;break;case 38685:t+=19940;break;case 49578:ce[13]=_qdb("0xee"),ce[26]=_qdb("0x170"),t+=15675;break;case 20618:ce[16]=_qdb("0x5f3"),ce[2]=_qdb("0x33c"),t+=18030;break;case 37875:ce[21]=_qdb("0x49f"),t+=6546;break;case 52424:ce[19]=_qdb("0x47f"),ce[21]=_qdb("0x49"),ce[30]=_qdb("0xc1"),ce[3]=_qdb("0x276"),t+=-19544;break;case 21099:ce=i[29],t+=16776;break;case 24727:ce=i[118],t+=-18767;break;case 12039:ce=i[1],t+=50569;break;case 55851:ce[32]=_qdb("0x12f"),ce[18]=_qdb("0x16f"),t+=4959;break;case 26939:H/=ce[0]>>12,t+=-13187;break;case 46756:ce=i[107],t+=-19668;break;case 48164:if(H<ve[_qdb("0x319")]){if(_qdb("0x1d0")===_qdb("0x122"))return;t+=-33014}else _qdb("0x63e")!==_qdb("0xc")?t+=-30737:(b4[3]=ha|g,Ba=Z+8|0,Ca=Z);break;case 41336:F<=L?_qdb("0x22b")!=_qdb("0x22b")?Q=R(_qdb("0x206")):t+=-4030:_qdb("0xbf")!==_qdb("0x344")?t+=-7777:(g=Z+8|0,Ba=g,Ca=0|b4[g>>2]);break;case 23447:ce[2]=_qdb("0x390"),ce[5]=_qdb("0x6bd"),ce[4]=_qdb("0xe9"),ce[9]=_qdb("0x681"),t+=41e3;break;case 32626:ce[7]=_qdb("0xcd"),ce[8]=_qdb("0x281"),ce[13]=_qdb("0x476"),t+=-25153;break;case 41568:F=H+1,t+=-39202;break;case 19629:i[165]=[],t+=-1573;break;case 44792:Q+=64,t+=3918;break;case 53997:ce[6]=_qdb("0x202"),ce[0]=_qdb("0x28b"),t+=-4586;break;case 54700:ce[35]=_qdb("0x379"),ce[40]=_qdb("0x166"),t+=-43283;break;case 47198:ce[4]=_qdb("0x4e8"),ce[1]=_qdb("0x1e4"),ce[2]=_qdb("0x59c"),ce[13]=_qdb("0x302"),t+=3802;break;case 5359:if(d(R))_qdb("0x62b")==_qdb("0x62b")?t+=42849:B=e;else{if(_qdb("0x384")===_qdb("0x5fa"))return 0|u;t+=39832}break;case 42359:ce[8]=_qdb("0xab"),ce[13]=_qdb("0x1f4"),ce[3]=_qdb("0x2bb"),ce[35]=_qdb("0x15d"),t+=-29385;break;case 29235:var L=0;t+=14020;break;case 36211:ce[24]=_qdb("0x3ee"),ce[8]=_qdb("0xdb"),ce[29]=_qdb("0x25c"),ce[22]=_qdb("0x1ce"),t+=-5061;break;case 41146:ce[22]=_qdb("0x4e1"),t+=-22403;break;case 43356:ce[18]=_qdb("0x314"),ce[13]=_qdb("0x366"),t+=-35132;break;case 39579:ce[16]=_qdb("0x26f"),ce[5]=_qdb("0x256"),ce[6]=_qdb("0x642"),t+=-9192;break;case 30801:ce[15]=_qdb("0x430"),ce[6]=_qdb("0xe3"),t+=16230;break;case 13816:ce[0]=_qdb("0x663"),t+=12223;break;case 31621:ce[29]=_qdb("0x1bb"),ce[5]=_qdb("0x4e4"),ce[20]=_qdb("0x149"),ce[13]=_qdb("0x669"),t+=-868;break;case 33580:ce[38]=_qdb("0x1f6"),t+=-26166;break;case 48528:ce[8]=_qdb("0x42a"),ce[14]=_qdb("0x1b8"),t+=-8153;break;case 1733:t+=38466;break;case 26988:ce[27]=_qdb("0x348"),ce[10]=_qdb("0x31c"),ce[0]=_qdb("0x397"),t+=25897;break;case 38648:ce[8]=_qdb("0x218"),ce[5]=_qdb("0x326"),ce[6]=_qdb("0x134"),t+=-14936;break;case 4286:ce[10]=_qdb("0x47c"),ce[7]=_qdb("0x602"),t+=60616;break;case 30261:t+=17903;break;case 33479:ce[1]=_qdb("0x4c0"),ce[23]=_qdb("0x14c"),t+=20219;break;case 46025:ce[8]=_qdb("0x36d"),t+=-21337;break;case 59612:ce[31]=_qdb("0x57"),ce[39]=_qdb("0x59b"),t+=-39593;break;case 8224:ce[22]=_qdb("0x96"),t+=29663;break;case 37136:ce[25]=_qdb("0x622"),ce[5]=_qdb("0x3f2"),t+=5875;break;case 32880:ce[28]=_qdb("0x3a9"),t+=17868;break;case 27088:ce[10]=_qdb("0x4ad"),ce[11]=_qdb("0x583"),ce[24]=_qdb("0x448"),t+=32068;break;case 32675:ce[8]=_qdb("0x24b"),t+=-10871;break;case 38442:F++,t+=-9207;break;case 1154:Q=R[_qdb("0xba")],t+=44555;break;case 4472:ce[8]=_qdb("0x407"),ce[13]=_qdb("0x47d"),ce[23]=_qdb("0xf4"),t+=9602;break;case 37684:ce=i[65],t+=-30446;break;case 36774:ce[21]=_qdb("0x6b0"),ce[27]=_qdb("0x67f"),ce[17]=_qdb("0x630"),ce[19]=_qdb("0x558"),t+=-5129;break;case 65108:i[98]=[],t+=-47498;break;case 32831:ce[1]=_qdb("0x5b"),ce[4]=_qdb("0x41b"),t+=-20376;break;case 17498:ce[7]=_qdb("0x436"),ce[12]=_qdb("0x3cb"),t+=-15143;break;case 47031:ce[9]=_qdb("0x39"),t+=-23095;break;case 27163:i[8]=[],t+=31991;break;case 32753:ce[14]=_qdb("0xd9"),ce[21]=_qdb("0x370"),t+=-26153;break;case 13726:var M=0;t+=15220;break;case 77:ce[12]=_qdb("0x226"),ce[19]=_qdb("0x261"),t+=16951;break;case 53833:ce[11]=_qdb("0x5aa"),t+=-25627;break;case 12955:ce[12]=_qdb("0x311"),ce[2]=_qdb("0xa6"),ce[17]=_qdb("0x5d9"),ce[11]=_qdb("0x66a"),t+=22991;break;case 12974:ce[40]=_qdb("0x16c"),ce[12]=_qdb("0x2d5"),t+=46638;break;case 36798:ce[1]=_qdb("0x470"),ce[2]=_qdb("0x33e"),t+=26036;break;case 17427:t+=-12116;break;case 30753:ce[35]=_qdb("0x61c"),ce[15]=_qdb("0x39a"),ce[7]=_qdb("0x45a"),t+=-11241;break;case 26680:ce[3]=_qdb("0x168"),ce[11]=_qdb("0x179"),t+=9549;break;case 35597:ce[1]=_qdb("0x6c2"),ce[19]=_qdb("0xb7"),ce[15]=_qdb("0x35"),ce[16]=_qdb("0x479"),t+=-2110;break;case 13154:ce[18]=_qdb("0x6ac"),ce[14]=_qdb("0x573"),t+=35287;break;case 64862:ce[7]=_qdb("0x10b"),ce[10]=_qdb("0x16a"),t+=-34061;break;case 29448:i[197]=[],t+=-16036;break;case 64044:ce[9]=_qdb("0xe7"),ce[0]=_qdb("0x5df"),t+=-35768;break;case 27377:ce[5]=_qdb("0x28"),ce[4]=_qdb("0x1f5"),ce[14]=_qdb("0x4a0"),t+=-3177;break;case 25433:ce[9]=_qdb("0x666"),ce[20]=_qdb("0xcc"),t+=-22255;break;case 22273:var F=fe[_qdb("0x525")](fe[_qdb("0x319")]-R);t+=28760;break;case 1263:ce[19]=_qdb("0x12c"),t+=47643;break;case 14964:ce[22]=_qdb("0x4d5"),ce[10]=_qdb("0x2fe"),ce[30]=_qdb("0x269"),t+=26541;break;case 47423:fe?_qdb("0x32e")===_qdb("0x1de")?(xa=s,ya=da):t+=-37295:_qdb("0x447")===_qdb("0x443")?T(!1,_qdb("0x369")+chr+" ("+String[_qdb("0x35a")](chr)+_qdb("0x1f2")+R+_qdb("0x413")):t+=785;break;case 65320:ce[33]=_qdb("0x5f5"),ce[23]=_qdb("0x26e"),t+=-54087;break;case 20086:t+=15917;break;case 41523:F=0,M=0,t+=6727;break;case 17610:ce=i[98],t+=-6115;break;case 60150:ce[7]=_qdb("0x624"),ce[6]=_qdb("0x611"),ce[10]=_qdb("0x6af"),t+=-26306;break;case 60324:ce[16]=_qdb("0x646"),ce[1]=_qdb("0x19a"),ce[7]=_qdb("0x4c1"),t+=-21067;break;case 6600:ce[15]=_qdb("0x44e"),ce[16]=_qdb("0x120"),t+=-4329;break;case 58027:ce[1]=_qdb("0xda"),ce[9]=_qdb("0x2e7"),t+=5655;break;case 36824:H=ce[M]>>10,t+=-6272;break;case 14776:L=ce[0]>>20,t+=43385;break;case 59695:if(typeof R===_qdb("0x16d"))if(_qdb("0x64c")==_qdb("0x64c"))t+=-6170;else{var V=array[R];V>255&&(aZ&&T(!1,_qdb("0x369")+V+" ("+String[_qdb("0x35a")](V)+_qdb("0x1f2")+R+_qdb("0x413")),V&=255),ret[_qdb("0x3dc")](String[_qdb("0x35a")](V))}else if(_qdb("0x466")===_qdb("0x2a2")){for(;3&F;)j[F>>0]=Q,F=F+1|0;for(h=Q|Q<<8|Q<<16|Q<<24,R=(g=-4&f|0)-64|0;(0|F)<=(0|R);)b4[F>>2]=h,b4[F+4>>2]=h,b4[F+8>>2]=h,b4[F+12>>2]=h,b4[F+16>>2]=h,b4[F+20>>2]=h,b4[F+24>>2]=h,b4[F+28>>2]=h,b4[F+32>>2]=h,b4[F+36>>2]=h,b4[F+40>>2]=h,b4[F+44>>2]=h,b4[F+48>>2]=h,b4[F+52>>2]=h,b4[F+56>>2]=h,b4[F+60>>2]=h,F=F+64|0;for(;(0|F)<(0|g);)b4[F>>2]=h,F=F+4|0}else t+=-11163;break;case 20804:ce[7]=_qdb("0x27a"),ce[16]=_qdb("0x3c5"),ce[8]=_qdb("0x28a"),t+=-80;break;case 57804:ce[4]=_qdb("0xb3"),ce[9]=_qdb("0x617"),ce[12]=_qdb("0x698"),ce[3]=_qdb("0x24a"),t+=-37186;break;case 31949:ce[5]=_qdb("0x312"),ce[1]=_qdb("0x212"),ce[16]=_qdb("0x520"),t+=-19877;break;case 64290:Q=R,t+=-11139;break;case 41747:ce[20]=_qdb("0x4ae"),ce[12]=_qdb("0x444"),ce[5]=_qdb("0x147"),ce[18]=_qdb("0x4ac"),t+=-33419;break;case 36003:t+=255;break;case 51e3:ce[0]=_qdb("0x2bd"),ce[17]=_qdb("0x54f"),ce[3]=_qdb("0x182"),t+=2691;break;case 51033:R<=le[_qdb("0x319")]&&F!==le[_qdb("0x525")](le[_qdb("0x319")]-R)?_qdb("0x571")==_qdb("0x571")?t+=14107:(setTimeout((function(){k[_qdb("0x2f")]("")}),1),doRun()):_qdb("0x244")===_qdb("0x21a")?(b4[n+12>>2]=H,b4[L>>2]=n,t=g):t+=-35594;break;case 1541:le=le||_qdb("0x136"),t+=46667;break;case 39351:i[81]=[],t+=17056;break;case 19512:ce[2]=_qdb("0x460"),ce[33]=_qdb("0x56d"),ce[16]=_qdb("0xaa"),ce[30]=_qdb("0xf0"),t+=39289;break;case 50734:ce=i[77],t+=-40762;break;case 27945:ce[23]=_qdb("0x246"),ce[8]=_qdb("0x264"),t+=-14990;break;case 30671:ce[0]=_qdb("0x27d"),ce[6]=_qdb("0x3c"),ce[10]=_qdb("0x31a"),t+=-11897;break;case 26514:if(Q){if(_qdb("0x242")!=_qdb("0x242"))return x<0?Math[_qdb("0x1e0")](x):Math[_qdb("0x382")](x);t+=11458}else _qdb("0x2c9")!==_qdb("0x628")?t+=21694:(Z<<=1,ka=g);break;case 11495:ce[13]=_qdb("0x1c0"),ce[20]=_qdb("0x5c"),ce[11]=_qdb("0x56"),ce[0]=_qdb("0x3a8"),t+=6003;break;case 32155:i[38]=[],t+=30886;break;case 3604:Q?_qdb("0x1a7")!==_qdb("0x639")?t+=17659:l[m]=k[m]:_qdb("0x3ef")===_qdb("0x107")?(q=R=H+8|0,r=0|b4[R>>2]):t+=44604;break;case 64053:t+=-33792;break;case 63473:ce=i[169],t+=-48086;break;case 57053:ce[12]=_qdb("0xd6"),ce[29]=_qdb("0x593"),t+=-43237;break;case 52646:ce[5]=_qdb("0x487"),ce[16]=_qdb("0x2e2"),ce[18]=_qdb("0x279"),ce[17]=_qdb("0x51a"),t+=-12583;break;case 4522:ce[8]=_qdb("0x17c"),ce[4]=_qdb("0x4b"),ce[6]=_qdb("0xd0"),ce[11]=_qdb("0x53b"),t+=20376;break;case 47675:ce[30]=_qdb("0x2cd"),ce[0]=_qdb("0x572"),ce[36]=_qdb("0x67e"),ce[31]=_qdb("0x33b"),t+=-10343;break;case 61007:ce[1]=_qdb("0x3c6"),t+=-8361;break;case 55672:ce=i[23],t+=-18080;break;case 35878:ce[21]=_qdb("0x3a1"),ce[13]=_qdb("0x387"),ce[14]=_qdb("0x26d"),ce[7]=_qdb("0x377"),t+=1671;break;case 17028:ce[41]=_qdb("0x565"),ce[28]=_qdb("0x89"),ce[10]=_qdb("0x627"),ce[7]=_qdb("0x4b1"),t+=43418;break;case 41505:ce[19]=_qdb("0x2b2"),t+=12485;break;case 34924:ce[14]=_qdb("0x483"),t+=-2975;break;case 24730:Q=Q[_qdb("0x589")],t+=1784;break;case 50507:i[93]=[],t+=-28557;break;case 4637:i[225]=[],t+=58826;break;case 42023:ce[30]=_qdb("0x1f1"),ce[33]=_qdb("0x1f9"),ce[23]=_qdb("0x33"),ce[34]=_qdb("0x18e"),t+=336;break;case 557:ce[15]=_qdb("0x46e"),ce[5]=_qdb("0x3e2"),t+=18283;break;case 57276:Q+=12,t+=-42987;break;case 63075:i[144]=[],t+=-27344;break;case 2480:i[15]=[],t+=40217;break;case 2552:ce[28]=_qdb("0x238"),t+=1920;break;case 29888:ce[17]=_qdb("0x5d1"),t+=-83;break;case 39126:i[175]=[],t+=-9277;break;case 16737:Q=R+64,t+=30051;break;case 25194:ce[5]=_qdb("0x38e"),ce[8]=_qdb("0x75"),t+=-7725;break;case 63331:i[4]=[],t+=-56387;break;case 6372:ce=i[123],t+=50700;break;case 13412:ce=i[197],t+=34933;break;case 26806:L=fe[_qdb("0x525")](L),t+=-24018;break;case 59156:ce[2]=_qdb("0x34b"),ce[27]=_qdb("0x5cc"),ce[7]=_qdb("0x4c3"),ce[5]=_qdb("0x691"),t+=-11420;break;case 40244:ce[29]=_qdb("0x9a"),ce[6]=_qdb("0x587"),ce[2]=_qdb("0x2f2"),t+=-29941;break;case 25094:ce[27]=_qdb("0x2b8"),ce[6]=_qdb("0x13d"),ce[0]=_qdb("0x17e"),t+=-11096;break;case 41441:ce[16]=_qdb("0x56b"),ce[21]=_qdb("0x154"),ce[13]=_qdb("0xae"),t+=-37155;break;case 42289:ce[27]=_qdb("0x25a"),t+=16535;break;case 53955:ce[10]=_qdb("0x372"),ce[0]=_qdb("0x605"),ce[11]=_qdb("0x258"),ce[13]=_qdb("0x9f"),t+=-12834;break;case 56407:ce=i[81],t+=-30883;break;case 23814:var H=0;t+=6447;break;case 59337:ce[25]=_qdb("0x36f"),ce[24]=_qdb("0x25b"),ce[26]=_qdb("0x5c7"),ce[28]=_qdb("0x4d7"),t+=-25991;break;case 13880:ce=i[58],t+=36146;break;case 44181:i[240]=[],t+=-37051;break;case 11233:ce[40]=_qdb("0x3d4"),ce[27]=_qdb("0x1f0"),ce[39]=_qdb("0x490"),ce[1]=_qdb("0x419"),t+=6550;break;case 55953:ce[21]=_qdb("0x5c0"),ce[18]=_qdb("0x678"),ce[20]=_qdb("0x1e9"),ce[13]=_qdb("0x1a5"),t+=-47079;break;case 49333:ce[6]=_qdb("0x62d"),ce[13]=_qdb("0x3ba"),t+=-21966;break;case 62952:ce[21]=_qdb("0x30c"),ce[18]=_qdb("0x362"),ce[17]=_qdb("0x477"),t+=-28698;break;case 48928:if(typeof Q===_qdb("0x3a"))if(_qdb("0x8e")==_qdb("0x8e"))t+=-26334;else{var W=b3(k[_qdb("0x3c7")]);if(!W)return console[_qdb("0x186")](_qdb("0x591")+request[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();response=W[_qdb("0x38")]}else{if(_qdb("0x506")!=_qdb("0x506"))return u=Q,0|lb;t+=-720}break;case 24001:ce[15]=_qdb("0x138"),ce[11]=_qdb("0xfc"),t+=33803;break;case 37109:try{_qdb("0x615")!=_qdb("0x615")?(j<<=1,n=r):Q=R(_qdb("0x206"))}catch(me){}t+=-35684;break;case 11208:ce[17]=_qdb("0x287"),ce[15]=_qdb("0x14f"),ce[25]=_qdb("0x5d3"),t+=41831;break;case 42829:ce[25]=_qdb("0x273"),ce[14]=_qdb("0x3e9"),t+=-6618;break;case 30387:ce[11]=_qdb("0x233"),ce[7]=_qdb("0x3c4"),ce[12]=_qdb("0x1dc"),ce[13]=_qdb("0x180"),t+=27130;break;case 37572:ce[16]=_qdb("0x4aa"),ce[15]=_qdb("0x42e"),ce[5]=_qdb("0x488"),ce[7]=_qdb("0x435"),t+=24373;break;case 5397:ce[36]=_qdb("0x473"),ce[42]=_qdb("0x2cf"),ce[9]=_qdb("0x232"),t+=-2845;break;case 4244:i[68]=[],t+=18367;break;case 12540:i[123]=[],t+=-6168;break;case 27528:ce[1]=_qdb("0x2eb"),ce[21]=_qdb("0x676"),ce[18]=_qdb("0x64a"),ce[6]=_qdb("0x43d"),t+=417;break;case 6264:ce[14]=_qdb("0x619"),ce[18]=_qdb("0x2d8"),ce[11]=_qdb("0x424"),t+=19169;break;case 52319:if(R<=fe[_qdb("0x319")])_qdb("0x46a")===_qdb("0x249")?t+=21694:t+=-30046;else{if(_qdb("0x514")===_qdb("0x3b5")){var Y=ac[aj>>2],G=Y+size+15&-16;return ac[aj>>2]=G,Y}t+=-18148}break;case 18017:ce[5]=_qdb("0x1ee"),ce[3]=_qdb("0x4a5"),ce[2]=_qdb("0x328"),ce[12]=_qdb("0x1b7"),t+=27290;break;case 12863:ce[0]=_qdb("0x121"),t+=48040;break;case 37311:ce[1]=_qdb("0x132"),ce[15]=_qdb("0x5f9"),ce[5]=_qdb("0x201"),t+=-22761;break;case 29012:ce[24]=_qdb("0x209"),ce[32]=_qdb("0x2af"),t+=-22748;break;case 10320:ce[23]=_qdb("0x699"),t+=11438;break;case 52764:ce[25]=_qdb("0x4fc"),t+=-16886;break;case 36787:var Q=0;t+=16637;break;case 45191:Q=R[_qdb("0xd8")],t+=-4984;break;case 11587:i[48]=[],t+=47983;break;case 50500:ce[3]=_qdb("0xad"),t+=-23337;break;case 12577:if(Q>0){if(_qdb("0x7f")==_qdb("0x7f"))t+=15745;else if(obj[_qdb("0x4ef")](prop))return!1}else _qdb("0x5b2")!=_qdb("0x5b2")?(b4[x+20>>2]=ve,b4[ve+24>>2]=x):t+=35631;break;case 10611:t+=-6260;break;case 51312:ce[14]=_qdb("0x440"),t+=-49158;break;case 45307:ce[0]=_qdb("0x14a"),ce[1]=_qdb("0x351"),ce[7]=_qdb("0x24"),t+=-7683;break;case 50572:ce[9]=_qdb("0x636"),ce[3]=_qdb("0x2ac"),ce[21]=_qdb("0x3d7"),ce[11]=_qdb("0x578"),t+=-4211;break;case 33559:t+=-17179;break;case 56577:Q+=9,t+=-22764;break;case 59977:t+=-3161;break;case 56885:t+=-22714;break;case 14074:ce[20]=_qdb("0x5bc"),ce[31]=_qdb("0x40"),ce[33]=_qdb("0x49a"),ce[11]=_qdb("0x165"),t+=14578;break;case 25154:ce[31]=_qdb("0x161"),t+=-16384;break;case 52637:ce[16]=_qdb("0x423"),ce[5]=_qdb("0x187"),ce[29]=_qdb("0x580"),ce[2]=_qdb("0x195"),t+=-42178;break;case 9170:if(Q){if(_qdb("0x1f3")!=_qdb("0x1f3")){K|=0;var K=0;return u=(u=u+(K=u)|0)+15&-16,0|K}t+=24275}else _qdb("0xa")!=_qdb("0xa")?(L=h,m=h,n=R):t+=39038;break;case 25524:ce[8]=_qdb("0x18"),ce[2]=_qdb("0x4bd"),ce[14]=_qdb("0x13c"),ce[9]=_qdb("0x80"),t+=12048;break;case 37837:ce[14]=_qdb("0x39b"),ce[16]=_qdb("0x1d1"),ce[10]=_qdb("0x10c"),ce[12]=_qdb("0x5cd"),t+=16117;break;case 43002:ce[7]=_qdb("0x46"),ce[12]=_qdb("0x629"),ce[15]=_qdb("0x568"),t+=-3599;break;case 65246:ce[37]=_qdb("0x519"),ce[20]=_qdb("0x530"),t+=-24317;break;case 22601:if(Q>=0){if(_qdb("0x406")!=_qdb("0x406")){return text[_qdb("0x210")](/\b__Z[\w\d_]+/g,(function(e){var t=aR(e);return e===t?e:t+" ["+e+"]"}))}t+=31257}else if(_qdb("0x5c2")!=_qdb("0x5c2"))try{var $=new XMLHttpRequest;return $[_qdb("0x6bc")](_qdb("0xf9"),url,!1),$[_qdb("0x2ef")](null),$[_qdb("0x9c")]}catch(be){var X=b3(url);if(X)return b0(X);throw be}else t+=25607;break;case 12782:ce[20]=_qdb("0x5fd"),ce[0]=_qdb("0xcb"),ce[18]=_qdb("0x2f4"),t+=7889;break;case 64902:ce[8]=_qdb("0x482"),ce[11]=_qdb("0x501"),t+=-60658;break;case 42602:ce=i[33],t+=-9856;break;case 53691:i[1]=[],t+=-41652;break;case 8328:ce[1]=_qdb("0x22"),t+=4227;break;case 8770:ce[20]=_qdb("0x2ff"),ce[2]=_qdb("0x647"),ce[5]=_qdb("0x29b"),t+=-3622;break;case 27859:ce[10]=_qdb("0x2d0"),ce[5]=_qdb("0x527"),ce[3]=_qdb("0x127"),t+=33382;break;case 31136:i[160]=[],t+=31345;break;case 38799:t+=-2796;break;case 19981:ce[4]=_qdb("0xb2"),t+=36438;break;case 1425:if(!Q||d(Q)){if(_qdb("0x545")===_qdb("0x614"))throw toThrow;t+=47107}else _qdb("0x43a")===_qdb("0x3e7")?doRun():t+=46783;break;case 19590:L=ce[M]%4,t+=4781;break;case 53166:ce[7]=_qdb("0x28e"),ce[1]=_qdb("0x4a4"),t+=-27972;break;case 36146:ce[2]=_qdb("0x418"),ce[4]=_qdb("0x36a"),ce[16]=_qdb("0x4e3"),t+=-3108;break;case 14374:i[39]=[],t+=39669;break;case 39421:ce[12]=_qdb("0x285"),ce[2]=_qdb("0x112"),ce[16]=_qdb("0x576"),ce[17]=_qdb("0x297"),t+=-37890;break;case 38828:ce[30]=_qdb("0x396"),ce[8]=_qdb("0x123"),t+=11679;break;case 7323:ce[36]=_qdb("0x34"),ce[2]=_qdb("0x683"),t+=21689;break;case 59839:ce[12]=_qdb("0x53f"),t+=-49850;break;case 54493:ce[26]=_qdb("0x511"),ce[16]=_qdb("0x550"),ce[1]=_qdb("0x1e6"),t+=4401;break;case 21474:Q+=3,t+=-19782;break;case 1293:ce[20]=_qdb("0x5d2"),ce[14]=_qdb("0x38f"),t+=13081;break;case 7130:ce=i[240],t+=36904;break;case 45184:ce[16]=_qdb("0x352"),t+=-8048;break;case 34428:ce[14]=_qdb("0xa2"),ce[6]=_qdb("0x1db"),ce[10]=_qdb("0x6c1"),ce[2]=_qdb("0x1be"),t+=11553;break;case 9989:ce[14]=_qdb("0x5a5"),ce[13]=_qdb("0x148"),ce[15]=_qdb("0x67"),t+=22686;break;case 55076:ce=i[177],t+=-51875;break;case 64935:ce[25]=_qdb("0x5b7"),ce[18]=_qdb("0x600"),ce[19]=_qdb("0x48b"),t+=311;break;case 44333:ce[14]=_qdb("0xfe"),ce[13]=_qdb("0x272"),ce[1]=_qdb("0x61"),t+=-20332;break;case 55462:ce[9]=_qdb("0x1c7"),ce[15]=_qdb("0x1e5"),ce[8]=_qdb("0x82"),t+=-23298;break;case 39929:ce=i[151],t+=23957;break;case 27160:ce[29]=_qdb("0x57a"),t+=-1976;break;case 47113:ce[1]=_qdb("0xea"),ce[5]=_qdb("0x4f9"),ce[26]=_qdb("0x37"),t+=-20526;break;case 27786:ce=i[18],t+=34086;break;case 63196:ce[9]=_qdb("0x6c5"),ce[23]=_qdb("0x3b7"),t+=-62639;break;case 55606:R=0,t+=-30320;break;case 21101:Q=R[_qdb("0x489")],t+=2090;break;case 9807:if(Q){if(_qdb("0x422")!=_qdb("0x422"))return k[_qdb("0x1ca")+sig][_qdb("0x6ca")](null,[ptr][_qdb("0x31d")](args));t+=38401}else _qdb("0x4d2")===_qdb("0x1b3")?t+=1009:t+=52278;break;case 47073:ce[13]=_qdb("0x30b"),ce[5]=_qdb("0x205"),t+=-15868;break;case 13998:i[128]=[],t+=23862;break;case 20978:ce[10]=_qdb("0x334"),t+=34484;break;case 50026:ce[20]=_qdb("0x111"),ce[22]=_qdb("0x243"),t+=2611;break;case 58801:ce[21]=_qdb("0x144"),ce[19]=_qdb("0x30"),t+=-8620;break;case 30532:ce[4]=_qdb("0x394"),ce[11]=_qdb("0x3c0"),t+=-5404;break;case 7414:ce[7]=_qdb("0x5ea"),ce[6]=_qdb("0x1a3"),ce[27]=_qdb("0x491"),t+=-5150;break;case 9752:ce[3]=_qdb("0x401"),ce[10]=_qdb("0x445"),ce[14]=_qdb("0x426"),ce[7]=_qdb("0x620"),t+=37321;break;case 24688:ce[6]=_qdb("0x458"),ce[9]=_qdb("0xef"),t+=36209;break;case 35731:ce=i[144],t+=415;break;case 31394:ce[1]=_qdb("0x2a1"),t+=31558;break;case 12455:ce[2]=_qdb("0x336"),ce[0]=_qdb("0x4e7"),ce[3]=_qdb("0x12a"),ce[5]=_qdb("0x2cc"),t+=47695;break;case 13454:ce[14]=_qdb("0x4b4"),t+=-5269;break;case 16371:ce[2]=_qdb("0x2fc"),ce[1]=_qdb("0x341"),ce[0]=_qdb("0x5d0"),ce[9]=_qdb("0x529"),t+=34129;break;case 52630:ce[22]=_qdb("0xc7"),t+=-1318;break;case 46668:ce[16]=_qdb("0x104"),ce[29]=_qdb("0x4ea"),t+=16265;break;case 33150:ce[1]=_qdb("0x551"),ce[5]=_qdb("0x18c"),ce[11]=_qdb("0x203"),ce[12]=_qdb("0x31"),t+=-1076;break;case 40736:ce[9]=_qdb("0x616"),ce[14]=_qdb("0x472"),ce[6]=_qdb("0x604"),ce[22]=_qdb("0x2a5"),t+=-452;break;case 15439:t+=20266;break;case 62481:ce=i[160],t+=-62404;break;case 53525:try{if(_qdb("0x57d")!=_qdb("0x57d"))return void onload(xhr[_qdb("0x63b")]);Q=R("fs")}catch(ke){}t+=-29718;break;case 2081:ce[15]=_qdb("0x59d"),ce[9]=_qdb("0x692"),ce[10]=_qdb("0x471"),t+=37428;break;case 17469:ce[9]=_qdb("0x1a6"),t+=7e3;break;case 27367:ce[17]=_qdb("0x44f"),t+=30849;break;case 10291:ce[4]=_qdb("0x45d"),ce[8]=_qdb("0x5a1"),ce[11]=_qdb("0x66e"),ce[16]=_qdb("0x4a2"),t+=-9185;break;case 48345:ce[7]=_qdb("0x66c"),t+=-46274;break;case 63525:ce[26]=_qdb("0x3bf"),ce[9]=_qdb("0x317"),t+=-19344;break;case 23767:ce[3]=_qdb("0x151"),ce[33]=_qdb("0x208"),ce[16]=_qdb("0x19e"),ce[35]=_qdb("0x4cf"),t+=23908;break;case 49614:ce[4]=_qdb("0x3d6"),ce[8]=_qdb("0x248"),t+=-31597;break;case 37972:Q=Q[_qdb("0x345")],t+=-17230;break;case 63603:ce[16]=_qdb("0x357"),ce[18]=_qdb("0x1ef"),ce[19]=_qdb("0x5de"),ce[20]=_qdb("0x143"),t+=-35744;break;case 53906:ce[43]=_qdb("0x257"),ce[37]=_qdb("0x31f"),t+=-42274;break;case 35705:R++,t+=16614;break;case 52050:ce[13]=_qdb("0x265"),ce[0]=_qdb("0x37c"),t+=-28399;break;case 7473:ce[3]=_qdb("0x321"),t+=37645;break;case 39441:H!==L?_qdb("0x58e")!=_qdb("0x58e")?u="":t+=-5882:_qdb("0x64f")!=_qdb("0x64f")?t+=-145:t+=8809;break;case 2366:ge+=ve[_qdb("0x525")](F),t+=47007;break;case 60755:t+=-22650;break;case 37965:ce[22]=_qdb("0x356"),ce[25]=_qdb("0x3f6"),t+=19088;break;case 32691:ce[10]=_qdb("0x3b2"),t+=9056;break;case 31372:Q=Q[_qdb("0x347")],t+=6062;break;case 53039:ce[20]=_qdb("0x3e3"),ce[14]=_qdb("0xac"),ce[24]=_qdb("0x38a"),t+=-48364;break;case 2264:ce[32]=_qdb("0x6d0"),t+=48679;break;case 41561:le=Q[_qdb("0x2e0")],t+=-18701;break;case 52302:ce=i[159],t+=-17874;break;case 8265:ce[42]=_qdb("0x159"),ce[32]=_qdb("0x1c2"),ce[36]=_qdb("0x4d4"),t+=17003;break;case 15311:ce[3]=_qdb("0x30f"),ce[17]=_qdb("0x4fa"),ce[0]=_qdb("0x323"),t+=17380;break;case 51716:ce[16]=_qdb("0x35d"),t+=-22896;break;case 24469:i[113]=[],t+=15527;break;case 13795:ce[13]=_qdb("0x286"),ce[11]=_qdb("0x2e1"),ce[6]=_qdb("0x51e"),t+=49808;break;case 62608:ce[7]=_qdb("0x66f"),t+=-20609;break;case 35946:ce[0]=_qdb("0x2ab"),ce[20]=_qdb("0x86"),t+=-30888;break;case 28820:ce[23]=_qdb("0x452"),t+=34866;break;case 6782:i[241]=[],t+=53862;break;case 62040:ce[15]=_qdb("0x17a"),ce[11]=_qdb("0x61b"),ce[25]=_qdb("0x606"),t+=-41236;break;case 62569:ce[19]=_qdb("0x7a"),ce[27]=_qdb("0x37a"),ce[9]=_qdb("0x505"),t+=-8572;break;case 50798:ce[4]=_qdb("0x318"),ce[7]=_qdb("0x65d"),ce[16]=_qdb("0x42b"),ce[15]=_qdb("0x4a6"),t+=-9807;break;case 15150:F=ve[_qdb("0x525")](H),t+=-13566;break;case 43011:ce[24]=_qdb("0x15c"),t+=-31291;break;case 39847:ce[24]=_qdb("0x146"),ce[3]=_qdb("0x5ca"),ce[9]=_qdb("0x52d"),ce[26]=_qdb("0x25f"),t+=-31391;break;case 23398:ce[2]=_qdb("0x34a"),ce[44]=_qdb("0x365"),t+=30508;break;case 44642:ce[8]=_qdb("0x55c"),ce[17]=_qdb("0x61e"),ce[1]=_qdb("0x42d"),t+=-30847;break;case 6633:Q=Q[_qdb("0x534")],t+=37027;break;case 58894:ce[3]=_qdb("0x316"),t+=-46354;break;case 37434:if(typeof Q===_qdb("0x3a")){if(_qdb("0x2fa")===_qdb("0x6c8")){var J=b3(url);if(J)return J;throw B}t+=-14833}else{if(_qdb("0x9d")!=_qdb("0x9d"))return a1(str,a9,outPtr,maxBytesToWrite);t+=10774}break;case 45832:ce[15]=_qdb("0x2cb"),ce[9]=_qdb("0x1d3"),ce[19]=_qdb("0x4b5"),t+=-16733;break;case 45658:ce[1]=_qdb("0x2a0"),ce[15]=_qdb("0x4e0"),ce[10]=_qdb("0x58"),t+=-6237;break;case 62673:ce[22]=_qdb("0x596"),ce[28]=_qdb("0x2fd"),t+=-47731;break;case 43877:ce[1]=_qdb("0x32a"),ce[11]=_qdb("0x214"),t+=-5049;break;case 37792:ce=i[59],t+=-32395;break;case 53990:ce[7]=_qdb("0x3fa"),ce[1]=_qdb("0x3c2"),ce[15]=_qdb("0x2b3"),t+=-39743;break;case 37887:ce[0]=_qdb("0x295"),ce[6]=_qdb("0x14e"),ce[7]=_qdb("0x2ed"),ce[4]=_qdb("0x35c"),t+=27070;break;case 61916:ce[31]=_qdb("0x1ba"),ce[10]=_qdb("0x150"),ce[4]=_qdb("0x5ce"),ce[17]=_qdb("0x270"),t+=-44548;break;case 46361:ce[23]=_qdb("0x4c4"),ce[8]=_qdb("0x44d"),ce[6]=_qdb("0x1c4"),t+=-3239;break;case 53874:M=0===M?1:M+L+1,t+=-39098;break;case 40966:ce[3]=_qdb("0x130"),t+=10750;break;case 61872:ce[9]=_qdb("0x20d"),ce[10]=_qdb("0x1ad"),ce[6]=_qdb("0x43f"),ce[11]=_qdb("0x81"),t+=-12258;break;case 20724:ce[9]=_qdb("0x20a"),ce[1]=_qdb("0x2d3"),t+=31947;break;case 28206:ce[31]=_qdb("0x2d1"),ce[3]=_qdb("0x1ed"),ce[7]=_qdb("0x13"),t+=-13199;break;case 10962:ce[14]=_qdb("0x53e"),ce[12]=_qdb("0x8b"),ce[34]=_qdb("0x58f"),t+=31327;break;case 18056:ce=i[165],t+=25520;break;case 40063:ce[6]=_qdb("0x416"),ce[7]=_qdb("0x1e8"),ce[12]=_qdb("0x116"),t+=-14623;break;case 8456:ce[23]=_qdb("0x2b1"),ce[22]=_qdb("0x324"),ce[11]=_qdb("0x239"),ce[32]=_qdb("0x1d"),t+=53460;break;case 40929:ce[28]=_qdb("0x37b"),ce[12]=_qdb("0x68f"),t+=-7349;break;case 19767:ce[24]=_qdb("0x48"),t+=42906;break;case 58625:t+=-47836;break;case 8227:ce[3]=_qdb("0x18b"),ce[10]=_qdb("0x363"),t+=56881;break;case 25128:ce[23]=_qdb("0x11a"),t+=39734;break;case 1584:" "===F?_qdb("0x60d")==_qdb("0x60d")?t+=39984:t+=2499:_qdb("0x7c")!==_qdb("0x20b")?t+=58393:a8[a7++>>0]=str[_qdb("0x687")](R);break;case 9972:ce[5]=_qdb("0x2f1"),ce[8]=_qdb("0x2e6"),ce[6]=_qdb("0xb6"),t+=10977;break;case 20742:if(Q===_qdb("0x1c8"))_qdb("0x10e")===_qdb("0x6ae")?(z=L,A=M):t+=359;else if(_qdb("0x5c6")===_qdb("0x1e")){var ee=y(aJ);a9[_qdb("0x33f")](ee,N)}else t+=27466;break;case 37306:L-=F,t+=-10500;break;case 24371:L=ce[0]>>16,t+=12453;break;case 53151:Q%=5,t+=-23527;break;case 2071:ce[0]=_qdb("0x5a"),t+=23083;break;case 5138:ce[22]=_qdb("0x98"),ce[31]=_qdb("0x61f"),ce[26]=_qdb("0x6cb"),t+=3127;break;case 8874:ce[24]=_qdb("0x1cc"),t+=41924;break;case 61100:t+=-50489;break;case 1633:ce[14]=_qdb("0x108"),t+=8369;break;case 23651:ce[2]=_qdb("0x649"),ce[3]=_qdb("0x2fb"),ce[25]=_qdb("0x10"),t+=-3884;break;case 2355:ce[15]=_qdb("0x5bd"),ce[21]=_qdb("0x66d"),ce[2]=_qdb("0x51f"),ce[6]=_qdb("0x32d"),t+=6222;break;case 42215:t+=7466;break;case 11203:t+=8387;break;case 16493:if(Q){if(_qdb("0x427")===_qdb("0x358")){var te=0;if(null!==str&&str!==undefined&&0!==str){var ne=1+(str[_qdb("0x319")]<<2);te=bi(ne),a2(str,te,ne)}return te}t+=-2333}else _qdb("0x93")==_qdb("0x93")?t+=31715:(h=(v=14-((R=(v=(h=v<<(H=(h=v+1048320|0)>>>16&8))+520192|0)>>>16&4)|H|(g=(h=(v=h<<R)+245760|0)>>>16&2))+((h=v<<g)>>>15)|0)+7|0,ia=1&(h?Z>>>h:Z)|v<<1);break;case 45709:if(Q)_qdb("0x44a")==_qdb("0x44a")?t+=-36568:(b4[aa+16>>2]=H,b4[H+24>>2]=aa);else{if(_qdb("0x38b")!=_qdb("0x38b"))return type===_qdb("0x3a");t+=2499}break;case 55422:ce[18]=_qdb("0x101"),ce[13]=_qdb("0x1b"),ce[23]=_qdb("0x439"),t+=-25534;break;case 29805:ce[11]=_qdb("0x7"),ce[6]=_qdb("0x65"),ce[16]=_qdb("0x268"),t+=7863;break;case 14550:ce[16]=_qdb("0x4ba"),ce[3]=_qdb("0xd1"),t+=-1028;break;case 64447:ce[11]=_qdb("0x3fb"),t+=-25730;break;case 12158:ce[9]=_qdb("0x2a9"),ce[14]=_qdb("0x689"),ce[12]=_qdb("0x409"),ce[21]=_qdb("0x6a8"),t+=-9678;break;case 26579:i[29]=[],t+=-5480;break;case 50943:ce[5]=_qdb("0x673"),ce[14]=_qdb("0x2db"),ce[10]=_qdb("0x156"),t+=-7e3;break;case 25440:ce[11]=_qdb("0x1e2"),ce[2]=_qdb("0x4f3"),ce[19]=_qdb("0x26"),t+=-23807;break;case 34047:ce[14]=_qdb("0x52c"),ce[10]=_qdb("0x65f"),ce[11]=_qdb("0xb5"),t+=-29265;break;case 23936:i[251]=[],t+=8614;break;case 11448:ce[12]=_qdb("0x547"),ce[3]=_qdb("0x42"),ce[19]=_qdb("0x6e"),t+=46579;break;case 22594:if(Q>=0){if(_qdb("0x45")!=_qdb("0x45")){var re=bi(ce[_qdb("0x319")]);return a5(ce,re),re}t+=1009}else _qdb("0x97")===_qdb("0x475")?(b4[n+12>>2]=M,b4[H>>2]=n):t+=25614;break;case 13602:i[118]=[],t+=11125;break;case 50685:ge+=ve[_qdb("0x525")](H),t+=-11886;break;case 10365:if(typeof M===_qdb("0x16d"))_qdb("0x13a")!=_qdb("0x13a")?t+=-47550:t+=33105;else{if(_qdb("0xc4")!=_qdb("0xc4")){if(r=(0|b4[6])+n|0,b4[6]=r,b4[9]=m,b4[m+4>>2]=1|r,(0|m)!=(0|b4[8]))return;return b4[8]=0,void(b4[5]=0)}t+=37843}break;case 14160:M=Q,t+=-7527;break;case 46032:M<i[R][_qdb("0x319")]?_qdb("0x65a")===_qdb("0x4ce")?t+=-36342:t+=-30434:_qdb("0x53c")!=_qdb("0x53c")?(b4[x+16>>2]=ve,b4[ve+24>>2]=x):t+=-7911;break;case 51116:var ie=!0;t+=-9593;break;case 65115:if(Q>0)_qdb("0x26a")===_qdb("0xd2")?(va=f,wa=fa):t+=-22081;else{if(_qdb("0x313")!=_qdb("0x313")){for(var ae=0,oe=0;oe<str[_qdb("0x319")];++oe){var se=str[_qdb("0x687")](oe);se>=55296&&se<=57343&&(se=65536+((1023&se)<<10)|1023&str[_qdb("0x687")](++oe)),se<=127?++ae:ae+=se<=2047?2:se<=65535?3:4}return ae}t+=-16907}break;case 10604:ge+=F,t+=6194;break;case 6153:ce[8]=_qdb("0xfb"),ce[0]=_qdb("0x181"),t+=54649;break;case 44945:F<=L?_qdb("0x564")!=_qdb("0x564")?(B=H,C=ve):t+=-5358:_qdb("0x6cd")===_qdb("0x1a")?(L=F,m=F,n=j):t+=-34334;break;case 4351:if(ie)if(_qdb("0x278")===_qdb("0x518"))for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];)ax(k[_qdb("0x296")][_qdb("0x495")]());else t+=59939;else _qdb("0x17f")==_qdb("0x17f")?t+=6092:t+=785;break;case 38987:ce[23]=_qdb("0x371"),ce[28]=_qdb("0x53"),t+=-5417;break;case 12555:ce[8]=_qdb("0x3ce"),ce[9]=_qdb("0x3f1"),t+=20198;break;case 43660:typeof Q===_qdb("0x3a")?_qdb("0xe4")==_qdb("0xe4")?t+=21455:(ba=w,s=e):_qdb("0x4db")==_qdb("0x4db")?t+=4548:(R=g&~(1<<M),b4[3]=R,t=R);break;case 37332:ce[39]=_qdb("0x5e8"),ce[34]=_qdb("0x5ec"),ce[8]=_qdb("0x3e6"),t+=-34150;break;case 43943:i[97]=[],t+=-12267;break;case 37975:ce[11]=_qdb("0x5c8"),ce[12]=_qdb("0x2aa"),ce[10]=_qdb("0x117"),t+=-21604;break;case 45029:ce[22]=_qdb("0x43b"),ce[7]=_qdb("0x650"),t+=-4063;break;case 43746:t+=12285;break;case 3182:ce[9]=_qdb("0x57f"),ce[29]=_qdb("0x8a"),ce[2]=_qdb("0x43"),ce[26]=_qdb("0x367"),t+=30297;break;case 36148:M<i[R][_qdb("0x319")]?_qdb("0x536")===_qdb("0x5d7")?t+=-26334:t+=-145:_qdb("0x462")==_qdb("0x462")?t+=6067:str+=String[_qdb("0x35a")](u0);break;case 11417:ce[15]=_qdb("0x504"),t+=44434;break;case 59352:ce[14]=_qdb("0x68a"),ce[9]=_qdb("0x55e"),t+=3723;break;case 60802:ce[18]=_qdb("0x1bf"),ce[5]=_qdb("0x27e"),t+=-56165;break;case 19864:ce[6]=_qdb("0x5a6"),t+=-5388;break;case 21943:ce=i[103],t+=-1902;break;case 20671:ce[17]=_qdb("0x3f3"),t+=24359;break;case 29624:t+=30960;break;case 4946:ce[1]=_qdb("0x5ad"),ce[18]=_qdb("0x103"),t+=32095;break;case 50104:ce[20]=_qdb("0x45f"),ce[19]=_qdb("0x39c"),ce[2]=_qdb("0x16"),ce[17]=_qdb("0xf6"),t+=-37946;break;case 40199:t+=-4505;break;case 33412:ce[11]=_qdb("0x6a"),t+=7324;break;case 8594:R=-1,t+=1849;break;case 18840:ce[6]=_qdb("0x169"),ce[1]=_qdb("0x404"),t+=16010;break;case 930:ce[14]=_qdb("0x432"),ce[15]=_qdb("0x6be"),t+=49493;break;case 53608:i[33]=[],t+=-11006;break;case 18743:ce[19]=_qdb("0x515"),ce[8]=_qdb("0x39e"),t+=8634;break;case 29099:ce[3]=_qdb("0x274"),ce[12]=_qdb("0xc2"),t+=-8370;break;case 63485:ce[0]=_qdb("0x3a3"),ce[2]=_qdb("0x22e"),t+=-58963;break;case 64267:ce[0]=_qdb("0x4f7"),ce[12]=_qdb("0x24f"),t+=-19625;break;case 64463:var ce=[];t+=-33327;break;case 38121:t+=12995;break;case 18016:ce[14]=_qdb("0x133"),ce[3]=_qdb("0x6c3"),t+=-2646;break;case 5148:ce[24]=_qdb("0x682"),ce[32]=_qdb("0x3f7"),ce[1]=_qdb("0x6bf"),t+=7441;break;case 53067:ce[2]=_qdb("0x4c8"),ce[7]=_qdb("0x19b"),t+=-7042;break;case 33445:Q=R[_qdb("0xbb")],t+=-16952;break;case 48441:ce[12]=_qdb("0x24e"),t+=-1243;break;case 28322:fe=R[_qdb("0x87")],t+=19101;break;case 11753:ce[21]=_qdb("0x1ff"),t+=30358;break;case 65140:fe=_qdb("0x136"),t+=-8255;break;case 61366:Q%=10,t+=-59633;break;case 11841:ce[15]=_qdb("0x36"),ce[4]=_qdb("0x25"),ce[1]=_qdb("0x3a0"),ce[0]=_qdb("0x4df"),t+=34363;break;case 1106:ce[10]=_qdb("0x405"),ce[7]=_qdb("0x648"),ce[21]=_qdb("0x4b8"),t+=44732;break;case 12606:ce[4]=_qdb("0x654"),ce[6]=_qdb("0x50"),t+=21843;break;case 41999:ce[2]=_qdb("0x69e"),ce[4]=_qdb("0x3b8"),t+=22268;break;case 8367:ce=i[63],t+=3081;break;case 40207:if(Q)_qdb("0x2ea")===_qdb("0x23e")?k[_qdb("0x433")][_qdb("0x660")]()():t+=1354;else if(_qdb("0xe")==_qdb("0xe"))t+=8001;else{var ue=1+(str[_qdb("0x319")]<<2);ret=bi(ue),a2(str,ret,ue)}break;case 36229:ce[18]=_qdb("0x10f"),ce[8]=_qdb("0x5da"),t+=-29447;break;case 0:ce[4]=_qdb("0x35f"),t+=34076;break;case 56370:ce[14]=_qdb("0x11c"),ce[22]=_qdb("0x78"),t+=-50606;break;case 24151:ce[6]=_qdb("0x289"),t+=23234;break;case 15370:ce[28]=_qdb("0x16a"),ce[13]=_qdb("0x67d"),t+=44409;break;case 41121:ce[6]=_qdb("0x4f"),ce[12]=_qdb("0x355"),ce[9]=_qdb("0x22f"),t+=19442;break;case 60644:ce=i[241],t+=2841;break;case 49411:ce[10]=_qdb("0x656"),ce[22]=_qdb("0x55f"),ce[5]=_qdb("0x513"),ce[18]=_qdb("0x41a"),t+=-5534;break;case 2296:t+=-604;break;case 21263:M=Q,t+=10109;break;case 20025:ie=!1,t+=-3288;break;case 52239:H+=3,t+=11814;break;case 10443:t+=-3791;break;case 12589:ce[10]=_qdb("0x63"),ce[8]=_qdb("0x157"),ce[25]=_qdb("0x67a"),ce[4]=_qdb("0x4bb"),t+=40208;break;case 34076:ce[5]=_qdb("0x14"),ce[10]=_qdb("0xde"),ce[6]=_qdb("0xe8"),t+=-22323;break;case 25268:ce[5]=_qdb("0x17"),ce[3]=_qdb("0x282"),ce[13]=_qdb("0xeb"),ce[16]=_qdb("0x360"),t+=14115;break;case 60903:i[58]=[],t+=-47023;break;case 65253:ce[17]=_qdb("0x342"),ce[11]=_qdb("0x3f9"),t+=-20069;break;case 34171:t+=-25577;break;case 7238:ce[6]=_qdb("0x310"),ce[32]=_qdb("0x2d2"),t+=35591;break;case 43034:Q=M[_qdb("0x1e7")],t+=1408;break;case 12825:ce[0]=_qdb("0x94"),t+=-7687;break;case 4516:ce[25]=_qdb("0x383"),ce[20]=_qdb("0x251"),ce[4]=_qdb("0x555"),t+=46056;break;case 10303:ce[30]=_qdb("0x437"),t+=38225;break;case 36769:ce=i[108],t+=-3807;break;case 51748:ce[0]=_qdb("0x2c"),ce[24]=_qdb("0x193"),t+=-20354;break;case 6123:F=F[_qdb("0x15")](10),t+=4481;break;case 31082:i[159]=[],t+=21220;break;case 20828:i[108]=[],t+=15941;break;case 40284:ce[3]=_qdb("0x2df"),ce[2]=_qdb("0x2b0"),ce[10]=_qdb("0x4f1"),ce[19]=_qdb("0x5ef"),t+=15669;break;case 42928:ce[18]=_qdb("0x450"),ce[16]=_qdb("0x3ac"),ce[3]=_qdb("0x23f"),t+=-12750;break;case 31645:ce[18]=_qdb("0x675"),ce[9]=_qdb("0x4ab"),t+=11357;break;case 64581:ce[31]=_qdb("0x164"),t+=-34334;break;case 10128:fe=fe[_qdb("0x3dd")]||_qdb("0x136"),t+=-8587;break;case 65465:ce[22]=_qdb("0x494"),ce[5]=_qdb("0x5ac"),ce[4]=_qdb("0x173"),t+=-57238;break;case 6652:R++,t+=38140;break;case 41701:if(typeof R===_qdb("0x20"))_qdb("0x235")===_qdb("0x22d")?(j[F>>0]=Q,F=F+1|0):t+=-36342;else if(_qdb("0x454")==_qdb("0x454"))t+=6507;else if(null!==aE&&(clearInterval(aE),aE=null),aF){var de=aF;aF=null,de()}break;case 16798:H++,t+=32719;break;case 56031:ge+="0",t+=-35945;break;case 33038:ce[11]=_qdb("0x1dd"),t+=16295;break;case 63041:ce=i[38],t+=-11331;break;case 40991:ce[0]=_qdb("0xa7"),t+=12617;break;case 8491:R=-1,t+=6948;break;case 16380:ie=!1,t+=44720;break;case 49982:ce[21]=_qdb("0x3c1"),t+=-15936;break;case 57517:ce[10]=_qdb("0x5e5"),ce[8]=_qdb("0x18a"),ce[18]=_qdb("0x55"),ce[9]=_qdb("0xe0"),t+=-45676;break;case 24898:ce[16]=_qdb("0x4d8"),ce[12]=_qdb("0x33a"),ce[1]=_qdb("0x359"),ce[9]=_qdb("0x474"),t+=-15146;break;case 9156:ce[4]=_qdb("0x386"),ce[8]=_qdb("0x16b"),t+=29970;break;case 11632:ce[34]=_qdb("0x1fb"),ce[39]=_qdb("0x2e9"),t+=7997;break;case 64931:ce=[],t+=-6306;break;case 39403:ce[30]=_qdb("0x3e4"),t+=-14742;break;case 33813:t+=-32121;break;case 49681:ie=!1,t+=-38478;break;case 58216:ce[1]=_qdb("0x3e"),t+=-12384;break;case 45838:ce[13]=_qdb("0x1c6"),ce[6]=_qdb("0x230"),t+=-33056;break;case 33844:ce[8]=_qdb("0x455"),ce[9]=_qdb("0x3fd"),t+=-20242;break;case 33346:ce[20]=_qdb("0x18f"),ce[2]=_qdb("0x3af"),ce[4]=_qdb("0x19"),ce[3]=_qdb("0x609"),t+=13322;break;case 5058:ce[13]=_qdb("0x5b1"),ce[19]=_qdb("0x190"),ce[7]=_qdb("0x49d"),t+=-4128;break;case 25286:try{_qdb("0x5e6")!==_qdb("0xb8")?R=M(_qdb("0x677")):(z=w,A=v)}catch(xe){}t+=16415;break;case 56816:F=F[_qdb("0x687")](0),t+=-50693;break;case 47353:ce[4]=_qdb("0x4f2"),t+=-45072;break;case 42697:ce=i[15],t+=-5899;break;case 21804:i[18]=[],t+=5982;break;case 56336:ce[2]=_qdb("0x60"),ce[24]=_qdb("0x128"),ce[18]=_qdb("0x9"),ce[17]=_qdb("0x679"),t+=-15844;break;case 37192:t+=-1044;break;case 12602:t+=-10910;break;case 34046:ce[0]=_qdb("0x543"),t+=1551;break;case 14349:ce[4]=_qdb("0x625"),t+=9802;break;case 63296:ge+=ve[_qdb("0x525")](F),t+=-11057;break;case 23807:if(!Q||d(Q))_qdb("0x540")==_qdb("0x540")?t+=13302:(n-=8,x=y);else{if(_qdb("0x4c6")===_qdb("0x54"))return U(ident);t+=24401}break;case 14247:ce[3]=_qdb("0x252"),ce[8]=_qdb("0x191"),ce[18]=_qdb("0x63c"),t+=-12954;break;case 48710:R<i[_qdb("0x319")]?_qdb("0x6a6")==_qdb("0x6a6")?t+=-27396:(ia=0|b4[7],0==(0|ia)|na>>>0<ia>>>0&&(b4[7]=na),b4[115]=na,b4[116]=oa,b4[118]=0,b4[12]=b4[121],b4[11]=-1,b4[16]=52,b4[15]=52,b4[18]=60,b4[17]=60,b4[20]=68,b4[19]=68,b4[22]=76,b4[21]=76,b4[24]=84,b4[23]=84,b4[26]=92,b4[25]=92,b4[28]=100,b4[27]=100,b4[30]=108,b4[29]=108,b4[32]=116,b4[31]=116,b4[34]=124,b4[33]=124,b4[36]=132,b4[35]=132,b4[38]=140,b4[37]=140,b4[40]=148,b4[39]=148,b4[42]=156,b4[41]=156,b4[44]=164,b4[43]=164,b4[46]=172,b4[45]=172,b4[48]=180,b4[47]=180,b4[50]=188,b4[49]=188,b4[52]=196,b4[51]=196,b4[54]=204,b4[53]=204,b4[56]=212,b4[55]=212,b4[58]=220,b4[57]=220,b4[60]=228,b4[59]=228,b4[62]=236,b4[61]=236,b4[64]=244,b4[63]=244,b4[66]=252,b4[65]=252,b4[68]=260,b4[67]=260,b4[70]=268,b4[69]=268,b4[72]=276,b4[71]=276,b4[74]=284,b4[73]=284,b4[76]=292,b4[75]=292,b4[78]=300,b4[77]=300,ia=oa+-40|0,Q=na+8|0,ma=0==(7&Q|0)?0:0-Q&7,Q=na+ma|0,qa=ia-ma|0,b4[9]=Q,b4[6]=qa,b4[Q+4>>2]=1|qa,b4[na+ia+4>>2]=40,b4[10]=b4[125]):_qdb("0x492")!==_qdb("0x47b")?t+=11874:t+=46783;break;case 28652:ce[5]=_qdb("0x231"),ce[38]=_qdb("0x3d0"),ce[19]=_qdb("0x44"),t+=26048;break;case 56522:var le=_qdb("0x136");t+=-19735;break;case 52715:ce[23]=_qdb("0x3d3"),ce[2]=_qdb("0x2bc"),ce[13]=_qdb("0x685"),ce[0]=_qdb("0x5d6"),t+=1778;break;case 58824:i[169]=[],t+=4649;break;case 54043:ce=i[39],t+=2327;break;case 45118:var fe=_qdb("0x136");t+=11404;break;case 17844:ce[24]=_qdb("0x23b"),ce[18]=_qdb("0x2c6"),ce[2]=_qdb("0x69a"),t+=19993;break;case 37041:ce[8]=_qdb("0x3aa"),ce[7]=_qdb("0x216"),ce[5]=_qdb("0x26c"),t+=-9881;break;case 23603:Q=R[_qdb("0xd8")],t+=1127;break;case 5764:ce[23]=_qdb("0x6d1"),ce[2]=_qdb("0x139"),ce[17]=_qdb("0x1a9"),t+=-621;break;case 39509:ce[7]=_qdb("0x10a"),ce[11]=_qdb("0x484"),ce[16]=_qdb("0x2b4"),t+=-26355;break;case 3178:ce[17]=_qdb("0x46c"),ce[26]=_qdb("0x3fe"),ce[0]=_qdb("0x2e5"),t+=-3178;break;case 45827:ce[4]=_qdb("0x3b4"),ce[6]=_qdb("0x50e"),t+=14488;break;case 44442:if(typeof Q===_qdb("0x3a")){if(_qdb("0x4d6")!=_qdb("0x4d6"))throw new Error(_qdb("0x510")+aJ);t+=-31865}else{if(_qdb("0x421")!=_qdb("0x421")){var he=he>>>16,pe=65535&he,_e=65535&pe;return pe*_e+(he*_e+pe*(pe>>>16)<<16)|0}t+=3766}break;case 37668:ce[29]=_qdb("0x2e"),t+=-26706;break;case 46204:ce[14]=_qdb("0x3ad"),t+=-20999;break;case 2154:ce[18]=_qdb("0x5"),ce[23]=_qdb("0x3c8"),ce[20]=_qdb("0x1c3"),t+=47828;break;case 62933:ce[15]=_qdb("0x62c"),ce[7]=_qdb("0x651"),ce[17]=_qdb("0x48d"),t+=1648;break;case 35694:Q+=5,t+=-23092;break;case 51710:ce[4]=_qdb("0x61a"),t+=1357;break;case 20729:ce[10]=_qdb("0x1e3"),t+=-5881;break;case 24200:ce[1]=_qdb("0x3e5"),t+=10345;break;case 34254:ce[12]=_qdb("0x465"),ce[25]=_qdb("0x329"),t+=-3722;break;case 61945:ce[1]=_qdb("0x40a"),ce[13]=_qdb("0x3bc"),t+=-17976;break;case 53858:Q=M[_qdb("0x1cf")],t+=-4930;break;case 13752:L=fe[_qdb("0x319")],t+=27584;break;case 50748:ce[15]=_qdb("0x46d"),ce[26]=_qdb("0x3b3"),t+=4674;break;case 3283:ce[4]=_qdb("0xf"),t+=49481;break;case 18774:i[59]=[],t+=19018;break;case 5960:ce[6]=_qdb("0x376"),t+=4304;break;case 14942:ce[30]=_qdb("0x305"),t+=48389;break;case 46107:return Q;case 53954:ce[22]=_qdb("0x4a1"),ce[15]=_qdb("0x5b3"),ce[19]=_qdb("0x1fe"),ce[13]=_qdb("0x4ec"),t+=-10260;break;case 22350:ce[9]=_qdb("0x532"),ce[14]=_qdb("0x457"),ce[0]=_qdb("0x577"),ce[15]=_qdb("0x66b"),t+=-169;break;case 31676:ce=i[97],t+=-17327;break;case 63886:ce[2]=_qdb("0x2a8"),ce[13]=_qdb("0x57c"),ce[11]=_qdb("0x153"),t+=-48575;break;case 45030:ce[14]=_qdb("0x403"),t+=-42560;break;case 64957:ce[11]=_qdb("0x262"),t+=-27646;break;case 30403:ce[13]=_qdb("0x2f9"),ce[11]=_qdb("0x35b"),t+=-6636;break;case 31330:ce[28]=_qdb("0x3b9"),t+=21385;break;case 37860:ce=i[128],t+=13848;break;case 28276:ce[25]=_qdb("0x5b6"),t+=-15135;break;case 30178:ce[11]=_qdb("0x64d"),ce[2]=_qdb("0x79"),t+=17175;break;case 49517:t+=-19256;break;case 63682:ce[2]=_qdb("0x330"),ce[5]=_qdb("0x1fc"),ce[15]=_qdb("0x4f4"),t+=-53391;break;case 52797:ce[22]=_qdb("0x55d"),ce[9]=_qdb("0x9e"),ce[33]=_qdb("0x99"),t+=-373;break;case 63463:ce=i[225],t+=-30632;break;case 25205:i[177]=[],t+=29871;break;case 41424:ce[2]=_qdb("0x493"),ce[21]=_qdb("0x12d"),ce[9]=_qdb("0x277"),ce[11]=_qdb("0x125"),t+=23896;break;case 39383:ce[38]=_qdb("0x598"),t+=-28175;break;case 14289:t+=-12597;break;case 37624:i[63]=[],t+=-29257;break;case 52885:ce[23]=_qdb("0x72"),ce[18]=_qdb("0x175"),ce[17]=_qdb("0x6c9"),t+=-49602;break;case 31701:Q+=11,t+=-29405;break;case 39587:H=ce[M]>>7,t+=-12648;break;case 20019:ce[27]=_qdb("0x4cd"),ce[15]=_qdb("0x5fc"),ce[29]=_qdb("0x5c4"),t+=-12696;break;case 60315:ce[11]=_qdb("0x3ab"),ce[10]=_qdb("0x5f6"),ce[3]=_qdb("0x1df"),t+=-33736;break;case 62233:ce[4]=_qdb("0x556"),ce[0]=_qdb("0x5f8"),t+=-20792;break;case 38105:t+=-913;break;case 57072:ce[7]=_qdb("0x50f"),ce[0]=_qdb("0x3db"),ce[6]=_qdb("0x19c"),ce[1]=_qdb("0x49b"),t+=-14144;break;case 15598:var ve=i[R][M],ge="";t+=8216;break;case 15007:ce[15]=_qdb("0x2"),ce[32]=_qdb("0x453"),ce[16]=_qdb("0x84"),ce[19]=_qdb("0x671"),t+=25237;break;case 44034:ce[12]=_qdb("0x217"),ce[10]=_qdb("0xb9"),ce[15]=_qdb("0x429"),ce[14]=_qdb("0x63f"),t+=-20587;break;case 14848:ce[14]=_qdb("0x32c"),ce[7]=_qdb("0x12"),t+=-8695;break;case 47736:ce[6]=_qdb("0x5dd"),ce[4]=_qdb("0x30a"),ce[12]=_qdb("0x364"),ce[13]=_qdb("0x4be"),t+=4894;break;case 3201:ce[22]=_qdb("0x655"),ce[15]=_qdb("0x542"),ce[4]=_qdb("0x65b"),ce[21]=_qdb("0x333"),t+=27202;break;case 11720:ce[29]=_qdb("0x37f"),ce[9]=_qdb("0x34e"),ce[21]=_qdb("0x392"),t+=27267;break;case 43576:ce[16]=_qdb("0x42c"),t+=-9529;break;case 32074:ce[3]=_qdb("0x53a"),ce[0]=_qdb("0x2d4"),t+=10636;break;case 17783:ce[6]=_qdb("0x280"),ce[30]=_qdb("0x4c5"),t+=-4958;break;case 31193:ce[17]=_qdb("0x566"),ce[26]=_qdb("0x2d6"),t+=-11876;break;case 10459:ce[26]=_qdb("0x562"),ce[27]=_qdb("0x4ed"),ce[8]=_qdb("0x197"),t+=7557;break;case 2281:ce[10]=_qdb("0x288"),ce[9]=_qdb("0x11f"),ce[5]=_qdb("0x4a9"),ce[17]=_qdb("0x1d2"),t+=57558;break;case 48906:ce[15]=_qdb("0x695"),ce[9]=_qdb("0x544"),ce[20]=_qdb("0x7e"),ce[11]=_qdb("0x3ec"),t+=-21918;break;case 1998:ce[10]=_qdb("0x260"),ce[27]=_qdb("0xb4"),t+=8322;break;case 7386:ce[5]=_qdb("0x172"),ce[1]=_qdb("0xfd"),t+=26026;break;case 40375:ce[17]=_qdb("0x2ce"),ce[20]=_qdb("0x65c"),ce[12]=_qdb("0x5c3"),t+=-38377;break;case 22611:ce=i[68],t+=4917;break;case 52671:ce[12]=_qdb("0x2d"),ce[21]=_qdb("0x694"),ce[13]=_qdb("0x29c"),t+=-52156;break;case 28447:M=-1,t+=36484;break;case 20041:ce[14]=_qdb("0x2ca"),ce[21]=_qdb("0x690"),ce[13]=_qdb("0x5f2"),ce[23]=_qdb("0x52a"),t+=39296;break;case 60897:ce[10]=_qdb("0x463"),t+=-27747;break;case 50423:ce[16]=_qdb("0x223"),ce[9]=_qdb("0x1ec"),t+=15042;break;case 5559:ce[4]=_qdb("0x60e"),t+=48274;break;case 45981:ce[4]=_qdb("0x29f"),ce[0]=_qdb("0x229"),ce[11]=_qdb("0x46f"),ce[3]=_qdb("0x3ed"),t+=-875;break;case 37592:ce[8]=_qdb("0x2a7"),ce[10]=_qdb("0x142"),t+=5764;break;case 5311:ce[M]=parseInt(ge,10),t+=33374;break;case 2470:i[107]=[],t+=44286;break;case 12072:i[23]=[],t+=43600;break;case 48250:t+=-9808;break;case 21265:if("\n"===F){if(_qdb("0x5f7")!=_qdb("0x5f7"))return k[_qdb("0x189")](path,u);t+=29420}else{if(_qdb("0x6")!=_qdb("0x6"))return console[_qdb("0x186")](_qdb("0x591")+request[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t+=22481}break;case 32962:ce[3]=_qdb("0x612"),ce[17]=_qdb("0x36e"),ce[2]=_qdb("0x56a"),t+=6617}}function aV(){if(_qdb("0x469")==_qdb("0x469"))return a9[_qdb("0x319")];B=q,C=j}function aW(e){_qdb("0x5af")!==_qdb("0x524")?aI(_qdb("0x537")):p+=58393}function aX(e){if(_qdb("0x0")!=_qdb("0x0"))return returnType===_qdb("0x546")?a0(ret):returnType===_qdb("0x5c1")?Boolean(ret):ret;aW(e>>>=0)}function b0(e){if(_qdb("0x4de")!==_qdb("0x3ea")){for(var t=[],n=0;n<e[_qdb("0x319")];n++)if(_qdb("0x5bb")==_qdb("0x5bb")){var r=e[n];r>255&&(_qdb("0xbd")!==_qdb("0x221")?(aZ&&(_qdb("0x3fc")==_qdb("0x3fc")?T(!1,_qdb("0x369")+r+" ("+String[_qdb("0x35a")](r)+_qdb("0x1f2")+n+_qdb("0x413")):d=n("fs")),r&=255):p+=31257),t[_qdb("0x3dc")](String[_qdb("0x35a")](r))}else{var i=u0-65536;str+=String[_qdb("0x35a")](55296|i>>10,56320|1023&i)}return t[_qdb("0x293")]("")}aI(_qdb("0x237")+text)}function b2(e){if(_qdb("0x48c")===_qdb("0x18d"))k[_qdb("0x4ef")](m)&&(l[m]=k[m]);else try{if(_qdb("0x5a3")!==_qdb("0x434")){for(var t=b1(e),n=new Uint8Array(t[_qdb("0x319")]),r=0;r<t[_qdb("0x319")];++r)_qdb("0x59e")!=_qdb("0x59e")?(j[b6>>0]=d,b6=b6+1|0):n[r]=t[_qdb("0x687")](r);return n}var i=new XMLHttpRequest;return i[_qdb("0x6bc")](_qdb("0xf9"),url,!1),i[_qdb("0x254")]=_qdb("0x141"),i[_qdb("0x2ef")](null),new Uint8Array(i[_qdb("0x63b")])}catch(i){if(_qdb("0x20e")==_qdb("0x20e"))throw new Error(_qdb("0x2bf"));p+=24401}}function b3(e){if(_qdb("0x110")!==_qdb("0x4e2")){if(!aM(e)){if(_qdb("0x637")!==_qdb("0x332"))return;L=k,M=0,N=0,O=61}return b2(e[_qdb("0x2e4")](aL[_qdb("0x319")]))}setTimeout(bp,0)}function(){}function(){}}_qdc()},function(e,t,n){var r=n(302);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(){},function(e,t,n){"use strict";var r=n(130),i=n(86),a=n(377),o=n(215),s=n(44),c=n(150),u=n(187);e.exports=function(e){var t,n,d,l,f,h,p=i(e),_="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:undefined,y=g!==undefined,m=u(p),b=0;if(y&&(g=r(g,v>2?arguments[2]:undefined,2)),m==undefined||_==Array&&o(m))for(n=new _(t=s(p.length));t>b;b++)h=y?g(p[b],b):p[b],c(n,b,h);else for(f=(l=m.call(p)).next,n=new _;!(d=f.call(l)).done;b++)h=y?a(l,g,[d.value,b],!0):d.value,c(n,b,h);return n.length=b,n}},function(e,t,n){"use strict";var r,i=n(22),a=n(109).f,o=n(44),s=n(378),c=n(95),u=n(379),d=n(135),l="".startsWith,f=Math.min,h=u("startsWith");i({target:"String",proto:!0,forced:!!(d||h||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(e){var t=String(c(this));s(e);var n=o(f(arguments.length>1?arguments[1]:undefined,t.length)),r=String(e);return l?l.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(24),i=n(33),a=n(135),o=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t["delete"]("b"),n+=r+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",undefined).host}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(5),c=n.n(s),u=n(6),d=n.n(u),l=n(1),f=n.n(l),h=n(291),p=n(99);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var v=function(e){c()(n,e);var t=_(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"push",value:function(e){for(var t,n,r,i,a,o=e.pts,s=e.dts,c=e.payload,u=0,d=0;u+5<c.length;)if(255===c[u]&&240==(246&c[u+1])){if(n=2*(1&~c[u+1]),t=(3&c[u+3])<<11|c[u+4]<<3|(224&c[u+5])>>5,a=9e4*(i=1024*(1+(3&c[u+6])))/h.a[(60&c[u+2])>>>2],r=u+t,c.byteLength<r)return;var l={pts:o+d*a,dts:s+d*a,sampleCount:i,audioObjectType:1+(c[u+2]>>>6&3),channelCount:(1&c[u+2])<<2|(192&c[u+3])>>>6,sampleRate:h.a[(60&c[u+2])>>>2],samplingFrequencyIndex:(60&c[u+2])>>>2,sampleSize:16,data:c.subarray(u+7+n,r)};if(this.emit("frame",l),c.byteLength===r)return c=undefined,void this.emit("done");d++,c=c.subarray(r)}else u++}}]),n}(p.EventEmitter)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));n(376);function r(e,t){var n=Object.getPrototypeOf(e);null!=n&&(t(n)||r(n,t))}function i(e,t){t(e)||r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(37),i=n.n(r);function a(e,t){"object"!=i()(e)&&(e=[e]);var n=document.getElementsByTagName("head").item(0)||document.documentElement,r=[],a=e.length-1;!function(){}(0)}},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,'@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}iqp,iqpdiv{display:block}.iqp-player{position:relative;width:100%;height:100%;min-width:200px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player.iqp-full-screen50 video{width:50%!important;height:50%!important}.iqp-player.iqp-full-screen50 video,.iqp-player.iqp-full-screen75 video{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.iqp-player.iqp-full-screen75 video{width:75%!important;height:75%!important}.iqp-player.iqp-web-screen{position:fixed;left:0;top:0;z-index:4201}.iqp-player *,.iqp-player :after,.iqp-player :before{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none;margin:0;padding:0}.iqp-player p{margin:0;padding:0}.iqp-player .clearfix:after,.iqp-player .clearfix:before{content:"";display:table}.iqp-player .clearfix:after{clear:both}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-player-videolayer{position:relative;width:100%;height:100%}.iqp-player .iqp-player-videolayer .iqp-player-videolayer-inner{position:relative;width:100%;height:100%;overflow:hidden}.iqp-player .iqp-player-zoomout .iqp-player-videolayer{height:auto;width:auto;position:absolute;top:24px;bottom:120px;left:456px;right:24px;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.iqp-player .iqp-player-zoomout .iqp-player-videolayer .iqp-player-videolayer-inner{border-radius:8px}.iqp-player .iqp-player-zoomout .iqp-videolayer-narrow{left:536px}.iqp-player .iqp-player-zoomout .iqp-videolayer-rf-mode{left:24px;right:476px}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center}.iqp-player.iqp-player-mini{cursor:pointer}.iqp-player .iqp-dock{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:50px;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;z-index:95}.iqp-player .iqp-dock .iqp-dock-item{position:relative;cursor:pointer}.iqp-player .iqp-dock .iqp-dock-item .iqp-dock-btn-item .iqp-dock-hover-tip{display:none;position:absolute;top:11px;right:55px;height:28px;line-height:28px;padding:0 8px;background:rgba(0,0,0,.5);border-radius:3px;font-size:14px;color:#fff;white-space:nowrap}.iqp-player .iqp-dock .iqp-dock-item .iqp-dock-btn-item:hover .iqp-dock-hover-tip{display:block}.iqp-player .iqp-contrl,.iqp-player .iqp-dock,.iqp-player .iqp-top{color:hsla(0,0%,100%,.9)}.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-close,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-player,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-pulldown,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon-pullup,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-close,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-player,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-pulldown,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon-pullup,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-close,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-player,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-pulldown,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon-pullup,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-close,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-player,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-pulldown,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon-pullup,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-close,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-player,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-pulldown,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon-pullup,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-close,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-player,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-pulldown,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon-pullup{color:#999}.iqp-player .iqp-contrl .iqp-btn:hover .iqp-icon,.iqp-player .iqp-contrl .iqp-btn:hover .iqp-label,.iqp-player .iqp-dock .iqp-btn:hover .iqp-icon,.iqp-player .iqp-dock .iqp-btn:hover .iqp-label,.iqp-player .iqp-top .iqp-btn:hover .iqp-icon,.iqp-player .iqp-top .iqp-btn:hover .iqp-label{color:#00cc4c}.iqp-player .iqp-contrl .iqp-btn.selected .iqp-icon,.iqp-player .iqp-contrl .iqp-btn.selected .iqp-label,.iqp-player .iqp-dock .iqp-btn.selected .iqp-icon,.iqp-player .iqp-dock .iqp-btn.selected .iqp-label,.iqp-player .iqp-top .iqp-btn.selected .iqp-icon,.iqp-player .iqp-top .iqp-btn.selected .iqp-label{color:#00be06}.dn,.iqp-dn1,.iqp-dn2,.iqp-dn3,.iqp-dn4,.iqp-dn5,.iqp-plg-hide{display:none!important}.bottom-public{position:absolute;bottom:0;height:56px;width:100%;z-index:100}.bottom-public .btn-play{border:10px dashed transparent;border-left:15px solid #ababab;display:inline-block;left:20px;top:10px;position:absolute;outline:none}.bottom-public .btn-pause{display:inline-block;left:20px;top:13px}.bottom-public .btn-pause,.bottom-public .btn-pause:before{position:absolute;height:15px;width:2px;background-color:#ababab}.bottom-public .btn-pause:before{content:"";display:block;left:10px}.bottom-public .bottom-public_play,.bottom-public .bottom-public_voice{background:rgba(26,26,26,.8);width:36px;height:36px;border-radius:50%;position:absolute;text-align:left}.bottom-public .bottom-public_play{left:20px}.bottom-public .bottom-public_play .btn-play{left:12px;top:9px;transition:none;z-index:1}.bottom-public .bottom-public_play .btn-pause{left:12px;top:10px}.bottom-public .bottom-public_play .btn-pause,.bottom-public .bottom-public_play .btn-pause:before{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.bottom-public .bottom-public_play:hover .btn-pause,.bottom-public .bottom-public_play:hover .btn-pause:before{background-color:#00be06}.bottom-public .bottom-public_play:hover .btn-play{border-left-color:#6cc900}.bottom-public .bottom-public_voice{left:74px;text-align:left}.bottom-public .bottom-public_voice i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:18px;height:14px;position:relative;display:inline-block;top:13px;cursor:pointer;left:5px}.bottom-public .bottom-public_voice .voice-big{left:1px;top:11px;width:26px;background-position:-65px 0!important}.bottom-public .bottom-public_voice .voice-no{left:10px;top:11px;background-position:0 0!important}.bottom-public .bottom-public_voice:hover .voice-big{background-position:-58px -180px!important;left:2px}.bottom-public .know-detail{padding:9px 15px;border-radius:30px;background:rgba(26,26,26,.8);display:block;float:right;color:#fff;margin-right:72px;line-height:18px;font-size:14px}.bottom-public .know-detail:hover{color:#57a900}.bottom-public .public-screen{background:rgba(26,26,26,.8);width:35px;height:35px;border-radius:50%;position:absolute;right:20px;text-align:left}.bottom-public .public-screen i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:20px;height:20px;display:inline-block;position:relative;top:7px;left:9px}.bottom-public .public-screen:hover .screen-small{background-position:0 -28px}.bottom-public .public-screen:hover .screen-all{background-position:-94px -28px}.bottom-public .public-screen .screen-small{background-position:-34px -28px}.bottom-public .public-screen .screen-all{background-position:-65px -28px}@font-face{font-family:ds-digital;src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot);src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.woff) format("woff"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.ttf) format("truetype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.svg#iconfont) format("svg")}.iqp-bottom-detail{position:absolute;bottom:66px;right:20px;width:90px;height:26px;line-height:26px;border-radius:13px;text-align:center;color:#fff;background-color:#00be06;z-index:100;cursor:pointer}.iqp-bottom-detail:before{content:"";width:28px;height:28px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) 0 -120px;float:right;-webkit-transform:scale(.5);transform:scale(.5);margin:0 2px 0 -14px}.iqp-bottom-detail:hover{background-color:#00c806}.iqp-big-mode .iqp-bottom-detail{bottom:80px}.iqp-player-icon{background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) no-repeat}@font-face{font-family:pcw-player-iconfont;src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot);src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.woff) format("woff"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.ttf) format("truetype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.svg#iconfont) format("svg")}.player-iconfont{font-family:pcw-player-iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.player-iconfont.icon-shuaxin:before{content:"\\e68c"}',""])},function(e,t){e.exports="<iqpdiv data-player-hook=container class=iqp-player> <iqpdiv data-player-hook=ivoslayer style=display:none> </iqpdiv> <iqpdiv tabindex=-1 class=iqp-player data-player-hook=outlayer> <iqpdiv class=iqp-player-videolayer data-player-hook=videolayer> <iqpdiv class=iqp-player-videolayer-inner data-player-hook=videoinnerlayer> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> <iqpdiv class=iqp-barrage></iqpdiv> <iqpdiv data-player-hook=pageContainer> <div id=qiguanAIBox class=qiguan-baike> </div> </iqpdiv> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class=iqp-player-innerlayer data-player-hook=innerlayer> <iqpdiv data-player-hook=sub-plgcontainer></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv>"},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-pad" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mobile" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mini" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow data-style></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:12px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:18px;height:18px;margin-right:5px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat;background-size:18px 18px}",""])},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:14px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:24px;height:24px;margin-right:10px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat}",""])},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-player-mobile .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:263px;white-space:normal}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-bg{width:128px;height:59px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpz_loading180528.png) no-repeat;margin-bottom:27px;margin-left:auto;margin-right:auto;background-size:128px 59px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-line{width:225px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:225px 1.5px;margin-left:auto;margin-right:auto}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-bg{width:169px;height:53px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vip_loading.png) no-repeat;background-size:169px 53px;margin-bottom:15px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-line{width:202.5px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:202.5px 1.5px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-cp .iqp-logoload-bg{width:90px;height:80px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycp_loading180528.png) no-repeat;background-size:90px 80px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-db .iqp-logoload-bg{width:196px;height:52px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdb_loading180528.png) no-repeat;background-size:196px 52px;margin-bottom:22px}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}",""])},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:440px;white-space:normal}.iqp-logo-loading .iqp-logoload-gif{width:440px}.iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}",""])},function(e,t){e.exports='<iqpdiv class=iqp-loading-layer data-player-hook=loading> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img lazy_src=//www.iqiyipic.com/playerLoading/pcw_vip.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img lazy_src=//www.iqiyipic.com/playerLoading/20220421/pcw_sm.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img lazy_src=//www.iqiyipic.com/playerLoading/20220421/pcw_ep.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_image> <img class=loadingImage width=100% height=100% /> <iqpdiv class=iqp-btn-mid> <iqpdiv class=iqp-mid-circle> <iqpdiv class=iqp-mid-loading> <svg aria-hidden=true class="iqp-icon iqp-icon-loading"> <use xlink:href=#iqp-svg-loading class="iqp-svg-symbol iqp-svg-loading"> </use> </svg> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img lazy_src=//www.iqiyipic.com/playerLoading/20220421/pcw_st.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loading" aria-hidden=true> <use xlink:href=#iqp-svg-loading></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-loading-layer{position:absolute;top:0;left:0;height:100%;width:100%;z-index:110}.iqp-loading-layer .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:440px;white-space:normal}.iqp-loading-layer .iqp-logo-loading .iqp-logoload-gif{width:440px}.iqp-loading-layer .iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-loading-layer .iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}",""])},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText>正在全力加载，请稍后…</iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img src=//www.iqiyipic.com/player/cn/pad_vip.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img src=//www.iqiyipic.com/player/cn/20220421/pad_produced.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img src=//www.iqiyipic.com/player/cn/pad_exclusive.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img src=//www.iqiyipic.com/player/cn/20220421/pad_common.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText>正在全力加载，请稍后…</iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,"@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@keyframes iqp-rotate-60{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(60deg);transform:rotate(60deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}.iqp-layer-loading .iqp-icon-loadingmini{color:#00cc36;width:32px;height:32px;-webkit-animation:iqp-rotate-360 1s infinite;animation:iqp-rotate-360 1s infinite}",""])},function(e,t){e.exports="<iqpdiv data-player-hook=loadingposter class=iqp-poster style=display:none;background-size:cover></iqpdiv>"},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loadingmini" aria-hidden=true> <use xlink:href=#iqp-svg-mini-loading></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-layer-tw-guide .download-intlapp-tip{line-height:20px;font-size:14px}.iqp-layer-tw-guide .download-intlapp-btn{display:inline-block;color:#fff;height:36px;line-height:36px;min-width:88px;padding:0 16px;border-radius:2px;background-color:#00cc36;font-size:14px;margin:24px 0 16px}.iqp-layer-tw-guide .download-intlapp-watch{font-weight:600;color:#00c234;font-size:13px;line-height:16px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;cursor:pointer}.iqp-layer-tw-guide .download-intlapp-watch .icon-shuaxin{vertical-align:-1px;margin-right:5px}",""])},function(e,t){e.exports=' <iqpdiv class="iqp-layer iqp-layer-tw-guide" data-player-hook=mobiletwblock style=display:none> <iqpdiv class=iqp-layer-con> <div class=download-intlapp-tip> <p data-player-hook=twinfo>當前視頻僅支持試看5分鐘，歡迎下載APP觀看完整版</p> </div> <div> <a class=download-intlapp-btn data-player-hook=mobiledownload>下載APP觀看完整超清視頻</a> </div> <div class=download-intlapp-watch data-player-hook=mobiletwwatch> <span data-player-hook=twpreview style=display:none>試看5分鐘 > </span> <span data-player-hook=twreplay style=display:none> <i class="player-iconfont icon-shuaxin"></i>重新試看 </span> </div> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".iqp-player-vippay-popup{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;text-align:center;z-index:100}.iqp-player-vippay-popup .iqp-vippay-popup{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:510px;text-align:left;vertical-align:middle}.iqp-player-vippay-popup .iqp-popup-main{text-align:center}.iqp-player-vippay-popup .iqp-major-txt{display:inline-block;max-width:410px;text-align:left;font-size:16px;color:#fff;line-height:26px}.iqp-player-vippay-popup .iqp-btn-switch{direction:rtl}.iqp-player-vippay-popup .iqp-btn-wrap{text-align:center;font-size:0;padding:20px 0 30px;margin:0 -7px}.iqp-player-vippay-popup .iqp-vippay-btn{position:relative;display:inline-block;margin:0 7px;width:242px;height:36px;line-height:36px;background-color:#dab176;color:#582d00;border-radius:18px;text-align:center;font-size:16px;text-decoration:none;cursor:pointer;vertical-align:top;direction:ltr}.iqp-player-vippay-popup .iqp-vippay-btn:hover{color:#582d00;background-color:#e2bc81}.iqp-player-vippay-popup .iqp-vip-popup-profit{overflow:hidden}.iqp-player-vippay-popup .iqp-profit-h3{color:#c8a06a;font-size:16px;padding:4px 0 16px}.iqp-player-vippay-popup .iqp-profit-list{margin-right:-54px;*zoom:1}.iqp-player-vippay-popup .iqp-profit-item{float:left;padding-bottom:20px;padding-right:53px}.iqp-player-vippay-popup .iqp-profit-txt{font-size:12px;color:#fff}.iqp-player-vippay-popup .iqp-sprite-player-pay{display:inline-block;width:26px;height:26px;vertical-align:-8px;margin-right:7px;background:url(//www.iqiyipic.com/common/fix/site-v4/play/sprite-player-pay-200306.png) no-repeat}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-free-con-icon{background-position:0 -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-no-AD-icon{background-position:-40px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-vip-sign-icon{background-position:-80px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-request-play-icon{background-position:-120px -20px}",""])},function(e,t){e.exports=' <iqpdiv class=iqp-player-vippay-popup data-player-hook=vippay style=display:none;position:absolute;top:0;left:0;height:100%;width:100%> <iqpdiv class=iqp-vippay-popup> <iqpdiv class=iqp-popup-main> <iqp class=iqp-major-txt data-player-hook=viptxt></iqp> <iqpdiv class=iqp-btn-wrap> <a href=javascript:; class=iqp-vippay-btn data-player-hook=playbtn>立即观看</a> </iqpdiv> </iqpdiv> <iqpdiv class=iqp-popup-intro> <iqpdiv class=iqp-vip-popup-profit> <iqph3 class=iqp-profit-h3>VIP会员尊享权益</iqph3> <ul class=iqp-profit-list> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-free-con-icon"></iqpi> <iqpspan class=iqp-profit-txt>院线新片</iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-vip-sign-icon"></iqpi> <iqpspan class=iqp-profit-txt>尊贵身份</iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-request-play-icon"></iqpi> <iqpspan class=iqp-profit-txt>热剧抢先看</iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-no-AD-icon"></iqpi> <iqpspan class=iqp-profit-txt>广告特权</iqpspan> </li> </ul> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){"use strict";var r=n(7);t.a={error_code_title1:"呃，播放失败啦~",error_code_desc1:"试试更稳定、流畅的爱奇艺客户端",error_code_desc2:"检测发现您可能在使用恶意插件，请检查并卸载后重试",error_code_desc6:"很抱歉，你访问的视频丢了",error_code_desc7:"该视频当前还未通过审核",error_code_title9:"很抱歉，该视频已被删除，感谢您使用爱奇艺",error_code_title10:"很抱歉，由于版权问题该视频已下线。感谢您使用爱奇艺",error_code_desc10:"你可以试试汇集全网视频的  爱奇艺客户端",error_code_desc11:"很抱歉，因为版权限制，本节目暂无法观看",error_code_title12:"很抱歉，由于平台限制原因，该视频无法在网页端播放。",error_code_desc12:"请使用爱奇艺客户端观看",error_code_title13:"由于版权限制，您所在的地区无法观看该视频",error_code_title15:"因版权限制，部分内容无法播放，可跳转至iQIYI爱奇艺海外版",error_code_desc13:"更有多语言字幕，更多海外版权内容等你来看",error_code_desc14:"本视频为作者的超级粉丝专享内容，请使用移动端爱奇艺App或随刻App观看",error_code_title14:"应版权方要求本视频为加密格式，此浏览器暂不支持播放。<br/>推荐使用最新版本的Chrome浏览器或爱奇艺客户端进行观看。"+(r.a.browser.FIREFOX?"<br/>如Firefox浏览器提示安装播放组件请等待":""),error_code_desc21:"您没有权限观看此视频",error_code_desc22:"您的账号仅限2台设备同时播放，请停止其他设备播放等待5分钟或修改密码",error_code_switch_flash:"播放出错了，请点击切换到原版Flash播放器",error_code_desc_http:"播放出错了，请稍后刷新重试",error_code_title301:"很抱歉，当前视频播放失败，请刷新后再次尝试。<br/>可点击帮助反馈，上报播放问题，我们会尽快帮您解决~",error_code_audio_err:"很抱歉，您的系统音频驱动可能出了问题，试试重新插拔音频外设或重启计算机。<br/>可点击帮助反馈，上报播放问题~",error_code_vda_err:"硬件加速故障，试试在浏览器设置中关闭“硬件加速模式”，关闭后使用CPU解码。<br/>可点击帮助反馈，上报播放问题~",error_code_desc_ad:"呃...广告无法正常播放了，开通VIP功能跳过广告，或关闭屏蔽广告功能",controls_tip_cqdb:'打开爱奇艺桌面版，观看超前点播剧集 <a href="javascript:;" class="iqp-txt-selected" data-event="download">立即体验</a>',controls_tip_vrplay:"使用爱奇艺VR APP可获得更佳观影体验",controls_tip_history:'您上次观看至<i class="iqp-txt-selected">#time#</i> 处, 爱奇艺为您自动续播。',controls_tip_skipheader:"已经为您跳过片头",controls_tip_skiptailer:"即将为您跳过片尾",controls_tip_zstip:"尊贵的星钻VIP会员,您已使用观影券观看本片",controls_tip_cdtip:"尊贵的星钻VIP会员,您已免费解锁本剧超前点播",controls_tip_yytip:"尊贵的星钻VIP会员，您可免费观看本剧",controls_tip_recharge_type1:'免费试看<i class="iqp-txt-selected">6</i>分钟，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">开通VIP会员</a>',controls_tip_recharge_type4:'免费试看<i class="iqp-txt-selected">6</i>分钟，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">开通网球会员</a>',controls_tip_recharge_type2:'试看<i class="iqp-txt-selected">#previewTime#</i>分钟，因版权限制，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">购买本片</a>',controls_tip_recharge_type3:'试看<i class="iqp-txt-selected">#previewTime#</i>分钟，因版权限制，观看完整版请  <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket">用券观看</a>',controls_tip_recharge_defaultype:'正在试看，观看完整内容请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">购买</a>',controls_tip_skipheadertailer:"跳过片头片尾",controls_yes:"是",controls_no:"否",controls_tip_precache:"正在缓冲",controls_tip_switching:"正在切换到",controls_tip_switchedsucc:"已成功切换到",controls_tip_switchwaiting:"画质，请稍候",controls_tip_switchedfail:"画质切换失败，请检查网络并再次尝试",controls_tip_switchedpic:"画质",controls_tip_playspeedguide:"在这里可以调节播放倍速",controls_tip_speed_changed:'播放速度：<i class="iqp-txt-selected">XX</i>',controls_split_tip:' (长按方向键 "→" )',controls_tip_setting_normal:"正常",controls_subtitles_tip_switching:"正在切换到",controls_subtitles_tip_switchedsucc:"已成功切换到",controls_subtitles_tip_switchwaiting:"字幕，请稍候",controls_subtitles_tip_switchedfail:"字幕切换失败，请检查网络并再次尝试",controls_subtitles_tip_switchedpic:"字幕",controls_playlistbtn:"选集",controls_clickplay_hover:"点击播放",controls_clickpause_hover:"点击暂停",controls_replay_hover:"重新播放",controls_forward_hover:"下一集",controls_webfullscreen_hover:"网页全屏",controls_exitwebfullscreen_hover:"退出网页全屏",controls_fullscreen_hover:"全屏",controls_exitfullscreen_hover:"退出全屏",controls_download:"立即下载",controls_download_mobile:"立即体验",controls_clientdownload_mobile:"使用爱奇艺客户端，视频播放更流畅~",controls_cycleplay:"循环播放",controls_select_player:"播放器选择",controls_setting_recommend:"推荐使用  [ HTML5 ]",controls_setting_playratedesc:"倍速",controls_nextbtn:"下一条视频 ",definition_name_limit:"极速",definition_name_limit_vd:"240P",definition_name_standard:"流畅",definition_name_standard_vd:"360P",definition_name_high:"高清",definition_name_high_vd:"480P",definition_name_superhigh:"超清",definition_name_superhigh_vd:"720P",definition_name_720p:"超清",definition_name_720p_vd:"720P",definition_name_1080p:"蓝光",definition_name_1080p_vd:"1080P",definition_name_4k:"4k",definition_name_4k_vd:"4k",definition_name_1080P50:"蓝光",definition_name_1080P50_vd:"1080P50",definition_name_ad:"广告",definition_name_auto:"智能(#definition#)",definition_name_pca4k:"客户端 4K",error_errorcode_text:"错误代码",error_switchplayer:"切换播放器",error_tryrefresh:"立即刷新",error_download:"使用客户端观看",error_jump:"立即跳转",error_help:"帮助反馈",error_private_video:"该视频为私密视频，密码输入正确后才可播放哦",error_private_selfsee:"该视频为私密视频，仅发布者可见哦~",error_private_pwderror:"密码输入不正确，请输入正确密码",error_confirm:"确认",error_input_pwd:"请输入密码",loading_text:"正在全力加载，请稍候…",score_task_guide:"再看10分钟即可领取积分噢~",score_task_login:"观看任务完成，领积分兑超值好礼",score_task_success:"恭喜完成观看视频任务！<br>送你#score#积分奖励",score_task_btn_info1:"查看详情",score_task_btn_info2:"我的积分",score_task_btn_close1:"不再提示",score_task_btn_close2:"不再提示",score_task_btn_login:"立即领取",score_task_btn_login1:"立即登录",ban_btn:"修改密码",ban_tip_001:"账号最多同时在2台设备播放，终止其余设备播放或修改密码恢复",ban_tip_002:"检测到账号被多人共享，会员权益已暂停，请修改密码",ban_tip_004:"检测到您的帐号被严重分享，已永久封禁",error_maintitle:"Flash插件异常",error_fltitle:"下载官方Flash插件",error_h5title:"正在切换HTML5播放模式",error_fltip:"已安装仍无法观看",subtitles_switch:"字幕",subtitles_setting:"字幕设置",subtitles_back:"返回",subtitles_fontsize:"字号",subtitles_alpha:"透明度",subtitles_language:"语言",picture_in_picture:"画中画",contentMenu_bug:"播放问题反馈",contentMenu_link:"复制视频链接",contentMenu_timelink:"复制当前时间的视频链接",contentMenu_shortcut:"快捷键说明",contentMenu_console:"播放状态查询",contentMenu_shortcut_text:"播放快捷键",contentMenu_shortcut_text1_1:"空格",contentMenu_shortcut_text1_2:"：播放 / 暂停",contentMenu_shortcut_text2_2:"：音量提高5%",contentMenu_shortcut_text2_4:"：音量降低5%",contentMenu_shortcut_text3_1:"：快退5秒",contentMenu_shortcut_text4_1:"：单次快进5秒",contentMenu_shortcut_text4_2:"长按倍速播放",contentMenu_shortcut_text5_2:"：播放上一集",contentMenu_shortcut_text5_4:"：播放下一集",contentMenu_shortcut_text7_2:"：进入全屏 / 退出全屏",contentMenu_shortcut_text8_2:"：开启静音 / 取消静音",contentMenu_shortcut_text9_2:"：重播",contentMenu_shortcut_text10_2:"：退出全屏",infoPanelUnknown:"未知",infoPanelNetText:"网络类型：",infoPanelSpeedText:"加载速度：",infoPanelWaitingText:"缓冲时长：",infoPanelLostText:"丢帧率：",infoPanelProtocolText:"视频协议：",infoPanelCdnText:"CDN：",infoPanelSolutionText:"分辨率：",infoPanelVideoSizeText:"视图尺寸：",infoPanelVoiceText:"音量大小：",infoPanelEngineText:"播放引擎：",infoPanelVideoTypeText:"资源类型：",infoPanelDRMText:"DRM类型：",infoPanelDebugText:"调试日志：",infoPanelDebugBtn:"点击下载",big_hotkey_playbackratet_text:"倍速播放中",loading_download_speed:"加载速度:",top_tip_like:"点赞",top_tip_cancel_like:"取消点赞",top_tip_collect:"收藏",top_tip_cancel_collect:"取消收藏",top_tip_size:"画面尺寸",def_vip:"VIP",def_free:"限免",def_sport:"体育会员",def_login:"登录",audiotrack_tip_switching:"正在切换到",audiotrack_tip_switchedsucc:"已成功切换到",audiotrack_tip_switchwaiting:"请稍候...",audiotrack_tip_video:"视频",audiotrack_tip_switchedfail:"切换失败,请检查网络并再次尝试",toast_tip_mutestartplay:"由于浏览器限制，请手动开启声音",mini_autoplay_loading:"即将播放",aiview_request:"识别中...",aiview_neterror:"服务器未知错误, 请稍后重试",aiview_zero:"哎呀, 什么都没识别到"}},function(e,t,n){"use strict";var r=n(7);t.a={error_code_title1:"喔喔，播放失敗啦~",error_code_desc1:"試試更穩定、流暢的愛奇藝客戶端",error_code_desc2:"檢測發現您可能在使用惡意插件，請檢查並解安裝後重試",error_code_desc6:"很抱歉，你訪問的視頻丟了",error_code_desc7:"該視頻目前還未通過審核",error_code_title9:"很抱歉，該視頻已被刪除，感謝您使用愛奇藝",error_code_title10:"很抱歉，由於版權問題該視頻已下線。感謝您使用愛奇藝",error_code_desc10:"你可以試試匯集全網視頻的  愛奇藝客戶端",error_code_desc11:"很抱歉，因爲版權限制，本節目暫無法觀看",error_code_title12:"很抱歉，由於平台限制原因，該視頻無法在網頁端播放。",error_code_desc12:"請使用愛奇藝客戶端觀看",error_code_title13:"由於版權限制，您所在的地區無法觀看該視頻",error_code_title15:"因版權限制，部分內容無法播放，可跳轉至iQIYI愛奇藝海外版",error_code_desc13:"更有多語言字幕，更多海外版權內容等你來看",error_code_desc14:"本視頻為作者的超級粉絲專享內容，請使用移動端愛奇藝App或隨刻App觀看",controls_tip_vrplay:"使用爱奇艺VR APP可获得更佳观影体验",error_code_title14:"應版權方要求本視頻為加密格式，此瀏覽器暫不支持播放。<br/>推薦使用最新版本的Chrome瀏覽器或使用客戶端進行觀看。"+(r.a.browser.FIREFOX?"<br/>如Firefox瀏覽器提示安裝播放組件請等待":""),error_code_desc21:"您沒有權限觀看此視頻",error_code_desc22:"您的帳號僅限2臺設備同時播放，請停止其他設備播放等待5分鍾或修改密碼",error_code_switch_flash:"播放出錯了，請點擊切換到原版Flash播放器",error_code_desc_http:"播放出錯了，請稍後刷新重試",error_code_title301:"很抱歉，當前視頻播放失敗，請刷新後再次嘗試。<br/>可點擊幫助反饋，上報播放問題，我們會盡快幫您解決~",error_code_audio_err:"很抱歉，您的系統音頻驅動可能出了問題，試試重新插拔音頻外設或重啟計算機。<br/>可點擊幫助反饋，上報播放問題~",error_code_vda_err:"硬件加速故障，試試在瀏覽器設置中關閉“硬件加速模式”，關閉後使用CPU解碼。<br/>可點擊幫助反饋，上報播放問題~",error_code_desc_ad:"喔喔...廣告無法正常播放了，開通VIP功能跳過廣告，或關閉屏蔽廣告功能",controls_tip_history:'您上次觀看至<i class="iqp-txt-selected">#time#</i> 處, 愛奇藝為您自動續播。',controls_tip_skipheader:"已經為您跳過片頭",controls_tip_skiptailer:"即將為您跳過片尾",controls_tip_zstip:"尊貴的星鑽VIP會員,您已使用觀影券觀看本片",controls_tip_cdtip:"尊貴的星鑽VIP會員,您已免費解鎖本劇超前點映",controls_tip_yytip:"尊貴的星鑽VIP會員,您可以免費觀看本劇",controls_tip_recharge_type1:'免費試看<i class="iqp-txt-selected">6</i>分鐘，觀看完整版請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">開通VIP會員</a>',controls_tip_recharge_type4:'免費試看<i class="iqp-txt-selected">6</i>分鐘，觀看完整版請立即購買，點擊 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">開通網球會員</a>',controls_tip_recharge_type2:'試看<i class="iqp-txt-selected">#previewTime#</i>分鐘，因版權限制，觀看完整版請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">購買本片</a>',controls_tip_recharge_type3:'試看<i class="iqp-txt-selected">#previewTime#</i>分鐘，因版權限制，觀看完整版請  <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket">用券觀看</a>',controls_tip_recharge_defaultype:'免費觀看前<i class="iqp-txt-selected">preview_time</i>分鐘，完整觀看請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">立即購買</a>',controls_tip_skipheadertailer:"跳過片頭片尾",controls_yes:"是",controls_no:"否",controls_tip_precache:"正在緩衝",controls_tip_switching:"正在切換到",controls_tip_switchedsucc:"已成功切換到",controls_tip_switchwaiting:"畫質，請稍候",controls_tip_switchedfail:"畫質切換失敗，請檢查網絡並再次嘗試",controls_tip_switchedpic:"畫質",controls_tip_playspeedguide:"在這裏可以調節播放倍速",controls_tip_speed_changed:'播放速度：<i class="iqp-txt-selected">XX</i>',controls_split_tip:' (長按方向鍵 "→" )',controls_tip_setting_normal:"正常",controls_subtitles_tip_switching:"正在切換到",controls_subtitles_tip_switchedsucc:"已成功切換到",controls_subtitles_tip_switchwaiting:"字幕，請稍候",controls_subtitles_tip_switchedfail:"字幕切換失敗，請檢查網絡並再次嘗試",controls_subtitles_tip_switchedpic:"字幕",controls_playlistbtn:"選集",controls_clickplay_hover:"點擊播放",controls_clickpause_hover:"點擊暫停",controls_replay_hover:"重新播放",controls_forward_hover:"下一集",controls_webfullscreen_hover:"網頁全屏",controls_exitwebfullscreen_hover:"退出網頁全屏",controls_fullscreen_hover:"全屏",controls_exitfullscreen_hover:"退出全屏",controls_download:"立即下載",controls_download_mobile:"立即體驗",controls_clientdownload_mobile:"使用愛奇藝客戶端，視頻播放更流暢~",controls_cycleplay:"循環播放",controls_select_player:"播放器選擇",controls_setting_recommend:"推薦使用  [ HTML5 ]",controls_setting_playratedesc:"倍速",controls_nextbtn:"下壹條視頻 ",definition_name_limit:"極速",definition_name_limit_vd:"240P",definition_name_standard:"流暢",definition_name_standard_vd:"360P",definition_name_high:"高清",definition_name_high_vd:"480P",definition_name_superhigh:"超清",definition_name_superhigh_vd:"720P",definition_name_720p:"超清",definition_name_720p_vd:"720P",definition_name_1080p:"蓝光",definition_name_1080p_vd:"1080P",definition_name_4k:"4k",definition_name_4k_vd:"4k",definition_name_1080P50:"蓝光",definition_name_1080P50_vd:"1080P50",definition_name_ad:"廣告",definition_name_auto:"智能(#definition#)",definition_name_pca4k:"客戶端 4K",error_errorcode_text:"錯誤代碼",error_switchplayer:"切換播放器",error_tryrefresh:"立即刷新",error_jump:"立即跳轉",error_download:"使用客戶端觀看",error_help:"幫助反饋",error_private_video:"該視頻為私密視頻，密碼輸入正確後才可播放哦",error_private_selfsee:"該視頻為私密視頻，僅發布者可見哦~",error_private_pwderror:"密碼輸入不正確，請輸入正確密碼",error_confirm:"確認",error_input_pwd:"請輸入密碼",loading_text:"正在全力加載，請稍候…",score_task_guide:"再看10分鐘即可領取積分噢~",score_task_login:"觀看任務完成，送積分兌超值好禮",score_task_success:"恭喜完成觀看視頻任務！<br>送你#score#積分獎勵",score_task_btn_info1:"查看詳情",score_task_btn_info2:"我的積分",score_task_btn_close1:"不再提示",score_task_btn_close2:"不再提示",score_task_btn_login:"立即領取",ban_btn:"修改密碼",ban_tip_001:"賬號最多同時在2臺設備播放，終止其餘設備播放或修改密碼恢復",ban_tip_002:"檢測到賬號被多人共享，會員權益已暫停，請修改密碼",ban_tip_004:"檢測到您的帳號被嚴重分享，已永久封禁",error_maintitle:"Flash插件異常",error_fltitle:"下載官方Flash插件",error_h5title:"正在切換HTML5播放模式",error_fltip:"已安裝仍無法觀看",subtitles_switch:"字幕",subtitles_setting:"字幕設置",subtitles_back:"返回",subtitles_fontsize:"字號",subtitles_alpha:"透明度",subtitles_language:"語言",picture_in_picture:"畫中畫",contentMenu_bug:"問題反饋",contentMenu_link:"復制鏈接",contentMenu_shortcut:"快捷鍵說明",contentMenu_console:"播放狀態查詢",contentMenu_shortcut_text:"播放快捷鍵",contentMenu_shortcut_text1_1:"空格",contentMenu_shortcut_text1_2:"：播放 / 暫停",contentMenu_shortcut_text2_2:"：音量提高5%",contentMenu_shortcut_text2_4:"：音量降低5%",contentMenu_shortcut_text3_1:"：快退5秒",contentMenu_shortcut_text4_1:"：單次快進5秒",contentMenu_shortcut_text4_2:"長按倍速播放",contentMenu_shortcut_text5_2:"：播放上壹集",contentMenu_shortcut_text5_4:"：播放下壹集",contentMenu_shortcut_text7_2:"：進入全屏 / 退出全屏",contentMenu_shortcut_text8_2:"：開啟靜音 / 取消靜音",contentMenu_shortcut_text9_2:"：重播",contentMenu_shortcut_text10_2:"：退出全屏",infoPanelUnknown:"未知",infoPanelNetText:"網絡類型：",infoPanelSpeedText:"加載速度：",infoPanelWaitingText:"緩衝時長：",infoPanelLostText:"丟幀率：",infoPanelProtocolText:"視頻協議：",infoPanelCdnText:"CDN：",infoPanelSolutionText:"分辨率：",infoPanelVideoSizeText:"視圖尺寸：",infoPanelVoiceText:"音量大小：",infoPanelEngineText:"播放引擎：",infoPanelVideoTypeText:"資源類型：",infoPanelDRMText:"DRM類型：",infoPanelDebugText:"調試日誌：",infoPanelDebugBtn:"點擊下載",big_hotkey_playbackratet_text:"進行中",loading_download_speed:"加載速度:",top_tip_like:"點贊",top_tip_cancel_like:"取消點贊",top_tip_collect:"收藏",top_tip_cancel_collect:"取消收藏",top_tip_size:"畫面尺寸",def_vip:"會員",def_free:"限免",def_login:"登錄",audiotrack_tip_switching:"正在切換到",audiotrack_tip_switchedsucc:"已成功切換到",audiotrack_tip_switchwaiting:"請稍候...",audiotrack_tip_video:"視頻",audiotrack_tip_switchedfail:"切換失敗，請檢查網絡並再次嘗試",toast_tip_mutestartplay:"由於瀏覽器限制，請手動開啟聲音",mini_autoplay_loading:"即將播放",aiview_request:"識別中...",aiview_neterror:"訪問用戶過多, 請稍後重試",aiview_zero:"哎呀什麼都沒識別到"}},,,,,,,,function(e,t,n){"use strict";n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(39),c=n.n(s),u=n(5),d=n.n(u),l=n(6),f=n.n(l),h=n(1),p=n.n(h),_=(n(10),n(19),n(25),n(45),n(116),n(0)),v=n(50),g=[{name:"ID_SHOW_CONTROL_BAR",status:!0},{name:"ID_SHOW_CONTROL_BAR_SEEK_BAR",status:!0},{name:"ID_SHOW_CONTROL_BAR_SKIP_TIP",status:!1},{name:"ID_SHOW_CONTROL_BAR_VIEW_TIP",status:!1},{name:"ID_SHOW_CONTROL_BAR_PREVIEW",status:!1},{name:"ID_SHOW_CONTROL_BAR_FF",status:!1},{name:"ID_SHOW_CONTROL_BAR_LOOP_PLAY_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_NEXT_BTN",status:!0},{name:"ID_SHOW_CONTROL_BAR_TIME",status:!0},{name:"ID_SHOW_CONTROL_BAR_VOLUME",status:!0},{name:"ID_SHOW_CONTROL_BAR_FULLSCREEN",status:!0},{name:"ID_SHOW_CONTROL_BAR_SETTING",status:!1},{name:"ID_SHOW_CONTROL_BAR_CAPTURE",status:!1},{name:"ID_SHOW_CONTROL_BAR_CAPTION",status:!1},{name:"ID_SHOW_CONTROL_BAR_TRACK",status:!1},{name:"ID_SHOW_DOCK",status:!1},{name:"ID_SHOW_DOCK_SHARE",status:!1},{name:"ID_SHOW_DOCK_LIGHT",status:!1},{name:"ID_SHOW_DOCK_DEFINITION",status:!1},{name:"ID_SHOW_DOCK_DETAILS",status:!1},{name:"ID_SHOW_DOCK_OFFLINE_WATCH",status:!1},{name:"ID_SHOW_WIDESCREEN_BTN",status:!1},{name:"ID_SHOW_LOGO",status:!1},{name:"ID_SHOW_RECOMMEND",status:!1},{name:"ID_ENABLE_AD",status:!1},{name:"ID_SHOW_TIPS",status:!1},{name:"ID_SHOW_MAX_MIN_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_EXPAND_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_TVLIST_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_3D_BTN",status:!1},{name:"ID_SKIP_MIDDLE_AD",status:!1},{name:"ID_SHOW_TWO_DIMENSION_CODE_BTN",status:!1},{name:"ID_SHOW_GREEN_TAIL_BTN",status:!1},{name:"ID_SHOW_ADD_TO_TABLE_BTN",status:!1},{name:"ID_SHOW_COLLECT_BTN",status:!1},{name:"ID_SHOW_CONTROL_BAR_ALWAYS",status:!1},{name:"ID_HIDE_VIDEO_LINK",status:!1},{name:"ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN",status:!1},{name:"ID_HIDE_SCORE_TASK",status:!1},{name:"ID_SHOW_CONTENT_MENU",status:!0},{name:"ID_SHOW_CONTENT_MENU_SHORTCUT",status:!0},{name:"ID_HIDE_HEAT_MAP",status:!1},{name:"ID_SHOW_SCREENSHOT",status:!1},{name:"ID_HIDE_PLAYBACKRATE",status:!1},{name:"ID_HIDE_PIPBTN",status:!1},{name:"ID_THEATER_MODE",status:!1},{name:"ID_SHOW_META_PANEL",status:!1},{name:"ID_SHOW_CLIENT_APP",status:!1},{name:"ID_SHOW_ACTIVITY",status:!1},{name:"ID_HIDE_TOP",status:!1}],y=n(4),m=n(42),b=n(8),k=n(14),x=n(7),T=(n(30),n(17),n(309)),S=n.n(T),P=n(310),w=n.n(P),I=n(311),A=n.n(I),E=n(312),D=n.n(E),q=n(313),O=n.n(q),R=n(18);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var C,M=function(e){d()(n,e);var t=L(n);function n(e,r,a){return i()(this,n),t.call(this,"container",e,r,a)}return o()(n,null,[{key:"css",value:function(){return S.a.toString()}},{key:"html",value:function(){return w.a.toString()}},{key:"padHtml",value:function(){return A.a.toString()}},{key:"mobileHtml",value:function(){return D.a.toString()}},{key:"miniHtml",value:function(e){var t="";return e&&(t='style="object-fit: cover; transform: scale(1.32);"'),O.a.toString().replace("data-style",t)}}]),n}(R.b),N=(n(38),n(184),n(314)),B=n.n(N),F=n(315),U=n.n(F),j=n(316),V=n.n(j),H=n(317),W=n.n(H),z=n(318),Y=n.n(z),G=n(319),Q=n.n(G),K=n(320),$=n.n(K),Z=n(321),X=n.n(Z);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function ee(e,t){(function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0})(e,t)||(e.className+=(e.className?" ":"")+t)}function te(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}var ne=function(e){d()(n,e);var t=J(n);function n(e,r,a){var o;return i()(this,n),o=t.call(this,"loading",e,r,a),C=e.i18nLang,o.loadingType=o.plugin.querySelector('[data-player-hook="loadingType"]'),o.loading=o.plugin.querySelector('[data-player-hook="videolayerLoading"]'),o._speedTimer=-1,o.showBeginLoadingType="",o.isFadeOut=!1,o.init(),o}return o()(n,[{key:"init",value:function(){var e=this,t=this,n=this.view,r=this.engine,i=n.fullscreen,a=n.webfullscreen,o=n.stagesize;x.a.os.ios||x.a.os.android||r.autoplay||r.isMini?this.showBeginLoading():this.hideBeginLoading();var s=function(){t.resize()};o&&o.on(s),i&&i.on("change",s),a&&a.on("change",s),this.plugin.querySelector('[data-player-hook="videoLoadingText"]')&&(this.plugin.querySelector('[data-player-hook="videoLoadingText"]').innerHTML=C.loading_text),r.on(_.a.NTF_StatusChanged,(function(e){switch(e.state){case _.a.Status_StartPlay:case _.a.Status_Playing:case _.a.Status_AdPlaying:case _.a.Status_AdStartPlay:case _.a.Status_End_Play:"image"==t.showBeginLoadingType?(t.isFadeOut=!0,t.fadeOut((function(){t.hideLoading(),t.hideBeginLoading(),t.plugin.style.opacity=1,t.beginloading.querySelector(".loadingImage").removeAttribute("src"),t.isFadeOut=!1})),t.showBeginLoadingType=""):t.isFadeOut||(t.hideLoading(),t.hideBeginLoading());break;case _.a.Status_AdWaiting:case _.a.Status_Waiting:(x.a.os.ios||x.a.os.android)&&r.getCurrenttime()<1&&t.showLoading();break;case _.a.Status_Loadstart:x.a.os.ios||x.a.os.android||t.showLoading();break;case _.a.Status_Play:(x.a.os.ios||x.a.os.android)&&r.getCurrenttime()<1&&t.showLoading();break;case _.a.Status_PlayError:}}),{highPriority:!0}).on(_.a.NTF_AD_SingleStart,(function(){t.hideBeginLoading()})).on(_.a.NTF_VideoChange,(function(){t.showBeginLoading()})).on(_.a.NTF_DefinitionSwitched,(function(){t.hideBeginLoading()})).on(_.a.NTF_NeedUserGesture4Playback,(function(){t.hideBeginLoading()})),n.on(y.a.NTF_PAYLAYER_DATA,(function(t){switch(t.status){case 1:ee(e.plugin,"dn");break;case 0:te(e.plugin,"dn")}})).on(y.a.NTF_FeedBack_Show,(function(){ee(e.plugin,"iqp-dn1")})).on(y.a.NTF_FeedBack_Hide,(function(){te(e.plugin,"iqp-dn1")}))}},{key:"showBeginLoading",value:function(){var e=this;if(!(this.engine.isInteractVideo&&!this.engine.isIVMain)){var t=this.view.isTw?"_tw":"",n=this.view.getPlayIndex(),r=this.view.params,i=this.engine.movieinfo,a=i.tvid?i.imageLoader:r.imageLoader,o=!1,s=!1,c=!1;if(!r.hideBeginLoading){this.showBeginLoadingType="",this.beginloading&&(this.beginloading.style.display="none"),n>-1?(i=this.view.videoList[n]).isMember?o=!0:i.isQiyiProduced?s=!0:i.isExclusive&&(c=!0):"true"==r.isMember?o=!0:1==r.qiyiProduced?s=!0:1==r.exclusive&&(c=!0),this.beginloading=o?this.plugin.querySelector('[data-player-hook="videoLoadingVip'+t+'"]'):s?this.plugin.querySelector('[data-player-hook="videoLoadingQiyiProduced'+t+'"]'):c?this.plugin.querySelector('[data-player-hook="videoLoadingExclusive'+t+'"]'):this.plugin.querySelector('[data-player-hook="videoLoadingNormal'+t+'"]'),a&&this.engine.getEngineType()===_.a.ENGINE_TYPE&&!this.engine.isMini&&(this.beginloading=this.plugin.querySelector('[data-player-hook="videoLoadingNormal_image"]'),this.beginloading.querySelector(".loadingImage").setAttribute("src",a),this.showBeginLoadingType="image");var u=this.beginloading.querySelector('[data-player-hook="lazygif"]');if(u){var d=u.getAttribute("lazy_src");d&&(u.setAttribute("src",d),u.removeAttribute("lazy_src"))}this.clockDownLoad(),this._begineShow=!0,this.show(),this.beginloading.style.display="block",this.engine.once(_.a.NTF_TimeUpdate,(function(){e.hideLoading(),e.hideBeginLoading()}))}}}},{key:"hideBeginLoading",value:function(){var e;if(this._begineShow=!1,this.hide(),clearInterval(this._speedTimer),this.beginloading&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=""),this.beginloading.style.display="none",e=x.a.os.ios||x.a.os.android?this.plugin.querySelector(".iqp-logo-loading"):this.plugin.querySelector(".videoLogo_loading")))for(var t=0;t<e.length;t++)e[t].style.display="none"}},{key:"showLoading",value:function(){!0!==this._begineShow&&(this.beginloading&&(this.beginloading.style.display="none",this.clockDownLoad()),this.resize(),this.show(),this.loading.style.display="block")}},{key:"clockDownLoad",value:function(){var e=this;clearInterval(this._speedTimer),this.updateDownloadSpeed(),this._speedTimer=setInterval((function(){e.updateDownloadSpeed()}),1e3)}},{key:"hideLoading",value:function(){clearInterval(this._speedTimer),this.hide(),this.loading.style.display="none"}},{key:"resize",value:function(){this.view.getWrapperArea().width>920?ee(this.plugin,"iqp-player_w920"):te(this.plugin,"iqp-player_w920")}},{key:"fadeOut",value:function(e){var t=this,n=t.plugin,r=1e3;n.style.display="",n.style.opacity=r/1e3;!function i(){r-=80,n.style.opacity>=0?(n.style.opacity=r/1e3,window.requestAnimationFrame?requestAnimationFrame(i):setTimeout(i,16)):e.call(t)}()}},{key:"updateDownloadSpeed",value:function(){var e=this.view.getDownloadSpeed();e&&this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=C.loading_download_speed+e)}}],[{key:"css",value:function(){return Q.a.toString()}},{key:"html",value:function(){return Y.a.toString()}},{key:"padCss",value:function(){return W.a.toString()+U.a.toString()}},{key:"padHtml",value:function(){return X.a.toString()}},{key:"mobileCss",value:function(){return V.a.toString()+B.a.toString()}},{key:"mobileHtml",value:function(){return $.a.toString()}}]),n}(R.b),re=n(322),ie=n.n(re),ae=n(230),oe=n.n(ae),se=n(323),ce=n.n(se),ue=n(324),de=n.n(ue);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var fe=function(e){d()(n,e);var t=le(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this,"loading",e,r,a)).loading=o.plugin.querySelector('[data-player-hook="videolayerLoading"]'),o.init(),o}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.stagesize;this.showBeginLoading();r&&r.on((function(){e.resize()})),n.on(_.a.NTF_StatusChanged,(function(t){switch(t.state){case _.a.Status_StartPlay:case _.a.Status_Playing:case _.a.Status_AdPlaying:case _.a.Status_AdStartPlay:case _.a.Status_End_Play:e.hide(),e.toggleBegin("none");break;case _.a.Status_Loadstart:e.showLoading()}})),n.on(_.a.NTF_VideoChange,(function(){e.showBeginLoading()})),n.on(_.a.NTF_NeedUserGesture4Playback,(function(){e.hide()}))}},{key:"showBeginLoading",value:function(){var e=this.view,t=this.engine.params.imageLoader||"",n=this.engine.movieinfo;n&&n.imageLoader&&(t=n.imageLoader),""!==t?(e.loadHtml(ce.a.toString(),e.pluginContainer),this.beginloading=document.querySelector('[data-player-hook="loadingposter"]'),this.beginloading.style.backgroundImage='url("'.concat(t,'")'),this.toggleBegin("block"),this.loading.style.display="none"):this.showLoading()}},{key:"showLoading",value:function(){this.toggleBegin("none"),this.resize(),this.loading.style.display="block",this.show()}},{key:"toggleBegin",value:function(e){this.beginloading&&(this.beginloading.style.display=e)}},{key:"resize",value:function(){var e,t;this.view.getWrapperArea().width>920?function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}(e=this.plugin,t="iqp-player_w920")||(e.className+=(e.className?" ":"")+t):function(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(this.plugin,"iqp-player_w920")}}],[{key:"css",value:function(){return ie.a.toString()+oe.a.toString()}},{key:"html",value:function(){return de.a.toString()}}]),n}(R.b),he=(n(55),n(325)),pe=n.n(he),_e=n(326),ve=n.n(_e);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ye=new k.a("mobiletwblock"),me=function(e){d()(n,e);var t=ge(n);function n(e,r,a){var o;i()(this,n),o=t.call(this,"mobiletwblock",e,r,a);var s=e.pingback;o.$plugin=Object(b.b)(o.plugin),o.previewstart=!0,o.$download=o.$plugin.find('[data-player-hook="mobiledownload"]'),o.$watch=o.$plugin.find('[data-player-hook="mobiletwwatch"]'),o.$twinfo=o.$plugin.find('[data-player-hook="twinfo"]'),o.$preview=o.$plugin.find('[data-player-hook="twpreview"]'),o.$replay=o.$plugin.find('[data-player-hook="twreplay"]'),o.init();var c=function(){var e,t=o.engine.getTwBlockType();"TwBlockA"==t?(o.$plugin.show(),o.previewstart?(e="preview_start",o.$replay.hide(),o.$preview.show()):(e="preview_end",o.$preview.hide(),o.$replay.show()),s.sendTwBlockShow("player",e)):"TwBlockB"==t&&(o.$twinfo.html("一鍵下載升級版App繼續體驗更多影片"),o.$download.html("立即下載"),o.$preview.html("忍心拒絕"),o.$plugin.show(),o.$preview.show(),o.$replay.hide(),s.sendTwBlockShow("player","player_fullversion"))};o.engine.on(_.a.NTF_TW_BLOCK,(function(){c(),o.engine.pause()})),o.engine.on(_.a.NTF_VRSReady,(function(){var e=o.engine.getTwBlockType();ye.log("mobiletwblock, twBlockType: "+e),o.previewstart=!0,"TwBlockA"==e&&c()})),o.engine.on(_.a.NTF_PREVIEW_END,(function(){o.previewstart=!1,c()}));var u=o.engine.getTwBlockType();return ye.log("mobiletwblock, twBlockType: "+u),c(),o}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.pingback,i=x.a.browser.isTouch?"touchend":"click";n.on(_.a.NTF_StatusChanged,(function(t){switch(t.state){case _.a.Status_Playing:case _.a.Status_AdPlaying:case _.a.Status_PlayError:e.$plugin.hide()}})),this.$download.un(i).on(i,(function(t){if(t.preventDefault(),"TwBlockB"==e.engine.getTwBlockType())return e.view.callJsDoSomething("pullupapp"),void r.sendTwBlockClick("player","player_fullversion","download");var n=e.previewstart?"preview_start":"preview_end";e.view.callJsDoSomething("pullupapp",{af_adset:n}),r.sendTwBlockClick("player",n,"watchFull")})),this.$watch.un(i).on(i,(function(t){if(t.preventDefault(),"TwBlockB"==e.engine.getTwBlockType())return n.play(!0),void r.sendTwBlockClick("player","player_fullversion","skip");e.previewstart?(n.play(!0),r.sendTwBlockClick("player","preview_start","continuePreview")):(n.seek(0),r.sendTwBlockClick("player","preview_end","rePreview"))}))}}],[{key:"padCss",value:function(){return pe.a.toString()}},{key:"padHtml",value:function(){return ve.a.toString()}},{key:"mobileCss",value:function(){return this.padCss()}},{key:"mobileHtml",value:function(){return this.padHtml()}}]),n}(R.b),be=n(327),ke=n.n(be),xe=n(328),Te=n.n(xe);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Pe=function(e){d()(n,e);var t=Se(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this,"vippay",e,r,a)).$vippay=Object(b.b)(o.plugin),o.$playbtn=o.$vippay.find('[data-player-hook="playbtn"]'),o.$playtxt=o.$vippay.find('[data-player-hook="viptxt"]'),o.$playbtn.on("click",(function(e){o.$vippay.hide(),o.engine.playproxy.playFromVipPay()})),o.engine.on(_.a.NTF_Show_VIPPay,(function(e){1===e?o.$playtxt.html("尊贵的星钻VIP会员：<br>您已免费解锁本剧所有超前点播内容"):o.$playtxt.html("尊贵的星钻VIP会员：<br>您可以免费观看星钻剧场"),o.$vippay.show(),o.view.pingback.sendBlockPingback("diamondtip")})),o.engine.on(_.a.NTF_VideoChange,(function(){o.$vippay.hide()})),o}return o()(n,null,[{key:"css",value:function(){return ke.a.toString()}},{key:"html",value:function(){return Te.a.toString()}}]),n}(R.b);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ie=function(e){d()(n,e);var t=we(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"init",value:function(e){var t=this;this.enable(),this._elem=e,this.handler=function(){t.emit("change",t.isFullScreen()?"enter":"exit")},document.addEventListener("fullscreenchange",this.handler),document.addEventListener("mozfullscreenchange",this.handler),document.addEventListener("webkitfullscreenchange",this.handler),document.addEventListener("MSFullscreenChange",this.handler),e instanceof HTMLVideoElement&&(e.addEventListener("webkitendfullscreen",this.handler),e.addEventListener("fullscreenchange",this.handler))}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"exit",value:function(){var e=this._elem;if(e)if(this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.exitFullscreen)e.exitFullscreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(e.mozCancelFullScreen)e.mozCancelFullScreen();else if(e.msExitFullscreen)e.msExitFullscreen();else try{e.webkitExitFullscreen()}catch(t){}}},{key:"enter",value:function(){var e=this._elem;if(this._enable||e)if(this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else try{e.webkitEnterFullScreen()}catch(t){}}},{key:"toggle",value:function(){this.isFullScreen()?this.exit():this.enter()}},{key:"isFullScreen",value:function(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen)}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("fullscreenchange",this.handler),document.removeEventListener("mozfullscreenchange",this.handler),this._elem.removeEventListener("webkitfullscreenchange",this.handler),this._elem.removeEventListener("MSFullscreenChange",this.handler),this.handler=null}}]),n}(m.a),Ae=n(122),Ee=n(117),De=n.n(Ee),qe=n(15),Oe=n(28),Re=n(20),Le=n(26);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Me="1",Ne="10",Be="101";x.a.browser.iPad?(Me="2",Ne="20",Be="202"):(x.a.os.ios||x.a.os.android)&&(Me="2",Ne="20",Be="201");var Fe=function(e){d()(n,e);var t=Ce(n);function n(e){var r;return i()(this,n),(r=t.call(this))._core=e,r._pbisdm=1,r}return o()(n,[{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.user;i.isVip((function(a){var o,s=r.getMovieInfo(),c={bstp:6,block:"B",pf:Me,p:Ne,p1:Be,c1:s.cid||"",r:s.tvid||"",u:Le.a.getFluid()||"",u2:Le.a.getJsuid()||"",pu:i.getUid(),pru:qe.a.get("P00PRU")||"",v:Ae.a,ra:e.ra||r.getCurrentVD(),nu:Le.a.getIsNewUser()||"",ve:Le.a.getEid(),ce:Le.a.getWeid(),hu:a?1:-1,ht:s.isVIP?1:0,mod:r.local,plyrtp:0,coop:"",isdm:n._pbisdm,videotp:s.is3D,tmplt:r.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse"};try{Object(Re.a)(c,{as:De.a.cmd5x(c.r+""+c.p1+c.u+c.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(u){}o=r.isFullScreen?"4":r.isWebFullScreen?"7":"3",Object(Re.a)(c,{wint:o}),c=Object(Re.a)(c,e,t),Oe.a.beacon(c,"//msg.qy.net/b")}))}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendClickTitlePingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_title",t:20},!0)}},{key:"sendClickVideoPingback",value:function(){this._core.isSimple||this._send({block:"CD",rseat:"908261_select_player_image",t:20},!0)}},{key:"sendClickPlayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_play",t:20},!0)}},{key:"sendClickPauseBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_pause",t:20},!0)}},{key:"sendClickReplayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_replay",t:20},!0)}},{key:"sendClickPlayNextBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_next",t:20},!0)}},{key:"sendClickPlayCancelBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_cancel",t:20},!0)}},{key:"sendVoiceOnPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundon",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundon",e.block="K"),this._send(e,!0)}},{key:"sendVoiceOffPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundoff",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundoff",e.block="K"),this._send(e,!0)}},{key:"sendVoiceChangePingback",value:function(e){this._send({block:"CD",rseat:"908261_select_player_sound"+e,t:20},!0)}}]),n}(m.a),Ue=function(){function e(t){i()(this,e),this.elem=t,this.mutualList={},this.id=1}return o()(e,[{key:"register",value:function(e){var t=e.type,n=e.callback;if(!t||!n||"function"!=typeof n)return null;var r=++this.id;return this.mutualList[t]=this.mutualList[t]||{},this.mutualList[t][r]={enable:!0,callback:n},r}},{key:"unregister",value:function(e){var t=!1;if(!e)return t;for(var n in this.mutualList)if(this.mutualList[n][e]){delete this.mutualList[n][e],t=!0;break}return t}},{key:"enable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!0;break}}},{key:"disable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!1;break}}},{key:"enableType",value:function(e){if(e){var t=this.mutualList[e];for(var n in t)t[n].enable=!0}}},{key:"disableType",value:function(e){if(e){var t=this.mutualList[e];for(var n in t)t[n].enable=!1}}},{key:"fire",value:function(e,t){if(e)for(var n in this.mutualList){if(e===n){this._fire(-1,this.mutualList[n],t);break}if(this.mutualList[n][e]){this._fire(e,this.mutualList[n],t);break}}}},{key:"_fire",value:function(e,t,n){for(var r in t)r!==e&&t[r].enable&&t[r].callback(n)}}]),e}();function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ve="1",He="10",We="101";x.a.browser.iPad?(Ve="2",He="20",We="202"):(x.a.os.ios||x.a.os.android)&&(Ve="2",He="20",We="201");var ze=function(e){d()(n,e);var t=je(n);function n(e){var r;return i()(this,n),(r=t.call(this))._core=e,r._pbIsDm=1,r}return o()(n,[{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.user,a=r.getCurrentVD(),o=r.getMovieInfo();i.isVip((function(s){var c=e.ra||a;c=51===c?59:c;var u,d={bstp:6,block:"B",pf:Ve,p:He,p1:We,aid:o.albumId||"",c1:o.cid||"",r:o.tvid||"",u:Le.a.getFluid()||"",u2:Le.a.getJsuid()||"",pu:i.getUid(),pru:qe.a.get("P00PRU")||"",v:Ae.a,ra:c,nu:Le.a.getIsNewUser()?1:0,ve:Le.a.getEid(),ce:Le.a.getWeid(),hu:s?1:-1,ht:o.isVIP?1:0,mod:r.local,plyrtp:0,coop:"",isdm:n._pbIsDm,videotp:o.is3D,tmplt:r.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse"};try{Object(Re.a)(d,{as:De.a.cmd5x(d.r+""+d.p1+d.u+d.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(l){}u=r.isFullScreen?"4":r.isWebFullScreen?"7":"3",Object(Re.a)(d,{wint:u}),r.params.abtest&&(d.abtest=r.params.abtest),d=Object(Re.a)(d,e,t),Oe.a.beacon(d,"//msg.qy.net/b")}))}},{key:"sendSeekPingback",value:function(e,t,n){var r={rseat:"ply_seek",from:e,to:t,t:20};this._core.getMovieInfo().isShowHeatMap&&(r.s2="lvjing"),n?(r.a="901111_pcwh5_keyboard",this._send(r,!0)):this._send(r)}},{key:"sendSwitchVDPingback",value:function(e){this._send({rseat:"ply_cc",tra:51===e?59:e,t:20,ra:this._core.getCurrentVD()})}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendBlkPingback",value:function(e){this._send(Object(Re.a)({t:21},e||{},!0),!0)}},{key:"sendBlockPingback",value:function(e){var t={block:e,t:21};this._core.getMovieInfo().isShowHeatMap&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendCttBlockPingback",value:function(e,t){var n={block:e,rpage:t,t:21};this._core.getMovieInfo().isShowHeatMap&&(n.s2="lvjing"),this._send(n,!0)}},{key:"sendCttUserActionPingback",value:function(e,t){this._send({rseat:e,rpage:t,t:20})}},{key:"sendIVUserActionPingback",value:function(e){var t=e.rseat,n=e.r,r=e.block,i=e.rpage,a=this._core.getMovieInfo().tvid,o=this._core.getMovieInfo().albumId,s=this._core.iv_state.uniqueId;this._send({rseat:t||"",block:r||"",t:20,r:n||"",aid:o||a,sqpid:a||"",iamvid:s||"",rpage:i||""},!0)}},{key:"sendIVBlockPingback",value:function(e){var t=e.r,n=e.block,r=e.rpage,i=this._core.getMovieInfo().tvid,a={block:n||"",t:21,r:t||"",aid:this._core.getMovieInfo().albumId||i,sqpid:i||"",iamvid:this._core.iv_state.uniqueId||"",rpage:r||""};this._send(a,!0)}},{key:"sendShowControlBarPingback",value:function(){var e={block:"80720_playerctrl",t:21};this._core.getMovieInfo().isShowHeatMap&&(e.s2="lvjing"),this._send(e,!0)}},{key:"sendSeekBarHoverPingback",value:function(e){var t={block:"80720_playerctrl_seekbar",t:21};e&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendShowHeatMapPingback",value:function(){this._send({block:"80720_playerctrl_lvjing",t:21,s2:"lvjing"},!0)}},{key:"showScoreTaskGuidePanel",value:function(){this._send({block:"80720_scorepannel_20m",t:21},!0)}},{key:"closeScoreTaskGuidePanel",value:function(){this._send({rseat:"80720_scorepannel_20mclose",t:20},!0)}},{key:"clickScoreTaskLoginPanel",value:function(){this._send({rseat:"80720_player_login",t:20},!0)}},{key:"showScoreTaskLoginPanel",value:function(){this._send({block:"80720_scorepannel_30mlogin",t:21},!0)}},{key:"showScoreTaskSuccessPanel",value:function(){this._send({rseat:"80720_scorepannel_30msuccess",t:20},!0)}},{key:"hoverVideoListButton",value:function(){this._send({block:"80720_playerctrl_selection",t:21},!0)}},{key:"clickVideoListButton",value:function(){this._send({block:"B",rseat:"80720_playerctrl_selection",t:20},!0)}},{key:"clickVideoListItemTitle",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickVideoListItemImage",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickSubtitlesSwitch",value:function(e){this._send({t:20,rseat:"80720_playerctrl_menu_subtitleswitch"+e},!0)}},{key:"clickSubtitlesSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle"},!0)}},{key:"clickSubtitlesFontsizeSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size"},!0)}},{key:"clickSubtitlesAlphaSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp"},!0)}},{key:"clickSubtitlesLanguageSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang"},!0)}},{key:"changeSubtitlesLanguage",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang_change"},!0)}},{key:"showSubtitlesPanel1",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel1"},!0)}},{key:"showSubtitlesPanel2",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel2"},!0)}},{key:"showContentMenu",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel"},!0)}},{key:"clickCtxMenuBugBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_feedback"},!0)}},{key:"clickCtxMenuLinkBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_linkcopy"},!0)}},{key:"clickCtxMenuShortcutBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_keyboard"},!0)}},{key:"clickCtxMenuConsoleBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_debugger"},!0)}},{key:"clickShowInfoPanelBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_state"},!0)}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendPubBlock",value:function(e){var t={block:"action_bfq",t:21};Object(Re.a)(t,e),this._send(t,!0)}},{key:"sendPubClick",value:function(e){var t={block:"bfq",rseat:"80720_action_bfq",t:20};Object(Re.a)(t,e),this._send(t,!0)}},{key:"sendIVOSClick",value:function(e,t){this._send({t:20,rseat:e,biz:t},!0)}},{key:"sendIVOSShow",value:function(e,t){this._send({t:21,block:e,biz:t},!0)}},{key:"sendTwBlockShow",value:function(e,t){this._send({t:21,block:t,rpage:e},!0)}},{key:"sendTwBlockClick",value:function(e,t,n){this._send({t:20,rpage:e,block:t,rseat:n},!0)}},{key:"clickDrmTipOfLaunchClient",value:function(){this._send({t:20,rpage:"pcw_playpage",block:"client_playtips",rseat:"client_playtips_goclient"},!0)}}]),n}(m.a),Ye=(n(27),n(113));function Ge(){var e=0,t=-1;if(navigator.connection){t=navigator.connection.downlink;var n=(navigator.connection.effectiveType||"").toLowerCase(),r=(navigator.connection.type||"").toLowerCase();switch(n){case"4g":e=18;break;case"3g":e=17;break;case"2g":e=16;break;case"slow-2g":e=14}switch(r){case"cellular":e=15;break;case"wifi":e=1;break;case"ethernet":e=13;break;case"bluetooth":e=21;break;case"wimax":e=22}}return{ntwk:e,downlink:t}}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}"undefined"!=typeof ENV&&ENV,new k.a("PingbackV2");var Ke="1",$e="10",Ze="101";x.a.browser.iPad?(Ke="2",$e="20",Ze="202"):(x.a.os.ios||x.a.os.android)&&(Ke="2",$e="20",Ze="201");var Xe="",Je="";function et(){if(!Xe){var e=qe.a.get("QC007")||"";return e&&(Xe=e),Xe}return Xe}function tt(){if(!Je){var e=qe.a.get("QC008")||"";return e&&(Je=e),Je}return Je}var nt,rt,it=function(e){d()(n,e);var t=Qe(n);function n(e,r){var a;return i()(this,n),(a=t.call(this))._core=e,a._view=r,a}return o()(n,[{key:"_send",value:function(e,t){var n=this._core,r=this._view,i=n.user,a=r.fullscreen,o=n.getMovieInfo();i.isVip((function(r){var s={u:Le.a.getFluid()||"",pu:i.getUid(),p1:"".concat(Ke,"_").concat($e,"_").concat(Ze),dfp:Ye.a.get(),de:Le.a.getQtsid()||"",hu:r?1:-1,c1:o.cid||"",lrfr:et(),nu:Le.a.getIsNewUser()?1:0,purl:window.location.href,rfr:window.document.referrer,tmplt:n.getPageTmpltType(),vfm:qe.a.get("QP005")||"",bstp:6,ce:Le.a.getWeid(),ntwk:Ge().ntwk,rpage:a&&a.isFullScreen()?"full_ply":"pcw_playpage",sc1:o.cid||"",sqpid:o.tvid||"",sid:tt(),stime:(new Date).getTime(),rn:Math.random(),position:""};n.params.abtest&&(s.abtest=n.params.abtest),s=Object(Re.a)(s,e,t),Oe.a.beacon(s,"//msg.qy.net/act",{cache:!0})}))}},{key:"sendUserActionPingback",value:function(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=this._core,a=i.getMovieInfo(),o={block:e,rseat:t,t:20,r:a.tvid||"",aid:a.albumId||""};Object(Re.a)(o,r,!0),n?(o.a="901111_pcwh5_keyboard",this._send(o,!0)):this._send(o)}},{key:"sendBlockPingback",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this._core,r=n.getMovieInfo(),i={block:e,t:21};r.isShowHeatMap&&(i.s2="lvjing"),Object(Re.a)(i,t,!0),this._send(i,!0)}},{key:"sendSeekPingback",value:function(e,t,n,r){this.sendUserActionPingback("80720_playerctrl","80720_playerctrl_seek",n),n&&"boolean"==typeof r&&this.sendUserActionPingback("80720_playerctrl",r?"playforward_key":"playback_key",!0)}},{key:"sendSeekBarHoverPingback",value:function(e){var t={block:"80720_playerctrl_seekhover",t:21};e&&(t.s2="lvjing"),this._send(t,!0)}}]),n}(m.a),at=(n(140),n(84),document.attachEvent),ot=navigator.userAgent.match(/Trident/),st=(nt=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return nt(e)}),ct=(rt=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return rt(e)});function ut(e){var t=e.target||e.srcElement;t.__resizeRAF__&&ct(t.__resizeRAF__),t.__resizeRAF__=st((function(){var n=t.__resizeTrigger__;n&&n.__resizeListeners__.forEach((function(t){t.call(n,e)}))}))}function dt(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",ut)}var lt=function(){function e(t){i()(this,e),this.elem=t}return o()(e,[{key:"on",value:function(e){if(!this.elem.__resizeListeners__)if(this.elem.__resizeListeners__=[],at)this.elem.__resizeTrigger__=this.elem,this.elem.attachEvent("onresize",ut);else{var t=this.elem.__resizeTrigger__=document.createElement("object");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;"),t.__resizeElement__=this.elem,t.onload=dt,t.type="text/html",ot&&this.elem.appendChild(t),t.data="about:blank",ot||this.elem.appendChild(t)}this.elem.__resizeListeners__.push(e)}},{key:"off",value:function(e){this.elem.__resizeListeners__.splice(this.elem.__resizeListeners__.indexOf(e),1),this.elem.__resizeListeners__.length||(at?this.elem.detachEvent("onresize",ut):(this.elem.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",ut),this.elem.__resizeTrigger__=!this.elem.removeChild(this.elem.__resizeTrigger__)))}}]),e}();function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var ht="iqp-web-screen",pt=function(e){d()(n,e);var t=ft(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"__notice",value:function(){this.emit("change",this.isWebFullScreen()?"enter":"exit")}},{key:"__beforeNotice",value:function(){this.emit("beforechange",this.isWebFullScreen()?"enter":"exit")}},{key:"init",value:function(e){this.enable(),this._wrapper=e}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"initButton",value:function(e){var t=this;this._elem=e,this._enter=this._elem.querySelector('[data-player-hook="webfullenter"]'),this._exit=this._elem.querySelector('[data-player-hook="webfullexit"]'),this.handler=function(){t.toggle()},this._elem.addEventListener("click",this.handler)}},{key:"exit",value:function(){if(this.isWebFullScreen()){this.__beforeNotice(),this._elem&&(this._exit.style.display="none",this._enter.style.display="block");var e=this._wrapper.className;e=e.replace(ht," ").replace("iqp-full-screen50"," ").replace("iqp-full-screen75"," ").replace(/^\s+|\s+$/g,""),this._wrapper.className=e,document.body.style.overflow=this.__bodyOverflow,this.__notice()}}},{key:"enter",value:function(){this.isWebFullScreen()||(this.__bodyOverflow=document.body.style.overflow,this.__beforeNotice(),this._elem&&(this._exit.style.display="block",this._enter.style.display="none"),this._wrapper.className+=(this._wrapper.className?" ":"")+ht,document.body.style.overflow="hidden",this.__notice())}},{key:"toggle",value:function(){this.isWebFullScreen()?this.exit():this.enter()}},{key:"isWebFullScreen",value:function(){return!!this._wrapper&&" ".concat(this._wrapper.className," ").indexOf(" ".concat(ht," "))>=0}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("click",this.handler),this._enter=null,this._exit=null,this.handler=null}}]),n}(m.a);function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var vt=new k.a("Skin.Base"),gt=function(e){d()(n,e);var t=_t(n);function n(e,r){var a;i()(this,n),a=t.call(this);var o=r.engine,s=o.i18n,u=o.local;return a.params=e,a.pack=r,a.engine=o,a.plugins={},a.conflictPanel={},a.setting=null,a.diyskin=e.diyskin||{},a.statusMap={},a.bottomShow=!1,a.topSwitch=!0,a.bottomSwitch=!0,a.i18nLang=r.lang,a.isTradition=s.isTraditionalChinese(u),a.isTw=s.isTWLocale(u),a.loadedSkinCss={},a.zoomoutMode=!1,a.metaPanelCollapse=null,a.controlItems=[],a.rfTriggerNodes=[],a.initSwitch(e),a.getUserSet(),a.engine.isMini?(a.pingback=new Fe(o),a.pingbackV2=new it(o,c()(a))):(a.pingback=new ze(o),a.pingbackV2=new it(o,c()(a))),a}return o()(n,[{key:"videoList",get:function(){return this.subView?this.subView.videoList:[]}},{key:"initSwitch",value:function(e){var t=e.components,n=void 0===t?"feffffe6e":t,r=[];this.skinComponents=n;for(var i=0;i<n.length;++i){for(var a=n.substr(i,1),o=parseInt(a,16).toString(2),s=o.length,c=0;c<4-s;++c)o="0"+o;r+=o}for(var u,d=1;d<g.length+1;++d)(u=g[d-1]).status="1"==r.charAt(d),this.statusMap[u.name]=u}},{key:"getUserSet",value:function(){var e=this.statusMap,t={logo:!0,ctl:!0,ctl_show_always:!1,prog:!0,play:!0,next:!0,time:!0,rate:!0,def:!0,voice:!0,set:!0,list:!0,full:!0,webfull:!0,expandScreen:!1,vinv:!0,hotkeys:!0,score:!0,recommend:!0,ctxmenu:!0,ctxmenu_shortcut:!0,audiotrack:!0,screenshot:!0,aiview:!0,luban00:!0,svp:!0,follow:!0,interact:!0,ivos:!0,theaterMode:!0,metaPanel:!0,clientLauncher:!0,top:!0},n=this.engine.i18n.isTWLocale();t.ctl=t.ctl&&e.ID_SHOW_CONTROL_BAR.status,t.ctl_show_always=e.ID_SHOW_CONTROL_BAR_ALWAYS.status,t.prog=t.prog&&e.ID_SHOW_CONTROL_BAR_SEEK_BAR.status,t.time=t.time&&e.ID_SHOW_CONTROL_BAR_TIME.status,t.next=t.next&&e.ID_SHOW_CONTROL_BAR_NEXT_BTN.status,t.def=t.def&&e.ID_SHOW_DOCK_DEFINITION.status,t.voice=t.voice&&e.ID_SHOW_CONTROL_BAR_VOLUME.status,t.set=t.set&&e.ID_SHOW_CONTROL_BAR_SETTING.status,t.rate=t.rate&&(e.ID_SHOW_CONTROL_BAR_SETTING.status||this.params.feedMode)&&!e.ID_HIDE_PLAYBACKRATE.status,t.webfull=t.webfull&&!e.ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN.status,t.full=t.full&&e.ID_SHOW_CONTROL_BAR_FULLSCREEN.status,t.list=t.full&&t.list&&e.ID_SHOW_CONTROL_BAR_TVLIST_BTN.status&&!n,t.score=t.score&&!e.ID_HIDE_SCORE_TASK.status&&!n,t.recommend=t.recommend&&e.ID_SHOW_RECOMMEND.status&&!n,t.ctxmenu=e.ID_SHOW_CONTENT_MENU.status,t.ctxmenu_shortcut=e.ID_SHOW_CONTENT_MENU_SHORTCUT.status,t.vinv=t.vinv&&!e.ID_HIDE_PIPBTN.status,t.audiotrack=t.audiotrack&&this.engine.audioEnabled,t.screenshot=t.screenshot&&e.ID_SHOW_SCREENSHOT.status&&!n,t.metaPanel=t.metaPanel&&e.ID_SHOW_META_PANEL.status&&!n,t.theaterMode=t.theaterMode&&e.ID_THEATER_MODE.status&&!n,t.clientLauncher=t.clientLauncher&&e.ID_SHOW_CLIENT_APP.status&&!n,t.top=t.top&&!e.ID_HIDE_TOP.status&&!n,"undefined"!=typeof this.params.isExpandScreen&&(t.expandScreen=this.params.isExpandScreen),"undefined"!=typeof this.params.isSupportedHotKey&&(t.hotkeys=this.params.isSupportedHotKey),"undefined"!=typeof this.params.isSupportedShot&&(t.screenshot=this.params.isSupportedShot),this.params.logo!==undefined&&0==this.params.logo&&(t.logo=!1),t.aiview=t.aiview&&!n,t.luban00=t.luban00&&!n,t.svp=t.svp&&!n,t.follow=t.follow&&!n,t.interact=t.interact&&!n,t.ivos=t.full&&t.ivos&&!n&&!this.engine.isSimple,this.setting=t,this.emit("viewsetdone")}},{key:"getCss",value:function(){if(this.engine.getEngineType()===_.a.HTTP_ENGINE){var e="";return this.isTw&&(e=me.padCss()),x.a.browser.iPad||x.a.os.androidTablet?{key:"BASE_HTTP_TABLET",value:M.padCss()+ne.padCss()+e}:{key:"BASE_HTTP_OTHER",value:M.mobileCss()+ne.mobileCss()+e}}return this.engine.isMini?{key:"BASE_DATA_MINI",value:M.css()+fe.css()}:{key:"BASE_DATA_OTHER",value:M.css()+ne.css()+Pe.css()}}},{key:"init",value:function(){var e=this.params,t=this.engine,n=t.getEngineType()===_.a.HTTP_ENGINE,r=e.parentId,i=document.getElementById(r);this.playerId=r,this.parent=i,this.loadCss(this.getCss()),t.getEngineType()===_.a.HTTP_ENGINE?x.a.browser.iPad||x.a.os.androidTablet?this.loadHtml(M.padHtml(),i):this.loadHtml(M.mobileHtml(),i):t.isMini?this.loadHtml(M.miniHtml("banner"==e.skinType),i):this.loadHtml(M.html(),i),this.video=i.querySelector("video"),t.isSimple||n?this.wrapper=this.outlayer=i.querySelector('[data-player-hook="container"]'):(this.wrapper=i.querySelector('[data-player-hook="container"]'),this.outlayer=i.querySelector('[data-player-hook="outlayer"]'),this.innerlayer=i.querySelector('[data-player-hook="innerlayer"]'),this.videolayer=i.querySelector('[data-player-hook="videolayer"]'),this.videoInnerlayer=i.querySelector('[data-player-hook="videoinnerlayer"]'),this.ivoslayer=i.querySelector('[data-player-hook="ivoslayer"]'),this.$videolayer=Object(b.b)(this.videolayer),this.$videoInnerlayer=Object(b.b)(this.videoInnerlayer)),this.$container=Object(b.b)(this.wrapper),this.$outlayer=Object(b.b)(this.outlayer),this.pluginContainer=i.querySelector('[data-player-hook="plgcontainer"]'),this.subPluginContainer=i.querySelector('[data-player-hook="sub-plgcontainer"]'),this.$pluginContainer=Object(b.b)(this.pluginContainer),this.pageContainer=this.pluginContainer.querySelector('[data-player-hook="pageContainer"]'),this.pageContainer&&this.pageContainer.setAttribute("id","".concat(this.playerId,"PageContainer")),this.adContainer=i.querySelector('[data-cupid="container"]'),n?x.a.browser.iPad||x.a.os.androidTablet?this.loadHtml(ne.padHtml(),this.outlayer):this.loadHtml(ne.mobileHtml(),this.outlayer):t.isMini?this.loadHtml(fe.html(),this.outlayer):this.loadHtml(ne.html(),this.outlayer),n||t.isMini||(this.loadHtml(Pe.html(),this.outlayer),this.addPlugin(new Pe(this,this.outlayer))),this.isTw&&n&&(this.loadHtml(me.padHtml(),this.outlayer),this.addPlugin(new me(this,this.outlayer))),this.addPlugin(new M(this,i)),t.isMini?this.addPlugin(new fe(this,this.outlayer)):this.addPlugin(new ne(this,this.outlayer)),this.webfullscreen=new pt,this.webfullscreen.init(this.outlayer),this.setting.full&&(this.fullscreen=new Ie,t.getEngineType()===_.a.HTTP_ENGINE?this.fullscreen.init(this.video):this.fullscreen.init(this.wrapper)),this.addVideoEvent(),t.init(this.video)}},{key:"addVideoEvent",value:function(){var e,t=this,n=this,r=n.engine,i=n.pingback,a=n.pingbackV2,o=n.fullscreen,s=n.webfullscreen,c=r.isMini,u=0,d=function(){(o&&o.isFullScreen()||s&&s.isWebFullScreen()||r.isWebFullScreen)&&t.outlayer.offsetWidth>=1366&&t.outlayer.offsetHeight>=580?t.outlayer.classList.add(v.a):t.outlayer.classList.remove(v.a),t.emit(y.a.NTF_StageSizeChange)};this.clickEvent=function(){if(!r.isAd()&&!r.isPatch()&&!r.isInteracting){var t=n.plugins.ctxmenu;if(t&&(t.isShow||t.isShowPanel))return;1===++u&&(clearTimeout(e),e=setTimeout((function(){var e=o&&o.isFullScreen(),t=s&&s.isWebFullScreen();c?(i.sendClickVideoPingback(),n.callJsDoSomething("miniPlayerVideoClick",{currentTime:r.getCurrenttime(),isMini:!0})):n.playlistShow&&(e||t)?n.emit(y.a.NTF_HIDE_VIDEOLIST):n.rightFloaterShow?n.emit(y.a.NTF_RIGHTFLOATER_DATA,{action:"close"}):!1===n.metaPanelCollapse?n.emit(y.a.NTF_METAPANEL_TRY_COLLAPSE):n.aiBaikeShow&&(e||t)?n.emit(y.a.NTF_AIView_BAIKE_CLOSE):r.hasStatus(_.a.Status_Playing)?(r.pause(!0),i.sendUserActionPingback("ply_pause"),a.sendUserActionPingback("80720_playerctrl","80720_playerctrl_pause")):r.isIVEnd||(r.play(!0),i.sendUserActionPingback("ply_play"),a.sendUserActionPingback("80720_playerctrl","80720_playerctrl_play")),u=0}),200))}},this.video.addEventListener("click",this.clickEvent),o&&(this.dbClickEvent=function(n){r.isAd()||c||r.isInteracting||(n.preventDefault(),u=0,clearTimeout(e),r.ivosRuning||t.fullToggle())},this.video.addEventListener("dblclick",this.dbClickEvent),r.on(_.a.NTF_Recharge,(function(){o.exit()})),o.on("change",d.bind(this))),this.webfullscreen.on("beforechange",(function(e){t.emit(y.a.NTF_WebFullScreen_BeforeChange,e)})).on("change",(function(e){var n="enter"===e;r.isWebFullScreen=!!n,d.bind(t)(),t.emit(y.a.NTF_WebFullScreen_AfterChange,e)})),this.setting.webfull&&(this.setting.autowebfull&&this.webfullscreen.enter(),this.engine.on(_.a.NTF_Recharge,(function(){t.webfullscreen.exit()}))),this.stagesize=new lt(this.pluginContainer),this.stagesize.on(d.bind(this)),this.ivoslayer&&(this.ivossize=new lt(this.ivoslayer)),this.mutualpanel=new Ue(this)}},{key:"checkSubView",value:function(e,t){var n=this;this.subView?this.subView[e](t):this.once("subViewInit",(function(){n.subView[e](t)}))}},{key:"addView",value:function(e){this.subView=new e(this,this.engine),this.subView.init(),this.emit("subViewInit")}},{key:"loadCss",value:function(e){var t=e.key,n=e.value;if(t&&!this.loadedSkinCss[t]){this.loadedSkinCss[t]=!0;var r=n,i=document.createElement("style");i.setAttribute("data-player-hook","playercss"),i.innerHTML=r,document.querySelector("head").appendChild(i)}}},{key:"loadHtml",value:function(e,t){var n=document.createElement("iqpdiv");n.innerHTML=e,t.appendChild(n.children[0])}},{key:"addPlugin",value:function(e){this.plugins[e.name]=e}},{key:"forEach",value:function(e){for(var t in this.plugins)this.plugins[t][e]()}},{key:"enable",value:function(){this.forEach("enable")}},{key:"disable",value:function(){this.forEach("disable")}},{key:"destroy",value:function(){for(var e in this.clickEvent&&this.video.removeEventListener("click",this.clickEvent),this.dbClickEvent&&this.video.removeEventListener("dblclick",this.dbClickEvent),this.plugins)try{this.plugins[e].destroy()}catch(t){}this.plugins={},document.getElementById(this.playerId)&&(document.getElementById(this.playerId).innerHTML="")}},{key:"callJsDoSomething",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this.engine.getMovieInfo();vt.log("call js setJsDoSomething: "+e),t.origin=this.params.origin||"h5",t.handleType=e,t.tvid=n.tvid,this.engine.isInteractVideo&&(t.isInteractVideo=this.engine.isInteractVideo,t.uniqueId=this.engine.iv_state.uniqueId),this.emit("setJsDoSomething",t)}},{key:"addVideoList",value:function(e){this.checkSubView("addVideoList",e)}},{key:"removeVideoList",value:function(e){this.checkSubView("removeVideoList",e)}},{key:"setFollowData",value:function(e){this.checkSubView("setFollowData",e)}},{key:"notifyMetaPanel",value:function(e){this.checkSubView("notifyMetaPanel",e)}},{key:"getMetaPanelInfo",value:function(){return this.subView?this.subView.getMetaPanelInfo():null}},{key:"getRightFloaterInfo",value:function(){return this.subView?this.subView.getRightFloaterInfo():null}},{key:"setBarragePanel",value:function(e){this.checkSubView("setBarragePanel",e)}},{key:"getPlayerDom",value:function(){return{wrapper:this.wrapper,outlayer:this.outlayer,innerlayer:this.innerlayer,videolayer:this.videolayer,pluginContainer:this.pluginContainer}}},{key:"noticeRightFloater",value:function(e){this.checkSubView("noticeRightFloater",e)}},{key:"setPayLayerStatus",value:function(e){this.checkSubView("setPayLayerStatus",e)}},{key:"hasNextVideo",value:function(){return!!this.subView&&this.subView.hasNextVideo()}},{key:"switchNextVideo",value:function(e){this.checkSubView("switchNextVideo",e)}},{key:"checkAutoPlay",value:function(){this.checkSubView("checkAutoPlay")}},{key:"switchPreVideo",value:function(){this.checkSubView("switchPreVideo")}},{key:"switchVideo",value:function(e){this.engine.switchVideo(e)}},{key:"getPlayIndex",value:function(){return this.subView?this.subView.getPlayIndex():-1}},{key:"skipPrelude",value:function(e){this.checkSubView("skipPrelude",e)}},{key:"setSmallWindowMode",value:function(e){this.checkSubView("setSmallWindowMode",e)}},{key:"setQiyiUserLogin",value:function(e){this.checkSubView("setQiyiUserLogin",e)}},{key:"setRightBarStatus",value:function(e){this.checkSubView("setRightBarStatus",e)}},{key:"getRealArea",value:function(){for(var e={width:16,height:9},t=this.engine.movieinfo.vidl,n=0;n<t.length;n++)if(t[n].vd===this.engine.getCurrentVD()){e=t[n].realArea;break}return e||(e=this.getWrapperArea()),e}},{key:"getWrapperArea",value:function(){var e=getComputedStyle(this.outlayer),t=e.width;if(t=parseInt("100%"===t?0:t),isNaN(t)){var n=this.outlayer.offsetWidth;n<=0||null==n||(t=n)}return{width:t,height:parseInt(e.height)}}},{key:"getDownloadSpeed",value:function(){var e=this.engine.getDownloadSpeed();return e&&(e=e===Infinity?0:e>1e9?(e/1e9).toFixed(2)+"Gb/s":e>1e6?(e/1e6).toFixed(2)+"Mb/s":e>1e3?(e/1e3).toFixed(2)+"Kb/s":e>0?e.toFixed(2)+"b/s":0),e}},{key:"fullToggle",value:function(){var e=this.fullscreen;if(this.setting.expandScreen){var t=!!this.engine.isFullScreen,n=!!this.engine.isWebFullScreen;t?this.callJsDoSomething("exitExpandScreen",{from:"full"}):(n&&this.callJsDoSomething("exitExpandScreen",{from:"webfull"}),this.callJsDoSomething("enterExpandScreen",{from:"full"})),this.emit(y.a.NTF_FullScreen_BeforeChange,t?"enter":"exit")}else e&&e.toggle()}}]),n}(m.a);t.a=gt},function(e,t,n){"use strict";var r=n(46),i=n.n(r),a=n(29),o=n.n(a),s=(n(106),n(17),n(19),n(140),n(43),n(38),n(56),n(286),n(10),n(25),n(30),n(155),n(371),n(94),function(){}),c={MediaType:[".ts",".m4s",".flv",".webm",".m3u8",".mp4"],UserStorageKey:"userstoragekey",RemoteControlKey:"remotecontrolkey",StorageMaxLen:5,WeiXinApplets:{requestFun:"undefined"==typeof wx||window?s:wx.request,name:"WeiXinApplets",getFun:"undefined"==typeof wx||window?s:wx.getStorageSync,setFun:"undefined"==typeof wx||window?s:wx.setStorageSync,removeFun:"undefined"==typeof wx||window?s:wx.removeStorageSync},BaiduApplets:{requestFun:"undefined"==typeof swan||window?s:swan.request,name:"BaiduApplets",getFun:"undefined"==typeof swan||window?s:swan.getStorageSync,setFun:"undefined"==typeof swan||window?s:swan.setStorageSync,removeFun:"undefined"==typeof swan||window?s:swan.removeStorageSync},QQApplets:{requestFun:"undefined"==typeof qq||window?s:qq.request,name:"QQApplets",getFun:"undefined"==typeof qq||window?s:qq.getStorageInfoSync,setFun:"undefined"==typeof qq||window?s:qq.setStorageSync,removeFun:"undefined"==typeof qq||window?s:qq.removeStorageSync},TiktokApplets:{requestFun:"undefined"==typeof tt||window?s:tt.request,name:"TiktokApplets",getFun:"undefined"==typeof tt||window?s:tt.getStorageSync,setFun:"undefined"==typeof tt||window?s:tt.setStorageSync,removeFun:"undefined"==typeof tt||window?s:tt.removeStorageSync},AlipayApplets:{requestFun:"undefined"==typeof my||window?s:my.request,name:"AlipayApplets",getFun:"undefined"==typeof my||window?s:my.getStorageSync,setFun:"undefined"==typeof my||window?s:my.setStorageSync,removeFun:"undefined"==typeof my||window?s:my.removeStorageSync},Android:"android",IOS:"ios",PC:"pc",H5:{requestFun:window?"xhr":s,name:"H5",getFun:window?window.localStorage.getItem.bind(window.localStorage):s,setFun:window?window.localStorage.setItem.bind(window.localStorage):s,removeFun:window?window.localStorage.removeItem.bind(window.localStorage):s},RemoteConfigHttpUrl:"http://puma.api.iqiyi.com/tiger/fetch?businessGroupId=9&key=",RemoteConfigHttpsUrl:"https://puma-api.iqiyi.com/tiger/fetch?businessGroupId=9&key=",Period:864e5,ContentType:{DashURl:"dash",M3U8URL:"m3u8",M3U8Content:"m3u8Content",URL:"http or https url",MP4:"mp4",Other:"other"}},u=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent.toLowerCase():null,d="",l="",f=null,h="",p="",_=0,v=0,g=!window||/^https/gi.test(window.location.protocol),y=-1;function m(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=e.split("?")[1].match(n);return null!=r?decodeURIComponent(r[2]):null}function b(){if(clearTimeout(v),v=null,!(_>3))try{if(d.requestFun&&"xhr"!==d.requestFun)d.requestFun({url:c.RemoteConfigHttpsUrl+escape(JSON.stringify({platform:d.name,terminal:h})),method:"GET",header:{"content-type":"application/json"},success:function(e){d.setFun(c.RemoteControlKey,JSON.stringify(e.data)),k()},fail:function(e){_++,v=setTimeout(b,3e3)}});else{var e=new XMLHttpRequest;e.timeout=5e3;var t=JSON.stringify({platform:d.name,terminal:h});e.open("GET",g?c.RemoteConfigHttpsUrl+t:c.RemoteConfigHttpUrl+t,!0),e.onload=function(t){try{d.setFun(c.RemoteControlKey,e.response),k()}catch(t){}},e.onerror=function(e){_++,v=setTimeout(b,3e3)},e.ontimeout=function(e){_++,v=setTimeout(b,3e3)},e.send()}}catch(n){}}function k(){f?f.expiredTime=Date.now()+c.Period:f={data:[],expiredTime:Date.now()+c.Period,lastIndex:-1},d.setFun(c.UserStorageKey,JSON.stringify(f))}function x(e){for(var t=-1;t++<c.MediaType.length;)if((y=e.indexOf(c.MediaType[t]))>0){p=c.MediaType[t];break}return p}function T(e){return e.indexOf("/dash?")>=0?c.ContentType.DashURl:/^https/gi.test(e)||/^http/gi.test(e)?e.indexOf(".m3u8")>0?c.ContentType.M3U8URL:e.indexOf(".mp4")>0?c.ContentType.MP4:c.ContentType.URL:/^#/gi.test(e)?c.ContentType.M3U8Content:c.ContentType.Other}function S(e,t){for(var n=e.toString(2);t.length>0;){var r=t.shift().split("_"),i=r?parseInt(r[0]):-1,a=r?parseInt(r[1]):-1;if(i>0){for(;i>n.length;)n="0"+n;n=n.substring(0,n.length-i)+a+n.substring(n.length-i+1)}}return parseInt(n,2)}function P(e,t){return w.apply(this,arguments)}function w(){return(w=i()(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||console,e.prev=1,d="undefined"==typeof swan||window?"undefined"==typeof tt||window?"undefined"==typeof qq||window?"undefined"==typeof wx||window?"undefined"==typeof my||window?c.H5:c.AlipayApplets:c.WeiXinApplets:c.QQApplets:c.TiktokApplets:c.BaiduApplets,u&&(h=/(Android)/i.test(navigator.userAgent)?c.Android:/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?c.IOS:c.PC),l=T(t),r=d.getFun(c.UserStorageKey),f=r?JSON.parse(r):null,i=t,l===c.ContentType.DashURl?(i=A(t),(null===f||f.expiredTime<16263216e5||f.expiredTime<=Date.now())&&b()):l===c.ContentType.URL||l===c.ContentType.M3U8Content?(p=x(t),i=A(t),(null===f||f.expiredTime<=Date.now())&&b()):l===c.ContentType.M3U8URL||l===c.ContentType.MP4?(I(t),i=A(t),(null===f||f.expiredTime<=Date.now())&&b()):c.ContentType.Other,e.abrupt("return",Promise.resolve(i));case 12:return e.prev=12,e.t0=e["catch"](1),e.abrupt("return",Promise.resolve(t));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function I(e){var t=function(e){for(var t=-1;t++<c.MediaType.length;)if((y=e.indexOf(c.MediaType[t]))>0){p=c.MediaType[t];break}var n="";if(y>=0){var r=e.slice(0,y),i=r.lastIndexOf("/");n=r.slice(i+1)}return n}(e),n=!1;if(t){if(f){for(var r=0;r<f.data.length;r++)if(f.data[r]===t){n=!0;break}}else f={data:[],expiredTime:0,lastIndex:-1};n||(f.data[++f.lastIndex%c.StorageMaxLen]=t,d.setFun(c.UserStorageKey,JSON.stringify(f)))}}function A(e){var t=e,n=d.getFun(c.RemoteControlKey);if((n=n?JSON.parse(n):null)&&n.adapter){var r=n.adapter.add?JSON.parse(n.adapter.add).arrays:null;if(r){for(var i=[],a=0;a<r.length;a++)if("*"===r[a].type||r[a].type===p.slice(1))for(;r[a].value.length>0;)i.push(r[a].value.shift());var o=JSON.stringify(i).slice(2,-2).replace(/"/g,"").replace(/:/g,"=").replace(/},{/g,"&");if(""!==o)if(l===c.ContentType.URL)t=t.indexOf("?")>0?t+"&"+o:t+"?"+o;else if(""!=p){var s="?"===t[y+p.length]?"?":"",u=new RegExp("\\"+p+(s?"\\?":""),"g");t=t.replace(u,p+"?"+o+"&")}}var f=n.adapter.remove?JSON.parse(n.adapter.remove).arrays:null;if(f)for(var h=0;h<f.length;h++)if("*"===f[h].type||f[h].type===p.slice(1))for(;f[h].value.length>0;)for(var _=f[h].value.shift(),v=0;v>=0;){v=t.indexOf(_+"=");var g=t.slice(v).indexOf("&");g<0&&(g=t.length-1,"&"===t[v-1]&&(v-=1)),v>=0&&(t=t.replace(t.slice(v,v+g+1),""))}var b=n.adapter.modify?JSON.parse(n.adapter.modify).arrays:null;if(b)for(;b.length>0;){var k=b.shift();if("*"===k.type||k.type===l)for(;k.value.length>0;){var x=k.value.shift(),T=Object.keys(x)[0],P=parseInt(m(t,T));if(!isNaN(P)){var w=S(P,Object.values(x));t=t.replace(T+"="+P,T+"="+w)}}}}return t}var E=n(14),D=n(278),q=new E.a("middlekey");q.log("middlekey version is ".concat("1.0.21"));var O;t.a={hcdnProxy:(O=i()(o.a.mark((function R(e){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e,n.prev=1,n.next=4,P(e,q);case 4:t=n.sent,n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),q.error(n.t0?n.t0.stack:n.t0),Object(D.a)("MIDDLEKEY_MODIFIED_FAILED");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}}),R,null,[[1,7]])}))),function(e){return O.apply(this,arguments)})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54);function r(e){for(var t,n=e.byteLength,r=[],i=1,a=new Uint8Array(0);i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;t=n-r.length;try{a=new Uint8Array(t)}catch(s){throw"epsb alloc mem error ".concat(t)}var o=0;for(i=0;i<t;o++,i++)o===r[0]&&(o++,r.shift()),a[i]=e[o];return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(5),i=n.n(r),a=n(6),o=n.n(a),s=n(1),c=n.n(s),u=n(2),d=n.n(u),l=n(3),f=n.n(l),h=(n(172),n(27),n(9),n(99)),p=(n(56),n(84),function(){function e(){d()(this,e),this.map_={}}return f()(e,[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){var t=this.map_[e];return t?t.slice():null}},{key:"getAll",value:function(){var e=[];for(var t in this.map_)e.push.apply(e,this.map_[t]);return e}},{key:"remove",value:function(e,t){var n=this.map_[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}]),e}()),_=function(){function e(t,n,r){d()(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener?this.target.addEventListener(n,r,!1):this.target.on&&this.target.on(n,r,!1)}return f()(e,[{key:"off",value:function(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}]),e}();function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c()(e);if(t){var i=c()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o()(this,n)}}var g=function(){function e(){d()(this,e),this.bindingMap_=new p}return f()(e,[{key:"destroy",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"on",value:function(e,t,n){if(this.bindingMap_){var r=new _(e,t,n);return this.bindingMap_.push(t,r),this}}},{key:"once",value:function(e,t,n){return this.on(e,t,function(r){this.off(e,t),n(r)}.bind(this))}},{key:"off",value:function(e,t){if(!this.bindingMap_)return this;for(var n=this.bindingMap_.get(t)||[],r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.off(),this.bindingMap_.remove(t,i))}return this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))}},{key:"removeAll",value:function(){if(this.bindingMap_){for(var e=this.bindingMap_.getAll(),t=0;t<e.length;++t)e[t].off();this.bindingMap_.clear()}}}]),e}();h.EventEmitter,new h.EventEmitter},,,,function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(138),o=n(83),s=n(274),c=n(218),u=n(157),d=n(41),l=n(24),f=n(196),h=n(134),p=n(186);e.exports=function(e,t,n){var _=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),g=_?"set":"add",y=i[e],m=y&&y.prototype,b=y,k={},x=function(e){var t=m[e];o(m,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!d(e)?undefined:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof y||!(v||m.forEach&&!l((function(){(new y).entries().next()})))))b=n.getConstructor(t,e,_,g),s.REQUIRED=!0;else if(a(e,!0)){var T=new b,S=T[g](v?{}:-0,1)!=T,P=l((function(){T.has(1)})),w=f((function(e){new y(e)})),I=!v&&l((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));w||((b=t((function(t,n){u(t,b,e);var r=p(new y,t,b);return n!=undefined&&c(n,r[g],{that:r,AS_ENTRIES:_}),r}))).prototype=m,m.constructor=b),(P||I)&&(x("delete"),x("has"),_&&x("get")),(I||S)&&x(g),v&&m.clear&&delete m.clear}return k[e]=b,r({global:!0,forced:b!=y},k),h(b,e),v||n.setStrong(b,e,_),b}},function(e,t,n){"use strict";var r=n(48),i=n(24),a=n(168),o=n(217),s=n(199),c=n(86),u=n(148),d=Object.assign,l=Object.defineProperty;e.exports=!d||i((function(){if(r&&1!==d({b:1},d(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||a(d({},t)).join("")!=i}))?function(e,t){for(var n=c(e),i=arguments.length,d=1,l=o.f,f=s.f;i>d;)for(var h,p=u(arguments[d++]),_=l?a(p).concat(l(p)):a(p),v=_.length,g=0;v>g;)h=_[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:d},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n.n(r),a=n(340),o=n(112);var s=n(652),c=0;function u(e,t){for(var n,r=8,i=8,a=0;a<t;a++)0!=i&&(n=s.a.readUEV(e,c),c+=n.bitLength,i=(r+n.value+256)%256),r=e[a]}var d=function l(e){switch(i()(this,l),this.rawData=e,this.unit_type=31&e[0],this.unit_type){case 7:this.sps=function(e){c=0;var t,n,r,i,a,o,d=e[0],l=e[1],f=e[2],h=e.subarray(3),p=0,_=[1,1],v=1,g=0,y=0,m=!0,b=s.a.readUEV(h,c);if(c+=b.bitLength,100==d||110==d||122==d||244==d||44==d||83==d||86==d||118==d||128==d){var k=s.a.readUEV(h,c);c+=k.bitLength,3==(g=k.value)&&(c+=1);var x=s.a.readUEV(h,c);c+=x.bitLength;var T=s.a.readUEV(h,c);if(c+=T.bitLength,c+=1,p=s.a.readBit(h,c),c+=1,p)for(var S=0;S<(3!=k.value?8:12);S++){var P=s.a.readBit(h,c);c+=1,P&&u(h,S<6?16:64)}}var w=s.a.readUEV(h,c);c+=w.bitLength;var I=s.a.readUEV(h,c),A=I.value;if(c+=I.bitLength,0===A)t=s.a.readUEV(h,c),c+=t.bitLength;else if(1===A){c+=1,n=s.a.readSEV(h,c),c+=n.bitLength,r=s.a.readSEV(h,c),c+=r.bitLength,i=s.a.readUEV(h,c),c+=i.bitLength;for(var E,D=0;D<i.value;D++)E=s.a.readSEV(h,c),c+=E.bitLength}var q=s.a.readUEV(h,c);c+=q.bitLength,c+=1;var O=s.a.readUEV(h,c);c+=O.bitLength;var R=s.a.readUEV(h,c);c+=R.bitLength;var L=s.a.readBit(h,c);c+=1,L||(c+=1),c+=1;var C=s.a.readBit(h,c);c+=1;var M=0,N=0,B=0,F=0;if(C){var U=s.a.readUEV(h,c);c+=U.bitLength,M=U.value;var j=s.a.readUEV(h,c);c+=j.bitLength,N=j.value;var V=s.a.readUEV(h,c);c+=V.bitLength,B=V.value;var H=s.a.readUEV(h,c);c+=H.bitLength,F=H.value}var W=s.a.readBit(h,c);if(c+=1,W){var z=s.a.readBit(h,c);if(c+=1,z){var Y=s.a.readByte(h,c);switch(c+=8,Y){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:var G=s.a.readByte(h,c);c+=8;var Q=s.a.readByte(h,c);c+=8;var K=s.a.readByte(h,c);c+=8;var $=s.a.readByte(h,c);c+=8,_=[G<<8|Q,K<<8|$]}_&&(v=_[0]/_[1]),255===Y&&(c+=16,c+=16)}var Z=s.a.readBit(h,c);c+=1,Z&&(c+=1);var X=s.a.readBit(h,c);if(c+=1,X){s.a.readBit(h,c,3),c+=3,c+=1;var J=s.a.readBit(h,c);c+=1,J&&(c+=24)}var ee=s.a.readBit(h,c);if(c+=1,ee){var te=s.a.readUEV(h,c);c+=te.bitLength;var ne=s.a.readUEV(h,c);c+=ne.bitLength}var re=s.a.readBit(h,c);c+=1,re&&(a=s.a.readBit(h,c,32),c+=32,o=s.a.readBit(h,c,32),c+=32,m=!!s.a.readBit(h,c),c+=1,y=o/(2*a))}return{payload:h,profile_idc:d,profile_compatibility:l,level_idc:f,chromaFormat:g,width:Math.ceil((16*(O.value+1)-2*M-2*N)*v),height:(2-L)*(R.value+1)*16-2*B-2*F,pixelRatio:_,fps:y,fixedFPS:m}}(Object(a.a)(e.subarray(1)));break;case 6:this.sei=function(e){var t=0,n=0,r=Object(o.d)(e);do{t+=e[r.index]}while(255==Object(o.c)(r,8));do{n+=e[r.index]}while(255==Object(o.c)(r,8));var i=r.index+16,a=i+n;return{type:t,size:n,payload:e.subarray(i,a)}}(Object(a.a)(e.subarray(1)))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=!1,i=null;function a(e){r?i=e:e()}function o(e){var t=r?null:s;r=!0;try{e()}finally{t&&t()}}function s(){if(r=!1,i){var e=i;i=null,e()}}},function(e,t,n){var r=n(236),i=n(606);function a(t,n,o){return i()?(e.exports=a=Reflect.construct,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports["default"]=e.exports,e.exports.__esModule=!0),a.apply(null,arguments)}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(354),i=n(355),a=n(356),o=new(n(578).a);o.register("TS_FMP4",r.b),o.register("FLV_FMP4",i.b),o.register("MP4_FMP4",a.b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(132),n(45),n(49)),c=function(){function e(t){i()(this,e),this.bytesArray=[],s.a.assert(!!t,"BmffTypes should be specified to InitSegment or MediaSegment"),this.type=t}return o()(e,[{key:"byteLength",get:function(){var e=0;return this.bytesArray.forEach((function(t){e+=t.byteLength})),e}}]),e}()},,function(e,t,n){"use strict";n.d(t,"b",(function(){return ne})),n.d(t,"a",(function(){return ie}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(39),c=n.n(s),u=n(40),d=n.n(u),l=n(5),f=n.n(l),h=n(6),p=n.n(h),_=n(1),v=n.n(_),g=(n(126),n(27),n(116),n(84),n(576)),y=n(49),m=n(655),b=n(656),k=n(164),x=n(654),T=n(415),S=n(267),P=n(651),w=n(390),I=function ae(e){i()(this,ae);var t,n=0,r=((15&e[1])<<8|e[2])-4-5;for(this.pmtTable=[];n<r;n+=4)if(0==(t=e[n+8]<<8|e[n+9])){var a=(31&e[10+n])<<8|e[11+n];y.a.log("packet->network_PID %0x /n/n",a)}else this.pmtTable.push({programNum:t,program_map_PID:(31&e[10+n])<<8|e[11+n]})},A=function oe(e){i()(this,oe);var t=(15&e[1])<<8|e[2],n=(15&e[10])<<8|e[11];if(!(n<0)){if(n>2)for(var r=0;r<n;){r+=e[13+r]}var a=12+n,o=t-n-9-4,s=a+o;if(a>=s)y.a.warn("es_section_pos < es_section_end ".concat(a,", ").concat(s));else{this.pes_table=[];for(var c=0;c<o;){var u=a+c,d=e[u],l=8191&(e[u+1]<<8|e[u+2]),f=4095&(e[u+3]<<8|e[u+4]);this.pes_table.push({streamType:d,PID:l}),c+=f+5}}}},E=function(){function e(t){i()(this,e),this.pat_table=[],this.pes_streams=[]}return o()(e,[{key:"currentProgramPID",get:function(){for(var e=[],t=0;t<this.pat_table.length;t++)e.push(this.pat_table[t].pid);return e.length>0?e[0]:-1}},{key:"tracks",get:function(){return this.pes_streams}},{key:"reset",value:function(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}},{key:"parse",value:function(e){0===e.PID?this._parsePat(e):1===e.PID||2===e.PID||3<=e.PID&&e.PID<=15||17===e.PID||e.PID===this.currentProgramPID&&this._parsePmt(e)}},{key:"findTrack",value:function(e){for(var t=null,n=this.pes_streams,r=0;r<n.length;r++)if(n[r].id===e){t=n[r];break}return t}},{key:"_parsePat",value:function(e){var t;if(e.payload_unit_start_indicator){var n=e.payload[0];t=e.payload.subarray(n+1)}else t=e.payload;for(var r=new I(t),i=0;i<r.pmtTable.length;i++)this._add_pid_to_pmt(r.pmtTable[i].programNum,r.pmtTable[i].program_map_PID);return r}},{key:"_add_pid_to_pmt",value:function(e,t){var n=this.pat_table;(function(e){for(var t,r=0;r<n.length;r++)if((t=n[r]).id===e)return{idx:r,item:t};return null})(e)||n.push({id:e,pid:t})}},{key:"_parsePmt",value:function(e){var t;if(e.payload_unit_start_indicator){var n=e.payload[0];t=e.payload.subarray(n+1)}else t=e.payload;for(var r=new A(t),i=0;i<r.pes_table.length;i++)this._add_pes_stream(r.pes_table[i],r);return r}},{key:"_add_pes_stream",value:function(e,t){var n=this.pes_streams;(function(e){for(var t,r=0;r<n.length;r++)if((t=n[r]).id===e)return{idx:r,item:t};return null})(e.PID)||n.push({id:e.PID,stream_type:e.streamType,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}}]),e}(),D=(n(115),n(137));function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var O=function(e){f()(n,e);var t=q(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this)).videoTrack=null,o.audioTrack=null,o.captionTrack=null,o.tracksGot=!1,o.context=e,o.PSI=r,o.options=a,o}return o()(n,[{key:"push",value:function(e){for(var t=this.context.config.resetInitSegment,n=e,r=!1,i=!1,a=0;a<n.length;a++)switch(n[a].type){case"video":r=!0;break;case"audio":i=!0}if(t&&!this.tracksGot&&this.PSI.tracks.length>0){this.tracksGot=!0;var o=this.PSI.tracks.length,s=r,c=i;2===o&&(s=c=!0),this.context.emit("info",{tracksExpected:o,audio:c,video:s})}for(var u,d=0;d<n.length;d++)switch((u=n[d]).type){case"video":this._complexVideo(u);break;case"audio":this._complexAudio(u);break;default:y.a.warn("unsupported track type ".concat(u.type))}}},{key:"flush",value:function(){this.emit("done"),this._clearStream()}},{key:"reset",value:function(){this._clearStream()}},{key:"_clearStream",value:function(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null,this.tracksGot=!1}},{key:"_complexVideo",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="video",t.gops=e,t.firstDTS=e[0][0].dts,t.firstPTS=e[0][0].pts,t.duration=Number.POSITIVE_INFINITY,this.videoTrack=t,this.emit("data",{videoTrack:this.videoTrack}))}},{key:"_complexAudio",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="audio",t.frames=e,t.firstPTS=t.firstDTS=e[0].dts,t.duration=Number.POSITIVE_INFINITY,this.audioTrack=t,this.emit("data",{audioTrack:this.audioTrack}))}}]),n}(D.a),R=n(306),L=n(400);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var M=function(e){f()(n,e);var t=C(n);function n(e){var r;return i()(this,n),(r=t.call(this)).PSI=e,r.trackId=null,r.codec=new R.a,r.codec.on("frame",(function(e){r.frames.push(e),r.frames.byteLength+=e.data.byteLength,r.frames.trackId=r.trackId})),r.newFrames_(),r}return o()(n,[{key:"push",value:function(e){15===e.stream_type&&(this.trackId=e.pid,this.codec.push({dts:e.pes.DTS,pts:e.pes.PTS,payload:e.pes.data_byte}))}},{key:"flush",value:function(){if(this.frames.length>0){var e=this.frames.length,t=this.frames[0],n=this.frames[e-1],r=n.sampleRate*n.sampleCount/9e4;this.frames.firstDTS=t.dts,this.frames.firstPTS=t.pts,this.frames.duration=1===e?r:r+(n.pts-t.pts),this.updateTrackMeta_(t),this.emit("data",this.frames),this.reset(),this.emit("done")}}},{key:"reset",value:function(){this.trackId=null,this.newFrames_()}},{key:"newFrames_",value:function(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}},{key:"updateTrackMeta_",value:function(e){var t=this.PSI.findTrack(this.trackId),n=Object(L.a)(e.audioObjectType,e.samplingFrequencyIndex,e.channelCount);t.config=n.config,t.sampleRate=n.sampleRate,t.inputTimeScale=t.inputTimeScale||t.timescale,t.timescale=n.sampleRate,t.channelCount=n.channelCount,t.codec=n.codec,t.realCodec=n.realCodec,t.isAAC=!0}}]),n}(D.a),N=n(231),B=n(348),F=n(402);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var j=function(e){f()(n,e);var t=U(n);function n(e){var r;return i()(this,n),(r=t.call(this)).trackId=null,r.currentFrame=[],r.PSI=e,r.newGop_(),r.newGops_(),r}return o()(n,[{key:"_initCodec",value:function(){var e=this;this.codec=new N.a,this.codec.on("nalu",(function(t){if(t instanceof B.a){if(7===t.unit_type){var n=e.PSI.findTrack(e.trackId),r=Object(F.a)(t.sps);n.codec=r.codec,n.width=t.sps.width,n.height=t.sps.height,n.profileIdc=t.sps.profile_idc,n.profileCompatibility=t.sps.profile_compatibility,n.levelIdc=t.sps.level_idc,n.pixelRatio=t.sps.pixelRatio,n.sps=[t.rawData]}else if(8===t.unit_type){e.PSI.findTrack(e.trackId).pps=[t.rawData]}e.grouping_(t)}}))}},{key:"push",value:function(e){var t=e.stream_type,n=e.pes,r=e.pid;if(27===t){this.codec||this._initCodec(),this.trackId=r;var i={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(i)}}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),this.gop.length>0&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){9===e.unit_type?(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||this.gop.length>0?this.pushFrameIntoGop_():y.a.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts):(5===e.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e)),this.currentFrame.duration=e.dts-this.currentFrame.dts}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),n}(D.a),V=n(403),H=n(156);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var z=function(e){f()(n,e);var t=W(n);function n(e){var r;return i()(this,n),(r=t.call(this)).trackId=null,r.currentFrame=[],r.hevcMetVirtualAUD_=!0,r.PSI=e,r.newGop_(),r.newGops_(),r}return o()(n,[{key:"_initCodec",value:function(){var e=this;this.codec=new N.b,this.codec.on("nalu",(function(t){if(32===t.unit_type){var n=e.PSI.findTrack(e.trackId);n.vps=[t.rawData],n.hevc_vps=t.vps}else if(33===t.unit_type){var r=e.PSI.findTrack(e.trackId),i=Object(V.a)(t.sps);r.codec=i.codec,r.width=t.sps.width,r.height=t.sps.height,r.profileIdc=t.sps.profile_idc,r.profileCompatibility=t.sps.profile_compatibility,r.levelIdc=t.sps.level_idc,r.pixelRatio=t.sps.pixelRatio,r.sps=[t.rawData],r.hevc_sps=t.sps}else if(34===t.unit_type){var a=e.PSI.findTrack(e.trackId);a.pps=[t.rawData],a.hevc_pps=t.pps}e.grouping_(t)}))}},{key:"push",value:function(e){var t=e.stream_type,n=e.pes,r=e.pid;if(36===t){this.codec||this._initCodec(),this.trackId=r;var i={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(i)}}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),this.gop.length>0&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){this.hevcMetVirtualAUD_&&(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||this.gop.length>0?this.pushFrameIntoGop_():y.a.warn("hevc codec drop frame")),Object(H.e)(this.currentFrame,"keyframe")&&(this.prevFrame=this.currentFrame),this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts,this.hevcMetVirtualAUD_=!1),e.unit_type<=21&&e.unit_type>=16&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e),this.prevFrame&&(this.prevFrame.duration=e.dts-this.prevFrame.dts),e.unit_type>=0&&e.unit_type<=21&&(this.hevcMetVirtualAUD_=!0)}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),n}(D.a);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var G=function(e){f()(n,e);var t=Y(n);function n(e,r){var a,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return i()(this,n),(a=t.call(this)).context=e,a.PSI=r,a.options=o,a.streams=[],a}return o()(n,[{key:"initADTS_",value:function(){var e=this,t=this.PSI,n=this.streams,r=this.context,i=this.adtsStream=new M(t);n.push(i),i.on("data",(function(t){var n=r.config.stubTime;if(Object(k.g)(n)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<n)return void y.a.log("drop adts, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(n,")"))}e.emit("data",[t])}))}},{key:"initAVC_",value:function(){var e=this,t=this.PSI,n=this.streams,r=this.context,i=this.avcStream=new j(t);n.push(i),i.on("data",(function(t){var n=r.config.stubTime;if(Object(k.g)(n)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<n)return void y.a.log("drop avc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(n,")"))}e.emit("data",[t]),e.adtsStream&&e.adtsStream.flush()}))}},{key:"initHEVC_",value:function(){var e=this,t=this.PSI,n=this.context,r=this.streams,i=this.hevcStream=new z(t);r.push(i),i.on("data",(function(t){var r=n.config.stubTime;if(Object(k.g)(r)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<r)return void y.a.log("drop hevc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(r,")"))}e.emit("data",[t]),e.adtsStream&&e.adtsStream.flush()}))}},{key:"push",value:function(e){var t=this.options,n=(this.PSI,e.stream_type);if(t.decodeCodec)switch(n){case 27:this.avcStream||this.initAVC_(),this.avcStream.push(e);break;case 36:this.hevcStream||this.initHEVC_(),this.hevcStream.push(e);break;case 15:this.adtsStream||this.initADTS_(),this.adtsStream.push(e);break;default:y.a.warn("ts elementary encounter unknown stream type ".concat(n))}else this.emit("data",e)}},{key:"flush",value:function(){for(var e=this.streams,t=0;t<this.streams.length;t++){var n=e[t];n&&n.flush()}this.emit("done")}},{key:"reset",value:function(){for(var e=0;e<this.streams.length;e++){var t=this.streams[e];t&&t.reset()}this.emit("reset")}}]),n}(D.a),Q=function(){function e(t){i()(this,e);var n=t[7]>>6,r=t[8];this.PTS=0,2==(2&n)&&(this.PTS=this.calcTimestamp_(t,9)),this.DTS=this.PTS,1==(1&n)&&(this.DTS=this.calcTimestamp_(t,14)),this.data_byte=t.subarray(9+r)}return o()(e,[{key:"calcTimestamp_",value:function(e,t){return 536870912*(14&e[t])+(e[t+1]<<22)+(e[t+2]>>1<<15)+(e[t+3]<<7)+(e[t+4]>>1)}}]),e}();function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var $=function(e){f()(n,e);var t=K(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).PSI=r,a.PID=null,a.cache_buffer=new P.a,a}return o()(n,[{key:"push",value:function(e){var t=this;e.PID>255&&e.PID<8191&&(-1==this.PSI.currentProgramPID?t.pushPacket_(e):this.PSI.currentProgramPID!==e.PID&&(1===e.payload_unit_start_indicator&&t.assembleOnePES_(),t.pushPacket_(e)))}},{key:"flush",value:function(){this.assembleOnePES_(),this.emit("done")}},{key:"reset",value:function(){this.clearCached_(),this.emit("reset")}},{key:"clearCached_",value:function(){this.PID=null,this.cache_buffer.clear()}},{key:"pushPacket_",value:function(e){var t=this.cache_buffer,n=t.empty;n&&0===e.payload_unit_start_indicator||(n&&(this.PID=e.PID),t.append(e.payload))}},{key:"assembleOnePES_",value:function(){var e=this.cache_buffer;if(!e.empty){var t;try{t=e.bytes}catch(a){throw"pes alloc mem err ".concat(e.byteLength)}var n=new Q(t),r=this.PSI.findTrack(this.PID);if(r){var i={pid:r.id,stream_type:r.stream_type,pes:n};this.emit("data",i)}this.clearCached_()}}}]),n}(D.a),Z=function(){function e(t){if(i()(this,e),this.sync_byte=t[0],this.payload_unit_start_indicator=t[1]>>6&1,this.PID=8191&(t[1]<<8|t[2]),this.afc=t[3]>>4&3,this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload)if(this.has_adaptation){var n=t[4];this.payload=t.subarray(5+n)}else this.payload=t.subarray(4)}return o()(e,[{key:"valid",value:function(){return 71===this.sync_byte&&1===this.has_payload}}]),e}();function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var J=function(e){f()(n,e);var t=X(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this,e,a)).cache_buffer_=new P.a,r.psi_=new E(r.ctx_),r.pesStream_=new $(r.ctx_,r.psi_),r.elementaryStream_=new G(r.ctx_,r.psi_,a),r.complexStream_=new O(r.ctx_,r.psi_,a),r.pipe(r.pesStream_),r.pesStream_.pipe(r.elementaryStream_),r.elementaryStream_.pipe(r.complexStream_),r}return o()(n,[{key:"endStream",get:function(){var e=this.elementaryStream_;return this.options_.decodeCodec&&(e=this.complexStream_),e}},{key:"push",value:function(e){var t=this.ctx_,r=this.cache_buffer_,i=this.psi_,a=t.config,o=a.done,s=a.meta,c=d()(v()(n.prototype),"constraintPushData_",this).call(this,e),u=r.byteLength,l=null;for(s&&Object(k.g)(s.byteOffset)&&(l=s.byteOffset-u),y.a.log("hls demux received ".concat(c.byteLength," bytes, cache ").concat(u," bytes. ").concat(o?"chunk done":"")),r.append(c);r.byteLength>=188;){var f=r.cut(188);if(f){var h=new Z(f);if(!h.valid()){var p="Encounter invalid ts packet, startByte: ".concat(l," endByte: ").concat(l+f.byteLength," packet_length(").concat(f.length,"), cache_length(").concat(r.byteLength,"), has_payload(").concat(h.has_payload,"), data(").concat(f,")");y.a.error(p),this.reset(),t.fireErr(w.a.MUX_TS_SYNC_BYTE,p,{startByte:l,endByte:l+f.byteLength});break}i.parse(h),this.emit("data",h),l+=f.byteLength}}r.empty&&o&&this.emit("done")}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),n}(S.a),ee=n(660);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var ne=function(e){f()(n,e);var t=te(n);function n(){var e;return i()(this,n),(e=t.call(this,[J,{decodeCodec:!0}],ee.a)).demuxer.endStream.pipe(e.remuxer),e}return n}(n(288).a);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var ie=function(e){f()(n,e);var t=re(n);function n(e){var r;i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:T,watch:["loader","mux"],transmuxer:"TS_FMP4"}))).$TAG="TsMux",r.seekingOnceChecked_=!1;var a=c()(r),o=a.$stream,s=a.$videoMediaStartTimes_,u=a.$transmuxer,d=o.restrictor;return r.$eventManager.on(u,"E",(function(e){r.$checkMuxMetaMatched(r.$currentDataMeta,e.data.meta)&&r.$throwError(Object(x.a)(e.code,e.message,e.data))})).on(u,"I",(function(){r.tryPush_()})).on(u,"DI",(function(e){y.a.log("".concat(r.LOG_TAG," ").concat(2===e.tracksExpected?2:e.audio?"audio":"video"," track(s) found by ts mux info")),r.tracksExpected=e.tracksExpected,d.hasAudio=e.audio,d.hasVideo=e.video})).on(u,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(y.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var c=new m.a("video"===t?1:2);c.bytesArray=o,c.trackId=a,c.container=n,c.codec=i,"video"===t?d.videoInitSegment=c:"audio"===t&&(d.audioInitSegment=c),r.tryProvideArtefact_()}break;case"fragment":var u,l=e.contentType,f=e.data,h=e.duration,p=e.startDTS,_=e.startPTS,v=e.nextSegmentPTS;if(y.a.log("".concat(r.LOG_TAG," parsed ").concat(l,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(_.toFixed(3),"/").concat((_+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void y.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===l?((u=new b.a(1)).bytesArray=f,u.startTime=p,u.duration=h,s.push(u.startTime),d.videoMediaSegments.push(u)):"audio"===l&&((u=new b.a(2)).bytesArray=f,u.startTime=_,u.duration=h,d.audioMediaSegments.push(u),r.$audioSegmentAlignPTS_=v),r.tryProvideArtefact_()}})).on(u,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r}return o()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e=this.$krt,t=this.$stream,n=this.$transmuxer,r=this.$loaderArtifact,i=this.$selfArtifact,a=t.restrictor,o=t.renderer;if(!Object(k.c)(r)&&Object(k.c)(i)&&this.$canConsumeLoaderData()){var s=r.data,c=r.meta,u=0;if(c){var d=c.level;a.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||d==this.$currentDataMeta.level)||(a.needSendInitSegment=!0,a.videoInitSegment=a.audioInitSegment=null),this.$currentDataMeta=c}if(!e.conf.alwaysSeekKeyframe){var l=o.currentTimeRange,f=o.currentTime;u=(l?l.end:f)||0}n.push(s,{done:r.done,stubTime:u,resetInitSegment:a.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:c}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(k.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):y.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){d()(v()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(g.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return _e})),n.d(t,"a",(function(){return ye}));n(9);var r,i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=n(39),u=n.n(c),d=n(40),l=n.n(d),f=n(5),h=n.n(f),p=n(6),_=n.n(p),v=n(1),g=n.n(v),y=(n(126),n(27),n(116),n(84),n(576)),m=n(49),b=n(655),k=n(656),x=n(164),T=n(654),S=(n(132),n(45),n(115),n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54),n(400)),P=n(231),w=n(402),I=n(267),A=n(651),E=n(390);!function(e){e[e.HEAD=0]="HEAD",e[e.BODY=1]="BODY"}(r||(r={}));var D=n(137),q=n(653);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var R=function(e){h()(n,e);var t=O(n);function n(e){var r;a()(this,n),(r=t.call(this)).tagType=e[0],r.dataSize=16777215&r.readUint32(e,0);var i=16777215&r.readUint32(e,3),o=e[7];return r.timestamp=(o<<24)+i,r.streamId=16777215&r.readUint32(e,8),r.payload=e.subarray(11,11+r.dataSize),r.previousTagSize=r.readUint32(e,11+r.dataSize),r.totalSize=r.previousTagSize+4,r}return s()(n,[{key:"valid",value:function(){var e=this.tagType,t=this.dataSize;return this.previousTagSize===11+t&&(18===e||9===e||8===e)}}]),n}(q.a);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var C,M,N=function(e){h()(n,e);var t=L(n);function n(e,r){var i,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(i=t.call(this)).ctx_=e,i.flv_=r,i.options_=o,i.cache_buffer_=new A.a,i}return s()(n,[{key:"push",value:function(e){var t,n=this.ctx_,r=this.flv_,i=this.cache_buffer_;for(i.append(e),9===r.pos&&i.byteLength>8&&(i.cut(4),r.pos+=4);i.byteLength>0&&(t=i.bytes).length>=4;){var a=11+((t[1]<<16)+(t[2]<<8)+t[3])+4;if(!(t.length>=a))break;var o=i.cut(a),s=new R(o);if(s.valid())this.emit("data",s),r.pos+=s.totalSize;else{var c="Encounter invalid flv tag, tag_length(".concat(s.previousTagSize,"), cache_length(").concat(i.byteLength,"), data(").concat(o,")");m.a.error(c),this.reset(),n.fireErr(E.a.MUX_FLV_TAG_INVALID,c)}}}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),n}(D.a);n(287);function B(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=null,r=null,i=null;if(t){try{i=new Uint8Array(e.length+1)}catch(o){m.a.error("flv parseData failed: ".concat(o.message))}i[0]=2,i.set(e,1,e.length)}else i=e;n=F(i),t&&(n.valueLength-=1);var a=e.subarray(n.valueLength,e.byteLength);return r=F(a),{key:n.value,value:r.value,valueLength:n.valueLength+r.valueLength}}function F(e){var t={},n=0,r=new q.a;switch(e[0]){case 0:n=8,t.value=j(e.subarray(1,9)),t.valueLength=1+n;break;case 1:n=1,t.value=0!==e[1],t.valueLength=1+n;break;case 2:n=e[1]<<8|e[2],t.value=U(e.subarray(3,3+n)),t.valueLength=3+n;break;case 3:for(n=1,t.value={};0!=e[n]||0!=e[n+1]||9!=e[n+2];){var i=e.subarray(n,e.byteLength),a=B(i,!0);t.value[a.key]=a.value,n+=a.valueLength,i=null}n+=3,t.valueLength=n;break;case 4:n=e[1]<<8|e[2],t.value=U(e.subarray(3,3+n)),t.valueLength=3+n;break;case 5:t.value=null,n=1,t.valueLength=n;break;case 6:t.value=undefined,n=1,t.valueLength=n;break;case 7:t.value=e[1]<<8|e[2],n=3,t.valueLength=n;break;case 8:var o=e[1]<<24|e[2]<<16|e[3]<<8|e[4];n=5,t.value={};for(var s=0;s<o;s++){var c=B(e.subarray(n,e.byteLength),!0);t.value[c.key]=c.value,n+=c.valueLength}n+=3,t.valueLength=n;break;case 9:break;case 10:for(var u=[],d=r.readUint32(e,1),l=0;l<d;l++){var f=e.subarray(9*l+4+1,e.byteLength);u.push(F(f).value)}t.value=u,n=9*u.length+4+1,t.valueLength=n;break;case 11:t.value=j(e.subarray(0,8)),n=11,t.valueLength=n;break;case 12:n=e[1]<<24|e[2]<<16|e[3]<<8|e[4],t.value=U(e.subarray(5,5+n)),t.valueLength=5+n;break;default:return null}return t}function U(e){return String.fromCharCode.apply(null,e)}function j(e){var t=new Uint8Array(e),n=new DataView(t.buffer),r=n.getFloat64(0);return n=null,t=null,r}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.AAC=10]="AAC"}(C||(C={})),function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(M||(M={}));var H,W=function(e){h()(n,e);var t=V(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).pos=0,e}return n}(D.a),z=n(416);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",e[e.AAC_RAW=1]="AAC_RAW"}(H||(H={}));var G=function(e){h()(n,e);var t=Y(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).dts=r,i.pts=r,i.aacPacketType=e[0],i.payload=e.subarray(1),0===i.aacPacketType&&(i.audioSpecificConfig=Object(z.a)(i.payload)),i}return n}(q.a);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var K,$=function(e){h()(n,e);var t=Q(n);function n(e,r){var i;switch(a()(this,n),(i=t.call(this)).soundFormat=(240&e[0])>>4,i.soundRate=(12&e[0])>>2,(2&e[0])>>1){case 0:i.sampleSize=8;break;case 1:i.sampleSize=16}switch(i.soundType=1&e[0],i.soundFormat){case C.AAC:i.soundData=new G(e.subarray(1),r);break;default:m.a.error("flv tag audioData encounter unknown soundFormat ".concat(i.soundFormat))}return i}return n}(q.a);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",e[e.NALU=1]="NALU",e[e.SEQUENCE_END=2]="SEQUENCE_END"}(K||(K={}));var X=new P.a,J=[];X.on("nalu",(function(e){switch(e.unit_type){case 7:case 8:case 5:case 1:J.push(e)}}));var ee,te=function(e){h()(n,e);var t=Z(n);function n(e,r,i){var o;a()(this,n),o=t.call(this);var s=e.flv,c=e.options;if(o.avcPacketType=r[0],1===o.avcPacketType){var u=16777215&o.readUint32(r,0);o.cts=u<<8>>8}else o.cts=0;if(o.dts=i,o.pts=o.dts+o.cts,o.payload=r.subarray(4),0===o.avcPacketType)o.decoderConfigurationRecord=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=1+(3&e[4]),o=[],s=[],c=5,u=31&e[c];if(0===u)m.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No SPS");else if(u>0){u>1&&m.a.warn("Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(u)),c++;for(var d=0;d<u;d++){var l=e[c]<<8|e[c+1];c+=2,s.push(e.subarray(c,c+l)),c+=l}}var f=e[c];if(0===f)m.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No PPS");else if(f>0){f>1&&m.a.warn("Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(f)),c++;for(var h=0;h<f;h++){var p=e[c]<<8|e[c+1];c+=2,o.push(e.subarray(c,c+p)),c+=p}}return{version:t,profile:n,profileCompatibility:r,level:i,naluSizeLength:a,spsNalus:s,ppsNalus:o}}(o.payload),s.decoderConfigurationRecord=o.decoderConfigurationRecord;else if(c.decodeCodec){o.naluList=[];var d={pts:o.pts,dts:o.dts,payload:o.payload};if(!o.decoderConfigurationRecord){s.decoderConfigurationRecord&&(d.naluSizeLength=s.decoderConfigurationRecord.naluSizeLength),X.push(d);for(var l=0;l<J.length;l++)o.naluList.push(J[l]);J.splice(0,J.length)}}return o}return n}(q.a);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.AVC=7]="AVC"}(ee||(ee={}));var re=function(e){h()(n,e);var t=ne(n);function n(e,r,i){var o;switch(a()(this,n),(o=t.call(this)).frameType=r[0]>>4&15,o.isKeyframe=1===o.frameType,o.codecId=15&r[0],o.codecId){case ee.AVC:o.videoData=new te(e,r.subarray(1),i);break;default:m.a.error("flv tag videoData encounter unknown codecId ".concat(o.codecId))}return o}return n}(q.a);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var ae=function(e){h()(n,e);var t=ie(n);function n(e,r){var i,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(i=t.call(this)).flv_=r,i.options_=o,i.pipeCtx={ctx:e,flv:r,options:o},i}return s()(n,[{key:"push",value:function(e){switch(e.tagType){case 18:this.parseScriptData_(e.payload);break;case 9:this.parseVideoData_(e);break;case 8:this.parseAudioData_(e);break;default:m.a.error("still not supported flv tag type ".concat(e.tagType))}}},{key:"flush",value:function(){this.emit("done")}},{key:"reset",value:function(){this.emit("reset")}},{key:"parseScriptData_",value:function(e){var t=this.flv_,n=function(e){var t={},n=B(e);return t[n.key]=n.value,t}(e);t.emit("data",Object.assign({type:"tag",tagType:18},n))}},{key:"parseVideoData_",value:function(e){var t=this.flv_,n=new re(this.pipeCtx,e.payload,e.timestamp),r=Object.assign({type:"tag",tagType:9,timestamp:e.timestamp},n);t.emit("data",r)}},{key:"parseAudioData_",value:function(e){var t=this.flv_,n=new $(e.payload,e.timestamp),r=n.soundData;r.audioSpecificConfig&&(t.audioSpecificConfig=r.audioSpecificConfig);var i=Object.assign({type:"tag",tagType:8,timestamp:e.timestamp},n);t.emit("data",i)}}]),n}(D.a);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var se=function(e){h()(n,e);var t=oe(n);function n(e){var r;return a()(this,n),(r=t.call(this)).signature=String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2]),r.version=e[3],r.hasAudio=(4&e[4])>>>2==1,r.hasVideo=1==(1&e[4]),r.offset=r.readUint32(e,5),r}return s()(n,[{key:"valid",value:function(){return"FLV"===this.signature}}]),n}(q.a);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var ue=function(e){h()(n,e);var t=ce(n);function n(e){var i,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return a()(this,n),(i=t.call(this,e,o)).cache_buffer_=new A.a,i.flv_=new W,i.flv_.stage=r.HEAD,i.body_=new N(i.ctx_,i.flv_,o),i.tags_=new ae(i.ctx_,i.flv_,o),i.pipe(i.body_),i.body_.pipe(i.tags_),i}return s()(n,[{key:"endStream",get:function(){return this.flv_}},{key:"push",value:function(e){var t=this.ctx_,i=this.flv_,a=this.cache_buffer_,o=l()(g()(n.prototype),"constraintPushData_",this).call(this,e),s=this.cache_buffer_.byteLength;m.a.log("flv demux received ".concat(o.byteLength," bytes, cache ").concat(s," bytes."));var c=t.config;for(Object(x.g)(c.offsetPos)&&(i.pos=c.offsetPos),a.append(o),i.pos<9?i.stage=r.HEAD:i.stage=r.BODY;;)if(i.stage===r.HEAD){if(!(a.byteLength>=9))break;var u=a.cut(9),d=new se(u);if(!d.valid()){t.fireErr(E.a.MUX_FLV_HEAD_SIGNATURE);break}i.emit("data",{type:"head",signature:d.signature,version:d.version,hasAudio:d.hasAudio,hasVideo:d.hasVideo,offset:d.offset}),i.stage=r.BODY,i.pos=9}else if(i.stage===r.BODY){if(a.byteLength>=4){var f=a.byteLength,h=a.bytes;a.clear(),h&&this.emit("data",h),i.pos+=f}break}c.done&&(this.reset(),i.emit("done"))}},{key:"reset",value:function(){var e=this.body_,t=this.tags_,n=this.flv_,i=this.cache_buffer_;n.stage=r.HEAD,n.pos=0,i.clear(),e.reset(),t.reset()}}]),n}(I.a),de=n(660),le=n(288),fe=n(195),he=function me(){a()(this,me)};function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var _e=function(e){h()(n,e);var t=pe(n);function n(){var e;return a()(this,n),(e=t.call(this,[ue,{decodeCodec:!0}],de.a)).headerCodec=new P.a,e._offsetTime=0,e.demuxer.endStream.on("data",(function(t){e.isHeader?e.handleHeader_(t):e.handleFrames_(t)})).on("done",(function(){e.isHeader?(e.headerDone=!0,e.checkHeader_()):e.handleDataDone_()})).on("error",(function(e){})),e.headerCodec.on("nalu",(function(t){7===t.unit_type?(e.box.sps=!0,e.box.vc.spsnalu=t,e.box.vc.pixelRatio=t.sps.pixelRatio):8===t.unit_type&&(e.box.pps=!0,e.box.vc.ppsnalu=t),e.checkHeader_()})),e}return s()(n,[{key:"push",value:function(e,t){var r=t.offsetPos;"number"!=typeof r||isNaN(r)||r<0||(t.meta.header?(this.box=new he,this.box.meta=t.meta,this.isHeader=!0):(this.faConfig=t.meta.vac.ac,this.fvConfig=t.meta.vac.vc,"number"==typeof t.meta.offset&&t.meta.offset>=0?this._offsetTime=1e3*t.meta.offset:this._offsetTime=0,this.isHeader=!1,this.currentFrame=[],this.newGops_()),l()(g()(n.prototype),"push",this).call(this,e,t))}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0,this.newGop_()}},{key:"handleHeader_",value:function(e){if("head"===e.type)this.box.hasAudio=e.hasAudio,this.box.hasVideo=e.hasVideo;else if("tag"===e.type)switch(e.tagType){case 18:this.updateScript_(e);break;case 8:this.box.ac||this.updateAudio_(e);break;case 9:this.box.vc||this.updateVideo_(e)}}},{key:"handleFrames_",value:function(e){switch(e.tagType){case 8:this.appendAudio_(e);break;case 9:this.appendVideo_(e)}}},{key:"appendVideo_",value:function(e){var t=this;e.videoData.naluList.forEach((function(e){var n=t.currentFrame||[];0===n.length?(n.keyframe=!1,n.duration=0,n.byteLength=e.rawData.byteLength,n.naluCount=1):(n.naluCount++,n.byteLength+=e.rawData.byteLength),n.pts=90*(e.pts+t._offsetTime),n.dts=90*(e.dts+t._offsetTime),t.gop&&0===t.gop.length&&e.unit_type,5===e.unit_type&&(n.keyframe=!0),n.push(e)})),this.pushFrameIntoGop_()}},{key:"appendAudio_",value:function(e){var t=e.soundData,n=Object(fe.a)({},this.faConfig);if(n.data=t.payload,n.dts=90*(t.dts+this._offsetTime),n.pts=90*(t.pts+this._offsetTime),null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var r=Object(S.a)(n.audioObjectType,n.samplingFrequencyIndex,n.channelCount);this.audioTrack.config=r.config,this.audioTrack.sampleRate=r.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=r.sampleRate,this.audioTrack.channelCount=r.channelCount,this.audioTrack.codec=r.codec,this.audioTrack.realCodec=r.realCodec}this.audioTrack.frames.push(n),this.audioTrack.frames.byteLength+=t.payload.byteLength}},{key:"updateScript_",value:function(e){var t=e.onMetaData;this.box.duration=t.duration,this.box.filesize=t.filesize,this.box.height=t.height,this.box.keyframePositions=t.keyframes.filepositions,this.box.keyframeTimes=t.keyframes.times,this.box.width=t.width}},{key:"updateAudio_",value:function(e){var t=e.soundData,n=t.audioSpecificConfig;this.box.ac={audioObjectType:n.audioObjectType,channelCount:n.channelConfiguration,dts:t.dts,pts:t.pts,sampleCount:1024,sampleRate:n.sampleRate,sampleSize:e.sampleSize,samplingFrequencyIndex:n.samplingFrequencyIndex,type:"audio"}}},{key:"updateVideo_",value:function(e){var t=e.videoData,n=t.decoderConfigurationRecord;this.box.naluSizeLength=n.naluSizeLength,this.box.vc={height:0,levelIdc:0,pixelRatio:[],pps:[],profileCompatibility:0,profileIdc:0,sps:[],width:0};var r=this.box.vc,i=function(e){var t=function(e){var t=[];if(e>0)for(;e;)t.unshift(255&e),e>>=8;else t.push(0);return t}(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),{naluSizeLength:t.length,payload:n}};n.ppsNalus&&(r.pps=n.ppsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},i(r.pps[0])))),n.spsNalus&&(r.sps=n.spsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},i(r.sps[0])))),r.profileIdc=n.profile,r.profileCompatibility,n.profileCompatibility,r.levelIdc=n.level,r.width=this.box.width,r.height=this.box.height}},{key:"checkHeader_",value:function(){this.box.pps&&this.box.sps&&this.headerDone&&this.isHeader&&(this.demuxer.emit("demux_info",{type:"head",data:this.box}),this.headerDone=!1,this.isHeader=!1)}},{key:"handleDataDone_",value:function(){if(this.gop&&this.gop.length>0){var e=this.gop[0],t={id:256,type:"video",timescale:9e4,duration:Number.POSITIVE_INFINITY,gops:[],firstDTS:0,firstPTS:0,codec:"",stream_type:15,constainer:"video/mp4",baseMediaDecodeTime:Math.max(e.pts,0)};this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),t.gops=this.gops,t.firstDTS=e.dts,t.firstPTS=e.pts;var n=Object(w.a)(this.fvConfig.spsnalu.sps);t.codec=n.codec,Object(fe.a)(t,this.fvConfig),this.audioTrack&&this.audioTrack.frames.length>0&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts,this.audioTrack.baseMediaDecodeTime=Math.max(this.audioTrack.firstDTS,0)),this.remuxer.push({videoTrack:t,audioTrack:this.audioTrack}),this.audioTrack=null}}},{key:"pushFrameIntoGop_",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=[]}}]),n}(le.a),ve=n(417);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var ye=function(e){h()(n,e);var t=ge(n);function n(e){var r;a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:ve,watch:["loader","mux"],transmuxer:"FLV_FMP4"}))).$TAG="FlvMux",r.seekingOnceChecked_=!1;var i=u()(r),o=i.$stream,s=i.$videoMediaStartTimes_,c=i.$transmuxer,d=i.$eventManager,l=o.restrictor;return d.on(c,"E",(function(e){r.$throwError(Object(T.a)(e.code,e.message))})).on(c,"I",(function(){r.tryPush_()})).on(c,"DI",(function(e){"head"===e.type&&r.$ipc.emit("headerComplete",e.data)})).on(c,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var c=new b.a("video"===t?1:2);c.bytesArray=o,c.trackId=a,c.container=n,c.codec=i,"video"===t?l.videoInitSegment=c:"audio"===t&&(l.audioInitSegment=c),r.tryProvideArtefact_()}break;case"fragment":var u,d=e.contentType,f=e.data,h=e.duration,p=e.startDTS,_=e.startPTS;e.nextSegmentPTS;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(d,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(_.toFixed(3),"/").concat((_+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void m.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===d?((u=new k.a(1)).bytesArray=f,u.startTime=p,u.duration=h,s.push(u.startTime),l.videoMediaSegments.push(u)):"audio"===d&&((u=new k.a(2)).bytesArray=f,u.startTime=_,u.duration=h,l.audioMediaSegments.push(u)),r.tryProvideArtefact_()}})).on(c,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r.$ipc.on("flvHeader",(function(e){c.push(e.bytes,{done:!0,meta:e.meta,offsetPos:0})})),r}return s()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e=this.$krt,t=this.$stream,n=this.$transmuxer,r=this.$loaderArtifact,i=this.$selfArtifact,a=t.restrictor,o=t.renderer;if(!Object(x.c)(r)&&Object(x.c)(i)&&this.$canConsumeLoaderData()){var s=r.data,c=r.meta,u=c.fragKey,d=c.byteOffset,l=0;if(a.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||u==this.$currentDataMeta.fragKey)||(a.needSendInitSegment=!0,a.videoInitSegment=a.audioInitSegment=null),this.$currentDataMeta=c,!e.conf.alwaysSeekKeyframe){var f=o.currentTimeRange,h=o.currentTime;l=(f?f.end:h)||0}n.push(s,{done:!0,stubTime:l,resetInitSegment:a.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:c,offsetPos:d}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(x.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):m.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){l()(g()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(y.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return H})),n.d(t,"a",(function(){return Y}));n(9);var r,i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=n(39),u=n.n(c),d=n(40),l=n.n(d),f=n(5),h=n.n(f),p=n(6),_=n.n(p),v=n(1),g=n.n(v),y=(n(126),n(27),n(116),n(84),n(576)),m=n(49),b=n(655),k=n(656),x=n(164),T=n(654),S=(n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54),n(115),n(147),n(87),n(25),n(132),n(45),n(400)),P=n(231),w=n(348),I=n(402),A=n(267),E=n(651),D=n(661),q=n(657);!function(e){e[e.HEAD=0]="HEAD",e[e.BODY=1]="BODY"}(r||(r={}));var O,R,L=n(137);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.AAC=10]="AAC"}(O||(O={})),function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(R||(R={}));var M=function(e){h()(n,e);var t=C(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).pos=0,e}return n}(L.a);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var B=function(e){h()(n,e);var t=N(n);function n(e){var i,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return a()(this,n),(i=t.call(this,e,o)).mp4_=new M,i.cache_buffer_=new E.a,i.mp4_.stage=r.HEAD,i}return s()(n,[{key:"endStream",get:function(){return this}},{key:"push",value:function(e){var t=this.ctx_,r=(this.mp4_,this.cache_buffer_,l()(g()(n.prototype),"constraintPushData_",this).call(this,e)),i=t.config;m.a.log("mp4 demux received ".concat(r.byteLength," bytes.")),0===i.offsetPos?this._analyzeHeader(r):this.emit("data",e),i.done&&(this.reset(),this.emit("done"))}},{key:"_analyzeHeader",value:function(e){var t=new Uint8Array(e),n=D.a.mp4toJSON(t),r=Object(q.a)(n);this.emit("data",r)}}]),n}(A.a),F=n(660),U=n(288),j=n(195);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var H=function(e){h()(n,e);var t=V(n);function n(){var e;return a()(this,n),(e=t.call(this,[B,{decodeCodec:!0}],F.a)).headerCodec=new P.a,e.avcCodec=new P.a,e.offsetTime_=0,e.videoSampleList=[],e.audioSampleList=[],e.videoChunkList=[],e.audioChunkList=[],e.headerObj={hasVideo:!1,hasAudio:!1,f:null,ac:{},vc:{},sps:null,pps:null,spsNalu:null,ppsNalu:null,keyframeTimes:[],keyframePositions:[],naluSizeLength:0,duration:0,filesize:0,meta:null},e.demuxer.endStream.on("data",(function(t){e.isHeader?e.handleHeader_(t):e.handleMdat_(t)})).on("done",(function(){e.isHeader?e.checkHeader_():e.handleDataDone_()})).on("error",(function(e){})),e.headerCodec.on("nalu",(function(t){7===t.unit_type?(e.headerObj.spsNalu=t,e.headerObj.vc.pixelRatio=t.sps.pixelRatio,e.headerObj.vc.sps=[t.rawData]):8===t.unit_type&&(e.headerObj.ppsNalu=t,e.headerObj.vc.pps=[t.rawData]),e.checkHeader_()})),e.avcCodec.on("nalu",(function(t){5!==t.unit_type&&1!==t.unit_type||e._appendToFrame(t)})).on("done",(function(){e._pushFrameIntoGop()})),e}return s()(n,[{key:"push",value:function(e,t){var r=t.offsetPos,i=t.meta;"number"!=typeof r||isNaN(r)||r<0||(i.header?(this.isHeader=!0,this.headerObj.meta=i):(this.isHeader=!1,"number"==typeof i.offset&&i.offset>=0?this.offsetTime_=1e3*i.offset:this.offsetTime_=0,this.currentFrame=[],this.newGops_()),l()(g()(n.prototype),"push",this).call(this,e,t))}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0,this.newGop_()}},{key:"handleHeader_",value:function(e){this.makeVideoTrack_(e.videTrack),this.makeAudioTrack_(e.sounTrack);for(var t={},n=e.videTrack.avc1.config,r=0;r<n.length;r++)if("avcC"===n[r].type)switch(t.sps=n[r].sps[0],t.pps=n[r].pps[0],n[r].lengthSizeMinusOne){case 0:this.headerObj.naluSizeLength=1;break;case 1:this.headerObj.naluSizeLength=2;break;case 2:this.headerObj.naluSizeLength=3;break;case 3:this.headerObj.naluSizeLength=4}if(this.videoSampleList.length>0){var i=function(e){var t=function(e){var t=[];if(e>0)for(;e;)t.unshift(255&e),e>>=8;else t.push(0);return t}(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),{naluSizeLength:t.length,payload:n}};this.headerCodec.push(Object.assign({pts:0,dts:0},i(t.pps))),this.headerCodec.push(Object.assign({pts:0,dts:0},i(t.sps)))}}},{key:"handleMdat_",value:function(e){var t,n=0,r=0,i=0,a=this.config.meta.byteOffset,o=null;for(t=e.byteLength;n<t;)(o=this.getSampleByPosition_(a+n))?(i=(r=o.sample.startPosition-a)+o.sample.size,"video"==o.type?this.avcCodec.push({pts:o.sample.pts,dts:o.sample.dts,naluSizeLength:this.headerObj.naluSizeLength,payload:e.subarray(r,i)}):"audio"==o.type&&this.handleAACData_({PTS:o.sample.pts,DTS:o.sample.dts,data_byte:e.subarray(r,i)}),n+=o.sample.size):n=t;o=null}},{key:"handleAACData_",value:function(e){var t=Object.assign(Object.assign({},this.headerObj.ac),{data:e.data_byte,dts:e.DTS,pts:e.PTS});if(null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var n=Object(S.a)(t.audioObjectType,t.samplingFrequencyIndex,t.channelCount);this.audioTrack.config=n.config,this.audioTrack.sampleRate=n.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=n.sampleRate,this.audioTrack.channelCount=n.channelCount,this.audioTrack.codec=n.codec,this.audioTrack.realCodec=n.realCodec}this.audioTrack.frames.push(t),this.audioTrack.frames.byteLength+=t.data.byteLength}},{key:"getSampleByPosition_",value:function(e){for(var t=0;t<this.videoSampleList.length;t++)if(e==this.videoSampleList[t].startPosition)return{type:"video",sample:this.videoSampleList[t]};for(var n=0;n<this.audioSampleList.length;n++)if(e==this.audioSampleList[n].startPosition)return{type:"audio",sample:this.audioSampleList[n]};return null}},{key:"_appendToFrame",value:function(e){this.currentFrame=this.currentFrame||[];var t=this.currentFrame;0===t.length?(t.keyframe=!1,t.duration=0,t.byteLength=e.rawData.byteLength,t.naluCount=1):(t.naluCount++,t.byteLength+=e.rawData.byteLength),t.pts=e.pts,t.dts=e.dts,5===e.unit_type&&(t.keyframe=!0),t.push(e)}},{key:"_parseSEI",value:function(e){for(var t=e.data,n=null,r=(t[1],3+t[2]+1),i=t.length;r<i;){var a=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],o=31&t[r+4];5!=o&&1!=o||(t=t.subarray(r+4,r+4+a),n=new w.a(t)),r+=4+a}return n}},{key:"_pushFrameIntoGop",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}Array.isArray(e)&&e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=null}},{key:"_pushGopIntoGroup",value:function(){this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop)}},{key:"makeVideoTrack_",value:function(e){e||m.a.error("can't discovery video box");var t=e.stsz.entries,n=e.stco.chunkOffsets,r=e.stsc.sampleToChunks,i=e.stts.timeToSamples,a=e.ctts?e.ctts.frameIndex:[],o=e.stss.frameIndex,s=0,c=0,u=0,d=0,l=0,f=0,h=0,p=0,_=0,v=0,g=0,y=0,b=0,k=n[0];for(c=0;c<t.length;c++){var x={};if(l<=c){for(var T=0;T<r.length;T++)u===r[T].firstChunk-1&&(d=T);l+=r[d].samplesPerChunk,k=n[u],u++}h<=c&&a.length>0&&(h+=a[f].sample_count,b=a[f].sample_offset,f++),v<=c&&(v+=i[_].sampleCount,s=i[_].sampleDelta/e.mdhd.timescale,g=i[_].sampleDelta,_++),x.index=c,x.startTime=s*c,x.size=t[c],x.startPosition=k,x.endPosition=k+t[c],x.dts=9e4*y/e.mdhd.timescale,x.pts=9e4*(y+b)/e.mdhd.timescale,this.videoSampleList.push(x),k+=t[c],y+=g}for(l=r[0].samplesPerChunk,c=0,u=0;u<n.length;u++){var S={};for(d=0;d<r.length;d++)if(u===r[d].firstChunk-1){l=r[d].samplesPerChunk;break}S.samplesLength=l,S.startSamples=c,S.endSamples=c+l,S.startPosition=n[u];for(var P=0,w=S.startSamples;w<S.endSamples;w++)P+=this.videoSampleList[w].size;S.size=P,c+=l,this.videoChunkList.push(S)}for(p=0;p<o.length;p++){var I=parseInt(o[p].index,10);this.headerObj.keyframeTimes.push(this.videoSampleList[I-1].startTime),this.headerObj.keyframePositions.push(this.videoSampleList[I-1].startPosition)}this.headerObj.hasVideo=!0,this.headerObj.duration=e.mdhd.duration/e.mdhd.timescale,this.headerObj.vc.trackId=e.tkhd.trackId,this.headerObj.vc.width=e.avc1.width,this.headerObj.vc.height=e.avc1.height}},{key:"makeAudioTrack_",value:function(e){e||m.a.error("mat can't discovery soun box");var t=e.stsz.entries,n=e.stco.chunkOffsets,r=e.stsc.sampleToChunks,i=e.stts.timeToSamples,a=0,o=0,s=0,c=0,u=0,d=0,l=0,f=0,h=0,p=n[0];for(o=0;o<t.length;o++){var _={};if(u<=o){for(var v=0;v<r.length;v++)s===r[v].firstChunk-1&&(c=v);u+=r[c].samplesPerChunk,p=n[s],s++}l<=o&&(l+=i[d].sampleCount,a=i[d].sampleDelta/e.mp4a.samplerate,f=i[d].sampleDelta,d++),_.index=o,_.startTime=a*o,_.size=t[o],_.startPosition=p,_.endPosition=p+t[o],_.pts=9e4*h/e.mp4a.samplerate,_.dts=9e4*h/e.mp4a.samplerate,this.audioSampleList.push(_),p+=t[o],h+=f}for(u=r[0].samplesPerChunk,o=0,s=0;s<n.length;s++){var g={};for(c=0;c<r.length;c++)if(s===r[c].firstChunk-1){u=r[c].samplesPerChunk;break}g.samplesLength=u,g.startSamples=o,g.endSamples=o+u,g.startPosition=n[s];for(var y=0,b=g.startSamples;b<g.endSamples;b++)y+=this.audioSampleList[b].size;g.size=y,o+=u,this.audioChunkList.push(g)}var k=e.mp4a.streamDescriptor.decoderConfig.decoderSpecificInfo,x=k.audioObjectType,T=k.channelConfiguration,S=k.samplingFrequencyIndex;this.headerObj.hasAudio=!0,this.headerObj.ac.trackId=e.tkhd.trackId,this.headerObj.ac.audioObjectType=x,this.headerObj.ac.channelCount=T,this.headerObj.ac.samplingFrequencyIndex=S,this.headerObj.ac.sampleSize=e.mp4a.samplesize,this.headerObj.ac.sampleRate=e.mp4a.samplerate,this.headerObj.ac.sampleCount=i[0].sampleDelta}},{key:"handleFrames_",value:function(e){}},{key:"appendVideo_",value:function(e){var t=this;e.videoData.naluList.forEach((function(e){var n=t.currentFrame||[];0===n.length?(n.keyframe=!1,n.duration=0,n.byteLength=e.rawData.byteLength,n.naluCount=1):(n.naluCount++,n.byteLength+=e.rawData.byteLength),n.pts=90*(e.pts+t.offsetTime_),n.dts=90*(e.dts+t.offsetTime_),t.gop&&0===t.gop.length&&e.unit_type,5===e.unit_type&&(n.keyframe=!0),n.push(e)})),this.pushFrameIntoGop_()}},{key:"appendAudio_",value:function(e){var t=e.soundData,n=Object(j.a)({},this.headerObj.ac);if(n.data=t.payload,n.dts=90*(t.dts+this.offsetTime_),n.pts=90*(t.pts+this.offsetTime_),null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var r=Object(S.a)(n.audioObjectType,n.samplingFrequencyIndex,n.channelCount);this.audioTrack.config=r.config,this.audioTrack.sampleRate=r.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=r.sampleRate,this.audioTrack.channelCount=r.channelCount,this.audioTrack.codec=r.codec,this.audioTrack.realCodec=r.realCodec}this.audioTrack.frames.push(n),this.audioTrack.frames.byteLength+=t.payload.byteLength}},{key:"checkHeader_",value:function(){this.headerObj.ppsNalu&&this.headerObj.spsNalu&&this.isHeader&&(this.demuxer.emit("demux_info",{type:"head",data:this.headerObj}),this.isHeader=!1)}},{key:"handleDataDone_",value:function(){if(this.gop&&this.gop.length>0){var e=this.gop[0],t={id:256,type:"video",timescale:9e4,duration:Number.POSITIVE_INFINITY,gops:[],firstDTS:0,firstPTS:0,codec:"",stream_type:15,constainer:"video/mp4",baseMediaDecodeTime:Math.max(e.pts,0)};this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),t.gops=this.gops,t.firstDTS=e.dts,t.firstPTS=e.pts;var n=Object(I.a)(this.headerObj.spsNalu.sps);t.codec=n.codec,Object(j.a)(t,this.headerObj.vc),this.audioTrack&&this.audioTrack.frames.length>0&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts,this.audioTrack.baseMediaDecodeTime=Math.max(this.audioTrack.firstDTS,0)),this.remuxer.push({videoTrack:t,audioTrack:this.audioTrack}),this.audioTrack=null}}},{key:"pushFrameIntoGop_",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=[]}}]),n}(U.a),W=n(418);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var Y=function(e){h()(n,e);var t=z(n);function n(e){var r;a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:W,watch:["loader","mux"],transmuxer:"MP4_FMP4"}))).$TAG="Mp4Mux",r.seekingOnceChecked_=!1;var i=u()(r),o=i.$stream,s=i.$videoMediaStartTimes_,c=i.$transmuxer,d=i.$eventManager,l=o.restrictor;return d.on(c,"E",(function(e){r.$throwError(Object(T.a)(e.code,e.message))})).on(c,"I",(function(){r.tryPush_()})).on(c,"DI",(function(e){"head"===e.type&&r.$ipc.emit("headerComplete",e.data)})).on(c,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var c=new b.a("video"===t?1:2);c.bytesArray=o,c.trackId=a,c.container=n,c.codec=i,"video"===t?l.videoInitSegment=c:"audio"===t&&(l.audioInitSegment=c),r.tryProvideArtefact_()}break;case"fragment":var u,d=e.contentType,f=e.data,h=e.duration,p=e.startDTS,_=e.startPTS;e.nextSegmentPTS;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(d,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(_.toFixed(3),"/").concat((_+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void m.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===d?((u=new k.a(1)).bytesArray=f,u.startTime=p,u.duration=h,s.push(u.startTime),l.videoMediaSegments.push(u)):"audio"===d&&((u=new k.a(2)).bytesArray=f,u.startTime=_,u.duration=h,l.audioMediaSegments.push(u)),r.tryProvideArtefact_()}})).on(c,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r.$ipc.on("mp4Header",(function(e){c.push(e.bytes,{done:!0,meta:e.meta,offsetPos:0})})),r}return s()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){this.$krt;var e=this.$stream,t=this.$transmuxer,n=this.$loaderArtifact,r=this.$selfArtifact,i=e.restrictor;e.renderer;if(!Object(x.c)(n)&&Object(x.c)(r)&&this.$canConsumeLoaderData()){var a=n.data,o=n.meta,s=o.fragKey,c=o.byteOffset;i.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||s==this.$currentDataMeta.fragKey)||(i.needSendInitSegment=!0,i.videoInitSegment=i.audioInitSegment=null),this.$currentDataMeta=o,t.push(a,{done:!0,stubTime:0,resetInitSegment:i.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:o,offsetPos:c}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(x.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):m.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){l()(g()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(y.a)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.IGNORABLE=0]="IGNORABLE",e[e.RECOVERABLE=1]="RECOVERABLE",e[e.CRITICAL=2]="CRITICAL"}(r||(r={}))},,function(e,t,n){var r=n(23),i=n(24),a=n(196),o=n(85).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!o||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!a((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,undefined).length}))},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,a=Math.log,o=Math.LN2;e.exports={pack:function(e,t,s){var c,u,d,l=new Array(s),f=8*s-t-1,h=(1<<f)-1,p=h>>1,_=23===t?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,g=0;for((e=n(e))!=e||e===Infinity?(u=e!=e?1:0,c=h):(c=i(a(e)/o),e*(d=r(2,-c))<1&&(c--,d*=2),(e+=c+p>=1?_/d:_*r(2,1-p))*d>=2&&(c++,d/=2),c+p>=h?(u=0,c=h):c+p>=1?(u=(e*d-1)*r(2,t),c+=p):(u=e*r(2,p-1)*r(2,t),c=0));t>=8;l[g++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;l[g++]=255&c,c/=256,f-=8);return l[--g]|=128*v,l},unpack:function(e,t){var n,i=e.length,a=8*i-t-1,o=(1<<a)-1,s=o>>1,c=a-7,u=i-1,d=e[u--],l=127&d;for(d>>=7;c>0;l=256*l+e[u],u--,c-=8);for(n=l&(1<<-c)-1,l>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===l)l=1-s;else{if(l===o)return n?NaN:d?-Infinity:Infinity;n+=r(2,t),l-=s}return(d?-1:1)*n*r(2,l-t)}}},function(e,t,n){var r=n(96);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(86),i=n(44),a=n(187),o=n(215),s=n(130),c=n(85).aTypedArrayConstructor;e.exports=function(e){var t,n,u,d,l,f,h=r(e),p=arguments.length,_=p>1?arguments[1]:undefined,v=_!==undefined,g=a(h);if(g!=undefined&&!o(g))for(f=(l=g.call(h)).next,h=[];!(d=f.call(l)).done;)h.push(d.value);for(v&&p>2&&(_=s(_,arguments[2],2)),n=i(h.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=v?_(h[t],t):h[t];return u}},function(e,t,n){"use strict";var r=n(86),i=n(128),a=n(44),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=a(n.length),c=i(e,s),u=i(t,s),d=arguments.length>2?arguments[2]:undefined,l=o((d===undefined?s:i(d,s))-u,s-c),f=1;for(u<c&&c<u+l&&(f=-1,u+=l-1,c+=l-1);l-- >0;)u in n?n[c]=n[u]:delete n[c],c+=f,u+=f;return n}},function(e,t,n){var r=n(85).aTypedArrayConstructor,i=n(142);e.exports=function(e,t){for(var n=i(e,e.constructor),a=0,o=t.length,s=new(r(n))(o);o>a;)s[a]=t[a++];return s}},,function(e,t,n){var r=n(48),i=n(52),a=n(170),o=n(200).UNSUPPORTED_Y;r&&("g"!=/./g.flags||o)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:a})},function(e,t,n){var r=n(98),i=n(131).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(r(e))}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=undefined;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(22),i=n(372).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,n){var r=n(48),i=n(168),a=n(98),o=n(199).f,s=function(e){return function(t){for(var n,s=a(t),c=i(s),u=c.length,d=0,l=[];u>d;)n=c[d++],r&&!o.call(s,n)||l.push(e?[n,s[n]]:s[n]);return l}};e.exports={entries:s(!0),values:s(!1)}},function(){},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(){},function(e,t,n){var r=n(22),i=n(24),a=n(86),o=n(189),s=n(276);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){var r=n(34),i=n(228);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},function(e,t,n){var r=n(201);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(33)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},function(e,t,n){"use strict";var r=2147483647,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",s=Math.floor,c=String.fromCharCode,u=function(e){return e+22+75*(e<26)},d=function(e,t,n){var r=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;r+=36)e=s(e/35);return s(r+36*e/(e+38))},l=function(e){var t,n,i=[],a=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,l=128,f=0,h=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(c(n));var p=i.length,_=p;for(p&&i.push("-");_<a;){var v=r;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<v&&(v=n);var g=_+1;if(v-l>s((r-f)/g))throw RangeError(o);for(f+=(v-l)*g,l=v,t=0;t<e.length;t++){if((n=e[t])<l&&++f>r)throw RangeError(o);if(n==l){for(var y=f,m=36;;m+=36){var b=m<=h?1:m>=h+26?26:m-h;if(y<b)break;var k=y-b,x=36-b;i.push(c(u(b+k%x))),y=s(k/x)}i.push(c(u(y))),h=d(f,g,_==p),f=0,++_}}++f,++l}return i.join("")};e.exports=function(e){var t,n,r=[],o=e.toLowerCase().replace(a,".").split(".");for(t=0;t<o.length;t++)n=o[t],r.push(i.test(n)?"xn--"+l(n):n);return r.join(".")}},function(e,t,n){"use strict";n(31);var r=n(22),i=n(105),a=n(305),o=n(83),s=n(190),c=n(134),u=n(275),d=n(107),l=n(157),f=n(53),h=n(130),p=n(165),_=n(34),v=n(41),g=n(125),y=n(123),m=n(382),b=n(187),k=n(33),x=i("fetch"),T=i("Headers"),S=k("iterator"),P="URLSearchParams",w="URLSearchParamsIterator",I=d.set,A=d.getterFor(P),E=d.getterFor(w),D=/\+/g,q=Array(4),O=function(e){return q[e-1]||(q[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},R=function(e){try{return decodeURIComponent(e)}catch(t){return e}},L=function(e){var t=e.replace(D," "),n=4;try{return decodeURIComponent(t)}catch(r){for(;n;)t=t.replace(O(n--),R);return t}},C=/[!'()~]|%20/g,M={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(e){return M[e]},B=function(e){return encodeURIComponent(e).replace(C,N)},F=function(e,t){if(t)for(var n,r,i=t.split("&"),a=0;a<i.length;)(n=i[a++]).length&&(r=n.split("="),e.push({key:L(r.shift()),value:L(r.join("="))}))},U=function(e){this.entries.length=0,F(this.entries,e)},j=function(e,t){if(e<t)throw TypeError("Not enough arguments")},V=u((function(e,t){I(this,{type:w,iterator:m(A(e).entries),kind:t})}),"Iterator",(function(){var e=E(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),H=function(){l(this,H,P);var e,t,n,r,i,a,o,s,c,u=arguments.length>0?arguments[0]:undefined,d=this,h=[];if(I(d,{type:P,entries:h,updateURL:function(){},updateSearchParams:U}),u!==undefined)if(v(u))if("function"==typeof(e=b(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((o=(a=(i=m(_(r.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:o.value+"",value:s.value+""})}else for(c in u)f(u,c)&&h.push({key:c,value:u[c]+""});else F(h,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},W=H.prototype;s(W,{append:function(e,t){j(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},"delete":function(e){j(arguments.length,1);for(var t=A(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){j(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){j(arguments.length,1);for(var t=A(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){j(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){j(arguments.length,1);for(var n,r=A(this),i=r.entries,a=!1,o=e+"",s=t+"",c=0;c<i.length;c++)(n=i[c]).key===o&&(a?i.splice(c--,1):(a=!0,n.value=s));a||i.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=A(this),i=r.entries,a=i.slice();for(i.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=A(this).entries,r=h(e,arguments.length>1?arguments[1]:undefined,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),o(W,S,W.entries),o(W,"toString",(function(){for(var e,t=A(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(B(e.key)+"="+B(e.value));return n.join("&")}),{enumerable:!0}),c(H,P),r({global:!0,forced:!a},{URLSearchParams:H}),a||"function"!=typeof x||"function"!=typeof T||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(v(t=arguments[1])&&(n=t.body,p(n)===P&&((r=t.headers?new T(t.headers):new T).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),x.apply(this,i)}}),e.exports={URLSearchParams:H,getState:A}},function(e,t,n){var r=n(34),i=n(187);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){"use strict";var r=n(161),i=n(34),a=n(95),o=n(384),s=n(162);r("search",1,(function(e,t,n){return[function(t){var n=a(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),c=String(this),u=a.lastIndex;o(u,0)||(a.lastIndex=0);var d=s(a,c);return o(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(266);var i={stringify:function(e,t,n){var i="";try{i=r.a.JSON.stringify(e,t,n)}catch(a){}return i},parse:function(e,t){return r.a.JSON?r.a.JSON.parse(e,t):null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(103),i=n.n(r);n(397),n(10),n(93),n(31),n(87);function a(e){return i()(new Set(e))}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LIB=1]="LIB",e[e.KERNEL=2]="KERNEL",e[e.NETWORK=3]="NETWORK",e[e.DRM=4]="DRM",e[e.TIMELINE=5]="TIMELINE",e[e.MANIFEST=6]="MANIFEST",e[e.LOADER=7]="LOADER",e[e.MUX=8]="MUX",e[e.AVCODEC=9]="AVCODEC",e[e.AVFORMAT=10]="AVFORMAT",e[e.RENDERER=11]="RENDERER",e[e.MAT=12]="MAT"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9);var r=n(2),i=n.n(r),a=n(5),o=n.n(a),s=n(6),c=n.n(s),u=n(1),d=n.n(u);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(e){o()(n,e);var t=l(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(n(242).a);f.DESTROYING="Destroying",f.DESTROYED="Destroying",f.STREAM_ENCRYPTED="StreamEncrypted",f.MSE_ATTACHING="MSEAttaching",f.MSE_ATTACHED="MSEAttached",f.MSE_DETACHING="MSEDetaching",f.MSE_DETACHED="MediaDetached",f.MEDIA_IDLE="MediaIdle",f.BUFFER_CREATED="BufferCreated",f.BUFFER_UPDATED="BufferUpdated",f.BUFFER_EXPECTING="BufferExpecting",f.BUFFER_APPENDING="BufferAppending",f.BUFFER_APPENDED="BufferAppended",f.BUFFER_FLUSHING="BufferFlushing",f.BUFFER_FLUSHED="BufferFlushed",f.MANIFEST_LOADED="ManifestLoaded",f.DATA_EOD="DataEOD",f.AUDIO_TRACK_SWITCHED_FAILED="TrackSwitchedFailed",f.AUDIO_TRACK_SWITCHED_SUCCESS="TrackSwitchedSuccess",f.FPS_REPORT="FpsReport",f.FPS_STUCK="FpsStuck",f.DNS_PARSER_SUCCESS="DNS_PARSER_SUCCESS"},,function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NET_UNSUPPORTED_SCHEME=1e3]="NET_UNSUPPORTED_SCHEME",e[e.NET_HTTPS_UNMATCHED_HTTP_SCHEME=1001]="NET_HTTPS_UNMATCHED_HTTP_SCHEME",e[e.MFT_FAILED_TO_PARSE_M3U8=2101]="MFT_FAILED_TO_PARSE_M3U8",e[e.MFT_FAILED_TO_PARSE_FLV=2102]="MFT_FAILED_TO_PARSE_FLV",e[e.MFT_FAILED_TO_PARSE_MPD=2103]="MFT_FAILED_TO_PARSE_MPD",e[e.MFT_FAILED_TO_PARSE_JDASH=2104]="MFT_FAILED_TO_PARSE_JDASH",e[e.MFT_FAILED_TO_PARSE_MPD_XML=2301]="MFT_FAILED_TO_PARSE_MPD_XML",e[e.MEDIA_VIDEO_ERROR=3e3]="MEDIA_VIDEO_ERROR",e[e.MEDIA_SOURCE_OPERATION_FAILED=3001]="MEDIA_SOURCE_OPERATION_FAILED",e[e.MEDIA_SOURCE_OPERATION_THREW=3002]="MEDIA_SOURCE_OPERATION_THREW",e[e.MEDIA_QUOTA_EXCEEDED=3003]="MEDIA_QUOTA_EXCEEDED",e[e.MEDIA_HIGH_BUFFER=3004]="MEDIA_HIGH_BUFFER",e[e.MEDIA_PIPELINE_ERROR_DECODE=3300]="MEDIA_PIPELINE_ERROR_DECODE",e[e.MEDIA_VIDEO_DECODE_ERROR=3301]="MEDIA_VIDEO_DECODE_ERROR",e[e.MEDIA_VDA_ERROR=3302]="MEDIA_VDA_ERROR",e[e.MEDIA_AUDIO_RENDERER_ERROR=3303]="MEDIA_AUDIO_RENDERER_ERROR",e[e.MEDIA_URL_SAFE_REJECTED=3401]="MEDIA_URL_SAFE_REJECTED",e[e.UNSUPPORTED_PLAY_RANGE=4e3]="UNSUPPORTED_PLAY_RANGE",e[e.DATA_AD_ERROR=4027]="DATA_AD_ERROR",e[e.DATA_P2P_DISPATCH=4100]="DATA_P2P_DISPATCH",e[e.DATA_P2P_LOAD=4101]="DATA_P2P_LOAD",e[e.DATA_P2P_LOAD_ACCESS=4102]="DATA_P2P_LOAD_ACCESS",e[e.DATA_P2P_MEMORY_ALLOC=4103]="DATA_P2P_MEMORY_ALLOC",e[e.DATA_P2P_DASH_BYTES_LENGTH=4104]="DATA_P2P_DASH_BYTES_LENGTH",e[e.DATA_P2P_AUTH=4105]="DATA_P2P_AUTH",e[e.DATA_P2P_RANGE_ERROR=4106]="DATA_P2P_RANGE_ERROR",e[e.DATA_P2P_DATA_NULL=4107]="DATA_P2P_DATA_NULL",e[e.DATA_HLS_DISPATCH_TIMEOUT=4200]="DATA_HLS_DISPATCH_TIMEOUT",e[e.DATA_HLS_DISPATCH_ERROR=4201]="DATA_HLS_DISPATCH_ERROR",e[e.DATA_HLS_CDN_TIMEOUT=4202]="DATA_HLS_CDN_TIMEOUT",e[e.DATA_HLS_CDN_ERROR=4203]="DATA_HLS_CDN_ERROR",e[e.DATA_AUTH_Error=4204]="DATA_AUTH_Error",e[e.DATA_FLV_TIMEOUT=4301]="DATA_FLV_TIMEOUT",e[e.DATA_FLV_ERROR=4302]="DATA_FLV_ERROR",e[e.DATA_FLV_DISPATCH_ERROR=4303]="DATA_FLV_DISPATCH_ERROR",e[e.DATA_DASH_TIMEOUT=4401]="DATA_DASH_TIMEOUT",e[e.DATA_DASH_ERROR=4402]="DATA_DASH_ERROR",e[e.DATA_DASH_DISPATCH_ERROR=4403]="DATA_DASH_DISPATCH_ERROR",e[e.DATA_DASH_RANGE_ERROR=4404]="DATA_DASH_RANGE_ERROR",e[e.DATA_MP4_DISPATCH_ERROR=4501]="DATA_MP4_DISPATCH_ERROR",e[e.DATA_MP4_DISPATCH_TIMEOUT=4502]="DATA_MP4_DISPATCH_TIMEOUT",e[e.DATA_MP4_CDN_TIMEOUT=4503]="DATA_MP4_CDN_TIMEOUT",e[e.DATA_MP4_CDN_ERROR=4504]="DATA_MP4_CDN_ERROR",e[e.DATA_AUDIO_LOADED_ERROR=4601]="DATA_AUDIO_LOADED_ERROR",e[e.DATA_AUDIO_LOADED_TIMEOUT=4602]="DATA_AUDIO_LOADED_TIMEOUT",e[e.MUX_UNKNOWN_FAILED=5e3]="MUX_UNKNOWN_FAILED",e[e.MUX_WORKER_INITIALIZE=5001]="MUX_WORKER_INITIALIZE",e[e.MUX_WORKER_INTERNAL_EXCEPTION=5002]="MUX_WORKER_INTERNAL_EXCEPTION",e[e.MUX_WORKER_MESSAGE_EXCEPTION=5003]="MUX_WORKER_MESSAGE_EXCEPTION",e[e.MUX_TS_SYNC_BYTE=5100]="MUX_TS_SYNC_BYTE",e[e.MUX_FLV_TAG_INVALID=5200]="MUX_FLV_TAG_INVALID",e[e.MUX_FLV_HEAD_SIGNATURE=5201]="MUX_FLV_HEAD_SIGNATURE",e[e.MUX_FLV_NOT_EXPECTED_ADJACENT_DATA=5202]="MUX_FLV_NOT_EXPECTED_ADJACENT_DATA",e[e.MUX_M4S_FTYP_INVALID=5300]="MUX_M4S_FTYP_INVALID",e[e.DRM_NO_RECOGNIZED_KEY_SYSTEMS=6e3]="DRM_NO_RECOGNIZED_KEY_SYSTEMS",e[e.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE=6001]="DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE",e[e.DRM_FAILED_TO_CREATE_CDM=6002]="DRM_FAILED_TO_CREATE_CDM",e[e.DRM_FAILED_TO_ATTACH_TO_VIDEO=6003]="DRM_FAILED_TO_ATTACH_TO_VIDEO",e[e.DRM_INVALID_SERVER_CERTIFICATE=6004]="DRM_INVALID_SERVER_CERTIFICATE",e[e.DRM_FAILED_TO_CREATE_SESSION=6005]="DRM_FAILED_TO_CREATE_SESSION",e[e.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST=6006]="DRM_FAILED_TO_GENERATE_LICENSE_REQUEST",e[e.DRM_LICENSE_REQUEST_ERROR=6007]="DRM_LICENSE_REQUEST_ERROR",e[e.DRM_LICENSE_REQUEST_TIMEOUT=6008]="DRM_LICENSE_REQUEST_TIMEOUT",e[e.DRM_NO_LICENSE_SERVER_RESPONSE=6009]="DRM_NO_LICENSE_SERVER_RESPONSE",e[e.DRM_LICENSE_RESPONSE_REJECTED=6010]="DRM_LICENSE_RESPONSE_REJECTED",e[e.DRM_NO_LICENSE_SERVER_GIVEN=6012]="DRM_NO_LICENSE_SERVER_GIVEN",e[e.DRM_NO_RECOGNIZED_ERROR=6013]="DRM_NO_RECOGNIZED_ERROR",e[e.DRM_SERVER_REJECT_BY_LICENSE_SDK=6015]="DRM_SERVER_REJECT_BY_LICENSE_SDK"}(r||(r={}))},,,,function(e,t,n){var r=n(23),i=n(130),a=Function.call;e.exports=function(e,t,n){return i(a,r[e].prototype[t],n)}},function(e,t,n){"use strict";var r=n(52).f,i=n(125),a=n(190),o=n(130),s=n(157),c=n(218),u=n(247),d=n(185),l=n(48),f=n(274).fastKey,h=n(107),p=h.set,_=h.getterFor;e.exports={getConstructor:function(e,t,n,u){var d=e((function(e,r){s(e,d,t),p(e,{type:t,index:i(null),first:undefined,last:undefined,size:0}),l||(e.size=0),r!=undefined&&c(r,e[u],{that:e,AS_ENTRIES:n})})),h=_(t),v=function(e,t,n){var r,i,a=h(e),o=g(e,t);return o?o.value=n:(a.last=o={index:i=f(t,!0),key:t,value:n,previous:r=a.last,next:undefined,removed:!1},a.first||(a.first=o),r&&(r.next=o),l?a.size++:e.size++,"F"!==i&&(a.index[i]=o)),e},g=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(d.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=undefined),delete t[n.index],n=n.next;e.first=e.last=undefined,l?e.size=0:this.size=0},"delete":function(e){var t=this,n=h(t),r=g(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),l?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=h(this),r=o(e,arguments.length>1?arguments[1]:undefined,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),a(d.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),l&&r(d.prototype,"size",{get:function(){return h(this).size}}),d},setStrong:function(e,t,n){var r=t+" Iterator",i=_(t),a=_(r);u(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:undefined})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=undefined,{value:undefined,done:!0})}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(19),n(143);var r={create:function(){return Math.ceil(1e16*Math.random()+(new Date).getTime()).toString(32)}}},function(e,t,n){"use strict";var r=n(345),i=n(395);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}}),i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(5),c=n.n(s),u=n(6),d=n.n(u),l=n(1),f=n.n(l),h=(n(27),n(99));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var _=function(e){c()(n,e);var t=p(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))}}]),n}(h.EventEmitter)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(37),i=n.n(r);n(229),n(607),n(172),n(30),n(17),n(10),n(19),n(143),n(140),n(106),n(155),n(264),n(27),n(132),n(45),n(120),n(47),n(121),n(261),n(93),n(31),n(87);function a(e){var t={};function n(r){try{if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};e[r].call(i.exports,i,i.exports,n),i.l=!0}catch(a){throw"__webpack_require__ failed ".concat(a.stack||a.message)}return i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i()(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r["default"]||r}var o="[\\.|\\-|\\+|\\w|/|@]+",s="\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function c(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(e,t,r){var i={};i[r]=[];var a=t.toString(),u=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return i;for(var d,l=u[1],f=new RegExp("(\\\\n|\\W)"+c(l)+s,"g");d=f.exec(a);)"dll-reference"!==d[3]&&i[r].push(d[3]);for(f=new RegExp("\\("+c(l)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+s,"g");d=f.exec(a);)e[d[2]]||(i[r].push(d[1]),e[d[2]]=n(d[1]).m),i[d[2]]=i[d[2]]||[],i[d[2]].push(d[4]);for(var h,p=Object.keys(i),_=0;_<p.length;_++)for(var v=0;v<i[p[_]].length;v++)h=i[p[_]][v],isNaN(1*h)||(i[p[_]][v]=1*i[p[_]][v]);return i}function d(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}function l(e,t){t=t||{};var r={main:n.m},i=t.all?{main:Object.keys(r.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};d(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],c=n[s].pop();if(i[s]=i[s]||{},!i[s][c]&&e[s][c]){i[s][c]=!0,r[s]=r[s]||[],r[s].push(c);for(var l=u(e,e[s][c],s),f=Object.keys(l),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(l[f[h]])}}return r}(r,e),o="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+r[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"}),c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),l=new window.Worker(c,t.worker||{});return l.objectURL=c,l}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(49),i=n(291),a=n(577);function o(e,t,n){var o,s,c=e;if(!(t>i.a.length-1))return a.a.FIREFOX?t>=6?(e=5,s=new Array(4),o=t-3):(e=2,s=new Array(2),o=t):a.b.android?(e=2,s=new Array(2),o=t):(e=5,s=new Array(4),t>=6?o=t-3:(1===n&&(e=2,s=new Array(2)),o=t)),s[0]=e<<3,s[0]|=(14&t)>>1,s[1]|=(1&t)<<7,s[1]|=n<<3,5===e&&(s[1]|=(14&o)>>1,s[2]=(1&o)<<7,s[2]|=8,s[3]=0),{config:s,sampleRate:i.a[t],channelCount:n,codec:"mp4a.40."+e,realCodec:"mp4a.40."+c};r.a.error("invalid sampling index:".concat(t))}},function(e,t,n){var r=n(22),i=n(85);r({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(19),n(143);function r(e){for(var t="avc1.",n=[e.profile_idc,e.profile_compatibility,e.level_idc],r=0;r<n.length;r++){var i=n[r].toString(16);i.length<2&&(i="0"+i),t+=i}return{codec:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(30),n(17),n(10),n(19),n(143),n(47),n(121),n(277),n(27);function r(e){var t,n,r,i=e.profile_compatibility,a=e.level_idc,o=e.profile_space,s=e.profile_idc,c=e.tier_flag,u=e.constraint_indicator_flags,d="";switch(o){case 0:d=""+s;break;case 1:d="A"+s;break;case 2:d+="B"+s;break;case 3:d+="C"+s}t=i.toString(16).replace(/0/gi,"").toUpperCase(),n=(0===c?"L":"H")+a;for(var l,f=[],h=u.length-1,p=!0;h>=0;h--)l=u[h],p&&0===l||(p=!1,f.push(l));return r=f.reverse().map((function(e){return e.toString(16).toUpperCase()})).join("."),{codec:"hvc1.".concat(d,".").concat(t,".").concat(n,".").concat(r)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54);function r(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=function(){function e(t){i()(this,e),this._id=null,this._frequency=Infinity,this._callback=function(){t()}}return o()(e,[{key:"running",get:function(){return null!==this._id}},{key:"stop",value:function(){this.running&&(cancelAnimationFrame(this._id),this._id=null)}},{key:"start",value:function(){var e=this;this.stop(),this._id=requestAnimationFrame((function(){e._callback(),e.start()}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(38),n(84);function r(){for(var e,t=[],n=0;n<arguments.length;n++){e=n<0||arguments.length<=n?undefined:arguments[n];for(var r,i=0;i<e.length;i++){r=e[i];var a=t.indexOf(r);-1===a?t.push(r):t.splice(a,1)}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(272),function(){function e(t){i()(this,e),this._id=null,this._frequency=Infinity,this._callback=function(){t()}}return o()(e,[{key:"running",get:function(){return null!==this._id}},{key:"cancel",value:function(){this.running&&(clearTimeout(this._id),this._id=null)}},{key:"schedule",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e),this._id=setTimeout((function(){t._callback()}),this._frequency)}},{key:"scheduleRepeated",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e);this._id=setTimeout((function n(){t._callback(),t.running&&(t._id=setTimeout(n,t._frequency))}),this._frequency)}},{key:"adjustFrequency",value:function(e){this._frequency=1e3*e}}]),e}())},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ERROR="ERROR",e.TIMEOUT="TIMEOUT",e.ABORT="ABORT"}(r||(r={}))},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";var r,i=n(22),a=n(109).f,o=n(44),s=n(378),c=n(95),u=n(379),d=n(135),l="".endsWith,f=Math.min,h=u("endsWith");i({target:"String",proto:!0,forced:!!(d||h||(r=a(String.prototype,"endsWith"),!r||r.writable))&&!h},{endsWith:function(e){var t=String(c(this));s(e);var n=arguments.length>1?arguments[1]:undefined,r=o(t.length),i=n===undefined?r:f(o(n),r),a=String(e);return l?l.call(t,a,i):t.slice(i-a.length,i)===a}})},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=new(n(578).a);function i(e){r.copyServices(e.cloneServices())}},function(e){e.exports=JSON.parse('{"name":"@mux/m2ts-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(49),i=n(112),a=n(291),o="AudioSpecificConfig";function s(e){var t=Object(i.c)(e,5);return 31==t&&(r.a.error("".concat(o," unsupported audioObjectType")),t=32+Object(i.c)(e,6)),t}function c(e){var t=0,n=Object(i.d)(e),c=s(n),u=Object(i.c)(n,4);if(15===u){r.a.error("".concat(o," unsupported samplingFrequencyIndex"));Object(i.c)(n,24,!0)}var d=Object(i.c)(n,4);if((d<0||d>=8)&&r.a.error("".concat(o," unsupported channel configuration")),5===c||29===c){if(t=5,1,29===c&&1,15==Object(i.c)(n,4))Object(i.c)(n,24);if(22==(c=s(n)))Object(i.c)(n,4)}var l=a.a[u];switch(c){case 1:case 2:case 3:case 4:case 6:case 7:case 17:case 19:case 20:case 21:case 22:case 23:!function(e,t,n,a){if(!(Object(i.b)(e)<2||(Object(i.a)(e),Object(i.a)(e)&&Object(i.b)(e)>=14&&Object(i.c)(e,14),Object(i.b)(e)<1))){var s=Object(i.a)(e);if(n||r.a.error("".concat(o," unsupported parse program_config_element")),6==a||20==a){if(Object(i.b)(e)<3)return;Object(i.e)(e,3)}s&&22==a&&Object(i.e)(e,16),17!=a&&19!=a&&20!=a&&23!=a||Object(i.e)(e,3),Object(i.b)(e)>=1&&Object(i.a)(e)&&r.a.error("".concat(o," unsupported extensionFlag3"))}}(n,0,d,c);break;default:r.a.warn("".concat(o," unsupported audioObjectType ").concat(c))}if(5!==t&&Object(i.b)(n)>=16){var f=Object(i.c)(n,11);if(695===f&&(t=s(n)),5===t&&1==Object(i.a)(n)){if(15===Object(i.c)(n,4))Object(i.c)(n,24);Object(i.b)(n)>=12&&1352==(f=Object(i.c)(n,11))&&Object(i.a)(n)}if(22===t&&1==Object(i.a)(n)){if(15==Object(i.c)(n,4))Object(i.c)(n,24);Object(i.b)(n)>=12&&1352==(f=Object(i.c)(n,11))&&Object(i.a)(n)}}return{audioObjectType:c,samplingFrequencyIndex:u,channelConfiguration:d,sampleRate:l}}},function(e){e.exports=JSON.parse('{"name":"@mux/flv-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@mux/mp4-fmp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"_args":[["@iqiyi-pcw-player/web-vod-p2p@1.0.91","/builds/pcw-player/pcw-player"]],"_from":"@iqiyi-pcw-player/web-vod-p2p@1.0.91","_id":"@iqiyi-pcw-player/web-vod-p2p@1.0.91","_inBundle":false,"_integrity":"sha1-psGsVlqmh+DukIeoCUXkbBV4INo=","_location":"/@iqiyi-pcw-player/web-vod-p2p","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@iqiyi-pcw-player/web-vod-p2p@1.0.91","name":"@iqiyi-pcw-player/web-vod-p2p","escapedName":"@iqiyi-pcw-player%2fweb-vod-p2p","scope":"@iqiyi-pcw-player","rawSpec":"1.0.91","saveSpec":null,"fetchSpec":"1.0.91"},"_requiredBy":["/@iqiyi-pcw-player/kiwi"],"_resolved":"http://jfrog.cloud.qiyi.domain:80/api/npm/npm/@iqiyi-pcw-player/web-vod-p2p/-/@iqiyi-pcw-player/web-vod-p2p-1.0.91.tgz","_spec":"1.0.91","_where":"/builds/pcw-player/pcw-player","author":{"name":"wangpeng"},"dependencies":{"js-base64":"^2.5.1","md5":"^2.2.1"},"description":"H5_VOD_DataProver_ABS for M3U8TS , DashMP4","devDependencies":{"@babel/core":"^7.6.0","@babel/polyfill":"^7.6.0","@babel/preset-env":"^7.6.0","@babel/preset-react":"^7.0.0","babel-core":"^7.0.0-bridge.0","babel-loader":"^8.0.6","babel-preset-env":"^1.7.0","babelify":"^7.3.0","browserify":"^13.1.1","browserify-derequire":"^0.9.4","browserify-versionify":"^1.0.6","clean-webpack-plugin":"^3.0.0","core-js":"^3.1.3","del":"^2.2.0","gulp":"^3.9.1","gulp-babel":"^7.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^2.4.1","gulp-uglify":"^2.1.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0","webpack":"^4.10.0","webpack-cli":"^3.3.9"},"keywords":["H5","ABS","VOD","MSE","M3U8","TS","MPD","DRM","dashmp4"],"license":"UNLICENSED","main":"./js/DataProvider.js","module ":"./js/DataProvider.js","name":"@iqiyi-pcw-player/web-vod-p2p","publishConfig":{"registry":"http://jfrog.cloud.qiyi.domain/api/npm/npm/"},"repository":{"type":"git","url":"http://gitlab.qiyi.domain/webp2p/H5_VOD_DP_ABS.git"},"scripts":{"build":"webpack","build-babel":"webpack --config webpack.config.babel.js --mode production"},"sideEffects":false,"version":"1.0.91"}')},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(38),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(80),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(57),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(58),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(60),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(61),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(62),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(63),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(64),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(65),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(66),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(67),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(68),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(69),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(70),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(71),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(72),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(73),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(74),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(75),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(76),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(77),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(78),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(79),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(31),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(54),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(140),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(30),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33__),_utils_Log__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(11),_RunTime__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(13),_PlayerState__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(97),_Config__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(16),_enum_EventType__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(108),_utils_Event__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(92),_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(12),_utils_Tools__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(21),mozResponseType="moz-chunked-arraybuffer",isSupportMoz=null,xhrStatusProgress="",XHRLoader=function(){function e(t,n){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,e),this.videoType=t,this.eventID=n}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(e,[{key:"load",value:function(e,t){if(this.tast=e,this.dataLen=0,this.loadType=t,this.loader=new XMLHttpRequest,null===isSupportMoz&&/firefox/gi.test(navigator.userAgent.toLowerCase())){try{this.loader.responseType=mozResponseType}catch(n){}isSupportMoz=this.loader.responseType===mozResponseType}if(isSupportMoz?this.loader.responseType=mozResponseType:(this.loader.responseType="arraybuffer",isSupportMoz=!1),this.taskList=[{start:this.tast.begin,end:this.tast.end}],isSupportMoz||(this.taskList=checkTask(this.tast.begin,this.tast.end,Math.min(Math.max(1024*this.tast.rate,32768),1048576),this.tast.segment.fileType)),0===this.taskList.length)return this.running=!1,void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done");_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"open"),this.check()}},{key:"close",value:function(){this.running=!1,this.loader&&this.loader.abort(),this.loader=null,this.cache&&delete this.cache}},{key:"loadStatus",value:function(e,t){if("Error"!==e&&t&&(this.tast.range={begin:this.range.start+this.base,end:this.range.start+this.base+t.byteLength},this.tast.data=t),"OK"===e){if(-1===this.range.end&&(this.range.end=this.range.start+this.base+t.byteLength),this.videoType===_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.TS);else if(this.videoType!==_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.FTS&&t.byteLength>this.range.end-this.range.start)return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("data is not right , need range "+this.range.start+"-"+this.range.end+" dataLen "+t.byteLength),void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",_PlayerState__WEBPACK_IMPORTED_MODULE_36__.a.LoaderState_dataRangeError);this.dataLen+=t.byteLength,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"progress"),this.base+=t.byteLength}else"done"===e?this.check():this.running&&(this.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",t))}},{key:"check",value:function(){if(this.taskList.length>0){this.range=this.taskList.shift();var e=this.tast.url;if(!isSupportMoz&&e.indexOf("start=")>0&&(e=changeURLArg(this.tast.url,this.range)),-1!==e.indexOf("start=")&&-1!==e.indexOf("end=")||(-1===e.indexOf("?")?-1!==this.range.end&&(e+="?start="+this.range.start+"&end="+this.range.end):-1!==this.range.end&&(e+="&start="+this.range.start+"&end="+this.range.end)),-1===e.indexOf("stauto")&&(e+="&stauto="+_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.absStatus),-1===e.indexOf("ori")&&(e+="&ori=pcw"+_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.platform),-1===e.indexOf("num"))e+="&num="+Date.now().toString();_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("[XHR Loader start ] "+this.range.start+" - "+this.range.end+" , "+e),this.running=!0,this.base=0,this.xhrLoad(e)}else this.running=!1,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done")}},{key:"xhrLoad",value:function(e){this.loader||(this.loader=new XMLHttpRequest,this.loader.responseType=isSupportMoz?mozResponseType:"arraybuffer");var t=0;for(this.cache=null;null===this.cache;)try{t++,this.cache=new Uint8Array(1048576)}catch(i){if(t>_Config__WEBPACK_IMPORTED_MODULE_37__.f)return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("FetchLoader catch Uint8Array err : "+i.message),void r("tryCatchError_oom")}this.readPos=0,this.dataPos=0;var n=this;xhrStatusProgress="",this.loader.onreadystatechange=function(){xhrStatusProgress+="readyState:"+n.loader.readyState+", status:"+n.loader.status+","},this.loader.onloadend=function(e){_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader onloadend ,"+isSupportMoz);var t=e.currentTarget,r=t.status,a=t.response,o="";try{n.loader.getAllResponseHeaders().indexOf("server-address")>=0?(o=n.loader.getResponseHeader("server-address"),_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.last_cdnIP=o):_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.last_cdnIP=""}catch(i){}if(_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader, serverIP : "+o+", domain: "+_utils_Tools__WEBPACK_IMPORTED_MODULE_41__.a.getPureIP(n.tast.url)+", responseUrl: "+n.loader.responseURL+", status: "+r),r>=200&&r<300){if(a){var s=new Uint8Array(a);if(s&&s.byteLength>0){if(n.dataPos+s.byteLength>n.cache.byteLength){for(var c=null,u=0;null===c;)try{u++,c=new Uint8Array(n.dataPos+s.byteLength)}catch(i){if(u>_Config__WEBPACK_IMPORTED_MODULE_37__.f){if(_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("FetchLoader catch newUint8Array err : "+i.message),null===n.loader)return;n.loadStatus("Error","statusErr_"+r)}}var d=n.cache.subarray(n.readPos);c.set(d,0),delete n.cache,n.dataPos=n.dataPos-n.readPos,n.readPos=0,n.cache=c}n.cache.set(s,n.dataPos),n.dataPos+=s.byteLength}}if(n.readPos<n.dataPos&&n.loadStatus("OK",n.cache.subarray(n.readPos,n.dataPos)),null===n.loader)return;n.close(),n.loadStatus("done")}else{if(null===n.loader)return;_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.warn("XHR Loader err , status progress, "+xhrStatusProgress),n.loadStatus("Error","statusErr_"+r)}},this.loader.onprogress=function(e){if(isSupportMoz){var t=e.target?e.target.response:null;if(t){var r=new Uint8Array(t);if(n.dataPos+r.byteLength>n.cache.byteLength){var i=new Uint8Array(n.dataPos+r.byteLength),a=n.cache.subarray(n.readPos);i.set(a,0),n.dataPos=n.dataPos-n.readPos,n.readPos=0,n.cache=i}n.cache.set(r,n.dataPos),n.dataPos+=r.byteLength}if(n.dataPos-n.readPos>=8192){var o=8192*Math.floor((n.dataPos-n.readPos)/8192);n.loadStatus("OK",n.cache.subarray(n.readPos,n.readPos+o)),n.readPos+=o}}};try{this.loader.open("GET",e,!0),this.loader.withCredentials=!1,this.loader.send()}catch(a){r("tryCatchError_"+a.message)}function r(e){arguments.length>1&&undefined;null!==n.loader&&(n.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+n.eventID,"Error",e))}}}]),e}();function checkTask(e,t,n,r){var i,a=_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.getBufferFunc(),o=0;o="m4s"===r?Math.min(a.buffered.video.len,a.buffered.audio.len):a.len,o*=1e3;for(var s=[],c=0;e<t;)o<1e3?(c=n,o+=1e3):o<2e3?(c=2*n,o+=2e3):o<3e3?(c=3*n,o+=3e3):o<4e3?(c=4*n,o+=4e3):o<5e3?(c=5*n,o+=5e3):o<6e3?(c=6*n,o+=6e3):o<7e3?(c=7*n,o+=7e3):o<8e3?(c=8*n,o+=8e3):(c=10*n,o+=1e4),e+c<t?(t-(i=e+c)<c/2&&(i=t),s.push({start:e,end:i}),e=i):(i=t,s.push({start:e,end:i}),e=i);return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader check list "+JSON.stringify(s)),s}function changeURLArg(url,range){var pattern1="start=([^&]*)",pattern2="end=([^&]*)",replaceText1="start="+range.start,replaceText2="end="+range.end;if(url.match(pattern1)||url.match(pattern2)){var tmp="/(start=)([^&]*)/gi";url=url.replace(eval(tmp),replaceText1);var tmp2="/(end=)([^&]*)/gi";return url=url.replace(eval(tmp2),replaceText2),url}}__webpack_exports__.a=XHRLoader},function(e,t,n){(function(n){var r;!function(n,i){e.exports=function(n){"use strict";var i,a=(n=n||{}).Base64,o="2.6.4",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(s),u=String.fromCharCode,d=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(l,d)},h=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[s.charAt(n>>>18),s.charAt(n>>>12&63),t>=2?"=":s.charAt(n>>>6&63),t>=1?"=":s.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,h)},_=function(e){return p(f(String(e)))},v=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?v(_(e)):_(e)},y=function(e){return g(e,!0)};n.Uint8Array&&(i=function(e,t){for(var n="",r=0,i=e.length;r<i;r+=3){var a=e[r],o=e[r+1],c=e[r+2],u=a<<16|o<<8|c;n+=s.charAt(u>>>18)+s.charAt(u>>>12&63)+(void 0!==o?s.charAt(u>>>6&63):"=")+(void 0!==c?s.charAt(63&u):"=")}return t?v(n):n});var m,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=function(e){return e.replace(b,k)},T=function(e){var t=e.length,n=t%4,r=(t>0?c[e.charAt(0)]<<18:0)|(t>1?c[e.charAt(1)]<<12:0)|(t>2?c[e.charAt(2)]<<6:0)|(t>3?c[e.charAt(3)]:0),i=[u(r>>>16),u(r>>>8&255),u(255&r)];return i.length-=[0,0,2,1][n],i.join("")},S=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,T)},P=function(e){return S(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(e){return x(S(e))},I=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(e){return w(I(e))};n.Uint8Array&&(m=function(e){return Uint8Array.from(P(I(e)),(function(e){return e.charCodeAt(0)}))});var E=function(){var e=n.Base64;return n.Base64=a,e};if(n.Base64={VERSION:o,atob:P,btoa:p,fromBase64:A,toBase64:g,utob:f,encode:g,encodeURI:y,btou:x,decode:A,noConflict:E,fromUint8Array:i,toUint8Array:m},"function"==typeof Object.defineProperty){var D=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",D((function(){return A(this)}))),Object.defineProperty(String.prototype,"toBase64",D((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",D((function(){return g(this,!0)})))}}n.Meteor&&(Base64=n.Base64);e.exports?e.exports.Base64=n.Base64:(r=function(){return n.Base64}.apply(t,[]))===undefined||(e.exports=r);return{Base64:n.Base64}}(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:this)}).call(this,n(224))},function(e){e.exports=JSON.parse('{"name":"@loader/p2p","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/jdash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@renderer/mse","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return XFactorManager}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(103),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(111),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(55),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(45),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(27),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(184),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(121),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__),XFactorManager=function(){function XFactorManager(e){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this,XFactorManager),this.globalVarList=e||[]}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(XFactorManager,[{key:"clear",value:function(){this.globalVarList=[]}},{key:"reset",value:function(e){this.globalVarList=e}},{key:"setXFactor",value:function(e,t){this.globalVarList.find((function(t){return t.name===e})).initValue=t}},{key:"getXFactor",value:function(e){return this.globalVarList.find((function(t){return t.name===e}))}},{key:"getXFactorValue",value:function(){return this.getXFactor()?parseInt(this.getXFactor().initValue,10):0}},{key:"isShowInteractElement",value:function(e){var t=this;return!0===(e||[]).some((function(e){return t._expressParse(e)}))?1:0}},{key:"isShowInteract",value:function(e){var t=this;return!0===(e||[]).some((function(e){return t._expressParse(e)}))?1:0}},{key:"getInteractActionSwitchInfo",value:function(e){var t=this;return(e||[]).find((function(e){return t._expressParse(e)}))}},{key:"getEndActionSwitchInfo",value:function(e){var t=this;return(e||[]).find((function(e){return t._expressParse(e)}))}},{key:"doAlgorithm",value:function doAlgorithm(algorithmList){var self=this;if(algorithmList&&0!=algorithmList.length)return algorithmList.forEach((function(exp){var pattern=/^([A-Za-z0-9]+)(=)([A-Za-z0-9]+)(\+|-)(\d*)/,_pattern$exec=pattern.exec(exp),_pattern$exec2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec,6),v1=_pattern$exec2[1],v2=_pattern$exec2[3],e=_pattern$exec2[4],n=_pattern$exec2[5],r2=self.getXFactorValue(v2),r1=eval("".concat(r2).concat(e).concat(parseInt(n,10)));self.setXFactor(v1,r1>0?r1:0)})),self.globalVarList}},{key:"_expressParse",value:function _expressParse(item){var self=this,express=item.express,expressType=item.expressType,expressPara=item.expressPara,expressParaValue=self.getXFactorValue(expressPara.trim()),__eval=function __eval(str){var pattern=/^([A-Za-z0-9]+)([><!]=?|=)(\d*)/,_pattern$exec3=pattern.exec(str),_pattern$exec4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec3,4),k=_pattern$exec4[1],s=_pattern$exec4[2],v=_pattern$exec4[3],x=self.getXFactorValue(k);return!0===eval("".concat(x).concat(s).concat(parseInt(v,10)))},__mathParse=function(e,t,n){var r;return(r=Math[e]).call.apply(r,[null].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t.split(",").map((function(e){return e.trim()})).map((function(e){return self.getXFactorValue(e)})))))==n};switch(expressType){case"min":case"max":return __mathParse.apply(void 0,[expressType].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(express),[expressParaValue]));case"condition":return express.split("&&").map(__eval).every((function(e){return!0===e}))}}}]),XFactorManager}()},function(e){e.exports=JSON.parse('{"name":"@cupid/mars","version":"7.7.0","description":"ad sdk for PCW","directories":{"example":"examples"},"scripts":{"clean":"rm -rf ../dist","dev":"webpack --inline --progress --mode development --config webpack.config.js --colors --watch","eslint":"./node_modules/.bin/eslint","lint":"npm run eslint core && npm run eslint view && echo \'perfect!\'","build":"yarn && npm run clean && npm run lint && webpack"},"author":"heke","devDependencies":{"@babel/core":"^7.4.3","@babel/plugin-transform-modules-commonjs":"^7.1.0","@babel/preset-env":"^7.4.3","babel-eslint":"^10.0.2","babel-loader":"^8.0.5","css-loader":"^2.1.1","eslint":"^6.0.1","less":"^3.9.0","less-loader":"^5.0.0","style-loader":"^0.23.1","webpack":"^4.29.6","webpack-cli":"^3.3.0","yarn":"^1.15.2"},"dependencies":{"html-loader":"^0.5.5","qr-code-with-logo":"^1.1.0"}}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(40),c=n.n(s),u=n(5),d=n.n(u),l=n(6),f=n.n(l),h=n(1),p=n.n(h),_=(n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54),n(84),n(164)),v=n(49),g=n(242),y=n(219),m=n(265),b=n(103),k=n.n(b),x=n(39),T=n.n(x),S=(n(172),n(27),n(30),n(17),n(19),n(143),n(261),n(93),n(87),n(132),n(45),n(272),n(116),n(284),n(341)),P=n(195),w=n(399),I=n(137),A=n(658),E=n(414),D=function(){function e(){i()(this,e),this.msg=null,this.repostCount=0}return o()(e,[{key:"clear",value:function(){this.msg=null,this.repostCount=0}}]),e}();function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var O=function(e){d()(n,e);var t=q(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this))._eventManager=new S.a,r._error=null,r._mux=null,r._w=null,r._idle=!0,r._dryRun=!0,r._workerSignal=new D,r._args={transmuxer:e,options:a},Object(P.a)(a,{debug:!1,enableWorker:!0},!1),r._onWorkerMessage=r._onWorkerMessage.bind(T()(r)),r._onWorkerError=r._onWorkerError.bind(T()(r)),r._initialize(),r}return o()(n,[{key:"error",get:function(){return this._error}},{key:"idle",get:function(){return this._idle},set:function(e){this._idle=e,e&&this.emit("I")}},{key:"_initialize",value:function(){var e,t,n=this,r=this._args,i=r.transmuxer,a=r.options,o=function(){e=n._mux=E.a.resolve(i)};if(this.idle=!1,a.enableWorker&&"undefined"!=typeof window.Worker)try{var s="".concat(i.toLowerCase().replace(/-/gi,"_"),"_").concat((new Date).getTime().toString(32).substring(3)),c=performance.now();v.a.log("spawn a worker thread ".concat(s)),(t=this._w=Object(w.a)(608,{worker:{name:s}})).__name__=s,t.initAt=c,t.addEventListener("message",this._onWorkerMessage),t.addEventListener("error",this._onWorkerError),t.addEventListener("messageerror",this._onWorkerMessageError),v.a.log("worker options ".concat(JSON.stringify(a))),this._postMessage(t,"__init__",{transmuxer:i,options:a})}catch(u){this._w&&URL.revokeObjectURL(this._w.objectURL),delete this._w,v.a.error("error while initializing mux-worker & fallback on mux-inline: ".concat(u.stack)),o()}else o();e&&([["__idle__",function(){n.idle=!0}],["error",function(e,t,r){return setTimeout((function(){return n._emitError(e,t,r)}),0)}],["demux_info",function(e){return setTimeout((function(){return n._emitDemuxInfo(e)}),0)}],["demux_data",function(e){return setTimeout((function(){return n._emitDemuxData(e)}),0)}],["remux_data",function(e){return setTimeout((function(){return n._emitRemuxData(e)}),0)}],["done",function(){return setTimeout((function(){return n._emitDone()}),0)}]].forEach((function(t){n._eventManager.on(e,t[0],t[1])})),this.idle=!0)}},{key:"_postMessage",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];v.a.log("mux send msg to ".concat(e.__name__," worker: ").concat(t)),this._workerSignal.msg=[e,t,n,r],e.postMessage({cmd:t,msg:n},r)}},{key:"_terminateWorker",value:function(){var e=this._w;e.removeEventListener("message",this._onWorkerMessage),e.removeEventListener("error",this._onWorkerError),e.removeEventListener("messageerror",this._onWorkerMessageError),e.terminate(),v.a.log("terminate a ".concat(e.__name__," worker thread"))}},{key:"push",value:function(e){var t,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this._w;if(Object(_.a)(e)||Object(_.k)(e))if(t=Object(_.a)(t)?new Uint8Array(t):e,v.a.log("mux push buf ".concat(Object(A.a)(t.byteLength),", stubTime ").concat(n.stubTime)),this._dryRun=!1,this.idle=!1,this.emit("P"),r){var i=[];this._postMessage(r,"push",{buf:t,conf:n},i)}else this._mux.push(t,n)}},{key:"reset",value:function(){if(this._error=null,!this._dryRun){var e=this._w;v.a.log("mux reset ".concat(e?"worker@"+e.__name__:"inline")),e?(this._workerSignal.clear(),this._postMessage(e,"reset")):this._mux.reset()}}},{key:"destroy",value:function(){this._w?(this._workerSignal.clear(),this._terminateWorker()):(this._mux.destroy(),this._eventManager.destroy()),this._error=null}},{key:"_onWorkerMessage",value:function(e){var t=e.data,n=e.target;if(null===t)this._handleACK(null);else{var r=t.cmd,i=t.msg;switch(r){case"__ACK__":this._handleACK(i);break;case"__init__":v.a.log("worker ".concat(n.__name__," initialized, cost ").concat((performance.now()-n.initAt).toFixed(3),"ms")),URL.revokeObjectURL(this._w.objectURL);break;case"__idle__":this.idle=!0;break;case"__log__":this._emitLog(i.type,i.message);break;case"error":this._emitError(i.code,i.message,i.data);break;case"demux_info":this._emitDemuxInfo(i);break;case"demux_data":this._emitDemuxData(i);break;case"remux_data":this._emitRemuxData(i);break;case"done":this._emitDone()}}}},{key:"_onWorkerError",value:function(e){var t=e.target||e.srcElement,n=t?t.__name__:"",r="worker ".concat(n," error, ").concat(e.message);v.a.warn(r),this._emitError(0,r)}},{key:"_onWorkerMessageError",value:function(e){var t="Worker met error while receiving message, ".concat(e);v.a.warn(t),this._emitError(1,t)}},{key:"_handleACK",value:function(e){if(e)this._workerSignal.clear();else if(v.a.warn("master thread received worker ack signal: ".concat(e)),this._workerSignal.msg)if(this._workerSignal.repostCount<10)this._workerSignal.repostCount++,v.a.warn("Repost the cache signal to worker at ".concat(this._workerSignal.repostCount," time")),this._postMessage.apply(this,k()(this._workerSignal.msg));else{var t="Worker ack message beyond repost count";v.a.warn(t),this._emitError(1,t)}}},{key:"_emitLog",value:function(e,t){v.a[e]&&v.a[e]("w: ".concat(t))}},{key:"_emitError",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this._error={code:e,message:t,data:n},this.emit("E",this._error)}},{key:"_emitDemuxInfo",value:function(e){this.emit("DI",e)}},{key:"_emitRemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("D",e)}},{key:"_emitDemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("DD",e)}},{key:"_emitDone",value:function(e){this.emit("O",e)}}]),n}(I.a);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var L=function(e){d()(n,e);var t=R(n);function n(e){var r;i()(this,n),(r=t.call(this,e)).$ARTEFACT_ACTION=y.a.DEPOSIT_MUX,r.$videoMediaStartTimes_=[];var a=e.transmuxer,o=e.enableWorker;return r.$transmuxer=new O(a,{enableWorker:"boolean"==typeof o?o:e.runtime.conf.muxWorker}),r.$eventManager.on(r.$transmuxer,"P",(function(){r.$noticeMuxAspect("swallow")})).on(r.$transmuxer,"D",(function(){r.$noticeMuxAspect("spit")})),r}return o()(n,[{key:"idle",get:function(){return this.$transmuxer.idle}},{key:"$canConsumeLoaderData",value:function(){return!this.$error&&this.$transmuxer.idle&&!this.$stream.restrictor.consumable}},{key:"$constraintPushData_",value:function(e){var t=null;return Object(_.a)(e)||Object(_.k)(e)?t=Object(_.a)(e)?new Uint8Array(e):e:t}},{key:"$drainBuffer",value:function(e){v.a.log("mux clear cached data");var t=this.$stream,r=this.$transmuxer,i=this.$videoMediaStartTimes_,a=t.restrictor,o=a.videoMediaSegments,s=a.audioMediaSegments;o.splice(0,o.length),s.splice(0,s.length),i.splice(0,i.length),r.reset(),e.keepMuxMeta||(this.$currentDataMeta=null),this.$loaderArtifact=null,this.$audioSegmentAlignPTS_=undefined,c()(p()(n.prototype),"$drainBuffer",this).call(this,e)}},{key:"$checkMuxMetaMatched",value:function(e,t){var n=!1;return t&&e?n=e.uid===t.uid:t===undefined&&e===undefined&&(n=!0),n}},{key:"reset",value:function(){}},{key:"$noticeMuxAspect",value:function(e){this.$krt.ctx.emit(g.a.STATE_CHANGE,{state:"mux"+e})}}]),n}(m.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));n(17),n(38),n(43),n(25);var r={mac:!1,iphone:!1,android:!1},i={version:undefined,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1},a=navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(a)||/(opr)[/]([\w.]+)/.exec(a)||/(chrome)[ /]([\w.]+)/.exec(a)||/(firefox)[ /]([\w.]+)/.exec(a)||/(iemobile)[/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(a)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(a)||/(webkit)[ /]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],s=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[],c={version:undefined},u={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",versionNumber:o[4]||o[2]||"0",platform:s[0]||""};if(u.browser){c[u.browser]=!0;var d=u.versionNumber.split(".");c.version={major:parseInt(u.versionNumber,10),string:u.version},d.length>1&&(c.version.minor=parseInt(d[1],10)),d.length>2&&(c.version.build=parseInt(d[2],10))}i.version=c.version,i.CHROME=!!c.chrome,i.SAFARI=!!c.safari&&!i.CHROME,i.FIREFOX=!!c.firefox,i.IE11=/rv:11/.test(a),i.IE=!!c.msie||i.IE11,i.EDGE=!!c.edge,i.WECHAT=/(wechat)|(micromessenger)/.test(a),r.mac=!!u.platform.mac,r.iphone=!!u.platform.iphone,r.android=!!u.platform.android},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(56),n(10),n(188),n(93),n(167),n(197),n(198),n(31),n(87),n(147);var r=n(350),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s),u=(n(214),n(38),n(195)),d=n(164),l=n(156);function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(){function e(){o()(this,e),this.services={}}return c()(e,[{key:"cloneServices",value:function(){return Object(u.a)({},this.services)}},{key:"copyServices",value:function(e){this.services=Object(u.a)({},e)}},{key:"register",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[],r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];if(Object(d.h)(e)){var i=e;if(Object(l.e)(this.services,i.name))return void 0;this.services[i.name]={name:i.name,className:i["class"],args:i.args,shared:i.shared,compiled:null}}else{if(Object(l.e)(this.services,e))throw new Error("Service '".concat(e,"' already exists"));if(!Object(d.d)(t))throw new Error("Parameter 'className' should be a class constructor");this.services[e]={name:e,className:t,args:n,shared:r,compiled:null}}}},{key:"registerMulti",value:function(){}},{key:"remove",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");delete this.services[e]}},{key:"has",value:function(e){return!("undefined"==typeof this.services[e])}},{key:"resolve",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");var t=this.services[e];if(t.shared&&null!==t.compiled)return t.compiled;var n=[];for(var r in t.args){var a=t.args[r],o=void 0;if("string"==typeof a)if(0===a.indexOf(":")){var s=a.substring(1);o=this.resolve(s)}else o=a;else o=a;n.push(o)}var c=i()(t.className,n);return t.shared&&(t.compiled=c),c}}]),e}()},function(e,t,n){n(282)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(282)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},,,,,,function(e,t,n){n(282)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},,,,,,,,,,,,,,function(e,t,n){var r=n(601);e.exports=r},function(e,t,n){n(17),n(43);var r=n(394);e.exports=r("String","split")},function(e,t,n){var r=n(603);e.exports=r},function(e,t,n){n(17),n(30);var r=n(394);e.exports=r("String","replace")},function(e,t,n){var r=n(605);e.exports=r},function(e,t,n){n(9);var r=n(216);e.exports=r.Reflect.construct},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){n(22)({target:"Object",stat:!0,sham:!n(48)},{create:n(125)})},function(e,t,n){"use strict";n.r(t);n(284),n(54),n(10),n(147),n(132),n(45),n(609);var r=n(341),i=n(49),a=n(351);t["default"]=function(e){var t,n=new r.a;function o(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];e.postMessage({cmd:t,msg:n},r)}e.addEventListener("message",(function(e){if(null===e.data)o("__ACK__",!1);else{var r=e.data,s=r.cmd,c=r.msg;switch(o("__ACK__",!0),s){case"__init__":try{var u=c.options,d=c.transmuxer;u.debug&&(i.a.enable=!0),t=a.a.resolve(d),n.on(i.a,i.a.MSG_NAME,(function(e,t){return o("__log__",{type:e,message:t})})).on(t,"__idle__",(function(){return o("__idle__")})).on(t,"error",(function(e,t,n){return o("error",{code:e,message:t,data:n})})).on(t,"demux_info",(function(e){return o("demux_info",e)})).on(t,"demux_data",(function(e){var t=[];e.data instanceof ArrayBuffer&&t.push(e.data),o("demux_data",e,t)})).on(t,"remux_data",(function(e){var t=[],n=e.data;Array.isArray(n)&&n.forEach((function(e){e instanceof ArrayBuffer&&t.push(e)})),o("remux_data",e,t)})).on(t,"done",(function(){return o("done")})),o("__init__"),o("__idle__")}catch(e){throw"worker __init__ fail ".concat(e.stack||e.message)}break;case"push":t.push(c.buf,c.conf);break;case"reset":t&&t.reset()}}}))}},function(e,t,n){var r=n(610);e.exports=r},function(e,t,n){n(611),n(9),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623);var r=n(216);e.exports=r.Reflect},function(e,t,n){var r=n(22),i=n(105),a=n(102),o=n(34),s=n(24),c=i("Reflect","apply"),u=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){c((function(){}))}))},{apply:function(e,t,n){return a(e),o(n),c?c(e,t,n):u.call(e,t,n)}})},function(e,t,n){var r=n(22),i=n(48),a=n(34),o=n(124),s=n(52);r({target:"Reflect",stat:!0,forced:n(24)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){a(e);var r=o(t,!0);a(n);try{return s.f(e,r,n),!0}catch(i){return!1}}})},function(e,t,n){var r=n(22),i=n(34),a=n(109).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=a(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var r=n(22),i=n(41),a=n(34),o=n(53),s=n(109),c=n(189);r({target:"Reflect",stat:!0},{get:function u(e,t){var n,r,d=arguments.length<3?e:arguments[2];return a(e)===d?e[t]:(n=s.f(e,t))?o(n,"value")?n.value:n.get===undefined?undefined:n.get.call(d):i(r=c(e))?u(r,t,d):void 0}})},function(e,t,n){var r=n(22),i=n(48),a=n(34),o=n(109);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o.f(a(e),t)}})},function(e,t,n){var r=n(22),i=n(34),a=n(189);r({target:"Reflect",stat:!0,sham:!n(276)},{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,n){n(22)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var r=n(22),i=n(34),a=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,n){n(22)({target:"Reflect",stat:!0},{ownKeys:n(222)})},function(e,t,n){var r=n(22),i=n(105),a=n(34);r({target:"Reflect",stat:!0,sham:!n(299)},{preventExtensions:function(e){a(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})},function(e,t,n){var r=n(22),i=n(34),a=n(41),o=n(53),s=n(24),c=n(52),u=n(109),d=n(189),l=n(123);r({target:"Reflect",stat:!0,forced:s((function(){var e=function(){},t=c.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function f(e,t,n){var r,s,h=arguments.length<4?e:arguments[3],p=u.f(i(e),t);if(!p){if(a(s=d(e)))return f(s,t,n,h);p=l(0)}if(o(p,"value")){if(!1===p.writable||!a(h))return!1;if(r=u.f(h,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,c.f(h,t,r)}else c.f(h,t,l(0,n));return!0}return p.set!==undefined&&(p.set.call(h,n),!0)}})},function(e,t,n){var r=n(22),i=n(34),a=n(237),o=n(173);o&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),a(t);try{return o(e,t),!0}catch(n){return!1}}})},function(e,t,n){var r=n(22),i=n(23),a=n(134);r({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},function(e,t,n){n(22)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?t.push(n.charAt(i>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(22),i=n(104).every;r({target:"Array",proto:!0,forced:!n(119)("every")},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},,,,,function(e,t,n){"use strict";n.r(t);n(9);var r,i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=n(39),u=n.n(c),d=n(5),l=n.n(d),f=n(6),h=n.n(f),p=n(1),_=n.n(p),v=(n(27),n(25),n(600),n(602),n(604),n(38),n(115),n(129),n(56),n(42)),g=(n(155),n(167),n(120),n(202),n(298),n(193)),y=n.n(g),m=n(40),b=n.n(m),k=(n(246),n(10),n(93),n(31),n(87),n(47),n(43),n(17),n(84),n(45),n(0)),x=n(171),T=function Mg(e,t,n,r,i,o,s,c,u,d,l,f,h,p){a()(this,Mg),this.vd=e,this.bid=x.a.getNewVd(e),this.vid=t,this.duration=r,this.vsize=i,this.realArea=o,this.isUsable=s,this.isLimit=c||!1,this.limitReason=u||[],this.fileFormat=n,this.playlist=d,this.drmType=l||1,this.watermark=f,this.dr=h,this.mver=parseInt(p,10)},S="1.1.90-15",P=n(49),w=n(46),I=n.n(w),A=n(29),E=n.n(A);n(132),n(94),n(272);!function(e){e.CLEARKEY="org.w3.clearkey",e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_CC="com.chromecast.playready"}(r||(r={}));var D,q,O,R=new Map;R.set("media",(D=['video/mp4; codecs="hvc1.1.6.L93.90"','video/webm; codecs="vp09.00.40.08"','video/webm; codecs="av01.0.08M.08"'],function(){return new Promise((function(e){var t={};MediaSource&&MediaSource.isTypeSupported&&D.forEach((function(e){try{t[e]=MediaSource.isTypeSupported(e);var n=e.split(";")[0];t[n]=t[n]||t[e]}catch(r){}})),e(t)}))})),R.set("drm",(q=[r.WIDEVINE,r.PLAYREADY],O=!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration),I()(E.a.mark((function Ng(){var e,t,n;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e={status:"fullfilled"},t=[],O&&(n=[{videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}]}],q.forEach((function(r){var i=new Promise((function(t){var i=setTimeout((function(){e.status="pending",a()}),1e3),a=function(){clearTimeout(i),t()};try{navigator.requestMediaKeySystemAccess(r,n).then((function(t){var n=t.getConfiguration().sessionTypes,i=!!n&&n.indexOf("persistent-license")>=0;e[r]={persistentState:i},a()}))["catch"]((function(){e[r]=null,a()}))}catch(o){a()}}));t.push(i)}))),r.abrupt("return",Promise.all(t).then((function(){return e})));case 4:case"end":return r.stop()}}),Ng)}))))),R.set("domParser",(function(){return new Promise((function(e){var t=!1;try{if(window.DOMParser)t=!!new DOMParser}catch(n){}e(t)}))}));var L,C=n(213),M=n.n(C),N=n(37),B=n.n(N);n(229),n(126);!function(e){e[e.P2P=0]="P2P",e[e.CDN=1]="CDN"}(L||(L={}));var F=n(281),U=n(242),j=n(219),V=n(265);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var W=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},z=function(e){l()(n,e);var t=H(n);function n(){return a()(this,n),t.apply(this,arguments)}return n}(function(){function e(){a()(this,e),this.start=0,this.end=0}return s()(e,[{key:"len",get:function(){return this.end-this.start}}]),e}()),Y=function(e){l()(n,e);var t=H(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).skipErrorMode_=!1,e.adjustTimestampMode_=!1,e.$ARTEFACT_ACTION=j.a.DEPOSIT_LOADER,e.chunkMode=!1,e.chunkDataDone=!0,e}return s()(n,[{key:"currentLoaderMode",get:function(){return L[this.mode]}},{key:"endOfDown",get:function(){return!!this.eod}},{key:"skipErrorMode",get:function(){return this.skipErrorMode_},set:function(e){this.skipErrorMode_=e}},{key:"adjustTimestampMode",get:function(){return this.adjustTimestampMode_},set:function(e){this.adjustTimestampMode_=e}},{key:"seek",value:function(e,t){this.$error=null,this.$krt.ctx.emit(U.a.STATE_CHANGE,{state:"loaderseek"})}},{key:"noticeDataPump",value:function(e){this.$krt.ctx.emit(U.a.STATE_CHANGE,{state:"loaderpump",data:e})}},{key:"recoverAt",value:function(e){b()(_()(n.prototype),"recoverAt",this).call(this,e),this.$stream.restrictor.needSendInitSegment=!0,this.seek(e)}}]),n}(V.a);W([F.c],Y.prototype,"currentLoaderMode",null),W([F.c],Y.prototype,"endOfDown",null);var G=n(407),Q=n(164),K=n(655),$=n(656),Z=(n(121),n(341)),X=n(396),J=n(195),ee=n(99),te=(n(172),n(30),n(114)),ne=n(259),re=n(659),ie=te.f+"//103.44.59.54/3e8",ae="access.if.iqiyi.com";function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var se=function(e){l()(n,e);var t=oe(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments))._ipProxy=new te.a,e._netProxy=new te.a,e._ipRetry=0,e._parserUrl="",e._domainName="",e._parsing=!1,e._parserReq=null,e._data=null,e._ipReq=null,e}return s()(n,[{key:"doRequest",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(e){var r={userInfo:t,idc:n,url:e,domainName:undefined},i=new re.a(r.url);r.domainName=i.domain;var a=/[a-z]/i.test(r.domainName);a?(this._parsing&&this.abort(),this._data=r,this._domainName=r.domainName,this._parsing=!0,this._request()):this.emit("success",{dmnm:r.domainName,ips:r.domainName,userinfo:r.userInfo,idc:r.idc})}}},{key:"abort",value:function(){this._parserReq&&this._parserReq.abort(),this._ipReq&&this._ipReq.abort(),this._parsing=!1,this._ipRetry=0,this._domainName="",this._data=null}},{key:"destroy",value:function(){this._parsing&&this.abort(),this._netProxy=null,this._parserReq&&(this._parserReq.destroy(),this._parserReq=null),this._ipProxy=null,this._ipReq&&(this._ipReq.destroy(),this._ipReq=null),this._parsing=!1,this._ipRetry=0,this._parserUrl="",this._domainName="",this._data=null}},{key:"_request",value:function(){var e=this;if(""!=e._parserUrl){e._parserUrl.indexOf("/3eb/")>-1&&(e._parserUrl=e._parserUrl.replace("/3eb/",""));var t=te.f+"//"+e._parserUrl+"/3f0/hd.cloud.iqiyi.com/d?dn="+this._domainName+"&business=pcwPlayer&cross-domain=1",n=ne.a.DISPATCH,r=Object(te.d)([t],{timeout:3e3,maxRetry:1});r.method="GET",r.responseType="text",r.callbacks={onSuccess:function(t){e._ipRetry=0,e.emit("success",{dmnm:e._domainName,ips:t.data,userinfo:e._data.userInfo,idc:e._data.idc}),e._parsing=!1,e._domainName=""},onError:function(){e._retryGetIpList()},onTimeout:function(){e._retryGetIpList()},onAbort:function(){},onComplete:function(){}},e._parserReq=e._netProxy.request(n,r)}else e._getIPList(e._request.bind(e))}},{key:"_getIPList",value:function(e){var t=this,n=ie;P.a.log("dnsParser getting ip by: ".concat(n));var r=ne.a.DISPATCH,i=Object(te.d)([n],{timeout:3e3,maxRetry:1});i.method="GET",i.responseType="text",i.callbacks={onSuccess:function(n){if(n&&n.data)if("string"==typeof n.data){var r=n.data.split(";");t._parserUrl=r[0]}else t._parserUrl=ae;else t._parserUrl=ae;e&&e()},onError:function(n){t._parserUrl=ae,e&&e()},onTimeout:function(n,r){t._parserUrl=ae,e&&e()},onAbort:function(){},onComplete:function(){}},t._ipReq=t._ipProxy.request(r,i)}},{key:"_retryGetIpList",value:function(){var e=this;this._ipRetry<1?(this._getIPList((function(){e._request()})),this._ipRetry++):this._parsing=!1}}]),n}(ee.EventEmitter),ce=n(388),ue=(n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(54),n(658));function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var le,fe=function(e){l()(n,e);var t=de(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return a()(this,n),(e=t.call(this))._config={maxBytesLength:104857600},e._pool={},e._byteLength=0,Object(J.a)(e._config,r),e}return s()(n,[{key:"keys",get:function(){return Object.keys(this._pool)}},{key:"size",get:function(){return this._byteLength}},{key:"humanSize",get:function(){return Object(ue.a)(this._byteLength)}},{key:"isSafe",get:function(){return this._byteLength<this._config.maxBytesLength}},{key:"add",value:function(e,t){this._config;var n,r=this._pool,i=r[e];i?((n=new Uint8Array(i.byteLength+t.byteLength)).set(i,0),n.set(t,i.byteLength)):n=t,this._byteLength+=t.byteLength,r[e]=n}},{key:"del",value:function(e){var t=this._pool,n=t[e];n&&(this._byteLength-=n.byteLength,t[e]=null,delete t[e])}},{key:"read",value:function(e){return this._pool[e]}},{key:"drain",value:function(){var e=this._pool;for(var t in e)this.del(t);0!==this._byteLength&&(this._pool={},this._byteLength=0)}}]),n}(ee.EventEmitter);!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.END=2]="END",e[e.ERROR=3]="ERROR"}(le||(le={}));var he=function Bg(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};a()(this,Bg),this.doRetry=!0,this.dispatch=!0,this.allowIPDispatch=!0,this.timeout=1e4,this.retryNum=2,this.ipMaxRetry=1,this.keyframesFusionSize=524288,Object(J.a)(this,e)};function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function _e(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,i=[],a=t.start(0)-n,o=t.end(t.length-1)+r;return e.forEach((function(e,t){var n=e.segments;n.length>0&&n.map((function(n,r,s){var c=n.startTime,u=n.startTime+n.duration;return n.enabled=(c>=a||u>a)&&(u<=o||c<o),n.fragIdx=t,n.fragKey=e.key,n.flattenIdx=i.length,i.push(n),n}))})),{fragments:e,segments:i}}var ve=function(e){l()(n,e);var t=pe(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).error=null,i.eof=!1,i.eod=!1,i.state_=le.IDLE,i.silenced_=!1,i.TAG="CdnLoader",i._eventManager=new Z.a,i._uuid=X.a.create(),i.tickTimer_=new G.a((function(){return i.ticker_()})),i._downFragBufferTimeLength=30,i._bufferPool=new fe,i._withBufferRetryCount=0,i._noBufferRetryCount=0,i.loaderBuff_=new z,i._loaderConfig=new he,i._dnsParser=new se,i.krt=e,i.ipc=r,i._ctx=e.ctx,i._cfg=e.conf,i._maxBufferTimeLength=i._cfg.maxBufferTimeLength,i._withBufferMaxRetry=i._cfg.loaderWithBufferMaxRetry,i._noBufferMaxRetry=i._cfg.loaderNoBufferMaxRetry,i._eventManager.on(i._dnsParser,ce.a.DNS_PARSER_SUCCESS,(function(e){i._ctx.emit(ce.a.DNS_PARSER_SUCCESS,e)})),i.tickTimer_.scheduleRepeated(i.silenced_?.5:.1),i}return s()(n,[{key:"silenced",set:function(e){this.silenced_=e,this.tickTimer_.adjustFrequency(this.silenced_?.5:.1)}},{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced_?"(silence)":"","]")}},{key:"loaderConfig",get:function(){return this._loaderConfig},set:function(e){Object(J.a)(this._loaderConfig,e)}},{key:"state",get:function(){return this.state_},set:function(e){if(this.state_!==e){var t=this.state;this.state_=e,P.a.log("".concat(this.LOG_TAG,": ").concat(le[t]," -> ").concat(le[e])),this.state_===le.END&&(this.eod=!0,P.a.log("".concat(this.LOG_TAG,": EOD")))}}},{key:"reset",value:function(){this._uuid=X.a.create(),this.eof=!1,this.eod=!1}},{key:"destroy",value:function(){this.ipc&&this.ipc.removeAllListeners(),this._eventManager.removeAll(),this._dnsParser.destroy(),this._bufferPool.drain(),this.tickTimer_.cancel(),delete this._ctx,delete this._cfg,delete this.error,delete this.tickTimer_,delete this._bufferPool,delete this._dnsParser}},{key:"ticker_",value:function(){var e=performance.now();!this.silenced_&&this.state===le.IDLE&&(this.lastGCTimestamp_==undefined||e-this.lastGCTimestamp_>5e3)&&(this.gc_&&this.gc_(),this.lastGCTimestamp_=e),this.tick_&&this.tick_()}},{key:"seek",value:function(e){P.a.log("".concat(this.LOG_TAG," cdn loader seeking ").concat(e)),this.error=null,this.state!==le.ERROR&&this.state!==le.END||(this.state=le.IDLE),this.eod=!1,this.eof=!1}},{key:"getNextFrag",value:function(e){return null}},{key:"drainBufferPool",value:function(){this._bufferPool.drain()}},{key:"doDNSParser",value:function(e){this._dnsParser.doRequest(e.url,e.userinfo,e.idc)}},{key:"emitErr",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];t&&(this.error=e),this.emit("ER",e)}}]),n}(ee.EventEmitter);n(19),n(143);function ge(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}var ye=n(637),me=n(357),be=n(387),ke=n(390),xe=n(408),Te=(n(116),0),Se="DISPATCH_EVENT_",Pe={DISPATCH_SUCCESS:Se+Te++,DISPATCH_FAIL:Se+Te++,DATA_LOAD_SUCCESS:Se+Te++,DATA_LOAD_PROGRESS:Se+Te++,DATA_LOAD_FAIL:Se+Te++,DNS_PARSER_REQUEST:Se+Te++};function we(e,t,n,r,i,a){return qe(function(e,t){return e<<t|e>>>32-t}(qe(qe(t,e),qe(r,a)),i),n)}function Ie(e,t,n,r,i,a,o){return we(t&n|~t&r,e,t,i,a,o)}function Ae(e,t,n,r,i,a,o){return we(t&r|n&~r,e,t,i,a,o)}function Ee(e,t,n,r,i,a,o){return we(t^n^r,e,t,i,a,o)}function De(e,t,n,r,i,a,o){return we(n^(t|~r),e,t,i,a,o)}function qe(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Oe(e){return function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}(function(){}(function(){}(e),8*e.length))}n(284),n(579),n(287);function Re(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}function Le(e){e=atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).substr(-2);return t}function Ce(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function Me(e,t){if(!e)return"";var n;if(e instanceof ArrayBuffer)n=e;else{var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(e)),n=r.buffer}for(var i=Math.floor(e.byteLength/2),a=new Uint16Array(i),o=new DataView(n),s=0;s<i;s++)a[s]=o.getUint16(2*s,t);return Re(a)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Be=function(e){l()(n,e);var t=Ne(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).netProxy_=new te.a,i.dispatchURI_=new re.a(e),i.originDomain_=i.dispatchURI_.domain,i.originPath_=i.dispatchURI_.path,i.configure_=r,i}return s()(n,[{key:"startIPDispatch",value:function(){P.a.warn("Start ip dispatch"),this._getIPList()}},{key:"_getIPList",value:function(){var e=this,t=ie,n=ae;P.a.log("Getting ip by: ".concat(t));var r=ne.a.DISPATCH,i=Object(te.d)([t],{timeout:3e3,maxRetry:1});i.method="GET",i.responseType="text",i.callbacks={onSuccess:function(t){if(t&&t.data)if("string"==typeof t.data){var r=t.data.split(";")[0],i="{{IP}}".replace("{{IP}}",r);e._reqDispatchResult(i,!0)}else e._reqDispatchResult(n);else e._reqDispatchResult(n)},onError:function(t){e._reqDispatchResult(n)},onTimeout:function(t,r){e._reqDispatchResult(n)},onAbort:function(){e._finalError(xe.a.ABORT)},onComplete:function(){}},e.ipReq_=e.netProxy_.request(r,i)}},{key:"_prepareURLParam",value:function(e){var t=this.dispatchURI_,n=this.originPath_,r="/3eb/"+Oe(this.originDomain_)+Ce(n);return t.setScheme("https"),t.setDomain(e),t.setPath(r),t.query.update("ssl","1"),t.toString()}},{key:"_reqDispatchResult",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this,r=n._prepareURLParam(e);r||n.emit("FAIL"),P.a.log("".concat(t?"ip":"domain"," proxy: ").concat(r));var i=ne.a.DISPATCH;n.netProxy_||(n.netProxy_=new te.a);var a=Object(te.d)([r],{timeout:n.configure_.ipTimeout,maxRetry:n.configure_.ipMaxRetry});a.method="GET",a.responseType="json",a.callbacks={onSuccess:function(e){n.emit("SUCCESS",e)},onError:function(e){e.url=r,n._finalError(xe.a.ERROR,e)},onTimeout:function(e,t){n._finalError(xe.a.TIMEOUT)},onAbort:function(){n._finalError(xe.a.ABORT)},onComplete:function(){}},n.disReq_=n.netProxy_.request(i,a)}},{key:"abort",value:function(){this.ipReq_&&this.ipReq_.abort(),this.disReq_&&this.disReq_.abort()}},{key:"destroy",value:function(){this.netProxy_=null,this.dispatchURI_=null,this.ipReq_&&(this.ipReq_.destroy(),this.ipReq_=null),this.disReq_&&(this.disReq_.destroy(),this.disReq_=null)}},{key:"_finalError",value:function(e,t){this.emit("FAIL",{reason:e,error:t})}}]),n}(ee.EventEmitter);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ue=function(e){l()(n,e);var t=Fe(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return a()(this,n),(e=t.call(this)).hostLaborer_=null,e.ipLaborer_=null,e.configure_={maxRetry:1,timeout:5e3,allowIpRetry:!0,ipMaxRetry:1,ipTimeout:3e3},P.a.assert(!!r,"Dispatch url should not be empty!"),e.uri_=new re.a(r),e.hostLaborer_=null,e.ipLaborer_=null,e.query=e.uri_.query,e.hooks={beforeLoad:function(){}},Object(J.a)(e.configure_,i),e}return s()(n,[{key:"qkv",get:function(){var e=this.query;return{crossDomain:e.get("cross-domain"),pv:e.get("pv"),retry:e.get("retry"),client:e.get("client"),z:e.get("z"),l:e.get("l"),uid:e.get("uid"),cid:e.get("cid"),vid:e.get("vid"),t:e.get("t"),e:e.get("e"),tn:e.get("tn")}}},{key:"load",value:function(){this._startHostDispatch()}},{key:"abort",value:function(){this.hostLaborer_&&this.hostLaborer_.abort(),this.ipLaborer_&&this.ipLaborer_.abort()}},{key:"destroy",value:function(){this.hostLaborer_&&this.hostLaborer_.destroy(),this.ipLaborer_&&this.ipLaborer_.destroy()}},{key:"_startHostDispatch",value:function(){var e=this,t=this.uri_,n=this.configure_,r=ne.a.DISPATCH;e.hooks.beforeLoad(t);var i=t.toString();P.a.log("Dispatch(normal) url: ".concat(i));var a=Object(te.d)([i],Object(J.a)(Object(te.b)(),{timeout:n.timeout,maxRetry:n.maxRetry}));a.method="GET",a.responseType="json",a.callbacks=Object(J.a)(a.callbacks,{onSuccess:function(t){var n=t.data;P.a.log("Dispatch(normal) take ".concat(t.netCost,"ms, ").concat(JSON.stringify(n))),e.emit(Pe.DISPATCH_SUCCESS,{l:n.l,z:n.z,t:n.t})},onError:function(t){P.a.error("Dispatch(normal) error: ".concat(JSON.stringify(t)));var r=405===t.status&&t.response&&t.response.code&&t.response.code.indexOf("D20")>=0;!n.allowIpRetry||r?e.emit(Pe.DISPATCH_FAIL,{reason:xe.a.ERROR,error:t}):e._startIPDispatch(i)},onTimeout:function(t,r){P.a.error("Dispatch(normal) timeout: ".concat(i)),n.allowIpRetry?e._startIPDispatch(i):e.emit(Pe.DISPATCH_FAIL,{reason:xe.a.TIMEOUT})},onAbort:function(){e.emit(Pe.DISPATCH_FAIL,{reason:xe.a.ABORT})},onComplete:function(){}}),this.hostLaborer_=te.e.request(r,a)}},{key:"_startIPDispatch",value:function(e){var t=this;this.emit(Pe.DNS_PARSER_REQUEST,e),this.ipLaborer_=new Be(e,this.configure_),this.ipLaborer_.on("SUCCESS",(function(e){var n=e.data;P.a.log("Dispatch(ip) take ".concat(e.netCost,"ms, ").concat(JSON.stringify(n))),t.emit(Pe.DISPATCH_SUCCESS,{l:n.l,z:n.z,t:n.t})})),this.ipLaborer_.on("FAIL",(function(e){t.emit(Pe.DISPATCH_FAIL,{reason:e.reason,error:e.error})})),this.ipLaborer_.startIPDispatch()}}]),n}(ee.EventEmitter);function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ve=function(e){l()(n,e);var t=je(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(e=t.call(this,r,o)).retryCount=i,e.hooks.beforeLoad=e.beforeLoad_.bind(u()(e)),e}return s()(n,[{key:"beforeLoad_",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),n}(Ue);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function We(e,t,n,r){var i="contentlength",a=new re.a(e),o=a.query;switch(t){case 0:n!==undefined&&r!==undefined&&o.update("range","".concat(n,"-").concat(r));break;case 1:n!==undefined&&o.update("start","".concat(n)),r!==undefined&&o.update("end","".concat(r));break;default:}return n!==undefined&&r!==undefined&&o.get(i)&&o.update(i,"".concat(r-n)),a}var ze=function(e){l()(n,e);var t=He(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).dispatcher=null,e.cdnLaborer=null,e.TAG="URIRemote",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new Z.a,e.dispatcherResultDic_={},e.internalRetryCount_=0,e.internalMaxRetry_=1,e.allowRetry_=!0,e.allowIpDispatch_=!0,e.dnsInfo_={userinfo:"",idc:""},e}return s()(n,[{key:"removeDispatchDicKey",value:function(e){delete this.dispatcherResultDic_[e]}},{key:"startLoad",value:function(e){var t=this,n=(arguments.length>1&&undefined,e.fragment),r=n.uri.path,i=this.dispatcherResultDic_[r],a={startByte:e.pieces[0].startByte,endByte:e.pieces[e.pieces.length-1].endByte};if(e.loaderConfig&&(this.internalMaxRetry_=e.loaderConfig.retryNum,this.allowRetry_=e.loaderConfig.doRetry,this.allowIpDispatch_=e.loaderConfig.allowIPDispatch),e.loaderConfig.dispatch)if(i&&i.l){var o=We(i.l,e.rangeMode,a.startByte,a.endByte);this._loadCDNData(e,o)}else{var s=new re.a(e.uri.toString());if(this.dispatcher&&(this.eventManager_.removeAll(),this.dispatcher.destroy()),i){var c=i.z;c&&s.query.update("z",c)}this.dispatcher=new Ve(s.toString(),this.internalRetryCount_,{allowIpRetry:this.allowIpDispatch_}),this.eventManager_.on(this.dispatcher,Pe.DISPATCH_SUCCESS,(function(n){t.dispatcherResultDic_[r]=n,t.dnsInfo_={userinfo:n.t,idc:n.z};var i=We(n.l,e.rangeMode,a.startByte,a.endByte);t._loadCDNData(e,i)})).on(this.dispatcher,Pe.DNS_PARSER_REQUEST,(function(e){t._doDNS(e)})).on(this.dispatcher,Pe.DISPATCH_FAIL,(function(n){var r=n.reason,i=n.error,a=i?i.status:"";switch(r){case xe.a.TIMEOUT:t.allowRetry_&&t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t._internalRetry(e)):t.emit("FL",{category:"dispatcher-timeout",statusCode:a});break;case xe.a.ERROR:i&&405===i.status&&i.response&&i.response.code&&i.response.code.indexOf("D20")>=0?t.emit("FL",{category:"auth-error",statusCode:a}):t.allowRetry_&&t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t._internalRetry(e)):t.emit("FL",{category:"dispatcher-error",statusCode:a});break;case xe.a.ABORT:t.emit("AB");break;default:P.a.warn("Unknown dispatch fail reason ".concat(r))}})),this.dispatcher.load()}else{var u=We(e.uri.toString(),e.rangeMode,a.startByte,a.endByte);this._loadCDNData(e,u)}}},{key:"_loadCDNData",value:function(e,t){var n=this,r=t.toString(),i=ne.a.SEGMENT,a=Object(te.d)([r],Object(J.a)(Object(te.b)(),{maxRetry:e.loaderConfig.retryNum,timeout:e.loaderConfig.timeout}));a.method="GET",a.callbacks=Object(J.a)(a.callbacks,{onProgress:function(e,t){n.emit("PG",e,t)},onSuccess:function(e){var t=new Uint8Array(e.data);P.a.log("".concat(n.LOG_TAG," success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat((e.netCost||0).toFixed(3),"ms), ").concat(Object(ue.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",{bytes:t})},onError:function(t){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n._internalRetry(e)):(P.a.error("".concat(n.LOG_TAG," error after ").concat(n.internalRetryCount_," retry, http-status=").concat(t.status,", ").concat(t.url)),n._doDNS(r),n.emit("FL",{category:"cdn-error",statusCode:t.status}))},onTimeout:function(t,i,a){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n._internalRetry(e)):(P.a.error("".concat(n.LOG_TAG," timeout, ").concat(a.url)),n._doDNS(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),P.a.log("".concat(n.LOG_TAG," request url: ").concat(r)),this.cdnLaborer=te.e.request(i,a)}},{key:"_internalRetry",value:function(e){var t=this.dispatcherResultDic_[e.uri.path];t&&t.l&&delete t.l,this.startLoad(e,!0)}},{key:"_doDNS",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher&&this.dispatcher.abort(),this.cdnLaborer&&this.cdnLaborer.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher&&this.dispatcher.destroy(),delete this.dispatcher,this.cdnLaborer&&this.cdnLaborer.destroy(),delete this.cdnLaborer,this.dnsInfo_={userinfo:"",idc:""}}}]),n}(ee.EventEmitter);function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ge=function(e){l()(n,e);var t=Ye(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return a()(this,n),(e=t.call(this,r)).retryCount=i,e.hooks.beforeLoad=e.beforeLoad_.bind(u()(e)),e}return s()(n,[{key:"beforeLoad_",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),n}(Ue);function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ke=function(e){l()(n,e);var t=Qe(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).TAG="DashUriRequest",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new Z.a,e.dispatcher_=null,e.dispatcherResultDic_={},e.cdnLaborer_=null,e.internalRetryCount_=0,e.internalMaxRetry_=2,e.dnsInfo_={userinfo:"",idc:""},e}return s()(n,[{key:"dispatcher",get:function(){return this.dispatcher_}},{key:"cdnLaborer",get:function(){return this.cdnLaborer_}},{key:"removeDispatchDicKey",value:function(e){delete this.dispatcherResultDic_[e]}},{key:"startLoad",value:function(e){var t=this,n=e.dispatchUrl,r=e.startByte,i=e.endByte,a=new re.a(n),o=this.dispatcherResultDic_[n];if(o&&o.l){var s=We(o.l,1,r,i);this.loadCDNData_(e,s)}else{if(this.dispatcher_&&(this.eventManager_.removeAll(),this.dispatcher_.destroy()),o){var c=o.z;c&&a.query.update("z",c)}this.dispatcher_=new Ge(a.toString(),this.internalRetryCount_),this.dispatcher_.hooks.beforeLoad=function(){var e=t.internalRetryCount_;e>0&&t.dispatcher_.query.update("retry","".concat(e)),t.dispatcher_.query.update("pv","0.1"),t.dispatcher_.query.update("cross-domain","1")},this.eventManager_.on(this.dispatcher_,Pe.DISPATCH_SUCCESS,(function(a){t.dispatcherResultDic_[n]=a,t.dnsInfo_={userinfo:a.t,idc:a.z};var o=We(a.l,1,r,i);t.loadCDNData_(e,o)})),this.eventManager_.on(this.dispatcher_,Pe.DNS_PARSER_REQUEST,(function(e){t.doDNS_(e)})),this.eventManager_.on(this.dispatcher_,Pe.DISPATCH_FAIL,(function(n){var r=n.reason,i=n.error;switch(r){case xe.a.TIMEOUT:t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t.internalRetry_(e)):t.emit("FL",{category:"dispatcher-timeout"});break;case xe.a.ERROR:405===i.status&&i.response&&i.response.code&&i.response.code.indexOf("D20")>=0?t.emit("FL",{category:"auth-error"}):t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t.internalRetry_(e)):t.emit("FL",{category:"dispatcher-error"});break;case xe.a.ABORT:t.emit("AB");break;default:P.a.warn("Unknown dispatch fail reason ".concat(r))}})),this.dispatcher_.load()}}},{key:"loadCDNData_",value:function(e,t){var n=this,r=t.toString(),i=ne.a.SEGMENT,a=Object(te.d)([r],Object(J.a)(Object(te.b)(),{timeout:1e4}));a.method="GET",a.callbacks=Object(J.a)(a.callbacks,{onSuccess:function(e){var t=new Uint8Array(e.data);P.a.log("".concat(n.LOG_TAG," cdn success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat(e.netCost,"ms), ").concat(Object(ue.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",e)},onError:function(t){P.a.log("".concat(n.LOG_TAG," cdn error, http-status=").concat(t.status,", ").concat(t.url)),n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(e)):(n.doDNS_(r),n.emit("FL",{category:"cdn-error",statusCode:t.status}))},onTimeout:function(t,i){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(e)):(n.doDNS_(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),this.cdnLaborer_=te.e.request(i,a)}},{key:"internalRetry_",value:function(e){var t=this.dispatcherResultDic_[e.dispatchUrl];t&&t.l&&delete t.l,this.startLoad(e)}},{key:"doDNS_",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher_&&this.dispatcher_.abort(),this.cdnLaborer_&&this.cdnLaborer_.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher_&&this.dispatcher_.destroy(),delete this.dispatcher_,this.cdnLaborer_&&this.cdnLaborer_.destroy(),delete this.cdnLaborer_,this.dnsInfo_={userinfo:"",idc:""}}}]),n}(ee.EventEmitter);function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ze=function(e){l()(n,e);var t=$e(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e))._fragments=[],i._readPos={f:-1,s:-1},i._loadPos={f:-1,s:-1},i._preErrorData=null,i._allowLoaded=!0,i._dashRemote=new Ke,i._initSegment=null,i._initSegmentData=null,i.segments=[],i.TAG="DASHLoaderUnit::".concat(r),i._loaderType=r,i}return s()(n,[{key:"fragments",get:function(){return this._fragments},set:function(e){this.eof=!1,this.eod=!1,this._fragments=e,this._preErrorData=null}},{key:"initSegment",set:function(e){e!=this._initSegment&&(this._initSegmentData=null,this._initSegment=e)}},{key:"allowLoaded",set:function(e){this._allowLoaded!==e&&(this._allowLoaded=e,e&&this.state!==le.LOADING&&this.loadFragment_())}},{key:"initSegmentData",get:function(){return this._initSegmentData},set:function(e){this._initSegmentData=e}},{key:"duration",get:function(){var e=0;this._fragments.length>0&&(e=this._fragments[this._fragments.length-1].endTime);return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"bufferTime_",get:function(){return this._currentBuf&&this._currentBuf.info?this._currentBuf.info.timeLength:0}},{key:"resetReadPosByTime_",value:function(e){var t=this.findFIndexByTime_(e);if(t.f>-1){var n=this._readPos.f;t.f!==n&&(n=t.f),this.setReadPos_(n,t.s),P.a.log("".concat(this.LOG_TAG," update readpos, time=").concat(e,", readpos=").concat(this._readPos.f,"-").concat(this._readPos.s,", loadpos=").concat(this._loadPos.f,"-").concat(this._loadPos.s))}}},{key:"findFIndexByTime_",value:function(e){for(var t=-1,n=-1,r=0;r<this._fragments.length;r++)if(e>=this._fragments[r].startTime&&e<this._fragments[r].endTime){t=r,n=this.findSegIdxByTime_(r,e);break}return-1!=t&&-1!=n||P.a.log("".concat(this.LOG_TAG," find index error, f=").concat(t,", s=").concat(n,", time=").concat(e,", duration=").concat(this.duration,",fs=").concat(this._fragments.length)),{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=ge(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"needLoadFrag_",value:function(e){var t=e.f>=0&&this._fragments.length>0?this._fragments[e.f]:null,n=(e.s>=0&&t.segments&&t.segments.length)>0?t.segments[e.s].status:-1;return!(!t||-1===n||2===n)}},{key:"loadFragment_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=this,n=2!==t._initSegment.status,r=function(){var e,r,i,a={type:n?"init":"segment",f:t._loadPos.f,s:t._loadPos.s,response:undefined,category:undefined};if(t._eventManager.removeAll(),t._eventManager.on(t._dashRemote,"SC",(function(e){a.response=e,t.dataLoadOk_(a)})),t._eventManager.on(t._dashRemote,"FL",(function(e){a.category=e.category,t.dataLoadFail_(a)})),t._eventManager.on(t._dashRemote,"AB",(function(){t.dataLoadOnAbort_(a)})),t._eventManager.on(t._dashRemote,"DP",(function(e){t.doDNSParser(e)})),n)e=t._initSegment.uri.toString();else if(t._fragments){var o=t._fragments[a.f],s=o.segments[a.s];e=o.uri.toString(),r=s.startByte,i=s.endByte}e&&(t.state=le.LOADING,t._dashRemote.startLoad({dispatchUrl:e,startByte:r,endByte:i}))};t._fragments&&t._fragments.length>0&&t._allowLoaded&&(e?r():(!n&&t.needLoadFrag_(t._readPos)&&(t._loadPos.f=t._readPos.f,t._loadPos.s=t._readPos.s,t._updateBufferTime()),t.state!==le.LOADING&&t.state!==le.ERROR&&(n||t.bufferTime_<t._maxBufferTimeLength&&t.needLoadFrag_(t._loadPos))&&r()))}},{key:"makeErrorContext_",value:function(e){var t,n=this,r=e.type,i=e.category;if("init"==r)n._initSegment.status=3;else{var a=this._fragments[e.f];a.status=3,n._preErrorData=a}switch(i){case"dispatcher-error":case"dispatcher-timeout":t=ke.a.DATA_DASH_DISPATCH_ERROR;break;case"auth-error":t=ke.a.DATA_AUTH_Error;break;case"cdn-error":t=ke.a.DATA_DASH_ERROR;break;case"cdn-timeout":t=ke.a.DATA_DASH_TIMEOUT;break;case"cdn-range-error":t=ke.a.DATA_DASH_RANGE_ERROR}P.a.log("".concat(n.LOG_TAG," ,data loading error ").concat(t)),n.state=le.ERROR,n.errorChange_(new ye.a(me.a.CRITICAL,be.a.LOADER,t))}},{key:"doRetryStage_",value:function(e){var t=this,n=0===t.bufferTime_?t._noBufferRetryCount:t._withBufferRetryCount,r=0===t.bufferTime_?t._noBufferMaxRetry:t._withBufferMaxRetry;P.a.log("".concat(this.LOG_TAG," ,data loading failure, reload, bufferTime = ").concat(t.bufferTime_,", retry = ").concat(n,", max = ").concat(r)),"auth-error"==e.category?t.makeErrorContext_(e):0===t.bufferTime_?t._noBufferRetryCount>=t._noBufferMaxRetry?t.makeErrorContext_(e):(this._noBufferRetryCount++,this.reloadSingleSegment_()):t._withBufferRetryCount>=t._withBufferMaxRetry?t.makeErrorContext_(e):(this._withBufferRetryCount++,this.reloadSingleSegment_())}},{key:"reloadSingleSegment_",value:function(){this._dashRemote.reset(),this._dashRemote.dispatcher&&this._dashRemote.dispatcher.destroy(),this._dashRemote.cdnLaborer&&this._dashRemote.cdnLaborer.destroy(),this.loadFragment_(!0)}},{key:"dataLoadOk_",value:function(e){var t=this;t._noBufferRetryCount=0,t._withBufferRetryCount=0;var n=e.f,r=e.s,i=e.response,a=e.type,o=i.status,s=i.url,c=i.speed,u=new Uint8Array(i.data);P.a.log("".concat(t.LOG_TAG,", loaded type = ").concat(a,", ").concat(r," of frag ").concat(n,", http-status/bytes/take(").concat(o,"/").concat(u.byteLength,"/").concat(i.netCost,"ms), ").concat(Object(ue.a)(c),"/s ").concat(s));var d=null,l=null;if("init"==a){var f=t._initSegment;t._initSegmentData=u,f.status=2}else{var h=t._fragments[n],p=h.segments[r];if(t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,u),p.status=2,u.byteLength!==p.endByte-p.startByte)return P.a.log("".concat(t.LOG_TAG,", loaded range error, bytes = ").concat(u.byteLength,", seg = ").concat(p.endByte-p.startByte)),void t.makeErrorContext_({category:"cdn-range-error",f:n,s:r,type:a});r==h.segments.length-1?(h.status=2,h.idx==t._fragments.length-1?t.state=le.END:(d=h.idx+1,l=-1)):(d=h.idx,l=r+1),t._updateBufferTime()}t.state!==le.END&&(t.state=le.IDLE),this.emit("DA"),"init"!==a&&null!==d&&null!==l&&e.f==t._loadPos.f&&e.s==t._loadPos.s&&t.state==le.IDLE&&t.findNextLoad_(d,l),t.loadFragment_()}},{key:"dataLoadFail_",value:function(e){var t=e.f,n=e.s,r=e.type;if("init"!==r&&(this._loadPos.f!==t||this._loadPos.s!==n))return this.state=le.IDLE,void P.a.log("".concat(this.LOG_TAG," , data loading failure, not loadpos, pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s,", obj = ").concat(e.f,"-").concat(e.s));P.a.log("".concat(this.LOG_TAG," ,data loading failure, type = ").concat(r,", pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s)),this.loaderConfig.doRetry?this.doRetryStage_(e):this.makeErrorContext_(e)}},{key:"dataLoadOnAbort_",value:function(e){var t=e.f,n=e.s,r=e.type;P.a.log("".concat(this.LOG_TAG,": onAbort type = ").concat(r,", ").concat(t," -> ").concat(n));try{var i="init"==r?this._initSegment:this._fragments[t].segments[n];i.status=0,this._bufferPool.del(i.poolId),this.state!==le.ERROR&&(this.state=le.IDLE)}catch(a){}}},{key:"findNextLoad_",value:function(e,t){var n=this;if(this._prePos&&e>=this._prePos.f&&(e<this._prePos.rf||e==this._prePos.rf&&t>=this._prePos.s&&t<=this._prePos.rs))return this._prePos.f=e,void(this._prePos.s=t);this._prePos={f:e,s:t},this.findNextLoad__(e,t,(function(e,t,r){if(Object(J.a)(n._prePos,{rf:e,rs:t}),n._loadPos.f=e,n._loadPos.s=t,r)n.state=le.END;else{var i=n._fragments[e];2==i.status&&(i.status=0),n.state==le.END&&(n.state=le.IDLE)}}))}},{key:"findNextLoad__",value:function(e,t,n){var r=!1,i=!1,a=this._fragments[e];a&&a.segments.length>0&&(t=t>=0?t:0,2==a.segments[t].status?t==a.segments.length-1?(a.status=2,a.idx==this._fragments.length-1?(i=!0,r=!0):this.findNextLoad__(e+1,-1,n)):this.findNextLoad__(a.idx,t+1,n):r=!0),r&&n(e,t,i)}},{key:"_updateBufferTime",value:function(){var e=[this._loadPos.f,this._loadPos.s,this._readPos.f,this._readPos.s].join("-");if(!this._currentBuf||this._currentBuf.pos!=e){for(var t=0,n=0,r=0,i=null,a=this._readPos.f,o=this._loadPos.f,s=a;s<=o&&0!=(i=this._fragments[s].segments).length;s++){var c=s==a?this._readPos.s:0,u=s==o?this._loadPos.s:i.length-1;s==a&&(r=i[c].startTime);for(var d=!1,l=c;l<=u;l++){if(2!=i[l].status){d=!0;break}t+=i[l].duration,n+=i[l].endByte-i[l].startByte}if(d)break}this._currentBuf={pos:e,info:{start:r,byteLength:n,timeLength:t}}}}},{key:"setReadPos_",value:function(e,t){this._readPos.f=e,this._readPos.s=t,this._updateBufferTime()}},{key:"errorChange_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._error=e,this.emit("ec",e)}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._loadPos.f<0||this._loadPos.s<0||this._loadPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,c=this._loadPos.f,u=0;u<o.length;u++)n=(r=o[u]).split("-"),e=parseInt(n[1],10),t=parseInt(n[2],10),e<s||e>c?this.gcSeg_(r,e,t):e==s&&e==c?(i=this._readPos.s,a=this._loadPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==c&&t>(a=this._loadPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t],i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}},{key:"tick_",value:function(){}},{key:"read",value:function(){var e=this,t=null;if(e._readPos.f<0||0==e._fragments.length)return null;if(e._readPos.f>=e._fragments.length&&(e.eof=!0),e.eof)return null;var n=e._fragments[e._readPos.f],r=e._readPos.s>-1&&n&&n.segments.length>0?n.segments[e._readPos.s]:null;return e.bufferTime_<5&&(3==n.status||4==n.status)&&(e._error||(e.errorChange_(new ye.a(me.a.CRITICAL,be.a.LOADER,ke.a.DATA_DASH_ERROR)),P.a.log("".concat(e.LOG_TAG," , read data error, create _error, readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s)))),r&&2===r.status&&(t={data:e._bufferPool.read(r.poolId),meta:{uid:"".concat(r.levelId,"-").concat(r.fragIdx,"-").concat(r.idx),fragIdx:n.idx,segIdx:r.idx,level:r.levelId,fragKey:r.fragKey,segment:r}},P.a.log("".concat(e.LOG_TAG,", read data return tagdata,type=").concat(this._loaderType,", readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s,", startTime = ").concat(r.startTime,", endtime = ").concat(r.startTime+r.duration,", levelId=").concat(r.levelId,", byte.length = ").concat(t.data.byteLength,"\n\t\t\t, total = ").concat(r.endByte-r.startByte)),n.idx==e._fragments.length-1&&e._readPos.s==n.segments.length-1?e.eof=!0:e._readPos.s==n.segments.length-1?(n=e._fragments[n.idx+1],e.setReadPos_(n.idx,0)):e.setReadPos_(e._readPos.f,e._readPos.s+1)),e.bufferTime_<e._maxBufferTimeLength&&e.loadFragment_(),t}},{key:"seek",value:function(e){b()(_()(n.prototype),"seek",this).call(this,e),this.errorChange_(),!this._preErrorData||3!=this._preErrorData.status&&4!=this._preErrorData.status||(this._preErrorData.status=0),this.resetReadPosByTime_(e),this.findNextLoad_(this._readPos.f,this._readPos.s),this.loadFragment_()}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findFIndexByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n&&r?{fragment:n,segment:r}:null}},{key:"getUnreadBufInfo",value:function(){return this._currentBuf&&this._currentBuf.info?{start:this._currentBuf.info.start,byteLength:this._currentBuf.info.byteLength,timeLength:this._currentBuf.info.timeLength}:{start:0,byteLength:0,timeLength:0}}},{key:"reset",value:function(){b()(_()(n.prototype),"reset",this).call(this),this._dashRemote.reset(),this._fragments.splice(0,this._fragments.length),this._readPos.f=this._readPos.s=-1,this._loadPos.f=this._loadPos.s=-1,this._currentBuf=null,this.state=le.IDLE,this._preErrorData=null,this._dashRemote.reset()}}]),n}(ve),Xe=n(419);function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var et,tt,nt=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},rt=function(e){l()(n,e);var t=Je(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Xe,watch:["manifest","loader"]}))).$TAG="DashLoader",r.mode=L.CDN,r.loaderDataArrived_=!1,r.loaderBuff_=new z,r.timeGap_=5,r.videoInitConfig_=null,r.audioInitConfig_=null,r.tickTimer_=new G.a((function(){return r.tick_()})),r.tickTimer_.scheduleRepeated(r.$silenced?.5:.1),r}return s()(n,[{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo_().buffered;return(t.video||t.audio)&&(e.start=t.video.start,e.end=t.video.start+t.video.timeLength),e}},{key:"eof",get:function(){var e=!1,t=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,i=r.hasAudio,a=r.hasVideo;return i&&a?e=t.eof&&n.eof:i?e=t.eof:a&&(e=n.eof),e}},{key:"eod",get:function(){var e=!1,t=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,i=r.hasAudio,a=r.hasVideo;return i&&a?e=t.eod&&n.eod:i?e=t.eod:a&&(e=n.eod),e}},{key:"duration",get:function(){return this.$manifestArtifact?this.$manifestArtifact.duration:0}},{key:"$silenced",get:function(){return b()(_()(n.prototype),"$silenced",this)},set:function(e){M()(_()(n.prototype),"$silenced",e,this,!0);var t=this._videoLoader,r=this._audioLoader,i=this.$stream;t&&i.restrictor.hasVideo&&(t.silenced=e),r&&i.restrictor.hasAudio&&(r.silenced=e)}},{key:"timeGap",set:function(e){this.timeGap_=e}},{key:"fragments",get:function(){var e=this._videoLoader,t=this._audioLoader,n=this.$stream.restrictor,r=n.hasAudio,i=[];return n.hasVideo?i=e.fragments:r&&(i=t.fragments),i||[]}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=e.renderer,a=n&&!Object(Q.c)(n)&&this.$manifestArtifact!==n,o=this.$selfArtifact!==r,s=this.$rendererArtifact!==i;if(a&&(this.$manifestArtifact=n),s&&(this.$rendererArtifact=i),o&&(this.$selfArtifact=r),a){this.drainBufferPool();var c=t.playRanges,u=!1;for(var d in n.tracks){var l=n.tracks[d];if(l){var f=this.setTrackConfig(l,d);u=u||f}}if(u&&(t.restrictor.needSendInitSegment=!0),this.applyRanges(c),c.length>0){var h=c.start(0);this.seek(h)}}this.pumpLoader_(),Object(Q.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t=this.$manifestArtifact;if(t&&0!==e.length){var n=t.tracks.video,r=t.tracks.audio;if(n){var i=_e(n.fragments,e),a=i.fragments,o=i.segments;this._videoLoader.fragments=a,this._videoLoader.segments=o}if(r){var s=_e(r.fragments,e),c=s.fragments,u=s.segments;this._audioLoader.fragments=c,this._audioLoader.segments=u}}}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"getInitData_",value:function(e){var t,n,r,i=this._audioLoader,a=this.audioInitConfig_,o=this._videoLoader,s=this.videoInitConfig_,c=null;switch(e){case 2:n=i,c=a,t=new K.a(2),r="audio";break;case 1:c=s,n=o,t=new K.a(1),r="video";break;default:return}var u=n.initSegmentData;if(u){var d=c,l=d.codec,f=d.mimeType;return t.bytesArray=[u],t.container=f,t.codec=l,P.a.log("".concat(this.LOG_TAG," ").concat(r," initSegment, codec=").concat(l,", mimeType=").concat(f,", length=").concat(u.byteLength)),t}}},{key:"pumpLoader_",value:function(){var e=this.$stream,t=this.$selfArtifact,n=this.$manifestArtifact,r=t,i=this.$rendererArtifact;if(!(Object(Q.c)(n)||!Object(Q.c)(r)&&null!=r||!this.loaderDataArrived_||this.eof||null!=i&&!i.expectingBuffer||0===this.buffer.len&&this.error))if(this.read_(),e.restrictor.consumable){var a=e.restrictor.consume();this.noticeDataPump(!0),this.$provideArtefact(a)}else this.noticeDataPump(!1)}},{key:"checkCDNBuffer_",value:function(){var e=this._videoLoader,t=this._audioLoader,n=this.timeGap_,r=this.$stream;if(r.restrictor.hasAudio&&t&&r.restrictor.hasVideo&&e){var i=e.initSegmentData,a=t.initSegmentData,o=e.getUnreadBufInfo().timeLength,s=t.getUnreadBufInfo().timeLength,c=!a||s<n,u=!i||o<n;e.allowLoaded=u||!c,t.allowLoaded=c||!u}}},{key:"getUnreadBufInfo_",value:function(){var e=null,t=null;return this._videoLoader&&(e=this._videoLoader.getUnreadBufInfo()),this._audioLoader&&(t=this._audioLoader.getUnreadBufInfo()),{buffered:{video:e,audio:t}}}},{key:"setTrackConfig",value:function(e,t){var n,r=this,i=this.$stream,a=e.initSegment,o=e.codec,s=e.mimeType,c="video"===t?this._preVideoInit:this._preAudioInit;return(!c||c!=a)&&((n=new Ze(this.$krt,t)).on("ec",(function(e){r.$throwError(e)})).on("DA",(function(e){r._onLoaderDataArrived()})),n.silenced=this.$silenced,n.initSegment=a,"video"===t?(this._preVideoInit=a,this._videoLoader=n,this.videoInitConfig_={codec:o,mimeType:s},i.restrictor.hasVideo=!0):(this._preAudioInit=a,this._audioLoader=n,this.audioInitConfig_={codec:o,mimeType:s},i.restrictor.hasAudio=!0),!0)}},{key:"tick_",value:function(){this.checkCDNBuffer_()}},{key:"findPieceAt",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this._videoLoader,n=this._audioLoader,r=this.$stream,i=r.restrictor,a=i.hasAudio,o=i.hasVideo;return o?t.findSegmentByPTS(e):a?n.findSegmentByPTS(e):{fragment:null,segment:null}}},{key:"seek",value:function(e){arguments.length>1&&undefined,arguments.length>2&&undefined;b()(_()(n.prototype),"seek",this).call(this,e);var t=this.$stream;[{type:"video",exist:t.restrictor.hasVideo,loader:this._videoLoader},{type:"audio",exist:t.restrictor.hasAudio,loader:this._audioLoader}].forEach((function(t){var n=t.type,r=t.exist,i=t.loader;if(r){var a=e;Object(Q.f)(e)&&(a=e[n]),i.seek(a)}})),this.pumpLoader_()}},{key:"read_",value:function(){var e=this.$stream,t=e.restrictor,n=t.hasAudio,r=t.hasVideo;if(t.needSendInitSegment){var i;n&&(i=this.getInitData_(2))&&(e.restrictor.audioInitSegment=i),r&&(i=this.getInitData_(1))&&(e.restrictor.videoInitSegment=i)}else{var a=this.readCDN_();if(a)for(var o in a){var s=a[o];if(s){var c=s.contentType,u=s.bytes,d=s.segment.startTime,l=s.segment.duration;if("video"===c){var f=new $.a(1);f.bytesArray=[u],f.startTime=d,f.duration=l,e.restrictor.videoMediaSegments.push(f)}else if("audio"===c){var h=new $.a(2);h.bytesArray=[u],h.startTime=d,h.duration=l,e.restrictor.audioMediaSegments.push(h)}}}}}},{key:"readCDN_",value:function(){var e,t,n=this._audioLoader,r=this._videoLoader,i=this.$stream.restrictor,a=i.hasAudio,o=i.hasVideo,s=!1,c=!1;if(a&&o){var u=n.buffer.start,d=r.buffer.start;u-d>this.timeGap_?s=!0:d-u>this.timeGap_?c=!0:s=c=!0}else s=o,c=a;if(c&&!this._audioLoader.eof){var l=this._audioLoader.read();l&&(t={contentType:"audio",bytes:l.data,segment:l.meta.segment})}if(s&&!this._videoLoader.eof){var f=this._videoLoader.read();f&&(e={contentType:"video",bytes:f.data,segment:f.meta.segment})}return e||t?{video:e||null,audio:t||null}:null}},{key:"drainBufferPool",value:function(){var e=this.$stream.restrictor;e&&(this._videoLoader&&e.hasVideo&&this._videoLoader.drainBufferPool(),this._audioLoader&&e.hasAudio&&this._audioLoader.drainBufferPool())}},{key:"reset",value:function(){this._videoLoader&&this._videoLoader.reset(),this._audioLoader&&this._audioLoader.reset()}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this._videoLoader&&this._videoLoader.destroy(),this._audioLoader&&this._audioLoader.destroy(),delete this._audioLoader,delete this._videoLoader}}]),n}(Y);nt([F.c],rt.prototype,"fragments",null),nt([F.c],rt.prototype,"findPieceAt",null),(tt=et||(et={}))[tt.UNKNOWN=-1]="UNKNOWN",tt[tt.HLS=0]="HLS",tt[tt.JDASH=1]="JDASH",tt[tt.F4V=2]="F4V",tt[tt.FLV=2]="FLV",tt[tt.MP4=3]="MP4",tt[tt.AMP4=4]="AMP4",tt[tt.DASH_VP9=5]="DASH_VP9",tt[tt.DASH_AV1=6]="DASH_AV1";var it=function(){function e(t){a()(this,e),this.range=[],this.pieces=[],this.fragment=null,this.fragIdx=null,this.uri=null,this.rangeMode=1,this.buffer=null,this.loaderConfig=null,this.loaderConfig=t.loaderConfig,this.fragment=t.frag,this.fragIdx=t.fragIdx,this.range=t.range,this.buffer=t.bufferInfo,this.rangeMode=t.rangeMode!==undefined&&null!==t.rangeMode?t.rangeMode:this.rangeMode;var n=this.pieces;if(this.fragment.segments.length>0)for(var r=this.fragment.segments,i=this.range[0],o=this.range[1],s=i;s<=o;s++)n.push(r[s]);else n.push(this.fragment.header);n.length>0&&(this.uri=n[0].uri)}return s()(e,[{key:"destroy",value:function(){this.pieces.splice(0,this.pieces.length),this.range.splice(0,this.range.length),this.loaderConfig=null,this.fragment=null,this.fragIdx=null,this.uri=null,this.buffer=null}}]),e}();function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ot=function(e){l()(n,e);var t=at(n);function n(e){var r;return a()(this,n),(r=t.call(this)).status=0,r.enabled=!0,r.uri=null,r.__url="",r.poolId="",r.fragKey="",r.type=e,r}return n}(function(){function e(){a()(this,e),this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.idx=null,this.fragIdx=null}return s()(e,[{key:"endTime",get:function(){return this.startTime+this.duration}}]),e}());function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ct=function(e){l()(n,e);var t=st(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r)).TAG="flvSegmentsLoader",i.splicePTS=!1,i.skipErrorFrag=!1,i._fragments=[],i._uriRemote=new ze,i._tempResetTime=-1,i._preLoadFIdx=-1,i._readPos={f:-1,s:-1},i._downPos={f:-1,s:-1,e:-1},i._allowFusion=!1,i.ipc.on("headerComplete",i.initSegs.bind(u()(i))),i}return s()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragments",get:function(){return this._fragments},set:function(e){0==e.length&&(this.eof=!0,this.eod=!0),this._fragments=e}},{key:"applyRanges",value:function(e){var t=_e(this._fragments,e).fragments;this._playRanges=e,this.fragments=t}},{key:"addFragment",value:function(e){var t=this.fragments;if(t.length>0){var n=t[t.length-1];e.startTime=n.endTime,e.idx=n.idx+1}t.push(e),this.eof&&(this.eof=!1),this.eod&&(this.eod=!1,this.moveToNextDownPosOrEOD_()),P.a.log("".concat(this.LOG_TAG," addfragment, length=").concat(this._fragments.length))}},{key:"creatUUID",value:function(){this._uuid=X.a.create()}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0==e.length||r<0)return c;if(this.eof){if(e.length>0){var u=e[e.length-1];c.start=u.endTime}}else{var d=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var l=r,f=!0,h=null;l<=t;l++){var p=e[l];if(p.segments&&p.segments.length>0&&3!=p.status&&4!=p.status){var _=p.segments,v=l===r?i:0,g=l===t?n:_.length-1;l===r&&(s=_[i].startTime);for(var y=v;y<=g;y++){var m=_[y];if(m.enabled){var b=this._bufferPool.read(m.poolId);if(b)f&&(f=!1,h=m.startTime),null!==h&&(a+=b.byteLength,o=m.endTime-h);else if(!(l===t&&y===g)){var k="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(m.poolId,", ").concat(m.fragIdx,", ").concat(m.idx,", ").concat(m.uri.toString(),", ").concat(m.levelId,", ").concat(m.flattenIdx,"}, ").concat(m.levelId,", ").concat(m.startByte,", ").concat(m.startTime);throw P.a.error(k),new Error(k)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof||this._readPos.f<0||0==this._fragments.length)return null;var e=null,t=this._fragments[this._readPos.f];if(0==t.segments.length||this.error)return null;var n=this._readPos.s>-1?t.segments[this._readPos.s]:null;return n&&!n.enabled?(this.moveToNextReadPosOrEOF_(t,n),null):n&&2!==n.status?null:(n&&(e={type:et.FLV,data:this._bufferPool.read(n.poolId),done:!0,meta:{uid:"".concat(n.levelId,"-").concat(n.fragIdx,"-").concat(n.idx),fragIdx:t.idx,segIdx:n.idx,vac:t.additional,fragKey:n.fragKey,byteOffset:n.startByte}},P.a.log("".concat(this.LOG_TAG," got tag, pos=").concat(this._readPos.f,"-").concat(this._readPos.s,", startTime=").concat(n.startTime,", endTime=").concat(n.endTime,", uid=").concat(e.meta.uid)),this.splicePTS&&(e.meta.offset=t.startTime),this.moveToNextReadPosOrEOF_(t,n)),e)}},{key:"seek",value:function(e){b()(_()(n.prototype),"seek",this).call(this,e),this._allowFusion=!1,this._withBufferRetryCount=0,this._noBufferRetryCount=0,this.resetReadPosByTime_(e)}},{key:"resetReadPosByTime_",value:function(e){if(0!=this._fragments.length){var t=this.findSegmentByPTS(e),n=t.fragment,r=t.segment;if(!n)throw Error("reset pos error, pts/frag/segment(".concat(e,"/").concat(n,")"));0==n.segments.length&&(this._tempResetTime=e);var i=n.idx,a=r?r.idx:0;this._readPos.f=i,this._readPos.s=a,this._downPos.f=i,this._downPos.s=a,this._downPos.e=this._downPos.s;var o=this.findPieceByPos_(this._downPos).segment;o&&2===o.status&&this.moveToNextDownPosOrEOD_(),P.a.log("".concat(this.LOG_TAG," reset pos, time=").concat(e,", readPos=").concat(JSON.stringify(this._readPos),", downPos=").concat(JSON.stringify(this._downPos))),this.state===le.LOADING&&this.abort_(),this.tick_()}}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findIdxByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n?{fragment:n,segment:r}:null}},{key:"findIdxByTime_",value:function(e){for(var t=-1,n=-1,r=this._fragments.length,i=r>0?this._fragments[r-1]:null,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&(e<this._fragments[a].endTime||a==r-1&&e==i.endTime)){t=a,this._fragments[a].segments.length>0&&(n=this.findSegIdxByTime_(a,e));break}return{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=ge(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"findSegIdxByByte_",value:function(e,t){var n=ge(this._fragments[e].segments,(function(e){return e.endByte<=t?1:e.startByte>t?-1:0}));return n?n.idx:-1}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.error&&this._fragments&&0!==this._fragments.length){var e=this.getUnreadBufInfo();this.state===le.IDLE&&e.timeLength<this._maxBufferTimeLength&&this.loadFragment_(e)}}},{key:"decideLoadEndPos_",value:function(){var e=this._downPos.f,t=this._downPos.s,n=t;if(t>2)if(this._allowFusion){var r=this._fragments[e].segments,i=r[t],a=r[r.length-1];if(i){var o=this.loaderConfig.keyframesFusionSize,s=i.startByte+o;if(s>=a.endByte)n=a.idx;else{var c=this.findSegIdxByByte_(e,s);-1!==c&&(n=c)}}}else this._allowFusion=!0;return n}},{key:"loadFragment_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(!(0==n.segments.length&&2==n.header.status||r&&2==r.status||2==n.status)){this._preLoadFIdx!==n.idx&&this.skipErrorFrag&&(this.emit("FLS",n),this._preLoadFIdx=n.idx);var i=new it({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this.decideLoadEndPos_()],bufferInfo:e,rangeMode:0,loaderConfig:this.loaderConfig});P.a.log("".concat(this.LOG_TAG,": load task ").concat(i.range.join("-")," of ").concat(this._downPos.f,", levelId = ").concat(n.levelId)),this.loadContiguousSegments_(i)}}},{key:"loadContiguousSegments_",value:function(e){var t=this,n=e.pieces,r=e.fragIdx,i=e.loaderConfig,a=this._eventManager,o=this._uriRemote,s=this,c=this._fragments[r],u=this._fragments.length,d=0==c.segments.length;s.state=le.LOADING;a.removeAll(),a.on(o,"PG",(function(e,t){})),a.on(o,"SC",(function(e){var i=e.bytes,a=-1,o=-1;if(d||(a=n[0].idx,o=n[n.length-1].idx),P.a.log("".concat(s.LOG_TAG,": load ok, header:").concat(d,", seg ").concat(a,"-").concat(o," of frag ").concat(r,"->[0,").concat(u-1,"]")),d)c.header.status=2,s.state=le.IDLE,t.ipc.emit("flvHeader",{bytes:i,meta:{fragIdx:r,header:!0,uid:"".concat(c.header.levelId,"-").concat(r,"-header")}});else{for(var l=c.segments[a].startByte,f=!1,h=a;h<=o;h++){var p=c.segments[h];if(!t._bufferPool.read(p.poolId)){var _=p.startByte-l,v=p.endByte-l,g=i.subarray(_,v);t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,g),f=!0}p.status=2}s.state=le.IDLE,s.moveToNextDownPosOrEOD_(),f&&t.emit("DA")}})),a.on(o,"FL",(function(n){if(t.skipErrorFrag)t.state=le.IDLE,c.status=3,P.a.log("".concat(s.LOG_TAG,": load error, skipError, type=").concat(JSON.stringify(n),", errorPos=").concat(JSON.stringify(t._downPos))),s.emitErr(new ye.a(me.a.CRITICAL,be.a.LOADER,ke.a.DATA_AD_ERROR),!1),t.moveToNextDownPosOrEOD_();else{var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e):i.doRetry?r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t.doFinalError_(n,e)}})),a.on(o,"AB",(function(){var e=-1,t=-1;if(!d){e=n[0].idx,t=n[n.length-1].idx;for(var i=e;i<=t;i++){var a=c.segments[i];a.status=0,s._bufferPool.del(a.poolId)}}P.a.log("".concat(s.LOG_TAG,": load, onAbort ").concat(e," - ").concat(t," of ").concat(r,", header=").concat(d)),s.state!==le.ERROR&&(s.state=le.IDLE)})),a.on(o,"DP",(function(e){s.doDNSParser(e)})),o.startLoad(e)}},{key:"initSegs",value:function(e){if(0!=e.keyframePositions.length&&0!=e.keyframeTimes.length){var t=e.meta,n=t.fragIdx,r=t.uid,i=this._fragments[n],a="".concat(i.header.levelId,"-").concat(n,"-header");if(i.segments.length>0||r!==a)P.a.log("".concat(this.LOG_TAG,",initSegs has created segments or levelId error, return, length=").concat(i.segments.length,", cuid=").concat(a,", uid=").concat(r));else{i.additional={ac:e.ac,vc:e.vc,naluSizeLength:e.naluSizeLength},i.duration=e.duration;var o=e.keyframePositions.join(","),s=e.keyframeTimes.join(","),c=0;this.splicePTS&&(c=i.startTime);for(var u=e.keyframePositions,d=e.keyframeTimes,l=0,f=0,h=0,p=0,_=e.filesize,v=2;v<=u.length;v++){v<u.length?(h=u[v-1],p=u[v],l=0==d[v-1]?0:d[v-1],f=0==d[v]?0:d[v]):(h=u[v-1],p=_-1,l=d[v-1],f=this.splicePTS?e.duration:i.endTime);var g=new ot(et.FLV);g.uri=new re.a(i.uri.toString()),g.idx=v-2,g.startTime=c+l,g.duration=f-l,g.startByte=h,g.endByte=p,g.poolId="flv-"+this._uuid+"-"+i.idx+"-"+g.idx,g.fragIdx=i.idx,g.fragKey=i.key,g.levelId=i.levelId,i.segments.push(g)}P.a.log("".concat(this.LOG_TAG," initSegs header ok, keyframePositions=").concat(o,", keyframeTimes=").concat(s,",fid=").concat(a,", segs = ").concat(i.segments.length,", levelId=").concat(i.levelId)),this.applyRanges(this._playRanges),this.refreshFragmentsTime_(),this._tempResetTime>=0&&(this.resetReadPosByTime_(this._tempResetTime),this._tempResetTime=-1)}}}},{key:"refreshFragmentsTime_",value:function(){if(this.splicePTS)for(var e,t=this._fragments.length,n=0;n<t;n++){var r=this._fragments[n];e&&(0==r.segments.length?(r.duration=r.endTime-e.endTime,r.startTime=e.endTime):r.startTime=e.endTime),e=r}}},{key:"doFinalError_",value:function(e,t){var n=this,r=e.category,i=e.statusCode,a=t.fragIdx,o=t.pieces,s=n._fragments[a],c=0===s.segments.length;if(!c&&o.length>0)for(var u=0;u<o.length;u++)o[u].status=3;s.status=3,n.state=le.ERROR;var d=ke.a.UNKNOWN;switch(r){case"auth-error":d=ke.a.DATA_AUTH_Error;break;case"cdn-error":d=ke.a.DATA_FLV_ERROR;break;case"cdn-timeout":d=ke.a.DATA_FLV_TIMEOUT;break;case"dispatcher-error":case"dispatcher-timeout":d=ke.a.DATA_FLV_DISPATCH_ERROR;break;default:n.state!==le.ERROR&&(n.state=le.IDLE)}d==ke.a.UNKNOWN&&n.state!==le.ERROR?n.state=le.IDLE:this.error||n.emitErr(new ye.a(me.a.CRITICAL,be.a.LOADER,d,i));var l="no-segment";if(!c){var f=o[0].idx,h=o.length>0&&!c?o[o.length-1].idx:f;l="seg: ".concat(f,"-").concat(h)}P.a.log("".concat(n.LOG_TAG,": load finalError, ").concat(l," of ").concat(a,", header=").concat(c,", type=").concat(d))}},{key:"reloadTask_",value:function(e){var t=this._uriRemote;t.reset(),t.dispatcher&&t.dispatcher.destroy(),t.cdnLaborer&&t.cdnLaborer.destroy(),P.a.log("".concat(this.LOG_TAG,": reload task ").concat(e.range.join("-")," of ").concat(this._downPos.f)),this.loadContiguousSegments_(e)}},{key:"abort_",value:function(){this._uriRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0||this._downPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,c=this._downPos.f,u=0;u<o.length;u++)n=(r=o[u]).split("-"),e=parseInt(n[2],10),t=parseInt(n[3],10),e<s||e>c?this.gcSeg_(r,e,t):e==s&&e==c?(i=this._readPos.s,a=this._downPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==c&&t>(a=this._downPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t];if(r.segments.length>0){var i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&t.segments.length>0&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"moveToNextDownPosOrEOD_",value:function(){this._downPos.s=this._downPos.e;for(var e=this.findPieceByPos_(this._downPos),t=e.fragment,n=e.segment,r=t.idx,i=n?n.idx:0,a=this._fragments.length,o=undefined,s=-1,c=-1,u=r;u<a;u++){var d=this._fragments[u],l=d.segments.length;if(3==d.status||4==d.status){if(!this.skipErrorFrag){o=!0;break}}else{if(0==l){s=d.idx,c=0;break}for(var f=!1,h=u==r?i+1:0;h<l;h++){var p=d.segments[h];if(p.enabled&&0==p.status){s=d.idx,c=h,f=!0;break}}if(f)break}}if(s>=0)this._downPos.f=s,this._downPos.s=c,this._downPos.e=this._downPos.s;else if(!o){var _=this._fragments[this._fragments.length-1];this._downPos.f=_.idx,this._downPos.s=_.segments.length>0?_.segments.length-1:0,this._downPos.e=this._downPos.s,this.state=le.END}}},{key:"moveToNextReadPosOrEOF_",value:function(e,t){var n=e.idx,r=t.idx,i=this._fragments.length,a=-1,o=-1,s=!1;if(i>0){var c=this._fragments[i-1];c.segments.length>0&&c.segments[c.segments.length-1].enabled&&(s=!0);for(var u=n;u<i;u++){var d=this._fragments[u],l=d.segments.length;if(3==d.status||4==d.status||0==l){a=d.idx,o=0;break}for(var f=!1,h=u==n?r+1:0;h<l;h++){if(d.segments[h].enabled){a=d.idx,o=h,f=!0;break}}if(f)break}}a>=0?(this._readPos.f=a,this._readPos.s=o):s&&(this.eof=!0,P.a.info("".concat(this.LOG_TAG,": EOF")))}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._tempResetTime=-1,this._readPos.f=this._readPos.s=-1,this._downPos.f=this._downPos.s=this._downPos.e=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==le.IDLE&&(this.state===le.LOADING?this.abort_():this.state=le.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._uriRemote.reset(),b()(_()(n.prototype),"destroy",this).call(this)}}]),n}(ve),ut=n(420);function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var lt=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},ft=function(e){l()(n,e);var t=dt(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:ut,watch:["manifest","loader"]}))).$TAG="FlvLoader",r.mode=L.CDN,r.chunkMode=!0,r.loaderDataArrived_=!1,r.loader_=new ct(r.$krt,r.$ipc),r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})).on(r.loader_,"FLS",(function(e){r.emit("FLS",e)})),r}return s()(n,[{key:"$silenced",get:function(){return b()(_()(n.prototype),"$silenced",this)},set:function(e){M()(_()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof&&this.chunkDataDone}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"adjustTimestampMode",set:function(e){this.loader_.splicePTS=e,M()(_()(n.prototype),"adjustTimestampMode",e,this,!0)}},{key:"skipErrorMode",set:function(e){this.loader_.skipErrorFrag=e,e&&(this.loader_.loaderConfig=new he({doRetry:!1,retryNum:1,allowIPDispatch:!1,ipMaxRetry:0,timeout:5e3})),M()(_()(n.prototype),"skipErrorMode",e,this,!0)}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=n&&!Object(Q.c)(n)&&this.$manifestArtifact!==n;if(this.$selfArtifact!==r&&(this.$selfArtifact=r),i){var a=this.chunkDataDone;if(n.other&&(this.chunkDataDone=n.other.done),P.a.log("".concat(this.LOG_TAG," manifest changed, done=").concat(this.chunkDataDone,", fragments=").concat(n.fragments.length,", levelId=").concat(n.levelId)),a){if(this.$manifestArtifact=n,this.loader_.creatUUID(),this.loader_.drainBufferPool(),this.loader_.fragments=n.fragments,this.applyRanges(t.playRanges),t.playRanges.length>0){var o=t.playRanges.start(0);this.seek(o)}}else if(n.fragments.length>0){for(var s=0;s<n.fragments.length;s++)this.loader_.addFragment(n.fragments[s]);this.applyRanges(t.playRanges)}}this.pumpLoader_(),Object(Q.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){0!==e.length&&this.loader_.applyRanges(e)}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.$manifestArtifact,t=this.$selfArtifact;if(!(Object(Q.c)(e)||!Object(Q.c)(t)&&null!=t||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&this.loader_.error)){var n=this.loader_.read(),r=n&&!!n.data;this.noticeDataPump(r),r&&this.$provideArtefact(n)}}},{key:"seek",value:function(e){b()(_()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(Y);function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function pt(e,t){return parseFloat(e+"."+t)}lt([F.c],ft.prototype,"fragments",null),lt([F.c],ft.prototype,"findPieceAt",null);var _t=function(e){l()(n,e);var t=ht(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).TAG="hlsSegmentsLoader",r._fragments=[],r._segments=[],r._hlsRemote=new ze,r._readPos={f:-1,s:-1,b:-1},r._downPos={f:-1,s:-1,b:-1},r}return s()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragsWithSegs",set:function(e){this.eof=!1,this.eod=!1,this._fragments=e.frags,this._segments=e.segs}},{key:"fragments",get:function(){return this._fragments}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0===e.length||r<0)return c;if(this.eof){if(e.length>0){var u=e[e.length-1];c.start=u.endTime}}else{var d=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var l=r,f=!0,h=null;l<=t;l++){var p=e[l];if(p){var _=p.segments,v=l===r?i:0,g=l===t?n:_.length-1;l===r&&(s=_[i].startTime);for(var y=v;y<=g;y++){var m=_[y];if(m.enabled){var b=this._bufferPool.read(m.poolId);if(b)a+=b.byteLength,o+=m.duration,f&&(f=!1,h=m.startTime),null!==h&&(a+=b.byteLength,o=m.endTime-h);else if(!(l===t&&y===g)){var k="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(m.poolId,", ").concat(m.fragIdx,", ").concat(m.idx,", ").concat(m.uri.toString(),", ").concat(m.levelId,", ").concat(m.flattenIdx,"}, ").concat(m.levelId,", ").concat(m.startByte,", ").concat(m.startTime);throw P.a.error(k),new Error(k)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof)return null;var e=this.findPieceByPos_(this._readPos),t=e.fragment,n=e.segment;if(!n)return null;if(!n.enabled)return this.moveToNextReadPosOrEOF_(),null;if(1!==n.status&&2!==n.status)return this.tryToSyncReadAndDownPos_(),null;var r=this._fragments.length,i=this._segments.length,a=this._readPos.f,o=this._readPos.s,s=this._readPos.b,c=n.startByte+s,u=this._bufferPool.read(n.poolId),d=null,l=!1,f=n.levelId;return s>=u.byteLength?d=null:(P.a.log("".concat(this.LOG_TAG,": Read seg ").concat(n.poolId,", flatten idx ").concat(n.flattenIdx,"->[0,").concat(i-1,"] & inner seg idx ").concat(o,"->[0,").concat(t.segments.length-1,"] of frag ").concat(a,"->[0,").concat(r-1,"], status:").concat(n.status,", level:").concat(f,", start/duration(").concat(n.startTime.toFixed(3),"/").concat(n.duration.toFixed(3),"), bytes:").concat(n.endByte-n.startByte)),d=u.subarray(s,u.byteLength)),1===n.status?this._readPos.b=u.byteLength:2===n.status&&(l=!0,this.moveToNextReadPosOrEOF_()),{type:et.HLS,data:d,done:l,meta:{uid:"".concat(f,"-").concat(a,"-").concat(o),level:f,fragIdx:a,segIdx:o,fragKey:n.fragKey,byteOffset:c,range:[s,u.byteLength]}}}},{key:"seek",value:function(e){b()(_()(n.prototype),"seek",this).call(this,e),this._withBufferRetryCount=0,this._noBufferRetryCount=0;var t=this.findSegmentByPTS(e),r=t.fragment,i=t.segment;if(r&&i){var a=pt(r.idx,i.idx),o=pt(this._readPos.f,this._readPos.s),s=pt(this._downPos.f,this._downPos.s),c=a>=o&&a<=s;this._readPos.f=r.idx,this._readPos.s=i.idx,this._readPos.b=0,this._downPos.f=r.idx,this._downPos.s=i.idx,this._downPos.b=0,2===this.findPieceByPos_(this._downPos).segment.status&&this.moveToNextDownPosOrEOD_(),c||this.state!==le.LOADING||this.abort_(),this.tick_()}else P.a.error("Mismatch candidate pts/frag/segment(".concat(e,"/").concat(r,"/").concat(i,")"))}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findPieceByPTS_(e,this._fragments),n=null;return t&&(n=this.findPieceByPTS_(e,t.segments)),{fragment:t,segment:n}}},{key:"findPieceByPTS_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined;return n&&!this.pieceWithinToleranceTest_(e,n)?n:ge(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined;return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.krt.error&&this._segments&&0!==this._segments.length&&this.state===le.IDLE){var e=this.getUnreadBufInfo();if(e.timeLength>this._maxBufferTimeLength)return;this.checkLoad_(e)}}},{key:"checkLoad_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(n&&r){var i=new it({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this._downPos.s],bufferInfo:e,loaderConfig:this.loaderConfig});this.loadSingleSegment_(i)}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"loadSingleSegment_",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=e.pieces,i=e.fragIdx,a=e.buffer,o=this,s=r[0],c=this._fragments[i],u=this._fragments.length;if(!n){if(1===s.status)return;if(2===s.status)return}o.state=le.LOADING;var d=function(e,t){},l=function(e){var t=e.bytes,n="seg ".concat(s.idx,"->[0,").concat(c.segments.length-1,"]"),r="frag ".concat(i,"->[0,").concat(u-1,"]");o._bufferPool.del(s.poolId),o._bufferPool.add(s.poolId,t),s.status=2,P.a.log("".concat(o.LOG_TAG,": Loaded ").concat(s.poolId,", ").concat(n," of ").concat(r)),o.isCurrentDownSeg_(s)&&o.moveToNextDownPosOrEOD_(),o.state!==le.ERROR&&(o.state=le.IDLE),o.emit("DA")},f=function(n){var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e,s):r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadSingleSegment_(e)):t.doFinalError_(n,e,s):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadSingleSegment_(e)):t.doFinalError_(n,e,s)},h=function(){var e="seg ".concat(s.idx,"->[0,").concat(c.segments.length-1,"]"),t="frag ".concat(i,"->[0,").concat(u-1,"]");P.a.log("".concat(o.LOG_TAG,": onAbort ").concat(e," of ").concat(t,", buffer ").concat(a.timeLength,"s")),s.status=0,o._bufferPool.del(s.poolId),o.state!==le.ERROR&&(o.state=le.IDLE)},p=function(e){o.doDNSParser(e)};this._eventManager.removeAll(),this._eventManager.on(this._hlsRemote,"PG",d),this._eventManager.on(this._hlsRemote,"SC",l),this._eventManager.on(this._hlsRemote,"FL",f),this._eventManager.on(this._hlsRemote,"AB",h),this._eventManager.on(this._hlsRemote,"DP",p),this._hlsRemote.startLoad(e)}},{key:"isCurrentDownSeg_",value:function(e){return!!e&&e.idx===this._downPos.s&&e.fragIdx===this._downPos.f}},{key:"doFinalError_",value:function(e,t,n){var r=this,i=e.category,a=e.statusCode,o=t.fragIdx,s=r._fragments[o],c=r._fragments.length;switch(i){case"cdn-error":case"dispatcher-error":case"auth-error":if(r.isCurrentDownSeg_(n)){n.status=3,r.state=le.ERROR,P.a.log("".concat(r.LOG_TAG,": onError: ").concat(n.fragIdx,"-").concat(n.idx));var u=ke.a.UNKNOWN;switch(i){case"cdn-error":u=ke.a.DATA_HLS_CDN_ERROR;break;case"auth-error":u=ke.a.DATA_AUTH_Error;break;case"dispatcher-error":u=ke.a.DATA_HLS_DISPATCH_ERROR}r.emitErr(new ye.a(me.a.CRITICAL,be.a.LOADER,u,a))}else{var d="seg ".concat(n.idx,"->[0,").concat(s.segments.length-1,"]"),l="frag ".concat(o,"->[0,").concat(c-1,"]");P.a.error("".concat(r.LOG_TAG,": onError ").concat(d," of ").concat(l,", buffer ").concat(t.buffer.timeLength,"s"))}break;case"cdn-timeout":case"dispatcher-timeout":if(r.isCurrentDownSeg_(n))n.status=4,r.state=le.ERROR,P.a.log("".concat(r.LOG_TAG,": onTimeout: ").concat(n.fragIdx,"-").concat(n.idx)),r.emitErr(new ye.a(me.a.CRITICAL,be.a.LOADER,"cdn-timeout"===i?ke.a.DATA_HLS_CDN_TIMEOUT:ke.a.DATA_HLS_DISPATCH_TIMEOUT));else{var f="seg ".concat(n.idx,"->[0,").concat(s.segments.length-1,"]"),h="frag ".concat(o,"->[0,").concat(c-1,"]");P.a.error("".concat(r.LOG_TAG,": onTimeout ").concat(f," of ").concat(h,", buffer ").concat(t.buffer.timeLength,"s"))}break;default:r.state!==le.ERROR&&(r.state=le.IDLE)}}},{key:"getNextAvailableSegByFlatten_",value:function(e){var t=this._segments[e];return t?t.enabled?t:this.getNextAvailableSegByFlatten_(e+1):null}},{key:"moveToNextDownPosOrEOD_",value:function(){var e=this.findPieceByPos_(this._downPos).segment,t=this.getNextAvailableSegByFlatten_(e.flattenIdx+1);t?(this._downPos.f=t.fragIdx,this._downPos.s=t.idx,this._downPos.b=0,2===t.status&&this.moveToNextDownPosOrEOD_()):this.state=le.END}},{key:"moveToNextReadPosOrEOF_",value:function(){var e=this._fragments,t=e[this._readPos.f].segments[this._readPos.s],n=e[e.length-1],r=n.segments.length>0&&n.segments[n.segments.length-1].enabled,i=this.getNextAvailableSegByFlatten_(t.flattenIdx+1)||this._segments[t.flattenIdx+1];i?(this._readPos.f=i.fragIdx,this._readPos.s=i.idx,this._readPos.b=0):r&&(this.eof=!0,P.a.log("".concat(this.LOG_TAG,": EOF")))}},{key:"reloadSingleSegment_",value:function(e){this._hlsRemote.reset(),this._hlsRemote.dispatcher&&this._hlsRemote.dispatcher.destroy(),this._hlsRemote.cdnLaborer&&this._hlsRemote.cdnLaborer.destroy(),this.loadSingleSegment_(e,!0)}},{key:"abort_",value:function(){this._hlsRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0))for(var e=this._fragments[this._readPos.f].segments[this._readPos.s].flattenIdx,t=this._fragments[this._downPos.f].segments[this._downPos.s].flattenIdx,n=this._segments,r=this._bufferPool,i=r.keys,a=0;a<i.length;a++){var o=i[a],s=o.split("-"),c=parseInt(s[1],10),u=parseInt(s[2],10),d=this._fragments[c];if(d){var l=d.segments[u];if(l){var f=l.flattenIdx;if(f<e||f>t)n[f].status=0,r.del(o)}else r.del(o)}else r.del(o)}}},{key:"tryToSyncReadAndDownPos_",value:function(){var e=!1;(this._readPos.f>this._downPos.f||this._readPos.s>this._downPos.s)&&(e=!0),e&&(this._downPos.f=this._readPos.f,this._downPos.s=this._readPos.s,this._downPos.b=0)}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length),this._readPos.f=this._readPos.s=this._readPos.b=-1,this._downPos.f=this._downPos.s=this._downPos.b=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==le.IDLE&&(this.state===le.LOADING?this.abort_():this.state=le.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._hlsRemote.reset(),b()(_()(n.prototype),"destroy",this).call(this)}}]),n}(ve),vt=n(421);function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var yt=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},mt=function(e){l()(n,e);var t=gt(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:vt,watch:["manifest","loader"]}))).mode=L.CDN,r.rangeTSTolerance_=0,r.maxSegmentSearchTolerance_=0,r.loaderDataArrived_=!1,r.loader_=new _t(e.runtime),r.rangeTSTolerance_=r.$krt.conf.hlsRangeTSTolerance,r.maxSegmentSearchTolerance_=r.$krt.conf.hlsMaxSegmentSearchTolerance,r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})),r}return s()(n,[{key:"$silenced",get:function(){return b()(_()(n.prototype),"$silenced",this)},set:function(e){M()(_()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,n=e.loader,r=t&&!Object(Q.c)(t)&&this.$manifestArtifact!==t,i=this.$selfArtifact!==n;if(r&&(this.$manifestArtifact=t),i&&(this.$selfArtifact=n),r){this.loader_.drainBufferPool();var a=this.$stream.playRanges;if(this.applyRanges(a),a.length>0){var o=a.start(0);this.seek(o)}}this.pumpLoader_(),Object(Q.c)(t)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t=this.$manifestArtifact;if(t&&0!==e.length){var n=t.isAccurateTimestamp;this.maxSegmentSearchTolerance_=n?0:this.$krt.conf.hlsMaxSegmentSearchTolerance,this.rangeTSTolerance_=n?0:this.$krt.conf.hlsRangeTSTolerance;var r=_e(t.fragments,e,0,1),i=r.fragments,a=r.segments;this.loader_.fragsWithSegs={frags:i,segs:a,isAccurateTimeStamp:n}}}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.loader_,t=this.$manifestArtifact,n=this.$selfArtifact;if(!(Object(Q.c)(t)||!Object(Q.c)(n)&&null!=n||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&e.error)){var r=e.read(),i=r&&!!r.data;this.noticeDataPump(i),i&&this.$provideArtefact(r)}}},{key:"seek",value:function(e){b()(_()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(Y);function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}yt([F.c],mt.prototype,"fragments",null),yt([F.c],mt.prototype,"findPieceAt",null);var kt=function(e){l()(n,e);var t=bt(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r)).TAG="mp4SegmentsLoader",i.ForeToleranceTime=.25,i.splicePTS=!1,i.skipErrorFrag=!1,i._fragments=[],i._uriRemote=new ze,i._tempResetTime=-1,i._preLoadFIdx=-1,i._readPos={f:-1,s:-1},i._downPos={f:-1,s:-1,e:-1},i._allowFusion=!1,i.ipc.on("headerComplete",i.initSegs.bind(u()(i))),i}return s()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragments",get:function(){return this._fragments},set:function(e){0==e.length&&(this.eof=!0,this.eod=!0),this._fragments=e}},{key:"applyRanges",value:function(e){var t=_e(this._fragments,e,this.ForeToleranceTime).fragments;this._playRanges=e,this.fragments=t}},{key:"creatUUID",value:function(){this._uuid=X.a.create()}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0==e.length||r<0)return c;if(this.eof){if(e.length>0){var u=e[e.length-1];c.start=u.endTime}}else{var d=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var l=r,f=!0,h=null;l<=t;l++){var p=e[l];if(p.segments&&p.segments.length>0&&3!=p.status&&4!=p.status){var _=p.segments,v=l===r?i:0,g=l===t?n:_.length-1;l===r&&(s=_[i].startTime);for(var y=v;y<=g;y++){var m=_[y];if(m.enabled){var b=this._bufferPool.read(m.poolId);if(b)f&&(f=!1,h=m.startTime),null!==h&&(a+=b.byteLength,o=m.endTime-h);else if(!(l===t&&y===g)){var k="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(m.poolId,", ").concat(m.fragIdx,", ").concat(m.idx,", ").concat(m.uri.toString(),", ").concat(m.levelId,", ").concat(m.flattenIdx,"}, ").concat(m.levelId,", ").concat(m.startByte,", ").concat(m.startTime);throw P.a.error(k),new Error(k)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof||this._readPos.f<0||0==this._fragments.length)return null;var e=null,t=this._fragments[this._readPos.f];if(0==t.segments.length||this.error)return null;var n=this._readPos.s>-1?t.segments[this._readPos.s]:null;return n&&!n.enabled?(this.moveToNextReadPosOrEOF_(t,n),null):n&&2!==n.status?null:(n&&(e={type:et.MP4,data:this._bufferPool.read(n.poolId),done:!0,meta:{uid:"".concat(n.levelId,"-").concat(n.fragIdx,"-").concat(n.idx),fragIdx:t.idx,segIdx:n.idx,vac:t.additional,fragKey:n.fragKey,byteOffset:n.startByte}},P.a.log("".concat(this.LOG_TAG," got tag, pos=").concat(this._readPos.f,"-").concat(this._readPos.s,", startTime=").concat(n.startTime,", endTime=").concat(n.endTime,", uid=").concat(e.meta.uid)),this.splicePTS&&(e.meta.offset=t.startTime),this.moveToNextReadPosOrEOF_(t,n)),e)}},{key:"seek",value:function(e){b()(_()(n.prototype),"seek",this).call(this,e),this._allowFusion=!1,this._withBufferRetryCount=0,this._noBufferRetryCount=0,this.resetReadPosByTime_(e)}},{key:"resetReadPosByTime_",value:function(e){if(0!=this._fragments.length){var t=this.findSegmentByPTS(e),n=t.fragment,r=t.segment;if(!n)throw Error("reset pos error, pts/frag/segment(".concat(e,"/").concat(n,")"));0==n.segments.length&&(this._tempResetTime=e);var i=n.idx,a=r?r.idx:0;this._readPos.f=i,this._readPos.s=a,this._downPos.f=i,this._downPos.s=a,this._downPos.e=this._downPos.s;var o=this.findPieceByPos_(this._downPos).segment;o&&2===o.status&&this.moveToNextDownPosOrEOD_(),P.a.log("".concat(this.LOG_TAG," reset pos, time=").concat(e,", readPos=").concat(JSON.stringify(this._readPos),", downPos=").concat(JSON.stringify(this._downPos))),this.state===le.LOADING&&this.abort_(),this.tick_()}}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findIdxByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n?{fragment:n,segment:r}:null}},{key:"findIdxByTime_",value:function(e){for(var t=-1,n=-1,r=this._fragments.length,i=r>0?this._fragments[r-1]:null,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&(e<this._fragments[a].endTime||a==r-1&&e==i.endTime)){t=a,this._fragments[a].segments.length>0&&(n=this.findSegIdxByTime_(a,e));break}return{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=ge(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"findSegIdxByByte_",value:function(e,t){var n=ge(this._fragments[e].segments,(function(e){return e.endByte<=t?1:e.startByte>t?-1:0}));return n?n.idx:-1}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.error&&this._fragments&&0!==this._fragments.length){var e=this.getUnreadBufInfo();this.state===le.IDLE&&e.timeLength<this._maxBufferTimeLength&&this.loadFragment_(e)}}},{key:"decideLoadEndPos_",value:function(){var e=this._downPos.f,t=this._downPos.s,n=t;if(t>2)if(this._allowFusion){var r=this._fragments[e].segments,i=r[t],a=r[r.length-1];if(i){var o=this.loaderConfig.keyframesFusionSize,s=i.startByte+o;if(s>=a.endByte)n=a.idx;else{var c=this.findSegIdxByByte_(e,s);-1!==c&&(n=c)}}}else this._allowFusion=!0;return n}},{key:"loadFragment_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(!(0==n.segments.length&&2==n.header.status||r&&2==r.status||2==n.status)){var i=new it({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this.decideLoadEndPos_()],bufferInfo:e,rangeMode:1,loaderConfig:this.loaderConfig});P.a.log("".concat(this.LOG_TAG,": load task ").concat(i.range.join("-")," of ").concat(this._downPos.f,", levelId = ").concat(n.levelId)),this.loadContiguousSegments_(i)}}},{key:"loadContiguousSegments_",value:function(e){var t=this,n=e.pieces,r=e.fragIdx,i=e.loaderConfig,a=this._eventManager,o=this._uriRemote,s=this,c=this._fragments[r],u=this._fragments.length,d=0==c.segments.length;s.state=le.LOADING;a.removeAll(),a.on(o,"PG",(function(e,t){})),a.on(o,"SC",(function(e){var i=e.bytes,a=-1,o=-1;if(d||(a=n[0].idx,o=n[n.length-1].idx),P.a.log("".concat(s.LOG_TAG,": load ok, header:").concat(d,", seg ").concat(a,"-").concat(o," of frag ").concat(r,"->[0,").concat(u-1,"]")),d)c.header.status=2,s.state=le.IDLE,t.ipc.emit("mp4Header",{bytes:i,meta:{fragIdx:r,header:!0,uid:"".concat(c.header.levelId,"-").concat(r,"-header")}});else{for(var l=c.segments[a].startByte,f=!1,h=a;h<=o;h++){var p=c.segments[h];if(!t._bufferPool.read(p.poolId)){var _=p.startByte-l,v=p.endByte-l,g=i.subarray(_,v);t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,g),f=!0}p.status=2}s.state=le.IDLE,s.moveToNextDownPosOrEOD_(),f&&t.emit("DA")}})),a.on(o,"FL",(function(n){if(t.skipErrorFrag)t.state=le.IDLE,c.status=3,P.a.log("".concat(s.LOG_TAG,": load error, skipError, type=").concat(JSON.stringify(n),", errorPos=").concat(JSON.stringify(t._downPos))),s.emitErr(new ye.a(me.a.CRITICAL,be.a.LOADER,ke.a.DATA_AD_ERROR),!1),t.moveToNextDownPosOrEOD_();else{var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e):i.doRetry?r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t.doFinalError_(n,e)}})),a.on(o,"AB",(function(){var e=-1,t=-1;if(!d){e=n[0].idx,t=n[n.length-1].idx;for(var i=e;i<=t;i++){var a=c.segments[i];a.status=0,s._bufferPool.del(a.poolId)}}P.a.log("".concat(s.LOG_TAG,": load, onAbort ").concat(e," - ").concat(t," of ").concat(r,", header=").concat(d)),s.state!==le.ERROR&&(s.state=le.IDLE)})),o.startLoad(e)}},{key:"initSegs",value:function(e){var t=e.keyframePositions,n=e.keyframeTimes,r=e.meta,i=e.ac,a=e.vc,o=e.naluSizeLength,s=e.duration;if(0!=t.length&&0!=n.length){var c=r.fragIdx,u=r.uid,d=this._fragments[c],l=this._fragments[this._fragments.length-1],f="".concat(d.header.levelId,"-").concat(c,"-header");if(d.segments.length>0||u!==f)P.a.log("".concat(this.LOG_TAG,",initSegs has created segments or levelId error, return, length=").concat(d.segments.length,", cuid=").concat(f,", uid=").concat(u));else{d.additional={ac:i,vc:a,naluSizeLength:o},d.duration=s;var h=t.join(","),p=n.join(","),_=0;this.splicePTS&&(_=d.startTime);for(var v=0,g=0,y=0,m=0,b=l.endByte,k=0;k<=t.length;k++){k<t.length?(y=t[k-1],m=t[k],v=0==n[k-1]?0:n[k-1],g=0==n[k]?0:n[k]):(y=t[k-1],m=b,v=n[k-1],g=this.splicePTS?s:d.endTime);var x=new ot(et.MP4);x.uri=new re.a(d.uri.toString()),x.idx=k,x.startTime=_+v,x.duration=g-v,x.startByte=y,x.endByte=m,x.poolId="mp4-"+this._uuid+"-"+d.idx+"-"+x.idx,x.fragIdx=d.idx,x.fragKey=d.key,x.levelId=d.levelId,d.segments.push(x)}P.a.log("".concat(this.LOG_TAG," initSegs header ok, keyframePositions=").concat(h,", keyframeTimes=").concat(p,",fid=").concat(f,", segs = ").concat(d.segments.length,", levelId=").concat(d.levelId)),this.applyRanges(this._playRanges),this.refreshFragmentsTime_(),this._tempResetTime>=0&&(this.resetReadPosByTime_(this._tempResetTime),this._tempResetTime=-1)}}}},{key:"refreshFragmentsTime_",value:function(){if(this.splicePTS)for(var e,t=this._fragments.length,n=0;n<t;n++){var r=this._fragments[n];e&&(0==r.segments.length?(r.duration=r.endTime-e.endTime,r.startTime=e.endTime):r.startTime=e.endTime),e=r}}},{key:"doFinalError_",value:function(e,t){var n=this,r=e.category,i=e.statusCode,a=t.fragIdx,o=t.pieces,s=n._fragments[a],c=0===s.segments.length;if(!c&&o.length>0)for(var u=0;u<o.length;u++)o[u].status=3;s.status=3,n.state=le.ERROR;var d=ke.a.UNKNOWN;switch(r){case"auth-error":d=ke.a.DATA_AUTH_Error;break;case"cdn-error":d=ke.a.DATA_MP4_CDN_ERROR;break;case"cdn-timeout":d=ke.a.DATA_MP4_CDN_TIMEOUT;break;case"dispatcher-error":d=ke.a.DATA_MP4_DISPATCH_ERROR;break;case"dispatcher-timeout":d=ke.a.DATA_MP4_DISPATCH_TIMEOUT;break;default:n.state!==le.ERROR&&(n.state=le.IDLE)}d==ke.a.UNKNOWN&&n.state!==le.ERROR?n.state=le.IDLE:this.error||n.emitErr(new ye.a(me.a.CRITICAL,be.a.LOADER,d,i));var l="no-segment";if(!c){var f=o[0].idx,h=o.length>0&&!c?o[o.length-1].idx:f;l="seg: ".concat(f,"-").concat(h)}P.a.log("".concat(n.LOG_TAG,": load finalError, ").concat(l," of ").concat(a,", header=").concat(c,", type=").concat(d))}},{key:"reloadTask_",value:function(e){var t=this._uriRemote;t.reset(),t.dispatcher&&t.dispatcher.destroy(),t.cdnLaborer&&t.cdnLaborer.destroy(),P.a.log("".concat(this.LOG_TAG,": reload task ").concat(e.range.join("-")," of ").concat(this._downPos.f)),this.loadContiguousSegments_(e)}},{key:"abort_",value:function(){this._uriRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0||this._downPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,c=this._downPos.f,u=0;u<o.length;u++)n=(r=o[u]).split("-"),e=parseInt(n[2],10),t=parseInt(n[3],10),e<s||e>c?this.gcSeg_(r,e,t):e==s&&e==c?(i=this._readPos.s,a=this._downPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==c&&t>(a=this._downPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t];if(r.segments.length>0){var i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&t.segments.length>0&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"moveToNextDownPosOrEOD_",value:function(){this._downPos.s=this._downPos.e;for(var e=this.findPieceByPos_(this._downPos),t=e.fragment,n=e.segment,r=t.idx,i=n?n.idx:0,a=this._fragments.length,o=undefined,s=-1,c=-1,u=r;u<a;u++){var d=this._fragments[u],l=d.segments.length;if(3==d.status||4==d.status){if(!this.skipErrorFrag){o=!0;break}}else{if(0==l){s=d.idx,c=0;break}for(var f=!1,h=u==r?i+1:0;h<l;h++){var p=d.segments[h];if(p.enabled&&0==p.status){s=d.idx,c=h,f=!0;break}}if(f)break}}if(s>=0)this._downPos.f=s,this._downPos.s=c,this._downPos.e=this._downPos.s;else if(!o){var _=this._fragments[this._fragments.length-1];this._downPos.f=_.idx,this._downPos.s=_.segments.length>0?_.segments.length-1:0,this._downPos.e=this._downPos.s,this.state=le.END}}},{key:"moveToNextReadPosOrEOF_",value:function(e,t){var n=e.idx,r=t.idx,i=this._fragments.length,a=-1,o=-1,s=!1;if(i>0){var c=this._fragments[i-1];c.segments.length>0&&c.segments[c.segments.length-1].enabled&&(s=!0);for(var u=n;u<i;u++){var d=this._fragments[u],l=d.segments.length;if(3==d.status||4==d.status||0==l){a=d.idx,o=0;break}for(var f=!1,h=u==n?r+1:0;h<l;h++){if(d.segments[h].enabled){a=d.idx,o=h,f=!0;break}}if(f)break}}a>=0?(this._readPos.f=a,this._readPos.s=o):s&&(this.eof=!0,P.a.info("".concat(this.LOG_TAG,": EOF")))}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._tempResetTime=-1,this._readPos.f=this._readPos.s=-1,this._downPos.f=this._downPos.s=this._downPos.e=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==le.IDLE&&(this.state===le.LOADING?this.abort_():this.state=le.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._uriRemote.reset(),b()(_()(n.prototype),"destroy",this).call(this)}}]),n}(ve),xt=n(422);function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var St=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Pt=function(e){l()(n,e);var t=Tt(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:xt,watch:["manifest","loader"]}))).$TAG="Mp4Loader",r.mode=L.CDN,r.loaderDataArrived_=!1,r.loader_=new kt(r.$krt,r.$ipc),r.loader_.loaderConfig=new he({dispatch:!1,allowIPDispatch:!1}),r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})).on(r.loader_,"FLS",(function(e){r.emit("FLS",e)})),r}return s()(n,[{key:"$silenced",get:function(){return b()(_()(n.prototype),"$silenced",this)},set:function(e){M()(_()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof&&this.chunkDataDone}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=n&&!Object(Q.c)(n)&&this.$manifestArtifact!==n;if(this.$selfArtifact!==r&&(this.$selfArtifact=r),i&&(P.a.log("".concat(this.LOG_TAG," manifest changed, fragments=").concat(n.fragments.length,", levelId=").concat(n.levelId)),this.$manifestArtifact=n,this.loader_.creatUUID(),this.loader_.drainBufferPool(),this.loader_.fragments=n.fragments,this.applyRanges(t.playRanges),t.playRanges.length>0)){var a=t.playRanges.start(0);this.seek(a)}this.pumpLoader_(),Object(Q.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){0!==e.length&&this.loader_.applyRanges(e)}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.$manifestArtifact,t=this.$selfArtifact;if(!(Object(Q.c)(e)||!Object(Q.c)(t)&&null!=t||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&this.loader_.error)){var n=this.loader_.read(),r=n&&!!n.data;this.noticeDataPump(r),r&&this.$provideArtefact(n)}}},{key:"seek",value:function(e){(e-=this.loader_.ForeToleranceTime)<0&&(e=0),b()(_()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(Y);St([F.c],Pt.prototype,"fragments",null),St([F.c],Pt.prototype,"findPieceAt",null);n(580);var wt=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();function It(e,t){if(e.length>1e4)return function(e,t){for(var n=-1^t,r=e.length-7,i=0;i<r;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])];for(;i<r+7;)n=n>>>8^wt[255&(n^e[i++])];return-1^n}(e,t);for(var n=-1^t,r=e.length-3,i=0;i<r;)n=(n=(n=(n=n>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])])>>>8^wt[255&(n^e[i++])];for(;i<r+3;)n=n>>>8^wt[255&(n^e[i++])];return-1^n}var At=n(156),Et=n(16),Dt=n(13),qt=n(21),Ot=(n(261),self.navigator.userAgent.toLowerCase()),Rt=/(edge)\/([\w.]+)/.exec(Ot)||/(opr)[\/]([\w.]+)/.exec(Ot)||/(chrome)[ \/]([\w.]+)/.exec(Ot)||/(firefox)[\/]([\w.]+)/.exec(Ot)||/(iemobile)[\/]([\w.]+)/.exec(Ot)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(Ot)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(Ot)||/(webkit)[ \/]([\w.]+)/.exec(Ot)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(Ot)||/(msie) ([\w.]+)/.exec(Ot)||Ot.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(Ot)||Ot.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(Ot)||[],Lt=/(ipad)/.exec(Ot)||/(ipod)/.exec(Ot)||/(windows phone)/.exec(Ot)||/(iphone)/.exec(Ot)||/(kindle)/.exec(Ot)||/(android)/.exec(Ot)||/(windows)/.exec(Ot)||/(mac)/.exec(Ot)||/(linux)/.exec(Ot)||/(cros)/.exec(Ot)||[],Ct={browser:Rt[5]||Rt[3]||Rt[1]||"",version:Rt[2]||Rt[4]||"0",majorVersion:Rt[4]||Rt[2]||"0",platform:Lt[0]||""},Mt={};if(Ct.browser){Mt[Ct.browser]=!0;var Nt=Ct.majorVersion.split(".");Mt.version={major:parseInt(Ct.majorVersion,10),string:Ct.version},Nt.length>1&&(Mt.version.minor=parseInt(Nt[1],10)),Nt.length>2&&(Mt.version.build=parseInt(Nt[2],10))}if(Ct.platform&&(Mt[Ct.platform]=!0),(Mt.chrome||Mt.opr||Mt.safari)&&(Mt.webkit=!0),Mt.rv||Mt.iemobile){Mt.rv&&delete Mt.rv;var Bt="msie";Ct.browser=Bt,Mt.msie=!0}if(Mt.edge){delete Mt.edge;var Ft="msedge";Ct.browser=Ft,Mt.msedge=!0}if(Mt.opr){var Ut="opera";Ct.browser=Ut,Mt.opera=!0}if(Mt.safari&&Mt.android){var jt="android";Ct.browser=jt,Mt.android=!0}Mt.name=Ct.browser,Mt.platform=Ct.platform,Mt.chrome&&Mt.version&&Mt.version.major<=44&&(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(this.subarray(e,t))}),window.WebSocket=window.webSocket||window.WebSocket,window.URL=window.URL||window.webkitURL,window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate;var Vt=Object.defineProperties({},{browser:{get:function(){return Mt},configurable:!0,enumerable:!0},isHTTPS:{get:function(){return/^https/gi.test(window.location.protocol)},configurable:!0,enumerable:!0},supportFetch:{get:function(){return window.fetch&&!Mt.msedge},configurable:!0,enumerable:!0},webSocket:{get:function(){return window.WebSocket},configurable:!0,enumerable:!0},dataVideo:{get:function(){return window.MediaSource&&window.URL},configurable:!0,enumerable:!0},canP2P:{get:function(){return!0===Mt.chrome&&window.RTCSessionDescription!==undefined&&window.RTCPeerConnection!==undefined&&window.RTCIceCandidate!==undefined},configurable:!0,enumerable:!0}}),Ht="http://static.iqiyi.com/ext/common/h5Voddpcfg.json";Vt.isHTTPS&&(Ht=Ht.replace(/^http:/gi,"https:"));var Wt=null,zt=0,Yt=null;function Gt(){null!==Wt&&Wt.abort(),(Wt=new XMLHttpRequest).responseType="json",Wt.onreadystatechange=function(){if(0===Wt.readyState);else if(1===Wt.readyState);else if(2===Wt.readyState);else if(3===Wt.readyState);else if(200===Wt.status)if(Wt.response)try{Yt=JSON.parse(JSON.stringify(Wt.response)),Kt(),$t()}catch(e){Qt("dataError")}else Qt("responseIsNull");else Qt("statusErr_"+Wt.status)};try{Wt.open("GET",Ht+"?rn="+Date.now(),!0),Wt.send()}catch(e){Qt("tryCatchError")}}function Qt(e){Kt(),zt<5&&(zt++,Gt())}function Kt(){null!==Wt&&Wt.abort(),Wt=null}function $t(){if(null!==Yt){Et.a.dispatchCfg=Yt.cdn.dispatcher.timeout,Et.g.tracker=Yt.tracker,Yt.aidList&&(Et.g.aidList=Yt.aidList),Yt.defaultTracker&&(Et.g.defaultTracker=Yt.defaultTracker),Yt.pingbackSendPeriod&&(pingbackSendPeriod=Yt.pingbackSendPeriod),Yt.config&&(Dt.a.checkIsMobius()||(Et.b.videoMaxSize=parseInt(Yt.config.videoMaxSize)),Et.h.memory>0&&(Et.b.videoMaxSize=Et.h.memory),Et.g.getPeerIDStep=parseInt(Yt.config.getPeerIDStep),Et.g.weedOutPeerStep=parseInt(Yt.config.weedOutPeerStep),Et.g.connectPeerStep=parseInt(Yt.config.connectPeerStep),Et.g.NATTimeoutStep=parseInt(Yt.config.NATTimeoutStep),Et.g.connectMax=parseInt(Yt.config.connectMax),Et.g.passiveMax=parseInt(Yt.config.passiveMax),Et.g.RTCMax=parseInt(Yt.config.RTCMax),Et.g.RTCPoolSize=parseInt(Yt.config.RTCPoolSize),Et.g.coolDownTime=parseInt(Yt.config.coolDownTime));var e=qt.a.getUserInfoFromCookie();if(e.userInfo){var t,n,r=e.userNetType,i=e.userArea;if(Yt.closep2p&&(Et.g.closeP2PTvidList=Yt.closep2p.tvidList,Et.g.closeP2PNetList=Yt.closep2p.netList,Et.g.closeP2PFileTypeList=Yt.closep2p.fileTypeList,Et.g.closeP2PProvinceList=Yt.closep2p.provinceList?Yt.closep2p.provinceList:[]),Yt.dcache&&Yt.dcache.open)for(var a=Yt.dcache.open,o=0;o<a.length;o++){var s=a[o].ai;if(t=s.split("|")[0],n=s.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){Et.c.open=!0;break}}var c=Yt.stun?Yt.stun:Yt.tracker;Et.g.stun=[];for(var u=!1,d=0;d<c.length&&!u;d++){if(r===c[d].key||"*"===c[d].key){u=!0;for(var l=0;l<c[d].value.length;l++){var f=c[d].value[l];switch(Vt.browser.name){case"mozilla":case"msedge":case"safari":default:Et.g.stun.push({url:"stun:"+f.split("|")[0]+":"+f.split("|")[4],urls:"stun:"+f.split("|")[0]+":"+f.split("|")[4]})}}}if(qt.a.shuffle(Et.g.stun),"mozilla"===Vt.browser.name)for(;Et.g.stun.length>2;)Et.g.stun.shift()}var h=0;if(Yt.cdn.dispatch)for(;h<Yt.cdn.dispatch.length;){var p=Yt.cdn.dispatch[h];if(t=p.ai.split("|")[0],n=p.ai.split("|")[1],("*"===t||t===r||"OVERSEA"===t&&r.indexOf("OVERSEA")>=0)&&("*"===n||0===i.indexOf(n))){Et.a.dispatchCfg=p.timeout;break}h++}for(h=0;h<Yt.cdn.cache.TTFB.length;){var _=Yt.cdn.cache.TTFB[h];if(t=_.ai.split("|")[0],n=_.ai.split("|")[1],("*"===t||t===r||"OVERSEA"===t&&r.indexOf("OVERSEA")>=0)&&("*"===n||0===i.indexOf(n))){Et.a.TTFBCfg=_.timeout;break}h++}for(h=0;h<Yt.cdn.cache.load.length;){var v=Yt.cdn.cache.load[h];if(t=v.ai.split("|")[0],n=v.ai.split("|")[1],("*"===t||t===r||"OVERSEA"===t&&r.indexOf("OVERSEA")>=0)&&("*"===n||0===i.indexOf(n))){Et.a.rcvCfg=v.timeout;break}h++}h=0,Et.g.limitP2P="off";var g=!1;if(Et.g.closeP2PNetList.length>0)for(var y=0;y<Et.g.closeP2PNetList.length;y++)if(Et.g.closeP2PNetList[y]===r){g=!0;break}if(Et.g.closeP2PTvidList.length>0)for(var m=0;m<Et.g.closeP2PTvidList.length;m++)if(Et.g.closeP2PTvidList[m]===Dt.a.tvId){g=!0;break}if(Et.g.closeP2PFileTypeList.length>0)for(var b=0;b<Et.g.closeP2PFileTypeList.length;b++)if(Et.g.closeP2PFileTypeList[b]===Dt.a.fileType){g=!0;break}if(Et.g.closeP2PProvinceList.length>0&&Et.g.closeP2PProvinceList.indexOf(i)>=0&&(g=!0),!g)for(;h<Yt.cdn.cache.p2p.length;){var k=Yt.cdn.cache.p2p[h];if(t=k.ai.split("|")[0],n=k.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var x=0;x<k.time.length;){if(Zt(k.time[x])){Et.g.limitP2P="on",Et.h.openP2P=!0,Et.h.p2pUpLoad=!0;break}x++}break}h++}if(Yt.platform){if(Yt.platform.openP2P)for(h=0;h<Yt.platform.openP2P.length;){var T=Yt.platform.openP2P[h];if(T.type===Dt.a.platform){Et.h.openP2P=1===T.value;break}h++}if(Yt.platform.p2pUpLoad)for(h=0;h<Yt.platform.p2pUpLoad.length;){var S=Yt.platform.p2pUpLoad[h];if(S.type===Dt.a.platform){Et.h.p2pUpLoad=1===S.value;break}h++}if(Yt.platform.memory)for(h=0;h<Yt.platform.memory.length;){var P=Yt.platform.memory[h];if(P.type===Dt.a.platform){Et.h.memory=P.value;break}h++}if(Yt.platform.fastGC)for(h=0;h<Yt.platform.fastGC.length;){var w=Yt.platform.fastGC[h];if(w.type===Dt.a.platform){Et.h.fastGC=w.value;break}h++}if(Yt.platform.cacheMaxLen)for(h=0;h<Yt.platform.cacheMaxLen.length;){var I=Yt.platform.cacheMaxLen[h];if(I.type===Dt.a.platform){Et.h.cacheMaxLen=I.value;break}h++}if(Yt.platform.loadMinLen)for(h=0;h<Yt.platform.loadMinLen.length;){var A=Yt.platform.loadMinLen[h];if(A.type===Dt.a.platform){Et.h.loadMinLen=A.value;break}h++}}if(h=0,Yt.cdn.cache.reLoad)for(;h<Yt.cdn.cache.reLoad.length;){var E=Yt.cdn.cache.reLoad[h];if(t=E.ai.split("|")[0],n=E.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){Et.a.reLoadCfg=E.timeout;break}h++}var D=0;for(Dt.a.absOpen=!1;D<Yt.abs.open.length;){var q=Yt.abs.open[D];if(t=q.ai.split("|")[0],n=q.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var O=q.time.length,R=0;R<O;){if(Zt(q.time[R])){Dt.a.absOpen=!0;break}R++}break}D++}}}}function Zt(e){if("*"===e)return!0;var t=e.split("-")[0],n=e.split("-")[1],r=e.split("-")[2],i=60*parseInt(n.split(":")[0])+parseInt(n.split(":")[1]),a=60*parseInt(r.split(":")[0])+parseInt(r.split(":")[1]);if(i>=0&&a>i){var o=new Date,s=o.getDay().toString(),c=60*o.getHours()+o.getMinutes();if(("*"===t||s===t)&&c>=i&&c<a)return!0}return!1}var Xt={load:function(){Kt(),zt=0,Gt()},checkConfig:$t},Jt=n(11),en=Object.defineProperties({loader:{all:0,count:0,message:""},dispatcher:{all:0,count:0,message:""},errorFragment:null},{errorMessage:{get:function(){return"[ loader:"+this.loader.message+" , dispatcher:"+this.dispatcher.message+"]"},configurable:!0,enumerable:!0}}),tn=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.pos=[],this.time=[0],this.sourceID=null,this.loadInfo=[],this.quoteSegment=null}}]),e}();function nn(e,t){var n=e.m3u8;if("video"===t){if(n.hasOwnProperty("video_track1")&&n.video_track1.hasOwnProperty("files"))return n.video_track1.files}else if("audio"===t&&n.hasOwnProperty("audio_track1")&&n.audio_track1.hasOwnProperty("files"))return n.audio_track1.files;return null}var rn={getM4sDuration:function(e){var t=e.m3u8;return t.hasOwnProperty("video_track1")&&t.hasOwnProperty("audio_track1")?Math.min(parseFloat(t.video_track1.duration_second),parseFloat(t.audio_track1.duration_second)):t.duration},getGapPos:function(e,t,n,r){var i=nn(e,n);if(null===i)return null;if(t>=e.duration){var a=i.length-1,o=i[a].seekable.time.length,s=i[a].seekable.pos.length;return"start"===r?{segmentIndex:a,chunkIndex:s-2,time:qt.a.accAdd(i[a].start_second,i[a].seekable.time[o-2]),pos:i[a].seekable.pos[s-2]}:{segmentIndex:a,chunkIndex:s-1,time:qt.a.accAdd(i[a].start_second,i[a].seekable.time[o-1]),pos:i[a].seekable.pos[s-1]}}for(var c=0;c<i.length;c++)if(t>=i[c].start_second&&t<qt.a.accAdd(i[c].start_second,i[c].duration_second)){for(var u=i[c].start_second,d=i[c].seekable.time,l=0;l<d.length;l++)if(t>=qt.a.accAdd(u,d[l])&&t<qt.a.accAdd(u,d[l+1]))return"start"===r?{segmentIndex:c,chunkIndex:l,time:qt.a.accAdd(u,d[l]),pos:i[c].seekable.pos[l]}:{segmentIndex:c,chunkIndex:l,time:qt.a.accAdd(u,d[l+1]),pos:i[c].seekable.pos[l+1]}}else if("end"===r&&t===qt.a.accAdd(i[c].start_second,i[c].duration_second)){var f=i[c].seekable.time.length-1;return{segmentIndex:c,chunkIndex:f-1,time:qt.a.accAdd(i[c].start_second,i[c].duration_second),pos:i[c].seekable.pos[f]}}return null},getFilesInfo:nn,getDuratioSecond:function(e,t,n){var r=rn.getFilesInfo(e,t);return n<=r.length-1?qt.a.accAdd(r[n].duration_second,r[n].start_second):0},getSegmentIdx:function(e,t){return e+t},getSegmentSize:function(e,t,n){var r=nn(e,t);return n<r.length?r[n].size:-1},getChunkSEPos:function(e,t,n,r){var i=nn(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;if(a.hasOwnProperty("pos")&&a.pos[r+1])return{sPos:a.pos[r],ePos:a.pos[r+1]}}return null},getNextChunkInfo:function(e,t,n,r){var i=nn(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;return r+1<a.pos.length-1?{segmentIndex:n,chunkIndex:r+1,sTime:qt.a.accAdd(i[n].start_second,a.time[r+1]),eTime:qt.a.accAdd(i[n].start_second,a.time[r+2]),sPos:a.pos[r+1],ePos:a.pos[r+2]}:n<i.length-1?(a=i[n+1].seekable,{segmentIndex:n+1,chunkIndex:0,sTime:qt.a.accAdd(i[n+1].start_second,a.time[0]),eTime:qt.a.accAdd(i[n+1].start_second,a.time[1]),sPos:a.pos[0],ePos:a.pos[1]}):null}return null},getCurChunkInfo:function(e,t,n,r){var i=nn(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;return r<a.pos.length-1?{segmentIndex:n,chunkIndex:r,sTime:qt.a.accAdd(i[n].start_second,a.time[r]),eTime:qt.a.accAdd(i[n].start_second,a.time[r+1]),sPos:a.pos[r],ePos:a.pos[r+1]}:null}return null},getTSGapPos:function(e,t,n){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var r=e.m3u8;if(t>=e.duration){var i=r.length-1,a=r[i].time.length,o=r[i].pos.length;return"start"===n?{segmentIndex:i,chunkIndex:o-1,time:qt.a.accAdd(r[i].start_second,r[i].time[a-2]),pos:r[i].pos[o-1].sPos}:{segmentIndex:i,chunkIndex:o-1,time:qt.a.accAdd(r[i].start_second,r[i].time[a-1]),pos:r[i].pos[o-1].ePos}}for(var s=0;s<r.length;s++)if(t>=r[s].start_second&&t<qt.a.accAdd(r[s].start_second,r[s].duration_second)){for(var c=r[s].start_second,u=r[s].time,d=0;d<u.length;d++)if(d===u.length-1||t>=qt.a.accAdd(c,u[d])&&t<qt.a.accAdd(c,u[d+1]))return"start"===n?{segmentIndex:s,chunkIndex:d,time:qt.a.accAdd(c,u[d]),pos:r[s].pos[d].sPos}:{segmentIndex:s,chunkIndex:d,time:qt.a.accAdd(c,u[d+1]),pos:r[s].pos[d].ePos}}else if("end"===n&&t===qt.a.accAdd(r[s].start_second,r[s].duration_second)){var l=r[s].pos.length-1;return{segmentIndex:s,chunkIndex:l,time:qt.a.accAdd(r[s].start_second,r[s].duration_second),pos:r[s].pos[l].ePos}}return null},getTSChunkSEPos:function(e,t,n){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var r=e.m3u8;if(r[t]){var i=r[t].pos;if(n<r[t].pos.length)return{sPos:i[n].sPos,ePos:i[n].ePos}}return null},getTSDuratioSecond:function(e,t){var n=e.m3u8;return qt.a.accAdd(n[t].duration_second,n[t].start_second)},getTSNextChunkInfo:function(e,t,n){var r=e.m3u8;return t>=r.length?null:n<r[t].pos.length-1?{segmentIndex:t,chunkIndex:n+=1,sTime:qt.a.accAdd(r[t].start_second,r[t].time[n]),eTime:qt.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}:t<r.length-1&&n>=r[t].pos.length-1?(n=0,{segmentIndex:t+=1,chunkIndex:0,sTime:qt.a.accAdd(r[t].start_second,r[t].time[n]),eTime:qt.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}):t>=r.length-1&&n>=r[t].pos.length-1?null:void 0},getCurTSChunkInfo:function(e,t,n){var r=e.m3u8;return r&&r[t]&&n<r[t].time.length-1?{segmentIndex:t,chunkIndex:n,sTime:qt.a.accAdd(r[t].start_second,r[t].time[n]),eTime:qt.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}:null}},an=rn,on=n(12),sn=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.seekable={pos:[],time:[]},this.sourceID=null,this.loadInfo=[],this.size=0}}]),e}();var cn,un,dn=function(){function e(){a()(this,e),this.close()}return s()(e,[{key:"close",value:function(){this._bitRateList=[],this._bidTovidList=null}},{key:"vidList",get:function(){return this._bidTovidList}},{key:"bitRateList",get:function(){return this._bitRateList}},{key:"parser",value:function(e){this._bidTovidList||(this._bidTovidList=e.vidlist),e.bid!==Et.d&&this._bitRateList.indexOf(e.bid)<0&&this._bitRateList.push(e.bid);var t=null;return e.type===on.a.M4S||e.type===on.a.DASH?t=function(e,t){var n={},r=null,i=null,a=0,o=null,s=null,c={video_track1:{files:[]},audio_track1:{files:[]}};if(t===on.a.M4S)r=an.getFilesInfo({m3u8:e},"video"),i=an.getFilesInfo({m3u8:e},"audio"),n.duration=an.getM4sDuration({m3u8:e});else{if(t!==on.a.DASH)return null;r=e.video.segments,i=e.audio.segments,(e.video.duration||e.audio.duration)&&(n.duration=e.video.duration?e.video.duration:e.audio.duration)}for(var u=0,d={},l=0,f=0;f<r.length;f++)if(null!==r[f]&&r[f].hasOwnProperty("seekable")&&r[f].seekable.hasOwnProperty("pos")&&r[f].seekable.hasOwnProperty("time")){c.video_track1.files[f]=r[f];var h=r[f].seekable,p=h.pos.length;h.pos[p-1]!==r[f].size&&h.pos.push(r[f].size),h.time[p-1]!==r[f].duration_second&&h.time.push(r[f].duration_second),r[f].sourceID=qt.a.getFileNameFromUrl(r[f].file_name),u+=h.time.length-1,c.video_track1.files[f].seekable=h}else if(null!==r[f]&&r[f].hasOwnProperty("seekable")&&r[f].seekable.hasOwnProperty("pos_start")){if(o=r[f].file_name.toString(),0===f||o!==s.file_name||r[f-1].pos_end!==r[f].pos_start?(0===f?u=r.length:(s.size=r[f-1].seekable.pos_end,s.duration_second=qt.a.accSub(r[f].start_second,s.start_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l},0===r[f].seekable.pos_start&&l++),(s=new sn).file_name=o,s.start_second=r[f].start_second,s.seekable.time.push(qt.a.accSub(r[f].start_second,s.start_second)),s.seekable.pos.push(r[f].seekable.pos_start),s.seekable.pos.push(r[f].seekable.pos_end),s.sourceID=qt.a.getFileNameFromUrl(o)):(s.seekable.pos.push(r[f].seekable.pos_end),s.seekable.time.push(qt.a.accSub(r[f].start_second,s.start_second))),f===r.length-1){s.size=r[f].seekable.pos_end,s.duration_second=qt.a.accAdd(s.seekable.time[s.seekable.time.length-1],r[f].duration_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l};var _=0,v=c.video_track1.files;for(Object.keys(d).length!==v.length?Dt.a.MixWaterMark=!0:Dt.a.MixWaterMark=!1;_<v.length;)v[_].size=d[v[_].sourceID].size,v[_].realIdx=d[v[_].sourceID].idx,_++}}else{var g=qt.a.getFileNameFromUrl(r[f].uri.toString());if(0===f){var y=e.video.init;(s=new sn).file_name=y.uri.toString(),s.sourceID=qt.a.getFileNameFromUrl(s.file_name),s.seekable.pos.push(y.startByte),s.seekable.pos.push(y.endByte),s.seekable.time.push(0),s.size=y.endByte,s.start_second=-1,s.realIdx=l,c.video_track1.files.push(s),l++,(s=new sn).file_name=r[f].uri.toString(),s.sourceID=qt.a.getFileNameFromUrl(s.file_name),a=r[f].endByte,s.seekable.pos.push(r[f].startByte),s.seekable.pos.push(r[f].endByte),s.seekable.time.push(qt.a.accSub(r[f].startTime,s.start_second)),u=r.length}else a===r[f].startByte&&s.sourceID===g?(s.seekable.pos.push(r[f].endByte),s.seekable.time.push(qt.a.accSub(r[f].startTime,s.start_second)),a=r[f].endByte):(s.size=r[f-1].endByte,s.duration_second=qt.a.accSub(r[f].startTime,s.start_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l},0===r[f].startByte&&l++,(s=new sn).file_name=r[f].uri.toString(),s.sourceID=qt.a.getFileNameFromUrl(s.file_name),a=r[f].endByte,s.start_second=r[f].startTime,s.seekable.pos.push(r[f].startByte),s.seekable.pos.push(r[f].endByte),s.seekable.time.push(qt.a.accSub(r[f].startTime,s.start_second)));if(f===r.length-1){s.size=r[f].endByte,s.duration_second=qt.a.accAdd(s.seekable.time[s.seekable.time.length-1],r[f].duration),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l};var m=1,b=c.video_track1.files;for(Object.keys(d).length!==b.length-1?Dt.a.MixWaterMark=!0:Dt.a.MixWaterMark=!1;m<b.length;)b[m].size=d[b[m].sourceID].size,b[m].realIdx=d[b[m].sourceID].idx,m++}}for(var k=0;k<i.length;k++)if(null!==i[k]&&i[k].hasOwnProperty("seekable")&&i[k].seekable.hasOwnProperty("pos")&&i[k].seekable.hasOwnProperty("time")){c.audio_track1.files[k]=i[k];var x=i[k].seekable,T=x.pos.length;x.pos[T-1]!==i[k].size&&x.pos.push(i[k].size),x.time[T-1]!==i[k].duration_second&&x.time.push(i[k].duration_second),i[k].sourceID=qt.a.getFileNameFromUrl(i[k].file_name),c.audio_track1.files[k].seekable=x}else if(0===k){var S=e.audio.init;(s=new sn).file_name=S.uri.toString(),s.sourceID=qt.a.getFileNameFromUrl(s.file_name),s.seekable.pos.push(S.startByte),s.seekable.pos.push(S.endByte),s.seekable.time.push(0),s.size=S.endByte,s.start_second=-1,c.audio_track1.files.push(s),(s=new sn).file_name=i[k].uri.toString(),s.sourceID=qt.a.getFileNameFromUrl(s.file_name),a=i[k].endByte,s.seekable.pos.push(i[k].startByte),s.seekable.pos.push(i[k].endByte),s.seekable.time.push(qt.a.accSub(i[k].startTime,s.start_second))}else a===i[k].startByte?(s.seekable.pos.push(i[k].endByte),s.seekable.time.push(qt.a.accSub(i[k].startTime,s.start_second)),a=i[k].endByte):(s.size=i[k-1].endByte,s.duration_second=qt.a.accSub(i[k].startTime,s.start_second),s.seekable.time.push(s.duration_second),c.audio_track1.files.push(s),(s=new sn).file_name=i[k].uri.toString(),s.sourceID=qt.a.getFileNameFromUrl(s.file_name),a=i[k].endByte,s.start_second=i[k].startTime,s.seekable.pos.push(i[k].startByte),s.seekable.pos.push(i[k].endByte)),k===i.length-1&&(s.size=i[k].endByte,s.duration_second=qt.a.accSub(n.duration,s.start_second),s.seekable.time.push(s.duration_second),c.audio_track1.files.push(s));return n.m3u8=c,{info:n,chunkNum:u}}(e.dataFlow,e.type):e.type===on.a.TS&&(e.dataFlow.play&&Dt.a.enableStartSpeed&&Object(Et.l)(e.dataFlow.play),t=function(e){var t={},n=0,r={};if(e){var i=[],a=0,o=e.length,s=new tn;s.start_second=a,Dt.a.enableStartSpeed?(s.sourceID=e[0].filename,s.quoteSegment=e[0]):(s.file_name=e[0].__url,s.sourceID=qt.a.getFileNameFromUrl(s.file_name));for(var c=0,u=0,d=0,l=0;l<o;l++){if(l>0){var f=Dt.a.enableStartSpeed?e[l].filename:qt.a.getFileNameFromUrl(e[l].__url),h=e[l].startByte;h===c&&f===s.sourceID||(s.duration_second=qt.a.accSub(d,s.start_second),s.size=c,i.push(s),t[s.sourceID]={size:s.size,idx:n},0===h&&n++,s=new tn,Dt.a.enableStartSpeed?s.sourceID=e[l].filename:(s.file_name=e[l].__url,s.sourceID=qt.a.getFileNameFromUrl(s.file_name)),s.start_second=d,s.quoteSegment=e[l])}var p=e[l].startByte,_=e[l].endByte;l<o-1?u=e[l+1].startTime:r.duration=u=d+e[l].duration,c=_,s.pos.push({sPos:p,ePos:_});var v={};v.startPos=p,v.endPos=c,v.contentlength=v.endPos-v.startPos,v.sd=d,s.loadInfo.push(v),s.time.push(qt.a.accSub(u,s.start_second)),d=u}s.duration_second=qt.a.accSub(u,s.start_second),s.size=c,t[s.sourceID]={size:s.size,idx:n},i.push(s),Object.keys(t).length!==i.length?Dt.a.MixWaterMark=!0:Dt.a.MixWaterMark=!1;for(var g=0;g<i.length;)i[g].size=t[i[g].sourceID].size,i[g].realIdx=t[i[g].sourceID].idx,g++;return r.m3u8=i,{info:r,chunkNum:o}}}(e.dataFlow.stream)),t?(t.info.vsize=e.vsize,t.info.vid=e.vid,t.info.chunkNum=t.chunkNum,{levelID:e.bid,data:t.info}):null}}]),e}(),ln=function(){function e(){a()(this,e),this._size=0,this._dicMap=new Map}return s()(e,[{key:"has",value:function(e){return this._dicMap.has(e)}},{key:"get",value:function(e){var t=this._dicMap.get(e);return t||null}},{key:"set",value:function(e,t){this._dicMap.has(e)||this._size++,this._dicMap.set(e,t)}},{key:"remove",value:function(e){var t=this._dicMap.get(e);return t&&(this._dicMap["delete"](e),this._size--),t}},{key:"clear",value:function(){this._size=0,this._dicMap.clear()}},{key:"values",get:function(){return this._dicMap}},{key:"size",get:function(){return this._size}}]),e}(),fn=(n(188),n(197),n(198),n(111)),hn=n.n(fn),pn=(n(136),/[^0-9a-eA-E]+/g),_n=16777216,vn=65536,gn=256,yn=0,mn=0,bn=null,kn=!1;function xn(e){if(e<=0&&(bn=null),bn){if(e>bn.byteLength){var t=new Uint8Array(e);t.set(bn,0),bn=t}}else bn=new Uint8Array(e)}var Tn=Object.defineProperties({resetData:function(){mn=0,yn=0,kn=!1},setStr:function(e){var t=Math.ceil(e.length/2);if(bn||xn(yn+t),null!==pn.exec(e))throw"EncodeBuffer setStr string need baseEnCode!";var n=e.length%2;yn+t>mn&&(xn(yn+t),mn=yn+t);for(var r=0;r<e.length;r+=2){var i=void 0,a=void 0;1===n&&r===e.length-1?(i=parseInt("0x"+e[r]),a=0):(i=parseInt("0x"+e[r]),a=parseInt("0x"+e[r+1])),bn[yn+Math.ceil(r/2)]=a+15*i}yn+=t},setCharStr:function(e){var t=Math.ceil(e.length);bn||xn(yn+t),yn+t>mn&&(xn(yn+t),mn=yn+t);for(var n=0;n<e.length;n++)bn[yn+n]=parseInt("0x"+e[n]);yn+=t},setUTF8Str:function(e){var t=Math.ceil(e.length);bn||xn(yn+t),yn+t>mn&&(xn(yn+t),mn=yn+t);for(var n=0;n<e.length;n++)bn[yn+n]=e[n].charCodeAt();yn+=t},set8:function(e){bn||xn(yn+1),yn+1>mn&&(xn(yn+1),mn=yn+1),bn[yn]=e,yn+=1},set16:function(e){bn||xn(yn+2),yn+2>mn&&(xn(yn+2),mn=yn+2);var t=e;t>=gn?(bn[yn]=Math.floor(t/gn),t%=gn):bn[yn]=0,bn[yn+1]=t,yn+=2},set32:function(e){bn||xn(yn+4),yn+4>mn&&(xn(yn+4),mn=yn+4);var t=e;t>=_n?(bn[yn]=Math.floor(t/_n),t%=_n):bn[yn]=0,t>=vn?(bn[yn+1]=Math.floor(t/vn),t%=vn):bn[yn+1]=0,t>=gn?(bn[yn+2]=Math.floor(t/gn),t%=gn):bn[yn+2]=0,bn[yn+3]=t,yn+=4},setBytes:function(e,t,n){bn||xn(yn+n),yn+n>mn&&(xn(yn+n),mn=yn+n),bn.set(e.subarray(t,t+n),yn),yn+=n},clear:function(){bn=null},toString:function(){for(var e="",t=mn<=64?mn:64,n=0;n<t;n++){var r=bn[n];e+=r<16?"0"+r.toString(16):r.toString(16),n<t-1&&(e+="-")}return e},crc:function(){for(yn=mn,kn?yn-=4:(bn||xn(yn+4),yn+4>mn&&(xn(yn+4),mn=yn+4)),cn=Math.floor(mn/4),un=0;un<4;)bn[yn+un]=bn[un*cn],un++;yn+=4,kn=!0},getData:function(){return new Uint8Array(bn.buffer.slice(0,mn))},getReferData:function(){return new Uint8Array(bn.buffer.slice(0,mn))}},{position:{set:function(e){yn=e},get:function(){return yn},configurable:!0,enumerable:!0},length:{get:function(){return mn},configurable:!0,enumerable:!0}});function Sn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wn=new ln,In=null,An=0,En=!1;function Dn(e){var t=wn.remove(e);t&&(In===t&&(In=null),t.destroy())}function qn(e){var t=wn.get(e);t&&t.destroyChunk(e)}function On(){An=0;var e=Rn();if(0===Et.h.fastGC){for(var t=!1,n=!1,r=0;r<e.length;r++){var i=e[r].index.slice(0,1),a=e[r].index.slice(1);"a"===i&&(e[r].fileType!==on.a.DASH||a>0)&&qn(e[r].alias),e[r]&&(An=e[r].memory+An),-1!==e[r].peerCnt&&e[r].peerCnt>1e3&&(t=!0),-1!==e[r].peerCnt&&e[r].peerCnt<=1e3&&(n=!0),e[r].fileType===on.a.DASH&&0===a&&(e[r].status=0),e[r].tvid!==Dt.a.tvId&&e[r].tvid!==Dt.a.lastReadTvID&&0===e[r].status&&(e[r].status=1)}if(Jt.a.info("memorySize : "+An+", "+Math.floor(An/1024/1024)+"M"),An>=Et.b.videoMaxSize){if(t&&n){e.sort((function(e,t){return t.peerCnt-e.peerCnt}));for(var o=0;o<e.length;o++)if(An>Et.b.videoMaxSize&&e[o]&&1===e[o].status&&e[o].peerCnt>1e3){An-=e[o].memory,Dn(e[o].alias);break}}if(An>=Et.b.videoMaxSize){(e=Rn()).sort((function(e,t){return e.shareDataNum-t.shareDataNum}));for(var s=0;s<e.length;s++)e[s].shareDataNum=0,An>=Et.b.videoMaxSize&&e[s]&&1===e[s].status&&(An-=e[s].memory,Dn(e[s].alias));if(An>=Et.b.videoMaxSize){(e=Rn()).sort((function(e,t){return parseInt(e.index.slice(1))-parseInt(t.index.slice(1))}));for(var c=0;c<e.length;c++)if(e[c]&&An>=Et.b.videoMaxSize){var u=e[c].index.slice(0,1),d=e[c].index.slice(1);if(e[c].tvid===Dt.a.tvId||e[c].tvid===Dt.a.lastReadTvID)continue;"e"===u&&d<Dt.a.lastReadSegIndex&&e[c].shareDataNum<10&&(An-=e[c].memory,Dn(e[c].alias))}}}}}else for(var l=0;l<e.length;l++)e[l]&&(An=e[l].memory+An),Jt.a.info("memorySize : "+An+", "+Math.floor(An/1024/1024)+"M"),e[l]&&(e[l].tvid!==Dt.a.tvId&&e[l].tvid!==Dt.a.lastReadTvID&&0===e[l].status&&(e[l].status=1),1===e[l].status?(An-=e[l].memory,Dn(e[l].alias)):qn(e[l].alias));setTimeout(On,6e4)}function Rn(){var e,t=[],n=Sn(wn.values);try{for(n.s();!(e=n.n()).done;){var r=hn()(e.value,2)[1];t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t}var Ln=Object.defineProperties({getSegment:function(e){return wn.get(e)},hasSegment:function(e){return wn.has(e)},setSegment:function(e,t){t&&(wn.set(e,t),En||(En=!0,On()))},removeSegment:Dn,setLoadSegment:function(e){if(!In||In.alias!==e)if(e){var t=wn.get(e);t?(In&&In.clearTask(),In&&In.alias===t.alias||(In=t)):In=null}else In&&In.clearTask(),In=null},getSourceDescribe:function(e){Tn.resetData();var t=Rn(),n=0;Tn.set16(e.length),Tn.setCharStr(e);for(var r=0;r<t.length;r++)t[r].vid===e&&n++;Tn.set16(n);for(var i=0;i<t.length;i++)if(t[i].vid===e){var a=t[i].bitmap;Tn.set16(a.data.byteLength+8),Tn.set32(a.alias),Tn.set32(a.size),Tn.setBytes(a.data,0,a.data.byteLength)}return Tn.getData()},destroy:function(){var e,t=Sn(wn.values);try{for(t.s();!(e=t.n()).done;){Dn(hn()(e.value,1)[0])}}catch(n){t.e(n)}finally{t.f()}}},{segmentList:{get:function(){return Rn()},configurable:!0,enumerable:!0},loadSegment:{get:function(){return In},configurable:!0,enumerable:!0},memorySize:{get:function(){return An},configurable:!0,enumerable:!0},size:{get:function(){return wn.size},configurable:!0,enumerable:!0}}),Cn=null,Mn=new Array(5),Nn=new Array(5),Bn=0,Fn=new Map,Un=0,jn=0,Vn=0,Hn=null,Wn=0,zn="",Yn=null,Gn=qt.a.QC005?qt.a.QC005:Math.random().toString(36).substr(2),Qn=function(){function e(){a()(this,e),this.levelID=-1,this.nextReqThreshold=0,Fn.clear(),zn=Dt.a.absDoMain?(Vt.isHTTPS?"https":"http")+"://"+Dt.a.absDoMain+"/ABSRequest":(Vt.isHTTPS?"https":"http")+"://abs.video.iqiyi.com/ABSRequest",this.connectWebscoket(),this.lastLevel=-1,this.receiveCount=0,this.algorithm_des="defal",Yn||Dt.a.getUserInfoFunc(Kn)}return s()(e,[{key:"connectWebscoket",value:function(){this.loader=new XMLHttpRequest,this.loader.responseType="json";var e=this;this.loader.onloadend=function(t){var n=t.currentTarget,r=n.status,i=n.response;r>=200&&r<300?i&&i.errorcode&&"0"===i.errorcode?(e.levelID=parseInt(i.bitrate),e.algorithm_des=i.algorithm_des,e.receiveCount++,Jt.a.info(" receive Message  ~~~~~~~~~~~~~~~~~~~~quality: "+e.levelID+" levelID "+Fn.get(e.levelID)+", msg_seq "+i.msg_seq+" ,algorithm "+e.algorithm_des)):Jt.a.error("ABS proxy return errCode "+JSON.stringify(i)):(e.algorithm_des="connectFailed",Jt.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~status err "+r))},this.loader.onerror=function(t){e.algorithm_des="connectFailed",Jt.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~error "+t)},this.loader.onabort=function(){e.algorithm_des="connectFailed",Jt.a.warn(" receive Message  ~~~~~~~~~~~~~~~~~~~~onabort")}}},{key:"bitrate",get:function(){var e=Dt.a.bid;if(e)return parseInt(e);if(-1!==this.levelID&&Fn.has(this.levelID)){var t=Fn.get(this.levelID);return t>this.lastLevel?(Vn!==this.receiveCount&&(Vn=this.receiveCount,jn++),jn>1?t:this.lastLevel):t<this.lastLevel?(jn=0,t):t}return-1}},{key:"algorithmDes",get:function(){return this.algorithm_des}},{key:"close",value:function(){this.levelID=-1,this.lastLevel=-1,this.nextReqThreshold=0,this.receiveCount=0,this.algorithm_des="defal",Fn.clear(),this.loader&&(this.loader.abort(),Jt.a.warn("abs close,close connnection ")),Hn=Yn=null}},{key:"reportData",value:function(e){var t=this.makeReportJsonData(e);if(t&&this.loader&&("0"!==t.msg_seq||"-1"!==t.report.bandwidthEst))try{this.loader.open("POST",zn,!0),this.loader.withCredentials=!1,this.loader.setRequestHeader("Content-Type","application/json"),Jt.a.info(" send Message  ~~~~~~~~~~~~~~~~~~~~ num "+t.msg_seq+","+JSON.stringify(t)),this.loader.send(JSON.stringify(t))}catch(n){Jt.a.error("ABSStrategy send resquest tryCatchError"+n)}}},{key:"makeReportJsonData",value:function(e){this.lastLevel=e.bid;for(var t=[],n=0;n<e.bidList.length;n++){var r=8*Math.round(e.totalSizeList[n]/e.duration);Fn.get(r)!==e.bidList[n]&&Fn.set(r,e.bidList[n]),0!==e.chunkSizeList[n]&&(Cn={rate:r.toString(),size:e.chunkSizeList[n].toString(),chunkcnt:e.chunk_count.toString()},t.push(Cn))}if(0!==t.length){Yn||Dt.a.getUserInfoFunc(Kn),(isNaN(e.rebuffTime)||!e.rebuffTime||e.rebuffTime<0)&&(e.rebuffTime=0);var i=0;e.index===Un?i+=e.rebuffTime:(Un=e.index,i=e.rebuffTime);var a=Math.round(1e3*e.buffer_level),o=0,s=0,c=0,u=0;e.loadTime>=50&&e.loadSize>0&&(Mn[Bn%Mn.length]=e.loadSize,Nn[Bn%Mn.length]=e.loadTime,Bn++),e.loadSize>0&&e.loadTime>0&&(u=Math.round(e.loadSize/(e.loadTime/1e3)));for(var d=0;d<Mn.length&&Mn[d];d++)o+=Mn[d],s+=Nn[d];o>0&&s>0&&(c=Math.round(o/(s/1e3)));var l=e.loadSize>0?8*Math.min(c,u):-1,f=8*Math.round(e.size/e.duration);return Hn||(Hn=qt.a.getUserInfoFromCookie()),{clientid:Gn,version:"0.5.1",client_version:"111",msg_seq:(Wn++).toString(),msgid:"3",device_type:"pc",isp:Hn.userNetType,city:Hn.userArea,isvip:Yn?"1":"0",isp2p:(Ln.loadSegment?1:0).toString(),channel_type:"movie",report:{last_chunk_id:e.index.toString(),last_chunk_size:e.lastChunkSize.toString(),last_chunk_quality:f.toString(),chunk_count:e.chunk_count.toString(),buffer_level:a.toString(),rebuff_time:Math.round(i).toString(),bandwidthEst:l.toString(),next_chunk_info:t,buffer_array:e.bufferArr,bufffer_step:e.bufferUpdateStep.toString()}}}}}],[{key:"clearRaiseLevelCount",value:function(){jn=0}}]),e}();function Kn(e){Yn=e}var $n,Zn,Xn=n(289),Jn=n.n(Xn),er=1,tr=3,nr=4,rr=5,ir=function(){function e(t){a()(this,e),this.name=t,this._count=0}return s()(e,[{key:"toString",value:function(){return this._count.toString()}},{key:"add",value:function(e){this._count+=e}},{key:"reset",value:function(){this._count=0}}]),e}(),ar={stratus_connectCnt:new ir("scnt"),stratus_connectSuccess:new ir("sscu"),stratus_duration:new ir("sdur"),stratus_break:new ir("sbrk"),cdn_taskCnt:new ir("ctct"),cdn_progressCnt:new ir("cpct"),cdn_progressTime:new ir("cptm"),cdn_loadTime:new ir("cltm"),dispatchKey_Cnt:new ir("dkcnt"),dispatchKey_Done:new ir("dkdon"),dispatch_Cnt:new ir("dict"),dispatch_doneCount:new ir("ddct"),dispatch_duration:new ir("ddur"),change_definition:new ir("cdef"),init:function(){$n||($n=[this.stratus_connectCnt,this.stratus_connectSuccess,this.stratus_duration,this.stratus_break,this.cdn_taskCnt,this.cdn_progressCnt,this.cdn_progressTime,this.cdn_loadTime,this.dispatchKey_Cnt,this.dispatchKey_Done,this.dispatch_Cnt,this.dispatch_doneCount,this.dispatch_duration,this.change_definition])},reset:function(){for(var e=0;e<$n.length;e++)$n[e].reset()},tail:function(e){for(var t=0;t<$n.length;t++)e[$n[t].name]=$n[t].toString()}},or=0,sr=0,cr=0,ur=0,dr=0,lr=0,fr=0,hr=0,pr=0,_r=!1;function vr(){var e;ar.init(),_r=!0,(++gr>=4||or-dr+(sr-lr)+(cr-fr)>12582912)&&((e={t:"h5timing"}).lp2p=sr-lr,e.up2p=cr-fr,e.lcdn=or-dr,e.used=ur-hr,ar.tail(e),e.dats=Et.b.videoDataSize,e.srcn=Ln.size,e.plydu=Dt.a.playDuration-pr,e.lmax=Dt.a.downMax,yr(e),ar.reset(),dr=or,lr=sr,fr=cr,hr=ur,pr=Dt.a.playDuration,gr=0),Zn=setTimeout(vr,1e4)}var gr=0;function yr(e){if(_r){var t=qt.a.getUserInfoFromCookie();e.uid=Dt.a.uuid,e.uif=t.userInfo,e.tvid=Dt.a.tvId,e.tkip=Dt.a.trackerIP,e.lstws=t.ws,e.lstidc=t.idc,e.ver=Et.i.version,e.cal=or,e.pal=sr,qt.a.fireUrl(e,"//msg.qy.net/vodpb.gif")}}var mr,br,kr=Object.defineProperties({start:function(){Dt.a.platform!==tr&&(_r||vr())},stop:function(){_r=!1,clearTimeout(Zn)},check:function(e){_r&&(e.t="h5check",yr(e))},addPBItem:function(e,t){t?e.add(t):e.add(1)}},{cdnSize:{get:function(){return or},set:function(e){or=e},configurable:!0,enumerable:!0},p2pSize:{get:function(){return sr},set:function(e){sr=e},configurable:!0,enumerable:!0},upSize:{get:function(){return cr},set:function(e){cr=e},configurable:!0,enumerable:!0},usedSize:{get:function(){return ur},set:function(e){ur=e},configurable:!0,enumerable:!0}}),xr=0,Tr=0,Sr=null;var Pr=Object.defineProperties({resetData:function(e){if(e){if(e instanceof ArrayBuffer)Tr=e.byteLength,Sr=new Uint8Array(e);else{if(!(e instanceof Uint8Array))return;Tr=e.byteLength,Sr=e}xr=0}},getStr:function(e){if(!Sr)return"";var t=Math.ceil(e/2),n=e%2;if(xr+t>Tr&&(t=Tr-xr),t<=0)return"";for(var r="",i=0;i<t;i++){var a=Sr[xr+i],o=void 0;1===n&&i===t-1?r+=Math.floor(a/15).toString(16):(o=a%15,r+=Math.floor(a/15).toString(16)+o.toString(16))}return xr+=t,r},getCharStr:function(e){if(!Sr)return"";var t=Math.ceil(e);if(xr+t>Tr&&(t=Tr-xr),t<=0)return"";for(var n="",r=0;r<t;r++){n+=Sr[xr+r].toString(16)}return xr+=t,n},getUTF8Str:function(e){if(!Sr)return"";var t=Math.ceil(e);if(xr+t>Tr&&(t=Tr-xr),t<=0)return"";for(var n="",r=0;r<t;r++){var i=Sr[xr+r];n+=String.fromCharCode(i)}return xr+=t,n},get8:function(){if(!Sr||xr+1>Tr)return 0;var e=Sr[xr];return xr+=1,e},get16:function(){if(!Sr||xr+2>Tr)return 0;var e=256*Sr[xr]+Sr[xr+1];return xr+=2,e},get32:function(){if(!Sr||xr+4>Tr)return 0;var e=16777216*Sr[xr]+65536*Sr[xr+1]+256*Sr[xr+2]+Sr[xr+3];return xr+=4,e},getBytes:function(e){if(!Sr||xr+e>Tr)return null;var t=Sr.subarray(xr,xr+e);return xr+=e,t},clear:function(){Sr=null},crc:function(){for(xr=Tr-4,mr=Math.floor(Tr/4),br=0;br<4;){if(Sr[xr+br]!==Sr[br*mr])return!1;br++}return!0},toString:function(){for(var e="",t=Tr<=64?Tr:64,n=0;n<t;n++){var r=Sr[n];e+=r<16?"0"+r.toString(16):r.toString(16),n<t-1&&(e+="-")}return e}},{position:{set:function(e){xr=e},get:function(){return xr},configurable:!0,enumerable:!0},length:{get:function(){return Tr},configurable:!0,enumerable:!0}}),wr=function(){function e(t,n,r){a()(this,e),this.socket=null,this.trackerStateFun=r,this.uid="",this.startTime=0,this.watcherStep=0,this.retryStep=0,this.pbTimer=0,this.reconnectCnt=0,this.id=t,this.firstIPInfo=n,this.running=!0,this.open=!1,this.cdnSize=0,this.p2pSize=0,this.upSize=0,this.usedSize=0,this.connectCnt=0,this.connectDoneCnt=0,this.last_cdnSize=0,this.last_p2pSize=0,this.last_upSize=0,this.last_usedSize=0,this.lastConnectCnt=0,this.lastConnectDoneCnt=0,this.trackerIPBase=0,this.connect()}return s()(e,[{key:"connect",value:function(){if("off"!==Dt.a.limitP2P&&Et.h.openP2P){if(clearTimeout(this.retryStep),this.retryStep=0,this.reconnectCnt++,this.reconnectCnt%6==3&&this.trackerIPBase++,this.reconnectCnt%6>=3||Dt.a.trackerStatus){var e=qt.a.getUserInfoFromCookie(),t=qt.a.getTrackerIP(e.userNetType,Et.g.tracker,this.id,this.trackerIPBase);""!==t&&(this.firstIPInfo=t)}var n=this.firstIPInfo.split("|");this.ip=n[0],this.trackerPort=n[1],this.SDomain=n[2],this.StrackerPort=n[3],this.runWSS="wss"===n[5],Dt.a.trackerIP=this.ip,kr.addPBItem(ar.stratus_connectCnt);var r=this;try{Vt.isHTTPS||this.runWSS?this.socket=new WebSocket("wss://"+this.SDomain+":"+this.StrackerPort+"/ws",["binary"]):this.socket=new WebSocket("ws://"+this.ip+":"+this.trackerPort+"/ws",["binary"]),this.socket.binaryType="arraybuffer",this.socket.onopen=function(e){r.onOpen.call(r,e)},this.socket.onmessage=function(e){r.onData.call(r,e)},this.socket.onerror=function(e){r.onError.call(r,e)},this.socket.onclose=function(e){r.onClose.call(r,e)},Jt.a.info("tracker [START] IP : "+this.ip+":"+this.trackerPort)}catch(i){}this.startTime=Date.now(),clearTimeout(this.watcherStep),this.watcherStep=setTimeout((function(){r.heartBeat.call(r)}),6e3),clearTimeout(this.pbTimer),this.pbTimer=setTimeout((function(){r.firePB.call(r)}),2e4)}}},{key:"onOpen",value:function(e){Jt.a.info("tracker [SUCCESS] IP : "+this.ip+":"+this.trackerPort),kr.addPBItem(ar.stratus_connectSuccess),kr.addPBItem(ar.stratus_duration,Date.now()-this.startTime),this.open=!0,this.register()}},{key:"onTimeout",value:function(){this.running&&(Jt.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : connect timeout"),this.error())}},{key:"onClose",value:function(e){this.running&&(kr.addPBItem(ar.stratus_break),Jt.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onClose-"+e.data),this.error())}},{key:"onError",value:function(e){this.running&&(Jt.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onError-"+e.data),this.error())}},{key:"error",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.CLOSED&&Date.now()-this.startTime>6e4){this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null;var e=this;e.retryStep=setTimeout((function(){e.connect.call(e)}),2e3)}}},{key:"onData",value:function(e){try{if("off"===Dt.a.limitP2P||!Et.h.openP2P)return void this.error();if(Pr.resetData(e.data),Ir=Pr.get16(),this.running&&this.socket)switch(Ir){case 1:0===(qr=Pr.get16())?(Er=Pr.get16(),Dr=Pr.getCharStr(Er),this.uid=Dr,Dt.a.trackerStatus=Pr.get8(),Dt.a.trackerStatus&&(this.trackerIPBase++,this.socket.close()),Jt.a.info("[P2P load], onRegister uid : "+this.uid),this.onMsg(Ur.State_register,this.uid)):(Jt.a.warn("tracker [ERROR] register error"),this.error());break;case 3:if(0===(qr=Pr.get16())){Lr=Pr.get16();for(var t=0;t<Lr;t++){Cr=Pr.get16(),Mr=Pr.getCharStr(Cr),Nr=Pr.get16();for(var n=0;n<Nr;n++){Br=Pr.get16(),Fr=Pr.getCharStr(Br),Ar=Pr.get32();for(var r=0;r<Ln.segmentList.length;r++)Ln.segmentList[r].p2pID===this.id&&Ln.segmentList[r].vid===Mr&&Ln.segmentList[r].index===Fr&&(Ln.segmentList[r].peerCnt=Ar)}}}else 400===qr?(kr.addPBItem(ar.stratus_break),this.error()):Jt.a.warn("tracker [ERROR] update error");break;case 4:if(0===(qr=Pr.get16())){if(this.trackerStateFun){var i=Pr.get32();Ar=Pr.get16(),"[ ";for(var a=[],o=0;o<Ar;o++)Er=Pr.get16(),(Dr=Pr.getCharStr(Er))+"-",a.push(Dr);if(this.peerSegment){" ]";var s=Pr.get16(),c=[];" , vidList : [ ";for(var u=0;u<s;u++)Cr=Pr.get16(),Mr=Pr.getCharStr(Cr),i=Pr.get32(),c.push({vid:Mr,count:i}),"("+Mr+":"+i+")-";" ]",this.peerSegment.checkDefinition(c),this.peerSegment=null}this.onMsg(Ur.State_upDatePeers,this.uid,a)}}else 400===qr?(kr.addPBItem(ar.stratus_break),this.error()):Jt.a.warn("tracker [ERROR] query error");break;case 5:Er=Pr.get16(),Dr=Pr.getCharStr(Er),Or=Pr.get16(),(Rr=Pr.getUTF8Str(Or))&&Dr&&this.trackerStateFun&&this.onMsg(Ur.State_candidate,Dr,JSON.parse(Rr));break;case 6:Er=Pr.get16(),Dr=Pr.getCharStr(Er),Or=Pr.get16(),(Rr=Pr.getUTF8Str(Or))&&Dr&&this.trackerStateFun&&this.onMsg(Ur.State_offer,Dr,JSON.parse(Rr));break;case 7:Er=Pr.get16(),Dr=Pr.getCharStr(Er),Or=Pr.get16(),(Rr=Pr.getUTF8Str(Or))&&Dr&&this.trackerStateFun&&this.onMsg(Ur.State_answer,Dr,JSON.parse(Rr));break;case 2:break;default:Jt.a.warn("[P2P load],tracker [ERROR] not Support token : "+Ir)}}catch(d){}}},{key:"onMsg",value:function(e,t,n){throw"virtual method"}},{key:"register",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Tn.resetData(),Tn.set16(1),Tn.set16(Et.g.trackerVersion),Tn.set16(this.uid.length),Tn.setCharStr(this.uid),Tn.set16(Dt.a.platform),Tn.set16(Dt.a.aid.length),Tn.setCharStr(Dt.a.aid);var e=Tn.getReferData();this.socket.send(e)}catch(t){}else kr.addPBItem(ar.stratus_break),this.error()}},{key:"unRegister",value:function(){}},{key:"heartBeat",value:function(){var e=this;if(clearTimeout(this.watcherStep),this.running&&this.open&&this.socket&&this.socket.readyState===WebSocket.OPEN){try{if(Tn.resetData(),Tn.set16(3),!0===Et.h.p2pUpLoad){for(var t=[],n=0;n<Ln.segmentList.length;n++)Ln.segmentList[n].p2pID===this.id&&(t.push(Ln.segmentList[n].index),t.push(Ln.segmentList[n].vid));Tn.set16(t.length/2);for(var r=0;r<t.length;r+=2)Tn.set16(t[r].length),Tn.setCharStr(t[r]),Tn.set16(t[r+1].length),Tn.setCharStr(t[r+1])}var i=Tn.getReferData();i&&this.socket.send(i)}catch(a){}this.pbTimer=setTimeout((function(){e.firePB.call(e)}),100)}else kr.addPBItem(ar.stratus_break),this.error();this.watcherStep=setTimeout((function(){e.heartBeat.call(e)}),2e4)}},{key:"getPeer",value:function(e){if(this.peerSegment=e,this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{var t=e.vid,n=e.vids,r=e.index;if(Tn.resetData(),Tn.set16(4),Tn.set16(t.length),Tn.setCharStr(t),Tn.set16(r.length),Tn.setCharStr(r),n&&n.length>0){Tn.set16(n.length);for(var i=0;i<n.length;i++)Tn.set16(n[i].vid.length),Tn.setCharStr(n[i].vid)}else Tn.set16(1),Tn.set16(t.length),Tn.setCharStr(t);var a=Tn.getReferData();this.socket.send(a)}catch(o){}else kr.addPBItem(ar.stratus_break),this.error()}},{key:"candidate",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Rr=JSON.stringify(t),Tn.resetData(),Tn.set16(5),Tn.set16(e.length),Tn.setCharStr(e),Tn.set16(Rr.length),Tn.setUTF8Str(Rr);var n=Tn.getReferData();this.socket.send(n)}catch(r){}else kr.addPBItem(ar.stratus_break),this.error()}},{key:"offer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Rr=JSON.stringify(t),Tn.resetData(),Tn.set16(6),Tn.set16(e.length),Tn.setCharStr(e),Tn.set16(Rr.length),Tn.setUTF8Str(Rr);var n=Tn.getReferData();this.socket.send(n)}catch(r){}else kr.addPBItem(ar.stratus_break),this.error()}},{key:"answer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Rr=JSON.stringify(t),Tn.resetData(),Tn.set16(7),Tn.set16(e.length),Tn.setCharStr(e),Tn.set16(Rr.length),Tn.setUTF8Str(Rr);var n=Tn.getReferData();this.socket.send(n)}catch(r){}else kr.addPBItem(ar.stratus_break),this.error()}},{key:"firePB",value:function(){if(clearTimeout(this.pbTimer),Dt.a.platform!==tr)if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Tn.resetData(),Tn.set16(256),Tn.set32(this.cdnSize-this.last_cdnSize),Tn.set32(this.p2pSize-this.last_p2pSize),Tn.set32(this.usedSize-this.last_usedSize),Tn.set32(this.upSize-this.last_upSize),Tn.set32(Et.b.videoDataSize),Tn.set32(0),Tn.set32(this.connectCnt-this.lastConnectCnt),Tn.set32(this.connectDoneCnt-this.lastConnectDoneCnt),Dt.a.MixWaterMark&&Dt.a.sendPingBack({type:"BWReport",para:{cdnsize:this.cdnSize-this.last_cdnSize,p2psize:this.p2pSize-this.last_p2pSize,usesize:this.upSize-this.last_upSize}}),Tn.set16(Dt.a.platform);var e=Tn.getReferData();this.socket.send(e),this.last_cdnSize=this.cdnSize,this.last_p2pSize=this.p2pSize,this.last_upSize=this.upSize,this.last_usedSize=this.usedSize,this.lastConnectCnt=this.connectCnt,this.lastConnectDoneCnt=this.connectDoneCnt}catch(t){}else kr.addPBItem(ar.stratus_break),this.error()}},{key:"fireConnectOK",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Tn.resetData(),Tn.set16(260),Tn.set16(e.length),Tn.setCharStr(e),Tn.set16(t);var n=Tn.getReferData();this.socket.send(n)}catch(r){}}},{key:"clear",value:function(){try{this.running=!1,this.open=!1,this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null),clearTimeout(this.retryStep),clearTimeout(this.watcherStep),clearTimeout(this.pbTimer)}catch(e){}}}]),e}(),Ir=null,Ar=0,Er=0,Dr="",qr=0,Or=0,Rr="",Lr=0,Cr=0,Mr="",Nr=0,Br=0,Fr="",Ur={State_upDatePeers:"State_upDatePeers",State_register:"State_register",State_candidate:"State_candidate",State_offer:"State_offer",State_answer:"State_answer",State_Error:"State_error"},jr=wr,Vr={bundlePolicy:"max-compat",iceServers:[],iceTransportPolicy:"all",rtcpMuxPolicy:"require",candidateNetworkPolicy:"ALL"},Hr=[],Wr=[],zr=[],Yr=0;function Gr(e){return Hr&&Hr.length>0&&-1!==Hr.indexOf(e)}var Qr={has:Gr,get:function(e){var t=Hr.indexOf(e);return-1!==t?Wr[t]:null},use:function(e){if(Vr.iceServers=Et.g.stun,Vr.iceServers.length<=0)return!1;if(Gr(e))return!0;for(var t=0;t<zr.length;t++)Date.now()-zr[t]>3e5&&zr.splice(t,1);if(Hr.length+zr.length>Et.g.RTCPoolSize||Yr>Et.g.RTCMax)return!1;++Yr>=2*Et.g.RTCMax/3&&(Et.g.switchPage=!0);try{Wr.push({rtc:new RTCPeerConnection(Vr),channel:null})}catch(n){return!1}return Hr.push(e),!0},shut:function(e){var t=Hr.indexOf(e);if(-1!==t){if(delete Hr[t],Hr[t]=null,Hr.splice(t,1),null!==Wr[t].channel){delete Wr[t].channel.onopen,Wr[t].channel.onopen=null,delete Wr[t].channel.onclose,Wr[t].channel.onclose=null,delete Wr[t].channel.onerror,Wr[t].channel.onerror=null,delete Wr[t].channel.onmessage,Wr[t].channel.onmessage=null;try{Wr[t].channel.close()}catch(n){}delete Wr[t].channel,Wr[t].channel=null}if(null!==Wr[t].rtc){delete Wr[t].rtc.oniceconnectionstatechange,Wr[t].rtc.oniceconnectionstatechange=null,delete Wr[t].rtc.onicecandidate,Wr[t].rtc.onicecandidate=null,delete Wr[t].rtc.ondatachannel,Wr[t].rtc.ondatachannel=null;try{Wr[t].rtc.close()}catch(n){}delete Wr[t].rtc,Wr[t].rtc=null}zr.push(Date.now()),delete Wr[t],Wr[t]=null,Wr.splice(t,1)}}},Kr=1e3,$r=512,Zr=[],Xr=0,Jr=.024,ei=0,ti=0,ni=0,ri=-1,ii=1536,ai=1536,oi=0;var si=Object.defineProperties({check:function(){if(!((ri=Date.now())<=ti)){if((oi=ri-ti)>=Kr){ii=ai,function(){var e=0;for(var t in Zr)if(!t||Zr[t].time+Zr[t].rto+500<ri){var n=Zr.splice(e,1)[0];Xr-=n.cont}else e++}(),ti=ri;var e=ei/oi;ei=0,Jr+=.25*(e-Jr)}ri<=ni||(oi=ri-ni)>0&&(ni=ri,function(e){for(;Xr>0&&e>1;){var t=Zr.shift();if(Xr-=t.cont,e-=t.cont,t)try{if(Qr.has(t.id)&&null!==Qr.get(t.id).channel&&"open"===Qr.get(t.id).channel.readyState)try{Qr.get(t.id).channel.send(t.args)}catch(n){}}catch(n){}}}(Math.min(Jr+Xr/Kr,$r/Kr)*oi))}},pushTsk:function(e,t,n,r){return!(Xr>=$r)&&(Zr.push({args:t,id:e,rto:n,time:ri,cont:r}),Xr+=r,ei+=r,!0)},removeTsk:function(e){var t=0;for(var n in Zr)if(Zr[n].id===e){var r=Zr.splice(t,1)[0];Xr-=r.cont}else t++}},{sendMax:{set:function(e){$r=e},configurable:!0,enumerable:!0},loadQuota:{get:function(){return ii},set:function(e){ii=e},configurable:!0,enumerable:!0},loadQuotaMax:{set:function(e){ai=e},configurable:!0,enumerable:!0}}),ci=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;a()(this,e),this.alias=n,this.gpID=-1,t&&(this.size=t,this.data=new Uint8Array(Math.ceil(this.size/8)))}return s()(e,[{key:"getBit",value:function(e){if(e>=0&&e<this.size){var t=e%8,n=Math.floor(e/8);return 0!=(this.data[n]&1<<t)}return!1}},{key:"setBit",value:function(e,t){if(e>=0&&e<this.size){var n=e%8,r=Math.floor(e/8);this.data[r]=!0===t?this.data[r]|1<<n:this.data[r]&~(1<<n)}}},{key:"getByte",value:function(e){return e>=0&&e+8<=this.size&&e%8==0&&255===this.data[Math.floor(e/8)]}},{key:"setByte",value:function(e,t){e>=0&&e<this.size&&e%8==0&&(this.data[Math.floor(e/8)]=t?255:0)}},{key:"checkRange",value:function(e,t){for(t>this.size&&(t=this.size);e<t;)if(e%8==0&&e+8<=t){if(255!==this.data[Math.floor(e/8)])return!1;e+=8}else{if(!this.getBit(e))return!1;e++}return!0}},{key:"toData",value:function(){return Tn.resetData(),Tn.set32(this.alias),Tn.set32(this.size),Tn.setBytes(this.data,0,this.data.byteLength),Tn.getData()}},{key:"fromData",value:function(e){Pr.resetData(e),this.alias=Pr.get32(),this.size=Pr.get32(),this.data=Pr.getBytes(e.byteLength-8)}},{key:"resetGap",value:function(e){if((0===e||e)&&-1!==e)for(this.gpID=e;this.gpID<this.size&&!this.getBit(this.gpID);)this.gpID++}},{key:"toString",value:function(){for(var e="",t=0,n=this.size;t<n;)e+=this.getBit(t)?"*":"_",++t%128==0&&(e+="\r\n");return e+="|"}},{key:"reset",value:function(e){for(var t=0;t<Math.ceil(this.size/8);t++)this.data[t]=e?255:0}},{key:"clear",value:function(){delete this.data,this.head&&delete this.head}}]),e}(),ui=0,di=0,li=1,fi=2,hi=3,pi=4,_i=5,vi=6,gi="0",yi="3",mi="5",bi="7",ki="11",xi="15",Ti="19",Si={ordered:!1},Pi=function(){function e(t,n,r,i){a()(this,e);var o=this;if(this.peerMgr=t,this.active=r,this.peerID=n,this.ready=!1,this.timeStep=-1,this.lastEventTime=-1,this.connectionState="new",this.workTime=0,this.natUseTime=0,this.natStartTime=-1,this.rtc.oniceconnectionstatechange=function(e){o.connectionState=e.currentTarget.iceConnectionState},this.rtc.onicecandidate=function(e){e.candidate&&o.peerMgr&&o.peerMgr.candidate(o.peerID,e.candidate)},this.active){try{this.getDataChannel(this.rtc.createDataChannel(null,Si))}catch(s){}this.peerMgr.connectCnt++,this.rtc.createOffer().then((function(e){o.rtc.setLocalDescription(e)["catch"]((function(e){Jt.a.error("RTC set local SDP error:"+e)})),o.peerMgr&&o.peerMgr.offer(o.peerID,e)}))["catch"]((function(e){Jt.a.error("RTC create offer SDP error:"+e),o.peerMgr&&o.peerMgr.removePeerNode(o.peerID,yi)})),o.natStartTime=Date.now(),o.timeStep=setTimeout((function(){o.onNATTimeout.call(o)}),Et.g.NATTimeoutStep)}else this.rtc.setRemoteDescription(new RTCSessionDescription(i))["catch"]((function(e){Jt.a.error("RTC set remote SDP error:"+e)})),this.rtc.ondatachannel=function(e){o.getDataChannel(e.channel)},this.rtc.createAnswer().then((function(e){o.rtc.setLocalDescription(e).then((function(){o.peerMgr&&o.peerMgr.answer(o.peerID,e)}))["catch"]((function(e){Jt.a.error("RTC set local SDP error:"+e),o.peerMgr&&o.peerMgr.removePeerNode(o.peerID,yi)}))}))["catch"]((function(e){Jt.a.error("RTC create answer error:"+e),o.peerMgr&&o.peerMgr.removePeerNode(o.peerID,yi)})),o.natStartTime=Date.now(),o.timeStep=setTimeout((function(){o.onNATTimeout.call(o)}),Et.g.NATTimeoutStep-1e3)}return s()(e,[{key:"baseCheck",value:function(){return!(-1!==this.lastEventTime&&Date.now()-this.lastEventTime>=Et.g.NATTimeoutStep)||(this.peerMgr.removePeerNode(this.peerID,mi),!1)}},{key:"fireData",value:function(t,n){if(this.ready&&null!==this.rtc&&null!==this.dataChannel){var r=null;switch(t){case di:if((r=e.pkgQuit())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){Jt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case li:if((r=e.pkgHeartBeat(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){Jt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case fi:if((r=e.pkgRequest(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){Jt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case pi:if((r=e.pkgClear())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){Jt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case _i:if((r=e.pkgRefuse())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){Jt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case vi:if((r=e.pkgDescribe(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){Jt.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}}}}},{key:"onData",value:function(t){if(t&&null!==this.rtc&&null!==this.dataChannel)if(t[0]!==ui)this.peerMgr.removePeerNode(this.peerID,bi);else switch(this.lastEventTime=Date.now(),t[1]){case di:this.onQuit&&this.onQuit(e.unPkgQuit(t));break;case li:this.onHeartbeat&&this.onHeartbeat(e.unPkgHeartBeat(t));break;case fi:this.onRequest&&this.onRequest(e.unPkgRequest(t));break;case hi:this.onReceive&&this.onReceive(e.unPkgReceive(t));break;case pi:this.onClear&&this.onClear(e.unPkgClear(t));break;case _i:this.onRefuse&&this.onRefuse(e.unPkgRefuse(t));break;case vi:this.onDescribe&&this.onDescribe(e.unPkgDescribe(t))}}},{key:"onQuit",value:function(){throw"virtual method"}},{key:"onHeartbeat",value:function(){throw"virtual method"}},{key:"onRequest",value:function(){throw"virtual method"}},{key:"onReceive",value:function(){throw"virtual method"}},{key:"onClear",value:function(){throw"virtual method"}},{key:"onRefuse",value:function(){throw"virtual method"}},{key:"onDescribe",value:function(){throw"virtual method"}},{key:"getDataChannel",value:function(e){var t=this;this.dataChannel=e,this.dataChannel.onopen=function(){t.ready=!0,clearTimeout(t.timeStep),0===t.workTime&&(t.workTime=Date.now()),0===t.natUseTime&&(t.natUseTime=Date.now()-t.natStartTime),t.active&&(t.peerMgr.connectDoneCnt++,t.peerMgr.fireConnectOK(t.peerID,t.natUseTime)),t.lastEventTime=Date.now()},this.dataChannel.onclose=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,yi)},this.dataChannel.onerror=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,yi)},this.dataChannel.onmessage=function(e){t.onData(new Uint8Array(e.data))}}},{key:"close",value:function(){clearTimeout(this.timeStep),delete this.peerMgr,this.peerMgr=null,this.ready=!1}},{key:"rtc",get:function(){return Qr.get(this.peerID).rtc}},{key:"dataChannel",get:function(){return Qr.get(this.peerID).channel},set:function(e){return Qr.get(this.peerID).channel=e}},{key:"offer",value:function(e){}},{key:"answer",value:function(e){this.rtc.setRemoteDescription(new RTCSessionDescription(e))["catch"]((function(e){console.log("RTC answer be reject:"+e)}))}},{key:"candidate",value:function(e){this.rtc.addIceCandidate(new RTCIceCandidate(e))["catch"]((function(e){console.log("RTC candidate fail:"+e)}))}},{key:"onNATTimeout",value:function(){this.peerMgr.removePeerNode(this.peerID,mi)}}],[{key:"pkgQuit",value:function(){return Tn.resetData(),Tn.set8(ui),Tn.set8(di),Tn.crc(),Tn.getReferData()}},{key:"unPkgQuit",value:function(e){return Pr.resetData(e),this.QuitParam||(this.QuitParam={}),this.QuitParam.version=Pr.get8(),this.QuitParam.type=Pr.get8(),this.QuitParam.crc=Pr.crc(),this.QuitParam}},{key:"pkgHeartBeat",value:function(e){Tn.resetData(),Tn.set8(ui),Tn.set8(li),Tn.set32(e.localID);var t=0;return null!==e.bitmap&&(t+=1),Tn.set8(t),Tn.set8(e.lostR),Tn.set8(e.vid.length),Tn.setCharStr(e.vid),Tn.set8(e.sourceID.length),Tn.setCharStr(e.sourceID),Tn.set32(e.alias),null!==e.bitmap&&(Tn.set8(e.bitmap.byteLength),Tn.setBytes(e.bitmap,0,e.bitmap.byteLength)),Tn.crc(),Tn.getReferData()}},{key:"unPkgHeartBeat",value:function(e){Pr.resetData(e),this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.version=Pr.get8(),this.heartbeatParam.type=Pr.get8(),this.heartbeatParam.localID=Pr.get32();var t=Pr.get8();this.heartbeatParam.lostR=Pr.get8();var n=Pr.get8();return this.heartbeatParam.vid=Pr.getCharStr(n),n=Pr.get8(),this.heartbeatParam.sourceID=Pr.getCharStr(n),this.heartbeatParam.alias=Pr.get32(),1&t?(n=Pr.get8(),this.heartbeatParam.bitmap=Pr.getBytes(n)):this.heartbeatParam.bitmap=null,this.heartbeatParam.crc=Pr.crc(),this.heartbeatParam}},{key:"pkgRequest",value:function(e){if(e.length>0){for(Tn.resetData(),Tn.set8(ui),Tn.set8(fi),Tn.set32(e[0].alias),Tn.set8(e.length);e.length>0;){var t=e.shift();Tn.set32(t.subPieceID)}return Tn.crc(),Tn.getReferData()}return null}},{key:"unPkgRequest",value:function(e){Pr.resetData(e),this.requestParam||(this.requestParam={}),this.requestParam.version=Pr.get8(),this.requestParam.type=Pr.get8(),this.requestParam.alias=Pr.get32(),this.requestParam.taskLen=Pr.get8(),this.requestParam.requireTaskList||(this.requestParam.requireTaskList=[]),this.requestParam.requireTaskList.length=0;for(var t=0;t<this.requestParam.taskLen;)this.requestParam.requireTaskList.push(Pr.get32()),t++;return this.requestParam.crc=Pr.crc(),this.requestParam}},{key:"unPkgReceive",value:function(e){Pr.resetData(e),this.receiveParam||(this.receiveParam={}),this.receiveParam.version=Pr.get8(),this.receiveParam.type=Pr.get8(),this.receiveParam.alias=Pr.get32(),this.receiveParam.sIDList?this.receiveParam.sIDList.length=0:this.receiveParam.sIDList=[],this.receiveParam.dataList?this.receiveParam.dataList.length=0:this.receiveParam.dataList=[];for(var t=Pr.get8(),n=0;n<t;)this.receiveParam.sIDList[n]=Pr.get32(),this.receiveParam.dataList[n]=Pr.getBytes(Et.b.subPieceSize),n++;return this.receiveParam.crc=Pr.crc(),this.receiveParam}},{key:"pkgClear",value:function(){return Tn.resetData(),Tn.set8(ui),Tn.set8(pi),Tn.crc(),Tn.getReferData()}},{key:"unPkgClear",value:function(e){return Pr.resetData(e),this.clearParam||(this.clearParam={}),this.clearParam.version=Pr.get8(),this.clearParam.type=Pr.get8(),this.clearParam.crc=Pr.crc(),this.clearParam}},{key:"pkgRefuse",value:function(){return Tn.resetData(),Tn.set8(ui),Tn.set8(_i),Tn.crc(),Tn.getReferData()}},{key:"unPkgRefuse",value:function(e){return Pr.resetData(e),this.refuseParam||(this.refuseParam={}),this.refuseParam.version=Pr.get8(),this.refuseParam.type=Pr.get8(),this.refuseParam.crc=Pr.crc(),this.refuseParam}},{key:"pkgDescribe",value:function(e){return Tn.resetData(),Tn.set8(ui),Tn.set8(vi),Tn.set16(e.byteLength),Tn.setBytes(e,0,e.byteLength),Tn.crc(),Tn.getReferData()}},{key:"unPkgDescribe",value:function(e){Pr.resetData(e),this.describeParam||(this.describeParam={}),this.describeParam.version=Pr.get8(),this.describeParam.type=Pr.get8();var t=Pr.get16();return this.describeParam.describe=Pr.getBytes(t),this.describeParam.crc=Pr.crc(),this.describeParam}}]),e}();function wi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ii(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ei=Math.floor(4294967295*Math.random()),Di=new ln,qi=function(e){l()(n,e);var t=Ai(n);function n(e,r,i,o){var s;return a()(this,n),(s=t.call(this,e,r,i,o)).checked=!1,s.srtt=0,s.sdev=0,s.quota=32,s.mtu=1,s.lostR=0,s.lostHB=0,s.loadHB=0,s.rcvHB=0,s.upHB=0,s.lostCnt=0,s.loadCnt=0,s.rcvCnt=0,s.upCnt=0,s.peerInfo={loadBitmap:undefined,hasBitmap:!1,sourceID:"",alias:"",vid:"",peerLocalID:"",lostR:0},s.runTaskList=new ln,s.srcDscr=new ln,s.checkRTOLastTime=-1,s.heartbeatLastTime=-1,s.heartbeatCnt=6,s.createdTime=Date.now(),s}return s()(n,[{key:"check",value:function(){this.baseCheck()&&this.ready&&(this.checkHeartbeat()||this.loadTask(),this.checkRTO())}},{key:"checkHeartbeat",value:function(){if(Date.now()-this.heartbeatLastTime>3e3&&Ln.loadSegment){if(this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.localID=Ei,this.heartbeatParam.vid=Ln.loadSegment.vid,this.heartbeatParam.alias=Ln.loadSegment.alias,this.heartbeatParam.sourceID=Ln.loadSegment.sourceID,Ln.preLoadSegment?(this.heartbeatParam.preInfo.alias=Ln.preLoadSegment.alias,this.heartbeatParam.preInfo.sourceID=Ln.preLoadSegment.sourceID):(this.heartbeatParam.preInfo.alias="",this.heartbeatParam.preInfo.sourceID=""),""!==this.peerInfo.alias&&Ln.hasSegment(this.peerInfo.alias)&&!0===Et.h.p2pUpLoad){var e=Ln.getSegment(this.peerInfo.alias);this.heartbeatParam.bitmap=e.bitmap.toData()}else this.heartbeatParam.bitmap=null;return 0===this.loadHB?this.heartbeatParam.lostR=255:this.heartbeatParam.lostR=this.lostR,this.fireData(li,this.heartbeatParam),this.lostHB=0,this.loadHB=0,this.lostR>5?this.lostR-=5:this.lostR=0,this.heartbeatCnt++,this.heartbeatCnt>10&&(this.heartbeatCnt=0,this.fireSourceDescribe()),this.heartbeatLastTime=Date.now(),!0}return!1}},{key:"loadTask",value:function(){if(si.loadQuota>0&&this.peerInfo.hasBitmap&&Ln.loadSegment&&this.peerInfo.loadBitmap.alias===Ln.loadSegment.alias){if(this.quota<this.runTaskList.size)return;var e=Math.max(this.srtt<200?this.quota/2:this.quota/3,1),t=Math.min(this.quota-this.runTaskList.size,e);if(this.taskList||(this.taskList=[]),this.taskList.length=0,Ln.loadSegment.getTasks(this.peerInfo.loadBitmap,this.taskList,t,this.timeout),t-=this.taskList.length,this.taskList.length>0){this.loadHB=this.loadHB+this.taskList.length,this.loadCnt=this.loadCnt+this.taskList.length;for(var n=0;n<this.taskList.length;n++)this.runTaskList.set(this.taskList[n].key,this.taskList[n]);this.fireData(fi,this.taskList),si.loadQuota=si.loadQuota-n}}}},{key:"checkRTO",value:function(){if(!(Date.now()-this.checkRTOLastTime<=500)){this.checkRTOLastTime=Date.now();var e,t=0,n=wi(this.runTaskList.values);try{for(n.s();!(e=n.n()).done;){var r=hn()(e.value,2)[1];if(Date.now()-r.beginTime>r.rto){t++;var i=Ln.getSegment(r.alias);i&&i.recycleP2PTask(r),this.runTaskList.remove(r.key)}}}catch(a){n.e(a)}finally{n.f()}this.updateQuota(t),this.lostCnt=this.lostCnt+t,this.lostHB=this.lostHB+t,this.lostR=this.lostR+t}}},{key:"timeout",get:function(){if(0===this.srtt)return 3e3;var e=Math.min(1e3+500*this.lostR,3e3),t=this.srtt+4*this.sdev+350;return Math.min(t+e,8e3)}},{key:"update_SRTT_SDEV",value:function(e){var t;0===this.srtt?(this.srtt=e,this.sdev=e/2):(t=Math.abs(e-this.srtt),this.srtt=.875*this.srtt+.125*e,this.sdev=this.sdev+.25*(t-this.sdev))}},{key:"updateQuota",value:function(e){e?(this.quota-=Math.sqrt(e/2),this.quota<2&&(this.quota=2)):this.quota<128&&0!==this.srtt&&this.srtt>1&&this.srtt<3e3&&(this.quota+=Math.log(this.srtt+500)/50)}},{key:"onHeartbeat",value:function(e){if(e.crc){if(this.peerInfo.sourceID=e.sourceID,this.peerInfo.alias=e.alias,this.peerInfo.vid=e.vid,this.peerInfo.peerLocalID=e.localID,!1===this.checked){if(Di.has(e.localID))return void this.peerMgr.removePeerNode(this.peerID,Ti);Di.set(e.localID,!0),this.checked=!0}var t=Ln.getSegment(e.alias);t&&e.sourceID!==t.sourceID?this.peerMgr.removePeerNode(this.peerID,xi):(e.bitmap?(this.peerInfo.hasBitmap=!0,this.peerInfo.loadBitmap===undefined&&(this.peerInfo.loadBitmap=new ci),this.peerInfo.loadBitmap.fromData(e.bitmap),Ln.hasSegment(this.peerInfo.loadBitmap.alias)&&this.peerInfo.loadBitmap.resetGap(Ln.getSegment(this.peerInfo.loadBitmap.alias).gpID)):this.peerInfo.hasBitmap=!1,255!==e.lostR&&(this.peerInfo.lostR=e.lostR,0===this.peerInfo.lostR?this.mtu=Math.min(this.mtu+1,16):this.mtu=Math.max(this.mtu-Math.ceil(this.peerInfo.lostR/2),1)))}else this.peerMgr.removePeerNode(this.peerID,xi)}},{key:"onRequest",value:function(e){if(e.crc){var t=e.alias;if(this.requestParam||(this.requestParam={}),this.requestParam.alias=t,this.requestParam.sIDList?this.requestParam.sIDList.length=0:this.requestParam.sIDList=[],this.requestParam.dataList?this.requestParam.dataList.length=0:this.requestParam.dataList=[],Ln.getSegment(t)){for(var r=Ln.getSegment(t),i=0;e.requireTaskList.length>0;){var a=e.requireTaskList.shift(),o=r.requestTask(a);o&&(i<this.mtu?(this.requestParam.dataList[i]=o,this.requestParam.sIDList[i]=a,this.upHB+=o.byteLength,i++):(si.pushTsk(this.peerID,n.pkgReceive(this.requestParam),this.timeout,i)&&(this.upCnt+=i+1),this.requestParam.dataList.length=0,this.requestParam.sIDList.length=0,i=0,this.requestParam.dataList[i]=o,this.requestParam.sIDList[i]=a,i++))}this.requestParam.dataList.length>0&&this.requestParam.sIDList.length>0&&this.requestParam.sIDList.length===this.requestParam.dataList.length&&si.pushTsk(this.peerID,n.pkgReceive(this.requestParam),this.timeout,i)&&(this.upHB+=this.requestParam.dataList.length,this.upCnt+=i+1)}}else this.peerMgr.removePeerNode(this.peerID,xi)}},{key:"onReceive",value:function(e){if(e.crc){var t=Ln.getSegment(e.alias);if(t)for(var n,r;e.sIDList.length>0;){n=e.sIDList.shift(),r=e.alias.toString()+"_"+n.toString();var i=e.dataList.shift();t.addSubPiece(n,i),this.rcvHB+=i.byteLength,this.rcvCnt++,this.runTaskList.has(r)?(this.update_SRTT_SDEV(Date.now()-this.runTaskList.get(r).beginTime),this.runTaskList.remove(r)):this.update_SRTT_SDEV(this.timeout)}}else this.peerMgr.removePeerNode(this.peerID,xi)}},{key:"clearTask",value:function(){var e,t=wi(this.runTaskList.values);try{for(t.s();!(e=t.n()).done;){var n=hn()(e.value,1)[0],r=this.runTaskList.remove(n);if(r){var i=Ln.getSegment(r.alias);i&&i.recycleP2PTask(r)}}}catch(a){t.e(a)}finally{t.f()}}},{key:"onClear",value:function(e){e.crc?si.removeTsk(this.peerID):this.peerMgr.removePeerNode(this,xi)}},{key:"onRefuse",value:function(e){if(e.crc){var t,n=wi(this.runTaskList.values);try{for(n.s();!(t=n.n()).done;){var r=hn()(t.value,1)[0],i=this.runTaskList.remove(r);if(i){var a=Ln.getSegment(i.alias);a&&a.recycleP2PTask(i)}}}catch(o){n.e(o)}finally{n.f()}this.fireData(pi,null)}else this.peerMgr.removePeerNode(this,xi)}},{key:"onQuit",value:function(e){e.crc?this.peerMgr.removePeerNode(this.peerID,gi):this.peerMgr.removePeerNode(this.peerID,xi)}},{key:"fireSourceDescribe",value:function(){if(this.peerInfo.vid){var e=Ln.getSourceDescribe(this.peerInfo.vid);e&&e.byteLength>0&&this.fireData(vi,e)}}},{key:"onDescribe",value:function(e){if(e.crc){if(e.describe){Pr.resetData(e.describe);var t=Pr.get16(),n=Pr.getCharStr(t);if(!Ln.loadSegment||n!==Ln.loadSegment.vid)return;this.srcDscr.clear();for(var r=Pr.get16(),i=0;i<r;i++){t=Pr.get16();var a=new ci;a.alias=Pr.get32(),a.size=Pr.get32(),a.data=Pr.getBytes(t-8),this.srcDscr.set(a.alias,a)}}}else this.peerMgr.removePeerNode(this.peerID,xi)}},{key:"checkHealth",value:function(e){if(this.rcvCnt<=0||this.srcDscr.size<=0)return!1;if(this.peerInfo&&this.peerInfo.hasBitmap&&this.peerInfo.alias===e)return this.peerInfo.loadBitmap.checkRange(Ln.getSegment(e).gpID,Ln.getSegment(e).gpID+8);if(this.srcDscr.has(e)){var t=this.srcDscr.get(e);if(t)return t.checkRange(Ln.getSegment(e).gpID,Ln.getSegment(e).gpID+8)}return!1}},{key:"peerClose",value:function(e){""!==this.peerInfo.peerLocalID&&Di.has(this.peerInfo.peerLocalID)&&e!==Ti&&Di.remove(this.peerInfo.peerLocalID),this.clearTask(),this.close(),delete this.peerMgr,this.peerMgr=null}},{key:"protected",get:function(){return Date.now()-this.createdTime<=3e4}},{key:"reset",value:function(){this.rcvHB=0,this.upHB=0}},{key:"log",get:function(){return" [ "+(this.active?this.ready?"open ":"idle ":"passv")+" ] , nat : "+qt.a.trimNumber(this.natUseTime/1e3,10)+" s , rcvHB : "+qt.a.trimNumber(this.rcvHB/1024,1e3)+" K , rcvCnt : "+qt.a.trimNumber(this.rcvCnt,1e6)+", upHB : "+qt.a.trimNumber(this.upHB/1024,1e3)+" K , upCnt : "+qt.a.trimNumber(this.upCnt,1e6)+", lostHB : "+qt.a.trimNumber(this.lostHB/1024,1e3)+" K , lostCnt : "+qt.a.trimNumber(this.lostCnt,1e5)+"\r\n"}}],[{key:"pkgReceive",value:function(e){for(Tn.resetData(),Tn.set8(ui),Tn.set8(hi),Tn.set32(e.alias),Tn.set8(e.sIDList.length);e.sIDList.length>0;)Tn.set32(e.sIDList.shift()),Tn.setBytes(e.dataList.shift(),0,Et.b.subPieceSize);return Tn.crc(),Tn.getReferData()}}]),n}(Pi);function Oi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ri(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ci=0,Mi=new ln,Ni="",Bi=-1,Fi=!1,Ui="",ji=function(e){l()(n,e);var t=Li(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r,(function(e,t,n){this.onMsg(e,t,n)}))).localID="",i.workPeers=new ln,i.trackerPeers=[],i.upTaskSum=0,i.downTaskSum=0,i.upSpeed=0,i.downSpeed=0,i}return s()(n,[{key:"onMsg",value:function(e,t,n){switch(e){case Ur.State_register:this.localID=t;break;case Ur.State_upDatePeers:this.localID=t,this.updatePeers(n);break;case Ur.State_candidate:this.workPeers.has(t)&&this.workPeers.get(t).candidate(n);break;case Ur.State_offer:this.workPeers.has(t)||this.acceptPeer(t,n);break;case Ur.State_answer:this.workPeers.has(t)&&this.workPeers.get(t).answer(n);break;case Ur.State_Error:}}},{key:"onTimer",value:function(){var e,t=Oi(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){hn()(e.value,2)[1].check()}}catch(n){t.e(n)}finally{t.f()}}},{key:"check",value:function(e){Ln.loadSegment&&Ln.loadSegment.alias!==Ui&&(Fi=!0),this.addPeer(),this.weedOutPeer(),this.connectPeer(),this.upSpeed=0,this.downSpeed=0,Ni="",e&&(Ni+=" ---- tracker ID : "+this.id+" , IP : "+this.ip+" , localD : "+this.localID+"\r\n");var t,n=Oi(this.workPeers.values);try{for(n.s();!(t=n.n()).done;){var r=hn()(t.value,2)[1];e&&(Ni+=r.log),this.upSpeed+=r.upHB,this.downSpeed+=r.rcvHB,this.upTaskSum+=r.upHB,this.downTaskSum+=r.rcvHB,r.reset()}}catch(i){n.e(i)}finally{n.f()}return Ni}},{key:"addPeer",value:function(){(!this.getPeerMark||Fi||this.getPeerMark+Et.g.getPeerIDStep<Date.now())&&Ln.loadSegment&&!Ln.loadSegment.done&&Ln.loadSegment.p2pID===this.id&&(Ui=Ln.loadSegment.alias,Fi=!1,this.getPeerMark=Date.now(),this.getPeer(Ln.loadSegment))}},{key:"weedOutPeer",value:function(){if(!this.weedOutPeerMark||this.weedOutPeerMark+Et.g.weedOutPeerStep<Date.now()){this.weedOutPeerMark=Date.now();var e,t="",n=0,r=Oi(this.workPeers.values);try{for(r.s();!(e=r.n()).done;){var i=hn()(e.value,1)[0],a=this.workPeers.get(i);if(a&&!a["protected"]){var o=a.rcvCnt-(a.rcvCntLT?a.rcvCntLT:0);a.rcvCntLT=a.rcvCnt;var s=a.upCnt-(a.upCntLT?a.upCntLT:0);a.upCntLT=a.upCnt,(s+o<n||0===n)&&(n=s+o,t=a.peerID)}}}catch(c){r.e(c)}finally{r.f()}this.workPeers.size>6&&""!==t&&this.removePeerNode(t,ki)}}},{key:"connectPeer",value:function(){if(-1===Bi||Date.now()-Bi>Et.g.connectPeerStep)for(var e=0;e<this.trackerPeers.length&&Ci<Et.g.connectMax;){e++;var t=this.trackerPeers.shift();if(t&&!this.checkErrPeerID(t)){if(!Qr.use(t)){this.trackerPeers.push(t);continue}this.workPeers.set(t,new qi(this,t,!0)),Ci<Et.g.connectMax&&Ci++,Bi=Date.now();break}}}},{key:"acceptPeer",value:function(e,t){if(Ci<Et.g.passiveMax&&!this.workPeers.has(e)&&Date.now()-Bi>Et.g.connectPeerStep){if(!Qr.use(e))return void this.trackerPeers.push(e);this.workPeers.set(e,new qi(this,e,!1,t)),Ci<Et.g.passiveMax&&Ci++,Bi=Date.now()}}},{key:"checkErrPeerID",value:function(e){if(null===e||""===e||e===this.localID)return!0;if(this.workPeers.has(e))return!0;var t=Mi.get(e);return t&&Date.now()-t.time<t.duration}},{key:"updatePeers",value:function(e){if(e){this.trackerPeers.length=0;for(var t=0;t<e.length;t++){var n=e[t];this.workPeers.has(n)||null===n||""===n||n===this.localID||this.trackerPeers.push(n)}this.connectPeer()}}},{key:"clearTask",value:function(){var e,t=Oi(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){hn()(e.value,2)[1].clearTask()}}catch(n){t.e(n)}finally{t.f()}}},{key:"checkP2PHealth",value:function(e){var t,n=0,r=Oi(this.workPeers.values);try{for(r.s();!(t=r.n()).done;){var i=hn()(t.value,2)[1];i.checkHealth(e)?n++:this.workPeers.size>6&&this.removePeerNode(i.peerID,gi)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"removePeerNode",value:function(e,t){if(this.workPeers.has(e)){this.workPeers.get(e).peerClose(t),this.workPeers.remove(e),Qr.shut(e),Ci>0&&Ci--;var n={};switch(n.time=Date.now(),t){case mi:n.duration=12e4;break;default:n.duration=6e4}var r=Mi.get(e);r?Mi.set(e,{time:n.time,duration:r.duration+n.duration}):Mi.set(e,n)}}},{key:"destroy",value:function(){var e,t=Oi(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){var n=hn()(e.value,1)[0];this.removePeerNode(n,gi),Ci>0&&Ci--}}catch(r){t.e(r)}finally{t.f()}this.workPeers.clear(),this.trackerPeers.length=0,this.clear()}}]),n}(jr),Vi=null,Hi=null,Wi=0,zi=!1,Yi=30;function Gi(){if(Yi>=30){Yi=0;var e=0,t=0;Dt.a.p2pLog="",Vi&&(Dt.a.p2pLog+=Vi.check(Dt.a.onLog),e+=Vi.upSpeed,t+=Vi.downSpeed),Hi&&(Dt.a.p2pLog+=Hi.check(Dt.a.onLog),e+=Hi.upSpeed,t+=Hi.downSpeed),Dt.a.downSpeed=t,Dt.a.upSpeed=e;var n=Math.min(Math.max(Dt.a.upMax,32),768);Math.ceil(Date.now()/1e3%100)<=20?si.sendMax=1.2*n:si.sendMax=.6*n,Ln.loadSegment&&(si.loadQuotaMax=2.5*Ln.loadSegment.rate)}Yi%2==0?(si.check(),Yi++):(Yi++,Vi&&Vi.onTimer(),Hi&&Hi.onTimer()),Wi=setTimeout(Gi,33)}var Qi,Ki,$i,Zi,Xi,Ji,ea={startProxy:function(e,t){zi||(Gi(),zi=!0),null===Vi?Vi=new ji(e,t):null===Hi?Hi=new ji(e,t):Vi.upTaskSum>Hi.upTaskSum?(Hi.destroy(),Hi=new ji(e,t)):(Vi.destroy(),Vi=new ji(e,t))},getProxyByID:function(e){return Vi&&e===Vi.id?Vi:Hi&&e===Hi.id?Hi:null},hasProxyByID:function(e){return!(!Vi||e!==Vi.id)||Hi&&e===Hi.id},getProxyByIPInfo:function(e){return Vi&&e===Vi.firstIPInfo?Vi:Hi&&e===Hi.firstIPInfo?Hi:null},hasProxyByIPInfo:function(e){return!(!Vi||e!==Vi.firstIPInfo)||Hi&&e===Hi.firstIPInfo},destroy:function(){Vi&&Vi.destroy(),Hi&&Hi.destroy(),zi&&(clearTimeout(Wi),Wi=0,zi=!1)}},ta=function(){function e(t,n,r){a()(this,e),this.index=n,this.base=r,this.size=t,this.u8a=null}return s()(e,[{key:"setData",value:function(e,t){if(!this.u8a){Et.b.videoDataSize+=this.size,this.u8a=null;for(var n=0;null===this.u8a;)try{n++,this.u8a=new Uint8Array(this.size)}catch(r){if(n>Et.f)return Jt.a.error("setData Uint8Array tryCatchError"),!1}}return this.u8a.set(e,t-this.base),!0}},{key:"getData",value:function(e,t){return this.u8a?this.u8a.subarray(e-this.base,e-this.base+t):null}},{key:"clear",value:function(){this.u8a&&(Et.b.videoDataSize-=this.size,delete this.u8a)}},{key:"memory",get:function(){return this.u8a?this.size:0}}]),e}(),na=0,ra=Et.b.chunkSize,ia=Et.b.subPieceSize,aa=function(){function e(t){a()(this,e),this.readSize=Math.ceil(t/ia)*ia,this.chunkNum=Math.ceil(this.readSize/ra),this.dataArr=[],this.readLastIndex=0;for(var n=0;n<this.chunkNum;)this.dataArr.push(new ta(ra,n,n*ra)),n++}return s()(e,[{key:"readBytes",value:function(e,t){if(Ki=(Qi=e)+t-1,Qi>=this.readSize||t<=0||Ki>=this.readSize)throw Jt.a.warn("readBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+Qi+" _eRGPos : "+Ki+" dataLen: "+t),"readBytes param Error!";$i=Math.floor(Qi/ra),Zi=Math.floor(Ki/ra);for(var n=0,r=null,i=0;null===r;)try{i++,r=new Uint8Array(t)}catch(o){if(i>Et.f)return Jt.a.error("readBytes Uint8Array tryCatchError"),++na>Et.f&&(en.errorStage="memoryAllocErr",en.errorFragment=this),null}for(;$i<=Zi;){Qi>=(Xi=$i*ra)&&(Xi=Qi),(Ji=$i*ra+ra-1)>=Ki&&(Ji=Ki);var a=this.dataArr[$i].getData(Xi,Ji-Xi+1);a&&r.set(a,n),n+=Ji-Xi+1,$i++}return this.readLastIndex=Math.floor((e+t)/ra),2===Et.h.fastGC&&this.remove(),r}},{key:"writeBytes",value:function(e,t,n){if(Ki=(Qi=t)+n-1,Qi>=this.readSize||n<=0||Ki>this.readSize||!e)throw Jt.a.warn("writeBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+Qi+" _eRGPos : "+Ki+" dataLen: "+n),"writeBytes param Error!";$i=Math.floor(Qi/ra),Zi=Math.floor(Ki/ra);for(var r=0;$i<=Zi;){if(Qi>=(Xi=$i*ra)&&(Xi=Qi),(Ji=$i*ra+ra-1)>=Ki&&(Ji=Ki),!this.dataArr[$i].setData(e.subarray(r,r+(Ji-Xi+1)),Xi)){++na>Et.f&&(en.errorStage="memoryAllocErr",en.errorFragment=this);break}r+=Ji-Xi+1,$i++}return r}},{key:"clear",value:function(){for(var e=0;e<this.chunkNum;)this.dataArr[e]&&this.dataArr[e].clear(),e++;delete this.dataArr}},{key:"remove",value:function(){for(var e=0;e<this.readLastIndex;)this.dataArr[e]&&this.dataArr[e].clear(),e++}},{key:"memory",get:function(){if(!this.dataArr)return 0;for(var e=0,t=0;e<this.chunkNum;)this.dataArr[e]&&(t+=this.dataArr[e].memory),e++;return t}},{key:"resetReadLastIndex",value:function(){this.readLastIndex=0}}]),e}(),oa=new ln;var sa={create:function(e,t){oa.has(e)||oa.set(e,new aa(t))},get:function(e){return oa.get(e)},remove:function(){},removeChunk:function(e){oa.has(e)&&oa.get(e).remove()}},ca=function(){function e(t,n){a()(this,e),this.rto=3e3,this.alias=t,this.subPieceID=n,this.beginTime=Date.now()}return s()(e,[{key:"key",get:function(){return this.alias.toString()+"_"+this.subPieceID.toString()}},{key:"timeOut",get:function(){return this.beginTime+this.rto}}]),e}(),ua=0,da=0;function la(){"visible"===document.visibilityState?da<=ua&&(da=performance.now()):ua<=da&&(ua=performance.now())}var fa={init:function(){ua=da=0,document.addEventListener("visibilitychange",la)},destroy:function(){ua=da=0,document.removeEventListener("visibilitychange",la)},hide:function(){if(ua<da){if(performance.now()-da<3e4&&da-ua>3e4)return!0}else if(ua>da&&performance.now()-ua>3e4)return!0;return!1},hideTime:function(){if(ua<da){if(performance.now()-da<3e4&&da-ua>3e4)return da-performance.now()}else if(ua>da)return performance.now()-ua;return 0}},ha=(Vt.isHTTPS?"https":"http")+"://msg.qy.net/qos?t=9&p1=8_82_820&ct=h5_vod_load&",pa=!1,_a=null,va=null,ga={diy_ver:"0.0.3",diy_uuid:"",diy_platform:0,diy_userip:"",diy_area:"",diy_isp:"",diy_idc:"",diy_server_ip:"",diy_hidetime:0,diy_init:0,diy_start:0,diy_starttime:0,diy_lagcnt:0,diy_rebufercnt:0,diy_lagtime:0,diy_buffer:0,diy_tsrcnt:0,diy_ts_drcnt:0,diy_tsfttcnt:0,diy_ts_dfttcnt:0,diy_tssucccnt:0,diy_ts_dsucccnt:0,diy_tsftttime:0,diy_ts_dftttime:0,diy_tstime:0,diy_ts_dtime:0,diy_tssize:0,diy_ts_dsize:0,diy_tserr:"",diy_tserrtype:"",diy_ts_derr:"",diy_tsurl:"",diy_ts_lagurl:"",diy_ts_durl:"",diy_ts_dlagurl:"",diy_tm:0,diy_finalerr:"",diy_dispatchcnt:0,diy_dispsucccnt:0,diy_disptime:0,diy_diserrtype:"",diy_dispatcherr:"",diy_dispatchurl:"",diy_p2pbw:0,diy_cdnbw:0,diy_domain:""},ya=Object.assign({},ga),ma=performance.now(),ba=0;function ka(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(pa){if(!e)if(performance.now()-ma>=6e4)ba=0,ma=performance.now();else{if(ba>=10)return clearTimeout(_a),void(_a=setTimeout(ka,1e3*Et.k));ba++}if(clearTimeout(_a),_a=0,va&&va.userIP||(va=qt.a.getUserInfoFromCookie()),ya.diy_uuid=Gn,ya.diy_platform=Dt.a.platform,ya.diy_userip=va.userIP,ya.diy_area=va.userArea,ya.diy_isp=va.userNetType,ya.diy_idc=Dt.a.idc,ya.diy_domain=Dt.a.domain,ya.diy_tm=Date.now(),ya.diy_hidetime=fa.hideTime(),ya.diy_buffer=Dt.a.avgBufferCnt>0?Math.floor(Dt.a.avgBuffer/Dt.a.avgBufferCnt*1e3):0,Dt.a.avgBuffer=0,Dt.a.avgBufferCnt=0,ya.diy_buffer<=0&&ya.diy_tsrcnt+ya.diy_ts_drcnt<=0&&ya.diy_dispatchcnt<=0&&ya.diy_p2pbw<=0&&ya.diy_cdnbw<=0&&""===ya.diy_tserr&&""===ya.diy_ts_derr&&0===ya.diy_init&&0===ya.diy_start&&0===ya.diy_lagcnt&&0===ya.diy_rebufercnt&&""===ya.diy_finalerr)e?xa():_a=setTimeout(ka,1e3*Et.k);else{var t="";for(var n in ya)t="".concat(t).concat(n,"=").concat(ya[n],"&");t=t.substring(0,t.length-1);try{var r=new Image;r.onload=r.onerror=r.onabort=function(){r.onload=r.onerror=r.onabort=null,r=null},r.src=ha+t+"&random="+Date.now()}catch(i){}Ta(ya,ga),e?xa():_a=setTimeout(ka,1e3*Et.k)}}}function xa(){clearTimeout(_a),_a=0,pa=!1}function Ta(e,t){if(e)for(var n in t)e[n]=t[n]}var Sa=ya,Pa=256,wa=262144,Ia=Et.b.subPieceSize,Aa=[31,67,182,117],Ea=[105,115,111,109],Da=function(){function e(t,n,r,i,o,s,c,u,d,l,f,h){a()(this,e),this.tvid=n,this.sourceID=r,this.vid=c,this.p2pID=u,this.alias=s,this.peerCnt=-1,this.vids=l,this.size=t,this.index=o,this.refreshFun=null,this._dataLen=0,this.shareDataNum=0,this.status=0,this.ceSID=0,this.gpSID=0,this.pieceNum=Math.ceil(this.size/wa),this.subPcNum=Math.ceil(this.size/Ia),this.bitmap=new ci(this.pieceNum,this.alias),this.subBitmap=new ci(this.subPcNum,this.alias),this.runSubBitmap=new ci(this.subPcNum,this.alias),this.bsID=-1,this.esID=this.subPcNum,this.fragmentName="",this.fileType=f,this.seekable=h,this.rate=d,this._checkDataStep=0,this._p2pCheckDataStep=0,this._TMPKeyList=[],this._TMPDataList=[],this._TMPRcvCnt=0,this._tsLoadDone=!1,this.dataErrCount=0,this.endPos=0,sa.create(this.alias,this.size)}return s()(e,[{key:"tsLoadDone",get:function(){return this._tsLoadDone},set:function(e){this._tsLoadDone=e}},{key:"dataLen",get:function(){return this._dataLen},set:function(e){this._dataLen=e}},{key:"state",get:function(){return this.status},set:function(e){this.status=e}},{key:"setPosList",value:function(e){this.seekable=e}},{key:"setRange",value:function(e,t){var n=Math.floor(this.bsID/Pa);this.bitmap.getBit(n)&&!this.subBitmap.checkRange(n*Pa,(n+1)*Pa)&&this.bitmap.setBit(n,!1);var r=Math.ceil(this.esID/Pa);this.bitmap.getBit(r)&&!this.subBitmap.checkRange(r*Pa,(r+1)*Pa)&&this.bitmap.setBit(r,!1),this.ePos=t,this.bsID=Math.floor(e/Ia),this.esID=Math.ceil(t/Ia),this.checkGpSID(this.bsID),this.checkCEPos(this.bsID),Jt.a.info("segment.setRange , index = "+this.index+",range "+e+"-"+t+" ,cePos "+this.cePos),this.refreshFun&&this.refreshFun.call(null);var i=sa.get(this.alias);i&&i.resetReadLastIndex()}},{key:"addData",value:function(e,t,n){var r=sa.get(this.alias);if(r){n=r.writeBytes(t,e,n);for(var i=Math.ceil(e/Ia),a=e+n>=this.size?this.subPcNum:Math.floor((e+n)/Ia);i<a;)this.subBitmap.setBit(i,!0),this.runSubBitmap.setBit(i,!0),i++;this._dataLen+=n;var o=this;Dt.a.pcwBuffer<2||0===e&&8192===n?this.checkData():0===this._checkDataStep&&(this._checkDataStep=setTimeout((function(){o&&o.checkData.call(o)}),500))}else Jt.a.warn("segment is null when addData ,index "+this.index+", rate "+this.rate)}},{key:"checkData",value:function(){clearTimeout(this._checkDataStep),this._checkDataStep=0,this.checkGpSID(this.gpSID);for(var e=Math.floor(this.bsID/Pa),t=Math.ceil(this.size/wa);e<t;){var n=e*Pa,r=(e+1)*Pa;this.bsID>=n&&this.bsID<=r&&(n=this.bsID),this.esID>=n&&this.esID<=r&&(r=this.esID),this.subBitmap.checkRange(n,r)&&this.bitmap.setBit(e,!0),e++}var i=this.ceSID;this.checkCEPos(this.ceSID),this.refreshFun&&this.refreshFun(),i<this.ceSID&&Dt.a.noticeDataArrived&&Dt.a.noticeDataArrived()}},{key:"getData",value:function(e,t){return sa.get(this.alias).readBytes(e,t)}},{key:"hasData",value:function(e,t){for(var n=Math.floor(e/Ia),r=Math.ceil(Math.min(e+t,this.size)/Ia);n<r;){if(!this.subBitmap.getBit(n))return!1;n++}return!0}},{key:"checkCEPos",value:function(e){for(var t=e!==undefined?e:this.ceSID;t<this.subPcNum&&this.subBitmap.getBit(t);)t++;this.ceSID=Math.min(t,this.subPcNum)}},{key:"deleteRange",value:function(e,t,n){for(var r=Math.min(e+t,this.size),i=Math.floor(e/Ia),a=Math.ceil(r/Ia);i<a;)this.subBitmap.setBit(i,!1),this.runSubBitmap.setBit(i,!1),i++;for(var o=Math.floor(e/wa),s=Math.ceil(r/wa);o<s;)this.bitmap.setBit(o,!1),o++;n||(this.checkGpSID(this.bsID),this.checkCEPos(this.bsID))}},{key:"checkTask",value:function(e,t){for(var n=Math.floor(e/Ia),r=Math.min(this.subPcNum,Math.ceil(t/Ia)),i=[],a=0,o=-1,s=-1;n<r;)this.subBitmap.getBit(n)?(-1!==o&&a++,a>=32&&(i.push({begin:o*Ia,end:Math.min((s+1)*Ia,this.size)}),o=-1,s=-1,a=0)):(a=0,-1===o&&(o=n),s=n,this.runSubBitmap.setBit(n,!0)),n++;return-1!==o&&i.push({begin:o*Ia,end:Math.min((s+1)*Ia,this.size)}),this.checkGpSID(this.gpSID),i}},{key:"recycleCDNTask",value:function(e){for(var t,n,r,i=0;i<e.length;i++)for(t=e[i],n=Math.floor(t.begin/Ia),r=Math.min(this.subPcNum,Math.ceil(t.end/Ia));n<r;)this.subBitmap.getBit(n)||this.runSubBitmap.setBit(n,!1),n++;this.checkGpSID(this.bsID),this.checkCEPos(this.bsID)}},{key:"recycleP2PTask",value:function(e){!this.subBitmap.getBit(e.subPieceID)&&this.runSubBitmap.getBit(e.subPieceID)&&(this.runSubBitmap.setBit(e.subPieceID,!1),e.subPieceID<this.gpSID&&this.checkGpSID(e.subPieceID))}},{key:"checkGpSID",value:function(e){for(this.gpSID=e;this.gpSID<this.subPcNum&&!(!this.runSubBitmap.getBit(this.gpSID)&&!this.subBitmap.getBit(this.gpSID)&&this.gpSID>=this.bsID&&this.gpSID<=this.esID);)this.gpSID++}},{key:"addSubPiece",value:function(e,t){if(this.fileType===on.a.TS){var n=0,r=e*Ia;for(0!==e&&(n=188-r%188);n<t.byteLength&&r+n<this.ePos;){if(71!==t[n])return this.dataErrCount++,void Jt.a.error("Segment reveive p2p load data err ,pos "+(r+n)+" ,dataErrCount "+this.dataErrCount);n+=188}}else if(this.fileType===on.a.DASH){var i=e*Ia,a=i+t.byteLength,o=qt.a.searchPosIndex(i,this.seekable);if((o=o>=0?o+1:0)<this.seekable.length-1&&this.seekable[o]>=i&&this.seekable[o]+4<=a)for(var s=this.seekable[o]-i,c=0;c<Aa.length;){if(t[s+c]!==Aa[c])return this.dataErrCount++,void Jt.a.error("Segment reveive p2p load webm data err ,pos "+s+" ,dataErrCount "+this.dataErrCount);c++}}else if(this.fileType.indexOf(on.a.M4S)>=0){var u=e*Ia,d=u+t.byteLength,l=qt.a.searchPosIndex(u,this.seekable);if((l=l>=0?l+1:0)<this.seekable.length-1&&this.seekable[l]>=u&&this.seekable[l]+12<=d)for(var f=this.seekable[l]-u+8,h=0;h<Ea.length;){if(t[f+h]!==Ea[h])return this.dataErrCount++,void Jt.a.error("Segment reveive p2p load webm data err ,pos "+f+" ,dataErrCount "+this.dataErrCount);h++}}if(this._TMPRcvCnt++,Ia===t.byteLength&&-1===this._TMPKeyList.indexOf(e)){for(var p=!1,_=0;_<this._TMPKeyList.length;_++)if(this._TMPKeyList[_]*Ia+this._TMPDataList[_].byteLength===e*Ia){p=!0;var v=new Uint8Array(this._TMPDataList[_].byteLength+t.byteLength);v.set(this._TMPDataList[_],0),v.set(t,this._TMPDataList[_].byteLength),this._TMPDataList[_]=v;break}if(p||(this._TMPKeyList.push(e),this._TMPDataList.push(t)),this._TMPRcvCnt>=50)this.mergeData();else if(0===this._p2pCheckDataStep){var g=this;this._p2pCheckDataStep=setTimeout((function(){g&&g.mergeData.call(g)}),100)}kr.p2pSize=Ia+kr.p2pSize,Sa.diy_p2pbw+=Ia,this.peerMgr&&(this.peerMgr.p2pSize=Ia+this.peerMgr.p2pSize)}}},{key:"mergeData",value:function(){for(clearTimeout(this._p2pCheckDataStep),this._p2pCheckDataStep=0;this._TMPKeyList.length>0;){var e=this._TMPDataList.shift();this.addData(this._TMPKeyList.shift()*Ia,e,e.byteLength)}this._TMPRcvCnt=0}},{key:"pieceNeed",value:function(e){return e>=this.bID&&e<=this.eID&&!this.bitmap.getBit(e)}},{key:"subPieceNeed",value:function(e){return e>=this.bsID&&e<=this.esID&&!this.subBitmap.getBit(e)}},{key:"getTasks",value:function(e,t,n,r){if(e&&e.alias===this.alias&&!(this.gpSID>=this.esID)){for(var i=e,a=Math.max(this.gpID,i.gpID),o=Math.min(Math.ceil(this.esID/Pa),a+16),s=this.gpSID;a<o&&t.length<n;){if(i.getBit(a)&&this.pieceNeed(a)){s=a*Pa;var c=Math.min((a+1)*Pa,this.subPcNum);for(this.gpSID>s&&this.gpSID<c&&(s=this.gpSID);s<c&&t.length<n;){if(this.subPieceNeed(s)){var u=new ca(this.alias,s);u.rto=r,t.push(u),this.runSubBitmap.setBit(s,!0)}s++}}a++}t.length>0&&this.checkGpSID(this.gpSID)}}},{key:"clearTask",value:function(){this.peerMgr&&this.peerMgr.clearTask()}},{key:"checkP2PHealth",value:function(){return this.peerMgr?this.peerMgr.checkP2PHealth(this.alias):0}},{key:"requestTask",value:function(e){return this.subBitmap.getBit(e)?(this.shareDataNum++,kr.upSize=kr.upSize+Ia,this.peerMgr&&(this.peerMgr.upSize=Ia+this.peerMgr.upSize),this.getData(e*Ia,Ia)):null}},{key:"checkDefinition",value:function(e){if(this.vidsDesc=" [ ",this.vids&&this.vids.length>0&&e.length>0)for(var t=0;t<this.vids.length;t++){for(var n=0;n<e.length;n++)if(this.vids[t].vid===e[n].vid){this.vids[t].count=e[n].count;break}this.vidsDesc+=this.vids[t].bid+":"+(this.vids[t].count===undefined?0:this.vids[t].count)+(t<this.vids.length-1?" , ":"")}this.vidsDesc+=" ]"}},{key:"peerMgr",get:function(){return ea.getProxyByID(this.p2pID)}},{key:"cePos",get:function(){return Math.min(this.ceSID*Ia,this.size)}},{key:"done",get:function(){return this.ceSID>0&&this.ceSID>=this.esID}},{key:"gpID",get:function(){return Math.floor(this.gpSID/Pa)}},{key:"eID",get:function(){return Math.ceil(this.esID/Pa)}},{key:"bID",get:function(){return Math.floor(this.bsID/Pa)}},{key:"approachEnd",get:function(){return this.cePos>=this.size-5242880}},{key:"memory",get:function(){return sa.get(this.alias).memory}},{key:"dataUrl",get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}},{key:"toDataString",value:function(e,t,n){for(var r="",i=Math.floor((-1!==e?e:t)/wa),a=0,o=Math.floor(t/wa),s=Math.floor(n/wa),c=Math.ceil(this.size/wa),u=this.gpID,d=Math.floor(this.ceSID/Pa),l="";a<c;)this.bitmap.getBit(a)?(l="*",d===a&&u===a?l="(EG)":d===a?l="E":u===a&&(l="G")):(l="_",d===a&&u===a?l="(eg)":d===a?l="e":u===a&&(l="g")),i!==undefined&&i===a&&(l="R"),o===a&&(l="‹"+l),s===a&&(l+="›"),r+=l,++a%128==0&&(r+="\r");return r+="┛"}},{key:"destroy",value:function(){Jt.a.info("Segment be destroy : "+this.index+" bidRdate :"+this.rate+" tvid : "+this.tvid),this.bitmap.clear(),this.subBitmap.clear(),this.runSubBitmap.clear(),sa.remove(this.alias)}},{key:"destroyChunk",value:function(e){var t=sa.get(e);if(t){var n=t.readLastIndex*Et.b.chunkSize;n>0&&(Jt.a.info("Segment ready to clear data ,pos "+n+" , segment "+this.index),this.deleteRange(0,n,!0),sa.removeChunk(e))}}}]),e}(),qa=n(97),Oa=n(108),Ra=n(92),La=function(){function e(t,n,r){a()(this,e);var i=t;this.sourceID=n,this.type=r,this.loader=new XMLHttpRequest,this.loader.responseType="json";var o=this;o.loader.onreadystatechange=function(){if(o.loader.readyState+",",0===o.loader.readyState);else if(1===o.loader.readyState);else if(2===o.loader.readyState);else if(3===o.loader.readyState);else if(200===o.loader.status)if(o.loader.response)if(o.loader.response.hasOwnProperty("uri")){var e=JSON.parse(JSON.stringify(o.loader.response));if(qt.a.getFileNameFromUrl(e.uri)!==o.sourceID)return;o.destroy(),Ra.a.getEvent().emit(Oa.a.DisLoadStatus+o.type,"done",e)}else s("responseHasNoUri");else s("responseIsNull");else{var t="";if(o.loader.response||405===o.loader.status){var n=0;o.loader.response&&(t=JSON.stringify(o.loader.response),Jt.a.error("Dispatch failure,message "+t),n=o.loader.response.code),n.indexOf("D20")>=0&&405===o.loader.status&&(Dt.a.authorStatus=qa.a.LoaderState_405)}s("statusErr_"+o.loader.status)}};try{o.loader.open("GET",i,!0),o.loader.withCredentials=!1,Jt.a.info("DispatchByXhr url "+i),o.loader.send()}catch(c){s("tryCatchError_"+c.message)}function s(e){o.loader&&(o.destroy(),Ra.a.getEvent().emit(Oa.a.DisLoadStatus+o.type,"error",e))}}return s()(e,[{key:"destroy",value:function(){this.loader&&(this.loader.abort(),delete this.loader,this.loader=null)}}]),e}(),Ca=n(425),Ma=function(){function e(t,n,r){a()(this,e),this.running=!0,this.sourceID=n,this.type=r,this.load(t)}return s()(e,[{key:"load",value:function(e){var t=this;Jt.a.info("DispatchByFetch url "+e),fetch(e,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then((function(e){if(e.status>=400||e.status<200){if(!t.running)return;t.onError("statusErr_"+e.status)}else{if(!t.running)return;e.json().then((function(e){qt.a.getFileNameFromUrl(e.uri)===t.sourceID&&(t.running=!1,Ra.a.getEvent().emit(Oa.a.DisLoadStatus+t.type,"done",e))}))}}))["catch"]((function(e){t.onError("tryCatchError_"+e.message)}))}},{key:"onError",value:function(e){"statusErr_405"===e&&(Dt.a.authorStatus=qa.a.LoaderState_405,Jt.a.error("Dispatch failure,message "+e)),this.running&&(this.running=!1,Ra.a.getEvent().emit(Oa.a.DisLoadStatus+this.type,"error",e))}},{key:"destroy",value:function(){this.running=!1}}]),e}(),Na="cn",Ba="oversea",Fa=864e5,Ua="pipeIps",ja="pipeTime",Va={ip1:"116.211.198.237",ip2:"39.156.54.66",ip3:"103.44.59.54"},Ha={ip:"access-spip.iq.com"},Wa=0,za="",Ya=[],Ga="",Qa=[],Ka=null;function $a(){if(!Ka&&(Ga&&(Ya.length>0&&Ga===Ya[0]&&(Ya.shift(),console.log("p2p",{bgpStep:"superIp.remove",ip:Ga})),Ga=""),Ya.length>0&&(Ga=Ya[0]),Ga)){var e=(/^https/gi.test(window.location.protocol)?"https://":"http://")+Ga+"/"+(za===Ba?"7d0":"3e8")+"/?rn="+Date.now();(Ka=new XMLHttpRequest).responseType="text",Ka.onreadystatechange=function(){if(4===Ka.readyState){var e=Ka.status;if(200!==e&&206!==e||!Ka.response)Ka=null;else{var t=Ka.response;Xa(ja,Date.now()),Xa(Ua,t);for(var n=t.split(";");n.length>0;)Qa.push(n.shift());Ka=null,console.log("p2p",{bgpStep:"pipeIps.request.success",superIp:Ga,ipArr:Qa,now:Date.now()})}}};try{Ka.open("GET",e,!0),Ka.send(),Ka.timeout=8e3}catch(t){Ka=null}}}function Za(e){try{return localStorage.getItem(e)}catch(t){return null}}function Xa(e,t){try{localStorage.setItem(e,t)}catch(n){}}var Ja=Object.defineProperties({CN:Na,OverSea:Ba,checkPipeIps:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(0===Wa&&0===Ya.length&&(e===Na||e===Ba)){za=e,Wa=Date.now();var t=e===Na?Va:Ha;for(var n in t)t[n]&&Ya.push(t[n]);console.log("p2p",{bgpStep:"superIp.init",superIpArr:Ya})}if(0===Qa.length){var r=Za(ja),i=Za(Ua),a=0;if(i&&i.length>0&&(a=parseInt(r)),i&&(a<=0||Date.now()-a<=Fa)){for(var o=i.split(";");o.length>0;)Qa.push(o.shift());console.log("p2p",{bgpStep:"pipeIp.read.success",pipeIpArr:Qa,pipeTime:a,now:Date.now()})}}},getPipeIp:function(){return Qa.length>0?Qa[0]:za===Na?($a(),"access.if.iqiyi.com"):za===Ba?($a(),"access.iq.com"):void 0},removePipeIp:function(e){if(Qa.length>0&&e===Qa[0]){Qa.shift();for(var t="",n=0;n<Qa.length;n++)t.length>0?t+=";"+Qa[n]:t+=Qa[n];Xa(Ua,t),console.log("p2p",{bgpStep:"pipeIp.remove",ip:e,leftIpArr:Qa})}}},{disBusiness:{get:function(){return"3eb"},configurable:!0,enumerable:!0},DNSBusiness:{get:function(){return"3f0"},configurable:!0,enumerable:!0}}),eo=n(241),to=null,no=null,ro="",io=function(){function e(){a()(this,e)}return s()(e,[{key:"start",value:function(e,t){this.segment=e;var n=this.segment.dispatchUrl;-1===n.indexOf("?")?n+="?pv=0.1":n+="&pv=0.1",n+="&cross-domain=1",n+="&mss=1",n+="&stauto="+Dt.a.absStatus;try{if(t>0&&this.segment.errIDCList.length<3&&this.segment.errIDCList.length>0&&(n+="&retry="+this.segment.errIDCList.length.toString(),n+="&z="+this.segment.errIDCList.toLocaleString().replace(/,/g,"|")),this.segment.dispatchOnError&&(this.segment.dispatchOnError%3==1||this.segment.dispatchOnError%3==2)){var r=qt.a.parseURL(n);n=Dt.a.platform===er?n.replace(r[2]+r[4],Ja.getPipeIp()+"/3eb/"+Jn()(r[2])+Ca.Base64.encode(r[4])):n.replace(r[2],Ja.getPipeIp()+"/3eb/"+r[2]),Vt.isHTTPS&&(n+="&ssl=1")}to=Date.now(),Sa.diy_dispatchcnt++,ro=n,kr.addPBItem(ar.dispatch_Cnt),Ra.a.getEvent().off(Oa.a.DisLoadStatus+this.segment.type),Ra.a.getEvent().once(Oa.a.DisLoadStatus+this.segment.type,this.disLoadStatus.bind(this)),!Vt.supportFetch||this.segment.dispatchOnError&&this.segment.dispatchOnError%1!=0?this.loader=new La(n,this.segment.sourceID,this.segment.type):this.loader=new Ma(n,this.segment.sourceID,this.segment.type)}catch(i){this.disError("tryCatchError_"+i.message)}}},{key:"disLoadStatus",value:function(e,t,n){"done"===e?this.disDone(t):this.disError(t,n)}},{key:"disDone",value:function(e){Sa.diy_disptime+=Date.now()-to,Sa.diy_dispsucccnt++,kr.addPBItem(ar.dispatch_doneCount),kr.addPBItem(ar.dispatch_duration,Date.now()-to),Jt.a.info("Dispatch [NORMAL / VIP DONE] data : "+JSON.stringify(e)+", isHttps : "+Vt.isHTTPS+", sourceID : "+this.segment.sourceID);var t=e.d[0].URL;if(Vt.isHTTPS&&t.indexOf("https:")<0)return Jt.a.error("Dispatch match check err,https Dispatch return http"),void this.disError("notIsHttps");if(no&&no===this.segment.tvid||(Et.e.clear(),no=this.segment.tvid),e.re){for(var n=!1,r=e.d.length-1;r>=0;r--)"dcache"!==e.d[r].z&&(n=!0,Dt.a.setUserInfo(e.re+"|"+e.d[r].z));!n&&Dt.a.setUserInfo(e.re+"|"+e.d[e.d.length-1].z)}if(Xt.checkConfig(),qt.a.getFileNameFromUrl(e.uri)===this.segment.sourceID){if(Et.c.open){for(var i=e.d,a=[],o=0;o<i.length;o++){var s=i[o];"dcache"===s.z&&a.push(s)}a.length>0?Et.e.set(this.segment.sourceID,a):Et.e.set(this.segment.sourceID,e.d)}else Et.e.set(this.segment.sourceID,e.d);if(Vt.canP2P&&"off"!==Et.g.limitP2P&&!0===Et.g.onP2P&&Et.h.openP2P&&!this.segment.onTracker){var c=qt.a.getUserInfoFromCookie();if(c.userNetType){var u=qt.a.getTrackerIP(c.userNetType,Et.g.tracker,this.segment.p2pID);""!==u&&(Jt.a.info("AND tracker Dispatch [DONE] IP : "+u),this.segment.setTrackerIP(u))}}this.clearIn(),Ra.a.getEvent().emit(Oa.a.DisPatchStatus+this.segment.type)}}},{key:"disError",value:function(e){Sa.diy_dispatcherr=encodeURIComponent(e),Sa.diy_dispatchurl=encodeURIComponent(ro),Sa.diy_diserrtype=eo.a.getErrorType(e),this.clearIn(),Ra.a.getEvent().emit(Oa.a.DisPatchStatus+this.segment.type,e)}},{key:"clearIn",value:function(e){this.loader&&(this.loader.destroy(),this.loader=null),e&&Ra.a.getEvent().off(Oa.a.DisLoadStatus+this.segment.type)}},{key:"clear",value:function(){this.clearIn(!0),Ra.a.getEvent().off(Oa.a.DacheDisLoadStatus+this.segment.type),this.destroyDcacheDisLoader()}},{key:"destroyDcacheDisLoader",value:function(){this.disDcacheDisLoader&&(this.disDcacheDisLoader.destroy(),this.disDcacheDisLoader=null)}}]),e}(),ao=function(){function e(t,n){a()(this,e),this.type=e.type,this.videoType=t,this.eventID=n}return s()(e,[{key:"load",value:function(e,t){this.AllTask=e;var n=0;for(this.cache=null,this.loadType=t;null===this.cache;)try{n++,this.cache=new Uint8Array(1048576)}catch(a){if(n>Et.f)return Jt.a.error("FetchLoader catch Uint8Array err : "+a.message),void this.onError("tryCatchError_oom")}if(this.AllTask&&this.AllTask.url){this.running=!0,this.reader=null,this.readPos=0,this.dataPos=0,this.base=0,this.dataLen=0,this.readLength=0;var r=this.AllTask.url;if(-1!==r.indexOf("start")&&-1!==r.indexOf("end")||(-1===r.indexOf("?")?-1!==this.AllTask.end&&(r+="?start="+this.AllTask.begin+"&end="+this.AllTask.end):-1!==this.AllTask.end&&(r+="&start="+this.AllTask.begin+"&end="+this.AllTask.end),Jt.a.debug("load start: "+this.AllTask.begin+" end: "+this.AllTask.end)),-1===r.indexOf("stauto")&&(r+="&stauto="+Dt.a.absStatus),-1===r.indexOf("ori")&&(r+="&ori=pcw"+Dt.a.platform),-1===r.indexOf("num"))r+="&num="+Date.now().toString();Jt.a.info("[Fetch start load url] "+r);var i=this;fetch(r,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then((function(e){var t=e.headers?e.headers.get("server-address"):"";if(Dt.a.last_cdnIP=t,Jt.a.info("fetch Loader, serverIP : "+t+", domain: "+qt.a.getPureIP(i.AllTask.url)+", responseUrl: "+e.url+", status: "+e.status),e.status>=400||e.status<200){if(!i.running)return;i.onError("statusErr_"+e.status)}else{if(i.reader=e.body.getReader(),!i.running){if(i.reader)try{i.reader.cancel(),i.reader=null}catch(n){}return}i.pump()}}))["catch"]((function(e){if(Dt.a.last_cdnIP="",i.running)i.onError("tryCatchError_"+e.message.replace(/\s+/g,""));else if(i.reader)try{i.reader.cancel(),i.reader=null}catch(t){}}))}else this.onError("taskError")}},{key:"pump",value:function(){var e=this;return e.reader.read().then((function(t){if(e.running){var n=t.value;if(n){e.dataLen+=n.byteLength;try{if(e.dataPos+n.byteLength>e.cache.byteLength){for(var r=null,i=0;null===r;)try{i++,r=new Uint8Array(e.dataPos+n.byteLength)}catch(s){if(i>Et.f)return Jt.a.error("FetchLoader catch newUint8Array err : "+s.message),void e.onError("tryCatchError_oom")}var a=e.cache.subarray(e.readPos);r.set(a,0),delete e.cache,e.dataPos=e.dataPos-e.readPos,e.base+=e.readPos,e.readPos=0,e.cache=r}e.cache.set(n,e.dataPos),e.dataPos+=n.byteLength}catch(s){return Jt.a.error("FetchLoader catch err : "+s.message),void e.onError("dataError")}}if(e.dataPos-e.readPos>=8192){var o=8192*Math.floor((e.dataPos-e.readPos)/8192);if(e.AllTask.data=e.cache.subarray(e.readPos,e.readPos+o),e.AllTask.range={begin:e.AllTask.begin+e.base+e.readPos,end:e.AllTask.begin+e.base+e.readPos+o},e.videoType!==on.a.FTS&&e.AllTask.range.end>e.AllTask.end)return Jt.a.error("data range err , need range "+e.AllTask.begin+"-"+e.AllTask.end+" currentEnd: "+e.AllTask.range.end+" base: "+e.base),void e.onError(qa.a.LoaderState_dataRangeError);e.readLength+=o,Ra.a.getEvent().emit(Oa.a.LoadStatus+e.eventID,"progress"),e.readPos+=o}if(e.running){if(-1===e.AllTask.end&&-1!==e.AllTask.segment.size&&(e.AllTask.end=e.AllTask.segment.size),t.done||-1!==e.AllTask.end&&e.AllTask.begin+e.base+e.dataPos>=e.AllTask.end){if(e.readPos<e.dataPos){if(e.AllTask.data=e.cache.subarray(e.readPos,e.dataPos),e.AllTask.range={begin:e.AllTask.begin+e.base+e.readPos,end:e.AllTask.begin+e.base+e.dataPos},"fts"!==e.videoType&&e.AllTask&&e.AllTask.range.end>e.AllTask.end)return Jt.a.error("~~ data range err , need range "+e.AllTask.begin+"-"+e.AllTask.end+" currentEnd: "+e.AllTask.range.end+" base: "+e.base+",needLen "+(e.AllTask.end-e.AllTask.begin)+",receiveLen "+e.dataLen),void e.onError("dataError");e.readLength+=e.dataPos-e.readPos,Ra.a.getEvent().emit(Oa.a.LoadStatus+e.eventID,"progress"),e.readPos=e.dataPos}if(e.dataLen!==e.readLength)Jt.a.error("~~chunkLen: "+e.dataLen+" readLen: "+e.readLength);else if(e.AllTask&&e.dataLen!==e.AllTask.end-e.AllTask.begin)return Jt.a.error("need dataLen is not match receive dataLen,needLen "+(e.AllTask.end-e.AllTask.begin)+",receiveLen "+e.dataLen),void e.onError(qa.a.LoaderState_dataRangeError);return e.close(),void Ra.a.getEvent().emit(Oa.a.LoadStatus+e.eventID,"done")}return e.pump()}}else if(e.reader)try{e.reader.cancel(),e.reader=null}catch(c){}}))}},{key:"onError",value:function(e){if(this.running){if(this.running=!1,this.AllTask=null,this.reader)try{this.reader.cancel(),this.reader=null}catch(t){}Ra.a.getEvent().emit(Oa.a.LoadStatus+this.eventID,"error",e)}}},{key:"close",value:function(){if(this.running&&(this.running=!1,this.AllTask=null,this.reader))try{this.reader.cancel(),this.reader=null}catch(e){}this.cache&&delete this.cache}}],[{key:"type",get:function(){return"fetch"}}]),e}(),oo=n(424),so=1,co=2,uo=3;function lo(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ho=new Map,po=setTimeout(_o,12e4);function _o(e){clearTimeout(po);var t,n=qt.a.getUserInfoFromCookie(),r=lo(ho);try{for(r.s();!(t=r.n()).done;){var i=hn()(t.value,2),a=i[0],o=i[1],s=a.split("|"),c={dmnm:s[0],idc:s[1],type:uo,total:o.total,failcnt:o.failcnt,userinfo:n.userArea,l_err:Dt.a.last_errMesaage,l_url:Dt.a.last_errurl};Dt.a.last_errMesaage="",Dt.a.last_errurl="",Dt.a.sendPingBack({type:"DNSParser",para:c}),ho["delete"](a)}}catch(u){r.e(u)}finally{r.f()}e||(po=setTimeout(_o,12e4))}var vo=function(){function e(){a()(this,e),this.tskList=null,this.curLoadTskIndex=0,this.tsk=null,this.retryCnt=0,this.stateChange=null,this.segment=null,this.startTime=-1,this.loader=null,this._loadStage="",this.dispatcher=null,this.domain="",this.idc="",this.ftt=!1}return s()(e,[{key:"load",value:function(e,t,n,r,i){if(this.segment&&this.close(!1),this.segment=e,this.retryCnt=n,this.urlIndex=r,this.CDNStateChangeEventID=i,this.tskList=t,this.tsk=null,this.url="",Object(Et.j)(this.segment.sourceID)&&0!==qo(this.segment.sourceID)){if(this.segment&&Vt.canP2P&&"off"!==Et.g.limitP2P&&!0===Et.g.onP2P&&Et.h.openP2P&&!this.segment.onTracker){var a=qt.a.getUserInfoFromCookie();if(a.userNetType){var o=qt.a.getTrackerIP(a.userNetType,Et.g.tracker,this.segment.p2pID);""!==o&&(Jt.a.info("AND tracker Dispatch [DONE] IP : "+o),this.segment.setTrackerIP(o))}}this._loadStage="CDN",this.createLoader(),Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_ready),this.checkConTracker(),this.checkTask()}else this._loadStage="dispatch",this.startDisPatch()}},{key:"createLoader",value:function(){"mozilla"===Vt.browser.name||"firefox"===Vt.browser.name&&Vt.browser.version.major<65||"chrome"===Vt.browser.name&&Vt.browser.version.major<43||"msedge"===Vt.browser.name&&Vt.browser.version.major<14||"safari"===Vt.browser.name&&(Vt.browser.version.major<10||10===Vt.browser.version.major&&Vt.browser.version.minor<1)||this.retryCnt%2==1?this.loader=new oo.a(this.segment.fileType,this.CDNStateChangeEventID):this.loader=new ao(this.segment.fileType,this.CDNStateChangeEventID)}},{key:"checkConTracker",value:function(){if(Vt.canP2P&&"off"!==Et.g.limitP2P&&!0===Et.g.onP2P&&Et.h.openP2P&&!this.segment.onTracker){Xt.checkConfig();var e=qt.a.getUserInfoFromCookie(),t=qt.a.getTrackerIP(e.userNetType,Et.g.tracker,this.segment.p2pID);""!==t&&(Jt.a.info("AND tracker Dispatch [DONE] IP : "+t),this.segment.setTrackerIP(t))}}},{key:"disPatchDone",value:function(){this.segment&&(this.createLoader(),Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_ready),this._loadStage="CDN",this.checkConTracker(),this.checkTask())}},{key:"disPatchErr",value:function(e){this.segment&&(this.close(!0),Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_error,qa.a.LoaderState_error_dispatch,e,""))}},{key:"startDisPatch",value:function(){Sa.diy_tsrcnt+Sa.diy_ts_drcnt>0&&ka(),this.dispatcher||(this.dispatcher=new io),Ra.a.getEvent().once(Oa.a.DisPatchStatus+this.segment.type,this.disPatchStatus.bind(this)),this.dispatcher.start(this.segment,this.retryCnt)}},{key:"disPatchStatus",value:function(e){e?this.disPatchErr(e):this.disPatchDone()}},{key:"checkTask",value:function(){var e,t,n,r;if(this.segment&&this.tskList)if(this.curLoadTskIndex>this.tskList.length-1&&!this.tsk)this._loadStage="",this.close(!1),Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_done);else{var i=Object(Et.j)(this.segment.sourceID);if(i){var a="",o=null;if(this.urlIndex>=0&&this.urlIndex<i.length)a=(o=i[this.urlIndex]).URL;else{var s=Do(this.segment.sourceID);0===s.length&&s.push(s.length-1),a=(o=i[s[0]]).URL}if(o&&(Dt.a.idc=this.segment.idc=this.idc=o.z),Vt.isHTTPS&&(a=a.replace(/^http:/gi,"https:")),this.segment.fileType.indexOf(on.a.TS)>=0||this.segment.fileType===on.a.DASH){var c=null;c=this.segment.fileType===on.a.TS||this.segment.fileType===on.a.DASH?{startPos:this.tskList[this.curLoadTskIndex].begin,endPos:this.tskList[this.curLoadTskIndex].end,contentlength:this.tskList[this.curLoadTskIndex].end-this.tskList[this.curLoadTskIndex].begin}:this.segment.loadInfo,this.segment.dataUrl=function(e,t,n){if(!t)return"";t.indexOf("&start=")>0?t=(t=t.replace(/\&start=[0-9.]+&/g,"&start="+n.startPos+"&")).replace(/\&start=[0-9.]+$/g,"&start="+n.startPos):t.indexOf("?start=")>0&&(t=(t=t.replace(/\?start=[0-9.]+&/g,"?start="+n.startPos+"&")).replace(/\?start=[0-9.]+$/g,"?start="+n.startPos));t.indexOf("&end=")>0?t=(t=t.replace(/\&end=[0-9.]+&/g,"&end="+n.endPos+"&")).replace(/\&end=[0-9.]+$/g,"&end="+n.endPos):t.indexOf("?end=")>0&&(t=(t=t.replace(/\?end=[0-9.]+&/g,"?end="+n.endPos+"&")).replace(/\?end=[0-9.]+$/g,"?end="+n.endPos));t.indexOf("&contentlength=")>0?t=(t=t.replace(/\&contentlength=[0-9.]+&/g,"&contentlength="+n.contentlength+"&")).replace(/\&contentlength=[0-9.]+$/g,"&contentlength="+n.contentlength):t.indexOf("?contentlength=")>0&&(t=(t=t.replace(/\?contentlength=[0-9.]+&/g,"?contentlength="+n.contentlength+"&")).replace(/\?contentlength=[0-9.]+$/g,"?contentlength="+n.contentlength));return t}(this.segment.fileType,a,c)}else this.segment.fileType.indexOf(on.a.M4S)>=0&&(this.segment.dataUrl=a);this.url=this.segment.dataUrl,this.tsk=this.tskList[this.curLoadTskIndex++];var u=qt.a.getPureIP(this.url);Dt.a.cdnLoadDoMain&&Dt.a.cdnLoadDoMain!==u&&ka(),Dt.a.domain=this.segment.ip=this.domain=Dt.a.cdnLoadDoMain=u;var d=this.url.indexOf(u),l=this.segment.fileType;this.segment.fileType.indexOf(on.a.TS)>=0&&(l=on.a.TS);var f=this.url.indexOf("."+l);this.tsk.path=this.url.slice(d+u.length,f+4),this.tsk.url=this.url,this.tsk.rate=this.segment.rate,this.tsk.ip=u+":80",this.tsk.segment=this.segment,this.tsk.data=null,this.tsk.range=null,Ra.a.getEvent().on(Oa.a.LoadStatus+this.CDNStateChangeEventID,this.loaderStateChange.bind(this)),"dcache"===this.idc?Sa.diy_ts_drcnt++:Sa.diy_tsrcnt++,this.ftt=!0;try{this.startTime=Date.now(),e=this.domain,t=this.idc,n=e+"|"+t,(r=ho.get(n))?ho.set(n,{total:r.total+1,failcnt:r.failcnt}):ho.set(n,{total:1,failcnt:0}),this.loader.load(this.tsk,this.segment.loadType)}catch(h){this.segment&&(this.close(!0),Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_error,qa.a.LoaderState_error_load,"trycatchError",""))}}else this.startDisPatch()}}},{key:"loaderStateChange",value:function(e,t){if(this.segment)switch(e){case"progress":this.tsk&&this.tsk.data&&this.tsk.range&&(this.tsk.range.end-this.tsk.range.begin!==this.tsk.data.byteLength&&Jt.a.error("data len is not right ,url = "+this.segment.dataUrl+"range "+this.tsk.range.begin+"-"+this.tsk.range.end),this.ftt&&("dcache"===this.idc?(Sa.diy_ts_dfttcnt++,Sa.diy_ts_dftttime+=Date.now()-this.startTime):(Sa.diy_tsfttcnt++,Sa.diy_tsftttime+=Date.now()-this.startTime),this.ftt=!1),"dcache"===this.idc?Sa.diy_ts_dsize+=this.tsk.data.byteLength:Sa.diy_tssize+=this.tsk.data.byteLength,Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_progress,this.tsk.data,this.tsk.range.begin,this.tsk.range.end-this.tsk.range.begin));break;case"done":Jt.a.info("load [DONE] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index : "+this.segment.index),this.tsk=null,this.checkTask(),"dcache"===this.idc?(Sa.diy_ts_dtime+=Date.now()-this.startTime,Sa.diy_ts_dsucccnt++):(Sa.diy_tstime+=Date.now()-this.startTime,Sa.diy_tssucccnt++);break;case"error":"dcache"===this.idc?(Sa.diy_ts_derr=encodeURIComponent(t),Sa.diy_ts_durl=encodeURIComponent(this.segment?this.segment.dataUrl:"")):(Sa.diy_tserr=encodeURIComponent(t),Sa.diy_tsurl=encodeURIComponent(this.segment?this.segment.dataUrl:""),Sa.diy_tserrtype=eo.a.getErrorType(t)),Dt.a.last_errMesaage=t,Dt.a.last_errurl=this.segment?this.segment.dataUrl:"",Jt.a.info("load [error] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index-"+this.segment.index+" errDetail-"+t),Ra.a.getEvent().emit(this.CDNStateChangeEventID,qa.a.LoaderState_error,qa.a.LoaderState_error_load,t,"")}}},{key:"close",value:function(e){this.tskList=null,this.tsk=null,Ra.a.getEvent().off(Oa.a.DisPatchStatus+this.segment.type),this.dispatcher&&this.dispatcher.clear(),this.dispatcher=null,this.segment=null,this.loader&&(e||this.loader.type===ao.type)&&this.loader.running&&this.loader.close(),this.loader=null,Ra.a.getEvent().off(Oa.a.LoadStatus+this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.segment}},{key:"loadStage",get:function(){return this._loadStage},set:function(e){this._loadStage=e}},{key:"curLoadTskIdx",get:function(){return this.curLoadTskIndex},set:function(e){this.curLoadTskIndex=e}},{key:"doMainName",get:function(){return this.domain}},{key:"dataUrl",get:function(){return this.url}},{key:"curIDC",get:function(){return this.idc}}]),e}(),go="",yo=null,mo="",bo=/[a-z]/i,ko=[];var xo=function(e,t,n){if(e&&!(ko.indexOf(e)>=0)){if(!bo.test(e)){var r=qt.a.getUserInfoFromCookie(),i={dmnm:e,ips:e,userinfo:r.userInfo,idc:n||r.idc,type:t};return Jt.a.debug("fetch DNSParser"+JSON.stringify(i)),void Dt.a.sendPingBack({type:"DNSParser",para:i})}if(n&&Dt.a.last_cdnIP&&""!==Dt.a.last_cdnIP){var a=qt.a.getUserInfoFromCookie(),o={dmnm:mo,ips:Dt.a.last_cdnIP,userinfo:a.userArea,idc:n||a.idc,type:t};return ko.push(mo),Jt.a.info("DNSParser"+JSON.stringify(o)),void Dt.a.sendPingBack({type:"DNSParser",para:o})}mo=e,go="http://"+Ja.getPipeIp()+"/3f0/hd.cloud.iqiyi.com/d?dn="+mo+"&business=pcwPlayer&cross-domain=1",Vt.isHTTPS&&(go=go.replace(/^http:/gi,"https:")),(yo=new XMLHttpRequest).responseType="text",yo.onreadystatechange=function(){if(4===yo.readyState){if(yo.status>=200&&yo.status<300&&yo.response){var e=qt.a.getUserInfoFromCookie(),r="";yo.response&&(r=yo.response);var i={dmnm:mo,ips:r,userinfo:e.userArea,idc:n||e.idc,type:t};ko.push(mo),Jt.a.info("xhr DNSParser"+JSON.stringify(i)),Dt.a.sendPingBack({type:"DNSParser",para:i})}yo&&(yo.abort(),yo=null)}};try{yo.open("GET",go,!0),Jt.a.info("Xhr DNSParser Xhr url "+go),yo.send()}catch(s){Jt.a.error("xhr dns err-"+s.message),yo&&yo.abort()}}},To=!1,So=!1,Po=0,wo=0;function Io(e){return e<Et.a.dispatchCfg.length?Et.a.dispatchCfg[e]:Et.a.dispatchCfg[Et.a.dispatchCfg.length-1]}function Ao(e,t,n){var r=Object(Et.j)(e);if(r&&t)for(var i=0;i<r.length;i++)if(r[i].URL.split("/")[2].indexOf(t)>=0){r[i].errCnt=r[i].errCnt?r[i].errCnt+1:1,r[i].errCnt>=4-r.length&&(r[i].status=n),Jt.a.info("updateCDNUrlStatus ,cdnName : "+t+", errCnt : "+r[i].errCnt+", status : "+n),Et.e.set(e,r);break}}var Eo=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.videoSegment=null,this.loadTaskList=null,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,this.cdnTaskLoader=null,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.reportLowSpeed=!1}},{key:"load",value:function(e,t,n,r){this.fireError||0===t.length||(this.videoSegment=e,this.loadTaskList=t,this.loaderIndex=n,this.urlIndex=r||-1,To=!1,this.CDNStateChangeEventID=++Po,this.startTime=Date.now(),clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),Io(this.dispatchTimeoutCnt)),this.cdnTaskLoader=new vo,Ra.a.getEvent().on(this.CDNStateChangeEventID,this.stateChange.bind(this)),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,0,this.urlIndex,this.CDNStateChangeEventID),kr.addPBItem(ar.cdn_taskCnt))}},{key:"onDispatchTimeOut",value:function(){!this.loadTaskList||this.fireError||this.retryStep>0||(this.dispatchTimeoutCnt++,Sa.diy_dispatcherr="timeout",Sa.diy_diserrtype=eo.a.getErrorType("timeout"),Sa.diy_dispatchurl=encodeURIComponent(this.videoSegment?this.videoSegment.dispatchUrl:""),this.stateChange(qa.a.LoaderState_error,qa.a.LoaderState_error_dispatch,"timeout",Date.now()-this.startTime))}},{key:"onRcvTimeOut",value:function(){if(!(!this.loadTaskList||this.fireError||this.retryStep>0)){var e=!!this.cdnTaskLoader&&"dcache"===this.cdnTaskLoader.idc;this.hitProgress?(e?Sa.diy_ts_derr="recvTimeout":Sa.diy_tserr="recvTimeout",Sa.diy_tserrtype=eo.a.getErrorType("recvTimeout"),this.rcvTimeoutCnt++,this.stateChange(qa.a.LoaderState_error,qa.a.LoaderState_error_load,"recvTimeout",Date.now()-this.startTime)):(e?Sa.diy_ts_derr="ttfbTimeout":Sa.diy_tserr="ttfbTimeout",Sa.diy_tserrtype=eo.a.getErrorType("ttfbTimeout"),this.TTFBTimeoutCnt++,this.stateChange(qa.a.LoaderState_error,qa.a.LoaderState_error_load,"ttfbTimeout",Date.now()-this.startTime)),e?Sa.diy_ts_durl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:""):Sa.diy_tsurl=encodeURIComponent(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:"")}}},{key:"stateChange",value:function(e,t,n,r){var i,a;if(!(!this.loadTaskList||this.fireError||this.retryStep>0))switch(e){case qa.a.LoaderState_ready:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(a=this.TTFBTimeoutCnt)<Et.a.TTFBCfg.length?Et.a.TTFBCfg[a]:Et.a.TTFBCfg[Et.a.TTFBCfg.length-1]);break;case qa.a.LoaderState_progress:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(i=this.rcvTimeoutCnt)<Et.a.rcvCfg.length?Et.a.rcvCfg[i]:Et.a.rcvCfg[Et.a.rcvCfg.length-1]),this.onProgress(t,n,r);break;case qa.a.LoaderState_done:clearTimeout(this.timerStep),this.timerStep=0,this.onComplete();break;case qa.a.LoaderState_error:clearTimeout(this.timerStep),this.timerStep=0,this.onError(t,n,r)}}},{key:"onProgress",value:function(e,t,n){if(this.hitProgress||(kr.addPBItem(ar.cdn_progressCnt),kr.addPBItem(ar.cdn_progressTime,Date.now()-this.startTime),this.hitProgress=!0),kr.addPBItem(ar.cdn_loadTime,Date.now()-this.startTime),Dt.a.cdnSize+=n,Dt.a.cdnCostTime+=Date.now()-this.startTime,this.startTime=Date.now(),this.loadSizeForSpeed+=n,-1===this.loadTimeForSpeed)this.loadTimeForSpeed=Date.now();else if(Date.now()-this.loadTimeForSpeed>1e3&&(this.speed=Math.ceil(this.loadSizeForSpeed/(Date.now()-this.loadTimeForSpeed)),Jt.a.info("load SPEED(B/S)　：　"+1e3*this.speed+" , Rate : "+this.videoSegment.rate),function(e,t,n){var r=Object(Et.j)(e);if(r)for(var i=0;i<r.length;i++){if(t===r[i].URL.split("/")[2]){r[i].speed=n,Et.e.set(e,r);break}}}(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,this.speed),Dt.a.cdnSpeed=this.speed,this.loadSizeForSpeed=0,this.loadTimeForSpeed=Date.now(),this.speed<this.videoSegment.rate?this.speedLowCnt++:this.speedLowCnt--,this.speedLowCnt>5)){Jt.a.info("load lowSpeed ,idc:"+this.cdnTaskLoader.curIDC+",doMainName:"+this.cdnTaskLoader.doMainName),Dt.a.cdnSpeed=0,this.speedLowCnt=0,this.speed<this.videoSegment.rate/2&&!So&&qt.a.isHit()&&(this.cdnTaskLoader.doMainName?xo(this.cdnTaskLoader.doMainName,so,this.cdnTaskLoader.curIDC):this.videoSegment.dispatchUrl&&xo(qt.a.getPureIP(this.videoSegment.dispatchUrl),so,this.cdnTaskLoader.curIDC),So=!0),this.speed/1.2<this.videoSegment.rate&&("dcache"===this.cdnTaskLoader.idc?Sa.diy_ts_dlagurl=encodeURIComponent(this.cdnTaskLoader.dataUrl):Sa.diy_ts_lagurl=encodeURIComponent(this.cdnTaskLoader.dataUrl),Sa.diy_tserrtype="slowSpeed");var r=this.videoSegment.checkP2PHealth();if(r>=3+Math.ceil(this.speed/100))en.loader.message="load-lowSpeed-"+this.videoSegment.idc+"-"+this.videoSegment.ip+"-"+this.videoSegment.sourceID,this.clear(!0),this.videoSegment.setOnP2P(15e3),Jt.a.info("start pure P2P state! health peers : "+r+" , cdnSpeed : "+this.speed+" , byteRate : "+this.videoSegment.rate);else if(this.speed<this.videoSegment.rate/2&&"video"===this.videoSegment.type){To=!0;for(var i="",a=0;a<this.loadTaskList.length;a++)i+=this.loadTaskList[a].begin+" - "+this.loadTaskList[a].end+", ";Jt.a.info("lowSpeedFlag ,range, "+i),Ao(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,so),Ra.a.getEvent().emit(Oa.a.CdnNodeMgrStateChange+this.videoSegment.type,qa.a.LoaderState_lowSpeed,"",this.loaderIndex)}}if(n>0){if(this.videoSegment.fileType===on.a.DASH&&("a0"===this.videoSegment.index||"e0"===this.videoSegment.index)&&0===t){for(var o=0,s=Math.min(50,n);o<s&&0===e[o];)o++;if(o>=s)return Jt.a.error("vp9 load init data is null, "+this.videoSegment.dataUrl),this.stateChange(qa.a.LoaderState_error,qa.a.LoaderState_error_load,"dataError"),en.errorStage="dataNULL",void(en.errorFragment=this)}Sa.diy_cdnbw+=n,this.videoSegment.pushData(e,t,n)}}},{key:"onComplete",value:function(){if(this.videoSegment.fileType===on.a.FTS){if(To)return;this.videoSegment.loadDone=!0}this.videoSegment.clearEndOnP2PTime(),this.hitProgress||(kr.addPBItem(ar.cdn_progressCnt),kr.addPBItem(ar.cdn_progressTime,Date.now()-this.startTime)),kr.addPBItem(ar.cdn_loadTime,Date.now()-this.startTime),this.startTime=Date.now(),Dt.a.cdnSpeed=0,this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!1)}},{key:"onError",value:function(e,t,n){switch(clearTimeout(this.retryStep),this.retryStep=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),e){case qa.a.LoaderState_error_dispatch:if(en.dispatcher.message="dispatch-"+t+NaN+n+":index = "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,Jt.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt "+this.retryCnt+", msg : "+n+" ,loaderIndex : "+this.loaderIndex),"statusErr_405"===t&&(0===wo||Date.now()-wo>=18e5))return this.clear(!0),Et.e["delete"](this.videoSegment.sourceID),this.videoSegment.dataUrl="",wo=Date.now(),void Dt.a.noticeRefreshMovieData(this.videoSegment.tvid);this.videoSegment.dispatchOnError===undefined&&(this.videoSegment.dispatchOnError=0),this.videoSegment.dispatchOnError+=1,3===this.videoSegment.dispatchOnError&&this.videoSegment.dispatchUrl&&xo(qt.a.getPureIP(this.videoSegment.dispatchUrl),co);break;case qa.a.LoaderState_error_load:t===qa.a.LoaderState_dataRangeError&&(Et.e["delete"](this.videoSegment.sourceID),this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end)),"dataError"===t&&this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end),this.cdnTaskLoader&&xo(this.cdnTaskLoader.doMainName,co,this.cdnTaskLoader.curIDC),"statusErr_405"===t&&Et.e["delete"](this.videoSegment.sourceID),"lowSpeed"!==t&&"string"==typeof t&&t.indexOf("tryCatchError_")>=0&&this.cdnTaskLoader&&(Ao(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,co),r=this.cdnTaskLoader.doMainName,i=this.cdnTaskLoader.curIDC,a=r+"|"+i,(o=ho.get(a))?ho.set(a,{total:o.total,failcnt:o.failcnt+1}):ho.set(a,{total:0,failcnt:1})),0===qo(this.videoSegment.sourceID)&&Et.e["delete"](this.videoSegment.sourceID),this.cdnTaskLoader&&-1===this.videoSegment.errIDCList.indexOf(this.cdnTaskLoader.curIDC)&&this.videoSegment.errIDCList.push(this.cdnTaskLoader.curIDC),Dt.a.cdnSpeed=0,en.loader.message="load-"+t+" message- "+n+" idc - "+this.videoSegment.idc+"-"+this.videoSegment.ip+" index- "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,Jt.a.error("load [Error] range url : "+(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:null)+" , type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n+" ,loaderIndex : "+this.loaderIndex);break;default:Jt.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n)}var r,i,a,o;if(clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.videoSegment.checkP2PHealth()>=4)return Jt.a.info("load [Error],start pure P2P state,url "+this.cdnTaskLoader.dataUrl),this.clear(!0),void this.videoSegment.setOnP2P(15e3);if(this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.retryCnt++,this.retryCnt>Et.a.dispatchCfg.length){this.retryCnt=0;var s=Dt.a.getBufferFunc();(this.videoSegment.fileType.indexOf(on.a.M4S)>=0?Math.min(s.buffered.video.len,s.buffered.audio.len):s.len)<2?(this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,this.fireError=!0,Jt.a.error("load [FINAL Error] !!!, loaderIndex "+this.loaderIndex),Ra.a.getEvent().emit(Oa.a.CdnNodeMgrStateChange+this.videoSegment.type,e,t,this.loaderIndex)):this.retryStep=setTimeout(this.reLoad.bind(this),2e3)}else this.retryStep=setTimeout(this.reLoad.bind(this),2e3)}},{key:"reLoad",value:function(){var e;(clearTimeout(this.retryStep),this.retryStep=0,!this.loadTaskList||this.cdnTaskLoader.curLoadTskIndex-1>=this.loadTaskList.length)||(this.startTime=Date.now(),this.videoSegment&&(this.cdnTaskLoader.curLoadTskIdx>0&&this.cdnTaskLoader.curLoadTskIdx--,e=this.videoSegment.fileType!==on.a.FTS?this.videoSegment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end):[{begin:this.loadTaskList[0].begin,end:this.loadTaskList[this.loadTaskList.length-1].end}]),e&&0!==e.length?(kr.addPBItem(ar.cdn_taskCnt),this.loadTaskList=e,this.urlIndex=-1,this.videoSegment.fileType===on.a.FTS&&(this.videoSegment.segment.dataLen=0,To=!1),clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),Io(this.dispatchTimeoutCnt)),Jt.a.warn("reLoad !!!!!!!!!!!~~"+JSON.stringify(e)+", loaderIndex : "+this.loaderIndex+", retryCnt : "+this.retryCnt),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,this.retryCnt,this.urlIndex,this.CDNStateChangeEventID)):this.onComplete())}},{key:"clear",value:function(e){this.loadTaskList&&this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.startTime=0,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),e||(this.fireError=!1),this.loaderIndex=-1,Ra.a.getEvent().off(this.CDNStateChangeEventID),Dt.a.cdnLoadDoMain=""}},{key:"mssNodeReset",value:function(){this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),Ra.a.getEvent().off(this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.loadTaskList}},{key:"cdnSpeed",get:function(){return this.speed}},{key:"loadStage",get:function(){return this.cdnTaskLoader.loadStage},set:function(e){this.cdnTaskLoader.loadStage=e}},{key:"isError",get:function(){return this.fireError}}]),e}();function Do(e,t){var n=[],r=Object(Et.j)(e);if(r)for(var i=-1,a=-1,o=0;o<r.length;o++)1!==t&&t?r[o].status||n.push(o):(r[o].status||(r[o].speed&&r[o].speed>i?(i=r[o].speed,a=o):r[o].speed||-1!==a||(a=o)),o>=r.length-1&&-1!==a&&n.push(a));return n}function qo(e){var t=0,n=Object(Et.j)(e);if(n)for(var r=0;r<n.length;r++)n[r].status||t++;return t}var Oo=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.loadTaskList=null,this.segment&&(this.resetLoader(),Ra.a.getEvent().off(Oa.a.CdnNodeMgrStateChange+this.segment.type)),this.segment=null,this.loaderList=[]}},{key:"resetLoader",value:function(){for(var e=0;e<this.loaderList.length;e++)this.loaderList[e]&&(this.loaderList[e].clear(!1),this.loaderList[e]=null)}},{key:"load",value:function(e,t){if(!this.loadTaskList&&!this.fireError&&0!==t.length){this.segment=e,this.loadTaskList=t,Ra.a.getEvent().on(Oa.a.CdnNodeMgrStateChange+this.segment.type,this.stateChange.bind(this));var n=new Eo;this.loaderList.push(n),n.load(this.segment,this.loadTaskList,-1)}}},{key:"stateChange",value:function(e,t,n){var r=this;if(this.segment&&this.loadTaskList){var i=function(){switch(e){case qa.a.LoaderState_lowSpeed:if(r.loaderList.length>1)return Jt.a.info("already in MSS status"),{v:void 0};if(!Object(Et.j)(r.segment.sourceID))return{v:void 0};var i=r.checkTastList(),a=Do(r.segment.sourceID,i.loaderNum);if(i.loaderNum<=1||a.length<=1)return Jt.a.info("check MSS load , current dataLen is need 1 loader,so not open MSS "),{v:void 0};var o=0;for(o=0;o<r.loaderList.length;o++)r.loaderList[o].mssNodeReset();o=0;for(var s=function(){r.loaderList[o]||r.loaderList.push(new Eo);var e=null;e=o<i.loaderNum-1?i.tastList.slice(o,++o):i.tastList.slice(o++);for(var t="",n=0;n<e.length;n++)t+=e[n].begin+" - "+e[n].end+", ";var s=r;!function(e,t,n){setTimeout((function(){s.loaderList[t-1]?(Jt.a.info("start MSS load , loaderIndex "+(t-1)+",loadRange "+n),s.loaderList[t-1].load(s.segment,e,t-1,a[t-1])):Jt.a.info("MSS load is null, loaderIndex "+(t-1)+", loaderLen "+this.loaderList.length)}),50*(t-1))}(e,o,t)};o<i.loaderNum;)s();break;case qa.a.LoaderState_error_dispatch:case qa.a.LoaderState_error_load:for(var c=!0,u=0;u<r.loaderList.length;u++)if(!r.loaderList[u].isError){c=!1;break}c?r.cdnFinalErrFun(e,t):r.loaderList[n<0?0:n].clear(!0)}}();return"object"===B()(i)?i.v:void 0}}},{key:"cdnFinalErrFun",value:function(e,t){Jt.a.error("all  loader [FINAL Error]!!!!!!!!!!!!!!!!"),_o(!0),e===qa.a.LoaderState_error_dispatch?(en.errorStage="dispatch",Sa.diy_finalerr="1"):t===qa.a.LoaderState_dataRangeError?(en.errorStage=t,Sa.diy_finalerr="22"):(en.errorStage="load",Sa.diy_finalerr="21"),ka(!0),kr.check({rec:"fail",etyp:en.errorStage,info:en.loader.message}),en.errorFragment=this}},{key:"checkTastList",value:function(){this.segment.fileType!==on.a.FTS&&(this.loadTaskList=this.segment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end));for(var e=0,t="",n=0;n<this.loadTaskList.length;n++)e+=this.loadTaskList[n].end-this.loadTaskList[n].begin,t+=this.loadTaskList[n].begin+" - "+this.loadTaskList[n].end+", ";var r=qo(this.segment.sourceID);if(0===r||1===r)return{loaderNum:r,tastList:this.loadTaskList};var i=Math.min(Math.max(1,Math.floor(e/1048576)),r);if(Jt.a.info("MSS loader checkTastList, NeedLoaderLen "+e+", needLoaderNum "+i+", tastList "+t),i<=this.loadTaskList.length)return{loaderNum:i,tastList:this.loadTaskList};for(var a=[],o=Math.ceil(e/i),s=this.loadTaskList[0].begin,c=0,u=0;u<i;u++)c<this.loadTaskList.length&&(s+o<=this.loadTaskList[c].end?(a.push({begin:s,end:s+o}),s+=o):(a.push({begin:s,end:this.loadTaskList[c].end}),s=this.loadTaskList[c].end),s>=this.loadTaskList[c].end&&++c<this.loadTaskList.length&&(s=this.loadTaskList[c].begin));for(;c<this.loadTaskList.length;)s<this.loadTaskList[c].end&&a.push({begin:s,end:this.loadTaskList[c].end}),s=this.loadTaskList[c].end,++c<this.loadTaskList.length&&(s=this.loadTaskList[c].begin);return Jt.a.info("MSS loader split tast res ,  "+JSON.stringify(a)),{loaderNum:i,tastList:a}}},{key:"running",get:function(){if(!this.loaderList)return!1;for(var e=0;e<this.loaderList.length;e++)if(this.loaderList[e].running)return!0;return this.reset(),!1}}]),e}(),Ro="video",Lo="audio",Co=new Oo,Mo=new Oo;function No(e,t,n){var r="",i=parseInt(n.substring(1));return r=i>=16?qt.a.sliceStr(e+t,5)+n.substring(0,1)+i.toString(16):qt.a.sliceStr(e+t,5)+n.substring(0,1)+"0"+i.toString(16),parseInt("0x"+r)}var Bo=function(){function e(t){a()(this,e),this.dispatchUrl=t.dispatchUrl,this.tvid=t.tvid,this.rate=t.levelId,this.vids=t.vids,this.vid=t.vid,this.albumID=t.albumID.toString(),this.sourceID=t.sourceID,this.index=t.index,this.type=t.trackerType,this.startPos=t.startPos,this.endPos=t.endPos,this.size=t.size,this.lastCEPos=-1,this.startTime=t.startTime<0?0:t.startTime,this.endTime=t.endTime<0?864e5:t.endTime,this.endOnP2PTime=0,this.fileType=t.videoType,this.realIdx=t.realSegIdx,this.alias=No(this.sourceID,this.vid,this.realIdx),this.fragmentName=this.alias+"_"+this.index+"|"+this.showStartTime+"-"+this.showEndTime,this.idc="",this.ip="",this.errIDCList=[],""!==this.albumID&&"0"!==this.albumID&&this.albumID!==undefined&&0!==this.albumID?this.p2pID=parseInt("0x"+Jn()(this.albumID).substr(0,10)).toString():""!==this.tvid&&"0"!==this.tvid&&this.tvid!==undefined&&0!==this.tvid?this.p2pID=parseInt("0x"+Jn()(this.tvid).substr(0,10)).toString():this.p2pID=this.vid}return s()(e,[{key:"onTracker",get:function(){return ea.hasProxyByID(this.p2pID)}},{key:"checkCreateSegment",value:function(){if(this.segment){if(this.segment.alias===this.alias&&this.segment.size===this.size){0!==this.segment.state&&(this.segment.state=0);var e=this;return this.segment.refreshFun=function(){e&&e.refreshBuffer.call(e)},Jt.a.info("segment is exit"),this.segment.setRange(this.startPos,this.endPos),void(this.seekable&&this.segment.setPosList(this.seekable))}Jt.a.info("segment is exit,but size or alias is match,so remove"),Ln.removeSegment(this.alias)}var t=new Da(this.size,this.tvid,this.sourceID,this.albumID,this.realIdx,this.alias,this.vid,this.p2pID,this.rate,this.vids,this.fileType,this.seekable);Ln.setSegment(this.alias,t);var n=this;this.segment.refreshFun=function(){n&&n.refreshBuffer.call(n)},this.segment.setRange(this.startPos,this.endPos)}},{key:"loadData",value:function(e,t){if(this.segment){0!==this.segment.state&&(this.segment.state=0),this.fileType===on.a.FTS&&(this.segment.dataLen=0);var n=this.checkTask(e,t);if(0===n.length)return this.segment.checkData(),void Jt.a.info("data is already have,not need load~~~ "+this.index+" : "+e+"-"+t+" state: "+this.segment.state+" cePos "+this.segment.cePos+",curCEPos "+this.lastCEPos);"video"===this.type?(Jt.a.info("after checkTask ,video loadPoint  range = "+JSON.stringify(n)),Co.load(this,n)):(Jt.a.info("after checkTask ,audio loadPoint  range = "+JSON.stringify(n)),Mo.load(this,n))}}},{key:"p2pLoadSegment",value:function(){"video"===this.type&&this.segment&&this.segment.dataErrCount<10&&Ln.setLoadSegment(this.alias)}},{key:"isOnP2P",get:function(){return this.endOnP2PTime>0&&Date.now()<=this.endOnP2PTime}},{key:"segment",get:function(){return Ln.getSegment(this.alias)}},{key:"setOnP2P",value:function(e){this.endOnP2PTime=e+Date.now(),this.type===Ro&&(Oo.loadStage="P2P")}},{key:"clearEndOnP2PTime",value:function(){this.endOnP2PTime=-1}},{key:"checkTask",value:function(e,t){return this.segment?this.fileType===on.a.FTS?[{begin:e,end:t}]:this.segment.checkTask(e,t):(Jt.a.error("checkTask return null,because of segment is null"),null)}},{key:"dataUrl",get:function(){return this.segment.dataUrl},set:function(e){this.segment.dataUrl=e}},{key:"done",get:function(){return!!this.segment&&(this.fileType===on.a.M4S||this.fileType===on.a.DASH||this.fileType===on.a.TS?this.segment.done:this.fileType===on.a.FTS?this.segment.tsLoadDone:void 0)}},{key:"checkP2PHealth",value:function(){return this.segment?this.segment.checkP2PHealth():0}},{key:"clearData",value:function(e,t){this.segment&&this.segment.deleteRange(e,t-e)}},{key:"updateLoadRange",value:function(e,t){this.segment&&this.segment.setRange(e,t)}},{key:"setTrackerIP",value:function(e){ea&&(ea.hasProxyByIPInfo(e)?ea.getProxyByIPInfo(e).id=this.p2pID:ea.startProxy(this.p2pID,e))}},{key:"recycleCDNTask",value:function(e){this.segment&&this.segment.recycleCDNTask(e)}},{key:"refreshBuffer",value:function(){this.segment&&(-1!==this.endPos?this.lastCEPos=Math.min(this.segment.cePos,this.endPos):this.lastCEPos=this.segment.cePos)}},{key:"updateCePos",value:function(e){this.segment?this.lastCEPos=e:this.lastCEPos=-1}}]),e}();function Fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Uo=function(e){l()(n,e);var t=Fo(n);function n(e,r){return a()(this,n),t.call(this,e,r)}return s()(n,[{key:"pushData",value:function(e,t,n){return this.segment?(this.segment.addData(t,e,n),kr.cdnSize=n+kr.cdnSize,this.segment.peerMgr&&(this.segment.peerMgr.cdnSize=n+this.segment.peerMgr.cdnSize),!0):(Jt.a.warn("pushData segment is null"),!0)}}]),n}(Bo);function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Vo=function(e){l()(n,e);var t=jo(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r)).loadInfo=e.loadInfo,i}return s()(n,[{key:"pushData",value:function(e,t,n){if(!this.segment)return Jt.a.warn("pushData segment is null"),!0;var r=t-this.loadInfo.startPos,i=e.byteLength;return this.segment.addData(r,e,i),kr.cdnSize=n+kr.cdnSize,this.segment.peerMgr?(this.segment.peerMgr.cdnSize=i+this.segment.peerMgr.cdnSize,!0):void 0}},{key:"loadDone",get:function(){return this.segment.tsLoadDone},set:function(e){this.segment.tsLoadDone=e}}]),n}(Bo);function Ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Wo,zo,Yo,Go,Qo,Ko=function(e){l()(n,e);var t=Ho(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r)).seekable=e.seekable,i}return s()(n,[{key:"pushData",value:function(e,t,n){return!this.segment||(this.segment.addData(t,e,n),this.type===Ro&&(kr.cdnSize=n+kr.cdnSize),this.segment.peerMgr&&this.type===Ro&&(this.segment.peerMgr.cdnSize=n+this.segment.peerMgr.cdnSize),!0)}},{key:"dataLen",get:function(){return this.segment.dataLen}}]),n}(Bo),$o=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.time=0,this.bid=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.dataFlag=!1}}]),e}(),Zo=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.levelID=-1,this.startTime=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.cEndTime=0,this.endPos=0,this.init=!1}}]),e}(),Xo=function(){function e(){a()(this,e),this.reset()}return s()(e,[{key:"reset",value:function(){this.levelID=-1,this.segmentIndex=0,this.chunkIndex=0,this.time=0,this.tvid=0}}]),e}(),Jo=!1,es=!1,ts=!1,ns=new Xo,rs=new Xo,is=!0,as=!1,os=Date.now(),ss=2e3,cs=[],us=0,ds=!1,ls=0,fs=function(){function e(){a()(this,e),this.dashInfo=null,this.levelMgr=null,this._levelID=0,this._absStrategy=null,this._readPointer=null,this._loadPointer=null,this._readAudioPointer=null,this._loadAudioPointer=null,this._p2pLoaderPointer=null,this.curLoadSegment=null,this.curLoadAudioSegment=null,this.videoFormatType=null,this.rangeSTime=-1,this.rangeETime=-1,this.audioDone=!1,this.videoDone=!1,this.absTocbs=!1,this.event=null,this.curFeedBid=0,this.buffTimer=-1}return s()(e,[{key:"done",get:function(){return this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?this.videoDone&&this.audioDone:this.videoDone}},{key:"resetLoader",value:function(){Co.reset(),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||Mo.reset()}},{key:"resetDoneStatus",value:function(){this.videoDone=!1,this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||(this.audioDone=!1)}},{key:"refreshLoadRange",value:function(e){e[0][1]>this.rangeETime&&this.done&&this.resetDoneStatus(),this.rangeSTime=e[0][0],this.rangeETime=e[0][1],Jt.a.info("refreshLoadRange time ,start "+this.rangeSTime+", end "+this.rangeETime)}},{key:"feed",value:function(e,t,n){Dt.a.tvId=this.tvid=e,this.event?this.event.clear():this.event=Ra.a.newEvent(),this.curFeedBid=n.bid,null===this.levelMgr&&(this.levelMgr=new ln),this.dashInfo&&this.dashInfo.tvid===this.tvid||(this.levelMgr.clear(),this.dashInfo=new dn(n));var r=this.dashInfo.parser(n);r&&this.levelMgr.set(r.levelID,r.data),this.rangeSTime=t[0][0],this.rangeETime=t[0][1],Jt.a.info("feed time range ,start "+this.rangeSTime+", end "+this.rangeETime+",Type "+n.type),Dt.a.fileType=this.videoFormatType=n.type,Dt.a.aid=n.aid}},{key:"setDefList",value:function(e){if(this.dashInfo)for(var t=0;t<e.length;){Jt.a.info("setDefList , bid ",e[t].bid);var n=this.dashInfo.parser(e[t]);n&&this.levelMgr.set(n.levelID,n.data),t++}}},{key:"checkBitRate",value:function(e){if(null===this.dashInfo)return null;-1===this._levelID?(null===this._absStrategy&&(this._absStrategy=new Qn),this.buffTimer=setTimeout(this.getBuffer.bind(this),ss)):(this.buffTimer>0&&clearTimeout(this.buffTimer),null!==this._absStrategy&&(this._absStrategy.close(),this._absStrategy=null),ns.tvid===this.tvid&&(-1!==ns.levelID&&ns.reset(),-1!==rs.levelID&&rs.reset()),this.levelMgr.get(e)||Jt.a.error("need feed first ,bitRate : ",e))}},{key:"levelID",get:function(){if(-1===this._levelID){if(this._absStrategy){var e=this._absStrategy.bitrate;return-1!==e&&this.levelMgr.has(e)&&Dt.a.absOpen||(e=this.curFeedBid),e}return this.curFeedBid}return this._levelID},set:function(e){this._levelID=e}},{key:"seek",value:function(e,t){0===this.levelID&&Jt.a.error("need set bitrate first!"),ts=!1;var n=this.levelID;null===this.dashInfo&&Jt.a.error("need feed first!"),(e<0||e===undefined)&&(e=this.rangeSTime);var r=!1;-1===this._levelID&&this.curLoadSegment&&this.curLoadSegment.rate!==n&&this.levelMgr.has(this.curLoadSegment.rate)&&(n=this.curLoadSegment.rate),-1===this._levelID&&this._readPointer&&this._readPointer.bid!==n&&(r=!0),t||(ns.reset(),rs.reset()),zo=!0,is=!0,this.absTocbs=!1;var i=this.levelMgr.get(n);if(i||Jt.a.error(" while seek ,levelInfo is null ,bid "+n),e>=i.duration)return ts=!0,this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(this.videoDone=!0,this.audioDone=!0):this.videoDone=!0,void Jt.a.warn("while seek, time is bigger than suration, seek.time "+e+", duration: ",i.duration);var a=null;if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?a=an.getGapPos(i,e,Ro,"start"):this.videoFormatType.indexOf(on.a.TS)>=0&&(a=an.getTSGapPos(i,e,"start")),null!==a){this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||Mo.reset(),Co.reset(!1),Jo=!0,this.resetDoneStatus(),Go=Date.now(),e<this.rangeSTime?(this.rangeSTime=e,Jt.a.info("seek update time start  range ,start "+this.rangeSTime+", end "+this.rangeETime)):e>this.rangeETime&&(this.rangeETime=Math.min(i.duration,this.rangeETime),Jt.a.info("seek update time end range ,start "+this.rangeSTime+", end "+this.rangeETime)),null===this._readPointer&&(this._readPointer=new $o);var o=this._readPointer.segmentIndex;if(this.changeSegmentState(i,"e",a.segmentIndex,0),Jt.a.info("seek update readPointer call changeSegmentState set 0 : e"+a.segmentIndex),ds=!0,ls=0,this._readPointer.time=a.time,this._readPointer.segmentIndex=a.segmentIndex,this._readPointer.chunkIndex=a.chunkIndex,-1===this._levelID&&0!==this._readPointer.bid&&this._readPointer.bid!==n?this._readPointer.bid=this._readPointer.bid:this._readPointer.bid=n,r&&(ns.time=this._readPointer.time,ns.tvid=this.tvid,ns.levelID=n,ns.segmentIndex=this._readPointer.segmentIndex,ns.chunkIndex=this._readPointer.chunkIndex,Qo=!0,Jt.a.info("seek cause switchVideoPointer ,"+JSON.stringify(ns))),this.videoFormatType===on.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=a.pos,o!==this._readPointer.segmentIndex&&(this.changeSegmentState(i,"e",o,1),Jt.a.info("seek update readPointer call changeSegmentState set 1 : e"+o)),null===this._loadPointer?(this._loadPointer=new Zo,this.videoFormatType===on.a.DASH&&(this._loadPointer.init=!0)):this.videoFormatType!==on.a.DASH||this.hasInitData(n,Ro)||(this._loadPointer.init=!0),this._loadPointer.startTime=a.time,this._loadPointer.cEndTime=a.time,this._loadPointer.segmentIndex=a.segmentIndex,this._loadPointer.chunkIndex=a.chunkIndex,this._loadPointer.chunkPos=a.pos,this._loadPointer.levelID=n,this._p2pLoaderPointer||(this._p2pLoaderPointer=new Zo),this._p2pLoaderPointer.levelID=n,this.curLoadSegment){var s=parseInt(this.curLoadSegment.index.slice(1));this._loadPointer.segmentIndex!==s?(this.changeSegmentState(i,"e",s,1),Jt.a.info("seek update loadPointer call changeSegmentState set 1 : e"+s)):(this.curLoadSegment.updateCePos(a.pos),this.curLoadSegment.updateLoadRange(this._loadPointer.chunkPos,this.curLoadSegment.endPos),Jt.a.info("seek update loadPointer call updateCePos set 1 : e"+a.pos))}if(-1===this._levelID&&(Yo=a.chunkIndex-1),this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){var c=an.getGapPos(i,e,Lo,"start");if(null===c)Jt.a.error("Dash.seek fetch audio start point is null,time = "+e);else{null===this._loadAudioPointer?(this._loadAudioPointer=new Zo,this.videoFormatType===on.a.DASH&&(this._loadAudioPointer.init=!0)):this.videoFormatType!==on.a.DASH||this.hasInitData(n,Lo)||(this._loadAudioPointer.init=!0),this.changeSegmentState(i,"a",c.segmentIndex,0),Jt.a.info("seek call changeSegmentState set 0 : a"+c.segmentIndex);var u=this._loadAudioPointer.segmentIndex;this._loadAudioPointer.startTime=c.time,this._loadAudioPointer.cEndTime=c.time,this._loadAudioPointer.segmentIndex=c.segmentIndex,this._loadAudioPointer.chunkIndex=c.chunkIndex,this._loadAudioPointer.chunkPos=c.pos,this._loadAudioPointer.levelID=n,r&&(rs.time=this._loadAudioPointer.startTime,rs.tvid=this.tvid,rs.levelID=n,rs.segmentIndex=this._loadAudioPointer.segmentIndex,rs.chunkIndex=this._loadAudioPointer.chunkIndex,as=!0,Jt.a.info("seek cause switchAudioPointer ,"+JSON.stringify(rs))),u!==this._loadAudioPointer.segmentIndex&&(this.changeSegmentState(i,"a",u,1),Jt.a.info("seek loadAudioPointer call changeSegmentState set 1 : a"+u)),null===this._readAudioPointer&&(this._readAudioPointer=new $o);var d=this._readAudioPointer.segmentIndex;this._readAudioPointer.time=c.time,this._readAudioPointer.segmentIndex=c.segmentIndex,this._readAudioPointer.chunkIndex=c.chunkIndex,this._readAudioPointer.chunkPos=c.pos,-1===this._levelID&&0!==this._readAudioPointer.bid&&this._readAudioPointer.bid!==n?this._readAudioPointer.bid=this._readAudioPointer.bid:this._readAudioPointer.bid=n,d!==this._readAudioPointer.segmentIndex?(this.changeSegmentState(i,"a",d,1),Jt.a.info("seek call changeSegmentState 1, a"+d)):this.curLoadAudioSegment&&(this.curLoadAudioSegment.updateCePos(c.pos),this.curLoadAudioSegment.updateLoadRange(this._loadAudioPointer.chunkPos,this.curLoadAudioSegment.endPos))}}}else Jt.a.error("Dash.seek fetch video start point is null,time = "+e)}},{key:"read",value:function(e){if(os=Date.now(),null!==this._readPointer&&(this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||null!==this._readAudioPointer))if(null!==this.levelMgr){var t=!1,n=!1,r=!1,i=!1,a=!1;if(this.absTocbs)Jt.a.info("abs switch cbs ing,so wait switch finished start read");else if(!Jo){if(0===this._readPointer.bid&&(this._readPointer.bid=this.levelID),this._readAudioPointer&&0===this._readAudioPointer.bid&&(this._readAudioPointer.bid=this.levelID),-1===this._levelID&&-1!==ns.levelID&&(this.videoFormatType.indexOf(on.a.TS)>=0||(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&-1!==rs.levelID)&&(this._readPointer.time>=ns.time&&zo&&(t=!0),!t&&ns.time>this._readPointer.time&&(i=!0),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||(this._readAudioPointer.time>=rs.time&&is&&(n=!0),!n&&rs.time>this._readAudioPointer.time&&(a=!0)),t&&(this.videoFormatType.indexOf(on.a.TS)>=0||(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&n))){if(!Dt.a.canSwitchVd())return;r=!0,Qo||(this.changeSegmentState(this.levelMgr.get(this._readPointer.bid),"e",this._readPointer.segmentIndex,1),Qo=!1),this._readPointer.bid=ns.levelID,this._readPointer.segmentIndex=ns.segmentIndex,this._readPointer.chunkIndex=ns.chunkIndex,this._readPointer.time=ns.time;var o=this.levelMgr.get(this._readPointer.bid);if(o){var s=null;(s=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getChunkSEPos(o,Ro,this._readPointer.segmentIndex,this._readPointer.chunkIndex):an.getTSChunkSEPos(o,this._readPointer.segmentIndex,this._readPointer.chunkIndex))?this.videoFormatType===on.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=s.sPos:Jt.a.error("switch readPointer chunkGapPos is null ,bid  "+JSON.stringify(this._readPointer))}else Jt.a.error("switch readPointer levelInfo is null ,bid  "+this._readPointer.bid);if(Jt.a.info("read Video pointer switch level "+JSON.stringify(this._readPointer)),ns.reset(),this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){as||(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),as=!1),this._readAudioPointer.bid=rs.levelID,this._readAudioPointer.segmentIndex=rs.segmentIndex,this._readAudioPointer.chunkIndex=rs.chunkIndex,this._readAudioPointer.time=rs.time;var c=an.getChunkSEPos(o,Lo,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);if(c)this._readAudioPointer.chunkPos=c.sPos;else{Jt.a.error("switch readAudioPointer audioChunkPos is null");var u=an.getGapPos(o,rs.time,Lo,"start");u?(this._readAudioPointer.segmentIndex=u.segmentIndex,this._readAudioPointer.chunkIndex=u.chunkIndex,this._readAudioPointer.chunkPos=u.pos,this._readAudioPointer.time=u.time):Jt.a.error("switch readAudioPointer startGap is null ")}Jt.a.info("read Audio pointer switch level "+JSON.stringify(this._readAudioPointer)),rs.reset()}return Jt.a.info("ABS switch bid ,notice pcw ,"+this._readPointer.bid),Dt.a.switchAutoDef(this._readPointer.bid),this._readPointer.dataFlag=!1,void(this._readAudioPointer&&(this._readAudioPointer.dataFlag=!1))}if(-1===this._levelID||this._readPointer.bid===this._levelID){var d=this.levelMgr.get(this._readPointer.bid);if(d!==undefined){var l=null,f=null,h=null;if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(f=(l=an.getFilesInfo(d,Ro))[this._readPointer.segmentIndex].seekable.time,h=l[this._readPointer.segmentIndex].seekable.pos):this.videoFormatType.indexOf(on.a.TS)>=0&&(f=(l=d.m3u8)[this._readPointer.segmentIndex].time,h=l[this._readPointer.segmentIndex].pos),ts){if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){var p=hs(l,l.length-1,l[l.length-1].seekable.pos.length-1),_=an.getFilesInfo(d,Lo),v=hs(_,_.length-1,_[_.length-1].seekable.pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:on.a.M4S,video:{chunkEOF:!0,data:null,index:p},audio:{chunkEOF:!0,data:null,index:v}}}var g=hs(l,l.length-1,l[l.length-1].pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:"ts",stream:{chunkEOF:!0,data:null,index:g}}}if(e&&this.videoFormatType===on.a.DASH){var y=null,m=null,b=l[0].sourceID,k=No(b,d.vid,"e0"),x=Ln.getSegment(k);if(x){var T=an.getChunkSEPos(d,Ro,0,0);if(T){var S=T.ePos-T.sPos;x.hasData(T.sPos,S)&&(y=x.getData(T.sPos,S))}}if(k=No(b=an.getFilesInfo(d,Lo)[0].sourceID,d.vid,"a0"),x=Ln.getSegment(k)){var P=an.getChunkSEPos(d,Lo,0,0);if(P){var w=P.ePos-P.sPos;x.hasData(P.sPos,w)&&(m=x.getData(P.sPos,w))}}return y&&m?(Jt.a.info("~~~~~read init data ok,bid = "+this._readPointer.bid),26!==y[0]&&Jt.a.info("init segment : "+y),{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:on.a.DASH,video:{data:y},audio:{data:m}}):null}var I="",A=l[this._readPointer.segmentIndex].sourceID,E=l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,D=No(A,d.vid,"e"+E),q=null;q=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getChunkSEPos(d,Ro,this._readPointer.segmentIndex,this._readPointer.chunkIndex):an.getTSChunkSEPos(d,this._readPointer.segmentIndex,this._readPointer.chunkIndex);var O=Ln.getSegment(D),R=0;if(q&&O)if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){var L=q.ePos-this._readPointer.chunkPos;O.hasData(this._readPointer.chunkPos,L)&&(R=L)}else if(this.videoFormatType===on.a.TS){var C=Math.min(O.cePos,q.ePos)-this._readPointer.chunkPos;O.hasData(this._readPointer.chunkPos,C)&&(R=C)}else this.videoFormatType===on.a.FTS&&(R=O.dataLen-this._readPointer.chunkPos);var M=null;(this.videoFormatType.indexOf(on.a.TS)>=0||this._readPointer.time<=this._readAudioPointer.time||Math.round(this._readPointer.time)-Math.round(this._readAudioPointer.time)<15||i)&&(t&&!r||O&&R>0&&(M=O.getData(this._readPointer.chunkPos,R)));var N=hs(l,this._readPointer.segmentIndex,this._readPointer.chunkIndex);this.videoFormatType===on.a.DASH&&N--,M&&(I+="~~~~~read video data ok,bid = "+this._readPointer.bid+" index = "+N+" startPos = "+this._readPointer.chunkPos+" endPos = "+(this._readPointer.chunkPos+R),this._readPointer.chunkPos+=M.length,this._readPointer.dataFlag=!0);var B=!1;if(M&&(zo=!1,this.videoFormatType===on.a.FTS?O&&O.tsLoadDone&&this._readPointer.chunkPos===O.dataLen&&(B=!0,zo=!0):q&&this._readPointer.chunkPos>=q.ePos&&(B=!0,zo=!0)),B&&this._readPointer.segmentIndex<=l.length-1){if((this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&this._readPointer.chunkIndex<h.length-1&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=h.length-1))if(this._readPointer.segmentIndex<l.length-1){this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,this._readPointer.chunkIndex=0,E!==(l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(d,"e",this._readPointer.segmentIndex-1,1),Jt.a.info("read  call changeSegmentState set 1, e"+this._readPointer.segmentIndex-1));var F=an.getChunkSEPos(d,Ro,this._readPointer.segmentIndex,this._readPointer.chunkIndex);F&&(this._readPointer.chunkPos=F.sPos)}else this.changeSegmentState(d,"e",this._readPointer.segmentIndex,1),Jt.a.info("~~~~~read video data finish ~~ segmentIndex "+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1));if(this.videoFormatType.indexOf("ts")>=0&&this._readPointer.chunkIndex<h.length&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=h.length))if(this._readPointer.segmentIndex<l.length-1){this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,this._readPointer.chunkIndex=0,E!==(l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(d,"e",this._readPointer.segmentIndex-1,1),Jt.a.info("read  call changeSegmentState set 1, e"+(this._readPointer.segmentIndex-1)));var U=an.getTSChunkSEPos(d,this._readPointer.segmentIndex,this._readPointer.chunkIndex);U&&(this._readPointer.chunkPos=U.sPos)}else this.changeSegmentState(d,"e",this._readPointer.segmentIndex,1),Jt.a.info("~~~~~read video data finish ~~"+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1));var j=f[this._readPointer.chunkIndex];this._readPointer.time=qt.a.accAdd(l[this._readPointer.segmentIndex].start_second,j),I+=" ,video_time = "+this._readPointer.time}var V=null,H=0,W=null,z=null,Y=null,G=0,Q=!1,K="";if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){var $=this.levelMgr.get(this._readAudioPointer.bid);if(W=an.getFilesInfo($,Lo),this._readAudioPointer.time<=this._readPointer.time||Math.round(this._readAudioPointer.time)-Math.round(this._readPointer.time)<15||a){Y=an.getChunkSEPos($,Lo,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);var Z=No(W[this._readAudioPointer.segmentIndex].sourceID,$.vid,"a"+this._readAudioPointer.segmentIndex);if(z=Ln.getSegment(Z),Y&&z){var X=Y.ePos-this._readAudioPointer.chunkPos;n&&!r||z.hasData(this._readAudioPointer.chunkPos,X)&&(H=X)}z&&H>0&&(V=z.getData(this._readAudioPointer.chunkPos,H))}if(G=hs(W,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex),this.videoFormatType===on.a.DASH&&G--,V&&(K+="~~~~~read audio data ok, bid = "+this._readAudioPointer.bid+" index = "+G+" startPos = "+this._readAudioPointer.chunkPos+" endPos = "+(this._readAudioPointer.chunkPos+H),this._readAudioPointer.chunkPos+=V.length,this._readAudioPointer.dataFlag=!0,is=!1),V&&Y&&this._readAudioPointer.chunkPos>=Y.ePos&&(Q=!0,is=!0),Q){var J=W[this._readAudioPointer.segmentIndex].seekable.pos.length-1;if(this._readAudioPointer.segmentIndex<=W.length-1&&this._readAudioPointer.chunkIndex<J&&(this._readAudioPointer.chunkIndex++,this._readAudioPointer.chunkIndex>=J))if(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),Jt.a.info("read  call changeSegmentState set 1, a"+this._readAudioPointer.segmentIndex),this._readAudioPointer.segmentIndex<W.length-1){this._readAudioPointer.segmentIndex++,this._readAudioPointer.chunkPos=0,this._readAudioPointer.chunkIndex=0;var ee=an.getChunkSEPos($,Lo,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);ee&&(this._readAudioPointer.chunkPos=ee.sPos)}else Jt.a.info("~~~~~read audio data finish ~~"+this._readAudioPointer.segmentIndex+" chunkIndex "+(this._readAudioPointer.chunkIndex-1));var te=W[this._readAudioPointer.segmentIndex].seekable.time[this._readAudioPointer.chunkIndex];this._readAudioPointer.time=qt.a.accAdd(W[this._readAudioPointer.segmentIndex].start_second,te),K+=" ,audio_time = "+this._readAudioPointer.time}}return Dt.a.lastReadSegIndex=l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,Dt.a.lastReadTvID=O?O.tvid:"",this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?O||z?(""!==I&&Jt.a.info(I),""!==K&&Jt.a.info(K),{tvid:O?O.tvid:z.tvid,bid:O?O.rate:z.rate,loadDone:this.done,type:this.videoFormatType===on.a.DASH?on.a.DASH:on.a.M4S,video:{chunkEOF:B,data:M,index:N,spos:M?this._readPointer.chunkPos-M.length:this._readPointer.chunkPos},audio:{chunkEOF:Q,data:V,index:G,spos:V?this._readAudioPointer.chunkPos-V.length:this._readAudioPointer.chunkPos}}):{}:this.videoFormatType!==on.a.TS&&this.videoFormatType!==on.a.FTS||!O?{}:(""!==I&&Jt.a.info(I),""!==K&&Jt.a.info(K),{tvid:O.tvid,bid:O.rate,loadDone:this.done,type:on.a.TS,stream:{chunkEOF:B,data:M,index:N,spos:M?this._readPointer.chunkPos-M.length:this._readPointer.chunkPos}})}Jt.a.warn("DashMove.read, readPointer bid with levelInfo is null,bid = "+this._readPointer.bid)}}}else Jt.a.warn("levelMgr is null,wait~~")}},{key:"getPlayBuffer",value:function(){var e=Dt.a.getBufferFunc();return this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len}},{key:"refreshcEndTime",value:function(e,t){if(this.curLoadSegment){var n,r,i,a=null,o=parseInt(this.curLoadSegment.index.slice(1));if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){if(n=e[o].seekable.pos,r=t[this._loadAudioPointer.segmentIndex].seekable.pos,i=e[o].seekable.time,a=t[this._loadAudioPointer.segmentIndex].seekable.time,this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH&&0!==o){var s=qt.a.searchPosIndex(this.curLoadSegment.lastCEPos,n);s>=0&&(this._loadPointer.cEndTime=qt.a.accAdd(e[o].start_second,i[s]),this.reportData(this.curLoadSegment.rate,s))}if(this.curLoadAudioSegment&&(this.videoFormatType!==on.a.DASH||"a0"!==this.curLoadAudioSegment.index)){var c=qt.a.searchPosIndex(this.curLoadAudioSegment.lastCEPos,r);c>=0&&(this._loadAudioPointer.cEndTime=qt.a.accAdd(t[this._loadAudioPointer.segmentIndex].start_second,a[c]))}}else if(this.videoFormatType.indexOf(on.a.TS)>=0)if(n=e[o].pos,i=e[o].time,this.videoFormatType===on.a.TS){var u=qt.a.searchTSPosIndex(this.curLoadSegment.lastCEPos,n);u>=0&&(this._loadPointer.cEndTime=qt.a.accAdd(e[o].start_second,i[u]),this.reportData(this.curLoadSegment.rate,u))}else this.videoFormatType===on.a.FTS&&this.curLoadSegment.loadDone&&(this._loadPointer.cEndTime=qt.a.accAdd(e[this._loadPointer.segmentIndex].start_second,i[this._loadPointer.chunkIndex+1]))}}},{key:"check",value:function(e){null===this._loadPointer&&(Jt.a.info("check load, loadPointer is null,call seek~~~"),this.seek(this.rangeSTime,!0));var t=this.levelID,n=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID;-1===this._levelID&&(n===t||!Jo&&-1===ns.levelID&&Dt.a.startPlayed()&&this._readPointer.dataFlag&&(!this._readAudioPointer||this._readAudioPointer.dataFlag)||(t=this.curLoadSegment.rate)),Wo=!1,es=!1,(-1!==this._levelID||this.absTocbs)&&(this.videoFormatType!==on.a.DASH&&this.videoFormatType!==on.a.M4S||this._loadAudioPointer||(this._loadAudioPointer=new Zo,this._readAudioPointer=new $o,this._loadAudioPointer.levelID=this._loadPointer.levelID,this._loadAudioPointer.cEndTime=this._readPointer.time,this._readAudioPointer.bid=this._readPointer.bid,this._readAudioPointer.time=this._readPointer.time),this.videoFormatType.indexOf(on.a.TS)>=0&&this._loadAudioPointer&&(this._loadAudioPointer=null,this._readAudioPointer=null),(n!==t||this.absTocbs)&&(Jt.a.info("load switch video bidrate changed from "+n+" to "+t),e=this.getPlayBuffer(),Co.reset()),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||this._loadAudioPointer.levelID===t&&!this.absTocbs||(Jt.a.info("load switch  audio bidrate changed from "+this._loadAudioPointer.levelID+" to "+t+",buffer "+e),Mo.reset())),-1===this._levelID&&Dt.a.authorFailedStatus===qa.a.LoaderState_405&&(t=n);var r=this.levelMgr.get(t);if(null!==r){var i=null,a=null;if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(i=an.getFilesInfo(r,Ro),a=an.getFilesInfo(r,Lo)):this.videoFormatType.indexOf(on.a.TS)>=0&&(i=r.m3u8),!Jo)if(t===n)this.refreshcEndTime(i,a);else if(-1===this._levelID){var o=this.getFileList(n);this.refreshcEndTime(o.vFList,o.aFList)}if(n!==t||this.absTocbs?(this.videoDone=!1,this.audioDone=!1):this.checkVideoLoadDone(r,i),Ln.memorySize<Et.b.videoMaxSize&&this.checkP2PLoad(r,i,t,n),n=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID,!this._loadPointer.init||this._loadAudioPointer&&this._loadAudioPointer.levelID===n&&!this._loadAudioPointer.init){if(e>=Et.h.cacheMaxLen)return void(Jo&&(Jo=!1));e<0&&(e=0)}var s=!1,c=!1;if(-1===this._levelID&&(n!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t)&&(n!==t&&(this._loadPointer.cEndTime>this._readPointer.time||zo)&&(s=!0),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||this._loadAudioPointer.levelID===t||(this._loadAudioPointer.cEndTime>this._readAudioPointer.time||is)&&(c=!0),s&&(Jt.a.info("ABS ,video can switch bid"),Co.reset(),this.updateCEPos(Ro,n,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType===on.a.DASH&&(this._loadPointer.init=!0)),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||!c||(Jt.a.info("ABS ,audio can switch bid"),Mo.reset(),this.updateCEPos(Lo,this._loadAudioPointer.levelID,Math.max(this._loadAudioPointer.cEndTime,this._readAudioPointer.time)),this.videoFormatType===on.a.DASH&&(this._loadAudioPointer.init=!0))),this._loadPointer.levelID!==n&&Co.reset(),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||this._loadAudioPointer.levelID===n||Mo.reset(),this.checkCDNLoad(),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||this._loadAudioPointer.levelID!==t||this.checkAudioLoadDone(r),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||(this._loadPointer.levelID===t&&Wo&&this._loadPointer.cEndTime>this._loadAudioPointer.cEndTime&&Math.floor(this._loadPointer.cEndTime)-Math.floor(this._loadAudioPointer.cEndTime)>15&&(Wo=!1),this._loadAudioPointer.levelID===t&&es&&this._loadAudioPointer.cEndTime>this._loadPointer.cEndTime&&Math.floor(this._loadAudioPointer.cEndTime)-Math.floor(this._loadPointer.cEndTime)>15&&(es=!1)),this.done&&this.absTocbs&&this._loadPointer.levelID===t&&(Co.reset(),Mo.reset(),Wo=!0,es=!0),Wo||es){var u=Math.min(qt.a.accSub(Et.h.cacheMaxLen,e),Et.h.loadMinLen);if(-1!==this._levelID){if(this.absTocbs||n!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t){Co.reset();var d=0;this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(d=this._readPointer.time,(this.absTocbs||n!==t)&&Jt.a.info("CBS video switch bid, time "+d)):d=Math.max(this.rangeSTime,Dt.a.getBufferFunc().end),(this.absTocbs||n!==t)&&Jt.a.info("CBS switch bidrate , start video loadPoint  time = "+d,"levelID = "+t),this._loadPointer.levelID=t;var l=null;if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?l=an.getGapPos(r,d,Ro,"start"):this.videoFormatType.indexOf(on.a.TS)>=0&&(l=an.getTSGapPos(r,d,"start")),l?(this.changeSegmentState(r,"e",l.segmentIndex,0),this._loadPointer.segmentIndex=l.segmentIndex,this._loadPointer.chunkPos=l.pos,this._loadPointer.startTime=l.time,this._loadPointer.cEndTime=l.time,l.segmentIndex!==this._readPointer.segmentIndex&&this.changeSegmentState(r,"e",this._readPointer.segmentIndex,1),(this.absTocbs||n!==t)&&(this._readPointer.bid=this._loadPointer.levelID,this._readPointer.segmentIndex=l.segmentIndex,this._readPointer.chunkIndex=l.chunkIndex,this._readPointer.time=l.time,this.videoFormatType===on.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=l.pos,Jt.a.info("CBS switch bidrate ,start _readPointer "+JSON.stringify(this._readPointer)))):Jt.a.error("CBS switch bidrate, calculate startPoint is null "),this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){Mo.reset(),this._loadAudioPointer.levelID=this._loadPointer.levelID;var f=this._readAudioPointer.time;Jt.a.info("CBS audio switch bid, time "+f);var h=an.getGapPos(r,f,Lo,"start");Jt.a.info("CBS switch bidrate,start audio Point "+JSON.stringify(h)),h&&(this.changeSegmentState(r,"a",h.segmentIndex,0),this._loadAudioPointer.segmentIndex=h.segmentIndex,this._loadAudioPointer.chunkPos=h.pos,this._loadAudioPointer.startTime=h.time,this._loadAudioPointer.cEndTime=h.time,h.segmentIndex!==this._readAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",this._readAudioPointer.segmentIndex,1),this._readAudioPointer.bid=this._loadPointer.levelID,this._readAudioPointer.segmentIndex=h.segmentIndex,this._readAudioPointer.chunkIndex=h.chunkIndex,this._readAudioPointer.chunkPos=h.pos,this._readAudioPointer.time=h.time,Jt.a.info("CBS switch bidrate, start readAudioPointer "+JSON.stringify(this._readAudioPointer)))}Jo=!0}var p=null;Wo&&!Jo&&(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?p=an.getGapPos(r,this._loadPointer.cEndTime,Ro,"start"):this.videoFormatType!==on.a.TS&&this.videoFormatType!==on.a.FTS||(p=an.getTSGapPos(r,this._loadPointer.cEndTime,"start")),p?(p.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(r,"e",p.segmentIndex,0),this._loadPointer.segmentIndex=p.segmentIndex,this._loadPointer.chunkPos=p.pos,this._loadPointer.levelID=t,this._loadPointer.startTime=p.time):Jt.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime));var _=0;if(this._loadPointer.init||(_=this.calculateVideoLoadTime(u,r,i),Jo&&(_=Math.min(1,_))),Wo)if(this._loadPointer.init)this._loadPointer.segmentIndex=0,this._loadPointer.chunkIndex=0,this._loadPointer.chunkPos=i[0].seekable.pos[0],this._loadPointer.endPos=i[0].seekable.pos[1];else{var v=null,g=qt.a.accAdd(this._loadPointer.startTime,_);this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?v=an.getGapPos(r,g,Ro,"end"):this.videoFormatType.indexOf(on.a.TS)>=0&&(v=an.getTSGapPos(r,g,"end")),v&&(this._loadPointer.endPos=v.pos,this._loadPointer.chunkIndex=v.chunkIndex)}if(Wo){if(this.absTocbs||!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._loadPointer.segmentIndex||this.curLoadSegment.rate!==t||!this.curLoadSegment.segment){var y=this.constructorSegmentInfo(i,r,Ro);this.createSegmentProxy(Ro,y),this.curLoadSegment.checkCreateSegment()}Jt.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos),this._loadPointer.init=!1):Jt.a.error("~~~~~~video Load error"+JSON.stringify(this._loadPointer)),ds=!0,ls=0}else ds&&ls<=15&&(ls++,Jt.a.warn("...... video not start, running: "+Co.running+", done: "+this.videoDone+", hasLoad: "+(this.curLoadSegment&&!0)));var m=null,b=0;if(this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||!es||this._loadAudioPointer.init||(b=this.calculateAudioLoadTime(u,r)),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||!es||Jo||((m=an.getGapPos(r,this._loadAudioPointer.cEndTime,Lo,"start"))?(m.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",m.segmentIndex,0),this._loadAudioPointer.segmentIndex=m.segmentIndex,this._loadAudioPointer.chunkPos=m.pos,this._loadAudioPointer.levelID=t,this._loadAudioPointer.startTime=m.time):Jt.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)),(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&es)if(this._loadAudioPointer.init)this._loadAudioPointer.segmentIndex=0,this._loadAudioPointer.chunkIndex=0,this._loadAudioPointer.chunkPos=a[0].seekable.pos[0],this._loadAudioPointer.endPos=a[0].seekable.pos[1];else{var k=qt.a.accAdd(this._loadAudioPointer.startTime,b),x=an.getGapPos(r,k,Lo,"end");x&&(this._loadAudioPointer.endPos=x.pos,this._loadAudioPointer.chunkIndex=x.chunkIndex)}if((this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&es){if(this.absTocbs||!this.curLoadAudioSegment||this.curLoadAudioSegment.index!=="a"+this._loadAudioPointer.segmentIndex||this.curLoadAudioSegment.rate!==t||!this.curLoadAudioSegment.segment){var T=this.constructorSegmentInfo(a,r,Lo);this.createSegmentProxy(Lo,T),this.curLoadAudioSegment.checkCreateSegment()}Jt.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos),this._loadAudioPointer.init=!1):Jt.a.error("load audio point is error !!!!!!!")}this.absTocbs&&(this.absTocbs=!1)}else{if((s||(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&c)&&Qn.clearRaiseLevelCount(),Wo){ds=!1,ls=0,-1!==this.rangeETime&&this._loadPointer.startTime>=this.rangeETime&&Jt.a.info("loadPointer startTime >= rangeETime,this._loadPointer.startTime = "+this._loadPointer.startTime+"rangeETime"+this.rangeETime);var S=s?t:n,P=this.getFileList(S);if(!P)return void Jt.a.error("levelInfo and fileList is null ,bid = "+S);r=P.levelInfo,i=P.vFList;var w=null;if(Jo||(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?w=an.getGapPos(r,this._loadPointer.cEndTime,Ro,"start"):this.videoFormatType!==on.a.TS&&this.videoFormatType!==on.a.FTS||(w=an.getTSGapPos(r,this._loadPointer.cEndTime,"start")),w?(w.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(r,"e",w.segmentIndex,0),this._loadPointer.segmentIndex=w.segmentIndex,this._loadPointer.chunkPos=w.pos,s?(Jt.a.info("ABS video switch  bid from "+this._loadPointer.levelID+" to "+t),this._loadPointer.levelID=t):this._loadPointer.levelID=n,this._loadPointer.startTime=w.time):Jt.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime)),this._loadPointer.init)this._loadPointer.segmentIndex=0,this._loadPointer.chunkIndex=0,this._loadPointer.chunkPos=i[0].seekable.pos[0],this._loadPointer.endPos=i[0].seekable.pos[1];else{var I=null,A=this.calculateVideoLoadTime(u,r,i);Jo&&(A=Math.min(1,A));var E=qt.a.accAdd(this._loadPointer.startTime,A);this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?I=an.getGapPos(r,E,Ro,"end"):this.videoFormatType.indexOf(on.a.TS)>=0&&(I=an.getTSGapPos(r,E,"end")),I&&(this._loadPointer.endPos=I.pos,this._loadPointer.chunkIndex=I.chunkIndex)}if(s?(ns.levelID=this._loadPointer.levelID,ns.segmentIndex=w.segmentIndex,ns.chunkIndex=w.chunkIndex,ns.time=this._loadPointer.startTime,ns.tvid=this.tvid,cs=[],Jt.a.info("load ABS switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)+" switchVideoPointer "+JSON.stringify(ns))):Jt.a.info("load ABS NO switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)),!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._loadPointer.segmentIndex||this.curLoadSegment.rate!==this._loadPointer.levelID||!this.curLoadSegment.segment){var D=this.constructorSegmentInfo(i,r,Ro);this.createSegmentProxy(Ro,D),this.curLoadSegment.checkCreateSegment()}Jt.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos),this._loadPointer.init=!1):Jt.a.error("_loadPointer.endPos <= _loadPointer.chunkPos")}if((this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&es){var q=c?t:this._loadAudioPointer.levelID,O=this.getFileList(q);O&&(r=O.levelInfo,a=O.aFList);var R=this.calculateAudioLoadTime(u,r),L=null;if(!Jo){var C=this._loadAudioPointer.cEndTime;c&&(C=Math.min(this._loadAudioPointer.cEndTime,this._loadPointer.cEndTime),C=Math.max(C,this._readAudioPointer.time)),(L=an.getGapPos(r,C,Lo,"start"))?(L.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",L.segmentIndex,0),this._loadAudioPointer.segmentIndex=L.segmentIndex,this._loadAudioPointer.chunkPos=L.pos,c&&(this._loadAudioPointer.levelID=t),this._loadAudioPointer.cEndTime=this._loadAudioPointer.startTime=L.time):Jt.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)}if(this._loadAudioPointer.init)this._loadAudioPointer.segmentIndex=0,this._loadAudioPointer.chunkIndex=0,this._loadAudioPointer.chunkPos=a[0].seekable.pos[0],this._loadAudioPointer.endPos=a[0].seekable.pos[1];else{var M=qt.a.accAdd(this._loadAudioPointer.startTime,R),N=an.getGapPos(r,M,Lo,"end");N&&(this._loadAudioPointer.endPos=N.pos,this._loadAudioPointer.chunkIndex=N.chunkIndex)}if(c?(Jt.a.info("ABS Audio switch  bid from "+this.curLoadAudioSegment.rate+" to "+t),rs.levelID=this._loadAudioPointer.levelID,rs.segmentIndex=L.segmentIndex,rs.chunkIndex=Jo?this._loadAudioPointer.chunkIndex:L.chunkIndex,rs.time=this._loadAudioPointer.startTime,rs.tvid=this.tvid,Jt.a.info("load ,ABS Audio switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)+" switchAudioPointer "+JSON.stringify(rs))):Jt.a.info("ABS Audio No switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)),!this.curLoadAudioSegment||this.curLoadAudioSegment.index!=="a"+this._loadAudioPointer.segmentIndex||this.curLoadAudioSegment.rate!==this._loadAudioPointer.levelID||!this.curLoadAudioSegment.segment){var B=this.constructorSegmentInfo(a,r,Lo);this.createSegmentProxy(Lo,B),this.curLoadAudioSegment.checkCreateSegment()}Jt.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos),this._loadAudioPointer.init=!1):Jt.a.error("_loadAudioPointer.endPos <= _loadAudioPointer.chunkPos")}}Jo=!1}else Jo&&(Jo=!1)}else Jt.a.warn("m3u8 is null,need call feed first ~~ ,bidrate = "+t)}},{key:"buffer",get:function(){var e=0;return this._readPointer&&this._loadPointer&&this._loadPointer.cEndTime>=this._readPointer.time&&(e=qt.a.accSub(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||this._readAudioPointer&&this._loadAudioPointer&&this._loadAudioPointer.cEndTime>=this._readAudioPointer.time&&(e=Math.min(qt.a.accSub(this._loadAudioPointer.cEndTime,this._readAudioPointer.time),e)),e}},{key:"reset",value:function(){if(Jt.a.info("~~~dashMove reset ~~~"),this.videoDone=!1,this.audioDone=!1,this.levelMgr)for(var e in this.levelMgr){var t=this.levelMgr.get(e),n=null;if(t&&(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?n=an.getFilesInfo(t,Ro):this.videoFormatType.indexOf(on.a.TS)>=0&&(n=t.m3u8)),n)for(var r=0;r<n.length;r++)this.changeSegmentState(t,"e",r,1);if((this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH)&&t){var i=an.getFilesInfo(t,Lo);if(i)for(var a=0;a<i.length;a++)this.changeSegmentState(t,"a",a,1)}}null!==this.dashInfo&&(Ra.a.clearEvent(this.tvid),this.event=null,this.dashInfo.close(),this.dashInfo=null),null!==this._absStrategy&&this._absStrategy.close(),this._absStrategy=null,null!==this._readPointer&&(this._readPointer=null),null!==this._readAudioPointer&&(this._readAudioPointer=null),null!==this._loadPointer&&(this._loadPointer=null),null!==this._loadAudioPointer&&(this._loadAudioPointer=null),null!==this._p2pLoaderPointer&&(this._p2pLoaderPointer=null),null!==this.levelMgr&&this.levelMgr.clear(),this.levelMgr=null,this.curLoadAudioSegment&&(this.curLoadAudioSegment=null),this.curLoadSegment=null,this._levelID=0,this.absTocbs=!1,this.curFeedBid=0,clearTimeout(this.buffTimer)}},{key:"errFun",value:function(e){Jt.a.error("new segment return err"+e)}},{key:"createSegmentProxy",value:function(e,t){switch(t.videoType){case on.a.FTS:this.curLoadSegment=new Vo(t);break;case on.a.TS:this.curLoadSegment=new Uo(t);break;case on.a.DASH:case on.a.M4S:e===Ro?this.curLoadSegment=new Ko(t):this.curLoadAudioSegment=new Ko(t);break;default:Jt.a.error("mediaInfo.videoType is invaild when  createSegmentProxy, "+t.videoType)}}},{key:"constructorSegmentInfo",value:function(e,t,n){var r,i=null,a=Ro;n===Ro?(r=this._loadPointer,i="e"):n===Lo?(r=this._loadAudioPointer,i="a",a=Lo):"p2p"===n&&(r=this._p2pLoaderPointer,i="e");var o=r.chunkPos,s=r.startTime;-1===this._levelID&&(o,Go=Date.now()),null===e[r.segmentIndex].file_name&&Dt.a.enableStartSpeed&&(e[r.segmentIndex].file_name=e[r.segmentIndex].quoteSegment.uri.toString());var c=e[r.segmentIndex].file_name,u=e[r.segmentIndex].realIdx!==undefined?e[r.segmentIndex].realIdx:r.segmentIndex,d=0,l=0;if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH){d=e[r.segmentIndex].size;var f=e[r.segmentIndex].seekable.pos;l=f[f.length-1]}else if(this.videoFormatType.indexOf(on.a.TS)>=0){d=parseInt(e[r.segmentIndex].size);var h=e[r.segmentIndex].pos;l=h[h.length-1].ePos}var p=e[r.segmentIndex].sourceID;Vt.isHTTPS&&c&&(c=c.replace(/^http:/gi,"https:"));var _=0;_=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getDuratioSecond(t,a,r.segmentIndex):an.getTSDuratioSecond(t,r.segmentIndex);var v=null;return this.videoFormatType!==on.a.DASH&&this.videoFormatType!==on.a.M4S||"e"!==i||(v=e[r.segmentIndex].seekable.pos),{levelId:r.levelID,tvid:this.tvid,dispatchUrl:c,startTime:s,endTime:_,vid:t.vid,index:i+r.segmentIndex,size:d,startPos:o,endPos:l,vids:this.dashInfo.vidList,videoType:this.videoFormatType,albumID:Dt.a.aid,trackerType:a,sourceID:p,loadInfo:{},seekable:v,realSegIdx:i+u}}},{key:"changeSegmentState",value:function(e,t,n,r){if(e){var i="a"===t?Lo:Ro,a=null;if(!(n>=(a=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getFilesInfo(e,i):e.m3u8).length)){var o=No(a[n].sourceID,e.vid,t+(a[n].realIdx!==undefined?a[n].realIdx:n)),s=Ln.getSegment(o);s&&(s.state=r,Jt.a.info("changeSegmentState "+t+n+" bid: "+e.bid+" status : "+s.state))}}}},{key:"getSizeList",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=this.levelMgr.get(e[n]);if(r===undefined)break;var i=null;(i=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getNextChunkInfo(r,Ro,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex):an.getTSNextChunkInfo(r,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex))?t.push(i.ePos-i.sPos):t.push(0)}return t}},{key:"reportData",value:function(e,t){if(this.curLoadSegment&&this._absStrategy&&Dt.a.absOpen&&-1===this._levelID&&!(t===Yo&&Date.now()-Go<3e4||Date.now()-os>=15e3)){Go=Date.now(),Yo=t;var n=Dt.a.cdnSize,r=Dt.a.cdnCostTime;Dt.a.cdnSize=Dt.a.cdnCostTime=0;var i=null,a=null,o=0,s=parseInt(this.curLoadSegment.index.slice(1)),c=this.levelMgr.get(e);c!==undefined&&(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(i=an.getFilesInfo(c,Ro),a=an.getCurChunkInfo(c,Ro,s,t)):(i=c.m3u8,a=an.getCurTSChunkInfo(c,s,t))),a&&(o=a.ePos-a.sPos);var u=0;if(!(i&&(u=hs(i,s,t))>=c.chunkNum-1)){for(var d=[],l=[],f=0;f<this.dashInfo.bitRateList.length;f++){var h=this.levelMgr.get(this.dashInfo.bitRateList[f]);h&&(d.push(this.dashInfo.bitRateList[f]),l.push(h.vsize))}for(var p=this.getBuffer(),_=us,v=[],g=Math.min(16,cs.length);v.length<g;)v.push(Math.floor(1e3*cs[_++%g]).toString());var y=Dt.a.getReBufTimeFunc(),m=this.getSizeList(d);if(0!==m.length){var b={index:u,loadTime:r,rebuffTime:y,totalSizeList:l,bidList:d,chunkSizeList:m,chunk_count:c.chunkNum,lastChunkSize:o,duration:c.duration,buffer_level:p,size:c.vsize,loadSize:n,bid:e,bufferArr:v,bufferUpdateStep:ss};this._absStrategy.reportData(b)}}}}},{key:"checkCDNLoad",value:function(){Co.running||this.curLoadSegment&&this.curLoadSegment.isOnP2P||this.videoDone||(Wo=!0),this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH||Mo.running||this.audioDone||(es=!0)}},{key:"getBuffer",value:function(){var e=this.getPlayBuffer();return e=qt.a.accAdd(e,this.buffer),-1===this._levelID&&(clearTimeout(this.buffTimer),this.buffTimer=setTimeout(this.getBuffer.bind(this),ss),cs.length<16?cs.push(e):cs[us++%16]=e),e}},{key:"checkAudioLoadDone",value:function(e){if(!(this.audioDone||Jo||this.videoFormatType!==on.a.M4S&&this.videoFormatType!==on.a.DASH))if(this.rangeETime>0&&this._loadAudioPointer.cEndTime>=this.rangeETime)this.audioDone=!0,es=!1;else{var t=an.getFilesInfo(e,Lo);if(e){var n=t.length-1,r=t[n].size;this._loadAudioPointer.segmentIndex>=n&&this.curLoadAudioSegment&&this.curLoadAudioSegment.lastCEPos>=r?(this.audioDone=!0,es=!1):this.audioDone=!1}}}},{key:"checkVideoLoadDone",value:function(e,t){if(!this.videoDone&&!Jo&&e)if(this.rangeETime>0&&this._loadPointer.cEndTime>=this.rangeETime)this.videoDone=!0,Wo=!1,Jt.a.info("cEndTime >= rangeTime or duration,videoDone!!!!, cEndTime "+this._loadPointer.cEndTime+",duration "+e.duration+",rangeEndTime "+this.rangeETime);else{var n=t.length-1,r=t[n].size;this.curLoadSegment&&parseInt(this.curLoadSegment.index.slice(1))>=n&&this.curLoadSegment.lastCEPos>=r?(this.videoDone=!0,Wo=!1,Jt.a.info("segmentIndex and  chunkIndex is Max,videoDone!!!! ")):this.videoDone=!1}}},{key:"checkP2PLoad",value:function(e,t,n,r){if(this.videoFormatType!==on.a.FTS&&"off"!==Et.g.limitP2P&&Vt.canP2P&&Et.h.openP2P&&!this.videoDone){this._p2pLoaderPointer||(this._p2pLoaderPointer=new Zo,this._p2pLoaderPointer.levelID=n);var i=!1;if((Jo||!this.curLoadSegment||"e"+this._p2pLoaderPointer.segmentIndex!==this.curLoadSegment.index||this._p2pLoaderPointer.levelID!==n||this._p2pLoaderPointer.levelID!==r||this.absTocbs||this.curLoadSegment.done)&&(i=!0),i&&this.videoFormatType===on.a.DASH&&this.curLoadSegment&&"e0"===this.curLoadSegment.index&&(i=!1),i){var a=this._loadPointer.cEndTime,o=!1,s=!1;if(-1!==this._levelID)(this._p2pLoaderPointer.levelID!==n||this.absTocbs)&&(Jt.a.info("[P2P loader],CBS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+n),this._p2pLoaderPointer.levelID=n,this.videoFormatType===on.a.DASH&&(this._loadPointer.init=!0),this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(a=this._readPointer.time,Jt.a.info("CBS video switch bid, time "+a)):a=Math.max(this.rangeSTime,Dt.a.getBufferFunc().end),s=!0,Co.reset());else if(-1===this._levelID)if(r!==n)if((this._loadPointer.cEndTime>this._readPointer.time||zo)&&(o=!0),o)Co.reset(),this.updateCEPos(Ro,r,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),Jt.a.info("[P2P loader],ABS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+n),this._p2pLoaderPointer.levelID=n,this.videoFormatType===on.a.DASH&&(this._loadPointer.init=!0),Qn.clearRaiseLevelCount();else{if(!Jo&&this.curLoadSegment&&!this.curLoadSegment.done)return;this._p2pLoaderPointer.levelID=r;var c=this.getFileList(this._p2pLoaderPointer.levelID);c&&(e=c.levelInfo,t=c.vFList)}else this._p2pLoaderPointer.levelID!==n&&(this._p2pLoaderPointer.levelID=n);if(!this.videoDone){var u=null;if(!(u=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getGapPos(e,a,Ro,"start"):an.getTSGapPos(e,a,"start")))return void Jt.a.error("[P2P loader], find start Point is null,time "+a+",bid "+n);var d=null;d=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?t[u.segmentIndex].seekable:t[u.segmentIndex];var l=0;if(this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(l=d.pos.length-2,this._p2pLoaderPointer.endPos=d.pos[l+1]):(l=d.pos.length-1,this._p2pLoaderPointer.endPos=d.pos[l].ePos),this._p2pLoaderPointer.chunkIndex=l,this._p2pLoaderPointer.segmentIndex=u.segmentIndex,this._p2pLoaderPointer.startTime=u.time,this._p2pLoaderPointer.chunkPos=u.pos,s&&(this._readPointer.bid=this._p2pLoaderPointer.levelID,this._readPointer.segmentIndex=this._p2pLoaderPointer.segmentIndex,this._readPointer.chunkIndex=u.chunkIndex,this._readPointer.time=this._p2pLoaderPointer.startTime,this.videoFormatType===on.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=u.pos,this._loadPointer.cEndTime=u.time,Jt.a.info("[P2P load] , p2p switch  bid , readPointer"+JSON.stringify(this._readPointer)+", cEndTime "+this._loadPointer.cEndTime)),o&&(ns.levelID=this._p2pLoaderPointer.levelID,ns.segmentIndex=this._p2pLoaderPointer.segmentIndex,ns.chunkIndex=u.chunkIndex,ns.time=this._p2pLoaderPointer.startTime,ns.tvid=this.tvid,this._loadPointer.cEndTime=u.time,Jt.a.info("[P2P loader],ABS switch  bid , switchVideoPointer "+JSON.stringify(ns))),this.absTocbs||!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._p2pLoaderPointer.segmentIndex||this.curLoadSegment.rate!==this._p2pLoaderPointer.levelID||!this.curLoadSegment.segment){var f=this.constructorSegmentInfo(t,e,"p2p");this.createSegmentProxy(Ro,f),this.curLoadSegment.checkCreateSegment()}this.absTocbs&&this.videoFormatType===on.a.TS&&(this.absTocbs=!1),Jt.a.info("[P2P load] , ~~~~~~video Load point"+JSON.stringify(this._p2pLoaderPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this.curLoadSegment.p2pLoadSegment()}}}}},{key:"hasInitData",value:function(e,t){var n=this.getFileList(e);if(t===Ro){var r=No(n.vFList[0].sourceID,n.levelInfo.vid,"e0"),i=an.getChunkSEPos(n.levelInfo,Ro,0,0),a=Ln.getSegment(r);if(i&&a&&a.hasData(i.sPos,i.ePos-i.sPos))return!0}else if(t===Lo){var o=No(n.aFList[0].sourceID,n.levelInfo.vid,"a0"),s=an.getChunkSEPos(n.levelInfo,Lo,0,0),c=Ln.getSegment(o);if(s&&c&&c.hasData(s.sPos,s.ePos-s.sPos))return!0}return!1}},{key:"clearLoadPint",value:function(){this._loadPointer=null}},{key:"algorithmDes",get:function(){return-1===this._levelID&&this._absStrategy?this._absStrategy.algorithmDes:"absClose"}},{key:"bandwidth",get:function(){return Co&&Co.running?1e3*Dt.a.cdnSpeed:Dt.a.downSpeed}},{key:"updateAuthorPointer",value:function(){Dt.a.dashUpdateVideoTime=this._loadPointer.startTime,Jt.a.info("Authentication failed, update dash ,notice pcw time "+Dt.a.dashUpdateVideoTime)}},{key:"calculateVideoLoadTime",value:function(e,t,n){var r=0;r=this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?an.getDuratioSecond(t,Ro,this._loadPointer.segmentIndex):an.getTSDuratioSecond(t,this._loadPointer.segmentIndex);var i=qt.a.accSub(r,this._loadPointer.cEndTime);i<=0&&this._loadPointer.segmentIndex<n.length-1&&(i=1);var a=Math.min(e,i);return-1!==this.rangeETime&&this._loadPointer.cEndTime+a>=this.rangeETime&&(a=qt.a.accSub(this.rangeETime,this._loadPointer.cEndTime),Jt.a.warn("fix loadDuration ~~~,loadPointerTime = "+this._loadPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),this.videoFormatType===on.a.FTS&&(a=1),a}},{key:"calculateAudioLoadTime",value:function(e,t){var n=an.getDuratioSecond(t,Lo,this._loadAudioPointer.segmentIndex),r=qt.a.accSub(n,this._loadAudioPointer.cEndTime),i=Math.max(1,Math.min(e,r));return-1!==this.rangeETime&&this._loadAudioPointer.cEndTime+i>=this.rangeETime&&(i=qt.a.accSub(this.rangeETime,this._loadAudioPointer.cEndTime),Jt.a.info("fix audioLoadDuration ~~~_loadAudioPointer = "+this._loadAudioPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),i}},{key:"updateCEPos",value:function(e,t,n){var r=this.levelMgr.get(t);if(r){var i=null;this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?i=an.getGapPos(r,n,e,"start"):this.videoFormatType.indexOf(on.a.TS)>=0&&(i=an.getTSGapPos(r,n,"start")),i&&(e===Ro&&this.curLoadSegment&&this.curLoadSegment.cePos>i.pos&&(Jt.a.info("updateCEPos,LevelID  "+t+" before "+this.curLoadSegment.lastCEPos+" now "+i.pos+" point "+JSON.stringify(i)),this.curLoadSegment.updateCePos(i.pos)),e===Lo&&this.curLoadAudioSegment&&this.curLoadAudioSegment.cePos>i.pos&&this.curLoadAudioSegment.updateCePos(i.pos))}}},{key:"getFileList",value:function(e){var t=this.levelMgr.get(e);if(t){var n=null,r=null;return this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?(n=an.getFilesInfo(t,Ro),r=an.getFilesInfo(t,Lo)):this.videoFormatType.indexOf(on.a.TS)>=0&&(n=t.m3u8),{vFList:n,aFList:r,levelInfo:t}}return null}},{key:"checkData",value:function(e,t,n,r){var i=this.levelMgr.get(e),a=null;this.videoFormatType===on.a.DASH&&t++,this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?a=an.getFilesInfo(i,Ro):this.videoFormatType.indexOf(on.a.TS)>=0&&(a=i.m3u8);var o=null,s=null;this.videoFormatType===on.a.DASH&&(s=qt.a.searchPosIndex(n,a[t].seekable.pos))>=0&&(o=an.getChunkSEPos(i,Ro,t,s))&&Jt.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", index "+s+", startPos "+o.sPos+",endPos "+o.ePos);var c=No(a[t].sourceID,i.vid,"e"+(a[t].realIdx!==undefined?a[t].realIdx:t)),u=Ln.getSegment(c);if(u){var d=Math.min(188,r-n),l=u.getData(n,d);if(Jt.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+n+",endPos "+(n+d)),Jt.a.log(l),o){var f=o.ePos-188,h=u.getData(f,188);Jt.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+f+",endPos "+o.ePos),Jt.a.log(h)}}Ln.destroy()}},{key:"Log",get:function(){var e=this.curLoadSegment?this.curLoadSegment.rate.toString():"null",t="┏┯┯┯┯┯┯┯┯┯┯┯┯┯┯┯┯P2PLog -- "+Et.i.version+"--LevelID--"+e+"┯┯┯┯┯┯┯┯┯┯┯┯┓\r\n";t+=" [ cdnSpeed : "+qt.a.trimNumber(Dt.a.cdnSpeed,1e5)+"K , cdnSize : "+qt.a.trimNumber(kr.cdnSize/1048576)+"M , loading : "+Co.running+" ] \r\n [ p2pSpeed : "+qt.a.trimNumber(Dt.a.downSpeed/1024,1e5)+"K , p2pSize : "+qt.a.trimNumber(kr.p2pSize/1048576)+"M , p2pLoadRate : "+(kr.p2pSize/(kr.cdnSize+kr.p2pSize)*100).toFixed(2)+"% ] \r\n [ upSpeed  : "+qt.a.trimNumber(Dt.a.upSpeed/1024,1e5)+"K , upSize  : "+qt.a.trimNumber(kr.upSize/1048576)+"M ] \r\n < downMax : "+Math.ceil(Dt.a.downMax/1024)+"K ,  upMax : "+Math.ceil(Dt.a.upMax/1024)+"K >\r\n";var n=this.levelMgr.get(this._readPointer.bid),r=null;this.videoFormatType===on.a.M4S||this.videoFormatType===on.a.DASH?r=an.getFilesInfo(n,Ro):this.videoFormatType.indexOf(on.a.TS)>=0&&(r=n.m3u8);var i=No(r[this._readPointer.segmentIndex].sourceID,n.vid,"e"+(r[this._readPointer.segmentIndex].realIdx!==undefined?r[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)),a=Ln.getSegment(i);return a&&(t+=" RD | "+a.toDataString(this._readPointer.chunkPos)+"\r\n"),this.curLoadSegment.segment&&(t+=" LD | "+this.curLoadSegment.segment.toDataString(-1)+"\r\n",t+=(this.curLoadSegment.segment.vidsDesc!==undefined?this.curLoadSegment.segment.vidsDesc:" [ ]")+"\r\n"),t+=Dt.a.p2pLog,t+="┗┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┷┛\r\n"}},{key:"clearData",value:function(e){Ln.destroy()}}]),e}();function hs(e,t,n){for(var r=0,i=0;i<=t;i++)i<t?e[i].hasOwnProperty("seekable")?r+=e[i].seekable.pos.length-1:r+=e[i].pos.length:r+=n;return r}var ps=function Fg(){a()(this,Fg),this.f4vloader=new XMLHttpRequest,this.f4vloader.responseType="json",this.f4vloader.onloadend=function(e){var t=e.currentTarget,n=t.status;if(n>=200&&n<300){var r=t.response;r.t&&r.z&&(Dt.a.setUserInfo(r.t+"|"+r.z),Xt.checkConfig())}};try{this.f4vloader.open("GET",(Vt.isHTTPS?"https":"http")+"://data.video.iqiyi.com/v.f4v?random="+Date.now(),!0),this.f4vloader.send()}catch(e){console.log(e)}},_s=!1,vs=0,gs=0,ys=0,ms=0,bs=0,ks=0,xs=!1;function Ts(){var e=ks;return ks=0,e}var Ss=function(){function e(){a()(this,e),!qt.a.getCookie("QP0022")&&Dt.a.enableStartSpeed&&new ps,Xt.load(),this.currentList=new fs,this.nextList=new fs,this.nextListFeedDone=!1,xs=!1,fa.init()}return s()(e,[{key:"init",value:function(e){Dt.a.platform=e.platform?e.platform:er,Dt.a.platform===nr||Dt.a.platform===rr?Ja.checkPipeIps(Ja.OverSea):Ja.checkPipeIps(Ja.CN),Jt.a.logTarget=e.logger,Dt.a.getBufferFunc=e.getBufferFunc,Dt.a.getReBufTimeFunc=Ts,Dt.a.switchAutoDef=e.switchAutoDef,Dt.a.canSwitchVd=e.canSwitchVd,Dt.a.startPlayed=e.startPlayed,Dt.a.sendPingBack=e.sendPingBack,Dt.a.getUserInfoFunc=e.getUserInfo,Dt.a.noticeDataArrived=e.noticeDataArrived,Dt.a.checkIsMobius=e.checkIsMobius,Dt.a.noticeRefreshMovieData=e.noticeRefreshMovieData,_a&&clearTimeout(_a),_a=setTimeout(ka,1e3*Et.k),pa=!0}},{key:"notifyP2P",value:function(e,t){switch(e){case"p2pInit":gs=performance.now(),this.checkInit();break;case"playing":if(xs=!1,-1===vs&&_s&&gs>0&&(_s=!1,Sa.diy_start++,Sa.diy_starttime+=performance.now()-gs,ka(),gs=-1),0!==ys){Sa.diy_rebufercnt++,ks+=performance.now()-ys,Sa.diy_lagtime+=performance.now()-ys,ys=0;var n=this._getBuffLen();Dt.a.avgBufferCnt<=0&&(Dt.a.avgBuffer+=n,Dt.a.avgBufferCnt++),ka()}break;case"waiting":if(!xs){ys=performance.now(),Sa.diy_lagcnt++;var r=this._getBuffLen();Dt.a.avgBufferCnt<=0&&(Dt.a.avgBuffer+=r,Dt.a.avgBufferCnt++),ka()}break;case"error":Sa.diy_finalerr=encodeURIComponent(t),ka(!0)}}},{key:"checkInit",value:function(){gs>0&&vs>0&&!_s&&(_s=!0,vs=-1,Sa.diy_init++,ka())}},{key:"feed",value:function(e,t,n,r){n?(_s=!1,vs=performance.now(),this.checkInit(),Jt.a.info("DataProvider.feed current"),this.currentList.feed(e,t,r),this.nextListFeedDone&&this.nextList.clearLoadPint()):(Jt.a.info("DataProvider.feed next"),this.nextList.reset(),this.nextList.feed(e,t,r),this.nextListFeedDone=!0),Dt.a.authorStatus!==qa.a.LoaderState_405&&(Dt.a.authorStatus="")}},{key:"setBitrate",value:function(e,t){this.currentList.tvid===e?(Jt.a.info("DataProvider set current bitrate : "+t),-1!==this.currentList._levelID&&-1===t?(Jt.a.info(" CBS  to ABS !!!!!!!!!!"),this.currentList.cbsToAbs=!0):this.currentList.cbsToAbs=!1,-1===this.currentList._levelID&&-1!==t?(Jt.a.info(" ABS  to CBS!!!!!!!!!!"),this.currentList.absTocbs=!0):this.currentList.absTocbs=!1,this.currentList.levelID=t,this.currentList.checkBitRate(t),this.currentList.resetDoneStatus(),Dt.a.absStatus=-1===t?1:0):(Jt.a.info("DataProvider set next move bitrate : "+t),this.nextList.levelID=t,this.nextList.checkBitRate(t),this._run())}},{key:"_run",value:function(){clearTimeout(this._runnerStep);try{if(Dt.a.authorStatus!==qa.a.LoaderState_405&&!en.errorFragment){var e=Dt.a.getBufferFunc(),t=0;t=+(t=this.currentList.videoFormatType===on.a.M4S||this.currentList.videoFormatType===on.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len).toFixed(3),Dt.a.pcwBuffer=t,t=qt.a.accAdd(t,this.currentList.buffer),++bs>=50&&(Dt.a.avgBuffer+=t,Dt.a.avgBufferCnt++,bs=0),this.currentList.done?this.nextListFeedDone&&(t+=this.nextList.buffer,this.nextList.check(t)):this.currentList.check(t)}Dt.a.onLog&&++ms>=10&&(console.info(this.currentList.Log),ms=0)}catch(n){Jt.a.error("error catch: "+n)}this._runnerStep=setTimeout(this._run.bind(this),100)}},{key:"seek",value:function(e,t){if(xs=!0,en.errorFragment=null,en.errorStage="",en.loader.count=0,en.dispatcher.count=0,t=t?+t.toFixed(3):t,this.currentList.tvid===e)Jt.a.info("DataProvider.seek currentList tvid = "+e+" time = "+t),this.nextListFeedDone&&this.nextList.clearLoadPint(),this.currentList.seek(t),this._run();else if(this.nextList.tvid===e){_s=!1,vs=performance.now(),this.checkInit(),Jt.a.info("DataProvider.seek nextList tvid = "+e+" time ="+t),this.currentList.reset();var n=this.currentList;this.currentList=this.nextList,this.nextList=n,this.nextListFeedDone=!1,t&&t!==this.currentList.rangeSTime||!this.currentList._readPointer?(this.currentList.seek(t),this._run()):Jt.a.warn("DataProvider.seek warn, seek.time: "+t+", rangeSTime: "+this.currentList.rangeSTime)}kr.start()}},{key:"read",value:function(e){return this.currentList.read(e)}},{key:"setDefList",value:function(e,t){!t||t.length<0||(this.currentList.tvid===e?this.currentList.setDefList(t):this.nextList.setDefList(t))}},{key:"error",get:function(){return en.errorFragment?en.errorStage:""}},{key:"stats",get:function(){var e=function(){if(Co.running||Mo.running){var e=Dt.a.cdnSpeed>0?Dt.a.cdnSpeed:Dt.a.cdnCostTime>0?Dt.a.cdnSize/Dt.a.cdnCostTime:0;return{domain:Dt.a.cdnLoadDoMain,bw:1e3*e,bps:1e3*e}}return{domian:"",bw:Dt.a.downSpeed,bps:0}}();return{bandwidth:e.bw,bps:e.bps,cdnHost:e.domain,netProtocol:Vt.isHTTPS?"https":"http"}}},{key:"algorithmDes",get:function(){return this.currentList.algorithmDes}},{key:"close",value:function(){xs=!1,Jt.a.info("~~dataProvider close,clear data~~"),clearTimeout(this._runnerStep),this.currentList.reset(),this.nextList.reset(),this.nextListFeedDone=!1,en.errorFragment=null,en.errorStage="",en.loader.count=0,en.dispatcher.count=0,gs=0,ys=0,fa.destroy()}},{key:"getBuffTime",value:function(){var e=this.currentList.buffer,t=0;return this.currentList._readPointer&&(t=this.currentList._readPointer.time),this.currentList._readAudioPointer&&(t=Math.min(this.currentList._readAudioPointer.time,t)),{start:t,length:e}}},{key:"refreshLoadRange",value:function(e,t){this.currentList.tvid===e&&this.currentList.refreshLoadRange(t)}},{key:"checkData",value:function(e,t,n,r){this.currentList.checkData(e,t,n,r)}},{key:"recover",value:function(e){this.currentList.clearData(e)}},{key:"_getBuffLen",value:function(){var e=Dt.a.getBufferFunc(),t=0;return e&&(t=this.currentList.videoFormatType===on.a.M4S||this.currentList.videoFormatType===on.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len),t}}],[{key:"version",get:function(){return Et.i.version}}]),e}();window.DataProvider=Ss,window.QIYI_HTML5_P2P_PlayBack_0002=Ss;var Ps=Ss;function ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Is=n(423).version,As=null;var Es=function(e){l()(n,e);var t=ws(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).absing=!1,e.ABS_LEVEL_ID=-1,e.LOG_TAG="[P2PConnector]",e._initd=!1,e.__p=new Ps,e._closed=!1,e._currentTvid=null,e._nextTvid=null,e._loaderBuff=new z,e._getBufferFunc=null,e._reBufTimeFunc=null,e._refreshTvid="",e}return s()(n,[{key:"isClosed",get:function(){return this._closed}},{key:"buffer",get:function(){if(this.__p){var e=this.__p.getBuffTime();this._loaderBuff.start=e.start,this._loaderBuff.end=e.start+e.length}return this._loaderBuff}},{key:"stats",get:function(){return this.__p?this.__p.stats:{bandwidth:0,bps:0,cdnHost:"",netProtocol:""}}},{key:"algot",get:function(){return this.__p?this.__p.algorithmDes:""}},{key:"error",get:function(){if(this.__p){var e=ke.a.UNKNOWN;switch(this.__p.error){case"dispatch":e=ke.a.DATA_P2P_DISPATCH;break;case"load":e=ke.a.DATA_P2P_LOAD;break;case"loadAccessErr":e=ke.a.DATA_P2P_LOAD_ACCESS;break;case"memoryAllocErr":e=ke.a.DATA_P2P_MEMORY_ALLOC;break;case"authorFailed":e=ke.a.DATA_P2P_AUTH;break;case"loadDataRangeError":e=ke.a.DATA_P2P_RANGE_ERROR;break;case"dataNULL":e=ke.a.DATA_P2P_DATA_NULL}if(e!==ke.a.UNKNOWN)return new ye.a(me.a.CRITICAL,be.a.LOADER,e,"")}return null}},{key:"init",value:function(e){if(!this._initd&&this.__p){this._getBufferFunc=e.getBufferFunc,this._reBufTimeFunc=e.reBufTimeFunc;var t=this,n={logger:P.a,getBufferFunc:function(){return t._getBufferFunc()},reBufTimeFunc:function(){return t._reBufTimeFunc()},platform:e.p2pPlatform,startPlayed:e.startPlayed,canSwitchVd:e.canSwitchVd,checkIsMobius:e.checkIsMobius,getUserInfo:e.getUserInfo,sendPingBack:e.sendPingBack,switchAutoDef:e.switchAutoDef,noticeRefreshMovieData:function(e){t._refreshTvid!==e&&(t._refreshTvid=e,t.emit("AE",e))},noticeDataArrived:function(){t.emit("DR")}};P.a.log("".concat(this.LOG_TAG," p2p init")),this.__p.init(n)}}},{key:"setBitrate",value:function(e,t){this.__p&&(P.a.log("".concat(this.LOG_TAG," setBitrate ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setBitrate(e,t))}},{key:"feed",value:function(e,t,n,r){if(this.__p&&r.bid&&r.dataFlow)if(this._nextTvid==e)P.a.log("".concat(this.LOG_TAG," feed switch: ").concat(this._currentTvid," -> ").concat(e)),this._currentTvid=this._nextTvid,this._nextTvid=null;else{var i=!this._currentTvid||this._currentTvid===e,a=r.bid,o=r.type;P.a.log("".concat(this.LOG_TAG," feed ").concat(e,"(").concat(i?"cur":"next","-").concat(n,"), range=[").concat(t,"], bid=").concat(a,", type=").concat(o)),this.__p.feed(e,t,i,r),n?this._currentTvid=e:this._nextTvid=e}else P.a.log("".concat(this.LOG_TAG," feed error, p2p is null or data error"))}},{key:"seek",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(P.a.log("".concat(this.LOG_TAG," seek ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.seek(e,t))}},{key:"read",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=null,r=this.hasFeed_(e);return this.__p&&r?this.__p.read(t):n}},{key:"refreshLoadRange",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(P.a.log("".concat(this.LOG_TAG," refresh range ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.refreshLoadRange(e+"",t))}},{key:"checkData",value:function(e,t,n,r){if(this.__p)try{this.__p.checkData(e,t,n,r)}catch(i){P.a.log("".concat(this.LOG_TAG," checkData failure: ").concat(i.stack||i.message))}}},{key:"checkSwitch",value:function(e){this.__p&&this._currentTvid!=e&&this._nextTvid==e&&(this._currentTvid=this._nextTvid,this._nextTvid=null,this.__p.seek(e),this.absing&&this.setBitrate(e,this.ABS_LEVEL_ID))}},{key:"recover",value:function(e){this.__p&&(P.a.log("".concat(this.LOG_TAG," recover, time=").concat(e)),this.__p.recover(e))}},{key:"close",value:function(){var e=!!this._currentTvid||!!this._nextTvid;this.__p&&!this.isClosed&&e&&(P.a.log("".concat(this.LOG_TAG," close")),this.__p.close(),this._closed=!0,this._currentTvid=null,this._nextTvid=null)}},{key:"setDefList",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(P.a.log("".concat(this.LOG_TAG," setDefList, length=").concat(t.length,", close=").concat(this._closed,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setDefList(e,t),this._refreshTvid="")}},{key:"notifyP2P",value:function(e){this.__p&&(this.__p.notifyP2P(e),P.a.log("notifyP2P state = ".concat(e)))}},{key:"hasFeed_",value:function(e){return this._currentTvid==e||this._nextTvid==e}},{key:"getPosMarkById_",value:function(e){var t="~~";return null!=e&&""!=e&&(this._currentTvid===e?t="current":this._nextTvid===e&&(t="next")),t}}]),n}(ee.EventEmitter),Ds=n(426);function qs(e,t,n){var r=e.length;if(t>r-1||t===r-1&&n)return P.a.log("eof by loader end, ".concat(t,"-").concat(r)),!0;if(!n)return!1;var i=e[t+1],a=!i.enabled;return a&&P.a.log("eof by next disable, ".concat(t,"-").concat(r,"-").concat(i.enabled)),a}function Os(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Rs=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Ls="dash",Cs=function(e){l()(n,e);var t=Os(n);function n(e){var r;a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Ds,watch:["manifest","loader","renderer"]}))).mode=L.P2P,r.$TAG="P2PLoader",r._p2p=null,r._tvid="",r._timeRange=null,r._eof=!1,r._eod=!1,r.curVideoEndTime_=null,r.curAudioEndTime_=null,r.tempDefList_=null,r.baseLog_="",r.tickTimer_=new G.a((function(){return r.tick_()})),r.onDataArrived_=function(){r._pumpLoader()},r.onAuthExpired_=function(e){var t=r.$krt.params.dynamic.noticeRefreshMovieData;r._tvid==e&&(r.$silenced||t())},r.onKrlPreError_=function(e){var t=r.$manifestArtifact.manifestType;if(!r.$silenced)if(t===et.HLS&&e.category===be.a.MUX){if(e.data[1]&&e.data[1].meta){var n=e.data[1],i=n.startByte,a=n.endByte,o=e.data[1].meta,s=o.level,c=o.fragIdx;r._p2p.checkData(s,c,i,a)}}else if(!(t!==et.DASH_AV1&&t!==et.DASH_VP9||e.code!==ke.a.MEDIA_VIDEO_ERROR&&e.code!==ke.a.MEDIA_SOURCE_OPERATION_FAILED&&e.code!==ke.a.MEDIA_SOURCE_OPERATION_THREW)&&r.lastReadMainSegment_){var u=r.lastReadMainSegment_,d=u.startByte,l=u.endByte;l-d>200&&(l=d+200),r._p2p.checkData(u.levelId,u.fragIdx,d,l)}},r.onKrlStateChange_=function(e){var t=e.state,n=void 0===t?"":t,i=e.shouldEmit,a=void 0!==i&&i;if(n&&r._p2p&&a)switch(n){case"p2pInit":case"playing":case"waiting":case"error":r._p2p.notifyP2P(n)}};var i=function(){var e=!0;return null==As&&(e=!1,As=new Es),{isCache:e,sdk:As}}(),o=i.sdk,s=i.isCache;return r._ctx=e.runtime.ctx,r._p2p=o,s||r._initP2P(),r._bind(),r.tickTimer_.scheduleRepeated(r.$silenced?.5:.1),r}return s()(n,[{key:"$silenced",get:function(){return b()(_()(n.prototype),"$silenced",this)},set:function(e){M()(_()(n.prototype),"$silenced",e,this,!0),!1===e&&this._tvid&&(this._p2p.checkSwitch(this._tvid),this._pumpLoader())}},{key:"buffer",get:function(){return this._p2p.buffer}},{key:"duration",get:function(){var e=0,t=null,n=null;if(this.$manifestArtifact&&!Object(Q.c)(this.$manifestArtifact))switch(this.$manifestArtifact.manifestType){case et.HLS:var r=this.$manifestArtifact.segments;e=(t=r[r.length-1]).startTime+t.duration;break;case et.DASH_VP9:case et.DASH_AV1:case et.JDASH:e=(n=this.$manifestArtifact.tracks).video?n.video.duration:0;var i=n.audio?n.audio.duration:0;0===e?e=i:e>0&&i>0&&(e=Math.min(e,i))}return e}},{key:"algot",get:function(){return this._p2p.algot}},{key:"eof",get:function(){return this._eof}},{key:"eod",get:function(){return this._eod}},{key:"fragments",get:function(){var e,t=[];if(this.$manifestArtifact)switch(this.$manifestArtifact.manifestType){case et.HLS:t=(e=this.$manifestArtifact).fragments;break;case et.DASH_VP9:case et.DASH_AV1:case et.JDASH:e.tracks.video?t=e.tracks.video.fragments:e.tracks.audio&&(t=e.tracks.audio.fragments)}return t||[]}},{key:"p2pVersion",get:function(){return Is}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this._tvid="",this._timeRange=null,this._eof=!1,this._eod=!1,this.$manifestArtifact=null,this.$rendererArtifact=null,this.lastReadMainSegment_=null,this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.tempDefList_=null,this.tickTimer_.cancel(),this._unbind()}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,n=e.loader,r=e.renderer,i=this.$manifestArtifact!==t,a=this.$selfArtifact!==n,o=this.$rendererArtifact!==r,s=!1,c=!1;i&&t&&!Object(Q.c)(t)&&((t.other||{}).fromlist?this._pushDefList(t):this.$manifestArtifact!==t&&(this._changeManifest(t),s=!0),c=!0);o&&(s=!0,this.$rendererArtifact=r),a&&(s=!0,this.$selfArtifact=n),s&&this._pumpLoader(),c&&this.$consumeArtefact("manifest")}},{key:"seek",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];b()(_()(n.prototype),"seek",this).call(this,e),this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.lastReadMainSegment_=null;var r=this.$manifestArtifact.manifestType;t&&(this._p2p.absing||r==et.DASH_AV1||r==et.DASH_VP9||r==et.JDASH)||(this._p2p.seek(this._tvid,e),this._pumpLoader())}},{key:"findPieceAt",value:function(e){if(this.$manifestArtifact){var t=null,n=null,r=null;switch(this.$manifestArtifact.manifestType){case et.HLS:t=this.$manifestArtifact,(n=this.findPieceByPTS_(e,t.fragments))&&(r=this.findPieceByPTS_(e,n.segments));break;case et.DASH_VP9:case et.DASH_AV1:case et.JDASH:t=this.$manifestArtifact,r=this.findPieceByPTS_(e,t.tracks.video.segments)}return r?{fragment:n,segment:r}:null}}},{key:"tick_",value:function(){Object(J.a)(this._ctx.stats,this._p2p.stats),this._pumpLoader()}},{key:"findPieceByPTS_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined;return n&&!this.pieceWithinToleranceTest_(e,n)?n:ge(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined;return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"changeAbsState",value:function(e){this._p2p.absing=e,e&&(this.tempDefList_=null,this._p2p.setBitrate(this._tvid,this._p2p.ABS_LEVEL_ID))}},{key:"applyRanges",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(this.$manifestArtifact&&0!==e.length){this._eod=this._eof=!1,this._timeRange=e,this._constructSegmentsByRange(this.$manifestArtifact);var n=[[e.start(0),e.end(e.length-1)]];t&&this._p2p.refreshLoadRange(this._tvid,n)}}},{key:"recoverAt",value:function(e){this._p2p.recover(e),b()(_()(n.prototype),"recoverAt",this).call(this,e)}},{key:"_initP2P",value:function(){var e=this,t=this.$krt,n=this.$stream,r=this.$silenced,i=this._p2p,a=this._ctx,o=t.params.dynamic,s=o.checkIsMobius,c=o.getUserInfo,u=o.sendPingBack,d=o.switchAutoDef,l=o.absing,f=o.startPlayed,h=o.p2pPlatform;r||(i.absing=l);this._p2p.init({p2pPlatform:h,getBufferFunc:function(){var t=n.renderer.buffer;return null!==e.curVideoEndTime_&&null!==e.curAudioEndTime_&&(t.buffered.audio.end=e.curVideoEndTime_,t.buffered.video.end=e.curAudioEndTime_),t},reBufTimeFunc:function(){return 0},canSwitchVd:function(){var t=f()&&!n.renderer.updating&&!a.isAd&&a.allowSwitchVariant;return P.a.log("".concat(e.LOG_TAG," p2p get canSwitchVd, check=").concat(t)),t},startPlayed:f||At.f,checkIsMobius:s||At.f,getUserInfo:c||At.f,sendPingBack:u||At.f,switchAutoDef:d||At.f})}},{key:"_bind",value:function(){var e=this._p2p;this.$krt.ctx.on(U.a.PRE_ERROR,this.onKrlPreError_),this.$krt.ctx.on(U.a.STATE_CHANGE,this.onKrlStateChange_),e.on("DR",this.onDataArrived_),e.on("AE",this.onAuthExpired_)}},{key:"_unbind",value:function(){var e=this._p2p;this.$krt.ctx.off(U.a.PRE_ERROR,this.onKrlPreError_),this.$krt.ctx.off(U.a.STATE_CHANGE,this.onKrlStateChange_),e.off("DR",this.onDataArrived_),e.off("AE",this.onAuthExpired_)}},{key:"_pushDefList",value:function(e){if(!this.$silenced){var t=e.other.listdone;null==this.tempDefList_&&(this.tempDefList_=[]);var n=this._getP2PItemData(e);this.tempDefList_.push(n),t&&this._p2p.setDefList(this._tvid,this.tempDefList_)}}},{key:"_changeManifest",value:function(e){var t=this.$silenced,n=this.$stream,r=this._p2p,i=e.manifestType,a=e.levelId,o=e.metadata,s=e.other,c=e.isSwitchLevel,u=Number(a),d=s.tvid,l=s.aid,f=s.vidlist,h=s.feed;d+="",l+="";var p=this.$manifestArtifact?this.$manifestArtifact.levelId:"null";P.a.log("".concat(this.LOG_TAG," ").concat(et[i]," manifest changed, tvid: ").concat(this._tvid,"->").concat(d,", bid: ").concat(p,"->").concat(u,", metadata=").concat(JSON.stringify(o))),this.baseLog_="".concat((et[i]||"").toLowerCase(),", tvid=").concat(d,", bid=").concat(u),this.$manifestArtifact=e;var _=n.playRanges;if(this.applyRanges(_,!1),this._tvid=d,n.restrictor.needSendInitSegment=!0,"false"!==h&&!1!==h){var v=[[_.start(0),_.end(_.length-1)]],g={vidlist:f,aid:l},y=this._getP2PItemData(e);this.baseLog_+=", type=".concat(y.type),Object(J.a)(g,y),r.feed(this._tvid,v,!t,g),r.setBitrate(this._tvid,u),c||t||r.seek(this._tvid,_.start(0)),!r.absing||t||c||r.setBitrate(this._tvid,r.ABS_LEVEL_ID)}}},{key:"_getP2PItemData",value:function(e){var t=e.manifestType,n=e.levelId,r=e.other,i={bid:n,vid:r.vid+""||"",type:"",vsize:r.vsize||0,dataFlow:null},a="manifest data, ";switch(t){case et.HLS:var o=e.segments;i.dataFlow={stream:o},i.type="ts",a+="type=hls, bid=".concat(n,", segments.len=").concat(o.length);break;case et.DASH_VP9:case et.DASH_AV1:var s=e.tracks,c=s.video,u=s.audio,d=u.segments[u.segments.length-1],l=c.segments[c.segments.length-1];i.dataFlow={audio:{duration:d.startTime+d.duration,init:u.initSegment,segments:u.segments},video:{duration:l.startTime+l.duration,init:c.initSegment,segments:c.segments}},i.type=t==et.JDASH?"m4s":Ls,a="type=".concat(i.type,", bid=").concat(n,", audio.segs.len = ").concat(u.segments.length,", video.segs.len = ").concat(c.segments.length);break;case et.JDASH:var f=e,h=f.source;h.drm=f.other.drm,i.dataFlow=h,i.type="m4s",a="type=".concat(i.type,", bid=").concat(n)}return P.a.log("".concat(this.LOG_TAG," ").concat(a)),i}},{key:"_constructSegmentsByRange",value:function(e){var t=this._timeRange;if(t){var n=function(e){for(var n=t.start(0),r=t.end(t.length-1),i=0;i<e.length;i++){var a=e[i],o=a.startTime,s=a.endTime;a.enabled=(o>=n||s>n)&&(s<=r||o<r)}};switch(e.manifestType){case et.HLS:n(e.segments);break;case et.DASH_VP9:case et.DASH_AV1:var r=e.tracks,i=r.video,a=r.audio;n(i.segments),n(a.segments);break;case et.JDASH:}}}},{key:"_pumpLoader",value:function(){var e=this.$stream,t=this.$selfArtifact,n=this.$manifestArtifact,r=t,i=this.$rendererArtifact;if(!(!n||Object(Q.c)(n)||!Object(Q.c)(r)&&null!=r||null==i||i.expectingBuffer!==undefined&&"boolean"!=typeof i.expectingBuffer||!1===i.expectingBuffer||this.eof||this.$silenced||this.$error&&0===this.buffer.len||this.$error&&(this.$error.code===ke.a.DATA_P2P_DASH_BYTES_LENGTH||this.$error.code===ke.a.MUX_M4S_FTYP_INVALID))){var a=this._p2p.error;if(a)this.$throwError(a);else{var o=!1;o=e.restrictor.needSendInitSegment&&n.manifestType!==et.HLS?this._readInitSegment():this._readData(),this.noticeDataPump(o)}}}},{key:"_readInitSegment",value:function(){var e=this.$stream,t=!1;if(!this.$manifestArtifact)return t;var n=this.$manifestArtifact,r=n.manifestType,i=n.metadata,a=i.hasVideo,o=i.hasAudio,s=null,c=null,u=[],d=this.$manifestArtifact,l=null,f=null;switch(r){case et.JDASH:l=d.tracks.video,f=d.tracks.audio,l&&((s=new K.a(1)).bytesArray=[l.initSegment],s.container="video/mp4",s.codec=l.codec,u.push(s)),f&&((c=new K.a(2)).bytesArray=[f.initSegment],c.container="audio/mp4",c.codec=f.codec,u.push(c));break;case et.DASH_VP9:case et.DASH_AV1:var h=this._p2p.read(this._tvid,!0);if(h){var p=h.video?h.video.data:null,_=h.audio?h.audio.data:null;(p||_)&&(l=d.tracks.video,f=d.tracks.audio,l&&p&&((s=new K.a(1)).bytesArray=[p],s.container=l.mimeType,s.codec=l.codec,u.push(s)),f&&_&&((c=new K.a(2)).bytesArray=[_],c.container=f.mimeType,c.codec=f.codec,u.push(c)))}}return(a&&o&&s&&c||a&&s||o&&c)&&(e.restrictor.needSendInitSegment=!1,t=!0,P.a.log("".concat(this.LOG_TAG," read initSegment, length=").concat(u.length)),this.$provideArtefact({segments:u})),t}},{key:"_readData",value:function(){var e=this._p2p.read(this._tvid,!1),t=!1;if(e&&!Object(Q.c)(e)){var n=e.type,r=this.$manifestArtifact.manifestType;"ts"==(n=n.toLowerCase())&&r==et.HLS&&(t=this._parseHLS(this.$manifestArtifact.segments,e)),("m4s"==n&&r==et.JDASH||n==Ls&&(r==et.DASH_VP9||r==et.DASH_AV1))&&(t=this._parseDash(this.$manifestArtifact.tracks,e))}return t}},{key:"_parseHLS",value:function(e,t){var n=e,r=t.bid,i=t.loadDone,a=t.stream,o=null,s=!1;if(a){var c=a.index,u=a.data,d=a.chunkEOF,l=a.spos,f=n[c],h=r||f.levelId;if(this._eof=qs(n,c,d),this._eod=i,u){var p=u.byteLength;P.a.log("read hls, done=".concat(d,", uid=").concat(h,"-").concat(f.fragIdx,"-").concat(f.idx,", startByte=").concat(f.startByte,", endByte=").concat(f.endByte,", total=").concat(f.endByte-f.startByte,", byteOffset=").concat(l,", data.byteLength=").concat(p,", startTime=").concat(f.startTime,", endTime=").concat(f.startTime+f.duration,", eof=").concat(this._eof,", eod=").concat(this._eod)),o={type:et.HLS,data:u,done:d,meta:{uid:"".concat(h,"-").concat(f.fragIdx,"-").concat(f.idx," "),level:h,fragIdx:f.fragIdx,segIdx:f.idx,fragKey:f.fragKey,byteOffset:l}}}}return o&&(s=!0,this.$provideArtefact(o)),s}},{key:"_parseDash",value:function(e,t){var n,r,i,a,o=this,s=t.bid,c=t.loadDone,u=t.video,d=t.audio,l=e.video?e.video.segments:null,f=e.audio?e.audio.segments:null,h="",p=[],_=null,v=!!f&&f.length>0,g=!!l&&l.length>0,y=!1;return l||f?([{type:"video",result:u,segments:l},{type:"audio",result:d,segments:f}].filter((function(e){var t=e.result;return!(!t||!t.data)})).forEach((function(e){var n=e.type,r=e.result,c=e.segments,u=r.index,d=c[u],l=d.endByte-d.startByte,f="video"===n?1:2,v="".concat(s,"-").concat(d.fragIdx,"-").concat(d.idx);if(r.data.length!==l)_=!0,i=be.a.LOADER,a=ke.a.DATA_P2P_DASH_BYTES_LENGTH,h+="\n".concat(n," byteLength error, p2p=").concat(r.data.length,", manifest=").concat(l,", uid=").concat(v);else if("m4s"!==t.type||function(e,t){var n=!0,r=1===t?[0,0,0,36,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,97,118,99,49,99,109,102,115]:[0,0,0,32,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,99,109,102,115],i=r.length;if(e.length<i)n=!1;else for(var a=0;a<i;a++)if(r[a]!==e[a]){n=!1;break}return n}(r.data,f)){var g=new $.a(f);g.bytesArray=[r.data],g.startTime=d.startTime,g.duration=d.duration,p.push(g),h+="\nreceived ".concat(n," ").concat(u," segment, uid=").concat(v,", startTime=").concat(d.startTime,", duration=").concat(d.duration),/firefox/gi.test(navigator.userAgent)||(h+=", crc32=".concat(Oe(It(g.bytesArray[0]).toString()))),1===f?(o.lastReadMainSegment_=d,o.curVideoEndTime_=d.endTime):o.curAudioEndTime_=d.endTime}else{_=!0,i=be.a.LOADER,a=ke.a.MUX_M4S_FTYP_INVALID;var y="Encounter invalid m4s ftyp, startByte: ".concat(d.startByte," endByte: ").concat(d.endByte,", data(").concat(r.data.subarray(0,100),")");P.a.error(y)}})),n=!v||qs(f,d.index,!!d.data),r=!g||qs(l,u.index,!!u.data),this._eof=r&&n,this._eod=c,_&&this.$throwError(new ye.a(me.a.CRITICAL,i,a,"")),p.length>0&&(y=!0,P.a.log("".concat(this.LOG_TAG," read data, ").concat(this.baseLog_,", eof=").concat(this._eof,", eod=").concat(this._eod,", ").concat(h)),this.$provideArtefact({segments:p})),y):y}}]),n}(Y);Rs([F.c],Cs.prototype,"fragments",null),Rs([F.c],Cs.prototype,"p2pVersion",null),Rs([F.c],Cs.prototype,"findPieceAt",null);n(214),n(147);function Ms(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ns=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Bs=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Fs=function(e){l()(n,e);var t=Ms(n);function n(e){var r;a()(this,n);var i=e.manifestType,o=Bs(e,["manifestType"]);return(r=t.call(this,o)).$ARTEFACT_ACTION=j.a.DEPOSIT_MANIFEST,r.seekable_=!0,r.manifestType=i,r}return s()(n,[{key:"currentManifestType",get:function(){var e=this.manifestType;return e===undefined||null===e?null:e}},{key:"dynamicStuckMonitorPeriod",get:function(){this.currentManifestType;return this.$krt.conf.fpsStuckMonitoringPeriod}},{key:"seekable",get:function(){return this.seekable_},set:function(e){this.seekable_=e}}]),n}(V.a);Ns([F.c],Fs.prototype,"currentManifestType",null);var Us=function Ug(){a()(this,Ug),this.hasAudio=!1,this.hasVideo=!1};function js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Vs=function(e){l()(n,e);var t=js(n);function n(e){var r;return a()(this,n),(r=t.call(this)).status=0,r.enabled=!0,r.seekable=!0,r.mediumStartByte=null,r.mediumEndByte=null,r.uri=null,r.segments=[],r.header=null,r.gas=null,r.loadstart=!1,r.offset=0,r.key=X.a.create(),r.type=e,r}return n}(function(){function e(){a()(this,e),this.idx=null,this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.segments=[]}return s()(e,[{key:"endTime",get:function(){return this.startTime+this.duration}},{key:"totalByte",get:function(){return this.endByte-this.startByte}}]),e}());n(184),n(627);function Hs(e,t){var n=new DOMParser,r=null,i=null;try{i=n.parseFromString(e.trim(),"text/xml")}catch(a){throw"XML DOMParser parseFromString error: ".concat(a.message)}return i&&i.documentElement.tagName==t&&(r=i.documentElement),r&&r.getElementsByTagName("parsererror").length>0?null:r}function Ws(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,i=null,a=e.getAttribute(t);return null!=a&&(i=n(a)),null==i?r:i}function zs(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function Ys(e,t){var n=Gs(e,t);return 1!=n.length?null:n[0]}function Gs(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function Qs(e,t){return Array.from(e.childNodes).filter((function(e){return e.nodeType===t}))}var Ks=E.a.mark(Xs);function $s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xs(e){var t,n,r,i,a,o;return E.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=-1,n=undefined,r=undefined,i=$s(e),s.prev=4,i.s();case 6:if((a=i.n()).done){s.next=16;break}if(o=a.value,!(t>=0)){s.next=11;break}return s.next=11,{i:t,item:r,prev:n,next:o};case 11:t++,n=r,r=o;case 14:s.next=6;break;case 16:s.next=21;break;case 18:s.prev=18,s.t0=s["catch"](4),i.e(s.t0);case 21:return s.prev=21,i.f(),s.finish(21);case 24:if(-1==t){s.next=27;break}return s.next=27,{i:t,prev:n,item:r,next:undefined};case 27:case"end":return s.stop()}}),Ks,null,[[4,18,21,24]])}n(106),n(140);function Js(e){return null!=e}function ec(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return P.a.warn("Invalid duration string: ".concat(e)),null;var n=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(n)?n:null}function tc(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=Number(t[1]);if(!isFinite(n))return null;var r=Number(t[2]);return isFinite(r)?{start:n,end:r}:null}function nc(e){var t,n;return n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(n)?null:n}function rc(e){var t=Number(e);return t%1==0&&t>0?t:null}function ic(e){var t=Number(e);return t%1==0&&t>=0?t:null}function ac(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sc(e){var t=Ys(e,"clip_list"),n={},r={BaseURL:"baseUrl",remote_path:"url",start_ts_in_ms:{name:"startTime",parser:ic},duration_in_ms:{name:"duration",parser:ic},start_pos:{name:"startByte",parser:ic},end_pos:{name:"endByte",parser:ic},type:"type",size:{name:"size",parser:ic}};t&&Gs(t,"clip").map((function(e){var t={type:null};Qs(e,Node.ELEMENT_NODE).map((function(e){var n=r[e.tagName];if(n){var i="string"==typeof n?n:n.name,a=zs(e);n.parser&&(a=n.parser(a)),t[i]=a}})),Array.isArray(n[t.type])||(n[t.type]=[]),n[t.type].push(t)}));return n}function cc(e,t){return e.filter((function(e){return e.contentType==t}))}function uc(e,t){var n,r,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(e||t)if(e&&t){var a,o=ac(e.streams);try{for(o.s();!(a=o.n()).done;){var s,c=a.value,u=ac(t.streams);try{for(u.s();!(s=u.n()).done;){var d=s.value;n=(d.bandwidth||0)+(c.bandwidth||0),r={language:e.language,primary:e.main||t.main,audio:c,video:d,bandwidth:n},i.push(r)}}catch(_){u.e(_)}finally{u.f()}}}catch(_){o.e(_)}finally{o.f()}}else{var l,f=e||t,h=ac(f.streams);try{for(h.s();!(l=h.n()).done;){var p=l.value;n=p.bandwidth||0,r={language:f.language||"und",primary:f.main,audio:e?p:null,video:t?p:null,bandwidth:n},i.push(r)}}catch(_){h.e(_)}finally{h.f()}}}function dc(e,t){e.period=t,e.period.id||(P.a.log("No Period ID given for Period with start time ".concat(t.start,",  Assigning a default")),e.period.id="__qvs_period_"+t.start);var n=Gs(t.node,"AdaptationSet").map((function(t){return function(e,t){var n=t.getAttribute("id"),r=t.getAttribute("contentType")||"",i=t.getAttribute("segmentAlignment"),a=t.getAttribute("lang")||"und",o=Gs(t,"Representation"),s="text"===r;e.adaptationSet={id:n,contentType:r,segmentAlignment:i,language:a};var c=o.map((function(t){return function(e,t,n){var r,i=e.adaptationSet,a=i.contentType,o=t.getAttribute("id"),s=t.getAttribute("mimeType")||"",c=t.getAttribute("codecs"),u=Ws(t,"bandwidth",rc)||0,d=Ys(t,"SegmentBase"),l=Ys(t,"SegmentList"),f=Ys(t,"SegmentTemplate"),h=Gs(t,"BaseURL").map(zs),p={contentType:a,id:o,mimeType:s,codecs:c,bandwidth:u,baseUris:h,segmentBase:d,segmentList:l,segmentTemplate:f};switch(a){case"video":p.width=Ws(t,"width",ic),p.height=Ws(t,"height",ic),p.frameRate=Ws(t,"frameRate",nc);break;case"audio":p.audioSamplingRate=ic(t.getAttribute("audioSamplingRate"))}if(e.representation=p,!function(e){var t=0;if(t+=e.segmentBase?1:0,t+=e.segmentList?1:0,0==(t+=e.segmentTemplate?1:0))return P.a.warn("Representation does not contain a segment information source: the Representation must contain one of SegmentBase, SegmentList"),!1;1!=t&&(P.a.warn("Representation ".concat(e.id," contains multiple segment information sources: the Representation should only contain one of SegmentBase,SegmentList, or SegmentTemplate.")),e.segmentBase?(P.a.log("Using SegmentBase by default."),e.segmentList=null,e.segmentTemplate=null):(P.a.log("Using SegmentList by default."),e.segmentTemplate=null));return!0}(p))return P.a.warn("Skipping Representation",p),null;p.segmentList?r=function(e,t){var n=e.representation,r=n.contentType,i=Ys(t,"Initialization"),a=Gs(t,"SegmentURL"),o=ic(t.getAttribute("startNumber")||""),s=NaN;if("video"===r)s=1e3;else{if("audio"!==r)throw"mpd unknown ".concat(r);s=n.audioSamplingRate}var c={range:Ws(i,"range",tc,{start:0,end:null})},u=a.map((function(t,n){t.getAttribute("indexRange")&&!e.indexRangeWarningGiven&&(e.indexRangeWarningGiven=!0);var r=ic(Ws(t,"t",ic));return 0===n&&(r=0),{startTime:r,duration:ic(Ws(t,"d",ic)),range:Ws(t,"mediaRange",tc,{start:0,end:null})}}));u.length>1&&(u[0].duration=u[1].startTime);0==o&&(P.a.warn("SegmentList@startNumber must be > 0"),o=1);return{startNumber:o,timescale:s,initUri:c,mediaUris:u}}(e,p.segmentList):p.segmentBase||p.segmentTemplate?P.a.error("mpd parser still not support parse segmentBase or segmentTemplate"):P.a.error("Must have Segment* with non-text streams.");return Object.assign({id:i.id,originalId:p.id,segmentIndex:null,mimeType:p.mimeType,codecs:p.codecs,frameRate:p.frameRate,bandwidth:p.bandwidth,width:p.width,height:p.height,language:n,type:a,channelsCount:p.numChannels},r)}(e,t,a)})).filter((function(e){return!!e}));if(0==c.length){if(s)return null;throw new Error("DASH_EMPTY_ADAPTATION_SET")}if(!e.adaptationSet.contentType||"application"==e.adaptationSet.contentType){var u=c[0].mimeType;c[0].codecs;e.adaptationSet.contentType=function(e){return e.split("/")[0]}(u);var d,l=ac(c);try{for(l.s();!(d=l.n()).done;){d.value.type=e.adaptationSet.contentType}}catch(h){l.e(h)}finally{l.f()}}var f=o.map((function(e){return e.getAttribute("id")})).filter(Js);return{id:e.adaptationSet.id,contentType:e.adaptationSet.contentType,language:a,streams:c,representationIds:f}}(e,t)})).filter(Js),r=cc(n,"video"),i=cc(n,"audio");if(!r.length&&!i.length)throw"DASH_EMPTY_PERIOD";i.length||(i=[null]),r.length||(r=[null]);var a,o=[],s=ac(i);try{for(s.s();!(a=s.n()).done;){var c,u=a.value,d=ac(r);try{for(d.s();!(c=d.n()).done;){uc(u,c.value,o)}}catch(l){d.e(l)}finally{d.f()}}}catch(l){s.e(l)}finally{s.f()}return{startTime:t.start,variants:o}}var lc={parseClipList:sc,parseDuration:ec,parsePeriods:function(e,t){var n,r=[],i=Gs(t,"Period"),a=e.presentationDuration,o=0,s=ac(Xs(i));try{for(s.s();!(n=s.n()).done;){var c=n.value,u=c.i,d=c.item,l=c.next,f=d.getAttribute("id"),h=Ws(d,"start",ec,o),p=Ws(d,"duration",ec),_=null;if(l){var v=Ws(l,"start",ec);null!=v&&(_=v-h)}else null!=a&&(_=a-h);_&&p&&Math.abs(_-p)>.06666666666666667&&P.a.warn("There is a gap/overlap between mpd Periods"),null==_&&(_=p);var g=dc(e,{id:f,start:h,duration:_,node:d,isLastPeriod:null==_||!l});if(r.push(g),null==_){l&&P.a.warn("Skipping Period",u+1,"and any subsequent Periods:","Period",u+1,"does not have a valid start time.",l),o=null;break}o=h+_}}catch(y){s.e(y)}finally{s.f()}return null!=a?(o!=a&&P.a.warn("@mediaPresentationDuration does not match the total duration of all Periods."),{periods:r,duration:a,durationDerivedFromPeriods:!1}):{periods:r,duration:o,durationDerivedFromPeriods:!0}}},fc=n(427);function hc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var vc=function(e){l()(n,e);var t=_c(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:fc,watch:["rawness","error"],manifestType:et.UNKNOWN}))).$TAG="DashManifest",r}return s()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(Q.c)(e.rawness)){var t=e.rawness.mpd,n=e.rawness.bid,r=e.rawness.other,i=Object(Q.j)(n)?parseInt(n,10):n;if(Object(Q.j)(t)){var a=this.generateArtefact_(t,i,r);if(a.isSwitchLevel=!!e.rawness.isSwitchLevel,a.tracks.video){var o=a.tracks.video.codec;if(/vp09/gi.test(o))this.manifestType=et.DASH_VP9;else{if(!/av01/gi.test(o))return void P.a.error("".concat(this.LOG_TAG," unsupported dash manifest codec ").concat(o));this.manifestType=et.DASH_AV1}}this.$provideArtefact(a)}else this.$throwError(new ye.a(me.a.CRITICAL,be.a.MANIFEST,ke.a.MFT_FAILED_TO_PARSE_MPD));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){try{var r=function(){var r=X.a.create(),i=new Us,a={},o=Hs(e,"MPD"),s=Ws(o,"mediaPresentationDuration",lc.parseDuration),c=sc(o),u=!!c.video,d=!!c.audio,l={clips:c,presentationDuration:s,period:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1},f=lc.parsePeriods(l,o).periods;i.hasAudio=d,i.hasVideo=u;var h=et.DASH_VP9;Object.keys(c).forEach((function(e){var n=c[e],r={};r.type=e,r.duration=s,r.fragments=[],n.map((function(e,n){var i=new Vs(h);i.idx=n,i.levelId=t,i.uri=new re.a(e.url),i.mediumStartByte=e.startByte,i.mediumEndByte=e.endByte+1,i.startByte=0,i.endByte=i.mediumEndByte-i.mediumStartByte,Object(Q.e)()&&i.uri.setScheme("https"),r.fragments.push(i)})),a[e]=r}));var p,_=hc(f);try{var v=function(){var e=p.value.variants[0],n=[];d&&n.push("audio"),u&&n.push("video"),n.forEach((function(n){var i=a[n],o=e[n],s=o.codecs;if(i){var c=new ot(h);c.uri=new re.a(i.fragments[0].uri),c.startByte=o.initUri.range.start,c.endByte=o.initUri.range.end+1,c.uri.query.add("start",c.startByte+""),c.uri.query.add("end",c.endByte+""),i.codec=s,i.mimeType=o.mimeType,i.initSegment=c,i.segments=[];for(var u=0,d=-1,l=i.fragments[u],f=o.timescale,p=o.mediaUris.length,_=!1,v=0;v<p;v++){var g=v===p-1,y=o.mediaUris[v],m=y.range.start,b=y.range.end+1,k=m-l.mediumStartByte,x=b-l.mediumStartByte,T=new re.a(l.uri),S=y.startTime/f,P=y.duration/f;g&&(P=i.duration-S),b<=l.mediumEndByte&&(d++,b===l.mediumEndByte&&(_=!0,l.startTime=l.segments.length>0?l.segments[0].startTime:S,l.duration=S-l.startTime+P)),T.query.update("start",k+""),T.query.update("end",x+"");var w=new ot(h);w.uri=T,w.idx=d,w.fragIdx=u,w.startTime=S,w.duration=P,w.startByte=k,w.endByte=x,w.poolId=r+"-"+u+"-"+d,w.levelId=t,i.segments.push(w),l.segments.push(w),_&&(u++,d=-1,l=i.fragments[u],_=!1)}}}))};for(_.s();!(p=_.n()).done;)v()}catch(g){_.e(g)}finally{_.f()}if(!Object(Q.c)(a))return{v:{duration:s,manifestType:h,isSwitchLevel:!1,levelId:t,metadata:i,tracks:a,other:n}}}();if("object"===B()(r))return r.v}catch(i){P.a.error("".concat(this.LOG_TAG," mpd parsed fail: ").concat(i.stack," - ").concat(i.message)),this.$throwError(new ye.a(me.a.CRITICAL,be.a.MANIFEST,ke.a.MFT_FAILED_TO_PARSE_MPD_XML))}return null}}]),n}(Fs),gc=n(428);function yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var mc=function(e){l()(n,e);var t=yc(n);function n(e){return a()(this,n),t.call(this,Object.assign(Object.assign({},e),{pkg:gc,watch:["rawness","error"],manifestType:et.FLV}))}return s()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(Q.c)(e.rawness)){var t=e.rawness.fs,n=e.rawness.bid,r=Object(Q.j)(n)?parseInt(n,10):n,i=e.rawness.other;if(Array.isArray(t)||i.done){var a=this.generateArtefact_(t,r);a.isSwitchLevel=!!e.rawness.isSwitchLevel,a.other=i,this.$provideArtefact(a)}else{try{P.a.error(JSON.stringify(e.rawness))}catch(o){}this.$throwError(new ye.a(me.a.CRITICAL,be.a.MANIFEST,ke.a.MFT_FAILED_TO_PARSE_FLV))}this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t){var n=new Us;n.hasAudio=!0,n.hasVideo=!0;var r={manifestType:et.FLV,isSwitchLevel:!1,levelId:t,metadata:n,fragments:[],segments:[],other:{}};if(e&&e.length>0)for(var i=e.length,a=null,o=0,s=0;s<i;++s){var c=e[s];(a=new Vs(et.FLV)).idx=s,a.startTime=o,a.duration=c.duration,o+=c.duration,a.uri=new re.a(c.url),a.levelId=t,c.gas&&(a.gas=c.gas),Object(Q.e)()&&a.uri.setScheme("https");var u=new ot(et.FLV);u.startByte=0,u.endByte=9e3,u.uri=new re.a(c.url),u.fragIdx=s,a.header=u,u.levelId=t,Object(Q.e)()&&u.uri.setScheme("https"),r.fragments.push(a)}return r}}]),n}(Fs),bc=n(429);function kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var xc=function(e){l()(n,e);var t=kc(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:bc,watch:["rawness","error"],manifestType:et.HLS}))).$TAG="HlsManifest",r}return s()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(Q.c)(e.rawness)){var t=e.rawness.m3u8,n=e.rawness.bid,r=e.rawness.other,i=Object(Q.j)(n)?parseInt(n,10):n;if(Object(Q.j)(t)){var a=this.generateArtefact_(t,i,r);a.isSwitchLevel=!!e.rawness.isSwitchLevel,this.$provideArtefact(a)}else this.$throwError(new ye.a(me.a.CRITICAL,be.a.MANIFEST,ke.a.MFT_FAILED_TO_PARSE_M3U8));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){var r=X.a.create(),i=new Us;i.hasAudio=!0,i.hasVideo=!0;var a={manifestType:et.HLS,isSwitchLevel:!1,levelId:t,metadata:i,fragments:[],segments:[],isAccurateTimestamp:!1,other:n};if(e&&""!=e){var o=this.parseM3u8_(e),s=o.durations,c=o.urls,u=o.sds,d=o.starts,l=o.ends,f=o.parts,h=c.length,p=u&&u.length>0;if(a.isAccurateTimestamp=p,h>0){var _,v,g,y,m,b,k=0,x=0,T=0;u.length>0&&(u[0]=0);for(var S=0;S<h;S++){var w=S===h-1,I=te.f+c[S],A=s[S],E=d[S],D=l[S],q=f[S],O=void 0;w&&0===A&&(A=.04),y&&y===q||(y&&(O=_),(_=new Vs(et.HLS)).idx=k,x=0,a.fragments.push(_),k+=1),(v=new ot(et.HLS)).uri=new re.a(I),v.idx=x,v.startByte=E,v.endByte=D,v.poolId=r+"-"+_.idx+"-"+x,v.levelId=t,v.duration=A,v.fragIdx=_.idx,v.fragKey=_.key,v.flattenIdx=a.segments.length,v.__url=v.uri.toString(),x+=1,p?(T=u[S]/1e3,b>-1&&T<b&&(P.a.log("".concat(this.LOG_TAG," manifest correct sd , ").concat(T," -> ").concat(b+m.duration)),T=b+m.duration),v.startTime=T,m&&(m.duration=T-m.startTime),m=v,b=T):(v.startTime=T,T+=A),a.segments.push(v),_.segments.push(v),O&&this.resetFragInfo_(O,g,t),w&&this.resetFragInfo_(_,I,t),y=q,g=I}}}return a}},{key:"parseM3u8_",value:function(e){for(var t,n=[],r=[],i=[],a=[],o=[],s=[],c=/(#EXTINF:\d+)|(\/\/\S*)/g,u=/(start=\d+)|(end=\d+)/g,d=/(&sd=\d+)|(\/\/\S*\?)/g;null!==(t=c.exec(e));)t[0].indexOf("#EXTINF")>-1?n.push(parseInt(t[0].replace("#EXTINF:",""),10)):r.push(t[0]);for(;null!==(t=u.exec(e));)t[0].indexOf("start=")>-1?a.push(parseInt(t[0].replace("start=",""),10)):o.push(parseInt(t[0].replace("end=",""),10));for(;null!==(t=d.exec(e));)t[0].indexOf("&sd=")>-1?i.push(parseInt(t[0].replace("&sd=",""),10)):s.push(t[0]);return{durations:n,urls:r,sds:i,starts:a,ends:o,parts:s}}},{key:"resetFragInfo_",value:function(e,t,n){var r=e.segments[0],i=e.segments[e.segments.length-1];e.startTime=r.startTime,e.duration=i.startTime+i.duration-e.startTime,e.levelId=n;var a=r.startByte,o=i.endByte;e.uri=new re.a(t),e.uri.query.get("start")&&e.uri.query.update("start","".concat(a)),e.uri.query.get("contentlength")&&e.uri.query.update("contentlength","".concat(o-a)),e.uri.query.get("sd")&&e.uri.query.update("sd","".concat(1e3*r.startTime))}}]),n}(Fs);function Tc(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function Sc(e,t){var n=Re(e);t=t==undefined||t;var r=btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?r:r.replace(/=*$/,"")}function Pc(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}var wc=n(430);function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ac=function(e){l()(n,e);var t=Ic(n);function n(e){return a()(this,n),t.call(this,Object.assign(Object.assign({},e),{pkg:wc,watch:["rawness","error"],manifestType:et.JDASH}))}return s()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(Q.c)(e.rawness)){var t=this.$stream.renderer,n=e.rawness,r=n.m3u8,i=n.drm,a=n.bid,o=n.other,s=null;try{var c=JSON.parse(r);s=c.payload[c.watermark_group[0]]}catch(l){}if(s){var u=Object(Q.j)(a)?parseInt(a,10):a,d=this.generateArtefact_(s,u,o);d.isSwitchLevel=!!e.rawness.isSwitchLevel,t&&(t.drmInfo=i),this.$provideArtefact(d)}else this.$throwError(new ye.a(me.a.CRITICAL,be.a.MANIFEST,ke.a.MFT_FAILED_TO_PARSE_JDASH));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){var r=X.a.create(),i=new Us,a={};for(var o in e)if("object"===B()(e[o])&&Array.isArray(e[o].type)&&/(video|audio)/gi.test(e[o].type.join(""))){var s=e[o],c=s.files.length,u={type:Array.isArray(s.type)?s.type[0]:s.type,duration:parseInt(s.duration_second,10),codec:s.codec,initDataType:s.encryption_scheme,initSegment:Tc(s.codec_init),segments:[]};c>0&&(s.files[0].seekable.hasOwnProperty("pos")?this.parseOldData_(u.segments,s.files,u.duration,r,t):s.files[0].seekable.hasOwnProperty("pos_start")&&this.parseNewData_(u.segments,s.files,r,t)),a[u.type]=u,"audio"===u.type?i.hasAudio=!0:"video"===u.type&&(i.hasVideo=!0)}return Object(Q.c)(a)?null:{manifestType:et.JDASH,isSwitchLevel:!1,levelId:t,metadata:i,tracks:a,other:n,source:e}}},{key:"parseOldData_",value:function(e,t,n,r,i){for(var a=0,o=t.length;a<o;a++)for(var s,c,u,d=t[a],l=d.size,f=d.start_second,h=a===o-1,p=0;p<d.seekable.time.length;p++)s=new ot(et.JDASH),c=e[e.length-1],u=d.seekable.pos[p+1],s.uri=new re.a(d.file_name),Object(Q.e)()&&s.uri.setScheme("https"),s.idx=p,s.poolId=r+"-"+s.idx,s.levelId=i,s.startTime=f+d.seekable.time[p],c&&(c.duration=s.startTime-c.startTime,h&&"number"!=typeof u&&(s.duration=n-s.startTime)),s.startByte=d.seekable.pos[p],s.endByte="number"==typeof u?u:l,e.push(s)}},{key:"parseNewData_",value:function(e,t,n,r){for(var i,a=0,o=t.length;a<o;a++){var s=t[a];(i=new ot(et.JDASH)).uri=new re.a(s.file_name),Object(Q.e)()&&i.uri.setScheme("https"),i.idx=a,i.poolId=n+"-"+i.idx,i.levelId=r,i.duration=s.seekable.time_end-s.seekable.time_start,i.startTime=s.start_second,i.startByte=s.seekable.pos_start,i.endByte=s.seekable.pos_end,e.push(i)}}}]),n}(Fs),Ec=n(431);function Dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var qc=function(e){l()(n,e);var t=Dc(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Ec,watch:["rawness","error"],manifestType:et.MP4}))).$TAG="Mp4Manifest",r}return s()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(Q.c)(e.rawness)){var t=e.rawness,n=t.src,r=t.levelId,i=t.duration,a=t.byteLength,o=t.other;if(Object(Q.j)(n)){var s=this.generateArtefact_(n,Object(Q.j)(r)?parseInt(r,10):r,i,a,o);s.isSwitchLevel=!!e.rawness.isSwitchLevel,this.$provideArtefact(s)}else this.$throwError(new ye.a(me.a.CRITICAL,be.a.MANIFEST,ke.a.MFT_FAILED_TO_PARSE_M3U8));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n,r,i){X.a.create();var a=new Us;a.hasAudio=!0,a.hasVideo=!0;var o={manifestType:et.MP4,isSwitchLevel:!1,levelId:t,metadata:a,fragments:[],segments:[],isAccurateTimestamp:!1,other:i},s=new Vs(et.MP4),c=new re.a(e);c.setScheme("https"),s.idx=0,s.levelId=t,s.uri=c,s.startTime=0,s.duration=n,s.startByte=0,s.endByte=r;var u=new ot(et.MP4);return u.startByte=0,u.endByte=Math.floor(.02*s.totalByte),u.uri=new re.a(e),u.fragIdx=s.idx,s.header=u,u.levelId=t,Object(Q.e)()&&u.uri.setScheme("https"),o.fragments.push(s),o}}]),n}(Fs),Oc=n(355),Rc=n(354),Lc=n(356),Cc=n(405);function Mc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Nc=function(e){l()(n,e);var t=Mc(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).variantAudioMode=!1,e.$ARTEFACT_ACTION=j.a.DEPOSIT_RENDERER,e.highResTimer=new Cc.a((function(){return e.checkHighResTimeupdate_()})),e}return s()(n,[{key:"appendWindowStart",get:function(){return this.appendWindowStart_},set:function(e){this.appendWindowStart_=e}},{key:"appendWindowEnd",get:function(){return this.appendWindowEnd_},set:function(e){this.appendWindowEnd_=e}},{key:"hasOperateBufferData",get:function(){return!1}},{key:"currentTimeRange",get:function(){var e=null,t=this.buffered,n=this.currentTime;if(t)for(var r=0;r<t.length;r++){var i=t.start(r),a=t.end(r);if(i<=n&&n<a){e={start:i,end:a};break}}return e}},{key:"drmInfo",set:function(e){}},{key:"bufferInfo",value:function(e,t){return{len:0,start:0,end:0}}},{key:"takeoverMediaControl",value:function(){}},{key:"releasedMediaControl",value:function(){}},{key:"$withinBuffer",value:function(e,t,n){}},{key:"$clearOperateBuffers",value:function(e){arguments.length>1&&undefined}},{key:"$flushBuffer",value:function(e,t,n){}},{key:"$drainBuffer",value:function(e){b()(_()(n.prototype),"$drainBuffer",this).call(this,e),this.hasOperateBufferData&&this.$clearOperateBuffers(null,!!e.keepInit),!1!==e.flushMedia&&this.$flushBuffer()}},{key:"checkHighResTimeupdate_",value:function(){}}]),n}(V.a),Bc=n(577),Fc=(n(211),n(212),new Uint8Array([10,178,2,8,3,18,16,153,75,133,49,202,175,120,35,184,85,5,60,251,56,41,180,24,229,132,139,214,5,34,142,2,48,130,1,10,2,130,1,1,0,173,188,172,242,201,171,92,176,7,198,96,157,222,119,76,120,208,81,120,242,46,147,239,190,102,21,104,43,121,143,181,56,91,166,179,185,0,138,222,127,154,201,112,251,199,108,202,125,228,135,188,121,44,55,129,188,241,126,7,90,62,216,149,122,126,232,110,19,251,191,22,226,176,108,175,48,185,240,170,148,33,36,225,222,52,104,28,221,88,239,200,49,155,234,19,145,193,19,98,116,67,72,49,81,190,53,255,164,75,74,167,161,89,105,104,50,95,220,200,174,74,181,115,30,192,243,65,185,252,142,121,46,140,174,68,112,140,49,84,28,135,128,110,67,38,124,124,194,110,179,55,38,19,157,83,28,107,90,30,210,73,121,247,112,12,62,217,231,167,5,178,203,137,211,8,41,166,110,167,215,242,176,236,185,105,4,25,126,221,164,251,240,192,186,97,41,102,71,179,187,181,8,10,122,216,138,154,82,128,218,191,190,240,32,167,166,250,197,176,31,85,129,128,135,254,132,143,11,188,118,55,120,184,133,167,96,84,37,32,232,218,215,244,216,83,199,86,68,153,167,87,250,185,192,143,5,2,3,1,0,1,58,5,105,113,105,121,105,18,128,3,108,85,242,237,185,42,124,70,211,70,134,94,29,126,167,210,209,177,68,127,56,85,77,151,232,211,106,176,194,114,231,35,138,254,226,24,103,180,63,213,255,88,78,161,119,227,11,232,63,81,58,217,15,10,248,108,248,9,224,110,34,66,36,242,70,85,25,202,189,138,14,172,160,0,225,62,55,122,142,182,214,253,43,147,147,172,193,45,41,185,82,136,1,108,126,93,154,60,131,2,115,138,221,67,238,227,92,138,215,173,249,188,229,18,241,188,29,154,33,119,37,124,152,48,13,139,88,101,233,120,14,106,200,154,192,69,245,11,234,109,144,181,128,189,62,127,37,163,117,190,137,153,101,44,51,198,56,56,241,141,166,196,99,89,247,121,28,93,172,201,215,51,241,219,174,29,213,241,48,23,46,83,167,192,43,87,89,12,65,41,112,220,202,12,81,32,254,158,20,39,242,219,178,209,60,199,40,41,253,166,234,0,49,130,127,231,122,26,210,230,238,26,166,206,219,252,89,107,158,29,26,220,58,93,94,87,252,97,37,66,128,184,119,48,176,82,32,96,26,4,144,167,56,8,99,44,129,38,4,251,10,80,13,212,186,8,249,178,81,164,255,10,183,199,177,181,141,126,254,100,119,73,224,216,201,222,242,154,32,224,182,205,245,104,142,137,142,103,93,162,83,65,239,129,35,70,120,115,163,162,49,132,80,43,96,189,121,132,177,206,43,162,19,129,194,34,25,51,148,131,63,139,91,109,98,55,45,182,139,28,53,232,226,68,232,251,89,36,230,82,228,65,33,135,221,199,47,45,97,230,2,4,169,22,186,228,190,216,95,132,241,171,220,132,144,233,72,186,244,205,60,38,90,246]));function Uc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vc="<<EME>>",Hc=function(){function e(){a()(this,e),this.sessions=[],this.licenseRequests=[],this.drmInfo=null,this.eventManager_=new Z.a}var t,n,i,o;return s()(e,[{key:"setup",value:function(e,t,n){this.runtime_=e,this.mediaElem_=t,this.sessions=[],this.licenseRequests=[],n&&this.setDrmInfo(n),this.eventManager_.on(t,"encrypted",this.onEncrypted_.bind(this))}},{key:"destroy",value:function(){this.eventManager_.removeAll(),this.reset(),this.runtime_=null,this.mediaElem_=null,this.licenseRequests=null,this.sessions=null,this.drmInfo=null}},{key:"reset",value:function(){var e=this.sessions,t=this.licenseRequests,n=this.eventManager_;this.mediaElem_;if(Array.isArray(e)&&e.length>0){for(var r=function(t){var r=e[t].session,i=r.sessionId;n.off(r,"message"),n.off(r,"keystatuseschange"),r.close().then((function(){}))["catch"]((function(){P.a.warn("".concat(Vc," session ").concat(i," closed failed"))}))},i=0;i<e.length;i++)r(i);e.splice(0,e.length)}Array.isArray(t)&&t.length>0&&t.splice(0,t.length)}},{key:"setDrmInfo",value:function(e){this.drmInfo=e?{keySystem:e.keySystem,licenseServerUri:e.keySystemServer,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null}:null}},{key:"onEncrypted_",value:(o=I()(E.a.mark((function c(e){var t,n,r,i,a;return E.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=this.mediaElem_,n=this.runtime_,r=new Uint8Array(e.initData),i=e.initDataType,P.a.log("".concat(Vc," Encrypted initDataType/initData(").concat(i,"/").concat(r.length,")")),t.mediaKeys){o.next=45;break}return o.prev=5,o.next=8,this.queryMediaKeys_();case 8:a=o.sent,o.next=24;break;case 11:if(o.prev=11,o.t0=o["catch"](5),this.queryMediaKeysPromise_=null,0!==o.t0){o.next=18;break}return o.abrupt("return",n.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE)));case 18:if(1!==o.t0){o.next=22;break}return o.abrupt("return",n.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_FAILED_TO_CREATE_CDM)));case 22:return P.a.error("".concat(Vc," queryMediaKeys unknown error: ").concat(Object(Q.i)(o.t0)?o.t0.message:o.t0||"unknown")),o.abrupt("return",n.throwError(new ye.a(ye.a.severity.CRITICAL,ye.a.category.DRM,ke.a.DRM_NO_RECOGNIZED_ERROR)));case 24:return o.prev=24,o.next=27,this.setMediaKeys_(t,a);case 27:if(t.mediaKeys){o.next=30;break}throw this.setMediaKeysPromise_=null,"video.mediaKeys can't access";case 30:o.next=36;break;case 32:return o.prev=32,o.t1=o["catch"](24),P.a.error("".concat(Vc," setMediaKeys error: ").concat(Object(Q.i)(o.t1)?o.t1.message:o.t1||"unknown")),o.abrupt("return",n.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_FAILED_TO_ATTACH_TO_VIDEO)));case 36:return o.prev=36,o.next=39,this.setServerCertificate_(a);case 39:o.next=45;break;case 41:return o.prev=41,o.t2=o["catch"](36),P.a.warn("".concat(Vc," setServerCertificate fail: ").concat(o.t2.message)),o.abrupt("return",n.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_INVALID_SERVER_CERTIFICATE)));case 45:return o.prev=45,o.next=48,this.createSession_(t,i,r);case 48:o.next=54;break;case 50:o.prev=50,o.t3=o["catch"](45),P.a.error("".concat(Vc," createSession unknown fail: ").concat(Object(Q.i)(o.t3)?o.t3.message:o.t3||"unknown")),n.throwError(new ye.a(ye.a.severity.CRITICAL,ye.a.category.DRM,ke.a.DRM_NO_RECOGNIZED_ERROR));case 54:case"end":return o.stop()}}),c,this,[[5,11],[24,32],[36,41],[45,50]])}))),function(e){return o.apply(this,arguments)})},{key:"setServerCertificate_",value:(i=I()(E.a.mark((function u(e){var t,n,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((t=this.drmInfo).keySystem===r.WIDEVINE&&(t.serverCertificate=Fc),!t.serverCertificate||!t.serverCertificate.length){a.next=9;break}return n=!1,this.setServerCertificatePromise_||(this.setServerCertificatePromise_=e.setServerCertificate(t.serverCertificate),n=!0),a.next=7,this.setServerCertificatePromise_;case 7:i=a.sent,n&&(i?P.a.log("".concat(Vc," The server certificate has been set by the key system(").concat(t.keySystem,").")):P.a.warn("".concat(Vc," The server certificate has been ignored because it's not supported by the key system(").concat(t.keySystem,").")));case 9:case"end":return a.stop()}}),u,this)}))),function(e){return i.apply(this,arguments)})},{key:"queryMediaKeys_",value:function(){var e=this.drmInfo;return this.queryMediaKeysPromise_||(this.queryMediaKeysPromise_=new Promise((function(t,n){var r=[],i='audio/mp4; codecs="mp4a.40.5"',a='video/mp4; codecs="avc1.64001f"';"undefined"==typeof MediaKeySystemAccess.prototype.getConfiguration?(P.a.warn("Detected obsolete navigator.requestMediaKeySystem options style."),r=[{initDataType:"cenc",distinctiveIdentifier:"optional",persistentState:"optional",videoType:a,audioType:i}]):r=[{initDataTypes:["cenc"],distinctiveIdentifier:"optional",persistentState:"optional",videoCapabilities:[{contentType:a}],audioCapabilities:[{contentType:i}]}],navigator.requestMediaKeySystemAccess(e.keySystem,r).then((function(e){e.getConfiguration();return e.createMediaKeys()}),(function(e){P.a.error("".concat(Vc," requestMediaKeySystemAccess fail: ").concat(Object(Q.i)(e)?e.message:e||"unknown")),n(0)})).then((function(e){t(e)}),(function(e){P.a.error("".concat(Vc," createMediaKeys fail: ").concat(Object(Q.i)(e)?e.message:e||"unknown")),n(1)}))}))),this.queryMediaKeysPromise_}},{key:"setMediaKeys_",value:(n=I()(E.a.mark((function d(e,t){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setMediaKeysPromise_||(this.setMediaKeysPromise_=e.setMediaKeys(t)),n.abrupt("return",this.setMediaKeysPromise_);case 2:case"end":return n.stop()}}),d,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"createSession_",value:(t=I()(E.a.mark((function l(e,t,n){var r,i,a,o,s;return E.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:r=this.runtime_,i=this.sessions,a=this.eventManager_,o=0;case 2:if(!(o<i.length)){c.next=8;break}if(!Pc(n,i[o].initData)){c.next=5;break}return c.abrupt("return",P.a.log("".concat(Vc," Ignoring duplicate init data.")));case 5:++o,c.next=2;break;case 8:c.prev=8,s=e.mediaKeys.createSession(),c.next=16;break;case 12:return c.prev=12,c.t0=c["catch"](8),P.a.error("".concat(Vc," ").concat(c.t0.message)),c.abrupt("return",r.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_FAILED_TO_CREATE_SESSION)));case 16:return i.push({initData:n,session:s,loaded:!1,oldExpiration:Infinity}),a.on(s,"message",this.onMediaKeySessionMessage_.bind(this)).on(s,"keystatuseschange",this.onMediaKeySessionStatusChange_.bind(this)),c.next=20,s.generateRequest(t,n)["catch"]((function(t){P.a.error("".concat(Vc," Session.generateRequest fail: ").concat(Object(Q.i)(t)?t.message:t||"unknown",", mediaKeys is ").concat(e?B()(e.mediaKeys):"placeholder")),r.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST))}));case 20:case"end":return c.stop()}}),l,this,[[8,12]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"onMediaKeySessionMessage_",value:function(e){var t=this.runtime_,n=this.drmInfo,i=this.licenseRequests,a=this.mediaElem_,o=t.conf,s=e.target,c=e.message,u=e.messageType,d=n.licenseServerUri;if(!d)return t.throwError(new ye.a(ye.a.severity.CRITICAL,ye.a.category.DRM,ke.a.DRM_NO_LICENSE_SERVER_GIVEN));P.a.log("".concat(Vc," Sending license request for session ").concat(s.sessionId," of type ").concat(u,": ").concat(d));var l=Object(te.d)([d],Object(J.a)(Object(te.b)(),o.drm.retryParameters));l.method="POST",l.body=c,l.callbacks=Object(J.a)(l.callbacks,{onSuccess:function(e){return I()(E.a.mark((function n(){var r,i,o,c;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.data,i=e.status,!((o=r)&&o.byteLength>0)){n.next=16;break}return c=new Uint8Array(o),P.a.log("".concat(Vc," License got, updating session ").concat(s.sessionId)),n.prev=5,n.next=8,s.update(c);case 8:n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](5),P.a.error("".concat(Vc," update() failed, ").concat(n.t0.message,", video.mediaKeys is ").concat(a?B()(a.mediaKeys):"placeholder",", ").concat(c,",")),t.throwError(new ye.a(ye.a.severity.RECOVERABLE,ye.a.category.DRM,ke.a.DRM_LICENSE_RESPONSE_REJECTED,n.t0.message));case 14:n.next=18;break;case 16:P.a.warn("".concat(Vc," License server status: ").concat(i,", data: ").concat(o?o.byteLength:"NULL")),t.throwError(new ye.a(ye.a.severity.CRITICAL,ye.a.category.DRM,204===i?ke.a.DRM_SERVER_REJECT_BY_LICENSE_SDK:ke.a.DRM_NO_LICENSE_SERVER_RESPONSE));case 18:case"end":return n.stop()}}),n,null,[[5,10]])})))()},onError:function(){t.throwError(new ye.a(ye.a.severity.CRITICAL,ye.a.category.DRM,ke.a.DRM_LICENSE_REQUEST_ERROR))},onTimeout:function(e,n){t.throwError(new ye.a(ye.a.severity.CRITICAL,ye.a.category.DRM,ke.a.DRM_LICENSE_REQUEST_TIMEOUT))},onAbort:function(){},onComplete:function(){}}),n.keySystem!==r.PLAYREADY&&n.keySystem!==r.PLAYREADY_CC||this.unpackPlayReadyRequest_(l);var f=te.e.request(ne.a.LICENSE,l);i.push(f)}},{key:"unpackPlayReadyRequest_",value:function(e){var t=Me(e.body,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(new DOMParser).parseFromString(t,"application/xml"),r=n.getElementsByTagName("HttpHeader"),i=0;i<r.length;++i){var a=r[i].querySelector("name").textContent,o=r[i].querySelector("value").textContent;e.headers instanceof Headers?e.headers.append(a,o):e.headers[a]=o}var s=n.querySelector("Challenge");e.body=Tc(s.textContent).buffer}else{var c="Content-Type",u="text/xml; charset=utf-8";e.headers instanceof Headers?e.headers.append(c,u):e.headers[c]=u}}},{key:"onMediaKeySessionStatusChange_",value:function(e){var t=e.target,n=t.keyStatuses;if(this.drmInfo.keySystem==r.PLAYREADY)this.onSessionStatusChangePlayready_(n,t.sessionId);else{var i,a=Uc(n.entries());try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o[0],c=o[1],u=Le(Sc(new Uint8Array(s)));P.a.log("".concat(Vc," SessionId=").concat(t.sessionId," keyId=").concat(u," status=").concat(c))}}catch(d){a.e(d)}finally{a.f()}}}},{key:"onSessionStatusChangePlayready_",value:function(e,t){var n=this;e.forEach((function(e,i){if("string"==typeof i){var a=i;i=e,e=a}if(n.drmInfo.keySystem==r.PLAYREADY&&16==i.byteLength){var o=new DataView(i),s=o.getUint32(0,!0),c=o.getUint16(4,!0),u=o.getUint16(6,!0);o.setUint32(0,s,!1),o.setUint16(4,c,!1),o.setUint16(6,u,!1)}n.drmInfo.keySystem==r.PLAYREADY&&"status-pending"==e&&(e="usable");var d=Le(Sc(new Uint8Array(i)));P.a.log("SessionId="+t+" keyId="+d+" status="+e)}))}}]),e}(),Wc=function(){function e(){var t=this;a()(this,e),this.checkFPSTimer_=new G.a((function(){return t.checkFPSInterval_()})),this.shouldReport_=!1,this.fpsFrequency_=1,this.decodeFrameStuckCount_=0}return s()(e,[{key:"playbackQuality",get:function(){var e=this.mediaElem_,t=0,n=0,r=0;if("function"==typeof e.getVideoPlaybackQuality){var i=e.getVideoPlaybackQuality();n=i.totalVideoFrames,r=i.droppedVideoFrames,t=n}else{var a=e.webkitDecodedFrameCount,o=e.webkitDroppedFrameCount;void 0!==a&&void 0!==o&&(o=o,t=a=a)}return{totalVideoFrames:t,decodedVideoFrames:n,droppedVideoFrames:r}}},{key:"setup",value:function(e,t,n,r){this.runtime_=e,this.mediaElem_=n,this.stream_=t,this.dynamicStuckMonitorPeriod_=Object(Q.g)(r)?r:e.conf.fpsStuckMonitoringPeriod}},{key:"onMSEAttaching",value:function(){this.checkFPSTimer_.scheduleRepeated(this.fpsFrequency_)}},{key:"startReportFPS",value:function(){this.shouldReport_=!0}},{key:"stopReportFPS",value:function(){this.shouldReport_=!1}},{key:"checkAndFixStuck_",value:function(e){var t=this.runtime_,n=this.mediaElem_,r=this.stream_,i=document.hidden;"boolean"==typeof i&&!i&&!n.paused&&4===n.readyState&&r.mediaBuffer.len>1&&(r.levelSwitching?this.decodeFrameStuckCount_=0:this.decodeFrameStuckCount_>this.dynamicStuckMonitorPeriod_?(t.ctx.emit(ce.a.FPS_STUCK),this.decodeFrameStuckCount_=0,t.ctx.recoverMedia()):0===e?this.decodeFrameStuckCount_++:this.decodeFrameStuckCount_=0)}},{key:"checkFPS_",value:function(e,t){var n=this.runtime_,r=performance.now();if(e){if(this.lastCheckFPSTime_){this.lastCheckFPSTime_;var i=t-this.lastDroppedFrames_,a=e-this.lastDecodedFrames_;this.shouldReport_&&n.ctx.emit(ce.a.FPS_REPORT,{currentDropped:i,currentDecoded:a}),this.checkAndFixStuck_(a)}this.lastCheckFPSTime_=r,this.lastDroppedFrames_=t,this.lastDecodedFrames_=e}}},{key:"checkFPSInterval_",value:function(){if(this.mediaElem_){var e=this.playbackQuality,t=e.totalVideoFrames,n=e.droppedVideoFrames;this.checkFPS_(t,n)}}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.runtime_=null,this.stream_=null,this.shouldReport_=!1}},{key:"reset",value:function(){this.checkFPSTimer_&&this.checkFPSTimer_.cancel(),this.lastCheckFPSTime_=null,this.lastDroppedFrames_=null,this.lastDecodedFrames_=null}}]),e}();function zc(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;var n=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(n=.5);for(var r=0;r<e.length;r++)if(e.start(r)>t&&(0==r||e.end(r-1)-t<=n)&&r>0)return r;return null}var Yc=function(){function e(t,n,r){a()(this,e),this.stalled=null,this.stallReported=!1,this.nudgeRetry=0,this.plugin_=t,this.runtime_=n,this.mediaElem_=r,this.stalledGap_=1e3*n.conf.highBufferThreshold}return s()(e,[{key:"destroy",value:function(){this.reset(),this.mediaElem_=null}},{key:"reset",value:function(){this.stalled=null,this.nudgeRetry=0}},{key:"onMediaIdle",value:function(e){this.checkBuffer_(e)}},{key:"checkBuffer_",value:function(e){var t=this.runtime_,n=this.mediaElem_,r=this.plugin_,i=t.conf,a=n.currentTime,o=e.playHeadTime,s=this.mediaElem_;if(!t.error&&s&&r.sourceBufferManager&&!r.sourceBufferManager.bufferOperating){var c=r.sourceBufferManager,u=c.bufferInfo(a);if(c.hasVideoBuffer||c.hasAudioBuffer){var d=zc(n.buffered,a);if(null===d)u.len<i.bufferExpectLength*Math.max(1,n.playbackRate)&&r.emit(ce.a.BUFFER_EXPECTING,u);else[{type:"video",buffered:c.videoBuffered},{type:"audio",buffered:c.audioBuffered}].forEach((function(e,t,n){var r=e.type,i=e.buffered,o=zc(i,a);if(Object(Q.g)(o)&&o>0){var s={start:i.start(o-1),end:i.end(o-1)},c={start:i.start(o),end:i.end(o)};P.a.warn("met ".concat(r," gap, currentTime: ").concat(a,", gapIndex: ").concat(o,", gapRange: ").concat(s.end,"-").concat(c.start,", buffered length: ").concat(i.length))}}));if(u.len>=0){var l=s.readyState,f=!(s.paused&&l>1||s.ended),h=performance.now();if(0===u.len&&n.seeking&&(this.stalled=null),l>=3&&this.resetStalledGap(),a!==o)this.stallReported&&(P.a.warn("video not stuck anymore @".concat(a,", after ").concat(Math.round((h-this.stalled)/1e3),"s")),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(f){var p=this.stalled?h-this.stalled:0;if(!this.stalled)return void(this.stalled=h);if(p>=1e3&&(this.stallReported||(this.stallReported=!0,P.a.warn("video stalling @".concat(a," due to low buffer")))),!c.updating){var _=c.bufferInfo(a);this.tryFixBufferStall_(_,p,d)}}}}else r.emit(ce.a.BUFFER_EXPECTING,u)}}},{key:"tryFixBufferStall_",value:function(e,t,n){var r=this.runtime_,i=this.mediaElem_;if(r.ctx.allowJumpGapDirectly&&null!==n){var a=i.buffered.start(n)+.08;P.a.log("fix gap index ".concat(n,", jump to ").concat(a)),i.currentTime=a}else e.len>.5&&t>this.stalledGap_&&(this.stalled=null,this.tryNudgeBuffer_())}},{key:"tryNudgeBuffer_",value:function(){var e=this.runtime_,t=this.mediaElem_,n=t.currentTime,r=(this.nudgeRetry||0)+1;this.nudgeRetry=r;var i=e.conf;if(r<=i.nudgeMaxRetry){var a=n+r*i.nudgeOffset;P.a.log("adjust currentTime ".concat(n,"->").concat(a)),t.currentTime=a}else P.a.error("still stuck in high buffer @".concat(n," after ").concat(i.nudgeMaxRetry)),e.throwError(new ye.a(me.a.RECOVERABLE,be.a.RENDERER,ke.a.MEDIA_HIGH_BUFFER))}},{key:"resetStalledGap",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=1e3*this.runtime_.conf.highBufferThreshold;this.stalledGap_=e?t+1e3:t}}]),e}();function Gc(e,t,n){var r=[];if(t)for(var i=0;i<t.length;i++)r.push({start:t.start(i),end:t.end(i)});return function(e,t,n){var r,i,a,o,s,c=[];for(e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end})),s=0;s<e.length;s++){var u=c.length;if(u){var d=c[u-1].end;e[s].start-d<n?e[s].end>d&&(c[u-1].end=e[s].end):c.push(e[s])}else c.push(e[s])}for(s=0,r=0,i=a=t;s<c.length;s++){var l=c[s].start,f=c[s].end;if(t+n>=l&&t<f)i=l,r=(a=f)-t;else if(t+n<l){o=l;break}}return{len:r,start:i,end:a,nextStart:o}}(r,e,n)}var Qc=function(){function e(t,n,r){var i=this;a()(this,e),this.eventManager_=new Z.a,this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAddBufQueue_=[],this.audioAddBufQueue_=[],this.videoDelBufQueue_=[],this.audioDelBufQueue_=[],this.appendTimer_=new G.a((function(){return i.checkAppend_()})),this.audioAppendStarted_=!1,this.videoAppendStarted_=!1,this.appendWindowEnd=Number.POSITIVE_INFINITY,this.appendWindowStart=0,this.plugin_=t,this.runtime_=n,this.mediaElem_=r}return s()(e,[{key:"updating",get:function(){return this.audioBufferUpdating||this.videoBufferUpdating||this.videoAppendStarted_||this.audioAppendStarted_}},{key:"videoBufferUpdating",get:function(){var e=this.videoSourceBuffer;return!!e&&e.updating}},{key:"audioBufferUpdating",get:function(){var e=this.audioSourceBuffer;return!!e&&e.updating}},{key:"bufferOperating",get:function(){return this.hasOperateBufferData||this.updating}},{key:"sourceBuffersCreated",get:function(){return this.sourceBuffersCreated_}},{key:"hasVideoBuffer",get:function(){return!!this.videoSourceBuffer}},{key:"hasAudioBuffer",get:function(){return!!this.audioSourceBuffer}},{key:"videoBuffered",get:function(){var e=null,t=this.videoSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioBuffered",get:function(){var e=null,t=this.audioSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioAppendStart",get:function(){if(Array.isArray(this.audioAddBufQueue_)){var e=this.audioAddBufQueue_[0];if(e.segment instanceof $.a)return e.segment.startTime}return null}},{key:"videoAppendStart",get:function(){if(Array.isArray(this.videoAddBufQueue_)){var e=this.videoAddBufQueue_[0];if(e.segment instanceof $.a)return e.segment.startTime}return null}},{key:"hasOperateBufferData",get:function(){var e=!1;return(this.videoAddBufQueue_&&this.videoAddBufQueue_.length>0||this.audioAddBufQueue_&&this.audioAddBufQueue_.length>0||this.videoDelBufQueue_&&this.videoDelBufQueue_.length>0||this.audioDelBufQueue_&&this.audioDelBufQueue_.length>0)&&(e=!0),e}},{key:"empty",get:function(){var e=this.videoSourceBuffer,t=this.audioSourceBuffer;return(!e||e&&this.existInMSE_(e)&&0===e.buffered.length)&&(!t||t&&this.existInMSE_(t)&&0===t.buffered.length)}},{key:"reset",value:function(){[this.videoAddBufQueue_,this.videoDelBufQueue_,this.audioAddBufQueue_,this.audioDelBufQueue_].forEach((function(e){e.length>0&&e.splice(0,e.length)})),this.unbind_(),this.appendTimer_.cancel(),this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAppendStarted_=this.audioAppendStarted_=!1,this.appendWindowStart=0,this.appendWindowEnd=Number.POSITIVE_INFINITY}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.appendTimer_=null,this.videoAddBufQueue_=this.audioAddBufQueue_=this.videoDelBufQueue_=this.audioDelBufQueue_=null,this.onUpdate_=this.onUpdateStart_=this.onUpdateEnd_=this.onError_=this.onAbort_=null}},{key:"abort",value:function(){var e=this.plugin_,t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=this.videoBufferUpdating,i=this.audioBufferUpdating,a=e.mse;if(a&&"open"===a.readyState&&Object(Q.b)(a.sourceBuffers)&&a.sourceBuffers.length>0){if(r&&this.existInMSE_(t))try{t.abort()}catch(o){P.a.warn("video source buffer abort error, ".concat(o?o.message||o:""))}if(i&&this.existInMSE_(n))try{n.abort()}catch(o){P.a.warn("audio source buffer abort error, ".concat(o?o.message||o:""))}}}},{key:"withinBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=this.audioSourceBuffer,i=this.videoSourceBuffer,a=[],o=[];return this.existInMSE_(r)&&a.push(r),this.existInMSE_(i)&&a.push(i),a.forEach((function(r){for(var i=r.buffered,a=0;a<i.length;a++)if(e>=i.start(a)+t&&e<i.end(a)-n){o.push(!0);break}})),o.length===a.length}},{key:"bufferInfo",value:function(e,t){var n,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.runtime_.conf.maxBufferHole;switch(t){case"video":var i=this.videoSourceBuffer;n=this.existInMSE_(i)?i.buffered:null;break;case"audio":var a=this.audioSourceBuffer;n=this.existInMSE_(a)?a.buffered:null;break;default:this.mediaElem_&&(n=this.mediaElem_.buffered)}return Gc(e,n,r)}},{key:"clearOperateBuffers",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n="video"!==e,r="audio"!==e;[{clear:n,bufQueue:this.audioAddBufQueue_},{clear:r,bufQueue:this.videoAddBufQueue_}].forEach((function(e){var n=e.clear,r=e.bufQueue;if(n&&r.length>0)if(t){var i=r.filter((function(e){return e.segment instanceof K.a}));r.splice(0,r.length),i.forEach((function(e){return r.push(e)}))}else r.splice(0,r.length)}))}},{key:"onMSEDetaching",value:function(){this.abort()}},{key:"onBufferCreated",value:function(e){this.unbind_(),this.sourceBuffersCreated_=!0,this.existInMSE_(e.videoSourceBuffer)&&(this.videoSourceBuffer=e.videoSourceBuffer),this.existInMSE_(e.audioSourceBuffer)&&(this.audioSourceBuffer=e.audioSourceBuffer),this.bind_(),this.checkAppend_()}},{key:"onBufferAppending",value:function(e){for(var t=this,n=function(n){var r=e[n],i=r.type;r.bytesArray.forEach((function(e,n){(1===i?t.videoAddBufQueue_:t.audioAddBufQueue_).push({bufferSource:e,index:n,segment:r})}))},r=0;r<e.length;r++)n(r);(this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0)&&this.appending_()}},{key:"onBufferFlushing",value:function(e,t,n){var r=this.plugin_,i=this.empty,a=this.videoSourceBuffer,o=this.audioSourceBuffer;i||"closed"===r.mse.readyState?setTimeout((function(){r.emit(ce.a.BUFFER_FLUSHED)}),10):(!a||n&&"video"!==n||this.videoDelBufQueue_.push({start:e,end:t}),!o||n&&"audio"!==n||this.audioDelBufQueue_.push({start:e,end:t}),this.flushing_())}},{key:"existInMSE_",value:function(e){var t=this.plugin_,n=!1;if(!t.mse||!e)return n;var r=t.mse.sourceBuffers;if(Object(Q.b)(r))for(var i=0;i<r.length;i++)if(r[i]===e){n=!0;break}return n}},{key:"intersectBuffer_",value:function(e,t,n){var r=!1;if(e)for(var i,a,o=e.buffered,s=0;s<o.length;s++)if(i=o.start(s),a=o.end(s),!(n<=i||t>=a)){r=!0;break}return r}},{key:"appending_",value:function(){var e=this,t=this.plugin_,n=this.runtime_,r=this.mediaElem_,i=this.videoSourceBuffer,a=this.audioSourceBuffer;if(!(n.error||r&&r.error))if("closed"!==t.mse.readyState&&(i||a)){t.emit(ce.a.BUFFER_APPENDING);for(var o=[{contentType:"video",sb:i,adds:this.videoAddBufQueue_},{contentType:"audio",sb:a,adds:this.audioAddBufQueue_}],s=0;s<o.length;s++){var c=o[s],u=c.sb,d=!1;if(c.adds.length>0&&u&&!u.updating)if("break"===function(){var t=c.adds.shift(),i=t.bufferSource,a=t.index,o=t.segment,s=o.byteLength,l=c.contentType;"video"===l?e.videoAppendStarted_=!0:"audio"===l&&(e.audioAppendStarted_=!0);try{var f=1===o.type?"video":"audio";if(o instanceof $.a){var h=o.startTime,p=o.duration,_=h+p,v=1===o.bytesArray.length?"".concat(f):"".concat(a+1,"/").concat(o.bytesArray.length," pieces of ").concat(f);P.a.log("append ".concat(v," buffer, start/end/duration(").concat(h.toFixed(3),"/").concat(_.toFixed(3),"/").concat(p.toFixed(3),")"))}else o instanceof K.a&&P.a.log("append ".concat(f," initSegment"));u.bufferedLength_=u.buffered.length,u.updateType_="+",u.appendBuffer(i)}catch(g){P.a.warn("".concat(l," sourceBuffer, append/currentTime/readyState(").concat(s,"/").concat(e.mediaElem_.currentTime,"/").concat(r.readyState,"): ").concat(g.stack||g.message)),d=!0,setTimeout((function(){22===g.code?n.throwError(new ye.a(me.a.RECOVERABLE,be.a.RENDERER,ke.a.MEDIA_QUOTA_EXCEEDED,l)):n.throwError(new ye.a(me.a.CRITICAL,be.a.RENDERER,ke.a.MEDIA_SOURCE_OPERATION_THREW,l,g))}),0)}if(d)return"break"}())break}}else this.appendTimer_.cancel(),this.appendTimer_.schedule(.1)}},{key:"flushing_",value:function(){var e=this,t=this.plugin_,n=this.audioSourceBuffer,r=this.videoSourceBuffer,i=t.mse.readyState,a=!1;return[n,r].filter((function(t){return e.existInMSE_(t)})).forEach((function(t){if("closed"===i||t.updating)"open"!==i&&P.a.warn("flushing sb.updating: ".concat(t.updating,", mediaSource state: ").concat(i));else{for(var r,o=t===n?"audio":"video",s=t===n?e.audioDelBufQueue_:e.videoDelBufQueue_;s.length&&(r=s.shift(),!e.intersectBuffer_(t,r.start,r.end));)r=null;r&&(r.end===Number.POSITIVE_INFINITY&&(r.end=t.buffered.end(t.buffered.length-1)),t.bufferedLength_=t.buffered.length,t.updateType_="-",a=!0,P.a.log("flushing ".concat(o," [").concat(r.start,",").concat(r.end,"] of ").concat(t.buffered.length," ranges, pos:").concat(e.mediaElem_.currentTime)),t.remove(r.start,r.end))}})),a}},{key:"bind_",value:function(){var e=this;[{contentType:"video",sourceBuffer:this.videoSourceBuffer},{contentType:"audio",sourceBuffer:this.audioSourceBuffer}].filter((function(t){return e.existInMSE_(t.sourceBuffer)})).forEach((function(t){var n=t.contentType,r=t.sourceBuffer;e.eventManager_.on(r,"updatestart",e.onUpdateStart_.bind(e)),e.eventManager_.on(r,"update",e.onUpdate_.bind(e)),e.eventManager_.on(r,"updateend",e.onUpdateEnd_.bind(e)),e.eventManager_.on(r,"abort",e.onAbort_.bind(e)),e.eventManager_.on(r,"error",e.onError_.bind(e,n))}))}},{key:"unbind_",value:function(){this.eventManager_.removeAll()}},{key:"onUpdateStart_",value:function(e){var t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=undefined,i=e.target;t&&i===t?r="video":n&&i===n&&(r="audio"),P.a.log("".concat(r," source buffer update start"))}},{key:"onUpdate_",value:function(e){var t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=(undefined,e.target);t&&r===t?("video",this.videoAppendStarted_=!1):n&&r===n&&("audio",this.audioAppendStarted_=!1)}},{key:"onUpdateEnd_",value:function(e){var t,n=this.plugin_,r=this.videoSourceBuffer,i=this.audioSourceBuffer,a=undefined,o=e.target,s=o.bufferedLength_;if(r&&o===r?t="video":i&&o===i&&(t="audio"),"+"===o.updateType_?a="append":"-"===o.updateType_&&(a="remove"),n.emit(ce.a.BUFFER_UPDATED,{target:o,sourceBufferType:t,operateType:a,previousBufferedLength:s,vsb:r,asb:i}),this.videoDelBufQueue_.length>0||this.audioDelBufQueue_.length>0){if(this.flushing_())return}else"-"===o.updateType_&&(o.updateType_="",n.emit(ce.a.BUFFER_FLUSHED));this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0?this.appending_():"+"===o.updateType_&&(o.updateType_="",n.emit(ce.a.BUFFER_APPENDED)),P.a.log("".concat(t," source buffer update end")+"".concat(""))}},{key:"onAbort_",value:function(){this.audioAppendStarted_=this.audioAppendStarted_=!1,P.a.warn("source buffer met abort.'")}},{key:"onError_",value:function(e,t){var n=this.runtime_,r=this.appendTimer_,i=this.mediaElem_,a=t.timeStamp,o=t.target,s=t.currentTarget,c=t.srcElement,u=i.error||{},d=u.code,l=u.message,f=s||o||c;r.cancel(),this.audioAppendStarted_=this.videoAppendStarted_=!1,P.a.error("".concat(e," source buffer met error, timeStamp(").concat(a,"), mode(").concat(f.mode,"), mediaError(").concat(d,"/").concat(l,")")),n.throwError(new ye.a(me.a.RECOVERABLE,be.a.RENDERER,ke.a.MEDIA_SOURCE_OPERATION_FAILED))}},{key:"checkAppend_",value:function(){(this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0)&&(this.appending_(),this.appendTimer_.schedule(.1))}}]),e}();function Kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var $c=function(e){l()(n,e);var t=Kc(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).sourceBuffers_={},e.numberOfSourceBuffersExpected_=2,e}return s()(n,[{key:"mse",get:function(){return this.mse_}},{key:"isEndOfStream",get:function(){return"ended"===this.mse_.readyState}},{key:"setup",value:function(e,t){this.runtime_=e,this.mediaElem_=t,this.eventManager_=new Z.a,this.sourceBufferManager=new Qc(this,e,t),this.gapManager=new Yc(this,e,t)}},{key:"appendBuffer",value:function(e){for(var t=this.sourceBuffers_,n=!1,r=0;r<e.length;r++){var i=e[r],a=i.type;t[a]||(t[a]={created:!1,sourceBuffer:null,segment:i},n=!0)}n&&this.tryCreateSourceBuffers_(),this.sourceBufferManager.onBufferAppending(e)}},{key:"reset",value:function(){var e,t;null===(e=this.gapManager)||void 0===e||e.reset(),null===(t=this.sourceBufferManager)||void 0===t||t.reset(),this.detachMediaElement_(),this.sourceOpenEventTrulyFired_=!1,P.a.log("new MediaSource"),this.mse_=new MediaSource,this.attachMediaElement_()}},{key:"destroy",value:function(){this.detachMediaElement_(),this.sourceBufferManager&&(this.sourceBufferManager.destroy(),this.sourceBufferManager=null),this.eventManager_&&(this.eventManager_.destroy(),this.eventManager_=null),this.runtime_=null,this.mediaElem_=null,this.mse_=null,this.sourceOpenEventTrulyFired_=!1,this.sourceBuffers_={}}},{key:"endOfStream",value:function(){var e=this.mediaElem_,t=this.mse_,n="open"===t.readyState,r=e.readyState>=1;if(n&&r)return this.sourceBufferManager&&this.sourceBufferManager.updating&&this.abortSourceBuffer(),P.a.log("end of stream!"),t.endOfStream(),!0;var i="no reason";return n?r||(i="video readyState(".concat(t.readyState,") has no metadata")):i="mediaSource readyState is ".concat(t.readyState),P.a.log("end of stream, but ".concat(i)),!1}},{key:"attachMediaElement_",value:function(){this.bind_(),this.emit(ce.a.MSE_ATTACHING,this.mse_)}},{key:"detachMediaElement_",value:function(){this.emit(ce.a.MSE_DETACHING),this.removeSourceBuffers_(),this.unbind_(),this.emit(ce.a.MSE_DETACHED)}},{key:"tryCreateSourceBuffers_",value:function(){var e=this.runtime_,t=this.mse_,n=this.sourceBuffers_,r=this.sourceOpenEventTrulyFired_,i=this.numberOfSourceBuffersExpected_,a=Object.keys(n).length;if(t&&"open"===t.readyState&&r&&i===a){var o={};for(var s in n){var c=parseInt(s,10),u=n[c],d=u.segment,l=void 0;if(!u.created)try{var f="".concat(d.container,";codecs=").concat(d.codec);P.a.log("creating sourceBuffer(".concat(f,")")),l=t.addSourceBuffer("".concat(f)),u.created=!0,u.sourceBuffer=l}catch(h){return P.a.error("mse add source error ".concat(h.stack||h.message)),e.throwError(new ye.a(me.a.RECOVERABLE,be.a.RENDERER,ke.a.MEDIA_SOURCE_OPERATION_FAILED))}1===c?o.videoSourceBuffer=l:2===c&&(o.audioSourceBuffer=l)}this.emit(ce.a.BUFFER_CREATED,o),this.sourceBufferManager.onBufferCreated(o)}else P.a.log("mse readystate/sourceopen(".concat(t?t.readyState:null,"/").concat(r,"), expected/got(").concat(i,"/").concat(a,")"))}},{key:"removeSourceBuffers_",value:function(){var e=this.mse_,t=this.sourceBuffers_;if(t&&Object.keys(t).length>0){for(var n in t){var r=t[n],i=r.sourceBuffer;r.sourceBuffer=null;try{r.created&&i&&e.removeSourceBuffer(i)}catch(a){}}this.sourceBuffers_={}}}},{key:"bind_",value:function(){var e=this.mse_,t=this.eventManager_;t.on(e,"error",this._onError.bind(this)),t.on(e,"opened",this._onOpened.bind(this)),t.on(e,"closed",this._onClosed.bind(this)),t.on(e,"sourceopen",this._onSourceOpened.bind(this)),t.on(e,"sourceended",this._onSourceEnded.bind(this))}},{key:"unbind_",value:function(){var e=this.eventManager_;e&&e.removeAll()}},{key:"_onError",value:function(){}},{key:"_onOpened",value:function(){}},{key:"_onClosed",value:function(){this.mse_}},{key:"_onSourceOpened",value:function(){this.runtime_;var e=this.mse_,t=this.eventManager_,n=this.mediaElem_;e.sourceBuffers&&e.sourceBuffers.length>0?P.a.log("mse opened error, buffer length = ".concat(e.sourceBuffers.length)):(this.sourceOpenEventTrulyFired_=!0,P.a.log("media source opened"),this.emit(ce.a.MSE_ATTACHED,e),URL.revokeObjectURL(n.src),t.off(e,"sourceopen"),this.tryCreateSourceBuffers_())}},{key:"_onSourceEnded",value:function(){}},{key:"abortSourceBuffer",value:function(){this.sourceBufferManager&&this.sourceBufferManager.abort()}}]),n}(ee.EventEmitter),Zc=n(432);function Xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Jc=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},eu=function(e){l()(n,e);var t=Xc(n);function n(e){var r;return a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Zc,watch:[e.stream.mux?"mux":"loader","renderer","audio"]}))).$TAG="Media",r.playing_=!1,r.prevCurrentTime_=null,r.emePlugin_=new Hc,r.msePlugin_=new $c,r.fpsPlugin_=new Wc,r.idleTimer_=new G.a((function(){return r.checkIdle()})),r.tryDecodeBlobUrl_=!1,r}return s()(n,[{key:"currentTime",get:function(){return this.mediaElement?this.mediaElement.currentTime:0},set:function(e){var t=this.readyState,n=this.mediaElement;Object(Q.g)(e)&&n&&(this.playHeadTime=e,t>0&&(this.mediaElement.currentTime=e))}},{key:"duration",get:function(){return this.mediaElement?this.mediaElement.duration:NaN}},{key:"mediaElement",get:function(){return this.mediaElem_}},{key:"readyState",get:function(){return this.mediaElem_?this.mediaElem_.readyState:0}},{key:"paused",get:function(){return!this.mediaElem_||this.mediaElem_.paused}},{key:"ended",get:function(){return!this.mediaElem_||this.mediaElem_.ended}},{key:"loop",get:function(){return!!this.mediaElem_&&this.mediaElem_.loop},set:function(e){this.mediaElem_&&(this.mediaElem_.loop=e)}},{key:"playbackRate",get:function(){var e=1;return this.mediaElem_&&"number"!=typeof(e=this.mediaElem_.playbackRate)&&(e=1),e}},{key:"buffered",get:function(){return this.mediaElem_?this.mediaElem_.buffered:null}},{key:"error",get:function(){return this.mediaElem_?this.mediaElem_.error:null}},{key:"seeking",get:function(){return!!this.mediaElem_&&this.mediaElem_.seeking}},{key:"updating",get:function(){return!!this.s_&&this.s_.updating}},{key:"buffer",get:function(){var e=this.playHeadTime;return Object.assign(Object.assign({},this.bufferInfo(e)),{buffered:{video:this.bufferInfo(e,"video"),audio:this.bufferInfo(e,"audio")}})}},{key:"hasOperateBufferData",get:function(){return!!this.s_&&this.s_.hasOperateBufferData}},{key:"bufferOperating",get:function(){return!!this.s_&&this.s_.bufferOperating}},{key:"drmInfo",set:function(e){this.drmConfig_=e,this.emePlugin_.setDrmInfo(e)}},{key:"takeoverMediaControl",value:function(){P.a.log("".concat(this.LOG_TAG," takeover media control")),this.initMediaContainer_(),this.initPlugin_(),this.bind_(),this.reset()}},{key:"releasedMediaControl",value:function(){var e=this.LOG_TAG,t=this.mediaElem_,n=this.blobUrl_,r=this.idleTimer_;if(t){var i=t.src;P.a.log("".concat(e," release media control, ").concat(i,", ").concat(i===n)),r.cancel(),this.unbind_(),this.unloadPlugin_(),i===n&&(t.removeAttribute("src"),t.load()),this.blobUrl_=null,this.mediaElem_=null}}},{key:"initMediaContainer_",value:function(){var e=this.$krt.rootElement;e instanceof HTMLVideoElement?this.mediaElem_=e:e instanceof HTMLMediaElement||(this.mediaElem_=document.createElement("video"),e.appendChild(this.mediaElement))}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=t.mux?e.mux:e.loader,r=this.$selfArtifact!==e.renderer,i=this.depsArtefact_!==n,a=this.audioArtefact_!==e.audio;if(i&&(this.depsArtefact_=n),r&&(this.$selfArtifact=e.renderer),a&&(this.audioArtefact_=e.audio),i||a){if(i){var o=n.segments;Array.isArray(o)&&o.length>0&&o.filter((function(e){return e instanceof K.a})).forEach((function(e){switch(e.type){case 2:t.audioTrack.initSegment=e;break;case 1:t.videoTrack.initSegment=e}}))}this.checkIdle()}}},{key:"hasUnConsumedArtefact_",value:function(){var e=this.variantAudioMode,t=this.depsArtefact_,n=this.audioArtefact_,r=!!t&&!Object(Q.c)(t);if(e){var i=!!n&&!Object(Q.c)(n);r=r||i}return r}},{key:"tryAppendBuffer_",value:function(){if(!this.hasUnConsumedArtefact_())return!1;var e=this.$stream,t=this.variantAudioMode,n=this.depsArtefact_,r=this.audioArtefact_,i=this.$selfArtifact,a=(null==n?void 0:n.segments)||[],o=(null==r?void 0:r.segments)||[],s=[];if(t){a.filter((function(e){return 2===e.type&&e instanceof $.a})).length>0?e.audioSegmentSynced&&o.length>0&&(s=a.filter((function(e){return 1===e.type})).concat(o)):s=a.filter((function(e){return 1===e.type}))}else s=a;if(s.length>0){for(var c=!1,u=[],d=!1,l=0;l<s.length;l++){var f=s[l];if(f){if(!c){var h=this.currentTime,p=e.loader.findPieceAt(h);if(p&&p.segment){var _=p.segment.startTime-1;_>0&&this.$withinBuffer(_)&&this.$flushBuffer(0,_)}c=!0}d=d||f instanceof $.a,u.push(f)}}if(u.length>0)return d&&(i&&!1===i.expectingBuffer||this.$provideArtefact({expectingBuffer:!1})),this.msePlugin_.appendBuffer(u),this.$consumeArtefact(e.mux?"mux":"loader"),t&&o.length>0&&this.$consumeArtefact("audio"),!0}return!1}},{key:"initPlugin_",value:function(){this.emePlugin_.setup(this.$krt,this.mediaElem_,this.drmConfig_),this.msePlugin_.setup(this.$krt,this.mediaElem_),this.s_=this.msePlugin_.sourceBufferManager,this.fpsPlugin_.setup(this.$krt,this.$stream,this.mediaElem_,this.$stream.manifest.dynamicStuckMonitorPeriod)}},{key:"unloadPlugin_",value:function(){this.s_=null,this.msePlugin_.destroy(),this.emePlugin_.destroy(),this.fpsPlugin_.destroy()}},{key:"onMSEAttaching_",value:function(e){var t=this.$stream,n=this.mediaElement,r=this.fpsPlugin_;t.emit(ce.a.MSE_ATTACHING,{stream:t}),this.playHeadTime=0,n.load(),this.blobUrl_=URL.createObjectURL(e),P.a.log("DomString: ".concat(this.blobUrl_,", ").concat(this.tryDecodeBlobUrl_)),this.tryDecodeBlobUrl_&&/%3A\/\//g.test(this.blobUrl_)&&(this.blobUrl_=decodeURIComponent(this.blobUrl_),n.blobUrlMalformed=!0,P.a.log("DecodedDomString: ".concat(this.blobUrl_))),this.tryDecodeBlobUrl_=!1,n.src=this.blobUrl_,r.onMSEAttaching()}},{key:"onMSEAttached_",value:function(e){var t=this.$stream;e.duration=t.loader.duration,t.emit(ce.a.MSE_ATTACHED,e)}},{key:"onMseBufferCreated_",value:function(){var e=this.$stream;e.emit(ce.a.BUFFER_CREATED,{stream:e})}},{key:"onMseAppending_",value:function(e){var t=this.$stream;t.emit(ce.a.BUFFER_APPENDING,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseUpdated_",value:function(e){var t=this.$krt,n=this.msePlugin_,r=this.$stream,i=this.mediaElem_,a=e.sourceBufferType,o=e.operateType,s=e.previousBufferedLength,c=e.vsb;if(t.conf.alwaysSeekKeyframe&&"append"===o&&"video"===a&&0===s&&c&&c.buffered.length>0){var u=c.buffered.start(0),d=c.buffered.end(0),l=i.currentTime;Bc.a.EDGE&&(u+=.08);var f=l.toFixed(3),h=u.toFixed(3),p=d.toFixed(3);f!==h&&f!==p&&(P.a.log("Due to alwaysSeekKeyframe, seeking to video buffered start@".concat(h,", cur(").concat(f,")")),r.seekingMayIgnored=!0,i.currentTime=parseFloat(h))}this.isSatisfyEosCondition()?n.endOfStream():this.hasOperateBufferData||this.updating||this.checkIdle()}},{key:"onMseAppended_",value:function(e){var t=this.$stream;t.emit(ce.a.BUFFER_APPENDED,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseBufferExpect_",value:function(e){var t=this.$stream,n=this.$selfArtifact;if(!this.$error&&this.error)return P.a.log("The event is not fired by media elem"),void this.onError_();t.shouldFireError(e)?this.$throwError(null,{immediately:!0}):this.tryAppendBuffer_()||n&&!0===n.expectingBuffer||this.$provideArtefact({expectingBuffer:!0})}},{key:"onMseBufferFlushed_",value:function(){this.$stream.emit(ce.a.BUFFER_FLUSHED)}},{key:"isSatisfyEosCondition",value:function(){var e=this.$stream,t=this.variantAudioMode,n=e.loader,r=e.mux,i=e.audio;return(t?n.eof&&i.eof:!n||n.eof)&&(!r||r.idle)&&!this.hasUnConsumedArtefact_()&&this.isSafetyToEOS_()}},{key:"isSafetyToEOS_",value:function(){var e=this.msePlugin_;return!e.sourceBufferManager.hasOperateBufferData&&!e.sourceBufferManager.updating&&!e.isEndOfStream}},{key:"play",value:function(){this.mediaElement.play()}},{key:"pause",value:function(){this.mediaElement.pause()}},{key:"recoverAt",value:function(e){var t;this.$error&&this.$error.code===ke.a.MEDIA_VIDEO_ERROR&&this.$error.message==undefined&&(this.tryDecodeBlobUrl_=!0),b()(_()(n.prototype),"recoverAt",this).call(this,e);var r=this.msePlugin_;this.$stream.seekingMayIgnored=!0,this.releasedMediaControl(),this.takeoverMediaControl(),null===(t=r.gapManager)||void 0===t||t.resetStalledGap(!0)}},{key:"reset",value:function(){var e=this.fpsPlugin_,t=this.msePlugin_,n=this.emePlugin_;this.idleTimer_.schedule(0),t.abortSourceBuffer(),e.reset(),n.reset(),t.reset(),this.playing_=!1}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this.drmConfig_=null,this.releasedMediaControl()}},{key:"checkIdle",value:function(){var e,t=this.$krt,n=this.idleTimer_,r=this.msePlugin_;n.running&&(t.error||r&&(null===(e=r.gapManager)||void 0===e||e.onMediaIdle({playHeadTime:this.playHeadTime})),n.schedule(.1))}},{key:"checkHighResTimeupdate_",value:function(){b()(_()(n.prototype),"checkHighResTimeupdate_",this).call(this);var e=this.mediaElem_;e&&!e.paused&&this.prevCurrentTime_!=e.currentTime&&(this.prevCurrentTime_=e.currentTime,this.stateChange_("highrestimeupdate"))}},{key:"bind_",value:function(){var e=this.$eventManager,t=this.mediaElem_,n=this.msePlugin_;e.on(n,ce.a.MSE_ATTACHING,this.onMSEAttaching_.bind(this)).on(n,ce.a.MSE_ATTACHED,this.onMSEAttached_.bind(this)).on(n,ce.a.BUFFER_CREATED,this.onMseBufferCreated_.bind(this)).on(n,ce.a.BUFFER_APPENDING,this.onMseAppending_.bind(this)).on(n,ce.a.BUFFER_UPDATED,this.onMseUpdated_.bind(this)).on(n,ce.a.BUFFER_APPENDED,this.onMseAppended_.bind(this)).on(n,ce.a.BUFFER_EXPECTING,this.onMseBufferExpect_.bind(this)).on(n,ce.a.BUFFER_FLUSHED,this.onMseBufferFlushed_.bind(this)),e.on(t,"error",this.onError_.bind(this)).on(t,"encrypted",this.onEncrypted_.bind(this)).on(t,"canplay",this.onCanplay_.bind(this)).on(t,"loadstart",this.onLoadstart_.bind(this)).on(t,"loadedmetadata",this.onLoadedMetadata_.bind(this)).on(t,"playing",this.onPlaying_.bind(this)).on(t,"waiting",this.onWaiting_.bind(this)).on(t,"pause",this.onPause_.bind(this)).on(t,"ended",this.onEnded_.bind(this)).on(t,"timeupdate",this.onTimeUpdate_.bind(this)).on(t,"seeking",this.onSeeking_.bind(this)).on(t,"seeked",this.onSeeked_.bind(this))}},{key:"unbind_",value:function(){this.$eventManager.removeAll()}},{key:"onError_",value:function(){var e,t=null===(e=this.mediaElem_)||void 0===e?void 0:e.error;if(t){var n=t.code,r=t.msExtendedCode,i=t.message;switch(n){case 1:break;case 2:case 3:case 4:r&&(r<0&&(r+=Math.pow(2,32)),r=r.toString(16)),P.a.error("".concat(this.LOG_TAG," error, code(").concat(n,"), message(").concat(i,"), extended(").concat(r,"), readyState(").concat(this.readyState,")"));var a=ke.a.MEDIA_VIDEO_ERROR;/PIPELINE_ERROR_DECODE/.test(i)?a=/video decode error/.test(i)?ke.a.MEDIA_VIDEO_DECODE_ERROR:/VDA Error/.test(i)?ke.a.MEDIA_VDA_ERROR:ke.a.MEDIA_PIPELINE_ERROR_DECODE:/AUDIO_RENDERER/.test(i)?a=ke.a.MEDIA_AUDIO_RENDERER_ERROR:/URL safety check/.test(i)&&(a=ke.a.MEDIA_URL_SAFE_REJECTED);var o=new ye.a(me.a.RECOVERABLE,be.a.RENDERER,a,n,i,r);o.message=i,this.$throwError(o,{immediately:!0})}}}},{key:"onTimeUpdate_",value:function(){var e=this.currentTime,t=this.readyState;if(!(this.paused||t<=1||this.playHeadTime===e)){var n=this.mediaElem_,r=this.seeking,i=this.duration,a=this.appendWindowEnd;if(this.playHeadTime=e,e>0&&e>=a&&!r){var o=this;n.addEventListener("pause",(function e(){n.removeEventListener("pause",e,!1),o.noticeStreamStop_("timer")}),!1),this.pause()}else if(t>=3){var s=new Event("playing");s.isSimulating_=!0,this.onPlaying_(s)}e+.5>i&&this.stateChange_("willended"),r||this.stateChange_("timeupdate")}}},{key:"onLoadstart_",value:function(){this.stateChange_("loadstart")}},{key:"onLoadedMetadata_",value:function(){this.stateChange_("loadedmetadata")}},{key:"onCanplay_",value:function(){this.stateChange_("canplay")}},{key:"onSeeking_",value:function(){var e,t=this.$krt,n=this.msePlugin_,r=this.currentTime,i=this.duration,a=this.buffer;if(this.playing_=!1,this.playHeadTime=r,P.a.log("seeking(".concat(r,"), duration(").concat(i,")")),null===(e=n.gapManager)||void 0===e||e.resetStalledGap(!0),Bc.a.SAFARI){if(r<t.conf.safariMinStartTime)return void(this.currentTime=t.conf.safariMinStartTime)}else if(r<1&&a.len>0){var o=a.start;if(o<1&&r<o)return void(this.currentTime=o)}i>1&&r>i-1?this.currentTime=i-1:this.stateChange_("seeking")}},{key:"onSeeked_",value:function(){this.stateChange_("seeked")}},{key:"onPause_",value:function(){this.playing_=!1,this.highResTimer.stop(),this.stateChange_("pause")}},{key:"onEnded_",value:function(){this.stateChange_("beforeended"),this.stateChange_("ended"),this.stateChange_("afterended")}},{key:"onPlaying_",value:function(e){!this.playing_&&(!e.isSimulating_&&this.readyState>1||e.isSimulating_)&&(this.playing_=!0,this.stateChange_("playing"))}},{key:"onWaiting_",value:function(){this.playing_=!1,this.highResTimer.stop(),this.stateChange_("waiting")}},{key:"onEncrypted_",value:function(e){this.$stream.emit(ce.a.STREAM_ENCRYPTED,e)}},{key:"noticeStreamStop_",value:function(e){P.a.log("stream stop, by the ".concat(e)),this.onEnded_()}},{key:"stateChange_",value:function(e){var t=this.$stream;t.emit(ce.a.STATE_CHANGE,{stream:t,state:e})}},{key:"$withinBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return this.s_.withinBuffer(e,t,n)}},{key:"$flushBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY,n=arguments.length>2?arguments[2]:undefined;this.s_&&this.s_.onBufferFlushing(e,t,n)}},{key:"bufferInfo",value:function(e,t){return this.s_?this.s_.bufferInfo(e,t,this.$krt.conf.maxBufferHole):{len:0,start:0,end:0}}},{key:"$drainBuffer",value:function(e){b()(_()(n.prototype),"$drainBuffer",this).call(this,e),this.depsArtefact_=null,this.audioArtefact_=null}},{key:"$clearOperateBuffers",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.s_&&this.s_.clearOperateBuffers(e,t)}},{key:"startReportFPS",value:function(){this.fpsPlugin_.startReportFPS()}},{key:"stopReportFPS",value:function(){this.fpsPlugin_.stopReportFPS()}}]),n}(Nc);function tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ru(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}Jc([F.c],eu.prototype,"currentTime",null),Jc([F.c],eu.prototype,"duration",null),Jc([F.c],eu.prototype,"mediaElement",null),Jc([F.c],eu.prototype,"play",null),Jc([F.c],eu.prototype,"pause",null),Jc([F.c],eu.prototype,"startReportFPS",null),Jc([F.c],eu.prototype,"stopReportFPS",null);var iu="function"==typeof Symbol&&Symbol.observable||"@@observable",au=function(){return Math.random().toString(36).substring(7).split("").join(".")},ou={INIT:"@@redux/INIT"+au(),REPLACE:"@@redux/REPLACE"+au(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+au()}};function su(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function cu(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(ru(0));if("function"==typeof t&&void 0===n&&(n=t,t=undefined),void 0!==n){if("function"!=typeof n)throw new Error(ru(1));return n(cu)(e,t)}if("function"!=typeof e)throw new Error(ru(2));var i=e,a=t,o=[],s=o,c=!1;function u(){s===o&&(s=o.slice())}function d(){if(c)throw new Error(ru(3));return a}function l(e){if("function"!=typeof e)throw new Error(ru(4));if(c)throw new Error(ru(5));var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error(ru(6));t=!1,u();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!su(e))throw new Error(ru(7));if("undefined"==typeof e.type)throw new Error(ru(8));if(c)throw new Error(ru(9));try{c=!0,a=i(a,e)}finally{c=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function h(e){if("function"!=typeof e)throw new Error(ru(10));i=e,f({type:ou.REPLACE})}function p(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(ru(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[iu]=function(){return this},e}return f({type:ou.INIT}),(r={dispatch:f,subscribe:l,getState:d,replaceReducer:h})[iu]=p,r}function uu(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(undefined,{type:ou.INIT}))throw new Error(ru(12));if(void 0===n(undefined,{type:ou.PROBE_UNKNOWN_ACTION()}))throw new Error(ru(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var c=o[s],u=n[c],d=e[c],l=u(d,t);if(void 0===l){t&&t.type;throw new Error(ru(14))}i[c]=l,r=r||l!==d}return(r=r||o.length!==Object.keys(e).length)?i:e}}function du(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function lu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(ru(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=du.apply(void 0,a)(n.dispatch),nu(nu({},n),{},{dispatch:r})}}}function fu(e){var t=[],n=t;function r(){n===t&&(n=t.slice())}function i(e){var t=!0;return r(),n.push(e),function(){if(t){t=!1,r();var i=n.indexOf(e);n.splice(i,1)}}}function a(){for(var e=t=n,r=0;r<e.length;r++)e[r]()}function o(){e(a)}return function(e){return function(){var t=e.apply(void 0,arguments),n=t.subscribe;function r(){var e=t.dispatch.apply(t,arguments);return o(),e}return Object.assign(Object.assign({},t),{dispatch:r,subscribe:i,subscribeImmediate:n})}}}var hu=n(349);function pu(e){return function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=arguments.length>1?arguments[1]:undefined,r=n.type,i=n.payload,a=n.meta;if(r===e&&a&&a.stream_uid){if(e===j.a.DEPOSIT_ERROR&&!(i instanceof ye.a))throw"Error state should be use type KernelError";if(i==undefined){var o=Object.assign({},t);return delete o[a.stream_uid],o}return Object.assign(Object.assign({},t),y()({},a.stream_uid,i))}return t}}var _u={error:pu(j.a.DEPOSIT_ERROR),rawness:pu(j.a.DEPOSIT_RAWNESS),manifest:pu(j.a.DEPOSIT_MANIFEST),loader:pu(j.a.DEPOSIT_LOADER),mux:pu(j.a.DEPOSIT_MUX),renderer:pu(j.a.DEPOSIT_RENDERER)},vu={};function gu(){return uu(Object.assign(Object.assign({},_u),vu))}function yu(){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=[],n=[lu.apply(void 0,t),fu(hu.b)],r=du;return cu(gu(),e,r.apply(void 0,n))}({})}function mu(e,t,n){return function(e,t,n){var r={type:e},i=arguments.length;return t instanceof Error&&(r.error=!0),2===i?r.payload=t:3===i&&(r.payload=t,r.meta=n),r}(e,t,n)}var bu=n(414),ku=function jg(e,t){a()(this,jg),this.start=e,this.end=t},xu=function(){function e(){a()(this,e),this.ranges_=[]}return s()(e,[{key:"findRange",value:function(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;t<this.ranges_.length&&e>this.ranges_[t].end;)++t;return{index:t,contained:t<this.ranges_.length&&e>=this.ranges_[t].start}}},{key:"length",get:function(){return this.ranges_.length}},{key:"start",value:function(e){return this.ranges_[e].start}},{key:"end",value:function(e){return this.ranges_[e].end}},{key:"add",value:function(e,t){var n=this.findRange(e),r=this.findRange(t,n.index);n.contained&&(e=Math.min(e,this.ranges_[n.index].start)),r.contained&&(t=Math.max(t,this.ranges_[r.index].end));var i=r.index-n.index+(r.contained?1:0);this.ranges_.splice(n.index,i,new ku(e,t))}},{key:"contain",value:function(e){return!!this.findRange(e).contained}},{key:"empty",value:function(){this.ranges_.splice(0,this.ranges_.length)}},{key:"toArray",value:function(){var e=[],t=this.ranges_;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n].start,i=t[n].end;e.push([r,i])}return e}},{key:"clone",value:function(){var t=new e;return this.toArray().forEach((function(e){t.add(e[0],e[1])})),t}}]),e}(),Tu=n(398),Su=function(){function e(){a()(this,e),this.needSendAudioInitSegment_=!1,this.needSendVideoInitSegment_=!1,this.hasAudio=!0,this.hasVideo=!0,this.audioInitSegment=null,this.videoInitSegment=null,this.audioMediaSegments=[],this.videoMediaSegments=[]}return s()(e,[{key:"consumable",get:function(){var e=this.needSendInitSegment,t=this.hasVideo,n=this.hasAudio,r=this.needSendVideoInitSegment,i=this.needSendAudioInitSegment,a=this.videoInitSegment,o=this.audioInitSegment,s=this.videoMediaSegments,c=this.audioMediaSegments,u=!1;return e?i&&r?o&&a&&(u=!0):i?o&&(u=!0):r&&a&&(u=!0):(t&&s.length>0||n&&c.length>0)&&(u=!0),u}},{key:"needSendInitSegment",get:function(){return this.needSendAudioInitSegment||this.needSendVideoInitSegment},set:function(e){this.needSendVideoInitSegment=e,this.needSendAudioInitSegment=e}},{key:"needSendAudioInitSegment",get:function(){return this.hasAudio&&this.needSendAudioInitSegment_},set:function(e){this.hasAudio&&(this.needSendAudioInitSegment_=e)}},{key:"needSendVideoInitSegment",get:function(){return this.hasVideo&&this.needSendVideoInitSegment_},set:function(e){this.hasVideo&&(this.needSendVideoInitSegment_=e)}},{key:"consume",value:function(){var e=this.needSendInitSegment,t=this.needSendAudioInitSegment,n=this.needSendVideoInitSegment,r=this.videoInitSegment,i=this.audioInitSegment,a=this.audioMediaSegments,o=this.videoMediaSegments;if(e){if(t&&n){if(i&&r)return this.needSendAudioInitSegment=!1,this.needSendVideoInitSegment=!1,{segments:[i,r]}}else if(t){if(i)return this.needSendAudioInitSegment=!1,{segments:[i]}}else if(n&&r)return this.needSendVideoInitSegment=!1,{segments:[r]}}else{var s=[];if([a,o].forEach((function(e){e.length>0&&s.push(e.shift())})),s.length>0)return{segments:s}}return null}}]),e}(),Pu=[];function wu(e){return Pu.indexOf(e)}function Iu(e){return wu(e)>-1}function Au(){var e=X.a.create();return Iu(e)?Au():function(e){return Iu(e)||Pu.push(e),e}(e)}var Eu=function(e,t){return{runtime:e,stream:t,store:e.store,uuid:t.uuid,ipc:t.ipc,hoc:!1}};function Du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var qu=function(e){l()(n,e);var t=Du(n);function(){}return s()(n,[{key:"initSegment",get:function(){return this._initSegment},set:function(e){e&&(this._initSegment=e,this.emit("IU",e))}}]),n}(ee.EventEmitter);function Ou(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ru,Lu=function(e){l()(n,e);var t=Ou(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).levelSwitching_=!1,e.silenced_=!1,e.compLiterals=[],e.mediaRanges=new xu,e.playRanges=new xu,e.ipc=new ee.EventEmitter,e.uuid=Au(),e.audio=null,e.audioSegmentSynced=!0,e.seekingMayIgnored=!1,e.seekedToStartPos=!1,e.hasNoticeEOD=!1,e.videoTrack=new qu,e.audioTrack=new qu,e.restrictor=new Su,e}return s()(n,[{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced?"(silence)":"","]")}},{key:"silenced",get:function(){return this.silenced_},set:function(e){this.silenced_=e,this.packList.forEach((function(t){t.$silenced=e}))}},{key:"mediaBuffer",get:function(){var e=this.renderer;return e?Object.assign(Object.assign({},e.bufferInfo(e.playHeadTime)),{buffered:{video:e.bufferInfo(e.playHeadTime,"video"),audio:e.bufferInfo(e.playHeadTime,"audio")}}):{len:0,start:0,end:0}}},{key:"dataBuffer",get:function(){var e=this.loader;return e?e.buffer:new z}},{key:"seekable",get:function(){var e=!1;return this.manifest&&(e=this.manifest.seekable),e}},{key:"duration",get:function(){return this.renderer?this.renderer.duration:0}},{key:"currentTime",get:function(){return this.renderer?this.renderer.currentTime:0},set:function(e){this.renderer&&(this.renderer.currentTime=e)}},{key:"error",get:function(){for(var e,t=null,n=0;n<this.packList.length;n++)if((e=this.packList[n]).$error instanceof ye.a){t=e.$error;break}return t}},{key:"levelSwitching",get:function(){return this.levelSwitching_},set:function(e){this.levelSwitching_=e}},{key:"packList",get:function(){return[this.manifest,this.loader,this.mux,this.renderer,this.audio].filter((function(e){return!!e}))}},{key:"onTheFly",set:function(e){var t=this.renderer,n=this.restrictor;e?t&&t.takeoverMediaControl():(this.clearBuffers({rendererMayKeepInit:!1}),this.restoreStatus(),t&&t.releasedMediaControl(),n.needSendInitSegment=!0)}},{key:"destroy",value:function(){var e=this.mediaRanges,t=this.playRanges,n=this.packList;e.empty(),t.empty(),this.clearBuffers(),n.forEach((function(e){e.destroy()}))}},{key:"shouldFireError",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=this.renderer,n=!1;return this.error&&(e&&e.len<=1||t.buffer.len<=1)&&(n=!0),n}},{key:"setup",value:function(e){}},{key:"registerAudioPack",value:function(e,t){this.audio=new e(Eu(t,this))}},{key:"recoverImmediately",value:function(e){this.clearBuffers(),this.restoreStatus(),this.packList.forEach((function(t){return t.recoverAt(e)}))}},{key:"range",value:function(e,t){var n=this.loader,r=this.renderer;t&&(Array.isArray(t)?this._generateMediaRanges(t):t instanceof xu&&(this.mediaRanges=t)),this._generatePlayRanges(e);var i=this.playRanges,a=this.mediaRanges;(null==n?void 0:n.applyRanges)&&n.applyRanges(i),r&&(r.appendWindowStart=i.start(0),r.appendWindowEnd=i.end(i.length-1)),i instanceof xu&&i.length>0&&a instanceof xu&&a.length>0&&P.a.log("".concat(this.LOG_TAG," Range made, ").concat(i.length," play ").concat(i.start(0),"-").concat(i.end(i.length-1),", ").concat(a.length," media ").concat(a.start(0),"-").concat(a.end(a.length-1)))}},{key:"_generateMediaRanges",value:function(e){if(this.mediaRanges.empty(),Array.isArray(e)&&e.length>0)for(var t,n=0;t=e[n];n++)this.mediaRanges.add(t[0],t[1])}},{key:"_generatePlayRanges",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=this.mediaRanges,n=this.playRanges,r=t.start(0),i=t.end(t.length-1);if(n.empty(),null===e||e<i){"number"==typeof e&&e<r&&n.add(e,r);for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a);"number"==typeof e&&e>=s?e<t.start(a+1)&&n.add(e,t.start(a+1)):"number"==typeof e&&o<=e&&e<s?n.add(e,s):n.add(o,s)}}else n.add(e,Number.POSITIVE_INFINITY)}},{key:"clearBuffers",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.rendererOnlyData,n=e.rendererMayKeepInit,r=e.rendererFlushMedia,i=e.muxKeepMeta,a=this.packList,o=this.renderer,s=!!n,c="boolean"!=typeof r||r,u=!!i;P.a.log("".concat(this.LOG_TAG," clear buffer of all packs, and ").concat(s?"will":"not"," keepInit")),a.forEach((function(e){return e.$unSubscribeStore()})),a.forEach((function(e){t&&e===o?e.$clearOperateBuffers(null,s):e.$drainBuffer({delInStream:!0,keepInit:s,flushMedia:c,keepMuxMeta:u})})),a.forEach((function(e){e.$initStateSlice(!0)})),a.forEach((function(e){return e.$subscribeStore()}))}},{key:"restoreStatus",value:function(){this.seekingMayIgnored=!1,this.seekedToStartPos=!1,this.lastSeekTiming=undefined}},{key:"startHighResTimer",value:function(){var e;null===(e=this.renderer)||void 0===e||e.highResTimer.start()}},{key:"stopHighResTimer",value:function(){var e;null===(e=this.renderer)||void 0===e||e.highResTimer.stop()}}]),n}(Tu.a);function Cu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}!function(e){e[e.Roll=0]="Roll",e[e.Episode=1]="Episode",e[e.MAT=2]="MAT"}(Ru||(Ru={}));var Mu=function(e){l()(n,e);var t=Cu(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).TAG="Roll",e.streamType=Ru.Roll,e}return s()(n,[{key:"isAd",get:function(){return"ad"===this.rollCategory||/^ad::/gi.test(this.rollCategory)}}]),n}(Lu);function Nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Bu,Fu,Uu=function(e){l()(n,e);var t=Nu(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).TAG="Episode",e.streamType=Ru.Episode,e}return s()(n,[{key:"seekable",get:function(){return!0}}]),n}(Lu);!function(e){e[e.PRE_ROLL=0]="PRE_ROLL",e[e.MID_ROLL=1]="MID_ROLL",e[e.POST_ROLL=2]="POST_ROLL",e[e.INDETERMINACY_ROLL=3]="INDETERMINACY_ROLL"}(Bu||(Bu={})),function(e){e.BEGIN="B",e.END="E",e.PLAYING_CHANGED="PC",e.PLAYING_PROGRESS="PP"}(Fu||(Fu={}));n(397);function ju(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Vu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Wu=function(e){l()(n,e);var t=Hu(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,{ctx:e.ctx})).playingStream_=null,i.set_=new Set,i.secClockTimer_=new G.a((function(){return i.secCronJob_()})),i.runtime=e,i.isPreload=r,r||i.$eventManager.on(u()(i),Fu.BEGIN,(function(){i.secClockTimer_.scheduleRepeated(1)})),i}return s()(n,[{key:"playingStream",get:function(){return this.playingStream_},set:function(e){var t=this.runtime;if(!this.isPreload&&this.has(e)){t.error&&(t.error=null);var n=this.playingStream_;n&&(n.onTheFly=!1,n.packList.forEach((function(e){e.unbindApis()}))),P.a.log("timeline change playing stream to ".concat(e.TAG).concat(e instanceof Mu?"("+e.rollCategory+")":"")),this.playingStream_=e,e.onTheFly=!0,e.packList.forEach((function(e){e.bindApis()})),this.emit(Fu.PLAYING_CHANGED,e)}}},{key:"streams",get:function(){return this.set_.values()}},{key:"isRolling",get:function(){var e=this.playingStream;return!!e&&e instanceof Mu}},{key:"rollingType",get:function(){return this.isRolling?this.playingStream.rollType:null}},{key:"episodeStream",get:function(){var e,t=null,n=ju(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof Uu){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"rollStream",get:function(){var e,t=null,n=ju(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof Mu){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"size",get:function(){return this.set_.size}},{key:"secCronJob_",value:function(){}},{key:"startSchedules",value:function(){this.destroySchedules()}},{key:"destroySchedules",value:function(){}},{key:"destroy",value:function(){b()(_()(n.prototype),"destroy",this).call(this),this.destroySchedules(),this.clear(),this.secClockTimer_.cancel(),this.playingStream_=null}},{key:"reset",value:function(){P.a.log("timeline reset"),this.playingStream_=null}},{key:"clear",value:function(){this.playingStream_=null,this.set_.clear()}},{key:"endOfPlayingStream",value:function(){this.tryToSwitchStream(!0)}},{key:"tryToSwitchStream",value:function(){arguments.length>0&&undefined,this.playingStream}},{key:"findAdaptedStream",value:function(e){return null}},{key:"has",value:function(e){return this.set_.has(e)}},{key:"configureRoll",value:function(e,t){}}]),n}(n(638).a),zu=n(406);var Yu,Gu={cmd5x:(Yu="cmd5x",function(){P.a.warn("used un impl external tool: ".concat(Yu))})},Qu=function(){function e(t,n){a()(this,e),this.stream=null,this.currentTime_=null,this.runtime=t,this.eventManger_=new Z.a,this.timeline_=n}return s()(e,[{key:"syncMediaTiming",value:function(e){var t=this.stream;if(t){var n=t.loader,r=t.renderer.currentTime,i=Object(Q.g)(e)&&e>=0?e:Object(Q.g)(r)?r:0,a=n.findPieceAt(i),o=!1;if(this.currentFrag_){var s=this.currentFrag_.startTime,c=this.currentFrag_.endTime;if(i>=s&&i<c)i+.5>=c&&this.stateChange_("willended");else if(i>=c){n.fragments.length>0&&this.currentFrag_!==n.fragments[n.fragments.length-1]&&(this.stateChange_("ended"),o=!0)}}this.currentTime_=i,this.currentFrag_=a?a.fragment:this.currentFrag_,this.currentFrag_.loadstart||(this.currentFrag_.loadstart=!0,this.stateChange_("loadstart")),this.checkCurrentGasStatus()&&o&&t.renderer&&t.renderer.readyState>=2&&this.stateChange_("playing")}}},{key:"connectStream",value:function(e){var t=this;this.stream=e;var n=e.loader;n.fragments.length>0?this.syncMediaTiming():this.eventManger_.once(n,"FLS",(function(e){0===e.idx&&t.syncMediaTiming()}))}},{key:"disconnectStream",value:function(){this.stream=null,this.currentTime_=null,this.currentFrag_=null,this.eventManger_.removeAll()}},{key:"getCurrentGas",value:function(){var e=this.stream,t=this.currentTime_;if(e){var n=e.loader,r=e.renderer,i=null!==t?t:r.currentTime;i>n.duration&&(i=n.duration);var a=n.fragments,o=n.findPieceAt(i);if(o&&o.fragment){var s=o.fragment;return{gas:s.gas||null,fragIdx:a.indexOf(s),fragment:s}}}return null}},{key:"abortCurrentGas",value:function(e){var t=this.stream,n=t.renderer,r=t.loader,i=e.fragIdx,a=(e.fragment,r.fragments[i+1]);if(a){var o=a.startTime;n.readyState>0?n.currentTime=o:(this.syncMediaTiming(o),this.timeline_.seekStream(o,this.stream))}}},{key:"checkCurrentGasStatus",value:function(){var e=this.runtime,t=this.stream,n=!0,r=this.currentFrag_;return!r||3!=r.status&&4!=r.status||(n=!1,e.throwError(t.error)),n}},{key:"stateChange_",value:function(e){this.runtime.ctx.emit(ce.a.STATE_CHANGE,{state:e})}}]),e}(),Ku=n(351);function $u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Ju=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":B()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},ed=function(e){l()(o,e);var t,r,i=Xu(o);function o(e,t){var n;a()(this,o),(n=i.call(this,e,t)).playingStreamBufferEnd_=null,n.briefs={};var r,s,c,u=e.params.dynamic.externals;return t||(u&&Object(J.a)(Gu,u),r=e.store,s="audio",c=pu(j.a.DEPOSIT_AUDIO),vu[s]=c,r.replaceReducer(gu())),Object(bu.b)(Ku.a),te.e.setRuntime(e),n}return s()(o,[{key:"playingStream",get:function(){return b()(_()(o.prototype),"playingStream",this)},set:function(e){e instanceof Mu&&e.isAd?(this.adManager||(this.adManager=new Qu(this.runtime,this)),this.adManager.connectStream(e)):this.adManager&&this.adManager.disconnectStream(),this.playingStreamBufferEnd_=null,M()(_()(o.prototype),"playingStream",e,this,!0),this.isAd||this.runtime.ctx.emit(ce.a.STATE_CHANGE,{state:"p2pInit",stream:this.playingStream,shouldEmit:!0})}},{key:"eot",get:function(){var e=!0,t=this.playingStream;return t&&(e=t.renderer.loop||t===this.episodeStream&&!this.hasAvailablePatch||t==this.patchStream),e}},{key:"isAd",get:function(){var e=!1;return this.isRolling&&(e=this.playingStream.isAd),e}},{key:"isQBBPatching",get:function(){var e=this.playingStream,t=!!e;return t&&(t=e===this.patchStream),t}},{key:"patchStream",get:function(){var e,t=null,n=$u(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof Mu&&"patch"===r.rollCategory){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"hasAvailablePatch",get:function(){var e=this.patchStream;return e&&!e.error}},{key:"matStream",get:function(){var e,t=null,n=$u(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof Mu&&"mat"===r.rollCategory){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"episodeStream",get:function(){var e,t=null,n=$u(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof Uu){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"bufferInfo",get:function(){return{media:this.mediaBufferInfo,data:this.dataBufferInfo}}},{key:"mediaBufferInfo",get:function(){var e=this.playingStream;return e?e.mediaBuffer:{len:0,start:0,end:0}}},{key:"dataBufferInfo",get:function(){var e=this.playingStream;return e?e.dataBuffer:new z}},{key:"normalAdRollStream",get:function(){var e,t=null,n=$u(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof Mu&&"ad"===r.rollCategory){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"destroy",value:function(){this.reset(),te.e.unsetRuntime(),this.adManager=null}},{key:"reset",value:function(){b()(_()(o.prototype),"reset",this).call(this);var e,t=this.adManager,n=$u(this.streams);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(r){n.e(r)}finally{n.f()}this.clear(),t&&t.disconnectStream(),this.briefs={}}},{key:"onStateChange_",value:function(e){var t=e.state,n=e.stream,r=n.renderer,i=(n.loader,n.mux,n.playRanges,this.runtime),a=this.adManager,o=i.recoverProcedure,s=!0;switch(t){case"loadstart":s=!1;break;case"loadedmetadata":n.seekedToStartPos||(n.seekedToStartPos=!0,this.seekToStartPos_(n));break;case"afterended":r.loop||this.endOfPlayingStream();break;case"seeking":var c=r.currentTime;o.progressing&&(o.status=o.levels.MEDIA_SEEKING),n instanceof Mu&&n.isAd&&a.syncMediaTiming(),n.lastSeekTiming=performance.now(),n.seekingMayIgnored||r.$withinBuffer(c)||(n.clearBuffers({rendererMayKeepInit:!0,muxKeepMeta:!0}),this.seekStream(c,n)),n.seekingMayIgnored=!1;break;case"seeked":n.lastSeekTiming&&P.a.log("seeking->seeked take ".concat((performance.now()-n.lastSeekTiming).toFixed(3),"ms"));break;case"highrestimeupdate":case"timeupdate":n instanceof Mu?n.isAd&&a.syncMediaTiming():this.tryToSwitchStream(!1);break;case"waiting":var u=r.bufferInfo(n.currentTime).len;(r.readyState>=3&&!Bc.a.EDGE||!r.seeking&&r.updating||u>.1||u<=.1&&n.error||n.loader.buffer.len>0)&&(s=!1);break;case"playing":o.progressing&&(o.status=o.levels.STOP)}s&&n===this.playingStream&&(e.shouldEmit=s,this.runtime.ctx.emit(ce.a.STATE_CHANGE,e))}},{key:"onError_",value:function(e){var t=this.runtime,n=this.playingStream,r=this.adManager,i=t.recoverProcedure,a=e.stream,o=e.error;i.progressing&&(i.status=i.levels.STOP),a&&a===n&&(a instanceof Mu&&a.isAd?o.category===be.a.RENDERER?(P.a.error("ad met renderer error"),t.throwError(o)):r.checkCurrentGasStatus()||this.abortCurrentADGas():t.throwError(o))}},{key:"onMediaAttaching_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(ce.a.MSE_ATTACHING)}},{key:"onMediaBufferCreated_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(ce.a.BUFFER_CREATED)}},{key:"onMediaBufferAppending_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(ce.a.BUFFER_APPENDING)}},{key:"onMediaBufferAppended_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(ce.a.BUFFER_APPENDED)}},{key:"seekStream",value:function(e,t){arguments.length>2&&undefined;var n=this.runtime,r=n.recoverProcedure,i=t.loader,a=t.audio;r.progressing&&(r.status=r.levels.DATA_SEEKING),t.range(e),i.seek(e);var o=a;o&&o.seek(e)}},{key:"seekToStartPos_",value:function(e){var t=this.runtime,n=e.renderer,r=e.playRanges,i=t.recoverProcedure;if(r.length>0)if(i.progressing){i.status=i.levels.MEDIA_METADATA;var a=i.targetTime;a>=0&&(P.a.log("media recover, seek media by recover point ".concat(a)),n.currentTime=a)}else{var o=r.start(0);if(Bc.a.SAFARI){var s=t.conf.safariMinStartTime;o<s&&(o=s)}o>0&&(e.seekingMayIgnored=!0,P.a.log("seek to ".concat(o," by metadata~")),n.currentTime=o)}else P.a.warn("playRanges is empty, pls fix it.")}},{key:"secCronJob_",value:function(){var e=this.runtime,t=this.playingStream;if(t){var n=this.bufferInfo.data.end;n!==this.playingStreamBufferEnd_&&(this.playingStreamBufferEnd_=n,e.ctx.emit(ce.a.STATE_CHANGE,{state:"progress"})),!t.hasNoticeEOD&&t.loader.eod&&(t instanceof Uu?(t.hasNoticeEOD=!0,e.ctx.emit(ce.a.STATE_CHANGE,{state:"EOP"})):t instanceof Mu&&(t.hasNoticeEOD=!0,e.ctx.emit(ce.a.STATE_CHANGE,{state:"EOR"})))}}},{key:"configureRoll",value:function(e,t){var n=e.offset,r=e.done;t.rollType=e.rollType,t.rollCategory=e.category,t.done=!!r,r&&"ad::brief"!==t.rollCategory||(t.offset=n)}},{key:"add",value:function(e){var t=!1,n=!1;if(e instanceof Mu){if(t=!0,e.isAd){switch(e.rollCategory){case"ad":if(this.normalAdRollStream)return P.a.error("Timeline should has only one normal ad roll stream"),this;if(e.rollType===Bu.PRE_ROLL&&this.episodeStream)return P.a.error("Timeline now has a episode stream, but add a pre-ad"),this;break;case"ad::brief":var r=e.offset,i=this.briefs[r]=this.briefs[r]||[],a=i.length;t=!0,a>0&&(i[a-1].next=e),i.push(e)}e.loader.adjustTimestampMode=!0,e.loader.skipErrorMode=!0}else if(this.patchStream)return P.a.error("Timeline should has only one patch stream"),this}else if(e instanceof Uu&&(n=!0,this.episodeStream))return P.a.error("Timeline should has only one episode stream"),this;return this.$eventManager.on(e,ce.a.ERROR,this.onError_.bind(this)).on(e,ce.a.STATE_CHANGE,this.onStateChange_.bind(this)).on(e,ce.a.BUFFER_CREATED,this.onMediaBufferCreated_.bind(this)).on(e,ce.a.BUFFER_APPENDING,this.onMediaBufferAppending_.bind(this)).on(e,ce.a.BUFFER_APPENDED,this.onMediaBufferAppended_.bind(this)).on(e,ce.a.MSE_ATTACHING,this.onMediaAttaching_.bind(this)),this.set_.add(e),1===this.size&&(t||n)&&(this.playingStream=e,this.emit(Fu.BEGIN),this.startSchedules()),this}},{key:"delete",value:function(e){if(e instanceof Mu&&"ad::brief"===e.rollCategory){var t=e.offset,n=this.briefs[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1);break}}return this.$eventManager.off(e,ce.a.STATE_CHANGE).off(e,ce.a.BUFFER_CREATED).off(e,ce.a.ERROR).off(e,ce.a.MSE_ATTACHING),this.set_["delete"](e),this}},{key:"findAdaptedStream",value:function(e){var t,n=null,r=e.streamType,i=e.roll,a=e.components,o=$u(this.streams);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.streamType===r&&(s instanceof Uu||i&&s instanceof Mu&&s.rollType===i.rollType&&"ad::brief"!==s.rollCategory&&s.rollCategory===i.category)&&(0===a.length||0===Object(zu.a)(a,s.compLiterals).length)){n=s;break}}}catch(c){o.e(c)}finally{o.f()}return n}},{key:"tryToSwitchStream",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=this.playingStream;if(t){var n=t instanceof Uu,r=this.normalAdRollStream,i=this.episodeStream,a=this.patchStream,o=this.matStream,s=2,c=!1;if(t instanceof Mu){if(!e)return;if("ad"===t.rollCategory){var u=t.rollType;switch(this["delete"](t),t.destroy(),u){case Bu.PRE_ROLL:var d=0,l=this.briefs[d]||[];l.length>0?this.playingStream=l.shift():i&&(this.playingStream=i,this.runtime.ctx.emit(ce.a.STATE_CHANGE,{state:"p2pInit",stream:this.playingStream,shouldEmit:!0}));break;case Bu.MID_ROLL:i&&(this.playingStream=i);break;case Bu.POST_ROLL:this.emit(Fu.END)}}else"ad::brief"===t.rollCategory?(this["delete"](t),t.destroy(),t.next?this.playingStream=t.next:i&&(this.playingStream=i,this.runtime.ctx.emit(ce.a.STATE_CHANGE,{state:"p2pInit",stream:this.playingStream,shouldEmit:!0}))):"patch"===t.rollCategory&&e&&(this["delete"](t),t.destroy(),r&&r.rollType==Bu.POST_ROLL?this.playingStream=r:this.emit(Fu.END))}else if(n)if(e)this.hasAvailablePatch?this.playingStream=a:r&&r.rollType==Bu.POST_ROLL?this.playingStream=r:this.emit(Fu.END);else{if(r&&r.rollType===Bu.MID_ROLL){var f=r.offset,h=t.currentTime;if(h>=f)return t.stopHighResTimer(),this.playingStream=r,this.seekStream(h+.1,t),void(o&&(o.needInitSegment=!0));h>=f-s?(c=!0,t.startHighResTimer()):t.stopHighResTimer()}var p=this.briefs,_=Object.keys(p);if(_.length>0){var v;for(v=0;v<_.length;v++){var g=_[v],y=p[g];Array.isArray(y)&&0!==y.length||delete p[g]}var m=Object.keys(p).sort().map((function(e){return parseFloat(e)}));if(m.length>0)for(v=0;v<m.length;v++){var b=m[v],k=t.currentTime,x=Math.floor(k),T=Math.round(b);if(x>T)delete p[b];else{if(x===T)return t.stopHighResTimer(),this.playingStream=p[b].shift(),this.seekStream(k+.1,t),void(o&&(o.needInitSegment=!0));c||(k>=b-s?(c=!0,t.startHighResTimer()):t.stopHighResTimer())}}}}}}},{key:"switchLevel",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3],i=arguments.length>4&&arguments[4]!==undefined&&arguments[4],a=this.$eventManager,o=this.playingStream,s=this.runtime,c=o.renderer,u=o.loader,d=o.playRanges,l=c.currentTime,f=o.loader.findPieceAt(l);if(o.levelSwitching=!0,r&&o.clearBuffers({rendererOnlyData:!0}),s.provideRawToStore(e,o),t)this.seekStream(d.start(0),o);else if(n||!c.currentTimeRange)r&&(a.once(o,ce.a.BUFFER_FLUSHED,(function(){u.seek(c.currentTime)})),c.$flushBuffer());else if(!i){var h=c.bufferInfo(l);this.seekStream(h.end,o,!0),f&&f.segment.startTime>1&&c.$flushBuffer(0,f.segment.startTime-1)}}},{key:"getCurrentADGas",value:function(){if(this.isAd){var e=this.adManager.getCurrentGas();if(e&&e.gas)return e.gas}return null}},{key:"abortCurrentADGas",value:function(){var e=this.adManager,t=this.runtime;if(e&&this.isAd){var n=e.getCurrentGas();if(n){var r=e.stream,i=r.loader,a=r.rollType,o=n.fragIdx===i.fragments.length-1;t.error&&(t.error=null),o?this.abortRollingStream(a):e.abortCurrentGas(n)}}}},{key:"abortRollingStream",value:function(e,t){var n=this;if(this.isRolling&&(null===e||e===this.rollingType)){if(Object(Q.g)(t)){!function(e){var t=n.episodeStream;n.matStream;if(t){var r=!1,i=t.duration,a=e;if(0===i)return;e<0?(r=!0,e=0):e>i&&(r=!0,e=i<=1?0:i-1),r&&P.a.warn("episode recovery point is fixed from ".concat(a," to ").concat(e)),n.seekStream(e,t)}}(t)}this.endOfPlayingStream()}}},{key:"switchAudioTrack",value:(r=I()(E.a.mark((function c(e){var t,n,r,i=arguments;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=i.length>1&&i[1]!==undefined&&i[1],this.playingStream){a.next=3;break}return a.abrupt("return");case 3:t="boolean"==typeof t?t:this.runtime.conf.switchVariantImmediate,n=this.playingStream.renderer,r="immediate: ".concat(t),e?(t&&n.$flushBuffer(),P.a.log("switch to variant audio track, ".concat(r)),n.variantAudioMode=!0):(P.a.log("switch to original audio track, ".concat(r)),n.variantAudioMode=!1),this.loadAltAudio_(e,t);case 8:case"end":return a.stop()}}),c,this)}))),function(e){return r.apply(this,arguments)})},{key:"loadAltAudio_",value:(t=I()(E.a.mark((function u(e,t){var r,i,a,o,s,c,d,l;return E.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.e(6).then(n.bind(null,704));case 2:if(r=u.sent,i=r.MAT,a=this.runtime,o=this.playingStream,s=o.renderer,(c=o.audio)||(o.registerAudioPack(i,a),c=o.audio),!e){u.next=14;break}return c.enabled=!0,u.next=12,c.push(e);case 12:u.next=17;break;case 14:c.enabled=!1,c.reset(),o.mux||(o.restrictor.needSendAudioInitSegment=!0);case 17:o.clearBuffers({rendererFlushMedia:!1}),d=s.currentTime,l=t?d:s.bufferInfo(d).end,this.seekStream(l,o,!0);case 21:case"end":return u.stop()}}),u,this)}))),function(e,n){return t.apply(this,arguments)})}]),o}(Wu);Ju([F.c],ed.prototype,"eot",null),Ju([F.c],ed.prototype,"isAd",null),Ju([F.c],ed.prototype,"isQBBPatching",null),Ju([F.c],ed.prototype,"patchStream",null),Ju([F.c],ed.prototype,"episodeStream",null),Ju([F.c],ed.prototype,"bufferInfo",null),Ju([F.c],ed.prototype,"mediaBufferInfo",null),Ju([F.c],ed.prototype,"dataBufferInfo",null),Ju([F.c],ed.prototype,"add",null),Ju([F.c],ed.prototype,"delete",null),Ju([F.c],ed.prototype,"getCurrentADGas",null),Ju([F.c],ed.prototype,"abortCurrentADGas",null),Ju([F.c],ed.prototype,"abortRollingStream",null),Ju([F.c],ed.prototype,"switchAudioTrack",null);var td=new Map;td.set("events",ce.a),td.set("manifestTypes",et),td.set("errorCodes",ke.a),td.set("timeline/pcw-vod",ed),td.set("manifest/hls",xc),td.set("loader/hls",mt),td.set("mux/m2ts-mp4",Rc.a),td.set("manifest/flv",mc),td.set("loader/flv",ft),td.set("mux/flv-mp4",Oc.a),td.set("manifest/jdash",Ac),td.set("manifest/dash",vc),td.set("loader/dash",rt),td.set("manifest/mp4",qc),td.set("loader/mp4",Pt),td.set("mux/mp4-fmp4",Lc.a),td.set("loader/p2p",Cs),td.set("renderer/mse",eu);var nd=n(385),rd=new Map;function id(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n],i=rd.get(r);P.a.assert(!!i,"the <<".concat(r,">> component is not installed")),i&&t.push(i)}return t}n(376);var ad=n(576);function od(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function sd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var cd=function(e){l()(n,e);var t=sd(n);function n(e){var r;return a()(this,n),(r=t.call(this)).isPreload=!1,r.isPreload=!!e,r}return s()(n,[{key:"destroy",value:function(){this.timeline&&(this.timeline.destroy(),this.timeline=null)}},{key:"reset",value:function(){this.timeline&&this.timeline.reset()}},{key:"setup",value:function(e,t){var n=e.params.dynamic.timeline,r=t.get(n);this.timeline=new r(e,this.isPreload)}},{key:"registerPacksIntoStream",value:function(e,t,n){var r,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,o=arguments.length>5?arguments[5]:undefined,s=id(t);switch(e){case Ru.Roll:r=new Mu;break;case Ru.Episode:r=new Uu;break;default:P.a.error("kernel met unknown content streamType ".concat(e))}for(var c=0;c<s.length;c++){var u=s[c],d=Object.getPrototypeOf(u);switch(d){case Fs:r.manifest=new u(Eu(n,r));break;case Y:r.loader=new u(Eu(n,r));break;case ad.a:r.mux=new u(Eu(n,r));break;case Nc:r.renderer=new u(Eu(n,r))}}return r.silenced=this.isPreload,r.compLiterals=t,r.range(i,a),r instanceof Mu&&this.timeline.configureRoll(o.roll,r),this.timeline.add(r),r}}]),n}(function(e){l()(n,e);var t=od(n);function n(){return a()(this,n),t.apply(this,arguments)}return n}(Tu.a));var ud,dd={components:{manifest:[],loader:[],mux:[],renderer:[]}},ld=function Vg(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};a()(this,Vg),this.muxWorker=!0,this.switchVariantImmediate=!1,this.alwaysSeekKeyframe=!1,this.bufferExpectLength=5,this.mediaMaxDuration=86400,this.highBufferThreshold=3,this.nudgeOffset=.1,this.nudgeMaxRetry=3,this.maxBufferHole=.5,this.maxBufferTimeLength=60,this.hlsRangeTSTolerance=5,this.hlsMaxSegmentSearchTolerance=.25,this.drm={retryParameters:{maxRetry:3,timeout:6e3}},this.datasource={retryParameters:{maxRetry:2,timeout:2e4}},this.loaderWithBufferMaxRetry=3,this.loaderNoBufferMaxRetry=1,this.fpsStuckMonitoringPeriod=5,this.safariMinStartTime=.2;var t=Bc.a.CHROME&&(Bc.a.version.major<50||50===Bc.a.version.major&&Bc.a.version.build<2661);this.alwaysSeekKeyframe=!!(t||Bc.a.EDGE||Bc.a.IE),Object(J.a)(this,e)},fd=function Hg(){a()(this,Hg),this.global={},this.dynamic={}};!function(e){e[e.STOP=0]="STOP",e[e.START=1]="START",e[e.MEDIA_METADATA=2]="MEDIA_METADATA",e[e.MEDIA_SEEKING=3]="MEDIA_SEEKING",e[e.DATA_SEEKING=4]="DATA_SEEKING"}(ud||(ud={}));var hd=function(){function e(){a()(this,e),this._status=ud.STOP,this.levels=ud,this.targetTime=null}return s()(e,[{key:"progressing",get:function(){return this.status>=ud.START}},{key:"status",get:function(){return this._status},set:function(e){if(e===ud.STOP)this.targetTime=null;else if(e!=this._status+1)return;P.a.log("recover status is ".concat(e)),this._status=e}}]),e}();function pd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var _d=function(e){l()(n,e);var t=pd(n);function n(e){var r;return a()(this,n),(r=t.call(this)).params=new fd,r.conf=new ld,r.store=yu(),r.recoverProcedure=new hd,r.ctx=e,r}return s()(n,[{key:"mixinConfigure",value:function(e){var t=this.conf;for(var n in e)Object(At.e)(t,n)&&Object(J.a)(t,y()({},n,e[n]))}},{key:"mixinDynamicParams",value:function(e){Object(J.a)(this.params.dynamic,e||{})}},{key:"throwError",value:function(e){var t=this.ctx,n=this.recoverProcedure;(P.a.assert(e instanceof ye.a,"Wrong error type!"),null==this.error&&e instanceof ye.a)&&(this.error=e,e.severity===me.a.RECOVERABLE&&n.progressing&&(n.status=n.levels.STOP),t.emit(U.a.PRE_ERROR,e),t.emit(U.a.ERROR,e))}},{key:"provideRawToStore",value:function(e,t){this.store.dispatch(mu(j.a.DEPOSIT_RAWNESS,e,{stream_uid:t.uuid}))}}]),n}(ee.EventEmitter);function vd(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gd(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var md=new xu;md.add(0,Number.POSITIVE_INFINITY);var bd=function(e){l()(n,e);var t=yd(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).eventManager_=new Z.a,i.allowJumpGapDirectly=!1,i.stats={},i.runtime=new _d(u()(i)),i.config=i.runtime.conf,i.syntheticCfg=dd,i.runtime.rootElement="string"==typeof e?document.querySelector(e):e,Object(J.a)(i.runtime.params,r||{}),i.runtime.mixinConfigure(r),i.runtime.mixinDynamicParams(r),i.initContent_(!0),i}return s()(n,[{key:"timeRanges",get:function(){return null},set:function(e){this.current.timeline.playingStream.range(null,e)}},{key:"isRolling",get:function(){return this.current.timeline.isRolling}},{key:"rebooting",get:function(){return this.runtime.recoverProcedure.progressing}},{key:"allowSwitchVariant",get:function(){var e=this.current.timeline.playingStream,t=e.loader,n=e.renderer;return!t.eof||n.hasOperateBufferData}},{key:"preloaded",get:function(){return!!this.preload&&this.preload.timeline.size>0}},{key:"options_",value:function(e){return Object(J.a)({streamType:Ru.Episode,dynamicArgs:{},components:[],isCurrent:!0,parseMftOnly:!1},e||{})}},{key:"initContent_",value:function(e){var t,n=this;return e?this.current=t=new cd(!1):this.preload=t=new cd(!0),t.setup(this.runtime,rd),e&&(t.timeline.bindApis(),this.eventManager_.on(t.timeline,Fu.END,(function(){n.preloaded&&n.switchCS_()}))),t}},{key:"switchCS_",value:function(){var e=this.current,t=this.preload;this.emit(U.a.TIMELINE_SWITCHING),P.a.log("switch timeline content");var n,r=vd(e.timeline.streams);try{for(r.s();!(n=r.n()).done;){n.value.destroy()}}catch(s){r.e(s)}finally{r.f()}e.timeline.clear();var i,a=vd(t.timeline.streams);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.silenced=!1,e.timeline.add(o)}}catch(s){a.e(s)}finally{a.f()}t.timeline.clear(),this.emit(U.a.TIMELINE_SWITCHED)}},{key:"loadSource",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:md,r=arguments.length>3?arguments[3]:undefined,i=this.options_(r);i.isCurrent||this.preload||this.initContent_(!1);var a=i.isCurrent,o=i.components,s=i.dynamicArgs,c=i.streamType,u=(i.parseMftOnly,i.roll,this.runtime),d=this.current,l=this.preload,f=a?d:l,h=f.timeline.findAdaptedStream(i);u.mixinDynamicParams(s),h||(h=f.registerPacksIntoStream(c,o,u,t,n,r)),u.provideRawToStore(e,h)}},{key:"switchLevel",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],r=arguments.length>3&&arguments[3]!==undefined&&arguments[3],i=arguments.length>4?arguments[4]:undefined,a=this.runtime,o=this.current,s=this.options_(i),c=s.components,u=s.dynamicArgs,d=s.streamType,l=o.timeline.playingStream,f=l.renderer,h=l.mediaRanges,p=f.currentTime,_=!1;if(a.mixinDynamicParams(u),i&&Array.isArray(c)&&Object(zu.a)(c,l.compLiterals).length>1){var v=h.clone();this.reset(),o.registerPacksIntoStream(d,c,a,p,v,i),_=!0}e.isSwitchLevel=!0,P.a.log("switching level, immediate: ".concat(t,", paused: ").concat(f.paused,", clearBuffer: ").concat(n,", abr: ").concat(r,", currentTimeRange: ").concat(nd.a.stringify(f.currentTimeRange))),o.timeline.switchLevel(e,_,t,n,r)}},{key:"recoverMedia",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1,t=this.runtime,n=this.current,r=.5,i=t.recoverProcedure,a=n.timeline.playingStream;a&&((e=(e=Object(Q.j)(e)?parseFloat(e):e)>=0?e:a.currentTime)>=a.duration-r&&(e=a.duration-r),P.a.log("kernel will recovery from ".concat(e)),t.error=null,i.status=i.levels.START,i.targetTime=e,a.recoverImmediately(e))}},{key:"reset",value:function(){[this.current,this.preload].forEach((function(e){e&&e.reset()}))}},{key:"destroy",value:function(){[this.current,this.preload].forEach((function(e){e&&e.destroy()})),this.eventManager_.destroy()}}]),n}(ee.EventEmitter);function kd(){return(kd=I()(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],R.forEach((function(e,r){t.push(r),n.push(e())})),e.abrupt("return",Promise.all(n).then((function(e){for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];t||e.clear(),e.forEach((function(e,t){rd.has(t)?P.a.warn("kernel encounter duplicate component ".concat(e.constructor.name," from glue")):rd.set(t,e)}))}(td);var xd=rd.get("events")||U.a,Td=rd.get("manifestTypes")||{},Sd=rd.get("errorCodes")||{},Pd=n(15),wd=n(258),Id=n(14),Ad=n(7),Ed=n(88),Dd=n(118),qd=n(26),Od=n(141),Rd=n(194),Ld=n(117),Cd=n.n(Ld),Md={Status_Idle:"idle",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadFailed:"error",Status_LoadedMetaData:"loadedmetadata",Status_Canplay:"canplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Will_Stoped:"willended",Status_Stoped:"ended",Status_Stalled:"stalled",Status_Playing_Fail:"muted",NTF_StatusChanged:"statusChanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",Action_Type_Controls:"controls",Action_Type_Code:"code",Action_Type_Native:"native"},Nd=n(28),Bd=n(82),Fd=n(20),Ud=n(113),jd=window.location.protocol,Vd="420a8433732a6c99d1eae98fea69e55d/dash";/^http/.test(jd)||(jd="https:");var Hd={vipauthUrl:"https://api.vip.iqiyi.com/services/cknsp.action",tsvipauthUrl:"https://api.vip.iqiyi.com/services/ckts.action",h5tmtsUrl:jd+"//cache.m.iqiyi.com/jp/tmts/",vmsUrl:jd+"//cache.video.iqiyi.com/dash",vmsAccess:jd+"//103.44.59.54/3ea",vmsIPSuc:jd+"//{{IP}}/3ea/"+Vd,vmsIPFail:jd+"//access.if.iqiyi.com/3ea/"+Vd,pingbackV6Url:jd+"//msg.qy.net/b",pingbackQosUrl:jd+"//msg.qy.net/qos",isfanUrl:jd+"//sns-api.iqiyi.com/apis/friend/follow.action",IVHistory:"".concat(jd,"//iface2.iqiyi.com/lazy_cat/1.0/last_point"),IVZip:"".concat(jd,"//iface2.iqiyi.com/lazy_cat/1.0/interact_info"),IVSevice:"".concat(jd,"//iface2.iqiyi.com/lazy_cat/1.0/interactive"),IVFullpoints:"".concat(jd,"//iface2.iqiyi.com/lazy_cat/1.0/full_points"),IVStoryLine:"".concat(jd,"//iface2.iqiyi.com/lazy_cat/2.0/linear_story_line")},Wd=n(91),zd={},Yd=new Id.a("authremote"),Gd={getRequestURL:function(e){var t={version:"10.0",platform:"01010031010000000000",deviceId:qd.a.getFluid()||qd.a.getJsuid(),uid:Bd.a.getUid(),playType:"pcwh5",shareFlag:0,appname:"h5",dfp:Ud.a.get(),messageId:"h5_"+qd.a.createUUID().replace(/-/gi,"")};return Wd.a.isTWLocale()&&(t.platform=Ad.a.getPtid(!0)),Object(Fd.a)(e,t),(e.fileFormat&&"f4v"!=e.fileFormat?Hd.tsvipauthUrl:Hd.vipauthUrl)+"?"+Nd.a.serializeParam(e)},getPreviewTime:function(e){var t=zd[e];if(t){var n=0;return t.data&&t.data.prv&&1==t.data.prv&&(1==t.previewType?n=60*t.previewTime*1e3:3==t.previewType&&(n=1e3*t.previewTime)),n}Yd.log("wrong time to invoke getPreviewTime!")},getAuthUid:function(e){var t=zd[e];if(t){if(t.data&&t.data.u)return t.data.u}else Yd.log("wrong time invoke getAuthUid is wrong!")},analyzeAuthData:function(e,t,n,r){var i=1==e.shareFlag,a=e.tvid;t&&t.hasOwnProperty("code")?(Yd.log("analyze authremote data,params: isShare = "+(i?"fgtw(分甘同味)":"")+",code = "+t.code),"A00000"===t.code?(t.bossKeyTime=+new Date,zd[a]=t,n(a,t)):r(t.code,"CKNSP_RECHARGE_"+t.code,t)):r(null,"CKNSP_DATA_Fail")},request:function(e,t,n){var r=this,i=0;!function a(){i++;var o=r.getRequestURL(e);2===i&&(o=o.replace(/^https/gi,"http")),Nd.a.json({url:o,timeout:5e3,beforeSend:function(e){return Yd.log("check charge definition,params: url = "+e.url),e},success:function(i){r.analyzeAuthData(e,i,t,n)},failure:function(e,t){i<2?a():n(null,"CKNSP_HTTPFail")}})}()}},Qd=n(81),Kd=n(89),$d=n(36),Zd=n(100);var Xd=function(){var e=(Pd.a.get("QC005",{memory:!0})||"").substr(0,1);return parseInt(e,16),{canaryVP9_P2P:false,canaryVP9_CDN:false,canaryVP9:false,canaryAV1_P2P:false,canaryAV1_CDN:false,canaryAV1:false,canaryHEVC:"true"===Dd.a.query("__hevc__"),canaryDCache:!0}},Jd=n(339),el=new Id.a("DashRemote"),tl=0,nl=!1;function rl(){var e="QiyiPlayerSupported",t="0.0.7";return new Promise((function(n){var r;function i(){(function(){return kd.apply(this,arguments)})().then((function(r){r.ver=t,r.drm&&"fullfilled"===r.drm.status&&Ed.a.write(e,JSON.stringify(r)),n(r)}))}var a=Ed.a.read(e);a&&(r=JSON.parse(a)).ver===t?n(r):i()}))}var il=function(){function e(){a()(this,e),this.requestIsAbandoned=!1,this.vmsParams=null,this.vmsXhrRequest=null}return s()(e,[{key:"request",value:function(e,t,n){var r=e.params,i=!!e.hostUseIP,a=null,o=e.params.tryCount||0,s=e.sptr,c=e.pingback,u=this,d=Xd(),l=d.canaryVP9,f=d.canaryAV1,h=d.canaryHEVC,p=d.canaryDCache;return s&&(s.adirqstm=+new Date),Promise.all([rl(),new Promise((function(e){Bd.a.getVipTypes((function(t){e(t)}))}))]).then((function(e){var d=hn()(e,2),_=d[0],v=d[1];_&&(_.drm&&(_.drm["com.widevine.alpha"]?(Zd.a.openBit(1,42),nl=!0,el.log("dashremote feature open widevine")):Zd.a.closeBit(1,42),_.drm["com.microsoft.playready"]?(Zd.a.openBit(4,5),nl=!0,el.log("dashremote feature open playready")):Zd.a.closeBit(4,5),nl?(Zd.a.openBit(4,20),Zd.a.openBit(4,21)):(Zd.a.closeBit(4,20),Zd.a.closeBit(4,21))),_.media&&(h&&_.media['video/mp4; codecs="hvc1.1.6.L93.90"']?(f=!1,l=!1,Zd.a.openBit(2,1),Zd.a.openBit(2,2),Zd.a.openBit(2,3),Zd.a.openBit(2,4),Zd.a.openBit(2,5),Zd.a.openBit(2,6)):(Zd.a.closeBit(2,1),Zd.a.closeBit(2,2),Zd.a.closeBit(2,3),Zd.a.closeBit(2,4),Zd.a.closeBit(2,5),Zd.a.closeBit(2,6)),l&&_.domParser&&_.media['video/webm; codecs="vp09.00.40.08"']&&!(Ad.a.browser.EDGE&&Ad.a.browser.version<=18)?Zd.a.openBit(4,28):Zd.a.closeBit(4,28),f&&_.domParser&&_.media['video/webm; codecs="av01.0.08M.08"']?Zd.a.openBit(4,41):Zd.a.closeBit(4,41))),s&&(s.adirqetm=+new Date);var g=r.tvid,y=r.vid,m=601===r.vd?600:r.vd,b=r.ppt,k=r.ost,x=r.spt;s&&(s.adlstm=+new Date);var T=Cd.a.cmd5xdash();s&&(s.adletm=+new Date);var S=tl>0?tl:T.tm;tl=0;var P,w=r.ugcAuthKey||"",A=Ad.a.getPtid(Wd.a.isTWLocale());s&&(s.psdkietm=+new Date,s.vcistm=+new Date),P={tvid:g,bid:m,vid:y,src:A,vt:0,rs:1,uid:Bd.a.getUid(),ori:"pcw",ps:r.switchvd?1:0,k_uid:qd.a.getFluid()||qd.a.getJsuid(),pt:0,d:0,s:"",lid:"",cf:"",ct:"",authKey:Object(Kd.a)(Object(Kd.a)(w)+S+""+g),k_tag:1,ost:k,ppt:b,dfp:Ud.a.get(),locale:Wd.a.isTraditionalChinese()?"zh_tw":"zh_cn",prio:r.prio||Id.a.stringify({ff:"f4v",code:2}),pck:Bd.a.passportCookie(),k_err_retries:o,up:w,spt:x},(P=Object(Fd.a)(P,T)).tm=S,(Ad.a.os.ios||Ad.a.os.android)&&(P.ori="h5"),r.src&&(P.src=r.src),r.preIdAll&&(P.preIdAll=r.preIdAll),r.lid&&(P.lid=r.lid,P.cf=2),-1!=P.prio.indexOf("m3u8")?P.k_ft1=Zd.a.getM3U8FT1():-1!=P.prio.indexOf("mp4")?P.k_ft1=Zd.a.getMP4FT1():(P.k_ft1=Zd.a.getFT1(),P.k_ft4=Zd.a.getFT4()),r.k_ft1&&(P.k_ft1=r.k_ft1),Zd.a.getFT2()>0&&(P.k_ft2=Zd.a.getFT2()),Zd.a.getFT5()>0&&(P.k_ft5=Zd.a.getFT5()),Wd.a.isTraditionalChinese()&&(P.locale="zh_tw"),"0"===Pd.a.get("QC004",{memory:!0})&&(P.vv="821d3c731e374feaa629dcdaab7c394b"),i&&(P.ecode="701"),P.bop=Id.a.stringify({version:"10.0",dfp:Ud.a.get()}),a=P,u.vmsParams=a,c&&c.sendVrsRequestPingback(a);var D=function(e){var r;u.requestIsAbandoned?el.log("dashremote is abandoned!!!"):u.vmsXhrRequest=Nd.a.json({url:e,params:a,memory:!0,timeout:5e3,beforeSend:(r=I()(E.a.mark((function o(e){var t,n,r,s;return E.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=Dd.a.parse(e.url).host,v.forEach((function(t){e.url+="&ut="+t,$d.a.isArray(a.ut)||(a.ut=[]),a.ut.push(parseInt(t,10))})),!p){o.next=7;break}return o.next=5,Jd.a.hcdnProxy(e.url);case 5:null!==(n=o.sent)&&(e.url=n);case 7:r="iloveiqiyi";try{s=e.url.replace(new RegExp("^(http|https)://"+t,"ig"),""),i&&(s=s.replace("/3ea/420a8433732a6c99d1eae98fea69e55d","")),r=Cd.a.cmd5x(s)}catch(c){el.error("request, cmd5x error, catchinfo: "+(c.message?c.message:c))}return e.url+="&vf="+r,el.log("load movie: ".concat(e.url)),o.abrupt("return",e);case 12:case"end":return o.stop()}}),o)}))),function(e){return r.apply(this,arguments)}),success:function(e){if(u.requestIsAbandoned)el.log("start vms request success callback is abandoned!!!");else if(s&&(s.vcietm=+new Date),c&&c.sendVrsReadyPingback(a,e),el.log("dashremote, success."),e&&Object.prototype.hasOwnProperty.call(e,"code"))"A00000"===e.code?t(e):("A00020"===e.code&&e.tm&&(tl=e.tm),n(e));else{var r={};r.code=Qd.a.P00002,n(r)}},failure:function(e){if(u.requestIsAbandoned)el.log("start vms request failure callback is abandoned!!!");else{el.error("dash fail raw json data->"+e);var t={};t.code=Qd.a.P00001,n(t)}}})};i?(el.info("dashremote, ip, url = "+Hd.vmsAccess),Nd.a.ajax({url:Hd.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";"),n=t[Math.floor(Math.random()*t.length)];el.info("dashremote, ip ok "),D(Hd.vmsIPSuc.replace("{{IP}}",n))}else el.info("dashremote, ip fail , data = "+e),D(Hd.vmsIPFail)},failure:function(e){el.info("dashremote, ip fail , data = "+e),D(Hd.vmsIPFail)}})):D(Hd.vmsUrl)})),this}},{key:"getReqParams",value:function(){return this.vmsParams}},{key:"getXhrRequest",value:function(){return this.vmsXhrRequest}},{key:"setReqAbandoned",value:function(){this.requestIsAbandoned=!0}}]),e}(),al="01080031010000000000",ol="01080031010010000000",sl="03020031010000000000",cl="03020031010010000000",ul="03030031010000000000",dl="03030031010010000000",ll="02020031010000000000",fl="02020031010010000000",hl="",pl=function(){return hl=Ad.a.browser.iPad?Wd.a.isTWLocale()?dl:ul:Ad.a.os.mac?Wd.a.isTWLocale()?ol:al:Ad.a.os.androidTablet?Wd.a.isTWLocale()?cl:sl:Wd.a.isTWLocale()?fl:ll,Wd.a.isTWLocale()&&(hl=Ad.a.getPtid(!0)),hl},_l=window.location.protocol;function vl(e,t){var n=_l+e.baseUrl+t,r=Dd.a.filename(n);if(e.isVIP){var i=e.boss.data.t||"",a=e.boss.data.u,o=Cd.a.cmd5x(i+r);n=n+"&t="+i+"&vid="+e.vid+"&ibt="+o+"&cid=afbe8fd3d73448c9&ib=4&ptime="+Gd.getPreviewTime(e.tvid)+"&QY00001="+a}else n=n+"&cross-domain=1&qyid="+(qd.a.getFluid()||qd.a.getJsuid())+"&qypid="+e.tvid+"_"+pl();return n}var gl=function(e,t){var n={},r=[];n.types=[],n.audio={};for(var i=e.audio,a=0;a<i.length;a++){var o={},s=i[a];-1==r.indexOf(s.lid)&&(o.id=s.lid,o.ispre=1==s.ispre?1:0,o.name=s.name||"其他",1==s.ispre&&(e.currentLid=s.lid),r.push(s.lid),n.types.push(o)),s.fs&&(n.audio=s)}if(t&&n.audio&&n.types.length>1)for(var c=n.audio.fs,u=0;u<c.length;u++)c[u].dpl=vl(e,c[u].l);return n},yl=new Id.a("AnalyzeVidls");function ml(e,t){var n;t||(n=[]);var r=e.filter((function(e){return"265ts"===e.ff}));r.length>0&&(e=r);for(var i=0;i<e.length;i++){var a=e[i],o=a.fs,s="",c=a.vid,u=x.a.getOldVd(a.bid),d=a.dr,l=a.s,f=a.drmType,h={},p=a.duration||0,_=a.vsize,v=a.mver,g="";if(o&&a.scrsz){var y=a.scrsz.split("x");h={width:y[0],height:y[1]}}switch(a.ff){case"f4v":case"flv":s="f4v",a.fs&&a.fs.length>0&&(g=a.fs);break;case"ts":case"265ts":s=a.ff,"string"==typeof a.m3u8&&a.m3u8.length>0&&(g=a.m3u8);break;case"m4s":s=a.ff,"string"==typeof a.m3u8&&a.m3u8.length>0&&(g={m3u8:a.m3u8},a.drm&&"A00000"===a.drm.code&&(g.drm={keySystemServer:a.drm.license_host},7===f?g.drm.keySystem="com.widevine.alpha":8===f&&(g.drm.keySystem="com.microsoft.playready"),yl.log("analyze  drmType 7widevine/8playready = "+f+",keySystem"+g.drm.keySystem+", server = "+g.drm.keySystemServer)));break;case"dash":switch(a.code){case 4:s="dash_vp9";break;case 5:s="dash_av1"}"string"==typeof a.m3u8&&a.m3u8.length>0&&(g=a.m3u8);break;case"mp4":"string"==typeof a.mp4Url&&a.mp4Url&&(g=a.mp4Url,s="mp4")}var m=!1,b=!0,k=[];void 0!==l&&(m=!0,b=0===parseInt(l,10),k=a.vut||[]);var S=0;a.drm&&(S=a.drm.watermark||0),e[i].watermark&&(S=e[i].watermark||0),5===u&&4===d&&(u=51);var P=new T(u,c,s,p,_,h,b,m,k,g,f,S,d,v);if(t)u==t&&(g?n=P:yl.log("analyze, targetvd is null, targetVd=".concat(t," ")));else{for(var w=!1,I=0;I<n.length;I++)n[I].vd==P.vd&&(w=!0,g&&(n[I]=P));w||n.push(P)}}return n}function bl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var kl={},xl=function(e){l()(n,e);var t=bl(n);function n(e){var r;return a()(this,n),(r=t.call(this))._curStatus="",r.hasSeeking=!1,r.seekableFlag=!0,r.__beforeSeekTime=0,r._userGesturePlayed=!1,r._currentManualAction=null,r._currentCodeActionList=[],r.delogger=new Id.a("Decode[".concat(e.id,"]")),r}return s()(n,[{key:"init",value:function(e){var t=this,n=arguments;this._video=e;var r=function(n){if(""!==e.src){var r=n.status;t.emit(Md.NTF_StatusChanged,n),t._curStatus=r,r===Md.Status_Playing?t._playing=!0:t._playing=!1}},i=function(e){if(t._currentManualAction&&t._currentManualAction===e)return t._currentManualAction=null,Md.Action_Type_Controls;if(-1!=t._currentCodeActionList.indexOf(e)){var n=t._currentCodeActionList.indexOf(e);return t._currentCodeActionList.splice(n,1),Md.Action_Type_Code}return Md.Action_Type_Native};this._setSrc=function(e){1===n.length&&(t.__beforeSeekTime=0,t._video.setAttribute("src",e),Ad.a.os.ios||t._video.load())},kl.loadstart=function(){t.__beforeSeekTime=0,r({status:Md.Status_Loadstart,actionType:Md.Action_Type_Native})},e.addEventListener("loadstart",kl.loadstart),kl.error=function(){t.__beforeSeekTime=0,r({status:Md.Status_LoadFailed,actionType:Md.Action_Type_Native})},e.addEventListener("error",kl.error),kl.stalled=function(){r({status:Md.Status_Stalled,actionType:Md.Action_Type_Native})},e.addEventListener("stalled",kl.stalled),kl.loadedmetadata=function(){r({status:Md.Status_LoadedMetaData,actionType:Md.Action_Type_Native})},e.addEventListener("loadedmetadata",kl.loadedmetadata),kl.canplay=function(){r({status:Md.Status_Canplay,actionType:Md.Action_Type_Native})},e.addEventListener("canplay",kl.canplay),kl.ended=function(){if(!1===t.seekableFlag&&Math.abs(t._getDecodeDuration()-t.__beforeSeekTime)>2)return t._seek(t.__beforeSeekTime)},e.addEventListener("ended",kl.ended),kl.canplaythrough=function(){t.emit({type:Md.NTF_CanPlayThrough,data:{actionType:Md.Action_Type_Native}})},e.addEventListener("canplaythrough",kl.canplaythrough),kl.volumechange=function(){t.emit(Md.NTF_VolumeChanged,{data:t._video.volume,actionType:Md.Action_Type_Native})},e.addEventListener("volumechange",kl.volumechange),kl.ratechange=function(){t.emit(Md.NTF_RateChanged,{data:t._video.playbackRate,actionType:Md.Action_Type_Native})},e.addEventListener("ratechange",kl.ratechange);var a=(new Date).getTime(),o=0;kl.timeupdate=function(){var n=t.getCurrenttime();if(!e.seeking&&Math.abs(n-t.__beforeSeekTime)<1.2)t.__beforeSeekTime=n;else if(!1===t.seekableFlag)return t._seek(t.__beforeSeekTime);if(!("number"==typeof e.readyState&&e.readyState<=1||t.isPaused())){var r=(new Date).getTime();r-a>500&&(clearTimeout(o),a=r,o=setTimeout((function(){t.isPaused()||t.emit(Md.NTF_TimeUpdate,{current:t.getCurrenttime(),duration:t.getDuration(),buffer:t.getBufferTime(),actionType:Md.Action_Type_Native})}),0)),t._playing||(t.hasSeeking=!1)}},e.addEventListener("timeupdate",kl.timeupdate),r({status:Md.Status_Idle}),this._statusChanged=r,this._checkActionType=i}},{key:"video",value:function(){return this._video}},{key:"removeAllEventsListener",value:function(){this._video.removeEventListener("loadstart",kl.loadstart),this._video.removeEventListener("error",kl.error),this._video.removeEventListener("stalled",kl.stalled),this._video.removeEventListener("loadedmetadata",kl.loadedmetadata),this._video.removeEventListener("canplay",kl.canplay),this._video.removeEventListener("pause",kl.pause),this._video.removeEventListener("play",kl.play),this._video.removeEventListener("playing",kl.playing),this._video.removeEventListener("waiting",kl.waiting),this._video.removeEventListener("ended",kl.ended),this._video.removeEventListener("canplaythrough",kl.canplaythrough),this._video.removeEventListener("volumechange",kl.volumechange),this._video.removeEventListener("durationchange",kl.durationchange),this._video.removeEventListener("timeupdate",kl.timeupdate),this._video.removeEventListener("progress",kl.progress)}},{key:"play",value:function(e){var t=this,n=t._video;if(0!==n.readyState){e?this._currentManualAction=Md.Status_Play:this._currentCodeActionList.push(Md.Status_Play);var r=function(){t.delogger.log("decode play really invoked!");var e=n.play();if(e!==undefined){var r=new Promise((function(t,n){e.then((function(){t()}))["catch"]((function(e){n(e)}))}));return r["catch"]((function(e){t.delogger.warn("decode play got: "+e.message)})),r}};if(!Ad.a.os.ios&&!Ad.a.os.android)return r();this._userGesturePlayed?r():this.emit(Md.NTF_NeedUserGesture4Playback)}}},{key:"pause",value:function(e,t){var n=this._video.networkState;(t||0!==n&&3!==n)&&(this._video.readyState&&(e?this._currentManualAction=Md.Status_Paused:this._currentCodeActionList.push(Md.Status_Paused),this._video.pause()))}},{key:"isPaused",value:function(){return this._video.paused}},{key:"replay",value:function(){this._video.play(this._video.src)}},{key:"_seek",value:function(e,t){var n=this;if(!this._checkSeek||!1!==this._checkSeek(e)){this.hasSeeking=!0;var r=this._video.seekable;1===r.length&&r.end(0)>e?(t?this._currentManualAction=Md.NTF_Seeking:this._currentCodeActionList.push(Md.NTF_Seeking),e>=0&&e<=this.getDuration()&&(this._video.currentTime=e),this.isPaused()&&this.play()):setTimeout((function(){n._seek(e)}),10)}}},{key:"isSeeking",value:function(){return this.hasSeeking}},{key:"setDecodeSrc",value:function(e,t){var n=this;n._setSrc(e),this.delogger.debug("decode src current time :"+t);try{n._video.duration=0,n._video.buffered.length=0,t>0?n._video.addEventListener("loadedmetadata",(function e(){t<n.getDuration()&&n._seek(t),n._video.removeEventListener("loadedmetadata",e)}),!1):n._video.currentTime=0}catch(r){}}},{key:"getSrc",value:function(){return this._video.src}},{key:"getAudioTracks",value:function(){return this._video.audioTracks}},{key:"setAudioTracks",value:function(){}},{key:"getBuffered",value:function(){return this._video.buffered}},{key:"getDecodeCurrenttime",value:function(){var e=this.getDecodeDuration(),t=this._video.currentTime||0;return t<e?t:e}},{key:"getDecodeDuration",value:function(){return this._video.duration||0}},{key:"getVolume",value:function(){return this._video.volume}},{key:"setVolume",value:function(e){e>1&&(e=1),this._video.volume=e}},{key:"userGesturePlayed",value:function(){this._userGesturePlayed=!0}},{key:"getPlaybackRate",value:function(){return this._video.playbackRate}},{key:"setPlaybackRate",value:function(e){e>0&&(this.delogger.log("playbackRate => ".concat(e)),this._video.playbackRate=e)}}]),n}(v.a);function Tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Sl=function(e){l()(n,e);var t=Tl(n);function n(e,r,i){var o;return a()(this,n),(o=t.call(this)).engine=i,o.logger=new Id.a("DataReq[".concat(i.id,"]")),o.tryCount=0,o.maxTryCount=2,o.usedIp=!1,o.vmsRequest=null,o.DASH_RETRY_ARRAY=["A00001","A00003","A00004","A00020",Qd.a.P00001,Qd.a.P00002,Qd.a.P00003,Qd.a.P00004],o._movieinfo={tvid:e,vid:r,ugcAuthKey:i.movieinfo.ugcAuthKey,hasSendSencondAuthRemote:!1,pcaHas4k:!1},o}return s()(n,[{key:"startRequest",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this.engine,r=n.ptr,i=n.sptr,a=n.pingbackQOS,o=n.vd,s=n.ppt,c=n.ost,u=n.spt;this.tryCount++,this.usedIp=t,o=x.a.getNewVd(o),this.vmsRequest=(new il).request({params:{tvid:this._movieinfo.tvid||"",vid:this._movieinfo.vid||"",vd:o,ppt:s,ost:c,tryCount:this.tryCount-1,switchvd:!1,ugcAuthKey:this._movieinfo.ugcAuthKey||"",spt:u},hostUseIP:t,ptr:r,sptr:i,pingback:a},(function(t){e.parse(t)}),(function(t){var n=t.data?t.data.st:"";e.reject(0,Qd.a.DASH,t.code,n)}))}},{key:"reject",value:function(e,t,n,r){if(this.logger.warn("load movieInfo, fail, level: "+e+",type:"+t+",code:"+n+",st:"+r+", retry = "+this.tryCount),this.DASH_RETRY_ARRAY.indexOf(n)>-1){if(this.tryCount<this.maxTryCount)return void this.startRequest();if(!this.usedIp)return void this.startRequest(!0)}this.emit("reject",{level:e,type:t,code:n,st:r,movieinfo:this._movieinfo})}},{key:"resolve",value:function(){this.emit("resolve",this._movieinfo)}},{key:"parse",value:function(e){var t=this,n=this._movieinfo,r=this.logger,i=this.engine.isEnjoy,a=Qd.a.DASH,o="";try{var s=e.data;if(!function(e){var n=e.code;return null!=e.data&&Object.prototype.hasOwnProperty.call(e.data,"st")?(o=parseInt(e.data.st,10),!i||505!==o&&506!==o?!!(100<o&&o<200)||(r.error("movieinfo error,params: st = "+o),t.reject(0,a,n,o),!1):(r.warn("站外禁播"),t.reject(0,a,n,o),!1)):(r.error("movieinfo error,params:type = data.data null or st is lose"),t.reject(0,a,Qd.a.P00004),!1)}(e))return;r.log("load movieinfo,dash.st checked"),n.isTryWatch=!1,n.previewTime=Infinity,n.originalData=e,n.baseUrl=$d.a.protocolRevise(s.dd)||"//pcw-data.video.iqiyi.com/videos",n.tvid=s.tvid,n.albumId=s.aid||"",n.watermark=0,n.cid=s.cid,n.authShare=s.share||{},n.sid=0,n.vipTypes=s.content.vipTypes,n.ugc=Rd.a.isUGC(n.tvid),n.bossStatus=s.content.bossStatus,n.isVIP=s.content.bossStatus>0,n.vipBlock=0==s.content.nu,n.videoQipuId=s.tvid,n.prelude={headTime:s.p.bt,tailTime:s.p.et},n.qiyiProduced=1===s.content.isProduced,n.exclusive=1===s.content.exclusive,n.logoOpen=!0,n.topLogoOpen=!0,n.lowerLogoOpen=!0,s.p.lgh&&(n.lowerLogoOpen=-1==s.p.lgh.indexOf(2)&&-1==s.p.lgh.indexOf("2"),n.topLogoOpen=-1==s.p.lgh.indexOf(1)&&-1==s.p.lgh.indexOf("1"));var c=s.p.wmarkPos||0;if(n.logoOpen=-1!=c,n.ctt=0==s.content.ctt||1==s.content.ctt?s.content.ctt:-1,n.isBanned=110===parseInt(e.data.st,10),s.ctl&&(n.pcaHas4k=!!s.ctl.pcaHas4k),n.vidl=[],s.program&&s.program.video&&(n.vidl=ml(s.program.video),n.vidl.sort((function(e,t){return e.vd>t.vd})),n.vidl.unshift(n.vidl.pop())),s.parts&&s.parts.length>0){var u=s.parts[0];if(u.vs&&u.vs.length>0){var d=u.vs;d[0].ff="f4v",n.parts=ml(d,x.a.getOldVd(d[0].bid))}}n.audl={},s.program&&s.program.audio&&(n.audio=s.program.audio),n.duration=0,n.drmType=n.vidl.length>0?n.vidl[0].drmType:1;var l={};if(s.program&&s.program.stl&&s.program.stl.length>0)for(var f=s.program.stl,h=0;h<f.length;h++)1==parseInt(f[h].pre)&&(n.subtitlesUrl=$d.a.protocolRevise(s.dstl)+f[h].xml),l[f[h].lid]=$d.a.protocolRevise(s.dstl)+f[h].xml;n.subtitlesUrlMap=l,n.f4vInfo={};var p=e.data.p.pano;!p||2!=p.type&&3!=p.type&&4!=p.type?n.is3D=0:n.is3D=2;for(var _=n.vidl,v=0;v<_.length;v++){var g=_[v];if(g.playlist){n.vd=g.vd,n.watermark=g.watermark;break}}if(s.svp&&s.svp.length>0){for(var y=s.svp,m=y.length,b={data:[],ids:""},k=0;k<m;k++){var T={id:k,stars:y[k].sl.split(","),points:[],totalTime:0};b.ids+=y[k].sl+",";for(var S=y[k].vl,P=S.length,w=0;w<P;w++){var I=Number(S[w].sp),A=Number(S[w].ep);T.points.push({startTime:I,endTime:A}),T.totalTime+=A-I}T.points.sort((function(e,t){return e.startTime-t.startTime})),b.data.push(T)}n.svpinfo=b}if(n.isVIP){var E={};if(n.vidl.length>0)n.vidl.filter((function(e){return e.vd===n.vd})).length>0&&Object(Fd.a)(E,{tvid:n.tvid,aid:n.albumId});var D=s.boss_ts?"boss_ts":"boss",q=this;Object.prototype.hasOwnProperty.call(s,D)&&Object.prototype.hasOwnProperty.call(s[D],"code")?Gd.analyzeAuthData(E,s[D],(function(e,t){q.vipAuthSuccess(e,t)}),(function(e,t,n){q.vipAuthFail(e,t,n)})):this.vipAuth(E)}else n.audio&&(n.audl=gl(n,!1)),this.resolve()}catch(O){n=null,r.error(O.stack),this.reject(0,a,Qd.a.P00003,o)}}},{key:"getIsTennisContent",value:function(){var e=this._movieinfo;if(e.vipTypes&&e.vipTypes.length>0)for(var t=0;t<e.vipTypes.length;t++)if(1==e.vipTypes[t])return!0;return!1}},{key:"vipAuthSuccess",value:function(e,t){var n=this._movieinfo,r=this.logger,i=Gd.getPreviewTime(e);n.isTryWatch=1===parseInt(t.data.prv,10),n.previewType=t.previewType,n.previewTime=0===i?Infinity:i,this.getIsTennisContent()?n.authTipType=10:2===parseInt(t.content.vipMode,10)?n.authTipType=6:n.authTipType=parseInt(t.data.tip_type,10),n.vipTheatre=2===parseInt(t.content.vipMode,10),1==n.previewType?n.authRTime=60*t.data.rtime*1e3:3==n.previewType&&(n.authRTime=1e3*t.data.rtime),r.log("check charge definition pass,params: isTryWatch = "+n.isTryWatch+", previewType = "+n.previewType+", previewTime = "+i),n.vidl.filter((function(e){return e.vd===n.vd})),n.boss=t,n.audio&&(n.audl=gl(n,!1)),this.resolve()}},{key:"vipAuthFail",value:function(e,t,n){var r=this._movieinfo,i=this.logger,a=Qd.a.CKNSP;r.isTryWatch=!1,n&&(r.previewType=n.previewType),i.log("check charge definition error,params: code = "+e+", msg = "+t),e?"Q00312"==e||"Q00311"==e||"Q00501"==e?this.reject(2,a,e):this.reject(1,a,e):this.reject(0,a,Qd.a.P00005)}},{key:"vipAuth",value:function(e){var t=this;Gd.request(e,(function(e,n){t.vipAuthSuccess(e,n)}),(function(e,n,r){t.vipAuthFail(e,n,r)}))}},{key:"clear",value:function(){var e=this.vmsRequest;e&&(e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort(),this.vmsRequest=null)}}]),n}(v.a),Pl=function(){function e(t){a()(this,e),this.logger=new Id.a("DataProvider[".concat(t.id,"]")),this.engine=t,this.AllProviders={},this._retryMax=2}return s()(e,[{key:"getPid",value:function(e,t){return e+"_"+t}},{key:"hasPreload",value:function(e){return!(!this.AllProviders[e]||"fulfilled"!==this.AllProviders[e].st)}},{key:"getParams",value:function(e){return this.AllProviders[e]?this.AllProviders[e].params:null}},{key:"getData",value:function(e){return this.AllProviders[e].data}},{key:"clearAll",value:function(e){for(var t in this.AllProviders){if(e)new RegExp("^".concat(e,"_*")).test(t)&&(this.AllProviders[t].dq&&this.AllProviders[t].dq.clear(),delete this.AllProviders[t]);else this.AllProviders[t].dq&&this.AllProviders[t].dq.clear()}e||(this.AllProviders={}),this.logger.info("clear data provider & abandon vms request. tvid = "+e)}},{key:"getPromise",value:function(e,t){var n,r=this.getPid(e,t),i=this;return this.AllProviders[r]&&"pending"===this.AllProviders[r].st?n=this.AllProviders[r].pm:(n=new Promise((function(n,a){if(i.hasPreload(r))n(i.getData(r));else{i.AllProviders[r]={st:"pending",data:undefined,params:null,pm:null,dq:null,retryNum:0},i._retryNum=0;var o=new Sl(e,t,i.engine);o.on("resolve",(function(e){e.dataProviderPID=r,n(e),i.AllProviders[r]&&(i.AllProviders[r].st="fulfilled",i.AllProviders[r].params=o.vmsRequest.getReqParams(),i.AllProviders[r].data=e,i.AllProviders[r].dq=o)})),o.on("reject",(function(e){var t=o.DASH_RETRY_ARRAY.indexOf(e.code.toString())>-1;t&&(i.AllProviders[r].retryNum<i._retryMax?(i.AllProviders[r].retryNum++,o.tryCount=0,o.startRequest()):t=!1),t||(a(e),i.AllProviders[r]&&(i.AllProviders[r].st="rejected",i.AllProviders[r].data=e,i.AllProviders[r].dq=o))})),o.startRequest()}})),this.AllProviders[r].pm=n),n}},{key:"clearCache",value:function(e,t){var n=this.getPid(e,t);this.AllProviders[n]&&delete this.AllProviders[n]}}]),e}(),wl=window.location.protocol,Il=function(e,t){if(e)if(/[a-z]/i.test(e)){var n=function(){var n=I()(E.a.mark((function r(n){var i,a;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=Dd.a.parse(e),a=n+"/3f0/hd.cloud.iqiyi.com/d?dn="+i.host+"&business=pcwPlayer&cross-domain=1",Nd.a.ajax({url:a,withCredentials:!1,success:function(e){t(e)},failure:function(e){t(e)}});case 3:case"end":return r.stop()}}),r)})));return function(e){return n.apply(this,arguments)}}();Nd.a.ajax({url:Hd.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";");n(wl+"//"+t[0])}else n(Hd.dnsIPFail)},failure:function(e){n(Hd.dnsIPFail)}})}else t(e)},Al=n(308),El="1",Dl="10",ql="101";Ad.a.browser.iPad?(El="2",Dl="20",ql="202"):(Ad.a.os.ios||Ad.a.os.android)&&(El="2",Dl="20",ql="201");var Ol="window";Ad.a.os.ios||Ad.a.os.mac?Ol="mac":Ad.a.os.android&&(Ol="android");var Rl=new v.a,Ll=new Promise((function(e){var t=setTimeout((function(){e()}),2e3);Rl.once("ok",(function(){clearTimeout(t),e(),Rl=null}))})),Cl=new(function(){function e(){a()(this,e)}return s()(e,[{key:"os",get:function(){return Ol}},{key:"pf",get:function(){return El}},{key:"p",get:function(){return Dl}},{key:"p1",get:function(){return ql}},{key:"p_code",get:function(){return this.pf+"_"+this.p+"_"+this.p1}},{key:"getDrmType",value:function(e){var t="";if(e.drmType)switch(e.drmType){case 7:t=1;break;case 8:t=2}return t}},{key:"getPingbackDfp",value:function(e){function t(){return Ud.a.get()}return new Promise((function(n){Ll.then((function(){var r=t();r?n(r):e&&parseInt(e.t,10)>0?"undefined"==typeof window.dfp?Object(Al.a)("//security.iqiyi.com/static/cook/v1/cooksdk.js",(function(e){e&&"undefined"!=typeof window.dfp?(Ud.a.setSDK(window.dfp),n(t())):n("")})):(Ud.a.setSDK(window.dfp),n(t())):n("")}))}))}},{key:"browserName",value:function(){return Ad.a.browserName()}},{key:"noticeSenderFlush",value:function(){clearTimeout(this.__timer),this.__timer=setTimeout((function(){Rl&&Rl.emit("ok")}),50)}}]),e}());function Ml(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Nl=[],Bl=[],Fl=function(e){l()(n,e);var t=Ml(n);function n(){return a()(this,n),t.call(this)}return s()(n,[{key:"add",value:function(e,t){if($d.a.isArray(e))for(var n=0;n<e.length;n++)this.add(e[n],t);else{var r=!0===t?Bl:Nl;-1===r.indexOf(e)&&r.push(e)}}},{key:"remove",value:function(e){if($d.a.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{var n=Nl.indexOf(e);n>-1&&Nl.splice(n,1)}}},{key:"removeAll",value:function(){Nl.splice(0,Nl.length)}},{key:"has",value:function(e){return Nl.concat(Bl).indexOf(e)>-1}}]),n}(v.a),Ul=function(){function e(t){a()(this,e),this.proxy=t.playproxy,this.engine=t,this.logger=new Id.a("PlayProxyEvent[".concat(t.id,"]")),this.initFeatureDuration(),this.initDecode(),this.initKernelEvent(),Bd.a.beforeunloadListener();var n=this;this.unloadEvent=function(){t.pingbackV6.sendEndPlayPingback(3),n.sendStuckdetl(1)},window.addEventListener("beforeunload",this.unloadEvent),this._needPlay=!0,this._recoverMediaNum=0,this._recoverMediaPerNum=0,this._recoverMediaMax=3,this._dashAuthNum=0,this._dashAuthMax=2,this.waitingTimer=0,this._isRequestAuthing=!1,this._waitingStartTime=0,this.followUpNextLoadFlag=!1,this.statusPool=new Fl}return s()(e,[{key:"_statusChanged",value:function(e,t,n){var r=this.proxy,i=this.logger,a=this.getData();a.state=e,t&&(a.actionType=t.actionType||Md.Action_Type_Native,t.gas&&(a.gas=t.gas),t.spend&&(a.spend=t.spend)),r.currStatus===e&&!0!==n||(this.updateStatusPool(e),r.currStatus=e,r.fire(k.a.NTF_StatusChanged,a),i.debug("core status changed: "+e))}},{key:"initDecode",value:function(){var e=this.proxy,t=this.engine,n=this;e.on(Md.NTF_StatusChanged,(function(r){switch(r.status){case Md.Status_Loadstart:e.isAd()||"ad"===r.eventOrigin?"ad"===r.eventOrigin?n._statusChanged(k.a.Status_AdLoadstart,r,!0):n._statusChanged(k.a.Status_AdLoadstart,r):(Bd.a.tvid(t.getMovieInfo().tvid),Bd.a.bossStatus(t.movieinfo.current.bossStatus)),Bd.a.stopHeartBeat();break;case Md.Status_Canplay:e.isAd()&&n._statusChanged(k.a.Status_Ready,r);break;case Md.Status_Loaddone:n._statusChanged(k.a.Status_Loaddone,r);break;case Md.Status_Stalled:e.isAd()&&n._statusChanged(k.a.Status_AdStalled,r);break;case Md.Status_LoadFailed:e.isAd()?n._statusChanged(k.a.Status_AdError,r):(e._timeMark=0,n._statusChanged(k.a.Status_PlayError,r)),n.followUpNextLoadFlag||(n.followUpNextLoadFlag=!0,e.fire(k.a.NTF_FollowUpNextLoad,"")),Bd.a.stopHeartBeat();break;case Md.Status_Play:n._statusChanged(k.a.Status_Play,r);break;case Md.Status_Will_Stoped:e.isAd()&&n._statusChanged(k.a.Status_AdWillPlayEnded,r)}})),[[Md.NTF_CanPlayThrough,k.a.NTF_CanPlayThrough,k.a.NTF_AD_CanPlayThrough],[Md.NTF_VolumeChanged,k.a.NTF_VolumeChanged,k.a.NTF_AD_VolumeChanged],[Md.NTF_DurationChanged,k.a.NTF_DurationChanged,k.a.NTF_AD_DurationChanged],[Md.NTF_TimeUpdate,k.a.NTF_TimeUpdate,k.a.NTF_AD_TimeUpdate],[Md.NTF_Progress,k.a.NTF_Progress,k.a.NTF_AD_Progress],[Md.NTF_RateChanged,k.a.NTF_RateChanged,k.a.NTF_AD_RateChanged]].forEach((function(t){t[0]==Md.NTF_TimeUpdate?e.on(t[0],(function(n){var r=(new Date).getTime();0===e._timeMark&&(e._timeMark=r),e.isAd()||e.isPatch()||e.currStatus==Md.Status_Stalled||e.currStatus==Md.Status_Waiting||e.currStatus==Md.Status_Paused||e.currStatus==Md.Status_Stoped||e.currStatus==Md.Status_LoadFailed||(e._playingDuration+=r-e._timeMark,e._playingSpend+=r-e._timeMark),e._timeMark=r,e.fire(e.isAd()?t[2]:t[1],n)})):e.on(t[0],(function(n){e.fire(e.isAd()?t[2]:t[1],n)}))}))}},{key:"initFeatureDuration",value:function(){var e=this,t=this.proxy;this.lastCurrentTime=undefined,t.on(Md.NTF_TimeUpdate,(function(){if(!t.isAd()&&!t.isPatch()){var n=t.getCurrenttime();e.lastCurrentTime=n;var r=1e3*t.getCurrenttime();t.checkAppendPatch(),t.checkAuthTime(r),e._checkSecondAuthTime(r)}}))}},{key:"updateStatusPool",value:function(e){var t=this.statusPool;switch(e){case k.a.Status_StartPlay:t.add([k.a.Status_StartPlay],!0);break;case k.a.Status_EveryStartPlay:t.add([k.a.Status_EveryStartPlay]),Cl.noticeSenderFlush();break;case k.a.Status_AdStartPlay:t.add([k.a.Status_AdStartPlay],!0);break;case k.a.Status_ADEveryStartPlay:t.add([k.a.Status_ADEveryStartPlay]),Cl.noticeSenderFlush();break;case k.a.Status_Playing:t.add([k.a.Status_Play,k.a.Status_Playing]),t.remove([k.a.Status_Idle,k.a.Status_PlayError,k.a.Status_Stoped,k.a.Status_End_Play,k.a.Status_Paused,k.a.Status_Waiting]);break;case k.a.Status_Paused:t.add(k.a.Status_Paused),t.remove([k.a.Status_Idle,k.a.Status_Play,k.a.Status_Playing,k.a.Status_Waiting,k.a.Status_PlayError,k.a.Status_Stoped,k.a.Status_End_Play]);break;case k.a.Status_Waiting:t.add(k.a.Status_Waiting),t.remove([k.a.Status_Idle,k.a.Status_Play,k.a.Status_Playing,k.a.Status_Paused,k.a.Status_PlayError,k.a.Status_Stoped,k.a.Status_End_Play]);break;case k.a.Status_PlayError:t.add(k.a.Status_PlayError),t.remove([k.a.Status_Idle,k.a.Status_Play,k.a.Status_Playing]),Cl.noticeSenderFlush();break;case k.a.Status_Stoped:t.add(k.a.Status_Stoped),t.remove([k.a.Status_Idle,k.a.Status_Play,k.a.Status_Playing,k.a.Status_Waiting]);break;case k.a.Status_End_Play:t.add(k.a.Status_End_Play),t.remove([k.a.Status_Idle,k.a.Status_Play,k.a.Status_Playing,k.a.Status_Waiting])}}},{key:"getData",value:function(){var e=this.engine,t=e.movieinfo,n=e.playerVersion,r={},i=t.current;return r.tvid=i.tvid,r.vid=i.vid,r.albumId=i.albumId||"",r.cid=i.cid||"",r.duration=i.duration||"",r.privateVideo="0",r.origin="",r.playerVersion=n,r}},{key:"_checkSecondAuthTime",value:function(e){var t=this,n=this.logger,r=this.engine,i=this.proxy,a=i.kiwi,o=r.movieinfo,s=i._playingSpend,c=o.current;if(!this._isRequestAuthing&&c.isVIP&&!c.hasSendSencondAuthRemote&&s>c.authRTime)try{var u=o.getVDInfo(),d={};if("ts"===u.fileFormat||"mp4"===u.fileFormat)Object(Fd.a)(d,c.authShare),Object(Fd.a)(d,{tvid:c.tvid,aid:c.albumId,vid:u.vid,cid:c.cid,timeSpan:Math.floor(1e3*i.getCurrenttime()),fileFormat:u.fileFormat,shareFlag:1});else{if("f4v"!==u.fileFormat)return;for(var l,f=0;f<a.fragments.length;f++)if(e/1e3<=a.fragments[f].endTime){l=a.fragments[f];break}l||(l=a.fragments[0]);var h=l.uri.toString();d=Dd.a.query2Json(h);var p=Dd.a.filename(window.location.protocol+""+h);Object(Fd.a)(d,{filename:p,tvid:c.tvid,aid:c.albumId,fileFormat:u.fileFormat,shareFlag:1})}this._isRequestAuthing=!0,Gd.request(d,(function(){n.debug("second boss "),t._isRequestAuthing=!1,c.hasSendSencondAuthRemote=!0}),(function(){t._isRequestAuthing=!1,c.hasSendSencondAuthRemote=!0}))}catch(_){n.error(_&&_.stack?_.stack:_)}}},{key:"destory",value:function(){var e=this.proxy.kiwi;e.off(xd.ERROR,this.onKernelError),e.off(xd.STATE_CHANGE,this.onStatusChanged),e.off(xd.MSE_ATTACHING,this.onMediaAttaching),e.off(xd.BUFFER_CREATED,this.onMediaBufferCreated),e.off(xd.BUFFER_APPENDING,this.onMediaBufferAppending),e.off(xd.BUFFER_APPENDED,this.onMediaBufferAppended),e.off(xd.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),e.off(xd.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),e.off(xd.DNS_PARSER_SUCCESS,this.onDNSParser),window.removeEventListener("beforeunload",this.unloadEvent),this.lastCurrentTime=undefined}},{key:"initKernelEvent",value:function(){var e=this,t=this.proxy.kiwi;this.onKernelError=function(t){return e._onKernelError(t)},this.onStatusChanged=function(t){return e._onStatusChanged(t)},this.onMediaAttaching=function(t){return e._onMediaAttaching(t)},this.onMediaBufferCreated=function(t){return e._onMediaBufferCreated(t)},this.onMediaBufferAppending=function(t){return e._onMediaBufferAppending(t)},this.onMediaBufferAppended=function(t){return e._onMediaBufferAppended(t)},this.onDataSourceStageSwitching=function(t){return e._onDataSourceStageSwitching(t)},this.onDataSourceStageSwitched=function(t){return e._onDataSourceStageSwitched(t)},this.onDNSParser=function(t){return e._onDNSParser(t)},t.on(xd.ERROR,this.onKernelError),t.on(xd.STATE_CHANGE,this.onStatusChanged),t.on(xd.BUFFER_CREATED,this.onMediaBufferCreated),t.on(xd.BUFFER_APPENDING,this.onMediaBufferAppending),t.on(xd.BUFFER_APPENDED,this.onMediaBufferAppended),t.on(xd.MSE_ATTACHING,this.onMediaAttaching),t.on(xd.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),t.on(xd.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),t.on(xd.DNS_PARSER_SUCCESS,this.onDNSParser)}},{key:"_onKernelError",value:function(e){var t=e.severity,n=e.category,r=e.code,i=e.data&&e.data.length>0&&e.data[0]?e.data[0].gas:null,a=this.proxy,o=this.logger,s=this.engine,c=s.pingbackQOS,u=s.pingbackV6,d=s.movieinfo;if(r==Sd.DATA_AUTH_Error&&"CDN"==s.getCurrLoaderMode()&&this._dashAuthNum<this._dashAuthMax){var l=d.getVDInfo();this._dashAuthNum++,o.log("kiwi auth error, num="+this._dashAuthNum),a.switchVdAction({vd:l.vd,bid:l.bid,fileFormat:l.fileFormat})}else if(t===me.a.RECOVERABLE&&(r===Sd.MEDIA_HIGH_BUFFER&&this._recoverMediaPerNum<this._recoverMediaMax||r!==Sd.MEDIA_HIGH_BUFFER&&this._recoverMediaNum<this._recoverMediaMax)){var f=a.getCurrenttime(),h=this._recoverMediaNum;r==Sd.MEDIA_HIGH_BUFFER?(this._recoverMediaPerNum>0&&f+1<a.getDuration()&&(f+=1),this._recoverMediaPerNum++,h=this._recoverMediaPerNum):(this._recoverMediaNum>0&&f+1<a.getDuration()&&(f+=1),this._recoverMediaNum++,h=this._recoverMediaNum),1==h&&c.sendLogToCompass("KIWIR-"+be.a[n]+"-"+r);var p=Qd.a.KIWIR+"-"+r+"-"+h;u.sendErrorPlayPingback("",p),a.hasSeeking=!0,o.warn(p),a.kiwi.recoverMedia()}else if(t===me.a.IGNORABLE){if(a.isAd()){var _=Qd.a.KIWI+"-"+r;c.sendLogToCompass(Qd.a.AD+"-"+_),u.sendErrorPlayPingback("",_)}a._statusChanged({status:Md.Status_LoadFailed,actionType:!1,gas:i||s._getCurrentGas()})}else if(a._statusChanged({status:Md.Status_LoadFailed,actionType:!1,gas:i||a.getCurrentGas()}),a.isAd()){var v=Qd.a.KIWI+"-4703";c.sendLogToCompass(Qd.a.AD+"-"+v),u.sendErrorPlayPingback("",v),o.warn("kernel error: KIWI-"+r)}else o.error("kernel error: "+be.a[n]+"-"+r+", "+e.data.join("-")+", recoveryNum="+this._recoverMediaNum),this.brokedown(Qd.a.KIWI,r)}},{key:"_onStatusChanged",value:function(e){var t=this,n=this.engine,r=this.proxy,i=this.logger,a=this.statusPool,o=n.sptr,s=n.sbtr,c=n.pingbackV6,u=n.pingbackQOS,d=r.isPatch(),l=e.state;if("playing"!==l&&"pause"!==l&&"stop"!==l&&"error"!==l||(r.hasSeeking=!1),!d||-1!==["loadedmetadata","playing","ended"].indexOf(l))switch(l){case"loadedmetadata":if(n.autoplay&&this._needPlay&&!r._videoSwitchPause){if(n.isPatch())return void r.play();if(n.errorcode&&"A00302"!==n.errorcode.code&&r.isAd())return;this._needPlay=!1,this._clearWaitingTimer();var f=r.play();f&&(r._duringPlay=!0,f.then((function(){r._duringPlay=!1,n.mutedstartplay=!1,i.log("Automatic playback started!")}),(function(e){e&&("NotAllowedError"===e.name||e.message&&/the user didn't interact with the document first/gi.test(e.message))?(i.warn("Automatic playback failed, muted video and then try to play!"),n.mutedstart=!0,n.setVolume(0,!0),r.fire(k.a.NTF_PLAY_MUTED,{status:"playfailmuted"}),r.play().then((function(){i.warn("Play muted playback successful!"),r._duringPlay=!1,r.fire(k.a.NTF_MutedStartPlay),n.mutedstartplay=!0}),(function(){r._duringPlay=!1,r._needPlay=!0,i.warn("Play muted playback failed, & Show a UI element to let the user manually start playback.!"),r._canGetVideoInfo(!0),r.fire(k.a.NTF_NeedUserGesture4Playback)}))):(r._duringPlay=!1,r._needPlay=!0)})))}else r.pause(),i.warn("Pause video! cause params => autoplay=false or autoplay=0 "),r._canGetVideoInfo(!0),r.fire(k.a.NTF_NeedUserGesture4Playback);r._videoSwitchPause=undefined,r._videoSwitching=undefined,r.isAd()||this._statusChanged(k.a.Status_LoadedMetaData,e);break;case"playing":r._videoSwitchPause=undefined,r.tempStore.isFirstVV&&!r.tempStore.__sendFirstFrameShow&&(r.tempStore.__sendFirstFrameShow=!0,o.plyaetm=+new Date,o.adUsedTime=o.adaetm-o.adastm,o.plyUsedTime=o.plyaetm-o.plyastm,o.ffetm=o.plyaetm,r.isAd()?(o.ffstm=o.psdklstm-1,o.ffetm=o.psdklstm-1,o.vcletm=o.plyaetm):(o.vclstm=o.psdklstm-1,o.vcletm=o.psdklstm-1,o.ffetm=o.plyaetm),this.getUserIpInfo()),r._paused=!1;var h={status:Md.Status_Play,actionType:r._checkActionType(Md.Status_Play)},p=r.currStatus,_=r.isDelayPlay(),v=!1;if(s.isSeekingStatus()&&s.mediaPlaying(),r._statusChanged(h),r.isAd())r._patchFirstPlay=!1,r._ADFirstPlay&&(r._ADFirstPlay=!1,r._canGetVideoInfo(!0),this._statusChanged(k.a.Status_AdStartPlay,h),i.log("ad start play,params: info = cur ad!")),a.has(k.a.Status_ADEveryStartPlay)||this._statusChanged(k.a.Status_ADEveryStartPlay,h),"play"===Dd.a.query("__pmobius__")&&u.sendLogToCompass("MOBIUS-AD"),this._statusChanged(k.a.Status_AdPlaying,h);else{if(r._firstPlay&&(r._firstPlay=!1,v=!0,r._canGetVideoInfo(!0),this._statusChanged(k.a.Status_StartPlay,h),n.autoVdUsing&&this.proxy.setDefList()),a.has(k.a.Status_EveryStartPlay)||this._statusChanged(k.a.Status_EveryStartPlay,h),d)return r._patchFirstPlay&&(r._patchFirstPlay=!1,this._statusChanged(k.a.Status_PatchStartplay,h)),void this._statusChanged(k.a.Status_Playing,h);r._patchFirstPlay=!0,this._statusChanged(k.a.Status_Playing,h),v&&c.sendTimingPingback(),p!==k.a.Status_Waiting&&p!==k.a.Status_Play||c.sendPlayingPingback(),r.tempStore.__sendMovieFirstFrameShow||(r.tempStore.__sendMovieFirstFrameShow=!0,c.sendStartPlayPingback(),r.tempStore.isFirstVV&&(u.sendPlayTimeRecord(),"play"===Dd.a.query("__pmobius__")&&u.sendLogToCompass("MOBIUS-MOVIE-".concat(r.kiwi.currentLoaderMode.toUpperCase())))),Bd.a.openHeartBeat(),Bd.a.keepalive()}if(Bd.a.updateVipTypes(),!this.followUpNextLoadFlag){this.followUpNextLoadFlag=!0;var g={};n.isInteractVideo&&(g.uniqueId=n.iv_state.uniqueId,g.isInteractVideo=!0,g.tvid=n.getMovieInfo().tvid,g.vid=n.getMovieInfo().vid),r.fire(k.a.NTF_FollowUpNextLoad,g)}_&&r.clearDelayPlayInfo(!1),r.tempStore.__nsta||(r.tempStore.__nsta=!0,n.notyfyADInfo({type:"video-play"})),r.tempStore.__sendADStartPPB||(r.tempStore.__sendADStartPPB=!0,c.sendADStartPlayPingback()),this.sendStuckdetl(2),s.isSeekingStatus()&&(s.end(),u.sendSeekBenchmark(),"seek"===Dd.a.query("__pmobius__")&&u.sendLogToCompass("MOBIUS-SEEK-".concat(s.cost))),r.video().blobUrlMalformed&&(r.video().blobUrlMalformed=!1,u.sendLogToCompass("URLBLOB_WAKED")),this._clearWaitingTimer(),this._dashAuthNum=0,this._recoverMediaPerNum=0;break;case"pause":r._paused=!0;var y={status:Md.Status_Paused,actionType:r._checkActionType(Md.Status_Paused)};r._statusChanged(y),r.isAd()?this._statusChanged(k.a.Status_AdPaused,y):(r._timeMark=0,this._statusChanged(k.a.Status_Paused,y),Bd.a.stopHeartBeat());break;case"waiting":r._paused=!0;var m={status:Md.Status_Waiting,actionType:r._checkActionType(Md.Status_Waiting)},b=r.isAd();r._statusChanged(m),b?this._statusChanged(k.a.Status_AdWaiting,m):(r._timeMark=0,this._statusChanged(k.a.Status_Waiting,m),Bd.a.stopHeartBeat()),r.hasSeeking||r.kiwi.rebooting||!r.tempStore.__nsta||(this._clearWaitingTimer(),this._waitingStartTime=+new Date,this.waitingTimer=setTimeout((function(){c.sendWaitingPingback(b),clearTimeout(t.waitingTimer)}),1500));break;case"seeking":var x=r.getCurrenttime(),T=r.getDuration();r._videoSwitchPause=undefined,r._paused=!0,s.mediaSeeking(),r.fire(r.isAd()?k.a.NTF_AD_Seeking:k.a.NTF_Seeking,{current:x,duration:T,actionType:r._checkActionType(Md.NTF_Seeking)}),this.lastCurrentTime=undefined;break;case"seeked":var S=r.getCurrenttime(),P=r.getDuration();this._clearWaitingTimer(),r.hasSeeking=!1,s.mediaSeeked(),r.fire(r.isAd()?k.a.NTF_AD_Seeked:k.a.NTF_Seeked,{current:S,duration:P,actionType:Md.Action_Type_Code});break;case"progress":r.fire(Md.NTF_Progress,{buffer:r.getBufferTime()});break;case"EOR":n.episode.finishPres(n.getMovieInfo().tvid,!0);break;case"EOP":r._statusChanged({status:Md.Status_Loaddone,actionType:!1});break;case"willended":r._statusChanged({status:Md.Status_Will_Stoped,actionType:!1});break;case"beforeended":r.kiwi.loop=n.cyclePlay;break;case"ended":r._paused=!0;var w=n.getMovieInfo(),I={status:Md.Status_Stoped};if(r.isAd()||!r.isAd()&&r.checkAuthTime(w.isVIP&&w.previewTime<Infinity?w.previewTime+1:1e3*r.getCurrenttime())){if(r._statusChanged(I),this._clearWaitingTimer(),r.isAd())this._statusChanged(k.a.Status_AdPlayEnded,I);else r._timeMark=0,r.isLast()&&this._statusChanged(k.a.Status_Stoped,I);Bd.a.stopHeartBeat()}break;case"loadstart":(r.isAd()||e.gas)&&r._statusChanged({status:Md.Status_Loadstart,eventOrigin:"ad",gas:e.gas});break;case"loaderseek":s.isSeekingStatus()&&s.seekLoader();break;case"loaderpump":s.isSeekingStatus()&&s.pumpLoader(e.data);break;case"muxswallow":s.isSeekingStatus()&&s.muxSwallow();break;case"muxspit":s.isSeekingStatus()&&s.muxspit()}}},{key:"_onMediaBufferCreated",value:function(){this._needPlay=!0}},{key:"_onMediaBufferAppending",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppending()}},{key:"_onMediaBufferAppended",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppended()}},{key:"_onMediaAttaching",value:function(){this.proxy.fire(k.a.NTF_SRC_Attaching)}},{key:"_onDataSourceStageSwitching",value:function(){var e=this.proxy;if(clearTimeout(e._switchDelayTimer),clearTimeout(e._switchAudioDelayTimer),e._switchDelayTimer=null,e._switchAudioDelayTimer=null,e.switchVmsRequest&&e.switchVmsRequest){var t=e.switchVmsRequest.getXhrRequest();t&&t.abort&&t.abort()}}},{key:"_onDataSourceStageSwitched",value:function(){this._recoverMediaNum=0}},{key:"_onDNSParser",value:function(e){this.logger.info("DNSParser => "+JSON.stringify(e)),this.engine.pingbackQOS.sendQOSReport({type:"DNSParser",para:e})}},{key:"brokedown",value:function(e,t,n){var r=this.proxy,i=this.engine,a=this.logger,o=i.pingbackV6,s=i.pingbackQOS;r.pause();var c=this.getData();c.type=e,c.code=t,c.st=n||"";var u=e+"-"+t;if(n&&(u+="-"+n),512==n&&nl)r.fire(k.a.NTF_BuyPlay,c);else{a.info("playproxy brokedown, pingback, ec = ".concat(u)),t&&t!==Qd.a.P07001&&o.sendErrorPlayPingback("",u,n),i.errorcode=c,r.fire(k.a.NTF_Error,c),this.followUpNextLoadFlag||(this.followUpNextLoadFlag=!0,r.fire(k.a.NTF_FollowUpNextLoad,""));var d=Hd.vmsUrl,l=this;Il(d,(function(e){l.logger.info("request, dnsparser, info = "+e+",url = "+d),l.getUserIpInfo((function(){s.sendLogToCompass(u)}))}))}}},{key:"getUserIpInfo",value:function(e){var t=this;Bd.a.getUserIPInfo((function(n){var r=Bd.a.getUid(),i="";r||(i=Pd.a.get("P00002")),t.logger.info("user info, uid = "+r+", P00002 = "+i+", P00003 = "+Pd.a.get("P00003")+",v.f4v = "+JSON.stringify(n)),e&&e()}))}},{key:"_clearWaitingTimer",value:function(){clearTimeout(this.waitingTimer),this.waitingTimer=0,this._waitingStartTime=0}},{key:"sendStuckdetl",value:function(e){this.waitingTimer>0&&(this.engine.pingbackQOS.sendStuckdetl(e,this._waitingStartTime,this.proxy.isAd()),this._clearWaitingTimer())}}]),e}();function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Hl=window.location.protocol,Wl=function(e){l()(n,e);var t=Vl(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).logger=new Id.a("PlayProxy[".concat(e.id,"]")),r.engine=e,r.knlRevision=S,r.currStatus="",r._firstPlay=!0,r._ADFirstPlay=!0,r._patchFirstPlay=!0,r._timeMark=0,r._vdsSwitch=!1,r._playingDuration=0,r._playingSpend=0,r._skipHT=0,r._skipTT=0,r.__canGetVideoInfo=!1,r._autoVdEnable=!1,r._autoVdUsing=!1,r.autoVdValue=-1,r.tempStore={isFirstVV:!0},r.failProgramKey=undefined,r._isAllowSeek=!0,r._isDelayPlay=!1,r._delayPlayTime=0,r._delayTimer=null,r._absDashRequests=[],r._absDashResponses=[],r._isMobiusTest="performance"===Dd.a.query("__pmobius__")&&"true"==Dd.a.query("debug"),r}return s()(n,[{key:"canaryCdnLoader",value:function(){if(!this.p2pEnabled())return!0;var e=Dd.a.query("__ploader__");if(e){if("cdn"===e)return!0;if("p2p"===e)return!1}return!1}},{key:"init",value:function(e,t){b()(_()(n.prototype),"init",this).call(this,e);var r=this,i=this.engine,a=i.pack,o=i.i18n,s=(i.pingbackQOS,Xd());this.useVP9P2P=s.canaryVP9_P2P,this.useAV1P2P=s.canaryAV1_P2P,this.useCDNLoader=this.canaryCdnLoader(o,t),this.provider=new Pl(this.engine),a.ad||(this.adDisable=!0);var c=new Id.a("");Object(P.b)(c);var u,d,l=(u=e,d={muxWorker:!0,timeline:"timeline/pcw-vod",externals:{cmd5x:Cd.a.cmd5x}},P.a.log("kiwi version is ".concat(S)),new bd(u,d));window.kiwi=this.kiwi=l,l.on(xd.FPS_REPORT,(function(e){r.fire(k.a.NTF_FPS_REPORT,e)})),this._eventer=new Ul(this.engine);var f=!!this.engine.params.sourcePage&&"home"==this.engine.params.sourcePage;o.isTWLocale()||f||this.useCDNLoader||0!=this.engine.userSetBid||(this._autoVdEnable=!0,this._autoVdUsing=!0,1===parseInt(Pd.a.get("QP0025"),10)&&(this._autoVdUsing=!1)),this.getAdLog()}},{key:"p2pEnabled",value:function(e){if(!window.Map||Ad.a.browser.WECHAT)return!1;if(this.engine.params.feedMode||this.engine.isMini)return!1;if(e){var t=this._transformFFToKernelKnown(e),n="false"!==Ed.a.read("QiyiPlayerP2P");return t===Td.JDASH||n&&(t===Td.DASH_AV1||t===Td.DASH_VP9||t===Td.HLS&&"265ts"!==e)}return!0}},{key:"load",value:function(e){var t=this,n=this.engine,r=this.logger,i=this.provider,a=this.kiwi,o=this.engine,s=o.episode,c=o.movieinfo,u=e.tvid,d=e.vid,l=e.ugcAuthKey,f=e.imageLoader,h=e.startPlayTime,p=e.isSupportAI,_=e.isAdvanceEnd,v=e.share_sTime,g=e.share_eTime,y=this.hasPreload(u),m="load movieInfo, tvid=".concat(u,", vid=").concat(d);if(n.preVideoParam||(n.preVideoParam=e),c.tvid!=u||c.vid!==d||l||n.isInteractVideo){var b="check failProgramKey, tvid = ".concat(u," , key = ").concat(this.failProgramKey);if(this.failProgramKey&&this.failProgramKey.tvid&&(b+=",key.tvid = ".concat(this.failProgramKey.tvid,", num = ").concat(this.failProgramKey.num),this.failProgramKey.tvid==u&&this.failProgramKey.num>=3))r.info(b);else{parseInt(u,10)<9e7&&r.error("Core Player load movie info error,params: msg = "+u+"is invalid qipu id"),this._firstPlay=!0,this._ADFirstPlay=!0,this._patchFirstPlay=!0,c.setStartPlayTime(h>0?h:0),c.tvid&&s.clear(c.tvid),l&&(c.ugcAuthKey=l||"",i.clearCache(u,d)),n.adWholeCorner=!1;var x=c.current;c.current={preparing:!0,tvid:u,vid:d,albumId:e.albumId,adPlayerID:e.cid,imageLoader:f,isPreload:y,isAdvanceEnd:e.isAdvanceEnd},x.tvid&&(m+=", preTvid=".concat(x.tvid),this.fire(k.a.NTF_VideoChange,{preMovieInfo:x,curMovieInfo:c.current})),s.valid(u,!0),clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.fire(k.a.NTF_VRSStart,{data:this._eventer.getData(),movieinfo:c.current}),this.clearDelayPlayInfo(!1),r.info(m),i.getPromise(u,d).then((function(i){if(i.originalData.data.p.bt&&(t._skipHT=i.originalData.data.p.bt,t._skipTT=i.originalData.data.p.et),i.parts instanceof T){var a=t.getPatchData(i.parts,i);i.parts=a,r.info("load movieInfo ok, has parts, type = ".concat(a.type))}i.imageLoader=f||"",i.isSupportAI=Boolean(p),i.isAdvanceEnd=Boolean(_),e.cid&&(i.adPlayerID=e.cid),c["switch"](i),c.initShareTime(v,g);var o=c.current;s.setInfo(u,o);var d=c.getVDInfo();o.duration=d.duration,t.fire(k.a.NTF_VRSReady,{data:t._eventer.getData(),movieinfo:o}),n.eventlog.vrsready=!0,x.tvid&&t.fireChanged(),(t.adDisable||s.finishPres(u))&&t.concatCurFeature(u),o.isPreload=!1,o.preparing=!1,t.fire(k.a.NTF_VRSDone)}),(function(e){var n="check failProgramKey ++, tvid = ".concat(u," , key = ").concat(t.failProgramKey);t.failProgramKey?t.failProgramKey.tvid==u&&t.failProgramKey.num++:t.failProgramKey={tvid:u,num:1},n+=",key.tvid = ".concat(t.failProgramKey.tvid,", num = ").concat(t.failProgramKey.num),r.info(n),c.setInfo(e.movieinfo);var i=e.level,o=e.type,s=e.code,d=e.st;switch(i){case 0:a.reset(),t._eventer.brokedown(o,s,d);break;case 1:a.reset(),t.noticeRecharge(s);break;case 2:a.reset(),t._eventer.brokedown(o,s,d);break;default:r.error(e&&e.stack?e.stack:e)}c.current.preparing=!1,t.fire(k.a.NTF_VRSDone),x.tvid&&t.fireChanged()}))}}else r.error("tvid vid should not the same")}},{key:"preload",value:function(e,t){var n=this,r=this.engine,i=r.episode,a=r.movieinfo;i.valid(e,!0),this.provider.getPromise(e,t).then((function(t){n.checkVipPay(t.vipBlock,t.vipTheatre,t.albumId,t.authTipType,(function(r){if(n.logger.info("preload movieInfo ok,checkVipPay = ".concat(r," ")),!r){if(t.parts instanceof T){var o=n.getPatchData(t.parts,t);t.parts=o,n.logger.info("preload movieInfo ok, has parts, type = ".concat(o.type))}a.preload(t),i.setInfo(e,t),n.fire(k.a.NTF_VRSPreloaded,{movieinfo:t})}}))}),(function(e){n.logger.warn("preload movie which requires auth: "+Id.a.stringify(e))}))}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"getCurrentGas",value:function(){var e=this.engine;return this.isAd()?this.kiwi.getCurrentADGas():{videoEventId:Od.a.getEventId(e.movieinfo.tvid)}}},{key:"isAd",value:function(){return this.kiwi.isAd}},{key:"isPatch",value:function(){return!!this.engine.movieinfo.parts&&this.kiwi.isQBBPatching}},{key:"isLast",value:function(){return!!this.kiwi.eot}},{key:"_transformFFToKernelKnown",value:function(e){var t;if(e in Td)t=e;else switch(e){case"flv":case"f4v":t=Td.FLV;break;case"ts":case"265ts":t=Td.HLS;break;case"m4s":t=Td.JDASH;break;case"dash_vp9":t=Td.DASH_VP9;break;case"dash_av1":t=Td.DASH_AV1;break;case"mp4":t=Td.MP4;break;default:var n="unhandled movie info fileFormat: ".concat(e,".");throw this.logger.error(n),new Error(n)}return t}},{key:"_getManifest",value:function(e,t){var n,r,i,a,o,s=[],c=this.p2pEnabled(e.fileFormat),u=t.isVIP,d=t.boss,l=t.vid,f=t.tvid,h=t.albumId,p=t.baseUrl;switch(e.fileFormat){case"ts":case"265ts":n=Td.HLS,r={m3u8:e.playlist,bid:e.bid},s=["manifest/hls",c?"loader/p2p":"loader/hls","mux/m2ts-mp4","renderer/mse"];break;case"f4v":n=Td.F4V,s=["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],r={bid:e.bid,fs:[]},o=e.playlist.length,a+="&su="+(i=qd.a.getFluid()),a+="&mi=tv_"+h+"_"+f+"_"+l,a+="&ct="+e.vd,a+="&retry=",a+="&client=",a+="&z=",a+="&bt=",a+="&e=";for(var _=Gd.getPreviewTime(f),v=0,g=0;g<o;g++){var m=e.playlist[g],b=m.d,k=m.l;if(_>0&&v>=_)break;v=b;var x=Hl+p+k+(/\.f4v$/gi.test(k)?"?":"&")+a;if(u){-1==x.indexOf("&vid=")&&(x+="vid="+l);var T=d.data.t;x+="&t="+T,-1==(x+="&cid=afbe8fd3d73448c9").indexOf("&ib=")&&(x+="&ib=4"),-1==x.indexOf("&ptime=")&&(x+="&ptime="+(_=_==Infinity?0:_)),x+="&QY00001="+Gd.getAuthUid(f);var S=T+Dd.a.filename(x);x+="&ibt="+Cd.a.cmd5x(S,S)}-1==x.indexOf("&pv=")&&(x+="&pv=0.1"),-1==x.indexOf("&qyid=")&&(x+="&qyid="+i),r.fs.push({duration:b/1e3,url:x})}break;case"m4s":n=Td.JDASH,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({bid:e.bid},e.playlist),s=["manifest/jdash","loader/p2p","renderer/mse"];break;case"mp4":n=Td.MP4,r={src:e.playlist,levelId:e.bid,duration:e.duration,byteLength:e.vsize},s=["manifest/mp4","loader/mp4","mux/mp4-fmp4","renderer/mse"];break;case"dash_vp9":case"dash_av1":"dash_vp9"===e.fileFormat?n=Td.DASH_VP9:"dash_av1"===e.fileFormat?n=Td.DASH_AV1:this.logger.error("DASH unknown codec ".concat(e.code)),s=["manifest/dash",c?"loader/p2p":"loader/dash","renderer/mse"],r={mpd:e.playlist,bid:e.bid}}if(c){r.other={tvid:t.tvid,vid:e.vid,vsize:e.vsize,aid:t.albumId,vidlist:[]};for(var P="",w=0;w<t.vidl.length;w++){var I=t.vidl[w].bid,A=t.vidl[w].vid,E=t.vidl[w].fileFormat;P+=", ".concat(I,"-").concat(A,"-").concat(E),r.other.vidlist.push({bid:I,vid:A})}var D=r.other.vidlist;this.logger.info("vidlist: ".concat(P,", length = ").concat(D.length))}return{components:s,manifestType:n,manifestContent:r}}},{key:"getManifestTypes",value:function(){return Td}},{key:"clear",value:function(){var e=this.engine,t=e.adproxy,n=e.episode;this.adDisable||t.clear(),this.tempStore={isFirstVV:!1},this._vdsSwitch=!1,this.currStatus="",clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.kiwi.reset(),n.clearAll(),this._clearAbsDashHttp(),this.engine.errorcode=undefined}},{key:"getAdLog",value:function(){var e=this;clearTimeout(this.getLogTimeout);var t=this.engine.adproxy,n="";!this.adDisable&&t&&(n=t.getAdLog()),this.logger.adInfo(n),this.getLogTimeout=setTimeout((function(){e.getAdLog()}),3e4)}},{key:"destory",value:function(){this.clear(),this.provider.clearAll(),this._eventer.destory(),this.kiwi.destroy(),this.removeAllEventsListener()}},{key:"_getDataFlow",value:function(e){var t=undefined,n="getDataFlow, ..";if(e&&(t={},e.segments&&(t.stream=e.segments,n="getDataFlow, segments length = ".concat(t.stream.length)),e.tracks)){var r=e.tracks,i=r.video,a=r.audio;t.audio={duration:a.duration,init:a.initSegment,segments:a.segments},t.video={duration:i.duration,init:i.initSegment,segments:i.segments},n="getDataFlow, audio.length = ".concat(a.segments.length,"， video.length=").concat(i.segments.length)}return this.logger.info(n),t}},{key:"getDynamicArgs",value:function(){var e=this,t=this.engine;if(!this.p2pEnabled())return null;var n=t.pingbackV6,r=t.pingbackQOS;return{checkIsMobius:function(){return e._isMobiusTest},switchAutoDef:function(r){var i=x.a.getOldVd(r);if(e.isAd())e.logger.info("p2p dashUpdated error , levelID or streamInfo is undefined");else{var a=e.getCurrentVD(),o=x.a.getNewVd(a);e.logger.info("p2p switchAutoDef, auto=".concat(t.autoVdUsing,", vd = ").concat(a," -> ").concat(i,", levelID = ").concat(o," -> ").concat(r)),e.switchVdAction(i,!0),t.autoVdUsing&&(parseInt(r)>parseInt(o)?n.sendAutoUpToVDPingback(i,a):parseInt(r)<parseInt(o)&&n.sendAutoDwnToVDPingback(i,a))}},noticeRefreshMovieData:function(){e.provider.clearAll(),e.setDefList(!0)},getUserInfo:function(e){Bd.a.isVip((function(t){e({uid:Bd.a.getUid(),isVip:t})}))},sendPingBack:function(e){r.sendQOSReport(e)},startPlayed:function(){return!e._firstPlay},abs:!0}}},{key:"concatCurFeature",value:function(e){var t=this.engine,n=this.provider,r=this.logger,i=this.kiwi,a=t.movieinfo,o=t.episode,s=t.sptr,c=a.getVDInfo(),u=a.current,d=a.startPlayTime,l=n.getPid(u.tvid,u.vid),f=n.getData(l),h=this._getManifest(c,u),p=h.manifestContent,_=h.components;if(this.p2pEnabled(c.fileFormat)&&(p.other.feed=!0,p.other.fromlist=!1,p.other.listdone=!1),f&&!o.finishFeatures(e)){c.duration>0&&(u.duration=c.duration,d>=u.duration&&(a.startPlayTime=0));var v=a.getPlayHead(),g=v.timeRanges,y=v.playHeadTime;if(this._eventer._recoverMediaNum=0,p&&(o.finishFeatures(e,!0),r.info("concat cur episode: ".concat(e,", vd:").concat(c.vd,", bid:").concat(c.bid,", fileFormat:").concat(c.fileFormat,",playHeadTime:").concat(y,",timeRanges:").concat(g,"，duration: ").concat(u.duration,", other: ").concat(JSON.stringify(p.other))),this.tempStore.isFirstVV&&!this.tempStore.__sendFirstFrameShow&&(s.ffstm=+new Date),i.loadSource(p,y,g,{streamType:Ru.Episode,components:_,dynamicArgs:this.getDynamicArgs()}),t.autoVdUsing)){var m=i.episodeStream;m&&m.loader.changeAbsState(!0)}}else r.info("".concat(l," still not ready"))}},{key:"concatPreloadFeature",value:function(e){var t=this.logger,n=this.kiwi,r=this.engine,i=r.movieinfo,a=r.episode,o=a.getInfo(e),s=i.getPlayTimeRanges(!0),c=i.getVDInfo(!0),u=this._getManifest(c,o),d=u.manifestContent,l=u.components;this.p2pEnabled(c.fileFormat)&&(d.other.feed=!0,d.other.fromlist=!1,d.other.listdone=!1),t.log("concat preload episode: ".concat(e)),a.finishFeatures(e,!0),n.loadSource(d,null,s,{isCurrent:!1,streamType:Ru.Episode,components:l,dynamicArgs:this.getDynamicArgs()})}},{key:"checkPreload",value:function(){var e=!0,t=this.engine.getMovieInfo(),n=this.getCurrenttime(),r=this.getDuration();return e=(e=(e=(e=(e=e&&!this.isAd())&&!this.engine.cyclePlay)&&this.kiwi.endOfDown)&&t.previewTime===Infinity)&&r-n>=5}},{key:"getCurrenttime",value:function(){var e=0,t=this.getDuration();if(this.isAd()){var n=this._getAdTimeObj();e=n.curTime,t=n.duration}else e=this.getDecodeCurrenttime();return e<t||isNaN(t)?e:t}},{key:"getDuration",value:function(){var e=this.engine.movieinfo,t=e.current,n=e.getVDInfo();return this.isAd()?this._getAdTimeObj().duration:t.isVIP&&t.isTryWatch&&n?n.duration:this.kiwi.duration}},{key:"_getAdTimeObj",value:function(){var e=0,t=0,n=!1,r=this.engine,i=r.episode,a=r.adproxy;if(this.isAd()){var o=a.getAdInfo();if("midroll"==o.rollType){var s=i.getMids(o.videoId);s.length>0&&(n=!!s[0].isFusionMode)}if(n)e=this.kiwi.currentTime,t=this.kiwi.duration;else{e=this.kiwi.currentTime;var c=this.kiwi.findPieceAt(e);c&&(e-=c.fragment.startTime,t=c.fragment.duration)}}return{curTime:e,duration:t}}},{key:"refresh",value:function(e){var t=this.engine.movieinfo,n=t.current,r=n.tvid,i=n.vid,a=n.adPlayerID;r&&(t.next.isPreload=!1,t.clear(),this.clear(),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(k.a.Status_Idle),this.provider.clearAll(r),this.logger.log("Core Player refresh， type = "+e),this.fire(k.a.NTF_VideoRefresh),this.load({tvid:r,vid:i,cid:a}))}},{key:"abortAres",value:function(){this.isAd()&&this.kiwi.abortCurrentADGas()}},{key:"abortAllAres",value:function(e,t){var n=this;setTimeout((function(){n.logger.info("abort all ".concat(e," roll, movieRecoverPoint=").concat(t));var r=null;switch(e){case"preroll":r=Bu.PRE_ROLL;break;case"midroll":r=Bu.MID_ROLL;break;case"briefRoll":r=Bu.INDETERMINACY_ROLL}if(t!==undefined){var i=n.isAd();n.fire(k.a.NTF_Before_Seeking,{currentTime:n.getCurrenttime(),isAd:i,gas:i?n.getCurrentGas():undefined})}n.kiwi.abortRollingStream(r,t)}),0)}},{key:"lockSeek",value:function(){this._isAllowSeek=!1}},{key:"unlockSeek",value:function(){this._isAllowSeek=!0}},{key:"pause",value:function(e,t){this._duringPlay&&!t||(this._videoSwitching&&t&&(this._videoSwitchPause=!0),this.logger.log("Engine:request pause actionType =".concat(e,", force=").concat(t)),b()(_()(n.prototype),"pause",this).call(this,e,t))}},{key:"seek",value:function(e,t,n){var r=this.getDuration();e>r&&(e=Math.floor(r));var i=this.isAd();this.logger.log("Engine:seek(".concat(e,"), duration (").concat(r,"),isManualAction=").concat(t,", isAd=").concat(i)),this.fire(k.a.NTF_Before_Seeking,{currentTime:this.getCurrenttime(),isAd:i,gas:i?this.getCurrentGas():undefined}),e=parseFloat(e),this.hasSeeking=!0,this.checkAuthTime(1e3*e)&&(t?this._currentManualAction=Md.NTF_Seeking:this._currentCodeActionList.push(Md.NTF_Seeking),this._isAllowSeek&&(this.checkchangerange(e),this.kiwi.currentTime=e),this.isPaused()&&!n&&this.play())}},{key:"checkchangerange",value:function(e){if(this.engine.skip&&this._skipTT>0&&e>this._skipTT){var t=[[0,this.getDuration()]];this.kiwi.timeRanges=t}}},{key:"checkAuthTime",value:function(e){var t=!0,n=this.engine.getMovieInfo();return n.isVIP&&e>=n.previewTime&&(this.noticeRecharge("Q00304"),t=!1),t}},{key:"noticeVidChanged",value:function(e,t){var n=this.engine.movieinfo;e?(n.vd=t,this.engine.vd=t,this.logger.log("definition changed: ".concat(t))):this.logger.log("definition changeFail: ".concat(t)),this._vdsSwitch=!1,this.fire(k.a.NTF_DefinitionSwitched,{curVD:t,success:e,isManualAction:this.__isManualAction}),this.__isManualAction=!1}},{key:"switchData",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=this.kiwi,i=this.engine,a=this.logger,o=i.movieinfo,s=i.autoVdUsing,c=!1,u=e.vd,d=this._getManifest(e,o.current),l=d.manifestType,f=d.manifestContent,h=d.components;if(r.allowSwitchVariant){var p=r.currentManifestType,_=null!==p&&l!==p,v=!(!s||!n),g=!v&&l!==Td.DASH_AV1&&l!=Td.DASH_VP9&&l!==Td.JDASH;_&&(c=!0);var y=this.p2pEnabled(e.fileFormat);y&&(f.other.feed=!n,f.other.fromlist=!1,f.other.listdone=!1);var m,b=o.getVDInfo();if(b.fileFormat!==e.fileFormat&&(m={components:h}),a.info("switchVD: ".concat(b.vd,"->").concat(e.vd,", ").concat(b.bid,"->").concat(e.bid,", ").concat(b.fileFormat,"->").concat(e.fileFormat,", fromP2P=").concat(n,", absing=").concat(s)),r.switchLevel(f,c,g,v,m),n)this.noticeVidChanged(!0,u);else if(c||this.video().readyState<3)this.once(Md.NTF_TimeUpdate,(function(){t.noticeVidChanged(!0,u)}));else{var k=parseInt(1e3*r.bufferInfo.media.len/this.getPlaybackRate()+"",10);this.logger.log("will switch Variant after: "+k/1e3+"s"),this._switchDelayTimer=setTimeout((function(){t.noticeVidChanged(!0,u)}),k)}this.switchVmsRequest=this.switchVmsResponse=null}else a.warn("switchVD, failed, this stream will end, can't switch variant!")}},{key:"switchDefinition",value:function(e,t){var n=this.engine;e===this.getCurrentVD()&&!n.autoVdUsing||e===this.autoVdValue&&(n.autoVdUsing||!n.autoVdEnabled)||(e===this.autoVdValue?(this.switchVdAction(e),this.fire(k.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.fire(k.a.NTF_DefinitionSwitched,{curVD:e,success:!0,isManualAction:!0})):(this.__isManualAction=t,this._vdsSwitch=!0,this.fire(k.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.switchVdAction(e)))}},{key:"switchAudioTrack",value:function(e){var t=this,n=this.engine,r=n.movieinfo,i=n.pingbackQOS,a=n.ptr,o=n.sptr,s=n.spt,c=r.current,u=c.audl.types;if(!(u.length<=1)){c.oldLid=c.currentLid||"";var d=r.vidl,l=c.vid,f=this.getCurrentVD();this.logger.log("switch audio: ".concat(c.oldLid,"->").concat(e));for(var h=0;h<d.length;h++)if(d[h].vd==f){l=d[h].vid;break}f=x.a.getNewVd(f);for(var p=0;p<u.length;p++)u[p].id===e&&(1!==u[p].ispre?(new il).request({params:{tvid:c.tvid,vid:l,vd:f,lid:e,tryCount:0,switchvd:!0,spt:s},pingback:i,ptr:a,sptr:o,hostUseIP:!1},(function(n){if(n.data&&n.data.st){var r=parseInt(n.data.st,10),i=n.data,a=i.boss_ts?"boss_ts":"boss";if(100<r&&r<200)if(i.program&&i.program.audio){i[a]&&i[a].code&&c.boss&&c.boss.data&&(c.boss=i[a]),c.audio=i.program.audio;var o=gl(c,!0);c.audl=o,o&&o.audio?t._switchAudio(o.audio,e):t.getAdFail()}else t.getAdFail();else t.getAdFail()}else t.getAdFail()}),(function(){t.getAdFail()})):this._switchAudio(null,e))}}},{key:"switchVdAction",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=this.engine,i=this.logger,a=this.kiwi,o=r.movieinfo,s=r.ptr,c=r.sptr,u=r.pingbackQOS,d=r.spt,l=a.episodeStream;if(e==this.autoVdValue)return this._autoVdUsing=!0,l&&l.loader.changeAbsState&&l.loader.changeAbsState(!0),i.log("switchVD, changed, -> ".concat(e,", changeABS -> true, absing = ").concat(r.autoVdUsing)),this.setDefList(),void Pd.a.set("QP0025","0",{expires:2592e5,path:"/",domain:"iqiyi.com"});var f=o.getVDInfo(!1,e),h=this.p2pEnabled(f.fileFormat);if(h&&!n&&(i.log("switchVD, changed, -> ".concat(e,", changeABS -> false")),this._autoVdUsing=!1,Pd.a.set("QP0025","1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),l&&l.loader.changeAbsState&&l.loader.changeAbsState(!1)),f.playlist)this.switchData(f,n);else{var p=o.current,_=p.tvid,v=p.vid;i.info("switchVD, tvid=".concat(_,", vid=").concat(v,", isLogin=").concat(Bd.a.isLogin(),", vd=").concat(f.vd,", bid=").concat(f.bid)),this.switchVmsRequest=this.requestDash({params:{tvid:_,vid:f.vid,vd:f.bid,tryCount:0,switchvd:!0,spt:d},pingback:u,ptr:s,sptr:c,hostUseIP:!1},{targetVd:f.vd,fileFormat:f.fileFormat},(function(e){if(e){for(var r=o.current.vidl,a=0;a<r.length;a++)if(r[a].vd==e.vd){r[a]=e;break}t.switchData(e,n)}else i.info("switchVD, load movieInfo from vrs failed, fromP2P=".concat(n)),n||t.noticeVidChanged(!1,f.vd)}))}}},{key:"getAdFail",value:function(){var e=this.logger,t=this.engine,n=t.pingbackQOS,r=t.getMovieInfo();r.currentLid=r.oldLid,this.fire(k.a.NTF_AudioSwitched,{success:!1}),e.info("switch audio Fail!"),n.sendLogToCompass("KIWI-SWITCH-AUDIO-FAIL")}},{key:"_switchAudio",value:function(e,t){var n=this,r=this.logger,i=this.kiwi,a=this.engine.getMovieInfo();if(i.switchAudioTrack(e,!1),this.video().readyState<3)this.once(Md.NTF_TimeUpdate,(function(){a.currentLid=t,n.fire(k.a.NTF_AudioSwitched,{success:!0})}));else{var o,s,c=i.bufferInfo.media,u=null!==(o=c.buffered)&&void 0!==o&&o.audio?null===(s=c.buffered)||void 0===s?void 0:s.audio:c,d=parseInt(1e3*u.len/this.getPlaybackRate()+"",10);r.log("will switch audio after: "+d/1e3+"s"),this._switchAudioDelayTimer=setTimeout((function(){a.currentLid=t,n.fire(k.a.NTF_AudioSwitched,{success:!0})}),d)}}},{key:"getBufferTime",value:function(){var e=0;return this.isAd()||(e=this.kiwi.dataBufferInfo.end),e}},{key:"setSkipPrelude",value:function(){var e=this.kiwi,t=this.engine,n=t.movieinfo,r=t.skip,i=n.getPlayTimeRanges();if(this._skipTailTipped=!1,e.timeRanges=i,n.parts)if(r){if(this._skipTT>0){var a=e.patchStream;a&&this._skipTT>0&&e["delete"](a)}}else n.parts.patchFeeded_=!1}},{key:"adjustTimeRange",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this.engine.movieinfo,r=n.current,i=n.next,a=r;if(t&&(a=i),e.length>0){var o=a.duration,s=e[0][e[0].length-1],c=1;o>0&&s<o&&s+c>=o?s=o:s+=c,e[0][e[0].length-1]=s}return e}},{key:"getCurrentVD",value:function(){return parseInt(this.engine.movieinfo.vd,10)}},{key:"_canGetVideoInfo",value:function(e){var t=this;this.__canGetVideoInfo=e,e&&this.getVideoInfo((function(e){if(e){var n=t.engine.getMovieInfo();e.sid&&(n.sid=e.sid,n.albumId=e.sid),n.cType=e.cType}}))}},{key:"getVideoInfo",value:function(e){var t=this,n=t.engine,r=n.movieinfo,i=n.local,a=r.current,o=r.next;if(t.__canGetVideoInfo){var s=a;s.tvid||(s=o),Rd.a.get({tvid:s.tvid,vid:s.vid,locale:i},(function(n){n.vi&&(t.engine.isInteractVideo&&t.engine.iv_state.isI5Custom?(n.vi.isI5Custom=t.engine.iv_state.isI5Custom,n.vi.IPARTMENT5_DANMUSWITCH=t.engine.iv_state.others.IPARTMENT5_DANMUSWITCH):(n.vi.isI5Custom=!1,n.vi.IPARTMENT5_DANMUSWITCH="0")),e(n)}))}else setTimeout((function(){var n={tvid:a.tvid,vid:a.vid,albumId:a.albumId,cid:a.cid,vi:{vid:a.vid,videoQipuId:a.tvid}};t.engine.isInteractVideo&&t.engine.iv_state.isI5Custom&&(n.vi.isI5Custom=t.engine.iv_state.isI5Custom,n.vi.IPARTMENT5_DANMUSWITCH=t.engine.iv_state.others.IPARTMENT5_DANMUSWITCH),e(n)}),0)}},{key:"getVideoInfoByTvid",value:function(e,t){Rd.a.get({tvid:e,vid:"",locale:this.engine.local},(function(e){t(e)}))}},{key:"hasPreload",value:function(e){var t=this.engine.episode;return e+="",t.finishPres(e)&&t.finishFeatures(e)}},{key:"switchVideo",value:function(e){var t=this.logger,n=this.engine,r=n.movieinfo,i=n.pingbackV6,a=e.tvid,o=e.vid,s=e.cid,c=e.imageLoader,u=e.vfrm,d=e.vfrmblk,l=e.vfrmrst,f=e.startPlayTime,h=e.isSupportAI,p=e.share_sTime,_=e.share_eTime,v=e.isAdvanceEnd,g=e.innerIV,y=e.interactionType,m=e.isEnabledInteraction,b=r.current,x=r.next,T=!0===e.autoSwitch&&!!this.hasPreload(a,o);if(this.failProgramKey=undefined,this._videoSwitchPause=undefined,this._videoSwitching=!0,n.preVideoParam=e,a=Object(wd.a)(a),parseInt(a)===parseInt(b.tvid)&&!n.isInteractVideo)t.info("switch video,params: data = "+Id.a.stringify(e)+"    switch fail : Tvid is same");else{var S={vfrm:u||"",vfrmblk:d||"",vfrmrst:l||"",vfrmtp:e.autoSwitch?3:0,vvauto:e.autoSwitch?4:2,bkt:e.bkt||"",e:e.e||"",stype:e.stype||"",r_area:e.r_area||"",r_source:e.r_source||""};i.setvvfrom(e.vvfrom),i.setPlayPingbackInfo(S),i.sendEndPlayPingback(T?1:2,b.tvid);this.provider.clearAll(b.tvid),this._clearAbsDashHttp(),T?this.tempStore={isFirstVV:!1}:(x.isPreload=!1,this.pause(),this.clear(T),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(k.a.Status_Idle)),this._preplaying_spend=this._playingSpend,this._playingSpend=0,function(){e.autoSwitch=T;var r="\nswitch video:"+Id.a.stringify(e)+", ivosRuning="+n.ivosRuning,i="\n"+new Array(r.length).join("-");t.log(i+r+i)}();var P,w=1==Number(m)&&(1==Number(y)||0==Number(y))&&!Ad.a.browser.EDGE;this.engine.isIVSubSwitch=!1;try{if(w)P=!0,n.isInteractVideo=!0,n.adPlaySource=0,n.others={},n.isIVMain=P,n.interactionMode=y+"",n.initInteractVideo({tvid:a,vid:o||n.params.vid,cid:s,imageLoader:c,isSupportAI:h,isAdvanceEnd:v,resetHistory:!0});else{g?(P=a===n.iv_state.uniqueId,n.interactionMode=n.iv_state.interactionMode,n.isInteractVideo=!0,n.isIVMain=P,n.adPlaySource=61,n.isIVSubSwitch=!0):(n.isInteractVideo=!1,n.adPlaySource=0,n.others={});var I={tvid:a,vid:o||n.params.vid,cid:s,startPlayTime:f,imageLoader:c,isSupportAI:h,isAdvanceEnd:v};p!==undefined&&(I.share_sTime=p),_!==undefined&&(I.share_eTime=_),this.load(I)}}catch(A){t.error("load error, info = ".concat(A)),console.log("报错信息：",A)}}}},{key:"hasStatus",value:function(e){return this._eventer.statusPool.has(e)}},{key:"getStatusPool",value:function(){return this._eventer.statusPool}},{key:"setEndPlay",value:function(e){this._eventer._statusChanged(k.a.Status_End_Play,e)}},{key:"fireChanged",value:function(){var e=this;e.getVideoInfo((function(t){var n=e._eventer.getData();n.vi=t.vi||{},n.vi.vid=n.vid,e.engine.isInteractVideo?Rd.a.get({tvid:e.engine.iv_state.uniqueId,vid:n.vid},(function(t){n.vi.unique_vu=t.vi.vu,e.engine.iv_state.isI5Custom&&(n.vi.isI5Custom=!0,n.vi.IPARTMENT5_DANMUSWITCH=e.engine.iv_state.others.IPARTMENT5_DANMUSWITCH||"0"),e.fire(k.a.NTF_VideoChanged,n)})):e.fire(k.a.NTF_VideoChanged,n),e.logger.info("core videoChanged")}))}},{key:"noticeRecharge",value:function(e,t,n){var r=this.engine,i=r.movieinfo,a=r.params;i.rc_code=e;var o=!1;if(i.vipTypes&&i.vipTypes.length>0)for(var s=0;s<i.vipTypes.length;s++)1==i.vipTypes[s]&&(o=!0);var c=i.vipTypes||[],u=-1!=c.indexOf(1)||-1!=c.indexOf(6);this.pause(!1,!0);var d={tvid:i.tvid,vid:i.vid,code:e,isTennisContent:o,from:t||0,origin:a.origin||a.parentId,vipTypes:i.vipTypes,s3:u?this.hasSeeking?"S109":"S110":"",s4:u?"SHIKAN":"",s2:u?window.location.href:"",emptionType:this.engine.emptionType||0};n&&""!=n&&(d.urlType=n),this.engine.isInteractVideo&&(d.isInteractVideo=!0,d.uniqueId=this.engine.iv_state.uniqueId),this.fire(k.a.NTF_Recharge,d)}},{key:"checkAppendPatch",value:function(){var e=this.engine,t=this.kiwi,n=e.movieinfo,r=e.skip,i=n.parts;if(!(r&&this._skipTT>0)&&i&&!i.patchFeeded_&&(i.patchFeeded_=!0,!t.patchStream)){var a=i.data,o=i.components;t.loadSource(a,null,[[0,Infinity]],{streamType:Ru.Roll,components:o,roll:{rollType:Bu.POST_ROLL,category:"patch"}})}}},{key:"getPatchData",value:function(e,t){var n=null;if(e&&t){var r=this._getManifest(e,t);r.manifestType===Td.F4V&&(r.manifestContent.isAD=!1,r.manifestContent.done=!0,r.manifestContent.rollType=Bu.POST_ROLL,n={type:r.manifestType,data:r.manifestContent,components:r.components})}return n}},{key:"setDelayPlayInfo",value:function(e){this._isDelayPlay=!0,this._delayPlayTime=e}},{key:"clearDelayPlayInfo",value:function(e){this.fire(k.a.NTF_DelayToPlay_End),clearTimeout(this._delayTimer),this._isDelayPlay=!1,this._delayPlayTime=0,this._delayTimer=null,e&&this.play()}},{key:"play",value:function(e){var t=this,r=this;if(!r._isDelayPlay)return b()(_()(n.prototype),"play",this).call(this,e);r.fire(k.a.NTF_DelayToPlay,r._delayPlayTime),r._delayTimer||(this.logger.log("playproxy delay play, timeout start!"),r._delayTimer=setTimeout((function(){t.logger.debug("playproxy delay play, timeout end!"),r.fire(k.a.NTF_DelayToPlay_End),r._delayTimer=null,r._isDelayPlay=!1,r._delayPlayTime=0,b()(_()(n.prototype),"play",t).call(t,e)}),r._delayPlayTime))}},{key:"isDelayPlay",value:function(){return this.isDelayPlay}},{key:"checkVipPay",value:function(e,t,n,r,i){var a=Bd.a.getUid()||"",o=this;e||t?(e&&function(e,t,n,r){if(a&&e&&t&&!o.engine.isMini){var i=Ed.a.read("vipLayer")||"",s=parseInt(n||-1,10);-1==i.indexOf(a+"+"+t)&&5==s?Bd.a.reqVipTypes((function(e){var t=e.join(","),n="0"!==t&&""!==t;o.logger.log("vippay, request types callback, tt ".concat(t,", isVip ").concat(n)),-1!==e.indexOf(4)?r(!0,1):r(!1,n)}),!0):r(!1)}else r(!1)}(e,n,r,i),t&&function(e,t,n,r){if(a&&e&&t&&!o.engine.isMini){var i=Ed.a.read("vipLayer")||"",s=parseInt(n||-1,10);-1==i.indexOf(a+"+"+t)&&6==s?Bd.a.reqVipTypes((function(e){var t=e.join(","),n="0"!==t&&""!==t;o.logger.log("vippay, request types callback, tt ".concat(t,", isvip ").concat(n)),-1!==e.indexOf(4)?r(!0,2):r(!1,n)}),!0):r(!1)}else r(!1)}(t,n,r,i)):i(!1)}},{key:"playFromVipPay",value:function(){var e=this.engine.movieinfo.current,t=e.albumId,n=Bd.a.getUid()||"",r=Ed.a.read("vipLayer")||"",i=n+"+"+t;if(""!==r){var a=r.split("||");if(a.length>=5)for(var o=0;o<4;o++)i+="||"+a[o];else i=i+"||"+r}Ed.a.write("vipLayer",i),this.engine.adproxy.initSDK({data:this._eventer.getData(),movieinfo:e})}},{key:"getMP4URLByTvid",value:function(e,t){var n=this.engine.spt;(new il).request({params:{tvid:e,vid:"",k_ft1:"721829383634948",spt:n},hostUseIP:!1},(function(e){var n="";if(e.data&&e.data.st){var r=e.data,i=r.program,a=r.st,o=parseInt(a,10);if(100<o&&o<200&&i&&i.video)for(var s=0;s<i.video.length;s++)i.video[s].mp4Url&&(n=i.video[s].mp4Url)}t(n)}),(function(){t("")}))}},{key:"setDefList",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this,r=this._absDashRequests,i=this._absDashResponses,a=this.engine,o=a.movieinfo,s=a.autoVdUsing,c=a.spt,u=o.current,d=[],l=o.getVDInfo();s?d=u.vidl:t&&(d=[l]);for(var f=d.length,h=0,p=function(){h++;var e=i;if(h==f&&e.length>0){for(var t=0;t<e.length;t++){var r=e[t];r.other.feed=!1,r.other.fromlist=!0,r.other.listdone=t==e.length-1,n.kiwi.loadSource(r,0,[[]],{streamType:Ru.Episode,parseMftOnly:!0})}n._clearAbsDashHttp()}},_=0;_<f;_++)if(d[_].isUsable&&601!==d[_].bid){var v=d[_];t||!v.playlist&&v.vid!==u.vid?function(t){var a=n.requestDash({params:{tvid:u.tvid,vid:t.vid,vd:t.bid,switchvd:!0,spt:c}},{targetVd:t.vd,fileFormat:s?l.fileFormat:t.fileFormat},(function(n){var o=r.indexOf(a);if(o>-1&&r.splice(o,1),n){t.playlist=n.playlist,t.realArea=n.realArea;var s=e._getManifest(n,u).manifestContent;i.push(s)}p()}));r.push(a)}(v):p()}else p()}},{key:"requestDash",value:function(e,t,n){var r=e.params.vid;return(new il).request(e,(function(e){var i,a;if(e.data&&e.data.program&&e.data.program.video){var o=e.data,s=o.program,c=o.st,u=parseInt(c,10);if(100<u&&u<200&&s.video){var d=t.targetVd,l=t.fileFormat,f=ml(s.video,d);if(f&&f.vid==r&&(!l||l==f.fileFormat)){var h=e.data.boss_ts?"boss_ts":"boss";e.data[h]&&((a=e.data[h]).bossKeyTime=+new Date),i=f}}}n(i,a)}),(function(){n()}))}},{key:"_clearAbsDashHttp",value:function(){this._absDashRequests.forEach((function(e){e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort()})),this._absDashResponses.splice(0,this._absDashResponses.length),this._absDashRequests.splice(0,this._absDashRequests.length)}}]),n}(xl),zl=n(290);function Yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Gl="QiyiPlayerTimePlayedInDay",Ql={},Kl=["loadstart","ready","error","ended"];function $l(){var e=new Date;return e.getFullYear()+""+(e.getMonth()+1)+e.getDate()}function Zl(){var e=Ed.a.read(Gl),t=$l(),n=0;return e&&(t=(e=e.split("|"))[0],n=parseFloat(e[1])),{day:t,totalTime:n}}var Xl=function(e){l()(n,e);var t=Yl(n);function n(e){var r;return a()(this,n),r=t.call(this),e.on(k.a.NTF_AD_NotifyManager,(function(e){r.emit(e)})),r}return n}(v.a),Jl=function(e){l()(n,e);var t=Yl(n);function n(e,r){var i,o;a()(this,n),i=t.call(this);var s=u()(i);i._isVip=!1,i._disableVideoOP=!1,i._user=Bd.a,i.bussiness=new Xl(e,r),i._container=r.adContainer,i.engine=e,i.view=r,i.beforeIsAD=!1,i.beforeSeek=0,i.logger=new Id.a("AdApi[".concat(e.id,"]"));var c=function(t,n){var r={type:t,gas:i.getCurrentGas()};n&&(r.data=n,n.gas&&(r.gas=n.gas));var a=function(e){var t=e.type,n=e.gas,r=n?n.id:undefined;if(!n||-1==Kl.indexOf(t))return!0;var i=Ql[r];if(i){if(i[t])return!1;i[t]=!0}else Ql[r]={},Ql[r][t]=!0;return!0}(r);e.isAd()&&i.logger.info("adapi, emit, type=".concat(t,", isAd=").concat(e.isAd(),", fire = ").concat(a," obj=").concat(JSON.stringify(r))),a&&i.emit(t,r)};e.on(k.a.NTF_StatusChanged,(function(e){switch(e.state){case k.a.Status_AdLoadstart:c("loadstart",e);break;case k.a.Status_Ready:break;case k.a.Status_Play:c("play",e);break;case k.a.Status_AdPlaying:c("playing",e);break;case k.a.Status_Playing:Ql={},c("playing",e);break;case k.a.Status_AdPaused:case k.a.Status_Paused:c("pause",e);break;case k.a.Status_AdWaiting:case k.a.Status_Waiting:c("waiting",e);break;case k.a.Status_AdError:c("error",e);break;case k.a.Status_PlayError:Ql={},c("error",e);break;case k.a.Status_AdStalled:c("stalled",e);break;case k.a.Status_AdWillPlayEnded:c("willended",e);break;case k.a.Status_AdPlayEnded:case k.a.Status_End_Play:c("ended",e)}}));var d=0;e.on(k.a.NTF_AD_TimeUpdate,(function(t){clearTimeout(d),d=setTimeout((function(){var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,c("timeupdate",t)}),0)})),e.on(k.a.NTF_Before_Seeking,(function(t){var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.isFusionMode;s._before={beforeIsAD:t.isAd,referrerGas:t.gas,beforeSeek:r,isFusionMode:i}}));var l=function(t){t.isAD=e.isAd();var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,c("seeked",t)};e.on(k.a.NTF_AD_Seeking,(function(e){l(e)})),e.on(k.a.NTF_Seeking,(function(e){l(e)}));var f=function(t){t.isAD=e.isAd(),t.actionType="controls";var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,Object(Fd.a)(t,s._before),c("afterSeeked",t),s._before=undefined};e.on(k.a.NTF_AD_Seeked,(function(e){f(e)})),e.on(k.a.NTF_Seeked,(function(e){f(e)})),e.on(k.a.NTF_TimeUpdate,(function(t){c("timeupdate",t);var n=e.getCurrenttime(),r=n-o;o&&r>0&&r<1&&function(e){var t=Zl(),n=$l();t.day===n?t.totalTime+=e:t.totalTime=e,Ed.a.write(Gl,n+"|"+t.totalTime)}(r),o=n})),e.on(k.a.NTF_PLAY_MUTED,(function(e){c("muted",e)}));var h=r.fullscreen;return h&&h.on("change",(function(e){c("exit"===e?"exitfullscreen":"fullscreen")})),e.on(k.a.NTF_DelayToPlay,(function(){c("pausetoplay")})),Bd.a.on("infoset",(function(){Bd.a.isVip((function(e){s._isVip=e}))})),i}return s()(n,[{key:"load",value:function(e){e=e||{};var t=Array.isArray(e);t&&e.length>0||e.file&&!isNaN(e.offset)&&e.offset>=0?this.bussiness.emit("_playdata_",e):this.logger.warn("load error data parameter: isArray = ".concat(t,", ").concat(Id.a.stringify(e)))}},{key:"getEngineType",value:function(){return"data"}},{key:"getCurrentGas",value:function(){return this.engine.getCurrentGas()}},{key:"abort",value:function(){this.engine.abortAres()}},{key:"isVIP",value:function(){return this._isVip}},{key:"getUserInfo",value:function(){var e=!1;return this._user.isVip((function(t){e=t})),{isVIP:e,passportCookie:this._user.passportCookie(),passportId:this._user.getUid(),isLogin:this._user.isLogin(),uaaUserId:qd.a.getFluid()||qd.a.getJsuid()}}},{key:"adcontainer",value:function(){return this._container}},{key:"video",value:function(){return this.engine.video()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"play",value:function(e){this._disableVideoOP||this.engine.play(e)}},{key:"pause",value:function(e){this._disableVideoOP||this.engine.pause(e)}},{key:"addEventListener",value:function(e,t){this.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"src",value:function(){if(1!==arguments.length)return this.engine.getSrc()||"";this.logger.error("mw is not support set src!")}},{key:"volume",value:function(e){if(!e)return this.engine.getVolume();this.engine.setVolume(e)}},{key:"muted",value:function(e){if("boolean"!=typeof e)return this.engine.getMuted();this.engine.setMuted(e)}},{key:"height",value:function(){return this.view.getWrapperArea().height}},{key:"width",value:function(){return this.view.getWrapperArea().width}},{key:"currentTime",value:function(){return this.engine.getCorrectTimeObj().acurrent}},{key:"duration",value:function(){return this.engine.getCorrectTimeObj().aduration}},{key:"buffered",value:function(){return this.engine.getBufferTime()}},{key:"sendUserActionPingback",value:function(e){this.view.pingback.sendUserActionPingback(e)}},{key:"fullscreentoggle",value:function(){this.view.fullToggle()}},{key:"isFullScreen",value:function(){var e=this.view,t=e.fullscreen;return e.setting.expandScreen?!!this.engine.isFullScreen:t?t.isFullScreen():void 0}},{key:"webfullscreentoggle",value:function(){var e=this.view.webfullscreen;e&&e.toggle()}},{key:"isWebFullScreen",value:function(){var e=this.view.webfullscreen;if(e)return e.isWebFullScreen()}},{key:"videoPlayedDurationInDay",value:function(){return Zl().totalTime}}]),n}(v.a);function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nf=function(){function e(t){a()(this,e),this.engine=t,this.logger=new Id.a("AdProxy[".concat(t.id,"]")),this.adInfo={},this.seekableMidAd={},this.delayBriefAds={},this.firstAdData=!0}return s()(e,[{key:"init",value:function(){var e=this,t=this.engine.pack;this.sdk=t.ad,this.initMiddle(t),this.initAdSdkEvent(),this.initEpisode();var n=!1,r=!1,i=null;this.engine.recorder?this.once(k.a.NTF_Get_Record,(function(){r=!0,n&&(i.movieinfo.isPreload?e.sdk.playPreload():e.engine.playproxy.checkVipPay(i.movieinfo.vipBlock,i.movieinfo.vipTheatre,i.movieinfo.albumId,i.movieinfo.authTipType,(function(t,n){t?e.fire(k.a.NTF_Show_VIPPay,n):e.initSDK(i,n)})))})):r=!0,this.on(k.a.NTF_VRSReady,(function(t){n=!0,r?(e.logger.log("ares vrsready, isPreload = ".concat(t.movieinfo.isPreload,", tvid = ").concat(t.movieinfo.tvid,", vid = ").concat(t.movieinfo.vid)),t.movieinfo.isPreload?e.sdk.playPreload():e.engine.playproxy.checkVipPay(t.movieinfo.vipBlock,t.movieinfo.vipTheatre,t.movieinfo.albumId,t.movieinfo.authTipType,(function(n,r){n?e.fire(k.a.NTF_Show_VIPPay,r):e.initSDK(t,r)}))):i=t})),this.on(k.a.NTF_VRSPreloaded,(function(t){e.initSDK(t)})),this.on(k.a.NTF_VideoChange,(function(){e.middleware._disableVideoOP=!0})),this.on(k.a.NTF_VideoChanged,(function(){e.middleware._disableVideoOP=!1,e.delayFireBriefAD()}))}},{key:"initMiddle",value:function(e){var t=this,n=e.engine,r=e.view,i=n.playproxy,a=n.episode,o=this.logger,s=this.delayBriefAds;this.middleware=new Jl(n,r),this.middleware.bussiness.on("_playdata_",(function(e){if(e.length!==undefined&&e.length>0)t._parseListSource(e);else{var r=e.videoEventId,c=e.mvst?zl.a.parse(e.mvst):null,u=Od.a.getEpisodeId(r),d=a.valid(u),l=n.movieinfo,f=!!l.current&&l.current.tvid===u,h=function(e,t){for(var n=null,r=0;r<e.length;r++)if(e[r].vd==t){n=e[r];break}return n}(l.vidl,n.getCurrentVD()),p=h?h.mver:null;if(c&&Object.prototype.hasOwnProperty.call(c,p)&&(e.offset=c[p]/1e3),o.info("ares notice-info, _playdata_, ares mw load"+(d?"":" invalid")+":"+Id.a.stringify(e)),d){var _=0;switch(e.type){case"preroll":a.finishPres(u)?o.warn(u+": ignore ares gas, "+Id.a.stringify(e)):(a.addPres(u,[e]),t._feedKernelAd(u,e,!1,0,"preroll"));break;case"briefRoll":e.seekable?t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],_=e.offset;var v=!0;if(f){var g=l.getPlayHead().playRealStartTime;v=!n.hasStatus(k.a.Status_EveryStartPlay)&&_<=g}v?(_=0,a.addBriefs(u,[e]),t._feedKernelAd(u,e,!1,_,"briefRoll")):(s[u]||(s[u]=[]),s[u].push({videoId:u,adData:e,offset:_}));break;case"midroll":i.getCurrenttime()<e.offset?(e.seekable?t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],a.addMids(u,[e]),t._feedKernelAd(u,e,!1,e.offset,"midroll")):o.warn(u+":drop ares gas, "+Id.a.stringify(e))}}}}))}},{key:"_parseListSource",value:function(e){if(e.length!==undefined&&e.length>0){for(var t,n,r,i,a=this.engine,o=this.logger,s=a.playproxy,c=a.episode,u=[],d=[],l="++++ ad log, ares notice-info, _playdata_, ares mw load, isFusionMode=true, len=".concat(e.length,","),f=0;f<e.length;f++){var h=e[f],p=h.videoEventId;n=Od.a.getEpisodeId(p),t=c.valid(n),i=h.type,r=h.offset,t&&s.getCurrenttime()<r&&(u.push({duration:h.duration,url:h.file,gas:h}),d.push(Object(Fd.a)({isFusionMode:!0},h))),l+=", id(".concat(h.id,")-offset(").concat(r,")-seekable(").concat(h.seekable,")-duration(").concat(h.duration,")-videoValid(").concat(t,");;; ")}o.log(l),u.length>0&&(c.addMids(n,d),this._feedKernelAd(n,u,!1,r,i))}}},{key:"initSDK",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,r=this.engine,i=r.params,a=r.local,o=r.playerVersion,s=r.movieinfo,c=r.adPlaySource,u=r.episode,d=r.pack,l=d.view,f=s.startPlayTime,h=s.getVDInfo(),p=e.movieinfo,_=!!p.isPreload,v=i.cid||"";p.adPlayerID&&(v=p.adPlayerID),i.isCid||!Ad.a.os.android&&!Ad.a.os.ios||(v=navigator.userAgent.indexOf("MicroMessenger")>-1?"qc_105092_300416":"qc_100001_100103");var g=i.isSupportViewpoint||!1,y=i.site||"iqiyiw",m=0;f>=h.duration&&(f=0);var b=s.getPlayTimeRanges(),k=_?s.next:s.current;if("history"===k.playStartFrom){var x=b[0][0],T=b[b.length-1][1];m=x<f&&f<T?f:x}var S=function(e){t.middleware._isVip=e;var n=t.middleware.video(),r=p.tvid+"",s=$d.a.isNumber(p.vd)?p.vd:parseInt(t.engine.vd,10);51===s&&(s=5);var d={autoLoad:!0,autoRender:!0,isMacH5:!0,isPreload:_,adPlayerId:v,episodeId:r,videoEventId:Od.a.generate(r),videoDefinition:s,showVoiceIcon:!(Ad.a.os.android||Ad.a.os.ios),videoMidware:t.middleware,isVIP:e,isSupportViewpoint:g,site:y,locale:a,passportId:Bd.a.getUid(),passportCookie:Bd.a.passportCookie(),clientVersion:o,videoContainer:n,couponCode:i.cpnc||"",couponVer:i.cpnv||"",ptid:Ad.a.getPtid(Wd.a.isTWLocale()),timePoint:m,playSource:c||0,theaterMode:l.setting.theaterMode,terminal:i.terminal||""};"home"===i.sourcePage?u.finishPres(r,!0):setTimeout((function(){for(var e=tf({},d),n=["videoMidware","videoContainer"],r=0;r<n.length;r++)delete e[n[r]];t.logger.log("ares init, excludes: [".concat(n.join(),"], ").concat(Id.a.stringify(e))),t.sdk.init(d)}),0)};n!==undefined?S(n):Bd.a.isVip((function(e){S(e)}))}},{key:"initAdSdkEvent",value:function(){var e=this,t=this.sdk,n=this.engine,r=this.logger,i=this.delayBriefAds,a=n.playproxy,o=n.episode,s=n.movieinfo,c=n.skip,u=n.autoplay,d=n.pingbackQOS;t.on("single_ad_start",(function(t){r.log("ares notice-info, single_ad_start"),e.adInfo.rollType=e.adInfo.rollType||"mraid",e.fire(k.a.NTF_AD_SingleStart),n.getStatusPool().add([k.a.NTF_AD_SingleStart])})),t.on("single_ad_end",(function(t){r.log("ares notice-info, single_ad_end"),e.adInfo.rollType=e.adInfo.rollType||"mraid",e.fire(k.a.NTF_AD_SingleEnd,e.adInfo),n.getStatusPool().remove([k.a.NTF_AD_SingleStart])})),t.on("roll-play",(function(t){var n,i=t.rollType,a=t.videoEventId,s=Od.a.getEpisodeId(a),c=o.valid(s),u=!1,d=!1;if("midroll"==i){var l=o.getMids(s);l.length>0&&(u=l[0].seekable,d=!!l[0].isFusionMode,n=l[0].offset)}e.seekableMidAd["".concat(i,"_").concat(a)]&&(u=!0),r.log("ares notice-info,  roll-play".concat(c?"":" invalid",", rollType:").concat(i,", isFusionMode:").concat(d,", seekable:").concat(u,", data:").concat(Id.a.stringify(t))),c&&(e.adInfo={rollType:i,videoId:s,seekable:u,isFusionMode:d,offset:n},e.fire(k.a.Status_AresPlay,e.adInfo))})),t.on("roll-ended",(function(t){var n=t.rollType,i=t.videoEventId,l=Od.a.getEpisodeId(i),f=s.tvid==l,h=o.valid(l)&&f;if(r.info("ares notice-info, roll-ended, abortAllAres "+(h?"":" invalid")+Id.a.stringify(t)+", videoId: "+l+", tvid: "+s.tvid),h){switch(n){case"preroll":a.tempStore.__sendFinishPres||(a.tempStore.__sendFinishPres=!0,d.sendFinishPresPingback()),o.finishPres(l,!0);break;case"midroll":o.finishMids(l,!0);break;case"briefRoll":o.finishBriefs(l,!0)}a.abortAllAres(n),(c&&u||!c||Ad.a.os.ios||Ad.a.os.android)&&a.isPaused()&&(r.log("manual play"),a.play()),e.fire(k.a.Status_AresEnded,{agent:"ares",data:{rollType:n,videoId:l}})}})),t.on("roll-load-finish",(function(t){var a=t.rollType,c=t.videoEventId,u=Od.a.getEpisodeId(c),d=o.valid(u),l=s.tvid==u;r.info("ares notice-info, roll-load-finish"+(d?"":" invalid")+":"+Id.a.stringify(t));var f,h=n.sptr;if(h.asdkistm=t.initStartTime||0,h.asdkietm=t.initEndTime||0,h.adsrqstm=t.showStartTime||0,h.adsrqetm=t.showEndTime||0,h.adaetm=+new Date,d)switch(a){case"preroll":0!==o.getPres(u).length&&l||"boolean"!=typeof(f=o.finishPres(u))||f||o.finishPres(u,!0);break;case"briefRoll":"boolean"!=typeof(f=o.finishBriefs(u))||f||o.finishBriefs(u,!0),i[u]&&i[u].length&&e.delayFireBriefAD();break;case"midroll":"boolean"!=typeof(f=o.finishMids(u))||f||o.finishMids(u,!0)}})),t.on("error",(function(e){r.info("ares notice-info, error"+Id.a.stringify(e)),a.brokedown(Qd.a.AD,Qd.a.P07001)})),t.on("adplayer_showtip",(function(t){r.log("ares notice-info, adplayer_showtip"),e.fire(k.a.NTF_AD_Showtips,t)})),t.on("adplayer_ad_info",(function(t){var n=(t=t||{}).data,i=n.videoEventId,a=Od.a.getEpisodeId(i),c=o.valid(a);r.info("ares notice-info, adplayer_ad_info "+(c?"":" invalid")+":"+Id.a.stringify(t)),c&&(n&&($d.a.isObject(n.definitionSwitchingAd)?(o.setDefinitionAd(a,t),s.aresnoticedata.definition=n):$d.a.isArray(n.viewPoints)&&(s.aresnoticedata.viewPoints=n.viewPoints)),e.fire(k.a.Status_AresNoticeInfo,t))})),t.off("adplayer_ad_start"),t.on("adplayer_ad_start",(function(t){r.log("ares notice-info, adplayer_ad_start"),t&&"13"==t.ctp&&(n.adWholeCorner=!0),e.fire(k.a.NTF_AD_Start,t)})),t.off("adplayer_ad_end"),t.on("adplayer_ad_end",(function(t){r.log("ares notice-info, adplayer_ad_end"),e.fire(k.a.NTF_AD_End,t)})),t.off("pause_start"),t.on("pause_start",(function(t){"audio"===t.type&&(e.logger.log("ares notice-info, pause_start, get audio ad info! delayTime = ".concat(t.duration)),a.setDelayPlayInfo(1e3*t.duration||2500))})),t.off("pause_end"),t.on("pause_end",(function(t){"audio"===t.type&&(e.logger.log("ares notice-info, pause_end, get audio ad info! status = ".concat(t.status)),"common"===t.status?a.clearDelayPlayInfo(!0):a.clearDelayPlayInfo(!1))})),t.off("adplayer_ad_block"),t.on("adplayer_ad_block",(function(t){e.logger.info("ares notice-info, adplayer_ad_block, ".concat(JSON.stringify(t)," ")),t.videoEventId===a.getCurrentGas().videoEventId&&e.fire(k.a.NTF_AD_BLOCK)}))}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"on",value:function(e,t){this.engine.on(e,t)}},{key:"once",value:function(e,t){this.engine.once(e,t)}},{key:"clear",value:function(){}},{key:"resize",value:function(){this.sdk.resize()}},{key:"initEpisode",value:function(){var e=this,t=this.engine,n=t.playproxy,r=t.episode;r.on("finishAddPres",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=Od.a.getEpisodeId(a.videoEventId);e._feedKernelAd(r,null,!0,0,"preroll"),r===o||0===i&&(o===undefined||isNaN(o))?n.concatCurFeature(r):n.concatPreloadFeature(r)})),r.on("finishAddMids",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=Od.a.getEpisodeId(a.videoEventId);(r===o||0===i&&(o===undefined||isNaN(o)))&&e._feedKernelAd(r,null,!0,null,"midroll")})),r.on("finishAddBriefs",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=Od.a.getEpisodeId(a.videoEventId);(r===o||0===i&&(o===undefined||isNaN(o)))&&e._feedKernelAd(r,null,!0,null,"briefRoll")}))}},{key:"_feedKernelAd",value:function(e,t,n,r,i){var a=this.engine,o=this.logger,s=a.movieinfo,c=a.playproxy,u=a.episode,d=a.sptr,l=e==s.tvid,f={},h=!1,p=[[0,Infinity]],_={isCurrent:l,components:["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],streamType:Ru.Roll,roll:{offset:r,done:n}};if(!n||!("preroll"===i&&0===u.getPres(e).length||"midroll"===i&&0===u.getMids(e).length||"briefRoll"===i&&0===u.getBriefs(e).length)){if("briefRoll"===i){if(!t)return;n=!0}if(Array.isArray(t)&&t.length>0?(f.fs=t,h=t[0].gas.seekable):t&&(f.fs=[{duration:t.duration,url:t.file,gas:t}],h=t.seekable),"briefRoll"===i)_.roll.category="ad::brief",_.roll.rollType=Bu.INDETERMINACY_ROLL;else switch(_.roll.category="ad",i){case"preroll":_.roll.rollType=Bu.PRE_ROLL;break;case"midroll":_.roll.rollType=Bu.MID_ROLL}f.offset=r,f.other={seekable:h,done:n},this.firstAdData?this.firstAdData=!1:_.parseMftOnly=!0,this.firstAdData=n,o.debug("load ad, videoId=".concat(e,", tvid=").concat(s.tvid,", type: ").concat(i,", done: ").concat(f.done,", offset: ").concat(f.offset,", seekable: ").concat(f.seekable,", isFusionMode: ").concat(f.isFusionMode)),c.tempStore.isFirstVV&&!c.tempStore.__sendFirstFrameShow&&(d.vclstm=+new Date),c.kiwi.loadSource(f,0,p,_)}}},{key:"delayFireBriefAD",value:function(){var e=this,t=this.delayBriefAds,n=this.engine,r=n.episode,i=n.movieinfo;this.engine.once(k.a.NTF_TimeUpdate,(function(){if(t[i.tvid]){for(var n,a,o,s,c=t[i.tvid].splice(0,1)[0];c;)s=!0,n=c.videoId,a=c.adData,o=c.offset,r.addBriefs(n,[a]),e._feedKernelAd(n,a,!1,o,"briefRoll"),c=t[i.tvid].splice(0,1)[0];s&&e._feedKernelAd(n,null,!0,null,"briefRoll")}}))}},{key:"getAdInfo",value:function(){return this.adInfo}},{key:"getAdLog",value:function(){return this.sdk.fetchLogs()}},{key:"destroy",value:function(){this.clear(),this.sdk.destroy()}}]),e}(),rf=function(){function e(t){a()(this,e),this.startPlayTime=0,this.endPlayTime=0,this.goodsPoints=[],this.current={},this.next={},this.engine=t,this.aresnoticedata={},this.logger=new Id.a("MovieInfo[".concat(t.id,"]"))}return s()(e,[{key:"tvid",get:function(){return this.current.tvid},set:function(e){this.current.tvid=e}},{key:"vid",get:function(){return this.current.vid},set:function(e){this.current.vid=e}},{key:"vd",get:function(){return this.current.vd},set:function(e){this.current.vd=e}},{key:"vidl",get:function(){var e=[];return $d.a.isArray(this.current.vidl)&&(e=this.current.vidl),e}},{key:"adPlayerID",get:function(){return this.current.adPlayerID},set:function(e){this.current.adPlayerID=e}},{key:"isTryWatch",get:function(){return this.current.isTryWatch}},{key:"previewTime",get:function(){return this.current.previewTime}},{key:"previewType",get:function(){return this.current.previewType}},{key:"imageLoader",get:function(){return this.current.imageLoader},set:function(e){this.current.imageLoader=e}},{key:"currentLid",get:function(){return this.current.currentLid}},{key:"parts",get:function(){return this.current.parts},set:function(e){this.current.parts=e}},{key:"watermark",get:function(){return this.current.watermark},set:function(e){this.current.watermark=e}},{key:"hasSendSencondAuthRemote",get:function(){return this.current.hasSendSencondAuthRemote},set:function(e){this.current.hasSendSencondAuthRemote=e}},{key:"rc_code",get:function(){return this.current.rc_code},set:function(e){this.current.rc_code=e}},{key:"pcaHas4k",get:function(){return this.current.pcaHas4k}},{key:"setStartPlayTime",value:function(e,t){e<0?this.logger.error("play start time set error!"):this.startPlayTime=this.current.isTryWatch&&!t?0:e}},{key:"getPlayHead",value:function(){var e=this.getPlayTimeRanges(),t=e[0][0],n=e[e.length-1][1],r=null,i=this.startPlayTime,a=t;return t<=i&&i<n&&(a=r=i),{timeRanges:e,playHeadTime:r,playRealStartTime:a}}},{key:"initShareTime",value:function(e,t){var n=this.engine.params,r=function(e,t){var n=0,r=undefined;return e&&(n=parseInt(e,10)<0?0:parseInt(e)),t&&(r=parseInt(t,10)<0?0:parseInt(t)),{nsTime:n,neTime:r}};if(n.share_sTime||n.share_eTime){var i=r(n.share_sTime,n.share_eTime);this.current.share_start_time=i.nsTime,this.current.share_end_time=i.neTime,n.share_sTime=!1,n.share_eTime=!1}else if(e||t){var a=r(e,t);this.current.share_start_time=a.nsTime,this.current.share_end_time=a.neTime}}},{key:"getVDInfo",value:function(e,t){var n=e?this.next:this.current;t=t||n.vd;var r={};return n.vidl&&(r=n.vidl.filter((function(e){return e.vd===t}))[0]),r}},{key:"setInfo",value:function(e){this.current=e}},{key:"clear",value:function(){this.startPlayTime=0,this.endPlayTime=0,this.current={},this.next={}}},{key:"switch",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.current=e||this.next,this.next={}}},{key:"preload",value:function(e){e.isPreload=!0,this.next=e}},{key:"getPlayTimeRanges",value:function(e){var t,n=e?this.next:this.current,r=0,i=n.isPreload?0:this.startPlayTime,a=n.prelude||{},o=this.engine.skip,s=o&&a.headTime>0?a.headTime:0,c=o&&a.tailTime>0?a.tailTime:Infinity;return t=c,i>0&&i+5<t&&(n.playStartFrom="history",r=i),s>0&&s>=r&&(n.playStartFrom="prelude",r=s),"number"==typeof n.share_start_time&&n.share_start_time>=0&&(r=parseInt(n.share_start_time),n.playStartFrom="share"),"number"==typeof n.share_start_time&&n.share_end_time&&n.share_end_time>=n.share_start_time&&(t=parseInt(n.share_end_time)),r>parseInt(n.share_end_time)&&(t=c),[[r,t]]}}]),e}(),af="//l-rcd.iqiyi.com/apis/qiyirc/setrc.php",of="//nl-rcd.iqiyi.com/apis/urc/setrc",sf=function(){function e(t){a()(this,e);var n,r=this,i=!1,o=function(){i||(i=!0,r._record())};r.logger=new Id.a("recorder".concat(t.id)),r._core=t,r._isSwitchingDefinition=!1,t.on(k.a.NTF_StatusChanged,(function(e){var i=e.state;if(i===k.a.Status_Playing&&r.startTimer(),i===k.a.Status_Paused||i===k.a.Status_Waiting||i===k.a.Status_Stoped){if(i===k.a.Status_Waiting){if(t.isSeeking())return;if(t.getCurrenttime()<=1)return}if(Math.abs(t.getDuration()-t.getCurrenttime())<=1&&i!==k.a.Status_Stoped)return;n&&clearTimeout(n),r.stopTimer(),r._record(i===k.a.Status_Stoped)}})),t.on(k.a.NTF_Seeked,(function(e){var i=parseInt(e.current,10)||0;n&&clearTimeout(n),n=setTimeout((function(){n=null,t.isAd()||r._record(i)}),1e3)})),t.on(k.a.NTF_DefinitionSwitching,(function(){r._isSwitchingDefinition=!0})),t.on(k.a.NTF_DefinitionSwitched,(function(){r._isSwitchingDefinition=!1})).on(k.a.NTF_VideoChanged,(function(){r._isSwitchingDefinition=!1})),t.once(k.a.NTF_VRSStart,(function(e){t.isInteractVideo||r._getCurrent(e.data.tvid)})),window.addEventListener("unload",o),window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o)}return s()(e,[{key:"stopTimer",value:function(){var e=this;e._timer&&(clearInterval(e._timer),e._timer=null)}},{key:"startTimer",value:function(){var e=this;e._timer||(setTimeout((function(){return e._record()}),5e3),e._timer=setInterval((function(){return e._record()}),12e4))}},{key:"getCKUid",value:function(){return Ad.a.os.ios||Ad.a.os.android?qd.a.getJsuid():qd.a.getFluid()}},{key:"_getCurrent",value:function(e){var t=this;function n(){var n=Bd.a.isLogin()?"//l-rcd.iqiyi.com/apis/qiyirc/getvplay":"//nl-rcd.iqiyi.com/apis/urc/getvplay",r={};r.tvId=e,r.agent_type=1,Bd.a.isLogin()||(r.ckuid=t.getCKUid()),Nd.a.json({url:n,params:r,timeout:5e3,success:function(e){var n=function(e){t._core.getMovieInfo().tvid==e.tvId&&(t.logger.log("Movie History,params: isLogin = "+Bd.a.isLogin()+", time ="+e.videoPlayTime),t._setStartPlayTime(e.videoPlayTime))};e.data&&e.data.videoPlayTime>10?t._core.eventlog.vrsready?(n(e.data),t._core.emit(k.a.NTF_Get_Record)):t._core.once(k.a.NTF_VRSReady,(function(){n(e.data),t._core.emit(k.a.NTF_Get_Record)})):t._core.emit(k.a.NTF_Get_Record),t.startTimer()},failure:function(){t._core.emit(k.a.NTF_Get_Record)}})}t._isSwitchingDefinition||(e?n():t._core.getVideoInfo((function(e){n(e.tvid)})))}},{key:"_setStartPlayTime",value:function(e){this.logger.log("play time point from record："+e),this._core.movieinfo.setStartPlayTime(e)}},{key:"_record",value:function(){var e=this,t=!1,n=null;if(arguments.length>0){var r=arguments[0];"boolean"==typeof r?(t=r)&&(n=0):"number"==typeof r&&(n=r)}null===n&&(n=parseInt(e._core.getCurrenttime(),10)||0),e._core.isInteractVideo&&!e._core.isIVMain||e._core.ivosRuning||!e._core.isRecordProgress||e._core.getVideoInfo((function(r){var i=Bd.a.isLogin(),a=i?af:of,o=Ad.a.browser.ipad||Ad.a.browser.ipod?21:11,s={tvId:r.tvid,terminalId:o,agent_type:1};i||(s.ckuid=e.getCKUid()),s.videoPlayTime=n,(s.videoPlayTime>0&&s.videoPlayTime<e._core.getDuration()&&!e._core.isAd()&&!e._core.isPatch()||t)&&(e.logger.log("record history："+s.videoPlayTime+", tvid: "+s.tvId+(t?"":", duration: "+e._core.getDuration())),Nd.a.json({url:a,params:s}))}))}}]),e}(),cf=(n(55),n(277),n(122)),uf=n(433),df=function(){function e(t,n){a()(this,e),this.logger=new Id.a("IVRecorder[".concat(t.id,"]")),this.engine=t,this.params=n,this.engine.on(k.a.NTF_IVPACKAGEPARSE_Finished,this._IVPackageParseSuccess.bind(this)),this.engine.on(k.a.NTF_IVPACKAGEPARSE_Failed,this._IVPackageParseFailed.bind(this))}return s()(e,[{key:"init",value:function(e){var t=this;t._initIVState(e),t._initXFactor(e.globle||{}),t._initBlockList(e),t.processHistory()}},{key:"_IVPackageParseSuccess",value:function(e){this.logger.info("interaction package parse successed"),this.init(e)}},{key:"_IVPackageParseFailed",value:function(){var e=this.engine;this.logger.warn("interaction package parse failed"),e.playproxy._eventer.brokedown(Qd.a.IVG,Qd.a.IV0001)}},{key:"_initIVState",value:function(e){var t={};t.uniqueId=this.params.tvid,t.fileName=e.base.filename,t.version=e.base.fileVersion,t.interactionMode=e.base.interactMode,t.protocolVersion=e.base.protocolVersion,t.privateCustom=e.base.privateCustom,t.isI5Custom="IPARTMENT5_LANDSCAPE"===t.privateCustom,t.storylineType=e.base.storylineType,t.isVertical="1"==e.base.playerType,t.index=0,this._setState(t)}},{key:"_setState",value:function(e){this.engine.iv_state=Object.assign(this.engine.iv_state,e)}},{key:"_initBlockList",value:function(e){this.playBlockList=e.playBlockList||[],this.interactBlockList=e.interactBlockList||[]}},{key:"_getBlockByTvid",value:function(e){return this.playBlockList.find((function(t){return t.filename==e}))}},{key:"_getInteractBlockIdByTvid",value:function(e){var t=this.playBlockList,n=this.interactBlockList,r=t.find((function(t){return t.filename==e})).blockid;return n.find((function(e){return e.inPlayBlockid==r})).blockid}},{key:"request",value:function(){var e=this,t=e.engine.iv_state;return new Promise((function(n,r){var i={uniqueId:e.params.tvid,qyid:qd.a.getFluid()||qd.a.getJsuid(),app_v:cf.a,platform_id:1079,app_Im:Wd.a.isTWLocale()?"tw":"cn",lang:Wd.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",version:t.version};Nd.a.json({url:Hd.IVHistory,timeout:3e3,params:i,success:function(t){t&&"A00000"===t.code?(e.logger.info("interaction record, last points request successed"),n(t)):r(t)},failure:function(){r()}})}))}},{key:"_initXFactor",value:function(e){var t=this;t.engine.XFactorManager?t.engine.XFactorManager.reset(e||{}):t.engine.XFactorManager=new uf.a(e||{})}},{key:"processHistory",value:function(){var e=this,t=e.engine,n=t.iv_state,r=function(){e.engine.isIVMain=!0,n.storyLine="0";var r=e.params.tvid,i=e._getBlockByTvid(r);e.engine.iv_state.isI5Custom&&(e.engine.iv_state.others=i?i.others:{}),e.sendAction({status:0}),e.engine.load(e.params),e.engine.emit(k.a.NTF_Get_Record),t.IVRecorder.sendAction({status:6,currentTime:0,blockId:i.blockid,playBlockId:i.blockid,tvId:r,albumId:r,switch_type:1,switch_time:0})};e.params.resetHistory?r():e.request().then((function(r){!function(r){var i={};if(i.index=parseInt(r.index||0,10),i.storyLine=r.storyLine||1,i.isFromHistory=!0,r.pathData&&0!==r.pathData.tvId){var a=r.pathData,o=a.tvId,s=a.currentTime,c=a.globleValues;e.params.tvid=o,e.params.startPlayTime=s,t.isIVMain=n.uniqueId===o,t.isIVMain?t.adPlaySource=0:t.adPlaySource=61,e._initXFactor(c)}else e.engine.isIVMain=!0;if(e.engine.iv_state.isI5Custom){var u=e._getBlockByTvid(e.params.tvid);e.engine.iv_state.others=u?u.others:{}}e.logger.info("interaction record ok, start load"),e._setState(i),t.load(e.params),t.emit(k.a.NTF_Get_Record)}(r)}),r)}},{key:"sendAction",value:function(e){var t=this,n=t.engine.iv_state;if(e.tvId){var r=t._getBlockByTvid(e.tvId);if(r.others&&"1"==r.others.IPARTMENT5_ABANDONHISTORY)return}var i={qyid:qd.a.getFluid()||qd.a.getJsuid(),app_v:cf.a||"",platform_id:1079,app_Im:Wd.a.isTWLocale()?"tw":"cn",lang:Wd.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:n.uniqueId,fileName:n.fileName,version:n.version,protocolVersion:n.protocolVersion,interactionMode:n.interactionMode};Object(Fd.a)(i,e,!0),t.logger.info("interaction upload to service"),Nd.a.json({url:Hd.IVSevice,params:i,success:function(){},failure:function(){}})}},{key:"getStoryLine",value:function(){var e=this,t=e.engine.iv_state;return e.logger.info("interaction request storyline"),new Promise((function(n,r){var i={qyid:qd.a.getFluid()||qd.a.getJsuid(),app_v:cf.a,platform_id:1079,app_Im:Wd.a.isTWLocale()?"tw":"cn",lang:Wd.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:t.uniqueId,fileName:t.fileName,version:t.version,protocolVersion:t.protocolVersion,language:""};Nd.a.json({url:Hd.IVStoryLine,timeout:3e3,params:i,success:function(t){t&&"A00000"===t.code?(e.logger.info("interaction request storyline successed"),n(t)):(e.logger.info("interaction request storyline code error"),r(t))},failure:function(){e.logger.info("interaction request storyline failed"),r()}})}))}},{key:"backToStoryLine",value:function(){var e=this,t=e.engine;e.getStoryLine().then((function(n){if(n&&n.graph){var r=n.graph.nodes;r.pop();var i=r.slice().reverse().find((function(e){return 1!==e.mark}));if(!i)return;var a={innerIV:!0};switch(a.tvid=i.tvid,a.blockid=i.id,a.playBlockId=i.playBlockId,a.startPlayTime=i.currentTime,i.type){case"VIDEO":a.switchType=5;break;case"BLOCK":default:a.switchType=2}e.sendAction({status:0,blockId:a.blockid,tvId:a.tvid,switch_type:a.switchType}),t.switchVideo(a)}}),(function(){}))}},{key:"updateParams",value:function(e){this.params=e}}]),e}(),lf=null;function ff(){return hf.apply(this,arguments)}function hf(){return(hf=I()(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.t.bind(null,703,7));case 2:return(t=e.sent["default"]).enc.u8array={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r[i]=a}return r},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>2]|=(255&e[i])<<24-i%4*8;return t.lib.WordArray.create(r,n)}},e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pf(){return(pf=I()(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lf){e.next=4;break}return e.next=3,ff();case 3:lf=e.sent;case 4:return r=function(){var e=lf.enc.Utf8.parse(n),r=lf.enc.u8array.parse(t);return lf.DES.decrypt(r.toString(lf.enc.Base64),e,{mode:lf.mode.ECB,padding:lf.pad.Pkcs7}).toString(lf.enc.Utf8)},e.abrupt("return",r());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _f(){return(_f=I()(E.a.mark((function e(t,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lf){e.next=4;break}return e.next=3,ff();case 3:lf=e.sent;case 4:return r=function(){var e=lf.enc.Utf8.parse(n);return lf.DES.encrypt(t,e,{mode:lf.mode.ECB,padding:lf.pad.Pkcs7}).toString()},e.abrupt("return",r());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vf={decryptByDES:function(e,t){return pf.apply(this,arguments)},encryptByDES:function(e,t){return _f.apply(this,arguments)}},gf="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==gf&&gf,yf="URLSearchParams"in gf,mf="Symbol"in gf&&"iterator"in Symbol,bf="FileReader"in gf&&"Blob"in gf&&function(){try{return new Blob,!0}catch(e){return!1}}(),kf="FormData"in gf,xf="ArrayBuffer"in gf;if(xf)var Tf=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Sf=ArrayBuffer.isView||function(e){return e&&Tf.indexOf(Object.prototype.toString.call(e))>-1};function Pf(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function wf(e){return"string"!=typeof e&&(e=String(e)),e}function If(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return mf&&(t[Symbol.iterator]=function(){return t}),t}function Af(e){this.map={},e instanceof Af?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Ef(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Df(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function qf(e){var t=new FileReader,n=Df(t);return t.readAsArrayBuffer(e),n}function Of(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Rf(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:bf&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:kf&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:yf&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():xf&&bf&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=Of(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):xf&&(ArrayBuffer.prototype.isPrototypeOf(e)||Sf(e))?this._bodyArrayBuffer=Of(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):yf&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},bf&&(this.blob=function(){var e=Ef(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Ef(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(qf)}),this.text=function(){var e,t,n,r=Ef(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Df(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},kf&&(this.formData=function(){return this.text().then(Mf)}),this.json=function(){return this.text().then(JSON.parse)},this}Af.prototype.append=function(e,t){e=Pf(e),t=wf(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Af.prototype["delete"]=function(e){delete this.map[Pf(e)]},Af.prototype.get=function(e){return e=Pf(e),this.has(e)?this.map[e]:null},Af.prototype.has=function(e){return this.map.hasOwnProperty(Pf(e))},Af.prototype.set=function(e,t){this.map[Pf(e)]=wf(t)},Af.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Af.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),If(e)},Af.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),If(e)},Af.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),If(e)},mf&&(Af.prototype[Symbol.iterator]=Af.prototype.entries);var Lf=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Cf(e,t){if(!(this instanceof Cf))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof Cf){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Af(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Af(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),Lf.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Mf(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function Nf(e,t){if(!(this instanceof Nf))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===undefined?"":""+t.statusText,this.headers=new Af(t.headers),this.url=t.url||"",this._initBody(e)}Cf.prototype.clone=function(){return new Cf(this,{body:this._bodyInit})},Rf.call(Cf.prototype),Rf.call(Nf.prototype),Nf.prototype.clone=function(){return new Nf(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Af(this.headers),url:this.url})},Nf.error=function(){var e=new Nf(null,{status:0,statusText:""});return e.type="error",e};var Bf=[301,302,303,307,308];Nf.redirect=function(e,t){if(-1===Bf.indexOf(t))throw new RangeError("Invalid status code");return new Nf(null,{status:t,headers:{location:e}})};var Ff=gf.DOMException;try{new Ff}catch(Cg){(Ff=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Ff.prototype.constructor=Ff}function Uf(e,t){return new Promise((function(n,r){var i=new Cf(e,t);if(i.signal&&i.signal.aborted)return r(new Ff("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Af,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;setTimeout((function(){n(new Nf(i,r))}),0)},a.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){r(new Ff("Aborted","AbortError"))}),0)},a.open(i.method,function(e){try{return""===e&&gf.location.href?gf.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(bf?a.responseType="blob":xf&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof Af?i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,wf(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",o)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)}))}Uf.polyfill=!0,gf.fetch||(gf.fetch=Uf,gf.Headers=Af,gf.Request=Cf,gf.Response=Nf);var jf=function(){function e(t,n){a()(this,e),this.logger=new Id.a("IVPackageManager[".concat(t.id,"]")),this.engine=t,this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null,this.init(n)}return s()(e,[{key:"getIndexFile",value:function(){return this.indexFileObject||{}}},{key:"init",value:function(e){var t=this;t.params=e,t._getZipScriptURL(e).then((function(n){n?t._parseZip(n):t._retry(e)}))}},{key:"_parseZip",value:function(e){var t=this;t.logger.info("interaction zipUrl ".concat(e)),n.e(5).then(n.t.bind(null,702,7)).then((function(n){var r=n["default"],i=function(e){e&&(e.file(/^(?!__MACOSX).*index.*json$/)[0].async("uint8array").then(t._parseIndexFile.bind(t)),t.paraFileList=e.file(/^((?!__MACOSX).*Para.json)*$/))};t._downloadZIP(e).then(r.loadAsync,(function(){t._downloadZIP(e).then(r.loadAsync,(function(){t.engine.isInteractVideo=!1,t.engine.load(t.params)})).then(i)})).then(i)}))}},{key:"_retry",value:function(e){var t=this;t._getZipScriptURL(e).then((function(n){n?t._parseZip(n):(t.engine.isInteractVideo=!1,t.engine.load(e))}))}},{key:"_parseIndexFile",value:function(e){var t=this;t.__parseFile(e).then((function(e){t.logger.info("interaction parseFile ok}"),t.indexFileObject=e,t.indexFileObject&&t.indexFileObject.globle&&t.indexFileObject.globle.varList&&(t.globleVarList=t.indexFileObject.globle.varList),t.indexFileObject&&t.engine.emit(k.a.NTF_IVPACKAGEPARSE_Finished,t.indexFileObject)}))}},{key:"__parseFile",value:function(e){var t=this.engine;return new Promise((function(n){try{vf.decryptByDES(e,"$X&#ADvF").then((function(e){n(JSON.parse(e))}))}catch(r){t.emit(k.a.NTF_IVPACKAGEPARSE_Failed,r)}}))}},{key:"parseParaFile",value:function(e){var t=this;return t.logger.info("interaction parse ParaFile"),new Promise((function(n){t.paraFileList.find((function(t){return t.name.indexOf(e)>0})).async("uint8array").then(t.__parseFile.bind(t)).then((function(e){n(e)}))}))}},{key:"_getZipScriptURL",value:function(e){var t=this,n={uniqueId:e.tvid,protocolVersion:"1.5",app_v:cf.a,platform_id:1079,lang:Wd.a.isTWLocale()?"zh_TW":"zh_CN",src:"pcw",qyid:qd.a.getFluid()||qd.a.getJsuid()};return t.logger.info("interaction getzipUrl ".concat(Hd.IVZip)),new Promise((function(e){Nd.a.json({url:Hd.IVZip,timeout:3e3,withCredentials:!0,params:n,success:function(n){if(n&&"A00000"===n.code)if(n.interactInfo&&n.interactInfo.operationVideoInfo&&n.interactInfo.operationVideoInfo.scriptUrl){var r=n.interactInfo.operationVideoInfo.scriptUrl;t.logger.info("interaction getzipUrl  ok ".concat(r)),e(r.replace("http:",window.location.protocol))}else t.logger.info("interaction getzipUrl fail, data error"),e(null);else t.logger.info("interaction getzipUrl  fail, code error"),e(null)},failure:function(){t.logger.info("interaction getzipUrl  fail, code error"),e(null)}})}))}},{key:"_downloadZIP",value:function(e){return fetch(e).then((function(e){return e.arrayBuffer()}))}},{key:"reset",value:function(){this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null}}]),e}();function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wf={1:"303",2:"302",6:"304",11:"405",12:"401",13:"401",21:"302"},zf=function(){function e(t){a()(this,e),this._timer=0,this._core=t,this._sentWaitingBeacon=!1,this._lastFireData={},this._isfan="",this._outerParams={},this._vvfrom=t.params.vvfrom,this.__endpingback=undefined,this.__pingbackList={start:0,vvauto:undefined}}return s()(e,[{key:"sendADStartPlayPingback",value:function(){this.__endpingback=undefined,this._send({t:15,pt:""},!0)}},{key:"sendStartPlayPingback",value:function(){var e=this._core,t=e.getMovieInfo(),n={t:1};this.__endpingback=undefined,!self.sendFirstVVAbtest&&e.firstVV&&"history"===t.playStartFrom&&(n.abtest="history",self.sendFirstVVAbtest=!0),this._send(n),-1===this._timer&&this.sendTimingPingback()}},{key:"sendTimingPingback",value:function(){this._timer=0;var e=this,t=0;clearTimeout(this._timer);var n=!0;!function r(){e._core.hasStatus(k.a.Status_Playing)&&((t+=1e3)%15e3==0&&n?(n=!1,e._send({t:2,tm:15e3})):t%3e4==0&&e._send({t:2,tm:3e4}));if(t%6e4==0&&e._core.getCurrStatus()===k.a.Status_Playing){var i=Bd.a.isLogin()?"QP008":"QP007",a=Pd.a.get(i);a=""===a?0:parseInt(a,10),a+=60,Pd.a.set(i,a,{expires:31536e6,path:"/",domain:"iqiyi.com"})}clearTimeout(e._timer),e._timer=setTimeout(r,1e3)}()}},{key:"sendEndPlayPingback",value:function(e,t){if(this.__endpingback===undefined){this.__endpingback=!0;var n,r=this._core.getMovieInfo(),i=this._core.playproxy._playingSpend||0,a=this._core.params,o=51===(r.vd||"")?59:r.vd||"";switch(t=t||r.tvid,e){case 1:n=4;break;case 2:n=6;break;case 3:n=7;break;case 4:n=11;break;case 5:n=9;break;default:n=0}var s={t:13,tm:i,endtp:n};this._lastFireData.t?Object(Fd.a)(s,this._lastFireData):(Object(Fd.a)(s,{r:t,ra:o,vfrmtp:!0===a.autoplay?1:0}),a.vvauto&&(s.vvauto=!0===a.autoplay?4:2),Object(Fd.a)(s,this._outerParams,!0),a.vvauto||delete s.vvauto,Object(Fd.a)(s,this._outerParams,!0),a.vvauto||delete s.vvauto),this._send(s,!0)}}},{key:"sendWaitingPingback",value:function(e){var t=this._core.getCDNInfo().host;e?(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"ad",stu_sc:1,isquit:0,cdnadr:t})),this.sendErrorPlayPingback("","4016"),this.sendErrorPlayPingback("","KIWI-4016")):(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"video",stu_sc:1,isquit:0,cdnadr:t})),this.sendErrorPlayPingback("","4015"),this.sendErrorPlayPingback("","KIWI-4015"))}},{key:"sendAutoUpToVDPingback",value:function(e,t){this._send({t:12,fa:5,ra:t,upto:e},!0)}},{key:"sendAutoDwnToVDPingback",value:function(e,t){this._send({t:12,fa:4,ra:t,dwnto:e},!0)}},{key:"sendPlayingPingback",value:function(){this._sentWaitingBeacon&&(this._sentWaitingBeacon=!1)}},{key:"sendErrorPlayPingback",value:function(e,t,n){var r=t||Wf[e];this._send({t:0,ec:r,psrc:n||""})}},{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.logger,a=r.pingbackQOS,o=n._getParams(e);Cl.getPingbackDfp(e).then((function(s){r.getVideoInfo((function(c){Bd.a.isVip((function(u){Object(Fd.a)(o,{rn:Math.random(),dfp:s,stime:(new Date).getTime(),r:c.tvid||"",hu:u?1:-1}),Object(Fd.a)(o,e,t),n._lastFireData=o;var d=Hd.pingbackV6Url;0==e.t&&(d=Hd.pingbackQosUrl),Nd.a.beacon(o,d),r.params.sourcePage&&(1==e.t?(i.info("send pingback, t=1, vvauto=".concat(o.vvauto,",  pms=").concat(JSON.stringify(o))),n.__pingbackList.start++,n.__pingbackList.vvauto=o.vvauto):13==e.t&&(i.info("send pingback, t=13, vvauto=".concat(o.vvauto,",  pms=").concat(JSON.stringify(o))),(0==n.__pingbackList.start||4==n.__pingbackList.vvauto&&4!==o.vvauto)&&(i.info("send pingback, t=1|13, checkerror"),a.sendLogToCompass("pingback")),n.__pingbackList={start:0,vvauto:undefined}))}))}))}))}},{key:"_getParams",value:function(e){var t=this,n=this._core,r=n.getMovieInfo(),i=n.getCurrLoaderMode(),a=-1,o=51===(r.vd||"")?59:r.vd||"";switch(i){case"CDN":a=0;break;case"P2P":a=1}var s=t.getLrfrPs234(),c=Hf(Hf({u:qd.a.getFluid()||"",pu:Bd.a.getUid()||"",p1:Cl.p_code,v:n.playerVersion,ce:qd.a.getWeid(),de:qd.a.getQtsid()||"",c1:r.cid||"",ve:qd.a.getEid(),ht:r.isVIP?1:0,pt:Math.floor(1e3*n.getCurrenttime()),isdm:0,duby:0,ra:o,clt:""},s),{},{br:Ad.a.browser.userAgent,mod:Wd.a.local()||"",purl:window.location.href,tmplt:n.getPageTmpltType(),ptid:Ad.a.getPtid(Wd.a.isTWLocale()),os:Cl.os,nu:qd.a.getIsNewUser()?1:0,vfm:Pd.a.get("QP005")||"",coop:"",ispre:n.isTryWatch()?1:0,videotp:"undefined"!=typeof r.is3D?r.is3D:"",drm:Cl.getDrmType(r),plyrv:"",rfr:window.document.referrer,fatherid:r.albumId||"",stauto:n.autoVdUsing?1:0,algot:n.autoVdAlgot,vvfrom:t._vvfrom||"",vfrmtp:!0===n.params.autoplay?1:0,pagev:n.params.pagev||"",engt:2,ldt:a,krv:n.kernelVersion||"0.0.0",wtmk:r.watermark||0,duration:1e3*n.getDuration(),bkt:t._outerParams.bkt||n.params.bkt,e:t._outerParams.e||n.params.e,stype:t._outerParams.stype||n.params.stype,r_area:t._outerParams.r_area||n.params.r_area,r_source:t._outerParams.r_source||n.params.r_source});n.picInPic?c.s4="80720_playerctrl_picinpic":c.s4=n.params.vfrmrst||"",n.params.abtest&&(c.abtest=n.params.abtest),n.params.vvauto&&(c.vvauto=!0===n.params.autoplay?4:2,t._outerParams&&t._outerParams.vvauto&&(c.vvauto=t._outerParams.vvauto)),e&&e.t&&(Object(Fd.a)(c,{s3:n.params.vfrmblk||""}),2==e.t&&Object(Fd.a)(c,{vbr:t.getVBR()}),!n.ivosRuning||1!=e.t&&2!=e.t&&13!=e.t&&15!=e.t&&8!=e.t||(c.aid=r.albumId,c.r=r.tvid,c.biz=n.currentBlockid,c.s3="006191_ivos_videoshow"));var u,d,l=n.getCurrManifestType();if(null!==l&&-1!==l&&Object(Fd.a)(c,{mft:l}),null!==l&&-1!==l){switch(l){case 0:u=2;break;case 1:u=7;break;case 2:u=0;break;case 3:u=5;break;case 5:u=110;break;case 6:u=101}Object(Fd.a)(c,{ra1:u})}var f=n.params.vfrm||"";n.isFullScreen?(f="901111_pcwh5_browerfull",d=4):n.isWebFullScreen?(f="901111_pcwh5_pagefull",d=7):d=n.isSmallWindowMode||n.picInPic?2:3,Object(Fd.a)(c,{wint:d,s2:f});var h=0,p=0,_=-1;if(navigator.connection){var v=navigator.connection.downlink,g=(navigator.connection.effectiveType||"").toLowerCase(),y=(navigator.connection.type||"").toLowerCase();switch(g){case"4g":p=18;break;case"3g":p=17;break;case"2g":p=16;break;case"slow-2g":p=14}switch(y){case"cellular":p=15;break;case"wifi":p=1;break;case"ethernet":p=13;break;case"bluetooth":p=21;break;case"wimax":p=22}var m=n.getDataBufferInfo();m&&(_=m.len),h=v,Object(Fd.a)(c,{bw:h,ntwk:p,dl:_})}return"{}"==JSON.stringify(t._outerParams)||n.ivosRuning||Object(Fd.a)(c,t._outerParams,!0),n.isInteractVideo&&"0"==n.interactionMode&&!n.isIVMain&&(c.iamvid=n.iv_state&&n.iv_state.uniqueId||""),c}},{key:"getVBR",value:function(){var e=this._core,t=e.getDuration(),n=0;if(e.movieinfo&&0!==t&&!e.isAd()){var r=e.movieinfo.getVDInfo().vsize;n=parseInt(r/t)}return n}},{key:"setPlayPingbackInfo",value:function(e){var t={},n=this._core;e.vfrm&&(t.s2=e.vfrm),e.vfrmblk&&(t.s3=e.vfrmblk),e.vfrmrst&&(t.s4=e.vfrmrst),e.vfrmtp&&(t.vfrmtp=e.vfrmtp),n.params.vvauto&&(t.vvauto=e.vvauto),delete e.vvauto,delete e.vfrm,delete e.vfrmblk,delete e.vfrmrst,delete e.vfrmtp,t=Object(Fd.a)(t,e,!0),this._outerParams=Object(Fd.a)(this._outerParams,t,!0)}},{key:"destory",value:function(){clearTimeout(this._timer),this._timer=-1}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}},{key:"getLrfrPs234",value:function(){var e=Pd.a.get("QC007")||"",t=JSON.parse(localStorage.getItem("QC007_ps234")||"{}");return this.__ps234=this.__ps234||{lrfr:e,ps2:t.ps2||"",ps3:t.ps3||"",ps4:t.ps4||""}}}]),e}(),Yf=n(278),Gf="",Qf=document.hidden,Kf=new Id.a("PingbackQOS");document.addEventListener("visibilitychange",(function(){Kf.log("visibilitychange: ".concat(document.hidden))}));var $f=function(){function e(t){a()(this,e),this._core=t,Gf=t.playerVersion,this._vvfrom=t.params.vvfrom}var t;return s()(e,[{key:"sendVrsRequestPingback",value:function(){this._send({t:"init"})}},{key:"sendVrsReadyPingback",value:function(){this._send({t:"ready"})}},{key:"sendFinishPresPingback",value:function(){this._send({t:11})}},{key:"sendPlayTimeRecord",value:function(){var e=this._core.sptr,t=e.plyastm,n=e.plyUsedTime;if(!(n<0)&&/\/(v|w)_/.test(window.location.href)){this._send({t:10,psdklstm:0,psdkletm:e.psdkletm-e.psdklstm,psdkistm:e.psdkistm-t,psdkietm:e.psdkietm-t,vcistm:e.vcistm-t,vcietm:e.vcietm-t,asdklstm:e.asdklstm-t,asdkletm:e.asdkletm-t,asdkistm:e.asdkistm-t,asdkietm:e.asdkietm-t,adirqstm:e.adirqstm-t,adirqetm:e.adirqetm-t,adsrqstm:e.adsrqstm-t,adsrqetm:e.adsrqetm-t,adlstm:e.adlstm-t,adletm:e.adletm-t,adastm:e.adastm-t,adaetm:e.adaetm-t,plyastm:e.plyastm-t,plyaetm:e.plyaetm-t,ffstm:e.ffstm-t,ffetm:e.ffetm-t,vclstm:e.vclstm-t,vcletm:e.vcletm-t});var r=Math.random();if(.4<r&&r<.5){var i="TIMING_START_PLAY_".concat(Qf);n>1e4&&n<2e4?this.sendLogToCompass("".concat(i,"_10_20")):n>=2e4&&this.sendLogToCompass("".concat(i,"_20"))}}}},{key:"sendSeekBenchmark",value:function(){var e=this._core,t=e.sbtr;0===t.diy_apc||null===t.diy_apstm||t.diy_muxtm>=t.diy_setm||this._send({t:9,ct:"pcwseektc",diy_ismob:Dd.a.query("__pmobius__")?1:0,diy_manifesttp:e.getCurrManifestType(),diy_sstm:t.diy_sstm,diy_setm:t.diy_setm,diy_vsitm:t.diy_vsitm,diy_vsdtm:t.diy_vsdtm,diy_vptm:t.diy_vptm,diy_lstm:t.diy_lstm,diy_frdtm:t.diy_frdtm,diy_rdc:t.diy_rdc,diy_rdtm:t.diy_rdtm||0,diy_muxc:t.diy_muxc||0,diy_muxstm:t.diy_muxstm||0,diy_muxtm:t.diy_muxtm||0,diy_apc:t.diy_apc,diy_apstm:t.diy_apstm,diy_aptm:t.diy_aptm||0,diy_fdlc:t.diy_fdlc,diy_fdlt:t.diy_fdlt})}},{key:"sendQOSReport",value:function(e){var t={t:11};switch(Object(Fd.a)(t,e.para),e.type){case"chunkCheck":t.ct="vcut";break;case"DNSParser":t.ct="dlscherr";break;case"BWReport":t.ct="dlbw"}this._send(t)}},{key:"sendStuckdetl",value:function(e,t,n){var r=+new Date-t,i=n?"ad":"video";this._send({t:11,ct:"stuckdetl",jampt:i,isquit:e,replayt:r})}},{key:"_send",value:function(e){var t=this._core,n=t.getMovieInfo(),r=51===(n.vd||"")?59:n.vd||"",i={u:qd.a.getFluid()||"",pu:Bd.a.getUid()||"",p1:Cl.p_code,v:Gf,ce:qd.a.getWeid(),c1:n.cid||"",r:n.tvid||"",ve:qd.a.getEid(),de:qd.a.getQtsid()||"",ht:n.isVIP?1:0,pt:t.getCurrenttime(),isdm:0,ra:r,mod:Wd.a.local()||"",purl:window.location.href,tmplt:t.getPageTmpltType(),ptid:Ad.a.getPtid(Wd.a.isTWLocale()),os:Cl.os,re:window.screen.width+"x"+window.screen.height,nu:qd.a.getIsNewUser()?1:0,vfm:Pd.a.get("QP005")||"",ispre:t.isTryWatch()?1:0,videotp:"undefined"!=typeof n.is3D?n.is3D:"",drm:Cl.getDrmType(n),plyrv:"",rfr:window.document.referrer,fatherid:n.albumId||"",stauto:t.autoVdUsing?1:0,vvfrom:this._vvfrom||"",wtmk:n.watermark||0,algot:t.autoVdAlgot,br:Ad.a.browser.userAgent,krv:t.kernelVersion||"0.0.0",duby:0},a=t.getCurrManifestType();null!==a&&(-1==a&&Math.random()<.1&&this.sendLogToCompass("mft1"),Object(Fd.a)(i,{mft:a}));var o=-1;switch(t.getCurrLoaderMode()){case"CDN":o=0;break;case"P2P":o=1}var s,c=0,u=0,d=-1;if(navigator.connection){var l=navigator.connection.downlink,f=(navigator.connection.effectiveType||"").toLowerCase(),h=(navigator.connection.type||"").toLowerCase();switch(f){case"4g":u=18;break;case"3g":u=17;break;case"2g":u=16;break;case"slow-2g":u=14}switch(h){case"cellular":u=15;break;case"wifi":u=1;break;case"ethernet":u=13;break;case"bluetooth":u=21;break;case"wimax":u=22}var p=t.getDataBufferInfo();p&&(d=p.len),c=l,Object(Fd.a)(i,{bw:c,ntwk:u,dl:d,ldt:o})}Object(Fd.a)(e,i),s=e,Cl.getPingbackDfp(s).then((function(e){Bd.a.isVip((function(t){var n={rn:Math.random(),dfp:e,stime:(new Date).getTime(),hu:t?1:-1};Object(Fd.a)(n,s),Nd.a.beacon(n,Hd.pingbackQosUrl)}))}))}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}},{key:"sendLogToCompass",value:(t=I()(E.a.mark((function n(e){var t,r,i,a,o,s;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=this._core,r=t.getManifestTypes(),i=t.getCurrManifestType(),a="OTHER"+i,o=(e||"").replace(/-/gi,"_"),n.t0=i,n.next=n.t0===r.HLS?8:n.t0===r.F4V||n.t0===r.FLV?10:n.t0===r.DASH_VP9?12:n.t0===r.DASH_AV1?14:n.t0===r.JDASH?16:18;break;case 8:return a="HLS",n.abrupt("break",18);case 10:return a="F4V",n.abrupt("break",18);case 12:return a="VP9",n.abrupt("break",18);case 14:return a="AV1",n.abrupt("break",18);case 16:return a="JDASH",n.abrupt("break",18);case 18:(s=[]).push(Cl.browserName()),s.push(Wd.a.isTWLocale()?"TW":"CN"),s.push(a),s.push(o),s.push((Gf||"").replace(/\./gi,"")),s.push(Od.a.getEventId(t.getMovieInfo().tvid)),Object(Yf.a)(s.join("_"));case 26:case"end":return n.stop()}}),n,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Zf=function Wg(e){a()(this,Wg);var t=+new Date;this.psdklstm=e.pgct||t,this.psdkletm=t,this.psdkistm=t,this.psdkietm=t,this.vcistm=0,this.vcietm=0,this.ffstm=0,this.ffetm=0,this.vclstm=0,this.vcletm=0,this.asdklstm=t,this.asdkletm=t,this.asdkistm=0,this.asdkietm=0,this.adirqstm=0,this.adirqetm=0,this.adsrqstm=0,this.adsrqetm=0,this.adlstm=0,this.adletm=0,this.adastm=t,this.adaetm=0,this.plyastm=t,this.plyaetm=0,this.adUsedTime=0,this.plyUsedTime=0},Xf=0,Jf=1,eh=2,th=function(){return performance.now()},nh=function(){function e(){a()(this,e),this.status=Xf,this.benchmark=null,this._initData()}return s()(e,[{key:"cost",get:function(){return this.diy_setm||0}},{key:"_initData",value:function(){this.loaderStat={count:0,timeCost:0,lastPumpTime:null},this.muxStat={count:0,timeCost:0,lastSpitTime:null,lastPushTime:null},this.mediaStat={count:0,timeCost:0,lastAppendTime:null},this.authStat={count:0,timeCost:0,lastTime:null},this.diy_sstm=0,this.diy_setm=null,this.diy_vsitm=null,this.diy_vsdtm=null,this.diy_vptm=null,this.diy_lstm=null,this.diy_frdtm=null,this.diy_rdc=null,this.diy_rdtm=null,this.diy_muxc=null,this.diy_muxstm=null,this.diy_muxtm=null,this.diy_apc=null,this.diy_apstm=null,this.diy_aptm=null,this.diy_fdlc=0,this.diy_fdlt=0}},{key:"_update",value:function(e,t){this.status===Jf&&Object.prototype.hasOwnProperty.call(this,e)&&null!==this.benchmark&&(this[e]=null==t?Math.round(th()-this.benchmark):t)}},{key:"start",value:function(){this.status=Jf,this.benchmark=th(),this._initData()}},{key:"end",value:function(){this._update("diy_setm"),this.status=eh}},{key:"isSeekingStatus",value:function(){return this.status===Jf}},{key:"mediaSeeking",value:function(){this._update("diy_vsitm")}},{key:"mediaSeeked",value:function(){this._update("diy_vsdtm")}},{key:"mediaPlaying",value:function(){null==this.diy_vsdtm&&this._update("diy_vsdtm"),this._update("diy_vptm")}},{key:"seekLoader",value:function(){this._update("diy_lstm")}},{key:"pumpLoader",value:function(e){var t=this.loaderStat;e?(null===this.diy_frdtm&&this._update("diy_frdtm"),t.lastPumpTime&&(t.timeCost+=Math.round(th()-t.lastPumpTime)),t.lastPumpTime=null):t.lastPumpTime||(t.lastPumpTime=th()),t.count++,t.count>0&&this._update("diy_rdc",t.count),t.timeCost>0&&this._update("diy_rdtm",t.timeCost)}},{key:"muxSwallow",value:function(){var e=this.muxStat;e.count++,e.lastPushTime=th(),e.lastSpitTime=null}},{key:"muxspit",value:function(){var e=this.muxStat,t=th();null===e.lastSpitTime?e.timeCost+=Math.round(t-e.lastPushTime):e.timeCost+=Math.round(t-e.lastSpitTime),null===this.diy_muxstm&&this._update("diy_muxstm"),e.count>0&&this._update("diy_muxc",e.count),e.timeCost>0&&this._update("diy_muxtm",e.timeCost),e.lastSpitTime=t}},{key:"sbAppending",value:function(){this.mediaStat.lastAppendTime=th()}},{key:"sbAppended",value:function(){var e=this.mediaStat;e.count++,null!==e.lastAppendTime&&(e.timeCost+=Math.round(th()-e.lastAppendTime)),null===this.diy_apstm&&this._update("diy_apstm"),e.count>0&&this._update("diy_apc",e.count),e.timeCost>0&&this._update("diy_aptm",e.timeCost)}},{key:"authkeyInvoking",value:function(){this.authStat.lastTime=th()}},{key:"authkeyInvoked",value:function(){var e=this.authStat;null!==e.lastTime&&(e.count++,e.timeCost+=Math.round(th()-e.lastTime),this._update("diy_fdlc",e.count),this._update("diy_fdlt",e.timeCost))}}]),e}();function rh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ih=function(e){return parseInt(e,10)},ah=function(e){l()(n,e);var t=rh(n);function n(e){var r;return a()(this,n),(r=t.call(this)).logger=new Id.a("EpisodeManager[".concat(e,"]")),r.EpisodeStore={},r}return s()(n,[{key:"_ensureDataStructure",value:function(e){var t=this.EpisodeStore[e]||{};$d.a.isObject(t.pres)?(t.pres.finish=!!t.pres.finish,t.pres.queue=$d.a.isArray(t.pres.queue)?t.pres.queue:[]):t.pres={finish:!1,queue:[]},$d.a.isObject(t.mids)?(t.mids.finish=!!t.mids.finish,t.mids.queue=$d.a.isArray(t.mids.queue)?t.mids.queue:[]):t.mids={finish:!1,queue:[]},$d.a.isObject(t.briefs)?(t.briefs.finish=!!t.briefs.finish,t.briefs.queue=$d.a.isArray(t.briefs.queue)?t.briefs.queue:[]):t.briefs={finish:!1,queue:[]},$d.a.isObject(t.features)?(t.features.finish=!!t.features.finish,t.features.queue=$d.a.isArray(t.features.queue)?t.features.queue:[]):t.features={finish:!1,queue:[]},this.EpisodeStore[e]=t}},{key:"clear",value:function(e){e=ih(e),delete this.EpisodeStore[e]}},{key:"clearAll",value:function(){this.EpisodeStore={}}},{key:"_getQueue",value:function(e,t){var n=[];return e=ih(e),this.valid(e)&&(n=this.EpisodeStore[e][t].queue),n}},{key:"getPres",value:function(e){return this._getQueue(e,"pres")}},{key:"getMids",value:function(e){return this._getQueue(e,"mids")}},{key:"getBriefs",value:function(e){return this._getQueue(e,"briefs")}},{key:"addPres",value:function(e,t){e=ih(e),this.valid(e)&&$d.a.isArray(t)&&(this.EpisodeStore[e].pres.queue=this.EpisodeStore[e].pres.queue.concat(t))}},{key:"finishPres",value:function(e,t){if(e=ih(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].pres.finish;var n=this.EpisodeStore[e].pres;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddPres",{videoId:e,length:n.queue.length}),this.logger.info("finishPres "+e))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishPres invalid "+e)}}},{key:"addMids",value:function(e,t){e=ih(e),this.valid(e)&&$d.a.isArray(t)&&(this.EpisodeStore[e].mids.queue=this.EpisodeStore[e].mids.queue.concat(t))}},{key:"finishMids",value:function(e,t){if(e=ih(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].mids.finish;var n=this.EpisodeStore[e].mids;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddMids",{videoId:e,length:n.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishMids invalid "+e)}}},{key:"addBriefs",value:function(e,t){e=ih(e),this.valid(e)&&$d.a.isArray(t)&&(this.EpisodeStore[e].briefs.queue=this.EpisodeStore[e].briefs.queue.concat(t))}},{key:"finishBriefs",value:function(e,t){if(e=ih(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].briefs.finish;var n=this.EpisodeStore[e].briefs;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddBriefs",{videoId:e,length:n.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishBriefs invalid, "+e)}}},{key:"finishFeatures",value:function(e,t){if(e=ih(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].features.finish;this.EpisodeStore[e].features.finish=t}}},{key:"setInfo",value:function(e,t){e=ih(e),this.valid(e)&&(this.EpisodeStore[e].movieInfo=t)}},{key:"getInfo",value:function(e){var t;return this.valid(e)&&this.EpisodeStore[e]&&(t=this.EpisodeStore[e].movieInfo),t}},{key:"setDefinitionAd",value:function(e,t){e=ih(e),this.valid(e)&&(this.EpisodeStore[e].definitionAdInfo=t)}},{key:"valid",value:function(e,t){if(e=ih(e),"boolean"!=typeof t)return this.EpisodeStore[e]&&!0===this.EpisodeStore[e].valid?(this._ensureDataStructure(e),t=!0):t=!1,t;this._ensureDataStructure(e),this.EpisodeStore[e].valid=t}},{key:"destroy",value:function(){this.EpisodeStore={},this.removeAllListeners("finishAddPres"),this.removeAllListeners("finishAddMids"),this.removeAllListeners("finishAddBriefs")}}]),n}(v.a);function oh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var sh=function(e){l()(n,e);var t=oh(n);function n(e,r){var i;a()(this,n),(i=t.call(this)).pack=r,i.params=e,i.eventlog={vrsready:!1},i.adWholeCorner=!1,i.id=e.parentId,i.ppt=e.ppt||"0",i.local=e.local||"cn_s",i.cyclePlay=!!e.cyclePlay,i.ost=i.getOst(e.ost,e.bd),i.isEnjoy="enjoy"==e.playerType,i.playbackrate=e.playrate,i.playratelist=e.playratelist,i.poster=e.poster;var o=e.skinType||"";i.isMini=!!o,i.isBanner=o.indexOf("banner")>-1,i.isSimple="simple"==o||i.isBanner,i.boss=e.boss||!1,i.playerVersion=cf.a||e.playerVersion,i.spt=e.transmissionOption&&e.transmissionOption.spt?e.transmissionOption.spt:"","false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay?i.autoplay=!1:i.autoplay=!0,i.isInteractVideo=!(1!=Number(e.isEnabledInteraction)||1!=Number(e.interactionType)&&0!=Number(e.interactionType)||Ad.a.browser.EDGE||Wd.a.isTWLocale()),e.isRecordProgress||!1!==e.isRecordProgress&&"false"!==e.isRecordProgress?i.isRecordProgress=!0:i.isRecordProgress=!1,i.interactionMode=e.interactionType,i.isIVMain=i.isInteractVideo,i.iv_state={},i.isInteracting=!1,i.adPlaySource=null,i.ivosRuning=!1,i.ivosBoxRuning=!1,i.emptionType=0,Cd.a.setEngine(u()(i)),i.sptr=new Zf(e),i.sbtr=new nh,i.pingbackV6=new zf(u()(i)),i.pingbackQOS=new $f(u()(i)),i.movieinfo=new rf(u()(i)),i.i18n=Wd.a,i.user=Bd.a,i.VI=Rd.a,i.picInPic=!1,i.isFullScreen=!1,i.isWebFullScreen=!1,i.isSmallWindowMode=e.isSmallWindowMode||!1,i.setMaxListeners(25),Wd.a.setLocale(i.local),e.ptid&&Ad.a.setPtid(e.ptid),Zd.a.closeBit(1,37),Wd.a.isTWLocale()?Zd.a.closeBit(4,46):(Zd.a.openBit(4,3),Zd.a.openBit(4,46)),i.firstLoadMovie=!0,i.firstVV=!0,i.logger=new Id.a("DataEngine[".concat(i.id,"]")),i.mutedstart=!1,i.isInstallClient=!1;var s=Dd.a.query("__bid__");return i.userSetBid=s?parseInt(s):0,i.isDisableHotkey=!!e.isDisableHotkey,i}return s()(n,[{key:"kernelVersion",get:function(){return this.playproxy.knlRevision}},{key:"p2pVersion",get:function(){return this.playproxy.kiwi.p2pVersion||""}},{key:"audioEnabled",get:function(){return Zd.a.hasBit(1,3)&&!(Ad.a.browser.FIREFOX||Ad.a.browser.EDGE)}},{key:"vd",get:function(){var e=Ed.a.read(Ed.a.PLAYER_VD_KEY)||2;if(e=parseInt(e,10),this.firstLoadMovie&&(this.firstLoadMovie=!1,Ad.a.browser.WECHAT&&(e=4),!this.playproxy._autoVdUsing||96!=e&&1!=e||(e=2,Ed.a.write(Ed.a.PLAYER_VD_KEY,e)),Bd.a.isLogin()&&Pd.a.get("QP0023")&&(e=4,this.playproxy._autoVdUsing=!1,Pd.a.set("QP0025","1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),Pd.a.remove("QP0023",{path:"/",domain:"iqiyi.com"}),Ed.a.write(Ed.a.PLAYER_VD_KEY,e)),this.userSetBid>0&&(e=x.a.getOldVd(this.userSetBid),Ed.a.write(Ed.a.PLAYER_VD_KEY,e))),96===e||1===e||2===e||Bd.a.isLogin()||Wd.a.isTWLocale()||(e=2,Ad.a.browser.WECHAT&&(e=4),Ed.a.write(Ed.a.PLAYER_VD_KEY,e)),"5938935125359500"==="".concat(this.params.tvid)&&(this.playproxy._autoVdUsing=!1,this.params.vd=4),this.params.vd!==undefined&&!Wd.a.isTWLocale())if(Bd.a.isLogin()){var t=Ed.a.read(Ed.a.PLAYER_VD_KEY)||this.params.vd,n=x.a.getNewVd(t);e=n>x.a.getNewVd(this.params.vd)?n:this.params.vd}else e=this.params.vd;return e},set:function(e){Ed.a.write(Ed.a.PLAYER_VD_KEY,e)}},{key:"autoVdValue",get:function(){return this.playproxy.autoVdValue}},{key:"autoVdEnabled",get:function(){var e=this.movieinfo,t=this.playproxy,n=e.getVDInfo(),r=undefined;return n&&(r=n.fileFormat),t.p2pEnabled(r)&&t._autoVdEnable}},{key:"autoVdUsing",get:function(){return this.playproxy._autoVdUsing&&this.autoVdEnabled}},{key:"autoVdAlgot",get:function(){var e="";if(this.autoVdUsing&&this.getCurrLoaderMode()===k.a.P2P_LOADERMODE){var t=this.playproxy.kiwi.episodeStream;t&&(e=t.loader.algot)}return e}},{key:"skip",get:function(){return"noskip"!==Pd.a.get("QC157",{memory:!0})},set:function(e){e?Pd.a.remove("QC157",{path:"/",domain:"iqiyi.com"}):Pd.a.set("QC157","noskip",{expires:31536e6,path:"/",domain:"iqiyi.com"})}},{key:"voice",get:function(){var e=Number(this.params.voice)||parseFloat(Ed.a.read("QiyiPlayerVoice"));return isNaN(e)&&(e=.6),Number(e)>1&&(e=1),e}},{key:"getOst",value:function(e,t){return e=1===parseInt(e,10)?1===parseInt(t)||"true"===t?1:2:0}},{key:"getMovieInfo",value:function(){return this.movieinfo.current}},{key:"init",value:function(e){var t=this;t.logger.log("DataEngine Init"),t._v=e,t.episode=new ah(t.id),t.isInteractVideo?t.initInteractVideo(t.params):t._initNormalVideo()}},{key:"initInteractVideo",value:function(e){var t=this;t._initPlayProxy(),t.pack.ad&&!t.adproxy&&(t.adproxy=new nf(t),t.adproxy.init()),t.IVRecorder?t.IVRecorder.updateParams(e):t.IVRecorder=new df(t,e),t.recorder||(t.recorder=new sf(t)),t.initInteractPackage(e)}},{key:"initInteractPackage",value:function(e){var t=this;t.IVPackageManager?(t.IVPackageManager.reset(),t.IVPackageManager.init(e)):t.IVPackageManager=new jf(t,e)}},{key:"_initPlayProxy",value:function(){var e=this;e.playproxy||(e.playproxy=new Wl(e),e.playproxy.init(e._v,e.params.channelID),e._initVolume())}},{key:"_initAdProxy",value:function(){var e=this;if(e.pack.ad&&!e.adproxy)e.adproxy=new nf(e),e.adproxy.init();else{var t=function(){};e.adproxy={clear:t,resize:t,getAdInfo:t}}}},{key:"_initVolume",value:function(){var e=this;e._tempvolume=e.voice,1==parseInt(this.params.isMute,10)||1==this.params.isMute||"true"==this.params.isMute||this.params.masflag?e.setVolume(0,!0):e.setVolume(e.voice)}},{key:"_initNormalVideo",value:function(){this.isMini||(this.recorder=new sf(this)),this.playproxy=new Wl(this),this._initAdProxy(),this.playproxy.init(this._v,this.params.channelID),this._initVolume(),this.load(this.params)}},{key:"load",value:function(e){this.playproxy.load(e)}},{key:"preload",value:function(e,t){this.playproxy.preload(e,t)}},{key:"checkPreload",value:function(){return this.playproxy.checkPreload()}},{key:"refresh",value:function(e){this.playproxy.refresh(e)}},{key:"getCurrentGas",value:function(){return this.playproxy.getCurrentGas()}},{key:"abort",value:function(){this.playproxy.pause(!1,!0),this.autoplay=!1}},{key:"abortAres",value:function(){this.playproxy.abortAres()}},{key:"abortAllAres",value:function(e){this.playproxy.abortAllAres(e)}},{key:"abortAllAresAndSeek",value:function(e,t){this.playproxy.abortAllAres(e,t)}},{key:"video",value:function(){return this.playproxy.video()}},{key:"play",value:function(e){this.playproxy.play(e)}},{key:"pause",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.playproxy.pause(e,t)}},{key:"isPaused",value:function(){return this.playproxy.isPaused()}},{key:"replay",value:function(){this.playproxy.replay()}},{key:"seek",value:function(e,t,n){this.playproxy.isPatch()||this.playproxy.seek(e,t,n)}},{key:"lockSeek",value:function(){this.playproxy.lockSeek()}},{key:"unlockSeek",value:function(){this.playproxy.unlockSeek()}},{key:"isSeeking",value:function(){return!!this.playproxy.hasSeeking}},{key:"switchDefinition",value:function(e,t){this.playproxy.switchDefinition(e,t)}},{key:"isSwitchingDefinition",value:function(){return this.playproxy._vdsSwitch}},{key:"switchAudioDefinition",value:function(e){this.movieinfo.currentLid!==e&&(this.emit(k.a.NTF_AudioSwitching,e),this.playproxy.switchAudioTrack(e))}},{key:"getBufferTime",value:function(){return this.playproxy.getBufferTime()}},{key:"getSrc",value:function(){return this.playproxy.getSrc()}},{key:"setMuted",value:function(e){var t=this.getVolume();this._tempvolume=t>0?t:this._tempvolume||.6,e?this.setVolume(0):this.setVolume(this._tempvolume)}},{key:"getMuted",value:function(){return 0===this.getVolume()}},{key:"getPlayingDuration",value:function(){return this.playproxy._playingDuration}},{key:"getSkipHeaderTime",value:function(){var e=this.playproxy._skipHT,t=parseInt(this.getDuration());return e>=t&&(e=t-1),e}},{key:"getSkipTailTime",value:function(){return this.playproxy._skipTT}},{key:"isSkipPrelude",value:function(e,t){var n=this.skip;if("boolean"!=typeof e)return n;n!=e&&(this.skip=e,!0!==t&&this.playproxy.setSkipPrelude(),this.emit(k.a.NTF_SKIP_PRELUDE,{flag:e}))}},{key:"setStartPlayTime",value:function(e,t){this.movieinfo.setStartPlayTime(e,t)}},{key:"getStartPlayTime",value:function(){return this.movieinfo.startPlayTime}},{key:"getEndPlayTime",value:function(){return this.movieinfo.endPlayTime}},{key:"getDuration",value:function(){return this.playproxy.getDuration()}},{key:"getVolume",value:function(){return this.playproxy.getVolume()}},{key:"setVolume",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.playproxy.setVolume(e),this.playproxy.video().muted=t}},{key:"getVipTypes",value:function(){return this.getMovieInfo().vipTypes}},{key:"getCurrentVD",value:function(){return this.playproxy.getCurrentVD()}},{key:"getPlayInfo",value:function(e){var t=this;t._getpcall=t._getpcall||[],t._getpcall.push(e);var n=t.getMovieInfo(),r=function(){var e={};e.tvid=n.tvid,e.vid=n.vid,e.cid=n.cid,e.albumId=n.albumId,e.duration=t.getDuration(),e.rate=t.getCurrentVD(),e.vidl=t.movieinfo.vidl,e.previewImageUrl=n.previewImageUrl,e.audl=n.audl;var r=t._getpcall.slice(0);t._getpcall=[];for(var i=0;i<r.length;i++)r[i]&&function(t){setTimeout((function(){t(e)}),0)}(r[i]);r=null};n.preparing?t.playproxy.on(k.a.NTF_VRSDone,r):r()}},{key:"getVideoInfo",value:function(e){this.playproxy.getVideoInfo(e)}},{key:"getVideoInfoByTvid",value:function(e,t){this.playproxy.getVideoInfoByTvid(e,t)}},{key:"getCurrStatus",value:function(){return this.playproxy.currStatus}},{key:"isAd",value:function(){return this.playproxy.isAd()}},{key:"isPatch",value:function(){return this.playproxy.isPatch()}},{key:"getCurrentAdInfo",value:function(){var e={};return this.isAd()&&(e=this.adproxy.getAdInfo()),e}},{key:"switchVideo",value:function(e){this.firstVV=!1,"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay||0==e.autoplay?this.autoplay=!1:"true"!==e.autoplay&&!0!==e.autoplay&&"1"!=e.autoplay&&1!=e.autoplay||(this.autoplay=!0),this.playproxy.switchVideo(e)}},{key:"isTryWatch",value:function(){return this.movieinfo.isTryWatch}},{key:"getPreviewType",value:function(){return parseInt(this.movieinfo.previewType||-1,10)}},{key:"getPreviewTime",value:function(){return this.movieinfo.previewTime||Infinity}},{key:"recharge",value:function(e,t,n){this.playproxy.noticeRecharge(e,t,n)}},{key:"hasStatus",value:function(e){return this.playproxy.hasStatus(e)}},{key:"getStatusPool",value:function(){return this.playproxy.getStatusPool()}},{key:"destroy",value:function(){this.episode.destroy(),this.adproxy.destroy(),this.playproxy.destory(),this.movieinfo.clear(),this.recorder.stopTimer(),this.pingbackV6.destory(),this.emit(k.a.Status_Destroy)}},{key:"getPlaybackRate",value:function(){return this.playproxy.getPlaybackRate()}},{key:"setPlaybackRate",value:function(e){this.playproxy.setPlaybackRate(e)}},{key:"getCurrenttime",value:function(){return this.playproxy.getCurrenttime()}},{key:"getEngineType",value:function(){return k.a.ENGINE_TYPE}},{key:"getPageTmpltType",value:function(){return this.params.pageTmpltType}},{key:"un",value:function(e,t){return this.off(e,t),this}},{key:"getVideoMuted",value:function(){return this.playproxy.video().muted}},{key:"resize",value:function(){this.adproxy.resize()}},{key:"jsNotifyAdManager",value:function(e){this.emit(k.a.NTF_AD_NotifyManager,e)}},{key:"notyfyADInfo",value:function(e){this.adproxy.sdk&&this.adproxy.sdk.emit(e.type,e.data)}},{key:"setEndPlay",value:function(e){this.playproxy.setEndPlay(e)}},{key:"getCurrManifestType",value:function(){return this.playproxy.kiwi.currentManifestType}},{key:"getManifestTypes",value:function(){return this.playproxy.getManifestTypes()}},{key:"getDownloadSpeed",value:function(){return this.playproxy?this.getCurrLoaderMode()===k.a.CDN_LOADERMODE?this.playproxy.kiwi.stats.downloadSpeed:this.playproxy.kiwi.stats.bandwidth:null}},{key:"getCDNInfo",value:function(){if(this.getCurrLoaderMode()===k.a.CDN_LOADERMODE){var e=this.playproxy.kiwi.stats;return{protocol:e.netProtocol||"",host:e.cdnHost||""}}var t=this.playproxy.kiwi.stats;return{protocol:t.netProtocol||"",host:t.cdnHost||""}}},{key:"startFireFPSEvent",value:function(){this.playproxy.kiwi.startReportFPS()}},{key:"stopFireFPSEvent",value:function(){this.playproxy.kiwi.stopReportFPS()}},{key:"getCurrLoaderMode",value:function(){return this.playproxy.kiwi.currentLoaderMode}},{key:"getDataBufferInfo",value:function(){return this.playproxy.kiwi.dataBufferInfo}},{key:"setPlayPingbackInfo",value:function(e){this.pingbackV6&&this.pingbackV6.setPlayPingbackInfo(e)}},{key:"setDelayPlayInfo",value:function(e){this.playproxy.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.playproxy.clearDelayPlayInfo(e)}},{key:"getBufferInfo",value:function(){return this.playproxy.kiwi.bufferInfo}},{key:"getMP4URLByTvid",value:function(e,t){this.playproxy.getMP4URLByTvid(e,t)}},{key:"getCorrectTimeObj",value:function(){var e,t,n=this.getDuration(),r=this.getCurrenttime(),i=!1,a="",o=this.getCurrentAdInfo();o.isFusionMode&&o.seekable?(t=n+this.movieinfo.current.duration,e=r+o.offset,i=!0,a=o.rollType):(e=r,t=n);return{current:r,cduration:n,acurrent:e,aduration:t,isFusionMode:i,rollType:a}}},{key:"isFusionMode",value:function(){var e=this.getCurrentAdInfo();return e&&e.isFusionMode}}]),n}(v.a),ch=function(){function e(){a()(this,e)}return s()(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this}},{key:"once",value:function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this}},{key:"off",value:function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this}},{key:"listeners",value:function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]}},{key:"hasListeners",value:function(e){return!!this.listeners(e).length}}]),e}();ch.prototype.addEventListener=ch.prototype.on,ch.prototype.removeEventListener=ch.prototype.off;var uh=Object.prototype,dh=function(e){var t=uh.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},lh=function(e){return B()(e)},fh=function(e,t){return uh.hasOwnProperty.call(e,t)},hh=function(e){return e==Infinity||e==-Infinity},ph=function(e){return!isNaN(e)&&"number"==dh(e)},_h=function(e){return!(!ph(e)||hh(e))},vh=function(e){return!!_h(e)&&0==e%1},gh=function(e){if(e){var t=lh(e);return"object"==t||"function"==t}return!1},yh=function(e){return gh(e)&&"function"!=dh(e)},mh=function(e){return!(!e||"object"!=dh(e))&&(!e.nodeType&&!e.setInterval)},bh=function(e){return"string"==dh(e)},kh=function(e){if(!xh(e)&&yh(e)){var t=e.length;if(vh(t)&&t>=0)return!0}return!1},xh=function(e){return!(!e||e.window!=e)},Th={_class:dh,_type:lh,owns:fh,nan:function(e){return e!=e},bool:function(e){return"boolean"==dh(e)},infinite:hh,number:ph,iod:_h,decimal:function(e){return!!_h(e)&&0!=e%1},integer:vh,oof:gh,object:yh,hash:mh,plainObject:mh,undef:function(e){return"undefined"==lh(e)},fn:function(e){return"function"==dh(e)},string:bh,nos:function(e){return _h(e)||bh(e)},array:function(e){return"array"==dh(e)},arraylike:kh,window:xh,empty:function(e){if(bh(e)||kh(e))return 0===e.length;if(mh(e))for(var t in e)if(fh(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==dh(e)}},Sh=function(){var e={};e.is=Th,e.extend=e.assign=function(e){if(e){var n=t.call(arguments,1);i(n,(function(t){d(t,(function(t,n){Th.undef(t)||(e[n]=t)}))}))}return e};var t=[].slice;e.each=i,e.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},e.map=function(e,t){var n=[];return i(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.filter=function(e,t){var n=[];return i(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},e.identity=function(e){return e},e.compact=function(t){return e.filter(t,e.identity)},e.some=function(e,t){return-1!=a(e,t)},e.every=function(e,t){return-1==a(e,s(t))},e.reduce=u,e.sum=function(t){return e.reduce(t,(function(e,t){return e+t}),0)},e.findIndex=a,e.find=function(t,n){var r=e.findIndex(t,n);if(-1!=r)return t[r]},e.indexOf=c,e.includes=function(e,t){return-1!=c(e,t)},e.toArray=o,e.slice=function(e,t,n){var i=[],a=r(e);return a>=0&&(t=t||0,0!==n&&(n=n||a),Th.fn(e.slice)||(e=o(e)),i=e.slice(t,n)),i},e.negate=s,e.forIn=d,e.keys=function(e){var t=[];return d(e,(function(e,n){t.push(n)})),t},e.values=function(e){var t=[];return d(e,(function(e,n){t.push(e)})),t};var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function r(e){if(null!=e)return e.length}function i(e,t){var n=r(e);if(n&&Th.fn(t))for(var i=0;i<n&&!1!==t(e[i],i,e);i++);return e}function a(e,t){var n=-1;return i(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function o(e){var t=[];return i(e,(function(e){t.push(e)})),t}function s(e){return function(){return!e.apply(this,arguments)}}function c(e,t){return Th.string(e)?e.indexOf(t):a(e,(function(e){return t===e}))}function u(e,t,n){return i(e,(function(r,i){n=t(n,r,i,e)})),n}function d(e,t){if(e)for(var n in e)if(Th.owns(e,n)&&!1===t(e[n],n,e))break;return e}function l(e){return e||0==e?e+"":""}e.trim=function(e){return null==e?"":(""+e).replace(n,"")},e.invert=function(e){var t={};return d(e,(function(e,n){t[e]=n})),t},e.lower=function(e){return l(e).toLowerCase()},e.upper=function(e){return l(e).toUpperCase()},e.first=function(e){if(e)return e[0]},e.startsWith=function(e,t){return 0==c(e,t)},e.tostr=l,e.get=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t)return t=t[e],!0})))return t},e.sumBy=function(t,n){var r=0;return e.each(t,(function(t){r+=e.get(t,n)||0})),r},e.has=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t&&Th.owns(t,e))return t=t[e],!0})))return!0;return!1},e.only=function(e,t){return e=e||{},Th.string(t)&&(t=t.split(/ +/)),u(t,(function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})},e.curry=function(t){var n=t.length;return function r(i){return function(){var a=i.concat(e.slice(arguments));return a.length>=n?(a.length=n,t.apply(this,a)):r(a)}}([])},e.mapObject=e.mapValues=function(e,t){var n={};return d(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.before=function(e,t){return function(){if(e>1)return e--,t.apply(this,arguments)}},e.once=function(t){return e.before(2,t)},e.len=r,e.last=function(t){var n=e.len(t);if(n)return t[n-1]},e.max=function(t,n){var r=-1,a=-Infinity;return n=n||e.identity,i(t,(function(e,t){(e=n(e))>a&&(a=e,r=t)})),r>-1?t[r]:a},e.split=function(e,t,n){return(e=l(e)).split(t,n)},e.size=function(t){var n=e.len(t);return null==n&&(n=e.keys(t).length),n},e.flatten=function(e){var t=[];return i(e,(function(e){Th.arraylike(e)?i(e,(function(e){t.push(e)})):t.push(e)})),t},e.union=function(){return e.uniq(e.flatten(arguments))},e.uniq=function(t){return e.uniqBy(t)},e.uniqBy=function(t,n){var r=[],a=[];return Th.fn(n)||(n=null),i(t,(function(t){var i=t;n&&(i=n(t)),e.includes(a,i)||(a.push(i),r.push(t))})),r},e.remove=function(t,n){for(var r=e.len(t)||0,i=[];r--;)n(t[r],r,t)&&i.push(r);return function(t,n){var r=[],i=e.len(n);if(i)for(n=n.sort((function(e,t){return e-t}));i--;){var a=n[i];r.push(Array.prototype.splice.call(t,a,1)[0])}return r.reverse(),r}(t,i)},e.endsWith=function(t,n){return(n+="")==e.slice(t,e.len(t)-e.len(n))},e.isMatch=function(e,t){var n=!0;return e=e||{},d(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n},e.throttle=function(t,n,r){return n=n||0,r=e.extend({leading:!0,trailing:!0,maxWait:n},r),e.debounce(t,n,r)},e.debounce=function(t,n,r){n=n||0;var i,a=(r=e.extend({leading:!1,trailing:!0},r)).maxWait,o=0,s=0,c=Date.now();function u(){return!(c-o>n)&&!(a&&c-s>a)}function d(e,t,n){return o=Date.now(),e.apply(t,n)}function l(){i&&(clearTimeout(i),i=null)}function f(){c=Date.now();var e=u();s=c;var a=this,o=arguments;l(),e?r.trailing&&(i=setTimeout((function(){d(t,a,o)}),n)):d(t,a,o)}return r.leading||(o=c),f.cancel=l,f};var f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(Th.array(e))return e;var t=[];return l(e).replace(f,(function(e,n,r,i){var a=n||e;r&&(a=i.replace(h,"$1")),t.push(a)})),t}return e}();function Ph(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var wh="contextName",Ih=function(e){l()(n,e);var t=Ph(n);function(){}return s()(n,[{key:"setParent",value:function(e){if(e){this[e[wh]]=this.parent=e}}},{key:"getParentByName",value:function(e){for(var t=this;t;){if(t[wh]==e)return t;t=t.parent}}},{key:"getVal",value:function(e){for(var t=this;t;){if(Sh.has(t,e))return t[e];t=t.parent}}},{key:"getMultiVals",value:function(e){var t=this,n={};return Sh.each(e,(function(e){n[e]=t.getVal(e)})),n}},{key:"getParam",value:function(){for(var e=this,t=6,n=[];t--&&e;)n.push(e),e=e.parent;return n.reverse(),n.unshift({}),Sh.extend.apply(Sh,n)}}]),n}(ch),Ah=(n(264),Sh.is),Eh={sep:"&",eq:"=",encode:encodeURIComponent,decode:decodeURIComponent,keepRaw:!1,sort:null,ignoreValues:[undefined]};function Dh(e,t,n){return n=Sh.find(arguments,(function(e){return Ah.object(e)})),e=Ah.nos(e)?e:undefined,t=Ah.nos(t)?t:undefined,n=Sh.extend({},Eh,n,{sep:e,eq:t})}var qh=function(e,t,n,r){e+="";var i=(r=Dh(t,n,r)).decode;return e=e.split(r.sep),Sh.reduce(e,(function(e,t){if(2==(t=t.split(r.eq)).length){var n=t[0],a=t[1];if(!r.keepRaw)try{n=i(n),a=i(a)}catch(o){}e[n]=a}return e}),{})},Oh=function(e,t,n,r){r=Dh(t,n,r);var i=Sh.keys(e),a=r.sort;a&&(Ah.fn(a)?i.sort(a):i.sort());var o=r.encode,s=[];return Sh.each(i,(function(t){var n=e[t];Sh.includes(r.ignoreValues,n)||((Ah.nan(n)||null==n)&&(n=""),r.keepRaw||(t=o(t),n=o(n)),s.push(t+r.eq+n))})),s.join(r.sep)},Rh=Sh.is,Lh=Sh.curry((function zg(e,t){var n={};e&&t&&Sh.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(Rh.object(i)){var a=i.type||function(e){return Rh._class(e)}(t),o=i.name;"object"==a?n[o]=zg(i.child,t):"array"==a&&(n[o]=Sh.map(t,(function(e){return zg(i.child,e)})))}else n[i]=t}));return n}));var Ch,Mh,Nh={visit:"v",player:"pl",policy:"p",show:"s",template:"tp",creative:"c",tracking:"t",exchange:"x",mixer:"m",statistics:"st",ad:"a",inventory:"i",questionnaireInquiry:"qi"},Bh={success:"s",error:"e",load:"l",skip:"sk",skipClick:"sc",click:"clk",impression:"imp",adblock:"adb",close:"cls",start:"st",unsupported:"uns"},Fh=Lh({pingbackType:"p",subtype:"t",uaaUserId:"u",cupidUserId:"a",episodeId:"v",albumId:"b",channelId:"c",vvId:"e",adPlayerId:"y",customInfo:"x",timestamp:"s",videoDuration:"d",isVIP:"g",isPreload:"pl",playSource:"ps",passportId:"pp",location:"lc",sdkVersion:"av",clientVersion:"vv",requestId:"rid",sequenceId:"sq",orderItemId:"od",creativeId:"ct",dspId:"dp",adInfo:"ai",adStrategy:"as",rawInventory:"ri",originalInventory:"oi",deliveredInventory:"di",forbiddenInventory:"fi",requestDuration:"rd",requestCount:"rc",reqCount:"rc",errorCode:"ec",errCode:"ec",errorMessage:"em",errMessage:"em",errMsg:"em"}),Uh={visit:"episodeId albumId channelId location passportId customInfo isPreload",show:"requestCount requestDuration",creative:"",tracking:"",statistics:"",ad:"episodeId albumId channelId sequenceId",inventory:"episodeId albumId channelId rawInventory originalInventory deliveredInventory forbiddenInventory"},jh=(n(304),Object.prototype.toString),Vh=function(e){switch(jh.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==B()(e)&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(t){if(t instanceof TypeError)return"arguments"}return null===e?"null":e===undefined?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":B()(e)},Hh=+Date.now(),Wh=window.document,zh=/^(?:text|application)\/javascript/i,Yh=/^(?:text|application)\/xml/i,Gh="application/json",Qh="text/html",Kh=/^\s*$/,$h=function Yg(e){var t=sp({},e||{});for(Ch in Yg.settings)t[Ch]===undefined&&(t[Ch]=Yg.settings[Ch]);Xh(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host);var n=t.dataType,r=/=\?/.test(t.url);if("jsonp"==n||r)return r||(t.url=rp(t.url,t.jsonpCallback+"=?")),Yg.JSONP(t);t.url||(t.url=window.location.toString()),ip(t);var i,a=t.accepts[n],o={},s=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,c=Yg.settings.xhr();t.crossDomain||(o["X-Requested-With"]="XMLHttpRequest"),a&&(o.Accept=a,a.indexOf(",")>-1&&(a=a.split(",",2)[0]),c.overrideMimeType&&c.overrideMimeType(a)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(o["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=sp(o,t.headers||{}),c.onreadystatechange=function(){if(4==c.readyState){clearTimeout(i);var e,r=!1;if(c.status>=200&&c.status<300||304==c.status||0==c.status&&"file:"==s){n=n||function(e){return e&&(e==Qh?"html":e==Gh?"json":zh.test(e)?"script":Yh.test(e)&&"xml")||"text"}(c.getResponseHeader("content-type")),e=c.responseText;try{"script"==n?(0,eval)(e):"xml"==n?e=c.responseXML:"json"==n&&(e=Kh.test(e)?null:JSON.parse(e))}catch(a){r=a}r?ep(r,"parsererror",c,t):Jh(e,c,t)}else ep(null,"error",c,t)}};var u=!("async"in t)||t.async;for(Mh in c.open(t.type,t.url,u),t.headers)c.setRequestHeader(Mh,t.headers[Mh]);return!1===function(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===Zh(t,n,"ajaxBeforeSend",[e,t]))return!1;Zh(t,n,"ajaxSend",[e,t])}(c,t)?(c.abort(),!1):(t.timeout>0&&(i=setTimeout((function(){c.onreadystatechange=np,c.abort(),ep(null,"timeout",c,t)}),t.timeout)),c.send(t.data?t.data:null),c)};function Zh(e,t,n,r){if(e.global)return!0}function Xh(e){e.global&&0==$h.active++&&Zh(e)}function Jh(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),Zh(n),tp(i,t,n)}function ep(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),Zh(r),tp(t,n,r)}function tp(e,t,n){var r=n.context;n.complete.call(r,t,e),Zh(n),function(e){e.global&&!--$h.active&&Zh(e)}(n)}function np(){}function rp(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function ip(e){"object"===Vh(e.data)&&(e.data=function(e,t){var n=[];return n.add=function(e,t){this.push(ap(e)+"="+ap(t))},op(n,e,t),n.join("&").replace("%20","+")}(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=rp(e.url,e.data))}$h.active=0,$h.JSONP=function(e){if(!("type"in e))return $h(e);var t,n="jsonp"+ ++Hh,r=Wh.createElement("script"),i={abort:function(){r.parentNode&&r.parentNode.removeChild(r),n in window&&(window[n]=np),tp("abort",i,e)}},a=Wh.getElementsByTagName("head")[0]||Wh.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error(e,"error")}),window[n]=function(a){clearTimeout(t),r.parentNode&&r.parentNode.removeChild(r),delete window[n],e.checkParserError&&!function(e){return"object"==B()(e)&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&!e.length}(a)?e.error(e,"parsererror"):Jh(a,i,e)},ip(e),r.src=e.url.replace(/\?(.+)=\?/,"?$1="+n),a.insertBefore(r,a.firstChild),e.timeout>0&&(t=setTimeout((function(){i.abort(),tp("timeout",i,e)}),e.timeout)),i},$h.settings={type:"GET",beforeSend:np,success:np,error:np,complete:np,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:Gh,xml:"application/xml, text/xml",html:Qh,text:"text/plain"},crossDomain:!1,timeout:0,checkParserError:!1},$h.get=function(e,t){return $h({url:e,success:t})},$h.post=function(e,t,n,r){return"function"===Vh(t)&&(r=r||n,n=t,t=null),$h({type:"POST",url:e,data:t,success:n,dataType:r})},$h.getJSON=function(e,t){return $h({url:e,success:t,dataType:"json"})};var ap=encodeURIComponent;function op(e,t,n,r){var i="array"===Vh(t);for(var a in t){var o=t[a];r&&(a=n?r:r+"["+(i?"":a)+"]"),!r&&i?e.add(o.name,o.value):(n?"array"===Vh(o):"object"===Vh(o))?op(e,o,n,a):e.add(a,o)}}function sp(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach((function(t){for(Ch in t)t[Ch]!==undefined&&(e[Ch]=t[Ch])})),e}var cp=$h,up=Sh.is,dp=function(){return Pd.a.get("P00001")||""},lp=function(e){return Pd.a.get(e)||""},fp=function(e,t,n){return Pd.a.set(e,t,n)},hp=function(e){(new Image).src=e},pp=function(e){var t=(e=e||{}).slot||{},n=e.creative||{},r=[t.cuepointType,e.dspId,e.orderItemId,n.creativeId,n.templateType];return(r=Sh.map(r,(function(e){return null==e&&(e=""),e}))).join("||")},_p=function Gg(e,t,n,r){if(e&&t){var i=e.split(t);if(n=Sh.tostr(n),e=i.join(n),r){var a=encodeURIComponent(t);a!=t&&(e=Gg(e,a,n))}}return e},vp=function(e){var t=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),n=0===document.createElement("canvas").toDataURL("image/heic").indexOf("data:image/heic");return/\.jpg$/.test(e)?(e+="?caplist=jpg",t&&(e+=",webp"),n&&(e+=",heic"),e):e},gp=function(e,t){var n=new Image;return new Promise((function(r,i){var a=function(){n.removeEventListener("load",s),n.removeEventListener("error",o)},o=function(){a(),i("error")},s=function(){a(),r(n)};t&&setTimeout((function(){a(),i("timeout")}),t),e=e.replace(/^(https:|http:)/,""),e=vp(e),n.addEventListener("load",s),n.addEventListener("error",o),n.setAttribute("src",e)}))},yp=function(e,t,n){e=e||{},t=t||{},t={width:up.number(t.width)?t.width:Infinity,height:up.number(t.height)?t.height:Infinity},n={width:(n=n||{}).width||0,height:n.height||0};var r=Math.max(n.width/e.width,n.height/e.height),i=Math.min(t.width/e.width,t.height/e.height);return r>i&&(r=i=NaN),{min:r,max:i}},mp=function(e){var t=NaN;up.string(e)&&(e=e.split(","));var n=Sh.first(e);if(!n)return t;if("string"!=typeof n)return t;var r=n.charCodeAt(0);return(r>47&&r<58||r>64&&r<91)&&(t=r),t},bp=function(){var e=lp("idx")||"";if(!e)return!1;var t={};try{t=JSON.parse(e)}catch(r){return console.log("idx parse error",r),!1}if(!up.object(t))return!1;if(!t.ip)return!1;if(!t.geocode)return!1;if(!t.exptime)return!1;var n="ip:"+t.ip.replace(/X/g,".")+",gc:"+t.geocode+",ept:"+t.exptime;return t=Sh.extend(t,{idx:n})},kp=Sh.is,xp=["isVIP","isPreload"],Tp=function(){function e(){a()(this,e);var t=this;t.uncompressedParam={},t.compressedParam={},t.pingbackParam={}}return s()(e,[{key:"init",value:function(e,t,n){var r=this;r.addUncompressedParam(t),r.addCompressedParam(n),r.getType(),r.getContextParam(e),r.filterContextParam(),r.mergeContextParam(),r.normalizeParam(),r.compressKey(),r.mergePingbackParam(),r.send()}},{key:"getContextParam",value:function(e){var t=this;e instanceof Ih?(t.context=e,t.contextParam=e.getParam()):t.contextParam=e}},{key:"filterContextParam",value:function(){var e=this,t="pingbackType subtype timestamp vvId adPlayerId uaaUserId cupidUserId sdkVersion clientVersion isVIP videoDuration requestId "+Uh[e.pingbackType];e.contextParam=Sh.only(e.contextParam,t)}},{key:"mergeContextParam",value:function(){this.addUncompressedParam(this.contextParam)}},{key:"getType",value:function(){var e=this,t=e.uncompressedParam;e.pingbackType=e.pingbackType||t.pingbackType,e.subtype=e.subtype||t.subtype,t.pingbackType=Nh[e.pingbackType]||e.pingbackType,t.subtype=Bh[e.subtype]||e.subtype}},{key:"normalizeParam",value:function(){var e=this,t=e.uncompressedParam;if(e.context&&"ad"==e.context.contextName){var n=e.context;e.addUncompressedParam({adInfo:n.adInfo})}Sh.each(xp,(function(e){var n=t[e];kp.bool(n)&&(t[e]=n?1:0)}));var r=0;r=e.context&&e.context.getVal("deltaTime")||0,t.timestamp=Date.now()+r,Sh.forIn(t,(function(e,n){if(kp.string(e)){var r=e.length;"em"==n&&r>300&&(e=e.slice(0,150)+"||"+e.slice(r-150)),t[n]=e}}))}},{key:"addCompressedParam",value:function(e){Sh.extend(this.compressedParam,e)}},{key:"addUncompressedParam",value:function(e){Sh.extend(this.uncompressedParam,e)}},{key:"compressKey",value:function(){this.addCompressedParam(Fh(this.uncompressedParam))}},{key:"mergePingbackParam",value:function(){var e=this;if(e.context){var t=e.context.getVal("pingbackParam");Sh.extend(e.pingbackParam,t)}}},{key:"send",value:function(){var e=this,t=e.compressedParam||{},n=e.pingbackParam||{},r={},i="";e.context&&e.context.getParentByName("sdk").logger.getLogger("pingback")("send",e.pingbackType||t.p,e.subtype||t.t,e.uncompressedParam,t,n);Sh.forIn(t,(function(e,t){Sh.has(n,t)||(r[t]=e)})),kp.empty(n)||(i="&"+Oh(n,"&","=",{keepRaw:!0}));var a="//msg.qy.net/cp2.gif?"+Oh(r)+i;hp(a)}}]),e}(),Sp=function(e,t,n){return(new Tp).init(e,t,n)},Pp=function(e,t,n){return Sp(e,{pingbackType:"statistics",subtype:t,customInfo:n})};function wp(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Ip(e,t,n,r,i,a){return wp(function(e,t){return e<<t|e>>>32-t}(wp(wp(t,e),wp(r,a)),i),n)}function Ap(e,t,n,r,i,a,o){return Ip(t&n|~t&r,e,t,i,a,o)}function Ep(e,t,n,r,i,a,o){return Ip(t&r|n&~r,e,t,i,a,o)}function Dp(e,t,n,r,i,a,o){return Ip(t^n^r,e,t,i,a,o)}function qp(e,t,n,r,i,a,o){return Ip(n^(t|~r),e,t,i,a,o)}function Op(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,a,o,s=1732584193,c=-271733879,u=-1732584194,d=271733878;for(n=0;n<e.length;n+=16)r=s,i=c,a=u,o=d,s=Ap(s,c,u,d,e[n],7,-680876936),d=Ap(d,s,c,u,e[n+1],12,-389564586),u=Ap(u,d,s,c,e[n+2],17,606105819),c=Ap(c,u,d,s,e[n+3],22,-1044525330),s=Ap(s,c,u,d,e[n+4],7,-176418897),d=Ap(d,s,c,u,e[n+5],12,1200080426),u=Ap(u,d,s,c,e[n+6],17,-1473231341),c=Ap(c,u,d,s,e[n+7],22,-45705983),s=Ap(s,c,u,d,e[n+8],7,1770035416),d=Ap(d,s,c,u,e[n+9],12,-1958414417),u=Ap(u,d,s,c,e[n+10],17,-42063),c=Ap(c,u,d,s,e[n+11],22,-1990404162),s=Ap(s,c,u,d,e[n+12],7,1804603682),d=Ap(d,s,c,u,e[n+13],12,-40341101),u=Ap(u,d,s,c,e[n+14],17,-1502002290),s=Ep(s,c=Ap(c,u,d,s,e[n+15],22,1236535329),u,d,e[n+1],5,-165796510),d=Ep(d,s,c,u,e[n+6],9,-1069501632),u=Ep(u,d,s,c,e[n+11],14,643717713),c=Ep(c,u,d,s,e[n],20,-373897302),s=Ep(s,c,u,d,e[n+5],5,-701558691),d=Ep(d,s,c,u,e[n+10],9,38016083),u=Ep(u,d,s,c,e[n+15],14,-660478335),c=Ep(c,u,d,s,e[n+4],20,-405537848),s=Ep(s,c,u,d,e[n+9],5,568446438),d=Ep(d,s,c,u,e[n+14],9,-1019803690),u=Ep(u,d,s,c,e[n+3],14,-187363961),c=Ep(c,u,d,s,e[n+8],20,1163531501),s=Ep(s,c,u,d,e[n+13],5,-1444681467),d=Ep(d,s,c,u,e[n+2],9,-51403784),u=Ep(u,d,s,c,e[n+7],14,1735328473),s=Dp(s,c=Ep(c,u,d,s,e[n+12],20,-1926607734),u,d,e[n+5],4,-378558),d=Dp(d,s,c,u,e[n+8],11,-2022574463),u=Dp(u,d,s,c,e[n+11],16,1839030562),c=Dp(c,u,d,s,e[n+14],23,-35309556),s=Dp(s,c,u,d,e[n+1],4,-1530992060),d=Dp(d,s,c,u,e[n+4],11,1272893353),u=Dp(u,d,s,c,e[n+7],16,-155497632),c=Dp(c,u,d,s,e[n+10],23,-1094730640),s=Dp(s,c,u,d,e[n+13],4,681279174),d=Dp(d,s,c,u,e[n],11,-358537222),u=Dp(u,d,s,c,e[n+3],16,-722521979),c=Dp(c,u,d,s,e[n+6],23,76029189),s=Dp(s,c,u,d,e[n+9],4,-640364487),d=Dp(d,s,c,u,e[n+12],11,-421815835),u=Dp(u,d,s,c,e[n+15],16,530742520),s=qp(s,c=Dp(c,u,d,s,e[n+2],23,-995338651),u,d,e[n],6,-198630844),d=qp(d,s,c,u,e[n+7],10,1126891415),u=qp(u,d,s,c,e[n+14],15,-1416354905),c=qp(c,u,d,s,e[n+5],21,-57434055),s=qp(s,c,u,d,e[n+12],6,1700485571),d=qp(d,s,c,u,e[n+3],10,-1894986606),u=qp(u,d,s,c,e[n+10],15,-1051523),c=qp(c,u,d,s,e[n+1],21,-2054922799),s=qp(s,c,u,d,e[n+8],6,1873313359),d=qp(d,s,c,u,e[n+15],10,-30611744),u=qp(u,d,s,c,e[n+6],15,-1560198380),c=qp(c,u,d,s,e[n+13],21,1309151649),s=qp(s,c,u,d,e[n+4],6,-145523070),d=qp(d,s,c,u,e[n+11],10,-1120210379),u=qp(u,d,s,c,e[n+2],15,718787259),c=qp(c,u,d,s,e[n+9],21,-343485551),s=wp(s,r),c=wp(c,i),u=wp(u,a),d=wp(d,o);return[s,c,u,d]}function Rp(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function Lp(e){var t,n=[];for(n[(e.length>>2)-1]=undefined,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function Cp(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function Mp(e){return unescape(encodeURIComponent(e))}function Np(e){return function(e){return Rp(Op(Lp(e),8*e.length))}(Mp(e))}function Bp(e,t){return function(e,t){var n,r,i=Lp(e),a=[],o=[];for(a[15]=o[15]=undefined,i.length>16&&(i=Op(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=Op(a.concat(Lp(t)),512+8*t.length),Rp(Op(o.concat(r),640))}(Mp(e),Mp(t))}var Fp=function(e,t,n){return t?n?Bp(t,e):Cp(Bp(t,e)):n?Np(e):Cp(Np(e))},Up=(n(383),function(){function e(){a()(this,e),this.init()}return s()(e,[{key:"init",value:function(){this._timerIdMap={timeout:{},interval:{}}}},{key:"run",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"interval",n=arguments.length>1?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16.7,i=Date.now,a=i(),o=[i(),Math.random()].join(""),s=function c(){e.setIdMap(o,t,c),i()-a>=r&&("interval"===t&&(a=i(),a),n(),"timeout"===t&&e.clearTimeout(o))};return this.setIdMap(o,t,s),o}},{key:"setIdMap",value:function(e,t,n){var r=requestAnimationFrame(n);this._timerIdMap[t][e]=r}},{key:"setTimeout",value:function(e,t){return this.run("timeout",e,t)}},{key:"clearTimeout",value:function(e){cancelAnimationFrame(this._timerIdMap.timeout[e])}},{key:"setInterval",value:function(e,t){return this.run("interval",e,t)}},{key:"clearInterval",value:function(e){cancelAnimationFrame(this._timerIdMap.interval[e])}}]),e}());function jp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Vp=function(e){l()(n,e);var t=jp(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).repeatCount=r||Infinity,i.interval=e,i.reset(),i.raf=new Up,i}return s()(n,[{key:"reset",value:function(){this.stop(),this.currentCount=0}},{key:"stop",value:function(){this.running&&(this.raf.clearInterval(this.timer),this.timer=null),this.running=!1}},{key:"start",value:function(){var e=this;e.running||(e.timer=this.raf.setInterval((function(){e.currentCount++,e.emit("timer"),e.currentCount==e.repeatCount&&(e.emit("timerComplete"),e.stop())}),e.interval)),e.running=!0}}]),n}(ch);Vp.interval=function(e,t,n){var r=new Vp(t,n);return r.on("timer",e),r.start(),r},Vp.timeout=function(e,t){return Vp.interval(e,t,1)};var Hp=Sh.is,Wp=function(){function e(t){a()(this,e),this.sdk=t,this.mw=t.videoMidware,this.init()}return s()(e,[{key:"init",value:function(){this.initDom()}},{key:"initDom",value:function(){var e=this.mw.adcontainer();this.$container=zp("<div></div>"),this.$content=zp('<div style="font-size:18px;color:#ffffff;margin-top:12px;text-align:center;line-height:34px;">呃...广告被拦截，无法正常播放了，<span style="color:#ff6000;"></span>秒后播放正片</br>关闭拦截插件并刷新页面，可恢复正常</div>'),this.$vipContent=zp('<div style="font-size:14px;line-height:24px;margin-top: 20px;">加入<span style="color:#00be06;cursor:pointer;">爱奇艺VIP</span>，尊享会员特权，轻轻松松跳广告</div>'),this.$container.appendChild(this.$content),this.$container.appendChild(this.$vipContent),this.$container.style.display="none",e.appendChild(this.$container),this.bindEvt()}},{key:"triggerCBK",value:function(e){this.sdk.currentVV.disableVideo(),this.$container.style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#000;color:#fff;z-index:500;",this.sdk.isblocked=!0,this.initCD(e)}},{key:"bindEvt",value:function(){var e=this;e.$vipContent.querySelector("span").addEventListener("click",(function(){e.pullCashier()}))}},{key:"initCD",value:function(e){var t=this,n=t.getBlackscreenDuration(e),r=t.$content.querySelector("span");r.innerText=n;var i=new Vp(1e3,n);i.on("timer",(function(){r.innerText=n-i.currentCount})),i.on("timerComplete",(function(){t.stopBlackScreen(i)})),t.timer||i.start(),t.timer=i}},{key:"stopBlackScreen",value:function(e){var t=this;(e=e||t.timer)&&e.stop(),t.timer=null,t.$container.style.display="none",t.sdk.currentVV.enableVideo()}},{key:"getBlackscreenDuration",value:function(e){var t=e instanceof Request?e:e.getParentByName("request");return t&&t.blackscreenDuration?t.blackscreenDuration:45}},{key:"pullCashier",value:function(){var e=this.sdk.currentVV;!function(e){var t=e.viewInfo;if(t.isSportsVideo)return void function(e){var t=(Sh.get(window,"playerSDK")||{}).xinyingCashier,n=e.episodeId,r=window.location.href;if(Hp.fn(t)){return void t({cid:n||"",s2:r,s3:"S1002",s4:"tiaoguanggao"})}var i="https://sports.iqiyi.com/sport/member.html?sportCash=true&s2="+encodeURIComponent(r)+"&s3=S1002&s4=tiaoguanggao";Yp(i)}(t);!function(e){var t=Sh.get(window,"Q.external.initVipPay"),n=(Sh.get(window,"playerSDK")||{}).vipCashier,r={platform:"b6c13e26323c537d",albumId:e.albumId||0,fc:"a3aa77e4bb08fdd9"};if(Hp.fn(n))n(r);else if(Hp.fn(t))t(r);else{var i="https://serv.vip.iqiyi.com/order/preview.action?pid=a0226bd958843452";for(var a in r)i+="&"+a+"="+r[a];Yp(i)}}(t)}({skipAdParams:null,viewInfo:{albumId:e.albumId,episodeId:e.episodeId,isSportsVideo:e.isSportsVideo()}})}}]),e}(),zp=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},Yp=Sh.throttle((function(e,t){window.open(e,t||"_blank")}),500,{trailing:!1});"http https ftp gopher file".split(" ");function Gp(e,t){var n=[],r=Sh.indexOf(e,t);return-1==r?n[0]=e:(n[0]=e.slice(0,r),n[1]=e.slice(r+t.length)),n}var Qp=function(e,t){if("string"!=typeof e)return e;var n,r,i={};i.href=e,r=(n=Gp(e,"#"))[0],n[1]&&(i.hash="#"+n[1]),r=(n=function(e,t){var n="";return e=e.replace(t,(function(e){return n=e,""})),[n,e]}(r,/^[a-zA-Z][a-zA-Z0-9+-.]*:/))[1],i.protocol=n[0].toLowerCase(),r=(n=Gp(r,"?"))[0];var a=n[1];if(t&&(a=qh(a)),i.query=a,"/"!=r.charAt(0)&&i.schema)return i.opaque=r,i;Sh.startsWith(r,"//")&&(n=Gp(r=r.slice(2),"/"),i.pathname="/"+unescape(n[1]||""),n=function(e){var t=Gp(e,"@"),n=t[0],r=t[1];r||(r=t[0],n=null);return[n,r]}(n[0]),i.auth=n[0],n=Gp(n[1],":"),i.hostname=n[0],i.port=~~n[1]);return i},Kp={adPlayerId:"a",uaaUserId:"u",cupidUserId:"i",passportId:"p",requestId:"s",timestamp:"h",encryption:{name:"e",type:"object",child:{episodeId:"b",albumId:"l",channelId:"k",cuepointList:{name:"q",type:"array",child:{cuepointType:"ct",adZoneId:"zi",startTime:"st",sequenceId:"si",requestAdDuration:"rd",keyword:"kw",limit:"lm",skip:"sk"}},referrer:"r",offline:"o",mobileKey:"t",userAgent:"m",continuingVideoPlayedCount:"n",continuingVideoPlayedDuration:"y",continuingAdPlayedDuration:"w",isVIP:"v",passportCookie:"pc",network:"nw",needPolicy:"po",encryptionVersion:"pv",isPreload:"pr",couponCode:"cc",couponVer:"mv",url:"ul",videoPlayedDurationInDay:"cd",adPlayedDurationInDay:"ca",midrollPointsPlayedInView:"nm",lastRollCompleteInterval:"in",lastMidrollRequestTime:"lm",clientVersion:"cv",sdkVersion:"sv",supportIQiyiTracking:"gt",supportEmptyTracking:"ea",searchQuery:"sq",prerollOrderItemIds:"poi",pauseRequestTimes:"pt",playSource:"ps",requestIndex:"rix",vvId:"veid",usePartnerData:"upd",ptid:"ptid",timePoint:"tp",vft:"vft",idx:"idx"}}},$p=function(e){var t;e=Sh.tostr(e);for(var n=[],r=0;r<e.length;r++)(t=e.charCodeAt(r))<128?n.push(t):t<2048?n.push(192|t>>6,128|63&t):t<55296||t>=57344?n.push(224|t>>12,128|t>>6&63,128|63&t):n.push(239,191,189);return n},Zp=function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++){if((n=e[i])>224)r=(15&n)<<12,r|=(63&(n=e[++i]))<<6,r|=63&(n=e[++i]);else if(n>192)r=(31&n)<<6,r|=(63&(n=e[++i]))<<6;else{if(n>128)throw new Error("InvalidCharacterError");r=n}t.push(String.fromCharCode(r))}return t.join("")},Xp=o_("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Jp=o_("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function e_(e,t){var n=t_(e,t);return Zp(n)}function t_(e,t){var n=Xp;((t=t||{}).useURL||null==t.useURL&&function(e){return/[-_]/.test(e)}(e))&&(n=Jp),e=e.replace(/\s+$/,"").replace(/=+$/,"").replace(/[\n\r]/g,"");for(var r=Sh.map(e.split(""),(function(e){return~~n.decodeMap[e]})),i=[],a=0;a<r.length;a+=4){var o=a_(Sh.slice(r,a,a+4));i.push.apply(i,o)}return i}function n_(e,t){return r_($p(e),t)}function r_(e,t){var n=Xp;(t=t||{}).useURL&&(n=Jp);for(var r=[],i=0;i<e.length;i+=3)r.push.apply(r,i_(Sh.slice(e,i,i+3)));return(r=Sh.map(r,(function(e){return n.encodeMap[e]||"="}))).join("")}function i_(e){var t=[];return null==e[2]?t[3]=64:t[3]=63&e[2],null==e[1]?t[2]=64:t[2]=(15&e[1])<<2|e[2]>>6,t[1]=(3&e[0])<<4|e[1]>>4,t[0]=e[0]>>2,t}function a_(e){var t=[];return null!=e[3]&&(t[2]=((3&e[2])<<6)+e[3]),null!=e[2]&&(t[1]=((15&e[1])<<4)+((60&e[2])>>2)),null!=e[1]&&(t[0]=(e[0]<<2)+((48&e[1])>>4)),t}function o_(e){var t=function(e){for(var t={},n=0;n<e.length;n++)t[n]=e.charAt(n);return t}(e);return{encodeMap:t,decodeMap:Sh.invert(t)}}var s_={encode:n_,btoa:n_,decode:e_,atob:e_,encodeBytes:r_,decodeToBytes:t_};function c_(e,t){var n=s_.decodeToBytes(e);return n=Sh.map(n,(function(e,n){return e^t.charCodeAt(n%t.length)})),Zp(n)}function u_(e,t){var n=$p(e);return n=Sh.map(n,(function(e,n){return e^t.charCodeAt(n%t.length)})),s_.encodeBytes(n)}function d_(e){var t=f_(e),n=qh(t),r=n.a,i=c_(n.e,r);return n.e=qh(i),n}function l_(e){var t=d_(e),n=t.e||{},r=0,i=0,a=parseInt(n.b),o=parseInt(n.l),s=Sh.last(t.a);return a>100&&(r=parseInt(a/100%100)),o>100&&(i=parseInt(o/100%100)),r+"y"+s+"w"+i}function f_(e){var t=Sh.split(e,"?");return Sh.last(t)}function h_(e,t){return function(e,t){t=Sh.split(t,"");for(var n,r=$p(e),i=Math.floor(r.length/2)-16,a=31;a>=1;--a){var o=r[i+a]%(a+1);a!=o&&(n=t[a],t[a]=t[o],t[o]=n)}return t.join("")}(t,Fp(t+"cupid_show2.0"+f_(e)))}var p_={decryptBySeed:c_,encryptBySeed:u_,decryptShowRequestByUrl:d_,decryptShowResponse:function(e,t){return c_(t,l_(e))},encryptShowResponse:function(e,t){return u_(t,l_(e))},getShowCheckSum:h_,validateShowChecksum:function(e,t){var n,r=t.match(/,"c_c_":"(\w+)"/);return!(!r||(n=r[1],h_(e,t.replace(r[0],""))!=n))}},__=Lh({v:"version",ics:"ipCollectionServers",cl:"clientIP",de:"serverIP",set:"serverTime",ec:"errorCode",sr:"serverError",ar:"areaId",ui:"cupidUserId",ntc:"needTimeChecking",vmd:"vipMarketingDocuments",ci:"cacheIP",idc:"idc",ims:"ims",inv:{name:"inventory",type:"object",child:{fi:"forbiddenInventory",ri:"rawInventory",oi:"originalInventory",di:"deliveredInventory"}},vcc:{name:"vipCheckConflict",type:"object",child:{v:"isVIP",c:"code",m:"message"}},pbp:"pingbackParam",m:{name:"midrollPoints",type:"object",child:{ac:"autoChoose",nm:"nextMidroll"}},pc:"pingbackConfig",vcr:{name:"vipCheckResult",type:"object",child:{v:"isVIP",uvt:"userVipType"}},vdi:{name:"videoInfo",type:"object",child:{dsa:"disableSkipAd",vd:"videoDuration",ai:"albumId",vt:"videoType"}},s:{name:"slots",type:"array",child:{ctp:"cuepointType",az:"adZoneId",st:"startTime",mvst:"makeVersionStartTime",kw:"keyword",ea:{name:"emptyTracking",type:"object",child:{tss:"timeSlices",trp:"trackingParam"}},a:{name:"ads",type:"array",child:{comment:"comment",o:"order",ori:"orderItemId",tp:"timeSlices",p:"priority",hkw:"hitKeywords",dtp:"deliverType",ipt:"impressionTime",skt:"skipTime",bge:"badge",h:"host",se:"settle",ta:"targetedAd",ug:"userGroup",ds:"isDSP",dsi:"dspId",dst:"dspType",dsc:"dspIcon",oet:"orderItemEndTime",msm:"macroSubstitutionMap",ies:{name:"ies",type:"array",child:{dm:"domain",msm:"macroSubstitutionMap"}},va:{name:"vast",type:"object",child:{vo:"vastObject"}},rp:{name:"replay",type:"object",child:{rpt:"replayTimes",bst:"replayShowTime",bct:"replayCloseTime"}},cr:{name:"creative",type:"object",child:{cra:"creativeId",crb:"creativeType",crc:"creativeTemplate",tt:"templateType",co:"creativeObject"}},clt:"clickThrough",ctt:"clickThroughType",ct:{name:"clickTracking",type:"object",child:{at:"exchangeTracking",ctc:"cupidTracking",tpt:"thirdPartyTracking"}},it:{name:"impressionTracking",type:"object",child:{at:"exchangeTracking",ctc:"cupidTracking",tpt:"thirdPartyTracking"}},et:{name:"eventTracking",type:"array",child:{ev:"event",tr:"trackings"}},qt:{name:"iqiyiTracking",type:"object",child:{ct:{name:"cupidTracking",type:"object",child:{evs:"events",trp:"trackingParam"}},at:{name:"exchangeTracking",type:"object",child:{evs:"events",trp:"trackingParam"}},qlt:{name:"qilinTracking",type:"object",child:{url:"trackingUrl",evs:"events",trp:"trackingParam"}}}},st:"startTime",fc:{name:"fullCorner",type:"object",child:{si:"showInterval",sd:"showDuration"}},acc:"seekable",tot:"toast",qrss:"qrShowStyle"}}}},c:{name:"policySlots",type:"array",child:{az:"adZoneId",ctp:"cuepointType",sts:"startTimes",du:"duration",azl:"adZoneStyle"}},c_c_:"couponCode",conf:{name:"conf",type:"object",child:{reqMiaozhenTime:"reqMiaozhenTime",miaozhenJsonPUrl:"miaozhenJsonPUrl"}}}),v_=(n(410),function(){this.version="1.3.4";var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},t=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){return this.parseXML(this.stringToXML(e),t)},this.parseXML=function(r,i){for(var a in i)e[a]=i[a];var o={},s=0,c="";if(e.xmlns&&r.namespaceURI&&(o[e.namespaceKey]=r.namespaceURI),r.attributes&&r.attributes.length>0){for(var u={};s<r.attributes.length;s++){var d=r.attributes.item(s);p={};var l="";l=e.stripAttrPrefix?d.name.replace(t,""):d.name,e.grokAttr?p[e.valueKey]=this.grokType(d.value.replace(n,"")):p[e.valueKey]=d.value.replace(n,""),e.xmlns&&d.namespaceURI&&(p[e.namespaceKey]=d.namespaceURI),e.attrsAsObject?u[l]=p:o[e.attrKey+l]=p}e.attrsAsObject&&(o[e.attrKey]=u)}if(r.hasChildNodes())for(var f,h,p,_=0;_<r.childNodes.length;_++)4===(f=r.childNodes.item(_)).nodeType?e.mergeCDATA?c+=f.nodeValue:o.hasOwnProperty(e.cdataKey)?(o[e.cdataKey].constructor!==Array&&(o[e.cdataKey]=[o[e.cdataKey]]),o[e.cdataKey].push(f.nodeValue)):e.childrenAsArray?(o[e.cdataKey]=[],o[e.cdataKey].push(f.nodeValue)):o[e.cdataKey]=f.nodeValue:3===f.nodeType?c+=f.nodeValue:1===f.nodeType&&(0===s&&(o={}),h=e.stripElemPrefix?f.nodeName.replace(t,""):f.nodeName,p=v_.parseXML(f),o.hasOwnProperty(h)?(o[h].constructor!==Array&&(o[h]=[o[h]]),o[h].push(p)):(e.childrenAsArray?(o[h]=[],o[h].push(p)):o[h]=p,s++));else c||(e.childrenAsArray?(o[e.textKey]=[],o[e.textKey].push(null)):o[e.textKey]=null);if(c)if(e.grokText){var v=this.grokType(c.replace(n,""));null!==v&&v!==undefined&&(o[e.textKey]=v)}else e.normalize?o[e.textKey]=c.replace(n,"").replace(/\s+/g," "):o[e.textKey]=c.replace(n,"");return o},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(Cg){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(n){return null}},this}.call({})),g_=v_,y_=Sh.is;function m_(e,t){var n,r={};if(y_.string(e))try{(n=g_.parseString(e,{attrKey:"attr",textKey:"#text"})).html&&!n.VAST&&(r.error="parse error",t("vastXML parse error")),t("vastJson",n)}catch(k){r.error=k,t("vastXML parse error",k)}else n=e;if(n.VAST){var i=n.VAST[0],a=b_(i.Ad);t("$ad",a,i);var o=b_(a.Wrapper);t("$wrapper",o);var s=b_(a.InLine);if(t("$inline",s),o){var c=b_(o.VASTAdTagURI);r.redirect=x_(c)}var u=o||s;if(u){var d=k_(u.Impression);r.impressionTrackings=Sh.compact(Sh.map(d,(function(e){return x_(e)}))),t("ret.impressionTrackings",r.impressionTrackings);var l=b_(u.Creatives[0].Creative);if(t("$creative",l),l){var f=b_(l.Linear);t("$linear",f);var h=b_(f.Duration);r.duration=x_(h),t("ret.duration",r.duration);var p,_=b_(f.AdParameters);r.adParameters=x_(_),t("ret.adParameters",r.adParameters);try{var v=b_(f.VideoClicks[0].ClickThrough);r.clickThrough=x_(v)}catch(x){r.clickThrough=""}t("ret.clickThrough",r.clickThrough);try{var g=b_(f.Icons[0].Icon[0].StaticResource);r.icon=x_(g)}catch(x){r.icon=""}t("ret.icon",r.icon);try{p=b_(f.MediaFiles[0].MediaFile)}catch(x){}t("creativeNode",p),r.creativeUrl=x_(p)||"",r.creativeWidth=T_(p,"width")||"",r.creativeHeight=T_(p,"height")||"",t("ret.creativeUrl",r.creativeUrl),t("ret.creativeWidth",r.creativeWidth),t("ret.creativeHeight",r.creativeHeight);try{var y=k_(f.VideoClicks[0].ClickTracking);r.clickTrackings=Sh.compact(Sh.map(y,(function(e){return x_(e)})))}catch(x){r.clickTrackings=[]}t("ret.clickTrackings",r.clickTrackings);var m=[];try{m=k_(f.TrackingEvents[0].Tracking)}catch(x){m=[]}t("eventTrackings",m);var b=r.eventTracking={};Sh.each(m,(function(e){var t=T_(e,"event");y_.array(b[t])||(b[t]=[]);var n=x_(e);n&&b[t].push(n)})),t(b,r.eventTracking)}}}return r.isEmpty=function(e,t){if(!e.VAST)return!0;var n=e.VAST[0]&&b_(e.VAST[0].Ad);return!n||(t("$ad:",n),!b_(n.InLine)&&!b_(n.Wrapper))}(n,t),r}function b_(e){return e&&e instanceof Array?e[0]:e}function k_(e){return e&&e instanceof Array?e:[e]}function x_(e){return e&&e["#text"]&&e["#text"][0]?e["#text"]:""}function T_(e,t){return e&&e.attr&&e.attr[t]&&e.attr[t]._value}var S_={"image/jpeg":{extensions:["jpg","jpeg","jpe"]},"image/gif":{extensions:["gif"]},"image/png":{extensions:["png"]},"image/webp":{extensions:["webp"]},"application/x-shockwave-flash":{extensions:["swf"]},"video/mp4":{extensions:["mp4","mp4v","mpg4"]},"video/x-flv":{extensions:["flv"]},"video/x-f4v":{extensions:["f4v"]},"video/webm":{extensions:["webm"]},"text/html":{extensions:["html","htm","shtml"]}};function P_(e){return function(e){e=Sh.lower(e);var t=Sh.keys(S_);return Sh.find(t,(function(t){return Sh.includes(S_[t].extensions,e)}))}(e)}var w_=function(e){return function(e){return Sh.includes(e,"image")?"image":Sh.includes(e,"flash")?"swf":Sh.includes(e,"video")?"video":Sh.includes(e,"html")?"html":void 0}(I_(e))},I_=function(e){if(e=Qp(e)){var t=function(e){var t=(e+="").split(".");return"."+Sh.last(t)}(e.pathname);return P_(t=Sh.slice(t,1))}};function A_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var E_=function(e){l()(n,e);var t=A_(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).type=e,i.ad=r,i.creativeObject=r.creative.creativeObject,i.vv=r.getParentByName("vv"),i.log=i.vv.sdk.logger.getLogger(e+":"+r.id),i.$adContainer=i.vv.mw.adcontainer(),i.$adzone=document.createElement("div"),r.$adzone=i.$adzone,r.$adzone.setAttribute("data-adzone",r.slot.adZoneId),i}return s()(n,[{key:"emitCreativeError",value:function(e,t){var n=this.ad;"timeout"==e?n.emit("error",{data:{creativeUrl:t},message:"creative timeout"}):n.emit("error",{data:{creativeUrl:t},message:"creative http error"})}},{key:"loadImage",value:function(e,t){var n=this;return t=t||3e4,"image/gif"==I_(e)&&(e=e+"?"+Date.now()),gp(e,t)["catch"]((function(t){return"timeout"===t?n.emitCreativeError("timeout",e):n.emitCreativeError("error",e),Promise.reject(t)}))}},{key:"initProgress",value:function(){var e=this,t=e.ad,n=Sh.once((function(){e.timer&&e.timer.stop(),e.timer=null,e.ad.emit("complete",{type:"timer-complete"})})),r=e.getDuration();if(r>0&&Infinity!=r){var i=e.timer=new Vp(1e3,r);i.on("timer",(function(){t.remain=t.duration-i.currentCount,e.updateCountdown()})),i.on("timerComplete",n),i.reset(),i.start()}}},{key:"fakeHide",value:function(){var e=this;e.$adzone.style.position="absolute",e.$adzone.style.width="600px",e.$adzone.style.height="300px",e.$adzone.style.top="10px",e.$adzone.style.left="10px",e.$adzone.style.display="",e.$adzone.style.visibility="hidden"}},{key:"putOnDocument",value:function(){var e=this;e.$adzone.style.position="absolute",e.hasPutOnDoc||("viewPoint"!=e.type&&e.$adzone.appendChild(e.creativeElement),e.$adzone.parentNode||(e.$adContainer.appendChild(e.$adzone),e.hasPutOnDoc=!0))}},{key:"tryAddStyle",value:function(e){var t=this;this.vv.sdk.setViewController((function(){e&&e(),t.addStyle()}))}},{key:"addClickEvt",value:function(){var e=this;e.clickHandler=function(){e.ad.qrShowStyle?e.vv.sdk.rollView.setQrMask(e.ad,!0):e.ad.emit("clickAndOpen")},e.$adzone&&e.$adzone.addEventListener("click",e.clickHandler)}},{key:"addStyle",value:function(){var e=this,t=e.vv.sdk.viewController;e.$adzone.setAttribute("adId",e.ad.id),e.$adzone.setAttribute("templateType",e.type),0!=e.creativeObject.isCloseable&&t.addCloseBtn(e);var n=!!e.creativeObject.needAdBadge,r=e.option||{};r.type=e.template,n&&t.addAdBadge(e.$adzone,r);var i=!!e.creativeObject.showMuteButton;"video"==e.creativeObject.renderType&&i&&t.addVolumnBtn(e)}},{key:"destroyAdzone",value:function(){var e=this,t=e.ad;"roll"==e.type||(e.log("destroy adzone"),t.$adzone.parentNode&&t.$adzone.parentNode.removeChild(t.$adzone),t.$adzone.removeEventListener("click",e.clickHandler),t.$adzone.innerHTML="",t.$adzone.setAttribute("data-adzone",""))}},{key:"updateCountdown",value:function(){var e,t=this,n=t.ad;if(t.onFirstPlaying(),e=n.remain,t.log("countdown",n.remain+"/"+n.duration),e<0)return t.log("countdown < 0 不应该发生"),void n.abort()}},{key:"pause",value:function(){var e=this;e.log("pause"),e.timer&&e.timer.stop()}},{key:"resume",value:function(){var e=this;e.log("resume"),e.timer&&e.timer.start()}},{key:"stop",value:function(){var e=this;e.log("stop"),e.timer&&e.timer.stop(),e.timer=null,e.isStopped=!0,e.destroyAdzone()}},{key:"reset",value:function(){this.isStopped=!1,this.hasPlaying=!1}},{key:"resize",value:function(){}},{key:"abort",value:function(){}},{key:"getDuration",value:function(){return Infinity}},{key:"detectCollision",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.willDefinitelyCollide,n=this,r=n.ad,i=n.$adzone||{},a=i.style,o=n.vv.adCollisionDetection,s={id:r.id,x:a.left.replace("px",""),y:a.top.replace("px",""),width:a.width.replace("px",""),height:a.height.replace("px",""),willDefinitelyCollide:t};o.addAdIntoCollisingList(s),o.notifyWholeCornerToHide()}}]),n}(ch),D_=Sh.is,q_={1:300,2:600,3:1126.4,4:1536,5:3072,10:8192,96:170},O_=Sh.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["fhdUrl","f4v",3072],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],(function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}));var R_={impression:0,click:1,push:2,trueview:3,close:4,start:10,firstQuartile:11,midpoint:12,thirdQuartile:13,complete:14,downloadStart:20,downloaded:21},L_={"1q":"firstQuartile",mid:"midpoint","3q":"thirdQuartile",stop:"complete",sp:"complete"};var C_=Sh.is;function M_(e,t){return Sh.trim(function(e,t){return B_(e,t||e.clickThrough,1)}(e,t||e.clickThrough))}function N_(e,t,n){return t=Sh.trim(B_(e,t,n))}function B_(e,t,n){t=t||"",t=Sh.trim(t);var r,i=function(e){var t=e.getVal("userIP"),n=e.getVal("cupidUserId"),r=e.getVal("uaaUserId"),i=e.getVal("requestId"),a=e.getVal("clickArea"),o=e.getVal("trueviewSource");return{"[UDID]":n,"[M_IDFA]":r,"[IDFA]":n,"[IQIYI_HCID]":n,"[IQIYI_FCID]":r,"[QIYI_ID]":r,__UDID__:n,__IP__:t,"[M_ADIP]":t,"[M%5fADIP]":t,__QRID__:i,__REQUESTID__:i,"[QIYI_AUTHCOOKIE]":e.getVal("passportCookie"),"[IQIYI_OFFSET]":e.getPlayedTime(),CUPID_IAP:"1_10_101",CUPID_CLA:a,CUPID_TRS:o}}(e),a={},o=!0;Sh.each(Sh.compact(e.ies),(function(i){if(Sh.some(i.domain,(function(e){return!!function(e,t){if((t=Qp(t)).hostname==e||Sh.endsWith(t.hostname,"."+e))return!0;return!1}(e,t)&&(r=e,!0)})))if(isNaN(n))o=!0,a=Sh.extend(a,i.macroSubstitutionMap);else{var s=r+"_"+n;if(e.iesKeyReplaced[s])return o=!1,!1;var c=Sh.extend({},i.macroSubstitutionMap);for(var u in c)c[u]=c[u]+"_"+n;a=Sh.extend(a,c)}}));var s=t;if(o&&!C_.empty(a)&&(s=F_(s,a,!0),e.debug("replace url macro",t,s),s!==t)){var c=r+"_"+n;e.iesKeyReplaced[c]=!0}t=F_(s,i,!0);var u=function(e){var t=Date.now(),n=e.getVal("deltaTime");C_.integer(n)&&(t+=n);return t}(e);return t=function(e,t){return t=t||Date.now(),F_(e,{"[timestamp]":t,"[M_timestamp]":t,"[TIMESTAMP]":t,"[randnum]":t,__timeStamp__:t,__TS__:t},!0)}(t,u)}function F_(e,t,n){return Sh.forIn(t,(function(t,r){e=U_(e,r,t,n)})),e}function U_(e,t,n,r){if(e&&t){var i=e.split(t);if(n=Sh.tostr(n),e=i.join(n),r){var a=encodeURIComponent(t);a!=t&&(e=U_(e,a,n))}}return e}var j_=Sh.is,V_="https://t7z.cupid.iqiyi.com",H_=Lh({type:"a",timestamp:"b",videoEventId:"r",securityCode:"s",md5Version:"ve",uploadId:"up",clientVersion:"cv",sdkVersion:"sv",startTime:"st",extendTrackingInfo:"eti"}),W_=function(){function e(){a()(this,e)}return s()(e,[{key:"init",value:function(e){var t=this;return t.compressedParam={},t.uncompressedParam={},t.trackingParam={},e instanceof Ih&&(t.context=e),t}},{key:"addCompressedParam",value:function(e){return Sh.extend(this.compressedParam,e),this}},{key:"addUncompressedParam",value:function(e){return Sh.extend(this.uncompressedParam,e),this}},{key:"addTrackingParam",value:function(e){return Sh.extend(this.trackingParam,e),this}},{key:"setType",value:function(e){var t=this,n="qilin"==e;t.isQilin=n;var r="exchange"==e;return t.isExchange=r,t.type=e,t}},{key:"addFrontendParam",value:function(){var e=this,t={md5Version:1},n=e.context;return n&&(t.uploadId=n.getVal("uploadId"),t.clientVersion=n.getVal("clientVersion"),t.sdkVersion=n.getVal("sdkVersion"),t.videoEventId=n.getVal("vvId"),t.startTime=n.getVal("startTime")||0,t.extendTrackingInfo=n.getVal("extendTrackingInfo")),e.isQilin&&n&&(t={extendTrackingInfo:n.getVal("extendTrackingInfo")}),e.addUncompressedParam(t),e}},{key:"mergeUncompressedParam",value:function(){var e=this,t=H_(e.uncompressedParam);return e.addCompressedParam(t),e}},{key:"setEvent",value:function(t){var n=this;return n.eventName=e.normalizeEventName(t),n.eventCode=e.getEventCodeByName(n.eventName),n.compressedParam.a=n.uncompressedParam.type=n.eventCode,n}},{key:"encryptParam",value:function(){var t=this;if(!t.isQilin){var n=e.encryptCupid;t.isExchange&&(n=e.encryptExchange),n(t.compressedParam,t.context,t.trackingParam)}return t}},{key:"getUrl",value:function(){var t=this,n=e.cupidUrl,r="";t.isExchange&&(n=e.exchangeUrl),t.isQilin&&(n=e.qilinUrl);var i=t.compressedParam||{},a=t.trackingParam||{},o={};return Sh.forIn(i,(function(e,t){Sh.has(a,t)||(o[t]=e)})),j_.empty(a)||(r="&"+Oh(a,"&","=",{keepRaw:!0})),n=n+"?"+Oh(o)+r,t.isQilin&&(n=N_(t.context,n,t.eventCode)),t.url=n,t}},{key:"_send",value:function(e){var t=this,n=function(){};t.context&&(n=t.context.getParentByName("sdk").logger.getLogger("qiyitracking"));n("send",t.type,t.eventName),n("verbose send",t.type,t.eventName,t.uncompressedParam,t.compressedParam,t.trackingParam);var r=Date.now(),i=t.url;return/https/i.test(window.location.protocol)&&(i=i.replace(/^http:/,"https:")),n("url",i),cp({url:i,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,success:function(n,i){t.response={textStatus:i,duration:Date.now()-r,data:n},e()},error:function(){t.response={textStatus:"timeout",duration:Date.now()-r,data:"error"},e()},complete:function(n,i){"timeout"==i&&(t.response={textStatus:i,duration:Date.now()-r,data:"error"},e())}}),t}},{key:"send",value:function(e){return this.addFrontendParam().mergeUncompressedParam().encryptParam().getUrl()._send(e)}},{key:"sendPingback",value:function(e){var t,n=this,r={pingbackType:"tracking",subtype:"success",requestCount:-1},i=n.response,a=function(){};n.context&&(a=n.context.getParentByName("sdk").logger.getLogger("qiyitracking"));Sh.includes(i.data,"ok")?(a("response success",i),r.requestDuration=i.duration):(a("error",i),r.subtype="error",t=601,"timeout"==i.textStatus?t=602:"success"!=i.textStatus&&(t=603)),n.isExchange?(r.pingbackType="exchange",j_.number(t)&&(t+=500)):n.isQixiao&&(r.pingbackType=undefined,j_.number(t)&&(t+=900)),r.errorCode=t;var o=n.context;"slot"==n.context.ContextName&&(o={slot:n.context}),r.adInfo=pp(o),Sp(n.context,r,e)}}],[{key:"getEventCodeByName",value:function(e){return R_[e]}},{key:"normalizeEventName",value:function(e){return e=L_[e]||e}},{key:"encryptCupid",value:function(e,t,n){var r=Date.now();t&&(r+=t.getVal("deltaTime")||0),e.b=parseInt(r/1e3);var i=Sh.map("a b c d r".split(" "),(function(t){return e[t]==undefined||null==e[t]?n[t]:e[t]}));e.s=Fp(i.join("")+"cupid")}},{key:"encryptExchange",value:function(e,t,n){var r=Date.now();t&&(r+=t.getVal("deltaTime")||0),e.b=parseInt(r/1e3);var i=Sh.map("a v b c r d q".split(" "),(function(t){return e[t]==undefined||null==e[t]?n[t]:e[t]}));e.s=Fp(i.join("")+"qax-track")}},{key:"send",value:function(t,n,r,i,a,o){var s=new e;e.qilinUrl=o||"http://t7z.cupid.iqiyi.com/dsp_track3",s.init(r).addTrackingParam(n).addUncompressedParam(t).setType(i).setEvent(a).send((function(){s.sendPingback()}))}}]),e}();W_.cupidUrl=V_+"/track2",W_.exchangeUrl=V_+"/etx";var z_=function(){function e(t,n){a()(this,e);var r=this;t instanceof Ih&&(r.context=t),r.eventName=W_.normalizeEventName(n),r.eventCode=W_.getEventCodeByName(r.eventName)}return s()(e,[{key:"sendAll",value:function(){var e=this;e.sendCupid(),e.sendExchange(),e.sendQiLin(),e.sendThirdParty()}},{key:"sendCupid",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=Sh.get(t,"iqiyiTracking.cupidTracking")||{};if(Sh.includes(n.events,e.eventCode)){var r=n.trackingParam;W_.send({},r,t,"cupid",e.eventName)}}}},{key:"sendExchange",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=Sh.get(t,"iqiyiTracking.exchangeTracking")||{};if(Sh.includes(n.events,e.eventCode)){var r=n.trackingParam;W_.send({},r,t,"exchange",e.eventName)}}}},{key:"sendQiLin",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=Sh.get(t,"iqiyiTracking.qilinTracking")||{};if(Sh.includes(n.events,e.eventCode)){var r=n.trackingParam,i=n.trackingUrl;W_.send({},r,t,"qilin",e.eventName,i)}}}},{key:"sendThirdParty",value:function(){var e=this,t=e.getThirdParty(),n=e.context.getVal("pingbackConfig")||{},r=e.context.getParentByName("sdk").logger.getLogger("tracking"),i=Sh.keys(n);Sh.each(t,(function(t){r("send","thirdParty",e.eventName,t);var a=Sh.find(i,(function(e){return Sh.startsWith(t,e)}));if(a){r("match pingback config",a);var o=new W_;o.context=e.context,o.url=t,o.isQixiao=!0,o._send((function(){o.sendPingback(n[a])}))}else hp(t)}))}},{key:"getThirdParty",value:function(){var e=this,t=e.context;if("ad"!=t.contextName)return[];var n=e.eventName,r=Sh.get(t,n+"Tracking.thirdPartyTracking"),i=Sh.get(t,["eventTracking",n]),a=Sh.compact(Sh.union(r,i));return Sh.map(a,(function(n){return N_(t,n,e.eventCode)}))}}],[{key:"send",value:function(t,n){new e(t,n).sendAll()}}]),e}(),Y_="postMessage"in window,G_=function(){function e(t){a()(this,e);var n=this;t=t||{},n.type=t.type,n.callback=null,n.element=t.element,n.aresToEos()}return s()(e,[{key:"aresToEos",value:function(){var e=this;Y_||(e.element.contentWindow.navigator.eosMessage=function(t){e.callback(t)})}},{key:"listen",value:function(e){var t=e||function(){};this.callback=t,Y_&&window.addEventListener("message",this.callback,!1)}},{key:"send",value:function(e){Y_?this.element.contentWindow.postMessage(e,"*"):(0,window.navigator.eosMessage)({data:e})}}]),e}();function Q_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var K_=function(e){l()(n,e);var t=Q_(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r)).mw=i.vv.mw,i.$video=i.vv.mw.video(),i.isOutVideo=!1,i.isRatioFixed=!0,i.canExpand=!0,"roll"==i.type&&(i.renderType="roll",r.$adzone=i.$adzone=i.$adContainer),i.creativeUrl=i.creativeUrl||i.creativeObject.url,i.renderType=i.renderType||w_(i.creativeObject.url),"mraid"==i.type&&(i.creativeMode="Interactive"),i.hasPlaying=!1,i.size={},i.isSkippableAd="skippable"==r.deliverName(),i.showGuide=!1,i}return s()(n,[{key:"load",value:function(){var e=this,t=this.ad;return"mraid"==e.type&&e.vv.mw.isFullScreen()&&e.vv.exitFullscreen(),new Promise((function(n,r){if(e.isStopped)return r(new Error("has ended"));if(e.trySetCrazyMode(),e.log("load"),"roll"==e.renderType){var i=e.vv,a="mp4";/data/i.test(i.mw.getEngineType())&&(a="f4v");var o=function(e,t,n){e=e||{};var r=q_[t]||1024,i=Sh.map(O_,(function(t){var i=-1,a=t.key,o=e[a];return n==t.videoFormat&&(o=e[a],D_.empty(o)||(i=2e3+(t.priority||0),r>=t.minBandwidth?i+=t.minBandwidth:i+=1/t.minBandwidth)),Sh.extend({score:i,video:o},t)})),a=Sh.max(i,(function(e){return e.score}));if(a.score>0){var o="g",s=a.minBandwidth;return s<=170?o="b":s>=1536&&s<3072?o="c":s>=3072&&(o="fhd"),a.videoDefinition=t,a.definitionLevel=o,a}}(t.creative.creativeObject,i.videoDefinition,a);if(o){e.log("matched ad video",o),t.matchedVideo=o;var s=o.video;"mp4"==a&&(s+="?pv=0.2"),e.creativeUrl=t.creativeUrl=s,n()}else{var c=new Error("fail to match ad video",t.creative.creativeObject);t.emit("error",c),r(c)}}else if("html"==e.renderType)n(e.loadMraid()),t.error||t.emit("creativeLoad");else{r(new Error("unknown template render type"))}}))}},{key:"bindPlayingEvt",value:function(){var e=this.ad,t=this;if("roll"==t.renderType){e.on("video-playing",(function n(){var r=e.slot.ads[e.index()-1],i=!0;r&&("ended"==r.state||r.error||e.error||(i=!1)),i||e.slot.isSeekableOriginalSlot()?(t.onFirstPlaying(),e.off("video-playing",n)):t.log("invalid playing")}))}}},{key:"loadRollToVideo",value:function(){var e=this.ad,t=this.vv.mw,n=this;if("roll"==n.renderType){e.on("video-playing",(function i(){var t=e.slot.ads[e.index()-1],r=!0;t&&("ended"==t.state||t.error||e.error||(r=!1)),r?(n.onFirstPlaying(),e.off("video-playing",i)):n.log("invalid playing")}));var r={file:n.creativeUrl,id:e.id,type:e.typeName(),seekable:Boolean(e.seekable)||15==e.slot.cuepointType,offset:parseInt(e.slot.startTime),videoEventId:n.vv.videoEventId,duration:e.duration,mvst:e.slot.makeVersionStartTime||""};if(r.file=r.file.replace(/\.qiyi\.com/,".iqiyi.com"),r.file=r.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),this.log("video load",r,r.videoEventId,e.slot.startTime,e.slot.makeVersionStartTime),t.load(r),0===e.index())e.getParentByName("sdk").loadEndTime=Date.now()}}},{key:"loadMraid",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("iframe");r.setAttribute("scrolling","no"),r.setAttribute("frameborder",0),r.style.width="100%",r.style.height="100%",e.creativeElement=r,e.fakeHide(),e.putOnDocument();var i=function(t){var n=t.data;if(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(r){return void e.log("parse data error",r)}n.key==e.msgKey&&("clickandopen"==n.type||"interactive"==n.type?(e.ad.hasInteracted||(e.ad.hasInteracted=!0),"clickandopen"==n.type&&e.ad.emit("clickAndOpen",n.data)):"error"==n.type&&e.log("mraid creative error",n.data))}},a=function(){var r;clearTimeout(o);try{r=e.creativeElement.contentDocument}catch(a){e.log("html creative can not get contentDocument:",a)}r&&r.getElementsByTagName("cupid-iframe").length>0?(e.message=new G_({type:"mraid",element:e.creativeElement}),e.message.listen(i),t()):(e.log("html creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))},o=setTimeout((function(){e.creativeElement.removeEventListener("load",a),e.log("mraid html creative load error timeout"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))}),1e4);e.creativeElement.addEventListener("load",a);var s=e.creativeUrl.replace(/^(https:|http:)/,"")+"?isMute=1&domain="+document.domain;e.creativeElement.setAttribute("src",s)}))}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad,n=t.slot,r=t.order>1?t.slot.ads[t.order-2]:null;e.vv.stopVideo(e.ad.typeName()),t.isSeekableOriginalRoll()&&e.vv.schedule&&e.vv.schedule.bindAfterSeekedEvt(),t.remain=t.duration,e.log("on first playing"),t.emit("impression"),e.slotDuration=$_(t.slot.ads),n.hasSkippableAdInSlot&&(e.skippableDuration=Z_(t.slot.ads)),e.initProgress();var i=t.deliverName();if("brief"==i&&t.toast)t.getParentByName("sdk").emit("adplayer_showtip",{des:t.toast,time:2});"vip"==i||"origin"==i||"sports-vip"==i||"brief"==i||"overlay-brief"==i||("skippable"==i?i=r&&"skippable"==r.deliverName()?"skippable-after":"skippable-before":"trueView"==i?i="trueview-before":"roll"==e.type?i="normal":"mraid"==e.type&&(i="rolllike")),e.setVideoOptions(i,t,!0),t.qrShowStyle&&e.setQrStyle(t)}}},{key:"setQrStyle",value:function(e){var t=this.vv.sdk;t.setViewController((function(){t.rollView.setQrStyle(e)}))}},{key:"initProgress",value:function(){var e=this,t=e.ad,n=e.vv.mw;t.quartiles=[{position:1/4,event:"1q"},{position:.5,event:"mid"},{position:3/4,event:"3q"},{position:1,event:"sp"}];var r=e.isSkippableAd?t.duration+5:t.duration,i=Sh.once((function(){e.timer&&e.timer.stop(),e.timer=null,Sh.remove(t.quartiles,(function(e){return z_.send(t,e.event),t.emit("pingback",{subtype:e.event}),!0}));var r=n?n.duration()-n.currentTime():0,i=e.ad.hasPlayed&&"origin"==t.deliverName()&&Boolean(t.seekable)?"replayComplete":"complete";t.slot.isSeekableOriginalSlot()?setTimeout((function(){e.ad.emit(i,{type:"timer-complete"})}),500):r>0&&r<1?setTimeout((function(){e.ad.emit(i,{type:"timer-complete"})}),1e3):e.ad.emit(i,{type:"timer-complete"})}));if(r>0&&!e.timer){var a=e.timer=new Vp(1e3,r);a.on("timer",(function(){t.remain=t.duration-a.currentCount,e.updateCountdown(),e.vv.adPlayedDurationInView++,Sh.remove(t.quartiles,(function(n){var r=Math.round(t.duration*n.position);if(a.currentCount==r)return e.log("match quartile",n.event,a.currentCount),z_.send(t,n.event),t.emit("pingback",{subtype:n.event}),"sp"==n.event&&e.isSkippableAd&&t.sendPlayDurationPingback(t.duration),!0}))})),a.on("timerComplete",i),a.reset(),a.start()}t.on("video-ended",(function(){i()}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.log("ready play roll"),e.isStopped)return n("ended");if("roll"==e.renderType)return e.detectCollision({willDefinitelyCollide:!0}),t();if(e.vv.sdk.emit("single_ad_start",{type:"rollLike"}),e.log("rollLike start play"),e.vv.isCurrentVV&&e.vv.disableVideo(),e.vv.schedule.setCurrentAd(e.ad.id),e.$adzone.style.zIndex="3000",e.vv.mw.isFullScreen()&&e.vv.exitFullscreen(),e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement&&e.creativeElement.contentWindow&&e.message){e.msgKey=e.vv.videoEventId+Date.now();try{e.message.send(JSON.stringify({type:"ready",key:e.msgKey}))}catch(r){e.log("stringify data error",r),n(r)}}X_(e.$adzone),X_(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"resume",value:function(){var e=this;return e.log("resume"),e.timer&&e.timer.start(),e.midrollTip&&e.midrollTip.start(),Promise.resolve()}},{key:"pause",value:function(){var e=this;e.log("pause");var t=e.vv.sdk,n="";t.rollView&&(n=t.rollView.options&&t.rollView.options.theme),!e.timer||e.isSkippableAd&&Sh.includes(n,"guide")||this.timer.stop()}},{key:"updateCountdown",value:function(){var e=this,t=e.ad;e.onFirstPlaying();var n,r,i=t.slot,a=i.ads,o=e.isSkippableAd?t.remain+5:t.remain,s=e.isSkippableAd?t.duration+5:t.duration;if(a.length<=1)n=o;else{var c=Sh.slice(a,t.index()+1);n=o+$_(c),e.log("countdown",o+"/"+s,n+"/"+e.slotDuration),i.hasSkippableAdInSlot&&(r=o+Z_(c)+5)}var u=e.vv.sdk;if(u.viewController&&u.rollView&&n>=0){var d="mraid"==e.type&&e.ad.hasInteracted;u.rollView.updateCountdown(n,d)}if(i.hasSkippableAdInSlot&&!e.isSkippableAd&&u.viewController&&u.rollView&&(e.log("skippable countdown",r+"/"+e.skippableDuration),u.rollView.updateSkippableCountdown(r)),"trueView"==t.deliverName()){var l=t.duration-t.remain;if(l>=t.impressionTime&&t.emit("trueview"),u.rollView){var f=u.rollView.options&&u.rollView.options.theme;if(Sh.includes(f,"before")){var h=t.skipTime-l;h<=0?(e.log("trueview can skip now"),u.rollView.trySetOptions({theme:"trueview-after",ad:t}),u.rollView.updateCountdown(n)):(e.log("trueview countdown",h+"/"+t.skipTime),u.rollView.updateTrueViewCountdown(h))}}}if(e.isSkippableAd){var p=t.duration-t.remain,_=e.mw.duration()-e.mw.currentTime();if(p>=t.impressionTime&&t.emit("trueview"),u.rollView){var v=u.rollView.options&&u.rollView.options.theme;if(Sh.includes(v,"before")){var g=5-p;g<=0&&!e.skippableCanSkip?(e.log("skippable can skip now"),e.skippableCanSkip=!0,u.rollView.useTheme("skippable-after",t),u.rollView.updateCountdown(n)):(e.log("skippable countdown",g+"/"+e.skippableDuration),u.rollView.updateSkippableCountdown(g))}_>=1&&t.remain<=0&&!e.showGuide&&(e.showGuide=!0,e.loadGuide())}}}},{key:"setVideoOptions",value:function(e,t,n){var r=this,i=r.vv.sdk;i.setViewController((function(){i.rollView&&(i.rollView.trySetOptions({theme:e,ad:t}),n&&i.rollView.setVipTitle(e,r),r.updateCountdown())}))}},{key:"trySetCrazyMode",value:function(){var e=this;if("mraid"==e.type){var t=e.vv.mw.isFullScreen();e.isOutVideo=!1,e.isRatioFixed=!1,t&&(e.canExpand=!1)}}},{key:"resize",value:function(){var e=this;if(!e.isStopped){var t=e.size;if(t.videoWidth=e.$video.offsetWidth,t.videoHeight=e.$video.offsetHeight,e.setPosition(),e.$adzone.style.width=t.videoWidth+"px",e.$adzone.style.height=t.videoHeight+"px",e.$adzone.style.top=t.y,e.$adzone.style.left=t.x,e.detectCollision({willDefinitelyCollide:!0}),e.ad.qrShowStyle){var n=e.vv.sdk;n.rollView&&(n.rollView.resizeQrStyle(e.ad),n.rollView.resizeQrMask())}}}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.vv.mw,r=(n.width()-e.$video.offsetWidth)/2,i=(n.height()-e.$video.offsetHeight)/2;t.x=r,t.y=i}},{key:"stop",value:function(e){var t=this;(e=e||{},t.log("stop template",e),t.timer&&t.timer.stop(),t.timer=null,t.isStopped=!0,t.message=null,t.destroyAdzone(),"roll"==t.type&&e.abort&&t.vv.isCurrentVV()&&t.vv.schedule.getCurrentAd()==t.ad&&(t.isSkippableAd&&t.vv.mw.play(),t.log("force abort video"),t.vv.mw.abort()),t.vv.schedule.getCurrentAd()==t.ad&&t.setVideoOptions(),"mraid"==t.type)&&(t.vv.schedule.removeCurrentAd(),t.vv.sdk.emit("single_ad_end",{type:"rollLike"}),t.log("rollLike stop"),t.vv.isCurrentVV()&&t.vv.enableVideo())}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=NaN),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"loadGuide",value:function(){var e,t=this,n=t.mw,r=t.ad,i=r.slot.ads,a=t.vv.sdk,o=t.isSkippableAd?r.remain+5:r.remain,s=t.isSkippableAd?r.duration+5:r.duration;if(i.length<=1)e=o;else{var c=Sh.slice(i,r.index()+1);e=o+$_(c),t.log("countdown",o+"/"+s,e+"/"+t.slotDuration)}a.setViewController((function(){a.rollView&&(a.rollView.updateCountdown(e),a.rollView.trySetOptions({theme:"skippable-guide",ad:r}))})),n.pause()}}]),n}(E_);function $_(e){return Sh.reduce(e,(function(e,t){return"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}function Z_(e){return Sh.reduce(e,(function(e,t){return"skippable"==t.deliverName()?e:e+t.duration}),0)}function X_(e){e.style.display="",e.style.visibility=""}function J_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ev=function(e){l()(n,e);var t=J_(n);function n(e,r){return a()(this,n),t.call(this,e,r)}return s()(n,[{key:"load",value:function(){var e=this,t=e.ad,n=e.vv;t.creative.creativeObject.url=vp(t.creative.creativeObject.url);var r=Sh.extend({id:t.id,orderItemId:t.orderItemId,adZoneId:t.slot.adZoneId,templateType:t.creative.templateType,startTime:t.slot.startTime},t.creative.creativeObject);return n.sdk.emit("adplayer_ad_info",{type:"definitionSwitchingAd",data:{definitionSwitchingAd:r,tvId:n.episodeId,videoEventId:n.videoEventId}}),e.log("notify player definitionSwitchingAd",r),Promise.resolve()}},{key:"play",value:function(){return Promise.resolve()}}]),n}(E_);function tv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var nv=function(e){l()(n,e);var t=tv(n);function n(e,r){var i;a()(this,n),i=t.call(this,e,r);var o=u()(i);return o.isRatioFixed=!0,o.canExpand=!0,o.creativeUrl=o.creativeUrl||o.creativeObject.url,o.renderType=o.renderType||w_(o.creativeUrl),o.isSuperShow=!!o.creativeObject.actUrl,o.size={},Sh.includes(["image","html","video"],o.renderType)||o.ad.emit("error",new Error("unknown render type: "+o.creativeUrl)),o.hasPlaying=!1,o.hasPutOnDoc=!1,o.hasOpenVolumn=!1,i}return s()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n,r){if(e.isStopped&&r(new Error("has ended")),e.log("load"),"image"==e.renderType){n(e.loadImage(e.creativeUrl,5e3).then((function(t){e.creativeElement=t,e.size.creativeRawWidth=t.width,e.size.creativeRawHeight=t.height})))}else"html"==e.renderType?n(e.loadHtml()):"video"==e.renderType&&n(e.loadVideo());t.error||t.emit("creativeLoad")}))}},{key:"loadVideo",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("video");r.style.width="100%",r.style.height="100%",r.setAttribute("preload","auto"),r.muted=!0,e.creativeElement=r;var i=e.creativeObject.playCount||1;e.fakeHide();var a=setTimeout((function(){e.creativeElement.removeEventListener("loadstart",o),e.log("video creative load error timeout"),e.emitCreativeError("timeout",e.creativeUrl),n(new Error("creative error"))}),15e3),o=function(){var t;e.log("video pause load start");try{t=e.creativeElement}catch(r){e.log("video creative can not get contentDocument:",r)}t?(t.addEventListener("click",l),t.addEventListener("ended",c),t.addEventListener("error",u),t.addEventListener("canplay",d)):(e.log("video creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))},s=1,c=function(){var t=this;e.log("current play ended",s+"/"+i),s<i?(t.currentTime=0,t.play(),s++):(t.pause(),e.ad.emit("complete"))},u=function(){e.log("video creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))},d=function(){clearTimeout(a),e.size.creativeRawWidth=e.creativeObject.width,e.size.creativeRawHeight=e.creativeObject.height,e.log("current play count",s+"/"+i),t()},l=function(){e.ad.qrShowStyle?e.vv.sdk.rollView.setQrMask(e.ad,!0):e.ad.emit("click")},f=e.creativeUrl,h=Qp(f),p=function(){if(document.createElement("video").canPlayType){var e=document.createElement("video"),t=e.canPlayType('video/ogg; codecs="theora, vorbis"');if(t)return"probably"==t;var n=e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');return!!n&&"probably"==n}return!1}();if(p&&/.+\.mp4$/.test(h.href)){e.creativeElement.addEventListener("loadstart",o),h.query&&!/pv=0.2/.test(h.query)?f+="&pv=0.2":h.query||(f+="?pv=0.2");var _=f.replace(/^(https:|http:)/,"");_=_.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.creativeElement.setAttribute("src",_),e.putOnDocument()}else e.log("browser support error or video format error",p),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))}))}},{key:"loadHtml",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("iframe");r.setAttribute("scrolling","no"),r.setAttribute("frameborder",0),r.style.width="100%",r.style.height="100%",e.creativeElement=r,e.fakeHide();var i=setTimeout((function(){e.creativeElement.removeEventListener("load",a),e.log("html creative load error timeout"),e.emitCreativeError("timeout",e.creativeUrl),n(new Error("creative error"))}),1e4),a=function(){var r;clearTimeout(i);try{r=e.creativeElement.contentDocument}catch(a){e.log("html creative can not get contentDocument:",a)}r&&r.getElementsByTagName("cupid-iframe").length>0?(r.addEventListener("click",(function(){e.ad.qrShowStyle?e.vv.sdk.rollView.setQrMask(e.ad,!0):e.ad.emit("click")})),t()):(e.log("html creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))};e.creativeElement.addEventListener("load",a);var o=e.creativeUrl.replace(/^(https:|http:)/,"");e.creativeElement.setAttribute("src",o+"?isMute=1&domain="+document.domain),e.putOnDocument()}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.isStopped)return n("ended");if(e.isSuperShow){var r=1e3*e.creativeObject.actDuration||2e3;gp(e.creativeObject.actUrl).then((function(t){e.actCreativeElement=t,e.creativeElement.style.display="none",e.superShowPlaying=!0,e.showSuperShow(),e.tryAddStyle(),e.ad.emit("impression"),setTimeout((function(){e.actCreativeElement.style.display="none",e.superShowPlaying=!1,e.ad.aborted||e._play()}),r)}))["catch"]((function(){e.superShowPlaying=!1,e._play()}))}else e._play();t()}))}},{key:"_play",value:function(){var e=this;e.log("play"),e.creativeObject.isSuperPause||(e.$adzone.style.boxShadow="#000 0px 0px 1.4rem"),e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement.style.display="",e.$adzone.style.zIndex=80,e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),rv(e.$adzone),e.$adContainer&&rv(e.$adContainer),e.resize(!0),e.isAudioPause()&&e.initAudio(),"video"==e.renderType&&e.creativeElement&&e.creativeElement.play(),e.notifyPlayerAudioPauseStart(),e.onFirstPlaying()}},{key:"showSuperShow",value:function(){var e=this;e.actCreativeElement.style.width="100%",e.actCreativeElement.style.height="100%",e.actCreativeElement.style.visibility="",e.$adzone.appendChild(e.actCreativeElement),e.$adContainer.appendChild(e.$adzone),rv(e.$adzone),e.$adContainer&&rv(e.$adContainer),e.resizeSuperShow()}},{key:"resizeSuperShow",value:function(){var e=this,t={},n=e.vv.mw.video(),r=e.creativeObject;t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.creativeWidth=r.actWidth||980,t.creativeHeight=r.actHeight||540;var i=[980,540];t.boxWidth=t.videoWidth*r.actWidthScale||i[0],t.boxHeight=t.videoHeight*r.actHeightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var a=yp({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});a.max?(t.scale=a.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(t),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.$adzone.style.position="absolute",e.log("resize supershow",t)):e.log("fail to resize"),e.detectCollision()}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad;t.remain=t.duration,e.log("on first playing"),t.emit("impression"),"video"!=e.renderType&&e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon),1==t.targetedAd&&(e.log("precise ad and add icon"),t.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then((function(e){e.addEventListener("click",(function(){window.open("http://www.iqiyi.com/common/secret.html")}))}))),Infinity!=e.ad.duration&&"video"!=e.renderType&&e.updateCountdown();var n=e.vv.sdk;e.ad.qrShowStyle&&n.pauseView&&n.pauseView.setQrStyle(e.ad,e.size)}}},{key:"resize",value:function(){var e=this;if(e.superShowPlaying)e.resizeSuperShow();else{var t=e.size,n=e.vv.mw.video(),r=e.creativeObject;t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.creativeWidth=r.width,t.creativeHeight=r.height,t.creativeWidth=t.creativeWidth||e.size.creativeRawWidth||300,t.creativeHeight=t.creativeHeight||e.size.creativeRawHeight||250,r.width==e.size.creativeRawWidth&&r.height==e.size.creativeRawHeight||e.log("实际尺寸与填写尺寸不同");var i=[600,500];t.boxWidth=t.videoWidth*r.widthScale||i[0],t.boxHeight=t.videoHeight*r.heightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var a=yp({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});if(a.max){t.scale=a.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(e.size),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px";var o=e.vv.sdk;e.ad.qrShowStyle&&o.pauseView&&(o.pauseView.resizeQrStyle(t),o.rollView.resizeQrMask()),e.log("resize",t)}else e.log("fail to resize");e.detectCollision()}}},{key:"setPosition",value:function(e){var t=this.vv.mw,n=t.video(),r=(t.width()-n.offsetWidth)/2,i=(t.height()-n.offsetHeight)/2;e.x=r+(e.videoWidth-e.computedWidth)/2,e.y=i+(e.videoHeight-e.computedHeight)/2}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"toggleVideoVolumn",value:function(){var e=this,t=e.ad,n=e.creativeElement;n.muted=!n.muted;var r=n.muted;if(e.log("video pause muted",r),!r){e.hasOpenVolumn||(e.hasOpenVolumn=!0,Pp(t,"clk","volume_button;vss:1"));var i=e.vv.mw.volume();n.volume=i||.15,e.log("video pause volume",n.volume)}return r}},{key:"isAudioPause",value:function(){return!!this.creativeObject.audioUrl}},{key:"initAudio",value:function(){var e=this;e.$audio=document.createElement("audio"),e.$audio.preload="auto";var t=e.creativeObject.audioUrl,n=Qp(t);n.query&&!/pv=0.2/.test(n.query)?t+="&pv=0.2":n.query||(t+="?pv=0.2"),e.$audio.src=t.replace(/^(https:|http:)/,""),e.vv.audioPause=e.ad,e.bindAudioEvt()}},{key:"closeAudioPause",value:function(e){var t=this;if(!t.isStopped&&!t.hasClosed)if(t.hasClosed=!0,"manual"!=e)if(t.$audio&&!t.audioError){t.$adzone.classList.add("cupid-fade-out");var n=t.vv.mw.volume();t.log("audio volume",n),t.$audio.volume=n,t.$audio.play()}else t.abortAudioPause();else t.abortAudioPause(e)}},{key:"bindAudioEvt",value:function(){var e=this;e.$audio&&(e.$audio.addEventListener("play",(function(){e.log("audio start play"),e.audioPlayed=!0,e.sendAudioPingback(0)})),e.$audio.addEventListener("ended",(function(){e.log("audio ended"),e.$audio=null,e.sendAudioPingback(1),e.abortAudioPause()})),e.$audio.addEventListener("error",(function(){e.audioError=!0,e.$audio=null,e.audioPlayed&&e.abortAudioPause()})))}},{key:"notifyPlayerAudioPauseEnd",value:function(e){var t=this,n=t.vv.sdk;t.log("notify player pause end, is audio:",t.isAudioPause()),n.emit("pause_end",{type:t.isAudioPause()?"audio":"common",status:e||"common"})}},{key:"notifyPlayerAudioPauseStart",value:function(){var e=this,t=e.vv.sdk;e.log("notify player pause start, is audio:",e.isAudioPause()),t.emit("pause_start",{type:e.isAudioPause()?"audio":"common",duration:e.isAudioPause()?2.5:0})}},{key:"abortAudioPause",value:function(e){var t=this;t.vv.audioPause=null,t.notifyPlayerAudioPauseEnd(e),t.ad.abort()}},{key:"sendAudioPingback",value:function(e){var t=this.ad,n=Oh({acp:e},",",":");Pp(t,"auu",n)}}]),n}(E_);function rv(e){e.style.display="",e.style.visibility=""}function iv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var av=function(e){l()(n,e);var t=iv(n);function n(e,r){var i;a()(this,n),i=t.call(this,e,r);var o=u()(i);return o.size={},o.creativeObject=r.creative.creativeObject,o.creativeUrl=o.creativeUrl||o.creativeObject.creativeUrl,o.renderType=o.renderType||w_(o.creativeUrl),o.option={position:"bottom-left"},"image"!==o.renderType&&o.ad.emit("error",new Error("unknown render type: "+o.creativeUrl)),i}return s()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n){n(e.loadImage(e.creativeUrl,5e3).then((function(n){e.creativeElement=n,e.size.creativeRawWidth=n.width,e.size.creativeRawHeight=n.height,t.error||t.emit("creativeLoad")})))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.log("play"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.$adzone.style.zIndex=e.creativeObject.zIndex||80,e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),ov(e.$adzone),e.$adContainer&&ov(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();n&&(t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight);var r=e.creativeObject,i=Sh.split(r.dpi,"*");r?(t.creativeWidth=r.width,t.creativeHeight=r.height,r.width===t.creativeRawWidth&&r.height===t.creativeRawHeight||e.log("实际尺寸与填写尺寸不同")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);var a=[640,100];t.boxWidth=t.videoWidth*r.maxWidthScale||a[0],t.boxHeight=t.videoHeight*r.maxHeightScale||a[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var o=yp({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});o.max&&(t.scale=o.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.creativeObject,r=e.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=t.videoWidth*n.xScale-t.computedWidth/2,c=t.videoHeight*n.yScale-t.computedHeight/2;t.x=a+s,t.y=o+c,e.log("set position size",t)}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0,e.log("on first playing");var t=e.ad;t.emit("impression"),t.remain=t.duration,e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon)}}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e}}]),n}(E_);function ov(e){e.style.display="",e.style.visibility=""}function sv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var cv=298,uv=92,dv=function(e){l()(n,e);var t=sv(n);function n(e,r){var i;a()(this,n),i=t.call(this,e,r);var o=u()(i);return o.isRatioFixed=!1,o.canExpand=!0,o.creativeUrl=o.creativeObject.imgUrl,o.renderType="viewPoint",o.creativeObject.priceText=function(e){if(e=parseFloat(e),isNaN(e))return"";return"￥"+e}(o.creativeObject.price),o.size={},o.log("render type",o.renderType,o.creativeObject,e),o.hasPlaying=!1,o.hasPutOnDoc=!1,i}return s()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n,r){if(e.isStopped)return r(new Error("has ended"));e.log("load");n(e.loadImage(e.creativeUrl,5e3).then((function(t){e.creativeElement=t,e.size.creativeRawWidth=t.width,e.size.creativeRawHeight=t.height}))),t.error||t.emit("creativeLoad")}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.isStopped)return n("ended");e.log("play"),e.tryAddStyle((function(){e.vv.sdk.viewController.renderViewPointTip(e.$adzone,e.creativeObject)})),e.addClickEvt(),e.putOnDocument(),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),lv(e.$adzone),e.$adContainer&&lv(e.$adContainer),e.resize(),e.onFirstPlaying(),t()}))}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad;t.remain=t.duration,e.log("on first playing");var n=e.vv.sdk;e.log("notify player start_viewpoint"),n.emit("adplayer_ad_info",{type:"start_viewpoint",data:{startTime:t.slot.startTime,templateType:e.type,adUid:t.id,adZoneId:t.slot.adZoneId,videoEventId:e.vv.videoEventId}}),Pp(t,"impression","viewPointTips"),"tips"==e.creativeObject.impressionArea&&e.ad.emit("impression"),e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon),1==t.targetedAd&&(e.log("precise ad and add icon"),t.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then((function(e){e.addEventListener("click",(function(){window.open("http://www.iqiyi.com/common/secret.html")}))}))),Infinity!=e.ad.duration&&e.updateCountdown()}}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=10),e!=Infinity&&(e=parseInt(e)),e}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.displayWidth=298,t.displayHeight=92,t.computedWidth=t.displayWidth,t.computedHeight=t.displayHeight,e.setPosition(),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.log("resize",t),e.detectCollision()}},{key:"setPosition",value:function(){var e,t=this,n=t.size,r=t.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=0;e=n.videoHeight-70-uv,s=40,"right"==t.creativeObject.position&&(s=n.videoWidth-s-cv),n.x=s+a,n.y=e+o}},{key:"reset",value:function(){var e=this;e.isStopped=!1,e.hasPlaying=!1,e.hasPutOnDoc=!1}},{key:"addClickEvt",value:function(){var e=this;e.clickHandler=function(t){var n=t.target;if("detial-btn"==n.getAttribute("class"))Pp(e.ad,"click","viewPointTipsDetails"),e.ad.emit("clickAndOpen",n),t.preventDefault(),t.stopPropagation();else{e.vv.exitFullscreen();var r=e.ad,i=e.vv.sdk;e.log("notify player expand_viewpoint"),i.emit("adplayer_ad_info",{type:"expand_viewpoint",data:{startTime:r.slot.startTime,templateType:r.creative.templateType,adUid:r.id,adZoneId:r.slot.adZoneId,videoEventId:e.vv.videoEventId}}),Pp(e.ad,"click","viewPointTips")}},e.$adzone&&e.$adzone.addEventListener("click",e.clickHandler)}}]),n}(E_);function lv(e){e.style.display="",e.style.visibility=""}var fv=function(){function e(t,n){a()(this,e);var r=n.vv.sdk;this.log=r.logger.getLogger("wholeCornerTimer"),this.log("init whole corner timer",n.ad),this.status=this.initStatus(t),this.timer=this.initTimer(),this.ad=n.ad,this.view=n.vv}return s()(e,[{key:"initStatus",value:function(e){return{showStatus:{duration:e.showDuration,showedSeconds:0,currentSlice:0},hideStatus:{duration:e.showInterval,hidedSeconds:0,currentSlice:0},display:!0}}},{key:"initTimer",value:function(){var e=new Vp(1e3);return e.on("timer",this.timerHandler.bind(this)),e}},{key:"timerHandler",value:function(){var e=this.status;(function(e){var t=e.display,n=e.hideStatus;return!t&&n.duration===n.hidedSeconds})(e)&&this.resetToShow(),function(e){var t=e.display,n=e.showStatus;return t&&n.duration===n.showedSeconds}(e)&&this.resetToHide(),e.display&&this.updateShowStatus(),e.display||this.updateHideStatus()}},{key:"resetToShow",value:function(){var e=this.status,t=this.timer,n=this.view.adCollisionDetection;e.display=!0,e.showStatus.currentSlice++,e.hideStatus.hidedSeconds=0,n.wholeCornerCollidedWithOriginalList()?(n.notifyWholeCornerToHide(),t.running&&t.stop(),this.log("wholecorner collisied to others while reset to show, keep hide",e)):(n.notifyWholeCornerToShow(),this.log("reset to show",e,n.wholeCornerCollidedWithOriginalList()))}},{key:"resetToHide",value:function(){var e=this.status,t=this.view.adCollisionDetection;e.display=!1,e.hideStatus.currentSlice++,e.showStatus.showedSeconds=0,t.wholeCornerCollidedWithOriginalList()?(t.notifyWholeCornerToHide(),this.log("wholecorner collisied to others while reset to hide, keep hide",e)):(t.notifyWholeCornerToHide({forceHide:!0}),this.log("reset to hide",e))}},{key:"updateShowStatus",value:function(){this.status.showStatus.showedSeconds++;var e=this.status.showStatus,t=e.showedSeconds,n=e.duration;0!=t%10&&t!=n||this.log("updating show status",t+"/"+n)}},{key:"updateHideStatus",value:function(){this.status.hideStatus.hidedSeconds++;var e=this.status.hideStatus,t=e.hidedSeconds,n=e.duration;0!=t%10&&t!=n||this.log("updating hide status",t+"/"+n)}}]),e}();function hv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}function pv(e){e.style.display="",e.style.visibility=""}var _v={roll:K_,crazy:K_,mraid:K_,common_pause:nv,definition_switching:ev,common_overlay:av,viewPoint:dv,whole_corner:function(e){l()(n,e);var t=hv(n);function n(e,r){var i;a()(this,n),i=t.call(this,e,r);var o=u()(i);return o.vv.wholeCorner=r,o.isRatioFixed=!0,o.size={},o.creativeObject=r.creative.creativeObject,o.creativeUrl=o.creativeUrl||o.creativeObject.creativeUrl,o.renderType=o.renderType||w_(o.creativeUrl),o.option={position:"bottom-left"},"image"!==o.renderType&&o.ad.emit("error",new Error("unknown render type: "+o.creativeUrl)),i}return s()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n){n(e.loadImage(e.creativeUrl,5e3).then((function(n){e.creativeElement=n,e.size.creativeRawWidth=n.width,e.size.creativeRawHeight=n.height,t.error||t.emit("creativeLoad")})))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.log("play"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.initTimerController(),pv(e.$adzone),e.$adContainer&&pv(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"pause",value:function(){this.log("pause")}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();n&&(t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight);var r=e.creativeObject,i=Sh.split(r.dpi,"*");r?(t.creativeWidth=r.width,t.creativeHeight=r.height,r.width===t.creativeRawWidth&&r.height===t.creativeRawHeight||e.log("实际尺寸与填写尺寸不同")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);var a=[640,100];t.boxWidth=t.videoWidth*r.maxWidthScale||a[0],t.boxHeight=t.videoHeight*r.maxHeightScale||a[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var o=yp({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});o.max&&(t.scale=o.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"detectCollision",value:function(){var e=this,t=e.ad,n=(e.$adzone||{}).style,r=e.vv.adCollisionDetection,i={id:t.id,x:n.left.replace("px",""),y:n.top.replace("px",""),width:n.width.replace("px",""),height:n.height.replace("px",""),willDefinitelyCollide:!0};e.wholeCornerTimerController&&(i.timer=e.wholeCornerTimerController.timer,i.timerStatus=e.wholeCornerTimerController.status),r.setWholeCorner(i),r.notifyWholeCornerToShow()}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.creativeObject,r=e.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=t.videoWidth*n.xScale-t.computedWidth/2,c=t.videoHeight*n.yScale-t.computedHeight/2;t.x=a+s,t.y=o+c,e.log("set position size",t)}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0,e.log("on first playing");var t=e.ad;t.emit("impression"),t.hasDspIcon()&&t.putIcon(t.dspIcon)}}},{key:"initTimerController",value:function(){var e=this,t=e.ad,n=t&&t.fullCorner?t.fullCorner:{};e.isInterval=!(!n.showDuration||!n.showInterval),e.isInterval&&(e.wholeCornerTimerController=new fv(n,e),e.timer=e.wholeCornerTimerController.timer,e.timer.start())}}]),n}(E_)};var vv,gv,yv={0:"page",1:"preroll",2:"midroll",3:"postroll",4:"corner",5:"mark",6:"pause",7:"toolbar",8:"viewPoint",9:"overlay",10:"common_overlay",11:"common_overlay",13:"whole_corner",15:"briefRoll"},mv={1:"PMP",2:"trueView",3:"vip",4:"origin",6:"skippable",7:"sports-vip",8:"brief",9:"brief",12:"overlay-brief",13:"brief"},bv={0:{negative:[32,128]},32:{positive:[32,128]}},kv={CODE_S_HTTP_ERROR:301,CODE_S_PARSE_ERROR:304,CODE_VIDEO_HTTP_ERROR:504,CODE_S_INVALID_PLAYER:308,CODE_S_PARAM_ERROR:305,CODE_S_COUPON_NOT_FOUND:309},xv=function(){function e(){a()(this,e)}return s()(e,[{key:"parse",value:function(e){try{e=JSON.parse(e)}catch(t){}return e}},{key:"stringify",value:function(e){try{e=JSON.stringify(e)}catch(t){}return e}},{key:"set",value:function(e,t){t=this.stringify(t);try{localStorage[e]=t}catch(n){}}},{key:"get",value:function(e){var t;try{t=localStorage[e],t=this.parse(t)}catch(n){}return t}}]),e}(),Tv=new(function(){function e(t,n){a()(this,e);var r=this;r.store=n,r.key=t,r.data=r.store.get(t)}return s()(e,[{key:"save",value:function(){this.store.set(this.key,this.data)}}]),e}())("mars",new xv);vv=Tv.data||{},gv=(new Date).getDay()!=new Date(vv.timestamp).getDay(),vv.timestamp&&!gv||(Tv.data={timestamp:(new Date).getTime(),adPlayedDurationInDay:0,videoPlayedDurationInDay:0},Tv.save()),Tv.save();var Sv=Tv;function Pv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var wv=Sh.is,Iv=function(e){l()(n,e);var t=Pv(n);function n(e,r){var i;a()(this,n),i=t.call(this,"ad");var o=u()(i);return Sh.extend(o,e),o.setParent(r),o.slot=r,o.state="idle",o.memory={},o.elements=[],o.bindEvent(),o.init(),o.setAdMap(),i}return s()(n,[{key:"init",value:function(){var e=this;e.playTimes=0,e.iesKeyReplaced={},e.id=Sh.compact(["ad",e.getVal("videoEventId"),Sh.uid(),e.comment]).join("-");var t=e.getParentByName("sdk");e.debug=t.logger.getLogger("ad:"+e.id),e.timeSlices=Sh.split(e.timeSlices,","),e.impressionTracking=e.impressionTracking||{},e.clickTracking=e.clickTracking||{},e.eventTracking=function(e){var t={};return Sh.each(e,(function(e){if(e){var n=e.event;wv.array(t[n])||(t[n]=[]),Sh.each(e.trackings,(function(e){t[n].push(e)}))}})),t}(e.eventTracking),e.creative=e.creative||{},function(e,t,n){if(t){var r=m_(t,e.debug);n("parsed vast",r,t),r.isEmpty?(n("empty vast"),e.sendThirdPartyPingback({errorCode:904,errorMessage:t})):r.error?(n("vast xml parse error",r.error),e.sendThirdPartyPingback({errorCode:903,errorMessage:t})):(function(e,t){if(e&&t){var n="${SETTLEMENT}";Sh.each("redirect clickThrough creativeUrl".split(" "),(function(r){e[r]=_p(e[r],n,t)})),e.clickTrackings=Sh.map(e.clickTrackings,(function(e){return _p(e,n,t)})),e.impressionTrackings=Sh.map(e.impressionTrackings,(function(e){return _p(e,n,t)})),Sh.mapValues(e.eventTracking,(function(e){return Sh.map(e,(function(e){return _p(e,n,t)}))}))}}(r,e.settle),r.clickThrough&&(e.clickThrough=r.clickThrough),e.dspIcon||(e.dspIcon=r.icon),e.impressionTracking.thirdPartyTracking=Sh.union(e.impressionTracking.thirdPartyTracking,r.impressionTrackings),e.clickTracking.thirdPartyTracking=Sh.union(e.clickTracking.thirdPartyTracking,r.clickTrackings),Sh.forIn(r.eventTracking,(function(t,n){e.eventTracking[n]=e.eventTracking[n]||[],e.eventTracking[n]=Sh.union(e.eventTracking[n],t)})),e.creative.creativeObject=function(e,t,n){t=t||{},"common_overlay"==e?t.creativeUrl=n.creativeUrl||t.creativeUrl:t.url=n.creativeUrl||t.url;return t}(e.creative.templateType,e.creative.creativeObject,r))}}(e,Sh.get(e,"vast.vastObject"),e.debug),e.creative.rawCreativeObject=e.creative.creativeObject,e.creative.creativeObject=function(e){var t={};return Sh.forIn(e,(function(e,n){if(wv.string(e)&&(e=Sh.trim(e)),"true"==e)e=!0;else if("false"==e)e=!1;else{var r=parseFloat(e);r==e&&(e=r)}t[n]=e})),t}(e.creative.creativeObject),e.duration=e.creative.creativeObject.duration,e.seekable=e.seekable||0,e.clickArea="",e.trueviewSource=1,e.adInfo=pp(e),this.handleAdMsm()}},{key:"handleAdMsm",value:function(){var e=this;e.macroSubstitutionMap&&Sh.forIn(e.macroSubstitutionMap,(function(t,n){t=s_.decode(t),t=encodeURIComponent(t),e.macroSubstitutionMap[n]=t}))}},{key:"bindEvent",value:function(){!function(e){e.on("video-playing",(function(){e.slot.show.request.vv.videoState="playing"})),e.on("video-play",(function(){e.slot.show.request.vv.videoState="play",e.play()})),e.on("video-loadstart",(function(){e.emit("creativeLoad")})),e.on("video-pause",(function(){e.slot.show.request.vv.videoState="paused",e.pause()})),e.on("video-willended",(function(){var t=e.template;e.debug("ad willended type and state",e.deliverName(),e.state),"skippable"==e.deliverName()&&"ended"!=e.state&&(t.showGuide=!0,t.loadGuide())})),e.on("video-ended",(function(){e.emit("complete",{type:"video-ended"})})),e.on("video-error",(function(){var t=e.getParentByName("vv"),n=t.sdk,r=e.slot.show.request;if(n.setViewController(),e.template){e.emit("error",{message:"creative http error",data:{creativeUrl:e.template.creativeUrl}});var i=t.schedule;(e==i.getCurrentAd()||t.isCurrentVV()&&0==e.index())&&e.abort()}r&&r.checkErrorCreativeUrls(e)})),e.on("click",Sh.throttle((function(){e.debug("click",e.adInfo),z_.send(e,"click"),"skippable"==e.deliverName()&&e.emit("trueview")}),500,{trailing:!1})),e.once("impression",(function(){if(!e.hasImpressed)if("ended"!=e.state||e.slot.isViewPoint()){e.debug("impression",e.creative.templateType,e.orderItemId),e.hasImpressed=!0,e.handleConflict(),e.slot.sendEmptyTrackingBeforeTimeSlice(mp(e.timeSlices)),z_.send(e,"impression");var t=e.slot.show.request;if(t.sendInventory(),Ev(e)){e.debug("roll ad start");var n=t.vv;n.onNetworkFree(),function(e){var t=1===e.slot.cuepointType,n=e.index()===e.slot.ads.length-1;return t&&n}(e)&&n.schedule&&n.schedule.requestWholeCorner(),e.emit("pingback",{subtype:"start"}),z_.send(e,"start")}}else e.debug("impression 失败, 广告已结束",e)})),e.once("trueview",(function(){e.debug("trueview",e.creative.templateType,e.orderItemId),z_.send(e,"trueview")})),e.on("skip",(function(t){e.debug("click skip");var n=t||!1;Sh.includes(["trueView","vip","sports-vip"],e.deliverName())||n?e.debug("not send skip click"):e.emit("pingback",{subtype:"skipClick"});var r=e.getParentByName("sdk");if(e.isSkippable()||n){e.debug("skip success");var i={subtype:"skip",customInfo:{ofs:e.getPlayedTime(),skt:e.getSkippedType()}};if("skippable"==e.deliverName()){var a={tag:e.getSkippedStage(),tnr:e.getSlotLength(),cor:e.getVal("order")};Sh.extend(i.customInfo,a)}if(e.emit("pingback",i),"skippable"==e.deliverName()&&e.sendPlayDurationPingback(e.getPlayedTime()),"trueView"==e.deliverName()||"skippable"==e.deliverName()){var o={fe_ofs:e.getPlayedTime(),fe_tag:e.getSkippedStage()};e.extendTrackingInfo=Oh(o,";",":"),z_.send(e,"close")}r.rollView&&r.rollView.pingback("ply_adskpd"),Sh.each(e.slot.ads,(function(e){e.skipped=!0})),e.emit("end",{type:"skip"})}else r.viewController&&r.viewController.pullCashier(e)})),e.once("creativeLoad",(function(){Sp(e,{pingbackType:"creative",subtype:"load",customInfo:Sh.get(e,"matchedVideo.definitionLevel")})})),e.on("clickAndOpen",(function(t,n){e.hasImpressed||e.slot.isViewPoint()?(e.emit("click"),e.emit("open",t,n)):e.debug("has not impressed")})),e.on("open",Sh.throttle((function(t,n){if(e.debug("open"),wv.element(t)){var r=t;t=r.getAttribute("href"),n=n||r.getAttribute("target")}t=t||M_(e),Sh.size(t)>2&&window.open(t,n||"_blank")}),500,{trailing:!1})),e.once("complete",(function(t){e.debug("complete");var n=e.getParentByName("vv");(Ev(e)&&(Sv.data.adPlayedDurationInDay+=e.duration,Sv.save()),"pause"==Av(e))?n.schedule.loadPause({from:e,requestIndex:e.slot.show.request.requestIndex+1}):e.emit("end",t)})),e.once("end",(function(t){if(t=t||{},e.debug("end by",t.type),e.state="ended",e.hasPlayed=!0,e.template){var n={};"timer-complete"==t.type&&(n.abort=!0),e.template.stop(n)}if(Dv(e)){var r=e.getParentByName("vv");Sh.remove(r.currentOverlayAds,(function(t){return e==t}))}Sh.each(e.elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),e.slot.isViewPoint()&&e.slot.hasNotifiedStart&&(e.slot.notifyPlayer("adplayer_ad_end"),e.slot.complete()),!e.slot.hasInited||e.slot.isViewPoint()||e.notAutoPlayNext||e.tryPlayNextAd(),e.slot.isWholeCorner()?Rv(e):Ov(e)})),e.on("replayComplete",(function(t){e.debug("complete replay"),Ev(e)&&(Sv.data.adPlayedDurationInDay+=e.duration,Sv.save()),e.emit("replayEnd",t)})),e.on("replayEnd",(function(t){if(t=t||{},e.debug("replay end by",t.type),e.state="ended",e.hasPlayed=!0,e.template){var n={};"timer-complete"==t.type&&(n.abort=!0),e.template.stop(n)}Sh.each(e.elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),!e.slot.hasInited||e.slot.isViewPoint()||e.notAutoPlayNext||e.tryPlayNextAd(),e.slot.isWholeCorner()?Rv(e):Ov(e)})),e.on("pingback",(function(t){var n=Sh.map(e.slot.ads,(function(e){return e.timeSlices.join("")})).join("|"),r=t.customInfo||{};r.rpt=e.playTimes-1,e.isSeekableOriginalRoll()&&Sh.includes(["1q","mid","3q","sp"],t.subtype)&&(r.sek=e.isSeeked?1:0);var i=e.slot.show.request;i.adBreak&&(t.sequenceId=i.adBreak.sequenceId),t=Sh.extend({},t,{pingbackType:"ad",orderItemId:e.orderItemId,creativeId:e.creative.creativeId,dspId:e.dspId,adStrategy:[e.slot.cuepointType,e.timeSlices.join(""),n].join(":"),customInfo:Oh(r,",",":")}),Sp(e,t)})),e.on("tracking",(function(t){t&&z_.send(e,t)})),e.on("progressReseted",(function(t,n){var r=e.template.timer;r&&(r.stop(),wv.number(t)&&!n&&(r.currentCount=t,t===e.duration?(r.emit("timerComplete"),e.debug("after ad progress reset to complete",t)):(r.start(),e.debug("after ad progress reset to",t,e.template.timer.currentCount))))})),e.on("error",(function(t){t=t||{},e.debug("error",t.message,t.data,e.adInfo),e.error=t;var n=t.message;if("creative http error"==n||"creative timeout"==n){var r=Sh.get(t,"data.creativeUrl"),i="creative timeout"==n?505:504;e.emit("creativeError",r,i)}setTimeout((function(){e.state="error"}))})),e.once("creativeError",(function(t,n){Sp(e,{pingbackType:"creative",subtype:"error",errorCode:n,errorMessage:t,requestCount:-1})})),e.on("closeViewPoint",(function(){Pp(e,"close","viewPointTips")}))}(this)}},{key:"index",value:function(){return Sh.indexOf(this.slot.ads,this)}},{key:"tryLoadToVideo",value:function(){var e=this;return e.load().then((function(){return e.isLiving((function(){return e.template.loadRollToVideo()}))}))["catch"]((function(t){var n=e.slot.show.request;n.noCreativeUrlAds&&"fail to match ad video"==t.message&&n.noCreativeUrlAds.push(t.data),e.debug("load to video fail",t)}))}},{key:"updateLoadStatusAndInitTemplate",value:function(){var e=this;return e.debug("ready to update ad load status and init template"),e.load().then((function(){return e.isLiving((function(){return e.template.bindPlayingEvt()}))}))["catch"]((function(t){e.debug("update ad load status and init template fail",t)}))}},{key:"load",value:function(){var e=this;return"ended"==e.state?Promise.reject("ended"):e.initTemplate().then((function(){return e.memory.load=e.memory.load||new Promise((function(t){e.debug("load"),e.state="loading",t(e.template.load())})),e.memory.load}))}},{key:"initTemplate",value:function(){var e=this;return e.isLiving((function(){return e.memory.initTemplate=e.memory.initTemplate||new Promise((function(t,n){e.template=function(e){var t=e.creative.templateType,n=_v[t];if(n)return new n(t,e)}(e),e.template?(e.duration=e.template.getDuration(),isNaN(e.duration)?n(new Error("invalid duration")):(e.debug("init template success"),"trueView"!=e.deliverName()&&"skippable"!=e.deliverName()||(e.impressionTime=function(e,t){var n=Sh.endsWith(e,"%"),r=parseFloat(e);n&&(e=t*r/100);e>=0&&e<=t||(e=t/2);return e=parseInt(e)}(e.impressionTime,e.duration),e.skipTime=function(e,t){(e=parseInt(e))>=0&&e<=t||(e=Math.min(5,t));return e}(e.skipTime,e.duration)),t())):(Sp(e,{pingbackType:"statistics",subtype:"unsupported"}),n(new Error("unknown template:"+e.creative.templateType)))}))["catch"]((function(t){return e.emit("error",t),Promise.reject(t)})),e.memory.initTemplate}))}},{key:"setAdMap",value:function(){this.getParentByName("sdk").adMap[this.id]=this}},{key:"getPlayedTime",value:function(){return(this.duration||0)-(this.remain||0)}},{key:"play",value:function(){var e=this;return e.isLiving((function(){return e.load()})).then((function(){return e.isLiving((function(){if("paused"==e.slot.show.request.vv.videoState&&Ev(e)&&"roll"==e.template.type)return Promise.resolve();if(e.notAutoPlayNext=!1,"paused"==e.state)return e.resume();if("playing"!=e.state||e.slot.isSeekableOriginalSlot()&&"playing"==e.state){e.playTimes++,e.state="playing";var t=e.slot.show.request;return"pause"==t.type&&t.from&&t.from.abort(),e.isConflict()?Promise.reject(new Error("conflict")):(Dv(e)&&e.getParentByName("vv").currentOverlayAds.push(e),(e.slot.isViewPoint()||e.slot.isWholeCorner())&&e.slot.notifyPlayer("adplayer_ad_start"),e.debug("ad template play",e),e.template.play())}}))}))["catch"]((function(t){if(e.error=e.error||t,e.debug("play error",e.error.message),e.error&&e.emit("end",{type:"error"}),"ended"!==e.error)return Promise.reject(t)}))}},{key:"resume",value:function(){var e=this;return e.isLiving((function(){e.debug("resume");var t=e.template;return e.state="playing",t&&wv.fn(t.resume)?t.resume():t.play()}))}},{key:"tryPlayNextAd",value:function(){var e=this,t=e.slot.ads[e.index()+1];t?t.skipped?t.tryPlayNextAd():(e.debug("play next ad"),t.play()):e.skipped||e.aborted?e.slot.end():e.slot.complete()}},{key:"abort",value:function(){if(this.aborted=!0,this.emit("end",{type:"abort"}),"common_pause"==this.creative.templateType){var e=this.getParentByName("sdk");e.rollView&&e.rollView.closeQrMask()}}},{key:"pause",value:function(){var e=this;return e.isLiving((function(){e.state="paused",e.template.pause()}))}},{key:"isLiving",value:function(e){var t,n=this;if(n.error?t=n.error:"ended"==n.state&&(t="ended"),t&&!n.canReplay())return Promise.reject(t);if(n.error)return Promise.reject(t);var r=e();return Promise.resolve(r)}},{key:"deliverName",value:function(){return mv[this.deliverType]||""}},{key:"typeName",value:function(){return Av(this)}},{key:"hasDspIcon",value:function(){return!(1!=this.isDSP||!this.dspIcon)}},{key:"putIcon",value:function(e,t){var n=this;return t=t||{},/\.qiyipic\.com/.test(e)&&(e=e.replace(/\.qiyipic\.com/,".iqiyipic.com")),gp(e).then((function(r){return n.$adzone?(n.debug("put icon",e),r.style.bottom=(t.bottom||0)+"px",r.style.left=(t.left||0)+"px",r.style.width="25px",r.style.height="25px",r.style.position="absolute",n.$adzone.appendChild(r),n.elements.push(r),r):new Error("no adzone")}))}},{key:"reset",value:function(){var e=this;e.debug("reset"),e.off(),e.bindEvent(),e.state="idle";var t=e.template;t&&t.reset&&t.reset()}},{key:"isConflict",value:function(){if(Dv(this)){var e=this.slot.show.request.vv.currentOverlayAds;if(Sh.some(e,(function(e){return e.slot.isViewPoint()})))return!0}return!1}},{key:"handleConflict",value:function(){var e=this,t=e.slot.show.request,n=t.vv.currentOverlayAds;"pause"!=t.type&&"midroll"!=t.type||Sh.each(n,(function(e){var n=e.$adzone;n&&(n.style.display="none"),"midroll"==t.type&&e.pause()}));var r=Sh.filter(n,(function(t){if(e!=t){if(e.slot.adZoneId==t.slot.adZoneId)return!0;if(e.slot.isViewPoint())return!0}return!1}));Sh.each(r,(function(t){e.debug("same adzone conflict",e.orderItemId,"kill",t.orderItemId),t.abort()}))}},{key:"isSkippable",value:function(){return!!Sh.includes(["trueView","vip","sports-vip"],this.deliverName())||function(e){var t=e.getParentByName("vv"),n=t.sdk;if(!n.isVIP)return!1;if("tw"===n.locale&&n.isVIP)return!0;var r=t.videoInfo.videoType||0,i=n.vipCheckResult.userVipType||0,a=bv[r];if(!a)return!0;if(Sh.has(a,"positive"))return function(e,t){return qv(e,t)>0}(a.positive,i);if(Sh.has(a,"negative"))return!function(e,t){return qv(e,t)===t}(a.negative,i)}(this)}},{key:"getSkippedType",value:function(){return{2:1,3:2,6:4,7:5}[this.deliverType]}},{key:"resize",value:function(){var e=this;return e.isLiving((function(){"paused"!=e.state&&"playing"!=e.state||e.template.resize()}))}},{key:"isSeekableOriginalRoll",value:function(){return"origin"==this.deliverName()&&Boolean(this.seekable)||15==this.slot.cuepointType}},{key:"canReplay",value:function(){return this.slot.isSeekableOriginalSlot()}},{key:"sendThirdPartyPingback",value:function(e){Sp(this,Sh.extend({pingbackType:"statistics",subtype:"tps"},e))}},{key:"getSkippedStage",value:function(){return this.remain<=0?2:1}},{key:"getSlotLength",value:function(){return this.slot.ads.length}},{key:"sendPlayDurationPingback",value:function(e){Pp(this,"vpd","pt:0,pc:1,pd:"+e+",pg:"+e)}}]),n}(Ih);function Av(e){var t=e.slot.cuepointType||-1;return yv[t]||t}function Ev(e){return Sh.includes([1,2,3,15],e.slot.cuepointType)}function Dv(e){return Sh.includes([8,10,11],e.slot.cuepointType)}function qv(e,t){return Array.isArray(e)?"number"!=typeof t?0:Sh.sum(e)&t:0}function Ov(e){var t=e.slot,n=e.getParentByName("vv").adCollisionDetection;t.isWholeCorner()||(n.removeAd(e.id),e.debug("wholecorner isvalid",n.wholeCornerIsValid(),";wholecorner status",n.getWholeCorner().showing),n.notifyWholeCornerToShow())}function Rv(e){var t=e.getParentByName("vv").adCollisionDetection;t.setWholeCorner({}),t.notifyWholeCornerToHide()}function Lv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Cv=Sh.is,Mv=function(e){l()(n,e);var t=Lv(n);function n(e,r,i){var o;a()(this,n),o=t.call(this,"slot");var s=u()(o);return s.setParent(i),Sh.extend(s,e),s.show=r,s.state="idle",s.id=Sh.uid(),s.debug=i.vv.sdk.logger.getLogger("slot"),s.hasNotifiedStart=!1,s.hasInited=!0,s.hasRequestedVipDoc=!1,s.skipAdParams={},s.parseAd(),s.hasSkippableAdInSlot=s.hasSkippableAdInSlots(),o}return s()(n,[{key:"parseAd",value:function(){var e=this;this.ads=this.ads.map((function(t){return new Iv(t,e)}))}},{key:"play",value:function(){var e=this;if(1===e.cuepointType&&e.initSlotInfo(),Cv.empty(e.ads))0xe8d4a512a0!=e.adZoneId&&e.complete();else{var t=e.ads[0];t&&(e.notifyPlayer("adplayer_ad_start"),e.state="playing",t.play())}}},{key:"abort",value:function(){var e=this;"ended"!=e.state&&(e.debug("abort"),Sh.each(e.ads,(function(e){e.abort()})),e.end())}},{key:"hasImpressed",value:function(){return Sh.some(this.ads,(function(e){return e.hasImpressed}))}},{key:"tryLoadToVideo",value:function(){return Sh.reduce(this.ads,(function(e,t){return e.then((function(){return t.tryLoadToVideo()}))}),Promise.resolve())}},{key:"loadAllAdsToVideo",value:function(){var e=this;return e.debug("slot loadAllAdsToVideo",e),Promise.all(Sh.map(e.ads,(function(e){return e.updateLoadStatusAndInitTemplate()}))).then((function(){var t=Sh.map(e.ads,(function(t){var n={file:t.template.creativeUrl,id:t.id,type:t.typeName(),seekable:Boolean(t.seekable)||15==t.slot.cuepointType,offset:parseInt(t.slot.startTime),videoEventId:e.request.vv.videoEventId,duration:t.duration,mvst:t.slot.makeVersionStartTime||""};return n.file=n.file.replace(/\.qiyi\.com/,".iqiyi.com"),n.file=n.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.debug("video load",n,n.videoEventId,t.slot.startTime,t.slot.makeVersionStartTime),n}));e.debug("video load all Ads",t),e.request.vv.mw.load(t)}))}},{key:"complete",value:function(){var e=this;if(e.debug("slot complete",e.state),e.sendEmptyTrackingBeforeTimeSlice(Infinity),2==e.cuepointType&&e.hasImpressed()){var t=e.request.adBreak;t&&!t.hasMidrollPlayed&&(t.hasMidrollPlayed=!0,e.request.vv.midrollPointsPlayedInView++)}e.isSeekableOriginalSlot()&&Sh.map(e.ads,(function(e){"ended"!==e.state&&e.emit("replayComplete",{type:"timer-complete"})})),e.end()}},{key:"isViewPoint",value:function(){return Sh.includes([8],this.cuepointType)}},{key:"isWholeCorner",value:function(){return Sh.includes([13],this.cuepointType)}},{key:"isSeekableOriginalSlot",value:function(){var e=Sh.includes([2],this.cuepointType),t=this.ads||[],n=Sh.every(t,(function(e){return"origin"==e.deliverName()&&Boolean(e.seekable)}));return e&&n&&t.length>1}},{key:"index",value:function(){return Sh.indexOf(this.request.slots,this)}},{key:"end",value:function(){var e=this;(e.hasNotifiedStart&&e.notifyPlayer("adplayer_ad_end"),Sh.includes([1,2,3],e.cuepointType))&&(e.request.vv.lastRollCompleteTime=Date.now());if("preroll"==e.request.type)return e.state="ended",e.debug("preroll slot ended"),1!=e.cuepointType||Cv.empty(e.ads)||e.request.vv.startVideo("preroll"),void e.playNextSlot();"ended"==e.state||e.isViewPoint()||(e.state="ended",e.debug("slot ended"),e.request.end())}},{key:"playNextSlot",value:function(){var e=this,t=e.request.slots[e.index()+1];t?Cv.empty(t.ads)?t.end():t.play():15==e.cuepointType?e.request.end("briefRoll"):e.request.end()}},{key:"reset",value:function(){this.state="idle",Sh.each(this.ads,(function(e){e.reset()}))}},{key:"sendEmptyTrackingBeforeTimeSlice",value:function(e){var t=this,n=t.emptyTracking||{};isNaN(e)||Sh.remove(n.timeSlices,(function(r){var i=mp(r.w);if(!isNaN(i)&&i<=e){t.debug("send empty tracking before",e,t.adZoneId);var a=Sh.extend({},r,n.trackingParam);return W_.send({},a,t,"cupid","impression"),!0}}))}},{key:"notifyPlayer",value:function(e){var t=this,n=t.getParentByName("sdk"),r={ctp:t.cuepointType,id:t.id};t.cuepointType>=1&&(t.hasNotifiedStart=!("adplayer_ad_start"!=e),t.debug("slot notifyPlayer:",e,r),n.emit(e,r))}},{key:"initSlotInfo",value:function(){var e=this.request;e.blackscreenDuration=this.countRollDuration(),e.noCreativeUrlAds=[],e.errCreativeUrlAds=[]}},{key:"countRollDuration",value:function(){var e=this;if(!e)return 0;if(Cv.empty(e.ads))return 0;var t=e.ads;return Sh.reduce(t,(function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}},{key:"hasSkippableAdInSlots",value:function(){var e=this.ads;return Sh.some(e,(function(e){return"skippable"==e.deliverName()}))}},{key:"calcRollDurationBefore",value:function(e){if(!this)return 0;var t=this.ads;if(Cv.empty(t))return 0;var n=e.index(),r=Sh.slice(t,0,n);return Cv.empty(r)?0:Sh.reduce(r,(function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}}]),n}(Ih);function Nv(){return function(){if(!dp())return!0;var e=Fv();return!e||!1!==e.upd}()?0:1}function Bv(e){"preroll"!=e.type||function(){var e=Fv();if(!e)return!1;var t=e.ct||0;return(new Date).getTime()-t<864e5}()||setTimeout(Uv,0)}function Fv(){var e=lp("QC175");if(!e)return!1;try{e=JSON.parse(e)}catch(t){return console.log("parse qc175 error",t),!1}return e}function Uv(){var e=dp();if(e){var t="https://userpref.iqiyi.com/apis/userpref/list.action?"+Oh({authcookie:e,props:"upd",agentType:1});cp({url:t,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,success:function(e,t){var n=e||{};if("success"==t&&"A00000"==n.code){var r={upd:"1"!==((n.data||{}).upd||{}).value,ct:(new Date).getTime()};fp("QC175",JSON.stringify(r),{path:"/",domain:"iqiyi.com"})}}})}}var jv=Sh.is,Vv=function(){function e(t){a()(this,e),this.requestCount=0,this.max=2,this.request=t,this.param={},this.debug=t.vv.sdk.logger.getLogger("show"),this.encryptionParam=this.param.encryption={}}return s()(e,[{key:"load",value:function(){return this.setParam().normalizeRequestParam().compressParamKey().encryptShowParam().getUrl().sendRequest()}},{key:"addEncryptionParam",value:function(e){Sh.extend(this.encryptionParam,e)}},{key:"addParam",value:function(e){Sh.extend(this.param,e)}},{key:"setParam",value:function(){var e=this.request,t=e.vv.sdk,n=e.vv;t.updateUser(n),this.addParam(Sh.extend({timestamp:Date.now(),requestId:e.requestId},e.getMultiVals(["adPlayerId","uaaUserId","passportId","requestId"])));var r=Qp(window.document.referrer||"")||{},i=function(){var e=window.location.href,t="";try{t=decodeURIComponent(e)}catch(n){}return t=(t=t.split("?")[0].split("#")[0]).replace(/[\u200B-\u200D\uFEFF]/g,"")}(),a=Sh.extend({referrer:r.host,needPolicy:e.needPolicy,url:i.replace(/^https:/,"http:"),ptid:t.ptid||"",vft:e.vft,timePoint:t.timePoint,usePartnerData:Nv(),cuepointList:e.cuepointList,supportIQiyiTracking:!0,supportEmptyTracking:!0,encryptionVersion:""},e.getMultiVals("episodeId albumId videoDuration isVIP isPreload clientVersion sdkVersion searchQuery passportCookie requestIndex vvId pauseRequestTimes prerollOrderItemIds playSource".split(" ")));"preroll"==e.type&&!n.isPreload&&"iqiyiw"==t.site&&!n.isAutoMapPlayerId&&n.couponCode&&n.couponVer&&i&&1==t.vvCnt&&(a=Sh.extend(a,e.getMultiVals("couponCode couponVer".split(" "))));var o=bp();o&&(a=Sh.extend(a,{idx:o.idx})),this.addEncryptionParam(a);var s=n.getContinuingVVs(),c={continuingVideoPlayedCount:s.length,continuingVideoPlayedDuration:Sh.sumBy(s,"videoDuration"),continuingAdPlayedDuration:Sh.sumBy(s.concat(n),"adPlayedDurationInView")};this.addEncryptionParam(c);var u={adPlayedDurationInDay:Sv.data.adPlayedDurationInDay},d=n.mw.videoPlayedDurationInDay();return d&&(d=parseInt(d)),u.videoPlayedDurationInDay=d||0,"midroll"==e.type&&(u.midrollPointsPlayedInView=n.midrollPointsPlayedInView,u.lastMidrollRequestTime=n.lastMidrollRequestTime,n.lastRollCompleteTime&&(u.lastRollCompleteInterval=Math.round((Date.now()-n.lastRollCompleteTime)/1e3))),this.addEncryptionParam(u),this}},{key:"normalizeRequestParam",value:function(){var e=this;return Sh.each(["needPolicy","supportIQiyiTracking","supportEmptyTracking","isVIP","isPreload"],(function(t){var n=e.encryptionParam[t];jv.bool(n)&&(n=n?1:0),e.encryptionParam[t]=n})),e}},{key:"compressParamKey",value:function(){var e=this;return e.debug("request param",e.param),e.compressedParam=Lh(Kp)(e.param),e.debug("compressed request param",Sh.extend({},e.compressedParam)),e.compressedParam.e.q=e.compressedParam.e.q.map((function(e){return Oh(e,",",":")})).join(";"),e}},{key:"encryptShowParam",value:function(){var e=this.request.getVal("adPlayerId"),t=Oh(this.compressedParam.e,"&","=",{keepRaw:!0});if(e&&t){var n;try{n=p_.encryptBySeed(t,e)}catch(r){console.error("encrypt error",t,e),n=""}this.compressedParam.e=n}return this}},{key:"getUrl",value:function(){var e="/show2",t=this.compressedParam,n=this.previewParam=function(){var e=Qp(window.location.href,!0).query,t="w y z".split(" "),n=Sh.only(e,t);if(Sh.keys(n).length==t.length)return n}();return n&&(this.debug("preview mode",n),e="/preview3",t=Sh.extend({},n,t)),this.url="https://t7z.cupid.iqiyi.com"+e+"?"+Oh(t),this.debug("show url",this.url),this}},{key:"sendRequest",value:function(){var e=this,t=Date.now();return new Promise((function(n){cp({url:e.url,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,checkParserError:!0,success:function(e,r){n({textStatus:r,data:e,duration:{start:t,end:Date.now()}})},error:function(r,i){n({textStatus:i,data:r,duration:{start:t,end:Date.now()}}),e.debug("error status:",r,i)},complete:function(r,i){"timeout"==i&&n({textStatus:i,duration:{start:t,end:Date.now()}}),e.debug("show complete",Date.now()-t,i)}})})).then((function(t){return e.onComplete(t)}))}},{key:"onComplete",value:function(e){this.debug("status:",e.textStatus,e.duration);var t=this,n=t.request.vv.sdk;"preroll"==t.request.type&&(n.showTime=e.duration),t.requestCount++;var r={pingbackType:"show",requestDuration:e.duration.end-e.duration.start};if("success"!=e.textStatus){var i={timeout:302,parsererror:304,error:301};return r.errorCode=i[e.textStatus]||301,t.requestCount<t.max?(r.requestCount=t.requestCount,r.subtype="error",Sp(t.request,r),t.debug("show request retry",t.requestCount),t.sendRequest()):(r.requestCount=-1,r.subtype="error",Sp(t.request,r),t.debug("request retry use up"),{error:e.textStatus,errorCode:i[e.textStatus]||301})}return t.debug("response",e.data),r.requestCount=-1,t.parsedShow=function(e,t,n){var r;try{r=p_.decryptShowResponse(t.url,e)}catch(l){r=e}var i=__(r),a=t.request,o=Sh.extend({},i);if(t.debug("humanize response",o),i.pingbackParam&&(a.pingbackParam=i.pingbackParam),i.request=a,i.errorCode){n.subtype="error",n.errorCode={302400:305,302500:306,302503:307,302600:308}[i.errorCode],n.errorMessage=i.serverError;var s=1==(i.slots&&i.slots[0]||{}).cuepointType;if(305===n.errorCode||308===n.errorCode&&"preroll"==a.type&&s){if(Sp(a,n),305===n.errorCode)return{error:"paramerror",data:i};if(308===n.errorCode)return{error:"invalidplayer",data:i}}}else{n.subtype="success";var c=a.vv.sdk,u=a.vv;if(i.cupidUserId&&(c.cupidUserId=i.cupidUserId),i.serverTime&&(a.deltaTime=t.deltaTime=i.serverTime-Date.now()),i.pingbackConfig&&(a.pingbackConfig=i.pingbackConfig),i.clientIP){var d=s_.atob(i.clientIP);c.userIP=d}c.isVIP=c.getUser().isVIP,i.videoInfo&&(u.disableSkipAd=i.videoInfo.disableSkipAd,u.videoInfo=i.videoInfo,Sh.extend(u,i.videoInfo)),i.vipCheckConflict&&(c.isVIP=1==i.vipCheckConflict.isVIP),c.vipCheckResult=i.vipCheckResult||{}}return i.slots=i.slots.map((function(e){return new Mv(e,i,a)})),a.slots=i.slots,Sp(a,n),i}(e.data,t,r),Bv(t.request),t.parsedShow}}]),e}();function Hv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Wv=Sh.is,zv="requestId adBreak cuepointList needPolicy requestIndex from type vft".split(" "),Yv=function(e){l()(n,e);var t=Hv(n);function n(e,r){var i;return a()(this,n),i=t.call(this,"request"),u()(i).setParent(r),i.state="idle",i.debug=r.sdk.logger.getLogger("request"),i.type=e.type,i.init(e),i}return s()(n,[{key:"init",value:function(e){Sh.extend(this,Sh.only(e,zv));var t=e.requestId||function(e){var t=[e.vv.vvId,Date.now()];return Fp(t.join(""))}(this);this.id=this.requestId=t}},{key:"load",value:function(){var e=this;if("ended"!=e.state)return e.memoryLoad=e.memoryLoad||new Promise((function(t,n){e.state="loading",(e.show=new Vv(e)).load().then((function(n){Wv.empty(n.policySlots)||e.vv.schedule.setPolicy(n.policySlots);var r=e.vv.sdk;if(e.isRoll()){var i;r.requestEndTime=r.loadStartTime=Date.now();var a=e.getSlotByCpt(n.slots,15);if("preroll"==e.type?(i=e.getSlotByCpt(n.slots,1),a&&e.vv.schedule.completeBriefRoll(a)):"midroll"==e.type&&(i=n.slots&&n.slots[0]),i&&!Wv.empty(i.ads)){if("preroll"==e.type){var o=[];Sh.each(i.ads,(function(e){o.push(e.orderItemId)})),e.vv.prerollOrderItemIds=o.join(",")}"mraid"==i.ads[0].creative.templateType&&(r.setViewController(),e.debug("mraid and request vc")),i.isSeekableOriginalSlot()?i.loadAllAdsToVideo().then((function(){e.vv.startLoadVideo({reason:"load complete",rollType:e.type})})):i.tryLoadToVideo(r).then((function(){1===i.cuepointType&&e.checkEmptyCreativeUrls(i),e.loadBriefRoll(a,{reason:"load complete",rollType:e.type})}))["catch"]((function(){r.loadEndTime=r.loadEndTime||Date.now(),e.loadBriefRoll(a,{reason:"load fail",rollType:e.type})})),"midroll"==e.type&&(e.vv.lastMidrollRequestTime=i.startTime,e.vv.schedule.bindVideoTimeEvt(i.startTime-5,(function(){r.setViewController((function(){r.rollView&&r.rollView.startMidrollTip()}))})))}else e.checkCoupon(),r.loadEndTime=Date.now(),e.loadBriefRoll(a,{reason:"noad",rollType:e.type})}if(e.isWholeCorner()&&e.vv.schedule.initWholeCorner(n.slots),!Wv.empty(n.conf)){var s=n.conf||{};r.reqMiaozhenTime=s.reqMiaozhenTime||0,r.miaozhenJsonPUrl=s.miaozhenJsonPUrl||"",e.debug("reqMiaozhenTime: ",r.reqMiaozhenTime,", miaozhenJsonPUrl: ",r.miaozhenJsonPUrl)}r.cupidServerTimeGap=n.serverTime-Date.now(),e.debug("cupidServerTimeGap: ",r.cupidServerTimeGap),t(n)}))["catch"]((function(t){e.debug("show error",t),e.end(),n(t)}))})),e.memoryLoad}},{key:"loadBriefRoll",value:function(e,t){var n=this,r=n.vv.sdk;e&&!Wv.empty(e.ads)?e.tryLoadToVideo(r).then((function(){n.vv.startLoadVideo({reason:"load complete",rollType:"briefRoll"}),"preroll"==n.type&&n.vv.startLoadVideo(t)}))["catch"]((function(){n.vv.startLoadVideo({reason:"load fail",rollType:"briefRoll"}),"preroll"==n.type&&n.vv.startLoadVideo(t)})):("preroll"==n.type&&n.vv.startLoadVideo({reason:"noad",rollType:"briefRoll"}),n.vv.startLoadVideo(t))}},{key:"play",value:function(){var e=this;"ended"!=e.state&&e.load().then((function(t){if("ended"!=e.state){if(t.error)return e.showErrorHandler(t),void e.end();if(t)if(e.trySendInventoryDirectly(t.slots),"secondary"==e.type){var n=[];Sh.each(t.slots,(function(t){8==t.cuepointType?n.push(t):(e.debug("slot cpt",t.cuepointType),t.play())})),n.length>0&&e.vv.schedule.initViewPoint(n)}else{var r=t.slots[0];e.state="playing",r?r.play():e.end()}else e.end()}}))["catch"]((function(t){e.debug("error",t)}))}},{key:"showErrorHandler",value:function(e){var t={paramerror:305,invalidplayer:308,parsererror:304,error:301}[e.error]||301;this.pullAdblockBlackScreen(this,{errorCode:t,errorMessage:e.error,requestCount:this.show.requestCount,cupidUserId:e&&e.data&&e.data.cupidUserId})}},{key:"end",value:function(e){var t=this;t.state="ended",t.sendInventory(),t.isRoll()&&"ended"!=t.vv.state&&t.vv.startVideo(e||t.type)}},{key:"isRoll",value:function(){return"preroll"==this.type||"midroll"==this.type||"briefRoll"==this.type}},{key:"isWholeCorner",value:function(){return"whole_corner"==this.type}},{key:"abort",value:function(){var e=this;if(e.show&&e.show.ajax&&e.show.ajax.abort(),e.slots){var t=e.slots;Sh.each(t,(function(e){e.abort()}))}e.end()}},{key:"reset",value:function(){Sh.each(this.slots,(function(e){e.reset()}))}},{key:"trySendInventoryDirectly",value:function(e){(Wv.empty(e)||"secondary"==this.type)&&this.sendInventory()}},{key:"sendInventory",value:function(){var e=this;if(!e.inventorySent)if(e.inventorySent=!0,e.show&&e.show.parsedShow&&e.show.parsedShow.inventory){e.debug("send inventory");var t=Sh.only(e.show.parsedShow.inventory,"originalInventory rawInventory deliveredInventory forbiddenInventory");Sp(e,Sh.extend({pingbackType:"inventory",subtype:"success"},t))}else e.debug("no data to send inventory")}},{key:"pullAdblockBlackScreen",value:function(e,t){var n=this,r=n.vv.sdk;if(!r.isPreload&&(!r.isVIP&&("iqiyiw"==r.site||"ppsw"==r.site))){var i=t.errorCode;!i||-1==Sh.values(kv).indexOf(i)||(r.emit("adplayer_ad_block",{videoEventId:n.vv.getVal("videoEventId")}),n.debug("notify player adblock"),r.setViewController((function(){r.viewController?r.viewController.blackscreen.triggerAdblockCBK(e):(n.debug("pull min adblock"),r.adblocCBK||(r.adblocCBK=new Wp(r)),r.adblocCBK.triggerCBK(e),t&&(t.customInfo="mars_view")),t&&(t.pingbackType="statistics",t.subtype="adblock",Sp(e,t))})))}}},{key:"checkEmptyCreativeUrls",value:function(e){var t=this,n=t.show;t.noCreativeUrlAds.length==e.ads.length&&this.pullAdblockBlackScreen(t,{errorCode:kv.CODE_VIDEO_HTTP_ERROR,errorMessage:"creativeUrl is missing",requestCount:n.requestCount})}},{key:"checkErrorCreativeUrls",value:function(e){var t=this;t.errCreativeUrlAds&&(t.errCreativeUrlAds.push(e),t.errCreativeUrlAds.length==e.slot.ads.length&&this.pullAdblockBlackScreen(e,{errorCode:kv.CODE_VIDEO_HTTP_ERROR,errorMessage:"video-error"}))}},{key:"checkCoupon",value:function(){var e=this.vv,t=e.sdk,n=window.location.pathname,r=window.location.search,i="iqiyiw"===t.site&&Sh.startsWith(n,"/v_")&&!Sh.includes(r,"list=");e.isPreload||e.couponCode&&e.couponVer||!i||1!=t.vvCnt||this.pullAdblockBlackScreen(this,{errorCode:kv.CODE_S_COUPON_NOT_FOUND,errorMessage:"noad"})}},{key:"getSlotByCpt",value:function(e,t){return Sh.find(e,(function(e){return e.cuepointType==t}))}}]),n}(Ih);var Gv=Sh.is,Qv=function(){function e(t){a()(this,e),t=t||{};var n=this;n.startTime=t.startTime,n.cuepointType=t.cuepointType,n.adZoneId=t.adZoneId,n.sequenceId=t.sequenceId,n.adZoneStyle=t.adZoneStyle,n.state=null,n.request=null,n.hasLoaded=t.hasLoaded||!1,n.ad=t.ad||null,n.slot=t.slot||null,n.priority=0,2==n.cuepointType?n.priority=10:8==n.cuepointType&&(n.priority=9)}return s()(e,[{key:"addInfo",value:function(e){e=e||{};this.slot=e.slot||null}},{key:"isMid",value:function(){return!!(Sh.includes([2,10,11,13,15],this.cuepointType)&&this.startTime>0)}},{key:"isOverlay",value:function(){return!!Sh.includes([8,10,11],this.cuepointType)}},{key:"isValid",value:function(){return Gv.number(this.startTime)&&Gv.number(this.cuepointType)}},{key:"isLoaded",value:function(){return!!(this.request||this.ad||8==this.cuepointType||13==this.cuepointType||this.hasLoaded)}},{key:"refresh",value:function(){this.request=null,this.hasPlayed=!1,this.hasLoaded=!1}},{key:"canLoad",value:function(e){return e>=this.startTime-10&&e<=this.startTime}},{key:"abort",value:function(){this.request?this.request.abort():this.ad&&this.ad.abort()}}]),e}(),Kv=Sh.is;function $v(e){e&&e.sort((function(e,t){var n=e.cuepointType-t.cuepointType;return 0==n&&(n=e.startTime-t.startTime),n}))}function Zv(e){var t=Sh.filter(e,(function(e){return!Xv(e)})),n=Sh.map(t,(function(e){return e.priority})),r=Sh.max(n);return e=Sh.filter(e,(function(e){return!(r!=e.priority&&!Xv(e)&&13!==e.cuepointType)||(e.state="banned",!1)}))}function Xv(e){if(8!==e.cuepointType)return!1;var t=e.slot||{};return Kv.empty(t.ads)}function Jv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var eg=Sh.is,tg=function(e){l()(n,e);var t=Jv(n);function n(e){var r;a()(this,n),r=t.call(this);var i=u()(r);return i.vv=e,i.videoEventId=e.videoEventId,i.mw=i.vv.mw,i.bindMwEvent(),i.log=e.sdk.logger.getLogger("schedule:"+e.videoEventId),i.adBreaks=[],i.allAdBreaks=[],i.midrollPoints={},i.currentAdId=null,i.hasBindSeeked=!1,i.enabled=!0,i.running=!1,i.init(),r}return s()(n,[{key:"init",value:function(){var e=this;e.binVideoEvent(),e.fetchAndPlayPreroll(),e.log("schedule inited")}},{key:"bindMwEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked loadstart afterSeeked pausetoplay".split(" "),t=this;t.handleMwEvt=function(e){var n=e.type,r=Sh.includes(["play","playing","timeupdate"],n),i=e.gas||{};if(t.enabled||("error"==n||"loadstart"==n)&&i.id){var a=i.id;if(i.videoEventId!==t.videoEventId)return;if(r){var o=t.vv.sdk;t.loadedVC||(t.loadedVC=!0,o.setViewController(),t.vv.onNetworkFree())}if(t.emit(n,e),a){var s=t.vv.sdk.adMap[a];if(s)return(r||"seeked"===n&&s.slot.isSeekableOriginalSlot())&&t.setCurrentAd(a,s,e),t.stopTimer(),void t.emitToAd(s,"video-"+n,e);t.log("error!, fail to find ad",i),t.mw.abort()}else t.startTimer();t.removeCurrentAd()}else t.mw.pause()},e.forEach((function(e){t.mw.on(e,t.handleMwEvt)}))}},{key:"binVideoEvent",value:function(){var e=this;e.timerHandler=function(t){e.currentTime=Math.round(e.mw.currentTime());var n=Sh.get(t,"data.actionType"),r=Sh.get(t,"data");if("seeked"==t.type&&(e.log("seeked",e.currentTime,n),"controls"==n&&(e.onUserSeeked(r),e.disableAutoChooseMidroll("用户 seek"))),"afterSeeked"==t.type&&(e.log("after seeked",e.currentTime,n),"controls"==n&&e.afterUserSeeked(r)),null==e.lastTime){var i=Sh.get(e,"midrollPoints.nextMidroll");i>0&&i<e.currentTime&&e.disableAutoChooseMidroll("开播时间晚于自动中插点")}if(e.lastTime!=e.currentTime&&e.updateVideoTime(t),!(e.vv.ipdxReqErrCount>2)){var a=e.vv.sdk.reqMiaozhenTime;if(eg.number(a)&&a>0){var o=bp(),s=e.vv.sdk.cupidServerTimeGap?e.vv.sdk.cupidServerTimeGap+Date.now():Date.now(),c=o&&1e3*+o.exptime-s<3e5;if(!o||c){var u=e.currentTime>a,d=e.vv.sdk.isWaitingIpdxResponse;u&&!d&&(e.log("isIpdxOverdue:",c,"ipdxInfo:",o),e.log("hasReachReqMiaozhenTime: ",u,"isWaitingIpdxResponse:",d),function(e){var t=e.sdk.miaozhenJsonPUrl;if(t){var n={pingbackType:"ipdx",subtype:"error",errorMessage:t};e.sdk.isWaitingIpdxResponse=!0;var r=!1;cp({url:t,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,checkParserError:!0,success:function(t,r){var i=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();if("success"==r){var a=t;a&&a.ip&&a.geocode&&a.exptime?i>new Date(1e3*+a.exptime-3e5).getTime()?(e.ipdxReqErrCount++,Sp(e,Sh.extend(n,{errorCode:1905,customeInfo:Oh({rsp:a,crt:i},",",":")}))):(fp("idx",JSON.stringify(a),{expires:new Date(Date.now()+31536e6)}),Sp(e,{pingbackType:"ipdx",subtype:"success",customInfo:Oh({rsp:a,crt:i},",",":")})):a&&-1==a.code?(e.ipdxReqErrCount++,Sp(e,Sh.extend(n,{errorCode:1904,customeInfo:Oh({rsp:a,crt:i},",",":")}))):(e.ipdxReqErrCount++,Sp(e,Sh.extend(n,{errorCode:1906,customeInfo:Oh({rsp:a,crt:i},",",":")})))}e.sdk.isWaitingIpdxResponse=!1},error:function(t,i){var a=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();e.ipdxReqErrCount++,r=!0,Sp(e,"parsererror"===i?Sh.extend(n,{errorCode:1903,customeInfo:Oh({crt:a},",",":")}):Sh.extend(n,{errorCode:1901,customeInfo:Oh({crt:a},",",":")})),e.sdk.isWaitingIpdxResponse=!1},complete:function(t,i){if("timeout"===i&&!r){var a=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();e.ipdxReqErrCount++,Sp(e,Sh.extend(n,{errorCode:1902,customeInfo:Oh({crt:a},",",":")})),e.sdk.isWaitingIpdxResponse=!1}}})}else e.ipdxReqErrCount++}(e.vv))}}}},e.playHandler=function(){if(e.running){var t=e.mw.currentTime();e.log("video play",t),e.tryToStopPause();var n=e.midrollPoints;if(n&&n.autoChoose){var r=n.nextMidrollPoint;-1!=r&&r<t&&e.disableAutoChooseMidroll("自动中插点在当前时间前面")}null==e.getCurrentAd()&&e.showAndResume()}},e.pauseHandler=function(t){var n=Sh.get(t,"data.actionType");(e.log("pause",n),"controls"==n)&&(e.mw.currentTime()&&e.running&&(e.vv.pauseTimes++,e.loadPause(),e.pauseOtherAd()))},e.bindAudioEvt()}},{key:"unbindMWEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked afterSeeked loadstart pausetoplay".split(" "),t=this;e.forEach((function(e){t.mw.off(e,t.handleMwEvt)})),t.off()}},{key:"bindAfterSeekedEvt",value:function(){var e=this;e.hasBindSeeked||(e.hasBindSeeked=!0,e.on("afterSeeked",e.timerHandler))}},{key:"loadPause",value:function(e){var t=this,n=t.getAdBreaksByType(6);(n=Sh.map(n,(function(e){return Sh.extend({},e,{sequenceId:t.vv.pauseTimes,startTime:t.currentTime})})),eg.empty(n))?t.log("no pause schedule"):(t.log("load pause"),(e=e||{}).requestIndex=e.requestIndex||1,t.vv.pauseRequestTimes++,t.newAdRequest({adBreak:n[0],requestIndex:e.requestIndex,cuepointList:n,needPolicy:!1,from:e.from,type:"pause"},t.vv).play())}},{key:"tryToStopPause",value:function(){Sh.remove(this.vv.requests,(function(e){if("pause"==e.type)return e.abort(),!0}))}},{key:"pauseOtherAd",value:function(){Sh.each(this.vv.requests,(function(e){Sh.each(e.slots,(function(e){Sh.each(e.ads,(function(e){Sh.includes(["playing","paused"],e.state)&&e.pause()}))}))}))}},{key:"showAndResume",value:function(){var e=this;Sh.each(e.vv.requests,(function(e){Sh.each(e.slots,(function(e){Sh.each(e.ads,(function(e){Sh.includes(["playing","paused"],e.state)&&e.resume()}))}))})),Sh.each(e.vv.currentOverlayAds,(function(t){e.log("show and resume current overlay",t.creative.templateType,t.orderItemId);var n=t.$adzone;n&&(n.style.display="",n.style.visibility="")}))}},{key:"emitToAd",value:function(e,t,n){e&&(/timeupdate/.test(t)||(this.log("emit",t,e.id),e.emit(t,n)))}},{key:"setCurrentAd",value:function(e,t){var n=this;t=t||{},n.lastNotNullAdId=n.currentAdId?n.currentAdId:n.lastNotNullAdId,n.lastAdId=n.currentAdId,n.currentAdId=e,n.lastAdId!=n.currentAdId&&n.log("current roll changed ",n.lastAdId," => ",n.currentAdId,t.type)}},{key:"getCurrentAd",value:function(){var e=this,t=e.vv.sdk;return e.currentAdId?t.adMap[e.currentAdId]:null}},{key:"removeCurrentAd",value:function(){this.setCurrentAd(null,{type:"remove"})}},{key:"fetchAndPlayPreroll",value:function(){var e=this;e.vv.sdk.initEndTime=e.vv.sdk.requestStartTime=Date.now();var t=e.newAdRequest({needPolicy:!0,cuepointList:[{cuepointType:1},{cuepointType:15}],type:"preroll",vft:e.vv.isPreload?"13":""},e.vv);e.vv.isPreload||t.play()}},{key:"requestSecondaryAd",value:function(){var e=this,t=e.vv.sdk;e.log("try load viewpoint and definitionswitching");var n=e.getAdBreaksByType(8),r=e.getPageAdBreaks(),i=n.concat(r.dsAdBreaks);eg.empty(i)||this.newAdRequest({needPolicy:!1,type:"secondary",cuepointList:i},e.vv).play();var a=e.vv;if("iqiyiw"==t.site&&r.otherPageAdBreaks.length>0){var o=a.getContinuingVVs(),s={continuingVideoPlayedCount:o.length,continuingVideoPlayedDuration:Sh.sumBy(o,"videoDuration"),continuingAdPlayedDuration:Sh.sumBy(o.concat(a),"adPlayedDurationInView")},c=Sh.extend({continuingInfo:s,policy:r.otherPageAdBreaks,adPlayerId:t.adPlayerId},a.initAresParam);!function(e){var t=0;if(window.ares)e();else var n=setInterval((function(){t++,(window.ares||8==t)&&(clearInterval(n),e())}),1e3)}((function(){if(window.ares&&window.ares.initByMars){var n=window.ares;t.hasInitedAres=!0,n.initByMars(c)}else e.log("not find ares and start load ares"),function(e){var t="//static.iqiyi.com/js/common/ares6.min.js?"+Date.now(),n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.async=!0,n.src=t,n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e())}:n.onload=function(){n.onload=null,e()};r.parentNode.insertBefore(n,r)}((function(){if(window.ares){e.log("load ares success");var n=window.ares;t.hasInitedAres=!0,n.initByMars(c)}}))}))}}},{key:"requestWholeCorner",value:function(){var e=this,t=e.getAdBreaksByType(13);eg.empty(t)||(e.log("start to load whole corner"),this.newAdRequest({adBreak:t,requestIndex:e.vv.requestIndex,cuepointList:t,needPolicy:!1,from:e.vv,type:"whole_corner"},e.vv))}},{key:"newAdRequest",value:function(e,t){var n=new Yv(e,t);return this.vv.requests.push(n),n.load(),n}},{key:"initViewPoint",value:function(e){var t=this,n=t.vv.sdk;if(n.isSupportViewpoint){var r=[];if(Sh.each(e,(function(e){Sh.each(e.ads,(function(e){r.push(e)}))})),!eg.empty(r)){var i=Sh.map(r,(function(e){var n=e.slot;t.vv.viewPointAdZoneId=n.adZoneId;var r=e.creative.creativeObject;r.imgUrl=vp(r.imgUrl),r.posterUrl=vp(r.posterUrl);var i=r.posterList||[];return r.posterList=Sh.map(i,(function(e){return vp(e)})),e.exportAdObject=Sh.extend({startTime:n.startTime,badge:e.badge,adUid:e.id,source:1,orderItemId:e.orderItemId,dspIcon:e.icon},r),e.exportAdObject})),a=Sh.uniqBy(i,(function(e){return e.startTime}));eg.empty(a)||t.removeConflictSlotsByViewPoints(r),t.log("notify player init_viewpoint"),n.emit("adplayer_ad_info",{type:"init_viewpoint",data:{ads:i,templateType:"viewPoint",adZoneId:t.vv.viewPointAdZoneId,videoEventId:t.vv.videoEventId,viewPoints:a}})}if(!eg.empty(e)){var o=Sh.map(e,(function(e){return{ad:e.ads?e.ads[0]:null,slot:e,startTime:e.startTime,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}));t.log("init viewpoint",o),t.addBreaks(o)}}else t.log("page not support viewpoint",n.isSupportViewpoint)}},{key:"initWholeCorner",value:function(e){var t=this;if(eg.empty(e))t.log("no whole_corner schedule");else{var n=Sh.map(e,(function(e){var t=e.ads?e.ads[0]:null;return{ad:t,slot:e,startTime:t&&t.startTime?t.startTime:0,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}));t.log("init whole corner",n),t.addBreaks(n),t.hasWholeCornerAdBreak=!0}}},{key:"completeBriefRoll",value:function(e){var t=this;e?(t.log("complete brief roll",e),t.completeAdBreak(e)):t.log("no brief roll slot")}},{key:"setPolicy",value:function(e){var t=this;t.allAdBreaks=function(e){var t=[];return Sh.each(e,(function(e){Kv.empty(e.startTimes)?t.push(new Qv({cuepointType:e.cuepointType,adZoneId:e.adZoneId,adZoneStyle:e.adZoneStyle})):Sh.each(e.startTimes,(function(n,r){t.push(new Qv({startTime:n,cuepointType:e.cuepointType,adZoneId:e.adZoneId,sequenceId:r+1,adZoneStyle:e.adZoneStyle,hasLoaded:15==e.cuepointType}))}))})),t}(e),t.adBreaks=t.allAdBreaks.filter((function(e){return e.isMid()})),$v(t.adBreaks),t.log("set policy",t.adBreaks)}},{key:"getAdBreaksByType",value:function(e){return Sh.filter(this.allAdBreaks,(function(t){return Sh.isMatch(t,{cuepointType:e})}))}},{key:"getPageAdBreaks",value:function(){var e=[],t=[];return Sh.each(this.allAdBreaks,(function(n){n&&0==n.cuepointType&&0xe8d4a512a0==n.adZoneId&&t.push(n),n&&0==n.cuepointType&&0xe8d4a512a0!=n.adZoneId&&e.push(n)})),{otherPageAdBreaks:e,dsAdBreaks:t}}},{key:"addBreaks",value:function(e){var t=this;e=Sh.map(e,(function(e){return new Qv(e)})),Sh.each(e,(function(e){e.isValid()&&t.adBreaks.push(e)})),$v(t.adBreaks)}},{key:"completeAdBreak",value:function(e){var t=e.startTime,n=e.cuepointType;Sh.each(this.adBreaks,(function(r){r.startTime===t&&r.cuepointType===n&&r.addInfo({slot:e})}))}},{key:"bindAudioEvt",value:function(){var e=this;e.on("pausetoplay",(function(){e.log("on pausetoplay");var t=e.vv&&e.vv.audioPause;t&&t.template.closeAudioPause()}))}},{key:"startTimer",value:function(){var e=this;e.running||(e.running=!0,e.log("start schedule timer"),e.on("timeupdate",e.timerHandler),e.on("seeked",e.timerHandler),e.on("play",e.playHandler),e.on("pause",e.pauseHandler))}},{key:"stopTimer",value:function(){var e=this;e.running&&(e.log("stop schedule timer"),e.off("timeupdate",e.timerHandler),e.off("seeked",e.timerHandler),e.off("play",e.playHandler),e.off("pause",e.pauseHandler),e.running=!1)}},{key:"updateVideoTime",value:function(){var e=this;0==e.currentTime%10&&e.log("update video time",e.currentTime),e.emit("videotime:"+e.currentTime),e.lastTime=e.currentTime,e.adBreaksTimeHandler()}},{key:"adBreaksTimeHandler",value:function(){var e=this,t=[],n=[];Sh.each(e.adBreaks,(function(r){"banned"!==r.state&&(r.isLoaded()||r.canLoad(e.currentTime)&&(e.log("adBreak canLoad",r),t.push(r),r.hasPlayed=!1),r.isLoaded()&&(e.currentTime==r.startTime||13===r.cuepointType&&e.currentTime>r.startTime)&&(r.hasPlayed||(n.push(r),r.hasPlayed=!0)))}));var r=Zv(t),i=Zv(n);r.length!=t.length&&e.log("adbreaks to load conflict",r,t),i.length!=n.length&&e.log("adbreaks to play conflict",i,n),Sh.each(r,(function(t){e.log("adbreak load and fill",t);var n=t.cuepointType;t.request=e.newAdRequest({needPolicy:!1,cuepointList:[t],adBreak:t,vft:"",type:yv[n]||n},e.vv)})),Sh.each(i,(function(t){var n=t.request,r=t.ad;e.log("adbreak to play",n,t),n?n.play():r?(r.slot.show.request.reset(),r.play()):8!=t.cuepointType&&13!=t.cuepointType&&15!=t.cuepointType||!t.slot||t.slot.complete()}))}},{key:"onUserSeeked",value:function(e){var t=this,n=t.currentTime;t.log("onUserSeeked",e),e.beforeIsAD||Sh.each(t.adBreaks,(function(r){r.startTime>n&&13!=r.cuepointType&&(r.isLoaded()&&r.hasPlayed||15==r.cuepointType&&t.currentTime<t.lastTime&&t.lastTime>r.startTime&&t.currentTime<r.startTime&&!e.isAD)&&(r.abort(),r.refresh())}))}},{key:"setAutoChooseMidRoll",value:function(e){var t=this;e&&eg.bool(e.autoChoose)&&(t.log("自动中插点",e),t.midrollPoints=e,e.autoChoose?t.enableAutoChooseMidroll(e.nextMidroll):t.disableAutoChooseMidroll("初始化"))}},{key:"enableAutoChooseMidroll",value:function(e){var t=this;t.currentTime>e?t.log("当前时间晚于自动中插点"):(t.log("启用自动中插点",e),Sh.each(t.adBreaks,(function(t){2==t.cuepointType&&(t.startTime==e?t.state=null:t.state="banned")})))}},{key:"disableAutoChooseMidroll",value:function(e){var t=this;!1!==t.midrollPoints.autoChoose&&(t.log("停用自动中插点",e,t.midrollPoints),t.midrollPoints={autoChoose:!1},Sh.each(t.adBreaks,(function(e){2==e.cuepointType&&(e.state=null)})))}},{key:"ban",value:function(e){var t=Sh.filter(this.adBreaks,(function(t){return Sh.isMatch(t,e)}));Sh.each(t,(function(e){e.state="banned"})),this.log("ban ad breaks",e,t)}},{key:"removeConflictSlotsByViewPoints",value:function(e){var t=this,n=t.adBreaks;if(n&&e){var r=Sh.map(e,(function(e){return e.slot.startTime}));t.adBreaks=Sh.filter(n,(function(e){var n=Sh.includes([4,9,10,11],e.cuepointType),i=Sh.includes(r,e.startTime);return!(n&&i)||(t.log("remove conflict points",{startTime:e.startTime,cuepointType:e.cuepointType}),!1)}))}}},{key:"afterUserSeeked",value:function(e){e.beforeIsAD&&this.afterUserSeekedInOriginalRoll(e)}},{key:"afterUserSeekedInOriginalRoll",value:function(e){var t=this,n=t.getCurrentAd()||null,r=Boolean(e.isFusionMode)||!1,i=(r?Number(e.current):t.currentTime)||0,a=Boolean(e.beforeIsAD)||!1,o=Number(e.beforeSeek)||0,s=Boolean(e.isAD)||!1,c=(e.referrerGas||{}).id,u={isFusionMode:r,beforeIsAD:a,beforeSeek:o,referrerGasId:c,afterIsAD:s,afterSeek:i,ad:n||null};if(r){var d=t.vv.sdk,l=c||t.lastAdId||t.lastNotNullAdId,f=d.adMap[l]||{},h=f.slot||null;if(h&&h.isSeekableOriginalSlot()){t.log("after seeked in origin midroll of fusion mode",u),t.seekHandlerInFusionMode(u);var p=t.calcBeforeSeekOfs(u),_=Oh({ofs:Math.round(p)},",",":");Pp(f,"seek",_),f.isSeeked=!0}}else if(n&&n.isSeekableOriginalRoll()){t.log("after seeked in midroll of split mode",u),t.seekHandlerInSplitMode(u);var v=Oh({ofs:Math.round(o)},",",":");Pp(n,"seek",v),n.isSeeked=!0}}},{key:"seekHandlerInSplitMode",value:function(e){var t=e.ad;if(t){var n=Math.round(e.afterSeek),r=function(e){var t=e.beforeIsAD,n=e.beforeSeek,r=e.afterIsAD,i=e.afterSeek,a=n<i,o=t&&r&&!a;if(t&&r&&a)return"forwardInAd";if(o)return"backwardInAd"}(e);"forwardInAd"!==r&&"backwardInAd"!==r||(this.log("seek movement in original midroll",r),t.emit("progressReseted",n))}}},{key:"seekHandlerInFusionMode",value:function(e){var t=this,n=function(e){var t=e.beforeIsAD,n=e.beforeSeek,r=e.referrerGasId,i=e.afterIsAD,a=e.afterSeek,o=(e.ad||{}).id,s=t&&!i,c=t&&i,u=eg.empty(r),d=eg.empty(o),l=r===o,f=n<a;if(s)return"outofAd";if(c&&l&&!u&&!d)return"inSameAd";if(c&&!l&&!u&&!d&&f)return"forwardCrossAds";if(c&&!l&&!u&&!d&&!f)return"backwardCrossAds"}(e),r=e.referrerGasId,i=e.afterSeek,a=e.ad,o=t.vv.sdk,s=r||t.lastAdId||t.lastNotNullAdId,c=o.adMap[s]||{};if(t.log("seek handler in fusion mode type",n),"outofAd"===n){c.notAutoPlayNext=!0;var u=c.duration||15;return c.emit("progressReseted",u,!0),void c.slot.complete()}if("inSameAd"!==n){if("forwardCrossAds"===n||"backwardCrossAds"===n){c.notAutoPlayNext=!0;var d=c.duration||15,l=this.calcOfsInFusionMode(i,a);c.emit("progressReseted",d),a.template.hasPlaying=!1,a.emit("progressReseted",l)}}else{var f=this.calcOfsInFusionMode(i,a);a.emit("progressReseted",f)}}},{key:"calcBeforeSeekOfs",value:function(e){var t=e.isFusionMode,n=t.isFusionMode,r=t.beforeSeek,i=t.beforeAd;return n?i?this.calcOfsInFusionMode(r,i):0:r}},{key:"calcOfsInFusionMode",value:function(e,t){var n=t.getParentByName("slot")||{},r=e-n.startTime-n.calcRollDurationBefore(t);return r>0?r:0}},{key:"bindVideoTimeEvt",value:function(e,t){this.on("videotime:"+e,t)}}]),n}(ch);var ng=function(){function e(t){a()(this,e),this.log=t.sdk.logger.getLogger("collisionDetection"),this.vv=t,this.needDetectingList=[],this.wholeCorner={}}return s()(e,[{key:"addAdIntoCollisingList",value:function(e){if(e.id){var t=rg(this.needDetectingList,e.id);-1==t?this.needDetectingList.push(e):this.needDetectingList[t]=e,this.log("wholecorner after addAd the list",this.needDetectingList)}}},{key:"removeAd",value:function(e){var t=rg(this.needDetectingList,e);-1!=t&&this.needDetectingList.splice(t,1),this.log("wholecorner after removeAd the list",this.needDetectingList)}},{key:"wholeCornerCollidedWithOriginalList",value:function(){var e=this.wholeCorner;if(this.wholeCornerIsValid()){var t=this.isCollidedWithOriginalList(e);return this.log("wholecorner collision result",t),t}return this.log("wholecorner does not exist"),!1}},{key:"isCollidedWithOriginalList",value:function(e){for(var t=this.needDetectingList,n=!1,r=0;r<t.length;r++)if(this.checkCollision(t[r],e)){n=!0;break}return this.log("wholecorner happen collising? ",n?"yes":"no"),n}},{key:"notifyWholeCornerToShow",value:function(){var e=this.wholeCorner;if(e&&e.id&&!e.showing&&!this.wholeCornerCollidedWithOriginalList()){var t=this.vv.wholeCorner.$adzone;if(!t)return;if(e.timer&&e.timer.running&&!e.timerStatus.display)return;e.timer&&!e.timer.running&&e.timer.start(),this.log("notify whole corner to show"),t.style.display="",t.style.visibility="",this.wholeCorner.showing=!0}}},{key:"notifyWholeCornerToHide",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this.wholeCorner,n=t&&t.id&&t.showing,r=this.wholeCornerCollidedWithOriginalList(),i=r||e.forceHide;if(n&&i){var a=this.vv.wholeCorner.$adzone;if(!a)return;if(t.timer&&!t.timer.running)return;t.timer&&t.timer.running&&r&&t.timer.stop(),this.log("notify whole corner to hide"),a.style.display="none",a.style.visibility="hidden",this.wholeCorner.showing=!1}}},{key:"setWholeCorner",value:function(e){this.wholeCorner=e}},{key:"getWholeCorner",value:function(){return this.wholeCorner}},{key:"wholeCornerIsValid",value:function(){return!(!this.wholeCorner||!this.wholeCorner.id)}},{key:"checkCollision",value:function(e,t){if(e.willDefinitelyCollide)return!0;var n=e.y,r=e.x,i=parseFloat(e.x)+parseFloat(e.width),a=parseFloat(e.y)+parseFloat(e.height),o=t.y,s=t.x,c=parseFloat(t.x)+parseFloat(t.width),u=parseFloat(t.y)+parseFloat(t.height);return!(a<o||r>c||n>u||i<s)}}]),e}();function rg(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r].id==t){n=r;break}return n}function ig(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ag="videoEventId channelId episodeId albumId videoDefinition videoDuration autoload playSource isPreload isSupportViewpoint couponCode couponVer isAutoMapPlayerId vvId".split(" "),og=function(e){l()(n,e);var t=ig(n);function n(e,r){var i;a()(this,n),i=t.call(this,"vv");var o=u()(i);return o.setParent(e),o.mw=e.videoMidware,o.state="idle",o.initAresParam=r,o.requests=[],o.prerollOrderItemIds="",o.videoInfo={},o.lastRollCompleteTime=NaN,o.lastMidrollRequestTime=0,o.midrollPointsPlayedInView=0,o.adPlayedDurationInView=0,o.currentOverlayAds=[],o.pauseTimes=0,o.pauseRequestTimes=0,o.isBusy=!0,o.isAutoMapPlayerId=e.rawAdPlayerId!=e.adPlayerId,o.log=e.logger.getLogger("vv:"+e.videoEventId),o.ipdxReqErrCount=0,o.init(r),i}return s()(n,[{key:"init",value:function(e){var t=this,n=t.sdk;(e=Sh.extend({playSource:0,isPreload:!1,isAutoMapPlayerId:n.rawAdPlayerId!=n.adPlayerId},e)).vvId=function(e){var t=[e.episodeId,e.uaaUserId,Date.now(),Math.random()];return Fp(t.join(""))}(e);var r=Sh.only(e,ag);t.log("vv init:",r),Sh.extend(t,r),Sp(t,{pingbackType:"visit",subtype:"success",playSource:r.playSource||0,location:Sh.get(window,"location.href"),customInfo:t.sdk.script}),t.isPreload&&t.sdk.currentVV&&(t.continueFromVV=t.sdk.currentVV),t.schedule=new tg(t),t.adCollisionDetection=new ng(t)}},{key:"startVideo",value:function(e){var t=this;if(!0!==t.isVideoPlaying&&"ended"!=t.state){var n={rollType:e,videoEventId:t.videoEventId},r="roll-ended";t.log(r,n),t.sdk.emit(r,n),t.schedule&&!t.schedule.hasWholeCornerAdBreak&&t.schedule.requestWholeCorner(),t.schedule&&t.schedule.startTimer(),t.isVideoPlaying=!0,t.sdk.rollView&&t.sdk.rollView.removeOptions("video start")}}},{key:"stopVideo",value:function(e){var t=this;if(!1!==t.isVideoPlaying){var n={rollType:e,videoEventId:t.videoEventId},r="roll-play";t.log(r,n),t.sdk.emit(r,n),t.schedule&&t.schedule.stopTimer(),t.sdk.rollView&&t.sdk.rollView.midrollTip.end(),t.isVideoPlaying=!1}}},{key:"isCurrentVV",value:function(){return this==this.sdk.currentVV}},{key:"exitFullscreen",value:function(){var e=this.mw;e.isWebFullScreen()&&(this.log("退出网页全屏"),e.webfullscreentoggle()),e.isFullScreen()&&(this.log("退出全屏"),e.fullscreentoggle())}},{key:"disableVideo",value:function(){this.log("disable video"),this.schedule.enabled=!1;var e=this.sdk;e.setViewController((function(){e.rollView&&e.rollView.showMask()})),this.mw.pause()}},{key:"enableVideo",value:function(){this.log("enable video"),this.schedule.enabled=!0,this.mw.play();var e=this.sdk;e.rollView&&e.rollView.hideMask()}},{key:"onNetworkFree",value:function(){var e=this;e.isBusy&&(e.log("networt free"),e.isBusy=!1,e.schedule.requestSecondaryAd())}},{key:"abort",value:function(){var e=this;if("ended"!=e.state){e.log("abort"),e.state="ended",e.schedule&&(e.schedule.stopTimer(),e.schedule.unbindMWEvent());var t=e.sdk;e.log("notify player clear viewpoint"),t.emit("adplayer_ad_info",{type:"clear_viewpoint",data:{templateType:"viewPoint",adZoneId:e.viewPointAdZoneId,videoEventId:e.videoEventId}}),Sh.each(e.requests,(function(e){e.abort()})),this.stopBlackScreen()}}},{key:"resize",value:function(){Sh.each(this.requests,(function(e){"ended"!=e.state&&Sh.each(e.slots,(function(e){"ended"!=e.state&&Sh.each(e.ads,(function(e){"ended"!=e.state&&e.resize()}))}))}))}},{key:"isSportsVideo",value:function(){return this.videoInfo&&32==this.videoInfo.videoType}},{key:"getContinuingVVs",value:function(){for(var e=[],t=this.continueFromVV;t;)e.push(t),t=t.continueFromVV;return e}},{key:"startLoadVideo",value:function(e){var t=this;if("ended"!=t.state){e=e||{};var n="roll-load-finish",r=t.sdk,i={rollType:e.rollType,reason:e.reason,videoEventId:t.getVal("videoEventId")};"preroll"==e.rollType&&Sh.extend(i,{showStartTime:r.showTime.start,showEndTime:r.showTime.end,showTime:r.showTime.end-r.showTime.start,requestStartTime:r.requestStartTime,requestEndTime:r.requestEndTime,requestTime:r.requestEndTime-r.requestStartTime,initStartTime:r.initStartTime,initEndTime:r.initEndTime,initTime:r.initEndTime-r.initStartTime,loadStartTime:r.loadStartTime,loadEndTime:r.loadEndTime,loadTime:r.loadEndTime-r.loadStartTime}),t.log(n,i),r.emit(n,i)}}},{key:"stopBlackScreen",value:function(){var e=this.sdk;e.setViewController((function(){e.viewController?e.viewController.blackscreen.stopBlackScreen():e.adblocCBK&&e.adblocCBK.stopBlackScreen()}))}}]),n}(Ih);var sg,cg=n(434),ug="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" "),dg="color:inherit",lg=0,fg={},hg=function(){};window.console&&(hg=function(e,t){var n=Date.now(),r=n-(sg||n),i="color:"+function(e){fg[e]||(fg[e]=ug[lg++%ug.length]);return fg[e]}(e.name);sg=n;var a="%c"+(t.prefix+e.name)+"%c",o=[null,i,dg];Sh.each(e.data,(function(e){o.push(e),a+=" %o"})),o.push(i),a+="%c +"+r+"ms",o[0]=a,function(e,t){Function.prototype.apply.call(console[e],console,t)}("log",o)});var pg=hg,_g=Sh.is,vg={level:0,MAX_LOG_LEN:3e3,debugKey:"debug",defaultLevelName:"log",defaultName:"default",_name:"",prefix:"",outputer:pg},gg=function(){function e(t){a()(this,e);var n=this;n.key=t,n.logger=[],n.logs=[],Sh.extend(n,vg),n.init()}return s()(e,[{key:"init",value:function(){var e,t=this;if(t.prefix=t.key+":",t.key)try{e=localStorage[t.key]}catch(n){}t._name=e,t.pattern=function(e){var t=[],n=[];e&&_g.string(e)&&Sh.each(e.split(/[\s,]+/),(function(e){"-"===(e=e.replace(/\*/g,".*?")).charAt(0)?t.push(new RegExp("^"+Sh.slice(e,1)+"$")):n.push(new RegExp("^"+e+"$"))}));return{skips:t,names:n}}(e),t.enabled=t.isNameMatch(e)}},{key:"isNameMatch",value:function(e){var t=this.pattern;if(!e)return!1;function n(t){return t.test(e)}return!Sh.some(t.skips,n)&&!!Sh.some(t.names,n)}},{key:"getLogger",value:function(e){var t=this;e=e||t.defaultName;var n=t.logger[e];return n||(n=t.logger[e]=function(){t.print(e,arguments)}),n}},{key:"print",value:function(e,t){var n=this,r={name:e,key:n.key,data:t};n.logFilter(r,n.lastLog),n.enabled&&n.outputer(r,n)}},{key:"logFilter",value:function(e){e.time=Date.now(),this.saveLog(e)}},{key:"saveLog",value:function(e){var t=this;t.logs.push(e),t.logs.length>t.MAX_LOG_LEN&&t.logs.shift()}}]),e}();function yg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var mg=cg.version+"-mars",bg="qc_100001_100226",kg=function(e){l()(n,e);var t=yg(n);function n(e){var r;return a()(this,n),(r=t.call(this,"sdk")).playerId=e.playerId||"noPlayerId-"+Date.now(),r.script=Sh.get(window,"document.currentScript.src"),r.vvCnt=0,r.vvs=[],r.adPlayedDurationInDay=0,r.version=r.sdkVersion=mg,r.adMap={},r.logger=new gg("mars-"+r.playerId),r.debug=r.logger.getLogger("sdk"),r}return s()(n,[{key:"init",value:function(e){this.initStartTime=Date.now(),this.debug("sdk init",e,mg),(e=Sh.extend({},e)).episodeId=e.episodeId||e.tvId,e.isVIP=e.isVIP||!1,e.timePoint=e.timePoint||0,e.site=e.site||"iqiyiw",e.theaterMode=e.theaterMode||!1,Sh.extend(this,e),this.locale&&(Sh.includes(["tw_t","cn_t"],this.locale)?this.locale="tw":this.locale="cn"),Sh.includes(this.locale,"tw")&&(this.adPlayerId=this.adPlayerId||"qc_105136_100610",this.debug("tw cid",this.adPlayerId));var t,n=this.adPlayerId;this.adPlayerId=function(e){(function(e){return!!Sh.startsWith(e,"qc_")&&e.length=="qc_100001_100000".length})(e)||(e=bg);return e}(n),e.isPreload?this.rawAdPlayerId=this.adPlayerId:this.rawAdPlayerId=this.rawAdPlayerId||n,this.uaaUserId=this.uaaUserId||(t=Pd.a.get("QC005"),up.empty(t)&&(t=Pd.a.get("QC006")),t||"");var r=new og(this,e);this.vvCnt++,e.isPreload?this.preloadVV=r:(this.switchView(),this.currentVV=r),this.vvs.push(r),this.bindEvent()}},{key:"switchView",value:function(e){var t=this;this.debug("switch view",e||"normal");var n="";(t&&t.currentVV&&(n=t.currentVV.videoEventId),t.rollView&&t.rollView.midrollTip.end(),Sh.remove(t.vvs,(function(e){return e.abort(),!0})),t.currentVV=null,t.preloadVV=null,t.videoMidware&&t.videoMidware.play(),t.hasInitedAres&&n)&&window.ares.stop({videoEventId:n})}},{key:"playPreload",value:function(){var e=this,t=this;this.debug("play preload");var n=t.currentVV.videoEventId;(Sh.remove(t.vvs,(function(n){return n==t.currentVV&&(e.debug("abort vv"),n.abort(),t.currentVV=null,t.videoMidware.play(),e.debug("remove current vv"),!0)})),t.hasInitedAres)&&window.ares.stop({videoEventId:n});if(this.debug("play preload vv"),t.preloadVV){t.currentVV=t.preloadVV,t.preloadVV=null;var r=t.currentVV.requests[0];r&&r.play()}}},{key:"bindEvent",value:function(){var e=this,t=this;t.on("video-play",(function(){e.debug("player notify video play"),e.setViewController()})),t.binResize(t.videoMidware.video()),t.on("click",(function(n){if(e.debug("click",n),n){var r=n.data.id||n.data.adUid,i=t.adMap[r];i&&("viewpoint"==n.type?(i.emit("click"),Sp(i,{pingbackType:"statistics",subtype:"click",customInfo:"viewPointSidebar"})):"definitionswitching"==n.type&&i.emit("clickAndOpen"))}})),t.on("impression",(function(n){if(e.debug("impression",n),n){var r=n.data.id||n.data.adUid,i=t.adMap[r];if(i)if("viewpoint"==n.type){if(!i.hasSidebarImpressioned)i.hasSidebarImpressioned=!0,Sp(i,{pingbackType:"statistics",subtype:"impression",customInfo:"viewPointSidebar"}),"tips"!=i.creative.creativeObject.impressionArea&&i.emit("impression")}else"definitionswitching"==n.type&&i.emit("impression")}})),t.on("impressionAdZone",(function(e){this.debug("impressionAdZone",e);var n=e.data.adZoneId,r=t.currentVV;r&&n&&Sh.each(r.requests,(function(e){Sh.each(e.slots,(function(e){e.adZoneId==n&&e.sendEmptyTrackingBeforeTimeSlice(Infinity)}))}))}))}},{key:"binResize",value:function(e){var t=this,n=new Vp(100,50),r=e.offsetWidth;function i(){var n=e.offsetWidth;n==r||(t.debug("video resize",r,"==>",n),t.resize(),r=n)}n.on("timer",i),window.addEventListener("resize",(function(){i()}))}},{key:"getUser",value:function(){var e=this,t=Sh.only(e,"isVIP passportId passportCookie uaaUserId cupidUserId");if(e.videoMidware){var n=e.videoMidware.getUserInfo();Sh.extend(t,n)}return t||{}}},{key:"updateUser",value:function(){var e=this.getUser();return this.debug("update user info",e),Sh.extend(this,e),e}},{key:"loadVC",value:function(){var e,t=this,n=this;if(n.memoryLoadVC)return n.memoryLoadVC;if(window.Mars_V)e=Promise.resolve(window.Mars_V);else{var r="//static.iqiyi.com/js/common/mars_v.js?"+Date.now(),i=document.createElement("script"),a=document.getElementsByTagName("script")[0];i.async=!0,e=new Promise((function(e){t.debug("load view controller"),i.src=r,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){i.onload=null,e()},i.onerror=function(){e()},setTimeout((function(){e()}),8e3),a.parentNode.insertBefore(i,a)}))}return n.memoryLoadVC=n.memoryLoadVC||e,n.memoryLoadVC}},{key:"setViewController",value:function(e){var t=this;t.viewController&&e?e():t.loadVC().then((function(){!t.viewController&&window.Mars_V&&(t.ajax=cp,t.viewController=window.Mars_V.init(t),t.rollView=t.viewController.rollView,t.pauseView=t.viewController.pauseView),e&&e()}))}},{key:"resize",value:function(){this.currentVV&&this.currentVV.resize()}},{key:"destroy",value:function(){var e=this;e.switchView("destroy"),e=null}},{key:"fetchLogs",value:function(){this.debug("fetch logs",this.logger.logs.length);var e,t,n=this.logger.logs.slice(-500);return e="mars",t=n,Sh.map(t,(function(t){var n=["["+e+"]["+(t.key||"")+"]["+t.name+"]"];return Sh.each(t.data,(function(e){if("object"==B()(e))try{e=JSON.stringify(e)}catch(t){}n.push(String(e))})),n.join(" ")})).join("\r\n")}}]),n}(Ih);var xg={init:function(e){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=new kg(e);return window.Mars[t.playerId]=t,t}(e)}};"undefined"!=typeof window&&(window.Mars?xg=window.Mars:window.Mars=xg);var Tg=xg,Sg=n(338),Pg=n(32),wg=n(4),Ig=n(329),Ag=n(330);function Eg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Dg,qg,Og,Rg=new Id.a("Wonder.Data.PC"),Lg=function(e){l()(n,e);var t=Eg(n);function n(e,r){var i;return a()(this,n),i=t.call(this),e.playerType="wonder",e.tvid=Object(wd.a)(e.tvid),i.adapter=r,i.ad=Tg.init({playerId:e.parentId}),i.engine=new sh(e,u()(i)),i.lang=Ig.a,i.engine.i18n.isTraditionalChinese()&&(i.lang=Ag.a),i.view=new Sg.a(e,u()(i)),i.view.init(),qd.a.init(),i.initEvent(),i.view.setting.theaterMode&&r.loadSkin({isMini:i.engine.isMini}),i}return s()(n,[{key:"initEvent",value:function(){var e=this.engine,t=this.adapter,n=!1;function r(e,n){Rg.log("adapter emit: ".concat(e)+(e===Pg.a.QYPLAYER_NOTIFY_TIMEUPDATE?"-".concat(n.current):"")),t.fire({type:e,data:n})}function i(e,n){(n=n||{}).state=e.toLocaleLowerCase(),Rg.info("state change: "+n.state),t.fire({type:Pg.a.QYPLAYER_STATE_CHANGE,data:n})}e.on(k.a.NTF_StatusChanged,(function(n){switch(n.state){case k.a.Status_AdStartPlay:i(Pg.a.QYPLAYER_STATUS_AD_START_PLAY,n),t.loadSkin({isMini:e.isMini});break;case k.a.Status_AdPlaying:i(Pg.a.QYPLAYER_STATUS_AD_PLAYING,n);break;case k.a.Status_AdPaused:i(Pg.a.QYPLAYER_STATUS_AD_PAUSED,n);break;case k.a.Status_Loadstart:r(Pg.a.QYPLAYER_H5_VIDEO_LOADSTART);break;case k.a.Status_LoadedMetaData:r(Pg.a.QYPLAYER_H5_VIDEO_LOADEDMETADATA);break;case k.a.Status_StartPlay:i(Pg.a.QYPLAYER_STATUS_START_PLAY,n),t.loadSkin({isMini:e.isMini});break;case k.a.Status_Waiting:e.isSeeking()||i(Pg.a.QYPLAYER_STATUS_WAITING,n);break;case k.a.Status_Paused:i(Pg.a.QYPLAYER_STATUS_PAUSED,n);break;case k.a.Status_Playing:i(Pg.a.QYPLAYER_STATUS_PLAYING,n);break;case k.a.Status_Stoped:i(Pg.a.QYPLAYER_STATUS_STOPED,n);break;case k.a.Status_End_Play:i(Pg.a.QYPLAYER_STATUS_END_PLAY,n);break;case k.a.Status_PlayError:i(Pg.a.QYPLAYER_STATUS_ERROR,n),t.loadSkin({isMini:e.isMini})}})).on(k.a.NTF_VRSReady,(function(e){r(Pg.a.QYPLAYER_STATUS_DATA_READY,e.data)})).on(k.a.NTF_CanPlayThrough,(function(){})).on(k.a.NTF_VolumeChanged,(function(e){n&&r(Pg.a.QYPLAYER_H5_VOLUME_CHANGED,e),n=!0})).on(k.a.NTF_DurationChanged,(function(e){r(Pg.a.QYPLAYER_H5_DURATION_CHANGED,e)})).on(k.a.NTF_VideoChanged,(function(t){e.isInteractVideo&&(t.isInteractVideo=e.isInteractVideo,t.uniqueId=e.iv_state.uniqueId,t.isIVSubSwitch=e.isIVSubSwitch),r(Pg.a.QYPLAYER_VIDEO_CHANGE,t)})).on(k.a.NTF_VideoChange,(function(t){t.playerVersion=cf.a,e.isInteractVideo&&(t.isInteractVideo=e.isInteractVideo,t.uniqueId=e.iv_state.uniqueId),r(Pg.a.QYPLAYER_VID_CHANGE,t)})).on(k.a.NTF_FollowUpNextLoad,(function(e){r(Pg.a.QYPLAYER_FOLLOW_UPNEXT_LOAD,e)})).on(k.a.NTF_AD_Start,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AD_START,e)})).on(k.a.NTF_AD_End,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AD_END,e)})).on(k.a.Status_AresNoticeInfo,(function(e){r(e.type,e.data)})).on(k.a.NTF_TimeUpdate,(function(e){r(Pg.a.QYPLAYER_NOTIFY_TIMEUPDATE,e)})).on(k.a.NTF_Seeking,(function(e){r(Pg.a.QYPLAYER_STATUS_SEEKING,e)})).on(k.a.NTF_NeedUserGesture4Playback,(function(n){Rg.info("需要用户授权开播"),e.needUserGesture4Playback=!0,t.loadSkin({isMini:e.isMini}),r(Pg.a.QYPLAYER_NOTIFY_NeedUserGesture4Playback,n)})).on(k.a.NTF_Error,(function(n){i(Pg.a.QYPLAYER_STATUS_ERROR,n),t.loadSkin({isMini:e.isMini}),"A00011"===n.code&&r(Pg.a.QYPLAYER_RECHARGE,{code:"Q00310",from:""})})).on(k.a.NTF_Recharge,(function(n){t.loadSkin({isMini:e.isMini}),r(Pg.a.QYPLAYER_RECHARGE,n)})).on(k.a.NTF_BuyPlay,(function(e){r(Pg.a.QYPLAYER_BuyPlay,e)})).on(k.a.NTF_AD_BLOCK,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AD_BLOCK,e)})),this.view.on(Pg.a.QYPLAYER_FIND_GOODS,(function(e){r(Pg.a.QYPLAYER_FIND_GOODS,e)})).on(Pg.a.QYPLAYER_DOSOMETHING,(function(e){r(Pg.a.QYPLAYER_DOSOMETHING,e)})).on(wg.a.NTF_SHOW_LOGIN_PANEL,(function(e){r(Pg.a.QYPLAYER_SHOW_LOGIN_PANEL,e)})).on(wg.a.NTF_WebFullScreen_BeforeChange,(function(e){r(Pg.a.QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE,"enter"===e)})).on(wg.a.NTF_WebFullScreen_AfterChange,(function(e){var t="enter"===e;r(Pg.a.QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE,t)})).on(wg.a.NTF_FullScreen_BeforeChange,(function(e){r(Pg.a.QYPLAYER_FULLSCREEN_BEFORE_CHANGE,"enter"===e)})).on(wg.a.NTF_FullScreen_AfterChange,(function(e){var t="enter"===e;r(Pg.a.QYPLAYER_FULLSCREEN_AFTER_CHANGE,t)})).on(wg.a.NTF_ScoreTask_ScoreChange,(function(){r(Pg.a.QYPLAYER_NOTIFY_SCORECHANGE)})).on(wg.a.NTF_FeedBack_Show,(function(){r(Pg.a.QYPLAYER_NOTIFY_FEEDBACK_SHOW)})).on(wg.a.NTF_FeedBack_Hide,(function(){r(Pg.a.QYPLAYER_NOTIFY_FEEDBACK_HIDE)})).on(wg.a.NTF_FeedBack_Panel_show,(function(e){r(Pg.a.QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW,e)})).on(wg.a.NTF_USER_SEEK,(function(){r(Pg.a.QYPLAYER_NOTIFY_USER_SEEK)})).on(wg.a.NTF_AIView_AIResult,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AI_STAR_INFO,e)})).on(wg.a.NTF_AIView_AIFeedback,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AI_FEEDBACK,e)})).on(wg.a.NTF_AIView_CLOSE,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)})).on(wg.a.NTF_AIView_BAIKE_CLOSE,(function(e){r(Pg.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)})).on(wg.a.NTF_SHOW_VIDEOLIST,(function(e){r(Pg.a.QYPLAYER_NOTIFY_SHOW_VIDEOLIST,e)})).on(wg.a.NTF_VIDEOLIST_BTN_CLICK,(function(e){r(Pg.a.QYPLAYER_NOTIFY_CLICK_VIDEOLIST_BTN,e)})).on(wg.a.NTF_IV_INTERACTIONSTART,(function(e){r(Pg.a.QYPLAYER_NOTIFY_INTERACTION_START,e)})).on(wg.a.NTF_IV_INTERACTIONEND,(function(e){r(Pg.a.QYPLAYER_NOTIFY_INTERACTION_END,e)})).on(wg.a.NTF_Barrage_Send,(function(e){r(Pg.a.QYPLAYER_BARRAGE_SEND,e)})).on(wg.a.NTF_METAPANEL_STATE_CHANGE,(function(e){r(Pg.a.QYPLAYER_NOTIFY_METAPANEL_STATE_CHANGE,e)})).on(wg.a.NTF_RF_STATE_CHANGE,(function(e){r(Pg.a.QYPLAYER_NOTIFY_RF_STATE_CHANGE,e)})).on(wg.a.NTF_PAYLAYER_DATA,(function(n){1===n.status&&t.loadSkin({isMini:e.isMini})}))}},{key:"addView",value:function(e){this.view.addView(e)}},{key:"load",value:function(e){Rg.info("js call func load(加载视频), data = "+e),this.engine.load(e)}},{key:"destroy",value:function(){this.engine.destroy(),this.view.destroy()}},{key:"play",value:function(e){Rg.info("js call func play(播放)");var t=!1;e&&e.withUserGesture&&(t=!0),this.engine.play(t)}},{key:"resume",value:function(){Rg.info("js call func resume"),this.engine.play()}},{key:"replay",value:function(){Rg.info("js call func replay"),this.engine.replay()}},{key:"pause",value:function(){Rg.info("js call func pause , patch = ".concat(this.engine.isPatch(),", switching=").concat(this.engine.playproxy._videoSwitching)),this.engine.isPatch()||(this.engine.playproxy._videoSwitching?this.engine.pause(!0,!0):this.engine.pause())}},{key:"seek",value:function(e){Rg.info("js call func seek, time = "+e),this.engine.seek(e)}},{key:"seekN",value:function(e){if("number"==typeof e&&isFinite(e)){Rg.info("js call func seekN, time = "+e);var t=this.engine.getCurrenttime();this.engine.seek(t+e)}}},{key:"setPlayPingbackInfo",value:function(e){Rg.info("js call func setPlayPingbackInfo, param = "+JSON.stringify(e)),this.engine.setPlayPingbackInfo(e)}},{key:"stop",value:function(){Rg.info("js call func stop(停止播放)"),this.engine.stop()}},{key:"getMuted",value:function(){return this.engine.getMuted()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"setMuted",value:function(e){this.engine.setMuted(e)}},{key:"getPlayInfo",value:function(e){var t=this.engine,n=this.view;t.getPlayInfo((function(r){var i={},a=t.getDuration(),o=n.getRealArea();i.tvid=r.tvid,i.vid=r.vid,i.cid=r.cid,i.albumId=r.albumId,i.categoryId=r.cid,i.currentTime=t.getCurrenttime(),i.totalDuration=isNaN(a)?undefined:1e3*a,i.bufferTime=t.getBufferTime(),i.currentDefination=r.rate,i.currentTrack="",i.currentStatus=t.getCurrStatus(),i.isTryWatch=t.isTryWatch()?"1":"0",i.isPause=t.isPaused()?"1":"0",i.width=parseInt(o.width),i.height=parseInt(o.height),i.vipTypes=t.getVipTypes(),i.playerVersion=r.playerVersion,i.ctt=t.getMovieInfo().ctt,i.pcaHas4k=t.getMovieInfo().pcaHas4k,e&&"function"==typeof e&&e(i)}))}},{key:"getVideoInfo",value:function(e){this.engine.getVideoInfo(e)}},{key:"setQiyiUserLogin",value:function(e){Rg.info("js call func setQiyiUserLogin(修改登录状态), param = "+Id.a.stringify(e)),this.view.setQiyiUserLogin(e)}},{key:"switchVideo",value:function(e){Rg.info("js call func switchVideo(影片切换), param = "+Id.a.stringify(e)),this.engine.switchVideo(e)}},{key:"switchNextVideo",value:function(){Rg.info("js call func switchNextVideo(下一集)"),this.view.switchNextVideo()}},{key:"switchPreVideo",value:function(){Rg.info("js call func switchPreVideo(上一集)"),this.view.switchPreVideo()}},{key:"addVideoList",value:function(e){Rg.info("js call func addVideoList(添加联播列表)"),this.view.addVideoList(e)}},{key:"removeVideoList",value:function(e){Rg.info("js call func removeVideoList(从联播列表删除), data = "+e),this.view.removeVideoList(e)}},{key:"setSmallWindowMode",value:function(e){this.view.setSmallWindowMode(e)}},{key:"jsNotifyAdManager",value:function(e){this.engine.jsNotifyAdManager(e)}},{key:"getQiyiPlayerLog",value:function(e){try{this["package"].getQiyiPlayerLog(e)}catch(t){}}},{key:"clearBanWord",value:function(){this.view.emit(wg.a.NTF_Barrage_ClearBanWord)}},{key:"addBanWord",value:function(e){this.view.emit(wg.a.NTF_Barrage_AddBanWord,e)}},{key:"removeBanWord",value:function(e){this.view.emit(wg.a.NTF_Barrage_RemoveBanWord,e)}},{key:"notyfyADInfo",value:function(e){this.engine.notyfyADInfo(e)}},{key:"setRightBarStatus",value:function(e){e&&e.type&&(Rg.info("js call func setRightBarStatus, param = "+Id.a.stringify(e)),this.view.setRightBarStatus(e))}},{key:"setExpandScreenStatus",value:function(e){e&&this.view.emit(wg.a.NTF_EXPANDSCREEN_STATUS_CHANGED,e)}},{key:"getQiyiPlayerInfo",value:function(e){this.getPlayInfo(e)}},{key:"setPlayerWebFullScreen",value:function(e){this.view.emit(wg.a.NTF_WebFullScreen_SetSwitch,e)}},{key:"setPlayerFullScreen",value:function(e){this.view.emit(wg.a.NTF_FullScreen_SetSwitch,e)}},{key:"setDelayPlayInfo",value:function(e){this.engine.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.engine.clearDelayPlayInfo(e)}},{key:"addPlayListView",value:function(e){e.request=!0,this.view.emit(wg.a.NTF_ADDVideoList,e)}},{key:"getSwitchVideoType",value:function(){this.view._switchVideoType}},{key:"exitPicInPic",value:function(){this.view.emit(wg.a.Type_ExitPic)}},{key:"showToast",value:function(e){this.view.emit(wg.a.NTF_SHOW_TOAST,{txt:e})}},{key:"refresh",value:function(e){this.engine.refresh(e)}},{key:"backToStoryLine",value:function(e){var t=this.engine.IVRecorder;t&&t.backToStoryLine(e)}},{key:"backToIVMain",value:function(e){this.view.emit(wg.a.NTF_BACK_TO_IV_MAIN,e)}},{key:"setFollowData",value:function(e){Rg.info("js call func setFollowData, data = ".concat(JSON.stringify(e))),this.view.setFollowData(e)}},{key:"changeFollowState",value:function(e){Rg.info("js call func changeFollowState, data = ".concat(JSON.stringify(e))),this.view.emit(wg.a.NTF_FOLLOW_CHANGE_STATE,e)}},{key:"changeAIBaikeState",value:function(e){Rg.info("js call func changeAIBaikeState, data = ".concat(JSON.stringify(e))),this.view.emit(wg.a.NTF_AIView_BAIKE_STATECHANGE,e)}},{key:"setBarrageState",value:function(e){Rg.info("js call func setBarrageState, data = ".concat(JSON.stringify(e))),e.index!==undefined&&e.focus!==undefined&&(this.view.barrageFocux==undefined&&(this.view.barrageFocux=[]),this.view.barrageFocux[parseInt(e.index)]=e.focus)}},{key:"getFeedbackInfo",value:function(){this.view.emit(wg.a.NTF_FeedBack_getInfo)}},{key:"showTips",value:function(e){var t=e.text,n=void 0===t?"":t,r=e.time,i=void 0===r?2e3:r,a=e.isCoexist,o=void 0===a||a;this.view.emit(wg.a.NTF_SHOW_TIPS,{text:n,time:i,isCoexist:o})}},{key:"notifyMetaPanel",value:function(e){this.view.notifyMetaPanel(e)}},{key:"getMetaPanelInfo",value:function(){return this.view.getMetaPanelInfo()}},{key:"getRightFloaterInfo",value:function(){return this.view.getRightFloaterInfo()}},{key:"noticeRightFloater",value:function(e){this.view.noticeRightFloater(e)}},{key:"setPayLayerStatus",value:function(e){this.view.setPayLayerStatus(e)}},{key:"setBarragePanel",value:function(e){this.view.setBarragePanel(e)}},{key:"getPlayerDom",value:function(){return this.view.getPlayerDom()}}]),n}(v.a);t["default"]=Lg;Dg="wonder.data.pc",qg=window.QiyiPlayerLoader||{},Og=!!qg.packLoader.usedGrayUrl[Dg],qg.packageName===Dg&&(!Og&&qg.isSyncing||!qg.isSyncing)&&qg.setPackage(Lg)},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(27),n(385)),c=n(387),u=n(357),d=function(){function e(t,n,r){i()(this,e),this.severity=t,this.category=n,this.code=r;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];this.data=o}return o()(e,[{key:"toString",value:function(){return"".concat(e.MESSAGE_HEAD," ").concat(s.a.stringify(this,null,"  "))}}]),e}();d.severity=u.a,d.category=c.a,d.MESSAGE_HEAD="KIWI:"},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(39),c=n.n(s),u=n(5),d=n.n(u),l=n(6),f=n.n(l),h=n(1),p=n.n(h),_=(n(84),n(99)),v=n(281),g=n(341);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var m=function(e){d()(n,e);var t=y(n);function n(e){var r;return i()(this,n),(r=t.call(this)).$apiKeys=v.b.call(c()(r)),r.$eventManager=new g.a,r.ctx_=e.ctx,r.$apiInjector=v.a,r}return o()(n,[{key:"bindApis",value:function(){v.a.provide(this,this.$apiKeys),v.a.inject(this.ctx_),v.a.dispose()}},{key:"unbindApis",value:function(){v.a.eject(this.ctx_,this.$apiKeys)}},{key:"destroy",value:function(){this.$eventManager.destroy(),this.unbindApis(),this.$apiKeys.splice(0,this.$apiKeys.length)}}]),n}(_.EventEmitter);m.$__apiDescriptorQueue__=[]},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a);n(80),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(10),n(31),n(54),n(27),n(84);function s(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:50,n=0,r=null;null===r;)try{n++,r=new Uint8Array(e)}catch(i){if(n>t)throw"alloc_memory_error@new: ".concat(i.message,", ").concat(e)}return r}var c=function(){function e(){i()(this,e),this.byteLength=0,this.list_=[]}return o()(e,[{key:"bytes",get:function(){var e=this.list_,t=e.length,n=null;return 1===t?n=e[0]:t>1&&(n=this.toNewBytes()),n}},{key:"empty",get:function(){return 0===this.list_.length}},{key:"bufferList",get:function(){return this.list_}},{key:"clear",value:function(){var e=this.list_.length;e>0&&this.list_.splice(0,e),this.byteLength=0}},{key:"toNewBytes",value:function(){for(var e=this.list_,t=e.length,n=s(this.byteLength),r=0,i=0;r<t;r++){var a=e[r];n.set(a,i),i+=a.byteLength}return n}},{key:"append",value:function(t){var n=this.list_;if(t instanceof e){n=this.list_=n.concat(t.bufferList);for(var r,i=0;i<n.length;i++)r=n[i],this.byteLength+=r.byteLength}else n.push(t),this.byteLength+=t.byteLength}},{key:"cut",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n=null;if(e>0&&!this.empty){for(var r=this.list_,i=0,a=0;r.length>0;){var o=r.shift();if(0!==a){var s=e-i;if(o.byteLength>=s){t&&n.set(o.subarray(0,s),i),(o=o.subarray(s)).byteLength>0&&r.unshift(o);break}t&&n.set(o,i),i+=o.byteLength;break}if(o.byteLength>=e){t&&(n=o.subarray(0,e)),o.byteLength>e&&(o=o.subarray(e),r.unshift(o));break}if(t){try{n=new Uint8Array(e)}catch(c){throw"alloc_memory_error@cut: ".concat(e," ").concat(c.message)}n.set(o,0)}i+=o.byteLength,a++}this.byteLength-=e}return n}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(25);function r(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,r=0,i="",a=t;a<t+n;a++)r=7-a%8,i+=e[Math.floor(a/8)]>>r&1;return parseInt(i,2)}function i(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=[],r=8*e.byteLength,i=!1,a=0,o=0,s="",c=t;c<r;c++)if(a=7-c%8,o=e[Math.floor(c/8)]>>a&1,!i){if(0!==o){i=!0,t=c;break}n.push(0)}for(var u=n.length+1,d=t;d<t+u;d++)a=7-d%8,s+=o=e[Math.floor(d/8)]>>a&1;return{bitLength:n.length+u,value:parseInt(s,2)-1}}var a={readUEV:i,readSEV:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=i(e,t),r=n.value,a=Math.pow(-1,r+1)*Math.ceil(r/2);return{bitLength:n.bitLength,value:a}},readBit:r,readByte:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return r(e,t,8)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a);n(401),n(284),n(54),n(10),n(287);function s(e){var t=0;return ArrayBuffer.isView(e)&&(t=e.byteOffset,e=e.buffer),new DataView(e,t)}var c=function(){function e(){i()(this,e)}return o()(e,[{key:"readUint32",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return s(e).getUint32(t,n)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(350),i=n.n(r),a=(n(27),n(357)),o=n(637),s=n(387),c=n(390);function u(e,t){var n=c.a.MUX_UNKNOWN_FAILED,r=a.a.CRITICAL;switch(e){case 0:n=c.a.MUX_WORKER_INTERNAL_EXCEPTION,r=a.a.RECOVERABLE;break;case 1:n=c.a.MUX_WORKER_MESSAGE_EXCEPTION;break;default:n=e}for(var u=arguments.length,d=new Array(u>2?u-2:0),l=2;l<u;l++)d[l-2]=arguments[l];return i()(o.a,[r,s.a.MUX,n,t].concat(d))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9);var r=n(2),i=n.n(r),a=n(5),o=n.n(a),s=n(6),c=n.n(s),u=n(1),d=n.n(u);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(e){o()(n,e);var t=l(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).container="",r.codec="",r.trackId=null,r}return n}(n(352).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9);var r=n(2),i=n.n(r),a=n(5),o=n.n(a),s=n(6),c=n.n(s),u=n(1),d=n.n(u);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(){}