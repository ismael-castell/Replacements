/*! For license information please see spectrum-0a14653e9cb35ca7e287.js.LICENSE.txt */
!function(e){function t(t){for(var n,o,r=t[0],a=t[1],s=0,l=[];s<r.length;s++)o=r[s],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);l.length;)l.shift()()}var n={},i={27:0};function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"js/"+({}[e]||e)+"-"+{0:"522ac2f63622a43a7d9e",1:"2b5811cd5e08478f6e2a"}[e]+".chunk.js"}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",c.name="ChunkLoadError",c.type=o,c.request=r,n[1](c)}i[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/packs/",o.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var s=0;s<r.length;s++)t(r[s]);var c=a;o(o.s=1260)}({110:function(e,t){window.__sharedModules__=window.__sharedModules__||{},e.exports={areWebComponentsEnabled:function(){return!!window.__webComponentsEnabled__},modules:{add:function(e){for(var t in e)window.__sharedModules__[t]=e[t]},get:function(e){return window.__sharedModules__[e]}},setWebComponentsEnabled:function(){window.__webComponentsEnabled__=!0}}},119:function(e,t,n){var i=n(120),o="unknown";document.documentMode&&(o="ie"),e.exports={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(!(n=i.isElement(t)?t:e.querySelector(t))){var o=Array.prototype.slice.call(e.childNodes||e.children).filter((function(e){return"defs"!==e.nodeName&&"#text"!==e.nodeName}));1===o.length&&"g"===o[0].nodeName&&null===o[0].getAttribute("transform")&&(n=o[0])}if(!n){var r="viewport-"+(new Date).toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",r);var a=e.childNodes||e.children;if(a&&a.length>0)for(var s=a.length;s>0;s--)"defs"!==a[a.length-s].nodeName&&n.appendChild(a[a.length-s]);e.appendChild(n)}var c=[];return n.getAttribute("class")&&(c=n.getAttribute("class").split(" ")),~c.indexOf("svg-pan-zoom_viewport")||(c.push("svg-pan-zoom_viewport"),n.setAttribute("class",c.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),null!==e.parentNode){var t=e.getAttribute("style")||"";-1===t.toLowerCase().indexOf("overflow")&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:i.throttle((function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var i=e[n];i.parentNode.insertBefore(i,i)}}),this?this.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var i=this,r="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",r),"transform"in e.style?e.style.transform=r:"-ms-transform"in e.style?e.style["-ms-transform"]=r:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=r),"ie"===o&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout((function(){i.refreshDefsGlobal()}),i.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return i.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var i=e.createSVGPoint();return i.x=t,i.y=n,i}}},120:function(e,t){function n(e){return function(t){window.setTimeout(t,e)}}e.exports={extend:function(e,t){for(var n in e=e||{},t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&"object"===typeof e&&null!==e&&1===e.nodeType&&"string"===typeof e.nodeName},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else{if(!("string"===typeof e||e instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(t=document.querySelector(e)))throw new Error("Provided selector did not find any elements. Selector: "+e)}if("svg"===t.tagName.toLowerCase())n=t;else if("object"===t.tagName.toLowerCase())n=t.contentDocument.documentElement;else{if("embed"!==t.tagName.toLowerCase())throw"img"===t.tagName.toLowerCase()?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=t.getSVGDocument().documentElement}return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(void 0===e.clientX||null===e.clientX)if(e.clientX=0,e.clientY=0,void 0!==e.touches&&e.touches.length){if(void 0!==e.touches[0].clientX)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(void 0!==e.touches[0].pageX){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else void 0!==e.originalEvent&&void 0!==e.originalEvent.clientX&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},isDblClick:function(e,t){if(2===e.detail)return!0;if(void 0!==t&&null!==t){var n=e.timeStamp-t.timeStamp,i=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&i<10}return!1},now:Date.now||function(){return(new Date).getTime()},throttle:function(e,t,n){var i,o,r,a=this,s=null,c=0;n||(n={});var l=function(){c=!1===n.leading?0:a.now(),s=null,r=e.apply(i,o),s||(i=o=null)};return function(){var u=a.now();c||!1!==n.leading||(c=u);var d=t-(u-c);return i=this,o=arguments,d<=0||d>t?(clearTimeout(s),s=null,c=u,r=e.apply(i,o),s||(i=o=null)):s||!1===n.trailing||(s=setTimeout(l,d)),r}},createRequestAnimationFrame:function(e){var t=null;return"auto"!==e&&e<60&&e>1&&(t=Math.floor(1e3/e)),null===t?window.requestAnimationFrame||n(33):n(t)}}},1260:function(e,t,n){(function(e){e.tk={AdobePrivacy:n(304),FontLoader:n(71),I18n:n(87),ImsLib:n(72)},n(86),n(1261),Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,344,7)).then((function(e){e.init()}))}).call(this,n(19))},1261:function(e,t,n){n(15).module("NeueApp",[n(1262),n(1264),n(1267),n(243),n(1269).name,n(1270)]).config(n(245)).controller("AddFontsToWebProjectController",n(1271)).controller("AdobeFontsFooterController",n(226)).controller("CollectionController",n(1272)).controller("CCXTemplatesController",n(1273)).controller("DesignerController",n(1274)).controller("FamiliesController",n(1275)).controller("FamilyAutoCompleteSearchController",n(1276)).controller("FamilyController",n(1277)).controller("FoundriesController",n(1278)).controller("FoundryController",n(1279)).controller("HeaderController",n(223)).controller("MarketplaceHeaderController",n(1280)).controller("HomeController",n(1281)).controller("MarketplaceHomeController",n(1282)).controller("MyFontsController",n(1283)).controller("NotificationController",n(247)).controller("RecommendationsController",n(1284)).controller("SearchResultsController",n(1285)).controller("SpectrumBrowseController",n(1286)).controller("VisualSearchesController",n(1287)).controller("WebfontProjectSelectorController",n(1289)).controller("WebfontProjectStyleSelectorController",n(1290)).controller("WebfontProjectStylesController",n(1291)).directive("dropdownBase",n(249)).directive("dropdownBaseButton",n(251)).directive("dropdownBaseContent",n(252)).directive("dropdownBaseItem",n(253)).directive("feedbackIcons",n(1292)).directive("largeWebProjectNotice",n(1294)).directive("spectrumDropdown",n(266)).directive("spectrumSlider",n(1296)).directive("tkAlignedSpecimen",n(268)).directive("tkSubsettingOptions",n(1298)).directive("tkWebProjectCard",n(1300)).directive("tkWebProjectDetails",n(1302)).directive("tkWebProjectDisplayFamily",n(1304)).directive("tkWebProjectEditorStyleSelector",n(1306)).directive("tkWebProjectEmbedCodeOptions",n(1308)).directive("tkWebProjectFamilyCard",n(1310)).directive("tkWebProjectList",n(1312)).directive("adobeFontsAutoComplete",n(1314)).directive("adobeFontsCarousel",n(1316)).directive("adobeFontsFiltersSidebar",n(1319)).directive("adobeFontsFontVariationList",n(1321)).directive("adobeFontsLocaleSwitcher",n(1323)).directive("adobeFontsPangramMenu",n(1325)).directive("adobeFontsFontpackCardList",n(1327)).directive("adobeFontsFontpackCard",n(1329)).directive("adobeFontsFamilyImageCardList",n(1331)).directive("adobeFontsFamilyImageCard",n(1333)).directive("fontDisplayOptions",n(1335)).directive("fontFamilyAccordion",n(1337)).directive("fontPreview",n(1339)).directive("requiredActionToggle",n(1341)).directive("displayInFont",n(248)).directive("familyCard",n(1342)).directive("filteredFamilyList",n(1344)).directive("fontpackHero",n(254)).directive("fontpackHeroVariation",n(260)).directive("fontpackHeroZoomInButton",n(261)).directive("fontpackHeroZoomOutButton",n(262)).directive("fontpackHeroZoomResetButton",n(263)).directive("fontVariationCard",n(1346)).directive("fontPairingCard",n(1348)).directive("fontSizeControl",n(1350)).directive("foundryLogo",n(264)).directive("stickyNav",n(1351)).directive("tabNavigation",n(1353)).directive("tkPaginate",n(1355)).directive("viewTypeControl",n(1357)).directive("scrollEventHandler",n(1358)).factory("AddFontsToWebProjectService",n(275)).factory("AnalyticsService",n(1359)).factory("AuthenticationService",n(161)).factory("DataService",n(157)).factory("DesignersService",n(1360)).factory("DialogService",n(269)).factory("FamiliesService",n(1361)).factory("FamilyAutocompleteSearchService",n(1362)).factory("FavoritesService",n(1363)).factory("FeedbackService",n(1364)).factory("FirstMileService",n(270)).factory("FilterDataService",n(1365)).factory("FilterVariationsService",n(1366)).factory("FilteredFamilyListStateService",n(1367)).factory("FloodgateService",n(1368)).factory("FontCountService",n(1369)).factory("FontLoaderService",n(271)).factory("FontpackService",n(1370)).factory("FoundriesService",n(1371)).factory("I18nService",n(158)).factory("ImsEventsService",n(224)).factory("MyFontsService",n(1372)).factory("NewrelicService",n(159)).factory("NewrelicClickTrackerService",n(1373)).factory("NotificationService",n(272)).factory("OmnitureService",n(280)).factory("PostLoginActionCreatorService",n(162)).factory("PostLoginActionProcessorService",n(284)).factory("RecommendationsService",n(1374)).factory("RedirectContextService",n(1375)).factory("VisualSearchService",n(1376)).factory("ScrollService",n(1377)).factory("SuspendedAccountService",n(273)).factory("SyncService",n(1378)).factory("TagsService",n(1379)).factory("TkWebProjectEditorService",n(1380)).factory("UrlService",n(160)).factory("UserService",n(225)).factory("UserPrefsService",n(274)).factory("YouTubeService",n(1387)).run(n(246))},1262:function(e,t,n){n(1263),e.exports="ngSanitize"},1263:function(e,t){!function(e,t,n){"use strict";var i=t.$$minErr("$sanitize");var o=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,r=/^<\/\s*([\w:-]+)[^>]*>/,a=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,s=/^</,c=/^<\//,l=/<!--(.*?)-->/g,u=/<!DOCTYPE([^>]*?)>/i,d=/<!\[CDATA\[(.*?)]]>/g,f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/([^\#-~| |!])/g,h=k("area,br,col,hr,img,wbr"),g=k("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=k("rp,rt"),v=t.extend({},m,g),y=t.extend({},g,k("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),S=t.extend({},m,k("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),_=k("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),b=k("script,style"),w=t.extend({},h,y,S,v,_),$=k("background,cite,href,longdesc,src,usemap,xlink:href"),x=k("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),C=k("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),F=t.extend({},$,C,x);function k(e,n){var i,o={},r=e.split(",");for(i=0;i<r.length;i++)o[n?t.lowercase(r[i]):r[i]]=!0;return o}var M=document.createElement("pre");function E(e){return e?(M.innerHTML=e.replace(/</g,"&lt;"),M.textContent):""}function P(e){return e.replace(/&/g,"&amp;").replace(f,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(p,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function T(e,n){var i=!1,o=t.bind(e,e.push);return{start:function(e,r,a){e=t.lowercase(e),!i&&b[e]&&(i=e),i||!0!==w[e]||(o("<"),o(e),t.forEach(r,(function(i,r){var a=t.lowercase(r),s="img"===e&&"src"===a||"background"===a;!0!==F[a]||!0===$[a]&&!n(i,s)||(o(" "),o(r),o('="'),o(P(i)),o('"'))})),o(a?"/>":">"))},end:function(e){e=t.lowercase(e),i||!0!==w[e]||(o("</"),o(e),o(">")),e==i&&(i=!1)},chars:function(e){i||o(P(e))}}}t.module("ngSanitize",[]).provider("$sanitize",(function(){this.$get=["$$sanitizeUri",function(e){return function(n){var f=[];return function(e,n){"string"!==typeof e&&(e=null===e||"undefined"===typeof e?"":""+e);var f,p,g,m,_=[],w=e;_.last=function(){return _[_.length-1]};for(;e;){if(m="",p=!0,_.last()&&b[_.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+_.last()+"[^>]*>","i"),(function(e,t){return t=t.replace(l,"$1").replace(d,"$1"),n.chars&&n.chars(E(t)),""})),x("",_.last())):(0===e.indexOf("\x3c!--")?(f=e.indexOf("--",4))>=0&&e.lastIndexOf("--\x3e",f)===f&&(n.comment&&n.comment(e.substring(4,f)),e=e.substring(f+3),p=!1):u.test(e)?(g=e.match(u))&&(e=e.replace(g[0],""),p=!1):c.test(e)?(g=e.match(r))&&(e=e.substring(g[0].length),g[0].replace(r,x),p=!1):s.test(e)&&((g=e.match(o))?(g[4]&&(e=e.substring(g[0].length),g[0].replace(o,$)),p=!1):(m+="<",e=e.substring(1))),p&&(m+=(f=e.indexOf("<"))<0?e:e.substring(0,f),e=f<0?"":e.substring(f),n.chars&&n.chars(E(m)))),e==w)throw i("badparse","The sanitizer was unable to parse the following block of html: {0}",e);w=e}function $(e,i,o,r){if(i=t.lowercase(i),y[i])for(;_.last()&&S[_.last()];)x("",_.last());v[i]&&_.last()==i&&x("",i),(r=h[i]||!!r)||_.push(i);var s={};o.replace(a,(function(e,t,n,i,o){var r=n||i||o||"";s[t]=E(r)})),n.start&&n.start(i,s,r)}function x(e,i){var o,r=0;if(i=t.lowercase(i))for(r=_.length-1;r>=0&&_[r]!=i;r--);if(r>=0){for(o=_.length-1;o>=r;o--)n.end&&n.end(_[o]);_.length=r}}x()}(n,T(f,(function(t,n){return!/^unsafe/.test(e(t,n))}))),f.join("")}}]})),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i;return function(o,r){if(!o)return o;for(var a,s,c,l=o,u=[];a=l.match(n);)s=a[0],a[2]||a[4]||(s=(a[3]?"http://":"mailto:")+s),c=a.index,d(l.substr(0,c)),f(s,a[0].replace(i,"")),l=l.substring(c+a[0].length);return d(l),e(u.join(""));function d(e){var n,i;e&&u.push((n=e,T(i=[],t.noop).chars(n),i.join("")))}function f(e,n){u.push("<a "),t.isDefined(r)&&u.push('target="',r,'" '),u.push('href="',e.replace(/"/g,"&quot;"),'">'),d(n),u.push("</a>")}}}])}(window,window.angular)},1264:function(e,t,n){n(15),n(1265),e.exports="duScroll"},1265:function(e,t,n){(function(e){var t=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollSpyRefreshInterval",0).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",(function(e){"use strict";return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2})).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");e&&e.exports&&(e.exports=t),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(e,t,n,i,o,r,a,s){"use strict";var c,l,u={},d=function(e){return"undefined"!==typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},f=function(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},p=function(e){return f(e)||d(e)?e:e[0]};u.duScrollTo=function(t,n,i,o){var r;if(angular.isElement(t)?r=this.duScrollToElement:angular.isDefined(i)&&(r=this.duScrollToAnimated),r)return r.apply(this,arguments);var a=p(this);if(d(a))return e.scrollTo(t,n);a.scrollLeft=t,a.scrollTop=n},u.duScrollToAnimated=function(e,r,a,u){a&&!u&&(u=o);var d=this.duScrollLeft(),f=this.duScrollTop(),p=Math.round(e-d),h=Math.round(r-f),g=null,m=0,v=this,y=function(e){(!e||m&&e.which>0)&&(s&&v.unbind(s,y),n(c),l.reject(),c=null)};if(c&&y(),l=t.defer(),0===a||!p&&!h)return 0===a&&v.duScrollTo(e,r),l.resolve(),l.promise;var S=function(e){null===g&&(g=e);var t=(m=e-g)>=a?1:u(m/a);v.scrollTo(d+Math.ceil(p*t),f+Math.ceil(h*t)),t<1?c=i(S):(s&&v.unbind(s,y),c=null,l.resolve())};return v.duScrollTo(d,f),s&&v.bind(s,y),c=i(S),l.promise},u.duScrollToElement=function(e,t,n,i){var o=p(this);angular.isNumber(t)&&!isNaN(t)||(t=a);var r=this.duScrollTop()+p(e).getBoundingClientRect().top-t;return f(o)&&(r-=o.getBoundingClientRect().top),this.duScrollTo(0,r,n,i)},u.duScrollLeft=function(t,n,i){if(angular.isNumber(t))return this.duScrollTo(t,this.duScrollTop(),n,i);var o=p(this);return d(o)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:o.scrollLeft},u.duScrollTop=function(t,n,i){if(angular.isNumber(t))return this.duScrollTo(this.duScrollLeft(),t,n,i);var o=p(this);return d(o)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:o.scrollTop},u.duScrollToElementAnimated=function(e,t,n,i){return this.duScrollToElement(e,t,n||r,i)},u.duScrollTopAnimated=function(e,t,n){return this.duScrollTop(e,t||r,n)},u.duScrollLeftAnimated=function(e,t,n){return this.duScrollLeft(e,t||r,n)},angular.forEach(u,(function(e,t){angular.element.prototype[t]=e;var n=t.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[n])&&(angular.element.prototype[n]=e)}))}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(e){"use strict";var t=["webkit","moz","o","ms"];return function(n,i){if(e[n])return e[n];for(var o,r=n.substr(0,1).toUpperCase()+n.substr(1),a=0;a<t.length;a++)if(e[o=t[a]+r])return e[o];return i}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=0;return e("requestAnimationFrame",(function(e,i){var o=(new Date).getTime(),r=Math.max(0,16-(o-n)),a=t((function(){e(o+r)}),r);return n=o+r,a}))}]).factory("cancelAnimation",["polyfill","$timeout",function(e,t){"use strict";return e("cancelAnimationFrame",(function(e){t.cancel(e)}))}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$interval","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollSpyRefreshInterval","duScrollBottomSpy","duScrollActiveClass",function(e,t,n,i,o,r,a,s,c,l,u){"use strict";var d={},f=function(n){var r=n.$id,c={spies:[]};return c.handler=function(n){var r=!1,c=!1,d=function(){c=!1;var t,r=n.container[0],s=0;if("undefined"!==typeof HTMLElement&&r instanceof HTMLElement||r.nodeType&&r.nodeType===r.ELEMENT_NODE)s=r.getBoundingClientRect().top,t=Math.round(r.scrollTop+r.clientHeight)>=r.scrollHeight;else{var d=o[0].body.scrollHeight||o[0].documentElement.scrollHeight;t=Math.round(i.pageYOffset+i.innerHeight)>=d}var f,p,h,g,m,v,y=l&&t?"bottom":"top";for(g=n.spies,p=n.currentlyActive,h=void 0,f=0;f<g.length;f++)(v=(m=g[f]).getTargetPosition())&&m.$element&&(l&&t||v.top+m.offset-s<20&&(a||-1*v.top+s)<v.height)&&(!h||h[y]<v[y])&&((h={spy:m})[y]=v[y]);h&&(h=h.spy),p===h||a&&!h||(p&&p.$element&&(p.$element.removeClass(u),e.$broadcast("duScrollspy:becameInactive",p.$element,angular.element(p.getTargetElement()))),h&&(h.$element.addClass(u),e.$broadcast("duScrollspy:becameActive",h.$element,angular.element(h.getTargetElement()))),n.currentlyActive=h)};return s?function(){r?c=!0:(d(),r=t((function(){r=!1,c&&d()}),s,!1))}:d}(c),d[r]=c,n.$on("$destroy",(function(){p(n)})),r},p=function(e){var t=e.$id,i=d[t],o=i.container;i.intervalPromise&&n.cancel(i.intervalPromise),o&&o.off("scroll",i.handler),delete d[t]},h=f(e),g=function(e){return d[e.$id]?d[e.$id]:e.$parent?g(e.$parent):d[h]},m=function(e){var t,n,i=e.$scope;if(i)return g(i);for(n in d)if(-1!==(t=d[n]).spies.indexOf(e))return t};return{addSpy:function(e){var t=m(e);t&&(t.spies.push(e),t.container&&function(e){for(;e.parentNode;)if((e=e.parentNode)===document)return!0;return!1}(t.container)||(t.container&&t.container.off("scroll",t.handler),t.container=r.getContainer(e.$scope),c&&!t.intervalPromise&&(t.intervalPromise=n(t.handler,c,0,!1)),t.container.on("scroll",t.handler).triggerHandler("scroll")))},removeSpy:function(t){var n=m(t);t===n.currentlyActive&&(e.$broadcast("duScrollspy:becameInactive",n.currentlyActive.$element),n.currentlyActive=null);var i=n.spies.indexOf(t);-1!==i&&n.spies.splice(i,1),t.$element=null},createContext:f,destroyContext:p,getContextForScope:g}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(e){"use strict";var t={},n=function(e){return t[e.$id]?e.$id:e.$parent?n(e.$parent):void 0};return{getContainerId:n,getContainer:function(i){var o=n(i);return o?t[o]:e},setContainer:function(e,n){var i=e.$id;return t[i]=n,i},removeContainer:function(e){var i=n(e);i&&delete t[i]}}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(e,t,n){"use strict";return{link:function(i,o,r){o.on("click",(function(o){if(r.href&&-1!==r.href.indexOf("#")||""!==r.duSmoothScroll){var a=r.href?r.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):r.duSmoothScroll,s=document.getElementById(a)||document.getElementsByName(a)[0];if(s&&s.getBoundingClientRect){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault();var c=r.offset?parseInt(r.offset,10):t,l=r.duration?parseInt(r.duration,10):e;n.getContainer(i).duScrollToElement(angular.element(s),isNaN(c)?0:c,isNaN(l)?0:l)}}}))}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,i){return{pre:function(t,n,i,o){e.createContext(t)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,i){return{pre:function(t,n,i,o){i.$observe("duScrollContainer",(function(i){angular.isString(i)&&(i=document.getElementById(i)),i=angular.isElement(i)?angular.element(i):n,e.setContainer(t,i),t.$on("$destroy",(function(){e.removeContainer(t)}))}))}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(e,t,n,i){"use strict";var o=function(e,t,n,i){angular.isElement(e)?this.target=e:angular.isString(e)&&(this.targetId=e),this.$scope=t,this.$element=n,this.offset=i};return o.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},o.prototype.getTargetPosition=function(){var e=this.getTargetElement();if(e)return e.getBoundingClientRect()},o.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(r,a,s){var c,l=s.ngHref||s.href;if(l&&-1!==l.indexOf("#")?c=l.replace(/.*(?=#[^\s]+$)/,"").substring(1):s.duScrollspy?c=s.duScrollspy:s.duSmoothScroll&&(c=s.duSmoothScroll),c){var u=n((function(){var n=new o(c,r,a,-(s.offset?parseInt(s.offset,10):t));e.addSpy(n),r.$on("$locationChangeSuccess",n.flushTargetCache.bind(n));var l=i.$on("$stateChangeSuccess",n.flushTargetCache.bind(n));r.$on("$destroy",(function(){e.removeSpy(n),l()}))}),0,!1);r.$on("$destroy",(function(){n.cancel(u)}))}}}}])}).call(this,n(1266)(e))},1266:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},1267:function(e,t,n){n(1268),e.exports="ngTouch"},1268:function(e,t){!function(e,t,n){"use strict";var i=t.module("ngTouch",[]);function o(e,n,o){i.directive(e,["$parse","$swipe",function(i,r){return function(a,s,c){var l,u,d=i(c[e]);var f=["touch"];t.isDefined(c.ngSwipeDisableMouse)||f.push("mouse"),r.bind(s,{start:function(e,t){l=e,u=!0},cancel:function(e){u=!1},end:function(e,t){(function(e){if(!l)return!1;var t=Math.abs(e.y-l.y),i=(e.x-l.x)*n;return u&&t<75&&i>0&&i>30&&t/i<.3})(e)&&a.$apply((function(){s.triggerHandler(o),d(a,{$event:t})}))}},f)}}])}i.factory("$swipe",[function(){var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};function n(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],i=t.changedTouches&&t.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function i(n,i){var o=[];return t.forEach(n,(function(t){var n=e[t][i];n&&o.push(n)})),o.join(" ")}return{bind:function(e,t,o){var r,a,s,c,l=!1;o=o||["mouse","touch"],e.on(i(o,"start"),(function(e){s=n(e),l=!0,r=0,a=0,c=s,t.start&&t.start(s,e)}));var u=i(o,"cancel");u&&e.on(u,(function(e){l=!1,t.cancel&&t.cancel(e)})),e.on(i(o,"move"),(function(e){if(l&&s){var i=n(e);if(r+=Math.abs(i.x-c.x),a+=Math.abs(i.y-c.y),c=i,!(r<10&&a<10))return a>r?(l=!1,void(t.cancel&&t.cancel(e))):(e.preventDefault(),void(t.move&&t.move(i,e)))}})),e.on(i(o,"end"),(function(e){l&&(l=!1,t.end&&t.end(n(e),e))}))}}}]),i.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),i.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,i){var o,r,a,s="ng-click-active";function c(e,t,n){for(var i=0;i<e.length;i+=2)if(o=e[i],r=e[i+1],a=t,s=n,Math.abs(o-a)<25&&Math.abs(r-s)<25)return e.splice(i,i+2),!0;var o,r,a,s;return!1}function l(e){if(!(Date.now()-o>2500)){var n,i=e.touches&&e.touches.length?e.touches:[e],s=i[0].clientX,l=i[0].clientY;if(!(s<1&&l<1))if(!a||a[0]!==s||a[1]!==l)a&&(a=null),"label"===(n=e.target,t.lowercase(n.nodeName||n[0]&&n[0].nodeName))&&(a=[s,l]),c(r,s,l)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur&&e.target.blur())}}function u(e){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,o=t[0].clientY;r.push(i,o),n((function(){for(var e=0;e<r.length;e+=2)if(r[e]==i&&r[e+1]==o)return void r.splice(e,e+2)}),2500,!1)}return function(n,a,d){var f,p,h,g,m=e(d.ngClick),v=!1;function y(){v=!1,a.removeClass(s)}a.on("touchstart",(function(e){v=!0,3==(f=e.target?e.target:e.srcElement).nodeType&&(f=f.parentNode),a.addClass(s),p=Date.now();var t=e.originalEvent||e,n=(t.touches&&t.touches.length?t.touches:[t])[0];h=n.clientX,g=n.clientY})),a.on("touchcancel",(function(e){y()})),a.on("touchend",(function(e){var n=Date.now()-p,s=e.originalEvent||e,m=(s.changedTouches&&s.changedTouches.length?s.changedTouches:s.touches&&s.touches.length?s.touches:[s])[0],S=m.clientX,_=m.clientY,b=Math.sqrt(Math.pow(S-h,2)+Math.pow(_-g,2));v&&n<750&&b<12&&(!function(e,t){r||(i[0].addEventListener("click",l,!0),i[0].addEventListener("touchstart",u,!0),r=[]),o=Date.now(),c(r,e,t)}(S,_),f&&f.blur(),t.isDefined(d.disabled)&&!1!==d.disabled||a.triggerHandler("click",[e])),y()})),a.onclick=function(e){},a.on("click",(function(e,t){n.$apply((function(){m(n,{$event:t||e})}))})),a.on("mousedown",(function(e){a.addClass(s)})),a.on("mousemove mouseup",(function(e){a.removeClass(s)}))}}]),o("ngSwipeLeft",-1,"swipeleft"),o("ngSwipeRight",1,"swiperight")}(window,window.angular)},1269:function(e,t,n){var i,o,r;o=[n(15)],void 0===(r="function"===typeof(i=function(e){return e.module("angular-clipboard",[]).factory("clipboard",["$document","$window",function(e,t){function n(n,i){var o=e[0].createElement("textarea");return o.style.position="absolute",o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.left="-10000px",o.style.top=(t.pageYOffset||e[0].documentElement.scrollTop)+"px",o.textContent=n,o}function i(t){try{e[0].body.style.webkitUserSelect="initial";var n=e[0].getSelection();n.removeAllRanges();var i=document.createRange();i.selectNodeContents(t),n.addRange(i),t.select(),t.setSelectionRange(0,999999);try{if(!e[0].execCommand("copy"))throw"failure copy"}finally{n.removeAllRanges()}}finally{e[0].body.style.webkitUserSelect=""}}function o(o,r){var a=t.pageXOffset||e[0].documentElement.scrollLeft,s=t.pageYOffset||e[0].documentElement.scrollTop,c=r&&r.container||e[0].body,l=n(o,r);c.appendChild(l),i(l),t.scrollTo(a,s),c.removeChild(l)}return{copyText:o,supported:"queryCommandSupported"in e[0]&&e[0].queryCommandSupported("copy")}}]).directive("clipboard",["clipboard",function(t){return{restrict:"A",scope:{onCopied:"&",onError:"&",text:"=",supported:"=?"},link:function(n,i){n.supported=t.supported,i.on("click",(function(o){try{t.copyText(n.text,i[0]),e.isFunction(n.onCopied)&&n.$evalAsync(n.onCopied())}catch(r){e.isFunction(n.onError)&&n.$evalAsync(n.onError({err:r}))}}))}}}])})?i.apply(t,o):i)||(e.exports=r)},1270:function(e,t,n){angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(e,t,n,i){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(o,r,a){var s,c,l,u,d,f,p,h,g,m,v,y,S,_,b,w,$,x;return x=angular.element(t),_=null,b=null,l=null,u=null,v=!0,$=!1,w=null,c=!1,m=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight},y=function(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+S(e)},S=function(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset},g=function(){var t,i,a;return u===x?(t=m(u)+S(u[0].document.documentElement),a=y(r)+m(r)):(t=m(u),i=0,void 0!==y(u)&&(i=y(u)),a=y(r)-i+m(r)),$&&(a=m((r[0].ownerDocument||r[0].document).documentElement)),a-t<=m(u)*_+1?(l=!0,b?o.$$phase||e.$$phase?o.infiniteScroll():o.$apply(o.infiniteScroll):void 0):(c&&n.cancel(c),l=!1)},null!=i&&(g=function(e,t){var i,o,r;return r=null,o=0,i=function(){return o=(new Date).getTime(),n.cancel(r),r=null,e.call()},function(){var a,s;return a=(new Date).getTime(),(s=t-(a-o))<=0?(n.cancel(r),r=null,o=a,e.call()):r?void 0:r=n(i,s,1)}}(g,i)),o.$on("$destroy",(function(){if(u.unbind("scroll",g),null!=w&&(w(),w=null),c)return n.cancel(c)})),p=function(e){return _=parseFloat(e)||0},o.$watch("infiniteScrollDistance",p),p(o.infiniteScrollDistance),f=function(e){if((b=!e)&&l)return l=!1,g()},o.$watch("infiniteScrollDisabled",f),f(o.infiniteScrollDisabled),h=function(e){return $=e},o.$watch("infiniteScrollUseDocumentBottom",h),h(o.infiniteScrollUseDocumentBottom),(s=function(e){if(null!=u&&u.unbind("scroll",g),u=e,null!=e)return u.bind("scroll",g)})(x),o.infiniteScrollListenForEvent&&(w=e.$on(o.infiniteScrollListenForEvent,g)),d=function(e){if(null!=e&&0!==e.length){if(e.nodeType&&1===e.nodeType?e=angular.element(e):"function"===typeof e.append?e=angular.element(e[e.length-1]):"string"===typeof e&&(e=angular.element(document.querySelector(e))),null!=e)return s(e);throw new Error("invalid infinite-scroll-container attribute.")}},o.$watch("infiniteScrollContainer",d),d(o.infiniteScrollContainer||[]),null!=a.infiniteScrollParent&&s(angular.element(r.parent())),null!=a.infiniteScrollImmediateCheck&&(v=o.$eval(a.infiniteScrollImmediateCheck)),c=n((function(){return v&&g(),n.cancel(c)}))}}}]),e.exports===t&&(e.exports="infinite-scroll")},1271:function(e,t){function n(e){this.addFontsToWebProjectModel=e.getAddFontsToWebProjectModel()}n.$inject=["AddFontsToWebProjectService"],n.prototype.getEmbedCodeModel=function(){return this.addFontsToWebProjectModel.getEmbedCodeModel()},n.prototype.doFamiliesExistInProject=function(){return this.addFontsToWebProjectModel.doFamiliesExistInProject()},n.prototype.getAllButLastExistingFamiliesInProject=function(){return this.addFontsToWebProjectModel.getExistingFamiliesInProject().slice(0,-1)},n.prototype.getLastExistingFamilyInProject=function(){return this.addFontsToWebProjectModel.getExistingFamiliesInProject().slice(-1)[0]},n.prototype.getNumberOfExistingFamiliesInProject=function(){return this.addFontsToWebProjectModel.getExistingFamiliesInProject().length},n.prototype.isFamilyCJK=function(){return this.addFontsToWebProjectModel.isFamilyCJK()},n.prototype.isExistingProjectSelected=function(){return Boolean(this.addFontsToWebProjectModel.getSelectedProjectID())},n.prototype.getSelectedProjectName=function(){return this.addFontsToWebProjectModel.getSelectedProjectName()},n.prototype.didSaveSucceed=function(){return this.addFontsToWebProjectModel.didSaveSucceed()},n.prototype.isSaveButtonDisabled=function(){return this.addFontsToWebProjectModel.didAttemptSave()||!this.addFontsToWebProjectModel.isSaveValid()},n.prototype.handleSaveButtonClicked=function(){if(this.isSaveButtonDisabled()){var e=document.querySelector("#webfont-project-selector-search-box");e&&e.focus()}else this.addFontsToWebProjectModel.save()},n.prototype.handleCancelButtonClicked=function(){this.addFontsToWebProjectModel.closeDialog()},n.prototype.getAddedFontsCount=function(){return this.addFontsToWebProjectModel.getAddedFontsCount()},n.prototype.getAddedToProjectName=function(){return this.addFontsToWebProjectModel.getAddedToProjectName()},n.prototype.getAddedToProjectEditorLink=function(){return this.addFontsToWebProjectModel.getAddedToProjectEditorLink()},n.prototype.handleDoneButtonClicked=function(){this.addFontsToWebProjectModel.closeDialog()},e.exports=n},1272:function(e,t,n){o.$inject=["$scope","$q","$timeout","DataService","DialogService","FilteredFamilyListStateService","FontLoaderService","FontpackService","NewrelicClickTrackerService","NotificationService","SyncService","UserService"];var i=n(4);function o(e,t,n,i,o,r,a,s,c,l,u,d){var f=this;f.$scope=e,f.$q=t,f.$timeout=n,f.DataService=i,f.DialogService=o,f.FilteredFamilyListStateService=r,f.FontLoaderService=a,f.FontpackService=s,f.NotificationService=l,f.SyncService=u,f.UserService=d,c.init({page:"collections"}),f.viewType="list",f.$scope.$watch(f.fontpack),f._preloadData()}o.prototype.getDisplayFont=function(e){var t=this.textSampleData.textSamples[e.default_language].feature_settings,n=this.textSampleData.textSamples[e.default_language].kana_only,i=this.textSampleData.textSamples[e.default_language].unicode_range;return{cssName:e.css_name,featureSettings:t,fvd:e.fvd,isDynamic:!0,kanaOnly:n,opaqueId:e.opaque_id,unicodeRange:i}},o.prototype.getExampleText=function(e){return i.isEmpty(e)||this._isSelectedExampleTextSupported(e)?this.exampleText.value:this.textSampleData.textSamples[e.default_language].list},o.prototype.getExampleTextStyle=function(){return{fontSize:this.exampleText.size+"px"}},o.prototype.getHeroCardExampleText=function(e){var t=this.textSampleData.textSamples[e.default_language||"en"];return t.kana_only?t.grid_kana:t.grid},o.prototype.getHeroCardExampleTextClass=function(e){return"ja"===e.default_language?"collection-show__hero-variation-sample-japanese":"collection-show__hero-variation-sample"},o.prototype.getTextDirectionClass=function(e){return e.rtl?"sample-right":""},o.prototype.handleUnsyncButtonClick=function(e){this.FontpackService.unsyncFontpack(this.fontpack,e,this.i18n)},o.prototype.isFontpackSynced=function(){return this.FontpackService.isFontpackSynced(this.fontpack.slug)},o.prototype.isGetFontsButtonVisible=function(){return!this.requiresUpgrade()&&!this.isFontpackSynced()},o.prototype.isUnsyncFontsButtonVisible=function(){return this.isFontpackSynced()},o.prototype.requiresUpgrade=function(){return this.FontpackService.requiresUpgrade(this.fontpack.slug)},o.prototype.isUpgradeMessageAvailable=function(){return this.requiresUpgrade()&&!this.UserService.hasPaidCreativeCloud()},o.prototype.isNotAvailableMessageVisible=function(){return this.requiresUpgrade()&&!this.isUpgradeMessageAvailable()},o.prototype.shouldShowGridView=function(){return"grid"===this.viewType},o.prototype.shouldShowListView=function(){return"list"===this.viewType},o.prototype.syncFontpack=function(e){this.FontpackService.syncFontpack(this.fontpack,e,this.i18n)},o.prototype.updateFonts=function(){this.FontLoaderService.updateFonts(this.exampleText.value)},o.prototype._isSelectedExampleTextSupported=function(e){var t=i.map(e.unicode_range.split(","),(function(e){return String.fromCharCode(parseInt(e.replace("U+",""),16))})),n=this.exampleText.value.split(""),o=i.difference(n,t);return i.isEmpty(o)},o.prototype._preloadData=function(){var e=this;return e.$q.all([e.DataService.get("/preloaded_collection_data").then((function(t){e.fontpack=t.fontpack,e.groups=t.fontpack.group_metadata,e.items=t.fontpack.font_variations,e.textSampleData=t.textSampleData,e._setExampleText(),e.FontpackService.addFontpacks([e.fontpack])})),e.DataService.get("/fontpack/i18n").then((function(t){e.i18n=t}))])},o.prototype._setExampleText=function(){var e=this,t=i.first(i.uniq(i.pluck(e.items||[],"default_language")))||"en",n=e.textSampleData.textSamples[t];e.exampleText={value:n.kana_only?n.list_kana:n.list,size:36},e.featureSettings=n.feature_settings,e.unicodeRange=n.unicode_range},e.exports=o},1273:function(e,t){n.$inject=["UrlService","$http"];function n(e,t){var n=this;n.UrlService=e,n.$http=t,n.isLoading=!0,n.columns=[1,2,3,4,5];var i=e.getSearchParam("family");i?n.searchByFamily(i):n.loadSeasonalTemplates("usa",12,"")}n.prototype.fetchTemplates=function(e,t){return this.$http({method:"POST",url:"https://cchome-dev.adobe.io/int/v1/models",headers:{"x-api-key":"up-ccx-phsp","Content-Type":"application/json","x-csrf-token":void 0},data:JSON.stringify({endpoint:e,contentType:"application/json",payload:{data:t}})})},n.prototype.handleSearchTermChange=function(){this.loadSeasonalTemplates(this.locale,this.week,this.keyword)},n.prototype.loadSeasonalTemplates=function(e,t,n){var i=this;i.isLoading=!0;var o={query:["country:"+e,"event_week:"+t,"keywords:"+n],response_count:40};i.fetchTemplates("seasonal-fonts-v8",o).then((function(e){var t=e.data.data.templates.map((function(e){return{fonts:e.fonts,src:e.thumbnail,remix:"https://express.adobe.com/sp/design/post/template/"+e.id,dimensions:e.size}}));i.updateTemplateList(t),i.isLoading=!1}))},n.prototype.searchByFamily=function(e){var t=this;t.isLoading=!0,t.fetchTemplates("seasonal-fonts-to-templates",{family:e}).then((function(e){var n=e.data.data.map((function(e){return{fonts:[],src:e.url,remix:"https://express.adobe.com/sp/design/post/template/"+e.id,dimensions:[0,0]}}));t.updateTemplateList(n),t.isLoading=!1}))},n.prototype.updateTemplateList=function(e){var t=document.querySelector(".ccx-templates");t&&(t.items=e)},n.prototype.emptyCardData=["recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-small","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium"],e.exports=n},1274:function(e,t){function n(e,t,n,i,o,r){this.$q=e,this.DataService=t,this.FilterDataService=i,this.DesignersService=n,this.FilteredFamilyListStateService=o,this.UserPrefsService=r,this._preloadData()}n.$inject=["$q","DataService","DesignersService","FilterDataService","FilteredFamilyListStateService","UserPrefsService"],n.prototype._preloadData=function(){var e=this;return e.$q.all([e.UserPrefsService.getUserPrefs().then((function(t){e.DataService.get("/neue/preloaded_designer_data").then((function(n){e.filteredFamilyList=e.FilteredFamilyListStateService.getState(null,t),e.filteredFamilyList.families=n.familiesData.families,e.filteredFamilyList.totalFamilies=n.familiesData.totalFamilies,e.filteredFamilyList.totalPages=n.familiesData.totalPages,e.designerSlug=n.designerSlug,e.textSampleData=n.textSampleData,e.filtersModel=e.FilterDataService.getFilterModel()}))}))])},n.prototype.updateFilteredFamilyList=function(){var e=this;e.filtersModel.setCurrentPage(e.filteredFamilyList.currentPage),e.DesignersService.getFamilies(e.designerSlug,e.filtersModel.toSearchParams()).then((function(t){e.filteredFamilyList.families=t.data.families_data.families,e.filteredFamilyList.totalFamilies=t.data.families_data.totalFamilies,e.filteredFamilyList.totalPages=t.data.families_data.totalPages,e.textSampleData.textSamplePrimers=t.data.text_sample_primers})),e.FilteredFamilyListStateService.updateState(e.filteredFamilyList)},e.exports=n},1275:function(e,t,n){s.$inject=["$cookies","$document","$scope","$timeout","$window","DataService","FamiliesService","FeedbackService","FilterDataService","FilteredFamilyListStateService","I18nService","NewrelicClickTrackerService","NewrelicService","NotificationService","ScrollService","TagsService","UserService","UserPrefsService"];var i=n(4),o=n(15),r=n(110),a={"art-deco":"neue.browse.seo_tag_header_text.art_deco.seo_blurb",blackletter:"neue.browse.seo_tag_header_text.blackletter.seo_blurb","brush-pen":"neue.browse.seo_tag_header_text.brush_pen.seo_blurb",calligraphic:"neue.browse.seo_tag_header_text.calligraphic.seo_blurb",clean:"neue.browse.seo_tag_header_text.clean.seo_blurb",college:"neue.browse.seo_tag_header_text.college.seo_blurb",comic:"neue.browse.seo_tag_header_text.comic.seo_blurb",cursive:"neue.browse.seo_tag_header_text.cursive.seo_blurb",friendly:"neue.browse.seo_tag_header_text.friendly.seo_blurb",fun:"neue.browse.seo_tag_header_text.fun.seo_blurb",funky:"neue.browse.seo_tag_header_text.funky.seo_blurb",futuristic:"neue.browse.seo_tag_header_text.futuristic.seo_blurb",geometric:"neue.browse.seo_tag_header_text.geometric.seo_blurb",horror:"neue.browse.seo_tag_header_text.horror.seo_blurb",inline:"neue.browse.seo_tag_header_text.inline.seo_blurb",luxury:"neue.browse.seo_tag_header_text.luxury.seo_blurb",marker:"neue.browse.seo_tag_header_text.marker.seo_blurb",ornaments:"neue.browse.seo_tag_header_text.ornaments.seo_blurb",rough:"neue.browse.seo_tag_header_text.rough.seo_blurb",rounded:"neue.browse.seo_tag_header_text.rounded.seo_blurb",school:"neue.browse.seo_tag_header_text.school.seo_blurb",shaded:"neue.browse.seo_tag_header_text.shaded.seo_blurb",stencil:"neue.browse.seo_tag_header_text.stencil.seo_blurb",typewriter:"neue.browse.seo_tag_header_text.typewriter.seo_blurb",wedding:"neue.browse.seo_tag_header_text.wedding.seo_blurb",western:"neue.browse.seo_tag_header_text.western.seo_blurb"};function s(e,t,n,r,a,s,c,l,u,d,f,p,h,g,m,v,y,S){var _=this;_.$cookies=e,_.$document=t,_.$scope=n,_.$window=a,_.DataService=s,_.FamiliesService=c,_.FeedbackService=l,_.FilterDataService=u,_.FilteredFamilyListStateService=d,_.I18nService=f,_.NewrelicService=h,_.NotificationService=g,_.ScrollService=m,_.TagsService=v,_.UserService=y,_.UserPrefsService=S,p.init({page:"browse"}),_._preloadData(),_._initWindowSizeWatcher(),r((function(){_.updateFilterListVisibilityForWindowSize()})),_._handleFiltersChangeWithDebounce=i.debounce(o.bind(_,_._handleFiltersChangeWithoutDebounce),100)}s.prototype.getTagBackgroundClass=function(){if(this.filtersModel){var e=this.filtersModel.toSearchParams().tag;if(e)return this.TagsService.TAG_BACKGROUND_CLASS_MAP[e]}},s.prototype.getTagHeaderCopy=function(){var e=this;if(e._i18n&&this.filtersModel){var t=this.filtersModel.toSearchParams().tag;if(t){var n=i.find(this.filtersModel.getTags()||[],(function(e){return e.key===t}));if(n){var o=a[t];if(o)return e.I18nService.getMessage(e._i18n,o,{family_count:this.filteredFamilyList.totalFamilies,tag_name:n.label})}}}},s.prototype.getTagHeaderFontDisplayData=function(){if(this.shouldShowDisplayFont()){var e=this.getTagHeaderTagData();if(e)return this.filtersModel.getFontDisplayData(e)}},s.prototype.getTagHeaderTagData=function(){if(this.filtersModel){var e=this.filtersModel.toSearchParams().tag;if(e)return this.filtersModel.getTagByKey(e)}},s.prototype.getTagHeaderLabel=function(){var e=this.getTagHeaderTagData();if(e)return e.label},s.prototype.handleFilteredFamilyListUserPrefsChange=function(){this.UserPrefsService.updatePrefs(this.filteredFamilyList)},s.prototype.handleFilteredFamilyListChange=function(){this.filtersModel.setCurrentPage(this.filteredFamilyList.currentPage),this.handleFiltersChange()},s.prototype.handleFiltersChange=function(){this.filtersModel.setLoading(!0),this._handleFiltersChangeWithDebounce()},s.prototype.isBrowseModeSelected=function(e){return this.filtersModel&&this.filtersModel.getBrowseMode()==e.id},s.prototype.isFilterListHidden=function(){return this._isFilterListHiddenByUser||this._isFilterListHiddenForSmallScreen},s.prototype.isTagHeaderVisible=function(){if(this.filtersModel){var e=this.filtersModel.toSearchParams().tag;return!!e&&!!this.TagsService.TAG_BACKGROUND_CLASS_MAP[e]}},s.prototype.shouldShowDisplayFont=function(){var e=this.getTagHeaderTagData();if(e)return!!e.font&&!["ja_JP","ko_KR","ru_RU","zh_CN","zh_TW"].includes(this.filtersModel.getLocale())},s.prototype.toggleFilters=function(){this._isFilterListHiddenByUser=!this.isFilterListHidden(),this._isFilterListHiddenForSmallScreen=!1},s.prototype.toggleTagFeedbackNotification=function(){var e=this;e.DataService.get("/tag_feedback_notification/i18n").then((function(t){e.UserPrefsService.getUserPrefs().then((function(n){!n.hideTagFeedbackNotification&&e.filtersModel.isAnyTagSelected()&&e.filteredFamilyList.totalFamilies>0?e.NotificationService.addFeedbackNotification(t["neue.browse.tag_feedback_notification"],{category:"tag",skipTimeout:!0,tooltipText:t["neue.families.tag_feedback.family_tooltip"]}):e.NotificationService.removeFeedbackNotification()}))}))},s.prototype.updateFilterListVisibilityForWindowSize=function(){var e=this;e._getWindowWidth()!=e._previousWindowWidth&&(e._previousWindowWidth=e._getWindowWidth(),e.$scope.$apply((function(){e._isFilterListHiddenForSmallScreen=e._getWindowWidth()<=880})))},s.prototype._handleFiltersChangeWithoutDebounce=function(){var e=this,t=this.filtersModel.toSearchParams();e.FamiliesService.get(t).then((function(t){e.filteredFamilyList.families=t.data.families_data.families,e.filteredFamilyList.totalFamilies=t.data.families_data.totalFamilies,e.filteredFamilyList.totalPages=t.data.families_data.totalPages,e.filteredFamilyList.familyCountMessage=t.data.families_data.familyCountMessage,e.textSampleData=t.data.text_sample_data,e.toggleTagFeedbackNotification(),e.filtersModel.setLoading(!1)})),e.filteredFamilyList.currentPage=e.filtersModel.getCurrentPage(),e.filteredFamilyList.browseMode=e.filtersModel.getBrowseMode(),e.FilteredFamilyListStateService.updateUrl(t),e.FeedbackService.setFiltersModel(this.filtersModel)},s.prototype._initWindowSizeWatcher=function(){var e=this;e.$window.addEventListener("resize",(function(){e.isFilterListHiddenByUser||e.updateFilterListVisibilityForWindowSize()}))},s.prototype._setLanguageFilters=function(e){var t=this;t.filteredFamilyList.selectedLanguages.length>0?t.filteredFamilyList.selectedLanguages.forEach((function(e){t.filtersModel.selectLanguageMode(e)})):"default"===e?t.filtersModel.setBrowseMode(e):"japanese"===e?t.filtersModel.selectLanguageMode("ja"):t.filtersModel.selectLanguageMode(e)},s.prototype._preloadData=function(){var e=this;e.UserPrefsService.getUserPrefs().then((function(t){e.DataService.get("/families/i18n").then((function(t){e._i18n=t})),e.DataService.get("/neue/preloaded_family_data").then((function(n){e.filteredFamilyList=e.FilteredFamilyListStateService.getState(n.user,t),e.filteredFamilyList.families=n.familiesData.families,e.filteredFamilyList.totalFamilies=n.familiesData.totalFamilies,e.filteredFamilyList.totalPages=n.familiesData.totalPages,e.textSampleData=n.textSampleData,e.filtersModel=e.FilterDataService.getFilterModel({allFilters:n.familyFilters,collection:e.filteredFamilyList.collection,filterData:n.familyFilterData,hideLibraryOption:e.UserService.hasPaidCreativeCloud(),isTagsModuleVisible:n.isTagsModuleVisible,languages:n.languageFilters,locale:n.locale,tags:n.tagsFilters,signedOutState:!n.user,textSamples:e.textSampleData&&e.textSampleData.textSamples}),e.allBrowseModes=n.browseModes,e._setLanguageFilters(t.browseMode||e.allBrowseModes[0].id),e.filtersModel.selectTag(e.filteredFamilyList.selectedTag),e.filtersModel.setSelectedFilters(e.filteredFamilyList.selectedFilters),e.filtersModel.setHideImages(e.filteredFamilyList.hideImages),e.filtersModel.setShowPaidFonts(e.filteredFamilyList.showPaidFonts||t.showPaidFonts,!1),e.filtersModel.setShowBasicLibrary(t.showBasicLibrary),26===e.filteredFamilyList.minStyles&&26===e.filteredFamilyList.maxStyles?(e.filtersModel.clearNumberOfStyles(),e.FilteredFamilyListStateService.updateUrl(e.filtersModel.toSearchParams())):(e.filtersModel.setMinStyles(e.filteredFamilyList.minStyles),e.filtersModel.setMaxStyles(e.filteredFamilyList.maxStyles)),e.filteredFamilyList.familyCountMessage=n.familyCountMessage,e.FeedbackService.setFiltersModel(e.filtersModel),e.toggleTagFeedbackNotification(),r.areWebComponentsEnabled()&&e._webComponents_initFilterSidebar()}))}))},s.prototype._getWindowWidth=function(){return this.$document[0].documentElement.clientWidth},s.prototype._webComponents_initFilterSidebar=function(){var e=this,t=e.$document.find("af-filter-sidebar")[0];if(t){r.modules.get("addMessages")(e.filtersModel.webComponents_getI18nForFilters()),e.UserPrefsService.getUserPrefs().then((function(n){e.filtersModel.setShowPaidFonts(!1!==n.showPaidFonts,!0),t.showPaidFontsChecked=e.filtersModel.getShowPaidFonts()})),t.showPaidFontsSection=e.filtersModel.getShowLibraryOption(),t.languages=e.filtersModel.getLanguages(),t.tags=e.filtersModel.webComponents_getTagDataForFilterSidebar(),this.__webComponents_syncSidebarAttributes(t);var n=r.modules.get("ClearFiltersEvent");t.addEventListener(n.EVENT_NAME,(function(){e.filtersModel.clearAll(),e.__webComponents_handleSidebarEvent(t)}));var i=r.modules.get("ShowPaidFontsToggleEvent");t.addEventListener(i.EVENT_NAME,(function(n){e.filtersModel.setShowPaidFonts(n.detail.showPaidFonts,!0),e.__webComponents_handleSidebarEvent(t)}));var o=r.modules.get("FilterToggleEvent");t.addEventListener(o.EVENT_NAME,(function(n){e.filtersModel.toggleFilter(n.detail.filterKey),e.NewrelicService.addPageAction("typekit.browse.click",{filterName:n.detail.filterKey}),e.__webComponents_handleSidebarEvent(t)}));var a=r.modules.get("NumberOfFontsSliderEvent");t.addEventListener(a.EVENT_NAME,(function(n){"min"==n.detail.handleName?e.filtersModel.setMinStyles(n.detail.value):e.filtersModel.setMaxStyles(n.detail.value),e.__webComponents_handleSidebarEvent(t)})),t.fontsInFamilyMin=e.filtersModel.getMinStyles(),t.fontsInFamilyMax=e.filtersModel.getMaxStyles();var s=r.modules.get("LanguageFilterToggleEvent");t.addEventListener(s.EVENT_NAME,(function(n){e.filtersModel.setSelectedLanguage(n.detail.language),e.filtersModel.setSelectedLanguageMode(n.detail.language),e.__webComponents_handleSidebarEvent(t)}));var c=r.modules.get("TagToggleEvent");t.addEventListener(c.EVENT_NAME,(function(n){e.filtersModel.toggleTag(n.detail.tag),e.NewrelicService.addPageAction({tagName:n.detail.tag}),e.__webComponents_handleSidebarEvent(t)}))}},s.prototype.__webComponents_handleSidebarEvent=function(e){this.handleFiltersChange(),this.__webComponents_syncSidebarAttributes(e)},s.prototype.__webComponents_syncSidebarAttributes=function(e){var t=this;e.browseMode=t.filtersModel.getBrowseMode(),e.selectedTags=[t.filtersModel.getSelectedTag()],e.selectedLanguage=t.filtersModel.getSelectedLanguages()[0]||"all",e.selectedFilters=t.filtersModel.getSelectedFilters(),e.fontsInFamilyMin=t.filtersModel.getMinStyles(),e.fontsInFamilyMax=t.filtersModel.getMaxStyles()},e.exports=s},1276:function(e,t){function n(e){this.autocompleteService=e}n.$inject=["FamilyAutocompleteSearchService"],e.exports=n},1277:function(e,t,n){a.$inject=["$document","$q","$timeout","$scope","$window","AddFontsToWebProjectService","AuthenticationService","DataService","FavoritesService","FilteredFamilyListStateService","FilterVariationsService","FirstMileService","FontLoaderService","I18nService","NewrelicService","NewrelicClickTrackerService","NotificationService","RecommendationsService","RedirectContextService","ScrollService","SyncService","UserPrefsService","UserService"];var i=n(4),o=n(15),r="-section";function a(e,t,n,i,r,a,s,c,l,u,d,f,p,h,g,m,v,y,S,_,b,w,$){var x=this;x.$document=e,x.$q=t,x.$scope=i,x.$timeout=n,x.$window=r,x.AddFontsToWebProjectService=a,x.AuthenticationService=s,x.DataService=c,x.FavoritesService=l,x.FilteredFamilyListStateService=u,x.FilterVariationsService=d,x.FirstMileService=f,x.FontLoaderService=p,x.I18nService=h,x.NewrelicService=g,x.NotificationService=v,x.RecommendationsService=y,x.RedirectContextService=S,x.ScrollService=_,x.SyncService=b,x.UserPrefsService=w,x.UserService=$,m.init({page:"family detail"}),x.windowIsScrolling=!1,x._preloadData().then((function(){x._handleContext()})),o.element(document).ready((function(){x.$timeout((function(){x.$scope.$watch((function(){return location.hash}),(function(e){""!==e&&(history.state&&!history.state.navigationTabClicked||x._scrollOnLoad(e))})),x.$scope.$watch((function(){return x.$window.pageYOffset}),(function(){x.windowIsScrolling||x._updateAnchor()}))}))}))}a.prototype._scrollOnLoad=function(e){var t=this,n=e.substr(1,e.indexOf(r)-1),i=e.substr(e.indexOf(r)+r.length+1);if("details"===n&&""!==i){var o=t.getVariationFromSlug(i);o&&t.setSelectedVariation(o)}t._selectTabFromAnchor(n),t._scrollToAnchor(n,e)},a.prototype.getVariationFromSlug=function(e){return i.find(this.filteredFonts,(function(t){return e===t.slug}))},a.prototype.handleSimilarFontsAndPairingsLinkClick=function(e){this.setSelectedVariation(e),location.href="#details-section+"+e.slug},a.prototype.isFlagged=function(e){return"negative"===e.selectedFeedback},a.prototype.activateFamilyLabel=function(){var e=this.syncableFonts.length-this.activatedFontCount;return 1===e?this.I18nService.getMessage(this._i18n,"browse.families.show.activate_one_font"):this.I18nService.getMessage(this._i18n,"browse.families.show.activate_n_fonts",{num_fonts:e})},a.prototype.activateSubfamily=function(e,t){var n=this;n._keepSubfamilyDropdownOpen(),n.NewrelicService.addPageAction("typekit.click.activate-subfamily",{subfamily:e,fontCount:t.length}),n.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_fonts",{font_ids:i.pluck(t,"id")}).then((function(){n._sync(t)}))},a.prototype.handleDeactivationClick=function(e){this.activatedFontCount--;var t=i.pluck(e,"id");this._updateSelectionStatus(t,!1)},a.prototype.filterFontsByRequiredActions=function(e){var t=this.FilterVariationsService.filterRequiredActionsByToggles(this.family.fonts,e);this.preferredAction=t.preferred,this.filteredNavigationTabs=this._filterTabs(),this.filteredFonts=this.FilterVariationsService.filterFontsByRequiredActions(this.family.fonts,t.filters)},a.prototype.favoriteToggleClass=function(){return this.family&&this.family.favorite?"favorite-toggle-icon on":"favorite-toggle-icon"},a.prototype.fontVariationCardsClass=function(){return"grid"===this.viewType?"font-variations-grid-view":"font-variation-list"},a.prototype.getDesignersForSelectedVariation=function(){if(this.designerInfo){var e=this;return i.compact(i.map(e.selectedVariation.designers,(function(t){return e.designerInfo[t.slug]})))}},a.prototype.getFontDisplayData=function(e){var t=this._fontByWebFvd(e,"n4");t=(t=(t=(t=(t=t||this._fontByWebFvd(e,"n5"))||this._fontByWebFvd(e,"n3"))||this._fontByWebFvd(e,"n2"))||this._fontByWebFvd(e,"n1"))||e[Math.floor(e.length/2)];var n=this.textSampleData.textSamples[t.default_language].unicode_range,i=this.textSampleData.textSamples[t.default_language].feature_settings,o=this.textSampleData.textSamples[t.default_language].kana_only;return o||(o=!1),{cssName:t.family.web_id+"-"+t.font.web.fvd,fvd:t.font.web.fvd,isDynamic:!0,opaqueId:t.family.web_id,unicodeRange:n,featureSettings:i,kanaOnly:o}},a.prototype.handleAddToWebProjectButton=function(){this.AddFontsToWebProjectService.addFamilyToWebProjectWithAuthentication(this.family.slug)},a.prototype.handleVariationDetailsClick=function(e){this.setSelectedVariation(e),this._scrollToAnchor("details","#details-section+"+this.selectedVariation.slug)},a.prototype.setSelectedVariation=function(e){this.selectedVariation=e,this.getSelectedVariationSimilarities(),this.getSelectedVariationPairings()},a.prototype.handleRecommendedVariationDetailsClick=function(e){var t=i.findIndex(this.variationMenuItems,(function(t){return t.value.id===e.id}));this.handleVariationDetailsClick(this.variationMenuItems[t].value)},a.prototype.handleActivationClick=function(e){this.activatedFontCount++;var t=i.pluck(e,"id");this._updateSelectionStatus(t,!0)},a.prototype.isAllSynced=function(e){var t=this.syncedFonts(e).length;return t>0&&t===e.length},a.prototype.isAddToWebProjectButtonVisible=function(){return this._availableForWeb()&&!this._allFontsRequireWebAction()},a.prototype.isDefaultJapaneseLanguageSelected=function(){return"ja"==this.selectedVariation.default_language},a.prototype.isDefaultEnglishLanguageSelected=function(){return"en"==this.selectedVariation.default_language},a.prototype.isStickyNavDisabled=function(){return this.$window.innerWidth<768},a.prototype.getCarouselListClass=function(e){return e>2?"adobe-fonts-family__carousel-list":""},a.prototype.isQuickMultiSyncAvailable=function(){return this.syncableFonts.length>0&&!this.isSubfamilyActivateAvailable()},a.prototype.isQuickMultiSyncVisible=function(){return!this.isAllSynced(this.syncableFonts)},a.prototype.isQuickMultiUnsyncVisible=function(){return this.isAllSynced(this.syncableFonts)},a.prototype.isSubfamilyActivateAvailable=function(){return this.syncableFonts.length>=8&&i.keys(this.syncableSubFamilies).length>1&&!this.isAllSynced(this.syncableFonts)},a.prototype.requiresUpgradeForWeb=function(){var e=this,t=!1;return e.family.fonts.forEach((function(n){!t&&e._fontRequiresUpgradeForWeb(n.font)&&(t=!0)})),t&&!e._availableForWeb()},a.prototype.selectedVariationHasDesigners=function(){return!i.isEmpty(this.getDesignersForSelectedVariation())},a.prototype.selectedVariationHasManyDesigners=function(){return this.getDesignersForSelectedVariation().length>=3},a.prototype.selectedVariationDisplayData=function(){var e=this.selectedVariation;return{cssName:e.family.web_id+"-"+e.font.web.fvd,fvd:e.font.web.fvd,isDynamic:!0,opaqueId:e.family.web_id,unicodeRange:this.unicodeRange,featureSettings:this.featureSettings}},a.prototype.selectedVariationHasFilters=function(){return i.size(this.selectedVariation.filters)>0},a.prototype.sync=function(e,t){var n=this;n.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_family",{slug:n.family.slug}).then((function(){n._sync(t)}))},a.prototype.syncedFonts=function(e){return i.filter(e,(function(e){return"sync"in e.font&&(e.font.sync.is_selected||i.contains(e.font.sync.install_state.split(","),"cc"))}))},a.prototype.toggleSync=function(e,t){this.isAllSynced(t)?this.unsync(this.syncedFonts(t)):this.sync(e,this.unsyncedFonts(t))},a.prototype.toggleFavorite=function(){var e=this;e.family.favorite?e.FavoritesService.delete(e.family.slug).then((function(){e.family.favorite=!1}),(function(t){e.NotificationService.error(t.data.error)})):e.FavoritesService.post(e.family.slug).then((function(){e.family.favorite=!0}),(function(t){e.NotificationService.error(t.data.error)}))},a.prototype.unsync=function(e){var t=this;t._keepSubfamilyDropdownOpen(),t.NewrelicService.addPageAction("typekit.click.unsync-all-button",{family:t.family.name}),e.forEach((function(e){e.isSyncing=!0})),t.SyncService.removeSyncedVariations(i.pluck(e,"id")).then((function(n){var i;e.forEach((function(e){e.isSyncing=!1,"data"in n&&n.data.removed_font_ids.indexOf(e.id)>-1?(e.font.sync.is_selected=!1,e.font.sync.install_state="",t._updateSelectionStatus([e.id],!1)):i=!0})),i?t.NotificationService.error(t.I18nService.getMessage(t._i18n,"neue.browse.family_card.error_occurred_deactivating_some_fonts")):(t.activatedFontCount-=n.data.removed_font_ids.length,e.length>1?t.NotificationService.success(t.I18nService.getMessage(t._i18n,"neue.families.multi_sync.loading_dialog.unsync_family_multiple_fonts_html",{family:t.family.name,num:e.length})):t.NotificationService.success(t.I18nService.getMessage(t._i18n,"neue.families.multi_sync.loading_dialog.unsync_family_one_font_html",{family:t.family.name})))}),(function(){t.NotificationService.error(t.I18nService.getMessage(t._i18n,"neue.browse.family_card.error_occurred_deactivating_fonts"))}))},a.prototype.unsyncedFonts=function(e){return i.reject(e,(function(e){return"sync"in e.font&&e.font.sync.is_selected}))},a.prototype._allFontsRequireWebAction=function(){var e=this;return i.every(e.family.fonts,(function(t){return e._fontRequiresWebAction(t.font)}))},a.prototype._availableForWeb=function(){var e=this;return i.some(e.family.fonts,(function(t){return e.fontAvailableForWeb(t.font)}))},a.prototype.fontAvailableForWeb=function(e){return(this.userPlan||{}).library?"web"in e&&!this._fontIsWebPreviewOnly(e)&&!this._fontRequiresWebAction(e):"web"in e&&!this._fontIsWebPreviewOnly(e)&&(e.web.library_availability.trial||e.web.library_availability.full)},a.prototype.isNonPreviewWebFont=function(e){return e.web&&!this._fontIsWebPreviewOnly(e)},a.prototype._filterTabs=function(){var e=this;return i.reject(e.navigationTabs,(function(t){return"recommendations"===t.id&&!e.shouldShowFontRecommendations}))},a.prototype._fontAvailableForSync=function(e){return e.sync&&0==e.sync.required_action.length},a.prototype._fontByWebFvd=function(e,t){return i.find(e,(function(e){return e.font.web.fvd===t}))},a.prototype._fontRequiresWebAction=function(e){return e.web&&e.web.required_action.length>0},a.prototype._fontIsWebPreviewOnly=function(e){return!!e.web&&-1!==e.web.required_action.indexOf("preview_only")},a.prototype._fontRequiresUpgradeForWeb=function(e){return!!e.web&&-1!==e.web.required_action.indexOf("upgrade")},a.prototype._keepSubfamilyDropdownOpen=function(){var e=this;e.isSubfamilyDropdownOpen=!0,e.timer&&e.$timeout.cancel(e.timer),e.timer=e.$timeout((function(){e.isSubfamilyDropdownOpen=!1}),3e3)},a.prototype._handleContext=function(){return this.RedirectContextService.handleContext()},a.prototype.showPaidFontsSelected=function(){return this.showPaidFonts},a.prototype.updateDesignerName=function(){this.designerInfo&&i.each(this.designerInfo,(function(e){var t=e.name;e.originalName||(e.originalName=t),t.length>=45&&(e.name=t.substring(0,22)+"..."+t.substring(t.length-10,t.length))}))},a.prototype._preloadData=function(){var e=this;return e.$q.all([e.DataService.get("families-show-i18n").then((function(t){e._i18n=t})),e.UserPrefsService.getUserPrefs().then((function(t){return e.browseMode=t.browseMode||"default",e.showPaidFonts=!!t.showPaidFonts,e.viewType=t.selectedViewType||"list",e.DataService.get("/neue/preloaded_family_data")})).then((function(t){e.family=t.family,e.availability=t.availability,e.designerInfo=t.designer_info,e.selectedVariationSlug=t.selectedVariationSlug,e.userPlan=t.userPlan,e.UserService.incrementSyncUsage(e.userPlan.usage.synced_desktop_fonts||0),e.UserService.setSyncLimit(e.userPlan.limits.synced_desktop_fonts||0),e.UserService.setPlan(e.userPlan.name),e.updateDesignerName(),e.shouldShowFontRecommendations=e._shouldShowFontRecommendations(e.family.fonts),e.getFamilyFontSimilarities(),e.getFamilyFontPairings(),e.getSelectedVariationSimilarities(),e.getSelectedVariationPairings(),e.family.fonts.length>0&&(e.syncableFonts=i.filter(e.family.fonts,(function(t){return(e.userPlan||{}).library?"sync"in t.font&&0===t.font.sync.required_action.length:"sync"in t.font&&(t.font.sync.library_availability.trial||t.font.sync.library_availability.full)})),e.syncableSubFamilies=i.groupBy(e.syncableFonts,(function(e){return e.family.web_name})),e.availabilitySummary=t.availabilitySummary),e.activatedFontCount=(e.family.card_state||{}).activated_font_count||0,e.languagesDictionary=t.languagesDictionary,e.filterLabelDictionary=t.filterLabelDictionary,e.textSampleData=t.textSampleData,e.kanaOnly=t.kana_only,e.navigationTabs=t.navigationTabs,e.currentTab=e.navigationTabs[0],e.isSubfamilyDropdownOpen=!1,e.variationMenuItems=i.map(e.family.fonts,(function(e){return{label:e.name,value:e}})),e.showUpgradeActionToggle=!e.UserService.hasPaidCreativeCloud()&&e.FilterVariationsService.hasUpgradeFilterOption(e.family.fonts);var n={upgrade:e.showUpgradeActionToggle&&e.showPaidFonts};e.filterFontsByRequiredActions(n);var o=e.getVariationFromSlug(this.selectedVariationSlug)||e.filteredFonts[0];e.setSelectedVariation(o),e._setExampleText(),t.shouldShowExpiredFontsModal&&e.FirstMileService.showExpiredFontsDialog()}))])},a.prototype.updateFonts=function(){this.FontLoaderService.updateFonts(this.exampleText.value)},a.prototype._selectTabFromAnchor=function(e){var t=this;for(var n in t.filteredNavigationTabs)if(t.filteredNavigationTabs[n].id===e){t.currentTab=t.filteredNavigationTabs[n];break}},a.prototype._setExampleText=function(){var e=this,t=i.first(i.uniq(i.pluck(e.family.fonts||[],"default_language")))||"en",n=e.textSampleData.textSamples[t];e.exampleText={value:e.kanaOnly?n.list_kana:n.list,size:36},e.featureSettings=n.feature_settings,e.unicodeRange=n.unicode_range,e.defaultExampleTextValue=e.exampleText.value,e.similarityCardText={value:"Champagne Sorbet",size:36}},a.prototype._scrollToAnchor=function(e,t){var n=this,i=-1*this._getNavBarHeight(),o=n.$document[0].getElementById(this._getSectionId(e));n.windowIsScrolling=!0,this.ScrollService.scrollTo(o,500,i).then((function(){n.windowIsScrolling=!1,t&&(location.href=t)}))},a.prototype._sync=function(e){var t=this;e.forEach((function(e){e.isSyncing=!0})),t.SyncService.addSyncedVariations(i.pluck(e,"id")).then((function(n){var i;e.forEach((function(e){e.isSyncing=!1,"data"in n&&n.data.added_font_ids.indexOf(e.id)>-1?(e.font.sync.is_selected=!0,t._updateSelectionStatus([e.id],!0)):i=!0})),i?t.NotificationService.error(t.I18nService.getMessage(t._i18n,"neue.browse.family_card.error_occurred_activating_some_fonts")):(t.activatedFontCount+=n.data.added_font_ids.length,t._handleFontSyncSuccess(e))}),(function(){t.NotificationService.error(t.I18nService.getMessage(t._i18n,"neue.browse.family_card.error_occurred_activating_fonts"))}))},a.prototype._updateAnchor=function(){var e=this._getCurrentSection();if(0!==e.length&&this.currentTab.id!==e){var t="#"+e+"-section";"details"===e&&(t=t+"+"+this.selectedVariation.slug),this.$window.history.replaceState({navigationTabClicked:!1},null,t),this._selectTabFromAnchor(e)}},a.prototype._getCurrentSection=function(){var e="";for(var t in this.filteredNavigationTabs)this._isSectionInOrAboveViewport(this.filteredNavigationTabs[t].id)&&(e=this.filteredNavigationTabs[t].id);return e},a.prototype._isSectionInOrAboveViewport=function(e){if(!this.$document[0])return!1;var t=this.$document[0].getElementById(this._getSectionId(e)).getBoundingClientRect(),n=Math.min(this.$document[0].body.scrollTop,this.$document[0].documentElement.scrollTop);return t.top<=n+2*this._getNavBarHeight()},a.prototype._getNavBarHeight=function(){return this.$document[0].querySelector(".sticky-header").getBoundingClientRect().height},a.prototype._getSectionId=function(e){return e+r},a.prototype._handleFontSyncSuccess=function(e){var t=this;t.FirstMileService.shouldShowFontActivationDialog().then((function(n){if(n)return t.FirstMileService.showFontActivationDialog();e.length>1?t.NotificationService.success(t.I18nService.getMessage(t._i18n,"neue.families.multi_sync.loaded_dialog.heading_multiple",{fonts:e.length,family:t.family.name})):t.NotificationService.success(t.I18nService.getMessage(t._i18n,"neue.families.multi_sync.loaded_dialog.heading_single",{font:e[0].name}))}))},a.prototype.getFamilyFontSimilarities=function(){var e=this;e.shouldShowFontRecommendations&&e.RecommendationsService.familyFontSimilarities(e.family.slug,24,1).then((function(t){e.familyFontSimilarities=t.data}))},a.prototype.getFamilyFontPairings=function(){var e=this;e.shouldShowFontRecommendations&&e.RecommendationsService.familyFontPairings(e.family.slug,12,1).then((function(t){e.familyFontPairings=t.data}))},a.prototype.handleSelectedVariationChange=function(){location.href="#details-section+"+this.selectedVariation.slug,this.getSelectedVariationSimilarities(),this.getSelectedVariationPairings()},a.prototype.getSelectedVariationSimilarities=function(){var e=this;e.shouldShowFontRecommendations&&e.selectedVariation&&e.selectedVariation.id&&e.RecommendationsService.similarFonts(e.selectedVariation.id,24,1).then((function(t){e.selectedVariationSimilarities=t.data}))},a.prototype.getSelectedVariationPairings=function(){var e=this;e.shouldShowFontRecommendations&&e.selectedVariation&&e.selectedVariation.id&&e.RecommendationsService.pairedFonts(e.selectedVariation.id,12,1).then((function(t){e.selectedVariationPairings=t.data}))},a.prototype.shouldShowFontSimilarities=function(){return void 0!==this.familyFontSimilarities&&this.familyFontSimilarities.length>0},a.prototype.shouldShowFontPairings=function(){return void 0!==this.familyFontPairings&&this.familyFontPairings.length>0},a.prototype.shouldShowSelectedFontSimilarities=function(){return void 0!==this.selectedVariationSimilarities&&this.selectedVariationSimilarities.length>0},a.prototype.shouldShowSelectedFontPairings=function(){return void 0!==this.selectedVariationPairings&&this.selectedVariationPairings.length>0},a.prototype._shouldShowFontRecommendations=function(e){var t=!1,n=!0;return e.forEach((function(e){e.has_similar_fonts_or_pairings&&(t=!0),"en"!==e.default_language&&"ja"!==e.default_language&&(n=!1)})),t&&n},a.prototype._updateSelectionStatus=function(e,t){var n=this;e.forEach((function(e){n.family&&n.family.fonts&&n.family.fonts.forEach((function(n){n.id===e&&(n.font.sync.is_selected=t)})),n.selectedVariationPairings&&n.selectedVariationPairings.forEach((function(n){n.body_font.id===e?n.body_font.font.sync.is_selected=t:n.header_font.id===e&&(n.header_font.font.sync.is_selected=t)})),n.familyFontPairings&&n.familyFontPairings.forEach((function(n){n.body_font.id===e?n.body_font.font.sync.is_selected=t:n.header_font.id===e&&(n.header_font.font.sync.is_selected=t)}))}))},e.exports=a},1278:function(e,t,n){o.$inject=["$document","$scope","$timeout","$window","DataService"];var i=n(4);function o(e,t,n,i,o){this.$document=e,this.$timeout=n,this.$window=i,this.DataService=o,this.featuredFoundries={},this.foundries=[],this.isLoaded=!1,this.isBiographyCollapsed=!0,this.isBiographyCollapsible=!1,this.selectedFoundry=null,this.selectedSortOption=null,this.sortOptions=[],this.specimenImages={},this._preloadData();var r=this;i.addEventListener("load",(function(){r.isLoaded=!0,t.$apply(),r.updateIsBiographyCollapsible()})),i.addEventListener("resize",(function(){r.updateIsBiographyCollapsible()}))}o.prototype.getCarouselListClass=function(){return this.getFeaturedFamilyImages().length>2?"adobe-fonts-family__carousel-list":""},o.prototype.getFeaturedFamilies=function(){return(this.featuredFoundries[this.selectedFoundry]||{}).featuredFamilies||[]},o.prototype.getFeaturedFamilyImages=function(){if(this.specimenImages[this.selectedFoundry])return this.specimenImages[this.selectedFoundry];var e=this.getFeaturedFamilies();return this.specimenImages[this.selectedFoundry]=e.map((function(e){return e.specimenImage})),this.specimenImages[this.selectedFoundry]},o.prototype.getSmallScreenClass=function(){return this.$window.innerWidth<500?"spectrum-grid-col-xs-12":this.$window.innerWidth<768?"spectrum-grid-col-xs-6":this.$window.innerWidth<900?"spectrum-grid-col-sm-4":this.$window.innerWidth<1280?"spectrum-grid-col-sm-3":""},o.prototype.selectFoundry=function(e){var t=this;t.selectedFoundry=e,t.isBiographyCollapsible=!0,t.isBiographyCollapsed=!0,t.$timeout((function(){t.updateIsBiographyCollapsible()}),1)},o.prototype.sortFoundries=function(){var e=this;e.foundries=i.sortBy(e.foundries,(function(t){return t[e.selectedSortOption]})),"desc"===i.find(e.sortOptions,(function(t){return t.value===e.selectedSortOption})).order&&e.foundries.reverse()},o.prototype.updateIsBiographyCollapsible=function(){var e=this.$document[0].getElementById("featured-foundries--left-column"),t=this.$document[0].getElementById("featured-foundries--right-column");this.isBiographyCollapsible=e&&t&&e.clientHeight<t.clientHeight,this.isBiographyCollapsible=this.isBiographyCollapsible&&this.$window.innerWidth>=768},o.prototype._preloadData=function(){var e=this;e.DataService.get("/spectrum/foundries").then((function(t){e.featuredFoundries=t.featuredFoundries||{},e.selectedFoundry=Object.keys(e.featuredFoundries)[0],e.foundries=t.foundries,e.sortOptions=t.sortOptions,e.sortOptions&&(e.selectedSortOption=e.sortOptions[0].value)}))},e.exports=o},1279:function(e,t,n){a.$inject=["$document","$q","DataService","FilterDataService","FilteredFamilyListStateService","FoundriesService","NewrelicClickTrackerService","UserPrefsService","YouTubeService"];var i=n(15),o="video-playing",r={adobe:{en_US:"YGUe-EQWxF4",de_DE:"H1HqLVNagO8",fr_FR:"JpacO3Ol1nE",ja_JP:"tv_IucBF_5E"},morisawa:{de_DE:"o2B449k5kC4",en_US:"o2B449k5kC4",fr_FR:"o2B449k5kC4",ja_JP:"mZsFgZH8yp4"}};function a(e,t,n,o,r,a,s,c,l){var u=this;u.$q=t,u.DataService=n,u.FilterDataService=o,u.FilteredFamilyListStateService=r,u.FoundriesService=a,u.UserPrefsService=c,u.YouTubeService=l,u._bodyElement=i.element(e.find("body")),s.init({page:"foundry detail"}),u._preloadData().then((function(){u._initVideo()}))}a.prototype.handleUserPrefsChange=function(){this.UserPrefsService.updatePrefs(this.filteredFamilyList)},a.prototype.updateFilteredFamilyList=function(){var e=this;e.filtersModel.setCurrentPage(e.filteredFamilyList.currentPage),e.FoundriesService.getFamilies(e.foundrySlug,e.filtersModel.toSearchParams()).then((function(t){e.filteredFamilyList.families=t.data.families_data.families,e.filteredFamilyList.totalFamilies=t.data.families_data.totalFamilies,e.filteredFamilyList.totalPages=t.data.families_data.totalPages,e.textSampleData.textSamplePrimers=t.data.text_sample_primers})),e.FilteredFamilyListStateService.updateState(e.filteredFamilyList)},a.prototype._preloadData=function(){var e=this;return e.$q.all([e.UserPrefsService.getUserPrefs().then((function(t){e.DataService.get("/neue/preloaded_foundry_data").then((function(n){e.filteredFamilyList=e.FilteredFamilyListStateService.getState(null,t),e.filteredFamilyList.families=n.familiesData.families,e.filteredFamilyList.totalFamilies=n.familiesData.totalFamilies,e.filteredFamilyList.totalPages=n.familiesData.totalPages,e.foundrySlug=n.foundrySlug,e.locale=n.locale,e.textSampleData=n.textSampleData,e.filtersModel=e.FilterDataService.getFilterModel()}))}))])},a.prototype.handleVideoCloseButtonClick=function(){this.player.pauseVideo(),this._bodyElement.removeClass(o)},a.prototype._handlePlayerStateChange=function(e){0===e.data&&this._bodyElement.removeClass(o)},a.prototype._initVideo=function(){var e=this;if(r[e.foundrySlug]){var t=r[e.foundrySlug][e.locale]||r[e.foundrySlug].en_US;e.YouTubeService.init().then((function(){e.YouTubeService.load("player",t,{height:"100%",width:"100%",onPlayerStateChangeCallback:function(t){e._handlePlayerStateChange(t)}}).then((function(t){e.player=t}))}))}},e.exports=a},1280:function(e,t,n){o.$inject=["$document","$scope","$window","DataService","FamilyAutocompleteSearchService","NewrelicService","UrlService","UserService"];var i=n(110);function o(e,t,n,i,o,r,a,s){var c=this;c.$document=e,c.$scope=t,c.$window=n,c.DataService=i,c.FamilyAutocompleteSearchService=o,c.NewrelicService=r,c.UrlService=a,c.UserService=s,c._setViewportDefinition(),n.addEventListener("resize",(function(){c._handleWindowResize()})),c._preloadData().then((function(){c._setNewrelicCustomAttributes()}))}o.prototype._handleWindowResize=function(){this._setViewportDefinition(),this.$scope.$digest()},o.prototype._setViewportDefinition=function(){var e=i.modules.get("ViewportSize");this.$window.innerWidth<720?this.viewportSize=e.XX_SMALL:this.$window.innerWidth<840?this.viewportSize=e.X_SMALL:this.$window.innerWidth<960?this.viewportSize=e.SMALL:this.$window.innerWidth<1024?this.viewportSize=e.MEDIUM:this.viewportSize=e.LARGE},o.prototype._webComponents_initNavBarCombo=function(){var e=this,t=e.$document.find("af-navbar-combo")[0];if(t){var n=i.modules.get("SearchParamChangedEvent");t.addEventListener(n.EVENT_NAME,(function(n){e.FamilyAutocompleteSearchService.get(n.detail.searchParam).then((function(e){t.searchResults=e.data}))}))}},o.prototype._preloadData=function(){var e=this;return i.areWebComponentsEnabled()&&e._webComponents_initNavBarCombo(),e.DataService.get("/user_info").then((function(t){e.UserService.setActivityState(t.activity_state),e.UserService.setDaysSinceSyncActivity(t.days_since_sync_activity),e.UserService.setPlan(t.plan)}))},o.prototype._setNewrelicCustomAttributes=function(){var e=this.UrlService.getSearchParam("referrer");e&&this.NewrelicService.setCustomAttribute("referrer",e),this.NewrelicService.setCustomAttribute("activityState",this.UserService.getActivityState()),this.NewrelicService.setCustomAttribute("daysSinceSyncActivity",this.UserService.getDaysSinceSyncActivity()),this.NewrelicService.setCustomAttribute("plan",this.UserService.getPlan())},e.exports=o},1281:function(e,t){function n(e,t,n,i){var o=this;this.NewrelicService=i,n.init({page:"homepage"}),t.get("/home/example_families_data").then((function(e){o.textSampleData=e.featured_families.textSampleData,o.featuredfamilies=e.featured_families.families.slice(NaN)}))}n.$inject=["$document","DataService","NewrelicClickTrackerService","NewrelicService"],n.prototype.getExampleText=function(e){var t="list";return null!=e.filters&&e.filters.indexOf("ka:ko")>=0&&(t+="_kana"),{size:50,value:this.textSampleData.textSamples[e.display_font.default_language][t]}},e.exports=n},1282:function(e,t,n){o.$inject=["$document","$scope","$window","DataService","FamilyAutocompleteSearchService","NewrelicService","NewrelicClickTrackerService"];var i=n(110);function o(e,t,n,i,o,r,a){this.$document=e,this.$window=n,this.DataService=i,this.FamilyAutocompleteSearchService=o,this.NewrelicService=r,this._preloadData(),a.init({page:"marketplace_homepage"}),n.addEventListener("resize",(function(){t.$apply()}));var s=this;n.addEventListener("beforeunload",(function(){s.NewrelicService.addPageAction("typekit.marketplace_homepage.page_exit")}))}o.prototype._webComponents_initSearchBar=function(){var e=this,t=e.$document.find("af-search-bar")[0];if(t){var n=i.modules.get("SearchParamChangedEvent");t.addEventListener(n.EVENT_NAME,(function(n){e.FamilyAutocompleteSearchService.get(n.detail.searchParam).then((function(e){t.results=e.data}))}))}},o.prototype.getSmallScreenClass=function(){return this.$window.innerWidth<500?"spectrum-grid-col-xs-12":this.$window.innerWidth<768?"spectrum-grid-col-xs-6":""},o.prototype.handleSearchByImageClick=function(){this.NewrelicService.addPageAction("typekit.marketplace_homepage.search_by_image_click")},o.prototype._preloadData=function(){var e=this;e.DataService.get("/preloaded_homepage_data").then((function(t){e.browseByClassifications=t.browse_by_classifications,e.browseByLanguages=t.browse_by_languages,e.browseByTags=t.browse_by_tags})),i.areWebComponentsEnabled()&&this._webComponents_initSearchBar()},e.exports=o},1283:function(e,t,n){l.$inject=["$document","$scope","$window","DataService","DialogService","FilterDataService","FilteredFamilyListStateService","FirstMileService","FontCountService","I18nService","MyFontsService","NewrelicService","NotificationService","TkWebProjectEditorService","UrlService","UserPrefsService"];var i=n(15),o=n(4),r="-section",a="all",s="under_30_days",c="updated_at_desc";function l(e,t,n,r,a,s,c,l,u,d,f,p,h,g,m,v){var y=this;y.DataService=r,y.DialogService=a,y.FilterDataService=s,y.FilteredFamilyListStateService=c,y.FirstMileService=l,y.FontCountService=u,y.I18nService=d,y.MyFontsService=f,y.NewrelicService=p,y.NotificationService=h,y.UrlService=m,y.UserPrefsService=v,y.$document=e,y.$scope=t,y.$window=n,y.TkWebProjectEditorService=g,y._loadSortModes(),y._preloadData(),y._initWindowSizeWatcher(),y.TkWebProjectEditorService.populateCompleteWebProjectsData(1),y.handleFiltersChange=o.debounce(i.bind(y,y.updateFilteredFamilyList),100)}l.prototype.handleBrowseModeButton=function(e){this.filtersModel.setBrowseMode(e.id),this.UserPrefsService.updatePrefs({browseMode:e.id}),this.filteredFamilyList.exampleText=null,this.handleFiltersChange()},l.prototype.handleFilteredFamilyListUserPrefsChange=function(){this.UserPrefsService.updatePrefs(this.filteredFamilyList)},l.prototype.isActiveFontsView=function(){return this.currentTab&&"active_fonts"===this.currentTab.id},l.prototype.isBrowseModeSelected=function(e){return this.filtersModel&&this.filtersModel.getBrowseMode()==e.id},l.prototype.isEmptyState=function(){return this.isWebProjectsView()?!this.kitsData||0===this.kitsData.length:this.isEmpty||0===this.filteredFamilyList.families.length},l.prototype.isFavoritesView=function(){return this.currentTab&&"favorites"===this.currentTab.id},l.prototype.isFilterListHidden=function(){return!(!this._isFilterListHiddenByUser&&!this._isFilterListHiddenForSmallScreen)},l.prototype.isPreviouslyActiveView=function(){return this.currentTab&&"previously_active"===this.currentTab.id},l.prototype.isPurchasedTab=function(){return this.currentTab&&"purchased"===this.currentTab.id},l.prototype.isWebProjectsView=function(){return this.currentTab&&"web_projects"===this.currentTab.id},l.prototype.manageFontsDeactivationButtonText=function(){return this.selectedManageFontsFilterValue===a?this._i18n["my_fonts.active_fonts.manage_fonts.deactivate_all_button"]:this._i18n["my_fonts.active_fonts.manage_fonts.deactivate_selected_button"]},l.prototype.onTabChanged=function(){this.filteredFamilyList.currentPage=1,this.selectedSort=c,this.filtersModel.setSortOrder(c),this._updateFamilySortModes(),this.isFirstPageLoad||(this.isTabChanging=!0,this.isWebProjectsView()?this.UrlService.updatePath(this.$window.location.pathname+"#web_projects"+r):this.updateFilteredFamilyList()),this.isFirstPageLoad=!1},l.prototype.shouldShowTooManyFontsNotice=function(){return this.isActiveFontsView()&&this.filteredFamilyList.families.length>0&&this.FontCountService.getAllActivatedFontsCount()>100&&this.FontCountService.getAllActivatedFontsCount()<=500},l.prototype.shouldShowTooManyFontsWarning=function(){return this.isActiveFontsView()&&this.filteredFamilyList.families.length>0&&this.FontCountService.getAllActivatedFontsCount()>500},l.prototype.showManageFontsConfirmationDialog=function(){var e=this;e.DialogService.show("/angular_templates/dialogs/manage_fonts_confirmation.html").then((function(t){t.handleCancelButtonClick=function(){t.close()},t.handleConfirmButtonClick=function(){var n=o.omit(o.extend(e.filtersModel.toSearchParams(),e._myFontsParams(),{manage_fonts_filter:e.selectedManageFontsFilterValue}),o.isNull);e.MyFontsService.deactivateFonts(n).then((function(){t.close(),e.NewrelicService.addPageAction("typekit.click.bulk_deactivate_button",{activatedFontsCount:e.FontCountService.getAllActivatedFontsCount(),filter:e.selectedManageFontsFilterValue,fontsDeactivated:e._getActivatedFontsCountForSelectedFilter()}),e.NotificationService.success(e._getManageFontsDeactivationSuccessMessage()),e._clearFilters(),e.updateFilteredFamilyList()}),(function(){t.close(),e.NotificationService.error(e._i18n["my_fonts.active_fonts.manage_fonts.deactivation_error_message"])}))},t.heading=e._manageFontsConfirmationDialogHeading()}))},l.prototype.toggleFilters=function(){this._isFilterListHiddenByUser=!this.isFilterListHidden(),this._isFilterListHiddenForSmallScreen=!1},l.prototype.handleSortModeChange=function(){this.filtersModel.setSortOrder(this.selectedSort),this.filteredFamilyList.currentPage=1,this.handleFiltersChange()},l.prototype.handleManageFontsFilterChange=function(){this.filteredFamilyList.currentPage=1,this.handleFiltersChange()},l.prototype.getTotalFontsText=function(){var e=this.FontCountService.getAllFamiliesCount();return this.isActiveFontsView()?this._getTotalActiveFontsText(this.FontCountService.getAllActivatedFontsCount(),e):this._getTotalPreviousActiveFontsText(this.FontCountService.getAllPreviouslyActivatedFontsCount(),e)},l.prototype.updateFilteredFamilyList=function(){var e=this,t=o.omit(o.extend(e.filtersModel.toSearchParams(),e._myFontsParams()),o.isNull);e.filtersModel.setCurrentPage(e.filteredFamilyList.currentPage),e.isLoading=!0,e.MyFontsService.get(t).then((function(n){if(n.data.collection===e.currentTab.id){if(e.filteredFamilyList.families=n.data.familiesData.families,1===t.page)e.fontFamilyAccordion.families=n.data.familiesData.families;else{var i=o.reject(n.data.familiesData.families,(function(t){return o.any(e.fontFamilyAccordion.families,(function(e){return t.slug===e.slug}))}));e.fontFamilyAccordion.families=e.fontFamilyAccordion.families.concat(i)}e.filteredFamilyList.totalFamilies=n.data.familiesData.totalFamilies,e.filteredFamilyList.totalPages=n.data.familiesData.totalPages,e.purchasedFonts=n.data.familiesData.purchasedFonts,e.textSampleData=n.data.textSampleData,e.FilteredFamilyListStateService.updateState(e.filteredFamilyList),e.manageFontsFiltersData=n.data.manageFontsFilters,e.manageFontsFilters=e._getManageFontsFilters(e.manageFontsFiltersData),e.FontCountService.setAllFamiliesCount(n.data.familiesData.totalFamilies),e.FontCountService.setAllPreviouslyActivatedFontsCount(n.data.allPreviouslyActivatedFontsCount),e.FontCountService.setAllActivatedFontsCount(n.data.allActivatedFontsCount),e.FontCountService.setFilteredActivatedFontsCount(e._getFilterWithValue(a).activatedFontsCount),e.FontCountService.setThirtyDayActivatedFontsCount(e._getFilterWithValue(s).activatedFontsCount),e.isEmpty=n.data.isEmpty}e.filteredFamilyList.browseMode=e.filtersModel.getBrowseMode(),e.filteredFamilyList.currentPage=e.filtersModel.getCurrentPage(),e.isLoading=!1,e.isTabChanging=!1,e.FilteredFamilyListStateService.updateUrl(t),n.data.shouldShowExpiredFontsModal&&e.FirstMileService.showExpiredFontsDialog()}))},l.prototype.loadMoreFamilies=function(){this.filteredFamilyList.currentPage>=this.filteredFamilyList.totalPages||this.isLoading||(this.filteredFamilyList.currentPage+=1,this.updateFilteredFamilyList())},l.prototype.updateFilterListVisibilityForWindowSize=function(){var e=this;e._getWindowWidth()!=e._previousWindowWidth&&(e._previousWindowWidth=e._getWindowWidth(),e.$scope.$apply((function(){e._isFilterListHiddenForSmallScreen=e._getWindowWidth()<=880})))},l.prototype._getTotalActiveFontsText=function(e,t){return e>1&&t>1?this.I18nService.getMessage(this._i18n,"my_fonts.active_fonts.font_count.plural_fonts_plural_families",{num_fonts:e,num_families:t}):e>1?this.I18nService.getMessage(this._i18n,"my_fonts.active_fonts.font_count.plural_fonts_singular_family",{num_fonts:e}):this._i18n["my_fonts.active_fonts.font_count.singular_font_singular_family"]},l.prototype._getTotalPreviousActiveFontsText=function(e,t){return e>1&&t>1?this.I18nService.getMessage(this._i18n,"my_fonts.previously_active_fonts.font_count.plural_fonts_plural_families",{num_fonts:e,num_families:t}):e>1?this.I18nService.getMessage(this._i18n,"my_fonts.previously_active_fonts.font_count.plural_fonts_singular_family",{num_fonts:e}):this._i18n["my_fonts.previously_active_fonts.font_count.singular_font_singular_family"]},l.prototype._changeFamilySortLabel=function(e,t){o.find(this.familySortModes,(function(t){return t.value===e})).label=this._i18n[t]},l.prototype._clearFilters=function(){this.filtersModel.clearAll(),this.selectedManageFontsFilterValue=a},l.prototype._getActivatedFontsCount=function(e){return e.value===a?this.FontCountService.getFilteredActivatedFontsCount():e.value===s?this.FontCountService.getThirtyDayActivatedFontsCount():e.activatedFontsCount||0===e.activatedFontsCount?e.activatedFontsCount:void 0},l.prototype._getActivatedFontsCountForSelectedFilter=function(){return this._getActivatedFontsCount(this._getFilterWithValue(this.selectedManageFontsFilterValue))},l.prototype._getFilterWithValue=function(e){return o.find(this.manageFontsFiltersData,(function(t){return t.value===e}))},l.prototype._getManageFontsDeactivationSuccessMessage=function(){var e=this._getActivatedFontsCountForSelectedFilter();return e>1?this.I18nService.getMessage(this._i18n,"my_fonts.active_fonts.manage_fonts.deactivation_success_message_plural",{num_fonts:e}):this._i18n["my_fonts.active_fonts.manage_fonts.deactivation_success_message_singular"]},l.prototype._getManageFontsFilters=function(e){var t=this;return e=o.filter(e,(function(e){return t._getActivatedFontsCount(e)>0})),o.map(e,(function(e){return{activatedFontsCount:e.activatedFontsCount,i18nName:e.i18nName,label:t._i18n["my_fonts.active_fonts.manage_fonts.filters."+e.i18nName].replace("%{num_fonts}",t._getActivatedFontsCount(e)),value:e.value}}))},l.prototype._getWindowWidth=function(){return this.$document[0].documentElement.clientWidth},l.prototype._initActivatedFontsCountWatcher=function(){var e=this;e.$scope.$watch((function(){return e.FontCountService.getFilteredActivatedFontsCount()}),(function(){e.manageFontsFilters=e._getManageFontsFilters(e.manageFontsFiltersData)}))},l.prototype._initWindowSizeWatcher=function(){var e=this;e.$window.addEventListener("resize",(function(){e.isFilterListHiddenByUser||e.updateFilterListVisibilityForWindowSize()}))},l.prototype._loadSortModes=function(){var e=this;e.DataService.get("web-project-sort-modes").then((function(t){e.sortModes=t}))},l.prototype._manageFontsConfirmationDialogHeading=function(){var e=this._getActivatedFontsCountForSelectedFilter();return e>1?this.I18nService.getMessage(this._i18n,"my_fonts.active_fonts.manage_fonts.confirmation_dialog.heading_plural",{num_fonts:e}):this._i18n["my_fonts.active_fonts.manage_fonts.confirmation_dialog.heading_singular"]},l.prototype._myFontsParams=function(){return{collection:this.currentTab.id,manage_fonts_filter:this.selectedManageFontsFilterValue,page:this.filteredFamilyList.currentPage}},l.prototype._setLanguageFilters=function(e){var t=this;t.filteredFamilyList.selectedLanguages.length>0?t.filteredFamilyList.selectedLanguages.forEach((function(e){t.filtersModel.selectLanguageMode(e)})):"default"===e?t.filtersModel.setBrowseMode(e):"japanese"===e?t.filtersModel.selectLanguageMode("ja"):t.filtersModel.selectLanguageMode(e)},l.prototype._preloadData=function(){var e=this;e.UserPrefsService.getUserPrefs().then((function(t){e.DataService.get("/spectrum/preloaded_family_data").then((function(n){e.filteredFamilyList=e.FilteredFamilyListStateService.getState(n.user,t),e.filteredFamilyList.families=n.familiesData.families,e.fontFamilyAccordion={families:n.familiesData.families},e.filteredFamilyList.totalFamilies=n.familiesData.totalFamilies,e.filteredFamilyList.totalPages=n.familiesData.totalPages,e.filtersModel=e.FilterDataService.getFilterModel({allFilters:n.familyFilters,collection:e.filteredFamilyList.collection,filterData:n.familyFilterData,hideLibraryOption:!0,hideMarketplaceOption:!0,languages:n.languageFilters,sortOrder:c,locale:n.locale}),e.allBrowseModes=n.browseModes,e._setLanguageFilters(t.browseMode||e.allBrowseModes[0].id),e.filtersModel.setSelectedFilters(e.filteredFamilyList.selectedFilters),e.filtersModel.setShowPaidFonts(e.filteredFamilyList.showPaidFonts||t.showPaidFonts,!1),e.manageFontsFiltersData=n.manageFontsFilters,e.FontCountService.setAllFamiliesCount(n.familiesData.totalFamilies),e.FontCountService.setAllPreviouslyActivatedFontsCount(n.allPreviouslyActivatedFontsCount),e.FontCountService.setAllActivatedFontsCount(n.allActivatedFontsCount),e.FontCountService.setFilteredActivatedFontsCount(e._getFilterWithValue(a).activatedFontsCount),e.FontCountService.setThirtyDayActivatedFontsCount(e._getFilterWithValue(s).activatedFontsCount),e.isEmpty=n.isEmpty,e.purchasedFonts=n.familiesData.purchasedFonts,e.textSampleData=n.textSampleData,e.navigationTabs=n.navigationTabs,e._setCurrentTab(),e._setExampleText(),e.DataService.get("/my_fonts/i18n").then((function(t){e._i18n=t,e.manageFontsFilters=e._getManageFontsFilters(e.manageFontsFiltersData),e.selectedManageFontsFilterValue=n.manageFontsFilters[0].value,e._initActivatedFontsCountWatcher()})),e.DataService.get("family-sort-modes").then((function(t){e.familySortModes=t})),e.DataService.get("family-accordion-sort-modes").then((function(t){e.familyAccordionSortModes=t})),e.selectedSort=e.filtersModel.getSortOrder(),n.shouldShowExpiredFontsModal&&e.FirstMileService.showExpiredFontsDialog()}))})),e.DataService.get("/spectrum/kits_data").then((function(t){var n;if(t&&t.kitsData)for(e.TkWebProjectEditorService.initTkWebProjectListModel(t),e.kitsData=t.kitsData,n=0;n<e.kitsData.length;n++){var i=e.kitsData[n];e.TkWebProjectEditorService.initTkWebProjectCardModel(i.kit.kit.token,i),e.TkWebProjectEditorService.initEmbedCodeModel(i.kit.kit.token,i.is_dynamic,i.project_embed_details);var o=0;for(o=0;o<i.tkff_list.length;o++){var r=i.tkff_list[o],a=i.kit.kit.token+r.tkff.typekit_font_family.id;e.TkWebProjectEditorService.initTkWebProjectDisplayFamilyModel(a,r.display_variation,r.text_samples,r.tktf_slug)}}}))},l.prototype._setCurrentTab=function(){var e=this,t=e.$window.location.hash,n=r.length+1,i=t.substr(1,t.length-n);0!==i.length&&e.navigationTabs.forEach((function(t){t.id===i&&(e.currentTab=t)})),void 0===e.currentTab&&(e.isFirstPageLoad=!0,e.currentTab=e.navigationTabs[0])},l.prototype._setExampleText=function(){var e=this,t=o.first(o.uniq(o.pluck(e.purchasedFonts||[],"default_language")))||"en",n=e.textSampleData.textSamples[t];e.exampleText={value:e.kanaOnly?n.list_kana:n.list,size:36},e.featureSettings=n.feature_settings,e.unicodeRange=n.unicode_range,e.defaultExampleTextValue=e.exampleText.value},l.prototype._updateFamilySortModes=function(){this.isActiveFontsView()?(this._changeFamilySortLabel("updated_at_asc","my_fonts.sort.date_activated_oldest_to_newest"),this._changeFamilySortLabel("updated_at_desc","my_fonts.sort.date_activated_newest_to_oldest")):this.isPreviouslyActiveView()?(this._changeFamilySortLabel("updated_at_asc","my_fonts.sort.date_deactivated_oldest_to_newest"),this._changeFamilySortLabel("updated_at_desc","my_fonts.sort.date_deactivated_newest_to_oldest")):this.isFavoritesView()&&(this._changeFamilySortLabel("updated_at_asc","my_fonts.sort.date_favorited_oldest_to_newest"),this._changeFamilySortLabel("updated_at_desc","my_fonts.sort.date_favorited_newest_to_oldest"))},e.exports=l},1284:function(e,t,n){s.$inject=["$q","$scope","$window","AuthenticationService","DataService","FontpackService","I18nService","NewrelicService","NotificationService","RecommendationsService","SyncService","TagsService","UrlService"];var i=n(4),o=["B82271","D5661D","BD8B02","9D2220","227466","249EAE","2464AE","227442","60358B","6B2A52","9B4E82","331E8B"],r=["recommendations-page--empty-card-medium","recommendations-page--empty-card-large","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-medium","recommendations-page--empty-card-small"],a=["font_pairs","tags","fontpacks"];function s(e,t,n,i,o,r,a,s,c,l,u,d,f){this.$q=e,this.AuthenticationService=i,this.DataService=o,this.FontpackService=r,this.I18nService=a,this.NewrelicService=s,this.NotificationService=c,this.RecommendationsService=l,this.SyncService=u,this.TagsService=d,this.UrlService=f,this.$window=n,this._preloadData();var p=this;n.addEventListener("af.activation",this.handleActivationEvent.bind(this)),n.addEventListener("resize",(function(){p.updateColumns(),t.$apply()})),n.addEventListener("beforeunload",(function(){p.NewrelicService.addPageAction("typekit.recommendations.numLoaded",{recommendationCount:(p.recommendations||[]).length})}))}s.prototype.getDisplayFont=function(e){var t=e.font||e.display_font,n=this.textSampleData.textSamples[t.default_language].feature_settings,i=this.textSampleData.textSamples[t.default_language].kana_only,o=this.textSampleData.textSamples[t.default_language].unicode_range;return{cssName:t.family.web_id+"-"+t.font.web.fvd,fvd:t.font.web.fvd,isDynamic:!0,kanaOnly:i,opaqueId:t.family.web_id,unicodeRange:o,featureSettings:n}},s.prototype.getExampleText=function(e){return this.exampleText[e.slug]||("en"===e.display_font.default_language?this.exampleText[e.slug]=i.sample(i.pick(this.textSampleData.textSampleOptions,"fez","roger","fox")):"ja"===e.display_font.default_language?this.exampleText[e.slug]=i.sample(i.pick(this.textSampleData.textSampleOptions,"typeface","letters","train","bamboo","typography")):this.exampleText[e.slug]=this.textSampleData.textSamples[e.display_font.default_language].list),this.exampleText[e.slug]},s.prototype.getExampleTextStyle=function(e){if(this.styles[e.slug])return this.styles[e.slug];var t=i.sample(o);return this.styles[e.slug]={"background-color":"#"+t},this.styles[e.slug]},s.prototype.getFamilyFromActivationEvent=function(e){var t=e.target.getAttribute("data-family-slug");return i.find(this.recommendations,(function(e){return e.slug===t}))},s.prototype.getIdentifier=function(e){return e.slug||e.key||e.id.toString()},s.prototype.getInitialRecommendationType=function(){var e;this.$window.location.href.indexOf("/recommendations/")>=0&&(e=(e=this.$window.location.href.split("/recommendations/")[1]).split("/")[0]);var t=i.map(this.recommendationTypes,(function(e){return e.key}));return(!e||t.indexOf(e)<0)&&(e="all"),i.find(this.recommendationTypes,(function(t){return t.key===e}))},s.prototype.getRecommendationTypeDescription=function(){return this.selectedRecommendationType?this.I18nService.getMessage(this.i18n,"recommendations.type_descriptions."+this.selectedRecommendationType.key):""},s.prototype.getSpecimenCardSubtitle=function(e){return"families"===e.type&&e.foundry&&e.foundry.name?this.I18nService.getMessage(this.i18n,"recommendations.family_card_foundry_subheading",{foundry:e.foundry.name}):""},s.prototype.getTagBackgroundClass=function(e){return this.TagsService.TAG_BACKGROUND_CLASS_MAP[e]},s.prototype.getTextDirectionClass=function(e){return e.display_font.rtl?"sample-right":""},s.prototype.handleActivationEvent=function(e){var t=this,n=e.target.getAttribute("data-fontpack-slug");if(n){var i=t.FontpackService.findFontpackBySlug(n),o="recommendations."+t.selectedRecommendationType.key;t.FontpackService.isFontpackSynced(n)?t.FontpackService.unsyncFontpack(i,o,t.i18n).then((function(){t.NewrelicService.addPageAction("typekit.recommendations.deactivateFontpack",{recommendationIndex:t._getRecommendationIndexBySlug(n,"fontpacks")})})):t.FontpackService.syncFontpack(i,o,t.i18n).then((function(){t.NewrelicService.addPageAction("typekit.recommendations.activateFontpack",{recommendationIndex:t._getRecommendationIndexBySlug(n,"fontpacks")})}))}t.handleFamilyActivationSwitchChange(t.getFamilyFromActivationEvent(e))},s.prototype.handleFamilyActivationSwitchChange=function(e){var t=this;e&&t.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_family",{slug:e.slug}).then((function(){t.isActivated(e)?t._deactivateFamily(e):t._activateFamily(e)}))},s.prototype.handleRecommendationClick=function(e){this.NewrelicService.addPageAction("typekit.recommendations.click",{recommendationIndex:this.recommendations.indexOf(e),recommendationType:e.type})},s.prototype.isActivated=function(e){return"fontpacks"===e.type?this.FontpackService.isFontpackSynced(e.slug):i.all(e.fonts,(function(e){return e.font.sync&&e.font.sync.is_selected}))},s.prototype.loadMoreRecommendations=function(e){this.currentPage&&this.selectedRecommendationType&&(e&&this.NewrelicService.addPageAction("typekit.recommendations.loadMoreClick"),this.selectRecommendationType(this.selectedRecommendationType,this.currentPage+1,e))},s.prototype.selectRecommendationType=function(e,t,n){var o=this;if(t=t||1,o.recommendationTypeChanged=!1,o.isInfiniteScrollEnabled||n)if(o.currentPage>0&&o.currentPage%4===0&&!n)o.isInfiniteScrollEnabled=!1;else if(!o.isLoading&&((o.selectedRecommendationType||{}).key!==(e||{}).key&&(o.recommendationTypeChanged=!0),!o.loadedAllRecommendations||o.recommendationTypeChanged)){o.selectedRecommendationType=e;var r=o.$window.location.pathname.split("/").slice(0,2).join("/");o.UrlService.updatePath(r+("all"===e.key?"":"/"+e.key)),o.isLoading=!0,o.RecommendationsService.get(o.selectedRecommendationType.key,t,o.familiesPerPage,o.isPersonalized).then((function(n){o.isInfiniteScrollEnabled=!0,o.recommendationTypeChanged&&(o.recommendations=[],o.recommendationsByColumn={},o.FontpackService.clearFontpacks(),o.recommendationTypeChanged=!1,o.loadedAllRecommendations=!1,o.NewrelicService.addPageAction("typekit.recommendations.typeSelected",{recommendationType:e.key}));var r=Math.max.apply(null,i.map(a,(function(e){return n.data[e].length})));0===r&&0===n.data.families.length&&(o.loadedAllRecommendations=!0);for(var s,c=0,l=0,u=0;u<r;u++){s=a.slice(l,a.length).concat(a.slice(0,l));for(var d=0;d<s.length;d++)n.data[s[d]][u]&&(n.data.families[c]&&(o.recommendations.push(i.assign(n.data.families[c],{type:"families"})),c++),o.recommendations.push(i.assign(n.data[s[d]][u],{type:s[d]})));l+=1,l%=a.length}var f=i.map(n.data.families.slice(c,n.data.families.length),(function(e){return i.assign(e,{type:"families"})}));o.recommendations=o.recommendations.concat(f),o.recommendations=i.uniq(o.recommendations,o.getIdentifier),i.each(o.columns,(function(e){o.recommendationsByColumn[e]=o._dataForColumn(o.recommendations,e)})),o.FontpackService.addFontpacks(n.data.fontpacks),o.textSampleData=n.data.textSampleData,o.currentPage=t,o.isLoading=!1}))}},s.prototype.updateColumns=function(){var e,t=this,n=this.columns?this.columns.length:null;e=t.$window.innerWidth>=1280?3:t.$window.innerWidth>=768?2:1,t.columns=i.range(e),e!==n&&(t.emptyStateClassesByColumn={},t.recommendationsByColumn={},i.each(t.columns,(function(e){t.emptyStateClassesByColumn[e]=t._dataForColumn(r,e),t.recommendationsByColumn[e]=t._dataForColumn(t.recommendations,e)})))},s.prototype._activateFamily=function(e){var t=this;t.SyncService.addSyncedVariations(i.pluck(e.fonts,"id")).then((function(){e.fonts.forEach((function(e){e.font.sync&&(e.font.sync.is_selected=!0)})),t.NewrelicService.addPageAction("typekit.recommendations.activateFamily",{recommendationIndex:t._getRecommendationIndexBySlug(e.slug,"families")}),t.NotificationService.success(t.I18nService.getMessage(t.i18n,"recommendations.activation_success",{family:e.name}))}),(function(){t.NotificationService.error(t.I18nService.getMessage(t.i18n,"recommendations.activation_error"))}))},s.prototype._dataForColumn=function(e,t){var n=this.columns.length;return i.filter(e,(function(e,i){return i%n===t}))},s.prototype._deactivateFamily=function(e){var t=this;t.SyncService.removeSyncedVariations(i.pluck(e.fonts,"id")).then((function(){e.fonts.forEach((function(e){e.font.sync&&(e.font.sync.is_selected=!1)})),t.NewrelicService.addPageAction("typekit.recommendations.deactivateFamily",{recommendationIndex:t._getRecommendationIndexBySlug(e.slug,"families")}),t.NotificationService.success(t.I18nService.getMessage(t.i18n,"recommendations.deactivation_success",{family:e.name}))}),(function(){t.NotificationService.error(t.I18nService.getMessage(t.i18n,"recommendations.deactivation_error"))}))},s.prototype._getRecommendationIndexBySlug=function(e,t){return i.findIndex(this.recommendations,{slug:e,type:t})},s.prototype._preloadData=function(){var e=this;return e.currentPage=0,e.exampleText={},e.isInfiniteScrollEnabled=!0,e.emptyStateClassesByColumn={},e.loadedAllRecommendations=!1,e.recommendationsByColumn={},e.recommendationTypeChanged=!1,e.styles={},e.currentPage=null,e.selectedRecommendationType=null,e.updateColumns(),e.$q.all([e.DataService.get("/recommendations/preloaded").then((function(t){e.familiesPerPage=t.familiesPerPage,e.isPersonalized=t.isPersonalized,e.recommendationTypes=t.recommendationTypes,e.textSampleData=t.textSampleData,e.selectRecommendationType(e.getInitialRecommendationType(),1,!1)})),e.DataService.get("/recommendations/i18n").then((function(t){e.i18n=t}))])},e.exports=s},1285:function(e,t,n){o.$inject=["$document","$window","DataService","FamilyAutocompleteSearchService","FavoritesService"];var i=n(110);function o(e,t,n,i,o){this.$document=e,this.$window=t,this.DataService=n,this.FamilyAutocompleteSearchService=i,this.FavoritesService=o,this._preloadData()}o.prototype.getExampleText=function(e){var t="list";return null!=e.filters&&e.filters.indexOf("ka:ko")>=0&&(t+="_kana"),{size:40,value:this.textSamples[e.display_font.default_language][t]}},o.prototype._webComponents_initSearchBar=function(){var e=this,t=e.$document.find("af-search-bar")[0];if(t){var n=i.modules.get("SearchParamChangedEvent");t.addEventListener(n.EVENT_NAME,(function(n){e.FamilyAutocompleteSearchService.get(n.detail.searchParam).then((function(e){t.results=e.data}))}))}},o.prototype.getVisualSearchTooltipOffset=function(){return this.$window.innerWidth>=1768?null:this.$window.innerWidth>=1280?"32":this.$window.innerWidth>=768?"24":"16"},o.prototype._preloadData=function(){var e=this;i.areWebComponentsEnabled()&&e._webComponents_initSearchBar(),e.DataService.get("/neue/preloaded_family_data").then((function(t){e.families=t.familiesData.families,e.textSamplePrimers=t.textSampleData.textSamplePrimers,e.textSamples=t.textSampleData.textSamples})),e.DataService.get("/spectrum/search_navigation_tabs").then((function(t){for(var n in e.navigationTabs=t.navigationTabs,t.navigationTabs)if(t.navigationTabs[n].id===t.currentTabId){e.currentTab=t.navigationTabs[n];break}}))},e.exports=o},1286:function(e,t){function n(e,t){var n=this;e.get("filters_sidebar_data").then((function(e){n.filtersModel=t.getFilterModel(e.allFamilyFilters,e.familyFilterData,e.languageFilters)}))}n.$inject=["DataService","FilterDataService"],e.exports=n},1287:function(e,t,n){u.$inject=["$document","$http","$q","$scope","$window","DataService","DialogService","FilterVariationsService","I18nService","NewrelicService","ScrollService","UrlService","UserPrefsService","VisualSearchService"];var i=n(15),o=n(1288),r=n(4),a="visual-searches--loading",s=/(fonts\/vs\/[^\/]*)(\/)*(.*)*/,c="text",l=["upload","select","confirm","results"];function u(e,t,n,i,o,r,a,s,c,l,u,d,f,p){var h=this;h.$document=e,h.$http=t,h.$q=n,h.$scope=i,h.$window=o,h.DataService=r,h.DialogService=a,h.FilterVariationsService=s,h.I18nService=c,h.NewrelicService=l,h.ScrollService=u,h.UrlService=d,h.VisualSearchService=p,h.UserPrefsService=f,h.filterValues=[],h._init()}u.prototype.filterFontsByRequiredActions=function(e){var t=this.FilterVariationsService.filterRequiredActionsByToggles(this.fonts,e);this.preferredAction=t.preferred,this.filteredFonts=this.FilterVariationsService.filterFontsByRequiredActions(this.fonts,t.filters)},u.prototype.showPaidFontsSelected=function(){return this.showPaidFonts},u.prototype.showTipsModal=function(){var e=this;e.DialogService.show("/angular_templates/dialogs/visual_search_tips.html",{closeOnDrag:!0}).then((function(){e.NewrelicService.addPageAction("typekit.render.visual-search.search-tips-modal")}))},u.prototype.handleExampleTextKeyup=function(e){"Enter"===e.key||13===e.keyCode?this.handleNextButtonClick():(this._userEnteredText=e.target.value,this._updateExampleText(e.target.value))},u.prototype.handleNextButtonClick=function(){this.loadStep(this._getNextStep())},u.prototype.handleStartOverClick=function(){this._setCurrentStep(l[0],!0)},u.prototype.handlePreviousClick=function(){var e=l.indexOf(this._currentStep),t=l[e-1];this._setCurrentStep(t,!0)},u.prototype.fontVariationCardsClass=function(){return"grid"===this.viewType?"spectrum-grid-row font-variations-grid-view":""},u.prototype.getExampleTextValue=function(){return this._userEnteredText||this.extractedText},u.prototype.loadStep=function(e){var t=this;t._currentStep!=e&&(t._currentStep==l[1]?t._updateResultsForCoordinates().then((function(){t._setCurrentStep(e,!0),t._updateExampleText(t._userEnteredText||t.extractedText),t._scrollToTop()})):(t._setCurrentStep(e,!0),t._scrollToTop()))},u.prototype.isCurrentStep=function(e){return this._currentStep==e},u.prototype.isConfirmationImageVisible=function(){switch(this._currentStep){case l[0]:case l[1]:return!1;default:return!0}},u.prototype.isFontListEmpty=function(){return 0===this.fonts.length},u.prototype.isFilteredFontListEmpty=function(){return 0===this.filteredFonts.length},u.prototype.getSimilarFontCountForDisplay=function(){return this.filteredFonts.length>1?this.I18nService.getMessage(this._i18n,"neue.visual_search.results_page.similar_fonts_plural",{num_fonts:this.filteredFonts.length}):1===this.filteredFonts.length?this.I18nService.getMessage(this._i18n,"neue.visual_search.results_page.similar_font_singular",{num_fonts:1}):this.I18nService.getMessage(this._i18n,"neue.visual_search.results_page.similar_fonts_plural",{num_fonts:0})},u.prototype._getCropperCoordinates=function(){var e=this.cropper.getData();return{x_min:e.x,y_min:e.y,x_max:e.x+e.width,y_max:e.y+e.height}},u.prototype._getCropperData=function(e){if(e.coordinates&&0!=Object.keys(e.coordinates).length)return{x:e.coordinates.x_min,y:e.coordinates.y_min,width:e.coordinates.x_max-e.coordinates.x_min,height:e.coordinates.y_max-e.coordinates.y_min};if(e.detectedRegion&&0!=Object.keys(e.detectedRegion).length){var t=e.detectedRegion;return{x:t.x_min,y:t.y_min,width:t.x_max-t.x_min,height:t.y_max-t.y_min}}return{}},u.prototype._getNextStep=function(){var e=l.indexOf(this._currentStep);return e+1<l.length?l[e+1]:l[0]},u.prototype._getPlaceholderConfirmationCanvas=function(){return this.$document[0].querySelector(".visual-searches__confirm-image .visual-searches__confirmation-canvas-placeholder")},u.prototype._getStepFromUrl=function(){var e=s.exec(this.$window.location.pathname);return e[e.length-1]?e[e.length-1]:l[0]},u.prototype._getUrlForStep=function(e){return"/"+s.exec(this.$window.location.pathname)[1]+"/"+e},u.prototype._init=function(){var e=this;e.viewType="list",e._preloadData().then((function(t){var n=t[1];e._currentStep!=l[0]&&e._preloadImage().then((function(){return e._initCropper(e._getCropperData(n))})).then((function(){e._confirmationCanvas=e._getPlaceholderConfirmationCanvas(),e._showCroppedImage()}))})),e.$window.onpopstate=function(){e.$scope.$apply((function(){e._setCurrentStep(e._getStepFromUrl())}))}},u.prototype._initCropper=function(e){var t=this;return t.$q((function(n){t._setMaxContainerDimensions(),t.cropper=new o(t.image,{background:!1,data:e,minCropBoxHeight:10,minCropBoxWidth:10,minContainerHeight:10,minContainerWidth:10,dragMode:"none",responsive:!0,zoomable:!1,checkCrossOrigin:!1,viewMode:1,ready:n})}))},u.prototype._preloadImage=function(){var e=this;return e.$q((function(t){e.image=e.$document[0].getElementById("visual-searches__image-cropper-image"),e.$http({method:"GET",url:e.image.getAttribute("data-src"),responseType:"blob"}).then((function(n){e.image.onload=t,e.image.src=e.$window.URL.createObjectURL(n.data)}))}))},u.prototype._scrollToTop=function(){var e=this.$document[0].querySelector("#visual-search-heading");this.ScrollService.scrollUpTo(e,1e3)},u.prototype._setMaxContainerDimensions=function(){var e=this,t=e.$document[0].getElementById("visual-searches__image-cropper");t.style.maxWidth=e.image.naturalWidth+"px",t.style.maxHeight=e.image.naturalHeight+"px"},u.prototype._preloadData=function(){var e=this;return e.$q.all([e.UserPrefsService.getUserPrefs().then((function(t){e.showPaidFonts=!!t.showPaidFonts})),e.$q((function(t){e.DataService.get("/neue/preloaded_variation_data").then((function(n){e._currentStep=n.step,n.step!=l[0]&&(e.fonts=n.fonts,e.extractedText=n.detectedText,e.visualSearchOpaqueId=n.visualSearchOpaqueId,e.textSamples=n.textSampleData.textSamples,e.textSamplePrimers=n.textSampleData.textSamplePrimers,e.textSampleData=n.textSampleData),e.showUpgradeActionToggle=e.FilterVariationsService.hasUpgradeFilterOption(e.fonts),e.filterFontsByRequiredActions(),e.UrlService.getSearchParam(c)&&(e._userEnteredText=decodeURIComponent(e.UrlService.getSearchParam(c))),e._updateExampleText(e._userEnteredText||e.extractedText),t(n)})),e.DataService.get("/visual_search/i18n").then((function(t){e._i18n=t}))}))])},u.prototype._setCurrentStep=function(e,t){this._currentStep=e,this.NewrelicService.addPageAction("typekit.render.visual-search.step",{step:e}),t&&this.UrlService.pushState(null,null,this._getUrlForStep(e)),e!=l[0]&&this._storeDataInUrl()},u.prototype._setLoadingState=function(){i.element(this.$document[0].body).addClass(a)},u.prototype._showCroppedImage=function(){var e=this.cropper.getCroppedCanvas();this._confirmationCanvas.parentNode.replaceChild(e,this._confirmationCanvas),this._confirmationCanvas=e},u.prototype._storeDataInUrl=function(){var e=this._getCropperCoordinates();this._userEnteredText&&(e.text=encodeURIComponent(this._userEnteredText)),this.UrlService.setSearchParams(e)},u.prototype._unsetLoadingState=function(){i.element(this.$document[0].body).removeClass(a)},u.prototype._updateExampleText=function(e){this.exampleText={size:50,value:e||"The quick brown fox jumps over the lazy dog"}},u.prototype._updateResultsForCoordinates=function(){var e=this;return e.$q((function(t){e._setLoadingState(),e.VisualSearchService.put(e.visualSearchOpaqueId,e._getCropperCoordinates()).then((function(n){e._showCroppedImage(),e.extractedText=n.data.text,e.fonts=n.data.fonts;var i={upgrade:e.showPaidFonts},o=e.FilterVariationsService.filterRequiredActionsByToggles(e.fonts,i);e.filteredFonts=e.FilterVariationsService.filterFontsByRequiredActions(e.fonts,o.filters);var a={fontCount:e.fonts.length};e.fonts.length>0&&(a.topResult=r.first(r.pluck(e.fonts,"name"))),e.NewrelicService.addPageAction("typekit.render.visual-search",a),t(),e._unsetLoadingState()}))}))},e.exports=u},1288:function(e,t,n){e.exports=function(){"use strict";var e={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},t='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},a=/^data:([^;]+);base64,/,s=/([a-z\d])([A-Z])/g,c=/^(https?:)\/\/([^:/?#]+):?(\d*)/i,l=/\s+/,u=/^(width|height|left|top|marginLeft|marginTop)$/,d=/^\s+(.*)\s+$/,f=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,p="undefined"!==typeof window?window.navigator:null,h=p&&f.test(p.userAgent),g=Object.prototype,m=g.toString,v=g.hasOwnProperty,y=(Array.prototype.slice,String.fromCharCode);function S(e){return m.call(e).slice(8,-1).toLowerCase()}function _(e){return"number"===typeof e&&!isNaN(e)}function b(e){return"undefined"===typeof e}function w(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&null!==e}function $(e){if(!w(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&v.call(n,"isPrototypeOf")}catch(i){return!1}}function x(e){return"function"===S(e)}function C(e){return Array.isArray?Array.isArray(e):"array"===S(e)}function F(e){return"string"===typeof e&&(e=e.trim?e.trim():e.replace(d,"$1")),e}function k(e,t){if(e&&x(t)){var n=void 0;if(C(e)||_(e.length)){var i=e.length;for(n=0;n<i&&!1!==t.call(e,e[n],n,e);n++);}else w(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))}return e}function M(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!0===t[0],o=i?t[1]:t[0];return w(o)&&t.length>1&&(t.shift(),t.forEach((function(e){w(e)&&Object.keys(e).forEach((function(t){i&&w(o[t])?M(!0,o[t],e[t]):o[t]=e[t]}))}))),o}function E(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.apply(t,i.concat(o))}}function P(e,t){var n=e.style;k(t,(function(e,t){u.test(t)&&_(e)&&(e+="px"),n[t]=e}))}function T(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function D(e,t){if(_(e.length))k(e,(function(e){D(e,t)}));else if(e.classList)e.classList.add(t);else{var n=F(e.className);n?n.indexOf(t)<0&&(e.className=n+" "+t):e.className=t}}function A(e,t){_(e.length)?k(e,(function(e){A(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}function j(e,t,n){_(e.length)?k(e,(function(e){j(e,t,n)})):n?D(e,t):A(e,t)}function L(e){return e.replace(s,"$1-$2").toLowerCase()}function I(e,t){return w(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+L(t))}function N(e,t,n){w(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-"+L(t),n)}function V(e,t){if(w(e[t]))delete e[t];else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=null}else e.removeAttribute("data-"+L(t))}function O(e,t,n){var i=F(t).split(l);i.length>1?k(i,(function(t){O(e,t,n)})):e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function R(e,t,n,i){var o=F(t).split(l),r=n;o.length>1?k(o,(function(t){R(e,t,n)})):(i&&(n=function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return O(e,t,n),r.apply(e,o)}),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n))}function B(e,t,n){if(e.dispatchEvent){var i=void 0;return x(Event)&&x(CustomEvent)?i=b(n)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):b(n)?(i=document.createEvent("Event")).initEvent(t,!0,!0):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(i)}return!e.fireEvent||e.fireEvent("on"+t)}function W(e){var t=e||window.event;if(t.target||(t.target=t.srcElement||document),!_(t.pageX)&&_(t.clientX)){var n=e.target.ownerDocument||document,i=n.documentElement,o=n.body;t.pageX=t.clientX+((i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0)),t.pageY=t.clientY+((i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0))}return t}function U(e){var t=document.documentElement,n=e.getBoundingClientRect();return{left:n.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:n.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}}function q(e,t){return e.getElementsByTagName(t)}function z(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function H(e){return document.createElement(e)}function Z(e,t){e.appendChild(t)}function G(e){e.parentNode&&e.parentNode.removeChild(e)}function Y(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function X(e){var t=e.match(c);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function K(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t}function J(e,t){if(!e.naturalWidth||h){var n=H("img");n.onload=function(){t(this.width,this.height)},n.src=e.src}else t(e.naturalWidth,e.naturalHeight)}function Q(e){var t=[],n=e.translateX,i=e.translateY,o=e.rotate,r=e.scaleX,a=e.scaleY;_(n)&&0!==n&&t.push("translateX("+n+"px)"),_(i)&&0!==i&&t.push("translateY("+i+"px)"),_(o)&&0!==o&&t.push("rotate("+o+"deg)"),_(r)&&1!==r&&t.push("scaleX("+r+")"),_(a)&&1!==a&&t.push("scaleY("+a+")");var s=t.length?t.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function ee(e,t){var n=Math.abs(e.degree)%180,i=(n>90?180-n:n)*Math.PI/180,o=Math.sin(i),r=Math.cos(i),a=e.width,s=e.height,c=e.aspectRatio,l=void 0,u=void 0;return t?u=(l=a/(r+o/c))/c:(l=a*r+s*o,u=a*o+s*r),{width:l,height:u}}function te(e,t){var n=H("canvas"),i=n.getContext("2d"),o=0,r=0,a=t.naturalWidth,s=t.naturalHeight,c=t.rotate,l=t.scaleX,u=t.scaleY,d=_(l)&&_(u)&&(1!==l||1!==u),f=_(c)&&0!==c,p=f||d,h=a*Math.abs(l||1),g=s*Math.abs(u||1),m=void 0,v=void 0,y=void 0;return d&&(m=h/2,v=g/2),f&&(m=(h=(y=ee({width:h,height:g,degree:c})).width)/2,v=(g=y.height)/2),n.width=h,n.height=g,p&&(o=-a/2,r=-s/2,i.save(),i.translate(m,v)),f&&i.rotate(c*Math.PI/180),d&&i.scale(l,u),i.drawImage(e,Math.floor(o),Math.floor(r),Math.floor(a),Math.floor(s)),p&&i.restore(),n}function ne(e,t,n){var i="",o=t;for(n+=t;o<n;o++)i+=y(e.getUint8(o));return i}function ie(e){var t=new DataView(e),n=t.byteLength,i=void 0,o=void 0,r=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(u=2;u<n;){if(255===t.getUint8(u)&&225===t.getUint8(u+1)){c=u;break}u++}if(c&&(o=c+10,"Exif"===ne(t,c+4,4)&&((a=18761===(s=t.getUint16(o)))||19789===s)&&42===t.getUint16(o+2,a)&&(r=t.getUint32(o+4,a))>=8&&(l=o+r)),l)for(n=t.getUint16(l,a),d=0;d<n;d++)if(u=l+12*d+2,274===t.getUint16(u,a)){u+=8,i=t.getUint16(u,a),h&&t.setUint16(u,1,a);break}return i}function oe(e){var t=e.replace(a,""),n=atob(t),i=n.length,o=new ArrayBuffer(i),r=new Uint8Array(o),s=void 0;for(s=0;s<i;s++)r[s]=n.charCodeAt(s);return o}function re(e){var t=new Uint8Array(e),n=t.length,i="",o=void 0;for(o=0;o<n;o++)i+=y(t[o]);return"data:image/jpeg;base64,"+btoa(i)}var ae={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,t=e.options,n=e.element,i=e.container,o=e.cropper,r="cropper-hidden",a=void 0;D(o,r),A(n,r),e.containerData=a={width:Math.max(i.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(t.minContainerHeight)||100)},P(o,{width:a.width,height:a.height}),D(n,r),A(o,r)},initCanvas:function(){var e=this,t=e.options.viewMode,n=e.containerData,i=e.imageData,o=90===Math.abs(i.rotate),r=o?i.naturalHeight:i.naturalWidth,a=o?i.naturalWidth:i.naturalHeight,s=r/a,c=n.width,l=n.height;n.height*s>n.width?3===t?c=n.height*s:l=n.width/s:3===t?l=n.width/s:c=n.height*s;var u={naturalWidth:r,naturalHeight:a,aspectRatio:s,width:c,height:l};u.oldLeft=u.left=(n.width-c)/2,u.oldTop=u.top=(n.height-l)/2,e.canvasData=u,e.limited=1===t||2===t,e.limitCanvas(!0,!0),e.initialImageData=M({},i),e.initialCanvasData=M({},u)},limitCanvas:function(e,t){var n=this,i=n.options,o=i.viewMode,r=n.containerData,a=n.canvasData,s=a.aspectRatio,c=n.cropBoxData,l=n.cropped&&c;if(e){var u=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;o>1?(u=Math.max(u,r.width),d=Math.max(d,r.height),3===o&&(d*s>u?u=d*s:d=u/s)):o>0&&(u?u=Math.max(u,l?c.width:0):d?d=Math.max(d,l?c.height:0):l&&(u=c.width,(d=c.height)*s>u?u=d*s:d=u/s)),u&&d?d*s>u?d=u/s:u=d*s:u?d=u/s:d&&(u=d*s),a.minWidth=u,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(t)if(o){var f=r.width-a.width,p=r.height-a.height;a.minLeft=Math.min(0,f),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,f),a.maxTop=Math.max(0,p),l&&n.limited&&(a.minLeft=Math.min(c.left,c.left+(c.width-a.width)),a.minTop=Math.min(c.top,c.top+(c.height-a.height)),a.maxLeft=c.left,a.maxTop=c.top,2===o&&(a.width>=r.width&&(a.minLeft=Math.min(0,f),a.maxLeft=Math.max(0,f)),a.height>=r.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=r.width,a.maxTop=r.height},renderCanvas:function(e){var t=this,n=t.canvasData,i=t.imageData,o=i.rotate,r=void 0,a=void 0;t.rotated&&(t.rotated=!1,(r=(a=ee({width:i.width,height:i.height,degree:o})).width/a.height)!==n.aspectRatio&&(n.left-=(a.width-n.width)/2,n.top-=(a.height-n.height)/2,n.width=a.width,n.height=a.height,n.aspectRatio=r,n.naturalWidth=i.naturalWidth,n.naturalHeight=i.naturalHeight,o%180&&(a=ee({width:i.naturalWidth,height:i.naturalHeight,degree:o}),n.naturalWidth=a.width,n.naturalHeight=a.height),t.limitCanvas(!0,!1))),(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),t.limitCanvas(!1,!0),n.oldLeft=n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),P(t.canvas,M({width:n.width,height:n.height},Q({translateX:n.left,translateY:n.top}))),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(e){var t=this,n=t.canvasData,i=t.imageData,o=void 0,r=void 0,a=void 0,s=void 0;i.rotate&&(o={width:a=(r=ee({width:n.width,height:n.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0)).width,height:s=r.height,left:(n.width-a)/2,top:(n.height-s)/2}),M(i,o||{width:n.width,height:n.height,left:0,top:0}),P(t.image,M({width:i.width,height:i.height},Q(M({translateX:i.left,translateY:i.top},i)))),e&&t.output()},initCropBox:function(){var e=this,t=e.options,n=t.aspectRatio,i=Number(t.autoCropArea)||.8,o=e.canvasData,r={width:o.width,height:o.height};n&&(o.height*n>o.width?r.height=r.width/n:r.width=r.height*n),e.cropBoxData=r,e.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*i),r.height=Math.max(r.minHeight,r.height*i),r.oldLeft=r.left=o.left+(o.width-r.width)/2,r.oldTop=r.top=o.top+(o.height-r.height)/2,e.initialCropBoxData=M({},r)},limitCropBox:function(e,t){var n=this,i=n.options,o=i.aspectRatio,r=n.containerData,a=n.canvasData,s=n.cropBoxData,c=n.limited;if(e){var l=Number(i.minCropBoxWidth)||0,u=Number(i.minCropBoxHeight)||0,d=Math.min(r.width,c?a.width:r.width),f=Math.min(r.height,c?a.height:r.height);l=Math.min(l,r.width),u=Math.min(u,r.height),o&&(l&&u?u*o>l?u=l/o:l=u*o:l?u=l/o:u&&(l=u*o),f*o>d?f=d/o:d=f*o),s.minWidth=Math.min(l,d),s.minHeight=Math.min(u,f),s.maxWidth=d,s.maxHeight=f}t&&(c?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(r.width,a.left+a.width)-s.width,s.maxTop=Math.min(r.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=r.width-s.width,s.maxTop=r.height-s.height))},renderCropBox:function(){var e=this,t=e.options,n=e.containerData,i=e.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),e.limitCropBox(!1,!0),i.oldLeft=i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),t.movable&&t.cropBoxMovable&&N(e.face,"action",i.width===n.width&&i.height===n.height?"move":"all"),P(e.cropBox,M({width:i.width,height:i.height},Q({translateX:i.left,translateY:i.top}))),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.complete&&B(e.element,"crop",e.getData())}},se="preview",ce={initPreview:function(){var e=this,t=e.options.preview,n=H("img"),i=e.crossOrigin,o=i?e.crossOriginUrl:e.url;if(i&&(n.crossOrigin=i),n.src=o,Z(e.viewBox,n),e.image2=n,t){var r=t.querySelector?[t]:document.querySelectorAll(t);e.previews=r,k(r,(function(e){var t=H("img");N(e,se,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),i&&(t.crossOrigin=i),t.src=o,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',Y(e),Z(e,t)}))}},resetPreview:function(){k(this.previews,(function(e){var t=I(e,se);P(e,{width:t.width,height:t.height}),e.innerHTML=t.html,V(e,se)}))},preview:function(){var e=this,t=e.imageData,n=e.canvasData,i=e.cropBoxData,o=i.width,r=i.height,a=t.width,s=t.height,c=i.left-n.left-t.left,l=i.top-n.top-t.top;e.cropped&&!e.disabled&&(P(e.image2,M({width:a,height:s},Q(M({translateX:-c,translateY:-l},t)))),k(e.previews,(function(e){var n=I(e,se),i=n.width,u=n.height,d=i,f=u,p=1;o&&(f=r*(p=i/o)),r&&f>u&&(d=o*(p=u/r),f=u),P(e,{width:d,height:f}),P(q(e,"img")[0],M({width:a*p,height:s*p},Q(M({translateX:-c*p,translateY:-l*p},t))))})))}},le="undefined"!==typeof window?window.PointerEvent:null,ue=le?"pointerdown":"touchstart mousedown",de=le?"pointermove":"touchmove mousemove",fe=le?" pointerup pointercancel":"touchend touchcancel mouseup",pe="wheel mousewheel DOMMouseScroll",he="dblclick",ge="resize",me="cropstart",ve="cropmove",ye="cropend",Se="crop",_e="zoom",be={bind:function(){var e=this,t=e.options,n=e.element,i=e.cropper;x(t.cropstart)&&R(n,me,t.cropstart),x(t.cropmove)&&R(n,ve,t.cropmove),x(t.cropend)&&R(n,ye,t.cropend),x(t.crop)&&R(n,Se,t.crop),x(t.zoom)&&R(n,_e,t.zoom),R(i,ue,e.onCropStart=E(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&R(i,pe,e.onWheel=E(e.wheel,e)),t.toggleDragModeOnDblclick&&R(i,he,e.onDblclick=E(e.dblclick,e)),R(document,de,e.onCropMove=E(e.cropMove,e)),R(document,fe,e.onCropEnd=E(e.cropEnd,e)),t.responsive&&R(window,ge,e.onResize=E(e.resize,e))},unbind:function(){var e=this,t=e.options,n=e.element,i=e.cropper;x(t.cropstart)&&O(n,me,t.cropstart),x(t.cropmove)&&O(n,ve,t.cropmove),x(t.cropend)&&O(n,ye,t.cropend),x(t.crop)&&O(n,Se,t.crop),x(t.zoom)&&O(n,_e,t.zoom),O(i,ue,e.onCropStart),t.zoomable&&t.zoomOnWheel&&O(i,pe,e.onWheel),t.toggleDragModeOnDblclick&&O(i,he,e.onDblclick),O(document,de,e.onCropMove),O(document,fe,e.onCropEnd),t.responsive&&O(window,ge,e.onResize)}},we=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;function $e(e,t){var n=e.pageX,i=e.pageY,o={endX:n,endY:i};return t?o:M({startX:n,startY:i},o)}var xe={resize:function(){var e=this,t=e.options.restore,n=e.container,i=e.containerData;if(!e.disabled&&i){var o=n.offsetWidth/i.width,r=void 0,a=void 0;1===o&&n.offsetHeight===i.height||(t&&(r=e.getCanvasData(),a=e.getCropBoxData()),e.render(),t&&(e.setCanvasData(k(r,(function(e,t){r[t]=e*o}))),e.setCropBoxData(k(a,(function(e,t){a[t]=e*o})))))}},dblclick:function(){var e=this;e.disabled||e.setDragMode(T(e.dragBox,"cropper-crop")?"move":"crop")},wheel:function(e){var t=this,n=W(e),i=Number(t.options.wheelZoomRatio)||.1,o=1;t.disabled||(n.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),n.deltaY?o=n.deltaY>0?1:-1:n.wheelDelta?o=-n.wheelDelta/120:n.detail&&(o=n.detail>0?1:-1),t.zoom(-o*i,n)))},cropStart:function(e){var t=this;if(!t.disabled){var n=t.options,i=t.pointers,o=W(e),r=void 0;if(o.changedTouches?k(o.changedTouches,(function(e){i[e.identifier]=$e(e)})):i[o.pointerId||0]=$e(o),r=Object.keys(i).length>1&&n.zoomable&&n.zoomOnTouch?"zoom":I(o.target,"action"),we.test(r)){if(!1===B(t.element,"cropstart",{originalEvent:o,action:r}))return;o.preventDefault(),t.action=r,t.cropping=!1,"crop"===r&&(t.cropping=!0,D(t.dragBox,"cropper-modal"))}}},cropMove:function(e){var t=this,n=t.action;if(!t.disabled&&n){var i=t.pointers,o=W(e);o.preventDefault(),!1!==B(t.element,"cropmove",{originalEvent:o,action:n})&&(o.changedTouches?k(o.changedTouches,(function(e){M(i[e.identifier],$e(e,!0))})):M(i[o.pointerId||0],$e(o,!0)),t.change(o))}},cropEnd:function(e){var t=this,n=t.action;if(!t.disabled&&n){var i=t.pointers,o=W(e);o.preventDefault(),o.changedTouches?k(o.changedTouches,(function(e){delete i[e.identifier]})):delete i[o.pointerId||0],Object.keys(i).length||(t.action=""),t.cropping&&(t.cropping=!1,j(t.dragBox,"cropper-modal",t.cropped&&this.options.modal)),B(t.element,"cropend",{originalEvent:o,action:n})}}},Ce="e",Fe="w",ke="s",Me="n",Ee="se",Pe="sw",Te="ne",De="nw";function Ae(e){var t=M({},e),n=[];return k(e,(function(e,i){delete t[i],k(t,(function(t){var i=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),r=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),s=Math.sqrt(i*i+o*o),c=(Math.sqrt(r*r+a*a)-s)/s;n.push(c)}))})),n.sort((function(e,t){return Math.abs(e)<Math.abs(t)})),n[0]}var je={change:function(e){var t=this,n=t.options,i=t.containerData,o=t.canvasData,r=t.cropBoxData,a=n.aspectRatio,s=t.action,c=r.width,l=r.height,u=r.left,d=r.top,f=u+c,p=d+l,h=0,g=0,m=i.width,v=i.height,y=!0,S=void 0;!a&&e.shiftKey&&(a=c&&l?c/l:1),t.limited&&(h=r.minLeft,g=r.minTop,m=h+Math.min(i.width,o.width,o.left+o.width),v=g+Math.min(i.height,o.height,o.top+o.height));var _=t.pointers,b=_[Object.keys(_)[0]],w={x:b.endX-b.startX,y:b.endY-b.startY};switch(a&&(w.X=w.y*a,w.Y=w.x/a),s){case"all":u+=w.x,d+=w.y;break;case Ce:if(w.x>=0&&(f>=m||a&&(d<=g||p>=v))){y=!1;break}c+=w.x,a&&(l=c/a,d-=w.Y/2),c<0&&(s=Fe,c=0);break;case Me:if(w.y<=0&&(d<=g||a&&(u<=h||f>=m))){y=!1;break}l-=w.y,d+=w.y,a&&(c=l*a,u+=w.X/2),l<0&&(s=ke,l=0);break;case Fe:if(w.x<=0&&(u<=h||a&&(d<=g||p>=v))){y=!1;break}c-=w.x,u+=w.x,a&&(l=c/a,d+=w.Y/2),c<0&&(s=Ce,c=0);break;case ke:if(w.y>=0&&(p>=v||a&&(u<=h||f>=m))){y=!1;break}l+=w.y,a&&(c=l*a,u-=w.X/2),l<0&&(s=Me,l=0);break;case Te:if(a){if(w.y<=0&&(d<=g||f>=m)){y=!1;break}l-=w.y,d+=w.y,c=l*a}else w.x>=0?f<m?c+=w.x:w.y<=0&&d<=g&&(y=!1):c+=w.x,w.y<=0?d>g&&(l-=w.y,d+=w.y):(l-=w.y,d+=w.y);c<0&&l<0?(s=Pe,l=0,c=0):c<0?(s=De,c=0):l<0&&(s=Ee,l=0);break;case De:if(a){if(w.y<=0&&(d<=g||u<=h)){y=!1;break}l-=w.y,d+=w.y,c=l*a,u+=w.X}else w.x<=0?u>h?(c-=w.x,u+=w.x):w.y<=0&&d<=g&&(y=!1):(c-=w.x,u+=w.x),w.y<=0?d>g&&(l-=w.y,d+=w.y):(l-=w.y,d+=w.y);c<0&&l<0?(s=Ee,l=0,c=0):c<0?(s=Te,c=0):l<0&&(s=Pe,l=0);break;case Pe:if(a){if(w.x<=0&&(u<=h||p>=v)){y=!1;break}c-=w.x,u+=w.x,l=c/a}else w.x<=0?u>h?(c-=w.x,u+=w.x):w.y>=0&&p>=v&&(y=!1):(c-=w.x,u+=w.x),w.y>=0?p<v&&(l+=w.y):l+=w.y;c<0&&l<0?(s=Te,l=0,c=0):c<0?(s=Ee,c=0):l<0&&(s=De,l=0);break;case Ee:if(a){if(w.x>=0&&(f>=m||p>=v)){y=!1;break}l=(c+=w.x)/a}else w.x>=0?f<m?c+=w.x:w.y>=0&&p>=v&&(y=!1):c+=w.x,w.y>=0?p<v&&(l+=w.y):l+=w.y;c<0&&l<0?(s=De,l=0,c=0):c<0?(s=Pe,c=0):l<0&&(s=Te,l=0);break;case"move":t.move(w.x,w.y),y=!1;break;case"zoom":t.zoom(Ae(_),e),y=!1;break;case"crop":if(!w.x||!w.y){y=!1;break}S=U(t.cropper),u=b.startX-S.left,d=b.startY-S.top,c=r.minWidth,l=r.minHeight,w.x>0?s=w.y>0?Ee:Te:w.x<0&&(u-=c,s=w.y>0?Pe:De),w.y<0&&(d-=l),t.cropped||(A(t.cropBox,"cropper-hidden"),t.cropped=!0,t.limited&&t.limitCropBox(!0,!0))}y&&(r.width=c,r.height=l,r.left=u,r.top=d,t.action=s,t.renderCropBox()),k(_,(function(e){e.startX=e.endX,e.startY=e.endY}))}};function Le(e){var t=0,n=0,i=0;return k(e,(function(e){var o=e.startX,r=e.startY;t+=o,n+=r,i+=1})),{pageX:t/=i,pageY:n/=i}}var Ie={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&D(e.dragBox,"cropper-modal"),A(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=M({},e.initialImageData),e.canvasData=M({},e.initialCanvasData),e.cropBoxData=M({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(M(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),A(e.dragBox,"cropper-modal"),D(e.cropBox,"cropper-hidden")),e},replace:function(e,t){var n=this;return!n.disabled&&e&&(n.isImg&&(n.element.src=e),t?(n.url=e,n.image.src=e,n.ready&&(n.image2.src=e,k(n.previews,(function(t){q(t,"img")[0].src=e})))):(n.isImg&&(n.replaced=!0),n.options.data=null,n.load(e))),n},enable:function(){var e=this;return e.ready&&(e.disabled=!1,A(e.cropper,"cropper-disabled")),e},disable:function(){var e=this;return e.ready&&(e.disabled=!0,D(e.cropper,"cropper-disabled")),e},destroy:function(){var e=this,t=e.element,n=e.image;return e.loaded?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),A(t,"cropper-hidden")):e.isImg?O(t,"load",e.start):n&&G(n),V(t,"cropper"),e},move:function(e,t){var n=this,i=n.canvasData;return n.moveTo(b(e)?e:i.left+Number(e),b(t)?t:i.top+Number(t))},moveTo:function(e,t){var n=this,i=n.canvasData,o=!1;return b(t)&&(t=e),e=Number(e),t=Number(t),n.ready&&!n.disabled&&n.options.movable&&(_(e)&&(i.left=e,o=!0),_(t)&&(i.top=t,o=!0),o&&n.renderCanvas(!0)),n},zoom:function(e,t){var n=this,i=n.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,n.zoomTo(i.width*e/i.naturalWidth,t)},zoomTo:function(e,t){var n=this,i=n.options,o=n.canvasData,r=o.width,a=o.height,s=o.naturalWidth,c=o.naturalHeight;if((e=Number(e))>=0&&n.ready&&!n.disabled&&i.zoomable){var l=s*e,u=c*e;if(!1===B(n.element,"zoom",{originalEvent:t,oldRatio:r/s,ratio:l/s}))return n;if(t){var d=n.pointers,f=U(n.cropper),p=d&&Object.keys(d).length?Le(d):{pageX:t.pageX,pageY:t.pageY};o.left-=(l-r)*((p.pageX-f.left-o.left)/r),o.top-=(u-a)*((p.pageY-f.top-o.top)/a)}else o.left-=(l-r)/2,o.top-=(u-a)/2;o.width=l,o.height=u,n.renderCanvas(!0)}return n},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+Number(e))},rotateTo:function(e){var t=this;return _(e=Number(e))&&t.ready&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var n=this,i=n.imageData,o=!1;return b(t)&&(t=e),e=Number(e),t=Number(t),n.ready&&!n.disabled&&n.options.scalable&&(_(e)&&(i.scaleX=e,o=!0),_(t)&&(i.scaleY=t,o=!0),o&&n.renderImage(!0)),n},scaleX:function(e){var t=this,n=t.imageData.scaleY;return t.scale(e,_(n)?n:1)},scaleY:function(e){var t=this,n=t.imageData.scaleX;return t.scale(_(n)?n:1,e)},getData:function(e){var t=this,n=t.options,i=t.imageData,o=t.canvasData,r=t.cropBoxData,a=void 0,s=void 0;return t.ready&&t.cropped?(s={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height},a=i.width/i.naturalWidth,k(s,(function(t,n){t/=a,s[n]=e?Math.round(t):t}))):s={x:0,y:0,width:0,height:0},n.rotatable&&(s.rotate=i.rotate||0),n.scalable&&(s.scaleX=i.scaleX||1,s.scaleY=i.scaleY||1),s},setData:function(e){var t=this,n=t.options,i=t.imageData,o=t.canvasData,r={},a=void 0,s=void 0,c=void 0;return x(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&$(e)&&(n.rotatable&&_(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,t.rotated=a=!0),n.scalable&&(_(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,s=!0),_(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,s=!0)),a?t.renderCanvas():s&&t.renderImage(),c=i.width/i.naturalWidth,_(e.x)&&(r.left=e.x*c+o.left),_(e.y)&&(r.top=e.y*c+o.top),_(e.width)&&(r.width=e.width*c),_(e.height)&&(r.height=e.height*c),t.setCropBoxData(r)),t},getContainerData:function(){var e=this;return e.ready?e.containerData:{}},getImageData:function(){var e=this;return e.loaded?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,n={};return e.ready&&k(["left","top","width","height","naturalWidth","naturalHeight"],(function(e){n[e]=t[e]})),n},setCanvasData:function(e){var t=this,n=t.canvasData,i=n.aspectRatio;return x(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&$(e)&&(_(e.left)&&(n.left=e.left),_(e.top)&&(n.top=e.top),_(e.width)?(n.width=e.width,n.height=e.width/i):_(e.height)&&(n.height=e.height,n.width=e.height*i),t.renderCanvas(!0)),t},getCropBoxData:function(){var e=this,t=e.cropBoxData,n=void 0;return e.ready&&e.cropped&&(n={left:t.left,top:t.top,width:t.width,height:t.height}),n||{}},setCropBoxData:function(e){var t=this,n=t.cropBoxData,i=t.options.aspectRatio,o=void 0,r=void 0;return x(e)&&(e=e.call(t.element)),t.ready&&t.cropped&&!t.disabled&&$(e)&&(_(e.left)&&(n.left=e.left),_(e.top)&&(n.top=e.top),_(e.width)&&e.width!==n.width&&(o=!0,n.width=e.width),_(e.height)&&e.height!==n.height&&(r=!0,n.height=e.height),i&&(o?n.height=n.width/i:r&&(n.width=n.height*i)),t.renderCropBox()),t},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(!t.cropped)return te(t.image,t.imageData);$(e)||(e={});var n=t.getData(),i=n.width,o=n.height,a=i/o,s=void 0,c=void 0,l=void 0;$(e)&&(s=e.width,c=e.height,s?(c=s/a,l=s/i):c&&(s=c*a,l=c/o));var u=Math.floor(s||i),d=Math.floor(c||o),f=H("canvas"),p=f.getContext("2d");f.width=u,f.height=d,e.fillColor&&(p.fillStyle=e.fillColor,p.fillRect(0,0,u,d));var h,g,m,v,y,S,_,b,w,x,C,F,k,M=(h=te(t.image,t.imageData),g=h.width,m=h.height,v=t.canvasData,y=[h],S=n.x+v.naturalWidth*(Math.abs(n.scaleX||1)-1)/2,_=n.y+v.naturalHeight*(Math.abs(n.scaleY||1)-1)/2,b=void 0,w=void 0,x=void 0,C=void 0,F=void 0,k=void 0,S<=-i||S>g?S=b=x=F=0:S<=0?(x=-S,S=0,b=F=Math.min(g,i+S)):S<=g&&(x=0,b=F=Math.min(i,g-S)),b<=0||_<=-o||_>m?_=w=C=k=0:_<=0?(C=-_,_=0,w=k=Math.min(m,o+_)):_<=m&&(C=0,w=k=Math.min(o,m-_)),y.push(Math.floor(S),Math.floor(_),Math.floor(b),Math.floor(w)),l&&(x*=l,C*=l,F*=l,k*=l),F>0&&k>0&&y.push(Math.floor(x),Math.floor(C),Math.floor(F),Math.floor(k)),y);return p.drawImage.apply(p,r(M)),f},setAspectRatio:function(e){var t=this,n=t.options;return t.disabled||b(e)||(n.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t=this,n=t.options,i=t.dragBox,o=t.face,r=void 0,a=void 0;return t.loaded&&!t.disabled&&(r="crop"===e,a=n.movable&&"move"===e,N(i,"action",e=r||a?e:"none"),j(i,"cropper-crop",r),j(i,"cropper-move",a),n.cropBoxMovable||(N(o,"action",e),j(o,"cropper-crop",r),j(o,"cropper-move",a))),t}},Ne="cropper",Ve=Ne+"-hidden",Oe="error",Re="load",Be="ready",We="crop",Ue=/^data:/,qe=/^data:image\/jpeg.*;base64,/,ze=void 0,He=function(){function n(t,o){i(this,n);var r=this;r.element=t,r.options=M({},e,$(o)&&o),r.loaded=!1,r.ready=!1,r.complete=!1,r.rotated=!1,r.cropped=!1,r.disabled=!1,r.replaced=!1,r.limited=!1,r.wheeling=!1,r.isImg=!1,r.originalUrl="",r.canvasData=null,r.cropBoxData=null,r.previews=null,r.pointers={},r.init()}return o(n,[{key:"init",value:function(){var e=this,t=e.element,n=t.tagName.toLowerCase(),i=void 0;if(!I(t,Ne)){if(N(t,Ne,e),"img"===n){if(e.isImg=!0,e.originalUrl=i=t.getAttribute("src"),!i)return;i=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(i=t.toDataURL());e.load(i)}}},{key:"load",value:function(e){var t=this,n=t.options,i=t.element;if(e)if(t.url=e,t.imageData={},n.checkOrientation&&window.ArrayBuffer)if(Ue.test(e))qe?t.read(oe(e)):t.clone();else{var o=new XMLHttpRequest;o.onerror=o.onabort=function(){t.clone()},o.onload=function(){t.read(o.response)},n.checkCrossOrigin&&X(e)&&i.crossOrigin&&(e=K(e)),o.open("get",e),o.responseType="arraybuffer",o.withCredentials="use-credentials"===i.crossOrigin,o.send()}else t.clone()}},{key:"read",value:function(e){var t=this,n=t.options,i=ie(e),o=t.imageData,r=0,a=1,s=1;if(i>1)switch(t.url=re(e),i){case 2:a=-1;break;case 3:r=-180;break;case 4:s=-1;break;case 5:r=90,s=-1;break;case 6:r=90;break;case 7:r=90,a=-1;break;case 8:r=-90}n.rotatable&&(o.rotate=r),n.scalable&&(o.scaleX=a,o.scaleY=s),t.clone()}},{key:"clone",value:function(){var e=this,t=e.element,n=e.url,i=void 0,o=void 0,r=void 0,a=void 0;e.options.checkCrossOrigin&&X(n)&&((i=t.crossOrigin)?o=n:(i="anonymous",o=K(n))),e.crossOrigin=i,e.crossOriginUrl=o;var s=H("img");i&&(s.crossOrigin=i),s.src=o||n,e.image=s,e.onStart=r=E(e.start,e),e.onStop=a=E(e.stop,e),e.isImg?t.complete?e.start():R(t,Re,r):(R(s,Re,r),R(s,Oe,a),D(s,"cropper-hide"),t.parentNode.insertBefore(s,t.nextSibling))}},{key:"start",value:function(e){var t=this,n=t.isImg?t.element:t.image;e&&(O(n,Re,t.onStart),O(n,Oe,t.onStop)),J(n,(function(e,n){M(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.loaded=!0,t.build()}))}},{key:"stop",value:function(){var e=this,t=e.image;O(t,Re,e.onStart),O(t,Oe,e.onStop),G(t),e.image=null}},{key:"build",value:function(){var e=this,n=e.options,i=e.element,o=e.image,r=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=void 0;if(e.loaded){e.ready&&e.unbuild();var d=H("div");d.innerHTML=t,e.container=r=i.parentNode,e.cropper=a=z(d,"cropper-container")[0],e.canvas=s=z(a,"cropper-canvas")[0],e.dragBox=c=z(a,"cropper-drag-box")[0],e.cropBox=l=z(a,"cropper-crop-box")[0],e.viewBox=z(a,"cropper-view-box")[0],e.face=u=z(l,"cropper-face")[0],Z(s,o),D(i,Ve),r.insertBefore(a,i.nextSibling),e.isImg||A(o,"cropper-hide"),e.initPreview(),e.bind(),n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,e.cropped=n.autoCrop,n.autoCrop?n.modal&&D(c,"cropper-modal"):D(l,Ve),n.guides||D(z(l,"cropper-dashed"),Ve),n.center||D(z(l,"cropper-center"),Ve),n.background&&D(a,"cropper-bg"),n.highlight||D(u,"cropper-invisible"),n.cropBoxMovable&&(D(u,"cropper-move"),N(u,"action","all")),n.cropBoxResizable||(D(z(l,"cropper-line"),Ve),D(z(l,"cropper-point"),Ve)),e.setDragMode(n.dragMode),e.render(),e.ready=!0,e.setData(n.data),e.completing=setTimeout((function(){x(n.ready)&&R(i,Be,n.ready,!0),B(i,Be),B(i,We,e.getData()),e.complete=!0}),0)}}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.complete||clearTimeout(e.completing),e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,G(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=ze,n}},{key:"setDefaults",value:function(t){M(e,$(t)&&t)}}]),n}();return M(He.prototype,ae),M(He.prototype,ce),M(He.prototype,be),M(He.prototype,xe),M(He.prototype,je),M(He.prototype,Ie),"undefined"!==typeof window&&(ze=window.Cropper,window.Cropper=He),He}()},1289:function(e,t){n.$inject=["AddFontsToWebProjectService","$scope","$timeout"];function n(e,t,n){this.projectSelectorModel=e.getProjectSelectorModel(),this.addFontsToWebProjectModel=e.getAddFontsToWebProjectModel(),this.AddFontsToWebProjectService=e,this.timeout=n,this.projectSelectorModel.getProjectSelectorModelPromise().then((function(){n((function(){t.$apply()}))}))}n.prototype.getSearchResults=function(){return this.projectSelectorModel.getSearchResults()},n.prototype.getterSetterSearchInput=function(e){if(!(arguments.length>0))return this.projectSelectorModel.getProjectName();this.projectSelectorModel.onProjectNameChange(e)},n.prototype.onSelectorButtonClick=function(){this.projectSelectorModel.onSelectorButtonClick()},n.prototype.onSelectProjectClick=function(e){this.AddFontsToWebProjectService.updateProjectDetails(e),this.projectSelectorModel.onSelectProjectClick(e)},n.prototype.isResultListAvailable=function(){return this.projectSelectorModel.isResultListAvailable()},n.prototype.isProjectInvalid=function(e){return!this.projectSelectorModel.isProjectValid(e)},n.prototype.isSelectorDisabled=function(){return this.projectSelectorModel.isSelectorDisabled()},n.prototype.isInputDisabled=function(){return this.projectSelectorModel.isInputDisabled()},n.prototype.getPlaceholder=function(e,t){return this.projectSelectorModel.getPlaceholder(e,t)},n.prototype.isProjectSelected=function(){return this.projectSelectorModel.isProjectSelected()},n.prototype.onCreateProjectClick=function(){var e=document.querySelector("#webfont-project-selector-search-box");this.getterSetterSearchInput(""),this.projectSelectorModel.resetProjectSelection(),this.projectSelectorModel.enableInputBox(),this.timeout((function(){e.focus()}),500)},n.prototype.isDropdownVisible=function(){return this.projectSelectorModel.isDropdownVisible()},n.prototype.isInvalid=function(){return this.projectSelectorModel.isInvalid()},n.prototype.saveProject=function(e){if("Enter"==e.key){var t=document.querySelector("#create-save-web-project");this.timeout((function(){t.click()}))}},n.prototype.onScroll=function(){this.projectSelectorModel.onNextScroll()},e.exports=n},1290:function(e,t){function n(e){this.styleSelectorModel=e.getStyleSelectorModel()}n.$inject=["AddFontsToWebProjectService"],n.prototype.handleShowMoreClicked=function(e){this.styleSelectorModel.setDisplayVariations(e.web_id,e.variations)},n.prototype.handleCheckboxToggled=function(e){this.styleSelectorModel.toggleCheckbox(e)},n.prototype.getShowMoreCount=function(e){return this.styleSelectorModel.getShowMoreCount(e)},n.prototype.getSelectedVariationCount=function(e){return this.styleSelectorModel.getSelectedVariationCount(e)},n.prototype.getTotalVariationCount=function(e){return this.styleSelectorModel.getTotalVariationCount(e)},n.prototype.getExampleText=function(){return this.styleSelectorModel.getExampleText()},n.prototype.getTextDirectionClass=function(e){return e.rtl?"webfont-project-style-selector__font-preview--rtl":""},n.prototype.getSortedFamilies=function(){return this.styleSelectorModel.getSortedFamilies()},n.prototype.getDisplayVariations=function(e){return this.styleSelectorModel.getDisplayVariations(e)},n.prototype.isVariationSelected=function(e){return this.styleSelectorModel.isVariationSelected(e)},e.exports=n},1291:function(e,t){function n(e){var t=this;t.WebfontProjectService=e;var n=t.WebfontProjectService.getWebfontProjectStylesModel();t.fontVariationsDetails=n.getFontVariations()||[]}n.$inject=["AddFontsToWebProjectService"],e.exports=n},1292:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{category:"&",familySlug:"&",subcategory:"&",tooltipText:"&",user:"&",variationOne:"&",variationTwo:"&",selectedFeedback:"="},controller:n(1293),controllerAs:"feedbackIcons",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/feedback_icons.html"}}},1293:function(e,t,n){o.$inject=["$scope","FeedbackService","NewrelicService"];var i=n(4);function o(e,t,n){var i=this;i.FeedbackService=t,i.NewrelicService=n,e.$watch((function(){return i.FeedbackService.getSubmittedFeedback(i._getID(),i.familySlug())}),(function(e){i.selectedFeedback=e}))}o.prototype.areThumbsUpDownVisible=function(){return!this.isSimilarityAndPairingVariant()},o.prototype.isCancelButtonVisible=function(){return this.isSimilarityAndPairingVariant()},o.prototype.isSimilarityAndPairingVariant=function(){return this._isFontSimilarityVariant()||this._isFontPairingVariant()},o.prototype.initSelectedFeedback=function(){return i.isEmpty(this.selectedFeedback)?"positive":"negative"},o.prototype.toggleSelectedFeedback=function(){return"negative"===this.selectedFeedback?"positive":"negative"},o.prototype.getClass=function(e,t){return this.selectedFeedback===e?[t,"on"].join(" "):t},o.prototype.getTooltipClass=function(){return this.isCancelButtonVisible()?"negative"===this.selectedFeedback?"spectrum-Tooltip--bottom flag-icon-tooltip on":"spectrum-Tooltip--bottom flag-icon-tooltip":"spectrum-Tooltip--top"},o.prototype.handleClick=function(e,t){e&&(e.preventDefault(),e.stopPropagation()),this.selectedFeedback=t,this.isSimilarityAndPairingVariant()?(this.NewrelicService.addPageAction("typekit.browse.similarity_and_pairing.feedback",this._getNewRelicAttributes(t)),this.FeedbackService.post(this.category(),this.subcategory(),this._getID(),t,this.familySlug(),this.variationOne().id,this.variationTwo().id)):(this.NewrelicService.addPageAction("typekit.browse.click",this._getNewRelicAttributes(t)),this.FeedbackService.post(this.category(),this.subcategory(),this._getID(),t,this.familySlug()))},o.prototype._getID=function(){if(this._isTagVariant())return this.FeedbackService.filtersModel.getSelectedTag();if(this._isRecommendationVariant())return this.user();if(this.isSimilarityAndPairingVariant())return this.variationOne().id+"-"+this.variationTwo().id;throw new Error("Unrecognized feedback icon category: "+this.category())},o.prototype._isFontPairingVariant=function(){return"pairing"===this.category()},o.prototype._isFontSimilarityVariant=function(){return"similarity"===this.category()},o.prototype._isRecommendationVariant=function(){return"recommendation"===this.category()},o.prototype._isTagVariant=function(){return"tag"===this.category()},o.prototype._getNewRelicAttributes=function(e){if(this._isTagVariant())return{tagName:this.FeedbackService.filtersModel.getSelectedTag(),familySlug:this.familySlug(),feedback:e};if(this._isRecommendationVariant())return{familySlug:this.familySlug(),feedback:e,subcategory:this.subcategory(),user:this.user()};if(this.isSimilarityAndPairingVariant())return{category:this.category(),subcategory:this.subcategory(),feedback:e,variation_one:this.variationOne().name,variation_two:this.variationTwo().name};throw new Error("Unrecognized feedback icon category: "+this.category())},e.exports=o},1294:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/large_web_project_notice.html",bindToController:{},controller:n(1295),controllerAs:"largeWebProjectNoticeCtrl"}}},1295:function(e,t){e.exports=function(){}},1296:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{allowOverlap:"&",endValue:"&",startValue:"&",label:"@",onChange:"&",max:"&",min:"&",step:"&",value:"&",valueLabel:"&",variant:"@"},controller:n(1297),controllerAs:"spectrumSlider",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/spectrum/slider.html",link:function(e,t,n,i){e.$watch((function(){return{startValue:i.startValue(),endValue:i.endValue()}}),i.updateValues.bind(i),!0)}}}},1297:function(e,t,n){a.$inject=["$element","$scope","$window"];var i=n(4),o="end-handle",r="start-handle";function a(e,t,n){this.$element=e,this.$scope=t,this.$window=n,this.minValue=parseInt(this.min(),10),this.maxValue=parseInt(this.max(),10),this.handleValues={},this.initEvents()}a.prototype.updateValues=function(e){this.isRange()&&(this.handleValues["start-handle"]=e.startValue||1),this.handleValues["end-handle"]=this.isRange()?e.endValue||1:this.value()},a.prototype.calculateHandleValue=function(e){var t=this.$element[0].getBoundingClientRect(),n=(e-t.left)/t.width;return this.minValue+(this.maxValue-this.minValue)*n},a.prototype.findClosestHandle=function(e,t){var n=this,o=n.getHandles(),r=o[0],a=1/0;return i.forEach(o,(function(i){var o=i.getBoundingClientRect(),s=o.top+n.$window.pageYOffset,c=o.left+n.$window.pageXOffset,l=Math.floor(Math.sqrt(Math.pow(e-(c+o.width/2),2)+Math.pow(t-(s+o.height/2),2)));l<a&&(a=l,r=i)})),r},a.prototype.getCenterTrackStyle=function(){return{left:100*this.getRelativePercent(this.getStartHandleValue())+"%",right:100*(1-this.getRelativePercent(this.getEndHandleValue()))+"%"}},a.prototype.getData=function(){return this.isRange()?{end:this.getEndHandleValue(),start:this.getStartHandleValue()}:this.getEndHandleValue()},a.prototype.getEndHandleValue=function(){return this.handleValues["end-handle"]},a.prototype.getEndTrackStyle=function(){var e=100*this.getRelativePercent(this.getEndHandleValue());return{left:e+"%",width:100-e+"%"}},a.prototype.getHandles=function(){return this.$element[0].querySelectorAll(".spectrum-Slider-handle")},a.prototype.getHandleStyle=function(e){return{left:100*this.getRelativePercent(this.handleValues[e])+"%"}},a.prototype.getRelativePercent=function(e){return(e-this.minValue)/(this.maxValue-this.minValue)},a.prototype.getStartHandleValue=function(){return this.handleValues["start-handle"]},a.prototype.getStartTrackStyle=function(){return this.isRange()?{width:100*this.getRelativePercent(this.getStartHandleValue())+"%"}:{left:0,right:0}},a.prototype.getStep=function(){return this.step()||1},a.prototype.getValueLabel=function(){var e=this.valueLabel({$data:this.getData()});return e||(this.isRange()?this.getStartHandleValue()+"\u2013"+this.getEndHandleValue():this.getEndHandleValue())},a.prototype.handleMouseDown=function(e){var t=this,n=function(n){t.handleMouseMove(e,n)};t.$window.addEventListener("mousemove",n),t.$window.addEventListener("mouseup",(function(){t.$window.removeEventListener("mousemove",n)}))},a.prototype.handleMouseMove=function(e,t){var n=this;t.preventDefault();var i=e.dataset.handleId,a=n.calculateHandleValue(t.clientX);i===r&&a>n.getEndHandleValue()&&(a=n.getEndHandleValue(),this.allowOverlap()||(a-=n.getStep())),i===o&&a<n.getStartHandleValue()&&(a=n.getStartHandleValue(),this.allowOverlap()||(a+=n.getStep())),a<n.minValue&&(a=n.minValue),a>n.maxValue&&(a=n.maxValue),n.$scope.$apply((function(){n.handleValues[e.dataset.handleId]=n.snapToStep(a),n.onChange({$data:n.getData()})}))},a.prototype.handlesAreOverlapping=function(){return this.handleValues["start-handle"]===this.handleValues["end-handle"]},a.prototype.initEvents=function(){var e=this;e.$element[0].addEventListener("mousedown",(function(t){t.stopPropagation();var n=e.findClosestHandle(t.pageX,t.pageY);n&&(e.handleMouseMove(n,t),e.handleMouseDown(n))}))},a.prototype.isRange=function(){return"range"===this.variant},a.prototype.isStartHandleVisible=function(){return this.isRange()},a.prototype.snapToStep=function(e){var t=this.getStep();return t?Math.round(e/t)*t:e},e.exports=a},1298:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_subsetting_options.html",scope:{},bindToController:{tkWebProjectCardModel:"=",tkWebProjectFamilyCardModel:"="},controller:n(1299),controllerAs:"tkSubsettingOptionsCtrl"}}},1299:function(e,t,n){var i=n(15);function o(){this.tkffData=this.tkWebProjectFamilyCardModel.getTkffData(),this.typekitFontFamily=this.tkffData.tkff.typekit_font_family,this.isKitDynamic=this.tkWebProjectCardModel.isDynamic(),this.isCJK=this.tkffData.is_CJK,this.tkffUniqueIdentifier=this.typekitFontFamily.slug+this.tkWebProjectCardModel.getProjectId(),this.openTypeFeatureDisplayInfo=this.tkffData.open_type_feature_display_info,this.enabledLanguageTags=this.tkffData.enabled_language_tags,this.langCheckedStates=this.constructLangCheckedStates();var e=i.copy(this.tkffData.supported_languages_all);this.supportedLanguagesHalves=this._reconstructLanguagesForView(e),this.charSetOptionsEnum=this.tkWebProjectCardModel.getCharSetOptionsEnum(),this.subSettingOptions={all:this.charSetOptionsEnum.CHAR_SET_OPTION_ALL,custom:this.charSetOptionsEnum.CHAR_SET_OPTION_CUSTOM,default:this.charSetOptionsEnum.CHAR_SET_OPTION_DEFAULT,dynamic:this.charSetOptionsEnum.CHAR_SET_OPTION_DYNAMIC},this.selectedSubsetting=this.subSettingOptions[this.tkffData.subsetting]}o.prototype.constructLangCheckedStates=function(){var e,t={};for(e=0;e<this.tkffData.supported_languages_all.length;e++)t[this.tkffData.supported_languages_all[e].language.iana_language_tag]=!1;for(e=0;e<this.enabledLanguageTags.length;e++)t[this.enabledLanguageTags[e]]=!0;return t},o.prototype.getTkffUniqueIdentifier=function(){return this.tkffUniqueIdentifier},o.prototype.isVerticalFeaturesOptionShown=function(){return this.isCJK},o.prototype.toggleVerticalFeaturesSelection=function(){this.tkWebProjectCardModel.setIsModified(!0),this.tkffData.is_vertical_features_enabled=!this.tkffData.is_vertical_features_enabled},o.prototype.toggleOpenTypeFeaturesSelection=function(){this.tkWebProjectCardModel.setIsModified(!0),this.tkffData.is_ot_features_enabled=!this.tkffData.is_ot_features_enabled},o.prototype.isDynamicSubsettingOptionShown=function(){return this.isKitDynamic},o.prototype.isAllChecked=function(){return this.selectedSubsetting==this.charSetOptionsEnum.CHAR_SET_OPTION_ALL},o.prototype.isLanguageSubsettingChecked=function(){return this.selectedSubsetting==this.charSetOptionsEnum.CHAR_SET_OPTION_CUSTOM},o.prototype.isDefaultChecked=function(){return this.selectedSubsetting==this.charSetOptionsEnum.CHAR_SET_OPTION_DEFAULT},o.prototype.isDynamicChecked=function(){return this.selectedSubsetting==this.charSetOptionsEnum.CHAR_SET_OPTION_DYNAMIC},o.prototype.handleSubsettingClick=function(e){this.tkWebProjectCardModel.setIsModified(!0),this.selectedSubsetting=e,this.tkffData.subsetting=e,this.tkWebProjectCardModel.updateIsValid()},o.prototype.isOnlyDynamicSubsettingAllowed=function(){return this.isKitDynamic&&this.isCJK},o.prototype.updateEnabledLanguages=function(e){var t;for(this.tkWebProjectCardModel.setIsModified(!0),this.langCheckedStates[e.language.iana_language_tag]=!this.langCheckedStates[e.language.iana_language_tag],this.enabledLanguageTags.splice(0,this.enabledLanguageTags.length),t=0;t<this.tkffData.supported_languages_all.length;t++)this.langCheckedStates[this.tkffData.supported_languages_all[t].language.iana_language_tag]&&this.enabledLanguageTags.push(this.tkffData.supported_languages_all[t].language.iana_language_tag);this.tkWebProjectCardModel.updateIsValid()},o.prototype._reconstructLanguagesForView=function(e){var t=[];return t.push(e.slice(0,Math.ceil(e.length/2))),t.push(e.slice(Math.ceil(e.length/2),e.length)),t},e.exports=o},1300:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_card.html",bindToController:{embedCodeModel:"=",tkWebProjectCardModel:"="},controller:n(1301),controllerAs:"tkWebProjectCardCtrl"}}},1301:function(e,t){o.$inject=["$element","$window","DialogService","TkWebProjectEditorService","NotificationService","DataService"];var n="tk-web-project-card__footer--unstuck",i="tk-web-project-card__footer--stuck";function o(e,t,n,i,o,r){var a=this;a.$element=e,a.$window=t,a.tkWebProjectEditorService=i,a.dialogService=n,a.DataService=r,a.NotificationService=o,a.tkffList=a.tkWebProjectCardModel.getTkffList(),a.projectInfo={id:this.tkWebProjectCardModel.getProjectId(),isDynamic:this.tkWebProjectCardModel.isDynamic()},a.DataService.get("/neue/i18n").then((function(e){a.i18n=e})),a.$window.addEventListener("scroll",(function(){a._handleWindowScroll()})),a.$window.addEventListener("resize",(function(){a._adjustFooterWidth()})),a.tkWebProjectCardModel.isExpanded()&&(a.tkWebProjectCardModel.toggleExpanded(),a.tkWebProjectEditorService.populateCompleteTkffData(this.tkWebProjectCardModel.getProjectDetails().kitToken)),a.busyCursor=!1}o.prototype.toggleExpanded=function(){0==this.tkWebProjectCardModel.getIsDataFetched()?(this.toggleBusyCursor(),this.tkWebProjectEditorService.populateCompleteTkffData(this.tkWebProjectCardModel.getProjectDetails().kitToken,this.toggleBusyCursor)):this.tkWebProjectCardModel.toggleExpanded()},o.prototype.toggleBusyCursor=function(){this.busyCursor=!this.busyCursor},o.prototype.openDeleteConfirmationDialog=function(){this.tkWebProjectEditorService.openDeleteConfirmationDialog(this.tkWebProjectCardModel)},o.prototype.handleSaveClicked=function(){var e=this;e.tkWebProjectEditorService.updateKit(e.tkWebProjectCardModel.getTkffList(),e.tkWebProjectCardModel.getDeletedTkffs(),e.tkWebProjectCardModel.getProjectDetails().kitToken).then((function(t){e.tkWebProjectCardModel.setLastModified(t.last_updated),e.NotificationService.success(e.i18n["kit_editor.kits.publish.update.project_eta_message"].replace("%{web_project_name}",e.tkWebProjectCardModel.getProjectName())),e.tkWebProjectCardModel.updateTkffListBackup()})),e.tkWebProjectCardModel.handleSave()},o.prototype.handleCancelClicked=function(){var e;for(this.tkWebProjectCardModel.handleCancel(),this.tkffList=this.tkWebProjectCardModel.getTkffList(),e=0;e<this.tkffList.length;e++){var t=this.tkWebProjectCardModel.getProjectDetails().kitToken+this.tkffList[e].tkff.typekit_font_family.id;this.tkWebProjectEditorService.getTkWebProjectFamilyCardModel(t).setTkffData(this.tkffList[e]),this.tkWebProjectEditorService.getTkWebProjectEditorStyleSelectorModel(t).setEnabledFontVariationIds(this.tkffList[e].enabled_font_variation_ids)}},o.prototype.getFamilyCardModel=function(e){var t=this.tkWebProjectCardModel.getProjectDetails().kitToken+e;return this.tkWebProjectEditorService.getTkWebProjectFamilyCardModel(t)},o.prototype.getFamilyDisplayModel=function(e){var t=this.tkWebProjectCardModel.getProjectDetails().kitToken+e;return this.tkWebProjectEditorService.getTkWebProjectDisplayFamilyModel(t)},o.prototype.getFooterStickyClass=function(){return this._isFooterActive()&&this._isFooterOutOfView()?(this._adjustFooterWidth(),i):n},o.prototype._getFamiliesEl=function(){return this.$element[0].querySelector(".tk-web-project-card__families")},o.prototype._getFooterEl=function(){return this.$element[0].querySelector(".tk-web-project-card__footer")},o.prototype._adjustFooterWidth=function(){this._isFooterActive()&&(this._getFooterEl().style.width=this.$window.getComputedStyle(this._getFamiliesEl()).width)},o.prototype._handleWindowScroll=function(){this._isFooterActive()&&!this._getFooterEl().classList.contains(this.getFooterStickyClass())&&(this._resetStickyClasses(),this._getFooterEl().classList.add(this.getFooterStickyClass()))},o.prototype._isEntireProjectBelowDisplay=function(){return this._getFamiliesEl().getBoundingClientRect().top>this.$window.innerHeight},o.prototype._isProjectBottomBelowDisplay=function(){return this._getFamiliesEl().getBoundingClientRect().bottom+this._getFooterEl().getBoundingClientRect().height>=this.$window.innerHeight},o.prototype._isFooterOutOfView=function(){return!this._isEntireProjectBelowDisplay()&&this._isProjectBottomBelowDisplay()},o.prototype._isFooterActive=function(){return this.tkWebProjectCardModel.isModified()&&this.tkWebProjectCardModel.isExpanded()&&!!this._getFooterEl()},o.prototype._resetStickyClasses=function(){var e=this._getFooterEl();e.classList.remove(i),e.classList.remove(n)},e.exports=o},1302:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_details.html",bindToController:{webProjectDetails:"&"},controller:n(1303),controllerAs:"tkWebProjectDetailsCtrl"}}},1303:function(e,t){function n(){}n.prototype.getDateString=function(){return Date.parse(this.webProjectDetails().dateModified)},e.exports=n},1304:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_display_family.html",scope:{},bindToController:{tkWebProjectDisplayFamilyModel:"="},controller:n(1305),controllerAs:"tkWebProjectDisplayFamilyCtrl"}}},1305:function(e,t){function n(){}n.prototype.getVariationDisplayData=function(){return this.tkWebProjectDisplayFamilyModel.getVariationDisplayData()},n.prototype.getVariationFamilyName=function(){return this.tkWebProjectDisplayFamilyModel.getVariationFamilyName()},n.prototype.getTypographicFamilySlug=function(){return this.tkWebProjectDisplayFamilyModel.getTypographicFamilySlug()},e.exports=n},1306:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_editor_style_selector.html",scope:{},bindToController:{tkWebProjectCardModel:"=",tkWebProjectEditorStyleSelectorModel:"=",tkWebProjectFamilyCardModel:"="},controller:n(1307),controllerAs:"tkWebProjectEditorStyleSelectorCtrl"}}},1307:function(e,t){function n(){}n.prototype.getRatioOfSelectedToAvailableFonts=function(){return this.tkWebProjectEditorStyleSelectorModel.getEnabledFontVariationIds().length+"/"+this.tkWebProjectEditorStyleSelectorModel.getAvailableFontVariations().length},n.prototype.getAvailableFontVariations=function(){return this.tkWebProjectEditorStyleSelectorModel.getAvailableFontVariations()},n.prototype.getCompleteFontVariationStyle=function(e){var t=this.tkWebProjectFamilyCardModel.getFormattedCssFontStack();return this.tkWebProjectEditorStyleSelectorModel.getCompleteFontVariationStyle(e,t)},n.prototype.isVariationSelected=function(e){return this.tkWebProjectEditorStyleSelectorModel.isVariationSelected(e)},n.prototype.handleCheckboxToggled=function(e){this.tkWebProjectEditorStyleSelectorModel.isVariationSelected(e)?this.tkWebProjectFamilyCardModel.updateVariationsDisabled(e.id):this.tkWebProjectFamilyCardModel.updateVariationsEnabled(e.id),this.tkWebProjectEditorStyleSelectorModel.toggleCheckbox(e),this.tkWebProjectCardModel.setIsModified(!0),this.tkWebProjectCardModel.computeTotalVariations()},n.prototype.isVariationRtl=function(e){return e.rtl},n.prototype.getVariationDisplayData=function(e){return this.tkWebProjectEditorStyleSelectorModel.getVariationDisplayData(e)},n.prototype.getExampleText=function(e){return this.tkWebProjectEditorStyleSelectorModel.getExampleText(e)},e.exports=n},1308:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_embed_code_options.html",scope:{},bindToController:{embedCodeModel:"="},controller:n(1309),controllerAs:"tkWebProjectEmbedCodeOptionsCtrl"}}},1309:function(e,t){function n(){this.isDefaultVisible=!0}n.prototype.isDefaultSnippetVisible=function(){return!this.embedCodeModel.getIsDynamic()&&this.isDefaultVisible},n.prototype.isCssImportSnippetVisible=function(){return!this.embedCodeModel.getIsDynamic()&&!this.isDefaultVisible},n.prototype.isAsyncSnippetVisible=function(){return this.embedCodeModel.getIsDynamic()},n.prototype.getDefaultSnippetEmbedCode=function(){return this.embedCodeModel.getProjectEmbedDetails().css_code},n.prototype.getCssImportSnippetEmbedCode=function(){return this.embedCodeModel.getProjectEmbedDetails().css_import_code},n.prototype.getAsyncSnippetEmbedCode=function(){return this.embedCodeModel.getProjectEmbedDetails().async_javascript_code},n.prototype.showDefaultCssCode=function(){this.isDefaultVisible=!0},n.prototype.showCssImportCode=function(){this.isDefaultVisible=!1},e.exports=n},1310:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_family_card.html",bindToController:{tkWebProjectCardModel:"=",tkWebProjectFamilyCardModel:"="},controller:n(1311),controllerAs:"tkWebProjectFamilyCardCtrl"}}},1311:function(e,t){function n(e,t){this.$window=e,this.tkWebProjectEditorService=t,this._initEventListeners()}n.$inject=["$window","TkWebProjectEditorService"],n.prototype.deleteTkff=function(){this.tkWebProjectFamilyCardModel.isAnyFontRetired?this.tkWebProjectEditorService.openRetiredFontsRemovalConfirmationDialog(this.tkWebProjectCardModel,this.tkWebProjectFamilyCardModel):this.tkWebProjectCardModel.deleteTkff(this.tkWebProjectFamilyCardModel.getTkffData())},n.prototype.getStyleSelectorModel=function(){var e=this.tkWebProjectCardModel.getProjectDetails().kitToken+this.tkWebProjectFamilyCardModel.getTkffData().tkff.typekit_font_family.id;return this.tkWebProjectEditorService.getTkWebProjectEditorStyleSelectorModel(e)},n.prototype._initEventListeners=function(){var e=this;e.$window.addEventListener("web-project.checkbox-checked",(function(t){t.detail.isChecked?e.tkWebProjectFamilyCardModel.updateVariationsEnabled(t.detail.variationId):e.tkWebProjectFamilyCardModel.updateVariationsDisabled(t.detail.variationId),e.tkWebProjectCardModel.setIsModified(!0),e.tkWebProjectCardModel.computeTotalVariations()}))},e.exports=n},1312:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_web_project_list.html",bindToController:{tkWebProjectListModel:"=",sortModes:"="},controller:n(1313),controllerAs:"tkWebProjectListCtrl"}}},1313:function(e,t){n.$inject=["TkWebProjectEditorService"];function n(e){this.tkWebProjectEditorService=e,this.searchString="",this.selectedSort=this.tkWebProjectEditorService.getTkWebProjectListModel().getSortOrder()}n.prototype.handlePageNumberChange=function(){this.tkWebProjectEditorService.updateWebProjects(this.searchString,this.getCurrentPage(),!0)},n.prototype.getCurrentPage=function(){return this.tkWebProjectEditorService.getTkWebProjectListModel().currentPage},n.prototype.clearAndGetSearchResults=function(){this.searchString="",this.getSearchResults()},n.prototype.getSearchResults=function(){this.tkWebProjectEditorService.getTkWebProjectListModel().setCurrentPage(1),this.tkWebProjectEditorService.updateWebProjects(this.searchString,1,!0)},n.prototype.isSearchBoxShown=function(){return 0!=this.tkWebProjectEditorService.getTkWebProjectListModel().getWebProjectList().length||this.isEmptyResultsState()},n.prototype.isEmptyResultsState=function(){return 0==this.tkWebProjectEditorService.getTkWebProjectListModel().getWebProjectList().length&&""!=this.searchString},n.prototype.handleSortChange=function(){this.tkWebProjectEditorService.getTkWebProjectListModel().setSortOrder(this.selectedSort),this.tkWebProjectEditorService.updateWebProjects(this.searchString,this.getCurrentPage(),!0)},e.exports=n},1314:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{autocompleteService:"=",inputPlaceholder:"@",resultDivClasses:"@",resultTitle:"@",resultSeeAllLabel:"@"},controller:n(1315),controllerAs:"adobeFontsAutoCompleteCtrl",restrict:"E",transclude:!0,templateUrl:"/angular_templates/directives/adobe_fonts_auto_complete.html",link:function(e,t,n,i){i.element=t[0]}}}},1315:function(e,t,n){a.$inject=["$document","$scope","$timeout"];var i=n(15),o=n(4),r=[40,38,27];function a(e,t,n){this.$document=e,this.$scope=t,this.$timeout=n,this.handleInputKeyup=o.debounce(o.bind(this._handleInputKeyup,this),300),this.isResultListVisible=!1,this.results=[],this._selectedIndex=-1,this._initBodyEvents()}a.prototype.handleElementKeyDown=function(e){this._isNavigationKeyEvent(e)&&this._hasResults()&&this._handleNavigationEvent(e)},a.prototype.handleResultFocus=function(e){this._selectedIndex=e},a.prototype.getSearchResultItemLink=function(e){return this.autocompleteService.getItemHyperlink(e)},a.prototype._getCurrentResultElements=function(){return this.element.querySelectorAll(".adobe-fonts-auto-complete__item a")},a.prototype._getInput=function(){return this.element.getElementsByClassName("adobe-fonts-auto-complete__search-field")[0]},a.prototype._handleNavigationEvent=function(e){if(27==e.keyCode)return this.isResultListVisible=!1,this.results=[],this._selectedIndex=-1,void this._getInput().focus();e.preventDefault(),40==e.keyCode?this._selectedIndex=this._selectedIndex+1<this.results.length?this._selectedIndex+1:0:38==e.keyCode&&(this._selectedIndex=this._selectedIndex>0?this._selectedIndex-1:this.results.length-1),this._getCurrentResultElements()[this._selectedIndex].focus()},a.prototype._handleInputKeyup=function(e){var t=this;t._isNavigationKeyEvent(e)||(t._selectedIndex=-1,t.autocompleteService.get(t.searchTerm).then((function(e){t.$timeout((function(){t.results=e.data,t.isResultListVisible=t.results.length>0}))})))},a.prototype._hasResults=function(){return this.results.length>0},a.prototype._initBodyEvents=function(){var e=this;i.element(e.$document[0].body).on("click focus keyup",(function(t){e._isChildOfDirective(t.target)||e.$scope.$apply((function(){e.isResultListVisible=!1}))}))},a.prototype._isChildOfDirective=function(e){return e==this.element||e.parentNode==this.element||e.parentNode&&this._isChildOfDirective(e.parentNode)},a.prototype._isNavigationKeyEvent=function(e){return o.contains(r,e.keyCode)},e.exports=a},1316:function(e,t,n){e.exports=function(){return{bindToController:{alwaysHasCarousel:"@",hidePreviousAndNextButtons:"=?",isFamilyImageCarousel:"@",isRecommendedFontCarousel:"@",layout:"@",links:"@",itemSize:"@"},controller:n(1317),controllerAs:"carouselCtrl",scope:{},restrict:"E",transclude:!0,templateUrl:"/angular_templates/directives/adobe_fonts_carousel.html"}}},1317:function(e,t,n){a.$inject=["$element","$scope","$timeout","$window"];var i=n(1318).lory,o=n(4),r="adobe-fonts-carousel--active";function a(e,t,n,i){var o=this;o.$element=e,o.$timeout=n,o.$window=i,o.previousSlide=0,o.currentDot=0,o.hidePreviousAndNextButtons=o.hidePreviousAndNextButtons||!1,o.hidePreviousAndNextButtonsInitialSetting=o.hidePreviousAndNextButtons,o._loadAttempts=0,o.areSlidesLoaded=!1,o._currentNumSlidesInViewport=0,i.requestAnimationFrame((function(){o._loadCarousel()})),this.isFamilyImageCarousel&&t.$watch((function(){return o.layout}),(function(){n((function(){o.isCarouselRequired()&&o._activateCarousel()}),1)})),t.$watch((function(){return o._getSlidesHtml()}),(function(e,t){e!==t&&(o.isRecommendedFontCarousel?o._activateCarouselWithSamePosition():(o._activateCarousel(),o.selectDot(0)))})),i.addEventListener("resize",(function(){o.alwaysHasCarousel||(o.isCarouselRequired()?o._activateCarousel():o.carousel&&o._destroyCarousel()),o.isRecommendedFontCarousel&&o._currentNumSlidesInViewport!==o._numSlidesInViewport()&&o._activateCarouselWithSamePosition(),t.$apply((function(){o.isCarouselRequired()})),o._currentNumSlidesInViewport=o._numSlidesInViewport()}))}a.prototype.dotNumbers=function(){return o.range(0,this._numSlides())},a.prototype.getLinkHref=function(){return!this.links||!this.currentDot&&0!==this.currentDot?"":(JSON.parse(this.links)[this.currentDot]||{}).href||""},a.prototype.getLinkName=function(){return!this.links||!this.currentDot&&0!==this.currentDot?"":(JSON.parse(this.links)[this.currentDot]||{}).name||""},a.prototype.shouldShowDotControl=function(){return this.isFamilyImageCarousel?this.itemSize>1&&1===this._numSlidesInViewport()||this.itemSize>3||"grid"===this.layout:!this.isRecommendedFontCarousel&&this.isCarouselRequired()},a.prototype.isCarouselRequired=function(){var e=this._getFrameEl();if(this.isFamilyImageCarousel){if("grid"===this.layout)return this._isContentLoaded()&&(this.areSlidesLoaded=!0),this.areSlidesLoaded;return e.clientWidth<e.scrollWidth-40}return e.clientWidth<e.scrollWidth},a.prototype.isDotActive=function(e){return this.currentDot===e},a.prototype.selectDot=function(e){this.carousel.slideTo(e),this.currentDot=e},a.prototype.shouldShowDot=function(e){return e<this._numDotsVisible()},a.prototype._updatePreviousAndNextButtonsVisibility=function(){this.hidePreviousAndNextButtonsInitialSetting||(this.hidePreviousAndNextButtons=this._numSlidesInViewport()>=this._numSlides())},a.prototype._activateCarousel=function(){var e=this.$element[0].querySelector(".adobe-fonts-carousel");this.isRecommendedFontCarousel?this.carousel=i(e,{slidesToScroll:this._numSlidesInViewport(),rewindOnResize:this.isRecommendedFontCarousel,forceIndexUpdate:!0}):this.carousel=i(e,{rewind:!this.isFamilyImageCarousel,rewindOnResize:!this.alwaysHasCarousel}),this.$element.addClass(r),this.$element[0].addEventListener("before.lory.slide",this._handleSlideEvent.bind(this)),this.isFamilyImageCarousel&&this.selectDot(0),(this.isFamilyImageCarousel||this.isRecommendedFontCarousel)&&this.$element[0].addEventListener("after.lory.slide",this._handleAfterSlideEvent.bind(this)),this._updatePreviousAndNextButtonsVisibility(),this._currentNumSlidesInViewport=this._numSlidesInViewport()},a.prototype._activateCarouselWithSamePosition=function(){var e=0;this.carousel&&(e=this.carousel.returnIndex()),this._activateCarousel(),this.selectDot(e)},a.prototype._destroyCarousel=function(){this.carousel.destroy(),this.carousel=null,this.$element.removeClass(r)},a.prototype._getFrameEl=function(){return this.$element[0].querySelector(".adobe-fonts-carousel__frame")},a.prototype._getSlidesHtml=function(){return[].slice.call(this.$element[0].getElementsByTagName("li")).map((function(e){return e.innerHTML})).join("")},a.prototype._handleSlideEvent=function(e){var t=e.detail.nextSlide;if(this.isFamilyImageCarousel){if(t===this.previousSlide||t===this._numDotsVisible())return;this.previousSlide=t}this.currentDot=this.currentDot===t||t<0?0:t},a.prototype._handleAfterSlideEvent=function(e){var t=e.detail.currentSlide+1,n=this.$element[0].getElementsByClassName("adobe-fonts-carousel__next-button")[0],i=this.$element[0].getElementsByClassName("adobe-fonts-carousel__previous-button")[0];this.isRecommendedFontCarousel?t>=this._numDotsVisible()?(n.classList.add("disabled"),i.classList.remove("disabled")):t<=1?(i.classList.add("disabled"),n.classList.remove("disabled")):(n.classList.remove("disabled"),i.classList.remove("disabled")):"grid"!==this.layout&&t===this._numDotsVisible()&&n.classList.add("disabled")},a.prototype._isContentLoaded=function(){var e=this._getFrameEl();return e.scrollWidth>0&&e.scrollWidth!==e.clientWidth},a.prototype._loadCarousel=function(){var e=this;return!e._isContentLoaded()&&e._loadAttempts<10?(e._loadAttempts++,e.$timeout((function(){e._loadCarousel()}),400)):e.isCarouselRequired()?e._activateCarousel():void e._updatePreviousAndNextButtonsVisibility()},a.prototype._numDotsVisible=function(){return this._numSlides()-this._numSlidesInViewport()+1},a.prototype._numSlides=function(){return this.isRecommendedFontCarousel?this.$element[0].getElementsByClassName("adobe-fonts-carousel-item").length:this.$element[0].getElementsByTagName("li").length},a.prototype._numSlidesInViewport=function(){if(this.$element[0].querySelector(".adobe-fonts-carousel")&&this.$element[0].getElementsByTagName("li")&&this.$element[0].getElementsByTagName("li")[0]){var e=this.$element[0].querySelector(".adobe-fonts-carousel").clientWidth,t=this.$element[0].getElementsByTagName("li")[0].clientWidth;return this.isRecommendedFontCarousel&&(t=this.$element[0].getElementsByClassName("adobe-fonts-carousel-item")[0].clientWidth),this.isFamilyImageCarousel||this.isRecommendedFontCarousel?Math.round(e/t):Math.floor(e/t)}},e.exports=a},1318:function(e,t,n){var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.lory=function(e,t){var n=void 0,s=void 0,u=void 0,d=void 0,f=void 0,p=void 0,h=void 0,g=void 0,m=void 0,v=void 0,y=0,S={};function _(e,t){var n=S.classNameActiveSlide;e.forEach((function(e,t){e.classList.contains(n)&&e.classList.remove(n)})),e[t].classList.add(n)}function b(t,n,i){(0,r.default)(e,t+".lory."+n,i)}function w(e,t,n){var i=p&&p.style;i&&(i[m.transition+"TimingFunction"]=n,i[m.transition+"Duration"]=t+"ms",m.hasTranslate3d?i[m.transform]="translate3d("+e+"px, 0, 0)":i[m.transform]="translate("+e+"px, 0)")}function $(e,t){var i=S,o=i.slideSpeed,r=i.slidesToScroll,a=i.infinite,l=i.rewind,f=i.rewindSpeed,p=i.ease,h=i.classNameActiveSlide,g=i.forceIndexUpdate,m=o,$=t?y+1:y-1,x=Math.round(s-u);b("before","slide",{index:y,nextSlide:$}),"number"!==typeof e&&(e=t?y+r:y-r),e=Math.min(Math.max(e,0),d.length-1),a&&void 0===t&&(e+=a);var C=Math.min(Math.max(-1*d[e].offsetLeft,-1*x),0);l&&Math.abs(n.x)===x&&t&&(C=0,e=0,m=f),w(C,m,p),n.x=C,(g||d[e].offsetLeft<=x)&&(y=e),!a||e!==d.length-a&&0!==e||(t&&(y=a),t||(y=d.length-2*a),n.x=-1*d[y].offsetLeft,v=function(){w(-1*d[y].offsetLeft,0,void 0)}),h&&_(c.call(d),y),b("after","slide",{currentSlide:y})}function x(){b("before","init"),m=(0,o.default)();var r,s,u,v,w=S=i({},a.default,t),$=w.classNameFrame,x=w.classNameSlideContainer,M=w.classNamePrevCtrl,E=w.classNameNextCtrl,P=w.enableMouseEvents,A=w.classNameActiveSlide;f=e.getElementsByClassName($)[0],p=f.getElementsByClassName(x)[0],h=e.getElementsByClassName(M)[0],g=e.getElementsByClassName(E)[0],n={x:p.offsetLeft,y:p.offsetTop},S.infinite?(r=c.call(p.children),s=S.infinite,u=r.slice(0,s),v=r.slice(r.length-s,r.length),u.forEach((function(e){var t=e.cloneNode(!0);p.appendChild(t)})),v.reverse().forEach((function(e){var t=e.cloneNode(!0);p.insertBefore(t,p.firstChild)})),p.addEventListener(m.transitionEnd,T),d=c.call(p.children)):d=c.call(p.children),C(),A&&_(d,y),h&&g&&(h.addEventListener("click",F),g.addEventListener("click",k)),f.addEventListener("touchstart",D,!!l&&{passive:!0}),P&&(f.addEventListener("mousedown",D),f.addEventListener("click",L)),S.window.addEventListener("resize",I),b("after","init")}function C(){var e=S,t=e.infinite,i=e.ease,o=e.rewindSpeed,r=e.rewindOnResize,a=e.classNameActiveSlide;s=p.getBoundingClientRect().width||p.offsetWidth,(u=f.getBoundingClientRect().width||f.offsetWidth)===s&&(s=d.reduce((function(e,t){return e+t.getBoundingClientRect().width||t.offsetWidth}),0)),r?y=0:(i=null,o=0),t?(w(-1*d[y+t].offsetLeft,0,null),y+=t,n.x=-1*d[y].offsetLeft):(w(-1*d[y].offsetLeft,o,i),n.x=-1*d[y].offsetLeft),a&&_(c.call(d),y)}function F(){$(!1,!1)}function k(){$(!1,!0)}"undefined"!==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var M=void 0,E=void 0,P=void 0;function T(){v&&(v(),v=void 0)}function D(e){var t=S.enableMouseEvents,n=e.touches?e.touches[0]:e;t&&(f.addEventListener("mousemove",A),f.addEventListener("mouseup",j),f.addEventListener("mouseleave",j)),f.addEventListener("touchmove",A),f.addEventListener("touchend",j,!!l&&{passive:!0});var i=n.pageX,o=n.pageY;M={x:i,y:o,time:Date.now()},P=void 0,E={},b("on","touchstart",{event:e})}function A(e){var t=e.touches?e.touches[0]:e,i=t.pageX,o=t.pageY;E={x:i-M.x,y:o-M.y},"undefined"===typeof P&&(P=!!(P||Math.abs(E.x)<Math.abs(E.y))),!P&&M&&(e.preventDefault(),w(n.x+E.x,0,null)),b("on","touchmove",{event:e})}function j(e){var t=M?Date.now()-M.time:void 0,i=Number(t)<300&&Math.abs(E.x)>25||Math.abs(E.x)>u/3,o=!y&&E.x>0||y===d.length-1&&E.x<0,r=E.x<0;P||(i&&!o?$(!1,r):w(n.x,S.snapBackSpeed)),M=void 0,f.removeEventListener("touchmove",A),f.removeEventListener("touchend",j),f.removeEventListener("mousemove",A),f.removeEventListener("mouseup",j),f.removeEventListener("mouseleave",j),b("on","touchend",{event:e})}function L(e){E.x&&e.preventDefault()}function I(e){C(),b("on","resize",{event:e})}return x(),{setup:x,reset:C,slideTo:function(e){$(e)},returnIndex:function(){return y-S.infinite||0},prev:F,next:k,destroy:function(){b("before","destroy"),f.removeEventListener(m.transitionEnd,T),f.removeEventListener("touchstart",D),f.removeEventListener("touchmove",A),f.removeEventListener("touchend",j),f.removeEventListener("mousemove",A),f.removeEventListener("mousedown",D),f.removeEventListener("mouseup",j),f.removeEventListener("mouseleave",j),f.removeEventListener("click",L),S.window.removeEventListener("resize",I),h&&h.removeEventListener("click",F),g&&g.removeEventListener("click",k),S.infinite&&Array.apply(null,Array(S.infinite)).forEach((function(){p.removeChild(p.firstChild),p.removeChild(p.lastChild)})),b("after","destroy")}}};var o=s(n(2)),r=s(n(3)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var c=Array.prototype.slice,l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassive",null,u),window.removeEventListener("testPassive",null,u)}catch(d){}},function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t,n,i,o=void 0,r=void 0,a=void 0,s=void 0;return t=document.createElement("_"),n=t.style,i=void 0,""===n[i="webkitTransition"]&&(a="webkitTransitionEnd",r=i),""===n[i="transition"]&&(a="transitionend",r=i),""===n[i="webkitTransform"]&&(o=i),""===n[i="msTransform"]&&(o=i),""===n[i="transform"]&&(o=i),document.body.insertBefore(t,null),n[o]="translate3d(0, 0, 0)",s=!!e.getComputedStyle(t).getPropertyValue(o),document.body.removeChild(t),{transform:o,transition:r,transitionEnd:a,hasTranslate3d:s}}}).call(t,function(){return this}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=new r.default(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(i)};var i,o=n(4),r=(i=o)&&i.__esModule?i:{default:i}},function(e,t){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}()?n:"undefined"!==typeof document&&"function"===typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next",classNameActiveSlide:"active",enableMouseEvents:!1,window:window,rewindOnResize:!0,forceIndexUpdate:!1}}])},e.exports=i()},1319:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{filtersModel:"&",onFiltersChange:"&"},controller:n(1320),controllerAs:"filtersSidebarCtrl",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/spectrum/adobe_fonts_filters_sidebar.html"}}},1320:function(e,t,n){o.$inject=["DataService","NewrelicService"];var i=n(4);function o(e,t){var n=this;e.get("/font_filters_sidebar/i18n").then((function(e){n.i18n=e})),n.NewrelicService=t,n._filterSectionOpenStates={library:!0,classification:!0,"recommended-for":!0,properties:!0,tags:!0,languages:n.isSelectedLanguagesOpen()},n._displayTagsCount=n.getTags()?n.getTags().length:0,n._displayShowMore=!1,this.selectedLanguage=this.getSelectedLanguage()||"all",this.prioritizedLanguage=this.getPrioritizedLanguage()}o.prototype.clearFilters=function(){this.filtersModel().selectLanguageMode("all"),this.filtersModel().clearAll(),this.selectedLanguage="all",this.filtersModel().setShowPaidFonts(!1,!0),this.onFiltersChange()},o.prototype.getPrioritizedLanguage=function(){var e,t=this.filtersModel().getLocale();if(!t)return null;switch(t){case"zh_CN":e="zh-Hans";break;case"zh_TW":e="zh-Hant";break;default:e=t.split(/[-_]+/)[0]}return i.find(this.getLanguages(),(function(t){return t.value===e}))},o.prototype.getCurrentFilters=function(){return this.filtersModel()&&this.filtersModel().getFiltersForCurrentBrowseMode()},o.prototype.getDisplayMoreCount=function(){return this.getTags().length-this.getDisplayTagsCount()},o.prototype.getDisplayTagsCount=function(){return this._displayTagsCount},o.prototype.getFontDisplayData=function(e){return this.filtersModel()&&this.filtersModel().getFontDisplayData(e)},o.prototype.getIconUrlForFilter=function(e){return"#filter-icon-sprite-"+e.slug},o.prototype.getLanguages=function(){return this.filtersModel()&&this.filtersModel().getLanguages()},o.prototype.getSelectedLanguage=function(){if(this.filtersModel())return this.filtersModel().getSelectedLanguages().length>0?this.filtersModel().getSelectedLanguages()[0]:void 0},o.prototype.getStylesSliderLabel=function(e){return e.start===e.end?this.i18n["shared.adobe_fonts_filters_sidebar.number_of_styles_all"]:e.end>25?e.start+"\u201325+":e.start+"\u2013"+e.end},o.prototype.getTags=function(){return this.filtersModel()&&this.filtersModel().getTags()},o.prototype.handleAllClickForSection=function(e){this.filtersModel().clearSelectedFiltersForSection(e),this.onFiltersChange()},o.prototype.handleFilterClick=function(e){this.filtersModel().toggleFilter(e),this.onFiltersChange(),this.NewrelicService.addPageAction("typekit.browse.click",{filterName:e})},o.prototype.handleFilterRadioClick=function(e){this.filtersModel().selectFilter(e),this.onFiltersChange()},o.prototype.handleLanguageClick=function(e){this.filtersModel().toggleLanguage(e),this.onFiltersChange()},o.prototype.handleSectionToggleClick=function(e){this._filterSectionOpenStates[e]=!this._filterSectionOpenStates[e]},o.prototype.handleSelectedLanguageChange=function(){this.filtersModel().setSelectedLanguage(this.selectedLanguage),this.onFiltersChange(),this.onFiltersChange()},o.prototype.handleSelectedLanguageModeChange=function(){this.filtersModel().setSelectedLanguageMode(this.selectedLanguage),this.onFiltersChange()},o.prototype.handleShowPaidFontsChange=function(){this.filtersModel().setShowPaidFonts(!this.filtersModel().getShowPaidFonts(),!0),this.onFiltersChange()},o.prototype.handleStylesSliderChange=function(e){this.filtersModel().setMinStyles(e.start),this.filtersModel().setMaxStyles(e.end),this.onFiltersChange()},o.prototype.getMinStyles=function(){return this.filtersModel()&&this.filtersModel().getMinStyles()},o.prototype.getMaxStyles=function(){return this.filtersModel()&&this.filtersModel().getMaxStyles()},o.prototype.handleTagClick=function(e){this.filtersModel().toggleTag(e),this.onFiltersChange(),this.NewrelicService.addPageAction("typekit.browse.click",{tagName:e})},o.prototype.isAllSelectedForSection=function(e){return!this.filtersModel().isAnyFilterSelectedForSection(e)},o.prototype.isClearFiltersEnabled=function(){return this.filtersModel()&&this.filtersModel().isAnythingSelected()},o.prototype.isFilterSelected=function(e){return this.filtersModel().isFilterSelected(e)},o.prototype.isSectionOpen=function(e){return!!this._filterSectionOpenStates[e]},o.prototype.isSelectedLanguagesOpen=function(){return this.filtersModel()&&this.filtersModel().getSelectedLanguages().length>0},o.prototype.isShowPaidFontsSelected=function(){return this.filtersModel()&&this.filtersModel().getShowPaidFonts()},o.prototype.isLanguageSelected=function(e){return this.filtersModel().isLanguageSelected(e)},o.prototype.isLanguagesSectionVisible=function(){return this.filtersModel()&&"default"==this.filtersModel().getBrowseMode()},o.prototype.isLibrarySectionVisible=function(){return this.filtersModel()&&this.filtersModel().getShowLibraryOption()},o.prototype.isGrouped=function(e){return"group"==e.type},o.prototype.isTagSelected=function(e){return this.filtersModel().isTagSelected(e)},o.prototype.isTagsSectionVisible=function(){return this.filtersModel()&&this.filtersModel().isTagsModuleVisible()},o.prototype.shouldDisplayShowLess=function(){return!this._displayShowMore},o.prototype.shouldDisplayShowMore=function(){return this._displayShowMore&&this.getDisplayMoreCount()>0},o.prototype.shouldDisplayStylesSlider=function(e){return"properties"===e.name},o.prototype.shouldShowDisplayFont=function(e){return Boolean(e.font)&&this.filtersModel()&&"ru_RU"!==this.filtersModel().getLocale()},o.prototype.toggleShowMore=function(){6===this._displayTagsCount?(this._displayTagsCount=this.getTags().length,this._displayShowMore=!1):(this._displayTagsCount=6,this._displayShowMore=!0)},e.exports=o},1321:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{exampleText:"=",textSampleData:"&",fonts:"="},controller:n(1322),controllerAs:"fontVariationListCtrl",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/adobe_fonts_font_variation_list.html"}}},1322:function(e,t){function n(e,t,n){var i=this;i.viewType="list",i.FontLoaderService=n,i.currentPage=1,i.fontsPerPage=12,i.$scope=e,i.$timeout=t,e.$watch((function(){return i.fonts}),(function(e,t){e!==t&&(i.totalPages=Math.ceil(i.fonts.length/i.fontsPerPage),i.handlePageNumberChange())}))}n.$inject=["$scope","$timeout","FontLoaderService"],n.prototype.fontVariationCardsClass=function(){return"grid"===this.viewType?"font-variations-grid-view":"font-variation-list"},n.prototype.updateFonts=function(){this.FontLoaderService.updateFonts(this.exampleText.value)},n.prototype.familyLink=function(e){return"/fonts/"+e.family.slug},n.prototype.handlePageNumberChange=function(){var e=this,t=e.currentPage*e.fontsPerPage-e.fontsPerPage,n=e.currentPage*e.fontsPerPage;e.visibleFonts=e.fonts.slice(t,n),e.$timeout((function(){e.$scope.$apply()}),1)},e.exports=n},1323:function(e,t,n){e.exports=function(){return{restrict:"E",scope:{},bindToController:{locales:"&"},link:function(e,t,n,i){var o=i[0],r=i[1];o.ngModel=r},controller:n(1324),controllerAs:"adobeFontsLocaleSwitcherCtrl",require:["adobeFontsLocaleSwitcher","?ngModel"],templateUrl:"/angular_templates/directives/adobe_fonts_locale_switcher.html"}}},1324:function(e,t){function n(e,t){this.$scope=e,this.$window=t,this.isOpen=!1}n.$inject=["$scope","$window"],n.prototype.getLabel=function(){for(var e=this.locales(),t=0;t<e.length;t++)if(e[t].value===this.getValue())return e[t].label},n.prototype.getValue=function(){if(this.ngModel)return this.ngModel.$viewValue},n.prototype.handleToggle=function(e){e.stopPropagation();var t=this;this.isOpen||this.$window.addEventListener("click",(function(){t.$scope.$apply((function(){t.isOpen=!1}))}),{once:!0}),this.isOpen=!this.isOpen},n.prototype.isSelected=function(e){return e.value===this.getValue()},n.prototype.updateValue=function(e){this.ngModel&&this.ngModel.$setViewValue(e.value)},e.exports=n},1325:function(e,t,n){i.$inject=["$document"];function i(e){return{scope:{},bindToController:{sampleTextData:"=",warnNonDefaultCharacterSets:"=?"},controller:n(1326),controllerAs:"pangramMenu",require:["adobeFontsPangramMenu","ngModel"],link:function(n,i,o,r){var a=r[0];a.ngModel=r[1],a.userEnteredTextArea=i[0].querySelector(".adobe-fonts-pangram-menu__text"),a.ngModel.$render=function(){a.userEnteredText=a.ngModel.$viewValue},function(n,i,o){e.on("click",(function(e){t(i[0],e.target)||n.$apply((function(){o._closeMenu()}))})),e.on("keyup",(function(e){27==e.keyCode&&n.$apply((function(){o._closeMenu()}))}))}(n,i,a)},replace:!0,restrict:"E",templateUrl:"/angular_templates/directives/adobe_fonts_pangram_menu.html",transclude:!0};function t(e,n){return n==e||!!n.parentNode&&t(e,n.parentNode)}}e.exports=i},1326:function(e,t,n){o.$inject=["$window","DataService","NewrelicService","NotificationService"];var i=n(194);function o(e,t,n,o){var r=this;r.$window=e,r.DataService=t,r.NewrelicService=n,r.NotificationService=o,r.isOpen=!1,r.i18n={};var a=i.parseUnicodeRange(r.sampleTextData.textSamples.en.unicode_range).toRegExp();r.allowedCharset=new RegExp(a+"+"),r.DataService.get("/neue/i18n").then((function(e){r.i18n=e}))}o.prototype.handleEnterYourOwnClick=function(){this.userEnteredTextArea.focus(),this.userEnteredTextArea.select(),this._closeMenu()},o.prototype.handleInputBlur=function(){this.$window.dispatchEvent(new Event("sample-text.blur"))},o.prototype.handleInputFocus=function(){this.$window.dispatchEvent(new Event("sample-text.focus"))},o.prototype.handleItemClick=function(e){this.ngModel.$setViewValue(e),this.userEnteredText=e,this._closeMenu(),this.NewrelicService.addPageActionWithDelay("typekit.ui.sampleChanged",{text:e},3e3)},o.prototype.handleSampleChanged=function(){this.warnNonDefaultCharacterSets&&this.userEnteredText.replace(this.allowedCharset,"")&&this.NotificationService.error(this.i18n["frontend.browse_sample_text.characters_not_allowed"],{timeout:1e4}),this.ngModel.$setViewValue(this.userEnteredText),this.NewrelicService.addPageActionWithDelay("typekit.ui.sampleChanged",{text:this.ngModel.$viewValue},3e3)},o.prototype.handleMenuButton=function(){this.isOpen=!this.isOpen},o.prototype.isItemSelected=function(e){return e==this.ngModel.$viewValue},o.prototype._closeMenu=function(){this.isOpen=!1},e.exports=o},1327:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{newrelicActionSource:"@",displayView:"@"},controller:n(1328),controllerAs:"fontpackCardListController",restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular_templates/directives/adobe_fonts_fontpack_card_list.html"}}},1328:function(e,t){n.$inject=["$q","$element","$http","DataService","FontpackService","ScrollService","UrlService"];function n(e,t,n,i,o,r,a){var s=this;s.$q=e,s.$element=t,s.$http=n,s.DataService=i,s.FontpackService=o,s.ScrollService=r,s.UrlService=a,s._preloadData()}n.prototype.fontpackItemClass=function(e){return"collection-item"+("draft"===e.status?" collection-item-draft":"")},n.prototype._preloadData=function(){var e=this;return e.$q.all([e.DataService.get("/neue/fontpack_items").then((function(t){e.fontpacks=t.fontpacks,e.FontpackService.addFontpacks(e.fontpacks),e.currentPage=t.currentPage,e.totalPages=t.totalPages}))])},n.prototype.handlePageNumberChange=function(){var e=this;e.$http.get("/collections.json",{params:{page:e.currentPage}}).then((function(t){e.fontpacks=t.data.fontpacks,e.FontpackService.clearFontpacks(),e.FontpackService.addFontpacks(e.fontpacks)})),e.UrlService.updateSearchParams({page:e.currentPage}),e.ScrollService.scrollUpTo(e.$element[0],500)},n.prototype.isEmpty=function(){return!this.fontpacks||this.fontpacks.length<1},e.exports=n},1329:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{newrelicActionSource:"=",fontpackItem:"="},controller:n(1330),controllerAs:"fontpackCardCtrl",restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular_templates/directives/adobe_fonts_fontpack_card.html"}}},1330:function(e,t){function n(e,t){var n=this;n.$q=e,n.DataService=t,n._preloadData()}n.$inject=["$q","DataService"],n.prototype.fontpackCardImageStyle=function(e){return{"background-image":'url("'+(e.thumbnail_url||"/thumbnails/original/missing.png")+'")'}},n.prototype._preloadData=function(){var e=this;return e.$q.all([e.DataService.get("/neue/fontpack_items").then((function(t){e.fontpacks=t.fontpacks})),e.DataService.get("/fontpack_items/i18n").then((function(t){e.i18n=t}))])},e.exports=n},1331:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{imageItems:"=",displayView:"@"},controller:n(1332),controllerAs:"fontImageCardListController",restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular_templates/directives/adobe_fonts_family_image_card_list.html"}}},1332:function(e,t){function n(){}n.prototype._familyImageClass=function(){return 1===this.imageItems.length?"adobe-fonts-family-image-card-box-single-image":2===this.imageItems.length?"adobe-fonts-family-image-card-box-double-image":"adobe-fonts-family-image-card-box-multiple-image"},n.prototype.familyImageContainerClass=function(){return 1===this.imageItems.length?"adobe-font-family-image-card-list-layout":""},n.prototype.cardListMargin=function(){return"family-carousel"===this.displayView?"adobe-fonts-family-image-card-family-list-margin":"adobe-fonts-family-image-card-list-margin"},n.prototype.layoutClass=function(){return"family-carousel"===this.displayView?this._familyImageClass():"adobe-fonts-family-image-card-view"},e.exports=n},1333:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{imageItem:"=",displayView:"@",itemSize:"@"},controller:n(1334),controllerAs:"fontImageCardCtrl",restrict:"E",replace:!0,transclude:!0,templateUrl:"/angular_templates/directives/adobe_fonts_family_image_card.html"}}},1334:function(e,t){function n(){}n.prototype.familyImageClass=function(){return"family-carousel"===this.displayView&&this.itemSize<=2?"adobe-fonts-family-image-card--image-family-view":"adobe-fonts-family-image-card--image"},n.prototype.familyImageContainerClass=function(){if("family-carousel"===this.displayView)return this.itemSize>2?"adobe-fonts-family-image-card--container-list":"adobe-fonts-family-image-card--container-list-fewer-images"},e.exports=n},1335:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/font_display_options.html",scope:{},bindToController:{tkWebProjectCardModel:"=",tkWebProjectFamilyCardModel:"="},controller:n(1336),controllerAs:"fontDisplayOptionsCtrl"}}},1336:function(e,t){function n(){this.tkffData=this.tkWebProjectFamilyCardModel.getTkffData(),this.fontDisplayOptions=["auto","block","swap","fallback","optional"],-1===this.fontDisplayOptions.indexOf(this.tkffData.font_display)&&(this.tkffData.font_display="auto"),this.selectedFontDisplay=this.tkffData.font_display}n.prototype.handleFontDisplayClick=function(e){this.tkWebProjectCardModel.setIsModified(!0),this.selectedFontDisplay=e,this.tkffData.font_display=e},n.prototype.isButtonChecked=function(e){return this.selectedFontDisplay===e},e.exports=n},1337:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{families:"=",i18n:"&",textSampleData:"&",isActiveFontsView:"&",loadMoreFamilies:"&"},controller:n(1338),controllerAs:"fontFamilyAccordionCtrl",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/font_family_accordion.html"}}},1338:function(e,t,n){o.$inject=["$scope","AuthenticationService","I18nService","FontCountService","NewrelicService","NotificationService","SyncService"];var i=n(4);function o(e,t,n,i,o,r,a){var s=this;s.$scope=e,s.AuthenticationService=t,s.I18nService=n,s.FontCountService=i,s.NewrelicService=o,s.NotificationService=r,s.SyncService=a,s._init(),s.$scope.$watch((function(){return s.families}),(function(){s._init()}))}o.prototype.loadMoreFamilies=function(){this.loadMoreFamilies()},o.prototype.handleFontVariationSyncButtonClick=function(e){var t=this;this.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_font",{font_variation_id:e.id}).then((function(){t.isActiveFontsView()?t._removeSyncedVariation(e):t._addSyncedVariation(e)}))},o.prototype.handleFamilySyncButtonClick=function(e){var t=this;this.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_family",{slug:e.slug}).then((function(){t.isActiveFontsView()?t._removeSyncedFamily(e):t._addSyncedFamily(e)}))},o.prototype.familyLink=function(e){return"/fonts/"+e.slug},o.prototype.isSelectedVariation=function(e){return this.selectedFont&&this.selectedFont.id===e.id},o.prototype.isSelectedFamily=function(e){return this.selectedFamily&&this.selectedFamily.slug===e.slug},o.prototype.isCollapsed=function(e){return!!e.isCollapsed},o.prototype.toggleAccordion=function(e){e.isCollapsed=!e.isCollapsed},o.prototype.handleFamilyRowClick=function(e){this.selectedFont=e.fonts[0],this.selectedFamily=e},o.prototype.handleFontVariationRowClick=function(e,t){this.selectedFont=e,this.selectedFamily=t},o.prototype.handleNextButtonClick=function(){var e=this._selectedFontFamilyIndex(),t=this._selectedFontIndex(),n=this._selectedFontFamily();this._memoizeIndices(t,e),++t<n.fonts.length?(this.selectedFont=n.fonts[t],this._memoizeIndices(t,e)):++e<this.families.length&&(this.selectedFamily=this.families[e],this.selectedFont=this.selectedFamily.fonts[0],this._memoizeIndices(0,e))},o.prototype.handlePreviousButtonClick=function(){var e=this._selectedFontFamilyIndex(),t=this._selectedFontIndex();if(this._memoizeIndices(t,e),--t>=0)this.selectedFont=this._selectedFontFamily().fonts[t],this._memoizeIndices(t,e);else if(--e>=0){this.selectedFamily=this.families[e];var n=this.selectedFamily.fonts.length-1;this.selectedFont=this.selectedFamily.fonts[n],this._memoizeIndices(n,e)}},o.prototype.isExpired=function(e){var t=e.font;if(t&&t.sync)return!!t.sync.install_state&&i.contains(t.sync.install_state.split(","),"cc")},o.prototype.reactivate=function(e){var t=this;this.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_font",{font_variation_id:e.id}).then((function(){t._reactivateVariation(e)}))},o.prototype.getActionName=function(){return this.isActiveFontsView()?this.I18nService.getMessage(this.i18n(),"my_fonts.accordion_heading.deactivate"):this.I18nService.getMessage(this.i18n(),"my_fonts.accordion_heading.activate")},o.prototype.isMouseOverReinstallIcon=function(e){return e.isMouseOverReinstallIcon},o.prototype.handleReinstallIconMouseOver=function(e){e.isMouseOverReinstallIcon=!0},o.prototype.handleReinstallIconMouseLeave=function(e){e.isMouseOverReinstallIcon=!1},o.prototype.hasVariableFonts=function(e){return i.any(e.fonts,(function(e){return e.is_variable_font}))},o.prototype._reactivateVariation=function(e){var t,n=this;n.NewrelicService.addPageAction("typekit.my-fonts-page.click.reinstall-button"),n.SyncService.addSyncedVariations([e.id]).then((function(o){if("data"in o&&o.data.added_font_ids.indexOf(e.id)>-1){var r=i.findWhere(n.families,{slug:e.family.slug});i.findWhere(r.fonts,{id:e.id}).font.sync.install_state="os"}else t=!0}),(function(){t=!0})),t&&n.NotificationService.error(n.I18nService.getMessage(n.i18n(),"neue.browse.family_card.error_occurred_activating_fonts"))},o.prototype._removeSyncedFamily=function(e){var t=this,n=e.fonts;t.NewrelicService.addPageAction("typekit.click.unsync-all-button",{family:e.name}),t.SyncService.removeSyncedVariations(i.pluck(n,"id")).then((function(o){var r,a=[];n.forEach((function(e){"data"in o&&o.data.removed_font_ids.indexOf(e.id)>-1?a.push(e.id):r=!0})),t.FontCountService.updateActivatedFontsCount(-a.length),r?(t.NotificationService.error(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.error_occurred_deactivating_some_fonts")),e.fonts=i.filter(n,(function(e){return!i.contains(a,e.id)}))):(a.length>1?t.NotificationService.success(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.fonts_deactivated_action.other",{count:a.length})):t.NotificationService.success(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.fonts_deactivated_action.one")),t._removeFamily(e),t.FontCountService.updateFamiliesCount(-1)),t.isSelectedFamily(e)&&t._removeSelections()}),(function(){t.NotificationService.error(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.error_occurred_deactivating_fonts"))}))},o.prototype._addSyncedFamily=function(e){var t=this,n=e.fonts;t.NewrelicService.addPageAction("typekit.click.sync-all-button",{family:e.name}),t.SyncService.addSyncedVariations(i.pluck(n,"id")).then((function(o){var r,a=[];n.forEach((function(e){"data"in o&&o.data.added_font_ids.indexOf(e.id)>-1?a.push(e.id):r=!0})),t.FontCountService.updatePreviouslyActivatedFontsCount(-a.length),r?(t.NotificationService.error(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.error_occurred_activating_some_fonts")),e.fonts=i.filter(n,(function(e){return!i.contains(a,e.id)}))):(a.length>1?t.NotificationService.success(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.fonts_activated_action.other",{count:a.length})):t.NotificationService.success(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.fonts_activated_action.one")),t._removeFamily(e),t.FontCountService.updateFamiliesCount(-1)),t.isSelectedFamily(e)&&t._removeSelections()}),(function(){t.NotificationService.error(t.I18nService.getMessage(t.i18n(),"neue.browse.family_card.error_occurred_activating_fonts"))}))},o.prototype._selectedFontFamilyIndex=function(){var e=this;return e.selectedFont.familyIndex||i.findIndex(e.families,{slug:e.selectedFont.family.slug})},o.prototype._selectedFontFamily=function(){return this.families[this._selectedFontFamilyIndex()]},o.prototype._selectedFontIndex=function(){var e=this;return e.selectedFont.variationIndex||i.findIndex(e._selectedFontFamily().fonts,{id:e.selectedFont.id})},o.prototype._memoizeIndices=function(e,t){this.selectedFont.familyIndex=t,this.selectedFont.variationIndex=e},o.prototype._removeSyncedVariation=function(e){var t=this;t.NewrelicService.addPageAction("typekit.click.unsync-button"),t.SyncService.removeSyncedVariations([e.id]).then((function(){t.FontCountService.updateActivatedFontsCount(-1),t._removeVariationFromFontFamilyList(e)}))},o.prototype._addSyncedVariation=function(e){var t=this;t.NewrelicService.addPageAction("typekit.click.sync-button"),t.SyncService.addSyncedVariations([e.id]).then((function(){t.FontCountService.updatePreviouslyActivatedFontsCount(-1),t._removeVariationFromFontFamilyList(e)}))},o.prototype._removeVariationFromFontFamilyList=function(e){var t=this,n=i.findIndex(t.families,{slug:e.family.slug}),o=t.families[n];o.fonts=i.without(o.fonts,e),0===o.fonts.length&&(t._removeFamily(o),t.FontCountService.updateFamiliesCount(-1)),t.isSelectedVariation(e)&&t._removeSelections()},o.prototype._removeSelections=function(){this.selectedFont=null,this.selectedFamily=null},o.prototype._removeFamily=function(e){this.families=i.without(this.families,e),this.isFamilyRemovedFromList=!0},o.prototype._init=function(){if(this.isFamilyRemovedFromList)this.isFamilyRemovedFromList=!1;else{this.selectedFamily=this.families[0];var e=this.selectedFamily.fonts[0];e.isFirst=!0,this.selectedFont=e;var t=this.families[this.families.length-1];t.fonts[t.fonts.length-1].isLast=!0}},e.exports=o},1339:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{textSamples:"&",onNext:"&",onPrevious:"&",font:"="},controller:n(1340),controllerAs:"fontPreviewCtrl",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/font_preview.html"}}},1340:function(e,t){function n(){this.exampleText={size:36}}n.prototype.getExampleTextStyle=function(){return{fontSize:this.exampleText.size+"px"}},n.prototype.getExampleText=function(){var e=this.textSamples()[this.font.default_language];return this.exampleText.value=e.kana_only?e.list_kana:e.list,this.exampleText},n.prototype.getFontDisplayData=function(){var e=this.textSamples(),t=e[this.font.default_language].unicode_range,n=e[this.font.default_language].feature_settings,i=e[this.font.default_language].kana_only||!1;return{cssName:this.font.family.web_id+"-"+this.font.font.web.fvd,fvd:this.font.font.web.fvd,isDynamic:!0,opaqueId:this.font.family.web_id,unicodeRange:t,featureSettings:n,kanaOnly:i}},n.prototype.getTextDirectionClass=function(){return this.font.rtl?"sample-right":""},n.prototype.handlePreviousButtonClick=function(){this.onPrevious()},n.prototype.handleNextButtonClick=function(){this.onNext()},e.exports=n},1341:function(e,t){e.exports=function(){return{scope:{showUpgradeToggle:"&",upgradeSelected:"&?",changeRequiredActionToggle:"&onChangeRequiredActionToggle"},restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/required_action_toggle.html",link:function(e){var t=e.upgradeSelected();e.toggleUpgradeAction=function(){var n;n={upgrade:!!(t=!t)},e.changeRequiredActionToggle({filteredActions:n})},e.isUpgradeSelected=function(){return e.showUpgradeToggle()&&t}}}}},1342:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{cardType:"@",showCarousel:"@",exampleText:"&",family:"=",textSamplePrimers:"=",textSamples:"&",noBackground:"&",isPreviouslyActiveView:"&",recommendationIndex:"&",selectedTag:"&",viewType:"&"},controller:n(1343),controllerAs:"familyCard",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/family_card.html"}}},1343:function(e,t,n){o.$inject=["$timeout","AddFontsToWebProjectService","AuthenticationService","DataService","DialogService","FavoritesService","FirstMileService","FontCountService","FontLoaderService","NewrelicService","NotificationService","FamiliesService","RedirectContextService","SyncService"];var i=n(4);function o(e,t,n,i,o,r,a,s,c,l,u,d,f,p){var h=this;h.$timeout=e,h.AddFontsToWebProjectService=t,h.AuthenticationService=n,h.DataService=i,h.DialogService=o,h.FamiliesService=d,h.FavoritesService=r,h.FontCountService=s,h.FontLoaderService=c,h.FirstMileService=a,h.NewrelicService=l,h.NotificationService=u,h.RedirectContextService=f,h.SyncService=p,h.DataService.get("/neue/i18n").then((function(e){h.i18n=e})),h._handleContext()}o.prototype.isAvailableForWeb=function(){return i.some(this.family.fonts,(function(e){var t=((e.font||{}).web||{}).required_action;return!!t&&i.isEmpty(t)}))},o.prototype.getCardType=function(){return this.cardType||"responsive"},o.prototype.getDisplayFont=function(){var e=this.textSamples(),t=e[this.family.display_font.default_language].unicode_range,n=e[this.family.display_font.default_language].feature_settings;return{cssName:this.family.display_font.family.web_id+"-"+this.family.display_font.font.web.fvd,fvd:this.family.display_font.font.web.fvd,isDynamic:!0,opaqueId:this.family.display_font.family.web_id,unicodeRange:t,featureSettings:n}},o.prototype.getTextDirectionClass=function(){return this.family.display_font.rtl?"sample-right":""},o.prototype.getCarouselListClass=function(){return this.family.specimen_images.length>2?"adobe-fonts-family-card__carousel-list":""},o.prototype.getSlidesForGrid=function(){var e=[];return this.family.specimen_images&&this.family.specimen_images.length>0&&(e=this.family.specimen_images.slice(0)).push("TextSlide"),e},o.prototype.isTextSlide=function(e){return"TextSlide"===e},o.prototype.getSlideLengthForGrid=function(){return this.family.specimen_images&&this.family.specimen_images.length>0?this.family.specimen_images.length+1:0},o.prototype.getExampleText=function(){var e="list";null!=this.family.filters&&this.family.filters.indexOf("ka:ko")>=0&&(e+="_kana");var t=this.exampleText(),n=t&&t.value?t.value:this.textSamples()[this.family.display_font.default_language][e];return"en"!=this.family.display_font.default_language&&this.FontLoaderService.updateFonts(n),n},o.prototype.getCountMessages=function(){return this.family.card_state.count_messages.join(" \u2022 ")},o.prototype.getMessage=function(e,t){var n=1===t?"one":"other";return this.i18n["neue.browse.family_card"][e][n].replace("%{count}",t)},o.prototype.isCarouselVisible=function(){return this.family.specimen_images&&this.family.specimen_images.length>0&&"true"===this.showCarousel},o.prototype.getCardInfoClass=function(){if("true"===this.showCarousel&&(!this.family.specimen_images||0===this.family.specimen_images.length))return"adobe-fonts-family-card__info_with_image"},o.prototype.getCardContainerClass=function(){return this.isCarouselVisible()?"adobe-fonts-family-card--grid-view-with-carousel":"adobe-fonts-family-card--grid-view"},o.prototype.handleFamilyCardClick=function(){this.NewrelicService.addPageAction("typekit.family_card.click",{selectedTag:this.selectedTag(),slug:this.family.slug})},o.prototype.hasVariableFonts=function(){return i.any(this.family.fonts,(function(e){return e.is_variable_font}))},o.prototype.hasUnsyncedFontpacks=function(){return!!this.family.unsynced_fontpacks&&this.family.unsynced_fontpacks.length>0},o.prototype.isToggleOn=function(){return this.family.card_state.toggle_control&&!0===this.family.card_state.toggle_control.value},o.prototype.showToggle=function(){return this.family.card_state.toggle_control&&null!==this.family.card_state.toggle_control.value},o.prototype.toggleMessage=function(){if(this.family.card_state.toggle_control)return this.family.card_state.toggle_control.message},o.prototype.getExampleTextStyle=function(){var e=this.exampleText();return{fontSize:(e&&e.size?e.size:36)+"px"}},o.prototype.getFontCount=function(){return this.family.total_font_count},o.prototype.favoriteToggleClass=function(){return this.family.favorite?"favorite-toggle-icon on":"favorite-toggle-icon"},o.prototype.favoriteToggle=function(e){e.preventDefault();var t=this;this.family.favorite?t.FavoritesService.delete(this.family.slug).then((function(){t.family.favorite=!1}),(function(e){t.NotificationService.error(e.data.error)})):t.FavoritesService.post(this.family.slug).then((function(){t.family.favorite=!0}),(function(e){t.NotificationService.error(e.data.error)}))},o.prototype.handleCodeButtonClick=function(e){e&&e.preventDefault(),this.AddFontsToWebProjectService.addFamilyToWebProjectWithAuthentication(this.family.slug)},o.prototype.toggleFamilySync=function(e){e&&e.preventDefault(),this.showToggle()&&(this.isToggleOn()?this.unsyncFamily():this.syncFamily())},o.prototype.syncFamily=function(){var e=this;e.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_family",{slug:e.family.slug}).then((function(){e.NewrelicService.addPageAction("typekit.click.sync-family-button",{family:e.family.name});var t=i.pluck(e._deactivatedAvailableDesktopFonts(),"id");e.SyncService.addSyncedVariations(t).then((function(n){i.difference(t,n.data.added_font_ids).length>0?e.NotificationService.error(e.i18n["neue.browse.family_card"].error_occurred_activating_some_fonts):e._handleFamilySyncSuccess(n)}),(function(){e.NotificationService.error(e.i18n["neue.browse.family_card"].error_occurred_activating_fonts)}))}))},o.prototype.unsyncFamily=function(){var e=this;e.NewrelicService.addPageAction("typekit.click.unsync-family-button",{family:e.family.name});var t=i.pluck(e._activatedDesktopFonts(),"id");e.SyncService.removeSyncedVariations(t).then((function(n){i.difference(t,n.data.removed_font_ids).length>0?e.NotificationService.error(e.i18n["neue.browse.family_card"].error_occurred_deactivating_some_fonts):(e._markFontsAsDeactivated(),e._updateToggleControl(!1,e.i18n["neue.browse.family_card"].activate_fonts),e.FontCountService.updateActivatedFontsCount(-n.data.removed_font_ids.length),e.NotificationService.success(e.getMessage("fonts_deactivated_action",n.data.removed_font_ids.length)))}),(function(){e.NotificationService.error(e.i18n["neue.browse.family_card"].error_occurred_deactivating_fonts)}))},o.prototype._activatedDesktopFonts=function(){return i.filter(this.family.fonts,(function(e){var t=(e.font||{}).sync||{};return!!t&&(t.is_selected||!!t.install_state&&i.contains(t.install_state.split(","),"cc"))}))},o.prototype._deactivatedAvailableDesktopFonts=function(){return i.filter(this.family.fonts,(function(e){var t=(e.font||{}).sync||{};return!!t.required_action&&i.isEmpty(t.required_action)&&!t.is_selected}))},o.prototype._markFontsAsActivated=function(){i.each(this._deactivatedAvailableDesktopFonts(),(function(e){e.font.sync.is_selected=!0}))},o.prototype._markFontsAsDeactivated=function(){i.each(this._activatedDesktopFonts(),(function(e){e.font.sync.is_selected=!1,e.font.sync.install_state=""}))},o.prototype._handleContext=function(){return this.RedirectContextService.handleContext()},o.prototype._handleFamilySyncSuccess=function(e){var t=this;t._markFontsAsActivated(),t._updateToggleControl(!0,t.getMessage("fonts_active_count",e.data.added_font_ids.length)),t.FontCountService.updateActivatedFontsCount(e.data.added_font_ids.length),t.FirstMileService.shouldShowFontActivationDialog().then((function(n){if(n)return t.FirstMileService.showFontActivationDialog();t.NotificationService.success(t.getMessage("fonts_activated_action",e.data.added_font_ids.length))}))},o.prototype._updateToggleControl=function(e,t){this.family.card_state.toggle_control={value:e,message:t}},e.exports=o},1344:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{filtersModel:"&",onUserPrefsChange:"&",showNoAccessOnEmptyState:"&",textSampleData:"&",noBackground:"&",showCarousel:"@",disableSort:"&",isPreviouslyActiveView:"&",preloadedSortModes:"&"},controller:n(1345),controllerAs:"filteredFamilyList",require:["filteredFamilyList","ngModel"],link:function(e,t,n,i){var o=i[0],r=i[1];o.ngModel=r},restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/filtered_family_list.html"}}},1345:function(e,t,n){a.$inject=["$scope","$element","DataService","FilteredFamilyListStateService","ScrollService","UserPrefsService"];var i=n(4),o=n(15),r={grid:"filtered-family-list--grid-view",list:"filtered-family-list--wide-view"};function a(e,t,n,r,a,s){var c=this;c.$scope=e,c.$element=t,c.DataService=n,c.FilteredFamilyListStateService=r,c.ScrollService=a,c.UserPrefsService=s,c.handleDataChange=i.debounce(o.bind(this,this._handleDataChange),0),c.selectedSort=this.filtersModel().getSortOrder(),c._loadSortModes(),c.DataService.get("/families/i18n").then((function(e){c.i18n=e})),c._initWebComponentPagination(),c._initImagesToggle()}a.prototype.familyCount=function(){if(this.getViewValue().familyCountMessage){var e=this.getViewValue().familyCountMessage.message,t=this.getViewValue().familyCountMessage;return this.i18n["neue.browse.family_counts"][e].replace("%{total_families}",t.total_families).replace("%{more_families_in_cc}",t.more_families_in_cc)}},a.prototype.resetAllFilters=function(){this.filtersModel().clearAll(),this.handleDataChange()},a.prototype.getContainerClasses=function(){var e=[this.getViewTypeClass()];return this.isJapaneseOnlyFamily()&&e.push("filtered-family-list--japanese-only"),e},a.prototype.getSelectedTag=function(){return this.filtersModel().isLoading()?null:this.filtersModel().getSelectedTag()},a.prototype.getViewTypeClass=function(){return r[this.getViewValue().selectedViewType]},a.prototype.getViewValue=function(){},a.prototype.handleFontSizeChange=function(){this._handleUserPrefsChange()},a.prototype.handlePageNumberChange=function(){this.handleDataChange(),this.ScrollService.scrollUpTo(this.$element[0],500)},a.prototype.handlePangramMenuChange=function(){this._handleUserPrefsChange(),this.filtersModel().setHideImages(!0),this.showCarousel="false"},a.prototype.handleSortChange=function(){this.filtersModel().setSortOrder(this.selectedSort),this.handleDataChange()},a.prototype.handleViewTypeChange=function(){this._handleUserPrefsChange()},a.prototype.isEmpty=function(){return!this.getViewValue().families||this.getViewValue().families.length<1},a.prototype.isFavoritesEmptyStateVisible=function(){return this.isEmpty()&&!this.showNoAccessOnEmptyState()&&"favorites"==this.getViewValue().collection},a.prototype.isJapaneseOnlyFamily=function(){var e=i.uniq(i.map(this.getViewValue().families,(function(e){return e.display_font.default_language})));return 1==e.length&&"ja"==e[0]},a.prototype.isNextPageButtonVisible=function(){return this.getViewValue().currentPage<this.getViewValue().totalPages},a.prototype.isNoAccessEmptyStateVisible=function(){return this.isEmpty()&&this.showNoAccessOnEmptyState()},a.prototype.isPreviousPageButtonVisible=function(){return this.getViewValue().currentPage>1},a.prototype.isStandardEmptyStateVisible=function(){return this.isEmpty()&&!this.showNoAccessOnEmptyState()&&"favorites"!=this.getViewValue().collection},a.prototype._handleDataChange=function(){this.ngModel.$setViewValue(o.copy(this.getViewValue()))},a.prototype._handleUserPrefsChange=function(){this.onUserPrefsChange()&&this.$scope.$eval(this.onUserPrefsChange())},a.prototype._initImagesToggle=function(){var e=this;e.UserPrefsService.getUserPrefs().then((function(t){e.filtersModel().setHideImages(e.filtersModel().getHideImages()||t.hideImages),e.showCarousel=(!e.filtersModel().getHideImages()).toString()})),e.$element.on("images-toggle.toggled",(function(t){e.showCarousel=(t.detail.isChecked||!1).toString(),e.filtersModel().setHideImages("false"===e.showCarousel,!0),e.FilteredFamilyListStateService.updateUrl(e.filtersModel().toSearchParams())}))},a.prototype._initWebComponentPagination=function(){var e=this;e.$element.on("pagination-change",(function(t){e.getViewValue().currentPage=t.detail.page,e.handleDataChange(),e.ScrollService.scrollUpTo(e.$element[0],500)}))},a.prototype._loadSortModes=function(){var e=this;e.sortModes=e.preloadedSortModes(),e.sortModes||e.DataService.get("filtered-family-list-sort-modes").then((function(t){e.sortModes=t}))},e.exports=a},1346:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{exampleText:"&",isEnterpriseUser:"&",linkToFamily:"&?",onActivate:"&",onCodeButtonClick:"&",onDeactivate:"&",onDetailsClick:"&?",onSimilarFontsAndPairingsClick:"&",isSimilarCard:"@",textSamplePrimers:"&",textSamples:"&",userLoggedIn:"&",showRequiredAction:"=",variation:"&",originalVariation:"&",selectedFeedback:"="},controller:n(1347),controllerAs:"fontVariation",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/font_variation_card.html"}}},1347:function(e,t,n){r.$inject=["$q","$scope","$window","AddFontsToWebProjectService","AnalyticsService","AuthenticationService","DataService","DialogService","FeedbackService","FirstMileService","I18nService","NewrelicService","NotificationService","SyncService","UserService"];var i=n(4),o="similarity";function r(e,t,n,i,o,r,a,s,c,l,u,d,f,p,h){var g=this;g.$q=e,g.$scope=t,g.$window=n,g.AddFontsToWebProjectService=i,g.AnalyticsService=o,g.AuthenticationService=r,g.DataService=a,g.DialogService=s,g.FeedbackService=c,g.FirstMileService=l,g.I18nService=u,g.NewrelicService=d,g.NotificationService=f,g.SyncService=p,g.UserService=h,g.DataService.get("/neue/i18n").then((function(e){g.i18n=e}))}r.prototype.getExampleText=function(){var e=this.exampleText();if(e&&e.value)return e.value;var t=this.variation(),n=this.textSamples()[t.default_language];return n.kana_only?n.list_kana:n.list},r.prototype.getExampleTextStyle=function(){var e=this.exampleText();return{fontSize:(e&&e.size&&!this.isSimilarCard?e.size:36)+"px"}},r.prototype.getFontDisplayData=function(){var e=this.variation(),t=this.textSamples(),n=t[e.default_language].unicode_range,i=t[e.default_language].feature_settings,o=t[e.default_language].kana_only;return o||(o=!1),{cssName:e.family.web_id+"-"+e.font.web.fvd,fvd:e.font.web.fvd,isDynamic:!0,opaqueId:e.family.web_id,unicodeRange:n,featureSettings:i,kanaOnly:o}},r.prototype.getTextDirectionClass=function(){return this.variation().rtl?"sample-right":""},r.prototype.handleCodeButtonClick=function(){this.AddFontsToWebProjectService.addFamilyToWebProjectWithAuthentication(this.variation().family.slug,this.variation().slug)},r.prototype.getDefaultExampleText=function(){var e=this.textSamples()[this.variation().default_language||"en"];return e.kana_only?e.list_kana:e.list},r.prototype.shouldShowFamilyLink=function(){return void 0!==this.linkToFamily},r.prototype.handleSyncButtonClick=function(){this._handleFontSync()},r.prototype.isAvailableForSync=function(){return this.userLoggedIn()?"sync"in this.variation().font&&0===this.variation().font.sync.required_action.length:this.isUsableForSync()},r.prototype.isAvailableForWeb=function(){return this.userLoggedIn()?"web"in this.variation().font&&0===this.variation().font.web.required_action.length:this.isUsableForWeb()},r.prototype.cardActionClass=function(){return this.isAvailableForWeb()?"with-web-license":"without-web-license"},r.prototype.isPurchased=function(){return this.variation().marketplace&&this.variation().marketplace.is_purchased_by_user},r.prototype.isPurchasedAndSynced=function(){return this.isPurchased()&&this.isVariationSelectedForSync()},r.prototype.isSyncedViaSubscription=function(){return this.isVariationSelectedForSync()&&!this.isPurchased()},r.prototype.isUsableForWeb=function(){return"web"in this.variation().font&&(this.variation().font.web.library_availability.trial||this.variation().font.web.library_availability.full)},r.prototype.isUsableForSync=function(){return"sync"in this.variation().font&&(this.variation().font.sync.library_availability.trial||this.variation().font.sync.library_availability.full)},r.prototype.isVariationSelectedForSync=function(){var e=this.variation().font;return!(!e||!e.sync)&&(e.sync.is_selected||!!e.sync.install_state&&i.contains(e.sync.install_state.split(","),"cc"))},r.prototype.syncOnlyRequiresAction=function(e){var t=((this.variation().font||{}).sync||{}).required_action;return!!t&&i.contains(t,e)&&i.isEmpty(i.without(t,e))&&!this.isAvailableForWeb()},r.prototype.requiresPurchase=function(e){return e in this.variation().font&&this.variation().font[e].required_action.indexOf("purchase")>=0},r.prototype.requiresUpgrade=function(e){return e in this.variation().font&&this.variation().font[e].required_action.indexOf("upgrade")>=0},r.prototype.getFlaggedClass=function(){return this.hasNegativeFeedback()?"flagged":""},r.prototype.shouldShowWebProjectsButton=function(){return this.isAvailableForWeb()&&!this.isSimilarCard},r.prototype.shouldShowSyncButton=function(){return this.isAvailableForSync()&&!this.isVariationSelectedForSync()},r.prototype.shouldShowUnsyncButton=function(){return this.isSyncedViaSubscription()},r.prototype.shouldShowPurchaseButton=function(){return this.syncOnlyRequiresAction("purchase")||this.requiresPurchase("sync")&&"purchase"===this.showRequiredAction},r.prototype.shouldShowWebOnly=function(){return!this.shouldShowPurchaseButton()&&!this.shouldShowUpgradeButton()&&!this.isAvailableForSync()&&this.isAvailableForWeb()},r.prototype.shouldShowWebOnlyRequiresUpgrade=function(){return!this.shouldShowPurchaseButton()&&!this.shouldShowUpgradeButton()&&!this.isUsableForSync()&&!this.isAvailableForWeb()&&this.isUsableForWeb()},r.prototype.shouldShowAdminOnly=function(){return!this.isUsableForSync()&&!this.isUsableForWeb()},r.prototype.shouldShowNotAvailable=function(){return!this.shouldShowPurchaseButton()&&!this.isAvailableForWeb()&&!this.isAvailableForSync()&&!this.shouldShowUpgradeButton()},r.prototype.shouldShowUpgradeButton=function(){return!this.UserService.hasPaidCreativeCloud()&&(this.syncOnlyRequiresAction("upgrade")||this.requiresUpgrade("sync")&&"upgrade"===this.showRequiredAction)},r.prototype.shouldShowReinstallComponent=function(){if(this.isSimilarCard)return!1;var e=this.variation().font;return!(!e||!e.sync)&&(!!e.sync.install_state&&i.contains(e.sync.install_state.split(","),"cc"))},r.prototype.isMouseOverReinstallIcon=function(){return this.variation().isMouseOverReinstallIcon},r.prototype.handleReinstallIconMouseOver=function(){this.variation().isMouseOverReinstallIcon=!0},r.prototype.handleReinstallIconMouseLeave=function(){this.variation().isMouseOverReinstallIcon=!1},r.prototype.handleFontVariationCardMouseOver=function(){this.variation().isMouseOverFontVariationCard=!0},r.prototype.handleFontVariationCardMouseLeave=function(){this.variation().isMouseOverFontVariationCard=!1},r.prototype.shouldShowSimilarFontsAndPairingsLink=function(){return this.variation().isMouseOverFontVariationCard&&this._hasFontRecommendations()},r.prototype.shouldShowFlagResultIcon=function(){return(this.variation().isMouseOverFontVariationCard||"negative"===this.selectedFeedback)&&this.isSimilarCard&&this.userLoggedIn()},r.prototype.hasNegativeFeedback=function(){return this.isSimilarCard&&"negative"===this.selectedFeedback},r.prototype.handleFontVariationCardClick=function(){this._recordEvent("recommended_font_card_click","positive")},r.prototype._hasFontRecommendations=function(){return this.variation().has_similar_fonts_or_pairings&&"en"===this.variation().default_language},r.prototype._addSyncedVariation=function(){var e=this;e.variation().isSyncing=!0;var t=e.variation().font.sync.install_state;e.SyncService.addSyncedVariations([e.variation().id]).then((function(n){if(e.variation().isSyncing=!1,!e._isSyncSuccessResponse(n))return"data"in n?e.$q.reject(n.data):e.$q.reject();e._handleVariationSyncSuccess(t)})).catch((function(t){e.variation().isSyncing=!1,t&&t.message?e.NotificationService.error(t.message):e.NotificationService.error(e.i18n["neue.browse.family_card"].error_occurred_activating_fonts)}))},r.prototype._handleFontSync=function(){var e=this;this.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_font",{font_variation_id:this.variation().id}).then((function(){e.isVariationSelectedForSync()?(e.isSimilarCard&&e._recordEvent("deactivate-button-click","negative"),e._removeSyncedVariation()):(e.isSimilarCard&&e._recordEvent("activate-button-click","positive"),e._addSyncedVariation())}))},r.prototype._recordEvent=function(e,t){var n=this;if(n.isSimilarCard){n.NewrelicService.addPageAction("typekit.browse.similarity_and_pairing.feedback",{category:o,subcategory:e,feedback:t,variation_one:n.variation().name,variation_two:n.originalVariation().name});var i=n.variation().id+"-"+n.originalVariation().id;n.FeedbackService.post(o,e,i,t,null,n.variation().id,n.originalVariation().id)}},r.prototype.reinstall=function(){var e=this;this.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_font",{font_variation_id:this.variation().id}).then((function(){e.NewrelicService.addPageAction("typekit.family-page.click.reinstall-button"),e._addSyncedVariation()}))},r.prototype._handleVariationSyncSuccess=function(e){var t=this;if(t.variation().font.sync.is_selected=!0,t.variation().font.sync.install_state="os","cc"!==e){var n=t.I18nService.getMessageWithCount(t.i18n["neue.browse.family_card"].fonts_named_activated_action,1,{font:t.variation().name,count:1});t.NotificationService.success(n),t.onActivate()&&t.$scope.$eval(t.onActivate()),t.FirstMileService.shouldShowFontActivationDialog().then((function(e){if(e)return t.FirstMileService.showFontActivationDialog()}))}},r.prototype._isSyncSuccessResponse=function(e){return"data"in e&&-1!==e.data.added_font_ids.indexOf(this.variation().id)},r.prototype._removeSyncedVariation=function(){var e=this;e.NewrelicService.addPageAction("typekit.click.unsync-button"),e.variation().isSyncing=!0,e.SyncService.removeSyncedVariations([e.variation().id]).then((function(){e.variation().isSyncing=!1,e.variation().font.sync.is_selected=!1,e.variation().font.sync.install_state="",e.onDeactivate()&&e.$scope.$eval(e.onDeactivate());var t=e.I18nService.getMessageWithCount(e.i18n["neue.browse.family_card"].fonts_named_deactivated_action,1,{font:e.variation().name,count:1});e.NotificationService.success(t)}),(function(){e.variation().isSyncing=!1}))},e.exports=r},1348:function(e,t,n){e.exports=function(){return{scope:{},bindToController:{exampleText:"&",onActivate:"&",onDeactivate:"&",isInDetailsSection:"&",textSamplePrimers:"&",textSamples:"&",userLoggedIn:"&",showRequiredAction:"=",familySlug:"&",variation:"&",linkHeaderVariationToFamily:"&",pairVariation:"&",selectedFeedback:"=",onVariationHeaderClick:"&",onVariationBodyClick:"&",fontPairId:"&",recommendationIndex:"&"},controller:n(1349),controllerAs:"fontVariation",restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/font_pairing_card.html"}}},1349:function(e,t,n){o.$inject=["$q","$scope","$window","AddFontsToWebProjectService","AnalyticsService","AuthenticationService","DataService","DialogService","FeedbackService","FirstMileService","I18nService","NewrelicService","NotificationService","SyncService","UserService"];var i=n(4);function o(e,t,n,i,o,r,a,s,c,l,u,d,f,p,h){var g=this;g.$q=e,g.$scope=t,g.$window=n,g.AddFontsToWebProjectService=i,g.AnalyticsService=o,g.AuthenticationService=r,g.DataService=a,g.DialogService=s,g.FeedbackService=c,g.FirstMileService=l,g.I18nService=u,g.NewrelicService=d,g.NotificationService=f,g.SyncService=p,g.UserService=h,g.DataService.get("/neue/i18n").then((function(e){g.i18n=e})),g.isMainVariationNameHighlighted=!1,g.isPairingVariationNameHighlighted=!1}o.prototype.areFeedbackIconsVisible=function(){return this.userLoggedIn()},o.prototype.variations=function(){return[this.variation(),this.pairVariation()]},o.prototype.isMainVariationInFamily=function(){return this.variation().family.slug===this.familySlug()},o.prototype.getExampleText=function(){var e=this.exampleText();if(e&&e.value)return e.value;var t=this.variation(),n=this.textSamples()[t.default_language];return n.kana_only?n.list_kana:n.list},o.prototype.getPairingHeadingText=function(){return"Fudge Brownies"},o.prototype.getPairingBodyText=function(){return"Pure indulgence \u2014 that\u2019s what we\u2019re talking about here. A perfect balance between fudgy and cakey so everyone gets what they want out of these brownies. We\u2019ll leave it to you to fight over who gets the crisp edges versus the ooey-gooey middles. Let\u2019s get baking!"},o.prototype.getExampleTextStyle=function(){var e=this.exampleText();return{fontSize:(e&&e.size?e.size:36)+"px"}},o.prototype.getPairingBodyTextStyle=function(){return{fontSize:"18px"}},o.prototype.getPairingHeadingTextStyle=function(){return{fontSize:"30px"}},o.prototype.getFontDisplayData=function(){var e=this.variation(),t=this.textSamples();return this.getDisplayData(e,t)},o.prototype.getPairingBodyFontDisplayData=function(){var e=this.pairVariation(),t=this.textSamples();return this.getDisplayData(e,t)},o.prototype.getDisplayData=function(e,t){var n=t[e.default_language].unicode_range,i=t[e.default_language].feature_settings,o=t[e.default_language].kana_only;return o||(o=!1),{cssName:e.family.web_id+"-"+e.font.web.fvd,fvd:e.font.web.fvd,isDynamic:!0,opaqueId:e.family.web_id,unicodeRange:n,featureSettings:i,kanaOnly:o}},o.prototype.getFontPairName=function(e){return[this.variation().name,this.pairVariation().name].join([" "," "].join(e))},o.prototype.getTextDirectionClass=function(){return this.variation().rtl?"sample-right":""},o.prototype.handleMainVariationNameMouseOver=function(){this.isMainVariationNameHighlighted=!0},o.prototype.handleMainVariationNameMouseOut=function(){this.isMainVariationNameHighlighted=!1},o.prototype.handlePairingVariationNameMouseOver=function(){this.isPairingVariationNameHighlighted=!0},o.prototype.handlePairingVariationNameMouseOut=function(){this.isPairingVariationNameHighlighted=!1},o.prototype.handleSyncButtonClick=function(){this._handleFontsSync()},o.prototype.isAvailableForSync=function(e){return this.userLoggedIn()?"sync"in e.font&&0===e.font.sync.required_action.length:this.isUsableForSync(e)},o.prototype.isAvailableForWeb=function(e){return this.userLoggedIn()?"web"in this.variation().font&&0===e.font.web.required_action.length:this.isUsableForWeb(e)},o.prototype.isPurchased=function(e){return e.marketplace&&e.marketplace.is_purchased_by_user},o.prototype.isPurchasedAndSynced=function(){var e=this;return i.every(e.variations(),(function(t){return e.isPurchased(t)&&e.isVariationSelectedForSync(t)}))},o.prototype.isSyncedViaSubscription=function(e){return this.isVariationSelectedForSync(e)&&!this.isPurchased(e)},o.prototype.isUsableForWeb=function(e){return"web"in e.font&&(e.font.web.library_availability.trial||e.font.web.library_availability.full)},o.prototype.isUsableForSync=function(e){return"sync"in e.font&&(e.font.sync.library_availability.trial||e.font.sync.library_availability.full)},o.prototype.isVariationSelectedForSync=function(e){var t=e.font;return!(!t||!t.sync)&&(t.sync.is_selected||!!t.sync.install_state&&i.contains(t.sync.install_state.split(","),"cc"))},o.prototype.syncOnlyRequiresAction=function(e,t){var n=((e.font||{}).sync||{}).required_action;return!!n&&i.contains(n,t)&&i.isEmpty(i.without(n,t))&&!this.isAvailableForWeb(e)},o.prototype.requiresUpgrade=function(e,t){return t in e.font&&e.font[t].required_action.indexOf("upgrade")>=0},o.prototype.getFlaggedClass=function(){return this.hasNegativeFeedback()?"flagged":""},o.prototype.shouldShowSyncButton=function(){var e=this,t=i.every(e.variations(),(function(t){return e.isAvailableForSync(t)})),n=i.some(e.variations(),(function(t){return!e.isVariationSelectedForSync(t)}));return t&&n},o.prototype.shouldShowUnsyncButton=function(){var e=this;return i.every(e.variations(),(function(t){return e.isSyncedViaSubscription(t)}))},o.prototype.shouldShowWebOnly=function(){var e=this;return i.some(e.variations(),(function(t){return!e.shouldShowUpgradeButton()&&!e.isAvailableForSync(t)&&e.isAvailableForWeb(t)}))},o.prototype.shouldShowWebOnlyRequiresUpgrade=function(){var e=this;return i.some(e.variations(),(function(t){return!e.shouldShowUpgradeButton(t)&&!e.isUsableForSync(t)&&!e.isAvailableForWeb(t)&&e.isUsableForWeb(t)}))},o.prototype.shouldShowAdminOnly=function(){var e=this;return i.some(e.variations(),(function(t){return!e.isUsableForSync(t)&&!e.isUsableForWeb(t)}))},o.prototype.shouldShowNotAvailable=function(){var e=this;return i.some(e.variations(),(function(t){return!e.isAvailableForWeb(t)&&!e.isAvailableForSync(t)&&!e.shouldShowUpgradeButton()}))},o.prototype.shouldShowUpgradeButton=function(){if(this.UserService.hasPaidCreativeCloud())return!1;var e=this;return i.some(e.variations(),(function(t){return e.syncOnlyRequiresAction(t,"upgrade")||e.requiresUpgrade(t,"sync")&&"upgrade"===e.showRequiredAction}))},o.prototype.shouldShowFlagResultIcon=function(){return this.hasNegativeFeedback()},o.prototype.hasNegativeFeedback=function(){return"negative"===this.selectedFeedback},o.prototype.handleFontPairCardClick=function(){this._recordEvent("recommended_font_card_click","positive")},o.prototype.handleFontClick=function(e){this.isMainVariationInFamily()?e.id!==this.variation().id||this.isInDetailsSection()?this._recordEvent("recommended_font_card_click","positive"):this.$scope.$eval(this.onVariationHeaderClick()):e.id===this.variation().id||this.isInDetailsSection()?this._recordEvent("recommended_font_card_click","positive"):this.$scope.$eval(this.onVariationBodyClick())},o.prototype.getLinkForVariation=function(e){return this.linkHeaderVariationToFamily()?"/fonts/"+e.family.slug:this.isMainVariationInFamily()?e.id===this.variation().id?"":"/fonts/"+e.family.slug:e.id===this.variation().id?"/fonts/"+e.family.slug:""},o.prototype.getDetailsHighlightClass=function(e){return this.isInDetailsSection()?this.isMainVariationInFamily()?e.id===this.variation().id?"font-pairing-card--details-highlight":"":e.id===this.variation().id?"":"font-pairing-card--details-highlight":""},o.prototype.isSyncingDisabled=function(){return this.hasNegativeFeedback()},o.prototype._addSyncedVariations=function(){var e=this;e.variations().forEach((function(e){e.isSyncing=!0}));var t=i.map(e.variations(),(function(e){return e.font.sync.install_state}));e.SyncService.addSyncedVariations(i.pluck(e.variations(),"id"),{font_pair_id:e.fontPairId()}).then((function(n){if(e.variations().forEach((function(e){e.isSyncing=!1})),!e._isSyncSuccessResponse(n))return"data"in n?e.$q.reject(n.data):e.$q.reject();e._handleVariationSyncSuccess(t)})).catch((function(t){e.variations().forEach((function(e){e.isSyncing=!1})),t&&t.message?e.NotificationService.error(t.message):e.NotificationService.error(e.i18n["neue.browse.family_card"].error_occurred_activating_fonts)}))},o.prototype._handleFontsSync=function(){var e=this;this.AuthenticationService.handleAuthenticationWithPostLoginAction("activate_fonts",{font_ids:i.pluck(e.variations(),"id")}).then((function(){i.every(e.variations(),(function(t){return e.isVariationSelectedForSync(t)}))?(e._recordEvent("deactivate-button-click","negative"),e._removeSyncedVariations()):(e._recordEvent("activate-button-click","positive"),e._addSyncedVariations())}))},o.prototype._recordEvent=function(e,t){var n=this;n.NewrelicService.addPageAction("typekit.browse.similarity_and_pairing.feedback",{category:"pairing",subcategory:e,feedback:t,variation_one:n.variation().name,variation_two:n.pairVariation().name});var i=n.variation().id+"-"+n.pairVariation().id;n.FeedbackService.post("pairing",e,i,t,null,n.variation().id,n.pairVariation().id)},o.prototype._handleVariationSyncSuccess=function(e){var t=this,n=[];if(t.variations().forEach((function(e){e.font.sync.is_selected||n.push(e),e.font.sync.is_selected=!0,e.font.sync.install_state="os"})),!e.every((function(e){return"cc"===e}))){if(n.length>0){var i=t.I18nService.getMessageWithCount(t.i18n["neue.browse.family_card"].fonts_named_activated_action,n.length,{font:n[0].name,count:n.length});t.NotificationService.success(i)}t.onActivate()&&t.$scope.$eval(t.onActivate()),void 0!==t.recommendationIndex()&&t.NewrelicService.addPageAction("typekit.recommendations.activateFontPair",{recommendationIndex:t.recommendationIndex()}),t.FirstMileService.shouldShowFontActivationDialog().then((function(e){if(e)return t.FirstMileService.showFontActivationDialog()}))}},o.prototype._isSyncSuccessResponse=function(e){return"data"in e&&i.every(this.variations(),(function(t){return-1!==e.data.added_font_ids.indexOf(t.id)}))},o.prototype._removeSyncedVariations=function(){var e=this;e.NewrelicService.addPageAction("typekit.click.unsync-button"),e.variations().forEach((function(e){e.isSyncing=!0})),e.SyncService.removeSyncedVariations(i.pluck(e.variations(),"id"),{font_pair_id:e.fontPairId()}).then((function(){var t=[];if(e.variations().forEach((function(e){e.font.sync.is_selected&&t.push(e),e.isSyncing=!1,e.font.sync.is_selected=!1,e.font.sync.install_state=""})),e.onDeactivate()&&e.$scope.$eval(e.onDeactivate()),void 0!==e.recommendationIndex()&&e.NewrelicService.addPageAction("typekit.recommendations.deactivateFontPair",{recommendationIndex:e.recommendationIndex()}),t.length>0){var n=e.I18nService.getMessageWithCount(e.i18n["neue.browse.family_card"].fonts_named_deactivated_action,t.length,{font:t[0].name,count:t.length});e.NotificationService.success(n)}}),(function(){e.variations().forEach((function(e){e.isSyncing=!1}))}))},e.exports=o},1350:function(e,t){e.exports=function(){return{scope:{},require:"ngModel",link:function(e,t,n,i){e.handleSizeChange=function(){i.$setViewValue(e.fontSize)},i.$render=function(){e.fontSize=i.$viewValue}},restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/font_size_control.html"}}},1351:function(e,t,n){function i(e,t){return{restrict:"A",scope:{},bindToController:{disabled:"&?"},controller:n(1352),controllerAs:"stickyNavCtrl",link:function(e,n,i,o){var r=n[0].querySelector(".sticky-nav__unstick-button");r&&r.addEventListener("click",(function(){e.$apply((function(){o.forceUnstick()}))})),t.addEventListener("resize",(function(){e.$apply((function(){o.handleResize()}))})),t.addEventListener("scroll",(function(){e.$apply((function(){o.handleScroll()}))}))}}}i.$inject=["$document","$window"],e.exports=i},1352:function(e,t){a.$inject=["$document","$element","$scope"];var n="spectrum-grid-start-xs",i="spectrum-grid-center-xs",o="sticky-nav--stuck",r="sticky-nav--unstuck";function a(e,t,n){this.$element=t,this.$document=e,this.$scope=n,this._stickyElement=t[0],this._pushElement=this._getPushElement(),this._isStuck=!1,this._updateDimensions(),this._initWatchers()}a.prototype.forceUnstick=function(){this._stickyElement.classList.remove(n),this._stickyElement.classList.remove(o),this._stickyElement.classList.add(i),this._stickyElement.classList.add(r),this._pushElement.style.display="none",this._forceUnstuck=!0,this._isStuck=!1},a.prototype.handleResize=function(){this._updateDimensions()},a.prototype.handleScroll=function(){this._getScrollTop()>=this._initialTotalOffset&&this.isActive()?(this._stickyElement.classList.add(n),this._stickyElement.classList.add(o),this._stickyElement.classList.remove(i),this._pushElement.style.display="block",this._isStuck=!0):this._getScrollTop()<this._initialTotalOffset&&(this._stickyElement.classList.remove(o),this._stickyElement.classList.remove(r),this._stickyElement.classList.add(i),this._stickyElement.classList.remove(n),this._pushElement.style.display="none",this._forceUnstuck=!1,this._isStuck=!1)},a.prototype.isActive=function(){return!this._forceUnstuck&&!this.disabled()},a.prototype._getScrollTop=function(){return this.$document[0].documentElement.scrollTop||this.$document[0].body.scrollTop},a.prototype._getPushElement=function(){var e=document.createElement("div");return e.style.display="none",e.style.height=this._stickyElement.offsetHeight+"px",this._stickyElement.parentNode.insertBefore(e,this._stickyElement),e},a.prototype._getTotalOffset=function(){return this._getScrollTop()+this._stickyElement.getBoundingClientRect().top},a.prototype._initWatchers=function(){var e=this;e.$scope.$watch((function(){return e._stickyElement.offsetHeight}),(function(){e._updateDimensions()})),e.$scope.$watch((function(){return e.isActive()}),(function(t){e._stickyElement.classList.toggle("sticky-nav--sticky",t),e._updateDimensions()}))},a.prototype._updateDimensions=function(){this._initialTotalOffset=this._getTotalOffset(),this._pushElement.style.height=this._stickyElement.offsetHeight+"px"},e.exports=a},1353:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tab_navigation.html",bindToController:{navigationTabs:"=",currentTab:"=",defaultTabWidth:"=?",onTabChange:"&"},controller:n(1354),controllerAs:"tabNavigation"}}},1354:function(e,t){n.$inject=["$scope","$timeout","$window"];function n(e,t,n){var i=this;i.$scope=e,i.$timeout=t,i.$window=n,i.indicatorWidth=this.defaultTabWidth||0,i.indicatorLeft=0,i._loadAttempts=0,i._loadDefaultTab(this.currentTab),i.$scope.$watch((function(){return i.currentTab}),(function(){i._updateTabStyling()}))}n.prototype.indicatorStyle=function(){return{width:this.indicatorWidth+"px",left:this.indicatorLeft+"px",bottom:"0"}},n.prototype.isTabSelected=function(e){return this.currentTab===e},n.prototype.selectTab=function(e){var t=this;t.currentTab=e,t._updateTabStyling(),t.$timeout((function(){t.onTabChange()}),0,!1)},n.prototype.handleTabChange=function(e){e.link?(this.$window.history.replaceState(null,null,e.link),this.$window.location.reload()):this.$window.history.replaceState({navigationTabClicked:!0},null,"#"+e.id+"-section"),this.selectTab(e)},n.prototype.getWidthOfTab=function(e){var t=0;try{t=document.getElementById(e.id).clientWidth}catch(n){return t}return t},n.prototype._isTabLoaded=function(e){return this.getWidthOfTab(e)>0},n.prototype._loadDefaultTab=function(e){var t=this;if(!t._isTabLoaded(e)&&t._loadAttempts<7)return t._loadAttempts++,t.$timeout((function(){t._loadDefaultTab()}));t.selectTab(this.currentTab),t._updateTabStyling()},n.prototype._updateTabStyling=function(){var e=this;e.indicatorWidth=e.getWidthOfTab(e.currentTab);var t=0;for(var n in this.navigationTabs){if(e.navigationTabs[n]===e.currentTab)break;t+=24,t+=e.getWidthOfTab(this.navigationTabs[n])}this.indicatorLeft=t},e.exports=n},1355:function(e,t,n){e.exports=function(){return{restrict:"E",templateUrl:"/angular_templates/directives/tk_paginate.html",bindToController:{totalPages:"=",currentPage:"=",onPageNumberChange:"&"},controller:n(1356),controllerAs:"tkPaginate"}}},1356:function(e,t,n){o.$inject=["$timeout","$window"];var i=n(4);function o(e,t){this.$timeout=e,this.$window=t}o.prototype.isSelected=function(e){return this.currentPage===e},o.prototype.previousPage=function(){this.currentPage-1>=1&&this.selectPage(this.currentPage-1)},o.prototype.nextPage=function(){this.currentPage+1<=this.totalPages&&this.selectPage(this.currentPage+1)},o.prototype.showBeginEllipsis=function(){return this._hasPaginatedAwayFromBegin()&&this.totalPages>2},o.prototype.showEndEllipsis=function(){return this._hasPaginatedAwayFromEnd()&&this.totalPages>2},o.prototype.selectPage=function(e){var t=this;t.currentPage=e,t.$timeout((function(){t.onPageNumberChange()}),0,!1)},o.prototype.getPagesInRange=function(){var e=i.range(2,this.totalPages),t=this.currentPage-Math.floor(this._numPagesInMiddleRange()/2),n=e.indexOf(Math.max(t,2));return e.slice(n,n+this._numPagesInMiddleRange())},o.prototype._hasPaginatedAwayFromEnd=function(){var e=this.getPagesInRange();return e[e.length-1]!==this.totalPages-1},o.prototype._hasPaginatedAwayFromBegin=function(){return 2!==this.getPagesInRange()[0]},o.prototype._numPagesInMiddleRange=function(){return this.$window.innerWidth<768?2:5},e.exports=o},1357:function(e,t){function n(e){return{scope:{ngModel:"=",onChanged:"&"},link:function(t){t.handleViewTypeButtonClick=function(n){t.ngModel=n,e((function(){t.onChanged()}))},t.isViewTypeSelected=function(e){return t.ngModel==e}},restrict:"E",replace:!0,templateUrl:"/angular_templates/directives/view_type_control.html"}}n.$inject=["$timeout"],e.exports=n},1358:function(e,t){function n(e){return{scope:{onScrolledToEnd:"&"},link:function(t,n){var i=!0;n.on("wheel",(function(){n[0].scrollTop+n[0].offsetHeight==n[0].scrollHeight&&i&&(i=!1,e((function(){t.onScrolledToEnd(),i=!0}),100))}))}}}n.$inject=["$timeout"],e.exports=n},1359:function(e,t){function n(e,t){return{post:function(n){if(t.Visitor){var i=t.Visitor.getInstance("9E1005A551ED61CA0A490D45@AdobeOrg");return n.visitor_guid=i.getMarketingCloudVisitorID(),n.page_name=t.document.title,n.event_url=t.location.href,e.post("/analytics/events",n)}}}}n.$inject=["$http","$window"],e.exports=n},1360:function(e,t){function n(e){return{getFamilies:function(t,n){return e.get("/designers/"+t+"/families",{params:n})}}}n.$inject=["$http"],e.exports=n},1361:function(e,t){function n(e){return{get:function(t){return e.get("/fonts.json",{params:t})}}}n.$inject=["$http"],e.exports=n},1362:function(e,t){function n(e){return{get:function(t){return e.get("/search/autocomplete?query="+t)},getItemHyperlink:function(e){return"/fonts/"+e.slug}}}n.$inject=["$http"],e.exports=n},1363:function(e,t){function n(e){return{post:function(t){return e.post("/fonts/"+t+"/typographic_favorites")},delete:function(t){return e.post("/fonts/"+t+"/typographic_favorites/destroy")}}}n.$inject=["$http"],e.exports=n},1364:function(e,t){function n(e,t){return{getSubmittedFeedback:function(e,t){return this._setDefaultSubmittedFeedback(e,t),t?this._submittedFeedback[e].familyFeedback[t]:this._submittedFeedback[e].feedback},post:function(n,i,o,r,a,s,c){var l=this;return t.getUserPrefs().then((function(t){if(l.getSubmittedFeedback(o,a)!==r){var u=l._getFeedbackParams(n,i,o,r,a,t,s,c);return e.post("/feedbacks.json",u).then((function(){l.setSubmittedFeedback(o,r,a)}))}}))},setFiltersModel:function(e){this.filtersModel=e},setSubmittedFeedback:function(e,t,n){this._setDefaultSubmittedFeedback(e,n),n?this._submittedFeedback[e].familyFeedback[n]=t:this._submittedFeedback[e].feedback=t},_getFeedbackParams:function(e,t,n,i,o,r,a,s){var c={category:e,feedback_type:i,id:n,view_type:r.selectedViewType};return t&&(c.subcategory=t),this.filtersModel&&(c.filters=this.filtersModel.getSelectedFilters().join(","),c.languages=this.filtersModel.getSelectedLanguages().join(","),c.locale=this.filtersModel.getLocale()),o&&(c.family_slug=o),a&&(c.variation_one=a),s&&(c.variation_two=s),c},_setDefaultSubmittedFeedback:function(e,t){this._submittedFeedback=this._submittedFeedback||{},this._submittedFeedback[e]=this._submittedFeedback[e]||{},t&&(this._submittedFeedback[e].familyFeedback=this._submittedFeedback[e].familyFeedback||{})}}}n.$inject=["$http","UserPrefsService"],e.exports=n},1365:function(e,t,n){c.$inject=["DialogService","FloodgateService","UserPrefsService"];var i=n(4),o=n(110),r=n(49),a="default",s="featured_rank";function c(e,t,n){function c(e){e=e||{},this._allFilters=e.allFilters,this._browseMode=a,this._collection=e.collection,this._currentPage=1,this._filterDataIndex=e.filterData,this._hideImages=e.hideImages,this._hideLibraryOption=e.hideLibraryOption,this._isLoading=!1,this._isTagsModuleVisible=e.isTagsModuleVisible,this._languages=e.languages,this._locale=e.locale,this._selectedFilters=[],this._selectedLanguages=[],this._selectedTag=null,this._sortOrder=e.sortOrder||s,this._showPaidFonts=e._showPaidFonts,this._minStyles=e.minStyles,this._maxStyles=e.maxStyles,this._signedOutState=e.signedOutState,this._tags=e.tags,this._textSamples=e.textSamples,this.bridge=o}return c.prototype.clearAll=function(){this.clearSelectedFilters(),this.clearSelectedLanguages(),this.clearSelectedTag(),this.clearNumberOfStyles(),this.setCurrentPage(1)},c.prototype.clearSelectedFilters=function(){this._selectedFilters=[],this.setCurrentPage(1)},c.prototype.clearSelectedFiltersForSection=function(e){var t=this,n=t.getSelectedFiltersForSection(e);t._selectedFilters=i.reject(t._selectedFilters,(function(e){return i.contains(n,e)})),this.setCurrentPage(1)},c.prototype.clearSelectedLanguages=function(){this._selectedLanguages=[],this.setCurrentPage(1)},c.prototype.clearSelectedTag=function(){this._selectedTag=null,this.setCurrentPage(1)},c.prototype.clearNumberOfStyles=function(){this._minStyles=1,this._maxStyles=26,this.setCurrentPage(1)},c.prototype.deselectFilter=function(e){this._selectedFilters=i.without(this._selectedFilters,e),this.setCurrentPage(1)},c.prototype.deselectLanguage=function(e){this._selectedLanguages=i.without(this._selectedLanguages,e),this.setCurrentPage(1)},c.prototype.getBrowseMode=function(){return this._browseMode},c.prototype.getCurrentPage=function(){return this._currentPage},c.prototype.getDataForFilter=function(e){return i.find(this._filterDataIndex,(function(t){return t.key==e}))},c.prototype.getDataForFilterBySlug=function(e){return i.find(this._filterDataIndex,(function(t){return t.slug==e}))},c.prototype.getFiltersForCurrentBrowseMode=function(){return this._allFilters[this._browseMode]},c.prototype.getFontDisplayData=function(e){if(e.font){var t=e.font.default_language||"en",n=this._textSamples[t].unicode_range,i=this._textSamples[t].feature_settings,o=this._textSamples[t].kana_only||!1;return{cssName:e.font.family.web_id+"-"+e.font.font.web.fvd,fvd:e.font.font.web.fvd,isDynamic:!1,opaqueId:e.font.family.web_id,unicodeRange:n,featureSettings:i,kanaOnly:o}}},c.prototype.getHideImages=function(){return this._hideImages},c.prototype.getLanguages=function(){return this._languages},c.prototype.getMinStyles=function(){return this._minStyles},c.prototype.getMaxStyles=function(){return this._maxStyles},c.prototype.getIconUrlForFilter=function(){}