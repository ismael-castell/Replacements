(self.webpackChunk_ozon_ozon_ru=self.webpackChunk_ozon_ozon_ru||[]).push([["plugins"],{18902:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n("98bae"),o=n("ff287"),c=n.n(o),d=n("f9266"),f=n("da3d6"),l=n("7157c"),v=n("23deb"),h=n("f9487"),w=n("8ee28"),_=n("ee86b");const E=function(e){var t=e.store,n=e.$config,o=e.$composerRouter,E=c()(t.state,"layoutTrackingInfo",{}),m=c()(t.state,"browser",{}),y=c()(t.state,"browser.isBot",!1),A=n.get("gtmOn"),R="prod"===n.get("env")||!1,O=c()(t.state,"experimentsConfig",{}),T=(0,f.U)(O),I={layoutTrackingInfo:E,browser:m,ecommerceExperiments:T},C=c()(t.state,"pageStatisticsTrackerMetrics"),L=c()(t.state,"o3Params.x-o3-tracker-metrics")||"on"===(0,_.ej)("tracker_metrics");l.y.init(I,{namespace:"bx",dev:!R,manager:{enable:Boolean(c()(t.state,"o3Params.x-o3-tracker-manager"))},metrics:{enable:Boolean(c()(t.state,"o3Params.x-o3-tracker-metrics"))},eventTemplate:function(){return(0,r.__assign)((0,r.__assign)({},(0,h.mK)(I)),{page:(0,r.__assign)({current:E.pageType,title:document.title},(0,h.IN)(E).page)})},cspNonce:c()(t.state,"browser.cspNonce")}),L&&l.y.setPageStatisticsTrackerMetrics(C);var S=(0,w.rV)((0,d.W5)("customReferrer")),N=c()(window,"performance.navigation.type"),k=o.current,x=1===N&&S?S:document.referrer;l.y.sendDLPageEvents(t.state,k,x);var D=(0,v.v)(c()(t.state,"userInfo.gdprCookieSettings")),P=Boolean(O.gtmBlock);if(A&&!y&&!P&&D){var j=n.get("gtmKey"),M=c()(t.state,"browser.cspNonce"),G=n.get("gtmDelay"),U=document.createElement("script");U.setAttribute("nonce",M),U.setAttribute("data-nonce",M),U.setAttribute("id","nonceGtm"),document.body.appendChild(U),window.onAppReady((function(){return setTimeout((function(){var script=document.createElement("script");script.setAttribute("nonce",M);var code=document.createTextNode("(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n      'https://www.googletagmanager.com/gtm.js?id='+i+dl;var n=d.querySelector('[nonce]');\n      n&&j.setAttribute('nonce',n.nonce||n.getAttribute('nonce'));f.parentNode.insertBefore(j,f);\n      })(window,document,'script','dataLayer', '"+j+"');\n      ");script.appendChild(code),document.body.appendChild(script),"otm"in window&&"init"in window.otm?window.otm.init(t.state):window.otmState=t.state}),G)}))}}},da3d6:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n("54922");function o(e){for(var t={},i=0;i<r.rr.length;i++){var n=r.rr[i];void 0!==e[n]&&(t[n]=e[n])}return t}},"45c41":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("98bae"),o=n("066fb"),c=n("020e4"),d=n("23781"),f=n("b09d5");const l=function(e){var t=e.store,n=e.$composerRouter;c.Z.register({showAuthModal:function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.dispatch("composer/GET_MODAL",{url:e,options:{notCentered:!0}})];case 1:return n.sent(),[2]}}))}))},getAuthMethodData:function(e){return(0,r.__awaiter)(void 0,void 0,Promise,(function(){var t,n,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,d.i.use(f.E).actionGet({name:"authorizationMethod",query:{redirect_uri:e||location.pathname+location.search+location.hash}})];case 1:return t=r.sent(),n=t.method,o=t.url,[2,{method:n,url:o}]}}))}))},redirectToAuth:function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.redirect(e,o.Zp.SELF)];case 1:return t.sent(),[2]}}))}))}})}},"020e4":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r,o=n("98bae");!function(e){e.MODAL="modal",e.REDIRECT="redirect"}(r||(r={}));var c=new(function(){function e(){}return e.prototype.register=function(e){var t=e.showAuthModal,n=e.getAuthMethodData,r=e.redirectToAuth;this.showAuthModal=t,this.getAuthMethodData=n,this.redirectToAuth=r},e.prototype.showModal=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return[2,this.showAuthForm(e)]}))}))},e.prototype.showAuthForm=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.getAuthMethodData(e)];case 1:return t=o.sent(),n=t.method,c=t.url,n!==r.REDIRECT?[3,3]:[4,this.redirectToAuth(c)];case 2:return o.sent(),[3,5];case 3:return[4,this.showAuthModal(c)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},e}())},f9824:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("98bae"),o=n("ff287"),c=n.n(o),d=n("d336c"),f=n.n(d),l=n("7157c"),v="perfomanceSessionId";function h(e){var t=e.store,n=e.$config;return(0,r.__awaiter)(this,void 0,Promise,(function(){var path,e,o,d,h,w,_,E,m,y,A,object,R,O,T,I;return(0,r.__generator)(this,(function(r){return n.get("isModern")&&(path=n.get("clientMetricsEndpoint"),e=new(f())(path),o=c()(t,"state.userToken",""),(d=localStorage.getItem(v))||(d=Math.random().toString(16).substring(2,16)+"-"+Math.random().toString(16).substring(2,16),localStorage.setItem(v,d)),h=c()(t,"state.browser.isMobile")?"MOBILE_WEB":"WEB",w=c()(t,"state.browser.isBot"),_=c()(t,"state.experimentsConfig.trackResources",!1),E=c()(t,"state.experimentsConfig.trackCdnImages",!1),m=function(){return{domainName:"ozon.ru",namespace:"bx",userToken:o,sessionId:d,platform:h,screenResolutionX:c()(window,"screen.width"),screenResolutionY:c()(window,"screen.height"),screenPixelDensity:c()(window,"devicePixelRatio"),userAgent:navigator.userAgent}},y=function(){return{clientId:c()(t,"state.userInfo.user.userId"),regionId:c()(t,"state.location.current.areaId")}},A=function(){return{current:c()(t,"state.pageInfo.pageType"),currentUrl:c()(t,"state.pageInfo.url"),spa:c()(t,"state.browser.useSpa"),layoutId:c()(t,"state.pageInfo.layoutId"),layoutVersion:c()(t,"state.pageInfo.layoutVersion"),inlineGallery:c()(t,"state.experimentsConfig.inlineGallery",!1),disableGalleryImage:c()(t,"state.experimentsConfig.disableGalleryImage",!1),referrer:document.referrer,isOutOfStockItem:c()(window,"isOutOfStockMode",!1),pageViewId:l.y.pageViewId}},object={type:"APPLICATION"},R={spaTransitionUrl:"composer-api.bx/page/json/v2",paginationUrl:"composer-api.bx/page/json/v2"},O=c()(t,"state.o3Params.x-o3-sitespeed-enable"),T=c()(t,"state.o3Params.x-o3-ui-tests"),I=c()(t,"state.o3Params.x-o3-client-metrics"),window.__ClientMetricsInit__={customMarksNames:["RENDER_TIME"],endpoint:e,getAttributes:m,object,getUser:y,getPage:A,isBot:w,trackJs:_||O||T||I,trackImages:_||O||T||I,trackCdnImages:E,settings:R,isSiteSpeed:O,isUiTests:T},c()(window,"__ClientMetrics__.init")&&window.__ClientMetrics__.init(window.__ClientMetricsInit__)),[2]}))}))}},f6423:()=>{"use strict";var e;"function"!=typeof(e=window.Element.prototype).matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var element=this,t=(element.document||element.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==element;)++n;return Boolean(t[n])}),"function"!=typeof e.closest&&(e.closest=function(e){for(var element=this;element&&1===element.nodeType;){if(element.matches(e))return element;element=element.parentNode}return null})},b0228:()=>{"use strict";function e(e,t){var n=document.createEvent("CustomEvent");return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e},ef97c:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("98bae"),o=n("ff287"),c=n.n(o),d=n("ee86b"),f=n("d8abf"),l=n("cdc08");const v=function(e){var t=e.$logger,n=e.store,o=e.$config,v=c()(n.state,"o3Params."+l.t);("true"===(0,d.ej)(l.t)||v)&&function(e,t){(0,r.__awaiter)(this,void 0,void 0,(function(){var n,o,c,d;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),n=t.get("devtoolHost"),[4,fetch("https://"+n+"/public/manifest.json",{method:"GET",cache:"no-cache"}).then((function(e){return e.json()}))];case 1:return(o=r.sent())&&o["cdt.js"]?(c="https://"+n+"/public/"+o["cdt.js"],[4,(0,f.mb)(c,!0).then((function(e){void 0===e&&(e=[]),e[0].parentNode&&e[0].parentNode.removeChild(e[0])}))]):[3,3];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:return d=r.sent(),e.log({level:"error",message:d.toString(),zone:"debug-toolbar"}),[3,5];case 5:return[2]}}))}))}(t,o)}},cd666:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("98bae"),o=n("ff287"),c=n.n(o),d=n("ee86b"),f=n("a1ea0"),l=n("ec5a1"),v=n("29b67");const h=function(e){var t=e.store,n=e.$logger;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,o,h,w,_,E,m,y,A,R,O,T,I;return(0,r.__generator)(this,(function(C){e=(0,d.ej)("ap_visited"),o=c()(t.state,"debug")||{},t.dispatch("userInfo/SET_ADULT_COOKIE",Boolean((0,d.ej)("ap_visited"))),e&&(h=location.hostname.split("."),(0,d.d8)({key:"ap_visited",value:e,options:{domain:"."+h.slice(-2).join(".")}})),w=c()(t,"state.client.trackingVersion","v2"),_=c()(t,"state.trackingPayloads",{}),v.Z.setVersion(w),v.Z.setTrackingPayloads(_),console.log("--DEBUG_INFO--",JSON.parse(JSON.stringify(o))),E=c()(t,"state.jsCookie")||[];try{try{for(m=(0,r.__values)(E),y=m.next();!y.done;y=m.next())A=y.value,R=(0,d.Qc)(A),(0,d.d8)(R)}catch(e){T={error:e}}finally{try{y&&!y.done&&(I=m.return)&&I.call(m)}finally{if(T)throw T.error}}}catch(e){(O=new f.H(l._.COOKIE_SET_ERROR)).setPayloadValue("exception",e),n.error(O)}return window.history&&(window.history.scrollRestoration="auto"),[2]}))}))}},a80de:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});function r(e){var t=e.store;"x-o3-ui-tests"in t.state.o3Params}},"08f77":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("98bae"),o=n("9b711"),c=n("1efdb");const d=function(e){var t=e.$logger,d=e.$config,f=e.store;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(l){switch(l.label){case 0:if(!c.u)return[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,c.ZA)(f.state,d,{to:window.location.pathname})];case 2:return l.sent()===c.OO.REGISTER&&window.onAppReady((function(){setTimeout((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,d,f,l,v;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=n("ec49d").Z,d=new e("/st/network-cache/service-worker.js",{scope:"/"}),f=window,l="$workbox",[4,d.register()];case 1:return f[l]=r.sent()||{},[3,3];case 2:return v=r.sent(),t.error({exception:v,message:o.ZP.SW.ERROR_REGISTERING_SW}),[3,3];case 3:return(0,c.tj)({action:"PURGE_SW_PAGINATOR_CACHE"}),[2]}}))}))}),1e3)})),[3,4];case 3:return e=l.sent(),t.error({exception:e,message:o.ZP.SW.ERROR_SW}),[3,4];case 4:return navigator.serviceWorker.onmessage=function(e){switch(e.data.action){case"REDIRECT":window.location.assign(e.data.href);break;case"RELOAD":window.location.reload();break;case"EXCEPTION":t.error({exception:e.data.exception,message:e.data.message||o.ZP.SW.ERROR_SW,zone:"sw"})}},[2]}}))}))}},"31f92":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,i:()=>d});var r="",o="";const c=function(e){r=e.$config.get("videoUploadWS"),o=e.$config.get("videoUploadXHR")};function d(){return{wsdUrl:r,requestUrl:o}}},"340e1":(e,t,n)=>{"use strict";var r;n.d(t,{Y2:()=>c,sL:()=>o,Nn:()=>d});var o,c=4;!function(e){e.COMMUNICATION="CHAT",e.LVS="LVS"}(o||(o={}));var d=((r={})[o.COMMUNICATION]={namespace:o.COMMUNICATION,url:"/v3/buyer"},r[o.LVS]={namespace:o.LVS,url:"?version=2"},r)},d2d1b:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("8d3e6"),o=n("e82d1");const c=new r.yU((0,o.i)())},e82d1:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v,i:()=>h});var r=n("98bae"),o=n("ff287"),c=n.n(o),d=n("340e1"),f={},l=!1;const v=function(e){var t=e.$config.get("chatNotificationWS");Object.keys(d.Nn).forEach((function(e){f[e]=(0,r.__assign)((0,r.__assign)({},d.Nn[e]),{url:t+d.Nn[e].url})})),l=c()(e.store,"state.browser.disableWebSocket",!1)};function h(){return{config:f,reconnectionAttempts:d.Y2,disableWebSocket:l,isInfiniteReconnect:!1}}},be8ee:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("98bae"),o=n("a4df2");const c=function(e,t){var n=e.store,c={add:function(e,t,n){var r=void 0===n?{}:n,o=r.once,c=r.before;this[e]||(this[e]=[]),this[e].push({once:o,before:c,callback:t})},remove:function(e,t){var n=this[e];if(n&&Array.isArray(n)){var r=n.findIndex((function(e){return e.callback===t}));r>=0&&n.splice(r,1)}}};n.subscribeAction({before:function(e){var t=e.type,n=(0,r.__rest)(e,["type"]);c[t]&&c[t].forEach((function(e){var r=e.once,o=e.callback;e.before&&(o(n),r&&c.remove(t,o))}))},after:function(e){var t=e.type,n=(0,r.__rest)(e,["type"]);c[t]&&c[t].forEach((function(e){var r=e.once,o=e.callback;e.before||(o(n),r&&c.remove(t,o))}))}});var d=function(e,t,n){void 0===n&&(n={});var r=Array.isArray(e)?e:[e];this instanceof o.default||console.warn("When plugin error: Context should be instance of Vue class"),r.forEach((function(e){"string"==typeof e&&c.add(e,t,n)}))};d.unsubscribe=function(e,t){(Array.isArray(e)?e:[e]).forEach((function(e){"string"==typeof e&&c.remove(e,t)}))},d.once=function(){}