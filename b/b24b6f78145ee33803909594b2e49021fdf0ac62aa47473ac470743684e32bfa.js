/*!
 * @preserve
 * espn-web-player-bundle v3.6.0
 * 2022-02-11T21:27:55.195Z
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DTCIVideoPlayer=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var o,n,r=function(e){return e&&e.Math==Math&&e},i=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a=function(e){try{return!!e()}catch(e){return!0}},s=!a((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),d=Function.prototype,l=d.apply,c=d.call,u="object"==typeof Reflect&&Reflect.apply||(s?c.bind(l):function(){return c.apply(l,arguments)}),p=Function.prototype,h=p.bind,m=p.call,y=s&&h.bind(m,m),f=s?function(e){return e&&y(e)}:function(e){return e&&function(){return m.apply(e,arguments)}},g=function(e){return"function"==typeof e},v=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b=Function.prototype.call,A=s?b.bind(b):function(){return b.apply(b,arguments)},E={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,S={f:T&&!E.call({1:2},1)?function(e){var t=T(this,e);return!!t&&t.enumerable}:E},w=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},P=f({}.toString),k=f("".slice),_=function(e){return k(P(e),8,-1)},C=i.Object,R=f("".split),I=a((function(){return!C("z").propertyIsEnumerable(0)}))?function(e){return"String"==_(e)?R(e,""):C(e)}:C,D=i.TypeError,N=function(e){if(null==e)throw D("Can't call method on "+e);return e},M=function(e){return I(N(e))},O=function(e){return"object"==typeof e?null!==e:g(e)},L={},F=function(e){return g(e)?e:void 0},B=function(e,t){return arguments.length<2?F(L[e])||F(i[e]):L[e]&&L[e][t]||i[e]&&i[e][t]},U=f({}.isPrototypeOf),V=B("navigator","userAgent")||"",x=i.process,j=i.Deno,z=x&&x.versions||j&&j.version,G=z&&z.v8;G&&(n=(o=G.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!n&&V&&(!(o=V.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=V.match(/Chrome\/(\d+)/))&&(n=+o[1]);var W,q=n,Y=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&q&&q<41})),H=Y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,K=i.Object,$=H?function(e){return"symbol"==typeof e}:function(e){var t=B("Symbol");return g(t)&&U(t.prototype,K(e))},X=i.String,Q=function(e){try{return X(e)}catch(e){return"Object"}},Z=i.TypeError,J=function(e){if(g(e))return e;throw Z(Q(e)+" is not a function")},ee=function(e,t){var o=e[t];return null==o?void 0:J(o)},te=i.TypeError,oe=Object.defineProperty,ne=i["__core-js_shared__"]||function(e,t){try{oe(i,e,{value:t,configurable:!0,writable:!0})}catch(o){i[e]=t}return t}("__core-js_shared__",{}),re=t((function(e){(e.exports=function(e,t){return ne[e]||(ne[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:"pure",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"})})),ie=i.Object,ae=function(e){return ie(N(e))},se=f({}.hasOwnProperty),de=Object.hasOwn||function(e,t){return se(ae(e),t)},le=0,ce=Math.random(),ue=f(1..toString),pe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ue(++le+ce,36)},he=re("wks"),me=i.Symbol,ye=me&&me.for,fe=H?me:me&&me.withoutSetter||pe,ge=function(e){if(!de(he,e)||!Y&&"string"!=typeof he[e]){var t="Symbol."+e;Y&&de(me,e)?he[e]=me[e]:he[e]=H&&ye?ye(t):fe(t)}return he[e]},ve=i.TypeError,be=ge("toPrimitive"),Ae=function(e,t){if(!O(e)||$(e))return e;var o,n=ee(e,be);if(n){if(void 0===t&&(t="default"),o=A(n,e,t),!O(o)||$(o))return o;throw ve("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var o,n;if("string"===t&&g(o=e.toString)&&!O(n=A(o,e)))return n;if(g(o=e.valueOf)&&!O(n=A(o,e)))return n;if("string"!==t&&g(o=e.toString)&&!O(n=A(o,e)))return n;throw te("Can't convert object to primitive value")}(e,t)},Ee=function(e){var t=Ae(e,"string");return $(t)?t:t+""},Te=i.document,Se=O(Te)&&O(Te.createElement),we=function(e){return Se?Te.createElement(e):{}},Pe=!v&&!a((function(){return 7!=Object.defineProperty(we("div"),"a",{get:function(){return 7}}).a})),ke=Object.getOwnPropertyDescriptor,_e={f:v?ke:function(e,t){if(e=M(e),t=Ee(t),Pe)try{return ke(e,t)}catch(e){}if(de(e,t))return w(!A(S.f,e,t),e[t])}},Ce=/#|\.prototype\./,Re=function(e,t){var o=De[Ie(e)];return o==Me||o!=Ne&&(g(t)?a(t):!!t)},Ie=Re.normalize=function(e){return String(e).replace(Ce,".").toLowerCase()},De=Re.data={},Ne=Re.NATIVE="N",Me=Re.POLYFILL="P",Oe=Re,Le=f(f.bind),Fe=function(e,t){return J(e),void 0===t?e:s?Le(e,t):function(){return e.apply(t,arguments)}},Be=v&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ue=i.String,Ve=i.TypeError,xe=function(e){if(O(e))return e;throw Ve(Ue(e)+" is not an object")},je=i.TypeError,ze=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,We={f:v?Be?function(e,t,o){if(xe(e),t=Ee(t),xe(o),"function"==typeof e&&"prototype"===t&&"value"in o&&"writable"in o&&!o.writable){var n=Ge(e,t);n&&n.writable&&(e[t]=o.value,o={configurable:"configurable"in o?o.configurable:n.configurable,enumerable:"enumerable"in o?o.enumerable:n.enumerable,writable:!1})}return ze(e,t,o)}:ze:function(e,t,o){if(xe(e),t=Ee(t),xe(o),Pe)try{return ze(e,t,o)}catch(e){}if("get"in o||"set"in o)throw je("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},qe=v?function(e,t,o){return We.f(e,t,w(1,o))}:function(e,t,o){return e[t]=o,e},Ye=_e.f,He=function(e){var t=function(o,n,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(o);case 2:return new e(o,n)}return new e(o,n,r)}return u(e,this,arguments)};return t.prototype=e.prototype,t},Ke=function(e,t){var o,n,r,a,s,d,l,c,u=e.target,p=e.global,h=e.stat,m=e.proto,y=p?i:h?i[u]:(i[u]||{}).prototype,v=p?L:L[u]||qe(L,u,{})[u],b=v.prototype;for(r in t)o=!Oe(p?r:u+(h?".":"#")+r,e.forced)&&y&&de(y,r),s=v[r],o&&(d=e.noTargetGet?(c=Ye(y,r))&&c.value:y[r]),a=o&&d?d:t[r],o&&typeof s==typeof a||(l=e.bind&&o?Fe(a,i):e.wrap&&o?He(a):m&&g(a)?f(a):a,(e.sham||a&&a.sham||s&&s.sham)&&qe(l,"sham",!0),qe(v,r,l),m&&(de(L,n=u+"Prototype")||qe(L,n,{}),qe(L[n],r,a),e.real&&b&&!b[r]&&qe(b,r,a)))},$e=re("keys"),Xe=function(e){return $e[e]||($e[e]=pe(e))},Qe=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ze=Xe("IE_PROTO"),Je=i.Object,et=Je.prototype,tt=Qe?Je.getPrototypeOf:function(e){var t=ae(e);if(de(t,Ze))return t[Ze];var o=t.constructor;return g(o)&&t instanceof o?o.prototype:t instanceof Je?et:null},ot=i.String,nt=i.TypeError,rt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=f(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),t=o instanceof Array}catch(e){}return function(o,n){return xe(o),function(e){if("object"==typeof e||g(e))return e;throw nt("Can't set "+ot(e)+" as a prototype")}(n),t?e(o,n):o.__proto__=n,o}}():void 0),it=Math.ceil,at=Math.floor,st=function(e){var t=+e;return t!=t||0===t?0:(t>0?at:it)(t)},dt=Math.max,lt=Math.min,ct=function(e,t){var o=st(e);return o<0?dt(o+t,0):lt(o,t)},ut=Math.min,pt=function(e){return(t=e.length)>0?ut(st(t),9007199254740991):0;var t},ht=function(e){return function(t,o,n){var r,i=M(t),a=pt(i),s=ct(n,a);if(e&&o!=o){for(;a>s;)if((r=i[s++])!=r)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===o)return e||s||0;return!e&&-1}},mt={includes:ht(!0),indexOf:ht(!1)},yt={},ft=mt.indexOf,gt=f([].push),vt=function(e,t){var o,n=M(e),r=0,i=[];for(o in n)!de(yt,o)&&de(n,o)&&gt(i,o);for(;t.length>r;)de(n,o=t[r++])&&(~ft(i,o)||gt(i,o));return i},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],At=bt.concat("length","prototype"),Et={f:Object.getOwnPropertyNames||function(e){return vt(e,At)}},Tt={f:Object.getOwnPropertySymbols},St=f([].concat),wt=B("Reflect","ownKeys")||function(e){var t=Et.f(xe(e)),o=Tt.f;return o?St(t,o(e)):t},Pt=Object.keys||function(e){return vt(e,bt)},kt={f:v&&!Be?Object.defineProperties:function(e,t){xe(e);for(var o,n=M(t),r=Pt(t),i=r.length,a=0;i>a;)We.f(e,o=r[a++],n[o]);return e}},_t=B("document","documentElement"),Ct=Xe("IE_PROTO"),Rt=function(){},It=function(e){return"<script>"+e+"<\/script>"},Dt=function(e){e.write(It("")),e.close();var t=e.parentWindow.Object;return e=null,t},Nt=function(){try{W=new ActiveXObject("htmlfile")}catch(e){}var e,t;Nt="undefined"!=typeof document?document.domain&&W?Dt(W):((t=we("iframe")).style.display="none",_t.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(It("document.F=Object")),e.close(),e.F):Dt(W);for(var o=bt.length;o--;)delete Nt.prototype[bt[o]];return Nt()};yt[Ct]=!0;var Mt=Object.create||function(e,t){var o;return null!==e?(Rt.prototype=xe(e),o=new Rt,Rt.prototype=null,o[Ct]=e):o=Nt(),void 0===t?o:kt.f(o,t)},Ot=f("".replace),Lt=String(Error("zxcasd").stack),Ft=/\n\s*at [^:]*:[^\n]*/,Bt=Ft.test(Lt),Ut=function(e,t){if(Bt&&"string"==typeof e)for(;t--;)e=Ot(e,Ft,"");return e},Vt=function(e,t){O(t)&&"cause"in t&&qe(e,"cause",t.cause)},xt={},jt=ge("iterator"),zt=Array.prototype,Gt={};Gt[ge("toStringTag")]="z";var Wt="[object z]"===String(Gt),qt=ge("toStringTag"),Yt=i.Object,Ht="Arguments"==_(function(){return arguments}()),Kt=Wt?_:function(e){var t,o,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Yt(e),qt))?o:Ht?_(t):"Object"==(n=_(t))&&g(t.callee)?"Arguments":n},$t=ge("iterator"),Xt=function(e){if(null!=e)return ee(e,$t)||ee(e,"@@iterator")||xt[Kt(e)]},Qt=i.TypeError,Zt=function(e,t,o){var n,r;xe(e);try{if(!(n=ee(e,"return"))){if("throw"===t)throw o;return o}n=A(n,e)}catch(e){r=!0,n=e}if("throw"===t)throw o;if(r)throw n;return xe(n),o},Jt=i.TypeError,eo=function(e,t){this.stopped=e,this.result=t},to=eo.prototype,oo=function(e,t,o){var n,r,i,a,s,d,l,c=o&&o.that,u=!(!o||!o.AS_ENTRIES),p=!(!o||!o.IS_ITERATOR),h=!(!o||!o.INTERRUPTED),m=Fe(t,c),y=function(e){return n&&Zt(n,"normal",e),new eo(!0,e)},f=function(e){return u?(xe(e),h?m(e[0],e[1],y):m(e[0],e[1])):h?m(e,y):m(e)};if(p)n=e;else{if(!(r=Xt(e)))throw Jt(Q(e)+" is not iterable");if(function(e){return void 0!==e&&(xt.Array===e||zt[jt]===e)}(r)){for(i=0,a=pt(e);a>i;i++)if((s=f(e[i]))&&U(to,s))return s;return new eo(!1)}n=function(e,t){var o=arguments.length<2?Xt(e):t;if(J(o))return xe(A(o,e));throw Qt(Q(e)+" is not iterable")}(e,r)}for(d=n.next;!(l=A(d,n)).done;){try{s=f(l.value)}catch(e){Zt(n,"throw",e)}if("object"==typeof s&&s&&U(to,s))return s}return new eo(!1)},no=i.String,ro=function(e){if("Symbol"===Kt(e))throw TypeError("Cannot convert a Symbol value to a string");return no(e)},io=function(e,t){return void 0===e?arguments.length<2?"":t:ro(e)},ao=!a((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",w(1,7)),7!==e.stack)})),so=ge("toStringTag"),lo=i.Error,co=[].push,uo=function(e,t){var o,n=arguments.length>2?arguments[2]:void 0,r=U(po,this);rt?o=rt(new lo,r?tt(this):po):(o=r?this:Mt(po),qe(o,so,"Error")),void 0!==t&&qe(o,"message",io(t)),ao&&qe(o,"stack",Ut(o.stack,1)),Vt(o,n);var i=[];return oo(e,co,{that:i}),qe(o,"errors",i),o};rt?rt(uo,lo):function(e,t,o){for(var n=wt(t),r=We.f,i=_e.f,a=0;a<n.length;a++){var s=n[a];de(e,s)||o&&de(o,s)||r(e,s,i(t,s))}}(uo,lo,{name:!0});var po=uo.prototype=Mt(lo.prototype,{constructor:w(1,uo),message:w(1,""),name:w(1,"AggregateError")});Ke({global:!0},{AggregateError:uo});var ho=f(Function.toString);g(ne.inspectSource)||(ne.inspectSource=function(e){return ho(e)});var mo,yo,fo,go=ne.inspectSource,vo=i.WeakMap,bo=g(vo)&&/native code/.test(go(vo)),Ao=i.TypeError,Eo=i.WeakMap;if(bo||ne.state){var To=ne.state||(ne.state=new Eo),So=f(To.get),wo=f(To.has),Po=f(To.set);mo=function(e,t){if(wo(To,e))throw new Ao("Object already initialized");return t.facade=e,Po(To,e,t),t},yo=function(e){return So(To,e)||{}},fo=function(e){return wo(To,e)}}else{var ko=Xe("state");yt[ko]=!0,mo=function(e,t){if(de(e,ko))throw new Ao("Object already initialized");return t.facade=e,qe(e,ko,t),t},yo=function(e){return de(e,ko)?e[ko]:{}},fo=function(e){return de(e,ko)}}var _o,Co,Ro,Io={set:mo,get:yo,has:fo,enforce:function(e){return fo(e)?yo(e):mo(e,{})},getterFor:function(e){return function(t){var o;if(!O(t)||(o=yo(t)).type!==e)throw Ao("Incompatible receiver, "+e+" required");return o}}},Do=Function.prototype,No=v&&Object.getOwnPropertyDescriptor,Mo=de(Do,"name"),Oo={EXISTS:Mo,PROPER:Mo&&"something"===function(){}.name,CONFIGURABLE:Mo&&(!v||v&&No(Do,"name").configurable)},Lo=function(e,t,o,n){n&&n.enumerable?e[t]=o:qe(e,t,o)},Fo=ge("iterator"),Bo=!1;[].keys&&("next"in(Ro=[].keys())?(Co=tt(tt(Ro)))!==Object.prototype&&(_o=Co):Bo=!0);var Uo=null==_o||a((function(){var e={};return _o[Fo].call(e)!==e}));_o=Uo?{}:Mt(_o),g(_o[Fo])||Lo(_o,Fo,(function(){return this}));var Vo={IteratorPrototype:_o,BUGGY_SAFARI_ITERATORS:Bo},xo=Wt?{}.toString:function(){return"[object "+Kt(this)+"]"},jo=We.f,zo=ge("toStringTag"),Go=function(e,t,o,n){if(e){var r=o?e:e.prototype;de(r,zo)||jo(r,zo,{configurable:!0,value:t}),n&&!Wt&&qe(r,"toString",xo)}},Wo=Vo.IteratorPrototype,qo=function(){return this},Yo=Oo.PROPER,Ho=Vo.BUGGY_SAFARI_ITERATORS,Ko=ge("iterator"),$o=function(){return this},Xo=function(e,t,o,n,r,i,a){!function(e,t,o,n){var r=t+" Iterator";e.prototype=Mt(Wo,{next:w(+!n,o)}),Go(e,r,!1,!0),xt[r]=qo}(o,t,n);var s,d,l,c=function(e){if(e===r&&y)return y;if(!Ho&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new o(this,e)}}return function(){return new o(this)}},u=t+" Iterator",p=!1,h=e.prototype,m=h[Ko]||h["@@iterator"]||r&&h[r],y=!Ho&&m||c(r),f="Array"==t&&h.entries||m;if(f&&(s=tt(f.call(new e)))!==Object.prototype&&s.next&&(Go(s,u,!0,!0),xt[u]=$o),Yo&&"values"==r&&m&&"values"!==m.name&&(p=!0,y=function(){return A(m,this)}),r)if(d={values:c("values"),keys:i?y:c("keys"),entries:c("entries")},a)for(l in d)(Ho||p||!(l in h))&&Lo(h,l,d[l]);else Ke({target:t,proto:!0,forced:Ho||p},d);return a&&h[Ko]!==y&&Lo(h,Ko,y,{name:r}),xt[t]=y,d};We.f;var Qo=Io.set,Zo=Io.getterFor("Array Iterator");Xo(Array,"Array",(function(e,t){Qo(this,{type:"Array Iterator",target:M(e),index:0,kind:t})}),(function(){var e=Zo(this),t=e.target,o=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:n,done:!1}:"values"==o?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),xt.Arguments=xt.Array;var Jo=i.Promise,en=ge("species"),tn=i.TypeError,on=ge("iterator"),nn=!1;try{var rn=0,an={next:function(){return{done:!!rn++}},return:function(){nn=!0}};an[on]=function(){return this},Array.from(an,(function(){throw 2}))}catch(e){}var sn=function(){},dn=[],ln=B("Reflect","construct"),cn=/^\s*(?:class|function)\b/,un=f(cn.exec),pn=!cn.exec(sn),hn=function(e){if(!g(e))return!1;try{return ln(sn,dn,e),!0}catch(e){return!1}},mn=function(e){if(!g(e))return!1;switch(Kt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return pn||!!un(cn,go(e))}catch(e){return!0}};mn.sham=!0;var yn,fn,gn,vn,bn=!ln||a((function(){var e;return hn(hn.call)||!hn(Object)||!hn((function(){e=!0}))||e}))?mn:hn,An=i.TypeError,En=ge("species"),Tn=function(e,t){var o,n=xe(e).constructor;return void 0===n||null==(o=xe(n)[En])?t:function(e){if(bn(e))return e;throw An(Q(e)+" is not a constructor")}(o)},Sn=f([].slice),wn=i.TypeError,Pn=function(e,t){if(e<t)throw wn("Not enough arguments");return e},kn=/(?:ipad|iphone|ipod).*applewebkit/i.test(V),_n="process"==_(i.process),Cn=i.setImmediate,Rn=i.clearImmediate,In=i.process,Dn=i.Dispatch,Nn=i.Function,Mn=i.MessageChannel,On=i.String,Ln=0,Fn={};try{yn=i.location}catch(e){}var Bn=function(e){if(de(Fn,e)){var t=Fn[e];delete Fn[e],t()}},Un=function(e){return function(){Bn(e)}},Vn=function(e){Bn(e.data)},xn=function(e){i.postMessage(On(e),yn.protocol+"//"+yn.host)};Cn&&Rn||(Cn=function(e){Pn(arguments.length,1);var t=g(e)?e:Nn(e),o=Sn(arguments,1);return Fn[++Ln]=function(){u(t,void 0,o)},fn(Ln),Ln},Rn=function(e){delete Fn[e]},_n?fn=function(e){In.nextTick(Un(e))}:Dn&&Dn.now?fn=function(e){Dn.now(Un(e))}:Mn&&!kn?(vn=(gn=new Mn).port2,gn.port1.onmessage=Vn,fn=Fe(vn.postMessage,vn)):i.addEventListener&&g(i.postMessage)&&!i.importScripts&&yn&&"file:"!==yn.protocol&&!a(xn)?(fn=xn,i.addEventListener("message",Vn,!1)):fn="onreadystatechange"in we("script")?function(e){_t.appendChild(we("script")).onreadystatechange=function(){_t.removeChild(this),Bn(e)}}:function(e){setTimeout(Un(e),0)});var jn,zn,Gn,Wn,qn,Yn,Hn,Kn,$n={set:Cn,clear:Rn},Xn=/ipad|iphone|ipod/i.test(V)&&void 0!==i.Pebble,Qn=/web0s(?!.*chrome)/i.test(V),Zn=_e.f,Jn=$n.set,er=i.MutationObserver||i.WebKitMutationObserver,tr=i.document,or=i.process,nr=i.Promise,rr=Zn(i,"queueMicrotask"),ir=rr&&rr.value;ir||(jn=function(){var e,t;for(_n&&(e=or.domain)&&e.exit();zn;){t=zn.fn,zn=zn.next;try{t()}catch(e){throw zn?Wn():Gn=void 0,e}}Gn=void 0,e&&e.enter()},kn||_n||Qn||!er||!tr?!Xn&&nr&&nr.resolve?((Hn=nr.resolve(void 0)).constructor=nr,Kn=Fe(Hn.then,Hn),Wn=function(){Kn(jn)}):_n?Wn=function(){or.nextTick(jn)}:(Jn=Fe(Jn,i),Wn=function(){Jn(jn)}):(qn=!0,Yn=tr.createTextNode(""),new er(jn).observe(Yn,{characterData:!0}),Wn=function(){Yn.data=qn=!qn}));var ar=ir||function(e){var t={fn:e,next:void 0};Gn&&(Gn.next=t),zn||(zn=t,Wn()),Gn=t},sr=function(e){var t,o;this.promise=new e((function(e,n){if(void 0!==t||void 0!==o)throw TypeError("Bad Promise constructor");t=e,o=n})),this.resolve=J(t),this.reject=J(o)},dr={f:function(e){return new sr(e)}},lr=function(e,t){if(xe(e),O(t)&&t.constructor===e)return t;var o=dr.f(e);return(0,o.resolve)(t),o.promise},cr=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ur=function(){this.head=null,this.tail=null};ur.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var pr,hr,mr,yr=ur,fr="object"==typeof window,gr=$n.set,vr=ge("species"),br="Promise",Ar=Io.getterFor(br),Er=Io.set,Tr=Io.getterFor(br),Sr=Jo&&Jo.prototype,wr=Jo,Pr=Sr,kr=i.TypeError,_r=i.document,Cr=i.process,Rr=dr.f,Ir=Rr,Dr=!!(_r&&_r.createEvent&&i.dispatchEvent),Nr=g(i.PromiseRejectionEvent),Mr=Oe(br,(function(){var e=go(wr),t=e!==String(wr);if(!t&&66===q)return!0;if(!Pr.finally)return!0;if(q>=51&&/native code/.test(e))return!1;var o=new wr((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(o.constructor={})[vr]=n,!(o.then((function(){}))instanceof n)||!t&&fr&&!Nr})),Or=Mr||!function(e,t){if(!t&&!nn)return!1;var o=!1;try{var n={};n[on]=function(){return{next:function(){return{done:o=!0}}}},e(n)}catch(e){}return o}((function(e){wr.all(e).catch((function(){}))})),Lr=function(e){var t;return!(!O(e)||!g(t=e.then))&&t},Fr=function(e,t){var o,n,r,i=t.value,a=1==t.state,s=a?e.ok:e.fail,d=e.resolve,l=e.reject,c=e.domain;try{s?(a||(2===t.rejection&&jr(t),t.rejection=1),!0===s?o=i:(c&&c.enter(),o=s(i),c&&(c.exit(),r=!0)),o===e.promise?l(kr("Promise-chain cycle")):(n=Lr(o))?A(n,o,d,l):d(o)):l(i)}catch(e){c&&!r&&c.exit(),l(e)}},Br=function(e,t){e.notified||(e.notified=!0,ar((function(){for(var o,n=e.reactions;o=n.get();)Fr(o,e);e.notified=!1,t&&!e.rejection&&Vr(e)})))},Ur=function(e,t,o){var n,r;Dr?((n=_r.createEvent("Event")).promise=t,n.reason=o,n.initEvent(e,!1,!0),i.dispatchEvent(n)):n={promise:t,reason:o},!Nr&&(r=i["on"+e])?r(n):"unhandledrejection"===e&&function(e,t){var o=i.console;o&&o.error&&(1==arguments.length?o.error(e):o.error(e,t))}("Unhandled promise rejection",o)},Vr=function(e){A(gr,i,(function(){var t,o=e.facade,n=e.value;if(xr(e)&&(t=cr((function(){_n?Cr.emit("unhandledRejection",n,o):Ur("unhandledrejection",o,n)})),e.rejection=_n||xr(e)?2:1,t.error))throw t.value}))},xr=function(e){return 1!==e.rejection&&!e.parent},jr=function(e){A(gr,i,(function(){var t=e.facade;_n?Cr.emit("rejectionHandled",t):Ur("rejectionhandled",t,e.value)}))},zr=function(e,t,o){return function(n){e(t,n,o)}},Gr=function(e,t,o){e.done||(e.done=!0,o&&(e=o),e.value=t,e.state=2,Br(e,!0))},Wr=function(e,t,o){if(!e.done){e.done=!0,o&&(e=o);try{if(e.facade===t)throw kr("Promise can't be resolved itself");var n=Lr(t);n?ar((function(){var o={done:!1};try{A(n,t,zr(Wr,o,e),zr(Gr,o,e))}catch(t){Gr(o,t,e)}})):(e.value=t,e.state=1,Br(e,!1))}catch(t){Gr({done:!1},t,e)}}};Mr&&(Pr=(wr=function(e){!function(e,t){if(U(t,e))return e;throw tn("Incorrect invocation")}(this,Pr),J(e),A(pr,this);var t=Ar(this);try{e(zr(Wr,t),zr(Gr,t))}catch(e){Gr(t,e)}}).prototype,(pr=function(e){Er(this,{type:br,done:!1,notified:!1,parent:!1,reactions:new yr,rejection:!1,state:0,value:void 0})}).prototype=function(e,t,o){for(var n in t)o&&o.unsafe&&e[n]?e[n]=t[n]:Lo(e,n,t[n],o);return e}(Pr,{then:function(e,t){var o=Tr(this),n=Rr(Tn(this,wr));return o.parent=!0,n.ok=!g(e)||e,n.fail=g(t)&&t,n.domain=_n?Cr.domain:void 0,0==o.state?o.reactions.add(n):ar((function(){Fr(n,o)})),n.promise},catch:function(e){return this.then(void 0,e)}}),hr=function(){var e=new pr,t=Ar(e);this.promise=e,this.resolve=zr(Wr,t),this.reject=zr(Gr,t)},dr.f=Rr=function(e){return e===wr||e===mr?new hr(e):Ir(e)}),Ke({global:!0,wrap:!0,forced:Mr},{Promise:wr}),Go(wr,br,!1,!0),function(e){var t=B(e),o=We.f;v&&t&&!t[en]&&o(t,en,{configurable:!0,get:function(){return this}})}(br),mr=B(br),Ke({target:br,stat:!0,forced:Mr},{reject:function(e){var t=Rr(this);return A(t.reject,void 0,e),t.promise}}),Ke({target:br,stat:!0,forced:!0},{resolve:function(e){return lr(this===mr?wr:this,e)}}),Ke({target:br,stat:!0,forced:Or},{all:function(e){var t=this,o=Rr(t),n=o.resolve,r=o.reject,i=cr((function(){var o=J(t.resolve),i=[],a=0,s=1;oo(e,(function(e){var d=a++,l=!1;s++,A(o,t,e).then((function(e){l||(l=!0,i[d]=e,--s||n(i))}),r)})),--s||n(i)}));return i.error&&r(i.value),o.promise},race:function(e){var t=this,o=Rr(t),n=o.reject,r=cr((function(){var r=J(t.resolve);oo(e,(function(e){A(r,t,e).then(o.resolve,n)}))}));return r.error&&n(r.value),o.promise}}),Ke({target:"Promise",stat:!0},{allSettled:function(e){var t=this,o=dr.f(t),n=o.resolve,r=o.reject,i=cr((function(){var o=J(t.resolve),r=[],i=0,a=1;oo(e,(function(e){var s=i++,d=!1;a++,A(o,t,e).then((function(e){d||(d=!0,r[s]={status:"fulfilled",value:e},--a||n(r))}),(function(e){d||(d=!0,r[s]={status:"rejected",reason:e},--a||n(r))}))})),--a||n(r)}));return i.error&&r(i.value),o.promise}});Ke({target:"Promise",stat:!0},{any:function(e){var t=this,o=B("AggregateError"),n=dr.f(t),r=n.resolve,i=n.reject,a=cr((function(){var n=J(t.resolve),a=[],s=0,d=1,l=!1;oo(e,(function(e){var c=s++,u=!1;d++,A(n,t,e).then((function(e){u||l||(l=!0,r(e))}),(function(e){u||l||(u=!0,a[c]=e,--d||i(new o(a,"No one promise resolved")))}))})),--d||i(new o(a,"No one promise resolved"))}));return a.error&&i(a.value),n.promise}});var qr=!!Jo&&a((function(){Jo.prototype.finally.call({then:function(){}},(function(){}))}));Ke({target:"Promise",proto:!0,real:!0,forced:qr},{finally:function(e){var t=Tn(this,B("Promise")),o=g(e);return this.then(o?function(o){return lr(t,e()).then((function(){return o}))}:e,o?function(o){return lr(t,e()).then((function(){throw o}))}:e)}});var Yr=f("".charAt),Hr=f("".charCodeAt),Kr=f("".slice),$r=function(e){return function(t,o){var n,r,i=ro(N(t)),a=st(o),s=i.length;return a<0||a>=s?e?"":void 0:(n=Hr(i,a))<55296||n>56319||a+1===s||(r=Hr(i,a+1))<56320||r>57343?e?Yr(i,a):n:e?Kr(i,a,a+2):r-56320+(n-55296<<10)+65536}},Xr={codeAt:$r(!1),charAt:$r(!0)}.charAt,Qr=Io.set,Zr=Io.getterFor("String Iterator");Xo(String,"String",(function(e){Qr(this,{type:"String Iterator",string:ro(e),index:0})}),(function(){var e,t=Zr(this),o=t.string,n=t.index;return n>=o.length?{value:void 0,done:!0}:(e=Xr(o,n),t.index+=e.length,{value:e,done:!1})}));var Jr=L.Promise,ei=ge("toStringTag");for(var ti in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var oi=i[ti],ni=oi&&oi.prototype;ni&&Kt(ni)!==ei&&qe(ni,ei,ti),xt[ti]=xt.Array}var ri,ii,ai,si,di,li,ci=Jr;class ui{constructor(){this.interceptors={},this.listeners={}}addEventListener(e,t){const o=this.listeners[e]||[];return o.push(t),this.listeners[e]=o,this}removeEventListener(e,t){return this.listeners[e]=(this.listeners[e]||[]).filter(e=>e!==t),this}addEventInterceptor(e,t){return this.interceptors[e]=t,this}removeEventInterceptor(e){return delete this.interceptors[e],this}coordinate(e,t){const o=this.interceptors[e]||(()=>Promise.resolve(t)),n=this.listeners[e]||[];return Promise.resolve().then(()=>o.call(null,t)).then(e=>(n.forEach(t=>{t.call(null,e)}),e))}}function pi(e){switch(e){case ri.abc:return"001";case ri.freeform:return"002";case ri.abcNews:return"003";case ri.disney:return"004";case ri.disneyJr:return"008";case ri.disneyXD:return"009";case ri.disneyNow:return"011";case ri.oscar:return"005";case ri.fxNow:return"025";case ri.fx:return"020";case ri.fxm:return"022";case ri.fxx:return"021";case ri.natGeoTV:return"026";case ri.natGeo:return"023";case ri.natGeoWild:return"024";case ri.fast:return"200";case ri.unknown:return ri.unknown}}function hi(e){switch(e){case ri.abc:return"ABC";case ri.freeform:return"ABCFamily";case ri.abcNews:return"ABC";case ri.disney:return"Disney";case ri.disneyJr:return"DisneyJunior";case ri.disneyXD:return"DisneyXD";case ri.disneyNow:return"DisneyNow";case ri.oscar:return"ABC";case ri.fxNow:return"fxNow";case ri.fx:return"fx";case ri.fxm:return"fxm";case ri.fxx:return"fxx";case ri.natGeoTV:return"ngtv";case ri.natGeo:return"ngc";case ri.natGeoWild:return"ngw";case ri.fast:return"fast";case ri.unknown:return ri.unknown}}function mi(e){switch(e){case"abc":case"001":return ri.abc;case"abcf":case"002":case"abcfamily":case"ff":case"ABCFamily":return ri.freeform;case"abcn":case"003":case"abcnews":return ri.abcNews;case"dch":case"dc":case"dis":case"004":case"disney":return ri.disney;case"djr":case"008":case"disneyjunior":return ri.disneyJr;case"dxd":case"009":case"disneyxd":return ri.disneyXD;case"005":case"oscar":return ri.oscar;case"dnow":case"011":case"disneynow":case"dnw":case"Dnow":return ri.disneyNow;case"fx":case"020":case"FX":return ri.fx;case"fxm":case"022":case"FXM":return ri.fxm;case"fxx":case"021":case"FXX":return ri.fxx;case"fxnow":case"025":case"FXnow":case"FXNow":return ri.fxNow;case"natgeo":case"023":case"NatGeo":case"ngc":return ri.natGeo;case"natgeowild":case"024":case"NatGeoWild":case"ngw":return ri.natGeoWild;case"natgeotv":case"026":case"NatGeoTV":return ri.natGeoTV;case"fast":case"200":return ri.fast;default:return ri.unknown}}!function(e){e.abc="abc",e.abcNews="abcnews",e.abcNewsLive="abcnewslive",e.abcOtv="abcotv",e.cricinfo="cricinfo",e.disney="dch",e.disneyJr="djr",e.disneyXD="dxd",e.disneyNow="dnow",e.espn="espn",e.espnFantasy="espnFantasy",e.fiveThirtyEight="fivethirtyeight",e.foxLatam="foxlatam",e.freeform="ff",e.fxNow="fxnow",e.fx="fx",e.fxm="fxm",e.fxx="fxx",e.oscar="oscar",e.marvel="marvel",e.natGeoTV="ngtv",e.natGeo="ngc",e.natGeoWild="ngw",e.natgeoBrasil="natgeobrasil",e.theUndefeated="theundefeated",e.fast="fast",e.unknown="000"}(ri||(ri={}));class yi extends Error{constructor(e){super(e.message),this.config_=e}get code(){return`${this.config_.platform}-${this.config_.segment}-${this.config_.reason} ${this.config_.component}-${this.config_.feature}-${this.config_.errorCode}`}get cause(){return this.config_.cause}get reason(){return this.config_.reason}}!function(e){e[e.NONE=-1]="NONE",e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG"}(ii||(ii={})),function(e){e[e.FAILURE=0]="FAILURE",e[e.WARNING=1]="WARNING"}(ai||(ai={})),function(e){e.ANDROID="A",e.APPLE="I",e.JAVASCRIPT="J"}(si||(si={})),function(e){e.PLAYER_CORE="PE",e.PLAYER_UI="PUI"}(di||(di={})),function(e){e.UNEXPECTED_ERROR="0",e.IDENTITY_REQUIRED="1",e.AUTHENTICATION_REQUIRED="2",e.NOT_ENTITLED="3",e.CONCURRENCY_LIMIT_REACHED="4",e.PARENTAL_RESTRICTIONS="5",e.GEO_LOCATION_REQUIRED="6",e.GEO_LOCATION_ACQUISITION_ERROR="7",e.GEO_LOCATION_NOT_ALLOWED="8",e.INVALID_MEDIA="9",e.MEDIA_UNAVAILABLE="10",e.TEMPORARY_UNAVAILABLE="11",e.NETWORK_CONNECTION="12",e.UNSUPPORTED_DRM="13",e.REQUIRES_LBS="14",e.PLAYREADY_LICENSE_FAILED="15",e.DAMAGED_MEDIA_DATA="16"}(li||(li={}));const fi={[li.UNEXPECTED_ERROR]:"unexpectedError",[li.IDENTITY_REQUIRED]:"identityRequired",[li.AUTHENTICATION_REQUIRED]:"authenticationRequired",[li.NOT_ENTITLED]:"notEntitled",[li.CONCURRENCY_LIMIT_REACHED]:"concurrencyLimitReached",[li.PARENTAL_RESTRICTIONS]:"parentalRestrictions",[li.GEO_LOCATION_REQUIRED]:"geoLocationRequired",[li.GEO_LOCATION_ACQUISITION_ERROR]:"geoLocationAcquisitionError",[li.GEO_LOCATION_NOT_ALLOWED]:"geoLocationNotAllowed",[li.INVALID_MEDIA]:"invalidMedia",[li.MEDIA_UNAVAILABLE]:"mediaUnavailable",[li.TEMPORARY_UNAVAILABLE]:"temporarilyUnavailable",[li.NETWORK_CONNECTION]:"networkConnection",[li.UNSUPPORTED_DRM]:"unsupportedDRM",[li.REQUIRES_LBS]:"requiresLbs",[li.PLAYREADY_LICENSE_FAILED]:"playreadyLicenseFailed",[li.DAMAGED_MEDIA_DATA]:"damagedMediaData"};var gi,vi,bi;!function(e){e.MEDIA_ITEM="MI",e.PLAYBACK_ACCESS="PA",e.PLAYBACK_SESSION="PS",e.MEDIA_PLAYER="MP",e.PLAYER_PLUGIN="PL"}(gi||(gi={})),function(e){e.PLAYBACK_CFA="CFA",e.GRAPH_QL="GQL",e.ENTERTAINMENT="ENT",e.PLAYBACK_ACCESS_MANAGER="PAM",e.ADOBE_PASS="AP",e.ISP="ISP",e.TVE="TVE",e.BAM="BAM",e.PLAYER_ADAPTER_BUNDLE="PAB",e.DIGITAL_RIGHTS_MANAGEMENT="DRM",e.SHIELD="SHD",e.ENTITLEMENT="ENTL",e.CONCURRENCY_MONITORING="CM",e.END_CARD_UI="ECU"}(vi||(vi={})),function(e){e.BAD_REQUEST="400",e.UNAUTHORIZED="401",e.FORBIDDEN="403",e.NOT_FOUND="404",e.METHOD_NOT_ALLOWED="405",e.NOT_ACCEPTABLE="406",e.TIMEOUT="408",e.CONFLICT="409",e.GONE="410",e.LENGTH_REQUIRED="411",e.PRECONDITION_FAILED="412",e.ENTITY_TOO_LARGE="413",e.URI_TOO_LONG="414",e.UNSUPPORTED_MEDIA_TYPE="415",e.RANGE_NOT_SATISFIABLE="416",e.EXPECTATION_FAILED="417",e.INTERNAL_SERVER_ERROR="500",e.NOT_IMPLEMENTED="501",e.BAD_GATEWAY="502",e.SERVICE_UNAVAILABLE="503",e.GATEWAY_TIMEOUT="504",e.HTTP_VERSION_NOT_SUPPORTED="505",e.EMBARGOED_CONTENT="100",e.EXPIRED_CONTENT="101",e.INVALID_RESPONSE="102",e.INVALID_DEVICE="103",e.UNSUPPORTED_SESSION="104",e.GEOLOCATION_NOT_ALLOWED="105",e.PROXY_NOT_ALLOWED="106",e.REFERRER_NOT_ALLOWED="107",e.INVALID_DATA_PROVIDED="108",e.SHIELD_DRM_REQUIRED="109",e.PLAYER_BUNDLE_FAILED_TO_LOAD="700",e.PLAYER_NOT_READY="701",e.PLAYER_CAN_NOT_BE_DISPOSED="702",e.PLAYER_CAN_NOT_PLAY_PAUSE="703",e.PLAYER_SHAKA_ERROR="704",e.PLAYER_NO_VIDEO_TAG="705",e.PLAYER_NO_CORE_FOUND="706",e.PLAYER_MEDIA_ERR_CUSTOM="708",e.PLAYER_MEDIA_ERR_ABORTED="709",e.PLAYER_MEDIA_ERR_NETWORK="710",e.PLAYER_MEDIA_ERR_DECODE="711",e.PLAYER_MEDIA_ERR_SRC_NOT_SUPPORTED="712",e.PLAYER_MEDIA_ERR_ENCRYPTED="713",e.PLAYER_UNKNOWN="003",e.ADS_PROVIDER_ERR="801",e.ADS_FAILED_TO_LOAD="802",e.SHAKA_PLAYER_DRM_ERROR="715",e.PLAYREADY_LICENSE_FAILED="718",e.PLAYER_BUNDLE_FAILED_TO_CREATE="719",e.AD_ONLY_FAILED="720",e.PLAYER_CONFIGURATION_ERR="721",e.PLAYER_ANALYTIC_INIT_ERR="722",e.CONCURRENCY_LIMIT_REACHED="707",e.PLAYER_PROGRAM_CHANGE_FAILED="728",e.TEXT_DECODER_ABSENT="723",e.AUDIO_CONTEXT_ABSENT="724",e.TEXT_DECODING_FAILED="725",e.STYLE_SETUP_FAILED="726",e.SOCIAL_COPY_FAILED="727",e.GEOLOCATION_PROXY="200x",e.DISTRIBUTOR_REQUEST_FAILED="201x",e.MEDIA_ITEM_MISSING="200",e.END_CARD_ERR="201",e.PLUTO_REQUEST_FAILED="302",e.SHIELD_REQUEST_FAILED="202",e.GQL_REQUEST_FAILED="600",e.UNKNOWN="000",e.NO_INTERNET="001"}(bi||(bi={}));var Ai=new class{constructor(e){this.logLevel_=ii.DEBUG,this.logLevel_=e}set logLevel(e){this.logLevel_=e}get logLevel(){return this.logLevel_}error(...e){this.logLevel_>=ii.ERROR&&console.error(...e)}warn(...e){this.logLevel_>=ii.WARN&&console.warn(...e)}info(...e){this.logLevel_>=ii.INFO&&console.info(...e)}debug(...e){this.logLevel_>=ii.DEBUG&&console.debug(...e)}}(ii.DEBUG);var Ei,Ti,Si,wi,Pi=new class{constructor(){this.platform_=si.JAVASCRIPT}set logLevel(e){Ai.logLevel=e}get logLevel(){return Ai.logLevel}set eventCoordinator(e){this.coordinator_=e}get eventCoordinator(){return this.coordinator_}unexpectedError(e){return e.reason=li.UNEXPECTED_ERROR,e.caller||(e.caller="unexpectedError"),this.generateEvent(e)}identityRequired(e){return e.reason=li.IDENTITY_REQUIRED,e.caller||(e.caller="identityRequired"),this.generateEvent(e)}authenticationRequired(e){return e.reason=li.AUTHENTICATION_REQUIRED,e.caller||(e.caller="authenticationRequired"),this.generateEvent(e)}notEntitled(e){return e.reason=li.NOT_ENTITLED,e.caller||(e.caller="notEntitled"),this.generateEvent(e)}concurrencyLimitReached(e){return e.reason=li.CONCURRENCY_LIMIT_REACHED,e.caller||(e.caller="concurrencyLimitReached"),this.generateEvent(e)}parentalRestrictions(e){return e.reason=li.PARENTAL_RESTRICTIONS,e.caller||(e.caller="parentalRestrictions"),this.generateEvent(e)}geoLocationRequired(e){return e.reason=li.GEO_LOCATION_REQUIRED,e.caller||(e.caller="geoLocationRequired"),this.generateEvent(e)}geoLocationAcquisitionError(e){return e.reason=li.GEO_LOCATION_ACQUISITION_ERROR,e.caller||(e.caller="geoLocationAcquisitionError"),this.generateEvent(e)}geoLocationNotAllowed(e){return e.reason=li.GEO_LOCATION_NOT_ALLOWED,e.caller||(e.caller="geoLocationNotAllowed"),this.generateEvent(e)}invalidMedia(e){return e.reason=li.INVALID_MEDIA,e.caller||(e.caller="invalidMedia"),this.generateEvent(e)}mediaUnavailable(e){return e.reason=li.MEDIA_UNAVAILABLE,e.caller||(e.caller="mediaUnavailable"),this.generateEvent(e)}temporarilyUnavailable(e){return e.reason=li.TEMPORARY_UNAVAILABLE,e.caller||(e.caller="temporarilyUnavailable"),this.generateEvent(e)}networkConnection(e){return e.reason=li.NETWORK_CONNECTION,e.caller||(e.caller="networkConnection"),this.generateEvent(e)}unsupportedDRM(e){return e.reason=li.UNSUPPORTED_DRM,e.caller||(e.caller="unsupportedDRM"),this.generateEvent(e)}requiresLbs(e){return e.reason=li.REQUIRES_LBS,e.caller||(e.caller="requiresLbs"),this.generateEvent(e)}playreadyLicenseFailed(e){return e.reason=li.PLAYREADY_LICENSE_FAILED,e.caller||(e.caller="playreadyLicenseFailed"),this.generateEvent(e)}damagedMediaData(e){return e.reason=li.DAMAGED_MEDIA_DATA,e.caller||(e.caller="damagedMediaData"),this.generateEvent(e)}generateEvent(e){if(e.platform||(e.platform=this.platform_),!(e.reason&&e.platform&&e.segment&&e.component&&e.feature&&e.errorCode))return Ai.error(`${this.constructor.name}->'track' called from ${e.caller}: specify all CodesConfig params to track event ${e}`),null;const t=new yi(e);this.coordinator_&&e.eventName&&this.coordinator_.coordinate(e.eventName,t);let o=`${this.constructor.name}: ${t.code} ${t.message}`;switch(t.cause&&(o+=". Caused by"),e.severity){case ai.WARNING:t.cause?Ai.warn(o,t.cause):Ai.warn(o);break;default:t.cause?Ai.error(o,t.cause):Ai.error(o)}return t}defineMediaItemFeatureByIdentifier(e){return e.match("natgeo")?vi.PLAYBACK_CFA:e.match("abcnews")?vi.ENTERTAINMENT:vi.GRAPH_QL}defineMediaItemErrorCodesByIdentifier(e){return e.match("natgeo")?bi.SHIELD_REQUEST_FAILED:e.match("abcnews")?bi.PLUTO_REQUEST_FAILED:bi.GQL_REQUEST_FAILED}};!function(e){e.localStorage="LOCAL_STORAGE",e.sessionStorage="SESSION_STORAGE"}(Ei||(Ei={}));class ki{constructor(e,t,o,n){this.id=e,this.name=t,this.logoUrl=o,this.websiteUrl=n}toString(){return`<AuthenticatedProvider id:${this.id}, name:${this.name}, logoUrl:${this.logoUrl}, websiteUrl:${this.websiteUrl}>`}static fromObject(e){return new ki(e.id,e.name,e.logoUrl,e.websiteUrl)}}!function(e){e.token="token",e.tokenType="tokenType",e.resource="resource",e.requestor="requestor",e.fullToken="fullToken",e.zipcode="zipcode",e.mvpd="mvpd"}(Ti||(Ti={}));class _i{constructor(e,t,o,n={}){this.authenticationType=e,this.authenticatedProvider=t,this.authenticatedIdentity=o,this.customData=n}}_i.CustomDataKey=Ti;class Ci{constructor(e,t){this.success=e,this.payload=t}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
function Ri(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function s(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}d((n=n.apply(e,t||[])).next())}))}!function(e){e.standard="default",e.googleAdManager="gam"}(Si||(Si={})),function(e){e.standard="default",e.prod="prod",e.development="dev"}(wi||(wi={}));const Ii=Object.freeze({}),Di=Object.freeze(""),Ni="undefined"!=typeof window&&window,Mi=function(e){Ni&&Ni.console&&Ni.console.error(e)};let Oi,Li,Fi;const Bi=function(){return Ri(this,void 0,void 0,(function*(){let e=Oi||Ni.goog&&Ni.goog.pal;const t=Ni&&Ni.bc;if(!e){try{yield function(e,t=4e3){const o="undefined"!=typeof window&&window,n=o&&o.document,r=n&&n.getElementsByTagName&&n.getElementsByTagName("head")[0],i=n&&n.body,a=r||i;return a&&e?new Promise((function(o,n){const r=document.createElement("script");let i=[],s=null;const d=()=>{i.forEach(e=>e()),i=null,clearTimeout(s),s=null},l=function(e){d(),o(e)},c=function(e){d(),n(e)};r.type="text/javascript",r.src=e,r.addEventListener("load",l),i.push(()=>r.removeEventListener("load",l)),r.addEventListener("error",c),i.push(()=>r.removeEventListener("error",c)),s=setTimeout(()=>c(new Error(`Timeout (${t}) while fetching ${e}`)),4e3),a.appendChild(r)})):Promise.reject()}("https://imasdk.googleapis.com/pal/sdkloader/pal.js")}catch(e){Mi(e)}e=Ni.goog&&Ni.goog.pal,e&&(Oi=e),!t&&Ni.bc&&(Ni.bc=null)}return e||Ii}))};const Ui=e=>null===e?null:e?"1":"0",Vi=(e,t)=>null!=e?e:t;class xi{constructor(e=null,t=null,o=null,n=null,r="espn",i=null,a=null,s=null,d=null,l=null,c=null,u=null,p=null,h=null,m=null,y=null,f=!1,g=null,v=null,b=!1,A=!1,E=null,T=null,S=null,w=!1,P=null,k=null,_=null,C=null,R=null,I=!1,D=null,N=null,M=null,O=null,L=null,F=null,B=null,U=null,V=null,x=null,j=null,z=null,G=null,W=null,q=null,Y=null,H=null,K=null,$=null,X=null,Q=null,Z=null,J=null,ee=null,te=!1,oe=null,ne=null,re=null,ie=null,ae={},se=null,de=null,le=null,ce=null,ue=wi.standard,pe=Si.standard,he=null,me=null,ye=null){this.aff=e,this.alt=t,this.accessLevel=o,this.adRule=n,this.an=r,this.beacType=i,this.collection=a,this.cbp=s,this.descriptionUrl=d,this.edition=l,this.fcap=c,this.hashedIp=u,this.hl=p,this.isAuth=h,this.idType=m,this.impl=y,this.isLat=f,this.iu=g,this.msid=v,this.npa=b,this.ltd=A,this.nlsnPlat=E,this.output=T,this.palNonce=S,this.storageConsent=w,this.playlist=P,this.ppid=k,this.rdid=_,this.tags=C,this.transId=R,this.tfcd=I,this.url=D,this.varResolution=N,this.vpa=M,this.vpi=O,this.vadFormat=L,this.vpmute=F,this.authenticationProvider=B,this.bundleId=U,this.deviceOS=V,this.deviceType=x,this.isAutoplay=j,this.isMute=z,this.language=G,this.nielsenAppId=W,this.nielsenDeviceGroup=q,this.noAds=Y,this.objectId=H,this.pageType=K,this.platform=$,this.stitchingProvider=X,this.swid=Q,this.testAdTargeting=Z,this.tag=J,this.unid=ee,this.vastIconsSupported=te,this.videoDeliveryMethod=oe,this.videoPlayerSize=ne,this.videoPlayerType=re,this.videoPlayerVersion=ie,this.userInfo=ae,this.isDoNotTrackEnabled=se,this.pp=de,this.cmsid=le,this.vid=ce,this.adEnvironment=ue,this.adProvider=pe,this.usPrivacy=he,this.additionalConsent=me,this.rdp=ye}merge(e){return e?(this.adRule=e.adRule||this.adRule,this.an=e.an||this.an,this.descriptionUrl=e.descriptionUrl||this.descriptionUrl,this.fcap=e.fcap||this.fcap,this.hashedIp=e.hashedIp||this.hashedIp,this.hl=e.hl||this.hl,this.idType=e.idType||this.idType,this.isLat=Vi(e.isLat,this.isLat),this.iu=e.iu||this.iu,this.msid=e.msid||this.msid,this.npa=Vi(e.npa,this.npa),this.ltd=Vi(e.ltd,this.ltd),this.output=e.output||this.output,this.ppid=e.ppid||this.ppid,this.rdid=e.rdid||this.rdid,this.rdp=e.rdp||this.rdp,this.tfcd=e.tfcd||this.tfcd,this.url=e.url||this.url,this.vpa=e.vpa||this.vpa,this.vpi=e.vpi||this.vpi,this.vadFormat=e.vadFormat||this.vadFormat,this.vpmute=Vi(e.vpmute,this.vpmute),this.authenticationProvider=e.authenticationProvider||this.authenticationProvider,this.bundleId=e.bundleId||this.bundleId,this.deviceOS=e.deviceOS||this.deviceOS,this.deviceType=e.deviceType||this.deviceType,this.isAutoplay=Vi(e.isAutoplay,this.isAutoplay),this.isMute=Vi(e.isMute,this.isMute),this.language=e.language||this.language,this.palNonce=e.palNonce||this.palNonce,this.storageConsent=e.storageConsent||this.storageConsent,this.nielsenAppId=e.nielsenAppId||this.nielsenAppId,this.nielsenDeviceGroup=e.nielsenDeviceGroup||this.nielsenDeviceGroup,this.noAds=Vi(e.noAds,this.noAds),this.objectId=e.objectId||this.objectId,this.platform=e.platform||this.platform,this.stitchingProvider=e.stitchingProvider||this.stitchingProvider,this.swid=e.swid||this.swid,this.tags=e.tags||this.tags,this.testAdTargeting=e.testAdTargeting||this.testAdTargeting,this.unid=e.unid||this.unid,this.alt=e.alt||this.alt,this.beacType=e.beacType||this.beacType,this.transId=e.transId||this.transId,this.accessLevel=e.accessLevel||this.accessLevel,this.varResolution=e.varResolution||this.varResolution,this.nlsnPlat=e.nlsnPlat||this.nlsnPlat,this.tag=e.tag||this.tag,this.aff=e.aff||this.aff,this.playlist=e.playlist||this.playlist,this.cbp=e.cbp||this.cbp,this.collection=e.collection||this.collection,this.impl=e.impl||this.impl,this.isAuth=e.isAuth||this.isAuth,this.pageType=e.pageType||this.pageType,this.vastIconsSupported=Vi(e.vastIconsSupported,this.vastIconsSupported),this.videoDeliveryMethod=e.videoDeliveryMethod||this.videoDeliveryMethod,this.videoPlayerSize=e.videoPlayerSize||this.videoPlayerSize,this.videoPlayerType=e.videoPlayerType||this.videoPlayerType,this.videoPlayerVersion=e.videoPlayerVersion||this.videoPlayerVersion,this.isDoNotTrackEnabled=Vi(e.isDoNotTrackEnabled,this.isDoNotTrackEnabled),this.pp=e.pp||this.pp,this.cmsid=e.cmsid||this.cmsid,this.usPrivacy=e.usPrivacy||this.usPrivacy,this.additionalConsent=e.additionalConsent||this.additionalConsent,this.vid=e.vid||this.vid,this.userInfo?Object.assign(this.userInfo,e.userInfo):this.userInfo=e.userInfo,this.adEnvironment=e.adEnvironment!==wi.standard?e.adEnvironment:this.adEnvironment,this.adProvider=e.adProvider!==Si.standard?e.adProvider:this.adProvider,this):this}dictionaryForStartSession(){const e={};return e["ad.tfcd"]=Ui(this.tfcd),e["ad.is_lat"]=Ui(this.isLat),e["ad.idtype"]=this.idType,e["ad.rdid"]=this.rdid,e["ad.ppid"]=this.ppid||this.swid,e["ad.description_url"]=this.descriptionUrl,e["ad.hl"]=this.hl,e["ad.paln"]=this.palNonce,e["ad.npa"]=Ui(this.npa),e["ad.ltd"]=Ui(this.ltd),e["ad.msid"]=this.msid,e["ad.an"]=this.an,e["ad.url"]=this.url,e["ad.us_privacy"]=this.usPrivacy,e["ad.cust_params.d_us_privacy"]=this.usPrivacy,e["ad.rdp"]=null!==this.rdp?this.rdp:"1YYY"===this.usPrivacy?"1":null,e.authp=this.authenticationProvider,e.bundleId=this.bundleId,e.devOS=this.deviceOS,e.devType=this.deviceType,e.fcap=this.fcap,e.isAutoplay=Ui(this.isAutoplay),e.isMute=Ui(this.isMute),e.nlsnAppID=this.nielsenAppId,e.plt=this.platform,e.swid=this.swid,e.unid=this.unid,e.vps=this.videoPlayerSize,this.adEnvironment!==wi.standard&&(e.adEnv=this.adEnvironment),this.adProvider!==Si.standard&&(e.adProvider=this.adProvider),Object.assign(e,this.userInfo),Object.keys(e).forEach(t=>null===e[t]&&delete e[t]),e}dictionaryForBrightcove(){const e={};e.bundleId=this.bundleId,e.devOS=this.deviceOS,e.devType=this.deviceType,e.isAutoplay=Ui(this.isAutoplay),e.isMute=Ui(this.isMute),e.plt=this.platform,e.swid=this.swid,e.vps=this.videoPlayerSize,e.d_id=this.rdid,e.vdm=this.videoDeliveryMethod||"vod",e.stp=this.stitchingProvider||"brightcove";const t=Object.keys(e).filter(t=>null!==e[t]).map(t=>`${t}=${e[t]}`).join("&"),o={};return o.UMADPARAMiu=this.iu,o.UMADPARAMis_lat=Ui(this.isLat),o.UMADPARAMidtype=this.idType,o.UMADPARAMrdid=this.rdid,o.UMADPARAMppid=this.ppid||this.swid,o.UMADPARAMdescription_url=this.descriptionUrl,o.UMADPARAMhl=this.hl,o.UMADPARAMnpa=Ui(this.npa),o.UMADPARAMltd=Ui(this.ltd),o.UMADPARAMmsid=this.msid,o.UMADPARAMan=this.an,o.UMADPARAMurl=this.url,o.UMADPARAMvpa=Ui(this.vpa),o.UMADPARAMvpmute=Ui(this.vpmute),o.UMPTPARAMcust_params=t,Object.assign(o,this.userInfo),Object.keys(o).forEach(e=>null===o[e]&&delete o[e]),o}dictionaryForAdEngine(){const e={};switch(e.sect=this.iu,e.npa=Ui(this.npa),e.ltd=Ui(this.ltd),e.lat=Ui(this.isLat),e.idtype=this.idType,e.devId=this.rdid,e.ppid=this.ppid||this.swid,e.app=this.an,e.tfcd=Ui(this.tfcd),e.devOS=this.deviceOS,e.devType=this.deviceType,e.isAutoplay=Ui(this.isAutoplay),e.isMute=Ui(this.isMute),e.plt=this.platform,e.swid=this.swid,e.unid=this.unid,e.vps=this.videoPlayerSize,e.bundle=this.msid,e.hl=this.hl,e.UID=this.swid,e.vdm=this.videoDeliveryMethod,e.url=this.url,this.adEnvironment){case wi.development:e.env="qa";break;case wi.prod:e.env="prod";break;case wi.standard:}switch(this.adProvider){case Si.googleAdManager:e.ads="google";break;case Si.standard:}return Object.assign(e,this.userInfo),Object.keys(e).forEach(t=>null===e[t]&&delete e[t]),e}dictionaryForImaSdk(){const e={};e.authp=this.authenticationProvider,e.d_us_privacy=this.usPrivacy,e.devOS=this.deviceOS,e.devType=this.deviceType,e.ed=this.edition,e.hip=this.hashedIp,e.isAutoplay=Ui(this.isAutoplay),e.isDnt=Ui(this.isDoNotTrackEnabled),e.isMute=Ui(this.isMute),e.lang=this.language,e.nlsnAppID=this.nielsenAppId,e.nlsnDevGrp=this.nielsenDeviceGroup,e.noad=this.noAds,e.objid=this.objectId,e.plt=this.platform,e.pgtyp=this.pageType,e.swid=this.swid,e.tag=this.tags,e.tstAdTar=this.testAdTargeting,e.unid=this.unid,e.vdm=this.videoDeliveryMethod||"vod",e.vps=this.videoPlayerSize;const t=Object.keys(e).filter(t=>null!==e[t]).map(t=>`${t}=${e[t]}`).join("&"),o={};return o.ad_rule=this.adRule,o.cmsid=this.cmsid,o.description_url=this.descriptionUrl,o.hl=this.hl,o.iu=this.iu,o.npa=Ui(this.npa),o.output=this.output,o.ltd=Ui(this.ltd),o.pp=this.pp,o.ppid=this.ppid,o.rdp=this.rdp,o.tfcd=Ui(this.tfcd),o.us_privacy=this.usPrivacy,o.addtl_consent=this.additionalConsent,o.vid=this.vid,o.vpa=Ui(this.vpa),o.cust_params=t,o.gdfp_req="1",o.env="vp",o.sz="640x480",this.adEnvironment!==wi.standard&&(o.adEnv=this.adEnvironment),Object.keys(o).forEach(e=>null===o[e]&&delete o[e]),o}dictionaryForEntertainment(){const e={};e.ed=this.edition,e.devOS=this.deviceOS,e.devType=this.deviceType,e.hip=this.hashedIp,e.isAutoplay=Ui(this.isAutoplay),e.isDnt=Ui(this.isDoNotTrackEnabled),e.isMute=Ui(this.isMute),e.lang=this.language,e.nlsnAppID=this.nielsenAppId,e.nlsnDevGrp=this.nielsenDeviceGroup,e.nlsnPlat=this.nlsnPlat,e.noad=this.noAds,e.objid=this.objectId,e.pgtyp=this.pageType,e.plt=this.platform,e.swid=this.swid||this.ppid,e.tag=this.tags,e.tstAdTar=this.testAdTargeting,e.unid=this.unid,e.vdm=this.videoDeliveryMethod||"vod",e.vps=this.videoPlayerSize,e.alt=this.alt,e.beacType=this.beacType,e.transId=this.transId,e.accesslevel=this.accessLevel,e.isAuth=this.isAuth,e.fcap=this.fcap,e.var=this.varResolution,e.tag=this.tag,e.aff=this.aff,e.authp=this.authenticationProvider,e.playlist=this.playlist,e.cbp=this.cbp,e.collection=this.collection,e.impl=this.impl;const t=Object.keys(e).filter(t=>null!==e[t]).map(t=>`${t}=${e[t]}`).join("&"),o={};return o.addtl_consent=this.additionalConsent,o.ad_rule=this.adRule,o.cmsid=this.cmsid,o.description_url=this.descriptionUrl,o.hl=this.hl,o.iu=this.iu,o.npa=Ui(this.npa),o.output=this.output,o.ltd=Ui(this.ltd),o.pp=this.pp,o.ppid=this.ppid,o.tfcd=Ui(this.tfcd),o.vid=this.vid,o.vpa=Ui(this.vpa),o.cust_params=t,o.output=this.output,o.vad_format=this.vadFormat,o.vpi=this.vpi,o.url=this.url,o.us_privacy=this.usPrivacy,o.gdfp_req="1",o.env="vp",o.sz="640x480",Object.keys(o).forEach(e=>null===o[e]&&delete o[e]),o}static ppidForSwid(e){return e}}xi.getGooglePalNonce=function(e,t=3e3,o=!1,n=!0,r=Bi){return Ri(this,void 0,void 0,(function*(){let i=n&&Fi||Di;if(!i){let a,s,d;try{const e=yield r();e&&(a=e.NonceLoader,s=e.NonceRequest,d=e.ConsentSettings)}catch(e){Mi(e)}if((!n||!Fi)&&a&&s){let n;try{const{storageConsent:t=!1}=e,r=new d;r.allowStorage=t,Li=!Li||o?new a(r):Li;const i=Object.assign(new s,function(e){const[t,o]=String(e.videoPlayerSize||"640x480").split("x");return{adWillAutoPlay:e.isAutoplay,adWillPlayMuted:e.isMute,continuousPlayback:"vod"===e.videoDeliveryMethod,descriptionUrl:e.descriptionUrl||Di,iconsSupported:e.vastIconsSupported,playerType:e.videoPlayerType||Di,playerVersion:e.videoPlayerVersion||Di,ppid:e.ppid||e.swid||Di,videoHeight:parseInt(o,10),videoWidth:parseInt(t,10)}}(e));n=yield Li.loadNonceManager(i)}catch(e){Mi(e)}n&&(i=yield n.getNonce(),(!i||Number(t)>0&&String(i).length>t)&&(i=Di),i&&(Fi=i))}}return i}))};var ji=mt.includes;Ke({target:"Array",proto:!0},{includes:function(e){return ji(this,e,arguments.length>1?arguments[1]:void 0)}});var zi=function(e){return L[e+"Prototype"]},Gi=zi("Array").includes,Wi=ge("match"),qi=i.TypeError,Yi=function(e){if(function(e){var t;return O(e)&&(void 0!==(t=e[Wi])?!!t:"RegExp"==_(e))}(e))throw qi("The method doesn't accept regular expressions");return e},Hi=ge("match"),Ki=f("".indexOf);Ke({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[Hi]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~Ki(ro(N(this)),ro(Yi(e)),arguments.length>1?arguments[1]:void 0)}});var $i,Xi=zi("String").includes,Qi=Array.prototype,Zi=String.prototype,Ji=function(e){var t=e.includes;return e===Qi||U(Qi,e)&&t===Qi.includes?Gi:"string"==typeof e||e===Zi||U(Zi,e)&&t===Zi.includes?Xi:t};class ea{getErrorMsg(e){switch(e){case 400:return"NewRelic error > Missing or invalid content length: Unable to process empty request.";case 403:return"NewRelic error > Missing or invalid API key: Invalid Insert key, or the account does not have access to Insights. Register a valid Insert key.";case 408:return"NewRelic error > Request timed out: Request took too long to process.";case 413:return"NewRelic error > Content too large: Request is too large to process. Refer to the limits and restricted characters to troubleshoot.";case 415:return"NewRelic error > Invalid content type: Must be application/JSON. The Event API accepts any content type except multi-part/related and assumes it can be parsed to JSON.";case 429:return"NewRelic error > Too many requests due to rate limiting.";case 503:return"NewRelic error > Service temporarily unavailable: Retry request"}}}!function(e){e.FINISH="finish",e.FMI="FMI",e.CAZ="CAZ",e.CAN_T="CAN<T>",e.CAZ_T="CAZ<T>",e.B_FM="B_FM",e.B_FMF="B_FMF",e.B_RIT="B_RIT",e.B_L="B_L",e.B_RA="B_RA",e.T_FESPN="T_FESPN",e.T_FESPNF="T_FESPNF",e.T_FSH="T_FSH",e.T_FSHF="T_FSHF",e.T_FSS="T_FSS",e.T_FSSF="T_FSSF",e.T_FE="T_FE",e.T_FEF="T_FEF",e.T_NIT="T_NIT",e.T_CHP="T_CHP",e.T_PL="T_PL",e.T_CMAN="T_CMAN",e.T_PJWT="T_PJWT",e.T_NJWT="T_NJWT",e.T_BJWT="T_BJWT",e.MPS="MPS",e.CM_I="CM_I",e.CM_IF="CM_IF",e.B_P="B_P",e.MP_I="MP_I",e.MP_L="MP_L",e.MP_S="MP_S",e.MP_C_PA="MP_C_PA",e.MP_C_PL="MP_C_PL",e.MP_SE="MP_SE",e.MP_S_S="MP_S_S",e.MP_S_E="MP_S_E",e.MP_V_M="MP_V_M",e.MP_V_U="MP_V_U",e.MP_CC_ON="MP_CC_ON",e.MP_CC_OFF="MP_CC_OFF",e.MP_C_C="MP_C_C",e.MP_D="MP_D"}($i||($i={}));var ta,oa=new class{constructor(){this.errorReason_=null,this.breadcrumbs_=[]}add(e){e&&this.breadcrumbs_.push(e)}setErrorReason(e){this.errorReason_=e}getErrorReason(){return this.errorReason_}getCrumbs(){return this.breadcrumbs_}reset(){this.breadcrumbs_=[],this.errorReason_=null}};class na{parse(e,t){const o=this.deviceData_();if(e){let n=oa.getCrumbs();Array.isArray(e.trail)&&e.trail.length&&(n=e.trail),n.length&&(e.trail=this.constructTrail_(e.name,n,t),oa.reset());for(const t in e)void 0!==e[t]&&(o[t]=e[t]),"object"==typeof o[t]&&(o[t]=JSON.stringify(o[t]))}return t&&t.code&&(o["error.instrumentationCode"]=t.code,o.error=fi[t.reason],o["error.message"]||(o["error.message"]=t.message),t.cause&&t.cause.message&&(o["error.cause.message"]=t.cause.message)),this.makeCamelCaseInsteadPeriod_(o)}makeCamelCaseInsteadPeriod_(e){const t=Object.keys(e),o={};return t.forEach(t=>{const n=t.split(".");if(n.length>1)for(let e=1;e<n.length;e++)n[e]=n[e].charAt(0).toUpperCase()+n[e].slice(1);o[n.join("")]=e[t]}),o}deviceData_(){const e=window.navigator;return{href:location.href,userAgent:e&&e.userAgent,appVersion:e&&e.appVersion}}constructTrail_(e,t,o){let n;if(t&&t.length>=0){n="start:"+e;for(let e=0;e<t.length;e++)n+="|"+t[e]}return o&&(n+="|$end,signpostError="+fi[o.reason]),n}}class ra{constructor(){this.newRelicError_=new ea,this.parser_=new na,this.enabled_=!0,this.serviceUrl_="https://insights-collector.newrelic.com/v1/accounts",this.insertKey_="NRII-RUdHfa4sRhagSedsRB8tArX7y3Zszm0u",this.accountId_="459463"}init(e){this.enabled_=e.enabled||!1,this.serviceUrl_=e.serviceUrl||this.serviceUrl_,this.insertKey_=e.insertKey||this.insertKey_,this.accountId_=e.accountId||this.accountId_}addCrumb(e){oa.add(e)}resetCrumbs(){oa.reset()}getErrorReason(){return oa.getErrorReason()}getServiceUrl_(){return this.serviceUrl_&&this.accountId_?`${this.serviceUrl_}/${this.accountId_}/events`:null}sendEvent(e,t){const o=this.getServiceUrl_();if(!o||!this.enabled_){const e=`Error recording new relic insights event. invalid url: %@ ${this.serviceUrl_}/${this.accountId_}/events`;return console.log(e),Promise.reject(e)}const n={"X-Insert-Key":this.insertKey_,"Content-Type":"application/json"},r=this.parser_.parse(e,t);if(r){const e={method:"POST",headers:n,body:JSON.stringify(r)};return fetch(o,e).then(e=>{if(e.ok)return Promise.resolve(e.json());{const t=this.newRelicError_.getErrorMsg(e.status);return Promise.reject(t)}}).catch(e=>(console.error(e),Promise.reject(e)))}return null}}new ra,function(e){e[e.all=0]="all",e[e.linearPlayback=1]="linearPlayback"}(ta||(ta={}));var ia,aa=ta;!function(e){e.linear="linear",e.event="event"}(ia||(ia={}));var sa,da=ia;!function(e){e.stitchedPreroll="stitchedPreroll"}(sa||(sa={}));var la,ca=sa;!function(e){e.live="live",e.onDemand="onDemand"}(la||(la={}));var ua,pa=la;!function(e){e.nielsen="nielsen",e.comscore="comscore",e.conviva="conviva",e.heartbeats="heartbeats"}(ua||(ua={}));var ha,ma=ua;!function(e){e.shortform="shortform",e.longform="longform"}(ha||(ha={}));var ya,fa=ha;!function(e){e.audio="audio",e.video="video"}(ya||(ya={}));var ga,va=ya;!function(e){e.pluto="pluto",e.graphQL="graphQL",e.cfa="cfa",e.itemFeed="itemFeed"}(ga||(ga={}));var ba,Aa=ga;!function(e){e.open="OPEN",e.direct="DIRECT",e.mvpd="MVPD",e.isp="ISP",e.none="NONE"}(ba||(ba={}));var Ea,Ta=ba;!function(e){e.none="none",e.startSession="startSession",e.bam="bam",e.shield="shield",e.entitlement="entitlement"}(Ea||(Ea={}));var Sa=Ea;class wa{constructor(e,t,o,n,r,i,a,s){this.url=e,this.type=t,this.hasEspnId3Heartbeats=o,this.hasNielsenWatermarks=n,this.hasPassThroughAds=r,this.commercialReplacement=i,this.startSessionUrl=a,this.variant=s}static fromObject(e){if(!e)return null;const{url:t,type:o,hasEspnId3Heartbeats:n,hasNielsenWatermarks:r,hasPassThroughAds:i,commercialReplacement:a,startSessionUrl:s,variant:d}=e,l=Sa[o];return new wa(t,l,n,r,i,a,s,d)}}class Pa{constructor(e,t,o,n){this.id=e,this.type=t,this.name=o,this.resource=n}static fromObject(e){if(!e)return null;const t=da[e.type];return new Pa(e.id,t,e.name,e.resource)}}class ka{constructor(e){this.url=e}static fromObject(e){return e&&e.url?new ka(e.url):null}}class _a{constructor(e){this.name=e}get logoUrl(){return`https://secure.espncdn.com/watchespn/images/espnplus/packages/${this.name}.png`}static fromObject(e){return e?new _a(e.name):null}}class Ca{constructor(e,t,o,n,r){this.id=e,this.title=t,this.duration=o,this.language=n||"en",this.source=r,this.description=null,this.authenticationTypes=[],this.mrss=null,this.seekInSeconds=null,this.tracking={},this.references={},this.network=null,this.streamType=null,this.supportedMediaCommands=aa.all,this.images=[],this.type=va.video,this.packages=[],this.tier=null,this.entityType=null,this.isSyndicatable=null,this.brand=null,this.apiSource=null,this.adUnitId=null,this.cues=null,this.adTarget=null,this.show=null}get isLinear(){return!!this.network&&this.network.type===da.linear}get isLive(){return this.streamType===pa.live}static fromObject(e){const t=wa.fromObject(e.source),o=new Ca(e.id,e.title,e.duration,e.language,t);return o.airDate=e.airDate,o.apiSource=e.apiSource,o.authenticationTypes=e.authenticationTypes,o.description=e.description,o.images=(e.images||[]).map(e=>ka.fromObject(e)),o.mrss=e.mrss,o.network=Pa.fromObject(e.network),o.seekInSeconds=e.seekInSeconds,o.streamType=pa[e.streamType],o.supportedMediaCommands=e.supportedMediaCommands,o.tracking=e.tracking,o.references=e.references,o.packages=(e.packages||[]).map(e=>_a.fromObject(e)),o.tier=e.tier,o.type=va[e.type],o.entityType=fa[e.entityType],o.isSyndicatable=e.isSyndicatable,o.brand=e.brand,o.adUnitId=e.adUnitId,o.cues=e.cues,o.show=e.show,o.adTarget=e.adTarget,o.availableDate=e.availableDate,o.episodeNumber=e.episodeNumber,o.locale=e.locale,o.seasonNumber=e.seasonNumber,o.tmsid=e.tmsid,o.videoShowGenre=e.videoShowGenre,o}toString(){return`<MediaItem id:${this.id}, title:${this.title}, streamType:${this.streamType}>`}}class Ra{constructor(e){const t=function(e){const t=e.split("?")[1],o={};if(t){const e=t.split("&");for(let t=0;t<e.length;t+=1){const n=e[t].split("=");o[n[0]]=n[1]}}return o}(e);if(this.original=e,this.id=t.videoID||t.playID||t.clip||t.externalId,e.match("sportscenter")){this.gameId=t.playGameID,this.channel=t.playChannel,this.simulcastAiringId=t.simulcastAiringId;const e=parseInt(t.resumeTime,10);isNaN(e)||(this.resumeTime=e),this.eventId=t.eventId}else e.match("abcnews")&&(this.channel=t.playChannel,this.id=t.videoID||t.id);this.source=t["x-source"],t.videoID?this.entityType=fa.shortform:this.entityType=fa.longform,this.type=va.video}toString(e){return e==Aa.graphQL?`<MediaItemIdentifier id:${this.id}, gameId:${this.gameId}, channel:${this.channel}, source:${this.source}>`:`<MediaItemIdentifier id:${this.id}, source:${this.source}>`}static identifierStringForNetwork(e,t){switch(t){case Aa.cfa:return"natgeo://playVideo?videoID="+e;case Aa.itemFeed:return"abcnews://playVideo?playChannel="+e;case Aa.graphQL:default:return"sportscenter://x-callback-url/showWatchStream?playChannel="+e}}}var Ia=t((function(t){!function(e,o){t.exports?t.exports=o():e.log=o()}(e,(function(){var e=function(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function n(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(o){return"debug"===o&&(o="log"),"undefined"!=typeof console&&("trace"===o&&t?r:void 0!==console[o]?n(console,o):void 0!==console.log?n(console,"log"):e)}function a(t,n){for(var r=0;r<o.length;r++){var i=o[r];this[i]=r<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function s(e,t,o){return function(){"undefined"!=typeof console&&(a.call(this,t,o),this[e].apply(this,arguments))}}function d(e,t,o){return i(e)||s.apply(this,arguments)}function l(e,t,n){var r,i=this;t=null==t?"WARN":t;var s="loglevel";function l(){var e;if("undefined"!=typeof window&&s){try{e=window.localStorage[s]}catch(e){}if(void 0===e)try{var t=window.document.cookie,o=t.indexOf(encodeURIComponent(s)+"=");-1!==o&&(e=/^([^;]+)/.exec(t.slice(o))[1])}catch(e){}return void 0===i.levels[e]&&(e=void 0),e}}"string"==typeof e?s+=":"+e:"symbol"==typeof e&&(s=void 0),i.name=e,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=n||d,i.getLevel=function(){return r},i.setLevel=function(t,n){if("string"==typeof t&&void 0!==i.levels[t.toUpperCase()]&&(t=i.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=i.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(r=t,!1!==n&&function(e){var t=(o[e]||"silent").toUpperCase();if("undefined"!=typeof window&&s){try{return void(window.localStorage[s]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+t+";"}catch(e){}}}(t),a.call(i,t,e),"undefined"==typeof console&&t<i.levels.SILENT)return"No console available for logging"},i.setDefaultLevel=function(e){t=e,l()||i.setLevel(e,!1)},i.resetLevel=function(){i.setLevel(t,!1),function(){if("undefined"!=typeof window&&s){try{return void window.localStorage.removeItem(s)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},i.enableAll=function(e){i.setLevel(i.levels.TRACE,e)},i.disableAll=function(e){i.setLevel(i.levels.SILENT,e)};var c=l();null==c&&(c=t),i.setLevel(c,!1)}var c=new l,u={};c.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new l(e,c.getLevel(),c.methodFactory)),t};var p="undefined"!=typeof window?window.log:void 0;return c.noConflict=function(){return"undefined"!=typeof window&&window.log===c&&(window.log=p),c},c.getLoggers=function(){return u},c.default=c,c}))}));function Da(e,t,o,n){if(!t)return{};let r,i,a,s=null;e===ri.natGeo?s=function(e){if(!e)return{};const t={},{id:o,title:n,duration:r}=e;return t.c_video_id_code=o,t.c_a_media_airdate="unknown",t.c_a_media_daypart="daytime",t.c_a_media_digitaldate="unknown",t.c_a_media_episode="none",t.c_a_media_feed="natgeo live",t.c_a_media_format="vod",t.c_a_media_genre="none",t.c_a_media_network="natgeo",t.c_a_media_originator="natgeo",t.c_a_media_pass_auth="none",t.c_a_media_pass_mvpd="none",t.c_a_media_rating="none",t.c_a_media_season="none",t.c_a_media_show=n,t.c_a_media_streamtype=ya.video,t.c_a_media_length=r,t}(t):(r=function(e,t,o){if(!e)return{};const{duration:n,id:r,league:i,name:a,network:s,program:d,sport:l,startDateTime:c,tracking:u}=e;let p="1";o&&!0===o.hasEspnId3Heartbeats&&!1===o.hasPassThroughAds&&"SHARED INV"!==o.commercialReplacement&&(p="2");const h={type:"content"};if(h.assetid=u&&u.trackingId||r,h.program=a,h.title=a,h.clientid="us-600140",t===fa.longform){if(h.length=""+n,h.segB=i&&i.name||"No League",h.segC=`${d&&d.code||""}${l&&l.code||""}`,c){const e=new Date(c);h.airdate=`${e.getUTCFullYear().toString()+("0"+e.getUTCMonth()).slice(-2)+("0"+e.getUTCDate()).slice(-2)} ${("0"+e.getUTCHours()).slice(-2)}:${("0"+e.getUTCMinutes()).slice(-2)}:${("0"+e.getUTCSeconds()).slice(-2)}`}h.isfullepisode="y",h.crossId1=u&&u.nielsenCrossId1||"",h.crossId2=s&&s.name||"",h.adloadtype=p,h.hasAds="1",h.progen="SE",h.vcid="b01"}return t===fa.shortform&&(h.accmethod="1",h.length=""+n,h.segA=a,h.segB="No League",h.segC="VOD",h.isfullepisode="n",h.crossId1="",h.adloadtype="1",h.vcid="c17",h.adloadtype="2"),h}(t,o,n),i=function(e,t){if(!e)return{};const{id:o,duration:n,name:r,league:i,startDateTime:a,network:s,sport:d,status:l,tracking:c}=e,u={};if(t===fa.longform)u.ns_st_cl=0,u.ns_st_ct="vc",!l||"live"!==l.toLowerCase()&&"over"!==l.toLowerCase()?(u.ns_st_cl=n,u.ns_st_ct="vc12",u.ns_st_pr="VOD",u.ns_st_ep=r):(u.ns_st_cl=0,u.ns_st_ct="vc13",u.ns_st_pr=r,u.ns_st_ep="*null"),u.c3="WATCHESPNLIVE",u.c6=i&&i.name?i||"No league":d&&d.code||"No Sport";else{u.ns_st_cl=n,u.ns_st_ct="vc11",u.ns_st_pr="VOD",u.ns_st_ep=r;const{sportName:e,leagueName:t}=c||{};u.c3="vod",u.c6=""+(t&&"no league"!==t.toLowerCase()?t:e||"No Sport")}if(u.ns_st_ti="*null",u.ns_st_ia="*null",u.ns_st_ce="*null",u.ns_st_ci=o,a){const e=new Date(a);u.ns_st_ddt=e.toDateString(),u.ns_st_tdt=e.toDateString()}return u.ns_st_st=s?s.id:"*null",u.ns_st_en="*null",u.ns_st_cn="1",u.ns_st_pn="1",u.ns_st_tp="1",u.ns_st_pu="ESPN",u.ns_st_cu="none",u.ns_st_ad="0",u.ns_st_ge="Sports",u}(t,o),a=function(e,t,o){if(!e)return{};const{name:n,id:r,airingId:i,eventId:a,duration:s,network:d,status:l,sport:c,league:u}=e,p={};p.contentId=r,i&&(p.airingId=i),a&&(p.eventId=""+a,p.eventName=n),d&&(p.network=d.id),t===fa.shortform?p.assetType="clip":!l||"live"!==l.toLowerCase()&&"over"!==l.toLowerCase()?p.assetType="vod":p.assetType="live";let h=`${n} - ${r}`;return d&&d.type===da.linear&&"live"===p.assetType&&(h=d.id),p.sport=c&&c.name||"Not Applicable",p.league=u&&u.name||"Not Applicable",p.appBrand=ri.espn,{assetName:h,duration:s,streamUrl:o&&o.url,custom:p}}(t,o,n),s=function(e,t){if(!e)return{};const{duration:o,airingId:n,network:r,status:i,sport:a,league:s,name:d,program:l,startDateTime:c,tracking:u,originalPublishDate:p,expirationDate:h,lastModifiedDate:m,ad:y,coverageType:f,brands:g}=e,v={};if(v.ContentDuration=o,t===fa.longform){if(v.CMSID=u&&u.name||d,v.isFullEpisode="y",n&&(v.AiringID=n),r&&(v.NetworkName=r.id,v.Channel=r.id),i&&(v.VideoType="REPLAY"===i?"replay":"live"),v.Sport=a&&a.name||"Not Applicable",v.SportCode=a&&a.code||"Not Applicable",v.League=s&&s.name||"Not Applicable",l&&l.code&&l.categoryCode?v.ProgramCode=l.categoryCode+l.code:v.ProgramCode="Not Applicable",v.IsStudio=l&&l.isStudio||"Not Applicable",c){const e=new Date(c);v.AirDate=e.toDateString(),v.AirTime=e.toTimeString()}if(Array.isArray(g)&&g.length){const{id:e,name:t,type:o}=g[0];v["a.media.asset"]=e,v["a.media.show"]=t,v["a.media.genre"]=o}}else if(t===fa.shortform){if(v.isFullEpisode="n",v.VideoType="vod",v.Sport=u&&u.sportName||"Not Applicable",v.League=u&&u.leagueName||"Not Applicable",v.ShowCode=y&&y.bundle||"Not Applicable",u&&u.name&&(v.CMSID=u.name),p){const e=new Date(p);v.PublishDate=e.toISOString().substring(0,10),v.PublishTime=e.toISOString().substring(11)}if(h){const e=new Date(h);v.ExpirationDate=e.toISOString()}if(m){const e=new Date(m);v.DateLastModified=e.toISOString()}f&&(v.VideoTypeDetail=f)}return v}(t,o));const d={};return d[ma.nielsen]=r,d[ma.comscore]=i,d[ma.conviva]=a,d[ma.heartbeats]=s,d}const Na=["espn_ppv","espn_dtc","espn1","espn2","espn3","espnu","sec","espnews","espndeportes","longhorn","goalline","buzzerbeater","secplus","acc","accextra","espn_free","bam_dtc"];class Ma{constructor(e,t,o,n){e==Aa.graphQL?(this.serviceUrl=t||"https://watch.graph.api.espn.com/api",this.apiKey=o||"d15c5790-7cb0-4fe1-8782-25f4698d0739",this.networkSortOrder=n||Na):e==Aa.cfa?this.serviceUrl=t||"https://natgeo.entertainment.client.dtci.technology/v1/playback/video/id/mock":e===Aa.itemFeed&&(this.serviceUrl=t||"https://abcnews.go.com/video/itemfeed")}}class Oa{constructor(){this.configuration_=Oa.defaultConfiguration}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Ri(this,void 0,void 0,(function*(){return yield Oa.fetchMediaItems(e,t,this.configuration)}))}static fetchMediaItems(e,t,o){return Ri(this,void 0,void 0,(function*(){const n=e.map(e=>new Ra(e)),{serviceUrl:r,apiKey:i,networkSortOrder:a}=o,s=(yield Promise.all(n.map(e=>Oa.getPromiseMediaItems(e,r,i,t)))).filter(e=>!(e instanceof Error)&&e instanceof Ca);return s.length?function(e,t,o){return e.sort((e,t)=>{const o="PRIMARY"===e.tier?0:"SECONDARY"===e.tier?1:2,n="PRIMARY"===t.tier?0:"SECONDARY"===t.tier?1:2;return o<n?-1:o>n?1:0}).sort((e,o)=>{const n=e.network&&e.network.id.toLowerCase()||"unknown",r=o.network&&o.network.id.toLowerCase()||"unknown";let i=t.indexOf(n),a=t.indexOf(r);return-1===i&&(i=999),-1===a&&(a=999),i<a?-1:i>a?1:0}).sort((e,t)=>{const n=e.language===o?0:1,r=t.language===o?0:1;return n<r?-1:n<r?1:0})}(s,a,navigator.language):null}))}static getPromiseMediaItems(e,t,o,n){return Ri(this,void 0,void 0,(function*(){const r=function(e,t,o,n){let r="",i="",a="";const s=n||"US";return e.entityType===fa.shortform?(r="VOD",a="{id name description authTypes language duration originalPublishDate expirationDate requiresLinearPlayback lastModifiedDate source { url authorizationType } image { url } tracking { name sportName leagueName } coverageType prerollSource:source(variant:PREROLL) { url authorizationType }ad { sport bundle } links { web } cerebroId syndicatable}",i=`id:"${e.id}"`):(r="airing",a="{ id name description mrss:adobeRSS authTypes requiresLinearPlayback status:type startDateTime endDateTime duration source(authorization: SHIELD) { url authorizationType hasEspnId3Heartbeats hasNielsenWatermarks hasPassThroughAds commercialReplacement startSessionUrl } network { id type name adobeResource } image { url } sport { name code uid } league { name uid } program { code categoryCode isStudio } seekInSeconds simulcastAiringId airingId tracking { nielsenCrossId1 trackingId } eventId packages { name } language tier feedName brands { id name type } }",e.id?i=`id:"${e.id}"`:e.channel?(r="airings",i=`networks:["${e.channel}"],type:LIVE`):e.gameId&&(r="airings",i=`eventId:"${e.eventId||e.gameId}"`)),`${t}?apiKey=${o}&query=${encodeURIComponent(`{ ${r}(${i},countryCode:"${s}",deviceType:SETTOP,tz:"Z") ${a} }`)}`}(e,t,o,n.countryCode);try{const i=yield fetch(r),a=yield i.json();let{airing:s}=a.data;const{airings:d}=a.data;if(d){const t=e.simulcastAiringId?t=>t.simulcastAiringId===e.simulcastAiringId:()=>!0;s=d.filter(t)[0]}const l=a.data.VOD,c=s||l;if(!c)throw new Error("No results found.");const u=function(e,t,o){const{id:n,name:r,description:i,duration:a,image:s,eventId:d,requiresLinearPlayback:l,authTypes:c,source:u,prerollSource:p,packages:h,language:m,mrss:y,seekInSeconds:f,tracking:g,simulcastAiringId:v,network:b,status:A,cerebroId:E,syndicatable:T}=e,S=A&&("LIVE"===A.toUpperCase()||"OVER"===A.toUpperCase())?pa.live:pa.onDemand,w=(e=>{switch(e){case"NONE":return Sa.none;case"START_SESSION":return Sa.startSession;case"BAM":return Sa.bam;case"SHIELD":return Sa.shield}})(u.authorizationType);let P=new wa(u.url,w,u.hasEspnId3Heartbeats,u.hasNielsenWatermarks,u.hasPassThroughAds,u.commercialReplacement,u.startSessionUrl);o&&o.sourceVariant===ca.stitchedPreroll&&p&&(P=new wa(p.url,Sa.none),P.variant=ca.stitchedPreroll);const k=l?aa.linearPlayback:aa.all,_=g&&g.trackingId||n,C=new Ca(n,r,a,m,P);if(C.authenticationTypes=c.map(e=>{switch(e){case"DIRECT":return Ta.direct;case"OPEN":return Ta.open;case"MVPD":return Ta.mvpd;case"ISP":return Ta.isp;default:return Ta.none}}),C.description=i,C.isSyndicatable=T,s&&s.url&&C.images.push(new ka(s.url)),C.mrss=y,b){const e="linear"===b.type?da.linear:da.event;C.network=new Pa(b.id,e,b.name,b.adobeResource)}return C.seekInSeconds=f,C.streamType=S,C.supportedMediaCommands=k,C.brand=C.brand?C.brand:"espn",C.tracking=Da(C.brand,e,t,P),C.references={eventId:d,simulcastAiringId:v,trackingId:_,cerebroId:E},C.type=va.video,C.entityType=t,C.apiSource=Aa.graphQL,C.packages=(h||[]).map(e=>new _a(e.name)),C}(c,e.entityType,n);if(e.resumeTime&&(u.seekInSeconds=e.resumeTime),!u.source.url){const e="OVER"===c.status.toUpperCase(),r=c.network&&c.network.type===da.linear,i=c.network&&c.network.id;if(e&&r&&i)return Oa.retryGetMediaItems(i,t,o,n);throw new Error("No playable url")}return u}catch(e){return Ia.warn("Failed to retrieve MediaItem from GraphQL: "+e),null}}))}static retryGetMediaItems(e,t,o,n){return Ri(this,void 0,void 0,(function*(){try{const r=Ra.identifierStringForNetwork(e,Aa.graphQL),i=new Ra(r),a=yield Oa.getPromiseMediaItems(i,t,o,n);if(a&&a instanceof Ca==!0)return a;throw new Error("Retry fetchMediaItems failed with "+e)}catch(e){return Ia.warn("MediaItem is over and retry failed: "+e),null}}))}}Oa.defaultConfiguration=new Ma(Aa.graphQL);class La{constructor(){this.configuration_=La.defaultConfiguration}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Ri(this,void 0,void 0,(function*(){return yield La.fetchMediaItems(e,t,this.configuration)}))}static fetchMediaItems(e,t,o){return Ri(this,void 0,void 0,(function*(){const t=e.map(e=>new Ra(e)),{serviceUrl:n}=o;return(yield Promise.all(t.map(e=>La.getPromiseMediaItem(e,n)))).filter(e=>!(e instanceof Error)&&e instanceof Ca)}))}static getPromiseMediaItem(e,t){return Ri(this,void 0,void 0,(function*(){const o=t.replace("videoID",e.id);try{const e=yield fetch(o),t=yield e.json();return function(e){const{id:t,title:o,description:n,duration:r,source:i,type:a,entityType:s,streamType:d,authenticationTypes:l,language:c,network:u,brand:p,images:h}=e,m=s,y=i.type,f=new wa(i.url,y),g=new Ca(t,o,r,c,f);return g.authenticationTypes=l.map(e=>{switch(e){case"DIRECT":return Ta.direct;case"OPEN":return Ta.open;case"MVPD":return Ta.mvpd;case"ISP":return Ta.isp;default:return Ta.none}}),g.description=n,u&&(g.network=new Pa(u.id,u.type,u.name,u.resource)),g.streamType=d,g.brand=p,g.tracking=Da(g.brand,e,m,f),g.images=h,g.type=a,g.entityType=m,g.apiSource=Aa.cfa,g}(t)}catch(e){return Ia.warn("Failed to retrieve MediaItem from CFA: "+e),null}}))}}La.defaultConfiguration=new Ma(Aa.cfa);const Fa=Object.freeze({}),Ba=Object.freeze({}),Ua=Aa.itemFeed,Va="abcn",xa={lf:"longform",sf:"shortform",live:"longform"},ja={"abcn:fivethirtyeight":"fivethirtyeight",abcn:"abcnews"},za={name:"abc_news_live",type:"linear"},Ga=["HLS_ALL","PDL_MED","PDL_LOW"];function Wa(e){const t=(e||Fa).channel||Fa,o=t.item||Fa,n=o["media-group"]||Fa,r=n["media-content"]||Ba,i=n["media-title"],a=(function(e){var t,o;const n=Ga.length,r=e.length;for(let i=0;i<n;i++){const n=Ga[i];for(let i=0;i<r;i++){const r=e[i];if((null===(o=null===(t=null==r?void 0:r["media-category"])||void 0===t?void 0:t["@attributes"])||void 0===o?void 0:o.label)===n)return r}}}(r)||Fa)["@attributes"]||Fa,s=(n["media-thumbnail"]||Fa)["@attributes"]||Fa,{guid:d,title:l,temporalType:c,timestamp:u,link:p}=o,{duration:h,url:m,medium:y}=a,f=(o.omniture||Fa).channel||"",[g=Va]=String(f).split(":"),v=ja[f]||ja[g]||"abcnews",b="vod"===c,A="live"===c,E=xa[o.videoContentType]||(b?"shortform":"longform"),T=i||l,S=t.language||"en";let w,P;try{[w,P]=new Date(u).toISOString().split("T")}catch(e){console.warn(e)}const k="akamai live stream"!==o.mediatype||b?{}:Object.assign(Object.assign({},za),{id:d}),_={id:d,apiSource:Ua,seasonNumber:"none",eventId:"none",episodeNumber:"none",genre:"news",tvrating:"none",network:k,show:{title:T},title:T,duration:h,language:S,source:{url:m,type:"none"},description:o.description||n["media-description"],authenticationTypes:["NONE"],mrss:null,seekInSeconds:null,brand:v,type:"video"===y?"video":"audio",entityType:E,streamType:A?"live":"onDemand",images:s?[{url:s.url}]:null,airDate:o.timestamp,availableDate:o.pubDate,references:{itemfeed:d},tracking:{omniture:o.omniture,nielsen:{type:"content",assetid:d,program:T,title:T},conviva:{assetName:l,duration:h,streamURL:m,custom:{contentId:d,assetType:b?"clip":"live",sport:"none",league:"none",appBrand:o.category||"abcnews"}},heartbeats:{ContentDuration:h,isFullEpisode:"shortform"===E||A?"n":"y",VideoType:c,CMSID:T,PublishDate:w,PublishTime:P}},webHref:p};return Ca.fromObject(_)}var qa=new RegExp("%[a-f0-9]{2}","gi"),Ya=new RegExp("(%[a-f0-9]{2})+","gi");function Ha(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var o=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Ha(o),Ha(n))}function Ka(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(qa),o=1;o<t.length;o++)t=(e=Ha(t,o).join("")).match(qa);return e}}var $a=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},o=Ya.exec(e);o;){try{t[o[0]]=decodeURIComponent(o[0])}catch(e){var n=Ka(o[0]);n!==o[0]&&(t[o[0]]=n)}o=Ya.exec(e)}t["%C2"]="ï¿½";for(var r=Object.keys(t),i=0;i<r.length;i++){var a=r[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}(e)}},Xa=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const o=e.indexOf(t);return-1===o?[e]:[e.slice(0,o),e.slice(o+t.length)]},Qa=function(e,t){for(var o={},n=Object.keys(e),r=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],s=e[a];(r?-1!==t.indexOf(a):t(a,s,e))&&(o[a]=s)}return o},Za=t((function(e,t){function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function n(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()):encodeURIComponent(e):e}function r(e,t){return t.decode?$a(e):e}function i(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function a(e){const t=(e=i(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function s(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,o,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=o):n[e]=o};case"bracket":return(e,o,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],o):n[e]=[o]:n[e]=o};case"comma":case"separator":return(t,o,n)=>{const i="string"==typeof o&&o.includes(e.arrayFormatSeparator),a="string"==typeof o&&!i&&r(o,e).includes(e.arrayFormatSeparator);o=a?r(o,e):o;const s=i||a?o.split(e.arrayFormatSeparator).map(t=>r(t,e)):null===o?o:r(o,e);n[t]=s};default:return(e,t,o)=>{void 0!==o[e]?o[e]=[].concat(o[e],t):o[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const o of e.split("&")){if(""===o)continue;let[e,a]=Xa(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:r(a,t),n(r(e,t),a,i)}for(const e of Object.keys(i)){const o=i[e];if("object"==typeof o&&null!==o)for(const e of Object.keys(o))o[e]=s(o[e],t);else i[e]=s(o,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{const o=i[t];return Boolean(o)&&"object"==typeof o&&!Array.isArray(o)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(o):e[t]=o,e},Object.create(null))}t.extract=a,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=o=>t.skipNull&&null==e[o]||t.skipEmptyString&&""===e[o],i=function(e){switch(e.arrayFormat){case"index":return t=>(o,r)=>{const i=o.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?o:null===r?[...o,[n(t,e),"[",i,"]"].join("")]:[...o,[n(t,e),"[",n(i,e),"]=",n(r,e)].join("")]};case"bracket":return t=>(o,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?o:null===r?[...o,[n(t,e),"[]"].join("")]:[...o,[n(t,e),"[]=",n(r,e)].join("")];case"comma":case"separator":return t=>(o,r)=>null==r||0===r.length?o:0===o.length?[[n(t,e),"=",n(r,e)].join("")]:[[o,n(r,e)].join(e.arrayFormatSeparator)];default:return t=>(o,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?o:null===r?[...o,n(t,e)]:[...o,[n(t,e),"=",n(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))r(t)||(a[t]=e[t]);const s=Object.keys(a);return!1!==t.sort&&s.sort(t.sort),s.map(o=>{const r=e[o];return void 0===r?"":null===r?n(o,t):Array.isArray(r)?r.reduce(i(o),[]).join("&"):n(o,t)+"="+n(r,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[o,n]=Xa(e,"#");return Object.assign({url:o.split("?")[0]||"",query:d(a(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:r(n,t)}:{})},t.stringifyUrl=(e,o)=>{o=Object.assign({encode:!0,strict:!0},o);const r=i(e.url).split("?")[0]||"",a=t.extract(e.url),s=t.parse(a,{sort:!1}),d=Object.assign(s,e.query);let l=t.stringify(d,o);l&&(l="?"+l);let c=function(e){let t="";const o=e.indexOf("#");return-1!==o&&(t=e.slice(o)),t}(e.url);return e.fragmentIdentifier&&(c="#"+n(e.fragmentIdentifier,o)),`${r}${l}${c}`},t.pick=(e,o,n)=>{n=Object.assign({parseFragmentIdentifier:!0},n);const{url:r,query:i,fragmentIdentifier:a}=t.parseUrl(e,n);return t.stringifyUrl({url:r,query:Qa(i,o),fragmentIdentifier:a},n)},t.exclude=(e,o,n)=>{const r=Array.isArray(o)?e=>!o.includes(e):(e,t)=>!o(e,t);return t.pick(e,r,n)}}));Za.extract,Za.parse,Za.stringify,Za.parseUrl,Za.stringifyUrl,Za.pick,Za.exclude;class Ja{constructor(){this.configuration_=Ja.defaultConfiguration}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Ri(this,void 0,void 0,(function*(){return yield Ja.fetchMediaItems(e,t,this.configuration)}))}static fetchMediaItems(e,t,o){return Ri(this,void 0,void 0,(function*(){const t=e.map(e=>new Ra(e)),{serviceUrl:n}=o;return(yield Promise.all(t.map(e=>Ja.getPromiseMediaItem(e,n)))).filter(e=>!(e instanceof Error)&&e instanceof Ca)}))}static getPromiseMediaItem(e,t){return Ri(this,void 0,void 0,(function*(){const o=Za.stringify({id:e.id||e.channel});try{const e=yield fetch(`${t}?${o}&requester=guardians`),n=yield e.json();return Wa(n)}catch(e){return Ia.warn("Failed to retrieve MediaItem from ItemFeed endpoint: "+e),null}}))}}Ja.defaultConfiguration=new Ma(Aa.itemFeed);class es{get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Ri(this,void 0,void 0,(function*(){const o=t||{sourceVariant:null};return yield Promise.all(e.map(e=>Ri(this,void 0,void 0,(function*(){let t,n;t=e.match("natgeo")?La:e.match("abcnews")?Ja:Oa;const r=new t;r.configuration=this.configuration||r.configuration;try{const t=yield r.getMediaItems([e],o);n=null==t?void 0:t[0]}catch(e){}return n}))))}))}}var ts=new class extends ra{constructor(){super(),this.player_=null,this.session_=null,this.adapterConfigs_={},this.stats={instantiatedTimeStamp:void 0,loadedTimeStamp:void 0,startedTimeStamp:void 0,finishedTimeStamp:void 0}}setAdapterConfig(e){this.adapterConfigs_=e||{}}setPlayer(e){this.player_=e}setPlaybackSession(e){this.session_=e?{playbackUrl:e.playbackUrl,playbackConfig:e.playbackConfig}:null}playerBundleEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlayerBundleEvent",trail:e.breadcrumbs,...e.additionalData},t)}playbackAuthenticationFlowEvent(e,t){if(!this.enabled_)return;let{authN:o}=e;o||(o=this.adapterConfigs_.authorizationPayload),this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlaybackAuthenticationFlow","authentication.type":o?o.authenticationType:void 0,"authentication.provider":o&&o.authenticatedProvider?o.authenticatedProvider.id:void 0,trail:e.breadcrumbs,...e.additionalData},t)}mediaItemFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"MediaItemFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),trail:e.breadcrumbs,...e.additionalData},t)}playbackAccessFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlaybackAccessFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),...this.playbackAccessFlowEventSpecific_(e.payloadOrBAM),trail:e.breadcrumbs,...e.additionalData},t)}playbackSessionFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlaybackSessionFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),...this.playbackAccessFlowEventSpecific_(e.payloadOrBAM),...this.playbackSessionFlowEventSpecific_(e.session),trail:e.breadcrumbs,...e.additionalData},t)}mediaPlayerFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"MediaPlayerFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),...this.playbackAccessFlowEventSpecific_(e.payloadOrBAM),...this.playbackSessionFlowEventSpecific_(e.session),...this.mediaPlayerFlowEventSpecific_(),trail:e.breadcrumbs,...e.additionalData},t)}isErrorException(e){return e instanceof yi}parseAndSendPlaybackSessionError(e,t){let o=t;if(!this.isErrorException(t)){const n=["missingMediaSourceType","notAuthorized"],r={concurrencyInitializationFailed:fi[li.CONCURRENCY_LIMIT_REACHED],missingMediaSourceType:fi[li.DAMAGED_MEDIA_DATA],notAuthorized:fi[li.NOT_ENTITLED],noAuthButler:fi[li.DAMAGED_MEDIA_DATA],noShieldFetchAPI:fi[li.DAMAGED_MEDIA_DATA],startSessionFetchFailed:fi[li.INVALID_MEDIA],entitlementFetchFailed:fi[li.INVALID_MEDIA],shieldFetchFailed:fi[li.INVALID_MEDIA]},i={[Sa.shield]:vi.SHIELD,[Sa.startSession]:vi.SHIELD,[Sa.none]:vi.SHIELD,[Sa.entitlement]:vi.ENTITLEMENT};let a=this.getErrorReason()||"",s=gi.PLAYBACK_ACCESS,d=vi.PLAYBACK_ACCESS_MANAGER;const l=Ji(n).call(n,a);l&&(s=gi.PLAYBACK_SESSION,d=vi.SHIELD,e&&e.source&&e.source.type&&i[e.source.type]&&(d=i[e.source.type])),a=r[a]||fi[li.UNEXPECTED_ERROR],o=Pi[a]({segment:di.PLAYER_CORE,component:s,feature:d,errorCode:bi.PLAYER_UNKNOWN,message:"playback session failed",cause:t}),l?this.playbackAccessFlowEvent({},o):this.playbackSessionFlowEvent({},o)}}generatePlayerBundleUnexpectedError(e,t,o){return Pi.unexpectedError({segment:di.PLAYER_CORE,component:gi.MEDIA_PLAYER,feature:vi.PLAYER_ADAPTER_BUNDLE,errorCode:e,message:t,cause:o})}generatePluginBundleUnexpectedError(e,t,o,n=ai.FAILURE){return Pi.unexpectedError({segment:di.PLAYER_CORE,component:gi.PLAYER_PLUGIN,feature:vi.PLAYER_ADAPTER_BUNDLE,severity:n,errorCode:e,message:t,cause:o})}generatePlayerPluginConcurrenceLimit(e,t){return Pi.concurrencyLimitReached({segment:di.PLAYER_CORE,component:gi.PLAYER_PLUGIN,feature:vi.CONCURRENCY_MONITORING,errorCode:bi.CONCURRENCY_LIMIT_REACHED,message:e,cause:t})}generatePlayerSessionShieldDRMRequired(e,t,o){return Pi.concurrencyLimitReached({segment:di.PLAYER_CORE,component:gi.PLAYBACK_SESSION,feature:vi.SHIELD,errorCode:e||bi.SHIELD_DRM_REQUIRED,message:t,cause:o})}generateMediaItemTemporarilyUnavailable(e,t,o,n){return Pi.unexpectedError({segment:di.PLAYER_CORE,component:gi.MEDIA_ITEM,feature:Pi.defineMediaItemFeatureByIdentifier(e||""),errorCode:t||Pi.defineMediaItemErrorCodesByIdentifier(e||""),message:o,cause:n})}generateMediaItemInvalid(e,t,o,n){return Pi.invalidMedia({segment:di.PLAYER_CORE,component:gi.MEDIA_ITEM,feature:Pi.defineMediaItemFeatureByIdentifier(e||""),errorCode:t,message:o,cause:n})}generatePlayerDRMLicenseFailed(e,t){return Pi.playreadyLicenseFailed({segment:di.PLAYER_CORE,component:gi.MEDIA_PLAYER,feature:vi.DIGITAL_RIGHTS_MANAGEMENT,errorCode:bi.PLAYREADY_LICENSE_FAILED,severity:ai.WARNING,cause:t,message:e})}generatePluginEndCardFailed(e,t,o){return Pi.unexpectedError({segment:di.PLAYER_UI,component:gi.PLAYER_PLUGIN,feature:vi.END_CARD_UI,errorCode:e,cause:o,message:t})}mediaPlayerFlowEventSpecific_(){const{player_:e}=this;return e?{"player.dateInstantiated":this.stats.instantiatedTimeStamp?new Date(this.stats.instantiatedTimeStamp).toUTCString():void 0,"player.dateLoaded":this.stats.loadedTimeStamp?new Date(this.stats.loadedTimeStamp).toUTCString():void 0,"player.dateStarted":"playTimestamp"in e?new Date(e.playTimestamp).toUTCString():void 0,"player.dateFinished":this.stats.finishedTimeStamp?new Date(this.stats.finishedTimeStamp).toUTCString():void 0,"player.progress":e.currentTime()}:{}}playbackSessionFlowEventSpecific_(e){let t=e;return t||(t=this.session_),t?{"session.playbackUrl":t.playbackUrl,"session.contentType":t.playbackConfig?t.playbackConfig.contentType:void 0,"session.keySystem":t.playbackConfig?t.playbackConfig.keySystem:void 0,"session.licenseUrl":t.playbackConfig?t.playbackConfig.licenseUrl:void 0,...this.getPlayerInfo()}:{}}mediaItemFlowEventSpecific_(e){let t=e;return!t&&this.player_&&(t=this.player_.mediaItem),t?{playbackIdentifier:this.adapterConfigs_.identifier,"mediaItem.id":"id"in t?t.id:void 0,"mediaItem.authenticationTypes":"authenticationTypes"in t?t.authenticationTypes:void 0,"mediaItem.source.type":t.source&&"type"in t.source?t.source.type:void 0,"mediaItem.source.url":t.source&&"url"in t.source?t.source.url:void 0,"mediaItem.streamType":"streamType"in t?t.streamType:void 0,"mediaItem.duration":"duration"in t?t.duration:void 0,"mediaItem.brand":"brand"in t?t.brand:void 0,"mediaItem.apiSource":"apiSource"in t?t.apiSource:void 0,"mediaItem.entityType":"entityType"in t?t.entityType:void 0}:{}}playbackAccessFlowEventSpecific_(e){let t=e;return t||(t=this.adapterConfigs_.authorizationPayload),t?{"payload.authenticationType":t?t.authenticationType:void 0,"payload.authenticatedIdentity":t?t.authenticatedIdentity:void 0,"payload.authenticatedProvider":t&&t.authenticatedProvider?t.authenticatedProvider.id:void 0,"payload.token":t&&t.customData?t.customData.token:void 0,"payload.tokenType":t&&t.customData?t.customData.tokenType:void 0,"payload.resource":t&&t.customData?t.customData.resource:void 0}:{}}getPlayerInfo(){const e=this.player_;if(!e)return{};const{vhs:t,dash:o}=e;if(t)return this.getPlayerInfoFromVHS_(t);if(o){const{shakaPlayer:e}=o;if(e)return this.getPlayerInfoFromShaka_(e)}return{}}getPlayerInfoFromVHS_(e={}){const{stats:{bandwidth:t,buffered:o,currentSource:{src:n}={},currentTime:r,mediaRequestsErrored:i,playerDimensions:{height:a,width:s}={},mediaSecondsLoaded:d,videoPlaybackQuality:{corruptedVideoFrames:l}={}}={}}=e;return{currentSource:n,bandwidth:t,buffered:o?o.length:void 0,currentTime:r,mediaRequestsErrored:i,mediaSecondsLoaded:d,corruptedVideoFrames:l,playerHeight:a,playerWidth:s,mediaType:"VHS"}}getPlayerInfoFromShaka_(e){if(!e)return{};const t="function"==typeof e.getStats?e.getStats():{},o="function"==typeof e.getBufferedInfo?e.getBufferedInfo():{};return{currentSource:"function"==typeof e.getAssetUri?e.getAssetUri():void 0,bandwidth:t.streamBandwidth,buffered:o?o.total:void 0,currentTime:t.playTime,corruptedVideoFrames:t.corruptedFrames,playerHeight:t.height,playerWidth:t.width,loadLatency:t.loadLatency,mediaType:"Dash"}}},os=Array.isArray||function(e){return"Array"==_(e)},ns=ge("species"),rs=i.Array,is=function(e,t){return new(function(e){var t;return os(e)&&(t=e.constructor,(bn(t)&&(t===rs||os(t.prototype))||O(t)&&null===(t=t[ns]))&&(t=void 0)),void 0===t?rs:t}(e))(0===t?0:t)},as=f([].push),ss=function(e){var t=1==e,o=2==e,n=3==e,r=4==e,i=6==e,a=7==e,s=5==e||i;return function(d,l,c,u){for(var p,h,m=ae(d),y=I(m),f=Fe(l,c),g=pt(y),v=0,b=u||is,A=t?b(d,g):o||a?b(d,0):void 0;g>v;v++)if((s||v in y)&&(h=f(p=y[v],v,m),e))if(t)A[v]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return v;case 2:as(A,p)}else switch(e){case 4:return!1;case 7:as(A,p)}return i?-1:n||r?r:A}},ds={forEach:ss(0),map:ss(1),filter:ss(2),some:ss(3),every:ss(4),find:ss(5),findIndex:ss(6),filterReject:ss(7)},ls=ge("species"),cs=function(e){return q>=51||!a((function(){var t=[];return(t.constructor={})[ls]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},us=ds.map,ps=cs("map");Ke({target:"Array",proto:!0,forced:!ps},{map:function(e){return us(this,e,arguments.length>1?arguments[1]:void 0)}});var hs=zi("Array").map,ms=Array.prototype,ys=function(e){var t=e.map;return e===ms||U(ms,e)&&t===ms.map?hs:t};const fs={url:e=>new ci((t,o)=>{const n=document.createElement("script");n.type="text/javascript",n.src=e,n.addEventListener("load",()=>t(n),!1),n.addEventListener("error",()=>o(n),!1),document.body.appendChild(n)}),urls:e=>ci.allSettled(ys(e).call(e,fs.url))};var gs=i.Function,vs=f([].concat),bs=f([].join),As={},Es=function(e,t,o){if(!de(As,t)){for(var n=[],r=0;r<t;r++)n[r]="a["+r+"]";As[t]=gs("C,a","return new C("+bs(n,",")+")")}return As[t](e,o)},Ts=s?gs.bind:function(e){var t=J(this),o=t.prototype,n=Sn(arguments,1),r=function(){var o=vs(n,Sn(arguments));return this instanceof r?Es(t,o.length,o):t.apply(e,o)};return O(o)&&(r.prototype=o),r};Ke({target:"Function",proto:!0,forced:Function.bind!==Ts},{bind:Ts});var Ss=zi("Function").bind,ws=Function.prototype,Ps=function(e){var t=e.bind;return e===ws||U(ws,e)&&t===ws.bind?Ss:t};Ke({target:"Array",stat:!0},{isArray:os});var ks=L.Array.isArray,_s=function(e,t,o){var n=Ee(t);n in e?We.f(e,n,w(0,o)):e[n]=o},Cs=i.Array,Rs=Math.max,Is=function(e,t,o){for(var n=pt(e),r=ct(t,n),i=ct(void 0===o?n:o,n),a=Cs(Rs(i-r,0)),s=0;r<i;r++,s++)_s(a,s,e[r]);return a.length=s,a},Ds=Math.floor,Ns=function(e,t){var o=e.length,n=Ds(o/2);return o<8?Ms(e,t):Os(e,Ns(Is(e,0,n),t),Ns(Is(e,n),t),t)},Ms=function(e,t){for(var o,n,r=e.length,i=1;i<r;){for(n=i,o=e[i];n&&t(e[n-1],o)>0;)e[n]=e[--n];n!==i++&&(e[n]=o)}return e},Os=function(e,t,o,n){for(var r=t.length,i=o.length,a=0,s=0;a<r||s<i;)e[a+s]=a<r&&s<i?n(t[a],o[s])<=0?t[a++]:o[s++]:a<r?t[a++]:o[s++];return e},Ls=Ns,Fs=function(e,t){var o=[][e];return!!o&&a((function(){o.call(null,t||function(){throw 1},1)}))},Bs=V.match(/firefox\/(\d+)/i),Us=!!Bs&&+Bs[1],Vs=/MSIE|Trident/.test(V),xs=V.match(/AppleWebKit\/(\d+)\./),js=!!xs&&+xs[1],zs=[],Gs=f(zs.sort),Ws=f(zs.push),qs=a((function(){zs.sort(void 0)})),Ys=a((function(){zs.sort(null)})),Hs=Fs("sort"),Ks=!a((function(){if(q)return q<70;if(!(Us&&Us>3)){if(Vs)return!0;if(js)return js<603;var e,t,o,n,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(n=0;n<47;n++)zs.push({k:t+n,v:o})}for(zs.sort((function(e,t){return t.v-e.v})),n=0;n<zs.length;n++)t=zs[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));Ke({target:"Array",proto:!0,forced:qs||!Ys||!Hs||!Ks},{sort:function(e){void 0!==e&&J(e);var t=ae(this);if(Ks)return void 0===e?Gs(t):Gs(t,e);var o,n,r=[],i=pt(t);for(n=0;n<i;n++)n in t&&Ws(r,t[n]);for(Ls(r,function(e){return function(t,o){return void 0===o?-1:void 0===t?1:void 0!==e?+e(t,o)||0:ro(t)>ro(o)?1:-1}}(e)),o=r.length,n=0;n<o;)t[n]=r[n++];for(;n<i;)delete t[n++];return t}});var $s=zi("Array").sort,Xs=Array.prototype,Qs=function(e){var t=e.sort;return e===Xs||U(Xs,e)&&t===Xs.sort?$s:t},Zs="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Js=f("".replace),ed="["+Zs+"]",td=RegExp("^"+ed+ed+"*"),od=RegExp(ed+ed+"*$"),nd=function(e){return function(t){var o=ro(N(t));return 1&e&&(o=Js(o,td,"")),2&e&&(o=Js(o,od,"")),o}},rd={start:nd(1),end:nd(2),trim:nd(3)},id=rd.trim,ad=f("".charAt),sd=i.parseFloat,dd=i.Symbol,ld=dd&&dd.iterator,cd=1/sd(Zs+"-0")!=-1/0||ld&&!a((function(){sd(Object(ld))}))?function(e){var t=id(ro(e)),o=sd(t);return 0===o&&"-"==ad(t,0)?-0:o}:sd;Ke({global:!0,forced:parseFloat!=cd},{parseFloat:cd});var ud=L.parseFloat,pd=/MSIE .\./.test(V),hd=i.Function,md=function(e){return function(t,o){var n=Pn(arguments.length,1)>2,r=g(t)?t:hd(t),i=n?Sn(arguments,2):void 0;return e(n?function(){u(r,this,i)}:r,o)}};Ke({global:!0,bind:!0,forced:pd},{setTimeout:md(i.setTimeout),setInterval:md(i.setInterval)});var yd=L.setTimeout,fd=i.Date,gd=f(fd.prototype.getTime);Ke({target:"Date",stat:!0},{now:function(){return gd(new fd)}});var vd=L.Date.now,bd=mt.indexOf,Ad=f([].indexOf),Ed=!!Ad&&1/Ad([1],1,-0)<0,Td=Fs("indexOf");Ke({target:"Array",proto:!0,forced:Ed||!Td},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Ed?Ad(this,e,t)||0:bd(this,e,t)}});var Sd=zi("Array").indexOf,wd=Array.prototype,Pd=function(e){var t=e.indexOf;return e===wd||U(wd,e)&&t===wd.indexOf?Sd:t},kd=ds.forEach,_d=Fs("forEach")?[].forEach:function(e){return kd(this,e,arguments.length>1?arguments[1]:void 0)};Ke({target:"Array",proto:!0,forced:[].forEach!=_d},{forEach:_d});var Cd=zi("Array").forEach,Rd=Array.prototype,Id={DOMTokenList:!0,NodeList:!0},Dd=function(e){var t=e.forEach;return e===Rd||U(Rd,e)&&t===Rd.forEach||de(Id,Kt(e))?Cd:t};var Nd=cs("slice"),Md=ge("species"),Od=i.Array,Ld=Math.max;Ke({target:"Array",proto:!0,forced:!Nd},{slice:function(e,t){var o,n,r,i=M(this),a=pt(i),s=ct(e,a),d=ct(void 0===t?a:t,a);if(os(i)&&(o=i.constructor,(bn(o)&&(o===Od||os(o.prototype))||O(o)&&null===(o=o[Md]))&&(o=void 0),o===Od||void 0===o))return Sn(i,s,d);for(n=new(void 0===o?Od:o)(Ld(d-s,0)),r=0;s<d;s++,r++)s in i&&_s(n,r,i[s]);return n.length=r,n}});var Fd=zi("Array").slice,Bd=Array.prototype,Ud=function(e){var t=e.slice;return e===Bd||U(Bd,e)&&t===Bd.slice?Fd:t};const Vd=new class{constructor(e,t){this.serviceUrl=e,this.appVersion=t}}("https://prod.gatekeeper.us-abc.symphony.edgedatg.com/api/ws/pluto/v1/layout","1.0.0");class xd{constructor(e=Vd){this.configuration_=e}getMediaItems(e,t){return Ri(this,void 0,void 0,(function*(){return Promise.all(e.map(e=>this.getMediaItem(e,t)))}))}getMediaItem(e,t){return Ri(this,void 0,void 0,(function*(){const o=this.getLayoutURLFromParams(Object.assign(Object.assign({},t),{identifier:e})),n=(yield this.getLayout(o)).modules.filter(e=>"videoplayer"==e.type)[0];if(!n)throw new Error("Layout is missing Video Player module");"live_player"===t.type&&(n.resource=n.resource.replace("{affiliate}",e));const r=yield this.getVideoPlayerModule(n.resource);return this.getMediaItemFromVideoPlayer(r)}))}getLayoutURLFromParams(e){if(!e.brand||!e.device||!e.type)throw new Error("Cannot create layout url, missing parameters");const t={brand:e.brand,device:e.device};if("vod_player"==e.type){if(!e.identifier)throw new Error("Cannot create layout url, missing video id");t.type="vod_player",t.video=e.identifier}"live_player"==e.type&&(t.type="live_player",t.authlevel="1",t.affiliate=e.identifier||"",e.channel&&(t.channel=e.channel),e.video&&(t.video=e.video));const o=Object.keys(t).map(e=>e+"="+(t[e]||"")).join("&"),n=-1===this.configuration_.serviceUrl.indexOf("?")?"?":"&";return`${this.configuration_.serviceUrl}${n}${o}`}getMediaItemFromVideoPlayer(e){return e.video?this.getMediaItemForVOD(e):e.channels?this.getMediaItemForChannel(e):void 0}getMediaItemForChannel(e){var t;if(0==e.channels.length)throw new Error("Live video player module has no channels");const o=e.channels[0],n=new Ca(o.id,o.title,0,"en",null);n.description=o.description,n.authenticationTypes="0"==o.accesslevel?[Ta.none]:[Ta.mvpd];const r=mi(o.brand);return n.brand=r,n.mrss=this.getAdobeMRSS(n.id,n.title,hi(r),o.tvrating),n.streamType=pa.live,n.type=va.video,n.apiSource=Aa.pluto,n.availableDate=o.availdate,n.network=new Pa(o.aff,da.linear,o.title,hi(r)),n.images=null===(t=o.previews)||void 0===t?void 0:t.map(e=>new ka(e.value)),n}getMediaItemForVOD(e){const t=new Ca(e.video.id,e.video.title,e.video.duration,e.video.show.language,null);t.description=e.video.description,t.authenticationTypes="0"==e.video.accesslevel?[Ta.none]:[Ta.mvpd];const o=mi(e.video.brand);return t.brand=o,t.mrss=this.getAdobeMRSS(t.id,t.title,hi(o),e.video.rating.value),t.show=e.video.show,t.cues=e.video.cues,t.adTarget=e.video.adTarget,t.adUnitId=e.adUnitId,t.streamType=pa.onDemand,t.type=va.video,t.apiSource=Aa.pluto,t.entityType="lf"==e.video.type?fa.longform:fa.shortform,t.seasonNumber=e.video.seasonnumber,t.episodeNumber=e.video.episodenumber,t.videoShowGenre=e.video.show.genre,t.tmsid=e.video.tmsid,t.availableDate=e.video.availableDate,t.airDate=e.video.displayAirtime,t.images=e.images.map(e=>new ka(e.value)),t}getLayout(e){return Ri(this,void 0,void 0,(function*(){const t={appversion:this.configuration_.appVersion};return fetch(e,{headers:t}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e)}))}getVideoPlayerModule(e){return Ri(this,void 0,void 0,(function*(){const t={appversion:this.configuration_.appVersion};return fetch(e,{headers:t}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e)}))}getAdobeMRSS(e,t,o,n){let r="urn:mpaa";n&&0!==n.length||(n="TV-Y"),0===n.indexOf("TV-")&&(r="urn:v-chip");const i=this.xmlSanitize(e),a=this.xmlSanitize(t);let s='<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel>';return s+="<title>"+this.xmlSanitize(o)+"</title>",s+="<item>",s+="<title><![CDATA["+a+"]]></title>",s+="<guid>"+i+"</guid>",s+='<media:rating scheme="'+this.xmlSanitize(r)+'">'+this.xmlSanitize(n)+"</media:rating>",s+="</item></channel></rss>",s}xmlSanitize(e){let t=e.replace("&","&amp;");return t=t.replace("<","&lt;"),t=t.replace(">","&gt;"),t=t.replace('"',"&quot;"),t=t.replace("'","&apos;"),t}}class jd{constructor(e,t,o){this.contentType=e,this.keySystem=t,this.licenseUrl=o}}class zd{constructor(e){this.playbackUrl=e,this.textTracks=[]}get convivaContentMetadata(){const e={accessType:null,mvpd:null};this.authenticationType&&(e.accessType=this.authenticationType&&this.authenticationType.toLowerCase()||"free",this.authenticatedProvider&&this.authenticationType===Ta.mvpd&&(e.mvpd=this.authenticatedProvider.id));const t=this.mediaItem&&this.mediaItem.tracking[ma.conviva]||{},o={streamUrl:this.playbackUrl,custom:Object.assign(t.custom||{},e)};return Object.assign(t,o)}toString(){return`<PlaybackSession playbackUrl:${this.playbackUrl}, authenticationType:${this.authenticationType}, authenticatedProvider:${this.authenticatedProvider}>`}}var Gd;!function(e){e.none="none",e.fairPlay="fairplay",e.playReady="playready",e.widevine="widevine"}(Gd||(Gd={}));var Wd,qd=Gd;!function(e){e.none="HLS",e.hlsFairplay="HLS_FAIRPLAY",e.dashPlayReady="DASH_PLAYREADY",e.dashWidevine="DASH_WIDEVINE"}(Wd||(Wd={}));var Yd=Wd;class Hd{initPlaybackSession(e,t,o){let n=e.source.url;if(e.source.variant===ca.stitchedPreroll){const e=t.dictionaryForBrightcove();Object.keys(e).forEach(t=>{n=function(e,t,o){const n=-1===o.indexOf("?")?"?":"&";return`${o+n+e}=${encodeURIComponent(t)}`}(t,e[t].toString(),n)})}Ia.debug(n,e);const r=new zd(n);return r.mediaItem=e,r.seekToTime=e.seekInSeconds,r.authenticationType=o.authenticationType,r.authenticatedProvider=o.authenticatedProvider,r.authenticatedIdentity=o.authenticatedIdentity,Promise.resolve(r)}}var Kd=t((function(e,t){var o;e.exports=o=o||function(e,t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),n={},r=n.lib={},i=r.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<r;i++){var a=o[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<r;i+=4)t[n+i>>>2]=o[i>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,n=[],r=function(t){t=t;var o=987654321,n=4294967295;return function(){var r=((o=36969*(65535&o)+(o>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=r(4294967296*(o||e.random()));o=987654071*s(),n.push(4294967296*s()|0)}return new a.init(n,t)}}),s=n.enc={},d=s.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(o,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(o,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,n=o.words,r=o.sigBytes,i=this.blockSize,s=r/(4*i),d=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,l=e.min(4*d,r);if(d){for(var c=0;c<d;c+=i)this._doProcessBlock(n,c);var u=n.splice(0,d);o.sigBytes-=l}return new a.init(u,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new p.HMAC.init(e,o).finalize(t)}}});var p=n.algo={};return n}(Math)})),$d=t((function(e,t){var o,n,r;e.exports=(n=(o=r=Kd).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var r=[],i=0;i<o;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<o;s++)r.push(n.charAt(a>>>6*(3-s)&63));var d=n.charAt(64);if(d)for(;r.length%4;)r.push(d);return r.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<o.length;i++)r[o.charCodeAt(i)]=i}var a=o.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,o){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=o[e.charCodeAt(a-1)]<<a%4*2,d=o[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=(s|d)<<24-i%4*8,i++}return n.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)})),Xd=t((function(e,t){e.exports=Kd.enc.Utf8}));function Qd(e){const t=e+":";return{Authorization:"Basic "+$d.stringify(Xd.parse(t)),Accept:"application/json"}}const Zd="live",Jd="vod",el="accountId",tl="applicationId",ol="applicationPlatform",nl="channel",rl="contentType",il="contractType",al="deviceModel",sl="hba",dl="mobileDevice",ll="programmerName",cl="ship",ul="region";class pl{constructor(e,t,o,n,r){t&&o&&n&&(this.programmer=e,this.applicationId=t,this.identityProvider=encodeURIComponent(o),this.subject=encodeURIComponent(n),this.metadata=r||{},this.serviceUrl="https://streams.adobeprimetime.com/v2",this.requestHeaders=Qd(t),this.heartbeatIntervalId=null,this.messages={})}static fetchMetadataKeys(e,t){return Ri(this,void 0,void 0,(function*(){const o=t+"/metadata",n={method:"GET",headers:Qd(e)};try{const t=yield fetch(o,n);if(t){const o=yield t.json();return pl.setLocalStorageByAppID(o,e),!0}return!1}catch(e){return console.log("fetchMetadataKeys error: "+e),!1}}))}static setLocalStorageByAppID(e,t){const o="AdobeCM.metadata."+t;localStorage.setItem(o,JSON.stringify(e))}get metadataKeys(){return this.getMetadataKeysFromLocalStorage_(this.applicationId)}getMetadataKeysFromLocalStorage_(e){const t="AdobeCM.metadata."+e;let o=[];try{o=JSON.parse(localStorage.getItem(t))||[]}catch(e){console.error("AdobeCM getMetadataKeys error: "+e)}return o}start(){return Ri(this,void 0,void 0,(function*(){const e=yield this.createSession();return e?(this.scheduleHeartbeat(),e):null}))}startWithSession(e){this.sessionId=e,this.scheduleHeartbeat()}stop(){this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=null),this.terminateSession()}createSession(e=[]){return Ri(this,void 0,void 0,(function*(){Ia.debug("AdobeConcurrencyMonitorV2.createSession");const t=`${this.serviceUrl}/sessions/${this.identityProvider}/${this.subject}`,o=Object.assign({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},this.requestHeaders);e.length>0&&(o["X-Terminate"]=e.join(","));const n=this.getMetadata(),r={method:"POST",headers:o,body:Object.keys(n).map(e=>`${e}=${encodeURIComponent(n[e])}`).join("&")};try{const e=yield this.fetchRequest(t,r,!0);if(!e)throw"fetchRequest failed";const{sessionId:o}=e;if(o)return this.sessionId=o,Ia.debug("AdobeConcurrencyMonitorV2.createSession sessionId:",o),o;const{status:n,json:i}=e;throw{status:n,json:i}}catch(e){return Ia.error("AdobeConcurrencyMonitorV2.createSession error: ",e),yield this.handleError(e,!1)}}))}heartbeat(){return Ri(this,void 0,void 0,(function*(){const{sessionId:e}=this;if(!e)return;Ia.debug("AdobeConcurrencyMonitorV2.heartbeat",e);const t=`${this.serviceUrl}/sessions/${this.identityProvider}/${this.subject}/${e}`,o={method:"POST",headers:this.requestHeaders};try{const e=yield this.fetchRequest(t,o,!1);if(!e)throw"fetchRequest failed";if(e.error){const{status:t,json:o}=e;throw{status:t,json:o}}this.scheduleHeartbeat()}catch(e){return Ia.error("AdobeConcurrencyMonitorV2.heartbeat error: ",e),this.handleError(e,!0)}}))}scheduleHeartbeat(){Ia.debug("AdobeConcurrencyMonitorV2.scheduleHeartbeat"),clearTimeout(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setTimeout(()=>{this.heartbeat()},45e3)}fetchRequest(e,t,o){return Ri(this,void 0,void 0,(function*(){try{const n=yield fetch(e,t),{status:r}=n;if(!(r>=200&&r<300)){return{status:r,json:yield n.clone().json().catch(()=>!!n.text()||null),error:!0}}let i;return o&&(i=n.headers.get("location").trim()),{sessionId:i,status:r,error:!1}}catch(e){if(console.error("AdobeCM fetchRequest: "+e),e&&409===e.status&&"function"==typeof e.json){return{status:409,json:yield e.json(),error:!0}}return e}}))}terminateSession(){return Ri(this,void 0,void 0,(function*(){const{sessionId:e}=this;if(e)try{const t=`${this.serviceUrl}/sessions/${this.identityProvider}/${this.subject}/${e}`,o=yield fetch(t,{method:"DELETE",headers:this.requestHeaders}),{status:n}=o;if(!(n>=200&&n<300))throw new Error(`Error - url: ${t}, status: ${n}`)}catch(e){console.error("AdobeCM TerminateSession "+e)}}))}handleError(e,t){Ia.debug("AdobeConcurrencyMonitorV2.handleError",e);const{status:o,json:n}=e;switch(o){case 400:return this.handleError400_(n);case 409:return this.handleError409_(n,t);case 410:return this.handleError410_(n,t)}}handleError400_(e){return Ri(this,void 0,void 0,(function*(){if(!!(e&&e.obligations||[]).find(e=>"logout"===e.action||"refresh"===e.action)){yield pl.fetchMetadataKeys(this.applicationId,this.serviceUrl);const{metadata:e}=this;if(Object.keys(e).length>=this.metadataKeys.length)return this.start()}return null}))}handleError409_(e,t){try{const o=(e&&e.associatedAdvice||[]).find(e=>"rule-violation"===e.type);if(o){const{message:n}=o,r=this.messages[n]||n,i=new Error(r),a=!!(e.obligations||[]).find(e=>"logout"===e.action);if(Ia.debug("AdobeConcurrencyMonitorV2.handleError",409,i,a),!t)throw i;this.onError(i,a)}}catch(e){throw Ia.debug("AdobeConcurrencyMonitorV2.handleError409_: "+e),e}return null}handleError410_(e,t){if(!e)return this.start();try{const o=(e&&e.associatedAdvice||[]).find(e=>"remote-termination"===e.type);if(o){const{message:n}=o,r=this.messages[n]||n,i=new Error(r),a=!!e.obligations.find(e=>"logout"===e.action);if(Ia.debug("AdobeConcurrencyMonitorV2.handleError",410,i,a),!t)throw i;this.onError(i,a)}}catch(e){throw Ia.debug("AdobeConcurrencyMonitorV2.handleError410_: "+e),e}return null}getMetadata(){const{metadataKeys:e}=this;return e.reduce((e,t)=>(e[t]=this.metadata[t],e),{})}onError(e,t){Ia.debug("AdobeConcurrencyMonitor.onError"),Ia.debug("error: "+e),Ia.debug("shouldLogout: "+t)}}var hl=t((function(e,t){var o;e.exports=(o=Kd,function(e){var t=o,n=t.lib,r=n.WordArray,i=n.Hasher,a=t.algo,s=[],d=[];!function(){function t(t){for(var o=e.sqrt(t),n=2;n<=o;n++)if(!(t%n))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)t(n)&&(r<8&&(s[r]=o(e.pow(n,.5))),d[r]=o(e.pow(n,1/3)),r++),n++}();var l=[],c=a.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],s=o[4],c=o[5],u=o[6],p=o[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var m=l[h-15],y=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,f=l[h-2],g=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;l[h]=y+l[h-7]+g+l[h-16]}var v=n&r^n&i^r&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),A=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+d[h]+l[h];p=u,u=c,c=s,s=a+A|0,a=i,i=r,r=n,n=A+(b+v)|0}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+i|0,o[3]=o[3]+a|0,o[4]=o[4]+s|0,o[5]=o[5]+c|0,o[6]=o[6]+u|0,o[7]=o[7]+p|0},_doFinalize:function(){var t=this._data,o=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return o[r>>>5]|=128<<24-r%32,o[14+(r+64>>>9<<4)]=e.floor(n/4294967296),o[15+(r+64>>>9<<4)]=n,t.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(c),t.HmacSHA256=i._createHmacHelper(c)}(Math),o.SHA256)}));class ml{constructor(e,t,o={}){this.programmer=e,this.applicationId=t,this.metadata=o}withSession(e){const{authenticationType:t,authenticatedIdentity:o,authenticatedProvider:n,mediaItem:r}=e;if(t!==Ta.mvpd)return this;const i=o,a=n&&n.id;return this.metadata[el]=i,this.metadata[nl]=r.network&&r.network.id,this.metadata[rl]=r.streamType===pa.live?Zd:Jd,this.metadata[il]="",this.metadata[sl]=!!e.authenticatedProvider&&e.authenticatedProvider.isHomeBasedAuth,this.subject=i,this.identityProvider=a,this}withLocationProvider(e){const t=e.getPublicIPAddress();return this.metadata[cl]=t?hl("m!ck3ym0u$3"+t):null,this.metadata[ul]=e.getRegion()?e.getRegion():null,this}withServiceUrl(e){return this.serviceUrl=e,this}withMessages(e){return this.messages=e,this}build(){if(!this.subject||!this.identityProvider)return null;const e=new pl(this.programmer,this.applicationId,this.identityProvider,this.subject,this.metadata);return this.serviceUrl&&(e.serviceUrl=this.serviceUrl),this.messages&&(e.messages=this.messages||{}),e}}class yl{constructor(e,t){this.partner=e,this.platform=t}startSession(e,t,o,n,r,i){const{partner:a,platform:s}=this,d=["partner="+a,"platform="+s,"token="+encodeURIComponent(o),"tokenType="+n,"v=2.0.0","ttl=21600"];if(r){const e=$d.stringify(Xd.parse(r));d.push("resource="+encodeURIComponent(e))}i&&Object.keys(i).forEach(e=>{d.push(`${e}=${encodeURIComponent(i[e])}`)});const l=/swid=*/g;d.some(e=>l.test(e))||d.push("swid="+encodeURIComponent(t));const c=d.join("&");return fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:c}).then(e=>e.json()).then(e=>{if(!e.session)throw new Error(e.message||`An unexpected error occurred. [${e.abbreviation}]`);return e}).catch(e=>{if(e.message)throw new Error(e.message);return e.json().then(e=>{throw new Error(e.message||`An unexpected error occurred. [${e.abbreviation}]`)})})}}class fl{constructor(e){this.authButler=e}initPlaybackSession(e,t,o){let{url:n}=e.source;e.source.startSessionUrl&&e.source.type===Sa.shield&&(n=e.source.startSessionUrl);try{const e=window&&window.location.protocol;e&&"https:"===e&&(n=n.replace(/^http(s?):/,e))}catch(e){}const{customData:{token:r,tokenType:i,resource:a=e.mrss}}=o,s=t&&t.swid,{authButler:d}=this;if(!d)throw oa.setErrorReason("noAuthButler"),new Error("startSession support not configured");return d.startSession(n,s,r,i,a,t.dictionaryForStartSession()).then(t=>{oa.add($i.T_FSS);const n=function(e,t){const{playbackUrl:o}=e,n=new zd(o);return n.token=t,n}(t,r);return n.mediaItem=e,n.seekToTime=e.seekInSeconds,n.authenticationType=o.authenticationType,n.authenticatedProvider=o.authenticatedProvider,n.authenticatedIdentity=o.authenticatedIdentity,n}).catch(e=>{throw oa.add($i.T_FSSF),oa.setErrorReason("startSessionFetchFailed"),e})}}class gl{initPlaybackSession(e,t,o){const n=new zd(e.source.url);return n.mediaItem=e,n.seekToTime=e.seekInSeconds,n.authenticationType=null==o?void 0:o.authenticationType,n.authenticatedProvider=null==o?void 0:o.authenticatedProvider,n.authenticatedIdentity=null==o?void 0:o.authenticatedIdentity,Promise.resolve(n)}}const vl="ADOBEPASS",bl="JWT",Al="AUTHTOKEN",El=function(e){if(e instanceof Error)throw e;return e.json&&e.json().then(e=>{let t=e.message||`An unexpected error occurred. [${e.exception}]`;throw"com.espn.watch.api.AccessDeniedException"===e.exception&&(t="This content is not available for your package or region."),new Error(t)})};class Tl{constructor(e,t){this.drmSupport=Yd.none,this.palEnabled=!1,this.palMaxLength=3e3,this.serviceUrl="https://watch.auth.api.espn.com",this.apiKey=e,this.serviceUrl=t||"https://watch.auth.api.espn.com"}getAsset(e,t,o,n,r){const i=`${this.serviceUrl}/video/auth/media/${e}/asset`;return this.getAssetForUrl(i,t,o,n,r)}getAssetForUrl(e,t,o,n,r){const i=r||{},a={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"};let s=-1===e.indexOf("?")?"?":"&",d=`${e}${s}apikey=${this.apiKey}`;if(t)if(o===vl){if(i.adobeToken=t,n){const e=$d.stringify(Xd.parse(n));i.adobeResource=e}}else o==bl?a.Authorization="Bearer "+t:o==Al?(s=-1===d.indexOf("?")?"?":"&",d=`${d}${s}authtoken=${t}`):i.token=t;i.drmSupport=this.drmSupport;const l=Object.keys(i).map(e=>`${e}=${encodeURIComponent(i[e])}`).join("&");return fetch(d,{method:"POST",headers:a,credentials:"include",body:l}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>{if(!e.stream){const t=e.message||"An unexpected error occurred.";throw new Error(t)}return e}).catch(El)}}Tl.defaultServiceUrl="https://watch.auth.api.espn.com";class Sl{constructor(e){this.shieldAPI=e}initPlaybackSession(e,t,o){return Ri(this,void 0,void 0,(function*(){const{shieldAPI:n}=this;if(!n)throw oa.setErrorReason("noShieldFetchAPI"),new Error("shield support not configured");const{palEnabled:r,palMaxLength:i}=n,a=o.customData.token,s=o.customData.zipcode,{customData:{tokenType:d,resource:l=e.mrss}={}}=o;if(r&&null===t.palNonce)try{t.palNonce=yield xi.getGooglePalNonce(t,i)}catch(e){console.warn(e)}const c=t.dictionaryForStartSession();s&&(c.zipcode=s);const u=e.source.url;try{const t=yield n.getAssetForUrl(u,a,d,l,c);oa.add($i.T_FSH);const{stream:r,captions:i,streamInfo:s,gatekeeperToken:p}=t,h=new zd(r);return h.mediaItem=e,h.seekToTime=e.seekInSeconds,h.authenticationType=o.authenticationType,h.authenticatedProvider=o.authenticatedProvider,h.authenticatedIdentity=o.authenticatedIdentity,h.token=p,h.playbackConfig=function(e){if(!e)return null;const{streamType:t,licenseAcquisitionUrl:o,certificateUrl:n}=e;switch(t){case"DASH_PLAYREADY":return new jd("application/dash+xml",Gd.playReady,o);case"DASH_WIDEVINE":return new jd("application/dash+xml",Gd.widevine,o);case"HLS_FAIRPLAY":return new jd("application/x-mpegURL",Gd.fairPlay,n);case"HLS":return new jd("application/x-mpegURL",Gd.none);default:return null}}(s),h.textTracks=function(e){if(!e)return[];const t={source:e};return e.endsWith(".vtt")&&(t.contentType="text/vtt"),[t]}(i),h}catch(e){throw oa.add($i.T_FSHF),oa.setErrorReason("shieldFetchFailed"),e}}))}}class wl{constructor(){this.partner=null,this.platform=null,this.apiKey=null,this.deviceId=null,this.authenticators={},this.authorizers={},this.playbackSessionFactories={},this.playbackSessionFactories[Sa.none]=new gl}getAuthenticator(e){return this.authenticators[e]}setAuthenticator(e,t){this.convertToArray(t).forEach(t=>{this.authenticators[t.toString()]=e})}getAuthorizer(e){return this.authorizers[e]}setAuthorizer(e,t){this.convertToArray(t).forEach(t=>{this.authorizers[t.toString()]=e})}getPlaybackSessionFactory(e){return this.playbackSessionFactories[e]}setPlaybackSessionFactory(e,t){this.playbackSessionFactories[t]=e}checkAuthentication(){const e=Object.keys(this.authenticators).map(e=>{const t=this.authenticators[e];return t.checkAuthentication().then(o=>(Ia.debug(e+" authenticator","isAuthenticated: "+o,"authenticatedProvider: "+t.authenticatedProvider),o)).catch(()=>!1)});return Promise.all(e).then(e=>e.every(e=>!0===e))}isAuthenticatedForMediaItem(e){if(e.authenticationTypes.length<1||-1!==e.authenticationTypes.indexOf(Ta.none))return!0;return e.authenticationTypes.map(e=>this.authenticators[e]).filter(e=>e).some(e=>e.isAuthenticated)}isAuthenticatedWithAuthType(e){const t=this.authenticators[e];return!!t&&t.isAuthenticated}authenticateWithAuthType(e,t){const o=this.authenticators[e];if(o)return o.authenticate(t)}checkAuthorization(e,t){if(oa.add($i.CAZ),e.authenticationTypes&&e.authenticationTypes.length<1||-1!==e.authenticationTypes.indexOf(Ta.none)){oa.add($i.CAN_T.replace("T",Ta.none)),oa.add($i.CAZ_T.replace("T",Ta.none));const t=new ki(e.id,e.title,e.images[0].url,e.source.url),o=new _i(Ta.none,t,e.id,{}),n=new Ci(!0,o);return Promise.resolve(n)}const o=[Ta.open,Ta.mvpd,Ta.direct,Ta.isp].filter(t=>-1!==e.authenticationTypes.indexOf(t)),n=o.map(e=>this.authorizers[e]).filter(e=>e&&e.checkAuthorization);return Ia.debug("mediaItem.authTypes:",o),0===n.length?Promise.reject(new Error("no authorizer configured to support authTypes: "+e.authenticationTypes)):function e(t,o,n,r=[]){return n.shift().checkAuthorization(t,o).then(i=>{const{success:a}=i;return a?i:n.length<1?r.length>0?Promise.reject(null):i:e(t,o,n,r)}).catch(i=>{if(n.length>0)return i&&r.push(i),e(t,o,n,r);const a=r[0]||i;if(a)throw a})}(e,t,n)}initPlaybackSession(e,t){return!e.source.type&&e.authenticationTypes.length>0?(oa.setErrorReason("missingMediaSourceType"),Promise.reject(new Error("This event is not currently available."))):this.checkAuthorization(e,t).then(o=>{var n,r,i;Ia.debug("AuthenticationManager.initPlaybackSession.checkAuthorization result:",o.success);const{success:a,payload:s}=o;if(!a)throw oa.setErrorReason("notAuthorized"),new Error("Not authorized.");if(!(null===(n=null==e?void 0:e.source)||void 0===n?void 0:n.type))throw oa.setErrorReason("missingMediaSourceType"),new Error("Media Item source type is missing.");const d=this.playbackSessionFactories[null===(r=null==e?void 0:e.source)||void 0===r?void 0:r.type];if(!d)throw oa.setErrorReason("missingMediaSourceType"),new Error(`SessionFactory for source type '${null===(i=null==e?void 0:e.source)||void 0===i?void 0:i.type}' is missing.`);const l=new xi;return l.authenticationProvider=o.payload.authenticatedProvider&&o.payload.authenticatedProvider.id,l.merge(t),oa.add($i.MPS),d.initPlaybackSession(e,l,s).then(e=>{Ia.debug("AuthenticationManager.initPlaybackSession",e);const t=this.concurrencyMonitorBuilder&&this.concurrencyMonitorBuilder.withSession(e).build();return t?t.createSession().then(t=>(oa.add($i.CM_I),e.concurrencyMonitorSessionId=t,e)).catch(e=>{throw oa.add($i.CM_IF),oa.setErrorReason("concurrencyInitializationFailed"),e}):e})})}get authStates(){const e=this.authenticators[Ta.mvpd],t=[];return this.authenticators[Ta.isp].isAuthenticated&&t.push("isp"),!0===e.isAuthenticated?t.push("mvpd_login"):!0===e.wasPreviouslyAuthenticated&&t.push("mvpd_previous"),t}get preauthorizedResources(){return Object.keys(this.authenticators).map(e=>this.authenticators[e].preauthorizedResources).reduce((e,t)=>e.concat(t),[]).filter((e,t,o)=>o.indexOf(e)===t)}get primaryAuthenticatedProvider(){return[Ta.mvpd,Ta.isp].map(e=>this.getAuthenticator(e)).filter(e=>e.isAuthenticated).map(e=>e.authenticatedProvider)[0]}convertToArray(e){if(!e)return[];let t=[];return Array.isArray(e)?t=e:"string"==typeof e&&t.push(e),t}}wl.AuthenticateOptionsKey={redirectUrl:"redirectUrl"};class Pl{constructor(){this.preauthorizedResources=[],this.isAuthenticated=!!this.authorizationPayload,this.authenticatedIdentity=this.authorizationPayload&&this.authorizationPayload.authenticatedIdentity,this.authenticatedProvider=this.authorizationPayload&&this.authorizationPayload.authenticatedProvider}checkAuthentication(){return Promise.resolve(this.isAuthenticated)}authenticate(){return this.checkAuthentication()}deauthenticate(){return this.authorizationPayload=null,Promise.resolve(!0)}checkAuthorization(e){const t=new Ci(!0,this.authorizationPayload);return oa.add($i.CAN_T.replace("T",this.authorizationPayload.authenticationType)),oa.add($i.CAZ_T.replace("T",this.authorizationPayload.authenticationType)),!e||0!=e.authenticationTypes.length&&-1===e.authenticationTypes.indexOf(Ta.none)?this.authorizationPayload&&this.mediaItem&&this.mediaItem.id===e.id&&-1!==e.authenticationTypes.indexOf(this.authorizationPayload.authenticationType)?Promise.resolve(t):Promise.resolve(new Ci(!1,this.authorizationPayload)):Promise.resolve(t)}}class kl{constructor(e,t,o,n){this.serviceUrl=e,this.appVersion=t,this.appName=o,this.deviceID=n}}const _l=new kl("https://prod.gatekeeper.us-abc.symphony.edgedatg.go.com/vp2/ws-secure/entitlement/2020/playmanifest_secure.json","1.0.0","","001");class Cl{constructor(e=_l){this.configuration_=e}initPlaybackSession(e,t,o){var n;const r={brand:pi(mi(e.brand)),device:this.configuration_.deviceID},i=this.videoTypeFromMedia_(e);if(r.app_name=this.configuration_.appName,r.video_type=i,r.video_id=e.id,"abc"===e.brand&&"live"==i&&(r.affiliate=e.network.id),o.authenticationType==Ta.mvpd){r.resource_id=e.mrss,r.adobe_requestor_id=(null==o?void 0:o.customData[_i.CustomDataKey.requestor])||(null===(n=e.brand)||void 0===n?void 0:n.toUpperCase());const t=null==o?void 0:o.customData[_i.CustomDataKey.tokenType];r.token_type="ADOBEPASS"==t?"ap":t,r.token=null==o?void 0:o.customData[_i.CustomDataKey.token],r.zipcode=null==o?void 0:o.customData[_i.CustomDataKey.zipcode],r.mvpd=(null==o?void 0:o.authenticatedProvider.id)||(null==o?void 0:o.customData[_i.CustomDataKey.mvpd]),r.locale=e.locale}const a={appversion:this.configuration_.appVersion,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},s=new URLSearchParams;Object.keys(r).forEach(e=>{null!=r[e]&&s.append(e,r[e])});const d={method:"POST",headers:a,body:String(r.token_type).indexOf("offsite")>-1?s.toString().replace(/%2B/g,"+"):s};return fetch(this.configuration_.serviceUrl,d).then(e=>{if(!e.ok)throw oa.add($i.T_FEF),oa.setErrorReason("entitlementFetchFailed"),e;return oa.add($i.T_FE),e.json()}).then(t=>{const n=this.entitlementPlaybackSessionFromResponse_(t);return n.mediaItem=e,n.authenticationType=null==o?void 0:o.authenticationType,n.authenticatedProvider=null==o?void 0:o.authenticatedProvider,n.authenticatedIdentity=null==o?void 0:o.authenticatedIdentity,n})}entitlementPlaybackSessionFromResponse_(e){var t,o,n,r,i,a,s,d,l;const c=(null===(n=null===(o=null===(t=e.video)||void 0===t?void 0:t.assets)||void 0===o?void 0:o.asset[0])||void 0===n?void 0:n.value)||(null===(s=null===(a=null===(i=null===(r=e.channels)||void 0===r?void 0:r.channel[0])||void 0===i?void 0:i.assets)||void 0===a?void 0:a.asset[0])||void 0===s?void 0:s.value),u=new zd(c);let p;if(null===(d=e.entitlement)||void 0===d?void 0:d.drmData){const t=null===(l=e.entitlement)||void 0===l?void 0:l.drmData;switch(t.drmEncoding){case"WIDEVINE":p=new jd("application/dash+xml",qd.widevine,t.licenseUrl);break;case"FAIRPLAY":p=new jd("application/x-mpegURL",qd.fairPlay,t.licenseUrl);break;case"PLAY_READY":p=new jd("application/dash+xml",qd.playReady,t.licenseUrl)}}else p=new jd("application/x-mpegURL",qd.none,null);return u.playbackConfig=p,u}videoTypeFromMedia_(e){return e.streamType==pa.live?"live":e.streamType==pa.onDemand&&e.entityType==fa.shortform?"sf":e.streamType==pa.onDemand&&e.entityType==fa.longform?"lf":void 0}}const Rl={interval:6e4,watchProp:"id"},Il={[Aa.cfa]:!0,[Aa.pluto]:!0,[Aa.graphQL]:!0,[Aa.itemFeed]:!0},Dl=Aa.graphQL;class Nl{constructor(e,t,o){this.mediaItem=e,this.mediaItemDataSource=t,this.countryCode=o,this.configuration_=Rl}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}start(){this.mediaItem.isLinear&&this.mediaItem.isLive&&(this.intervalId=setInterval(()=>{this.checkProgramChange()},this.configuration_.interval))}stop(){this.intervalId&&clearInterval(this.intervalId)}checkProgramChange(){if(!this.mediaItem||!this.mediaItemDataSource)return;const{countryCode:e,configuration_:{watchProp:t}}=this,{mediaItem:o,mediaItem:{network:n,apiSource:r,references:i={}}}=this,a=null==n?void 0:n.id;if(!a)return void Ia.warn("cannot monitor for program changes on network "+a);const s=r in Il?r:Dl,d=Ra.identifierStringForNetwork(a,s);this.mediaItemDataSource.getMediaItems([d],{countryCode:e}).then(e=>{var n;const r=Array.isArray(e)&&e[0];if(!r)return;o[t]!==r[t]&&(!(null==i?void 0:i.simulcastAiringId)||i.simulcastAiringId!==(null===(n=r.references)||void 0===n?void 0:n.simulcastAiringId))&&(this.mediaItem=r,this.onProgramChange(r))})}onProgramChange(e){}}var Ml,Ol,Ll,Fl;!function(e){e.willStartPlaying="atv.player.willStartPlaying",e.didStopPlaying="atv.player.didStopPlaying",e.onTimedMetadataChanged="atv.player.onTimedMetadataChanged",e.playerStateChanged="atv.player.playerStateChanged",e.playerTimeDidChange="atv.player.playerTimeDidChange"}(Ml||(Ml={})),function(e){e.priv="PRIV",e.txxx="TXXX"}(Ol||(Ol={})),function(e){e.program="PROGRAM",e.commercial="COMMERCIAL",e.slate="SLATE"}(Ll||(Ll={})),function(e){e.start="start",e.playing="playing",e.pause="pause",e.seeking="seeking",e.stalled="stalled",e.stop="stop",e.timedMetadata="timedMetadata",e.currentTime="currentTime",e.loadedMetadata="loadedMetadata"}(Fl||(Fl={}));var Bl,Ul=Fl;!function(e){e.opened="opened",e.playing="playing",e.ended="ended",e.timedMetadata="timedMetadata",e.error="error",e.timeUpdate="timeUpdate",e.stalled="stalled",e.paused="paused",e.seeking="seeking"}(Bl||(Bl={}));class Vl{constructor(e){this.eventHandlers=[],this.playerBundle=e}createHandlerForCallback(e){const t=t=>{let o=t&&t.currentTime;o||t||(o=this.playerBundle.currentTime()),e("number"==typeof o?o:t)};return this.eventHandlers.push([e,t]),t}getIndexOfHandlerForCallback(e){const{eventHandlers:t}=this,o=t.length;let n=-1;for(let r=0;r<o;r+=1){const[o]=t[r];if(o===e){n=r;break}}return n}on(e,t){const o=this.getMappedEventName_(e),n=this.createHandlerForCallback(t);this.playerBundle.coordinator.addEventListener(o,n)}off(e,t){const{eventHandlers:o}=this,n=this.getMappedEventName_(e),r=this.getIndexOfHandlerForCallback(t);if(r>-1){const[,e]=o[r];this.playerBundle.coordinator.removeEventListener(n,e),o.splice(r,1)}}