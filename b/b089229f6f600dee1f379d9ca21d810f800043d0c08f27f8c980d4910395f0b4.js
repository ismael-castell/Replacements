/*!
 * @preserve
 * espn-web-player-bundle v3.9.2
 * 2022-05-31T18:30:03.213Z
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DTCIVideoPlayer=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var o,i,n=function(e){return e&&e.Math==Math&&e},a=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),r=function(e){try{return!!e()}catch(e){return!0}},s=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),d=Function.prototype,l=d.apply,c=d.call,u="object"==typeof Reflect&&Reflect.apply||(s?c.bind(l):function(){return c.apply(l,arguments)}),p=Function.prototype,h=p.bind,m=p.call,y=s&&h.bind(m,m),f=s?function(e){return e&&y(e)}:function(e){return e&&function(){return m.apply(e,arguments)}},g=function(e){return"function"==typeof e},v=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b=Function.prototype.call,A=s?b.bind(b):function(){return b.apply(b,arguments)},E={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,S={f:T&&!E.call({1:2},1)?function(e){var t=T(this,e);return!!t&&t.enumerable}:E},w=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},P=f({}.toString),k=f("".slice),C=function(e){return k(P(e),8,-1)},_=a.Object,I=f("".split),R=r((function(){return!_("z").propertyIsEnumerable(0)}))?function(e){return"String"==C(e)?I(e,""):_(e)}:_,D=a.TypeError,N=function(e){if(null==e)throw D("Can't call method on "+e);return e},M=function(e){return R(N(e))},O=function(e){return"object"==typeof e?null!==e:g(e)},L={},F=function(e){return g(e)?e:void 0},B=function(e,t){return arguments.length<2?F(L[e])||F(a[e]):L[e]&&L[e][t]||a[e]&&a[e][t]},U=f({}.isPrototypeOf),V=B("navigator","userAgent")||"",x=a.process,z=a.Deno,j=x&&x.versions||z&&z.version,G=j&&j.v8;G&&(i=(o=G.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&V&&(!(o=V.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=V.match(/Chrome\/(\d+)/))&&(i=+o[1]);var W,q=i,H=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&q&&q<41})),Y=H&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,K=a.Object,$=Y?function(e){return"symbol"==typeof e}:function(e){var t=B("Symbol");return g(t)&&U(t.prototype,K(e))},X=a.String,Q=function(e){try{return X(e)}catch(e){return"Object"}},Z=a.TypeError,J=function(e){if(g(e))return e;throw Z(Q(e)+" is not a function")},ee=function(e,t){var o=e[t];return null==o?void 0:J(o)},te=a.TypeError,oe=Object.defineProperty,ie=a["__core-js_shared__"]||function(e,t){try{oe(a,e,{value:t,configurable:!0,writable:!0})}catch(o){a[e]=t}return t}("__core-js_shared__",{}),ne=t((function(e){(e.exports=function(e,t){return ie[e]||(ie[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.4",mode:"pure",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.4/LICENSE",source:"https://github.com/zloirock/core-js"})})),ae=a.Object,re=function(e){return ae(N(e))},se=f({}.hasOwnProperty),de=Object.hasOwn||function(e,t){return se(re(e),t)},le=0,ce=Math.random(),ue=f(1..toString),pe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ue(++le+ce,36)},he=ne("wks"),me=a.Symbol,ye=me&&me.for,fe=Y?me:me&&me.withoutSetter||pe,ge=function(e){if(!de(he,e)||!H&&"string"!=typeof he[e]){var t="Symbol."+e;H&&de(me,e)?he[e]=me[e]:he[e]=Y&&ye?ye(t):fe(t)}return he[e]},ve=a.TypeError,be=ge("toPrimitive"),Ae=function(e,t){if(!O(e)||$(e))return e;var o,i=ee(e,be);if(i){if(void 0===t&&(t="default"),o=A(i,e,t),!O(o)||$(o))return o;throw ve("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var o,i;if("string"===t&&g(o=e.toString)&&!O(i=A(o,e)))return i;if(g(o=e.valueOf)&&!O(i=A(o,e)))return i;if("string"!==t&&g(o=e.toString)&&!O(i=A(o,e)))return i;throw te("Can't convert object to primitive value")}(e,t)},Ee=function(e){var t=Ae(e,"string");return $(t)?t:t+""},Te=a.document,Se=O(Te)&&O(Te.createElement),we=function(e){return Se?Te.createElement(e):{}},Pe=!v&&!r((function(){return 7!=Object.defineProperty(we("div"),"a",{get:function(){return 7}}).a})),ke=Object.getOwnPropertyDescriptor,Ce={f:v?ke:function(e,t){if(e=M(e),t=Ee(t),Pe)try{return ke(e,t)}catch(e){}if(de(e,t))return w(!A(S.f,e,t),e[t])}},_e=/#|\.prototype\./,Ie=function(e,t){var o=De[Re(e)];return o==Me||o!=Ne&&(g(t)?r(t):!!t)},Re=Ie.normalize=function(e){return String(e).replace(_e,".").toLowerCase()},De=Ie.data={},Ne=Ie.NATIVE="N",Me=Ie.POLYFILL="P",Oe=Ie,Le=f(f.bind),Fe=function(e,t){return J(e),void 0===t?e:s?Le(e,t):function(){return e.apply(t,arguments)}},Be=v&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ue=a.String,Ve=a.TypeError,xe=function(e){if(O(e))return e;throw Ve(Ue(e)+" is not an object")},ze=a.TypeError,je=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,We={f:v?Be?function(e,t,o){if(xe(e),t=Ee(t),xe(o),"function"==typeof e&&"prototype"===t&&"value"in o&&"writable"in o&&!o.writable){var i=Ge(e,t);i&&i.writable&&(e[t]=o.value,o={configurable:"configurable"in o?o.configurable:i.configurable,enumerable:"enumerable"in o?o.enumerable:i.enumerable,writable:!1})}return je(e,t,o)}:je:function(e,t,o){if(xe(e),t=Ee(t),xe(o),Pe)try{return je(e,t,o)}catch(e){}if("get"in o||"set"in o)throw ze("Accessors not supported");return"value"in o&&(e[t]=o.value),e}},qe=v?function(e,t,o){return We.f(e,t,w(1,o))}:function(e,t,o){return e[t]=o,e},He=Ce.f,Ye=function(e){var t=function(o,i,n){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(o);case 2:return new e(o,i)}return new e(o,i,n)}return u(e,this,arguments)};return t.prototype=e.prototype,t},Ke=function(e,t){var o,i,n,r,s,d,l,c,u=e.target,p=e.global,h=e.stat,m=e.proto,y=p?a:h?a[u]:(a[u]||{}).prototype,v=p?L:L[u]||qe(L,u,{})[u],b=v.prototype;for(n in t)o=!Oe(p?n:u+(h?".":"#")+n,e.forced)&&y&&de(y,n),s=v[n],o&&(d=e.noTargetGet?(c=He(y,n))&&c.value:y[n]),r=o&&d?d:t[n],o&&typeof s==typeof r||(l=e.bind&&o?Fe(r,a):e.wrap&&o?Ye(r):m&&g(r)?f(r):r,(e.sham||r&&r.sham||s&&s.sham)&&qe(l,"sham",!0),qe(v,n,l),m&&(de(L,i=u+"Prototype")||qe(L,i,{}),qe(L[i],n,r),e.real&&b&&!b[n]&&qe(b,n,r)))},$e=ne("keys"),Xe=function(e){return $e[e]||($e[e]=pe(e))},Qe=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ze=Xe("IE_PROTO"),Je=a.Object,et=Je.prototype,tt=Qe?Je.getPrototypeOf:function(e){var t=re(e);if(de(t,Ze))return t[Ze];var o=t.constructor;return g(o)&&t instanceof o?o.prototype:t instanceof Je?et:null},ot=a.String,it=a.TypeError,nt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=f(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),t=o instanceof Array}catch(e){}return function(o,i){return xe(o),function(e){if("object"==typeof e||g(e))return e;throw it("Can't set "+ot(e)+" as a prototype")}(i),t?e(o,i):o.__proto__=i,o}}():void 0),at=Math.ceil,rt=Math.floor,st=function(e){var t=+e;return t!=t||0===t?0:(t>0?rt:at)(t)},dt=Math.max,lt=Math.min,ct=function(e,t){var o=st(e);return o<0?dt(o+t,0):lt(o,t)},ut=Math.min,pt=function(e){return(t=e.length)>0?ut(st(t),9007199254740991):0;var t},ht=function(e){return function(t,o,i){var n,a=M(t),r=pt(a),s=ct(i,r);if(e&&o!=o){for(;r>s;)if((n=a[s++])!=n)return!0}else for(;r>s;s++)if((e||s in a)&&a[s]===o)return e||s||0;return!e&&-1}},mt={includes:ht(!0),indexOf:ht(!1)},yt={},ft=mt.indexOf,gt=f([].push),vt=function(e,t){var o,i=M(e),n=0,a=[];for(o in i)!de(yt,o)&&de(i,o)&&gt(a,o);for(;t.length>n;)de(i,o=t[n++])&&(~ft(a,o)||gt(a,o));return a},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],At=bt.concat("length","prototype"),Et={f:Object.getOwnPropertyNames||function(e){return vt(e,At)}},Tt={f:Object.getOwnPropertySymbols},St=f([].concat),wt=B("Reflect","ownKeys")||function(e){var t=Et.f(xe(e)),o=Tt.f;return o?St(t,o(e)):t},Pt=Object.keys||function(e){return vt(e,bt)},kt={f:v&&!Be?Object.defineProperties:function(e,t){xe(e);for(var o,i=M(t),n=Pt(t),a=n.length,r=0;a>r;)We.f(e,o=n[r++],i[o]);return e}},Ct=B("document","documentElement"),_t=Xe("IE_PROTO"),It=function(){},Rt=function(e){return"<script>"+e+"<\/script>"},Dt=function(e){e.write(Rt("")),e.close();var t=e.parentWindow.Object;return e=null,t},Nt=function(){try{W=new ActiveXObject("htmlfile")}catch(e){}var e,t;Nt="undefined"!=typeof document?document.domain&&W?Dt(W):((t=we("iframe")).style.display="none",Ct.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Rt("document.F=Object")),e.close(),e.F):Dt(W);for(var o=bt.length;o--;)delete Nt.prototype[bt[o]];return Nt()};yt[_t]=!0;var Mt=Object.create||function(e,t){var o;return null!==e?(It.prototype=xe(e),o=new It,It.prototype=null,o[_t]=e):o=Nt(),void 0===t?o:kt.f(o,t)},Ot=Error,Lt=f("".replace),Ft=String(Ot("zxcasd").stack),Bt=/\n\s*at [^:]*:[^\n]*/,Ut=Bt.test(Ft),Vt=function(e,t){if(Ut&&"string"==typeof e&&!Ot.prepareStackTrace)for(;t--;)e=Lt(e,Bt,"");return e},xt=function(e,t){O(t)&&"cause"in t&&qe(e,"cause",t.cause)},zt={},jt=ge("iterator"),Gt=Array.prototype,Wt={};Wt[ge("toStringTag")]="z";var qt="[object z]"===String(Wt),Ht=ge("toStringTag"),Yt=a.Object,Kt="Arguments"==C(function(){return arguments}()),$t=qt?C:function(e){var t,o,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Yt(e),Ht))?o:Kt?C(t):"Object"==(i=C(t))&&g(t.callee)?"Arguments":i},Xt=ge("iterator"),Qt=function(e){if(null!=e)return ee(e,Xt)||ee(e,"@@iterator")||zt[$t(e)]},Zt=a.TypeError,Jt=function(e,t,o){var i,n;xe(e);try{if(!(i=ee(e,"return"))){if("throw"===t)throw o;return o}i=A(i,e)}catch(e){n=!0,i=e}if("throw"===t)throw o;if(n)throw i;return xe(i),o},eo=a.TypeError,to=function(e,t){this.stopped=e,this.result=t},oo=to.prototype,io=function(e,t,o){var i,n,a,r,s,d,l,c=o&&o.that,u=!(!o||!o.AS_ENTRIES),p=!(!o||!o.IS_ITERATOR),h=!(!o||!o.INTERRUPTED),m=Fe(t,c),y=function(e){return i&&Jt(i,"normal",e),new to(!0,e)},f=function(e){return u?(xe(e),h?m(e[0],e[1],y):m(e[0],e[1])):h?m(e,y):m(e)};if(p)i=e;else{if(!(n=Qt(e)))throw eo(Q(e)+" is not iterable");if(function(e){return void 0!==e&&(zt.Array===e||Gt[jt]===e)}(n)){for(a=0,r=pt(e);r>a;a++)if((s=f(e[a]))&&U(oo,s))return s;return new to(!1)}i=function(e,t){var o=arguments.length<2?Qt(e):t;if(J(o))return xe(A(o,e));throw Zt(Q(e)+" is not iterable")}(e,n)}for(d=i.next;!(l=A(d,i)).done;){try{s=f(l.value)}catch(e){Jt(i,"throw",e)}if("object"==typeof s&&s&&U(oo,s))return s}return new to(!1)},no=a.String,ao=function(e){if("Symbol"===$t(e))throw TypeError("Cannot convert a Symbol value to a string");return no(e)},ro=function(e,t){return void 0===e?arguments.length<2?"":t:ao(e)},so=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",w(1,7)),7!==e.stack)})),lo=ge("toStringTag"),co=a.Error,uo=[].push,po=function(e,t){var o,i=arguments.length>2?arguments[2]:void 0,n=U(ho,this);nt?o=nt(new co,n?tt(this):ho):(o=n?this:Mt(ho),qe(o,lo,"Error")),void 0!==t&&qe(o,"message",ro(t)),so&&qe(o,"stack",Vt(o.stack,1)),xt(o,i);var a=[];return io(e,uo,{that:a}),qe(o,"errors",a),o};nt?nt(po,co):function(e,t,o){for(var i=wt(t),n=We.f,a=Ce.f,r=0;r<i.length;r++){var s=i[r];de(e,s)||o&&de(o,s)||n(e,s,a(t,s))}}(po,co,{name:!0});var ho=po.prototype=Mt(co.prototype,{constructor:w(1,po),message:w(1,""),name:w(1,"AggregateError")});Ke({global:!0},{AggregateError:po});var mo=f(Function.toString);g(ie.inspectSource)||(ie.inspectSource=function(e){return mo(e)});var yo,fo,go,vo=ie.inspectSource,bo=a.WeakMap,Ao=g(bo)&&/native code/.test(vo(bo)),Eo=a.TypeError,To=a.WeakMap;if(Ao||ie.state){var So=ie.state||(ie.state=new To),wo=f(So.get),Po=f(So.has),ko=f(So.set);yo=function(e,t){if(Po(So,e))throw new Eo("Object already initialized");return t.facade=e,ko(So,e,t),t},fo=function(e){return wo(So,e)||{}},go=function(e){return Po(So,e)}}else{var Co=Xe("state");yt[Co]=!0,yo=function(e,t){if(de(e,Co))throw new Eo("Object already initialized");return t.facade=e,qe(e,Co,t),t},fo=function(e){return de(e,Co)?e[Co]:{}},go=function(e){return de(e,Co)}}var _o,Io,Ro,Do={set:yo,get:fo,has:go,enforce:function(e){return go(e)?fo(e):yo(e,{})},getterFor:function(e){return function(t){var o;if(!O(t)||(o=fo(t)).type!==e)throw Eo("Incompatible receiver, "+e+" required");return o}}},No=Function.prototype,Mo=v&&Object.getOwnPropertyDescriptor,Oo=de(No,"name"),Lo={EXISTS:Oo,PROPER:Oo&&"something"===function(){}.name,CONFIGURABLE:Oo&&(!v||v&&Mo(No,"name").configurable)},Fo=function(e,t,o,i){return i&&i.enumerable?e[t]=o:qe(e,t,o),e},Bo=ge("iterator"),Uo=!1;[].keys&&("next"in(Ro=[].keys())?(Io=tt(tt(Ro)))!==Object.prototype&&(_o=Io):Uo=!0);var Vo=null==_o||r((function(){var e={};return _o[Bo].call(e)!==e}));_o=Vo?{}:Mt(_o),g(_o[Bo])||Fo(_o,Bo,(function(){return this}));var xo={IteratorPrototype:_o,BUGGY_SAFARI_ITERATORS:Uo},zo=qt?{}.toString:function(){return"[object "+$t(this)+"]"},jo=We.f,Go=ge("toStringTag"),Wo=function(e,t,o,i){if(e){var n=o?e:e.prototype;de(n,Go)||jo(n,Go,{configurable:!0,value:t}),i&&!qt&&qe(n,"toString",zo)}},qo=xo.IteratorPrototype,Ho=function(){return this},Yo=Lo.PROPER,Ko=xo.BUGGY_SAFARI_ITERATORS,$o=ge("iterator"),Xo=function(){return this},Qo=function(e,t,o,i,n,a,r){!function(e,t,o,i){var n=t+" Iterator";e.prototype=Mt(qo,{next:w(+!i,o)}),Wo(e,n,!1,!0),zt[n]=Ho}(o,t,i);var s,d,l,c=function(e){if(e===n&&y)return y;if(!Ko&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new o(this,e)}}return function(){return new o(this)}},u=t+" Iterator",p=!1,h=e.prototype,m=h[$o]||h["@@iterator"]||n&&h[n],y=!Ko&&m||c(n),f="Array"==t&&h.entries||m;if(f&&(s=tt(f.call(new e)))!==Object.prototype&&s.next&&(Wo(s,u,!0,!0),zt[u]=Xo),Yo&&"values"==n&&m&&"values"!==m.name&&(p=!0,y=function(){return A(m,this)}),n)if(d={values:c("values"),keys:a?y:c("keys"),entries:c("entries")},r)for(l in d)(Ko||p||!(l in h))&&Fo(h,l,d[l]);else Ke({target:t,proto:!0,forced:Ko||p},d);return r&&h[$o]!==y&&Fo(h,$o,y,{name:n}),zt[t]=y,d};We.f;var Zo=Do.set,Jo=Do.getterFor("Array Iterator");Qo(Array,"Array",(function(e,t){Zo(this,{type:"Array Iterator",target:M(e),index:0,kind:t})}),(function(){var e=Jo(this),t=e.target,o=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==o?{value:i,done:!1}:"values"==o?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),zt.Arguments=zt.Array;var ei="process"==C(a.process),ti=ge("species"),oi=a.TypeError,ii=function(){},ni=[],ai=B("Reflect","construct"),ri=/^\s*(?:class|function)\b/,si=f(ri.exec),di=!ri.exec(ii),li=function(e){if(!g(e))return!1;try{return ai(ii,ni,e),!0}catch(e){return!1}},ci=function(e){if(!g(e))return!1;switch($t(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return di||!!si(ri,vo(e))}catch(e){return!0}};ci.sham=!0;var ui,pi,hi,mi,yi=!ai||r((function(){var e;return li(li.call)||!li(Object)||!li((function(){e=!0}))||e}))?ci:li,fi=a.TypeError,gi=ge("species"),vi=function(e,t){var o,i=xe(e).constructor;return void 0===i||null==(o=xe(i)[gi])?t:function(e){if(yi(e))return e;throw fi(Q(e)+" is not a constructor")}(o)},bi=f([].slice),Ai=a.TypeError,Ei=function(e,t){if(e<t)throw Ai("Not enough arguments");return e},Ti=/(?:ipad|iphone|ipod).*applewebkit/i.test(V),Si=a.setImmediate,wi=a.clearImmediate,Pi=a.process,ki=a.Dispatch,Ci=a.Function,_i=a.MessageChannel,Ii=a.String,Ri=0,Di={};try{ui=a.location}catch(e){}var Ni=function(e){if(de(Di,e)){var t=Di[e];delete Di[e],t()}},Mi=function(e){return function(){Ni(e)}},Oi=function(e){Ni(e.data)},Li=function(e){a.postMessage(Ii(e),ui.protocol+"//"+ui.host)};Si&&wi||(Si=function(e){Ei(arguments.length,1);var t=g(e)?e:Ci(e),o=bi(arguments,1);return Di[++Ri]=function(){u(t,void 0,o)},pi(Ri),Ri},wi=function(e){delete Di[e]},ei?pi=function(e){Pi.nextTick(Mi(e))}:ki&&ki.now?pi=function(e){ki.now(Mi(e))}:_i&&!Ti?(mi=(hi=new _i).port2,hi.port1.onmessage=Oi,pi=Fe(mi.postMessage,mi)):a.addEventListener&&g(a.postMessage)&&!a.importScripts&&ui&&"file:"!==ui.protocol&&!r(Li)?(pi=Li,a.addEventListener("message",Oi,!1)):pi="onreadystatechange"in we("script")?function(e){Ct.appendChild(we("script")).onreadystatechange=function(){Ct.removeChild(this),Ni(e)}}:function(e){setTimeout(Mi(e),0)});var Fi,Bi,Ui,Vi,xi,zi,ji,Gi,Wi={set:Si,clear:wi},qi=/ipad|iphone|ipod/i.test(V)&&void 0!==a.Pebble,Hi=/web0s(?!.*chrome)/i.test(V),Yi=Ce.f,Ki=Wi.set,$i=a.MutationObserver||a.WebKitMutationObserver,Xi=a.document,Qi=a.process,Zi=a.Promise,Ji=Yi(a,"queueMicrotask"),en=Ji&&Ji.value;en||(Fi=function(){var e,t;for(ei&&(e=Qi.domain)&&e.exit();Bi;){t=Bi.fn,Bi=Bi.next;try{t()}catch(e){throw Bi?Vi():Ui=void 0,e}}Ui=void 0,e&&e.enter()},Ti||ei||Hi||!$i||!Xi?!qi&&Zi&&Zi.resolve?((ji=Zi.resolve(void 0)).constructor=Zi,Gi=Fe(ji.then,ji),Vi=function(){Gi(Fi)}):ei?Vi=function(){Qi.nextTick(Fi)}:(Ki=Fe(Ki,a),Vi=function(){Ki(Fi)}):(xi=!0,zi=Xi.createTextNode(""),new $i(Fi).observe(zi,{characterData:!0}),Vi=function(){zi.data=xi=!xi}));var tn=en||function(e){var t={fn:e,next:void 0};Ui&&(Ui.next=t),Bi||(Bi=t,Vi()),Ui=t},on=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},nn=function(){this.head=null,this.tail=null};nn.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var an,rn,sn=nn,dn=a.Promise,ln="object"==typeof window&&"object"!=typeof Deno,cn=dn&&dn.prototype,un=ge("species"),pn=!1,hn=g(a.PromiseRejectionEvent),mn={CONSTRUCTOR:Oe("Promise",(function(){var e=vo(dn),t=e!==String(dn);if(!t&&66===q)return!0;if(!cn.catch||!cn.finally)return!0;if(q>=51&&/native code/.test(e))return!1;var o=new dn((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(o.constructor={})[un]=i,!(pn=o.then((function(){}))instanceof i)||!t&&ln&&!hn})),REJECTION_EVENT:hn,SUBCLASSING:pn},yn=function(e){var t,o;this.promise=new e((function(e,i){if(void 0!==t||void 0!==o)throw TypeError("Bad Promise constructor");t=e,o=i})),this.resolve=J(t),this.reject=J(o)},fn={f:function(e){return new yn(e)}},gn=Wi.set,vn=mn.CONSTRUCTOR,bn=mn.REJECTION_EVENT,An=Do.getterFor("Promise"),En=Do.set,Tn=dn&&dn.prototype,Sn=dn,wn=Tn,Pn=a.TypeError,kn=a.document,Cn=a.process,_n=fn.f,In=_n,Rn=!!(kn&&kn.createEvent&&a.dispatchEvent),Dn=function(e){var t;return!(!O(e)||!g(t=e.then))&&t},Nn=function(e,t){var o,i,n,a=t.value,r=1==t.state,s=r?e.ok:e.fail,d=e.resolve,l=e.reject,c=e.domain;try{s?(r||(2===t.rejection&&Bn(t),t.rejection=1),!0===s?o=a:(c&&c.enter(),o=s(a),c&&(c.exit(),n=!0)),o===e.promise?l(Pn("Promise-chain cycle")):(i=Dn(o))?A(i,o,d,l):d(o)):l(a)}catch(e){c&&!n&&c.exit(),l(e)}},Mn=function(e,t){e.notified||(e.notified=!0,tn((function(){for(var o,i=e.reactions;o=i.get();)Nn(o,e);e.notified=!1,t&&!e.rejection&&Ln(e)})))},On=function(e,t,o){var i,n;Rn?((i=kn.createEvent("Event")).promise=t,i.reason=o,i.initEvent(e,!1,!0),a.dispatchEvent(i)):i={promise:t,reason:o},!bn&&(n=a["on"+e])?n(i):"unhandledrejection"===e&&function(e,t){var o=a.console;o&&o.error&&(1==arguments.length?o.error(e):o.error(e,t))}("Unhandled promise rejection",o)},Ln=function(e){A(gn,a,(function(){var t,o=e.facade,i=e.value;if(Fn(e)&&(t=on((function(){ei?Cn.emit("unhandledRejection",i,o):On("unhandledrejection",o,i)})),e.rejection=ei||Fn(e)?2:1,t.error))throw t.value}))},Fn=function(e){return 1!==e.rejection&&!e.parent},Bn=function(e){A(gn,a,(function(){var t=e.facade;ei?Cn.emit("rejectionHandled",t):On("rejectionhandled",t,e.value)}))},Un=function(e,t,o){return function(i){e(t,i,o)}},Vn=function(e,t,o){e.done||(e.done=!0,o&&(e=o),e.value=t,e.state=2,Mn(e,!0))},xn=function(e,t,o){if(!e.done){e.done=!0,o&&(e=o);try{if(e.facade===t)throw Pn("Promise can't be resolved itself");var i=Dn(t);i?tn((function(){var o={done:!1};try{A(i,t,Un(xn,o,e),Un(Vn,o,e))}catch(t){Vn(o,t,e)}})):(e.value=t,e.state=1,Mn(e,!1))}catch(t){Vn({done:!1},t,e)}}};vn&&(wn=(Sn=function(e){!function(e,t){if(U(t,e))return e;throw oi("Incorrect invocation")}(this,wn),J(e),A(an,this);var t=An(this);try{e(Un(xn,t),Un(Vn,t))}catch(e){Vn(t,e)}}).prototype,(an=function(e){En(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new sn,rejection:!1,state:0,value:void 0})}).prototype=Fo(wn,"then",(function(e,t){var o=An(this),i=_n(vi(this,Sn));return o.parent=!0,i.ok=!g(e)||e,i.fail=g(t)&&t,i.domain=ei?Cn.domain:void 0,0==o.state?o.reactions.add(i):tn((function(){Nn(i,o)})),i.promise})),rn=function(){var e=new an,t=An(e);this.promise=e,this.resolve=Un(xn,t),this.reject=Un(Vn,t)},fn.f=_n=function(e){return e===Sn||void 0===e?new rn(e):In(e)}),Ke({global:!0,wrap:!0,forced:vn},{Promise:Sn}),Wo(Sn,"Promise",!1,!0),function(e){var t=B(e),o=We.f;v&&t&&!t[ti]&&o(t,ti,{configurable:!0,get:function(){return this}})}("Promise");var zn=ge("iterator"),jn=!1;try{var Gn=0,Wn={next:function(){return{done:!!Gn++}},return:function(){jn=!0}};Wn[zn]=function(){return this},Array.from(Wn,(function(){throw 2}))}catch(e){}var qn=mn.CONSTRUCTOR||!function(e,t){if(!t&&!jn)return!1;var o=!1;try{var i={};i[zn]=function(){return{next:function(){return{done:o=!0}}}},e(i)}catch(e){}return o}((function(e){dn.all(e).then(void 0,(function(){}))}));Ke({target:"Promise",stat:!0,forced:qn},{all:function(e){var t=this,o=fn.f(t),i=o.resolve,n=o.reject,a=on((function(){var o=J(t.resolve),a=[],r=0,s=1;io(e,(function(e){var d=r++,l=!1;s++,A(o,t,e).then((function(e){l||(l=!0,a[d]=e,--s||i(a))}),n)})),--s||i(a)}));return a.error&&n(a.value),o.promise}});var Hn=mn.CONSTRUCTOR;dn&&dn.prototype,Ke({target:"Promise",proto:!0,forced:Hn,real:!0},{catch:function(e){return this.then(void 0,e)}}),Ke({target:"Promise",stat:!0,forced:qn},{race:function(e){var t=this,o=fn.f(t),i=o.reject,n=on((function(){var n=J(t.resolve);io(e,(function(e){A(n,t,e).then(o.resolve,i)}))}));return n.error&&i(n.value),o.promise}}),Ke({target:"Promise",stat:!0,forced:mn.CONSTRUCTOR},{reject:function(e){var t=fn.f(this);return A(t.reject,void 0,e),t.promise}});var Yn=function(e,t){if(xe(e),O(t)&&t.constructor===e)return t;var o=fn.f(e);return(0,o.resolve)(t),o.promise},Kn=mn.CONSTRUCTOR,$n=B("Promise"),Xn=!Kn;Ke({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Yn(Xn&&this===$n?dn:this,e)}}),Ke({target:"Promise",stat:!0},{allSettled:function(e){var t=this,o=fn.f(t),i=o.resolve,n=o.reject,a=on((function(){var o=J(t.resolve),n=[],a=0,r=1;io(e,(function(e){var s=a++,d=!1;r++,A(o,t,e).then((function(e){d||(d=!0,n[s]={status:"fulfilled",value:e},--r||i(n))}),(function(e){d||(d=!0,n[s]={status:"rejected",reason:e},--r||i(n))}))})),--r||i(n)}));return a.error&&n(a.value),o.promise}});Ke({target:"Promise",stat:!0},{any:function(e){var t=this,o=B("AggregateError"),i=fn.f(t),n=i.resolve,a=i.reject,r=on((function(){var i=J(t.resolve),r=[],s=0,d=1,l=!1;io(e,(function(e){var c=s++,u=!1;d++,A(i,t,e).then((function(e){u||l||(l=!0,n(e))}),(function(e){u||l||(u=!0,r[c]=e,--d||a(new o(r,"No one promise resolved")))}))})),--d||a(new o(r,"No one promise resolved"))}));return r.error&&a(r.value),i.promise}});var Qn=dn&&dn.prototype,Zn=!!dn&&r((function(){Qn.finally.call({then:function(){}},(function(){}))}));Ke({target:"Promise",proto:!0,real:!0,forced:Zn},{finally:function(e){var t=vi(this,B("Promise")),o=g(e);return this.then(o?function(o){return Yn(t,e()).then((function(){return o}))}:e,o?function(o){return Yn(t,e()).then((function(){throw o}))}:e)}});var Jn=f("".charAt),ea=f("".charCodeAt),ta=f("".slice),oa=function(e){return function(t,o){var i,n,a=ao(N(t)),r=st(o),s=a.length;return r<0||r>=s?e?"":void 0:(i=ea(a,r))<55296||i>56319||r+1===s||(n=ea(a,r+1))<56320||n>57343?e?Jn(a,r):i:e?ta(a,r,r+2):n-56320+(i-55296<<10)+65536}},ia={codeAt:oa(!1),charAt:oa(!0)}.charAt,na=Do.set,aa=Do.getterFor("String Iterator");Qo(String,"String",(function(e){na(this,{type:"String Iterator",string:ao(e),index:0})}),(function(){var e,t=aa(this),o=t.string,i=t.index;return i>=o.length?{value:void 0,done:!0}:(e=ia(o,i),t.index+=e.length,{value:e,done:!1})}));var ra=L.Promise,sa=ge("toStringTag");for(var da in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var la=a[da],ca=la&&la.prototype;ca&&$t(ca)!==sa&&qe(ca,sa,da),zt[da]=zt.Array}var ua,pa,ha,ma,ya,fa,ga=ra;class va{constructor(){this.interceptors={},this.listeners={}}addEventListener(e,t){const o=this.listeners[e]||[];return o.push(t),this.listeners[e]=o,this}removeEventListener(e,t){return this.listeners[e]=(this.listeners[e]||[]).filter(e=>e!==t),this}addEventInterceptor(e,t){return this.interceptors[e]=t,this}removeEventInterceptor(e){return delete this.interceptors[e],this}coordinate(e,t){const o=this.interceptors[e]||(()=>Promise.resolve(t)),i=this.listeners[e]||[];return Promise.resolve().then(()=>o.call(null,t)).then(e=>(i.forEach(t=>{t.call(null,e)}),e))}}function ba(e){switch(e){case ua.abc:return"001";case ua.freeform:return"002";case ua.abcNews:return"003";case ua.disney:return"004";case ua.disneyJr:return"008";case ua.disneyXD:return"009";case ua.disneyNow:return"011";case ua.oscar:return"005";case ua.fxNow:return"025";case ua.fx:return"020";case ua.fxm:return"022";case ua.fxx:return"021";case ua.natGeoTV:return"026";case ua.natGeo:return"023";case ua.natGeoWild:return"024";case ua.fast:return"200";case ua.unknown:return ua.unknown}}function Aa(e){switch(e){case ua.abc:return"ABC";case ua.freeform:return"ABCFamily";case ua.abcNews:return"ABC";case ua.disney:return"Disney";case ua.disneyJr:return"DisneyJunior";case ua.disneyXD:return"DisneyXD";case ua.disneyNow:return"DisneyNow";case ua.oscar:return"ABC";case ua.fxNow:return"fxNow";case ua.fx:return"fx";case ua.fxm:return"fxm";case ua.fxx:return"fxx";case ua.natGeoTV:return"ngtv";case ua.natGeo:return"ngc";case ua.natGeoWild:return"ngw";case ua.fast:return"fast";case ua.unknown:return ua.unknown}}function Ea(e){switch(e){case"abc":case"001":return ua.abc;case"abcf":case"002":case"abcfamily":case"ff":case"ABCFamily":return ua.freeform;case"abcn":case"003":case"abcnews":return ua.abcNews;case"dch":case"dc":case"dis":case"004":case"disney":return ua.disney;case"djr":case"008":case"disneyjunior":return ua.disneyJr;case"dxd":case"009":case"disneyxd":return ua.disneyXD;case"005":case"oscar":return ua.oscar;case"dnow":case"011":case"disneynow":case"dnw":case"Dnow":return ua.disneyNow;case"fx":case"020":case"FX":return ua.fx;case"fxm":case"022":case"FXM":return ua.fxm;case"fxx":case"021":case"FXX":return ua.fxx;case"fxnow":case"025":case"FXnow":case"FXNow":return ua.fxNow;case"natgeo":case"023":case"NatGeo":case"ngc":return ua.natGeo;case"natgeowild":case"024":case"NatGeoWild":case"ngw":return ua.natGeoWild;case"natgeotv":case"026":case"NatGeoTV":return ua.natGeoTV;case"fast":case"200":return ua.fast;default:return ua.unknown}}!function(e){e.abc="abc",e.abcNews="abcnews",e.abcNewsLive="abcnewslive",e.abcOtv="abcotv",e.cricinfo="cricinfo",e.disney="dch",e.disneyJr="djr",e.disneyXD="dxd",e.disneyNow="dnow",e.espn="espn",e.espnFantasy="espnFantasy",e.fiveThirtyEight="fivethirtyeight",e.foxLatam="foxlatam",e.freeform="ff",e.fxNow="fxnow",e.fx="fx",e.fxm="fxm",e.fxx="fxx",e.oscar="oscar",e.marvel="marvel",e.natGeoTV="ngtv",e.natGeo="ngc",e.natGeoWild="ngw",e.natgeoBrasil="natgeobrasil",e.theUndefeated="theundefeated",e.fast="fast",e.unknown="000"}(ua||(ua={}));class Ta extends Error{constructor(e){super(e.message),this.config_=e}get code(){return`${this.config_.platform}-${this.config_.segment}-${this.config_.reason} ${this.config_.component}-${this.config_.feature}-${this.config_.errorCode}`}get cause(){return this.config_.cause}get reason(){return this.config_.reason}}!function(e){e[e.NONE=-1]="NONE",e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG"}(pa||(pa={})),function(e){e[e.FAILURE=0]="FAILURE",e[e.WARNING=1]="WARNING"}(ha||(ha={})),function(e){e.ANDROID="A",e.APPLE="I",e.JAVASCRIPT="J"}(ma||(ma={})),function(e){e.PLAYER_CORE="PE",e.PLAYER_UI="PUI"}(ya||(ya={})),function(e){e.UNEXPECTED_ERROR="0",e.IDENTITY_REQUIRED="1",e.AUTHENTICATION_REQUIRED="2",e.NOT_ENTITLED="3",e.CONCURRENCY_LIMIT_REACHED="4",e.PARENTAL_RESTRICTIONS="5",e.GEO_LOCATION_REQUIRED="6",e.GEO_LOCATION_ACQUISITION_ERROR="7",e.GEO_LOCATION_NOT_ALLOWED="8",e.INVALID_MEDIA="9",e.MEDIA_UNAVAILABLE="10",e.TEMPORARY_UNAVAILABLE="11",e.NETWORK_CONNECTION="12",e.UNSUPPORTED_DRM="13",e.REQUIRES_LBS="14",e.PLAYREADY_LICENSE_FAILED="15",e.DAMAGED_MEDIA_DATA="16"}(fa||(fa={}));const Sa={[fa.UNEXPECTED_ERROR]:"unexpectedError",[fa.IDENTITY_REQUIRED]:"identityRequired",[fa.AUTHENTICATION_REQUIRED]:"authenticationRequired",[fa.NOT_ENTITLED]:"notEntitled",[fa.CONCURRENCY_LIMIT_REACHED]:"concurrencyLimitReached",[fa.PARENTAL_RESTRICTIONS]:"parentalRestrictions",[fa.GEO_LOCATION_REQUIRED]:"geoLocationRequired",[fa.GEO_LOCATION_ACQUISITION_ERROR]:"geoLocationAcquisitionError",[fa.GEO_LOCATION_NOT_ALLOWED]:"geoLocationNotAllowed",[fa.INVALID_MEDIA]:"invalidMedia",[fa.MEDIA_UNAVAILABLE]:"mediaUnavailable",[fa.TEMPORARY_UNAVAILABLE]:"temporarilyUnavailable",[fa.NETWORK_CONNECTION]:"networkConnection",[fa.UNSUPPORTED_DRM]:"unsupportedDRM",[fa.REQUIRES_LBS]:"requiresLbs",[fa.PLAYREADY_LICENSE_FAILED]:"playreadyLicenseFailed",[fa.DAMAGED_MEDIA_DATA]:"damagedMediaData"};var wa,Pa,ka;!function(e){e.MEDIA_ITEM="MI",e.PLAYBACK_ACCESS="PA",e.PLAYBACK_SESSION="PS",e.MEDIA_PLAYER="MP",e.PLAYER_PLUGIN="PL"}(wa||(wa={})),function(e){e.PLAYBACK_CFA="CFA",e.GRAPH_QL="GQL",e.ENTERTAINMENT="ENT",e.PLAYBACK_ACCESS_MANAGER="PAM",e.ADOBE_PASS="AP",e.ISP="ISP",e.TVE="TVE",e.BAM="BAM",e.PLAYER_ADAPTER_BUNDLE="PAB",e.DIGITAL_RIGHTS_MANAGEMENT="DRM",e.SHIELD="SHD",e.ENTITLEMENT="ENTL",e.CONCURRENCY_MONITORING="CM",e.END_CARD_UI="ECU"}(Pa||(Pa={})),function(e){e.BAD_REQUEST="400",e.UNAUTHORIZED="401",e.FORBIDDEN="403",e.NOT_FOUND="404",e.METHOD_NOT_ALLOWED="405",e.NOT_ACCEPTABLE="406",e.TIMEOUT="408",e.CONFLICT="409",e.GONE="410",e.LENGTH_REQUIRED="411",e.PRECONDITION_FAILED="412",e.ENTITY_TOO_LARGE="413",e.URI_TOO_LONG="414",e.UNSUPPORTED_MEDIA_TYPE="415",e.RANGE_NOT_SATISFIABLE="416",e.EXPECTATION_FAILED="417",e.INTERNAL_SERVER_ERROR="500",e.NOT_IMPLEMENTED="501",e.BAD_GATEWAY="502",e.SERVICE_UNAVAILABLE="503",e.GATEWAY_TIMEOUT="504",e.HTTP_VERSION_NOT_SUPPORTED="505",e.EMBARGOED_CONTENT="100",e.EXPIRED_CONTENT="101",e.INVALID_RESPONSE="102",e.INVALID_DEVICE="103",e.UNSUPPORTED_SESSION="104",e.GEOLOCATION_NOT_ALLOWED="105",e.PROXY_NOT_ALLOWED="106",e.REFERRER_NOT_ALLOWED="107",e.INVALID_DATA_PROVIDED="108",e.SHIELD_DRM_REQUIRED="109",e.PLAYER_BUNDLE_FAILED_TO_LOAD="700",e.PLAYER_NOT_READY="701",e.PLAYER_CAN_NOT_BE_DISPOSED="702",e.PLAYER_CAN_NOT_PLAY_PAUSE="703",e.PLAYER_SHAKA_ERROR="704",e.PLAYER_NO_VIDEO_TAG="705",e.PLAYER_NO_CORE_FOUND="706",e.PLAYER_MEDIA_ERR_CUSTOM="708",e.PLAYER_MEDIA_ERR_ABORTED="709",e.PLAYER_MEDIA_ERR_NETWORK="710",e.PLAYER_MEDIA_ERR_DECODE="711",e.PLAYER_MEDIA_ERR_SRC_NOT_SUPPORTED="712",e.PLAYER_MEDIA_ERR_ENCRYPTED="713",e.PLAYER_UNKNOWN="003",e.ADS_PROVIDER_ERR="801",e.ADS_FAILED_TO_LOAD="802",e.SHAKA_PLAYER_DRM_ERROR="715",e.PLAYREADY_LICENSE_FAILED="718",e.PLAYER_BUNDLE_FAILED_TO_CREATE="719",e.AD_ONLY_FAILED="720",e.PLAYER_CONFIGURATION_ERR="721",e.PLAYER_ANALYTIC_INIT_ERR="722",e.CONCURRENCY_LIMIT_REACHED="707",e.PLAYER_PROGRAM_CHANGE_FAILED="728",e.TEXT_DECODER_ABSENT="723",e.AUDIO_CONTEXT_ABSENT="724",e.TEXT_DECODING_FAILED="725",e.STYLE_SETUP_FAILED="726",e.SOCIAL_COPY_FAILED="727",e.GEOLOCATION_PROXY="200x",e.DISTRIBUTOR_REQUEST_FAILED="201x",e.MEDIA_ITEM_MISSING="200",e.END_CARD_ERR="201",e.PLUTO_REQUEST_FAILED="302",e.SHIELD_REQUEST_FAILED="202",e.GQL_REQUEST_FAILED="600",e.UNKNOWN="000",e.NO_INTERNET="001"}(ka||(ka={}));var Ca=new class{constructor(e){this.logLevel_=pa.DEBUG,this.logLevel_=e}set logLevel(e){this.logLevel_=e}get logLevel(){return this.logLevel_}error(...e){this.logLevel_>=pa.ERROR&&console.error(...e)}warn(...e){this.logLevel_>=pa.WARN&&console.warn(...e)}info(...e){this.logLevel_>=pa.INFO&&console.info(...e)}debug(...e){this.logLevel_>=pa.DEBUG&&console.debug(...e)}}(pa.DEBUG);var _a,Ia,Ra,Da,Na=new class{constructor(){this.platform_=ma.JAVASCRIPT}set logLevel(e){Ca.logLevel=e}get logLevel(){return Ca.logLevel}set eventCoordinator(e){this.coordinator_=e}get eventCoordinator(){return this.coordinator_}unexpectedError(e){return e.reason=fa.UNEXPECTED_ERROR,e.caller||(e.caller="unexpectedError"),this.generateEvent(e)}identityRequired(e){return e.reason=fa.IDENTITY_REQUIRED,e.caller||(e.caller="identityRequired"),this.generateEvent(e)}authenticationRequired(e){return e.reason=fa.AUTHENTICATION_REQUIRED,e.caller||(e.caller="authenticationRequired"),this.generateEvent(e)}notEntitled(e){return e.reason=fa.NOT_ENTITLED,e.caller||(e.caller="notEntitled"),this.generateEvent(e)}concurrencyLimitReached(e){return e.reason=fa.CONCURRENCY_LIMIT_REACHED,e.caller||(e.caller="concurrencyLimitReached"),this.generateEvent(e)}parentalRestrictions(e){return e.reason=fa.PARENTAL_RESTRICTIONS,e.caller||(e.caller="parentalRestrictions"),this.generateEvent(e)}geoLocationRequired(e){return e.reason=fa.GEO_LOCATION_REQUIRED,e.caller||(e.caller="geoLocationRequired"),this.generateEvent(e)}geoLocationAcquisitionError(e){return e.reason=fa.GEO_LOCATION_ACQUISITION_ERROR,e.caller||(e.caller="geoLocationAcquisitionError"),this.generateEvent(e)}geoLocationNotAllowed(e){return e.reason=fa.GEO_LOCATION_NOT_ALLOWED,e.caller||(e.caller="geoLocationNotAllowed"),this.generateEvent(e)}invalidMedia(e){return e.reason=fa.INVALID_MEDIA,e.caller||(e.caller="invalidMedia"),this.generateEvent(e)}mediaUnavailable(e){return e.reason=fa.MEDIA_UNAVAILABLE,e.caller||(e.caller="mediaUnavailable"),this.generateEvent(e)}temporarilyUnavailable(e){return e.reason=fa.TEMPORARY_UNAVAILABLE,e.caller||(e.caller="temporarilyUnavailable"),this.generateEvent(e)}networkConnection(e){return e.reason=fa.NETWORK_CONNECTION,e.caller||(e.caller="networkConnection"),this.generateEvent(e)}unsupportedDRM(e){return e.reason=fa.UNSUPPORTED_DRM,e.caller||(e.caller="unsupportedDRM"),this.generateEvent(e)}requiresLbs(e){return e.reason=fa.REQUIRES_LBS,e.caller||(e.caller="requiresLbs"),this.generateEvent(e)}playreadyLicenseFailed(e){return e.reason=fa.PLAYREADY_LICENSE_FAILED,e.caller||(e.caller="playreadyLicenseFailed"),this.generateEvent(e)}damagedMediaData(e){return e.reason=fa.DAMAGED_MEDIA_DATA,e.caller||(e.caller="damagedMediaData"),this.generateEvent(e)}generateEvent(e){if(e.platform||(e.platform=this.platform_),!(e.reason&&e.platform&&e.segment&&e.component&&e.feature&&e.errorCode))return Ca.error(`${this.constructor.name}->'track' called from ${e.caller}: specify all CodesConfig params to track event ${e}`),null;const t=new Ta(e);this.coordinator_&&e.eventName&&this.coordinator_.coordinate(e.eventName,t);let o=`${this.constructor.name}: ${t.code} ${t.message}`;switch(t.cause&&(o+=". Caused by"),e.severity){case ha.WARNING:t.cause?Ca.warn(o,t.cause):Ca.warn(o);break;default:t.cause?Ca.error(o,t.cause):Ca.error(o)}return t}defineMediaItemFeatureByIdentifier(e){return e.match("natgeo")?Pa.PLAYBACK_CFA:e.match("abcnews")?Pa.ENTERTAINMENT:Pa.GRAPH_QL}defineMediaItemErrorCodesByIdentifier(e){return e.match("natgeo")?ka.SHIELD_REQUEST_FAILED:e.match("abcnews")?ka.PLUTO_REQUEST_FAILED:ka.GQL_REQUEST_FAILED}};!function(e){e.localStorage="LOCAL_STORAGE",e.sessionStorage="SESSION_STORAGE"}(_a||(_a={}));class Ma{constructor(e,t,o,i){this.id=e,this.name=t,this.logoUrl=o,this.websiteUrl=i}toString(){return`<AuthenticatedProvider id:${this.id}, name:${this.name}, logoUrl:${this.logoUrl}, websiteUrl:${this.websiteUrl}>`}static fromObject(e){return new Ma(e.id,e.name,e.logoUrl,e.websiteUrl)}}!function(e){e.token="token",e.tokenType="tokenType",e.resource="resource",e.requestor="requestor",e.fullToken="fullToken",e.zipcode="zipcode",e.mvpd="mvpd"}(Ia||(Ia={}));class Oa{constructor(e,t,o,i={}){this.authenticationType=e,this.authenticatedProvider=t,this.authenticatedIdentity=o,this.customData=i}}Oa.CustomDataKey=Ia;class La{constructor(e,t){this.success=e,this.payload=t}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
function Fa(e,t,o,i){return new(o||(o=Promise))((function(n,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function s(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}d((i=i.apply(e,t||[])).next())}))}!function(e){e.standard="default",e.googleAdManager="gam"}(Ra||(Ra={})),function(e){e.standard="default",e.prod="prod",e.development="dev"}(Da||(Da={}));const Ba=Object.freeze({}),Ua=Object.freeze(""),Va="undefined"!=typeof window&&window,xa=function(e){Va&&Va.console&&Va.console.error(e)};let za,ja,Ga;const Wa=function(){return Fa(this,void 0,void 0,(function*(){let e=za||Va.goog&&Va.goog.pal;const t=Va&&Va.bc;if(!e){try{yield function(e,t=4e3){const o="undefined"!=typeof window&&window,i=o&&o.document,n=i&&i.getElementsByTagName&&i.getElementsByTagName("head")[0],a=i&&i.body,r=n||a;return r&&e?new Promise((function(o,i){const n=document.createElement("script");let a=[],s=null;const d=()=>{a.forEach(e=>e()),a=null,clearTimeout(s),s=null},l=function(e){d(),o(e)},c=function(e){d(),i(e)};n.type="text/javascript",n.src=e,n.addEventListener("load",l),a.push(()=>n.removeEventListener("load",l)),n.addEventListener("error",c),a.push(()=>n.removeEventListener("error",c)),s=setTimeout(()=>c(new Error(`Timeout (${t}) while fetching ${e}`)),4e3),r.appendChild(n)})):Promise.reject()}("https://imasdk.googleapis.com/pal/sdkloader/pal.js")}catch(e){xa(e)}e=Va.goog&&Va.goog.pal,e&&(za=e),!t&&Va.bc&&(Va.bc=null)}return e||Ba}))};const qa=e=>null===e?null:e?"1":"0",Ha=(e,t)=>null!=e?e:t;class Ya{constructor(e=null,t=null,o=null,i=null,n="espn",a=null,r=null,s=null,d=null,l=null,c=null,u=null,p=null,h=null,m=null,y=null,f=!1,g=null,v=null,b=!1,A=!1,E=null,T=null,S=null,w=!1,P=null,k=null,C=null,_=null,I=null,R=!1,D=null,N=null,M=null,O=null,L=null,F=null,B=null,U=null,V=null,x=null,z=null,j=null,G=null,W=null,q=null,H=null,Y=null,K=null,$=null,X=null,Q=null,Z=null,J=null,ee=null,te=!1,oe=null,ie=null,ne=null,ae=null,re={},se=null,de=null,le=null,ce=null,ue=Da.standard,pe=Ra.standard,he=null,me=null,ye=null){this.aff=e,this.alt=t,this.accessLevel=o,this.adRule=i,this.an=n,this.beacType=a,this.collection=r,this.cbp=s,this.descriptionUrl=d,this.edition=l,this.fcap=c,this.hashedIp=u,this.hl=p,this.isAuth=h,this.idType=m,this.impl=y,this.isLat=f,this.iu=g,this.msid=v,this.npa=b,this.ltd=A,this.nlsnPlat=E,this.output=T,this.palNonce=S,this.storageConsent=w,this.playlist=P,this.ppid=k,this.rdid=C,this.tags=_,this.transId=I,this.tfcd=R,this.url=D,this.varResolution=N,this.vpa=M,this.vpi=O,this.vadFormat=L,this.vpmute=F,this.authenticationProvider=B,this.bundleId=U,this.deviceOS=V,this.deviceType=x,this.isAutoplay=z,this.isMute=j,this.language=G,this.nielsenAppId=W,this.nielsenDeviceGroup=q,this.noAds=H,this.objectId=Y,this.pageType=K,this.platform=$,this.stitchingProvider=X,this.swid=Q,this.testAdTargeting=Z,this.tag=J,this.unid=ee,this.vastIconsSupported=te,this.videoDeliveryMethod=oe,this.videoPlayerSize=ie,this.videoPlayerType=ne,this.videoPlayerVersion=ae,this.userInfo=re,this.isDoNotTrackEnabled=se,this.pp=de,this.cmsid=le,this.vid=ce,this.adEnvironment=ue,this.adProvider=pe,this.usPrivacy=he,this.additionalConsent=me,this.rdp=ye}merge(e){return e?(this.adRule=e.adRule||this.adRule,this.an=e.an||this.an,this.descriptionUrl=e.descriptionUrl||this.descriptionUrl,this.fcap=e.fcap||this.fcap,this.hashedIp=e.hashedIp||this.hashedIp,this.hl=e.hl||this.hl,this.idType=e.idType||this.idType,this.isLat=Ha(e.isLat,this.isLat),this.iu=e.iu||this.iu,this.msid=e.msid||this.msid,this.npa=Ha(e.npa,this.npa),this.ltd=Ha(e.ltd,this.ltd),this.output=e.output||this.output,this.ppid=e.ppid||this.ppid,this.rdid=e.rdid||this.rdid,this.rdp=e.rdp||this.rdp,this.tfcd=e.tfcd||this.tfcd,this.url=e.url||this.url,this.vpa=e.vpa||this.vpa,this.vpi=e.vpi||this.vpi,this.vadFormat=e.vadFormat||this.vadFormat,this.vpmute=Ha(e.vpmute,this.vpmute),this.authenticationProvider=e.authenticationProvider||this.authenticationProvider,this.bundleId=e.bundleId||this.bundleId,this.deviceOS=e.deviceOS||this.deviceOS,this.deviceType=e.deviceType||this.deviceType,this.isAutoplay=Ha(e.isAutoplay,this.isAutoplay),this.isMute=Ha(e.isMute,this.isMute),this.language=e.language||this.language,this.palNonce=e.palNonce||this.palNonce,this.storageConsent=e.storageConsent||this.storageConsent,this.nielsenAppId=e.nielsenAppId||this.nielsenAppId,this.nielsenDeviceGroup=e.nielsenDeviceGroup||this.nielsenDeviceGroup,this.noAds=Ha(e.noAds,this.noAds),this.objectId=e.objectId||this.objectId,this.platform=e.platform||this.platform,this.stitchingProvider=e.stitchingProvider||this.stitchingProvider,this.swid=e.swid||this.swid,this.tags=e.tags||this.tags,this.testAdTargeting=e.testAdTargeting||this.testAdTargeting,this.unid=e.unid||this.unid,this.alt=e.alt||this.alt,this.beacType=e.beacType||this.beacType,this.transId=e.transId||this.transId,this.accessLevel=e.accessLevel||this.accessLevel,this.varResolution=e.varResolution||this.varResolution,this.nlsnPlat=e.nlsnPlat||this.nlsnPlat,this.tag=e.tag||this.tag,this.aff=e.aff||this.aff,this.playlist=e.playlist||this.playlist,this.cbp=e.cbp||this.cbp,this.collection=e.collection||this.collection,this.impl=e.impl||this.impl,this.isAuth=e.isAuth||this.isAuth,this.pageType=e.pageType||this.pageType,this.vastIconsSupported=Ha(e.vastIconsSupported,this.vastIconsSupported),this.videoDeliveryMethod=e.videoDeliveryMethod||this.videoDeliveryMethod,this.videoPlayerSize=e.videoPlayerSize||this.videoPlayerSize,this.videoPlayerType=e.videoPlayerType||this.videoPlayerType,this.videoPlayerVersion=e.videoPlayerVersion||this.videoPlayerVersion,this.isDoNotTrackEnabled=Ha(e.isDoNotTrackEnabled,this.isDoNotTrackEnabled),this.pp=e.pp||this.pp,this.cmsid=e.cmsid||this.cmsid,this.usPrivacy=e.usPrivacy||this.usPrivacy,this.additionalConsent=e.additionalConsent||this.additionalConsent,this.vid=e.vid||this.vid,this.userInfo?Object.assign(this.userInfo,e.userInfo):this.userInfo=e.userInfo,this.adEnvironment=e.adEnvironment!==Da.standard?e.adEnvironment:this.adEnvironment,this.adProvider=e.adProvider!==Ra.standard?e.adProvider:this.adProvider,this):this}dictionaryForStartSession(){const e={};return e["ad.tfcd"]=qa(this.tfcd),e["ad.is_lat"]=qa(this.isLat),e["ad.idtype"]=this.idType,e["ad.rdid"]=this.rdid,e["ad.ppid"]=this.ppid||this.swid,e["ad.description_url"]=this.descriptionUrl,e["ad.hl"]=this.hl,e["ad.paln"]=this.palNonce,e["ad.npa"]=qa(this.npa),e["ad.ltd"]=qa(this.ltd),e["ad.msid"]=this.msid,e["ad.an"]=this.an,e["ad.url"]=this.url,e["ad.us_privacy"]=this.usPrivacy,e["ad.cust_params.d_us_privacy"]=this.usPrivacy,e["ad.rdp"]=null!==this.rdp?this.rdp:"1YYY"===this.usPrivacy?"1":null,e.authp=this.authenticationProvider,e.bundleId=this.bundleId,e.devOS=this.deviceOS,e.devType=this.deviceType,e.fcap=this.fcap,e.isAutoplay=qa(this.isAutoplay),e.isMute=qa(this.isMute),e.nlsnAppID=this.nielsenAppId,e.plt=this.platform,e.swid=this.swid,e.unid=this.unid,e.vps=this.videoPlayerSize,this.adEnvironment!==Da.standard&&(e.adEnv=this.adEnvironment),this.adProvider!==Ra.standard&&(e.adProvider=this.adProvider),Object.assign(e,this.userInfo),Object.keys(e).forEach(t=>null===e[t]&&delete e[t]),e}dictionaryForBrightcove(){const e={};e.bundleId=this.bundleId,e.devOS=this.deviceOS,e.devType=this.deviceType,e.isAutoplay=qa(this.isAutoplay),e.isMute=qa(this.isMute),e.plt=this.platform,e.swid=this.swid,e.vps=this.videoPlayerSize,e.d_id=this.rdid,e.vdm=this.videoDeliveryMethod||"vod",e.stp=this.stitchingProvider||"brightcove";const t=Object.keys(e).filter(t=>null!==e[t]).map(t=>`${t}=${e[t]}`).join("&"),o={};return o.UMADPARAMiu=this.iu,o.UMADPARAMis_lat=qa(this.isLat),o.UMADPARAMidtype=this.idType,o.UMADPARAMrdid=this.rdid,o.UMADPARAMppid=this.ppid||this.swid,o.UMADPARAMdescription_url=this.descriptionUrl,o.UMADPARAMhl=this.hl,o.UMADPARAMnpa=qa(this.npa),o.UMADPARAMltd=qa(this.ltd),o.UMADPARAMmsid=this.msid,o.UMADPARAMan=this.an,o.UMADPARAMurl=this.url,o.UMADPARAMvpa=qa(this.vpa),o.UMADPARAMvpmute=qa(this.vpmute),o.UMPTPARAMcust_params=t,Object.assign(o,this.userInfo),Object.keys(o).forEach(e=>null===o[e]&&delete o[e]),o}dictionaryForAdEngine(){const e={};switch(e.sect=this.iu,e.npa=qa(this.npa),e.ltd=qa(this.ltd),e.lat=qa(this.isLat),e.idtype=this.idType,e.devId=this.rdid,e.ppid=this.ppid||this.swid,e.app=this.an,e.tfcd=qa(this.tfcd),e.devOS=this.deviceOS,e.devType=this.deviceType,e.isAutoplay=qa(this.isAutoplay),e.isMute=qa(this.isMute),e.plt=this.platform,e.swid=this.swid,e.unid=this.unid,e.vps=this.videoPlayerSize,e.bundle=this.msid,e.hl=this.hl,e.UID=this.swid,e.vdm=this.videoDeliveryMethod,e.url=this.url,this.adEnvironment){case Da.development:e.env="qa";break;case Da.prod:e.env="prod";break;case Da.standard:}switch(this.adProvider){case Ra.googleAdManager:e.ads="google";break;case Ra.standard:}return Object.assign(e,this.userInfo),Object.keys(e).forEach(t=>null===e[t]&&delete e[t]),e}dictionaryForImaSdk(){const e={};e.authp=this.authenticationProvider,e.d_us_privacy=this.usPrivacy,e.devOS=this.deviceOS,e.devType=this.deviceType,e.ed=this.edition,e.hip=this.hashedIp,e.isAutoplay=qa(this.isAutoplay),e.isDnt=qa(this.isDoNotTrackEnabled),e.isMute=qa(this.isMute),e.lang=this.language,e.nlsnAppID=this.nielsenAppId,e.nlsnDevGrp=this.nielsenDeviceGroup,e.noad=this.noAds,e.objid=this.objectId,e.plt=this.platform,e.pgtyp=this.pageType,e.swid=this.swid,e.tag=this.tags,e.tstAdTar=this.testAdTargeting,e.unid=this.unid,e.vdm=this.videoDeliveryMethod||"vod",e.vps=this.videoPlayerSize;const t=Object.keys(e).filter(t=>null!==e[t]).map(t=>`${t}=${e[t]}`).join("&"),o={};return o.ad_rule=this.adRule,o.cmsid=this.cmsid,o.description_url=this.descriptionUrl,o.hl=this.hl,o.iu=this.iu,o.npa=qa(this.npa),o.output=this.output,o.ltd=qa(this.ltd),o.pp=this.pp,o.ppid=this.ppid,o.rdp=this.rdp,o.tfcd=qa(this.tfcd),o.us_privacy=this.usPrivacy,o.addtl_consent=this.additionalConsent,o.vid=this.vid,o.vpa=qa(this.vpa),o.cust_params=t,o.gdfp_req="1",o.env="vp",o.sz="640x480",this.adEnvironment!==Da.standard&&(o.adEnv=this.adEnvironment),Object.keys(o).forEach(e=>null===o[e]&&delete o[e]),o}dictionaryForEntertainment(){const e={};e.ed=this.edition,e.devOS=this.deviceOS,e.devType=this.deviceType,e.hip=this.hashedIp,e.isAutoplay=qa(this.isAutoplay),e.isDnt=qa(this.isDoNotTrackEnabled),e.isMute=qa(this.isMute),e.lang=this.language,e.nlsnAppID=this.nielsenAppId,e.nlsnDevGrp=this.nielsenDeviceGroup,e.nlsnPlat=this.nlsnPlat,e.noad=this.noAds,e.objid=this.objectId,e.pgtyp=this.pageType,e.plt=this.platform,e.swid=this.swid||this.ppid,e.tag=this.tags,e.tstAdTar=this.testAdTargeting,e.unid=this.unid,e.vdm=this.videoDeliveryMethod||"vod",e.vps=this.videoPlayerSize,e.alt=this.alt,e.beacType=this.beacType,e.transId=this.transId,e.accesslevel=this.accessLevel,e.isAuth=this.isAuth,e.fcap=this.fcap,e.var=this.varResolution,e.tag=this.tag,e.aff=this.aff,e.authp=this.authenticationProvider,e.playlist=this.playlist,e.cbp=this.cbp,e.collection=this.collection,e.impl=this.impl;const t=Object.keys(e).filter(t=>null!==e[t]).map(t=>`${t}=${e[t]}`).join("&"),o={};return o.addtl_consent=this.additionalConsent,o.ad_rule=this.adRule,o.cmsid=this.cmsid,o.description_url=this.descriptionUrl,o.hl=this.hl,o.iu=this.iu,o.npa=qa(this.npa),o.output=this.output,o.ltd=qa(this.ltd),o.pp=this.pp,o.ppid=this.ppid,o.tfcd=qa(this.tfcd),o.vid=this.vid,o.vpa=qa(this.vpa),o.cust_params=t,o.output=this.output,o.vad_format=this.vadFormat,o.vpi=this.vpi,o.url=this.url,o.us_privacy=this.usPrivacy,o.gdfp_req="1",o.env="vp",o.sz="640x480",Object.keys(o).forEach(e=>null===o[e]&&delete o[e]),o}static ppidForSwid(e){return e}}Ya.getGooglePalNonce=function(e,t=3e3,o=!1,i=!0,n=Wa){return Fa(this,void 0,void 0,(function*(){let a=i&&Ga||Ua;if(!a){let r,s,d;try{const e=yield n();e&&(r=e.NonceLoader,s=e.NonceRequest,d=e.ConsentSettings)}catch(e){xa(e)}if((!i||!Ga)&&r&&s){let i;try{const{storageConsent:t=!1}=e,n=new d;n.allowStorage=t,ja=!ja||o?new r(n):ja;const a=Object.assign(new s,function(e){const[t,o]=String(e.videoPlayerSize||"640x480").split("x");return{adWillAutoPlay:e.isAutoplay,adWillPlayMuted:e.isMute,continuousPlayback:"vod"===e.videoDeliveryMethod,descriptionUrl:e.descriptionUrl||Ua,iconsSupported:e.vastIconsSupported,playerType:e.videoPlayerType||Ua,playerVersion:e.videoPlayerVersion||Ua,ppid:e.ppid||e.swid||Ua,videoHeight:parseInt(o,10),videoWidth:parseInt(t,10)}}(e));i=yield ja.loadNonceManager(a)}catch(e){xa(e)}i&&(a=yield i.getNonce(),(!a||Number(t)>0&&String(a).length>t)&&(a=Ua),a&&(Ga=a))}}return a}))};var Ka=mt.includes,$a=r((function(){return!Array(1).includes()}));Ke({target:"Array",proto:!0,forced:$a},{includes:function(e){return Ka(this,e,arguments.length>1?arguments[1]:void 0)}});var Xa=function(e){return L[e+"Prototype"]},Qa=Xa("Array").includes,Za=ge("match"),Ja=a.TypeError,er=function(e){if(function(e){var t;return O(e)&&(void 0!==(t=e[Za])?!!t:"RegExp"==C(e))}(e))throw Ja("The method doesn't accept regular expressions");return e},tr=ge("match"),or=f("".indexOf);Ke({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[tr]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~or(ao(N(this)),ao(er(e)),arguments.length>1?arguments[1]:void 0)}});var ir,nr=Xa("String").includes,ar=Array.prototype,rr=String.prototype,sr=function(e){var t=e.includes;return e===ar||U(ar,e)&&t===ar.includes?Qa:"string"==typeof e||e===rr||U(rr,e)&&t===rr.includes?nr:t};class dr{getErrorMsg(e){switch(e){case 400:return"NewRelic error > Missing or invalid content length: Unable to process empty request.";case 403:return"NewRelic error > Missing or invalid API key: Invalid Insert key, or the account does not have access to Insights. Register a valid Insert key.";case 408:return"NewRelic error > Request timed out: Request took too long to process.";case 413:return"NewRelic error > Content too large: Request is too large to process. Refer to the limits and restricted characters to troubleshoot.";case 415:return"NewRelic error > Invalid content type: Must be application/JSON. The Event API accepts any content type except multi-part/related and assumes it can be parsed to JSON.";case 429:return"NewRelic error > Too many requests due to rate limiting.";case 503:return"NewRelic error > Service temporarily unavailable: Retry request"}}}!function(e){e.FINISH="finish",e.FMI="FMI",e.CAZ="CAZ",e.CAN_T="CAN<T>",e.CAZ_T="CAZ<T>",e.B_FM="B_FM",e.B_FMF="B_FMF",e.B_RIT="B_RIT",e.B_L="B_L",e.B_RA="B_RA",e.T_FESPN="T_FESPN",e.T_FESPNF="T_FESPNF",e.T_FSH="T_FSH",e.T_FSHF="T_FSHF",e.T_FSS="T_FSS",e.T_FSSF="T_FSSF",e.T_FE="T_FE",e.T_FEF="T_FEF",e.T_NIT="T_NIT",e.T_CHP="T_CHP",e.T_PL="T_PL",e.T_CMAN="T_CMAN",e.T_PJWT="T_PJWT",e.T_NJWT="T_NJWT",e.T_BJWT="T_BJWT",e.MPS="MPS",e.CM_I="CM_I",e.CM_IF="CM_IF",e.B_P="B_P",e.MP_I="MP_I",e.MP_L="MP_L",e.MP_S="MP_S",e.MP_C_PA="MP_C_PA",e.MP_C_PL="MP_C_PL",e.MP_SE="MP_SE",e.MP_S_S="MP_S_S",e.MP_S_E="MP_S_E",e.MP_V_M="MP_V_M",e.MP_V_U="MP_V_U",e.MP_CC_ON="MP_CC_ON",e.MP_CC_OFF="MP_CC_OFF",e.MP_C_C="MP_C_C",e.MP_D="MP_D"}(ir||(ir={}));var lr,cr=new class{constructor(){this.errorReason_=null,this.breadcrumbs_=[]}add(e){e&&this.breadcrumbs_.push(e)}setErrorReason(e){this.errorReason_=e}getErrorReason(){return this.errorReason_}getCrumbs(){return this.breadcrumbs_}reset(){this.breadcrumbs_=[],this.errorReason_=null}};class ur{parse(e,t){const o=this.deviceData_();if(e){let i=cr.getCrumbs();Array.isArray(e.trail)&&e.trail.length&&(i=e.trail),i.length&&(e.trail=this.constructTrail_(e.name,i,t),cr.reset());for(const t in e)void 0!==e[t]&&(o[t]=e[t]),"object"==typeof o[t]&&(o[t]=JSON.stringify(o[t]))}return t&&t.code&&(o["error.instrumentationCode"]=t.code,o.error=Sa[t.reason],o["error.message"]||(o["error.message"]=t.message),t.cause&&t.cause.message&&(o["error.cause.message"]=t.cause.message)),this.makeCamelCaseInsteadPeriod_(o)}makeCamelCaseInsteadPeriod_(e){const t=Object.keys(e),o={};return t.forEach(t=>{const i=t.split(".");if(i.length>1)for(let e=1;e<i.length;e++)i[e]=i[e].charAt(0).toUpperCase()+i[e].slice(1);o[i.join("")]=e[t]}),o}deviceData_(){const e=window.navigator;return{href:location.href,userAgent:e&&e.userAgent,appVersion:e&&e.appVersion}}constructTrail_(e,t,o){let i;if(t&&t.length>=0){i="start:"+e;for(let e=0;e<t.length;e++)i+="|"+t[e]}return o&&(i+="|$end,signpostError="+Sa[o.reason]),i}}class pr{constructor(){this.newRelicError_=new dr,this.parser_=new ur,this.enabled_=!0,this.serviceUrl_="https://insights-collector.newrelic.com/v1/accounts",this.insertKey_="NRII-RUdHfa4sRhagSedsRB8tArX7y3Zszm0u",this.accountId_="459463"}init(e){this.enabled_=e.enabled||!1,this.serviceUrl_=e.serviceUrl||this.serviceUrl_,this.insertKey_=e.insertKey||this.insertKey_,this.accountId_=e.accountId||this.accountId_}addCrumb(e){cr.add(e)}resetCrumbs(){cr.reset()}getErrorReason(){return cr.getErrorReason()}getServiceUrl_(){return this.serviceUrl_&&this.accountId_?`${this.serviceUrl_}/${this.accountId_}/events`:null}sendEvent(e,t){const o=this.getServiceUrl_();if(!o||!this.enabled_){const e=`NewRelicFactory error -> recording new relic insights event. invalid url: %@ ${this.serviceUrl_}/${this.accountId_}/events`;return console.debug(e),Promise.resolve({error:e})}const i={"X-Insert-Key":this.insertKey_,"Content-Type":"application/json"},n=this.parser_.parse(e,t);if(n){const e={method:"POST",headers:i,body:JSON.stringify(n)};return fetch(o,e).then(e=>{if(e.ok)return Promise.resolve(e.json());{const t=this.newRelicError_.getErrorMsg(e.status);return console.debug(t),Promise.resolve({error:t})}}).catch(e=>(console.debug(e),Promise.resolve({error:e})))}const a="NewRelicFactory error -> nothing to send";return console.debug(a),Promise.resolve({error:a})}}new pr,function(e){e[e.all=0]="all",e[e.linearPlayback=1]="linearPlayback"}(lr||(lr={}));var hr,mr=lr;!function(e){e.linear="linear",e.event="event"}(hr||(hr={}));var yr,fr=hr;!function(e){e.stitchedPreroll="stitchedPreroll"}(yr||(yr={}));var gr,vr=yr;!function(e){e.live="live",e.onDemand="onDemand"}(gr||(gr={}));var br,Ar=gr;!function(e){e.nielsen="nielsen",e.comscore="comscore",e.conviva="conviva",e.heartbeats="heartbeats"}(br||(br={}));var Er,Tr=br;!function(e){e.shortform="shortform",e.longform="longform"}(Er||(Er={}));var Sr,wr=Er;!function(e){e.audio="audio",e.video="video"}(Sr||(Sr={}));var Pr,kr=Sr;!function(e){e.pluto="pluto",e.graphQL="graphQL",e.cfa="cfa",e.itemFeed="itemFeed"}(Pr||(Pr={}));var Cr,_r=Pr;!function(e){e.open="OPEN",e.direct="DIRECT",e.mvpd="MVPD",e.isp="ISP",e.none="NONE"}(Cr||(Cr={}));var Ir,Rr=Cr;!function(e){e.none="none",e.startSession="startSession",e.bam="bam",e.shield="shield",e.entitlement="entitlement"}(Ir||(Ir={}));var Dr=Ir;class Nr{constructor(e,t,o,i,n,a,r,s){this.url=e,this.type=t,this.hasEspnId3Heartbeats=o,this.hasNielsenWatermarks=i,this.hasPassThroughAds=n,this.commercialReplacement=a,this.startSessionUrl=r,this.variant=s}static fromObject(e){if(!e)return null;const{url:t,type:o,hasEspnId3Heartbeats:i,hasNielsenWatermarks:n,hasPassThroughAds:a,commercialReplacement:r,startSessionUrl:s,variant:d}=e,l=Dr[o];return new Nr(t,l,i,n,a,r,s,d)}}class Mr{constructor(e,t,o,i,n=null){this.id=e,this.type=t,this.name=o,this.resource=i,this.affiliate=n}static fromObject(e){if(!e)return null;const t=fr[e.type];return new Mr(e.id,t,e.name,e.resource,e.affiliate)}}class Or{constructor(e){this.url=e}static fromObject(e){return e&&e.url?new Or(e.url):null}}class Lr{constructor(e){this.name=e}get logoUrl(){return`https://secure.espncdn.com/watchespn/images/espnplus/packages/${this.name}.png`}static fromObject(e){return e?new Lr(e.name):null}}class Fr{constructor(e,t,o,i,n){this.id=e,this.title=t,this.duration=o,this.language=i||"en",this.source=n,this.description=null,this.authenticationTypes=[],this.mrss=null,this.seekInSeconds=null,this.tracking={},this.references={},this.network=null,this.streamType=null,this.supportedMediaCommands=mr.all,this.images=[],this.type=kr.video,this.packages=[],this.tier=null,this.entityType=null,this.isSyndicatable=null,this.brand=null,this.siteBrandId=null,this.apiSource=null,this.adUnitId=null,this.cues=null,this.adTarget=null,this.show=null}get isLinear(){return!!this.network&&this.network.type===fr.linear}get isLive(){return this.streamType===Ar.live}static fromObject(e){const t=Nr.fromObject(e.source),o=new Fr(e.id,e.title,e.duration,e.language,t);return o.airDate=e.airDate,o.apiSource=e.apiSource,o.authenticationTypes=e.authenticationTypes,o.description=e.description,o.images=(e.images||[]).map(e=>Or.fromObject(e)),o.mrss=e.mrss,o.network=Mr.fromObject(e.network),o.seekInSeconds=e.seekInSeconds,o.streamType=Ar[e.streamType],o.supportedMediaCommands=e.supportedMediaCommands,o.tracking=e.tracking,o.references=e.references,o.packages=(e.packages||[]).map(e=>Lr.fromObject(e)),o.tier=e.tier,o.type=kr[e.type],o.entityType=wr[e.entityType],o.isSyndicatable=e.isSyndicatable,o.brand=e.brand,o.siteBrandId=e.siteBrandId,o.adUnitId=e.adUnitId,o.cues=e.cues,o.show=e.show,o.adTarget=e.adTarget,o.seekBarThumbnails=e.seekBarThumbnails,o.availableDate=e.availableDate,o.episodeNumber=e.episodeNumber,o.locale=e.locale,o.seasonNumber=e.seasonNumber,o.tmsid=e.tmsid,o.videoShowGenre=e.videoShowGenre,o}toString(){return`<MediaItem id:${this.id}, title:${this.title}, streamType:${this.streamType}>`}}class Br{constructor(e){const t=function(e){const t=e.split("?")[1],o={};if(t){const e=t.split("&");for(let t=0;t<e.length;t+=1){const i=e[t].split("=");o[i[0]]=i[1]}}return o}(e);if(this.original=e,this.id=t.videoID||t.playID||t.clip||t.externalId,e.match("sportscenter")){this.gameId=t.playGameID,this.channel=t.playChannel,this.simulcastAiringId=t.simulcastAiringId;const e=parseInt(t.resumeTime,10);isNaN(e)||(this.resumeTime=e),this.eventId=t.eventId}else e.match("abcnews")&&(this.channel=t.playChannel,this.id=t.videoID||t.id);this.source=t["x-source"],t.videoID?this.entityType=wr.shortform:this.entityType=wr.longform,this.type=kr.video}toString(e){return e==_r.graphQL?`<MediaItemIdentifier id:${this.id}, gameId:${this.gameId}, channel:${this.channel}, source:${this.source}>`:`<MediaItemIdentifier id:${this.id}, source:${this.source}>`}static identifierStringForNetwork(e,t){switch(t){case _r.cfa:return"natgeo://playVideo?videoID="+e;case _r.itemFeed:return"abcnews://playVideo?playChannel="+e;case _r.graphQL:default:return"sportscenter://x-callback-url/showWatchStream?playChannel="+e}}}var Ur=t((function(t){var o,i;o=e,i=function(){var e=function(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function i(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function n(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(o){return"debug"===o&&(o="log"),"undefined"!=typeof console&&("trace"===o&&t?n:void 0!==console[o]?i(console,o):void 0!==console.log?i(console,"log"):e)}function r(t,i){for(var n=0;n<o.length;n++){var a=o[n];this[a]=n<t?e:this.methodFactory(a,t,i)}this.log=this.debug}function s(e,t,o){return function(){"undefined"!=typeof console&&(r.call(this,t,o),this[e].apply(this,arguments))}}function d(e,t,o){return a(e)||s.apply(this,arguments)}function l(e,t,i){var n,a=this;t=null==t?"WARN":t;var s="loglevel";function l(){var e;if("undefined"!=typeof window&&s){try{e=window.localStorage[s]}catch(e){}if(void 0===e)try{var t=window.document.cookie,o=t.indexOf(encodeURIComponent(s)+"=");-1!==o&&(e=/^([^;]+)/.exec(t.slice(o))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?s+=":"+e:"symbol"==typeof e&&(s=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||d,a.getLevel=function(){return n},a.setLevel=function(t,i){if("string"==typeof t&&void 0!==a.levels[t.toUpperCase()]&&(t=a.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(n=t,!1!==i&&function(e){var t=(o[e]||"silent").toUpperCase();if("undefined"!=typeof window&&s){try{return void(window.localStorage[s]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+t+";"}catch(e){}}}(t),r.call(a,t,e),"undefined"==typeof console&&t<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){t=e,l()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(t,!1),function(){if("undefined"!=typeof window&&s){try{return void window.localStorage.removeItem(s)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var c=l();null==c&&(c=t),a.setLevel(c,!1)}var c=new l,u={};c.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new l(e,c.getLevel(),c.methodFactory)),t};var p="undefined"!=typeof window?window.log:void 0;return c.noConflict=function(){return"undefined"!=typeof window&&window.log===c&&(window.log=p),c},c.getLoggers=function(){return u},c.default=c,c},t.exports?t.exports=i():o.log=i()}));function Vr(e,t,o,i){if(!t)return{};let n,a,r,s=null;e===ua.natGeo?s=function(e){if(!e)return{};const t={},{id:o,title:i,duration:n}=e;return t.c_video_id_code=o,t.c_a_media_airdate="unknown",t.c_a_media_daypart="daytime",t.c_a_media_digitaldate="unknown",t.c_a_media_episode="none",t.c_a_media_feed="natgeo live",t.c_a_media_format="vod",t.c_a_media_genre="none",t.c_a_media_network="natgeo",t.c_a_media_originator="natgeo",t.c_a_media_pass_auth="none",t.c_a_media_pass_mvpd="none",t.c_a_media_rating="none",t.c_a_media_season="none",t.c_a_media_show=i,t.c_a_media_streamtype=Sr.video,t.c_a_media_length=n,t}(t):(n=function(e,t,o){if(!e)return{};const{duration:i,id:n,league:a,name:r,network:s,program:d,sport:l,startDateTime:c,tracking:u}=e;let p="1";o&&!0===o.hasEspnId3Heartbeats&&!1===o.hasPassThroughAds&&"SHARED INV"!==o.commercialReplacement&&(p="2");const h={type:"content"};if(h.assetid=u&&u.trackingId||n,h.program=r,h.title=r,h.clientid="us-600140",t===wr.longform){if(h.length=""+i,h.segB=a&&a.name||"No League",h.segC=`${d&&d.code||""}${l&&l.code||""}`,c){const e=new Date(c);h.airdate=`${e.getUTCFullYear().toString()+("0"+e.getUTCMonth()).slice(-2)+("0"+e.getUTCDate()).slice(-2)} ${("0"+e.getUTCHours()).slice(-2)}:${("0"+e.getUTCMinutes()).slice(-2)}:${("0"+e.getUTCSeconds()).slice(-2)}`}h.isfullepisode="y",h.crossId1=u&&u.nielsenCrossId1||"",h.crossId2=s&&s.name||"",h.adloadtype=p,h.hasAds="1",h.progen="SE",h.vcid="b01"}return t===wr.shortform&&(h.accmethod="1",h.length=""+i,h.segA=r,h.segB="No League",h.segC="VOD",h.isfullepisode="n",h.crossId1="",h.adloadtype="1",h.vcid="c17",h.adloadtype="2"),h}(t,o,i),a=function(e,t){if(!e)return{};const{id:o,duration:i,name:n,league:a,startDateTime:r,network:s,sport:d,status:l,tracking:c}=e,u={};if(t===wr.longform)u.ns_st_cl=0,u.ns_st_ct="vc",!l||"live"!==l.toLowerCase()&&"over"!==l.toLowerCase()?(u.ns_st_cl=i,u.ns_st_ct="vc12",u.ns_st_pr="VOD",u.ns_st_ep=n):(u.ns_st_cl=0,u.ns_st_ct="vc13",u.ns_st_pr=n,u.ns_st_ep="*null"),u.c3="WATCHESPNLIVE",u.c6=a&&a.name?a||"No league":d&&d.code||"No Sport";else{u.ns_st_cl=i,u.ns_st_ct="vc11",u.ns_st_pr="VOD",u.ns_st_ep=n;const{sportName:e,leagueName:t}=c||{};u.c3="vod",u.c6=""+(t&&"no league"!==t.toLowerCase()?t:e||"No Sport")}if(u.ns_st_ti="*null",u.ns_st_ia="*null",u.ns_st_ce="*null",u.ns_st_ci=o,r){const e=new Date(r);u.ns_st_ddt=e.toDateString(),u.ns_st_tdt=e.toDateString()}return u.ns_st_st=s?s.id:"*null",u.ns_st_en="*null",u.ns_st_cn="1",u.ns_st_pn="1",u.ns_st_tp="1",u.ns_st_pu="ESPN",u.ns_st_cu="none",u.ns_st_ad="0",u.ns_st_ge="Sports",u}(t,o),r=function(e,t,o){if(!e)return{};const{name:i,id:n,airingId:a,eventId:r,duration:s,network:d,status:l,sport:c,league:u,pccId:p}=e,h={};h.contentId=n,p&&(h.pccId=p),a&&(h.airingId=a),r&&(h.eventId=""+r,h.eventName=i),d&&(h.network=d.id),t===wr.shortform?h.assetType="clip":!l||"live"!==l.toLowerCase()&&"over"!==l.toLowerCase()?h.assetType="vod":h.assetType="live";let m=`${i} - ${n}`;return d&&d.type===fr.linear&&"live"===h.assetType&&(m=d.id),h.sport=c&&c.name||"Not Applicable",h.league=u&&u.name||"Not Applicable",h.appBrand=ua.espn,{assetName:m,duration:s,streamUrl:o&&o.url,custom:h}}(t,o,i),s=function(e,t){if(!e)return{};const{duration:o,airingId:i,network:n,status:a,sport:r,league:s,name:d,program:l,startDateTime:c,tracking:u,originalPublishDate:p,expirationDate:h,lastModifiedDate:m,ad:y,coverageType:f,brands:g}=e,v={};if(v.ContentDuration=o,t===wr.longform){if(v.CMSID=u&&u.name||d,v.isFullEpisode="y",i&&(v.AiringID=i),n&&(v.NetworkName=n.id,v.Channel=n.id),a&&(v.VideoType="REPLAY"===a?"replay":"live"),v.Sport=r&&r.name||"Not Applicable",v.SportCode=r&&r.code||"Not Applicable",v.League=s&&s.name||"Not Applicable",l&&l.code&&l.categoryCode?v.ProgramCode=l.categoryCode+l.code:v.ProgramCode="Not Applicable",v.IsStudio=l&&l.isStudio||"Not Applicable",c){const e=new Date(c);v.AirDate=e.toDateString(),v.AirTime=e.toTimeString()}if(Array.isArray(g)&&g.length){const{id:e,name:t,type:o}=g[0];v["a.media.asset"]=e,v["a.media.show"]=t,v["a.media.genre"]=o}}else if(t===wr.shortform){if(v.isFullEpisode="n",v.VideoType="vod",v.Sport=u&&u.sportName||"Not Applicable",v.League=u&&u.leagueName||"Not Applicable",v.ShowCode=y&&y.bundle||"Not Applicable",u&&u.name&&(v.CMSID=u.name),p){const e=new Date(p);v.PublishDate=e.toISOString().substring(0,10),v.PublishTime=e.toISOString().substring(11)}if(h){const e=new Date(h);v.ExpirationDate=e.toISOString()}if(m){const e=new Date(m);v.DateLastModified=e.toISOString()}f&&(v.VideoTypeDetail=f)}return v}(t,o));const d={};return d[Tr.nielsen]=n,d[Tr.comscore]=a,d[Tr.conviva]=r,d[Tr.heartbeats]=s,d}const xr=["espn_ppv","espn_dtc","espn1","espn2","espn3","espnu","sec","espnews","espndeportes","longhorn","goalline","buzzerbeater","secplus","acc","accextra","espn_free","bam_dtc"];class zr{constructor(e,t,o,i){e==_r.graphQL?(this.serviceUrl=t||"https://watch.graph.api.espn.com/api",this.apiKey=o||"d15c5790-7cb0-4fe1-8782-25f4698d0739",this.networkSortOrder=i||xr):e==_r.cfa?this.serviceUrl=t||"https://natgeo.entertainment.client.dtci.technology/v1/playback/video/id/mock":e===_r.itemFeed&&(this.serviceUrl=t||"https://abcnews.go.com/video/itemfeed")}}class jr{constructor(){this.configuration_=jr.defaultConfiguration}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Fa(this,void 0,void 0,(function*(){return yield jr.fetchMediaItems(e,t,this.configuration)}))}static fetchMediaItems(e,t,o){return Fa(this,void 0,void 0,(function*(){const i=e.map(e=>new Br(e)),{serviceUrl:n,apiKey:a,networkSortOrder:r}=o,s=(yield Promise.all(i.map(e=>jr.getPromiseMediaItems(e,n,a,t)))).filter(e=>!(e instanceof Error)&&e instanceof Fr);return s.length?function(e,t,o){return e.sort((e,t)=>{const o="PRIMARY"===e.tier?0:"SECONDARY"===e.tier?1:2,i="PRIMARY"===t.tier?0:"SECONDARY"===t.tier?1:2;return o<i?-1:o>i?1:0}).sort((e,o)=>{const i=e.network&&e.network.id.toLowerCase()||"unknown",n=o.network&&o.network.id.toLowerCase()||"unknown";let a=t.indexOf(i),r=t.indexOf(n);return-1===a&&(a=999),-1===r&&(r=999),a<r?-1:a>r?1:0}).sort((e,t)=>{const i=e.language===o?0:1,n=t.language===o?0:1;return i<n?-1:i<n?1:0})}(s,r,navigator.language):null}))}static getPromiseMediaItems(e,t,o,i){return Fa(this,void 0,void 0,(function*(){const n=function(e,t,o,i){let n="",a="",r="";const s=i||"US";return e.entityType===wr.shortform?(n="VOD",r="{id name description authTypes language duration originalPublishDate expirationDate requiresLinearPlayback lastModifiedDate source { url authorizationType } image { url } tracking { name sportName leagueName } coverageType prerollSource:source(variant:PREROLL) { url authorizationType }ad { sport bundle } links { web } cerebroId syndicatable pccId }",a=`id:"${e.id}"`):(n="airing",r="{ id name description mrss:adobeRSS authTypes requiresLinearPlayback status:type startDateTime endDateTime duration source(authorization: SHIELD) { url authorizationType hasEspnId3Heartbeats hasNielsenWatermarks hasPassThroughAds commercialReplacement startSessionUrl } network { id type name adobeResource } image { url } sport { name code uid } league { name uid } program { code categoryCode isStudio } seekInSeconds simulcastAiringId airingId tracking { nielsenCrossId1 trackingId } eventId packages { name } language tier feedName brands { id name type } }",e.id?a=`id:"${e.id}"`:e.channel?(n="airings",a=`networks:["${e.channel}"],type:LIVE`):e.gameId&&(n="airings",a=`eventId:"${e.eventId||e.gameId}"`)),`${t}?apiKey=${o}&query=${encodeURIComponent(`{ ${n}(${a},countryCode:"${s}",deviceType:SETTOP,tz:"Z") ${r} }`)}`}(e,t,o,i.countryCode);try{const a=yield fetch(n),r=yield a.json();let{airing:s}=r.data;const{airings:d}=r.data;if(d){const t=e.simulcastAiringId?t=>t.simulcastAiringId===e.simulcastAiringId:()=>!0;s=d.filter(t)[0]}const l=r.data.VOD,c=s||l;if(!c)throw new Error("No results found.");const u=function(e,t,o){const{id:i,name:n,description:a,duration:r,image:s,eventId:d,requiresLinearPlayback:l,authTypes:c,source:u,prerollSource:p,packages:h,language:m,mrss:y,seekInSeconds:f,tracking:g,simulcastAiringId:v,network:b,status:A,cerebroId:E,syndicatable:T}=e,S=A&&("LIVE"===A.toUpperCase()||"OVER"===A.toUpperCase())?Ar.live:Ar.onDemand,w=(e=>{switch(e){case"NONE":return Dr.none;case"START_SESSION":return Dr.startSession;case"BAM":return Dr.bam;case"SHIELD":return Dr.shield}})(u.authorizationType);let P=new Nr(u.url,w,u.hasEspnId3Heartbeats,u.hasNielsenWatermarks,u.hasPassThroughAds,u.commercialReplacement,u.startSessionUrl);o&&o.sourceVariant===vr.stitchedPreroll&&p&&(P=new Nr(p.url,Dr.none),P.variant=vr.stitchedPreroll);const k=l?mr.linearPlayback:mr.all,C=g&&g.trackingId||i,_=new Fr(i,n,r,m,P);if(_.authenticationTypes=c.map(e=>{switch(e){case"DIRECT":return Rr.direct;case"OPEN":return Rr.open;case"MVPD":return Rr.mvpd;case"ISP":return Rr.isp;default:return Rr.none}}),_.description=a,_.isSyndicatable=T,s&&s.url&&_.images.push(new Or(s.url)),_.mrss=y,b){const e="linear"===b.type?fr.linear:fr.event;_.network=new Mr(b.id,e,b.name,b.adobeResource)}return _.seekInSeconds=f,_.streamType=S,_.supportedMediaCommands=k,_.brand=_.brand?_.brand:"espn",_.tracking=Vr(_.brand,e,t,P),_.references={eventId:d,simulcastAiringId:v,trackingId:C,cerebroId:E},_.type=kr.video,_.entityType=t,_.apiSource=_r.graphQL,_.packages=(h||[]).map(e=>new Lr(e.name)),_}(c,e.entityType,i);if(e.resumeTime&&(u.seekInSeconds=e.resumeTime),!u.source.url){const e="OVER"===c.status.toUpperCase(),n=c.network&&c.network.type===fr.linear,a=c.network&&c.network.id;if(e&&n&&a)return jr.retryGetMediaItems(a,t,o,i);throw new Error("No playable url")}return u}catch(e){return Ur.warn("Failed to retrieve MediaItem from GraphQL: "+e),null}}))}static retryGetMediaItems(e,t,o,i){return Fa(this,void 0,void 0,(function*(){try{const n=Br.identifierStringForNetwork(e,_r.graphQL),a=new Br(n),r=yield jr.getPromiseMediaItems(a,t,o,i);if(r&&r instanceof Fr==!0)return r;throw new Error("Retry fetchMediaItems failed with "+e)}catch(e){return Ur.warn("MediaItem is over and retry failed: "+e),null}}))}}jr.defaultConfiguration=new zr(_r.graphQL);class Gr{constructor(){this.configuration_=Gr.defaultConfiguration}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Fa(this,void 0,void 0,(function*(){return yield Gr.fetchMediaItems(e,t,this.configuration)}))}static fetchMediaItems(e,t,o){return Fa(this,void 0,void 0,(function*(){const t=e.map(e=>new Br(e)),{serviceUrl:i}=o;return(yield Promise.all(t.map(e=>Gr.getPromiseMediaItem(e,i)))).filter(e=>!(e instanceof Error)&&e instanceof Fr)}))}static getPromiseMediaItem(e,t){return Fa(this,void 0,void 0,(function*(){const o=t.replace("videoID",e.id);try{const e=yield fetch(o),t=yield e.json();return function(e){const{id:t,title:o,description:i,duration:n,source:a,type:r,entityType:s,streamType:d,authenticationTypes:l,language:c,network:u,brand:p,images:h}=e,m=s,y=a.type,f=new Nr(a.url,y),g=new Fr(t,o,n,c,f);return g.authenticationTypes=l.map(e=>{switch(e){case"DIRECT":return Rr.direct;case"OPEN":return Rr.open;case"MVPD":return Rr.mvpd;case"ISP":return Rr.isp;default:return Rr.none}}),g.description=i,u&&(g.network=new Mr(u.id,u.type,u.name,u.resource)),g.streamType=d,g.brand=p,g.tracking=Vr(g.brand,e,m,f),g.images=h,g.type=r,g.entityType=m,g.apiSource=_r.cfa,g}(t)}catch(e){return Ur.warn("Failed to retrieve MediaItem from CFA: "+e),null}}))}}Gr.defaultConfiguration=new zr(_r.cfa);const Wr=Object.freeze({}),qr=Object.freeze({}),Hr=_r.itemFeed,Yr="abcn",Kr={lf:"longform",sf:"shortform",live:"longform"},$r={"abcn:fivethirtyeight":"fivethirtyeight",abcn:"abcnews"},Xr={name:"abc_news_live",type:"linear"},Qr=["HLS_ALL","PDL_MED","PDL_LOW"];function Zr(e){const t=(e||Wr).channel||Wr,o=t.item||Wr,i=o["media-group"]||Wr,n=i["media-content"]||qr,a=i["media-title"],r=(function(e){var t,o;const i=Qr.length,n=e.length;for(let a=0;a<i;a++){const i=Qr[a];for(let a=0;a<n;a++){const n=e[a];if((null===(o=null===(t=null==n?void 0:n["media-category"])||void 0===t?void 0:t["@attributes"])||void 0===o?void 0:o.label)===i)return n}}}(n)||Wr)["@attributes"]||Wr,s=(i["media-thumbnail"]||Wr)["@attributes"]||Wr,{guid:d,title:l,temporalType:c,timestamp:u,link:p}=o,{duration:h,url:m,medium:y}=r,f=(o.omniture||Wr).channel||"",[g=Yr]=String(f).split(":"),v=$r[f]||$r[g]||"abcnews",b="vod"===c,A="live"===c,E=Kr[o.videoContentType]||(b?"shortform":"longform"),T=a||l,S=t.language||"en";let w,P;try{[w,P]=new Date(u).toISOString().split("T")}catch(e){console.warn(e)}const k="akamai live stream"!==o.mediatype||b?{}:Object.assign(Object.assign({},Xr),{id:d}),C={id:d,apiSource:Hr,seasonNumber:"none",eventId:"none",episodeNumber:"none",genre:"news",tvrating:"none",network:k,show:{title:T},title:T,duration:h,language:S,source:{url:m,type:"none"},description:o.description||i["media-description"],authenticationTypes:["NONE"],mrss:null,seekInSeconds:null,brand:v,type:"video"===y?"video":"audio",entityType:E,streamType:A?"live":"onDemand",images:s?[{url:s.url}]:null,airDate:o.timestamp,availableDate:o.pubDate,references:{itemfeed:d},tracking:{omniture:o.omniture,nielsen:{type:"content",assetid:d,program:T,title:T},conviva:{assetName:l,duration:h,streamURL:m,custom:{contentId:d,assetType:b?"clip":"live",sport:"none",league:"none",appBrand:o.category||"abcnews"}},heartbeats:{ContentDuration:h,isFullEpisode:"shortform"===E||A?"n":"y",VideoType:c,CMSID:T,PublishDate:w,PublishTime:P}},webHref:p};return Fr.fromObject(C)}var Jr=new RegExp("%[a-f0-9]{2}","gi"),es=new RegExp("(%[a-f0-9]{2})+","gi");function ts(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var o=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],ts(o),ts(i))}function os(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(Jr),o=1;o<t.length;o++)t=(e=ts(t,o).join("")).match(Jr);return e}}var is=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},o=es.exec(e);o;){try{t[o[0]]=decodeURIComponent(o[0])}catch(e){var i=os(o[0]);i!==o[0]&&(t[o[0]]=i)}o=es.exec(e)}t["%C2"]="ï¿½";for(var n=Object.keys(t),a=0;a<n.length;a++){var r=n[a];e=e.replace(new RegExp(r,"g"),t[r])}return e}(e)}},ns=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const o=e.indexOf(t);return-1===o?[e]:[e.slice(0,o),e.slice(o+t.length)]},as=function(e,t){for(var o={},i=Object.keys(e),n=Array.isArray(t),a=0;a<i.length;a++){var r=i[a],s=e[r];(n?-1!==t.indexOf(r):t(r,s,e))&&(o[r]=s)}return o},rs=t((function(e,t){function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()):encodeURIComponent(e):e}function n(e,t){return t.decode?is(e):e}function a(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function r(e){const t=(e=a(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function s(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const i=function(e){let t;switch(e.arrayFormat){case"index":return(e,o,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=o):i[e]=o};case"bracket":return(e,o,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],o):i[e]=[o]:i[e]=o};case"comma":case"separator":return(t,o,i)=>{const a="string"==typeof o&&o.includes(e.arrayFormatSeparator),r="string"==typeof o&&!a&&n(o,e).includes(e.arrayFormatSeparator);o=r?n(o,e):o;const s=a||r?o.split(e.arrayFormatSeparator).map(t=>n(t,e)):null===o?o:n(o,e);i[t]=s};default:return(e,t,o)=>{void 0!==o[e]?o[e]=[].concat(o[e],t):o[e]=t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;for(const o of e.split("&")){if(""===o)continue;let[e,r]=ns(t.decode?o.replace(/\+/g," "):o,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:n(r,t),i(n(e,t),r,a)}for(const e of Object.keys(a)){const o=a[e];if("object"==typeof o&&null!==o)for(const e of Object.keys(o))o[e]=s(o[e],t);else a[e]=s(o,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce((e,t)=>{const o=a[t];return Boolean(o)&&"object"==typeof o&&!Array.isArray(o)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(o):e[t]=o,e},Object.create(null))}t.extract=r,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=o=>t.skipNull&&null==e[o]||t.skipEmptyString&&""===e[o],a=function(e){switch(e.arrayFormat){case"index":return t=>(o,n)=>{const a=o.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[i(t,e),"[",a,"]"].join("")]:[...o,[i(t,e),"[",i(a,e),"]=",i(n,e)].join("")]};case"bracket":return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[i(t,e),"[]"].join("")]:[...o,[i(t,e),"[]=",i(n,e)].join("")];case"comma":case"separator":return t=>(o,n)=>null==n||0===n.length?o:0===o.length?[[i(t,e),"=",i(n,e)].join("")]:[[o,i(n,e)].join(e.arrayFormatSeparator)];default:return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,i(t,e)]:[...o,[i(t,e),"=",i(n,e)].join("")]}}(t),r={};for(const t of Object.keys(e))n(t)||(r[t]=e[t]);const s=Object.keys(r);return!1!==t.sort&&s.sort(t.sort),s.map(o=>{const n=e[o];return void 0===n?"":null===n?i(o,t):Array.isArray(n)?n.reduce(a(o),[]).join("&"):i(o,t)+"="+i(n,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[o,i]=ns(e,"#");return Object.assign({url:o.split("?")[0]||"",query:d(r(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:n(i,t)}:{})},t.stringifyUrl=(e,o)=>{o=Object.assign({encode:!0,strict:!0},o);const n=a(e.url).split("?")[0]||"",r=t.extract(e.url),s=t.parse(r,{sort:!1}),d=Object.assign(s,e.query);let l=t.stringify(d,o);l&&(l="?"+l);let c=function(e){let t="";const o=e.indexOf("#");return-1!==o&&(t=e.slice(o)),t}(e.url);return e.fragmentIdentifier&&(c="#"+i(e.fragmentIdentifier,o)),`${n}${l}${c}`},t.pick=(e,o,i)=>{i=Object.assign({parseFragmentIdentifier:!0},i);const{url:n,query:a,fragmentIdentifier:r}=t.parseUrl(e,i);return t.stringifyUrl({url:n,query:as(a,o),fragmentIdentifier:r},i)},t.exclude=(e,o,i)=>{const n=Array.isArray(o)?e=>!o.includes(e):(e,t)=>!o(e,t);return t.pick(e,n,i)}}));rs.extract,rs.parse,rs.stringify,rs.parseUrl,rs.stringifyUrl,rs.pick,rs.exclude;class ss{constructor(){this.configuration_=ss.defaultConfiguration}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Fa(this,void 0,void 0,(function*(){return yield ss.fetchMediaItems(e,t,this.configuration)}))}static fetchMediaItems(e,t,o){return Fa(this,void 0,void 0,(function*(){const t=e.map(e=>new Br(e)),{serviceUrl:i}=o;return(yield Promise.all(t.map(e=>ss.getPromiseMediaItem(e,i)))).filter(e=>!(e instanceof Error)&&e instanceof Fr)}))}static getPromiseMediaItem(e,t){return Fa(this,void 0,void 0,(function*(){const o=rs.stringify({id:e.id||e.channel});try{const e=yield fetch(`${t}?${o}&requester=guardians`),i=yield e.json();return Zr(i)}catch(e){return Ur.warn("Failed to retrieve MediaItem from ItemFeed endpoint: "+e),null}}))}}ss.defaultConfiguration=new zr(_r.itemFeed);class ds{get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}getMediaItems(e,t){return Fa(this,void 0,void 0,(function*(){const o=t||{sourceVariant:null};return yield Promise.all(e.map(e=>Fa(this,void 0,void 0,(function*(){let t,i;t=e.match("natgeo")?Gr:e.match("abcnews")?ss:jr;const n=new t;n.configuration=this.configuration||n.configuration;try{const t=yield n.getMediaItems([e],o);i=null==t?void 0:t[0]}catch(e){}return i}))))}))}}var ls=new class extends pr{constructor(){super(),this.player_=null,this.session_=null,this.adapterConfigs_={},this.stats={instantiatedTimeStamp:void 0,loadedTimeStamp:void 0,startedTimeStamp:void 0,finishedTimeStamp:void 0}}setAdapterConfig(e){this.adapterConfigs_=e||{}}setPlayer(e){this.player_=e}setPlaybackSession(e){this.session_=e?{playbackUrl:e.playbackUrl,playbackConfig:e.playbackConfig}:null}playerBundleEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlayerBundleEvent",trail:e.breadcrumbs,...e.additionalData},t)}playbackAuthenticationFlowEvent(e,t){if(!this.enabled_)return;let{authN:o}=e;o||(o=this.adapterConfigs_.authorizationPayload),this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlaybackAuthenticationFlow","authentication.type":o?o.authenticationType:void 0,"authentication.provider":o&&o.authenticatedProvider?o.authenticatedProvider.id:void 0,trail:e.breadcrumbs,...e.additionalData},t)}mediaItemFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"MediaItemFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),trail:e.breadcrumbs,...e.additionalData},t)}playbackAccessFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlaybackAccessFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),...this.playbackAccessFlowEventSpecific_(e.payloadOrBAM),trail:e.breadcrumbs,...e.additionalData},t)}playbackSessionFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"PlaybackSessionFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),...this.playbackAccessFlowEventSpecific_(e.payloadOrBAM),...this.playbackSessionFlowEventSpecific_(e.session),trail:e.breadcrumbs,...e.additionalData},t)}mediaPlayerFlowEvent(e,t){this.enabled_&&this.sendEvent({eventType:"webPlayerBundlePlayback",name:"MediaPlayerFlow",...this.mediaItemFlowEventSpecific_(e.mediaItem),...this.playbackAccessFlowEventSpecific_(e.payloadOrBAM),...this.playbackSessionFlowEventSpecific_(e.session),...this.mediaPlayerFlowEventSpecific_(),trail:e.breadcrumbs,...e.additionalData},t)}isErrorException(e){return e instanceof Ta}parseAndSendPlaybackSessionError(e,t){let o=t;if(!this.isErrorException(t)){const i=["missingMediaSourceType","notAuthorized"],n={concurrencyInitializationFailed:Sa[fa.CONCURRENCY_LIMIT_REACHED],missingMediaSourceType:Sa[fa.DAMAGED_MEDIA_DATA],notAuthorized:Sa[fa.NOT_ENTITLED],noAuthButler:Sa[fa.DAMAGED_MEDIA_DATA],noShieldFetchAPI:Sa[fa.DAMAGED_MEDIA_DATA],startSessionFetchFailed:Sa[fa.INVALID_MEDIA],entitlementFetchFailed:Sa[fa.INVALID_MEDIA],shieldFetchFailed:Sa[fa.INVALID_MEDIA]},a={[Dr.shield]:Pa.SHIELD,[Dr.startSession]:Pa.SHIELD,[Dr.none]:Pa.SHIELD,[Dr.entitlement]:Pa.ENTITLEMENT};let r=this.getErrorReason()||"",s=wa.PLAYBACK_ACCESS,d=Pa.PLAYBACK_ACCESS_MANAGER;const l=sr(i).call(i,r);l&&(s=wa.PLAYBACK_SESSION,d=Pa.SHIELD,e&&e.source&&e.source.type&&a[e.source.type]&&(d=a[e.source.type])),r=n[r]||Sa[fa.UNEXPECTED_ERROR],o=Na[r]({segment:ya.PLAYER_CORE,component:s,feature:d,errorCode:ka.PLAYER_UNKNOWN,message:"playback session failed",cause:t}),l?this.playbackAccessFlowEvent({},o):this.playbackSessionFlowEvent({},o)}}generatePlayerBundleUnexpectedError(e,t,o){return Na.unexpectedError({segment:ya.PLAYER_CORE,component:wa.MEDIA_PLAYER,feature:Pa.PLAYER_ADAPTER_BUNDLE,errorCode:e,message:t,cause:o})}generatePluginBundleUnexpectedError(e,t,o,i=ha.FAILURE){return Na.unexpectedError({segment:ya.PLAYER_CORE,component:wa.PLAYER_PLUGIN,feature:Pa.PLAYER_ADAPTER_BUNDLE,severity:i,errorCode:e,message:t,cause:o})}generatePlayerPluginConcurrenceLimit(e,t){return Na.concurrencyLimitReached({segment:ya.PLAYER_CORE,component:wa.PLAYER_PLUGIN,feature:Pa.CONCURRENCY_MONITORING,errorCode:ka.CONCURRENCY_LIMIT_REACHED,message:e,cause:t})}generatePlayerSessionShieldDRMRequired(e,t,o){return Na.concurrencyLimitReached({segment:ya.PLAYER_CORE,component:wa.PLAYBACK_SESSION,feature:Pa.SHIELD,errorCode:e||ka.SHIELD_DRM_REQUIRED,message:t,cause:o})}generateMediaItemTemporarilyUnavailable(e,t,o,i){return Na.unexpectedError({segment:ya.PLAYER_CORE,component:wa.MEDIA_ITEM,feature:Na.defineMediaItemFeatureByIdentifier(e||""),errorCode:t||Na.defineMediaItemErrorCodesByIdentifier(e||""),message:o,cause:i})}generateMediaItemInvalid(e,t,o,i){return Na.invalidMedia({segment:ya.PLAYER_CORE,component:wa.MEDIA_ITEM,feature:Na.defineMediaItemFeatureByIdentifier(e||""),errorCode:t,message:o,cause:i})}generatePlayerDRMLicenseFailed(e,t){return Na.playreadyLicenseFailed({segment:ya.PLAYER_CORE,component:wa.MEDIA_PLAYER,feature:Pa.DIGITAL_RIGHTS_MANAGEMENT,errorCode:ka.PLAYREADY_LICENSE_FAILED,severity:ha.WARNING,cause:t,message:e})}generatePluginEndCardFailed(e,t,o){return Na.unexpectedError({segment:ya.PLAYER_UI,component:wa.PLAYER_PLUGIN,feature:Pa.END_CARD_UI,errorCode:e,cause:o,message:t})}mediaPlayerFlowEventSpecific_(){const{player_:e}=this;return e?{"player.dateInstantiated":this.stats.instantiatedTimeStamp?new Date(this.stats.instantiatedTimeStamp).toUTCString():void 0,"player.dateLoaded":this.stats.loadedTimeStamp?new Date(this.stats.loadedTimeStamp).toUTCString():void 0,"player.dateStarted":"playTimestamp"in e?new Date(e.playTimestamp).toUTCString():void 0,"player.dateFinished":this.stats.finishedTimeStamp?new Date(this.stats.finishedTimeStamp).toUTCString():void 0,"player.progress":e.currentTime()}:{}}playbackSessionFlowEventSpecific_(e){let t=e;return t||(t=this.session_),t?{"session.playbackUrl":t.playbackUrl,"session.contentType":t.playbackConfig?t.playbackConfig.contentType:void 0,"session.keySystem":t.playbackConfig?t.playbackConfig.keySystem:void 0,"session.licenseUrl":t.playbackConfig?t.playbackConfig.licenseUrl:void 0,...this.getPlayerInfo()}:{}}mediaItemFlowEventSpecific_(e){let t=e;return!t&&this.player_&&(t=this.player_.mediaItem),t?{playbackIdentifier:this.adapterConfigs_.identifier,"mediaItem.id":"id"in t?t.id:void 0,"mediaItem.authenticationTypes":"authenticationTypes"in t?t.authenticationTypes:void 0,"mediaItem.source.type":t.source&&"type"in t.source?t.source.type:void 0,"mediaItem.source.url":t.source&&"url"in t.source?t.source.url:void 0,"mediaItem.streamType":"streamType"in t?t.streamType:void 0,"mediaItem.duration":"duration"in t?t.duration:void 0,"mediaItem.brand":"brand"in t?t.brand:void 0,"mediaItem.apiSource":"apiSource"in t?t.apiSource:void 0,"mediaItem.entityType":"entityType"in t?t.entityType:void 0}:{}}playbackAccessFlowEventSpecific_(e){let t=e;return t||(t=this.adapterConfigs_.authorizationPayload),t?{"payload.authenticationType":t?t.authenticationType:void 0,"payload.authenticatedIdentity":t?t.authenticatedIdentity:void 0,"payload.authenticatedProvider":t&&t.authenticatedProvider?t.authenticatedProvider.id:void 0,"payload.token":t&&t.customData?t.customData.token:void 0,"payload.tokenType":t&&t.customData?t.customData.tokenType:void 0,"payload.resource":t&&t.customData?t.customData.resource:void 0}:{}}getPlayerInfo(){const e=this.player_;if(!e)return{};const{vhs:t,dash:o}=e;if(t)return this.getPlayerInfoFromVHS_(t);if(o){const{shakaPlayer:e}=o;if(e)return this.getPlayerInfoFromShaka_(e)}return{}}getPlayerInfoFromVHS_(e={}){const{stats:{bandwidth:t,buffered:o,currentSource:{src:i}={},currentTime:n,mediaRequestsErrored:a,playerDimensions:{height:r,width:s}={},mediaSecondsLoaded:d,videoPlaybackQuality:{corruptedVideoFrames:l}={}}={}}=e;return{currentSource:i,bandwidth:t,buffered:o?o.length:void 0,currentTime:n,mediaRequestsErrored:a,mediaSecondsLoaded:d,corruptedVideoFrames:l,playerHeight:r,playerWidth:s,mediaType:"VHS"}}getPlayerInfoFromShaka_(e){if(!e)return{};const t="function"==typeof e.getStats?e.getStats():{},o="function"==typeof e.getBufferedInfo?e.getBufferedInfo():{};return{currentSource:"function"==typeof e.getAssetUri?e.getAssetUri():void 0,bandwidth:t.streamBandwidth,buffered:o?o.total:void 0,currentTime:t.playTime,corruptedVideoFrames:t.corruptedFrames,playerHeight:t.height,playerWidth:t.width,loadLatency:t.loadLatency,mediaType:"Dash"}}},cs=Array.isArray||function(e){return"Array"==C(e)},us=ge("species"),ps=a.Array,hs=function(e,t){return new(function(e){var t;return cs(e)&&(t=e.constructor,(yi(t)&&(t===ps||cs(t.prototype))||O(t)&&null===(t=t[us]))&&(t=void 0)),void 0===t?ps:t}(e))(0===t?0:t)},ms=f([].push),ys=function(e){var t=1==e,o=2==e,i=3==e,n=4==e,a=6==e,r=7==e,s=5==e||a;return function(d,l,c,u){for(var p,h,m=re(d),y=R(m),f=Fe(l,c),g=pt(y),v=0,b=u||hs,A=t?b(d,g):o||r?b(d,0):void 0;g>v;v++)if((s||v in y)&&(h=f(p=y[v],v,m),e))if(t)A[v]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return v;case 2:ms(A,p)}else switch(e){case 4:return!1;case 7:ms(A,p)}return a?-1:i||n?n:A}},fs={forEach:ys(0),map:ys(1),filter:ys(2),some:ys(3),every:ys(4),find:ys(5),findIndex:ys(6),filterReject:ys(7)},gs=ge("species"),vs=function(e){return q>=51||!r((function(){var t=[];return(t.constructor={})[gs]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},bs=fs.map,As=vs("map");Ke({target:"Array",proto:!0,forced:!As},{map:function(e){return bs(this,e,arguments.length>1?arguments[1]:void 0)}});var Es=Xa("Array").map,Ts=Array.prototype,Ss=function(e){var t=e.map;return e===Ts||U(Ts,e)&&t===Ts.map?Es:t};const ws={url:e=>new ga((t,o)=>{const i=document.createElement("script");i.type="text/javascript",i.src=e,i.addEventListener("load",()=>t(i),!1),i.addEventListener("error",()=>o(i),!1),document.body.appendChild(i)}),urls:e=>ga.allSettled(Ss(e).call(e,ws.url))};var Ps=a.Function,ks=f([].concat),Cs=f([].join),_s={},Is=function(e,t,o){if(!de(_s,t)){for(var i=[],n=0;n<t;n++)i[n]="a["+n+"]";_s[t]=Ps("C,a","return new C("+Cs(i,",")+")")}return _s[t](e,o)},Rs=s?Ps.bind:function(e){var t=J(this),o=t.prototype,i=bi(arguments,1),n=function(){var o=ks(i,bi(arguments));return this instanceof n?Is(t,o.length,o):t.apply(e,o)};return O(o)&&(n.prototype=o),n};Ke({target:"Function",proto:!0,forced:Function.bind!==Rs},{bind:Rs});var Ds=Xa("Function").bind,Ns=Function.prototype,Ms=function(e){var t=e.bind;return e===Ns||U(Ns,e)&&t===Ns.bind?Ds:t};Ke({target:"Array",stat:!0},{isArray:cs});var Os=L.Array.isArray,Ls=function(e,t,o){var i=Ee(t);i in e?We.f(e,i,w(0,o)):e[i]=o},Fs=a.Array,Bs=Math.max,Us=function(e,t,o){for(var i=pt(e),n=ct(t,i),a=ct(void 0===o?i:o,i),r=Fs(Bs(a-n,0)),s=0;n<a;n++,s++)Ls(r,s,e[n]);return r.length=s,r},Vs=Math.floor,xs=function(e,t){var o=e.length,i=Vs(o/2);return o<8?zs(e,t):js(e,xs(Us(e,0,i),t),xs(Us(e,i),t),t)},zs=function(e,t){for(var o,i,n=e.length,a=1;a<n;){for(i=a,o=e[a];i&&t(e[i-1],o)>0;)e[i]=e[--i];i!==a++&&(e[i]=o)}return e},js=function(e,t,o,i){for(var n=t.length,a=o.length,r=0,s=0;r<n||s<a;)e[r+s]=r<n&&s<a?i(t[r],o[s])<=0?t[r++]:o[s++]:r<n?t[r++]:o[s++];return e},Gs=xs,Ws=function(e,t){var o=[][e];return!!o&&r((function(){o.call(null,t||function(){return 1},1)}))},qs=V.match(/firefox\/(\d+)/i),Hs=!!qs&&+qs[1],Ys=/MSIE|Trident/.test(V),Ks=V.match(/AppleWebKit\/(\d+)\./),$s=!!Ks&&+Ks[1],Xs=[],Qs=f(Xs.sort),Zs=f(Xs.push),Js=r((function(){Xs.sort(void 0)})),ed=r((function(){Xs.sort(null)})),td=Ws("sort"),od=!r((function(){if(q)return q<70;if(!(Hs&&Hs>3)){if(Ys)return!0;if($s)return $s<603;var e,t,o,i,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(i=0;i<47;i++)Xs.push({k:t+i,v:o})}for(Xs.sort((function(e,t){return t.v-e.v})),i=0;i<Xs.length;i++)t=Xs[i].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));Ke({target:"Array",proto:!0,forced:Js||!ed||!td||!od},{sort:function(e){void 0!==e&&J(e);var t=re(this);if(od)return void 0===e?Qs(t):Qs(t,e);var o,i,n=[],a=pt(t);for(i=0;i<a;i++)i in t&&Zs(n,t[i]);for(Gs(n,function(e){return function(t,o){return void 0===o?-1:void 0===t?1:void 0!==e?+e(t,o)||0:ao(t)>ao(o)?1:-1}}(e)),o=n.length,i=0;i<o;)t[i]=n[i++];for(;i<a;)delete t[i++];return t}});var id=Xa("Array").sort,nd=Array.prototype,ad=function(e){var t=e.sort;return e===nd||U(nd,e)&&t===nd.sort?id:t},rd="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",sd=f("".replace),dd="["+rd+"]",ld=RegExp("^"+dd+dd+"*"),cd=RegExp(dd+dd+"*$"),ud=function(e){return function(t){var o=ao(N(t));return 1&e&&(o=sd(o,ld,"")),2&e&&(o=sd(o,cd,"")),o}},pd={start:ud(1),end:ud(2),trim:ud(3)},hd=pd.trim,md=f("".charAt),yd=a.parseFloat,fd=a.Symbol,gd=fd&&fd.iterator,vd=1/yd(rd+"-0")!=-1/0||gd&&!r((function(){yd(Object(gd))}))?function(e){var t=hd(ao(e)),o=yd(t);return 0===o&&"-"==md(t,0)?-0:o}:yd;Ke({global:!0,forced:parseFloat!=vd},{parseFloat:vd});var bd=L.parseFloat,Ad=/MSIE .\./.test(V),Ed=a.Function,Td=function(e){return Ad?function(t,o){var i=Ei(arguments.length,1)>2,n=g(t)?t:Ed(t),a=i?bi(arguments,2):void 0;return e(i?function(){u(n,this,a)}:n,o)}:e},Sd={setTimeout:Td(a.setTimeout),setInterval:Td(a.setInterval)},wd=Sd.setInterval;Ke({global:!0,bind:!0,forced:a.setInterval!==wd},{setInterval:wd});var Pd=Sd.setTimeout;Ke({global:!0,bind:!0,forced:a.setTimeout!==Pd},{setTimeout:Pd});var kd=L.setTimeout,Cd=a.Date,_d=f(Cd.prototype.getTime);Ke({target:"Date",stat:!0},{now:function(){return _d(new Cd)}});var Id=L.Date.now,Rd=mt.indexOf,Dd=f([].indexOf),Nd=!!Dd&&1/Dd([1],1,-0)<0,Md=Ws("indexOf");Ke({target:"Array",proto:!0,forced:Nd||!Md},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Nd?Dd(this,e,t)||0:Rd(this,e,t)}});var Od=Xa("Array").indexOf,Ld=Array.prototype,Fd=function(e){var t=e.indexOf;return e===Ld||U(Ld,e)&&t===Ld.indexOf?Od:t},Bd=fs.forEach,Ud=Ws("forEach")?[].forEach:function(e){return Bd(this,e,arguments.length>1?arguments[1]:void 0)};Ke({target:"Array",proto:!0,forced:[].forEach!=Ud},{forEach:Ud});var Vd=Xa("Array").forEach,xd=Array.prototype,zd={DOMTokenList:!0,NodeList:!0},jd=function(e){var t=e.forEach;return e===xd||U(xd,e)&&t===xd.forEach||de(zd,$t(e))?Vd:t};var Gd=vs("slice"),Wd=ge("species"),qd=a.Array,Hd=Math.max;Ke({target:"Array",proto:!0,forced:!Gd},{slice:function(e,t){var o,i,n,a=M(this),r=pt(a),s=ct(e,r),d=ct(void 0===t?r:t,r);if(cs(a)&&(o=a.constructor,(yi(o)&&(o===qd||cs(o.prototype))||O(o)&&null===(o=o[Wd]))&&(o=void 0),o===qd||void 0===o))return bi(a,s,d);for(i=new(void 0===o?qd:o)(Hd(d-s,0)),n=0;s<d;s++,n++)s in a&&Ls(i,n,a[s]);return i.length=n,i}});var Yd=Xa("Array").slice,Kd=Array.prototype,$d=function(e){var t=e.slice;return e===Kd||U(Kd,e)&&t===Kd.slice?Yd:t};const Xd=new class{constructor(e,t){this.serviceUrl=e,this.appVersion=t}}("https://prod.gatekeeper.us-abc.symphony.edgedatg.com/api/ws/pluto/v1/layout","1.0.0");class Qd{constructor(e=Xd){this.configuration_=e}getMediaItems(e,t){return Fa(this,void 0,void 0,(function*(){return Promise.all(e.map(e=>this.getMediaItem(e,t)))}))}getMediaItem(e,t){return Fa(this,void 0,void 0,(function*(){const o=this.getLayoutURLFromParams(Object.assign(Object.assign({},t),{identifier:e})),i=(yield this.getLayout(o)).modules.filter(e=>"videoplayer"==e.type)[0];if(!i)throw new Error("Layout is missing Video Player module");"live_player"===t.type&&(i.resource=i.resource.replace("{affiliate}",e));const n=yield this.getVideoPlayerModule(i.resource);return this.getMediaItemFromVideoPlayer(n)}))}getLayoutURLFromParams(e){if(!e.brand||!e.device||!e.type)throw new Error("Cannot create layout url, missing parameters");const t={brand:e.brand,device:e.device};if("vod_player"==e.type){if(!e.identifier)throw new Error("Cannot create layout url, missing video id");t.type="vod_player",t.video=e.identifier}"live_player"==e.type&&(t.type="live_player",t.authlevel="1",t.affiliate=e.identifier||"",e.channel&&(t.channel=e.channel),e.video&&(t.video=e.video));const o=Object.keys(t).map(e=>e+"="+(t[e]||"")).join("&"),i=-1===this.configuration_.serviceUrl.indexOf("?")?"?":"&";return`${this.configuration_.serviceUrl}${i}${o}`}getMediaItemFromVideoPlayer(e){return e.video?this.getMediaItemForVOD(e):e.channels?this.getMediaItemForChannel(e):void 0}getMediaItemForChannel(e){var t;if(0==e.channels.length)throw new Error("Live video player module has no channels");const o=e.channels[0],i=new Fr(o.id,o.title,0,"en",null);i.description=o.description,i.authenticationTypes="0"==o.accesslevel?[Rr.none]:[Rr.mvpd];const n=Ea(o.brand);return i.brand=n,i.mrss=this.getAdobeMRSS(i.id,i.title,Aa(n),o.tvrating),i.streamType=Ar.live,i.type=kr.video,i.apiSource=_r.pluto,i.availableDate=o.availdate,i.network=new Mr(o.aff,fr.linear,o.title,Aa(n)),i.images=null===(t=o.previews)||void 0===t?void 0:t.map(e=>new Or(e.value)),i}getMediaItemForVOD(e){const t=new Fr(e.video.id,e.video.title,e.video.duration,e.video.show.language,null);t.description=e.video.description,t.authenticationTypes="0"==e.video.accesslevel?[Rr.none]:[Rr.mvpd];const o=Ea(e.video.brand);return t.brand=o,t.mrss=this.getAdobeMRSS(t.id,t.title,Aa(o),e.video.rating.value),t.show=e.video.show,t.cues=e.video.cues,t.adTarget=e.video.adTarget,t.adUnitId=e.adUnitId,t.streamType=Ar.onDemand,t.type=kr.video,t.apiSource=_r.pluto,t.entityType="lf"==e.video.type?wr.longform:wr.shortform,t.seasonNumber=e.video.seasonnumber,t.episodeNumber=e.video.episodenumber,t.videoShowGenre=e.video.show.genre,t.tmsid=e.video.tmsid,t.availableDate=e.video.availableDate,t.airDate=e.video.displayAirtime,t.images=e.images.map(e=>new Or(e.value)),t}getLayout(e){return Fa(this,void 0,void 0,(function*(){const t={appversion:this.configuration_.appVersion};return fetch(e,{headers:t}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e)}))}getVideoPlayerModule(e){return Fa(this,void 0,void 0,(function*(){const t={appversion:this.configuration_.appVersion};return fetch(e,{headers:t}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e)}))}getAdobeMRSS(e,t,o,i){let n="urn:mpaa";i&&0!==i.length||(i="TV-Y"),0===i.indexOf("TV-")&&(n="urn:v-chip");const a=this.xmlSanitize(e),r=this.xmlSanitize(t);let s='<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel>';return s+="<title>"+this.xmlSanitize(o)+"</title>",s+="<item>",s+="<title><![CDATA["+r+"]]></title>",s+="<guid>"+a+"</guid>",s+='<media:rating scheme="'+this.xmlSanitize(n)+'">'+this.xmlSanitize(i)+"</media:rating>",s+="</item></channel></rss>",s}xmlSanitize(e){let t=e.replace("&","&amp;");return t=t.replace("<","&lt;"),t=t.replace(">","&gt;"),t=t.replace('"',"&quot;"),t=t.replace("'","&apos;"),t}}class Zd{constructor(e,t,o){this.contentType=e,this.keySystem=t,this.licenseUrl=o}}class Jd{constructor(e){this.playbackUrl=e,this.textTracks=[]}get convivaContentMetadata(){const e={accessType:null,mvpd:null};this.authenticationType&&(e.accessType=this.authenticationType&&this.authenticationType.toLowerCase()||"free",this.authenticatedProvider&&this.authenticationType===Rr.mvpd&&(e.mvpd=this.authenticatedProvider.id));const t=this.mediaItem&&this.mediaItem.tracking[Tr.conviva]||{},o={streamUrl:this.playbackUrl,custom:Object.assign(t.custom||{},e)};return Object.assign(t,o)}toString(){return`<PlaybackSession playbackUrl:${this.playbackUrl}, authenticationType:${this.authenticationType}, authenticatedProvider:${this.authenticatedProvider}>`}}var el;!function(e){e.none="none",e.fairPlay="fairplay",e.playReady="playready",e.widevine="widevine"}(el||(el={}));var tl,ol=el;!function(e){e.none="HLS",e.hlsFairplay="HLS_FAIRPLAY",e.dashPlayReady="DASH_PLAYREADY",e.dashWidevine="DASH_WIDEVINE"}(tl||(tl={}));var il=tl;class nl{initPlaybackSession(e,t,o){let i=e.source.url;if(e.source.variant===vr.stitchedPreroll){const e=t.dictionaryForBrightcove();Object.keys(e).forEach(t=>{i=function(e,t,o){const i=-1===o.indexOf("?")?"?":"&";return`${o+i+e}=${encodeURIComponent(t)}`}(t,e[t].toString(),i)})}Ur.debug(i,e);const n=new Jd(i);return n.mediaItem=e,n.seekToTime=e.seekInSeconds,n.authenticationType=o.authenticationType,n.authenticatedProvider=o.authenticatedProvider,n.authenticatedIdentity=o.authenticatedIdentity,Promise.resolve(n)}}var al=t((function(e,t){var o;e.exports=o=o||function(e,t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),i={},n=i.lib={},a=n.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,o=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var a=0;a<n;a++){var r=o[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=r<<24-(i+a)%4*8}else for(a=0;a<n;a+=4)t[i+a>>>2]=o[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,i=[],n=function(t){t=t;var o=987654321,i=4294967295;return function(){var n=((o=36969*(65535&o)+(o>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=n(4294967296*(o||e.random()));o=987654071*s(),i.push(4294967296*s()|0)}return new r.init(i,t)}}),s=i.enc={},d=s.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],n=0;n<o;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new r.init(o,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],n=0;n<o;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new r.init(o,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,i=o.words,n=o.sigBytes,a=this.blockSize,s=n/(4*a),d=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*d,n);if(d){for(var c=0;c<d;c+=a)this._doProcessBlock(i,c);var u=i.splice(0,d);o.sigBytes-=l}return new r.init(u,l)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new p.HMAC.init(e,o).finalize(t)}}});var p=i.algo={};return i}(Math)})),rl=t((function(e,t){var o,i,n;e.exports=(i=(o=n=al).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,i=this._map;e.clamp();for(var n=[],a=0;a<o;a+=3)for(var r=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<o;s++)n.push(i.charAt(r>>>6*(3-s)&63));var d=i.charAt(64);if(d)for(;n.length%4;)n.push(d);return n.join("")},parse:function(e){var t=e.length,o=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var a=0;a<o.length;a++)n[o.charCodeAt(a)]=a}var r=o.charAt(64);if(r){var s=e.indexOf(r);-1!==s&&(t=s)}return function(e,t,o){for(var n=[],a=0,r=0;r<t;r++)if(r%4){var s=o[e.charCodeAt(r-1)]<<r%4*2,d=o[e.charCodeAt(r)]>>>6-r%4*2;n[a>>>2]|=(s|d)<<24-a%4*8,a++}return i.create(n,a)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)})),sl=t((function(e,t){e.exports=al.enc.Utf8}));function dl(e){const t=e+":";return{Authorization:"Basic "+rl.stringify(sl.parse(t)),Accept:"application/json"}}const ll="live",cl="vod",ul="accountId",pl="applicationId",hl="applicationPlatform",ml="channel",yl="contentType",fl="contractType",gl="deviceModel",vl="hba",bl="mobileDevice",Al="programmerName",El="ship",Tl="region";class Sl{constructor(e,t,o,i,n){t&&o&&i&&(this.programmer=e,this.applicationId=t,this.identityProvider=encodeURIComponent(o),this.subject=encodeURIComponent(i),this.metadata=n||{},this.serviceUrl="https://streams.adobeprimetime.com/v2",this.requestHeaders=dl(t),this.heartbeatIntervalId=null,this.messages={})}static fetchMetadataKeys(e,t){return Fa(this,void 0,void 0,(function*(){const o=t+"/metadata",i={method:"GET",headers:dl(e)};try{const t=yield fetch(o,i);if(t){const o=yield t.json();return Sl.setLocalStorageByAppID(o,e),!0}return!1}catch(e){return console.log("fetchMetadataKeys error: "+e),!1}}))}static setLocalStorageByAppID(e,t){const o="AdobeCM.metadata."+t;localStorage.setItem(o,JSON.stringify(e))}get metadataKeys(){return this.getMetadataKeysFromLocalStorage_(this.applicationId)}getMetadataKeysFromLocalStorage_(e){const t="AdobeCM.metadata."+e;let o=[];try{o=JSON.parse(localStorage.getItem(t))||[]}catch(e){console.error("AdobeCM getMetadataKeys error: "+e)}return o}start(){return Fa(this,void 0,void 0,(function*(){const e=yield this.createSession();return e?(this.scheduleHeartbeat(),e):null}))}startWithSession(e){this.sessionId=e,this.scheduleHeartbeat()}stop(){this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=null),this.terminateSession()}createSession(e=[]){return Fa(this,void 0,void 0,(function*(){Ur.debug("AdobeConcurrencyMonitorV2.createSession");const t=`${this.serviceUrl}/sessions/${this.identityProvider}/${this.subject}`,o=Object.assign({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},this.requestHeaders);e.length>0&&(o["X-Terminate"]=e.join(","));const i=this.getMetadata(),n={method:"POST",headers:o,body:Object.keys(i).map(e=>`${e}=${encodeURIComponent(i[e])}`).join("&")};try{const e=yield this.fetchRequest(t,n,!0);if(!e)throw"fetchRequest failed";const{sessionId:o}=e;if(o)return this.sessionId=o,Ur.debug("AdobeConcurrencyMonitorV2.createSession sessionId:",o),o;const{status:i,json:a}=e;throw{status:i,json:a}}catch(e){return Ur.error("AdobeConcurrencyMonitorV2.createSession error: ",e),yield this.handleError(e,!1)}}))}heartbeat(){return Fa(this,void 0,void 0,(function*(){const{sessionId:e}=this;if(!e)return;Ur.debug("AdobeConcurrencyMonitorV2.heartbeat",e);const t=`${this.serviceUrl}/sessions/${this.identityProvider}/${this.subject}/${e}`,o={method:"POST",headers:this.requestHeaders};try{const e=yield this.fetchRequest(t,o,!1);if(!e)throw"fetchRequest failed";if(e.error){const{status:t,json:o}=e;throw{status:t,json:o}}this.scheduleHeartbeat()}catch(e){return Ur.error("AdobeConcurrencyMonitorV2.heartbeat error: ",e),this.handleError(e,!0)}}))}scheduleHeartbeat(){Ur.debug("AdobeConcurrencyMonitorV2.scheduleHeartbeat"),clearTimeout(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setTimeout(()=>{this.heartbeat()},45e3)}fetchRequest(e,t,o){return Fa(this,void 0,void 0,(function*(){try{const i=yield fetch(e,t),{status:n}=i;if(!(n>=200&&n<300)){return{status:n,json:yield i.clone().json().catch(()=>!!i.text()||null),error:!0}}let a;return o&&(a=i.headers.get("location").trim()),{sessionId:a,status:n,error:!1}}catch(e){if(console.error("AdobeCM fetchRequest: "+e),e&&409===e.status&&"function"==typeof e.json){return{status:409,json:yield e.json(),error:!0}}return e}}))}terminateSession(){return Fa(this,void 0,void 0,(function*(){const{sessionId:e}=this;if(e)try{const t=`${this.serviceUrl}/sessions/${this.identityProvider}/${this.subject}/${e}`,o=yield fetch(t,{method:"DELETE",headers:this.requestHeaders}),{status:i}=o;if(!(i>=200&&i<300))throw new Error(`Error - url: ${t}, status: ${i}`)}catch(e){console.error("AdobeCM TerminateSession "+e)}}))}handleError(e,t){Ur.debug("AdobeConcurrencyMonitorV2.handleError",e);const{status:o,json:i}=e;switch(o){case 400:return this.handleError400_(i);case 409:return this.handleError409_(i,t);case 410:return this.handleError410_(i,t)}}handleError400_(e){return Fa(this,void 0,void 0,(function*(){if(!!(e&&e.obligations||[]).find(e=>"logout"===e.action||"refresh"===e.action)){yield Sl.fetchMetadataKeys(this.applicationId,this.serviceUrl);const{metadata:e}=this;if(Object.keys(e).length>=this.metadataKeys.length)return this.start()}return null}))}handleError409_(e,t){try{const o=(e&&e.associatedAdvice||[]).find(e=>"rule-violation"===e.type);if(o){const{message:i}=o,n=this.messages[i]||i,a=new Error(n),r=!!(e.obligations||[]).find(e=>"logout"===e.action);if(Ur.debug("AdobeConcurrencyMonitorV2.handleError",409,a,r),!t)throw a;this.onError(a,r)}}catch(e){throw Ur.debug("AdobeConcurrencyMonitorV2.handleError409_: "+e),e}return null}handleError410_(e,t){if(!e)return this.start();try{const o=(e&&e.associatedAdvice||[]).find(e=>"remote-termination"===e.type);if(o){const{message:i}=o,n=this.messages[i]||i,a=new Error(n),r=!!e.obligations.find(e=>"logout"===e.action);if(Ur.debug("AdobeConcurrencyMonitorV2.handleError",410,a,r),!t)throw a;this.onError(a,r)}}catch(e){throw Ur.debug("AdobeConcurrencyMonitorV2.handleError410_: "+e),e}return null}getMetadata(){const{metadataKeys:e}=this;return e.reduce((e,t)=>(e[t]=this.metadata[t],e),{})}onError(e,t){Ur.debug("AdobeConcurrencyMonitor.onError"),Ur.debug("error: "+e),Ur.debug("shouldLogout: "+t)}}var wl=t((function(e,t){var o;e.exports=(o=al,function(e){var t=o,i=t.lib,n=i.WordArray,a=i.Hasher,r=t.algo,s=[],d=[];!function(){function t(t){for(var o=e.sqrt(t),i=2;i<=o;i++)if(!(t%i))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)t(i)&&(n<8&&(s[n]=o(e.pow(i,.5))),d[n]=o(e.pow(i,1/3)),n++),i++}();var l=[],c=r.SHA256=a.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,i=o[0],n=o[1],a=o[2],r=o[3],s=o[4],c=o[5],u=o[6],p=o[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var m=l[h-15],y=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,f=l[h-2],g=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;l[h]=y+l[h-7]+g+l[h-16]}var v=i&n^i&a^n&a,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),A=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+d[h]+l[h];p=u,u=c,c=s,s=r+A|0,r=a,a=n,n=i,i=A+(b+v)|0}o[0]=o[0]+i|0,o[1]=o[1]+n|0,o[2]=o[2]+a|0,o[3]=o[3]+r|0,o[4]=o[4]+s|0,o[5]=o[5]+c|0,o[6]=o[6]+u|0,o[7]=o[7]+p|0},_doFinalize:function(){var t=this._data,o=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return o[n>>>5]|=128<<24-n%32,o[14+(n+64>>>9<<4)]=e.floor(i/4294967296),o[15+(n+64>>>9<<4)]=i,t.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(c),t.HmacSHA256=a._createHmacHelper(c)}(Math),o.SHA256)}));class Pl{constructor(e,t,o={}){this.programmer=e,this.applicationId=t,this.metadata=o}withSession(e){const{authenticationType:t,authenticatedIdentity:o,authenticatedProvider:i,mediaItem:n}=e;if(t!==Rr.mvpd)return this;const a=o,r=i&&i.id;return this.metadata[ul]=a,this.metadata[ml]=n.network&&n.network.id,this.metadata[yl]=n.streamType===Ar.live?ll:cl,this.metadata[fl]="",this.metadata[vl]=!!e.authenticatedProvider&&e.authenticatedProvider.isHomeBasedAuth,this.subject=a,this.identityProvider=r,this}withLocationProvider(e){const t=e.getPublicIPAddress();return this.metadata[El]=t?wl("m!ck3ym0u$3"+t):null,this.metadata[Tl]=e.getRegion()?e.getRegion():null,this}withServiceUrl(e){return this.serviceUrl=e,this}withMessages(e){return this.messages=e,this}build(){if(!this.subject||!this.identityProvider)return null;const e=new Sl(this.programmer,this.applicationId,this.identityProvider,this.subject,this.metadata);return this.serviceUrl&&(e.serviceUrl=this.serviceUrl),this.messages&&(e.messages=this.messages||{}),e}}class kl{constructor(e,t){this.partner=e,this.platform=t}startSession(e,t,o,i,n,a){const{partner:r,platform:s}=this,d=["partner="+r,"platform="+s,"token="+encodeURIComponent(o),"tokenType="+i,"v=2.0.0","ttl=21600"];if(n){const e=rl.stringify(sl.parse(n));d.push("resource="+encodeURIComponent(e))}a&&Object.keys(a).forEach(e=>{d.push(`${e}=${encodeURIComponent(a[e])}`)});const l=/swid=*/g;d.some(e=>l.test(e))||d.push("swid="+encodeURIComponent(t));const c=d.join("&");return fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:c}).then(e=>e.json()).then(e=>{if(!e.session)throw new Error(e.message||`An unexpected error occurred. [${e.abbreviation}]`);return e}).catch(e=>{if(e.message)throw new Error(e.message);return e.json().then(e=>{throw new Error(e.message||`An unexpected error occurred. [${e.abbreviation}]`)})})}}class Cl{constructor(e){this.authButler=e}initPlaybackSession(e,t,o){let{url:i}=e.source;e.source.startSessionUrl&&e.source.type===Dr.shield&&(i=e.source.startSessionUrl);try{const e=window&&window.location.protocol;e&&"https:"===e&&(i=i.replace(/^http(s?):/,e))}catch(e){}const{customData:{token:n,tokenType:a,resource:r=e.mrss}}=o,s=t&&t.swid,{authButler:d}=this;if(!d)throw cr.setErrorReason("noAuthButler"),new Error("startSession support not configured");return d.startSession(i,s,n,a,r,t.dictionaryForStartSession()).then(t=>{cr.add(ir.T_FSS);const i=function(e,t){const{playbackUrl:o}=e,i=new Jd(o);return i.token=t,i}(t,n);return i.mediaItem=e,i.seekToTime=e.seekInSeconds,i.authenticationType=o.authenticationType,i.authenticatedProvider=o.authenticatedProvider,i.authenticatedIdentity=o.authenticatedIdentity,i}).catch(e=>{throw cr.add(ir.T_FSSF),cr.setErrorReason("startSessionFetchFailed"),e})}}class _l{initPlaybackSession(e,t,o){const i=new Jd(e.source.url);return i.mediaItem=e,i.seekToTime=e.seekInSeconds,i.authenticationType=null==o?void 0:o.authenticationType,i.authenticatedProvider=null==o?void 0:o.authenticatedProvider,i.authenticatedIdentity=null==o?void 0:o.authenticatedIdentity,Promise.resolve(i)}}const Il="ADOBEPASS",Rl="JWT",Dl="AUTHTOKEN",Nl=function(e){if(e instanceof Error)throw e;return e.json&&e.json().then(e=>{let t=e.message||`An unexpected error occurred. [${e.exception}]`;throw"com.espn.watch.api.AccessDeniedException"===e.exception&&(t="This content is not available for your package or region."),new Error(t)})};class Ml{constructor(e,t){this.drmSupport=il.none,this.palEnabled=!1,this.palMaxLength=3e3,this.serviceUrl="https://watch.auth.api.espn.com",this.apiKey=e,this.serviceUrl=t||"https://watch.auth.api.espn.com"}getAsset(e,t,o,i,n){const a=`${this.serviceUrl}/video/auth/media/${e}/asset`;return this.getAssetForUrl(a,t,o,i,n)}getAssetForUrl(e,t,o,i,n){const a=n||{},r={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"};let s=-1===e.indexOf("?")?"?":"&",d=`${e}${s}apikey=${this.apiKey}`;if(t)if(o===Il){if(a.adobeToken=t,i){const e=rl.stringify(sl.parse(i));a.adobeResource=e}}else o==Rl?r.Authorization="Bearer "+t:o==Dl?(s=-1===d.indexOf("?")?"?":"&",d=`${d}${s}authtoken=${t}`):a.token=t;a.drmSupport=this.drmSupport;const l=Object.keys(a).map(e=>`${e}=${encodeURIComponent(a[e])}`).join("&");return fetch(d,{method:"POST",headers:r,credentials:"include",body:l}).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>{if(!e.stream){const t=e.message||"An unexpected error occurred.";throw new Error(t)}return e}).catch(Nl)}}Ml.defaultServiceUrl="https://watch.auth.api.espn.com";class Ol{constructor(e){this.shieldAPI=e}initPlaybackSession(e,t,o){return Fa(this,void 0,void 0,(function*(){const{shieldAPI:i}=this;if(!i)throw cr.setErrorReason("noShieldFetchAPI"),new Error("shield support not configured");const{palEnabled:n,palMaxLength:a}=i,r=o.customData.token,s=o.customData.zipcode,{customData:{tokenType:d,resource:l=e.mrss}={}}=o;if(n&&null===t.palNonce)try{t.palNonce=yield Ya.getGooglePalNonce(t,a)}catch(e){console.warn(e)}const c=t.dictionaryForStartSession();s&&(c.zipcode=s);const u=e.source.url;try{const t=yield i.getAssetForUrl(u,r,d,l,c);cr.add(ir.T_FSH);const{stream:n,captions:a,streamInfo:s,gatekeeperToken:p}=t,h=new Jd(n);return h.mediaItem=e,h.seekToTime=e.seekInSeconds,h.authenticationType=o.authenticationType,h.authenticatedProvider=o.authenticatedProvider,h.authenticatedIdentity=o.authenticatedIdentity,h.token=p,h.playbackConfig=function(e){if(!e)return null;const{streamType:t,licenseAcquisitionUrl:o,certificateUrl:i}=e;switch(t){case"DASH_PLAYREADY":return new Zd("application/dash+xml",el.playReady,o);case"DASH_WIDEVINE":return new Zd("application/dash+xml",el.widevine,o);case"HLS_FAIRPLAY":return new Zd("application/x-mpegURL",el.fairPlay,i);case"HLS":return new Zd("application/x-mpegURL",el.none);default:return null}}(s),h.textTracks=function(e){if(!e)return[];const t={source:e};return e.endsWith(".vtt")&&(t.contentType="text/vtt"),[t]}(a),h}catch(e){throw cr.add(ir.T_FSHF),cr.setErrorReason("shieldFetchFailed"),e}}))}}class Ll{constructor(){this.partner=null,this.platform=null,this.apiKey=null,this.deviceId=null,this.authenticators={},this.authorizers={},this.playbackSessionFactories={},this.playbackSessionFactories[Dr.none]=new _l}getAuthenticator(e){return this.authenticators[e]}setAuthenticator(e,t){this.convertToArray(t).forEach(t=>{this.authenticators[t.toString()]=e})}getAuthorizer(e){return this.authorizers[e]}setAuthorizer(e,t){this.convertToArray(t).forEach(t=>{this.authorizers[t.toString()]=e})}getPlaybackSessionFactory(e){return this.playbackSessionFactories[e]}setPlaybackSessionFactory(e,t){this.playbackSessionFactories[t]=e}checkAuthentication(){const e=Object.keys(this.authenticators).map(e=>{const t=this.authenticators[e];return t.checkAuthentication().then(o=>(Ur.debug(e+" authenticator","isAuthenticated: "+o,"authenticatedProvider: "+t.authenticatedProvider),o)).catch(()=>!1)});return Promise.all(e).then(e=>e.every(e=>!0===e))}isAuthenticatedForMediaItem(e){if(e.authenticationTypes.length<1||-1!==e.authenticationTypes.indexOf(Rr.none))return!0;return e.authenticationTypes.map(e=>this.authenticators[e]).filter(e=>e).some(e=>e.isAuthenticated)}isAuthenticatedWithAuthType(e){const t=this.authenticators[e];return!!t&&t.isAuthenticated}authenticateWithAuthType(e,t){const o=this.authenticators[e];if(o)return o.authenticate(t)}checkAuthorization(e,t){if(cr.add(ir.CAZ),e.authenticationTypes&&e.authenticationTypes.length<1||-1!==e.authenticationTypes.indexOf(Rr.none)){cr.add(ir.CAN_T.replace("T",Rr.none)),cr.add(ir.CAZ_T.replace("T",Rr.none));const t=new Ma(e.id,e.title,e.images[0].url,e.source.url),o=new Oa(Rr.none,t,e.id,{}),i=new La(!0,o);return Promise.resolve(i)}const o=[Rr.open,Rr.mvpd,Rr.direct,Rr.isp].filter(t=>-1!==e.authenticationTypes.indexOf(t)),i=o.map(e=>this.authorizers[e]).filter(e=>e&&e.checkAuthorization);return Ur.debug("mediaItem.authTypes:",o),0===i.length?Promise.reject(new Error("no authorizer configured to support authTypes: "+e.authenticationTypes)):function e(t,o,i,n=[]){return i.shift().checkAuthorization(t,o).then(a=>{const{success:r}=a;return r?a:i.length<1?n.length>0?Promise.reject(null):a:e(t,o,i,n)}).catch(a=>{if(i.length>0)return a&&n.push(a),e(t,o,i,n);const r=n[0]||a;if(r)throw r})}(e,t,i)}initPlaybackSession(e,t){return!e.source.type&&e.authenticationTypes.length>0?(cr.setErrorReason("missingMediaSourceType"),Promise.reject(new Error("This event is not currently available."))):this.checkAuthorization(e,t).then(o=>{var i,n,a;Ur.debug("AuthenticationManager.initPlaybackSession.checkAuthorization result:",o.success);const{success:r,payload:s}=o;if(!r)throw cr.setErrorReason("notAuthorized"),new Error("Not authorized.");if(!(null===(i=null==e?void 0:e.source)||void 0===i?void 0:i.type))throw cr.setErrorReason("missingMediaSourceType"),new Error("Media Item source type is missing.");const d=this.playbackSessionFactories[null===(n=null==e?void 0:e.source)||void 0===n?void 0:n.type];if(!d)throw cr.setErrorReason("missingMediaSourceType"),new Error(`SessionFactory for source type '${null===(a=null==e?void 0:e.source)||void 0===a?void 0:a.type}' is missing.`);const l=new Ya;return l.authenticationProvider=o.payload.authenticatedProvider&&o.payload.authenticatedProvider.id,l.merge(t),cr.add(ir.MPS),d.initPlaybackSession(e,l,s).then(e=>{Ur.debug("AuthenticationManager.initPlaybackSession",e);const t=this.concurrencyMonitorBuilder&&this.concurrencyMonitorBuilder.withSession(e).build();return t?t.createSession().then(t=>(cr.add(ir.CM_I),e.concurrencyMonitorSessionId=t,e)).catch(e=>{throw cr.add(ir.CM_IF),cr.setErrorReason("concurrencyInitializationFailed"),e}):e})})}get authStates(){const e=this.authenticators[Rr.mvpd],t=[];return this.authenticators[Rr.isp].isAuthenticated&&t.push("isp"),!0===e.isAuthenticated?t.push("mvpd_login"):!0===e.wasPreviouslyAuthenticated&&t.push("mvpd_previous"),t}get preauthorizedResources(){return Object.keys(this.authenticators).map(e=>this.authenticators[e].preauthorizedResources).reduce((e,t)=>e.concat(t),[]).filter((e,t,o)=>o.indexOf(e)===t)}get primaryAuthenticatedProvider(){return[Rr.mvpd,Rr.isp].map(e=>this.getAuthenticator(e)).filter(e=>e.isAuthenticated).map(e=>e.authenticatedProvider)[0]}convertToArray(e){if(!e)return[];let t=[];return Array.isArray(e)?t=e:"string"==typeof e&&t.push(e),t}}Ll.AuthenticateOptionsKey={redirectUrl:"redirectUrl"};class Fl{constructor(){this.preauthorizedResources=[],this.isAuthenticated=!!this.authorizationPayload,this.authenticatedIdentity=this.authorizationPayload&&this.authorizationPayload.authenticatedIdentity,this.authenticatedProvider=this.authorizationPayload&&this.authorizationPayload.authenticatedProvider}checkAuthentication(){return Promise.resolve(this.isAuthenticated)}authenticate(){return this.checkAuthentication()}deauthenticate(){return this.authorizationPayload=null,Promise.resolve(!0)}checkAuthorization(e){const t=new La(!0,this.authorizationPayload);return cr.add(ir.CAN_T.replace("T",this.authorizationPayload.authenticationType)),cr.add(ir.CAZ_T.replace("T",this.authorizationPayload.authenticationType)),!e||0!=e.authenticationTypes.length&&-1===e.authenticationTypes.indexOf(Rr.none)?this.authorizationPayload&&this.mediaItem&&this.mediaItem.id===e.id&&-1!==e.authenticationTypes.indexOf(this.authorizationPayload.authenticationType)?Promise.resolve(t):Promise.resolve(new La(!1,this.authorizationPayload)):Promise.resolve(t)}}class Bl{constructor(e,t,o,i,n=!1){this.serviceUrl=e,this.appVersion=t,this.appName=o,this.deviceID=i,this.palEnabled=n}}const Ul=new Bl("https://prod.gatekeeper.us-abc.symphony.edgedatg.go.com/vp2/ws-secure/entitlement/2020/playmanifest_secure.json","1.0.0","","001");class Vl{constructor(e=Ul){this.configuration_=e}initPlaybackSession(e,t,o){var i;const n={brand:ba(Ea(e.brand)),device:this.configuration_.deviceID},a=this.videoTypeFromMedia_(e);if(n.app_name=this.configuration_.appName,n.video_type=a,n.video_id=e.id,"abc"===e.brand&&"live"==a&&(n.affiliate=e.network.id),o.authenticationType==Rr.mvpd){n.resource_id=e.mrss,n.adobe_requestor_id=(null==o?void 0:o.customData[Oa.CustomDataKey.requestor])||(null===(i=e.brand)||void 0===i?void 0:i.toUpperCase());const t=null==o?void 0:o.customData[Oa.CustomDataKey.tokenType];n.token_type="ADOBEPASS"==t?"ap":t,n.token=null==o?void 0:o.customData[Oa.CustomDataKey.token],n.zipcode=null==o?void 0:o.customData[Oa.CustomDataKey.zipcode],n.mvpd=(null==o?void 0:o.authenticatedProvider.id)||(null==o?void 0:o.customData[Oa.CustomDataKey.mvpd]),n.locale=e.locale}const r={appversion:this.configuration_.appVersion,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return this.requestPalNonce_(t).then(t=>{const i=this.getFormData_(n);t&&i.append("ad.paln",t);const a=String(n.token_type).indexOf("offsite")>-1?i.toString().replace(/%2B/g,"+"):i,s={method:"POST",headers:r,body:a};return fetch(this.configuration_.serviceUrl,s).then(e=>{if(!e.ok)throw cr.add(ir.T_FEF),cr.setErrorReason("entitlementFetchFailed"),e;return cr.add(ir.T_FE),e.json()}).then(t=>{const i=this.entitlementPlaybackSessionFromResponse_(t);return i.mediaItem=e,i.authenticationType=null==o?void 0:o.authenticationType,i.authenticatedProvider=null==o?void 0:o.authenticatedProvider,i.authenticatedIdentity=null==o?void 0:o.authenticatedIdentity,i})})}entitlementPlaybackSessionFromResponse_(e){var t,o,i,n,a,r,s,d,l;const c=(null===(i=null===(o=null===(t=e.video)||void 0===t?void 0:t.assets)||void 0===o?void 0:o.asset[0])||void 0===i?void 0:i.value)||(null===(s=null===(r=null===(a=null===(n=e.channels)||void 0===n?void 0:n.channel[0])||void 0===a?void 0:a.assets)||void 0===r?void 0:r.asset[0])||void 0===s?void 0:s.value),u=new Jd(c);let p;if(null===(d=e.entitlement)||void 0===d?void 0:d.drmData){const t=null===(l=e.entitlement)||void 0===l?void 0:l.drmData;switch(t.drmEncoding){case"WIDEVINE":p=new Zd("application/dash+xml",ol.widevine,t.licenseUrl);break;case"FAIRPLAY":p=new Zd("application/x-mpegURL",ol.fairPlay,t.licenseUrl);break;case"PLAY_READY":p=new Zd("application/dash+xml",ol.playReady,t.licenseUrl)}}else p=new Zd("application/x-mpegURL",ol.none,null);return u.playbackConfig=p,u}requestPalNonce_(e){return this.configuration_.palEnabled&&null===e.palNonce?Ya.getGooglePalNonce(e).catch(e=>(console.warn(e),null)):Promise.resolve(e.palNonce)}getFormData_(e){const t=new URLSearchParams;return Object.keys(e).forEach(o=>{null!=e[o]&&t.append(o,e[o])}),t}videoTypeFromMedia_(e){return e.streamType==Ar.live?"live":e.streamType==Ar.onDemand&&e.entityType==wr.shortform?"sf":e.streamType==Ar.onDemand&&e.entityType==wr.longform?"lf":void 0}}const xl={interval:6e4,watchProp:"id"},zl={[_r.cfa]:!0,[_r.pluto]:!0,[_r.graphQL]:!0,[_r.itemFeed]:!0},jl=_r.graphQL;class Gl{constructor(e,t,o){this.mediaItem=e,this.mediaItemDataSource=t,this.countryCode=o,this.configuration_=xl}get configuration(){return this.configuration_}set configuration(e){this.configuration_=e}start(){this.mediaItem.isLinear&&this.mediaItem.isLive&&(this.intervalId=setInterval(()=>{this.checkProgramChange()},this.configuration_.interval))}stop(){this.intervalId&&clearInterval(this.intervalId)}checkProgramChange(){if(!this.mediaItem||!this.mediaItemDataSource)return;const{countryCode:e,configuration_:{watchProp:t}}=this,{mediaItem:o,mediaItem:{network:i,apiSource:n,references:a={}}}=this,r=null==i?void 0:i.id;if(!r)return void Ur.warn("cannot monitor for program changes on network "+r);const s=n in zl?n:jl,d=Br.identifierStringForNetwork(r,s);this.mediaItemDataSource.getMediaItems([d],{countryCode:e}).then(e=>{var i;const n=Array.isArray(e)&&e[0];if(!n)return;o[t]!==n[t]&&(!(null==a?void 0:a.simulcastAiringId)||a.simulcastAiringId!==(null===(i=n.references)||void 0===i?void 0:i.simulcastAiringId))&&(this.mediaItem=n,this.onProgramChange(n))})}onProgramChange(e){}}var Wl,ql,Hl,Yl;!function(e){e.willStartPlaying="atv.player.willStartPlaying",e.didStopPlaying="atv.player.didStopPlaying",e.onTimedMetadataChanged="atv.player.onTimedMetadataChanged",e.playerStateChanged="atv.player.playerStateChanged",e.playerTimeDidChange="atv.player.playerTimeDidChange"}(Wl||(Wl={})),function(e){e.priv="PRIV",e.txxx="TXXX"}(ql||(ql={})),function(e){e.program="PROGRAM",e.commercial="COMMERCIAL",e.slate="SLATE"}(Hl||(Hl={})),function(e){e.start="start",e.playing="playing",e.pause="pause",e.seeking="seeking",e.stalled="stalled",e.stop="stop",e.timedMetadata="timedMetadata",e.currentTime="currentTime",e.loadedMetadata="loadedMetadata"}(Yl||(Yl={}));var Kl,$l=Yl;!function(e){e.opened="opened",e.playing="playing",e.ended="ended",e.timedMetadata="timedMetadata",e.error="error",e.timeUpdate="timeUpdate",e.stalled="stalled",e.paused="paused",e.seeking="seeking"}(Kl||(Kl={}));class Xl{constructor(e){this.eventHandlers=[],this.playerBundle=e}createHandlerForCallback(e){const t=t=>{let o=t&&t.currentTime;o||t||(o=this.playerBundle.currentTime()),e("number"==typeof o?o:t)};return this.eventHandlers.push([e,t]),t}getIndexOfHandlerForCallback(e){const{eventHandlers:t}=this,o=t.length;let i=-1;for(let n=0;n<o;n+=1){const[o]=t[n];if(o===e){i=n;break}}return i}on(e,t){const o=this.getMappedEventName_(e),i=this.createHandlerForCallback(t);this.playerBundle.coordinator.addEventListener(o,i)}off(e,t){const{eventHandlers:o}=this,i=this.getMappedEventName_(e),n=this.getIndexOfHandlerForCallback(t);if(n>-1){const[,e]=o[n];this.playerBundle.coordinator.removeEventListener(i,e),o.splice(n,1)}}