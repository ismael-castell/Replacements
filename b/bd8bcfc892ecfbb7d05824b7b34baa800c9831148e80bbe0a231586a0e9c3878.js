!function(FC){Array.prototype.forEach||(Array.prototype.forEach=function(callback,thisArg){var T,k;if(null==this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("function"!=typeof callback)throw new TypeError(callback+" is not a function");for(arguments.length>1&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(callback){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof callback)throw new TypeError(callback+" is not a function");var value,t=Object(this),len=t.length>>>0,k=0;if(arguments.length>=2)value=arguments[1];else{for(;k<len&&!k in t;)k++;if(k>=len)throw new TypeError("Reduce of empty array with no initial value");value=t[k++]}for(;k<len;k++)k in t&&(value=callback(value,t[k],k,t));return value}),Array.prototype.map||(Array.prototype.map=function(callback,thisArg){var T,A,k;if(null==this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("function"!=typeof callback)throw new TypeError(callback+" is not a function");for(arguments.length>1&&(T=thisArg),A=new Array(len),k=0;k<len;){var kValue,mappedValue;k in O&&(kValue=O[k],mappedValue=callback.call(T,kValue,k,O),A[k]=mappedValue),k++}return A}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(null==this)throw new TypeError('"this" is null or not defined');var O=Object(this),len=O.length>>>0;if(0===len)return-1;var n=+fromIndex||0;if(Math.abs(n)===1/0&&(n=0),n>=len)return-1;for(k=Math.max(n>=0?n:len-Math.abs(n),0);k<len;){if(k in O&&O[k]===searchElement)return k;k++}return-1}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(callback){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof callback)throw new TypeError(callback+" is not a function");var value,t=Object(this),len=t.length>>>0,k=0;if(arguments.length>=2)value=arguments[1];else{for(;k<len&&!k in t;)k++;if(k>=len)throw new TypeError("Reduce of empty array with no initial value");value=t[k++]}for(;k<len;k++)k in t&&(value=callback(value,t[k],k,t));return value})}();var FC=FC||{};"object"==typeof module&&module.exports&&(module.exports=FC),window.console||(console={log:function(){}}),function(FC){"use strict";function setCookie(currentdomain){var name=FC.settings.session_name,value=FC.settings.session_id,options={path:FC.settings.cookiepath?FC.settings.cookiepath:"/",domain:currentdomain};value=encodeURIComponent(value);var cookie=name+"="+value;for(var prop in options)cookie+="; "+prop+"="+options[prop];document.cookie=cookie,FC.util.log("Cookie set: "+cookie)}function getCookie(){for(var name=FC.settings.session_name+"=",cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){for(var c=cookies[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(name))return decodeURIComponent(c.substring(name.length,c.length))}return""}var session={};session.sessionExists=function(){return""!==getCookie()},session.initialize=function(){if(!this.initialized){if(FC.util.log("Initializing session"),!FC.settings.session_id){FC.util.log("No FC.settings.session_id found, setting one");var regex=new RegExp("#"+FC.settings.session_name+"=([A-Za-z0-9]*)");if(regex.test(window.location.href)){FC.util.log("Found session id in URL, setting FC.settings.session_id and the cookie");var match=regex.exec(window.location.href);FC.settings.session_id=match[1],this.set()}else this.sessionExists()?(FC.util.log("Found session id in the cookie, setting FC.settings.session_id"),FC.settings.session_id=getCookie()):FC.json&&FC.json.session_id&&(FC.util.log("Found session id in FC.json, setting FC.settings.session_id"),FC.settings.session_id=FC.json.session_id,this.set())}FC.settings.session_id?this.initialized=!0:FC.util.log("No session id found to set.")}},session.reset=function(session_id){return session_id?(FC.settings.session_id=session_id,this.set(),void 0!==FC.cart&&FC.cart.render(),FC.client.updateMiniCart()):FC.client.request("https://"+FC.settings.storedomain+"/cart?cart=view&empty=reset"),!1},session.get=function(){return this.initialize(),this.initialized?FC.settings.session_name+"="+FC.settings.session_id:""},session.set=function(){if(window.location.hostname==FC.settings.storedomain)return!1;var sitedomain=FC.settings.sitedomain.split(".");"www"==sitedomain[0]&&sitedomain.shift();for(var currentdomain=window.location.hostname.split(".");currentdomain.length>sitedomain.length;)currentdomain.shift();return".foxycart.com"!=(currentdomain="."+currentdomain.join("."))&&(setCookie(currentdomain),!0)},session.updateParams=function(params){return this.initialize(),this.initialized&&(params[FC.settings.session_name]=FC.settings.session_id),params},FC.session=session}(FC),function(FC,$){"use strict";function Evented(object){return object=$.extend(object,Evented.prototype),object.events={},object}function Event(type){this.type=type,this.handlers=[],this.defaultHandler=null}function addHandlerToPromise(promise,handler){return promise=promise.pipe(function(params,context){var returned,fn,deferred=$.Deferred();return handler.length<2?returned=handler.call(context,params):(params.async=!0,fn=function(success){!1===success?deferred.reject():deferred.resolve(params,context)},returned=handler.call(context,params,fn)),!1===returned?deferred.reject():!0!==returned&&fn||deferred.resolve(params,context),deferred.promise()})}FC.Evented=Evented,FC.Event=Event,Event.DONE_SUFFIX=".done",Evented.prototype.event=function(eventName){return this.events[eventName]instanceof Event||(this.events[eventName]=new Event(eventName)),this.events[eventName]},Evented.prototype.on=function(eventName,handler){return this.event(eventName).append(handler),this},Evented.prototype.off=function(eventName,handler){for(var event=this.event(eventName),handlers=event.handlers,i=handlers.length;i--;)handler===handlers[i]&&handlers.splice(i,1);return this},Evented.prototype.wrap=function(eventName,defaultHandler){var mainEvent=this.event(eventName),postEvent=this.event(eventName+Event.DONE_SUFFIX);return mainEvent.defaultHandler=defaultHandler,function(params){params=params||{};var returned=!1,context=this;return mainEvent.trigger(params,context).done(function(){returned=!0,postEvent.trigger(params,context)}).fail(function(){$.isFunction(params.onFail)&&params.onFail.call(context,params)}),returned}},Event.prototype.append=function(callback){this.handlers.push(callback)},Event.prototype.prepend=function(callback){this.handlers.unshift(callback)},Event.prototype.defer=function(promise){return $.each(this.handlers,function(i,handler){promise=addHandlerToPromise(promise,handler)}),$.isFunction(this.defaultHandler)&&(promise=addHandlerToPromise(promise,this.defaultHandler)),promise},Event.prototype.override=function(callback){var defaultHandler=this.defaultHandler;callback.length<2?this.defaultHandler=function(params){return params.super=defaultHandler,callback.call(this,params)}:this.defaultHandler=function(params,next){return params.super=defaultHandler,callback.call(this,params,next)}},Event.prototype.trigger=function(params,context){params=params||{};var deferred=$.Deferred(),promise=deferred.resolve(params,context);return this.defer(promise)}}(FC,jQuery),function(FC){var util={};util.money_format=function(format,number){if("number"!=typeof number)return null;var regex=/%((=.|[+^(!-])*?)(\d*?)(#(\d+))?(\.(\d+))?([in%])/g,monetary=FC.json.locale_info,doReplace=function(n0,flags,n2,width,n4,left,n6,right,conversion){var value="",repl="";if("%"===conversion)return"%";var fill=flags&&/=./.test(flags)?flags.match(/=(.)/)[1]:" ",showCurrSymbol=!flags||-1===flags.indexOf("!");width=parseInt(width,10)||0;var neg=number<0;neg&&(number=-number),right=""===right||void 0===right?"i"===conversion?monetary.int_frac_digits:monetary.frac_digits:parseInt(right,10),number=util.round(number,right),number=number.toFixed(right);var decpos=number.indexOf("."),integer=-1!==decpos?number.slice(0,decpos):number,fraction=-1!==decpos?number.slice(decpos+1):"",_str_splice=function(integerStr,idx,thous_sep){var integerArr=integerStr.split("");return integerArr.splice(idx,0,thous_sep),integerArr.join("")},init_lgth=integer.length;left=parseInt(left,10);var filler=init_lgth<left;if(filler){var fillnum=left-init_lgth;integer=new Array(fillnum+1).join(fill)+integer}if(-1===flags.indexOf("^")){var thous_sep=monetary.mon_thousands_sep,mon_grouping=monetary.mon_grouping;if(mon_grouping[0]<integer.length)for(var i=0,idx=integer.length;i<mon_grouping.length&&!((idx-=mon_grouping[i])<=0);i++)filler&&idx<fillnum&&(thous_sep=fill),integer=_str_splice(integer,idx,thous_sep);if(mon_grouping[i-1]>0)for(;idx>mon_grouping[i-1];)idx-=mon_grouping[i-1],filler&&idx<fillnum&&(thous_sep=fill),integer=_str_splice(integer,idx,thous_sep)}value=fraction?integer+monetary.mon_decimal_point+fraction:integer;var symbol="";showCurrSymbol&&(symbol="i"===conversion?monetary.int_curr_symbol:monetary.currency_symbol);var sign_posn=neg?monetary.n_sign_posn:monetary.p_sign_posn,sep_by_space=neg?monetary.n_sep_by_space:monetary.p_sep_by_space,cs_precedes=neg?monetary.n_cs_precedes:monetary.p_cs_precedes;if(-1!==flags.indexOf("("))repl=(cs_precedes?symbol+(1===sep_by_space?" ":""):"")+value+(cs_precedes?"":(1===sep_by_space?" ":"")+symbol),repl=neg?"("+repl+")":" "+repl+" ";else{var pos_sign=monetary.positive_sign,neg_sign=monetary.negative_sign,sign=neg?neg_sign:pos_sign,otherSign=neg?pos_sign:neg_sign,signPadding="";sign_posn&&(signPadding=new Array(otherSign.length-sign.length+1).join(" "));var valueAndCS="";switch(sign_posn){case 0:valueAndCS=cs_precedes?symbol+(1===sep_by_space?" ":"")+value:value+(1===sep_by_space?" ":"")+symbol,repl="("+valueAndCS+")";break;case 1:valueAndCS=cs_precedes?symbol+(1===sep_by_space?" ":"")+value:value+(1===sep_by_space?" ":"")+symbol,repl=signPadding+sign+(2===sep_by_space?" ":"")+valueAndCS;break;case 2:valueAndCS=cs_precedes?symbol+(1===sep_by_space?" ":"")+value:value+(1===sep_by_space?" ":"")+symbol,repl=valueAndCS+(2===sep_by_space?" ":"")+sign+signPadding;break;case 3:repl=cs_precedes?signPadding+sign+(2===sep_by_space?" ":"")+symbol+(1===sep_by_space?" ":"")+value:value+(1===sep_by_space?" ":"")+sign+signPadding+(2===sep_by_space?" ":"")+symbol;break;case 4:repl=cs_precedes?symbol+(2===sep_by_space?" ":"")+signPadding+sign+(1===sep_by_space?" ":"")+value:value+(1===sep_by_space?" ":"")+symbol+(2===sep_by_space?" ":"")+sign+signPadding}}var padding=width-repl.length;return padding>0&&(padding=new Array(padding+1).join(" "),-1!==flags.indexOf("-")?repl+=padding:repl=padding+repl),repl};return format.replace(regex,doReplace)},util.round=function(number,precision){var mul_div=Math.pow(10,precision),increment=1/(10*mul_div);return number*(10*mul_div)%10>=5&&(number+=increment),Math.round(number*mul_div)/mul_div},util.str_pad=function(input,pad_length,pad_string,pad_type){var pad_to_go,half="",str_pad_repeater=function(s,len){for(var collect="";collect.length<len;)collect+=s;return collect=collect.substr(0,len)};return input+="",pad_string=void 0!==pad_string?pad_string:" ","STR_PAD_LEFT"!==pad_type&&"STR_PAD_RIGHT"!==pad_type&&"STR_PAD_BOTH"!==pad_type&&(pad_type="STR_PAD_RIGHT"),(pad_to_go=pad_length-input.length)>0&&("STR_PAD_LEFT"===pad_type?input=str_pad_repeater(pad_string,pad_to_go)+input:"STR_PAD_RIGHT"===pad_type?input+=str_pad_repeater(pad_string,pad_to_go):"STR_PAD_BOTH"===pad_type&&(half=str_pad_repeater(pad_string,Math.ceil(pad_to_go/2)),input=half+input+half,input=input.substr(0,pad_length))),input},util.unserialize=function(Data){var Data=Data.split("&"),Serialized={};return jQuery.each(Data,function(){var Properties=this.split("=");Serialized[Properties[0]]=Properties[1]}),Serialized},util.addError=function(context,message){(void 0===FC.validator||FC.validator.ready_to_validate)&&(context||message)&&(util.hasError(context,message)||FC.json.messages.errors.push({context:context,message:message}),util.log("addError for",context))},util.addWarning=function(context,message){(context||message)&&(util.hasWarning(context,message)||FC.json.messages.warnings.push({context:context,message:message}),util.log("addError for",context))},util.removeWarning=function(context){for(var warnings=Array(),i=0;i<FC.json.messages.warnings.length;i++)FC.json.messages.warnings[i].context!=context&&warnings.push(FC.json.messages.warnings[i]);FC.json.messages.warnings=warnings},util.removeError=function(context){for(var errors=Array(),i=0;i<FC.json.messages.errors.length;i++)FC.json.messages.errors[i].context!=context&&errors.push(FC.json.messages.errors[i]);FC.json.messages.errors=errors,util.log("removeError for",context)},util.hasError=function(context,message){var found=!1,check_message=void 0!==message;return FC.json.messages.errors.forEach(function(error){error.context!==context||check_message&&error.message!==message||(found=!0)}),found},util.hasWarning=function(context,message){var found=!1,check_message=void 0!==message;return FC.json.messages.warnings.forEach(function(warning){warning.context!==context||check_message&&warning.message!==message||(found=!0)}),found},util.notifyErrors=function(){var $notifier=$("[data-fc-error-notifier]"),$textEl=$notifier.find("[data-fc-notifier-text]"),messagesWithContext=function(){var count=0;return FC.json.messages.errors.forEach(function(error){""!==error.context&&(count+=1)}),count};if($notifier.length)if(messagesWithContext()>0){var message="";if(message=1===FC.json.messages.errors.length?FC.json.messages.errors.length+" "+FC.json.config.lang.checkout_required_piece_missing:FC.json.messages.errors.length+" "+FC.json.config.lang.checkout_required_pieces_missing,$textEl.length)$textEl.text(message),$notifier.addClass("fc-alert fc-alert--danger");else{var temp=$("<p>").text(message);$notifier.empty().append(temp).addClass("fc-alert fc-alert--danger")}}else $notifier.removeClass("fc-alert fc-alert--danger");$("body").trigger("notificationUpdate")},util.clearMessages=function(){if(void 0!==FC.json&&void 0!==FC.json.messages){var messages={errors:[],warnings:[],info:[]};FC.json.messages.info.forEach(function(info){"expiring_product"==info.context&&messages.info.push({context:info.context,message:info.message})}),FC.json.messages.warnings.forEach(function(warning){("subscription_modify"==warning.context&&FC.json.is_subscription_modification||"subscription_cancel"==warning.context&&FC.json.is_subscription_cancel)&&messages.warnings.push({context:warning.context,message:warning.message})}),FC.json.messages=messages}},util.cleanMessage=function(type,context){var messages=[];void 0!==FC.json&&void 0!==FC.json.messages&&void 0!==FC.json.messages[type]&&(FC.json.messages[type].forEach(function(message){message.context!==context&&messages.push(message)}),FC.json.messages[type]=messages)},util.log=function(){var prefix=["%c FC ","color:#fff; font-size:11px; background:#c99; font-weight:bold; border-radius:3px;"];arguments[0].match(/%c /)&&(prefix=[]);var args=prefix;if(FC.json&&FC.json.config&&FC.json.config.template_config&&"required"===FC.json.config.template_config.debug.usage||FC.override&&1==FC.override.debug)if(console.log&&console.log.apply){for(var n=0;n<arguments.length;++n)args.push(arguments[n]);navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(args[0]="FC",args.splice(1,1),console.debug.apply(console,args)):console.log.apply(console,args)}else{for(var ieArgs=[],n=0;n<arguments.length;++n)"string"!=typeof arguments[n]?ieArgs.push(arguments[n].name):ieArgs.push(arguments[n]);console.log(ieArgs.join(" "))}},util.isAddressAllowable=function(address_type,address){var filters=FC.json.config.template_config.location_filtering,type=filters[address_type+"_filter_type"],values=filters[address_type+"_filter_values"],country=address.getCountryCode(),region=address.getRegion();return"none"===filters.usage||("blacklist"===type?!(values.hasOwnProperty(country)&&("*"===values[country]||-1!==values[country].indexOf(region))):values.hasOwnProperty(country)&&("*"===values[country]||-1!==values[country].indexOf(region)))},util.isAddressRegionRequired=function(country_code){var country=FC.json.config.locations[country_code];return country&&country.r.req},util.isAddressPostalCodeRequired=function(country_code){var country=FC.json.config.locations[country_code];return country&&country.pc.req},util.isAddressPostalCodeLookupSupported=function(country_code){var country=FC.json.config.locations[country_code];return country&&country.pc.search},util.addressIsComplete=function(address){var is_complete=util.addressHasLocationInfo(address);if(is_complete){if(!address.address1)return!1;if(!address.country)return!1}return is_complete},util.addressHasLocationInfo=function(address){return!(!address.city||!address.country)&&(!(!address.postal_code&&util.isAddressPostalCodeRequired(address.country))&&!(!address.region&&util.isAddressRegionRequired(address.country)))},util.hashAddress=function(address){var address_as_a_string="";return address_as_a_string+=address.address1?address.address1:"",address_as_a_string+=address.address2?","+address.address2:"",address_as_a_string+=address.city?","+address.city:"",address_as_a_string+=address.region?","+address.region:"",address_as_a_string+=address.postal_code?","+address.postal_code:"",address_as_a_string+=address.country?","+address.country:"",util.hashString(address_as_a_string)},util.doAddressValidation=function(address){return FC.json.config.supports_address_validation&&util.addressIsComplete(address)&&!FC.json.is_subscription_cancel&&!util.addressIsValidated(address)&&-1!=$.inArray(address.country,FC.json.config.address_validation_countries)},util.addressIsValidated=function(address){return!!address.validated_hash&&util.hashAddress(address)==address.validated_hash},util.hashString=function(string_to_hash){var i,chr,len,hash=0;if(0==string_to_hash.length)return hash;for(i=0,len=string_to_hash.length;i<len;i++)chr=string_to_hash.charCodeAt(i),hash=(hash<<5)-hash+chr,hash|=0;return hash},util.supportsLocalStorage=function(){var storage,result,uid=new Date;try{return(storage=window.localStorage).setItem(uid,uid),result=storage.getItem(uid)==uid,storage.removeItem(uid),result&&storage}catch(e){}},util.getBootstrapEnvironment=function(){var envs=["xs","sm","md","lg"],doc=window.document,temp=doc.createElement("div");doc.body.appendChild(temp);for(var env,i=0;i<envs.length&&(env=envs[i],temp.className="hidden-"+env,null!==temp.offsetParent);i++);return doc.body.removeChild(temp),env},util.tick=function(callback){setTimeout(callback,0)},util.scrollTo=function(scroll_top){var args=Array.prototype.slice.call(arguments,0,arguments.length);args[0]={scrollTop:scroll_top};var context=$("html, body");return context.animate.apply(context,args)},util.getBillingCountry=function(){var country=FC.json.use_different_addresses||!FC.json.shipping_address.has_shippable_products?FC.json.billing_address.country:FC.json.shipping_address.country;return FC.json.has_multiple_addresses&&!FC.json.use_different_addresses&&$.each(FC.json.multiship_data,function(i,address){0!==i&&"Me"!==address.address_name||(country=address.country)}),country},util.capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},util.hasSubString=function(string,substr){return-1!==string.indexOf(substr)},util.getUrlParameter=function(sParam){var sParameterName,i,sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&");for(i=0;i<sURLVariables.length;i++)if(sParameterName=sURLVariables[i].split("="),sParameterName[0]===sParam)return void 0===sParameterName[1]||decodeURIComponent(sParameterName[1])},function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop);util.log("%c FoxyCart ","color:#fff; font-size:11px; background:#900; font-weight:bold; border-radius:3px;","Debug Mode Enabled")}(),FC.util=util}(FC),function(FC,$){"use strict";function mergeGlobalContext(){var globalContext=$("body").data("fc-context");$.extend(FC.json,globalContext)}var session=FC.session,client=(FC.Event,FC.client={EVENT_PROCESS_CLASS_NAME:"fc-event-process"});client=FC.Evented(client),client.isActionNeeded=function(params){var data=params.data;return"checkout"!=data.cart&&"updateinfo"!=data.cart&&!data.redirect&&!params.url.match("receipt(.php)?\\?id=")},client._prepareElement=function(element){var qs="";return"A"==element.tagName?(qs=element.href.match(/\?(.*)$/),qs=qs&&qs[1]||""):"FORM"==element.tagName&&(qs=$(element).serialize()),qs.replace(/\|\|[A-Za-z0-9]{64}(\|\|open)?/g,""),FC.util.unserialize(qs)},client.prepareParams=function(element){var url,$element=$(element);if($element.is("a"))url=$element.attr("href");else{if(!$element.is("form"))throw Error("Not supported");url=$element.attr("action"),url+=url.indexOf("?")>-1?"&":"?",url+=$element.serialize()}return{element:element,data:this._prepareElement(element),url:url}},client.updateJSON=function(dataJSON){var multiship_data,shipping_address,context="cart";void 0!==FC.json&&void 0!==FC.json.context&&(context=FC.json.context,multiship_data=jQuery.extend(!0,{},FC.json.multiship_data),shipping_address=jQuery.extend(!0,{},FC.json.shipping_address)),"cart"==context&&FC.util.clearMessages(),FC.json=$.extend(!0,FC.json,dataJSON),FC.json.items=dataJSON.items,FC.json.coupons=dataJSON.coupons,FC.json.gift_cards=dataJSON.gift_cards,FC.json.future_subscription_totals_by_date=dataJSON.future_subscription_totals_by_date,void 0===FC.json.config&&(FC.json.config={}),FC.json.context=context,shipping_address&&(dataJSON.shipping_address&&0==dataJSON.shipping_address.shipping_results.length&&(FC.json.shipping_address.shipping_results=[]),FC.json.shipping_address.first_name=shipping_address.first_name,FC.json.shipping_address.last_name=shipping_address.last_name,FC.json.shipping_address.address1=shipping_address.address1,FC.json.shipping_address.address2=shipping_address.address2,FC.json.shipping_address.city=shipping_address.city,FC.json.shipping_address.city_option_selected=shipping_address.city_option_selected,FC.json.shipping_address.city_options=shipping_address.city_options,FC.json.shipping_address.company=shipping_address.company,FC.json.shipping_address.country=shipping_address.country,FC.json.shipping_address.country_name=shipping_address.country_name,FC.json.shipping_address.phone=shipping_address.phone,FC.json.shipping_address.postal_code=shipping_address.postal_code,FC.json.shipping_address.region=shipping_address.region,FC.json.shipping_address.region_label=shipping_address.region_label,FC.json.shipping_address.region_name=shipping_address.region_name),multiship_data&&(FC.json.multiship_data=multiship_data),mergeGlobalContext(),client.updateMiniCart()},client._request=function(url,data,callback){return data=data||{},data.output="json",$.ajax({url:url,dataType:"jsonp",data:session.updateParams(data)}).done(function(dataJSON){callback(dataJSON)})},client.request=function(url,data){return client._request(url,data,function(dataJSON){client.updateJSON(dataJSON),!session.initialized&&dataJSON.session_id&&session.initialize(),FC.settings.session_id&&FC.settings.session_id!=dataJSON.session_id&&(session.reset(dataJSON.session_id),FC.json.shipping_address.region="",FC.json.shipping_address.postal_code="",FC.json.shipping_address.city="",FC.json.shipping_address.city_options=[],FC.json.shipping_address.city_option_selected="")})},client.requestConfig=function(){return client._request("https://"+FC.settings.storedomain+"/cart?cart=config",null,function(dataJSON){FC.json.config=$.extend(FC.json.config,dataJSON)})},client.submitCart=client.wrap("cart-submit",function(params){if(params.async){var $element=$(params.element);return $element.is("a")?window.location.href=$element.attr("href"):$element.is("form")&&$element.addClass(client.EVENT_PROCESS_CLASS_NAME).submit().removeClass(client.EVENT_PROCESS_CLASS_NAME),client.updateMiniCart(),!1}return!0}),client.updateCart=function(){return this.request("https://"+FC.settings.storedomain+"/cart?cart=get")},client.updateMiniCart=function(){FC.json.item_count>0?($("[data-fc-id='minicart-empty']").hide(),$("[data-fc-id='minicart'], #fc_minicart, .fc_minicart").show(),1==FC.json.item_count?($("[data-fc-id='minicart-plural'], #fc_plural, .fc_plural").hide(),$("[data-fc-id='minicart-singular'], #fc_singular, .fc_singular").show()):($("[data-fc-id='minicart-plural'], #fc_plural, .fc_plural").show(),$("[data-fc-id='minicart-singular'], #fc_singular, .fc_singular").hide())):($("[data-fc-id='minicart-empty']").show(),$("[data-fc-id='minicart'], #fc_minicart, .fc_minicart").hide(),$("[data-fc-id='minicart-plural'], #fc_plural, .fc_plural").show(),$("[data-fc-id='minicart-singular'], #fc_singular, .fc_singular").hide()),$("[data-fc-id='minicart-quantity'], #fc_quantity, .fc_quantity").html(""+FC.json.item_count);var total_order=FC.json.total_order%1==0?FC.json.total_order:FC.json.total_order.toFixed(2);$("[data-fc-id='minicart-order-total'], #fc_total_price, .fc_total_price").html(""+total_order)},client.applySession=function(){$("body").on("click",'a[href*="'+FC.settings.storedomain+'"]',function(){var regex=new RegExp(FC.settings.session_name+"=([A-Za-z0-9]*)"),href=$(this).attr("href");regex.test(href)||(href+=href.indexOf("?")>-1?"&":"?",$(this).attr("href",href+session.get()))}),$("body").on("submit",'form[action*="'+FC.settings.storedomain+'"]',function(){if(0==$(this).children("input[name="+FC.settings.session_name+"]").length){var $input=$('<input type="hidden">').attr("name",FC.settings.session_name).val(FC.settings.session_id);$(this).prepend($input)}})},client.preventDefaultActions=function(){$("body").on("click",'a[href*="'+FC.settings.storedomain+'/cart"]',function(event){!1===client.submitCart(client.prepareParams(this))&&event.preventDefault()}),$("body").on("submit",'form[action*="'+FC.settings.storedomain+'/cart"]',function(event){$(this).hasClass(client.EVENT_PROCESS_CLASS_NAME)||!1===client.submitCart(client.prepareParams(this))&&event.preventDefault()})},client.on("render.done",function(){client.updateMiniCart()}),client.init=client.wrap("ready",function(params,next){FC.util.log("FC.client.init() started"),client.applySession(),client.preventDefaultActions(),FC.json&&mergeGlobalContext();var context="cart";void 0!==FC.json&&void 0!==FC.json.context&&(context=FC.json.context);var cart_is_fullpage=$("body").attr("data-fc-context")&&$("body").attr("data-fc-context").match(/cart_is_fullpage/);"cart"!=context||cart_is_fullpage?next():client.updateCart().done(function(){client.updateMiniCart(),next()})})}(FC,jQuery);var Twig=function(Twig){return Twig.VERSION="0.8.2-7",Twig}(Twig||{}),Twig=function(Twig){"use strict";function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type}function relativePath(template,file){var base,base_path,val,sep_chr="/",new_path=[];if(template.url)base=void 0!==template.base?template.base+("/"===template.base.charAt(template.base.length-1)?"":"/"):template.url;else{if(!template.path)throw new Twig.Error("Cannot extend an inline template.");var path=require("path"),sep=path.sep||sep_chr,relative=new RegExp("^\\.{1,2}"+sep.replace("\\","\\\\"));file=file.replace(/\//g,sep),void 0!==template.base&&null==file.match(relative)?(file=file.replace(template.base,""),base=template.base+sep):base=template.path,base=base.replace(sep+sep,sep),sep_chr=sep}for(base_path=base.split(sep_chr),base_path.pop(),base_path=base_path.concat(file.split(sep_chr));base_path.length>0;)"."==(val=base_path.shift())||(".."==val&&new_path.length>0&&".."!=new_path[new_path.length-1]?new_path.pop():new_path.push(val));return new_path.join(sep_chr)}return Twig.trace=!1,Twig.debug=!1,Twig.cache=!0,Twig.placeholders={parent:"{{|PARENT|}}"},Twig.indexOf=function(arr,searchElement){if(Array.prototype.hasOwnProperty("indexOf"))return arr.indexOf(searchElement);if(void 0===arr||null===arr)throw new TypeError;var t=Object(arr),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);k<len;k++)if(k in t&&t[k]===searchElement)return k;return arr==searchElement?0:-1},Twig.forEach=function(arr,callback,thisArg){if(Array.prototype.forEach)return arr.forEach(callback,thisArg);var T,k;if(null==arr)throw new TypeError(" this is null or not defined");var O=Object(arr),len=O.length>>>0;if("[object Function]"!={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}},Twig.merge=function(target,source,onlyChanged){return Twig.forEach(Object.keys(source),function(key){(!onlyChanged||key in target)&&(target[key]=source[key])}),target},Twig.Error=function(message){this.message=message,this.name="TwigException",this.type="TwigException"},Twig.Error.prototype.toString=function(){return this.name+": "+this.message},Twig.log={trace:function(){Twig.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){Twig.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?void 0!==console.error?Twig.log.error=function(){console.error.apply(console,arguments)}:void 0!==console.log&&(Twig.log.error=function(){console.log.apply(console,arguments)}):Twig.log.error=function(){},Twig.ChildContext=function(context){var ChildContext=function(){};return ChildContext.prototype=context,new ChildContext},Twig.token={},Twig.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw"},Twig.token.definitions=[{type:Twig.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:Twig.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:Twig.token.type.output,open:"{{",close:"}}"},{type:Twig.token.type.logic,open:"{%",close:"%}"},{type:Twig.token.type.comment,open:"{#",close:"#}"}],Twig.token.strings=['"',"'"],Twig.token.findStart=function(template){var i,token_template,first_key_position,output={position:null,def:null};for(i=0;i<Twig.token.definitions.length;i++)token_template=Twig.token.definitions[i],first_key_position=template.indexOf(token_template.open),Twig.log.trace("Twig.token.findStart: ","Searching for ",token_template.open," found at ",first_key_position),first_key_position>=0&&(null===output.position||first_key_position<output.position)&&(output.position=first_key_position,output.def=token_template);return output},Twig.token.findEnd=function(template,token_def,start){for(var i,l,end=null,found=!1,offset=0,str_pos=null,str_found=null,pos=null,end_offset=null,this_str_pos=null,end_str_pos=null;!found;){if(str_pos=null,str_found=null,!((pos=template.indexOf(token_def.close,offset))>=0))throw new Twig.Error("Unable to find closing bracket '"+token_def.close+"' opened near template position "+start);if(end=pos,found=!0,token_def.type===Twig.token.type.comment)break;for(l=Twig.token.strings.length,i=0;i<l;i+=1)(this_str_pos=template.indexOf(Twig.token.strings[i],offset))>0&&this_str_pos<pos&&(null===str_pos||this_str_pos<str_pos)&&(str_pos=this_str_pos,str_found=Twig.token.strings[i]);if(null!==str_pos)for(end_offset=str_pos+1,end=null,found=!1;;){if((end_str_pos=template.indexOf(str_found,end_offset))<0)throw"Unclosed string in template";if("\\"!==template.substr(end_str_pos-1,1)){offset=end_str_pos+1;break}end_offset=end_str_pos+1}}return end},Twig.tokenize=function(template){for(var tokens=[],error_offset=0,found_token=null,end=null;template.length>0;)found_token=Twig.token.findStart(template),Twig.log.trace("Twig.tokenize: ","Found token: ",found_token),null!==found_token.position?(found_token.position>0&&tokens.push({type:Twig.token.type.raw,value:template.substring(0,found_token.position)}),template=template.substr(found_token.position+found_token.def.open.length),error_offset+=found_token.position+found_token.def.open.length,end=Twig.token.findEnd(template,found_token.def,error_offset),Twig.log.trace("Twig.tokenize: ","Token ends at ",end),tokens.push({type:found_token.def.type,value:template.substring(0,end).trim()}),"logic"===found_token.def.type&&"\n"===template.substr(end+found_token.def.close.length,1)&&(end+=1),template=template.substr(end+found_token.def.close.length),error_offset+=end+found_token.def.close.length):(tokens.push({type:Twig.token.type.raw,value:template}),template="");return tokens},Twig.compile=function(tokens){try{for(var output=[],stack=[],intermediate_output=[],token=null,logic_token=null,unclosed_token=null,prev_token=null,prev_template=null,tok_output=null,type=null,open=null,next=null;tokens.length>0;){switch(token=tokens.shift(),Twig.log.trace("Compiling token ",token),token.type){case Twig.token.type.raw:stack.length>0?intermediate_output.push(token):output.push(token);break;case Twig.token.type.logic:if(logic_token=Twig.logic.compile.apply(this,[token]),type=logic_token.type,open=Twig.logic.handler[type].open,next=Twig.logic.handler[type].next,Twig.log.trace("Twig.compile: ","Compiled logic token to ",logic_token," next is: ",next," open is : ",open),void 0!==open&&!open){if(prev_token=stack.pop(),prev_template=Twig.logic.handler[prev_token.type],Twig.indexOf(prev_template.next,type)<0)throw new Error(type+" not expected after a "+prev_token.type);prev_token.output=prev_token.output||[],prev_token.output=prev_token.output.concat(intermediate_output),intermediate_output=[],tok_output={type:Twig.token.type.logic,token:prev_token},stack.length>0?intermediate_output.push(tok_output):output.push(tok_output)}void 0!==next&&next.length>0?(Twig.log.trace("Twig.compile: ","Pushing ",logic_token," to logic stack."),stack.length>0&&(prev_token=stack.pop(),prev_token.output=prev_token.output||[],prev_token.output=prev_token.output.concat(intermediate_output),stack.push(prev_token),intermediate_output=[]),stack.push(logic_token)):void 0!==open&&open&&(tok_output={type:Twig.token.type.logic,token:logic_token},stack.length>0?intermediate_output.push(tok_output):output.push(tok_output));break;case Twig.token.type.comment:break;case Twig.token.type.output:Twig.expression.compile.apply(this,[token]),stack.length>0?intermediate_output.push(token):output.push(token)}Twig.log.trace("Twig.compile: "," Output: ",output," Logic Stack: ",stack," Pending Output: ",intermediate_output)}if(stack.length>0)throw unclosed_token=stack.pop(),new Error("Unable to find an end tag for "+unclosed_token.type+", expecting one of "+unclosed_token.next);return output}catch(ex){if(Twig.log.error("Error compiling twig template "+this.id+": "),ex.stack?Twig.log.error(ex.stack):Twig.log.error(ex.toString()),this.options.rethrow)throw ex}},Twig.parse=function(tokens,context){try{var output=[],chain=!0,that=this;return Twig.forEach(tokens,function(token){switch(Twig.log.debug("Twig.parse: ","Parsing token: ",token),token.type){case Twig.token.type.raw:output.push(Twig.filters.raw(token.value));break;case Twig.token.type.logic:var logic_token=token.token,logic=Twig.logic.parse.apply(that,[logic_token,context,chain]);void 0!==logic.chain&&(chain=logic.chain),void 0!==logic.context&&(context=logic.context),void 0!==logic.output&&output.push(logic.output);break;case Twig.token.type.comment:break;case Twig.token.type.output:Twig.log.debug("Twig.parse: ","Output token: ",token.stack),output.push(Twig.expression.parse.apply(that,[token.stack,context]))}}),Twig.output.apply(this,[output])}catch(ex){if(Twig.log.error("Error parsing twig template "+this.id+": "),ex.stack?Twig.log.error(ex.stack):Twig.log.error(ex.toString()),this.options.rethrow)throw ex;if(Twig.debug)return ex.toString()}},Twig.prepare=function(data){var tokens,raw_tokens;return Twig.log.debug("Twig.prepare: ","Tokenizing ",data),raw_tokens=Twig.tokenize.apply(this,[data]),Twig.log.debug("Twig.prepare: ","Compiling ",raw_tokens),tokens=Twig.compile.apply(this,[raw_tokens]),Twig.log.debug("Twig.prepare: ","Compiled ",tokens),tokens},Twig.output=function(output){if(!this.options.autoescape)return output.join("");var escaped_output=[];return Twig.forEach(output,function(str){str&&!str.twig_markup&&(str=Twig.filters.escape(str)),escaped_output.push(str)}),Twig.Markup(escaped_output.join(""))},Twig.Templates={registry:{}},Twig.validateId=function(id){if("prototype"===id)throw new Twig.Error(id+" is not a valid twig identifier");if(Twig.Templates.registry.hasOwnProperty(id))throw new Twig.Error("There is already a template with the ID "+id);return!0},Twig.Templates.save=function(template){if(void 0===template.id)throw new Twig.Error("Unable to save template with no id");Twig.Templates.registry[template.id]=template},Twig.Templates.load=function(id){return Twig.Templates.registry.hasOwnProperty(id)?Twig.Templates.registry[id]:null},Twig.Templates.loadRemote=function(location,params,callback,error_callback){var id=params.id,method=params.method,async=params.async,precompiled=params.precompiled,template=null;if(void 0===async&&(async=!0),void 0===id&&(id=location),params.id=id,Twig.cache&&Twig.Templates.registry.hasOwnProperty(id))return callback&&callback(Twig.Templates.registry[id]),Twig.Templates.registry[id];if("ajax"==method){if("undefined"==typeof XMLHttpRequest)throw new Twig.Error("Unsupported platform: Unable to do remote requests because there is no XMLHTTPRequest implementation");var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){var data=null;4==xmlhttp.readyState&&(200==xmlhttp.status?(Twig.log.debug("Got template ",xmlhttp.responseText),data=!0===precompiled?JSON.parse(xmlhttp.responseText):xmlhttp.responseText,params.url=location,params.data=data,template=new Twig.Template(params),callback&&callback(template)):error_callback&&error_callback(xmlhttp))},xmlhttp.open("GET",location,async),xmlhttp.send()}else!function(){var fs=require("fs"),data=(require("path"),null),loadTemplateFn=function(err,data){if(err)return void(error_callback&&error_callback(err));!0===precompiled&&(data=JSON.parse(data)),params.data=data,params.path=location,template=new Twig.Template(params),callback&&callback(template)};if(!0===async)fs.stat(location,function(err,stats){if(err||!stats.isFile())throw new Twig.Error("Unable to find template file "+location);fs.readFile(location,"utf8",loadTemplateFn)});else{if(!fs.statSync(location).isFile())throw new Twig.Error("Unable to find template file "+location);data=fs.readFileSync(location,"utf8"),loadTemplateFn(void 0,data)}}();return!1!==async||template},Twig.Template=function(params){var data=params.data,id=params.id,blocks=params.blocks,macros=params.macros||{},base=params.base,path=params.path,url=params.url,options=params.options;this.id=id,this.base=base,this.path=path,this.url=url,this.macros=macros,this.options=options,this.reset(blocks),is("String",data)?this.tokens=Twig.prepare.apply(this,[data]):this.tokens=data,void 0!==id&&Twig.Templates.save(this)},Twig.Template.prototype.reset=function(blocks){Twig.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.child={blocks:blocks||{}},this.extend=null},Twig.Template.prototype.render=function(context,params){params=params||{};var output,url;if(this.context=context||{},this.reset(),params.blocks&&(this.blocks=params.blocks),params.macros&&(this.macros=params.macros),output=Twig.parse.apply(this,[this.tokens,this.context]),this.extend){var ext_template;return this.options.allowInlineIncludes&&(ext_template=Twig.Templates.load(this.extend))&&(ext_template.options=this.options),ext_template||(url=relativePath(this,this.extend),ext_template=Twig.Templates.loadRemote(url,{method:this.url?"ajax":"fs",base:this.base,async:!1,id:url,options:this.options})),this.parent=ext_template,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==params.output?this.blocks:"macros"==params.output?this.macros:output},Twig.Template.prototype.importFile=function(file){var url,sub_template;if(!this.url&&!this.path&&this.options.allowInlineIncludes){if(sub_template=Twig.Templates.load(file),sub_template.options=this.options,sub_template)return sub_template;throw new Twig.Error("Didn't find the inline template by id")}return url=relativePath(this,file),sub_template=Twig.Templates.loadRemote(url,{method:this.url?"ajax":"fs",base:this.base,async:!1,options:this.options,id:url})},Twig.Template.prototype.importBlocks=function(file,override){var sub_template=this.importFile(file),context=this.context,that=this;override=override||!1,sub_template.render(context),Twig.forEach(Object.keys(sub_template.blocks),function(key){(override||void 0===that.blocks[key])&&(that.blocks[key]=sub_template.blocks[key],that.importedBlocks.push(key))})},Twig.Template.prototype.compile=function(options){return Twig.compiler.compile(this,options)},Twig.Markup=function(content){return"string"==typeof content&&content.length>0&&(content=new String(content),content.twig_markup=!0),content},Twig}(Twig||{});!function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(o){if(o!==Object(o))throw new TypeError("Object.keys called on non-object");var p,ret=[];for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&ret.push(p);return ret})}();var Twig=function(Twig){Twig.lib={};var sprintfLib=function(){function sprintf(){var key=arguments[0],cache=sprintf.cache;return cache[key]&&cache.hasOwnProperty(key)||(cache[key]=sprintf.parse(key)),sprintf.format.call(null,cache[key],arguments)}function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){return Array(multiplier+1).join(input)}var re={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};return sprintf.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[],is_positive=!0,sign="";for(i=0;i<tree_length;i++)if("string"===(node_type=get_type(parse_tree[i])))output[output.length]=parse_tree[i];else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw new Error(sprintf("[sprintf] property '%s' does not exist",match[2][k]));arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++];if("function"==get_type(arg)&&(arg=arg()),re.not_string.test(match[8])&&re.not_json.test(match[8])&&"number"!=get_type(arg)&&isNaN(arg))throw new TypeError(sprintf("[sprintf] expecting number but found %s",get_type(arg)));switch(re.number.test(match[8])&&(is_positive=arg>=0),match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":case"i":arg=parseInt(arg,10);break;case"j":arg=JSON.stringify(arg,null,match[6]?parseInt(match[6]):0);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"g":arg=match[7]?parseFloat(arg).toPrecision(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg>>>=0;break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}re.json.test(match[8])?output[output.length]=arg:(!re.number.test(match[8])||is_positive&&!match[3]?sign="":(sign=is_positive?"+":"-",arg=arg.toString().replace(re.sign,"")),pad_character=match[4]?"0"===match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-(sign+arg).length,pad=match[6]&&pad_length>0?str_repeat(pad_character,pad_length):"",output[output.length]=match[5]?sign+arg+pad:"0"===pad_character?sign+pad+arg:pad+sign+arg)}return output.join("")},sprintf.cache={},sprintf.parse=function(fmt){for(var _fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=re.text.exec(_fmt)))parse_tree[parse_tree.length]=match[0];else if(null!==(match=re.modulo.exec(_fmt)))parse_tree[parse_tree.length]="%";else{if(null===(match=re.placeholder.exec(_fmt)))throw new SyntaxError("[sprintf] unexpected placeholder");if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=re.key.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(field_list[field_list.length]=field_match[1];""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=re.key_access.exec(replacement_field)))field_list[field_list.length]=field_match[1];else{if(null===(field_match=re.index_access.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");field_list[field_list.length]=field_match[1]}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");parse_tree[parse_tree.length]=match}_fmt=_fmt.substring(match[0].length)}return parse_tree},{sprintf:sprintf,vsprintf:function(fmt,argv,_argv){return _argv=(argv||[]).slice(0),_argv.splice(0,0,fmt),sprintf.apply(null,_argv)}}}(),sprintf=sprintfLib.sprintf,vsprintf=sprintfLib.vsprintf;return Twig.lib.sprintf=sprintf,Twig.lib.vsprintf=vsprintf,function(){function getOrdinalFor(intNum){return(intNum=Math.abs(intNum)%100)%10==1&&11!=intNum?"st":intNum%10==2&&12!=intNum?"nd":intNum%10==3&&13!=intNum?"rd":"th"}function getISO8601Year(aDate){var d=new Date(aDate.getFullYear()+1,0,4);return(d-aDate)/864e5<7&&(aDate.getDay()+6)%7<(d.getDay()+6)%7?d.getFullYear():aDate.getMonth()>0||aDate.getDate()>=4?aDate.getFullYear():aDate.getFullYear()-((aDate.getDay()+6)%7-aDate.getDate()>2?1:0)}function getISO8601Week(aDate){var d=new Date(getISO8601Year(aDate),0,4);return d.setDate(d.getDate()-(d.getDay()+6)%7),parseInt((aDate-d)/6048e5)+1}var shortDays="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),fullDays="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),shortMonths="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),fullMonths="January,February,March,April,May,June,July,August,September,October,November,December".split(",");Twig.lib.formatDate=function(date,format){if("string"!=typeof format||/^\s*$/.test(format))return date+"";var jan1st=new Date(date.getFullYear(),0,1),me=date;return format.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(option){switch(option){case"d":return("0"+me.getDate()).replace(/^.+(..)$/,"$1");case"D":return shortDays[me.getDay()];case"j":return me.getDate();case"l":return fullDays[me.getDay()];case"N":return(me.getDay()+6)%7+1;case"S":return getOrdinalFor(me.getDate());case"w":return me.getDay();case"z":return Math.ceil((jan1st-me)/864e5);case"W":return("0"+getISO8601Week(me)).replace(/^.(..)$/,"$1");case"F":return fullMonths[me.getMonth()];case"m":return("0"+(me.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return shortMonths[me.getMonth()];case"n":return me.getMonth()+1;case"t":return new Date(me.getFullYear(),me.getMonth()+1,-1).getDate();case"L":return 29==new Date(me.getFullYear(),1,29).getDate()?1:0;case"o":return getISO8601Year(me);case"Y":return me.getFullYear();case"y":return(me.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return me.getHours()<12?"am":"pm";case"A":return me.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((me.getUTCHours()+1)%24+me.getUTCMinutes()/60+me.getUTCSeconds()/3600)/24);case"g":return me.getHours()%12!=0?me.getHours()%12:12;case"G":return me.getHours();case"h":return("0"+(me.getHours()%12!=0?me.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+me.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+me.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+me.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return me.getMilliseconds();case"U":return me.getTime()/1e3}})}}(),Twig.lib.strip_tags=function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("<"+$1.toLowerCase()+">")>-1?$0:""})},Twig.lib.parseISO8601Date=function(s){var re=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,d=[];if(!(d=s.match(re)))throw"Couldn't parse ISO 8601 date string '"+s+"'";var a=[1,2,3,4,5,6,10,11];for(var i in a)d[a[i]]=parseInt(d[a[i]],10);d[7]=parseFloat(d[7]);var ms=Date.UTC(d[1],d[2]-1,d[3],d[4],d[5],d[6]);if(d[7]>0&&(ms+=Math.round(1e3*d[7])),"Z"!=d[8]&&d[10]){var offset=60*d[10]*60*1e3;d[11]&&(offset+=60*d[11]*1e3),"-"==d[9]?ms-=offset:ms+=offset}return new Date(ms)},Twig.lib.strtotime=function(text,now){function lastNext(type,range,modifier){var diff,day=days[range];void 0!==day&&(diff=day-date.getDay(),0===diff?diff=7*modifier:diff>0&&"last"===type?diff-=7:diff<0&&"next"===type&&(diff+=7),date.setDate(date.getDate()+diff))}function process(val){var splt=val.split(" "),type=splt[0],range=splt[1].substring(0,3),typeIsNumber=/\d+/.test(type),ago="ago"===splt[2],num=("last"===type?-1:1)*(ago?-1:1);if(typeIsNumber&&(num*=parseInt(type,10)),ranges.hasOwnProperty(range)&&!splt[1].match(/^mon(day|\.)?$/i))return date["set"+ranges[range]](date["get"+ranges[range]]()+num);if("wee"===range)return date.setDate(date.getDate()+7*num);if("next"===type||"last"===type)lastNext(type,range,num);else if(!typeIsNumber)return!1;return!0}var parsed,match,today,year,date,days,ranges,len,times,regex,i,fail=!1;if(!text)return fail;if(text=text.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),(match=text.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/))&&match[2]===match[4])if(match[1]>1901)switch(match[2]){case"-":return match[3]>12||match[5]>31?fail:new Date(match[1],parseInt(match[3],10)-1,match[5],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3;case".":return fail;case"/":return match[3]>12||match[5]>31?fail:new Date(match[1],parseInt(match[3],10)-1,match[5],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3}else if(match[5]>1901)switch(match[2]){case"-":case".":return match[3]>12||match[1]>31?fail:new Date(match[5],parseInt(match[3],10)-1,match[1],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3;case"/":return match[1]>12||match[3]>31?fail:new Date(match[5],parseInt(match[1],10)-1,match[3],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3}else switch(match[2]){case"-":return match[3]>12||match[5]>31||match[1]<70&&match[1]>38?fail:(year=match[1]>=0&&match[1]<=38?+match[1]+2e3:match[1],new Date(year,parseInt(match[3],10)-1,match[5],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3);case".":return match[5]>=70?match[3]>12||match[1]>31?fail:new Date(match[5],parseInt(match[3],10)-1,match[1],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3:match[5]<60&&!match[6]?match[1]>23||match[3]>59?fail:(today=new Date,new Date(today.getFullYear(),today.getMonth(),today.getDate(),match[1]||0,match[3]||0,match[5]||0,match[9]||0)/1e3):fail;case"/":return match[1]>12||match[3]>31||match[5]<70&&match[5]>38?fail:(year=match[5]>=0&&match[5]<=38?+match[5]+2e3:match[5],new Date(year,parseInt(match[1],10)-1,match[3],match[6]||0,match[7]||0,match[8]||0,match[9]||0)/1e3);case":":return match[1]>23||match[3]>59||match[5]>59?fail:(today=new Date,new Date(today.getFullYear(),today.getMonth(),today.getDate(),match[1]||0,match[3]||0,match[5]||0)/1e3)}if("now"===text)return null===now||isNaN(now)?(new Date).getTime()/1e3|0:0|now;if(!isNaN(parsed=Date.parse(text)))return parsed/1e3|0;if(date=now?new Date(1e3*now):new Date,days={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},ranges={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},times="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",regex="([+-]?\\d+\\s"+times+"|(last|next)\\s"+times+")(\\sago)?",!(match=text.match(new RegExp(regex,"gi"))))return fail;for(i=0,len=match.length;i<len;i++)if(!process(match[i]))return fail;return date.getTime()/1e3},Twig.lib.is=function(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type},Twig.lib.copy=function(src){var key,target={};for(key in src)target[key]=src[key];return target},Twig.lib.replaceAll=function(string,search,replace){return string.split(search).join(replace)},Twig.lib.chunkArray=function(arr,size){var returnVal=[],x=0,len=arr.length;if(size<1||!Twig.lib.is("Array",arr))return[];for(;x<len;)returnVal.push(arr.slice(x,x+=size));return returnVal},Twig.lib.round=function(value,precision,mode){var m,f,isHalf,sgn;if(precision|=0,m=Math.pow(10,precision),value*=m,sgn=value>0|-(value<0),isHalf=value%1==.5*sgn,f=Math.floor(value),isHalf)switch(mode){case"PHP_ROUND_HALF_DOWN":value=f+(sgn<0);break;case"PHP_ROUND_HALF_EVEN":value=f+f%2*sgn;break;case"PHP_ROUND_HALF_ODD":value=f+!(f%2);break;default:value=f+(sgn>0)}return(isHalf?value:Math.round(value))/m},Twig.lib.max=function(){var ar,retVal,i=0,n=0,argv=arguments,argc=argv.length,_obj2Array=function(obj){if("[object Array]"===Object.prototype.toString.call(obj))return obj;var ar=[];for(var i in obj)obj.hasOwnProperty(i)&&ar.push(obj[i]);return ar},_compare=function(current,next){var i=0,n=0,tmp=0,nl=0,cl=0;if(current===next)return 0;if("object"==typeof current){if("object"==typeof next){if(current=_obj2Array(current),next=_obj2Array(next),cl=current.length,(nl=next.length)>cl)return 1;if(nl<cl)return-1;for(i=0,n=cl;i<n;++i){if(1==(tmp=_compare(current[i],next[i])))return 1;if(-1==tmp)return-1}return 0}return-1}return"object"==typeof next?1:isNaN(next)&&!isNaN(current)?0==current?0:current<0?1:-1:isNaN(current)&&!isNaN(next)?0==next?0:next>0?1:-1:next==current?0:next>current?1:-1};if(0===argc)throw new Error("At least one value should be passed to max()");if(1===argc){if("object"!=typeof argv[0])throw new Error("Wrong parameter count for max()");if(ar=_obj2Array(argv[0]),0===ar.length)throw new Error("Array must contain at least one element for max()")}else ar=argv;for(retVal=ar[0],i=1,n=ar.length;i<n;++i)1==_compare(retVal,ar[i])&&(retVal=ar[i]);return retVal},Twig.lib.min=function(){var ar,retVal,i=0,n=0,argv=arguments,argc=argv.length,_obj2Array=function(obj){if("[object Array]"===Object.prototype.toString.call(obj))return obj;var ar=[];for(var i in obj)obj.hasOwnProperty(i)&&ar.push(obj[i]);return ar},_compare=function(current,next){var i=0,n=0,tmp=0,nl=0,cl=0;if(current===next)return 0;if("object"==typeof current){if("object"==typeof next){if(current=_obj2Array(current),next=_obj2Array(next),cl=current.length,(nl=next.length)>cl)return 1;if(nl<cl)return-1;for(i=0,n=cl;i<n;++i){if(1==(tmp=_compare(current[i],next[i])))return 1;if(-1==tmp)return-1}return 0}return-1}return"object"==typeof next?1:isNaN(next)&&!isNaN(current)?0==current?0:current<0?1:-1:isNaN(current)&&!isNaN(next)?0==next?0:next>0?1:-1:next==current?0:next>current?1:-1};if(0===argc)throw new Error("At least one value should be passed to min()");if(1===argc){if("object"!=typeof argv[0])throw new Error("Wrong parameter count for min()");if(ar=_obj2Array(argv[0]),0===ar.length)throw new Error("Array must contain at least one element for min()")}else ar=argv;for(retVal=ar[0],i=1,n=ar.length;i<n;++i)-1==_compare(retVal,ar[i])&&(retVal=ar[i]);return retVal},Twig}(Twig||{}),Twig=function(Twig){"use strict";for(Twig.logic={},Twig.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},Twig.logic.definitions=[{type:Twig.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[Twig.logic.type.else_,Twig.logic.type.elseif,Twig.logic.type.endif],open:!0,compile:function(token){var expression=token.match[1];return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var output="",result=Twig.expression.parse.apply(this,[token.stack,context]);return chain=!0,result&&(chain=!1,output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[Twig.logic.type.else_,Twig.logic.type.elseif,Twig.logic.type.endif],open:!1,compile:function(token){var expression=token.match[1];return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var output="";return chain&&!0===Twig.expression.parse.apply(this,[token.stack,context])&&(chain=!1,output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.else_,regex:/^else$/,next:[Twig.logic.type.endif,Twig.logic.type.endfor],open:!1,parse:function(token,context,chain){var output="";return chain&&(output=Twig.parse.apply(this,[token.output,context])),{chain:chain,output:output}}},{type:Twig.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:Twig.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[Twig.logic.type.else_,Twig.logic.type.endfor],open:!0,compile:function(token){var key_value=token.match[1],expression=token.match[2],conditional=token.match[3],kv_split=null;if(token.key_var=null,token.value_var=null,key_value.indexOf(",")>=0){if(kv_split=key_value.split(","),2!==kv_split.length)throw new Twig.Error("Invalid expression in for loop: "+key_value);token.key_var=kv_split[0].trim(),token.value_var=kv_split[1].trim()}else token.value_var=key_value;return token.expression=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,conditional&&(token.conditional=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:conditional}]).stack),delete token.match,token},parse:function(token,context,continue_chain){var len,keyset,result=Twig.expression.parse.apply(this,[token.expression,context]),output=[],index=0,that=this,conditional=token.conditional,buildLoop=function(index,len){var isConditional=void 0!==conditional;return{index:index+1,index0:index,revindex:isConditional?void 0:len-index,revindex0:isConditional?void 0:len-index-1,first:0===index,last:isConditional?void 0:index===len-1,length:isConditional?void 0:len,parent:context}},loop=function(key,value){var inner_context=Twig.ChildContext(context);inner_context[token.value_var]=value,token.key_var&&(inner_context[token.key_var]=key),inner_context.loop=buildLoop(index,len),(void 0===conditional||Twig.expression.parse.apply(that,[conditional,inner_context]))&&(output.push(Twig.parse.apply(that,[token.output,inner_context])),index+=1),delete inner_context.loop,delete inner_context[token.value_var],delete inner_context[token.key_var],Twig.merge(context,inner_context,!0)};return Twig.lib.is("Array",result)?(len=result.length,Twig.forEach(result,function(value){loop(index,value)})):Twig.lib.is("Object",result)&&(keyset=void 0!==result._keys?result._keys:Object.keys(result),len=keyset.length,Twig.forEach(keyset,function(key){"_keys"!==key&&loop(key,result[key])})),continue_chain=0===output.length,{chain:continue_chain,output:Twig.output.apply(this,[output])}}},{type:Twig.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:Twig.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(token){var key=token.match[1].trim(),expression=token.match[2],expression_stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack;return token.key=key,token.expression=expression_stack,delete token.match,token},parse:function(token,context,continue_chain){var value=Twig.expression.parse.apply(this,[token.expression,context]);return context[token.key]=value,{chain:continue_chain,context:context}}},{type:Twig.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[Twig.logic.type.endset],open:!0,compile:function(token){var key=token.match[1].trim();return token.key=key,delete token.match,token},parse:function(token,context,continue_chain){var value=Twig.parse.apply(this,[token.output,context]),key=token.key;return this.context[key]=value,context[key]=value,{chain:continue_chain,context:context}}},{type:Twig.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:Twig.logic.type.filter,regex:/^filter\s+(.+)$/,next:[Twig.logic.type.endfilter],open:!0,compile:function(token){var expression="|"+token.match[1].trim();return token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,delete token.match,token},parse:function(token,context,chain){var unfiltered=Twig.parse.apply(this,[token.output,context]),stack=[{type:Twig.expression.type.string,value:unfiltered}].concat(token.stack);return{chain:chain,output:Twig.expression.parse.apply(this,[stack,context])}}},{type:Twig.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:Twig.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[Twig.logic.type.endblock],open:!0,compile:function(token){return token.block=token.match[1].trim(),delete token.match,token},parse:function(token,context,chain){var block_output="",output="",isImported=this.importedBlocks.indexOf(token.block)>-1,hasParent=this.blocks[token.block]&&this.blocks[token.block].indexOf(Twig.placeholders.parent)>-1;return(void 0===this.blocks[token.block]||isImported||hasParent||context.loop)&&(block_output=Twig.expression.parse.apply(this,[{type:Twig.expression.type.string,value:Twig.parse.apply(this,[token.output,context])},context]),isImported&&this.importedBlocks.splice(this.importedBlocks.indexOf(token.block),1),this.blocks[token.block]=hasParent?Twig.Markup(this.blocks[token.block].replace(Twig.placeholders.parent,block_output)):block_output),output=this.child.blocks[token.block]?this.child.blocks[token.block]:this.blocks[token.block],{chain:chain,output:output}}},{type:Twig.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:Twig.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim();return delete token.match,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var file=Twig.expression.parse.apply(this,[token.stack,context]);return this.extend=file,{chain:chain,output:""}}},{type:Twig.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim();return delete token.match,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var file=Twig.expression.parse.apply(this,[token.stack,context]);return this.importBlocks(file),{chain:chain,output:""}}},{type:Twig.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+([\S\s]+?))?\s*(only)?$/,next:[],open:!0,compile:function(token){var match=token.match,includeMissing=void 0!==match[1],expression=match[2].trim(),withContext=match[3],only=void 0!==match[4]&&match[4].length;return delete token.match,token.only=only,token.includeMissing=includeMissing,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,void 0!==withContext&&(token.withStack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:withContext.trim()}]).stack),token},parse:function(token,context,chain){var withContext,i,template,innerContext={};if(token.only||(innerContext=Twig.ChildContext(context)),void 0!==token.withStack){withContext=Twig.expression.parse.apply(this,[token.withStack,context]);for(i in withContext)withContext.hasOwnProperty(i)&&(innerContext[i]=withContext[i])}var file=Twig.expression.parse.apply(this,[token.stack,innerContext]);return template=file instanceof Twig.Template?file:this.importFile(file),{chain:chain,output:template.render(innerContext)}}},{type:Twig.logic.type.spaceless,regex:/^spaceless$/,next:[Twig.logic.type.endspaceless],open:!0,parse:function(token,context,chain){var unfiltered=Twig.parse.apply(this,[token.output,context]),rBetweenTagSpaces=/>\s+</g;return{chain:chain,output:unfiltered.replace(rBetweenTagSpaces,"><").trim()}}},{type:Twig.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:Twig.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[Twig.logic.type.endmacro],open:!0,compile:function(token){for(var macroName=token.match[1],parameters=token.match[2].split(/[\s,]+/),i=0;i<parameters.length;i++)for(var j=0;j<parameters.length;j++)if(parameters[i]===parameters[j]&&i!==j)throw new Twig.Error("Duplicate arguments for parameter: "+parameters[i]);return token.macroName=macroName,token.parameters=parameters,delete token.match,token},parse:function(token,context,chain){var template=this;return this.macros[token.macroName]=function(){for(var macroContext={_self:template.macros},i=0;i<token.parameters.length;i++){var prop=token.parameters[i];void 0!==arguments[i]?macroContext[prop]=arguments[i]:macroContext[prop]=void 0}return Twig.parse.apply(template,[token.output,macroContext])},{chain:chain,output:""}}},{type:Twig.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:Twig.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(token){var expression=token.match[1].trim(),contextName=token.match[2].trim();return delete token.match,token.expression=expression,token.contextName=contextName,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){if("_self"!==token.expression){var file=Twig.expression.parse.apply(this,[token.stack,context]),template=this.importFile(file||token.expression);context[token.contextName]=template.render({},{output:"macros"})}else context[token.contextName]=this.macros;return{chain:chain,output:""}}},{type:Twig.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(token){for(var expression=token.match[1].trim(),macroExpressions=token.match[2].trim().split(/[ ,]+/),macroNames={},i=0;i<macroExpressions.length;i++){var res=macroExpressions[i],macroMatch=res.match(/^([a-zA-Z0-9_]+)\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/);macroMatch?macroNames[macroMatch[1].trim()]=macroMatch[2].trim():res.match(/^([a-zA-Z0-9_]+)$/)&&(macroNames[res]=res)}return delete token.match,token.expression=expression,token.macroNames=macroNames,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,token},parse:function(token,context,chain){var macros;if("_self"!==token.expression){var file=Twig.expression.parse.apply(this,[token.stack,context]);macros=this.importFile(file||token.expression).render({},{output:"macros"})}else macros=this.macros;for(var macroName in token.macroNames)macros.hasOwnProperty(macroName)&&(context[token.macroNames[macroName]]=macros[macroName]);return{chain:chain,output:""}}},{type:Twig.logic.type.embed,regex:/^embed\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[Twig.logic.type.endembed],open:!0,compile:function(token){var match=token.match,includeMissing=void 0!==match[1],expression=match[2].trim(),withContext=match[3],only=void 0!==match[4]&&match[4].length;return delete token.match,token.only=only,token.includeMissing=includeMissing,token.stack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:expression}]).stack,void 0!==withContext&&(token.withStack=Twig.expression.compile.apply(this,[{type:Twig.expression.type.expression,value:withContext.trim()}]).stack),token},parse:function(token,context,chain){function filterBlockTokens(token){"logic"==token.type&&"Twig.logic.type.block"==token.token.type&&newBlockTokens.push(token),token.token&&token.token.output&&Twig.forEach(token.token.output,filterBlockTokens)}function updateTokens(core,updated){Twig.forEach(core,function(token,index,container){"logic"==token.type&&"Twig.logic.type.block"==token.token.type&&updated.token.block==token.token.block?container[index]=updated:token.token&&token.token.output&&updateTokens(token.token.output,updated)})}function replaceParentFunc(inToken,parent){Twig.forEach(inToken.token.output,function(token,index,container){"output"==token.type&&token.stack.length>0&&"Twig.expression.type._function"==token.stack[0].type&&"parent"==token.stack[0].fn?container[index]={value:origBlocks.hasOwnProperty(parent.token.block)?origBlocks[parent.token.block]:"",type:"raw"}:token.token&&token.token.output&&(token.token&&token.token.block&&(parent=token),replaceParentFunc(token,parent))})}var withContext,i,template,file,result,origTokens,origBlocks,innerContext={},newBlockTokens=[],filteredOutput=[],tpmToken=JSON.parse(JSON.stringify(token));if(!tpmToken.only)for(i in context)context.hasOwnProperty(i)&&(innerContext[i]=context[i]);if(void 0!==tpmToken.withStack){withContext=Twig.expression.parse.apply(this,[tpmToken.withStack,context]);for(i in withContext)withContext.hasOwnProperty(i)&&(innerContext[i]=withContext[i])}return file=Twig.expression.parse.apply(this,[tpmToken.stack,innerContext]),template=file instanceof Twig.Template?file:this.importFile(file),Twig.parse.apply(template,[tpmToken.output,innerContext]),origTokens=JSON.parse(JSON.stringify(template.tokens)),template.render(innerContext),origBlocks=template.blocks,template.reset(),Twig.forEach(tpmToken.output,function(token){filterBlockTokens(token),"logic"==token.type&&"Twig.logic.type.set"==token.token.type||filteredOutput.push(token)}),Twig.forEach(newBlockTokens,function(token){replaceParentFunc(token,token),updateTokens(template.tokens,token)}),Twig.parse.apply(template,[filteredOutput,innerContext]),result={chain:chain,output:template.render(innerContext,{blocks:template.blocks})},template.tokens=origTokens,template.reset(),result}},{type:Twig.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],Twig.logic.handler={},Twig.logic.extendType=function(type,value){value=value||"Twig.logic.type"+type,Twig.logic.type[type]=value},Twig.logic.extend=function(definition){if(!definition.type)throw new Twig.Error("Unable to extend logic definition. No type provided for "+definition);Twig.logic.extendType(definition.type),Twig.logic.handler[definition.type]=definition};Twig.logic.definitions.length>0;)Twig.logic.extend(Twig.logic.definitions.shift());return Twig.logic.compile=function(raw_token){var expression=raw_token.value.trim(),token=Twig.logic.tokenize.apply(this,[expression]),token_template=Twig.logic.handler[token.type];return token_template.compile&&(token=token_template.compile.apply(this,[token]),Twig.log.trace("Twig.logic.compile: ","Compiled logic token to ",token)),token},Twig.logic.tokenize=function(expression){var token={},token_template_type=null,token_type=null,token_regex=null,regex_array=null,regex=null,match=null;expression=expression.trim();for(token_template_type in Twig.logic.handler)if(Twig.logic.handler.hasOwnProperty(token_template_type))for(token_type=Twig.logic.handler[token_template_type].type,token_regex=Twig.logic.handler[token_template_type].regex,regex_array=[],token_regex instanceof Array?regex_array=token_regex:regex_array.push(token_regex);regex_array.length>0;)if(regex=regex_array.shift(),null!==(match=regex.exec(expression.trim())))return token.type=token_type,token.match=match,Twig.log.trace("Twig.logic.tokenize: ","Matched a ",token_type," regular expression of ",match),token;throw new Twig.Error("Unable to parse '"+expression.trim()+"'")},Twig.logic.parse=function(token,context,chain){var token_template,output="";return context=context||{},Twig.log.debug("Twig.logic.parse: ","Parsing logic token ",token),token_template=Twig.logic.handler[token.type],token_template.parse&&(output=token_template.parse.apply(this,[token,context,chain])),output},Twig}(Twig||{}),Twig=function(Twig){"use strict";Twig.expression={},Twig.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context"],Twig.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},Twig.expression.set={operations:[Twig.expression.type.filter,Twig.expression.type.operator.unary,Twig.expression.type.operator.binary,Twig.expression.type.array.end,Twig.expression.type.object.end,Twig.expression.type.parameter.end,Twig.expression.type.comma,Twig.expression.type.test],expressions:[Twig.expression.type._function,Twig.expression.type.bool,Twig.expression.type.string,Twig.expression.type.variable,Twig.expression.type.number,Twig.expression.type._null,Twig.expression.type.context,Twig.expression.type.parameter.start,Twig.expression.type.array.start,Twig.expression.type.object.start]},Twig.expression.set.operations_extended=Twig.expression.set.operations.concat([Twig.expression.type.key.period,Twig.expression.type.key.brackets]),Twig.expression.fn={compile:{push:function(token,stack,output){output.push(token)},push_both:function(token,stack,output){output.push(token),stack.push(token)}},parse:{push:function(token,stack,context){stack.push(token)},push_value:function(token,stack,context){stack.push(token.value)}}},Twig.expression.definitions=[{type:Twig.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:Twig.expression.set.operations.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.filter=token.match[2],token.modifier=token.match[1],delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value=stack.pop(),params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),result=Twig.test(token.filter,value,params);"not"==token.modifier?stack.push(!result):stack.push(result)}},{type:Twig.expression.type.comma,regex:/^,/,next:Twig.expression.set.expressions.concat([Twig.expression.type.array.end,Twig.expression.type.object.end]),compile:function(token,stack,output){var stack_token,i=stack.length-1;for(delete token.match,delete token.value;i>=0;i--){if(stack_token=stack.pop(),stack_token.type===Twig.expression.type.object.start||stack_token.type===Twig.expression.type.parameter.start||stack_token.type===Twig.expression.type.array.start){stack.push(stack_token);break}output.push(stack_token)}output.push(token)}},{type:Twig.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.|^starts\s+with\s+|^ends\s+with\s+|^matches\s+)/,next:Twig.expression.set.expressions.concat([Twig.expression.type.operator.unary]),compile:function(token,stack,output){delete token.match,token.value=token.value.trim(),token.value=token.value.replace(/\s+/," ");var value=token.value,operator=Twig.expression.operator.lookup(value,token);for(Twig.log.trace("Twig.expression.compile: ","Operator: ",operator," from ",value);stack.length>0&&(stack[stack.length-1].type==Twig.expression.type.operator.unary||stack[stack.length-1].type==Twig.expression.type.operator.binary)&&(operator.associativity===Twig.expression.operator.leftToRight&&operator.precedence<=stack[stack.length-1].precedence||operator.associativity===Twig.expression.operator.rightToLeft&&operator.precedence<stack[stack.length-1].precedence);){var temp=stack.pop();output.push(temp)}if(":"===value){if(!stack[stack.length-1]||"?"!==stack[stack.length-1].value){var key_token=output.pop();if(key_token.type===Twig.expression.type.string||key_token.type===Twig.expression.type.variable||key_token.type===Twig.expression.type.number)token.key=key_token.value;else{if(key_token.type!==Twig.expression.type.parameter.end||!key_token.expression)throw new Twig.Error("Unexpected value before ':' of "+key_token.type+" = "+key_token.value);token.params=key_token.params}return void output.push(token)}}else stack.push(operator)},parse:function(token,stack,context){token.key?stack.push(token):token.params?(token.key=Twig.expression.parse.apply(this,[token.params,context]),stack.push(token),delete token.params):Twig.expression.operator.parse(token.value,stack)}},{type:Twig.expression.type.operator.unary,regex:/(^not\s+)/,next:Twig.expression.set.expressions,compile:function(token,stack,output){delete token.match,token.value=token.value.trim();var value=token.value,operator=Twig.expression.operator.lookup(value,token);for(Twig.log.trace("Twig.expression.compile: ","Operator: ",operator," from ",value);stack.length>0&&(stack[stack.length-1].type==Twig.expression.type.operator.unary||stack[stack.length-1].type==Twig.expression.type.operator.binary)&&(operator.associativity===Twig.expression.operator.leftToRight&&operator.precedence<=stack[stack.length-1].precedence||operator.associativity===Twig.expression.operator.rightToLeft&&operator.precedence<stack[stack.length-1].precedence);){var temp=stack.pop();output.push(temp)}stack.push(operator)},parse:function(token,stack,context){Twig.expression.operator.parse(token.value,stack)}},{type:Twig.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:Twig.expression.set.operations,compile:function(token,stack,output){var value=token.value;delete token.match,value='"'===value.substring(0,1)?value.replace('\\"','"'):value.replace("\\'","'"),token.value=value.substring(1,value.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),Twig.log.trace("Twig.expression.compile: ","String value: ",token.value),output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.parameter.start,regex:/^\(/,next:Twig.expression.set.expressions.concat([Twig.expression.type.parameter.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.parameter.end,regex:/^\)/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){var stack_token,end_token=token;for(stack_token=stack.pop();stack.length>0&&stack_token.type!=Twig.expression.type.parameter.start;)output.push(stack_token),stack_token=stack.pop();for(var param_stack=[];token.type!==Twig.expression.type.parameter.start;)param_stack.unshift(token),token=output.pop();param_stack.unshift(token);token=output[output.length-1],void 0===token||token.type!==Twig.expression.type._function&&token.type!==Twig.expression.type.filter&&token.type!==Twig.expression.type.test&&token.type!==Twig.expression.type.key.brackets&&token.type!==Twig.expression.type.key.period?(end_token.expression=!0,param_stack.pop(),param_stack.shift(),end_token.params=param_stack,output.push(end_token)):(end_token.expression=!1,token.params=param_stack)},parse:function(token,stack,context){var new_array=[],array_ended=!1,value=null;if(token.expression)value=Twig.expression.parse.apply(this,[token.params,context]),stack.push(value);else{for(;stack.length>0;){if((value=stack.pop())&&value.type&&value.type==Twig.expression.type.parameter.start){array_ended=!0;break}new_array.unshift(value)}if(!array_ended)throw new Twig.Error("Expected end of parameter set.");stack.push(new_array)}}},{type:Twig.expression.type.array.start,regex:/^\[/,next:Twig.expression.set.expressions.concat([Twig.expression.type.array.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.array.end,regex:/^\]/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){for(var stack_token,i=stack.length-1;i>=0&&(stack_token=stack.pop(),stack_token.type!==Twig.expression.type.array.start);i--)output.push(stack_token);output.push(token)},parse:function(token,stack,context){for(var new_array=[],array_ended=!1,value=null;stack.length>0;){if(value=stack.pop(),value.type&&value.type==Twig.expression.type.array.start){array_ended=!0;break}new_array.unshift(value)}if(!array_ended)throw new Twig.Error("Expected end of array.");stack.push(new_array)}},{type:Twig.expression.type.object.start,regex:/^\{/,next:Twig.expression.set.expressions.concat([Twig.expression.type.object.end]),compile:Twig.expression.fn.compile.push_both,parse:Twig.expression.fn.parse.push},{type:Twig.expression.type.object.end,regex:/^\}/,next:Twig.expression.set.operations_extended,compile:function(token,stack,output){for(var stack_token,i=stack.length-1;i>=0&&(!(stack_token=stack.pop())||stack_token.type!==Twig.expression.type.object.start);i--)output.push(stack_token);output.push(token)},parse:function(end_token,stack,context){for(var new_object={},object_ended=!1,token=null,has_value=!1,value=null;stack.length>0;){if((token=stack.pop())&&token.type&&token.type===Twig.expression.type.object.start){object_ended=!0;break}if(token&&token.type&&(token.type===Twig.expression.type.operator.binary||token.type===Twig.expression.type.operator.unary)&&token.key){if(!has_value)throw new Twig.Error("Missing value for key '"+token.key+"' in object definition.");new_object[token.key]=value,void 0===new_object._keys&&(new_object._keys=[]),new_object._keys.unshift(token.key),value=null,has_value=!1}else has_value=!0,value=token}if(!object_ended)throw new Twig.Error("Unexpected end of object.");stack.push(new_object)}},{type:Twig.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.value=token.match[1],output.push(token)},parse:function(token,stack,context){var input=stack.pop(),params=token.params&&Twig.expression.parse.apply(this,[token.params,context]);stack.push(Twig.filter.apply(this,[token.value,input,params]))}},{type:Twig.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:Twig.expression.type.parameter.start,transform:function(match,tokens){return"("},compile:function(token,stack,output){var fn=token.match[1];token.fn=fn,delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),fn=token.fn;if(Twig.functions[fn])value=Twig.functions[fn].apply(this,params);else{if("function"!=typeof context[fn])throw new Twig.Error(fn+" function does not exist and is not defined in the context");value=context[fn].apply(context,params)}stack.push(value)}},{type:Twig.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:Twig.expression.fn.compile.push,validate:function(match,tokens){return Twig.indexOf(Twig.expression.reservedWords,match[0])<0},parse:function(token,stack,context){var value=Twig.expression.resolve(context[token.value],context);stack.push(value)}},{type:Twig.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){token.key=token.match[1],delete token.match,delete token.value,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),key=token.key,object=stack.pop();if(null===object||void 0===object){if(this.options.strict_variables)throw new Twig.Error("Can't access a key "+key+" on an null or undefined object.");return null}var capitalize=function(value){return value.substr(0,1).toUpperCase()+value.substr(1)};value="object"==typeof object&&key in object?object[key]:void 0!==object["get"+capitalize(key)]?object["get"+capitalize(key)]:void 0!==object["is"+capitalize(key)]?object["is"+capitalize(key)]:null,stack.push(Twig.expression.resolve(value,object,params))}},{type:Twig.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:function(token,stack,output){var match=token.match[1];delete token.value,delete token.match,token.stack=Twig.expression.compile({value:match}).stack,output.push(token)},parse:function(token,stack,context){var value,params=token.params&&Twig.expression.parse.apply(this,[token.params,context]),key=Twig.expression.parse.apply(this,[token.stack,context]),object=stack.pop();if(null===object||void 0===object){if(this.options.strict_variables)throw new Twig.Error("Can't access a key "+key+" on an null or undefined object.");return null}value="object"==typeof object&&key in object?object[key]:null,stack.push(Twig.expression.resolve(value,object,params))}},{type:Twig.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:Twig.expression.set.operations,compile:function(token,stack,output){delete token.match,token.value=null,output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.context,regex:/^_context/,next:Twig.expression.set.operations_extended.concat([Twig.expression.type.parameter.start]),compile:Twig.expression.fn.compile.push,parse:function(token,stack,context){stack.push(context)}},{type:Twig.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:Twig.expression.set.operations,compile:function(token,stack,output){token.value=Number(token.value),output.push(token)},parse:Twig.expression.fn.parse.push_value},{type:Twig.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:Twig.expression.set.operations,compile:function(token,stack,output){token.value="true"===token.match[0].toLowerCase(),delete token.match,output.push(token)},parse:Twig.expression.fn.parse.push_value}],Twig.expression.resolve=function(value,context,params){return"function"==typeof value?value.apply(context,params||[]):value},Twig.expression.handler={},Twig.expression.extendType=function(type){Twig.expression.type[type]="Twig.expression.type."+type},Twig.expression.extend=function(definition){if(!definition.type)throw new Twig.Error("Unable to extend logic definition. No type provided for "+definition);Twig.expression.handler[definition.type]=definition};for(;Twig.expression.definitions.length>0;)Twig.expression.extend(Twig.expression.definitions.shift());return Twig.expression.tokenize=function(expression){var type,regex,regex_array,token_next,match_found,match_function,tokens=[],exp_offset=0,next=null,invalid_matches=[];for(match_function=function(){var match=Array.prototype.slice.apply(arguments);match.pop(),match.pop();return Twig.log.trace("Twig.expression.tokenize","Matched a ",type," regular expression of ",match),next&&Twig.indexOf(next,type)<0?(invalid_matches.push(type+" cannot follow a "+tokens[tokens.length-1].type+" at template:"+exp_offset+" near '"+match[0].substring(0,20)+"...'"),match[0]):Twig.expression.handler[type].validate&&!Twig.expression.handler[type].validate(match,tokens)?match[0]:(invalid_matches=[],tokens.push({type:type,value:match[0],match:match}),match_found=!0,next=token_next,exp_offset+=match[0].length,Twig.expression.handler[type].transform?Twig.expression.handler[type].transform(match,tokens):"")},Twig.log.debug("Twig.expression.tokenize","Tokenizing expression ",expression);expression.length>0;){expression=expression.trim();for(type in Twig.expression.handler)if(Twig.expression.handler.hasOwnProperty(type)){for(token_next=Twig.expression.handler[type].next,regex=Twig.expression.handler[type].regex,regex_array=regex instanceof Array?regex:[regex],match_found=!1;regex_array.length>0;)regex=regex_array.pop(),expression=expression.replace(regex,match_function);if(match_found)break}if(!match_found)throw invalid_matches.length>0?new Twig.Error(invalid_matches.join(" OR ")):new Twig.Error("Unable to parse '"+expression+"' at template position"+exp_offset)}return Twig.log.trace("Twig.expression.tokenize","Tokenized to ",tokens),tokens},Twig.expression.compile=function(raw_token){var expression=raw_token.value,tokens=Twig.expression.tokenize(expression),token=null,output=[],stack=[],token_template=null;for(Twig.log.trace("Twig.expression.compile: ","Compiling ",expression);tokens.length>0;)token=tokens.shift(),token_template=Twig.expression.handler[token.type],Twig.log.trace("Twig.expression.compile: ","Compiling ",token),token_template.compile&&token_template.compile(token,stack,output),Twig.log.trace("Twig.expression.compile: ","Stack is",stack),Twig.log.trace("Twig.expression.compile: ","Output is",output);for(;stack.length>0;)output.push(stack.pop());return Twig.log.trace("Twig.expression.compile: ","Final output is",output),raw_token.stack=output,delete raw_token.value,raw_token},Twig.expression.parse=function(tokens,context){var that=this;tokens instanceof Array||(tokens=[tokens]);var stack=[],token_template=null;return Twig.forEach(tokens,function(token){token_template=Twig.expression.handler[token.type],token_template.parse&&token_template.parse.apply(that,[token,stack,context])}),stack.pop()},Twig}(Twig||{}),Twig=function(Twig){"use strict";Twig.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var containment=function(a,b){if(void 0!==b.indexOf)return a===b||""!==a&&b.indexOf(a)>-1;var el;for(el in b)if(b.hasOwnProperty(el)&&b[el]===a)return!0;return!1};return Twig.expression.operator.lookup=function(operator,token){switch(operator){case"..":token.precedence=25,token.associativity=Twig.expression.operator.leftToRight;break;case"not in":case"in":token.precedence=20,token.associativity=Twig.expression.operator.leftToRight;break;case",":token.precedence=18,token.associativity=Twig.expression.operator.leftToRight;break;case"?":case":":token.precedence=0,token.associativity=Twig.expression.operator.rightToLeft;break;case"starts with":case"ends with":case"matches":token.precedence=20,token.associativity=Twig.expression.operator.leftToRight;break;case"or":token.precedence=10,token.associativity=Twig.expression.operator.leftToRight;break;case"and":token.precedence=15,token.associativity=Twig.expression.operator.leftToRight;break;case"==":case"!=":case"<":case"<=":case">":case">=":token.precedence=20,token.associativity=Twig.expression.operator.leftToRight;break;case"~":token.precedence=40,token.associativity=Twig.expression.operator.leftToRight;break;case"+":case"-":token.precedence=30,token.associativity=Twig.expression.operator.leftToRight;break;case"**":token.precedence=200,token.associativity=Twig.expression.operator.rightToLeft;break;case"//":case"*":case"/":case"%":token.precedence=60,token.associativity=Twig.expression.operator.leftToRight;break;case"not":token.precedence=50,token.associativity=Twig.expression.operator.rightToLeft;break;default:throw new Twig.Error(operator+" is an unknown operator.")}return token.operator=operator,token},Twig.expression.operator.parse=function(operator,stack){Twig.log.trace("Twig.expression.operator.parse: ","Handling ",operator);var a,b,c;switch(operator){case":":break;case"?":c=stack.pop(),b=stack.pop(),a=stack.pop(),a?stack.push(b):stack.push(c);break;case"+":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a+b);break;case"-":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a-b);break;case"*":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a*b);break;case"/":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a/b);break;case"//":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(parseInt(a/b));break;case"%":b=parseFloat(stack.pop()),a=parseFloat(stack.pop()),stack.push(a%b);break;case"~":b=stack.pop(),a=stack.pop(),stack.push((null!=a?a.toString():"")+(null!=b?b.toString():""));break;case"not":case"!":stack.push(!stack.pop());break;case"<":b=stack.pop(),a=stack.pop(),stack.push(a<b);break;case"<=":b=stack.pop(),a=stack.pop(),stack.push(a<=b);break;case">":b=stack.pop(),a=stack.pop(),stack.push(a>b);break;case">=":b=stack.pop(),a=stack.pop(),stack.push(a>=b);break;case"===":b=stack.pop(),a=stack.pop(),stack.push(a===b);break;case"==":b=stack.pop(),a=stack.pop(),stack.push(a==b);break;case"!==":b=stack.pop(),a=stack.pop(),stack.push(a!==b);break;case"!=":b=stack.pop(),a=stack.pop(),stack.push(a!=b);break;case"or":b=stack.pop(),a=stack.pop(),stack.push(a||b);break;case"and":b=stack.pop(),a=stack.pop(),stack.push(a&&b);break;case"**":b=stack.pop(),a=stack.pop(),stack.push(Math.pow(a,b));break;case"not in":b=stack.pop(),a=stack.pop(),stack.push(!containment(a,b));break;case"in":b=stack.pop(),a=stack.pop(),stack.push(containment(a,b));break;case"..":b=stack.pop(),a=stack.pop(),stack.push(Twig.functions.range(a,b));break;case"starts with":b=stack.pop(),a=stack.pop(),stack.push(Twig.lib.is("String",a)&&Twig.lib.is("String",b)&&0===a.indexOf(b));break;case"ends with":b=stack.pop(),a=stack.pop(),stack.push(Twig.lib.is("String",a)&&Twig.lib.is("String",b)&&(""===b||a.substr(-b.length)===b));break;case"matches":b=stack.pop(),a=stack.pop(),null==a||0===a||!1===a?a="":!0===a&&(a="1");var delimiter=b[0],parts=b.split(delimiter),flags=parts.pop();parts.shift();var pattern=parts.join(delimiter);pattern=pattern.replace("\\"+delimiter,delimiter);var regexp=new RegExp(pattern,flags);stack.push(regexp.exec(a));break;default:throw new Twig.Error(operator+" is an unknown operator.")}},Twig}(Twig||{}),Twig=function(Twig){function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return void 0!==obj&&null!==obj&&clas===type}return Twig.filters={upper:function(value){return"string"!=typeof value?value:value.toUpperCase()},lower:function(value){return"string"!=typeof value?value:value.toLowerCase()},capitalize:function(value){return"string"!=typeof value?value:value.substr(0,1).toUpperCase()+value.toLowerCase().substr(1)},title:function(value){return"string"!=typeof value?value:value.toLowerCase().replace(/(^|\s)([a-z])/g,function(m,p1,p2){return p1+p2.toUpperCase()})},length:function(value){return Twig.lib.is("Array",value)||"string"==typeof value?value.length:Twig.lib.is("Object",value)?void 0===value._keys?Object.keys(value).length:value._keys.length:0},reverse:function(value){if(is("Array",value))return value.reverse();if(is("String",value))return value.split("").reverse().join("");if(is("Object",value)){var keys=value._keys||Object.keys(value).reverse();return value._keys=keys,value}},sort:function(value){if(is("Array",value))return value.sort();if(is("Object",value)){delete value._keys;var keys=Object.keys(value),sorted_keys=keys.sort(function(a,b){return value[a]>value[b]});return value._keys=sorted_keys,value}},keys:function(value){if(void 0!==value&&null!==value){var keyset=value._keys||Object.keys(value),output=[];return Twig.forEach(keyset,function(key){"_keys"!==key&&value.hasOwnProperty(key)&&output.push(key)}),output}},url_encode:function(value){if(void 0!==value&&null!==value)return encodeURIComponent(value)},join:function(value,params){if(void 0!==value&&null!==value){var join_str="",output=[],keyset=null;return params&&params[0]&&(join_str=params[0]),is("Array",value)?output=value:(keyset=value._keys||Object.keys(value),Twig.forEach(keyset,function(key){"_keys"!==key&&value.hasOwnProperty(key)&&output.push(value[key])})),output.join(join_str)}},default:function(value,params){if(void 0===params||1!==params.length)throw new Twig.Error("default filter expects one argument");return void 0===value||null===value||""===value?params[0]:value},json_encode:function(value){return value&&value.hasOwnProperty("_keys")&&delete value._keys,void 0===value||null===value?"null":JSON.stringify(value)},merge:function(value,params){var obj=[],arr_index=0,keyset=[];if(is("Array",value)?Twig.forEach(params,function(param){is("Array",param)||(obj={})}):obj={},is("Array",obj)||(obj._keys=[]),is("Array",value)?Twig.forEach(value,function(val){obj._keys&&obj._keys.push(arr_index),obj[arr_index]=val,arr_index++}):(keyset=value._keys||Object.keys(value),Twig.forEach(keyset,function(key){obj[key]=value[key],obj._keys.push(key);var int_key=parseInt(key,10);!isNaN(int_key)&&int_key>=arr_index&&(arr_index=int_key+1)})),Twig.forEach(params,function(param){is("Array",param)?Twig.forEach(param,function(val){obj._keys&&obj._keys.push(arr_index),obj[arr_index]=val,arr_index++}):(keyset=param._keys||Object.keys(param),Twig.forEach(keyset,function(key){obj[key]||obj._keys.push(key),obj[key]=param[key];var int_key=parseInt(key,10);!isNaN(int_key)&&int_key>=arr_index&&(arr_index=int_key+1)}))}),0===params.length)throw new Twig.Error("Filter merge expects at least one parameter");return obj},date:function(value,params){var date=Twig.functions.date(value),format=params&&params.length?params[0]:"F j, Y H:i";return Twig.lib.formatDate(date,format)},date_modify:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||1!==params.length)throw new Twig.Error("date_modify filter expects 1 argument");var time,modifyText=params[0];return Twig.lib.is("Date",value)&&(time=Twig.lib.strtotime(modifyText,value.getTime()/1e3)),Twig.lib.is("String",value)&&(time=Twig.lib.strtotime(modifyText,Twig.lib.strtotime(value))),Twig.lib.is("Number",value)&&(time=Twig.lib.strtotime(modifyText,value)),new Date(1e3*time)}},replace:function(value,params){if(void 0!==value&&null!==value){var tag,pairs=params[0];for(tag in pairs)pairs.hasOwnProperty(tag)&&"_keys"!==tag&&(value=Twig.lib.replaceAll(value,tag,pairs[tag]));return value}},format:function(value,params){if(void 0!==value&&null!==value)return Twig.lib.vsprintf(value,params)},striptags:function(value){if(void 0!==value&&null!==value)return Twig.lib.strip_tags(value)},escape:function(value){if(void 0!==value&&null!==value){var raw_value=value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return Twig.Markup(raw_value)}},e:function(value){return Twig.filters.escape(value)},nl2br:function(value){if(void 0!==value&&null!==value){var linebreak_tag="BACKSLASH_n_replace",br="<br />"+linebreak_tag;return value=Twig.filters.escape(value).replace(/\r\n/g,br).replace(/\r/g,br).replace(/\n/g,br),value=Twig.lib.replaceAll(value,linebreak_tag,"\n"),Twig.Markup(value)}},number_format:function(value,params){var number=value,decimals=params&&params[0]?params[0]:void 0,dec=params&&void 0!==params[1]?params[1]:".",sep=params&&void 0!==params[2]?params[2]:",";number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):0,s="",toFixedFix=function(n,prec){var k=Math.pow(10,prec);return""+Math.round(n*k)/k};return s=(prec?toFixedFix(n,prec):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec)},trim:function(value,params){if(void 0!==value&&null!==value){var whitespace,str=Twig.filters.escape(""+value);whitespace=params&&params[0]?""+params[0]:" \n\r\t\f\v            ​\u2028\u2029　";for(var i=0;i<str.length;i++)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(i);break}for(i=str.length-1;i>=0;i--)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(0,i+1);break}return-1===whitespace.indexOf(str.charAt(0))?str:""}},truncate:function(value,params){var length=30,preserve=!1,separator="...";if(value+="",params&&(params[0]&&(length=params[0]),params[1]&&(preserve=params[1]),params[2]&&(separator=params[2])),value.length>length){if(preserve&&-1===(length=value.indexOf(" ",length)))return value;value=value.substr(0,length)+separator}return value},slice:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||params.length<1)throw new Twig.Error("slice filter expects at least 1 argument");var start=params[0]||0,length=params.length>1?params[1]:value.length,startIndex=start>=0?start:Math.max(value.length+start,0);if(Twig.lib.is("Array",value)){for(var output=[],i=startIndex;i<startIndex+length&&i<value.length;i++)output.push(value[i]);return output}if(Twig.lib.is("String",value))return value.substr(startIndex,length);throw new Twig.Error("slice filter expects value to be an array or string")}},abs:function(value){if(void 0!==value&&null!==value)return Math.abs(value)},first:function(value){if(is("Array",value))return value[0];if(is("Object",value)){if("_keys"in value)return value[value._keys[0]]}else if("string"==typeof value)return value.substr(0,1)},split:function(value,params){if(void 0!==value&&null!==value){if(void 0===params||params.length<1||params.length>2)throw new Twig.Error("split filter expects 1 or 2 argument");if(Twig.lib.is("String",value)){var delimiter=params[0],limit=params[1],split=value.split(delimiter);if(void 0===limit)return split;if(limit<0)return value.split(delimiter,split.length+limit);var limitedSplit=[];if(""==delimiter)for(;split.length>0;){for(var temp="",i=0;i<limit&&split.length>0;i++)temp+=split.shift();limitedSplit.push(temp)}else{for(var i=0;i<limit-1&&split.length>0;i++)limitedSplit.push(split.shift());split.length>0&&limitedSplit.push(split.join(delimiter))}return limitedSplit}throw new Twig.Error("split filter expects value to be a string")}},last:function(value){if(Twig.lib.is("Object",value)){var keys;return keys=void 0===value._keys?Object.keys(value):value._keys,value[keys[keys.length-1]]}return value[value.length-1]},raw:function(value){return Twig.Markup(value)},batch:function(items,params){var result,last,missing,size=params.shift(),fill=params.shift();if(!Twig.lib.is("Array",items))throw new Twig.Error("batch filter expects items to be an array");if(!Twig.lib.is("Number",size))throw new Twig.Error("batch filter expects size to be a number");if(size=Math.ceil(size),result=Twig.lib.chunkArray(items,size),fill&&items.length%size!=0){for(last=result.pop(),missing=size-last.length;missing--;)last.push(fill);result.push(last)}return result},round:function(value,params){params=params||[];var precision=params.length>0?params[0]:0,method=params.length>1?params[1]:"common";if(value=parseFloat(value),precision&&!Twig.lib.is("Number",precision))throw new Twig.Error("round filter expects precision to be a number");if("common"===method)return Twig.lib.round(value,precision);if(!Twig.lib.is("Function",Math[method]))throw new Twig.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[method](value*Math.pow(10,precision))/Math.pow(10,precision)}},Twig.filter=function(filter,value,params){if(!Twig.filters[filter])throw"Unable to find filter "+filter;return Twig.filters[filter].apply(this,[value,params])},Twig.filter.extend=function(filter,definition){Twig.filters[filter]=definition},Twig}(Twig||{}),Twig=function(Twig){return Twig.functions={range:function(low,high,step){var inival,endval,matrix=[],walker=step||1,chars=!1;if(isNaN(low)||isNaN(high)?isNaN(low)&&isNaN(high)?(chars=!0,inival=low.charCodeAt(0),endval=high.charCodeAt(0)):(inival=isNaN(low)?0:low,endval=isNaN(high)?0:high):(inival=parseInt(low,10),endval=parseInt(high,10)),!(inival>endval))for(;inival<=endval;)matrix.push(chars?String.fromCharCode(inival):inival),inival+=walker;else for(;inival>=endval;)matrix.push(chars?String.fromCharCode(inival):inival),inival-=walker;return matrix},cycle:function(arr,i){return arr[i%arr.length]},dump:function(){var EOL="\n",indentChar="  ",indentTimes=0,out="",args=Array.prototype.slice.call(arguments),indent=function(times){for(var ind="";times>0;)times--,ind+=indentChar;return ind},displayVar=function(variable){out+=indent(indentTimes),"object"==typeof variable?dumpVar(variable):"function"==typeof variable?out+="function()"+EOL:"string"==typeof variable?out+="string("+variable.length+') "'+variable+'"'+EOL:"number"==typeof variable?out+="number("+variable+")"+EOL:"boolean"==typeof variable&&(out+="bool("+variable+")"+EOL)},dumpVar=function(variable){var i;if(null===variable)out+="NULL"+EOL;else if(void 0===variable)out+="undefined"+EOL;else if("object"==typeof variable){out+=indent(indentTimes)+typeof variable,indentTimes++,out+="("+function(obj){var key,size=0;for(key in obj)obj.hasOwnProperty(key)&&size++;return size}(variable)+") {"+EOL;for(i in variable)out+=indent(indentTimes)+"["+i+"]=> "+EOL,displayVar(variable[i]);indentTimes--,out+=indent(indentTimes)+"}"+EOL}else displayVar(variable)};return 0==args.length&&args.push(this.context),Twig.forEach(args,function(variable){dumpVar(variable)}),out},date:function(date,time){var dateObj;if(void 0===date)dateObj=new Date;else if(Twig.lib.is("Date",date))dateObj=date;else if(Twig.lib.is("String",date))dateObj=new Date(1e3*Twig.lib.strtotime(date));else{if(!Twig.lib.is("Number",date))throw new Twig.Error("Unable to parse date "+date);dateObj=new Date(1e3*date)}return dateObj},block:function(block){return this.blocks[block]},parent:function(){return Twig.placeholders.parent},attribute:function(object,method,params){return Twig.lib.is("Object",object)&&object.hasOwnProperty(method)?"function"==typeof object[method]?object[method].apply(void 0,params):object[method]:object[method]||void 0},max:function(values){return Twig.lib.is("Object",values)?(delete values._keys,Twig.lib.max(values)):Twig.lib.max.apply(null,arguments)},min:function(values){return Twig.lib.is("Object",values)?(delete values._keys,Twig.lib.min(values)):Twig.lib.min.apply(null,arguments)},template_from_string:function(template){return void 0===template&&(template=""),new Twig.Template({options:this.options,data:template})},random:function(value){function getRandomNumber(n){var random=Math.floor(Math.random()*LIMIT_INT31),limits=[0,n],min=Math.min.apply(null,limits),max=Math.max.apply(null,limits);return min+Math.floor((max-min+1)*random/LIMIT_INT31)}var LIMIT_INT31=2147483648;if(Twig.lib.is("Number",value))return getRandomNumber(value);if(Twig.lib.is("String",value))return value.charAt(getRandomNumber(value.length-1));if(Twig.lib.is("Array",value))return value[getRandomNumber(value.length-1)];if(Twig.lib.is("Object",value)){var keys=Object.keys(value);return value[keys[getRandomNumber(keys.length-1)]]}return getRandomNumber(LIMIT_INT31-1)}},Twig._function=function(_function,value,params){if(!Twig.functions[_function])throw"Unable to find function "+_function;return Twig.functions[_function](value,params)},Twig._function.extend=function(_function,definition){Twig.functions[_function]=definition},Twig}(Twig||{}),Twig=function(Twig){"use strict";return Twig.tests={empty:function(value){if(null===value||void 0===value)return!0;if("number"==typeof value)return!1;if(value.length&&value.length>0)return!1;for(var key in value)if(value.hasOwnProperty(key))return!1;return!0},odd:function(value){return value%2==1},even:function(value){return value%2==0},divisibleby:function(value,params){return value%params[0]==0},defined:function(value){return void 0!==value},none:function(value){return null===value},null:function(value){return this.none(value)},sameas:function(value,params){return value===params[0]},iterable:function(value){return value&&(Twig.lib.is("Array",value)||Twig.lib.is("Object",value))}},Twig.test=function(test,value,params){if(!Twig.tests[test])throw"Test "+test+" is not defined.";return Twig.tests[test](value,params)},Twig.test.extend=function(test,definition){Twig.tests[test]=definition},Twig}(Twig||{}),Twig=function(Twig){"use strict";return Twig.exports={VERSION:Twig.VERSION},Twig.exports.twig=function(params){var id=params.id,options={strict_variables:params.strict_variables||!1,autoescape:null!=params.autoescape&&params.autoescape||!1,allowInlineIncludes:params.allowInlineIncludes||!1,rethrow:params.rethrow||!1};if(id&&Twig.validateId(id),void 0!==params.debug&&(Twig.debug=params.debug),void 0!==params.trace&&(Twig.trace=params.trace),void 0!==params.data)return new Twig.Template({data:params.data,module:params.module,id:id,options:options});if(void 0!==params.ref){if(void 0!==params.id)throw new Twig.Error("Both ref and id cannot be set on a twig.js template.");return Twig.Templates.load(params.ref)}return void 0!==params.href?Twig.Templates.loadRemote(params.href,{id:id,method:"ajax",base:params.base,module:params.module,precompiled:params.precompiled,async:params.async,options:options},params.load,params.error):void 0!==params.path?Twig.Templates.loadRemote(params.path,{id:id,method:"fs",base:params.base,module:params.module,precompiled:params.precompiled,async:params.async,options:options},params.load,params.error):void 0},Twig.exports.extendFilter=function(filter,definition){Twig.filter.extend(filter,definition)},Twig.exports.extendFunction=function(fn,definition){Twig._function.extend(fn,definition)},Twig.exports.extendTest=function(test,definition){Twig.test.extend(test,definition)},Twig.exports.extendTag=function(definition){Twig.logic.extend(definition)},Twig.exports.extend=function(fn){fn(Twig)},Twig.exports.compile=function(markup,options){var template,id=options.filename,path=options.filename;return template=new Twig.Template({data:markup,path:path,id:id,options:options.settings["twig options"]}),function(context){return template.render(context)}},Twig.exports.renderFile=function(path,options,fn){"function"==typeof options&&(fn=options,options={}),options=options||{};var params={path:path,base:options.settings.views,load:function(template){fn(null,template.render(options))}},view_options=options.settings["twig options"];if(view_options)for(var option in view_options)view_options.hasOwnProperty(option)&&(params[option]=view_options[option]);Twig.exports.twig(params)},Twig.exports.__express=Twig.exports.renderFile,Twig.exports.cache=function(cache){Twig.cache=cache},Twig}(Twig||{}),Twig=function(Twig){return Twig.compiler={module:{}},Twig.compiler.compile=function(template,options){var output,tokens=JSON.stringify(template.tokens),id=template.id;if(options.module){if(void 0===Twig.compiler.module[options.module])throw new Twig.Error("Unable to find module type "+options.module);output=Twig.compiler.module[options.module](id,tokens,options.twig)}else output=Twig.compiler.wrap(id,tokens);return output},Twig.compiler.module={amd:function(id,tokens,pathToTwig){return'define(["'+pathToTwig+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+Twig.compiler.wrap(id,tokens)+"\n\treturn templates;\n});"},node:function(id,tokens){return'var twig = require("twig").twig;\nexports.template = '+Twig.compiler.wrap(id,tokens)},cjs2:function(id,tokens,pathToTwig){return'module.declare([{ twig: "'+pathToTwig+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+Twig.compiler.wrap(id,tokens)+"\n});"}},Twig.compiler.wrap=function(id,tokens){return'twig({id:"'+id.replace('"','\\"')+'", data:'+tokens+", precompiled: true});\n"},Twig}(Twig||{});"undefined"!=typeof module&&module.declare?module.declare([],function(require,exports,module){for(key in Twig.exports)Twig.exports.hasOwnProperty(key)&&(exports[key]=Twig.exports[key])}):"function"==typeof define&&define.amd?define("twig",function(){return Twig.exports}):"undefined"!=typeof module&&module.exports?module.exports=Twig.exports:(window.twig=Twig.exports.twig,window.Twig=Twig.exports),function(b,f,e){function a(a,d){function h(a){b(c).each(function(){var c=b(this);this!==a.target&&!c.has(a.target).length&&c.triggerHandler(d,[a.target])})}d=d||a+e;var c=b(),g=a+"."+d+"-special-event";b.event.special[d]={setup:function(){c=c.add(this),1===c.length&&b(f).on(g,h)},teardown:function(){c=c.not(this),0===c.length&&b(f).off(g)},add:function(a){var c=a.handler;a.handler=function(a,b){a.target=b,c.apply(this,arguments)}}}}b.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(b){a(b)}),a("focusin","focus"+e),a("focusout","blur"+e),b.addOutsideEvent=a}(jQuery,document,"outside"),function(){var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Object.subClass=function(){}