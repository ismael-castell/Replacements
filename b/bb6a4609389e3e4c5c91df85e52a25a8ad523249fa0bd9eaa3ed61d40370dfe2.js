import{E as e,a as t,P as n,S as r,b as i,c as o,d as a}from"./player-adapter-interface-39c22c9d.js";import{c as s,g as l,a as c}from"./_commonjsHelpers-0f86abda.js";import{r as u}from"./index-21829797.js";class d extends e{destroy(){this.removeAllListeners()}setAutoplay(e){this._autoplay=e}setMinVisibility(e){this._minVisibility=Number(e)||0}setBackgroundPlayback(e){this._allowBackgroundPlayback=e}handleAutoplay(){this._autoplay&&(this._currentVisibility>=this._minVisibility||this._minVisibility<=0?this.emit("play",{origin:"autoplay",initial:this._pausedBy||"autoplay"}):this._pausedBy="autoplay")}activate(){this._isActive=!0}deactivate(){this._isActive=!1}validate(){this._onVisibilityChange()}setPlayedByUser(){this._pausedBy=""}setPausedByUser(){this._pausedBy="user"}setPlayedByExternalApi(){this._pausedBy=""}setPausedByExternalApi(){this._pausedBy="external-api"}setVisibility(e){this._currentVisibility!==e&&(this._currentVisibility=e,this._onVisibilityChange())}_onVisibilityChange(){-1!==this._currentVisibility&&(this._currentVisibility>=this._minVisibility?this._play("visibility"):this._pause("visibility"),0===this._currentVisibility&&(this._fireVisibilityChange=!0))}_play(e){e&&(this._isActive||"autoplay"===this._pausedBy)&&(""!==this._pausedBy&&this._pausedBy!==e&&"autoplay"!==this._pausedBy||(this.emit("play",{origin:e,initial:e}),this._playedOnce=!0,this._pausedBy=""))}_pause(e){this._allowBackgroundPlayback&&this._playedOnce&&"visibility"===e||e&&this._isActive&&(""===this._pausedBy&&(this._pausedBy=e),this.emit("pause",{origin:e,initial:this._pausedBy}))}constructor(){super(),this._autoplay=!1,this._minVisibility=0,this._allowBackgroundPlayback=!1,this._playedOnce=!1,this._currentVisibility=-1,this._pausedBy="",this._isActive=!1,this._fireVisibilityChange=!0}}class p{setup(...e){return this._bootstrap.setup(...e)}destroy(){this._documentHiddenObserver.disconnect(),this._visbilityObserver.disconnect()}_setVisibility(e,{scrollDown:t}={}){this._bootstrap.setVisibility(e,{scrollDown:t})}_onPlaybackHandlerPlay(){this._bootstrap.play()}_onPlaybackHandlerPause(){this._bootstrap.pause({byExternalApi:!1})}_connectPlaybackHandler(){this._bootstrap.playbackHandler.on("play",(()=>{this._onPlaybackHandlerPlay()})),this._bootstrap.playbackHandler.on("pause",(()=>{this._onPlaybackHandlerPause()}))}constructor({window:e,bootstrap:t,documentHidden:n,visibilityObserver:r}){this._bootstrap=t,this._connectPlaybackHandler(),this._documentHiddenObserver=n({window:e},(({hidden:e})=>{t.setDocumentHidden(e)})),this._visbilityObserver=r((e=>{this._setVisibility(e.ceiledIntersectionRatio,{scrollDown:e.scrollDown})}))}}const h="allowed",m="allowed-muted";function f(e,{browserType:t,muted:n=!0}){const r=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"}),i=e.document.createElement("video");if(n&&i.setAttribute("muted",""),i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.setAttribute("height","0"),i.setAttribute("width","0"),i.muted=n,i.playsinline=!0,i.webkitPlaysinline=!0,i.src=e.URL.createObjectURL(r),"ios"===t&&!1===n)return Promise.resolve(!1);if("ios"===t||"safari_desktop"===t||"firefox"===t){const e=new Promise((e=>e(i.play()))).then((()=>!0)).catch((()=>!1)),t=new Promise((e=>{setTimeout((()=>{e(!1)}),2e3)}));return Promise.race([e,t])}return new Promise((e=>e(i.play()))).catch((()=>{})),Promise.resolve(!i.paused)}const y=e=>{if("string"!=typeof e)throw new Error("Argument must be a string");const t=e.replace(/^\?/,""),n={};return t.split("&").forEach((e=>{const[t,r]=e.split("=");n[t]=decodeURIComponent(r)})),n};const g=(e,{ignoreEmptyFields:t=!1}={})=>{if("object"!=typeof e)throw new Error("Argument must be an object");return Object.keys(e).filter((n=>!t||null!=e[n])).map((t=>{let n;return n=0===e[t]||"boolean"==typeof e[t]?JSON.stringify(e[t]):e[t]||"",`${t}=${r=n,encodeURIComponent(r).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape)}`;var r})).join("&")};function _(e){let t=e,n="";do{try{t.parent.document&&(t=t.parent)}catch(e){break}}while(t!==e.top);if(t===t.top)n=t.location.href;else if(null!=t.document.referrer){const r=function(e){let t;try{if(t=e.location.ancestorOrigins,!t)return;return t.item(t.length-1)}catch(e){}}(t);n=t.document.referrer,!function(e,t){try{const n=new t.URL(e);return Boolean(b.find((e=>n.hostname&&n.hostname.indexOf(e)>0&&n.hostname.indexOf(e)===n.hostname.length-e.length)))}catch(e){return!1}}(n,e)&&r&&0!==n.indexOf(r)&&(n=r)}const r=t.location.href.indexOf("#amp=1");n&&"null"!==n||(n="about:blank"),n=function(e,t){let n=e;try{const r=new t.URL(e);b.forEach((e=>{const{host:t,pathname:i,search:o}=r;if(t&&t.indexOf(e)>0&&t.indexOf(e)===t.length-e.length){const r=i.match(/^\/[c|v]\/s\//),a=i.replace(/^\/[c|v](\/s){0,1}\//,"");if(n=`${r?"https":"http"}://${a}${o}`,""===a||"/"===a){const r=t.replace(e,"").replace(/-{2}/g,"DASHCHAR").replace(/-{1}/g,"DOTCHAR").replace(/DASHCHAR/g,"-").replace(/DOTCHAR/g,".");n=`https://${r}/${o}`}return n}}))}catch(e){}return n}(n,e);const i=function(e){let t={};try{t=JSON.parse(e.name)}catch(e){}return t}(t),o=function(e){if(e)return{...y(e)};return{}}(t.location&&t.location.search);i.pageUrl&&0===i.pageUrl.indexOf(n)?n=i.pageUrl:o.pageUrl&&0===o.pageUrl.indexOf(n)?n=o.pageUrl:i.canonicalUrl&&r?n=i.canonicalUrl:i.sourceUrl&&r?n=i.sourceUrl:t.context&&t.context.sourceUrl&&(n=t.context.sourceUrl);let a=n;return i.sourceUrl&&r&&(a=i.sourceUrl),{referrer:a.split("#")[0],pageUrl:n.split("#")[0],window:t}}const b=[".cdn.ampproject.org",".amp.cloudflare.com",".bing-amp.com"];var v={init:({actionCreators:e})=>({externalSetupConfig:t,externalPageEnvironment:n}={})=>(r,i,{global:o,getAbSlot:a})=>{const{pageStartTime:s,pageSessionId:l,publisherContext:c,variantId:u,placement:d,top:p,left:h,queryProps:m,renderMode:f,otherIntegrations:y,ab:g,cpm:b,presentationMode:v,supportedPresentationModes:P}=n||w(o.name),{pageUrl:N,referrer:O,window:k}=_(o),L=new o.URL(N),R=E(new o.URL(O)),M=L.origin,U=function(e,t){const n=/[^.]*\.[^.]{2,10}(?:\.[^.]{2,10})?$/g,r=/[^.]*\.[^.]{2,10}(?:\.[^.])?$/g,i=[".co.at",".or.at",".priv.at",".ac.at",".gov.ua",".com.ua",".in.ua",".org.ua",".net.ua",".edu.ua",".ac.uk",".co.uk",".gov.uk",".jcpc.uk",".judiciary.uk ",".ltd.uk",".me.uk",".mod.uk",".mil.uk",".net.uk",".nhs.uk",".nic.uk",".org.uk",".plc.uk",".police.uk",".royal.uk",".sch.uk",".supremecourt.uk"];try{const{hostname:o}=new t(decodeURIComponent(e));let a=!1;new RegExp(i.join("|")).test(o)&&(a=!0);const s=o.match(a?n:r);return s?s.join(""):o}catch(e){return"unknown"}}(N,o.URL),D=(o.document.querySelector("base")||{}).href,B=D?new o.URL(D):void 0,V=t||m||E(B||o.location);V.playerId&&!V.integrationId&&(V.integrationId=V.playerId,delete V.playerId);const j=function(e){return(e.navigator.language||e.navigator.userLanguage||"en").toLowerCase().split("-")[0]}(o),F=Number(R.glomexAbSlot)||a(),H=function({topMostWindow:e,currentWindow:t},n={}){const r=e&&e.context&&e.context.noContentAvailable,i=e.location.href.indexOf("#amp=1")>-1,o=w(e.name),a=i&&(o.canonicalUrl||o.sourceUrl);if(e.navigator.userAgent.indexOf("FBIA/FB4A;FBAV")>-1||e.navigator.userAgent.indexOf(";FBIA/FBIOS]")>-1)return"iframe-facebook-ia";if(r)return"glomex-script"===n.origin?"amp-ad-glomex-script":"amp-ad";if(a)return"amp-video-iframe";if(i)return"glomex-player"===n.origin?"amp-glomex-player":"glomex-integration"===n.origin?"amp-glomex-integration":"amp";if(t===t.top&&S(t))return"fullpage";return n.origin||"iframe"}({topMostWindow:k,currentWindow:o},V);r(e.environment.create({origin:H,renderMode:f||"iframe",pageUrl:N,pageOrigin:M,pageUrlProps:R,setupConfig:V,iframeStartTime:I(o),isInReloadableIframe:S(o),pageStartTime:s,pageSessionId:l,variantId:u,placement:d,cpm:b,publisherContext:c,pageSecondLevelDomain:U,pageHostname:C(N,o.URL),integrationVersion:o.GLOMEX_IFRAME_PLAYER_VERSION||"unknown",referrer:k.document.referrer,abSlot:F,top:p,left:h,browserType:A(o),device:x(o)?"mobile":"desktop",connection:T(o),language:j,otherIntegrations:y,externalAbDetected:g,presentationMode:v||"inline",supportedPresentationModes:P||("amp-video-iframe"===H?["inline","amp-dock"]:["inline"])}))}};function E(e){return e&&e.search?{...y(e.search)}:{}}function w(e){let t={};try{t=JSON.parse(e)}catch(e){}return t}function I(e){return e.performance&&e.performance.timing&&e.performance.timing.requestStart}function x(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Opera Mini/i.test(e.navigator.userAgent)}function T(e){if(!e.navigator.connection)return{downlink:-1,effectiveType:"unknown",rtt:-1,type:"unknown"};const{downlink:t,effectiveType:n,rtt:r,type:i}=e.navigator.connection;return{downlink:t,effectiveType:n,rtt:r,type:i||"unknown"}}function A(e){const t=e.navigator.userAgent;if(/MSIE/.test(t)||/Trident\//.test(t))return"ie";if(/ Edge/.test(t))return"edge";if(/iPad|iPhone|iPod/.test(t))return/Safari/i.test(t)?"ios":"ios-webview";if(/Chrome/.test(t))return"chrome";return/^((?!chrome|android).)*safari/i.test(t)?"safari_desktop":/Firefox/.test(t)?"firefox":void 0}function C(e,t){try{const{hostname:n}=new t(decodeURIComponent(e));return n}catch(e){return"unknown"}}function S(e){return!!e.location.pathname.match(/iframe-player\.html$/)}const P=({device:e,browserConnection:t,backendConnection:n,startBehavior:r,autoplayPolicy:i,origin:o,preventCellularAutoplay:a,supportedPresentationModes:s=[],stickyEnabled:l=!1})=>{const c=function({device:e,browserConnection:t,backendConnection:n}){return"mobile"===e&&("cellular"===t.type||"cellular"===n)}({device:e,browserConnection:t,backendConnection:n}),u=function({startBehavior:e,autoplayPolicy:t,origin:n,isCellularConnection:r,preventCellularAutoplay:i,supportedPresentationModes:o=[]}){if("disallowed"===t)return"click-to-play";const a={"click-to-play":{[h]:"click-to-play",[m]:"click-to-play"},"scroll-to-play":{[h]:"scroll-to-play",[m]:"click-to-play"},"silent-scroll-to-play":{[h]:"silent-scroll-to-play",[m]:"silent-scroll-to-play"},"scroll-to-play-with-silent-fallback":{[h]:"scroll-to-play",[m]:"silent-scroll-to-play"},"scroll-to-play-with-out-to-play-fallback":{[h]:"scroll-to-play",[m]:"scroll-out-to-play"},"scroll-out-to-play":{[h]:"scroll-out-to-play",[m]:"scroll-out-to-play"},"silent-scroll-to-play-when-ad":{[h]:"silent-scroll-to-play",[m]:"silent-scroll-to-play"},"scroll-out-to-play-when-ad":{[h]:"scroll-out-to-play",[m]:"scroll-out-to-play"},"scroll-to-play-when-ad":{[h]:"scroll-to-play",[m]:"click-to-play"}};if("iframe-facebook-ia"===n||"content-plugin"===n||i&&r)return"click-to-play";if(-1===o.indexOf("dock")&&-1===o.indexOf("amp-dock")&&("scroll-out-to-play"===e||"scroll-out-to-play-when-ad"===e))return"silent-scroll-to-play";return a[e][t]}({startBehavior:r,autoplayPolicy:i,origin:o,isCellularConnection:c,preventCellularAutoplay:a,supportedPresentationModes:s}),d=function(e,t){return!("silent-scroll-to-play-when-ad"!==e&&"scroll-out-to-play-when-ad"!==e&&"scroll-to-play-when-ad"!==e||"silent-scroll-to-play"!==t&&"scroll-out-to-play"!==t&&"scroll-to-play"!==t)}(r,u);return{startBehavior:u,dockEnabled:N(u,s,l),shouldAutoplay:O(u),preloadAds:k(u,d),shouldMute:L(u,d),autoplayWhenAd:d,isCellular:c}};function N(e,t,n){return(-1!==t.indexOf("dock")||-1!==t.indexOf("amp-dock"))&&("scroll-out-to-play"===e||n)}function O(e){return"click-to-play"!==e&&"scroll-out-to-play"!==e}function k(e,t){return t||"click-to-play"!==e&&"scroll-out-to-play"!==e}function L(e,t){return"silent-scroll-to-play"===e||"scroll-out-to-play"===e&&t}const R={SHOULD_PLAY:"shouldplay"};class M extends p{activate(){this._bootstrap.activate()}setup(...e){return Promise.all([this._onConnectPromise,this._bootstrap.setup(...e)]).catch((()=>{}))}reset(){this._bootstrap.reset()}play({byUser:e=!1}={}){this._bootstrap.play({byUser:e,byExternalApi:!0})}pause({byUser:e=!1}={}){this._bootstrap.pause({byUser:e,byExternalApi:!0})}mute(){this._bootstrap.mute()}unmute(){this._bootstrap.unmute()}disconnect(){this._globalDestroy()}setPlaylistIndex(e){this._bootstrap.setPlaylistIndex(e).catch((()=>{}))}setConsent(e){this._transparencyAndConsent.setExternalConsent(e)}setVisibility(e,{scrollDown:t=!1}={}){this._setVisibility(e,{scrollDown:t})}_setVisibility(e,{scrollDown:t=!1}={}){1===e&&(this._wasFullyVisible=!0);(t||0===e&&1===this._lastVisibility)&&this._wasFullyVisible&&e>=0&&e<1&&!this._switchedToDialogOnce&&this._isDockEnabled&&(this._isPlaying&&"dock"!==this._currentPresentationMode&&"fullscreen"!==this._currentPresentationMode&&this.updatePresentationMode({mode:"dock"}),this._isScrollOutToPlay&&!this._playedOnce&&(this.updatePresentationMode({mode:"dock"}),this._bootstrap.mute(),this._bootstrap.setPlaylistIndex(this._currentPlaylistIndex),this._bootstrap.play(),this._playedOnce=!0)),this._bootstrap.setVisibility(e),this._lastVisibility=e}updatePresentationMode({mode:e,shouldFocus:t=!1}){"lightbox"!==e&&"fullscreen"!==e&&"external-modal"!==e||(this._switchedToDialogOnce=!0),this._bootstrap.updatePresentationMode({mode:e,shouldFocus:t})}exitCurrentPresentationMode(){this._bootstrap.exitCurrentPresentationMode()}_onPlaybackHandlerPlay(){this._onConnectPromise.then((()=>{this._communication.sendEvent(R.SHOULD_PLAY,{})}))}constructor({window:e,bootstrap:t,documentHidden:n,visibilityObserver:r,iframePlayerCommunication:i,publicApiEmitter:o,globalDestroy:a,transparencyAndConsent:s}){super({window:e,bootstrap:t,documentHidden:n,visibilityObserver:r}),this._visbilityObserver.disconnect(),this._communication=i,this._globalDestroy=a,this._transparencyAndConsent=s,this._wasFullyVisible=!1,this._playedOnce=!1,this._isPlaying=!1,this._currentPlaylistIndex=0,this._isScrollOutToPlay=!1,this._isDockEnabled=!1,this._switchedToDialogOnce=!1,this._currentPresentationMode=void 0,this._playOnVisibility=void 0,this._lastVisibility=void 0,i.expose(this,{...R,...o.EVENT}),this._onConnectPromise=new Promise((e=>{i.once(i.EVENT_CONNECT,e)})),o.on("event",(({eventName:e,payload:t,context:n})=>{if(e===o.EVENT.PLAYER_PLAY)this._playedOnce=!0,this._isPlaying=!0;else if(e===o.EVENT.PLAYLISTITEM_BEGIN)setTimeout((()=>{0===this._playOnVisibility&&this._bootstrap.getVisibility()<=0&&!this._switchedToDialogOnce&&this._isDockEnabled&&this.updatePresentationMode({mode:"dock"})}),50);else if(e===o.EVENT.PLAYER_PAUSE)this._isPlaying=!1;else if(e===o.EVENT.PLAYLISTITEM_SELECT)this._currentPlaylistIndex=t.playlistContext.playlistIndex;else if(e===o.EVENT.PLAYER_READY)this._isDockEnabled=t.player.dockEnabled,this._playOnVisibility=t.config.playOnVisibility,this._isScrollOutToPlay=this._isDockEnabled&&"scroll-out-to-play"===t.player.startBehavior;else if(e===o.EVENT.ENVIRONMENT_UPDATEPRESENTATIONMODE){const{player:{presentationMode:e}}=t;"hidden"===e||"inline"===e||"fullscreen"===e||this._switchedToDialogOnce||(this._switchedToDialogOnce=!0),this._currentPresentationMode=e}this._onConnectPromise.then((()=>{i.sendEvent(e,t,n.pageUrl)}))}))}}function U(e){return function(){}