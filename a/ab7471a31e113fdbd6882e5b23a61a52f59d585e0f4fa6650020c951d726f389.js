(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{9315:function(e,t,n){"use strict";n.d(t,{Z:function(){return it}});var r=n(7294);var i=n(4892),o=n(8179),a=n(5058),s=n(8906),l=n(4394),c=n(532),u=n(8325),d=n(3613);class p{constructor(e,t,n,r,i,o,a){this.id=e,this.value=t,this.label=n,this.level=r,this.regionId=i,this.cityId=o,this.townId=a,this.uri="/geo/zone"}}class f{constructor(){this.entries=[]}}class m extends d.o{}const h={...a.genericResponseSchema,zones:{path:"data.values",fn:e=>e.map((e=>(0,s.morphism)(a.zoneSchema,e,p)))}},g=function(e,t){return{...t.genericResponseSchema,entries:{path:"data.data",fn:n=>n.map((n=>{const r={region:e(t.regionSchema,n.region)};return n.city&&(r.city=e(t.citySchema,n.city)),n.town&&(r.town=e(t.townSchema,n.town)),r}))}}};class v{constructor(e,t){const n=(0,u.x)(e,"/v1/geo",t);this.axiosConfig=n.config,this.httpClient=n.instance}async search(e,t,n=!1){if(n&&"undefined"!==typeof window){const n={...this.axiosConfig,params:{key:e,...t}};n.method="GET",n.url="search";const r=await(0,l.Y)({axiosConfig:n,schema:g});if(r)return r}const r=await this.httpClient.get("search",{params:{key:e,...t}});return(0,s.morphism)(g(s.morphism,a.sharedSchema),r,f)}async getZones(e){const[t,n]=await(0,o.to)(this.httpClient.get(`regions/${e.regionId}/cities/${e.cityId}/towns/${e.id}/zones`));return(0,c._y)(t,n,h,m)}}var y;function _(e,t){var n,r,i,o,a;const s=function(e,t){var n;return(null===(n=null===e||void 0===e?void 0:e.region)||void 0===n?void 0:n.value)?e.town?y.Town:e.city?y.City:t||e.region.id==b.id?t&&e.region.id!=b.id?y.RegionAndNearRegions:y.Italia:y.Region:null}(e,t);switch(s){case y.Town:return`${null===(n=e.town)||void 0===n?void 0:n.value} (${null===(r=e.city)||void 0===r?void 0:r.shortName})`;case y.City:return`${null===(i=e.city)||void 0===i?void 0:i.value} e provincia`;case y.Region:return`${null===(o=e.region)||void 0===o?void 0:o.value} regione`;case y.RegionAndNearRegions:return`${null===(a=e.region)||void 0===a?void 0:a.value} e regioni vicine`;case y.Italia:return e.region.value;default:return""}}!function(e){e[e.Italia=0]="Italia",e[e.RegionAndNearRegions=1]="RegionAndNearRegions",e[e.Region=2]="Region",e[e.City=3]="City",e[e.Town=4]="Town"}(y||(y={}));const b={id:"0",friendlyName:"italia",label:"Regione",level:0,uri:"/region",value:"Tutta Italia"};const w=e=>"here"===e.value.responseFrom,x=e=>!w(e);var E=n(3553),k=n(3418),I=n(3984),C=n(1489),S=n(4184),M=n.n(S),T=n(6401),O="Item-module_size-small__BZrfL",N="Item-module_item__kOQeD",P="Item-module_selected__pWvP5";var R="SuggestionResult-module_location-qualifier__yHSgX";const L=({geoOptionsLabels:e,query:t=""})=>{const[n,i]=e;let o;return o=t.length>0&&n.toLowerCase().startsWith(t.toLowerCase())?r.createElement("span",null,r.createElement("b",null,n.slice(0,t.length)),n.slice(t.length)):n,r.createElement(r.Fragment,null,o,void 0!=i?r.createElement(r.Fragment,null,"\xa0",r.createElement("span",{className:R},i)):null)};var F="RecentSearches-module_item-icon__ux5yT",A="RecentSearches-module_title__tigyA";const j=({variant:e,getItemProps:t,highlightedIndex:n,searches:i,selectedItem:o,assetsBase:a})=>{const[s,...l]=i,c=i.map(((e,t)=>n===t||null!=o&&((e,t)=>{if(e.searchNearRegions===t.searchNearRegions){const n=n=>{var r,i;const o=null===(r=e.entry[n])||void 0===r?void 0:r.id,a=null===(i=t.entry[n])||void 0===i?void 0:i.id;return void 0==o&&void 0==a||!(void 0==o||void 0==a)&&o===a},r=["region","city","town","zone"];for(let e=0;e<r.length;e++)if(!n(r[e]))return!1;return!0}return!1})(e.value,o.value))),u="desktop"===e;return r.createElement(r.Fragment,null,r.createElement("li",{className:M()(N,{[O]:u,[P]:c[0]}),key:`${s.inputLabel}-default`,...t({item:s,index:0})},r.createElement("img",{src:`${a}/static/icons/cactus/lens.svg`,width:"24",height:"24",alt:""}),s.optionLabels),r.createElement("div",{className:A},r.createElement(I.A,{size:u?C.yH.Small:C.yH.Normal,weight:C.fs.Semibold},"Ricerche recenti")),l.map(((e,n)=>r.createElement("li",{className:M()(N,{[O]:u,[P]:c[n+1]}),key:`${e.inputLabel}-${n+1}`,...t({item:e,index:n+1})},r.createElement("img",{src:`${a}/static/icons/cactus/clock.svg`,width:"16",height:"16",alt:"",className:F}),r.createElement(L,{geoOptionsLabels:e.optionLabels})))))};function D(e){return{"@id":`sdrn:subito:page:${e}`,"@type":"Page",pageType:e}}function B(e){return{id:e,type:"Page",pageType:e}}function z(e,t,n,r=!1){var i,o,a;const s=null===(i=null===window||void 0===window?void 0:window.subito)||void 0===i?void 0:i.dataLayer,l=null===(a=null===(o=null===s||void 0===s?void 0:s.page)||void 0===o?void 0:o.getPageType)||void 0===a?void 0:a.call(o);return{type:"Click",object:{id:r?"geo-search-recent-searches":"geo-search-dropdown-result",name:r?"GeoSearchRecentSearches":"GeoSearchDropdownResult",type:"UIElement",elementType:"Li",label:t,"spt:custom":{rank:n,geo:e}},page:D(l),target:B(l)}}function V(){var e,t,n;const r=null===(e=null===window||void 0===window?void 0:window.subito)||void 0===e?void 0:e.dataLayer,i=null===(n=null===(t=null===r||void 0===r?void 0:r.page)||void 0===t?void 0:t.getPageType)||void 0===n?void 0:n.call(t);return{type:"Click",object:{id:"geo-search-cancel",name:"GeoSearchCancel",type:"UIElement"},page:D(i),target:B(i)}}var U=n(1361);const q=e=>{var t,n,r;return{value:{entry:e,responseFrom:"geogos",searchNearRegions:!1},inputLabel:`${null===(t=e.city)||void 0===t?void 0:t.value} e provincia`,optionLabels:[null!==(r=null===(n=e.city)||void 0===n?void 0:n.value)&&void 0!==r?r:"","e provincia"]}},$=e=>{var t,n;return{value:{entry:e,responseFrom:"geogos",searchNearRegions:!0},inputLabel:`${null===(t=e.region)||void 0===t?void 0:t.value} e regioni vicine`,optionLabels:[null===(n=e.region)||void 0===n?void 0:n.value,"e regioni vicine"]}},K=e=>{var t,n;return{value:{entry:e,responseFrom:"geogos",searchNearRegions:!1},inputLabel:null===(t=e.region)||void 0===t?void 0:t.value,optionLabels:[null===(n=e.region)||void 0===n?void 0:n.value,"regione"]}},G=e=>{var t;const n=[];if(!(null===(t=null===e||void 0===e?void 0:e.entries)||void 0===t?void 0:t.length))return n;const{entries:r}=e;for(let i=0;i<r.length;i++){const e=r[i];e.town?n.push(W(e)):e.city?n.push(q(e)):n.push(K(r[i]),$(r[i]))}return n},Z=(e,t)=>{const n=_(e,t);return{optionLabels:[n],inputLabel:n,value:{entry:e,searchNearRegions:!!t,responseFrom:"geogos"}}},W=e=>{var t,n,r,i,o;return{value:{entry:e,responseFrom:"geogos",searchNearRegions:!1},inputLabel:`${null===(t=e.town)||void 0===t?void 0:t.value} (${null===(n=e.city)||void 0===n?void 0:n.shortName})`,optionLabels:[null!==(i=null===(r=e.town)||void 0===r?void 0:r.value)&&void 0!==i?i:"",`(${null===(o=e.city)||void 0===o?void 0:o.shortName}) comune`]}};const J=Z({region:b}),X=Z;var Y={container:"index-module_container__BF3kE","dropdown-wrapper":"index-module_dropdown-wrapper__cw00E",open:"index-module_open__-PwkH",dropdown:"index-module_dropdown__8PFfS","dropdown--is-open":"index-module_dropdown--is-open__pSLJB",helptext:"index-module_helptext__TGxtd",newsearch:"index-module_newsearch__akJsw"};var Q=e=>{try{return Math.abs(e)<1e3?Intl.NumberFormat("it",{minimumFractionDigits:0,maximumFractionDigits:1,style:"unit",unit:"meter",unitDisplay:"short"}).format(e):Intl.NumberFormat("it",{minimumFractionDigits:0,maximumFractionDigits:1,style:"unit",unit:"kilometer",unitDisplay:"short"}).format(e/1e3)}catch(t){return`${Intl.NumberFormat("it",{minimumFractionDigits:0,maximumFractionDigits:1}).format(e/1e3)} km`}};const ee=(0,r.createRef)();function te({value:e,options:t,labelId:n,name:i,onSelect:o,pulse:a,updateItems:s,storeRecentSearch:l,assetsBase:c}){const u=(0,r.useMemo)((()=>"geogos"===e.responseFrom?X(e.entry).inputLabel:e.entry.friendlyName),[e.entry,e.responseFrom]),{getComboboxProps:d,getInputProps:p,getItemProps:f,getMenuProps:m,highlightedIndex:h,inputValue:g,isOpen:v,openMenu:y,reset:_,selectedItem:b,setInputValue:w}=(0,T.Kb)({items:t.items,labelId:n,initialInputValue:u,itemToString:e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.inputLabel)&&void 0!==t?t:""},onInputValueChange:e=>{s("geogos",e.inputValue)},onSelectedItemChange:({selectedItem:e})=>{var t;null!=e&&(null===(t=ee.current)||void 0===t||t.blur(),"geogos"===e.value.responseFrom&&(null===a||void 0===a||a.queueEvent(z(e.value,e.inputLabel,h+1,e.isRecentSearch)),o(e.value)),null!=e&&x(e)&&(null===l||void 0===l||l(e)))},onStateChange:e=>{var t;e.type===T.Kb.stateChangeTypes.InputKeyDownEscape?null===a||void 0===a||a.queueEvent(V()):e.type===T.Kb.stateChangeTypes.ItemClick&&null==e.selectedItem&&(null===(t=ee.current)||void 0===t||t.blur(),null===a||void 0===a||a.queueEvent(z(null===b||void 0===b?void 0:b.value,null===b||void 0===b?void 0:b.inputLabel,h+1,null===b||void 0===b?void 0:b.isRecentSearch)))}});(0,r.useEffect)((()=>{if("geogos"===e.responseFrom){const t=X(e.entry,e.searchNearRegions).inputLabel;w(t)}else{const t=e.entry.friendlyName;_(),w(`Entro ${Q(e.radius)} da ${t}`)}}),[e,_,w]);const I=(0,r.useCallback)((()=>{var e;w(""),null===(e=ee.current)||void 0===e||e.focus()}),[w]);return r.createElement("div",{className:Y.container},r.createElement("div",{...d()},r.createElement(E.ZP,{size:E.J9.Large,icon:k.u.Pin,withClearIcon:(null===g||void 0===g?void 0:g.length)>0,onInputChange:e=>w(e.target.value),onCleared:I,disableNativeAC:!0,...p({ref:ee,type:E.T3.Search,placeholder:"Comune, Provincia o Regione",name:i,value:g,onFocus:()=>{w(""),y()}})})),r.createElement("div",{className:M()(Y["dropdown-wrapper"],{[Y.open]:v})},r.createElement("ul",{className:M()(Y.dropdown,{[Y.results]:"search"===t.kind,[Y["dropdown--is-open"]]:v}),...m()},v&&"search"===t.kind&&t.items.map(((e,t)=>r.createElement("li",{className:M()(N,O,{[P]:h===t}),key:`${e.inputLabel}${t}`,...f({item:e,index:t})},r.createElement(L,{geoOptionsLabels:e.optionLabels,query:g})))),v&&"recent"===t.kind&&(null==b||x(b))&&r.createElement(j,{variant:"desktop",getItemProps:f,highlightedIndex:h,searches:t.items,selectedItem:b,assetsBase:c}),v&&"new"===t.kind&&r.createElement(ne,null))))}function ne(){return r.createElement("div",{className:Y.newsearch},r.createElement(I.A,{size:C.yH.Small,weight:C.fs.Semibold},"Inserisci il luogo"),r.createElement(I.A,{size:C.yH.Small,classes:[Y.helptext]},"Scrivi qui il comune, la provincia o la regione della tua ricerca"))}var re=n(3108),ie=n(9333),oe=n(6757),ae=n(9726);function se(e,t){return se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},se(e,t)}function le(e){return e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault(),!1}function ce(e){return null==e?[]:Array.isArray(e)?e.slice():[e]}function ue(e){return null!==e&&1===e.length?e[0]:e.slice()}function de(e){Object.keys(e).forEach((t=>{"undefined"!=typeof document&&document.addEventListener(t,e[t],!1)}))}function pe(e,t){return fe(function(e,t){let n=e;return n<=t.min&&(n=t.min),n>=t.max&&(n=t.max),n}(e,t),t)}function fe(e,t){const n=(e-t.min)%t.step;let r=e-n;return 2*Math.abs(n)>=t.step&&(r+=n>0?t.step:-t.step),parseFloat(r.toFixed(5))}let me=function(e){function t(t){var n;(n=e.call(this,t)||this).onKeyUp=()=>{n.onEnd()},n.onMouseUp=()=>{n.onEnd(n.getMouseEventMap())},n.onTouchEnd=()=>{n.onEnd(n.getTouchEventMap())},n.onBlur=()=>{n.setState({index:-1},n.onEnd(n.getKeyDownEventMap()))},n.onMouseMove=e=>{n.setState({pending:!0});const t=n.getMousePosition(e),r=n.getDiffPosition(t[0]),i=n.getValueFromPosition(r);n.move(i)},n.onTouchMove=e=>{if(e.touches.length>1)return;n.setState({pending:!0});const t=n.getTouchPosition(e);if(void 0===n.isScrolling){const e=t[0]-n.startPosition[0],r=t[1]-n.startPosition[1];n.isScrolling=Math.abs(r)>Math.abs(e)}if(n.isScrolling)return void n.setState({index:-1});const r=n.getDiffPosition(t[0]),i=n.getValueFromPosition(r);n.move(i)},n.onKeyDown=e=>{if(!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey))switch(n.setState({pending:!0}),e.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":e.preventDefault(),n.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":e.preventDefault(),n.moveUpByStep();break;case"Home":e.preventDefault(),n.move(n.props.min);break;case"End":e.preventDefault(),n.move(n.props.max);break;case"PageDown":e.preventDefault(),n.moveDownByStep(n.props.pageFn(n.props.step));break;case"PageUp":e.preventDefault(),n.moveUpByStep(n.props.pageFn(n.props.step))}},n.onSliderMouseDown=e=>{if(!n.props.disabled&&2!==e.button){if(n.setState({pending:!0}),!n.props.snapDragDisabled){const t=n.getMousePosition(e);n.forceValueFromPosition(t[0],(e=>{n.start(e,t[0]),de(n.getMouseEventMap())}))}le(e)}},n.onSliderClick=e=>{if(!n.props.disabled&&n.props.onSliderClick&&!n.hasMoved){const t=n.getMousePosition(e),r=pe(n.calcValue(n.calcOffsetFromPosition(t[0])),n.props);n.props.onSliderClick(r)}},n.createOnKeyDown=e=>t=>{n.props.disabled||(n.start(e),de(n.getKeyDownEventMap()),le(t))},n.createOnMouseDown=e=>t=>{if(n.props.disabled||2===t.button)return;n.setState({pending:!0});const r=n.getMousePosition(t);n.start(e,r[0]),de(n.getMouseEventMap()),le(t)},n.createOnTouchStart=e=>t=>{if(n.props.disabled||t.touches.length>1)return;n.setState({pending:!0});const r=n.getTouchPosition(t);n.startPosition=r,n.isScrolling=void 0,n.start(e,r[0]),de(n.getTouchEventMap()),function(e){e.stopPropagation&&e.stopPropagation()}(t)},n.handleResize=()=>{const e=window.setTimeout((()=>{n.pendingResizeTimeouts.shift(),n.resize()}),0);n.pendingResizeTimeouts.push(e)},n.renderThumb=(e,t)=>{const r=n.props.thumbClassName+" "+n.props.thumbClassName+"-"+t+" "+(n.state.index===t?n.props.thumbActiveClassName:""),i={ref:e=>{n["thumb"+t]=e},key:n.props.thumbClassName+"-"+t,className:r,style:e,onMouseDown:n.createOnMouseDown(t),onTouchStart:n.createOnTouchStart(t),onFocus:n.createOnKeyDown(t),tabIndex:0,role:"slider","aria-orientation":n.props.orientation,"aria-valuenow":n.state.value[t],"aria-valuemin":n.props.min,"aria-valuemax":n.props.max,"aria-label":Array.isArray(n.props.ariaLabel)?n.props.ariaLabel[t]:n.props.ariaLabel,"aria-labelledby":Array.isArray(n.props.ariaLabelledby)?n.props.ariaLabelledby[t]:n.props.ariaLabelledby},o={index:t,value:ue(n.state.value),valueNow:n.state.value[t]};return n.props.ariaValuetext&&(i["aria-valuetext"]="string"==typeof n.props.ariaValuetext?n.props.ariaValuetext:n.props.ariaValuetext(o)),n.props.renderThumb(i,o)},n.renderTrack=(e,t,r)=>{const i={key:n.props.trackClassName+"-"+e,className:n.props.trackClassName+" "+n.props.trackClassName+"-"+e,style:n.buildTrackStyle(t,n.state.upperBound-r)},o={index:e,value:ue(n.state.value)};return n.props.renderTrack(i,o)};let i=ce(t.value);i.length||(i=ce(t.defaultValue)),n.pendingResizeTimeouts=[];const o=[];for(let e=0;e<i.length;e+=1)i[e]=pe(i[e],t),o.push(e);return n.resizeObserver=null,n.resizeElementRef=r.createRef(),n.state={index:-1,upperBound:0,sliderLength:0,value:i,zIndices:o},n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,se(e,t)}(t,e);var n=t.prototype;return n.componentDidMount=function(){"undefined"!=typeof window&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},t.getDerivedStateFromProps=function(e,t){const n=ce(e.value);return n.length?t.pending?null:{value:n.map((t=>pe(t,e)))}:null},n.componentDidUpdate=function(){0===this.state.upperBound&&this.resize()},n.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},n.onEnd=function(e){e&&function(e){Object.keys(e).forEach((t=>{"undefined"!=typeof document&&document.removeEventListener(t,e[t],!1)}))}(e),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},n.getValue=function(){return ue(this.state.value)},n.getClosestIndex=function(e){let t=Number.MAX_VALUE,n=-1;const{value:r}=this.state,i=r.length;for(let o=0;o<i;o+=1){const i=this.calcOffset(r[o]),a=Math.abs(e-i);a<t&&(t=a,n=o)}return n},n.getMousePosition=function(e){return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},n.getTouchPosition=function(e){const t=e.touches[0];return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},n.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},n.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},n.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},n.getValueFromPosition=function(e){const t=e/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return pe(this.state.startValue+t,this.props)},n.getDiffPosition=function(e){let t=e-this.state.startPosition;return this.props.invert&&(t*=-1),t},n.resize=function(){const{slider:e,thumb0:t}=this;if(!e||!t)return;const n=this.sizeKey(),r=e.getBoundingClientRect(),i=e[n],o=r[this.posMaxKey()],a=r[this.posMinKey()],s=t.getBoundingClientRect()[n.replace("client","").toLowerCase()],l=i-s,c=Math.abs(o-a);this.state.upperBound===l&&this.state.sliderLength===c&&this.state.thumbSize===s||this.setState({upperBound:l,sliderLength:c,thumbSize:s})},n.calcOffset=function(e){const t=this.props.max-this.props.min;return 0===t?0:(e-this.props.min)/t*this.state.upperBound},n.calcValue=function(e){return e/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},n.calcOffsetFromPosition=function(e){const{slider:t}=this,n=t.getBoundingClientRect(),r=n[this.posMaxKey()],i=n[this.posMinKey()];let o=e-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?r:i));return this.props.invert&&(o=this.state.sliderLength-o),o-=this.state.thumbSize/2,o},n.forceValueFromPosition=function(e,t){const n=this.calcOffsetFromPosition(e),r=this.getClosestIndex(n),i=pe(this.calcValue(n),this.props),o=this.state.value.slice();o[r]=i;for(let a=0;a<o.length-1;a+=1)if(o[a+1]-o[a]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:o},(()=>{t(r),this.fireChangeEvent("onChange")}))},n.clearPendingResizeTimeouts=function(){do{const e=this.pendingResizeTimeouts.shift();clearTimeout(e)}while(this.pendingResizeTimeouts.length)},n.start=function(e,t){const n=this["thumb"+e];n&&n.focus();const{zIndices:r}=this.state;r.splice(r.indexOf(e),1),r.push(e),this.setState((n=>({startValue:n.value[e],startPosition:void 0!==t?t:n.startPosition,index:e,zIndices:r})))},n.moveUpByStep=function(e){void 0===e&&(e=this.props.step);const t=pe(this.state.value[this.state.index]+e,this.props);this.move(Math.min(t,this.props.max))},n.moveDownByStep=function(e){void 0===e&&(e=this.props.step);const t=pe(this.state.value[this.state.index]-e,this.props);this.move(Math.max(t,this.props.min))},n.move=function(e){const{index:t,value:n}=this.state,{length:r}=n,i=n[t];if(e===i)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:o,max:a,min:s,minDistance:l}=this.props;if(!o){if(t>0){const r=n[t-1];e<r+l&&(e=r+l)}if(t<r-1){const r=n[t+1];e>r-l&&(e=r-l)}}n[t]=e,o&&r>1&&(e>i?(this.pushSucceeding(n,l,t),function(e,t,n,r){for(let i=0;i<e;i+=1){const o=r-i*n;t[e-1-i]>o&&(t[e-1-i]=o)}}(r,n,l,a)):e<i&&(this.pushPreceding(n,l,t),function(e,t,n,r){for(let i=0;i<e;i+=1){const e=r+i*n;t[i]<e&&(t[i]=e)}}(r,n,l,s))),this.setState({value:n},this.fireChangeEvent.bind(this,"onChange"))},n.pushSucceeding=function(e,t,n){let r,i;for(r=n,i=e[r]+t;null!==e[r+1]&&i>e[r+1];r+=1,i=e[r]+t)e[r+1]=fe(i,this.props)},n.pushPreceding=function(e,t,n){for(let r=n,i=e[r]-t;null!==e[r-1]&&i<e[r-1];r-=1,i=e[r]-t)e[r-1]=fe(i,this.props)},n.axisKey=function(){return"vertical"===this.props.orientation?"Y":"X"},n.orthogonalAxisKey=function(){return"vertical"===this.props.orientation?"X":"Y"},n.posMinKey=function(){return"vertical"===this.props.orientation?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},n.posMaxKey=function(){return"vertical"===this.props.orientation?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},n.sizeKey=function(){return"vertical"===this.props.orientation?"clientHeight":"clientWidth"},n.fireChangeEvent=function(e){this.props[e]&&this.props[e](ue(this.state.value),this.state.index)},n.buildThumbStyle=function(e,t){const n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():"",zIndex:this.state.zIndices.indexOf(t)+1};return n[this.posMinKey()]=e+"px",n},n.buildTrackStyle=function(e,t){const n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():""};return n[this.posMinKey()]=e,n[this.posMaxKey()]=t,n},n.buildMarkStyle=function(e){var t;return(t={position:"absolute"})[this.posMinKey()]=e,t},n.renderThumbs=function(e){const{length:t}=e,n=[];for(let i=0;i<t;i+=1)n[i]=this.buildThumbStyle(e[i],i);const r=[];for(let i=0;i<t;i+=1)r[i]=this.renderThumb(n[i],i);return r},n.renderTracks=function(e){const t=[],n=e.length-1;t.push(this.renderTrack(0,0,e[0]));for(let r=0;r<n;r+=1)t.push(this.renderTrack(r+1,e[r],e[r+1]));return t.push(this.renderTrack(n+1,e[n],this.state.upperBound)),t},n.renderMarks=function(){let{marks:e}=this.props;const t=this.props.max-this.props.min+1;return"boolean"==typeof e?e=Array.from({length:t}).map(((e,t)=>t)):"number"==typeof e&&(e=Array.from({length:t}).map(((e,t)=>t)).filter((t=>t%e==0))),e.map(parseFloat).sort(((e,t)=>e-t)).map((e=>{const t=this.calcOffset(e),n={key:e,className:this.props.markClassName,style:this.buildMarkStyle(t)};return this.props.renderMark(n)}))},n.render=function(){const e=[],{value:t}=this.state,n=t.length;for(let r=0;r<n;r+=1)e[r]=this.calcOffset(t[r],r);const i=this.props.withTracks?this.renderTracks(e):null,o=this.renderThumbs(e),a=this.props.marks?this.renderMarks():null;return r.createElement("div",{ref:e=>{this.slider=e,this.resizeElementRef.current=e},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},i,o,a)},t}(r.Component);me.displayName="ReactSlider",me.defaultProps={min:0,max:100,step:1,pageFn:e=>10*e,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:e=>r.createElement("div",e),renderTrack:e=>r.createElement("div",e),renderMark:e=>r.createElement("span",e)};var he,ge=me,ve=n(6802),ye={slider:"Slider-module_slider__TJ4H2","slider--small":"Slider-module_slider--small__LrdY5","slider--with-label":"Slider-module_slider--with-label__eluPR","slider--large":"Slider-module_slider--large__S5K6m",track:"Slider-module_track__L-yhs","track--small":"Slider-module_track--small__yTuyQ","track--large":"Slider-module_track--large__64j06",single:"Slider-module_single__vAhvL","track--disabled":"Slider-module_track--disabled__APa7u",multi:"Slider-module_multi__9ejyY",thumb:"Slider-module_thumb__zuT0A","thumb--small":"Slider-module_thumb--small__GvZ41","thumb--large":"Slider-module_thumb--large__GLgbF","thumb--disabled":"Slider-module_thumb--disabled__vcL9w",thumb__icon:"Slider-module_thumb__icon__W5Wea",thumb__caption:"Slider-module_thumb__caption__-JWGr"};function _e({className:e,defaultValue:t,disabled:n,size:i,thumbClassName:o,trackClassName:a,value:s,valueLabelBuilder:l,withLabel:c,...u}){const d=Array.isArray(s)||Array.isArray(t);return r.createElement(ge,{...u,...null!=s?{value:s}:{defaultValue:t},disabled:n,renderThumb:(e,t)=>r.createElement("div",{...e},r.createElement("svg",{width:"8",height:"8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{className:ye.thumb__icon,d:"M4.001 1v6m3-6v6m-6-6v6",strokeWidth:"2",strokeLinecap:"round"})),c&&r.createElement(ve.Y,{size:i===he.Small?C.yH.Small:C.yH.Normal,weight:C.fs.Book,classes:[ye.thumb__caption]},l?l(t.valueNow):t.valueNow)),className:M()(e,ye.slider,ye[`slider--${i}`],{[ye["slider--disabled"]]:n,[ye.multi]:d,[ye.single]:!d,[ye["slider--with-label"]]:c}),thumbClassName:M()(o,ye.thumb,ye[`thumb--${i}`],{[ye["thumb--disabled"]]:n}),trackClassName:M()(a,ye.track,ye[`track--${i}`],{[ye["track--disabled"]]:n})})}!function(e){e.Small="small",e.Large="large"}(he||(he={}));const be=({className:e})=>r.createElement("svg",{viewBox:"0 0 160 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e},r.createElement("path",{d:"M79.627 94.12c-18.769-.298-23.744-2.697-41.834-1.73-6.916.37-24.083 3.992-24.189 6.36-.128 3.035 21.79 7.785 38.286 10.034 44.911 6.111 91.389-4.093 91.378-8.781-.007-3.269-20.824-5.835-29.918-6.573-14.594-1.189-15.467.99-33.723.69Z",fill:"#D9DEE7"}),r.createElement("path",{d:"M121.655 95.25H86.15l-1.09-80.871 36.595.623V95.25Z",fill:"#EFE7FD"}),r.createElement("path",{d:"M118.57 18.86v73.303H86.924V18.86",fill:"#D9DEE7"}),r.createElement("path",{d:"M89.989 65.157h19.316V44.962h-9.373l-.021-2.853c0-.094-.07-9.524-.105-18.9 0-1.537-.004-2.987-.012-4.35l-12.871-.125-.15 36.658 3.216 9.765ZM87.69 67.473h-1.538v23.92h15.437l-13.895-23.92h-.004Z",fill:"#fff"}),r.createElement("path",{d:"M112.425 44.322v22.876H93.869l13.586 23.421h11.113V44.322h-6.143Z",fill:"#fff"}),r.createElement("path",{d:"m65.314 99.88-30.101-2.323V11.855l30.1-2.255v90.28Z",fill:"#EFE7FD"}),r.createElement("path",{d:"M37.527 94.082V15.947l27.79-2.49v82.565l-27.79-1.942v.002Z",fill:"#D9DEE7"}),r.createElement("path",{d:"m86.152 95.249-20.84 4.63V9.6l20.84 5.043V95.25Z",fill:"#EFE7FD"}),r.createElement("path",{d:"M65.313 96.554V14.228l21.61 4.505v73.43l-21.61 4.391Z",fill:"#A2A7AE"}),r.createElement("path",{d:"M75.346 68.294v25.52l11.576-2.421v-23.92l-11.576.821ZM69.335 43.55l10.443-26.329-14.466-3.758v30.023l4.023.072v-.008ZM73.803 43.769l9.542.597 3.579 11.536V18.734l-2.959-.64-10.16 25.68-.002-.005Z",fill:"#D9DEE7"}),r.createElement("path",{d:"m73.118 65.411 12.265-.673-4.333-13.94-10.533-.298-5.197 13.331v32.19l7.807-1.686V65.411h-.01ZM65.313 50.494v4.63l1.544-4.578-1.543-.052h-.001Z",fill:"#D9DEE7"}),r.createElement("path",{d:"M61.502 25.423c-.013 7.056-.035 14.14-.049 18.127l3.86-.072V13.463l-3.799.369c.002 3.184-.003 7-.012 11.59ZM49.26 44.321l10.222-.398c.036-9.802.43-21.726.43-29.95l-15.426 1.39c1.515 9.166 3.61 21.887 4.774 28.958ZM55.95 81.62l-18.42-.87v13.314l27.789 2.49V64.383l-9.37 17.237Z",fill:"#fff"}),r.createElement("path",{d:"m54.176 75.19 11.136-20.064v-4.63l-19.49-.39-.385-2.287c-1.688-10.135-3.911-23.48-5.346-32.051l-2.564.174v58.642l16.649.605ZM118.568 18.86h-16.98v23.148h16.98V18.86Z",fill:"#fff"}),r.createElement("path",{d:"m78.774 89.867-30.116-7.531-1.508 7.314 27.572 12.722 21.83-5.39 13.168-12.928-30.946 5.813Z",fill:"url(#a)"}),r.createElement("path",{d:"m78.774 89.867-30.116-7.531-1.508 7.314 27.572 12.722 21.83-5.39 13.168-12.928-30.946 5.813Z",fill:"#9F6BFA"}),r.createElement("path",{d:"M79.722 99.988a81.825 81.825 0 0 1-13.407-8.946c-5.903-4.86-8.612-8.526-14.59-9.974-1.068-.259-7.153-1.735-9.114.968-2.173 2.987 2.053 9.247 2.567 10.007 7.635 11.3 27.079 10.773 33.183 10.407l1.361-2.462Z",fill:"#9F6BFA"}),r.createElement("path",{d:"M75.198 101.677s-1.097-.786-2.69-.249c-1.592.536-4.118.967-4.115 1.746.003.778 2.54 1.263 4.28.944 1.673-.305 2.987-1.758 2.525-2.441Z",fill:"#3C4858"}),r.createElement("path",{d:"m76.806 100.348-2.926.941s-.475.791.166 1.295c.641.503 2.875-.56 2.875-.56l-.115-1.676Z",fill:"url(#b)"}),r.createElement("path",{d:"M117.516 86.852c.865 5.034-10.01 10.48-12.49 11.727-5.07 2.539-14.61 6.124-28.77 4.756l-.565-3.388c2.686-.92 5.311-2.01 7.86-3.264 5.488-2.699 7.573-4.63 15.19-9.23 8.429-5.096 10.885-5.75 13.397-5.12 2.147.54 4.976 2.18 5.378 4.519Z",fill:"#9F6BFA"}),r.createElement("path",{d:"M106.193 77.278c1.838-6.642-1.195-15.604-7.585-19.925-5.216-3.528-11.327-3.3-13.233-3.228-2.092.08-1.872.35-8.443 1.565-9.123 1.687-9.964 1.277-12.615 2.55-4.99 2.39-7.412 6.733-7.864 7.579-2.32 4.332-4.206 12.368.198 16.299 2.503 2.24 6.014 2.227 7.989 2.017l.403-2.662c-.402-.31-2.774-2.212-3.067-5.566-.336-3.856 2.36-6.345 2.664-6.615a26.18 26.18 0 0 1 2.038 18.893 31.304 31.304 0 0 0 11.595 3.696c3.916.433 8.763-.396 11.862-2.817 4.373-3.416 4.743-10.95.424-20.21 1.58 1.058 3.871 2.974 4.821 6.005.15.458.387 1.359.485 4.84.174 6.256 8.425 4.462 10.328-2.42Z",fill:"#4D1FB2"}),r.createElement("path",{d:"m68.909 88.144 25.749-.384-6.847 3.304-18.97-1.241.068-1.68Z",fill:"#3C4858"}),r.createElement("path",{d:"M104.955 72.852c-1.994-1.884-6.872-.689-8.688 2-1.344 1.99-.23 3.626-1.21 6.131-1.195 3.07-5.727 5.845-8.516 6.77.435.936.306 1.18.747 2.116 1.769-.22 14.561-2.18 17.691-9.773.166-.391 2.099-5.228-.024-7.244Z",fill:"#4D1FB2"}),r.createElement("path",{d:"M75.91 53.03s2.083 2.25 3.811 2.485c1.729.234 4.227-.224 4.657 0 .43.224-2.17 1.15-4.234 1.716-2.063.566-5.809 1.695-6.844 1.447-1.035-.247 1.13-1.574 1.99-1.926.859-.353-.366-2.16-.366-2.16l.986-1.563Z",fill:"#F5C058"}),r.createElement("path",{d:"M72.82 54.317c-.747-.208-1.44-1.046-1.433-1.928 0-.747.536-1.269.853-1.576.919-.897 2.513-1.45 3.67-.864.685.347.997 1.926 1.068 2.2.077.308-.044.528-.077.834-.046.423-.113 1.09-.212 2.197-.237-.19-.49-.36-.756-.506a4.611 4.611 0 0 0-1.096-.435c-1.02-.236-1.303.275-2.017.078Z",fill:"#9F6BFA"}),r.createElement("path",{d:"M77.124 53.983s.175 1.596-1.21 2.525c-1.239.834-3.451-1.68-3.138-2.823.108-.38.552-.847 1.046-1.045.299-.118.448-.081.93-.284.44-.187.513-.308.696-.299.228.01.55.218.914 1.17.05-.402.253-.698.514-.747a.502.502 0 0 1 .275.033c.41.163.43.762-.027 1.47Z",fill:"#F5C058"}),r.createElement("path",{d:"M75.387 51.85c-.024.087.314.165.558.456.475.563.424 1.72-.133 2.24-.33.31-.598.17-1.23.562-.31.192-.587.432-.82.711.308.783.974 1.286 1.63 1.253.705-.036 1.144-.682 1.328-.953.124-.18.518-.758.421-1.455-.101-.724-.617-.81-.55-1.405.033-.299.195-.542.15-1.046a2.028 2.028 0 0 0-.054-.315c-.551-.077-1.265-.17-1.3-.048Z",fill:"#9F6BFA"}),r.createElement("path",{d:"M74.374 55.734c.291-.075.56-.222.78-.427.02-.018.048-.03.06-.02.042.034-.096.438-.413.565-.225.092-.505.027-.514-.037-.004-.03.04-.06.087-.08Z",fill:"#fff"}),r.createElement("path",{d:"m85.867 74.823 1.813 16.522c.063.57-.735 1.42-1.307 1.392l-26.627-1.634a.933.933 0 0 1-.876-.774l-3.342-15.957c-.1-.58.944-1.181 1.533-1.165l27.903.786a.933.933 0 0 1 .903.83Z",fill:"#717E8F"}),r.createElement("path",{d:"m85.258 75.303 1.815 16.525a.934.934 0 0 1-.97 1.033l-26.966-1.277a.935.935 0 0 1-.875-.775L55.504 74.78a.934.934 0 0 1 .947-1.09l27.903.784a.932.932 0 0 1 .904.829Z",fill:"#3C4858"}),r.createElement("path",{d:"M88.101 89.3c-1.126 1.055-1.88.96-2.132.897-.424-.097-.48-.334-1.557-1.175-.959-.746-1.262-.836-1.252-1.094.021-.492 1.142-.922 2.053-.967 1.278-.064 2.241.622 2.622.928l.266 1.411Z",fill:"#F5C058"}),r.createElement("path",{d:"M44.485 30.426a3.354 3.354 0 0 0-3.342 3.343c0 1.298.715 2.558 1.344 3.592.386.64.814 1.255 1.28 1.84a.92.92 0 0 0 1.424 0c.469-.584.899-1.197 1.287-1.837.635-1.034 1.345-2.294 1.345-3.592a3.355 3.355 0 0 0-3.338-3.346Z",fill:"#8229F9"}),r.createElement("path",{d:"M44.486 32.244a1.521 1.521 0 1 0 0 3.042 1.521 1.521 0 0 0 0-3.042Z",fill:"#fff",stroke:"#8229F9",strokeWidth:".099",strokeMiterlimit:"10"}),r.createElement("path",{d:"M91.063 19.998a3.355 3.355 0 0 0-3.342 3.343c0 1.298.715 2.559 1.352 3.592.385.641.812 1.255 1.279 1.839a.921.921 0 0 0 1.425 0c.466-.584.893-1.199 1.279-1.839.635-1.033 1.345-2.294 1.345-3.592a3.355 3.355 0 0 0-3.338-3.343Z",fill:"#8229F9"}),r.createElement("path",{d:"M91.062 21.816a1.52 1.52 0 1 0 0 3.042 1.52 1.52 0 0 0 0-3.042Z",fill:"#fff",stroke:"#8229F9",strokeWidth:".099",strokeMiterlimit:"10"}),r.createElement("path",{d:"M106.721 53.973a3.491 3.491 0 0 0-3.477 3.478c0 1.345.747 2.662 1.406 3.735a17.73 17.73 0 0 0 1.331 1.913.962.962 0 0 0 .741.352.963.963 0 0 0 .741-.352c.486-.608.93-1.247 1.332-1.913.661-1.076 1.406-2.39 1.406-3.735a3.494 3.494 0 0 0-3.48-3.478Z",fill:"#8229F9"}),r.createElement("path",{d:"M106.721 55.87a1.583 1.583 0 0 0-1.117 2.7 1.582 1.582 0 1 0 1.117-2.7Z",fill:"#fff",stroke:"#8229F9",strokeWidth:".104",strokeMiterlimit:"10"}),r.createElement("path",{d:"M46.85 61.488a3.885 3.885 0 0 0-3.868 3.867c0 1.502.828 2.96 1.563 4.156.447.74.942 1.452 1.48 2.128a1.066 1.066 0 0 0 1.644 0 19.977 19.977 0 0 0 1.48-2.128c.736-1.195 1.564-2.654 1.564-4.156a3.883 3.883 0 0 0-3.864-3.867Z",fill:"#8229F9"}),r.createElement("path",{d:"M46.849 63.594a1.758 1.758 0 1 0 .002 3.516 1.758 1.758 0 0 0-.002-3.516Z",fill:"#fff",stroke:"#8229F9",strokeWidth:".114",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.924 36.432a4.423 4.423 0 0 0-4.406 4.409c0 1.71.942 3.374 1.782 4.736a22.622 22.622 0 0 0 1.685 2.426 1.213 1.213 0 0 0 1.88 0 22.303 22.303 0 0 0 1.693-2.427c.838-1.362 1.78-3.026 1.78-4.736a4.423 4.423 0 0 0-4.414-4.408Z",fill:"#8229F9"}),r.createElement("path",{d:"M63.923 38.834a2.006 2.006 0 0 0-1.416 3.422 2.004 2.004 0 1 0 1.416-3.422Z",fill:"#fff",stroke:"#8229F9",strokeWidth:".13",strokeMiterlimit:"10"}),r.createElement("path",{d:"M110.286 26.158a4.737 4.737 0 0 0-4.72 4.722c0 1.834 1.01 3.614 1.908 5.078a24.468 24.468 0 0 0 1.807 2.598 1.293 1.293 0 0 0 1.007.477 1.304 1.304 0 0 0 1.007-.477 24.699 24.699 0 0 0 1.806-2.6c.896-1.459 1.908-3.239 1.908-5.078a4.738 4.738 0 0 0-4.723-4.72Z",fill:"#8229F9"}),r.createElement("path",{d:"M110.285 28.73a2.145 2.145 0 0 0-1.985 1.326 2.152 2.152 0 0 0 .466 2.341 2.145 2.145 0 0 0 2.341.466 2.153 2.153 0 0 0 1.327-1.985 2.158 2.158 0 0 0-2.149-2.148Z",fill:"#fff",stroke:"#8229F9",strokeWidth:".14",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("linearGradient",{id:"a",x1:"78.094",y1:"80.082",x2:"78.739",y2:"92.829",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#FF9085"}),r.createElement("stop",{offset:"1",stopColor:"#FB6FBB"})),r.createElement("linearGradient",{id:"b",x1:"73.498",y1:"104.046",x2:"83.501",y2:"91.458",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#FFC444"}),r.createElement("stop",{offset:"1",stopColor:"#F36F56"}))));var we=n(9090),xe=n(7762),Ee="index-module_confirmation__Y80Tc",ke="index-module_back__-7-jq",Ie="index-module_fullscreen__EFnwa",Ce="index-module_dialog__op7mb",Se="index-module_dialogHeader__o0-XE",Me="index-module_menu__jIFcO",Te="index-module_map-menu__pPEaQ",Oe="index-module_map-menu-empty__yiabw",Ne="index-module_helptext__Sh18B",Pe="index-module_geomap__MVP4J",Re="index-module_fallback__OF9RO",Le="index-module_radius-actions__zqIao",Fe="index-module_radius-menu-chunk__9qpdG",Ae="index-module_radius-menu-text__GBrbV",je="index-module_helper-icon__Rfw33",De="index-module_apply__FHYzD",Be="index-module_radius-picker__JrvRZ",ze="index-module_radius-picker-label-text__6U8Mv",Ve="index-module_radius-search-trigger__nC3LY",Ue="index-module_here-map__QnE62",He="index-module_no-scroll__A-Mlj",qe="index-module_full-height__1p-hu";const $e={lat:41.87194,lng:12.56738},Ke=({assetsBase:e,apiKey:t,selectedPoint:n,radius:i})=>{const o=(0,r.useRef)(null),[a,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if((0,we.j)())if(void 0==window.H)try{import(`${e}/static/here-maps/here-sdk-313011.js`).then((()=>{s(!0)})).catch((()=>{console.error("Unable to load HERE maps code."),s(!1)}))}catch(t){console.error("Import failed, unable to load HERE Maps code")}else s(!0)}),[e,s]);const[l,c]=(0,r.useState)(null);return(0,r.useLayoutEffect)((()=>{if(o.current&&a){const e=window.H,n=new e.service.Platform({apikey:t}).createDefaultLayers({ppi:250,lg:"it-IT",crossOrigin:"anonymous"}),r=24,i=24,a=204,s=24,l=new e.Map(o.current,n.vector.normal.map,{padding:{top:r,right:i,bottom:a+s,left:i},pixelRatio:window.devicePixelRatio||1,center:$e,zoom:5});return c(l),()=>{l.dispose()}}}),[a,t,c]),(0,r.useEffect)((()=>{if(null==l)return;l.setCenter({lat:n.lat,lng:n.lng});const e=new H.map.Icon((0,xe.renderToStaticMarkup)(r.createElement(k.J,{name:k.u.Pin,iconSize:oe.Jh.MD,fillColor:oe.YI.PurpleImmobili})),{size:{w:32,h:32},crossOrigin:!1}),t=new H.map.Marker({lat:n.lat,lng:n.lng},{icon:e});return l.addObject(t),()=>{(null===l||void 0===l?void 0:l.getObjects().includes(t))&&(null===l||void 0===l||l.removeObject(t))}}),[l,n.lat,n.lng]),(0,r.useEffect)((()=>{if(null==l)return;const e=new window.H.map.Circle({lat:n.lat,lng:n.lng},i,{style:{lineWidth:2,strokeColor:oe.YI.PurpleImmobili,fillColor:"rgba(162, 89, 255, 0.1)"}});return l.addObject(e),l.getViewModel().setLookAtData({bounds:e.getBoundingBox()}),()=>{(null===l||void 0===l?void 0:l.getObjects().includes(e))&&(null===l||void 0===l||l.removeObject(e))}}),[l,i,n.lat,n.lng]),r.createElement("div",{className:Ue,ref:o})},Ge=r.createRef();var Ze;!function(e){e[e.ModeSelection=0]="ModeSelection",e[e.RadiusMap=1]="RadiusMap",e[e.Geogos=2]="Geogos"}(Ze||(Ze={}));const We=1e3;function Je({assetsBase:e,value:t,options:n,labelId:i,name:o,onDialogClose:a,onDialogOpen:s,onSelect:l,pulse:c,updateItems:u,storeRecentSearch:d,resultsPreview:p,updateResultsPreview:f,variant:m,hereApiKey:h}){const[g,v]=(0,r.useState)(!1),[y,_]=(0,r.useState)(""),[b,w]=(0,r.useState)("geogos"===t.responseFrom?Ze.Geogos:Ze.RadiusMap),[I,C]=(0,r.useState)((()=>"here"===t.responseFrom?{friendlyName:t.entry.friendlyName,lat:t.entry.point.lat,lng:t.entry.point.lng}:void 0)),[S,O]=(0,r.useState)((()=>"here"===t.responseFrom?t.radius:We)),[R,F]=(0,r.useState)(t);(0,r.useEffect)((()=>{g&&void 0!=I&&b===Ze.RadiusMap&&(null===f||void 0===f||f({responseFrom:"here",entry:{friendlyName:I.friendlyName,point:{lat:I.lat,lng:I.lng}},radius:S}))}),[g,b,S,I,f]),(0,r.useEffect)((()=>{"radius"!==m&&(_(""),w(Ze.Geogos),C(void 0),O(We),F(t))}),[t,m]);const A=(0,r.useMemo)((()=>"geogos"===t.responseFrom?X(t.entry).inputLabel:t.entry.friendlyName),[t.entry,t.responseFrom]),{getComboboxProps:U,getInputProps:H,getItemProps:q,getMenuProps:$,highlightedIndex:K,inputValue:G,setInputValue:Z,selectedItem:W}=(0,T.Kb)({isOpen:g,items:n.items,labelId:i,initialInputValue:A,itemToString:e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.inputLabel)&&void 0!==t?t:""},onInputValueChange:e=>{const t=b===Ze.RadiusMap?"here":"geogos";e.type===T.Kb.stateChangeTypes.ItemClick?u(t,""):g&&""!==e.inputValue&&y!==e.inputValue&&u(t,e.inputValue)},onSelectedItemChange:({selectedItem:e})=>{var t;if(null!=e)if(null===(t=Ge.current)||void 0===t||t.blur(),x(e))null===c||void 0===c||c.queueEvent(z(e.value,e.inputLabel,K+1,e.isRecentSearch)),F(e.value),l(e.value),v(!1),C(void 0),O(We),null===d||void 0===d||d(e);else{const{lat:t,lng:n}=e.value.entry.point;C({lat:t,lng:n,friendlyName:e.value.entry.friendlyName,addressToTrack:e.value.entry.addressToTrack})}},onStateChange:e=>{var t;e.type===T.Kb.stateChangeTypes.ItemClick&&null==e.selectedItem&&(null===(t=Ge.current)||void 0===t||t.blur(),v(!1),null===c||void 0===c||c.queueEvent(z(null===W||void 0===W?void 0:W.value,null===W||void 0===W?void 0:W.inputLabel,K+1,null===W||void 0===W?void 0:W.isRecentSearch)))}});(0,r.useEffect)((()=>{if(!g)if("here"===t.responseFrom){Z(t.entry.friendlyName),t.radius>0?O(t.radius):(console.error(`Invalid radius ${t.radius}m, using the default value instead.`),O(We)),_(""),w(Ze.RadiusMap);const e={friendlyName:t.entry.friendlyName,lat:t.entry.point.lat,lng:t.entry.point.lng};C(e),O(t.radius),F(t)}else{const e=X(t.entry,t.searchNearRegions).inputLabel;Z(e),_(""),w(Ze.Geogos),C(void 0),O(We),F(t)}}),[t,Z,O,g]),(0,r.useEffect)((()=>{var e,t;g?(document.body.classList.add(He),document.documentElement.classList.add(qe),null===(t=null===(e=Ge.current)||void 0===e?void 0:e.scrollIntoView)||void 0===t||t.call(e,!0)):(document.body.classList.remove(He),document.documentElement.classList.remove(qe))}),[g]);const J=(0,r.useCallback)((()=>{var e;b===Ze.Geogos?(null===c||void 0===c||c.queueEvent(V()),u("geogos","")):(null===c||void 0===c||c.queueEvent({type:"Click",intent:"Close",object:{id:"radiussearch:element:dismiss",type:"UIElement",action:"Click UIElement",elementType:"Button",label:"X",position:"Top"},page:D("listing"),target:B("listing")}),u("here","")),l(R),v(!1),null===(e=Ge.current)||void 0===e||e.blur()}),[b,u,c,R,l]),Y=(0,r.useCallback)((()=>{var e;Z(""),null===(e=Ge.current)||void 0===e||e.focus()}),[Z]),ee=(0,r.useCallback)((()=>{v(!0),null===s||void 0===s||s()}),[s]),te=(0,r.useCallback)((()=>{null===a||void 0===a||a()}),[a]);(0,re.B)({isOpen:g,modalHash:"#geo-search-dialog",onHashDialogEnter:ee,onHashDialogLeave:te,onHistoryBack:J});const ne=null!=I;return r.createElement("div",{className:M()(Ce,{[Ie]:g}),onClick:e=>{e.stopPropagation()}},r.createElement("div",{...U(),className:Se},r.createElement("button",{type:"button",className:ke,onClick:J,"aria-label":"Torna indietro"},r.createElement("img",{src:`${e}/static/icons/cactus/back-arrow.svg`,width:"24",height:"24",alt:"",crossOrigin:"anonymous"})),r.createElement(E.ZP,{size:E.J9.Large,icon:k.u.Pin,withClearIcon:g&&(null===G||void 0===G?void 0:G.length)>0,onInputChange:e=>Z(e.target.value),onCleared:Y,disableNativeAC:!0,...H({ref:Ge,type:E.T3.Search,placeholder:b===Ze.RadiusMap?"Indirizzo, quartiere, citt\xe0, o CAP":"Comune, Provincia o Regione",name:o,value:G,onFocus:()=>{g||(v(!0),w(Ze.Geogos),_(G||""),Z(""),setTimeout((()=>{window.scrollTo(0,0),document.body.scrollTop=0}),250))}})}),g||"radius"!==m?null:r.createElement(ie.ZP,{type:ie.L$.SolidLite,iconRight:ne?r.createElement(k.J,{name:k.u.ArrowDown,iconSize:oe.Jh.SM,fillColor:"currentColor",customViewBox:"4 0 18 18"}):void 0,onClick:()=>{var e;_(G),b!==Ze.RadiusMap?(w(Ze.RadiusMap),Z("")):null===(e=Ge.current)||void 0===e||e.blur(),v(!0),null==I&&setTimeout((()=>{var e;return null===(e=Ge.current)||void 0===e?void 0:e.focus()}),0),null===c||void 0===c||c.queueEvent(function({label:e}){return{type:"Click",intent:"Open",object:{type:"UIElement",id:"radiussearch:element:open",name:"GeoSearchOpen",action:"Click UIElement",elementType:"Button",label:e,position:"Top",size:"small"},page:D("listing"),target:B("listing")}}({label:null!=S?Q(S):"Ricerca con raggio"}))},classes:[Ve]},ne?Q(S):"Cerca per distanza")),r.createElement("ul",{...$(),className:M()(Me,{[Te]:b===Ze.RadiusMap&&g,[Oe]:b===Ze.RadiusMap&&g&&(0===n.items.length||"map"!==n.kind)})},g&&(b===Ze.Geogos&&"search"===n.kind||b===Ze.RadiusMap&&"map"===n.kind)&&n.items.map(((e,t)=>r.createElement("li",{className:M()(N,{[P]:K===t}),key:`${e.inputLabel}${t}`,...q({item:e,index:t})},r.createElement(L,{geoOptionsLabels:e.optionLabels,query:b===Ze.Geogos?G:void 0})," "))),g&&b===Ze.Geogos&&"recent"===n.kind&&r.createElement(j,{getItemProps:q,highlightedIndex:K,searches:n.items,selectedItem:null==W||x(W)?W:null,assetsBase:e,variant:"mobile"}),g&&b===Ze.Geogos&&"new"===n.kind&&r.createElement(Xe,{assetsBase:e})),g&&b===Ze.RadiusMap?r.createElement("div",{id:Le,className:"theme-purpleImmobili"},null==I?r.createElement("div",{id:je},r.createElement(be,{className:M()(Fe)}),r.createElement("h3",{className:M()(Fe,Ae)},"Cerca per distanza"),r.createElement("p",{className:M()(Fe,Ae)},"Indica un luogo e seleziona poi un raggio di distanza massimo.")):null,null!=I?r.createElement(r.Fragment,null,r.createElement(Ke,{apiKey:h,selectedPoint:I,radius:S,assetsBase:e}),r.createElement("div",{className:Ee},r.createElement(Ye,{startingRadius:S,setRadius:O}),r.createElement(ie.ZP,{size:ie.qE.Large,classes:[De,Fe],onClick:()=>{const e={responseFrom:"here",radius:S,entry:{point:{lat:I.lat,lng:I.lng},friendlyName:I.friendlyName,addressToTrack:I.addressToTrack}};l(e),Z(I.friendlyName),F(e),v(!1)}},void 0!=p?`Vedi ${Intl.NumberFormat("it").format(p)} risultat${1===p?"o":"i"}`:"Vedi i risultati"))):null):null)}const Xe=({assetsBase:e})=>r.createElement("div",{className:Re},r.createElement(ae.ul,null,"Inserisci il luogo"),r.createElement(I.A,{size:C.yH.Small,classes:[Ne]},"Puoi cercare per comune, provincia o regione scrivendo nella barra di ricerca in alto"),r.createElement("img",{className:Pe,src:`${e}/static/illustrations/GeolocationMap.png`,alt:"",width:"186",height:"140",crossOrigin:"anonymous"}));function Ye({startingRadius:e=1e3,setRadius:t}){const n=r.useCallback((e=>{t(e)}),[t]);return(0,r.useEffect)((()=>{t(e)}),[t,e]),r.createElement("div",{className:Be},r.createElement("label",{htmlFor:"radius"},r.createElement(I.A,{weight:C.fs.Semibold,classes:[ze]},"Seleziona il raggio")),r.createElement(_e,{size:he.Large,min:500,max:1e4,defaultValue:e,step:500,onAfterChange:n,withLabel:!0,valueLabelBuilder:Q}))}class Qe extends d.o{}const et={...a.genericResponseSchema,payload:"data.items"},tt=Object.create(null,{lang:{value:"it",enumerable:!0}});class nt{constructor({apiKey:e,baseUrl:t="https://geocode.search.hereapi.com"}){this.httpClient=(0,u.m)(t,"/v1",void 0),this.httpClient.defaults.params={...tt,apiKey:e}}async geocode(e){const[t,n]=await(0,o.to)(this.httpClient.get("geocode",{params:{q:e,in:"countryCode:ITA",limit:"5"}})),r=(0,c._y)(t,n,et,Qe);if(t)throw r;return r}}const rt={entry:{region:b},searchNearRegions:!1,responseFrom:"geogos"};function it({assetsBase:e,channel:t="web",debounceTimeout:n=250,hadesBasePath:o,value:a=rt,labelId:s,name:l="/geo",onDialogClose:c,onDialogOpen:u,onSelect:d,pulseInstance:p,resultsLimit:f=10,hereApiKey:m,variant:h="base",updateResultsPreview:g,resultsPreview:y,useWorker:_=!1}){const{isMobile:b}=(0,i.S)(),[x,E]=function(e,t,n,i,o=!1){const[a,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),u=(0,U.Z)(l,n),d=(0,r.useCallback)(((e="")=>{c(e)}),[c]),p=(0,r.useMemo)((()=>new v(e,t)),[e,t]);return(0,r.useEffect)((()=>{u.length>=2?p.search(u,{lim:i},o).then((e=>{s(G(e))})):s([])}),[p,u,i,o]),[a,d]}(o,t,n,f,_),[k,I]=((e,t)=>{const[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)(""),s=(0,U.Z)(o,t),l=(0,r.useCallback)(((e="")=>{a(e)}),[a]),c=(0,r.useMemo)((()=>new nt({apiKey:e})),[e]);return(0,r.useEffect)((()=>{s.length>=2?c.geocode(s).then((e=>{i((e=>{var t;if(null==e.payload||!(null===(t=e.payload)||void 0===t?void 0:t.some((e=>void 0!=e.position))))return[];const{payload:n}=e,r=[];for(const i of n){if(void 0==i.position)continue;const e={point:i.position,friendlyName:i.title,addressToTrack:i.address};r.push({optionLabels:[i.title],inputLabel:i.title,value:{entry:e,responseFrom:"here"},isRecentSearch:!1})}return r})(e))})).catch(console.error):i([])}),[c,s]),[n,l]})(m,n),[C,S]=function(e,t){if(!e)throw new Error("useLocalStorage key may not be falsy");const n=(0,r.useCallback)((()=>{try{const n=localStorage.getItem(e);return null!=n?JSON.parse(n):(t&&localStorage.setItem(e,JSON.stringify(t)),t)}catch(n){return console.log("Error in useLocalStorage",n),t}}),[t,e]),[i,o]=(0,r.useState)(n),a=(0,r.useCallback)((t=>{try{let n;if(n=t instanceof Function?t(i):t,"undefined"===typeof n)return;const r=JSON.stringify(n);localStorage.setItem(e,r),o((()=>JSON.parse(r))),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:r}))}catch(n){}}),[e,i]),s=(0,r.useCallback)((()=>{try{localStorage.removeItem(e),o(void 0),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:void 0}))}catch(t){}}),[e,o]);return(0,r.useEffect)((()=>{const t=t=>{if(t&&t.key===e)try{o((()=>t.newValue?JSON.parse(t.newValue):void 0))}catch(t){console.warn("Could set new local storage value",t)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[e]),[i,a,s]}("recent_geo_searches_v2",[]),M=(0,r.useCallback)((e=>{if(e&&!w(e)&&e.inputLabel!==J.inputLabel)if(e.isRecentSearch=!0,null===C||void 0===C?void 0:C.length){const t=C.filter((t=>t.inputLabel!==e.inputLabel));S([e,...t].slice(0,3))}else S([e])}),[C,S]),T=(0,r.useMemo)((()=>k.length>0?{kind:"map",items:k}:x.length>0?{kind:"search",items:x}:C&&C.length>0?{kind:"recent",items:[J,...C]}:{kind:"new",items:[]}),[x,k,C]),O=(0,r.useMemo)((()=>a),[a]);return b?r.createElement(Je,{hereApiKey:m,assetsBase:e,value:O,labelId:s,name:l,onDialogClose:c,onDialogOpen:u,onSelect:d,options:T,pulse:p,storeRecentSearch:M,updateItems:(e,t)=>"here"===e?I(t):E(t),variant:h,updateResultsPreview:g,resultsPreview:y}):r.createElement(te,{value:O,labelId:s,name:l,onSelect:d,options:T,pulse:p,storeRecentSearch:M,updateItems:(e,t)=>E(t),variant:h,assetsBase:e})}},4394:function(e,t,n){"use strict";t.Y=async function(e){if("undefined"!==typeof window){return(await Promise.resolve().then((function(){return n(9078)}))).getData(e)}}},9078:function(e,t,n){"use strict";var r,i;if(!self.define){let e,t={};const n=;self.define=