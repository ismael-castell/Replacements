(function(f){var g;if(typeof window!=="undefined"){g=window}else if(typeof self!=="undefined"){g=self}g.freshpaintIntegrations=f()})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var foldl=require("@ndhoule/foldl");var integration=require("@segment/analytics.js-integration");var map=require("@ndhoule/map");var snake=require("to-snake-case");var useHttps=require("use-https");var AdRoll=module.exports=integration("AdRoll").assumesPageview().global("__adroll").global("__adroll_loaded").global("adroll_adv_id").global("adroll_custom_data").global("adroll_email").global("adroll_pix_id").option("advId","").option("pixId","").option("_version",2).tag("http",'<script src="http://a.adroll.com/j/roundtrip.js">').tag("https",'<script src="https://s.adroll.com/j/roundtrip.js">').mapping("events");AdRoll.prototype.initialize=function(){window.adroll_adv_id=this.options.advId;window.adroll_pix_id=this.options.pixId;window.__adroll_loaded=true;var name=useHttps()?"https":"http";this.load(name,this.ready)};AdRoll.prototype.loaded=function(){return!!window.__adroll};AdRoll.prototype.page=function(page){this.track(page.track(page.fullName()))};AdRoll.prototype.identify=function(identify){if(identify.email()){window.adroll_email=identify.email();window.__adroll.record_adroll_email("segment")}};AdRoll.prototype.track=function(track){var events=this.events(track.event());var userId=this.analytics.user().id();var data=formulateData(track,{revenue:"adroll_conversion_value"});if(this.options._version===1){if(!events.length)events=[track.event()];events=map(snake,events)}if(userId)data.user_id=userId;sendConversion(events,data)};AdRoll.prototype.productViewed=AdRoll.prototype.productAdded=function(track){var events=this.events(track.event());var userId=this.analytics.user().id();var data=formulateData(track,{id:"product_id",productId:"product_id",price:"adroll_conversion_value"});if(this.options._version===1){if(!events.length)events=[track.event()];events=map(snake,events)}if(userId)data.user_id=userId;sendConversion(events,data)};AdRoll.prototype.orderCompleted=function(track){var events=this.events(track.event());var userId=this.analytics.user().id();var data=formulateData(track,{orderId:"order_id",revenue:"adroll_conversion_value"});if(track.properties().currency){data.adroll_currency=track.properties().currency;delete data.currency}if(this.options._version===1){if(!events.length)events=[track.event()];events=map(snake,events)}if(userId)data.user_id=userId;sendConversion(events,data)};function sendConversion(events,d){each(function(segmentId){var data=d;data.adroll_segments=segmentId;window.__adroll.record_user(data)},events)}function formulateData(track,alias){var aliases=alias||{};var ret=foldl(function(props,val,key){var properties=props;properties[snake(key)]=val;return properties},track.properties(aliases));return ret}},{"@ndhoule/each":67,"@ndhoule/foldl":70,"@ndhoule/map":73,"@segment/analytics.js-integration":95,"to-snake-case":192,"use-https":198}],2:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var AdWords=module.exports=integration("AdWords").option("conversionId","").option("pageRemarketing",false).option("eventMappings",[]).tag('<script src="//www.googleadservices.com/pagead/conversion_async.js">');AdWords.prototype.initialize=function(){var loaded=this.loaded;var ready=this.ready;this.load(function(){when(loaded,ready)})};AdWords.prototype.loaded=function(){return!!(document.body&&window.google_trackConversion)};AdWords.prototype.page=function(page){var remarketing=this.options.pageRemarketing;var id=this.options.conversionId;var props=page.properties();window.google_trackConversion({google_conversion_id:id,google_custom_params:{},google_remarketing_only:false});if(remarketing){window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:true})}};AdWords.prototype.track=function(track){var self=this;var props=track.properties();var eventMappings=this.options.eventMappings;var revenue=track.revenue()||0;eventMappings.forEach(function(mapping){var id;if(mapping.value){if(mapping.value.eventName.toLowerCase()!==track.event().toLowerCase())return;id=mapping.value.conversionId||self.options.conversionId;if(mapping.value.label!==""){delete props.revenue;window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:mapping.value.label,google_conversion_value:revenue,google_remarketing_only:false})}if(mapping.value.remarketing){window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:true})}}else{if(mapping.eventName.toLowerCase()!==track.event().toLowerCase())return;id=mapping.conversionId||self.options.conversionId;if(mapping.label!==""){delete props.revenue;window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:mapping.label,google_conversion_value:revenue,google_remarketing_only:false})}if(mapping.remarketing){window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:true})}}})}},{"@segment/analytics.js-integration":95,"do-when":139}],3:[function(require,module,exports){"use strict";var bind=require("component-bind");var integration=require("@segment/analytics.js-integration");var topDomain=require("@segment/top-domain");var when=require("do-when");var is=require("is");var each=require("@ndhoule/each");var Track=require("segmentio-facade").Track;var umd=typeof window.define==="function"&&window.define.amd;var src="https://cdn.amplitude.com/libs/amplitude-5.2.2-min.gz.js";var Amplitude=module.exports=integration("Amplitude").global("amplitude").option("apiKey","").option("trackAllPages",false).option("trackNamedPages",true).option("trackCategorizedPages",true).option("trackUtmProperties",true).option("trackReferrer",false).option("batchEvents",false).option("eventUploadThreshold",30).option("eventUploadPeriodMillis",3e4).option("useLogRevenueV2",false).option("forceHttps",false).option("trackGclid",false).option("saveParamsReferrerOncePerSession",true).option("deviceIdFromUrlParam",false).option("mapQueryParams",{}).option("trackRevenuePerProduct",false).option("preferAnonymousIdForDeviceId",false).option("traitsToSetOnce",[]).option("traitsToIncrement",[]).option("appendFieldsToEventProps",{}).option("unsetParamsReferrerOnNewSession",false).option("trackProductsOnce",false).option("versionName","").tag('<script src="'+src+'">');Amplitude.prototype.initialize=function(){(function(e,t){var n=e.amplitude||{_q:[],_iq:{}};function s(e,t){e.prototype[t]=function(){this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}var o=function(){this._q=[];return this};var a=["add","append","clearAll","prepend","set","setOnce","unset"];for(var u=0;u<a.length;u++){s(o,a[u])}n.Identify=o;var c=function(){this._q=[];return this};var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(var p=0;p<l.length;p++){s(c,l[p])}n.Revenue=c;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function v(e){function t(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}for(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){e=(!e||e.length===0?"$default_instance":e).toLowerCase();if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]};e.amplitude=n})(window,document);this.setDomain(window.location.href);window.amplitude.getInstance().init(this.options.apiKey,null,{includeUtm:this.options.trackUtmProperties,batchEvents:this.options.batchEvents,eventUploadThreshold:this.options.eventUploadThreshold,eventUploadPeriodMillis:this.options.eventUploadPeriodMillis,forceHttps:this.options.forceHttps,includeGclid:this.options.trackGclid,saveParamsReferrerOncePerSession:this.options.saveParamsReferrerOncePerSession,deviceIdFromUrlParam:this.options.deviceIdFromUrlParam,unsetParamsReferrerOnNewSession:this.options.unsetParamsReferrerOnNewSession,deviceId:this.options.preferAnonymousIdForDeviceId&&this.analytics&&this.analytics.user()&&this.analytics.user().anonymousId()});var versionName=this.options.versionName;if(versionName){window.amplitude.getInstance().setVersionName(versionName)}var loaded=bind(this,this.loaded);var ready=this.ready;if(umd){window.require([src],function(amplitude){window.amplitude=amplitude;when(loaded,function(){window.amplitude.runQueuedFunctions();ready()})});return}this.load(function(){if(window.amplitude.runQueuedFunctions){window.amplitude.runQueuedFunctions();ready()}})};Amplitude.prototype.loaded=function(){return!!(window.amplitude&&window.amplitude.getInstance()&&window.amplitude.getInstance().options)};Amplitude.prototype.page=function(page){this.setDeviceIdFromAnonymousId(page);if(this.options.trackReferrer)this.sendReferrer();var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Amplitude.prototype.identify=function(identify){this.setDeviceIdFromAnonymousId(identify);var id=identify.userId();var traits=identify.traits();if(id)window.amplitude.getInstance().setUserId(id);var mapQueryParams=this.options.mapQueryParams;var query=identify.proxy("context.page.search");if(!is.empty(mapQueryParams)){each(function(value,key){traits[key]=query},mapQueryParams)}this.setTraits(traits);var groups=identify.options(this.name).groups;if(groups&&is.object(groups)){for(var group in groups){if(groups.hasOwnProperty(group))window.amplitude.getInstance().setGroup(group,groups[group])}}};Amplitude.prototype.setTraits=function(traits){var traitsToIncrement=this.options.traitsToIncrement||[];var traitsToSetOnce=this.options.traitsToSetOnce||[];var amplitudeIdentify=new window.amplitude.Identify;for(var trait in traits){if(!traits.hasOwnProperty(trait))continue;var shouldIncrement=traitsToIncrement.indexOf(trait)>=0;var shouldSetOnce=traitsToSetOnce.indexOf(trait)>=0;if(shouldIncrement){amplitudeIdentify.add(trait,traits[trait])}if(shouldSetOnce){amplitudeIdentify.setOnce(trait,traits[trait])}if(!shouldIncrement&&!shouldSetOnce){amplitudeIdentify.set(trait,traits[trait])}}window.amplitude.identify(amplitudeIdentify)};Amplitude.prototype.track=logEvent;function logEvent(track,dontSetRevenue){this.setDeviceIdFromAnonymousId(track);var props=track.properties();var options=track.options(this.name);var event=track.event();var mapQueryParams=this.options.mapQueryParams;var query=track.proxy("context.page.search");if(!is.empty(mapQueryParams)){var params={};var type;each(function(value,key){type=value;if(type==="user_properties"){params[key]=query}else{props[key]=query}},mapQueryParams);if(type==="user_properties")window.amplitude.getInstance().setUserProperties(params)}each(function(prop,field){props[prop]=track.proxy(field)},this.options.appendFieldsToEventProps);if(options.groups){window.amplitude.getInstance().logEventWithGroups(event,props,options.groups)}else{window.amplitude.getInstance().logEvent(event,props)}if(track.revenue()&&!dontSetRevenue)this.setRevenue(mapRevenueAttributes(track))}Amplitude.prototype.orderCompleted=function(track){this.setDeviceIdFromAnonymousId(track);var products=track.products();var clonedTrack=track.json();var trackRevenuePerProduct=this.options.trackRevenuePerProduct;var revenueType=track.proxy("properties.revenueType");var revenue=track.revenue();var trackProductsOnce=this.options.trackProductsOnce;if(trackProductsOnce){var allProducts=[];var productKeys=Object.keys(products);for(var index=0;index<productKeys.length;index++){var eachProduct=new Track({properties:products[index]});allProducts.push(mapProductAttributes(eachProduct))}clonedTrack.properties.products=allProducts;logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct);return}delete clonedTrack.properties.products;logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct);each(function(product){var price=product.price;var quantity=product.quantity;clonedTrack.properties=product;clonedTrack.event="Product Purchased";if(trackRevenuePerProduct&&price!=null&&quantity){if(revenueType){clonedTrack.properties.revenueType=revenueType}if(revenue){clonedTrack.properties.revenue=revenue}this.setRevenue(mapRevenueAttributes(new Track(clonedTrack)))}logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct)}.bind(this),products)};Amplitude.prototype.group=function(group){this.setDeviceIdFromAnonymousId(group);var groupType=group.traits()[this.options.groupTypeTrait];var groupValue=group.traits()[this.options.groupValueTrait];if(groupType&&groupValue){window.amplitude.getInstance().setGroup(groupType,groupValue)}else{var groupId=group.groupId();if(groupId){window.amplitude.getInstance().setGroup("[Segment] Group",groupId)}}};Amplitude.prototype.setDomain=function(href){var domain=topDomain(href);window.amplitude.setDomain(domain)};Amplitude.prototype.setDeviceIdFromAnonymousId=function(facade){if(this.options.preferAnonymousIdForDeviceId){this.setDeviceId(facade.anonymousId())}};Amplitude.prototype.setDeviceId=function(deviceId){if(deviceId)window.amplitude.getInstance().setDeviceId(deviceId)};Amplitude.prototype.setRevenue=function(properties){var price=properties.price;var productId=properties.productId;var revenueType=properties.revenueType;var quantity=properties.quantity;var eventProps=properties.eventProps;var revenue=properties.revenue;if(this.options.useLogRevenueV2){if(!price){price=revenue;quantity=1}var ampRevenue=(new window.amplitude.Revenue).setPrice(price).setQuantity(quantity).setEventProperties(eventProps);if(revenueType)ampRevenue.setRevenueType(revenueType);if(productId)ampRevenue.setProductId(productId);window.amplitude.getInstance().logRevenueV2(ampRevenue)}else{window.amplitude.getInstance().logRevenue(revenue||price*quantity,quantity,productId)}};Amplitude.prototype.sendReferrer=function(){var identify=new window.amplitude.Identify;var referrer=this.getReferrer();if(!referrer||referrer.length===0)return;identify.setOnce("initial_referrer",referrer);identify.set("referrer",referrer);var parts=referrer.split("/");if(parts.length>=3){var referringDomain=parts[2];identify.setOnce("initial_referring_domain",referringDomain);identify.set("referring_domain",referringDomain)}window.amplitude.getInstance().identify(identify)};Amplitude.prototype.getReferrer=function(){return document.referrer};function mapRevenueAttributes(track){var mapRevenueType={"order completed":"Purchase","completed order":"Purchase","product purchased":"Purchase"};return{price:track.price(),productId:track.productId(),revenueType:track.proxy("properties.revenueType")||mapRevenueType[track.event().toLowerCase()],quantity:track.quantity(),eventProps:track.properties(),revenue:track.revenue()}}function mapProductAttributes(product){return{productId:product.productId(),sku:product.sku(),name:product.name(),price:product.price(),quantity:product.quantity(),category:product.category()}}},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,"@segment/top-domain":117,"component-bind":121,"do-when":139,is:149,"segmentio-facade":179}],4:[function(require,module,exports){var appboyUtil={shouldOpenSession:function(userId,options){return!!(userId||!options.onlyTrackKnownUsersOnWeb)},getCustomEndpoint:function(options){var customEndpoint;if(options.customEndpoint){var endpoint=options.customEndpoint;var regex=new RegExp("^(http|https)://","i");customEndpoint=(regex.test(endpoint)?endpoint:"https://"+endpoint)+"/api/v3"}else if(options.datacenter==="eu"){customEndpoint="https://sdk.fra-01.braze.eu/api/v3"}return customEndpoint},getMajorVersion:function(options){return Math.floor(Number(options.version))},isMajorVersionTwo:function(options){return appboyUtil.getMajorVersion(options)===2},isMajorVersionThree:function(options){return appboyUtil.getMajorVersion(options)===3},getConfig:function(options){var config={};if(appboyUtil.isMajorVersionTwo(options)||appboyUtil.isMajorVersionThree(options)){config={safariWebsitePushId:options.safariWebsitePushId,enableHtmlInAppMessages:options.enableHtmlInAppMessages,allowCrawlerActivity:options.allowCrawlerActivity,doNotLoadFontAwesome:options.doNotLoadFontAwesome,enableLogging:options.enableLogging,localization:options.localization,minimumIntervalBetweenTriggerActionsInSeconds:Number(options.minimumIntervalBetweenTriggerActionsInSeconds)||30,openInAppMessagesInNewTab:options.openInAppMessagesInNewTab,openNewsFeedCardsInNewTab:options.openNewsFeedCardsInNewTab,requireExplicitInAppMessageDismissal:options.requireExplicitInAppMessageDismissal,serviceWorkerLocation:options.serviceWorkerLocation,sessionTimeoutInSeconds:Number(options.sessionTimeoutInSeconds)||30}}else{var datacenterMappings={us:"https://sdk.iad-01.braze.com",us02:"https://sdk.iad-02.braze.com",us03:"https://sdk.iad-03.braze.com",eu:"https://sdk.fra-01.braze.eu"};if(options.safariWebsitePushId)config.safariWebsitePushId=options.safariWebsitePushId;if(options.enableHtmlInAppMessages)config.enableHtmlInAppMessages=true;if(options.customEndpoint){var endpoint=options.customEndpoint;var regex=new RegExp("^(http|https)://","i");config.baseUrl=(regex.test(endpoint)?endpoint:"https://"+endpoint)+"/api/v3"}else{config.baseUrl=(datacenterMappings[options.datacenter]||"https://sdk.iad-01.braze.com")+"/api/v3"}}var customEndpoint=appboyUtil.getCustomEndpoint(options);if(customEndpoint)config.baseUrl=customEndpoint;return config}};module.exports=appboyUtil},{}],5:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Track=require("segmentio-facade").Track;var each=require("@ndhoule/each");var del=require("obj-case").del;var clone=require("@ndhoule/clone");var appboyUtil=require("./appboyUtil");var Appboy=module.exports=integration("Appboy").global("appboy").option("apiKey","").option("safariWebsitePushId","").option("allowCrawlerActivity",false).option("doNotLoadFontAwesome",false).option("enableLogging",false).option("automaticallyDisplayMessages",true).option("localization","en").option("minimumIntervalBetweenTriggerActionsInSeconds",30).option("openInAppMessagesInNewTab",false).option("openNewsFeedCardsInNewTab",false).option("sessionTimeoutInSeconds",30).option("requireExplicitInAppMessageDismissal",false).option("enableHtmlInAppMessages",false).option("trackAllPages",false).option("trackNamedPages",false).option("customEndpoint","").option("version",1).option("logPurchaseWhenRevenuePresent",false).option("onlyTrackKnownUsersOnWeb",false).tag("v1",'<script src="https://js.appboycdn.com/web-sdk/1.6/appboy.min.js">').tag("v2",'<script src="https://js.appboycdn.com/web-sdk/2.4/appboy.min.js">').tag("v2.7",'<script src="https://js.appboycdn.com/web-sdk/2.7/appboy.min.js">').tag("v3.1",'<script src="https://js.appboycdn.com/web-sdk/3.1/appboy.min.js">');Appboy.prototype.appboyInitialize=function(userId,options,config){window.appboy.initialize(options.apiKey,config);if(options.automaticallyDisplayMessages)window.appboy.display.automaticallyShowNewInAppMessages();if(userId)window.appboy.changeUser(userId);window.appboy.openSession()};Appboy.prototype.initialize=function(){if(appboyUtil.isMajorVersionThree(this.options)){this.initializeV3()}else if(appboyUtil.isMajorVersionTwo(this.options)){this.initializeV2()}else{this.initializeV1()}};Appboy.prototype.initializeV1=function(){var options=this.options;var self=this;var userId=this.analytics.user().id();+function(a,p,P,b,y){window.appboy={};for(var s="destroy toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<s.length;i++){for(var k=appboy,l=s[i].split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=function(){console&&console.error("The Appboy SDK has not yet been loaded.")}}appboy.initialize=function(){console&&console.error("Appboy cannot be loaded - this is usually due to strict corporate firewalls or ad blockers.")};appboy.getUser=function(){return new appboy.ab.User};appboy.getCachedFeed=function(){return new appboy.ab.Feed}}(document,"script","link");this._shim=window.appboy.initialize;this.load("v1",function(){if(appboyUtil.shouldOpenSession(userId,options)){self.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);self.initializeTester(options.apiKey,config);self.appboyInitialize(userId,options,config)}self.ready()})};Appboy.prototype.initializeV2=function(){var options=this.options;var userId=this.analytics.user().id();+function(a,p,P,b,y){window.appboy={};window.appboyQueue=[];for(var s="initialize destroy getDeviceId toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick logInAppMessageHtmlClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback trackLocation stopWebTracking resumeWebTracking wipeData ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setLanguage ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.User.prototype.addAlias ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.TextAlignment ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.HtmlMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<s.length;i++){for(var m=s[i],k=appboy,l=m.split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=new Function("return function "+m.replace(/\./g,"_")+"(){appboyQueue.push(arguments); return true}")()}appboy.getUser=function(){return new appboy.ab.User};appboy.getCachedFeed=function(){return new appboy.ab.Feed}}(window,document,"script");if(appboyUtil.shouldOpenSession(userId,options)){this.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);this.initializeTester(options.apiKey,config);this.appboyInitialize(userId,options,config)}var versionTag=Number(options.version)===2.7?"v2.7":"v2";this.load(versionTag,this.ready)};Appboy.prototype.initializeV3=function(){var options=this.options;var userId=this.analytics.user().id();+function(a,p,P,b,y){a.appboy={};a.appboyQueue=[];for(var s="DeviceProperties Card Card.prototype.dismissCard Card.prototype.removeAllSubscriptions Card.prototype.removeSubscription Card.prototype.subscribeToClickedEvent Card.prototype.subscribeToDismissedEvent Banner CaptionedImage ClassicCard ControlCard ContentCards ContentCards.prototype.getUnviewedCardCount Feed Feed.prototype.getUnreadCardCount ControlMessage InAppMessage InAppMessage.SlideFrom InAppMessage.ClickAction InAppMessage.DismissType InAppMessage.OpenTarget InAppMessage.ImageStyle InAppMessage.Orientation InAppMessage.TextAlignment InAppMessage.CropType InAppMessage.prototype.closeMessage InAppMessage.prototype.removeAllSubscriptions InAppMessage.prototype.removeSubscription InAppMessage.prototype.subscribeToClickedEvent InAppMessage.prototype.subscribeToDismissedEvent FullScreenMessage ModalMessage HtmlMessage SlideUpMessage User User.Genders User.NotificationSubscriptionTypes User.prototype.addAlias User.prototype.addToCustomAttributeArray User.prototype.getUserId User.prototype.incrementCustomUserAttribute User.prototype.removeFromCustomAttributeArray User.prototype.setAvatarImageUrl User.prototype.setCountry User.prototype.setCustomLocationAttribute User.prototype.setCustomUserAttribute User.prototype.setDateOfBirth User.prototype.setEmail User.prototype.setEmailNotificationSubscriptionType User.prototype.setFirstName User.prototype.setGender User.prototype.setHomeCity User.prototype.setLanguage User.prototype.setLastKnownLocation User.prototype.setLastName User.prototype.setPhoneNumber User.prototype.setPushNotificationSubscriptionType InAppMessageButton InAppMessageButton.prototype.removeAllSubscriptions InAppMessageButton.prototype.removeSubscription InAppMessageButton.prototype.subscribeToClickedEvent display display.automaticallyShowNewInAppMessages display.destroyFeed display.hideContentCards display.showContentCards display.showFeed display.showInAppMessage display.toggleContentCards display.toggleFeed changeUser destroy getDeviceId initialize isPushBlocked isPushGranted isPushPermissionGranted isPushSupported logCardClick logCardDismissal logCardImpressions logContentCardsDisplayed logCustomEvent logFeedDisplayed logInAppMessageButtonClick logInAppMessageClick logInAppMessageHtmlClick logInAppMessageImpression logPurchase openSession registerAppboyPushMessages removeAllSubscriptions removeSubscription requestContentCardsRefresh requestFeedRefresh requestImmediateDataFlush resumeWebTracking setLogger stopWebTracking subscribeToContentCardsUpdates subscribeToFeedUpdates subscribeToInAppMessage subscribeToNewInAppMessages toggleAppboyLogging trackLocation unregisterAppboyPushMessages wipeData".split(" "),i=0;i<s.length;i++){for(var m=s[i],k=a.appboy,l=m.split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=new Function("return function "+m.replace(/\./g,"_")+"(){window.appboyQueue.push(arguments); return true}")()}window.appboy.getCachedContentCards=function(){return new window.appboy.ContentCards};window.appboy.getCachedFeed=function(){return new window.appboy.Feed};window.appboy.getUser=function(){return new window.appboy.User}}(window,document,"script");if(appboyUtil.shouldOpenSession(userId,options)){this.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);this.initializeTester(options.apiKey,config);this.appboyInitialize(userId,options,config)}this.load("v3.1",this.ready)};Appboy.prototype.shouldHandleEvent=function(){return!this.options.onlyTrackKnownUsersOnWeb||this.hasBeenInitialized};Appboy.prototype.initializeTester=function(){};Appboy.prototype.loaded=function(){var options=this.options;if(Number(options.version)===2)return window.appboyQueue===null;return window.appboy&&window.appboy.initialize!==this._shim};Appboy.prototype.identify=function(identify){var userId=identify.userId();var address=identify.address();var avatar=identify.avatar();var birthday=identify.birthday();var email=identify.email();var firstName=identify.firstName();var gender=identify.gender();var lastName=identify.lastName();var phone=identify.phone();var traits=clone(identify.traits());var options=this.options;if(this.options.onlyTrackKnownUsersOnWeb&&userId&&!this.hasBeenInitialized){this.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);this.initializeTester(options.apiKey,config);this.appboyInitialize(userId,options,config)}if(this.options.onlyTrackKnownUsersOnWeb&&!this.hasBeenInitialized){return}if(userId){window.appboy.changeUser(userId)}if(avatar){window.appboy.getUser().setAvatarImageUrl(avatar)}if(email){window.appboy.getUser().setEmail(email)}if(firstName){window.appboy.getUser().setFirstName(firstName)}if(gender){window.appboy.getUser().setGender(getGender(gender))}if(lastName){window.appboy.getUser().setLastName(lastName)}if(phone){window.appboy.getUser().setPhoneNumber(phone)}if(address){window.appboy.getUser().setCountry(address.country);window.appboy.getUser().setHomeCity(address.city)}if(address){window.appboy.getUser().setCountry(address.country)
;window.appboy.getUser().setHomeCity(address.city)}if(birthday){window.appboy.getUser().setDateOfBirth(birthday.getUTCFullYear(),birthday.getUTCMonth()+1,birthday.getUTCDate())}var reserved=["avatar","address","birthday","email","id","firstName","gender","lastName","phone","facebook","twitter","first_name","last_name","dob","external_id","country","home_city","bio","gender","phone","email_subscribe","push_subscribe"];each(function(key){delete traits[key]},reserved);each(function(value,key){if(value!==null&&typeof value==="object"&&!Array.isArray(value)&&!isDate(value)){delete traits[key]}},traits);each(function(value,key){window.appboy.getUser().setCustomUserAttribute(key,value)},traits)};Appboy.prototype.group=function(group){if(!this.shouldHandleEvent()){return}var userId=group.userId();var groupIdKey="ab_segment_group_"+group.groupId();if(userId){window.appboy.changeUser(userId)}window.appboy.getUser().setCustomUserAttribute(groupIdKey,true)};Appboy.prototype.track=function(track){if(!this.shouldHandleEvent()){return}var userId=track.userId();var eventName=track.event();var properties=track.properties();if(userId){window.appboy.changeUser(userId)}if(this.options.logPurchaseWhenRevenuePresent&&properties.revenue){this.orderCompleted(track)}else{each(function(value,key){if(value!=null&&typeof value==="object"&&!isDate(value)){delete properties[key]}},properties);window.appboy.logCustomEvent(eventName,properties)}};Appboy.prototype.page=function(page){if(!this.shouldHandleEvent()){return}var settings=this.options;if(!settings.trackAllPages&&!settings.trackNamedPages)return;if(settings.trackNamedPages&&!page.name())return;var userId=page.userId();var pageEvent=page.track(page.fullName());var eventName=pageEvent.event();var properties=page.properties();if(userId){window.appboy.changeUser(userId)}window.appboy.logCustomEvent(eventName,properties)};Appboy.prototype.orderCompleted=function(track){if(!this.shouldHandleEvent()){return}var userId=track.userId();var products=track.products();var currencyCode=track.currency();var purchaseProperties=track.properties();if(userId){window.appboy.changeUser(userId)}del(purchaseProperties,"products");del(purchaseProperties,"currency");for(var i=0;i<products.length;i++){logProduct(products[i],currencyCode,purchaseProperties)}};function getGender(gender){if(!gender)return;if(typeof gender!=="string")return;var femaleGenders=["woman","female","w","f"];var maleGenders=["man","male","m"];var otherGenders=["other","o"];if(femaleGenders.indexOf(gender.toLowerCase())>-1)return window.appboy.ab.User.Genders.FEMALE;if(maleGenders.indexOf(gender.toLowerCase())>-1)return window.appboy.ab.User.Genders.MALE;if(otherGenders.indexOf(gender.toLowerCase())>-1)return window.appboy.ab.User.Genders.OTHER}function logProduct(product,currencyCode,extraProperties){var track=new Track({properties:product});var productId=track.productId();var price=track.price();var quantity=track.quantity();var productProperties=track.properties();var properties={};del(productProperties,"productId");del(productProperties,"price");del(productProperties,"quantity");for(var productProperty in productProperties){if(!productProperties.hasOwnProperty(productProperty)){continue}var value=productProperties[productProperty];if(isValidProperty(productProperty,value)){properties[productProperty]=value}}for(var property in extraProperties){if(!extraProperties.hasOwnProperty(property)){continue}var val=extraProperties[property];if(!productProperties.hasOwnProperty(property)&&isValidProperty(property,val)){properties[property]=val}}window.appboy.logPurchase(productId,price,currencyCode,quantity,properties)}function isValidProperty(name,value){if(name.length>255||name.startsWith("$")){return false}if(typeof value==="number"||typeof value==="boolean"){return true}if(isDate(value)){return true}if((typeof value==="string"||value instanceof String)&&value.length<=255){return true}return false}function isDate(value){return typeof value==="object"&&value instanceof Date}},{"./appboyUtil":4,"@ndhoule/clone":64,"@ndhoule/each":67,"@segment/analytics.js-integration":95,"obj-case":165,"segmentio-facade":179}],6:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var load=require("@segment/load-script");var Appcues=integration("Appcues").global("Appcues").option("appcuesId","");Appcues.prototype.initialize=function(){this.load(this.ready)};Appcues.prototype.loaded=function(){return isObject(window.Appcues)};Appcues.prototype.load=function(callback){var id=this.options.appcuesId||"appcues";load("//fast.appcues.com/"+id+".js",callback)};Appcues.prototype.page=function(page){window.Appcues.page(page.name(),page.properties())};Appcues.prototype.identify=function(identify){window.Appcues.identify(identify.userId(),identify.traits())};Appcues.prototype.track=function(track){window.Appcues.track(track.event(),track.properties())};module.exports=exports=function(analytics){analytics.addIntegration(Appcues)};exports.Integration=Appcues},{"@segment/analytics.js-integration":95,"@segment/load-script":111,isobject:150}],7:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Bing=module.exports=integration("Bing Ads").global("UET").global("uetq").option("tagId","").tag('<script src="//bat.bing.com/bat.js">');Bing.prototype.initialize=function(){window.uetq=window.uetq||[];var self=this;self.load(function(){var setup={ti:self.options.tagId,q:window.uetq};window.uetq=new window.UET(setup);self.ready()})};Bing.prototype.loaded=function(){return!!(window.uetq&&window.uetq.push!==Array.prototype.push)};Bing.prototype.page=function(){window.uetq.push("pageLoad")};Bing.prototype.track=function(track){var event={ea:"track",el:track.event()};if(track.category())event.ec=track.category();if(track.revenue())event.gv=track.revenue();window.uetq.push(event)}},{"@segment/analytics.js-integration":95}],8:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var extend=require("@ndhoule/extend");var umd=typeof window.define==="function"&&window.define.amd;var src="//d2wy8f7a9ursnm.cloudfront.net/bugsnag-3.min.js";var Bugsnag=module.exports=integration("Bugsnag").global("Bugsnag").option("apiKey","").option("releaseStage",null).tag('<script src="'+src+'">');Bugsnag.prototype.initialize=function(){var self=this;if(umd){window.require([src],function(bsg){var bugsnag=bsg;bugsnag.apiKey=self.options.apiKey;if(self.options.releaseStage)bugsnag.releaseStage=self.options.releaseStage;window.Bugsnag=bugsnag;self.ready()});return}this.load(function(){window.Bugsnag.apiKey=self.options.apiKey;if(self.options.releaseStage)window.Bugsnag.releaseStage=self.options.releaseStage;self.ready()})};Bugsnag.prototype.loaded=function(){return isObject(window.Bugsnag)};Bugsnag.prototype.identify=function(identify){window.Bugsnag.user=window.Bugsnag.user||{};extend(window.Bugsnag.user,identify.traits())}},{"@ndhoule/extend":69,"@segment/analytics.js-integration":95,isobject:150}],9:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Castle=module.exports=integration("Castle").option("publishableKey","").option("autoPageview",false).option("cookieDomain",false).tag('<script src="//d2t77mnxyo7adj.cloudfront.net/v1/cs.js">');Castle.prototype.initialize=function(){window._castle=window._castle||{};window._castle.q=window._castle.q||[];window._castle.q.push(["setKey",this.options.publishableKey]);if(this.options.cookieDomain){window._castle.q.push(["setCookieDomain",this.options.cookieDomain])}if(this.options.autoPageview===false){window._castle.q.push(["autoTrack",this.options.autoPageview])}this._identifyFromCache();this.load(this.ready)};Castle.prototype.loaded=function(){return typeof window._castle==="function"};Castle.prototype.identify=function(identify){var traits=identify.traits();var castleOptions=identify.options(this.name);if(castleOptions&&castleOptions.secure){window._castle("secure",castleOptions.secure)}delete traits.id;window._castle("identify",identify.userId(),traits)};Castle.prototype.page=function(page){if(this.options.autoPageview)return;window._castle("page",page.url(),page.title())};Castle.prototype.track=function(track){window._castle("track",track.event(),track.properties())};Castle.prototype._identifyFromCache=function(){var user=this.analytics.user();if(user.id()){window._castle.q.push(["identify",user.id(),user.traits()])}}},{"@segment/analytics.js-integration":95}],10:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Chameleon=module.exports=integration("Chameleon").readyOnInitialize().readyOnLoad().global("chmln").option("apiKey",null).tag('<script src="https://fast.trychameleon.com/messo/{{apiKey}}/messo.min.js"><\/script>');Chameleon.prototype.initialize=function(){var that=this;!function(){var c=window.chmln||(window.chmln={});if(c.root){return}c.location=window.location.href.toString();c.accountToken=that.options.apiKey;var names="setup identify alias track set show on off custom help _data".split(" ");for(var i=0;i<names.length;i++){(function(){var t=c[names[i]+"_a"]=[];c[names[i]]=function(){t.push(arguments)}})()}}();this.ready();this.load()};Chameleon.prototype.loaded=function(){return!!window.chmln};Chameleon.prototype.identify=function(identify){var traits=identify.traits();delete traits.id;window.chmln.identify(identify.userId(),traits)};Chameleon.prototype.group=function(group){window.chmln.set({company:group.traits({id:"uid"})})};Chameleon.prototype.track=function(track){window.chmln.track(track.event(),track.properties())};Chameleon.prototype.alias=function(alias){window.chmln.alias({from:alias.previousId()||alias.anonymousId(),to:alias.userId()})}},{"@segment/analytics.js-integration":95}],11:[function(require,module,exports){"use strict";var defaults=require("@ndhoule/defaults");var integration=require("@segment/analytics.js-integration");var onBody=require("on-body");var Chartbeat=module.exports=integration("Chartbeat").global("_sf_async_config").global("_sf_endpt").global("pSUPERFLY").option("domain","").option("uid",null).option("video",false).option("sendNameAndCategoryAsTitle",false).option("subscriberEngagementKeys",[]).tag('<script src="//static.chartbeat.com/js/{{ script }}">');Chartbeat.prototype.loaded=function(){return!!window.pSUPERFLY};Chartbeat.prototype.initialize=function(){this.pageCalledYet=false;this._ready=true};Chartbeat.prototype.page=function(page){this.updateConfig(page);if(!this.pageCalledYet){this._ready=false;this.pageCalledYet=true;this._initialize()}else{var props=page.properties();window.pSUPERFLY.virtualPage(props.path)}};Chartbeat.prototype.updateConfig=function(page){var category=page.category();var author=page.proxy("properties.author");var props=page.properties();var title;if(this.options.sendNameAndCategoryAsTitle){title=page.fullName()||props.title}else{title=props.title}window._sf_async_config=window._sf_async_config||{};if(category)window._sf_async_config.sections=category;if(author)window._sf_async_config.authors=author;if(title)window._sf_async_config.title=title;var _cbq=window._cbq=window._cbq||[];for(var key in props){if(!props.hasOwnProperty(key))continue;if(this.options.subscriberEngagementKeys.indexOf(key)>-1){_cbq.push([key,props[key]])}}};Chartbeat.prototype._initialize=function(){var self=this;var script=this.options.video?"chartbeat_video.js":"chartbeat.js";window._sf_async_config.useCanonical=true;defaults(window._sf_async_config,{domain:this.options.domain,uid:this.options.uid});onBody(function(){window._sf_endpt=(new Date).getTime();self.load({script:script},self.ready)})}},{"@ndhoule/defaults":65,"@segment/analytics.js-integration":95,"on-body":168}],12:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var each=require("@ndhoule/each");var is=require("is");var CleverTap=module.exports=integration("CleverTap").global("clevertap").option("clevertap_account_id","").option("region","").tag("http",'<script src="http://static.clevertap.com/js/a.js">').tag("https",'<script src="https://d2r1yp2w7bby2u.cloudfront.net/js/a.js">');CleverTap.prototype.initialize=function(){window.clevertap={event:[],profile:[],account:[],onUserLogin:[],notifications:[]};window.clevertap.enablePersonalization=true;window.clevertap.account.push({id:this.options.clevertap_account_id});var region=this.options.region;if(region&&is.string(region)){window.clevertap.region=region.replace(".","")}var protocol=useHttps()?"https":"http";this.load(protocol,this.ready)};CleverTap.prototype.loaded=function(){return!!window.clevertap&&window.clevertap.logout!=="undefined"};CleverTap.prototype.identify=function(identify){var traitAliases={id:"Identity",name:"Name",email:"Email",phone:"Phone",gender:"Gender",birthday:"DOB",avatar:"Photo"};var traits=identify.traits(traitAliases);var supportedTraits={};each(function(value,key){if(!is.object(value))supportedTraits[key]=value},traits);window.clevertap.profile.push({Site:supportedTraits})};CleverTap.prototype.alias=function(alias){window.clevertap.profile.push({Site:{Identity:alias.to()}})};CleverTap.prototype.track=function(track){var props=track.properties();var supportedProps={};each(function(value,key){if(!is.object(value)&&!is.array(value))supportedProps[key]=value},props);window.clevertap.event.push(track.event(),supportedProps)};CleverTap.prototype.orderCompleted=function(track){var transaction=track.properties({order_id:"Charged ID",products:"Items"});transaction.Amount=track.total()||track.properties().revenue;window.clevertap.event.push("Charged",transaction)}},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,is:149,"use-https":198}],13:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var Clicky=module.exports=integration("Clicky").assumesPageview().global("clicky").global("clicky_site_ids").global("clicky_custom").option("siteId",null).tag('<script src="//static.getclicky.com/js"><\/script>');Clicky.prototype.initialize=function(){var user=this.analytics.user();window.clicky_site_ids=window.clicky_site_ids||[this.options.siteId];this.identify(new Identify({userId:user.id(),traits:user.traits()}));this.load(this.ready)};Clicky.prototype.loaded=function(){return isObject(window.clicky)};Clicky.prototype.page=function(page){var properties=page.properties();var name=page.fullName();window.clicky.log(properties.path,name||properties.title)};Clicky.prototype.identify=function(identify){window.clicky_custom=window.clicky_custom||{};window.clicky_custom.session=window.clicky_custom.session||{};var traits=identify.traits();var username=identify.username();var email=identify.email();var name=identify.name();if(username||email||name)traits.username=username||email||name;extend(window.clicky_custom.session,traits)};Clicky.prototype.track=function(track){window.clicky.goal(track.event(),track.revenue())}},{"@ndhoule/extend":69,"@segment/analytics.js-integration":95,isobject:150,"segmentio-facade":179}],14:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var CrazyEgg=module.exports=integration("Crazy Egg").assumesPageview().global("CE2").option("accountNumber","").tag('<script src="//script.crazyegg.com/pages/scripts/{{ path }}.js?{{ cacheBuster }}">');CrazyEgg.prototype.initialize=function(){var number=this.options.accountNumber;var path=number.slice(0,4)+"/"+number.slice(4);var cacheBuster=Math.floor((new Date).getTime()/36e5);this.load({path:path,cacheBuster:cacheBuster},this.ready)};CrazyEgg.prototype.loaded=function(){return!!window.CE2}},{"@segment/analytics.js-integration":95}],15:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Crisp=module.exports=integration("Crisp").global("$crisp").option("websiteId","").tag('<script src="https://client.crisp.chat/l.js" async>');Crisp.prototype.initialize=function(){window.$crisp=[];window.CRISP_WEBSITE_ID=this.options.websiteId;this.load(this.ready)};Crisp.prototype.loaded=function(){return!!window.$crisp.config};Crisp.prototype.identify=function(identify){if(identify.email()){window.$crisp.push(["set","user:email",identify.email()])}if(identify.name()||identify.firstName()){window.$crisp.push(["set","user:nickname",identify.name()||identify.firstName()])}if(identify.phone()){window.$crisp.push(["set","user:phone",[identify.phone()]])}if(identify.avatar()){window.$crisp.push(["set","user:avatar",[identify.avatar()]])}if(identify.companyName()){window.$crisp.push(["set","user:company",[identify.companyName()]])}};Crisp.prototype.track=function(track){var props=track.properties();var keys=Object.keys(props);var safeProps={};for(var i=0;i<keys.length;++i){var key=keys[i];key=key.replace(/[ ]/g,"_");key=key.replace(/[^\w]/g,"");safeProps[key]=props[keys[i]]}$crisp.push(["set","session:event",[[[track.event(),safeProps]]]])}},{"@segment/analytics.js-integration":95}],16:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var alias=require("@segment/alias");var convertDates=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var MAX_YEAR_SUPPORTED_AS_UNIX=1970;var Customerio=module.exports=integration("Customer.io").global("_cio").option("siteId","").tag('<script id="cio-tracker" src="https://assets.customer.io/assets/track.js" data-site-id="{{ siteId }}">');Customerio.prototype.initialize=function(){window._cio=window._cio||[];(function(){var a,b,c;a=function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=["identify","track"];for(c=0;c<b.length;c++){window._cio[b[c]]=a(b[c])}})();this.load(this.ready)};Customerio.prototype.loaded=function(){return!!(window._cio&&window._cio.push!==Array.prototype.push)};Customerio.prototype.page=function(page){var name=page.name()||page.url();window._cio.page(name,page.properties())};Customerio.prototype.identify=function(identify){if(!identify.userId())return this.debug("user id required");var traits=identify.traits({createdAt:"created"});traits=alias(traits,{created:"created_at"});traits=convertDates(traits,convertDate);window._cio.identify(traits)};Customerio.prototype.group=function(group){var traits=group.traits();var user=this.analytics.user();traits=alias(traits,function(trait){return"Group "+trait});this.identify(new Identify({userId:user.id(),traits:traits}))};Customerio.prototype.track=function(track){var properties=track.properties();properties=convertDates(properties,convertDate);window._cio.track(track.event(),properties)};function convertDate(date){if(date.getFullYear()<MAX_YEAR_SUPPORTED_AS_UNIX){return date.toISOString()}return Math.floor(date.getTime()/1e3)}},{"@segment/alias":77,"@segment/analytics.js-integration":95,"@segment/convert-dates":103,"segmentio-facade":179}],17:[function(require,module,exports){"use strict";var convertDates=require("@segment/convert-dates");var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var REFRESH_RATE=3e5;var timeHash=Math.ceil(new Date/REFRESH_RATE)*REFRESH_RATE;var Drift=module.exports=integration("Drift").global("drift").option("embedId","").tag('<script src="https://js.driftt.com/include/'+timeHash+'/{{ embedId }}.js">');Drift.prototype.initialize=function(){var drift;drift=window.drift=window.driftt=window.driftt||[];drift.methods=["identify","track","reset","debug","show","ping","page","hide","off","on"];drift.factory=function(method){return function(){var args;args=Array.prototype.slice.call(arguments);args.unshift(method);drift.push(args)}};each(function(key){drift[key]=drift.factory(key)},drift.methods);this.load(this.ready)};Drift.prototype.loaded=function(){return window.drift!==undefined};Drift.prototype.identify=function(identify){if(!identify.userId())return this.debug("user id required");var traits=identify.traits();var id=identify.userId();var integrationOptions=identify.options(this.name);delete traits.id;window.drift.identify(id,traits,integrationOptions);this.identified=true};Drift.prototype.track=function(track){var properties=track.properties();properties=convertDates(properties,convertDate);window.drift.track(track.event(),properties)};function convertDate(date){return Math.floor(date.getTime()/1e3)}Drift.prototype.page=function(page){var userId=this.analytics.user().id();if(!this.identified&&userId){window.drift.identify(userId);this.identified=true}window.drift.page(page.name())}},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,"@segment/convert-dates":103}],18:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var push=require("global-queue")("_dcq");var each=require("@ndhoule/each");var find=require("obj-case").find;var Drip=module.exports=integration("Drip").global("_dc").global("_dcq").global("_dcqi").global("_dcs").option("account","").tag('<script src="//tag.getdrip.com/{{ account }}.js">');Drip.prototype.initialize=function(){window._dcq=window._dcq||[];window._dcs=window._dcs||{};window._dcs.account=this.options.account;this.load(this.ready)};Drip.prototype.loaded=function(){return isObject(window._dc)};Drip.prototype.track=function(track){var props=format(track.properties());var cents=Math.round(track.revenue()*100);if(cents)props.value=cents;delete props.revenue;push("track",track.event(),props)};Drip.prototype.identify=function(identify){if(!identify.email())return;push("identify",format(identify.traits()));var dripCampaignId=find(identify.options(this.name),"campaignId")||this.options.campaignId;if(dripCampaignId)push("subscribe",{campaign_id:dripCampaignId,fields:identify.traits()})};function format(obj){var ret={};each(function(value,key){var formattedKey=key.replace(/\s/g,"_");ret[formattedKey]=value},obj);return ret}},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,"global-queue":143,isobject:150,"obj-case":165}],19:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var objCase=require("obj-case");var each=require("@ndhoule/each");var objectKeys=require("@ndhoule/keys");var Elevio=module.exports=integration("Elevio").option("accountId","").global("_elev").tag('<script src="//static.elev.io/js/v3.js">');Elevio.prototype.initialize=function(){var self=this;window._elev=window._elev||{};window._elev.account_id=this.options.accountId;window._elev.segment=true;this.load(function(){tick(self.ready)})};Elevio.prototype.loaded=function(){return!!window._elev};Elevio.prototype.identify=function(identify){var name=identify.name();var email=identify.email();var plan=identify.proxy("traits.plan");var traits=identify.traits();var removeTraits=["id","name","firstName","lastName","email"];each(function(traitItem){if(traits.hasOwnProperty(traitItem)){objCase.del(traits,traitItem)}},removeTraits);var user={};user.via="segment";if(email)user.email=email;if(name)user.name=name;if(plan)user.plan=[plan];if(plan)user.groups=[plan];if(objectKeys(traits).length>0)user.traits=traits;window._elev.user=user;if(typeof window._elev.setUser==="function"){window._elev.setUser(user)}}},{"@ndhoule/each":67,"@ndhoule/keys":72,"@segment/analytics.js-integration":95,"next-tick":164,"obj-case":165}],20:[function(require,module,exports){"use strict";var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_errs");var Errorception=module.exports=integration("Errorception").assumesPageview().global("_errs").option("projectId","").option("meta",true).tag('<script src="//beacon.errorception.com/{{ projectId }}.js">');Errorception.prototype.initialize=function(){window._errs=window._errs||[this.options.projectId];if(typeof window.onerror==="function"&&window.onerror!==push){var oldOnerror=window.onerror;window.onerror=function(){oldOnerror.apply(window,arguments);push.apply(window,arguments)}}else{window.onerror=push}this.load(this.ready)};Errorception.prototype.loaded=function(){return!!(window._errs&&window._errs.push!==Array.prototype.push)};Errorception.prototype.identify=function(identify){if(!this.options.meta)return;var traits=identify.traits();window._errs=window._errs||[];window._errs.meta=window._errs.meta||{};extend(window._errs.meta,traits)}},{"@ndhoule/extend":69,"@segment/analytics.js-integration":95,"global-queue":143}],21:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("@ndhoule/each");var reject=require("reject");var camel=require("to-camel-case");var is=require("is");var dateformat=require("dateformat");var Track=require("segmentio-facade").Track;var sha256=require("js-sha256");var FacebookPixel=module.exports=integration("Facebook Pixel").global("fbq").option("pixelId","").option("agent","seg").option("valueIdentifier","value").option("initWithExistingTraits",false).option("traverse",false).option("automaticConfiguration",true).option("whitelistPiiProperties",[]).option("blacklistPiiProperties",[]).option("standardEventsCustomProperties",[]).option("keyForExternalId","").option("userIdAsExternalId",false).mapping("standardEvents").mapping("legacyEvents").mapping("contentTypes").tag('<script src="//connect.facebook.net/en_US/fbevents.js">');var dateFields=["checkinDate","checkoutDate","departingArrivalDate","departingDepartureDate","returningArrivalDate","returningDepartureDate","travelEnd","travelStart"];var defaultPiiProperties=["email","firstName","lastName","gender","city","country","phone","state","zip","birthday"];FacebookPixel.prototype.initialize=function(){window._fbq=function(){if(window.fbq.callMethod){window.fbq.callMethod.apply(window.fbq,arguments)}else{window.fbq.queue.push(arguments)}};window.fbq=window.fbq||window._fbq;window.fbq.push=window.fbq;window.fbq.loaded=true;window.fbq.disablePushState=true;window.fbq.allowDuplicatePageViews=true;window.fbq.agent=this.options.agent;window.fbq.version="2.0";window.fbq.queue=[];this.load(this.ready);if(!this.options.automaticConfiguration){window.fbq("set","autoConfig",false,this.options.pixelId)}if(this.options.initWithExistingTraits){var traits=this.formatTraits(this.analytics);window.fbq("init",this.options.pixelId,traits)}else{window.fbq("init",this.options.pixelId)}};FacebookPixel.prototype.loaded=function(){return!!(window.fbq&&window.fbq.callMethod)};FacebookPixel.prototype.page=function(){window.fbq("track","PageView")};FacebookPixel.prototype.track=function(track){var self=this;var event=track.event();var revenue=formatRevenue(track.revenue());var payload=this.buildPayload(track);if(track.properties().hasOwnProperty("revenue")){payload.value=formatRevenue(track.revenue());delete payload.revenue}var standard=this.standardEvents(event);var legacy=this.legacyEvents(event);if(![].concat(standard,legacy).length){window.fbq("trackSingleCustom",this.options.pixelId,event,payload,{eventID:track.proxy("messageId")});return}each(function(event){if(event==="Purchase")payload.currency=track.currency();window.fbq("trackSingle",self.options.pixelId,event,payload,{eventID:track.proxy("messageId")})},standard);each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:revenue},{eventID:track.proxy("messageId")})},legacy)};FacebookPixel.prototype.productListViewed=function(track){var self=this;var contentType;var contentIds=[];var contents=[];var products=track.products();var customProperties=this.buildPayload(track,true);if(Array.isArray(products)){products.forEach(function(product){var track=new Track({properties:product});var productId=track.proxy("properties.product_id")||track.productId()||track.id();if(productId){contentIds.push(productId);contents.push({id:productId,quantity:track.quantity()})}})}if(contentIds.length){contentType=["product"]}else{contentIds.push(track.category()||"");contents.push({id:track.category()||"",quantity:1});contentType=["product_group"]}window.fbq("trackSingle",this.options.pixelId,"ViewContent",merge({content_ids:contentIds,content_type:this.getContentType(track,contentType),contents:contents},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.productViewed=function(track){var self=this;var useValue=this.options.valueIdentifier==="value";var customProperties=this.buildPayload(track,true);window.fbq("trackSingle",this.options.pixelId,"ViewContent",merge({content_ids:[track.productId()||track.id()||track.sku()||""],content_type:this.getContentType(track,["product"]),content_name:track.name()||"",content_category:track.category()||"",currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price()),contents:[{id:track.productId()||track.id()||track.sku()||"",quantity:track.quantity(),item_price:track.price()}]},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.productAdded=function(track){var self=this;var useValue=this.options.valueIdentifier==="value";var customProperties=this.buildPayload(track,true);window.fbq("trackSingle",this.options.pixelId,"AddToCart",merge({content_ids:[track.productId()||track.id()||track.sku()||""],content_type:this.getContentType(track,["product"]),content_name:track.name()||"",content_category:track.category()||"",currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price()),contents:[{id:track.productId()||track.id()||track.sku()||"",quantity:track.quantity(),item_price:track.price()}]},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.orderCompleted=function(track){var self=this;var products=track.products();var customProperties=this.buildPayload(track,true);var revenue=formatRevenue(track.revenue());var contentType=this.getContentType(track,["product"]);var contentIds=[];var contents=[];for(var i=0;i<products.length;i++){var trackItem=new Track({properties:products[i]});var pId=trackItem.productId()||trackItem.id()||trackItem.sku();contentIds.push(pId);var content={id:pId,quantity:trackItem.quantity()};if(trackItem.price()){content.item_price=trackItem.price()}contents.push(content)}window.fbq("trackSingle",this.options.pixelId,"Purchase",merge({content_ids:contentIds,content_type:contentType,currency:track.currency(),value:revenue,contents:contents,num_items:contentIds.length},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.productsSearched=function(track){var self=this;var customProperties=this.buildPayload(track,true)
;window.fbq("trackSingle",this.options.pixelId,"Search",merge({search_string:track.proxy("properties.query")},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.checkoutStarted=function(track){var self=this;var products=track.products();var contentIds=[];var contents=[];var contentCategory=track.category();var customProperties=this.buildPayload(track,true);for(var i=0;i<products.length;i++){var trackItem=new Track({properties:products[i]});var pId=trackItem.productId()||trackItem.id()||trackItem.sku();contentIds.push(pId);var content={id:pId,quantity:trackItem.quantity(),item_price:track.price()};if(trackItem.price()){content.item_price=trackItem.price()}contents.push(content)}if(!contentCategory&&products[0]&&products[0].category){contentCategory=products[0].category}window.fbq("trackSingle",this.options.pixelId,"InitiateCheckout",merge({content_category:contentCategory,content_ids:contentIds,content_type:this.getContentType(track,["product"]),contents:contents,currency:track.currency(),num_items:contentIds.length,value:formatRevenue(track.revenue())},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.getContentType=function(track,defaultValue){var options=track.options("Facebook Pixel");if(options&&options.contentType){return[options.contentType]}var category=track.category();if(!category){var products=track.products();if(products&&products.length){category=products[0].category}}if(category){var mapped=this.contentTypes(category);if(mapped.length){return mapped}}return defaultValue};function formatRevenue(revenue){return Number(revenue||0).toFixed(2)}FacebookPixel.prototype.formatTraits=function formatTraits(analytics){var traits=analytics&&analytics.user().traits();if(!traits)return{};var firstName;var lastName;if(traits.firstName||traits.first_name){firstName=traits.firstName||traits.first_name;lastName=traits.lastName||traits.last_name}else{var nameArray=traits.name&&traits.name.toLowerCase().split(" ")||[];firstName=nameArray.shift();lastName=nameArray.pop()}var gender;if(traits.gender&&is.string(traits.gender)){gender=traits.gender.slice(0,1).toLowerCase()}var birthday=traits.birthday&&dateformat(traits.birthday,"yyyymmdd");var address=traits.address||{};var city=address.city&&address.city.split(" ").join("").toLowerCase();var state=address.state&&address.state.toLowerCase();var postalCode=address.postalCode||address.postal_code;var external_id;if(this.options.keyForExternalId){external_id=traits[this.options.keyForExternalId]}if(!external_id&&this.options.userIdAsExternalId&&analytics){external_id=analytics.user().id()||analytics.user().anonymousId()}return reject({em:traits.email,fn:firstName,ln:lastName,ph:traits.phone,ge:gender,db:birthday,ct:city,st:state,zp:postalCode,external_id:external_id})};FacebookPixel.prototype.buildPayload=function(track,isStandardEvent){var whitelistPiiProperties=this.options.whitelistPiiProperties||[];var blacklistPiiProperties=this.options.blacklistPiiProperties||[];var standardEventsCustomProperties=this.options.standardEventsCustomProperties||[];var customPiiProperties={};for(var i=0;i<blacklistPiiProperties.length;i++){var configuration=blacklistPiiProperties[i];customPiiProperties[configuration.propertyName]=configuration.hashProperty}var payload={};var properties=track.properties();for(var property in properties){if(!properties.hasOwnProperty(property)){continue}if(isStandardEvent&&standardEventsCustomProperties.indexOf(property)<0){continue}var value=properties[property];if(dateFields.indexOf(camel(property))>=0){if(is.date(value)){payload[property]=value.toISOString().split("T")[0];continue}}if(customPiiProperties.hasOwnProperty(property)){if(customPiiProperties[property]&&typeof value==="string"){payload[property]=sha256(value)}continue}var isPropertyPii=defaultPiiProperties.indexOf(property)>=0;var isPropertyWhitelisted=whitelistPiiProperties.indexOf(property)>=0;if(!isPropertyPii||isPropertyWhitelisted){payload[property]=value}}return payload};function merge(obj1,obj2){var res={};for(var propObj1 in obj1){if(obj1.hasOwnProperty(propObj1)){res[propObj1]=obj1[propObj1]}}for(var propObj2 in obj2){if(obj2.hasOwnProperty(propObj2)&&!res.hasOwnProperty(propObj2)){res[propObj2]=obj2[propObj2]}}return res}FacebookPixel.merge=merge},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,dateformat:137,is:149,"js-sha256":152,reject:171,"segmentio-facade":179,"to-camel-case":189}],22:[function(require,module,exports){"use strict";var camel=require("camelcase");var foldl=require("@ndhoule/foldl");var integration=require("@segment/analytics.js-integration");var FullStory=module.exports=integration("FullStory").option("org","").option("debug",false).option("trackAllPages",false).option("trackNamedPages",false).option("trackCategorizedPages",false).option("trackPagesWithEvents",true).tag('<script async src="https://edge.fullstory.com/s/fs.js" crossorigin="anonymous"><\/script>');var apiSource="segment";FullStory.prototype.initialize=function(){window._fs_debug=this.options.debug;window._fs_host="fullstory.com";window._fs_script="edge.fullstory.com/s/fs.js";window._fs_org=this.options.org;window._fs_namespace="FS";(function(m,n,e,t,l,o,g,y){if(e in m){if(m.console&&m.console.log){m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].')}return}g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s)};g.q=[];g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g("event",{n:i,p:v},s)};g.anonymize=function(){g.identify(!!0)};g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};g.log=function(a,b){g("log",[a,b])};g.consent=function(a){g("consent",!arguments.length||a)};g.identifyAccount=function(i,v){o="account";v=v||{};v.acctId=i;g(o,v)};g.clearUserCookie=function(){};g.setVars=function(n,p){g("setVars",[n,p])};g._w={};y="XMLHttpRequest";g._w[y]=m[y];y="fetch";g._w[y]=m[y];if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};g._v="1.3.0"})(window,document,window["_fs_namespace"],"script","user");this.load(this.ready)};FullStory.prototype.loaded=function(){return!!window.FS};FullStory.prototype.identify=function(identify){var traits=identify.traits({name:"displayName"});var newTraits=foldl(function(results,value,key){var rs=results;if(key!=="id"){rs[key==="displayName"||key==="email"?key:camelCaseField(key)]=value}return rs},{},traits);if(identify.userId()){window.FS.identify(String(identify.userId()),newTraits,apiSource)}else{newTraits.segmentAnonymousId_str=String(identify.anonymousId());window.FS.setUserVars(newTraits,apiSource)}};FullStory.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;var trackProps=page.track().properties();if(name&&opts.trackNamedPages){if(opts.trackPagesWithEvents){this.track(page.track(name))}window.FS.setVars("page",Object.assign(trackProps,{pageName:name}),apiSource)}else if(category&&opts.trackCategorizedPages){if(opts.trackPagesWithEvents){this.track(page.track(category))}window.FS.setVars("page",Object.assign(trackProps,{pageName:category}),apiSource)}else if(opts.trackAllPages){if(opts.trackPagesWithEvents){this.track(page.track())}window.FS.setVars("page",trackProps,apiSource)}};FullStory.prototype.track=function(track){window.FS.event(track.event(),track.properties(),apiSource)};function camelCaseField(fieldName){var parts=fieldName.split("_");if(parts.length>1){var typeSuffix=parts.pop();switch(typeSuffix){case"str":case"int":case"date":case"real":case"bool":case"strs":case"ints":case"dates":case"reals":case"bools":return camel(parts.join("_"))+"_"+typeSuffix;default:}}return camel(fieldName)}},{"@ndhoule/foldl":70,"@segment/analytics.js-integration":95,camelcase:120}],23:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("@ndhoule/each");var find=require("obj-case");var reject=require("reject");var extend=require("extend");var GoogleAdWordsNew=module.exports=integration("Google AdWords New").option("accountId","").option("sendPageView",true).option("conversionLinker",true).option("clickConversions",[]).option("pageLoadConversions",[]).option("defaultPageConversion","").option("disableAdPersonalization",false).tag('<script src="https://www.googletagmanager.com/gtag/js?id={{ accountId }}">');GoogleAdWordsNew.prototype.initialize=function(){var self=this;window.dataLayer=window.dataLayer||[];window.gtag=function(){window.dataLayer.push(arguments)};var config={};if(this.options.sendPageView===false)config.send_page_view=this.options.sendPageView;if(this.options.conversionLinker===false)config.conversion_linker=this.options.conversionLinker;this.load(function(){window.gtag("js",new Date);if(self.options.disableAdPersonalization)window.gtag("set","allow_ad_personalization_signals",false);window.gtag("config",self.options.accountId,config);self.ready()})};GoogleAdWordsNew.prototype.loaded=function(){return window.dataLayer.push!==Array.prototype.push};GoogleAdWordsNew.prototype.page=function(page){var self=this;var configs=this.options;var pageName=page.name();if(!pageName&&configs.defaultPageConversion)return sendPageLoadConversion(configs.defaultPageConversion);var mappedConversions=matchConversion(this.options.pageLoadConversions,pageName);each(function(mappedConversion){sendPageLoadConversion(mappedConversion.id,mappedConversion.override)},mappedConversions);function sendPageLoadConversion(id,override){var semanticMetadata=reject({send_to:(override||configs.accountId)+"/"+id,value:page.options(self.name).value,currency:page.options(self.name).currency,transaction_id:find(page.options(self.name),"order_id")});var metadata=extend(page.properties(),semanticMetadata);return window.gtag("event",pageName||"conversion",metadata)}};GoogleAdWordsNew.prototype.track=function(track){var self=this;var eventName=track.event();var mappedConversions=matchConversion(this.options.clickConversions,track.event());each(function(mappedConversion){var properties=track.properties({orderId:"transaction_id"});var metadata=extend(properties,{send_to:(mappedConversion.override||self.options.accountId)+"/"+mappedConversion.id});return window.gtag("event",eventName,metadata)},mappedConversions)};GoogleAdWordsNew.prototype.orderCompleted=function(track){var self=this;var eventName=track.event();var mappedConversions=matchConversion(this.options.clickConversions,track.event());each(function(mappedConversion){var properties=track.properties({orderId:"transaction_id",order_id:"transaction_id",revenue:"value"});var metadata=extend(properties,{send_to:(mappedConversion.override||self.options.accountId)+"/"+mappedConversion.id});return window.gtag("event",eventName,metadata)},mappedConversions)};function matchConversion(mappedConversions,segmentEvent){var ret=[];each(function(setting){var conversion=setting.value||setting;if(typeof segmentEvent==="string"&&segmentEvent.toLowerCase()===conversion.event.toLowerCase()){var con={id:conversion.id};if(conversion.accountId)con.override=conversion.accountId;ret.push(con)}},mappedConversions);return ret}},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,extend:142,"obj-case":165,reject:171}],24:[function(require,module,exports){"use strict";var Track=require("segmentio-facade").Track;var defaults=require("@ndhoule/defaults");var dot=require("obj-case");var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var len=require("object-component").length;var push=require("global-queue")("_gaq");var reject=require("reject");var useHttps=require("use-https");var extend=require("extend");var user;module.exports=exports=function(analytics){analytics.addIntegration(GA);user=analytics.user()};var GA=exports.Integration=integration("Google Analytics").readyOnLoad().global("ga").global("gaplugins").global("_gaq").global("GoogleAnalyticsObject").option("anonymizeIp",false).option("useGoogleAmpClientId",false).option("classic",false).option("contentGroupings",{}).option("dimensions",{}).option("domain","auto").option("doubleClick",false).option("enhancedEcommerce",false).option("enhancedLinkAttribution",false).option("ignoredReferrers",null).option("includeSearch",false).option("setAllMappedProps",true).option("metrics",{}).option("nonInteraction",false).option("sendUserId",false).option("siteSpeedSampleRate",1).option("sampleRate",100).option("trackCategorizedPages",true).option("trackNamedPages",true).option("trackingId","").option("optimize","").option("nameTracker",false).option("resetCustomDimensionsOnPage",[]).tag("library",'<script src="//www.google-analytics.com/analytics.js">').tag("double click",'<script src="//stats.g.doubleclick.net/dc.js">').tag("http",'<script src="http://www.google-analytics.com/ga.js">').tag("https",'<script src="https://ssl.google-analytics.com/ga.js">');GA.on("construct",function(integration){if(integration.options.classic){integration.initialize=integration.initializeClassic;integration.loaded=integration.loadedClassic;integration.page=integration.pageClassic;integration.track=integration.trackClassic;integration.orderCompleted=integration.completedOrderClassic}else if(integration.options.enhancedEcommerce){integration.productViewed=integration.productViewedEnhanced;integration.productClicked=integration.productClickedEnhanced;integration.productAdded=integration.productAddedEnhanced;integration.productRemoved=integration.productRemovedEnhanced;integration.checkoutStarted=integration.checkoutStartedEnhanced;integration.checkoutStepViewed=integration.checkoutStepViewedEnhanced;integration.checkoutStepCompleted=integration.checkoutStepCompletedEnhanced;integration.orderUpdated=integration.orderUpdatedEnhanced;integration.orderCompleted=integration.orderCompletedEnhanced;integration.orderRefunded=integration.orderRefundedEnhanced;integration.promotionViewed=integration.promotionViewedEnhanced;integration.promotionClicked=integration.promotionClickedEnhanced;integration.productListViewed=integration.productListViewedEnhanced;integration.productListFiltered=integration.productListFilteredEnhanced}});GA.prototype.initialize=function(){this.pageCalled=false;var opts=this.options;window.GoogleAnalyticsObject="ga";window.ga=window.ga||function(){window.ga.q=window.ga.q||[];window.ga.q.push(arguments)};window.ga.l=(new Date).getTime();if(window.location.hostname==="localhost")opts.domain="none";var config={cookieDomain:opts.domain||GA.prototype.defaults.domain,siteSpeedSampleRate:opts.siteSpeedSampleRate,sampleRate:opts.sampleRate,allowLinker:true,useAmpClientId:opts.useGoogleAmpClientId};if(opts.nameTracker){config.name="freshpaintGATracker";this._trackerName="freshpaintGATracker."}else{this._trackerName=""}window.ga("create",opts.trackingId,config);if(opts.optimize)window.ga(this._trackerName+"require",opts.optimize);if(opts.doubleClick){window.ga(this._trackerName+"require","displayfeatures")}if(opts.enhancedLinkAttribution){window.ga(this._trackerName+"require","linkid","linkid.js")}if(opts.sendUserId&&user.id()){window.ga(this._trackerName+"set","userId",user.id())}if(opts.anonymizeIp)window.ga(this._trackerName+"set","anonymizeIp",true);var userTraits=user.traits();if(user.id()){userTraits.id=user.id()}var custom=metrics(userTraits,opts);if(len(custom))window.ga(this._trackerName+"set",custom);this.load("library",this.ready)};GA.prototype.loaded=function(){return!!window.gaplugins};GA.prototype.page=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var opts=this.options;var campaign=page.proxy("context.campaign")||{};var pageview={};var pagePath=path(props,this.options);var pageTitle=name||props.title;var pageReferrer=page.referrer()||"";var self=this;var track;this._category=category;pageview.page=pagePath;pageview.title=pageTitle;pageview.location=props.url;if(campaign.name)pageview.campaignName=campaign.name;if(campaign.source)pageview.campaignSource=campaign.source;if(campaign.medium)pageview.campaignMedium=campaign.medium;if(campaign.content)pageview.campaignContent=campaign.content;if(campaign.term)pageview.campaignKeyword=campaign.term;var payload={page:pagePath,title:pageTitle};var resetCustomDimensions={};for(var i=0;i<opts.resetCustomDimensionsOnPage.length;i++){var property=opts.resetCustomDimensionsOnPage[i];if(opts.dimensions[property]){resetCustomDimensions[opts.dimensions[property]]=null}}window.ga(self._trackerName+"set",resetCustomDimensions);pageview=extend(pageview,setCustomDimenionsAndMetrics(props,opts,self._trackerName));if(pageReferrer!==document.referrer)payload.referrer=pageReferrer;window.ga(this._trackerName+"set",payload);if(this.pageCalled)delete pageview.location;window.ga(this._trackerName+"send","pageview",pageview);if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}this.pageCalled=true};GA.prototype.identify=function(identify){var opts=this.options;if(opts.sendUserId&&identify.userId()){window.ga(this._trackerName+"set","userId",identify.userId())}var custom=metrics(identify.traits(),opts);if(len(custom))window.ga(this._trackerName+"set",custom)};GA.prototype.track=function(track,options){var contextOpts=track.options(this.name);var interfaceOpts=this.options;var opts=defaults(options||{},contextOpts);opts=defaults(opts,interfaceOpts);var props=track.properties();var campaign=track.proxy("context.campaign")||{};var self=this;var payload={eventAction:track.event(),eventCategory:track.category()||this._category||"All",eventLabel:props.label,eventValue:formatValue(props.value||track.revenue()),nonInteraction:props.nonInteraction!==undefined?!!props.nonInteraction:!!opts.nonInteraction};if(campaign.name)payload.campaignName=campaign.name;if(campaign.source)payload.campaignSource=campaign.source;if(campaign.medium)payload.campaignMedium=campaign.medium;if(campaign.content)payload.campaignContent=campaign.content;if(campaign.term)payload.campaignKeyword=campaign.term;payload=extend(payload,setCustomDimenionsAndMetrics(props,interfaceOpts,self._trackerName));window.ga(this._trackerName+"send","event",payload)};GA.prototype.orderCompleted=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();var self=this;if(!orderId)return;if(!this.ecommerce){window.ga(this._trackerName+"require","ecommerce");this.ecommerce=true}window.ga(this._trackerName+"ecommerce:addTransaction",{affiliation:props.affiliation,shipping:track.shipping(),revenue:total,tax:track.tax(),id:orderId,currency:track.currency()});each(products,function(product){var productTrack=createProductTrack(track,product);window.ga(self._trackerName+"ecommerce:addItem",{category:productTrack.category(),quantity:productTrack.quantity(),price:productTrack.price(),name:productTrack.name(),sku:productTrack.sku(),id:orderId,currency:productTrack.currency()})});window.ga(this._trackerName+"ecommerce:send")};GA.prototype.initializeClassic=function(){var opts=this.options;var anonymize=opts.anonymizeIp;var domain=opts.domain;var enhanced=opts.enhancedLinkAttribution;var ignore=opts.ignoredReferrers;var sample=opts.siteSpeedSampleRate;window._gaq=window._gaq||[];push("_setAccount",opts.trackingId);push("_setAllowLinker",true);if(anonymize)push("_gat._anonymizeIp");if(domain)push("_setDomainName",domain);if(sample)push("_setSiteSpeedSampleRate",sample);if(enhanced){var protocol=document.location.protocol==="https:"?"https:":"http:";var pluginUrl=protocol+"//www.google-analytics.com/plugins/ga/inpage_linkid.js";push("_require","inpage_linkid",pluginUrl)}if(ignore){if(!is.array(ignore))ignore=[ignore];each(ignore,function(domain){push("_addIgnoredRef",domain)})}if(this.options.doubleClick){this.load("double click",this.ready)}else{var name=useHttps()?"https":"http";this.load(name,this.ready)}};GA.prototype.loadedClassic=function(){return!!(window._gaq&&window._gaq.push!==Array.prototype.push)};GA.prototype.pageClassic=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var track;push("_trackPageview",path(props,this.options));if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}};GA.prototype.trackClassic=function(track,options){var opts=options||track.options(this.name);var props=track.properties();var revenue=track.revenue();var event=track.event();var category=this._category||track.category()||"All";var label=props.label;var value=formatValue(revenue||props.value);var nonInteraction=!!(props.nonInteraction||opts.nonInteraction);push("_trackEvent",category,event,label,value,nonInteraction)};GA.prototype.completedOrderClassic=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products()||[];var props=track.properties();var currency=track.currency();if(!orderId)return;push("_addTrans",orderId,props.affiliation,total,track.tax(),track.shipping(),track.city(),track.state(),track.country());each(products,function(product){var track=new Track({properties:product});push("_addItem",orderId,track.sku(),track.name(),track.category(),track.price(),track.quantity())});push("_set","currencyCode",currency);push("_trackTrans")};function path(properties,options){if(!properties)return;var str=properties.path;if(options.includeSearch&&properties.search)str+=properties.search;return str}function setCustomDimenionsAndMetrics(props,opts,trackerName){var ret={};var custom=metrics(props,opts);if(len(custom)){if(opts.setAllMappedProps){window.ga(trackerName+"set",custom)}else{each(custom,function(key,value){ret[key]=value});return ret}}}function formatValue(value){if(!value||value<0)return 0;return Math.round(value)}function getProductPosition(item,products){var position=item.properties().position;if(typeof position!=="undefined"&&!Number.isNaN(Number(position))&&Number(position)>-1){return position}return products.map(function(x){return x.product_id}).indexOf(item.productId())+1}function metrics(obj,data){var dimensions=data.dimensions;var metrics=data.metrics;var contentGroupings=data.contentGroupings;var ret={};each([metrics,dimensions,contentGroupings],function(group){each(group,function(prop,key){var value=dot(obj,prop)||obj[prop];if(is.bool(value))value=value.toString();if(value||value===0)ret[key]=value})});return ret}GA.prototype.loadEnhancedEcommerce=function(track){var self=this;if(!this.enhancedEcommerceLoaded){window.ga(self._trackerName+"require","ec");this.enhancedEcommerceLoaded=true}window.ga(self._trackerName+"set","&cu",track.currency())};GA.prototype.pushEnhancedEcommerce=function(track,opts,trackerName){var self=this;var args=reject([self._trackerName+"send","event",track.category()||"EnhancedEcommerce",track.event()||"Action not defined",track.properties().label,extend({nonInteraction:1},setCustomDimenionsAndMetrics(track.properties(),opts,trackerName))]);var event=track.event().toLowerCase();var eventsWithCategoryFieldProductScoped=["product clicked","product added","product viewed","product removed"];if(eventsWithCategoryFieldProductScoped.includes(event)){args[2]="EnhancedEcommerce"}window.ga.apply(window,args)};GA.prototype.checkoutStartedEnhanced=function(track){this.checkoutStepViewed(track)};GA.prototype.orderUpdatedEnhanced=function(track){this.checkoutStartedEnhanced(track)};GA.prototype.checkoutStepViewedEnhanced=function(track){var products=track.products();var props=track.properties();var options=extractCheckoutOptions(props);var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack,self._trackerName,opts)});window.ga(self._trackerName+"ec:setAction","checkout",{step:props.step||1,option:options||undefined});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.checkoutStepCompletedEnhanced=function(track){var props=track.properties();var options=extractCheckoutOptions(props);var self=this;if(!props.step||!options)return;this.loadEnhancedEcommerce(track);window.ga(self._trackerName+"ec:setAction","checkout_option",{step:props.step||1,option:options});window.ga(self._trackerName+"send","event","Checkout","Option")};GA.prototype.orderCompletedEnhanced=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();var opts=this.options;var self=this;if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack,self._trackerName,opts)});window.ga(self._trackerName+"ec:setAction","purchase",{id:orderId,affiliation:props.affiliation,revenue:total,tax:track.tax(),shipping:track.shipping(),coupon:track.coupon()});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.orderRefundedEnhanced=function(track){var orderId=track.orderId();var products=track.products();var self=this;var opts=this.options;if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var track=new Track({properties:product});window.ga(self._trackerName+"ec:addProduct",{id:track.productId()||track.id()||track.sku(),quantity:track.quantity()})});window.ga(self._trackerName+"ec:setAction","refund",{id:orderId});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productAddedEnhanced=function(track){var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,"add",null,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productRemovedEnhanced=function(track){var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,"remove",null,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productViewedEnhanced=function(track){var props=track.properties();var data={};var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);if(props.list)data.list=props.list;enhancedEcommerceProductAction(track,"detail",data,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productClickedEnhanced=function(track){var props=track.properties();var data={};var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);if(props.list)data.list=props.list;enhancedEcommerceProductAction(track,"click",data,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.promotionViewedEnhanced=function(track){var props=track.properties();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);window.ga(self._trackerName+"ec:addPromo",{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.promotionClickedEnhanced=function(track){var props=track.properties();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);window.ga(self._trackerName+"ec:addPromo",{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position});window.ga(self._trackerName+"ec:setAction","promo_click",{});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productListViewedEnhanced=function(track){var props=track.properties();var products=track.products();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);each(products,function(product){var item=new Track({properties:product});if(!(item.productId()||item.sku())&&!item.name())return;var impressionObj={id:item.productId()||item.sku(),name:item.name(),category:item.category()||track.category(),list:props.list_id||track.category()||"products",brand:item.properties().brand,variant:item.properties().variant,price:item.price(),position:getProductPosition(item,products)};impressionObj=extend(impressionObj,metrics(item.properties(),opts));for(var prop in impressionObj){if(impressionObj[prop]===undefined)delete impressionObj[prop]}window.ga(self._trackerName+"ec:addImpression",impressionObj)});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productListFilteredEnhanced=function(track){var props=track.properties();var products=track.products();props.filters=props.filters||[];props.sorters=props.sorters||[];var filters=props.filters.map(function(obj){return obj.type+":"+obj.value}).join();var sorts=props.sorts.map(function(obj){return obj.type+":"+obj.value}).join();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);each(products,function(product){var item=new Track({properties:product});if(!(item.productId()||item.sku())&&!item.name())return;var impressionObj={id:item.productId()||item.sku(),name:item.name(),category:item.category()||track.category(),list:props.list_id||track.category()||"search results",brand:item.properties().brand,variant:filters+"::"+sorts,price:item.price(),position:getProductPosition(item,products)};impressionObj=extend(impressionObj,metrics(item.properties(),opts));for(var prop in impressionObj){if(impressionObj[prop]===undefined)delete impressionObj[prop]}window.ga(self._trackerName+"ec:addImpression",impressionObj)});this.pushEnhancedEcommerce(track,opts,self._trackerName)};function enhancedEcommerceTrackProduct(track,trackerName,opts){var props=track.properties();var product={id:track.productId()||track.id()||track.sku(),name:track.name(),category:track.category(),quantity:track.quantity(),price:track.price(),brand:props.brand,variant:props.variant,currency:track.currency()};if(props.position!=null){product.position=Math.round(props.position)}var coupon=track.proxy("properties.coupon");if(coupon)product.coupon=coupon;product=extend(product,metrics(props,opts));window.ga(trackerName+"ec:addProduct",product)}function enhancedEcommerceProductAction(track,action,data,trackerName,opts){enhancedEcommerceTrackProduct(track,trackerName,opts);window.ga(trackerName+"ec:setAction",action,data||{})}function extractCheckoutOptions(props){var options=[props.paymentMethod,props.shippingMethod];var valid=reject(options);return valid.length>0?valid.join(", "):null}function createProductTrack(track,properties){var props=properties||{};props.currency=properties.currency||track.currency();return new Track({properties:props})}},{"@ndhoule/defaults":65,"@segment/analytics.js-integration":95,"component-each":127,extend:142,"global-queue":143,is:149,"obj-case":165,"object-component":166,reject:171,"segmentio-facade":179,"use-https":198}],25:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("dataLayer",{wrap:false})
;var GTM=module.exports=integration("Google Tag Manager").global("dataLayer").global("google_tag_manager").option("containerId","").option("environment","").option("trackNamedPages",true).option("trackCategorizedPages",true).tag("no-env",'<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer">').tag("with-env",'<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer&gtm_preview={{ environment }}">');GTM.prototype.initialize=function(){push({"gtm.start":Number(new Date),event:"gtm.js"});if(this.options.environment.length){this.load("with-env",this.options,this.ready)}else{this.load("no-env",this.options,this.ready)}};GTM.prototype.loaded=function(){return!!(window.dataLayer&&Array.prototype.push!==window.dataLayer.push)};GTM.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};GTM.prototype.track=function(track){var props=track.properties();var userId=this.analytics.user().id();var anonymousId=this.analytics.user().anonymousId();if(userId)props.userId=userId;if(anonymousId)props.segmentAnonymousId=anonymousId;props.event=track.event();push(props)}},{"@segment/analytics.js-integration":95,"global-queue":143}],26:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var Track=require("segmentio-facade").Track;var each=require("component-each");var integration=require("@segment/analytics.js-integration");var omit=require("omit");var pick=require("pick");var GoSquared=module.exports=integration("GoSquared").assumesPageview().global("_gs").option("anonymizeIP",false).option("apiSecret","").option("cookieDomain",null).option("trackHash",false).option("trackLocal",false).option("trackParams",true).option("useCookies",true).tag('<script src="//d1l6p2sc9645hc.cloudfront.net/tracker.js">');GoSquared.prototype.initialize=function(){var self=this;var options=this.options;var user=this.analytics.user();push(options.apiSecret);each(options,function(name,value){if(name==="apiSecret")return;if(value==null)return;push("set",name,value)});self.identify(new Identify({traits:user.traits(),userId:user.id()}));self.load(this.ready)};GoSquared.prototype.loaded=function(){return!!(window._gs&&window._gs.v)};GoSquared.prototype.page=function(page){var props=page.properties();var name=page.fullName();push("track",props.path,name||props.title)};GoSquared.prototype.identify=function(identify){var traits=identify.traits({createdAt:"created_at",firstName:"first_name",lastName:"last_name",title:"company_position",industry:"company_industry"});var specialKeys=["id","email","name","first_name","last_name","username","description","avatar","phone","created_at","company_name","company_size","company_position","company_industry"];var props=pick.apply(null,[traits].concat(specialKeys));props.custom=omit(specialKeys,traits);var id=identify.userId();if(id){push("identify",id,props)}else{push("properties",props)}};GoSquared.prototype.track=function(track){push("event",track.event(),track.properties())};GoSquared.prototype.orderCompleted=function(track){var products=track.products();var items=[];each(products,function(product){var track=new Track({properties:product});items.push({category:track.category(),quantity:track.quantity(),price:track.price(),name:track.name()})});push("transaction",track.orderId(),{revenue:track.total(),track:true},items)};function push(){window._gs=window._gs||function(){window._gs.q.push(arguments)};window._gs.q=window._gs.q||[];window._gs.apply(null,arguments)}},{"@segment/analytics.js-integration":95,"component-each":127,omit:167,pick:169,"segmentio-facade":179}],27:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("component-each");var is=require("is");var extend=require("@ndhoule/extend");var toISOString=require("@segment/to-iso-string");var __heapScopedToString=Object.prototype.toString;var Heap=module.exports=integration("Heap").global("heap").option("appId","").tag('<script src="//cdn.heapanalytics.com/js/heap-{{ appId }}.js">');Heap.prototype.initialize=function(){window.heap=window.heap||[];window.heap.load=function(appid,config){window.heap.appid=appid;window.heap.config=config;var methodFactory=function(type){return function(){window.heap.push([type].concat(Array.prototype.slice.call(arguments,0)))}};var heapMethods=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty","resetIdentity"];each(heapMethods,function(method){window.heap[method]=methodFactory(method)})};window.heap.load(this.options.appId);this.load(this.ready)};Heap.prototype.loaded=function(){return!!(window.heap&&window.heap.appid)};Heap.prototype.identify=function(identify){var traits=identify.traits({email:"_email"});var id=identify.userId();if(id)window.heap.identify(id);window.heap.addUserProperties(clean(traits))};Heap.prototype.track=function(track){window.heap.track(track.event(),clean(track.properties()))};function clean(obj){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)){var value=obj[k];if(value===null||value===undefined)continue;if(is.date(value)){ret[k]=toISOString(value);continue}if(is.bool(value)){ret[k]=value;continue}if(is.number(value)){ret[k]=value;continue}if(__heapScopedToString.call(value)==="[object Array]"){ret=extend(ret,trample(k,value));continue}if(__heapScopedToString.call(value)!=="[object Object]"){ret[k]=value.toString();continue}ret=extend(ret,trample(k,value))}}function trample(key,value){var nestedObj={};nestedObj[key]=value;var flattenedObj=flatten(nestedObj,{safe:true});for(var k in flattenedObj){if(is.array(flattenedObj[k]))flattenedObj[k]=JSON.stringify(flattenedObj[k])}return flattenedObj}return ret}function flatten(target,opts){var options=opts||{};var delimiter=options.delimiter||".";var maxDepth=options.maxDepth;var currentDepth=1;var output={};function step(object,prev){Object.keys(object).forEach(function(key){var value=object[key];var isarray=options.safe&&Array.isArray(value);var type=Object.prototype.toString.call(value);var isobject=type==="[object Object]"||type==="[object Array]";var newKey=prev?prev+delimiter+key:key;if(!options.maxDepth){maxDepth=currentDepth+1}if(!isarray&&isobject&&Object.keys(value).length&&currentDepth<maxDepth){++currentDepth;return step(value,newKey)}output[newKey]=value})}step(target);return output}if(!Object.keys){Object.keys=function(o){if(o!==Object(o)){throw new TypeError("Object.keys called on a non-object")}var k=[];var p;for(p in o)if(Object.prototype.hasOwnProperty.call(o,p))k.push(p);return k}}},{"@ndhoule/extend":69,"@segment/analytics.js-integration":95,"@segment/to-iso-string":116,"component-each":127,is:149}],28:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Hellobar=module.exports=integration("Hello Bar").assumesPageview().option("apiKey","").tag('<script src="//my.hellobar.com/{{ apiKey }}.js">');Hellobar.prototype.initialize=function(){this.load(this.ready)};Hellobar.prototype.loaded=function(){return typeof window.hellobar==="function"}},{"@segment/analytics.js-integration":95}],29:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var Hotjar=module.exports=integration("Hotjar").option("hjid",null).option("hjPlaceholderPolyfill",true);Hotjar.prototype.initialize=function(){function areOptionsValid(options){var validators={isHjidValid:is.number(options.hjid)&&!is.nan(options.hjid)&&options.hjid!==0,isPlaceholderPolyfillValid:is.bool(options.hjPlaceholderPolyfill)};for(var validator in validators){if(!validators[validator]){console.warn("Hotjar Integration - "+validator+" returned false, not loading.");return false}}return true}this.options.hjid=Number(this.options.hjid);if(!areOptionsValid(this.options))return;window._hjSelf=this;(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:h._hjSelf.options.hjid,hjsv:6,hjPlaceholderPolyfill:h._hjSelf.options.hjPlaceholderPolyfill};a=o.getElementsByTagName("head")[0];r=o.createElement("script");r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=");this.ready()};Hotjar.prototype.identify=function(identify){if(!identify.userId()){return this.debug("user id is required")}var traits=identify.traits();delete traits.id;window.hj("identify",identify.userId(),traits)}},{"@segment/analytics.js-integration":95,is:149}],30:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var convert=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_hsq");var each=require("@ndhoule/each");var HubSpot=module.exports=integration("HubSpot").assumesPageview().global("_hsq").global("hbspt").option("portalId",null).option("loadFormsSdk",false).tag("lib",'<script id="hs-analytics" src="https://js.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js">').tag("forms",'<script src="//js.hsforms.net/forms/shell.js">');HubSpot.prototype.initialize=function(){window._hsq=window._hsq||[];var cacheBuster=Math.ceil(new Date/3e5)*3e5;var shouldLoadLeadForms=this.options.loadFormsSdk;var self=this;if(shouldLoadLeadForms){this.load("forms",function(){self.load("lib",{cacheBuster:cacheBuster},self.ready)})}else{this.load("lib",{cacheBuster:cacheBuster},this.ready)}};HubSpot.prototype.loaded=function(){var libLoaded=!!(window._hsq&&window._hsq.push!==Array.prototype.push);if(!this.options.loadFormsSdk){return libLoaded}return libLoaded&&!!(window.hbspt&&window.hbspt.forms)};HubSpot.prototype.page=function(){push("trackPageView")};HubSpot.prototype.identify=function(identify){var newIdentify=new Identify({traits:identify.traits(),userId:identify.userId()});if(!newIdentify.email()){return}var traits=newIdentify.traits({firstName:"firstname",lastName:"lastname"});traits=convertDates(traits);traits=formatTraits(traits);if(newIdentify.companyName()!==undefined){traits.company=newIdentify.companyName()}push("identify",traits)};HubSpot.prototype.track=function(track){var props=convertDates(track.properties({id:"_id",revenue:"value"}));props.id=track.event();push("trackEvent",track.event(),props)};function convertDates(properties){return convert(properties,function(date){return date.getTime()})}function formatTraits(traits){var ret={};each(function(value,key){var k=key.toLowerCase().split(" ").join("_").split(".").join("_").split("\n").join("_").split("\v").join("_").split("\t").join("_").split("\f").join("_").split("\r").join("_");ret[k]=value},traits);return ret}},{"@ndhoule/each":67,"@segment/analytics.js-integration":95,"@segment/convert-dates":103,"global-queue":143,"segmentio-facade":179}],31:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("__insp");var Inspectlet=module.exports=integration("Inspectlet").assumesPageview().global("__insp").global("__insp_").option("wid","").tag('<script src="//cdn.inspectlet.com/inspectlet.js">');Inspectlet.prototype.initialize=function(){push("wid",this.options.wid);this.load(this.ready)};Inspectlet.prototype.loaded=function(){return!!(window.__insp_&&window.__insp)};Inspectlet.prototype.identify=function(identify){var traits=identify.traits({id:"userid"});var email=identify.email();if(email)push("identify",email);push("tagSession",traits)};Inspectlet.prototype.track=function(track){push("tagSession",track.event(),track.properties())};Inspectlet.prototype.page=function(){push("virtualPage")}},{"@segment/analytics.js-integration":95,"global-queue":143}],32:[function(require,module,exports){"use strict";var convertDates=require("@segment/convert-dates");var defaults=require("@ndhoule/defaults");var del=require("obj-case").del;var integration=require("@segment/analytics.js-integration");var is=require("is");var extend=require("@ndhoule/extend");var clone=require("@ndhoule/clone");var each=require("@ndhoule/each");var pick=require("@ndhoule/pick");var Intercom=module.exports=integration("Intercom").global("Intercom").option("activator","#IntercomDefaultWidget").option("appId","").option("richLinkProperties",[]).tag('<script src="https://widget.intercom.io/widget/{{ appId }}">');Intercom.prototype.initialize=function(){window.Intercom=function(){window.Intercom.q.push(arguments)};window.Intercom.q=[];this.load(this.ready)};Intercom.prototype.loaded=function(){return typeof window.Intercom==="function"};Intercom.prototype.page=function(page){var integrationSettings=page.options(this.name);this.bootOrUpdate({},integrationSettings)};Intercom.prototype.identify=function(identify){var traits=identify.traits({userId:"user_id"});var integrationSettings=identify.options(this.name);var companyCreated=identify.companyCreated();var created=identify.created();var name=identify.name();var id=identify.userId();var group=this.analytics.group();var settings=this.options;if(!id&&!identify.email()){return}if(traits.company!==null&&!is.object(traits.company)){delete traits.company}if(traits.company){defaults(traits.company,group.traits())}if(name)traits.name=name;if(created){del(traits,"created");del(traits,"createdAt");traits.created_at=created}if(companyCreated){del(traits.company,"created");del(traits.company,"createdAt");traits.company.created_at=companyCreated}traits=convertDates(traits,formatDate);traits=formatNestedCustomTraits(traits,settings);if(integrationSettings.userHash)traits.user_hash=integrationSettings.userHash;if(integrationSettings.user_hash)traits.user_hash=integrationSettings.user_hash;this.bootOrUpdate(traits,integrationSettings)};Intercom.prototype.group=function(group){var settings=this.options;var props=group.traits({createdAt:"created",created:"created_at",monthlySpend:"monthly_spend"});props=convertDates(props,formatDate);var id=group.groupId();if(id)props.id=id;var integrationSettings=group.options(this.name);props=formatNestedCustomTraits(props,settings);var traits=extend({company:props},hideDefaultLauncher(integrationSettings));api("update",traits)};Intercom.prototype.track=function(track){var settings=this.options;var props=track.properties();var revenue=track.revenue();var revenueData;if(revenue){revenueData={price:{amount:revenue*100,currency:track.currency()}}}props=formatNestedCustomTraits(props,settings);props=extend(props,revenueData);del(props,"revenue");del(props,"currency");api("trackEvent",track.event(),props)};Intercom.prototype.bootOrUpdate=function(opts,integrationSettings){var options=opts||{};var method=this.booted===true?"update":"boot";var activator=this.options.activator;options.app_id=this.options.appId;if(activator!=="#IntercomDefaultWidget"){options.widget={activator:activator}}options=extend(options,hideDefaultLauncher(integrationSettings));api(method,options);this.booted=true};function formatDate(date){return Math.floor(date/1e3)}function formatNestedCustomTraits(obj,settings){var richLinkProperties=settings.richLinkProperties;var basicIntercomTraits=["companies","company","created_at","created","custom_attributes","company_id","id","name","monthly_spend","plan","remote_created_at","remove","user_id","email"];var semanticTraits=basicIntercomTraits.concat(richLinkProperties);var customTraits=clone(obj);each(function(trait){del(customTraits,trait)},semanticTraits);var standardTraits=pick(semanticTraits,obj);var supportedTraits={};each(function(value,key){if(!is.object(value)&&!is.array(value))supportedTraits[key]=value},customTraits);return extend(supportedTraits,standardTraits)}function api(){window.Intercom.apply(window.Intercom,arguments)}function hideDefaultLauncher(options){var ret={};var setting=options.hideDefaultLauncher;if(setting===undefined||typeof setting!=="boolean")return ret;ret.hide_default_launcher=setting;return ret}},{"@ndhoule/clone":64,"@ndhoule/defaults":65,"@ndhoule/each":67,"@ndhoule/extend":69,"@ndhoule/pick":74,"@segment/analytics.js-integration":95,"@segment/convert-dates":103,is:149,"obj-case":165}],33:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var clone=require("@ndhoule/clone");var Keen=module.exports=integration("Keen IO").global("KeenSegment").option("ipAddon",false).option("projectId","").option("readKey","").option("referrerAddon",false).option("trackAllPages",false).option("trackCategorizedPages",true).option("trackNamedPages",true).option("uaAddon",false).option("urlAddon",false).option("writeKey","").tag('<script src="//d26b395fwzu5fz.cloudfront.net/3.4.0/{{ lib }}.min.js">');Keen.prototype.initialize=function(){var lib=this.options.readKey?"keen":"keen-tracker";var options=this.options;var previousKeen=window.Keen||null;var self=this;if(!window.Keen||window.Keen.version!=="3.4.0"){window.Keen=undefined;!function(a,b){if(void 0===b[a]){b["_"+a]={},b[a]=function(c){b["_"+a].clients=b["_"+a].clients||{},b["_"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b["_"+a].ready=b["_"+a].ready||[],b["_"+a].ready.push(c)};for(var c=["addEvent","setGlobalProperties","trackExternalLink","on"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this["_"+a]=this["_"+a]||[],this["_"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}}("Keen",window)}window.KeenSegment=window.Keen;this.client=new window.KeenSegment({projectId:options.projectId,readKey:options.readKey,writeKey:options.writeKey});this.load({lib:lib},function(){window.KeenSegment=window.Keen;if(previousKeen){window.Keen=previousKeen;previousKeen=undefined}self.ready()})};Keen.prototype.loaded=function(){return!!(window.KeenSegment&&window.KeenSegment.prototype.configure)};Keen.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Keen.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var user={};if(id)user.userId=id;if(traits)user.traits=traits;var props={user:user};props=this.addons(props,identify);this.client.setGlobalProperties(function(){return clone(props)})};Keen.prototype.track=function(track){var props=track.properties();props=this.addons(props,track);this.client.addEvent(track.event(),props)};Keen.prototype.addons=function(properties,msg){var obj=properties;var options=this.options;var addons=[];if(options.ipAddon){addons.push({name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"ip_geo_info"});obj.ip_address="${keen.ip}"}if(options.uaAddon){addons.push({name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"parsed_user_agent"});obj.user_agent="${keen.user_agent}"}if(options.urlAddon){addons.push({name:"keen:url_parser",input:{url:"page_url"},output:"parsed_page_url"});obj.page_url=document.location.href}if(options.referrerAddon){addons.push({name:"keen:referrer_parser",input:{referrer_url:"referrer_url",page_url:"page_url"},output:"referrer_info"});obj.referrer_url=document.referrer;obj.page_url=document.location.href}obj.keen={timestamp:msg.timestamp(),addons:addons};return obj}},{"@ndhoule/clone":64,"@segment/analytics.js-integration":95}],34:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var push=require("global-queue")("_kmq");var extend=require("@ndhoule/extend");var del=require("obj-case").del;var KISSmetrics=module.exports=integration("KISSmetrics").global("KM").global("_kmil").global("_kmq").option("apiKey","").option("prefixProperties",true).option("trackCategorizedPages",true).option("trackNamedPages",true).tag("library",'<script src="//scripts.kissmetrics.com/{{ apiKey }}.2.js">');exports.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone|iPod/i);KISSmetrics.prototype.initialize=function(){window._kmq=window._kmq||[];if(exports.isMobile)push("set",{"Mobile Session":"Yes"});this.load("library",this.ready)};KISSmetrics.prototype.loaded=function(){return is.object(window.KM)};KISSmetrics.prototype.page=function(page){if(!window.KM_SKIP_PAGE_VIEW){push("record","Page View",{"Viewed URL":page.url(),Referrer:page.referrer()||"Direct"})}this.trackPage(page)};KISSmetrics.prototype.trackPage=function(page){var category=page.category();var name=page.fullName();var opts=this.options;var e;if(opts.trackCategorizedPages&&category){e=page.category()}if(opts.trackNamedPages&&name){e=page.name()}if(!e){return}var event="Viewed "+e+" Page";var properties=prefix("Page",page.properties());push("record",event,properties)};KISSmetrics.prototype.identify=function(identify){var traits=clean(identify.traits());var id=identify.userId();if(id)push("identify",id);if(traits)push("set",traits)};KISSmetrics.prototype.track=function(track){var mapping={revenue:"Billing Amount"};var event=track.event();var properties=clean(track.properties(mapping));var revenue=track.revenue();if(revenue){properties.revenue=revenue}if(this.options.prefixProperties)properties=prefix(event,properties);push("record",event,properties)};KISSmetrics.prototype.alias=function(alias){push("alias",alias.to(),alias.from())};KISSmetrics.prototype.group=function(group){push("set",prefix("Group",group.traits()))};KISSmetrics.prototype.completedOrder=function(track){var opts=this.options;var event=track.event();var products=track.products();var timestamp=toUnixTimestamp(track.timestamp()||new Date);var properties=track.properties();del(properties,"products");if(opts.prefixProperties)properties=prefix(event,properties);push("record",event,properties);window._kmq.push(function(){each(products,function(product,i){var item=product;if(opts)item=prefix(event,item);item._t=timestamp+i;item._d=1;window.KM.set(item)})})};function prefix(event,properties){var prefixed={};each(properties,function(key,val){if(key==="Billing Amount"){prefixed[key]=val}else if(key==="revenue"){prefixed[event+" - "+key]=val;prefixed["Billing Amount"]=val}else{prefixed[event+" - "+key]=val}});return prefixed}function toUnixTimestamp(date){var d=new Date(date);return Math.floor(d.getTime()/1e3)}function clean(obj){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)){var value=obj[k];if(value===null||typeof value==="undefined")continue;if(is.date(value)){ret[k]=toUnixTimestamp(value);continue}if(is.bool(value)){ret[k]=value;continue}if(is.number(value)){ret[k]=value;continue}if(value.toString()!=="[object Object]"){ret[k]=value.toString();continue}var nestedObj={};nestedObj[k]=value;var flattenedObj=flatten(nestedObj,{safe:true});for(var key in flattenedObj){if(is.array(flattenedObj[key])){flattenedObj[key]=flattenedObj[key].toString()}}ret=extend(ret,flattenedObj);delete ret[k]}}return ret}function flatten(target,options){var opts=options||{};var delimiter=opts.delimiter||".";var maxDepth=opts.maxDepth;var currentDepth=1;var output={};function step(object,prev){for(var key in object){if(object.hasOwnProperty(key)){var value=object[key];var isarray=opts.safe&&is.array(value);var type=Object.prototype.toString.call(value);var isobject=type==="[object Object]"||type==="[object Array]";var arr=[];var newKey=prev?prev+delimiter+key:key;if(!opts.maxDepth){maxDepth=currentDepth+1}for(var keys in value){if(value.hasOwnProperty(keys)){arr.push(keys)}}if(!isarray&&isobject&&arr.length&&currentDepth<maxDepth){++currentDepth;return step(value,newKey)}output[newKey]=value}}}step(target);return output}},{"@ndhoule/extend":69,"@segment/analytics.js-integration":95,"component-each":127,"global-queue":143,is:149,"obj-case":165}],35:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_learnq");var tick=require("next-tick");var Track=require("segmentio-facade").Track;var foldl=require("@ndhoule/foldl");var remove=require("obj-case").del;var extend=require("@ndhoule/extend");var Klaviyo=module.exports=integration("Klaviyo").assumesPageview().global("_learnq").option("apiKey","").option("enforceEmail",false).tag('<script src="//static.klaviyo.com/onsite/js/klaviyo.js">');Klaviyo.prototype.initialize=function(){var self=this;push("account",this.options.apiKey);this.load(function(){tick(self.ready)})};Klaviyo.prototype.loaded=function(){return!!(window._learnq&&window._learnq.push!==Array.prototype.push)};Klaviyo.prototype.identify=function(identify){var traitAliases={email:"$email",id:"$id",firstName:"$first_name",lastName:"$last_name",phone:"$phone_number",title:"$title",exchangeId:"$exchange_id"};var traits=identify.traits(traitAliases);if(!identify.userId()&&!identify.email()&&!traits.$exchange_id)return;if(this.options.enforceEmail){remove(traits,"id");remove(traits,"$id")}if(this.options.enforceEmail&&!traits.$email)return;push("identify",traits)};Klaviyo.prototype.group=function(group){var props=group.properties();if(!props.name)return;push("identify",{$organization:props.name})};Klaviyo.prototype.track=function(track){push("track",track.event(),track.properties({revenue:"$value"}))};Klaviyo.prototype.orderCompleted=function(track){var products=formatProducts(track.products());var payload={$event_id:track.orderId(),$value:track.revenue(),Categories:products.categories,ItemNames:products.names,Items:products.items};var whitelist=["$event_id","$value","orderId","order_id","categories","itemNames","items","revenue","total","products"];var topLevelCustomProps=filter(track,whitelist);payload=extend(payload,topLevelCustomProps);push("track",track.event(),payload);var productProperties=formatItems(track);for(var x=0;x<productProperties.length;x++){push("track","Ordered Product",productProperties[x])}};function filter(facade,list){var ret=facade.properties();for(var x=0;x<list.length;x++){remove(ret,list[x])}return ret}function formatItems(track){return foldl(function(payloads,props){var product=new Track({properties:props});var itemWhitelist=["$event_id","$value","name","product categories","category","id","productId","product_id","sku","quantity","price","productUrl","imageUrl"];var itemCustomProps=filter(product,itemWhitelist);var item=reject({$value:product.price(),Name:product.name(),Quantity:product.quantity(),ProductCategories:[product.category()],ProductURL:product.proxy("properties.productUrl"),ImageURL:product.proxy("properties.imageUrl"),SKU:product.sku()});var identifier=product.productId()||product.id()||product.sku();item.$event_id=track.orderId()+"_"+identifier;item=extend(item,itemCustomProps);payloads.push(item);return payloads},[],track.products())}function formatProducts(products){return foldl(function(payloads,props){var product=new Track({properties:props});var whitelist=["id","product_id","productId","sku","name","quantity","itemPrice","price","rowTotal","categories","category","productUrl","imageUrl"];var customProps=filter(product,whitelist);var item=reject({id:product.productId()||product.id(),SKU:product.sku(),Name:product.name(),Quantity:product.quantity(),ItemPrice:product.price(),RowTotal:product.price(),Categories:[product.category()],ProductURL:product.proxy("properties.productUrl"),ImageURL:product.proxy("properties.imageUrl")});item=extend(item,customProps);payloads.items.push(item);payloads.categories.push(product.category());payloads.names.push(product.name());return payloads},{categories:[],names:[],items:[]},products)}function reject(obj){return foldl(function(res,val,key){var result=res;if(val!==undefined){result[key]=val}return result},{},obj)}},{"@ndhoule/extend":69,"@ndhoule/foldl":70,"@segment/analytics.js-integration":95,"global-queue":143,"next-tick":164,"obj-case":165,"segmentio-facade":179}],36:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Linkedin=module.exports=integration("LinkedIn Insight Tag").option("partnerId","").tag('<script src="https://snap.licdn.com/li.lms-analytics/insight.min.js"><\/script>');Linkedin.prototype.initialize=function(){if(!this.options.partnerId)return;window._linkedin_data_partner_id=this.options.partnerId;this.load(this.ready)};Linkedin.prototype.loaded=function(){return window._linkedin_data_partner_id}},{"@segment/analytics.js-integration":95}],37:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var clone=require("component-clone");var each=require("component-each");var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var when=require("do-when");var LiveChat=module.exports=integration("LiveChat").assumesPageview().global("LC_API").global("__lc").global("__lc_inited").option("group",0).option("license","").option("listen",false).tag('<script src="//cdn.livechatinc.com/tracking.js">');var integrationContext={name:"livechat",version:"1.0.0"};LiveChat.prototype.initialize=function(){var self=this;var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});window.__lc=clone(this.options);window.__lc.visitor={name:identify.name(),email:identify.email()};delete window.__lc.listen;this.load(function(){when(function(){return self.loaded()},function(){if(self.options.listen)self.attachListeners();tick(self.ready)})})};LiveChat.prototype.loaded=function(){return!!window.LC_API};LiveChat.prototype.identify=function(identify){var traits=identify.traits({userId:"User ID"});window.LC_API.set_custom_variables(convert(traits))};LiveChat.prototype.attachListeners=function(){var self=this;window.LC_API=window.LC_API||{};window.LC_API.on_chat_started=function(data){self.analytics.track("Live Chat Conversation Started",{agentName:data.agent_name},{context:{integration:integrationContext}})};window.LC_API.on_message=function(data){if(data.user_type==="visitor"){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext}})}else{self.analytics.track("Live Chat Message Received",{agentName:data.agent_name,agentUsername:data.agent_login},{context:{integration:integrationContext}})}};window.LC_API.on_chat_ended=function(){self.analytics.track("Live Chat Conversation Ended")}};function convert(traits){var arr=[];each(traits,function(key,value){arr.push({name:key,value:value})});return arr}},{"@segment/analytics.js-integration":95,"component-clone":122,"component-each":127,"do-when":139,"next-tick":164,"segmentio-facade":179}],38:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var LuckyOrange=module.exports=integration("Lucky Orange").assumesPageview().global("_loq").global("__lo_cs_added").global("__wtw_lucky_site_id").global("__wtw_lucky_is_segment_io").global("__wtw_custom_user_data").option("siteId",null).tag("http",'<script src="http://www.luckyorange.com/w.js?{{ cacheBuster }}">').tag("https",'<script src="https://ssl.luckyorange.com/w.js?{{ cacheBuster }}">');LuckyOrange.prototype.initialize=function(){if(!window._loq)window._loq=[];window.__wtw_lucky_site_id=this.options.siteId;var user=this.analytics.user();this.identify(new Identify({traits:user.traits(),userId:user.id()}));var cacheBuster=Math.floor((new Date).getTime()/6e4);var tagName=useHttps()?"https":"http";this.load(tagName,{cacheBuster:cacheBuster
},this.ready)};LuckyOrange.prototype.loaded=function(){return!!window.__lo_cs_added};LuckyOrange.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();if(email)traits.email=email;var name=identify.name();if(name)traits.name=name;window.__wtw_custom_user_data=traits}},{"@segment/analytics.js-integration":95,"segmentio-facade":179,"use-https":198}],39:[function(require,module,exports){"use strict";var alias=require("@segment/alias");var dates=require("@segment/convert-dates");var del=require("obj-case").del;var includes=require("@ndhoule/includes");var integration=require("@segment/analytics.js-integration");var iso=require("@segment/to-iso-string");var pick=require("@ndhoule/pick");var is=require("is");var indexOf=require("component-indexof");var Mixpanel=module.exports=integration("Mixpanel").global("mixpanel").option("eventIncrements",[]).option("propIncrements",[]).option("peopleProperties",[]).option("superProperties",[]).option("cookieName","").option("crossSubdomainCookie",false).option("secureCookie",false).option("persistence","cookie").option("nameTag",true).option("pageview",false).option("people",false).option("token","").option("setAllTraitsByDefault",true).option("consolidatedPageCalls",true).option("trackAllPages",false).option("trackNamedPages",false).option("trackCategorizedPages",false).option("groupIdentifierTraits",[]).option("sourceName","").option("enableEuropeanUnionEndpoint",false).tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js">');var optionsAliases={cookieName:"cookie_name",crossSubdomainCookie:"cross_subdomain_cookie",secureCookie:"secure_cookie"};Mixpanel.prototype.initialize=function(){(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2}})(document,window.mixpanel||[]);this.options.eventIncrements=lowercase(this.options.eventIncrements);this.options.propIncrements=lowercase(this.options.propIncrements);var options=alias(this.options,optionsAliases);if(this.options.enableEuropeanUnionEndpoint){options.api_host="https://api-eu.mixpanel.com"}options.loaded=function(mixpanel){mixpanel.register({mp_lib:"Segment: web"})};window.mixpanel.init(options.token,options);this.load(this.ready)};Mixpanel.prototype.loaded=function(){return!!(window.mixpanel&&window.mixpanel.config)};Mixpanel.prototype.page=function(page){var category=page.category();var name=page.name();var opts=this.options;if(opts.consolidatedPageCalls){this.track(page.track());return}if(opts.trackAllPages){this.track(page.track());return}if(opts.trackCategorizedPages&&category){if(name){this.track(page.track(page.fullName()));return}this.track(page.track(category));return}if(name&&opts.trackNamedPages){this.track(page.track(name))}};var traitAliases={created:"$created",email:"$email",firstName:"$first_name",lastName:"$last_name",lastSeen:"$last_seen",name:"$name",username:"$username",phone:"$phone"};Mixpanel.prototype.identify=function(identify){var username=identify.username();var email=identify.email();var id=identify.userId();var setAllTraitsByDefault=this.options.setAllTraitsByDefault;var people=this.options.people;var peopleProperties=extendTraits(this.options.peopleProperties);var superProperties=this.options.superProperties;if(id)window.mixpanel.identify(id);var nametag=email||username||id;if(nametag)window.mixpanel.name_tag(nametag);var traits=identify.traits(traitAliases);if(traits.$created)del(traits,"createdAt");traits=dates(traits,iso);var traitsToUnion={};var traitsToSet={};for(var key in traits){if(!traits.hasOwnProperty(key))continue;var trait=traits[key];if(Array.isArray(trait)&&trait.length>0){traitsToUnion[key]=trait;var existingTrait=window.mixpanel.get_property(key);if(existingTrait&&Array.isArray(existingTrait)){traits[key]=unionArrays(existingTrait,trait)}}else{traitsToSet[key]=trait}}if(setAllTraitsByDefault){window.mixpanel.register(traits);if(people){window.mixpanel.people.set(traitsToSet);window.mixpanel.people.union(traitsToUnion)}}else{var mappedSuperProps=mapTraits(superProperties);var superProps=pick(mappedSuperProps||[],traits);if(!is.empty(superProps))window.mixpanel.register(superProps);if(people){var mappedPeopleProps=mapTraits(peopleProperties);var peoplePropsToSet=pick(mappedPeopleProps||[],traitsToSet);var peoplePropsToUnion=pick(mappedPeopleProps||[],traitsToUnion);if(!is.empty(peoplePropsToSet))window.mixpanel.people.set(peoplePropsToSet);if(!is.empty(peoplePropsToUnion))window.mixpanel.people.union(peoplePropsToUnion)}}};Mixpanel.prototype.track=function(track){var eventIncrements=this.options.eventIncrements||this.options.increments;var propIncrements=this.options.propIncrements;var eventLowercase=track.event().toLowerCase();var people=this.options.people;var props=track.properties();var revenue=track.revenue();var superProps=pick(this.options.superProperties,props);var sourceName=this.options.sourceName;if(sourceName)props.segment_source_name=sourceName;delete props.distinct_id;delete props.ip;delete props.mp_name_tag;delete props.mp_note;delete props.token;props=dates(props,iso);invertObjectArrays(props);if(people){if(includes(eventLowercase,eventIncrements)){window.mixpanel.people.increment(track.event());window.mixpanel.people.set("Last "+track.event(),new Date)}for(var key in props){if(!Object.prototype.hasOwnProperty.call(props,key)){continue}var prop=props[key];if(includes(key.toLowerCase(),propIncrements)){window.mixpanel.people.increment(key,prop)}}if(revenue){window.mixpanel.people.track_charge(revenue)}}var query;if(props.link_query){query=props.link_query;delete props.link_query;window.mixpanel.track_links(query,track.event(),props)}else if(props.form_query){query=props.form_query;delete props.form_query;window.mixpanel.track_forms(query,track.event(),props)}else{window.mixpanel.track(track.event(),props)}if(!is.empty(superProps)){window.mixpanel.register(superProps)}};Mixpanel.prototype.alias=function(alias){var mp=window.mixpanel;var to=alias.to();if(mp.get_distinct_id&&mp.get_distinct_id()===to)return;if(mp.get_property&&mp.get_property("$people_distinct_id")===to)return;mp.alias(to,alias.from())};Mixpanel.prototype.group=function(group){var groupIdentifierTraits=this.options.groupIdentifierTraits;var groupId=group.groupId();var userId=this.analytics.user().id();var traits=group.properties();if(!groupId||!userId||!groupIdentifierTraits.length){return}if(traits&&Object.keys(traits).length){for(var ind=0;ind<groupIdentifierTraits.length;ind++){window.mixpanel.get_group(groupIdentifierTraits[ind],groupId).set_once(traits)}}for(var i=0;i<groupIdentifierTraits.length;i++){window.mixpanel.set_group(groupIdentifierTraits[i],[groupId])}};function lowercase(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){ret[i]=String(arr[i]).toLowerCase()}return ret}function mapTraits(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){if(traitAliases.hasOwnProperty(arr[i])){ret.push(traitAliases[arr[i]])}else{ret.push(arr[i])}}return ret}function extendTraits(arr){var keys=[];for(var key in traitAliases){if(traitAliases.hasOwnProperty(key)){keys.push(key)}}for(var i=0;i<keys.length;++i){if(indexOf(arr,keys[i])<0){arr.push(keys[i])}}return arr}function invertObjectArrays(props){var properties=props;for(var propName in properties){var propValue=properties[propName];if(!properties.hasOwnProperty(propName)||!Array.isArray(propValue)){continue}var invertedArrays=invertObjectArray(propName,propValue);if(Object.keys(invertedArrays).length!==0){mergeArraysIntoObj(properties,invertedArrays);delete properties[propName]}}}function invertObjectArray(propName,arr){var invertedArrays={};for(var i=0;i<arr.length;i++){var elem=arr[i];if(typeof elem!=="object"){return{}}for(var key in elem){if(!elem.hasOwnProperty(key)){continue}var attrKey=propName+"_"+key+"s";if(attrKey in invertedArrays){invertedArrays[attrKey].push(elem[key])}else{invertedArrays[attrKey]=[elem[key]]}}}return invertedArrays}function mergeArraysIntoObj(destination,source){var d=destination;for(var arrayName in source){if(source.hasOwnProperty(arrayName)){var arr=source[arrayName];d[arrayName]=arrayName in d?d[arrayName].concat(arr):arr}}}function unionArrays(x,y){var obj={};var i;for(i=0;i<x.length;i++){obj[x[i]]=x[i]}for(i=0;i<y.length;i++){obj[y[i]]=y[i]}return Object.keys(obj)}},{"@ndhoule/includes":71,"@ndhoule/pick":74,"@segment/alias":77,"@segment/analytics.js-integration":95,"@segment/convert-dates":103,"@segment/to-iso-string":116,"component-indexof":131,is:149,"obj-case":165}],40:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_mfq");var Mouseflow=module.exports=integration("Mouseflow").assumesPageview().global("_mfq").global("mouseflow").global("mouseflowHtmlDelay").option("apiKey","").option("mouseflowHtmlDelay",0).tag('<script src="//cdn.mouseflow.com/projects/{{ apiKey }}.js">');Mouseflow.prototype.initialize=function(){window.mouseflowHtmlDelay=this.options.mouseflowHtmlDelay;this.load(this.ready)};Mouseflow.prototype.loaded=function(){return!!window.mouseflow};Mouseflow.prototype.page=function(page){push("newPageView",page.path())};Mouseflow.prototype.identify=function(identify){set(identify.traits())};Mouseflow.prototype.track=function(track){var props=track.properties();props.event=track.event();set(props)};function set(obj){each(obj,function(key,value){push("setVariable",key,value)})}},{"@segment/analytics.js-integration":95,"component-each":127,"global-queue":143}],41:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var useHttps=require("use-https");var MouseStats=module.exports=integration("MouseStats").assumesPageview().global("msaa").global("MouseStatsVisitorPlaybacks").option("accountNumber","").tag("http",'<script src="http://www2.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}">').tag("https",'<script src="https://ssl.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}">');MouseStats.prototype.initialize=function(){var accountNumber=this.options.accountNumber;var path=accountNumber.slice(0,1)+"/"+accountNumber.slice(1,2)+"/"+accountNumber;var cacheBuster=Math.floor((new Date).getTime()/6e4);var tagName=useHttps()?"https":"http";this.load(tagName,{path:path,cacheBuster:cacheBuster},this.ready)};MouseStats.prototype.loaded=function(){return is.array(window.MouseStatsVisitorPlaybacks)};MouseStats.prototype.identify=function(identify){each(identify.traits(),function(key,value){window.MouseStatsVisitorPlaybacks.customVariable(key,value)})}},{"@segment/analytics.js-integration":95,"component-each":127,is:149,"use-https":198}],42:[function(require,module,exports){"use strict";var https=require("use-https");var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var Olark=module.exports=integration("Olark").assumesPageview().global("olark").option("groupId","").option("identify",true).option("listen",false).option("page",true).option("siteId","").option("track",false).option("inline",false);var integrationContext={name:"olark",version:"1.0.0"};Olark.prototype.initialize=function(){var self=this;this.load(function(){tick(self.ready)});var groupId=this.options.groupId;if(groupId)api("chat.setOperatorGroup",{group:groupId});api("box.onExpand",function(){self._open=true});api("box.onShrink",function(){self._open=false});if(this.options.listen)this.attachListeners()};Olark.prototype.load=function(callback){window.olark||function(c){var f=window,d=document,l=https()?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i," onl"+'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()}({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});if(this.options.inline)configure("box.inline",true);window.olark.identify(this.options.siteId);callback()};Olark.prototype.loaded=function(){return!!window.olark};Olark.prototype.page=function(page){if(!this.options.page)return;var props=page.properties();var name=page.fullName();if(!name&&!props.url)return;name=name?name+" page":props.url;this.notify("looking at "+name)};Olark.prototype.identify=function(identify){if(!this.options.identify)return;var username=identify.username();var traits=identify.traits();var id=identify.userId();var email=identify.email();var phone=identify.phone();var name=identify.name()||identify.firstName();if(traits)api("visitor.updateCustomFields",traits);if(email)api("visitor.updateEmailAddress",{emailAddress:email});if(phone)api("visitor.updatePhoneNumber",{phoneNumber:phone});if(name)api("visitor.updateFullName",{fullName:name});var nickname=name||email||username||id;if(name&&email)nickname+=" ("+email+")";if(nickname)api("chat.updateVisitorNickname",{snippet:nickname})};Olark.prototype.track=function(track){if(!this.options.track)return;this.notify('visitor triggered "'+track.event()+'"')};Olark.prototype.attachListeners=function(){var self=this;api("chat.onBeginConversation",function(){self.analytics.track("Live Chat Conversation Started",{},{context:{integration:integrationContext},integrations:{Olark:false}})});api("chat.onMessageToOperator",function(){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext},integrations:{Olark:false}})});api("chat.onMessageToVisitor",function(){self.analytics.track("Live Chat Message Received",{},{context:{integration:integrationContext},integrations:{Olark:false}})})};Olark.prototype.notify=function(msg){if(!this._open)return;var message=msg.toLowerCase();api("visitor.getDetails",function(data){if(!data||!data.isConversing)return;api("chat.sendNotificationToOperator",{body:message})})};function api(action,value){window.olark("api."+action,value)}function configure(action,value){window.olark.configure(action,value)}},{"@segment/analytics.js-integration":95,"next-tick":164,"use-https":198}],43:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var values=require("@ndhoule/values");var foldl=require("@ndhoule/foldl");var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("optimizely",{wrap:false});var tick=require("next-tick");var Optimizely=module.exports=integration("Optimizely").option("trackCategorizedPages",true).option("trackNamedPages",true).option("variations",false).option("listen",true).option("nonInteraction",false).option("sendRevenueOnlyForOrderCompleted",true).option("customExperimentProperties",{}).option("customCampaignProperties",{});var optimizelyContext={name:"optimizely",version:"2.0.0"};Optimizely.prototype.initialize=function(){var self=this;push({type:"integration",OAuthClientId:"5360906403"});tick(function(){Optimizely.initOptimizelyIntegration({referrerOverride:self.setEffectiveReferrer.bind(self),sendExperimentData:self.sendClassicDataToSegment.bind(self),sendCampaignData:self.sendNewDataToSegment.bind(self)})});this.ready()};Optimizely.prototype.track=function(track){var opts=this.options;var eventProperties=track.properties();if(eventProperties.revenue&&opts.sendRevenueOnlyForOrderCompleted){if(track.event()==="Order Completed"){eventProperties.revenue=Math.round(eventProperties.revenue*100)}else if(track.event()!=="Order Completed"){delete eventProperties.revenue}}else if(opts.sendRevenueOnlyForOrderCompleted===false&&eventProperties.revenue){eventProperties.revenue=Math.round(eventProperties.revenue*100)}var eventName=track.event().replace(/:/g,"_");var payload={type:"event",eventName:eventName,tags:eventProperties};push(payload);var optimizelyClientInstance=window.optimizelyClientInstance;if(optimizelyClientInstance&&optimizelyClientInstance.track){var optimizelyOptions=track.options("Optimizely");var userId=optimizelyOptions.userId||track.userId()||this.analytics.user().id();var attributes=optimizelyOptions.attributes||track.traits()||this.analytics.user().traits();if(userId){optimizelyClientInstance.track(eventName,userId,attributes,payload.tags)}}};Optimizely.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Optimizely.prototype.sendClassicDataToSegment=function(experimentState){var experiment=experimentState.experiment;var variations=experimentState.variations;var sections=experimentState.sections;var context={integration:optimizelyContext};var variationsMap=foldl(function(results,variation){var res=results;res[variation.id]=variation.name;return res},{},variations);var variationIds=keys(variationsMap).sort();var variationNames=values(variationsMap).sort();if(this.options.listen){var props={experimentId:experiment.id,experimentName:experiment.name,variationId:variationIds.join(),variationName:variationNames.join(", ")};if(experiment.referrer){props.referrer=experiment.referrer;context.page={referrer:experiment.referrer}}if(sections){var activeSections={};var variationIdsToSectionsMap=foldl(function(results,section,sectionId){var res=results;each(function(variationId){res[variationId]={id:sectionId,name:section.name}},section.variation_ids);return res},{},sections);for(var j=0;j<variationIds.length;j++){var activeVariation=variationIds[j];var activeSection=variationIdsToSectionsMap[activeVariation];if(activeSection)activeSections[activeSection.id]=activeSection.name}props.sectionId=keys(activeSections).sort().join();props.sectionName=values(activeSections).sort().join(", ")}if(this.options.nonInteraction)props.nonInteraction=1;var customExperimentProperties=this.options.customExperimentProperties;var customPropsKeys=Object.keys(customExperimentProperties);var data=window.optimizely&&window.optimizely.data;if(data&&customPropsKeys.length){for(var index=0;index<customPropsKeys.length;index++){var segmentProp=customPropsKeys[index];var optimizelyProp=customExperimentProperties[segmentProp];if(typeof data[optimizelyProp]!=="undefined"){props[segmentProp]=data[optimizelyProp]}}}this.analytics.track("Experiment Viewed",props,context)}if(this.options.variations){var traits={};traits["Experiment: "+experiment.name]=variationNames.join(", ");this.analytics.identify(traits)}};Optimizely.prototype.sendNewDataToSegment=function(campaignState){var experiment=campaignState.experiment;var variation=campaignState.variation;var context={integration:optimizelyContext};var audiencesMap=foldl(function(results,audience){var res=results;res[audience.id]=audience.name;return res},{},campaignState.audiences);var audienceIds=keys(audiencesMap).sort().join();var audienceNames=values(audiencesMap).sort().join(", ");if(this.options.listen){var props={campaignName:campaignState.campaignName,campaignId:campaignState.id,experimentId:experiment.id,experimentName:experiment.name,variationName:variation.name,variationId:variation.id,audienceId:audienceIds,audienceName:audienceNames,isInCampaignHoldback:campaignState.isInCampaignHoldback};if(experiment.referrer){props.referrer=experiment.referrer;context.page={referrer:experiment.referrer}}if(this.options.nonInteraction)props.nonInteraction=1;var customCampaignProperties=this.options.customCampaignProperties;var customPropsKeys=Object.keys(customCampaignProperties);var data=window.optimizely&&window.optimizely.newMockData;if(data&&customPropsKeys.length){for(var index=0;index<customPropsKeys.length;index++){var segmentProp=customPropsKeys[index];var optimizelyProp=customCampaignProperties[segmentProp];if(typeof data[optimizelyProp]!=="undefined"){props[segmentProp]=data[optimizelyProp]}}}this.analytics.track("Experiment Viewed",props,context)}if(this.options.variations){var traits={};traits["Experiment: "+experiment.name]=variation.name;this.analytics.identify(traits)}};Optimizely.prototype.setEffectiveReferrer=function(referrer){if(referrer){window.optimizelyEffectiveReferrer=referrer;return referrer}};Optimizely.initOptimizelyIntegration=function(handlers){var initClassicOptimizelyIntegration=function(referrerOverride,sendExperimentData){var data=window.optimizely&&window.optimizely.data;var state=data&&data.state;if(state){var activeExperiments=state.activeExperiments;if(state.redirectExperiment){var redirectExperimentId=state.redirectExperiment.experimentId;var index=-1;for(var i=0;i<state.activeExperiments.length;i++){if(state.activeExperiments[i]===redirectExperimentId){index=i;break}}if(index===-1){activeExperiments.push(redirectExperimentId)}referrerOverride(state.redirectExperiment.referrer)}for(var k=0;k<activeExperiments.length;k++){var currentExperimentId=activeExperiments[k];var activeExperimentState={experiment:{id:currentExperimentId,name:data.experiments[currentExperimentId].name},variations:[],sections:data.sections};if(state.redirectExperiment&&currentExperimentId===state.redirectExperiment.experimentId&&state.redirectExperiment.referrer){activeExperimentState.experiment.referrer=state.redirectExperiment.referrer}var variationIds=state.variationIdsMap[activeExperimentState.experiment.id];for(var j=0;j<variationIds.length;j++){var id=variationIds[j];var name=data.variations[id].name;activeExperimentState.variations.push({id:id,name:name})}sendExperimentData(activeExperimentState)}}};var initNewOptimizelyIntegration=function(referrerOverride,sendCampaignData){var newActiveCampaign=function(id,referrer){var state=window.optimizely.get&&window.optimizely.get("state");if(state){var activeCampaigns=state.getCampaignStates({isActive:true});var campaignState=activeCampaigns[id];if(referrer)campaignState.experiment.referrer=referrer;sendCampaignData(campaignState)}};var checkReferrer=function(){var state=window.optimizely.get&&window.optimizely.get("state");if(state){var referrer=state.getRedirectInfo()&&state.getRedirectInfo().referrer;if(referrer){referrerOverride(referrer);return referrer}}};var registerFutureActiveCampaigns=function(){window.optimizely=window.optimizely||[];window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(event){var id=event.data.campaign.id;newActiveCampaign(id)}})};var registerCurrentlyActiveCampaigns=function(){window.optimizely=window.optimizely||[];var state=window.optimizely.get&&window.optimizely.get("state");if(state){var referrer=checkReferrer();var activeCampaigns=state.getCampaignStates({isActive:true});for(var id in activeCampaigns){if({}.hasOwnProperty.call(activeCampaigns,id)){if(referrer){newActiveCampaign(id,referrer)}else{newActiveCampaign(id)}}}}else{window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:function(){checkReferrer()}})}};registerCurrentlyActiveCampaigns();registerFutureActiveCampaigns()};initClassicOptimizelyIntegration(handlers.referrerOverride,handlers.sendExperimentData);initNewOptimizelyIntegration(handlers.referrerOverride,handlers.sendCampaignData)}},{"@ndhoule/each":67,"@ndhoule/foldl":70,"@ndhoule/keys":72,"@ndhoule/values":76,"@segment/analytics.js-integration":95,"global-queue":143,"next-tick":164}],44:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var reject=require("reject");var json=require("json3");var is=require("is");var defaults=require("@ndhoule/defaults");var Parsely=module.exports=integration("Parsely").global("PARSELY").option("apiKey","").option("dynamicTracking",false).option("trackEvents",false).option("inPixelMetadata",false).tag('<script src="//d1z2jf7jlzjs58.cloudfront.net/p.js">');Parsely.prototype.initialize=function(){window.PARSELY=window.PARSELY||{};if(this.options.dynamicTracking)window.PARSELY.autotrack=false;var self=this;var meta=document.createElement("meta");meta.id="parsely-cfg";meta.setAttribute("data-parsely-site",this.options.apiKey);var head=document.getElementsByTagName("head")[0];if(!head)return;head.appendChild(meta);this.load(function(){when(self.loaded,self.ready)})};Parsely.prototype.loaded=function(){return!!window.PARSELY.beacon};Parsely.prototype.page=function(page){if(!this.options.dynamicTracking)return;var properties=page.properties();var data={url:page.url(),urlref:page.referrer(),data:properties,js:1};if(this.options.inPixelMetadata){var aliasedProps=page.properties(this.options.customMapping);var metadata={section:aliasedProps.section||page.category(),image_url:aliasedProps.image_url||aliasedProps.imageUrl,pub_date_tmsp:aliasedProps.pub_date_tmsp||aliasedProps.created,title:aliasedProps.title||page.title(),tags:aliasedProps.tags,authors:aliasedProps.authors,link:aliasedProps.link||page.url(),page_type:aliasedProps.page_type||"post"};var authors=metadata.authors;var tags=metadata.tags;if(authors&&!is.array(authors))metadata.authors=[authors];if(tags&&!is.array(tags))metadata.tags=[tags];data.metadata=json.stringify(reject(metadata))}window.PARSELY.beacon.trackPageView(data)};Parsely.prototype.track=function(track){return this.trackDynamicEvent(track)};var CURRENT_VIDEO_METADATA={};Parsely.prototype.videoContentStarted=function(track){if(window.PARSELY.video){var vidId=track.proxy("properties.assetId");var urlOverride=track.proxy("context.page.url");var metadata=this.parseVideoMetadata(track);CURRENT_VIDEO_METADATA=metadata;window.PARSELY.video.trackPlay(vidId,metadata,urlOverride)}return this.trackDynamicEvent(track)};Parsely.prototype.videoPlaybackPaused=function(track){if(window.PARSELY.video){var vidId=track.proxy("properties.assetId");var urlOverride=track.proxy("context.page.url");var metadata=this.parseVideoMetadata(track);metadata=defaults(metadata,CURRENT_VIDEO_METADATA);window.PARSELY.video.trackPause(vidId,metadata,urlOverride)}return this.trackDynamicEvent(track)};Parsely.prototype.videoPlaybackInterrupted=function(track){if(window.PARSELY.video){var vidId=track.proxy("properties.assetId");window.PARSELY.video.reset(vidId)}return this.trackDynamicEvent(track)};Parsely.prototype.trackDynamicEvent=function(track){if(this.options.trackEvents){window.PARSELY.beacon.trackPageView({data:track.properties(),action:track.event(),url:track.proxy("context.page.url"),urlref:track.proxy("context.page.referrer"),js:1})}};Parsely.prototype.parseVideoMetadata=function(track){var options=track.options(this.name)||{};var authors=track.proxy("properties.publisher");if(authors)authors=Array.isArray(authors)?authors:[authors];return reject({title:track.proxy("properties.title"),pub_date_tmsp:+new Date(track.proxy("properties.airdate"))||null,image_url:options.imageUrl,section:track.proxy("properties.genre"),authors:authors,tags:track.proxy("properties.keywords")})}},{"@ndhoule/defaults":65,"@segment/analytics.js-integration":95,"do-when":139,is:149,json3:153,reject:171}],45:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_prum");var Pingdom=module.exports=integration("Pingdom").assumesPageview().global("_prum").global("PRUM_EPISODES").option("id","").tag('<script src="//rum-static.pingdom.net/prum.min.js">');Pingdom.prototype.initialize=function(){window._prum=window._prum||[];push("id",this.options.id);var date=new Date;push("mark","firstbyte",date.getTime());this.load(this.ready)};Pingdom.prototype.loaded=function(){return!!(window._prum&&window._prum.push!==Array.prototype.push)}},{"@segment/analytics.js-integration":95,"global-queue":143}],46:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var analyticsEvents=require("analytics-events");var Pinterest=module.exports=integration("Pinterest Tag").global("pintrk").option("tid","").option("pinterestCustomProperties",[]).option("useEnhancedMatchLoad",false).mapping("pinterestEventMapping").tag('<script src="https://s.pinimg.com/ct/core.js"><\/script>');Pinterest.prototype.initialize=function(){if(!this.options.tid)return;(function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var n=window.pintrk;n.queue=[],n.version="3.0"}})();this.load(this.ready);var traits=this.analytics.user().traits();if(traits&&traits.email&&this.options.useEnhancedMatchLoad){var email=this.analytics.user().traits().email;window.pintrk("load",this.options.tid,{em:email})}else{window.pintrk("load",this.options.tid)}window.pintrk("page");this.createPropertyMapping()};Pinterest.prototype.loaded=function(){return!!(window.pintrk&&window.pintrk.queue)};Pinterest.prototype.identify=function(identify){if(identify.email()){window.pintrk("set",{np:"segment",em:identify.email()})}};Pinterest.prototype.page=function(page){if(page.category()){window.pintrk("track","ViewCategory",{category:page.category(),name:page.name()||""})}else{window.pintrk("track","PageVisit",{name:page.name()||""})}};Pinterest.prototype.track=function(track){var segmentEvent=track.event();var pinterestEvent=this.getPinterestEvent(segmentEvent);var pinterestObject=this.generatePropertiesObject(track);if(pinterestEvent){window.pintrk("track",pinterestEvent,pinterestObject)}else{window.pintrk("track",segmentEvent,pinterestObject)}};Pinterest.prototype.getPinterestEvent=function(segmentEvent){for(var mappedEvent in this.options.pinterestEventMapping){if(mappedEvent.toLowerCase()===segmentEvent.toLowerCase()){return this.options.pinterestEventMapping[mappedEvent]}}var eventMap=[[analyticsEvents.productsSearched,"Search"],[analyticsEvents.productListFiltered,"Search"],[analyticsEvents.productAdded,"AddToCart"],[analyticsEvents.orderCompleted,"Checkout"],[analyticsEvents.videoPlaybackStarted,"WatchVideo"]];for(var index in eventMap){
if(!eventMap.hasOwnProperty(index))continue;var eventRegex=eventMap[index][0];var pinterestEvent=eventMap[index][1];if(eventRegex.test(segmentEvent)){return pinterestEvent}}};Pinterest.prototype.createPropertyMapping=function(){this.propertyMap={query:"search_query",order_id:"order_id",coupon:"coupon",value:"value",currency:"currency"};this.productPropertyMap={name:"product_name",product_id:"product_id",sku:"product_id",category:"product_category",variant:"product_variant",price:"product_price",quantity:"product_quantity",brand:"product_brand"}};Pinterest.prototype.generatePropertiesObject=function(track){var pinterestProps={};var trackValue;for(var prop in this.propertyMap){if(!this.propertyMap.hasOwnProperty(prop))continue;trackValue=track.proxy("properties."+prop);if(trackValue)pinterestProps[this.propertyMap[prop]]=trackValue}var products=track.proxy("properties.products");var lineItemsArray;if(Array.isArray(products)){lineItemsArray=[];for(var i=0;i<products.length;i++){for(var productProperty in this.productPropertyMap){if(!this.productPropertyMap.hasOwnProperty(productProperty))continue;trackValue=products[i][productProperty];if(trackValue){if(lineItemsArray[i]===undefined)lineItemsArray[i]={};lineItemsArray[i][this.productPropertyMap[productProperty]]=trackValue}}}if(lineItemsArray.length)pinterestProps.line_items=lineItemsArray}else{lineItemsArray=[{}];var propAdded=false;for(var productProp in this.productPropertyMap){if(!this.productPropertyMap.hasOwnProperty(productProp))continue;trackValue=track.proxy("properties."+productProp);if(trackValue){lineItemsArray[0][this.productPropertyMap[productProp]]=trackValue;propAdded=true}}if(propAdded)pinterestProps.line_items=lineItemsArray}var customProps=this.options.pinterestCustomProperties;for(var j=0;j<customProps.length;j++){var customProperty=customProps[j];trackValue=track.proxy("properties."+customProperty);if(trackValue)pinterestProps[customProperty]=trackValue}return pinterestProps}},{"@segment/analytics.js-integration":95,"analytics-events":118}],47:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_kiq");var when=require("do-when");var Qualaroo=module.exports=integration("Qualaroo").assumesPageview().global("_kiq").option("customerId","").option("siteToken","").option("track",false).tag('<script src="https://cl.qualaroo.com/ki.js/{{ customerId }}/{{ siteToken }}.js">');Qualaroo.prototype.initialize=function(){window._kiq=window._kiq||[];var loaded=this.loaded;var ready=this.ready;this.load(function(){when(loaded,ready)})};Qualaroo.prototype.loaded=function(){return!!(window._kiq&&window._kiq.push!==Array.prototype.push)};Qualaroo.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var email=identify.email();if(email)id=email;if(id)push("identify",id);if(traits)push("set",traits)};Qualaroo.prototype.track=function(track){if(!this.options.track)return;var event=track.event();var traits={};traits["Triggered: "+event]=true;this.identify(new Identify({traits:traits}))}},{"@segment/analytics.js-integration":95,"do-when":139,"global-queue":143,"segmentio-facade":179}],48:[function(require,module,exports){"use strict";var push=require("global-queue")("_qevents",{wrap:false});var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var is=require("is");var objCase=require("obj-case");var Quantcast=module.exports=integration("Quantcast").assumesPageview().global("_qevents").global("__qc").option("pCode",null).option("advertise",false).tag("http",'<script src="http://edge.quantserve.com/quant.js">').tag("https",'<script src="https://secure.quantserve.com/quant.js">');Quantcast.prototype.initialize=function(page){window._qevents=window._qevents||[];var opts=this.options;var settings={qacct:opts.pCode};var user=this.analytics.user();if(user.id())settings.uid=user.id().toString();if(page){settings.labels=this._labels(page)}push(settings);var name=useHttps()?"https":"http";this.load(name,this.ready)};Quantcast.prototype.loaded=function(){return!!window.__qc};Quantcast.prototype.page=function(page){var settings={event:"refresh",labels:this._labels(page),qacct:this.options.pCode};var user=this.analytics.user();if(!this.options.advertise&&!page.name()&&!page.category())delete settings.labels;if(user.id())settings.uid=user.id().toString();push(settings)};Quantcast.prototype.identify=function(identify){if(identify.userId()){window._qevents[0]=window._qevents[0]||{};window._qevents[0].uid=identify.userId().toString()}};Quantcast.prototype.track=function(track){var revenue=track.revenue();var orderId=track.orderId();var user=this.analytics.user();var settings={event:"click",labels:this._labels(track),qacct:this.options.pCode};if(revenue)settings.revenue=String(revenue);if(orderId)settings.orderid=String(orderId);if(user.id())settings.uid=user.id().toString();push(settings)};var productLabelMap={brand:"Brand",category:"Category",coupon:"Coupon",image_url:"ImageURL",name:"Name",position:"Position",product_id:"ProductID",sku:"SKU",url:"URL",variant:"Variant"};Quantcast.prototype.orderCompleted=function(track){var labels=this._labels(track);if(this.options.advertise){var category=safe(track.category());if(category)labels+=",_fp.pcat."+category;var repeat=track.proxy("properties.repeat");if(typeof repeat==="boolean")labels+=",_fp.customer."+(repeat?"repeat":"new");if(this.options.advertiseProducts){var products=track.products();products.forEach(function(product){if(!objCase.find(product,"product_id"))return;Object.keys(productLabelMap).forEach(function(key){var value=objCase.find(product,key);var label=productLabelMap[key];if(value)labels+=",_fp.pcat."+label+"."+value})});var quantity=products.reduce(function(acc,product){var quantity=objCase.find(product,"quantity");if(typeof quantity==="number")return acc+quantity;if(typeof quantity==="string")return acc+parseInt(quantity,10);return acc},0);if(quantity>0)labels+=",_fp.pcat.Quantity."+quantity}}var settings={event:"refresh",labels:labels,revenue:String(track.total()||track.revenue()),orderid:String(track.orderId()),qacct:this.options.pCode};push(settings)};Quantcast.prototype._labels=function(facade){var action=facade.action();var autoLabels=[];var ret;if(action==="page"){if(facade.category())autoLabels.push(safe(facade.category()));autoLabels.push(safe(facade.name()||"Default"));autoLabels=autoLabels.join(".")}else if(action==="track"){autoLabels=safe(facade.event())}var label=safe(facade.proxy("properties.label"));var customLabels=facade.options("Quantcast").labels||[];if(is.string(customLabels))customLabels=[customLabels];customLabels=customLabels.map(function(label){return safe(label)});if(is.string(label))customLabels.unshift(label);if(this.options.advertise&&customLabels){customLabels=customLabels.map(function(label){return"_fp.event."+label})}customLabels=customLabels.join(",");if(this.options.advertise){ret="_fp.event."+autoLabels}else{ret=autoLabels}if(customLabels)ret+=","+customLabels;return ret};function safe(str){if(str)return str.replace(/[^\w\s]|_/gi,"")}},{"@segment/analytics.js-integration":95,"global-queue":143,is:149,"obj-case":165,"use-https":198}],49:[function(require,module,exports){"use strict";var camel=require("camelcase");var foldl=require("@ndhoule/foldl");var integration=require("@segment/analytics.js-integration");var ReplayBird=module.exports=integration("ReplayBird").option("siteKey","").option("debug",false);ReplayBird.prototype.initialize=function(){!function(a,b,c,d,e,f,g,h){a.ReplayBirdObject=e,a[e]=a[e]||function(){(a[e].o=a[e].o||[]).push(arguments)},g=b.createElement(c),h=b.getElementsByTagName(c)[0],g.async=1,g.src=d,a.__replaybirdNoConflict=!!f,h.parentNode.insertBefore(g,h)}(window,document,"script","https://cdn.replaybird.com/replaybird.min.js","_rb");_rb("apikey",this.options.siteKey);_rb("debugMode",this.options.debug);this.ready()};ReplayBird.prototype.loaded=function(){return!!window.ReplayBird};ReplayBird.prototype.identify=function(identify){if(!identify.userId()){return this.debug("User id is required!")}var traits=identify.traits({name:"displayName"});var newTraits=foldl(function(results,value,key){var rs=results;if(key!=="id"){rs[key==="displayName"||key==="email"?key:camelCaseField(key)]=value}return rs},{},traits);newTraits.id=String(identify.userId());window._rb("identify",newTraits)};ReplayBird.prototype.track=function(track){if(window.ReplayBird){window.ReplayBird.event(track.event(),track.properties())}else{window._rb("event",{name:track.event(),properties:track.properties()})}};function camelCaseField(fieldName){var parts=fieldName.split("_");if(parts.length>1){var typeSuffix=parts.pop();switch(typeSuffix){case"str":case"int":case"date":case"real":case"bool":case"strs":case"ints":case"dates":case"reals":case"bools":return camel(parts.join("_"))+"_"+typeSuffix;default:}}return camel(fieldName)}},{"@ndhoule/foldl":70,"@segment/analytics.js-integration":95,camelcase:120}],50:[function(require,module,exports){"use strict";var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var RollbarIntegration=module.exports=integration("Rollbar").global("Rollbar").global("rollbar").option("identify",true).option("accessToken","").option("environment","unknown").option("captureUncaught",true).option("captureUnhandledRejections",false).option("sourceMapEnabled",false).option("codeVersion","").option("guessUncaughtFrames",false).option("ignoredMessages",[]).option("loadTimeout",6e4).option("verbose",false);RollbarIntegration.prototype.initialize=function(){window._rollbarConfig=this.config={accessToken:this.options.accessToken,captureUncaught:this.options.captureUncaught,captureUnhandledRejections:this.options.captureUnhandledRejections,verbose:this.options.verbose,payload:{environment:this.options.environment,client:{javascript:{source_map_enabled:this.options.sourceMapEnabled,code_version:this.options.codeVersion,guess_uncaught_frames:this.options.guessUncaughtFrames}}}};var msg=this.options.ignoredMessages;if(msg.length>0){var ret=[];for(var x=0;x<msg.length;x++){if(msg[x]!==null&&msg[x]!=="")ret.push(msg[x])}window._rollbarConfig.ignoredMessages=ret}!function(r){var e={};function o(n){if(e[n])return e[n].exports;var t=e[n]={i:n,l:!1,exports:{}};return r[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=e,o.d=function(r,e,n){o.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},o.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},o.t=function(r,e){if(1&e&&(r=o(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)o.d(n,t,function(e){return r[e]}.bind(null,t));return n},o.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(e,"a",e),e},o.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},o.p="",o(o.s=0)}([function(r,e,o){var n=o(1),t=o(4);_rollbarConfig=_rollbarConfig||{},_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.13.0/rollbar.min.js",_rollbarConfig.async=void 0===_rollbarConfig.async||_rollbarConfig.async;var a=n.setupShim(window,_rollbarConfig),l=t(_rollbarConfig);window.rollbar=n.Rollbar,a.loadFull(window,document,!_rollbarConfig.async,_rollbarConfig,l)},function(r,e,o){var n=o(2);function t(r){return function(){try{return r.apply(this,arguments)}catch(r){try{console.error("[Rollbar]: Internal error",r)}catch(r){}}}}var a=0;function l(r,e){this.options=r,this._rollbarOldOnError=null;var o=a++;this.shimId=function(){return o},"undefined"!=typeof window&&window._rollbarShims&&(window._rollbarShims[o]={handler:e,messages:[]})}var i=o(3),s=function(r,e){return new l(r,e)},d=function(r){return new i(s,r)};function c(r){return t(function(){var e=Array.prototype.slice.call(arguments,0),o={shim:this,method:r,args:e,ts:new Date};window._rollbarShims[this.shimId()].messages.push(o)})}l.prototype.loadFull=function(r,e,o,n,a){var l=!1,i=e.createElement("script"),s=e.getElementsByTagName("script")[0],d=s.parentNode;i.crossOrigin="",i.src=n.rollbarJsUrl,o||(i.async=!0),i.onload=i.onreadystatechange=t(function(){if(!(l||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){i.onload=i.onreadystatechange=null;try{d.removeChild(i)}catch(r){}l=!0,function(){var e;if(void 0===r._rollbarDidLoad){e=new Error("rollbar.js did not load");for(var o,n,t,l,i=0;o=r._rollbarShims[i++];)for(o=o.messages||[];n=o.shift();)for(t=n.args||[],i=0;i<t.length;++i)if("function"==typeof(l=t[i])){l(e);break}}"function"==typeof a&&a(e)}()}}),d.insertBefore(i,s)},l.prototype.wrap=function(r,e,o){try{var n;if(n="function"==typeof e?e:function(){return e||{}},"function"!=typeof r)return r;if(r._isWrap)return r;if(!r._rollbar_wrapped&&(r._rollbar_wrapped=function(){o&&"function"==typeof o&&o.apply(this,arguments);try{return r.apply(this,arguments)}catch(o){var e=o;throw e&&("string"==typeof e&&(e=new String(e)),e._rollbarContext=n()||{},e._rollbarContext._wrappedSource=r.toString(),window._rollbarWrappedError=e),e}},r._rollbar_wrapped._isWrap=!0,r.hasOwnProperty))for(var t in r)r.hasOwnProperty(t)&&(r._rollbar_wrapped[t]=r[t]);return r._rollbar_wrapped}catch(e){return r}};for(var p="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleAnonymousErrors,handleUnhandledRejection,captureEvent,captureDomContentLoaded,captureLoad".split(","),u=0;u<p.length;++u)l.prototype[p[u]]=c(p[u]);r.exports={setupShim:function(r,e){if(r){var o=e.globalAlias||"Rollbar";if("object"==typeof r[o])return r[o];r._rollbarShims={},r._rollbarWrappedError=null;var a=new d(e);return t(function(){e.captureUncaught&&(a._rollbarOldOnError=r.onerror,n.captureUncaughtExceptions(r,a,!0),e.wrapGlobalEventHandlers&&n.wrapGlobals(r,a,!0)),e.captureUnhandledRejections&&n.captureUnhandledRejections(r,a,!0);var t=e.autoInstrument;return!1!==e.enabled&&(void 0===t||!0===t||"object"==typeof t&&t.network)&&r.addEventListener&&(r.addEventListener("load",a.captureLoad.bind(a)),r.addEventListener("DOMContentLoaded",a.captureDomContentLoaded.bind(a))),r[o]=a,a})()}},Rollbar:d}},function(r,e){function o(r,e,o){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){for(var n=e.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var t=function(e,o,t){n.call(this,e,r.wrap(o),t)};t._rollbarOldAdd=n,t.belongsToShim=o,e.addEventListener=t;for(var a=e.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var l=function(r,e,o){a.call(this,r,e&&e._rollbar_wrapped||e,o)};l._rollbarOldRemove=a,l.belongsToShim=o,e.removeEventListener=l}}r.exports={captureUncaughtExceptions:function(r,e,o){if(r){var n;if("function"==typeof e._rollbarOldOnError)n=e._rollbarOldOnError;else if(r.onerror){for(n=r.onerror;n._rollbarOldOnError;)n=n._rollbarOldOnError;e._rollbarOldOnError=n}e.handleAnonymousErrors();var t=function(){var o=Array.prototype.slice.call(arguments,0);!function(r,e,o,n){r._rollbarWrappedError&&(n[4]||(n[4]=r._rollbarWrappedError),n[5]||(n[5]=r._rollbarWrappedError._rollbarContext),r._rollbarWrappedError=null);var t=e.handleUncaughtException.apply(e,n);o&&o.apply(r,n),"anonymous"===t&&(e.anonymousErrorsPending+=1)}(r,e,n,o)};o&&(t._rollbarOldOnError=n),r.onerror=t}},captureUnhandledRejections:function(r,e,o){if(r){"function"==typeof r._rollbarURH&&r._rollbarURH.belongsToShim&&r.removeEventListener("unhandledrejection",r._rollbarURH);var n=function(r){var o,n,t;try{o=r.reason}catch(r){o=void 0}try{n=r.promise}catch(r){n="[unhandledrejection] error getting `promise` from event"}try{t=r.detail,!o&&t&&(o=t.reason,n=t.promise)}catch(r){}o||(o="[unhandledrejection] error getting `reason` from event"),e&&e.handleUnhandledRejection&&e.handleUnhandledRejection(o,n)};n.belongsToShim=o,r._rollbarURH=n,r.addEventListener("unhandledrejection",n)}},wrapGlobals:function(r,e,n){if(r){var t,a,l="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(t=0;t<l.length;++t)r[a=l[t]]&&r[a].prototype&&o(e,r[a].prototype,n)}}}},function(r,e){function o(r,e){this.impl=r(e,this),this.options=e,function(r){for(var e=function(r){return function(){var e=Array.prototype.slice.call(arguments,0);if(this.impl[r])return this.impl[r].apply(this.impl,e)}},o="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleAnonymousErrors,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureEvent,captureDomContentLoaded,captureLoad".split(","),n=0;n<o.length;n++)r[o[n]]=e(o[n])}(o.prototype)}o.prototype._swapAndProcessMessages=function(r,e){var o,n,t;for(this.impl=r(this.options);o=e.shift();)n=o.method,t=o.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[t[0],o.ts]):this[n].apply(this,t));return this},r.exports=o},function(r,e){r.exports=function(r){return function(e){if(!e&&!window._rollbarInitialized){for(var o,n,t=(r=r||{}).globalAlias||"Rollbar",a=window.rollbar,l=function(r){return new a(r)},i=0;o=window._rollbarShims[i++];)n||(n=o.handler),o.handler._swapAndProcessMessages(l,o.messages);window[t]=n,window._rollbarInitialized=!0}}}}]);this.load(this.ready)};RollbarIntegration.prototype.loaded=function(){return!!window._rollbarDidLoad};RollbarIntegration.prototype.load=function(callback){var loadedCheck=this.loaded;var startTime=(new Date).getTime();var timeout=this.options.loadTimeout;function timer(){if(loadedCheck()){return callback()}if((new Date).getTime()-startTime>=timeout){return callback(new Error("Rollbar timed out while loading"))}setTimeout(timer,1)}timer()};RollbarIntegration.prototype.identify=function(identify){if(!this.options.identify)return;var uid=identify.userId();if(uid===null||uid===undefined)return;var rollbar=window.Rollbar;var person={id:uid};extend(person,identify.traits());rollbar.configure({payload:{person:person}})}},{"@ndhoule/extend":69,"@segment/analytics.js-integration":95}],51:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var SatisMeter=module.exports=integration("SatisMeter").global("satismeter").option("token","").option("apiKey","").tag('<script src="https://app.satismeter.com/satismeter.js">');SatisMeter.prototype.initialize=function(){var self=this;this.load(function(){when(function(){return self.loaded()},self.ready)})};SatisMeter.prototype.loaded=function(){return!!window.satismeter};SatisMeter.prototype.identify=function(identify){window.satismeter({writeKey:this.options.apiKey||this.options.token,userId:identify.userId(),traits:this.analytics.user().traits(),type:"identify"})};SatisMeter.prototype.page=function(){window.satismeter({writeKey:this.options.apiKey||this.options.token,userId:this.analytics.user().id(),type:"page"})}},{"@segment/analytics.js-integration":95,"do-when":139}],52:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Sendinblue=module.exports=integration("Sendinblue").global("sendinblue").option("clientKey","").tag('<script id="sendinblue-js" src="https://sibautomation.com/sa.js?key={{ clientKey }}" type="text/javascript" async>');Sendinblue.prototype.initialize=function(){window.sib={equeue:[],client_key:this.options.clientKey};window.sendinblue={};for(var j=["track","identify","trackLink","page"],i=0;i<j.length;i++){(function(k){window.sendinblue[k]=function(){var arg=Array.prototype.slice.call(arguments);(window.sib[k]||function(){var t={};t[k]=arg;window.sib.equeue.push(t)})(arg[0],arg[1],arg[2])}})(j[i])}this.load(this.ready)};Sendinblue.prototype.loaded=function(){return!!window.sendinblue};Sendinblue.prototype.page=function(page){var name=page.name()||page.url();var traits=page.traits({url:"ma_url",path:"ma_path",title:"ma_title",referrer:"ma_referrer"});window.sendinblue.page(name,traits)};Sendinblue.prototype.identify=function(identify){if(!identify.email())return this.debug("email required");window.sib.email_id=identify.email();var traits=identify.traits({firstname:"FIRSTNAME",lastname:"LASTNAME"});window.sendinblue.identify(identify.email(),traits)};Sendinblue.prototype.track=function(track){window.sendinblue.track(track.event(),{},{data:track.properties()})}},{"@segment/analytics.js-integration":95}],53:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var foldl=require("@ndhoule/foldl");var Sentry=module.exports=integration("Sentry").global("Raven").global("RavenConfig").option("config","").option("serverName",null).option("release",null).option("ignoreErrors",[]).option("ignoreUrls",[]).option("whitelistUrls",[]).option("includePaths",[]).option("maxMessageLength",null).option("logger",null).option("customVersionProperty",null).tag('<script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous">');Sentry.prototype.initialize=function(){var dsnPublic=this.options.config;var customRelease=this.options.customVersionProperty?window[this.options.customVersionProperty]:null;var options={logger:this.options.logger,release:customRelease||this.options.release,serverName:this.options.serverName,whitelistUrls:this.options.whitelistUrls,ignoreErrors:this.options.ignoreErrors,ignoreUrls:this.options.ignoreUrls,includePaths:this.options.includePaths,maxMessageLength:this.options.maxMessageLength};window.RavenConfig={dsn:dsnPublic,config:reject(options)};this.load(this.ready)};Sentry.prototype.loaded=function(){return is.object(window.Raven)};Sentry.prototype.identify=function(identify){window.Raven.setUserContext(identify.traits())};function reject(obj){return foldl(function(result,val,key){var payload=result;if(val!==null&&val!==""&&!is.array(val)){payload[key]=val}if(is.array(val)){var ret=[];for(var x=0;x<val.length;x++){if(val[x]!==null&&val[x]!=="")ret.push(val[x])}if(!is.empty(ret)){payload[key]=ret}}return payload},{},obj)}},{"@ndhoule/foldl":70,"@segment/analytics.js-integration":95,is:149}],54:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var tick=require("next-tick");var SnapEngage=module.exports=integration("SnapEngage").assumesPageview().global("SnapABug").global("SnapEngage").option("apiKey","").option("listen",false).tag('<script src="//www.snapengage.com/cdn/js/{{ apiKey }}.js">');var integrationContext={name:"snapengage",version:"1.0.0"};SnapEngage.prototype.initialize=function(){var self=this;this.load(function(){if(self.options.listen)self.attachListeners();tick(self.ready)})};SnapEngage.prototype.loaded=function(){return is.object(window.SnapABug)&&is.object(window.SnapEngage)};SnapEngage.prototype.identify=function(identify){var email=identify.email();if(!email)return;window.SnapABug.setUserEmail(email)};SnapEngage.prototype.attachListeners=function(){var self=this;window.SnapEngage.setCallback("StartChat",function(){self.analytics.track("Live Chat Conversation Started",{},{context:{integration:integrationContext}})});window.SnapEngage.setCallback("ChatMessageReceived",function(agent){self.analytics.track("Live Chat Message Received",{agentUsername:agent},{context:{integration:integrationContext}})});window.SnapEngage.setCallback("ChatMessageSent",function(){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext}})});window.SnapEngage.setCallback("Close",function(){self.analytics.track("Live Chat Conversation Ended",{},{context:{integration:integrationContext}})})}},{"@segment/analytics.js-integration":95,is:149,"next-tick":164}],55:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var keys=require("@ndhoule/keys");var push=require("global-queue")("_tlq");var Taplytics=module.exports=integration("Taplytics").global("_tlq").global("Taplytics").option("apiKey","").option("options",{}).tag('<script id="taplytics" src="//cdn.taplytics.com/taplytics.min.js">').assumesPageview();Taplytics.prototype.initialize=function(){var options=this.options.options;var apiKey=this.options.apiKey;window._tlq=window._tlq||[];push("init",apiKey,options);this.load(this.ready)};Taplytics.prototype.loaded=function(){return window.Taplytics&&is.object(window.Taplytics._in)};Taplytics.prototype.identify=function(identify){var userId=identify.userId();var attrs=identify.traits()||{};if(userId)attrs.id=userId;if(keys(attrs).length){push("identify",attrs)}};Taplytics.prototype.group=function(group){var attrs={};var groupId=group.groupId();var traits=group.traits();var user=this.analytics.user();var userId=user.id();if(groupId)attrs.groupId=groupId;if(traits)attrs.groupTraits=traits;if(userId)attrs.id=userId;if(keys(attrs).length)push("identify",attrs)};Taplytics.prototype.track=function(track){var properties=track.properties()||{};var total=track.revenue()||track.total()||0;push("track",track.event(),total,properties)};Taplytics.prototype.page=function(page){var category=page.category()||undefined;var name=page.fullName()||undefined;var properties=page.properties()||{};push("page",category,name,properties)};Taplytics.prototype.reset=function(){push("reset")}},{"@ndhoule/keys":72,"@segment/analytics.js-integration":95,"global-queue":143,is:149}],56:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_tsq");var slug=require("slug-component");var Tapstream=module.exports=integration("Tapstream").assumesPageview().global("_tsq").option("accountName","").option("trackAllPages",true).option("trackNamedPages",true).option("trackCategorizedPages",true).tag('<script src="//cdn.tapstream.com/static/js/tapstream.js">');Tapstream.prototype.initialize=function(){window._tsq=window._tsq||[];push("setAccountName",this.options.accountName);this.load(this.ready)};Tapstream.prototype.loaded=function(){return!!(window._tsq&&window._tsq.push!==Array.prototype.push)};Tapstream.prototype.page=function(page){var category=page.category();var opts=this.options;var name=page.fullName();if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Tapstream.prototype.track=function(track){var props=track.properties();push("fireHit",slug(track.event()),[props.url])}},{"@segment/analytics.js-integration":95,"global-queue":143,"slug-component":186}],57:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var defaults=require("@ndhoule/defaults");var foldl=require("@ndhoule/foldl");var each=require("component-each");var get=require("obj-case");var Track=require("segmentio-facade").Track;var extend=require("@ndhoule/extend");var TwitterAds=module.exports=integration("Twitter Ads").option("page","").option("universalTagPixelId","").option("identifier","productId").tag("singleTag",'<img src="//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter&tw_sale_amount={{ revenue }}&tw_order_quantity={{ quantity }}"/>').tag("universalTag",'<script src="//static.ads-twitter.com/uwt.js">').mapping("events");TwitterAds.prototype.initialize=function(){var self=this;if(this.options.universalTagPixelId){(function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments)},s.version="1.1",s.queue=[])})(window,document,"script");this.load("universalTag",function(){window.twq("init",self.options.universalTagPixelId);self.ready()})}else{this.ready()}};TwitterAds.prototype.page=function(page){if(this.options.universalTagPixelId){window.twq("track","PageView")}if(this.options.page){this.load("singleTag",{pixelId:this.options.page,revenue:0,quantity:0})}};TwitterAds.prototype.track=function(track){this.fireLegacyConversionTags(track)};TwitterAds.prototype.productsSearched=function(track){this.fireLegacyConversionTags(track);if(this.options.universalTagPixelId){var payload=setStatus(track.properties());window.twq("track","Search",payload)}};TwitterAds.prototype.productViewed=function(product){this.fireLegacyConversionTags(product);if(this.options.universalTagPixelId){var props=product.properties();var identifier=this.options.identifier;var payload={content_ids:[product[identifier]()],content_type:"product",content_name:product.name(),content_category:product.category()};payload=extend(payload,setStatus(props));window.twq("track","ViewContent",payload)}};TwitterAds.prototype.productAdded=function(product){this.fireLegacyConversionTags(product);if(this.options.universalTagPixelId){var props=product.properties();var identifier=this.options.identifier;var payload={content_ids:[product[identifier]()],content_type:"product",content_name:product.name()};payload=extend(payload,setStatus(props));window.twq("track","AddToCart",payload)}};TwitterAds.prototype.orderCompleted=function(track){var identifier=this.options.identifier;var sumOfQuantities=foldl(function(cartQuantity,product){return cartQuantity+(get(product,"quantity")||0)},0,track.products());this.fireLegacyConversionTags(track,{quantity:sumOfQuantities});if(this.options.universalTagPixelId){var payload={currency:track.currency(),content_type:"product",order_id:track.orderId(),num_items:sumOfQuantities.toString()};if(track.revenue())payload.value=track.revenue().toFixed(2);payload=extend(payload,setStatus(track.properties()));var content=foldl(function(ret,item){var product=new Track({properties:item});var contentId=product[identifier]();ret.ids.push(contentId);ret.names.push(product.name());return ret},{ids:[],names:[]},track.products());payload.content_ids=content.ids.sort();payload.content_name=content.names.sort().join(", ");window.twq("track","Purchase",payload)}};TwitterAds.prototype.productAddedToWishlist=function(product){this.fireLegacyConversionTags(product);if(this.options.universalTagPixelId){var props=product.properties();var identifier=this.options.identifier;var payload={content_name:product.name(),content_category:product.category(),content_ids:[product[identifier]()]};payload=extend(payload,setStatus(props));window.twq("track","AddToWishlist",payload)}};TwitterAds.prototype.checkoutStarted=function(track){var sumOfQuantities=foldl(function(cartQuantity,product){return cartQuantity+(get(product,"quantity")||0)},0,track.products());this.fireLegacyConversionTags(track,{quantity:sumOfQuantities});if(this.options.universalTagPixelId){var identifier=this.options.identifier;var content=foldl(function(ret,item){var product=new Track({properties:item});var contentId=product[identifier]();ret.ids.push(contentId);ret.names.push(product.name());ret.categories.push(product.category());return ret},{ids:[],names:[],categories:[]},track.products());var payload={content_ids:content.ids.sort(),content_name:content.names.sort().join(", "),content_category:content.categories.join(", ")};payload=extend(payload,setStatus(track.properties()));window.twq("track","InitiateCheckout",payload)}};TwitterAds.prototype.paymentInfoEntered=function(track){this.fireLegacyConversionTags(track);var payload=extend({},setStatus(track.properties()))
;if(this.options.universalTagPixelId)window.twq("track","AddPaymentInfo",payload)};TwitterAds.prototype.fireLegacyConversionTags=function(track,override){var events=this.events(track.event());var self=this;each(events,function(pixelId){var tagParams={pixelId:pixelId,quantity:track.proxy("properties.quantity")||0,revenue:track.revenue()||0};if(override)tagParams=defaults(override,tagParams);self.load("singleTag",tagParams)})};function setStatus(properties){return properties.status?{status:properties.status}:{}}},{"@ndhoule/defaults":65,"@ndhoule/extend":69,"@ndhoule/foldl":70,"@segment/analytics.js-integration":95,"component-each":127,"obj-case":165,"segmentio-facade":179}],58:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var load=require("@segment/load-script");var Userpilot=integration("Userpilot").global("Userpilot").option("appToken","");Userpilot.prototype.initialize=function(){this.load(this.ready)};Userpilot.prototype.loaded=function(){return isObject(window.userpilot)};Userpilot.prototype.load=function(callback){load("//js.userpilot.io/"+this.options.appToken+"/latest.js",callback)};Userpilot.prototype.page=function(page){window.userpilot.reload(page.name(),page.properties())};Userpilot.prototype.identify=function(identify){var traits=identify.traits();if(traits.createdAt){traits.created_at=traits.createdAt;delete traits.createdAt}window.userpilot.identify(identify.userId(),traits)};Userpilot.prototype.group=function(group){var companyId=group.groupId(),traits=group.traits();if(window.userpilot.group)window.userpilot.group(companyId,traits)};Userpilot.prototype.track=function(track){window.userpilot.track(track.event(),track.properties())};module.exports=exports=function(analytics){analytics.addIntegration(Userpilot)};exports.Integration=Userpilot},{"@segment/analytics.js-integration":95,"@segment/load-script":111,isobject:150}],59:[function(require,module,exports){"use strict";var cookie=require("component-cookie");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_veroq");var Vero=module.exports=integration("Vero").global("_veroq").option("apiKey","").tag('<script src="//d3qxef4rp70elm.cloudfront.net/m.js">');Vero.prototype.initialize=function(){if(!cookie("__veroc4"))cookie("__veroc4","[]");push("init",{api_key:this.options.apiKey});this.load(this.ready)};Vero.prototype.loaded=function(){return!!(window._veroq&&window._veroq.push!==Array.prototype.push)};Vero.prototype.page=function(page){push("trackPageview");var tags=page.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();var id=identify.userId();if(!id&&!email)return;push("user",traits);var tags=identify.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.track=function(track){var regex=/[uU]nsubscribe/;if(track.event().match(regex)){push("unsubscribe",{id:track.properties().id})}else{push("track",track.event(),track.properties(),{source:"segment"})}var tags=track.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.alias=function(alias){var to=alias.to();if(alias.from()){push("reidentify",to,alias.from())}else{push("reidentify",to)}var tags=alias.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.addOrRemoveTags=function(tags){var payload={};if(!tags.action||!tags.values)return;var action=tags.action;payload[action]=tags.values;if(tags.id){payload.id=tags.id}push("tags",payload)}},{"@segment/analytics.js-integration":95,"component-cookie":123,"global-queue":143}],60:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var remove=require("obj-case").del;var WebEngage=module.exports=integration("WebEngage").readyOnInitialize().global("webengage").option("licenseCode","").tag("http",'<script src="http://cdn.widgets.webengage.com/js/webengage-min-v-6.0.js">').tag("https",'<script src="https://ssl.widgets.webengage.com/js/webengage-min-v-6.0.js">');WebEngage.prototype.initialize=function(){!function(e,t,n){function o(e,t){e[t[t.length-1]]=function(){r.__queue.push([t.join("."),arguments])}}var i,s,r=e[n],g=" ",l="init options track screen onReady".split(g),a="feedback survey notification".split(g),c="options render clear abort".split(g),p="Open Close Submit Complete View Click".split(g),u="identify login logout setAttribute".split(g);if(!r||!r.__v){for(e[n]=r={__queue:[],__v:"6.0",user:{}},i=0;i<l.length;i++)o(r,[l[i]]);for(i=0;i<a.length;i++){for(r[a[i]]={},s=0;s<c.length;s++)o(r[a[i]],[a[i],c[s]]);for(s=0;s<p.length;s++)o(r[a[i]],[a[i],"on"+p[s]])}for(i=0;i<u.length;i++)o(r.user,["user",u[i]])}}(window,document,"webengage");window.webengage.ixP="Segment";window.webengage.init(this.options.licenseCode);var name=useHttps()?"https":"http";this.load(name,this.ready)};WebEngage.prototype.loaded=function(){return!!window.webengage};WebEngage.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var mappedTraits=mapTraits(traits);if(identify.firstName())mappedTraits.we_first_name=identify.firstName();if(identify.lastName())mappedTraits.we_last_name=identify.lastName();remove(mappedTraits,"name");remove(mappedTraits,"firstName");remove(mappedTraits,"lastName");if(id)window.webengage.user.login(id);if(traits)window.webengage.user.setAttribute(mappedTraits)};WebEngage.prototype.track=function(track){var event=track.event();var properties=track.properties();window.webengage.track(event,properties)};WebEngage.prototype.page=function(page){var name=page.name()||"";var properties=page.properties();window.webengage.screen(name,properties)};function mapTraits(traits){var aliases={email:"we_email",gender:"we_gender",birthday:"we_birth_date",phone:"we_phone",company:"we_company"};var mapped={};for(var k in traits){if(aliases.hasOwnProperty(k)){mapped[aliases[k]]=traits[k]}else{mapped[k]=traits[k]}}if(Object.prototype.toString.call(mapped.we_birth_date)==="[object Date]"){var date=mapped.we_birth_date;mapped.we_birth_date=date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())}return mapped}function pad(number){return number<10?"0"+number:number}},{"@segment/analytics.js-integration":95,"obj-case":165,"use-https":198}],61:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var toSnakeCase=require("to-snake-case");var is=require("is");var foldl=require("@ndhoule/foldl");var json=require("json3");var isostring=require("isostring");var time=require("unix-time");var Woopra=module.exports=integration("Woopra").global("woopra").option("domain","").option("cookieName","wooTracker").option("cookieDomain",null).option("cookiePath","/").option("ping",true).option("pingInterval",12e3).option("idleTimeout",3e5).option("downloadTracking",true).option("outgoingTracking",true).option("outgoingIgnoreSubdomain",true).option("downloadPause",200).option("outgoingPause",400).option("ignoreQueryUrl",true).option("hideCampaign",false).tag('<script src="//static.woopra.com/js/w.js">');Woopra.prototype.initialize=function(){(function(){var i,s,z,w=window,d=document,a=arguments,q="script",f=["config","track","identify","visit","push","call"],c=function(){var i,self=this;self._e=[];for(i=0;i<f.length;i++){(function(f){self[f]=function(){self._e.push([f].concat(Array.prototype.slice.call(arguments,0)));return self}})(f[i])}};w._w=w._w||{};for(i=0;i<a.length;i++){w._w[a[i]]=w[a[i]]=w[a[i]]||new c}})("woopra");this.load(this.ready);each(this.options,function(key,value){key=toSnakeCase(key);if(value==null)return;if(value==="")return;window.woopra.config(key,value)})};Woopra.prototype.loaded=function(){return!!(window.woopra&&window.woopra.loaded)};Woopra.prototype.page=function(page){setContext(page);var props=page.properties();var name=page.fullName();if(name)props.title=name;window.woopra.track("pv",props)};Woopra.prototype.identify=function(identify){setContext(identify);var traits=identify.traits();each(traits,function(key,val){if(isostring(val)||is.date(val)){traits[key]=time(val)*1e3}});if(identify.name())traits.name=identify.name();window.woopra.identify(traits).push()};Woopra.prototype.track=function(track){setContext(track);window.woopra.track(track.event(),stringifyNested(track.properties()))};function stringifyNested(obj){return foldl(function(results,value,key){if(is.array(obj[key])){results[key]=json.stringify(obj[key])}else{results[key]=obj[key]}return results},{},obj)}function setContext(event){var options=event.options();if(options){window.woopra.config({context:options})}}},{"@ndhoule/foldl":70,"@segment/analytics.js-integration":95,"component-each":127,is:149,isostring:151,json3:153,"to-snake-case":192,"unix-time":197}],62:[function(require,module,exports){"use strict";var analytics=require("@segment/analytics.js-core");var Integrations=require("./integrations");module.exports=exports=analytics;analytics.require=require;exports.VERSION="2.11.0";Object.keys(Integrations).forEach(function(name){analytics.use(Integrations[name])})},{"./integrations":63,"@segment/analytics.js-core":82}],63:[function(require,module,exports){"use strict";module.exports={adroll:require("../integrations/adroll"),adwords:require("../integrations/adwords"),amplitude:require("../integrations/amplitude"),appcues:require("../integrations/appcues"),appboy:require("../integrations/appboy"),bugsnag:require("../integrations/bugsnag"),"bing-ads":require("../integrations/bing-ads"),castle:require("../integrations/castle"),chameleon:require("../integrations/chameleon"),chartbeat:require("../integrations/chartbeat"),clevertap:require("../integrations/clevertap"),clicky:require("../integrations/clicky"),"crazy-egg":require("../integrations/crazy-egg"),crisp:require("../integrations/crisp"),customerio:require("../integrations/customerio"),drift:require("../integrations/drift"),drip:require("../integrations/drip"),elevio:require("../integrations/elevio"),errorception:require("../integrations/errorception"),"facebook-pixel":require("../integrations/facebook-pixel"),fullstory:require("../integrations/fullstory"),"google-tag-manager":require("../integrations/google-tag-manager"),"google-analytics":require("../integrations/google-analytics"),"google-adwords-new":require("../integrations/google-adwords-new"),gosquared:require("../integrations/gosquared"),heap:require("../integrations/heap"),hellobar:require("../integrations/hellobar"),hotjar:require("../integrations/hotjar"),hubspot:require("../integrations/hubspot"),inspectlet:require("../integrations/inspectlet"),intercom:require("../integrations/intercom"),"keen-io":require("../integrations/keen-io"),kissmetrics:require("../integrations/kissmetrics"),klaviyo:require("../integrations/klaviyo"),"linkedin-insight-tag":require("../integrations/linkedin-insight-tag"),livechat:require("../integrations/livechat"),"lucky-orange":require("../integrations/lucky-orange"),mixpanel:require("../integrations/mixpanel"),mouseflow:require("../integrations/mouseflow"),mousestats:require("../integrations/mousestats"),olark:require("../integrations/olark"),optimizely:require("../integrations/optimizely"),parsely:require("../integrations/parsely"),pingdom:require("../integrations/pingdom"),"pinterest-tag":require("../integrations/pinterest-tag"),qualaroo:require("../integrations/qualaroo"),quantcast:require("../integrations/quantcast"),replaybird:require("../integrations/replaybird"),rollbar:require("../integrations/rollbar"),satismeter:require("../integrations/satismeter"),sendinblue:require("../integrations/sendinblue"),sentry:require("../integrations/sentry"),snapengage:require("../integrations/snapengage"),taplytics:require("../integrations/taplytics"),tapstream:require("../integrations/tapstream"),"twitter-ads":require("../integrations/twitter-ads"),userpilot:require("../integrations/userpilot"),webengage:require("../integrations/webengage"),woopra:require("../integrations/woopra"),vero:require("../integrations/vero")}},{"../integrations/adroll":1,"../integrations/adwords":2,"../integrations/amplitude":3,"../integrations/appboy":5,"../integrations/appcues":6,"../integrations/bing-ads":7,"../integrations/bugsnag":8,"../integrations/castle":9,"../integrations/chameleon":10,"../integrations/chartbeat":11,"../integrations/clevertap":12,"../integrations/clicky":13,"../integrations/crazy-egg":14,"../integrations/crisp":15,"../integrations/customerio":16,"../integrations/drift":17,"../integrations/drip":18,"../integrations/elevio":19,"../integrations/errorception":20,"../integrations/facebook-pixel":21,"../integrations/fullstory":22,"../integrations/google-adwords-new":23,"../integrations/google-analytics":24,"../integrations/google-tag-manager":25,"../integrations/gosquared":26,"../integrations/heap":27,"../integrations/hellobar":28,"../integrations/hotjar":29,"../integrations/hubspot":30,"../integrations/inspectlet":31,"../integrations/intercom":32,"../integrations/keen-io":33,"../integrations/kissmetrics":34,"../integrations/klaviyo":35,"../integrations/linkedin-insight-tag":36,"../integrations/livechat":37,"../integrations/lucky-orange":38,"../integrations/mixpanel":39,"../integrations/mouseflow":40,"../integrations/mousestats":41,"../integrations/olark":42,"../integrations/optimizely":43,"../integrations/parsely":44,"../integrations/pingdom":45,"../integrations/pinterest-tag":46,"../integrations/qualaroo":47,"../integrations/quantcast":48,"../integrations/replaybird":49,"../integrations/rollbar":50,"../integrations/satismeter":51,"../integrations/sendinblue":52,"../integrations/sentry":53,"../integrations/snapengage":54,"../integrations/taplytics":55,"../integrations/tapstream":56,"../integrations/twitter-ads":57,"../integrations/userpilot":58,"../integrations/vero":59,"../integrations/webengage":60,"../integrations/woopra":61}],64:[function(require,module,exports){"use strict";var type=require("component-type");var clone=function clone(obj){var t=type(obj);if(t==="object"){var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy}if(t==="array"){var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy}if(t==="regexp"){var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags)}if(t==="date"){return new Date(obj.getTime())}return obj};module.exports=clone},{"component-type":135}],65:[function(require,module,exports){"use strict";var drop=require("@ndhoule/drop");var rest=require("@ndhoule/rest");var has=Object.prototype.hasOwnProperty;var objToString=Object.prototype.toString;var isObject=function isObject(value){return Boolean(value)&&typeof value==="object"};var isPlainObject=function isPlainObject(value){return Boolean(value)&&objToString.call(value)==="[object Object]"};var shallowCombiner=function shallowCombiner(target,source,value,key){if(has.call(source,key)&&target[key]===undefined){target[key]=value}return source};var deepCombiner=function(target,source,value,key){if(has.call(source,key)){if(isPlainObject(target[key])&&isPlainObject(value)){target[key]=defaultsDeep(target[key],value)}else if(target[key]===undefined){target[key]=value}}return source};var defaultsWith=function(combiner,target){if(!isObject(target)){return target}combiner=combiner||shallowCombiner;var sources=drop(2,arguments);for(var i=0;i<sources.length;i+=1){for(var key in sources[i]){combiner(target,sources[i],sources[i][key],key)}}return target};var defaultsDeep=function defaultsDeep(target){return defaultsWith.apply(null,[deepCombiner,target].concat(rest(arguments)))};var defaults=function(target){return defaultsWith.apply(null,[null,target].concat(rest(arguments)))};module.exports=defaults;module.exports.deep=defaultsDeep},{"@ndhoule/drop":66,"@ndhoule/rest":75}],66:[function(require,module,exports){"use strict";var max=Math.max;var drop=function drop(count,collection){var length=collection?collection.length:0;if(!length){return[]}var toDrop=max(Number(count)||0,0);var resultsLength=max(length-toDrop,0);var results=new Array(resultsLength);for(var i=0;i<resultsLength;i+=1){results[i]=collection[i+toDrop]}return results};module.exports=drop},{}],67:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var objToString=Object.prototype.toString;var isNumber=function isNumber(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var isArray=typeof Array.isArray==="function"?Array.isArray:function isArray(val){return objToString.call(val)==="[object Array]"};var isArrayLike=function isArrayLike(val){return val!=null&&(isArray(val)||val!=="function"&&isNumber(val.length))};var arrayEach=function arrayEach(iterator,array){for(var i=0;i<array.length;i+=1){if(iterator(array[i],i,array)===false){break}}};var baseEach=function baseEach(iterator,object){var ks=keys(object);for(var i=0;i<ks.length;i+=1){if(iterator(object[ks[i]],ks[i],object)===false){break}}};var each=function each(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{"@ndhoule/keys":72}],68:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var every=function every(predicate,collection){if(typeof predicate!=="function"){throw new TypeError("`predicate` must be a function but was a "+typeof predicate)}var result=true;each(function(val,key,collection){result=!!predicate(val,key,collection);if(!result){return false}},collection);return result};module.exports=every},{"@ndhoule/each":67}],69:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty;var extend=function extend(dest){var sources=Array.prototype.slice.call(arguments,1);for(var i=0;i<sources.length;i+=1){for(var key in sources[i]){if(has.call(sources[i],key)){dest[key]=sources[i][key]}}}return dest};module.exports=extend},{}],70:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var foldl=function foldl(iterator,accumulator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}each(function(val,i,collection){accumulator=iterator(accumulator,val,i,collection)},collection);return accumulator};module.exports=foldl},{"@ndhoule/each":67}],71:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var strIndexOf=String.prototype.indexOf;var sameValueZero=function sameValueZero(value1,value2){if(value1===value2){return value1!==0||1/value1===1/value2}return value1!==value1&&value2!==value2};var includes=function includes(searchElement,collection){var found=false;if(typeof collection==="string"){return strIndexOf.call(collection,searchElement)!==-1}each(function(value){if(sameValueZero(value,searchElement)){found=true;return false}},collection);return found};module.exports=includes},{"@ndhoule/each":67}],72:[function(require,module,exports){"use strict";var hop=Object.prototype.hasOwnProperty;var strCharAt=String.prototype.charAt;var toStr=Object.prototype.toString;var charAt=function(str,index){return strCharAt.call(str,index)};var has=function has(context,prop){return hop.call(context,prop)};var isString=function isString(val){return toStr.call(val)==="[object String]"};var isArrayLike=function isArrayLike(val){return val!=null&&(typeof val!=="function"&&typeof val.length==="number")};var indexKeys=function indexKeys(target,pred){pred=pred||has;var results=[];for(var i=0,len=target.length;i<len;i+=1){if(pred(target,i)){results.push(String(i))}}return results};var objectKeys=function objectKeys(target,pred){pred=pred||has;var results=[];for(var key in target){if(pred(target,key)){results.push(String(key))}}return results};var keys=function keys(source){if(source==null){return[]}if(isString(source)){return indexKeys(source,charAt)}if(isArrayLike(source)){return indexKeys(source,has)}return objectKeys(source)};module.exports=keys},{}],73:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var map=function map(iterator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}var result=[];each(function(val,i,collection){result.push(iterator(val,i,collection))},collection);return result};module.exports=map},{"@ndhoule/each":67}],74:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString;var existy=function(val){return val!=null};var isArray=function(val){return objToString.call(val)==="[object Array]"};var isString=function(val){return typeof val==="string"||objToString.call(val)==="[object String]"};var isObject=function(val){return val!=null&&typeof val==="object"};var pick=function pick(props,object){if(!existy(object)||!isObject(object)){return{}}if(isString(props)){props=[props]}if(!isArray(props)){props=[]}var result={};for(var i=0;i<props.length;i+=1){if(isString(props[i])&&props[i]in object){result[props[i]]=object[props[i]]}}return result};module.exports=pick},{}],75:[function(require,module,exports){"use strict";var max=Math.max;var rest=function rest(collection){if(collection==null||!collection.length){return[]}var results=new Array(max(collection.length-2,0));for(var i=1;i<collection.length;i+=1){results[i-1]=collection[i]}return results};module.exports=rest},{}],76:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var values=function values(source){var ks=keys(source);var results=new Array(ks.length);for(var i=0;i<ks.length;i+=1){results[i]=source[ks[i]]}return results};module.exports=values},{"@ndhoule/keys":72}],77:[function(require,module,exports){var type=require("component-type");var clone=require("component-clone");module.exports=alias;function alias(obj,method){switch(type(method)){case"object":return aliasByDictionary(clone(obj),method);case"function":return aliasByFunction(clone(obj),method)}}function aliasByDictionary(obj,aliases){for(var key in aliases){if(undefined===obj[key])continue;obj[aliases[key]]=obj[key];delete obj[key]}return obj}function aliasByFunction(obj,convert){var output={};for(var key in obj)output[convert(key)]=obj[key];return output}},{"component-clone":122,"component-type":135}],78:[function(require,module,exports){(function(global){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _analytics=global.analytics;var Alias=require("segmentio-facade").Alias;var Emitter=require("component-emitter");var Facade=require("segmentio-facade");var Group=require("segmentio-facade").Group;var Identify=require("segmentio-facade").Identify;var SourceMiddlewareChain=require("./middleware").SourceMiddlewareChain;var IntegrationMiddlewareChain=require("./middleware").IntegrationMiddlewareChain;var DestinationMiddlewareChain=require("./middleware").DestinationMiddlewareChain;var Page=require("segmentio-facade").Page;var Track=require("segmentio-facade").Track;var bindAll=require("bind-all");var clone=require("./utils/clone");var extend=require("extend");var cookie=require("./cookie");var metrics=require("./metrics");var debug=require("debug");var defaults=require("@ndhoule/defaults");var each=require("./utils/each");var foldl=require("@ndhoule/foldl");var group=require("./group");var is=require("is");var isMeta=require("@segment/is-meta");var keys=require("@ndhoule/keys");var memory=require("./memory");var nextTick=require("next-tick");var normalize=require("./normalize");var on=require("component-event").bind;var pageDefaults=require("./pageDefaults");var pick=require("@ndhoule/pick");var prevent=require("@segment/prevent-default");var querystring=require("component-querystring");var store=require("./store");var user=require("./user");var type=require("component-type");function Analytics(){this._options({});this.Integrations={};this._sourceMiddlewares=new SourceMiddlewareChain;this._integrationMiddlewares=new IntegrationMiddlewareChain;this._destinationMiddlewares={};this._integrations={};this._readied=false;this._timeout=300;this._user=user;this.log=debug("analytics.js");bindAll(this);var self=this;this.on("initialize",function(settings,options){if(options.initialPageview)self.page();self._parseQuery(window.location.search)})}Emitter(Analytics.prototype);Analytics.prototype.use=function(plugin){plugin(this);return this};Analytics.prototype.addIntegration=function(Integration){var name=Integration.prototype.name;if(!name)throw new TypeError("attempted to add an invalid integration");this.Integrations[name]=Integration;return this};Analytics.prototype.addSourceMiddleware=function(middleware){this._sourceMiddlewares.add(middleware);return this};Analytics.prototype.addIntegrationMiddleware=function(middleware){this._integrationMiddlewares.add(middleware);return this};Analytics.prototype.addDestinationMiddleware=function(integrationName,middlewares){var self=this;middlewares.forEach(function(middleware){if(!self._destinationMiddlewares[integrationName]){self._destinationMiddlewares[integrationName]=new DestinationMiddlewareChain}self._destinationMiddlewares[integrationName].add(middleware)});return self};Analytics.prototype.init=Analytics.prototype.initialize=function(settings,options){settings=settings||{};options=options||{};this._options(options);this._readied=false;var self=this;each(function(_opts,name){var Integration=self.Integrations[name];if(!Integration)delete settings[name]},settings);each(function(opts,name){if(options.integrations){if(options.integrations[name]===false||options.integrations.All===false&&!options.integrations[name]){return}}var Integration=self.Integrations[name];var clonedOpts={};extend(true,clonedOpts,opts);var integration=new Integration(clonedOpts);self.log("initialize %o - %o",name,opts);self.add(integration)},settings);var integrations=this._integrations;user.load();group.load();var readyCallCount=0;var integrationCount=keys(integrations).length;var ready=function(){readyCallCount++;if(readyCallCount>=integrationCount){self._readied=true;self.emit("ready")}};if(integrationCount<=0){ready()}this.failedInitializations=[];var initialPageSkipped=false;each(function(integration){if(options.initialPageview&&integration.options.initialPageview===false){var page=integration.page;integration.page=function(){if(initialPageSkipped){return page.apply(this,arguments)}initialPageSkipped=true;return}}integration.analytics=self;integration.once("ready",ready);try{metrics.increment("analytics_js.integration.invoke",{method:"initialize",integration_name:integration.name});integration.initialize()}catch(e){var integrationName=integration.name;metrics.increment("analytics_js.integration.invoke.error",{method:"initialize",integration_name:integration.name});self.failedInitializations.push(integrationName);self.log("Error initializing %s integration: %o",integrationName,e);integration.ready()}},integrations);this.initialized=true;this.emit("initialize",settings,options);return this};Analytics.prototype.setAnonymousId=function(id){this.user().anonymousId(id);return this};Analytics.prototype.add=function(integration){this._integrations[integration.name]=integration;return this};Analytics.prototype.identify=function(id,traits,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=user.id();user.identify(id,traits);var msg=this.normalize({options:options,traits:user.traits(),userId:user.id()});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("identify",new Identify(msg));this.emit("identify",id,traits,options);this._callback(fn);return this};Analytics.prototype.user=function(){return user};Analytics.prototype.group=function(id,traits,options,fn){if(!arguments.length)return group;if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=group.id();group.identify(id,traits);var msg=this.normalize({options:options,traits:group.traits(),groupId:group.id()});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("group",new Group(msg));this.emit("group",id,traits,options);this._callback(fn);return this};Analytics.prototype.track=function(event,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=null,properties=null;var plan=this.options.plan||{};var events=plan.track||{};var planIntegrationOptions={};var msg=this.normalize({properties:properties,options:options,event:event});plan=events[event];if(plan){this.log("plan %o - %o",event,plan);if(plan.enabled===false){planIntegrationOptions={All:false,"Segment.io":true}}else{planIntegrationOptions=plan.integrations||{}}}else{var defaultPlan=events.__default||{enabled:true};if(!defaultPlan.enabled){planIntegrationOptions={All:false,"Segment.io":true}}}defaults(msg.integrations,this._mergeInitializeAndPlanIntegrations(planIntegrationOptions));this._invoke("track",new Track(msg));this.emit("track",event,properties,options);this._callback(fn);return this};Analytics.prototype.trackClick=Analytics.prototype.trackLink=function(links,event,properties){if(!links)return this;if(type(links)==="element")links=[links];var self=this;each(function(el){if(type(el)!=="element"){throw new TypeError("Must pass HTMLElement to `analytics.trackLink`.")}on(el,"click",function(e){var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;var href=el.getAttribute("href")||el.getAttributeNS("http://www.w3.org/1999/xlink","href")||el.getAttribute("xlink:href");self.track(ev,props);if(href&&el.target!=="_blank"&&!isMeta(e)){prevent(e);self._callback(function(){window.location.href=href})}})},links);return this};Analytics.prototype.trackSubmit=Analytics.prototype.trackForm=function(forms,event,properties){if(!forms)return this;if(type(forms)==="element")forms=[forms];var self=this;each(function(el){if(type(el)!=="element")throw new TypeError("Must pass HTMLElement to `analytics.trackForm`.");function handler(e){prevent(e);var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;self.track(ev,props);self._callback(function(){el.submit()})}var $=window.jQuery||window.Zepto;if($){$(el).submit(handler)}else{on(el,"submit",handler)}},forms);return this};Analytics.prototype.page=function(category,name,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=properties=null;if(is.fn(name))fn=name,options=properties=name=null;if(type(category)==="object")options=name,properties=category,name=category=null;if(type(name)==="object")options=properties,properties=name,name=null;if(type(category)==="string"&&type(name)!=="string")name=category,category=null;properties=clone(properties)||{};if(name)properties.name=name;if(category)properties.category=category;var defs=pageDefaults();defaults(properties,defs);var overrides=pick(keys(defs),properties);if(!is.empty(overrides)){options=options||{};options.context=options.context||{};options.context.page=overrides}var msg=this.normalize({properties:properties,category:category,options:options,name:name});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("page",new Page(msg));this.emit("page",category,name,properties,options);this._callback(fn);return this};Analytics.prototype.pageview=function(url){var properties={};if(url)properties.path=url;this.page(properties);return this};Analytics.prototype.alias=function(to,from,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(from))fn=from,options=null,from=null
;if(is.object(from))options=from,from=null;var msg=this.normalize({options:options,previousId:from,userId:to});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("alias",new Alias(msg));this.emit("alias",to,from,options);this._callback(fn);return this};Analytics.prototype.ready=function(fn){if(is.fn(fn)){if(this._readied){nextTick(fn)}else{this.once("ready",fn)}}return this};Analytics.prototype.timeout=function(timeout){this._timeout=timeout};Analytics.prototype.debug=function(str){if(!arguments.length||str){debug.enable("analytics:"+(str||"*"))}else{debug.disable()}};Analytics.prototype._options=function(options){options=options||{};this.options=options;cookie.options(options.cookie);metrics.options(options.metrics);store.options(options.localStorage);user.options(options.user);group.options(options.group);return this};Analytics.prototype._callback=function(fn){if(is.fn(fn)){this._timeout?setTimeout(fn,this._timeout):nextTick(fn)}return this};Analytics.prototype._invoke=function(method,facade){var self=this;try{this._sourceMiddlewares.applyMiddlewares(extend(true,new Facade({}),facade),this._integrations,function(result){if(result===null){self.log('Payload with method "%s" was null and dropped by source a middleware.',method);return}if(!(result instanceof Facade)){result=new Facade(result)}self.emit("invoke",result);metrics.increment("analytics_js.invoke",{method:method});applyIntegrationMiddlewares(result)})}catch(e){metrics.increment("analytics_js.invoke.error",{method:method});self.log("Error invoking .%s method of %s integration: %o",method,name,e)}return this;function applyIntegrationMiddlewares(facade){var failedInitializations=self.failedInitializations||[];each(function(integration,name){var facadeCopy=extend(true,new Facade({}),facade);if(!facadeCopy.enabled(name))return;if(failedInitializations.indexOf(name)>=0){self.log("Skipping invocation of .%s method of %s integration. Integration failed to initialize properly.",method,name)}else{try{self._integrationMiddlewares.applyMiddlewares(facadeCopy,integration.name,function(result){if(result===null){self.log('Payload to integration "%s" was null and dropped by a middleware.',name);return}if(!(result instanceof Facade)){result=new Facade(result)}if(self._destinationMiddlewares[integration.name]){self._destinationMiddlewares[integration.name].applyMiddlewares(facadeCopy,integration.name,function(result){if(result===null){self.log('Payload to destination "%s" was null and dropped by a middleware.',name);return}if(!(result instanceof Facade)){result=new Facade(result)}metrics.increment("analytics_js.integration.invoke",{method:method,integration_name:integration.name});integration.invoke.call(integration,method,result)})}else{metrics.increment("analytics_js.integration.invoke",{method:method,integration_name:integration.name});integration.invoke.call(integration,method,result)}})}catch(e){metrics.increment("analytics_js.integration.invoke.error",{method:method,integration_name:integration.name});self.log("Error invoking .%s method of %s integration: %o",method,name,e)}}},self._integrations)}};Analytics.prototype.push=function(args){var method=args.shift();if(!this[method])return;this[method].apply(this,args)};Analytics.prototype.reset=function(){this.user().logout();this.group().logout()};Analytics.prototype._parseQuery=function(query){var q=querystring.parse(query);var traits=pickPrefix("ajs_trait_",q);var props=pickPrefix("ajs_prop_",q);if(q.ajs_uid)this.identify(q.ajs_uid,traits);if(q.ajs_event)this.track(q.ajs_event,props);if(q.ajs_aid)user.anonymousId(q.ajs_aid);return this;function pickPrefix(prefix,object){var length=prefix.length;var sub;return foldl(function(acc,val,key){if(key.substr(0,length)===prefix){sub=key.substr(length);acc[sub]=val}return acc},{},object)}};Analytics.prototype.normalize=function(msg){msg=normalize(msg,keys(this._integrations));if(msg.anonymousId)user.anonymousId(msg.anonymousId);msg.anonymousId=user.anonymousId();msg.context.page=defaults(msg.context.page||{},pageDefaults());return msg};Analytics.prototype._mergeInitializeAndPlanIntegrations=function(planIntegrations){if(!this.options.integrations){return planIntegrations}var integrations=extend({},this.options.integrations);var integrationName;if(planIntegrations.All===false){integrations={All:false}}for(integrationName in planIntegrations){if(planIntegrations.hasOwnProperty(integrationName)){if(this.options.integrations[integrationName]!==false){integrations[integrationName]=planIntegrations[integrationName]}}}return integrations};Analytics.prototype.noConflict=function(){window.analytics=_analytics;return this};module.exports=Analytics;module.exports.cookie=cookie;module.exports.memory=memory;module.exports.store=store;module.exports.metrics=metrics}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./cookie":79,"./group":81,"./memory":83,"./metrics":84,"./middleware":85,"./normalize":86,"./pageDefaults":87,"./store":88,"./user":89,"./utils/clone":90,"./utils/each":91,"@ndhoule/defaults":65,"@ndhoule/foldl":70,"@ndhoule/keys":72,"@ndhoule/pick":74,"@segment/is-meta":108,"@segment/prevent-default":113,"bind-all":119,"component-emitter":129,"component-event":130,"component-querystring":133,"component-type":135,debug:138,extend:142,is:149,"next-tick":93,"segmentio-facade":179}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bindAll=require("bind-all");var clone=require("./utils/clone");var cookie=require("@segment/cookie");var debug=require("debug")("analytics.js:cookie");var defaults=require("@ndhoule/defaults");var topDomain=require("@segment/top-domain");function Cookie(options){this.options(options)}Cookie.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};var domain="."+topDomain(window.location.href);if(domain===".")domain=null;this._options=defaults(options,{maxage:31536e6,path:"/",domain:domain,sameSite:"Lax"});this.set("ajs:test",true);if(!this.get("ajs:test")){debug("fallback to domain=null");this._options.domain=null}this.remove("ajs:test")};Cookie.prototype.set=function(key,value){try{value=window.JSON.stringify(value);cookie(key,value==="null"?null:value,clone(this._options));return true}catch(e){return false}};Cookie.prototype.get=function(key){try{var value=cookie(key);value=value?window.JSON.parse(value):null;return value}catch(e){return null}};Cookie.prototype.remove=function(key){try{cookie(key,null,clone(this._options));return true}catch(e){return false}};module.exports=bindAll(new Cookie);module.exports.Cookie=Cookie},{"./utils/clone":90,"@ndhoule/defaults":65,"@segment/cookie":104,"@segment/top-domain":117,"bind-all":119,debug:138}],80:[function(require,module,exports){"use strict";var clone=require("./utils/clone");var cookie=require("./cookie");var debug=require("debug")("analytics:entity");var defaults=require("@ndhoule/defaults");var extend=require("@ndhoule/extend");var memory=require("./memory");var store=require("./store");var isodateTraverse=require("@segment/isodate-traverse");module.exports=Entity;function Entity(options){this.options(options);this.initialize()}Entity.prototype.initialize=function(){cookie.set("ajs:cookies",true);if(cookie.get("ajs:cookies")){cookie.remove("ajs:cookies");this._storage=cookie;return}if(store.enabled){this._storage=store;return}debug("warning using memory store both cookies and localStorage are disabled");this._storage=memory};Entity.prototype.storage=function(){return this._storage};Entity.prototype.options=function(options){if(arguments.length===0)return this._options;this._options=defaults(options||{},this.defaults||{})};Entity.prototype.id=function(id){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(id);default:}};Entity.prototype._getId=function(){if(!this._options.persist){return this._id===undefined?null:this._id}var cookieId=this._getIdFromCookie();if(cookieId){return cookieId}var lsId=this._getIdFromLocalStorage();if(lsId){this._setIdInCookies(lsId);return lsId}return null};Entity.prototype._getIdFromCookie=function(){return this.storage().get(this._options.cookie.key)};Entity.prototype._getIdFromLocalStorage=function(){if(!this._options.localStorageFallbackDisabled){return store.get(this._options.cookie.key)}return null};Entity.prototype._setId=function(id){if(this._options.persist){this._setIdInCookies(id);this._setIdInLocalStorage(id)}else{this._id=id}};Entity.prototype._setIdInCookies=function(id){this.storage().set(this._options.cookie.key,id)};Entity.prototype._setIdInLocalStorage=function(id){if(!this._options.localStorageFallbackDisabled){store.set(this._options.cookie.key,id)}};Entity.prototype.properties=Entity.prototype.traits=function(traits){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(traits);default:}};Entity.prototype._getTraits=function(){var ret=this._options.persist?store.get(this._options.localStorage.key):this._traits;return ret?isodateTraverse(clone(ret)):{}};Entity.prototype._setTraits=function(traits){traits=traits||{};if(this._options.persist){store.set(this._options.localStorage.key,traits)}else{this._traits=traits}};Entity.prototype.identify=function(id,traits){traits=traits||{};var current=this.id();if(current===null||current===id)traits=extend(this.traits(),traits);if(id)this.id(id);this.debug("identify %o, %o",id,traits);this.traits(traits);this.save()};Entity.prototype.save=function(){if(!this._options.persist)return false;this._setId(this.id());this._setTraits(this.traits());return true};Entity.prototype.logout=function(){this.id(null);this.traits({});this.storage().remove(this._options.cookie.key);store.remove(this._options.cookie.key);store.remove(this._options.localStorage.key)};Entity.prototype.reset=function(){this.logout();this.options({})};Entity.prototype.load=function(){this.id(this.id());this.traits(this.traits())}},{"./cookie":79,"./memory":83,"./store":88,"./utils/clone":90,"@ndhoule/defaults":65,"@ndhoule/extend":69,"@segment/isodate-traverse":109,debug:138}],81:[function(require,module,exports){"use strict";var Entity=require("./entity");var bindAll=require("bind-all");var debug=require("debug")("analytics:group");var inherit=require("inherits");Group.defaults={persist:true,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}};function Group(options){this.defaults=Group.defaults;this.debug=debug;Entity.call(this,options)}inherit(Group,Entity);module.exports=bindAll(new Group);module.exports.Group=Group},{"./entity":80,"bind-all":119,debug:138,inherits:147}],82:[function(require,module,exports){"use strict";var Analytics=require("./analytics");var analytics=new Analytics;analytics.require=require;analytics.VERSION=require("../package.json").version;module.exports=analytics},{"../package.json":94,"./analytics":78}],83:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var clone=require("./utils/clone");var has=Object.prototype.hasOwnProperty;module.exports=bindAll(new Memory);function Memory(){this.store={}}Memory.prototype.set=function(key,value){this.store[key]=clone(value);return true};Memory.prototype.get=function(key){if(!has.call(this.store,key))return;return clone(this.store[key])};Memory.prototype.remove=function(key){delete this.store[key];return true}},{"./utils/clone":90,"bind-all":119}],84:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var send=require("@segment/send-json");var debug=require("debug")("analytics.js:metrics");function Metrics(options){this.options(options)}Metrics.prototype.options=function(options){options=options||{};this.host=options.host||"api.segment.io/v1";this.sampleRate=options.sampleRate||0;this.flushTimer=options.flushTimer||30*1e3;this.maxQueueSize=options.maxQueueSize||20;this.queue=[];if(this.sampleRate>0){var self=this;setInterval(function(){self._flush()},this.flushTimer)}};Metrics.prototype.increment=function(metric,tags){if(Math.random()>this.sampleRate){return}if(this.queue.length>=this.maxQueueSize){return}this.queue.push({type:"Counter",metric:metric,value:1,tags:tags});if(metric.indexOf("error")>0){this._flush()}};Metrics.prototype._flush=function(){var self=this;if(self.queue.length<=0){return}var payload={series:this.queue};var headers={"Content-Type":"text/plain"};self.queue=[];if(send.type!=="xhr")return;send("https://"+this.host+"/m",payload,headers,function(err,res){debug("sent %O, received %O",payload,[err,res])})};module.exports=bindAll(new Metrics);module.exports.Metrics=Metrics},{"@segment/send-json":114,"bind-all":119,debug:138}],85:[function(require,module,exports){"use strict";var Facade=require("segmentio-facade");module.exports.SourceMiddlewareChain=function SourceMiddlewareChain(){var apply=middlewareChain(this);this.applyMiddlewares=function(facade,integrations,callback){return apply(function(mw,payload,next){mw({integrations:integrations,next:next,payload:payload})},facade,callback)}};module.exports.IntegrationMiddlewareChain=function IntegrationMiddlewareChain(){var apply=middlewareChain(this);this.applyMiddlewares=function(facade,integration,callback){return apply(function(mw,payload,next){mw(payload,integration,next)},facade,callback)}};module.exports.DestinationMiddlewareChain=function DestinationMiddlewareChain(){var apply=middlewareChain(this);this.applyMiddlewares=function(facade,integration,callback){return apply(function(mw,payload,next){mw({payload:payload,integration:integration,next:next})},facade,callback)}};function middlewareChain(dest){var middlewares=[];dest.getMiddlewares=function(){return middlewares.slice()};dest.add=function(middleware){if(typeof middleware!=="function")throw new Error("attempted to add non-function middleware");if(middlewares.indexOf(middleware)!==-1)throw new Error("middleware is already registered");middlewares.push(middleware)};return function applyMiddlewares(run,facade,callback){if(typeof facade!=="object")throw new Error("applyMiddlewares requires a payload object");if(typeof callback!=="function")throw new Error("applyMiddlewares requires a function callback");var middlewaresToApply=middlewares.slice();middlewaresToApply.push(callback);executeChain(run,facade,middlewaresToApply,0)}}function executeChain(run,payload,middlewares,index){if(payload===null){middlewares[middlewares.length-1](null);return}if(!(payload instanceof Facade)){payload=new Facade(payload)}var mw=middlewares[index];if(mw){if(middlewares[index+1]){run(mw,payload,function(result){executeChain(run,result,middlewares,++index)})}else{mw(payload)}}}module.exports.middlewareChain=middlewareChain},{"segmentio-facade":179}],86:[function(require,module,exports){"use strict";var debug=require("debug")("analytics.js:normalize");var defaults=require("@ndhoule/defaults");var each=require("./utils/each");var includes=require("@ndhoule/includes");var map=require("./utils/map");var type=require("component-type");var uuid=require("uuid/v4");var md5=require("spark-md5").hash;var has=Object.prototype.hasOwnProperty;module.exports=normalize;var toplevel=["integrations","anonymousId","timestamp","context"];function normalize(msg,list){var lower=map(function(s){return s.toLowerCase()},list);var opts=msg.options||{};var integrations=opts.integrations||{};var providers=opts.providers||{};var context=opts.context||{};var ret={};debug("<-",msg);each(function(value,key){if(!integration(key))return;if(!has.call(integrations,key))integrations[key]=value;delete opts[key]},opts);delete opts.providers;each(function(value,key){if(!integration(key))return;if(type(integrations[key])==="object")return;if(has.call(integrations,key)&&typeof providers[key]==="boolean")return;integrations[key]=value},providers);each(function(value,key){if(includes(key,toplevel)){ret[key]=opts[key]}else{context[key]=opts[key]}},opts);msg.messageId="ajs-"+md5(window.JSON.stringify(msg)+uuid());delete msg.options;ret.integrations=integrations;ret.context=context;ret=defaults(ret,msg);debug("->",ret);return ret;function integration(name){return!!(includes(name,list)||name.toLowerCase()==="all"||includes(name.toLowerCase(),lower))}}},{"./utils/each":91,"./utils/map":92,"@ndhoule/defaults":65,"@ndhoule/includes":71,"component-type":135,debug:138,"spark-md5":187,"uuid/v4":204}],87:[function(require,module,exports){"use strict";var canonical=require("@segment/canonical");var includes=require("@ndhoule/includes");var url=require("component-url");function pageDefaults(){return{path:canonicalPath(),referrer:document.referrer,search:location.search,title:document.title,url:canonicalUrl(location.search)}}function canonicalPath(){var canon=canonical();if(!canon)return window.location.pathname;var parsed=url.parse(canon);return parsed.pathname}function canonicalUrl(search){var canon=canonical();if(canon)return includes("?",canon)?canon:canon+search;var url=window.location.href;var i=url.indexOf("#");return i===-1?url:url.slice(0,i)}module.exports=pageDefaults},{"@ndhoule/includes":71,"@segment/canonical":102,"component-url":136}],88:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var defaults=require("@ndhoule/defaults");var store=require("@segment/store");function Store(options){this.options(options)}Store.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};defaults(options,{enabled:true});this.enabled=options.enabled&&store.enabled;this._options=options};Store.prototype.set=function(key,value){if(!this.enabled)return false;return store.set(key,value)};Store.prototype.get=function(key){if(!this.enabled)return null;return store.get(key)};Store.prototype.remove=function(key){if(!this.enabled)return false;return store.remove(key)};module.exports=bindAll(new Store);module.exports.Store=Store},{"@ndhoule/defaults":65,"@segment/store":115,"bind-all":119}],89:[function(require,module,exports){"use strict";var Entity=require("./entity");var bindAll=require("bind-all");var cookie=require("./cookie");var debug=require("debug")("analytics:user");var inherit=require("inherits");var rawCookie=require("@segment/cookie");var uuid=require("uuid");var localStorage=require("./store");User.defaults={persist:true,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}};function User(options){this.defaults=User.defaults;this.debug=debug;Entity.call(this,options)}inherit(User,Entity);User.prototype.id=function(id){var prev=this._getId();var ret=Entity.prototype.id.apply(this,arguments);if(prev==null)return ret;if(prev!=id&&id)this.anonymousId(null);return ret};User.prototype.anonymousId=function(anonymousId){var store=this.storage();if(arguments.length){store.set("ajs_anonymous_id",anonymousId);this._setAnonymousIdInLocalStorage(anonymousId);return this}anonymousId=store.get("ajs_anonymous_id");if(anonymousId){this._setAnonymousIdInLocalStorage(anonymousId);store.set("ajs_anonymous_id",anonymousId);return anonymousId}if(!this._options.localStorageFallbackDisabled){anonymousId=localStorage.get("ajs_anonymous_id");if(anonymousId){store.set("ajs_anonymous_id",anonymousId);return anonymousId}}anonymousId=rawCookie("_sio");if(anonymousId){anonymousId=anonymousId.split("----")[0];store.set("ajs_anonymous_id",anonymousId);this._setAnonymousIdInLocalStorage(anonymousId);store.remove("_sio");return anonymousId}anonymousId=uuid.v4();store.set("ajs_anonymous_id",anonymousId);this._setAnonymousIdInLocalStorage(anonymousId);return store.get("ajs_anonymous_id")};User.prototype._setAnonymousIdInLocalStorage=function(id){if(!this._options.localStorageFallbackDisabled){localStorage.set("ajs_anonymous_id",id)}};User.prototype.logout=function(){Entity.prototype.logout.call(this);this.anonymousId(null)};User.prototype.load=function(){if(this._loadOldCookie())return;Entity.prototype.load.call(this)};User.prototype._loadOldCookie=function(){var user=cookie.get(this._options.cookie.oldKey);if(!user)return false;this.id(user.id);this.traits(user.traits);cookie.remove(this._options.cookie.oldKey);return true};module.exports=bindAll(new User);module.exports.User=User},{"./cookie":79,"./entity":80,"./store":88,"@segment/cookie":104,"bind-all":119,debug:138,inherits:147,uuid:200}],90:[function(require,module,exports){"use strict";var type=require("component-type");var clone=function clone(obj){var t=type(obj);var copy;if(t==="object"){copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy}if(t==="array"){copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy}if(t==="regexp"){var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags)}if(t==="date"){return new Date(obj.getTime())}return obj};module.exports=clone},{"component-type":135}],91:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var objToString=Object.prototype.toString;var isNumber=function isNumber(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var isArray=typeof Array.isArray==="function"?Array.isArray:function isArray(val){return objToString.call(val)==="[object Array]"};var isArrayLike=function isArrayLike(val){return val!=null&&(isArray(val)||val!=="function"&&isNumber(val.length))};var arrayEach=function arrayEach(iterator,array){for(var i=0;i<array.length;i+=1){if(iterator(array[i],i,array)===false){break}}};var baseEach=function baseEach(iterator,object){var ks=keys(object);for(var i=0;i<ks.length;i+=1){if(iterator(object[ks[i]],ks[i],object)===false){break}}};var each=function each(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{"@ndhoule/keys":72}],92:[function(require,module,exports){"use strict";var each=require("./each");var map=function map(iterator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}var result=[];each(function(val,i,collection){result.push(iterator(val,i,collection))},collection);return result};module.exports=map},{"./each":91}],93:[function(require,module,exports){(function(process,setImmediate){(function(){"use strict";var callable,byObserver;callable=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn};byObserver=function(Observer){var node=document.createTextNode(""),queue,i=0;new Observer(function(){var data;if(!queue)return;data=queue;queue=null;if(typeof data==="function"){data();return}data.forEach(function(fn){fn()})}).observe(node,{characterData:true});return function(fn){callable(fn);if(queue){if(typeof queue==="function")queue=[queue,fn];else queue.push(fn);return}queue=fn;node.data=i=++i%2}};module.exports=function(){if(typeof process!=="undefined"&&process&&typeof process.nextTick==="function"){return process.nextTick}if(typeof document==="object"&&document){if(typeof MutationObserver==="function"){return byObserver(MutationObserver)}if(typeof WebKitMutationObserver==="function"){return byObserver(WebKitMutationObserver)}}if(typeof setImmediate==="function"){return function(cb){setImmediate(callable(cb))}}if(typeof setTimeout==="function"){return function(cb){setTimeout(callable(cb),0)}}return null}()}).call(this)}).call(this,require("_process"),require("timers").setImmediate)},{_process:170,timers:188}],94:[function(require,module,exports){module.exports={version:"3.13.6"}},{}],95:[function(require,module,exports){"use strict";var bind=require("component-bind");var debug=require("debug");var defaults=require("@ndhoule/defaults");var extend=require("extend");var slug=require("slug-component");var protos=require("./protos");var statics=require("./statics");function createIntegration(name){function Integration(options){if(options&&options.addIntegration){return options.addIntegration(Integration)}this.debug=debug("analytics:integration:"+slug(name));var clonedOpts={};extend(true,clonedOpts,options);this.options=defaults(clonedOpts||{},this.defaults);this._queue=[];this.once("ready",bind(this,this.flush));Integration.emit("construct",this);this.ready=bind(this,this.ready);this._wrapInitialize();this._wrapPage();this._wrapTrack()}Integration.prototype.defaults={};Integration.prototype.globals=[];Integration.prototype.templates={};Integration.prototype.name=name;extend(Integration,statics);extend(Integration.prototype,protos);return Integration}module.exports=createIntegration},{"./protos":96,"./statics":97,"@ndhoule/defaults":65,"component-bind":121,debug:98,extend:142,"slug-component":186}],96:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var each=require("@ndhoule/each");var events=require("analytics-events");var every=require("@ndhoule/every");var fmt=require("@segment/fmt");var foldl=require("@ndhoule/foldl");var is=require("is");var loadIframe=require("load-iframe");var loadScript=require("@segment/load-script");var nextTick=require("next-tick");var normalize=require("to-no-case");var has=Object.prototype.hasOwnProperty;var noop=function noop(){};var onerror=window.onerror;var onload=null;Emitter(exports);exports.initialize=function(){var ready=this.ready;nextTick(ready)};exports.loaded=function(){return false};exports.page=function(page){};exports.track=function(track){};exports.map=function(options,key){var normalizedComparator=normalize(key);var mappingType=getMappingType(options);if(mappingType==="unknown"){return[]}return foldl(function(matchingValues,val,key){var compare;var result;if(mappingType==="map"){compare=key;result=val}if(mappingType==="array"){compare=val;result=val}if(mappingType==="mixed"){compare=val.key;result=val.value}if(normalize(compare)===normalizedComparator){matchingValues.push(result)}return matchingValues},[],options)};exports.invoke=function(method){if(!this[method])return;var args=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(method,args);this.debug("%s with %o",method,args);return this[method].apply(this,args)};exports.queue=function(method,args){this._queue.push({method:method,args:args})};exports.flush=function(){this._ready=true;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue);this._queue.length=0};exports.reset=function(){for(var i=0;i<this.globals.length;i++){window[this.globals[i]]=undefined}window.onerror=onerror;window.onload=onload};exports.load=function(name,locals,callback){if(typeof name==="function"){callback=name;locals=null;name=null}if(name&&typeof name==="object"){callback=locals;locals=name;name=null}if(typeof locals==="function"){callback=locals;locals=null}name=name||"library";locals=locals||{};locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var self=this;var el;switch(template.type){case"img":attrs.width=1;attrs.height=1;el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)});delete attrs.src;each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback);break;default:}return el};exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);if(!locals.hasOwnProperty("cache"))locals.cache=cache;each(function(val,key){if(!locals.hasOwnProperty(key))locals[key]=val},this.options);return locals};exports.ready=function(){this.emit("ready")};exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize");this._initialized=true;var ret=initialize.apply(this,arguments);this.emit("initialize");return ret}};exports._wrapPage=function(){var page=this.page;var initialPageSkipped=false;this.page=function(){if(this._assumesPageview&&!initialPageSkipped){initialPageSkipped=true;return}return page.apply(this,arguments)}};exports._wrapTrack=function(){var t=this.track;this.track=function(track){var event=track.event();var called;var ret;for(var method in events){if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments);called=true;break}}if(!called)ret=t.apply(this,arguments);return ret}};function getMappingType(mapping){if(is.array(mapping)){return every(isMixed,mapping)?"mixed":"array"}if(is.object(mapping))return"map";return"unknown"}function isMixed(item){if(!is.object(item))return false;if(!is.string(item.key))return false;if(!has.call(item,"value"))return false;return true}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;img.onerror=error(fn,"failed to load pixel",img);img.onload=function(){fn()};img.src=attrs.src;img.width=1;img.height=1;return img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e;err.source=img;fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]});return attrs},{},template.attrs)}},{"@ndhoule/each":67,"@ndhoule/every":68,"@ndhoule/foldl":70,"@segment/fmt":107,"@segment/load-script":111,"analytics-events":118,"component-emitter":129,is:149,"load-iframe":157,"next-tick":100,"to-no-case":191}],97:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var domify=require("domify");var each=require("@ndhoule/each");var includes=require("@ndhoule/includes");Emitter(exports);exports.option=function(key,value){this.prototype.defaults[key]=value;return this};exports.mapping=function(name){this.option(name,[]);this.prototype[name]=function(key){return this.map(this.options[name],key)};return this};exports.global=function(key){this.prototype.globals.push(key);return this};exports.assumesPageview=function(){this.prototype._assumesPageview=true;return this};exports.readyOnLoad=function(){this.prototype._readyOnLoad=true;return this};exports.readyOnInitialize=function(){this.prototype._readyOnInitialize=true;return this};exports.tag=function(name,tag){if(tag==null){tag=name;name="library"}this.prototype.templates[name]=objectify(tag);return this};function objectify(str){str=str.replace(' src="',' data-src="');var el=domify(str);var attrs={};each(function(attr){var name=attr.name==="data-src"?"src":attr.name;if(!includes(attr.name+"=",str))return;attrs[name]=attr.value},el.attributes);return{type:el.tagName.toLowerCase(),attrs:attrs}}},{"@ndhoule/each":67,"@ndhoule/includes":71,"component-emitter":129,domify:141}],98:[function(require,module,exports){(function(process){(function(){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)
}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this)}).call(this,require("_process"))},{"./debug":99,_process:170}],99:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:159}],100:[function(require,module,exports){arguments[4][93][0].apply(exports,arguments)},{_process:170,dup:93,timers:188}],101:[function(require,module,exports){var utf8Encode=require("utf8-encode");var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";module.exports=encode;function encode(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=utf8Encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output}},{"utf8-encode":199}],102:[function(require,module,exports){"use strict";function canonical(){var tags=document.getElementsByTagName("link");for(var i=0,tag;tag=tags[i];i++){if(tag.getAttribute("rel")==="canonical"){return tag.getAttribute("href")}}}module.exports=canonical},{}],103:[function(require,module,exports){"use strict";var clone=require("@ndhoule/clone");var each=require("@ndhoule/each");var type=require("component-type");function convertDates(obj,convert){obj=clone(obj);each(function(val,key){if(type(val)==="date"){obj[key]=convert(val)}if(type(val)==="object"||type(val)==="array"){obj[key]=convertDates(val,convert)}},obj);return obj}module.exports=convertDates},{"@ndhoule/clone":64,"@ndhoule/each":67,"component-type":135}],104:[function(require,module,exports){"use strict";var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(value==null)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.sameSite)str+="; SameSite="+options.sameSite;if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(pairs[0]=="")return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:105}],105:[function(require,module,exports){arguments[4][98][0].apply(exports,arguments)},{"./debug":106,_process:170,dup:98}],106:[function(require,module,exports){arguments[4][99][0].apply(exports,arguments)},{dup:99,ms:159}],107:[function(require,module,exports){(function(global){(function(){"use strict";var toString=global.JSON&&typeof JSON.stringify==="function"?JSON.stringify:String;function fmt(str){var args=Array.prototype.slice.call(arguments,1);var j=0;return str.replace(/%([a-z])/gi,function(match,f){return fmt[f]?fmt[f](args[j++]):match+f})}fmt.o=toString;fmt.s=String;fmt.d=parseInt;module.exports=fmt}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],108:[function(require,module,exports){"use strict";function isMeta(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey){return true}var which=e.which;var button=e.button;if(!which&&button!==undefined){return!button&1&&!button&2&&button&4}else if(which===2){return true}return false}module.exports=isMeta},{}],109:[function(require,module,exports){"use strict";var type=require("component-type");var each=require("component-each");var isodate=require("@segment/isodate");module.exports=traverse;function traverse(input,strict){if(strict===undefined)strict=true;if(type(input)==="object")return object(input,strict);if(type(input)==="array")return array(input,strict);return input}function object(obj,strict){if(obj.length&&typeof obj.length==="number"&&!(obj.length-1 in obj)){obj.lengthNonArray=obj.length;delete obj.length}each(obj,function(key,val){if(isodate.is(val,strict)){obj[key]=isodate.parse(val)}else if(type(val)==="object"||type(val)==="array"){traverse(val,strict)}});if(obj.lengthNonArray){obj.length=obj.lengthNonArray;delete obj.lengthNonArray}return obj}function array(arr,strict){each(arr,function(val,x){if(type(val)==="object"){traverse(val,strict)}else if(isodate.is(val,strict)){arr[x]=isodate.parse(val)}});return arr}},{"@segment/isodate":110,"component-each":127,"component-type":135}],110:[function(require,module,exports){"use strict";var matcher=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12];var arr=matcher.exec(iso);var offset=0;if(!arr){return new Date(iso)}for(var i=0,val;val=numericKeys[i];i++){arr[val]=parseInt(arr[val],10)||0}arr[2]=parseInt(arr[2],10)||1;arr[3]=parseInt(arr[3],10)||1;arr[2]--;arr[8]=arr[8]?(arr[8]+"00").substring(0,3):0;if(arr[4]===" "){offset=(new Date).getTimezoneOffset()}else if(arr[9]!=="Z"&&arr[10]){offset=arr[11]*60+arr[12];if(arr[10]==="+"){offset=0-offset}}var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)};exports.is=function(string,strict){if(typeof string!=="string"){return false}if(strict&&/^\d{4}-\d{2}-\d{2}/.test(string)===false){return false}return matcher.test(string)}},{}],111:[function(require,module,exports){"use strict";var onload=require("script-onload");var tick=require("next-tick");var type=require("component-type");function loadScript(options,cb){if(!options){throw new Error("Can't load nothing...")}if(type(options)==="string"){options={src:options}}var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=(https?"https:":"http:")+options.src}if(https&&options.https){options.src=options.https}else if(!https&&options.http){options.src=options.http}var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=options.src;if(type(cb)==="function"){onload(script,cb)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}module.exports=loadScript},{"component-type":135,"next-tick":112,"script-onload":172}],112:[function(require,module,exports){arguments[4][93][0].apply(exports,arguments)},{_process:170,dup:93,timers:188}],113:[function(require,module,exports){"use strict";function preventDefault(e){e=e||window.event;return e.preventDefault?e.preventDefault():e.returnValue=false}module.exports=preventDefault},{}],114:[function(require,module,exports){"use strict";var JSON=require("json3");var base64encode=require("@segment/base64-encode");var cors=require("has-cors");var jsonp=require("jsonp");exports=module.exports=cors?json:base64;exports.callback="callback";exports.prefix="data";exports.json=json;exports.base64=base64;exports.type=cors?"xhr":"jsonp";function json(url,obj,headers,fn){if(arguments.length===3)fn=headers,headers={};var req=new XMLHttpRequest;req.onerror=fn;req.onreadystatechange=done;req.open("POST",url,true);for(var k in headers){req.setRequestHeader(k,headers[k])}req.send(JSON.stringify(obj));function done(){if(req.readyState===4){return fn(null,req)}}}function base64(url,obj,_,fn){if(arguments.length===3)fn=_;var prefix=exports.prefix;var data=encode(obj);url+="?"+prefix+"="+data;jsonp(url,{param:exports.callback},function(err,obj){if(err)return fn(err);fn(null,{url:url,body:obj})})}function encode(obj){var str="";str=JSON.stringify(obj);str=base64encode(str);str=str.replace(/\+/g,"-").replace(/\//g,"_");return encodeURIComponent(str)}},{"@segment/base64-encode":101,"has-cors":146,json3:153,jsonp:154}],115:[function(require,module,exports){(function(global){(function(){"use strict";var JSON=require("json3");module.exports=function(){var store={},win=typeof window!="undefined"?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.20";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--){storage.removeAttribute(attributes[i].name)}storage.save(localStorageName)});store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;return store}()}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{json3:153}],116:[function(require,module,exports){"use strict";function pad(number){var n=number.toString();return n.length===1?"0"+n:n}function toISOString(date){return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())+"T"+pad(date.getUTCHours())+":"+pad(date.getUTCMinutes())+":"+pad(date.getUTCSeconds())+"."+String((date.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}module.exports=toISOString},{}],117:[function(require,module,exports){"use strict";var parse=require("component-url").parse;var cookie=require("component-cookie");function domain(url){var cookie=exports.cookie;var levels=exports.levels(url);for(var i=0;i<levels.length;++i){var cname="__tld__";var domain=levels[i];var opts={domain:"."+domain};cookie(cname,1,opts);if(cookie(cname)){cookie(cname,null,opts);return domain}}return""}domain.levels=function(url){var host=parse(url).hostname;var parts=host.split(".");var last=parts[parts.length-1];var levels=[];if(parts.length===4&&last===parseInt(last,10)){return levels}if(parts.length<=1){return levels}for(var i=parts.length-2;i>=0;--i){levels.push(parts.slice(i).join("."))}return levels};domain.cookie=cookie;exports=module.exports=domain},{"component-cookie":123,"component-url":136}],118:[function(require,module,exports){"use strict";var map=require("@ndhoule/map");var foldl=require("@ndhoule/foldl");var eventMap={videoPlaybackStarted:[{object:"video playback",action:"started"}],videoPlaybackPaused:[{object:"video playback",action:"paused"}],videoPlaybackInterrupted:[{object:"video playback",action:"interrupted"}],videoPlaybackResumed:[{object:"video playback",action:"resumed"}],videoPlaybackCompleted:[{object:"video playback",action:"completed"}],videoPlaybackBufferStarted:[{object:"video playback buffer",action:"started"}],videoPlaybackBufferCompleted:[{object:"video playback buffer",action:"completed"}],videoPlaybackSeekStarted:[{object:"video playback seek",action:"started"}],videoPlaybackSeekCompleted:[{object:"video playback seek",action:"completed"}],videoContentStarted:[{object:"video content",action:"started"}],videoContentPlaying:[{object:"video content",action:"playing"}],videoContentCompleted:[{object:"video content",action:"completed"}],videoAdStarted:[{object:"video ad",action:"started"}],videoAdPlaying:[{object:"video ad",action:"playing"}],videoAdCompleted:[{object:"video ad",action:"completed"}],promotionViewed:[{object:"promotion",action:"viewed"}],promotionClicked:[{object:"promotion",action:"clicked"}],productsSearched:[{object:"products",action:"searched"}],productListViewed:[{object:"product list",action:"viewed"},{object:"product category",action:"viewed"}],productListFiltered:[{object:"product list",action:"filtered"}],productClicked:[{object:"product",action:"clicked"}],productViewed:[{object:"product",action:"viewed"}],productAdded:[{object:"product",action:"added"}],productRemoved:[{object:"product",action:"removed"}],cartViewed:[{object:"cart",action:"viewed"}],orderUpdated:[{object:"order",action:"updated"}],orderCompleted:[{object:"order",action:"completed"}],orderRefunded:[{object:"order",action:"refunded"}],orderCancelled:[{object:"order",action:"cancelled"}],paymentInfoEntered:[{object:"payment info",action:"entered"}],checkoutStarted:[{object:"checkout",action:"started"}],checkoutStepViewed:[{object:"checkout step",action:"viewed"}],checkoutStepCompleted:[{object:"checkout step",action:"completed"}],couponEntered:[{object:"coupon",action:"entered"}],couponApplied:[{object:"coupon",action:"applied"}],couponDenied:[{object:"coupon",action:"denied"}],couponRemoved:[{object:"coupon",action:"removed"}],productAddedToWishlist:[{object:"product",action:"added to wishlist"}],productRemovedFromWishlist:[{object:"product",action:"removed from wishlist"}],productAddedFromWishlistToCart:[{object:"product",action:"added to cart from wishlist"},{object:"product",action:"added from wishlist to cart"}],productShared:[{object:"product",action:"shared"}],cartShared:[{object:"cart",action:"shared"}],productReviewed:[{object:"product",action:"reviewed"}],applicationInstalled:[{object:"application",action:"installed"}],applicationUpdated:[{object:"application",action:"updated"}],applicationOpened:[{object:"application",action:"opened"}],applicationBackgrounded:[{object:"application",action:"backgrounded"}],applicationUninstalled:[{object:"application",action:"uninstalled"}],applicationCrashed:[{object:"application",action:"crashed"}],installAttributed:[{object:"install",action:"attributed"}],deepLinkOpened:[{object:"deep link",action:"opened"}],pushNotificationReceived:[{object:"push notification",action:"received"}],pushNotificationTapped:[{object:"push notification",action:"tapped"}],pushNotificationBounced:[{object:"push notification",action:"bounced"}],emailBounced:[{object:"email",action:"bounced"}],emailDelivered:[{object:"email",action:"delivered"}],emailLinkClicked:[{object:"email link",action:"clicked"}],emailMarkedAsSpam:[{object:"email",action:"marked as spam"}],emailOpened:[{object:"email",action:"opened"}],unsubscribed:[{object:"",action:"unsubscribed"}]};module.exports=foldl(function transform(ret,pairs,method){var values=map(function(pair){return map(function(permutation){var flattened=[].concat.apply([],map(function(words){return words.split(" ")},permutation));return"^[ _]?"+flattened.join("[ _]?")+"[ _]?"},[[pair.action,pair.object],[pair.object,pair.action]]).join("|")},pairs);var conjoined=values.join("|")+"$";ret[method]=new RegExp(conjoined,"i");return ret},{},eventMap)},{"@ndhoule/foldl":70,"@ndhoule/map":73}],119:[function(require,module,exports){"use strict";var bind=require("component-bind");function bindAll(obj){for(var key in obj){var val=obj[key];if(typeof val==="function"){obj[key]=bind(obj,obj[key])}}return obj}module.exports=bindAll},{"component-bind":121}],120:[function(require,module,exports){"use strict";function preserveCamelCase(str){var isLastCharLower=false;for(var i=0;i<str.length;i++){var c=str.charAt(i);if(isLastCharLower&&/[a-zA-Z]/.test(c)&&c.toUpperCase()===c){str=str.substr(0,i)+"-"+str.substr(i);isLastCharLower=false;i++}else{isLastCharLower=c.toLowerCase()===c}}return str}module.exports=function(){var str=[].map.call(arguments,function(str){return str.trim()}).filter(function(str){return str.length}).join("-");if(!str.length){return""}if(str.length===1){return str.toLowerCase()}if(!/[_.\- ]+/.test(str)){if(str===str.toUpperCase()){return str.toLowerCase()}if(str[0]!==str[0].toLowerCase()){return str[0].toLowerCase()+str.slice(1)}return str}str=preserveCamelCase(str);return str.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(m,p1){return p1.toUpperCase()})}},{}],121:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],122:[function(require,module,exports){var type;try{type=require("component-type")}catch(_){type=require("type")}module.exports=clone;function clone(obj){switch(type(obj)){case"object":var copy={};for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){copy[key]=clone(obj[key])}}return copy;case"array":var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy;case"regexp":var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags);case"date":return new Date(obj.getTime());default:return obj}}},{"component-type":135,type:135}],123:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:124}],124:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":125}],125:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:126}],126:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],127:[function(require,module,exports){try{var type=require("type")}catch(err){var type=require("component-type")}var toFunction=require("to-function");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){fn=toFunction(fn);ctx=ctx||this;switch(type(obj)){case"array":return array(obj,fn,ctx);case"object":if("number"==typeof obj.length)return array(obj,fn,ctx);return object(obj,fn,ctx);case"string":return string(obj,fn,ctx)}};function string(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj.charAt(i),i)}}function object(obj,fn,ctx){for(var key in obj){if(has.call(obj,key)){fn.call(ctx,key,obj[key])}}}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj[i],i)}}},{"component-type":128,"to-function":190,type:128}],128:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],129:[function(require,module,exports){if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}if(callbacks.length===0){delete this._callbacks["$"+event]}return this}
;Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=new Array(arguments.length-1),callbacks=this._callbacks["$"+event];for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],130:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix=bind!=="addEventListener"?"on":"";exports.bind=function(el,type,fn,capture){el[bind](prefix+type,fn,capture||false);return fn};exports.unbind=function(el,type,fn,capture){el[unbind](prefix+type,fn,capture||false);return fn}},{}],131:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],132:[function(require,module,exports){var globals=/\b(Array|Date|Object|Math|JSON)\b/g;module.exports=function(str,fn){var p=unique(props(str));if(fn&&"string"==typeof fn)fn=prefixed(fn);if(fn)return map(str,p,fn);return p};function props(str){return str.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(globals,"").match(/[a-zA-Z_]\w*/g)||[]}function map(str,props,fn){var re=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return str.replace(re,function(_){if("("==_[_.length-1])return fn(_);if(!~props.indexOf(_))return _;return fn(_)})}function unique(arr){var ret=[];for(var i=0;i<arr.length;i++){if(~ret.indexOf(arr[i]))continue;ret.push(arr[i])}return ret}function prefixed(str){return function(_){return str+_}}},{}],133:[function(require,module,exports){var trim=require("trim");var type=require("type");var pattern=/(\w+)\[(\d+)\]/;var encode=function(str){try{return encodeURIComponent(str)}catch(e){return str}};var decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=pattern.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:195,type:134}],134:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],135:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";if(isBuffer(val))return"buffer";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val};function isBuffer(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],136:[function(require,module,exports){exports.parse=function(url){var a=document.createElement("a");a.href=url;return{href:a.href,host:a.host||location.host,port:"0"===a.port||""===a.port?port(a.protocol):a.port,hash:a.hash,hostname:a.hostname||location.hostname,pathname:a.pathname.charAt(0)!="/"?"/"+a.pathname:a.pathname,protocol:!a.protocol||":"==a.protocol?location.protocol:a.protocol,search:a.search,query:a.search.slice(1)}};exports.isAbsolute=function(url){return 0==url.indexOf("//")||!!~url.indexOf("://")};exports.isRelative=function(url){return!exports.isAbsolute(url)};exports.isCrossDomain=function(url){url=exports.parse(url);var location=exports.parse(window.location.href);return url.hostname!==location.hostname||url.port!==location.port||url.protocol!==location.protocol};function port(protocol){switch(protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}},{}],137:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(global){var _arguments=arguments;var dateFormat=function(){var token=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g;var timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g;var timezoneClip=/[^-+\dA-Z]/g;return function(date,mask,utc,gmt){if(_arguments.length===1&&kindOf(date)==="string"&&!/\d/.test(date)){mask=date;date=undefined}date=date||date===0?date:new Date;if(!(date instanceof Date)){date=new Date(date)}if(isNaN(date)){throw TypeError("Invalid date")}mask=String(dateFormat.masks[mask]||mask||dateFormat.masks["default"]);var maskSlice=mask.slice(0,4);if(maskSlice==="UTC:"||maskSlice==="GMT:"){mask=mask.slice(4);utc=true;if(maskSlice==="GMT:"){gmt=true}}var _=function _(){return utc?"getUTC":"get"};var _d=function d(){return date[_()+"Date"]()};var D=function D(){return date[_()+"Day"]()};var _m=function m(){return date[_()+"Month"]()};var y=function y(){return date[_()+"FullYear"]()};var _H=function H(){return date[_()+"Hours"]()};var _M=function M(){return date[_()+"Minutes"]()};var _s=function s(){return date[_()+"Seconds"]()};var _L=function L(){return date[_()+"Milliseconds"]()};var _o=function o(){return utc?0:date.getTimezoneOffset()};var _W=function W(){return getWeek(date)};var _N=function N(){return getDayOfWeek(date)};var flags={d:function d(){return _d()},dd:function dd(){return pad(_d())},ddd:function ddd(){return dateFormat.i18n.dayNames[D()]},DDD:function DDD(){return getDayName({y:y(),m:_m(),d:_d(),_:_(),dayName:dateFormat.i18n.dayNames[D()],short:true})},dddd:function dddd(){return dateFormat.i18n.dayNames[D()+7]},DDDD:function DDDD(){return getDayName({y:y(),m:_m(),d:_d(),_:_(),dayName:dateFormat.i18n.dayNames[D()+7]})},m:function m(){return _m()+1},mm:function mm(){return pad(_m()+1)},mmm:function mmm(){return dateFormat.i18n.monthNames[_m()]},mmmm:function mmmm(){return dateFormat.i18n.monthNames[_m()+12]},yy:function yy(){return String(y()).slice(2)},yyyy:function yyyy(){return pad(y(),4)},h:function h(){return _H()%12||12},hh:function hh(){return pad(_H()%12||12)},H:function H(){return _H()},HH:function HH(){return pad(_H())},M:function M(){return _M()},MM:function MM(){return pad(_M())},s:function s(){return _s()},ss:function ss(){return pad(_s())},l:function(){}