(window["tmg.build"]=window["tmg.build"]||[]).push([[25,8,9,10,13,16,17,20,26,27,28],[,,function(t,e,s){"use strict";function i(){for(var t=0,e={};t<arguments.length;t++){var s=arguments[t];for(var i in s)e[i]=s[i]}return e}e.a=function t(e){function s(t,n,r){var o;if(arguments.length>1){if("number"==typeof(r=i({path:"/"},s.defaults,r)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch(t){}return n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",n,r.expires&&"; expires="+r.expires.toUTCString(),r.path&&"; path="+r.path,r.domain&&"; domain="+r.domain,r.secure?"; secure":""].join("")}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<c.length;u++){var d=c[u].split("="),h=d[0].replace(l,decodeURIComponent),g=d.slice(1).join("=");'"'===g.charAt(0)&&(g=g.slice(1,-1));try{if(g=e&&e(g,h)||g.replace(l,decodeURIComponent),this.json)try{g=JSON.parse(g)}catch(t){}if(t===h){o=g;break}t||(o[h]=g)}catch(t){}}return o}return s.get=s.set=s,s.getJSON=function(){return s.apply({json:!0},[].slice.call(arguments))},s.defaults={},s.remove=function(t,e){s(t,"",i(e,{expires:-1}))},s.withConverter=t,s}()},function(t,e,s){"use strict";s.r(e);var i=s(0),n=s(1);class r{constructor(){i.default.create("tmg.page"),tmg.page={getMetaTag:this.getMetaTag,getMetaContent:this.getMetaContent,getPageType:this.getPageType,getPageTitle:this.getPageTitle,getChannel:this.getChannel,getBusinessSegment:this.getBusinessSegment,getCategory:this.getCategory,getContentType:this.getContentType,getArticleId:this.getArticleId,getPublishDate:this.getPublishDate,getKeywords:this.getKeywords,getLocation:this.getLocation,getLeadAssetLayout:this.getLeadAssetLayout,isArticle:this.isArticle,isSponsored:this.isSponsored,isGallery:this.isGallery,isGallery2:this.isGallery2,isPremium:this.isPremium,isApp:this.isApp.bind(this)}}getPageType(){return window.dataLayer&&window.dataLayer.pageType}getPageTitle(){return document.title}getChannel(){return this.getMetaContent("tmgads.channel")}getCategory(){return this.getMetaContent("DCSext.Category")}getBusinessSegment(){return this.getMetaContent("tmgads.businessSegment")}getContentType(){return this.getMetaContent("DCSext.Content_Type")}getArticleId(){return this.getMetaContent("tmgads.articleid")}getPublishDate(){return this.getMetaContent("DCSext.articleFirstPublished")}getKeywords(){return this.getMetaContent("keywords").split(",").map(t=>t.trim())}getLocation(){return document.location}getMetaContent(t,e="content"){const s=this.getMetaTag(t);let i="generic";return s&&s.getAttribute(e)&&(i=s.getAttribute(e)),i}getMetaTag(t){return document.querySelector(`meta[name='${t}']`)}isArticle(){let t=!1;return["articleRenderer","articleRenderer2","longFormRenderer"].forEach(e=>{this.getPageType()===e&&(t=!0)}),t}isGallery(){return"galleryRenderer"===this.getPageType()}isGallery2(){return"galleryRenderer2"===this.getPageType()}isSponsored(){return"sponsored"===this.getBusinessSegment()}isPremium(){return"true"===this.getMetaContent("tmg.premium.state")}isApp(){return"true"===this.getMetaContent("tmg.app")}isAuthor(){return document.documentElement.hasAttribute("data-is-author")}getLeadAssetLayout(){return this.isArticle()&&document.querySelector("[data-lead-asset-layout]")?document.querySelector("[data-lead-asset-layout]").dataset.leadAssetLayout:this.isArticle()?"hidden":void 0}}n.a.subscribe({topic:"tmg.page.ready",func:new r,runIfAlreadyPublished:!0}),e.default=new r},function(t,e,s){"use strict";var i=s(7),n=s.n(i);s(0).default.create("tmg.store"),tmg.store=n.a,e.a=n.a},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s(6),r=s(0),o=s(4),a=s(3),c=s(1);const l={pId:"",firstName:"",lastName:"",username:"",email:"",readerType:"",subscriber:"",subButton:"",subscriptionType:""},u={viafouraRefresh:"VfRefresh",pianoRefToken:"user_ref_token",pianoIDToken:"__utp",meterCount:"tmg_meter_count",personalisation:"tmg_p13n",publicId:"tmg_pid",registrationSuccess:"tmg_registration_success",rememberMe:"tmg_rem",session:"tmg_session",refreshToken:"tmg_refresh",subscriptionConfirmation:"tmg_subscription_confirmation"},d="ACCESS_TOKEN",h="pid",g="validAppUser",p=document.querySelector("html");let m={};const f=(t,e)=>{if(e||(()=>{let t=document.querySelectorAll('[class*="logged-in--"], [class*="is-subscriber--"], [class*="app-tmg-subscriber--"]');t=Array.prototype.slice.call(t),t.forEach(t=>{f(t,!0)})})(),!t)return;return t.className=t.className.replace(new RegExp("\\b(?:logged-in--|is-subscriber--|app-tmg-subscriber--).+\\b","g"),""),t.classList&&(t.classList.add("logged-in--"+y()),t.classList.add("is-subscriber--"+v()),t.classList.add("app-tmg-subscriber--"+w())),t.classList},b=()=>{let t=i.a.get(u.personalisation);return n.default.tryParse(t,l)},y=()=>!!i.a.get(u.session),v=()=>"true"===m.subscriber,w=()=>{try{const t=!!localStorage.getItem(d),e=localStorage.getItem(g)||"{}",s="TMG"===JSON.parse(e).subscriptionType;return t&&s}catch(t){return!1}},S=()=>(window.sessionStorage.removeItem("id_token"),window.sessionStorage.removeItem("access_token"),window.localStorage.removeItem(g),window.localStorage.removeItem(d),void 0!==window.vf&&window.vf.session.logout(),i.a.remove(u.viafouraRefresh),i.a.remove(u.session),k(),!0),k=()=>(m=b(),f(p),m),E={applyStatusCssClasses:f,clearAllData:()=>{S();for(let t in u)i.a.remove(u[t]);o.a.remove("fyre-auth"),o.a.remove("fyre-authentication-creds"),k()},getPianoRefToken:()=>i.a.get(u.pianoRefToken)||!1,getPianoIDToken:()=>i.a.get(u.pianoIDToken)||!1,getMeterCount:()=>!1,getMyTelegraphToken:()=>{const t=o.a.storage.read("tmg.user.mytelegraph.token");return"undefined"!==t&&null!==t&&t},getProfile:b,getSubscriberId:()=>JSON.parse(localStorage.getItem(h))||"",getAccessToken:()=>localStorage.getItem(d)||"",getPublicId:()=>i.a.get(u.publicId)||"",getSessionId:()=>i.a.get(u.session)||"",getRefreshToken:()=>i.a.get(u.refreshToken)||"",isLoggedIn:y,isLoggedInApp:()=>!!localStorage.getItem(g),isRegistered:()=>!!m.pId,isSubscriber:v,isAdLite:()=>"true"===a.default.getMetaContent("tmg.isAdLite"),isGoogleShowcase:()=>"true"===a.default.getMetaContent("tmg.isGoogleShowcase"),canComment:()=>y()&&v(),canCommentInApp:()=>w(),isAppTmgSubscriber:w,isMyTelegraphOnboarded:()=>!!o.a.storage.read("tmg.user.mytelegraph.onboarded.status"),login:()=>(k(),!1),logout:S,setMyTelegraphToken:({token:t})=>o.a.storage.write("tmg.user.mytelegraph.token",t),setMyTelegraphOnboarded:({status:t})=>o.a.storage.write("tmg.user.mytelegraph.onboarded.status",t),updateState:k};r.default.create("tmg.user"),window.tmg.user=E,m=k(),c.a.publish({topic:"tmg.user.ready"}),e.default=E},function(t,e,s){"use strict";s.r(e);var i=s(0);let n={};const r=t=>{let e={};return"string"==typeof t&&(e=o(t.replace(/'/g,'"'))),e},o=(t,e)=>{let s=e||{},i=t,n=!1,r="",o=[],d=[],h=[];const g=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,p=/^\s*{?\s*'|'\s*}?\s*$/i;if(!t)return s;if("[object Object]"===Object.prototype.toString.call(t))return t;if(n=c(i),n||(h=i.match(g)||[],h.forEach(t=>{if(t.includes('"label"')){const e=t.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1"),s=e.replace(/"/gi,'\\"'),n=t.replace(e,s);i=i.replace(t,n)}}),r=i.replace(g,""),o=r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/)),o.forEach(t=>{const e=t.replace(/^\s*{|}\s*$/gi,"");c(a(e))||d.push(e)}),d.forEach(t=>{let e=!1,s=t;!0===p.test(t)&&(s=u(t),e=c(a(s))),e||!0!==/[^"']\w+[^"']:/.test(s)||(s=l(s),e=c(a(s))),e&&(i=i.replace(t,s))}),n=c(i),n)s=c(i);else try{JSON.parse(i)}catch(t){console.log("tmg.json.tryParse failed:",t)}return s},a=t=>`{${t}}`,c=t=>{let e=!1;try{e=JSON.parse(t)}catch(t){}return e},l=t=>{let e=t;return e=e.replace(/^\s*(.*?):/,'"$1":'),e},u=t=>{let e=t;return e=e.replace(/^\s*'([^']+|\\')':/,'"$1":'),e=e.replace(/:\s*('')\s*$/,': ""'),e=e.replace(/:\s*'([^']+|\\')'\s*$/,': "$1"'),e};n={parseFromAem:r,tryParse:o,simpleTryParse:c},i.default.create("tmg.json"),tmg.json=n,e.default=n,tmg.parseAemJson=r},function(t,e,s){(function(e){t.exports=function t(e,s,i){function n(o,a){if(!s[o]){if(!e[o]){if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=s[o]={exports:{}};e[o][0].call(l.exports,(function(t){var s=e[o][1][t];return n(s||t)}),l,l.exports,t,e,s,i)}return s[o].exports}for(var r=!1,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,s){"use strict";var i=t("../src/store-engine"),n=[t("../storages/localStorage"),t("../storages/sessionStorage"),t("../storages/cookieStorage"),t("../storages/memoryStorage")];e.exports=i.createStore(n,[])},{"../src/store-engine":2,"../storages/cookieStorage":4,"../storages/localStorage":5,"../storages/memoryStorage":6,"../storages/sessionStorage":7}],2:[function(t,e,s){"use strict";function i(t,e,s){s||(s=""),t&&!u(t)&&(t=[t]),e&&!u(e)&&(e=[e]);var i=s?"__storejs_"+s+"_":"",n=s?new RegExp("^"+i):null;if(!/^[a-zA-Z0-9_\-]*$/.test(s))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p=l({_namespacePrefix:i,_namespaceRegexp:n,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var s=t.read(e)===e;return t.remove(e),s}catch(t){return!1}},_assignPluginFnProp:function(t,e){var s=this[e];this[e]=function(){function e(){if(s)return a(arguments,(function(t,e){i[e]=t})),s.apply(n,i)}var i=r(arguments,0),n=this,o=[e].concat(i);return t.apply(n,o)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var s="";try{s=JSON.parse(t)}catch(e){s=t}return void 0!==s?s:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(u(t))a(t,(function(t){e._addPlugin(t)}));else if(!o(this.plugins,(function(e){return t===e}))){if(this.plugins.push(t),!d(t))throw new Error("Plugins must be function values that return objects");var s=t.call(this);if(!h(s))throw new Error("Plugins must return an object of function properties");a(s,(function(s,i){if(!d(s))throw new Error("Bad plugin property: "+i+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(s,i)}))}},addStorage:function(t){(function(){var t="undefined"==typeof console?null:console;if(t){var e=t.warn?t.warn:t.log;e.apply(t,arguments)}})("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},g,{plugins:[]});return p.raw={},a(p,(function(t,e){d(t)&&(p.raw[e]=c(p,t))})),a(t,(function(t){p._addStorage(t)})),a(e,(function(t){p._addPlugin(t)})),p}var n=t("./util"),r=n.slice,o=n.pluck,a=n.each,c=n.bind,l=n.create,u=n.isList,d=n.isFunction,h=n.isObject;e.exports={createStore:i};var g={version:"2.0.12",enabled:!1,get:function(t,e){var s=this.storage.read(this._namespacePrefix+t);return this._deserialize(s,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(s,i){t.call(e,e._deserialize(s),(i||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return i.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return i(this.storage,this.plugins,t)}}},{"./util":3}],3:[function(t,s,i){(function(t){"use strict";function e(t,e){return Array.prototype.slice.call(t,e||0)}function i(t,e){n(t,(function(t,s){return e(t,s),!1}))}function n(t,e){if(r(t)){for(var s=0;s<t.length;s++)if(e(t[s],s))return t[s]}else for(var i in t)if(t.hasOwnProperty(i)&&e(t[i],i))return t[i]}function r(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var o=Object.assign?Object.assign:function(t,e,s,n){for(var r=1;r<arguments.length;r++)i(Object(arguments[r]),(function(e,s){t[s]=e}));return t},a=function(){if(Object.create)return function(t,s,i,n){var r=e(arguments,1);return o.apply(this,[Object.create(t)].concat(r))};var t=function(){};return function(s,i,n,r){var a=e(arguments,1);return t.prototype=s,o.apply(this,[new t].concat(a))}}(),c=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},l="undefined"!=typeof window?window:t;s.exports={assign:o,create:a,trim:c,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:e,each:i,map:function(t,e){var s=r(t)?[]:{};return n(t,(function(t,i){return s[i]=e(t,i),!1})),s},pluck:n,isList:r,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:l}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,s){"use strict";function i(t){for(var e=l.cookie.split(/; ?/g),s=e.length-1;s>=0;s--)if(c(e[s])){var i=e[s].split("="),n=unescape(i[0]);t(unescape(i[1]),n)}}function n(t){t&&r(t)&&(l.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function r(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(l.cookie)}var o=t("../src/util"),a=o.Global,c=o.trim;e.exports={name:"cookieStorage",read:function(t){if(!t||!r(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(l.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){t&&(l.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:i,remove:n,clearAll:function(){i((function(t,e){n(e)}))}};var l=a.document},{"../src/util":3}],5:[function(t,e,s){"use strict";function i(){return r.localStorage}function n(t){return i().getItem(t)}var r=t("../src/util").Global;e.exports={name:"localStorage",read:n,write:function(t,e){return i().setItem(t,e)},each:function(t){for(var e=i().length-1;e>=0;e--){var s=i().key(e);t(n(s),s)}},remove:function(t){return i().removeItem(t)},clearAll:function(){return i().clear()}}},{"../src/util":3}],6:[function(t,e,s){"use strict";e.exports={name:"memoryStorage",read:function(t){return i[t]},write:function(t,e){i[t]=e},each:function(t){for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},remove:function(t){delete i[t]},clearAll:function(t){i={}}};var i={}},{}],7:[function(t,e,s){"use strict";function i(){return r.sessionStorage}function n(t){return i().getItem(t)}var r=t("../src/util").Global;e.exports={name:"sessionStorage",read:n,write:function(t,e){return i().setItem(t,e)},each:function(t){for(var e=i().length-1;e>=0;e--){var s=i().key(e);t(n(s),s)}},remove:function(t){return i().removeItem(t)},clearAll:function(){return i().clear()}}},{"../src/util":3}]},{},[1])(1)}).call(this,s(11))},function(t,e,s){"use strict";s.r(e);var i=s(0),n=s(1);class r{constructor(){i.default.create("tmg.utils"),tmg.utils={injectScript:this.injectScript,getRandomInt:this.getRandomInteger}}injectScript(t,e=!0){return new Promise((s,i)=>{if(t){const i=document.createElement("script");i.setAttribute("src",t),i.addEventListener("load",s,!1),e&&i.setAttribute("defer","true"),document.querySelector("head").appendChild(i)}else i(Error("No src supplied"))})}getRandomInteger(t,e){if(!t||!e)return;const s=Math.ceil(t),i=Math.floor(e);return Math.floor(Math.random()*(i-s)+s)}disableScrolling(){document.documentElement.style.overflow="hidden"}enableScrolling(){document.documentElement.style.overflow="auto"}}n.a.subscribe({topic:"tmg.page.ready",func:new r,runIfAlreadyPublished:!0}),e.default=r},function(t,e,s){"use strict";s.r(e);var i=s(0),n=s(3);const r=()=>{tmg.getQuerystringParam=c,tmg.setQuerystringParam=l,tmg.removeQuerystringParam=u,tmg.updateRedirectParam=d},o=new RegExp(/\?[^#]*|(?=#)|$/),a=(()=>{const t={};return e=>t[e]||(t[e]=new RegExp(`([?&;]${e}(?=[=&;#]|$))=?([^&;#]*)`))})(),c=(t,e)=>{const s=a(e).exec(t);return s&&decodeURIComponent(s[2])},l=(t,e,s)=>{let i,r,l;return void 0===t&&(t=n.default.getLocation().search),null===c(t,e)?(i=`${e}=${encodeURIComponent(s)}`,r=o.exec(t)[0],l=t.replace(o,(r.length?r+"&":"?")+i)):l=t.replace(a(e),"$1="+encodeURIComponent(s)),l},u=(t,e)=>{let s=e;if(null!==c(e,t)){let i,n=e.split("?")[0];let r=(-1!==e.indexOf("?")?e.split("?")[1]:"").split("&");for(let e=r.length-1;e>=0;e-=1)i=r[e].split("=")[0],i===t&&r.splice(e,1);return s=n+(r.length>0?"?":"")+r.join("&"),s}return s},d=(t,e)=>{const s="redirectTo";return null!==c(t,s)?l(t,s,e):t};i.default.create("tmg.GET_PARAM"),r(),location.search.substr(1).split("&").forEach(t=>{const e=t.split("=");e.length>1?tmg.GET_PARAM[e[0]]=decodeURIComponent(e[1]):tmg.GET_PARAM[e[0]]=""}),e.default={matchParam:a,matchQuerystring:o,getQuerystringParam:c,removeQuerystringParam:u,setQuerystringParam:l,updateRedirectParam:d}},function(t,e,s){"use strict";s.r(e);var i=s(1),n=s(0),r=s(3);class o{constructor(){this.params={local:"local",qa:"qa",ci:"ci",staging:"staging",prod:"prod"},this.currentEnv=this.determineEnvironment(),n.default.create("tmg.environment"),tmg.environment={currentEnv:this.currentEnv,getEnvironment:this.getEnvironment,getList:this.getList,getTld:this.getTld,isCommentingTurnedOn:this.isCommentingTurnedOn,isHttps:this.isHttps,isLocal:this.isLocal,isProd:this.isProd}}determineEnvironment(){const t=r.default.getLocation().hostname.split(".");return t.some(t=>"local"===t||"127"===t||"localhost"===t)?this.getList().local:t.some(t=>/(^|-)ci[0-9]+(-app)?$/i.test(t))?this.getList().ci:t.some(t=>/(^|-)qa[0-9]+(-app)?$/i.test(t))?this.getList().qa:t.some(t=>/(^|-)staging(.*)$/i.test(t))?this.getList().staging:this.getList().prod}getList(){return this.params}getEnvironment(){return this.currentEnv}getTld(){return"telegraph.co.uk"}isCommentingTurnedOn(){let t=!1;try{void 0!==tmg.COMMENTING_STATUS&&(t=!!tmg.COMMENTING_STATUS)}catch(t){console.log(t)}return t}isHttps(){return"https:"===r.default.getLocation().protocol||this.isLocal()}isLocal(){return this.getEnvironment()===this.getList().local}isProd(){return this.getEnvironment()===this.getList().prod}}i.a.subscribe({topic:"tmg.page.ready",func:new o,runIfAlreadyPublished:!0}),e.default=o},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},,function(t,e,s){"use strict";s.r(e);var i=s(0),n=s(1),r=s(2),o=s(5),a=s(3),c=s(9),l=s(6);class u{constructor(){i.default.create("tmg.dataLayerUtils"),window.dataLayer=window.dataLayer||{},this.cookieStatus=this.getCookies(),this.isPaymentRenderer=window.dataLayer.pageType&&"paymentRenderer"===window.dataLayer.pageType,this.listenerEvents=["click","input"],this.initListeners("[data-layer-event]"),tmg.dataLayerUtils={cookieStatus:this.cookieStatus,update:this.update,isPaymentRenderer:this.isPaymentRenderer,onRegistrationSuccess:this.onRegistrationSuccess,onRegistrationUpdate:this.onRegistrationUpdate,onSubscriptionConfirmation:this.onSubscriptionConfirmation,updateSubscription:this.updateSubscription,updateUserStatus:this.updateUserStatus,checkCookie:this.checkCookie,removeCookie:this.removeCookie,addPropertyValue:this.addPropertyValue},this.update()}update(){this.cookieStatus.registrationSuccess.value?(this.onRegistrationSuccess(),this.removeCookie(this.cookieStatus.registrationSuccess.name)):this.cookieStatus.registrationUpdate.value?(this.onRegistrationUpdate(),this.removeCookie(this.cookieStatus.registrationUpdate.name)):this.cookieStatus.subscriptionConfirmation.value?(this.onSubscriptionConfirmation(),this.removeCookie(this.cookieStatus.subscriptionConfirmation.name)):this.isPaymentRenderer&&this.updateSubscription(),this.updateUserStatus()}updateUserStatus(){o.default.isLoggedIn()?window.dataLayer.userStatus=o.default.isSubscriber()?"subscribed":"registered":window.dataLayer.userStatus="anonymous"}onRegistrationSuccess(){const t=this.checkCookie(this.cookieStatus.registrationSuccess,"success_facebook"),e=this.checkCookie(this.cookieStatus.registrationSuccess,"success_emailoffers-true");window.dataLayer.event=["registrationComplete"],window.dataLayer.registration={registrationType:t?"facebook":"email",emailOptIn:e?"true":"false"}}onRegistrationUpdate(){"1"!==this.cookieStatus.registrationUpdate.value?(window.dataLayer.event=["registrationUpdate","newsletterSignup"],window.dataLayer.newsletterType=this.cookieStatus.registrationUpdate.value):window.dataLayer.event=["registrationUpdate"],window.dataLayer.registration={registrationType:"email"}}onSubscriptionConfirmation(){window.dataLayer.event=["subscriptionConfirmation"],window.dataLayer.subscription=l.default.tryParse(JSON.stringify(this.cookieStatus.subscriptionConfirmation.value))}updateSubscription(){window.dataLayer.event=["subscriptionCheckout"],window.dataLayer.subscription={productID:c.default.getQuerystringParam(a.default.getLocation().search,"productId")}}checkCookie(t,e){return!(!t||!e)&&t.value===e}removeCookie(t=null){t&&r.a.remove(t,{domain:".telegraph.co.uk"})}initListeners(t){const e=document.querySelectorAll(t);e&&e.forEach(t=>this.bindListeners(t))}bindListeners(t){this.listenerEvents.forEach(e=>{t.addEventListener(e,t=>{this.addEvent(t.target.dataset.layerEvent)})})}addEvent(t){window.dataLayer.event!==t&&(window.dataLayer.event=t)}getCookies(){return{registrationSuccess:{name:"tmg_registration_success",value:r.a.get("tmg_registration_success")},registrationUpdate:{name:"tmg_registration_update",value:r.a.get("tmg_registration_update")},subscriptionConfirmation:{name:"tmg_subscription_confirmation",value:r.a.get("tmg_subscription_confirmation")}}}static addPropertyValue(t,e){t&&e&&(window.dataLayer[t]=e)}}n.a.subscribe({topic:"tmg.page.ready",func:()=>{new u},runIfAlreadyPublished:!0}),e.default=u},,,function(t,e,s){"use strict";e.a={throttle:(t,e)=>{var s,i;return e=e||200,function(){var n=this,r=+new Date,o=arguments;s&&r<s+e?(clearTimeout(i),i=setTimeout((function(){s=r,t.apply(n,o)}),e)):(s=r,t.apply(n,o))}}}},,,,,,function(t,e,s){"use strict";var i=s(0),n=s(9),r=s(1);class o{constructor(){this.redirectSelector="[data-redirect-current]"}init(){const t=document.querySelectorAll(this.redirectSelector);t.length&&this.setRedirects(t),i.default.create("tmg.redirect"),window.tmg.redirect={getAmendedHref:this.getAmendedHref}}setRedirects(t){t.forEach(t=>{const e=t.getAttribute("href");e&&t.setAttribute("href",this.getAmendedHref(e))})}getAmendedHref(t){return t.indexOf("redirectTo")>-1?n.default.updateRedirectParam(t,window.location.href):n.default.setQuerystringParam(t,"redirectTo",window.location.href)}}r.a.subscribe({topic:"tmg.page.ready",func:(new o).init(),runIfAlreadyPublished:!0}),e.a=new o},function(t,e,s){"use strict";var i=s(10),n=s(1),r=s(3),o=s(5),a=s(8),c=s(2);class l{constructor(){this.usePianoID="_utp"===window.tmg.pianoCookie,this.envsConf={dev:{pianoLibraryUrl:"https://sandbox.tinypass.com/xbuilder/experience/load?aid="+(this.usePianoID?"nXCLFFIWmQ":"AdcpxkpRsu"),identityAPI:`https://api-preprod.telegraph.co.uk/identity-api-${this.usePianoID?"uat":"qa"}/identity/tokens`},staging:{pianoLibraryUrl:"https://sandbox.tinypass.com/xbuilder/experience/load?aid=AdcpxkpRsu",identityAPI:"https://api-preprod.telegraph.co.uk/identity-api-qa/identity/tokens"},prod:{pianoLibraryUrl:"https://experience.tinypass.com/xbuilder/experience/load?aid=NJu5KnOFpu",identityAPI:"https://api.telegraph.co.uk/identity/tokens"}},this.isArticle=r.default.isArticle(),this.isGallery=r.default.isGallery()||r.default.isGallery2(),this.isPremium=r.default.isPremium(),this.pianoToken=this.usePianoID?o.default.getPianoIDToken():o.default.getPianoRefToken(),this.userLoggedIn=o.default.isLoggedIn(),this.userSubscriber=o.default.isSubscriber(),this.env=new i.default,this.currentEnv=this.env.getEnvironment(),this.isGoogleShowcase=o.default.isGoogleShowcase(),this.isGoogleShowcase||this.init()}init(){this.userLoggedIn?this.pianoToken?this.loadPianoConfig(this.pianoToken):this.getNewPianoToken():(this.usePianoID&&this.pianoToken&&c.a.remove("__utp"),this.loadPianoConfig())}getEndpoints(t){return"prod"===t||"staging"===t?this.envsConf[t]:this.envsConf.dev}userIsBot(){return-1!==navigator.userAgent.search(/([Ff]acebookexternalhit]|[Gg]oogle)/g)}loadPianoLibrary(){(new a.default).injectScript(this.getEndpoints(this.currentEnv).pianoLibraryUrl)}loadPianoConfig(t=""){const e=this.getPianoData();window.tp=window.tp||[],this.usePianoID?(window.tp.push(["setUseTinypassAccounts",!1]),window.tp.push(["setUsePianoIdUserProvider",!0])):window.tp.push(["setUserRef",t]),window.tp.push(["setTags",this.getModifiedKeywords()]),window.tp.push(["addHandler","meterActive",t=>{window.tmg&&(n.a.publish({topic:"tmg.piano.paywall.web_no_paywall"}),window.tmg.paywallMetering=t)}]),window.tp.push(["setContentCreated",new Date(r.default.getPublishDate().replace(/-/g,"/")).toISOString()]),window.tp.push(["addHandler","experienceExecute",t=>{var e,s,i,n,r,o;const a={event:"propensityScore"},c=null==t||null===(e=t.result)||void 0===e||null===(s=e.events)||void 0===s||null===(i=s.findLast(t=>"userSegmentTrue"===t.eventType))||void 0===i||null===(n=i.eventExecutionContext)||void 0===n||null===(r=n.userSegments)||void 0===r||null===(o=r.COMPOSER1X)||void 0===o?void 0:o.segments;if(c){const t=c.map(t=>t.replace("LTs","propensitySub").replace("LTreg","propensityReg").replace("LTreturn","propensityReturn").split(":").filter((t,e)=>1!==e));window.dataLayer.target=window.dataLayer.target||[],window.dataLayer.target.push(Object.assign(a,Object.fromEntries(t)))}}]),Object.keys(e).forEach(t=>{window.tp.push(["setCustomVariable",t,e[t]])}),this.loadPianoLibrary()}getModifiedKeywords(){return r.default.getKeywords().map(t=>t.toLowerCase().replace(/ /g,"-"))}dateConversion(t){return Math.abs(new Date(1e3*t)-new Date)/864e5}getPianoData(){return{platform:"web",isPremium:this.isPremium,isArticle:this.isArticle,isGallery:this.isGallery,articleId:r.default.getArticleId(),channel:r.default.getChannel(),sectionId:r.default.getCategory(),isUserBot:this.userIsBot(),isGoogleShowcase:this.isGoogleShowcase,isArticleOrGallery:this.isArticle||this.isGallery}}getNewPianoToken(){let t=o.default.getRefreshToken(),e={grant_type:"refresh_token",refresh_token:t,client_id:"tcuk"};if(!t||""===t)return"";fetch(this.getEndpoints(this.currentEnv).identityAPI,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",ddgFlow:"transformation_login",ddgAction:"refresh_token_article"}}).then(t=>{200===t.status||201===t.status?t.json().then(t=>this.setPianoToken(t)):this.loadPianoConfig()}).catch(()=>{this.loadPianoConfig()})}setPianoToken(t){this.usePianoID?this.loadPianoConfig():(c.a.set("user_ref_token",t.user_ref_token,{expires:this.dateConversion(t.user_ref_token_expires_in)}),this.loadPianoConfig(t.user_ref_token))}}n.a.subscribe({topic:"tmg.page.ready",func:()=>{new l},runIfAlreadyPublished:!0}),e.a=l},function(t,e,s){"use strict";s.r(e);var i=s(1),n=s(16);class r{constructor(t){this.params=Object.assign({scrollableBarSelector:"[data-drag-scroll]",activeClass:"is-dragging",defaultPositionSelector:""},t),this.options={scrollableBar:document.querySelector(this.params.scrollableBarSelector),isDragging:!1,startMousePosition:0,startScrollPosition:0,startScrollItem:null,endScrollItem:null}}init(){this.options.scrollableBar&&(""!==this.params.defaultPositionSelector&&this.scrollToCurrentItem(),this.isTouchDevice()||this.bindListeners())}bindListeners(){this.options.scrollableBar.addEventListener("mousedown",t=>{this.onMouseDown(t)}),window.addEventListener("mouseup",t=>{this.options.isDragging&&this.onMouseUp(t)}),window.addEventListener("mousemove",n.a.throttle(t=>{this.options.isDragging&&this.onDrag(t)},10)),this.handleDragLinkClick()}setStartPosition(t){this.options.startMousePosition=t.pageX-this.options.scrollableBar.offsetLeft,this.options.startScrollPosition=this.options.scrollableBar.scrollLeft}onMouseDown(t){this.options.isDragging=!0,t.preventDefault(),this.options.startScrollItem=t.target,this.options.endScrollItem=null,this.setStartPosition(t),this.toggleActiveClass(!0)}onMouseUp(t){this.options.isDragging=!1,this.toggleActiveClass(!1),this.options.endScrollItem=t.target}onDrag(t){let e=t.pageX-this.options.scrollableBar.offsetLeft-this.options.startMousePosition;this.options.scrollableBar.scrollLeft=this.options.startScrollPosition-e}handleDragLinkClick(){this.options.scrollableBar.querySelectorAll("a").forEach(t=>{t.addEventListener("click",t=>{this.hasScrolled()&&this.options.startScrollItem===this.options.endScrollItem&&(t.preventDefault(),this.options.startScrollItem=null,this.options.endScrollItem=null)})})}hasScrolled(){return this.options.startScrollPosition!==this.options.scrollableBar.scrollLeft}scrollToCurrentItem(){const t=this.options.scrollableBar.querySelector(this.params.defaultPositionSelector);t&&t.offsetLeft>this.options.scrollableBar.offsetWidth-100&&(this.options.scrollableBar.scrollLeft=t.offsetLeft/2)}toggleActiveClass(t){(t&&!this.options.scrollableBar.classList.contains(this.params.activeClass)||!t&&this.options.scrollableBar.classList.contains(this.params.activeClass))&&this.options.scrollableBar.classList.toggle(this.params.activeClass)}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}}i.a.subscribe({topic:"tmg.page.ready",func:()=>{new r({defaultPositionSelector:"[data-current-navigation-item]"}).init()},runIfAlreadyPublished:!0}),e.default=r},function(t,e,s){"use strict";s.r(e);var i=s(0),n=s(1);const r=()=>{i.default.create("tmg.guid"),window.tmg.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))};n.a.subscribe({topic:"tmg.page.ready",func:r,runIfAlreadyPublished:!0}),e.default={guid:r}},function(t,e,s){"use strict";s.r(e);var i=s(20);class n{constructor(t){this.params=Object.assign({openTriggerSelector:"[data-modal-open-button]",contentUrl:"/all-sections.modal/"},t),this.openButton=document.querySelector(this.params.openTriggerSelector),this.modal="",this.keydownActions=this.keydownActions.bind(this),this.options={hasContent:!1,keyboardNavigation:!1,firstFocusableElement:"",lastFocusableElement:""}}init(){this.bindButtonClick(this.openButton)}bindButtonClick(t){t&&t.addEventListener("click",t=>{t.preventDefault(),this.modal||this.createModalContainer(),this.toggleModal()})}createModalContainer(){const t=document.createElement("div");t.classList.add("all-sections-modal","all-sections-modal--hidden"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","dialog"),t.setAttribute("aria-label","Navigation modal containing links for all sections of the site"),t.setAttribute("data-all-sections-modal",""),document.body.appendChild(t),this.modal=t}toggleModal(){this.modal.classList.toggle("all-sections-modal--hidden"),document.querySelector("html").classList.toggle("all-sections-modal--is-open"),this.options.hasContent?this.toggleFocusableElement():(this.setModalHeaderContent(),this.setModalContentWrapper(),this.getModalContent()),this.bindKeydownEventListeners(),this.modal.classList.contains("all-sections-modal--hidden")?this.modal.setAttribute("aria-hidden",!0):this.modal.setAttribute("aria-hidden",!1)}bindKeydownEventListeners(){this.modal.classList.contains("all-sections-modal--hidden")?document.removeEventListener("keydown",this.keydownActions):document.addEventListener("keydown",this.keydownActions)}setModalHeaderContent(){this.modal.insertAdjacentHTML("beforeend",`\n\t\t\t<header class="site-header all-sections-modal__header-wrapper">\n\t\t\t\t<div class="site-header__container site-header__primary-content all-sections-modal__header-content">\n\n\t\t\t\t\t<div class="site-header__logo">\n\t\t\t\t\t\t<a href="https://www.telegraph.co.uk" class="e-site-logo">\n\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\taria-labelledby="site-logo-title"\n\t\t\t\t\t\t\t\tclass="e-site-logo__image">\n\t\t\t\t\t\t\t\t<use xlink:href="#site-logo"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t${this.hasPoppyLogo()?this.getPoppyMarkup():""}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="all-sections-modal__button">\n\t\t\t\t\t\t<div class="e-site-header-button e-site-header-button--close">\n\t\t\t\t\t\t\t<a href=""\n\t\t\t\t\t\t\t\tclass="e-site-header-button__link"\n\t\t\t\t\t\t\t\taria-label="Close all sections navigation menu"\n\t\t\t\t\t\t\t\tdata-modal-close-button>\n\t\t\t\t\t\t\t\t<span class="all-sections-modal__button-text">Close Menu</span>\n\t\t\t\t\t\t\t\t<svg id="global-close" class="e-site-header-button__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792">\n\t\t\t\t\t\t\t\t\t<polygon points="1792,1712.8 975.2,896 1792,79.2 1712.8,0 896,816.8 79.2,0 0,79.2 816.8,896 0,1712.8 79.2,1792 896,975.2\n\t\t\t\t\t\t\t\t\t\t1712.8,1792"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</header>`),this.bindButtonClick(document.querySelector("[data-modal-close-button]"))}setModalContentWrapper(){this.modal.insertAdjacentHTML("beforeend",'<div class="container all-sections__container" data-modal-content-wrapper></div>')}getModalContent(){return fetch(this.params.contentUrl,{cache:"no-cache"}).then(t=>{if(t.ok)return t.text();throw new Error("Please refresh and try again.")}).then(t=>{this.setModalContent(t),this.initAccordionForModal()}).catch(t=>{this.setModalContent(`\n\t\t\t\t\t<div class="all-sections-modal__error-message">\n\t\t\t\t\t\t<h2 class="all-sections__main-heading u-heading-2">Something went wrong</h2>\n\t\t\t\t\t\t<p class="all-sections__body-text">${t.message}</p>\n\t\t\t\t\t</div>`)})}setModalContent(t){document.querySelector("[data-modal-content-wrapper]").insertAdjacentHTML("beforeend",t),this.defineFocusableElements(),this.toggleFocusableElement(),this.options.hasContent=!0}keydownActions(t){this.bindEscapeKey(t),this.trapFocusWithinModal(t)}bindEscapeKey(t){27===t.keyCode&&(this.resetScrollPosition(),this.toggleModal())}trapFocusWithinModal(t){this.options.hasContent&&(9===t.keyCode||t.shiftKey&&9===t.keyCode)&&(this.options.keyboardNavigation||this.setFocusPosition(t,!0,!0),t.shiftKey&&9===t.keyCode?t.target===this.options.firstFocusableElement&&this.setFocusPosition(t,!1):9===t.keyCode&&t.target===this.options.lastFocusableElement&&this.setFocusPosition(t,!0))}setFocusPosition(t,e,s=!1){t.preventDefault(),s&&(this.options.keyboardNavigation=!0),e?this.options.firstFocusableElement.focus():this.options.lastFocusableElement.focus()}defineFocusableElements(){const t=this.modal.querySelectorAll("a, button");this.options.firstFocusableElement=t[0],this.options.lastFocusableElement=t[t.length-1]}toggleFocusableElement(){this.options.keyboardNavigation&&(this.modal.classList.contains("all-sections-modal--hidden")?this.openButton.focus():this.options.firstFocusableElement.focus())}resetScrollPosition(){this.modal.classList.contains("all-sections-modal--hidden")||0===this.modal.scrollTop||(this.modal.scrollTop=0)}initAccordionForModal(){new i.default({accordionSelector:"[data-accordion-modal]",hideClasses:["accordion--is-collapsed","accordion--is-expanded"]}).init()}hasPoppyLogo(){const t=document.querySelector("[data-has-poppy-logo]");return t&&"true"===t.getAttribute("data-has-poppy-logo")}getPoppyMarkup(){return'<div class="e-site-logo__poppy">\n\t\t\t<svg viewbox="0 0 17 32">\n\t\t\t\t<use xlink:href="#poppy"></use>\n\t\t\t</svg>\n\t\t</div>'}}(new n).init(),e.default=n},,,,,function(t,e,s){"use strict";s.r(e);var i=s(4),n=s(0),r=s(1);let o,a=[];const c=(t={})=>{l();const{selector:e=""}=t;return a=Array.from(document.querySelectorAll(e+'.u-accordion__tab [type="checkbox"]')),a},l=()=>{const t=document.querySelectorAll('[data-js="accordion-item"]');if(t.length>0)for(let e=0,s=t.length;e<s;e++)t[e].addEventListener("click",u)};function u(){this.setAttribute("aria-pressed","true"===this.getAttribute("aria-pressed")?"false":"true"),this.setAttribute("aria-expanded","true"===this.getAttribute("aria-expanded")?"false":"true")}o={init:c,closeAll:(t=a)=>{t.forEach(t=>{t.checked=!1})},openAll:(t=a)=>{t.forEach(t=>{t.checked=!0})},selectItem:l},n.default.create("tmg.utils.accordion"),tmg.utils.accordion=o;r.a.subscribe({topic:"tmg.page.ready",func:c,runIfAlreadyPublished:!0});var d=o,h=s(2),g=s(6),p=s(22),m=s(16),f=s(9);function b(t,e){let s;t.forEach(t=>{const e=this.sections.find(e=>e.identifier===t.target.id);if(t.intersectionRatio>0)this.visibleElements.push(e);else{const t=this.visibleElements.indexOf(e);t>-1&&this.visibleElements.splice(t,1)}}),0!==this.visibleElements.length&&(s=1===this.visibleElements.length?this.visibleElements[0]:this.visibleElements.reduce((function(t,e){return t.index<e.index?t:e})),this.sections.map(t=>{t.identifier===s.identifier?t.navItem.classList.add("content-nav__item--selected"):t.navItem.classList.remove("content-nav__item--selected")}))}function y(t){const e=t[0];e.intersectionRatio<1&&e.boundingClientRect.y<0?this.elem.classList.add(this.className+"--sticky"):this.elem.classList.remove(this.className+"--sticky")}class v{constructor(t){this.className="content-nav",this.elem=t,this.visibleElements=[],this.isOpen=this.elem.classList.contains(this.className+"--open"),this.sections=[],this.toggle=this.toggle.bind(this),this.observer=null,this.observerSticky=null}init(){this.elem.addEventListener("click",this.toggle),this.createObservers(),this.addAnchorItems()}createObservers(){this.observer=new IntersectionObserver(b.bind(this),{root:null,rootMargin:"-60px"}),this.observerSticky=new IntersectionObserver(y.bind(this),{threshold:[.9,1]}),this.observerSticky.observe(this.elem)}addAnchorItems(){Array.from(this.elem.getElementsByTagName("li")).forEach((t,e)=>{this.addAnchorItem(t,e)})}addAnchorItem(t,e=0){const s=t.getElementsByTagName("a");if(0===s.length)return;const i=s[0].dataset.navitemId,n={identifier:i,index:e,navItem:t,target:document.getElementById(i),visible:!1};n.target&&(this.sections.push(n),this.observer.observe(n.target))}toggle(){this.isOpen=!this.isOpen,this.isOpen?this.elem.classList.add(this.className+"--open"):this.elem.classList.remove(this.className+"--open")}}const w=()=>{const t=document.querySelector('[data-js="content-nav"]');if(t){new v(t).init()}};r.a.subscribe({topic:"tmg.page.ready",func:w,runIfAlreadyPublished:!0});var S=v;class k{constructor(t){this.element=t,this.elementWidth=this.element.offsetWidth,this.thumbnailsContainer=this.element.querySelector('[data-js="carousel__thumbnails-container"]'),this.itemViewport=this.element.querySelector('[data-js="carousel__viewport"]'),this.itemWrapper=this.element.querySelector('[data-js="carousel__items"]'),this.item=Array.from(this.element.querySelectorAll('[data-js="carousel__item"]')),this.itemCount=this.item.length,this.controlForPrevious=this.element.querySelector('[data-js="carousel__control--previous"]'),this.controlForNext=this.element.querySelector('[data-js="carousel__control--next"]'),this.currentSlideIndex=0}init(){this.itemCount>1&&(this.setItemSizes(),this.bindControls(),this.showControls(),this.updateCurrentThumbnail(this.currentSlideIndex)),this.setItemSizesOnResize()}setItemSizesOnResize(){["orientationchange","resize"].forEach(t=>{window.addEventListener(t,()=>{this.elementWidth=this.element.offsetWidth,this.setItemSizes()},!1)})}setItemSizes(){this.itemViewport.style.width=this.elementWidth+"px",this.itemWrapper.style.width=this.elementWidth*this.itemCount+"px";for(let t=0,e=this.itemCount;t<e;t++)this.item[t].style.width=this.elementWidth+"px"}bindControls(){this.controlForPrevious.addEventListener("click",this.goToPreviousSlide.bind(this)),this.controlForNext.addEventListener("click",this.goToNextSlide.bind(this)),this.thumbnailsContainer&&this.thumbnailsContainer.addEventListener("click",this.goToSelectedSlide.bind(this))}showControls(){this.controlForPrevious.classList.add("carousel__control--visible"),this.controlForNext.classList.add("carousel__control--visible")}showSlide(t){this.itemWrapper.style.left=-this.elementWidth*t+"px"}goToPreviousSlide(){this.currentSlideIndex<=0||(this.currentSlideIndex--,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}goToNextSlide(){this.currentSlideIndex>=this.itemCount-1||(this.currentSlideIndex++,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}goToSelectedSlide(t){const e=t.target.closest("li");if(e){const t=e.dataset.thumbnailId;this.currentSlideIndex=t>0?t-1:1,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex)}}updateCurrentThumbnail(t){if(this.thumbnailsContainer){const e="carousel__thumbnail--is-active",s=this.thumbnailsContainer.getElementsByClassName(e),i=Array.from(this.thumbnailsContainer.querySelectorAll('[data-js="carousel__thumbnail"]'));s.length>0&&(this.prevCurrentIndex=s[0].dataset.thumbnailId,s[0].classList.remove(e)),i.forEach((function(s,i){i!==t||s.classList.contains(e)||s.classList.add(e)}))}}}const E=()=>{const t=Array.from(document.querySelectorAll('[data-js="carousel"]'));t.length>0&&t.forEach((function(t){new k(t).init()}))};r.a.subscribe({topic:"tmg.page.ready",func:E,runIfAlreadyPublished:!0});var C=k;class _{constructor(t){this.params=Object.assign({identifier:t.counter.getAttribute("data-counter-id"),max:t.counter.querySelector("[data-counter-max]").getAttribute("data-counter-max"),min:0,minusSelector:"[data-counter-minus]",plusSelector:"[data-counter-plus]",disabledSelector:"counter__button--disabled"},t),this.event=document.createEvent("HTMLEvents"),this.input=document.getElementById(this.params.identifier),this.minusBtn=this.params.counter.querySelector(this.params.minusSelector),this.plusBtn=this.params.counter.querySelector(this.params.plusSelector)}init(){this.input&&(this.bindPlusCounter(),this.bindMinusCounter(),this.event.initEvent("change",!1,!0))}bindPlusCounter(){this.plusBtn.addEventListener("click",t=>{t.preventDefault(),this.addCounter()})}bindMinusCounter(){this.minusBtn.addEventListener("click",t=>{t.preventDefault(),this.minusCounter()})}minusCounter(){const t=parseInt(this.input.value,10)-1,e=t<=this.params.min;this.updateValue(t,this.minusBtn,e),this.plusBtn.classList.remove(this.params.disabledSelector)}addCounter(){const t=parseInt(this.input.value,10)+1,e=t>=this.params.max;this.updateValue(t,this.plusBtn,e),this.minusBtn.classList.remove(this.params.disabledSelector)}updateValue(t,e,s=!1){!e.classList.contains(this.params.disabledSelector)&&t>=0&&(this.input.value=t,this.input.dispatchEvent(this.event)),e.classList.toggle(this.params.disabledSelector,s)}}const L=()=>{document.querySelectorAll("[data-counter-id]").forEach(t=>{if(t){new _({counter:t}).init()}})};r.a.subscribe({topic:"tmg.page.ready",func:L,runIfAlreadyPublished:!0});var A=_;const T={className:"overlay-continuation",overlayTimeout:5e3};class I{constructor(t={}){this.options=Object.assign(T,t),this.overlayClickElem=document.querySelector(`[data-js="${this.options.className}__handler"]`),this.overlayContainer=document.querySelector(`[data-js="${this.options.className}"]`),this.overlayClose=document.querySelector(`[data-js="${this.options.className}__close"]`),this.overlayTimeout=null,this.overlayClickElem&&(this.overlayAnchor=this.overlayClickElem.href)}hasAllHtmlElements(){return null!==this.overlayClickElem&&null!==this.overlayContainer&&null!==this.overlayClose}init(){this.hasAllHtmlElements()&&(this.overlayClickElem.addEventListener("click",t=>{t.preventDefault(),this.showOverlay()},!1),this.overlayClose.addEventListener("click",()=>{clearTimeout(this.overlayTimeout),this.overlayContainer.classList.remove(this.options.className+"__visible")}))}showOverlay(){const t=this;void 0!==this.overlayContainer&&this.overlayContainer.classList.add(this.options.className+"__visible"),this.overlayTimeout=setTimeout((function(){t.closeAndRedirect()}),this.options.overlayTimeout)}closeAndRedirect(){window.location.href=this.overlayAnchor}}const P=()=>{(new I).init()};r.a.subscribe({topic:"tmg.page.ready",func:P,runIfAlreadyPublished:!0});var x={overlayContinuation:I};let M,O,q,R,N,U={accordionOpen:!1,controlSelector:".navigation__menu-control",initialisedClass:"navigation--js-active",mainMenuSelector:".navigation__menu--main",menuCloseDelay:300,menuOpen:!1,moreSelector:".navigation__item--more .navigation__label-text",openedClass:"navigation--opened",selector:'[data-js="navigation"]'},j=!1,D=[],B=[];const F=()=>{D=Array.from(document.querySelectorAll(U.selector)),D.length>0&&(B=d.init({selector:U.selector+" "}),H(),O.setAttribute("data-js",O.getAttribute("data-js").replace("navigation","")),$(),W())},H=()=>{O=document.querySelector(U.selector),q=O.querySelector(U.controlSelector),N=O.querySelector(U.moreSelector),R=O.querySelector(U.mainMenuSelector)},$=()=>{q.addEventListener("click",()=>{K(),z(),event.preventDefault()}),N.addEventListener("click",t=>{G()&&(K(),t.preventDefault())}),R.addEventListener("mouseenter",()=>{j=!1}),O.addEventListener("mouseleave",t=>{j=!0;let e=setTimeout(()=>{j&&V(),clearTimeout(e)},U.menuCloseDelay)}),document.addEventListener("keyup",t=>{"Escape"!==t.key&&27!==t.keyCode||V()})},G=()=>"none"===window.getComputedStyle(q).display,W=()=>{O.classList.add(U.initialisedClass)},V=()=>{O.classList.remove(U.openedClass),z(),U.menuOpen=!1},K=()=>{U.menuOpen?V():(O.classList.add(U.openedClass),J(),U.menuOpen=!0)},J=()=>{d.openAll(B),U.accordionOpen=!0},z=()=>{d.closeAll(B),U.accordionOpen=!1};M={initializeAfterContentExists:F,toggleExpandedMenu:K},n.default.create("tmg.components.navigation"),window.tmg.components.navigation=M,r.a.subscribe({topic:"tmg.page.ready",func:F,runIfAlreadyPublished:!0});var Q=M;class X{constructor(t){this.element=t}init(){this.hideOptions(),this.bindEvents()}hideOptions(){this.element.classList.remove("product-sort--visible","product-sort--no-js")}bindEvents(){this.element.addEventListener("click",()=>{this.element.classList.toggle("product-sort--visible")})}}const Y=()=>{const t=document.querySelector('[data-js="product-sort"]');t&&new X(t).init()};r.a.subscribe({topic:"tmg.page.ready",func:Y,runIfAlreadyPublished:!0});class Z{constructor(t){this.params=Object.assign({closeAttribute:"data-modal-dropdown-close",heading:t.modal.getAttribute("data-modal-dropdown"),id:t.modal.id,hidden:"modal-dropdown--hidden",save:"Save"},t),this.createModalBackground(),this.createModalHeading(),this.createModalSaveButton()}init(){this.bindCloseButtons(),this.bindOpenButtons()}bindCloseButtons(){document.querySelectorAll(`[${this.params.closeAttribute}]`).forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),this.toggleModalDropdown(!0)})})}bindOpenButtons(){document.querySelectorAll(`[data-modal-dropdown-open=${this.params.id}]`).forEach(t=>{t.addEventListener("click",()=>{this.toggleModalDropdown()})})}toggleModalDropdown(t){this.params.modal.classList.toggle(this.params.hidden,t),this.background.classList.toggle(this.params.hidden,t)}createModalBackground(){this.background=document.createElement("div"),this.background.classList.add("modal-dropdown__background",this.params.hidden),this.background.setAttribute(this.params.closeAttribute,""),this.background.addEventListener("click",()=>{this.toggleModalDropdown(!0)}),this.params.modal.parentNode.insertBefore(this.background,this.params.modal.parentNode.childNodes[0])}createModalHeading(){const t=document.createElement("h4");t.classList.add("modal-dropdown__heading","calendar-availability__hidden"),t.setAttribute(this.params.closeAttribute,""),t.innerHTML=this.params.heading,this.params.modal.insertBefore(t,this.params.modal.firstChild)}createModalSaveButton(){const t=document.createElement("a");t.classList.add("modal-dropdown__button","calendar-availability__hidden","call-to-action__link","call-to-action__link--full-width"),t.setAttribute(this.params.closeAttribute,""),t.innerHTML=this.params.save,this.params.modal.appendChild(t)}}r.a.subscribe({topic:"tmg.page.ready",func:()=>{document.querySelectorAll("[data-modal-dropdown]").forEach(t=>{new Z({modal:t}).init()})},runIfAlreadyPublished:!0});var tt=Z,et=s(13),st=s(10),it=s(3);class nt{constructor(t){this.params=Object.assign({icidSelector:"[data-icid]",indexSelector:"data-track-index",destinationSelector:"data-track-destination",storageName:"tmgComponentTracking",trackingItems:[{type:"txt",selector:"[data-track-txt]"},{type:"block",selector:"[data-track-block]"},{type:"img",selector:"[data-track-img]"}],wrapperSelector:"[data-track-wrapper]"},t)}init(){this.params.trackingItems.map(t=>t.selector).forEach(t=>{this.setClickListener(t)});document.querySelectorAll(this.params.icidSelector).forEach(t=>{this.setICID(t)})}setClickListener(t){document.querySelectorAll(t).forEach(e=>{e.addEventListener("click",()=>{this.setLocalStorage(t,e)})})}setLocalStorage(t,e){const s=this.lookupTrackingItem(t),i=this.getComponentName(e),n=e.getAttribute(this.params.indexSelector)||null,r=e.getAttribute(this.params.destinationSelector)||e.textContent;localStorage.setItem(this.params.storageName,JSON.stringify({componentName:i?this.cleanString(i):null,destination:this.cleanString(r),linkType:s?s.type:"",pageOfUse:this.getCurrentPagePath(),index:n}))}getComponentName(t){const e=t.closest(this.params.wrapperSelector);if(e)return e.getAttribute(this.params.wrapperSelector.replace("[","").replace("]",""))}getCurrentPagePath(){return document.location.pathname.replace(/\//g," ").trim().replace(/\s/g,"_")||"portal"}lookupTrackingItem(t){for(const e of this.params.trackingItems)if(e.selector===t)return e}cleanString(t){return t.trim().replace(/[,\s]+/g,"-").toLowerCase()}getICIDValue(t){const e=Object.assign({brand:it.default.getChannel(),product:"generic",mediaType:"generic",contentType:it.default.getContentType(),contentLocation:"generic"},t);return`${e.brand}_${e.product}_${e.mediaType}_${e.contentType}_${e.contentLocation}`}setICID(t){const e=this.getICIDValue(g.default.tryParse(t.dataset.icid)),s=t.getAttribute("href");s&&t.setAttribute("href",f.default.setQuerystringParam(s,"ICID",e))}}["tmg.page.ready","tmg.lightbox.ready"].forEach(t=>{r.a.subscribe({topic:t,func: