(function(){var style = document.createElement("style");style.type = "text/css";style.innerHTML = ".shz-frame-error{height:400px;min-height:400px}.shz-frame-error .error-page p{margin:10px auto;line-height:1.7}.shz-frame-error .error-page a{font-size:22px}.shz-frame-error .error-page svg{height:60px;width:60px;margin-bottom:30px;fill:#08f;vertical-align:middle}.shz-frame-error .panel-landing{border-bottom:0;border-top:0;padding-bottom:0}@media (max-width:649px){.shz-frame-error .error-page{padding-top:30px}}";document.getElementsByTagName("head")[0].appendChild(style);})();!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";var n=r(1).default,o=r(2).default;t.__esModule=!0;var a=n(r(3)),i=o(r(36)),u=o(r(5)),l=n(r(4)),s=n(r(37)),c=o(r(43));function f(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=i.default,e.Exception=u.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=s,e.template=function(t){return s.template(t,e)},e}var p=f();p.create=f,c.default(p),p.default=p,t.default=p,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},t.__esModule=!0},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0,t.HandlebarsEnvironment=c;var o=r(4),a=n(r(5)),i=r(9),u=r(29),l=n(r(31)),s=r(32);function c(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},i.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}t.VERSION="4.7.6",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},c.prototype={constructor:c,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===o.toString.call(e))o.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){s.resetLoggedProperties()}};var f=l.default.log;t.log=f,t.createFrame=o.createFrame,t.logger=l.default},function(e,t){"use strict";t.__esModule=!0,t.extend=i,t.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return o.test(e)?e.replace(n,a):e},t.isEmpty=function(e){return!e&&0!==e||!(!s(e)||0!==e.length)},t.createFrame=function(e){var t=i({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},n=/[&<>"'`=]/g,o=/[&<>"'`=]/;function a(e){return r[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var u=Object.prototype.toString;t.toString=u;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)}),t.isFunction=l;var s=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===u.call(e)};t.isArray=s},function(e,t,r){"use strict";var n=r(6).default;t.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function a(e,t){var r=t&&t.loc,i=void 0,u=void 0,l=void 0,s=void 0;r&&(i=r.start.line,u=r.end.line,l=r.start.column,s=r.end.column,e+=" - "+i+":"+l);for(var c=Error.prototype.constructor.call(this,e),f=0;f<o.length;f++)this[o[f]]=c[o[f]];Error.captureStackTrace&&Error.captureStackTrace(this,a);try{r&&(this.lineNumber=i,this.endLineNumber=u,n?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:s,enumerable:!0})):(this.column=l,this.endColumn=s))}catch(e){}}a.prototype=new Error,t.default=a,e.exports=t.default},function(e,t,r){e.exports={default:r(7),__esModule:!0}},function(e,t,r){var n=r(8);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),a.default(e),i.default(e),u.default(e),l.default(e),s.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])};var o=n(r(10)),a=n(r(11)),i=n(r(24)),u=n(r(25)),l=n(r(26)),s=n(r(27)),c=n(r(28))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,r){var o=r.inverse,a=r.fn;if(!0===t)return a(this);if(!1===t||null==t)return o(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):o(this);if(r.data&&r.ids){var i=n.createFrame(r.data);i.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:i}}return a(t,r)}))},e.exports=t.default},function(e,t,r){(function(n){"use strict";var o=r(12).default,a=r(2).default;t.__esModule=!0;var i=r(4),u=a(r(5));t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new u.default("Must pass iterator to #each");var r,a=t.fn,l=t.inverse,s=0,c="",f=void 0,p=void 0;function d(t,r,n){f&&(f.key=t,f.index=r,f.first=0===r,f.last=!!n,p&&(f.contextPath=p+t)),c+=a(e[t],{data:f,blockParams:i.blockParams([e[t],t],[p+t,null])})}if(t.data&&t.ids&&(p=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(f=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var h=e.length;s<h;s++)s in e&&d(s,s,s===e.length-1);else if(n.Symbol&&e[n.Symbol.iterator]){for(var v=[],m=e[n.Symbol.iterator](),g=m.next();!g.done;g=m.next())v.push(g.value);for(h=(e=v).length;s<h;s++)d(s,s,s===e.length-1)}else r=void 0,o(e).forEach((function(e){void 0!==r&&d(r,s-1),r=e,s++})),void 0!==r&&d(r,s-1,!0);return 0===s&&(c=l(this)),c}))},e.exports=t.default}).call(t,function(){return this}())},function(e,t,r){e.exports={default:r(13),__esModule:!0}},function(e,t,r){r(14),e.exports=r(20).Object.keys},function(e,t,r){var n=r(15);r(17)("keys",(function(e){return function(t){return e(n(t))}}))},function(e,t,r){var n=r(16);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(18),o=r(20),a=r(23);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*a((function(){r(1)})),"Object",i)}},function(e,t,r){var n=r(19),o=r(20),a=r(21),i=function(e,t,r){var u,l,s,c=e&i.F,f=e&i.G,p=e&i.S,d=e&i.P,h=e&i.B,v=e&i.W,m=f?o:o[t]||(o[t]={}),g=f?n:p?n[t]:(n[t]||{}).prototype;for(u in f&&(r=t),r)(l=!c&&g&&u in g)&&u in m||(s=l?g[u]:r[u],m[u]=f&&"function"!=typeof g[u]?r[u]:h&&l?a(s,n):v&&g[u]==s?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(s):d&&"function"==typeof s?a(Function.call,s):s,d&&((m.prototype||(m.prototype={}))[u]=s))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,e.exports=i},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(22);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0;var o=n(r(5));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0;var o=r(4),a=n(r(5));t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new a.default("#if requires exactly one argument");return o.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,r){if(2!=arguments.length)throw new a.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var o=1;null!=r.hash.level?o=r.hash.level:r.data&&null!=r.data.level&&(o=r.data.level),t[0]=o,e.log.apply(e,t)}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,r){return e?r.lookupProperty(e,t):e}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0;var o=r(4),a=n(r(5));t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var r=t.fn;if(o.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:n,blockParams:o.blockParams([e],[n&&n.contextPath])})}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var o=n(r(30))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4);t.default=function(e){e.registerDecorator("inline",(function(e,t,r,o){var a=e;return t.partials||(t.partials={},a=function(o,a){var i=r.partials;r.partials=n.extend({},i,t.partials);var u=e(o,a);return r.partials=i,u}),t.partials[o.args[0]]=o.fn,a}))},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];console[t].apply(console,n)}}};t.default=o,e.exports=t.default},function(e,t,r){"use strict";var n=r(33).default,o=r(12).default,a=r(1).default;t.__esModule=!0,t.createProtoAccessControl=function(e){var t=n(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var r=n(null);return r.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,r){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==l[e]&&(l[e]=!0,u.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}("function"==typeof e?t.methods:t.properties,r)},t.resetLoggedProperties=function(){o(l).forEach((function(e){delete l[e]}))};var i=r(35),u=a(r(31)),l=n(null)},function(e,t,r){e.exports={default:r(34),__esModule:!0}},function(e,t,r){var n=r(8);e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){"use strict";var n=r(33).default;t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.extend.apply(void 0,[n(null)].concat(t))};var o=r(4)},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},function(e,t,r){"use strict";var n=r(38).default,o=r(12).default,a=r(1).default,i=r(2).default;t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,r=s.COMPILER_REVISION;if(!(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)){if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var n=s.REVISION_CHANGES[r],o=s.REVISION_CHANGES[t];throw new l.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new l.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new l.default("No environment passed to template");if(!e||!e.main)throw new l.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r=e.compiler&&7===e.compiler[0],a={strict:function(e,t,r){if(!e||!(t in e))throw new l.default('"'+t+'" not defined in '+e,{loc:r});return e[t]},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||p.resultIsAllowed(r,a.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(null!=(e[n]&&a.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:u.escapeExpression,invokePartial:function(r,n,o){o.hash&&(n=u.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,o);var a=u.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),i=t.VM.invokePartial.call(this,r,n,a);if(null==i&&t.compile&&(o.partials[o.name]=t.compile(r,e.compilerOptions,t),i=o.partials[o.name](n,a)),null!=i){if(o.indent){for(var s=i.split("\n"),c=0,f=s.length;c<f&&(s[c]||c+1!==f);c++)s[c]=o.indent+s[c];i=s.join("\n")}return i}throw new l.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,o){var a=this.programs[e],i=this.fn(e);return t||o||n||r?a=d(this,e,i,t,r,n,o):a||(a=this.programs[e]=d(this,e,i)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=u.extend({},t,e)),r},nullContext:n({}),noop:t.VM.noop,compilerInfo:e.compiler};function i(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=r.data;i._setup(r),!r.partial&&e.useData&&(n=v(t,n));var o=void 0,u=e.useBlockParams?[]:void 0;function l(t){return""+e.main(a,t,a.helpers,a.partials,n,u,o)}return e.useDepths&&(o=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(l=m(e.main,l,a,r.depths||[],n,u))(t,r)}return i.isTop=!0,i._setup=function(n){if(n.partial)a.protoAccessControl=n.protoAccessControl,a.helpers=n.helpers,a.partials=n.partials,a.decorators=n.decorators,a.hooks=n.hooks;else{var i=u.extend({},t.helpers,n.helpers);!function(e,t){o(e).forEach((function(r){var n=e[r];e[r]=function(e,t){var r=t.lookupProperty;return f.wrapHelper(e,(function(e){return u.extend({lookupProperty:r},e)}))}(n,t)}))}(i,a),a.helpers=i,e.usePartial&&(a.partials=a.mergeIfNeeded(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(a.decorators=u.extend({},t.decorators,n.decorators)),a.hooks={},a.protoAccessControl=p.createProtoAccessControl(n);var l=n.allowCallsToHelperMissing||r;c.moveHelperToHooks(a,"helperMissing",l),c.moveHelperToHooks(a,"blockHelperMissing",l)}},i._child=function(t,r,n,o){if(e.useBlockParams&&!n)throw new l.default("must pass block params");if(e.useDepths&&!o)throw new l.default("must pass parent depths");return d(a,t,e[t],r,0,n,o)},i},t.wrapProgram=d,t.resolvePartial=function(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e},t.invokePartial=function(e,t,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==h&&function(){r.data=s.createFrame(r.data);var e=r.fn;o=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=s.createFrame(r.data),r.data["partial-block"]=n,e(t,r)},e.partials&&(r.partials=u.extend({},r.partials,e.partials))}(),void 0===e&&o&&(e=o),void 0===e)throw new l.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},t.noop=h;var u=a(r(4)),l=i(r(5)),s=r(3),c=r(9),f=r(42),p=r(32);function d(e,t,r,n,o,a,i){function u(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],u=i;return!i||t==i[0]||t===e.nullContext&&null===i[0]||(u=[t].concat(i)),r(e,t,e.helpers,e.partials,o.data||n,a&&[o.blockParams].concat(a),u)}return(u=m(r,u,e,i,n,a)).program=t,u.depth=i?i.length:0,u.blockParams=o||0,u}function h(){return""}function v(e,t){return t&&"root"in t||((t=t?s.createFrame(t):{}).root=e),t}function m(e,t,r,n,o,a){if(e.decorator){var i={};t=e.decorator(t,i,r,n&&n[0],o,a,n),u.extend(t,i)}return t}},function(e,t,r){e.exports={default:r(39),__esModule:!0}},function(e,t,r){r(40),e.exports=r(20).Object.seal},function(e,t,r){var n=r(41);r(17)("seal",(function(e){return function(t){return e&&n(t)?e(t):t}}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=t(r),e.apply(this,arguments)}}},function(e,t){(function(r){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}).call(t,function(){return this}())}])}));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e="undefined"!=typeof window,t=e?window:global,n=t.shz=t.shz||{},o=t.console.log;function r(e,t){var o,r,a=t||n;function i(e,t){var n,o;return n=e.split("["),o=parseInt(n[1]),t[n[0]]=t[n[0]]||[],o>=0&&(t[n[0]][o]=t[n[0]][o]||{}),t[n[0]][o]}if(e.indexOf(".")>-1)for(r=e.split("."),o=0;o<r.length;o++)r[o].indexOf("[")>-1?a=i(r[o],a):(a[r[o]]=a[r[o]]||{},a=a[r[o]]);else e.indexOf("[")>-1?a=i(e,a):(a[e]=a[e]||{},a=a[e]);return a}function a(e,t){var n,o,r=t;for(e=e.split("."),o=0;o<e.length&&(n=r&&"object"===_typeof(r)&&e[o]in r);o++)r=r[e[o]];return n&&r||null}function i(e){var t=e.responseHeaders,n={};try{e.getAllResponseHeaders&&((t=(t=e.getAllResponseHeaders()).split(/\n/g)).forEach((function(e){var t=e.split(": ");t[0]&&(n[t[0].toLowerCase()]=t[1].replace(/\s+$/g,"").replace(/\r+$/g,"").replace(/\n+$/g,"")||"")})),t=n)}catch(e){t={}}return t||{}}function s(e){var t,n,o=new XMLHttpRequest,r="object"==_typeof(e)?e:{url:e},a=r.method||"GET",s=r.headers,c=r.params,l=void 0===e.async||e.async,u=shz.common.Error,f={},p=r.url.replace(/^[\w\W]+.shazam.com[:\d{4}]*/,""),h=0,m=void 0===o.onloadend;for(t in o.open(a,p,l),s)o.setRequestHeader(t,s[t]);o.then=function(e,t,n){f={ok:e,fail:t||e,progress:n}},e.timeout&&(o.timeout=e.timeout),o.ontimeout=function(){n=new u({type:v.TIMEOUT,message:p+" timed out"})},o.onerror=function(e){n=new u({type:v.NETWORK,message:p+" network"}),m&&o.onloadend()},o.onabort=function(e){n=new u({type:v.ABORTED,message:p+" network"}),m&&o.onloadend()},"POST"==a&&o.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;f&&f.progress&&f.progress(t,e)}}),!1),o.onloadend=function(){var t,s,c=!n&&o.status>199&&o.status<400,l=c?f.ok:f.fail;if(h&&clearTimeout(h),h=0,l){if(c)if("HEAD"==a)t=i(o);else try{t=r.responseType?o.response:""==o.responseText&&-1!==[200,204,304,201,202].indexOf(o.status)?"":r.noparse&&o.response||JSON.parse(o.responseText)}catch(e){t=null,n=new u({type:v.SERVICE,message:p+"_"+e.message})}else s=401==o.status?v.UNAUTHORIZED:v.SERVICE,n=new u({type:s,message:p+" status "+o.status,args:{status:o.status,response:!r.responseType&&o.responseText}});l(t,{xhr:o,responseHeaders:"HEAD"==a?t:i(o),error:n,params:e})}},m&&(o.onload=o.onloadend,h=e.timeout&&setTimeout((function(){o.abort()}),e.timeout)),r.responseType&&(o.responseType=r.responseType);try{o.send(c&&("string"==typeof c||e.encoded?c:JSON.stringify(c)))}catch(e){setTimeout((function(){f.fail(null,{xhr:o,error:new u({type:v.JSERROR,message:e.message})})}),0)}return o}function c(e,t,n,o){for(var r in t)(void 0===e[r]||n||o&&"object"==_typeof(e[r]))&&(o&&Array.isArray(t[r])?e[r]=(!n&&Array.isArray(e[r])?e[r]:[]).concat(t[r]):o&&"object"==_typeof(t[r])?(e[r]=e[r]||{},c(e[r],t[r],n,o)):e[r]=t[r]);return e}function l(e,t){return e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):e.msMatchesSelector?e.msMatchesSelector(t):e.matchesSelector?e.matchesSelector(t):0}function u(e,t,n){var o,r;if(n=n||document.body,r=(t=Array.isArray(t)?t:[t]).length,e!=document)for(;e&&e!=n;){try{for(o=0;o<r;o++)if(l(e,t[o]))return{node:e,selector:t[o]}}catch(e){}e=e.parentNode}return{}}function f(e,t){if(!e)return{};var n,o,r,a,i="object"==_typeof(e)?e.search:e,s=i&&(a=i.match(/\?[^#]*/))&&a[0],l={};if(s=s&&s.substr(1))for(s=s.split("&"),n=0;n<s.length;n++)r=(o=s[n].split("=")).shift(),a=o.join("="),l[r]=a;return!t&&e.hash&&c(l,p(e)),l}function p(e){if(!e)return{};var t=("object"==_typeof(e)?e.hash.substring(1):e.split("#")[1])||"",n={};return(t&&t.split(";")||[]).forEach((function(e){var t=e&&e.split("=");2==t.length&&(n[t[0]]=t[1])})),n}t.location&&-1!==t.location.search.search(/(&)*netlog=1/)&&(n.debugmode=1,t.console.log=function(){if(arguments[0].toString().match(/^(netlog$)|(netlog\:)/)){var e,t=Date.now()+" ",n=arguments[0].split(":");for(e=1;e<arguments.length;e++)t+=("object"==_typeof(arguments[e])?JSON.stringify(arguments[e]):arguments[e])+" ";shz.common.getJSON({url:"/services/log"+(n[1]?"/"+n[1]:""),method:"POST",params:t})}o(t||[].slice.call(arguments))}),t.console.warn=t.console.warn||t.console.log,t.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),t.NodeList&&!NodeList.prototype.some&&(NodeList.prototype.some=function(e,t){var n,o;for(t=t||window,n=0;n<this.length&&!(o=e.call(t,this[n],n,this));n++);return o}),t.HTMLOptionsCollection&&!HTMLOptionsCollection.prototype.forEach&&(HTMLOptionsCollection.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)});var h=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$/,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`]/g,g=/[&<>"'`]/;function y(e){return m[e]||"&amp;"}function v(e){this.type=e.type||"unknown",this.message=e.message||"",this.forceshow=e.forceshow,this.args=e.args,b.includes(this.type)||console.log("Created Error ",JSON.stringify(e))}v.INVALID_PARAM="invalidparam",v.JSERROR="jserror",v.NOTFOUND="notfound",v.TIMEOUT="timeout",v.NETWORK="network",v.LIMITEXCEEDED="limitexceeded",v.ABORTED="abort",v.SERVICE="serviceerror",v.REDIRECT="redirect",v.IMAGE_MISSING="image_missing",v.PLAYAUDIO_CODE="playaudio_code",v.UNSUPPORTED="unsupported",v.DATAERROR="baddata",v.OUTOFSYNC="outofsync",v.LIMITERROR="limitnotmet",v.UNAUTHORIZED="unauthorized";var b=[v.INVALID_PARAM,v.DATAERROR];c(r("common"),{namespace:r,namespaceExists:a,setWithNamespace:function(e,t,n,o){var a,i;a=(e=e.split(".")).pop(),(i=e.length?r(e.join("."),t):t)[a]=o?c(i[a],n,!0):n},clearNamespace:function(e,t){var n,o;n=(e=e.split(".")).pop(),(o=e.length?a(e.join("."),t):t)&&delete o[n]},getJSON:s,request:function e(t,n){if(Array.isArray(t)){var o=0,r=t.length,a={};!function i(s,c){s&&(a[s]=c),o<r?(e(t[o],{success:i.bind(this,t[o]),failure:i.bind(this,t[o])}),o++):n&&n(a)}()}else s(t).then(n.success,n.failure)},Datasync:function(){var e={};return{all:function(){return e},clear:function(t){t?delete e[t]:e={}},get:function(t,n){arguments.length>2&&console.log("bad get call",t,arguments[2]),"function"==typeof n&&(n={cb:n});var o,r=e[t]=e[t]||{},a=r.data;return null!=a&&n.cb.call(n.scope,a),null!=a&&n.listenOnce||(r.callbacks=r.callbacks||[],r.callbacks.some((function(e){if(e.cb==n.cb&&e.scope==n.scope)return!0}))||((o=r.callbacks.length)>50&&console.log("Large datasync callback length: "+t+" "+o),r.callbacks.push({cb:n.cb,keepAlive:!n.listenOnce,scope:n.scope}))),!a},set:function(t,n,o,r,a){var i=function(){var a,i=e[t]=e[t]||{},s=i.callbacks||[],c=s.length;for(r?(null!=i.data&&console.log("!!!!!  ds.fire and ds.set call intermixed for token",t),delete i.data):i.data=n;c;){(a=s[c-1]).keepAlive||s.splice(c-1,1);try{a.cb.call(a.scope,n)}catch(e){var l;try{l=e.stack&&e.stack.substr(0,200)||"n/a"}catch(e){l="n/a"}shz.app&&shz.stats&&shz.stats.stat({beaconType:"error",providerdesc:"web_err",code:["Datasync_cb["+t+"]",l].join(" "),errordesc:["Datasync_cb["+t+"]",e.message,e.lineNumber,e.fileName].join(" "),path:"undefined"!=typeof document&&document.location&&document.location.pathname})}c--}o&&o()};a?i():setTimeout(i,0)},fire:function(e,t,n,o){this.set(e,t,n,!0,o)},find:function(t){return e[t]?e[t].data:void 0},remove:function(t,n,o){if(e[t]&&e[t].callbacks)return e[t].callbacks.some((function(r,a){if(r.cb===n&&r.keepAlive&&r.scope==o)return e[t].callbacks.splice(a,1),!0}))}}},merge:c,reconcile:function e(t,n,o){for(var r in t=t||{},n)"object"==_typeof(n[r])?(t[r]=t[r]||{},e(t[r],n[r],o),o(t,n,r)):o(t,n,r);return t},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return 0;return 1},isEqualValues:function e(t,n){var o;if(!t||!n)return t==n;for(o in t){if(!(o in n))return!1;if("object"===_typeof(t[o])){if(!e(t[o],n[o]))return!1}else if(t[o]!==n[o])return!1}return!0},fragment:function(e){var t,n=document.createElement("div");return n.innerHTML=e,(t=n.children[0]).parentNode.removeChild(t),t},isFrameSecure:function(e,t,n){if(!e)return!1;var o,r=e.split("/"),a=shz.frames,i=t&&t.frames||{};return r.some((function(e,t){if(e&&a[e]&&(a=a[e],o=r.slice(0,t+1).join("/"),i[o]&&i[o][n?"sso":"login"]))return!0}))},getFrameInfo:function(e,t){var n,o,r,a,i,s=shz.frames,c=[],l=e.split("#"),u={};return n=e,e=l[0],(l=l[1])&&(l=l.split("&")).forEach((function(e){var t=e.split("=");t[1]&&(u[t[0]]=t[1])})),(o=e.split("/")).some((function(e,t){if(e){if(!s[e])return!0;s=s[e],i=t+1}})),i&&(a=o.slice(0,i).join("/"),c=o.length!=i?o.slice(i):[]),r=t&&t.frames[a]||{},{origPath:n,path:e,type:a,params:c,hashparams:u,scope:s,config:r||{}}},ancestor:u,hasAncestor:function(e,t,n){var o=u(e,t,n);return 0!==Object.keys(o).length},matchesSelector:l,supplant:function(e,t){return e.replace(/{([^{}]*)}/g,(function(e,n){var o=t;return n.split(".").forEach((function(e){o=o[e]})),"string"==typeof o||"number"==typeof o?o:e}))},getLocationParts:function(e){try{var t={},n=document.createElement("a");n.href=e,t.protocol=n.protocol,t.host=n.host,t.hostname=n.hostname,t.port=n.port,t.pathname=n.pathname,t.hash=n.hash,t.search=n.search,t.origin=t.protocol+"//"+t.hostname+(80!=t.port?":"+t.port:"")}catch(n){try{t=new URL(e)}catch(e){t.protocol="",t.host="",t.hostname="unknowndomain.shazam.com",t.port="",t.pathname="",t.hash="",t.search="",t.origin=""}}return t},copy:function e(t){var n,o={};if(Array.isArray(t))o=[],t.forEach((function(t){o.push(e(t))}));else if("object"===_typeof(t)&&t)for(n in t)o[n]=e(t[n]);else o=t;return o},create:function e(t){var n,o={};if(Array.isArray(t))o=[],t.forEach((function(t){o.push(e(t))}));else if("object"===_typeof(t)&&t)for(n in o=Object.create(t),t)"object"==_typeof(o[n])&&(o[n]=e(t[n]));else o=t;return o},urlParams:f,hashParams:p,setQueryParams:function(e,t){var n,o=[];for(n in t=c(f(e,!0),t,!0))o.push(n+"="+t[n]);return o.length&&-1==e.search(/\?/)&&((e=e.split("#"))[0]+="?",e=e.join("#")),e.replace(/\?[^#]*/,"?"+o.join("&"))},getId:function(e){return e.id||(e.id="_a"+Date.now()+Math.floor(1e3*Math.random())),e.id},getBundlePath:function(e){return"src"==shz.version?"/combo/"+shz.version+"?"+shz.app.appname+e:"/builds/"+shz.version+shz.app.appname+e+"/bundle.js"},getResourceBase:function(){return"src"===shz.version?"/combo/"+shz.version+"?":"/builds/"+shz.version},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},isGuid:function(e){return!!e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)},origin:function(e){if(e&&e.hostname)return"".concat(e.protocol||"https:","//").concat(e.hostname);if(t.location){if(window.location.origin)return window.location.origin;var n=window.location.port?":"+window.location.port:"";return window.location.protocol+"//"+window.location.hostname+n}},animScroll:function(e){var t=Date.now(),n=t+1e3,o=e.el,r=e.from,a=e.to,i=r-a;requestAnimationFrame((function a(){var s,c=Date.now(),l=1*((s=(s=c-t)/1e3-1)*s*s*s*s+1)+0,u=i*l;if(c<=n){var f=Math.max(0,r-u),p={top:e.top?f:o.scrollTop,left:e.left?f:o.scrollLeft};o.scrollTo(p),requestAnimationFrame(a)}}))},animate:function(e){var t=e.duration||1e3,n=Date.now(),o=n+t,r=e.el,a=void 0===e.from?0:e.from,i=void 0===e.to?1:e.to,s=a-i,c=e.attribute||"opacity",l=r.style,u=e.setStyle,f="inout"==e.easing?function(e,t,n,o,r){return(t/=r/2)<1?o/2*t*t*t*t*t+n:o/2*((t-=2)*t*t*t*t+2)+n}:function(e,t,n,o,r){return o*((t=t/r-1)*t*t*t*t+1)+n};0==c.indexOf("scroll")&&(l=r),function r(){var p,h=Date.now(),m=h-n,d=f(m/t,m,0,1,t);h<=o?(p=a-s*d,u?u(p):l[c]=p,requestAnimationFrame(r)):(u?u(i):l[c]=i,e.onEnd&&e.onEnd())}()},Error:v,dispatchCustom:function(e,t,n,o){if(e&&e.dispatchEvent){var r=document.createEvent("HTMLEvents");o=o||{},r.initEvent(t,isNaN(o.bubble)?1:o.bubble,isNaN(o.cancelable)?1:o.cancelable),r.detail=n,e.dispatchEvent(r)}},deepLinkUrl:function(e){var t=new RegExp("^http(s)?://(www|cisd|dev).shazam.com(:)?([0-9]{4})?/([a-z]{2}/)?");return e&&e.replace(t,"shazam://")||""},shazamURL:function(e,t){return n&&n.bridge&&n.bridge.isNative?"shazam://launchurl?url="+encodeURIComponent(e)+(t?"&external=true":""):e},isDevServer:function(){return!!("undefined"!=typeof document&&document.location&&document.location.hostname&&document.location.hostname.match(/^((cisd|betasd|dev).shazam.(apple.)?com|localhost)/))},flattenCSS:function e(t){if(t){var n,o,r,a;for(n in t){if(r=t[n],Array.isArray(r))r.forEach((function(t){e(t)}));else if("css"===n&&"string"!=typeof r){for(o in a="",r)a+=o+":"+r[o]+";";t[n]=a}"object"===_typeof(r)&&e(r)}return t}},htmlEncode:function(e){return g.test(e)?e.replace(d,y):e},htmlUnEncode:function(e){if("undefined"==typeof document)return Object.keys(m).forEach((function(t){var n=new RegExp(m[t],"g");e=e.replace(n,t)})),e;var t=document.createElement("a");return t.innerHTML=e,t.textContent},stripHTML:function(t){if(e){var n=document.createElement("DIV");return n.innerHTML=t,n.textContent||n.innerText||""}return t&&t.replace(/<[^>]*>?/g,"")},validateEmail:function(e){if(e.length>254)return!1;if(!h.test(e))return!1;var t=e.split("@");return!(t[0].length>64||t[1].split(".").some((function(e){return e.length>63})))},isJSCached:function(){try{var e=window.performance.getEntriesByType("resource")||[],t=!1;e.some((function(e){if(!("name"in e)||!("transferSize"in e))throw"unsupported";if(e.name.match(/main\.js/))return t=0===e.transferSize,!0}))||(t=void 0)}catch(e){t=void 0}return t},readableDate:function(e){var t=isNaN(1*e),n=!t&&new Date(1*e);return t?"invalid":[n.getMonth()+1,n.getDate(),n.getFullYear()].join("/")+" "+[n.getHours(),n.getMinutes(),n.getSeconds()].join(":")},convertToHashParams:function(e){var t,n,o="";for(t in e)-1==o.search(t)?o+=(o.length&&";"!=o[o.length-1]?";":"")+t+"="+e[t]:(n=new RegExp("("+t+"=([^;]+))"),o=o.replace(n,t+"="+e[t]));return o},Uint8ToBase64:function(e){for(var t,n=0,o=e.length,r="";n<o;)t=e.subarray(n,Math.min(n+32768,o)),r+=String.fromCharCode.apply(null,t),n+=32768;return btoa(r)},base64ToArrayBuffer:function(e){for(var t=atob(e),n=t.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=t.charCodeAt(r);return o.buffer},navigate:function(e){if(window.self!==window.top)try{window.parent.postMessage({deeplinkURL:e},window.location.origin)}catch(e){console.log(e)}else document.location.href=e},versionCompare:function(e,t){e=e.split(".").map(Number),t=t.split(".").map(Number);var n=e[0]*Math.pow(10,6)+(e[1]||0)*Math.pow(10,3)+1*(e[2]||0),o=t[0]*Math.pow(10,6)+(t[1]||0)*Math.pow(10,3)+1*(t[2]||0);return n==o?0:n<o?1:-1},numPad:function(e,t){var n,o="";return"number"==typeof e&&(o=e<0?"-":"",e=Math.abs(e)),o+(n="000000000"+e).substr(n.length-t)}})}();function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){"use strict";function e(e={},t){let n={};return Object.keys(e).forEach(r=>{void 0===e[r]||""===e[r]||t&&t(r)||(n[r]=e[r])}),n}class t{static getParams(e,n,r={}){let s={},o=t.getDatasetValue(e,n);if(o=o&&o.split(",")||[],o.forEach(e=>{e=e.split("="),s[e[0]]=function(e,t={}){let{preserveCase:n,ignoreLength:r}=t;return e&&("string"!=typeof e&&(e=e.toString()),e=e.replace(/(%20|\s)/g,"_").replace(/[^a-zA-Z0-9\-_,]/g,""),r||(e=e.substr(0,20))),e&&!n?e.toLowerCase():e}(e[1],r)}),r.inherit){let o=r.inherit.stop||document.body,i=e.parentNode||r.parentFrame;e!=o&&i&&(s=Object.assign({},t.getParams(i,n,r),s))}return s}static getValue(e,n,r,s={}){let o;if(r){let s=t.getDatasetValue(e,r);s=s.split(","),s.some(e=>{if((e=e.split("="))[0]==n)return o=e[1],!0})}else o=t.getDatasetValue(e,n);return s.inherit&&(s.inherit.stop=s.inherit.stop||document.body),!o&&s.inherit&&e!=s.inherit.stop&&(o=t.getValue(e.parentNode||e.parentFrame,n,r,s)),o}static getDatasetName(e){return"shz".concat(e.replace(/^./,e[0].toUpperCase()))}static getDatasetValue(e,n){return e.dataset[t.getDatasetName(n)]||""}}class n{static getBeaconConfig(t="",r){let s=t.split("."),o=s.pop(),i=s.join("."),a=(r=i&&function(e,t){var n,r,s=t;for(e=e.split("."),r=0;r<e.length&&(n=s&&"object"==typeof s&&e[r]in s);r++)s=s[e[r]];return n&&s||null}(i,r)||r)[o];if(!a)throw{type:"invalidparam",code:t,message:"spec missing ".concat(t)};return{dynamic:a&&Object.keys(a._dynamic||[]),params:e(a,n.isReserved)}}static isReserved(e){return e.match(/^_./)}}var r=Object.freeze({__proto__:null,BeaconsUrl:class{constructor(e,t={},n={}){if(!e)throw"Require beacon url";this.template=e,this.options=n,this.pathParams={},this._parseTokens(e).forEach(e=>{this.pathParams[e]=void 0!==t[e]?t[e]:n.defaultValue||"-"})}send(e={},t,n={}){let r=this._getUrl(e),s=[],o=Object.keys(this.pathParams);return Object.keys(e).forEach(t=>{o.includes(t)||s.push("".concat(t,"=").concat(e[t]))}),n.sort&&s.sort(),s=s.join("&"),s&&(-1==r.search(/\?/)&&(r+="?"),r+=s),"image"==(t=this._setMode(t))?this._sendImage(r):"function"==typeof t?t(r):"bridge"==t?this._sendBridge(e,(e,t)=>{t&&this._sendImage(r)}):"xhr"==t&&this._sendXHR(r),r}_setMode(e){return e||(e="undefined"!=typeof Image?"image":"undefined"!=typeof window&&void 0!==window.shz?"bridge":"xhr"),e}_sendImage(e){if(!this.onDone){let e=this;this.onDone=function(t){this.removeEventListener("load",e.onDone),this.removeEventListener("error",e.onDone)}}if("undefined"!=typeof Image){let t=new Image;t.addEventListener("load",this.onDone),t.addEventListener("error",this.onDone),t.src=e}}_sendXHR(e){e=e.replace(/^https:\/\/([^\/]+)/,""),fetch(e).then(e=>console.log(e)).catch(t=>{console.log("_sendXHR error:",t,e)})}_sendBridge(e,t){if("undefined"!=typeof window&&void 0!==window.shz){if(window.shz.bridge){let n=Object.assign({},e);delete n.beaconType,window.shz.bridge.request({type:"sendBeacon",data:{event:e.beaconType,parameters:n}},t)}}else console.error("shz global not available")}_parseTokens(e){let t=[];return e.replace(/\{([^\}]+)\}/g,(e,n)=>{t.push(n)}),t}_getUrl(e){let t=Object.assign({},this.pathParams,e);return function(e,t){return e.replace(/{([^{}]*)}/g,(function(e,n){var r=t;return n.split(".").forEach((function(e){r=r[e]})),"string"==typeof r||"number"==typeof r?r:e}))}(this.template,t)}},Dom:t,Manifest:n,PathConfigs:class{static _findConfig(e="",t=[]){let n={};return e&&t.forEach(t=>{e.match(t.path)&&Object.assign(n,t)}),n||{}}static getConfig(e,t){return Object.assign({_location:t},t&&this._findConfig(t,e)||{})}static getStaticParams(t={},n=""){return e((n?this._findConfig(n,t.framepaths):t).staticKeys)}static getPathParams(t={},n=""){return e((n?this._findConfig(n,t):t).pathParams)}static getHashParams(e={}){let t={},n=function(e){if(!e)return{};var t=("object"==typeof e?e.hash.substring(1):e.split("#")[1])||"",n={};return(t&&t.split(";")||[]).forEach((function(e){var t=e&&e.split("=");2==t.length&&(n[t[0]]=t[1])})),n}(e._location);return(e.hashParamsToInclude||[]).forEach(e=>{n[e]&&(t[e]=n[e])}),t}static getRestrictedProps(e={}){return e.removeParams||[]}static getDeeplinkParams(e={},t=""){let n,r=e.deeplinkparams||{};return Object.keys(r).some(e=>(n=t.match(e)&&r[e],n)),n||{}}static getBeaconUrl(e={}){return e.beaconUrl}}});const s=[{name:"chromebook",regex:"[^a-zA-Z]CrOS|Chromebook",type:"desktop"},{name:"iphone",regex:"iPhone",type:"phone"},{name:"ipad",regex:"iPad",type:"tablet"},{name:"ipad",test:function(e){return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},type:"tablet"},{name:"ipod",regex:"iPod",type:"phone"},{name:"windowsPhone",regex:"Windows Phone|Windows Mobile",type:"phone"},{name:"windowsTablet",regex:"Windows(.*)?(Touch|Tablet)",type:"tablet"},{name:"androidPhone",regex:"Android(.*)?Mobile",type:"phone"},{name:"androidTablet",regex:"Android",type:"tablet"},{name:"tablet",regex:"Tablet",type:"tablet"}],o=[{name:"chromeos",regex:"[^a-zA-Z]CrOS|Chromebook",regexVer:"x86_64|armv7l|aarch64"},{name:"ios",regex:"iPhone|iPad|iPod",regexVer:"OS"},{name:"win",regex:"Win|Windows Phone",regexVer:"NT|OS|Windows Phone|Windows Mobile"},{name:"android",regex:"Android",regexVer:"Android"},{name:"mac",regex:"Macintosh|Apple Mac",regexVer:"OS X|OS_X"},{name:"linux",regex:"Linux",regexVer:"rv|Linux|armv7l"},{name:"amazon",regex:"Silk",regexVer:"Silk"}],i=[{name:"ie",regex:"MSIE|Trident",regexVer:"rv|MSIE|IEMobile"},{name:"edge",regex:"Edg|Edge",regexVer:"MSIE|rv|IEMobile|Edg|Edge|EdgiOS|EdgA"},{name:"opera",regex:"OPR|Opera",regexVer:"OPR|Version"},{name:"miuibrowser",regex:"XiaoMi/MiuiBrowser",regexVer:"MiuiBrowser"},{name:"samsungbrowser",regex:"SamsungBrowser",regexVer:"SamsungBrowser"},{name:"chrome",regex:"Chrome|CrMo|CriOS",regexVer:"Chrome|CrMo|CriOS"},{name:"firefox",regex:"Firefox|FxiOS",regexVer:"Firefox|FxiOS"},{name:"safari",regex:"Safari",regexVer:"Version|Safari"},{name:"BlackBerry",regex:"CLDC",regexVer:"CLDC"}];function a(e,t){let n;return t.some(t=>{let r=Object.assign({},t);if(r.regex&&new RegExp(r.regex,"i").test(e)&&(n=r,r.regexVer)){let t=new RegExp("(".concat(r.regexVer,")[- /:;_]([\\d._]+)"),"i"),s=e.match(t),o=(s&&s[2]||"").replace(/_/g,"."),i="";o?(s=o.split("."),s.forEach((e,t)=>{i+=0===t?e+".":e})):i="0",n=Object.assign(n,{fullversion:o,version:parseFloat(i)})}return r.test&&(n=r.test(e)?n||r:null),n}),n||{name:""}}function l(e){let{name:t,fullversion:n,version:r}=a(e,o),s={};return o.forEach(e=>{s[e.name]=e.name==t}),Object.assign(s,{platform:["ios","win","android"].includes(t)?t:"desktop",ampPlatform:(s.ios?"iphone":s.android&&"android")||"web",osName:t,osVerNum:r,osVer:n,["".concat(t,"_ver")]:r}),s}function d(e=""){return!e||-1!==e.search(/googlebot|Mediapartners|AdsBot-Google|Viber|Pinterestbot|WhatsApp|yahoo|bingbot|BingPreview|Applebot|baiduspider|yandex|yeti|yodaobot|viber|gigabot|Amazon-Route53-Health-Check-Service|Slackbot-LinkExpanding|ia_archiver|facebookexternalhit|rogerbot|twitterbot|LinkedInBot|developers\.google\.com|googleweblight/i)}function c(e){let{name:t,fullversion:n,version:r}=a(e,i),s={browserName:t,browserVerNum:r,browserVer:n,["".concat(t,"_ver")]:r};return i.forEach(e=>{s[e.name]=e.name==t}),s}function h(e){let{name:t="",type:n="desktop"}=a(e,s),r={};return s.forEach(e=>{r[e.name]=e.name==t}),Object.assign(r,{deviceType:n,deviceName:t,isTablet:"tablet"==n,isPhone:"phone"==n,isMobile:"desktop"!=n,isDesktop:"desktop"==n})}function p(e){let t=e.match(/(nightwatch);port=(\d+)/);return t?{testtype:t[1],testdomain:"http://localhost:".concat(t[2])}:{}}var u=Object.freeze({__proto__:null,getBrowser:c,getDevice:h,getEmulationUserAgent:function(e){let t=e.match(/([^,]*)([^&$]*)/),n=t&&t[1],r=t&&t[2]||"",s="";return-1!==n.search(/iphone/)?s="Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1":-1!==n.search(/android.nexus/)&&(s="Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/%s Mobile Safari/537.36"),"".concat(s," ").concat(r)},getEnvironment:p,getOS:l,getPlatformInfo:function(e,t){let n=Object.assign({bot:d(e)},h(e),l(e),c(e),p(e));if(function(e){let t="unknown",{osName:n,deviceType:r,osVerNum:s}=e;n&&(t="".concat(r,"_").concat(n)),e.deviceplatform=t}(n),t){let e={};Object.keys(n).forEach(t=>{n[t]&&(e[t]=n[t])}),n=e}return n},isBot:d}),g=Object.freeze({__proto__:null,arrayBufferToString:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},asyncForEachSimul:async function(e,t){return new Promise((n,r)=>{let s=[];for(let n=0;n<e.length;n++)s.push(new Promise(async(r,s)=>{await t(e[n],n,e),r(n)}));return Promise.all(s).then(()=>{n()})})},base64Encode:function(e){if(e&&0!=e.length)return btoa(String.fromCharCode.apply(null,new Uint8Array(e)))},filterProps:function(e={},t){let n={};return Object.keys(e).forEach(r=>{void 0===e[r]||""===e[r]||t&&t(r)||(n[r]=e[r])}),n},hashParams:function(e){if(!e)return{};var t=("object"==typeof e?e.hash.substring(1):e.split("#")[1])||"",n={};return(t&&t.split(";")||[]).forEach((function(e){var t=e&&e.split("=");2==t.length&&(n[t[0]]=t[1])})),n},namespaceExists:function(e,t){var n,r,s=t;for(e=e.split("."),r=0;r<e.length&&(n=s&&"object"==typeof s&&e[r]in s);r++)s=s[e[r]];return n&&s||null},restGet:function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(e=>e.json())},restPut:function(e,t){return fetch(e,{method:"PUT",credentials:"same-origin",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then(e=>e.json())},sanitize:function(e,t={}){let{preserveCase:n,ignoreLength:r}=t;return e&&("string"!=typeof e&&(e=e.toString()),e=e.replace(/(%20|\s)/g,"_").replace(/[^a-zA-Z0-9\-_,]/g,""),r||(e=e.substr(0,20))),e&&!n?e.toLowerCase():e},stall:function(e=500){return new Promise((t,n)=>{setTimeout(e=>t(),e)})},stringToArrayBuffer:function(e){return Uint8Array.from(e,e=>e.charCodeAt(0)).buffer},supplant:function(e,t){return e.replace(/{([^{}]*)}/g,(function(e,n){var r=t;return n.split(".").forEach((function(e){r=r[e]})),"string"==typeof r||"number"==typeof r?r:e}))}});const m=x(["INIT","EMPTY","HIDDEN","LOADING","NO_RESULTS","SUCCESS","SUCCESS_ARIA_LIVE_REGION"]),f=x(["ACTION_BUTTON","GROUP_ITEMS","GROUP_FOOTER","GROUP_TITLE","LIST","LIST_ITEM","PORTAL","PORTAL_OVERLAY","SPINNER"]);function y(e,t){e.dataset.type=t}function b(e,t){let n=t.querySelectorAll("[data-type=".concat(f.LIST_ITEM,"]:not([data-is-placeholder=true]), [data-type=").concat(f.ACTION_BUTTON,"]")),r=Array.from(n).findIndex(t=>t===e);return{prev:n[r-1],next:n[r+1],all:n}}function x(e){return e.reduce((e,t)=>(e[t]=t,e),{})}function v(e){if(e.tagName)return e;let t=document.createElement("div");return t.innerHTML=e,t.firstChild||e}function _(e=8){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=n.length,s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*r));return t}function S(e="div"){let t=document.createElement(e),n=_();return t.id=n,t.dataset.id=n,t.classList.add(n),t}function E(e){e&&(e.style.display="none",e.style.visibility="hidden")}function P(e){e&&(e.style.display=null,e.style.visibility="visible")}function k(e){return e&&"[object Function]"==={}.toString.call(e)}class w{constructor(e,t){this.stateMap=e,this.currentState=t}transitionTo(e,t){if(this.currentState===e)return;let n=this.stateMap[this.currentState];n||console.error("Potential states not defined for current state of ".concat(this.currentState));let r=n[e];r||console.error("Invalid transition state from ".concat(this.currentState," to ").concat(e)),r(t),this.currentState=e}}const{INIT:A,EMPTY:O,SUCCESS:T,LOADING:I,HIDDEN:C,NO_RESULTS:L}=m;function N(e,t){null!==e?Object.entries(t.nodes.states).forEach(([t,n])=>{t===e?P(n):E(n)}):Object.values(t.nodes.states).forEach(e=>{E(e)})}function D([e]){if(e!==m.SUCCESS_ARIA_LIVE_REGION)return!0}function M(e,{onSearchNext:t,startSearch:n,listbox:r,useDistinctListboxGroups:s}){let o=r.addGroup(e.key);e.nodes={container:o,states:{}};for(let[t,n]of Object.entries(e.states).filter(D)){let r=n();r||(r=document.createElement("div")),r=v(r),r.dataset.state=t,r.dataset.groupKey=e.key,r.dataset.testid="group:".concat(e.key,":").concat(t),e.nodes.states[t]=r,o.appendChild(r)}N(null,e);let i=R({group:e,groupNode:o,onSearchNext:t,startSearch:n,useDistinctListboxGroups:s});return new w(i,A)}const R=({group:e,groupNode:t,onSearchNext:n,startSearch:r,useDistinctListboxGroups:s})=>{function o(){N(T,e),P(e.nodes.spinner),P(e.nodes.primaryActionButton)}function i(){e.nodes.success&&e.nodes.success.remove()}function a(){i(),N(C,e)}const l=()=>(({group:e,groupNode:t,onSearchNext:n,startSearch:r,useDistinctListboxGroups:s})=>{let o,i,a,l=document.createElement("div");l.dataset.state=m.SUCCESS,l.dataset.testid="group:".concat(e.key,":").concat(m.SUCCESS),o=function(){let e=S();return y(e,f.GROUP_TITLE),e.dataset.type=f.GROUP_TITLE,e.setAttribute("role","heading"),e.setAttribute("aria-level","2"),e}(),o.innerHTML=k(e.title)?e.title():e.title||"",l.appendChild(o);let d=S();y(d,f.GROUP_ITEMS),s&&d.setAttribute("role","listbox"),l.appendChild(d);let c=S();return y(c,f.GROUP_FOOTER),c.dataset.testid="group:".concat(e.key,":").concat(m.SUCCESS,":").concat(f.GROUP_FOOTER),l.appendChild(c),i=document.createElement("span"),i.innerHTML='<svg><use xlink:href="#search-combo-spinner" /><svg>',y(i,f.SPINNER),o.appendChild(i),e.onRenderActionButton?a=e.onRenderActionButton(e.data,{startSearch:r}):(a=document.createElement("button"),a.innerHTML=k(e.primaryActionButtonLabel)?e.primaryActionButtonLabel():e.primaryActionButtonLabel||"Show More",a.addEventListener("click",n),a.addEventListener("keydown",n)),a.dataset.groupKey=e.key,a.dataset.type=f.ACTION_BUTTON,a.tabIndex="-1",a.id=_(),a.type="button",e.primaryActionButtonAriaLabel&&(a.ariaLabel=e.primaryActionButtonAriaLabel()),c.appendChild(a),t.appendChild(l),e.nodes.success=l,e.nodes.title=o,e.nodes.spinner=i,e.nodes.items=d,e.nodes.primaryActionButton=a,e.nodes.footer=c,e.nodes.states[m.SUCCESS]=l,l.style.display="none",{title:o,spinner:i,primaryActionButton:a,success:l,items:d}})({group:e,groupNode:t,onSearchNext:n,startSearch:r,useDistinctListboxGroups:s});return{INIT:{LOADING:()=>{l(),o()},HIDDEN:a},LOADING:{EMPTY:()=>{i(),N(O,e)},SUCCESS:t=>{e&&!1===e.nextParams&&E(e.nodes.footer),E(e.nodes.spinner)},HIDDEN:a,NO_RESULTS:t=>{let n=e.nodes.states.NO_RESULTS.parentNode,r=e.nodes.states.NO_RESULTS,s=_objectSpread({},r.dataset),o=window.getComputedStyle(r),i=v(e.states.NO_RESULTS(t));i.style.cssText=o,Object.assign(i.dataset,s),n.replaceChild(i,r),e.nodes.states.NO_RESULTS=i,N(L,e)}},SUCCESS:{LOADING:o,HIDDEN:a},EMPTY:{HIDDEN:a,LOADING:()=>{l(),o()}},HIDDEN:{LOADING:()=>{l(),o()}},NO_RESULTS:{LOADING:o}}};class j{constructor({showOverlay:e}={}){_defineProperty(this,"addNode",e=>{this.node.appendChild(e)}),_defineProperty(this,"hide",()=>{this.node.style.opacity=0}),_defineProperty(this,"show",()=>{this.node.style.opacity=1}),_defineProperty(this,"destroy",()=>{this.node.removeEventListener("click",this.portalClick),this.node.remove()}),this.node=document.querySelector("[data-type=".concat(f.PORTAL,"]"))||function(){let e=S();return e.id=e.dataset.id,y(e,f.PORTAL),document.body.appendChild(e),e}(),this.id=this.node.id;let t=S();y(t,f.PORTAL_OVERLAY),e&&this.node.appendChild(t),this.nodes={node:this.node,overlay:t}}}class V{constructor(e,t={}){_defineProperty(this,"addGroup",e=>{let t=document.createElement("div");return t.dataset.groupKey=e,t.dataset.testid="group:".concat(e),this.nodes.list.appendChild(t),t}),_defineProperty(this,"hide",()=>{var e;this.nodes.list.style.transform=null,(e=this.nodes.list)&&(e.style.opacity=0,e.style.pointerEvents="none",e.setAttribute("aria-hidden",!0)),this.nodes.portal.hide()}),_defineProperty(this,"show",()=>{var e;(e=this.nodes.list)&&(e.style.opacity=1,e.style.pointerEvents="auto",e.setAttribute("aria-hidden",!1)),this.nodes.portal.show(),this.nodes.list.style.transform="scale(1)"}),_defineProperty(this,"scrollToTop",()=>{this.nodes.list.scrollTop=0}),_defineProperty(this,"scrollToItem",(e,t)=>{e&&e.scrollIntoView&&e.scrollIntoView(t||{block:"nearest",behavoir:"smooth"})}),_defineProperty(this,"positionRelativeToNode",e=>{let{top:t,left:n,height:r}=e.getBoundingClientRect();this.options.disablePortal?(t=r+2,n=0):(t=t+r+2,n=n),this.nodes.list.style.top=t+"px",this.nodes.list.style.left=n+"px",this.nodes.list.style.maxHeight="calc(100vh - ".concat(this.nodes.list.style.top," - 50px)"),this.options.onPosition&&this.options.onPosition(this.nodes,{top:t,left:n})}),_defineProperty(this,"getAllItems",()=>this.nodes.list.querySelectorAll('[data-type="'.concat(f.LIST_ITEM,'"]'))),_defineProperty(this,"destroy",()=>{this.nodes.portal&&this.nodes.portal.destroy(),this.resizeObserver&&this.resizeObserver.disconnect()}),this.nodes={},this.options=t;let{disablePortal:n,useDistinctListboxGroups:r}=t,s=new j({showOverlay:!0});this.nodes.portal=s;let o=S();o.id=_(),r||o.setAttribute("role","listbox"),y(o,f.LIST),this.nodes.list=o,n?(o.classList.add("disabledPortal"),this.nodes.portal.node.style.zIndex=2):(s.addNode(this.nodes.list),s.hide()),this.id=o.id,this.resizeObserver=new ResizeObserver(()=>{this.positionRelativeToNode(e)}),this.resizeObserver.observe(document.body)}}const B=m,z=f;class G{constructor(e,t){_defineProperty(this,"showListbox",()=>{this.options.onShow&&this.options.onShow(),this.listbox.positionRelativeToNode(this.nodes.input),this.nodes.input.setAttribute("aria-expanded","true"),requestAnimationFrame(()=>{this.listbox.show(),this.nodes.input.focus()})}),_defineProperty(this,"hideListbox",()=>{this.nodes.input.setAttribute("aria-expanded","false"),this.listbox.hide(),this.options.onHide&&this.options.onHide()}),_defineProperty(this,"getGroupByKey",e=>this.groups.find(t=>t.key===e)),_defineProperty(this,"handleDocumentClick",e=>{e.target!==this.nodes.input&&(this.listbox.nodes.list.contains(e.target)||this.options.ignoreOutsideClickNodeList&&this.options.ignoreOutsideClickNodeList.find(t=>t===e.target)||this.hideListbox())}),_defineProperty(this,"handleInputFocus",()=>{this.listbox.scrollToTop(),this.showListbox()}),_defineProperty(this,"reset",()=>{this.setActiveDescendant(null),this.nodes.input.value=null,this.startSearch("",{isSilent:!0}),this.hideListbox()}),_defineProperty(this,"handleNodeKeyDown",e=>{let t="ArrowDown"===e.key,n="ArrowUp"===e.key;if(t||n){let{prev:e,next:r,all:s}=b(this.activeDescendant,this.listbox.nodes.list),o=t?r:e;if(!e&&n)return this.showListbox(),void this.setActiveDescendant(s[s.length-1]);o?this.setActiveDescendant(o):this.setActiveDescendant(s[0]),this.showListbox()}if("Tab"!==e.key&&"Escape"!==e.key){if("Enter"===e.key){let t=this.groups.map(e=>e.nodes.primaryActionButton).filter(Boolean).find(e=>e===this.activeDescendant),n=new KeyboardEvent("keydown",{key:"Enter"});if(t)return t.dispatchEvent(n),void e.preventDefault();let r=Array.from(this.listbox.getAllItems()).find(e=>e===this.activeDescendant);if(r)return"A"===r.tagName?r.click():r.dispatchEvent(n),void e.preventDefault()}}else this.hideListbox()}),_defineProperty(this,"handleInputInputEvent",e=>{let t=e.target.value;this.options.onQuery&&this.options.onQuery(t),this.showListbox(),this.startSearch(t)}),_defineProperty(this,"startSearch",(e,t={})=>{let n=[];for(let t of this.groups)t&&t.onSearchAsync&&(n.push(this.startSearchAsyncAndRenderGroup(t,e)),e&&e.length>0&&this.nodes.input.value!==e&&(this.nodes.input.value=e||""));t.isSilent||this.nodes.input.focus()}),_defineProperty(this,"startSearchAsyncAndRenderGroup",(e,t,n={})=>{let{isNextRequest:r,isKeyboardEvent:s}=n;t==e.query||r||(e.nextParams=null,e.query=t,this.setActiveDescendant(null)),e.state.transitionTo(B.LOADING);let o=e.onParseMenuData(e.data||[],{query:t});if(this.renderMenuItems(e,[...r?o:[],{key:_()},{key:_()},{key:_()}],{isPlaceholder:!0,isNextRequest:!1}),this.options.useDistinctListboxGroups){let e=this.listbox.nodes.list.querySelectorAll('[role="listbox"]'),t=[];e.forEach(e=>t.push(e.id)),t=t.join(" "),this.nodes.input.setAttribute("aria-owns",t)}return e.onSearchAsync(t,e.nextParams,e).then(n=>{let o=n;r&&(o=e.onParseNextData(o,e.data)),e.data=o;let i=e.onParseMenuData(e.data,{query:t}),a=Object.keys(B).includes(i)?i:B.SUCCESS;e.nextParams=e.onParseNextParams?e.onParseNextParams(n):null;let l={requestData:o,data:i,query:t,group:e};if(e.state.transitionTo(a,l),this.renderMenuItems(e,i,{isNextRequest:r,isKeyboardEvent:s}),e.states.SUCCESS_ARIA_LIVE_REGION){let t=v(e.states.SUCCESS_ARIA_LIVE_REGION(_objectSpread(_objectSpread({},l),{},{ariaTotalResultCount:e.nodes.items.childElementCount})));this.nodes.ariaLiveRegion.appendChild(t),setTimeout(()=>{t&&t.remove()},3e3)}}).catch(e=>{console.error(e)})}),_defineProperty(this,"handleSearchNext",e=>{e.preventDefault(),e.stopPropagation();let t=!!e.key&&this.activeDescendant;if(e.key&&"Enter"!=e.key)return;let n=e.target.dataset.groupKey,r=this.getGroupByKey(n);return this.nodes.input.focus(),this.startSearchAsyncAndRenderGroup(r,"",{isNextRequest:!0,isKeyboardEvent:t}),!1}),_defineProperty(this,"renderMenuItem",(e,t,n)=>{let r,s=this.getGroupByKey(t),o=s.onGetDataKey(e);return s.onRenderMenuItem?(r=s.onRenderMenuItem(e,{groupKey:t,group:s,startSearch:this.startSearch,reset:this.reset}),r=v(r)):(r=document.createElement("li"),r.style.display="block",r.style["--webkit-appearance"]="none",r.innerText=e.toString()),r.id=_(),r.tabIndex=-1,y(r,z.LIST_ITEM),r.dataset.key=o,r.dataset.groupKey=t,r.setAttribute("role","option"),r.setAttribute("aria-selected","false"),r.dataset.isPlaceholder=n.isPlaceholder?"true":"false",r.dataset.testid=n.isPlaceholder?"placeholder":"",r.addEventListener("click",e=>{"A"===e.currentTarget.tagName&&this.reset()}),r}),_defineProperty(this,"insertMenuItemIntoGroup",(e,t)=>{this.getGroupByKey(t).nodes.items.appendChild(e)}),_defineProperty(this,"renderMenuItems",(e,t,n)=>{let r=(s=e.key,this.listbox.nodes.list.querySelectorAll("[data-type=".concat(f.LIST_ITEM,"][data-group-key=").concat(s,"]")));var s;const o=Array.isArray(t)?t.reduce((t,n,r)=>{const s=e.onGetDataKey(n);return-1===t.findIndex(t=>e.onGetDataKey(t)===s)&&t.push(n),t},[]):[];if(o.length>0&&0===r.length)for(const t of o)this.insertMenuItemIntoGroup(this.renderMenuItem(t,e.key,n),e.key);else if(o.length>0&&r.length>0){let t,s;for(t=0;t<=r.length-1;t++){const i=r[t],a=o[t];if(i&&a&&i.getAttribute("data-key")!=e.onGetDataKey(a)){let t=this.renderMenuItem(a,e.key,n);s||(s=t),i.replaceWith(t)}else i&&!a&&i.remove()}if(o.length>t)for(t=t;t<=o.length-1;t++){let r=this.renderMenuItem(o[t],e.key,n);s||(s=r),this.insertMenuItemIntoGroup(r,e.key)}s&&n.isNextRequest&&(n.isKeyboardEvent?this.setActiveDescendant(s):(this.setActiveDescendant(null),this.listbox.scrollToItem(s)))}}),_defineProperty(this,"destroy",()=>{this.nodes.node.removeEventListener("keydown",this.handleNodeKeyDown),this.nodes.input.removeEventListener("input",this.handleInputInputEventDebounced),this.nodes.input.removeEventListener("focus",this.handleInputFocus),document.removeEventListener("click",this.handleDocumentClick),this.nodes.spinner.remove(),this.nodes.style.remove(),this.listbox.destroy()});let{groups:n,disablePortal:r,useDistinctListboxGroups:s,onPosition:o}=t;this.options=t,this.nodes={},this.listbox=new V(e,{disablePortal:r,useDistinctListboxGroups:s,onPosition:o}),this.listbox.hide(),r&&e.appendChild(this.listbox.nodes.list),this.groups=Array.isArray(n)?n.filter(e=>!e.isDisabled):[],this.nodes.style=function(e){const t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML="[data-type='PORTAL'] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 9999;\n    width: 100%;\n    height: 100%;\n    transition: opacity 0.2s ease-out;\n    opacity: 0;\n    pointer-events: none;\n}\n\n[data-type='PORTAL_OVERLAY'] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.3);\n    opacity: 1;\n}\n\n[data-type='LIST'] {\n    position: absolute;\n    display: block;\n    width: 300px;\n    min-height: 0px;\n    max-height: 618px;\n    overflow-y: auto;\n    padding: 0;\n    border-radius: 8px;\n    box-shadow: 0 40px 40px 0 rgb(0 0 0 / 10%);\n    border: solid 1px #e4e4e4;\n    background-color: #fff;\n    color: #242424;\n    font-weight: 500;\n    opacity: 1;\n    transform: scale(0.95);\n    transform-origin: top;\n    transition: scale 0.3s cubic-bezier(0.4, 0.2, 0, 1);\n    scroll-padding-top: 45.6px;\n    /* TODO Bottom should be height of last item height? */\n    scroll-padding-bottom: 45.6px;\n}\n\n[data-type='LIST'].disabledPortal {\n    position: absolute;\n    z-index: 9999;\n}\n\n[data-type='ACTION_BUTTON'],\n[data-type='LIST_ITEM'] {\n    position: relative;\n}\n\n[data-type='ACTION_BUTTON'] {\n    background: #fafafa;\n    border-radius: 33px;\n    text-transform: uppercase;\n    color: #0088ff;\n    text-align: center;\n    padding: 6px 12px;\n    border: none;\n    overflow: hidden;\n    font-weight: bold;\n    font-size: 12px;\n    transform: translate3d(0, 0, 0);\n    cursor: pointer;\n}\n\n[data-type='LIST_ITEM']:hover {\n    text-decoration: none !important;\n}\n\n[data-type='LIST_ITEM'] {\n    color: black;\n    padding: 10px;\n    cursor: pointer;\n    min-height: 45px;\n    overflow: hidden;\n    border-bottom: 1px solid #f4f4f4;\n}\n\n[data-type='ACTION_BUTTON']:after {\n    z-index: 0 !important;\n}\n\n[data-type='ACTION_BUTTON']:after,\n[data-type='LIST_ITEM']:after {\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background-color: rgba(0, 136, 255, 0.1);\n    top: 0;\n    left: 0;\n    opacity: 0;\n    transition: opacity 150ms ease-out;\n    z-index: -1;\n    will-change: opacity;\n    cursor: pointer;\n}\n[data-type='ACTION_BUTTON'][aria-selected='true']:after,\n[data-type='ACTION_BUTTON']:hover:after,\n[data-type='LIST_ITEM'][aria-selected='true']:after,\n[data-type='LIST_ITEM']:hover:after {\n    opacity: 1;\n}\n\n[data-type='GROUP_TITLE'] {\n    color: #000;\n    font-size: 12px;\n    font-weight: bold;\n    text-transform: uppercase;\n\n    padding: 15px 10px 10px 10px;\n    position: sticky;\n    top: 0;\n    background: white;\n    /* border-bottom: 1px solid rgba(0,0,0,.2);*/\n    z-index: 9999;\n}\n\n@-webkit-keyframes rotating /* Safari and Chrome */ {\n    from {\n        -webkit-transform: rotate(0deg);\n        -o-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    to {\n        -webkit-transform: rotate(360deg);\n        -o-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n@keyframes rotating {\n    from {\n        -ms-transform: rotate(0deg);\n        -moz-transform: rotate(0deg);\n        -webkit-transform: rotate(0deg);\n        -o-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    to {\n        -ms-transform: rotate(360deg);\n        -moz-transform: rotate(360deg);\n        -webkit-transform: rotate(360deg);\n        -o-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n[data-type='SPINNER'] {\n    animation: rotating 1.2s linear infinite;\n    will-change: transform;\n    width: 14px;\n    height: 14px;\n    position: absolute;\n    display: inline;\n    margin-left: 12px;\n}\n\n[data-type='SPINNER'] svg {\n    display: inline;\n    width: 14px;\n    height: 14px;\n}\n\n[data-type='GROUP_FOOTER'] {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    padding: 15px 10px 15px;\n}\n\n.shz-web-visually-hidden {\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px;\n}\n",document.getElementsByTagName("head")[0].appendChild(t),t}(),this.nodes.spinner=function(){let e=document.createElement("div");return e.innerHTML='<svg\n    id="search-combo-spinner"\n    width="14"\n    height="14"\n    viewBox="0 0 14 14"\n    fill="none"\n    xmlns="http://www.w3.org/2000/svg"\n>\n    <path\n        d="M7 1.16669V3.50002"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M7 10.5V12.8333"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M2.87585 2.87585L4.52669 4.52669"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M9.47333 9.47333L11.1242 11.1242"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M1.16669 7H3.50002"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M10.5 7H12.8333"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M2.87585 11.1242L4.52669 9.47333"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n    <path\n        d="M9.47333 4.52669L11.1242 2.87585"\n        stroke="#0088FF"\n        stroke-width="2"\n        stroke-linecap="round"\n        stroke-linejoin="round"\n    />\n</svg>\n',e.style.display="none",document.getElementsByTagName("body")[0].appendChild(e),e}();let i=e.querySelector("input");i.id=_(),i.setAttribute("autocomplete","off"),i.setAttribute("aria-autocomplete","list"),i.setAttribute("aria-expanded","false"),i.setAttribute("role","combobox"),this.nodes.node=e,this.nodes.input=i;for(let e of this.groups)e.state=M(e,{startSearch:this.startSearch,onSearchNext:this.handleSearchNext,listbox:this.listbox,useDistinctListboxGroups:s});var a,l,d;s||i.setAttribute("aria-owns",this.listbox.id),this.nodes.node.addEventListener("keydown",this.handleNodeKeyDown),this.handleInputInputEventDebounced=(a=this.handleInputInputEvent,500,function(){var e=this,t=arguments,n=function(){d=null,a.apply(e,t)},r=l;clearTimeout(d),d=setTimeout(n,500),r&&a.apply(e,t)}),this.nodes.input.addEventListener("input",this.handleInputInputEventDebounced),this.nodes.input.addEventListener("focus",this.handleInputFocus),document.addEventListener("click",this.handleDocumentClick);let c=S();y(c,B.SUCCESS_ARIA_LIVE_REGION),c.setAttribute("role","region"),c.setAttribute("aria-live","polite"),c.classList.add("shz-web-visually-hidden"),this.nodes.ariaLiveRegion=c,this.listbox.nodes.list.appendChild(c);let h=[];for(let e of this.groups.filter(e=>e.immediate))h.push(this.startSearchAsyncAndRenderGroup(e,"string"==typeof e.immediate?e.immediate:this.nodes.input.value))}setActiveDescendant(e){this.activeDescendant&&(this.activeDescendant.setAttribute("aria-selected",!1),this.activeDescendant=null);let{all:t}=b(e,this.listbox.nodes.list);t.forEach(e=>e.setAttribute("aria-selected",!1)),e?(this.nodes.input.setAttribute("aria-activedescendant",e.id),this.activeDescendant=e,this.listbox.scrollToItem(e),e.setAttribute("aria-selected",!0)):this.nodes.input.setAttribute("aria-activedescendant",null)}}function U(e,t){return new Promise((n,r)=>{shz.app.getService("search").request("search",t?{next:t}:{query:e,pageSize:3,page:0},e=>{n(e)})})}function F(e,t={}){let n=shz.common.merge(t,{strings:shz.app.strings,langpath:shz.app.langpath,location:shz.common.getFrameInfo(location.pathname,shz.app.config),mobilemode:!!shz.app.mobilemode},!0),r=Handlebars.partials[e];return r?r(n):(console.error("Partial not found",e),"")}function H(e){return shz&&shz.app&&shz.app.strings&&shz.app.strings[e]||""}var K={key:"artists",title:()=>H("website_artists"),primaryActionButtonLabel:()=>H("website_showmore"),primaryActionButtonAriaLabel:()=>H("website_showmore_artists"),onSearchAsync:(e,t)=>U(e,t),onGetDataKey:e=>e.id||e.key,onParseMenuData:e=>e&&e.artists&&e.artists.hits&&Array.isArray(e.artists.hits)?e.artists.hits:B.EMPTY,onParseNextParams:e=>!!(e&&e.artists&&e.artists.next)&&e.artists.next,onParseNextData:(e,t)=>{const n=e&&e.artists&&e.artists.hits&&Array.isArray(e.artists.hits)?e.artists.hits:[];return _objectSpread(_objectSpread({},t),{},{artists:_objectSpread(_objectSpread({},t.artists),{},{hits:[...t.artists.hits,...n]})})},onRenderMenuItem:e=>Handlebars.partials["partials.search.artist-menu-item"](e),states:{[B.EMPTY]:()=>{},[B.NO_RESULTS]:()=>{},[B.SUCCESS_ARIA_LIVE_REGION]:e=>F("partials.search.artist-success-aria-live-region-state",e)}},q={key:"songs",title:()=>H("website_songs"),primaryActionButtonLabel:()=>H("website_showmore"),primaryActionButtonAriaLabel:()=>H("website_showmore_songs"),onSearchAsync:(e,t)=>U(e,t),onGetDataKey:e=>e.key,onParseNextParams:e=>!!(e&&e.tracks&&e.tracks.next)&&e.tracks.next,onParseMenuData:(e,{query:t})=>{const n=e&&e.tracks&&e.tracks.hits&&Array.isArray(e.tracks.hits)?e.tracks.hits:[],r=e&&e.artists&&e.artists.hits&&Array.isArray(e.artists.hits)?e.artists.hits:[];return 0===n.length&&0===r.length&&0===t.length?B.EMPTY:0===n.length&&0===r.length&&t.length>0?B.NO_RESULTS:0===n.length&&t.length>0?B.EMPTY:n},onParseNextData:(e,t)=>{const n=e&&e.tracks&&e.tracks.hits&&Array.isArray(e.tracks.hits)?e.tracks.hits:[];return _objectSpread(_objectSpread({},t),{},{tracks:_objectSpread(_objectSpread({},t.tracks),{},{hits:[...t.tracks.hits,...n]})})},onRenderMenuItem:e=>F("partials.search.track-menu-item",e),states:{[B.EMPTY]:()=>{},[B.NO_RESULTS]:e=>{let t=e||{};return t.query=t.query?'"'.concat(t.query,'"'):"",F("partials.search.no-results-state",t)},[B.SUCCESS_ARIA_LIVE_REGION]:e=>F("partials.search.track-success-aria-live-region-state",e)}},W={key:"recent",title:()=>H("website_search_recent"),immediate:!0,onSearchAsync:(e,t,n)=>"string"==typeof e&&e.length>0?Promise.resolve(B.HIDDEN):function(){try{let e=shz.app.storage.local.get("search.recents");return e=JSON.parse(e||"[]"),Promise.resolve(e)}catch(e){return console.error(e),Promise.reject(null)}}(),onParseMenuData:e=>{if(e===B.HIDDEN)return e;const t=e.reduce((e,t,n)=>(e.push({key:n,value:t}),e),[]);return 0===t.length?B.EMPTY:t},onGetDataKey:e=>e.key,onRenderMenuItem:(e,{startSearch:t})=>{const n=document.createElement("a"),r=Handlebars.partials["partials.search.recent-menu-item"](e);n.innerHTML=r,n.style.cssText="\n            display:flex;\n            align-items: center;\n        ";const s=n=>{n.stopImmediatePropagation(),n.key&&"Enter"!=n.key||t(e.value)};return n.addEventListener("click",s),n.addEventListener("keydown",s),n},onMenuItemClick:e=>{console.log(e)},onRenderActionButton:(e,{startSearch:t})=>{const n=document.createElement("button");n.type="button",n.innerHTML="Clear Recent Searches";let r=e=>{e.stopImmediatePropagation(),e.key&&"Enter"!=e.key||(shz.storage.local.remove("search.recents"),shz.ux.fire("remove-search-recents",!0),t(""))};return n.addEventListener("click",r),n.addEventListener("keydown",r),n},states:{[B.EMPTY]:e=>{let t=shz.app.strings.website_search_no_searches;return t=t.toLowerCase().replace(/^\w/,e=>e.toUpperCase()),F("partials.search.recent-empty-state",_objectSpread(_objectSpread({},e),{},{title:t}))}}};const Y={start:e=>{let t=shz.common.namespace("frames.search.results"),n=new G(e,{groups:[W,q,K],onQuery:t.Model.addToPreviousSearchCookie,disablePortal:!0,useDistinctListboxGroups:!0,onPosition:(e,t)=>{let n=[".footerstatic .active-promo .shz-frame-promotionbanner",".footerstatic .shz-frame-ux-playerbar.show",".shz-frame-webrec-floatingbutton .callout-container"].reduce((e,t)=>{let n=document.querySelector(t);return e+(n?n.clientHeight:0)},0);n+=30,e.list.style.maxHeight="calc(100vh - ".concat(t.top,"px - ").concat(n,"px)")}});n.listbox.nodes.portal.nodes.overlay.style.top="var(--header-height)";let r=e.querySelector('button[type="submit"]');return r&&(r.type="button",r.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation(),n.startSearch(n.nodes.input.value)})),n},featureFlagStart:(e,t)=>new G(e,{groups:t})},X=[{name:"chromebook",regex:"[^a-zA-Z]CrOS|Chromebook",type:"desktop"},{name:"iphone",regex:"iPhone",type:"phone"},{name:"ipad",regex:"iPad",type:"tablet"},{name:"ipad",test:function(e){return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},type:"tablet"},{name:"ipod",regex:"iPod",type:"phone"},{name:"windowsPhone",regex:"Windows Phone|Windows Mobile",type:"phone"},{name:"windowsTablet",regex:"Windows(.*)?(Touch|Tablet)",type:"tablet"},{name:"androidPhone",regex:"Android(.*)?Mobile",type:"phone"},{name:"androidTablet",regex:"Android",type:"tablet"},{name:"tablet",regex:"Tablet",type:"tablet"}],Z=[{name:"chromeos",regex:"[^a-zA-Z]CrOS|Chromebook",regexVer:"x86_64|armv7l|aarch64"},{name:"ios",regex:"iPhone|iPad|iPod",regexVer:"OS"},{name:"win",regex:"Win|Windows Phone",regexVer:"NT|OS|Windows Phone|Windows Mobile"},{name:"android",regex:"Android",regexVer:"Android"},{name:"mac",regex:"Macintosh|Apple Mac",regexVer:"OS X|OS_X"},{name:"linux",regex:"Linux",regexVer:"rv|Linux|armv7l"},{name:"amazon",regex:"Silk",regexVer:"Silk"}],Q=[{name:"ie",regex:"MSIE|Trident",regexVer:"rv|MSIE|IEMobile"},{name:"edge",regex:"Edg|Edge",regexVer:"MSIE|rv|IEMobile|Edg|Edge|EdgiOS|EdgA"},{name:"opera",regex:"OPR|Opera",regexVer:"OPR|Version"},{name:"miuibrowser",regex:"XiaoMi/MiuiBrowser",regexVer:"MiuiBrowser"},{name:"samsungbrowser",regex:"SamsungBrowser",regexVer:"SamsungBrowser"},{name:"chrome",regex:"Chrome|CrMo|CriOS",regexVer:"Chrome|CrMo|CriOS"},{name:"firefox",regex:"Firefox|FxiOS",regexVer:"Firefox|FxiOS"},{name:"safari",regex:"Safari",regexVer:"Version|Safari"},{name:"BlackBerry",regex:"CLDC",regexVer:"CLDC"}];function J(e,t){let n;return t.some(t=>{let r=Object.assign({},t);if(r.regex&&new RegExp(r.regex,"i").test(e)&&(n=r,r.regexVer)){let t=new RegExp("(".concat(r.regexVer,")[- /:;_]([\\d._]+)"),"i"),s=e.match(t),o=(s&&s[2]||"").replace(/_/g,"."),i="";o?(s=o.split("."),s.forEach((e,t)=>{i+=0===t?e+".":e})):i="0",n=Object.assign(n,{fullversion:o,version:parseFloat(i)})}return r.test&&(n=r.test(e)?n||r:null),n}),n||{name:""}}function $(e=""){return!e||-1!==e.search(/googlebot|Mediapartners|AdsBot-Google|Viber|Pinterestbot|WhatsApp|yahoo|bingbot|Applebot|baiduspider|yandex|yeti|yodaobot|viber|gigabot|Amazon-Route53-Health-Check-Service|Slackbot-LinkExpanding|ia_archiver|facebookexternalhit|rogerbot|twitterbot|LinkedInBot|developers\.google\.com|googleweblight/i)}function ee(e,t){var n,r,s=t;for(e=e.split("."),r=0;r<e.length&&(n=s&&"object"==typeof s&&e[r]in s);r++)s=s[e[r]];return n&&s||null}class te extends class{constructor(e){_defineProperty(this,"_controlTypes",{urloverride(e,t){let n=e.urloverride||t,r=this.urlparams[n];return void 0!==r?"true"==r||"1"==r:null},enabled:e=>!1!==e,platform(e){let t,n=this.platformProps;return t=Object.keys(e).every(t=>{let r;if(void 0!==n[t]){let s,o=e[t],i=parseFloat(o);r=!isNaN(i)&&(s=function(e){let t;return-1!==e.search(/(VerNum|_ver)$/)?t=n[e]:"boolean"==typeof n[e]&&(t=n["".concat(e,"_ver")]),!isNaN(t)&&t}(t))?s>=parseFloat(o):n[t]==(isNaN(i)?o:i)}return!!r}),t},countrylist(e){let t;return Array.isArray(e)?t=e.includes(this.country):(e.enable&&(t=e.enable.includes(this.country)),e.disable&&(t=!e.disable.includes(this.country))),t},phasedrolloutpc(e=100){const{inid:t}=this.inid;return(t?murmurhash3_32_gc(t)%100:0)<e},environment(e){let t=this.environment;return Array.isArray(e)?e.includes(t):Object.keys(e).every(n=>n==t&&e[n])},duration(e){let t=Date.now(),n=!e.startdate||e.startdate<t;return n=n&&(!e.enddate||e.enddate>t),n},dependent(e){let t;return t=Array.isArray(e)?e.some(e=>this.isEnabled(e)):"object"==typeof e?Object.keys(e).every(t=>this.isEnabled(t)==e[t]):this.isEnabled(e),t},loginstate(e){return e==!!this.getLoginState()},custom(e,t){if(/comment\d{0,2}$/.test(t))return!0;let n=this._isCustomControl(t);return"function"==typeof n&&n(e)}});let{controlConfigs:t={},controlStates:n={}}=e,{environments:r=[],customModules:s={},getLoginState:o=(()=>!1)}=t,{useragent:i,platformProps:a={},urlparams:l={},country:d="",environment:c="",inid:h=""}=n;a=_objectSpread(_objectSpread({},i&&function(e,t){let n=Object.assign({bot:$(e)},function(e){let{name:t="",type:n="desktop"}=J(e,X),r={};return X.forEach(e=>{r[e.name]=e.name==t}),Object.assign(r,{deviceType:n,deviceName:t,isTablet:"tablet"==n,isPhone:"phone"==n,isMobile:"desktop"!=n,isDesktop:"desktop"==n})}(e),function(e){let{name:t,fullversion:n,version:r}=J(e,Z),s={};return Z.forEach(e=>{s[e.name]=e.name==t}),Object.assign(s,{platform:["ios","win","android"].includes(t)?t:"desktop",ampPlatform:(s.ios?"iphone":s.android&&"android")||"web",osName:t,osVerNum:r,osVer:n,["".concat(t,"_ver")]:r}),s}(e),function(e){let{name:t,fullversion:n,version:r}=J(e,Q),s={browserName:t,browserVerNum:r,browserVer:n,["".concat(t,"_ver")]:r};return Q.forEach(e=>{s[e.name]=e.name==t}),s}(e),function(e){let t=e.match(/(nightwatch);port=(\d+)/);return t?{testtype:t[1],testdomain:"http://localhost:".concat(t[2])}:{}}(e));if(function(e){let t="unknown",{osName:n,deviceType:r,osVerNum:s}=e;n&&(t="".concat(r,"_").concat(n)),e.deviceplatform=t}(n),t){let e={};Object.keys(n).forEach(t=>{n[t]&&(e[t]=n[t])}),n=e}return n}(i)||{}),a),Object.assign(this,{environments:r,customModules:s,getLoginState:o,platformProps:a,environment:c,country:d,inid:h,urlparams:l})}addCustomModules(e={}){Object.keys(e).forEach(t=>{this.customModules[t]=e[t]})}_isSimpleControl(e){return["phasedrolloutpc","duration","loginstate","countrylist","custom","dependent","enabled","loginstate"].includes(e)}_getControlType(e){return this._isSimpleControl(e)?e:Object.keys(this.platformProps).includes(e)?"platform":this.environments.includes(e)?"environment":!!this._isCustomControl(e)&&"custom"}_isCustomControl(e){let t=e.split("."),n=ee(t[0],this.customModules);return t[1]&&n?n[t[1]]:n}_getDependents(e=""){return"string"==typeof e?[e]:Array.isArray(e)?e:Object.keys(e)}}{constructor(e={},t){super(t),_defineProperty(this,"_cached",{}),_defineProperty(this,"_canChange",["loginstate","custom"]),_defineProperty(this,"_reserved",["urloverride","data","_disableCache"]),this.config=e.featureflags||{}}isEnabled(e){if(this._cached[e])return this._cached[e].enabled;let t=ee(e,this.config);if(!t||function(e){for(var t in e)if(e.hasOwnProperty(t))return 0;return 1}(t))return!1;let n=this._controlTypes.urloverride.call(this,t,e);return null!==n?(this._cached[e]={enabled:n},n):(n=this._isEnabled(t,e),this._isCachable(e)&&(this._cached[e]={enabled:n}),n)}getFlag(e){let t=this.isEnabled(e),n=(ee(e,this.config)||{}).data;return n&&!this._isDataOnlyNode(n)&&(n=this._getData(n,e)),{enabled:t,data:n}}setState(e,t){this._cached[e]={enabled:t}}getControlTypes(){return Object.keys(this._controlTypes)}getReport(e,t={},n={}){let r=e?ee(e,this.config):this.config;return Object.keys(r).sort((e,t)=>e.toLowerCase()<t.toLowerCase()?-1:1).reduce((n,r)=>{let s=e?e+"."+r:r,o=this._hasControlProperties(s);if(o){let{enabled:e,data:r}=this.getFlag(s);if(t.minimal)n[s]={summary:e};else{let t=this._getPropReport(o,s);t.summary=e,r&&(t.data=r),n[s]=t}}else this.getReport(s,t,n);return n},n),console.log(n),n}_evalControl(e,t,n){if(this._reserved.includes(e))return!0;let r=this._controlTypes[e];return r?r.call(this,t,n):this._controlTypes.custom.call(this,t,e,n)}_isEnabled(e,t){let n;if(Array.isArray(e))n=e.some(e=>this._isEnabled(e,t));else{if("object"!=typeof e)return this._isEnabledProp(e,!0,t);n=Object.keys(e).every(n=>this._isEnabledProp(n,e[n],t))}return n}_getData(e,t){let n;if(Array.isArray(e))e.some(e=>(n=this._getData(e,t),n));else{let r=Object.keys(e).every(r=>{let s;return(s="data"==r)?n=e[r]:(s=this._isEnabledProp(r,e[r],t),n=s&&this._getData(e[r],t)),s});n=r&&n}return n}_isDataOnlyNode(e){let t=e.data;return t||Array.isArray(e)||"object"!=typeof e||(t=Object.keys(e).every(e=>!this._getControlType(e))),t}_isEnabledProp(e,t,n){let r,s="!"===e[0];if(s&&(e=e.slice(1)),this._isReserved(e))return!0;let o=this._getControlType(e);return this._isSimpleControl(o)?r=this._evalControl(e,t,n):"object"==typeof t?(r=!o||this._evalControl(o,{[e]:!0},n),r=r&&this._isEnabled(t,n)):r=!o||this._evalControl(o,{[e]:t},n),s?!r:r}_isReserved(e){return this._reserved.includes(e)||"_"==e[0]}_isCachable(e){if(this._cached[e])return!0;let t=ee(e,this.config);return!t._disableCache&&!Object.keys(t).some(e=>{let n;return n="dependent"==e?this._getDependents(t[e]).some(e=>!this._isCachable(e)):this._canChange.includes(this._getControlType(e)),n})}_hasControlProperties(e){let t=ee(e,this.config);return Object.keys(t).some(e=>this._reserved.includes(e)||this._getControlType(e)||Array.isArray(t[e]))?t:null}_clearCache(){this._cached={}}_getPropReport(e,t){let n={};if(Array.isArray(e))return n.OR={config:[]},e.forEach(e=>{let r=this._getPropReport(e,t);n.OR.enabled=n.OR.enabled||!!r.enabled,n.OR.config.push(r)}),n.OR;if("object"==typeof e){let r=!0;return Object.keys(e).forEach(s=>{if(this._isReserved(s))return;if(!this._getControlType(s))return void(n[s]=this._getPropReport(e[s],t));let o=this._isEnabledProp(s,e[s],t);r=r&&o,n[s]={enabled:!!o,config:e[s]}}),n.enabled=r,n}return n[e]=this._isEnabledProp(e,!0,t),n}_testModifyApp(e){Object.assign(this.app,e),this.config=e.config.featureflags||{}}}let ne="undefined"!=typeof fetch?fetch:require("node-fetch");var re=Object.freeze({__proto__:null,configureFeatures:function(e,t,n){let{url:r,config:s={featureflags:{}}}=e;function o(e){let r=new te(s,t);n({featureflags:r,config:s,error:e})}if(r)try{ne(r).then(e=>e.json()).then(e=>{let r=new te(e,t);n({featureflags:r,config:e})}).catch(e=>{o(e)})}catch(e){o(e)}else o()}});shz.common.setWithNamespace("npmBridge",shz,{Stats:r,Utils:g,UserAgent:u,Search:Y,FeatureFlags:re})}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var Cookies=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"set",value:function(e,n,t){var i;i=[e+"="+n,"expires="+((t=t||{}).expires||new Date(Date.now()+(t.maxAge||15552e6))).toGMTString(),"path=/","samesite="+(t.samesite?t.samesite:"Strict")],t.domain&&i.push("domain="+t.domain),document.cookie=i.join(";")}},{key:"get",value:function(e){var n,t;return n=e+"=",document.cookie.split(";").some((function(e){if(-1!=(e=e.trim()).indexOf(n))return t=e.substring(n.length,e.length),!0})),t||""}},{key:"remove",value:function(e){document.cookie=e+'=;  expires=Thu, 01 Jan 1970 00:00:00 GMT";'}}]),e}();shz.Cookies=Cookies;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=_superPropBase(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,o=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var shzError=shz.common.Error,BaseStorage=function(){function e(t){_classCallCheck(this,e),_defineProperty(this,"version",2),this.storage=t}return _createClass(e,[{key:"parseKey",value:function(e){if(!e)throw new shzError({type:Error.INVALID_PARAM,message:"Missing key"});var t=e.split(".");return{key:t.shift(),subkey:t.join(".")}}},{key:"get",value:function(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.parseKey(e),i=n.key,s=n.subkey,a=this.storage.getItem(i);if(a){try{a=JSON.parse(a)}catch(e){}this.isExpired(a)?this.remove(i):(r=s?shz.common.namespaceExists(s,a.data||a):void 0!==a.data?a.data:a,o.includeExpiry&&(r={value:r,expiry:a.expiry}))}return r||t}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.parseKey(e),n=o.key,i=o.subkey;try{var s=JSON.parse(this.storage.getItem(n)||"{}");r&&(s.expires=r),i?(s.data=s.data||{},shz.common.setWithNamespace(i,s.data,t)):s.data=t,this.storage.setItem(n,JSON.stringify(s))}catch(e){}}},{key:"remove",value:function(e){var t=this.parseKey(e),r=t.key,o=t.subkey;if(o){var n=this.get(r);if(n){var i=o.split(".");if(1==i.length)delete n[o];else{var s=i.pop();delete shz.common.namespaceExists(i.join("."),n)[s]}}this.set(r,n)}else this.storage.removeItem(r)}},{key:"clear",value:function(){this.storage.clear()}},{key:"isExpired",value:function(e){return!1}},{key:"_forEach",value:function(e){for(var t=0;t<this.storage.length;t++)e(this.storage.key(t))}}]),e}(),LocalStorage=function(e){_inherits(r,BaseStorage);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this,window.localStorage)).checkState(),e}return _createClass(r,[{key:"checkState",value:function(){var e=this;if(this.get("_checkstate"))this._forEach((function(t){e.get(t)}));else{var t=["amconnect"],r={};["am-cxn","inid","webId","inapp"].forEach((function(o,n){var i=e.get(o,null,{version:1});null!==i&&(r[t[n]||o]=i)})),this.clear(),Object.keys(r).forEach((function(t){e.set(t,r[t])}))}this.set("_checkstate",1)}},{key:"isExpired",value:function(e){return e.expires&&e.expires<Date.now()}},{key:"set",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15552e6;_get(_getPrototypeOf(r.prototype),"set",this).call(this,e,t,Date.now()+o)}}]),r}(),SessionStorage=function(e){_inherits(r,BaseStorage);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.call(this,window.sessionStorage)}return _createClass(r,[{key:"set",value:function(e,t){_get(_getPrototypeOf(r.prototype),"set",this).call(this,e,t)}}]),r}(),ServerStorage=function(e){_inherits(r,BaseStorage);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),_defineProperty(_assertThisInitialized(e=t.call(this)),"_cache",{}),e.storage=_assertThisInitialized(e),e}return _createClass(r,[{key:"getItem",value:function(e){return this._cache[e]}},{key:"setItem",value:function(e,t){this._cache[e]=t}},{key:"clear",value:function(){this._cache={}}},{key:"removeItem",value:function(e){delete _cache[e]}}]),r}(),Storage=function e(){_classCallCheck(this,e),"undefined"==typeof window?this.local=this.session=new ServerStorage:(this.local=new LocalStorage,this.session=new SessionStorage)};shz.Storage=Storage,shz.storage=new Storage;function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){var e=shz.npmBridge.UserAgent,t=function(){function t(e){_classCallCheck(this,t),_defineProperty(this,"osNative",{}),e=e||"",this.platformProps=this._evaluatePlatform(e),this._evaluateEvents(this.platformProps),shz.bridge.on("aboutBridge",{cb:this._setVersion,scope:this,listenOnce:!0}),_extends(this,this.platformProps)}return _createClass(t,[{key:"_evaluatePlatform",value:function(n){var o,r,i=!1,s=!1,a="server",p="development";if("undefined"!=typeof window&&void 0!==window.document){var u=shz.common.urlParams(document.location.href,!0),d=u.device,c=u.preview;i=!!(i=t.isInApp()),d&&(n=e.getEmulationUserAgent(d)||n),o=!c&&shz.common.isDevServer()&&"undefined"!=typeof navigator&&"MacIntel"==navigator.platform&&this._getClientWidth()<600;var v=document.location.hostname.match(/^((cisd|betasd|dev|www).shazam.(apple.)?com|localhost)/);p="cisd"==(a=v&&v[2]||"dev")||"betasd"==a?"ci":"www"==a?"prod":p,r=this._supportsPassive(),s=!!window.PublicKeyCredential}return this.useragent=n,_extends({inApp:i,desktopEmulator:o,supportsPassiveListening:r,webauthn:s,hostEnv:a,storageEnv:p},e.getPlatformInfo(n))}},{key:"_evaluateEvents",value:function(e){var t=e.ios,n=e.ios_ver,o=void 0===n?0:n,r=e.android,i=e.android_ver,s=void 0===i?0:i,a=e.isMobile,p=e.desktopEmulator;this.overflowScroll=o>=6||s>=4.3||!a||0,"undefined"==typeof window||r||p||t&&!(o<13)||(this.pointerEvents="onpointerdown"in window)}},{key:"_getClientWidth",value:function(){}},{key:"_setVersion",value:function(e){var t,n=e.data||{};this.osNative=this.platformProps.osNative=n.os||{},this.appVer=this.platformProps.appVer=n.client&&((t=n.client.version||"")?t=(t=(t=t.replace(/[;_]/g,".")).replace(/[a-zA-Z]/g,"")).replace(/\.$/,""):t)}},{key:"_supportsPassive",value:function(){var e=!1;if("undefined"!=typeof window)try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}},{key:"getEventsOfType",value:function(e,t){var n,o=this.ios,r=this.android,i=this.pointerEvents;switch(e){case"pointerdown":n=i?{events:["pointerdown"]}:{events:o||r?["touchstart"]:["touchstart","pointerdown","mousedown"]};break;case"pointermove":n=i?{events:["pointermove"]}:{events:o||r?["touchmove"]:["touchmove","pointermove","mousemove"]};break;case"pointerup":n=i?{events:["pointerup"]}:{events:o||r?["touchend"]:["touchend","pointerup","mouseup"]};break;case"pointercancel":n=i?{events:["pointercancel"]}:{events:[]}}return t&&t.forEach((function(e){n.events.push(e)})),n}},{key:"isWebPSupported",value:function(){if(void 0===this.canUseWebP){var e=this.browserName,t=this.browserVerNum,n=this.osName,o=this.osVerNum;this.canUseWebP="chrome"===e&&t>32||"safari"===e&&t>=14&&o>=14&&"ios"===n||"safari"===e&&t>=14&&o>=11&&"mac"===n||"edge"===e&&t>18||"opera"===e&&t>19}return this.canUseWebP}},{key:"appverCompare",value:function(e,t){var n=this.appVer;return n&&t&&this.platformProps[e]?shz.common.versionCompare(t,n):1}},{key:"isInvalidEnv",value:function(e){e=e||{};var t=this.platformProps,n=e.device||{},o=n.allowIPad,r=n.androidMinApiLevel||21,i=n.iosMinVer||10,s=n.appMinVer||{android:"7.3.0"},a=t.ipad&&!o,p=!a&&(t.android&&-1==this.appverCompare("android",s.android)||t.ios&&-1==this.appverCompare("ios",s.ios)),u=!a&&(t.android&&t.osNative.APILevel<r||t.ios&&i&&t.osVerNum<i);return(a||p||u)&&{type:a?"unsupported":u?"osupgrade":"appupgrade"}}}]),t}();t.isInApp=function(){return window.localStorage.getItem("inapp")||-1!==document.referrer.search(/app.shazam.com/)},shz.Supports=t}();!function(){var e,t=new shz.common.Datasync,a=new function(){var a=this,n={aboutBridge:function(e){var t,s=[];for(t in n)s.push(t);a.message({type:e.type,data:{supportedCommands:s}}),a.command({cmd:{type:"context",data:{}}})},sharesheet:function(e,t){if((t=t||{}).punt)t.punt(e.data,t);else{var a="/share";t&&t.screenname&&(a+="/"+t.screenname),shz.ux.popup({href:a,takeover:!0,mvargs:{share:e.data,viber:t.viber}})}},newWebView:function(e){try{var t=e.data.url;window.open(e.data.url,"_blank").focus()}catch(e){window.parent.location.href=t}},trackResult:function(e,t){var a=t&&t.path||"/track/"+e.data.id,n=shz.app.langpath+a;shz.frames&&shz.frames.track?shz.app.navigate({href:n,pushHistory:!0}):window.parent.location.href=n},context:function(e){a.message({type:e.type,data:{}})},isSchemeSupported:function(e){var t=e.data.scheme,n=0==t.indexOf("http")?"supported":"unsupported";a.message({type:e.type,data:{supported:n,scheme:t}})},startIntents:function(e){(e.data.intents||[]).some((function(e){if(0==e.indexOf("http"))return window.open(e),!0}))}};a.command=function(t){!e&&n[t.cmd.type]&&n[t.cmd.type](t.cmd,t.extraparams)},a.message=function(a){e||t.set("NativeBridge:message",a)},t.get("NativeBridge:command",{cb:a.command,scope:a}),shz.Supports.isInApp()||setTimeout((function(){!e&&a.command({cmd:{type:"aboutBridge",data:{}}})}),0)};shz.stubBridge=a,shz.NativeBridge=function(){var n,s=this;shz.common.merge(s,t),t.get("NativeBridge:command",(function(t){if(e)if(shz.app.location.pathname.indexOf("/abtest/")>=0||"sendBeacon"!=t.cmd.type||!shz.app.supports.android||n)try{WebViewJavascriptBridge.sendMessage(JSON.stringify(t.cmd))}catch(e){console.log(e)}else s.onMessage({type:t.cmd.type,error:shz.common.Error.UNSUPPORTED,data:t})})),s.onMessage=function(s){var r=s;try{"string"==typeof s&&(r=JSON.parse(s)),"aboutBridge"==r.type?(e=shz.bridge.isNative=!0,t.remove("NativeBridge:command",a.command,a),WebViewJavascriptBridge.sendMessage(JSON.stringify({type:"context",data:{}}))):"context"==r.type&&(n=r)}catch(e){console.log("NB parse exception:",s,e),r={error:shz.common.Error.SERVICE,data:s,type:""}}t&&t.set("NativeBridge:message",r)},s.onBridgeReady=function(){if(!s.ready){s.ready=!0;try{WebViewJavascriptBridge.setMessageHandler(s.onMessage)}catch(e){}WebViewJavascriptBridge&&WebViewJavascriptBridge.sendMessage(JSON.stringify({type:"aboutBridge",data:{}}))}},document.addEventListener("WebViewJavascriptBridgeReady",s.onBridgeReady)}}();!function(){var e,o,r=shz.common.namespace("bridge"),t={},n=[],c=new shz.common.Datasync;function s(r,t){o&&-1!==o.supportedCommands.indexOf(r.type)?e.set("NativeBridge:command",{cmd:r,extraparams:t}):o?setTimeout((function(){a(shz.common.merge({data:null,error:shz.common.Error.UNSUPPORTED},r))}),0):n.push(r)}function a(e){e.error||c.set(e.type,e);var r=e.responseType||e.type,a=t[r]||[],m=a.length;if("aboutBridge"==e.type)for(o=e.data;n.length;)s(n.shift());(t[r]||[]).forEach((function(o){for(;m;){o=a[m-1],a.keepAlive||a.splice(m-1,1);try{o.cb.call(o.scope,e,e.error)}catch(e){}m--}}))}(e=new shz.NativeBridge).get("NativeBridge:message",a),shz.common.merge(r,{request:function(e,o,r){var n=e.responseType||e.type,c=t[n]=t[n]||[];"function"==typeof o&&(o={cb:o}),!o||c.some((function(e){return e.cb==o.cb&&e.scope==o.scope}))||c.push(o),s(e,r)},on:c.get,remove:c.remove})}();!function(e){var n="undefined"==typeof window?global:window,t=(n.shz=n.shz||{},n.document),s={},c={},o={};function i(e,n,s){var o=this,i=t.head||t.getElementsByTagName("head")[0]||t.documentElement,l=shz.app.supports.ie?/complete/:/loaded|complete/;o.readyState&&!l.test(o.readyState)||(o.onload=o.onreadystatechange=null,i&&o.parentNode&&i.removeChild(o),o=void 0,function(e,n){var t,s,o,i=window[e.replace(/[^a-z,A-Z,0-9]/g,"")],a=i&&i.depends,l=[];if(a){for(o=(t=a.files||[]).length;o--;)0==(s=t[o]).indexOf("/")&&(t[o]=r(s)),c[t[o]]&&t.splice(o,1);t.length?(t.forEach((function(e){e.match(/\.css$/)?function(e){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),n.addEventListener("load",(function t(){c[e]=1,n.removeEventListener("load",t)})),document.getElementsByTagName("head")[0].appendChild(n)}(e):l.push(e)})),f(l,{success:function(e){e.forEach((function(e){c[e]=1})),a.cb&&a.cb(),n()}.bind(null,l),failure:function(){n()}})):(a.cb&&a.cb(),n())}else n()}(n,a.bind(o,s,e)))}function r(e){var n="src"==shz.version;return-1==e.indexOf(".")&&(e=(e=n?e:e+"/bundle.js").replace(/\/\//g,"/")),n?"/combo/"+shz.version+"?"+e:"/builds/"+shz.version+e}function a(e,n){o[e]&&o[e].forEach((function(t){try{t&&t.success(),n.forEach((function(e){s[e]=1}))}catch(n){try{t&&t.failure()}catch(e){}console.log("service call exception "+e),console.log(n)}})),delete o[e]}function l(e){o[e]&&o[e].forEach((function(e){try{e&&e.failure()}catch(e){}})),delete o[e]}function u(e,n){var c,r,a=function(e){var n,t=[];if(0==e.indexOf("combo/")){for(n=(t=e.split("?").pop().split("&")).length;n--;)s[t[n]]&&t.splice(n,1);e="/combo/"+shz.version+"/?"+t.join("&")}else e&&t.push(e);return{files:t,url:e}}(e),u=a.files,f=t.head||t.getElementsByTagName("head")[0]||t.documentElement;if(u.length)c=e.replace(/^\/secure/,""),e=a.url,o[e]?n&&-1==o[e].indexOf(n)&&o[e].push(n):(o[e]=[],n&&o[e].push(n),(r=function(){var e=t.createElement("script");return e.async="async",e.type="text/javascript",e}()).onload=r.onreadystatechange=i.bind(r,u,c,e),r.onerror=l.bind(r,e),r.src=e,f.insertBefore(r,f.firstChild));else try{n&&n.success&&n.success()}catch(n){console.log("service call exception "+e),console.log(n)}}function f(e,n){if("string"==typeof e)u(e,n);else{var t=0,s=e.length;!function c(){t<s?f(e[t++],{success:c,failure:function(){n&&n.failure&&n.failure()}}):n&&n.success&&n.success()}()}}var d=shz.common.namespace("script");shz.common.merge(d,{load:f,loadjs:function(e,n){f(["src"==shz.version?"/combo/"+shz.version+"?"+e:"/builds/"+shz.version+"/"+e],n)},getDepUrl:r})}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Handlebars.registerHelper("ifequal",(function(){var e,r,n,t,a;if(arguments.length<3)throw new Error("Handlebars Helper equal needs 2 parameters");for(r=arguments[0],t=(n=arguments[arguments.length-1]).hash&&"not"==n.hash.op,e=1;e<arguments.length-1&&!(a=r==arguments[e]);e++);return a&&!t||!a&&t?!n.fn||n.fn(this):!!n.inverse&&n.inverse(this)})),Handlebars.registerHelper({eq:function(e,r){return e===r},ne:function(e,r){return e!==r},lt:function(e,r){return e<r},gt:function(e,r){return e>r},lte:function(e,r){return e<=r},gte:function(e,r){return e>=r},and:function(){var e,r=arguments[arguments.length-1];for(e=0;e<arguments.length-1;e++)if(!arguments[e])return!!r.inverse&&r.inverse(this);return!r.fn||r.fn(this)},not:function(e){var r=arguments[arguments.length-1];return e?!!r.inverse&&r.inverse(this):!r.fn||r.fn(this)},or:function(){var e,r=arguments[arguments.length-1];for(e=0;e<arguments.length-1;e++)if(arguments[e])return!r.fn||r.fn(this);return!!r.inverse&&r.inverse(this)},exists:function(e){return!!e},concat:function(){var e=Array.prototype.slice.call(arguments,0);return e.pop(),e.join("")}}),Handlebars.registerHelper("firstValue",(function(){var e,r=arguments[arguments.length-1];for(e=0;e<arguments.length-1;e++)if(arguments[e])return arguments[e];return!!r.inverse&&r.inverse(this)})),Handlebars.registerHelper("atindex",(function(e){if(arguments.length<3)throw new Error("Handlebars Helper eachindex needs 2 parameters");var r=arguments[0],n=arguments[arguments.length-1],t=arguments[1],a=arguments[2],s=r&&r[t]?r[t]:void 0===a?{}:a;return"object"==_typeof(s)&&n.fn?n.fn(s):s})),Handlebars.registerHelper("tostring",(function(){if(arguments.length<1)throw new Error("Handlebars Helper eachindex needs 2 parameters");var e=arguments[0];return JSON.stringify(e)})),Handlebars.registerHelper("encodeURIComponent",(function(){return encodeURIComponent(arguments[0])})),Handlebars.registerHelper("lowercase",(function(){return arguments[0]?arguments[0].toLowerCase():arguments[0]})),Handlebars.registerHelper("uppercase",(function(){return arguments[0]?arguments[0].toUpperCase():arguments[0]})),Handlebars.registerHelper("csskey",(function(){return arguments[0].replace(/\./g,"_")})),Handlebars.registerHelper("formatdate",(function(){if(arguments.length<2)throw new Error("Handlebars Helper dateformat needs 2 parameters");var e=arguments[0],r=new Date(e);return e?r.toLocaleString():""})),Handlebars.registerHelper("replace",(function(){var e=Array.prototype.slice.call(arguments),r=e.splice(0,1)[0],n=e.splice(0,1)[0],t=(e.splice(e.length-1,1)[0],e.join("")),a=new RegExp(n,"g");return(r||"").replace(a,t)})),Handlebars.registerHelper("supplant",(function(){var e=Array.prototype.slice.call(arguments),r=e.splice(0,1)[0]||"",n=e.splice(0,1)[0]||{};return shz.common.supplant(r,n)})),Handlebars.registerHelper("replaceInt",(function(){if(arguments.length<2)throw new Error("Handlebars Helper replaceInt needs 3 parameters");var e=arguments[0]||"",r=parseInt(arguments[1])||0,n=arguments[arguments.length-1],t=n.hash&&n.hash.format;return"short"==t?r>1e3&&(r/1e6>1?r='<span><em class="num">'+Math.round(r/1e5)/10+"</em>M</span>":r/1e3>1&&(r='<span><em class="num">'+Math.round(r/100)/10+"</em>K</span>")):r='<span><em class="num">'+r.toLocaleString()+"</em></span>",e.replace("{count}",r)})),Handlebars.registerHelper("getValue",(function(e,r,n){try{return"object"!=_typeof(n)?e[r][n]:e[r]}catch(e){return""}})),Handlebars.registerHelper("compare",(function(){var e,r,n,t,a;if(arguments.length<3)throw new Error("Handlebars Helper compare needs 2 parameters");return r=arguments[0],n=arguments[1],"eq"==(e=(t=arguments[arguments.length-1]).hash&&t.hash.op)?a=r==n:"gt"==e?a=r>n:"ge"==e?a=r>=n:"lt"==e?a=r<n:"le"==e?a=r<=n:"neq"==e&&(a=r!=n),a?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("indexplusone",(function(e){return(e+=1)>9||"noleadingdigits"==arguments[1]?e:"0"+e})),Handlebars.registerHelper("increment",(function(e){return 1*e+1})),Handlebars.registerHelper("contains",(function(){var e,r,n,t,a,s,i;if(arguments.length<2)throw new Error("Handlebars Helper contains needs 2 parameters - array and key to find");return e=arguments[0]||[],Array.isArray(e)||(e=[e]),r=arguments[1],a=(s=arguments.length>2)&&arguments[2],t=(n=arguments[arguments.length-1]).hash&&n.hash.op,e.some((function(e){return i="object"===_typeof(e)?s?"substr"==t?-1!==e[r].search(a):e[r]==a:e[r]:"substr"==t?-1!==e.search(r):e==r})),"not"==t&&(i=!i),i?n.fn(this):n.inverse(this)})),Handlebars.registerHelper("math",(function(e,r,n,t){return{"+":(e=parseFloat(e))+(n=parseFloat(n)),"-":e-n,"*":e*n,"/":e/n,"%":e%n}[r]})),Handlebars.registerHelper("isPath",(function(e){var r=arguments[arguments.length-1],n=r.data.root||{},t=n.location||{};return e&&t.origPath.includes(e)?!r.fn||r.fn(this):!!r.inverse&&r.inverse(this)})),Handlebars.registerHelper("islocationurl",(function(e,r){var n=arguments[arguments.length-1],t=n.data.root||{},a=t.location||{};return a.type==e&&-1!==a.params.indexOf(r)?!n.fn||n.fn(this):!!n.inverse&&n.inverse(this)})),Handlebars.registerHelper("pad",(function(e,r){return r=3==arguments.length?r:2,shz.common.numPad(e,r)})),Handlebars.registerHelper("formattime",(function(e){if(e>=0){var r=Math.round(e/1e3),n=Math.floor(r%86400/3600),t=Math.floor(r%86400%3600/60),a=timePad(r%86400%3600%60,2);return(n?[n,timePad(t,2),a]:[t,a]).join(":")}return""})),Handlebars.registerHelper("widow",(function(e){return e.replace(/ ([^ ]*)$/,"&nbsp;$1")})),Handlebars.registerHelper("length",(function(e){return e.length})),Handlebars.registerHelper("eachProperty",(function(e,r){var n,t="";for(n in e)t+=r.fn({property:n,value:e[n]});return t})),Handlebars.registerHelper("isempty",(function(e,r){var n=!0;for(var t in e)e.hasOwnProperty(t)&&(n=!1);return n?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("test",(function(e,r){}));function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}!function(){var e="undefined"!=typeof window?window:global,t="https://beacon.shazam.com/beacons/api/v1/beacon/{appname}/{appver}/{lang}/{country}/{platform}/{devicemodel}/beacon/{inid}/{beaconType}?",a=shz.npmBridge.Stats.BeaconsUrl,n=shz.npmBridge.Stats.Manifest,r=shz.npmBridge.Stats.Dom,o=shz.npmBridge.Stats.PathConfigs,s=shz.npmBridge.Utils,i=function(){function i(e){if(_classCallCheck(this,i),!e)throw"please pass in app";this.app=e,this.mode=e.supports.inApp?"bridge":"image",this._broadcast("stats:ready",{app:e})}return _createClass(i,[{key:"stat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._suppress(t))try{e.beaconData||(e={beaconData:e},t={cb:arguments[2],force:arguments[4]});var a=this._collect(e),n=this._getTargetUrl().send(a,t.cb||t.mode||this.mode);this._broadcast("stats:beacon",{url:n,urlparams:a,params:e})}catch(a){console.log("stat FAILED",a),this.stat({beaconData:_objectSpread(_objectSpread({},e.beaconData),{beaconId:"global.ue-exception",errorcode:a.code||a.type,errordesc:a.message})},t)}}},{key:"nodeStat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.beaconId||r.getValue(e.node,"beaconId");e.beaconData=e.beaconData||{},a&&(e.beaconData.beaconId=a),this.stat(e,t)}},{key:"getScreenName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e&&e.dataset.shzScreenname;if(!a){var n=this.app.resolvePath(this.app.location.pathname),r=n.path,o=0==r.indexOf("/")?r:"/"+r;a=o.match(/\/([^\/$]*)/)[1]||"home"}return a||t}},{key:"sanitize",value:function(e,t,a){s.sanitize(e,{preserveCase:t,ignoreLength:a})}},{key:"getDynamicValue",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreLength:!0};return r.getValue(e,t,"dynamicBeacon",a)}},{key:"getDeeplinkParams",value:function(e,t){var a=this._getPathConfig(e);return o.getDeeplinkParams(a,t)}},{key:"_collect",value:function(e){var t=e.beaconData,a=e.node,o=e.parentFrame,i=t.beaconId||a&&a.dataset.shzBeaconId;if(!t.beaconType&&!i)throw"missing beaconType or beaconId";var c=s.filterProps(t,this.isReserved);if(i){var p=n.getBeaconConfig(i,shz.beacons),u=p.dynamic,l=p.params;if(c=shz.common.merge(l,c,!0),a){var h={ignoreLength:!0};u.forEach((function(e){var t=r.getValue(a,e,"",h)||c[e]||r.getValue(a,e,"beacon",h)||r.getValue(a,e,"dynamicBeacon",{inherit:{stop:document.body},parentFrame:o,ignoreLength:!0});t?c[e]=t:console.log("".concat(i,":").concat(e," dynamic value not resolved in dom walk."))}))}}else if(a){var g=r.getParams(a,"beacon",{inherit:!0,ignoreLength:!0}),d=r.getParams(a,"targetBeacon",{ignoreLength:!0});c=_extends({},g,d,c)}return this.addDefaultParams(c,e),this._applyPathConfigParams(c),c}},{key:"_getTargetUrl",value:function(){if(!this.target){var e=this._getPathConfig(),n=o.getBeaconUrl(e)||(this.app.supports.testdomain?t.replace("https://beacon.shazam.com",this.app.supports.testdomain):t),r=this.app.supports.inApp,s=_extends({appname:r?"shazam":"website",appver:this.app.supports.appVer||"1.0",lang:this.app.localeLanguage,country:this.app.country,platform:r?this.app.supports.ios?"ios":"android":"web",inid:this.app.inid},o.getPathParams(e));this.target=new a(n,s,{defaultValue:"-"})}return this.target}},{key:"_broadcast",value:function(e,t){i.events.fire(e,t,null,!0)}},{key:"_suppress",value:function(e){var t=this.app.bot||this.app.ampproject?1:0;return e&&!e.force&&(t&&!e.cb||"unknown"==this.app.supports.deviceplatform)}},{key:"isReserved",value:function(e){return e.match(/(^beaconId$)|(^_.)/)}},{key:"addDefaultParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="__purge__",n=this.app.supports||{},r={amc:this.app.config.applemusic.isConnected?1:0,bot:this.app.bot?1:0,buildnum:e.buildnum||shz.version||a,browsername:n.browserName||"-",browserver:n.browserVer||"-",deviceplatform:n.deviceplatform,inapp:n.inApp?1:0,inid:this.app.inid||"-",lang:this.app.localeLanguage,newuser:this.app.newuser?1:0,osver:n.osVer||"-",path:e.path||this.app.location&&this.app.location.pathname||a,refid:this.app.config.urlparams.refid||a,screenname:e.screenname||this.getScreenName(t.node),ua:n.useragent&&n.useragent.replace(/(%20|%3A|\s)/g,"_"),webId:shz.storage.local.get("webId")};r.path&&0==r.path.indexOf("/campaign/")&&(r.exp_name=r.path.replace("/campaign/",""));var o=shz.ux.auth||{};_extends(r,{aa:"icloud"==o.method?1:0,ea:"email"==o.method?1:0,ga:"google"==o.method?1:0}),Object.keys(r).forEach((function(e){r[e]==a&&delete r[e]})),_extends(e,r,e)}},{key:"_getPathConfig",value:function(t){return o.getConfig(this.app.config.stats,t||e.document&&document.location.href||"")}},{key:"_applyPathConfigParams",value:function(e){var t=this._getPathConfig();_extends(e,o.getStaticParams(t),o.getHashParams(t),o.getStaticParams(t,e.path)),o.getRestrictedProps(t).forEach((function(t){delete e[t]}))}}]),i}();i.events=new shz.common.Datasync,shz.Stats=i;var c={},p=[];i.events.get("stats:beacon",(function(e){var t,r=e.url,o=e.urlparams,s=e.params.beaconData.beaconId,i=o.beaconType;if("error"==i){if(c[r])return;var p=o.bot?".bot":"";t={route:"web.error".concat(p),time:0}}else if(shz.metrics&&"pageview"==i&&s)try{(t=n.getBeaconConfig(s,shz.metrics).params).time=o.time}catch(e){t=null}t&&new a("/services/metrics/{route}/{time}",t).send({},"image")})),i.events.get("stats:ready",{cb:function(t){var a=t.app.config.urlparams["stats-window-listener"];a&&e&&e.parent&&e.parent[a]&&i.events.get("stats:beacon",(function(t){try{e.parent[a](t)}catch(e){}}))},listenOnce:!0}),i.events.get("stats:beacondebug",(function(e){var t=e.diff,a=e.params;p.push("missing : ".concat(JSON.stringify(t),", beacon : ").concat(JSON.stringify(a))),shz.ux.set("ux:infobar:show",{msg:"".concat(p.join("<p/><p/>")),keepOpen:!0,classList:{infobar:"debug"}}),console.log(t,a)}))}();Array.prototype.find||(Array.prototype.find=function(r){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof r)throw new TypeError("predicate must be a function");var t,e,n=Object(this),o=n.length>>>0,i=arguments[1];for(e=0;e<o;e++)if(t=n[e],r.call(i,t,e,n))return t}),Array.prototype.findIndex||(Array.prototype.findIndex=function(r){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),e=t.length>>>0;if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<e;){var i=t[o];if(r.call(n,i,o,t))return o;o++}return-1}),String.prototype.includes||(String.prototype.includes=function(r,t){if(r instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(r,t)}),Array.prototype.includes||(Array.prototype.includes=function(r,t){if(r instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(r,t)}),Object.entries||(Object.entries=function(r){for(var t=Object.keys(r),e=t.length,n=new Array(e);e--;)n[e]=[t[e],r[t[e]]];return n}),Object.values||(Object.values=function(r){for(var t=Object.keys(r),e=t.length,n=new Array(e);e--;)n[e]=r[t[e]];return n}),"function"!=typeof Object.assign&&(Object.assign=function(r,t){if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(r),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e});function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){var e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),_defineProperty(this,"_sections",{}),this._cbOnReady=t.cb,this._initialize(t),this._setup()}return _createClass(e,[{key:"_initialize",value:function(e){if(!e.cookies)throw"app:no cookie params";var t=e.cookies,n=e.location,a=e.country,o=void 0===a?"":a,s=e.browserLanguage,r=void 0===s?"":s,i=e.origin,c=void 0===i?"https://www.shazam.com":i,u=e.ga,h=e.ua,l=e.serverMode,p=e.version;_extends(this,{supports:new shz.Supports(h),storage:shz.storage,cookies:t},new shz.common.Datasync);var f=_extends({urlparams:shz.common.urlParams(n)},e.config||{}),g=/^\/amp\//.test(n.pathname);g&&(n.pathname=n.pathname.replace(/^\/amp\//,"/"));var m=l||this.supports.bot;_extends(this,{appname:f.products&&this.getProductName({config:f,location:n}),ampPlatform:this.supports.ampPlatform,ampproject:g,browserLanguage:r,bot:!g&&m,config:f,countryGeoIP:(o||"").toUpperCase(),ga:u,location:n,origin:c,_embedLaunch:!e.config,serverMode:l,version:p,entryURL:null,artistAdamIdEnabled:!0})}},{key:"_setup",value:function(){var e=this;shz.bridge.on("aboutBridge",{cb:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.bridgeData=t.data||{},e.config.frames=e.config.frames||{},Promise.all([e._setupLocale(),e._setupUser(),e._loadFeaturesConfig(),e._loadProductConfig()]).then((function(t){console.log("_setup",t),e._notifyReady(!0)})).catch((function(t){console.log("_setup failed",t),e._notifyReady(!1)}))},listenOnce:!0})}},{key:"_notifyReady",value:function(t){var n=this;e.set("app:beforeReady",this,(function(){n.set("app:beforeReady",n,(function(){e.set("app:ready",n,(function(){n.set("app:ready",n,(function(){n._statPreloadEvent(),n._cbOnReady(n,t)}))}))}))}))}},{key:"_setAmpLanguage",value:function(e){this.localeLanguage="gb"==this.language?"en":"en"==this.language?"en-US":this.language}},{key:"_setupLocale",value:function(){return this._setupLanguage(),this._setupCountry(),this.fire("_app:localeReady",1),this._loadLocaleStrings()}},{key:"_loadLocaleStrings",value:function(e){var t=this;return new Promise((function(e){var n=function(){t._setAmpLanguage(t.language),e("locale")}.bind(t);t.strings="";var a=t.language,o=t.version;if("en"==a||shz[t.langs[a]])t.strings=shz[t.langs[a]],n();else{var s="src"==o?"/src":"/builds/"+o;shz.common.getJSON("".concat(s,"/intl/strings/").concat(t.langs[a],".json")).then((function(e){t.strings=e,n()}),(function(){console.log("FAILED *********************************************************************"),t.language="en",t.strings=shz[t.langs.en],n()}))}}))}},{key:"_loadFeaturesConfig",value:function(){var e=this;return new Promise((function(t,n){var a=e,o=e.serverMode?{config:e.config}:{url:"".concat(e.origin,"/config/features").concat(e.appname,".json")};shz.npmBridge.FeatureFlags.configureFeatures(o,{controlConfigs:{environments:["www","cisd","betasd","dev"],getLoginState:function(){return a.storage.local.get("loggedin")}},controlStates:{country:e.country,environment:e.supports.hostEnv,inid:e.inid,platformProps:e.supports,urlparams:e.config.urlparams}},(function(n){var a=n.featureflags,o=n.config,s=void 0===o?{}:o,r=n.error;e.featureflags=a,_extends(e.config,{validReferrers:[],stats:[],featureflags:{}},s),r&&console.log("_loadFeaturesConfig",r),t()}))}))}},{key:"_loadProductConfig",value:function(){var e=this;return new Promise((function(t){e.get("_app:setupComplete",(function(){t("productconfig")})),e._embedLaunch?e._fetchBaseConfig((function(){e.fire("_app:setup",1)})):e.fire("_app:setup",1)}))}},{key:"_fetchBaseConfig",value:function(e){var t=this,n=this.config,a="src"==shz.version?"/config/initbase.json":"/builds/"+shz.version+"/config/initbase.json";shz.common.getJSON(a).then((function(a){a.sections=a.sections||{},shz.common.merge(n,a,!0),t.appname=t.getProductName(t),e()}),(function(e,t){console.log("App:_fetchConfig failed",e,t)}))}},{key:"_statPreloadEvent",value:function(){var e=this;try{shz.stats=new shz.Stats(this),(this.config.stats||[]).some((function(t){e.location.href.match(t.path)&&t.preload&&-1==e.location.href.indexOf("?refid")&&shz.stats.stat({beaconType:t.preload.beaconType,screenname:t.preload.screenname,path:e.location&&e.location.pathname||""},e)})),[{key:"deviceplatform",value:"unknown",code:"deviceplatform_unknown"},{key:"bot",value:!0,code:"deviceplatform_bot"}].forEach((function(t){e.supports[t.key]==t.value&&shz.stats.stat({beaconData:{beaconType:"exceptions",type:"error",errordomain:e.location&&e.location.pathname||"",errorcode:t.code,errordesc:e.supports.useragent}},{force:!e.serverMode})}))}catch(e){}}},{key:"_verifiedLang",value:function(e){e="en-gb"==e?"gb":e;var t=this.langs[e]&&e;if(!t){var n=e.split("-")[0];t=n&&this.langs[n]&&n}return t||"en"}},{key:"_setupLanguage",value:function(){var e=this.config,t=this.browserLanguage,n=(e.urlparams.lang||this.cookies.get("language")||t||"en").toLowerCase();this.langs=shz.langs,this.language=this._verifiedLang(n),this._setAmpLanguage(this.language)}},{key:"_setupCountry",value:function(){var e=this.config,t=this.countryGeoIP,n=this.bridgeData,a="",o=shz.country[t]&&t,s=(e.urlparams.co||"").toUpperCase();if(this.countryQuery=s,!(s=shz.country[s]&&s)&&n.webConfig)try{var r=JSON.parse(n.webConfig);a=this.countryNative=(r.country||"").toUpperCase(),a=shz.country[a]&&a}catch(e){}this.country=s||a||o||"GB"}},{key:"_setupUser",value:function(){var e=this.config,t=(this.bridgeData.client||{}).installationID||e.urlparams.inid||shz.storage.local.get("inid"),n=shz.storage.local.get("webId");return n||(this.newuser=!0,n=shz.common.guid(),this.storage.local.set("webId",n,31536e6)),this.inid=t||n,this.set("_app:userReady",t),"user"}},{key:"_setPath",value:function(e){var t=this;this.get("app:ready",(function(){var n,a,o,s=e.path,r=e.params,i={},c=e.section||"main",u=e.preserveOverlay;for(o in n=(s="/"==s?"/home":s)&&shz.common.getFrameInfo(s,t.config),"main"==c&&(t.ampproject&&t.config.ampproject&&(i=shz.common.copy(t.config.ampproject.sections)),n&&(n.config.sectionSet&&(i=shz.common.merge(i,t.config.sectionSets[n.config.sectionSet],!0)),i=shz.common.merge(i,n.config.sections,!0),t.config.urlparams.nohf&&(delete i.header,delete i.footer))),i[c]={path:s,href:e.href,params:r,referrer:t._sections[e.section||"main"],pushHistory:e.pushHistory},"main"==c&&!u&&t._sections.overlay&&(i.overlay=i.overlay||{path:null}),i)(a=i[o].path)===t._sections[o]?delete i[o]:a?t._sections[o]=a:delete t._sections[o];shz.common.isEmpty(i)?t.set("app:pathunchanged",!0):t._loadFrameStrings(i,(function(){t._checkSSO(i,(function(){t.set("app:path",i)}))}))}))}},{key:"_checkSSO",value:function(e,t){var n,a=e&&e.main&&e.main.path,o=this.config;(n=a&&shz.common.getFrameInfo(a,o))&&shz.common.isFrameSecure(n.type,o)?this.getService("sso").request("checkLogin",null,(function(){t()})):t()}},{key:"_loadFrameStrings",value:function(e,t){var n=this,a=e&&e.main&&e.main.path,o=a&&shz.common.getFrameInfo(a,this.config),s=this.config.frames,r=o&&s[o.type],i=r&&r.strings;if(i&&!r.stringsLoaded){var c=this.language,u=Object.keys(i),h=u.map((function(e){var t=i[e],a="src"==n.version?"/src":"/builds/"+n.version;return shz["strings-".concat(e)]&&shz["strings-".concat(e)][n.langs[c]]?null:a+t+n.langs[c]+".json"})).filter((function(e){return e}));h&&h.length?shz.common.request(h,(function(e){Object.keys(e).forEach((function(t){u.some((function(a){var o=new RegExp("".concat(i[a]));if(t.match(o))return e[t]&&(n.strings[a]=e[t]),!0}))})),r.stringsLoaded=!0,t()})):t()}else t()}},{key:"navigate",value:function(e){var t;"string"==typeof e&&(e={href:e});try{e.href.match("embed")&&document&&shz.stats.stat({type:"navinfo",beaconType:"userevent",path:document.location&&document.location.pathname||"unknown",providerdesc:e.href,providername:e.anchor&&e.anchor.hash&&e.anchor.hash.replace("#",""),referrer:document.referrer},this)}catch(e){}e.href?(this.entryURL||(this.entryURL=e.href),this.ampproject&&(e.href=e.href.replace(/^\/amp\//,"/")),t=this.resolvePath(e.href),e.href==t.href||e.section&&"main"!=e.section||this.config.urlparams.lang||this.config.urlparams.fb_locale?(shz.common.merge(e,t,1),this.langpath=t.langpath,this._setPath(e)):(this.ampproject&&(t.href="/amp"+t.href),this.set("app:_redirect",{path:t.href,status:302,params:e.params,pushHistory:e.pushHistory}))):this._setPath(e)}},{key:"resolvePath",value:function(e){var t,n=e.split("?")[0],a=e,o=/^\/([^\/]+)(\/)*/;return t=(n.split("/")[1]||"").toLowerCase(),n=(t=shz.langs[t]&&t)?n.replace(o,"/"):n,"en"==this.language?(a=t?a.replace(o,"/"):a,t=""):t!=this.language&&(a=t?a.replace(o,"/"+this.language+"$2"):"/"+this.language+("/"==a?"":a),t=this.language),{href:a,path:n,langpath:t&&"/"+t}}},{key:"getService",value:function(e){var t=this.services=this.services||{};return t[e]||(t[e]=new shz.Service[e](this)),t[e]}},{key:"getProductName",value:function(e){var t=e.config,n=e.location,a=n.pathname,o=t.urlparams.referrer,s=t.referrerRedirects[o];if(s&&n.pathname!=s.pathDestination){var r=shz.common.urlParams(n.href);(s.paramsToRemove||[]).forEach((function(e){delete r[e]})),a=n.pathname.replace(s.pathToReplace,s.pathDestination),this.redirectedPath=a=shz.common.setQueryParams(a,r)}var i=t.products||[],c=this.resolvePath(a).path,u="/website";return c=c.split("/"),i.some((function(e){if(c[1]==e.split("/")[1])return u=e,!0})),u}}]),e}();shz.App=e,_extends(shz.App,new shz.common.Datasync)}();shz.AppClient=function(e){var s=e.version,n=new shz.App(e);new shz.FrameClient(n),n.get("_app:setup",(function(){var e,i;t(),e=n.appname,i="src"==s?[e+"/init.json",e+"/frames/frames.json"].join("&"):e.replace(/^\//,"")+"/init.js",shz.script.loadjs(i,{success:function(){var e=shz.init;if(e.ga&&(n.ga=e.ga),e.config&&shz.common.merge(n.config,e.config,!1,!0),e.jscombo.length){var s="bundledeps=true&"+e.jscombo.join("&");shz.script.loadjs(s,{success:function(){n.set("_app:setupComplete",1)},failure:function(){}})}else n.set("_app:setupComplete",1)},failure:function(){}}),shz.debugmode&&shz.script.loadjs("/js/ux/console.js")}));var t=function(){n.redirectedPath&&(window.history.replaceState(null,null,n.redirectedPath),delete n.redirectedPath)};return n};shz.AppView=function(e){var r=this,t=e.app,o=new shz.common.Datasync,a={},n={},s={},i={},c={},m={};function p(e){var o,f,h,d=e.pathOrFrame,g=e.config,u=e.section,l=e.root,v=e.mvargs,y=e.statFirstShow,z=e.referrer;"string"==typeof d?(o=shz.common.getFrameInfo(d,g),h=o.path,(f=i[u][h])||((f=shz.common.create(shz.Frame)).frameInfo=o,f.frameInfo.mvargs=v,f.frameInfo.statFirstShow=y,f.path=h,f.app=t,z&&(f.referrer=z),f.dirty=!0,l=l||f,f.reRender=p.bind(this,{pathOrFrame:f,config:g,section:u,root:l,mvargs:v,statFirstShow:y}),i[u][h]=f,c[u].unshift(f))):h=(f=d).path,m[h]=f,n[u][h]=f,s[u][h]=!1,f.render((function(e){if(m[h]){var o,d,v=e.children,y=e.ready,z=t.config.errorframe||"/error";if(s[u][h]=y,e.error)return console.log("***appview: frame render exception: ",e.error.type,e.error.message),void(e.error.type==shz.common.Error.REDIRECT?(d=e.error.args.path,t.ampproject&&!/\/amp\/$/.test(d)&&(d="/amp"+d),d?d=d+(t.location.search&&-1==d.search(/\?/)&&t.location.search||"")+(t.location.hash&&-1==d.search(/\#/)&&t.location.hash||""):"404"==e.error.args.status&&(d=z+"/notfound"),t.set("app:_redirect",{path:d,status:e.error.args.status})):(shz.stats.stat({beaconType:"error",providerdesc:"web_err",code:e.error.type,path:"undefined"!=typeof document&&document.location&&document.location.pathname||"",errordesc:encodeURIComponent(e.error.message.replace(/(%20|%3A|\s|\/)/g,"_"))},t),e.error.forceshow||f==l&&"main"==u?(t.set("app:"+e.error.type,h),t.navigate(z+"/"+e.error.type)):(delete n[u][h],delete i[u][h],c[u].splice(c[u].findIndex((function(e){return e.path==f.path})),1))));if(v.forEach((function(e){var r=e.path,t=e.mvargs,a=e.statFirstShow;(o=i[u][shz.common.getFrameInfo(r).path])&&!o.dirty||p({pathOrFrame:r,config:g,section:u,root:l,mvargs:t,statFirstShow:a})})),delete n[u][h],shz.common.isEmpty(n[u])){c[u].forEach((function(e){e.dirty&&(e.attachChildren(i[u]),e.dirty=!1)})),a[u]=l;var w=a.main&&!Object.keys(s||{}).some((function(e){return Object.keys(s[e]||{}).some((function(r){return!s[e][r]}))}));r.set("appview:update",{sections:a,section:u,frames:i[u],pageComplete:w})}}}))}shz.AppView.frames=m,t.get("frame:data",(function(e){var r;for(var o in e)t.config.frames[o]=shz.common.merge(t.config.frames[o]||{},shz.common.flattenCSS(e[o]),!0),(r=m[o])&&r.model&&(e[r.model.type]&&shz.common.merge(r.model,e[r.model.type],!0,!0),r.model=shz.common.merge(r.model,e[o],!0,!0),r.model.update())})),t.get("frame:detach",(function(e){var r,t,o=[i,n,s],p=m[e];for(t in p&&p.detach(),o.forEach((function(r){for(var t in a)r[t][e]&&delete r[t][e]})),c)((r=c[t])||[]).some((function(t,o){e==t.path&&r.splice(o,1)}))})),t.get("app:path",(function(e){t.get("app:ready",{cb:function(){var o;for(var f in"main"in e&&(m={},shz.AppView.frames=m),e){if(delete a[f],i[f])for(var h in i[f])i[f][h].detach();n[f]={},s[f]={},i[f]={},c[f]=[]}for(var f in e)e[f].path?(o=!0,p({pathOrFrame:e[f].path,config:t.config,section:f,mvargs:e[f].params&&e[f].params.mvargs,referrer:e[f].referrer})):a[f]=null;o||r.set("appview:update",{sections:a})},listenOnce:!0})})),r=shz.common.merge(r,o)};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}shz.AppViewClient=function(e){var t,a,n,o,s,i,r,c,d,p,h,m,l,u,f,w,y=this,z=e.app,g=new shz.common.Datasync,b=new shz.AppView(e),v=shz.common.ancestor,L={},E=window._starttime||Date.now();function k(e){var t,a,n=["a","[data-href]","[data-shz-cmd]"];if((a=v(e,n)).node){for(t in L)if(shz.common.matchesSelector(a.node,t)){a={node:a.node,selector:t};break}}else{for(t in n=[],L)n.push(t);a=v(e,n)}return a}function x(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),e[t+"Width"]}function S(e){var t=shz.common.ancestor(e,".shz-frame"),a=e.dataset.shzBeaconPathOverride;try{shz.stats.nodeStat({node:e,beaconData:{beaconType:"userevent",path:a||r.main.path||""},parentFrame:t&&t.node,firstCall:!0})}catch(e){}}function T(e,t){var a,n,o=e.href,s=e.classList,i=e.dataset;if(!o&&(o=e.getAttribute("data-href"))&&((e=document.createElement("a")).setAttribute("href",o),Object.keys(i).forEach((function(t){e.dataset[t]=i[t]})),[].forEach.call(s,(function(t){e.classList.add(t)}))),e.dataset.shzExternal||"www.shazam.com"!==e.hostname&&e.hostname!=window.location.hostname)p=!1,shz.ux.set("audio:stop"),e.dataset.shzExternal&&(o=shz.common.shazamURL(o,1)),n=function(){clearTimeout(a),shz.ux.remove("imgbeaconfired",n),e.dataset.shzNewWindow||!z.supports.isMobile&&!e.dataset.shzSameWindow?window.open(o):shz.common.navigate(o)},shz.ux.get("imgbeaconfired",{cb:n,listenOncez:!0}),a=setTimeout(n,500);else{e.host=window.location.host,p=z.location.host==e.host&&z.location.pathname==e.pathname&&z.location.hash!=e.hash,y.fire("appview:pagestart",!0),z.navigate({href:e.pathname,anchor:e});try{window.history.pushState(null,null,e.href)}catch(t){}shz.ux.set("app:path",e.pathname);try{f&&(clearTimeout(f),f=null),f=setTimeout((function(){shz.stats.stat({beaconType:"error",errordesc:"pagetimeout",path:e.pathname},z)}),2500)}catch(t){}}}function D(){var e,t=x();switch(!0){case t<=s:e="mobile";break;case t>s&&t<=i:e="tablet";break;default:e="desktop"}return e}function O(){switch(window.orientation){case 0:return"shz-portrait";case 90:return"shz-landscape-left";case-90:return"shz-landscape-right";case 180:return"shz-portrait-reverse"}}function C(){try{f&&(clearTimeout(f),f=null)}catch(e){}}function A(e){var t=e.model,a=e.path;try{var n={meta:shz.meta.create(t.data.meta,a,z)},o=shz.partials.launch.meta(n),s=document.createElement("div");s.innerHTML=o;var i=s.querySelectorAll("*"),r=document.head;i.forEach((function(e){return r.appendChild(e)}))}catch(e){console.log("Failed to inject meta tags")}}function H(e,t){var a,n,o=Date.now(),s=t||r&&r.main||{},i=s&&s.frameInfo&&s.frameInfo.config||{};e||(n=Math.max(0,o-E),i.pageviewwithtimespent?(a={beaconType:"pageview",path:s.path||""},n&&(a.timespent=n),shz.stats.nodeStat({node:s.node,beaconData:a},!0)):z.config.stats.some((function(e){if(z.location.href.match(e.path)&&e.timespent)return n&&shz.stats.stat({beaconId:"global.ue-timespent",timespent:n,path:s.path||""},z),!0}))),E=o}z.view=b,z.get("app:_redirect",(function(e){var t=document.createElement("a");t.href=e.path,t.host==window.location.host?z.navigate({href:t.pathname,params:e.params,pushHistory:e.pushHistory}):window.location.replace(e.path)})),shz.app.country,z.get("app:path",(function(e){var t,a,n=window.location,s=(shz.app.config.errorframe||"/error")+"/";if(e.main){o=!0,t=e.main.href,s=s.substring(1),a=new RegExp("^/(\\w\\w/)?"+s),t!=n.pathname+n.hash&&-1===t.search(a)&&(t=t+(z.location.search&&-1==t.search(/\?/)&&z.location.search||"")+(z.location.hash&&-1==t.search(/\#/)&&z.location.hash||""),window.history[e.main.pushHistory?"pushState":"replaceState"](null,null,t));try{var i=document.body.classList;m&&i.remove.apply(i,m);var r=shz.common.getFrameInfo(e.main.path,z.config);(m=r.config.bodyStyles||[]).length&&i.add.apply(i,m)}catch(e){}}})),z.get("app:pathunchanged",(function(){C()})),b.get("appview:update",(function(e){var t,a,n,s,i,p,m,l,u,f,g,b,v=e.sections,L=e.section,E=e.frames,k=e.pageComplete;for(a in r=v,v){if(t=document.body.querySelector("."+a),v[a]?t.firstElementChild&&t.firstElementChild!=v[a].node?t.replaceChild(v[a].node,t.firstElementChild):t.firstElementChild||t.appendChild(v[a].node):t.innerHTML="","main"===a&&o&&w)try{document.documentElement.scrollTop=0,w=!1}catch(e){}if("main"===a&&o&&k){w=!0,C(),o=!1,y.fire("appview:pagecomplete",!0);try{h&&document.body.classList.remove(h),h="shz-page"+v.main.frameInfo.type.replace(/\//g,"-"),document.body.classList.add(h)}catch(e){}if(c&&c.frameInfo&&(u=z.config.frames[c.frameInfo.type])&&u.pageviewwithtimespent&&H(!1,c),c=v.main,!(u=z.config.frames[v.main.frameInfo.type])||!u.pageviewwithtimespent)if(i={beaconType:"pageview",path:v.main.path||""},d||(f=void 0,void 0,void 0,g=Date.now()-shz.clienttime,b=shz.servertime||0,d||(d=!0,f=g+b),(p=f)&&(i.time=p),void 0!==(m=shz.common.isJSCached())&&(i.cached=m),A(v.main),d=!0),u&&u.delaypageview)u.delaypageview=!1,z.get("appviewclient:firepageview",{listenOnce:!0,cb:function(){shz.stats.nodeStat({node:v.main.node,beaconData:i,firstCall:!0,beaconOnVisible:!0})}});else{shz.stats.nodeStat({node:v.main.node,beaconData:i,firstCall:!0,beaconOnVisible:!0});try{if("IE"==z.country){var x="https://beacon.shazam.com/beacons/api/v1/beacon/website/1.0/{lang}/{country}/web/-/beacon/959af3ad-c2fa-2cc3-94f0-4ea2789beb1d/impression?".replace("{lang}",z&&z.localeLanguage||"-").replace("{country}",z&&z.country||"-"),S={timezone:"".concat(Intl.DateTimeFormat().resolvedOptions().timeZone),screenname:shz.stats.getScreenName()};if(shz.stats.addDefaultParams(S,z),delete S.webId,z.config.urlparams.co&&(S.urlco=z.config.urlparams.co),S)for(var T in S)x+=T+"="+S[T]+"&";(new Image).src=x}}catch(e){}}if((l=document.referrer||shz.app.config.urlparams.referrer)&&-1==l.indexOf("shazam.com")&&-1==l.indexOf("shz.am")){var D,O={deeplinkreferrer:D=z.config.validReferrers.includes(l)?l:shz.common.getLocationParts(l).hostname||shz.common.getLocationParts(l).host,providername:D};shz.stats.nodeStat({beaconId:"global.framework.deeplink",node:v.main.node,beaconData:O})}}"main"===a&&(n=v[a].path.match(/\/([^\/$]*)/)[1])&&v[a].model.dataReady&&(s=v[a].model.data.meta&&(v[a].model.data.meta.pageTitle||v[a].model.data.meta.subject)?v[a].model.data.meta.pageTitle||v[a].model.data.meta.subject:z.strings["website_meta_title_"+n])&&(document.title==s||s.match(/({.*?})/g)||(document.title=shz.common.stripHTML(s),document.querySelector(".aria-page-title").innerHTML=s))}v[L]&&(v[L].inDom(E),shz.ux.set("app:update:"+L))})),z.get("app:ready",(function(){try{var e=O(),t=z.supports.osVerNum;e&&document.body.classList.add(O()),document.body.classList.add("shz-"+z.supports.platform),document.body.classList.add("shz-os-"+z.supports.osName),document.body.classList.add("shz-device-"+z.supports.deviceName),document.body.classList.add("shz-"+shz.ux.supports.getScreenSize()),shz.ux.supports.isNotched()&&document.body.classList.add("shz-notched"),t&&document.body.classList.add("shz-"+z.supports.platform+"-"+(t+"").replace(/\./g,"-")),window.webkit&&window.webkit.messageHandlers&&document.body.classList.add("shz-wkwebview"),shz.app.country&&document.body.classList.add("shz-co-"+shz.app.country.toLowerCase()),shz.app.supports.inApp&&document.body.classList.add("shz-inapp")}catch(e){}s=z.config.MOBILE_THRESHOLD,i=z.config.TABLET_MAX_THRESHOLD,u=window.innerHeight,l=D(),z.set("app:screenmodechange",l),(shz.app.mobilemode=x()<=s)||a.resize(),(!window.shz.config||window.shz.config&&shz.common.isEmpty(window.shz.config))&&(window.shz.config=z.config,window.updateWindow&&window.updateWindow()),shz.ux.get("ux:visibility",(function(e){H(e,r&&r.main),document.body.setAttribute("aria-hidden",e?"false":"true")})),shz.ux.get("ux:pageview",H.bind(y,!1,null)),shz.ux.set("app:ready",z),z.get("appview:navigate",T)})),y.registerAction=function(e,t){var a=t;e in L&&!t.force||("function"==typeof t&&(a={action:t}),L[e]=a)},y.unregisterAction=function(e,t){"object"==_typeof(t)&&t.action,e in L&&L[e].action===t&&delete L[e]},document.addEventListener("window:resize",(function(){["shz-phone","shz-tablet","shz-desktop"].forEach((function(e){document.body.classList.remove(e)})),document.body.classList.add("shz-"+shz.ux.supports.getScreenSize())})),y=shz.common.merge(y,g),function(){a={orientationchange:function(e){var t=O(),a=D();document.body.classList.remove("shz-portrait","shz-landscape-left","shz-landscape-right","shz-portrait-reverse"),document.body.classList.add(t),z.set("app:screenmodechange",a)},handleEvent:function(e){this[e.type]&&this[e.type].call(this,e)},resize:function(e){if(z.supports.inApp||((90===Math.abs(window.orientation)?window.innerHeight!==window.screen.width:window.innerHeight===u)?document.body.classList.remove("shz-browser-addressbar-hidden"):document.body.classList.add("shz-browser-addressbar-hidden")),!z.supports.isMobile){var t,a=x(),n=shz.app.mobilemode,o=shz.app.tabletmode,i=D(),r=l!==i;(t=a<=s&&!n)?n=!0:(t=a>s&&n)&&(n=!1),t&&(console.log("Entering",n?"Mobile":"Desktop","mode."),z.set("app:mobilemode",shz.app.mobilemode=n),z.set("app:tabletmode",shz.app.tabletmode=o)),r&&(l=i,z.set("app:screenmodechange",l))}},popstate:function(e){shz.app.get("_app:setupComplete",{cb:function(){shz.app.navigate(window.location.pathname)},listenOnce:1})}},(t={handleEvent:function(e){this[e.type]&&this[e.type].call(this,e)},pointerdown:function(e){var t,a,o=k(e.target),s=o.node;if(e.key,e.keyCode&&[" ","Enter"].includes(e.key)&&["A","BUTTON"].includes(e.target.tagName))return e.target.click(),void e.preventDefault();n&&n.pressed&&n.pressed.classList.remove("pressed"),n={target:e.target,anchor:o},s&&null==e.key&&((a=(t=(s.dataset||{}).pressed)?v(s,t).node:s).classList.add("pressed"),n.pressed=a)},pointermove:function(e){e.ext&&e.ext.dirLock&&(e.ext.dirLock.y||e.ext.dirLock.x)&&n&&n.pressed&&(n.pressed.classList.remove("pressed"),n.pressed=null)},click:function(e){if(!e.keyCode||-1!=[13,32].indexOf(e.keyCode)){var t,a=k(e.target),o=a.node,s=a.selector,i=o&&(o.href||o.getAttribute("data-href")),r=e.ext&&e.ext.dirLock||{};r.y||r.x||(s in L?(L[s].preventBeacon||!o.dataset.shzBeaconPreventDefault&&S(o),L[s].action({node:o,target:e.target}),e.preventDefault()):i?(t=shz.ux.linkTracking(i,o),"[data-href]"==a.selector?o.dataset.href=t:o.href=t,1==!o.dataset.shzBeaconPreventDefault&&S(o),!e.handled&&T(o),p||o.hasAttribute("data-shz-allow-default")||e.preventDefault()):o&&o.dataset&&(o.dataset.shzBeacon||o.dataset.shzBeaconId)&&(1==!o.dataset.shzBeaconPreventDefault&&S(o),e.preventDefault())),n&&n.pressed&&(n.pressed.classList.remove("pressed"),n.pressed=null)}}}).touchstart=t.pointerdown,t.touchmove=t.pointermove,t.touchend=t.pointerup,t.mousedown=t.pointerdown,t.mousemove=t.pointermove,t.mouseup=t.pointerup,t.keydown=t.pointerdown,t.keyup=t.pointerup;var e={onPointerDown:z.supports.getEventsOfType("pointerdown"),onPointerMove:z.supports.getEventsOfType("pointermove"),onPointerUp:{events:["click"]},onKeyUp:{events:["keyup"]},onKeyDown:{events:["keydown"]}};Object.keys(e).forEach((function(a){e[a].events.forEach((function(e){document.addEventListener(e,t)}))})),Object.keys(a).forEach((function(e){"handleEvent"!=e&&window.addEventListener(e,a)}))}()};shz.Frame={frameInfo:null,children:[],node:null,_timers:[],_setTimeout:function(){}