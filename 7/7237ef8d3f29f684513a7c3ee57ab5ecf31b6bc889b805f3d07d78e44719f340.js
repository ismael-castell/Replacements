(self.webpackChunkpico_gadget=self.webpackChunkpico_gadget||[]).push([[879],{39966:(e,t,r)=>{"use strict";var n=r(55781);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(r(96740));function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u={USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",flag_code:"US",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",flag_code:"CA",name_plural:"Canadian dollars"},EUR:{symbol:"€",name:"Euro",symbol_native:"€",decimal_digits:2,rounding:0,code:"EUR",flag_code:"EU",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"د.إ.‏",decimal_digits:2,rounding:0,code:"AED",flag_code:"AE",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"؋",decimal_digits:0,rounding:0,code:"AFN",flag_code:"AF",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",flag_code:"AL",name_plural:"Albanian lekë"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"դր.",decimal_digits:0,rounding:0,code:"AMD",flag_code:"AM",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",flag_code:"AR",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",flag_code:"AU",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"ман.",decimal_digits:2,rounding:0,code:"AZN",flag_code:"AZ",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",flag_code:"BA",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"৳",decimal_digits:2,rounding:0,code:"BDT",flag_code:"BD",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"лв.",decimal_digits:2,rounding:0,code:"BGN",flag_code:"BG",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"د.ب.‏",decimal_digits:3,rounding:0,code:"BHD",flag_code:"BH",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",flag_code:"BI",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",flag_code:"BN",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",flag_code:"US",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",flag_code:"BO",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",flag_code:"US",name_plural:"Botswanan pulas"},BYN:{symbol:"Br",name:"Belarusian Ruble",symbol_native:"руб.",decimal_digits:2,rounding:0,code:"BYN",flag_code:"BW",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",flag_code:"BZ",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",flag_code:"CG",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",flag_code:"CH",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",flag_code:"CL",name_plural:"Chilean pesos"},CNY:{symbol:"CN¥",name:"Chinese Yuan",symbol_native:"CN¥",decimal_digits:2,rounding:0,code:"CNY",flag_code:"CN",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",flag_code:"CO",name_plural:"Colombian pesos"},CRC:{symbol:"₡",name:"Costa Rican Colón",symbol_native:"₡",decimal_digits:0,rounding:0,code:"CRC",flag_code:"CR",name_plural:"Costa Rican colóns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",flag_code:"CV",name_plural:"Cape Verdean escudos"},CZK:{symbol:"Kč",name:"Czech Republic Koruna",symbol_native:"Kč",decimal_digits:2,rounding:0,code:"CZK",flag_code:"CZ",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",flag_code:"DJ",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",flag_code:"DK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",flag_code:"DO",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"د.ج.‏",decimal_digits:2,rounding:0,code:"DZD",flag_code:"DZ",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",flag_code:"EE",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"ج.م.‏",decimal_digits:2,rounding:0,code:"EGP",flag_code:"EG",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",flag_code:"ER",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",flag_code:"ET",name_plural:"Ethiopian birrs"},GBP:{symbol:"£",name:"British Pound Sterling",symbol_native:"£",decimal_digits:2,rounding:0,code:"GBP",flag_code:"GB",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",flag_code:"GE",name_plural:"Georgian laris"},GHS:{symbol:"GH₵",name:"Ghanaian Cedi",symbol_native:"GH₵",decimal_digits:2,rounding:0,code:"GHS",flag_code:"GH",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",flag_code:"GN",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",flag_code:"GT",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",flag_code:"HK",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",flag_code:"HN",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",flag_code:"HR",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",flag_code:"HU",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",flag_code:"ID",name_plural:"Indonesian rupiahs"},ILS:{symbol:"₪",name:"Israeli New Sheqel",symbol_native:"₪",decimal_digits:2,rounding:0,code:"ILS",flag_code:"IL",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"₹",decimal_digits:2,rounding:0,code:"INR",flag_code:"IN",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"د.ع.‏",decimal_digits:0,rounding:0,code:"IQD",flag_code:"IQ",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"﷼",decimal_digits:0,rounding:0,code:"IRR",flag_code:"IR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Króna",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",flag_code:"IS",name_plural:"Icelandic krónur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",flag_code:"JM",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"د.أ.‏",decimal_digits:3,rounding:0,code:"JOD",flag_code:"JO",name_plural:"Jordanian dinars"},JPY:{symbol:"¥",name:"Japanese Yen",symbol_native:"￥",decimal_digits:0,rounding:0,code:"JPY",flag_code:"JP",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",flag_code:"KE",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"៛",decimal_digits:2,rounding:0,code:"KHR",flag_code:"KH",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",flag_code:"KM",name_plural:"Comorian francs"},KRW:{symbol:"₩",name:"South Korean Won",symbol_native:"₩",decimal_digits:0,rounding:0,code:"KRW",flag_code:"KR",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"د.ك.‏",decimal_digits:3,rounding:0,code:"KWD",flag_code:"KW",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"тңг.",decimal_digits:2,rounding:0,code:"KZT",flag_code:"KZ",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB£",name:"Lebanese Pound",symbol_native:"ل.ل.‏",decimal_digits:0,rounding:0,code:"LBP",flag_code:"LB",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",flag_code:"LK",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",flag_code:"LT",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",flag_code:"LV",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"د.ل.‏",decimal_digits:3,rounding:0,code:"LYD",flag_code:"LY",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"د.م.‏",decimal_digits:2,rounding:0,code:"MAD",flag_code:"MA",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",flag_code:"MD",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",flag_code:"MG",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",flag_code:"MK",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",flag_code:"MM",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",flag_code:"MO",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",flag_code:"MU",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",flag_code:"MX",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",flag_code:"MY",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",flag_code:"MZ",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",flag_code:"NA",name_plural:"Namibian dollars"},NGN:{symbol:"₦",name:"Nigerian Naira",symbol_native:"₦",decimal_digits:2,rounding:0,code:"NGN",flag_code:"NG",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan Córdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",flag_code:"NI",name_plural:"Nicaraguan córdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",flag_code:"NO",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"नेरू",decimal_digits:2,rounding:0,code:"NPR",flag_code:"NP",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",flag_code:"NZ",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"ر.ع.‏",decimal_digits:3,rounding:0,code:"OMR",flag_code:"OM",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",flag_code:"PA",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",flag_code:"PE",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"₱",name:"Philippine Peso",symbol_native:"₱",decimal_digits:2,rounding:0,code:"PHP",flag_code:"PH",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"₨",decimal_digits:0,rounding:0,code:"PKR",flag_code:"PK",name_plural:"Pakistani rupees"},PLN:{symbol:"zł",name:"Polish Zloty",symbol_native:"zł",decimal_digits:2,rounding:0,code:"PLN",flag_code:"PL",name_plural:"Polish zlotys"},PYG:{symbol:"₲",name:"Paraguayan Guarani",symbol_native:"₲",decimal_digits:0,rounding:0,code:"PYG",flag_code:"PY",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"ر.ق.‏",decimal_digits:2,rounding:0,code:"QAR",flag_code:"QA",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",flag_code:"RO",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"дин.",decimal_digits:0,rounding:0,code:"RSD",flag_code:"RS",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"₽.",decimal_digits:2,rounding:0,code:"RUB",flag_code:"RU",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",flag_code:"RW",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"ر.س.‏",decimal_digits:2,rounding:0,code:"SAR",flag_code:"SA",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",flag_code:"SD",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",flag_code:"SE",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",flag_code:"SG",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",flag_code:"SO",name_plural:"Somali shillings"},SYP:{symbol:"SY£",name:"Syrian Pound",symbol_native:"ل.س.‏",decimal_digits:0,rounding:0,code:"SYP",flag_code:"SY",name_plural:"Syrian pounds"},THB:{symbol:"฿",name:"Thai Baht",symbol_native:"฿",decimal_digits:2,rounding:0,code:"THB",flag_code:"TH",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"د.ت.‏",decimal_digits:3,rounding:0,code:"TND",flag_code:"TN",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Paʻanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",flag_code:"TO",name_plural:"Tongan paʻanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",flag_code:"TR",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",flag_code:"TT",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",flag_code:"TW",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",flag_code:"TZ",name_plural:"Tanzanian shillings"},UAH:{symbol:"₴",name:"Ukrainian Hryvnia",symbol_native:"₴",decimal_digits:2,rounding:0,code:"UAH",flag_code:"UA",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",flag_code:"UG",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",flag_code:"UY",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",flag_code:"UZ",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bolívar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",flag_code:"VE",name_plural:"Venezuelan bolívars"},VND:{symbol:"₫",name:"Vietnamese Dong",symbol_native:"₫",decimal_digits:0,rounding:0,code:"VND",flag_code:"VN",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",flag_code:"XA",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",flag_code:"XO",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"ر.ي.‏",decimal_digits:0,rounding:0,code:"YER",flag_code:"YE",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",flag_code:"ZA",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",flag_code:"ZM",name_plural:"Zambian kwachas"},ZWL:{symbol:"ZWL$",name:"Zimbabwean Dollar",symbol_native:"ZWL$",decimal_digits:0,rounding:0,code:"ZWL",flag_code:"ZW",name_plural:"Zimbabwean Dollar"}},s=["locales"],c=new WeakMap,l={format:function(e){var t=e.currencyCode,r=void 0===t?"USD":t,o=e.amount,l=e.locales,d=void 0===l?n.getUserLocales():l,p=e.symbol,f=void 0===p||p,y=e.zeroDecimals,_=void 0!==y&&y;o=parseInt(o,10)||0;try{var E;r=(null!==(E=r)&&void 0!==E?E:"USD").toLocaleUpperCase()}catch(e){console.error("Error with converting currency code",e),r="USD"}u[r]||(r="USD"),Array.isArray(d)||(d=[d]);var m,h=u[r],v=h.decimal_digits,g=h.symbol_native,S=a.default(o,{fromCents:!0,precision:v}).value;try{var R={locales:d};if(f&&(R.style="currency",R.currency=r,R.currencyDisplay="symbol"),!c.has(R)){var T=R.locales,b=i(R,s);c.set(R,new Intl.NumberFormat(T,b))}m=c.get(R).format(S);_||(m=[{condition:function(e){return".00"===e.substring(e.length-3)},action:function(e){return e.substring(0,e.length-3)}}].reduce((function(e,t){return t.condition(e)?t.action(e):e}),m))}catch(e){console.log("Error with formatting currency: ",e),m="".concat(g).concat(S)}return m},symbol:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD";try{var t;e=(null!==(t=e)&&void 0!==t?t:"USD").toLocaleUpperCase()}catch(t){console.error("Error with converting currency code",t),e="USD"}return u[e]||(e="USD"),u[e].symbol_native},normalize:function(e){var t=e.currencyCode,r=void 0===t?"USD":t,n=e.amount;n=parseFloat(n)||0;try{var o;r=(null!==(o=r)&&void 0!==o?o:"USD").toLocaleUpperCase()}catch(e){console.error("Error with converting currency code",e),r="USD"}u[r]||(r="USD");var a=u[r].decimal_digits,i=Math.pow(10,a);return parseInt(Math.round(n*i),10)},currencies:u,unformat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Number(String(e).replace(/[^0-9.-]+/g,""))}};e.exports=l},63687:(e,t,r)=>{"use strict";var n=r(34155);Object.defineProperty(t,"__esModule",{value:!0});t.ARTICLE=function(){return"/article"},t.AUTH_PUBLISHER=function(){return"/auth/publisher"},t.AUTH_PUBLISHER_CLAIM=function(){return"/auth/publisher/claim"},t.AUTH_PUBLISHER_CODE_CONFIRM=function(){return"/auth/publisher/code/confirm"},t.AUTH_PUBLISHER_CODE_INIT=function(){return"/auth/publisher/code/init"},t.AUTH_USER=function(){return"/auth/user"},t.AUTH_USER_CLAIM=function(){return"/auth/user/claim"},t.AUTH_USER_CODE_CONFIRM=function(){return"/auth/user/code/confirm"},t.AUTH_USER_CODE_INIT=function(){return"/auth/user/code/init"},t.BLOCKS=function(e){return"creator"===e.scope?"/blocks":"/blocks/display"},t.DOWNLOADS=function(){return"/downloads"},t.FEATURE_FLAGS=function(){return"/feature_flags"},t.FORMS_LANDING_PAGE=function(){return"/landing_page"},t.FORMS_POPUP=function(){return"/popup"},t.GIFTS=function(){return"/gifts"},t.GROUPS_USER=function(){return"/purchase/group"},t.HUBSPOT=function(){return"/publisher/hubspot/setup"},t.IFRAMELY_API_URL=function(e){return"https://cdn.iframe.ly/api/oembed?url=".concat(encodeURIComponent(e),"&key=").concat(n.env.IFRAMELY_KEY_HASH,"&omit_script=1")},t.INSTAGRAM_API_URL=function(){return n.env.INSTAGRAM_API_URL},t.LANDING_PAGE_DYNAMIC=function(e){var t=e.publisherName;return"/landingPage/".concat(t)},t.LANDING_PAGE_GROUP=function(e){var t=e.publisherName,r=e.shortCode;return"/landingPage/".concat(t,"/group/").concat(r)},t.LANDING_PAGE_SIGNUP_MODE=function(e){var t=e.publisherName;return"/landingPage/".concat(t,"/confirm")},t.LANDING_PAGE_STATIC=function(e){var t=e.publisherName,r=e.shortCode;return"/landingPage/".concat(t,"/").concat(r)},t.LANG_URL=function(){return"https://lang.pico.tools"},t.LOADER=function(){return"/loader"},t.LOADER_GUEST=function(){return"/loader/guest"},t.ME=function(){return"/me"},t.METRICS_ENDPOINT=function(){return"https://metrics.pico.tools/extract"},t.ME_PAYMENT=function(){return"/me/payment"},t.NEWSLETTERS=function(){return"/me/newsletters"},t.NEWSLETTERS_SUBSCRIBE=function(){return"/newsletters/subscribe"},t.OAUTH_PUBLISHER=function(){return"/oauth/publisher"},t.OAUTH_PUBLISHER_LINK=function(){return"/oauth/publisher/link"},t.OAUTH_PUBLISHER_LOGIN=function(){return"/oauth/publisher/login"},t.OAUTH_PUBLISHER_TOKEN=function(){return"/oauth/publisher/token"},t.OAUTH_USER=function(){return"/oauth/user"},t.OAUTH_USER_LINK=function(){return"/oauth/user/link"},t.OAUTH_USER_LOGIN=function(){return"/oauth/user/login"},t.OAUTH_USER_RESET=function(){return"/oauth/user/reset"},t.OAUTH_USER_TOKEN=function(){return"/oauth/user/token"},t.PICO_API_URL=function(){return"https://api.pico.tools"},t.PLANS_DISCOUNT=function(){return"/plans/discount"},t.PROMPT_METRICS=function(){return"metrics/prompt"},t.PUBLISHER=function(){return"/publisher/"},t.PUBLISHER_ID=function(e){var t=e.publisherUsername;return"/publisher/".concat(t)},t.PURCHASE_ARTICLE=function(){return"/purchase/article"},t.PURCHASE_ARTICLE_GUEST=function(){return"/purchase/article/guest"},t.PURCHASE_GIFT=function(){return"/purchase/gift"},t.PURCHASE_HISTORY=function(){return"/purchase/history"},t.PURCHASE_PLAN=function(){return"/purchase/plan"},t.PURCHASE_PLAN_GROUP=function(){return"/purchase/plan/group"},t.PURCHASE_PLAN_REACTIVATE=function(){return"/purchase/plan/reactivate"},t.PURCHASE_PRODUCT=function(){return"/purchase/product"},t.PURCHASE_SWITCH=function(){return"/purchase/switch"},t.SETUP=function(){return"/publisher"},t.SETUP_EMAIL_CHECK=function(){return"/setup/email"},t.SETUP_INSTAGRAM=function(){return"/setup/instagram"},t.SETUP_PASSWORD_CHECK=function(){return"/setup/password"},t.SETUP_TWITTER=function(){return"/setup/twitter"},t.SIGNUP=function(){return"/setup/signup"},t.SOCIAL_LINKS=function(e){return"creator"===e.scope?"/social_links":"/social_links/display"},t.TWITTER_API_URL=function(){return n.env.TWITTER_API_URL||"https://api.twitter.com"},t.TWITTER_OAUTH=function(){return"/oauth2/token"},t.TWITTER_USER_INFO=function(e){return"/labs/2/users/by/username/".concat(e)},t.USERS=function(){return"/users"},t.USERS_EMAIL=function(){return"/users/email"},t.USERS_PASSWORD=function(){return"/users/password"},t.USERS_PAYMENT=function(){return"/users/payment"},t.USERS_PAYMENT_DEFAULT=function(){return"/users/payment/default"},t.USERS_PLAN=function(){return"/users/plans"},t.USERS_REGISTER_CONFIRM=function(){return"users/register/confirm"},t.ZIP_CODE=function(){return"/setup/zipcode"}},27144:e=>{"use strict";e.exports=function(e){var t=e.baseActionCreatorName,r=e.baseActionTypeName,n={baseAction:{type:r,actionCreatorName:t,creator:function(e){return function(t){var n=t.payload;return Object.assign({type:e.types[r]},n)}}},successAction:{type:"".concat(r,"_SUCCESS"),actionCreatorName:"".concat(t,"Success"),creator:function(e){return function(t){var n=t.payload;return{type:e.types["".concat(r,"_SUCCESS")],payload:n}}}},errorAction:{type:"".concat(r,"_ERROR"),actionCreatorName:"".concat(t,"Error"),creator:function(e){return function(t){var n=t.payload,o=t.error;return{type:e.types["".concat(r,"_ERROR")],payload:n,error:o}}}}},o=Object.values(n);return{types:o.map((function(e){return e.type})),creators:function(e){return o.reduce((function(t,r){var n=r.creator;return t[r.actionCreatorName]=n(e),t}),{})}}}},10899:(e,t,r)=>{"use strict";var n=r(67294),o=r(45697),a=r(94184);function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=i(n),s=i(o),c=i(a);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var d="Loading-module_PicoLoaderContainer_modal__3DNku",p="Loading-module_PicoLoader_modal__2ezyv",f=function(e){var t=e.className,r=e.inlineStyle;return u.default.createElement("div",l({className:c.default(d,t)},r&&{style:r},{"data-testid":"Loading_index_div"}),u.default.createElement("div",{className:p,"data-testid":"Loading_index_div"}))};f.defaultProps={inlineStyle:{}},f.propTypes={className:s.default.oneOfType([s.default.string,s.default.object]),inlineStyle:s.default.shape({top:s.default.string})},e.exports=f},88924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67294),o=r(19822),a=r(94184),i=r(45697),u=r(46458);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=s(n),l=s(o),d=s(a),p=s(i);function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function m(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}var S="menu/OPEN_MENU",R="menu/CLOSE_MENU",T="menu/TOGGLE_MENU",b="menu/GO_TO_MENU_ROUTE",A="menu/GO_TO_MENU_ROUTE_AND_OPEN",O="menu/RESET",C={isOpen:!1,menuRoute:"/",text:null,backRoute:null,data:{},mobileMode:!1,activeMenuId:null};var P=function(e){return m(e),function(e){var t=e.getState;return function(e){return r=function(r){return n=e(r),o=function(){t(),r.type},a?o?o(n):n:(n&&n.then||(n=Promise.resolve(n)),o?n.then(o):n);var n,o,a},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}};var r}}};var I=function(){return React.createElement(React.Fragment,null,"toggle menu")},U="Menu-module_menu__21JSA",N="Menu-module_menuContainer__1Yg1j",w="Menu-module_isOpen__3j9gB",L="Menu-module_mobile__1o-py",D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,r,n,o=g(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).changeMenuRoute=e.changeMenuRoute.bind(h(e)),e.closeMenu=e.closeMenu.bind(h(e)),e.handleClickOutside=e.handleClickOutside.bind(h(e)),e.openMenu=e.openMenu.bind(h(e)),e.setWrapperRef=e.setWrapperRef.bind(h(e)),e.toggleMenu=e.toggleMenu.bind(h(e)),e.shouldOpen=e.shouldOpen.bind(h(e)),e.state={menuId:null},e}return t=a,r=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside);var e=l.default();this.setState({menuId:e})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"changeMenuRoute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,r=t.dispatch,n=t.routes;n[e]?r({type:b,payload:{menuRoute:e}}):console.error('menu route for: "'.concat(e,'" not declared'))}},{key:"closeMenu",value:function(){(0,this.props.dispatch)({type:R})}},{key:"handleClickOutside",value:function(e){this.shouldOpen()&&this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.closeMenu()}},{key:"openMenu",value:function(){var e=this.state.menuId;(0,this.props.dispatch)({type:S,payload:{menuId:e}})}},{key:"renderRoute",value:function(){var e=this.props,t=e._menu,r=e.routeProps,n=e.routes,o=t.backRoute,a=void 0===o?null:o,i=t.menuRoute,u=void 0===i?"/":i,s=t.text,c=void 0===s?"":s,l=t.link,d=void 0===l?"":l,p=t.data,f=void 0===p?{}:p;return n[u](Object.assign({},r,{changeMenuRoute:this.changeMenuRoute,text:c,backRoute:a,data:f,link:d}))}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"toggleMenu",value:function(){var e=this.state.menuId;(0,this.props.dispatch)({type:T,payload:{menuId:e}})}},{key:"shouldOpen",value:function(){var e=this.state.menuId,t=this.props._menu,r=t.isOpen,n=t.activeMenuId,o=r&&n===e||r&&null===n;return o}},{key:"render",value:function(){var e=this.props,t=e.MenuToggle,r=void 0===t?I:t,n=e.showMobileOnly,o=this.shouldOpen();return c.default.createElement("div",{className:d.default(U,y({},L,n)),ref:this.setWrapperRef},c.default.createElement("div",{onClick:this.toggleMenu},c.default.createElement(r,null)),c.default.createElement("div",{className:d.default(N,y({},w,o))},this.renderRoute()))}}],r&&f(t.prototype,r),n&&f(t,n),a}(c.default.Component);D.propTypes={_menu:p.default.any};var k=u.connect((function(e){return{_menu:e._menu}}))(D);t.CLOSE_MENU=R,t.GO_TO_MENU_ROUTE=b,t.GO_TO_MENU_ROUTE_AND_OPEN=A,t.Menu=k,t.OPEN_MENU=S,t.RESET=O,t.TOGGLE_MENU=T,t._menu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object.assign({},e,{isOpen:!0},t.payload.menuId&&{activeMenuId:t.payload.menuId});case R:return Object.assign({},e,{isOpen:!1});case T:return Object.assign({},e,{isOpen:!e.isOpen},t.payload.menuId&&{activeMenuId:t.payload.menuId});case b:return Object.assign({},e,{menuRoute:t.payload.menuRoute});case A:return Object.assign({},e,{isOpen:!0,menuRoute:t.payload.menuRoute,text:t.payload.text,link:t.payload.link},t.payload.backRoute&&{backRoute:t.payload.backRoute},{data:Object.assign({},t.payload.data)},t.payload.menuId&&{activeMenuId:t.payload.menuId});case O:return C;default:return e}},t.closeMenu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:R,payload:e}},t.default=function(e){return m(e),P({})},t.goToMenuRoute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:b,payload:e}},t.goToMenuRouteAndOpen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:A,payload:e}},t.openMenu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:S,payload:e}},t.resetMenu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:O,payload:e}},t.toggleMenu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:T,payload:e}}},52147:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},94811:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},19822:(e,t,r)=>{var n=r(94811),o=r(52147);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var u=0;u<16;++u)t[a+u]=i[u];return t||o(i)}},73378:(e,t,r)=>{"use strict";var n=r(18172),o=r(34857),a=r(72831),i=r(63687),u=r(87996),s=r(20573);function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=c(n),d=c(u),p=["CREATE_ACCOUNT","CREATE_ACCOUNT_SUCCESS","CREATE_ACCOUNT_ERROR","GET_HAS_PASSWORD","GET_HAS_PASSWORD_SUCCESS","GET_HAS_PASSWORD_ERROR","HAS_PASSWORD_RESET_AUTH","REQUEST_LOGIN_LINK","REQUEST_LOGIN_LINK_SUCCESS","REQUEST_LOGIN_LINK_ERROR","SET_LOGIN_EMAIL","SET_LOGIN_EMAIL_SUCCESS","SET_LOGIN_EMAIL_ERROR","REQUEST_PASSWORD_RESET","REQUEST_PASSWORD_RESET_SUCCESS","REQUEST_PASSWORD_RESET_ERROR","NEWSLETTER_SUBSCRIBE","NEWSLETTER_SUBSCRIBE_SUCCESS","NEWSLETTER_SUBSCRIBE_ERROR","USER_JOIN_GROUP","USER_JOIN_GROUP_SUCCESS","USER_JOIN_GROUP_ERROR","UPDATE","UPDATE_SUCCESS","UPDATE_ERROR","CONFIRMATION_EMAIL","DELETE_ACCOUNT","DELETE_ACCOUNT_SUCCESS","DELETE_ACCOUNT_ERROR","NEW_USER_REGISTRATION"],f=function(e){return{createAccount:function(t){return Object.assign({type:e.types.CREATE_ACCOUNT},t)},getHasPassword:function(t){return Object.assign({type:e.types.GET_HAS_PASSWORD},t)},hasPasswordResetAuth:function(t){return Object.assign({type:e.types.HAS_PASSWORD_RESET_AUTH},t)},requestLoginLink:function(t){return Object.assign({type:e.types.REQUEST_LOGIN_LINK},t)},setLoginEmail:function(t){return Object.assign({type:e.types.SET_LOGIN_EMAIL},t)},requestPasswordReset:function(t){return Object.assign({type:e.types.REQUEST_PASSWORD_RESET},t)},newsletterSubscribe:function(t){return Object.assign({type:e.types.NEWSLETTER_SUBSCRIBE},t)},userJoinGroup:function(t){return Object.assign({type:e.types.USER_JOIN_GROUP},t)},update:function(t){return Object.assign({type:e.types.UPDATE},t)},signupConfirmationEmail:function(t){return Object.assign({type:e.types.CONFIRMATION_EMAIL},t)},deleteAccount:function(t){return Object.assign({type:e.types.DELETE_ACCOUNT},t)}}},y={email:void 0,loginEmail:void 0,hasPassword:void 0,hasPasswordError:void 0,isNewRegistration:void 0,isFetching:!1,didJoinGroup:void 0,loginLinkSent:!1,loginLinkError:null,passwordResetSent:!1,passwordResetError:null,hasPasswordResetAuth:!1,updateAccount:{isUpdating:!1,userDataUpdated:null,emailDataUpdated:null,error:!1},accountDeleted:!1},_=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return l.default(e,(function(e){switch(n){case r.types.HAS_PASSWORD_RESET_AUTH:e.hasPasswordResetAuth=!0;break;case r.types.CREATE_ACCOUNT:e=Object.assign({},r.initialState,{isFetching:!0});break;case r.types.REQUEST_LOGIN_LINK:e.loginLinkSent=!1,e.isNewRegistration=y.isNewRegistration;break;case r.types.REQUEST_LOGIN_LINK_SUCCESS:e.loginLinkSent=!0,e.isNewRegistration=o.isNewRegistration;break;case r.types.REQUEST_LOGIN_LINK_ERROR:e.loginLinkSent=!1,e.loginLinkError=a.message,e.isNewRegistration=!1;break;case r.types.SET_LOGIN_EMAIL:e.loginEmail=y.loginEmail;break;case r.types.SET_LOGIN_EMAIL_SUCCESS:e.loginEmail=o.loginEmail;break;case r.types.SET_LOGIN_EMAIL_ERROR:e.loginEmail=a.message;break;case r.types.REQUEST_PASSWORD_RESET:e.passwordResetSent=!1;break;case r.types.REQUEST_PASSWORD_RESET_SUCCESS:e.passwordResetSent=!0;break;case r.types.REQUEST_PASSWORD_RESET_ERROR:e.passwordResetSent=!1,e.passwordResetError=a.message;break;case r.types.GET_HAS_PASSWORD:e.hasPassword=y.has_password,e.isFetching=!0;break;case r.types.GET_HAS_PASSWORD_SUCCESS:e.hasPassword=o.has_password,e.isFetching=!1;break;case r.types.GET_HAS_PASSWORD_ERROR:e.isFetching=!1,e.hasPasswordError=a;break;case r.types.CREATE_ACCOUNT_SUCCESS:e.isFetching=!1,e.isNewRegistration=o.isNewRegistration;break;case r.types.CREATE_ACCOUNT_ERROR:e.isFetching=!1,void 0!==a.hasPassword&&a.email&&(e.email=a.email,e.hasPassword=a.hasPassword),void 0!==a.isNewRegistration&&a.email&&(e.email=a.email,e.isNewRegistration=a.isNewRegistration);break;case r.types.USER_JOIN_GROUP_SUCCESS:e.didJoinGroup=!0;break;case r.types.USER_JOIN_GROUP_ERROR:e.didJoinGroup=!1;break;case r.types.UPDATE:e.updateAccount.isUpdating=!0,e.updateAccount.error=!1;break;case r.types.UPDATE_SUCCESS:e.updateAccount.isUpdating=!1,e.updateAccount.userDataUpdated=!(null==o||!o.userDataUpdated),e.updateAccount.emailDataUpdated=!(null==o||!o.emailDataUpdated);break;case r.types.UPDATE_ERROR:e.updateAccount.isUpdating=!1,e.updateAccount.userDataUpdated=!(null==o||!o.userDataUpdated),e.updateAccount.emailDataUpdated=!(null==o||!o.emailDataUpdated),e.updateAccount.error=null!=a&&a.message?a:{message:a};break;case r.types.CONFIRMATION_EMAIL:e.email=null==o?void 0:o.email;break;case r.types.DELETE_ACCOUNT_SUCCESS:e.accountDeleted=!0}}))};var E=function(e){return{createAccount:function*(t){yield function*(e){var t=e.types,r=e.email,n=e.publisher_id,u=e.company_slug;try{if((yield o.putResolve({type:a.REQUEST,config:{method:"get",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER(),headers:{Accept:"application/json","Content-Type":"application/json",publisherId:n},timeout:3e4,params:{email:r}}})).data.has_password)throw{email:r,hasPassword:!0};var s=(yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER_LINK(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:{return_token:!0,articleId:null,email:r,newsletter_ids:[],redirectUrl:"".concat(window.location.origin,"/").concat(u,"/login/token")}}})).data;if(!s.isNewRegistration)throw{email:r,hasPassword:!1,isNewRegistration:!1};yield o.putResolve({type:a.STORE_TOKENS,data:s}),yield o.put({type:t.CREATE_ACCOUNT_SUCCESS,payload:Object.assign({},s)})}catch(e){yield o.put({type:t.CREATE_ACCOUNT_ERROR,error:e.message})}}(Object.assign({},t,e))},getHasPassword:function*(t){yield function*(e){var t=e.types,r=e.email,n=e.publisherId;try{var u=(yield o.putResolve({type:a.REQUEST,config:{method:"get",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER(),headers:{Accept:"application/json","Content-Type":"application/json",publisherId:n},timeout:3e4,params:{email:r}}})).data;if(u.error)throw new Error("Error occured!");yield o.put({type:t.GET_HAS_PASSWORD_SUCCESS,payload:Object.assign({},u)})}catch(e){yield o.put({type:t.GET_HAS_PASSWORD_ERROR,error:e.message})}}(Object.assign({},t,e))},newsletterSubscribe:function*(t){yield function*(e){var t=e.types,r=e.newsletterIds,n=e.publisherId,u=e.sync,s=e.onlyAddNewsletters,c=void 0!==s&&s,l=e.loaderInvalidationEvent,d=void 0===l?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:l;try{var p=(yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.NEWSLETTERS_SUBSCRIBE(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:{newsletters:r,sync:u,publisherId:n,only_add_newsletters:c}}})).data;yield o.put(yield o.call(d,{payload:{scope:["user"]}})),yield o.put({type:t.NEWSLETTER_SUBSCRIBE_SUCCESS,payload:Object.assign({},p)})}catch(e){yield o.put({type:t.NEWSLETTER_SUBSCRIBE_ERROR,error:e.message})}}(Object.assign({},t,e))},requestLoginLink:function*(t){yield function*(e){var t=e.articleId,r=e.customProperties,n=e.email,u=e.newsletters,s=e.origin,c=e.popupId,l=e.publisherId,d=e.redirectUrl,p=e.referer,f=e.types,y=e.utm,_=e.loaderInvalidationEvent,E=void 0===_?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:_;try{var m=(yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER_LINK(),params:Object.assign({},!!y&&{utm:y}),headers:Object.assign({Accept:"application/json","Content-Type":"application/json",publisherid:l},!!p&&{"prev-page":p},!!s&&{"current-url":s}),timeout:3e4,data:{return_token:!0,article_id:t,form_id:c,email:n,newsletter_ids:u,custom_properties:r,redirect_url:d}}})).data;m.isNewRegistration&&(yield o.putResolve({type:a.STORE_TOKENS,data:m}),yield o.put({type:f.NEW_USER_REGISTRATION}),yield o.put(yield o.call(E,{payload:{scope:["user"]}}))),yield o.put({type:f.REQUEST_LOGIN_LINK_SUCCESS,payload:Object.assign({},m)})}catch(e){e.response&&e.response.data&&e.response.data.message?yield o.put({type:f.REQUEST_LOGIN_LINK_ERROR,error:e.response.data}):yield o.put({type:f.REQUEST_LOGIN_LINK_ERROR,error:e.message})}}(Object.assign({},t,e))},setLoginEmail:function*(t){yield function*(e){var t=e.email,r=e.types;try{yield o.put({type:r.SET_LOGIN_EMAIL_SUCCESS,payload:{loginEmail:t}})}catch(e){var n,a;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.message?yield o.put({type:r.SET_LOGIN_EMAIL_ERROR,error:e.response.data}):yield o.put({type:r.SET_LOGIN_EMAIL_ERROR,error:e.message})}}(Object.assign({},t,e))},requestPasswordReset:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=e.email,u=e.redirectUrl;try{var s=(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER_RESET(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:r},timeout:3e4,data:{redirectUrl:u,email:n,publisherId:r}}})).data;if(!s.success)throw new Error("unable to request password reset");yield o.put({type:t.REQUEST_PASSWORD_RESET_SUCCESS,payload:Object.assign({},s)})}catch(e){e.response&&e.response.data&&e.response.data.message?yield o.put({type:t.REQUEST_PASSWORD_RESET_ERROR,error:e.response.data}):yield o.put({type:t.REQUEST_PASSWORD_RESET_ERROR,error:e.message})}}(Object.assign({},t,e))},update:function*(t){yield function*(e){var t,r=e.types,n=e.first_name,u=e.last_name,s=e.email,c=e.password,l=e.oldPassword,d=e.publisherId,p=e.hasPasswordResetAuth,f=e.redirectUrl,y=e.loaderInvalidationEvent,_=void 0===y?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:y,E=Object.assign({},n&&{first_name:n},u&&{last_name:u},s&&{email:s},c&&!p&&Object.assign({},l&&{old_password:l},c&&{new_password:c}),{redirect_url:f});try{if(Object.keys(E).length){if(!(t=(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:i.ME(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:d},timeout:3e4,data:E}})).data))throw Error("no user data");yield o.put(yield o.call(_,{payload:{scope:["user"]}}))}if(c&&p&&!(t=(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:d},timeout:3e4,data:Object.assign({},c&&{password:c},{adBlocking:!1,origin:window.location.href,prev_page:"",publisherId:d,taxonomies:{}})}})).data))throw Error("no user data");yield o.put({type:r.UPDATE_SUCCESS,payload:Object.assign({},t&&{userDataUpdated:!0},s&&{emailDataUpdated:!0})})}catch(e){var m;yield o.put({type:r.UPDATE_ERROR,error:(null===(m=e.response)||void 0===m?void 0:m.data.message)||e.message,payload:Object.assign({},(n||u||c)&&{userDataUpdated:!1},s&&{emailDataUpdated:!1})})}}(Object.assign({},t,e))},userJoinGroup:function*(t){yield function*(e){var t=e.types,r=e.code,n=e.groupId,u=e.newsletters,s=e.customFields,c=e.publisherId,l=e.loaderInvalidationEvent,d=void 0===l?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:l;try{var p=Object.assign({},r&&{code:r},u&&{newsletter_ids:u},s&&{custom_properties:s}),f=(yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:"".concat(i.GROUPS_USER(),"/").concat(n),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:c},timeout:3e4,data:p}})).data;yield o.put(yield o.call(d,{payload:{scope:["user"]}})),yield o.put({type:t.USER_JOIN_GROUP_SUCCESS,payload:Object.assign({},f)})}catch(e){yield o.put({type:t.USER_JOIN_GROUP_ERROR,error:e.message})}}(Object.assign({},t,e))},deleteAccount:function*(t){yield function*(e){var t=e.userId,r=e.publisherId,n=e.types;try{if(!(yield o.putResolve({type:a.REQUEST,config:{method:"delete",baseURL:i.PICO_API_URL(),url:i.ME({id:t}),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:r},timeout:3e4,params:{adBlocking:!1,origin:window.location.href,prev_page:"",publisherId:r,taxonomies:{}}}})).data.success)throw new Error("delete account error");yield o.put({type:n.DELETE_ACCOUNT_SUCCESS,payload:{}})}catch(e){console.log(e),yield o.put({type:n.DELETE_ACCOUNT_ERROR,error:e})}}(Object.assign({},t,e))}}},m=function(e){var t=e.types,r=e.sagas;return[o.takeEvery(t.CREATE_ACCOUNT,r.createAccount),o.takeEvery(t.GET_HAS_PASSWORD,r.getHasPassword),o.takeEvery(t.REQUEST_LOGIN_LINK,r.requestLoginLink),o.takeEvery(t.SET_LOGIN_EMAIL,r.setLoginEmail),o.takeEvery(t.REQUEST_PASSWORD_RESET,r.requestPasswordReset),o.takeEvery(t.NEWSLETTER_SUBSCRIBE,r.newsletterSubscribe),o.takeEvery(t.USER_JOIN_GROUP,r.userJoinGroup),o.takeEvery(t.UPDATE,r.update),o.takeEvery(t.DELETE_ACCOUNT,r.deleteAccount)]},h=function(){return{account:new d.default.Selector((function(){return function(e){return null==e?void 0:e.account}})),isNewRegistration:new d.default.Selector((function(e){return s.createSelector(e.account,(function(e){return e.isNewRegistration}))})),email:new d.default.Selector((function(e){return s.createSelector(e.account,(function(e){return e.email}))})),loginEmail:new d.default.Selector((function(e){return s.createSelector(e.account,(function(e){return e.loginEmail}))})),isFetching:new d.default.Selector((function(e){return s.createSelector(e.account,(function(e){return e.isFetching}))})),isNotFetching:new d.default.Selector((function(e){return s.createSelector(e.isFetching,(function(e){return!e}))})),hasPassword:new d.default.Selector((function(e){return s.createSelector(e.account,(function(e){return e.hasPassword}))}))}},v="account";t.ZP=function(e){var t=e.store,r=void 0===t?v:t,n=e.createDuck,o=e.initialState,a=void 0===o?y:o,i=e.creators,u=void 0===i?f:i,s=e.types,c=void 0===s?p:s,l=e.reducer,d=void 0===l?_:l,g=e.sagas,S=void 0===g?E:g,R=e.takes,T=void 0===R?m:R,b=e.selectors,A=void 0===b?h:b;return n({store:r,initialState:a}).extend({creators:u,types:c,reducer:d,sagas:S,takes:T,selectors:A})}},90559:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(63687),u=r(72831),s=r(87996),c=r(20573);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(o),f=l(s);function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=d.default({baseActionCreatorName:"getArticle",baseActionTypeName:"GET_ARTICLE"}),m=d.default({baseActionCreatorName:"updateArticle",baseActionTypeName:"UPDATE_ARTICLE"}),h=d.default({baseActionCreatorName:"authenticatedArticleRead",baseActionTypeName:"AUTHENTICATED_ARTICLE_READ"}),v=d.default({baseActionCreatorName:"authenticatedArticleVisit",baseActionTypeName:"AUTHENTICATED_ARTICLE_VISIT"}),g=d.default({baseActionCreatorName:"guestArticleRead",baseActionTypeName:"GUEST_ARTICLE_READ"}),S=d.default({baseActionCreatorName:"guestArticleVisit",baseActionTypeName:"GUEST_ARTICLE_VISIT"}),R=[].concat(y(E.types),y(m.types),y(h.types),y(v.types),y(g.types),y(S.types)),T=function(e){return Object.assign({},E.creators(e),m.creators(e),h.creators(e),v.creators(e),g.creators(e),S.creators(e))},b={data:null,error:null,auth:{data:null,error:null},guest:{data:null,error:null}},A=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return p.default(e,(function(e){switch(n){case r.types.UPDATE_ARTICLE:case r.types.GET_ARTICLE:e.data=b.data,e.error=b.error;break;case r.types.UPDATE_ARTICLE_SUCCESS:case r.types.GET_ARTICLE_SUCCESS:e.data=o;break;case r.types.UPDATE_ARTICLE_ERROR:case r.types.GET_ARTICLE_ERROR:e.error=a;break;case r.types.AUTHENTICATED_ARTICLE_VISIT:case r.types.AUTHENTICATED_ARTICLE_READ:e.auth=b.auth;break;case r.types.AUTHENTICATED_ARTICLE_VISIT_SUCCESS:case r.types.AUTHENTICATED_ARTICLE_READ_SUCCESS:e.auth.data=o;break;case r.types.AUTHENTICATED_ARTICLE_VISIT_ERROR:case r.types.AUTHENTICATED_ARTICLE_READ_ERROR:e.auth.error=a;break;case r.types.GUEST_ARTICLE_VISIT:case r.types.GUEST_ARTICLE_READ:e.guest=b.guest;break;case r.types.GUEST_ARTICLE_VISIT_SUCCESS:case r.types.GUEST_ARTICLE_READ_SUCCESS:e.guest.data=o;break;case r.types.GUEST_ARTICLE_VISIT_ERROR:case r.types.GUEST_ARTICLE_READ_ERROR:e.guest.error=a}}))};var O=function(e){return{getArticle:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ARTICLE(),"/").concat(r),method:"get"})).data;if(!n)throw new Error("unable to fetch article");yield a.put({type:t.GET_ARTICLE_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_ARTICLE_ERROR,error:(null==e?void 0:e.message)||"GET_ARTICLE_ERROR"})}}(Object.assign({},t,e))},updateArticle:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ARTICLE(),"/").concat(r.id),method:"put",data:r})).data;if(!n)throw new Error("unable to update article");yield a.put({type:t.UPDATE_ARTICLE_SUCCESS,payload:n})}catch(e){yield a.put({type:t.UPDATE_ARTICLE_ERROR,error:(null==e?void 0:e.message)||"UPDATE_ARTICLE_ERROR"})}}(Object.assign({},t,e))},authenticatedArticleRead:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoApiHelper,{url:"".concat(i.ARTICLE(),"/").concat(r.id,"/read"),method:"post",data:r})).data;if(!n)throw new Error("unable to authenticate article read");yield a.put({type:t.AUTHENTICATED_ARTICLE_READ_SUCCESS,payload:n})}catch(e){yield a.put({type:t.AUTHENTICATED_ARTICLE_READ_ERROR,error:(null==e?void 0:e.message)||"AUTHENTICATED_ARTICLE_READ_ERROR"})}}(Object.assign({},t,e))},authenticatedArticleVisit:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ARTICLE(),"/").concat(r.id,"/visit"),method:"post",data:r})).data;if(!n)throw new Error("unable to authenticate article visit");yield a.put({type:t.AUTHENTICATED_ARTICLE_VISIT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.AUTHENTICATED_ARTICLE_VISIT_ERROR,error:(null==e?void 0:e.message)||"AUTHENTICATED_ARTICLE_VISIT_ERROR"})}}(Object.assign({},t,e))},guestArticleRead:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ARTICLE(),"/").concat(r.id,"/read/guest"),method:"post",data:r})).data;if(!n)throw new Error("unable to guest article read");yield a.put({type:t.GUEST_ARTICLE_READ_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GUEST_ARTICLE_READ_ERROR,error:(null==e?void 0:e.message)||"GUEST_ARTICLE_READ_ERROR"})}}(Object.assign({},t,e))},guestArticleVisit:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ARTICLE(),"/").concat(r.id,"/visit/guest"),method:"post",data:r})).data;if(!n)throw new Error("unable to guest article visit");yield a.put({type:t.GUEST_ARTICLE_VISIT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GUEST_ARTICLE_VISIT_ERROR,error:(null==e?void 0:e.message)||"GUEST_ARTICLE_VISIT_ERROR"})}}(Object.assign({},t,e))}}},C=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_ARTICLE,r.getArticle),a.takeEvery(t.UPDATE_ARTICLE,r.updateArticle),a.takeEvery(t.AUTHENTICATED_ARTICLE_READ,r.authenticatedArticleRead),a.takeEvery(t.AUTHENTICATED_ARTICLE_VISIT,r.authenticatedArticleVisit),a.takeEvery(t.GUEST_ARTICLE_READ,r.guestArticleRead),a.takeEvery(t.GUEST_ARTICLE_VISIT,r.guestArticleVisit)]},P=function(){return{article:new f.default.Selector((function(){return function(e){return null==e?void 0:e.article}})),getArticle:new f.default.Selector((function(e){return c.createSelector(e.article,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return t}))})),getAuthArticle:new f.default.Selector((function(e){return c.createSelector(e.article,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.auth;return t.data}))})),getGuestArticle:new f.default.Selector((function(e){return c.createSelector(e.article,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.guest;return t.data}))}))}},I="article";t.ZP=function(e){return(0,e.createDuck)({store:I,initialState:b}).extend({creators:T,types:R,reducer:A,sagas:O,takes:C,selectors:P})}},82289:(e,t,r)=>{"use strict";var n=r(18172),o=r(34857),a=r(72831),i=r(63687),u=r(88924),s=r(80129);function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=c(n),d=c(s),p=["LOGIN","LOGIN_SUCCESS","LOGIN_ERROR","SOCIAL_LOGIN","SOCIAL_LOGIN_SUCCESS","SOCIAL_LOGIN_ERROR","LOGOUT","LOGOUT_SUCCESS","LOGOUT_ERROR","USE_REFRESH_TOKEN","USE_REFRESH_TOKEN_SUCCESS","USE_REFRESH_TOKEN_ERROR","TOKEN_LOGIN","TOKEN_LOGIN_SUCCESS","TOKEN_LOGIN_ERROR","CLAIM_MAGIC_LINK","CLAIM_MAGIC_LINK_SUCCESS","CLAIM_MAGIC_LINK_ERROR","REGISTER_CONFIRM","REGISTER_CONFIRM_SUCCESS","REGISTER_CONFIRM_ERROR"],f=function(e){return{login:function(t){return Object.assign({type:e.types.LOGIN},t)},logout:function(t){return Object.assign({type:e.types.LOGOUT},t)},useRefreshToken:function(){return{type:e.types.USE_REFRESH_TOKEN}},tokenLogin:function(t){return Object.assign({type:e.types.TOKEN_LOGIN},t)},socialLogin:function(t){return Object.assign({type:e.types.SOCIAL_LOGIN},t)},claimMagicLink:function(t){return{type:e.types.CLAIM_MAGIC_LINK,payload:t}},registerConfirm:function(t){return{type:e.types.REGISTER_CONFIRM,payload:t}}}},y={claim:null,isAuthed:!1,error:null,redirectUrl:null},_=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return l.default(e,(function(e){switch(n){case r.types.LOGIN:e.error=r.initialState.error;break;case r.types.LOGIN_SUCCESS:e.isAuthed=!0;break;case r.types.LOGIN_ERROR:e.error=a;break;case r.types.SOCIAL_LOGIN:e.error=r.initialState.error;break;case r.types.SOCIAL_LOGIN_ERROR:e.error=a;break;case r.types.LOGOUT:e.error=r.initialState.error;break;case r.types.LOGOUT_SUCCESS:e.isAuthed=!1,e.error=r.initialState.error;break;case r.types.TOKEN_LOGIN:e.isAuthed=r.initialState.isAuthed,e.error=r.initialState.error;break;case r.types.TOKEN_LOGIN_SUCCESS:e.isAuthed=!0,e.error=r.initialState.error;break;case r.types.TOKEN_LOGIN_ERROR:e.isAuthed=!1,e.error=a;break;case r.types.CLAIM_MAGIC_LINK:e.claim=o.claim;break;case r.types.CLAIM_MAGIC_LINK_SUCCESS:e.claim=r.initialState.claim;break;case r.types.CLAIM_MAGIC_LINK_ERROR:e.claim=r.initialState.claim,e.error=a;break;case r.types.REGISTER_CONFIRM_SUCCESS:e.redirectUrl=o.redirectUrl;break;case r.types.REGISTER_CONFIRM_ERROR:e.redirectUrl=!1}}))};var E=function(e){return{claimMagicLink:function*(t){yield function*(e){var t,r=e.types,n=e.creators,u=e.payload;t="publisher"===u.scope?i.OAUTH_PUBLISHER_LINK():i.OAUTH_USER_LOGIN();try{if(!u.claim)throw Error("token claim is required");var s=(yield o.putResolve({type:a.REQUEST,config:{method:"get",baseURL:i.PICO_API_URL(),url:t,headers:{Accept:"application/json","Content-Type":"application/json"},params:{token_claim:u.claim},timeout:3e4}})).data;yield o.putResolve(n.tokenLogin({accessToken:s.token,refreshToken:s.refresh_token})),yield o.put({type:r.CLAIM_MAGIC_LINK_SUCCESS,payload:{accessToken:s.token,refreshToken:s.refresh_token}})}catch(e){yield o.put({type:r.CLAIM_MAGIC_LINK_ERROR,error:e.message})}}(Object.assign({},t,e))},login:function*(t){yield function*(e){var t=e.types,r=e.creators,n=e.email,u=e.password,s=e.publisher_id,c=e.options,l=(c=void 0===c?{}:c).exchangeClaim;try{if(!n)throw Error("email must be provided");if(!u)throw Error("password must be provided");if(!s)throw Error("publisher id must be provided");var d=(yield o.putResolve({type:a.GET_TOKEN,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER_LOGIN(),headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e4,data:{email:n,password:u,publisher_id:s}}})).data,p=null==d?void 0:d.token,f=null==d?void 0:d.refresh_token,y=null==d?void 0:d.claim;if(y&&"function"==typeof l){var _=yield o.call(l,y);null!=_&&_.token&&null!=_&&_.refresh_token&&(p=null==_?void 0:_.token,f=null==_?void 0:_.refresh_token)}p&&f&&(yield o.putResolve(r.tokenLogin({accessToken:p,refreshToken:f}))),yield o.put({type:t.LOGIN_SUCCESS,payload:Object.assign({},d)})}catch(e){var E=e.response&&e.response.data&&e.response.data.message;yield o.put({type:t.LOGIN_ERROR,error:E||e.message})}}(Object.assign({},t,e))},logout:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=e.tokenKey,s=e.withNetworkRequest,c=void 0===s||s;try{var l=yield o.select();yield o.put({type:u.RESET}),c&&(yield o.putResolve({type:a.REQUEST,config:{method:"delete",baseURL:i.PICO_API_URL(),url:i.OAUTH_USER(),headers:{Accept:"application/json","Content-Type":"application/json",refreshtoken:l._network.refresh_token[n],publisherid:r},timeout:3e4}})),yield o.putResolve({type:a.REMOVE_TOKENS}),yield o.put({type:t.LOGOUT_SUCCESS,payload:{response:{}}})}catch(e){yield o.putResolve({type:a.REMOVE_TOKENS}),yield o.put({type:t.LOGOUT_ERROR,error:e.message})}}(Object.assign({},t,e))},socialLogin:function*(t){yield function*(e){var t=e.types,r=e.creators,n=e.error,a=e.accessToken,i=e.refreshToken,u=e.newRegisteredUser,s=void 0===u?null:u;try{if(n)throw new Error(n);yield o.putResolve(r.tokenLogin({accessToken:a,refreshToken:i})),yield o.put({type:t.SOCIAL_LOGIN_SUCCESS,payload:{accessToken:a,refreshToken:i,newRegisteredUser:s}})}catch(n){yield o.put({type:t.SOCIAL_LOGIN_ERROR,error:n.message})}}(Object.assign({},t,e))},tokenLogin:function*(t){yield function*(e){var t=e.types,r=e.accessToken,n=e.refreshToken;try{if(!r)throw Error("access token is required for token login");if(!n)throw Error("refresh token is required for token login");yield o.putResolve({type:a.STORE_TOKENS,access_token:r,refresh_token:n}),yield o.put({type:t.TOKEN_LOGIN_SUCCESS,payload:{accessToken:r,refreshToken:n}})}catch(e){yield o.put({type:t.TOKEN_LOGIN_ERROR,error:e.message})}}(Object.assign({},t,e))},useRefreshToken:function*(t){yield function*(e){var t=e.types;try{yield o.putResolve({type:a.REFRESH_TOKEN}),yield o.put({type:t.USE_REFRESH_TOKEN_SUCCESS,payload:{response:{}}})}catch(e){yield o.put({type:t.USE_REFRESH_TOKEN_ERROR,error:e.message})}}(Object.assign({},t,e))},registerConfirm:function*(t){yield function*(e){var t=e.payload,r=t.email,n=t.publisherId,u=t.verification,s=e.types;try{var c=yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.USERS_REGISTER_CONFIRM(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:{email:r,newsletter_ids:[],publisherId:n,verification:u}}});if(!c.data)throw new Error("no response data");if(c.data.error)throw new Error(c.error);if(!c.data.redirect_url)throw new Error("no redirect_url");var l=c.data.redirect_url,p=l.split("?");if(!p[1])throw new Error("unable to split redirect URL ".concat(l));var f=d.default.parse(p[1]);if(!f.pico_access_token||!f.pico_refresh_token)throw new Error("unable to parse redirect URL: ".concat(f));yield o.putResolve({type:a.STORE_TOKENS,access_token:f.pico_access_token,refresh_token:f.pico_refresh_token}),yield o.put({type:s.REGISTER_CONFIRM_SUCCESS,payload:{redirectUrl:l,accessToken:f.pico_access_token,refreshToken:f.pico_refresh_token}})}catch(e){yield o.put({type:s.REGISTER_CONFIRM_ERROR,error:e.message})}}(Object.assign({},t,e))}}},m=function(e){var t=e.types,r=e.sagas;return[o.takeEvery(t.LOGIN,r.login),o.takeEvery(t.LOGOUT,r.logout),o.takeEvery(t.USE_REFRESH_TOKEN,r.useRefreshToken),o.takeLatest(t.TOKEN_LOGIN,r.tokenLogin),o.takeLatest(t.SOCIAL_LOGIN,r.socialLogin),o.takeLatest(t.CLAIM_MAGIC_LINK,r.claimMagicLink),o.takeLatest(t.REGISTER_CONFIRM,r.registerConfirm),o.takeLatest(t.USE_REFRESH_TOKEN_ERROR,r.logout)]},h="auth";t.ZP=function(e){var t=e.store,r=void 0===t?h:t,n=e.createDuck,o=e.initialState,a=void 0===o?y:o,i=e.creators,u=void 0===i?f:i,s=e.types,c=void 0===s?p:s,l=e.reducer,d=void 0===l?_:l,v=e.sagas,g=void 0===v?E:v,S=e.takes,R=void 0===S?m:S,T=e.selectors;return n({store:r,initialState:a}).extend({creators:u,types:c,reducer:d,sagas:g,takes:R,selectors:T})}},94306:(e,t,r)=>{"use strict";var n=r(18172),o=r(34857),a=r(63687),i=r(72831),u=r(87996);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=s(n),l=s(u),d=["EXCHANGE_CLAIM","EXCHANGE_CLAIM_SUCCESS","EXCHANGE_CLAIM_ERROR"],p=function(e){return{exchangeClaim:function(t){return Object.assign({type:e.types.EXCHANGE_CLAIM},t)}}},f={claim:null,data:null,error:null},y=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return c.default(e,(function(e){switch(n){case r.types.EXCHANGE_CLAIM:e.claim=f.claim,e.data=f.data,e.error=f.error;break;case r.types.EXCHANGE_CLAIM_SUCCESS:e.data=o;break;case r.types.EXCHANGE_CLAIM_ERROR:e.error=a}}))};var _=function(e){return{exchangeClaim:function*(t){yield function*(e){var t=e.types,r=e.claim,n=e.scope,u=e.publisherId;try{var s="".concat("publisher"===n?a.AUTH_PUBLISHER_CLAIM():a.AUTH_USER_CLAIM(),"/").concat(r),c=(yield o.call(i.picoAPIHelper,{url:s,method:"get",headers:{Accept:"application/json","Content-Type":"application/json",publisherid:u}})).data;if(!c)throw new Error("unable to fetch article");yield o.put({type:t.EXCHANGE_CLAIM_SUCCESS,payload:c})}catch(e){yield o.put({type:t.EXCHANGE_CLAIM_ERROR,error:(null==e?void 0:e.message)||"GET_ARTICLE_ERROR"})}}(Object.assign({},t,e))}}},E=function(e){var t=e.types,r=e.sagas;return[o.takeEvery(t.EXCHANGE_CLAIM,r.exchangeClaim)]},m=function(){return{getClaim:new l.default.Selector((function(){return function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.claim}})),getTokens:new l.default.Selector((function(){return function(e){var t;return null==e||null===(t=e.claim)||void 0===t?void 0:t.data}}))}},h="claim";t.ZP=function(e){return(0,e.createDuck)({store:h,initialState:f}).extend({creators:p,types:d,reducer:y,sagas:_,takes:E,selectors:m})},t.tK=function(e){return function*(t){if(!t)throw new Error("no claim provided");yield o.put(yield o.call(e.creators.exchangeClaim,{claim:t}));var r=yield o.take([e.types.EXCHANGE_CLAIM_ERROR,e.types.EXCHANGE_CLAIM_SUCCESS]);if(r.type===e.types.EXCHANGE_CLAIM_ERROR)throw new Error(r.error);return r.payload}}},8428:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(72831),u=r(63687),s=r(87996),c=r(20573),l=r(36463);function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=d(n),f=d(o),y=d(s);function _(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=p.default({baseActionCreatorName:"setClient",baseActionTypeName:"SET_CLIENT"}),h=p.default({baseActionCreatorName:"getClient",baseActionTypeName:"GET_CLIENT"}),v=[].concat(_(m.types),_(h.types)),g=function(e){return Object.assign({},m.creators(e),h.creators(e))},S={id:null,name:null,username:null,icon:null,cover_photo:null,url:null,primary_urls:[],url_staging:null,url_development:null,url_redirect:null,styling:{linkColor:null},taxonomies:[],support_email:null,default_currency:null,default_anonymous_popup_id:null,default_registered_popup_id:null,default_landing_page_id:null,default_payment_landing_page_id:null,send_receipt:!1,hide_paragraph_number:null,article_html_id:null},R=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return f.default(e,(function(e){switch(n){case r.types.SET_CLIENT:e.data=S.data,e.error=S.error;break;case r.types.SET_CLIENT_SUCCESS:for(var t in o)e[t]=o[t];break;case r.types.SET_CLIENT_ERROR:e.error=a;break;case r.types.GET_CLIENT:break;case r.types.GET_CLIENT_SUCCESS:for(var i in o)e[i]=o[i];break;case r.types.GET_CLIENT_ERROR:e.error=a}}))};var T=function(e){return{setClient:function*(t){yield function*(e){var t=e.types,r=e.client;try{yield a.put({type:t.SET_CLIENT_SUCCESS,payload:r})}catch(e){yield a.put({type:t.SET_CLIENT_ERROR,error:(null==e?void 0:e.message)||"SET_CLIENT_ERROR"})}}(Object.assign({},t,e))},getClient:function*(t){yield function*(e){var t=e.types,r=e.publisherId;try{var n=(yield a.putResolve({type:i.REQUEST,config:{method:"get",baseURL:u.PICO_API_URL(),url:"/client/query/".concat(r),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:r},timeout:3e4}})).data;if(!n)throw"Could not fetch client information";yield a.put({type:t.GET_CLIENT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_CLIENT_ERROR,error:(null==e?void 0:e.message)||"SET_CLIENT_ERROR"})}}(Object.assign({},t,e))}}},b=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.SET_CLIENT,r.setClient),a.takeEvery(t.GET_CLIENT,r.getClient)]},A=l.colors.getContrastColor,O=l.colors.isColor,C=function(){return{client:new y.default.Selector((function(){return function(e){return null==e?void 0:e.client}})),getClientError:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.error}))})),id:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.id}))})),tier:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.tier}))})),name:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.name}))})),username:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.username}))})),url:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.url}))})),clientId:new y.default.Selector((function(e){return c.createSelector(e.id,(function(e){return e}))})),publisherId:new y.default.Selector((function(e){return c.createSelector(e.id,(function(e){return e}))})),getAccessTier:new y.default.Selector((function(e){return c.createSelector(e.tier,(function(e){return e}))})),styling:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.styling||{}}))})),icon:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.icon}))})),supportEmail:new y.default.Selector((function(e){return c.createSelector(e.client,(function(e){return e.support_email}))})),picoColor:new y.default.Selector((function(){return function(){return"#834eff"}})),linkColor:new y.default.Selector((function(e){return c.createSelector((function(t){return Object.assign({},e.styling(t),{picoColor:e.picoColor()})}),(function(e){var t=e.linkColor,r=e.picoColor;return O(t)?t:r}))})),logoColor:new y.default.Selector((function(e){return c.createSelector((function(t){return Object.assign({},e.styling(t),{picoColor:e.picoColor()})}),(function(e){var t=e.logoColor,r=e.picoColor;return O(t)?t:r}))})),contrastColor:new y.default.Selector((function(e){return c.createSelector(e.linkColor,(function(e){return A(e)}))}))}},P="client";t.ZP=function(e){return(0,e.createDuck)({store:P,initialState:S}).extend({creators:g,types:v,reducer:R,sagas:T,takes:b,selectors:C})}},44542:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(63687),u=r(72831),s=r(33729),c=r(87996),l=r(20573);function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=d(n),f=d(o),y=d(s),_=d(c);function E(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=p.default({baseActionCreatorName:"getDownloadableFile",baseActionTypeName:"GET_DOWNLOADABLE_FILE"}),v=p.default({baseActionCreatorName:"getDownloadableFiles",baseActionTypeName:"GET_DOWNLOADABLE_FILES"}),g=[].concat(E(h.types),E(v.types)),S=function(e){return Object.assign({},h.creators(e),v.creators(e))},R={files:[],error:null},T=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return f.default(e,(function(e){switch(n){case r.types.GET_DOWNLOADABLE_FILES:e.files=R.files,e.error=R.error;break;case r.types.GET_DOWNLOADABLE_FILES_SUCCESS:e.files=o;break;case r.types.GET_DOWNLOADABLE_FILE_ERROR:case r.types.GET_DOWNLOADABLE_FILES_ERROR:e.error=a}}))};var b=function(e){return{getDownloadableFile:function*(t){yield function*(e){var t=e.types,r=e.fileId,n=e.fileName,o=e.publisherId;try{var s=(yield a.call(u.picoAPIHelper,{url:"".concat(i.DOWNLOADS(),"/").concat(r),method:"get",headers:{publisherid:o}})).data;if(!s)throw new Error("unable to fetch download");var c=s.downloadable_url,l=new XMLHttpRequest;l.open("GET",c,!0),l.responseType="blob",l.onload=function(e){y.default(e.target.response,n)},l.send(),yield a.put({type:t.GET_DOWNLOADABLE_FILE_SUCCESS,payload:s})}catch(e){yield a.put({type:t.GET_DOWNLOADABLE_FILE_ERROR,error:null==e?void 0:e.message})}}(Object.assign({},t,e))},getDownloadableFiles:function*(t){yield function*(e){var t=e.types,r=e.publisherId;try{var n=(yield a.call(u.picoAPIHelper,{url:i.DOWNLOADS(),method:"get",headers:{publisherid:r}})).data;if(!n)throw new Error("unable to fetch downloads");yield a.put({type:t.GET_DOWNLOADABLE_FILES_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_DOWNLOADABLE_FILES_ERROR,error:null==e?void 0:e.message})}}(Object.assign({},t,e))}}},A=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_DOWNLOADABLE_FILE,r.getDownloadableFile),a.takeEvery(t.GET_DOWNLOADABLE_FILES,r.getDownloadableFiles)]},O=function(){return{downloads:new _.default.Selector((function(){return function(e){return null==e?void 0:e.downloads}})),getDownloadableFiles:new _.default.Selector((function(e){return l.createSelector(e.downloads,(function(e){return e.files||[]}))}))}},C="downloads";t.ZP=function(e){return(0,e.createDuck)({store:C,initialState:R}).extend({creators:S,types:g,reducer:T,sagas:b,takes:A,selectors:O})}},60027:(e,t,r)=>{"use strict";var n=r(18172),o=r(87996),a=r(20573);function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=i(n),s=i(o),c=["ENABLE_FEATURE_FLAG","DISABLE_FEATURE_FLAG"],l=function(e){return{enableFeatureFlag:function(t){return{type:e.types.ENABLE_FEATURE_FLAG,payload:t}},disableFeatureFlag:function(t){return{type:e.types.DISABLE_FEATURE_FLAG,payload:t}}}},d={flags:[]},p=function(e,t,r){var n=t.type,o=t.payload;return u.default(e,(function(e){switch(n){case r.types.ENABLE_FEATURE_FLAG:o&&!e.flags.includes(o)&&e.flags.push((o||"").toLowerCase());break;case r.types.DISABLE_FEATURE_FLAG:e.flags=e.flags.filter((function(e){return e!==o}))}}))},f=function(){return{featureFlags:new s.default.Selector((function(){return function(e){return null==e?void 0:e.featureFlags}})),getFeatureFlags:new s.default.Selector((function(e){return a.createSelector(e.featureFlags,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flags;return t||[]}))})),getFeatureFlagIsEnabled:new s.default.Selector((function(e){return a.createSelector(e.getFeatureFlags,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t}),(function(e,t){return e.includes(t.toLowerCase())}))}))}},y="featureFlags";t.ZP=function(e){return(0,e.createDuck)({store:y,initialState:d}).extend({creators:l,types:c,reducer:p,selectors:f})}},81958:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(63687),u=r(72831),s=r(87996),c=r(20573);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(o),f=l(s);function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=d.default({baseActionCreatorName:"getDefaultLandingPage",baseActionTypeName:"GET_DEFAULT_LANDING_PAGE"}),m=d.default({baseActionCreatorName:"getLandingPage",baseActionTypeName:"GET_LANDING_PAGE"}),h=d.default({baseActionCreatorName:"getDefaultPopup",baseActionTypeName:"GET_DEFAULT_POPUP"}),v=d.default({baseActionCreatorName:"getPopup",baseActionTypeName:"GET_POPUP"}),g=[].concat(y(E.types),y(m.types),y(h.types),y(v.types)),S=function(e){return Object.assign({},E.creators(e),m.creators(e),h.creators(e),v.creators(e))},R={landingPages:{data:[],error:null},popups:{data:[],error:null},defaultPopup:null,defaultLandingPage:null,defaultPaymentLandingPage:null},T=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return p.default(e,(function(e){switch(n){case r.types.GET_LANDING_PAGE_SUCCESS:e.landingPages.data=o;break;case r.types.GET_DEFAULT_LANDING_PAGE_SUCCESS:e.defaultLandingPage=o.defaultLandingPage,e.defaultPaymentLandingPage=o.defaultLandingPage;break;case r.types.GET_LANDING_PAGE_ERROR:e.landingPages.error=a;break;case r.types.GET_DEFAULT_POPUP_SUCCESS:e.defaultPopup=o.defaultPopup;break;case r.types.GET_POPUP_SUCCESS:e.popups.data=o;break;case r.types.GET_POPUP_ERROR:e.popups.error=a}}))};var b=function(e){return{getDefaultLandingPage:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.FORMS_LANDING_PAGE(),"/").concat(r),method:"get"})).data;if(!n)throw new Error("unable to fetch default landing page");yield a.put({type:t.GET_DEFAULT_LANDING_PAGE_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_DEFAULT_LANDING_PAGE_ERROR,error:(null==e?void 0:e.message)||"GET_DEFAULT_LANDING_PAGE_ERROR"})}}(Object.assign({},t,e))},getLandingPage:function*(t){yield function*(e){var t=e.types,r=e.payload,n=r.publisherName,o=r.shortcode;try{var s=(yield a.call(u.picoAPIHelper,{url:"".concat(i.FORMS_LANDING_PAGE(),"/").concat(n,"/").concat(o),method:"get"})).data;if(!s)throw new Error("unable to fetch landing page");yield a.put({type:t.GET_LANDING_PAGE_SUCCESS,payload:s})}catch(e){yield a.put({type:t.GET_LANDING_PAGE_ERROR,error:(null==e?void 0:e.message)||"GET_LANDING_PAGE_ERROR"})}}(Object.assign({},t,e))},getDefaultPopup:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.FORMS_POPUP(),"/").concat(r),method:"get"})).data;if(!n)throw new Error("unable to fetch default popup");yield a.put({type:t.GET_DEFAULT_POPUP_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_DEFAULT_POPUP_ERROR,error:(null==e?void 0:e.message)||"GET_DEFAULT_POPUP_ERROR"})}}(Object.assign({},t,e))},getPopup:function*(t){yield function*(e){var t=e.types,r=e.payload,n=r.publisherName,o=r.shortcode;try{var s=(yield a.call(u.picoAPIHelper,{url:"".concat(i.FORMS_POPUP(),"/").concat(n,"/").concat(o),method:"get"})).data;if(!s)throw new Error("unable to fetch popup");yield a.put({type:t.GET_POPUP_SUCCESS,payload:s})}catch(e){yield a.put({type:t.GET_POPUP_ERROR,error:(null==e?void 0:e.message)||"GET_POPUP_ERROR"})}}(Object.assign({},t,e))}}},A=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_DEFAULT_LANDING_PAGE,r.getDefaultLandingPage),a.takeEvery(t.GET_LANDING_PAGE,r.getLandingPage),a.takeEvery(t.GET_DEFAULT_POPUP,r.getDefaultPopup),a.takeEvery(t.GET_POPUP,r.getPopup)]},O=function(){return{forms:new f.default.Selector((function(){return function(e){return null==e?void 0:e.forms}})),getLandingPage:new f.default.Selector((function(e){return c.createSelector(e.forms,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.landingPage;return t.data}))})),getPopup:new f.default.Selector((function(e){return c.createSelector(e.forms,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.popup;return t.data}))}))}},C="forms";t.ZP=function(e){return(0,e.createDuck)({store:C,initialState:R}).extend({creators:S,types:g,reducer:T,sagas:b,takes:A,selectors:O})}},20994:(e,t,r)=>{"use strict";var n=r(18172),o=r(34857),a=r(72831),i=r(63687),u=r(87996),s=r(20573);function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=c(n),d=c(u),p=["CREATE_GIFT","CREATE_GIFT_SUCCESS","CREATE_GIFT_ERROR","REDEEM_GIFT","REDEEM_GIFT_SUCCESS","REDEEM_GIFT_ERROR","CONVERT_GIFT","CONVERT_GIFT_SUCCESS","CONVERT_GIFT_ERROR","GET_GIFT","GET_GIFT_SUCCESS","GET_GIFT_ERROR","GET_GIFT_PRODUCT","GET_GIFT_PRODUCT_SUCCESS","GET_GIFT_PRODUCT_ERROR"],f=function(e){return{createGift:function(t){return Object.assign({type:e.types.CREATE_GIFT},t)},redeemGift:function(t){return Object.assign({type:e.types.REDEEM_GIFT},t)},convertGift:function(t){return Object.assign({type:e.types.CONVERT_GIFT},t)},getGift:function(t){return Object.assign({type:e.types.GET_GIFT},t)},getGiftProduct:function(t){return Object.assign({type:e.types.GET_GIFT_PRODUCT},t)}}},y={creatingGift:!1,didCreateGift:null,redeemingGift:!1,redeemGiftSuccess:null,redeemGiftError:null,redeemGiftErrorMessage:null,createGiftError:null,product:{loading:!1,data:{},error:null}},_=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return l.default(e,(function(e){switch(n){case r.types.CREATE_GIFT:e.creatingGift=!0,e.didCreateGift=r.initialState.didCreateGift,e.createGiftError=r.initialState.createGiftError;break;case r.types.CREATE_GIFT_SUCCESS:e.creatingGift=!1,e.didCreateGift=!0;break;case r.types.CREATE_GIFT_ERROR:e.creatingGift=!1,e.didCreateGift=!1,e.createGiftError=a;break;case r.types.REDEEM_GIFT:e.redeemingGift=!0,e.redeemGiftSuccess=r.initialState.redeemGiftSuccess,e.redeemGiftError=r.initialState.redeemGiftError;break;case r.types.REDEEM_GIFT_SUCCESS:e.redeemingGift=!1,e.redeemGiftSuccess=!0,e.redeemGiftError=!1;break;case r.types.REDEEM_GIFT_ERROR:e.redeemingGift=!1,e.redeemGiftSuccess=!1,e.redeemGiftError=!0,e.redeemGiftErrorMessage=o.error;break;case r.types.GET_GIFT_SUCCESS:e.giftId=o.giftId;break;case r.types.CONVERT_GIFT_SUCCESS:e.giftConversionSuccess=!0;break;case r.types.GET_GIFT_PRODUCT:e.product.data=r.initialState.product.data,e.product.error=r.initialState.product.error,e.product.loading=!0;break;case r.types.GET_GIFT_PRODUCT_SUCCESS:e.product.loading=!1,e.product.data=null==o?void 0:o.product;break;case r.types.GET_GIFT_PRODUCT_ERROR:e.product.loading=!1,e.product.error=null==o?void 0:o.error}}))};var E=function(e){return{redeemGift:function*(t){yield function*(e){var t=e.types,r=e.giftId,n=e.publisherId,u=e.customFields,s=e.newsletters,c=void 0===s?[]:s,l=e.loaderInvalidationEvent,d=void 0===l?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:l;try{if(!r)throw Error("giftId must be provided");if(!n)throw Error("publisherId must be provided");var p=(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:"".concat(i.PURCHASE_GIFT(),"/").concat(r),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:Object.assign({publisherId:n,status:"activated"},u&&{custom_properties:u},c.length&&{newsletter_ids:c})}})).data;if(404===p.status_code)throw"This gift has already been redeemed.";yield o.putResolve({type:a.STORE_TOKENS,access_token:p.token,refresh_token:p.refresh_token}),yield o.put(yield o.call(d,{payload:{scope:["user"]}})),yield o.put({type:t.REDEEM_GIFT_SUCCESS,payload:{}})}catch(e){console.log(e),yield o.put({type:t.REDEEM_GIFT_ERROR,payload:{error:e}})}}(Object.assign({},t,e))},createGift:function*(t){yield function*(e){var t=e.types,r=e.company_slug,n=e.custom_price,u=e.note,s=e.product_option_id,c=e.publisherId,l=e.recipient,d=e.sender,p=e.tier_id,f=e.redeemUrl,y=e.formId;try{var _={form_id:y,product_option_id:s,tier_id:p,custom_price:n,note:u,recipient:l,sender:d,adBlocking:!1,origin:window.location.href,post_id:null,post_type:"home",prev_page:"",publisherId:c,resource_ref:null,taxonomies:{},redeem_url:f||"".concat("https://trypico.com","/").concat(r,"/redeem-gift")},E=yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.PURCHASE_GIFT(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:c},timeout:3e4,data:_}});yield o.put({type:t.CREATE_GIFT_SUCCESS,payload:{data:E.data}})}catch(e){yield o.put({type:t.CREATE_GIFT_ERROR,error:e.message})}}(Object.assign({},t,e))},getGift:function*(t){yield function*(e){var t=e.types,r=e.publisherId;try{var n=(yield o.putResolve({type:a.REQUEST,config:{method:"get",baseURL:i.PICO_API_URL(),url:"".concat(i.PURCHASE_GIFT(),"?status=activated"),headers:Object.assign({Accept:"application/json","Content-Type":"application/json"},r&&{publisherid:r}),timeout:3e4}})).data;if(!n.id)throw"No gift found for user";yield o.put({type:t.GET_GIFT_SUCCESS,payload:{giftId:n.id}})}catch(e){yield o.put({type:t.GET_GIFT_ERROR,error:e.message})}}(Object.assign({},t,e))},getGiftProduct:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=e.giftId;try{var u=(yield o.putResolve({type:a.REQUEST,config:{method:"get",baseURL:i.PICO_API_URL(),url:"".concat(i.PURCHASE_GIFT(),"/product/").concat(n),headers:Object.assign({Accept:"application/json","Content-Type":"application/json"},r&&{publisherid:r}),timeout:3e4}})).data;if(!u.id)throw"No product found for gift";yield o.put({type:t.GET_GIFT_PRODUCT_SUCCESS,payload:{product:u}})}catch(e){yield o.put({type:t.GET_GIFT_PRODUCT_ERROR,error:e.message})}}(Object.assign({},t,e))},convertGift:function*(t){yield function*(e){var t=e.types,r=e.giftId,n=e.publisherId,u=e.loaderInvalidationEvent,s=void 0===u?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:u;try{var c=(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:"".concat(i.PURCHASE_GIFT(),"/").concat(r),headers:Object.assign({Accept:"application/json","Content-Type":"application/json"},n&&{publisherid:n}),timeout:3e4,data:{status:"converted"}}})).data;if(c&&!c.success)throw"Error with converting gift";yield o.put(yield o.call(s,{payload:{scope:["user"]}})),yield o.put({type:t.CONVERT_GIFT_SUCCESS,payload:{}})}catch(e){yield o.put({type:t.CONVERT_GIFT_ERROR,error:e.message})}}(Object.assign({},t,e))}}},m=function(e){var t=e.types,r=e.sagas;return[o.takeEvery(t.CREATE_GIFT,r.createGift),o.takeEvery(t.REDEEM_GIFT,r.redeemGift),o.takeEvery(t.GET_GIFT,r.getGift),o.takeEvery(t.CONVERT_GIFT,r.convertGift),o.takeEvery(t.GET_GIFT_PRODUCT,r.getGiftProduct)]},h=function(){return{gift:new d.default.Selector((function(){return function(e){return null==e?void 0:e.gift}})),giftId:new d.default.Selector((function(e){return s.createSelector(e.gift,(function(e){return e.giftId}))})),giftProduct:new d.default.Selector((function(e){return s.createSelector(e.gift,(function(e){var t=e.product;return void 0===t?{}:t}))})),giftConversionSuccess:new d.default.Selector((function(e){return s.createSelector(e.gift,(function(e){return e.giftConversionSuccess}))})),didCreateGift:new d.default.Selector((function(e){return s.createSelector(e.gift,(function(e){return e.didCreateGift}))})),creatingGift:new d.default.Selector((function(e){return s.createSelector(e.gift,(function(e){return e.creatingGift}))})),createGiftError:new d.default.Selector((function(e){return s.createSelector(e.gift,(function(e){return e.createGiftError}))}))}},v="gift";t.ZP=function(e){var t=e.store,r=void 0===t?v:t,n=e.createDuck,o=e.initialState,a=void 0===o?y:o,i=e.creators,u=void 0===i?f:i,s=e.types,c=void 0===s?p:s,l=e.reducer,d=void 0===l?_:l,g=e.sagas,S=void 0===g?E:g,R=e.takes,T=void 0===R?m:R,b=e.selectors,A=void 0===b?h:b;return n({store:r,initialState:a}).extend({creators:u,types:c,reducer:d,sagas:S,takes:T,selectors:A})}},11023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18172);r(53155);var o=r(63687),a=r(34857),i=r(72831),u=r(87996),s=r(20573),c=r(27361),l=r(41609),d=r(27484),p=r(56176),f=r(39966),y=r(36463),_=r(41106);function E(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=E(n),h=E(u),v=E(c),g=E(l),S=E(d),R=E(p),T=E(f),b=E(_),A=["GET_LOADER","GET_LOADER_SUCCESS","GET_LOADER_ERROR","REMOVE_LOADER","REMOVE_LOADER_SUCCESS","REMOVE_LOADER_ERROR","UPDATE_LOADER","UPDATE_LOADER_PRICING_MONETIZATION_TIERS","UPDATE_LOADER_GROUP_BILLING_STATUS","UPDATE_LOADER_USER","UPDATE_LOADER_USER_NEWSLETTERS","LOADER_IS_FETCHING","LOADER_IS_NOT_FETCHING","FETCH_LOADER_POPUP_SUCCESS"],O=function(e){return{getLoader:function(t){return Object.assign({type:e.types.GET_LOADER},t)},getLoaderSuccess:function(t){return{type:e.types.GET_LOADER_SUCCESS,payload:t}},removeLoader:function(t){return Object.assign({type:e.types.REMOVE_LOADER},t)},updateLoader:function(t){return Object.assign({type:e.types.UPDATE_LOADER},t)},updateLoaderPricingMonetizationTiers:function(t){return Object.assign({type:e.types.UPDATE_LOADER_PRICING_MONETIZATION_TIERS},t)},updateLoaderGroupBillingStatus:function(t){return Object.assign({type:e.types.UPDATE_LOADER_GROUP_BILLING_STATUS},t)},updateLoaderUser:function(t){return Object.assign({type:e.types.UPDATE_LOADER_USER},t)},updateLoaderUserNewsletters:function(t){return Object.assign({type:e.types.UPDATE_LOADER_USER_NEWSLETTERS},t)},loaderIsFetching:function(t){return Object.assign({type:e.types.LOADER_IS_FETCHING},t)},loaderIsNotFetching:function(t){return Object.assign({type:e.types.LOADER_IS_NOT_FETCHING},t)},fetchLoaderPopupSuccess:function(t){return Object.assign({type:e.types.FETCH_LOADER_POPUP_SUCCESS},t)}}};function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function N(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e,t,r){return w=N()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&U(o,r.prototype),o},w.apply(null,arguments)}function L(e){var t="function"==typeof Map?new Map:void 0;return L=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return w(e,arguments,I(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),U(n,e)},L(e)}function D(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function k(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function G(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j={isFetching:!1,guest:void 0,user:void 0},H=function(e){var t=e.scope,r=e.key,n=e.payload;if(!n)return n;if("user"===t){if(n.paymentMethods)return m.default(n,(function(e){var t=n.paymentMethods.filter((function(e){return null!==e}));e.paymentMethods=t}));if("paymentMethods"===r)return m.default(n,(function(e){return e.filter((function(e){return null!==e}))}))}return n},F=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return m.default(e,(function(e){var t,i;switch(n){case r.types.LOADER_IS_FETCHING:e.isFetching=!0;break;case r.types.LOADER_IS_NOT_FETCHING:e.isFetching=!1;break;case r.types.GET_LOADER:e.isFetching=!0;break;case r.types.GET_LOADER_SUCCESS:var u,s=o.data,c=(null==e||null===(t=e[o.scope])||void 0===t?void 0:t.popups)||[],l=null==s?void 0:s.popups,d=(null==e||null===(i=e[o.scope])||void 0===i?void 0:i.additionalPopups)||[];l&&(u=l.reduce((function(e,t){return c.find((function(e){return e.id===t.id}))||e.push(t),e}),[])),e[o.scope]=H({type:r.types.GET_LOADER_SUCCESS,scope:o.scope,payload:s?Object.assign({},s,u&&{popups:u},{additionalPopups:d}):void 0}),e.isFetching=!1,e.isError=!1;break;case r.types.GET_LOADER_ERROR:e.isFetching=!1,e.isError=!0,e.error=a;break;case r.types.REMOVE_LOADER_SUCCESS:e[o.scope]=void 0;break;case r.types.UPDATE_LOADER:e[o.scope]&&(e[o.scope]=Object.keys(o.loader).reduce((function(e,t){return Object.assign({},e,P({},t,H({type:r.types.UPDATE_LOADER,scope:o.scope,key:t,payload:o.loader[t]})))}),e[o.scope]));break;case r.types.UPDATE_LOADER_PRICING_MONETIZATION_TIERS:o.tiers&&(e.guest&&(e.guest.pricing.monetization.cover_photo=o.cover_photo,e.guest.pricing.monetization.is_pledge=o.is_pledge,e.guest.pricing.monetization.plan_id=o.plan_id,e.guest.pricing.monetization.type=o.type,e.guest.pricing.monetization.tiers=o.tiers),e.user&&(e.user.pricing.monetization.cover_photo=o.cover_photo,e.user.pricing.monetization.is_pledge=o.is_pledge,e.user.pricing.monetization.plan_id=o.plan_id,e.user.pricing.monetization.type=o.type,e.user.pricing.monetization.tiers=o.tiers));break;case r.types.UPDATE_LOADER_GROUP_BILLING_STATUS:o.groupId&&o.billingStatus&&(e.guest&&e.guest.group.id===o.groupId&&(e.guest.group.billing_status=o.billingStatus),e.user&&e.user.group.id===o.groupId&&(e.user.group.billing_status=o.billingStatus));break;case r.types.UPDATE_LOADER_USER:o.user&&(e.user.user=Object.keys(o.user).reduce((function(e,t){return Object.assign({},e,P({},t,H({type:r.types.UPDATE_LOADER_USER,scope:"user",key:t,payload:o.user[t]})))}),e.user.user));break;case r.types.UPDATE_LOADER_USER_NEWSLETTERS:o.newsletters&&e.user&&(e.user.newsletters=o.newsletters),e.user&&(e.user.user.sync=!!o.sync);break;case r.types.FETCH_LOADER_POPUP_SUCCESS:if(null!=o&&o.popup){var p=e.user?"user":"guest",f=function(t){var r;if(null!==(r=e[p])&&void 0!==r&&r[t]){var n=e[p][t].findIndex((function(e){var t;return e.id===(null===(t=o.popup)||void 0===t?void 0:t.id)}));-1!==n?e[p][t][n]=o.popup:e[p][t].push(o.popup)}};f("popups"),f("additionalPopups")}}}))},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&U(e,t)}(u,e);var t,r,n,o,a,i=(t=u,r=N(),function(){var e,n=I(t);if(r){var o=I(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return k(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).name="UnauthorizedUserError",t.error=e,t.message="Unauthorized User",t}return n=u,o&&C(n.prototype,o),a&&C(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}(L(Error));var B=function(e){return{getLoader:function*(t){yield function*(e){var t=e.types,r=e.scope,n=void 0===r?"guest":r,u=e.shortCode,s=e.publisherId,c=e.requestPayload,l=void 0===c?{}:c;try{var d,p,f;try{f=yield a.putResolve({type:i.REQUEST,config:{method:"post",baseURL:o.PICO_API_URL(),url:"user"===n?o.LOADER():o.LOADER_GUEST(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:s},timeout:3e4,params:Object.assign({},u&&{short_code:u}),data:l}})}catch(e){var y;throw 401===(null==e||null===(y=e.response)||void 0===y?void 0:y.status)?new x(e):e}if(!f.data)throw Error("No loader data was received.");if(f.data.widget_disabled)throw Error("whitelisted");var _=[];try{"user"===n&&(_=yield a.putResolve({type:i.REQUEST,config:{method:"get",baseURL:o.PICO_API_URL(),url:o.NEWSLETTERS(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:s},timeout:3e4}}))}catch(e){console.log(e)}yield a.put({type:t.GET_LOADER_SUCCESS,payload:{scope:n,data:Object.assign({},f.data,{default_popup:Object.assign({},f.data.default_popup,{fetched:!0})},(null===(d=_)||void 0===d?void 0:d.data)&&{userNewsletters:null===(p=_)||void 0===p?void 0:p.data})}})}catch(e){if(e instanceof x){var E,m,h,v,g,S,R,T=null===(E=e.error)||void 0===E||null===(m=E.response)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.message,b=null===(v=e.error)||void 0===v||null===(g=v.response)||void 0===g||null===(S=g.config)||void 0===S||null===(R=S.headers)||void 0===R?void 0:R.Authorization;yield a.put({type:t.GET_LOADER_ERROR,error:Object.assign({message:e.message},T&&{reason:T},b&&{token:b})})}else yield a.put({type:t.GET_LOADER_ERROR,error:{message:e.message}})}}(Object.assign({},t,e))},removeLoader:function*(t){yield function*(e){var t=e.types,r=e.scope,n=void 0===r?"guest":r;try{yield a.put({type:t.REMOVE_LOADER_SUCCESS,payload:{scope:n}})}catch(e){yield a.put({type:t.REMOVE_LOADER_ERROR,error:e.message})}}(Object.assign({},t,e))}}},W=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_LOADER,r.getLoader),a.takeEvery(t.REMOVE_LOADER,r.removeLoader)]},K={},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(""===e)return console.warn("template failed"),null;K[e]||(K[e]=b.default(e));var r=K[e];return r(t)},Y=function(e,t,r){return v.default(e,r,v.default(t,r))},z={customerPromptWithoutName:{title:"Will you renew your support?",subtitle:"Continue funding the content you love.",description:null},customerPromptWithName:{title:"Will you renew your support, ${first_name}?",subtitle:"Continue funding the content you love.",description:null},nonDonorPromptWithoutName:{title:"Thanks for being a loyal member of this community.",subtitle:"Become a donor today to show your support.",description:null},nonDonorPromptWithName:{title:"Thanks for being a loyal member of this community, ${first_name}.",subtitle:"Become a donor today to show your support.",description:null},featureList:{show:!1,title:null,list:null},recurringConfirmationWithoutName:"Thank you for becoming a sustaining member of our community. Your gift is essential for funding great content on ${publication_name}. When you see our logo in this corner, you can click on it to manage your membership.",recurringConfirmationWithName:"Thank you for becoming a sustaining member of our community, ${first_name}. Your gift is essential for funding great content on ${publication_name}. When you see our logo in this corner, you can click on it to manage your membership.",singleConfirmationWithoutName:"Thank you for being a part of our community of supporters. Your gift is essential for funding great content on ${publication_name}.",singleConfirmationWithName:"Thank you for being a part of our community of supporters, ${first_name}. Your gift is essential for funding great content on ${publication_name}."},q={promptWithoutName:{title:"Thanks for being a loyal member of this community.",subtitle:"Subscribe now to keep your exclusive access.",description:null},promptWithName:{title:"Thanks for being a loyal member of this community, ${first_name}.",subtitle:"Subscribe now to keep your exclusive access.",description:null},featureList:{show:!1,title:null,list:null},trialConfirmationWithoutName:"Thank you for trying out a subscription to ${publication_name}. When you see our logo in this corner, you can click on it to manage your subscription.",trialConfirmationWithName:"Thank you for trying out a subscription to ${publication_name}, ${first_name}. When you see our logo in this corner, you can click on it to manage your subscription.",confirmationWithoutName:"Thank you for subscribing to ${publication_name}. When you see our logo in this corner, you can click on it to manage your subscription.",confirmationWithName:"Thank you for subscribing to ${publication_name}, ${first_name}. When you see our logo in this corner, you can click on it to manage your subscription."},$={promptWithoutName:{title:"Thanks for being a part of this community.",subtitle:"Buy a pass now to keep your exclusive access.",description:null},promptWithName:{title:"Thanks for being a loyal member of this community, ${first_name}.",subtitle:"Purchase a pass today to get exclusive access to content.",description:null},confirmationWithoutName:"Your pass has been sucessfully activated! When you see our logo in this corner, you can click on it to manage your membership.",confirmationWithName:"Your pass has been successfully activated, ${first_name}! When you see our logo in this corner, you can click on it to manage your membership."},J=function(e){var t=e.planTemplates,r=e.userFirstName,n=e.monetizationType,o=e.hasPurchased,a={title:"",subTitle:"",description:""};return"donation"===n?o?r?(a.title=V(Y(t,z,"customerPromptWithName.title"),{first_name:r}),a.subTitle=V(Y(t,z,"customerPromptWithName.subtitle"),{first_name:r}),a.description=V(Y(t,z,"customerPromptWithName.description"),{first_name:r})):(a.title=Y(t,z,"customerPromptWithoutName.title"),a.subTitle=Y(t,z,"customerPromptWithoutName.subtitle"),a.description=Y(t,z,"customerPromptWithoutName.description")):r?(a.title=V(Y(t,z,"nonDonorPromptWithName.title"),{first_name:r}),a.subTitle=V(Y(t,z,"nonDonorPromptWithName.subtitle"),{first_name:r}),a.description=V(Y(t,z,"nonDonorPromptWithName.description"),{first_name:r})):(a.title=Y(t,z,"nonDonorPromptWithoutName.title"),a.subTitle=Y(t,z,"nonDonorPromptWithoutName.subtitle"),a.description=Y(t,z,"nonDonorPromptWithoutName.description")):"subscription"===n?r?(a.title=V(Y(t,q,"promptWithName.title"),{first_name:r}),a.subTitle=V(Y(t,q,"promptWithName.subtitle"),{first_name:r}),a.description=V(Y(t,q,"promptWithName.description"),{first_name:r})):(a.title=Y(t,q,"promptWithoutName.title"),a.subTitle=Y(t,q,"promptWithoutName.subtitle"),a.description=Y(t,q,"promptWithoutName.description")):"pass"===n&&(r?(a.title=V(Y(t,$,"promptWithName.title"),{first_name:r}),a.subTitle=V(Y(t,$,"promptWithName.subtitle"),{first_name:r}),a.description=V(Y(t,$,"promptWithName.description"),{first_name:r})):(a.title=Y(t,$,"promptWithoutName.title"),a.subTitle=Y(t,$,"promptWithoutName.subtitle"),a.description=Y(t,$,"promptWithoutName.description"))),a},Q={menu:{title:"Join the ${publication_name} community.",subtitle:"It’s free, and you’ll get special updates, exclusive content, and more.",button:"Join or Log In"},prompt:{title:"Log in to continue reading.",subtitle:null,description:null},confirmationWithoutName:"You are now logged in to ${publication_name}.",confirmationWithName:"Hi ${first_name}, you are now logged in to ${publication_name}."},Z={menu:{title:"Join the ${publication_name} community.",subtitle:"It’s free, and you’ll get special updates, exclusive content, and more.",button:"Join or Log In"},prompt:{title:"Join the ${publication_name} community.",subtitle:"It’s free, and you’ll get special updates, exclusive content, and more.",description:null},confirmationWithoutName:"You are now logged in to ${publication_name}.",confirmationWithName:"Hi ${first_name}, you are now logged in to ${publication_name}."},X=function(e){var t=e.ruleTemplates,r=e.required;return Y(t,void 0!==r&&r?Q:Z,"prompt.title")},ee=function(e){var t=e.ruleTemplates,r=e.required;return Y(t,void 0!==r&&r?Q:Z,"prompt.subtitle")},te=function(e){var t=e.ruleTemplates,r=e.required;return Y(t,void 0!==r&&r?Q:Z,"prompt.description")},re=function(e){var t=e.ruleTemplates,r=e.required;return Y(t,void 0!==r&&r?Q:Z,"menu.title")},ne=function(e){var t=e.ruleTemplates,r=e.required;return Y(t,void 0!==r&&r?Q:Z,"menu.subtitle")},oe=function(e){var t=e.ruleTemplates,r=e.required;return Y(t,void 0!==r&&r?Q:Z,"menu.button")},ae=function(e){switch(e&&e.pricing&&e.pricing.monetization&&e.pricing.monetization.type&&e.pricing.monetization.type){case"pass":return"Already a pass holder?";case"donation":return"Already a donor?";case"subscription":return e&&e.pricing&&e.pricing.monetization&&e.pricing.monetization.is_pledge?"Already a member?":"Already a subscriber?";default:return"Already have an account?"}},ie=["id"],ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={dropdown:"Dropdown",short_answer:"Text",number:"Number",url:"Text",paragraph:"Text",radio:"Radio",boolean:"Boolean",checkbox:"Checkbox",first_name:"Text",last_name:"Text",address:"Address",phone_number:"Text",gender:"Text",birthday:"Text",date:"Date"};return e.map((function(e){var n,o,a,i,u,s={id:null==e||null===(n=e.connected_property)||void 0===n?void 0:n.id,title:null==e?void 0:e.label,description:null==e?void 0:e.description,type:null==r?void 0:r[null==e||null===(o=e.connected_property)||void 0===o?void 0:o.type],required:null==e?void 0:e.required,order:null==e?void 0:e.order,options:null==e||null===(a=e.connected_property)||void 0===a?void 0:a.options};t[null==e||null===(i=e.connected_property)||void 0===i?void 0:i.id]&&(s.defaultValue=t[null==e||null===(u=e.connected_property)||void 0===u?void 0:u.id]);return s}))},se=y.colors.getContrastColor,ce=y.colors.isColor;S.default.extend(R.default);var le=function(e){var t=function(e){return{popups:new h.default.Selector((function(){return s.createSelector(e.selectors.topScopeLoader,(function(e){var t=e.popups;return G(void 0===t?[]:t).sort((function(e,t){return e.order-t.order}))}))})),scopedPopups:new h.default.Selector((function(){return s.createSelector((function(t){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guest";return null==t||null===(r=t[e.store])||void 0===r||null===(n=r[o])||void 0===n?void 0:n.popups}),(function(){return G(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).sort((function(e,t){return e.order-t.order}))}))})),getAdditionalPopups:new h.default.Selector((function(){return s.createSelector(e.selectors.topScopeLoader,(function(e){var t=e.additionalPopups;return void 0===t?[]:t}))})),allPopups:new h.default.Selector((function(){return s.createSelector((function(t){return e.selectors.scopedPopups(t,"user")}),(function(t){return e.selectors.scopedPopups(t)}),e.selectors.getAdditionalPopups,e.selectors.getDefaultRegisteredPopup,e.selectors.getDefaultAnonPopup,(function(e,t,r,n,o){var a=null==n?void 0:n.id,i=null==o?void 0:o.id;return(a&&i?[].concat(G(e.filter((function(e){return(a&&i)!==(null==e?void 0:e.id)}))),G(t.filter((function(e){return(a&&i)!==(null==e?void 0:e.id)}))),[n,o],G(r)):i?[].concat(G(e.filter((function(e){return i!==(null==e?void 0:e.id)}))),G(t.filter((function(e){return i!==(null==e?void 0:e.id)}))),[o],G(r)):a?[].concat(G(e.filter((function(e){return a!==(null==e?void 0:e.id)}))),G(t.filter((function(e){return a!==(null==e?void 0:e.id)}))),[n],G(r)):[].concat(G(e),G(t),G(r))).sort((function(e,t){return e.order-t.order}))}))})),customProperties:new h.default.Selector((function(){return s.createSelector(e.selectors.topScopeLoader,(function(e){return e.custom_properties}))})),popupNewsletters:function(t,r){var n;return(null===(n=e.selectors.allPopups(t).find((function(e){var t=e.id;return r===t})))||void 0===n?void 0:n.newsletters)||[]},popupAuthenticationMethods:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(e){return((null==e?void 0:e.authentication_methods)||[]).length?e.authentication_methods:["email"]}))})),popupPlanOptions:new h.default.Selector((function(){return s.createSelector(e.selectors.popups,(function(e){return e.filter((function(e){return"offer"===e.type})).reduce((function(e,t){var r;return null==t||null===(r=t.products)||void 0===r||r.forEach((function(t){e=[].concat(G(e),G(t.options))})),e}),[]).map((function(e){var t=e.id,r=D(e,ie);return Object.assign({plan_option_id:t,id:t},r)}))}))})),popupUserOffer:function(t){var r=e.selectors.currentProductOptionId(t);if(!r)return null;var n=e.selectors.popups(t).reduce((function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).products;return(null==t?void 0:t.find((function(e){return e.id===r})))||e}),null);return n},popupGetProductByProductOptionId:new h.default.Selector((function(){return s.createSelector(e.selectors.allPopups,(function(e,t){return t}),(function(e,t){var r=e.reduce((function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).products;return[].concat(G(e),G(t||[]))}),[]);return r.find((function(e){var r=e.options;return(void 0===r?[]:r).some((function(e){return(null==e?void 0:e.id)===t||(null==e?void 0:e.short_code)===t}))}))}))})),popupGetOptionById:new h.default.Selector((function(){return s.createSelector((function(t,r){return e.selectors.popupGetProductByProductOptionId(t,r)}),(function(e,t){return t}),(function(e,t){return((null==e?void 0:e.options)||[]).find((function(e){var r=e.id,n=e.short_code;return t===r||t===n}))}))})),popupGetPopupByProductId:new h.default.Selector((function(){return s.createSelector(e.selectors.allPopups,(function(e,t){return t}),(function(e,t){var r=e.find((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).products;return!!e&&e.some((function(e){return(null==e?void 0:e.id)===t}))}));return r||{}}))})),popupGetPopupByProductOptionId:new h.default.Selector((function(){return s.createSelector(e.selectors.allPopups,(function(e,t){return t}),(function(e,t){var r=e.find((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).products;return!!e&&e.some((function(e){return null==e?void 0:e.options.find((function(e){return(null==e?void 0:e.id)===t||(null==e?void 0:e.short_code)===t}))}))}));return r||{}}))})),popupGetPopupById:new h.default.Selector((function(){return s.createSelector(e.selectors.allPopups,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.toLowerCase():""}),(function(e,t){var r=e.find((function(e){return((null==e?void 0:e.id)===t||(null==e?void 0:e.short_code)===t)&&e.fetched}));return r||(r=e.find((function(e){return(null==e?void 0:e.id)===t||(null==e?void 0:e.short_code)===t}))),r}))})),popupGetProductFields:function(t,r,n){var o=e.selectors.popupGetProductById(t,r),a=e.selectors.customProperties(t)||{},i=n||(null==o?void 0:o.fields)||[];return ue(i,a)},popupGetFields:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,e.selectors.customProperties,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ue((null==e?void 0:e.fields)||[],t)}))})),popupGetProductById:new h.default.Selector((function(){return s.createSelector(e.selectors.allPopups,(function(e,t){return t}),(function(e,t){var r=e.reduce((function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).products;return[].concat(G(e),G(t||[]))}),[]);return r.find((function(e){return e.id===t}))}))})),popupIsPledge:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.productId,o=r.optionId;if(n){var a=e.selectors.popupGetProductById(t,n);return null==a?void 0:a.pledge_mode}if(o){var i=e.selectors.popupGetProductByProductOptionId(t,o);return null==i?void 0:i.pledge_mode}return null},getFirstOptionTypeOfPopup:function(e){var t,r,n,o,a=null==e||null===(t=e.products)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.options)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.type;return"offer"===(null==e?void 0:e.type)&&a?a:null},passNewRegular:function(t){return"pass"===e.selectors.getFirstOptionTypeOfPopup(t)},subscriptionExistingSwitch:function(e,t){return!1},subscriptionNewPledge:function(e,t){return!1},subscriptionNewRegular:function(e,t){return!1},getDefaultPopup:new h.default.Selector((function(){return s.createSelector(e.selectors.topScopeLoader,e.selectors.userStatus,(function(e,t){var r=e.default_registered_popup,n=void 0===r?{}:r,o=e.default_anonymous_popup;return"anonymous"===t?void 0===o?{}:o:n}))})),getDefaultRegisteredPopup:new h.default.Selector((function(){return s.createSelector(e.selectors.topScopeLoader,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).default_registered_popup}))})),getDefaultAnonPopup:new h.default.Selector((function(){return s.createSelector(e.selectors.topScopeLoader,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).default_anonymous_popup}))})),getPaymentPopupCustomTextFileName:new h.default.Selector((function(){return s.createSelector(e.selectors.getDefaultPopup,(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).custom_text;return null==t||null===(e=t.payment)||void 0===e?void 0:e.file_name}))})),getPaymentPopupCustomTextFileNameById:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).custom_text;return null==t||null===(e=t.payment)||void 0===e?void 0:e.file_name}))})),getAckPopupCustomTextFileNameById:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.custom_text,o=r.type;return null!=o&&o.startsWith("signup_")?null==n||null===(t=n.ack_default_signup)||void 0===t?void 0:t.file_name:null==n||null===(e=n.ack_default_payment)||void 0===e?void 0:e.file_name}))})),getSignupPopupCustomTextFileNameById:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).custom_text;return null==t||null===(e=t.signup)||void 0===e?void 0:e.file_name}))})),getTrialCustomAckFileNameById:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).custom_text;return null==t||null===(e=t.ack_trial)||void 0===e?void 0:e.file_name}))})),getSingleDonoCustomAckFileNameById:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).custom_text;return null==t||null===(e=t.ack_donation_single)||void 0===e?void 0:e.file_name}))})),getRecurringDonoCustomAckFileNameById:new h.default.Selector((function(){return s.createSelector(e.selectors.popupGetPopupById,(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).custom_text;return null==t||null===(e=t.ack_donation_recurring)||void 0===e?void 0:e.file_name}))}))}}(e);return Object.assign({},t,{picoColor:function(){return"#834eff"},loader:function(e){return null==e?void 0:e.loader},topScopeLoader:function(t){var r,n;return(null==t||null===(r=t[e.store])||void 0===r?void 0:r.user)||(null==t||null===(n=t[e.store])||void 0===n?void 0:n.guest)||{}},hasGuestLoader:function(t){return!!t[e.store].guest},hasUserLoader:function(t){return!!t[e.store].user},memberType:function(t){return e.selectors.monetizationIsPledge(t)?"member":e.selectors.monetizationTypeIsSubscription(t)?"subscriber":e.selectors.monetizationTypeIsPass(t)?"pass holder":e.selectors.monetizationTypeIsDonation(t)?"donor":null},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},intervalAdverb:function(e){switch(e){case"Month":return"Monthly";case"Year":return"Yearly";case"month":return"monthly";case"year":return"yearly"}return""},priceText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"USD"===t?"".concat(T.default.symbol(t)).concat(e," ").concat(t):r?"".concat(e," ").concat(T.default.symbol(t)," ").concat(t):e},orderSummary:function(t,r){var n=r.productId,o=r.optionId,a=r.customPrice;if(!n||!o)return null;var i=e.selectors.popupGetProductById(t,n),u=e.selectors.popupGetOptionById(t,o),s=e.selectors.priceText,c=!0;if(!u||!i)return null;var l=e.selectors.popupIsPledge(t,{productId:n}),d=e.selectors.capitalizeFirstLetter(e.selectors.intervalAdverb(u.interval)),p=l?"membership":u.type,f=i.title||"No Title",y="".concat(d," ").concat(e.selectors.memberNounFromString(p)),_=S.default().add(u.interval_quantity,u.interval).format("LL"),E=S.default().add(u.trial_quantity,u.trial_interval).format("LL"),m=T.default.format({currencyCode:null==u?void 0:u.currency,amount:null==u?void 0:u.price,symbol:!1}),h=u.interval,v=e.selectors.currentSubscriptionPrice(t),g=e.selectors.currentSubscriptionCurrency(t),R=v&&g?T.default.format({currencyCode:g,amount:v,symbol:!1}):null,b=parseInt(a),A=!Number.isNaN(b)&&T.default.format({currencyCode:null==u?void 0:u.currency,amount:b,symbol:!1}),O=T.default.format({currencyCode:null==u?void 0:u.currency,amount:null==u?void 0:u.trial_price,symbol:!1}),C=!(null==u||!u.trial_price)||!(null==u||!u.trial_interval),P=C&&!(((null==u?void 0:u.trial_price)||0)>0),I=C&&"".concat(u.trial_quantity," ").concat(u.trial_interval).concat(u.trial_quantity>1?"s":""),U="pass"===u.type&&"".concat(u.interval_quantity," ").concat(u.interval).concat(u.interval_quantity>1?"s":"");return Object.assign({productTitle:f,optionTypeAndInterval:y,renewalDate:_,optionPrice:s(m,null==u?void 0:u.currency,c),optionInterval:h},R&&{oldOptionPrice:s(R,g,c)},A&&{optionCustomPrice:s(A,null==u?void 0:u.currency,c)},U&&{passDuration:U},{trialPrice:C&&s(O,null==u?void 0:u.currency,c),trialDuration:I,trialFinishDate:E,isTrial:C,isFree:P})},userWindowObject:function(t){var r=e.selectors.userId(t),n=e.selectors.userEmail(t),o=e.selectors.userAuth(t),a=e.selectors.userFirstName(t),i=e.selectors.userLastName(t),u=e.selectors.currentSubscriptionType(t),s=e.selectors.currentSubscriptionPlanTierTitle(t),c=e.selectors.groupName(t),l=e.selectors.currentBillingIntervalTotalPaid(t),d=e.selectors.currentSubscriptionPrice(t);return{id:r,authenticated:o,email:n,verified:e.selectors.userVerified(t),first_name:a,last_name:i,membership_type:u,tier:s,group_name:c,total_paid:l,recurring_payment:d}},memberNoun:function(t){switch(e.selectors.memberType(t)){case"member":return"membership";case"subscriber":return"subscription";case"pass holder":return"pass";case"donor":return"contribution"}return""},memberNounFromString:function(e){return"membership"===e?"membership":"subscription"===e?"subscription":"pass"===e?"pass":"recurring-donation"===e||"single-donation"===e?"contribution":null},memberVerbPresentParticiple:function(t){switch(e.selectors.memberType(t)){case"member":return"your membership";case"subscriber":return"subscribing";case"pass holder":return"your pass";case"donor":return"contributing"}return""},isFetching:function(e){return e.loader.isFetching},isNotFetching:function(e){return!e.loader.isFetching},publisherId:function(t){var r=e.selectors.topScopeLoader(t);return r.publisher&&r.publisher.id?r.publisher.id:null},publisherName:function(t){var r=e.selectors.topScopeLoader(t);return r.publisher&&r.publisher.name?r.publisher.name:null},publisherUsername:function(t){var r=e.selectors.topScopeLoader(t);return r.publisher&&r.publisher.username?r.publisher.username:null},publisherIcon:function(t){var r=e.selectors.topScopeLoader(t);return r.publisher&&r.publisher.icon?r.publisher.icon:null},publisherUrl:function(t){var r=e.selectors.topScopeLoader(t);return r.publisher&&r.publisher.url?r.publisher.url:null},supportEmail:function(t){var r=e.selectors.topScopeLoader(t);return r.publisher&&r.publisher.support_email?r.publisher.support_email:null},userFullName:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.full_name:null},userFirstName:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.first_name:null},userLastName:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.last_name:null},userEmail:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.email:null},userAuth:function(t){return!(!t[e.store].user||!t[e.store].user.user)&&t[e.store].user.user.auth},userId:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.id:null},userHasPassword:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.has_password:null},userAvatarUrl:function(t){return t[e.store].user&&t[e.store].user.user?t[e.store].user.user.avatar_url:null},userInitials:function(t){var r;if(!t[e.store].user||!t[e.store].user.user)return null;var n=t[e.store].user.user,o=(null==n?void 0:n.initials)||"";return g.default(null==n?void 0:n.initials)?null==n||null===(r=n.email)||void 0===r?void 0:r[0]:o},userStatus:function(t){var r=e.selectors.userHasCurrentPurchases(t),n=e.selectors.userId(t),o=e.selectors.isGroupMember(t);return r||o?"paying":n?"registered":"anonymous"},userVerified:function(t){return!(!t[e.store].user||!t[e.store].user.user)&&t[e.store].user.user.verified},userSyncNewsletters:function(t){return!(!t[e.store].user||!t[e.store].user.user)&&t[e.store].user.user.sync},currentSubscriptionPrice:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_price?t[e.store].user.purchases.current.subscription_price:null},currentSubscriptionCurrency:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_currency?t[e.store].user.purchases.current.subscription_currency:null},currentSubscriptionType:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_type?t[e.store].user.purchases.current.subscription_type:null},currentSubscriptionTypeIsPass:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_type)&&"pass"===t[e.store].user.purchases.current.subscription_type},currentSubscriptionTypeIsRecurringDonation:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_type)&&"recurring-donation"===t[e.store].user.purchases.current.subscription_type},currentSubscriptionInterval:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.product_option_interval)&&t[e.store].user.purchases.current.product_option_interval},currentSubscriptionTypeIsSubscription:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_type)&&"subscription"===t[e.store].user.purchases.current.subscription_type},currentSubscriptionIsTrial:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current)&&null!==t[e.store].user.purchases.current.subscription_trial_end},currentSubscriptionStart:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_start?t[e.store].user.purchases.current.subscription_start:null},currentProductTitle:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.product_title?t[e.store].user.purchases.current.product_title:null},currentProductId:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.product_id?t[e.store].user.purchases.current.product_id:null},currentProductOptionId:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.product_option_id?t[e.store].user.purchases.current.product_option_id:null},currentProductOptionCurrency:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.product_option_currency?t[e.store].user.purchases.current.product_option_currency:null},currentSubscriptionId:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_id?t[e.store].user.purchases.current.subscription_id:null},currentSubscriptionIdIsGift:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_id)&&"GIFT"===t[e.store].user.purchases.current.subscription_id},currentSubscriptionEnd:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.subscription_end?t[e.store].user.purchases.current.subscription_end:null},currentSubscriptionPlanTierTitle:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.product_title?t[e.store].user.purchases.current.product_title:null},currentPurchaseCanceled:function(t){var r,n,o,a=(null===(n=t[e.store])||void 0===n||null===(o=n.user)||void 0===o?void 0:o.purchases)||{},i=a.current,u=a.history,s=(u=void 0===u?{}:u).next,c=u.changes,l=((null==i?void 0:i.subscription_trial_end)||(null==i?void 0:i.subscription_trial_price))&&((null==s?void 0:s.subscription_trial_end)||(null==s?void 0:s.subscription_trial_price))&&"USER_REACTIVATED"!==(null===(r=c[0])||void 0===r?void 0:r.logType)&&((null==i?void 0:i.subscription_canceled)||(null==s?void 0:s.subscription_canceled));return"CANCELED"===(null==i?void 0:i.status)||l||!1},currentPurchaseActive:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.status?"ACTIVE"===t[e.store].user.purchases.current.status:null},currentPurchaseFailed:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current&&t[e.store].user.purchases.current.status?"FAILED"===t[e.store].user.purchases.current.status:null},discordLink:function(t){var r,n,o,a;return null===(r=t[e.store])||void 0===r||null===(n=r.user)||void 0===n||null===(o=n.purchases)||void 0===o||null===(a=o.current)||void 0===a?void 0:a.discord_link},updatePaymentMethodText:function(t){switch(e.selectors.memberType(t)){case"member":case"subscriber":return"Please update your payment method to restore subscription benefits.";case"donor":return"Please update your payment method to restore your donation."}return""},badgePaymentMethod:function(t){var r,n,o,a=null==t||null===(r=t[e.store])||void 0===r||null===(n=r.user)||void 0===n||null===(o=n.paymentMethods)||void 0===o?void 0:o[0];return a&&null!=a&&a.cardType&&null!=a&&a.last4?{cardType:a.cardType,last4:a.last4}:null},nextSubscriptionStart:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.next&&t[e.store].user.purchases.history.next.subscription_start?t[e.store].user.purchases.history.next.subscription_start:null},nextSubscriptionEnd:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.next&&t[e.store].user.purchases.history.next.subscription_end?t[e.store].user.purchases.history.next.subscription_end:null},nextStatusNext:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.next&&t[e.store].user.purchases.history.next.status)&&"NEXT"===t[e.store].user.purchases.history.next.status},nextProductOptionPrice:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.next&&t[e.store].user.purchases.history.next.product_option_price?t[e.store].user.purchases.history.next.product_option_price:null},nextProductOptionInterval:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.next&&t[e.store].user.purchases.history.next.product_option_interval?t[e.store].user.purchases.history.next.product_option_interval:null},allNewsletters:function(t){var r,n,o,a;return(null===(r=t[e.store])||void 0===r||null===(n=r.user)||void 0===n?void 0:n.newsletters)||(null===(o=t[e.store])||void 0===o||null===(a=o.guest)||void 0===a?void 0:a.newsletters)||[]},subscribedNewsletters:function(t){return e.selectors.allNewsletters(t).filter((function(e){return e.subscribed}))},firstDonation:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.first_donation?t[e.store].user.purchases.history.first_donation:null},currentBillingIntervalTotalPaid:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.current_billing_interval_total_paid?t[e.store].user.purchases.history.current_billing_interval_total_paid:null},originalEnrollmentDate:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.originalEnrollmentDate?t[e.store].user.purchases.history.originalEnrollmentDate:null},next:function(t){return t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.history&&t[e.store].user.purchases.history.next&&0!==Object.keys(t[e.store].user.purchases.history.next).length?t[e.store].user.purchases.history.next:null},monetizationBillingStatus:function(t){var r,n,o=e.selectors.topScopeLoader(t);return null!=o&&null!==(r=o.purchases)&&void 0!==r&&null!==(n=r.history)&&void 0!==n&&n.has_purchased?"PAID":null},pricingHasMonetization:function(e){return((null==e?void 0:e.products)||[]).some((function(e){var t;return!(null==e||null===(t=e.options)||void 0===t||!t.length)}))},userHasCurrentPurchases:function(t){return!!(t[e.store].user&&t[e.store].user.purchases&&t[e.store].user.purchases.current)&&Object.keys(t[e.store].user.purchases.current).length>0},monetizationIsPledge:function(t){var r;return(e.selectors.getOrderType((null==t||null===(r=t.products)||void 0===r?void 0:r.length)&&t.products[0])||"").includes("pledge")},monetizationTypeIsSubscription:function(t){var r;return(e.selectors.getOrderType((null==t||null===(r=t.products)||void 0===r?void 0:r.length)&&t.products[0])||"").includes("subscription")},monetizationTypeIsDonation:function(t){var r;return(e.selectors.getOrderType((null==t||null===(r=t.products)||void 0===r?void 0:r.length)&&t.products[0])||"").includes("donation")},monetizationTypeIsGroup:function(t){var r;return(e.selectors.getOrderType((null==t||null===(r=t.products)||void 0===r?void 0:r.length)&&t.products[0])||"").includes("group")},monetizationTypeIsPass:function(t){var r;return(e.selectors.getOrderType((null==t||null===(r=t.products)||void 0===r?void 0:r.length)&&t.products[0])||"").includes("pass")},isGroupAdmin:new h.default.Selector((function(e){return s.createSelector(e.topScopeLoader,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.purchases,r=(t=void 0===t?{}:t).current,n=void 0===r?{}:r;return n.billing_admin}))})),isGroupMember:new h.default.Selector((function(e){return s.createSelector(e.topScopeLoader,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.purchases,r=(t=void 0===t?{}:t).current,n=void 0===r?{}:r;return"group"===n.subscription_type}))})),groupName:new h.default.Selector((function(e){return s.createSelector(e.topScopeLoader,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.purchases,r=(t=void 0===t?{}:t).current,n=void 0===r?{}:r;return(n.subscription_type||"").includes("group")?n.product_title:""}))})),groupSize:function(t){var r=e.selectors.topScopeLoader(t);return r&&r.group&&r.group.size?r.group.size:null},userHasGroupData:new h.default.Selector((function(e){return s.createSelector(e.isGroupMember,e.isGroupAdmin,(function(e,t){return e||t}))})),linkColor:function(t){var r,n,o=e.selectors.topScopeLoader(t),a=e.selectors.picoColor(),i=null==o||null===(r=o.publisher)||void 0===r||null===(n=r.styling)||void 0===n?void 0:n.linkColor;return o.publisher&&o.publisher.styling&&o.publisher.styling.linkColor&&ce(i)?i:a},contrastColor:function(t){var r=e.selectors.linkColor(t),n=se(r);return n},scopedLoader:function(e,t){return e.loader[t]},tiers:new h.default.Selector((function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guest";return v.default(e.scopedLoader(t,r),"pricing.monetization.tiers",[])}})),tiersSorted:new h.default.Selector((function(e){return s.createSelector(e.tiers,(function(e){return function(e,t){return e.slice().sort((function(e,r){return e[t]-r[t]}))}(e,"tierOrder")}))})),planTexts:new h.default.Selector((function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guest",n=arguments.length>2?arguments[2]:void 0,o=e.scopedLoader(t,r);if(o){var a,i,u,s=(null==n||null===(a=n.products)||void 0===a?void 0:a.length)&&(null===(i=n.products[0])||void 0===i?void 0:i.type),c=o.purchases&&o.purchases.history&&o.purchases.history.has_purchased,l=null==o||null===(u=o.lang)||void 0===u?void 0:u.plan,d=o.user.first_name,p=J({planTemplates:l,userFirstName:d,monetizationType:s,hasPurchased:c});return p}return null}})),ruleTexts:new h.default.Selector((function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guest",n=e.scopedLoader(t,r);if(n){var o=Object.assign({prompt:{title:"",subTitle:"",description:""},menu:{title:"",subTitle:"",button:""}},"guest"===r&&{headerDescription:ae(n)}),a=n.lang.rule,i=n.publisher.name;return o.prompt.title=V(X({ruleTemplates:a}),{publication_name:i}),o.prompt.subTitle=ee({ruleTemplates:a}),o.prompt.description=te({ruleTemplates:a}),o.menu.title=V(re({ruleTemplates:a}),{publication_name:i}),o.menu.subTitle=ne({ruleTemplates:a}),o.menu.button=oe({ruleTemplates:a}),o}return null}})),featureList:new h.default.Selector((function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guest";return v.default(e.scopedLoader(t,r),"lang.plan.tiers",[])}})),pubPriceChangeDate:function(t){var r,n,o=e.selectors.topScopeLoader(t),a=null==o||null===(r=o.purchases)||void 0===r||null===(n=r.history)||void 0===n?void 0:n.changes;if(!a)return null;var i=a.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.logType,n=t.loggedAt;return e||("PUB_PRICE_CHANGE"===r?n:e)}),null);return i},articleId:function(t){var r,n=e.selectors.topScopeLoader(t),o=null==n||null===(r=n.article)||void 0===r?void 0:r.id;return o||null},promptTriggerRuleId:function(t){var r,n,o=e.selectors.topScopeLoader(t),a=null==o||null===(r=o.pricing)||void 0===r||null===(n=r.identification)||void 0===n?void 0:n.identification_rule_id;return a||null},promptTriggerPlanId:function(t){var r,n,o=e.selectors.topScopeLoader(t),a=null==o||null===(r=o.pricing)||void 0===r||null===(n=r.monetization)||void 0===n?void 0:n.plan_id;return a||null},getOrderType:function(e,t){var r,n=null,o=t||(null!=e&&null!==(r=e.options)&&void 0!==r&&r.length?e.options[0]:{}),a=o.type;if("subscription"===a){var i=e.pledge_mode,u=!(!o.trial_price&&null!==o.trial_price||!o.trial_interval||!o.trial_quantity);n=i?"pledge":u?"trial":a}else n=a;return n}})},de="loader";t.creators=O,t.default=function(e){var t=e.store,r=void 0===t?de:t,n=e.createDuck,o=e.initialState,a=void 0===o?j:o,i=e.creators,u=void 0===i?O:i,s=e.types,c=void 0===s?A:s,l=e.reducer,d=void 0===l?F:l,p=e.sagas,f=void 0===p?B:p,y=e.takes,_=void 0===y?W:y,E=e.selectors,m=void 0===E?le:E;return n({store:r,initialState:a}).extend({creators:u,types:c,reducer:d,sagas:f,takes:_,selectors:m})},t.initialState=j,t.reducer=F,t.sagas=B,t.selectors=le,t.store=de,t.takes=W,t.types=A},53155:(e,t,r)=>{e.exports=r(45971)},75511:(e,t,r)=>{"use strict";var n=r(58071),o=r(5623),a=r(35217),i=r(43076),u=r(30453),s=r(91494),c=r(54710);e.exports=function(e){return new Promise((function(t,l){var d=e.data,p=e.headers;n.isFormData(d)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",_=e.auth.password||"";p.Authorization="Basic "+btoa(y+":"+_)}var E=i(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),a(E,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?u(f.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};o(t,l,n),f=null}},f.onabort=function(){f&&(l(c("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(c(t,e,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var m=r(34064),h=(e.withCredentials||s(E))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;h&&(p[e.xsrfHeaderName]=h)}if("setRequestHeader"in f&&n.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),l(e),f=null)})),void 0===d&&(d=null),f.send(d)}))}},45971:(e,t,r)=>{"use strict";var n=r(58071),o=r(3633),a=r(43242),i=r(47230);function u(e){var t=new a(e),r=o(a.prototype.request,t);return n.extend(r,a.prototype,t),n.extend(r,t),r}var s=u(r(46412));s.Axios=a,s.create=function(e){return u(i(s.defaults,e))},s.Cancel=r(90823),s.CancelToken=r(1497),s.isCancel=r(67581),s.all=function(e){return Promise.all(e)},s.spread=r(83363),e.exports=s,e.exports.default=s},90823:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},1497:(e,t,r)=>{"use strict";var n=r(90823);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},67581:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},43242:(e,t,r)=>{"use strict";var n=r(58071),o=r(35217),a=r(88577),i=r(36377),u=r(47230);function s(e){this.defaults=e,this.interceptors={request:new a,response:new a}}s.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},s.prototype.getUri=function(e){return e=u(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){s.prototype[e]=function(t,r,o){return this.request(n.merge(o||{},{method:e,url:t,data:r}))}})),e.exports=s},88577:(e,t,r)=>{"use strict";var n=r(58071);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},43076:(e,t,r)=>{"use strict";var n=r(3985),o=r(38221);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},54710:(e,t,r)=>{"use strict";var n=r(1824);e.exports=function(e,t,r,o,a){var i=new Error(e);return n(i,t,r,o,a)}},36377:(e,t,r)=>{"use strict";var n=r(58071),o=r(1110),a=r(67581),i=r(46412);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return u(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(u(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},1824:e=>{"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},47230:(e,t,r)=>{"use strict";var n=r(58071);e.exports=function(e,t){t=t||{};var r={},o=["url","method","params","data"],a=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(o,(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(a,(function(o){n.isObject(t[o])?r[o]=n.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:n.isObject(e[o])?r[o]=n.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])})),n.forEach(i,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var u=o.concat(a).concat(i),s=Object.keys(t).filter((function(e){return-1===u.indexOf(e)}));return n.forEach(s,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},5623:(e,t,r)=>{"use strict";var n=r(54710);e.exports=function(e,t,r){var o=r.config.validateStatus;!o||o(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},1110:(e,t,r)=>{"use strict";var n=r(58071);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},46412:(e,t,r)=>{"use strict";var n=r(34155),o=r(58071),a=r(80697),i={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==n&&"[object process]"===Object.prototype.toString.call(n))&&(s=r(75511)),s),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(u(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){c.headers[e]=o.merge(i)})),e.exports=c},3633:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},35217:(e,t,r)=>{"use strict";var n=r(58071);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(n.isURLSearchParams(t))a=t.toString();else{var i=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),a=i.join("&")}if(a){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},38221:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},34064:(e,t,r)=>{"use strict";var n=r(58071);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,a,i){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(o)&&u.push("path="+o),n.isString(a)&&u.push("domain="+a),!0===i&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},3985:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},91494:(e,t,r)=>{"use strict";var n=r(58071);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},80697:(e,t,r)=>{"use strict";var n=r(58071);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},30453:(e,t,r)=>{"use strict";var n=r(58071),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,a,i={};return e?(n.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i}},83363:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},58071:(e,t,r)=>{"use strict";var n=r(3633),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function i(e){return void 0===e}function u(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:i,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:s,isStream:function(e){return u(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,(function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},77178:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(63687),u=r(72831),s=r(87996),c=r(20573),l=r(41609);function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=d(n),f=d(o),y=d(s),_=d(l);function E(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=p.default({baseActionCreatorName:"getCurrentUser",baseActionTypeName:"GET_CURRENT_USER"}),v=p.default({baseActionCreatorName:"updateCurrentUser",baseActionTypeName:"UPDATE_CURRENT_USER"}),g=p.default({baseActionCreatorName:"deleteCurrentUser",baseActionTypeName:"DELETE_CURRENT_USER"}),S=p.default({baseActionCreatorName:"updateUserProperties",baseActionTypeName:"UPDATE_USER_PROPERTIES"}),R=p.default({baseActionCreatorName:"updateUserNewsletters",baseActionTypeName:"UPDATE_USER_NEWSLETTERS"}),T=[].concat(E(h.types),E(v.types),E(g.types),E(S.types),E(R.types)),b=function(e){return Object.assign({},h.creators(e),v.creators(e),g.creators(e),S.creators(e),R.creators(e))},A={data:null,error:null,newsletters:{data:null,loading:!1,error:null},properties:{data:null,loading:!1,error:null}},O=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return f.default(e,(function(e){switch(n){case r.types.DELETE_CURRENT_USER_SUCCESS:e.data=A.data,e.error=A.error;break;case r.types.GET_CURRENT_USER:case r.types.DELETE_CURRENT_USER:case r.types.UPDATE_CURRENT_USER:e.error=A.error;break;case r.types.UPDATE_CURRENT_USER_SUCCESS:case r.types.GET_CURRENT_USER_SUCCESS:e.data=o;break;case r.types.GET_CURRENT_USER_ERROR:case r.types.UPDATE_CURRENT_USER_ERROR:case r.types.DELETE_CURRENT_USER_ERROR:e.error=a;break;case r.types.UPDATE_USER_NEWSLETTERS:e.newsletters.loading=!0,e.newsletters.data=A.newsletters.data,e.newsletters.error=A.newsletters.error;break;case r.types.UPDATE_USER_PROPERTIES:e.properties.loading=!0,e.properties.data=A.properties.data,e.properties.error=A.properties.error;break;case r.types.UPDATE_USER_NEWSLETTERS_SUCCESS:e.newsletters.data=o,e.newsletters.loading=!1;break;case r.types.UPDATE_USER_PROPERTIES_SUCCESS:e.properties.data=o,e.properties.loading=!1;break;case r.types.UPDATE_USER_NEWSLETTERS_ERROR:e.newsletters.loading=!1,e.newsletters.error=a;break;case r.types.UPDATE_USER_PROPERTIES_ERROR:e.properties.loading=!1,e.properties.error=a}}))};var C=function(e){return{getCurrentUser:function*(t){yield function*(e){var t=e.types,r=e.publisherId;try{var n=(yield a.call(u.picoAPIHelper,{url:i.ME(),headers:{publisherid:r}})).data;if(!n)throw new Error("unable to get current user");yield a.put({type:t.GET_CURRENT_USER_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_CURRENT_USER_ERROR,error:(null==e?void 0:e.message)||"GET_CURRENT_USER_ERROR"})}}(Object.assign({},t,e))},updateCurrentUser:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:i.ME(),method:"put",data:r})).data;if(!n)throw new Error("unable to update current user");yield a.put({type:t.UPDATE_CURRENT_USER_SUCCESS,payload:n})}catch(e){yield a.put({type:t.UPDATE_CURRENT_USER_ERROR,error:(null==e?void 0:e.message)||"UPDATE_CURRENT_USER_ERROR"})}}(Object.assign({},t,e))},deleteCurrentUser:function*(t){yield function*(e){var t=e.types,r=e.payload;try{if(200!==(yield a.call(u.picoAPIHelper,{url:i.ME(),method:"delete"})).status)throw new Error("unable to delete current user");yield a.put({type:t.DELETE_CURRENT_USER_SUCCESS,payload:r})}catch(e){yield a.put({type:t.DELETE_CURRENT_USER_ERROR,error:(null==e?void 0:e.message)||"DELETE_CURRENT_USER_ERROR"})}}(Object.assign({},t,e))},updateUserProperties:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=e.customProperties;try{var o=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ME(),"/properties"),method:"put",headers:{publisherid:r},data:{custom_properties:n}})).data;if(!o)throw new Error("Unable to update custom properties");yield a.put({type:t.UPDATE_USER_PROPERTIES_SUCCESS,payload:o})}catch(e){yield a.put({type:t.UPDATE_USER_PROPERTIES_ERROR,error:"Error updating user fields"})}}(Object.assign({},t,e))},updateUserNewsletters:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=e.newsletters;try{var o=(yield a.call(u.picoAPIHelper,{url:"".concat(i.ME(),"/newsletters"),method:"put",headers:{publisherid:r},data:{newsletters:n}})).data;if(!o)throw new Error("Unable to update newsletters");yield a.put({type:t.UPDATE_USER_NEWSLETTERS_SUCCESS,payload:o})}catch(e){yield a.put({type:t.UPDATE_USER_NEWSLETTERS_ERROR,error:"Error updating user newsletters"})}}(Object.assign({},t,e))}}},P=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_CURRENT_USER,r.getCurrentUser),a.takeEvery(t.UPDATE_CURRENT_USER,r.updateCurrentUser),a.takeEvery(t.DELETE_CURRENT_USER,r.deleteCurrentUser),a.takeEvery(t.UPDATE_USER_PROPERTIES,r.updateUserProperties),a.takeEvery(t.UPDATE_USER_NEWSLETTERS,r.updateUserNewsletters)]},I=function(){return{me:new y.default.Selector((function(){return function(e){return null==e?void 0:e.me}})),getCurrentUser:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return t}))})),getError:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error;return t}))})),userFullName:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.full_name}))})),userFirstName:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.first_name}))})),userLastName:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.last_name}))})),userEmail:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return(null==n||null===(e=n.email)||void 0===e?void 0:e.value)||(null==n||null===(t=n._email)||void 0===t?void 0:t.value)||(null==n?void 0:n.email)}))})),userEmailIsShared:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return(null==n||null===(e=n.email)||void 0===e?void 0:e.shared)||(null==n||null===(t=n._email)||void 0===t?void 0:t.shared)}))})),userPhone:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return(null==n||null===(e=n.phone)||void 0===e?void 0:e.value)||(null==n||null===(t=n._phone)||void 0===t?void 0:t.value)||(null==n?void 0:n.phone)}))})),userPhoneIsShared:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return(null==n||null===(e=n.phone)||void 0===e?void 0:e.shared)||(null==n||null===(t=n._phone)||void 0===t?void 0:t.shared)}))})),userId:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.id}))})),userStateId:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.user_state_id}))})),userHasPassword:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.has_password}))})),userAvatarUrl:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.avatar_url}))})),userInitials:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e,t,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o.data,i=(null==a?void 0:a.initials)||"",u=(null==a||null===(e=a.email)||void 0===e?void 0:e.value)||(null==a||null===(t=a._email)||void 0===t?void 0:t.value),s=(null==a||null===(r=a.email)||void 0===r?void 0:r.shared)||(null==a||null===(n=a._email)||void 0===n?void 0:n.shared);return _.default(null==a?void 0:a.initials)&&u&&s?u[0]:i}))})),userVerified:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.verified}))})),userSyncNewsletters:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return null==t?void 0:t.sync}))})),getUserNewslettersData:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newsletters;return null==t?void 0:t.data}))})),getUserNewslettersLoading:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newsletters;return null==t?void 0:t.loading}))})),getUserNewslettersError:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newsletters;return null==t?void 0:t.error}))})),getUserPropertiesData:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.properties;return null==t?void 0:t.data}))})),getUserPropertiesLoading:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.properties;return null==t?void 0:t.loading}))})),getUserPropertiesError:new y.default.Selector((function(e){return c.createSelector(e.me,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.properties;return null==t?void 0:t.error}))}))}};t.ZP=function(e){return(0,e.createDuck)({store:"me",initialState:A}).extend({creators:b,types:T,reducer:O,sagas:C,takes:P,selectors:I})}},23266:(e,t,r)=>{"use strict";var n=r(27144),o=r(70355),a=r(34857),i=r(72831),u=r(63687),s=r(87996),c=r(20573);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(o),f=l(s);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _,E=d.default({baseActionCreatorName:"getNewsletters",baseActionTypeName:"GET_NEWSLETTERS"}),m=function(e){if(Array.isArray(e))return y(e)}(_=E.types)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(_)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=function(e){return Object.assign({},E.creators(e))},v={fetched:!1,newsletters:[]},g=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return p.default(e,(function(e){switch(n){case r.types.GET_NEWSLETTERS_SUCCESS:e.newsletters=o,e.fetched=!0;break;case r.types.GET_NEWSLETTERS_ERROR:e.error=a,e.fetched=!0}}))};var S=function(e){return{retrieveNewsletters:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=void 0===r?null:r;try{var o=(yield a.putResolve({type:i.REQUEST,config:{method:"get",baseURL:u.PICO_API_URL(),url:"/client/newsletters",headers:Object.assign({Accept:"application/json","Content-Type":"application/json"},!!n&&{publisherid:n}),timeout:3e4}})).data;if(!o)throw"Could not fetch newsletters";yield a.put({type:t.GET_NEWSLETTERS_SUCCESS,payload:o})}catch(e){yield a.put({type:t.GET_NEWSLETTERS_ERROR,error:(null==e?void 0:e.message)||"GET_NEWSLETTER_ERROR"})}}(Object.assign({},t,e))}}},R=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_NEWSLETTERS,r.retrieveNewsletters)]},T=function(){return{newsletters:new f.default.Selector((function(){return function(e){return null==e?void 0:e.newsletter}})),newslettersHaveBeenFetched:new f.default.Selector((function(e){return c.createSelector(e.newsletters,(function(e){return e.fetched}))})),allNewsletters:new f.default.Selector((function(e){return c.createSelector(e.newsletters,(function(e){var t=e.newsletters;return void 0===t?[]:t}))})),subscribedNewsletters:new f.default.Selector((function(e){return c.createSelector(e.allNewsletters,(function(e){var t=e.newsletters;return(void 0===t?[]:t).filter((function(e){return e.subscribed}))}))}))}},b="newsletter";t.ZP=function(e){return(0,e.createDuck)({store:b,initialState:v}).extend({creators:h,types:m,reducer:g,sagas:S,takes:R,selectors:T})}},70355:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Se,Immer:()=>le,applyPatches:()=>Ee,castDraft:()=>ve,castImmutable:()=>ge,createDraft:()=>me,finishDraft:()=>he,immerable:()=>d,isDraft:()=>E,isDraftable:()=>m,nothing:()=>l,original:()=>h,produce:()=>pe,produceWithPatches:()=>fe,setAutoFreeze:()=>ye,setUseProxies:()=>_e});var n,o,a,i=r(34155),u="undefined"!=typeof Symbol,s="undefined"!=typeof Map,c="undefined"!=typeof Set,l=u?Symbol("immer-nothing"):((n={})["immer-nothing"]=!0,n),d=u?Symbol("immer-draftable"):"__$immer_draftable",p=u?Symbol("immer-state"):"__$immer_state",f=u?Symbol.iterator:"@@iterator",y=function(e,t){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},y(e,t)};function _(e,t){function r(){this.constructor=e}y(e,t),e.prototype=(r.prototype=t.prototype,new r)}function E(e){return!!e&&!!e[p]}function m(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[d]||!!e.constructor[d]||A(e)||O(e))}function h(e){if(e&&e[p])return e[p].base}!function(e){e[e.Object=0]="Object",e[e.Array=1]="Array",e[e.Map=2]="Map",e[e.Set=3]="Set"}(o||(o={})),function(e){e[e.ProxyObject=0]="ProxyObject",e[e.ProxyArray=1]="ProxyArray",e[e.ES5Object=2]="ES5Object",e[e.ES5Array=3]="ES5Array",e[e.Map=4]="Map",e[e.Set=5]="Set"}(a||(a={}));var v="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function g(e,t){S(e)===o.Object?v(e).forEach((function(r){return t(r,e[r],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function S(e){if(e||N(),e[p])switch(e[p].type){case a.ES5Object:case a.ProxyObject:return o.Object;case a.ES5Array:case a.ProxyArray:return o.Array;case a.Map:return o.Map;case a.Set:return o.Set}return Array.isArray(e)?o.Array:A(e)?o.Map:O(e)?o.Set:o.Object}function R(e,t){return S(e)===o.Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function T(e,t){return S(e)===o.Map?e.get(t):e[t]}function b(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function A(e){return s&&e instanceof Map}function O(e){return c&&e instanceof Set}function C(e){return e.copy||e.base}function P(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var r=Object.create(Object.getPrototypeOf(e));return v(e).forEach((function(n){if(n!==p){var o=Object.getOwnPropertyDescriptor(e,n),a=o.value;if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");a=o.get.call(e)}o.enumerable?r[n]=a:Object.defineProperty(r,n,{value:a,writable:!0,configurable:!0})}})),r}function I(e,t){if(m(e)&&!E(e)&&!Object.isFrozen(e)){var r=S(e);r===o.Set?e.add=e.clear=e.delete=U:r===o.Map&&(e.set=e.clear=e.delete=U),Object.freeze(e),t&&g(e,(function(e,t){return I(t,!0)}))}}function U(){throw new Error("This object has been frozen and should not be mutated")}function N(){throw new Error("Illegal state, please file a bug")}var w=function(){function e(e,t){this.drafts=[],this.parent=e,this.immer=t,this.canAutoFreeze=!0}return e.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},e.prototype.revoke=function(){this.leave(),this.drafts.forEach(L),this.drafts=null},e.prototype.leave=function(){this===e.current&&(e.current=this.parent)},e.enter=function(t){var r=new e(e.current,t);return e.current=r,r},e}();function L(e){var t=e[p];t.type===a.ProxyObject||t.type===a.ProxyArray?t.revoke():t.revoked=!0}function D(e,t,r){var n=r.drafts[0],o=void 0!==t&&t!==n;if(e.willFinalize(r,t,o),o){if(n[p].modified)throw r.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");m(t)&&(t=k(e,t,r),r.parent||j(e,t)),r.patches&&(r.patches.push({op:"replace",path:[],value:t}),r.inversePatches.push({op:"replace",path:[],value:n[p].base}))}else t=k(e,n,r,[]);return r.revoke(),r.patches&&r.patchListener(r.patches,r.inversePatches),t!==l?t:void 0}function k(e,t,r,n){var o=t[p];if(!o)return Object.isFrozen(t)?t:G(e,t,r);if(o.scope!==r)return t;if(!o.modified)return j(e,o.base,!0),o.base;if(!o.finalized){if(o.finalized=!0,G(e,o.draft,r,n),e.onDelete&&o.type!==a.Set)if(e.useProxies){g(o.assigned,(function(t,r){r||e.onDelete(o,t)}))}else{var i=o.base,u=o.copy;g(i,(function(t){R(u,t)||e.onDelete(o,t)}))}e.onCopy&&e.onCopy(o),e.autoFreeze&&r.canAutoFreeze&&I(o.copy,!1),n&&r.patches&&function(e,t,r,n){switch(e.type){case a.ProxyObject:case a.ES5Object:case a.Map:return function(e,t,r,n){var o=e.base,a=e.copy;g(e.assigned,(function(e,i){var u=T(o,e),s=T(a,e),c=i?R(o,e)?"replace":"add":"remove";if(u!==s||"replace"!==c){var l=t.concat(e);r.push("remove"===c?{op:c,path:l}:{op:c,path:l,value:s}),n.push("add"===c?{op:"remove",path:l}:"remove"===c?{op:"add",path:l,value:u}:{op:"replace",path:l,value:u})}}))}(e,t,r,n);case a.ES5Array:case a.ProxyArray:return function(e,t,r,n){var o,a,i=e.base,u=e.assigned,s=e.copy;s||N();s.length<i.length&&(i=(o=[s,i])[0],s=o[1],r=(a=[n,r])[0],n=a[1]);var c=s.length-i.length,l=0;for(;i[l]===s[l]&&l<i.length;)++l;var d=i.length;for(;d>l&&i[d-1]===s[d+c-1];)--d;for(var p=l;p<d;++p)if(u[p]&&s[p]!==i[p]){var f=t.concat([p]);r.push({op:"replace",path:f,value:s[p]}),n.push({op:"replace",path:f,value:i[p]})}var y=r.length;for(p=d+c-1;p>=d;--p){f=t.concat([p]);r[y+p-d]={op:"add",path:f,value:s[p]},n.push({op:"remove",path:f})}}(e,t,r,n);case a.Set:(function(e,t,r,n){var o=e.base,a=e.copy,i=0;o.forEach((function(e){if(!a.has(e)){var o=t.concat([i]);r.push({op:"remove",path:o,value:e}),n.unshift({op:"add",path:o,value:e})}i++})),i=0,a.forEach((function(e){if(!o.has(e)){var a=t.concat([i]);r.push({op:"add",path:a,value:e}),n.unshift({op:"remove",path:a,value:e})}i++}))})(e,t,r,n)}}(o,n,r.patches,r.inversePatches)}return o.copy}function G(e,t,r,n){var o=t[p];return o&&(o.type!==a.ES5Object&&o.type!==a.ES5Array||(o.copy=P(o.draft,!0)),t=o.copy),g(t,(function(a,i){return M(e,r,t,o,t,a,i,n)})),t}function M(e,t,r,n,a,i,u,s){if(u===a)throw Error("Immer forbids circular references");var c=!!n&&a===r,l=O(a);if(E(u)){var d=s&&c&&!l&&!R(n.assigned,i)?s.concat(i):void 0;(function(e,t,r){switch(S(e)){case o.Map:e.set(t,r);break;case o.Set:e.delete(t),e.add(r);break;default:e[t]=r}})(a,i,u=k(e,u,t,d)),E(u)&&(t.canAutoFreeze=!1)}else{if(c&&b(u,T(n.base,i)))return;m(u)&&(g(u,(function(o,a){return M(e,t,r,n,u,o,a,s)})),t.parent||j(e,u))}c&&e.onAssign&&!l&&e.onAssign(n,i,u)}function j(e,t,r){void 0===r&&(r=!1),e.autoFreeze&&!E(t)&&I(t,r)}var H={get:function(e,t){if(t===p)return e;var r=e.drafts;if(!e.modified&&R(r,t))return r[t];var n=C(e)[t];if(e.finalized||!m(n))return n;if(e.modified){if(n!==x(e.base,t))return n;r=e.copy}return r[t]=e.scope.immer.createProxy(n,e)},has:function(e,t){return t in C(e)},ownKeys:function(e){return Reflect.ownKeys(C(e))},set:function(e,t,r){if(!e.modified){var n=x(e.base,t);if(r?b(n,r)||r===e.drafts[t]:b(n,r)&&t in e.base)return!0;W(e),B(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){return void 0!==x(e.base,t)||t in e.base?(e.assigned[t]=!1,W(e),B(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var r=C(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=e.type!==a.ProxyArray||"length"!==t),n},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},F={};function x(e,t){var r=e[p],n=Reflect.getOwnPropertyDescriptor(r?C(r):e,t);return n&&n.value}function B(e){if(!e.modified){if(e.modified=!0,e.type===a.ProxyObject||e.type===a.ProxyArray){var t=e.copy=P(e.base);g(e.drafts,(function(e,r){t[e]=r})),e.drafts=void 0}e.parent&&B(e.parent)}}function W(e){e.copy||(e.copy=P(e.base))}function K(e,t,r){e.drafts.forEach((function(e){e[p].finalizing=!0})),r?E(t)&&t[p].scope===e&&Z(e.drafts):(e.patches&&X(e.drafts[0]),Z(e.drafts))}function V(e,t){var r=Array.isArray(e),n=$(e);g(n,(function(t){!function(e,t,r){var n=J[t];n?n.enumerable=r:J[t]=n={configurable:!0,enumerable:r,get:function(){return function(e,t){Q(e);var r=Y(C(e),t);if(e.finalizing)return r;if(r===Y(e.base,t)&&m(r))return q(e),e.copy[t]=e.scope.immer.createProxy(r,e);return r}(this[p],t)},set:function(e){!function(e,t,r){if(Q(e),e.assigned[t]=!0,!e.modified){if(b(r,Y(C(e),t)))return;z(e),q(e)}e.copy[t]=r}(this[p],t,e)}};Object.defineProperty(e,t,n)}(n,t,r||function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(!r||!r.enumerable)}(e,t))}));var o,i,u,s={type:r?a.ES5Array:a.ES5Object,scope:t?t.scope:w.current,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:n,copy:null,revoked:!1,isManual:!1};return o=n,i=p,u=s,Object.defineProperty(o,i,{value:u,enumerable:!1,writable:!0}),n}function Y(e,t){var r=e[p];if(r&&!r.finalizing){r.finalizing=!0;var n=e[t];return r.finalizing=!1,n}return e[t]}function z(e){e.modified||(e.modified=!0,e.parent&&z(e.parent))}function q(e){e.copy||(e.copy=$(e.base))}function $(e){var t=e&&e[p];if(t){t.finalizing=!0;var r=P(t.draft,!0);return t.finalizing=!1,r}return P(e)}g(H,(function(e,t){F[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),F.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return H.deleteProperty.call(this,e[0],t)},F.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return H.set.call(this,e[0],t,r,e[0])};var J={};function Q(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(C(e)))}function Z(e){for(var t=e.length-1;t>=0;t--){var r=e[t][p];if(!r.modified)switch(r.type){case a.ES5Array:te(r)&&z(r);break;case a.ES5Object:ee(r)&&z(r)}}}function X(e){if(e&&"object"==typeof e){var t=e[p];if(t){var r=t.base,n=t.draft,o=t.assigned,i=t.type;if(i===a.ES5Object)g(n,(function(e){e!==p&&(void 0!==r[e]||R(r,e)?o[e]||X(n[e]):(o[e]=!0,z(t)))})),g(r,(function(e){void 0!==n[e]||R(n,e)||(o[e]=!1,z(t))}));else if(i===a.ES5Array){if(te(t)&&(z(t),o.length=!0),n.length<r.length)for(var u=n.length;u<r.length;u++)o[u]=!1;else for(u=r.length;u<n.length;u++)o[u]=!0;var s=Math.min(n.length,r.length);for(u=0;u<s;u++)void 0===o[u]&&X(n[u])}}}}function ee(e){for(var t=e.base,r=e.draft,n=Object.keys(r),o=n.length-1;o>=0;o--){var a=n[o],i=t[a];if(void 0===i&&!R(t,a))return!0;var u=r[a],s=u&&u[p];if(s?s.base!==i:!b(u,i))return!0}return n.length!==Object.keys(t).length}function te(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var re=function(e){if(!e)throw new Error("Map is not polyfilled");function t(e,t){return this[p]={type:a.Map,parent:t,scope:t?t.scope:w.current,modified:!1,finalized:!1,copy:void 0,assigned:void 0,base:e,draft:this,isManual:!1,revoked:!1},this}_(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return C(this[p]).size},enumerable:!0,configurable:!0}),r.has=function(e){return C(this[p]).has(e)},r.set=function(e,t){var r=this[p];return Q(r),C(r).get(e)!==t&&(ne(r),r.scope.immer.markChanged(r),r.assigned.set(e,!0),r.copy.set(e,t),r.assigned.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[p];return Q(t),ne(t),t.scope.immer.markChanged(t),t.assigned.set(e,!1),t.copy.delete(e),!0},r.clear=function(){var e=this[p];return Q(e),ne(e),e.scope.immer.markChanged(e),e.assigned=new Map,e.copy.clear()},r.forEach=function(e,t){var r=this;C(this[p]).forEach((function(n,o,a){e.call(t,r.get(o),o,r)}))},r.get=function(e){var t=this[p];Q(t);var r=C(t).get(e);if(t.finalized||!m(r))return r;if(r!==t.base.get(e))return r;var n=t.scope.immer.createProxy(r,t);return ne(t),t.copy.set(e,n),n},r.keys=function(){return C(this[p]).keys()},r.values=function(){var e,t=this,r=this.keys();return(e={})[f]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,r=this.keys();return(e={})[f]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},r[f]=function(){return this.entries()},t}(Map);function ne(e){e.copy||(e.assigned=new Map,e.copy=new Map(e.base))}var oe=function(e){if(!e)throw new Error("Set is not polyfilled");function t(e,t){return this[p]={type:a.Set,parent:t,scope:t?t.scope:w.current,modified:!1,finalized:!1,copy:void 0,base:e,draft:this,drafts:new Map,revoked:!1,isManual:!1},this}_(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return C(this[p]).size},enumerable:!0,configurable:!0}),r.has=function(e){var t=this[p];return Q(t),t.copy?!!t.copy.has(e)||!(!t.drafts.has(e)||!t.copy.has(t.drafts.get(e))):t.base.has(e)},r.add=function(e){var t=this[p];return Q(t),t.copy?t.copy.add(e):t.base.has(e)||(ae(t),t.scope.immer.markChanged(t),t.copy.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[p];return Q(t),ae(t),t.scope.immer.markChanged(t),t.copy.delete(e)||!!t.drafts.has(e)&&t.copy.delete(t.drafts.get(e))},r.clear=function(){var e=this[p];return Q(e),ae(e),e.scope.immer.markChanged(e),e.copy.clear()},r.values=function(){var e=this[p];return Q(e),ae(e),e.copy.values()},r.entries=function(){var e=this[p];return Q(e),ae(e),e.copy.entries()},r.keys=function(){return this.values()},r[f]=function(){return this.values()},r.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}(Set);function ae(e){e.copy||(e.copy=new Set,e.base.forEach((function(t){if(m(t)){var r=e.scope.immer.createProxy(t,e);e.drafts.set(t,r),e.copy.add(r)}else e.copy.add(t)})))}function ie(e,t){return t.forEach((function(t){var r=t.path,n=t.op;r.length||N();for(var a=e,i=0;i<r.length-1;i++)if(!(a=T(a,r[i]))||"object"!=typeof a)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var u=S(a),s=ue(t.value),c=r[r.length-1];switch(n){case"replace":switch(u){case o.Map:return a.set(c,s);case o.Set:throw new Error('Sets cannot have "replace" patches.');default:return a[c]=s}case"add":switch(u){case o.Array:return a.splice(c,0,s);case o.Map:return a.set(c,s);case o.Set:return a.add(s);default:return a[c]=s}case"remove":switch(u){case o.Array:return a.splice(c,1);case o.Map:return a.delete(c);case o.Set:return a.delete(t.value);default:return delete a[c]}default:throw new Error("Unsupported patch operation: "+n)}})),e}function ue(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(ue);if(A(e))return new Map(Array.from(e.entries()).map((function(e){return[e[0],ue(e[1])]})));if(O(e))return new Set(Array.from(e).map(ue));var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=ue(e[r]);return t}function se(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}var ce={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:void 0===i&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},le=function(){function e(e){var t=this;this.useProxies=!1,this.autoFreeze=!1,g(ce,(function(r,n){var o,a;t[r]=null!=(a=null===(o=e)||void 0===o?void 0:o[r])?a:n})),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}return e.prototype.produce=function(e,t,r){var n,o=this;if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var i=this;return function(e){var r=arguments,n=this;void 0===e&&(e=a);for(var o=[],u=1;u<arguments.length;u++)o[u-1]=r[u];return i.produce(e,(function(e){return t.call.apply(t,se([n,e],o))}))}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==r&&"function"!=typeof r)throw new Error("The third argument to `produce` must be a function or undefined");if(m(e)){var u=w.enter(this),s=this.createProxy(e,void 0),c=!0;try{n=t(s),c=!1}finally{c?u.revoke():u.leave()}return"undefined"!=typeof Promise&&n instanceof Promise?n.then((function(e){return u.usePatches(r),D(o,e,u)}),(function(e){throw u.revoke(),e})):(u.usePatches(r),D(this,n,u))}if((n=t(e))!==l)return void 0===n&&(n=e),j(this,n,!0),n},e.prototype.produceWithPatches=function(e,t,r){var n,o,a=this;return"function"==typeof e?function(t){for(var r=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=r[o];return a.produceWithPatches(t,(function(t){return e.apply(void 0,se([t],n))}))}:(r&&N(),[this.produce(e,t,(function(e,t){n=e,o=t})),n,o])},e.prototype.createDraft=function(e){if(!m(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=w.enter(this),r=this.createProxy(e,void 0);return r[p].isManual=!0,t.leave(),r},e.prototype.finishDraft=function(e,t){var r=e&&e[p];if(!r||!r.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(r.finalized)throw new Error("The given draft is already finalized");var n=r.scope;return n.usePatches(t),D(this,void 0,n)},e.prototype.setAutoFreeze=function(e){this.autoFreeze=e},e.prototype.setUseProxies=function(e){this.useProxies=e},e.prototype.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}return E(e)?ie(e,t):this.produce(e,(function(e){return ie(e,t.slice(r+1))}))},e.prototype.createProxy=function(e,t){var r=A(e)?function(e,t){return new re(e,t)}(e,t):O(e)?function(e,t){return new oe(e,t)}(e,t):this.useProxies?function(e,t){var r=Array.isArray(e),n={type:r?a.ProxyArray:a.ProxyObject,scope:t?t.scope:w.current,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null,isManual:!1},o=n,i=H;r&&(o=[n],i=F);var u=Proxy.revocable(o,i),s=u.revoke,c=u.proxy;return n.draft=c,n.revoke=s,c}(e,t):V(e,t);return(t?t.scope:w.current).drafts.push(r),r},e.prototype.willFinalize=function(e,t,r){this.useProxies||K(e,t,r)},e.prototype.markChanged=function(e){this.useProxies?B(e):z(e)},e}(),de=new le,pe=de.produce,fe=de.produceWithPatches.bind(de),ye=de.setAutoFreeze.bind(de),_e=de.setUseProxies.bind(de),Ee=de.applyPatches.bind(de),me=de.createDraft.bind(de),he=de.finishDraft.bind(de);function ve(e){return e}function ge(e){return e}const Se=pe},51288:(e,t,r)=>{"use strict";var n=r(18172),o=r(34857),a=r(72831),i=r(63687),u=r(87996),s=r(20573);function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=c(n),d=c(u),p=["ADD_PAYMENT_METHOD","ADD_PAYMENT_METHOD_SUCCESS","ADD_PAYMENT_METHOD_ERROR","DELETE_PAYMENT_METHOD","DELETE_PAYMENT_METHOD_SUCCESS","DELETE_PAYMENT_METHOD_ERROR","SELECT_PAYMENT_METHOD","SET_DEFAULT_PAYMENT_METHOD","SET_DEFAULT_PAYMENT_METHOD_SUCCESS","SET_DEFAULT_PAYMENT_METHOD_ERROR"],f=function(e){return{addPaymentMethod:function(t){return Object.assign({type:e.types.ADD_PAYMENT_METHOD},t)},deletePaymentMethod:function(t){return Object.assign({type:e.types.DELETE_PAYMENT_METHOD},t)},selectPaymentMethod:function(t){return Object.assign({type:e.types.SELECT_PAYMENT_METHOD},t)},setDefaultPaymentMethod:function(t){return Object.assign({type:e.types.SET_DEFAULT_PAYMENT_METHOD},t)}}},y={isPaymentMethodUpdating:!1,isPaymentMethodDeleting:!1,isDefaultBeingSet:!1,selectedPaymentMethod:null,paymentMethods:{},paymentMethodErrors:{}},_=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return l.default(e,(function(e){switch(n){case r.types.ADD_PAYMENT_METHOD:e.isPaymentMethodUpdating=!0,e.paymentMethods[t.token.id]=null;break;case r.types.ADD_PAYMENT_METHOD_SUCCESS:e.isPaymentMethodUpdating=!1,e.paymentMethods[o.token_id]=o.tokenData||!0;break;case r.types.ADD_PAYMENT_METHOD_ERROR:e.isPaymentMethodUpdating=!1,e.paymentMethods[o.token_id]=!1,e.paymentMethodErrors[o.token_id]=a;break;case r.types.DELETE_PAYMENT_METHOD:e.isPaymentMethodDeleting=!0;break;case r.types.DELETE_PAYMENT_METHOD_SUCCESS:case r.types.DELETE_PAYMENT_METHOD_ERROR:e.isPaymentMethodDeleting=!1;break;case r.types.SELECT_PAYMENT_METHOD:e.selectedPaymentMethod=o.paymentMethod||null;break;case r.types.SET_DEFAULT_PAYMENT_METHOD:e.isDefaultBeingSet=!0;break;case r.types.SET_DEFAULT_PAYMENT_METHOD_SUCCESS:case r.types.SET_DEFAULT_PAYMENT_METHOD_ERROR:e.isDefaultBeingSet=!1}}))};var E=function(e){return{addPaymentMethod:function*(t){yield function*(e){var t=e.types,r=e.token,n=void 0===r?{}:r,u=e.publisherId,s=e.loaderInvalidationEvent,c=void 0===s?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:s;try{var l,d;if(!n.id)throw Error("token.id must be provided");if(!n.type)throw Error("token.type must be provided");var p=(yield o.putResolve({type:a.REQUEST,config:{method:"post",baseURL:i.PICO_API_URL(),url:i.ME_PAYMENT(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:u},timeout:3e4,data:Object.assign({},n.account_id&&{account_id:n.account_id},{token:n.id,source_type:n.type})}})).data;p&&(yield o.put(yield o.call(c,{payload:{scope:["user"]}})));var f=null==n||null===(l=n.card)||void 0===l?void 0:l.id,y=((null==p||null===(d=p.paymentMethods)||void 0===d?void 0:d.filter((function(e){return!!f&&e.sourceId===f})))||[])[0];yield o.put({type:t.ADD_PAYMENT_METHOD_SUCCESS,payload:{token_id:n.id,tokenData:y}})}catch(e){yield o.put({type:t.ADD_PAYMENT_METHOD_ERROR,error:"There was an issue trying to complete your purchase. Please try again or contact support if this persists.",payload:{token_id:n.id}})}}(Object.assign({},t,e))},deletePaymentMethod:function*(t){yield function*(e){var t=e.types,r=e.sourceId,n=e.publisherId,u=e.account,s=e.loaderInvalidationEvent,c=void 0===s?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:s;try{if(!u)throw Error("account type must be provided");if(!r)throw Error("sourceId must be provided");if(!n)throw Error("publisherId must be provided");if(!(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:i.USERS_PAYMENT(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:{source_id:r,account:u}}})).data)throw Error("no data returned from server");yield o.put(yield o.call(c,{payload:{scope:["user"]}})),yield o.put({type:t.DELETE_PAYMENT_METHOD_SUCCESS,payload:{}})}catch(e){console.log(e),yield o.put({type:t.DELETE_PAYMENT_METHOD_ERROR,error:e.message})}}(Object.assign({},t,e))},setDefaultPaymentMethod:function*(t){yield function*(e){var t=e.types,r=e.sourceId,n=e.publisherId,u=e.loaderInvalidationEvent,s=void 0===u?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:u;try{if(!r)throw Error("sourceId must be provided");if(!n)throw Error("publisherId must be provided");var c=(yield o.putResolve({type:a.REQUEST,config:{method:"put",baseURL:i.PICO_API_URL(),url:i.ME_PAYMENT(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:{source_id:r,retry_charge:!1}}})).data;if(!c)throw Error("no data returned from server");if(c.error)throw Error(c.error);yield o.put(yield o.call(s,{payload:{scope:["user"]}})),yield o.put({type:t.SET_DEFAULT_PAYMENT_METHOD_SUCCESS,payload:{}})}catch(e){console.log(e),yield o.put({type:t.SET_DEFAULT_PAYMENT_METHOD_ERROR,error:e.message})}}(Object.assign({},t,e))}}},m=function(e){var t=e.types,r=e.sagas;return[o.takeEvery(t.ADD_PAYMENT_METHOD,r.addPaymentMethod),o.takeEvery(t.DELETE_PAYMENT_METHOD,r.deletePaymentMethod),o.takeEvery(t.SET_DEFAULT_PAYMENT_METHOD,r.setDefaultPaymentMethod)]},h=function(){return{payment:new d.default.Selector((function(){return function(e){return null==e?void 0:e.payment}})),paymentMethodErrors:new d.default.Selector((function(e){return s.createSelector(e.payment,(function(e){return e.paymentMethodErrors}))})),defaultPaymentMethodErrors:new d.default.Selector((function(e){return s.createSelector(e.payment,(function(e){return e.defaultPaymentMethodErrors}))})),isDefaultBeingSet:new d.default.Selector((function(e){return s.createSelector(e.payment,(function(e){return e.isDefaultBeingSet}))})),isDefaultNotBeingSet:new d.default.Selector((function(e){return s.createSelector(e.isDefaultBeingSet,(function(e){return!e}))})),paymentMethods:new d.default.Selector((function(e){return s.createSelector(e.payment,(function(e){return e.paymentMethods}))})),getPaymentMethod:new d.default.Selector((function(e){return function(t,r){var n;return null===(n=e.paymentMethods(t))||void 0===n?void 0:n[r]}})),doesPaymentMethodExist:new d.default.Selector((function(e){return s.createSelector(e.getPaymentMethod,(function(e){return!!e}))})),getPaymentMethodError:new d.default.Selector((function(e){return function(t,r){var n;return null===(n=e.paymentMethodErrors(t))||void 0===n?void 0:n[r]}})),doesPaymentMethodErrorExist:new d.default.Selector((function(e){return s.createSelector(e.getPaymentMethodError,(function(e){return!!e}))}))}},v="payment";t.ZP=function(e){var t=e.store,r=void 0===t?v:t,n=e.createDuck,o=e.initialState,a=void 0===o?y:o,i=e.creators,u=void 0===i?f:i,s=e.types,c=void 0===s?p:s,l=e.reducer,d=void 0===l?_:l,g=e.sagas,S=void 0===g?E:g,R=e.takes,T=void 0===R?m:R,b=e.selectors,A=void 0===b?h:b;return n({store:r,initialState:a}).extend({creators:u,types:c,reducer:d,sagas:S,takes:T,selectors:A})}},80527:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(63687),u=r(72831),s=r(87996),c=r(20573);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(o),f=l(s);function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=d.default({baseActionCreatorName:"getPayments",baseActionTypeName:"GET_PAYMENTS"}),m=d.default({baseActionCreatorName:"addPayment",baseActionTypeName:"ADD_PAYMENT"}),h=d.default({baseActionCreatorName:"updateDefaultPayment",baseActionTypeName:"UPDATE_DEFAULT_PAYMENT"}),v=d.default({baseActionCreatorName:"deletePayment",baseActionTypeName:"DELETE_PAYMENT"}),g=[].concat(y(E.types),y(m.types),y(h.types),y(v.types)),S=function(e){return Object.assign({},E.creators(e),m.creators(e),h.creators(e),v.creators(e))},R={methods:[],defaultMethod:null,error:null},T=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return p.default(e,(function(e){switch(n){case r.types.GET_PAYMENTS:e.methods=R.paymentMethods,e.defaultMethod=R.defaultMethod,e.error=R.error;break;case r.types.GET_PAYMENTS_SUCCESS:e.methods=o.payment_methods,e.defaultMethod=o.payment_method_default;break;case r.types.ADD_PAYMENT_SUCCESS:e.methods=o.paymentMethods;break;case r.types.DELETE_PAYMENT_SUCCESS:var t=e.methods.findIndex((function(e){return(null==e?void 0:e.id)===(null==o?void 0:o.source_id)}));-1!==t&&e.methods.splice(t,1),(null==o?void 0:o.source_id)===(null==e?void 0:e.defaultMethod)&&(e.defaultMethod=null);break;case r.types.UPDATE_DEFAULT_PAYMENT:e.defaultMethod=R.defaultMethod,e.error=R.error;break;case r.types.UPDATE_DEFAULT_PAYMENT_SUCCESS:e.defaultMethod=o.payment_method_default;break;case r.types.GET_PAYMENTS_ERROR:case r.types.ADD_PAYMENT_ERROR:case r.types.UPDATE_DEFAULT_PAYMENT_ERROR:case r.types.DELETE_PAYMENT_ERROR:e.error=a}}))};var b=function(e){return{getPayments:function*(t){yield function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.types,r=e.publisherId;try{var n=(yield a.call(u.picoAPIHelper,{headers:{publisherid:r},url:i.ME_PAYMENT(),method:"get"})).data;if(!n)throw new Error("unable to get payments");yield a.put({type:t.GET_PAYMENTS_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_PAYMENTS_ERROR,error:(null==e?void 0:e.message)||"GET_PAYMENTS_ERROR"})}}(Object.assign({},t,e))},addPayment:function*(t){yield function*(e){var t=e.types,r=e.token,n=e.publisherId;try{var o=(yield a.call(u.picoAPIHelper,{url:i.ME_PAYMENT(),method:"post",headers:{publisherid:n},data:Object.assign({},r.account_id&&{account_id:r.account_id},{token:r.id,source_type:r.type})})).data;if(!o)throw new Error("unable to add payment");yield a.put({type:t.ADD_PAYMENT_SUCCESS,payload:o})}catch(e){yield a.put({type:t.ADD_PAYMENT_ERROR,error:(null==e?void 0:e.message)||"ADD_PAYMENT_ERROR"})}}(Object.assign({},t,e))},updateDefaultPayment:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:i.ME_PAYMENT(),method:"get",data:r})).data;if(!n)throw new Error("unable to update default payment");yield a.put({type:t.UPDATE_DEFAULT_PAYMENT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.UPDATE_DEFAULT_PAYMENT_ERROR,error:(null==e?void 0:e.message)||"UPDATE_DEFAULT_PAYMENT_ERROR"})}}(Object.assign({},t,e))},deletePayment:function*(t){yield function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.types,r=e.publisherId,n=e.payload;try{var o=(yield a.call(u.picoAPIHelper,{headers:{publisherid:r},url:i.ME_PAYMENT(),method:"delete",data:n})).data;if(null==o||!o.source_id)throw new Error("unable to delete payment, ".concat(n.source_id));yield a.put({type:t.DELETE_PAYMENT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.DELETE_PAYMENT_ERROR,error:(null==e?void 0:e.message)||"DELETE_PAYMENT_ERROR"})}}(Object.assign({},t,e))}}},A=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_PAYMENTS,r.getPayments),a.takeEvery(t.ADD_PAYMENT,r.addPayment),a.takeEvery(t.UPDATE_DEFAULT_PAYMENT,r.updateDefaultPayment),a.takeEvery(t.DELETE_PAYMENT,r.deletePayment)]},O=function(){return{payment:new f.default.Selector((function(){return function(e){return null==e?void 0:e.paymentv2}})),getPaymentMethods:new f.default.Selector((function(e){return c.createSelector(e.payment,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.methods;return t||[]}))})),getDefaultPaymentMethod:new f.default.Selector((function(e){return c.createSelector(e.payment,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultMethod;return t}))})),getError:new f.default.Selector((function(e){return c.createSelector(e.payment,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error;return t}))})),paymentMethods:new f.default.Selector((function(e){return c.createSelector(e.getPayments,(function(e){return e}))})),getPaymentMethod:new f.default.Selector((function(e){return function(t,r){return e.paymentMethods(t).find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceId;return t===r}))}})),doesPaymentMethodExist:new f.default.Selector((function(e){return c.createSelector(e.getPaymentMethod,(function(e){return!!e}))})),getPaymentMethodError:new f.default.Selector((function(e){return function(t,r){return e.getError(t)}})),doesPaymentMethodErrorExist:new f.default.Selector((function(e){return c.createSelector(e.getPaymentMethodError,(function(e){return!!e}))}))}},C="paymentv2";t.ZP=function(e){return(0,e.createDuck)({store:C,initialState:R}).extend({creators:S,types:g,reducer:T,sagas:b,takes:A,selectors:O})}},51697:(e,t,r)=>{"use strict";var n=r(18172),o=r(34857),a=r(27484),i=r(56176),u=r(72831),s=r(88924),c=r(63687),l=r(87996),d=r(20573);function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=p(n),y=p(a),_=p(i),E=p(l),m=["PURCHASE_PLAN","PURCHASE_PLAN_SUCCESS","PURCHASE_PLAN_ERROR","PURCHASE_PLAN_GROUP","PURCHASE_PLAN_GROUP_SUCCESS","PURCHASE_PLAN_GROUP_ERROR","PURCHASE_SWITCH","PURCHASE_SWITCH_SUCCESS","PURCHASE_SWITCH_ERROR","CANCEL_PLAN","CANCEL_PLAN_SUCCESS","CANCEL_PLAN_ERROR","KEEP_PLAN","KEEP_PLAN_SUCCESS","KEEP_PLAN_ERROR","VERIFY_DISCOUNT_CODE","VERIFY_DISCOUNT_CODE_SUCCESS","VERIFY_DISCOUNT_CODE_ERROR","RESET","CHECK_SWITCH_PLAN_NOW","CHECK_SWITCH_PLAN_NOW_SUCCESS","CHECK_SWITCH_PLAN_NOW_ERROR","HANDLE_DIRECT_PLAN","GET_PLANS","GET_PLANS_SUCCESS","GET_PLANS_ERROR"],h=function(e){return{purchasePlan:function(t){return Object.assign({type:e.types.PURCHASE_PLAN},t)},purchaseSwitch:function(t){return Object.assign({type:e.types.PURCHASE_SWITCH},t)},purchasePlanGroup:function(t){return Object.assign({type:e.types.PURCHASE_PLAN_GROUP},t)},cancelPlan:function(t){return Object.assign({type:e.types.CANCEL_PLAN},t)},keepPlan:function(t){return Object.assign({type:e.types.KEEP_PLAN},t)},verifyDiscountCode:function(t){return Object.assign({type:e.types.VERIFY_DISCOUNT_CODE},t)},reset:function(t){return Object.assign({type:e.types.RESET},t)},checkCanSwitchPlanNow:function(t){return Object.assign({type:e.types.CHECK_SWITCH_PLAN_NOW},t)},directPlanLink:function(t){return Object.assign({type:e.types.HANDLE_DIRECT_PLAN},t)},getPlans:function(t){return Object.assign({type:e.types.GET_PLANS},t)}}},v={isFetching:!1,isVerifyingPayment:!1,isVerifyingPaymentSucess:null,isVerifyingPaymentError:null,isVerifyingPaymentErrorMessage:null,isReset:!0,discountCodeSuccess:!1,verifiedDiscountCode:null,verifiedDiscountCodeId:null,alternativePlans:{gift:{tiers:[]},discount:{tiers:[]},switching:{tiers:[]}},canSwitchPlanNow:!1,prorate_amount:null,next_price:null,end_date:null,oneTimeDonationSuccess:!1},g=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return f.default(e,(function(e){switch(n){case r.types.GET_PLANS_SUCCESS:o.switching&&(e.alternativePlans.switching=o),o.gift&&(e.alternativePlans.gift=o);break;case r.types.GET_PLANS_ERROR:e.alternativePlans=v.alternativePlans;break;case r.types.PURCHASE_PLAN:e.isVerifyingPayment=!0,e.isReset=!1,e.isVerifyingPaymentErrorMessage=v.isVerifyingPaymentErrorMessage;break;case r.types.PURCHASE_SWITCH_SUCCESS:case r.types.PURCHASE_PLAN_GROUP_SUCCESS:case r.types.PURCHASE_PLAN_SUCCESS:e.isVerifyingPayment=!1,e.isReset=!1,o.success&&(e.isVerifyingPaymentSucess=o.success,e.oneTimeDonationSuccess=o.oneTimeDonationSuccess);break;case r.types.PURCHASE_SWITCH_ERROR:case r.types.PURCHASE_PLAN_GROUP_ERROR:case r.types.PURCHASE_PLAN_ERROR:e.isVerifyingPayment=!1,e.isReset=!1,o.error&&(e.isVerifyingPaymentError=o.error,e.isVerifyingPaymentErrorMessage=a);break;case r.types.VERIFY_DISCOUNT_CODE:e.isFetching=!0,e.isReset=!1,e.discountCodeSuccess=!1;break;case r.types.VERIFY_DISCOUNT_CODE_SUCCESS:e.isFetching=!1,e.isReset=!1,e.discountCodeSuccess=!0,e.verifiedDiscountCode=o.verifiedDiscountCode,e.verifiedDiscountCodeId=o.verifiedDiscountCodeId,e.alternativePlans.discount=null==o?void 0:o.plan;break;case r.types.VERIFY_DISCOUNT_CODE_ERROR:e.isFetching=!1,e.isReset=!1,e.discountCodeSuccess=!1;break;case r.types.RESET:e.isFetching=r.initialState.isFetching,e.isVerifyingPayment=r.initialState.isVerifyingPayment,e.isVerifyingPaymentSucess=r.initialState.isVerifyingPaymentSucess,e.isVerifyingPaymentError=r.initialState.isVerifyingPaymentError,e.isReset=r.initialState.isReset,e.discountCodeSuccess=r.initialState.discountCodeSuccess,e.verifiedDiscountCode=r.initialState.verifiedDiscountCode,e.verifiedDiscountCodeId=r.initialState.verifiedDiscountCodeId,e.oneTimeDonationSuccess=r.initialState.oneTimeDonationSuccess;break;case r.types.CHECK_SWITCH_PLAN_NOW_SUCCESS:e.isFetching=!1,e.canSwitchPlanNow=o.canSwitchPlanNow,e.prorate_amount=o.prorate_amount,e.next_price=o.next_price,e.end_date=o.end_date,e.isReset=!1;break;case r.types.HANDLE_DIRECT_PLAN:e.directPlanOptionId=o.planOptionId}}))};y.default.extend(_.default),y.default.extend(_.default);var S=function(e){return{cancelPlan:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=void 0===r?null:r,a=e.loaderInvalidationEvent,i=void 0===a?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:a;try{if(!n)throw Error("publisherId not provided");var l=(yield o.putResolve({type:u.REQUEST,config:{method:"delete",baseURL:c.PICO_API_URL(),url:"".concat(c.PURCHASE_PRODUCT()),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,data:{discount_code_id:null,publisherId:n}}})).data;if(!l)throw Error("no data returned");if(!l.success)throw Error("create plan did not succeed");yield o.put(yield o.call(i,{payload:{scope:["user"]}}));var d=y.default(l.purchases.current.subscription_end).format("LL"),p=yield o.call(s.goToMenuRouteAndOpen,{menuRoute:"/notification/cancelPlan",backRoute:"/",data:{nextDate:d}});yield o.put(p),yield o.put({type:t.CANCEL_PLAN_SUCCESS})}catch(e){console.log(e),yield o.put({type:t.CANCEL_PLAN_ERROR,error:e.message})}}(Object.assign({},t,e))},keepPlan:function*(t){yield function*(e){var t=e.types,r=e.productOptionId,n=void 0===r?null:r,a=e.publisherId,i=void 0===a?null:a,l=e.subscriptionId,d=void 0===l?null:l,p=e.loaderInvalidationEvent,f=void 0===p?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:p;try{if(!n)throw Error("no from id provided");if(!i)throw Error("publisherId not provided");if(!d)throw Error("subscriptionId not provided");var _=(yield o.putResolve({type:u.REQUEST,config:{method:"put",baseURL:c.PICO_API_URL(),url:"".concat(c.PURCHASE_PRODUCT(),"/").concat(n),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:i},timeout:3e4}})).data;if(!_)throw Error("no data returned");if(!_.success)throw Error("create plan did not succeed");yield o.put(yield o.call(f,{payload:{scope:["user"]}}));var E=y.default(_.purchases.current.subscription_end).format("LL"),m=yield o.call(s.goToMenuRouteAndOpen,{menuRoute:"/notification/keepPlan",backRoute:"/",data:{nextDate:E}});yield o.put(m),yield o.put({type:t.KEEP_PLAN_SUCCESS,payload:{success:n}})}catch(e){console.log(e),yield o.put({type:t.KEEP_PLAN_ERROR,error:e.message,payload:{error:n}})}}(Object.assign({},t,e))},purchasePlan:function*(t){yield function*(e){var t=e.types,r=e.utm,n=e.formId,a=void 0===n?null:n,i=e.articleId,s=void 0===i?null:i,l=e.productOptionId,d=void 0===l?null:l,p=e.publisherId,f=void 0===p?null:p,y=e.customPrice,_=void 0===y?null:y,E=e.newsletters,m=void 0===E?null:E,h=e.customFields,v=void 0===h?null:h,g=e.oneTimeDonation,S=void 0!==g&&g,R=e.origin;e.source;var T=e.loaderInvalidationEvent,b=void 0===T?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:T,A=yield o.select();try{var O;if(!a)throw Error("no form id provided");if(!d)throw Error("no product option id provided");if(!f)throw Error("publisherId not provided");var C=(null==A||null===(O=A.utm)||void 0===O?void 0:O.data)||{},P=C.utm_campaign,I=C.utm_medium,U=C.utm_source,N=C.utm_term,w=C.utm_content,L=r||Object.assign({},P&&{campaign:P},I&&{medium:I},U&&{source:U},N&&{term:N},w&&{content:w}),D=(yield o.putResolve({type:u.REQUEST,config:{method:"post",baseURL:c.PICO_API_URL(),url:"".concat(c.PURCHASE_PRODUCT(),"/").concat(d),params:Object.assign({},!!L&&{utm:L}),headers:Object.assign({Accept:"application/json","Content-Type":"application/json",publisherid:f},!!R&&{"current-url":R}),timeout:3e4,data:Object.assign({article_id:s,form_id:a},_&&{custom_price:parseFloat(_)},m&&{newsletter_ids:m},v&&{custom_properties:v})}})).data;if(!D)throw Error("no data returned");if(!D.success)throw Error("create plan did not succeed");yield o.put(yield o.call(b,{payload:{scope:["user"]}})),yield o.put({type:t.PURCHASE_PLAN_SUCCESS,payload:{success:d,oneTimeDonationSuccess:S,source:U}})}catch(e){var k,G=null!==(k=e.errors)&&void 0!==k&&k[0].custom_price?"Maximum purchase limit exceeded. Your product price must be less than or equal to $999,999.99.":"There was an issue trying to complete your purchase. Please try again or contact support if this persists.";yield o.put({type:t.PURCHASE_PLAN_ERROR,error:G,payload:{error:d}})}}(Object.assign({},t,e))},purchasePlanGroup:function*(t){yield function*(e){var t=e.types,r=e.groupId,n=void 0===r?null:r,a=e.publisherId,i=void 0===a?null:a,s=e.loaderInvalidationEvent,l=void 0===s?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:s;try{if(!n)throw Error("groupId not provided");if(!i)throw Error("publisherId not provided");var d=(yield o.putResolve({type:u.REQUEST,config:{method:"post",baseURL:c.PICO_API_URL(),url:c.PURCHASE_PLAN_GROUP(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:i},timeout:3e4,data:{group_id:n,publisherId:i}}})).data;if(!d)throw Error("no data returned");if(!d.group||"PAID"!==d.group.billing_status)throw Error("create group plan did not succeed");yield o.put(yield o.call(l,{payload:{scope:["user"]}})),yield o.put({type:t.PURCHASE_PLAN_GROUP_SUCCESS,payload:{success:n}})}catch(e){console.log(e),yield o.put({type:t.PURCHASE_PLAN_GROUP_ERROR,error:e.message,payload:{error:n}})}}(Object.assign({},t,e))},purchaseSwitch:function*(t){yield function*(e){var t=e.types,r=e.formId,n=void 0===r?null:r,a=e.productOptionId,i=void 0===a?null:a,s=e.publisherId,l=void 0===s?null:s,d=e.customPrice,p=void 0===d?null:d,f=e.pay_now,y=void 0===f?null:f,_=e.loaderInvalidationEvent,E=void 0===_?function(){return{type:"LOADER_INVALIDATION_EVENT"}}:_;try{if(!i)throw Error("productOptionId not provided");if(!l)throw Error("publisherId not provided");var m=(yield o.putResolve({type:u.REQUEST,config:{method:"post",baseURL:c.PICO_API_URL(),url:"".concat(c.PURCHASE_SWITCH(),"/").concat(i),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:l},timeout:3e4,data:Object.assign({form_id:n,discount_code_id:null,publisherId:l},p&&{custom_price:p},null!==y&&{pay_now:y})}})).data;if(!m)throw Error("no data returned");if(!m.success)throw Error("create plan did not succeed");yield o.put(yield o.call(E,{payload:{scope:["user"]}})),yield o.put({type:t.PURCHASE_SWITCH_SUCCESS,payload:{success:i}})}catch(e){console.log(e),yield o.put({type:t.PURCHASE_SWITCH_ERROR,error:e.message,payload:{error:i}})}}(Object.assign({},t,e))},verifyDiscountCode:function*(t){yield function*(e){var t=e.types,r=e.code,n=e.publisherId;try{var a;if(!r)throw Error("discount code must be provided");var i=(yield o.putResolve({type:u.REQUEST,config:{method:"get",baseURL:c.PICO_API_URL(),url:"".concat(c.PLANS_DISCOUNT(),"/").concat(r),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4,params:{publisherId:n}}})).data;if(!i.is_valid)throw Error("Invalid discount code");if(null==i||null===(a=i.plan)||void 0===a||!a.tiers)throw Error("Unable to read new tiers");yield o.put({type:t.VERIFY_DISCOUNT_CODE_SUCCESS,payload:{verifiedDiscountCodeId:i.discount_code_id,verifiedDiscountCode:r,plan:i.plan}})}catch(e){console.log(e),yield o.put({type:t.VERIFY_DISCOUNT_CODE_ERROR,error:e.message})}}(Object.assign({},t,e))},checkCanSwitchPlanNow:function*(t){yield function*(e){var t=e.types,r=e.productOptionId,n=void 0===r?null:r,a=e.publisherId,i=void 0===a?null:a;try{if(!n)throw Error("productOptionId not provided");if(!i)throw Error("publisherId not provided");var s=(yield o.putResolve({type:u.REQUEST,config:{method:"get",baseURL:c.PICO_API_URL(),url:"".concat(c.PURCHASE_SWITCH(),"/").concat(n),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:i},timeout:3e4,params:{product_option_id:n}}})).data;if(!s)throw Error("Check switch plan now did not succeed. No data returned");yield o.put({type:t.CHECK_SWITCH_PLAN_NOW_SUCCESS,payload:{canSwitchPlanNow:s.pay_now,prorate_amount:s.prorate_amount,next_price:s.next_price,end_date:s.end_date}})}catch(e){console.log(e),yield o.put({type:t.CHECK_SWITCH_PLAN_NOW_ERROR,error:e.message,payload:{error:n}})}}(Object.assign({},t,e))},getPlans:function*(t){yield function*(e){var t=e.types,r=e.publisherId,n=void 0===r?null:r,a=e.gift,i=e.switching;try{if(!n)throw Error("publisherId not provided");var s=(yield o.putResolve({type:u.REQUEST,config:{method:"get",baseURL:c.PICO_API_URL(),url:c.USERS_PLAN(),headers:{Accept:"application/json","Content-Type":"application/json",publisherid:n},timeout:3e4}})).data;if(!s)throw Error("no data returned");var l=Object.assign({},s,{gift:a,switching:i});yield o.put({type:t.GET_PLANS_SUCCESS,payload:l})}catch(e){yield o.put({type:t.GET_PLANS_ERROR,error:e.message})}}(Object.assign({},t,e))}}},R=function(e){var t=e.types,r=e.sagas;return[o.takeEvery(t.VERIFY_DISCOUNT_CODE,r.verifyDiscountCode),o.takeEvery(t.PURCHASE_PLAN,r.purchasePlan),o.takeEvery(t.PURCHASE_PLAN_GROUP,r.purchasePlanGroup),o.takeEvery(t.PURCHASE_SWITCH,r.purchaseSwitch),o.takeEvery(t.CANCEL_PLAN,r.cancelPlan),o.takeEvery(t.KEEP_PLAN,r.keepPlan),o.takeEvery(t.CHECK_SWITCH_PLAN_NOW,r.checkCanSwitchPlanNow),o.takeEvery(t.GET_PLANS,r.getPlans)]},T=function(){return{plan:new E.default.Selector((function(){return function(e){return null==e?void 0:e.plan}})),isVerifyingPayment:new E.default.Selector((function(e){return d.createSelector(e.plan,(function(e){return e.isVerifyingPayment}))})),isVerifyingPaymentSucess:new E.default.Selector((function(e){return d.createSelector(e.plan,(function(e){return e.isVerifyingPaymentSucess}))})),isVerifyingPaymentError:new E.default.Selector((function(e){return d.createSelector(e.plan,(function(e){return e.isVerifyingPaymentError}))})),isVerifyingPaymentErrorMessage:new E.default.Selector((function(e){return d.createSelector(e.plan,(function(e){return e.isVerifyingPaymentErrorMessage}))})),isOneTimeDonationSuccess:new E.default.Selector((function(e){return d.createSelector(e.plan,(function(e){return e.oneTimeDonationSuccess}))})),switchNow:new E.default.Selector((function(e){return d.createSelector(e.plan,(function(e){var t=e.canSwitchPlanNow,r=e.prorate_amount,n=e.next_price,o=e.end_date;return t&&{canSwitchPlanNow:t,prorate_amount:r,next_price:n,end_date:o}}))}))}},b="plan";t.ZP=function(e){var t=e.store,r=void 0===t?b:t,n=e.createDuck,o=e.initialState,a=void 0===o?v:o,i=e.creators,u=void 0===i?h:i,s=e.types,c=void 0===s?m:s,l=e.reducer,d=void 0===l?g:l,p=e.sagas,f=void 0===p?S:p,y=e.takes,_=void 0===y?R:y,E=e.selectors,A=void 0===E?T:E;return n({store:r,initialState:a}).extend({creators:u,types:c,reducer:d,sagas:f,takes:_,selectors:A})}},71398:(e,t,r)=>{"use strict";var n=r(27144),o=r(18172),a=r(34857),i=r(63687),u=r(72831),s=r(87996),c=r(20573);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(o),f=l(s);function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=d.default({baseActionCreatorName:"getPurchaseHistory",baseActionTypeName:"GET_PURCHASE_HISTORY"}),m=d.default({baseActionCreatorName:"getSwitchProducts",baseActionTypeName:"GET_SWITCH_PRODUCTS"}),h=d.default({baseActionCreatorName:"createSwitchProduct",baseActionTypeName:"CREATE_SWITCH_PRODUCT"}),v=d.default({baseActionCreatorName:"getSwitchProration",baseActionTypeName:"GET_SWITCH_PRORATION"}),g=d.default({baseActionCreatorName:"getGift",baseActionTypeName:"GET_GIFT"}),S=d.default({baseActionCreatorName:"createGift",baseActionTypeName:"CREATE_GIFT"}),R=d.default({baseActionCreatorName:"updateGift",baseActionTypeName:"UPDATE_GIFT"}),T=d.default({baseActionCreatorName:"deleteGift",baseActionTypeName:"DELETE_GIFT"}),b=d.default({baseActionCreatorName:"purchaseProduct",baseActionTypeName:"PURCHASE_PRODUCT"}),A=d.default({baseActionCreatorName:"reactivateProduct",baseActionTypeName:"REACTIVATE_PRODUCT"}),O=d.default({baseActionCreatorName:"cancelProduct",baseActionTypeName:"CANCEL_PRODUCT"}),C=[].concat(y(E.types),y(m.types),y(h.types),y(v.types),y(g.types),y(S.types),y(R.types),y(T.types),y(b.types),y(A.types),y(O.types)),P=function(e){return Object.assign({},E.creators(e),m.creators(e),h.creators(e),v.creators(e),g.creators(e),S.creators(e),R.creators(e),T.creators(e),b.creators(e),A.creators(e),O.creators(e))},I={purchases:{data:null,error:null},product:{data:null,error:null},switchProducts:{data:[],loading:!1,error:null,switchProductId:null},switchProration:{data:null,error:null},gift:{data:null,error:null}},U=function(e,t,r){var n=t.type,o=t.payload,a=t.error;return p.default(e,(function(e){switch(n){case r.types.GET_PURCHASE_HISTORY:e.purchases=I.purchases;break;case r.types.GET_PURCHASE_HISTORY_SUCCESS:e.purchases.data=o;break;case r.types.GET_PURCHASE_HISTORY_ERROR:e.purchases.error=a;break;case r.types.GET_SWITCH_PRODUCTS:e.switchProducts.error=null,e.switchProducts.loading=!0;break;case r.types.GET_SWITCH_PRODUCTS_SUCCESS:e.switchProducts.data=null==o?void 0:o.data,e.switchProducts.loading=!1,e.switchProducts.switchProductId=null==o?void 0:o.productId;break;case r.types.CREATE_SWITCH_PRODUCT_ERROR:case r.types.GET_SWITCH_PRODUCTS_ERROR:e.switchProducts.error=a,e.switchProducts.switchProductId=null,e.switchProducts.loading=!1;break;case r.types.CREATE_SWITCH_PRODUCT:e.switchProducts.error=I.switchProducts.error;break;case r.types.CREATE_SWITCH_PRODUCT_SUCCESS:e.switchProducts.data=[].concat(y(e.switchProducts.data),[o]);break;case r.types.GET_SWITCH_PRORATION:e.switch_proration=I.switch_proration;break;case r.types.GET_SWITCH_PRORATION_SUCCESS:e.switch_proration.data=o;break;case r.types.GET_SWITCH_PRORATION_ERROR:e.switch_proration.error=a;break;case r.types.GET_GIFT:case r.types.UPDATE_GIFT:case r.types.CREATE_GIFT:case r.types.DELETE_GIFT_SUCCESS:e.gift=I.gift;break;case r.types.GET_GIFT_SUCCESS:case r.types.UPDATE_GIFT_SUCCESS:case r.types.CREATE_GIFT_SUCCESS:e.gift.data=o;break;case r.types.DELETE_GIFT_ERROR:case r.types.UPDATE_GIFT_ERROR:case r.types.CREATE_GIFT_ERROR:case r.types.GET_GIFT_ERROR:e.gift.error=a;break;case r.types.CANCEL_PRODUCT:case r.types.REACTIVATE_PRODUCT:case r.types.PURCHASE_PRODUCT:e.product=I.product;break;case r.types.PURCHASE_PRODUCT_SUCCESS:case r.types.REACTIVATE_PRODUCT_SUCCESS:case r.types.CANCEL_PRODUCT_SUCCESS:e.product.data=o;break;case r.types.REACTIVATE_PRODUCT_ERROR:case r.types.CANCEL_PRODUCT_ERROR:case r.types.PURCHASE_PRODUCT_ERROR:e.product.error=a}}))};var N=function(e){return{getGift:function*(t){yield function*(e){var t=e.types;try{var r=(yield a.call(u.picoAPIHelper,{url:i.PURCHASE_GIFT(),method:"get"})).data;if(!r)throw new Error("unable to fetch gifts");yield a.put({type:t.GET_GIFT_SUCCESS,payload:r})}catch(e){yield a.put({type:t.GET_GIFT_ERROR,error:(null==e?void 0:e.message)||"GET_GIFT_ERROR"})}}(Object.assign({},t,e))},createGift:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:i.PURCHASE_GIFT(),method:"post",data:r})).data;if(!n)throw new Error("unable to create gift");yield a.put({type:t.CREATE_GIFT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.CREATE_GIFT_ERROR,error:(null==e?void 0:e.message)||"CREATE_GIFT_ERROR"})}}(Object.assign({},t,e))},deleteGift:function*(t){yield function*(e){var t=e.types,r=e.payload;try{if(200!==(yield a.call(u.picoAPIHelper,{url:"".concat(i.ME_PAYMENT(),"/").concat(r),method:"delete"})).status)throw new Error("unable to delete gift, ".concat(r));yield a.put({type:t.DELETE_GIFT_SUCCESS,payload:r})}catch(e){yield a.put({type:t.DELETE_GIFT_ERROR,error:(null==e?void 0:e.message)||"DELETE_GIFT_ERROR"})}}(Object.assign({},t,e))},updateGift:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_GIFT(),"/").concat(r.id),method:"put",data:r})).data;if(!n)throw new Error("unable to update gift");yield a.put({type:t.UPDATE_GIFT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.UPDATE_GIFT_ERROR,error:(null==e?void 0:e.message)||"UPDATE_GIFT_ERROR"})}}(Object.assign({},t,e))}}};var w=function(e){return{purchaseProduct:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_PRODUCT(),"/").concat(r.id),method:"post",data:r})).data;if(!n)throw new Error("unable to purchase product");yield a.put({type:t.PURCHASE_PRODUCT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.PURCHASE_PRODUCT_ERROR,error:(null==e?void 0:e.message)||"PURCHASE_PRODUCT_ERROR"})}}(Object.assign({},t,e))},cancelProduct:function*(t){yield function*(e){var t=e.types;try{if(200!==(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_PRODUCT()),method:"delete"})).status)throw new Error("Unable to cancel product");yield a.put({type:t.CANCEL_PRODUCT_SUCCESS})}catch(e){yield a.put({type:t.CANCEL_PRODUCT_ERROR,error:(null==e?void 0:e.message)||"CANCEL_PRODUCT_ERROR"})}}(Object.assign({},t,e))},reactivateProduct:function*(t){yield function*(e){var t=e.types,r=e.payloadP;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_PRODUCT(),"/").concat(r),method:"put"})).data;if(!n)throw new Error("unable to reactivate product, ".concat(r));yield a.put({type:t.REACTIVATE_PRODUCT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.REACTIVATE_PRODUCT_ERROR,error:(null==e?void 0:e.message)||"REACTIVATE_PRODUCT_ERROR"})}}(Object.assign({},t,e))}}};var L=function(e){return{createSwitchProduct:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_SWITCH(),"/").concat(r.id),method:"post",data:r})).data;if(!n)throw new Error("unable to create switch product");yield a.put({type:t.CREATE_SWITCH_PRODUCT_SUCCESS,payload:n})}catch(e){yield a.put({type:t.CREATE_SWITCH_PRODUCT_ERROR,error:(null==e?void 0:e.message)||"CREATE_SWITCH_PRODUCT_ERROR"})}}(Object.assign({},t,e))},getSwitchProducts:function*(t){yield function*(e){var t=e.types,r=e.productId,n=e.publisherId;try{var o;if(!r)throw new Error("Invalid product id");var s=yield a.select(),c=null==s||null===(o=s.purchase)||void 0===o?void 0:o.switchProducts;if(c.switchProductId!==r){var l=(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_SWITCH(),"/?current_product_id=").concat(r),method:"get",headers:{publisherid:n}})).data;if(null==l||!l.switchable_products)throw new Error("unable to fetch switch products");yield a.put({type:t.GET_SWITCH_PRODUCTS_SUCCESS,payload:{data:l.switchable_products,productId:r}})}else{var d=null==c?void 0:c.data;yield a.put({type:t.GET_SWITCH_PRODUCTS_SUCCESS,payload:{data:d,productId:r}})}}catch(e){yield a.put({type:t.GET_SWITCH_PRODUCTS_ERROR,error:(null==e?void 0:e.message)||"GET_SWITCH_PRODUCTS_ERROR"})}}(Object.assign({},t,e))},getSwitchProration:function*(t){yield function*(e){var t=e.types,r=e.payload;try{var n=(yield a.call(u.picoAPIHelper,{url:"".concat(i.PURCHASE_SWITCH(),"/").concat(r),method:"get"})).data;if(!n)throw new Error("unable to get switch proration data");yield a.put({type:t.GET_SWITCH_PRORATION_SUCCESS,payload:n})}catch(e){yield a.put({type:t.GET_SWITCH_PRORATION_ERROR,error:(null==e?void 0:e.message)||"GET_SWITCH_PRORATION_ERROR"})}}(Object.assign({},t,e))}}};var D=function(e){return Object.assign({},N(e),L(e),w(e),{getPurchaseHistory:function*(t){yield function*(e){var t=e.types;try{var r=(yield a.call(u.picoAPIHelper,{url:i.PURCHASE_HISTORY(),method:"get"})).data;if(!r)throw new Error("unable to fetch purchase history");yield a.put({type:t.GET_PURCHASE_HISTORY_SUCCESS,payload:r})}catch(e){yield a.put({type:t.GET_PURCHASE_HISTORY_ERROR,error:(null==e?void 0:e.message)||"GET_PURCHASE_HISTORY_ERROR"})}}(Object.assign({},t,e))}})},k=function(e){var t=e.types,r=e.sagas;return[a.takeEvery(t.GET_PURCHASE_HISTORY,r.getPurchaseHistory),a.takeEvery(t.GET_SWITCH_PRODUCTS,r.getSwitchProducts),a.takeEvery(t.CREATE_SWITCH_PRODUCT,r.createSwitchProduct),a.takeEvery(t.GET_SWITCH_PRORATION,r.getSwitchProration),a.takeEvery(t.GET_GIFT,r.getGift),a.takeEvery(t.CREATE_GIFT,r.createGift),a.takeEvery(t.UPDATE_GIFT,r.updateGift),a.takeEvery(t.DELETE_GIFT,r.deleteGift),a.takeEvery(t.PURCHASE_PRODUCT,r.purchaseProduct),a.takeEvery(t.REACTIVATE_PRODUCT,r.reactivateProduct),a.takeEvery(t.CANCEL_PRODUCT,r.cancelProduct)]},G=function(){return{purchase:new f.default.Selector((function(){return function(e){return null==e?void 0:e.purchase}})),getPurchases:new f.default.Selector((function(e){return c.createSelector(e.purchase,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.purchases;return t}))})),getProduct:new f.default.Selector((function(e){return c.createSelector(e.purchase,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.product;return t}))})),getSwitchProducts:new f.default.Selector((function(e){return c.createSelector(e.purchase,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.switchProducts;return t}))})),getSwitchableProducts:new f.default.Selector((function(e){return c.createSelector(e.getSwitchProducts,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.data;return t}))})),getSwitchProductsLoading:new f.default.Selector((function(e){return c.createSelector(e.getSwitchProducts,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loading;return t}))})),getSwitchProration:new f.default.Selector((function(e){return c.createSelector(e.purchase,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.switchProration;return t}))})),getGift:new f.default.Selector((function(e){return c.createSelector(e.purchase,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gift;return t}))})),userHasCurrentPurchases:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;return!!Object.keys((null==t?void 0:t.current)||{}).length}))})),nextSubscriptionStart:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return null==n||null===(e=n.history)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.subscription_start}))})),nextSubscriptionEnd:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return null==n||null===(e=n.history)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.subscription_end}))})),nextStatusNext:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return"NEXT"===(null==n||null===(e=n.history)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.status)}))})),nextProductOptionPrice:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return null==n||null===(e=n.history)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.product_option_price}))})),nextProductOptionInterval:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return null==n||null===(e=n.history)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.product_option_interval}))})),firstDonation:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.history)||void 0===e?void 0:e.first_donation}))})),currentBillingIntervalTotalPaid:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.history)||void 0===e?void 0:e.current_billing_interval_total_paid}))})),originalEnrollmentDate:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.history)||void 0===e?void 0:e.originalEnrollmentDate}))})),next:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return Object.keys((null==r||null===(e=r.history)||void 0===e?void 0:e.next)||{}).length?history.next:null}))})),currentSubscriptionPrice:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_price}))})),currentSubscriptionCurrency:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_currency}))})),currentSubscriptionType:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_type}))})),currentSubscriptionTypeIsPass:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"pass"===(null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_type)}))})),currentSubscriptionTypeIsRecurringDonation:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"recurring-donation"===(null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_type)}))})),currentSubscriptionTypeIsSubscription:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"subscription"===(null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_type)}))})),currentSubscriptionIsTrial:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return!(null==r||null===(e=r.current)||void 0===e||!e.subscription_trial_end)}))})),currentSubscriptionStart:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_start}))})),currentProductOptionId:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.product_option_id}))})),currentProductId:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.product_id}))})),currentProductOptionCurrency:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.product_option_currency}))})),currentSubscriptionId:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_id}))})),currentSubscriptionIdIsGift:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"GIFT"===(null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_id)}))})),currentSubscriptionEnd:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.subscription_end}))})),currentSubscriptionPlanTierTitle:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return null==r||null===(e=r.current)||void 0===e?void 0:e.plan_tier_title}))})),currentPurchaseCanceled:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"CANCELED"===(null==r||null===(e=r.current)||void 0===e?void 0:e.status)}))})),currentPurchaseActive:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"ACTIVE"===(null==r||null===(e=r.current)||void 0===e?void 0:e.status)}))})),currentPurchaseFailed:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return"FAILED"===(null==r||null===(e=r.current)||void 0===e?void 0:e.status)}))})),isGroupAdmin:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return!(null==n||null===(e=n.current)||void 0===e||null===(t=e.group)||void 0===t||!t.admin)}))})),isGroupMember:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return!(null==n||null===(e=n.current)||void 0===e||null===(t=e.group)||void 0===t||!t.member)}))})),groupName:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return null==n||null===(e=n.current)||void 0===e||null===(t=e.group)||void 0===t?void 0:t.name}))})),groupSize:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.data;return null==n||null===(e=n.current)||void 0===e||null===(t=e.group)||void 0===t?void 0:t.size}))})),userHasGroupData:new f.default.Selector((function(e){return c.createSelector(e.getPurchases,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;return!!Object.keys((null==r||null===(e=r.current)||void 0===e?void 0:e.group)||{}).length}))}))}},M="purchase";t.ZP=function(e){return(0,e.createDuck)({store:M,initialState:I}).extend({creators:P,types:C,reducer:U,sagas:D,takes:k,selectors:G})}},72831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(46489),o=r(44815),a=r(9669),i=r(34857),u=r(44556);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=s(n),l=s(a),d="network/REQUEST",p="network/REQUEST/start",f="network/REQUEST/success",y="network/REQUEST/error",_="network/SET_SCOPE",E="network/GET_TOKEN",m="network/GET_TOKEN/start",h="network/GET_TOKEN/success",v="network/GET_TOKEN/error",g="network/REFRESH_TOKEN",S="network/REFRESH_TOKEN/start",R="network/REFRESH_TOKEN/success",T="network/REFRESH_TOKEN/error",b="network/STORE_TOKENS",A="network/STORE_TOKENS/start",O="network/STORE_TOKENS/success",C="network/STORE_TOKENS/error",P="network/REMOVE_TOKENS",I="network/REMOVE_TOKENS/start",U="network/REMOVE_TOKENS/success",N="network/REMOVE_TOKENS/error";function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k={access_token:{},refresh_token:{},scope:"user"};function G(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(this,e);var r=t.retryDelay,n=void 0===r?1e3:r,o=t.concurrentRequests,a=void 0===o?1:o,i=t.transport,u=t.preRequestHook,s=t.postRequestHook;this.retryDelay=n,this.concurrentRequests=a,this.requests={},this.transport=i||l.default,this.preRequestHook=u||async((function(e){return e})),this.postRequestHook=s||async((function(e){return e.response}))}var t,r,n;return t=e,(r=[{key:"send",value:function(e){var t=e.config,r=e.onStart,n=void 0===r?function(){}:r,a=e.onSuccess,i=void 0===a?function(){}:a,u=e.onError,s=void 0===u?function(){}:u;try{var c=this,l=t.id||o.v4();return t.id=l,G(c.preRequestHook(t),(function(e){return G(n({id:l,config:t=e}),(function(){var e=!1,r=!0;return function(e,t,r){for(var n;;){var o=e();if(x(o)&&(o=o.v),!o)return a;if(o.then){n=0;break}var a=r();if(a&&a.then){if(!x(a)){n=1;break}a=a.s}if(t){var i=t();if(i&&i.then&&!x(i)){n=2;break}}}var u=new F,s=H.bind(null,u,2);return(0===n?o.then(l):1===n?a.then(c):i.then(d)).then(void 0,s),u;function c(n){a=n;do{if(t&&(i=t())&&i.then&&!x(i))return void i.then(d).then(void 0,s);if(!(o=e())||x(o)&&!o.v)return void H(u,1,a);if(o.then)return void o.then(l).then(void 0,s);x(a=r())&&(a=a.v)}while(!a||!a.then);a.then(c).then(void 0,s)}function l(e){e?(a=r())&&a.then?a.then(c).then(void 0,s):c(a):H(u,1,a)}function d(){(o=e())?o.then?o.then(l).then(void 0,s):l(o):H(u,1,a)}}((function(){return!e&&!!r}),void 0,(function(){var n,o,a,u=Object.keys(c.requests).length<c.concurrentRequests;return n=function(){if(u)return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){if(!t)throw Error("config must be provided");return c.requests[l]=t,G(c.transport(t),(function(n){var o,a;if(!n||!n.data)throw{message:"no data in response",response:n};if(null!==(o=n)&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.error)throw n.data;return r=!1,G(c.postRequestHook({config:t,response:n}),(function(r){return n=r,delete c.requests[l],G(i({id:l,response:n,config:t}),(function(){return e=!0,n}))}))}))}),(function(e){return r=!1,delete c.requests[l],G(s({id:l,error:e,config:t}),(function(){throw e}))}))},o=function(t){return e?t:function(e,t){if(!t)return e&&e.then?e.then(j):Promise.resolve()}(c.wait(c.retryDelay))},(a=n())&&a.then?a.then(o):o(a)}))}))}))}catch(e){return Promise.reject(e)}}},{key:"wait",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}])&&L(t.prototype,r),n&&L(t,n),e}();function j(){}function H(e,t,r){if(!e.s){if(r instanceof F){if(!r.s)return void(r.o=H.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(H.bind(null,e,t),H.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var F=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var a=1&o?t:r;if(a){try{H(n,1,a(this.v))}catch(e){H(n,2,e)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?H(n,1,t?t(o):o):r?H(n,1,r(o)):H(n,2,o)}catch(e){H(n,2,e)}},n},e}();function x(e){return e instanceof F&&1&e.s}var B,W=(B=function(e){var t,r,n,o=e.dispatch,a=e.tokens,i=e.tokenKey;try{o(Object.assign({type:A},a,{tokenKey:i})),o({type:O})}catch(e){o({type:C,error:e})}return n?r?r(t):t:(t&&t.then||(t=Promise.resolve(t)),r?t.then(r):t)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(B.apply(this,e))}catch(e){return Promise.reject(e)}});var K=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t=e.dispatch;e.tokens;var r,n,o,a=e.tokenKey;try{t({type:I,tokenKey:a}),t({type:U})}catch(e){t({type:N,error:e})}return o?n?n(r):r:(r&&r.then||(r=Promise.resolve(r)),n?r.then(n):r)}));function V(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Y=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t=e.refreshTokenAdapters,r=e.state,n=e.dispatch,o=e.request,a=e.tokenKey,i=t.request({access_token:r._network.access_token[a],refresh_token:r._network.refresh_token[a],decode:function(e){return c.default(e)},scope:r._network.scope,state:r});return V(o.send({config:i,onStart:function(e){n(Object.assign({type:S},e))},onSuccess:function(e){n(Object.assign({type:R},e))},onError:function(e){n(Object.assign({type:T},e))}}),(function(e){var o=t.response({data:e.data,state:r});return V(W({dispatch:n,tokens:o,tokenKey:a}),(function(){return o}))}))}));var z=Object.freeze({__proto__:null,receiver:function(e){var t=e.data,r=e.channelId,n=e.subscribe,o=e.onSubscribeChange,a=e.onInit,i=void 0===a?function(){}:a,s=e.custom,c=void 0===s?{}:s;if(!r)throw new Error("unable to determine channel id");var l=new u.BroadcastChannel(r,{webWorkerSupport:!1}),d=n((function(){o({unsubscribe:c.unsubscribe||d,data:t,NetworkCommunication:l})}));i({data:t})},sender:function(e){var t=e.config,r=e.channelId,n=e.custom,o=void 0===n?{}:n,a={broadcastChannelOptions:{webWorkerSupport:!1},onMessageParser:function(e){var t=e.id,r=e.message;return t===r.id&&r.payload.response},postMessageConstructor:function(e){var t=e.config,r=e.target,n=e.origin,o={type:d,id:t.id,config:t};return r&&(o.target=r),n&&(o.origin=n),o}},i=o.broadcastChannelOptions||a.broadcastChannelOptions,s=o.onMessageParser||a.onMessageParser,c=o.postMessageConstructor||a.postMessageConstructor;return new Promise((function(e,n){try{if(!r)throw new Error("unable to obtain channel id");var a=new u.BroadcastChannel(r,i);a.onmessage=function(r){var n=s({id:t.id,message:r});n&&e(n)};var l=c({config:t,target:o.target,origin:o.origin});a.postMessage(l)}catch(e){n(e)}}))}});function q(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var $=null;function J(){}var Q=function(e){var t=e.accessTokenAdapters,r=e.refreshTokenAdapters,n=e.tokenKey,o=void 0===n?"default":n,a=e.concurrentRequests,i=e.transport,u=e.preRequestHook,s=void 0===u?function(e){return q(e)}:u,l=e.postRequestHook,_=void 0===l?function(e){return q(e.response)}:l;return function(e){var n=e.dispatch,u=e.getState;return function(e){return function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(l){var A=!1,O=u();return Z((function(){if(l&&l.type)return function(e,t){if(!t)return e&&e.then?e.then(J):Promise.resolve()}(e(l));A=!0}),(function(e){return A?e:(null===$&&($=new M({transport:i,concurrentRequests:a,preRequestHook:s,postRequestHook:_})),l.type===P&&K({dispatch:n,tokenKey:o}),Z((function(){var e;if(l.type===b)return Z((function(){if(l.data)return q(t.response({data:l.data,state:O}),(function(t){e=t}));e={access_token:l.access_token,refresh_token:l.refresh_token,scope:O._network.scope}}),(function(){}