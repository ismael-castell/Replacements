var SCM=SCM||{};!function(e){var n;e.bbq={},e.bbq.getState=n=function(e){var t=window.location.hash;if(!((n=t.indexOf(e))<0)){var n=n+e.length+1,e=t.indexOf("&",n);return e<0?decodeURI(t.substring(n)):decodeURI(t.substring(n,e))}},e.bbq.removeState=function(e){var t=n(e);t&&location.replace(window.location.hash.replace(e+"="+encodeURI(t),""))},e.deparam={},e.deparam.querystring=function(){for(var e=window.location.search.substring(1).split("&"),t={},n=0;n<e.length;n++){var r=e[n].split("=");2===r.length&&(t[r[0]]=decodeURI(r[1]))}return t}}(jQuery),function(l){var i="unobtrusiveAjaxClick",a="unobtrusiveAjaxClickTarget";function c(e,t){for(var n=window,r=(e||"").split(".");n&&r.length;)n=n[r.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))}function u(e){return"GET"===e||"POST"===e}function r(s,e){var r,i,a,o,t=s.getAttribute("data-ajax-confirm");t&&!window.confirm(t)||(r=l(s.getAttribute("data-ajax-loading")),a=parseInt(s.getAttribute("data-ajax-loading-duration"),10)||0,l.extend(e,{type:s.getAttribute("data-ajax-method")||void 0,url:s.getAttribute("data-ajax-url")||void 0,cache:"true"===(s.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(e){var t,n;return t=e,u(n=i)||t.setRequestHeader("X-HTTP-Method-Override",n),!1!==(n=c(s.getAttribute("data-ajax-begin"),["xhr"]).apply(s,arguments))&&r.show(a),n},complete:function(){r.hide(a),c(s.getAttribute("data-ajax-complete"),["xhr","status"]).apply(s,arguments)},success:function(e,t,n){var r,i,a;r=s,i=e,-1===(n.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(a=(r.getAttribute("data-ajax-mode")||"").toUpperCase(),l(r.getAttribute("data-ajax-update")).each(function(e,t){switch(a){case"BEFORE":l(t).prepend(i);break;case"AFTER":l(t).append(i);break;case"REPLACE-WITH":l(t).replaceWith(i);break;default:l(t).html(i)}})),c(s.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(s,arguments)},error:function(){c(s.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(s,arguments)}}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),u(i=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:i})),(t=l(s)).is("form")&&"multipart/form-data"==t.attr("enctype")&&(o=new FormData,l.each(e.data,function(e,t){o.append(t.name,t.value)}),l("input[type=file]",t).each(function(){var n=this;l.each(n.files,function(e,t){o.append(n.name,t)})}),l.extend(e,{processData:!1,contentType:!1,data:o})),l.ajax(e))}l(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),r(this,{url:this.href,type:"GET",data:[]})}),l(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,n=l(e.target),r=l(n.parents("form")[0]),n=n.offset();r.data(i,[{name:t+".x",value:Math.round(e.pageX-n.left)},{name:t+".y",value:Math.round(e.pageY-n.top)}]),setTimeout(function(){r.removeData(i)},0)}),l(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.currentTarget.name,n=l(e.target),r=l(n.parents("form")[0]);r.data(i,t?[{name:t,value:e.currentTarget.value}]:[]),r.data(a,n),setTimeout(function(){r.removeData(i),r.removeData(a)},0)}),l(document).on("submit","form[data-ajax=true]",function(e){var t=l(this).data(i)||[],n=l(this).data(a),n=n&&(n.hasClass("cancel")||void 0!==n.attr("formnovalidate"));e.preventDefault(),!n&&((n=l(n=this).data("unobtrusiveValidation"))&&n.validate&&!n.validate())||r(this,{url:this.action,type:this.method||"GET",data:t.concat(l(this).serializeArray())})})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(u){var n;u.extend(u.fn,{validate:function(e){if(this.length){var r=u.data(this[0],"validator");return r?r:(this.attr("novalidate","novalidate"),r=new u.validator(e,this[0]),u.data(this[0],"validator",r),r.settings.onsubmit&&(this.on("click.validate",":submit",function(e){r.submitButton=e.currentTarget,u(this).hasClass("cancel")&&(r.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(r.cancelSubmit=!0)}),this.on("submit.validate",function(n){function e(){var e,t;return r.submitButton&&(r.settings.submitHandler||r.formSubmitted)&&(e=u("<input type='hidden'/>").attr("name",r.submitButton.name).val(u(r.submitButton).val()).appendTo(r.currentForm)),!(r.settings.submitHandler&&!r.settings.debug)||(t=r.settings.submitHandler.call(r,r.currentForm,n),e&&e.remove(),void 0!==t&&t)}return r.settings.debug&&n.preventDefault(),r.cancelSubmit?(r.cancelSubmit=!1,e()):r.form()?r.pendingRequest?!(r.formSubmitted=!0):e():(r.focusInvalid(),!1)})),r)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,n;return u(this[0]).is("form")?e=this.validate().form():(n=[],e=!0,t=u(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(n=n.concat(t.errorList))}),t.errorList=n),e},rules:function(e,t){var n,r,i,a,s,o=this[0],l=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=o&&(!o.form&&l&&(o.form=this.closest("form")[0],o.name=this.attr("name")),null!=o.form)){if(e)switch(r=(n=u.data(o.form,"validator").settings).rules,i=u.validator.staticRules(o),e){case"add":u.extend(i,u.validator.normalizeRule(t)),delete i.messages,r[o.name]=i,t.messages&&(n.messages[o.name]=u.extend(n.messages[o.name],t.messages));break;case"remove":return t?(s={},u.each(t.split(/\s/),function(e,t){s[t]=i[t],delete i[t]}),s):(delete r[o.name],i)}return(e=u.validator.normalizeRules(u.extend({},u.validator.classRules(o),u.validator.attributeRules(o),u.validator.dataRules(o),u.validator.staticRules(o)),o)).required&&(a=e.required,delete e.required,e=u.extend({required:a},e)),e.remote&&(a=e.remote,delete e.remote,e=u.extend(e,{remote:a})),e}}}),u.extend(u.expr.pseudos||u.expr[":"],{blank:function(e){return!u.trim(""+u(e).val())},filled:function(e){e=u(e).val();return null!==e&&!!u.trim(""+e)},unchecked:function(e){return!u(e).prop("checked")}}),u.validator=function(e,t){this.settings=u.extend(!0,{},u.validator.defaults,e),this.currentForm=t,this.init()},u.validator.format=function(n,e){return 1===arguments.length?function(){var e=u.makeArray(arguments);return e.unshift(n),u.validator.format.apply(this,e)}:(void 0===e||((e=2<arguments.length&&e.constructor!==Array?u.makeArray(arguments).slice(1):e).constructor!==Array&&(e=[e]),u.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),n)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==u.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):u(e)).addClass(t).removeClass(n)},unhighlight:function(e,t,n){("radio"===e.type?this.findByName(e.name):u(e)).removeClass(t).addClass(n)}},setDefaults:function(e){u.extend(u.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}."),step:u.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.currentForm,r=this.groups={};function e(e){var t,n,r=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");!this.form&&r&&(this.form=u(this).closest("form")[0],this.name=u(this).attr("name")),i===this.form&&(t=u.data(this.form,"validator"),n="on"+e.type.replace(/^validate/,""),(r=t.settings)[n]&&!u(this).is(r.ignore)&&r[n].call(t,this,e))}u.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),u.each(e,function(e,t){r[t]=n})}),n=this.settings.rules,u.each(n,function(e,t){n[e]=u.validator.normalizeRule(t)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,n,r=this.clean(e),i=this.validationTargetFor(r),a=this,s=!0;return void 0===i?delete this.invalid[r.name]:(this.prepareElement(i),this.currentElements=u(i),(n=this.groups[i.name])&&u.each(this.groups,function(e,t){t===n&&e!==i.name&&(r=a.validationTargetFor(a.clean(a.findByName(e))))&&r.name in a.invalid&&(a.currentElements.push(r),s=a.check(r)&&s)}),t=!1!==this.check(i),s=s&&t,this.invalid[i.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),u(e).attr("aria-invalid",!t)),s},showErrors:function(t){var n;t&&(u.extend((n=this).errorMap,t),this.errorList=u.map(this.errorMap,function(e,t){return{message:e,element:n.findByName(t)[0]}}),this.successList=u.grep(this.successList,function(e){return!(e.name in t)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===u.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var n=this,r={};return u(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||u(this).attr("name"),t=void 0!==u(this).attr("contenteditable")&&"false"!==u(this).attr("contenteditable");return!e&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),t&&(this.form=u(this).closest("form")[0],this.name=e),this.form===n.currentForm&&(!(e in r||!n.objectLength(u(this).rules()))&&(r[e]=!0))})},clean:function(e){return u(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([])},reset:function(){this.resetInternals(),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=u(e),n=e.type,r=void 0!==t.attr("contenteditable")&&"false"!==t.attr("contenteditable");return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":t.val():(t=r?t.text():t.val(),"file"===n?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(n=t.lastIndexOf("/"))||0<=(n=t.lastIndexOf("\\"))?t.substr(n+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n,r,i,a=u(t).rules(),s=u.map(a,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(n in"function"==typeof a.normalizer?i=a.normalizer:"function"==typeof this.settings.normalizer&&(i=this.settings.normalizer),i&&(l=i.call(t,l),delete a.normalizer),a){r={method:n,parameters:a[n]};try{if("dependency-mismatch"===(e=u.validator.methods[n].call(this,l,t,r.parameters))&&1===s){o=!0;continue}if(o=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,r),!1}catch(e){throw this.settings.debug&&window.console&&console.error("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method."),e}}if(!o)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(e,t){return u(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||u(e).data("msg")},customMessage:function(e,t){e=this.settings.messages[e];return e&&(e.constructor===String?e:e[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var n=this.findDefined(this.customMessage(e.name,(t="string"==typeof t?{method:t}:t).method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,u.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,t.parameters,e):r.test(n)&&(n=u.validator.format(n.replace(r,"{$1}"),t.parameters)),n},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return e=this.settings.wrapper?e.add(e.parent(this.settings.wrapper)):e},defaultShowErrors:function(){for(var e,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,e=this.validElements();e[n];n++)this.settings.unhighlight.call(this,e[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n,r,i,a=this.errorsFor(e),s=this.idOrName(e),o=u(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(t)):(n=a=u("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,u(e)):n.insertAfter(e),a.is("label")?a.attr("for",s):0===a.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(s=a.attr("id"),o?o.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(o+=" "+s):o=s,u(e).attr("aria-describedby",o),(r=this.groups[e.name])&&u.each((i=this).groups,function(e,t){t===r&&u("[name='"+i.escapeCssMeta(e)+"']",i.currentForm).attr("aria-describedby",a.attr("id"))}))),!t&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),e=u(e).attr("aria-describedby"),t="label[for='"+t+"'], label[for='"+t+"'] *";return e&&(t=t+", #"+this.escapeCssMeta(e).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),u(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return u(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return u("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!u(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!u.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,u(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],u(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.submitButton&&u("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",u.data(e,"previousValue")||u.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:u.extend(this.classRuleSettings,e)},classRules:function(e){var t={},e=u(e).attr("class");return e&&u.each(e.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(t,u.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,n,r){/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=void 0)),r||0===r?e[n]=r:t===n&&"range"!==t&&(e[n]=!0)},attributeRules:function(e){var t,n,r={},i=u(e),a=e.getAttribute("type");for(t in u.validator.methods)n="required"===t?!!(n=""===(n=e.getAttribute(t))?!0:n):i.attr(t),this.normalizeAttributeRule(r,a,t,n);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var t,n,r={},i=u(e),a=e.getAttribute("type");for(t in u.validator.methods)""===(n=i.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()))&&(n=!0),this.normalizeAttributeRule(r,a,t,n);return r},staticRules:function(e){var t={},n=u.data(e.form,"validator");return t=n.settings.rules?u.validator.normalizeRule(n.settings.rules[e.name])||{}:t},normalizeRules:function(r,i){return u.each(r,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!u(t.depends,i.form).length;break;case"function":n=t.depends.call(i,i)}n?r[e]=void 0===t.param||t.param:(u.data(i.form,"validator").resetElements(u(i)),delete r[e])}}else delete r[e]}),u.each(r,function(e,t){r[e]=u.isFunction(t)&&"normalizer"!==e?t(i):t}),u.each(["minlength","maxlength"],function(){r[this]&&(r[this]=Number(r[this]))}),u.each(["rangelength","range"],function(){var e;r[this]&&(u.isArray(r[this])?r[this]=[Number(r[this][0]),Number(r[this][1])]:"string"==typeof r[this]&&(e=r[this].replace(/[\[\]]/g,"").split(/[\s,]+/),r[this]=[Number(e[0]),Number(e[1])]))}),u.validator.autoCreateRanges&&(null!=r.min&&null!=r.max&&(r.range=[r.min,r.max],delete r.min,delete r.max),null!=r.minlength&&null!=r.maxlength&&(r.rangelength=[r.minlength,r.maxlength],delete r.minlength,delete r.maxlength)),r},normalizeRule:function(e){var t;return"string"==typeof e&&(t={},u.each(e.split(/\s/),function(){t[this]=!0}),e=t),e},addMethod:function(e,t,n){u.validator.methods[e]=t,u.validator.messages[e]=void 0!==n?n:u.validator.messages[e],t.length<3&&u.validator.addClassRules(e,u.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):null!=e&&0<e.length;t=u(t).val();return t&&0<t.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(n=!1,function(e,t){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,n){e=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=e},maxlength:function(e,t,n){e=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e<=n},rangelength:function(e,t,n){e=u.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||e>=n[0]&&e<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},step:function(e,t,n){function r(e){return(e=(""+e).match(/(?:\.(\d+))?$/))&&e[1]?e[1].length:0}function i(e){return Math.round(e*Math.pow(10,a))}var a,s=u(t).attr("type"),o="Step attribute on input type "+s+" is not supported.",l=new RegExp("\\b"+s+"\\b"),c=!0;if(s&&!l.test(["text","number","range"].join()))throw new Error(o);return a=r(n),(r(e)>a||i(e)%i(n)!=0)&&(c=!1),this.optional(t)||c},equalTo:function(e,t,n){n=u(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){u(t).valid()}),e===n.val()},remote:function(r,i,e,a){if(this.optional(i))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var s,t,o=this.previousValue(i,a);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=o.originalMessage||this.settings.messages[i.name][a],this.settings.messages[i.name][a]=o.message,t=u.param(u.extend({data:r},(e="string"==typeof e?{url:e}:e).data)),o.old===t?o.valid:(o.old=t,(s=this).startRequest(i),(t={})[i.name]=r,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:t,context:s.currentForm,success:function(e){var t,n=!0===e||"true"===e;s.settings.messages[i.name][a]=o.originalMessage,n?(t=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(i),s.formSubmitted=t,s.successList.push(i),s.invalid[i.name]=!1,s.showErrors()):(t={},e=e||s.defaultMessage(i,{method:a,parameters:r}),t[i.name]=o.message=e,s.invalid[i.name]=!0,s.showErrors(t)),o.valid=n,s.stopRequest(i,n)}},e)),"pending")}}});var r,i={};return u.ajaxPrefilter?u.ajaxPrefilter(function(e,t,n){var r=e.port;"abort"===e.mode&&(i[r]&&i[r].abort(),i[r]=n)}):(r=u.ajax,u.ajax=function(e){var t=("mode"in e?e:u.ajaxSettings).mode,n=("port"in e?e:u.ajaxSettings).port;return"abort"===t?(i[n]&&i[n].abort(),i[n]=r.apply(this,arguments),i[n]):r.apply(this,arguments)}),u}),function(e){"function"==typeof define&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery-validation")):jQuery.validator.unobtrusive=e(jQuery)}(function(l){var e,s=l.validator,o="unobtrusiveValidation";function c(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function u(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function n(e){return e.substr(0,e.lastIndexOf(".")+1)}function d(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}function f(e){var t=l(this),n="__jquery_unobtrusive_validation_form_reset";if(!t.data(n)){t.data(n,!0);try{t.data("validator").resetForm()}finally{t.removeData(n)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function p(n){function e(e,t){(e=a[e])&&l.isFunction(e)&&e.apply(n,t)}var t=l(n),r=t.data(o),i=l.proxy(f,n),a=s.unobtrusive.options||{};return r||(r={options:{errorClass:a.errorClass||"input-validation-error",errorElement:a.errorElement||"span",errorPlacement:function(){!function(e,t){var n=l(this).find("[data-valmsg-for='"+u(t[0].name)+"']"),t=(t=n.attr("data-valmsg-replace"))?!1!==l.parseJSON(t):null;n.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",n),t?(n.empty(),e.removeClass("input-validation-error").appendTo(n)):e.hide()}.apply(n,arguments),e("errorPlacement",arguments)},invalidHandler:function(){!function(e,t){var n=l(this).find("[data-valmsg-summary=true]"),r=n.find("ul");r&&r.length&&t.errorList.length&&(r.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(r)}))}.apply(n,arguments),e("invalidHandler",arguments)},messages:{},rules:{},success:function(){!function(e){var t,n=e.data("unobtrusiveContainer");n&&(t=(t=n.attr("data-valmsg-replace"))?l.parseJSON(t):null,n.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),t&&n.empty())}.apply(n,arguments),e("success",arguments)}},attachValidation:function(){t.off("reset."+o,i).on("reset."+o,i).validate(this.options)},validate:function(){return t.validate(),t.valid()}},t.data(o,r)),r}return s.unobtrusive={adapters:[],parseElement:function(r,e){var t,i,a,s=l(r),o=s.parents("form")[0];o&&((t=p(o)).options.rules[r.name]=i={},t.options.messages[r.name]=a={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=s.attr(e),n={};void 0!==t&&(e+="-",l.each(this.params,function(){n[this]=s.attr(e+this)}),this.adapt({element:r,form:o,message:t,params:n,rules:i,messages:a}))}),l.extend(i,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e),e=t.parents().addBack().filter("form").add(t.find("form")).has("[data-val=true]");t.find("[data-val=true]").each(function(){s.unobtrusive.parseElement(this,!0)}),e.each(function(){var e=p(this);e&&e.attachValidation()})}},(e=s.unobtrusive.adapters).add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},e.addBool=function(t,n){return this.add(t,function(e){c(e,n||t,!0)})},e.addMinMax=function(e,r,i,a,t,n){return this.add(e,[t||"min",n||"max"],function(e){var t=e.params.min,n=e.params.max;t&&n?c(e,a,[t,n]):t?c(e,r,t):n&&c(e,i,n)})},e.addSingleVal=function(t,n,r){return this.add(t,[n||"val"],function(e){c(e,r||t,e.params[n])})},s.addMethod("__dummy__",function(e,t,n){return!0}),s.addMethod("regex",function(e,t,n){return!!this.optional(t)||(n=new RegExp(n).exec(e))&&0===n.index&&n[0].length===e.length}),s.addMethod("nonalphamin",function(e,t,n){var r;return r=n?(r=e.match(/\W/g))&&r.length>=n:r}),s.methods.extension?(e.addSingleVal("accept","mimtype"),e.addSingleVal("extension","extension")):e.addSingleVal("extension","extension","accept"),e.addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],function(e){var t=n(e.element.name),t=d(e.params.other,t);c(e,"equalTo",l(e.form).find(":input").filter("[name='"+u(t)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||c(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(r){var i={url:r.params.url,type:r.params.type||"GET",data:{}},a=n(r.element.name);l.each((r.params.additionalfields||r.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var n=d(t,a);i.data[n]=function(){var e=l(r.form).find(":input").filter("[name='"+u(n)+"']");return e.is(":checkbox")?e.filter(":checked").val()||e.filter(":hidden").val()||"":e.is(":radio")?e.filter(":checked").val()||"":e.val()}}),c(r,"remote",i)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&c(e,"minlength",e.params.min),e.params.nonalphamin&&c(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&c(e,"regex",e.params.regex)}),e.add("fileextensions",["extensions"],function(e){c(e,"extension",e.params.extensions)}),l(function(){s.unobtrusive.parse(document)}),s.unobtrusive}),function(d){function i(e,t,n){var r=[];return(e.reduction||e).filter(d.validity.settings.elementSupport).each(function(){t(this)?r.push(this):a(this,s(n,{field:o(this)}))}),e.reduction=d(r),e}function n(){d.validity.isValidating()&&(d.validity.report.errors++,d.validity.report.valid=!1)}function a(e,t){n(),d.validity.out.raise(d(e),t)}function f(e,t){n(),d.validity.out.raiseAggregate(e,t)}function r(e){var t=0;return e.each(function(){var e=parseFloat(this.value);t+=isNaN(e)?0:e}),t}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(RegExp("#\\{"+n+"\\}","g"),t[n]));return l(e)}function o(e){var t=(e=d(e)).prop("id"),n=d.validity.settings.defaultFieldName;if(e.prop("title").length)n=e.prop("title");else if(/^([A-Z0-9][a-z]*)+$/.test(t))n=t.replace(/([A-Z0-9])[a-z]*/g," $&");else if(/^[a-z0-9]+(_[a-z0-9]+)*$/.test(t)){for(e=t.split("_"),t=0;t<e.length;++t)e[t]=l(e[t]);n=e.join(" ")}return d.trim(n)}function l(e){return e.substring?e.substring(0,1).toUpperCase()+e.substring(1,e.length):e}var t;d.validity={settings:d.extend({outputMode:"tooltip",scrollTo:!1,modalErrorsClickable:!0,defaultFieldName:"This field",elementSupport:":text, :password, textarea, select, :radio, :checkbox, input[type='hidden'], input[type='tel'], input[type='email']",argToString:function(e){return e.getDate?[e.getMonth()+1,e.getDate(),e.getFullYear()].join("/"):e+""},debugPrivates:!1},{}),patterns:{integer:/^\d+$/,date:/^((0?\d)|(1[012]))[\/-]([012]?\d|30|31)[\/-]\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?((\d{1,3}(,\d{3})*)|\d+)(\.(\d{2})?)?$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,zip:/^\d{5}(-\d{4})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/,time12:/^((0?\d)|(1[012])):[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/},messages:{require:"#{field} is required.",match:"#{field} is in an invalid format.",integer:"#{field} must be a positive, whole number.",date:"#{field} must be formatted as a date. (mm/dd/yyyy)",email:"#{field} must be formatted as an email.",usd:"#{field} must be formatted as a US Dollar amount.",url:"#{field} must be formatted as a URL.",number:"#{field} must be formatted as a number.",zip:"#{field} must be formatted as a zipcode ##### or #####-####.",phone:"#{field} must be formatted as a phone number ###-###-####.",guid:"#{field} must be formatted as a guid like {3F2504E0-4F89-11D3-9A0C-0305E82C3301}.",time24:"#{field} must be formatted as a 24 hour time: 23:00.",time12:"#{field} must be formatted as a 12 hour time: 12:00 AM/PM",lessThan:"#{field} must be less than #{max}.",lessThanOrEqualTo:"#{field} must be less than or equal to #{max}.",greaterThan:"#{field} must be greater than #{min}.",greaterThanOrEqualTo:"#{field} must be greater than or equal to #{min}.",range:"#{field} must be between #{min} and #{max}.",tooLong:"#{field} cannot be longer than #{max} characters.",tooShort:"#{field} cannot be shorter than #{min} characters.",nonHtml:"#{field} cannot contain HTML characters.",alphabet:"#{field} contains disallowed characters.",minCharClass:"#{field} cannot have more than #{min} #{charClass} characters.",maxCharClass:"#{field} cannot have less than #{min} #{charClass} characters.",equal:"Values don't match.",distinct:"A value was repeated.",sum:"Values don't add to #{sum}.",sumMax:"The sum of the values must be less than #{max}.",sumMin:"The sum of the values must be greater than #{min}.",radioChecked:"The selected value is not valid.",generic:"Invalid."},out:{start:function(){this.defer("start")},end:function(e){this.defer("end",e)},raise:function(e,t){this.defer("raise",e,t)},raiseAggregate:function(e,t){this.defer("raiseAggregate",e,t)},defer:function(e){var t=d.validity;(t=t.outputs[t.settings.outputMode])[e].apply(t,Array.prototype.slice.call(arguments,1))}},charClasses:{alphabetical:/\w/g,numeric:/\d/g,alphanumeric:/[A-Za-z0-9]/g,symbol:/[^A-Za-z0-9]/g},outputs:{},__private:void 0,setup:function(e){this.settings=d.extend(this.settings,e),this.__private=this.settings.debugPrivates?t:void 0},report:null,isValidating:function(){return!!this.report},start:function(){this.out.start(),this.report={errors:0,valid:!0}},end:function(){var e=this.report||{errors:0,valid:!0};return this.report=null,this.out.end(e),e},clear:function(){this.start(),this.end()}},d.fn.extend({validity:function(n){return this.each(function(){var e,t=this;"form"==this.tagName.toLowerCase()&&(e=null,"string"==typeof n?e=function(){d(n).require()}:d.isFunction(n)&&(e=n),n&&d(this).bind("submit",function(){return d.validity.start(),e.apply(t),d.validity.end().valid}))})},require:function(e){return i(this,function(e){return d(e).val()&&(null!=d(e).val()&&d(e).val().length)},e||d.validity.messages.require)},match:function(t,e){return e||(e=d.validity.messages.match,"string"==typeof t&&d.validity.messages[t]&&(e=d.validity.messages[t])),"string"==typeof t&&(t=d.validity.patterns[t]),i(this,d.isFunction(t)?function(e){return!e.value.length||t(e.value)}:function(e){return t.global&&(t.lastIndex=0),!e.value.length||t.test(e.value)},e)},range:function(t,n,e){return i(this,t.getTime&&n.getTime?function(e){return(e=new Date(e.value))>=new Date(t)&&e<=new Date(n)}:t.substring&&n.substring&&Big?function(e){return(e=new Big(e.value)).greaterThanOrEqualTo(new Big(t))&&e.lessThanOrEqualTo(new Big(n))}:function(e){return e=parseFloat(e.value),t<=e&&e<=n},e||s(d.validity.messages.range,{min:d.validity.settings.argToString(t),max:d.validity.settings.argToString(n)}))},greaterThan:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)>t}:t.substring&&Big?function(e){return new Big(e.value).greaterThan(new Big(t))}:function(e){return parseFloat(e.value)>t},e||s(d.validity.messages.greaterThan,{min:d.validity.settings.argToString(t)}))},greaterThanOrEqualTo:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)>=t}:t.substring&&Big?function(e){return new Big(e.value).greaterThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)>=t},e||s(d.validity.messages.greaterThanOrEqualTo,{min:d.validity.settings.argToString(t)}))},lessThan:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)<t}:t.substring&&Big?function(e){return new Big(e.value).lessThan(new Big(t))}:function(e){return parseFloat(e.value)<t},e||s(d.validity.messages.lessThan,{max:d.validity.settings.argToString(t)}))},lessThanOrEqualTo:function(t,e){return i(this,t.getTime?function(e){return new Date(e.value)<=t}:t.substring&&Big?function(e){return new Big(e.value).lessThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)<=t},e||s(d.validity.messages.lessThanOrEqualTo,{max:d.validity.settings.argToString(t)}))},maxLength:function(t,e){return i(this,function(e){return e.value.length<=t},e||s(d.validity.messages.tooLong,{max:t}))},minLength:function(t,e){return i(this,function(e){return e.value.length>=t},e||s(d.validity.messages.tooShort,{min:t}))},alphabet:function(n,e){var r=[];return i(this,function(e){for(var t=0;t<e.value.length;++t)if(-1==n.indexOf(e.value.charAt(t)))return r.push(e.value.charAt(t)),0;return 1},e||s(d.validity.messages.alphabet,{chars:r.join(", ")}))},minCharClass:function(t,n,e){return"string"==typeof t&&(t=t.toLowerCase(),d.validity.charClasses[t]&&(t=d.validity.charClasses[t])),i(this,function(e){return(e.value.match(t)||[]).length>=n},e||s(d.validity.messages.minCharClass,{min:n,charClass:t}))},maxCharClass:function(t,n,e){return"string"==typeof t&&(t=t.toLowerCase(),d.validity.charClasses[t]&&(t=d.validity.charClasses[t])),i(this,function(e){return(e.value.match(t)||[]).length<=n},e||s(d.validity.messages.maxCharClass,{max:n,charClass:t}))},nonHtml:function(e){return i(this,function(e){return d.validity.patterns.nonHtml.test(e.value)},e||d.validity.messages.nonHtml)},equal:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport),r=function(e){return e},i=d.validity.messages.equal;if(n.length){d.isFunction(e)?(r=e,"string"==typeof t&&(i=t)):"string"==typeof e&&(i=e);var a,s=d.map(n,function(e){return r(e.value)}),o=s[0],l=!0;for(a in s)s[a]!=o&&(l=!1);l||(f(n,i),this.reduction=d([]))}return this},distinct:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport),r=function(e){return e},i=d.validity.messages.distinct,a=[],s=[],o=!0;if(n.length){d.isFunction(e)?(r=e,"string"==typeof t&&(i=t)):"string"==typeof e&&(i=e);for(var l=d.map(n,function(e){return r(e.value)}),c=0;c<l.length;++c)if(l[c].length){for(var u=0;u<a.length;++u)a[u]==l[c]&&(o=!1,s.push(l[c]));a.push(l[c])}if(!o){for(a=0,o=(s=d.unique(s)).length;a<o;++a)f(n.filter("[value='"+s[a]+"']"),i);this.reduction=d([])}}return this},sum:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);return n.length&&e!=r(n)&&(f(n,t||s(d.validity.messages.sum,{sum:e})),this.reduction=d([])),this},sumMax:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);return n.length&&e<r(n)&&(f(n,t||s(d.validity.messages.sumMax,{max:e})),this.reduction=d([])),this},sumMin:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);return n.length&&e>r(n)&&(f(n,t||s(d.validity.messages.sumMin,{min:e})),this.reduction=d([])),this},radioChecked:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);n.is(":radio")&&n.find(":checked").val()!=e&&f(n,t||d.validity.messages.radioChecked)},radioNotChecked:function(e,t){var n=(this.reduction||this).filter(d.validity.settings.elementSupport);n.is(":radio")&&n.filter(":checked").val()==e&&f(n,t||d.validity.messages.radioChecked)},checkboxChecked:function(e){return i(this,function(e){return!d(e).is(":checkbox")||d(e).is(":checked")},e||d.validity.messages.nonHtml)},assert:function(e,t){var n=this.reduction||this;if(n.length){if(d.isFunction(e))return i(this,e,t||d.validity.messages.generic);e||(f(n,t||d.validity.messages.generic),this.reduction=d([]))}return this},fail:function(e){return this.assert(!1,e)}}),t={validate:i,addToReport:n,raiseError:a,raiseAggregateError:f,numericSum:r,format:s,infer:o,capitalize:l}}(jQuery),function(i){i.validity.outputs.tooltip={tooltipClass:"validity-tooltip",start:function(){i("."+i.validity.outputs.tooltip.tooltipClass).remove()},end:function(e){!e.valid&&i.validity.settings.scrollTo&&i(document).scrollTop(i("."+i.validity.outputs.tooltip.tooltipClass).offset().top)},raise:function(e,t){var n=e.offset();n.left+=e.width()+18,n.top+=8;var r=i('<div class="validity-tooltip">'+t+'<div class="validity-tooltip-outer"><div class="validity-tooltip-inner"></div></div></div>').click(function(){e.focus(),i(this).fadeOut()}).css(n).hide().appendTo("body").fadeIn();i.validity.settings.fadeOutTooltipsOnFocus&&e.on("focus",function(){r.fadeOut()})},raiseAggregate:function(e,t){e.length&&this.raise(e.filter(":last"),t)}}}(jQuery),function(r){function i(e){return e.attr("id").length?e.attr("id"):e.attr("name")}r.validity.outputs.label={cssClass:"error",start:function(){r("."+r.validity.outputs.label.cssClass).remove()},end:function(e){!e.valid&&r.validity.settings.scrollTo&&(location.hash=r("."+r.validity.outputs.label.cssClass+":eq(0)").attr("for"))},raise:function(e,t){var n="."+r.validity.outputs.label.cssClass+"[for='"+i(e)+"']";r(n).length?r(n).text(t):r("<label/>").attr("for",i(e)).addClass(r.validity.outputs.label.cssClass).text(t).click(function(){e.length&&e[0].select()}).insertAfter(e)},raiseAggregate:function(e,t){e.length&&this.raise(r(e.get(e.length-1)),t)}}}(jQuery),function(r){r.validity.outputs.modal={start:function(){r(".validity-modal-msg").remove()},end:function(e){!e.valid&&r.validity.settings.scrollTo&&(location.hash=r(".validity-modal-msg:eq(0)").attr("id"))},raise:function(e,t){var n;e.length&&(n=e.offset(),e.get(0),n={left:parseInt(n.left+e.width()+4,10)+"px",top:parseInt(n.top-10,10)+"px"},r("<div/>").addClass("validity-modal-msg").css(n).text(t).click(r.validity.settings.modalErrorsClickable?function(){r(this).remove()}:null).appendTo("body"))},raiseAggregate:function(e,t){e.length&&this.raise(r(e.get(e.length-1)),t)}}}(jQuery),function(t){var n=[];t.validity.outputs.summary={start:function(){t(".validity-erroneous").removeClass("validity-erroneous"),n=[]},end:function(){if(t(".validity-summary-container").stop().hide().find("ul").html(""),n.length){for(var e=0;e<n.length;++e)t("<li/>").text(n[e]).appendTo(".validity-summary-container ul");t(".validity-summary-container").show(),t.validity.settings.scrollTo&&(location.hash=t(".validity-erroneous:eq(0)").attr("id"))}},raise:function(e,t){n.push(t),e.addClass("validity-erroneous")},raiseAggregate:function(e,t){this.raise(e,t)},container:function(){document.write('<div class="validity-summary-container">The form didn\'t submit for the following reason(s):<ul></ul></div>')}}}(jQuery),function(A){A.extend({tablesorter:new function(){function S(){var e=arguments[0],t=1<arguments.length?Array.prototype.slice.call(arguments):e;"undefined"!=typeof console&&void 0!==console.log?console[/error/i.test(e)?"error":/warn/i.test(e)?"warn":"log"](t):alert(t)}function C(e,t){S(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function m(e){for(var t in e)return;return 1}function x(e,t,n){if(!t)return"";var r=e.config,i=r.textExtraction||"",t="basic"===i?A(t).attr(r.textAttribute)||t.textContent||t.innerText||A(t).text()||"":"function"==typeof i?i(t,e,n):"function"==typeof(i=M.getColumnData(e,i,n))?i(t,e,n):t.textContent||t.innerText||A(t).text()||"";return A.trim(t)}function h(e){var t,n,r,i,a,s,o,l=e.config,c=l.$tbodies=l.$table.children("tbody:not(."+l.cssInfoBlock+")"),u=0,d="",f=c.length;if(0===f)return l.debug&&S("Warning: *Empty table!* Not building a parser cache");for(l.debug&&(o=new Date,S("Detecting parsers for each column")),t=[],n=[];u<f;){if((r=c[u].rows)[u])for(i=l.columns,a=0;a<i;a++){if(p=l.$headers.filter('[data-column="'+a+'"]:last'),h=M.getColumnData(e,l.headers,a),s=M.getParserById(M.getData(p,h,"extractor")),m=M.getParserById(M.getData(p,h,"sorter")),g="false"===M.getData(p,h,"parser"),l.empties[a]=(M.getData(p,h,"empty")||l.emptyTo||(l.emptyToBottom?"bottom":"top")).toLowerCase(),l.strings[a]=(M.getData(p,h,"string")||l.stringTo||"max").toLowerCase(),s=s||!1,!(m=g?M.getParserById("no-parser"):m))e:{for(var p=e,h=r,g=-1,m=a,v=void 0,y=M.parsers.length,b=!1,w="",v=!0;""===w&&v;)h[++g]?(w=x(p,b=h[g].cells[m],m),p.config.debug&&S("Checking if value was empty on row "+g+", column: "+m+': "'+w+'"')):v=!1;for(;0<=--y;)if((v=M.parsers[y])&&"text"!==v.id&&v.is&&v.is(w,p,b)){m=v;break e}m=M.getParserById("text")}l.debug&&(d+="column:"+a+"; extractor:"+s.id+"; parser:"+m.id+"; string:"+l.strings[a]+"; empty: "+l.empties[a]+"\n"),n[a]=m,t[a]=s}u+=n.length?f:1}l.debug&&(S(d||"No parsers detected"),C("Completed detecting parsers",o)),l.parsers=n,l.extractors=t}function g(e){var t,n,r,i,a,s,o,l,c,u,d,f=e.config,p=f.$table.children("tbody"),h=f.extractors,g=f.parsers;if(f.cache={},f.totalRows=0,!g)return f.debug&&S("Warning: *Empty table!* Not building a cache");for(f.debug&&(l=new Date),f.showProcessing&&M.isProcessing(e,!0),a=0;a<p.length;a++)if(d=[],t=f.cache[a]={normalized:[]},!p.eq(a).hasClass(f.cssInfoBlock)){for(c=p[a]&&p[a].rows.length||0,r=0;r<c;++r)if(u={child:[]},o=[],(s=A(p[a].rows[r])).hasClass(f.cssChildRow)&&0!==r)n=t.normalized.length-1,t.normalized[n][f.columns].$row=t.normalized[n][f.columns].$row.add(s),s.prev().hasClass(f.cssChildRow)||s.prev().addClass(M.css.cssHasChild),u.child[n]=A.trim(s[0].textContent||s[0].innerText||s.text()||"");else{for(u.$row=s,u.order=r,i=0;i<f.columns;++i)void 0===g[i]?f.debug&&S("No parser found for cell:",s[0].cells[i],"does it have a header?"):(n=x(e,s[0].cells[i],i),n=void 0===h[i].id?n:h[i].format(n,e,s[0].cells[i],i),n="no-parser"===g[i].id?"":g[i].format(n,e,s[0].cells[i],i),o.push(f.ignoreCase&&"string"==typeof n?n.toLowerCase():n),"numeric"===(g[i].type||"").toLowerCase()&&(d[i]=Math.max(Math.abs(n)||0,d[i]||0)));o[f.columns]=u,t.normalized.push(o)}t.colMax=d,f.totalRows+=t.normalized.length}f.showProcessing&&M.isProcessing(e),f.debug&&C("Building cache for "+c+" rows",l)}function v(e,t){var n,r,i,a,s,o,l=e.config,c=l.widgetOptions,u=e.tBodies,d=[],f=l.cache;if(m(f))return l.appender?l.appender(e,d):e.isUpdating&&l.$table.trigger("updateComplete",e);for(l.debug&&(o=new Date),s=0;s<u.length;s++)if((n=A(u[s])).length&&!n.hasClass(l.cssInfoBlock)){for(i=M.processTbody(e,n,!0),r=(n=f[s].normalized).length,a=0;a<r;a++)d.push(n[a][l.columns].$row),l.appender&&(!l.pager||l.pager.removeRows&&c.pager_removeRows||l.pager.ajax)||i.append(n[a][l.columns].$row);M.processTbody(e,i,!1)}l.appender&&l.appender(e,d),l.debug&&C("Rebuilt table",o),t||l.appender||M.applyWidget(e),e.isUpdating&&l.$table.trigger("updateComplete",e)}function l(e){return/^d/i.test(e)||1===e}function c(t){var n,r,i,a,s,e,o=t.config;o.headerList=[],o.headerContent=[],o.debug&&(e=new Date),o.columns=M.computeColumnIndex(o.$table.children("thead, tfoot").children("tr")),i=o.cssIcon?'<i class="'+(o.cssIcon===M.css.icon?M.css.icon:o.cssIcon+" "+M.css.icon)+'"></i>':"",o.$headers=A(t).find(o.selectorHeaders).each(function(e){n=A(this),s=M.getColumnData(t,o.headers,e,!0),o.headerContent[e]=A(this).html(),""!==o.headerTemplate&&(a=o.headerTemplate.replace(/\{content\}/g,A(this).html()).replace(/\{icon\}/g,i),o.onRenderTemplate&&(r=o.onRenderTemplate.apply(n,[e,a]))&&"string"==typeof r&&(a=r),A(this).html('<div class="'+M.css.headerIn+'">'+a+"</div>")),o.onRenderHeader&&o.onRenderHeader.apply(n,[e]),this.column=parseInt(A(this).attr("data-column"),10),this.order=l(M.getData(n,s,"sortInitialOrder")||o.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,void 0!==(s=M.getData(n,s,"lockedOrder")||!1)&&!1!==s&&(this.order=this.lockedOrder=l(s)?[1,1,1]:[0,0,0]),n.addClass(M.css.header+" "+o.cssHeader),o.headerList[e]=this,n.parent().addClass(M.css.headerRow+" "+o.cssHeaderRow).attr("role","row"),o.tabIndex&&n.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"}),b(t),o.debug&&(C("Built headers:",e),S(o.$headers))}function y(e,t,n){var r=e.config;r.$table.find(r.selectorRemove).remove(),h(e),g(e),j(r.$table,t,n)}function b(n){var r,i,a=n.config;a.$headers.each(function(e,t){r=A(t),i=M.getColumnData(n,a.headers,e,!0),i="false"===M.getData(t,i,"sorter")||"false"===M.getData(t,i,"parser"),t.sortDisabled=i,r[i?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+i),n.id&&(i?r.removeAttr("aria-controls"):r.attr("aria-controls",n.id))})}function w(e){var t,n,r=e.config,i=r.sortList,a=i.length,s=M.css.sortNone+" "+r.cssNone,o=[M.css.sortAsc+" "+r.cssAsc,M.css.sortDesc+" "+r.cssDesc],l=["ascending","descending"],c=A(e).find("tfoot tr").children().add(r.$extraHeaders).removeClass(o.join(" "));for(r.$headers.removeClass(o.join(" ")).addClass(s).attr("aria-sort","none"),t=0;t<a;t++)if(2!==i[t][1]&&(e=r.$headers.not(".sorter-false").filter('[data-column="'+i[t][0]+'"]'+(1===a?":last":""))).length){for(n=0;n<e.length;n++)e[n].sortDisabled||e.eq(n).removeClass(s).addClass(o[i[t][1]]).attr("aria-sort",l[i[t][1]]);c.length&&c.filter('[data-column="'+i[t][0]+'"]').removeClass(s).addClass(o[i[t][1]])}r.$headers.not(".sorter-false").each(function(){var e=A(this),t=this.order[(this.count+1)%(r.sortReset?3:2)],t=e.text()+": "+M.language[e.hasClass(M.css.sortAsc)?"sortAsc":e.hasClass(M.css.sortDesc)?"sortDesc":"sortNone"]+M.language[0===t?"nextAsc":1===t?"nextDesc":"nextNone"];e.attr("aria-label",t)})}function k(i){var a,e,s,t,o,l,c,u,d,f=i.config,p=f.textSorter||"",h=f.sortList,g=h.length,n=i.tBodies.length;if(!f.serverSideSorting&&!m(f.cache)){for(f.debug&&(t=new Date),e=0;e<n;e++)o=f.cache[e].colMax,f.cache[e].normalized.sort(function(e,t){for(a=0;a<g&&(s=h[a][0],l=h[a][1],d=0===l,!f.sortStable||e[s]!==t[s]||1!==g);a++)if(u=/n/i.test((n=f.parsers,r=s,n&&n[r]&&n[r].type||""))&&f.strings[s]?(c="boolean"==typeof f.string[f.strings[s]]?(d?1:-1)*(f.string[f.strings[s]]?-1:1):f.strings[s]&&f.string[f.strings[s]]||0,f.numberSorter?f.numberSorter(e[s],t[s],d,o[s],i):M["sortNumeric"+(d?"Asc":"Desc")](e[s],t[s],c,o[s],s,i)):(c=d?e:t,u=d?t:e,"function"==typeof p?p(c[s],u[s],d,s,i):"object"==typeof p&&p.hasOwnProperty(s)?p[s](c[s],u[s],d,s,i):M["sortNatural"+(d?"Asc":"Desc")](e[s],t[s],s,i,f)))return u;var n,r;return e[f.columns].order-t[f.columns].order});f.debug&&C("Sorting on "+h.toString()+" and dir "+l+" time",t)}}function i(e,t){var n=e[0];n.isUpdating&&e.trigger("updateComplete",n),A.isFunction(t)&&t(e[0])}function j(e,t,n){var r=e[0].config.sortList;!1!==t&&!e[0].isProcessing&&r.length?e.trigger("sorton",[r,function(){i(e,n)},!0]):(i(e,n),M.applyWidget(e[0],!1))}function u(d){var f=d.config,p=f.$table;p.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(f.namespace+" ")).bind("sortReset"+f.namespace,function(e,t){e.stopPropagation(),f.sortList=[],w(d),k(d),v(d),A.isFunction(t)&&t(d)}).bind("updateAll"+f.namespace,function(e,t,n){e.stopPropagation(),d.isUpdating=!0,M.refreshWidgets(d,!0,!0),M.restoreHeaders(d),c(d),M.bindEvents(d,f.$headers,!0),u(d),y(d,t,n)}).bind("update"+f.namespace+" updateRows"+f.namespace,function(e,t,n){e.stopPropagation(),d.isUpdating=!0,b(d),y(d,t,n)}).bind("updateCell"+f.namespace,function(e,t,n,r){var i,a,s;e.stopPropagation(),d.isUpdating=!0,p.find(f.selectorRemove).remove(),a=p.find("tbody"),s=A(t),e=a.index(A.fn.closest?s.closest("tbody"):s.parents("tbody").filter(":first")),i=A.fn.closest?s.closest("tr"):s.parents("tr").filter(":first"),t=s[0],a.length&&0<=e&&(a=a.eq(e).find("tr").index(i),s=s.index(),f.cache[e].normalized[a][f.columns].$row=i,i=void 0===f.extractors[s].id?x(d,t,s):f.extractors[s].format(x(d,t,s),d,t,s),t="no-parser"===f.parsers[s].id?"":f.parsers[s].format(i,d,t,s),f.cache[e].normalized[a][s]=f.ignoreCase&&"string"==typeof t?t.toLowerCase():t,"numeric"===(f.parsers[s].type||"").toLowerCase()&&(f.cache[e].colMax[s]=Math.max(Math.abs(t)||0,f.cache[e].colMax[s]||0)),j(p,n,r))}).bind("addRows"+f.namespace,function(e,t,n,r){if(e.stopPropagation(),d.isUpdating=!0,m(f.cache))b(d),y(d,n,r);else{var i,a,s,o,l,c=(t=A(t).attr("role","row")).filter("tr").length,u=p.find("tbody").index(t.parents("tbody").filter(":first"));for(f.parsers&&f.parsers.length||h(d),e=0;e<c;e++){for(a=t[e].cells.length,l=[],o={child:[],$row:t.eq(e),order:f.cache[u].normalized.length},i=0;i<a;i++)s=void 0===f.extractors[i].id?x(d,t[e].cells[i],i):f.extractors[i].format(x(d,t[e].cells[i],i),d,t[e].cells[i],i),s="no-parser"===f.parsers[i].id?"":f.parsers[i].format(s,d,t[e].cells[i],i),l[i]=f.ignoreCase&&"string"==typeof s?s.toLowerCase():s,"numeric"===(f.parsers[i].type||"").toLowerCase()&&(f.cache[u].colMax[i]=Math.max(Math.abs(l[i])||0,f.cache[u].colMax[i]||0));l.push(o),f.cache[u].normalized.push(l)}j(p,n,r)}}).bind("updateComplete"+f.namespace,function(){d.isUpdating=!1}).bind("sorton"+f.namespace,function(e,t,n,r){var i,a,s,o,l,c,u=d.config;e.stopPropagation(),p.trigger("sortStart",this),e=t,c=d.config,e=t||c.sortList,c.sortList=[],A.each(e,function(e,t){if(o=parseInt(t[0],10),s=c.$headers.filter('[data-column="'+o+'"]:last')[0]){switch(a=(a=(""+t[1]).match(/^(1|d|s|o|n)/))?a[0]:""){case"1":case"d":a=1;break;case"s":a=l||0;break;case"o":i=s.order[(l||0)%(c.sortReset?3:2)],a=0===i?1:1===i?0:2;break;case"n":s.count+=1,a=s.order[s.count%(c.sortReset?3:2)];break;default:a=0}l=0===e?a:l,i=[o,parseInt(a,10)||0],c.sortList.push(i),a=A.inArray(i[1],s.order),s.count=0<=a?a:i[1]%(c.sortReset?3:2)}}),w(d),u.delayInit&&m(u.cache)&&g(d),p.trigger("sortBegin",this),k(d),v(d,r),p.trigger("sortEnd",this),M.applyWidget(d),A.isFunction(n)&&n(d)}).bind("appendCache"+f.namespace,function(e,t,n){e.stopPropagation(),v(d,n),A.isFunction(t)&&t(d)}).bind("updateCache"+f.namespace,function(e,t){f.parsers&&f.parsers.length||h(d),g(d),A.isFunction(t)&&t(d)}).bind("applyWidgetId"+f.namespace,function(e,t){e.stopPropagation(),M.getWidgetById(t).format(d,f,f.widgetOptions)}).bind("applyWidgets"+f.namespace,function(e,t){e.stopPropagation(),M.applyWidget(d,t)}).bind("refreshWidgets"+f.namespace,function(e,t,n){e.stopPropagation(),M.refreshWidgets(d,t,n)}).bind("destroy"+f.namespace,function(e,t,n){e.stopPropagation(),M.destroy(d,t,n)}).bind("resetToLoadState"+f.namespace,function(){M.refreshWidgets(d,!0,!0),f=A.extend(!0,M.defaults,f.originalSettings),d.hasInitialized=!1,M.setup(d,f)})}var M=this;M.version="2.17.8",M.parsers=[],M.widgets=[],M.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},M.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},M.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},M.log=S,M.benchmark=C,M.construct=function(t){return this.each(function(){var e=A.extend(!0,{},M.defaults,t);e.originalSettings=t,!this.hasInitialized&&M.buildTable&&"TABLE"!==this.tagName?M.buildTable(this,e):M.setup(this,e)})},M.setup=function(t,n){if(!t||!t.tHead||0===t.tBodies.length||!0===t.hasInitialized)return n.debug?S("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var e,r,i,a="",s=A(t),o=A.metadata;t.hasInitialized=!1,t.isProcessing=!0,t.config=n,A.data(t,"tablesorter",n),n.debug&&A.data(t,"startoveralltimer",new Date),n.supportsDataObject=((e=A.fn.jquery.split("."))[0]=parseInt(e[0],10),1<e[0]||1===e[0]&&4<=parseInt(e[1],10)),n.string={max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,null:0,top:!0,bottom:!1},n.emptyTo=n.emptyTo.toLowerCase(),n.stringTo=n.stringTo.toLowerCase(),/tablesorter\-/.test(s.attr("class"))||(a=""!==n.theme?" tablesorter-"+n.theme:""),n.table=t,n.$table=s.addClass(M.css.table+" "+n.tableClass+a).attr("role","grid"),n.$headers=s.find(n.selectorHeaders),n.namespace=n.namespace?"."+n.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2),n.$table.children().children("tr").attr("role","row"),n.$tbodies=s.children("tbody:not(."+n.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),n.$table.find("caption").length&&n.$table.attr("aria-labelledby","theCaption"),n.widgetInit={},n.textExtraction=n.$table.attr("data-text-extraction")||n.textExtraction||"basic",c(t),(a=(e=t).config).widthFixed&&0===a.$table.find("colgroup").length&&(r=A("<colgroup>"),i=A(e).width(),A(e.tBodies).not("."+a.cssInfoBlock).find("tr:first").children(":visible").each(function(){r.append(A("<col>").css("width",parseInt(A(this).width()/i*1e3,10)/10+"%"))}),a.$table.prepend(r)),h(t),n.totalRows=0,n.delayInit||g(t),M.bindEvents(t,n.$headers,!0),u(t),n.supportsDataObject&&void 0!==s.data().sortlist?n.sortList=s.data().sortlist:o&&s.metadata()&&s.metadata().sortlist&&(n.sortList=s.metadata().sortlist),M.applyWidget(t,!0),0<n.sortList.length?s.trigger("sorton",[n.sortList,{},!n.initWidgets,!0]):(w(t),n.initWidgets&&M.applyWidget(t,!1)),n.showProcessing&&s.unbind("sortBegin"+n.namespace+" sortEnd"+n.namespace).bind("sortBegin"+n.namespace+" sortEnd"+n.namespace,function(e){clearTimeout(n.processTimer),M.isProcessing(t),"sortBegin"===e.type&&(n.processTimer=setTimeout(function(){M.isProcessing(t,!0)},500))}),t.hasInitialized=!0,t.isProcessing=!1,n.debug&&M.benchmark("Overall initialization time",A.data(t,"startoveralltimer")),s.trigger("tablesorter-initialized",t),"function"==typeof n.initialized&&n.initialized(t)},M.getColumnData=function(e,t,n,r){if(null!=t){var i,a=(e=A(e)[0]).config;if(t[n])return r?t[n]:t[a.$headers.index(a.$headers.filter('[data-column="'+n+'"]:last'))];for(i in t)if("string"==typeof i&&(e=(r?a.$headers.eq(n):a.$headers.filter('[data-column="'+n+'"]:last')).filter(i),e.length))return t[i]}},M.computeColumnIndex=function(e){for(var t,n,r,i,a,s,o,l,c,u=[],d=0,f=0;f<e.length;f++)for(i=e[f].cells,t=0;t<i.length;t++){for(n=i[t],r=A(n),a=n.parentNode.rowIndex,r.index(),s=n.rowSpan||1,o=n.colSpan||1,void 0===u[a]&&(u[a]=[]),n=0;n<u[a].length+1;n++)if(void 0===u[a][n]){l=n;break}for(d=Math.max(l,d),r.attr({"data-column":l}),n=a;n<a+s;n++)for(void 0===u[n]&&(u[n]=[]),c=u[n],r=l;r<l+o;r++)c[r]="x"}return d+1},M.isProcessing=function(e,t,n){var r=(e=A(e))[0].config,i=n||e.find("."+M.css.header);t?(void 0!==n&&0<r.sortList.length&&(i=i.filter(function(){return!this.sortDisabled&&0<=M.isValueInArray(parseFloat(A(this).attr("data-column")),r.sortList)})),e.add(i).addClass(M.css.processing+" "+r.cssProcessing)):e.add(i).removeClass(M.css.processing+" "+r.cssProcessing)},M.processTbody=function(e,t,n){if(e=A(e)[0],n)return e.isProcessing=!0,t.before('<span class="tablesorter-savemyplace"/>'),A.fn.detach?t.detach():t.remove();n=A(e).find("span.tablesorter-savemyplace"),t.insertAfter(n),n.remove(),e.isProcessing=!1},M.clearTableBody=function(e){A(e)[0].config.$tbodies.children().detach()},M.bindEvents=function(r,i,e){var a,s=(r=A(r)[0]).config;!0!==e&&(s.$extraHeaders=s.$extraHeaders?s.$extraHeaders.add(i):i),i.find(s.selectorSort).add(i.filter(s.selectorSort)).unbind(["mousedown","mouseup","sort","keyup",""].join(s.namespace+" ")).bind(["mousedown","mouseup","sort","keyup",""].join(s.namespace+" "),function(e,t){var n=e.type;if(!(1!==(e.which||e.button)&&!/sort|keyup/.test(n)||"keyup"===n&&13!==e.which||"mouseup"===n&&!0!==t&&250<(new Date).getTime()-a)){if("mousedown"===n)return a=(new Date).getTime(),/(input|select|button|textarea)/i.test(e.target.tagName)?"":!s.cancelSelection;s.delayInit&&m(s.cache)&&g(r),n=A.fn.closest?A(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:A(this).parents("th, td")[0],(n=s.$headers[i.index(n)]).sortDisabled||function e(t,n,r){if(t.isUpdating)return setTimeout(function(){e(t,n,r)},50);var i,a,s,o,l=t.config,c=!r[l.sortMultiSortKey],u=l.$table;if(u.trigger("sortStart",t),n.count=r[l.sortResetKey]?2:(n.count+1)%(l.sortReset?3:2),l.sortRestart&&(a=n,l.$headers.each(function(){this===a||!c&&A(this).is("."+M.css.sortDesc+",."+M.css.sortAsc)||(this.count=-1)})),a=n.column,c){if(l.sortList=[],null!==l.sortForce)for(i=l.sortForce,s=0;s<i.length;s++)i[s][0]!==a&&l.sortList.push(i[s]);if((i=n.order[n.count])<2&&(l.sortList.push([a,i]),1<n.colSpan))for(s=1;s<n.colSpan;s++)l.sortList.push([a+s,i])}else{if(l.sortAppend&&1<l.sortList.length)for(s=0;s<l.sortAppend.length;s++)0<=(o=M.isValueInArray(l.sortAppend[s][0],l.sortList))&&l.sortList.splice(o,1);if(0<=M.isValueInArray(a,l.sortList))for(s=0;s<l.sortList.length;s++)o=l.sortList[s],i=l.$headers.filter('[data-column="'+o[0]+'"]:last')[0],o[0]===a&&(o[1]=i.order[n.count],2===o[1]&&(l.sortList.splice(s,1),i.count=-1));else if((i=n.order[n.count])<2&&(l.sortList.push([a,i]),1<n.colSpan))for(s=1;s<n.colSpan;s++)l.sortList.push([a+s,i])}if(null!==l.sortAppend)for(i=l.sortAppend,s=0;s<i.length;s++)i[s][0]!==a&&l.sortList.push(i[s]);u.trigger("sortBegin",t),setTimeout(function(){w(t),k(t),v(t),u.trigger("sortEnd",t)},1)}(r,n,e)}}),s.cancelSelection&&i.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},M.restoreHeaders=function(e){var t=A(e)[0].config;t.$table.find(t.selectorHeaders).each(function(e){A(this).find("."+M.css.headerIn).length&&A(this).html(t.headerContent[e])})},M.destroy=function(e,t,n){var r,i,a,s,o;(e=A(e)[0]).hasInitialized&&(M.refreshWidgets(e,!0,!0),r=A(e),i=e.config,s=(a=r.find("thead:first")).find("tr."+M.css.headerRow).removeClass(M.css.headerRow+" "+i.cssHeaderRow),o=r.find("tfoot:first > tr").children("th, td"),!1===t&&0<=A.inArray("uitheme",i.widgets)&&(r.trigger("applyWidgetId",["uitheme"]),r.trigger("applyWidgetId",["zebra"])),a.find("tr").not(s).remove(),r.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(i.namespace+" ")),i.$headers.add(o).removeClass([M.css.header,i.cssHeader,i.cssAsc,i.cssDesc,M.css.sortAsc,M.css.sortDesc,M.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),s.find(i.selectorSort).unbind(["mousedown","mouseup","keypress",""].join(i.namespace+" ")),M.restoreHeaders(e),r.toggleClass(M.css.table+" "+i.tableClass+" tablesorter-"+i.theme,!1===t),e.hasInitialized=!1,delete e.config.cache,"function"==typeof n&&n(e))},M.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i},M.sortNatural=function(e,t){if(e===t)return 0;var n,r,i,a,s,o=M.regex;if(o.hex.test(t)){if((n=parseInt(e.match(o.hex),16))<(r=parseInt(t.match(o.hex),16)))return-1;if(r<n)return 1}for(n=e.replace(o.chunk,"\\0$1\\0").replace(o.chunks,"").split("\\0"),o=t.replace(o.chunk,"\\0$1\\0").replace(o.chunks,"").split("\\0"),s=Math.max(n.length,o.length),a=0;a<s;a++){if(r=isNaN(n[a])?n[a]||0:parseFloat(n[a])||0,i=isNaN(o[a])?o[a]||0:parseFloat(o[a])||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(i<r)return 1}return 0},M.sortNaturalAsc=function(e,t,n,r,i){return e===t?0:(n=i.string[i.empties[n]||i.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:-n||-1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:n||1:M.sortNatural(e,t))},M.sortNaturalDesc=function(e,t,n,r,i){return e===t?0:(n=i.string[i.empties[n]||i.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:n||1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:-n||-1:M.sortNatural(t,e))},M.sortText=function(e,t){return t<e?1:e<t?-1:0},M.getTextValue=function(e,t,n){if(n){var r=e?e.length:0,i=n+t;for(n=0;n<r;n++)i+=e.charCodeAt(n);return t*i}return 0},M.sortNumericAsc=function(e,t,n,r,i,a){return e===t?0:(i=(a=a.config).string[a.empties[i]||a.emptyTo],""===e&&0!==i?"boolean"==typeof i?i?-1:1:-i||-1:""===t&&0!==i?"boolean"==typeof i?i?1:-1:i||1:(e=isNaN(e)?M.getTextValue(e,n,r):e)-(t=isNaN(t)?M.getTextValue(t,n,r):t))},M.sortNumericDesc=function(e,t,n,r,i,a){return e===t?0:(i=(a=a.config).string[a.empties[i]||a.emptyTo],""===e&&0!==i?"boolean"==typeof i?i?-1:1:i||1:""===t&&0!==i?"boolean"==typeof i?i?1:-1:-i||-1:(isNaN(e)&&(e=M.getTextValue(e,n,r)),(t=isNaN(t)?M.getTextValue(t,n,r):t)-e))},M.sortNumeric=function(e,t){return e-t},M.characterEquivalents={a:"",A:"",c:"",C:"",e:"",E:"",i:"",I:"",o:"",O:"",ss:"",SS:"",u:"",U:""},M.replaceAccents=function(e){var t,n="[",r=M.characterEquivalents;if(!M.characterRegex){for(t in M.characterRegexArray={},r)"string"==typeof t&&(n+=r[t],M.characterRegexArray[t]=new RegExp("["+r[t]+"]","g"));M.characterRegex=new RegExp(n+"]")}if(M.characterRegex.test(e))for(t in r)"string"==typeof t&&(e=e.replace(M.characterRegexArray[t],t));return e},M.isValueInArray=function(e,t){for(var n=t.length,r=0;r<n;r++)if(t[r][0]===e)return r;return-1},M.addParser=function(e){for(var t=M.parsers.length,n=!0,r=0;r<t;r++)M.parsers[r].id.toLowerCase()===e.id.toLowerCase()&&(n=!1);n&&M.parsers.push(e)},M.getParserById=function(e){if("false"==e)return!1;for(var t=M.parsers.length,n=0;n<t;n++)if(M.parsers[n].id.toLowerCase()===e.toString().toLowerCase())return M.parsers[n];return!1},M.addWidget=function(e){M.widgets.push(e)},M.hasWidget=function(e,t){return(e=A(e)).length&&e[0].config&&e[0].config.widgetInit[t]||!1},M.getWidgetById=function(e){for(var t,n=M.widgets.length,r=0;r<n;r++)if((t=M.widgets[r])&&t.hasOwnProperty("id")&&t.id.toLowerCase()===e.toLowerCase())return t},M.applyWidget=function(n,r){var e,t,i,a=(n=A(n)[0]).config,s=a.widgetOptions,o=[];!1!==r&&n.hasInitialized&&(n.isApplyingWidgets||n.isUpdating)||(a.debug&&(e=new Date),a.widgets.length&&(n.isApplyingWidgets=!0,a.widgets=A.grep(a.widgets,function(e,t){return A.inArray(e,a.widgets)===t}),A.each(a.widgets||[],function(e,t){(i=M.getWidgetById(t))&&i.id&&(i.priority||(i.priority=10),o[e]=i)}),o.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),A.each(o,function(e,t){t&&(!r&&a.widgetInit[t.id]||(a.widgetInit[t.id]=!0,t.hasOwnProperty("options")&&(s=n.config.widgetOptions=A.extend(!0,{},t.options,s)),t.hasOwnProperty("init")&&t.init(n,t,a,s)),!r&&t.hasOwnProperty("format")&&t.format(n,a,s,!1))})),setTimeout(function(){n.isApplyingWidgets=!1},0),a.debug&&(t=a.widgets.length,C("Completed "+(!0===r?"initializing ":"applying ")+t+" widget"+(1!==t?"s":""),e)))},M.refreshWidgets=function(e,t,n){for(var r=(e=A(e)[0]).config,i=r.widgets,a=M.widgets,s=a.length,o=0;o<s;o++)a[o]&&a[o].id&&(t||A.inArray(a[o].id,i)<0)&&(r.debug&&S('Refeshing widgets: Removing "'+a[o].id+'"'),a[o].hasOwnProperty("remove")&&r.widgetInit[a[o].id]&&(a[o].remove(e,r,r.widgetOptions),r.widgetInit[a[o].id]=!1));!0!==n&&M.applyWidget(e,t)},M.getData=function(e,t,n){var r,i,a="";return(e=A(e)).length?(r=!!A.metadata&&e.metadata(),i=" "+(e.attr("class")||""),void 0!==e.data(n)||void 0!==e.data(n.toLowerCase())?a+=e.data(n)||e.data(n.toLowerCase()):r&&void 0!==r[n]?a+=r[n]:t&&void 0!==t[n]?a+=t[n]:" "!==i&&i.match(" "+n+"-")&&(a=i.match(new RegExp("\\s"+n+"-([\\w-]+)"))[1]||""),A.trim(a)):""},M.formatFloat=function(e,t){return"string"!=typeof e||""===e?e:(e=(t&&t.config?!1!==t.config.usNumberFormat:void 0===t||t)?e.replace(/,/g,""):e.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(e)&&(e=e.replace(/^\s*\(([.\d]+)\)/,"-$1")),t=parseFloat(e),isNaN(t)?A.trim(e):t)},M.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var c=A.tablesorter;A.fn.extend({tablesorter:c.construct}),c.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),c.addParser({id:"text",is:function(){return!0},format:function(e,t){t=t.config;return e&&(e=A.trim(t.ignoreCase?e.toLocaleLowerCase():e),e=t.sortLocaleCompare?c.replaceAccents(e):e),e},type:"text"}),c.addParser({id:"digit",is:function(e){return c.isDigit(e)},format:function(e,t){var n=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof n?n:e&&A.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e)},type:"numeric"}),c.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[+\-,. ]/g,""))},format:function(e,t){var n=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof n?n:e&&A.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e)},type:"numeric"}),c.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,t){for(var n=e?e.split("."):"",r="",i=n.length,a=0;a<i;a++)r+=("00"+n[a]).slice(-3);return e&&c.formatFloat(r,t)},type:"numeric"}),c.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(e){return e&&A.trim(e.replace(/(https?|ftp|file):\/\//,""))},parsed:!0,type:"text"}),c.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,t){return e&&c.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||e:"",t)},type:"numeric"}),c.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,t){return e&&c.formatFloat(e.replace(/%/g,""),t)},type:"numeric"}),c.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,t){return e&&c.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t)},type:"numeric"}),c.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,t,n,r){var i;return e&&(r=(i=(n=t.config).$headers.filter("[data-column="+r+"]:last")).length&&i[0].dateFormat||c.getData(i,c.getColumnData(t,n.headers,r),"dateFormat")||n.dateFormat,e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===r?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===r?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===r&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))),e&&c.formatFloat(new Date(e).getTime()||e,t)},type:"numeric"}),c.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,t){return e&&c.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t)},type:"numeric"}),c.addParser({id:"metadata",is:function(){return!1},format:function(e,t,n){return e=(e=t.config).parserMetadataName||"sortValue",A(n).metadata()[e]},type:"numeric"}),c.addWidget({id:"zebra",priority:90,format:function(e,t,n){var r,i,a,s,o=new RegExp(t.cssChildRow,"i"),l=t.$tbodies;for(t.debug&&(s=new Date),e=0;e<l.length;e++)i=0,l.eq(e).children("tr:visible").not(t.selectorRemove).each(function(){r=A(this),o.test(this.className)||i++,a=0==i%2,r.removeClass(n.zebra[a?1:0]).addClass(n.zebra[a?0:1])});t.debug&&c.benchmark("Applying Zebra widget",s)},remove:function(e,t,n){var r;t=t.$tbodies;var i=(n.zebra||["even","odd"]).join(" ");for(n=0;n<t.length;n++)(r=A.tablesorter.processTbody(e,t.eq(n),!0)).children().removeClass(i),A.tablesorter.processTbody(e,r,!1)}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(C){function r(e,t){var n,r,i=e.nodeName.toLowerCase();return"area"===i?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(r=C("img[usemap='#"+r+"']")[0])&&a(r))):(/^(input|select|textarea|button|object)$/.test(i)?!e.disabled:"a"===i&&e.href||t)&&a(e)}function a(e){return C.expr.filters.visible(e)&&!C(e).parents().addBack().filter(function(){return"hidden"===C.css(this,"visibility")}).length}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=n(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",s)}function s(){C.datepicker._isDisabledDatepicker((u.inline?u.dpDiv.parent():u.input)[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function l(e,t){for(var n in C.extend(e,t),t)null==t[n]&&(e[n]=t[n]);return e}var t,i,o,c,u;C.ui=C.ui||{},C.extend(C.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),C.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,e=this.parents().filter(function(){var e=C(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&e.length?e:C(this[0].ownerDocument||document)},uniqueId:(c=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&C(this).removeAttr("id")})}}),C.extend(C.expr[":"],{data:C.expr.createPseudo?C.expr.createPseudo(function(t){return function(e){return!!C.data(e,t)}}):function(e,t,n){return!!C.data(e,n[3])},focusable:function(e){return r(e,!isNaN(C.attr(e,"tabindex")))},tabbable:function(e){var t=C.attr(e,"tabindex"),n=isNaN(t);return(n||0<=t)&&r(e,!n)}}),C("<a>").outerWidth(1).jquery||C.each(["Width","Height"],function(e,n){function r(e,t,n,r){return C.each(i,function(){t-=parseFloat(C.css(e,"padding"+this))||0,n&&(t-=parseFloat(C.css(e,"border"+this+"Width"))||0),r&&(t-=parseFloat(C.css(e,"margin"+this))||0)}),t}var i="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),s={innerWidth:C.fn.innerWidth,innerHeight:C.fn.innerHeight,outerWidth:C.fn.outerWidth,outerHeight:C.fn.outerHeight};C.fn["inner"+n]=function(e){return void 0===e?s["inner"+n].call(this):this.each(function(){C(this).css(a,r(this,e)+"px")})},C.fn["outer"+n]=function(e,t){return"number"!=typeof e?s["outer"+n].call(this,e):this.each(function(){C(this).css(a,r(this,e,!0,t)+"px")})}}),C.fn.addBack||(C.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),C("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(C.fn.removeData=(o=C.fn.removeData,function(e){return arguments.length?o.call(this,C.camelCase(e)):o.call(this)})),C.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),C.fn.extend({focus:(i=C.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){C(e).focus(),n&&n.call(e)},t)}):i.apply(this,arguments)}),disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n,r=C(this[0]);r.length&&r[0]!==document;){if(("absolute"===(t=r.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),C.ui.plugin={add:function(e,t,n){var r,i=C.ui[e].prototype;for(r in n)i.plugins[r]=i.plugins[r]||[],i.plugins[r].push([t,n[r]])},call:function(e,t,n,r){var i,a=e.plugins[t];if(a&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;a.length>i;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},C.extend(C.ui,{datepicker:{version:"1.11.4"}}),C.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return l(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var n,r=e.nodeName.toLowerCase(),i="div"===r||"span"===r;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(n=this._newInst(C(e),i)).settings=C.extend({},t||{}),"input"===r?this._connectDatepicker(e,n):i&&this._inlineDatepicker(e,n)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?n(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var n=C(e);t.append=C([]),t.trigger=C([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(t),C.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n,r=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),r&&(t.append=C("<span class='"+this._appendClass+"'>"+r+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(n=this._get(t,"showOn"))&&"both"!==n||e.focus(this._showDatepicker),"button"!==n&&"both"!==n||(r=this._get(t,"buttonText"),n=this._get(t,"buttonImage"),t.trigger=C(this._get(t,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:n,alt:r,title:r}):C("<button type='button'></button>").addClass(this._triggerClass).html(n?C("<img/>").attr({src:n,alt:r,title:r}):r)),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===e[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==e[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){var t,n,r,i,a,s;this._get(e,"autoSize")&&!e.inline&&(a=new Date(2009,11,20),(s=this._get(e,"dateFormat")).match(/[DM]/)&&(a.setMonth((t=function(e){for(i=r=n=0;e.length>i;i++)e[i].length>n&&(n=e[i].length,r=i);return r})(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length))},_inlineDatepicker:function(e,t){var n=C(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv),C.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,r,i){var a,s=this._dialogInst;return s||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),C("body").append(this._dialogInput),(s=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",s)),l(s.settings,r||{}),t=t&&t.constructor===Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null,this._pos||(a=document.documentElement.clientWidth,r=document.documentElement.clientHeight,t=document.documentElement.scrollLeft||document.body.scrollLeft,i=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+t,r/2-150+i]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",s),this},_destroyDatepicker:function(e){var t,n=C(e),r=C.data(e,"datepicker");n.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),C.removeData(e,"datepicker"),"input"===t?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||n.removeClass(this.markerClassName).empty(),u===r&&(u=null))},_enableDatepicker:function(t){var e,n=C(t),r=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((n=n.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,n=C(t),r=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((n=n.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return C.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r,i,a,s,o=this._getInst(e);return 2===arguments.length&&"string"==typeof t?"defaults"===t?C.extend({},C.datepicker._defaults):o?"all"===t?C.extend({},o.settings):this._get(o,t):null:(r=t||{},"string"==typeof t&&((r={})[t]=n),void(o&&(this._curInst===o&&this._hideDatepicker(),i=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(o,"min"),s=this._getMinMaxDate(o,"max"),l(o.settings,r),null!==a&&void 0!==r.dateFormat&&void 0===r.minDate&&(o.settings.minDate=this._formatDate(o,a)),null!==s&&void 0!==r.dateFormat&&void 0===r.maxDate&&(o.settings.maxDate=this._formatDate(o,s)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(C(e),o),this._autoSize(o),this._setDate(o,i),this._updateAlternate(o),this._updateDatepicker(o))))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){e=this._getInst(e);e&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){e=this._getInst(e);e&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){e=this._getInst(e);return e&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t,n,r=C.datepicker._getInst(e.target),i=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,C.datepicker._datepickerShowing)switch(e.keyCode){case 9:C.datepicker._hideDatepicker(),i=!1;break;case 13:return(n=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",r.dpDiv))[0]&&C.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,n[0]),(t=C.datepicker._get(r,"onSelect"))?(n=C.datepicker._formatDate(r),t.apply(r.input?r.input[0]:null,[n,r])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&C.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&C.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,a?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,a?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36===e.keyCode&&e.ctrlKey?C.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,n=C.datepicker._getInst(e.target);return C.datepicker._get(n,"constrainInput")?(t=C.datepicker._possibleChars(C.datepicker._get(n,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!t||-1<t.indexOf(n)):void 0},_doKeyUp:function(e){e=C.datepicker._getInst(e.target);if(e.input.val()!==e.lastVal)try{C.datepicker.parseDate(C.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,C.datepicker._getFormatConfig(e))&&(C.datepicker._setDateFromField(e),C.datepicker._updateAlternate(e),C.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var t,n,r,i;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=C("input",e.parentNode)[0]),C.datepicker._isDisabledDatepicker(e)||C.datepicker._lastInput===e||(i=C.datepicker._getInst(e),C.datepicker._curInst&&C.datepicker._curInst!==i&&(C.datepicker._curInst.dpDiv.stop(!0,!0),i&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(n=(r=C.datepicker._get(i,"beforeShow"))?r.apply(e,[e,i]):{})&&(l(i.settings,n),i.lastVal=null,C.datepicker._lastInput=e,C.datepicker._setDateFromField(i),C.datepicker._inDialog&&(e.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(e),C.datepicker._pos[1]+=e.offsetHeight),t=!1,C(e).parents().each(function(){return!(t|="fixed"===C(this).css("position"))}),r={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(i),r=C.datepicker._checkOffset(i,r,t),i.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":t?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(n=C.datepicker._get(i,"showAnim"),r=C.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}(C(e))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[n]?i.dpDiv.show(n,C.datepicker._get(i,"showOptions"),r):i.dpDiv[n||"show"](n?r:null),C.datepicker._shouldFocusInput(i)&&i.input.focus(),C.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,(u=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,n=this._getNumberOfMonths(e),r=n[1],i=e.dpDiv.find("."+this._dayOverClass+" a");0<i.length&&s.apply(i.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<r&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(n?0:C(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:C(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-a:0,t.left-=n&&t.left===e.input.offset().left?C(document).scrollLeft():0,t.top-=n&&t.top===e.input.offset().top+s?C(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>o&&r<o?Math.abs(t.left+r-o):0),t.top-=Math.min(t.top,t.top+i>l&&i<l?Math.abs(i+s):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||C.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return[(t=C(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,n,r=this._curInst;!r||e&&r!==C.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(r,"showAnim"),n=this._get(r,"duration"),e=function(){C.datepicker._tidyDialog(r)},C.effects&&(C.effects.effect[t]||C.effects[t])?r.dpDiv.hide(t,C.datepicker._get(r,"showOptions"),n,e):r.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?n:null,e),t||e(),this._datepickerShowing=!1,(e=this._get(r,"onClose"))&&e.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){var t;C.datepicker._curInst&&(t=C(e.target),e=C.datepicker._getInst(t[0]),(t[0].id===C.datepicker._mainDivId||0!==t.parents("#"+C.datepicker._mainDivId).length||t.hasClass(C.datepicker.markerClassName)||t.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!t.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===e)||C.datepicker._hideDatepicker())},_adjustDate:function(e,t,n){var r=C(e),e=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(e,t+("M"===n?this._get(e,"showCurrentAtPos"):0),n),this._updateDatepicker(e))},_gotoToday:function(e){var t=C(e),n=this._getInst(t[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(e=new Date,n.selectedDay=e.getDate(),n.drawMonth=n.selectedMonth=e.getMonth(),n.drawYear=n.selectedYear=e.getFullYear()),this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=C(e),e=this._getInst(r[0]);e["selected"+("M"===n?"Month":"Year")]=e["draw"+("M"===n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=C(e);C(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0])||((i=this._getInst(i[0])).selectedDay=i.currentDay=C("a",r).html(),i.selectedMonth=i.currentMonth=t,i.selectedYear=i.currentYear=n,this._selectDate(e,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear)))},_clearDate:function(e){e=C(e);this._selectDate(e,"")},_selectDate:function(e,t){var n=C(e),e=this._getInst(n[0]);t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e),(n=this._get(e,"onSelect"))?n.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t,n,r,i=this._get(e,"altField");i&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),r=this.formatDate(t,n,this._getFormatConfig(e)),C(i).each(function(){C(this).val(r)}))},noWeekends:function(e){e=e.getDay();return[0<e&&e<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},parseDate:function(t,i,e){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?""+i:i+""))return null;function n(e){var t=w(e),t="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,t=RegExp("^\\d{"+("y"===e?t:1)+","+t+"}");if(!(t=i.substring(c).match(t)))throw"Missing number at position "+c;return c+=t[0].length,parseInt(t[0],10)}function r(e,t,n){var r=-1,t=C.map(w(e)?n:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(C.each(t,function(e,t){var n=t[1];return i.substr(c,n.length).toLowerCase()===n.toLowerCase()?(r=t[0],c+=n.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+c}function a(){if(i.charAt(c)!==t.charAt(S))throw"Unexpected literal at position "+c;c++}for(var s,o,l,c=0,u=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,f=(e?e.dayNames:null)||this._defaults.dayNames,p=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,h=(e?e.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,w=function(e){e=t.length>S+1&&t.charAt(S+1)===e;return e&&S++,e},S=0;t.length>S;S++)if(b)"'"!==t.charAt(S)||w("'")?a():b=!1;else switch(t.charAt(S)){case"d":v=n("d");break;case"D":r("D",d,f);break;case"o":y=n("o");break;case"m":m=n("m");break;case"M":m=r("M",p,h);break;case"y":g=n("y");break;case"@":g=(l=new Date(n("@"))).getFullYear(),m=l.getMonth()+1,v=l.getDate();break;case"!":g=(l=new Date((n("!")-this._ticksTo1970)/1e4)).getFullYear(),m=l.getMonth()+1,v=l.getDate();break;case"'":w("'")?a():b=!0;break;default:a()}if(i.length>c&&(o=i.substr(c),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=u?0:-100)),-1<y)for(m=1,v=y;!(v<=(s=this._getDaysInMonth(g,m-1)));)m++,v-=s;if((l=this._daylightSavingAdjust(new Date(g,m-1,v))).getFullYear()!==g||l.getMonth()+1!==m||l.getDate()!==v)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,n){if(!e)return"";function r(e,t,n){var r=""+t;if(u(e))for(;n>r.length;)r="0"+r;return r}function i(e,t,n,r){return(u(e)?r:n)[t]}var a,s=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,l=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,c=(n?n.monthNames:null)||this._defaults.monthNames,u=function(e){e=t.length>a+1&&t.charAt(a+1)===e;return e&&a++,e},d="",f=!1;if(e)for(a=0;t.length>a;a++)if(f)"'"!==t.charAt(a)||u("'")?d+=t.charAt(a):f=!1;else switch(t.charAt(a)){case"d":d+=r("d",e.getDate(),2);break;case"D":d+=i("D",e.getDay(),s,o);break;case"o":d+=r("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=r("m",e.getMonth()+1,2);break;case"M":d+=i("M",e.getMonth(),l,c);break;case"y":d+=u("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":u("'")?d+="'":f=!0;break;default:d+=t.charAt(a)}return d},_possibleChars:function(t){function e(e){return(e=t.length>i+1&&t.charAt(i+1)===e)&&i++,e}for(var n="",r=!1,i=0;t.length>i;i++)if(r)"'"!==t.charAt(i)||e("'")?n+=t.charAt(i):r=!1;else switch(t.charAt(i)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":e("'")?n+="'":r=!0;break;default:n+=t.charAt(i)}return n},_get:function(e,t){return(void 0!==e.settings[t]?e.settings:this._defaults)[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),a=i,s=this._getFormatConfig(e);try{a=this.parseDate(n,r,s)||i}catch(e){r=t?"":r}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=r?a.getDate():0,e.currentMonth=r?a.getMonth():0,e.currentYear=r?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(o,e,t){var n,r,e=null==e||""===e?t:"string"==typeof e?function(e){try{return C.datepicker.parseDate(C.datepicker._get(o,"dateFormat"),e,C.datepicker._getFormatConfig(o))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?C.datepicker._getDate(o):null)||new Date,n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=a.exec(e);s;){switch(s[2]||"d"){case"d":case"D":i+=parseInt(s[1],10);break;case"w":case"W":i+=7*parseInt(s[1],10);break;case"m":case"M":r+=parseInt(s[1],10),i=Math.min(i,C.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(s[1],10),i=Math.min(i,C.datepicker._getDaysInMonth(n,r))}s=a.exec(e)}return new Date(n,r,i)}(e):"number"==typeof e?isNaN(e)?t:(n=e,(r=new Date).setDate(r.getDate()+n),r):new Date(e.getTime());return(e=e&&"Invalid Date"==""+e?t:e)&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),this._daylightSavingAdjust(e)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,a=e.selectedYear,t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),i===e.selectedMonth&&a===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){C.datepicker._adjustDate(n,-t,"M")},next:function(){C.datepicker._adjustDate(n,+t,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(n)},selectDay:function(){return C.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(n,this,"Y"),!1}};C(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,a,s,o,l,c,u,d,f,p,h,g,m,v,y,b,w,S,C,x,k,j,M,A,T,D,I,_,R,F=new Date,P=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),E=this._get(e,"isRTL"),L=this._get(e,"showButtonPanel"),$=this._get(e,"hideIfNoPrevNext"),O=this._get(e,"navigationAsDateFormat"),U=this._getNumberOfMonths(e),N=this._get(e,"showCurrentAtPos"),F=this._get(e,"stepMonths"),B=1!==U[0]||1!==U[1],q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),H=this._getMinMaxDate(e,"min"),z=this._getMinMaxDate(e,"max"),V=e.drawMonth-N,W=e.drawYear;if(V<0&&(V+=12,W--),z)for(t=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth()-U[0]*U[1]+1,z.getDate())),t=H&&t<H?H:t;this._daylightSavingAdjust(new Date(W,V,1))>t;)--V<0&&(V=11,W--);for(e.drawMonth=V,e.drawYear=W,N=this._get(e,"prevText"),N=O?this.formatDate(N,this._daylightSavingAdjust(new Date(W,V-F,1)),this._getFormatConfig(e)):N,n=this._canAdjustMonth(e,-1,W,V)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+N+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"e":"w")+"'>"+N+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+N+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"e":"w")+"'>"+N+"</span></a>",N=this._get(e,"nextText"),N=O?this.formatDate(N,this._daylightSavingAdjust(new Date(W,V+F,1)),this._getFormatConfig(e)):N,r=this._canAdjustMonth(e,1,W,V)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+N+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"w":"e")+"'>"+N+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+N+"'><span class='ui-icon ui-icon-circle-triangle-"+(E?"w":"e")+"'>"+N+"</span></a>",$=this._get(e,"currentText"),N=this._get(e,"gotoCurrent")&&e.currentDay?q:P,$=O?this.formatDate($,N,this._getFormatConfig(e)):$,O=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",O=L?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(E?O:"")+(this._isInRange(e,N)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+$+"</button>":"")+(E?"":O)+"</div>":"",i=parseInt(this._get(e,"firstDay"),10),i=isNaN(i)?0:i,a=this._get(e,"showWeek"),s=this._get(e,"dayNames"),o=this._get(e,"dayNamesMin"),l=this._get(e,"monthNames"),c=this._get(e,"monthNamesShort"),u=this._get(e,"beforeShowDay"),d=this._get(e,"showOtherMonths"),f=this._get(e,"selectOtherMonths"),p=this._getDefaultDate(e),h="",m=0;U[0]>m;m++){for(v="",this.maxRows=4,y=0;U[1]>y;y++){if(b=this._daylightSavingAdjust(new Date(W,V,e.selectedDay)),w=" ui-corner-all",S="",B){if(S+="<div class='ui-datepicker-group",1<U[1])switch(y){case 0:S+=" ui-datepicker-group-first",w=" ui-corner-"+(E?"right":"left");break;case U[1]-1:S+=" ui-datepicker-group-last",w=" ui-corner-"+(E?"left":"right");break;default:S+=" ui-datepicker-group-middle",w=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+w+"'>"+(/all|left/.test(w)&&0===m?E?r:n:"")+(/all|right/.test(w)&&0===m?E?n:r:"")+this._generateMonthYearHeader(e,V,W,H,z,0<m||0<y,l,c)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=a?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",g=0;g<7;g++)C+="<th scope='col'"+(5<=(g+i+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+s[x=(g+i)%7]+"'>"+o[x]+"</span></th>";for(S+=C+"</tr></thead><tbody>",j=this._getDaysInMonth(W,V),W===e.selectedYear&&V===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,j)),k=(this._getFirstDayOfMonth(W,V)-i+7)%7,j=Math.ceil((k+j)/7),M=B&&this.maxRows>j?this.maxRows:j,this.maxRows=M,A=this._daylightSavingAdjust(new Date(W,V,1-k)),T=0;T<M;T++){for(S+="<tr>",D=a?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(A)+"</td>":"",g=0;g<7;g++)I=u?u.apply(e.input?e.input[0]:null,[A]):[!0,""],R=(_=A.getMonth()!==V)&&!f||!I[0]||H&&A<H||z&&z<A,D+="<td class='"+(5<=(g+i+6)%7?" ui-datepicker-week-end":"")+(_?" ui-datepicker-other-month":"")+(A.getTime()===b.getTime()&&V===e.selectedMonth&&e._keyEvent||p.getTime()===A.getTime()&&p.getTime()===b.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(_&&!d?"":" "+I[1]+(A.getTime()===q.getTime()?" "+this._currentClass:"")+(A.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(_&&!d||!I[2]?"":" title='"+I[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(_&&!d?"&#xa0;":R?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===P.getTime()?" ui-state-highlight":"")+(A.getTime()===q.getTime()?" ui-state-active":"")+(_?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);S+=D+"</tr>"}11<++V&&(V=0,W++),v+=S+="</tbody></table>"+(B?"</div>"+(0<U[0]&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}h+=v}return h+=O,e._keyEvent=!1,h},_generateMonthYearHeader:function(e,t,n,r,i,a,s,o){var l,c,u,d,f,p,h,g=this._get(e,"changeMonth"),m=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(a||!g)b+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=r&&r.getFullYear()===n,c=i&&i.getFullYear()===n,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=r.getMonth())&&(!c||i.getMonth()>=u)&&(b+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+o[u]+"</option>");b+="</select>"}if(v||(y+=b+(!a&&g&&m?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!m)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(e,"yearRange").split(":"),f=(new Date).getFullYear(),p=(s=function(e){e=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(e)?f:e})(d[0]),h=Math.max(p,s(d[1]||"")),p=r?Math.max(p,r.getFullYear()):p,h=i?Math.min(h,i.getFullYear()):h,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=h;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),v&&(y+=(!a&&g&&m?"":"&#xa0;")+b),y+"</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),t=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),t=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,t)));e.selectedDay=t.getDate(),e.drawMonth=e.selectedMonth=t.getMonth(),e.drawYear=e.selectedYear=t.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),e=this._getMinMaxDate(e,"max"),t=n&&t<n?n:t;return e&&e<t?e:t},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){e=this._get(e,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),i=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(e,i)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=null,a=null,s=this._get(e,"yearRange");return s&&(e=s.split(":"),s=(new Date).getFullYear(),i=parseInt(e[0],10),a=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(i+=s),e[1].match(/[+\-].*/)&&(a+=s)),(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())&&(!i||t.getFullYear()>=i)&&(!a||a>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);t=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),t,this._getFormatConfig(e))}}),C.fn.datepicker=function(e){if(!this.length)return this;C.datepicker.initialized||(C(document).mousedown(C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this].concat(t)):C.datepicker._attachDatepicker(this,e)})},C.datepicker=new e,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.11.4",C.datepicker}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(ye){ye.fn.jScrollPane=function(n){function r(b,e){function w(e){var t,n,r,i,a,s,o,l,c,u,d,f,p,h,g,m=!1,v=!1;if($=e,void 0===O)r=b.scrollTop(),i=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),U=b.innerWidth()+ve,N=b.innerHeight(),b.width(U),O=ye('<div class="jspPane" />').css("padding",pe).append(b.children()),B=ye('<div class="jspContainer" />').css({width:U+"px",height:N+"px"}).append(O).appendTo(b);else{if(b.css("width",""),m=$.stickToBottom&&(20<(s=H-N)&&s-E()<10),v=$.stickToRight&&(20<(a=q-U)&&a-P()<10),(a=b.innerWidth()+ve!=U||b.outerHeight()!=N)&&(U=b.innerWidth()+ve,N=b.innerHeight(),B.css({width:U+"px",height:N+"px"})),!a&&he==q&&O.outerHeight()==H)return b.width(U),0;he=q,O.css("width",""),b.width(U),B.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function y(){var e=Z,t=G;switch(o){case 40:ge.scrollByY($.keyboardSpeed,!1);break;case 38:ge.scrollByY(-$.keyboardSpeed,!1);break;case 34:case 32:ge.scrollByY(N*$.scrollPagePercent,!1);break;case 33:ge.scrollByY(-N*$.scrollPagePercent,!1);break;case 39:ge.scrollByX($.keyboardSpeed,!1);break;case 37:ge.scrollByX(-$.keyboardSpeed,!1)}return l=e!=Z||t!=G}O.css("overflow","auto"),q=e.contentWidth||O[0].scrollWidth,H=O[0].scrollHeight,O.css("overflow",""),W=1<(V=H/N),(J=1<(z=q/U))||W?(b.addClass("jspScrollable"),(e=$.maintainPosition&&(G||Z))&&(t=P(),n=E()),W&&(B.append(ye('<div class="jspVerticalBar" />').append(ye('<div class="jspCap jspCapTop" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragTop" />'),ye('<div class="jspDragBottom" />'))),ye('<div class="jspCap jspCapBottom" />'))),ee=B.find(">.jspVerticalBar"),te=ee.find(">.jspTrack"),Y=te.find(">.jspDrag"),$.showArrows&&(ie=ye('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",L),ae=ye('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",L),$.arrowScrollOnHover&&(ie.bind("mouseover.jsp",k(0,-1,ie)),ae.bind("mouseover.jsp",k(0,1,ae))),x(te,$.verticalArrowPositions,ie,ae)),ne=N,B.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ne-=ye(this).outerHeight()}),Y.hover(function(){Y.addClass("jspHover")},function(){Y.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",L),Y.addClass("jspActive");var t=e.pageY-Y.position().top;return ye("html").bind("mousemove.jsp",function(e){A(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",M),!1}),S()),J&&(B.append(ye('<div class="jspHorizontalBar" />').append(ye('<div class="jspCap jspCapLeft" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragLeft" />'),ye('<div class="jspDragRight" />'))),ye('<div class="jspCap jspCapRight" />'))),se=B.find(">.jspHorizontalBar"),oe=se.find(">.jspTrack"),K=oe.find(">.jspDrag"),$.showArrows&&(ue=ye('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",L),de=ye('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",L),$.arrowScrollOnHover&&(ue.bind("mouseover.jsp",k(-1,0,ue)),de.bind("mouseover.jsp",k(1,0,de))),x(oe,$.horizontalArrowPositions,ue,de)),K.hover(function(){K.addClass("jspHover")},function(){K.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",L),K.addClass("jspActive");var t=e.pageX-K.position().left;return ye("html").bind("mousemove.jsp",function(e){D(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",M),!1}),le=B.innerWidth(),C()),function(){{var e,t;J&&W&&(e=oe.outerHeight(),t=te.outerWidth(),ne-=e,ye(se).find(">.jspCap:visible,>.jspArrow").each(function(){le+=ye(this).outerWidth()}),le-=t,N-=t,U-=e,oe.parent().append(ye('<div class="jspCorner" />').css("width",e+"px")),S(),C())}J&&O.width(B.outerWidth()-ve+"px"),H=O.outerHeight(),V=H/N,J&&((ce=Math.ceil(1/z*le))>$.horizontalDragMaxWidth?ce=$.horizontalDragMaxWidth:ce<$.horizontalDragMinWidth&&(ce=$.horizontalDragMinWidth),K.width(ce+"px"),X=le-ce,I(Z)),W&&((re=Math.ceil(1/V*ne))>$.verticalDragMaxHeight?re=$.verticalDragMaxHeight:re<$.verticalDragMinHeight&&(re=$.verticalDragMinHeight),Y.height(re+"px"),Q=ne-re,T(G))}(),e&&(R(v?q-U:t,!1),_(m?H-N:n,!1)),O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){F(e.target,!1)}),B.unbind(me).bind(me,function(e,t,n,r){var i=Z=Z||0,a=G=G||0,e=e.deltaFactor||$.mouseWheelSpeed;return ge.scrollBy(n*e,-r*e,!1),i==Z&&a==G}),g=!1,B.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];u=P(),d=E(),f=e.pageX,p=e.pageY,g=!(h=!1)}).bind("touchmove.jsp",function(e){if(g){var t=e.originalEvent.touches[0],n=Z,e=G;return ge.scrollTo(u+f-t.pageX,d+p-t.pageY),h=h||5<Math.abs(f-t.pageX)||5<Math.abs(p-t.pageY),n==Z&&e==G}}).bind("touchend.jsp",function(){g=!1}).bind("click.jsp-touchclick",function(){return h?h=!1:void 0}),$.enableKeyboardNavigation&&(c=[],J&&c.push(se[0]),W&&c.push(ee[0]),O.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||c.length&&ye(e.target).closest(c).length){var t=Z,n=G;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:o=e.keyCode,y();break;case 35:_(H-N),o=null;break;case 36:_(0),o=null}return!(l=e.keyCode==o&&t!=Z||n!=G)}}).bind("keypress.jsp",function(e){return e.keyCode==o&&y(),e.target===this||c.length&&ye(e.target).closest(c).length?!l:void 0}),$.hideFocus?(b.css("outline","none"),"hideFocus"in B[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in B[0]&&b.attr("hideFocus",!1))),$.clickOnTrack&&(j(),W&&te.bind("mousedown.jsp",function(r){if(void 0===r.originalTarget||r.originalTarget==r.currentTarget){var i,a=ye(this),e=a.offset(),s=r.pageY-e.top-G,o=!0,l=function(){var e=a.offset(),t=r.pageY-e.top-re/2,n=N*$.scrollPagePercent,e=Q*n/(H-N);if(s<0)t<G-e?ge.scrollByY(-n):A(t);else{if(!(0<s))return void c();G+e<t?ge.scrollByY(n):A(t)}i=setTimeout(l,o?$.initialDelay:$.trackClickRepeatFreq),o=!1},c=function(){i&&clearTimeout(i),i=null,ye(document).unbind("mouseup.jsp",c)};return l(),ye(document).bind("mouseup.jsp",c),!1}}),J&&oe.bind("mousedown.jsp",function(r){if(void 0===r.originalTarget||r.originalTarget==r.currentTarget){var i,a=ye(this),e=a.offset(),s=r.pageX-e.left-Z,o=!0,l=function(){var e=a.offset(),t=r.pageX-e.left-ce/2,n=U*$.scrollPagePercent,e=X*n/(q-U);if(s<0)t<Z-e?ge.scrollByX(-n):D(t);else{if(!(0<s))return void c();Z+e<t?ge.scrollByX(n):D(t)}i=setTimeout(l,o?$.initialDelay:$.trackClickRepeatFreq),o=!1},c=function(){i&&clearTimeout(i),i=null,ye(document).unbind("mouseup.jsp",c)};return l(),ye(document).bind("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,n=escape(location.hash.substr(1));try{e=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}e.length&&O.find(n)&&(0===B.scrollTop()?t=setInterval(function(){0<B.scrollTop()&&(F(e,!0),ye(document).scrollTop(B.position().top),clearInterval(t))},50):(F(e,!0),ye(document).scrollTop(B.position().top)))}}(),$.hijackInternalLinks&&(ye(document.body).data("jspHijack")||(ye(document.body).data("jspHijack",!0),ye(document.body).delegate('a[href*="#"]',"click",function(e){var t,n=this.href.substr(0,this.href.indexOf("#")),r=location.href;if(n===(r=-1!==location.href.indexOf("#")?location.href.substr(0,location.href.indexOf("#")):r)){n=escape(this.href.substr(this.href.indexOf("#")+1));try{t=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}t.length&&((r=t.closest(".jspScrollable")).data("jsp").scrollToElement(t,!0),r[0].scrollIntoView&&(n=ye(window).scrollTop(),((t=t.offset().top)<n||t>n+ye(window).height())&&r[0].scrollIntoView()),e.preventDefault())}})))):(b.removeClass("jspScrollable"),O.css({top:0,left:0,width:B.width()-ve}),B.unbind(me),O.find(":input,a").unbind("focus.jsp"),b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),O.unbind(".jsp"),j()),$.autoReinitialise&&!fe?fe=setInterval(function(){w($)},$.autoReinitialiseDelay):!$.autoReinitialise&&fe&&clearInterval(fe),r&&b.scrollTop(0)&&_(r,!1),i&&b.scrollLeft(0)&&R(i,!1),b.trigger("jsp-initialised",[J||W])}function S(){te.height(ne+"px"),G=0,t=$.verticalGutter+te.outerWidth(),O.width(U-t-ve);try{0===ee.position().left&&O.css("margin-left",t+"px")}catch(e){}}function C(){B.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){le-=ye(this).outerWidth()}),oe.width(le+"px"),Z=0}function x(e,t,n,r){var i="before",a="after";(t="os"==t?/Mac/.test(navigator.platform)?"after":"split":t)==i?a=t:t==a&&(i=t,t=n,n=r,r=t),e[i](n)[a](r)}function k(e,t,n){return function(){return function(e,t,n,r){n=ye(n).addClass("jspActive");function i(){0!==e&&ge.scrollByX(e*$.arrowButtonSpeed),0!==t&&ge.scrollByY(t*$.arrowButtonSpeed),s=setTimeout(i,o?$.initialDelay:$.arrowRepeatFreq),o=!1}var a,s,o=!0;i(),a=r?"mouseout.jsp":"mouseup.jsp",(r=r||ye("html")).bind(a,function(){n.removeClass("jspActive"),s&&clearTimeout(s),s=null,r.unbind(a)})}(e,t,this,n),this.blur(),!1}}function j(){oe&&oe.unbind("mousedown.jsp"),te&&te.unbind("mousedown.jsp")}function M(){ye("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Y&&Y.removeClass("jspActive"),K&&K.removeClass("jspActive")}function A(e,t){var n,r,i,a;W&&(e<0?e=0:Q<e&&(e=Q),n=new ye.Event("jsp-will-scroll-y"),b.trigger(n,[e]),n.isDefaultPrevented()||(r=0===(n=e||0),i=n==Q,a=-(e/Q)*(H-N),(t=void 0===t?$.animateScroll:t)?ge.animate(Y,"top",e,T,function(){b.trigger("jsp-user-scroll-y",[-a,r,i])}):(Y.css("top",e),T(e),b.trigger("jsp-user-scroll-y",[-a,r,i]))))}function T(e){void 0===e&&(e=Y.position().top),B.scrollTop(0);var t,n=0===(G=e||0),r=G==Q,i=-(e/Q)*(H-N);a==n&&o==r||(a=n,o=r,b.trigger("jsp-arrow-change",[a,o,s,l])),t=n,e=r,$.showArrows&&(ie[t?"addClass":"removeClass"]("jspDisabled"),ae[e?"addClass":"removeClass"]("jspDisabled")),O.css("top",i),b.trigger("jsp-scroll-y",[-i,n,r]).trigger("scroll")}function D(e,t){var n,r,i,a;J&&(e<0?e=0:X<e&&(e=X),n=new ye.Event("jsp-will-scroll-x"),b.trigger(n,[e]),n.isDefaultPrevented()||(r=0===(n=e||0),i=n==X,a=-(e/X)*(q-U),(t=void 0===t?$.animateScroll:t)?ge.animate(K,"left",e,I,function(){b.trigger("jsp-user-scroll-x",[-a,r,i])}):(K.css("left",e),I(e),b.trigger("jsp-user-scroll-x",[-a,r,i]))))}function I(e){void 0===e&&(e=K.position().left),B.scrollTop(0);var t,n=0===(Z=e||0),r=Z==X,i=-(e/X)*(q-U);s==n&&l==r||(s=n,l=r,b.trigger("jsp-arrow-change",[a,o,s,l])),t=n,e=r,$.showArrows&&(ue[t?"addClass":"removeClass"]("jspDisabled"),de[e?"addClass":"removeClass"]("jspDisabled")),O.css("left",i),b.trigger("jsp-scroll-x",[-i,n,r]).trigger("scroll")}function _(e,t){A(e/(H-N)*Q,t)}function R(e,t){D(e/(q-U)*X,t)}function F(e,t,n){var r,i,a,s,o,l,c=0,u=0;try{r=ye(e)}catch(e){return}for(s=r.outerHeight(),i=r.outerWidth(),B.scrollTop(0),B.scrollLeft(0);!r.is(".jspPane");)if(c+=r.position().top,u+=r.position().left,r=r.offsetParent(),/^body|html$/i.test(r[0].nodeName))return;e=(a=E())+N,c<a||t?o=c-$.horizontalGutter:e<c+s&&(o=c-N+s+$.horizontalGutter),isNaN(o)||_(o,n),o=(s=P())+U,u<s||t?l=u-$.horizontalGutter:o<u+i&&(l=u-U+i+$.horizontalGutter),isNaN(l)||R(l,n)}function P(){return-O.position().left}function E(){return-O.position().top}function L(){return!1}var $,O,U,N,B,q,H,z,V,W,J,Y,Q,G,K,X,Z,ee,te,t,ne,re,ie,ae,se,oe,le,ce,ue,de,fe,pe,he,ge=this,a=!0,s=!0,o=!1,l=!1,n=b.clone(!1,!1).empty(),me=ye.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",ve="border-box"===b.css("box-sizing")?pe=0:(pe=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0));ye.extend(ge,{reinitialise:function(e){w(e=ye.extend({},$,e))},scrollToElement:function(e,t,n){F(e,t,n)},scrollTo:function(e,t,n){R(e,n),_(t,n)},scrollToX:function(e,t){R(e,t)},scrollToY:function(e,t){_(e,t)},scrollToPercentX:function(e,t){R(e*(q-U),t)},scrollToPercentY:function(e,t){_(e*(H-N),t)},scrollBy:function(e,t,n){ge.scrollByX(e,n),ge.scrollByY(t,n)},scrollByX:function(e,t){D((P()+Math[e<0?"floor":"ceil"](e))/(q-U)*X,t)},scrollByY:function(e,t){A((E()+Math[e<0?"floor":"ceil"](e))/(H-N)*Q,t)},positionDragX:function(e,t){D(e,t)},positionDragY:function(e,t){A(e,t)},animate:function(e,t,n,r,i){var a={};a[t]=n,e.animate(a,{duration:$.animateDuration,easing:$.animateEase,queue:!1,step:r,complete:i})},getContentPositionX:P,getContentPositionY:E,getContentWidth:function(){return q},getContentHeight:function(){return H},getPercentScrolledX:function(){return P()/(q-U)},getPercentScrolledY:function(){return E()/(H-N)},getIsScrollableH:function(){return J},getIsScrollableV:function(){return W},getContentPane:function(){return O},scrollToBottom:function(e){A(Q,e)},hijackInternalLinks:ye.noop,destroy:function(){var e,t;e=E(),t=P(),b.removeClass("jspScrollable").unbind(".jsp"),O.unbind(".jsp"),b.replaceWith(n.append(O.children())),n.scrollTop(e),n.scrollLeft(t),fe&&clearInterval(fe)}}),w(e)}return n=ye.extend({},ye.fn.jScrollPane.defaults,n),ye.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=ye(this),t=e.data("jsp");t?t.reinitialise(n):(ye("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new r(e,n),e.data("jsp",t))})},ye.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(u){var d,f,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],p=Array.prototype.slice;if(u.event.fixHooks)for(var n=e.length;n;)u.event.fixHooks[e[--n]]=u.event.mouseHooks;var h=u.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r;u.data(this,"mousewheel-line-height",h.getLineHeight(this)),u.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null;u.removeData(this,"mousewheel-line-height"),u.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=u(e),e=t["offsetParent"in u.fn?"offsetParent":"parent"]();return e.length||(e=u("body")),parseInt(e.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return u(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function r(e){var t,n,r=e||window.event,i=p.call(arguments,1),a=0,s=0,o=0,l=0,c=0;if((e=u.event.fix(r)).type="mousewheel","detail"in r&&(o=-1*r.detail),"wheelDelta"in r&&(o=r.wheelDelta),"wheelDeltaY"in r&&(o=r.wheelDeltaY),"wheelDeltaX"in r&&(s=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(s=-1*o,o=0),a=0===o?s:o,"deltaY"in r&&(a=o=-1*r.deltaY),"deltaX"in r&&(s=r.deltaX,0===o&&(a=-1*s)),0!==o||0!==s)return 1===r.deltaMode?(a*=t=u.data(this,"mousewheel-line-height"),o*=t,s*=t):2===r.deltaMode&&(a*=n=u.data(this,"mousewheel-page-height"),o*=n,s*=n),n=Math.max(Math.abs(o),Math.abs(s)),(!f||n<f)&&m(r,f=n)&&(f/=40),m(r,n)&&(a/=40,s/=40,o/=40),a=Math[1<=a?"floor":"ceil"](a/f),s=Math[1<=s?"floor":"ceil"](s/f),o=Math[1<=o?"floor":"ceil"](o/f),h.settings.normalizeOffset&&this.getBoundingClientRect&&(n=this.getBoundingClientRect(),l=e.clientX-n.left,c=e.clientY-n.top),e.deltaX=s,e.deltaY=o,e.deltaFactor=f,e.offsetX=l,e.offsetY=c,e.deltaMode=0,i.unshift(e,a,s,o),d&&clearTimeout(d),d=setTimeout(g,200),(u.event.dispatch||u.event.handle).apply(this,i)}function g(){f=null}function m(e,t){return h.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}u.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});var SCM=SCM||{};SCM.JqueryMigrateLogger=function(){var t,n,r=5e3,e=20,i=0;return{init:function(){var e;n=SCM.Logging.getLogger(),(t=$("[data-jquery-migrate-logging-enabled]"))&&t.length&&jQuery.migrateWarnings?(n.debug("jquery-migrate logging is enabled.  Attempting to initialize Application Insights."),(e=function(){if(!t&&!t.length)return"";var e=t.data("jqueryMigrateInstrumentationKey");return e?e.trim():""}())&&(function(e){var t="appInsightsSDK";window[t]="appInsights";t=window[t],e=window[t]||function(t){function e(t){s[t]=function(){var e=arguments;s.queue.push(function(){s[t].apply(s,e)})}}var s={config:t,initialize:!0},n=document,r=window;setTimeout(function(){var e=n.createElement("script");e.src=t.url||"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",n.getElementsByTagName("script")[0].parentNode.appendChild(e)});try{s.cookie=n.cookie}catch(t){}s.queue=[],s.version=2;for(var o=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];o.length;)e("track"+o.pop());e("startTrackPage"),e("stopTrackPage");var l,i="Track"+o[0];return e("start"+i),e("stop"+i),e("setAuthenticatedUserContext"),e("clearAuthenticatedUserContext"),e("flush"),!0===t.disableExceptionTracking||t.extensionConfig&&t.extensionConfig.ApplicationInsightsAnalytics&&!0===t.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking||(e("_"+(o="onerror")),l=r[o],r[o]=function(e,t,n,r,i){var a=l&&l(e,t,n,r,i);return!0!==a&&s["_"+o]({message:e,url:t,lineNumber:n,columnNumber:r,error:i}),a},t.autoExceptionInstrumented=!0),s}({instrumentationKey:e,disableAjaxTracking:!0});window[t]=e}(e),window.appInsights?setTimeout(a,r):n.warn("Application Insights failed to initialize."))):n.debug("jquery-migrate logging is disabled")}};function a(){jQuery.migrateWarnings&&jQuery.migrateWarnings.length&&(n.debug("Logging "+jQuery.migrateWarnings.length+" jquery-migrate warnings."),jQuery.migrateWarnings.forEach(function(e){n.debug(e),appInsights.trackEvent({name:"jquery-migrate-warning",properties:{host:window.location.hostname,url:window.location.href,warning:e}})}),jQuery.migrateReset()),++i<e&&setTimeout(a,r)}}();var SCM=SCM||{};SCM.RelatedObjectLinks=function(i){return{init:function(){i('.js-related-object[object-type="chapter"]').on("click",e)}};function e(){var t="/customerror?statuscode=404",e=i(this),n=e.attr("isbn"),r=i("#BookId").val(),e=e.attr("legacySectionId");i("div[name='"+e+"']").length?window.location.hash=e:(n=null==n?"":n.trim(),e=null==e?"":e.trim(),""!==n?i.ajax({url:"/PlatformBook/GoToRelatedObjectLink",cache:!0,dataType:"json",data:{isbn:n.toLowerCase(),legacySectionId:e.toLowerCase(),currentBookId:r}}).done(function(e){e&&e.Success?window.top.location.assign(e.RedirectURL):window.top.location.assign(t)}).fail(function(){window.top.location.assign(t)}):window.top.location.assign(t))}}(jQuery),jQuery(function(){SCM.RelatedObjectLinks.init()});var debounce=function(r,i,a){var s;return function(){var e=this,t=arguments,n=a&&!s;clearTimeout(s),s=setTimeout(function(){s=null,a||r.apply(e,t)},i),n&&r.apply(e,t)}};function updateViewportDimensions(){var e=window,t=document,n=t.documentElement,t=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||t.clientWidth,height:e.innerHeight||n.clientHeight||t.clientHeight}}var viewport=updateViewportDimensions(),SCM=SCM||{};SCM.JSUtility=function(u){return{equalHeights:function(n,r){function e(){var t,e;u(n).length&&u(window).width()>r?(t=0,(e=u(n)).attr("style",""),e.each(function(){var e=u(this).outerHeight();t<e&&(t=e)}),u(n).css("height",t)):u(n).attr("style","")}e(),u(window).resize(function(){e()})},addStateToggle:function(e,t,n){var r=u(e),i=u(t),a="active-state",s="target-active",o=u("body"),l=t.replace(/.|#/,"")+"-active",t=i.find(".close");function c(){i.removeClass(a),r.removeClass(s),n&&o.removeClass(l)}n=n||!1,r.click(function(e){e.preventDefault(),i.toggleClass(a),r.toggleClass(s),n&&o.toggleClass(l)}),o.click(function(e){u(e.target).closest(r.add(i)).length||c()}),t.click(function(){c()})},toggleVisibility:function(e,t,n){var r=u(e),i="target-active";t=t||!1,n=n||640;function a(){var e=u(this),t=u("."+e.attr("data-toggle-target"));e.toggleClass(i),t.slideToggle().toggleClass("active")}var s=debounce(function(){t?(viewport=updateViewportDimensions()).width>n?(r.off("click.toggle-visibility"),r.removeClass(i),r.each(function(){u("."+u(this).attr("data-toggle-target")).removeAttr("style").removeClass("active")})):(r.off("click.toggle-visibility"),r.on("click.toggle-visibility",a)):r.on("click.toggle-visibility",a)},150,!0);s(),t&&u(window).resize(function(){s()})},getParameterByName:function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}}}(jQuery);var SCM=SCM||{};SCM.Logging=function(){var e={debug:function(e){n()&&console.log(e)},warn:function(e){console.warn(e)},error:function(e){console.error(e)}},t=null;return{init:function(){},getLogger:function(){return e},isJsDebugEnabled:n};function n(){var e;return null!==t?t:t=(e=SCM.JSUtility.getParameterByName("JsDebug",window.location.href))&&"true"===e}}();var SCM=SCM||{};SCM.Common={getQueryStringValue:function(e,t){var n=t+"=",t=e.indexOf(n);{if(-1===t)return null;t+=n.length}t=0<=e.indexOf("&",t)?(n=e.indexOf("&",t),e.substring(t,n)):e.substring(t);return t},isDefined:function(e){return void 0!==e&&null!=e}};var SCM=SCM||{};SCM.UploadImage_Complete=function(e){var t,n=$.extend({targetSelector:"#UploadTarget",jsonResultSelector:"#jsonResult",replacementContainerSelector:"#id"},e),e=$(n.targetSelector).contents().find(n.jsonResultSelector);1===e.length&&(e=$.parseJSON(e.html()),$("[data-valmsg-for]").attr("class","field-validation-valid").html(""),e.Success?n.success&&n.success():0<e.Messages.length?(t="Error \n",e.Messages.forEach(function(e){t+=e+"\n"}),alert(t)):e.Html?$(n.replacementContainerSelector).replaceWith(e.Html.replace(/{{/g,"&quot;")):e.ValidationErrors.forEach(function(e){var t=$("[data-valmsg-for="+e.Key+"]");t.addClass("field-validation-error").removeClass("field-validation-valid"),e.Errors.forEach(function(e){t.html(t.html()+e+"<br />")})}))},SCM.AjaxHelperSuccessCallback=function(e,t,n){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?n():t.replaceWith(e)},SCM.AjaxHelperErrorCallback=function(e,t,n){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?n():t.replaceWith(e)},SCM.showModal=function(){var t=[];"undefined"!=typeof tinyMCE&&tinyMCE.editors.forEach(function(e){$("#divDefaultUpdateTarget").find("#"+e.editorContainer).each(function(){t.push(e.id)})}),$.fancybox({autosize:!0,autoScale:!1,title:"",href:"#divDefaultUpdateTarget"}),"undefined"!=typeof tinyMCE&&t.forEach(function(e){$("#"+e).scmTinyMCE()})},SCM.hideModal=function(){$.fancybox.close()},SCM.refreshModal=function(){$.fancybox.update()},function(){var a=$("body");function s(e,t){return e=0===e.indexOf("*.")?e.replace("*.",t):e}$(document).ajaxError(function(e,t,n){if(a.removeClass("wait"),t.responseText)try{var r,i=$.parseJSON(t.responseText);null==i.Success||i.Success||(r="There was an error processing the request \n",i.Messages.forEach(function(e){r+=e+"\n"}),alert(r))}catch(e){console.error("Ajax error occured, responseText is not json: "+e.message)}}),$.validator.addMethod("isDateGreaterThan",function(e,t,n){return 1!=function(e,t){t=new Date(t),e=new Date(e);{if(t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate())return!1;if(e<t)return!0}return!1}($(t).val(),n)},""),$(document).ajaxStart(function(){a.addClass("wait")}).ajaxStop(function(){a.removeClass("wait")}),a.on("keypress","[data-default-button]",function(e){if(13==e.which)return $("#"+$(this).data("defaultButton")).click(),!1}),$.validator.unobtrusive.adapters.add("dynamicrange",["minvalueproperty","maxvalueproperty"],function(e){e.rules.dynamicrange=e.params,null!=e.message&&($.validator.messages.dynamicrange=e.message)}),$.validator.addMethod("dynamicrange",function(e,t,n){var r=(i=t.name).substr(0,i.lastIndexOf(".")+1),i=parseInt($('input[name="'+s(n.minvalueproperty,r)+'"]').val(),10),r=parseInt($('input[name="'+s(n.maxvalueproperty,r)+'"]').val(),10),e=parseInt(e,10);return!(isNaN(i)||isNaN(r)||isNaN(e)||e<i||r<e)||($.validator.messages.dynamicrange=$.format($(t).attr("data-val-dynamicrange"),i,r),!1)},"")}(),function(s){s.fn.radiobuttonEnable=function(){return this.each(function(){var r=s(this);r.find("*[data-rb-enable-name]").each(function(){var e,t=s(this),n=r.find('input:radio[name="'+t.data("rbEnableName")+'"]:checked');0<n.length&&(null!=(e=t.data("rbEnableValue"))&&n.val().toString().toLowerCase()!=e.toString().toLowerCase()&&t.prop("disabled",!0),null!=(e=t.data("rbMakeVisibleValue"))&&n.val().toString().toLowerCase()!=e.toString().toLowerCase()&&t.hide())}),r.find("input:radio").on("change",function(){var r=s(this),e='[data-rb-enable-name="'+r.attr("name")+'"]';s(e).each(function(){var e=s(this),t=tinymce.editors[e[0].id],n=e.data("rbEnableValue");null!=n&&(n.toString().toLowerCase()==r.val().toLowerCase()?(e.prop("disabled",!1),t&&t.getBody().setAttribute("contenteditable",!0)):(e.prop("disabled",!0),t&&t.getBody().setAttribute("contenteditable",!1))),null!=(n=e.data("rbMakeVisibleValue"))&&(n.toString().toLowerCase()==r.val().toLowerCase()&&!e.is(":visible")||n.toString().toLowerCase()!=r.val().toLowerCase()&&e.is(":visible"))&&e.fadeToggle()})})})},s.fn.configureSCMForm=function(e){var n=s.extend({cancelButtonSelector:".cancel",submitButtonSelector:".submit",nextQuestionButtonSelector:".nextQuestion",skipButtonSelector:".skip",validatorIgnores:":disabled, input[type='hidden']",nextQuestion:null,cancel:null,skip:null,validateOnSubmit:null,validateOnKeyUp:!1},e);return this.each(function(){var t=s(this);jQuery.validator.unobtrusive.parse("#"+this.id),t.validate();var e=s.data(t[0],"validator").settings;e.ignore=n.validatorIgnores,!0===n.validateOnKeyUp&&(n.validateOnKeyUp=null),e.onkeyup=n.validateOnKeyUp,e.onsubmit=n.validateOnSubmit,t.find(n.submitButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),t.valid()&&t.trigger("submit")}),t.find(n.nextQuestionButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.nextQuestion()}),t.find(n.skipButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.skip()}),t.find(n.cancelButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),n.cancel?n.cancel():(t.hide(),SCM.hideModal())})})},s.fn.viewMore=function(e){var n=s.extend({hiddenSelector:".read-more",readMoreButtonSelector:"#readMore",readMoreText:"Read More",readLessText:"Read Less"},e);return this.each(function(){var t=s(n.hiddenSelector);t.hide(),s(n.readMoreButtonSelector).on("click",function(e){e.preventDefault(),t.fadeToggle()})})},s.fn.scmTinyMCE=function(){return s(".mceOpen.mce_forecolor").show(),s(".mce_forecolor .mceLast .mceIconOnly").show(),s(".mceOpen.mce_backcolor").show(),s(".mceOpen.mce_backcolor .mceIconOnly").show(),this.each(function(){s(this).tinymce({gecko_spellcheck:!0,theme:"advanced",theme_advanced_buttons1:"bold,italic,underline,|,bullist,numlist,|,sub,sup,|,charmap,|,forecolor,backcolor,|,link",theme_advanced_buttons2:"",theme_advanced_buttons3:"",plugins:"inlinepopups",theme_advanced_statusbar_location:null,oninit:function(e){var t=s("#"+e.editorId+"[data-rb-enable-name]"),e=s('input:radio[name="'+t.data("rbEnableName")+'"]');0<e.length&&e.val().toString().toLowerCase()!=t.data("rbEnableValue").toString().toLowerCase()&&(t.prop("disabled",!0),(t=tinymce.editors[t[0].id])&&t.getBody().setAttribute("contenteditable",!1))}})})},s.fn.scmTimer=function(t){return this.each(function(){var e,n,r,i=s(this),a=s.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);a.stop?clearInterval(i.data("scmTimerToken")):(e=function(e){return e=e<10?"0"+e:e},n=(new Date).getTime(),(r=function(){i.text(e(a.h)+":"+e(a.m)+":"+e(a.s)+":"+e(a.hs))})(),i.data("scmTimerToken",setInterval(function(){var e,t;i.is(":visible")?(t=(e=(new Date).getTime())-n,a.hs+=Math.floor(t/10),n=e,100<=a.hs&&(a.s+=Math.floor(a.hs/100),a.hs=a.hs%100,60<=a.s&&(a.m+=Math.floor(a.s/60),a.s=a.s%60),60<=a.m&&(a.h+=Math.floor(a.m/60),a.m=a.m%60)),r(),a.intervalCheck&&(a.intervalCheck(a)||clearInterval(i.data("scmTimerToken")))):clearInterval(i.data("scmTimerToken"))},a.milliseconds)))})},s.fn.wkTimer=function(t){return this.each(function(){var e,n,r,i=s(this),a=s.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);a.stop?clearInterval(i.data("wkTimerToken")):(e=function(e){return e=e<10?"0"+e:e},n=(new Date).getTime(),(r=function(){i.text(e(a.m)+":"+e(a.s))})(),i.data("wkTimerToken",setInterval(function(){var e,t;i.is(":visible")?(t=(e=(new Date).getTime())-n,a.hs+=Math.floor(t/10),n=e,100<=a.hs&&(a.s+=Math.floor(a.hs/100),a.hs=a.hs%100,60<=a.s&&(a.m+=Math.floor(a.s/60),a.s=a.s%60),60<=a.m&&(a.h+=Math.floor(a.m/60),a.m=a.m%60)),r(),a.intervalCheck&&(a.intervalCheck(a)||clearInterval(i.data("wkTimerToken")))):clearInterval(i.data("wkTimerToken"))},a.milliseconds)))})}}(jQuery);var SCM=SCM||{};SCM.__namespace=!0,SCM.eventManager=function(a){function n(e,t){a.pubsub("publish",e,t)}function s(n,r){return e(i,function(e,t){n===t.actionEnum&&r(t)})}function r(n,r){return e(o,function(e,t){n===t.actionEnum&&r(t.data)})}var e=function(e,t){return a.pubsub("subscribe",e,t)},i="actionCompleted",o="actionCompleteactionRequest";return{subscribeWidgetRefresh:function(e,t){var r=a.extend({refreshWhenInvisible:!1,messageContainerSelector:"#divMessage"},t),i="",i=s(e,function(t){var n;r.refreshIf&&!r.refreshIf(t)||(n=a(r.containerSelector),(r.refreshWhenInvisible||n.is(":visible"))&&a.ajax({type:"POST",url:r.url,data:r.data,dataType:"html",success:function(e){a.pubsub("unsubscribe",i),n.replaceWith(e).show(),r.refreshSuccess&&r.refreshSuccess(t)}}))})},subscribe:e,publish:n,publishActionCompleted:function(e,t){t=a.extend({actionEnum:e},t);n(i,t)},subscribeActionCompleted:s,publishActionRequest:function(e,t){return n(o,{actionEnum:e,data:t})},subscribeActionRequest:r,subscribeActionRequestDisplayResult:function(e,t){return r(e,function(e){e=a.extend({type:"POST"},e);a.ajax({type:e.type,url:e.url,data:e.data,dataType:"html",success:function(e){a(t).html(e).show()},error:function(e){alert(e)}}),SCM.hideModal()})}}}(jQuery),SCM.eventManager.subscriptionMessages={playVideo:"SCM.PlayVideo"};var SCM=SCM||{};!function(e,t){var r={},i=r.hasOwnProperty;e.subscribe=function(e,t){i.call(r,e)||(r[e]=[]);var n=r[e].push(t)-1;return{remove:function(){delete r[e][n]}}},e.publish=function(e,n){i.call(r,e)&&t.each(r[e],function(e,t){t(void 0!==n?n:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var SCM=SCM||{};SCM.AdvancedSearch={},SCM.AdvancedSearch.configSettings={preSelectSingleBookFacet:"true"};var textCharectorLimit=$("#hfSolrMaxAllowSearchChar").val(),UrlStripTrailingCharactersPattern="^.*[/\\\\]$";function AppendSubscriptionParameterToUrl(e){var t=e,n=!1;return t=(n=$("#hfEnableSubscriptionFilter").length?"true"==$("#hfEnableSubscriptionFilter").val().toLowerCase():n)?e+"&subonly=true":t}function StripTrailingCharacters(e,t){for(var n=new RegExp(t);n.test(e);)e=e.substring(0,e.length-1);return e}function isValidDate(e){var t=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(e);if(null==t)return!1;var n=t[2],r=t[1]-1,e=t[3],t=new Date(e,r,n);return t.getDate()==n&&t.getMonth()==r&&t.getFullYear()==e}function isYearOnly(e){e=/^(\d{4})$/.exec(e);return e&&-1<e[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),r=null,i=null,i=t?r="01":(r="12","31");return e.val(r+"/"+i+"/"+n),e.val()}function restoreQbData(){if(sessionStorage){var e=sessionStorage.getItem("querybuilder_html");if(!e)return null;e=JSON.parse(e);$("#queryBuilder").html(e)}}Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()},null!=textCharectorLimit&&""!=textCharectorLimit||(textCharectorLimit="255");var micrositeJournalDisplayName="",micrositeJournalId="",solrsearchScope=$("#hfSolrJournalID").val(),solrBookSearchScope=$("#hfSolrBookID").val();function GetQueryStringCharacter(e){return e.includes("?")?"&":"?"}function AddQueryStringParams(e){$(".access-filter-input-radio[value=contentowned]").is(":checked")&&(e=e+GetQueryStringCharacter(e)+"access_openaccess=true&access_free=true&access_unlocked=true");var t="";return $("#advancedSearch .advanced-search-content-type:checked").each(function(){this.checked&&(t?0<t.length&&(t+=" OR "+$(this).attr("value")):t=$(this).attr("value"))}),e=t?e+GetQueryStringCharacter(e)+"fl_ContentType="+t:e}void 0===solrsearchScope?solrsearchScope="":null!=solrsearchScope&&(solrsearchScope=solrsearchScope.replace("J","")),void 0===solrBookSearchScope?solrBookSearchScope="":null!=solrBookSearchScope&&(solrBookSearchScope=solrBookSearchScope.replace("B","")),$(document).ready(function(){function t(e){var t,n;null==e||""==e?alert("Please enter a term to search"):e.length>parseInt(textCharectorLimit)?alert("Please enter a term between 1 to "+textCharectorLimit+" characters"):(t='"'+e+'"',e=n="",solrsearchScope&&(e="&fl_JournalID="+micrositeJournalId+"&f_JournalDisplayName="+encodeURIComponent($.trim(micrositeJournalDisplayName))),n="/search-results?q="+encodeURIComponent(t)+"&fd_ArticleTitle="+encodeURIComponent(t),n=AppendSubscriptionParameterToUrl(n+=""!=e?e:"&allJournals=1"),e=StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern),window.location.href=window.location.protocol+"//"+e+n+"&searchType=advanced")}function n(){var e,t="1",n=null,r=null,i=[],a=[],s=[],o={},l=null,c=null,u=null,d=null,f=!1,p=!1,h=$("#advancedSearchQueryTerm").val();if((p=$("#queryBuilder").length)||null!=h&&""!=h)if(!p&&h.length>parseInt(textCharectorLimit))alert("Please enter a term between 1 to "+textCharectorLimit+" characters.");else{switch(o.q=h,$("#advancedSearch input.anyAllExact[type=radio]").each(function(){this.checked&&(t=$(this).attr("id"))}),e='"'+h+'"',t){case"1":o.hd="advancedAny",l=h;break;case"2":o.hd="advancedAll",l=h;break;case"3":l=e}o.q=encodeURIComponent($.trim(l));var p=$("#advancedSearch #authorName").val();if(null!=p&&""!=p&&(o.author=p),null!=(n=$("#startDateSemanticSearch").val())&&""!=n&&"mm/dd/yyyy"!=n){if(isYearOnly(n))n=updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0);else if(!isValidDate(n))return void alert("please enter valid start date");if(""===$("#endDateSemanticSearch").val())$("#endDateSemanticSearch").val((new Date).today()),r=$("#endDateSemanticSearch").val();else if(isYearOnly(r=$("#endDateSemanticSearch").val()))r=updateYearOnlyToFullDate($("#endDateSemanticSearch"),!1);else if(!isValidDate(r)||new Date(r)<new Date(n))return void alert("please enter valid end date");o.rg_PublicationDate=n+" TO "+r}$("#advancedSearch input.rbPublication[type=radio]").each(function(){this.checked&&(f="J*"==$(this).attr("value"),$(this).attr("value"))}),$("#advancedSearch .advancedSearchJournal:checked").each(function(){f=!0,u=$(this).attr("currentjournaldisplayname"),c=$(this).attr("text"),s.push($(this).attr("value")),i.push($(this).attr("jid"))}),$("#advancedSearch .advancedSearchBook:checked").each(function(){d=$(this).attr("text"),a.push($(this).attr("bid"))}),p=o,n=function(){var r=[];$("#js_qb_groups .js_qb_group").each(function(){var n={},e=$(this);e.children(".row").children(".js_qb_data").each(function(){var e=$(this),t=e.attr("data-qb-json-element");n[t]=e.val()});var t=[];e.find(".js_qb_term").each(function(){var n={};$(this).find(".js_qb_data").each(function(){var e=$(this),t=e.attr("data-qb-json-element");n[t]="exactMatch"===t?e.is(":checked"):e.val()}),n.input&&n.input.length&&t.push(n)}),t.length&&(t[0].condition&&delete t[0].condition,n.terms=t,r.push(n))}),!Object.keys(r).length||r[0].condition&&delete r[0].condition;return r}(),function(){var e,t;sessionStorage&&(e=$("#queryBuilder").length,t=$("#queryBuilder").html(),e&&t.length&&sessionStorage.setItem("querybuilder_html",JSON.stringify(t)))}(),Object.keys(n).length&&(p.cqb=JSON.stringify(n));r="/search-results?"+$.param(o);f&&(g=s.join(" OR "),p=i.join(" OR "),r+="&restypeid=3",1==s.length?(n=encodeURIComponent($.trim(c)),journalQuery=c==u?"&fl_JournalID="+p+"&f_JournalDisplayName="+n:"&fl_JournalID="+p+"&f_JournalDisplayName="+encodeURIComponent($.trim(u))+"&fd_LegacyJournalDisplayName="+n,r+=journalQuery):1<s.length?r+="&fl_JournalHistID="+g:0==s.length&&(r+="&allJournals=1")),null!=solrBookSearchScope&&""!=solrBookSearchScope&&!f&&(r+=m(a,d));var r=AddQueryStringParams(r=AppendSubscriptionParameterToUrl(r)),g=StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern);window.location.href=window.location.protocol+"//"+g+r+"&searchType=advanced"}else alert("Please enter a term to search")}function r(){var e=null,t=null,n=null,r=[],i=[],a=[],s={},o=null,l=null,c=null,u=!1,d=!1;if(null!=(n=$("#advancedAuthorSearchQueryTerm").val())&&""!=n)if(n.length>parseInt(textCharectorLimit))alert("Please enter a term between 1 to "+textCharectorLimit+" characters.");else{if(s.author=encodeURIComponent($.trim(n)),s.q=encodeURIComponent($.trim(n)),null!=(e=$("#startDateAuthor").val())&&""!=e&&"mm/dd/yyyy"!=e){if(!isValidDate(e=isYearOnly(e)?updateYearOnlyToFullDate($("#startDateAuthor"),!0):e))return void alert("please enter valid start date");if(""===$("#endDateAuthor").val()?($("#endDateAuthor").val((new Date).today()),t=$("#endDateAuthor").val()):isYearOnly(t=$("#endDateAuthor").val())&&(t=updateYearOnlyToFullDate($("#endDateAuthor"),!1)),!isValidDate(t)||new Date(t)<new Date(e))return void alert("please enter valid end date");s.rg_PublicationDate=e+" TO "+t}$(".advancedAuthorSearch input.rbPublication[type=radio]").each(function(){this.checked&&(d="J*"==$(this).attr("value"),u="B*"==$(this).attr("value"))}),$(".advancedAuthorSearch .advancedSearchJournal:checked").each(function(){d=!0,l=$(this).attr("currentjournaldisplayname"),o=$(this).attr("text"),a.push($(this).attr("value")),r.push($(this).attr("jid"))}),$("#advancedSearch #chkAdvancedSearchBook:checked").each(function(){u=!0,c=$(this).attr("text"),i.push($(this).attr("bid"))});e="/search-results?"+$.param(s);d&&(f=a.join(" OR "),t=r.join(" OR "),e+="&restypeid=3",1==a.length?(s=encodeURIComponent($.trim(o)),journalQuery=o==l?"&fl_JournalID="+t+"&f_JournalDisplayName="+s:"&fl_JournalID="+t+"&f_JournalDisplayName="+encodeURIComponent($.trim(l))+"&fd_LegacyJournalDisplayName="+s,e+=journalQuery):1<a.length?e+="&fl_JournalHistID="+f:0==a.length&&(e+="&allJournals=1")),u&&(e+=m(i,c));var e=AppendSubscriptionParameterToUrl(e),f=StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern);window.location.href=window.location.protocol+"//"+f+e+"&searchType=advanced"}else alert("Please enter a term to search")}function i(){var e,t=$("#Doi").val().trim();null!=(e=$("#Doi").val().trim())&&""!=e?$.ajax({type:"POST",url:"/Solr/DoiSearch/search",data:{doi:t},success:function(e){0==e&&alert("Invalid DOI. Please enter a valid DOI")},error:function(){alert("There was a problem with your request. Please try again later")}}):alert("Please enter a Doi to search")}function m(e,t){var n="&restypeid=1",r=e.join(" OR ");return"true"==SCM.AdvancedSearch.configSettings.preSelectSingleBookFacet&&1===e.length?n=n+"&f_BookDisplayName="+encodeURIComponent($.trim(t))+"&fl_BookID="+r:0<e.length?n=n+"&fl_BookID="+r:0===e.length&&(n+="&allBooks=1"),n}null==solrBookSearchScope||""==solrBookSearchScope?($("#advancedSearch input.advancedSearchBook[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$(".advancedAuthorSearch input.advancedSearchBook[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$("input.rbPublication[type=radio]").each(function(){"B*"==$(this).attr("value")?$(this).prop("checked",!1):$(this).prop("checked",!0)})):($("#advancedSearch input.advancedSearchJournal[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$(".advancedAuthorSearch input.advancedSearchJournal[type=checkbox]").each(function(){$(this).prop("checked",!1),$(this).prop("disabled",!0)}),$("input.rbPublication[type=radio]").each(function(){"J*"==$(this).attr("value")?$(this).prop("checked",!1):$(this).prop("checked",!0)})),(null!=solrsearchScope&&""!=solrsearchScope||null!=solrBookSearchScope&&""!=solrBookSearchScope)&&($(".advancedAuthorSearch input:checkbox").each(function(){var e=$(this).attr("currentjournaldisplayname"),t=$(this).attr("text"),n=$(this).attr("jid"),r=$(this).attr("bid");if(null!=e&null!=t&&e==t){if(n==solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=t,micrositeJournalId=n,!1}else null!=r&&""!=r&&(r!=solrBookSearchScope&&"*"!==solrBookSearchScope||(this.checked=!0))}),$("#advancedSearch input:checkbox").each(function(){var e=$(this).attr("currentjournaldisplayname"),t=$(this).attr("text"),n=$(this).attr("jid"),r=$(this).attr("bid");if(null!=e&null!=t&&e==t){if(n==solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=t,micrositeJournalId=n,!1}else null!=r&&""!=r&&(r!=solrBookSearchScope&&"*"!==solrBookSearchScope||(this.checked=!0))}),$(".citationJournal").each(function(){$("option",this).each(function(){var e=$(this).val().split(",");null!=e&&"C"==e[0]&&e[1]==solrsearchScope&&$(this).prop("selected",!0)})})),$("#btnAdvancedTitleSearch").click(function(){t($("#articleTitle").val())}),$("#articleTitle").keydown(function(e){13==e.keyCode&&t($("#articleTitle").val())}),$("#btnAdvancedCitationSearch").click(function(){!function(){var e=$("#citationYear").val(),t=$("#citationVolume").val(),n=$("#citationVolume").attr("pattern"),r=$("#citationPage").val(),i=$(".citationJournal").val(),a=$(".citationJournal option:selected").text(),s=!1,o="";$("#citationIssueNo").length&&(o=$("#citationIssueNo").val());var l={},c=null!=i&&""!=i&&"- Select a Journal"!=i?"":"Please select a journal.\n";null!=e&&""!=e&&"Yr"!=e&&(isNaN(e)?c+="Year must be numeric.\n":l.rg_PublicationDate="01/01/"+e+" TO 12/31/"+e),null!=t&&""!=t&&"Vol"!=t&&(new RegExp(n).test(t)?l.fd_Volume=t:c+="Volume must be alphanumeric without spaces"),null!==o&&""!==o&&"Issue"!==o&&(l.fd_IssueNo=o),""!=r&&"1st Pg"!=r&&(l.fd_StartPage=r),0<c.length?alert(c):("C"==(i=i.split(","))[0]?(l.fl_JournalID=i[1],s=!0):l.fl_JournalHistID=i[2],l="/search-results?"+$.param(l),l+=s?"&f_JournalDisplayName="+encodeURIComponent($.trim(a)):"&fd_LegacyJournalDisplayName="+encodeURIComponent($.trim(a)),a=StripTrailingCharacters($("#hfSiteURL").val(),UrlStripTrailingCharactersPattern),window.location.href=window.location.protocol+"//"+a+l+"&searchType=advanced")}()}),$("#btnAdvancedCitationSearch").keyup(function(e){13==e.keyCode&&(e.preventDefault(),doAdvancedCitationSerach())}),$("#advancedSearchQueryTerm").keydown(function(e){13==e.keyCode&&n()}),$(document).on("click","#btnAdvancedSearch, #btnAdvancedSearchTop",function(){n()}),$(document).on("click","#btnAdvancedAuthorSearch, #btnAdvancedAuthorSearchTop",function(){r()}),$("#advancedAuthorSearchQueryTerm").keydown(function(e){13==e.keyCode&&r()}),$("#Doi").on("keydown",function(e){13==e.keyCode&&i()}),$("#btnDoiSearch").on("click",function(){i()});function e(){var e=$("#js_qb_term_template").html();$(this).siblings(".js_qb_terms_list").append(e)}var a,s;function u(e,t){t=new RegExp("[?&]"+e+"=([^&#]*)").exec(t);return t&&1<t.length?decodeURI(t[1].toString()):""}$(document).on("click",".js_qb_add_group",function(){var e=$("#js_qb_group_template").html();$("#js_qb_groups").append(e)}),$(document).on("click","#btnAdvancedSearchReset",function(){sessionStorage.removeItem("querybuilder_html"),0<=window.location.href.indexOf("?")?window.location.href=window.location.href.split("?")[0]:window.location.reload()}),$(document).on("click",".js_qb_add_term",e),(s=window.location.href.split("?")[1]||"")&&(function(e){e=u("cqb",e);if(e){for(var t=JSON.parse(e),n=Object.keys(t).length-1,r=0;r<n;r++)$(".js_qb_add_group").click();for(r=0;r<Object.keys(t).length;r++){var i=t[r],a=$("#js_qb_groups .js_qb_group").eq(r);i.condition&&a.find('select[data-qb-json-element="condition"]').val(i.condition);for(var s=i.terms.length-2,o=0;o<s;o++)a.find(".js_qb_add_term").click();for(o=0;o<i.terms.length;o++){var l=i.terms[o],c=a.find(".js_qb_term").eq(o);l.condition&&c.find('select[data-qb-json-element="condition"]').val(l.condition),c.find('select[data-qb-json-element="filter"]').val(l.filter),c.find('input[data-qb-json-element="input"]').val(l.input),l.exactMatch&&c.find('input[data-qb-json-element="exactMatch"]').click()}}}else restoreQbData()}(s=decodeURIComponent(s.replace(/\+/g," "))),function(e){e=u("rg_PublicationDate",e);e&&(e=e.split(/\sTO\s/),$("#startDateSemanticSearch").val(e[0]),$("#endDateSemanticSearch").val(e[1]))}(s),(s=u("f_JournalDisplayName",a=s))?function(e){e&&$('.advancedSearchJournal[currentjournaldisplayname="'+e+'"]').click()}(s):(function(e){e=u("fl_JournalID",e);e&&$('.advancedSearchJournal[jid="'+e+'"]').click()}(a),function(e){e=u("fl_JournalHistID",e);e&&e.split(/\sOR\s/).forEach(function(e){$('.advancedSearchJournal[value="'+e+'"]').click()})}(a))),$(document).on("click",".toggle-expanded",function(){$(this).parents(".search-module").toggleClass("collapsed").toggleClass("expanded")})}),$(function(){try{$("#startDateSemanticSearch").on("keydown",function(e){if(13==e.which&&isYearOnly($("#startDateSemanticSearch").val()))return updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1}),$("#endDateSemanticSearch").on("keydown",function(e){if(13==e.which&&isYearOnly($("#endDateSemanticSearch").val()))return updateYearOnlyToFullDate($("#endDateSemanticSearch"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1}),$("#startDateAuthor").on("keydown",function(e){if(13==e.which&&isYearOnly($("#startDateAuthor").val()))return updateYearOnlyToFullDate($("#startDateAuthor"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1}),$("#endDateAuthor").on("keydown",function(e){if(13==e.which&&isYearOnly($("#endDateAuthor").val()))return updateYearOnlyToFullDate($("#endDateAuthor"),!0),e.preventDefault(),e.stopImmediatePropagation(),!1})}catch(e){}});var SCM=SCM||{};!function(pdf,$){function formatIssuePurchaseLink(e,t){var n=e;return 0<=e.toLowerCase().indexOf("resourceid=")&&(n=e.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+t)),n}function logErrors(jqXHR,textStatus,errorThrown){var err;window.console&&(err=eval("("+jqXHR.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}function openPDF(e){window.location.href=e}function openNoAccessModalArticle(e,t){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url");t="/article.aspx?articleid="+t+"#purchaseSubscriptionBox";pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",t),SCM.Utilities.Reveal.open(pdf.$noAccessModal)}function openNoAccessModalArticleSeo(e,t,n){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url"),"DO_NOT_USE"===n?pdf.$noAccessModal.find("#articleLinkToPurchase").remove():(n=n,pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",n)),SCM.Utilities.Reveal.open(pdf.$noAccessModal)}pdf.$noAccessModal=$("#noAccessReveal"),pdf.checkArticlePDFAccess=function(t){var n=t.attr("data-article-id"),r=t.attr("data-article-url"),e=t.attr("data-ajax-url"),i=$("#hfSiteURL"),a="";null!==t.attr("data-article-seo-url")&&(a=t.attr("data-article-seo-url")),void 0!==i&&void 0!==i.val()&&""!==i&&(e="//"+i.val()+e);i={};i.aId=n,$.ajax({type:"POST",url:e,data:i,traditional:!0,success:function(e){e.Success?openPDF(r):0<a.length?openNoAccessModalArticleSeo(t,n,a):openNoAccessModalArticle(t,n)},error:function(e,t,n){logErrors(e,t,n)}})},pdf.checkIssuePDFAccess=function(r){var e,t;r.length&&(e=r.attr("data-issue-id"),t=r.attr("data-ajax-issue-url"),$.ajax({type:"POST",url:t,data:{issueId:e},traditional:!0,global:!1,success:function(e){e.Success?r.show():r.hide()},error:function(e,t,n){r.hide()}}))},pdf.ipCountryAccessCheck=function(e){e.length&&e.off().on("click",function(t){t.preventDefault();var e=$(this).data("resourceid"),n=$(this).data("resourcetypeid");SCM.Ajax.post("/Pdf/PdfByIpCountry/ipCountryCheck",{resourceId:e,resourceTypeId:n}).expectJson().then(function(e){e.Success?($(t.currentTarget).unbind("click"),t.currentTarget.click()):(pdf.$noAccessModal.find("#noAccessForm").html(e.Messages[0]),SCM.Utilities.Reveal.open(pdf.$noAccessModal))}).catch(function(e){console.error("Failed to check IP Country based access: "+e)})})},pdf.bindUiEvents=function(){$(document).on("click",".al-link.pdfaccess",function(){SCM.Utilities.Reveal.close(pdf.$noAccessModal),pdf.$noAccessModal.find("#articleLinkToPurchase").show(),pdf.$noAccessModal.find(".issue-purchase-modal").hide(),$(this).attr("data-reveal-id")||pdf.checkArticlePDFAccess($(this))}),pdf.checkIssuePDFAccess($(".js-issue-pdfLink")),pdf.ipCountryAccessCheck($(".js-pdfByIpCountry"))},pdf.init=function(){pdf.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);var SCM=SCM||{};SCM.ArticleListResources=SCM.ArticleListResources||{},SCM.ArticleListResources.registerSnippetViewMore=function(){$(document).on("click",".al-article-snippet-view-more",function(){$(this).parent(".al-article-snippet").toggleClass("collapsed expanded")})},SCM.ArticleListResources.getArticleDetails=function(){$(document).ready(function(){var e,t="";$(".al-article-items[data-article-id]").has(".Locked").each(function(){0<t.length&&(t+=","),t+=$(this).attr("data-article-id")});0<t.length&&(e=$(".article-list-resources").first().attr("data-journalIds"),$.post("/Article/ArticleListResourcesDetails",{journalIds:e,accessCheckArticleIds:t},function(e){for(var t in e)$('.al-article-items[data-article-id="'+t+'"]').find(".article-accessType").removeClass("Locked").addClass(e[t])},"json"))})},SCM.ArticleListResources.registerSnippetViewMore(),SCM.ArticleListResources.getArticleDetails();var SCM=SCM||{},$body=$("body"),$printableModal=$(".js-printable-metrics-modal");SCM.ContentMetric=function(ns){function fullVersion($dest,routeUrl){var ctHtmlLabels,baseSiteUrl;$dest.find(".widget-ContentLevelMetrics").length<1&&(ctHtmlLabels=function(e){return function(e){e.on("draw",function(e){"label"===e.type&&((e=e.element._node.childNodes[0]).innerHTML=e.innerText)})}},baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){e=updateAltmetricPropsForBooksAndArticles(e),$dest.prepend(e),$(window).on("beforeprint",function(){var e=$(".js-metric-modal-contents:has(.js-metric-full-wrap):first");e.length&&cloneMetricsModalForPrint(e)}),setTimeout(function(){var e,t;void 0!==window.ChartistData&&(e={lineSmooth:!1,showArea:!0,low:0,plugins:[ctHtmlLabels()]},t=[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}},plugins:[ctHtmlLabels()]}]],createChart(".ct-chart",window.ChartistData.data,e,t))},200),reloadDimensionsBadge()},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}))}function reloadDimensionsBadge(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges())}function limitLabels(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),r=1;e.not(":eq(0)").each(function(){r%n!=0&&$(this).hide(),r++})}function createChart(e,t,n,r){var r=new Chartist.Line(e,t,n,r),i=0;r.on("created",function(){i=0,limitLabels()}),r.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})}function getWidgetInstanceName(e){var t="",n=$(e).attr("class"),e=n.indexOf("widget-instance-");return t=0<=e?n.substr(e).split("-")[2]:t}function triggerModal(e,t,n){var r=$(".content-main .contentmet-dimensions").length?"true":"false",i="/ThirdParty/ContentLevelMetricsDetails",a=getWidgetInstanceName(".widget-ContentLevelMetrics");0<a.length&&(i+="/"+a),fullVersion(e,i+="?resourceId="+t+"&resourceType="+n+"&showDimensionsBadge="+r),e.closest(".artmet-modal").css({display:"block",opacity:1}),$body.addClass("metrics-modal-open"),$printableModal.addClass("metrics-modal-open")}function closeModal(e){e.closest(".artmet-modal").attr("style",""),$body.removeClass("metrics-modal-open"),$printableModal.removeClass("metrics-modal-open")}function eventsToClose(t){$(".content-main .js-contentmet-close-modal").on("click",function(){closeModal(t)}),$(".content-main .js-contentmet-modal").on("click",function(e){$(e.target).closest(".artmet-modal-contents").length||closeModal(t)})}function registerModalClicks(){$("#Sidebar").on("click",".js-contentmet-modal-trigger, .js-contentmet-views, .js-contentmet-citations",function(){var e=$(".content-main .contentmet-modal-trigger"),t=e.attr("data-resource-id"),e=e.attr("data-resource-type");triggerModal($(".content-main .artmet-modal-contents"),t,e)})}function updateAltmetricPropsForBooksAndArticles(e){return $(".widget-BookChapterMainView").length?e:e.replaceAll('data-hide-no-mentions="true"','data-hide-no-mentions="false"')}function cloneMetricsModalForPrint(e){var t;0==$printableModal.length&&e.length&&(t=$("<div/>",{class:"printable-metrics-modal js-printable-metrics-modal"}),e.clone().appendTo(t),0<$("body.metrics-modal-open").length&&t.addClass("metrics-modal-open"),$body.append(t),$printableModal=$(".js-printable-metrics-modal"))}function init(){$(document).ready(function(){registerModalClicks(),eventsToClose($(".content-main .artmet-modal-contents")),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})})}return{init:init,triggerModal:triggerModal,closeModal:closeModal,reloadDimensionsBadge:reloadDimensionsBadge}}(SCM.ContentMetric=SCM.ContentMetric||{});var SCM=SCM||{};SCM.BookBasicInfo=SCM.BookBasicInfo||{},SCM.BookBasicInfo.registerAbstractSnippetReadMore=function(){$(document).on("click",".js-toggle-book-abstract-snippet",function(){$(this).parents(".book-info__abstract").toggleClass("collapsed"),$(this).toggleClass("expanded"),$(this).children(".js-arrow-icon").toggleClass("icon-general_arrow-down icon-general_arrow-up")})},SCM.BookBasicInfo.registerAbstractSnippetReadMore();var SCM=SCM||{};SCM.QueryBuilder={},SCM.QueryBuilder.defaults={runSearch:function(e){window.location.hash="#"+e}},SCM.QueryBuilder.configure=function(){function n(e){var t=e,e=t.closest(".querybuilder-instance");t.hasClass("filter-citation")?(e.find(a).addClass("hide"),e.find(s).removeClass("hide")):(e.find(s).addClass("hide"),e.find(a).removeClass("hide"))}var t,e=$(".querybuilder-filter"),r=$(".querybuilder-filter-current-wrap"),i=$(".querybuilder-filter-dropdown"),a=$(".querybuilder-input-standard"),s=$(".querybuilder-input-citation"),o=$(".querybuilder-instance"),l=$(".querybuilder-add");function c(n,r){o.each(function(){var e=o.attr("id"),t=$(this).find('li[data-fieldname="Citation"]');e===n&&null!==n||(r?t.show():t.hide())})}(t=jQuery)(".querybuilder-instance").each(function(){t(this).hasClass("hide")||0}),e.each(function(){var e=t(this);e.hasClass("selected")&&(e.closest(r).find(".querybuilder-filter-label-text").text(e.text()),n(e))}),r.off("click"),r.on("click",function(e){$(".sort-order-list").addClass("hide"),e.stopPropagation();e=$(this).find(i);i.not(e).addClass("hide"),e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")}),$(document).off("click",".pg_searchresults"),$(document).on("click",".pg_searchresults",function(){i.addClass("hide")}),e.off("click"),e.on("click",function(){var e=$(this),t=e.closest(".querybuilder-filter-dropdown");$thisLabel=e.closest(r).find(".querybuilder-filter-label-text"),t.children(e).removeClass("selected"),e.addClass("selected"),$thisLabel.text(e.text()),n(e),e.hasClass("filter-citation")?c(e.closest(".querybuilder-instance").attr("id)"),!1):c(e=function(){var e=null;return o.each(function(){if(!$(this).hasClass("hide")&&!$(this).find(s).hasClass("hide"))return e=$(this).attr("id"),!1}),e}(),null===e)}),$(".js-querybuilder-input, .citation-input").on("keyup",function(){$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style"),!function(e){var t=e;if(t.hasClass("citation-input")){var n=t.find(".citation-year").val().replace(/\'/g,"").trim().length,r=t.find(".citation-volume").val().replace(/\'/g,"").trim().length,i=t.find(".citation-issue").val().replace(/\'/g,"").trim().length,e=t.find(".citation-page").val().replace(/\'/g,"").trim().length;return 0<n||0<r||0<i||0<e?!0:(0!==n||0!==r||0!==i||0!==e)&&void 0}t=t.val().replace(/\'/g,"").trim().length;return 0!==t&&(0<t||void 0)}($(this))?l.removeClass("valid").prop("disabled",!0):l.addClass("valid").prop("disabled",!1)}),l.off("click"),l.on("click",function(){var e;$(this).prop("disabled")?alert("A value must be entered before adding another filter."):(e=1,o.each(function(){$(this).hasClass("hide")||e++}),$("#qbInstance"+e).removeClass("hide"),l.removeClass("valid").prop("disabled",!0))}),$(".querybuilder-submit").off("click"),$(".querybuilder-submit").on("click",function(){$(this).removeClass("btn-green").attr("style","opacity: 0.3;")})},$(".js-main").off("click",".querybuilder-submit"),$(".js-main").on("click",".querybuilder-submit",function(){var e="",h=$("#hfCurrentSearchTerm").val(),g=$(".querybuilder-submit").attr("data-current-url"),m=new Object,v=1,y=!1;function b(e,t){var n;return 0<=t.indexOf("q=")?(n=SCM.Common.getQueryStringValue(t,"q"),t.replace(n,n+" AND "+e)):"q="+e+"&"+t}$(".querybuilder-wrap .querybuilder-instance").each(function(e){if(!$(this).hasClass("hide")){var t=$(this).find(".querybuilder-filter-dropdown li.selected").text(),n=$(this).find(".querybuilder-filter-dropdown li.selected").attr("data-fieldname"),r=!1;if(1===v){if(null==n||""===$.trim(n)){var i,a=(a=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&"));return h!==a&&(g=0<=(i=g.indexOf("q="))?(s=0<=g.indexOf("&",i)?"&":"",null!==(i=SCM.Common.getQueryStringValue(g,"q"))&&""!==i?g.replace(i="q="+i+s,"q="+a+s):"q="+a+"&"+g):"q="+a+"&"+g),m.q=a,v++,y=!0}var s=SCM.Common.getQueryStringValue(g,"q");null!==s&&""!==s&&(a=g.indexOf(s="q="+s)+s.length,s+="&"===g[a]?"&":"",g=g.replace(s,"")),r=!0}var o="";switch(t){case"":var l="q"+v;""!==(o=(o=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")))&&(g=b(o,g),m[l]=o,y=!0);break;case"All":""!==(o=(o=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")))&&(g=b(o,g),(1===v&&r||1!==v)&&(m["All"+v]=o,y=!0));break;case"Citation":var c=new Object,u="Citation"+v,d=$(this).find("#instance_CitationYear").val().trim(),f=$(this).find("#instance_CitationVolume").val().trim(),l=$(this).find("#instance_CitationIssueNo").val().trim(),p=$(this).find("#instance_CitationPage").val().trim();""===d&&""===f&&""===l&&""===p||(m[u]=c,y=!0,null!==d&&""!==d&&(c.Year=d),null!==f&&""!==f&&(c.Volume=f),null!==l&&""!==l&&(c.IssueNo=l),null!==p&&""!==p&&(c.StartPage=p));break;default:p=n+v;""!==(o=(o=$(this).find(".js-querybuilder-input").val().trim()).replace("&",encodeURIComponent("&")))&&(m[p]=o,y=!0)}}v++});var t,n=SCM.Common.getQueryStringValue(g,"page");"page=1"===g&&(g="&page=1"),e=g=null!==n&&""!==n?g.replace("page="+n+"&","page=1&"):g,y&&(t=-1!==(t=JSON.stringify(m)).indexOf("&")?encodeURIComponent(t):t,e=(n=SCM.Common.getQueryStringValue(g,"qb"))?e.replace(n,t):e+("&"===e[e.length-1]?"qb=":"&qb=")+t),SCM.QueryBuilder.defaults.runSearch(e)}),$(".js-querybuilder-input").keyup(function(e){var t=e.which;13===t&&e.preventDefault();e=$.trim($(this).val());if(13===t&&""!==e)return $(".querybuilder-submit").click(),!1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.indexOf(e,t=t||0)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;e=n.lastIndexOf(e,t);return-1!==e&&e===t});var SCM=SCM||{};!function(a,l,n){var s,c,o,u;function d(){var e;!function(){{var t;l(".tab-item").parent("li").show(),l(".tabs-content").length&&(t="",l(".tabs-content > .content").each(function(){var e=l(this);e.hasClass("active")&&(t=e.attr("id"))}),l("#ViewsDrop li").show(),l("#ViewsDrop").find('[data-tab="#'+t+'"]').closest("li").hide())}}(),(e=l(".item-with-dropdown")).show(),e.each(function(){var t=!1,n=l(this),e=n.hasClass("item-pdf")||n.hasClass("item-epub")||n.hasClass("item-mobi");n.find("ul li, .js-single-pdf-link").each(function(){var e="none"===n.css("display");!n.is(":visible")&&e||(t=!0)}),t||e||n.hide()})}function f(e,t,n){var r,i,a,s,o;!function(e,t,n){n=p(e,t,n);c.find('.js-content-filter[data-content-filter="article-content"]').hide(),n.$figuresTablesSections.length||c.find('.js-content-filter[data-content-filter="figures-tables"]').remove();n.$videoSections.length||c.find('.js-content-filter[data-content-filter="video"]').remove();n.$audioSections.length||c.find('.js-content-filter[data-content-filter="audio"]').remove();n.$supplementaryData.length||c.find('.js-content-filter[data-content-filter="supplementary-data"]').remove();n.$peerReviewSections.length||c.find('.js-content-filter[data-content-filter="peer-review"]').remove()}(e,t,n),r=e,i=t,a=n,s=l("#ContentTab").find("div.downloadImagesppt"),o=l(".article-metadata-standalone-panel"),c.children(".article-content-filter").on("click",function(){var e=p(r,i,a),t=l(this);t.hide(),t.siblings().show();var n=t.attr("data-content-filter"),t=null;"figures-tables"===n?t=e.$figuresTablesSections:"video"===n?t=e.$videoSections:"audio"===n?t=e.$audioSections:"supplementary-data"===n?t=e.$supplementaryData:"peer-review"===n&&(t=e.$peerReviewSections),t&&t.length?(e.$contentTopSections.hide(),e.$contentSections.hide(),e.$supplementaryData.hide(),e.$peerReviewSections.hide(),(n=t)&&n.each&&n.each(function(e,t){!function(e){if(e&&1===e.length&&e.show){e.show();for(var t=e.parent();t&&t.length&&!t.is("#ContentTab");)t.show(),t=t.parent()}}(l(t))}),e.$commentsSection.hide(),n=s,t.filter(".fig-section:not(:has(a[restricted]))").length?n.show():n.hide()):(e.$contentTopSections.show(),e.$contentSections.show(),1<o.length?o.show():o.hide(),e.$supplementaryData.show(),e.$peerReviewSections.show(),e.$commentsSection.show(),s.hide()),SCM.SiteJS.restrictedImages()})}function p(e,t,n){var r,i=(i=l('.widget-items[data-widgetname="'+(r=e)+'"]').find(".js-content-section"),(r=l('.widget-items[data-widgetname="'+r+'"]').find(".fig-section.vid").closest("div.article-section-wrapper"))&&r.length?i.add(r):i);return{$contentTopSections:l('.widget-items[data-widgetname="'+e+'"]').children(),$contentSections:i,$figuresTablesSections:i.has(".table-wrap, .fig-section"),$videoSections:i.has(".video-section"),$audioSections:i.has(".audio-section"),$supplementaryData:l(".widget-"+t+", .supplementary-material"),$commentsSection:l("#ContentTab").find("div.comments"),$peerReviewSections:l(".widget-"+n+", .js-peer-review")}}a.closeDropDownIfChildItemClicked=function(){l("#Toolbar .f-dropdown > li").on("click",function(){l(this).closest(".toolbar-item").trigger("click")})},a.removeTabLinkIfTabIsEmpty=function(e){l(e).find(".tab-trigger").each(function(){var e=l(this),t=e.attr("data-tab");"#ContentTab"!==t&&l(t).find("*").length<20&&(0===(void 0!==(t=l(t).html())?l.trim(t.replace(/(<([^>]+)>)/gi,"")):1).length&&e.parent("li").remove())})},a.hideTabIfDropdownIsEmpty=function(){for(var e=[$pdfDrop,o,u],t=0;t<e.length;t++){var n=e[t];n.children("li").length<1&&n.parent().hide()}c.children("li").length<2&&c.parent().hide()},a.toggleTabContent=function(){l(".tab-trigger").on("click",function(e){e.preventDefault();var t=l(this).attr("data-tab"),e=l(t);e.siblings().removeClass("active"),e.addClass("active"),"#FigureTab"===t&&n.trigger("scroll"),d()})},a.styleToolbarStates=function(){s.on("click",".toolbar-item",function(){var e=l(this);e.addClass("clicked"),e.siblings().removeClass("clicked")}),n.on("click",function(){l(".toolbar-item").each(function(){var e=l(this);e.find("ul").hasClass("open")||e.removeClass("clicked")})})},a.toolbarDropdowns=function(){l(".js-toolbar-dropdown").on("click",function(e){var t=l(this).next(".f-dropdown"),n=l(this).find(".js-toolbar-arrow-icon"),r="icon-general_arrow-down",i="icon-general_arrow-up";e.stopPropagation(),l(".f-dropdown").not(t).removeClass("open"),l(".js-toolbar-arrow-icon").not(n).removeClass(i).addClass(r),l(".toolbar-search").removeClass("expanded"),t.hasClass("open")?(t.removeClass("open"),n.removeClass(i).addClass(r)):(t.addClass("open"),n.removeClass(r).addClass(i)),l(document.body).on("click",function(){t.removeClass("open"),n.hasClass(i)&&n.removeClass(i).addClass(r)})})},a.shouldHideToolbar=function(){if(899<l(window).width()&&l(window).scrollTop()<l(".page-column--left").offset().top-65)return!0;return!1},a.stickyToolbar=function(){l(".page-column--left").length&&l(".toolbar-wrap").length&&l(window).on("scroll",function(){SCM.Toolbar.shouldHideToolbar()?(l(".toolbar-wrap").removeClass("toolbar-stuck"),l(".site-theme-header").find(".navbar-search-container").removeClass("hide")):(l(".toolbar-wrap").addClass("toolbar-stuck"),l(".site-theme-header").find(".navbar-search-container").addClass("hide"))})},a.init=function(){var e,t,n,r,i;s=l("#Toolbar"),$badgeBar=l(".badge-bar"),(s.length||$badgeBar.length)&&(c=l("#ViewsDrop"),o=l("#ShareDrop"),u=l("#ToolsDrop"),$pdfDrop=l("#PdfDrop"),d(),a.removeTabLinkIfTabIsEmpty(c),a.styleToolbarStates(),a.toggleTabContent(),l("#ContentTab .widget-ArticleFulltext").length?f("ArticleFulltext","ArticleDataSupplements","PeerReview"):l("#ContentTab .widget-BookSectionsText").length?f("BookSectionsText","DataSupplements","PeerReview"):l("#ContentTab .widget-BookToc").length?f("BookToc","DataSupplements","PeerReview"):c.closest(".js-item-views").addClass("hide"),a.hideTabIfDropdownIsEmpty(),a.toolbarDropdowns(),e=l(".js-toolbar-item-cme-quiz"),t=l(".widget-RieventCmeQuiz"),n=l(".js-item-cme-quiz.cme-close"),r=l(".js-item-cme-quiz span"),i=l(".js-userComments"),e.length&&(t.length?(n.hasClass("hide")||n.addClass("hide"),t.hasClass("hide")||t.addClass("hide"),l(".js-item-cme-quiz").on("click",function(){r.toggleClass("hide"),t.toggleClass("hide"),i.toggleClass("hide"),l("#ContentTab").toggleClass("hide")})):e.addClass("hide")))}}(SCM.Toolbar=SCM.Toolbar||{},jQuery,$(document));var SCM=SCM||{};SCM.ClientStatsMaster=function(s){function o(e,t,n,r,i,a){this.SourceType=e,this.ActionType=t,this.ActionDescription=n,this.ActionUrl=r,this.SearchData=i,this.IsTurnaway=a}function i(e,t){this.ActionFilterKey=e,this.ActionFilterValue=t}function a(e,t,n){this.SessionID=e,this.ClientID=t,this.SiteID=n}function l(e,t,n,r){this.UserSessionItem=new a("",0,s("#hdnSiteID").val()),this.ActionFilterType=new i(e,t),this.ActionDescription=n,this.ActionURL=r}function r(e,t,n,r,i,a){a=new o(e,t,n,r,i,a).toJson();s.ajax({type:"POST",url:"/Services/UserActionService.svc/TrackUserAction",data:a,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.error("jqXhr.responseText: "+e.responseText),console.error("status: "+t))})}return o.prototype.toJson=function(){return JSON.stringify(this)},l.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=s("#Toolbar"),t={"#FigureTab":"FiguresClicked","#TableTab":"TablesClicked","#ContentTab":"ArticleClicked","#SupplementTab":"SupplementClicked","#MultimediaTab":"MultimediaClicked"};e.on("click",".tab-trigger",function(){var e=s(this).attr("data-tab");e in t&&r(22,"View",t[e],window.location.href,"",!1)})},trackShares:function(){var e=s("#ShareDrop"),t={addthis_button_email:"EmailClicked",addthis_button_share:"TwitterClicked",addthis_button_facebook:"FacebookClicked"};e.on("click","a",function(){var e=s(this).attr("class");e in t&&r(22,"Share",t[e],window.location.href,"",!1)})},trackSingleAction:function(e,t,n){e.on("click",function(){r(22,t,n,window.location.href,"",!1)})},trackGdprCookieAcceptance:function(e,t,n){var r;r=window.location.href,r=new l(e,t,n,r).toJson(),s.ajax({type:"POST",url:"/ClientTrackingHandler.ashx",data:r,contentType:"application/json; charset=utf-8",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.error("jqXhr.responseText: "+e.responseText),console.error("status: "+t))})}}}(jQuery),$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackShares(),SCM.ClientStatsMaster.trackSingleAction($('a[data-reveal-id="getCitation"]'),"Tools","GetCitationClicked"),SCM.ClientStatsMaster.trackSingleAction($("div.toolboxGetAlertsWidget"),"Tools","AlertsClicked"),SCM.ClientStatsMaster.trackSingleAction($("div#getAlertsConfirmation"),"Tools","AlertAdded"),SCM.ClientStatsMaster.trackSingleAction($("#PermissionsLink"),"Tools","GetPermissionsClicked"),SCM.ClientStatsMaster.trackSingleAction($("a.tablelink").filter(":parent"),"ViewLargeImage","ViewLargeImageClicked")});var SCM=SCM||{};SCM.StatsR2Tracking=function(t){function a(e,t,n,r,i,a,s,o,l){SCM.Ajax.post("/UserActionStats/LogJournalArticleView",{ArticleId:t,JournalId:e,RequestType:n,IsFullText:r,IsNoLicense:i,IsLimitExceeded:a,Url:u(s),Event:o||"",EventDataType:l||""}).expectJson()}function s(e,t,n,r,i,a,s,o,l){SCM.Ajax.post("/UserActionStats/LogProceedingArticleView",{ArticleId:t,ConferenceId:e,RequestType:n,IsFullText:r,IsNoLicense:i,IsLimitExceeded:a,Url:u(s),Event:o||"",EventDataType:l||""}).expectJson()}function o(e,t,n,r,i,a,s,o){SCM.Ajax.post("/UserActionStats/LogBookView",{BookId:e,RequestType:t,IsFullText:n,IsNoLicense:r,IsLimitExceeded:i,Url:u(a),Event:s||"",EventDataType:o||""}).expectJson()}function l(e,t,n,r,i,a,s,o,l){SCM.Ajax.post("/UserActionStats/LogBookChapterView",{BookId:e,ChapterSectionId:t,RequestType:n,IsFullText:r,IsNoLicense:i,IsLimitExceeded:a,Url:u(s),Event:o||"",EventDataType:l||""}).expectJson()}function c(e,t,n,r,i,a,s){SCM.Ajax.post("/UserActionStats/LogStandaloneMultimediaView",{MultimediaId:e,RequestType:t,IsFullText:n,IsNoLicense:r,IsLimitExceeded:i,Url:u(a),Event:"Multimedia",EventDataType:s||""}).expectJson()}function i(e,t,n,r,i){(n=n||d()).ArticleId?n.ConferenceId?s(n.ConferenceId,n.ArticleId,e,!1,!1,!1,t,r,i):a(n.JournalId,n.ArticleId,e,!1,!1,!1,t,r,i):n.BookId?n.BookChapterId?l(n.BookId,n.BookChapterId,e,!1,!1,!1,t,r,i):o(n.BookId,e,!1,!1,!1,t,r,i):n.MultimediaId&&c(n.MultimediaId,e,!1,!1,!1,t,r)}function u(e){var t=location.href;return e&&(t+="/"+encodeURIComponent(e.trim())),t}function d(){return{ArticleId:t("meta[name='article-id']").attr("content"),JournalId:t("meta[name='journal-id']").attr("content"),ConferenceId:t("meta[name='conference-id']").attr("content"),BookId:t("meta[name='book-id']").attr("content"),BookChapterId:t("meta[name='book-chapter-id']").attr("content"),MultimediaId:t("meta[name='multimedia-id']").attr("content")}}return{logJournalArticleView:a,logProceedingArticleView:s,logBookView:o,logBookChapterView:l,logStandaloneMultimediaView:c,logContentView:i,logAuthorView:function(e){var t="Author/"+e.text(),n=d(),r=null,e=e.closest('[data-widgetname="BookToc"]');r=e.length?(t="chapter"+(e=e.data("resource-id-access"))+"/"+t,{BookChapterId:e,BookId:n.BookId}):n,i("Html",t,r)},logPeerReviewView:function(e){i("Html",e,d())},logItemPdfDownload:function(){t(document).on("click",".stats-item-pdf-download",function(e){i("Multimedia","ItemPdf_"+t(this).data("resourceid"),null,"Multimedia")})},logDownloadSlide:function(){t(document).on("click",".stats-download-slide",function(e){i("Multimedia","DownloadSlide_"+t(this).attr("section"),null,"Multimedia")})}}}(jQuery);var SCM=SCM||{};SCM.JumpLinks=function(r){var i,n,a=500;return{init:function(){(i=r(".jumplink-list, .jumplink-list-flyout, .list-issue-jumplinks")).length&&(l(),c(),r(document).on("click","a.js-sec-jumplink",function(){var e;location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(e=s(e=0<(e=r(this).data("scrollto")).indexOf(" ")?e.split(" ")[0]:e),o(r("[data-legacyid="+e+"]")))}),r(".pg_Article").length&&r(".jumplink-list-flyout").length&&(r(".js-jumplink-flyout-trigger").on("click",function(e){e.stopPropagation(),r(".jumplink-list-flyout-container").toggleClass("active")}),r(document.body).on("click",function(){r(".jumplink-list-flyout-container").removeClass("active")})),[{titleElementSelector:".authorNotes-section-title",wrapperClass:"author-notes-jumplink",targetId:"authorNotesSectionTitle"},{titleElementSelector:".footNotes-section-title",wrapperClass:"foot-notes-jumplink",targetId:"footNotesSectionTitle"},{titleElementSelector:".coiStatement-section-title",wrapperClass:"coi-statement-jumplink",targetId:"coiStatementSectionTitle"},{titleElementSelector:".supplementary-data-section-title",wrapperClass:"datasupplements-section-jumplink",targetId:"supplementary-data"},{titleElementSelector:".js-comments-title",wrapperClass:"usercomments-section-jumplink",targetId:"usercomments",linkHtmlSelector:".js-comments-jumplink"},{titleElementSelector:".js-peer-review-title",wrapperClass:"peerreview-section-jumplink",targetId:"peer-review"}].forEach(function(e){var t=r(e.titleElementSelector).first().text().trim(),n=r(e.linkHtmlSelector).first().length?r(e.linkHtmlSelector).first().html():void 0;t&&(e={title:t,targetId:e.targetId,wrapperClass:e.wrapperClass,linkHtml:n},n=e.linkHtml||'<a class="jumplink scrollTo" href = "#'+e.targetId+'">'+e.title+"</a>",n='<li class="section-jump-link head-1 '+e.wrapperClass+'"><div class="section-jump-link__link-wrap">'+n+"</div></li> ",i.append(n))}),function(){var e,n=i.find("li").has(".jumplink");!n.length||(e=r("#ContentTab [scrollto-destination]")).length&&(e=e.map(function(e,t){return n.has('[href="#'+t.getAttribute("scrollto-destination")+'"]').first().get()}),i.children().detach(),i.empty().append(e))}(),function(){{var e;i.find("li").length||(e=i.parents(".widget-ArticleJumpLinks")).length&&!e.find(".js-jumplink").length&&e.hide()}}(),function(){var t=r(".tab-split-view-comments-pane");t.length&&r(".js-comments-jumplink .js-jumplink").on("click",function(e){e.preventDefault(),t.hasClass("active")||t.click()})}()),function(){var e,t;(n=r(".js-list-book-jumplinks")).length&&(t=n.find(".js-custom-section-jump-link"),e=n.find(".js-section-jump-link"),(t.length||e.length)&&(t.each(function(){var e=r(this).data("targetid");r(e).length||r(this).hide()}),e.length||t.not(".hide").length||(t=n.parents(".js-section-jump-link-wrapper")).length&&t.hide(),l(),c()))}(),r(".pg_gboscontent").length&&(r(".page-column--left").length&&r(window).on("scroll",function(){r(window).width()<900&&(r(this).scrollTop()<r(".page-column--center").offset().top-65?r(".page-column--left").removeClass("stuck"):r(".page-column--left").addClass("stuck"))}),r(".js-jumplinks-trigger").on("click",function(){r(".jumplink-list").toggleClass("open")}))}};function s(e){return e=e&&e.replace(/[.]/g,"\\.")}function o(e){var t,n;e.length&&(r(".pg_articlesplitview").length?(t=e,(n=r(".js-content-splitview")).length?n.animate({scrollTop:t.offset().top+n.scrollTop()-n.offsetParent().offset().top},a):r("html,body").animate({scrollTop:t.offset().top},a)):(e=e,r(".toolbar-wrap").length?r(".toolbar-stuck").length?r("html,body").animate({scrollTop:e.offset().top-65},a):r("html,body").animate({scrollTop:e.offset().top-130},a):r("html,body").animate({scrollTop:e.offset().top-32},a)))}function l(){r("body").on("click",'a[href*="#"]:not([href="#"])',function(e){var t;location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname?(e.preventDefault(),t=s(t=r(this).data("scrollto")),(t=r("[data-legacyid="+t+"]")).length?o(t):(t=s(t=this.hash),o(r(t)))):r(this).hasClass("SupplementaryDataLink")&&(e.preventDefault(),window.location=r(this).attr("href"))})}function c(){r(".pg_ChapterStandard").length&&r(window).on("scroll",function(){var n=r(this).scrollTop();r(".book-chapter-body").length&&(r(".jumplink-heading").each(function(){var e=r(this).offset().top,t=r(this).data("magellan-destination"),t=r('.section-jump-link a[href="#'+t+'"]');e-100<n&&r(t).length&&(r(".section-jump-link.active").removeClass("active"),r(t).closest(".section-jump-link").addClass("active"))}),e("data-magellan-destination"))}),(r(".pg_Article").length||r(".pg_Issue").length||r(".pg_ConferenceVolume").length||r(".pg_proceeding").length)&&r(window).on("scroll",debounce(t,100)),r(".pg_GbosContent").length&&r(window).on("scroll",function(){var n=r(this).scrollTop();r(".widget-GbosFulltext").length&&r("h2").each(function(){var e=r(this).offset().top,t=r(this).data("magellan-destination"),t=r('.section-jump-link a[href="#'+t+'"]');e-65<n&&r(t).length&&(r(".section-jump-link.active").removeClass("active"),r(t).closest(".section-jump-link").addClass("active"))})})}function e(t){r("h3").each(function(){var e=r(this).attr(t),e=r('.section-jump-link a[href="#'+e+'"]');r(e).closest(".section-jump-link").addClass("level-2")})}function t(){var n=r(this).scrollTop();r(".articleClientType").each(function(){var e=r(this).offset().top,t=r(this).attr("id"),t=r('.section-jump-link__link-wrap a[href="#'+t+'"]');e-80<n&&(r(t).length&&r(".list-issue-jumplinks li").removeClass("active"),r(t).closest(".section-jump-link").addClass("active"))}),r(".article-body").length&&(r("h2, .jumplink-heading").each(function(){var e=r(this).offset().top,t=r(this).attr("id"),t=r('.section-jump-link__link-wrap a[href="#'+t+'"]');e-80<n&&(r(t).length&&r(".jumplink-list li, .jumplink-list-flyout li").removeClass("active"),r(t).closest(".section-jump-link").addClass("active"),r(".active-section").length&&r(".active-section").text(r(".section-jump-link.active a").text()))}),e("id"))}}(jQuery);var SCM=SCM||{};SCM.StickyElements=SCM.StickyElements||{},SCM.StickyElements=function(e){var t,n,r,i,a,s,o,l="",c=window.scrollY||window.pageYOffset,u=!1;return{init:function(){t=e("body"),i=e(".page-column--left"),a=e(".toolbar-wrap"),s=e(".page-column--left, .toolbar-wrap, .sr-filters, .article-browse-mobile-nav"),o=e("section.master-header").height(),t.hasClass("pg_article")&&(l="article",n=e(".article-browse-mobile-nav"));t.hasClass("pg_issue")&&(l="issue",r=e(".issue-browse-mobile-nav"));t.hasClass("pg_solr/searchresults")&&(l="search",$srFilters=e(".sr-filters"));window.addEventListener("scroll",d,!1),f()}};function d(){c=window.scrollY||window.pageYOffset,u||(requestAnimationFrame(f),u=!0)}function f(){u=!1,1023<SCM.SiteJS.getViewportWidth()&&"article"===l&&o-25<=c&&a.addClass("fixed"),o-25<=c?("article"===l&&(i.addClass("fixed"),n.addClass("fixed")),"search"===l&&SCM.SiteJS.getViewportWidth()<=1023&&$srFilters.addClass("fixed")):"article"!==l&&"search"!==l||s.removeClass("fixed"),o+175<=c&&"issue"===l?i.addClass("fixed"):"issue"===l&&i.removeClass("fixed"),o+190<=c&&"issue"===l?r.addClass("fixed"):"issue"===l&&r.removeClass("fixed")}}(jQuery);var SCM=SCM||{};!function(e,a){e.setAccessIcons=function(i){i=i||SCM.AccessIcons;var e=a("[data-resource-id-access]");e.length&&i&&e.each(function(e,t){var n=a(this),r=n.data("resourceIdAccess"),r=SCM.SiteJS.getAccessIcon(r,i);r&&((n=n.find(".js-access-icon-placeholder")).removeClass(function(e,t){return(t.match(/icon-availability_.+/g)||[]).join(" ")}),n.removeClass(r.icon).addClass(r.icon),n.attr("title",r.title))})},e.getAccessIcon=function(n,e){var r;return(e=e||SCM.AccessIcons).map(function(e,t){if(e.id===n)return r=e,!1}),r}}(SCM.SiteJS=SCM.SiteJS||{},jQuery);var SCM=SCM||{};!function(e,t){e.registerAnswerLinkClick=function(){t(".js-answer-link").on("click",function(){var e=t(this);e.next(".js-answer-wrap").toggleClass("hide"),e.find(".js-answer-show").toggleClass("hide"),e.find(".js-answer-hide").toggleClass("hide")})}}(SCM.ChapterAnswerSet=SCM.ChapterAnswerSet||{},jQuery);var SCM=SCM||{};!function(t){(SCM.PubHistory=SCM.PubHistory||{}).registerToggle=function(){t(document.body).on("click",".js-history-dropdown-trigger",function(e){e.stopPropagation(),t(".js-history-entries-wrap").toggleClass("expanded")}),t(document.body).on("click",function(e){t(e.target).parents(".js-history-dropdown-wrap").length||t(".js-history-entries-wrap").removeClass("expanded")})}}(jQuery);var SCM=SCM||{};!function(n,e){e.getHashReference=function(e){var t=n(location).attr("hash");return t=(t=t.split("?")[0]).replace(e,"")},e.scrollToSubSection=function(){var e=SCM.HashHandler.getHashReference("sectionID-");try{var t=n(e);t.length&&n(window).scrollTop(n(window).scrollTop()+t.position().top+40)}catch(e){console.error(e)}}}(jQuery,SCM.HashHandler=SCM.HashHandler||{});var SCM=SCM||{};!function(i,o){var a=o("body"),n="True"==o("#hdnAllowSigninRedirectToSamePageOnError").val();i.skipToMainContent=function(){o(".skipnav").on("click",function(){o("#skipNav").focus()})},i.globalNavDropdown=function(){o(".js-dropdown-trigger").on("click",function(e){o("body").addClass("on-canvas");var t=o(this).next(".js-dropdown");e.stopPropagation(),o("div, nav").not(t).removeClass("expanded"),t.toggleClass("expanded"),o(document.body).on("click",function(){o(".js-dropdown").removeClass("expanded"),o("body").removeClass("on-canvas")})})},i.checkForJS=function(){o("html").removeClass("no-js")},i.detectIfIE=function(){var e,t=(e=window.navigator.userAgent,0<(t=e.indexOf("MSIE"))?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/trident/gi)?11:0);0<t&&t<13&&o("html").addClass("IE IE-"+t)},i.detectIfFirefox=function(){null==window.mozInnerScreenX||o("html").addClass("firefox")},i.closeModals=function(){o(document).on("click",".close-reveal-modal",function(){o(".reveal-modal").removeClass("open"),o("body").removeClass("on-canvas")}),o("body").on("click",function(e){o(e.target).is(".mobile-mask")&&(o(".reveal-modal").removeClass("open"),o("body").removeClass("on-canvas"))})},i.alignModalsVerically=function(){o(".reveal-modal").css("top","25vh")},i.setAllLinksTarget=function(){o('a:not([target="_blank"])').each(function(){var e;(e=this.href)&&(e.startsWith("http")||e.startsWith("/"))&&!e.startsWith("#")&&function(e){if(e.startsWith("/"))return!1;return!new RegExp("/"+window.location.host+"/").test(e)}(this.href)&&(this.target="_blank")})},i.initSelfServeNavigation=function(){var e=o('.widget-SelfServeContentNavigationMenu a[href="'+window.location.pathname+'"]');e.addClass("ss-currentPage"),e.parents("ul.selfserve-nav-menu-child-list").addClass("open"),e.parents("ul.selfserve-nav-menu-child-list").siblings("button.selfserve-subnav-toggle").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")},i.toggleSelfServeNavigation=function(){o(".selfserve-subnav-toggle, .selfserve-parent-toggle").on("click",function(e){var t=o(this),n=o(this).siblings(".selfserve-sublist");e.preventDefault(),t.hasClass("icon-general-arrow-filled-right")?t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):t.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"),n.hasClass("open")?n.removeClass("open"):n.addClass("open")})},i.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},i.showAuthorInfo=function(){o(".js-linked-name").on("click",function(e){var t=o(this).siblings(".al-author-info-wrap");e.stopPropagation(),o(".al-author-info-wrap").not(t).removeClass("open"),o(t).toggleClass("open"),o("body").addClass("leftRailModalOpen"),o(t).hasClass("open")&&SCM.StatsR2Tracking.logAuthorView(o(this))})},i.hideAuthorInfo=function(){o(document.body).on("click",function(e){o(e.target).parents(".al-author-info-wrap").length||(o(".al-author-info-wrap").removeClass("open"),o("body").removeClass("leftRailModalOpen"))})},i.showArticleMetadata=function(){o(".js-expand-collapse-metadata").on("click",function(){var e=o(".js-author-expand-collapse-metadata-wrap");e.toggleClass("active"),o(".js-metadata-toggle-icon").toggleClass("icon-general-add"),o(".js-metadata-toggle-icon").toggleClass("icon-general_minus"),e.hasClass("active")&&SCM.StatsR2Tracking.logContentView("Html","AuthorInfo")})},i.scrollToAwardInfo=function(){o(document).on("click","a.js-xref-award",function(){var e=o(".js-author-expand-collapse-metadata-wrap");e.length&&!e.hasClass("active")&&o(".js-expand-collapse-metadata").click();var t=o(this).data("scrollto"),e=o("div.award-group[data-award-id="+t+"]");o(".pg_Article").length?o("html,body").delay(100).animate({scrollTop:e.offset().top-65},250):(t=o(".js-content-splitview")).delay(100).animate({scrollTop:t.scrollTop()+e.position().top},250)})},i.addAuthorFootnote=function(){o(".al-author-name").each(function(){var e=o(this).find(".info-card-note .xref-fn");e.length&&"*"===e.text()&&(o("<sup/>").append(e.html()).insertAfter(o(this).find(".linked-name")),e.remove()),o(this).find(".info-author-correspondence").length&&o(this).find(".linked-name").append('<i class="icon-corresponding_author"></i>')})},i.showHideDropDown=function(){o(".selectDropdown").on("click",function(e){o(".dropdown").hide().removeClass("open"),e.stopPropagation(),o(this).siblings(".dropdown").slideToggle("300","linear").toggleClass("open")}),o(document).click(function(){o(".dropdown").hide().removeClass("open")})},i.showMoreRelatedContent=function(e,t){o(e).click(function(){var e=o(this);e.closest(".related-section-box, .widget-RelatedBookContent").find(t).toggleClass("show-item"),e.toggleClass("show-less").find("i").toggleClass("icon-show").toggleClass("icon-hide"),e.hasClass("show-less")?e.find("span").text("See Less"):e.find("span").text("See More")})},i.showSpinner=function(){o(".pagination, .querybuilder-submit").on("click",function(){o(".preloader-wrap").removeClass("hide").addClass("active")})},i.isLoggedIn=function(){return 0<App.LoginUserInfo.isIndividualLoggedIn},i.toggleSearchCover=function(){o(".sf-facet").length&&o(".sf-facet").click(function(){o(document).ajaxStart(function(){o(".info-inner-cover").removeClass("uncovered"),o(".info-inner-cover").addClass("covered")}),o(document).ajaxComplete(function(){o(".info-inner-cover").removeClass("covered"),o(".info-inner-cover").addClass("uncovered")})})},i.toggleResponsiveLeftColumn=function(){o(document.body).removeClass("noscroll"),o(".js-main").on("click",".toggle-left-col__search, .toggle-left-col__article",function(e){e.preventDefault(),o(document.body).addClass("noscroll"),o(".page-column--left").show(),o(document).ajaxComplete(function(){o(document.body).removeClass("noscroll")})}),o(".toggle-left-col__close").on("click",function(e){e.preventDefault(),o(document.body).removeClass("noscroll"),o(".page-column--left").removeAttr("style")})},i.initDatePicker=function(){o(".pg_advancedsearch").length&&(o("#startDateAuthor").length||o("#startDateSemanticSearch").length)&&o("#startDateAuthor, #endDateAuthor, #startDateSemanticSearch, #endDateSemanticSearch").datepicker()},i.showFullAuthorList=function(){var t=o(".meta-authors--etal"),n=o(".meta-authors--remaining");t.on("click",function(e){e.preventDefault(),t.removeClass("is-active"),t.attr("aria-hidden",!0),n.addClass("is-active"),n.attr("aria-hidden",!1)})},i.showImages=function(e){e.find(".contentFigures").each(function(){var e=o(this);0<=e.attr("src").toLowerCase().indexOf("grey.gif")&&e.attr("src",e.attr("data-original"))})},i.openRevealModal=function(e){o(".reveal-modal").removeClass("open");var t=o("#revealModal");t.find("#revealContent").empty().prepend(e.clone()),t.closest(".reveal-modal").addClass("open"),t.length&&SCM.SiteJS.removeDuplicateFootnotes(t),SCM.SiteJS.showImages(t),SCM.SiteJS.restrictedImages()},i.processFigGroup=function(e,t){o(".reveal-modal").removeClass("open");e=o('[reveal-group-id~="'+e+'"]');e.length&&t.length&&(t.children().length||e.length&&e.each(function(){t.append(o(this).clone().removeClass("hide"))}),o("body").addClass("on-canvas"),t.addClass("open"),SCM.SiteJS.showImages(t),SCM.SiteJS.restrictedImages())},i.processNonFigGroup=function(e,t){var n,r=o('#main [content-id~="'+e+'" i]');!e.length||r.length||(n=e.split(" ")).length&&(r=0<(n=i.getAllReferencesInRange(n)).html().length?n:""),o(r).hasClass("video-modal")||o(r).hasClass("audio-modal")?SCM.Utilities.Reveal.open(r):(e=o('.reveal-modal[content-id="'+e+'"]')).length?SCM.Utilities.Reveal.open(e):r.length?SCM.SiteJS.openRevealModal(r):SCM.Utilities.Reveal.open(t)},i.removeDuplicateFootnotes=function(e){var t={},e=e.children("#revealContent").children(".fn");o(e).each(function(){var e=o(this).text();t[e]?o(this).remove():t[e]=!0})},i.revealFigsTablesInModal=function(){var n=o("#NeedSubscription");a.on("click",".xref-fn, .link-reveal, .table-graphic, .caption-title",function(){var e=o(this),t=e.hasClass("xref-bibr");0<o(".pg_articlesplitview").length&&t||(t=e.attr("reveal-id")?e.attr("reveal-id"):e.attr("data-reveal-id")?e.attr("data-reveal-id"):e.attr("data-id"),(e=o('#main div[reveal-group-container-id="'+t+'" i]')).length?SCM.SiteJS.processFigGroup(t,e):SCM.SiteJS.processNonFigGroup(t,n))})},i.getAllReferencesInRange=function(e){var t,n=o("<div/>");return e.forEach(function(e){(t=o('[content-id="'+e+'"]').first()).length||(t=o('[content-id="'+e.toLowerCase()+'"]').first()),n.append(t.children().clone())}),n},i.showUnAuthenticatedSpans=function(){o(document).ready(function(){var e=o('div[data-widgetname="ArticleFulltext"] span#UserHasAccess').attr("data-userHasAccess");e&&e.length&&"false"===e.toLowerCase()&&o('div[data-widgetname="ArticleFulltext"] a[data-reveal-id]').each(function(){o(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})})};var s=!(i.jumpToPeerReview=function(){var e=SCM.JSUtility.getParameterByName("peerReviewId",window.location.href);!e||(e=o(document.getElementById(e))).length&&o(".pg_Article").length&&o("html,body").delay(100).animate({scrollTop:e.offset().top-65},250)});function e(){var e=o(".js-fpp-wrap");return e.length&&(e.data("fppReferredEnabled")&&function(e){if(!e)return;var t=o("<a>",{href:document.referrer}).prop("hostname");return t&&0<t.indexOf(e)}(e.data("fppReferredDomain")))}i.loadSignInForm=function(e){var t=o(".mobile-account-dropdown ul li ul"),n=o(".dropdown-panel-signin"),r=o("#sign-in-page"),i=SCM.SiteJS.addPeerReviewDataToUrl(SCM.SiteJS.getDefaultReturnUrl());s||(i=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+e+encodeURIComponent(i),SCM.Ajax.get(i).expectHtml().then(function(e){n.html(e),t.html(e),r.html(e),SCM.AddReturnUrlToSocietyLinks(),s=!0,0<o(".dropdown-menu").length&&o(".dropdown-menu").data("displayinloginform")&&o(".dropdown-menu").clone().prependTo(".myAccountNav.login-myaccount-wrap")}).catch(function(e){console.error("Failed to load sign-in form: "+e)}))},i.initSigninForm=function(){o(".dropdown-toggle.signin").on("click",function(e){var t=o(this).data("login-location");i.loadSignInForm(t)}),o(document.body).on("click",".signin-form .signin-button",function(e){var t=o(this).closest(".signin-form"),n=t.find(".preloader-wrap");e.preventDefault(),e.stopPropagation(),SCM.SiteJS.Login(t,n)}),o(document).on("keypress",".signin-form input.username, .signin-form input.password",function(e){var t=o(this).closest(".signin-form"),n=t.find(".preloader-wrap");13===(e.keyCode||e.which)&&(e.preventDefault(),SCM.SiteJS.Login(t,n))}),o(document).on("click",".signout-button",function(e){e.preventDefault();var t="/LogoutHandler.ashx",e=e.target.attributes["logout-type"];e&&(t+="?logoutType="+e.value),window.top.location.assign(t)}),o(document).on("click","a.institutional-login-link",function(e){e.preventDefault();var t=o(this).attr("href"),e=t.toLowerCase();0<e.indexOf("returnurl=")||0<=window.top.location.href.toLowerCase().indexOf(e)||(e=null==(e=o.deparam.querystring().returnUrl)?window.top.location.href:e)&&0<e.length&&(t=o.param.querystring(t,"returnUrl="+encodeURIComponent(e))),window.top.location.assign(t)}),o(document).on("click","a.shibboleth-signin",function(){var e=window.top.location,e=e.origin+"/SHIBBOLETH?dest="+encodeURIComponent(e.pathname+e.search),e=o(this).data("target").replace("{0}",encodeURIComponent(e));window.top.location=e})},i.initLoginFormDropdown=function(){o(".signin-form").on("click",'a[data-target="register"]',function(e){e.preventDefault();e=o.deparam.querystring().returnUrl;null==e&&(e=location.pathname+location.search),window.top.location.assign("/my-account/register?returnUrl="+encodeURIComponent(e))})},i.Login=function(t,e){var n=t.find("input.username").val(),r=t.find("input.password").val();0!==n.length&&0!==r.length?(e.removeClass("hide"),o(".error, .no-permission").hide(),SCM.Ajax.post("/LoginHandler.ashx",{user:n,pass:r}).expectText().expect("Username / password incorrect",function(e){return"0"!==e}).expect(function(e){return"1"===e||"2"===e}).then(function(e){"1"===e?SCM.SiteJS.loginReturnBack():"2"===e&&t.find(".no-permission").show()}).catch(function(e){console.error("Login failure: "+e),t.find(".error").show()}).finally(function(){e.addClass("hide")})):t.find(".error").show()},i.loginReturnBack=function(){var e=SCM.SiteJS.getDefaultReturnUrl();/^\/((\w+\/)?sign-in|my-account\/forgot-password|my-account\/reset-password|my-account\/register|institutional-login)/i.test(e)&&(e="/");var t=o("body");"/"!==(e=!n&&(t.hasClass("pg_error")||t.hasClass("pg_error404"))?"/":e)&&(e=null!==(t=e.match(/\/\/([^/]+\.)?([^./]+\.[^./]+)/i))&&t[2].toLowerCase()!==window.top.location.hostname.match(/(.*\.)?([^.]+\.[^.]+)/i)[2].toLowerCase()?"/":SCM.SiteJS.addPeerReviewDataToUrl(e)),window.top.location.assign(e)},i.addPeerReviewDataToUrl=function(e){var t=SCM.Common.getQueryStringValue(window.location.href,"peerReviewId");if(t){var n=new URL(e);return n.searchParams.set("peerReviewId",t),n.toString()}return e},i.getDefaultReturnUrl=function(){var e=o.deparam.querystring(!0).returnUrl;return e=null==(e=null==(e=null==(e=e&&decodeURIComponent(e))||0===e.length?o.deparam.querystring().redirectUrl:e)||0===e.length?SCM.SiteJS.getCanonicalUrl():e)||0===e.length?window.top.location.pathname+window.top.location.search:e},i.getCanonicalUrl=function(){var e=o('link[rel="canonical"]').attr("href");return null==e||0===e.length?"":e},i.alertLinks=function(){function n(e){return e.parent().hasClass("alertType-MarketingLink")}function r(e){return e.data("additionalurl")}o("body").on("click",".userAlert a",function(e){var t=o(this);e.preventDefault(),SCM.SiteJS.isLoggedIn(t)?n(t)?window.location=r(t):SCM.SiteJS.showSignUpAlertInfo(t):(e=SCM.SiteJS.getDefaultReturnUrl(),e=n(t)?r(t):function(e,t){e=e.data("alerttype");void 0!==e&&(t=t+"#trigger-alerttype="+e);return t}(t,e),window.location="/sign-in?returnUrl="+encodeURIComponent(e))})},i.showSignUpAlertInfo=function(n){o.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:n.data("alerttype"),resourceId:n.data("alertresourceid"),resourceType:n.data("alertresourcetype"),email:n.data("alertuseremail"),resourceName:n.data("alertresourcename")},dataType:"html",success:function(e){o(".userAlertSignUp").html(e);var t=o(".userAlertSignUpModal");SCM.Utilities.Reveal.open(t),o(".addUserAlert").on("click",function(){var e=!!o(this).data("hasmultipleschedules"),t=SCM.SiteJS.buildAlertSignUpData(n,e);SCM.SiteJS.addSignUpAlert(t,e)}),o(".userAlertClose").on("click",function(){SCM.Utilities.Reveal.close(t)})}})},i.buildAlertSignUpData=function(e,t){var n={};return n.alertType=e.data("alerttype"),n.resourceId=e.data("alertresourceid"),n.resourceType=e.data("alertresourcetype"),n.email=e.data("alertuseremail"),n.resourceName=e.data("alertresourcename"),e.data("scheduleid")&&(n.scheduleId=e.data("scheduleid")),t&&(n.scheduleId=o(".js-new-useralert-select").val()),n},i.addSignUpAlert=function(e,t){o.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+(t?"/Toolbox/AddAlertsSignUpWithSchedule/AddAlertsSignUpPopup":"/Toolbox/AddAlertsSignUp/AddAlertsSignUpPopup"),cache:!1,data:e,dataType:"html",success:function(e){o(".userAlertSignUp").html(e);var t=o(".userAlertSignUpModal");SCM.Utilities.Reveal.open(t),o(".userAlertClose").on("click",function(){SCM.Utilities.Reveal.close(t)})}})},i.triggerAlertModalOnRedirect=function(){var e=o.bbq.getState("trigger-alerttype");void 0!==e&&(o('.userAlert a[data-userloggedin="True"][data-alerttype='+e+"]").click(),o.bbq.removeState("trigger-alerttype"))},i.triggerSaveSearchModelOnRedirect=function(){"1"===o.bbq.getState("triggerSaveSearch")&&(o(".lnkSaveSolrSearch").click(),o.bbq.removeState("triggerSaveSearch"))},i.initSearchResultsSort=function(){var e,t,n;o(".widget-SolrSearch").length&&(e=o(".sort-order-select-option"),t=o(".sort-order-select"),n=o(".preloader-wrap"),t.on("change",function(){var e=o(this).val();SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"})}),e.on("click",function(){o(this).find("option[value]").length&&n.removeClass("hide")}))},i.initSearchResultsPagination=function(){o(".widget-SolrSearch").length&&o(document.body).on("click",".al-pageNumber,.sr-nav-previous,.sr-nav-next",function(){var e;o(this).hasClass("currentPage")||(o(".preloader-wrap").removeClass("hide"),e=o(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:e}))})},i.restrictedImages=function(){o("a.fig-link[restricted]").each(function(){var e=o(this).parent("div.graphic-wrap"),t=o(e).children(".copy-right-statement");e.attr("restricted",""),e.off("contextmenu").on("contextmenu",function(){return o(t).toggle(),!1}),o(this).click(function(){return o(t).toggle(),!1}),o(t).click(function(){return o(t).toggle(),!1})})},i.moveSubmitCommentLink=function(){var e=o(".submitCommentPlaceHolder"),t=o(".widget-UserComment");e.append(t)},i.addUserCommentJumpLink=function(){var e,t=o(".content-nav");t.length&&(e=o(".comments-jumplink"),t.append(e))},i.moveCompetingInterestsSection=function(){o(".references-title").length?o(".coi-statement-section-wrapper").insertBefore(".references-title"):o(".backreferences-title").length?o(".coi-statement-section-wrapper").insertBefore(".backreferences-title"):o(".acknowledgements-title").length?o(".coi-statement-section-wrapper").insertAfter(".acknowledgements-title"):o(".backacknowledgements-title").length&&o(".coi-statement-section-wrapper").insertAfter(".backacknowledgements-title")},i.adjustRelatedTagsDisplay=function(){o(".article-metadata-panel:not(:last)").remove();var t=o(".article-metadata-panel").last();t.length||(t=o(".article-metadata-standalone-panel")),[o(".kwd-group"),o(".related-topic-tags"),o(".article-metadata-taxonomies, .content-metadata-taxonomies"),o(".article-metadata-tocSections")].filter(function(e){return e.length}).forEach(function(e){t.append(e)}),t.text().trim().length?t.show():t.hide()},i.showPdfOnlyLink=function(){o(".PdfOnlyLink").length&&o(".toolbar-item.item-pdf").length&&o(".toolbar-item.item-pdf").children().clone().appendTo(".PdfOnlyLink")},i.ariaToggleTable=function(t){var n=o(t+"-button"),r=n.children(".collapse-icon");n.on("click",function(e){e.preventDefault(),"true"===n.attr("aria-expanded")?n.attr("aria-expanded","false"):n.attr("aria-expanded","true"),r.hasClass("icon-general-arrow-filled-down")?r.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):r.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"),o(t).toggleClass("hide"),"false"===o(t).attr("aria-hidden")?o(t).attr("aria-hidden","true"):o(t).attr("aria-hidden","false")})},i.initAriaControls=function(){o("[id^=collapsible-table-]").each(function(e){SCM.SiteJS.ariaToggleTable("#collapsible-table-"+e)})},i.abstractMathJax=function(){o(".abstract-response-placeholder").length&&MathJax.Hub&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,".abstract-response-placeholder"])},i.initializeArticlePdfLinks=function(){var e=o("#ArticleList h5.item-title");function i(e){e.off("click")}null!==e&&e.each(function(){var e=o(this),t=e.parent().find(".article-pdfLink");null!==t&&(function(e){e=e.data("resourceIdAccess");if(SCM.AccessIcons&&e){e=SCM.SiteJS.getAccessIcon(e,SCM.AccessIcons);return e&&"icon-availability_cart"!==e.icon}return!1}(e)||SCM.SiteJS.isLoggedIn()?function(e){i(e);var t=App.SiteURL+"HTTPHandlers/ArticlePdfHandler.ashx",n=e.data("journal"),r=e.data("pdf-id");null!==r&&null!==n&&e.on("click",function(e){e.preventDefault(),window.open(t+"?journal="+n+"&multimediaId="+r,"_blank")})}:function(e){i(e);var t=SCM.SiteJS.getDefaultReturnUrl();e.on("click",function(e){e.preventDefault(),window.location="/sign-in?returnUrl="+encodeURIComponent(t)})})(t)})},i.triggerFppOnRedirect=function(){e()&&o(".firstPagePreviewImage").click()},i.articleUserComments=function(){var a=o(".comment-form__modal .preloader-wrap"),s=o(".content-form__response--error");o("#comment-modal-opener").click(function(e){e.preventDefault(),"True"!==SCM.UserCommentView.showUserCommentWidget?(e=SCM.UserCommentView.divId,SCM.Utilities.Reveal.open(o("#"+e))):(resetCommentForm(),SCM.Utilities.Reveal.open(o("#divCommentModal")))}),o("#divCommentModal .btnUserCommentSubmit").click(function(e){e.preventDefault(),validateCommentForm()&&(a.removeClass("hide"),submitCommentValues())}),o("#divCommentModal .btnModalCancel, #divCommentModal .btnCommentModalExit, .comment-form__close").click(function(e){e.preventDefault(),SCM.Utilities.Reveal.close(o("#divCommentModal"))}),o('input[name="NoConflicts"]').change(function(){o(this).is(":checked")?o(".disclosureBox").show():o(".disclosureBox").hide()}),validateCommentForm=function(){var e=!1;resetCommentFormValidation(),o.validity.setup({outputMode:"label"}),o.validity.start(),o("#divCommentModal .required").require();var t=o.validity.end(),n=o("#divUserCommentForm").find("textarea#Comment"),r=n.val(),n=parseInt(n.attr("maxlength"));return 0<n&&r.length>n&&(r=r.substring(0,n)),!(e="true"===SCM.UserCommentView.bShowDisclosure&&o('input[name="NoConflicts"]').is(":checked")&&""===o('textarea[name="Disclosure"]').val()?(o("#divCommentModal .lbldisclosure.errors").show(),!1):t.valid)||(t=o("#divUserCommentForm input#termsAndConditions")).length&&!t.is(":checked")&&(o("#divUserCommentForm .lblTermsAndConditions.errors").show(),e=!1),e},resetCommentForm=function(){o("#divUserCommentForm").show();var e=o("#divCommentModal");e.find("input, textarea").val(""),e.find("#displayAlert, div.captchaAlert").hide(),o('input[name="NoConflicts"]').prop("checked",!1),o('input[name="termsAndConditions"]').prop("checked",!1),o(".disclosureBox").hide(),o("#divCommentModal .btnCommentModalExit").hide(),o("#recaptcha_reload").trigger("click");e=e.find("#Author");e.attr("value",e.attr("dataauthorvalue")),resetCommentFormValidation()},resetCommentFormValidation=function(){var e=o("#divCommentModal");e.find(".error").not(".lbldisclosure.errors").remove(),e.find(".lbldisclosure.errors").hide(),o("#divUserCommentForm .lblTermsAndConditions.errors").hide(),s.text("")},submitCommentValues=function(){var t=o("#divUserCommentForm"),e=SCM.UserCommentView.resourceType,n=SCM.UserCommentView.resourceId,r="",i="";"true"===SCM.UserCommentView.showAffiliations&&(r=t.find("input#AffInstitution").val()),"true"===SCM.UserCommentView.bShowDisclosure&&(i=t.find("textarea#Disclosure").val()),o.ajax({type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Content/SubmitUserComment",data:{author:t.find("input#Author").val(),affInstitutions:r,disclosure:i,title:t.find("input#Title").val(),comment:t.find("textarea#Comment").val(),resourceType:e,resourceId:n,recaptchaChallege:o("#recaptcha_challenge_field").val(),recaptchaResponse:o("#recaptcha_response_field").val()},success:function(e){a.addClass("hide"),!0===e.Success?(t.hide(),o("#divCommentModal #displayAlert").show(),o("#divCommentModal .btnCommentModalExit").show(),"true"===SCM.UserCommentView.isNotModerated.toLowerCase()&&location.reload()):(a.addClass("hide"),o("div.captchaAlert").show())},error:function(){a.addClass("hide"),s.html("Comments not saved. Please Try Again.")}})}},i.modalManager=function(){for(var e in modalArray={".js-open-saveSearch-modal":".solrSearchSaveModel",".js-add-edit-trigger":"#journalAddEditDiv",'.js-open-alert-modal[data-userloggedin="True"]':".userAlertSignUpModal",'[data-reveal-id="addArticleUpdateAlert"]':"#AddAlert",'[data-reveal-id="emailUsernameModal"]':"#emailUserName",".firstPagePreviewImage":"#divFirstPagePreview",'[data-reveal-id="getCitations"]':"#getCitations"},addOnClickBehavior=function(t,n){o(document.body).on("click",t,function(){var e=o(t).data("userloggedin");".js-open-saveSearch-modal"===t&&e||".js-open-saveSearch-modal"===t&&"false"===e.toLowerCase()||(o(n).closest(".reveal-modal").addClass("open"),o(document.body).addClass("on-canvas"))})},modalArray)addOnClickBehavior(e,modalArray[e])},i.stickySidebar=function(){o(".can-stick").length&&o(window).on("scroll",function(){var e;899<o(window).width()?o(this).scrollTop()<o(".page-column--left").offset().top-65?o(".info-inner-wrap").removeClass("menu-stuck").addClass("menu-not-stuck"):o(".info-inner-wrap").removeClass("menu-not-stuck").addClass("menu-stuck"):o(".info-inner-wrap").removeClass("menu-not-stuck").removeClass("menu-stuck"),o(".menu-stuck").length?(e=o(".info-inner-wrap").height(),o(window).height()<e&&o(".info-inner-wrap").addClass("im-too-tall")):o(".info-inner-wrap").removeClass("im-too-tall")})},i.ckbSelectAll=function(){o(document.body).on("click",".js-ckbCheckAll",function(){var e=o(this),n=e.prop("checked");e.parents(".js-chkbParent").siblings().find('input[type="checkbox"]').each(function(e,t){t=o(t);t.prop("checked")!==n&&t.prop("checked",n).trigger("change")})})},i.unStickSidebar=function(){899<o(window).width()&&(o.fn.is_on_screen=function(){var e=o(window),t={top:e.scrollTop(),left:e.scrollLeft()};t.right=t.left+e.width(),t.bottom=t.top+e.height();e=this.offset();return e.right=e.left+this.outerWidth(),e.bottom=e.top+this.outerHeight(),!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)},o(window).on("scroll",function(){var e=o(".info-inner-wrap").height(),t=o(".footer_wrap").offset().top-65-o(window).scrollTop();0<o(".footer_wrap").length&&(o(".footer_wrap").is_on_screen()?(t<e&&o(".info-inner-wrap").addClass("menu-bottomed-out"),e<t&&o(".info-inner-wrap").removeClass("menu-bottomed-out")):o(".info-inner-wrap").removeClass("menu-bottomed-out"))}))},i.checkForEmptyArticleLeftNav=function(){var e,t,n;o(".pg_Article").length&&(e=o(".pg_Article .info-widget-wrap > div"),t=o(".pg_Article .info-widget-wrap").closest(".info-inner-wrap"),n=o(".article-browse-top.article-browse-mobile-nav"),0<e.length&&(t.removeClass("empty"),n.removeClass("empty")))},i.mobileNav=function(){var t=o(".myaccount-tabs-inner-wrap"),n=o(".mobile-nav-icon");o(document).on("click",".myaccount-mobile-nav",function(e){e.stopPropagation(),t.toggle(),n.hasClass("icon-general-arrow-filled-down")?n.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-up"):n.removeClass("icon-general-arrow-filled-up").addClass("icon-general-arrow-filled-down")}),o(document).click(function(){t.hide().removeAttr("style")})},i.toggleSupplementalTablesAndFigures=function(){function n(e){var t=e.find(".js-expand-view"),e=e.find(".js-collapse-view");t.hasClass("supplemental-material-collapsed")?(t.removeClass("supplemental-material-collapsed"),e.addClass("supplemental-material-collapsed")):(t.addClass("supplemental-material-collapsed"),e.removeClass("supplemental-material-collapsed"))}function r(e){e.hasClass("supplemental-material-collapsed")?e.removeClass("supplemental-material-collapsed"):e.addClass("supplemental-material-collapsed")}o(".js-supplemental-figure-toggle").on("click",function(e){e.preventDefault();var t=o(e.currentTarget),e=t.attr("data-id");r(o(".js-supplemental-figure-graphic-wrap[data-id='"+e+"']").first()),n(t)}),o(".js-supplemental-table-toggle").on("click",function(e){e.preventDefault();var t=o(e.currentTarget),e=t.attr("data-id");r(o('.js-supplemental-table-graphic-wrap[data-id="'+e+'"]')),n(t)})},i.inlineGraphicWrap=function(){var e=o(".js-graphic-position-anchor").parents(".js-content-section");0<e.length&&(e.addClass("inline-graphic-image-wrap"),e.next(".js-content-section").addClass("inline-graphic-text-wrap").after(o("<div class='text-break'></div>")))},i.init=function(){function r(e){return e&&"[XSLTSectionID]"!==e}var e;i.checkForJS(),i.detectIfIE(),i.detectIfFirefox(),i.skipToMainContent(),i.globalNavDropdown(),SCM.Logging.init(),SCM.JqueryMigrateLogger.init(),i.articleUserComments(),i.initAriaControls(),i.initSearchResultsSort(),i.initSearchResultsPagination(),SCM.Utilities.LazyLoad.init(),i.showAuthorInfo(),i.hideAuthorInfo(),i.showArticleMetadata(),i.scrollToAwardInfo(),SCM.PubHistory.registerToggle(),i.showFullAuthorList(),i.addAuthorFootnote(),i.showHideDropDown(),i.showMoreRelatedContent(".grw-viewmorelink",".grw-hide-me"),i.showMoreRelatedContent(".mrw-viewmorelink",".mrw-hide-me"),i.showSpinner(),i.toggleResponsiveLeftColumn(),i.restrictedImages(),i.moveSubmitCommentLink(),i.moveCompetingInterestsSection(),i.addUserCommentJumpLink(),i.alertLinks(),i.initSigninForm(),i.initSelfServeNavigation(),i.toggleSelfServeNavigation(),i.setAllLinksTarget(),i.showPdfOnlyLink(),SCM.gdprCookieBanner.init(),i.alignModalsVerically(),o(".issue-featured-image a, .featured-img-wrapper a, .js-issue-graphical-abstract a").on("click",function(e){var t,n,r;e&&e.preventDefault&&(e.preventDefault(),t=(r=o(e.currentTarget)).parent().html().trim(),e=(n=o("#revealModal")).find("#revealContent"),r=r.attr("href").trim(),n.length&&e.length&&r&&t&&(e.empty().prepend(t),e.find("img").attr("src",r),e.find(".js-graphical-abstract-caption").removeClass("js-modal-only"),a.addClass("on-canvas"),n.addClass("open")))}),(e=o("body.pg_article, body.pg_articlesplitview")).length&&(e.on("mouseover",".table-wrap a.jumplink-placeholder",function(e){e=o(e.currentTarget);r(e.data("sectionid"))&&e.removeClass("jumplink-placeholder")}),e.on("click",".table-wrap a",function(e){var t=o(e.currentTarget),n=t.data("sectionid");r(n)&&(e.preventDefault(),e="/view-large/"+n,t.parent(".fig-graphic").length&&(e="/view-large/figure/"+n+"/"+t.attr("id")),window.open(e,"_blank"))})),i.stickySidebar(),i.unStickSidebar(),SCM.Toolbar.stickyToolbar(),i.ckbSelectAll(),i.mobileNav(),i.toggleSupplementalTablesAndFigures(),i.inlineGraphicWrap(),i.jumpToPeerReview()},i.windowLoadInit=function(){i.initDatePicker(),i.revealFigsTablesInModal(),i.showUnAuthenticatedSpans(),i.toggleSearchCover(),i.modalManager(),i.triggerAlertModalOnRedirect(),i.triggerFppOnRedirect(),i.closeModals(),i.checkForEmptyArticleLeftNav(),SCM.StatsR2Tracking.logItemPdfDownload(),SCM.StatsR2Tracking.logDownloadSlide()},i.initArticleTopInfoAccessOptions=function(){var e=window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))+"/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search);o(".article-top-info-user-restricted-options").find(".article-top-info-sign-in").attr("href",e)}}(SCM.SiteJS=SCM.SiteJS||{},jQuery,SCM.ArticleAccessIcons),function(r){var e,t=r(".page-column--left");$currentHeaderHeight=r("section.master-header").height();function n(){SCM.SiteJS.getViewportWidth()<=1023?t.addClass("mobile"):t.removeClass("mobile")}r(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){n(),1023<=SCM.SiteJS.getViewportWidth()&&r(".dropdown-panel, .site-menu").removeAttr("style"),r(document.body).removeClass("noscroll"),t.hide(),r(".responsive-issue-nav").hide(),r(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style")},10)}),r(window).on("load",function(){SCM.SiteJS.windowLoadInit(),SCM.SiteJS.adjustRelatedTagsDisplay(),r("body").hasClass("pg_articlesplitview")&&(SCM.SplitScreen&&SCM.SplitScreen.ScrollToWindowHash(),SCM.SplitScreen.JumpToPeerReviewTab()),SCM.SplitScreen.isSplitScreen()||SCM.HashHandler.scrollToSubSection()}),r(function(){n(),SCM.SiteJS.init(),SCM.Toolbar.init(),SCM.PDFAccess.init(),SCM.SiteJS.setAccessIcons(),SCM.FormWidget.formSubmit(),SCM.FormWidget.getMaxCharacters(),SCM.JumpLinks.init(),SCM.AddReturnUrlToSocietyLinks(),0<r(".widget-ArticleFulltext").length&&SCM.ArticleFulltext.init(),SCM.ArticleLinks.init(),SCM.SiteJS.triggerSaveSearchModelOnRedirect(),r("body").hasClass("pg_articlesplitview")&&SCM.SplitScreen.init(),r("body").hasClass("pg_brightcove")&&SCM.Utilities.Brightcove.init(),r(".widget-ShibbolethSignin").length&&Theme.ShibbolethSignin&&Theme.ShibbolethSignin.init&&Theme.ShibbolethSignin.init(),SCM.SubjectBrowse.init(),SCM.JwPlayer&&SCM.JwPlayer.init&&SCM.JwPlayer.init(),SCM.CompactAddToCartButton&&SCM.CompactAddToCartButton.init&&SCM.CompactAddToCartButton.init(),SCM.Utilities&&SCM.Utilities.Reveal&&SCM.Utilities.Reveal.init(),SCM.ToolboxGetCitations&&SCM.ToolboxGetCitations.init&&SCM.ToolboxGetCitations.init(),Theme.Store&&Theme.Store.init&&Theme.Store.init(),SCM.StripePayment&&SCM.StripePayment.init&&SCM.StripePayment.init(),SCM.StickyHeaderAd&&SCM.StickyHeaderAd.init&&SCM.StickyHeaderAd.init(),SCM.Dropdowns&&SCM.Dropdowns.init&&SCM.Dropdowns.init(),SCM.Modals&&SCM.Modals.init&&SCM.Modals.init(),SCM.PersonalizedContent&&SCM.PersonalizedContent.init&&SCM.PersonalizedContent.init(),SCM.TermsAndConditions&&SCM.TermsAndConditions.init&&SCM.TermsAndConditions.init(),SCM.CloseButton&&SCM.CloseButton.init&&SCM.CloseButton.init(),SCM.ArticleMainView.init(),Theme.ArticleAbstract&&Theme.ArticleAbstract.init&&Theme.ArticleAbstract.init(),Theme.BookAbstract&&Theme.BookAbstract.init&&Theme.BookAbstract.init(),Theme.ChapterAbstract&&Theme.ChapterAbstract.init&&Theme.ChapterAbstract.init(),Theme.ConferenceVolumeSelector&&Theme.ConferenceVolumeSelector.init&&Theme.ConferenceVolumeSelector.init(),Theme.ContactUsForm&&Theme.ContactUsForm.init&&Theme.ContactUsForm.init(),Theme.NewAndPopular&&Theme.NewAndPopular.init&&Theme.NewAndPopular.init(),Theme.PeerReview&&Theme.PeerReview.init&&Theme.PeerReview.init(),r(".widget-InstitutionSignIn").length&&Theme.InstitutionSignIn&&Theme.InstitutionSignIn.init&&Theme.InstitutionSignIn.init(),r(".widget-ConferencesBrowseByYear").length&&Theme.ConferencesBrowseByYear&&Theme.ConferencesBrowseByYear.init&&Theme.ConferencesBrowseByYear.init(),r(".widget-MyAccount").length&&Theme.MyProfile&&Theme.MyProfile.init&&Theme.MyProfile.init(),r(".widget-RegisterUser").length&&Theme.RegisterUser&&Theme.RegisterUser.init&&Theme.RegisterUser.init(),r(".widget-SolrSearchSave").length&&Theme.SolrSavedSearches&&Theme.SolrSavedSearches.init&&Theme.SolrSavedSearches.init(),r("body").hasClass("pg_Issue")&&Theme.MeetingAbstractIssue&&Theme.MeetingAbstractIssue.init&&Theme.MeetingAbstractIssue.init(),(r("body").hasClass("pg_book")||r("body").hasClass("pg_chapterstandard")||r("body").hasClass("pg_articlesplitview"))&&Theme.CurrentBookSearch&&Theme.CurrentBookSearch.init&&Theme.CurrentBookSearch.init(),r("body").hasClass("pg_book")&&Theme.BookToc.init(),r(".widget-MultiQuerySelectableContentList").length&&Theme.MultiQuerySelectableContentList&&Theme.MultiQuerySelectableContentList.init&&Theme.MultiQuerySelectableContentList.init()}),r(document).ajaxStart(function(){r("body").css("cursor","wait")}).ajaxComplete(function(e,t,n){SCM.SiteJS.initSearchResultsSort(),SCM.SolrSearch.ajaxComplete(),SCM.SiteJS.setAccessIcons(),SCM.SiteJS.setAllLinksTarget(),r("body").css("cursor","default"),SCM.SiteJS.abstractMathJax(),SCM.Utilities.LazyLoad.init(),SCM.SiteJS.alignModalsVerically()})}(jQuery);var SCM=SCM||{};!function(e,s){e.setActiveJumplink=function(){s(".section-jump-link").on("click",function(){s(".section-jump-link").removeClass("active"),s(this).closest(".section-jump-link").addClass("active")})},e.toggleNestedJumplinks=function(){s(".section-jump-link .list-toggle, .section-jump-link .mobile-list-toggle").on("click",function(e){e.preventDefault();var t=s(this),n=t.parents(".section-jump-link__link-wrap").siblings("ul.section-jump-link__sublist"),r="icon-general-arrow-filled-right",i="icon-general-arrow-filled-down",a="icon-general_arrow-right",e="icon-general_arrow-down";t.hasClass("list-toggle")&&(t.hasClass(r)?t.removeClass(r).addClass(i):t.removeClass(i).addClass(r)),t.hasClass("mobile-list-toggle")&&(t.hasClass(a)?t.removeClass(a).addClass(e):t.removeClass(e).addClass(a)),"false"===t.attr("aria-expanded")?t.attr("aria-expanded","true"):t.attr("aria-expanded","false"),n.slideToggle(),"false"===n.attr("aria-hidden")?n.attr("aria-hidden","true"):n.attr("aria-hidden","false")})},e.filterTopicTerms=function(){s(".issue-topic__input").keyup(function(){s(".issue-topic__term").hide();for(var e=s(this).val(),t=[e.charAt(0).toUpperCase()+e.substr(1),e.toLowerCase()],n=0;n<t.length;n++)s(".issue-topic__term:contains('"+t[n]+"')").show();null!==e&&""!==e||s(".issue-topic__term").show()})},e.updateIssueBrowseOnChange=function(){s(".issue-browse-select").on("change",function(){window.location.href=s(this).val()})}}(SCM.Issues=SCM.Issues||{},jQuery),jQuery(document).ready(function(e){SCM.Issues.filterTopicTerms(),SCM.Issues.toggleNestedJumplinks(),SCM.Issues.updateIssueBrowseOnChange()});var SCM=SCM||{};!function(e,f){e.initMyAccount=function(){var e,t=f(".myaccount-tabs-inner-wrap");f(".mobile-nav-icon");f(window).on("scroll",function(){clearTimeout(e),e=setTimeout(function(){t.removeAttr("style")},50)}),f(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){t.removeAttr("style")},50)});var n=location.pathname,r=n.indexOf("/","/my-account/".length);0<r&&(n=n.substring(0,r)),f(".myaccount-tabs-inner-wrap").find("li").has('a[href="'+n+'"]').addClass("is-active"),f(document).on("click","#myaccount-tabs-content #updatePersonalDetailsBtn",function(){var t=f("#myaccount-tabs-content");t.find(".success-message").html("").hide(),t.find(".error-message").html("").hide();var e=t.find("#Title").val(),n=t.find("#FirstName").val(),r=t.find("#LastName").val(),i=t.find("#Phone").val(),a=t.find("#CountryList").val(),s=/[<>]/;if(s.test(e)||s.test(n)||s.test(r)||s.test(i)){s=t.find("#err-message-angle-brackets").html();return t.find(".error-message").html(s).show(),void f("html, body").animate({scrollTop:t.offset().top},10)}f.post("/MyAccount/UpdateAccount",{title:e,firstName:n,lastName:r,phone:i,country:a},function(e){e.Success?(f("#header-account-info-user-fullname").html(n+" "+r),t.find(".success-message").html(e.Html).show()):(t.find(".error-message").html(e.Html).show(),f("html, body").animate({scrollTop:t.offset().top},10))})});var c=f("#change-password").find(".error-message").html();f(document).on("click","#changePasswordBtn",function(){var t=f("#change-password"),n=t.find(".success-message");n.hide();var r=t.find(".error-message");r.html(c).hide();var e={},i=t.find("#currentPassword").val(),a=!1;""===i&&(e.currentPassword=f("label[for=currentPassword]").text().replace("*",""),a=!0);var s=t.find("#newPassword").val();""===s&&(e.newPassword=f("label[for=newPassword]").text().replace("*",""),a=!0);var o=t.find("#confirmNewPassword").val();if(""===o&&(e.confirmNewPassword=f("label[for=confirmNewPassword]").text().replace("*",""),a=!0),a){for(var l in e)r.append("<p> * "+e[l]+"</p>").show();f("html, body").animate({scrollTop:t.offset().top},10)}else r.html(""),f.post("/MyAccount/ChangePassword",{currentPassword:i,newPassword:s,confirmNewPassword:o},function(e){"1"==e[0]?(n.show(),f.post("/LOGIN",{user:e[1],pass:s,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(e){"1"!==e&&(location.href="/sign-in")})):(r.html(e[1]).show(),f("html, body").animate({scrollTop:t.offset().top},10))})}),f(document).on("click","#changeEmailBtn",function(){var r=f("#change-email-address"),i=r.find(".success-message"),a=r.find(".error-message"),e=r.find("#newEmailAddress").val(),t=r.find("#confirmNewEmailAddress").val(),n=r.find("#currentPassword").val(),s={},o=!1;if(a.html(""),""===e&&(s.newEmailAddress=f("label[for=newEmailAddress]").text().replace("*",""),o=!0),""===t&&(s.confirmNewEmailAddress=f("label[for=confirmNewEmailAddress]").text().replace("*",""),o=!0),""===n&&(s.password=f("label[for=currentPassword]").text().replace("*",""),o=!0),o){for(var l in a.append("Please complete the following required fields:"),s)a.append("<p> * "+s[l]+"</p>");return a.show(),void f("html, body").animate({scrollTop:r.offset().top},10)}f.post("/UserDashboard/RequestEmailAddressChange",{newEmailAddress:e,confirmNewEmailAddress:t,password:n},function(e){if(null!=e)if(e.Success)r.children(".change-email-address-form").hide(),i.show();else{for(var t=0,n=e.Messages.length;t<n;t++)a.append("<p> * "+e.Messages[t]+"</p>");a.show(),f("html, body").animate({scrollTop:r.offset().top},10)}})})},e.initTestPassword=function(){var t=f(".register-form-wrap, .editable-userprofile-info"),n=/[A-Z]/,r=/[0-9]/,i="",a=t.find(".icon-case"),s=t.find(".password-confirm-icon"),o=t.find(".password-input-icon"),l=t.find(".icon-length"),c=t.find(".icon-number"),u=t.find(".password-check-wrap"),d=!1;t.on("keyup","#Password",function(){var e=f(this).val();i=e,d?u.hide():u.show(),10<=e.length?SCM.MyAccount.showValidPasswordCriteria(l):SCM.MyAccount.showInvalidPasswordCriteria(l),n.test(e)?SCM.MyAccount.showValidPasswordCriteria(a):SCM.MyAccount.showInvalidPasswordCriteria(a),r.test(e)?SCM.MyAccount.showValidPasswordCriteria(c):SCM.MyAccount.showInvalidPasswordCriteria(c),l.hasClass("green")&&a.hasClass("green")&&c.hasClass("green")?(d=!0,u.fadeOut(1500),o.hide(),e===t.find("#ConfirmPassword").val()&&(s.hide(),t.find("#registerBtn").addClass("btn-green"),t.find(".register-button-overlay").hide())):(d=!1,u.show(),o.show()),""!==e&&null!==e||(u.hide(),o.hide())}),t.on("keyup","#ConfirmPassword",function(){var e=f(this).val();i===e?(s.hide(),d&&(t.find("#registerBtn").addClass("btn-green"),t.find(".register-button-overlay").hide())):""===e||null===e?s.hide():s.show()}),f(document).on("click",function(){u.hide()})},e.showValidPasswordCriteria=function(e){e.removeClass("icon-general-close red").addClass("icon-general-check green"),e.siblings(".password-check-label").addClass("fade")},e.showInvalidPasswordCriteria=function(e){e.removeClass("icon-general-check green").addClass("icon-general-close red"),e.siblings(".password-check-label").removeClass("fade")},e.initForgotPassword=function(){var o=f("#forgot-password").find(".error-message").html();f("#forgotPasswordBtn").on("click",function(){var n=f("#forgot-password"),r=n.find(".success-message"),i=n.find(".error-message"),e="";r.html("").hide(),i.html(o).hide();var a=n.find("#contactEmail").val(),s=n.find("#hfCaptchaEnabledForForgotPassword").val(),t={email:a};"1"===s&&(t.captchaChallenge="not empty",t.captchaResponse=grecaptcha.getResponse()),0===t.email.length&&(e+="<p> * "+f("label[for=contactEmail]").text().replace("*","")+"</p>"),"1"===s&&0===t.captchaResponse.length&&(e+="<p> * Captcha</p>"),0===e.length?f.post("/UserDashboard/ForgotPassword",t,function(e){var t;null==e||""==e?(t=n.find(".success-message-template").html().replace("{0}",a),r.html(t).show()):(i.html(e).show(),f("html, body").animate({scrollTop:n.offset().top},10)),"1"===s&&f("#recaptcha_reload").trigger("click")},"html"):(i.append(e).show(),f("html, body").animate({scrollTop:n.offset().top},10))})},e.initResetPassword=function(){f("#changePasswordBtn").on("click",function(){var n=f("#change-password"),r=n.find(".success-message"),i=n.find(".error-message"),e=n.find(".default"),t=f.deparam.querystring().t,a=n.find("#newPassword").val(),s=n.find("#confirmNewPassword").val();e.removeClass("default"),f.post("/UserDashboard/ResetPassword",{token:t,newPassword:a,confirmNewPassword:s},function(e){var t;null==e||""==e?((t=f.deparam.querystring().returnUrl)&&window.location.assign(t),r.show(),i.hide()):(r.hide(),i.html(e).show(),f("html, body").animate({scrollTop:n.offset().top},10))},"html")})},e.countSubjectChoices=function(){f("#communication-preferences-subject-choices").find(".topics-selected-wrap").each(function(){var e=f(this).closest("li").find("input[type=checkbox]"),t=e.filter(":checked");f(this).find(".totalCount").html(e.length),f(this).find(".checkedTotal").html(t.length),f(this).show()})},e.changeUserTypeSubjects=function(t){var e=f("#communication-preferences");f("#userTypeSubjectHeader").hide();var n=e.find("#userTypes").val();"3"===n&&f("#userTypeSubjectHeader").show(),e.find("ul#userTypeSubjects > li").each(function(){var e=f(this).find("input[type=checkbox]");f(this).attr("data-classification-id")===n?(f(this).show(),t&&e.prop("checked",e.data("checked"))):(f(this).hide(),t&&e.prop("checked",!1))})}}(SCM.MyAccount=SCM.MyAccount||{},jQuery),$(document).ready(function(){$(document).on("click",".myaccount-tabs-inner-wrap div",function(){$(".tabbed-content-overlay").show()}),$("#myaccount-tabs-content").on("DOMSubtreeModified",function(){$(".tabbed-content-overlay").hide()}),$("#institutionalLogoURL").keyup(function(){$(".logoPreview").attr("src",$(this).val()),$(".logoPreview").error(function(){$(this).attr("src","/Images/grey.gif")})})});var SCM=SCM||{};SCM.SearchResults={},SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"SearchResults",baseSiteUrl:"",updateTargetSelector:".content-main_content",onHashChange:function(e){}},function(e,u){function d(t,n){t.on("keydown",function(e){if(13===e.which&&isYearOnly(t.val()))return updateYearOnlyToFullDate(t,n),e.preventDefault(),e.stopImmediatePropagation(),!1}).datepicker()}function r(e,t,n){e.find(".sf-facet").length>t&&(e.find(".sf-facet:gt("+(t-1)+")").hide(),e.find(".facetShowMoreTax").length||e.parents(".sf-facet").length||e.append('<li><a href="javascript:;" class="'+n+'">Show more</a></li>'))}function i(e,t,n){e.closest(n).find(".sf-facet:gt("+(t-1)+"):visible").length?(e.closest(n).find(".sf-facet:gt("+(t-1)+"):visible").animate({height:"toggle"},400),e.text("Show more")):(e.closest(n).find(".sf-facet").not(":visible").animate({height:"toggle"},400),e.text("Show less")),event.preventDefault()}function s(){0<=window.location.search.indexOf("&cqb=")&&(u("#btnReturnAdvancedSearch").removeClass("hide"),u(".querybuilder-wrap").addClass("hide"));var e=u("#queryBuilderSubmit").data("currentUrl");u("#btnReturnAdvancedSearch").click(function(){window.location.href=location.protocol+"//"+u("#hfSiteURL").val()+"/advanced-search?"+e})}function t(e){e.hasClass("icon-general-arrow-filled-right")?e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")}function o(){u(".taxonomy-parent-arrow").on("click",function(){var e=u(this);e.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle(),t(e)}),u(".js-taxonomy-umbrella-toggle").on("click",function(){var e=u(this);u(".taxonomy-tree-wrap").slideToggle(),$icon=e.find(".taxonomy-umbrella-arrow"),t($icon)})}e.AddShowMoreLinks=function(){var e,t,n=u("#js-hf-facet-toggle-limit").val();e=n=n||12,u(".collapsible-facet .sf-facet-list").each(function(){r(u(this),e,"facetShowMore")}),u(".facetShowMore").off("click"),u(".facetShowMore").on("click",function(){i(u(this),e,".sf-facet-list")}),t=n,u(".taxonomy-tree-wrap").each(function(){r(u(this),t,"facetShowMoreTax")}),u(".facetShowMoreTax").off("click"),u(".facetShowMoreTax").on("click",function(){i(u(this),t,".taxonomy-tree-wrap")}),u(document).on("click",".js-sri-journal-description-container a",function(e){e.preventDefault(),u(this).closest(".js-sri-journal-description-container").find(".js-sri-journal-description").toggleClass("hide")})},SCM.SearchResults.AddShowMoreLinks(),s(),o();var l,f={},p=window.location.search.substring(1);window.onpopstate=function(e){e.state&&e.state.queryString&&SCM.SearchResults.doSolrSearch(e.state)},function(){var e=u(SCM.SearchResults.defaults.updateTargetSelector);f[p]={results:e.html()},window.history.replaceState({queryString:p},null,null);var t=u("#fromDate"),n=u("#ToDate");u("#fromDate").datepicker(),u("#ToDate").datepicker();var r=!0;Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};function i(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e);if(null!=t){var n=t[2],r=t[1]-1;return 2==(e=t[3]).length&&(e="20"+e),(t=new Date(e,r,n)).getDate()==n&&t.getMonth()==r&&t.getFullYear()==e}}function a(e){return(e=/^(\d{4})$/.exec(e))&&-1<e[1]}function s(e,t){var n=e.val(),r=null,i=null,i=t?r="01":(r="12","31");return e.val(r+"/"+i+"/"+n),e.val()}function o(e){var t=(a=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e))[1],n=a[2],r=a[3],i=n,e=t,a=r;return 2==r.length&&(a="20"+r),1==n.length&&(i="0"+n),(e=1==t.length?"0"+t:e)+"/"+i+"/"+a}e.on("click",".chkSelect",function(){SCM.SearchResults.doSolrSearch({queryString:u(this).data("redirectUrl"),source:"searchresults"})}),e.on("click","a.close",function(e){var t=u(this).attr("data-url");null!=t&&"#"!=t&&(e.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t,source:"searchresults"})),d(u("#fromDate"),!0),d(u("#ToDate"),!1)}),e.on("click",".rbShowFacet",function(e){e.preventDefault(),"False"==u(this).attr("previous-status")&&(e=u(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"}))}),e.on("click","#solrSearchBtn",function(){var e=u("#txtSearch").val();null==e||""==e?alert("Please enter a term to perform search"):(e=encodeURIComponent(e),SCM.SearchResults.doSolrSearch({queryString:"q="+e}))}),e.on("click","#btnRangeSearch",function(){var e=u("#fromDate").val();a(e)&&(e=s(u("#fromDate"),!0));var t=u(".date-range-input-radio[value=single]").is(":checked")?e:u("#ToDate").val();""!==t&&a(t)&&(t=s(u("#ToDate"),!1)),i(e)&&i(t)?(e=o(e),t=o(t),new Date(t)<new Date(e)?alert("End Date must be greater than Start Date"):(t=u(this).attr("data-url").replace("queryText",e+" TO "+t),SCM.SearchResults.doSolrSearch({queryString:t,source:"searchresults"}))):alert("Please enter valid dates")});function l(e){return"string"==typeof e?"true"==e.toLowerCase():!!e}function c(){var e,t={UserEmail:u("#UserEmail").val(),ResourceTitle:u("#ResourceTitle").val(),AlertType:u("#AlertType").val(),CurrentUserEmail:u("#CurrentUserEmail").val(),IsUserAlreadySubscribed:l(u("#IsUserAlreadySubscribed").val()),SuccessfulUpdate:u("#SuccessfulUpdate").val(),ResourceId:u("#ResourceId").val(),ResourceType:u("#ResourceType").val(),SearchTerm:u("#SearchTerm").val(),SearchUrl:u("#SearchUrl").val(),CurrentAlertContextSiteId:u("#CurrentAlertContextSiteId").val(),ShowSaveSearchToUnauthenticatedUser:l(u("#ShowSaveSearchToUnauthenticatedUser").val()),UserIsLoggedIn:l(u("#UserIsLoggedIn").val())};null!=t.IsUserAlreadySubscribed&&t.IsUserAlreadySubscribed?(e=u("#Config_SearchAlertMyAccoutUrl").val(),window.location.href=e):t.ShowSaveSearchToUnauthenticatedUser&&!t.UserIsLoggedIn?(ShowSignInForSearchAlertSignUp(),r=!0):u.post("/Toolbox/ToolboxGetAlertsUpdateMessage",t,function(e){r=!0,alert("Alert Saved Sucessfully. Visit My Account page to manage your email alerts"),u("#divSearchAlerts").html(e),u("#divSearchAlerts a").on("click",function(e){e.preventDefault(),c()})})}e.on("click","#divSearchAlerts a",function(e){e.preventDefault(),r&&(r=!1,c())}),d(t,!0),d(n,!1)}(),SCM.SearchResults=u.extend(SCM.SearchResults,(l=jQuery,{doSolrSearch:function(t){function n(e){e.getBoundingClientRect().top<0&&l("html, body").animate({scrollTop:e.offsetTop},1e3)}function r(e){null===window.history.state?window.history.replaceState(e,null,window.location.pathname+"?"+e.queryString):window.history.state.queryString!=e.queryString&&window.history.pushState(e,null,window.location.pathname+"?"+e.queryString)}var i=l.extend(SCM.SearchResults.defaults,t),a=l(i.updateTargetSelector);if(f[t.queryString])return a.html(f[t.queryString].results).show(),SCM.SolrSearch.ajaxComplete(),n(a[0]),o(),r(t),s(),App.SiteJS.mobileContentNav(),void l("body").removeClass("on-canvas");var e=l.deparam.querystring().page;e&&1!==parseInt(e)&&(t.queryString=t.queryString.replace("page="+e,"page=1"));e="/"+i.controller+"/"+i.action+"/"+i.instanceName;void 0!==i.baseSiteUrl&&""!==i.baseSiteUrl&&(e="//"+i.baseSiteUrl+e),e+="?"+t.queryString,"155"===l("#hdnSiteID").val()&&window.location.href.indexOf("/map-results?")<0?window.location.href="?"+t.queryString:l.ajax({url:e,success:function(e){a.html(e),n(a[0]),f[t.queryString]={results:e,updateTargetSelector:i.updateTargetSelector},d(l("#fromDate"),!0),d(l("#ToDate"),!1),App.SiteJS.mobileContentNav(),l("body").removeClass("on-canvas"),"undefined"!=typeof clientViewOption&&""!==clientViewOption&&(e=l(".sri-expandedView"),"Expanded"===clientViewOption?e.show():e.hide()),o(),r(t),s(),t.hasOwnProperty("source")&&0<window.location.pathname.indexOf("map-results")&&"heatmap"!==t.source&&SCM.SearchMap.searchUpdated(),SCM.JournalCitationFilter&&SCM.JournalCitationFilter.init(),SCM.SearchResults.AddShowMoreLinks()},error:function(e){console.error(e)}})}}))}(SCM.SearchResults=SCM.SearchResults||{},jQuery);var App=App||{};!function(s,c){var e=window.location.protocol+"//"+window.location.host,t=c("#hfSolrAutoSuggestMinimumCharactersLength").val(),u="Learning";function a(e,t){return function(){t.apply(e,arguments)}}function n(e,t,n,r,i){this.searchInputControlId=document.querySelector("[data-autosuggest-id='"+e+"']"),this.searchInputHintControlId=document.querySelector("[data-autosuggest-id='"+t+"']"),this.autoCompleteResultsControlId=document.querySelector("[data-autosuggest-id='"+n+"']"),this.isMicrosite=r,null!==i?(this.siteFilterDropDownSelectID=document.querySelector("[data-autosuggest-id='"+i+"']"),this.siteFilterDropDownSelectID&&this.siteFilterDropDownSelectID.addEventListener("change",a(this,this.filterSuggestions),!1)):this.siteFilterDropDownSelectID=!1,null!==this.searchInputControlId&&(this.searchInputControlId.addEventListener("keydown",a(this,this.interceptKeys),!1),this.searchInputControlId.addEventListener("input",debounce(a(this,this.evaluateTerms),250),!1),c(this.searchInputControlId).on("blur",a(this,this.hideResultsList)),c(this.searchInputControlId).on("focus",a(this,this.showResultsList)))}(n.prototype={solrUrl:"/solr/SolrAutoSuggest",baseURL:e,inputTerms:!1,termsArray:!1,baseTerms:!1,terms:!1,results:[],selectedResult:-1,contentID:!1,isSearching:!1,lookupCache:{}}).filterSuggestions=function(){this.selectedResult=-1,this.inputTerms.length>=t&&this.getSuggestions()},n.prototype.evaluateTerms=function(){if(this.resetSelection(),this.inputTerms=this.searchInputControlId.value.toLowerCase(),0===this.inputTerms.length)return this.isSearching=!1,void this.resetAutoComplete();this.inputTerms.length>=t&&!this.isSearching&&this.getSuggestions(),(this.terms.length<=1||this.searchInputControlId.value!==this.inputTerms)&&this.clearHint()},n.prototype.getJournalURL=function(e,t,n){return"f_JournalDisplayName="+encodeURIComponent(e.trim())+t+(n?"&"+n:"")},n.prototype.getLearningURL=function(e,t){return t?t+e:"hd=learning"+e+"&f_HasCME=true"},n.prototype.getSearchParams=function(){var e="",t=this.getSiteId();return 0<t&&(e=(e.length?"&":"")+"fl_SiteID="+t),this.siteFilterDropDownSelectID?e:"allJournals=1&SearchSourceType=24"},n.prototype.getSiteId=function(){var e=0;return e=this.siteFilterDropDownSelectID?parseInt(c(this.siteFilterDropDownSelectID).children("option:selected").data("siteid")):e},n.prototype.lookupFromCache=function(e){var a=this;return a.lookupCache[e]||(function(e){for(var t=Object.getOwnPropertyNames(a.lookupCache),n=0;n<t.length;n++){var r=t[n],i=a.lookupCache[r];if(!(0!==e.indexOf(r)||i&&i.length))return!0}return!1}(e)?(a.lookupCache[e]=[],[]):null)},n.prototype.getSuggestions=function(){var t=this,e=t.lookupFromCache(t.inputTerms);e?e.length?this.formatSuggestions(e):t.resetAutoComplete():(e=t.getSiteId(),t.isSearching=!0,c.ajax({url:t.solrUrl,data:0<e?{searchTerm:t.inputTerms,siteID:e}:{searchTerm:t.inputTerms},success:function(e){t.isSearching=!1;e=t.parseSuggestionData(e);e&&e.length?(t.lookupCache[t.inputTerms]=e,t.formatSuggestions(e)):(t.lookupCache[t.inputTerms]=[],t.resetAutoComplete())},error:function(){t.isSearching=!1},cache:!0}))},n.prototype.parseSuggestionData=function(e){if(!e)return[];for(var t=[],n=0;n<s.autoSuggestFields.length;n++){var r=e[s.autoSuggestFields[n]];if(r&&r.length)for(var i=0;i<r.length;i++){var a=r[i];0!==n&&-1!==t.indexOf(a)||t.push(a)}}return 1<t.length&&t.sort(),t},n.prototype.formatSuggestions=function(e){var t,n=e;this.results=[],this.siteFilterDropDownSelectID&&(t=c("#"+this.siteFilterDropDownSelectID.id+" option:selected").text());var r=c(".cs-placeholder").text(),i="",a=c(this.siteFilterDropDownSelectID).find("option:selected").val();if(0<n.length)if(this.inputTerms&&-1!==n[0].Key.indexOf(this.inputTerms)){for(var s,o,l=0;l<n.length;l+=1)o=a?{value:n[l].Key,url:a.replace("{searchQuery}",n[l].Key),position:"sr"+this.autoCompleteResultsControlId.id+(l+1)}:(s=this.baseURL,i=t===u||t!==r&&r===u?"/learning/searchresults?q=":"/search-results?q=",o=this.getSearchParams(),{value:n[l].Key,url:s+i+encodeURIComponent(n[l].Key)+(o.length?"&"+o:""),position:"sr"+this.autoCompleteResultsControlId.id+(l+1)}),this.results.push(o);this.setHint(n[0].Key),this.appendResults()}else this.inputTerms||this.getSuggestions();else this.resetAutoComplete()},n.prototype.setHint=function(e){this.searchInputControlId.value===this.inputTerms&&(this.searchInputHintControlId.value=e)},n.prototype.clearHint=function(){this.searchInputHintControlId.value=""},n.prototype.appendResults=function(){var e="";"term-list"!==this.autoCompleteResultsControlId.className&&(this.autoCompleteResultsControlId.className="term-list");for(var t=0;t<this.results.length;t++){var n=this.results[t];e+='<li><a href="'+n.url+'" id="'+n.position+'">'+this.results[t].value+"</a></li>"}this.autoCompleteResultsControlId.innerHTML=e},n.prototype.hideResultsList=function(){var e=this;setTimeout(function(){e.autoCompleteResultsControlId.className="term-list term-list--hidden"},200)},n.prototype.showResultsList=function(){this.autoCompleteResultsControlId.className="term-list"},n.prototype.resetResultsList=function(){this.autoCompleteResultsControlId.innerHTML="",this.hideResultsList()},n.prototype.resetSelection=function(){var e=-1!==this.selectedResult&&this.results[this.selectedResult].position;e&&c("#"+e).removeClass("active"),this.selectedResult=-1},n.prototype.resetAutoComplete=function(){this.results=[],this.resetResultsList(),this.clearHint()},n.prototype.completeTerms=function(){var e=this.searchInputControlId.selectionStart,t=this.searchInputControlId.selectionEnd;return!!(e===t&&t===this.inputTerms.length&&this.results&&0<this.results.length)&&(this.searchInputControlId.value=this.results[0].value,this.evaluateTerms(),!0)},n.prototype.navigateResults=function(e){var t,n=this.selectedResult+e;oldResultId=-1!==this.selectedResult&&this.results[this.selectedResult].position,n<this.results.length&&-1<n?(t=this.results[n].position,oldResultId&&c("#"+oldResultId).removeClass("active"),c("#"+t).addClass("active"),this.selectedResult+=e):!oldResultId&&0<this.results.length?(t=this.results[this.results.length-1].position,c("#"+t).addClass("active"),this.selectedResult=this.results.length-1):this.resetSelection()},n.prototype.keyFunctions=function(e,t){39===t&&this.completeTerms()&&e.preventDefault(),38===t&&(e.preventDefault(),this.navigateResults(-1)),40===t&&(e.preventDefault(),this.navigateResults(1)),13===t&&-1<this.selectedResult&&(e.preventDefault(),e=c("#"+this.autoCompleteResultsControlId.id+" .active").attr("href"),this.searchInputControlId.value=c("#"+this.autoCompleteResultsControlId.id+" .active").text(),this.searchInputHintControlId.value=c("#"+this.autoCompleteResultsControlId.id+" .active").text(),window.location=e)},n.prototype.interceptKeys=function(e){this.searchInputControlId.value.toLowerCase().length<=255&&this.keyFunctions(e,e.keyCode)},s.init=function(e){s.autoSuggestFields=e,c(".search-term-autosuggest").each(function(){var e=c(this);new n(e.data("autosuggest-id"),e.data("autosuggest-hint"),e.data("autosuggest-results"),!1,e.data("searchfilter"))})}}(App.SearchAutoComplete=App.SearchAutoComplete||{},(SCM.JSUtility,jQuery));var SCM=SCM||{};!function(SolrSearch,$,undefined){var bodyVar=$("body"),hfParentSiteName=$("#hfParentSiteName"),queryText="",baseSiteURL=$("#hfSiteURL");void 0!==baseSiteURL&&""!==baseSiteURL.val()&&(SCM.SearchResults.defaults.baseSiteUrl=baseSiteURL.val());var testSearchInput=function(e){if(""===hfParentSiteName.val())return""===$.trim(e)||null===e||"Search"===e?(alert("Please enter a term to search: "),!1):e?(doSolrSearch(e),!0):(alert("SCM.SolrSearch.testSearchInput() fail"),!1);doSolrSearch(e)},testKeypress=function(e,t){13===e.keyCode&&(e.preventDefault(),testSearchInput(t))};function doSolrSearch(e,t){var n=t;n||(t="q"),queryText=encodeURIComponent(e);var r=$("#hfQuickSearchUrl").val(),e="";r&&!n?linksToExternalPage(e=r.replace("{searchQuery}",queryText))?window.open(e,"_blank"):window.location=e:(e="search-results?page=1&"+t+"="+queryText+"&SearchSourceType=1",(t=$("#hfSiteURL")).length&&(e="//"+t.val()+"/"+e),window.location.href=e)}function linksToExternalPage(e){return!e.startsWith("/")&&!new RegExp("/"+window.location.host+"/").test(e)}function initDateRangeToggle(){$(".date-range-input-radio").on("click",function(){"single"===$(this).attr("value")?($(".date-input-to").hide(),$(".date-label-from span").text("Search on this date")):($(".date-input-to").show(),$(".date-label-from span").text("From"))})}var saveSolrSearchInfo=function saveSolrSearchInfo(solrSearchSaveModel){var txtSolrSearchName=$(".txtSolrSearchName");if(""===$.trim(txtSolrSearchName.val())||null===txtSolrSearchName.val())return alert("Please enter a name"),!1;var ddlSearchAlertFrequency=$("#ddlSearchAlertFrequency"),redirectUrl=$("#hdnSearchSaveRedirectUrl"),currentUrl=window.location.href,data=JSON.stringify({searchName:txtSolrSearchName.val(),url:currentUrl,scheduleId:ddlSearchAlertFrequency.val(),redirectUrl:redirectUrl.val()}),ajaxUrl=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Solr/SaveSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){e.RedirectUrl&&e.RedirectUrl.length?window.location=e.RedirectUrl:(alert(e.Html),$(solrSearchSaveModel).closest(".reveal-modal").removeClass("open"),$("body").removeClass("on-canvas"))},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})};function buildSaveSearchUiEvent(){var e=$(".lnkSaveSolrSearch"),n=$(".solrSearchSaveModel"),t=$(".btnSolrSearchSave"),r=$(".txtSolrSearchName");e.off("click").on("click",function(){var e,t=$(this).attr("data-userloggedin");t!==undefined&&"false"===t.toLowerCase()?(e=$("#hdnSearchSaveRedirectUrl"),t=window.location.href,window.location=e.val()+"?returnUrl="+encodeURIComponent(t+"#triggerSaveSearch=1")):(n.addClass("open"),$("body").addClass("on-canvas"))}),t.off("click").on("click",function(){saveSolrSearchInfo(n)}),r.off("keypress").on("keypress",function(e){13===(e.keyCode||e.which)&&saveSolrSearchInfo(n)})}function restrictedImagesSearch(){$("div.sri-figure[restricted]").each(function(){$(this).off("contextmenu").on("contextmenu",function(){return!1})})}function updateMapResultsButtons(){0<window.location.pathname.indexOf("map-results")&&($("#btnViewResultsInSearch").removeClass("hide"),$("#btnViewResultsInMapResults").addClass("hide"))}function bindUiEvents(){var e=$(".master-header").find(".microsite-search-icon"),t=$(".master-header").find(".microsite-search-term"),n=$(".master-header").find(".mobile-microsite-search-icon"),r=$(".master-header").find(".mobile-microsite-search-term"),i=$(".toolbar-search").find(".microsite-search-icon"),a=$(".toolbar-search").find(".microsite-search-term"),s=$("#UmbrellaSearchIcon"),o=$("#UmbrellaHomeSearchIcon"),l=$("#UmbrellaSearchTerm"),c=$("#UmbrellaHomeSearchTerm"),u=$(".kwd-part"),d=initQuickSearchUrl(),f=$(".navbar-search-filter-mobile"),p=$(".navbar-search-filter-site");s.on("click",function(){testSearchInput(l.val())}),o.on("click",function(){testSearchInput(c.val())}),e.on("click",function(){testSearchInput(t.val())}),n.on("click",function(){testSearchInput(r.val())}),i.on("click",function(){testSearchInput(a.val())}),$(".searchLi .icon-search").on("click",function(){testSearchInput(t.val())}),u.on("click",function(){testSearchInput($(this).attr("data-keyword"))}),l.on("keypress",function(e){testKeypress(e,l.val())}),c.on("keypress",function(e){testKeypress(e,c.val())}),t.on("keypress",function(e){testKeypress(e,t.val())}),r.on("keypress",function(e){testKeypress(e,r.val())}),a.on("keypress",function(e){testKeypress(e,a.val())}),f.on("change",function(){sessionStorage.setItem("quickSearchUrlVal",$(this).val()),d.val($(this).val()),normalizeSelectedIndices($(this).prop("selectedIndex"))}),p.on("change",function(){sessionStorage.setItem("quickSearchUrlVal",$(this).val()),d.val($(this).val()),normalizeSelectedIndices($(this).prop("selectedIndex"))}),$(".master-main").on("click",".showAbstractLink",function(){$(this).closest(".sri-abstract-link").toggleClass("expanded"),$(this).closest(".sri-abstract-link").find(".abstract-response-placeholder").toggleClass("hide")})}function initQuickSearchUrl(){var e=$("#hfQuickSearchUrl"),t=sessionStorage.getItem("quickSearchUrlVal");return t&&e.val(t),e}function normalizeSelectedIndices(n){$(".navbar-search-filter-mobile, .navbar-search-filter-site").each(function(e,t){$(this).prop("selectedIndex",n)})}$("body").on("click","#btnViewResultsInMapResults",function(){var e=location.search.substring(1);""!==SCM.SearchResults.defaults.baseSiteUrl&&(location.href="//"+baseSiteURL.val()+"/map-results?"+e)}),$("body").on("click","#btnViewResultsInSearch",function(){var e=location.search.substring(1);""!==SCM.SearchResults.defaults.baseSiteUrl&&(location.href="//"+baseSiteURL.val()+"/search-results?"+e)}),$("body").on("click",".taxonomy-label",function(){var e,t,n,r,i=$("#TaxonomyCurrentDataUrl").val();i=decodeURIComponent(i),""!==$(this).attr("data-parentid")&&(e=$(".taxonomy-node").attr("data-id"),t=$(this).parent(".taxonomy-label-wrap").attr("data-id"),-1!==(r=i.indexOf("tax"))?null!==(n=-1<(r=(n=i.substring(r)).indexOf("&"))?n.substring(0,r):n)&&""!==n&&(-1<n.indexOf("="+e)?i=i.replace(n,"tax="+t):-1===$.inArray(t,decodeURIComponent(n.slice(4)).split(","))&&(i=i.replace(n,n+","+t))):i+="&tax="+t,SCM.SearchResults.doSolrSearch({queryString:i,source:"searchresults"}))}),$("body").on("click",".js-facet-ext-link",function(){var e,t=window.location.href;0<=t.indexOf("q=")&&(e=SCM.Common.getQueryStringValue(t,"q"),(t=$(this).data("url")).length&&(e.length&&"*"!==e||(e=""),window.open(t.replace("{searchQuery}",e),"_blank")))}),SolrSearch.init=function(){bindUiEvents(),buildSaveSearchUiEvent(),initDateRangeToggle(),restrictedImagesSearch(),$(".js-main").on("click",".collapsible-facet .sf-group-header",function(){var e,t;$(window).outerWidth()<1024&&(t=(e=$(this)).children(".sf-group-header-icon"),e.siblings("fieldset").children(".sf-facets, .sf-facet-list").slideToggle(),e.siblings(".taxonomy-node").slideToggle(),t.hasClass("icon-general_arrow-right")?t.removeClass("icon-general_arrow-right").addClass("icon-general_arrow-down"):t.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right"))}),SCM.QueryBuilder.configure(),0<$(SCM.SearchResults.defaults.updateTargetSelector).length?SCM.QueryBuilder.defaults.runSearch=function(e){SCM.SearchResults.doSolrSearch({queryString:e,source:"searchresults"})}:($(".querybuilder-submit").attr("value","Search"),$(".querybuilder-title").text("Modify your search"),SCM.QueryBuilder.defaults.runSearch=function(e){var t=$("#hfSiteURL").val();-1===e.indexOf("q=")&&(e="q="+e),window.location=window.location.protocol+"//"+t+"/search-results?"+e}),$(".sort-dropdown-option:selected").addClass("selected");var t=(t=$("#js-topics-facet").val())||"f_SemanticFilterTopics";bodyVar.on("click",".sriTopiclink",function(e){doSolrSearch((queryText=$(this).text()).replace(",",""),t),e.preventDefault()}),bodyVar.on("click",".js-sriTopic-link",function(e){doSolrSearch(queryText=$(this).parent(".js-sriTopic-link-container").find(".js-sriTopic-link-categoryid").val(),t),e.preventDefault()}),bodyVar.on("click","#topicResultsWire",function(){var e=(e=location.search).substring(0,e.indexOf("&fd_JournalID"));window.location.href="solr/topicresults.aspx"+e})},SolrSearch.ajaxComplete=function(){buildSaveSearchUiEvent(),initDateRangeToggle(),restrictedImagesSearch(),SCM.QueryBuilder.configure(),updateMapResultsButtons(),SCM.SiteJS.initSearchResultsSort(),SCM.PDFAccess.init()},SCM.SolrSearch.init()}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery);var SCM=SCM||{};function GetReturnUrl(){var e,t=window.location.href;return 0<t.indexOf("?")&&(e=window.location.search.split("&"),t=t.substring(0,t.indexOf("?")),!e.length||(e=e.filter(function(e){return"login"!==e.split("=")[0].replace("?","")})).length&&(t+=e.join("&")),t+=window.location.hash),t}SCM.Utilities=SCM.Utilities||{},SCM.AddReturnUrlToSocietyLinks=function(){var t=GetReturnUrl(),t=encodeURIComponent(t),e=$("#hfPlaceholderReturnUrlValue"),n=e.length?e.val():null;$(".society-links-logo, .society-links-url").each(function(){var e;n&&n.length&&(e=$(this)).attr("href",e.attr("href").replace(n,t))})};var SCM=SCM||{};!function(e,l){e.getDocWidth=function(){return self.innerWidth||(document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:void 0)},e.rightPanelHeight=function(){-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&setTimeout(function(){var e;l(".panels").length&&(e=l(window).height()-l(".panels").offset().top,l(".panels").css("height",e),l(".dynamic-widget-inner-wrap").addClass("panel-scroll"))},5e3)},e.hasTabContent=function(e){var n=!0,e=e.find(".widget-dynamic-inner-wrap");return e&&e.length&&(n=!1,e.each(function(e,t){t=l(t).html();if(t&&t.length&&!/^\s*$/.test(t))return!(n=!0)})),n},e.checkInView=function(e,t){var n=l(".article"),r=n.height(),i=(n.scrollTop(),l(e).offset().top+n.offset().top+r/2),e=i+l(e).height(),r=0<=e&&i<=r,t=(e<0&&0<i||0<i&&i<=n.height())&&t;return r||t},e.ScrollToWindowHash=function(){var e,t=window.location.hash;l(".pg_ArticleSplitView, .pg_articlesplitview").length&&(t=(e=l(".tab-split-view-figures-and-tables-pane").find("span"+t)).parents(".dynamic-widget-inner-wrap"),l(t).length&&t.delay(100).animate({scrollTop:e.position().top-10},250))},e.JumpToPeerReviewTab=function(){var e,t,n=SCM.JSUtility.getParameterByName("peerReviewId",window.location.href);n&&l(".pg_ArticleSplitView, .pg_articlesplitview").length&&(e=l(".tab-split-view-peer-review-pane"),n=(t=l(document.getElementById(n))).parents(".dynamic-widget-inner-wrap"),l(n).length&&t.length&&(e.click(),n.delay(100).animate({scrollTop:t.position().top-10},250)))},e.jumpToTarget=function(e){var t=l(".panels").find('div[data-id="'+e+'"],div[content-id~="'+e+'"i]'),n=l(t).closest(".dynamic-widget-inner-wrap").attr("data-display-order"),e=l(t).closest(".aside").find(".tabs").find('.tab[data-tab="'+n+'"]');if(n)return l(e).click(),l(t).length&&(n=l('.dynamic-widget-inner-wrap[data-display-order="'+n+'"]')).delay(100).animate({scrollTop:n.scrollTop()+t.position().top-10},250),!1},e.jumpToTargetBySectionId=function(e){var t,n=l(e).closest(".dynamic-widget-inner-wrap").attr("data-display-order"),r=l(e).closest(".aside").find(".tabs").find('.tab[data-tab="'+n+'"]');return n?(l(r).click(),l(e).length&&(t=l('.dynamic-widget-inner-wrap[data-display-order="'+n+'"]')).scrollTop(t.scrollTop()+e.position().top-10)):((t=l(".article.js-content-splitview")).click(),t.scrollTop(e.position().top)),!1},e.jumpToSubSection=function(){var e=SCM.HashHandler.getHashReference("sectionID-");try{var t=l(e);t.length&&SCM.SplitScreen.jumpToTargetBySectionId(t)}catch(e){console.error(e)}},e.isSplitScreen=function(){return l(".js-splitview-aside").length},e.init=function(){l("body.pg_ArticleSplitView, body.pg_articlesplitview, body.pg_Chapter, body.pg_chapter").removeClass("pg_ArticleSplitView").addClass("pg_article pg_articlesplitview"),e.rightPanelHeight();var n=e.getDocWidth()<1024,s=l("body.pg_articlesplitview .tab"),t=l("body.pg_articlesplitview .panels > .dynamic-widget-inner-wrap"),r=l("body.pg_articlesplitview .panels"),i=l("body.pg_articlesplitview .article");l(".tabs").prepend('<a class="tab tab-FullTextCss"><i class="tab__icon icon-full-text icon-splitview_read"><span class="tab__icon-text">Full Text</span></i><div class="tab__text">Full Text</div></a>');var o=l(".tab-FullTextCss");l(".ref-list [data-content-id]").each(function(){var e=l(this).data("contentId");l(this).attr("data-id",e)}),l("body.pg_articlesplitview .widget-instance-SitePageFooter, body.pg_articlesplitview .site-theme-footer").appendTo(".article"),s.each(function(e){l(this).attr({"data-tab":e,role:"tab","aria-selected":"false"})});var a={};t.each(function(e){l(this).attr({role:"tabpanel","aria-hidden":"false"}),l(this).find("div[content-id]").each(function(){a[l(this).attr("content-id")]=e})}),l(".figure-table-wrapper .table-wrap-title").each(function(){l(this).attr("data-id",this.id)}),s.on("click",function(){n&&i.hide(),r.show(),s.add(o).removeClass("active").attr("aria-selected","false"),l(this).addClass("active").attr("aria-selected","true"),t.hide().attr("aria-hidden","true");var e=l(this).attr("data-tab");return t.eq(e).show().attr("aria-hidden","false"),!1}),l(".pg_articlesplitview").length&&(l(document).on("click","body.pg_articlesplitview a.xref-bibr[data-modal-source-id], body.pg_Chapter a.xref-bibr[reveal-id]",function(){var e,t=l(".ReferencesCss, .split-view-references-pane").parents(".dynamic-widget-inner-wrap"),n=l(".tab-ReferencesCss, .tab-split-view-references-pane"),r=l(this).data("modalSourceId").toLowerCase(),i=l(".aside .ref-list").find('div[data-id="'+r+'"]');i.length||((e=r.split(" ")).length&&(r=e[0]),i=l(".aside .ref-list").find('div[data-id="'+r+'"]'));t=t.attr("data-display-order");n.hasClass("active")||n.click();t=l('.dynamic-widget-inner-wrap[data-display-order="'+t+'"]');i.length&&t.delay(100).animate({scrollTop:t.scrollTop()+i.position().top-10},250)}),l("body.pg_articlesplitview a[reveal-id]:not(.xref-corresp):not(.split-view-modal)").on("click",function(){var e=l(this).attr("reveal-id").split(" ")[0];return SCM.SplitScreen.jumpToTarget(e)}),l("body.pg_articlesplitview .xref-fn a:not(split-view-modal)").on("click",function(){var e=l(".tab-ReferencesCss, .tab-split-view-references-pane");e.length&&!e.hasClass("active")&&e.click()}),l("#revealModal.reveal-modal").addClass("fn-modal"),l(".article").scroll(function(){var i=l(".article").scrollTop(),a=l(".article .book-chapter-body");l(".jumplink-heading").each(function(){var e,t,n=l(this).offset().top-20,r=l(".master-header").height();a.length?(e=l(this).data("magellan-destination"),t=l('.section-jump-link a[href="#'+e+'"]'),n<r&&n<i&&l(t).length&&(l(".section-jump-link.active").removeClass("active"),l(t).closest(".section-jump-link").addClass("active"))):(e=l(this).attr("id"),t=l('.section-jump-link__link-wrap a[href="#'+e+'"]'),n<r&&l(t).length&&(l(".jumplink-list li").removeClass("active"),l(t).closest(".section-jump-link").addClass("active")))})}),l('a.scrollTo[href*="#"]:not([href="#"])').on("click",function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=(e=l(this.hash)).length?e:l("[name="+this.hash.slice(1)+"]"),t=l(".article");if(e.length)return n&&l(".tab-FullTextCss").click(),t.delay(100).animate({scrollTop:t.scrollTop()+e.position().top},250),!1}})),o.on("click",function(){s.removeClass("active"),l(this).addClass("active"),r.hide(),i.show()}),l(window).on("resize",function(){!1===(n=e.getDocWidth()<1024)?(i.show(),0===l(".tab.active").not(".tab-FullTextCss").length&&l(".tab:visible").first().trigger("click")):0<l(".tab.active").not(".tab-FullTextCss").length&&l(".tab.active").trigger("click")}),l(function(){var a=0<l("#articlefulltext_figshare").length;t.each(function(e){var t=l(this).find(".widget-dynamic-inner-wrap"),n=t.html(),r=s.eq(e),i=r.is("[class*=supplement]");!n||0===n.length||/^\s*$/.test(n)?a&&i?(l(this).hide(),r.hasClass("js-hascontent")||r.hide()):(l(this).remove(),r.remove()):SCM.SplitScreen.hasTabContent(t)||a&&i||(l(this).remove(),s.eq(e).remove())}),!0===n?(r.hide(),l(o).addClass("active")):l(".tab:visible").first().trigger("click"),l(".linked-name").on("click",function(){l(this).parent(".al-author-name").position().left+300>l(".article").width()&&l(this).next(".al-author-info-wrap").addClass("al-author-info-wrap--right")}),l(".pg_Chapter").find(".tabs, .panels").css("display","inline-flex"),l('.pg_Chapter .tab[data-tab="1"]').addClass("active"),l('.pg_Chapter .panels .dynamic-widget-inner-wrap[data-display-order="1"]').show(),SCM.SplitScreen.jumpToSubSection()})}}(SCM.SplitScreen=SCM.SplitScreen||{},jQuery),function(e){e.init=function(){}}(SCM.ArticleFulltext=SCM.ArticleFulltext||{},jQuery);var SCM=SCM||{};function getQueryStringValue(e,t){var n=t+"=",t=e.indexOf(n);return-1===t?null:0<=e.indexOf("&",t+=n.length)?(n=e.indexOf("&",t),e.substring(t,n)):e.substring(t)}function isDefined(e){return void 0!==e&&null!=e&&""!==e}function jsonToQueryString(t){return Object.keys(t).filter(function(e){return isDefined(e)}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}SCM.JournalCitationFilter=function(u){var d="f_JournalDisplayName",f="rg_IssuePublicationDate",p="f_Volume",h="f_IssueNo",g="f_StartPage",e=null,t=null,n=null,r=null,i=null,m=null,v=null,y=null,b=null,w=null,S=null,C=null,x=null,k=null,a=null,s=null,j=null,M=null,A=null,T=null,D=null,I=null,_=null,R=null,F=null,P=null;function o(){var e=document.getElementById("hfJournalCitationFilterLoaded");return!(!e||!e.value)}function l(e,t){return t=t||"",(document.getElementById(e)||{}).value||t}function c(){s.classList.remove("collapsed"),-1!==a.className.indexOf("icon-general-arrow-filled-right")&&(a.classList.remove("icon-general-arrow-filled-right"),a.classList.add("icon-general-arrow-filled-down"))}return{init:function(){o()&&(e=getQueryStringValue(location.search,d),t=getQueryStringValue(location.search,f),n=getQueryStringValue(location.search,p),r=getQueryStringValue(location.search,h),i=getQueryStringValue(location.search,g),m=document.getElementById("SelectedJournal"),v=document.getElementById("Citation_IssuePublicationDate"),y=document.getElementById("Citation_Volume"),b=document.getElementById("Citation_IssueNo"),w=document.getElementById("Citation_StartPage"),S=isDefined(v)?v.getAttribute("pattern"):null,C=isDefined(y)?y.getAttribute("pattern"):null,x=isDefined(b)?b.getAttribute("pattern"):null,k=isDefined(w)?w.getAttribute("pattern"):null,a=document.getElementsByClassName("js-journal-citation-filter-toggle")[0],s=document.getElementsByClassName("journal-citation-filter-input-wrap")[0],j=l("Config_PlaceholderTextJournal"),M=l("Config_PlaceholderTextYear"),A=l("Config_PlaceholderTextVolume"),T=l("Config_PlaceholderTextIssueNo"),D=l("Config_PlaceholderTextStartPage"),I=l("Config_ValidationMessageJournal"),_=l("Config_ValidationMessageYear"),R=l("Config_ValidationMessageVolume"),F=l("Config_ValidationMessageIssueNo"),P=l("Config_ValidationMessageStartPage"),!0===function(){if(isDefined(e)&&isDefined(m)||isDefined(t)&&isDefined(v)||isDefined(n)&&isDefined(y)||isDefined(r)&&isDefined(b)||isDefined(i)&&isDefined(w))return v.value=function(e){if(!isDefined(e))return"";var t=decodeURIComponent(e).split("TO").map(function(e){return e.replace("+","")});return e=0<t.length?t[0]:e,new Date(e).getUTCFullYear()}(t),y.value=n,b.value=r,w.value=i,!0;return!1}()&&c())},applyFilter:function(e,t){var n,r,i,a,s;if(!(c=(n=isDefined(m)&&0<m.options.length&&isDefined(m.options[m.selectedIndex])?m.options[m.selectedIndex].textContent:"",r=isDefined(v)?v.value:"",i=isDefined(y)?y.value:"",a=isDefined(b)?b.value:"",s=isDefined(w)?w.value:"",l={},c="",n===j&&""!==n?c=I+"\n":""!==n&&(l[d]=u.trim(n)),r!==M&&""!==r&&(n=new RegExp(S),isNaN(r)||!n.test(r)?c+=_+"\n":l[f]="01/01/"+r+" TO 12/31/"+r),i!==A&&""!==i&&(new RegExp(C).test(i)?l[p]=i:c+=R+"\n"),a!==T&&""!==a&&(new RegExp(x).test(a)?l[h]=a:c+=F+"\n"),s!==D&&""!==s&&(new RegExp(k).test(s)?l[g]=s:c+=P+"\n"),0<c.length?(alert(c),!1):l)))return!1;var o,l=jsonToQueryString(c),e=(c=(c=e).split("&"),o=[d,f,p,h,g,"page"],(c=c.filter(function(e){e=e.split("=")[0];return o.indexOf(e)<0})).push("page=1"),c.join("&").trim()),c="",l=l;return e&&(l+="&"+e),(c=t?t.split("&").filter(function(e){e=e.split("=")[0];return"dateFilterType"===e||"noDateTypes"===e}).join("&").trim():c)&&(l+="&"+c),c={queryString:l},void 0!==(l=u("#hfSiteURL"))&&""!==l.val()&&(SCM.SearchResults.defaults.baseSiteUrl=l.val()),SCM.SearchResults.doSolrSearch(c),!1},toggleWidget:function(){-1!==s.className.indexOf("collapsed")?c():(s.classList.add("collapsed"),-1!==a.className.indexOf("icon-general-arrow-filled-down")&&(a.classList.remove("icon-general-arrow-filled-down"),a.classList.add("icon-general-arrow-filled-right")))},journalCitationFilterLoaded:o}}(jQuery),$(document).ready(function(){function t(){var e=$(".js-journal-citation-filter-update").data("searchUri"),t=window.location.search;t.length&&(t=t.substring(1)),SCM.JournalCitationFilter.applyFilter(e,t)}function n(){$(document).ajaxStart(function(){$(".info-inner-cover").removeClass("uncovered"),$(".info-inner-cover").addClass("covered")}),$(document).ajaxComplete(function(){$(".info-inner-cover").removeClass("covered"),$(".info-inner-cover").addClass("uncovered")})}SCM.JournalCitationFilter.journalCitationFilterLoaded()&&(SCM.JournalCitationFilter.init(),$(document).on("click",".js-journal-citation-filter-update",function(){$(this).addClass("fade"),n(),t()}),$(document).on("keyup",".js-advanced-citation-filter-field",function(e){13===e.keyCode&&(e.preventDefault(),$(".js-journal-citation-filter-update").addClass("fade"),n(),t())}),$(document).on("click",".js-journal-citation-filter-toggle",function(){SCM.JournalCitationFilter.toggleWidget()}),$(document).on("keyup change",".js-advanced-citation-filter-field",function(){$(".js-journal-citation-filter-update").removeClass("fade")}))});var SCM=SCM||{};!function(a,r){var i="";a.getGdprCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},a.createGdprCookie=function(e,t,n){var r=a.getCookieName(),n=n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),"; expires="+i.toGMTString()):"",i=r+"="+encodeURIComponent(t)+n+"; samesite=lax; secure; path=/",t=a.getCookieDomain(),n=null;t&&(document.cookie=i+";domain="+t,n=a.getGdprCookie(r)),t&&n||(document.cookie=i)},a.getCookieName=function(){if(i)return i;var e=r("#hdnClientIdGdpr").val(),t=a.getCookieDomain(),n="GDPR_";return e&&(n=n+e+"_"),t&&(n+=t),n},a.getCookieDomain=function(){return r("#hdnDomainGdpr").val()},a.hideGdprBanner=function(){var e,t=r(".gdpr-cookie-wrapper");navigator.cookieEnabled?(e=a.getCookieName(),a.getGdprCookie(e)&&t.hide()):t.hide()},a.gdprAcceptLinkClick=function(){r(".js-gdpr-cookie-acceptLink, .js-gdpr-cookie-close").on("click",function(){a.createGdprCookie("GDPR_",!0,365),a.hideGdprBanner(),SCM.ClientStatsMaster&&SCM.ClientStatsMaster.trackGdprCookieAcceptance&&SCM.ClientStatsMaster.trackGdprCookieAcceptance("1050","0","Cookie Acceptance")})},a.init=function(e){e&&(i=e),r(".gdpr-cookie-wrapper").show(),a.gdprAcceptLinkClick(),a.hideGdprBanner()}}(SCM.gdprCookieBanner=SCM.gdprCookieBanner||{},jQuery);var SCM=SCM||{};!function(n,r){var t;r("#sendEmailModal").length&&(t=r("#sendEmailModal")[0].outerHTML),n.htmlEscape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n.htmlUnescape=function(e){return String(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")},n.readModelValues=function(){return{ExplanatoryTextWithTitle:r("#ExplanatoryTextWithTitle").val(),SenderName:r("#SenderName").val(),SenderEmail:r("#SenderEmail").val(),CopySender:r("#CopySender").is(":checked"),RecipientEmail1:r("#RecipientEmail1").val(),RecipientEmail2:r("#RecipientEmail2").val(),RecipientEmail3:r("#RecipientEmail3").val(),RecipientEmail4:r("#RecipientEmail4").val(),RecipientEmail5:r("#RecipientEmail5").val(),Subject:r("#Subject").val(),OptionalMessage:r("#OptionalMessage").val(),SuccessfulSend:r("#SuccessfulSend").val(),SendersAccountId:r("#SendersAccountId").val(),ClientShortName:r("#ClientShortName").val(),ResourceTitle:r("#ResourceTitle").val(),BookId:r("#BookId").val(),ThankYouName:r("#ThankYouName").val(),ResourceId:r("#ResourceId").val(),ResourceType:r("#ResourceType").val(),FailedRecipients:r("#FailedRecipients").val(),LinkExpirationTime:r("#LinkExpirationTime").val(),HasAccess:r("#HasAccess").val()}},n.sendEmailClickEvents=function(){r("#revealSendEmail").click(function(e){e.preventDefault();e=r("#SuccessfulSend");e.length&&"True"===e.val()&&0<t.length&&(r("#sendEmailModal").replaceWith(t),r("#tseform").removeData("validator"),r("#tseformS").removeData("unobtrusiveValidation"),r.validator.unobtrusive.parse(r("#tseform")));e=r("#sendEmailModal");e.length&&(r("body").addClass("on-canvas"),e.addClass("open"))}),r(document).on("click",".tse-submit",function(e){e.preventDefault();var t=!0,e=r("#tseform");(t=0<e.length?e.valid():t)&&(r("#SenderName").val(n.htmlEscape(r("#SenderName").val())),r("#OptionalMessage").val(n.htmlEscape(r("#OptionalMessage").val())),t=n.readModelValues(),r("#sendEmailModal").addClass("on-canvas"),r.post("/Toolbox/ToolboxSendEmailModal/ToolboxSendEmailModel",t,function(e){r("#sendEmailModal").replaceWith(e)}).always(function(){r("#sendEmailModal").addClass("open"),r("#sendEmailModal").removeClass("on-canvas")}))})}}(SCM.ToolboxSendEmail=SCM.ToolboxSendEmail||{},jQuery,$(document)),jQuery(document).ready(function(e){SCM.ToolboxSendEmail.sendEmailClickEvents()});var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=SCM.Utilities.LocalStorage||{},SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=function(){var s="SharedWidgets.UserAffinities";return{AddToLocalStorage:function(e,t){var n=$(e);{var r,i,a;0!==n.length&&(r=n.attr("data-days-to-retain"),e=n.attr("data-resource-id"),n=n.attr("data-resource-type"),i=o(),a=function(e,t){var n=new Date,r=new Date((new Date).setDate(n.getDate()-t));return e.filter(function(e){return new Date(e.Date)>=r})}(a=(i=i||{Items:[]}).Items,r),n={resourceId:e,resourceTypeId:n},SCM.Ajax.get("/Personalization/GetCategoriesForResource",n).expectJson().then(function(e){0<e.Categories.length&&a.push(e),i.Items=a,SCM.Utilities.LocalStorage.setItem(s,i)}))}},GetFromLocalStorage:o,GetUserAffinityRecResults:function(t,e){var n,r,i=o();i&&i.Items.length&&(r=$(".SCM-SharedWidgets-LocalStorage-UserAffinityTracking"),n=r.data("resource-id"),r=r.data("resource-type"),i=i.Items,SCM.Ajax.post("/Personalization/UserAffinityRecSearchResults/"+e,{userAffinityJson:JSON.stringify(i),currentResourceId:n,currentResourceType:r}).expectHtml().then(function(e){$("#"+t).html(e)}))}};function o(){return SCM.Utilities.LocalStorage.getItem(s)}}();var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){"use strict";var r=window.localStorage;return{getItem:function(e,t){e=(t=t||r).getItem("SCM."+e);return JSON.parse(e)},setItem:function(e,t,n){(n=n||r).setItem("SCM."+e,JSON.stringify(t))},removeItem:function(e,t){(t=t||r).removeItem("SCM."+e)}}}(),SCM=SCM||{},SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LazyLoad=function(){var i="lazyLoadInit";return{init:function(e){try{var t="img."+(e=e||"lazy")+":not(."+i+")",n=[].slice.call(document.querySelectorAll(t));if(!n.length)return;("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?function(e,n){var t=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(a(e=e.target),e.classList.remove(n),t.unobserve(e))})},{rootMargin:"200px 0px 200px 0px"});e.forEach(function(e){t.observe(e),e.classList.add(i)})}:function(e,n){function r(){!1===t&&(t=!0,setTimeout(function(){e.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight&&0<=t.getBoundingClientRect().bottom&&"none"!==getComputedStyle(t).display&&(a(t),t.classList.remove(n),0===(e=e.filter(function(e){return e!==t})).length&&(document.removeEventListener("scroll",r),window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)))}),t=!1},200))}var t=!1;document.addEventListener("scroll",r),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),e.forEach(function(e){e.classList.add(i)})})(n,e)}catch(e){console.error("Exception during SCM.Utilities.LazyLoad.init()",e)}}};function a(e){e.src=e.dataset.src||e.dataset.original,e.dataset.srcset&&(e.srcset=e.dataset.srcset)}}(),SCM=SCM||{},SCM.Utilities=SCM.Utilities||{},SCM.Utilities.Reveal=function(n){var t="data-reveal-id",r="reveal-modal",i="close-reveal-modal",a="open",s="on-canvas",o=n(document.body);return{init:function(e){!function(e){e&&"object"===_typeof(e)&&(e.targetIdAttr&&(t=e.targetIdAttr),e.modalClass&&(r=e.modalClass),e.closeTriggerClass&&(i=e.closeTriggerClass),e.modalOpenClass&&(a=e.modalOpenClass),e.bodyOpenClass&&(s=e.bodyOpenClass))}(e);e="*["+t+"]";o.on("click",e,function(e){!function(e){e=n(e).attr(t),e=n("#"+e);e.length&&l(e)}(e.currentTarget)});e="."+i;o.on("click",e,function(e){!function(e){e=n(e).closest("."+r);e.length&&c(e)}(e.currentTarget)})},open:l,close:c,toggle:function(e){("string"==typeof e||e instanceof Element)&&(e=n(e));e.each(function(e,t){t=n(t);(t.hasClass(a)?c:l)(t)})}};function l(e,t){(e="string"==typeof e||e instanceof Element?n(e):e).addClass(a),t&&s&&o.addClass(s)}function c(e){(e="string"==typeof e||e instanceof Element?n(e):e).removeClass(a),s&&o.removeClass(s)}}(jQuery);var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.Focus=function(r){var i='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), input:not([disabled]):not([type="hidden"])';return{trap:function(e){var t=r(e).first();!function(e){var t=r(document.activeElement).first();e.data("lastFocusedElement",t)}(t);e=function(e){return e.find(i)}(t);(function(e,t){e.on("keydown.SCM.Focus",function(e){!e||"Tab"!==e.key&&"Tab"!==e.code||(e.shiftKey?function(e,t){e=e.filter(":visible");document.activeElement===e.first()[0]&&(e.last().trigger("focus"),t&&t.preventDefault&&t.preventDefault())}:function(e,t){e=e.filter(":visible");document.activeElement===e.last()[0]&&(e.first().trigger("focus"),t&&t.preventDefault&&t.preventDefault())})(t,e)})})(t,e),e.filter(":visible").first().trigger("focus")},release:function(e){e=r(e).first();e.off("keydown.SCM.Focus"),function(e){e=function e(t){t=r(t).first();if(t.is("body"))return t;if(t.is(i)&&t.is(":visible"))return t;var n=t.siblings(i).filter(":visible");if(n.length)return n.first();return e(t.parent())}(e.data("lastFocusedElement"));e&&e.length&&e.first().trigger("focus")}(e)}}}(jQuery);var SCM=SCM||{};SCM.Modals=function(r){var n,i,a,s="data-modal-source-id",o="data-modal-source-url",l="data-content-id",c="content-id";return{init:function(){a=r(document.body),n=r("#globalModalContainer"),i=r("#globalModalContent"),a.on("click","*["+s+"], *["+o+"]",e),a.on("click",".js-close-modal",t),a.on("click",".js-modal-overlay",t),a.on("keyup",function(e){e&&e.code&&"escape"===e.code.toLowerCase()&&t()})}};function e(e){var t,n=r(e.currentTarget);t=n,r(".pg_ArticleSplitView, .pg_articlesplitview").length&&t.hasClass("xref-bibr")||(e&&e.preventDefault&&e.preventDefault(),(e=(e=n.data(d(s)))&&e.trim().toLowerCase())?!(e=e)||"string"!=typeof e||(e=e.split(" ").map(function(e){return"*["+l+'="'+e+'"], *['+c+'="'+e+'"]'}).join(", "))&&(i.empty(),u(r(e))):(n=(n=n.data(d(o)))&&n.trim(),(n=n)&&SCM.Ajax.get(n).expectHtml().then(function(e){u(e)}).catch(function(e){console.error("Failed to display AJAX modal content.  ",e)})))}function u(e){var t;(e=e&&e.trim?e.trim():e)?(t=e)&&t.jquery?u(e.get().map(function(e){return e.outerHTML}).join("\n")):"string"==typeof e?(i.html(e),i.children().removeClass("modal-only-content"),a.addClass("modal-open"),n.addClass("open"),SCM.Focus.trap(n)):console.error("Request to show modal with unsupported content type: "+_typeof(e)):console.error("Request to show modal with no content")}function t(){n.removeClass("open"),a.removeClass("modal-open"),SCM.Focus.release(n)}function d(e){return e.replace(/^data-/,"").replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}}(jQuery);var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.Dropdowns=function(r){var n,i,a,s,e,t,o="active",l="expanded";return{init:function(){n=r(".js-theme-dropdown-trigger"),i=r(".js-theme-dropdown"),a=r("[data-theme-dropdown-trigger]"),s=r("[data-theme-dropdown]"),e=".js-theme-dropdown-trigger",t="[data-theme-dropdown-trigger]",r(document.body).on("click",e,function(e){var t=r(e.currentTarget),n=t.next(".js-theme-dropdown");e.stopPropagation(),c(t,n),t.toggleClass(o),n.toggleClass(l),"true"==t.attr("aria-expanded")?t.attr("aria-expanded","false"):t.attr("aria-expanded","true")}),r(document.body).on("click",t,function(e){var t=r(e.currentTarget),n=t.data("themeDropdownTrigger"),n=r('[data-theme-dropdown="'+n+'"');e.stopPropagation(),c(t,n),t.toggleClass(o),n.toggleClass(l),"true"===t.attr("aria-expanded")?t.attr("aria-expanded","false"):t.attr("aria-expanded","true")}),r(document.body).on("click",function(e){r(e.target).closest(".js-theme-dropdown.expanded, [data-theme-dropdown].expanded").length||(n.removeClass(o),n.attr("aria-expanded","false"),i.removeClass(l),a.removeClass(o),a.attr("aria-expanded","false"),s.removeClass(l))}),r(document.body).on("focusout","[data-theme-dropdown].expanded",function(e){var t=r(e.relatedTarget).parents("[data-theme-dropdown].expanded").length,n=null==e.relatedTarget;e.stopPropagation(),t||n||(a.removeClass(o),a.attr("aria-expanded","false"),s.removeClass(l))}),r(document.body).on("focusout",".js-theme-dropdown.expanded",function(e){r(e.relatedTarget).parents(".js-theme-dropdown.expanded").length||(e.stopPropagation(),n.removeClass(o),n.attr("aria-expanded","false"),i.removeClass(l))})}};function c(e,t){e.closest("[data-theme-dropdown].expanded, .js-theme-dropdown.expanded").length||(n.not(e).removeClass(o).attr("aria-expanded","false"),i.not(t).removeClass(l),a.not(e).removeClass(o).attr("aria-expanded","false"),s.not(t).removeClass(l))}}(jQuery);var SCM=SCM||{};SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=SCM.SharedWidgets.UserPersonalization||{},SCM.SharedWidgets.AsyncWidgetLoader=function(){return{LoadWidget:loadWidget};function loadWidget(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),"object"==_typeof(SCM.EventEmitter)&&SCM.EventEmitter.publish(elementClass+"_LOADED")},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}})})}function buildParameters(e){var t=JSON.parse(e),n=t.parameters,e=t.dynamicParameters;return void 0!==e&&void 0!==e.localParams&&"[REPLACE_WITH_LOCAL]"===e.localParams&&(t=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage(),e.localParams=t,n.Items=JSON.stringify(t)),n}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".SCM-SharedWidgets-AsyncWidgetLoader","data-url","data-params","POST")});var App=App||{};!function(e,r){e.Init=function(){r(".js-open-update-alerts-modal").off("click"),r(".js-delete-alert").off("click"),r(".js-update-alerts").off("click"),r(".js-alert-select").off("change"),r(".js-new-alert-select").off("change"),r(".js-open-update-alerts-modal").on("click",App.MyAlerts.OpenModal),r(".js-delete-alert").on("click",App.MyAlerts.DeleteAlert),r(".js-update-alerts").on("click",App.MyAlerts.UpdateAlerts),r(".js-new-alert-select").on("change",App.MyAlerts.UpdateScheduleIdAttribute),r(".js-alert-select").on("change",App.MyAlerts.UpdateAlertSchedule)},e.OpenModal=function(){var e=r("#"+r(this).data("reveal-id"));e&&(r(e).addClass("open"),r(".reveal-modal").css("top","25vh"),r("body").addClass("on-canvas"))},e.CloseModal=function(){r(this).closest(".reveal-modal").removeClass("open"),r("body").removeClass("on-canvas")},e.BuildAlertItem=function(e){var t={};return t.SiteId=e.data("siteid"),t.AlertType=e.data("alerttypeid"),t.ResourceId=e.data("resourceid"),t.ResourceTypeId=e.data("resourcetypeid"),t.IsSubscribed=!!e.prop("checked"),t.ScheduleId=e.data("scheduleid"),t.AlertGroupNumber=e.data("groupnumber"),t.SearchTerm=e.data("searchterm"),t},e.UpdateScheduleIdAttribute=function(){var e=r(this);e.prev('input[type="checkbox"]').attr("data-scheduleid",e.val())},e.UpdateAlertSchedule=function(){var e={};e.SiteId=r(this).data("siteid"),e.AlertType=r(this).data("alerttypeid"),e.ResourceId=r(this).data("resourceid"),e.ResourceTypeId=r(this).data("resourcetypeid"),e.IsSubscribed=!0,e.ScheduleId=r(this).val(),App.MyAlerts.PostUpdate([e],r(this))},e.DeleteAlert=function(){var e=App.MyAlerts.BuildAlertItem(r(this));App.MyAlerts.PostUpdate([e],r(this))},e.UpdateAlerts=function(){var e=r(this),t=e.closest("#"+r(this).data("modalid")).find('input[type="checkbox"]'),n=[];t.each(function(){var e=App.MyAlerts.BuildAlertItem(r(this));n.push(e)}),App.MyAlerts.PostUpdate(n,e)},e.PostUpdate=function(e,t){var r;(function n(e){return a(e).then(function(e){var t=r.splice(0,i);return t.length?n(t):e})})((r=e).splice(0,i)).then(function(e){t.closest(".js-alert-details").find(".close-reveal-modal").click(),t.closest(".js-alert-details").html(e),App.MyAlerts.Init()}).catch(function(e){alert("Unable to update your alerts, please contact customer service"),console.error(e)})};var i=100;function a(e){return r.ajax({type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Content/MyAlerts",cache:!1,data:JSON.stringify(e),contentType:"application/json"}).promise().then(function(e){return e||Promise.reject("Invalid response")})}jQuery(function(){App.MyAlerts.Init()})}(App.MyAlerts=App.MyAlerts||{},jQuery);var SCM=SCM||{},App=App||{};!function(r,i,a){var s="instOpenUrlKey_";r.replaceOpenUrlPlaceHolders=function(e,t){null!==t&&""!==t&&e.each(function(){var e=i(this).attr("data-targetId"),e=t.replace("{openUrlTargetId}",e);i(this).html(e),i(this).parent().show()})},r.getAndReplaceOpenUrlPlaceHolders=function(n){i.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(e){var t;null!==e&&"undefined"!==e&&(t="",1==e.DisplayOpenUrlLink&&(t=null!==e.LinkImageSource&&""!==e.LinkImageSource?' <a target="_blank" href="'+e.TargetUrl+'"><img src="'+e.LinkImageSource+'"/></a> ':' <a target="_blank" href="'+e.TargetUrl+'"> '+e.LinkImageText+" </a> "),r.replaceOpenUrlPlaceHolders(n,t),null!==a&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo&&void 0!==window.App.LoginUserInfo.currentSessionId&&a.setItem(s+window.App.LoginUserInfo.currentSessionId,t,window.sessionStorage))},error:function(e){}})},r.checkAndReplaceOpenUrlPlaceHolders=function(){var e,t;void 0!==window.App.LoginUserInfo&&0<window.App.LoginUserInfo.isInstLoggedIn&&(null!=(e=i('span[class="inst-open-url-holders"]'))&&0<e.length&&(null!==a&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo.currentSessionId&&null!==(t=a.getItem(s+window.App.LoginUserInfo.currentSessionId,window.sessionStorage))?r.replaceOpenUrlPlaceHolders(e,t):r.getAndReplaceOpenUrlPlaceHolders(e)))},r.init=function(){r.checkAndReplaceOpenUrlPlaceHolders()},r.init()}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage);var SCM=SCM||{};SCM.RedeemCode=function(t){var n,r,i,a;return{init:s};function s(){return!!(r=t("#js-redeem-code-button")).length&&(n=t("#js-redeem-code-input"),i=t("#js-redeem-code-modal"),a=t("#js-redeem-code-messages"),r.off("click"),r.on("click",e),!0)}function e(){var e=t.trim(n.val());e&&(r.off("click"),t("body").addClass("on-canvas"),t.ajax({type:"POST",url:"/UserDashboard/RedeemCode",cache:!1,data:JSON.stringify({productCode:e}),contentType:"application/json"}).done(function(e){e?(a.html(e.Messages[0]),i.length&&t(i).addClass("open")):alert("Unable to process your request, please contact customer service"),s()}).fail(function(){alert("Unable to process your request, please contact customer service")}))}}(jQuery),jQuery(function(){SCM.RedeemCode.init()});var SCM=SCM||{};SCM.IssueCovers=function(t){var n,r,i,a,e=".js-cover-image-click";return{init:function(){if(t(e).length)return n=t(".js-cover-view-large"),r=t(".js-cover-view-large-img"),i=t(".js-cover-view-large-caption-wrap"),a=t(".js-cover-view-large-caption-text"),t(".widget-IssueCoverBrowse").on("click",e,s),!0;return!1}};function s(){var e=t(this);r.attr("src",""),r.attr("src",e.attr("data-src")),e.attr("data-caption").length?(i.removeClass("hide"),a.html(e.attr("data-caption"))):i.addClass("hide"),t("body").addClass("on-canvas"),n.addClass("open")}}(jQuery),jQuery(function(){SCM.IssueCovers.init()});var SCM=SCM||{};SCM.FormWidget=function(s){return{formSubmit:function(){0<s(".widget-DynamicForm").length&&s(".js-widget-dynamic-form").on("submit",function(e){e.preventDefault();var i=s(".js-widget-dynamic-form-container"),a=s(".js-widget-dynamic-form"),t=a.serialize(),n=i.find("#g-recaptcha-response").val(),e=s("#FormInstanceName").val();return s.ajax({type:"POST",url:"/Common/DynamicFormSubmit/"+e,data:JSON.stringify({CaptchaResponse:n,Responses:t}),contentType:"application/json"}).done(function(e){var t,n,r;e.Success?(t=a.find(".message-success"),n=s("<div/>"),s.each(e.Messages,function(e,t){n.append(t)}),i.addClass("hide"),t.html(n.html()).show()):void 0!==e.Messages&&e.Messages.length&&(r=s("<ul></ul>"),s.each(e.Messages,function(e,t){r.append("<li>"+t+"</li>")}),a.find(".js-error-message").html(r).removeClass("hide"))}),!1})},getMaxCharacters:function(){s(".js-form-textarea").on("keyup",function(){var e,t,n=s(this).data("maxLength");s(this).parent().find(".js-remaining-characters").text((e=s(this),t=n,n=s(e).val().length,t<n?(s(e).val(s(e).val().substring(0,t)),0):(t-n).toString()))})}}}(jQuery);var SCM=SCM||{};SCM.Pagination=function(r){return{init:function(){r(".js-pagination-click").length&&r("body").on("click",".js-pagination-click",function(){var e=r(this),t=e.data("click-handler").split(".");window[t[0]][t[1]][t[2]](e)})},performAjaxPagination:function(e,t){{var n;t.data("elem-to-replace")?(n=r(t.data("elem-to-replace")))?r.ajax(e).done(function(e){n.html(e)}).fail(function(e,t,n){window.console&&(console.error("error: "+e.responseText),console.error("status: "+t))}):alert("Unable to find an element to respond to ajax response."):alert("The elem-to-replace data attribute was not populated.  You must populate this in the Widget's view to pass back the call to performAjaxPagination")}},updateBrowseHistory:function(e,t){var n={pagination:t};history.pushState&&(null!==history.state&&history.state.pagination||history.replaceState({pagination:document.URL},null,document.URL),history.pushState(n,null,t))},enableBrowserHistoryNavigation:function(){window.addEventListener("popstate",function(e){e.state&&history.state.pagination&&(window.location=e.state.pagination)})},trimEndUntilRegexMatches:function(e,t){for(;!e.match(t);)if(0===(e=e.substr(0,e.length-1)).length)return alert("SCM.Pagination.trimEndUntilRegexMatches: The entire string was trimmed, this likely indicates a problem with your regex pattern.  Note:  This method expects a regular expression literal (see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)"),"";return e},scrollToTop:function(){r(window).scrollTop(0)}}}(jQuery),jQuery(function(){SCM.Pagination.init()});var SCM=SCM||{};SCM.ArticlesByType=function(t){var n,r,i;return{init:function(){{var e;t(".widget-ArticlesByTypeList").length&&(e=t(".js-ArticlesByTypeList"),n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),"[a-zA-Z]$"),r=e.data("journal-id"),i=e.data("article-type-id"),SCM.Pagination.enableBrowserHistoryNavigation())}},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n);var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Article/ArticlesByTypeList/"+e.data("parent-instance"),cache:!1,data:{journalId:r,page:e.data("clicked-page"),articleClientType:i}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.ArticlesByType.init()});var SCM=SCM||{};SCM.CitedByPagination=function(e){var n,r;return{init:function(){e(".widget-CrossRefCitedBy").length&&(n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),/[a-zA-Z]\/\d+$/),r=n.match(/[a-zA-Z]\/(\d+)$/)[1],SCM.Pagination.enableBrowserHistoryNavigation())},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n+"/"+e.data("clicked-page"));var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/ThirdParty/CrossRefCitedBy/"+e.data("parent-instance"),cache:!1,data:{selectedPage:e.data("clicked-page"),articleId:r}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.CitedByPagination.init()});var SCM=SCM||{};SCM.MyInstitutionalTokens=function(e){var n;return{init:function(){e(".widget-MyInstitutionalTokens").length&&(n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),"[a-zA-Z]$"),SCM.Pagination.enableBrowserHistoryNavigation())},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n);var t={type:"POST",url:"/UserDashboard/MyInstitutionalTokens/"+e.data("parent-instance"),cache:!1,data:{selectedPage:e.data("clicked-page")}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery),jQuery(function(){SCM.MyInstitutionalTokens.init()});var SCM=SCM||{};SCM.CompactAddToCartButton=function(n){var i;return{init:function(){(n(".js-addToCartButton").length||n(".js-bulk-cart-add").length)&&(i=SCM.CompactAddToCartButton.DataService,function(){var e=n("#main");e.on("click",".js-addToCartButton",function(){var t,e=n(this);t=e.data("resourceId"),e=e.data("resourceTypeId"),i.addResourceToCart(t,e).then(function(e){s(e),l(t),c()}).catch(function(e){console.error("Failed to add resource to cart.",e)})}),e.on("click","#js-add-to-cart-success-modal .js-close-modal",function(){n("#js-add-to-cart-success-modal").removeClass("open")}),e.on("change",".js-checkBoxClass",t),e.on("click",".js-bulk-cart-add",f),e.on("click",".js-bulk-cart-add-issue",h),e.ajaxComplete(g)}(),r(),a())}};function r(){n(".js-addToCartButton").each(function(){var e=n(this);"True"!==e.data("userRestricted")&&o(e.data("resourceId"))?e.data("userRestricted","False"):e.data("userRestricted","True"),"False"===e.data("userRestricted")&&e.hide()})}function a(){i.getResourceIdsAlreadyInCart().then(function(t){n(".js-addToCartButton").each(function(){var e=n(this);t.includes(e.data("resourceId"))&&(e.data("inUserCart","true"),e.addClass("disabled"))})}).catch(function(e){console.error("Failed to get resourceIds in cart.",e)})}function s(e){n(".items-in-cart").length&&e.length&&!isNaN(parseInt(e))&&n(".items-in-cart").text(e)}function o(e){var t;return e&&(SCM.AccessAttributes?(t=e,!SCM.AccessAttributes.filter(function(e){return e.id===t}).map(function(e){return e.availableforpurchase}).shift()):"True"!==n("input.js-checkBoxClass[data-resource-id="+e+"]").data("availableForPurchase"))}function l(e){n(".js-addToCartButton[data-resource-id="+e+"]").attr("data-in-user-cart","true"),n(".js-addToCartButton[data-resource-id="+e+"]").addClass("disabled")}function c(){n("#js-add-to-cart-success-modal").addClass("open")}function t(e){e=n(e.currentTarget).closest("section");e.find(".js-bulk-cart-add").prop("disabled",!u(e));e=n(".section-container");n(".js-bulk-cart-add-issue").prop("disabled",!u(e))}function u(e){return d(e).length}function d(e){return e.find(".js-checkBoxClass:checked").map(function(e,t){return{id:n(t).data("resourceId"),typeId:n(t).data("resourceTypeId")}}).get()}function f(e){p(d(n(e.currentTarget).closest("section")))}function p(r){Array.isArray(r)&&r.length&&i.getResourceIdsAlreadyInCart().then(function(t){var n,e=r.filter(function(e){return!o(e.id)&&!t.includes(e.id)});e.length?(n=e,SCM.CompactAddToCartButton.DataService.addResourcesToCart(n).then(function(e){s(e),n.forEach(function(e){l(e.id)}),c()}).catch(function(e){console.error("Failed to add all resources to cart.",e)})):alert("No selected resources are available for purchase.")}).catch(function(e){console.error("Failed to get resourceIds in cart.",e)})}function h(){p(d(n(".section-container")))}function g(e,t,n){n.url&&n.url.toLowerCase().includes("searchresults")&&(r(),a())}}(jQuery),SCM.CompactAddToCartButton.DataService=function(n){return{addResourceToCart:function(e,t){return n.ajax({type:"POST",url:"/Store/AddProductToCartAjax/addtocartbutton",data:{resourceId:e,resourceTypeId:t},cache:!1}).promise().then(function(e){return e.Success?!Array.isArray(e.Messages)||e.Messages.length<1||!e.Messages[0].length?Promise.reject("Action did not return expected response"):e.Messages[0]:Promise.reject("Action returned non-success status")})},addResourcesToCart:function(e){e={resources:e.map(function(e){return{Id:e.id,Type:e.typeId}})};return n.ajax({type:"POST",url:"/Store/AddProductsToCartAjax/addtocartbutton",data:e,cache:!1}).promise().then(function(e){return e.Success?!Array.isArray(e.Messages)||e.Messages.length<1||!e.Messages[0].length?Promise.reject("Action did not return expected response"):e.Messages[0]:Promise.reject("Action returned non-success status")})},getResourceIdsAlreadyInCart:function(){return n.ajax({type:"POST",url:"/Store/GetArticleResourcesInCartAjax/addtocartbutton",cache:!1}).promise().then(function(e){return e.Success?Array.isArray(e.Messages)&&e.Messages.length?e.Messages[0].split(",").map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)}):Promise.reject("Action did not return expected response"):Promise.reject("Action return non-success status")})}}}(jQuery),Theme=Theme||{},Theme.Store=function(p){var e,r,t,n="/store/currency/{currencyCode}";return{init:function(){t=p(".register-content-wrap"),e=p(".js-cart-view"),r=p(".js-order-summary"),(e.length||r.length||t.length)&&(e.find(".js-currency-selector").on("change",function(e){e=p(e.currentTarget).val();p(".js-item-quantity").length?a(n.replace("{currencyCode}",e)):e&&(window.location.href=n.replace("{currencyCode}",e))}),r.find(".js-vat-country-select").on("change",function(e){e=p(e.currentTarget).val();Theme.Store.DataService.updateVatCountry(e).then(function(e){var t=r.find(".js-vat-number-wrap");e&&e.ShowVatNumber?t.removeClass("hidden"):t.addClass("hidden")}).catch(function(e){console.error("Failed to update VAT country: "+e),r.find(".js-vat-message").html("Failed to update VAT Country").removeClass("success").addClass("error")})}),r.find(".js-apply-vat-number").on("click",function(){var e,t,n=r.find(".js-vat-number").val().trim();n&&(e=r.find(".js-vat-message"),t=p(".js-tax-estimate"),Theme.Store.DataService.updateVatNumber(n).then(function(){e.html("VAT Number validated").removeClass("error").addClass("success"),t.length&&t.html("0.00")}).catch(function(e){console.error("Failed to update VAT number: ".concat(e)),r.find(".js-vat-message").html("Failed to validate VAT Number").removeClass("success").addClass("error")}))}),p(".js-cart-proceed").on("click",i),p("#checkSaveMessage").on("click",h),p("#checkSaveMessages").on("click",s),p(".js-cart-saveaddress").on("click",o),t.on("change","#BillingCountryList",function(){var e,t,n,r;e=p(".register-content-wrap"),t=e.find("#BillingCountryList").val(),n=e.find("#BillingStateList"),r=e.find("#ShippingStateList"),n.empty().prop("disabled",!0),void 0!==t&&t.length&&(e={countryId:t},SCM.Ajax.post("/Store/GetCountryStates/GetStates",e).expectJson().then(function(e){p.each(e,function(e,t){n.append(p('<option value="'.concat(t.StateId,'">').concat(t.StateName,"</option>")))}),r.length&&null==r.val()&&l(t),n.prop("disabled",!1)}).catch(console.error))}),t.on("change","#ShippingCountryList",function(){l()}),p(".cartview-item").each(function(){var n=p(this);p(n).find("#add_one").on("click",function(){var e=p(n).find(".input-number"),t=p(e).val();t<p(e).data("maxvalue")&&c(n,++t)}),p(n).find("#minus_one").on("click",function(){var e=p(n).find(".input-number"),t=p(e).val();p(e).data("minvalue")<t&&c(n,--t)})}),p(".js-item-quantity").on("change",function(){var e=p(this).val(),t=p(this).closest(".cartview-item"),n=p(this).data("minvalue"),r=p(this).data("maxvalue");return e<n?(p(this).val(n),void c(t,n)):r<e?(p(this).val(r),void c(t,r)):void c(t,e)}),p(".js-apply-promo-code").on("click",function(e){var t=p(e.currentTarget).hasClass("js-remove-code"),e="/store/".concat(t?"RemoveDiscountCode":"AddDiscountCode","/Ajax"),t=p(".js-promo-code").val();t.length&&SCM.Ajax.post(e,{discountCode:t}).expectJson().then(function(e){void 0!==e.Messages&&e.Messages.length?p(".promo-wrap").find(".js-error-message").html(e.Messages[0]).show():p(".js-quantityEditable").length?a(window.location):window.location.reload()}).catch(function(e){console.error("Failed to update discount code: ".concat(e))})}))}};function i(){var e=p(".js-cart-proceed"),e=(e.hasClass("js-quantityEditable"),e.data("destination"));!p("#checkProceedMessage").is(":visible")||p("#checkProceedMessage").is(":checked")?a(e):p(".errorMessage").removeClass("hide")}function a(e){var n={};p(".input-number").each(function(){var e,t=p(this).val();t!=p(this).data("initvalue")&&(e=p(this).data("itemid"),n[e]=t)}),Object.keys(n).length?SCM.Ajax.post("/store/UpdateQuantityInCart/Ajax",{cartItemQuantityLookup:n}).expectActionResultModel().ensureSuccess().then(function(){window.location=e}).catch(function(e){console.error("Failed to upate quanitity in cart: ".concat(e))}):window.location=e}function h(){p("#checkSaveMessages").is(":checked")&&p(".shippingAddress").hide(),p(".js-cart-saveaddress").removeClass("disabled"),p("#checkSaveMessages").prop("checked",!1);var e=p(".register-content-wrap"),t=e.find("#BillingAddress").val(),n=e.find("#BillingCity").val(),r=e.find("#BillingStateList").val(),i=e.find("#BillingCountryList").val(),e=e.find("#BillingZipCode").val();p("#ShippingAddress").val(t),p("#ShippingCity").val(n),p("#ShippingStateList").val(r),p("#ShippingCountryList").val(i),p("#Shippingzip").val(e)}function s(){p("#checkSaveMessage").prop("checked",!1),p(".shippingAddress").show(),p(".js-cart-saveaddress").removeClass("disabled")}function o(){p("#checkSaveMessage").is(":checked")&&h();var t=p(".register-content-wrap");t.find(".error-message").html().hide;var e=t.find("#BillingAddress").val(),n=t.find("#BillingCity").val(),r=t.find("#BillingStateList").val()||"",i=t.find("#BillingCountryList").val(),a=t.find("#BillingZipCode").val(),s=t.find("#ShippingAddress").val(),o=t.find("#ShippingCity").val(),l=t.find("#ShippingStateList").val()||"",c=t.find("#ShippingCountryList").val(),u=t.find("#Shippingzip").val(),d=t.find("#ShippingCountryList").find(":selected").attr("data-countrycode"),f=t.find("#BillingCountryList").find(":selected").attr("data-countrycode");SCM.Ajax.post("/Store/CartAddOrUpdateUserProfileAddressModel/updateAddress",{shippingAddress:s,shippingCity:o,shippingState:l,shippingCountry:c,shippingZipCode:u,billingAddress:e,billingCity:n,billingState:r,billingCountry:i,billingZipCode:a,shippingCountryCode:d,billingCountryCode:f}).expectActionResultModel().ensureSuccess().then(function(){t.find(".js-cart-proceed").toggleClass("hide")}).catch(function(e){var n,e=e.actionResultModel;void 0!==e.Messages&&e.Messages.length&&(n=p("<ul></ul>"),p.each(e.Messages,function(e,t){n.append("<li>".concat(t,"</li>"))}),t.find(".error-message").html(n).show())})}function l(e){var t,n=p(".register-content-wrap"),r=n.find("#ShippingCountryList").val(),i=n.find("#ShippingStateList");i.empty().prop("disable",!0),void 0!==e&&0<e?t={countryId:e}:void 0!==r&&r.length&&(t={countryId:r}),SCM.Ajax.post("/Store/GetCountryStates/GetStates",t).expectJson().then(function(e){p.each(e,function(e,t){i.append(p('<option value="'.concat(t.StateId,'">').concat(t.StateName,"</option>")))}),i.prop("disabled",!1)}).catch(console.error)}function c(e,t){p(e).find(".input-number").val(t);var n,r=p(e).find(".cartview-item-value-price-per").text(),i=p(e).find(".cartview-item-discount-amount-per").text(),r=t*(r-i);p(e).find(".cartview-item-price-total").text(r.toFixed(2)),0<i&&function(e){var t=p(".cartview-discount");{var n;t.length&&(n=p(t).find(".cartview-item-value-price-per").text(),n=e*n,p(t).find(".cartview-item-price-total").text(n.toFixed(2)))}}(t),t=p(".js-subtotal-amount"),n=0,p(".cartview-item").each(function(){var e=p(this).find(".cartview-item-price-total").text();n=parseFloat(n)+parseFloat(e)}),t.text(n.toFixed(2))}}(jQuery),Theme.Store.DataService=function(t){return{updateVatCountry:function(e){return t.post("/store/UpdateCartVatCountry/Ajax",{countryCode:e}).promise().then(function(e){if(e&&e.Success)return e.Data;e=e&&e.Messages&&e.Messages.length&&e.Messages[0].length?e.Messages[0]:"An unknown error occurred";return Promise.reject(e)})},updateVatNumber:function(e){return t.post("/store/UpdateVatNumber/Ajax",{vatNumber:e}).promise().then(function(e){if(e&&e.Success)return!0;e=e&&e.Messages&&e.Messages.length&&e.Messages[0].length?e.Messages[0]:"An unknown error occurred";return Promise.reject(e)})}}}(jQuery);var Theme=Theme||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Theme.MultiQuerySelectableContentList=function(t){var n,r;return{init:function(){{var e;t(".widget-MultiQuerySelectableContentList").length&&(e=t(".js-special-collection-query"),n=SCM.Pagination.trimEndUntilRegexMatches(document.URL.valueOf(),"[a-zA-Z]$"),r=e.data("query"),SCM.Pagination.enableBrowserHistoryNavigation())}},handlePaginationClick:function(e){SCM.Pagination.updateBrowseHistory(n,n);var t={type:"POST",url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Solr/PaginatedMultiQuerySelectableContentList/"+e.data("parent-instance"),cache:!1,data:{multiQuery:r,pageNumber:e.data("clicked-page")}};SCM.Pagination.performAjaxPagination(t,e)}}}(jQuery);var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.Ajax=function(o){var e={get:function(e,t){return new r(e,"GET",t)},post:function(e,t){return new r(e,"POST",t)},ajax:function(e,t,n){return new r(e,t,n)},_objectToFormData:n,_formatPostData:h};var s={Text:"text",Html:"html",Json:"json",Xml:"xml",ActionResultModel:{Full:"actionResultModelFull",FullEnsureSuccess:"actionResultModelFullEnsureSuccess",Success:"actionResultModelSuccess",Html:"actionResultModelHtml",RedirectUrl:"actionResultModelRedirectUrl",ReturnId:"actionResultModelReturnId",Data:"actionResultModelData"}},i={Default:"Default",Json:"application/json; charset=utf-8",UrlEncoded:"application/x-www-form-urlencoded"};function r(e,t,n,r){this._url=e,this._method=t||"GET",this._data=n,this._dataType=r||s.Text,this._internalPromise=null,this._requestContentType=i.Default,this._abortableRequestHandle=null}function t(e){this._ajaxResult=e,this._expectedComponent=s.ActionResultModel.Full,this._internalPromise=null}function l(e,t,n){e=new Error(e);return e.name="AjaxError",e.userFriendlyMessage=t,e.actionResultModel=n,Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,l),e}function a(e,t,n,r,i){if("function"==typeof window.fetch)return function(e,t,n,r,i){var a=new AbortController;"GET"===t&&n&&(e=function(e,t){"object"===_typeof(t)&&(t=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")}(t));t&&t.length&&["?","&"].includes(t[0])&&(t=t.substring(1));return e.includes("?")?e+"&"+t:e+"?"+t}(e,n),n=void 0);n={method:t,body:h(n,i),signal:a.signal};return n.headers=function(e,t){var n={};!function(e){var t=window.location.origin,e=new URL(e,t).origin;return t===e}(e)||(n["X-Requested-With"]="XMLHttpRequest",n["X-Requested-With-Lies"]="Not actually XMLHttpRequest, but Fetch API via SCM.Ajax; X-Requested-With is set for server-side backwards compatibility");p(t)&&(n["Content-Type"]=t);return n}(e,i),{promise:fetch(e,n).then(function(e){if(!e.ok)throw new l("Bad response from server: "+e.status+": "+e.statusText,"Bad response from server");return r===s.Json?e.json():e.text()}).catch(function(e){throw new l("Request failed: "+e,"Request failed")}),abortableRequestHandle:a}}(e,t,n,r,i);if("function"==typeof o&&o()&&o().jquery)return function(e,t,n,i,r){var a,s={url:e,method:t,type:t,data:n,dataType:i};!function(e){return e instanceof FormData&&Array.from(e).filter(function(e){return 1<e.length&&e[1]instanceof File}).length}(n)||(s.contentType=!1,s.processData=!1);p(r)&&(s.contentType=r);return{promise:new Promise(function(t,r){a=o.ajax(s).done(function(e){t(e)}).fail(function(e,t,n){r(new l("parsererror"===t?"Failed to parse response as "+i:n,"Request failed"))})}),abortableRequestHandle:a}}(e,t,n,r,i);throw new Error("No supported AJAX implementations found.")}function n(e){if(e){if(e instanceof FormData||"object"!==_typeof(e))return e;var t=new FormData;return function n(r,i,a){r=r||new FormData;if(Array.isArray(i))for(var e=0;e<i.length;e++){var t=a+"["+e+"]";n(r,i[e],t)}else u(i)?r.append(a,i.toISOString()):!c(i)||d(i)||f(i)?null!=i&&r.append(a,i):Object.keys(i).forEach(function(e){var t=a?a+"["+e+"]":e;n(r,i[e],t)})}(t,e),t}}function c(e){return e===Object(e)}function u(e){return e instanceof Date}function d(e){return e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.slice}function f(e){return d(e)&&"string"==typeof e.name&&("object"===_typeof(e.lastModifiedDate)||"number"==typeof e.lastModified)}function p(e){return e&&e===i.Json}function h(e,t){switch(t){case i.UrlEncoded:return new URLSearchParams(e);case i.Json:return JSON.stringify(e);default:return n(e)}}function g(e,t){e=e.then(function(e){if(!e||void 0===e.Success)throw new l("Response does not appear to be an ActionResultModel","Unexpected response from server");return e});if(t===s.ActionResultModel.Full)return e;e=e.then(function(e){if(e.Success)return e;var t,n="Unspecified error";throw(t=e)&&t.Messages&&t.Messages.length?n=e.Messages[0]:(t=e)&&t.ValidationErrors&&t.ValidationErrors.length&&t.ValidationErrors[0].Errors&&t.ValidationErrors[0].Errors.length?n=e.ValidationErrors[0].Errors[0]:e.Html&&(n=e.Html),new l(n,"Request was not successful",e)});return t===s.ActionResultModel.FullEnsureSuccess?e:t===s.ActionResultModel.Success?e.then(function(){return!0}):t===s.ActionResultModel.Html?e.then(function(e){if("string"!=typeof e.Html)throw new l("No HTML was provided in the response","Unexpected response from server",e);return e.Html}):t===s.ActionResultModel.RedirectUrl?e.then(function(e){if("string"!=typeof e.RedirectUrl)throw new l("No RedirectUrl was provided in the response","Unexpected response from server",e);return e.RedirectUrl}):t===s.ActionResultModel.ReturnId?e.then(function(e){if("string"!=typeof e.ReturnId)throw new l("No ReturnId was provided in the response","Unexpected response from server",e);return e.ReturnId}):t===s.ActionResultModel.Data?e.then(function(e){if(void 0===e.Data||null===e.Data||"object"!==_typeof(e.Data))throw new l("No Data object was provided in the response","Unexpected response from server",e);return e.Data}):e}return r.prototype.then=function(e,t){var n;return this._internalPromise||(n=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=n.promise,this._abortableRequestHandle=n.abortableRequestHandle),this._internalPromise=this._internalPromise.then(e,t),this},r.prototype.catch=function(e){var t;return this._internalPromise||(t=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.catch(e),this},r.prototype.finally=function(e){var t;return this._internalPromise||(t=a(this._url,this._method,this._data,this._dataType,this._requestContentType),this._internalPromise=t.promise,this._abortableRequestHandle=t.abortableRequestHandle),this._internalPromise=this._internalPromise.finally(e),this},r.prototype.sendAsJson=function(){return this._requestContentType=i.Json,this},r.prototype.sendAsUrlEncoded=function(){return this._requestContentType=i.UrlEncoded,this},r.prototype.abort=function(){var e;return(e=this._abortableRequestHandle)&&e.abort&&e.abort(),this},r.prototype.expectJson=function(){return this._dataType=s.Json,this.then(function(e){return e})},r.prototype.expectHtml=function(){return this._dataType=s.Html,this.then(function(e){return e})},r.prototype.expectText=function(){return this._dataType=s.Text,this.then(function(e){return e})},r.prototype.expectXml=function(){return this._dataType=s.Xml,this.then(function(e){return e})},r.prototype.expect=function(t,n){return"function"==typeof t&&(n=t,t=null),this.then(function(e){if(!n(e))throw new l(t||"Unexpected result from server");return e})},r.prototype.expectActionResultModel=function(){return this._dataType=s.Json,new t(this)},t.prototype.then=function(e,t){return this._internalPromise=(this._internalPromise||g(this._ajaxResult,this._expectedComponent)).then(e,t),this},t.prototype.catch=function(e){return this.intrnalPromise=(this._internalPromise||g(this._ajaxResult,this._expectedComponent)).catch(e),this},t.prototype.finally=function(e){return this._internalPromise=(this._internalPromise||g(this._ajaxResult,this._expectedComponent)).finally(e),this},t.prototype.ensureSuccess=function(){return this._expectedComponent=s.ActionResultModel.FullEnsureSuccess,this},t.prototype.expectSuccess=function(){return this._expectedComponent=s.ActionResultModel.Success,this},t.prototype.expectHtml=function(){return this._expectedComponent=s.ActionResultModel.Html,this},t.prototype.expectRedirectUrl=function(){return this._expectedComponent=s.ActionResultModel.RedirectUrl,this},t.prototype.expectReturnId=function(){return this._expectedComponent=s.ActionResultModel.ReturnId,this},t.prototype.expectData=function(){return this._expectedComponent=s.ActionResultModel.Data,this},t.prototype.abort=function(){return this._ajaxResult&&this._ajaxResult.abort(),this},l.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(l,Error):l.__proto__=Error,e}(window.jQuery||{}),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=SCM.Ajax);var SCM=SCM||{};SCM.Retry=function(){var e={policy:function(){return new t},wait:function(e){return(new t).handleResult(function(){return!0}).waitAndRetry(1,e).execute(function(){}).catch(function(){})}};var r=function(e){return 50};function t(){this._exceptionPredicates=[],this._resultPredicates=[],this._retryCount=0,this._onRetry=null,this._waitTimeCalculator=r}function p(e){e=new Error(e);return e.name="RetryError",Object.setPrototypeOf(e,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(e,p),e}return t.prototype.handleException=function(e){if(void 0===e)this._exceptionPredicates.push(function(){return!0});else{if("function"!=typeof e)throw new p("exceptionPredicate must be a function");this._exceptionPredicates.push(e)}return this},t.prototype.handleResult=function(e){if("function"!=typeof e)throw new p("resultPredicate must be a function");return this._resultPredicates.push(e),this},t.prototype.untilResultIs=function(t){return this._resultPredicates.push(function(e){return e!=t}),this},t.prototype.retry=function(e,t){return"function"==typeof(e=void 0===e?1:e)&&(t=e,e=1),this._retryCount=e,"function"==typeof t&&(this._onRetry=t),this},t.prototype.waitAndRetry=function(e,t,n){if("number"!=typeof e)throw new p("retryCount must be specified as an integer");return this._retryCount=e,void 0!==t&&(this._waitTimeCalculator=function(t,e){if("number"==typeof t)return function(e){return t};if(Array.isArray(t)&&t.length===e){if(t.length!==e)throw new p("Wait time array length must match retryCount");return function(e){return t[e-1]}}return"function"!=typeof t?r:t}(t,e)),"function"==typeof n&&(this._onRetry=n),this},t.prototype.execute=function(o){var l=this._resultPredicates,c=this._exceptionPredicates,u=this._onRetry,d=this._waitTimeCalculator,f=this._retryCount;return new Promise(function(e,n){var r=0;function i(){try{var e=o();(t=e)&&"function"==typeof t.then&&"function"==typeof t.catch?e.then(function(e){a(e)}).catch(function(e){s(e)}):a(e)}catch(e){s(e)}var t}function a(t){l.some(function(e){return e(t)})?r<f?(r++,"function"==typeof u&&u(t,r),setTimeout(i,d(r))):n(new p("retryCount exceeded")):e(t)}function s(t){r<f&&c.some(function(e){return e(t)})?(r++,"function"==typeof u&&u(t,r),setTimeout(i,d(r))):n(t)}i()})},p.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(p,Error):p.__proto__=Error,e}(),SCM.wait=SCM.wait||SCM.Retry.wait,"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=SCM.Retry);var SCM=SCM||{};SCM.SubjectBrowse=function(t){return{init:function(){t("body").hasClass("pg_Index")&&t("#main").on("click",".js-expand-children-subjects",function(){var e=t(this).closest(".parent-subject");e.hasClass("collapsed")?e.removeClass("collapsed"):e.addClass("collapsed")})}}}(jQuery),SCM=SCM||{},SCM.SharedWidgets=SCM.SharedWidgets||{},function(e){e.init=function(){SCM.SharedWidgets.UserPersonalization.AddToLocalStorage(".SCM-SharedWidgets-LocalStorage-UserAffinityTracking","data-values")}}(SCM.PersonalizedContent=SCM.PersonalizedContent||{},jQuery);var Theme=Theme||{};SCM.Utilities=SCM.Utilities||{},Theme.ArticleAbstract=function(o){return{init:function(){o(".master-main").on("click",".js-show-abstract",e)}};function e(e){var t=o(e.currentTarget),n=t.data("articleid"),r="True"===t.data("is-lay-abstract"),i=o((r?".js-layabstract#abstract-":"#abstract-").concat(n)),a=o("#abstract-".concat(n,"-links")),s="True"===t.data("tried-to-fetch-abstract"),e=function(e,t){var n="",r=function(){var e=o("#hfSiteURL");return e.length?e.val():null}();r&&(n+="//"+r);t?n+="/PlatformArticle/ArticleLayAbstractAjax":"extract"===e.data("abstract-type")?n+="/PlatformArticle/ArticleAbstractOrExtractAjax":n+="/PlatformArticle/ArticleAbstractAjax";return n}(t,r),r={articleId:n,layAbstract:r};i.closest(".js-abstract-parent").toggleClass("abstractExpanded"),s||SCM.Ajax.get(e,r).expectActionResultModel().then(function(e){i.html(e.Html),i.append(a.html()),o(".js-tabs").parents(".js-abstract-response-placeholder").addClass("removePad"),o(document).on("click",".js-abstract-tab-link",function(e){var t=o(e.target),n=t.closest(".js-abstract-response-placeholder"),r=t.closest(".js-abstract-tab-link-wrap"),e=n.find(".js-tabs-content .js-abstract-tab-content-wrap"),t=r.index();r=r,n.find(".js-abstract-tab-link-wrap").removeClass("is-active"),r.addClass("is-active"),t=t,(e=e).removeClass("is-active"),e.eq(t).addClass("is-active")}),SCM.Utilities.Brightcove&&SCM.Utilities.Brightcove.init&&SCM.Utilities.Brightcove.init()}).catch(console.error).finally(function(){t.data("tried-to-fetch-abstract","True")}),i.toggleClass("hide"),s=t.find(".js-abstract-toggle-icon"),e=s.data("icon-class"),r="".concat(e,"-down"),e="".concat(e,"-up"),s.toggleClass(r),s.toggleClass(e),i.hasClass("hide")||window.digitalData&&SCM.AdobeAnalytics.sendAdobeAnalyticsProductData(n)}}(jQuery);var Theme=Theme||{};Theme.ChapterAbstract=function(f){return{init:function(){f(".master-main").on("click",".js-showChapterAbstractLink",function(e){var t=f(e.target).closest("div[data-chapter-abstract-to-be-fetched-wrapper]"),n=t.attr("data-chapterid-for-abstract"),r=t.attr("data-bookid-for-abstract"),i=t.children("div[data-tried-to-fetch-abstract]").first(),a="true"===i.attr("data-tried-to-fetch-abstract"),s=f("#abstract-".concat(n)),o=f("#hfSiteURL"),l=f("#abstract-".concat(n,"-links")),c={chapterId:n,bookId:r},n="extract"==f(e.target).parent().attr("data-link-chapter-abstract-type")?"/PlatformBook/ChapterAbstractOrExtractAjax":"/PlatformBook/ChapterAbstractAjax",r=t.find(".abstract-toggle-icon"),e=r.attr("data-icon-class"),t="".concat(e,"-down"),e="".concat(e,"-up");function u(e){s.html(e.Html),s.append(l.html())}function d(){i.attr("data-tried-to-fetch-abstract","true")}o&&o.val()&&(n="//"+o.val()+n),s.closest("li").toggleClass("abstractExpanded"),a||SCM.Ajax.get(n,c).expectActionResultModel().ensureSuccess().then(u).then(d).catch(console.error),s.toggleClass("hide"),r.toggleClass(t),r.toggleClass(e)})}}}(jQuery);var Theme=Theme||{};Theme.ConferenceVolumeSelector=function(t){var e;return{init:function(){e=t(".widget-ConferencesBrowseByYear"),e.on("change",".js-volume-browse-select, .js-volume-browse-conference-select",function(e){r(t(e.target).val())}),e.on("change",".js-volume-browse-year-select",function(e){n(t(e.target).val(),!1)}),e.on("change",".js-volume-browse-decade-select",function(e){n(t(e.target).val(),!0)})}};function n(e,t){var n=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/ConferenceVolume/ConferenceVolumeLatestByYear";SCM.Ajax.get(n,{year:e,isDecade:t}).expectActionResultModel().expectRedirectUrl().then(function(e){r(e)}).catch(console.error)}function r(e){window.location=e}}(jQuery);var Theme=Theme||{};Theme.ContactUsForm=function(l){return{init:function(){l(".widget-contact-us #btnSubmit").on("click",t),l("#Comment").on("keyup",e),e()}};function e(){var e,t,n=l("#Comment"),r=l(".comment-max-length").data("maxLength");n.length&&l("#charRemaining").text((t=r,r=(e=n).val(),n=r.length,t<n?(e.val(r.substring(0,t)),"0"):(t-n).toString()))}function t(e){var t=l(".widget-contact-us"),n=t.find("#FirstName").val(),r=t.find("#LastName").val(),i=t.find("#EmailAddress").val(),a=t.find("#Subject").val(),s=t.find("#IsLibrarian").prop("checked"),o=t.find("#IsMember").prop("checked"),t={FirstName:n,LastName:r,EmailAddress:i,Subject:a,IsLibrarian:s,Reason:t.find("#Reason").val(),Journal:t.find("#Journal").val(),Comment:t.find("#Comment").val(),CaptchaResponse:t.find("#g-recaptcha-response").val(),IsMember:o,CustomerNumber:t.find("#CustomerNumber").val(),AccessMethod:t.find("#AccessMethod").val(),OperatingSystem:t.find("#OperatingSystem").val(),BugDescription:t.find("#BugDescription").val()};e.preventDefault(),SCM.Ajax.post("/Common/ContactUsForm",t).expectActionResultModel().ensureSuccess().then(c).catch(u)}function c(e){var t=l(".widget-contact-us"),n=t.find(".message-success"),r=l("<div/>"),t=t.find(".widget-contact-us-form");l.each(e.Messages,function(e,t){r.append(t)}),t.addClass("hide"),n.html(r.html())}function u(e){var n,t=e.actionResultModel;void 0!==t.Messages&&t.Messages.length&&(e=l(".widget-contact-us"),n=l("<ul></ul>"),e=e.find(".error-message"),l.each(t.Messages,function(e,t){n.append("<li>".concat(t,"</li>"))}),e.html(n.html()))}}(jQuery);var Theme=Theme||{};Theme.InstitutionSignIn=function(){var n=jQuery(".js-inst-login-form");return{init:function(){n.find(".js-signin-button").on("click",function(){t()}),n.on("keypress",function(e){"Enter"===e.key&&t()})}};function t(){var e=n.find("input.js-username").val(),t=n.find("input.js-password").val();SCM.Ajax.post("/SignIn/LoginInstitutionalUser",{username:e,password:t}).then(function(e){0<e.length?n.find(".js-error").removeClass("hide"):(e=new URLSearchParams(document.location.search).get("returnUrl"))?window.location.assign(decodeURIComponent(e)):window.location.reload()}).catch(console.error)}}();var Theme=Theme||{};Theme.MyProfile=function(i){return{init:function(){n(),r()}};function n(){i(".btn-edit-userprofile").on("click",e)}function r(){i(".btn-userprofile-update").on("click",a),i(".btn-userprofile-cancel").on("click",u),i(".userprofile-countries").on("change",function(){!function(e){e={countryId:e};SCM.Ajax.get("/Content/UserProfileGetStates/myProfileGetStates",e).expectJson().then(f).catch(console.error)}(i(this).find(":selected").val())}),i("#js-radio-is-licensed-physician, #js-radio-is-not-licensed-physician").on("change",function(){!function(e){e={isLicensedPhysician:e};SCM.Ajax.get("/Content/UserProfileGetProfessions/userProfileGetProfessions",e).expectJson().then(p).catch(console.error)}(i(this).val())}),i(".js-userprofile-professions").on("change",function(){!function(e){e={professionId:e};SCM.Ajax.get("/Content/UserProfileGetSpecialties/UserProfileGetSpecialties",e).expectJson().then(h).catch(console.error)}(i(this).find(":selected").val())}),SCM.MyAccount.initTestPassword()}function e(){SCM.Ajax.get("/Content/EditUserProfile/editUserProfile").expectHtml().then(t).catch(console.error)}function t(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),r())}function a(){var e={FirstName:i("#userprofile-firstname").val(),LastName:i("#userprofile-lastname").val(),UserName:i("#userprofile-username").val(),Password:i("#Password").val(),ConfirmPassword:i("#ConfirmPassword").val(),Organization:i("#userprofile-organization").val(),HomePhone:i("#userprofile-homephone").val(),WorkPhone:i("#userprofile-workphone").val(),MobilePhone:i("#userprofile-mobilephone").val(),Suffix:i("#userprofile-suffix").val(),Address:i("#userprofile-address").val(),Address2:i("#userprofile-address2").val(),City:i("#userprofile-city").val(),PostalCode:i("#userprofile-postalcode").val(),StateId:i(".userprofile-states :selected").val(),CountryId:i(".userprofile-countries :selected").val(),Title:i("#userprofile-title").val(),EmailAddress:i("#userprofile-emailaddress").val(),SpecialtyId:i(".js-userprofile-specialities :selected").val(),ProfessionId:i(".js-userprofile-professions :selected").val()};SCM.Ajax.post("/Content/UpdateUserProfile/updateUserProfile",e).expectActionResultModel().ensureSuccess().then(o).catch(s)}function s(e){var t=e.actionResultModel,n=i("#myaccount-tabs-content"),e=n.find(".error-message"),r=i("<ul></ul>");n.find(".error-message").html(t.Html),null!=t.Messages&&t.Messages.length&&(i.each(t.Messages,function(e,t){r.append("<li>".concat(t,"</li>"))}),e.append(r),e.removeClass("hide"))}function o(){SCM.Ajax.get("/Content/MyProfile/myProfile").expectHtml().then(l).then(c).catch(console.error)}function l(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),n())}function c(){i(".success").removeClass("hide")}function u(){SCM.Ajax.get("/Content/MyProfile/myProfile").expectHtml().then(d).catch(console.error)}function d(e){var t=i("#myaccount-tabs-content");null!=e&&e.length&&(t.html(e).show(),n())}function f(e){var t=i(".userprofile-states");if(t.empty(),null!=e&&e.length){for(var n in e){n=i("<option/>").attr("value",e[n].StateId).text(e[n].StateName);t.append(n)}t.removeClass("hide"),t.closest(".dataRow").removeClass("hide")}else t.removeClass("hide").addClass("hide"),t.closest(".dataRow").addClass("hide")}function p(e){var t=i(".js-userprofile-professions"),n=i(".js-userprofile-specialities");if(t.empty(),n.empty(),null!=e&&e.length){for(var r in e){r=i("<option/>").attr("value",e[r].ProfessionId).text(e[r].ProfessionName);t.append(r)}t.removeClass("hide"),t.closest(".dataRow").removeClass("hide"),n.addClass("hide"),n.closest(".dataRow").addClass("hide")}else t.removeClass("hide").addClass("hide"),t.closest(".dataRow").addClass("hide"),n.removeClass("hide").addClass("hide"),n.closest(".dataRow").addClass("hide")}function h(e){var t=i(".js-userprofile-specialities");if(t.empty(),null!=e&&e.length){for(var n in e){n=i("<option/>").attr("value",e[n].SpecialtyId).text(e[n].SpecialtyName);t.append(n)}t.removeClass("hide"),t.closest(".dataRow").removeClass("hide")}else t.removeClass("hide").addClass("hide"),t.closest(".dataRow").addClass("hide")}}(jQuery);var Theme=Theme||{};Theme.NewAndPopular=function(a){return{init:function(){a(".js-new-and-popular-mode").each(function(){var i=a(this);i.on("click",function(e){var t=i.data("mode"),n=i.data("instancename"),r=a(".js-new-and-popular-content-"+t);e.preventDefault(),a(".js-new-and-popular-mode").removeClass("active"),i.addClass("active"),r.hasClass("hasContent")||(function(e,t,n){n=(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/PlatformArticle/ArticleListNewAndPopularContent/"+n;SCM.Ajax.get(n,{mode:e}).expectHtml().then(function(e){t.html(e)}).catch(console.error)}(t,r,n),r.addClass("hasContent")),a(".js-new-and-popular-content").addClass("hide"),r.removeClass("hide")})})}}}(jQuery);var Theme=Theme||{};Theme.PeerReview=function(t){return{init:function(){t(".js-accordion-trigger").on("click",function(){var e;t(this).toggleClass("active"),t(this).next(".js-accordion-content").toggleClass("expanded"),t(this).hasClass("active")&&(e=(e=t(this).find(".stats-peer-review-header")).text().replace(" ","")+"_"+e.attr("data-sectionId"),SCM.StatsR2Tracking.logPeerReviewView(e))})}}}(jQuery);var Theme=Theme||{};Theme.RegisterUser=function(y){var b=y(".widget-RegisterUser");return SCM.MyAccount.initTestPassword(),{init:function(){b.on("click","#showPassword",function(){b.find("#Password, #ConfirmPassword").each(function(){var e=y(this).clone();e.attr("type","text"),e.attr("autocomplete","off"),e.attr("value",y(this).val()),y(this).after(e),y(this).remove()}),y(this).hide(),y(this).siblings("#hidePassword").show()}),b.on("click","#hidePassword",function(){b.find("#Password, #ConfirmPassword").each(function(){var e=y(this).clone();e.attr("type","password"),e.removeAttr("autocomplete"),e.attr("value",y(this).val()),y(this).after(e),y(this).remove()}),y(this).hide(),y(this).siblings("#showPassword").show()}),b.on("change","#CountryList",function(){var e,t;t=(e=b).find("#CountryList").val(),e.find("#StateList").empty().prop("disabled",!0),null!=t&&t.length&&(t={countryId:t},SCM.Ajax.get("/UserDashboard/RegisterGetCountryStates",t).expectJson().then(n).catch(console.error))}),b.on("click","#registerBtn",e)}};function e(){var e=b.find("#UserName").val(),t=b.find("#EmailAddress").val(),n=b.find("#Password").val(),r=b.find("#ConfirmPassword").val(),i=b.find("#Title").val(),a=b.find("#FirstName").val(),s=b.find("#LastName").val(),o=b.find("#MembershipNumber").val(),l=b.find("#VendorId").val(),c=b.find("#Address").val(),u=b.find("#City").val(),d=b.find("#StateList").val(),f=b.find("#CountryList").val(),p=b.find("#ZipCode").val(),h=b.find("#Telephone").val(),g=b.find("#Fax").val(),m=b.find("#Mobile").val(),v=function(){var e=y(".widget-RegisterUser").find(".js-fieldList"),n=[];0<e.length&&e.each(function(){var e=y(this).attr("data-cfdId"),t=y(this).val();n.push({ClientFieldDefinitionId:e,SpecifiedFieldValue:t})});return n}();SCM.Ajax.post("/UserDashboard/RegisterNewUser",{UserName:e,EmailAddress:t,Password:n,ConfirmPassword:r,Title:i,FirstName:a,Lastname:s,MembershipNumber:o,VendorId:l,Address:c,City:u,State:d,Country:f,ZipCode:p,PhoneNumber:h,MobileNumber:m,FaxNumber:g,ClientFieldDefinitionList:v}).expectActionResultModel().ensureSuccess().then(w).catch(S)}function w(){SCM.SiteJS.loginReturnBack()}function S(e){var n,t=e.actionResultModel;void 0!==t.Messages&&t.Messages.length&&(n=y("<ul></ul>"),e=b.find(".error-message"),y.each(t.Messages,function(e,t){n.append("<li>".concat(t,"</li>"))}),e.html(n))}function n(e){var n=b.find("#StateList");null!=e&&e.length&&(y.each(e,function(e,t){n.append(y('<option value="'.concat(t.StateId,'">').concat(t.StateName,"</option>")))}),n.prop("disabled",!1))}}(jQuery);var Theme=Theme||{};Theme.ShibbolethSignin=function(t){return{init:function(){t("#FederationDropdown").on("change",e),t("#shibbolethSelectBtn").on("click",r),0<=window.location.search.indexOf("openathens=")&&t('#FederationDropdown option:contains("OpenAthens Federation")').attr("selected","selected").change()}};function e(e){e=t(e.target).val();e&&SCM.Ajax.post("/UserDashboard/GetInstitutionsForFederation",{FederationID:e}).expectJson().then(n).catch(console.error)}function n(e){var n=t("#InstitutionDropdown");n.find("option:gt(0)").remove(),t.each(e,function(e,t){n.append('<option value="'.concat(t.ShibbolethID,'">').concat(t.InstitutionName,"</option>"))})}function r(){var e=t("#InstitutionDropdown").val();e?function(e){e={ShibbolethID:e};SCM.Ajax.post("/UserDashboard/RedirectToShibboleth",e).expectJson().then(i).then(a).catch(console.error)}(e):t("#shibboleth-error").html("Please select an institution")}function i(e){var t=new URLSearchParams(document.location.search).get("returnUrl");return t&&(t=function(e){var t=decodeURIComponent(e);e===t&&(e=encodeURIComponent(e));return e}(t),document.cookie="returnUrl=".concat(t)),e}function a(e){window.location.assign(e)}}(jQuery);var Theme=Theme||{};Theme.SolrSavedSearches=function(a){var s=a("#hfSiteURL").val();return{init:function(){a(".solrSearchSaveWidget table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,headers:{4:{sorter:!1}},sortList:[[0,0]]}),a(".solrSearchSaveWidget .js-save-search-delete").on("click",function(){var e,t,n,r;e=a(this),t="//".concat(s,"/Solr/DeleteSolrSearchInfo"),n=e.closest("tr"),r=n.data("usersearchid"),e=n.data("useralertid"),SCM.Ajax.post(t,{userSearchId:r,userAlertId:e}).expectActionResultModel().ensureSuccess().then(function(){n.remove()}).catch(console.error)}),a(".solrSearchSaveWidget .js-alert-frequency").on("change",function(){var e,t,n,r,i;e=a(this),t="//".concat(s,"/Solr/UpdateUserAlert"),n=e.closest("tr"),r=n.data("usersearchid"),i=n.data("useralertid"),e=e.val(),SCM.Ajax.post(t,{userSearchId:r,userAlertId:i,scheduleId:e}).expectActionResultModel().ensureSuccess().then(function(e){n.data("useralertid",e.ReturnId)}).catch(console.error)}),a(".solrSearchSaveWidget .js-save-search-rename-rename").on("click",function(){var e=a(this).closest("td"),t=e.find(".js-save-search-name-link");t.addClass("hide"),e.find(".js-save-search-input").val(t.text()).addClass("active").focus(),e.find(".js-save-search-rename-cancel").addClass("active"),e.find(".js-save-search-rename-save").addClass("active"),a(this).addClass("hide")}),a(".solrSearchSaveWidget .js-save-search-rename-cancel").on("click",function(e){e=a(e.target).closest("td");l(e),c(e)}),a(".solrSearchSaveWidget .js-save-search-rename-save").on("click",function(e){var t=a(e.target),n=t.closest("td"),e=n.find(".js-save-search-input"),t=t.closest("tr").data("usersearchid"),e=e.val();e.length&&(i(e,t),o(n,e),l(n),c(n))}),a(".solrSearchSaveWidget .js-save-search-input").on("keypress",function(e){var t=a(e.target),n=t.closest("td"),r=n.closest("tr").data("usersearchid"),t=t.val();"Enter"===e.key&&(e.preventDefault(),t.length&&(i(t,r),o(n,t),l(n),c(n)))})}};function i(e,t){var n="//".concat(s,"/Solr/RenameSolrSearchInfo");SCM.Ajax.post(n,{searchName:e,userSearchId:t}).expectActionResultModel().ensureSuccess().catch(console.error)}function o(e,t){e.find(".js-save-search-name-link").text(t)}function l(e){e.find(".js-save-search-input").removeClass("active"),e.find(".js-save-search-rename-cancel").removeClass("active"),e.find(".js-save-search-rename-save").removeClass("active")}function c(e){e.find(".js-save-search-name-link").removeClass("hide"),e.find(".js-save-search-rename-rename").removeClass("hide")}}(jQuery);var SCM=SCM||{};SCM.TermsAndConditions=function(n){var e="js-terms-conditions",r="js-terms-conditions-agree",i="js-terms-conditions-decline";return{init:function(){!function(){var t=n("."+e);t.length&&(n("."+r).click(function(){var e=n(this).data("ajax-url");""!=e&&0<e.length&&SCM.Ajax.get(e).then(function(e){}).finally(function(){a(t)})}),n("."+i).click(function(){a(t)}))}()}};function a(e){e.removeClass("open"),SCM.Focus.release(e)}}(jQuery);var Theme=Theme||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Theme.MeetingAbstractIssue=function(a){var s=a("#hfSiteURL").val(),o=0,l=0,i="icon-general_arrow-right",t=".".concat(i),c="icon-general_arrow-down",n=".".concat(c);return{init:function(){l=a("#hdnIssueId").val(),a(document.body).on("click",".js-cat-toggle",function(e){var t=a(e.currentTarget);e.preventDefault(),u(t)}),a(".js-show-all-toggle").on("click",function(e){e.preventDefault(),a(t).length?a(".js-cat-toggle").each(function(){a(this).find(t).length&&u(a(this),!0)}):a(".js-cat-toggle").each(function(){a(this).find(n).length&&u(a(this))})}),a(".js-issue-search").on("keypress",function(e){"Enter"===e.key&&r(a(this))}),a(".js-issue-cat-search").on("click",function(){r(a(this).prev("input"))})}};function r(e){var t,n=e.data("issue"),r=e.data("volume"),i=e.val();t=n,e=r,n=i,r=a("#hfQuickSearchUrl").val(),i="",r&&(i=r.replace("{searchQuery}",n),i="".concat(i,"&fl_IssueNo=").concat(t,"&fl_Volume=").concat(e),window.location=i)}function u(e,t){var n=e.siblings(".js-children-category-container"),r=e.find(".js-toggle-icon");r.hasClass(i)?(function(e,t,n){{var r,i;t.children().length||(r=e.data("id"),i=e.data("headingtypeid"),e="//".concat(s,"/IssueVolume/MeetingAbstractIssueChildHeadings"),i={headingId:r,issueId:l,headingTypeId:i},o++,a("body").addClass("wait"),SCM.Ajax.get(e,i).expectHtml().then(function(e){t.html(e),!0===n&&t.find(".js-cat-toggle").each(function(){u(a(this))})}).catch(console.error).finally(d))}}(e,n,t),n.show(),r.removeClass(i),r.addClass(c)):(e.find(".js-children-category-container").hide(),n.hide(),r.removeClass(c),r.addClass(i))}function d(){--o<=0&&a("body").removeClass("wait")}}(jQuery);var SCM=SCM||{};SCM.AdobeAnalytics=(jQuery,{sendAdobeAnalyticsProductData:function(e){SCM.Ajax.get("/ThirdParty/GetAdobeAnalyticsProductDataForArticleAbstract",{articleId:e}).expectJson().then(function(e){digitalData.products.push({productInfo:{sku:e.SKU,issueDate:e.IssueDate,format:e.Format,articleTitle:e.ArticleTitle,abstractValues:e.AbstractValue,societyName:e.SocietyName,collectionName:e.CollectionName,issue:e.Issue,volume:e.Volume,journalTitle:e.JournalTitle,accensionNumber:e.AccensionNumber,authors:e.Authors,doi:e.Doi,viewType:e.ViewType,articleKeywords:e.ArticleKeywords,articleMetadata:e.ArticleMetadata}}),_satellite.track("HTML Abstract View")}).catch(function(e){console.error("Error logging Adobe Analytics Product data",e)})},sendAdobeAnalyticsArticleData:function(e,t,n){SCM.Ajax.get("/ThirdParty/GetAdobeAnalyticsProductDataForArticlePage",{articleId:e,isAbstractPage:t,collectionId:n}).expectJson().then(function(e){digitalData.products.push({productInfo:{sku:e.SKU,issueDate:e.IssueDate,format:e.Format,articleTitle:e.ArticleTitle,abstractValues:e.AbstractValue,societyName:e.SocietyName,collectionName:e.CollectionName,issue:e.Issue,volume:e.Volume,journalTitle:e.JournalTitle,accensionNumber:e.AccensionNumber,authors:e.Authors,doi:e.Doi,viewType:e.ViewType,articleKeywords:e.ArticleKeywords,articleMetadata:e.ArticleMetadata}}),_satellite.track("HTML Full Text View")}).catch(function(e){console.error("Error logging Adobe Analytics Product data",e)})}}),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=SCM.AdobeAnalytics);var SCM=SCM||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}SCM.CloseButton=function(e){return{init:function(){e(".js-close-parent-container").on("click",function(){e(this).parents(".js-parent-container").hide()})}}}(jQuery);var Theme=Theme||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Theme.BookToc=function(e){var t=e("ul.bookToc li.expandable");return{init:function(){t&&t.length&&e(".js-toc-expand-collapse").addClass("enabled"),e(".toc-expand-collapse .js-show-all").on("click",function(){t.not(".expanded").addClass("expanded")}),e(".toc-expand-collapse .js-hide-all").on("click",function(){t.removeClass("expanded")})}}}(jQuery),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=Theme.BookToc);var Theme=Theme||{};Theme.CurrentBookSearch=function(r){return{init:function(){r(".js-current-book-search").on("keypress",function(e){13===e.keyCode&&t(r(this))}),r(".js-current-book-search-submit").on("click",function(){t(r(this).prev("input"))})}};function t(e){var t=e.data("book"),n=e.val(),e=r("#hfQuickSearchUrl").val();e&&(n=e.replace("{searchQuery}",n),window.location=n+"&fl_BookID="+t)}}(jQuery),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=App.CurrentBookSearch);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},function(e,n){function t(e){var t;e.length&&(e.each(function(){var e=n(this);e.attr("data-video-id",encodeURIComponent(e.attr("data-video-id")).replace("ref%3A","ref:"))}),t=e.data("player"),e=e.data("account"),n.getScript("//players.brightcove.net/"+e+"/"+t+"_default/index.min.js",function(){}))}e.init=function(){t(n(".brightcove-wrapper video.video-js")),t(n(".brightcove-wrapper-audio video.video-js"))}}(SCM.Utilities.Brightcove=SCM.Utilities.Brightcove||{},jQuery);var ArtMetric={};function getWidgetInstanceName(e){var t="",n=$(e).attr("class"),e=n.indexOf("widget-instance-");return t=0<=e?n.substr(e).split("-")[2]:t}ArtMetric.fullVersion=function($dest,routeUrl){var baseSiteUrl;$dest.find(".widget-ArticleLevelMetrics").length<1&&(baseSiteUrl=$("#hfSiteURL"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(routeUrl="//"+baseSiteUrl.val()+routeUrl),$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.prepend(e),setTimeout(function(){void 0!==window.ChartistData&&ArtMetric.createChart(".ct-chart",window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0},[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e}}}]])},200),ArtMetric.reloadDimensionsBadge()},error:function error(xmlHttpRequest,textStatus,errorThrown){var err;window.console&&(err=eval("("+xmlHttpRequest.responseText+")"),console.error("error: "+err),console.error("status: "+textStatus))}}))},ArtMetric.reloadDimensionsBadge=function(){($(".contentmet-dimensions").length||$(".artmet-dimensions").length)&&window.__dimensions_embed&&window.__dimensions_embed.addBadges&&($(".__dimensions_badge_embed__").length&&($(".__dimensions_badge_embed__").removeAttr("data-dimensions-badge-installed"),$(".__dimensions_badge_embed__").empty()),window.__dimensions_embed.addBadges())},ArtMetric.limitLabels=function(){var e=$(".ct-horizontal.ct-label"),t=e.length,n=Math.ceil(t/8),r=1;e.not(":eq(0)").each(function(){r%n!=0&&$(this).hide(),r++})},ArtMetric.createChart=function(e,t,n,r){var r=new Chartist.Line(e,t,n,r),i=0;r.on("created",function(){i=0,ArtMetric.limitLabels()}),r.on("draw",function(e){"line"!==e.type&&"point"!==e.type&&"area"!==e.type||i++,"line"===e.type?e.element.animate({opacity:{begin:25*i+150,dur:250,from:0,to:1}}):"point"===e.type?e.element.animate({x1:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},x2:{begin:25*i,dur:250,from:e.x-10,to:e.x,easing:"easeOutQuart"},opacity:{begin:25*i,dur:250,from:0,to:1,easing:"easeOutQuart"}}):"area"===e.type&&e.element.animate({opacity:{begin:25*i+250,dur:300,from:0,to:1}})})},ArtMetric.triggerModal=function(e,t){var n=$(".artmet-dimensions").length?"true":"false",r="/ThirdParty/ArticleLevelMetricsDetails",i=getWidgetInstanceName(".widget-ArticleLevelMetrics");0<i.length&&(r+="/"+i),ArtMetric.fullVersion(e,r+="?articleId="+t+"&showDimensionsBadge="+n);n=$(".artmet-modal"),r=$("body");n.css({display:"block",opacity:1}),r.addClass("metrics-modal-open")},ArtMetric.closeModal=function(){var e=$(".artmet-modal"),t=$("body");e.attr("style",""),t.removeClass("metrics-modal-open")},ArtMetric.eventsToClose=function(){$(".js-artmet-close-modal").click(function(){ArtMetric.closeModal()}),$(".js-artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},$(document).ready(function(){$(".artmet-modal-trigger, .artmet-condensed-stats .artmet-views").click(function(){var e=$(".artmet-modal-trigger").attr("data-article-id");ArtMetric.triggerModal($(".artmet-modal-contents"),e)}),ArtMetric.eventsToClose(),$(".__dimensions_badge_embed__").on("dimensions_embed:show",function(){$(".__dimensions_badge_embed__").closest(".artmet-item").removeClass("hide"),$(".__dimensions_badge_embed__").closest(".contentmet-citations").removeClass("hide")}),$(".altmetric-embed").on("altmetric:show",function(){$(".altmetric-embed").closest(".artmet-item").removeClass("hide")})});var SCM=SCM||{};function insertArticleLinksIntoReferences(){var r,t,e=$("#js-hfArticleLinksReferencesDoiRegex").val();e&&(r=new RegExp(e,"g"),!(t=$(".ref-list").children("div").map(function(e,t){var n=$(t).html().match(r);return n&&n.length?{elem:t,doi:n[0]}:null}).filter(function(e,t){return!!t&&!!t.elem&&!!t.doi})).length||(e=t.map(function(e,t){return t.doi}).get().filter(function(e,t,n){return n.indexOf(e)===t}))&&e.length&&$.post("/Article/ArticleUrlsByDoi",{dois:e.toString()}).promise().then(function(r){if(!r||!r.Success){var e=$.Deferred();return e.reject(r.Messages&&r.Messages.length?r.Messages[0]:"Unknown error"),e}t.each(function(e,t){var n;t.elem&&t.doi&&r.Result[t.doi]&&(n=$(t.elem).find(".js-ref-link").first(),t=$("<div>").addClass("article-ref-link js-ref-link").html($("<a>").attr("href",r.Result[t.doi]).html("Article")),n.before(t))})}).then(null,function(e){console.error("Unable to look up resource URLs for DOIs"),console.error(e)}))}SCM.Utilities=SCM.Utilities||{},function(e,t){var n=t("#ArticleFullTextWrap"),r=!1;n&&n.attr("data-userHasAccess")&&(r="true"===n.attr("data-userHasAccess").toLowerCase()),e.replaceContentLinks=function(){r||n.find("a[data-reveal-id]").each(function(){t(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})},e.init=function(){e.replaceContentLinks(),SCM.Utilities.Brightcove&&SCM.Utilities.Brightcove.init(),SCM.InstitutionOpenUrl&&SCM.InstitutionOpenUrl.init()},insertArticleLinksIntoReferences()}(SCM.ArticleFulltext=SCM.ArticleFulltext||{},jQuery);var SCM=SCM||{};SCM.ArticleMainView=function(a){return{init:function(){a("#articleMainView-articleId").length&&SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(5,500).execute(function(){return window.digitalData}).then(function(e){var t,n,r,i;!function(){if(document.referrer){var e=document.referrer.match(/:\/\/(.[^/]+)/),t=window.location.hostname;if(e&&e[1]===t)return!0}return!1}()||(t=a("#articleMainView-articleId").data("articleid"),n=window.location.href.includes("abstract"),r=document.referrer.match(/\/collection\/(\d+)/),i=-1,r&&(i=r[1]),SCM.AdobeAnalytics.sendAdobeAnalyticsArticleData(t,n,i))}).catch(function(e){console.error("Timed out waiting for Adobe Analytics to be ready.")})}}}(jQuery);var SCM=SCM||{};!function(e,s){e.init=function(){var e=s(".widget-ArticleLinks");e.length&&e.each(function(){var e=s(this),t=e.find(".js-view-more-div"),n=e.find(".js-view-less-div"),r=e.find(".js-view-more-div > .js-view-more-a"),i=e.find(".js-view-less-div > .js-view-less-a"),a=e.find(".cc-row.js-more");r.length&&r.on("click",function(){a.removeClass("hide"),n.removeClass("hide"),t.addClass("hide")}),i.length&&i.on("click",function(){a.addClass("hide"),n.addClass("hide"),t.removeClass("hide")})})}}(SCM.ArticleLinks=SCM.ArticleLinks||{},jQuery);var Theme=Theme||{};Theme.ConferencesBrowseByYear=function(a){var s=a("#hfSiteURL").val();return{init:function(){a(".master-main").on("click",".js-bby-decade",e),a(".master-main").on("click",".js-bby-year",t),a(".master-main").on("click",".js-conference-list-item",n)}};function e(e){var t=a(e.currentTarget),n=t.data("decade"),r=a(".js-bby-decade"),e=a(".js-bby-decadeYears").find('[data-decade="'.concat(n,'"]')),n=e.children(".js-bby-year").last();t.hasClass("selected")||(i(r,t),function(e,t){a(".js-bby-years").addClass("hide"),e.length&&e.removeClass("hide");a(".js-bby-year").removeClass("selected"),t.length&&t.trigger("click")}(e,n))}function t(e){var t=a(e.currentTarget),n=t.data("year"),e=a(".js-bby-year");t.hasClass("selected")||(i(e,t),t=n,n="//".concat(s,"/Proceeding/ConferenceListByYear"),t={year:t},SCM.Ajax.get(n,t).expectHtml().then(function(e){var t=a(".js-bby-conferenceList");e.length?t.html(e):t.html("No conferences were found for the selected year.")}).catch(console.error))}function i(e,t){e.removeClass("selected"),t.toggleClass("selected")}function n(e){var t,n=a(e.currentTarget),r=n.closest(".js-conference-list-resources-item").attr("data-conferenceId"),i=a('.js-conference-volume-list[data-conferenceId="'.concat(r,'"]'));0==i.html().trim().length&&(t=a('.js-conference-volume-list[data-conferenceId="'.concat(e=r,'"]')),r="//".concat(s,"/Proceeding/ConferenceVolumeListResources"),e={conferenceId:e},SCM.Ajax.get(r,e).expectHtml().then(function(e){a(t).html(e)}).catch(console.error)),n.find("i").toggleClass("icon-general-add icon-general_minus"),i.toggleClass("hide")}}(jQuery);var SCM=SCM||{};SCM.StickyHeaderAd=function(t){return{init:function(){SCM.Retry.policy().handleResult(function(e){return!e}).waitAndRetry(5,500).execute(function(){return googletag.apiReady}).then(function(e){n()}).catch(function(e){console.error("Timed out waiting for library to be ready.")}),n()}};function n(){var e;t(".master-header .js-ad-banner").addClass("fixed-banner-ad"),setTimeout(function(){t(".master-header .js-ad-banner").removeClass("fixed-banner-ad")},1e3*(e=t(".master-header .js-ad-banner .hfAdBlockInfo").data("stickyTime"),Number.isInteger(e)?e:5))}}(jQuery);var SCM=SCM||{};!function(s,o){var e;s.Init=function(){(e=o(".hfAdBlockInfo[data-adprovider-typeid=4]")).length&&s.displayEhsAds()},s.displayEhsAds=function(){var a=SCM.SplitScreen&&SCM.SplitScreen.getDocWidth()<767;e.each(function(e,t){var n=o(t),r=n.data("slotname"),i=n.data("divid"),t=n.data("enabled-on-mobile"),n=n.data("sizes");if(a&&"False"===t)return!1;r&&i&&n&&(n=s.getAdSize(n,a),s.setupAd(i,r,n))}),s.refreshAds()},s.getAdSize=function(e,t){e=e.split("|");return t&&1<e.length?e[1]:e[0]},s.refreshAds=function(){var t=!1,n=2;setTimeout(function e(){n--;t=s.refreshGoogleAds();!t&&0<n&&setTimeout(e,500)},500)},s.refreshGoogleAds=function(){if(googletag&&googletag.apiReady){var e=googletag.pubads().getSlots();return e&&e.length&&googletag.pubads().refresh(e),!0}return!1},s.setupAd=function(e,t,n){n=s.constructUrlFromAdBlockData(["adid="+e,"site="+t,"size="+n,"zone=","ims1=e7","ims2=i19"]);s.addEhsScriptElementToPage(n)},s.constructUrlFromAdBlockData=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n]+"&";return"https://ads.ehealthcaresolutions.com/a/?"+(t+="r="+1e16*Math.random()+"&url="+encodeURIComponent(window.location.href))},s.addEhsScriptElementToPage=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=e;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},o(function(){s.Init()})}(SCM.EhsAds=SCM.EhsAds||{},jQuery);var SCM=SCM||{};SCM.StickySidebarAd=function(i){var a;return{init:function(){a=i(".sidebar-widget_wrap .widget-AdBlock:last"),function(){var e=i(window),t=!1;function n(){t||(requestAnimationFrame(r),t=!0)}function r(){var e;t=!1,e=i(".center-content").height(),i(".sidebar-widget_wrap").height()<e&&function(){i(window).on("scroll",function(){var e=i(".sidebar-widget_wrap").height(),t=i(".footer_wrap").offset().top-65-i(window).scrollTop();0<i(".footer_wrap").length&&(i(".footer_wrap").is_on_screen()?(t<e&&a.addClass("ad-bottomed-out"),e<t&&a.removeClass("ad-bottomed-out")):a.removeClass("ad-bottomed-out"))});var e=a.hasClass("rail-ad-stuck")?i(".sidebar-widget_wrap").offset().top+i(".sidebar-widget_wrap").height():a.offset().top;i(window).scrollTop()>e?a.addClass("rail-ad-stuck"):a.removeClass("rail-ad-stuck")}()}e.on("scroll",n),e.on("resize",n)}()}}}(jQuery);var App=App||{};!function(e,n){e.mobileContentNav=function(){n(".toggle-left-col").click(function(e){e.stopPropagation(),n("body").addClass("on-canvas"),n(".page-column--left").addClass("expanded")}),n(".toggle-left-col__close, .info-widget-wrap a, .mobile-mask").click(function(){n(".page-column--left").removeClass("expanded"),n("body").removeClass("on-canvas")})},e.contentModals=function(){n(".pg_ArticleSplitView, .pg_articlesplitview").length||n("a[reveal-id]").each(function(){var e,t;n(this).hasClass("xref-fn")?(n(this).click(function(){var e=n(this).attr("reveal-id"),e=n('.fn[content-id="'+e+'"]'),e=n(e).html();n("body").addClass("on-canvas"),n(e).clone().appendTo("#revealModal #revealContent").addClass("ref-modal"),n(".ref-modal").closest(".reveal-modal").addClass("open")}),n(".close-reveal-modal").on("click",function(){n(this).closest(".reveal-modal").removeClass("open"),n(".ref-modal").html("").removeClass("ref-modal"),n("body").removeClass("on-canvas")})):(e=n(this).attr("reveal-id"),t=n('.reveal-modal[content-id="'+e+'"]'),n(this).click(function(e){n(t).length&&(e.stopPropagation(),n("body").addClass("on-canvas"),n(t).addClass("open"),n(document.body).on("click",function(){n(t).removeClass("open"),n("body").removeClass("on-canvas")}))}))})},e.init=function(){e.mobileContentNav()},e.windowLoadInit=function(){e.contentModals()}}(App.SiteJS=App.SiteJS||{},jQuery),function(e){e(document).ready(function(){App.SiteJS.init(),!0===e("body").hasClass("pg_Chapter")&&SCM.SplitScreen.init()}),e(window).on("load",function(){App.SiteJS.windowLoadInit()}),e(window).on("resize",function(){})}(jQuery),function r(i,a,s){function o(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return o(i[t][1][e]||e)},n,n.exports,r,i,a,s)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)o(s[e]);return o}({1:[function(e,t,n){"use strict";e("core-js/stable"),e("regenerator-runtime/runtime");e=(e=e("./scm.ecmascript-testbed"))&&e.__esModule?e:{default:e};try{e.default.runTestsOnJsDebug()}catch(e){console.error("One or more ES feature tests failed:",e)}},{"./scm.ecmascript-testbed":2,"core-js/stable":429,"regenerator-runtime/runtime":430}],2:[function(e,t,n){"use strict";function l(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function r(o){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=o.apply(e,s);function i(e){l(r,t,n,i,a,"next",e)}function a(e){l(r,t,n,i,a,"throw",e)}i(void 0)})}}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(c=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new c(e)}function a(){console.log(" *****  Performing EcmaScript Feature Tests  *****");var e=performance.now();(function(){var e=[];e.push("val"),console.log("Let and Const work","changed",e)})(),(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"testMethod",value:function(){console.log("Classes work")}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())).testMethod(),console.log("Arrow functions work."),function(){var e="This is some ".concat("stuff");console.log("Interpolated Strings work",e)}(),function(){for(var e=0,t=0,n=[1,2,3,4,5];t<n.length;t++)e+=n[t];console.log("for...of loop works",e)}(),Promise.resolve("works").then(function(e){console.log("Promises work",e)}),function(){var e=new Map;e.set("a",1),console.log("Map works",e.get("a"))}(),function(){var e=regeneratorRuntime.mark(t);function t(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t<n)return e.next=3,t;e.next=6;break;case 3:t+=r,e.next=0;break;case 6:case"end":return e.stop()}},e)}var n,r=0,i=s(t(0,10,2));try{for(i.s();!(n=i.n()).done;){var a=n.value;r+=a}}catch(e){i.e(e)}finally{i.f()}console.log("Generators work",r)}(),function(){if(!Symbol||!Symbol.iterator)throw new Error("Symbol.iterator is not defined");var e={from:1,to:5};if(e[Symbol.iterator]=function(){return{current:this.from,last:this.to,next:function(){return this.current<=this.last?{done:!1,value:this.current++}:{done:!0}}}},!Array.from(e).length)throw new Error("Test Object is not iterable");e=new Map;e.set("a",1);e=Array.from(e);if(!e.length)throw new Error("Map is not iterable");console.log("Test Object and Map are iterable",e)}(),function(){var e=Math.pow(3,3);console.log("Exponent operator works",e)}(),function(){function e(){return(e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve("foo");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){return e.apply(this,arguments)}().then(function(e){console.log("async/await works",e)})}(),console.log("Destructuring Assignment works",1,2,[3,4,5]),function(){(function(){var e={a:1,b:2,c:3},t=Object.values(e),n=Object.entries(e),e=Object.getOwnPropertyDescriptors(e);console.log("New Object methods work",t,n,e)})(),function(){var e="123".padStart(5,"0"),t="123".padEnd(5,"0");console.log("String padding works",e,t)}();var e=[u.name];console.log("There are known failures for ES 2017",e)}(),function(){var e=[1,2,3,4].concat([5,6]);console.log("Spread operator works",e)}(),function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log("Rest parameters work",e,t,r)}(1,2,3,4,5,6),Promise.reject("test").catch(function(){}).finally(function(){console.log("Promise.finally works")}),function(){var o=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},Symbol.asyncIterator,function(){return{i:0,next:function(){return this.i<3?Promise.resolve({value:this.i++,done:!1}):Promise.resolve({done:!0})}}});r(regeneratorRuntime.mark(function e(){var t,n,r,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n=!(t=[]),e.prev=3,a=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new c(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(o);case 5:return e.next=7,a.next();case 7:if(!(n=!(s=e.sent).done)){e.next=13;break}s=s.value,t.push(s);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),r=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,n&&null!=a.return)return e.next=24,a.return();e.next=24;break;case 24:if(e.prev=24,r)throw i;e.next=27;break;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}},e,null,[[3,15,19,29],[20,,24,28]])}))().then(function(e){console.log("for await...of works",e)})}(),function(){var e=[0,1,2,[3,4]].flat();console.log("Array.prototype.flat works",e)}(),function(){var e=[0,1,2,3,4].flatMap(function(e){return[2*e]});console.log("Array.prototype.flatMap works",e)}(),function(){var e=Object.fromEntries([["foo","bar"],["baz",42]]);console.log("Object.fromEntries works",e)}(),function(){(function(){var e=null!==null?null:"baz";console.log("Nullish Coelescing Operator works","foo",e)})(),function(){var e={prop1:"foo",arr1:[1,2,3]},t=null===e?void 0:e.prop1,n=null===(i=e.arr1)||void 0===i?void 0:i.pop(),r=null===e?void 0:e.noSuchProp,i=null===(e=(i=e.arr1).noSuchMethod)||void 0===e?void 0:e.call(i);console.log("Optional Chaining Operator works",t,n,r,i)}(),function(){var e=globalThis.prototype;console.log("globalThis works",e)}();var e=[d.name];console.log("There are known failures for ES 2020",e)}(),function(){var e="aabcdaaefgaa".replaceAll("aa","zz");console.log("String.prototype.replaceAll works",e)}(),function(){var e=null;null!==(n=e)&&void 0!==n||(e="foo");var t=null;t=t||"bar";var n="baz";n=n&&"jenga",console.log("Logical Assignment Operators work",e,t,n)}(),console.log("Numeric Literal Separators work",1234),Promise.any([Promise.resolve("test1"),Promise.resolve("test2")]).then(function(e){console.log("Promise.any works",e)}),function(){var e=new AggregateError([new Error("err1"),new Error("err2")],"test aggregate error");console.log("AggregateError works",e)}(),function(){var e=new URLSearchParams("param1=val1&param2=val2"),t=e.get("param1"),e=e.get("param2");console.log("URLSearchParams works",t,e)}();e=performance.now()-e;console.log(" ***** EcmaScript Feature Tests completed in: "+e+"ms")}function u(){var e=Int32Array.from([123,456,789,234,567]),e=Atomics.xor(e,2,123);console.log("Atomics work",e)}function d(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={runTests:a,runTestsOnJsDebug:function(){window&&window.location&&window.location.search&&-1<window.location.search.toLowerCase().indexOf("jsdebug=true")&&a()}}},{}],3:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-callable"),a=e("../internals/try-to-string"),s=r.TypeError;t.exports=function(e){if(i(e))return e;throw s(a(e)+" is not a function")}},{"../internals/global":82,"../internals/is-callable":97,"../internals/try-to-string":188}],4:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-constructor"),a=e("../internals/try-to-string"),s=r.TypeError;t.exports=function(e){if(i(e))return e;throw s(a(e)+" is not a constructor")}},{"../internals/global":82,"../internals/is-constructor":98,"../internals/try-to-string":188}],5:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-callable"),a=r.String,s=r.TypeError;t.exports=function(e){if("object"==typeof e||i(e))return e;throw s("Can't set "+a(e)+" as a prototype")}},{"../internals/global":82,"../internals/is-callable":97}],6:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/object-create"),e=e("../internals/object-define-property"),a=r("unscopables"),s=Array.prototype;null==s[a]&&e.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(e){s[a][e]=!0}},{"../internals/object-create":127,"../internals/object-define-property":129,"../internals/well-known-symbol":197}],7:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":167}],8:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/object-is-prototype-of"),a=r.TypeError;t.exports=function(e,t){if(i(t,e))return e;throw a("Incorrect invocation")}},{"../internals/global":82,"../internals/object-is-prototype-of":136}],9:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-object"),a=r.String,s=r.TypeError;t.exports=function(e){if(i(e))return e;throw s(a(e)+" is not an object")}},{"../internals/global":82,"../internals/is-object":102}],10:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],11:[function(e,t,n){e=e("../internals/fails");t.exports=e(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))})},{"../internals/fails":67}],12:[function(e,t,n){"use strict";function r(e){return!!d(e)&&(e=p(e),f(_,e)||f(R,e))}var i,a,s,o=e("../internals/array-buffer-native"),l=e("../internals/descriptors"),c=e("../internals/global"),u=e("../internals/is-callable"),d=e("../internals/is-object"),f=e("../internals/has-own-property"),p=e("../internals/classof"),h=e("../internals/try-to-string"),g=e("../internals/create-non-enumerable-property"),m=e("../internals/redefine"),v=e("../internals/object-define-property").f,y=e("../internals/object-is-prototype-of"),b=e("../internals/object-get-prototype-of"),w=e("../internals/object-set-prototype-of"),S=e("../internals/well-known-symbol"),C=e("../internals/uid"),x=c.Int8Array,k=x&&x.prototype,e=c.Uint8ClampedArray,e=e&&e.prototype,j=x&&b(x),M=k&&b(k),x=Object.prototype,A=c.TypeError,S=S("toStringTag"),T=C("TYPED_ARRAY_TAG"),D=C("TYPED_ARRAY_CONSTRUCTOR"),I=o&&!!w&&"Opera"!==p(c.opera),o=!1,_={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R={BigInt64Array:8,BigUint64Array:8};for(i in _)(s=(a=c[i])&&a.prototype)?g(s,D,a):I=!1;for(i in R)(s=(a=c[i])&&a.prototype)&&g(s,D,a);if((!I||!u(j)||j===Function.prototype)&&(j=function(){throw A("Incorrect invocation")},I))for(i in _)c[i]&&w(c[i],j);if((!I||!M||M===x)&&(M=j.prototype,I))for(i in _)c[i]&&w(c[i].prototype,M);if(I&&b(e)!==M&&w(e,M),l&&!f(M,S))for(i in o=!0,v(M,S,{get:function(){return d(this)?this[T]:void 0}}),_)c[i]&&g(c[i],T,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_CONSTRUCTOR:D,TYPED_ARRAY_TAG:o&&T,aTypedArray:function(e){if(r(e))return e;throw A("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!w||y(j,e)))return e;throw A(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(l){if(n)for(var r in _){r=c[r];if(r&&f(r.prototype,e))try{delete r.prototype[e]}catch(e){}}M[e]&&!n||m(M,e,!n&&I&&k[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(l){if(w){if(n)for(r in _)if((i=c[r])&&f(i,e))try{delete i[e]}catch(e){}if(j[e]&&!n)return;try{return m(j,e,!n&&I&&j[e]||t)}catch(e){}}for(r in _)!(i=c[r])||i[e]&&!n||m(i,e,t)}},isView:function(e){if(!d(e))return!1;e=p(e);return"DataView"===e||f(_,e)||f(R,e)},isTypedArray:r,TypedArray:j,TypedArrayPrototype:M}},{"../internals/array-buffer-native":10,"../internals/classof":33,"../internals/create-non-enumerable-property":43,"../internals/descriptors":50,"../internals/global":82,"../internals/has-own-property":83,"../internals/is-callable":97,"../internals/is-object":102,"../internals/object-define-property":129,"../internals/object-get-prototype-of":134,"../internals/object-is-prototype-of":136,"../internals/object-set-prototype-of":141,"../internals/redefine":150,"../internals/try-to-string":188,"../internals/uid":194,"../internals/well-known-symbol":197}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function i(e){return[255&e,e>>8&255]}function a(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function s(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function o(e){return J(e,23,4)}function l(e){return J(e,52,8)}function c(e,t){T(e[$],t,{get:function(){return E(this)[t]}})}function u(e,t,n,r){var i=x(n),n=E(e);if(i+t>n.byteLength)throw z(O);return e=E(n.buffer).bytes,n=i+n.byteOffset,t=I(e,n,n+t),r?t:W(t)}function d(e,t,n,r,i,a){if(n=x(n),e=E(e),n+t>e.byteLength)throw z(O);for(var s=E(e.buffer).bytes,o=n+e.byteOffset,l=r(+i),c=0;c<t;c++)s[o+c]=l[a?c:t-c-1]}var f=e("../internals/global"),p=e("../internals/function-uncurry-this"),h=e("../internals/descriptors"),g=e("../internals/array-buffer-native"),m=e("../internals/function-name"),v=e("../internals/create-non-enumerable-property"),y=e("../internals/redefine-all"),b=e("../internals/fails"),w=e("../internals/an-instance"),S=e("../internals/to-integer-or-infinity"),C=e("../internals/to-length"),x=e("../internals/to-index"),k=e("../internals/ieee754"),j=e("../internals/object-get-prototype-of"),M=e("../internals/object-set-prototype-of"),A=e("../internals/object-get-own-property-names").f,T=e("../internals/object-define-property").f,D=e("../internals/array-fill"),I=e("../internals/array-slice-simple"),_=e("../internals/set-to-string-tag"),R=e("../internals/internal-state"),F=m.PROPER,P=m.CONFIGURABLE,E=R.get,L=R.set,e="ArrayBuffer",$="prototype",O="Wrong index",U=f[e],N=U,B=N&&N[$],m=f.DataView,q=m&&m[$],R=Object.prototype,H=f.Array,z=f.RangeError,V=p(D),W=p([].reverse),J=k.pack,Y=k.unpack;if(g){var Q=F&&U.name!==e;if(b(function(){U(1)})&&b(function(){new U(-1)})&&!b(function(){return new U,new U(1.5),new U(NaN),Q&&!P}))Q&&P&&v(U,"name",e);else{(N=function(e){return w(this,B),new U(x(e))})[$]=B;for(var G,K=A(U),X=0;K.length>X;)(G=K[X++])in N||v(N,G,U[G]);B.constructor=N}M&&j(q)!==R&&M(q,R);var R=new m(new N(2)),Z=p(q.setInt8);R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||y(q,{setInt8:function(e,t){Z(this,e,t<<24>>24)},setUint8:function(e,t){Z(this,e,t<<24>>24)}},{unsafe:!0})}else B=(N=function(e){w(this,B);e=x(e);L(this,{bytes:V(H(e),0),byteLength:e}),h||(this.byteLength=e)})[$],q=(m=function(e,t,n){w(this,q),w(e,B);var r=E(e).byteLength,t=S(t);if(t<0||r<t)throw z("Wrong offset");if(r<t+(n=void 0===n?r-t:C(n)))throw z("Wrong length");L(this,{buffer:e,byteLength:n,byteOffset:t}),h||(this.buffer=e,this.byteLength=n,this.byteOffset=t)})[$],h&&(c(N,"byteLength"),c(m,"buffer"),c(m,"byteLength"),c(m,"byteOffset")),y(q,{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){e=u(this,2,e,1<arguments.length?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=u(this,2,e,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(e){return s(u(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return s(u(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return Y(u(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return Y(u(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){d(this,1,e,r,t)},setUint8:function(e,t){d(this,1,e,r,t)},setInt16:function(e,t){d(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){d(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){d(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){d(this,4,e,a,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){d(this,4,e,o,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){d(this,8,e,l,t,2<arguments.length?arguments[2]:void 0)}});_(N,e),_(m,"DataView"),t.exports={ArrayBuffer:N,DataView:m}},{"../internals/an-instance":8,"../internals/array-buffer-native":10,"../internals/array-fill":15,"../internals/array-slice-simple":25,"../internals/create-non-enumerable-property":43,"../internals/descriptors":50,"../internals/fails":67,"../internals/function-name":75,"../internals/function-uncurry-this":76,"../internals/global":82,"../internals/ieee754":88,"../internals/internal-state":94,"../internals/object-define-property":129,"../internals/object-get-own-property-names":132,"../internals/object-get-prototype-of":134,"../internals/object-set-prototype-of":141,"../internals/redefine-all":149,"../internals/set-to-string-tag":161,"../internals/to-index":177,"../internals/to-integer-or-infinity":179,"../internals/to-length":180}],14:[function(e,t,n){"use strict";var l=e("../internals/to-object"),c=e("../internals/to-absolute-index"),u=e("../internals/length-of-array-like"),d=Math.min;t.exports=[].copyWithin||function(e,t){var n=l(this),r=u(n),i=c(e,r),a=c(t,r),t=2<arguments.length?arguments[2]:void 0,s=d((void 0===t?r:c(t,r))-a,r-i),o=1;for(a<i&&i<a+s&&(o=-1,a+=s-1,i+=s-1);0<s--;)a in n?n[i]=n[a]:delete n[i],i+=o,a+=o;return n}},{"../internals/length-of-array-like":110,"../internals/to-absolute-index":176,"../internals/to-object":181}],15:[function(e,t,n){"use strict";var s=e("../internals/to-object"),o=e("../internals/to-absolute-index"),l=e("../internals/length-of-array-like");t.exports=function(e){for(var t=s(this),n=l(t),r=arguments.length,i=o(1<r?arguments[1]:void 0,n),r=2<r?arguments[2]:void 0,a=void 0===r?n:o(r,n);i<a;)t[i++]=e;return t}},{"../internals/length-of-array-like":110,"../internals/to-absolute-index":176,"../internals/to-object":181}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,e=e("../internals/array-method-is-strict")("forEach");t.exports=e?[].forEach:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":20,"../internals/array-method-is-strict":23}],17:[function(e,t,n){t.exports=function(e,t){for(var n=0,r=t.length,i=new e(r);n<r;)i[n]=t[n++];return i}},{}],18:[function(e,t,n){"use strict";var r=e("../internals/global"),f=e("../internals/function-bind-context"),p=e("../internals/function-call"),h=e("../internals/to-object"),g=e("../internals/call-with-safe-iteration-closing"),m=e("../internals/is-array-iterator-method"),v=e("../internals/is-constructor"),y=e("../internals/length-of-array-like"),b=e("../internals/create-property"),w=e("../internals/get-iterator"),S=e("../internals/get-iterator-method"),C=r.Array;t.exports=function(e){var t=h(e),n=v(this),e=arguments.length,r=1<e?arguments[1]:void 0,i=void 0!==r;i&&(r=f(r,2<e?arguments[2]:void 0));var a,s,o,l,c,u,e=S(t),d=0;if(!e||this==C&&m(e))for(a=y(t),s=n?new this(a):C(a);d<a;d++)u=i?r(t[d],d):t[d],b(s,d,u);else for(c=(l=w(t,e)).next,s=n?new this:[];!(o=p(c,l)).done;d++)u=i?g(l,r,[o.value,d],!0):o.value,b(s,d,u);return s.length=d,s}},{"../internals/call-with-safe-iteration-closing":30,"../internals/create-property":45,"../internals/function-bind-context":72,"../internals/function-call":74,"../internals/get-iterator":79,"../internals/get-iterator-method":78,"../internals/global":82,"../internals/is-array-iterator-method":95,"../internals/is-constructor":98,"../internals/length-of-array-like":110,"../internals/to-object":181}],19:[function(e,t,n){function r(o){return function(e,t,n){var r,i=l(e),a=u(i),s=c(n,a);if(o&&t!=t){for(;s<a;)if((r=i[s++])!=r)return!0}else for(;s<a;s++)if((o||s in i)&&i[s]===t)return o||s||0;return!o&&-1}}var l=e("../internals/to-indexed-object"),c=e("../internals/to-absolute-index"),u=e("../internals/length-of-array-like");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/length-of-array-like":110,"../internals/to-absolute-index":176,"../internals/to-indexed-object":178}],20:[function(e,t,n){function r(f){var p=1==f,h=2==f,g=3==f,m=4==f,v=6==f,y=7==f,b=5==f||v;return function(e,t,n,r){for(var i,a,s=C(e),o=S(s),l=w(t,n),c=x(o),u=0,r=r||k,d=p?r(e,c):h||y?r(e,0):void 0;u<c;u++)if((b||u in o)&&(a=l(i=o[u],u,s),f))if(p)d[u]=a;else if(a)switch(f){case 3:return!0;case 5:return i;case 6:return u;case 2:j(d,i)}else switch(f){case 4:return!1;case 7:j(d,i)}return v?-1:g||m?m:d}}var w=e("../internals/function-bind-context"),i=e("../internals/function-uncurry-this"),S=e("../internals/indexed-object"),C=e("../internals/to-object"),x=e("../internals/length-of-array-like"),k=e("../internals/array-species-create"),j=i([].push);t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6),filterReject:r(7)}},{"../internals/array-species-create":29,"../internals/function-bind-context":72,"../internals/function-uncurry-this":76,"../internals/indexed-object":89,"../internals/length-of-array-like":110,"../internals/to-object":181}],21:[function(e,t,n){"use strict";var i=e("../internals/function-apply"),a=e("../internals/to-indexed-object"),s=e("../internals/to-integer-or-infinity"),o=e("../internals/length-of-array-like"),e=e("../internals/array-method-is-strict"),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,e=e("lastIndexOf");t.exports=u||!e?function(e){if(u)return i(c,this,arguments)||0;var t=a(this),n=o(t),r=n-1;for((r=1<arguments.length?l(r,s(arguments[1])):r)<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:c},{"../internals/array-method-is-strict":23,"../internals/function-apply":71,"../internals/length-of-array-like":110,"../internals/to-indexed-object":178,"../internals/to-integer-or-infinity":179}],22:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/well-known-symbol"),a=e("../internals/engine-v8-version"),s=i("species");t.exports=function(t){return 51<=a||!r(function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},{"../internals/engine-v8-version":62,"../internals/fails":67,"../internals/well-known-symbol":197}],23:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})}},{"../internals/fails":67}],24:[function(e,t,n){function r(c){return function(e,t,n,r){u(t);var i=d(e),a=f(i),s=p(i),o=c?s-1:0,l=c?-1:1;if(n<2)for(;;){if(o in a){r=a[o],o+=l;break}if(o+=l,c?o<0:s<=o)throw h("Reduce of empty array with no initial value")}for(;c?0<=o:o<s;o+=l)o in a&&(r=t(r,a[o],o,i));return r}}var i=e("../internals/global"),u=e("../internals/a-callable"),d=e("../internals/to-object"),f=e("../internals/indexed-object"),p=e("../internals/length-of-array-like"),h=i.TypeError;t.exports={left:r(!1),right:r(!0)}},{"../internals/a-callable":3,"../internals/global":82,"../internals/indexed-object":89,"../internals/length-of-array-like":110,"../internals/to-object":181}],25:[function(e,t,n){var r=e("../internals/global"),l=e("../internals/to-absolute-index"),c=e("../internals/length-of-array-like"),u=e("../internals/create-property"),d=r.Array,f=Math.max;t.exports=function(e,t,n){for(var r=c(e),i=l(t,r),a=l(void 0===n?r:n,r),s=d(f(a-i,0)),o=0;i<a;i++,o++)u(s,o,e[i]);return s.length=o,s}},{"../internals/create-property":45,"../internals/global":82,"../internals/length-of-array-like":110,"../internals/to-absolute-index":176}],26:[function(e,t,n){e=e("../internals/function-uncurry-this");t.exports=e([].slice)},{"../internals/function-uncurry-this":76}],27:[function(e,t,n){function i(e,t){var n=e.length,r=s(n/2);return n<8?function(e,t){var n=e.length,r=1,i,a;while(r<n){a=r;i=e[r];while(a&&t(e[a-1],i)>0)e[a]=e[--a];if(a!==r++)e[a]=i}return e}(e,t):function(e,t,n,r){var i=t.length,a=n.length,s=0,o=0;while(s<i||o<a)e[s+o]=s<i&&o<a?r(t[s],n[o])<=0?t[s++]:n[o++]:s<i?t[s++]:n[o++];return e}(e,i(a(e,0,r),t),i(a(e,r),t),t)}var a=e("../internals/array-slice-simple"),s=Math.floor;t.exports=i},{"../internals/array-slice-simple":25}],28:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/is-array"),a=e("../internals/is-constructor"),s=e("../internals/is-object"),o=e("../internals/well-known-symbol")("species"),l=r.Array;t.exports=function(e){var t;return i(e)&&(t=e.constructor,(a(t)&&(t===l||i(t.prototype))||s(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?l:t}},{"../internals/global":82,"../internals/is-array":96,"../internals/is-constructor":98,"../internals/is-object":102,"../internals/well-known-symbol":197}],29:[function(e,t,n){var r=e("../internals/array-species-constructor");t.exports=function(e,t){return new(r(e))(0===t?0:t)}},{"../internals/array-species-constructor":28}],30:[function(e,t,n){var i=e("../internals/an-object"),a=e("../internals/iterator-close");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){a(t,"throw",e)}}},{"../internals/an-object":9,"../internals/iterator-close":107}],31:[function(e,t,n){var i=e("../internals/well-known-symbol")("iterator"),a=!1;try{var r=0,s={next:function(){return{done:!!r++}},return:function(){a=!0}};s[i]=function(){return this},Array.from(s,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},{"../internals/well-known-symbol":197}],32:[function(e,t,n){var e=e("../internals/function-uncurry-this"),r=e({}.toString),i=e("".slice);t.exports=function(e){return i(r(e),8,-1)}},{"../internals/function-uncurry-this":76}],33:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/to-string-tag-support"),a=e("../internals/is-callable"),s=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),l=r.Object,c="Arguments"==s(function(){return arguments}());t.exports=i?s:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=l(e),o))?e:c?s(t):"Object"==(e=s(t))&&a(t.callee)?"Arguments":e}},{"../internals/classof-raw":32,"../internals/global":82,"../internals/is-callable":97,"../internals/to-string-tag-support":186,"../internals/well-known-symbol":197}],34:[function(e,t,n){var r=e("../internals/function-uncurry-this"),i=e("../internals/array-slice-simple"),a=r("".replace),s=r("".split),o=r([].join),r=String(Error("zxcasd").stack),l=/\n\s*at [^:]*:[^\n]*/,c=l.test(r),u=/@[^\n]*\n/.test(r)&&!/zxcasd/.test(r);t.exports=function(e,t){if("string"!=typeof e)return e;if(c)for(;t--;)e=a(e,l,"");else if(u)return o(i(s(e,"\n"),t),"\n");return e}},{"../internals/array-slice-simple":25,"../internals/function-uncurry-this":76}],35:[function(e,t,n){"use strict";var c=e("../internals/object-define-property").f,u=e("../internals/object-create"),d=e("../internals/redefine-all"),f=e("../internals/function-bind-context"),p=e("../internals/an-instance"),h=e("../internals/iterate"),s=e("../internals/define-iterator"),o=e("../internals/set-species"),g=e("../internals/descriptors"),m=e("../internals/internal-metadata").fastKey,e=e("../internals/internal-state"),v=e.set,y=e.getterFor;t.exports={getConstructor:function(e,n,r,i){function a(e,t,n){var r,i=l(e),a=s(e,t);return a?a.value=n:(i.last=a={index:r=m(t,!0),key:t,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),g?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e}function s(e,t){var n,r=l(e);if("F"!==(e=m(t)))return r.index[e];for(n=r.first;n;n=n.next)if(n.key==t)return n}var e=e(function(e,t){p(e,o),v(e,{type:n,index:u(null),first:void 0,last:void 0,size:0}),g||(e.size=0),null!=t&&h(t,e[i],{that:e,AS_ENTRIES:r})}),o=e.prototype,l=y(n);return d(o,{clear:function(){for(var e=l(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,g?e.size=0:this.size=0},delete:function(e){var t,n=l(this),r=s(this,e);return r&&(t=r.next,e=r.previous,delete n.index[r.index],r.removed=!0,e&&(e.next=t),t&&(t.previous=e),n.first==r&&(n.first=t),n.last==r&&(n.last=e),g?n.size--:this.size--),!!r},forEach:function(e){for(var t,n=l(this),r=f(e,1<arguments.length?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),d(o,r?{get:function(e){e=s(this,e);return e&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),g&&c(o,"size",{get:function(){return l(this).size}}),e},setStrong:function(e,t,n){var r=t+" Iterator",i=y(t),a=y(r);s(e,t,function(e,t){v(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}},n?"entries":"values",!n,!0),o(t)}}},{"../internals/an-instance":8,"../internals/define-iterator":48,"../internals/descriptors":50,"../internals/function-bind-context":72,"../internals/internal-metadata":93,"../internals/internal-state":94,"../internals/iterate":106,"../internals/object-create":127,"../internals/object-define-property":129,"../internals/redefine-all":149,"../internals/set-species":160}],36:[function(e,t,n){"use strict";function l(e){return e.frozen||(e.frozen=new r)}function r(){this.entries=[]}function i(e,t){return o(e.entries,function(e){return e[0]===t})}var a=e("../internals/function-uncurry-this"),c=e("../internals/redefine-all"),u=e("../internals/internal-metadata").getWeakData,d=e("../internals/an-object"),f=e("../internals/is-object"),p=e("../internals/an-instance"),h=e("../internals/iterate"),s=e("../internals/array-iteration"),g=e("../internals/has-own-property"),e=e("../internals/internal-state"),m=e.set,v=e.getterFor,o=s.find,y=s.findIndex,b=a([].splice),w=0;r.prototype={get:function(e){e=i(this,e);if(e)return e[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(t){var e=y(this.entries,function(e){return e[0]===t});return~e&&b(this.entries,e,1),!!~e}},t.exports={getConstructor:function(e,n,r,i){function a(e,t,n){var r=o(e),i=u(d(t),!0);return!0===i?l(r).set(t,n):i[r.id]=n,e}var e=e(function(e,t){p(e,s),m(e,{type:n,id:w++,frozen:void 0}),null!=t&&h(t,e[i],{that:e,AS_ENTRIES:r})}),s=e.prototype,o=v(n);return c(s,{delete:function(e){var t=o(this);if(!f(e))return!1;var n=u(e);return!0===n?l(t).delete(e):n&&g(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!f(e))return!1;var n=u(e);return!0===n?l(t).has(e):n&&g(n,t.id)}}),c(s,r?{get:function(e){var t=o(this);if(f(e)){var n=u(e);return!0===n?l(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),e}}},{"../internals/an-instance":8,"../internals/an-object":9,"../internals/array-iteration":20,"../internals/function-uncurry-this":76,"../internals/has-own-property":83,"../internals/internal-metadata":93,"../internals/internal-state":94,"../internals/is-object":102,"../internals/iterate":106,"../internals/redefine-all":149}],37:[function(e,t,n){"use strict";var m=e("../internals/export"),v=e("../internals/global"),y=e("../internals/function-uncurry-this"),b=e("../internals/is-forced"),w=e("../internals/redefine"),S=e("../internals/internal-metadata"),C=e("../internals/iterate"),x=e("../internals/an-instance"),k=e("../internals/is-callable"),j=e("../internals/is-object"),M=e("../internals/fails"),A=e("../internals/check-correctness-of-iteration"),T=e("../internals/set-to-string-tag"),D=e("../internals/inherit-if-required");t.exports=function(e,t,n){function r(e){var n=y(p[e]);w(p,e,"add"==e?function(e){return n(this,0===e?0:e),this}:"delete"==e?function(e){return!(u&&!j(e))&&n(this,0===e?0:e)}:"get"==e?function(e){return u&&!j(e)?void 0:n(this,0===e?0:e)}:"has"==e?function(e){return!(u&&!j(e))&&n(this,0===e?0:e)}:function(e,t){return n(this,0===e?0:e,t),this})}var i,a,s,o,l,c=-1!==e.indexOf("Map"),u=-1!==e.indexOf("Weak"),d=c?"set":"add",f=v[e],p=f&&f.prototype,h=f,g={};return b(e,!k(f)||!(u||p.forEach&&!M(function(){(new f).entries().next()})))?(h=n.getConstructor(t,e,c,d),S.enable()):b(e,!0)&&(a=(i=new h)[d](u?{}:-0,1)!=i,s=M(function(){i.has(1)}),o=A(function(e){new f(e)}),l=!u&&M(function(){for(var e=new f,t=5;t--;)e[d](t,t);return!e.has(-0)}),o||(((h=t(function(e,t){x(e,p);e=D(new f,e,h);return null!=t&&C(t,e[d],{that:e,AS_ENTRIES:c}),e})).prototype=p).constructor=h),(s||l)&&(r("delete"),r("has"),c&&r("get")),(l||a)&&r(d),u&&p.clear&&delete p.clear),g[e]=h,m({global:!0,forced:h!=f},g),T(h,e),u||n.setStrong(h,e,c),h}},{"../internals/an-instance":8,"../internals/check-correctness-of-iteration":31,"../internals/export":66,"../internals/fails":67,"../internals/function-uncurry-this":76,"../internals/global":82,"../internals/inherit-if-required":90,"../internals/internal-metadata":93,"../internals/is-callable":97,"../internals/is-forced":100,"../internals/is-object":102,"../internals/iterate":106,"../internals/redefine":150,"../internals/set-to-string-tag":161}],38:[function(e,t,n){var o=e("../internals/has-own-property"),l=e("../internals/own-keys"),c=e("../internals/object-get-own-property-descriptor"),u=e("../internals/object-define-property");t.exports=function(e,t){for(var n=l(t),r=u.f,i=c.f,a=0;a<n.length;a++){var s=n[a];o(e,s)||r(e,s,i(t,s))}}},{"../internals/has-own-property":83,"../internals/object-define-property":129,"../internals/object-get-own-property-descriptor":130,"../internals/own-keys":145}],39:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,"/./"[t](n)}catch(e){}}return!1}},{"../internals/well-known-symbol":197}],40:[function(e,t,n){e=e("../internals/fails");t.exports=!e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},{"../internals/fails":67}],41:[function(e,t,n){var r=e("../internals/function-uncurry-this"),a=e("../internals/require-object-coercible"),s=e("../internals/to-string"),o=/"/g,l=r("".replace);t.exports=function(e,t,n,r){var i=s(a(e)),e="<"+t;return""!==n&&(e+=" "+n+'="'+l(s(r),o,"&quot;")+'"'),e+">"+i+"</"+t+">"}},{"../internals/function-uncurry-this":76,"../internals/require-object-coercible":157,"../internals/to-string":187}],42:[function(e,t,n){"use strict";function i(){return this}var a=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),l=e("../internals/set-to-string-tag"),c=e("../internals/iterators");t.exports=function(e,t,n,r){t+=" Iterator";return e.prototype=s(a,{next:o(+!r,n)}),l(e,t,!1,!0),c[t]=i,e}},{"../internals/create-property-descriptor":44,"../internals/iterators":109,"../internals/iterators-core":108,"../internals/object-create":127,"../internals/set-to-string-tag":161}],43:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),a=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":44,"../internals/descriptors":50,"../internals/object-define-property":129}],44:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],45:[function(){}