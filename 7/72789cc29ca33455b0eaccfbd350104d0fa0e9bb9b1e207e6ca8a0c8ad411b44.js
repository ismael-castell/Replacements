(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[388],{3881:(e,t,n)=>{"use strict";n.d(t,{Z:()=>tt});var i={};n.r(i),n.d(i,{fixIOSFullscreen:()=>Y,forwardPostMessageEpic:()=>Q,fullscreenEpic:()=>te,gameBootEpic:()=>W,pubHostInitializedEpic:()=>J,receivePostMessageEpic:()=>N,setRecentGameEpic:()=>ee,switchWorldToEpic:()=>Z,updatePokiURLParams:()=>H,worldSwitchedToEpic:()=>G});var o={};n.r(o),n.d(o,{getPageDoneEpic:()=>ie});var r={};n.r(r),n.d(r,{voteEpic:()=>se,voteFeedbackGivenEpic:()=>le});var a={};n.r(a),n.d(a,{checkForSmartRefreshEpic:()=>Re,enableDumbRefreshEpic:()=>Te,enableRefreshEpic:()=>ke,hideAdsStatusEpic:()=>Ie,refreshAdsEpic:()=>Oe,resetRefreshNumbersEpic:()=>_e,setAdStatusEpic:()=>je,setAdTimingsEpic:()=>Be,showAdsStatusEpic:()=>qe,smartRefreshEpic:()=>Se,startImmersiveTakeoverEpic:()=>De,stopImmersiveTakeoverEpic:()=>Fe});var c={};n.r(c),n.d(c,{closeOnGetPageDoneEpic:()=>Ge,closeSearchIfOpenEpic:()=>Je,closeSearchOnLocationChange:()=>We,openSearchFetchCategories:()=>Ye,searchEpic:()=>Ne,searchOnLocationChangeEpic:()=>He,searchQueryEpic:()=>Ze,shortcutCloseEpic:()=>$e,shortcutOpenEpic:()=>Qe});var p={};n.r(p),n.d(p,{updateSessionEpic:()=>et});var s=n(7900),l=n(5299),u=n(4430),d=n(1212),h=n(7050),w=n(5631),v=n(8170),g=n(7027),m=n(4370),f=n(5760),y=n(6008),E=n(3068),b=n(5709),k=n(3783),_=n(6738),O=n(6381),T=n(3485),R=n(5602),S=n(1558),D=n(782),F=n(5982),j=n(8813),B=n(905),q=n(3748),I=n(4481),U=n(6151),A=n(7344),L=n(8855),x=n(8656),z=n(6619),C=n(9563),P=n(65),M=n(4927);const V=["localhost","games.poki.com","games.poki.co.id","game-cdn.poki.com"],K={CrossyMultiverseMessage_worldSwitchedTo:B.VN,pubHostInitialized:B.B5,[C.cO]:B.OB,[C.xE]:B.aw,[C.A$]:B.PP,SaveGameMigrator:!0};function N(e,t){return e.pipe((0,D.l)(B.y6.type),(0,y.h)((({event:e})=>{if(!e.data.type||!K[e.data.type])return!1;const t=(0,I._Y)(e.origin),n=V.includes(t)||t.endsWith(".poki-gdn.com"),i=document.querySelector('iframe[name="gameFrame"]'),o=i&&i.src.startsWith(e.origin);return n||o})),(0,E.b)((({event:{data:{content:e,type:t}}})=>{if(["pokiMessageEvent","pokiMessageDebug","SaveGameMigrator"].includes(t)&&((0,q.A)("sdk","message",{content:e,type:t}),window.parent!==window)){const n="production"===process.env.SERVICE_ENV;window.parent.postMessage({content:e,type:t},n?"devs.poki.io":"*")}})),(0,y.h)((({event:e})=>{var n,i;let o=null===(n=e.data.content)||void 0===n||null===(i=n.pokifordevs)||void 0===i?void 0:i.game_id;var r;o||(o=null===(r=e.data.content)||void 0===r?void 0:r.gameID);const a=(0,x.J1)(t.value);return!(!o||o!=="".concat(a.pokifordevs_game_id))})),(0,y.h)((({event:{data:{type:e}}})=>"function"==typeof K[e])),(0,b.U)((({event:{data:{content:e,type:t}}})=>K[t](e))))}function Z(e,t){return e.pipe((0,D.l)(B.Ot.type),(0,y.h)((()=>window.frames.gameFrame)),(0,k.j)("world"),(0,y.h)((e=>(0,L.Bs)(t.value)!==e)),(0,E.b)((e=>{window.frames.gameFrame.postMessage({type:"CrossyMultiverseMessage_switchWorldTo",content:{worldName:e}},"*")})),(0,b.U)((e=>(0,B.Bn)({world:e,gameId:(0,x.J1)(t.value).id}))))}function G(e,t){return e.pipe((0,D.l)(B.VN.type),(0,k.j)("worldName"),(0,y.h)((e=>(0,L.Bs)(t.value)!==e)),(0,b.U)((e=>(0,B.Bn)({world:e,gameId:(0,x.J1)(t.value).id}))))}function H(e){return e.pipe((0,D.l)(B.PP.type),(0,E.b)((e=>{const{params:t}=e;if(!t)return;const n=Object.keys(t),i=new URLSearchParams(window.location.search),o=[];i.forEach(((e,t)=>{t.startsWith("gd")&&o.push(t)})),o.forEach((e=>{i.delete(e)})),n.forEach((e=>{i.set("gd".concat(e),t[e])})),window.history.replaceState({},document.title,"".concat(window.location.pathname,"?").concat(i.toString()))})),(0,_.l)())}function W(e){return e.pipe((0,D.l)(B.Gq.type),(0,E.b)((()=>{(0,q.A)("game","boot"),(0,P.u)()})),(0,_.l)())}function J(e,t){return e.pipe((0,D.l)(B.B5.type),(0,O.w)((e=>{const n=(0,x.J1)(t.value);return n?((0,q.A)("pubHost","initialized",e),(0,v.of)((0,B.P8)({gameId:n.id,data:e}))):(0,w.c)()})))}function Q(){return window.removeEventListener("message",messageListener),(0,g.R)(window,"message").pipe((0,T.O)(...messageBuffer),(0,b.U)((e=>(0,B.y6)({event:e}))))}const $=()=>document.getElementById("game-container");function Y(e,t){return e.pipe((0,D.l)(B.Gq.type),(0,E.b)((()=>{const e=(0,U.eD)(t.value);if("undefined"==typeof navigator||"undefined"==typeof window)return;const n=document.getElementById("game-element");if(!e||!n)return;(0,P.u)();const i=()=>{window.scrollTo(0,0),n.style.width="".concat(window.innerWidth,"px"),n.style.height="".concat(window.innerHeight,"px")};window.addEventListener("resize",i),i(),setTimeout((()=>{i()}),3e3)})),(0,_.l)())}const X=async(e,t)=>{if(!(0,U.At)(t))try{e.requestFullscreen?await e.requestFullscreen({navigationUI:"hide"}):e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}catch(e){}const n=(0,x.J1)(t);if((0,U.eD)(t)&&n&&n.mobile_file&&n.mobile_file.orientation){const{orientation:e}=n.mobile_file;if(["portrait","landscape"].includes(e)&&window.screen)if(window.screen.orientation&&window.screen.orientation.lock)try{window.screen.orientation.lock(e)}catch(e){}else{const t=window.screen.lockOrientation||window.screen.mozLockOrientation||window.screen.msLockOrientation;t&&t(e)}}};function ee(e,t){return e.pipe((0,D.l)(j.HI.type),(0,O.w)((({data:e})=>{if("undefined"==typeof window)return(0,w.c)();if("game"!==(0,x.Wj)(t.value))return(0,w.c)();const n=(0,A.lH)(t.value),{id:i}=e.details;return(0,v.of)((0,j.FR)({id:i,siteID:n.id}))})))}function te(e,t){const n=e.pipe((0,D.l)(j.Qi.type),(0,y.h)((()=>window.matchMedia("(display-mode: standalone)").matches)),(0,R.h)((0,B.Zx)({toggle:!0}))),i=(0,m.T)((0,g.R)(window,"fullscreenchange"),(0,g.R)(window,"webkitfullscreenchange"),(0,g.R)(window,"mozfullscreenchange"),(0,g.R)(window,"MSFullscreenChange")).pipe((0,O.w)((()=>{const e=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].some((e=>document[e]));return(0,z.k)(),(0,L.Eo)(t.value)!==!!e?(0,U.eD)(t.value)&&!e?(0,w.c)():(0,v.of)((0,B.K1)({toggle:e})):(0,w.c)()}))),o=e.pipe((0,D.l)(B.Zx.type),(0,y.h)((({toggle:e})=>e)),(0,O.w)((()=>{const e=$();return e?(0,f.D)(X(e,t.value)).pipe((0,R.h)((0,B.K1)({toggle:!0}))):(0,w.c)()}))),r=e.pipe((0,D.l)(B.Zx.type),(0,y.h)((({toggle:e})=>!e)),(0,O.w)((()=>{const e=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].find((e=>!!document[e]));if(e)try{document[e]()}catch(e){}return(0,v.of)((0,B.K1)({toggle:!1}))}))),a="fullscreen",c=(0,m.T)(e.pipe((0,D.l)(B.K1.type),(0,E.b)((({toggle:e})=>{window.location.hash=e?a:""})),(0,_.l)()),e.pipe((0,D.l)(j.Qi.type,F.nk,M.ZB.type),(0,O.w)((()=>{const e=window.location.hash==="#".concat(a),n=(0,L.dW)(t.value),i=(0,U.eD)(t.value);return(0,L.Eo)(t.value)!==e&&(n||i)?(0,v.of)((0,B.Zx)({toggle:e})):(0,w.c)()})))),p=e.pipe((0,D.l)(B.Gq.type),(0,y.h)((({el:e})=>(0,U.eD)(t.value)&&e)),(0,O.w)((({el:e})=>(0,m.T)((0,g.R)($(),"click"),(0,g.R)(e,"click")).pipe((0,y.h)((()=>(0,U.eD)(t.value))),(0,E.b)((()=>{const e=$();X(e,t.value)})),(0,S.R)(r),(0,_.l)())))),s=e.pipe((0,D.l)(B.K1.type),(0,O.w)((({toggle:e})=>{const t=document.getElementById("app-root");return t.style.overflow=e?"hidden":"auto",t.style.height=e?"100vh":"auto",(0,w.c)()})));return(0,m.T)(o,n,r,i,c,p,s)}var ne=n(6343);function ie(e,t){return e.pipe((0,D.l)(M.o8.type),(0,E.b)((()=>{(0,z.k)(),(0,ne.Z)((0,x.$g)(t.value))})),(0,_.l)())}var oe=n(7746),re=n(4825),ae=n(8389),ce=n(5322),pe=n(6084);function se(e,t,{createApi:n}){return e.pipe((0,D.l)(ae.Ns.type),(0,oe.zg)((({gameId:e,direction:i,source:o})=>{const r=n(t.value,"vote");return(0,q.A)("rating",o,{method:"click",previousVote:(0,ce.bF)(t.value,e)}),r("/vote",{method:"POST",body:JSON.stringify({game_id:e,vote:i})}).pipe((0,_.l)())})))}function le(e,t,{createApi:n}){return e.pipe((0,D.l)(ae.CE.type),(0,re.p)(6e4),(0,oe.zg)((({game:e,voteDirection:i,message:o,adblock:r,wasFullscreen:a,gameResolution:c})=>{if(!o)return(0,w.c)();const p=n(t.value,"tracking"),s=(0,pe.d)(t.value),l=(0,L.R6)(t.value),u=(0,A.lH)(t.value),d=l.gameID===e.pokifordevs_game_id?l.gameVersion:void 0;return p("/playground-feedback",{method:"POST",body:JSON.stringify({p4d_game_id:e.pokifordevs_game_id,p4d_version_id:d,type:1===i?"thumbs_up":"thumbs_down",site_id:u.id,message:o,experiment:s,adblock:r,was_fullscreen:a,game_resolution:c})}).pipe((0,_.l)())})))}var ue=n(6564),de=n(5142),he=n(1690),we=n(6563),ve=n(1015),ge=n(1198),me=n(5022),fe=n(6449),ye=n(4862),Ee=n(9317);let be=Date.now();function ke(e,t){return e.pipe((0,D.l)(j.Qi.type,M.o8.type),(0,b.U)((()=>(0,x.Wj)(t.value))),(0,y.h)((e=>"game"===e||"preview"===e)),(0,R.h)((0,ye.oI)()))}function _e(e){return e.pipe((0,D.l)(M.o8.type),(0,R.h)((0,ye.qA)()))}function Oe(e,t){const n=e.pipe((0,D.l)(j.iJ.type));let i=Date.now();return e.pipe((0,D.l)(ye._g.type),(0,y.h)((()=>!(0,L.Eo)(t.value))),(0,he.j)((()=>(0,U.qh)(t.value)?(0,w.c)():n)),(0,y.h)((({refreshType:e})=>Date.now()-i>=1e4||"initial"===e)),(0,oe.zg)((({refreshType:e})=>{const n=(0,Ee.Yy)(t.value).map((({code:t})=>(0,ye.SB)({code:t,refreshType:e})));return i=Date.now(),(0,v.of)(...n)})))}function Te(e,t){const n=e.pipe((0,D.l)(M.o8.type)),i=e.pipe((0,D.l)(ye.xL.type)),o=(0,ue.F)(6e4).pipe((0,S.R)(n),(0,we.B)());return e.pipe((0,D.l)(ye.oI.type),(0,O.w)((()=>(0,m.T)(o.pipe((0,b.U)((()=>(0,Ee.Yy)(t.value))),(0,_.l)()),o.pipe((0,R.h)((0,ye._g)({trigger:"dumb",refreshType:"dumb"})),(0,S.R)(i))))))}function Re(e,t){return(0,de.aj)(e.pipe((0,D.l)(j.Qi.type),(0,ve.q)(1)),e.pipe((0,D.l)(B.aw.type))).pipe((0,b.U)((e=>e[1])),(0,E.b)((e=>{(0,q.A)("sdk","details",e)})),(0,k.j)("version"),(0,y.h)((e=>Number(e[0])>=2)),(0,y.h)((()=>{const e=(0,x.J1)(t.value);return e&&e.allow_smart_refresh})),(0,R.h)((0,ye.xL)()))}function Se(e){const t=e.pipe((0,D.l)(M.o8.type)),n=e.pipe((0,D.l)(B.OB.type),(0,k.j)("event"),(0,y.h)((e=>[C.$4,C.Fd,C.rV].includes(e))),(0,y.h)((()=>Date.now()-be>=3e4)),(0,b.U)((e=>(0,ye._g)({trigger:e,refreshType:"smart"}))),(0,E.b)((()=>{be=Date.now()})),(0,S.R)(t));return(0,m.T)(e.pipe((0,D.l)(ye.xL.type),(0,E.b)((()=>{be=Date.now()})),(0,ge.c)(n)),e.pipe((0,D.l)(ye.V6.type),(0,E.b)((()=>{be=Date.now()})),(0,_.l)()))}function De(e,t){return e.pipe((0,D.l)(B.OB.type),(0,y.h)((({event:e})=>e===C.T4)),(0,k.j)("data","creativeId"),(0,b.U)((e=>({creativeId:e,config:((0,x.Br)(t.value)||{})[e]}))),(0,y.h)((e=>!!e.config)),(0,b.U)((e=>(0,ye.WY)({takeover:e}))))}function Fe(e,t){const n=e.pipe((0,D.l)(ye._g.type)),i=e.pipe((0,D.l)(M.o8.type)),o=e.pipe((0,D.l)(B.OB.type),(0,y.h)((({event:e})=>e===C.$K))),r=o.pipe((0,ge.c)((0,v.of)(1).pipe((0,me.g)(5e3),(0,ge.c)(n),(0,S.R)(i)))),a=(0,Ee.VO)();return(0,m.T)(i.pipe((0,y.h)((()=>!!(0,Ee.xU)(t.value))),(0,R.h)((0,ye.V6)())),i.pipe((0,y.h)((()=>{const e=a(t.value,"desktop_gp_728x90_imvita");return e&&e.immersiveTakeover})),(0,R.h)((0,ye.ST)())),o.pipe((0,O.w)((()=>n.pipe((0,fe.T)(1),(0,R.h)((0,ye.V6)()))))),r.pipe((0,R.h)((0,ye.ST)())))}function je(e){return e.pipe((0,D.l)(B.OB.type),(0,y.h)((({event:e})=>[C.Zg,C.T4,C.$K].includes(e))),(0,b.U)((({event:e})=>(0,B.Iy)({event:e}))))}function Be(e){return e.pipe((0,D.l)(B.OB.type),(0,y.h)((({event:e})=>[C.T4,C.cV].includes(e))),(0,oe.zg)((e=>{const{data:t,event:n}=e;switch(n){case C.T4:return(0,v.of)((0,B.BZ)({duration:t.duration,currentTime:0}));case C.cV:return(0,v.of)((0,B.BZ)({duration:t.duration,currentTime:t.currentTime}));default:return(0,w.c)()}})))}function qe(e){return e.pipe((0,D.l)(B.OB.type),(0,y.h)((({event:e})=>[C.Fd,C.rV].includes(e))),(0,R.h)((0,B.rg)()))}function Ie(e){return e.pipe((0,D.l)(B.OB.type,M.o8.type),(0,y.h)((({event:e,type:t})=>[C.$K,C.Uo,C.jZ].includes(e)||t===M.o8.type)),(0,R.h)((0,B.oK)()))}var Ue=n(3283),Ae=n(486),Le=n(866),xe=n(51),ze=n(3251),Ce=n(5841),Pe=n(9761),Me=n(6924),Ve=n(9033),Ke=n(5456);function Ne(e,t){return e.pipe((0,D.l)(Ce.yC.type),(0,Ue.b)(275),(0,k.j)("query"),(0,y.h)((e=>e.length>1&&(0,Me.RG)(t.value))),(0,b.U)((e=>(0,Ce.w4)({query:e}))))}function Ze(e,t){const n=(0,A.lH)(t.value);return e.pipe((0,D.l)(Ce.w4.type),(0,k.j)("query"),(0,O.w)((e=>(0,Ve.ZP)("/search/query/".concat(n.id,"?q=").concat(encodeURIComponent(e))).pipe((0,b.U)((e=>(0,Ke.aR)(n,e.response))),(0,oe.zg)((e=>(0,v.of)((0,Ce.QV)({content:e})))),(0,Ae.K)((e=>(0,v.of)((0,Ce.bQ)({error:e}))))))))}function Ge(e){return e.pipe((0,D.l)(M.o8.type),(0,R.h)((0,Ce.rw)()))}function He(e,t){const n=(0,m.T)(e.pipe((0,D.l)(M.o8.type),(0,b.U)((()=>(0,Pe.MF)(t.value)))),e.pipe((0,D.l)(F.nk),(0,y.h)((()=>!(0,U.KT)(t.value))),(0,k.j)("payload","state"),(0,y.h)((e=>e&&e.search)),(0,k.j)("search"))),i=e.pipe((0,D.l)(j.Qi.type),(0,ve.q)(1)),o=n.pipe((0,Le.f)(i),(0,oe.zg)((