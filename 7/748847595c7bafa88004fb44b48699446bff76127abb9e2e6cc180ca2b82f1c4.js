var NotificationsSDK=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/packs/",n(n.s=45)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(16)("wks"),i=n(12),o=n(0).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(5),i=n(15);t.exports=n(3)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2),i=n(34),o=n(25),s=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e,n){var r=n(51),i=n(19);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(0),i=n(14),o=n(4),s=n(11),a=n(35),u=function(t,e,n){var c,l,f,h,p=t&u.F,d=t&u.G,y=t&u.S,v=t&u.P,m=t&u.B,g=d?r:y?r[e]||(r[e]={}):(r[e]||{}).prototype,b=d?i:i[e]||(i[e]={}),w=b.prototype||(b.prototype={});for(c in d&&(n=e),n)f=((l=!p&&g&&void 0!==g[c])?g:n)[c],h=m&&l?a(f,r):v&&"function"==typeof f?a(Function.call,f):f,g&&s(g,c,f,t&u.U),b[c]!=f&&o(b,c,h),v&&w[c]!=f&&(w[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(0),i=n(4),o=n(6),s=n(12)("src"),a=n(47),u=(""+a).split("toString");n(14).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,s)||i(n,s,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(14),i=n(0),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(17)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,n){var r=n(38),i=n(28);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(21),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(62),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(63);var r=n(11),i=n(4),o=n(7),s=n(19),a=n(1),u=n(32),c=a("species"),l=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var h=a(t),p=!o(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)}),d=p?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[h](""),!e}):void 0;if(!p||!d||"replace"===t&&!l||"split"===t&&!f){var y=/./[h],v=n(s,h,""[t],function(t,e,n,r,i){return e.exec===u?p&&!i?{done:!0,value:y.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),m=v[0],g=v[1];r(String.prototype,t,m),i(RegExp.prototype,h,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},function(t,e,n){var r=n(8),i=n(0).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(5).f,i=n(6),o=n(1)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(16)("keys"),i=n(12);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(19);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(61)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){"use strict";var r,i,o=n(43),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,c=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(t){var e,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=s.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),l&&r&&r.length>1&&a.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=u},function(t,e){t.exports={}},function(t,e,n){t.exports=!n(3)&&!n(7)(function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(36);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){e.f=n(1)},function(t,e,n){var r=n(6),i=n(9),o=n(52)(!1),s=n(27)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(2),i=n(55),o=n(28),s=n(27)("IE_PROTO"),a=function(){},u=function(){var t,e=n(24)("iframe"),r=o.length;for(e.style.display="none",n(41).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(38),i=n(28).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(46),n(58),n(59),n(60),n(64),n(65),n(68),n(70),n(72),n(75),n(82),n(83);var r=n(84),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.status="loading",this.settings=e,this.element=this.settings.element,this.entityType=this.element.attributes["data-follow-type"].value,this.buttonStatus=this.element.attributes["data-follow-status"];var n=this.element.attributes["data-follow-id"];this.entityId=void 0!==n?n.value:null;var r=this.element.attributes["data-follow-slug"];this.entitySlug=void 0!==r?r.value:null,"undefined"!==typeof this.buttonStatus&&"loaded"===this.buttonStatus.value||(this.element.addEventListener("click",this.clickHandler.bind(this)),this.mouseOverHandler=this.showUnfollowLabel.bind(this),this.mouseOutHandler=this.hideUnfollowLabel.bind(this),this.trackingSource=this.findTrackingSource(),this.labels={following:this.element.attributes["data-following-label"]?this.element.attributes["data-following-label"].value:I18n?I18n.t("jslibrary.following"):"Following",follow:this.element.attributes["data-follow-label"]?this.element.attributes["data-follow-label"].value:I18n?I18n.t("jslibrary.follow"):"Follow",unfollow:this.element.attributes["data-unfollow-label"]?this.element.attributes["data-unfollow-label"].value:I18n?I18n.t("jslibrary.unfollow"):"Unfollow"},this.updateButton())}return i(t,[{key:"clickHandler",value:function(t){if(!this.disabled){if(this.trackingSource&&window.adInsights.e("napi-follow-button","click","source",this.trackingSource),!AD.isLoggedIn)return this.trackingSource&&(AD.set_signup_src=this.trackingSource),void AD.openWelcome();switch(this.previousStatus=this.status,this.status){case"is-following":this.removeFollow();break;case"not-following":this.addFollow()}}}},{key:"removeFollow",value:function(){var t=this;this.disable(),this.settings.sdk.removeFollower(this.entityId,this.entityType,this.entitySlug).then(function(e){t.trackingSource&&window.adInsights.e("follow-button","delete","source",t.trackingSource),t.status="not-following",delete t.followObject}).catch(function(e){t.status="error"}).finally(function(){t.updateButton()})}},{key:"addFollow",value:function(){var t=this;this.disable(),this.settings.sdk.addFollower(this.entityId,this.entityType,this.entitySlug).then(function(e){t.trackingSource&&window.adInsights.e("follow-button","create","source",t.trackingSource),t.status="is-following",t.followObject=e}).catch(function(e){t.status="error"}).finally(function(){t.updateButton()})}},{key:"disable",value:function(){this.element.className+=" afd-btn--not-allowed",this.element.attributes.disabled=!0,this.element.dataset.followStatus="disabled",this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1;var t=this.element.className;this.element.className=t.replace(/\s?afd-btn--not-allowed/g,""),this.element.attributes.disabled=!1,this.element.dataset.followStatus="loaded"}},{key:"updateButton",value:function(){switch(this.status){case"is-following":this.switchToFollowing();break;case"not-following":this.switchToNotFollowing();break;case"error":this.switchToError();break;case"loading":default:this.switchToLoading()}}},{key:"switchToLoading",value:function(){var t=this;this.disable(),this.element.innerHTML="&bull;&bull;&bull;",this.element.className=this.element.className.replace(/\s?afd-btn--outline/g,""),this.settings.sdk.getFollower(this.entityId,this.entityType,this.entitySlug).then(function(e){t.status="is-following",t.followObject=e}).catch(function(e){t.status="not-following"}).finally(function(){t.updateButton()})}},{key:"switchToError",value:function(){this.element.removeEventListener("mouseenter",this.mouseOverHandler),this.element.removeEventListener("mouseleave",this.mouseOutHandler);this.element.innerHTML="Error",this.element.className=this.element.className+=" afd-btn--error",this.element.dataset.followStatus="error",setTimeout(function(){this.element.className=this.element.className.replace(" afd-btn--error",""),this.status=this.previousStatus,this.updateButton()}.bind(this),2e3)}},{key:"switchToFollowing",value:function(){this.element.innerHTML=this.labels.following,this.element.className+=" afd-btn--outline",this.element.dataset.followStatus="loaded",this.element.addEventListener("mouseenter",this.mouseOverHandler),this.element.addEventListener("mouseleave",this.mouseOutHandler),this.enable()}},{key:"switchToNotFollowing",value:function(){this.element.removeEventListener("mouseenter",this.mouseOverHandler),this.element.removeEventListener("mouseleave",this.mouseOutHandler),this.element.dataset.followStatus="loaded",this.element.className=this.element.className.replace(/\s?afd-btn--outline/g,""),this.element.innerHTML=this.labels.follow,this.enable()}},{key:"showUnfollowLabel",value:function(){this.element.innerHTML=this.labels.unfollow}},{key:"hideUnfollowLabel",value:function(){this.element.innerHTML=this.labels.following}},{key:"findTrackingSource",value:function(){for(var t=this.element;t.parentNode;)if((t=t.parentNode).attributes&&t.attributes["data-tracking-source"])return t.attributes["data-tracking-source"].value;return!1}}]),t}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"collectEntityLinks",value:function(){var t=this;return Object.keys(this.entities).forEach(function(e){var n=t.entities[e].schema,r=t.entities[e].presenter;document.querySelectorAll('a[href*="'+n+'"]:not(.afd-entity):not(.afd-nav__link):not(.afd-flyout__subcategories__sublink):not(.afd-flyout__subcategories__title):not(.afd-nav-mobile__label):not(.afd-flyout__list-main__link)').forEach(function(n){t.links.push({element:n,type:e,presenter:r})})}),this}},{key:"renderEntities",value:function(){var t=this;if(!this.sdk)throw new Error("EntityHint.renderEntities(): No SDK has been defined");return this.links.forEach(function(e){e.entity=new e.presenter(e.element,t.sdk)}),this}},{key:"registerEntities",value:function(t){var e=this;return Object.keys(t).forEach(function(n){e.registerEntity(n,t[n])}),this}},{key:"registerEntity",value:function(t,e){var n=e.schema,r=e.presenter;return this.entities[t]={schema:n,presenter:r},this}},{key:"useSDK",value:function(t){return this.sdk=t,this}}]),t}();Object.defineProperty(a,"entities",{enumerable:!0,writable:!0,value:{}}),Object.defineProperty(a,"links",{enumerable:!0,writable:!0,value:[]});var u=a,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.trigger=e,this.body=n,this.onEnterPopover=this.onEnterPopover.bind(this),this.onEnterLink=this.onEnterLink.bind(this),this.onLeave=this.onMouseLeave.bind(this),this.onVisit=this.onTurbolinksVisit.bind(this),this.show=this.onEnterLink,this.timeout,this.render().bind()}return c(t,[{key:"render",value:function(){var t=document.createElement("div");return t.appendChild(this.body),t.className="afd-popover",this.element=t,this}},{key:"bind",value:function(){return this.trigger.addEventListener?(this.trigger.addEventListener("mouseleave",this.onLeave),this.trigger.addEventListener("mouseenter",this.onEnterLink),this.element.addEventListener("mouseenter",this.onEnterPopover),this.element.addEventListener("mouseleave",this.onLeave),document.addEventListener("turbolinks:visit",this.onVisit)):(this.trigger.attachEvent("onmouseleave",this.onLeave),this.trigger.attachEvent("onmouseenter",this.onEnterLink),this.element.attachEvent("onmouseenter",this.onEnterPopover),this.element.attachEvent("onmouseleave",this.onLeave),document.attachEvent("turbolinks:visit",this.onVisit)),this}},{key:"unbind",value:function(){return this.trigger.removeEventListener?(this.trigger.removeEventListener("mouseleave",this.onLeave),this.trigger.removeEventListener("mouseenter",this.onEnter),this.element.removeEventListener("mouseenter",this.onEnterPopover),this.element.removeEventListener("mouseleave",this.onLeave)):(this.trigger.detachEvent("onmouseleave",this.onLeave),this.trigger.detachEvent("onmouseenter",this.onEnter),this.element.detachEvent("onmouseenter",this.onEnterPopover),this.element.detachEvent("onmouseleave",this.onLeave)),this}},{key:"onTurbolinksVisit",value:function(){document.body.removeChild(this.element)}},{key:"onEnterLink",value:function(){clearTimeout(this.timeout);var t=this.trigger.getBoundingClientRect().width,e=this.trigger.getBoundingClientRect().top+window.scrollY,n=this.trigger.getBoundingClientRect().left+window.scrollX+t/2;this.element.style.top=e+"px",this.element.style.left=n+"px",this.element.style.transform="translate(-50%, calc((100% + 10px) * -1)",this.element.style.position="absolute",this.element.style.display="block",document.body.appendChild(this.element)}},{key:"onEnterPopover",value:function(){clearTimeout(this.timeout)}},{key:"onMouseLeave",value:function(){this.timeout=setTimeout(function(){document.body.removeChild(this.element)}.bind(this),150)}}]),t}(),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var h=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.sdk=n,this.type=r,this.requestDelay,this.boot()}return f(t,[{key:"boot",value:function(){this.element.addEventListener?(this.element.addEventListener("mouseenter",this.onMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onMouseLeave.bind(this))):(this.element.attachEvent("onmouseenter",this.onMouseEnter.bind(this)),this.element.attachEvent("onmouseleave",this.onMouseLeave.bind(this)))}},{key:"showHint",value:function(){this.hint.show()}},{key:"startEntity",value:function(){var t=this;this.rendered?this.showHint():this.loadProfile().then(function(e){t.setProfile(e).render().showHint()})}},{key:"onMouseEnter",value:function(){var t=this.startEntity.bind(this);this.requestDelay=setTimeout(t,100)}},{key:"onMouseLeave",value:function(){clearTimeout(this.requestDelay)}},{key:"setProfile",value:function(t){return this.profile=t,this}},{key:"getProfile",value:function(){return this.profile}},{key:"render",value:function(){if(this.profile&&this.profile.name){var t=this.profile,e=(t.name,t.image,this.getPreview());return this.renderHint(e),this.rendered=!0,this}}},{key:"isImageURL",value:function(t){return/^https?:\/\/.*\.(?:jpg|png|jpeg|gif)$/i.test(t)}},{key:"renderLink",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"avatar",r=this.element,i=document.createElement("span");document.createElement("div");if(r.innerHTML="",r.className+=" afd-entity__link",i.className+=" afd-entity__name",i.textContent=t,this.isImageURL(e)){var o=document.createElement("span");o.className+=" afd-entity__"+n,o.style.backgroundImage="url("+e+")"}return r.appendChild(i),this}},{key:"renderHint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object.keys(t).length)return this;var e=document.createElement("div"),n=document.createElement("button");if(t.entityName){var r=document.createElement("h3");r.innerText=t.entityName,r.className="popover__title",e.appendChild(r)}if(t.entityDescription){var i=document.createElement("h4");i.innerText=t.entityDescription,i.className="popover__description",e.appendChild(i)}if(t.previewLabel){var s=document.createElement("p");s.innerText=t.previewLabel,s.className="popover__label",e.appendChild(s)}return t.body&&e.appendChild(t.body),n.setAttribute("data-follow-type",this.type),n.setAttribute("data-follow-id",this.data.original_id),n.className="afd-btn afd-btn--full afd-btn--small popover__action",n.followButton=new o({element:n,sdk:this.sdk}),e.appendChild(n),this.hint=new l(this.element,e),this}}]),t}(),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),["photographer"])))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h),p(e,[{key:"getSlug",value:function(){return this.element.getAttribute("href").match(/\/photographer\/([0-9a-z-]+)/)[1]}},{key:"loadProfile",value:function(){var t=this;return this.sdk.getEntity("photographer",this.getSlug()).then(function(e){return t.data=e})}},{key:"getPreview",value:function(){var t=this.getProfile();return{entityName:t.name,entityDescription:t.description}}}]),e}(),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var v=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),["author"])))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h),y(e,[{key:"getSlug",value:function(){return this.element.getAttribute("href").match(/\/author\/([0-9a-z-]+)/)[1]}},{key:"loadProfile",value:function(){var t=this;return this.sdk.getEntity("author",this.getSlug()).then(function(e){return t.data=e})}},{key:"getPreview",value:function(){var t=this.data;return{entityName:t.name,entityDescription:t.description}}}]),e}(),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var g=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),["office"])))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h),m(e,[{key:"getSlug",value:function(){return this.element.getAttribute("href").match(/\/office\/([0-9a-z-]+)/)[1]}},{key:"loadProfile",value:function(){var t=this;return this.sdk.getEntity("office",this.getSlug()).then(function(e){return t.data=e})}},{key:"getPreview",value:function(){var t=this.data;return{entityName:t.name,entityDescription:t.description}}}]),e}(),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),["company"])))}(function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,h),b(e,[{key:"getSlug",value:function(){return this.element.getAttribute("href").match(/\/companies\/[0-9]+\/([0-9a-z-]+)/)[1]}},{key:"loadProfile",value:function(){var t=this;return this.sdk.getEntity("company",this.getSlug()).then(function(e){return t.data=e})}},{key:"getPreview",value:function(){var t=this.data,e=t.name;t.description;return{entityName:e,entityDescription:null}}}])}();var w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var _=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),["user"])))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h),w(e,[{key:"getSlug",value:function(){return this.element.getAttribute("href").match(/\/@([0-9a-z-]+)/)[1]}},{key:"loadProfile",value:function(){return this.sdk.getEntity("user",this.getSlug())}},{key:"getPreview",value:function(){var t=this.data;return{entityName:t.name,entityDescription:t.description}}}]),e}(),E=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var k=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),["category"])))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h),E(e,[{key:"getSlug",value:function(){return this.element.getAttribute("href").match(/\/category\/([0-9a-z-]+)/)[1]}},{key:"loadProfile",value:function(){var t=this;return this.sdk.getEntity("category",this.getSlug()).then(function(e){return t.data=e})}},{key:"getPreview",value:function(){var t=this.data;return{entityName:t.name,entityDescription:t.description}}}]),e}(),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={entityType:e},n.data&&this.populate(n.data),this.elementClass="afd-suggestion",!0===n.mobile&&(this.elementClass="afd-suggestion afd-mobile-e"),this.createMarkup().render(),n.sdk&&(this.sdk=n.sdk),this}return x(t,[{key:"createMarkup",value:function(){return this.element=document.createElement("div"),this.photo=document.createElement("a"),this.name=document.createElement("a"),this.description=document.createElement("h4"),this.action=document.createElement("a"),this.element.className=this.elementClass,this.photo.className="afd-suggestion__photo afd-entity loading-animation",this.name.className="afd-suggestion__name afd-title-widget afd-entity loading-animation",this.description.className="afd-suggestion__description loading-animation",this.action.className="afd-suggestion__action afd-btn afd-btn--full loading-animation",this.name.innerHTML="&nbsp;",this.description.innerHTML="&nbsp;",this.action.innerHTML="&nbsp;",this.element.appendChild(this.photo),this.element.appendChild(this.name),this.element.appendChild(this.description),this.element.appendChild(this.action),this}},{key:"render",value:function(){if(this.isReady()){this.element.className=this.element.className.replace(/\s?afd-suggestion--loading?/g,"");var t=this.getUrl();this.name.innerText=this.data.name,this.name.href=t,this.description.innerText=this.data.description,this.data.photo?(this.photo.style.backgroundImage="url('"+this.data.photo+"')",this.photo.className+=["author","user","photographer","office"].includes(this.data.entityType)?" afd-suggestion__avatar afd-entity":" afd-suggestion__logo afd-entity"):this.photo.className+=" afd-suggestion__photo--empty",this.photo.className=this.photo.className.replace(" loading-animation",""),this.name.className=this.name.className.replace(" loading-animation",""),this.description.className=this.description.className.replace(" loading-animation",""),this.action.className=this.action.className.replace(" loading-animation",""),this.photo.alt=this.data.name,this.photo.href=t,this.action.setAttribute("data-follow-type",this.data.entityType),this.action.setAttribute("data-follow-id",this.data.entityId),this.action.followButton=new o({element:this.action,sdk:this.sdk})}else this.element.className+=" afd-suggestion--loading";return this}},{key:"populate",value:function(t){return this.data.name=t.name||this.data.name||void 0,this.data.description=I18n.t("jslibrary.entities."+this.data.entityType),this.data.entityType=t.category||this.data.entityType||void 0,this.data.entityId=t.original_id||this.data.entityId||void 0,this.data.entitySlug=t.slug||this.data.entitySlug||void 0,this.isValidUrl(t.photo)?this.data.photo=t.photo:this.data.photo=!1,this}},{key:"isValidUrl",value:function(t){return/^https?:\/\//.test(t)}},{key:"update",value:function(t){return this.populate(t).render(),this}},{key:"getUrl",value:function(){var t=AD,e=t.domain,n=t.site;switch(this.data.entityType){case"photographer":return"https://www"+e+"/photographer/"+this.data.entitySlug+"/";case"author":return"https://www"+e+"/author/"+this.data.entitySlug+"/";case"user":return"https://my"+e+"/author/"+this.data.entitySlug+"/";case"office":return"https://www"+e+"/office/"+this.data.entitySlug+"/";case"category":return"https://www"+e+"/category/"+this.data.entitySlug+"/";case"company":return"https://www"+e+"/catalog/"+n+"/companies/"+this.data.entityId+"/"}}},{key:"isReady",value:function(){}