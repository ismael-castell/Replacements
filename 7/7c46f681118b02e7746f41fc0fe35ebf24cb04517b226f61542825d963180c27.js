/*! For license information please see bundle.en-GB.js.LICENSE.txt */
(function(){var __webpack_modules__={362:function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t="function"==typeof Symbol&&"symbol"==e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},o=function(e){function t(e,t){var o,r,n,i,a;return n=2147483648&e,i=2147483648&t,a=(1073741823&e)+(1073741823&t),(o=1073741824&e)&(r=1073741824&t)?2147483648^a^n^i:o|r?1073741824&a?3221225472^a^n^i:1073741824^a^n^i:a^n^i}function o(e,o,r,n,i,a,s){return t((e=t(e,t(t(o&r|~o&n,i),s)))<<a|e>>>32-a,o)}function r(e,o,r,n,i,a,s){return t((e=t(e,t(t(o&n|r&~n,i),s)))<<a|e>>>32-a,o)}function n(e,o,r,n,i,a,s){return t((e=t(e,t(t(o^r^n,i),s)))<<a|e>>>32-a,o)}function i(e,o,r,n,i,a,s){return t((e=t(e,t(t(r^(o|~n),i),s)))<<a|e>>>32-a,o)}function(){}var s,d,u,l,g,c,p,h,m;for(s=function(){}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var r=e.charCodeAt(o);128>r?t+=String.fromCharCode(r):(127<r&&2048>r?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e)),c=1732584193,p=4023233417,h=2562383102,m=271733878,e=0;e<s.length;e+=16)d=c,u=p,l=h,g=m,p=i(p=i(p=i(p=i(p=n(p=n(p=n(p=n(p=r(p=r(p=r(p=r(p=o(p=o(p=o(p=o(p,h=o(h,m=o(m,c=o(c,p,h,m,s[e+0],7,3614090360),p,h,s[e+1],12,3905402710),c,p,s[e+2],17,606105819),m,c,s[e+3],22,3250441966),h=o(h,m=o(m,c=o(c,p,h,m,s[e+4],7,4118548399),p,h,s[e+5],12,1200080426),c,p,s[e+6],17,2821735955),m,c,s[e+7],22,4249261313),h=o(h,m=o(m,c=o(c,p,h,m,s[e+8],7,1770035416),p,h,s[e+9],12,2336552879),c,p,s[e+10],17,4294925233),m,c,s[e+11],22,2304563134),h=o(h,m=o(m,c=o(c,p,h,m,s[e+12],7,1804603682),p,h,s[e+13],12,4254626195),c,p,s[e+14],17,2792965006),m,c,s[e+15],22,1236535329),h=r(h,m=r(m,c=r(c,p,h,m,s[e+1],5,4129170786),p,h,s[e+6],9,3225465664),c,p,s[e+11],14,643717713),m,c,s[e+0],20,3921069994),h=r(h,m=r(m,c=r(c,p,h,m,s[e+5],5,3593408605),p,h,s[e+10],9,38016083),c,p,s[e+15],14,3634488961),m,c,s[e+4],20,3889429448),h=r(h,m=r(m,c=r(c,p,h,m,s[e+9],5,568446438),p,h,s[e+14],9,3275163606),c,p,s[e+3],14,4107603335),m,c,s[e+8],20,1163531501),h=r(h,m=r(m,c=r(c,p,h,m,s[e+13],5,2850285829),p,h,s[e+2],9,4243563512),c,p,s[e+7],14,1735328473),m,c,s[e+12],20,2368359562),h=n(h,m=n(m,c=n(c,p,h,m,s[e+5],4,4294588738),p,h,s[e+8],11,2272392833),c,p,s[e+11],16,1839030562),m,c,s[e+14],23,4259657740),h=n(h,m=n(m,c=n(c,p,h,m,s[e+1],4,2763975236),p,h,s[e+4],11,1272893353),c,p,s[e+7],16,4139469664),m,c,s[e+10],23,3200236656),h=n(h,m=n(m,c=n(c,p,h,m,s[e+13],4,681279174),p,h,s[e+0],11,3936430074),c,p,s[e+3],16,3572445317),m,c,s[e+6],23,76029189),h=n(h,m=n(m,c=n(c,p,h,m,s[e+9],4,3654602809),p,h,s[e+12],11,3873151461),c,p,s[e+15],16,530742520),m,c,s[e+2],23,3299628645),h=i(h,m=i(m,c=i(c,p,h,m,s[e+0],6,4096336452),p,h,s[e+7],10,1126891415),c,p,s[e+14],15,2878612391),m,c,s[e+5],21,4237533241),h=i(h,m=i(m,c=i(c,p,h,m,s[e+12],6,1700485571),p,h,s[e+3],10,2399980690),c,p,s[e+10],15,4293915773),m,c,s[e+1],21,2240044497),h=i(h,m=i(m,c=i(c,p,h,m,s[e+8],6,1873313359),p,h,s[e+15],10,4264355552),c,p,s[e+6],15,2734768916),m,c,s[e+13],21,1309151649),h=i(h,m=i(m,c=i(c,p,h,m,s[e+4],6,4149444226),p,h,s[e+11],10,3174756917),c,p,s[e+2],15,718787259),m,c,s[e+9],21,3951481745),c=t(c,d),p=t(p,u),h=t(h,l),m=t(m,g);return(a(c)+a(p)+a(h)+a(m)).toLowerCase()},r=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},n=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t},i=function(e){var t=e.getExtension("WEBGL_lose_context");null!=t&&t.loseContext()},a=function(e,t){if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t);else if(e.length===+e.length)for(var o=0,r=e.length;o<r;o++)t(e[o],o,e);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)},s=function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"};if(!(e=n()))return null;var o=[],r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);var s=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),r.itemSize=3,r.numItems=3;var d=e.createProgram(),u=e.createShader(e.VERTEX_SHADER);e.shaderSource(u,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),e.compileShader(u);var l=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(l,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),e.compileShader(l),e.attachShader(d,u),e.attachShader(d,l),e.linkProgram(d),e.useProgram(d),d.vertexPosAttrib=e.getAttribLocation(d,"attrVertex"),d.offsetUniform=e.getUniformLocation(d,"uniformOffset"),e.enableVertexAttribArray(d.vertexPosArray),e.vertexAttribPointer(d.vertexPosAttrib,r.itemSize,e.FLOAT,!1,0,0),e.uniform2f(d.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,r.numItems);try{o.push(e.canvas.toDataURL())}catch(e){}o.push("extensions:"+(e.getSupportedExtensions()||[]).join(";")),o.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),o.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),o.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),o.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),o.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),o.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),o.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),o.push("webgl max anisotropy:"+function(e){var t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");if(t){var o=e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===o&&(o=2),o}return null}(e)),o.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),o.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),o.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),o.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),o.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),o.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),o.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),o.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),o.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),o.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),o.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),o.push("webgl red bits:"+e.getParameter(e.RED_BITS)),o.push("webgl renderer:"+e.getParameter(e.RENDERER)),o.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),o.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),o.push("webgl vendor:"+e.getParameter(e.VENDOR)),o.push("webgl version:"+e.getParameter(e.VERSION));try{var g=e.getExtension("WEBGL_debug_renderer_info");g&&(o.push("webgl unmasked vendor:"+e.getParameter(g.UNMASKED_VENDOR_WEBGL)),o.push("webgl unmasked renderer:"+e.getParameter(g.UNMASKED_RENDERER_WEBGL)))}catch(e){}return e.getShaderPrecisionFormat?(a(["FLOAT","INT"],(function(t){a(["VERTEX","FRAGMENT"],(function(r){a(["HIGH","MEDIUM","LOW"],(function(n){a(["precision","rangeMin","rangeMax"],(function(i){var a=e.getShaderPrecisionFormat(e[r+"_SHADER"],e[n+"_"+t])[i];"precision"!==i&&(i="precision "+i);var s=["webgl ",r.toLowerCase()," shader ",n.toLowerCase()," ",t.toLowerCase()," ",i,":",a].join("");o.push(s)}))}))}))})),i(e),o):(i(e),o)},d=function(e){if(navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return e("EXCLUDED");var t=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==t)return e("not_supported");var o=new t(1,44100,44100),r=o.createOscillator();r.type="triangle",r.frequency.setValueAtTime(1e4,o.currentTime);var n=o.createDynamicsCompressor();a([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(e){void 0!==n[e[0]]&&"function"==typeof n[e[0]].setValueAtTime&&n[e[0]].setValueAtTime(e[1],o.currentTime)})),r.connect(n),n.connect(o.destination),r.start(0),o.startRendering();var i=setTimeout((function(){return o.oncomplete=function(){},o=null,e("audioTimeout")}),1e3);o.oncomplete=function(t){var o;try{clearTimeout(i),o=t.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(e,t){return e+Math.abs(t)}),0).toString(),r.disconnect(),n.disconnect()}catch(t){return void e(t)}e(o)}},u=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},l="",g="",c="",p=window;window.dvEdgeRapahel_GetiOSTokenFromWKWebView=function(e){p.NToken=e},window.dvEdgeRapahel_GetiOSCacheDataFromWKWebView=function(e,t){},window.dvEdgeRapahel_GetiOSLocalDataFromWKWebView=function(e,t){},window.raphael=function(){var e=function(e){return null!=e&&""!==e},a={accessKey:"",env:"",err_msg:"",MSG_SUCCESS:"success",MSG_PARA_ERR:"para_err",MSG_EMPTY:"empty",MSG_DEFAULT:"default",dvid:"",dvtoken:"",MSG_NO_PERMISSON:"no_permission",MSG_EXCEPTION:"exception",MSG_NOT_SUPPORT:"not_supported",MSG_CONNECTION_FAILED:"connection_failed",SENSOR_COUNTS:20,platform:"",storageTest:function(e){if(!e)return!1;try{return e.setItem("key","value"),e.removeItem("key"),!0}catch(e){return!1}},setAccessKey:function(e){return e?"string"==typeof e?(this.accessKey=e,this.MSG_SUCCESS):(this.accessKey=this.MSG_EMPTY,this.MSG_EMPTY):this.MSG_PARA_ERR},getAccessKey:function(){return this.accessKey},setEnv:function(e){return e?"string"==typeof e?(this.env=e,this.MSG_SUCCESS):(this.env=this.MSG_EMPTY,this.MSG_EMPTY):this.MSG_PARA_ERR},getEnv:function(){if(""!==this.env&&this.env!==this.MSG_EMPTY)return this.env;try{a.dvid=a.MSG_DEFAULT,localStorage.removeItem("DVID")}catch(e){a.dvid=a.MSG_DEFAULT}return this.MSG_EMPTY},getDVToken:function(){var t="";try{t=localStorage.getItem("DVToken")}catch(e){t=g}return e(t)?t:this.MSG_EMPTY},getDVUUID:function(){var t="";try{localStorage.getItem("DVUUID")?c=localStorage.getItem("DVUUID"):(c=u(),localStorage.setItem("DVUUID",c)),t=c}catch(e){t=c||u()}return e(t)?t:this.MSG_EMPTY},getDVID:function(){var t="";try{t=localStorage.getItem("DVID")}catch(e){t=l}return e(t)?t:this.MSG_EMPTY},getSDKVersion:function(){return"V2.0"},getUAofBrowser:function(){return e(navigator)?{name:navigator.appName,version:navigator.appVersion,code:navigator.appCodeName,Agent:navigator.userAgent}:this.MSG_NOT_SUPPORT},getPlugins:function(){if(e(navigator)){var t=navigator.plugins;if(t){for(var o=[],r=0,n=t.length;r<n;r++){var i={name:t[r].name,filename:t[r].filename,description:t[r].description,version:t[r].version?t[r].version:""};o.push(i)}return o}return this.MSG_NOT_SUPPORT}return this.MSG_NOT_SUPPORT},getLocationUrl:function(){return window.location.href},getReferrer:function(){return document.referrer},getScreenWidth:function(){return window.screen.width},getScreenHeight:function(){return window.screen.height},getColorDepth:function(){return window.screen.colorDepth},getStatusOfConnection:function(){return e(navigator)&&e(navigator.onLine)?!!navigator.onLine:this.MSG_NOT_SUPPORT},getLanguage:function(){return e(navigator)&&e(navigator.language)?navigator.language:this.MSG_NOT_SUPPORT},getLanguages:function(){return e(navigator)&&e(navigator.languages)?navigator.languages:this.MSG_NOT_SUPPORT},getPlatform:function(){return e(navigator)&&e(navigator.platform)?navigator.platform.toLowerCase():this.MSG_NOT_SUPPORT},getTimezone:function(){return(new Date).getTimezoneOffset()/60},getLocalTime:function(){return(new Date).getTime()},getFlashInfo:function(){var e,t=0,o=0;return document.all?(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(t=1,o=e.GetVariable("$version")):navigator.plugins&&navigator.plugins.length>0&&(e=navigator.plugins["Shockwave Flash"])&&(t=1,o=e.description),{hasFlash:t,version:o}},getCookies:function(){var e=!1;if(navigator.cookiesEnabled)return!0;document.cookie="dvTest=yes;",document.cookie.indexOf("dvTest=yes")>-1&&(e=!0);var t=new Date;return t.setTime(t.getTime()-6e4),document.cookie="dvTest=yes;expires="+t.toUTCString(),document.cookie=";expires="+t.toUTCString(),e},getCanvasFP:function(){try{if(r()){var e=[],t=document.createElement("canvas");t.width=2e3,t.height=200,t.style.display="inline";var n=t.getContext("2d");return n.rect(0,0,10,10),n.rect(2,2,6,6),e.push("canvas winding:"+(!1===n.isPointInPath(5,5,"evenodd")?"yes":"no")),n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.font="11pt no-real-font-123",n.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),n.fillStyle="rgba(102, 204, 0, 0.2)",n.font="18pt Arial",n.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),n.globalCompositeOperation="multiply",n.fillStyle="rgb(255,0,255)",n.beginPath(),n.arc(50,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(0,255,255)",n.beginPath(),n.arc(100,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,255,0)",n.beginPath(),n.arc(75,100,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,0,255)",n.arc(75,75,75,0,2*Math.PI,!0),n.arc(75,75,25,0,2*Math.PI,!0),n.fill("evenodd"),t.toDataURL&&e.push("canvas fp:"+t.toDataURL()),o(e.join(","))}return this.MSG_NOT_SUPPORT}catch(e){return this.MSG_NOT_SUPPORT}},getWebglFP:function(){return r()?o(JSON.stringify(s())):this.MSG_NOT_SUPPORT},getWebglVendorAndRender:function(){try{var e=n(),t=e.getExtension("WEBGL_debug_renderer_info"),o=e.getParameter(t.UNMASKED_VENDOR_WEBGL)+"~"+e.getParameter(t.UNMASKED_RENDERER_WEBGL);return i(e),o}catch(e){return this.MSG_NOT_SUPPORT}},hasIndexedDB:function(){try{return!!window.indexedDB}catch(e){return this.MSG_NOT_SUPPORT}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return this.MSG_NOT_SUPPORT}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return this.MSG_NOT_SUPPORT}},getHardwareConcurrency:function(){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:this.MSG_NOT_SUPPORT},getNavigatorCpuClass:function(){return navigator.cpuClass||this.MSG_NOT_SUPPORT},getDeviceMemory:function(){return navigator.deviceMemory||this.MSG_NOT_SUPPORT},getPixelRatio:function(){return window.devicePixelRatio||this.MSG_NOT_SUPPORT},getAvailableScreenResolution:function(e){var t;switch(e){case"height":t=window.screen.availHeight||this.MSG_NOT_SUPPORT;break;case"width":t=window.screen.availWidth||this.MSG_NOT_SUPPORT;break;case"top":t=window.screen.availTop||this.MSG_NOT_SUPPORT;break;case"left":t=window.screen.availLeft||this.MSG_NOT_SUPPORT}return t}};return a.getJsFonts=function(){var e=this;!function(e){var t=[],o=["monospace","sans-serif","serif"],r=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];r=(r=r.concat(t)).filter((function(e,t){return r.indexOf(e)===t}));var n=document.getElementsByTagName("body")[0],i=document.createElement("div"),a=document.createElement("div"),s={},d={},u=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="72px",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML="mmmmmmmmmmlli",e},l=function(e,t){var o=u();return o.style.fontFamily="'"+e+"',"+t,o},g=function(e){for(var t=!1,r=0;r<o.length;r++)if(t=e[r].offsetWidth!==s[o[r]]||e[r].offsetHeight!==d[o[r]])return t;return t},c=function(){for(var e=[],t=0,r=o.length;t<r;t++){var n=u();n.style.fontFamily=o[t],i.appendChild(n),e.push(n)}return e}();n.appendChild(i);for(var p=0,h=o.length;p<h;p++)s[o[p]]=c[p].offsetWidth,d[o[p]]=c[p].offsetHeight;var m=function(){for(var e={},t=0,n=r.length;t<n;t++){for(var i=[],s=0,d=o.length;s<d;s++){var u=l(r[t],o[s]);a.appendChild(u),i.push(u)}e[r[t]]=i}return e}();n.appendChild(a);for(var f=[],b=0,$=r.length;b<$;b++)g(m[r[b]])&&f.push(r[b]);n.removeChild(a),n.removeChild(i),e(f)}((function(t){e.raphaelInfo.j47=t}))},a.getEnumerateDevices=function(){var e=this;!function(e){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return e("not_supported");navigator.mediaDevices.enumerateDevices().then((function(t){e(t.map((function(e){return"id="+e.deviceId+";gid="+e.groupId+";"+e.kind+";"+e.label})))})).catch((function(t){e(t)}))}((function(t){e.raphaelInfo.j48=t}))},a.getAudioFP=function(e){var t=this;d((function(o){t.raphaelInfo.j49=o,e("audio-finished")}))},a.getBattery=function(){var t=this,o={};try{e(navigator)&&navigator.getBattery().then((function(e){o.charging=e.charging,o.level=e.level,o.chargingTime=e.chargingTime,o.dischargingTime=e.dischargingTime,t.raphaelInfo.j50=o}))}catch(t){this.raphaelInfo.j50=this.MSG_NOT_SUPPORT}},a.getWholeConnection=function(){var t={};try{return e(navigator)&&navigator.connection?(t.downlink=navigator.connection.downlink,t.effectiveType=navigator.connection.effectiveType,t.rtt=navigator.connection.rtt,t.saveData=navigator.connection.saveData,t):this.MSG_NOT_SUPPORT}catch(t){return this.MSG_NOT_SUPPORT}},a.getJavaEabled=function(){return e(navigator)?navigator.javaEnabled():this.MSG_NOT_SUPPORT},a.getDoNotTrack=function(){return e(navigator)?navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:this.MSG_NOT_SUPPORT:this.MSG_NOT_SUPPORT},a.getWebdriver=function(){return e(navigator)?null==navigator.webdriver?this.MSG_NOT_SUPPORT:navigator.webdriver:this.MSG_NOT_SUPPORT},a.getTouchSupport=function(){var e,t=0;void 0!==navigator.maxTouchPoints?t=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return[t,e,"ontouchstart"in window]},a.getAdBlock=function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(e){t=!1}return t},a.isIE=function(){return navigator?"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent)):this.MSG_NOT_SUPPORT},a.hasSwfObjectLoaded=function(){return void 0!==window.swfobject},a.getHasLiedLanguages=function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1},a.isIncognito=function(e){var t=window.RequestFileSystem||window.webkitRequestFileSystem;t?t(window.TEMPORARY,0,(function(){e(!1)}),(function(){e(!0)})):e(this.MSG_NOT_SUPPORT)},a.getHasLiedScreen=function(){return window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight},a.getHasLiedOs=function(){var e,t=navigator.userAgent.toLowerCase(),o=navigator.oscpu,r=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("windows")>=0||t.indexOf("win16")>=0||t.indexOf("win32")>=0||t.indexOf("win64")>=0||t.indexOf("win95")>=0||t.indexOf("win98")>=0||t.indexOf("winnt")>=0||t.indexOf("wow64")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0||t.indexOf("cros")>=0||t.indexOf("x11")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0||t.indexOf("ipod")>=0||t.indexOf("crios")>=0||t.indexOf("fxios")>=0?"iOS":t.indexOf("macintosh")>=0||t.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows"!==e&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e&&-1===t.indexOf("cros"))return!0;if(void 0!==o){if((o=o.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(o.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(o.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if((-1===o.indexOf("win")&&-1===o.indexOf("linux")&&-1===o.indexOf("mac"))!=("Other"===e))return!0}return r.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(r.indexOf("linux")>=0||r.indexOf("android")>=0||r.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(r.indexOf("mac")>=0||r.indexOf("ipad")>=0||r.indexOf("ipod")>=0||r.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||!(r.indexOf("arm")>=0&&"Windows Phone"===e)&&!(r.indexOf("pike")>=0&&t.indexOf("opera mini")>=0)&&((r.indexOf("win")<0&&r.indexOf("linux")<0&&r.indexOf("mac")<0&&r.indexOf("iphone")<0&&r.indexOf("ipad")<0&&r.indexOf("ipod")<0)!=("Other"===e)||void 0===navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e)},a.getHasLiedBrowser=function(){var e,t=navigator.userAgent.toLowerCase(),o=navigator.productSub;if(t.indexOf("edge/")>=0||t.indexOf("iemobile/")>=0)return!1;if(t.indexOf("opera mini")>=0)return!1;if(("Chrome"==(e=t.indexOf("firefox/")>=0?"Firefox":t.indexOf("opera/")>=0||t.indexOf(" opr/")>=0?"Opera":t.indexOf("chrome/")>=0?"Chrome":t.indexOf("safari/")>=0?t.indexOf("android 1.")>=0||t.indexOf("android 2.")>=0||t.indexOf("android 3.")>=0||t.indexOf("android 4.")>=0?"AOSP":"Safari":t.indexOf("trident/")>=0?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==o)return!0;var r,n=eval.toString().length;if(37===n&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===n&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===n&&"Chrome"!==e&&"AOSP"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(e){try{e.toSource(),r=!0}catch(e){r=!1}}return r&&"Firefox"!==e&&"Other"!==e},a.postEvent=function(e,t,o,r,n){if("string"!=typeof e||"string"!=typeof t||"string"!=typeof o||"string"!=typeof r)return this.MSG_PARA_ERR;var i={u1:e,v3:t,event_name:o,e1:r};this.ajax("POST","/raphael_event",i,(function(e){n(e)}))},a.createXmlHttp=function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){console.log("the version of browser is too old")}}}return e},a.ajax=function(e,t,o,r){var n=this.createXmlHttp();if(!n)return this.err_msg=this.MSG_CONNECTION_FAILED,!1;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.response);r(e)}};var i=this.getEnv();o.accesskey==this.MSG_EMPTY||i==this.MSG_EMPTY?this.err_msg="accessKey or DvEnv is empty":(n.open(e,i+t,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json"),n.send(JSON.stringify(o)))},a.dataWrapper=function(e){var o=this;this.getRaphael((function(r){var n=r,i={};Object.keys(n).forEach((function(e){"boolean"==typeof n[e]?i[e]=n[e]?"true":"false":"object"==t(n[e])?i[e]=JSON.stringify(n[e]):"string"==typeof n[e]&&""===n[e]?delete i[e]:i[e]=""+n[e]})),o.ajax("POST","/raphael_data_v2",i,(function(t){if(t.DVID){var o=t.DVMA?t.DVMA:1;l=t.DVID,g=t.DVToken;try{localStorage.setItem("DVMA",(new Date).getTime()+864e5*o),localStorage.setItem("DVToken",t.DVToken),localStorage.setItem("DVID",t.DVID)}catch(e){g=t.DVToken,l=t.DVID}e(t.DVToken)}}))}))},a.initToken=function(e){var t=this;if(this.judgeDVMA()||this.getDVToken()===this.MSG_EMPTY){var o=this;this.setRaphael((function(t){"finished"==t&&setTimeout((function(){o.dataWrapper(e)}),0)}))}else this.setRaphael((function(o){"finished"==o&&e(t.getDVToken())}))},a.judgeDVMA=function(){try{var e=localStorage.getItem("DVMA")?parseInt(localStorage.getItem("DVMA")):null,t=(new Date).getTime();if(e)return e<t}catch(e){return!0}},a.raphaelInfo={v1:"",v2:"",v3:"",u1:"",j1:"",j2:"",j3:"",j4:"",j5:"",j6:"",j7:"",j8:"",j10:"",j11:"",j12:"",j15:"",j16:"",j17:"",j18:"",j21:[],j22:[],j23:[],j24:[],j25:[],j26:[],j27:[],j30:[],j31:[],j32:[],j33:[],j34:"",j35:"",j36:"",j37:"",j38:"",j39:"",j40:"",j41:"",j42:"",j43:"",j44:"",j45:"",j46:"",j47:"",j48:"",j49:"",j50:"",j51:"",j52:"",j53:"",j54:"",j55:"",j56:"",j57:"",j58:"",j59:"",j60:"",j61:"",j62:"",j63:""},a.getSavedRaphael=function(e){var t="/raphael_data_v2?access_key="+this.getAccessKey()+"?dvid="+l;this.ajax("GET",t,[],(function(t){e(t)}))},a.getRaphael=function(e){this.raphaelInfo.v1=l||this.getDVID(),this.raphaelInfo.v3=g||this.getDVToken(),e(this.raphaelInfo)},a.generalOption=function(e){var t=this;this.getAudioFP((function(o){"audio-finished"===o&&(t.getJsFonts(),t.getEnumerateDevices(),t.getBattery(),t.raphaelInfo.u1=t.getAccessKey(),t.raphaelInfo.v1=t.getDVID(),t.raphaelInfo.v2=t.getSDKVersion(),t.raphaelInfo.v3=t.getDVToken(),t.raphaelInfo.j1=t.getUAofBrowser(),t.raphaelInfo.j2=t.getPlugins(),t.raphaelInfo.j10=t.getLanguage(),t.raphaelInfo.j11=t.getLanguages(),t.raphaelInfo.j3=t.getLocationUrl(),t.raphaelInfo.j4=t.getReferrer(),t.raphaelInfo.j5=t.getScreenWidth(),t.raphaelInfo.j6=t.getScreenHeight(),t.raphaelInfo.j7=t.getColorDepth(),t.raphaelInfo.j8=t.getStatusOfConnection(),t.raphaelInfo.j12=t.getPlatform(),t.raphaelInfo.j15=t.getTimezone(),t.raphaelInfo.j16=t.getLocalTime(),t.raphaelInfo.j17=t.getFlashInfo(),t.raphaelInfo.j18=t.getCookies(),t.raphaelInfo.j34=t.getCanvasFP(),t.raphaelInfo.j35=t.getWebglFP(),t.raphaelInfo.j36=t.hasIndexedDB(),t.raphaelInfo.j37=t.hasSessionStorage(),t.raphaelInfo.j38=t.hasLocalStorage(),t.raphaelInfo.j39=t.getHardwareConcurrency(),t.raphaelInfo.j40=t.getNavigatorCpuClass(),t.raphaelInfo.j41=t.getDeviceMemory(),t.raphaelInfo.j42=t.getPixelRatio(),t.raphaelInfo.j43=t.getAvailableScreenResolution("height"),t.raphaelInfo.j44=t.getAvailableScreenResolution("width"),t.raphaelInfo.j45=t.getAvailableScreenResolution("top"),t.raphaelInfo.j46=t.getAvailableScreenResolution("left"),t.raphaelInfo.j51=t.getJavaEabled(),t.raphaelInfo.j52=t.getDoNotTrack(),t.raphaelInfo.j53=t.getTouchSupport(),t.raphaelInfo.j54=t.getAdBlock(),t.raphaelInfo.j55=t.isIE(),t.raphaelInfo.j56=t.hasSwfObjectLoaded(),t.raphaelInfo.j57=t.getHasLiedLanguages(),t.raphaelInfo.j58=t.getHasLiedScreen(),t.raphaelInfo.j59=t.getHasLiedOs(),t.raphaelInfo.j60=t.getHasLiedBrowser(),t.raphaelInfo.j61=t.getWebglVendorAndRender(),t.raphaelInfo.j62=t.getDVUUID(),t.raphaelInfo.j63=t.getWholeConnection(),e("finished"))}))},a.judgePlatform=function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?"mobile":"pc"},a.setRaphael=function(e){this.platform=this.judgePlatform(),this.platform,this.generalOption((function(t){"finished"===t&&e(t)}))},a.getNativeToken=function(){window.dvEdgeRapahelJs2native&&void 0!==window.dvEdgeRapahelJs2native.getJSToken?p.NToken=window.dvEdgeRapahelJs2native.getJSToken():"undefined"!=typeof dvEdgeRapahelJs2native&&void 0!==dvEdgeRapahelJs2native.getJSToken?p.NToken=dvEdgeRapahelJs2native.getJSToken():window.webkit&&window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.dvEdgeRapahelJSAction&&window.webkit.messageHandlers.dvEdgeRapahelJSAction.postMessage({cmd:"getJSToken"})},a}},576:function(e,t,o){"use strict";o.d(t,{Z:function(){return Vt}});var r=o(500),n=o.n(r),i=o(737),a=o(890),s=o(573),d=o(36),u=o(460),l=o(687),g=o(485);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=$(e);if(t){var n=$(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return b(this,o)}}function b(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,e);var t,o,r,n=f(s);function s(){var e;p(this,s);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))).state={disableResentLink:!1},e}return t=s,(o=[{key:"componentDidUpdate",value:function(){this.props.isFocused&&this.errorMessage.focus()}},{key:"render",value:function(e){var t=this;return e.error?(0,i.h)("div",{className:"aaw-error-message",onBlur:e.onBlur,ref:function(e){return t.errorMessage=e},tabIndex:"-1",id:"aaw-error",role:"alert","aria-live":"assertive"},(0,i.h)("div",{className:"aaw-right-padding"},(0,i.h)("span",{className:"aaw-red-round"},"!")),(0,i.h)("div",null,(0,i.h)(a.xv,{id:e.error,fields:{email:e.email}})," ",e.resetLink&&(0,i.h)(a.Cf,null,(0,i.h)("a",{className:"aaw-error-link",href:"javascript:",onClick:function(){var t={username:e.email};e.linkAction(Object.assign({},t))},"aria-label":(0,i.h)(a.xv,{id:"errors.resetPassword"},"reset your password")},(0,i.h)(a.xv,{id:"errors.resetPassword"},"reset your password"))),e.isTerminated&&(0,i.h)(a.Cf,null,(0,i.h)("a",{className:"aaw-error-link",href:"javascript:",onClick:function(){var t={username:e.email};e.linkAction(Object.assign({},t))},"aria-label":(0,i.h)(a.xv,{id:"errors.userResetPassword"},"reset your password")},(0,i.h)(a.xv,{id:"errors.userResetPassword"},"reset your password"))),e.isTerminated&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.userResetPasswordAdditional"})),e.isTerminatedNotify&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.userTerminatedNotify",fields:{email:e.email}},"An email to reset your password has been sent to")),e.activationLink&&(0,i.h)(a.Cf,null,(0,i.h)("a",{className:this.state.disableResentLink?"aaw-error-link-disabled":"aaw-error-link",href:"javascript:",onClick:function(o){e.linkFunction(o),t.setState({disableResentLink:!0})},"aria-label":(0,i.h)(a.xv,{id:"errors.userNotActivatedLink"},"Request an activation link.")},(0,i.h)(a.xv,{id:"errors.userNotActivatedLink"},"Request an activation link."))),e.activationLink&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.userNotActivatedEnd"}," to log in.")),e.signupLink&&(0,i.h)(a.Cf,null,(0,i.h)("a",{className:"aaw-error-link",href:"javascript:",onClick:function(){e.linkAction(e.email)},"aria-label":(0,i.h)(a.xv,{id:"errors.signupWithEmail",fields:{email:e.email}},"signup with ",e.email,"?")},(0,i.h)(a.xv,{id:"errors.signupWithEmail",fields:{email:e.email}},"signup with ",e.email,"?"))),e.loginLink&&(0,i.h)(a.Cf,null,(0,i.h)("a",{className:"aaw-error-link",href:"javascript:",onClick:function(){e.linkAction(e.email)},"aria-label":(0,i.h)(a.xv,{id:"errors.loginWithEmail",fields:{email:e.email}},"signup with ",e.email,"?")},(0,i.h)(a.xv,{id:"errors.loginWithEmail",fields:{email:e.email}},"signup with ",e.email,"?"))),e.customerSupportLogin&&(0,i.h)(a.Cf,null,(0,i.h)("a",{href:(0,i.h)(a.xv,{id:"errors.customerSupportLinkUrl"},"https://support.airasia.com/s/?language=en_GB"),className:this.state.disableResentLink?"aaw-error-link-disabled":"aaw-error-link","aria-label":(0,i.h)(a.xv,{id:"errors.customerSupportLink"},"customer support link")},(0,i.h)(a.xv,{id:"errors.customerSupportLink"},"customer support link"))),e.customerSupportLogin&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.customerSupportLinkEndLogin"},"if you wish to log in using this email")),e.customerSupportLocked&&(0,i.h)(a.Cf,null,(0,i.h)("a",{href:(0,i.h)(a.xv,{id:"errors.customerSupportLinkUrl"},"https://support.airasia.com/s/?language=en_GB"),className:this.state.disableResentLink?"aaw-error-link-disabled":"aaw-error-link","aria-label":(0,i.h)(a.xv,{id:"errors.customerSupportLink"},"customer support link")},(0,i.h)(a.xv,{id:"errors.customerSupportLink"},"customer support link"))),e.customerSupportLocked&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.customerSupportLinkEndLocked"},"to unlock your account")),e.customerSupportRegister&&(0,i.h)(a.Cf,null,(0,i.h)("a",{href:(0,i.h)(a.xv,{id:"errors.customerSupportLinkUrl"},"https://support.airasia.com/s/?language=en_GB"),className:this.state.disableResentLink?"aaw-error-link-disabled":"aaw-error-link","aria-label":(0,i.h)(a.xv,{id:"errors.customerSupportLink"},"customer support link")},(0,i.h)(a.xv,{id:"errors.customerSupportLink"},"customer support link"))),e.customerSupportRegister&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.customerSupportLinkEndRegister"},"if you wish to register using this email")),e.fromSocialDeletionCancellation&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.userScheduledForDeletion"},"You've requested to delete your account. This account will be deleted on"))," ",e.deleteScheduledAt&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.userScheduledForDeletionEnd",fields:{date:(0,d.IZ)(e.deleteScheduledAt)}},"When you log in, we'll restore the account again.")),e.attemptsLeft>0&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.otpXAttemptsLeft",fields:{x:e.attemptsLeft},plural:e.attemptsLeft},"You have limited attempts left.")),e.allowedLoginProviders&&1===e.allowedLoginProviders.length&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.invalidEmailOrPasswordForSocialAccountSingle",fields:{provider:e.allowedLoginProviders}},"You already have an account with us. Please log-in using",e.allowedLoginProviders,"?")),e.allowedLoginProviders&&e.allowedLoginProviders.length>1&&(0,i.h)(a.Cf,null,(0,i.h)(a.xv,{id:"errors.invalidEmailOrPasswordForSocialAccountMultiple",fields:{providersExceptLast:e.allowedLoginProviders.slice(0,-1).join(", "),lastProvider:e.allowedLoginProviders[e.allowedLoginProviders.length-1]}},"You already have an account with us. Please log-in using",e.allowedLoginProviders.slice(0,-1).join(", "),"?")))):null}}])&&h(t.prototype,o),r&&h(t,r),s}(i.wA);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=P(e);if(t){var n=P(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return v(this,o)}}function v(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(d,e);var t,o,r,s=E(d);function d(){return S(this,d),s.apply(this,arguments)}return t=d,(o=[{key:"render",value:function(e){return e.error&&"string"==typeof e.error.deleteScheduledAt&&(e.error.deleteScheduledAt=parseInt(e.error.deleteScheduledAt)),(0,i.h)("div",{id:e.fromSocial?"aaw-login-tab":"",className:e.fromSocial?n()({"aaw-tab-container--vertical":e.hasSocialLogin}):"",role:e.fromSocial?"tabpanel":"","aria-labelledby":e.fromSocial?"aaw-login":""},e.error?(0,i.h)(y,{error:e.error.error,isFocused:e.isErrorFocused,email:this.state.username,onBlur:this.handleErrorMessageBlur,resetLink:e.isResetLinkRequired,isTerminated:e.isResetPasswordRequired,isTerminatedNotify:e.isErrorNotify,activationLink:e.isActivationLinkRequired,customerSupportLogin:e.isCustomerSupportInactive,deleteScheduledAt:e.error.deleteScheduledAt,customerSupportLocked:e.isCustomerSupportLocked,fromSocialDeletionCancellation:e.fromSocial}):null,(0,i.h)("div",{className:n()("aaw-continue-loader",{"aaw--hidden":!e.isProcessing})},(0,i.h)("div",{class:"aaw-custom-loader-continue"},(0,i.h)("div",null))),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m4 aaw-el--top-padding":e.isHorizontal&&!e.hasSocialLogin,"aaw-top-padding":!e.isHorizontal||e.hasSocialLogin})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",id:"cancelbutton",className:e.isProcessing?"aaw-button-disabled":"aaw-button-negative",name:"cancel",value:(0,i.h)(a.xv,{id:"loginTab.cancel"},"Cancel"),role:"button",onClick:e.handleCancelAccountDeletionCancellation}))),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m4 aaw-el--top-padding":e.isHorizontal&&!e.hasSocialLogin,"aaw-top-padding":!e.isHorizontal||e.hasSocialLogin})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",disabled:e.isProcessing,id:"continuebutton",className:e.isProcessing?"aaw-button-disabled":"aaw-button",name:"continue",value:(0,i.h)(a.xv,{id:"loginTab.continue"},"Continue"),role:"button",onClick:e.cancelDeletionRequest}))))}}])&&N(t.prototype,o),r&&N(t,r),d}(i.wA),O=o(483),A=o(727),w=o.n(A),R=function(e){return/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,10})$/i.test(e)},L=function(e){return e=String(e),/^(?=.*\d)(?=.*?[A-Z])(?=.*?[a-z])(?=.*[a-zA-Z.@#$%^&+=!])(?!.*[<>.,~]).{8,16}$/.test(e)},I=function(e){return/^[a-zA-Z ]+$/.test(e)},D=function(e){return 0!==(e=String(e).trim()).length},M=function(e){return e=String(e).trim(),/^[0-9]+$/.test(e)},U=function(e){return!((e=String(e).trim()).length<5)&&/^[0-9]+$/.test(e)},F=function(e){return e=String(e).trim(),/^[0-9]{6}$/.test(e)};function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=B(e);if(t){var n=B(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return H(this,o)}}function H(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(s,e);var t,o,r,a=j(s);function s(){var e;k(this,s);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).state={active:!1,value:e.props.defaultValue||""},e.onChange=function(t){var o=t.target.value;(e.props.isMobile||e.props.isOTP)&&(o=o.replace(/[^0-9]/g,""),e.props.isMobile&&(o=o.substring(0,16))),e.setState((function(e,t){return t.onValueChange(o),{value:o}}))},e.onInput=function(t){var o=t.target.value;(e.props.isMobile||e.props.isOTP)&&(o=o.replace(/[^0-9]/g,""),e.props.isMobile&&(o=o.substring(0,16))),e.setState((function(e,t){return t.onValueChange(o),{value:o}}))},e.onFocus=function(){e.setState({active:!0})},e.onBlur=function(t){var o=t.target.value;e.setState((function(e,t){return t.onValueChange(o),{value:o}})),e.state.value||e.setState({active:!1})},e.onAnimationStart=function(t){"onAutoFillStart"===t.animationName&&e.onFocus()},e}return t=s,(o=[{key:"componentDidMount",value:function(){this.props.focusOnMount&&(this.loginInput.focus(),this.setState({active:!0})),this.loginInput.addEventListener("animationstart",this.onAnimationStart,!1)}},{key:"componentWillUnmount",value:function(){this.loginInput&&this.loginInput.removeEventListener("animationstart",this.onAnimationStart,!1)}},{key:"render",value:function(e){var t=this;return(0,i.h)("div",{className:n()("aaw-input-field aaw-form__input",{"aaw-mobile-number-input--border":e.isMobile},{"aaw-input--error":e.error})},(0,i.h)("input",{id:"text-input--".concat(e.tab),value:this.state.value,type:"text",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onInput:this.onInput,"aria-describedby":e.error&&"aaw-error",ref:function(e){return t.loginInput=e},"aria-invalid":e.error,disabled:e.disabled,maxLength:this.props.maxLength}),(0,i.h)("label",{className:n()({"aaw-active":this.state.active||this.state.value}),htmlFor:"text-input--".concat(e.tab),"aria-describedby":"text-input--".concat(e.tab),role:"tooltip"},this.props.textLabel),(0,i.h)("span",{className:"aaw-tooltiptext"},this.props.tooltipText))}}])&&V(t.prototype,o),r&&V(t,r),s}(i.wA);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=J(e);if(t){var n=J(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return X(this,o)}}function X(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(d,e);var t,o,r,s=Z(d);function d(){var e;Y(this,d);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=s.call.apply(s,[this].concat(o))).state={dialingCode:e.props.dialingCode||"60",mobileNumber:e.props.mobileNumber||""},e.onChange=function(t){var o=t.target,r=e.state.dialingCode,n=o.options[o.selectedIndex].value;e.setState({dialingCode:n}),r!==n&&e.props.onValueChange(n,e.state.mobileNumber)},e.handleChangeMobileNumber=function(t){var o=e.state.mobileNumber;e.setState({mobileNumber:t}),o!==t&&e.props.onValueChange(e.state.dialingCode,t)},e}return t=d,(o=[{key:"buildOptions",value:function(e){var t=[];if(e)for(var o=0;o<e.length;o++){var r=e[o];t.push((0,i.h)("option",{value:r.dialingCode,selected:r.dialingCode===this.state.dialingCode},r.name+" (+"+r.dialingCode+")"))}return t}},{key:"render",value:function(e){return(0,i.h)("div",null,(0,i.h)("div",{className:"aaw-mobile-number-container ".concat(e.error?"aaw-input--error":"")},(0,i.h)("div",{id:"aaw-mobile-number-dropdown",class:n()({disabled:e.disabled},"dropdown-display")},(0,i.h)("label",{className:n()({"aaw-active":!0,disabled:e.disabled}),htmlFor:"aaw-mobile-number-dropdown",role:"tooltip"},(0,i.h)(a.xv,{id:"signupTab.dialingCode"},"Dialing code")),(0,i.h)("p",null,"+"+this.state.dialingCode),(0,i.h)("select",{onchange:this.onChange},this.buildOptions(e.listItems.countries))),(0,i.h)("div",{className:"aaw-mobile-number-input"},(0,i.h)(W,{isMobile:!0,error:e.error,textLabel:(0,i.h)(a.xv,{id:"signupTab.mobilePhone"},"Mobile phone"),tab:"additionalSignupFields-mobileNumber",onValueChange:this.handleChangeMobileNumber,defaultValue:this.state.mobileNumber,tooltipText:(0,i.h)(a.xv,{id:"tooltipTextMobileNumber"},"Please enter a valid phone number to receive one-time password for account validation.")}))))}}])&&K(t.prototype,o),r&&K(t,r),d}(i.wA);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=ae(e);if(t){var n=ae(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return ie(this,o)}}function ie(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(s,e);var t,o,r,n=ne(s);function s(){return te(this,s),n.apply(this,arguments)}return t=s,(o=[{key:"_renderCountdown",value:function(e){if(e>=86400){var t=Math.ceil(e/86400);return(0,i.h)("p",{class:"aaw-otp-quota-text"},(0,i.h)(a.xv,{id:"errors.try_again_after_days",fields:{x:t},plural:t}))}if(e>=3600){var o=Math.ceil(e/3600);return(0,i.h)("p",{class:"aaw-otp-quota-text"},(0,i.h)(a.xv,{id:"errors.try_again_after_hours",fields:{x:o},plural:o}))}if(e>=60){var r=Math.ceil(e/60);return(0,i.h)("p",{class:"aaw-otp-quota-text"},(0,i.h)(a.xv,{id:"errors.try_again_after_minutes",fields:{x:r},plural:r}))}return(0,i.h)("p",{class:"aaw-otp-quota-text"},(0,i.h)(a.xv,{id:"errors.try_again_after_seconds",fields:{x:e},plural:e}))}},{key:"render",value:function(e){return(0,i.h)("div",{id:"aaw-otp-quota-container"},(0,i.h)("div",{id:"aaw-otp-quota-content"},(0,i.h)("img",{id:"aaw-otp-quota-img"}),(0,i.h)("p",{class:"aaw-otp-quota-title"},(0,i.h)(a.xv,{id:"errors.oops"},"Oops")),(0,i.h)("p",{class:"aaw-otp-quota-text"},(0,i.h)(a.xv,{id:"errors.otp_quota_reached"},"You’ve reached the maximum number of OTP requests for the day.")),this._renderCountdown(e.secondsLeft)))}}])&&oe(t.prototype,o),r&&oe(t,r),s}(i.wA),de=o(371),ue=function(e,t,o,r){return(0,de.Z)("".concat("https://ssor.airasia.com","/um/v2/user-activation-keys"),{method:"post",mode:"cors",headers:{"Content-Type":"application/json","x-api-key":r,"x-aa-client-id":o},body:JSON.stringify({email:e,emailLanguageCode:t})}).then((function(e){if(e.ok)return e.text();var t=new Error(e.statusText);throw t.response=e,t}))},le=function(e){var t=e.toLowerCase();return"en-tt"===t&&(t="th-th"),(0,de.Z)("".concat("https://sch.apiairasia.com","/datasource/country/").concat(t,"/file.json"),{mode:"cors",headers:{Accept:"application/json"}}).then((function(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t}))},ge=o(625),ce=o(338),pe=function(e,t,o,r,n){return(0,de.Z)("".concat("https://ssor.airasia.com","/um/v2/users/").concat(t),{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:o,"x-api-key":n,"x-aa-client-id":r},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t}))};function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function fe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?me(Object(o),!0).forEach((function(t){be(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):me(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function be(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function $e(e,t,o,r,n,i,a){try{var s=e[i](a),d=s.value}catch(e){return void o(e)}s.done?t(d):Promise.resolve(d).then(r,n)}function ye(e){return function(){var t=this,o=arguments;return new Promise((function(r,n){var i=e.apply(t,o);function a(e){$e(i,r,n,a,s,"next",e)}function s(e){$e(i,r,n,a,s,"throw",e)}a(void 0)}))}}function _e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=Ee(e);if(t){var n=Ee(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Te(this,o)}}function Te(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=w().PhoneNumberUtil.getInstance(),Pe=o(280),Ce="aa_otp",Oe=1,Ae=2,we=3,Re=4,Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(l,e);var t,o,r,s,u=Ne(l);function l(e){var t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).state={gender:"male",firstName:"",lastName:"",dialingCode:"60",phoneNumber:"",otp:"",submitted:!1,hideEmailButton:!1,disableResentLink:!1,disableSubmitButton:!1,disableRequestOtpButton:!1,disableMaybeLink:!1,error:"",firstNameError:!1,lastNameError:!1,phoneNumberError:!1,otpError:!1,attemptsLeft:void 0,isProcessing:!1,countries:[],otpCountDown:60,otpIntervalId:null,secondsLeft:null,page:Oe,userId:void 0,phoneNumberVerified:!1,username:void 0},t.handleChangeGender=function(e){t.setState({gender:e.currentTarget.value})},t.handleChangeFirstName=function(e){t.setState({firstName:e})},t.handleChangeLastName=function(e){t.setState({lastName:e})},t.handleChangePhoneNumber=function(e,o){t.setState({dialingCode:e,phoneNumber:o})},t.handleChangeOTP=function(e){t.setState({otp:e})},t.handleSubmitPersonalInfo=function(){var e=ye(regeneratorRuntime.mark((function e(o){var r,n,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),r=t.state,n=r.firstName,i=r.lastName,a=t._mobileInputError(),i?I(i)?t.setState({lastNameError:!1}):(t.setState({error:"errors.romanAlphabetsOnly",lastNameError:!0}),a=!0):(t.setState({error:"errors.emptyLastName",lastNameError:!0}),a=!0),n?I(n)?t.setState({firstNameError:!1}):(t.setState({error:"errors.romanAlphabetsOnly",firstNameError:!0}),a=!0):(t.setState({error:"errors.emptyGivenName",firstNameError:!0}),a=!0),!a){e.next=7;break}return e.abrupt("return");case 7:return t.setState({error:""}),e.next=10,(0,ce.W)(t.props.apiKey,t.props.clientId,t.props.gaClientId);case 10:s=e.sent,t._shouldShowOtpRequestPage(s)?t.setState({page:Ae}):t.props.isAuthenticated?t.updateUserPersonalDetails():t.submitSignupForm();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleRequestOTP=function(e){e.preventDefault(),t._mobileInputError()||(t.setState({error:""}),t.requestOTP())},t._mobileInputError=function(){var e=t.state,o=e.dialingCode,r=e.phoneNumber,n=!1,i="",a=null;o&&r&&M(o)&&U(r)?(a=t._sanitizePhoneNumber(o,r))||(console.error("_mobileInputError: sanitization for number +".concat(o,"-").concat(r," failed.")),n=!0,i="errors.invalidMobileNumber"):(n=!0,i="errors.emptyMobileNumber");var s={};return a&&(s.phoneNumber=a),n==t.state.phoneNumberError&&i==t.state.error||(s=fe(fe({},s),{},{phoneNumberError:n,error:i})),"{}"!==JSON.stringify(s)&&t.setState(s),n},t.submitSignupForm=function(){var e=t.state,o=e.gender,r=e.firstName,n=e.lastName,i=e.dialingCode,a=e.phoneNumber;if(!t.state.isProcessing){t.setState({isProcessing:!0});var s=(0,d.G3)(),u={username:t.props.userData.username,password:t.props.userData.password,clientId:t.props.userData.clientId,gender:o,firstName:r,lastName:n,dialingCode:i,phoneNumber:a,sendEmail:!0,cultureCode:s,notificationPreference:!0,emailLanguageCode:s,gaClientId:t.props.userData.gaClientId,dataVisorToken:t.props.dataVisorToken};for(var l in u)""===u[l]&&delete u[l];(function(e,t){return(0,de.Z)("".concat("https://ssor.airasia.com","/um/v2/users"),{method:"post",mode:"cors",headers:{"Content-Type":"application/json","x-api-key":t,"x-aa-client-id":e.clientId,"x-ga-client-id":e.gaClientId},body:JSON.stringify(e)}).then((function(e){return e.json()}))})(u,t.props.apiKey).then((function(e){"code"in e?t.props.onError(e):((window.gtmDataLayer||[]).push({event:"signupSubmit",signupMethod:"email",email:t.props.userData.username}),t.setState({submitted:!0}))})).catch((function(e){t.setState({isProcessing:!1}),console.error(e)}))}},t.updateUserPersonalDetails=ye(regeneratorRuntime.mark((function e(){var o,r,n,i,a,s,u,l,g,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.state,r=o.gender,n=o.firstName,i=o.lastName,a=o.dialingCode,s=o.phoneNumber,!t.state.isProcessing){for(g in t.setState({isProcessing:!0}),u=(0,d.G3)(),l={gender:r,firstName:n,lastName:i,dialingCode:a,phoneNumber:s,cultureCode:u,emailLanguageCode:u,clientId:t.props.userData.clientId,gaClientId:t.props.userData.gaClientId,dataVisorToken:t.props.dataVisorToken})""===l[g]&&delete l[g];c=t._getUserData(),t.setState({isProcessing:!0}),pe(l,c.userId,t.props.userData.accessToken,t.props.clientId,t.props.apiKey).then((function(){return t.setState({isProcessing:!1})})).then((function(){return t.props.onSuccessLogin(c)})).catch(function(){var e=ye(regeneratorRuntime.mark((function e(o){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isProcessing:!1}),r=o.response||{},e.next=4,t.getErrorResponseData(r);case 4:"code"in(n=e.sent)&&t.props.onError(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}case 2:case"end":return e.stop()}}),e)}))),t.goToMailPage=function(e){e.preventDefault();var o=(0,d.Wt)(t.props.userData.username,Pe);""!==o&&window.open(o,"_blank").focus()},t.goBack=function(){t.state.page===Oe?t.props.navBack():t.setState({page:Oe,error:!1,otpError:!1,disableRequestOtpButton:!1})},t.resendActivationLink=function(e){e.preventDefault();var o=(0,d.G3)(),r=t.props.userData.username;ue(r,o,t.props.clientId,t.props.apiKey).catch((function(e){console.error(e)})),t.setState({disableResentLink:!0}),setTimeout((function(){return t.setState({disableResentLink:!1})}),parseInt("900000",10))},t.requestOTP=function(){t.setState({disableRequestOtpButton:!0}),t.state.otpIntervalId&&clearInterval(t.state.otpIntervalId);var e=t.state,o=e.dialingCode,r=e.phoneNumber,n=o+r,i=Math.floor(Date.now()/1e3),a=t._otpCache();if(a&&a[n]&&i-a[n]<60){t.setState({otpCountDown:60-(i-a[n])});var s=setInterval(t.executeTimer,1e3);t.setState({page:we,otpIntervalId:s,error:""})}else{var u={email:t.props.userData.username,dialingCode:o,phoneNumber:r,cultureCode:(0,d.G3)()};t.props.isEnabledForUser&&(u.email=t.state.username),function(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,de.Z)(r&&n?"".concat("https://ssor.airasia.com","/um/v2/users/").concat(r,"/otp"):"".concat("https://ssor.airasia.com","/um/v2/users/otp"),{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:n,"x-api-key":t,"x-aa-client-id":e},body:JSON.stringify(o)}).then((function(e){return e.ok?null:e.json().then((function(t){return{status:e.status,data:t}}))}))}(t.props.clientId,t.props.apiKey,u,t.state.userId,t.props.userData.accessToken).then((function(e){if(null===e){var o={};o[n]=i,localStorage.setItem(Ce,JSON.stringify(o)),t.setState({otpCountDown:60});var r=setInterval(t.executeTimer,1e3);t.setState({page:we,otpIntervalId:r,error:""})}else 429===e.status?e.data.secondsLeft>0?t.setState({page:Re,error:"",otpError:!1,attemptsLeft:void 0,secondsLeft:e.data.secondsLeft}):t.setState({error:"requestOTPRateLimit",otpError:!0,attemptsLeft:void 0}):t.setState({error:"requestOTPFail",otpError:!0,attemptsLeft:void 0})})).catch((function(){t.setState({error:"requestOTPFail",otpError:!0,attemptsLeft:void 0})}))}},t.executeTimer=function(){var e=t._otpCache();if(e){var o=Object.keys(e);if(o){var r=o[0];if(r===t.state.dialingCode+t.state.phoneNumber){var n=e[r],i=Math.floor(Date.now()/1e3);if(60-(i-n)>0)return void t.setState({otpCountDown:60-(i-n)})}}}t.state.otpIntervalId&&clearInterval(t.state.otpIntervalId),t.setState({otpCountDown:0,otpIntervalId:null,error:"",otpError:!1,attemptsLeft:void 0}),localStorage.removeItem(Ce)},t.handleSubmitOTP=function(){var e=ye(regeneratorRuntime.mark((function e(o){var r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),(r=t.state.otp)&&F(r)){e.next=5;break}return t.setState({error:"errors.invalidOTP",otpError:!0,attemptsLeft:void 0}),e.abrupt("return");case 5:if(!t.state.otpError||0!==t.state.attemptsLeft){e.next=8;break}return t.setState({error:"errors.otpMaxAttemptReached",otpError:!0,attemptsLeft:0}),e.abrupt("return");case 8:if(t.setState({error:"",otpError:!1}),!t.state.userId||!t.props.userData.accessToken){e.next=14;break}return n={email:t.state.username,dialingCode:t.state.dialingCode,phoneNumber:t.state.phoneNumber,firstName:t.state.firstName,lastName:t.state.lastName,otp:r},i={accessToken:t.props.userData.accessToken,refreshToken:t.props.userData.refreshToken,loyaltyId:t.props.userData.loyaltyId,userId:t.props.userData.userId,updateForm:!1},pe(n,t.state.userId,t.props.userData.accessToken,t.props.userData.clientId,t.props.apiKey).then((function(){return t.setState({isProcessing:!1})})).then((function(){return t.props.onSuccessLogin(i)})).catch((function(e){t.setState({isProcessing:!1}),console.error(e)})),e.abrupt("return");case 14:if(!((a=t.props.userData)&&a.network&&a.state)){e.next=18;break}return t.socialWithOTP(),e.abrupt("return");case 18:if(!t.props.renderGenderAndNameFields){e.next=21;break}return t.verifyOtpAndSignup(),e.abrupt("return");case 21:t.signInWithOTP();case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.signInWithOTP=function(){var e=t.props.userData,o=e.username,r=e.password,n=e.clientId,i=e.gaClientId,a=t.state,s=a.dialingCode,d=a.phoneNumber,u=a.otp,l=(0,ge.Z)({username:o,password:r,dvToken:t.props.dataVisorToken,clientId:n,apiKey:t.props.apiKey,gaClientId:i,dialingCode:s,phoneNumber:d,otp:u});t._handleOTPLoginSuccess(l)},t.socialWithOTP=function(){var e=t.state,o=e.gender,r=e.firstName,n=e.lastName,i=e.dialingCode,a=e.phoneNumber,s=e.otp,d=fe(fe({},t.props.userData),{},{dialingCode:i,phoneNumber:a,otp:s});t.props.renderGenderAndNameFields&&(d=fe(fe({},d),{},{gender:o,firstName:r,lastName:n}));var u=function(e,t,o){return(0,de.Z)("".concat("https://ssor.airasia.com","/sso/v2/authorization/social/").concat(o.network,"/otp?clientId=").concat(e),{method:"post",credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","x-api-key":t},body:JSON.stringify(o)}).then((function(e){return e.json().then((function(t){return{status:e.status,data:t}}))}))}(t.props.clientId,t.props.apiKey,d);t._handleOTPLoginSuccess(u)},t._handleOTPLoginSuccess=function(e){e.then((function(e){var o=e.data;if(!(e.status>=400))return t.props.onSuccessLogin(o);t._showOTPVerificationError(o)||(t.setState({error:"errors.verifyOTPFail",otpError:!0,attemptsLeft:void 0}),t.props.onFailureLogin(o.code))})).catch((function(e){t.props.onFailureLogin("CONNECTION_ERROR"),console.error(e)}))},t.verifyOtpAndSignup=function(){var e=t.state,o=e.dialingCode,r=e.phoneNumber,n=e.otp,i=e.userId,a={email:t.props.userData.username,dialingCode:o,phoneNumber:r,otp:n};i&&(a.email=t.state.username),function(e,t,o){return(0,de.Z)("".concat("https://ssor.airasia.com","/um/v2/users/otp/verify"),{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","x-api-key":t,"x-aa-client-id":e},body:JSON.stringify(o)}).then((function(e){return e.ok?null:e.json()}))}(t.props.clientId,t.props.apiKey,a).then((function(e){e?t._showOTPVerificationError(e)||t.setState({error:"errors.verifyOTPFail",otpError:!0,attemptsLeft:void 0}):(t.submitSignupForm(),t.state.otpIntervalId&&clearInterval(t.state.otpIntervalId),t.setState({otpError:!1,error:"",disableSubmitButton:!0,otpCountDown:0,otpIntervalId:null}),localStorage.removeItem(Ce))})).catch((function(){t.setState({error:"errors.verifyOTPFail",otpError:!0,attemptsLeft:void 0})}))},t._needOtpVerification=function(){return!t.state.phoneNumberVerified},t._canDoOtpVerification=function(e){return e.isEnabledForPublic||t.props.isAuthenticated&&e.isEnabledForUser},t._shouldShowOtpRequestPage=function(e){return t._needOtpVerification()&&t._canDoOtpVerification(e)},t.props.userData.username&&(o=(0,d.Wt)(t.props.userData.username,Pe)),o||t.setState({hideEmailButton:!0}),t.setState({phoneNumberVerified:t.props.userData.phoneNumberVerified,username:t.props.userData.username,userId:t.props.userData.id});var r=t.props.userData.dialingCode,n=t.props.userData.mobilePhone,i=n&&n.startsWith(r)?n.replace(r,""):void 0;return t.setState({dialingCode:r||"60",phoneNumber:i,gender:t.props.userData.gender||"male",firstName:t.props.userData.firstName||"",lastName:t.props.userData.lastName||""}),le((0,d.G3)()).then((function(e){t.setState({countries:e})})),t}return t=l,(o=[{key:"_sanitizePhoneNumber",value:function(e,t){var o=ve.parseAndKeepRawInput("+".concat(e).concat(t),"");return ve.isValidNumber(o)?o.getNationalNumber().toString():null}},{key:"getErrorResponseData",value:(s=ye(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return s.apply(this,arguments)})},{key:"_renderTitle",value:function(e,t){var o,r,s;return t.page===Oe?e.renderGenderAndNameFields?(o=(0,i.h)("p",{id:"aaw-signup-subtitle"},(0,i.h)(a.xv,{id:"signupTab.whatsYourName"},"Hi there! What’s your name?")),r=(0,i.h)("p",{id:"aaw-signup-title"},(0,i.h)(a.xv,{id:"signupTab.saveYourDetails"},"Save your details in your BIG Member account"))):(o=(0,i.h)("p",{id:"aaw-signup-subtitle"},(0,i.h)(a.xv,{id:"signupTab.hiThere"},"Hello!")),r=(0,i.h)("p",{id:"aaw-signup-title"},(0,i.h)(a.xv,{id:"signupTab.needVerification"},"Verify your mobile phone")),s=(0,i.h)("p",{id:"aaw-signup-description"},(0,i.h)(a.xv,{id:"signupTab.isItReallyYou"},"We want to confirm it’s you signing in."))):(e.renderGenderAndNameFields&&(o=(0,i.h)("p",{id:"aaw-signup-subtitle"},(0,i.h)(a.xv,{id:"signupTab.isThatYou"},"Hello? Is that you?"))),r=(0,i.h)("p",{id:"aaw-signup-title"},(0,i.h)(a.xv,{id:"signupTab.verifyMobile"},"Verify your mobile phone"))),(0,i.h)("div",null,(0,i.h)("div",null,(0,i.h)("div",{class:"aaw-signup-page-indicator"}),(0,i.h)("div",{class:"aaw-signup-page-indicator"}),(0,i.h)("div",{className:n()("aaw-signup-page-indicator",{"aaw-signup-page-indicator-disabled":t.page===Oe})})),(0,i.h)(y,{error:t.error,attemptsLeft:t.attemptsLeft}),(0,i.h)("div",{id:"aaw-signup-title-container","aria-live":"assertive",tabindex:"0","aria-labelledby":"aaw-signup-subtitle","aria-describedby":"aaw-signup-title"},o,r,s))}},{key:"_renderSignUpPage1",value:function(e,t){var o=(0,i.h)("input",{type:"submit",className:"aaw-button",name:"save",value:(0,i.h)(a.xv,{id:"signupTab.continue"},"Continue"),role:"button"}),r=e.isHorizontal?(0,i.h)("div",{className:n()("aaw-row aaw-align--vertical")},(0,i.h)("div",{className:n()("aaw-col aaw-s12 aaw-m4 aaw-el--top-padding")},(0,i.h)(a.Cf,null,o))):(0,i.h)("div",{className:n()("aaw-bottom-nav--vertical")},(0,i.h)("div",{className:n()("aaw-top-padding")},(0,i.h)(a.Cf,null,o)));return(0,i.h)("form",{onSubmit:this.handleSubmitPersonalInfo},(0,i.h)("div",{className:n()("aaw-vertical-indent",{"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6 aaw-el--top-padding":e.isHorizontal,"aaw-top-padding":!e.isHorizontal})},(0,i.h)("input",{type:"radio",name:"gender",id:"male",value:"male",className:"aaw-filled-in with-gap",onChange:this.handleChangeGender,checked:"male"===this.state.gender}),(0,i.h)("label",{htmlFor:"male"},(0,i.h)(a.xv,{id:"signupTab.male"},"Male")),(0,i.h)("input",{type:"radio",name:"gender",id:"female",value:"female",className:"aaw-filled-in with-gap",onChange:this.handleChangeGender,checked:"female"===this.state.gender}),(0,i.h)("label",{htmlFor:"female"},(0,i.h)(a.xv,{id:"signupTab.female"},"Female")))),(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"signupTab.givenName"},"Given name"),error:t.firstNameError,tab:"additionalSignupFields-firstName",onValueChange:this.handleChangeFirstName,defaultValue:t.firstName,tooltipText:(0,i.h)(a.xv,{id:"tooltipText"},"Enter name as per passport in roman alphabets (A-Z) only")})),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"signupTab.familyName"},"Family name/Surname"),error:t.lastNameError,tab:"additionalSignupFields-lastName",onValueChange:this.handleChangeLastName,defaultValue:t.lastName,tooltipText:(0,i.h)(a.xv,{id:"tooltipText"},"Enter name as per passport in roman alphabets (A-Z) only")}))),(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(Q,{listItems:this.state.countries,onValueChange:this.handleChangePhoneNumber,error:this.state.phoneNumberError,dialingCode:this.state.dialingCode,mobileNumber:this.state.phoneNumber}))),r)}},{key:"_renderSignInPage1",value:function(e,t){var o=this._displayNumber(t);return(0,i.h)("div",null,(0,i.h)("p",{id:"aaw-signup-text-get-otp",tabindex:"0"},(0,i.h)(a.xv,{id:"signupTab.getOTP",fields:{number:o}},"Get a One-Time Password (OTP) sent to your mobile phone"," ",o," for verification.")),(0,i.h)("form",{onSubmit:this.handleRequestOTP},(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(Q,{listItems:this.state.countries,onValueChange:this.handleChangePhoneNumber,error:this.state.phoneNumberError,dialingCode:this.state.dialingCode,mobileNumber:this.state.phoneNumber})),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(a.Cf,null,(0,i.h)("input",{class:"aaw-button aaw-signup-button-submit-otp",type:"submit",value:(0,i.h)(a.xv,{id:"signupTab.requestOTP"},"Request OTP"),role:"button"}))))))}},{key:"_displayNumber",value:function(e){for(var t=e.phoneNumber.length,o=e.phoneNumber.slice(t-4,t),r="",n=0;n<t-4;n++)r+="x";return r+=o,"+"+e.dialingCode+"-"+r}},{key:"_otpCache",value:function(){var e=localStorage.getItem(Ce);return e?JSON.parse(e):null}},{key:"_showOTPVerificationError",value:function(e){return"OTP_MAX_ATTEMPT_REACHED"===e.code?(this.setState({error:"errors.otpMaxAttemptReached",otpError:!0,attemptsLeft:0}),!0):"OTP_VERIFICATION_FAIL"===e.code&&e.attemptsLeft>0&&(this.setState({error:"errors.otpTryAgain",otpError:!0,attemptsLeft:e.attemptsLeft}),!0)}},{key:"_renderRequestOtpPage",value:function(e,t){var o,r=(0,i.h)(a.Cf,null,(0,i.h)("input",{class:this.state.disableRequestOtpButton?"aaw-button-disabled":"aaw-button",type:"submit",value:(0,i.h)(a.xv,{id:"signupTab.requestOTP"},"Request OTP"),onClick:this.requestOTP,role:"button",disabled:this.state.disableRequestOtpButton}));return o=e.isHorizontal?(0,i.h)("div",{className:n()("aaw-row")},(0,i.h)("div",{className:n()("aaw-col aaw-s12 aaw-m6")},r)):(0,i.h)("div",{className:n()("aaw-bottom-nav--vertical")},(0,i.h)("div",{className:n()("aaw-top-padding")},r)),(0,i.h)("div",null,(0,i.h)("p",{id:"aaw-signup-text-get-otp",tabindex:"0"},(0,i.h)(a.xv,{id:"signupTab.getOTP",fields:{number:this._displayNumber(t)}},"Get a One-Time Password (OTP) sent to your mobile phone"," ",this._displayNumber(t)," for verification.")),o)}},{key:"_renderOtpVerificationPage",value:function(e,t){var o,r;return o=t.otpCountDown>=1?(0,i.h)(a.xv,{id:"signupTab.waitXSeconds",plural:t.otpCountDown,fields:{sec:t.otpCountDown}},"Request a new OTP in ",t.otpCountDown," seconds"):(0,i.h)("a",{class:"aaw-signup-link",onClick:this.requestOTP,tabindex:"0"},(0,i.h)(a.xv,{id:"signupTab.requestNewOTP"},"Request a new OTP")),t.disableSubmitButton||(r=(0,i.h)("p",{tabindex:"0"},(0,i.h)(a.xv,{id:"signupTab.didntGetOTP"},"Didn’t get your OTP? "),o,(0,i.h)(a.xv,{id:"signupTab.or_start"}," or "),(0,i.h)("a",{class:"aaw-signup-link",onClick:this.goBack,tabindex:"0"},(0,i.h)(a.xv,{id:"signupTab.updateYourNumber"},"update your phone number")),(0,i.h)(a.xv,{id:"signupTab.or_end",tabindex:"-1"},"."))),(0,i.h)("div",null,(0,i.h)("p",{id:"aaw-signup-text-get-otp",tabindex:"0"},(0,i.h)(a.xv,{id:"signupTab.getOTP",fields:{number:this._displayNumber(t)}},"Get a One-Time Password (OTP) sent to your mobile phone"," ",this._displayNumber(t)," for verification.")),(0,i.h)("form",{onSubmit:this.handleSubmitOTP},(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal}),"aria-live":"assertive"},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"signupTab.otp"},"One-Time Password"),tabindex:"0",error:t.otpError,tab:"additionalSignupFields-otp",isOTP:!0,onValueChange:this.handleChangeOTP})),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",className:"aaw-button aaw-signup-button-submit-otp",value:(0,i.h)(a.xv,{id:"signupTab.submit"}),disabled:this.state.disableSubmitButton,role:"button"}))))),r)}},{key:"renderAdditionalFields",value:function(e,t){if(t.page===Re)return(0,i.h)("div",null,(0,i.h)(se,{secondsLeft:t.secondsLeft}));var o;switch(t.page){case Oe:o=e.renderGenderAndNameFields?this._renderSignUpPage1(e,t):this._renderSignInPage1(e,t);break;case Ae:o=this._renderRequestOtpPage(e,t);break;case we:o=this._renderOtpVerificationPage(e,t)}return(0,i.h)("div",null,this._renderTitle(e,t),o,(0,i.h)("div",{id:"aaw-signup-back",role:"button",tabindex:"0",onClick:this.goBack},(0,i.h)("p",null,(0,i.h)(a.xv,{id:"signupTab.back"},"Back"))))}},{key:"renderCheckEmail",value:function(e){return(0,i.h)("div",{className:"aaw-row"},(0,i.h)("div",{className:"aaw-title"},(0,i.h)(a.xv,{id:"signupTab.activateYourAccount"},"Activate your account")),(0,i.h)("div",{className:n()("aaw-vertical-indent",{"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()("aaw-col aaw-s3",{"aaw-m2":e.isHorizontal,"aaw-m3":!e.isHorizontal})},(0,i.h)("div",{className:"aaw-activation-email-icon"})),(0,i.h)("div",{className:n()("aaw-check-email aaw-col aaw-s9",{"aaw-m10":e.isHorizontal,"aaw-m9":!e.isHorizontal}),role:"alert","aria-live":"assertive"},(0,i.h)("span",null,(0,i.h)(a.xv,{id:"signupTab.emailWithActivationLink"},"An email with an activation link has been sent to:")),(0,i.h)("div",{className:"aaw-email aaw-valign-wrapper"},(0,i.h)("i",{className:"aaw-done"}),this.props.userData.username),(0,i.h)("div",{className:n()("aaw-col",{"aaw-m5":e.isHorizontal,"aaw-m12":!e.isHorizontal})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"button",className:n()("aaw-button",{"aaw--hidden":this.state.hideEmailButton}),name:"go_to_my_email",onClick:this.goToMailPage,value:(0,i.h)(a.xv,{id:"signupTab.goToMail"},"Go to my email"),role:"button"}))))),(0,i.h)("div",{className:"aaw-col aaw-s12 aaw-m12 aaw-resend-link__container"},(0,i.h)(a.xv,{id:"signupTab.noEmail"},"Didn't receive any email? Please check your spam folder or")," ",(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"button",className:"aaw-resend-link-button",name:"resendLink",disabled:this.state.disableResentLink,onClick:this.resendActivationLink,value:(0,i.h)(a.xv,{id:"signupTab.resendLink"},"resend another email"),role:"button"}))))}},{key:"render",value:function(e,t){return t.submitted?this.renderCheckEmail(e):this.renderAdditionalFields(e,t)}},{key:"_getUserData",value:function(){return fe(fe({},this.props.responseData),this.props.userData)}}])&&_e(t.prototype,o),r&&_e(t,r),l}(i.wA);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Me(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ue(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=Ve(e);if(t){var n=Ve(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return ke(this,o)}}function ke(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(u,e);var t,o,r,s=xe(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).state={gender:"male",firstName:"",lastName:"",emailAddress:"",error:"",firstNameError:!1,lastNameError:!1,emailAddressError:!1,countries:{},isProcessing:!1},t.handleChangeGender=function(e){t.setState({gender:e.currentTarget.value})},t.handleChangeFirstName=function(e){t.setState({firstName:e})},t.handleChangeLastName=function(e){t.setState({lastName:e})},t.handleChangeEmailAddress=function(e){t.setState({emailAddress:e})},t.handleSubmit=function(e){e.preventDefault();var o=e.target.id,r=t.state,n=r.gender,i=r.firstName,a=r.lastName,s=r.emailAddress;if("wechat"!=o&&(s="email@domain.com"),(D(i)||D(a)||D(s))&&D(i))if((!D(i)||D(a)||D(s))&&D(a))if(D(i)&&D(a)&&!D(s)||!D(s))t.setState({error:"errors.emptyEmailAddress",firstNameError:!D(i),lastNameError:!D(a),emailAddressError:!D(s)});else if(!D(i)||I(i))if(!D(a)||I(a))if(!D(s)||R(s)){t.setState({error:"",firstNameError:!1,lastNameError:!1,emailAddressError:!1,usernameError:!1});var d={gender:n,firstName:i,lastName:a,emailAddress:s,openid:t.props.weChatOpenId,state:t.props.weChatState,clientId:t.props.clientId,origin:t.props.origin,socialLoginType:o,authorization:t.props.weChatState};for(var u in d)""===d[u]&&delete d[u];if(!t.state.isProcessing){if(t.setState({isProcessing:!0}),"wechat"!==o)return delete d.emailAddress,void pe(d,t.props.response.userId,t.props.response.accessToken,t.props.clientId,t.props.apiKey).then((function(){return t.props.onSuccessLogin(t.props.response)})).catch((function(e){t.setState({isProcessing:!1}),console.error(e)}));t.updateWechatUserDetails(d)}}else t.setState({error:"errors.invalidEmail",firstNameError:!1,lastNameError:!1,emailAddressError:!0});else t.setState({error:"errors.romanAlphabetsOnly",firstNameError:!1,lastNameError:!0,emailAddressError:!1});else t.setState({error:"errors.romanAlphabetsOnly",firstNameError:!0,lastNameError:!1,emailAddressError:!1});else t.setState({error:"errors.emptyLastName",firstNameError:!D(i),lastNameError:!D(a),emailAddressError:!D(s)});else t.setState({error:"errors.emptyGivenName",firstNameError:!D(i),lastNameError:!D(a),emailAddressError:!D(s)})},le((0,d.G3)()).then((function(e){t.setState({countries:e})})).catch((function(){})),t}return t=u,(o=[{key:"updateWechatUserDetails",value:function(e){var t=this;(function(e,t){return(0,de.Z)("".concat("https://ssor.airasia.com","/auth/v2/authorization/social/wechat/callback/?state=").concat(e.state,"&openid=").concat(e.openid,"&username=").concat(e.emailAddress,"&lastName=").concat(e.lastName,"&firstName=").concat(e.firstName,"&gender=").concat(e.gender),{method:"get",mode:"cors",headers:{"Content-Type":"application/json","x-api-key":t}}).then((function(e){return e.json()}))})(e,this.props.apiKey,this.props.clientId).then((function(o){if(o.errormsg)return t.props.onFailureLogin(o),void t.setState({error:"errors.emailExists",usernameError:!0,email:t.state.emailAddress,isProcessing:!1});var r=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?De(Object(o),!0).forEach((function(t){Me(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):De(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},o);return delete r.email,delete r.loyaltyId,function(e,t){return(0,de.Z)("".concat("https://ssor.airasia.com","/sso/v2/authorization/social/wechat/callback?accessToken=").concat(e.accessToken,"&refreshToken=").concat(e.refreshToken,"&userId=").concat(e.userId,"&type=signup"),{method:"get",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json","x-api-key":t}}).then((function(e){return e.json()}))}(o,t.props.apiKey).then((function(){r.email=e.emailAddress,r.network="wechat",t.props.onSuccessLogin(r)}))})).catch((function(e){t.setState({isProcessing:!1}),console.error(e)}))}},{key:"renderAdditionalWeChatFields",value:function(e,t){var o,r;return"wechat"===e.socialLoginType&&(o=(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"signupTab.emailAddress"},"Email Address"),error:t.emailAddressError,tab:"additionalFormFields-email",onValueChange:this.handleChangeEmailAddress,disabled:this.state.isProcessing}))),r=e.isBrowserIE?(0,i.h)("div",{className:n()("aaw-button aaw-loader-wrapper",{"aaw--hidden":!this.state.isProcessing})},(0,i.h)("div",{class:"aaw-custom-loader"},(0,i.h)("div",null))):(0,i.h)("div",{className:n()("aaw-button aaw-loader",{"aaw--hidden":!this.state.isProcessing})},(0,i.h)("svg",{className:"circular",viewBox:"25 25 50 50"},(0,i.h)("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"2","stroke-miterlimit":"10"}))),(0,i.h)("form",{onSubmit:this.handleSubmit,id:e.socialLoginType},(0,i.h)(y,{error:t.error,email:t.email}),(0,i.h)("div",{className:"aaw-title aaw-vertical-indent"},(0,i.h)(a.xv,{id:"signupTab.weChatHeader1"},"We'd like to know your name and email")),(0,i.h)("span",{role:"alert","aria-live":"assertive"},(0,i.h)(a.xv,{id:"signupTab.weChatHeader2"},"...so we can share any good deals with you")),(0,i.h)("div",{className:n()("aaw-vertical-indent",{"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6 aaw-el--top-padding":e.isHorizontal,"aaw-top-padding":!e.isHorizontal})},(0,i.h)("input",{type:"radio",name:"gender",id:"male",value:"male",className:"aaw-filled-in",onChange:this.handleChangeGender,checked:"male"===this.state.gender,disabled:this.state.isProcessing}),(0,i.h)("label",{htmlFor:"male"},(0,i.h)(a.xv,{id:"signupTab.male"},"Male")),(0,i.h)("input",{type:"radio",name:"gender",id:"female",value:"female",className:"aaw-filled-in",onChange:this.handleChangeGender,checked:"female"===this.state.gender,disabled:this.state.isProcessing}),(0,i.h)("label",{htmlFor:"female"},(0,i.h)(a.xv,{id:"signupTab.female"},"Female")))),(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"signupTab.givenName"},"Given name"),error:t.firstNameError,tab:"additionalFormFields-firstName",onValueChange:this.handleChangeFirstName,tooltipText:(0,i.h)(a.xv,{id:"tooltipText"},"Name must match government-issued photo ID in Roman alphabet ( A-Z)"),disabled:this.state.isProcessing})),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"signupTab.familyName"},"Family name/Surname"),error:t.lastNameError,tab:"additionalFormFields-lastName",onValueChange:this.handleChangeLastName,tooltipText:(0,i.h)(a.xv,{id:"tooltipText"},"Name must match government-issued photo ID in Roman alphabet ( A-Z)"),disabled:this.state.isProcessing})),o),(0,i.h)("div",{className:n()({"aaw-row aaw-align--vertical":e.isHorizontal,"aaw-bottom-nav--vertical":!e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s6 aaw-m4 aaw-el--top-padding":e.isHorizontal,"aaw-top-padding":!e.isHorizontal})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",className:n()("aaw-button",{"aaw--hidden":this.state.isProcessing}),name:"save",value:(0,i.h)(a.xv,{id:"signupTab.save"},"Save"),role:"button"})),r)))}},{key:"render",value:function(e,t){return this.renderAdditionalWeChatFields(e,t)}}])&&Ue(t.prototype,o),r&&Ue(t,r),u}(i.wA);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=Ke(e);if(t){var n=Ke(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return ze(this,o)}}function ze(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Ye(e):t}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(d,e);var t,o,r,s=We(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.call(this,e)).onClick=t.props.onClick.bind(Ye(t),t.props.name),t}return t=d,(o=[{key:"componentDidUpdate",value:function(){this.props.isActive&&this.tabRef.focus()}},{key:"render",value:function(e){var t,o,r,s=this;return(0,i.h)("div",{id:"aaw-".concat(e.name),className:n()("aaw-tabs__".concat(e.name+"--"+e.orientation),(t={},o="aaw-tab__active--".concat(e.orientation),r=e.isActive,o in t?Object.defineProperty(t,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[o]=r,t)),onClick:this.onClick,onKeyUp:e.onKeyUp,role:"tab",tabIndex:0,"aria-selected":String(e.isActive),"aria-controls":"aaw-".concat(e.name),ref:function(e){return s.tabRef=e}},(0,i.h)(a.xv,{id:"tabs.".concat(e.name)},e.name))}}])&&He(t.prototype,o),r&&He(t,r),d}(i.wA),Ze=function(e,t,o,r){return(0,de.Z)("".concat("https://ssor.airasia.com","/um/v2/password-recovery-keys"),{method:"post",mode:"cors",headers:{"Content-Type":"application/json","x-api-key":r,"x-aa-client-id":o},body:JSON.stringify({email:e,emailLanguageCode:t})}).then((function(e){if(!e.ok)return e.text().then((function(e){throw JSON.parse(e).message}))}))};function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=rt(e);if(t){var n=rt(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return ot(this,o)}}function ot(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(u,e);var t,o,r,s=tt(u);function u(){var e;Je(this,u);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=s.call.apply(s,[this].concat(o))).state={username:"",error:"",usernameError:!1,submitted:!1,isErrorFocused:!1,isProcessing:!1,isActivationLinkRequired:!1,disableResentLink:!1},e.handleChangeUsername=function(t){if(t)return e.setState({username:t.toLowerCase()}),t},e.handleSubmit=function(t){t.preventDefault(),e.setState({error:"",usernameError:!1});var o=e.state,r=o.username,n=o.isProcessing;if(R(r)){var i=(0,d.G3)();n||(console.log("SUBMIT RESET PASSWORD"),e.setState({isProcessing:!0}),Ze(r,i,e.props.clientId,e.props.apiKey).then((function(){e.setState({submitted:!0,isProcessing:!1})})).catch((function(t){var o={INVALID_USERNAME:"emailNotFound",USER_TERMINATED:"userForgotten",USER_LOCKED:"userLocked",USER_INACTIVE:"userInactiveRegister",USER_NEW:"userNotActivated"}[(t||{}).code]||"serverError";"userNotActivated"===o||"userForgotten"===o?e.setState({isActivationLinkRequired:!0}):"userInactiveRegister"===o?e.setState({customerSupportRegister:!0}):"userLocked"===o&&e.setState({customerSupportLocked:!0}),e.setState({error:"errors.".concat(o),usernameError:!1,isErrorFocused:!1,isProcessing:!1})})))}else e.setState({error:"errors.invalidEmail",usernameError:!0,isErrorFocused:!0})},e.handleErrorMessageBlur=function(){e.setState({isErrorFocused:!1})},e.resendActivationLink=function(t){if(t.preventDefault(),!e.state.disableResentLink){var o=(0,d.G3)(),r=e.state.username;ue(r,o,e.props.clientId,e.props.apiKey).catch((function(e){console.error(e)})),e.setState({disableResentLink:!0}),setTimeout((function(){return e.setState({disableResentLink:!1})}),parseInt("900000",10))}},e}return t=u,(o=[{key:"renderForgotPassword",value:function(e){return(0,i.h)("form",{onSubmit:this.handleSubmit},(0,i.h)("div",{className:"aaw-title"},(0,i.h)(a.xv,{id:"forgotPassword.forgotPassword"},"Forgot password?")),(0,i.h)("span",{role:"alert","aria-live":"assertive"},(0,i.h)(a.xv,{id:"forgotPassword.enterEmail"},"It happens to all of us. Just enter the email you registered with and we'll email the details to reset your password.")),(0,i.h)(y,{error:this.state.error,isFocused:this.state.isErrorFocused,onBlur:this.handleErrorMessageBlur,activationLink:this.state.isActivationLinkRequired,customerSupportRegister:this.state.customerSupportRegister,customerSupportLocked:this.state.customerSupportLocked,disableActivationLink:this.state.disableResentLink,linkFunction:this.resendActivationLink}),(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal,"aaw-input-padding--vertical":!e.isHorizontal})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"email"},"Email"),onBlur:this.handleChangeUsername,defaultValue:e.username,error:this.state.usernameError,tab:"forgotPassword",onValueChange:this.handleChangeUsername,focusOnMount:!0})),(0,i.h)("div",{className:n()("aaw-input-field",{"aaw-col aaw-s12 aaw-m6 ":e.isHorizontal})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",id:"sendResetLinkButton",className:"aaw-button",name:"send_reset_link",value:(0,i.h)(a.xv,{id:"forgotPassword.sendResetLink"},"Send password reset email")})))),(0,i.h)("div",{className:n()({"aaw-link-pading--vertical":!e.isHorizontal})},(0,i.h)("a",{href:"javascript:",id:"backToLoginLink",onClick:e.onCancel},(0,i.h)("span",{className:"aaw-left-arrow"},"‹"),"  ",(0,i.h)(a.xv,{id:"forgotPassword.backToLogin"},"Back to login"))))}},{key:"renderCheckEmail",value:function(e){return(0,i.h)("div",null,(0,i.h)("div",{className:"aaw-title"},(0,i.h)(a.xv,{id:"forgotPassword.checkYourEmail"},"Please check your email")),(0,i.h)("div",{role:"alert","aria-live":"assertive"},(0,i.h)("span",null,(0,i.h)(a.xv,{id:"forgotPassword.linkToResetYourPassword",fields:{email:this.state.username}},"If this account exists, a password reset email will be sent to"," ",this.state.username,"."))),(0,i.h)("span",null,(0,i.h)(a.xv,{id:"forgotPassword.kindlyClickLink"},"Kindly click the link in the email to reset your password.")),(0,i.h)("div",{className:"aaw-back-to-login"},(0,i.h)("a",{href:"javascript:",onClick:e.onCancel},(0,i.h)("span",{className:"aaw-left-arrow"},"‹"),"  ",(0,i.h)(a.xv,{id:"forgotPassword.backToLogin"},"Back to login"))))}},{key:"render",value:function(e,t){return t.submitted?this.renderCheckEmail(e):this.renderForgotPassword(e)}}])&&Qe(t.prototype,o),r&&Qe(t,r),u}(i.wA);function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=gt(e);if(t){var n=gt(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return lt(this,o)}}function lt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(d,e);var t,o,r,s=ut(d);function d(){var e;at(this,d);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=s.call.apply(s,[this].concat(o))).state={active:!1,value:e.props.defaultValue||"",type:"password"},e.onChange=function(t){var o=t.target.value;e.setState((function(e,t){return t.onPasswordChange(o),{value:o}}))},e.onFocus=function(){e.setState({active:!0})},e.onBlur=function(){e.state.value||e.setState({active:!1,type:"password"})},e.showPassword=function(){e.setState({type:"password"===e.state.type?"text":"password"})},e.onKeyUp=function(t){var o=t.which||t.keyCode;32!==o&&13!==o||e.showPassword()},e.onAnimationStart=function(t){"onAutoFillStart"===t.animationName&&e.onFocus()},e}return t=d,(o=[{key:"componentDidMount",value:function(){this.passwordInput.addEventListener("animationstart",this.onAnimationStart,!1)}},{key:"componentWillUnmount",value:function(){this.passwordInput&&this.passwordInput.removeEventListener("animationstart",this.onAnimationStart,!1)}},{key:"render",value:function(e){var t=this;return(0,i.h)("div",{className:n()("aaw-input-field aaw-form__input",{"aaw-input--error":e.error,"aaw-input-border--blue":"text"===this.state.type&&""!==this.state.value})},(0,i.h)("input",{id:"password-input--".concat(e.tab),value:this.state.value,type:this.state.type,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,ref:function(e){return t.passwordInput=e},"aria-describedby":e.error&&"aaw-error","aria-invalid":e.error,maxLength:this.props.maxLength}),(0,i.h)("label",{className:n()({"aaw-active":this.state.active||this.state.value}),htmlFor:"password-input--".concat(e.tab),"aria-describedby":"password-input--".concat(e.tab),role:"tooltip"},(0,i.h)(a.xv,{id:"password"},"Password")),(0,i.h)(a.Cf,null,(0,i.h)("span",{className:n()("aaw-button--show-password",{"aaw-icon--visibility-off":"password"===this.state.type,"aaw-icon--visibility":"text"===this.state.type}),id:"".concat(this.props.tab,"-showPasswordButton"),role:"button","aria-pressed":String("password"!==this.state.type),"aria-label":(0,i.h)(a.xv,{id:"showPassword"},"Show password"),tabindex:"0",onKeyUp:this.onKeyUp,title:(0,i.h)(a.xv,{id:"showPassword"},"Show password"),onClick:this.showPassword})))}}])&&st(t.prototype,o),r&&st(t,r),d}(i.wA);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=yt(e);if(t){var n=yt(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return $t(this,o)}}function $t(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(u,e);var t,o,r,s=bt(u);function u(){var e;ht(this,u);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=s.call.apply(s,[this].concat(o))).state={username:"",password:"",error:"",status:"",usernameError:!1,passwordError:!1,isErrorFocused:!1,showDeletionCancellationDialog:!1,isActivationLinkRequired:!1,isProcessing:!1,isResetLinkRequired:!1,isResetPasswordRequired:!1,isSignupLinkRequired:!1,isErrorNotify:!1,disableResentLink:!1},e.handleChangeUsername=function(t){e.setState({username:t.toLowerCase()})},e.handleAccountDeletionCancellation=function(){e.setState({status:"cancel_deletion"})},e.handleCancelAccountDeletionCancellation=function(){e.setState({showDeletionCancellationDialog:!1,error:"",isErrorFocused:!1})},e.handleChangePassword=function(t){e.setState({password:t})},e.handleErrorMessageBlur=function(){e.setState({isErrorFocused:!1})},e.handleSubmit=function(t){t.preventDefault(),e.setState({error:"",deleteScheduledAt:"",usernameError:!1,passwordError:!1,isErrorFocused:!1,isActivationLinkRequired:!1,isResetLinkRequired:!1,isResetPasswordRequired:!1,isSignupLinkRequired:!1,disableResentLink:!1,isProcessing:!0});var o=e.state,r=o.username,n=o.password,i=o.status;R(r)?L(n)?(0,ge.Z)({username:r,password:n,dvToken:e.props.dataVisorToken,clientId:e.props.clientId,apiKey:e.props.apiKey,gaClientId:e.props.gaClientId,status:i}).then((function(t){e.setState({isProcessing:!1});var o=t.data;if(202==t.status){var i=Object.assign(o||{},{username:r,password:n,clientId:e.props.clientId,gaClientId:e.props.gaClientId});e.props.on2FANeeded(i)}else{if(!o||!o.code)return e.props.onSuccess(o);switch(o.code){case"USER_NOT_ACTIVATED":e.setState({error:"errors.userNotActivated",isActivationLinkRequired:!0,isErrorFocused:!0,isResetLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isCustomerSupportInactive:!1,isCustomerSupportLocked:!1});break;case"USER_INACTIVE":e.setState({error:"errors.userInactive",isErrorFocused:!0,isCustomerSupportInactive:!0,isResetLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isCustomerSupportLocked:!1});break;case"USER_LOCKED":e.setState({error:"errors.userLocked",isErrorFocused:!0,isCustomerSupportLocked:!0,isResetLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isCustomerSupportInactive:!1});break;case"USER_SCHEDULED_FOR_DELETION":e.setState({error:"errors.userScheduledForDeletion",isErrorFocused:!0,deleteScheduledAt:o.deleteScheduledAt,showDeletionCancellationDialog:!0,isCustomerSupportLocked:!1,isResetLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isCustomerSupportInactive:!1});break;case"USER_TERMINATED":o.failedLoginAttempt<10?e.setState({error:"errors.userForgotten",isErrorFocused:!0,isActivationLinkRequired:!0,isResetLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isCustomerSupportInactive:!1,isCustomerSupportLocked:!1}):e.setState({error:"errors.userTerminated",isErrorFocused:!0,isResetPasswordRequired:!0,isErrorNotify:!1,isResetLinkRequired:!1,isActivationLinkRequired:!1,isCustomerSupportInactive:!1,isCustomerSupportLocked:!1});break;default:if(10===o.failedLoginAttempt&&"active"===o.status)e.setState({error:"errors.userTerminated",isErrorFocused:!0,isResetLinkRequired:!1,isResetPasswordRequired:!0,isErrorNotify:!0,isActivationLinkRequired:!1,isCustomerSupportInactive:!1,isCustomerSupportLocked:!1});else if(o.failedLoginAttempt<10&&"terminated"===o.status)e.setState({error:"errors.userForgotten",isErrorFocused:!0,isActivationLinkRequired:!0,isErrorNotify:!1,isResetPasswordRequired:!1,isResetLinkRequired:!1,isCustomerSupportInactive:!1,isCustomerSupportLocked:!1});else if("inactive"===o.status)e.setState({error:"errors.userInactive",isErrorFocused:!0,isCustomerSupportInactive:!0,isActivationLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isResetLinkRequired:!1,isCustomerSupportLocked:!1});else if("locked"===o.status)e.setState({error:"errors.userLocked",isErrorFocused:!0,isCustomerSupportLocked:!0,isActivationLinkRequired:!1,isErrorNotify:!1,isResetPasswordRequired:!1,isResetLinkRequired:!1,isCustomerSupportInactive:!1});else if(o.failedLoginAttempt%3==0)e.props.onForgotPassword({username:r});else{var a=o.availableAuthenticationTypes.includes("password"),s=a?"errors.invalidEmailOrPassword":"errors.invalidEmailOrPasswordForSocial",d=a?void 0:o.availableAuthenticationTypes.filter((function(e){return"password"!==e}));e.setState({error:s,passwordError:!0,usernameError:!0,isErrorFocused:!0,isResetLinkRequired:!1,isResetPasswordRequired:!1,isActivationLinkRequired:!1,isErrorNotify:!1,isCustomerSupportInactive:!1,isCustomerSupportLocked:!1,allowedLoginProviders:d})}}e.props.onFailure(o.code)}})).catch((function(t){e.props.onFailure("CONNECTION_ERROR"),console.error(t),e.setState({error:"errors.invalidEmailOrPassword",passwordError:!0,usernameError:!0,isErrorFocused:!0,isResetLinkRequired:!1,isResetPasswordRequired:!1,isErrorNotify:!1})})):e.setState({error:"errors.incorrectPassword",passwordError:!0,isErrorFocused:!0,isResetLinkRequired:!0}):e.setState({error:"errors.invalidEmail",usernameError:!0,isErrorFocused:!0})},e.resendActivationLink=function(t){if(t.preventDefault(),!e.state.disableResentLink){var o=(0,d.G3)(),r=e.state.username;ue(r,o,e.props.clientId,e.props.apiKey).catch((function(e){console.error(e)})),e.setState({disableResentLink:!0})}},e}return t=u,(o=[{key:"componentWillReceiveProps",value:function(e){e.error&&this.setState({error:e.error})}},{key:"render",value:function(e,t){var o=null;return t.isResetLinkRequired||t.isResetPasswordRequired?o=e.onForgotPassword:t.isSignupLinkRequired&&(o=e.onSwitchToSignup),(0,i.h)("div",{id:"aaw-login-tab",className:n()({"aaw-tab-container--vertical":e.hasSocialLogin}),role:"tabpanel","aria-labelledby":"aaw-login"},(0,i.h)("form",{onSubmit:this.handleSubmit},(0,i.h)(y,{error:t.error,isFocused:t.isErrorFocused,email:this.state.username,onBlur:this.handleErrorMessageBlur,resetLink:t.isResetLinkRequired,isTerminated:t.isResetPasswordRequired,isTerminatedNotify:t.isErrorNotify,activationLink:t.isActivationLinkRequired,customerSupportLogin:t.isCustomerSupportInactive,deleteScheduledAt:t.deleteScheduledAt,customerSupportLocked:t.isCustomerSupportLocked,linkAction:o,linkFunction:this.resendActivationLink,allowedLoginProviders:t.allowedLoginProviders}),t.showDeletionCancellationDialog?(0,i.h)(C,{isProcessing:t.isProcessing,isHorizontal:e.isHorizontal,hasSocialLogin:e.hasSocialLogin,handleCancelAccountDeletionCancellation:this.handleCancelAccountDeletionCancellation,cancelDeletionRequest:this.handleAccountDeletionCancellation}):(0,i.h)("div",null,(0,i.h)("div",{className:n()({"aaw-row aaw-align--vertical":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m8":e.isHorizontal&&!e.hasSocialLogin,"aaw-top-padding":!e.isHorizontal||e.hasSocialLogin})},(0,i.h)(a.Cf,null,(0,i.h)("a",{href:"javascript:",id:"forgotPasswordLink",name:"forgot-password",onClick:e.onForgotPassword,"aria-label":(0,i.h)(a.xv,{id:"loginTab.forgotPassword"},"Forgot password?")},(0,i.h)(a.xv,{id:"loginTab.forgotPassword"},"Forgot password?"))))),(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"email"},"Email"),error:t.usernameError,tab:"login",maxLength:64,onValueChange:this.handleChangeUsername})),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)(ct,{error:t.passwordError,tab:"login",onPasswordChange:this.handleChangePassword,maxLength:16}))),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m4 aaw-el--top-padding":e.isHorizontal&&!e.hasSocialLogin,"aaw-top-padding":!e.isHorizontal||e.hasSocialLogin})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",id:"loginbutton",className:"aaw-button",name:"login",value:(0,i.h)(a.xv,{id:"loginTab.login"},"Log in"),role:"button"}))))))}}])&&mt(t.prototype,o),r&&mt(t,r),u}(i.wA);function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=Pt(e);if(t){var n=Pt(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return vt(this,o)}}function vt(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(u,e);var t,o,r,s=Et(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).handleChangeUsername=function(e){t.setState({username:e.toLowerCase()})},t.handleChangePassword=function(e){t.setState({password:e})},t.handleErrorMessageBlur=function(){t.setState({isErrorFocused:!1})},t.handleSubmit=function(e){e.preventDefault(),t.setState({error:"",usernameError:!1,passwordError:!1,customerSupportRegister:!1,isActivationLinkRequired:!1});var o=t.state,r=o.username,n=o.password;if(R(r))if(L(n)){var i=(0,d.uR)(document.cookie),a={username:r,password:n,clientId:t.props.clientId,country:i.country,nationality:i.nationality,gaClientId:t.props.gaClientId};t.props.onSubmit(a)}else t.setState({error:"errors.incorrectPasswordSignup",passwordError:!0,isErrorFocused:!0});else t.setState({error:"errors.invalidEmail",usernameError:!0,isErrorFocused:!0})},t.state={username:e.email,password:e.password,error:e.error,usernameError:!1,passwordError:!1,isErrorFocused:!1,isLoginLinkRequired:!1,customerSupportRegister:e.customerSupportRegister,isActivationLinkRequired:e.isActivationLinkRequired},t}return t=u,(o=[{key:"componentWillReceiveProps",value:function(e){e.error&&this.setState({error:e.error}),e.email&&this.setState({username:e.email})}},{key:"render",value:function(e,t){return(0,i.h)("div",{id:"aaw-signup-tab",className:n()({"aaw-tab-container--vertical":e.hasSocialLogin}),role:"tabpanel","aria-labelledby":"aaw-signup"},(0,i.h)("form",{onSubmit:this.handleSubmit},(0,i.h)(y,{error:t.error,activationLink:t.isActivationLinkRequired,customerSupportRegister:t.customerSupportRegister,linkFunction:this.resendActivationLink,isFocused:t.isErrorFocused,email:e.email,onBlur:this.handleErrorMessageBlur}),(0,i.h)("div",{className:n()({"aaw-row":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)(W,{textLabel:(0,i.h)(a.xv,{id:"email"},"Email"),error:t.usernameError,tab:"signup",onValueChange:this.handleChangeUsername,defaultValue:t.username,maxLength:64})),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m6":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)(ct,{error:t.passwordError,tab:"signup",defaultValue:t.password,onPasswordChange:this.handleChangePassword,maxLength:16}))),(0,i.h)("div",{className:n()({"aaw-row aaw-align--vertical":e.isHorizontal&&!e.hasSocialLogin})},(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m7":e.isHorizontal,"aaw-top-padding":!e.isHorizontal,"aaw--hidden":e.hasSocialLogin})},(0,i.h)("label",{className:"aaw-agree-terms",htmlFor:"agree"},(0,i.h)(a.xv,{id:"signupTab.iAgree"}),(0,i.h)(a.Cf,null,(0,i.h)("a",{href:(0,i.h)(a.xv,{id:"signupTab.termsAndConditionsLink"},"https://www.airasia.com/my/en/about-us/our-policies.page#BIGLoyalty"),target:"_blank",id:"termsConditionsLink","aria-label":(0,i.h)(a.xv,{id:"signupTab.termsAndConditions"},"Terms and conditions, Privacy Policy and Terms of use")},(0,i.h)(a.xv,{id:"signupTab.termsAndConditions"},"Terms and conditions, Privacy Policy and Terms of use"))),(0,i.h)(a.xv,{id:"signupTab.termsAndConditionsEnd"}))),(0,i.h)("div",{className:n()({"aaw-col aaw-s12 aaw-m5 aaw-el--top-padding":e.isHorizontal&&!e.hasSocialLogin,"aaw-top-padding":e.hasSocialLogin||!e.isHorizontal})},(0,i.h)(a.Cf,null,(0,i.h)("input",{type:"submit",id:"signupButton",className:"aaw-button",name:"signup",value:(0,i.h)(a.xv,{id:"signupTab.signupForFree"},"Sign up for free"),role:"button"}))))))}}])&&Nt(t.prototype,o),r&&Nt(t,r),u}(i.wA),Ot=o(571);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Rt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(o),!0).forEach((function(t){Lt(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):wt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Lt(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function It(e,t,o,r,n,i,a){try{var s=e[i](a),d=s.value}catch(e){return void o(e)}s.done?t(d):Promise.resolve(d).then(r,n)}function Dt(e){return function(){var t=this,o=arguments;return new Promise((function(r,n){var i=e.apply(t,o);function a(e){It(i,r,n,a,s,"next",e)}function s(e){It(i,r,n,a,s,"throw",e)}a(void 0)}))}}function Mt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=kt(e);if(t){var n=kt(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return xt(this,o)}}function xt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(h,e);var t,o,r,c,p=Ft(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this,e)).tabs=["login","signup"],t.state={forgotPasswordTab:!1,activeTab:"login",loaded:!1,authenticated:!1,userId:null,defaultEmail:"",error:"",weChatOpenId:"",weChatState:"",socialLogin:"",additionalFields:!1,additionalWeChatFieldsTab:!1,userData:{},countries:{},responseData:null,orientation:"",customerSupportRegister:!1,renderGenderAndNameFields:!1,dataVisorToken:null,showDeletionCancellationDialog:!1,status:"",network:"",isOptEnabledForUser:!1,config:t.props.config},t.handleAccountDeletionCancellation=function(){t.setState({status:"cancel_deletion"})},t.handleCancelAccountDeletionCancellation=function(){t.setState({showDeletionCancellationDialog:!1})},t.isHorizontal=function(){return"horizontal"===t.props.config.orientation},t.hasSocialLoginButtons=function(){var e=!0;return t.socialButtons[0].length>8&&(e=!1),t.socialButtons.indexOf("google")<0&&t.socialButtons.indexOf("wechat")<0&&t.hideFBLogin&&(e=!1),t.socialButtons.indexOf("google")<0&&t.socialButtons.indexOf("facebook")<0&&t.wechatEnabled&&(e=!1),e},t.handleClick=function(e){t.setState({error:""}),t.state.activeTab!==e&&t.setState((function(e){return{activeTab:"login"===e.activeTab?"signup":"login"}}))},t.handleKeyUp=function(e){var o=e.which||e.keyCode,r=e.target.id;37!==o&&39!==o||t.setState((function(e){return{activeTab:"login"===e.activeTab?"signup":"login"}})),13===o&&t.setState((function(){return{activeTab:"aaw-login"===r?"login":"signup"}}))},t.onLogout=function(){u.Z.del().then((function(){t.setState({authenticated:!1,userId:null}),(window.gtmDataLayer||[]).push({event:"login",memberId:null})}))},t.onSwitchToLogin=function(e){t.setState({activeTab:"login",defaultEmail:e})},t.onSwitchToSignup=function(e){t.setState({activeTab:"signup",defaultEmail:e})},t.setSocialNetwork=function(e){t.setState({network:e})},t.cancelDeletionRequest=Dt(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.state.network,t.loginWith(o,{status:"cancel_deletion"});case 2:case"end":return e.stop()}}),e)}))),t.navBackFromAdditionalFields=function(){t.setState({forgotPasswordTab:!1,additionalFields:!1,additionalWeChatFieldsTab:!1,authenticated:!1})},t.onSignupError=function(e){switch(e.code){case"USER_ALREADY_EXISTS":t.setState({additionalFields:!1,activeTab:"signup",error:"errors.emailExists",defaultEmail:t.state.userData.username,isActivationLinkRequired:!1});break;case"PHONE_NUMBER_ALREADY_REGISTERED":t.setState({additionalFields:!1,activeTab:"signup",error:"errors.mobileNumberExists",defaultEmail:t.state.userData.username,isActivationLinkRequired:!1,authenticated:!1});break;case"USER_INACTIVE":t.setState({additionalFields:!1,activeTab:"signup",error:"errors.userInactiveRegister",customerSupportRegister:!0,defaultEmail:t.state.userData.username});break;case"USER_TERMINATED":t.setState({additionalFields:!1,activeTab:"signup",error:"errors.userForgotten",isActivationLinkRequired:!0,defaultEmail:t.state.userData.username});break;case"USER_IS_DELETED":t.setState({additionalFields:!1,activeTab:"signup",error:"errors.userDeletedPreviously",defaultEmail:t.state.userData.username});break;default:t.setState({additionalFields:!1,activeTab:"signup",error:"errors.serverError"})}},t.onSuccessLogin=function(){var e=Dt(regeneratorRuntime.mark((function e(o){var r,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ce.W)(t.apiKey,t.clientId,t.gaClientId);case 2:return r=e.sent,e.next=5,(0,ce.f)(t.apiKey,t.clientId,t.gaClientId);case 5:return n=e.sent,t.setState({authenticated:!0,additionalFields:!1,additionalWeChatFieldsTab:!1,userId:o.userId}),e.next=9,(0,g.Z)(o.userId,o.accessToken,t.clientId,t.apiKey,t.gaClientId);case 9:if(i=e.sent,!(a=t._shouldRenderGenderMobileAndNameFields(i,n.isEnforcedPostLogin,r.isEnabledForUser))){e.next=14;break}return t.setState({additionalFields:!0,userData:Rt(Rt({},i),o),isOptEnabledForUser:r.isEnabledForUser,renderGenderAndNameFields:a}),e.abrupt("return");case 14:return e.next=16,u.Z.set(o);case 16:Ot.Z.send(o,"login"),t.props.config.successCallback(o),o.network&&"wechat"==o.network?(window.gtmDataLayer||[]).push({event:"signupSuccess",signupMethod:"wechat",email:o.email}):(window.gtmDataLayer||[]).push({event:"login",loginMethod:"email",loyaltyId:o.loyaltyId});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setLogoutStatus=function(e){t.setState({loaded:!0,authenticated:!1,activeTab:t.hideLoginTab?"signup":"login"}),t.onFailureLogin(e)},t.onFailureLogin=function(){}